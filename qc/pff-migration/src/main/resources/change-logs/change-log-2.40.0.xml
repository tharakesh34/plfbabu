<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">
	<property name="add.schema" value="dbo." dbms="mssql" />
	<property name="add.schema" value=" " dbms="oracle" />
	<property name="call.substr" value="substring" dbms="mssql" />
	<property name="call.substr" value="substr" dbms="oracle" />
	<property name="call.auditdb" value="PFFBFSQCAudit.." dbms="mssql" />
	<property name="call.auditdb" value=" " dbms="oracle" />
	<property name="call.concatenate" value="+" dbms="mssql" />
	<property name="call.concatenate" value="||" dbms="oracle" />
	<property name="call.collength" value="LEN" dbms="mssql" />
	<property name="call.collength" value="LENGTH" dbms="oracle" />

<changeSet id="2" author="Madhubabu">
	<createView viewName="FinCovenantType_View" replaceIfExists="true">
		SELECT   T1.FinReference, T1.CovenantType, T1.Description, T1.MandRole, T1.AlwWaiver,
	         T1.AlwPostpone, T1.PostponeDays,T3.DocTypeDesc CovenantTypeDesc,T3.DocIsCustDoc lovdescIsCustDoc,T4.RoleDesc MandRoleDesc,
	         T1.ReceivableDate,T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode,
	         T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId		 
	         FROM  FinCovenantType_Temp T1 INNER JOIN   
			  BMTDocumentTypes T3 ON T3.DocTypeCode = T1.CovenantType  LEFT JOIN
			  SecRoles T4 ON T4.RoleCd = T1.MandRole
			
	UNION ALL
	SELECT   T1.FinReference, T1.CovenantType, T1.Description, T1.MandRole, T1.AlwWaiver,
	         T1.AlwPostpone, T1.PostponeDays,T3.DocTypeDesc CovenantTypeDesc,T3.DocIsCustDoc lovdescIsCustDoc,T4.RoleDesc MandRoleDesc,
	         T1.ReceivableDate,T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode,
	         T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId		 
	         FROM  FinCovenantType T1 INNER JOIN  
			  BMTDocumentTypes T3 ON T3.DocTypeCode = T1.CovenantType  LEFT JOIN
			  SecRoles T4 ON T4.RoleCd = T1.MandRole
			
	WHERE NOT EXISTS 
	                 (SELECT   1 
					  FROM        FinCovenantType_Temp 
					  WHERE       FinReference = T1.FinReference and CovenantType = T1.CovenantType)
	</createView>
</changeSet>
<changeSet id="3" author="Madhubabu">
	<createView viewName="FinCovenantType_AView"
		replaceIfExists="true">
		SELECT   T1.FinReference, T1.CovenantType, T1.Description, T1.MandRole, T1.AlwWaiver,
         T1.AlwPostpone, T1.PostponeDays,T3.DocTypeDesc CovenantTypeDesc,T3.DocIsCustDoc lovdescIsCustDoc,T4.RoleDesc MandRoleDesc,
         T1.ReceivableDate,T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode,
         T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId		 
         FROM  FinCovenantType T1 INNER JOIN  
		  FinanceMain T2 ON T2.FinReference = T1.FinReference  INNER JOIN 
		  BMTDocumentTypes T3 ON T3.DocTypeCode = T1.CovenantType  INNER JOIN 
		  SecRoles T4 ON T4.RoleCd = T1.MandRole
	</createView>
</changeSet>
	<changeSet id="4" author="Madhubabu">
		<createView viewName="FinCovenantType_TView"
			replaceIfExists="true">
		SELECT   T1.FinReference, T1.CovenantType, T1.Description, T1.MandRole, T1.AlwWaiver,
         T1.AlwPostpone, T1.PostponeDays,T3.DocTypeDesc CovenantTypeDesc,T3.DocIsCustDoc lovdescIsCustDoc,T4.RoleDesc MandRoleDesc,
         T1.ReceivableDate,T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode,
         T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId		 
         FROM  FinCovenantType_Temp T1 INNER JOIN  
		  FinanceMain_Temp T2 ON T2.FinReference = T1.FinReference  INNER JOIN 
		  BMTDocumentTypes T3 ON T3.DocTypeCode = T1.CovenantType  INNER JOIN 
		  SecRoles T4 ON T4.RoleCd = T1.MandRole
	</createView>
	</changeSet>
	
	<changeSet id="5" author="Prasad">
		<update tableName="reportList ">
			<column name="ReportFileName">ReportList09_orgFM</column>
			<where>Code='OriginationFinanceMain'</where>
		</update>
	</changeSet>
	
	<changeSet id="6" author="Prasad">
		<update tableName="reportList ">
			<column name="FIELDTYPE">String,String,String,String,BigDecimal,Date,String,String,String</column>
			<where>Code='OriginationFinanceMain'</where>
		</update>
	</changeSet>
	<changeSet id="7" author="SreeRavali">
	<sql>
	INSERT INTO ErrorDetails VALUES('30572','EN','E','RepaymentFrequency should be monthly,when PlannedEMI is allowed','test','Approved','','','','','',0,CURRENT_TIMESTAMP,1000,0);
	</sql>
	</changeSet>
		<changeSet id="8" author="Madhubabu">
			<addColumn tableName="DocumentDetails">
				<column name="DocReceivedDate" type="datetime" />
			</addColumn>
	</changeSet>
		<changeSet id="9" author="Madhubabu">
			<addColumn tableName="DocumentDetails_Temp">
				<column name="DocReceivedDate" type="datetime" />
			</addColumn>
	</changeSet>
	
	<changeSet id="10" author="Madhubabu">
		<createView viewName="DocumentDetails_View"
			replaceIfExists="true">
		SELECT     T1.DocId, T1.DocModule, T1.DocCategory, T1.Doctype, T1.DocName, T1.DocImage, T1.FinEvent,
					   T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode,
					   T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId, T1.ReferenceId, T1.DocRefId,
					   T1.DocPurpose, T1.DocUri,T1.DocReceivedDate
			FROM       DocumentDetails_temp T1
			UNION ALL
			SELECT     T1.DocId, T1.DocModule, T1.DocCategory, T1.Doctype, T1.DocName, T1.DocImage, T1.FinEvent,
					   T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode,
					   T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId, T1.ReferenceId, T1.DocRefId,
					   T1.DocPurpose, T1.DocUri,T1.DocReceivedDate
			FROM       DocumentDetails T1
			WHERE      NOT EXISTS (SELECT 1 FROM DocumentDetails_temp WHERE DocId = T1.DocId)
	</createView>
	</changeSet>
	<changeSet id="11" author="Madhubabu">
		<createView viewName="DocumentDetails_TView"
			replaceIfExists="true">
		SELECT     T1.DocId, T1.DocModule, T1.DocCategory, T1.Doctype, T1.DocName, T1.DocImage, T1.FinEvent,
		   T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode,
		   T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId, T1.ReferenceId, T1.DocRefId,
		   T1.DocPurpose, T1.DocUri,T1.DocReceivedDate
			FROM   DocumentDetails_temp T1
			WHERE      NOT EXISTS (SELECT 1 FROM DocumentDetails_temp WHERE DocId = T1.DocId)
	</createView>
	</changeSet>
	<changeSet id="12" author="Irfan">
	<sql>
	UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);
	INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='CL_ORIGINATION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_FinanceMainDialog_btnRecalEMIH'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
	UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);
	</sql>
	</changeSet>
	<changeSet id="13" author="Irfan">
	<sql>
			UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);

			Delete From SecGroupRights where GrpId IN (Select GrpId  From SecGroups Where GrpCode = 'CL_ORIGINATION_WRM') And RightID IN (SELECT RightID FROM SecRights where RightName = 'FinanceMainDialog_MaxPlanEmiPerAnnum');
			Delete From SecGroupRights where GrpId IN (Select GrpId  From SecGroups Where GrpCode = 'CL_ORIGINATION_WRM') And RightID IN (SELECT RightID FROM SecRights where RightName = 'FinanceMainDialog_MaxPlanEmi');
			Delete From SecGroupRights where GrpId IN (Select GrpId  From SecGroups Where GrpCode = 'CL_ORIGINATION_WRM') And RightID IN (SELECT RightID FROM SecRights where RightName = 'FinanceMainDialog_PlanEmiHLockPeriod');
			Delete From SecGroupRights where GrpId IN (Select GrpId  From SecGroups Where GrpCode = 'CL_ORIGINATION_WRM') And RightID IN (SELECT RightID FROM SecRights where RightName = 'FinanceMainDialog_CpzAtPlanEmi');
			Delete From SecGroupRights where GrpId IN (Select GrpId  From SecGroups Where GrpCode = 'CL_ORIGINATION_MAKER') And RightID IN (SELECT RightID FROM SecRights where RightName = 'FinanceMainDialog_CpzAtPlanEmi');
			
			UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);
			</sql>
	</changeSet>
	<changeSet id="14" author="Irfan">
		<sql>
			INSERT INTO ErrorDetails VALUES('30573','EN','E','Select  AlwPlannedEmiH (OR) Stepping Finance','test','Approved','','','','','',0,CURRENT_TIMESTAMP,1000,0);
			INSERT INTO ErrorDetails VALUES('30574','EN','E','Select  AlwPlannedEmiH (OR) AlwMultiDisbursment','test','Approved','','','','','',0,CURRENT_TIMESTAMP,1000,0);
		</sql>
	</changeSet>
	<changeSet id="15" author="Irfan">
		<sql>
		Update ErrorDetails Set ErrorMessage='Select Any One Of  AlwPlannedEmiH (OR) Stepping Finance' where ErrorCode = '30573';
		Update ErrorDetails Set ErrorMessage='Select Any One Of  AlwPlannedEmiH (OR) AlwMultiDisbursment' where ErrorCode = '30574';
		</sql>
	</changeSet>
	<changeSet id="16" author="Madhubabu">
		<sql>
	INSERT INTO SecGroups SELECT (select (SeqNo+1) from SeqSecGroups), 'COVENANTTYPE_UPLOAD', 'Allow to upload covenants in finacne process', 0,1000,CURRENT_TIMESTAMP,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroups WHERE 0=0;
	INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='COVENANTTYPE_UPLOAD') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_CustomerDialog_NewCustomerDocuments'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
	INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='COVENANTTYPE_UPLOAD') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='CustomerDocumentDialog_custDocType'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
	INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='COVENANTTYPE_UPLOAD') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='CustomerDocumentDialog_custDocTitle'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
	INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='COVENANTTYPE_UPLOAD') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='CustomerDocumentDialog_custDocIssuedCountry'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
	INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='COVENANTTYPE_UPLOAD') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='CustomerDocumentDialog_custDocSysName'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
	INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='COVENANTTYPE_UPLOAD') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='CustomerDocumentDialog_custDocRcvdOn'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
	INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='COVENANTTYPE_UPLOAD') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='CustomerDocumentDialog_custDocExpDate'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
	INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='COVENANTTYPE_UPLOAD') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='CustomerDocumentDialog_custDocIssuedOn'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
	INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='COVENANTTYPE_UPLOAD') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='CustomerDocumentDialog_custDocIsVerified'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
	INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='COVENANTTYPE_UPLOAD') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='CustomerDocumentDialog_custDocVerifiedBy'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
	INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='COVENANTTYPE_UPLOAD') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='CustomerDocumentDialog_custDocIsAcrive'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
	INSERT INTO SecRoles SELECT (select MAX(RoleID)+1 from SecRoles),1,'COVENANTTYPE_UPLOAD','Capture Covenant File','',0,1000,null,' ',' ',null,' ',' ',' ',0 FROM SeqSecRoles WHERE 0=0;
	INSERT INTO secRoleGroups Values((Select max(RoleGrpID)+1 from secRoleGroups),(Select GrpID from SecGroups where GrpCode = 'COVENANTTYPE_UPLOAD'),(Select RoleID from secRoles where RoleCd = 'CL_DISB_BH'), 0, 1000, CURRENT_TIMESTAMP, null, null,null,null,null,null,0);
	INSERT INTO SecOperationRoles VALUES((select MAX(oprroleid)+1 from SecOperationRoles),(select oprid from SecOperations where OprCode='HOB'),(select roleid from SecRoles where RoleCd='COVENANTTYPE_UPLOAD'),1,1000,CURRENT_TIMESTAMP,'Approved','N','N','N','N','N',1)

		</sql>
	</changeSet>
	
	<changeSet id="17" author="Irfan">
		<sql>
		Update ErrorDetails Set ErrorMessage='Select either planned emi holiday (OR) Stepping finance is allowed;' where ErrorCode = '30573';
		Update ErrorDetails Set ErrorMessage='Select either planned emi holiday (OR) Multiple disbursement is allowed;' where ErrorCode = '30574';
		</sql>
	</changeSet>
	<changeSet id="18" author="Madhubabu">
		<sql>
	INSERT INTO secRoleGroups Values((Select max(RoleGrpID)+1 from secRoleGroups),(Select GrpID from SecGroups where GrpCode = 'COVENANTTYPE_UPLOAD'),(Select RoleID from secRoles where RoleCd = 'CL_DISB_CREDIT'), 0, 1000, CURRENT_TIMESTAMP, null, null,null,null,null,null,0);
	INSERT INTO secRoleGroups Values((Select max(RoleGrpID)+1 from secRoleGroups),(Select GrpID from SecGroups where GrpCode = 'COVENANTTYPE_UPLOAD'),(Select RoleID from secRoles where RoleCd = 'CL_DISB_CO_MAKER'), 0, 1000, CURRENT_TIMESTAMP, null, null,null,null,null,null,0);
	INSERT INTO secRoleGroups Values((Select max(RoleGrpID)+1 from secRoleGroups),(Select GrpID from SecGroups where GrpCode = 'COVENANTTYPE_UPLOAD'),(Select RoleID from secRoles where RoleCd = 'CL_DISB_CO_CHECKER'), 0, 1000, CURRENT_TIMESTAMP, null, null,null,null,null,null,0);
	INSERT INTO SecOperationRoles VALUES((select MAX(oprroleid)+1 from SecOperationRoles),(select oprid from SecOperations where OprCode='HOC'),(select roleid from SecRoles where RoleCd='COVENANTTYPE_UPLOAD'),1,1000,CURRENT_TIMESTAMP,'Approved','N','N','N','N','N',1);
	INSERT INTO SecOperationRoles VALUES((select MAX(oprroleid)+1 from SecOperationRoles),(select oprid from SecOperations where OprCode='WFODTCSM'),(select roleid from SecRoles where RoleCd='COVENANTTYPE_UPLOAD'),1,1000,CURRENT_TIMESTAMP,'Approved','N','N','N','N','N',1);
	INSERT INTO SecOperationRoles VALUES((select MAX(oprroleid)+1 from SecOperationRoles),(select oprid from SecOperations where OprCode='WFODTCSC'),(select roleid from SecRoles where RoleCd='COVENANTTYPE_UPLOAD'),1,1000,CURRENT_TIMESTAMP,'Approved','N','N','N','N','N',1);
	

		</sql>
	</changeSet>
	<changeSet id="19" author="Madhubabu">
		<sql>
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='COVENANTTYPE_UPLOAD') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_CustomerDocumentDialog_btnSave'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
		</sql>
	</changeSet>
	<changeSet id="20" author="Prasad">
		<update tableName="reportList ">
			<column name="fieldlabels">listheader_LovDescCustCIF.label,listheader_LovDescCustShrtName.label,listheader_FinReference.label,listheader_FinType.label,listheader_FinAmount.label,listheader_InitiateDate.label,listheader_LovDescRequestStage.label,listheader_RecordStatus.label</column>
			<column name="Fieldvalues">lovDescCustCIF,lovDescCustShrtName,finReference,finType,finAmount,initiateDate,lovDescRequestStage,recordStatus</column>
			<column name="fieldtype">String,String,String,String,BigDecimal,Date,String,String</column>
			<column name="reportfilename">ReportList08</column>
			<where>Code='OriginationFinanceMain'</where>
		</update>
	</changeSet>
	<changeSet id="21" author="SreeRavali">
	<sql>
	INSERT Into ReportList  VALUES 
	(N'COVENQ', N'FinanceMain', N'listheader_FinType.label,listheader_LovDescProductCodeName.label,listheader_LovDescCustCIF.label,listheader_FinReference.label,listheader_FinBranch.label,listheader_FinStartDate.label,listheader_NumberOfTerms.label,listheader_MaturityDate.label,listheader_FinCcy.label,listheader_FinancingAmount.label,listheader_CurFinAmount.label', N'finType,lovDescProductCodeName,lovDescCustCIF,finReference,finBranch,finStartDate,numberOfTerms,maturityDate,finCcy,financingAmount,curFinAmount', N'String,String,String,String,String,Date,int,Date,String,BigDecimal,BigDecimal', N'', N'ReportList11', N'Scoring Details', N'Loan Enquiry', 3, 1001, CURRENT_TIMESTAMP, N'Approved', N'', N'', N'', N'', N'', 0, 0);
</sql>
</changeSet>
<changeSet id="22" author="SreeRavali">
	<sql>
		UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS); 
 		INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='CL_ORIGINATION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_FinanceMainDialog_btnReschedule'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
  		INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='CL_ORIGINATION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_FinanceMainDialog_btnRmvTerms'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
  		UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS); 
	</sql>
</changeSet>
<changeSet id="23" author="SreeRavali">
		<sql>
			INSERT INTO ErrorDetails VALUES('30575','EN','E','Newly calculated Maturitydate should be greater than{0}.need to modify Terms','test','Approved','','','','','',0,CURRENT_TIMESTAMP,1000,0);
		</sql>
	</changeSet>
	
	<changeSet id="24" author="Siva">
		<createView viewName="FinanceEnquiry_View"
			replaceIfExists="true">
		SELECT     T1.FinReference, T1.FinBranch, T1.FinType, T1.FinCcy, T1.ScheduleMethod, T1.ProfitDaysBasis, T1.FinStartDate, T1.CalTerms NumberOfTerms, T1.CustID, T1.FinAmount, 
                      T1.GrcPeriodEndDate, T1.MaturityDate, T1.FinRepaymentAmount, T1.FinIsActive, T1.AllowGrcPeriod,T1.DownPayment, 
                      T1.MigratedFinance,T1.LastRepayDate, T1.LastRepayPftDate,T1.InsuranceAmt,
                      T5.FinTypeDesc LovDescFinTypeName, T6.CustCIF LovDescCustCIF, T6.CustShrtName LovDescCustShrtName, T7.BranchDesc LovDescFinBranchName, 
                      T1.Blacklisted, T5.FinScheduleOn LovDescFinScheduleOn, T1.FeeChargeAmt, T1.ClosingStatus, T8.CustTypeCtg, 
                      T1.GraceTerms, T5.FinDivision lovDescFinDivision, T5.FinCategory lovDescProductCodeName, 
                      T1.AlwMultiDisb , T5.FinIsAlwDifferment lovDescFinAlwDeferment,T1.Defferments,
                       (T1.FinAmount-T1.DownPayment+ T1.FeeChargeAmt+T1.InsuranceAmt) FinancingAmount,
                      (T1.FinAmount-T1.DownPayment- T1.FinRepaymentAmount+ T1.FeeChargeAmt+T1.InsuranceAmt) CurFinAmount,
                      T1.FinStatus ,T1.MandateID,T1.FinRepayMethod 
FROM          FinanceMain T1 INNER JOIN
                       RMTFinanceTypes T5 ON T1.FinType = T5.FinType INNER JOIN
                       Customers T6 ON T1.CustID = T6.CustID INNER JOIN
                       RMTBranches T7 ON T1.FinBranch = T7.BranchCode INNER JOIN
                       RMTCustTypes T8 ON T6.CustTypeCode = T8.CustTypeCode
	</createView>
	</changeSet>
	
	 <changeSet id="25" author="DurgaPrasad G">
		<sql>
			Delete from SECGROUPRIGHTS Where GRPID = (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='CL_ORIGINATION_MAKER') AND 
			RightId = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_AssetTypeAssignmentDialog_btnSave');
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='CL_ORIGINATION_MAKER') ,
			(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_AssetTypeAssignmentDialog_btnSave'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
		</sql>
</changeSet>
</databaseChangeLog>
