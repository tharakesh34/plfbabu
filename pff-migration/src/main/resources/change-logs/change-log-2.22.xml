<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">


	<changeSet author="Madhubabu" id="1">
		<createTable tableName="FinSchFrqInsurance">

			<column name="Reference" type="nvarchar(20)">
				<constraints primaryKey="true" nullable="false" />
			</column>
			<column name="Module" type="nvarchar(10)">
				<constraints primaryKey="true" nullable="false" />
			</column>
			<column name="InsuranceType" type="varchar(8)">
				<constraints primaryKey="true" nullable="false" />
			</column>
			<column name="InsReference" type="nvarchar(20)">
				<constraints primaryKey="true" nullable="false" />
			</column>
			<column name="InsSchDate" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="InsuranceRate" type="decimal(13,9)" />
			<column name="InsuranceFrq" type="nvarchar(5)" />
			<column name="Amount" type="decimal(18,0)" />
			<column name="Version" type="int" defaultValue="0" />
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="nvarchar(50)" />
			<column name="RoleCode" type="nvarchar(100)" />
			<column name="NextRoleCode" type="nvarchar(200)" />
			<column name="TaskId" type="nvarchar(50)" />
			<column name="NextTaskId" type="nvarchar(200)" />
			<column name="RecordType" type="nvarchar(50)" />
			<column name="WorkflowId" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet author="Madhubabu" id="2">
		<addForeignKeyConstraint constraintName="FK_FinSchFrqInsurance_InsuranceType"
			baseTableName="FinSchFrqInsurance" baseColumnNames="InsuranceType"
			referencedColumnNames="InsuranceType" referencedTableName="InsuranceType" />
	</changeSet>

	<changeSet author="Madhubabu" id="3">
		<addForeignKeyConstraint constraintName="FK_FinSchFrqInsurance_InsRef"
			baseTableName="FinSchFrqInsurance" baseColumnNames="Reference,Module,InsuranceType,InsReference"
			referencedColumnNames="Reference,Module,InsuranceType,InsReference"
			referencedTableName="FinInsurances" />
	</changeSet>

	<changeSet author="Madhubabu" id="4">
		<createTable tableName="WIFFinSchFrqInsurance">

			<column name="Reference" type="nvarchar(20)">
				<constraints primaryKey="true" nullable="false" />
			</column>
			<column name="Module" type="nvarchar(10)">
				<constraints primaryKey="true" nullable="false" />
			</column>
			<column name="InsuranceType" type="varchar(8)">
				<constraints primaryKey="true" nullable="false" />
			</column>
			<column name="InsReference" type="nvarchar(20)">
				<constraints primaryKey="true" nullable="false" />
			</column>
			<column name="InsSchDate" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="InsuranceRate" type="decimal(13,9)" />
			<column name="InsuranceFrq" type="nvarchar(5)" />
			<column name="Amount" type="decimal(18,0)" />
			<column name="Version" type="int" defaultValue="0" />
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="nvarchar(50)" />
			<column name="RoleCode" type="nvarchar(100)" />
			<column name="NextRoleCode" type="nvarchar(200)" />
			<column name="TaskId" type="nvarchar(50)" />
			<column name="NextTaskId" type="nvarchar(200)" />
			<column name="RecordType" type="nvarchar(50)" />
			<column name="WorkflowId" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet author="Madhubabu" id="5">
		<addForeignKeyConstraint constraintName="FK_WIFFinSchFrqInsurance_InsuranceType"
			baseTableName="WIFFinSchFrqInsurance" baseColumnNames="InsuranceType"
			referencedColumnNames="InsuranceType" referencedTableName="InsuranceType" />
	</changeSet>

	<changeSet author="Madhubabu" id="6">
		<addForeignKeyConstraint constraintName="FK_WIFFinSchFrqInsurance_InsRef"
			baseTableName="WIFFinSchFrqInsurance" baseColumnNames="Reference,Module,InsuranceType,InsReference"
			referencedColumnNames="Reference,Module,InsuranceType,InsReference"
			referencedTableName="FinInsurances" />
	</changeSet>

	<changeSet author="Madhubabu" id="7">
		<dropPrimaryKey tableName="FinSchFrqInsurance"
			constraintName="PK_FINSCHFRQINSURANCE" />
	</changeSet>

	<changeSet author="Madhubabu" id="8">
		<addPrimaryKey tableName="FinSchFrqInsurance"
			constraintName="PK_FINSCHFRQINSURANCE"
			columnNames="Reference,Module,InsuranceType,InsReference,InsSchDate" />
	</changeSet>
	<changeSet author="Madhubabu" id="9">
		<dropPrimaryKey tableName="WIFFinSchFrqInsurance"
			constraintName="PK_WIFFINSCHFRQINSURANCE" />
	</changeSet>
	<changeSet author="Madhubabu" id="10">
		<addPrimaryKey tableName="WIFFinSchFrqInsurance"
			constraintName="PK_WIFFINSCHFRQINSURANCE"
			columnNames="Reference,Module,InsuranceType,InsReference,InsSchDate" />
	</changeSet>

	<changeSet author="Madhubabu" id="11">
		<createTable tableName="FinSchFrqInsurance_Temp">

			<column name="Reference" type="nvarchar(20)">
				<constraints primaryKey="true" nullable="false" />
			</column>
			<column name="Module" type="nvarchar(10)">
				<constraints primaryKey="true" nullable="false" />
			</column>
			<column name="InsuranceType" type="varchar(8)">
				<constraints primaryKey="true" nullable="false" />
			</column>
			<column name="InsReference" type="nvarchar(20)">
				<constraints primaryKey="true" nullable="false" />
			</column>
			<column name="InsSchDate" type="datetime">
				<constraints primaryKey="true" nullable="false" />
			</column>
			<column name="InsuranceRate" type="decimal(13,9)" />
			<column name="InsuranceFrq" type="nvarchar(5)" />
			<column name="Amount" type="decimal(18,0)" />
			<column name="Version" type="int" defaultValue="0" />
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="nvarchar(50)" />
			<column name="RoleCode" type="nvarchar(100)" />
			<column name="NextRoleCode" type="nvarchar(200)" />
			<column name="TaskId" type="nvarchar(50)" />
			<column name="NextTaskId" type="nvarchar(200)" />
			<column name="RecordType" type="nvarchar(50)" />
			<column name="WorkflowId" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet author="Madhubabu" id="12">
		<addForeignKeyConstraint constraintName="FK_FinSchFrqIns_temp_InsuranceType"
			baseTableName="FinSchFrqInsurance_Temp" baseColumnNames="InsuranceType"
			referencedColumnNames="InsuranceType" referencedTableName="InsuranceType" />
	</changeSet>

	<changeSet author="Madhubabu" id="13">
		<addForeignKeyConstraint constraintName="FK_FinSchFrqIns_temp_InsRef"
			baseTableName="FinSchFrqInsurance_Temp" baseColumnNames="Reference,Module,InsuranceType,InsReference"
			referencedColumnNames="Reference,Module,InsuranceType,InsReference"
			referencedTableName="FinInsurances" />
	</changeSet>
	<changeSet author="Madhubabu" id="14">
		<createTable tableName="WIFFinSchFrqInsurance_Temp">

			<column name="Reference" type="nvarchar(20)">
				<constraints primaryKey="true" nullable="false" />
			</column>
			<column name="Module" type="nvarchar(10)">
				<constraints primaryKey="true" nullable="false" />
			</column>
			<column name="InsuranceType" type="varchar(8)">
				<constraints primaryKey="true" nullable="false" />
			</column>
			<column name="InsReference" type="nvarchar(20)">
				<constraints primaryKey="true" nullable="false" />
			</column>
			<column name="InsSchDate" type="datetime">
				<constraints primaryKey="true" nullable="false" />
			</column>
			<column name="InsuranceRate" type="decimal(13,9)" />
			<column name="InsuranceFrq" type="nvarchar(5)" />
			<column name="Amount" type="decimal(18,0)" />
			<column name="Version" type="int" defaultValue="0" />
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="nvarchar(50)" />
			<column name="RoleCode" type="nvarchar(100)" />
			<column name="NextRoleCode" type="nvarchar(200)" />
			<column name="TaskId" type="nvarchar(50)" />
			<column name="NextTaskId" type="nvarchar(200)" />
			<column name="RecordType" type="nvarchar(50)" />
			<column name="WorkflowId" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet author="Madhubabu" id="15">
		<addForeignKeyConstraint constraintName="FK_WIFFinSchFrqIns_Temp_InsuranceType"
			baseTableName="WIFFinSchFrqInsurance_Temp" baseColumnNames="InsuranceType"
			referencedColumnNames="InsuranceType" referencedTableName="InsuranceType" />
	</changeSet>

	<changeSet author="Madhubabu" id="16">
		<addForeignKeyConstraint constraintName="FK_WIFFinSchFrqIns_Temp_InsRef"
			baseTableName="WIFFinSchFrqInsurance_Temp" baseColumnNames="Reference,Module,InsuranceType,InsReference"
			referencedColumnNames="Reference,Module,InsuranceType,InsReference"
			referencedTableName="FinInsurances" />
	</changeSet>
	
	<changeSet author="Madhubabu" id="17">
		<createTable tableName="WIFFinInsurances_Temp">

			<column name="Reference" type="nvarchar(20)">
				<constraints primaryKey="true" nullable="false" />
			</column>
			<column name="Module" type="nvarchar(10)">
				<constraints primaryKey="true" nullable="false" />
			</column>
			<column name="InsuranceType" type="varchar(8)">
				<constraints primaryKey="true" nullable="false" />
			</column>
			<column name="InsReference" type="nvarchar(20)">
				<constraints primaryKey="true" nullable="false" />
			</column>
			<column name="InsuranceReq" type="nchar(1)" >
			<constraints  nullable="false" />
			</column>
			<column name="Provider" type="varchar(8)" />
			<column name="CalType" type="nchar(1)" />
			<column name="WaiverReason" type="nvarchar(50)" />
			<column name="InsuranceRate" type="decimal(13,9)" />
			<column name="InsuranceFrq" type="nvarchar(5)" />
			<column name="Amount" type="decimal(18,0)" />
			<column name="Version" type="int" defaultValue="0" />
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="nvarchar(50)" />
			<column name="RoleCode" type="nvarchar(100)" />
			<column name="NextRoleCode" type="nvarchar(200)" />
			<column name="TaskId" type="nvarchar(50)" />
			<column name="NextTaskId" type="nvarchar(200)" />
			<column name="RecordType" type="nvarchar(50)" />
			<column name="WorkflowId" type="bigint" />
		</createTable>
	</changeSet>
	
	<changeSet author="Madhubabu" id="18">
		<createTable tableName="WIFFinInsurances">

			<column name="Reference" type="nvarchar(20)">
				<constraints primaryKey="true" nullable="false" />
			</column>
			<column name="Module" type="nvarchar(10)">
				<constraints primaryKey="true" nullable="false" />
			</column>
			<column name="InsuranceType" type="varchar(8)">
				<constraints primaryKey="true" nullable="false" />
			</column>
			<column name="InsReference" type="nvarchar(20)">
				<constraints primaryKey="true" nullable="false" />
			</column>
			<column name="InsuranceReq" type="nchar(1)" >
			<constraints  nullable="false" />
			</column>
			<column name="Provider" type="varchar(8)" />
			<column name="CalType" type="nchar(1)" />
			<column name="WaiverReason" type="nvarchar(50)" />
			<column name="InsuranceRate" type="decimal(13,9)" />
			<column name="InsuranceFrq" type="nvarchar(5)" />
			<column name="Amount" type="decimal(18,0)" />
			<column name="Version" type="int" defaultValue="0" />
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="nvarchar(50)" />
			<column name="RoleCode" type="nvarchar(100)" />
			<column name="NextRoleCode" type="nvarchar(200)" />
			<column name="TaskId" type="nvarchar(50)" />
			<column name="NextTaskId" type="nvarchar(200)" />
			<column name="RecordType" type="nvarchar(50)" />
			<column name="WorkflowId" type="bigint" />
		</createTable>
	</changeSet>
	
	<!-- DROP Foreign Key Constraint Syntax -->
	<changeSet id="19" author="Madhubabu">
		<dropForeignKeyConstraint baseTableName="FinSchFrqInsurance_Temp"
			constraintName="FK_FinSchFrqIns_temp_InsRef" />
	</changeSet>
	
	<changeSet author="Madhubabu" id="20">
		<addForeignKeyConstraint constraintName="FK_FinSchFrqIns_temp_InsRef"
			baseTableName="FinSchFrqInsurance_Temp" baseColumnNames="Reference,Module,InsuranceType,InsReference"
			referencedColumnNames="Reference,Module,InsuranceType,InsReference"
			referencedTableName="FinInsurances_Temp" />
	</changeSet>
	<changeSet id="21" author="Madhubabu">
		<dropForeignKeyConstraint baseTableName="FinSchFrqInsurance_Temp"
			constraintName="FK_FinSchFrqIns_temp_InsRef" />
	</changeSet>
	<changeSet id="22" author="Madhubabu">
		<dropForeignKeyConstraint baseTableName="FinSchFrqInsurance"
			constraintName="FK_FinSchFrqInsurance_InsRef" />
	</changeSet>
	<changeSet id="23" author="Madhubabu">
		<dropForeignKeyConstraint baseTableName="WIFFinSchFrqInsurance"
			constraintName="FK_WIFFinSchFrqInsurance_InsRef" />
	</changeSet>
	<changeSet id="24" author="Madhubabu">
		<dropForeignKeyConstraint baseTableName="WIFFinSchFrqInsurance_Temp"
			constraintName="FK_WIFFinSchFrqIns_Temp_InsRef" />
	</changeSet>
	<changeSet id="25" author="Madhubabu">
		<createView replaceIfExists="true" viewName="FinSchFrqInsurance_TView">SELECT Reference, Module,InsuranceType,InsReference, InsSchDate, InsuranceRate, InsuranceFrq,
          Amount,Version, LastMntBy, LastMntOn,RecordStatus,RoleCode,NextRoleCode, 
          TaskId, NextTaskId, RecordType, WorkflowId
     FROM FinSchFrqInsurance_Temp</createView>
	</changeSet>
	<changeSet author="Surekha" id="surekha01">
		<createTable tableName="PresentmentRasonCode">

			<column name="Code" type="nvarchar(8)">
				<constraints primaryKey="true" nullable="false" />
			</column>
			<column name="Description" type="nvarchar(200)"/>
			<column name="Active" type="nchar(1)"/>
			<column name="Version" type="int" defaultValue="0" />
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="nvarchar(50)" />
			<column name="RoleCode" type="nvarchar(100)" />
			<column name="NextRoleCode" type="nvarchar(200)" />
			<column name="TaskId" type="nvarchar(50)" />
			<column name="NextTaskId" type="nvarchar(200)" />
			<column name="RecordType" type="nvarchar(50)" />
			<column name="WorkflowId" type="bigint" />
		</createTable>
	</changeSet>
	<changeSet author="Surekha" id="surekha02">
		<createTable tableName="PresentmentReasonCode_Temp">

			<column name="Code" type="nvarchar(8)">
				<constraints primaryKey="true" nullable="false" />
			</column>
			<column name="Description" type="nvarchar(200)"/>
			<column name="Active" type="nchar(1)"/>
			<column name="Version" type="int" defaultValue="0" />
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="nvarchar(50)" />
			<column name="RoleCode" type="nvarchar(100)" />
			<column name="NextRoleCode" type="nvarchar(200)" />
			<column name="TaskId" type="nvarchar(50)" />
			<column name="NextTaskId" type="nvarchar(200)" />
			<column name="RecordType" type="nvarchar(50)" />
			<column name="WorkflowId" type="bigint" />
		</createTable>
	</changeSet>
	<changeSet  author="Surekha" id="surekha03">
		<createView replaceIfExists="true" viewName="PresentmentReasonCode_View">select Code, Description,Active,Version,LastMntBy ,LastMntOn,RecordStatus,RoleCode,NextRoleCode, TaskId,NextTaskId,RecordType,WorkflowId from PresentmentReasonCode_Temp T 
					Union all
					SELECT     Code, Description, Active, Version, LastMntBy, LastMntOn, RecordStatus, RoleCode, NextRoleCode, TaskId, NextTaskId, RecordType, WorkflowId
						FROM        PresentmentReasonCode T

						WHERE     NOT EXISTS
                          (SELECT     1
                            FROM         PresentmentReasonCode_TEMP
                            WHERE      Code= T.Code)
		</createView>
	</changeSet>
	<changeSet  author="Surekha" id="surekha04">
		<createView replaceIfExists="true" viewName="PresentmentReasonCode_AView">select Code, Description,Active,Version,LastMntBy ,LastMntOn,RecordStatus,RoleCode,NextRoleCode, TaskId,NextTaskId,RecordType,WorkflowId from PresentmentReasonCode_Temp T 
		</createView>
	</changeSet>
	<changeSet  author="Surekha" id="surekha05">
	<sql>
		Update SeqSecRights set SeqNo = (select MAX(RightID) from SecRights);
		Update SeqSecGroups set SeqNo = (select MAX(GrpID) from SecGroups);
		Update SeqSecGroupRights set SeqNo = (select MAX(GrpRightID) from SecGroupRights);
		Update SeqSecRoleGroups set SeqNo = (select MAX(RoleGrpID) from SecRoleGroups);
	</sql>
	</changeSet>
	<changeSet author="Surekha" id="surekha06">
	<addDefaultValue tableName="SecGroups" defaultValueDate="CURRENT_TIMESTAMP" columnName="LastMntOn" columnDataType="datetime"/>
	</changeSet>
	<changeSet author="Surekha" id="surekha07">
	<addDefaultValue tableName="SecRoleGroups" defaultValueDate="CURRENT_TIMESTAMP" columnName="LastMntOn" columnDataType="datetime"/>
	</changeSet>
	<changeSet author="Surekha" id="surekha08">
	<addDefaultValue tableName="SecRoles" defaultValueDate="CURRENT_TIMESTAMP" columnName="LastMntOn" columnDataType="datetime"/>
	</changeSet>
	<changeSet author="Surekha" id="surekha09">
	<addDefaultValue tableName="PTMenuDetails" defaultValueDate="CURRENT_TIMESTAMP" columnName="LastMntOn" columnDataType="datetime"/>
	</changeSet>
	<changeSet  author="Surekha" id="surekha10">
	<sql>
		INSERT INTO SecGroups SELECT (select (SeqNo+1) from SeqSecGroups), 'PRESENTMENTREASONCODE_VIEW', 'Allow to view PRESENTMENTREASONCODE', 0,1000,null,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroups WHERE 0=0
		INSERT INTO SecGroups SELECT (select (SeqNo+2) from SeqSecGroups), 'PRESENTMENTREASONCODE_NEW', 'Allow create new PRESENTMENTREASONCODE', 0,1000,null,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroups WHERE 0=0
		INSERT INTO SecGroups SELECT (select (SeqNo+3) from SeqSecGroups), 'PRESENTMENTREASONCODE_EDIT', 'Allow editing of PRESENTMENTREASONCODE', 0,1000,null,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroups WHERE 0=0
		INSERT INTO SecGroups SELECT (select (SeqNo+4) from SeqSecGroups), 'PRESENTMENTREASONCODE_DELETE', 'Allow deleting of PRESENTMENTREASONCODE', 0,1000,null,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroups WHERE 0=0
		INSERT INTO SecGroups SELECT (select (SeqNo+5) from SeqSecGroups), 'PRESENTMENTREASONCODE_MAKER', 'WF Maker for PRESENTMENTREASONCODE', 0,1000,null,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroups WHERE 0=0
		INSERT INTO SecGroups SELECT (select (SeqNo+6) from SeqSecGroups), 'PRESENTMENTREASONCODE_VERIFIER', 'WF Verifier for PRESENTMENTREASONCODE', 0,1000,null,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroups WHERE 0=0
		INSERT INTO SecGroups SELECT (select (SeqNo+7) from SeqSecGroups), 'PRESENTMENTREASONCODE_APPROVER', 'WF Approver for PRESENTMENTREASONCODE', 0,1000,null,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroups WHERE 0=0
	</sql>
	</changeSet>
	<changeSet  author="Surekha" id="surekha11">
	<sql>
		INSERT INTO SecRights SELECT (select (SeqNo+1) from SeqSecRights),0,'menuItem_PresentmentReasonCode_PresentmentReasonCode','MENU',0,1000,null,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
		INSERT INTO SecRights SELECT (select (SeqNo+2) from SeqSecRights),0,'menuItem_PresentmentReasonCode_PresentmentReasonCodeEnquiry','MENU',0,1000,null,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
		INSERT INTO SecRights SELECT (select (SeqNo+3) from SeqSecRights),2,'button_PresentmentReasonCode_PrintList','PresentmentReasonCodeList',0,1000,null,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
		INSERT INTO SecRights SELECT (select (SeqNo+4) from SeqSecRights),2,'button_PresentmentReasonCodeList_NewPresentmentReasonCode','PresentmentReasonCodeList',0,1000,null,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
		INSERT INTO SecRights SELECT (select (SeqNo+5) from SeqSecRights),2,'button_PresentmentReasonCodeDialog_btnNew','PresentmentResponseCodeDialog',0,1000,null,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
		INSERT INTO SecRights SELECT (select (SeqNo+6) from SeqSecRights),2,'button_PresentmentReasonCodeDialog_btnEdit','PresentmentReasonCodeDialog',0,1000,null,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
		INSERT INTO SecRights SELECT (select (SeqNo+7) from SeqSecRights),2,'button_PresentmentReasonCodeDialog_btnDelete','PresentmentReasonCodeDialog',0,1000,null,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
		INSERT INTO SecRights SELECT (select (SeqNo+8) from SeqSecRights),2,'button_PresentmentReasonCodeDialog_btnSave','PresentmentReasonCodeDialog',0,1000,null,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
		INSERT INTO SecRights SELECT (select (SeqNo+9) from SeqSecRights),3,'PresentmentReasonCodeDialog_Code','PresentmentReasonCodeDialog',0,1000,null,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
		INSERT INTO SecRights SELECT (select (SeqNo+10) from SeqSecRights),3,'PresentmentReasonCodeDialog_Description','PresentmentReasonCodeDialog',0,1000,null,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
		INSERT INTO SecRights SELECT (select (SeqNo+10+1) from SeqSecRights),3,'PresentmentReasonCodeDialog_Active','PresentmentReasonCodeDialog',0,1000,null,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
	</sql>
	</changeSet>
	<changeSet  author="Surekha" id="surekha12">
	<sql>
		INSERT INTO SecGroupRights SELECT (select (SeqNo+1) from SeqSecGroupRights), (select (SeqNo+1) from SeqSecGroups), (select (SeqNo+2) from SeqSecRights),1,0,10000,null,' ',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
		INSERT INTO SecGroupRights SELECT (select (SeqNo+2) from SeqSecGroupRights), (select (SeqNo+2) from SeqSecGroups), (select max(RightID) from SecRights WHERE RightName='menuCat_ApplicationMaster'),1,0,10000,null,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
		INSERT INTO SecGroupRights SELECT (select (SeqNo+3) from SeqSecGroupRights), (select (SeqNo+2) from SeqSecGroups), (select (SeqNo+1) from SeqSecRights),1,0,10000,null,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
		INSERT INTO SecGroupRights SELECT (select (SeqNo+4) from SeqSecGroupRights), (select (SeqNo+2) from SeqSecGroups), (select (SeqNo+4) from SeqSecRights),1,0,10000,null,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
		INSERT INTO SecGroupRights SELECT (select (SeqNo+5) from SeqSecGroupRights), (select (SeqNo+2) from SeqSecGroups), (select (SeqNo+5) from SeqSecRights),1,0,10000,null,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
		INSERT INTO SecGroupRights SELECT (select (SeqNo+6) from SeqSecGroupRights), (select (SeqNo+2) from SeqSecGroups), (select (SeqNo+8) from SeqSecRights),1,0,10000,null,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
		
	</sql>
	</changeSet>

	<changeSet  author="Surekha" id="surekha13">
	<sql>
	INSERT INTO SecGroupRights SELECT (select (SeqNo+7) from SeqSecGroupRights), (select (SeqNo+3) from SeqSecGroups), (select max(RightID) from SecRights WHERE RightName='menuCat_ApplicationMaster'),1,0,10000,null,' ',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
	INSERT INTO SecGroupRights SELECT (select (SeqNo+8) from SeqSecGroupRights), (select (SeqNo+3) from SeqSecGroups), (select (SeqNo+1) from SeqSecRights),1,0,10000,null,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
	INSERT INTO SecGroupRights SELECT (select (SeqNo+9) from SeqSecGroupRights), (select (SeqNo+3) from SeqSecGroups), (select (SeqNo+6) from SeqSecRights),1,0,10000,null,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
	INSERT INTO SecGroupRights SELECT (select (SeqNo+10) from SeqSecGroupRights), (select (SeqNo+3) from SeqSecGroups), (select (SeqNo+8) from SeqSecRights),1,0,10000,null,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
	
	</sql>
	</changeSet>
	<changeSet  author="Surekha" id="surekha14">
	<sql>
	INSERT INTO SecGroupRights SELECT (select (SeqNo+11) from SeqSecGroupRights), (select (SeqNo+4) from SeqSecGroups), (select max(RightID) from SecRights WHERE RightName='menuCat_ApplicationMaster'),1,0,10000,null,' ',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
	INSERT INTO SecGroupRights SELECT (select (SeqNo+12) from SeqSecGroupRights), (select (SeqNo+4) from SeqSecGroups), (select (SeqNo+1) from SeqSecRights),1,0,10000,null,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
	INSERT INTO SecGroupRights SELECT (select (SeqNo+13) from SeqSecGroupRights), (select (SeqNo+4) from SeqSecGroups), (select (SeqNo+3) from SeqSecRights),1,0,10000,null,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
	INSERT INTO SecGroupRights SELECT (select (SeqNo+14) from SeqSecGroupRights), (select (SeqNo+4) from SeqSecGroups), (select (SeqNo+7) from SeqSecRights),1,0,10000,null,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
	
	</sql>
	</changeSet>
	<changeSet  author="Surekha" id="surekha15">
	<sql>
	INSERT INTO SecGroupRights SELECT (select (SeqNo+15) from SeqSecGroupRights), (select (SeqNo+5) from SeqSecGroups), (select max(RightID) from SecRights WHERE RightName='menuCat_ApplicationMaster'),1,0,10000,null,' ',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
	INSERT INTO SecGroupRights SELECT (select (SeqNo+16) from SeqSecGroupRights), (select (SeqNo+5) from SeqSecGroups), (select (SeqNo+1) from SeqSecRights),1,0,10000,null,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
	INSERT INTO SecGroupRights SELECT (select (SeqNo+17) from SeqSecGroupRights), (select (SeqNo+5) from SeqSecGroups), (select (SeqNo+4) from SeqSecRights),1,0,10000,null,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
	INSERT INTO SecGroupRights SELECT (select (SeqNo+18) from SeqSecGroupRights), (select (SeqNo+5) from SeqSecGroups), (select (SeqNo+7) from SeqSecRights),1,0,10000,null,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
	INSERT INTO SecGroupRights SELECT (select (SeqNo+19) from SeqSecGroupRights), (select (SeqNo+5) from SeqSecGroups), (select (SeqNo+8) from SeqSecRights),1,0,10000,null,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
	
	INSERT INTO SecGroupRights SELECT (select (SeqNo+20) from SeqSecGroupRights), (select (SeqNo+5) from SeqSecGroups), (select (SeqNo+9) from SeqSecRights),1,0,10000,null,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
	INSERT INTO SecGroupRights SELECT (select (SeqNo+21) from SeqSecGroupRights), (select (SeqNo+5) from SeqSecGroups), (select (SeqNo+10) from SeqSecRights),1,0,10000,null,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
	INSERT INTO SecGroupRights SELECT (select (SeqNo+22) from SeqSecGroupRights), (select (SeqNo+5) from SeqSecGroups), (select (SeqNo+10+1) from SeqSecRights),1,0,10000,null,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
	</sql>
	</changeSet>
	<changeSet  author="Surekha" id="surekha16">
	<sql>
	INSERT INTO SecGroupRights SELECT (select (SeqNo+23) from SeqSecGroupRights), (select (SeqNo+6) from SeqSecGroups), (select max(RightID) from SecRights WHERE RightName='menuCat_ApplicationMaster'),1,0,10000,null,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
	INSERT INTO SecGroupRights SELECT (select (SeqNo+24) from SeqSecGroupRights), (select (SeqNo+6) from SeqSecGroups), (select (SeqNo+1) from SeqSecRights),1,0,10000,null,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
	INSERT INTO SecGroupRights SELECT (select (SeqNo+25) from SeqSecGroupRights), (select (SeqNo+6) from SeqSecGroups), (select (SeqNo+8) from SeqSecRights),1,0,10000,null,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
	
	</sql>
	</changeSet>
	<changeSet  author="Surekha" id="surekha17">
	<sql>
		INSERT INTO SecGroupRights SELECT (select (SeqNo+26) from SeqSecGroupRights), (select (SeqNo+7) from SeqSecGroups), (select max(RightID) from SecRights WHERE RightName='menuCat_ApplicationMaster'),1,0,10000,null,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
		INSERT INTO SecGroupRights SELECT (select (SeqNo+27) from SeqSecGroupRights), (select (SeqNo+7) from SeqSecGroups), (select (SeqNo+1) from SeqSecRights),1,0,10000,null,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
		INSERT INTO SecGroupRights SELECT (select (SeqNo+28) from SeqSecGroupRights), (select (SeqNo+7) from SeqSecGroups), (select (SeqNo+8) from SeqSecRights),1,0,10000,null,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
		
		INSERT INTO SecRoleGroups SELECT (select (SeqNo+1) from SeqSecRoleGroups), (Select GrpID  from SecGroups Where GrpCode = 'PRESENTMENTREASONCODE_MAKER'), (Select RoleID from SecRoles Where RoleCd = 'MSTGRP1_MAKER'), 0,1000,null,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRoleGroups WHERE 0=0;
		INSERT INTO SecRoleGroups SELECT (select (SeqNo+2) from SeqSecRoleGroups), (Select GrpID  from SecGroups Where GrpCode = 'PRESENTMENTREASONCODE_APPROVER'), (Select RoleID from SecRoles Where RoleCd = 'MSTGRP1_APPROVER'), 0,1000,null,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRoleGroups WHERE 0=0;
		
		INSERT INTO PTMenuDetails SELECT (select (SeqNo+1) from SeqPTMenuDetails),(SELECT AppID FROM PTApplicationDetails WHERE AppCode='PFF'),'PresentmentReasonCode','menuItem_PresentmentReasonCode_PresentmentReasonCode','/WEB-INF/pages/Applicationmaster/PresentmentReasonCode/PresentmentReasonCodeList.zul',0,10000,null,'Approved',' ',' ',' ',' ',' ',0,'menuItem_PresentmentReasonCode_PresentmentReasonCode' FROM SeqPTMenuDetails WHERE 0=0;
		INSERT INTO PTMenuDetails SELECT (select (SeqNo+2) from SeqPTMenuDetails),(SELECT AppID FROM PTApplicationDetails WHERE AppCode='PFF'),'PresentmentReasonCodeEnquiry','menuItem_PresentmentReasonCode_PresentmentReasonCodeEnquiry','/WEB-INF/pages/Applicationmaster/PresentmentReasonCode/PresentmentReasonCodeEnquiryList.zul',0,10000,null,'Approved',' ',' ',' ',' ',' ',0,'menuItem_PresentmentReasonCode_PresentmentReasonCodeEnquiry' FROM SeqPTMenuDetails WHERE 0=0;
		Update SeqPTMenuDetails set SeqNo = (SeqNo+2) ;
	</sql>
	</changeSet>
	
	<changeSet author="durgaprasad.g" id="durgaprasad.g18">
		<dropPrimaryKey tableName="LMTFinanceWorkFlowDef" constraintName="LMTFINANCEWORKFLOWDEF_PK"/>
	</changeSet>

	<changeSet author="durgaprasad.g" id="durgaprasad.g19">
		<addPrimaryKey tableName="LMTFinanceWorkFlowDef" constraintName="PK_LMTFINANCEWORKFLOWDEF" columnNames="FinType, FinEvent, ModuleName"/>
	</changeSet>

	<changeSet author="durgaprasad.g" id="durgaprasad.g20">
		<dropPrimaryKey tableName="LMTFinanceWorkFlowDef_Temp" constraintName="PK_LMTFINANCEWORKFLOWDEF_TEMP"/>
	</changeSet>

	<changeSet author="durgaprasad.g" id="durgaprasad.g21">
		<addPrimaryKey tableName="LMTFinanceWorkFlowDef_Temp" constraintName="PK_LMTFINANCEWORKFLOWDEF_TEMP" columnNames="FinType, FinEvent, ModuleName"/>
	</changeSet>
	
	<changeSet author="durgaprasad.g" id="durgaprasad.g22">
	<createView viewName="LMTFinanceWorkFlowDef_View" replaceIfExists="true">
				SELECT   T1.FinType,T1.FinType TypeCode, T2.FinTypeDesc lovDescFinTypeName , T6.CollateralDesc,T7.ProductDesc VasProductDesc,T8.Description CommitmentTypeDesc,
				T4.FacilityDesc lovDescFacilityTypeName ,
						 T1.ScreenCode, T1.WorkFlowType ,T3.WorkFlowDesc lovDescWorkFlowTypeName, T1.Version,
						 T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, 
				         T1.NextTaskId, T1.RecordType, T1.WorkflowId, T3.WorkFlowRoles LovDescWorkFlowRolesName,
				         T2.FinCategory lovDescProductCodeName,T3.FirstTaskOwner LovDescFirstTaskOwner,
				         T1.ModuleName, COALESCE(T2.FinIsActive, T6.Active,T7.Active, T8.Active ) FinIsActive, COALESCE(T2.Product,N'') LovDescProductName,T2.FinAssetType,
				         T1.FinEvent, T5.ProductCategory
				FROM     dbo.LMTFinanceWorkFlowDef_Temp T1 
						 LEFT JOIN dbo.RMTFinanceTypes T2 ON T1.FinType = T2.FinType 
						 INNER JOIN dbo.WorkFlowDetails T3 ON T1.WorkFlowType = T3.WorkFlowType
						 AND T3.WorkFlowActive = 1 
						 LEFT JOIN CAFFacilityTypes T4 ON T1.FinType = T4.FacilityType 
						 LEFT JOIN BMTProduct T5 ON T2.FinCategory = T5.ProductCode
						 LEFT JOIN CollateralStructure T6 ON T1.FinType = T6.CollateralType 
						 LEFT JOIN VasStructure T7 ON T1.FinType = T7.ProductCode 
						  LEFT JOIN CommitmentType T8 ON T1.FinType = T8.TypeCode 
				UNION ALL
				SELECT   T1.FinType, T1.FinType TypeCode, T2.FinTypeDesc lovDescFinTypeName, T6.CollateralDesc,T7.ProductDesc VasProductDesc,T8.Description CommitmentTypeDesc, T4.FacilityDesc lovDescFacilityTypeName,
						 T1.ScreenCode, T1.WorkFlowType,T3.WorkFlowDesc lovDescWorkFlowTypeName, T1.Version,
						 T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, 
				         T1.NextTaskId, T1.RecordType, T1.WorkflowId, T3.WorkFlowRoles LovDescWorkFlowRolesName,
				         T2.FinCategory lovDescProductCodeName,T3.FirstTaskOwner LovDescFirstTaskOwner,
				         T1.ModuleName,COALESCE(T2.FinIsActive, T6.Active,T7.Active , T8.Active) FinIsActive,COALESCE(T2.Product,N'') LovDescProductName,T2.FinAssetType,
				         T1.FinEvent, T5.ProductCategory
				FROM     dbo.LMTFinanceWorkFlowDef  T1 
						 LEFT JOIN dbo.RMTFinanceTypes T2 ON T1.FinType = T2.FinType 
						 INNER JOIN dbo.WorkFlowDetails T3 ON T1.WorkFlowType = T3.WorkFlowType 
						 AND T3.WorkFlowActive = 1 
						 LEFT JOIN CAFFacilityTypes T4 ON T1.FinType = T4.FacilityType
						 LEFT JOIN BMTProduct T5 ON T2.FinCategory = T5.ProductCode
						  LEFT JOIN CollateralStructure T6 ON T1.FinType = T6.CollateralType 
						 LEFT JOIN VasStructure T7 ON T1.FinType = T7.ProductCode 
						  LEFT JOIN CommitmentType T8 ON T1.FinType = T8.TypeCode
				WHERE    (NOT EXISTS
				                          (SELECT     1 AS Expr1
				                            FROM          dbo.LMTFinanceWorkFlowDef_Temp
				                            WHERE      (FinType = T1.FinType AND FinEvent = T1.FinEvent AND ModuleName = T1.ModuleName)))
	</createView>
	</changeSet>
	<changeSet id="26" author="Subbarao">
		<createView replaceIfExists="true" viewName="RMTFinanceTypes_ORGView">
		SELECT     T1.FinType, T1.FinCategory, T1.FinTypeDesc, T1.FinCcy, T1.FinDaysCalType, T1.FinAcType, T1.FinContingentAcType, T1.FinIsGenRef, T1.FinMaxAmount, 
                      T1.FinMinAmount, T1.FinIsOpenNewFinAc, T1.FinDftStmtFrq, T1.FinIsAlwMD, T1.FinSchdMthd, T1.FInIsAlwGrace, T1.FinHistRetension, T1.FinOrgPrfUnchanged, 
                      T1.EqualRepayment, T1.FinRateType, T1.FinBaseRate, T1.FinSplRate, T1.FinIntRate, T1.FInMinRate, T1.FinMaxRate, T1.FinDftIntFrq, T1.FinIsIntCpz, T1.FinCpzFrq, 
                      T1.FinIsRvwAlw, T1.FinRvwFrq, T1.FinGrcRateType, T1.FinGrcBaseRate, T1.FinGrcSplRate, T1.FinGrcIntRate, T1.FInGrcMinRate, T1.FinGrcMaxRate, 
                      T1.FinGrcDftIntFrq, T1.FinGrcIsIntCpz, T1.FinGrcCpzFrq, T1.FinGrcIsRvwAlw, T1.FinGrcRvwFrq, T1.FinMinTerm, T1.FinMaxTerm, T1.FinDftTerms, T1.FinRpyFrq, 
                      T1.FInRepayMethod, T1.FinIsAlwPartialRpy, T1.FinIsAlwDifferment, T1.FinMaxDifferment, T1.FinIsAlwEarlyRpy, T1.FinIsAlwEarlySettle, T1.FinODRpyTries, 
                      T1.FinEarlyPayRule, T1.FinEarlySettleRule, T1.FinDepositRestrictedTo, T1.FinAEBuyOrInception, T1.FinAESellOrMaturity, T1.FinIsActive, T1.Version, T1.LastMntBy, 
                      T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId, T1.StepFinance, T1.SteppingMandatory, 
                      T1.AlwManualSteps, T1.AlwdStepPolicies, T1.DftStepPolicy, T3.BRTypeDesc lovDescFinBaseRateName, T4.SRTypeDesc lovDescFinSplRateName, 
                      T5.BRTypeDesc lovDescFinGrcBaseRateName, T6.SRTypeDesc lovDescFinGrcSplRateName, T1.FinIsDwPayRequired, T1.FinRvwRateApplFor, 
                      T1.FinAlwRateChangeAnyDate, T1.FinGrcRvwRateApplFor, T1.FinIsIntCpzAtGrcEnd, T1.FinElgRuleCode, T1.LimitElgRuleCode, T1.FinSchCalCodeOnRvw, 
                      T1.AlwPlanDeferment, T1.PlanDeferCount, T1.FinAssetType, T1.PftPayAcType, T1.FinIsOpenPftPayAcc, T1.FinIsAlwGrcRepay, T1.FinGrcSchdMthd, T1.FinGrcMargin, 
                      T1.FinMargin, T1.FinScheduleOn, T1.FinGrcScheduleOn, T1.FinCommitmentReq, T1.FinCollateralReq, T1.FinDepreciationReq, T1.FinDepreciationFrq, 
                      T1.FinBankContingentAcType, T1.FinProvisionAcType, T1.FinAlwIndRate, T1.FInIndBaseRate, T1.FinGrcAlwIndRate, T1.FinGrcIndBaseRate, 
                      T7.BRTypeDesc lovDescFinIndBaseRateName, T8.BRTypeDesc lovDescFinGrcIndBaseRateName, T1.AllowRIAInvestment, T1.OverrideLimit, T1.LimitRequired, 
                      T1.FinCommitmentOvrride, T1.FinCollateralOvrride, T1.FinRepayPftOnFrq, T1.FinPftUnChanged, T1.ApplyODPenalty, T1.ODIncGrcDays, T1.ODChargeType, 
                      T1.ODGraceDays, T1.ODChargeCalOn, T1.ODChargeAmtOrPerc, T1.ODAllowWaiver, T1.ODMaxWaiverPerc, T1.FinDivision, 
                      T9.DivisionCodeDesc LovDescFinDivisionName, T1.FinSuspAcType, T1.Product, T1.StartDate, T1.EndDate, T1.TakafulMandatory, T1.TakafulReq, 
                      T1.RemFeeSchdMethod, T1.TakafulProvider, T10.TakafulName lovDescTakafulProviderName, T10.TakafulRate lovDescTakafulRate, T1.AllowDownpayPgm, 
                      T2.FinTypeDesc lovDescPromoFinTypeDesc, T10.AddrLine1 lovDescTakafulProviderAddr, T1.ScheduleTakaful, T1.Remarks, 
                      T12.PolicyDesc lovDescDftStepPolicyName, T1.AlwEarlyPayMethods, T1.PropertyTakafulReq, T1.TakafulPayType, T1.PropertyTakafulPayType, 
                      T1.PropertyTakafulProvider, T1.PastduePftCalMthd, T1.PastduePftMargin, T11.TakafulName lovDescPptTakafulProvider, T1.AlwAdvanceRent, 
                      T11.TakafulRate lovDescPptTakafulRate, T1.GrcAdvBaseRate, T1.GrcAdvMargin, T1.GrcAdvPftRate, T1.RpyAdvBaseRate, T1.RpyAdvMargin, T1.RpyAdvPftRate, 
                      T13.BRTypeDesc GrcAdvBaseRateDesc, T14.BRTypeDesc RpyAdvBaseRateDesc, T1.AlwCreditIns, T1.RollOverFinance, T1.RollOverFrq, T1.DownPayRule, 
                      T1.FinSuspTrigger, T1.FinSuspRemarks, T1.AlwMultiPartyDisb, T1.collateralType, T1.TDSApplicable, T15.RuleCode DownPayRuleDesc, T1.ApplyGrcPricing, 
                      T1.GrcPricingMethod, T1.ApplyRpyPricing, T1.RpyPricingMethod, T1.RpyHierarchy, T16.RuleCode GrcPricingMethodDesc, 
                      T17.RuleCode RpyPricingMethodDesc, T1.DroplineOD, T1.DroppingMethod, T1.RateChgAnyDay, T12.StepType DftStepPolicyType, T1.AlwBpiTreatment, 
                      T1.DftBpiTreatment, T1.PftDueSchOn, T1.AlwPlannedEmiHoliday, T1.EmiHolidayFrq, T1.EmiHolidayPftTreatment, T1.EmiHolidayLockPeriod, T1.ManualSchedule,T18.ProductCategory
FROM         RMTFinanceTypes T1 LEFT OUTER JOIN
                      RMTFinanceTypes T2 ON T1.Product = T2.FinType LEFT OUTER JOIN
                      RMTBaseRateCodes T3 ON T1.FinBaseRate = T3.BRType LEFT OUTER JOIN
                      RMTSplRateCodes T4 ON T1.FinSplRate = T4.SRType LEFT OUTER JOIN
                      RMTBaseRateCodes T5 ON T1.FinGrcBaseRate = T5.BRType LEFT OUTER JOIN
                      RMTSplRateCodes T6 ON T1.FinGrcSplRate = T6.SRType LEFT OUTER JOIN
                      RMTBaseRateCodes T7 ON T1.FInIndBaseRate = T7.BRType LEFT OUTER JOIN
                      RMTBaseRateCodes T8 ON T1.FinGrcIndBaseRate = T8.BRType INNER JOIN
                      SMTDivisionDetail T9 ON T1.FinDivision = T9.DivisionCode LEFT OUTER JOIN
                      TakafulProvider T10 ON T1.TakafulProvider = T10.TakafulCode LEFT OUTER JOIN
                      TakafulProvider T11 ON T1.PropertyTakafulProvider = T11.TakafulCode LEFT OUTER JOIN
                      StepPolicyHeader T12 ON T1.DftStepPolicy = T12.PolicyCode LEFT OUTER JOIN
                      RMTBaseRateCodes T13 ON T1.GrcAdvBaseRate = T13.BRType LEFT OUTER JOIN
                      RMTBaseRateCodes T14 ON T1.RpyAdvBaseRate = T14.BRType LEFT OUTER JOIN
                      Rules T15 ON T1.DownPayRule = T15.RuleId LEFT OUTER JOIN
                      Rules T16 ON T1.GrcPricingMethod = T16.RuleId LEFT OUTER JOIN
                      Rules T17 ON T1.RpyPricingMethod = T17.RuleId LEFT OUTER JOIN
					  BMTProduct T18 ON T1.FinCategory = T18.ProductCode
		</createView>
		</changeSet>
		<changeSet author="surekha" id="surekha18">
			<dropTable  tableName="PresentmentRasonCode" />
		</changeSet>
		<changeSet author="Surekha" id="surekha19">
		<createTable tableName="PresentmentReasonCode">

			<column name="Code" type="nvarchar(8)">
				<constraints primaryKey="true" nullable="false" />
			</column>
			<column name="Description" type="nvarchar(200)"/>
			<column name="Active" type="nchar(1)"/>
			<column name="Version" type="int" defaultValue="0" />
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="nvarchar(50)" />
			<column name="RoleCode" type="nvarchar(100)" />
			<column name="NextRoleCode" type="nvarchar(200)" />
			<column name="TaskId" type="nvarchar(50)" />
			<column name="NextTaskId" type="nvarchar(200)" />
			<column name="RecordType" type="nvarchar(50)" />
			<column name="WorkflowId" type="bigint" />
		</createTable>
	</changeSet>
	<changeSet author="Surekha" id="surekha20">
	<addColumn tableName="RMTProvinceVsCity">
		<column name="PCCityClassification" type="nvarchar(25)"/>
	</addColumn>
	</changeSet>
	<changeSet author="Surekha" id="surekha21">
	<addColumn tableName="RMTProvinceVsCity_Temp">
		<column name="PCCityClassification" type="nvarchar(25)"/>
	</addColumn>
	</changeSet>
	<changeSet author="Surekha" id="surekha22">
		<sql>
			Update SeqSecRights set SeqNo = (select MAX(RightID) from SecRights);
			Update SeqSecGroupRights set SeqNo = (select MAX(GrpRightID) from SecGroupRights);
	
			INSERT INTO SecRights SELECT (select (SeqNo+1) from SeqSecRights),3,'CityDialog_pCCitylassification','CityDialog',0,1000,null,'Approved','','',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
			INSERT INTO SecGroupRights SELECT (select (SeqNo+1) fromSeqSecGroupRights),(select GrpID from SecGroups where GrpCode='CITY_MAKER'),(select RightID from SecRights where RightName='CityDialog_pCCitylassification'),1,0,10000,null,'Approved','','',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
	
			Update SeqSecRights set SeqNo = (select MAX(RightID) from SecRights);
			Update SeqSecGroupRights set SeqNo = (select MAX(GrpRightID) from SecGroupRights);
		</sql>
	</changeSet>
	<changeSet author="Surekha" id="surekha23">
		<createView replaceIfExists="true" viewName="RMTProvinceVsCity_View">SELECT     T1.PCCountry, T2.CountryDesc AS LovDescPCCountryName, T1.PCProvince, T3.CPProvinceName AS LovDescPCProvinceName, T1.PCCity, T1.PCCityName, T1.Version, 
                      T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId
				FROM         RMTProvinceVsCity_Temp AS T1 INNER JOIN
			                      BMTCountries AS T2 ON T1.PCCountry = T2.CountryCode INNER JOIN
			                      RMTCountryVsProvince AS T3 ON T1.PCCountry = T3.CPCountry AND T1.PCProvince = T3.CPProvince
				UNION ALL
				SELECT     T1.PCCountry, T2.CountryDesc AS LovDescPCCountryName, T1.PCProvince, T3.CPProvinceName AS LovDescPCProvinceName, T1.PCCity, T1.PCCityName, T1.Version, 
				                      T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId
				FROM         RMTProvinceVsCity AS T1 INNER JOIN
				                      BMTCountries AS T2 ON T1.PCCountry = T2.CountryCode INNER JOIN
				                      RMTCountryVsProvince AS T3 ON T1.PCCountry = T3.CPCountry AND T1.PCProvince = T3.CPProvince
				WHERE     NOT EXISTS
				                          (SELECT     1
	                            FROM          RMTProvinceVsCity_TEMP
	                            WHERE      PCCountry = T1.PCCountry AND PCProvince = T1.PCProvince AND PCCity = T1.PCCity)

        </createView>
	</changeSet>
	<changeSet author="Surekha" id="surekha24">
		<createView replaceIfExists="true" viewName="RMTProvinceVsCity_AView">SELECT     T1.PCCountry, T2.CountryDesc AS LovDescPCCountryName, T1.PCProvince, T3.CPProvinceName AS LovDescPCProvinceName, T1.PCCity, T1.PCCityName, T1.Version, 
                      T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId
				FROM         RMTProvinceVsCity AS T1 INNER JOIN
			                      BMTCountries AS T2 ON T1.PCCountry = T2.CountryCode INNER JOIN
			                      RMTCountryVsProvince AS T3 ON T1.PCCountry = T3.CPCountry AND T1.PCProvince = T3.CPProvince

        </createView>
	</changeSet>
	<changeSet author="Surekha" id="surekha25">
		<createView replaceIfExists="true" viewName="RMTProvinceVsCity_View">SELECT     T1.PCCountry, T2.CountryDesc AS LovDescPCCountryName, T1.PCProvince, T3.CPProvinceName AS LovDescPCProvinceName, T1.PCCity, T1.PCCityName,T1.PCCityClassification, T1.Version, 
                      T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId
				FROM         RMTProvinceVsCity_Temp AS T1 INNER JOIN
			                      BMTCountries AS T2 ON T1.PCCountry = T2.CountryCode INNER JOIN
			                      RMTCountryVsProvince AS T3 ON T1.PCCountry = T3.CPCountry AND T1.PCProvince = T3.CPProvince
				UNION ALL
				SELECT     T1.PCCountry, T2.CountryDesc AS LovDescPCCountryName, T1.PCProvince, T3.CPProvinceName AS LovDescPCProvinceName, T1.PCCity, T1.PCCityName,T1.PCCityClassification, T1.Version, 
				                      T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId
				FROM         RMTProvinceVsCity AS T1 INNER JOIN
				                      BMTCountries AS T2 ON T1.PCCountry = T2.CountryCode INNER JOIN
				                      RMTCountryVsProvince AS T3 ON T1.PCCountry = T3.CPCountry AND T1.PCProvince = T3.CPProvince
				WHERE     NOT EXISTS
				                          (SELECT     1
	                            FROM          RMTProvinceVsCity_TEMP
	                            WHERE      PCCountry = T1.PCCountry AND PCProvince = T1.PCProvince AND PCCity = T1.PCCity)

        </createView>
	</changeSet>
	<changeSet author="Surekha" id="surekha26">
		<createView replaceIfExists="true" viewName="RMTProvinceVsCity_AView">SELECT     T1.PCCountry, T2.CountryDesc AS LovDescPCCountryName, T1.PCProvince, T3.CPProvinceName AS LovDescPCProvinceName, T1.PCCity, T1.PCCityName,T1.PCCityClassification, T1.Version, 
                      T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId
				FROM         RMTProvinceVsCity AS T1 INNER JOIN
			                      BMTCountries AS T2 ON T1.PCCountry = T2.CountryCode INNER JOIN
			                      RMTCountryVsProvince AS T3 ON T1.PCCountry = T3.CPCountry AND T1.PCProvince = T3.CPProvince

        </createView>
	</changeSet>
	
	<!-- Modification Columns from Finance Types -->
	<changeSet author="Siva" id="27">
	
		<dropColumn tableName="RMTFinanceTypes" columnName="AlwBpiTreatment" />
		<dropColumn tableName="RMTFinanceTypes" columnName="DftBpiTreatment" />
		<dropColumn tableName="RMTFinanceTypes" columnName="PftDueSchOn" />
		<dropColumn tableName="RMTFinanceTypes" columnName="AlwPlannedEmiHoliday" />
		<dropColumn tableName="RMTFinanceTypes" columnName="EmiHolidayPftTreatment" />
		<dropColumn tableName="RMTFinanceTypes" columnName="EmiHolidayFrq" />
		<dropColumn tableName="RMTFinanceTypes" columnName="EmiHolidayLockPeriod" />
		
		<dropColumn tableName="RMTFinanceTypes_Temp" columnName="AlwBpiTreatment" />
		<dropColumn tableName="RMTFinanceTypes_Temp" columnName="DftBpiTreatment" />
		<dropColumn tableName="RMTFinanceTypes_Temp" columnName="PftDueSchOn" />
		<dropColumn tableName="RMTFinanceTypes_Temp" columnName="AlwPlannedEmiHoliday" />
		<dropColumn tableName="RMTFinanceTypes_Temp" columnName="EmiHolidayPftTreatment" />
		<dropColumn tableName="RMTFinanceTypes_Temp" columnName="EmiHolidayFrq" />
		<dropColumn tableName="RMTFinanceTypes_Temp" columnName="EmiHolidayLockPeriod" />
		
		<addColumn tableName="RMTFinanceTypes">
			<column name="AlwBPI" type="boolean" />
			<column name="BpiTreatment" type="char(1)" />
			<column name="PftDueSchOn" type="char(1)" />
			<column name="PlanEMIHAlw" type="boolean" />
			<column name="PlanEMIHMethod" type="char(1)" />
			<column name="PlanEMIHMaxPerYear" type="int" />
			<column name="PlanEMIHMax" type="int" />
			<column name="PlanEMIHLockPeriod" type="int" />
			<column name="PlanEMICpz" type="boolean" />
			<column name="UnPlanEMIHLockPeriod" type="int" />
			<column name="UnPlanEMICpz" type="boolean" />
			<column name="ReAgeCpz" type="boolean" />
			<column name="FddLockPeriod" type="int" />
			<column name="AlwdRpyMethods" type="char(100)" />
			<column name="MaxUnplannedEmi" type="int" />
			<column name="MaxReAgeHolidays" type="int" />
			<column name="CalRoundingMode" type="char(10)" />
		</addColumn>
		
		<addColumn tableName="RMTFinanceTypes_Temp">
			<column name="AlwBPI" type="boolean" />
			<column name="BpiTreatment" type="char(1)" />
			<column name="PftDueSchOn" type="char(1)" />
			<column name="PlanEMIHAlw" type="boolean" />
			<column name="PlanEMIHMethod" type="char(1)" />
			<column name="PlanEMIHMaxPerYear" type="int" />
			<column name="PlanEMIHMax" type="int" />
			<column name="PlanEMIHLockPeriod" type="int" />
			<column name="PlanEMICpz" type="boolean" />
			<column name="UnPlanEMIHLockPeriod" type="int" />
			<column name="UnPlanEMICpz" type="boolean" />
			<column name="ReAgeCpz" type="boolean" />
			<column name="FddLockPeriod" type="int" />
			<column name="AlwdRpyMethods" type="char(100)" />
			<column name="MaxUnplannedEmi" type="int" />
			<column name="MaxReAgeHolidays" type="int" />
			<column name="CalRoundingMode" type="char(10)" />
		</addColumn>

		<update tableName="RMTFinanceTypes">
			<column name="AlwBPI">0</column>
			<column name="PlanEMIHAlw">0</column>
			<column name="PlanEMIHMaxPerYear">0</column>
			<column name="PlanEMIHMax">0</column>
			<column name="PlanEMIHLockPeriod">0</column>
			<column name="PlanEMICpz">0</column>
			<column name="UnPlanEMIHLockPeriod">0</column>
			<column name="UnPlanEMICpz">0</column>
			<column name="ReAgeCpz">0</column>
			<column name="FddLockPeriod">0</column>
			<column name="MaxUnplannedEmi">0</column>
			<column name="MaxReAgeHolidays">0</column>
			<column name="CalRoundingMode">HALF_DOWN</column>
		</update>
		
		<update tableName="RMTFinanceTypes_Temp">
			<column name="AlwBPI">0</column>
			<column name="PlanEMIHAlw">0</column>
			<column name="PlanEMIHMaxPerYear">0</column>
			<column name="PlanEMIHMax">0</column>
			<column name="PlanEMIHLockPeriod">0</column>
			<column name="PlanEMICpz">0</column>
			<column name="UnPlanEMIHLockPeriod">0</column>
			<column name="UnPlanEMICpz">0</column>
			<column name="ReAgeCpz">0</column>
			<column name="FddLockPeriod">0</column>
			<column name="MaxUnplannedEmi">0</column>
			<column name="MaxReAgeHolidays">0</column>
			<column name="CalRoundingMode">HALF_DOWN</column>
		</update>
		
		<createView replaceIfExists="true" viewName="RMTFinanceTypes_ORGView">
					SELECT     T1.FinType, T1.FinCategory, T1.FinTypeDesc, T1.FinCcy, T1.FinDaysCalType, T1.FinAcType, T1.FinContingentAcType, T1.FinIsGenRef, T1.FinMaxAmount, 
			                      T1.FinMinAmount, T1.FinIsOpenNewFinAc, T1.FinDftStmtFrq, T1.FinIsAlwMD, T1.FinSchdMthd, T1.FInIsAlwGrace, T1.FinHistRetension, T1.FinOrgPrfUnchanged, 
			                      T1.EqualRepayment, T1.FinRateType, T1.FinBaseRate, T1.FinSplRate, T1.FinIntRate, T1.FInMinRate, T1.FinMaxRate, T1.FinDftIntFrq, T1.FinIsIntCpz, T1.FinCpzFrq, 
			                      T1.FinIsRvwAlw, T1.FinRvwFrq, T1.FinGrcRateType, T1.FinGrcBaseRate, T1.FinGrcSplRate, T1.FinGrcIntRate, T1.FInGrcMinRate, T1.FinGrcMaxRate, 
			                      T1.FinGrcDftIntFrq, T1.FinGrcIsIntCpz, T1.FinGrcCpzFrq, T1.FinGrcIsRvwAlw, T1.FinGrcRvwFrq, T1.FinMinTerm, T1.FinMaxTerm, T1.FinDftTerms, T1.FinRpyFrq, 
			                      T1.FInRepayMethod, T1.FinIsAlwPartialRpy, T1.FinIsAlwDifferment, T1.FinMaxDifferment, T1.FinIsAlwEarlyRpy, T1.FinIsAlwEarlySettle, T1.FinODRpyTries, 
			                      T1.FinEarlyPayRule, T1.FinEarlySettleRule, T1.FinDepositRestrictedTo, T1.FinAEBuyOrInception, T1.FinAESellOrMaturity, T1.FinIsActive, T1.Version, T1.LastMntBy, 
			                      T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId, T1.StepFinance, T1.SteppingMandatory, 
			                      T1.AlwManualSteps, T1.AlwdStepPolicies, T1.DftStepPolicy, T3.BRTypeDesc lovDescFinBaseRateName, T4.SRTypeDesc lovDescFinSplRateName, 
			                      T5.BRTypeDesc lovDescFinGrcBaseRateName, T6.SRTypeDesc lovDescFinGrcSplRateName, T1.FinIsDwPayRequired, T1.FinRvwRateApplFor, 
			                      T1.FinAlwRateChangeAnyDate, T1.FinGrcRvwRateApplFor, T1.FinIsIntCpzAtGrcEnd, T1.FinElgRuleCode, T1.LimitElgRuleCode, T1.FinSchCalCodeOnRvw, 
			                      T1.AlwPlanDeferment, T1.PlanDeferCount, T1.FinAssetType, T1.PftPayAcType, T1.FinIsOpenPftPayAcc, T1.FinIsAlwGrcRepay, T1.FinGrcSchdMthd, T1.FinGrcMargin, 
			                      T1.FinMargin, T1.FinScheduleOn, T1.FinGrcScheduleOn, T1.FinCommitmentReq, T1.FinCollateralReq, T1.FinDepreciationReq, T1.FinDepreciationFrq, 
			                      T1.FinBankContingentAcType, T1.FinProvisionAcType, T1.FinAlwIndRate, T1.FInIndBaseRate, T1.FinGrcAlwIndRate, T1.FinGrcIndBaseRate, 
			                      T7.BRTypeDesc lovDescFinIndBaseRateName, T8.BRTypeDesc lovDescFinGrcIndBaseRateName, T1.AllowRIAInvestment, T1.OverrideLimit, T1.LimitRequired, 
			                      T1.FinCommitmentOvrride, T1.FinCollateralOvrride, T1.FinRepayPftOnFrq, T1.FinPftUnChanged, T1.ApplyODPenalty, T1.ODIncGrcDays, T1.ODChargeType, 
			                      T1.ODGraceDays, T1.ODChargeCalOn, T1.ODChargeAmtOrPerc, T1.ODAllowWaiver, T1.ODMaxWaiverPerc, T1.FinDivision, 
			                      T9.DivisionCodeDesc LovDescFinDivisionName, T1.FinSuspAcType, T1.Product, T1.StartDate, T1.EndDate, T1.TakafulMandatory, T1.TakafulReq, 
			                      T1.RemFeeSchdMethod, T1.TakafulProvider, T10.TakafulName lovDescTakafulProviderName, T10.TakafulRate lovDescTakafulRate, T1.AllowDownpayPgm, 
			                      T2.FinTypeDesc lovDescPromoFinTypeDesc, T10.AddrLine1 lovDescTakafulProviderAddr, T1.ScheduleTakaful, T1.Remarks, 
			                      T12.PolicyDesc lovDescDftStepPolicyName, T1.AlwEarlyPayMethods, T1.PropertyTakafulReq, T1.TakafulPayType, T1.PropertyTakafulPayType, 
			                      T1.PropertyTakafulProvider, T1.PastduePftCalMthd, T1.PastduePftMargin, T11.TakafulName lovDescPptTakafulProvider, T1.AlwAdvanceRent, 
			                      T11.TakafulRate lovDescPptTakafulRate, T1.GrcAdvBaseRate, T1.GrcAdvMargin, T1.GrcAdvPftRate, T1.RpyAdvBaseRate, T1.RpyAdvMargin, T1.RpyAdvPftRate, 
			                      T13.BRTypeDesc GrcAdvBaseRateDesc, T14.BRTypeDesc RpyAdvBaseRateDesc, T1.AlwCreditIns, T1.RollOverFinance, T1.RollOverFrq, T1.DownPayRule, 
			                      T1.FinSuspTrigger, T1.FinSuspRemarks, T1.AlwMultiPartyDisb, T1.collateralType, T1.TDSApplicable, T15.RuleCode DownPayRuleDesc, T1.ApplyGrcPricing, 
			                      T1.GrcPricingMethod, T1.ApplyRpyPricing, T1.RpyPricingMethod, T1.RpyHierarchy, T16.RuleCode GrcPricingMethodDesc, 
			                      T17.RuleCode RpyPricingMethodDesc, T1.DroplineOD, T1.DroppingMethod, T1.RateChgAnyDay, T12.StepType DftStepPolicyType, T1.ManualSchedule,T18.ProductCategory,
			                      T1.AlwBPI , T1.BpiTreatment , T1.PftDueSchOn , T1.PlanEMIHAlw , T1.PlanEMIHMethod , T1.PlanEMIHMaxPerYear , T1.PlanEMIHMax , 
			 					  T1.PlanEMIHLockPeriod , T1.PlanEMICpz , T1.UnPlanEMIHLockPeriod , T1.UnPlanEMICpz , T1.ReAgeCpz, T1.FddLockPeriod, T1.AlwdRpyMethods, 
			 					  T1.MaxUnplannedEmi, T1.MaxReAgeHolidays, T1.CalRoundingMode
			FROM         RMTFinanceTypes T1 LEFT OUTER JOIN
			                      RMTFinanceTypes T2 ON T1.Product = T2.FinType LEFT OUTER JOIN
			                      RMTBaseRateCodes T3 ON T1.FinBaseRate = T3.BRType LEFT OUTER JOIN
			                      RMTSplRateCodes T4 ON T1.FinSplRate = T4.SRType LEFT OUTER JOIN
			                      RMTBaseRateCodes T5 ON T1.FinGrcBaseRate = T5.BRType LEFT OUTER JOIN
			                      RMTSplRateCodes T6 ON T1.FinGrcSplRate = T6.SRType LEFT OUTER JOIN
			                      RMTBaseRateCodes T7 ON T1.FInIndBaseRate = T7.BRType LEFT OUTER JOIN
			                      RMTBaseRateCodes T8 ON T1.FinGrcIndBaseRate = T8.BRType INNER JOIN
			                      SMTDivisionDetail T9 ON T1.FinDivision = T9.DivisionCode LEFT OUTER JOIN
			                      TakafulProvider T10 ON T1.TakafulProvider = T10.TakafulCode LEFT OUTER JOIN
			                      TakafulProvider T11 ON T1.PropertyTakafulProvider = T11.TakafulCode LEFT OUTER JOIN
			                      StepPolicyHeader T12 ON T1.DftStepPolicy = T12.PolicyCode LEFT OUTER JOIN
			                      RMTBaseRateCodes T13 ON T1.GrcAdvBaseRate = T13.BRType LEFT OUTER JOIN
			                      RMTBaseRateCodes T14 ON T1.RpyAdvBaseRate = T14.BRType LEFT OUTER JOIN
			                      Rules T15 ON T1.DownPayRule = T15.RuleId LEFT OUTER JOIN
			                      Rules T16 ON T1.GrcPricingMethod = T16.RuleId LEFT OUTER JOIN
			                      Rules T17 ON T1.RpyPricingMethod = T17.RuleId LEFT OUTER JOIN
								  BMTProduct T18 ON T1.FinCategory = T18.ProductCode
		</createView>
		
		
		<createView replaceIfExists="true" viewName="RMTFinanceTypes_AView">
						SELECT     T1.FinType, T1.FinCategory, T1.FinTypeDesc, T1.FinCcy, T1.FinDaysCalType, T1.FinAcType, T1.FinContingentAcType,
				           T1.FinIsGenRef, T1.FinMaxAmount, T1.FinMinAmount, T1.FinIsOpenNewFinAc, T1.FinDftStmtFrq, T1.FinIsAlwMD,
						   T1.FinSchdMthd, T1.FInIsAlwGrace, T1.FinHistRetension, T1.FinOrgPrfUnchanged, T1.EqualRepayment, T1.FinRateType,
						   T1.FinBaseRate, T1.FinSplRate, T1.FinIntRate, T1.FInMinRate, T1.FinMaxRate, T1.FinDftIntFrq, T1.FinIsIntCpz, T1.FinCpzFrq, 
				           T1.FinIsRvwAlw, T1.FinRvwFrq, T1.FinGrcRateType, T1.FinGrcBaseRate, T1.FinGrcSplRate, T1.FinGrcIntRate,
						   T1.FInGrcMinRate, T1.FinGrcMaxRate,T1.FinGrcDftIntFrq, T1.FinGrcIsIntCpz, T1.FinGrcCpzFrq, T1.FinGrcIsRvwAlw, 
						   T1.FinGrcRvwFrq, T1.FinMinTerm, T1.FinMaxTerm, T1.FinDftTerms, T1.FinRpyFrq, T1.FInRepayMethod, T1.FinIsAlwPartialRpy,
						   T1.FinIsAlwDifferment, T1.FinMaxDifferment, T1.FinIsAlwEarlyRpy, T1.FinIsAlwEarlySettle, T1.FinODRpyTries, T1.FinEarlyPayRule,
						   T1.FinEarlySettleRule, T1.FinDepositRestrictedTo,T1.FinAEBuyOrInception, T1.FinAESellOrMaturity, T1.FinIsActive, T1.Version,
						   T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType,
						   T1.WorkflowId, T1.StepFinance, T1.SteppingMandatory, T1.AlwManualSteps, T1.AlwdStepPolicies, T1.DftStepPolicy, 
				           T2.CcyDesc AS lovDescFinCcyName, T3.IntRateBasisDesc AS lovDescFinDaysCalTypeName, 
						   T4.AcTypeDesc AS lovDescFinContingentAcTypeName,T5.AcTypeDesc AS lovDescFinAcTypeName,
						   T6.SchdMethodDesc AS lovDescFinSchdMthdName, T7.IntRateTypeDesc AS lovDescFinRateTypeName, 
				           T8.BRTypeDesc AS lovDescFinBaseRateName, T9.SRTypeDesc AS lovDescFinSplRateName,
						   T10.IntRateTypeDesc AS lovDescFinGrcRateTypeName,T11.BRTypeDesc AS lovDescFinGrcBaseRateName,
						   T12.SRTypeDesc AS lovDescFinGrcSplRateName,T30.RepayMethodDesc AS lovDescFInRepayMethodName, 
				           T1.FinIsDwPayRequired, T1.FinRvwRateApplFor,T1.FinAlwRateChangeAnyDate, T1.FinGrcRvwRateApplFor, T1.FinIsIntCpzAtGrcEnd,
						   T2.CcyEditField AS lovDescFinFormetter, T1.FinElgRuleCode, T1.LimitElgRuleCode,T1.FinSchCalCodeOnRvw, T1.AlwPlanDeferment,
						   T1.PlanDeferCount, T1.FinAssetType, T1.PftPayAcType, T1.FinIsOpenPftPayAcc,T31.AcTypeDesc AS lovDescPftPayAcTypeName, 
				           T1.FinIsAlwGrcRepay, T1.FinGrcSchdMthd, T1.FinGrcMargin, T1.FinMargin,T1.FinScheduleOn, T1.FinGrcScheduleOn, 
				           T1.FinCommitmentReq, T1.FinCollateralReq, T1.FinDepreciationReq, T1.FinDepreciationFrq, T1.FinBankContingentAcType, 
				           T1.FinProvisionAcType, T38.AcTypeDesc AS lovDescFinBankContAcTypeName, T39.AcTypeDesc AS lovDescFinProvisionAcTypeName,
						   T1.FinAlwIndRate,T1.FInIndBaseRate, T1.FinGrcAlwIndRate, T1.FinGrcIndBaseRate, T40.BRTypeDesc AS lovDescFinIndBaseRateName, 
				           T41.BRTypeDesc AS lovDescFinGrcIndBaseRateName, T1.AllowRIAInvestment, T1.OverrideLimit, T1.LimitRequired,
						   T1.FinCommitmentOvrride, T1.FinCollateralOvrride, 
				           T1.FinPftUnChanged,T1.ApplyODPenalty, T1.ODIncGrcDays,T1.ODChargeType, T1.ODGraceDays, T1.ODChargeCalOn, T1.ODChargeAmtOrPerc,
						   T1.ODAllowWaiver, T1.ODMaxWaiverPerc, T1.FinDivision,T48.DivisionCodeDesc AS LovDescFinDivisionName, T1.FinSuspAcType,
						   T49.AcTypeDesc AS lovDescFinSuspAcTypeName, T52.ProductDesc AS lovDescProductCodeDesc,T1.Product, T1.StartDate, T1.EndDate,
						   T1.TakafulMandatory, T1.TakafulReq, T1.RemFeeSchdMethod, T1.TakafulProvider,T53.TakafulName AS lovDescTakafulProviderName,
						   T53.TakafulRate AS lovDescTakafulRate, T1.AllowDownpayPgm, T54.FinTypeDesc AS lovDescPromoFinTypeDesc, 
				           T53.AddrLine1 + ' ' + T53.AddrLine2 AS lovDescTakafulProviderAddr, T1.ScheduleTakaful, T1.Remarks, 
						   T55.PolicyDesc AS lovDescDftStepPolicyName,T1.AlwEarlyPayMethods, T1.PropertyTakafulReq, T1.TakafulPayType,
						   T1.PropertyTakafulPayType, T1.PropertyTakafulProvider, T1.PastduePftCalMthd,T1.PastduePftMargin, 
						   T56.TakafulName AS lovDescPptTakafulProvider, T1.AlwAdvanceRent, T56.TakafulRate AS lovDescPptTakafulRate, T1.GrcAdvBaseRate, 
				           T57.BRTypeDesc AS GrcAdvBaseRateDesc, T1.GrcAdvMargin, T1.GrcAdvPftRate, T1.RpyAdvBaseRate, T58.BRTypeDesc AS RpyAdvBaseRateDesc, 
				           T1.RpyAdvMargin, T1.RpyAdvPftRate, T1.AlwCreditIns, T1.RollOverFinance, T1.RollOverFrq, T1.DownPayRule,
						   T59.RuleCode AS DownPayRuleDesc,T1.FinSuspTrigger, T1.FinSuspRemarks, T1.AlwMultiPartyDisb,T1.collateralType, T1.TDSApplicable,
						   T1.ManualSchedule,T1.ApplyGrcPricing ,T1.GrcPricingMethod, T1.ApplyRpyPricing, T1.RpyPricingMethod, T1.RpyHierarchy,
						   T67.RuleCode AS GrcPricingMethodDesc ,T68.RuleCode AS RpyPricingMethodDesc , T1.DroplineOD , T1.DroppingMethod ,
						   T1.RateChgAnyDay,T52.ProductCategory , T55.StepType as DftStepPolicyType,T1.FinRepayPftOnFrq,
						    T1.AlwBPI , T1.BpiTreatment , T1.PftDueSchOn , T1.PlanEMIHAlw , T1.PlanEMIHMethod , T1.PlanEMIHMaxPerYear , T1.PlanEMIHMax , 
							T1.PlanEMIHLockPeriod , T1.PlanEMICpz , T1.UnPlanEMIHLockPeriod , T1.UnPlanEMICpz , T1.ReAgeCpz, T1.FddLockPeriod, T1.AlwdRpyMethods, 
							T1.MaxUnplannedEmi, T1.MaxReAgeHolidays, T1.CalRoundingMode
				FROM       dbo.RMTFinanceTypes AS T1 LEFT OUTER JOIN
				           dbo.RMTFinanceTypes AS T54 ON T1.Product = T54.FinType LEFT OUTER JOIN
				           dbo.BMTProduct AS T52 ON T1.FinCategory = T52.ProductCode LEFT OUTER JOIN
				           dbo.RMTCurrencies AS T2 ON T1.FinCcy = T2.CcyCode LEFT OUTER JOIN
				           dbo.BMTIntRateBasisCodes AS T3 ON T1.FinDaysCalType = T3.IntRateBasisCode LEFT OUTER JOIN
				           dbo.RMTAccountTypes AS T4 ON T1.FinContingentAcType = T4.AcType LEFT OUTER JOIN
				           dbo.RMTAccountTypes AS T38 ON T1.FinBankContingentAcType = T38.AcType LEFT OUTER JOIN
				           dbo.RMTAccountTypes AS T39 ON T1.FinProvisionAcType = T39.AcType LEFT OUTER JOIN
				           dbo.RMTAccountTypes AS T5 ON T1.FinAcType = T5.AcType LEFT OUTER JOIN
				           dbo.BMTSchdMethod AS T6 ON T1.FinSchdMthd = T6.SchdMethod LEFT OUTER JOIN
				           dbo.BMTInterestRateTypes AS T7 ON T1.FinRateType = T7.IntRateTypeCode LEFT OUTER JOIN
				           dbo.RMTBaseRateCodes AS T8 ON T1.FinBaseRate = T8.BRType LEFT OUTER JOIN
				           dbo.RMTSplRateCodes AS T9 ON T1.FinSplRate = T9.SRType LEFT OUTER JOIN
				           dbo.BMTInterestRateTypes AS T10 ON T1.FinGrcRateType = T10.IntRateTypeCode LEFT OUTER JOIN
				           dbo.RMTBaseRateCodes AS T11 ON T1.FinGrcBaseRate = T11.BRType LEFT OUTER JOIN
				           dbo.RMTSplRateCodes AS T12 ON T1.FinGrcSplRate = T12.SRType LEFT OUTER JOIN
				           dbo.BMTRepayMethod AS T30 ON T1.FInRepayMethod = T30.RepayMethod LEFT OUTER JOIN
				           dbo.RMTAccountTypes AS T31 ON T1.PftPayAcType = T31.AcType LEFT OUTER JOIN
				           dbo.RMTBaseRateCodes AS T40 ON T1.FInIndBaseRate = T40.BRType LEFT OUTER JOIN
				           dbo.RMTBaseRateCodes AS T41 ON T1.FinGrcIndBaseRate = T41.BRType LEFT OUTER JOIN
				           dbo.SMTDivisionDetail AS T48 ON T1.FinDivision = T48.DivisionCode LEFT OUTER JOIN
				           dbo.RMTAccountTypes AS T49 ON T1.FinSuspAcType = T49.AcType LEFT OUTER JOIN
				           dbo.TakafulProvider AS T53 ON T1.TakafulProvider = T53.TakafulCode LEFT OUTER JOIN
				           dbo.TakafulProvider AS T56 ON T1.PropertyTakafulProvider = T56.TakafulCode LEFT OUTER JOIN
				           dbo.StepPolicyHeader AS T55 ON T1.DftStepPolicy = T55.PolicyCode LEFT OUTER JOIN
				           dbo.RMTBaseRateCodes AS T57 ON T1.GrcAdvBaseRate = T57.BRType LEFT OUTER JOIN
				           dbo.RMTBaseRateCodes AS T58 ON T1.RpyAdvBaseRate = T58.BRType LEFT OUTER JOIN
				           dbo.Rules AS T59 ON T1.DownPayRule = T59.RuleId LEFT OUTER JOIN
				           dbo.Rules AS T67 ON T1.GrcPricingMethod = T67.RuleId  LEFT OUTER JOIN
				           dbo.Rules AS T68 ON T1.RpyPricingMethod = T68.RuleId
						
		</createView>
		
		<createView replaceIfExists="true" viewName="RMTFinanceTypes_View">
			SELECT     T1.FinType, T1.FinCategory, T1.FinTypeDesc, T1.FinCcy, T1.FinDaysCalType, T1.FinAcType, T1.FinContingentAcType,
			           T1.FinIsGenRef, T1.FinMaxAmount, T1.FinMinAmount, T1.FinIsOpenNewFinAc, T1.FinDftStmtFrq, T1.FinIsAlwMD,
					   T1.FinSchdMthd, T1.FInIsAlwGrace, T1.FinHistRetension, T1.FinOrgPrfUnchanged, T1.EqualRepayment, T1.FinRateType,
					   T1.FinBaseRate, T1.FinSplRate, T1.FinIntRate, T1.FInMinRate, T1.FinMaxRate, T1.FinDftIntFrq, T1.FinIsIntCpz, T1.FinCpzFrq, 
			           T1.FinIsRvwAlw, T1.FinRvwFrq, T1.FinGrcRateType, T1.FinGrcBaseRate, T1.FinGrcSplRate, T1.FinGrcIntRate,
					   T1.FInGrcMinRate, T1.FinGrcMaxRate,T1.FinGrcDftIntFrq, T1.FinGrcIsIntCpz, T1.FinGrcCpzFrq, T1.FinGrcIsRvwAlw, 
					   T1.FinGrcRvwFrq, T1.FinMinTerm, T1.FinMaxTerm, T1.FinDftTerms, T1.FinRpyFrq, T1.FInRepayMethod, T1.FinIsAlwPartialRpy,
					   T1.FinIsAlwDifferment, T1.FinMaxDifferment, T1.FinIsAlwEarlyRpy, T1.FinIsAlwEarlySettle, T1.FinODRpyTries, T1.FinEarlyPayRule,
					   T1.FinEarlySettleRule, T1.FinDepositRestrictedTo,T1.FinAEBuyOrInception, T1.FinAESellOrMaturity, T1.FinIsActive, T1.Version,
					   T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType,
					   T1.WorkflowId, T1.StepFinance, T1.SteppingMandatory, T1.AlwManualSteps, T1.AlwdStepPolicies, T1.DftStepPolicy, 
			           T2.CcyDesc AS lovDescFinCcyName, T3.IntRateBasisDesc AS lovDescFinDaysCalTypeName, 
					   T4.AcTypeDesc AS lovDescFinContingentAcTypeName,T5.AcTypeDesc AS lovDescFinAcTypeName,
					   T6.SchdMethodDesc AS lovDescFinSchdMthdName, T7.IntRateTypeDesc AS lovDescFinRateTypeName, 
			           T8.BRTypeDesc AS lovDescFinBaseRateName, T9.SRTypeDesc AS lovDescFinSplRateName,
					   T10.IntRateTypeDesc AS lovDescFinGrcRateTypeName,T11.BRTypeDesc AS lovDescFinGrcBaseRateName,
					   T12.SRTypeDesc AS lovDescFinGrcSplRateName,T30.RepayMethodDesc AS lovDescFInRepayMethodName, 
			           T1.FinIsDwPayRequired, T1.FinRvwRateApplFor,T1.FinAlwRateChangeAnyDate, T1.FinGrcRvwRateApplFor, T1.FinIsIntCpzAtGrcEnd,
					   T2.CcyEditField AS lovDescFinFormetter, T1.FinElgRuleCode, T1.LimitElgRuleCode,T1.FinSchCalCodeOnRvw, T1.AlwPlanDeferment,
					   T1.PlanDeferCount, T1.FinAssetType, T1.PftPayAcType, T1.FinIsOpenPftPayAcc,T31.AcTypeDesc AS lovDescPftPayAcTypeName, 
			           T1.FinIsAlwGrcRepay, T1.FinGrcSchdMthd, T1.FinGrcMargin, T1.FinMargin,T1.FinScheduleOn, T1.FinGrcScheduleOn, 
			           T1.FinCommitmentReq, T1.FinCollateralReq, T1.FinDepreciationReq, T1.FinDepreciationFrq, T1.FinBankContingentAcType, 
			           T1.FinProvisionAcType, T38.AcTypeDesc AS lovDescFinBankContAcTypeName, T39.AcTypeDesc AS lovDescFinProvisionAcTypeName,
					   T1.FinAlwIndRate,T1.FInIndBaseRate, T1.FinGrcAlwIndRate, T1.FinGrcIndBaseRate, T40.BRTypeDesc AS lovDescFinIndBaseRateName, 
			           T41.BRTypeDesc AS lovDescFinGrcIndBaseRateName, T1.AllowRIAInvestment, T1.OverrideLimit, T1.LimitRequired,
					   T1.FinCommitmentOvrride, T1.FinCollateralOvrride,
			           T1.FinPftUnChanged,T1.ApplyODPenalty, T1.ODIncGrcDays,T1.ODChargeType, T1.ODGraceDays, T1.ODChargeCalOn, T1.ODChargeAmtOrPerc,
					   T1.ODAllowWaiver, T1.ODMaxWaiverPerc, T1.FinDivision,T48.DivisionCodeDesc AS LovDescFinDivisionName, T1.FinSuspAcType,
					   T49.AcTypeDesc AS lovDescFinSuspAcTypeName, T52.ProductDesc AS lovDescProductCodeDesc,T1.Product, T1.StartDate, T1.EndDate,
					   T1.TakafulMandatory, T1.TakafulReq, T1.RemFeeSchdMethod, T1.TakafulProvider,T53.TakafulName AS lovDescTakafulProviderName,
					   T53.TakafulRate AS lovDescTakafulRate, T1.AllowDownpayPgm, T54.FinTypeDesc AS lovDescPromoFinTypeDesc, 
			           T53.AddrLine1 + ' ' + T53.AddrLine2 AS lovDescTakafulProviderAddr, T1.ScheduleTakaful, T1.Remarks, 
					   T55.PolicyDesc AS lovDescDftStepPolicyName,T1.AlwEarlyPayMethods, T1.PropertyTakafulReq, T1.TakafulPayType,
					   T1.PropertyTakafulPayType, T1.PropertyTakafulProvider, T1.PastduePftCalMthd,T1.PastduePftMargin, 
					   T56.TakafulName AS lovDescPptTakafulProvider, T1.AlwAdvanceRent, T56.TakafulRate AS lovDescPptTakafulRate, T1.GrcAdvBaseRate, 
			           T57.BRTypeDesc AS GrcAdvBaseRateDesc, T1.GrcAdvMargin, T1.GrcAdvPftRate, T1.RpyAdvBaseRate, T58.BRTypeDesc AS RpyAdvBaseRateDesc, 
			           T1.RpyAdvMargin, T1.RpyAdvPftRate, T1.AlwCreditIns, T1.RollOverFinance, T1.RollOverFrq, T1.DownPayRule,
					   T59.RuleCode AS DownPayRuleDesc,T1.FinSuspTrigger, T1.FinSuspRemarks, T1.AlwMultiPartyDisb,T1.collateralType, T1.TDSApplicable,
					   T1.ManualSchedule,T1.ApplyGrcPricing ,T1.GrcPricingMethod, T1.ApplyRpyPricing, T1.RpyPricingMethod, T1.RpyHierarchy,
					   T67.RuleCode AS GrcPricingMethodDesc ,T68.RuleCode AS RpyPricingMethodDesc , T1.DroplineOD , T1.DroppingMethod ,
					   T1.RateChgAnyDay,T52.ProductCategory , T55.StepType as DftStepPolicyType,T1.FinRepayPftOnFrq,
					    T1.AlwBPI , T1.BpiTreatment , T1.PftDueSchOn , T1.PlanEMIHAlw , T1.PlanEMIHMethod , T1.PlanEMIHMaxPerYear , T1.PlanEMIHMax , 
						T1.PlanEMIHLockPeriod , T1.PlanEMICpz , T1.UnPlanEMIHLockPeriod , T1.UnPlanEMICpz , T1.ReAgeCpz, T1.FddLockPeriod, T1.AlwdRpyMethods, 
						T1.MaxUnplannedEmi, T1.MaxReAgeHolidays, T1.CalRoundingMode
			FROM       dbo.RMTFinanceTypes_Temp AS T1 LEFT OUTER JOIN
			           dbo.RMTFinanceTypes AS T54 ON T1.Product = T54.FinType LEFT OUTER JOIN
			           dbo.BMTProduct AS T52 ON T1.FinCategory = T52.ProductCode LEFT OUTER JOIN
			           dbo.RMTCurrencies AS T2 ON T1.FinCcy = T2.CcyCode LEFT OUTER JOIN
			           dbo.BMTIntRateBasisCodes AS T3 ON T1.FinDaysCalType = T3.IntRateBasisCode LEFT OUTER JOIN
			           dbo.RMTAccountTypes AS T4 ON T1.FinContingentAcType = T4.AcType LEFT OUTER JOIN
			           dbo.RMTAccountTypes AS T38 ON T1.FinBankContingentAcType = T38.AcType LEFT OUTER JOIN
			           dbo.RMTAccountTypes AS T39 ON T1.FinProvisionAcType = T39.AcType LEFT OUTER JOIN
			           dbo.RMTAccountTypes AS T5 ON T1.FinAcType = T5.AcType LEFT OUTER JOIN
			           dbo.BMTSchdMethod AS T6 ON T1.FinSchdMthd = T6.SchdMethod LEFT OUTER JOIN
			           dbo.BMTInterestRateTypes AS T7 ON T1.FinRateType = T7.IntRateTypeCode LEFT OUTER JOIN
			           dbo.RMTBaseRateCodes AS T8 ON T1.FinBaseRate = T8.BRType LEFT OUTER JOIN
			           dbo.RMTSplRateCodes AS T9 ON T1.FinSplRate = T9.SRType LEFT OUTER JOIN
			           dbo.BMTInterestRateTypes AS T10 ON T1.FinGrcRateType = T10.IntRateTypeCode LEFT OUTER JOIN
			           dbo.RMTBaseRateCodes AS T11 ON T1.FinGrcBaseRate = T11.BRType LEFT OUTER JOIN
			           dbo.RMTSplRateCodes AS T12 ON T1.FinGrcSplRate = T12.SRType LEFT OUTER JOIN
			           dbo.BMTRepayMethod AS T30 ON T1.FInRepayMethod = T30.RepayMethod LEFT OUTER JOIN
			           dbo.RMTAccountTypes AS T31 ON T1.PftPayAcType = T31.AcType LEFT OUTER JOIN
			           dbo.RMTBaseRateCodes AS T40 ON T1.FInIndBaseRate = T40.BRType LEFT OUTER JOIN
			           dbo.RMTBaseRateCodes AS T41 ON T1.FinGrcIndBaseRate = T41.BRType LEFT OUTER JOIN
			           dbo.SMTDivisionDetail AS T48 ON T1.FinDivision = T48.DivisionCode LEFT OUTER JOIN
			           dbo.RMTAccountTypes AS T49 ON T1.FinSuspAcType = T49.AcType LEFT OUTER JOIN
			           dbo.TakafulProvider AS T53 ON T1.TakafulProvider = T53.TakafulCode LEFT OUTER JOIN
			           dbo.TakafulProvider AS T56 ON T1.PropertyTakafulProvider = T56.TakafulCode LEFT OUTER JOIN
			           dbo.StepPolicyHeader AS T55 ON T1.DftStepPolicy = T55.PolicyCode LEFT OUTER JOIN
			           dbo.RMTBaseRateCodes AS T57 ON T1.GrcAdvBaseRate = T57.BRType LEFT OUTER JOIN
			           dbo.RMTBaseRateCodes AS T58 ON T1.RpyAdvBaseRate = T58.BRType LEFT OUTER JOIN
			           dbo.Rules AS T59 ON T1.DownPayRule = T59.RuleId LEFT OUTER JOIN
			           dbo.Rules AS T67 ON T1.GrcPricingMethod = T67.RuleId  LEFT OUTER JOIN
			           dbo.Rules AS T68 ON T1.RpyPricingMethod = T68.RuleId 
			UNION ALL
			SELECT     T1.FinType, T1.FinCategory, T1.FinTypeDesc, T1.FinCcy, T1.FinDaysCalType, T1.FinAcType, T1.FinContingentAcType,
			           T1.FinIsGenRef, T1.FinMaxAmount, T1.FinMinAmount, T1.FinIsOpenNewFinAc, T1.FinDftStmtFrq, T1.FinIsAlwMD,
					   T1.FinSchdMthd, T1.FInIsAlwGrace, T1.FinHistRetension, T1.FinOrgPrfUnchanged, T1.EqualRepayment, T1.FinRateType,
					   T1.FinBaseRate, T1.FinSplRate, T1.FinIntRate, T1.FInMinRate, T1.FinMaxRate, T1.FinDftIntFrq, T1.FinIsIntCpz, T1.FinCpzFrq, 
			           T1.FinIsRvwAlw, T1.FinRvwFrq, T1.FinGrcRateType, T1.FinGrcBaseRate, T1.FinGrcSplRate, T1.FinGrcIntRate,
					   T1.FInGrcMinRate, T1.FinGrcMaxRate,T1.FinGrcDftIntFrq, T1.FinGrcIsIntCpz, T1.FinGrcCpzFrq, T1.FinGrcIsRvwAlw, 
					   T1.FinGrcRvwFrq, T1.FinMinTerm, T1.FinMaxTerm, T1.FinDftTerms, T1.FinRpyFrq, T1.FInRepayMethod, T1.FinIsAlwPartialRpy,
					   T1.FinIsAlwDifferment, T1.FinMaxDifferment, T1.FinIsAlwEarlyRpy, T1.FinIsAlwEarlySettle, T1.FinODRpyTries, T1.FinEarlyPayRule,
					   T1.FinEarlySettleRule, T1.FinDepositRestrictedTo,T1.FinAEBuyOrInception, T1.FinAESellOrMaturity, T1.FinIsActive, T1.Version,
					   T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType,
					   T1.WorkflowId, T1.StepFinance, T1.SteppingMandatory, T1.AlwManualSteps, T1.AlwdStepPolicies, T1.DftStepPolicy, 
			           T2.CcyDesc AS lovDescFinCcyName, T3.IntRateBasisDesc AS lovDescFinDaysCalTypeName, 
					   T4.AcTypeDesc AS lovDescFinContingentAcTypeName,T5.AcTypeDesc AS lovDescFinAcTypeName,
					   T6.SchdMethodDesc AS lovDescFinSchdMthdName, T7.IntRateTypeDesc AS lovDescFinRateTypeName, 
			           T8.BRTypeDesc AS lovDescFinBaseRateName, T9.SRTypeDesc AS lovDescFinSplRateName,
					   T10.IntRateTypeDesc AS lovDescFinGrcRateTypeName,T11.BRTypeDesc AS lovDescFinGrcBaseRateName,
					   T12.SRTypeDesc AS lovDescFinGrcSplRateName,T30.RepayMethodDesc AS lovDescFInRepayMethodName, 
			           T1.FinIsDwPayRequired, T1.FinRvwRateApplFor,T1.FinAlwRateChangeAnyDate, T1.FinGrcRvwRateApplFor, T1.FinIsIntCpzAtGrcEnd,
					   T2.CcyEditField AS lovDescFinFormetter, T1.FinElgRuleCode, T1.LimitElgRuleCode,T1.FinSchCalCodeOnRvw, T1.AlwPlanDeferment,
					   T1.PlanDeferCount, T1.FinAssetType, T1.PftPayAcType, T1.FinIsOpenPftPayAcc,T31.AcTypeDesc AS lovDescPftPayAcTypeName, 
			           T1.FinIsAlwGrcRepay, T1.FinGrcSchdMthd, T1.FinGrcMargin, T1.FinMargin,T1.FinScheduleOn, T1.FinGrcScheduleOn, 
			           T1.FinCommitmentReq, T1.FinCollateralReq, T1.FinDepreciationReq, T1.FinDepreciationFrq, T1.FinBankContingentAcType, 
			           T1.FinProvisionAcType, T38.AcTypeDesc AS lovDescFinBankContAcTypeName, T39.AcTypeDesc AS lovDescFinProvisionAcTypeName,
					   T1.FinAlwIndRate,T1.FInIndBaseRate, T1.FinGrcAlwIndRate, T1.FinGrcIndBaseRate, T40.BRTypeDesc AS lovDescFinIndBaseRateName, 
			           T41.BRTypeDesc AS lovDescFinGrcIndBaseRateName, T1.AllowRIAInvestment, T1.OverrideLimit, T1.LimitRequired,
					   T1.FinCommitmentOvrride, T1.FinCollateralOvrride,
			           T1.FinPftUnChanged,T1.ApplyODPenalty, T1.ODIncGrcDays,T1.ODChargeType, T1.ODGraceDays, T1.ODChargeCalOn, T1.ODChargeAmtOrPerc,
					   T1.ODAllowWaiver, T1.ODMaxWaiverPerc, T1.FinDivision,T48.DivisionCodeDesc AS LovDescFinDivisionName, T1.FinSuspAcType,
					   T49.AcTypeDesc AS lovDescFinSuspAcTypeName, T52.ProductDesc AS lovDescProductCodeDesc,T1.Product, T1.StartDate, T1.EndDate,
					   T1.TakafulMandatory, T1.TakafulReq, T1.RemFeeSchdMethod, T1.TakafulProvider,T53.TakafulName AS lovDescTakafulProviderName,
					   T53.TakafulRate AS lovDescTakafulRate, T1.AllowDownpayPgm, T54.FinTypeDesc AS lovDescPromoFinTypeDesc, 
			           T53.AddrLine1 + ' ' + T53.AddrLine2 AS lovDescTakafulProviderAddr, T1.ScheduleTakaful, T1.Remarks, 
					   T55.PolicyDesc AS lovDescDftStepPolicyName,T1.AlwEarlyPayMethods, T1.PropertyTakafulReq, T1.TakafulPayType,
					   T1.PropertyTakafulPayType, T1.PropertyTakafulProvider, T1.PastduePftCalMthd,T1.PastduePftMargin, 
					   T56.TakafulName AS lovDescPptTakafulProvider, T1.AlwAdvanceRent, T56.TakafulRate AS lovDescPptTakafulRate, T1.GrcAdvBaseRate, 
			           T57.BRTypeDesc AS GrcAdvBaseRateDesc, T1.GrcAdvMargin, T1.GrcAdvPftRate, T1.RpyAdvBaseRate, T58.BRTypeDesc AS RpyAdvBaseRateDesc, 
			           T1.RpyAdvMargin, T1.RpyAdvPftRate, T1.AlwCreditIns, T1.RollOverFinance, T1.RollOverFrq, T1.DownPayRule,
					   T59.RuleCode AS DownPayRuleDesc,T1.FinSuspTrigger, T1.FinSuspRemarks, T1.AlwMultiPartyDisb,T1.collateralType, T1.TDSApplicable,
					   T1.ManualSchedule,T1.ApplyGrcPricing ,T1.GrcPricingMethod, T1.ApplyRpyPricing, T1.RpyPricingMethod, T1.RpyHierarchy,
					   T67.RuleCode AS GrcPricingMethodDesc ,T68.RuleCode AS RpyPricingMethodDesc , T1.DroplineOD , T1.DroppingMethod ,
					   T1.RateChgAnyDay,T52.ProductCategory , T55.StepType as DftStepPolicyType,T1.FinRepayPftOnFrq,
					    T1.AlwBPI , T1.BpiTreatment , T1.PftDueSchOn , T1.PlanEMIHAlw , T1.PlanEMIHMethod , T1.PlanEMIHMaxPerYear , T1.PlanEMIHMax , 
						T1.PlanEMIHLockPeriod , T1.PlanEMICpz , T1.UnPlanEMIHLockPeriod , T1.UnPlanEMICpz , T1.ReAgeCpz, T1.FddLockPeriod, T1.AlwdRpyMethods, 
						T1.MaxUnplannedEmi, T1.MaxReAgeHolidays, T1.CalRoundingMode
			FROM       dbo.RMTFinanceTypes AS T1 LEFT OUTER JOIN
			           dbo.RMTFinanceTypes AS T54 ON T1.Product = T54.FinType LEFT OUTER JOIN
			           dbo.BMTProduct AS T52 ON T1.FinCategory = T52.ProductCode LEFT OUTER JOIN
			           dbo.RMTCurrencies AS T2 ON T1.FinCcy = T2.CcyCode LEFT OUTER JOIN
			           dbo.BMTIntRateBasisCodes AS T3 ON T1.FinDaysCalType = T3.IntRateBasisCode LEFT OUTER JOIN
			           dbo.RMTAccountTypes AS T4 ON T1.FinContingentAcType = T4.AcType LEFT OUTER JOIN
			           dbo.RMTAccountTypes AS T38 ON T1.FinBankContingentAcType = T38.AcType LEFT OUTER JOIN
			           dbo.RMTAccountTypes AS T39 ON T1.FinProvisionAcType = T39.AcType LEFT OUTER JOIN
			           dbo.RMTAccountTypes AS T5 ON T1.FinAcType = T5.AcType LEFT OUTER JOIN
			           dbo.BMTSchdMethod AS T6 ON T1.FinSchdMthd = T6.SchdMethod LEFT OUTER JOIN
			           dbo.BMTInterestRateTypes AS T7 ON T1.FinRateType = T7.IntRateTypeCode LEFT OUTER JOIN
			           dbo.RMTBaseRateCodes AS T8 ON T1.FinBaseRate = T8.BRType LEFT OUTER JOIN
			           dbo.RMTSplRateCodes AS T9 ON T1.FinSplRate = T9.SRType LEFT OUTER JOIN
			           dbo.BMTInterestRateTypes AS T10 ON T1.FinGrcRateType = T10.IntRateTypeCode LEFT OUTER JOIN
			           dbo.RMTBaseRateCodes AS T11 ON T1.FinGrcBaseRate = T11.BRType LEFT OUTER JOIN
			           dbo.RMTSplRateCodes AS T12 ON T1.FinGrcSplRate = T12.SRType LEFT OUTER JOIN
			           dbo.BMTRepayMethod AS T30 ON T1.FInRepayMethod = T30.RepayMethod LEFT OUTER JOIN
			           dbo.RMTAccountTypes AS T31 ON T1.PftPayAcType = T31.AcType LEFT OUTER JOIN
			           dbo.RMTBaseRateCodes AS T40 ON T1.FInIndBaseRate = T40.BRType LEFT OUTER JOIN
			           dbo.RMTBaseRateCodes AS T41 ON T1.FinGrcIndBaseRate = T41.BRType LEFT OUTER JOIN
			           dbo.SMTDivisionDetail AS T48 ON T1.FinDivision = T48.DivisionCode LEFT OUTER JOIN
			           dbo.RMTAccountTypes AS T49 ON T1.FinSuspAcType = T49.AcType LEFT OUTER JOIN
			           dbo.TakafulProvider AS T53 ON T1.TakafulProvider = T53.TakafulCode LEFT OUTER JOIN
			           dbo.TakafulProvider AS T56 ON T1.PropertyTakafulProvider = T56.TakafulCode LEFT OUTER JOIN
			           dbo.StepPolicyHeader AS T55 ON T1.DftStepPolicy = T55.PolicyCode LEFT OUTER JOIN
			           dbo.RMTBaseRateCodes AS T57 ON T1.GrcAdvBaseRate = T57.BRType LEFT OUTER JOIN
			           dbo.RMTBaseRateCodes AS T58 ON T1.RpyAdvBaseRate = T58.BRType LEFT OUTER JOIN
			           dbo.Rules AS T59 ON T1.DownPayRule = T59.RuleId LEFT OUTER JOIN
			           dbo.Rules AS T67 ON T1.GrcPricingMethod = T67.RuleId  LEFT OUTER JOIN
			           dbo.Rules AS T68 ON T1.RpyPricingMethod = T68.RuleId 
			WHERE     (NOT EXISTS
			                          (SELECT     1 AS Expr1
			                            FROM          dbo.RMTFinanceTypes_Temp
			                            WHERE      (FinType = T1.FinType)));
						
		</createView>
		
	</changeSet>
	
	<changeSet id="28" author="Madhubabu">
		<createView replaceIfExists="true" viewName="FinSchFrqInsurance_TView">SELECT T1.Reference, T1.Module,T1.InsuranceType,T1.InsReference,T2.ClosingBalance, T1.InsSchDate, T1.InsuranceRate, T1.InsuranceFrq,T1.Amount,T1.Version, T1.LastMntBy, T1.LastMntOn,T1.RecordStatus,T1.RoleCode,T1.NextRoleCode, 
          T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId
     FROM FinSchFrqInsurance_Temp T1 inner join
          finscheduledetails T2 ON T2.SchDate = T1.InsSchDate AND 
                                   T2.Finreference = T1.Reference</createView>
	</changeSet>
	
	<changeSet id="29" author="Madhubabu">
		<createView replaceIfExists="true" viewName="FinSchFrqInsurance_View">
SELECT T1.Reference, T1.Module,T1.InsuranceType,T1.InsReference,T2.ClosingBalance, T1.InsSchDate, T1.InsuranceRate, T1.InsuranceFrq,T1.Amount,T1.Version, T1.LastMntBy, T1.LastMntOn,T1.RecordStatus,T1.RoleCode,T1.NextRoleCode, 
          T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId
     FROM FinSchFrqInsurance_Temp T1 inner join
          finscheduledetails T2 ON T2.SchDate = T1.InsSchDate AND 
                                   T2.Finreference = T1.Reference

UNION ALL

SELECT T1.Reference, T1.Module,T1.InsuranceType,T1.InsReference,T2.ClosingBalance, T1.InsSchDate, T1.InsuranceRate, T1.InsuranceFrq,T1.Amount,T1.Version, T1.LastMntBy, T1.LastMntOn,T1.RecordStatus,T1.RoleCode,T1.NextRoleCode, 
          T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId
     FROM FinSchFrqInsurance T1 inner join
          finscheduledetails T2 ON T2.SchDate = T1.InsSchDate AND 
                                   T2.Finreference = T1.Reference

WHERE     NOT EXISTS
                          (SELECT     1
                            FROM          FinSchFrqInsurance_Temp
                            WHERE      Reference = T1.Reference)</createView>
	</changeSet>
	
	<changeSet id="30" author="Irfan">
	 <dropTable tableName="FinAssetTypes"/>
	 <dropTable tableName="FinAssetTypes_Temp"/>
	
	</changeSet>
	
	<changeSet author="Irfan" id="31">
	 		<createTable tableName="FinAssetTypes">
    			<column name="AssetType" type="nvarchar(8)">
				<constraints primaryKey="true" nullable="false" />
				</column>
				<column name="SeqNo" type="int" >
				<constraints primaryKey="true" nullable="false" />
				</column>
				<column name="Reference" type="nvarchar(20)" >
				<constraints primaryKey="true" nullable="false" />
				</column>
				<column name="Version" type="int" defaultValue="0" >
				<constraints nullable="false" />
				</column>
				<column name="LastMntBy" type="bigint" />
				<column name="LastMntOn" type="datetime" />
				<column name="RecordStatus" type="nvarchar(50)" />
				<column name="RoleCode" type="nvarchar(100)" />
				<column name="NextRoleCode" type="nvarchar(200)" />
				<column name="TaskId" type="nvarchar(50)" />
				<column name="NextTaskId" type="nvarchar(200)" />
				<column name="RecordType" type="nvarchar(50)" />
				<column name="WorkflowId" type="bigint" />
		</createTable>
		</changeSet>
		<changeSet author="Irfan" id="32" >
   			 <createTable tableName="FinAssetTypes_Temp">
   				<column name="AssetType" type="nvarchar(8)">
				<constraints primaryKey="true" nullable="false" />
				</column>
				<column name="SeqNo" type="int" >
				<constraints primaryKey="true" nullable="false" />
				</column>
				<column name="Reference" type="nvarchar(20)" >
				<constraints primaryKey="true" nullable="false" />
				</column>
				<column name="Version" type="int" defaultValue="0" >
				<constraints nullable="false" />
				</column>
				<column name="LastMntBy" type="bigint" />
				<column name="LastMntOn" type="datetime" />
				<column name="RecordStatus" type="nvarchar(50)" />
				<column name="RoleCode" type="nvarchar(100)" />
				<column name="NextRoleCode" type="nvarchar(200)" />
				<column name="TaskId" type="nvarchar(50)" />
				<column name="NextTaskId" type="nvarchar(200)" />
				<column name="RecordType" type="nvarchar(50)" />
				<column name="WorkflowId" type="bigint" />
		</createTable>
		</changeSet>
		<changeSet author="Irfan" id="33" >
   			 <createView viewName="FinAssetTypes_TView" replaceIfExists="true">
   			 SELECT     T1.AssetType, T1.SeqNo, T1.Reference,
		  				 T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode,
		 				  T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId
						FROM   dbo.FinAssetTypes_Temp AS T1
   			 </createView>
		</changeSet>
		<changeSet id="34" author="Irfan">
			<sql>
				UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS);
				UPDATE SEQSECGROUPS SET SEQNO= (SELECT MAX(GRPID) FROM SECGROUPS);
				UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS); 
				UPDATE SEQSECROLEGROUPS SET SEQNO= (SELECT MAX(ROLEGRPID) FROM SECROLEGROUPS);
			</sql>
		</changeSet>
		<changeSet author="Irfan" id="35">
		 <comment>SecGroups</comment>
			<sql>
			INSERT INTO SecGroups SELECT (select (SeqNo+1) from SeqSecGroups), 'AssetTypeAssignment_VIEW', 'Allow to view AssetTypeAssignment', 0,1000,getdate(),'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroups WHERE 0=0
			INSERT INTO SecGroups SELECT (select (SeqNo+2) from SeqSecGroups), 'AssetTypeAssignment_NEW', 'Allow create new AssetTypeAssignment', 0,1000,getdate(),'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroups WHERE 0=0
			INSERT INTO SecGroups SELECT (select (SeqNo+3) from SeqSecGroups), 'AssetTypeAssignment_EDIT', 'Allow editing of AssetTypeAssignment', 0,1000,getdate(),'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroups WHERE 0=0
			INSERT INTO SecGroups SELECT (select (SeqNo+4) from SeqSecGroups), 'AssetTypeAssignment_DELETE', 'Allow deleting of AssetTypeAssignment', 0,1000,getdate(),'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroups WHERE 0=0
			INSERT INTO SecGroups SELECT (select (SeqNo+5) from SeqSecGroups), 'AssetTypeAssignment_MAKER', 'WF Maker for AssetTypeAssignment', 0,1000,getdate(),'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroups WHERE 0=0
			INSERT INTO SecGroups SELECT (select (SeqNo+6) from SeqSecGroups), 'AssetTypeAssignment_VERIFIER', 'WF Verifier for AssetTypeAssignment', 0,1000,getdate(),'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroups WHERE 0=0
			INSERT INTO SecGroups SELECT (select (SeqNo+7) from SeqSecGroups), 'AssetTypeAssignment_APPROVER', 'WF Approver for AssetTypeAssignment', 0,1000,getdate(),'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroups WHERE 0=0
			</sql>
		</changeSet>
		<changeSet author="Irfan" id="36">
		 <comment>SecRights</comment>
			<sql>
			INSERT INTO SecRights SELECT (select (SeqNo+1) from SeqSecRights),2,'button_AssetTypeAssignmentDialog_btnNew','AssetTypeAssignmentDialog',0,1000,getdate(),'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
			INSERT INTO SecRights SELECT (select (SeqNo+2) from SeqSecRights),2,'button_AssetTypeAssignmentDialog_btnEdit','AssetTypeAssignmentDialog',0,1000,getdate(),'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
			INSERT INTO SecRights SELECT (select (SeqNo+3) from SeqSecRights),2,'button_AssetTypeAssignmentDialog_btnDelete','AssetTypeAssignmentDialog',0,1000,getdate(),'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
			INSERT INTO SecRights SELECT (select (SeqNo+4) from SeqSecRights),2,'button_AssetTypeAssignmentDialog_btnSave','AssetTypeAssignmentDialog',0,1000,getdate(),'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
			INSERT INTO SecRights SELECT (select (SeqNo+5) from SeqSecRights),3,'AssetTypeAssignmentDialog_assetType','AssetTypeAssignmentDialog',0,1000,getdate(),'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
			</sql>
		</changeSet>
		<changeSet author="Irfan" id="37">
		 <comment>SecGroupRights</comment>
			<sql>
			INSERT INTO SecGroupRights SELECT (select (SeqNo+1) from SeqSecGroupRights ), (select GrpID from SecGroups where
			GrpCode ='AssetTypeAssignment_MAKER'), (select RightID from SecRights WHERE 
			RightName='button_AssetTypeAssignmentDialog_btnSave'),1,0,10000,GetDate(),'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights;

			INSERT INTO SecGroupRights SELECT (select (SeqNo+2) from SeqSecGroupRights ), (select GrpID from SecGroups where
			GrpCode ='AssetTypeAssignment_MAKER'), (select RightID from SecRights WHERE 
			RightName='button_AssetTypeAssignmentDialog_btnDelete'),1,0,10000,GetDate(),'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights;

			INSERT INTO SecGroupRights SELECT (select (SeqNo+3) from SeqSecGroupRights ), (select GrpID from SecGroups where
			GrpCode ='AssetTypeAssignment_MAKER'), (select RightID from SecRights WHERE 
			RightName='AssetTypeAssignmentDialog_assetType'),1,0,10000,GetDate(),'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights;
			</sql>
		</changeSet>
		<changeSet author="Irfan" id="38">
		 <comment>SecRoleGroups</comment>
			<sql>
			INSERT INTO SecRoleGroups SELECT (select (SeqNo+1) from SeqSecRoleGroups ), (select GrpID from SecGroups where
			GrpCode ='AssetTypeAssignment_MAKER' ), 	(select RoleID from SecRoles where RoleCD ='LCMUR_MAKER' ), 
			0,1000,GetDate(),'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRoleGroups  ;
			
			INSERT INTO SecRoleGroups SELECT (select (SeqNo+2) from SeqSecRoleGroups ), (select GrpID from SecGroups where
			GrpCode ='AssetTypeAssignment_MAKER' ), 	(select RoleID from SecRoles where RoleCD ='RTL_BRANCH_CSR' ), 
			0,1000,GetDate(),'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRoleGroups  ;
			</sql>
		</changeSet>	
		
		<changeSet author="Siva" id="39">
		<addColumn tableName="RMTFinanceTypes">
			<column name="FrequencyDays" type="varchar(100)" />
		</addColumn>
		</changeSet>	
		
		<changeSet author="Siva" id="40">
		<addColumn tableName="RMTFinanceTypes_Temp">
			<column name="FrequencyDays" type="varchar(100)" />
		</addColumn>
		</changeSet>	
		
		<changeSet author="Siva" id="41">
		<createView replaceIfExists="true" viewName="RMTFinanceTypes_ORGView">
					SELECT     T1.FinType, T1.FinCategory, T1.FinTypeDesc, T1.FinCcy, T1.FinDaysCalType, T1.FinAcType, T1.FinContingentAcType, T1.FinIsGenRef, T1.FinMaxAmount, 
			                      T1.FinMinAmount, T1.FinIsOpenNewFinAc, T1.FinDftStmtFrq, T1.FinIsAlwMD, T1.FinSchdMthd, T1.FInIsAlwGrace, T1.FinHistRetension, T1.FinOrgPrfUnchanged, 
			                      T1.EqualRepayment, T1.FinRateType, T1.FinBaseRate, T1.FinSplRate, T1.FinIntRate, T1.FInMinRate, T1.FinMaxRate, T1.FinDftIntFrq, T1.FinIsIntCpz, T1.FinCpzFrq, 
			                      T1.FinIsRvwAlw, T1.FinRvwFrq, T1.FinGrcRateType, T1.FinGrcBaseRate, T1.FinGrcSplRate, T1.FinGrcIntRate, T1.FInGrcMinRate, T1.FinGrcMaxRate, 
			                      T1.FinGrcDftIntFrq, T1.FinGrcIsIntCpz, T1.FinGrcCpzFrq, T1.FinGrcIsRvwAlw, T1.FinGrcRvwFrq, T1.FinMinTerm, T1.FinMaxTerm, T1.FinDftTerms, T1.FinRpyFrq, 
			                      T1.FInRepayMethod, T1.FinIsAlwPartialRpy, T1.FinIsAlwDifferment, T1.FinMaxDifferment, T1.FinIsAlwEarlyRpy, T1.FinIsAlwEarlySettle, T1.FinODRpyTries, 
			                      T1.FinEarlyPayRule, T1.FinEarlySettleRule, T1.FinDepositRestrictedTo, T1.FinAEBuyOrInception, T1.FinAESellOrMaturity, T1.FinIsActive, T1.Version, T1.LastMntBy, 
			                      T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId, T1.StepFinance, T1.SteppingMandatory, 
			                      T1.AlwManualSteps, T1.AlwdStepPolicies, T1.DftStepPolicy, T3.BRTypeDesc lovDescFinBaseRateName, T4.SRTypeDesc lovDescFinSplRateName, 
			                      T5.BRTypeDesc lovDescFinGrcBaseRateName, T6.SRTypeDesc lovDescFinGrcSplRateName, T1.FinIsDwPayRequired, T1.FinRvwRateApplFor, 
			                      T1.FinAlwRateChangeAnyDate, T1.FinGrcRvwRateApplFor, T1.FinIsIntCpzAtGrcEnd, T1.FinElgRuleCode, T1.LimitElgRuleCode, T1.FinSchCalCodeOnRvw, 
			                      T1.AlwPlanDeferment, T1.PlanDeferCount, T1.FinAssetType, T1.PftPayAcType, T1.FinIsOpenPftPayAcc, T1.FinIsAlwGrcRepay, T1.FinGrcSchdMthd, T1.FinGrcMargin, 
			                      T1.FinMargin, T1.FinScheduleOn, T1.FinGrcScheduleOn, T1.FinCommitmentReq, T1.FinCollateralReq, T1.FinDepreciationReq, T1.FinDepreciationFrq, 
			                      T1.FinBankContingentAcType, T1.FinProvisionAcType, T1.FinAlwIndRate, T1.FInIndBaseRate, T1.FinGrcAlwIndRate, T1.FinGrcIndBaseRate, 
			                      T7.BRTypeDesc lovDescFinIndBaseRateName, T8.BRTypeDesc lovDescFinGrcIndBaseRateName, T1.AllowRIAInvestment, T1.OverrideLimit, T1.LimitRequired, 
			                      T1.FinCommitmentOvrride, T1.FinCollateralOvrride, T1.FinRepayPftOnFrq, T1.FinPftUnChanged, T1.ApplyODPenalty, T1.ODIncGrcDays, T1.ODChargeType, 
			                      T1.ODGraceDays, T1.ODChargeCalOn, T1.ODChargeAmtOrPerc, T1.ODAllowWaiver, T1.ODMaxWaiverPerc, T1.FinDivision, 
			                      T9.DivisionCodeDesc LovDescFinDivisionName, T1.FinSuspAcType, T1.Product, T1.StartDate, T1.EndDate, T1.TakafulMandatory, T1.TakafulReq, 
			                      T1.RemFeeSchdMethod, T1.TakafulProvider, T10.TakafulName lovDescTakafulProviderName, T10.TakafulRate lovDescTakafulRate, T1.AllowDownpayPgm, 
			                      T2.FinTypeDesc lovDescPromoFinTypeDesc, T10.AddrLine1 lovDescTakafulProviderAddr, T1.ScheduleTakaful, T1.Remarks, 
			                      T12.PolicyDesc lovDescDftStepPolicyName, T1.AlwEarlyPayMethods, T1.PropertyTakafulReq, T1.TakafulPayType, T1.PropertyTakafulPayType, 
			                      T1.PropertyTakafulProvider, T1.PastduePftCalMthd, T1.PastduePftMargin, T11.TakafulName lovDescPptTakafulProvider, T1.AlwAdvanceRent, 
			                      T11.TakafulRate lovDescPptTakafulRate, T1.GrcAdvBaseRate, T1.GrcAdvMargin, T1.GrcAdvPftRate, T1.RpyAdvBaseRate, T1.RpyAdvMargin, T1.RpyAdvPftRate, 
			                      T13.BRTypeDesc GrcAdvBaseRateDesc, T14.BRTypeDesc RpyAdvBaseRateDesc, T1.AlwCreditIns, T1.RollOverFinance, T1.RollOverFrq, T1.DownPayRule, 
			                      T1.FinSuspTrigger, T1.FinSuspRemarks, T1.AlwMultiPartyDisb, T1.collateralType, T1.TDSApplicable, T15.RuleCode DownPayRuleDesc, T1.ApplyGrcPricing, 
			                      T1.GrcPricingMethod, T1.ApplyRpyPricing, T1.RpyPricingMethod, T1.RpyHierarchy, T16.RuleCode GrcPricingMethodDesc, 
			                      T17.RuleCode RpyPricingMethodDesc, T1.DroplineOD, T1.DroppingMethod, T1.RateChgAnyDay, T12.StepType DftStepPolicyType, T1.ManualSchedule,T18.ProductCategory,
			                      T1.AlwBPI , T1.BpiTreatment , T1.PftDueSchOn , T1.PlanEMIHAlw , T1.PlanEMIHMethod , T1.PlanEMIHMaxPerYear , T1.PlanEMIHMax , 
			 					  T1.PlanEMIHLockPeriod , T1.PlanEMICpz , T1.UnPlanEMIHLockPeriod , T1.UnPlanEMICpz , T1.ReAgeCpz, T1.FddLockPeriod, T1.AlwdRpyMethods, 
			 					  T1.MaxUnplannedEmi, T1.MaxReAgeHolidays, T1.CalRoundingMode, T1.FrequencyDays
			FROM         RMTFinanceTypes T1 LEFT OUTER JOIN
			                      RMTFinanceTypes T2 ON T1.Product = T2.FinType LEFT OUTER JOIN
			                      RMTBaseRateCodes T3 ON T1.FinBaseRate = T3.BRType LEFT OUTER JOIN
			                      RMTSplRateCodes T4 ON T1.FinSplRate = T4.SRType LEFT OUTER JOIN
			                      RMTBaseRateCodes T5 ON T1.FinGrcBaseRate = T5.BRType LEFT OUTER JOIN
			                      RMTSplRateCodes T6 ON T1.FinGrcSplRate = T6.SRType LEFT OUTER JOIN
			                      RMTBaseRateCodes T7 ON T1.FInIndBaseRate = T7.BRType LEFT OUTER JOIN
			                      RMTBaseRateCodes T8 ON T1.FinGrcIndBaseRate = T8.BRType INNER JOIN
			                      SMTDivisionDetail T9 ON T1.FinDivision = T9.DivisionCode LEFT OUTER JOIN
			                      TakafulProvider T10 ON T1.TakafulProvider = T10.TakafulCode LEFT OUTER JOIN
			                      TakafulProvider T11 ON T1.PropertyTakafulProvider = T11.TakafulCode LEFT OUTER JOIN
			                      StepPolicyHeader T12 ON T1.DftStepPolicy = T12.PolicyCode LEFT OUTER JOIN
			                      RMTBaseRateCodes T13 ON T1.GrcAdvBaseRate = T13.BRType LEFT OUTER JOIN
			                      RMTBaseRateCodes T14 ON T1.RpyAdvBaseRate = T14.BRType LEFT OUTER JOIN
			                      Rules T15 ON T1.DownPayRule = T15.RuleId LEFT OUTER JOIN
			                      Rules T16 ON T1.GrcPricingMethod = T16.RuleId LEFT OUTER JOIN
			                      Rules T17 ON T1.RpyPricingMethod = T17.RuleId LEFT OUTER JOIN
								  BMTProduct T18 ON T1.FinCategory = T18.ProductCode
		</createView>
		</changeSet>	
		
		<changeSet author="Siva" id="42">
		<createView replaceIfExists="true" viewName="RMTFinanceTypes_AView">
						SELECT     T1.FinType, T1.FinCategory, T1.FinTypeDesc, T1.FinCcy, T1.FinDaysCalType, T1.FinAcType, T1.FinContingentAcType,
				           T1.FinIsGenRef, T1.FinMaxAmount, T1.FinMinAmount, T1.FinIsOpenNewFinAc, T1.FinDftStmtFrq, T1.FinIsAlwMD,
						   T1.FinSchdMthd, T1.FInIsAlwGrace, T1.FinHistRetension, T1.FinOrgPrfUnchanged, T1.EqualRepayment, T1.FinRateType,
						   T1.FinBaseRate, T1.FinSplRate, T1.FinIntRate, T1.FInMinRate, T1.FinMaxRate, T1.FinDftIntFrq, T1.FinIsIntCpz, T1.FinCpzFrq, 
				           T1.FinIsRvwAlw, T1.FinRvwFrq, T1.FinGrcRateType, T1.FinGrcBaseRate, T1.FinGrcSplRate, T1.FinGrcIntRate,
						   T1.FInGrcMinRate, T1.FinGrcMaxRate,T1.FinGrcDftIntFrq, T1.FinGrcIsIntCpz, T1.FinGrcCpzFrq, T1.FinGrcIsRvwAlw, 
						   T1.FinGrcRvwFrq, T1.FinMinTerm, T1.FinMaxTerm, T1.FinDftTerms, T1.FinRpyFrq, T1.FInRepayMethod, T1.FinIsAlwPartialRpy,
						   T1.FinIsAlwDifferment, T1.FinMaxDifferment, T1.FinIsAlwEarlyRpy, T1.FinIsAlwEarlySettle, T1.FinODRpyTries, T1.FinEarlyPayRule,
						   T1.FinEarlySettleRule, T1.FinDepositRestrictedTo,T1.FinAEBuyOrInception, T1.FinAESellOrMaturity, T1.FinIsActive, T1.Version,
						   T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType,
						   T1.WorkflowId, T1.StepFinance, T1.SteppingMandatory, T1.AlwManualSteps, T1.AlwdStepPolicies, T1.DftStepPolicy, 
				           T2.CcyDesc AS lovDescFinCcyName, T3.IntRateBasisDesc AS lovDescFinDaysCalTypeName, 
						   T4.AcTypeDesc AS lovDescFinContingentAcTypeName,T5.AcTypeDesc AS lovDescFinAcTypeName,
						   T6.SchdMethodDesc AS lovDescFinSchdMthdName, T7.IntRateTypeDesc AS lovDescFinRateTypeName, 
				           T8.BRTypeDesc AS lovDescFinBaseRateName, T9.SRTypeDesc AS lovDescFinSplRateName,
						   T10.IntRateTypeDesc AS lovDescFinGrcRateTypeName,T11.BRTypeDesc AS lovDescFinGrcBaseRateName,
						   T12.SRTypeDesc AS lovDescFinGrcSplRateName,T30.RepayMethodDesc AS lovDescFInRepayMethodName, 
				           T1.FinIsDwPayRequired, T1.FinRvwRateApplFor,T1.FinAlwRateChangeAnyDate, T1.FinGrcRvwRateApplFor, T1.FinIsIntCpzAtGrcEnd,
						   T2.CcyEditField AS lovDescFinFormetter, T1.FinElgRuleCode, T1.LimitElgRuleCode,T1.FinSchCalCodeOnRvw, T1.AlwPlanDeferment,
						   T1.PlanDeferCount, T1.FinAssetType, T1.PftPayAcType, T1.FinIsOpenPftPayAcc,T31.AcTypeDesc AS lovDescPftPayAcTypeName, 
				           T1.FinIsAlwGrcRepay, T1.FinGrcSchdMthd, T1.FinGrcMargin, T1.FinMargin,T1.FinScheduleOn, T1.FinGrcScheduleOn, 
				           T1.FinCommitmentReq, T1.FinCollateralReq, T1.FinDepreciationReq, T1.FinDepreciationFrq, T1.FinBankContingentAcType, 
				           T1.FinProvisionAcType, T38.AcTypeDesc AS lovDescFinBankContAcTypeName, T39.AcTypeDesc AS lovDescFinProvisionAcTypeName,
						   T1.FinAlwIndRate,T1.FInIndBaseRate, T1.FinGrcAlwIndRate, T1.FinGrcIndBaseRate, T40.BRTypeDesc AS lovDescFinIndBaseRateName, 
				           T41.BRTypeDesc AS lovDescFinGrcIndBaseRateName, T1.AllowRIAInvestment, T1.OverrideLimit, T1.LimitRequired,
						   T1.FinCommitmentOvrride, T1.FinCollateralOvrride, 
				           T1.FinPftUnChanged,T1.ApplyODPenalty, T1.ODIncGrcDays,T1.ODChargeType, T1.ODGraceDays, T1.ODChargeCalOn, T1.ODChargeAmtOrPerc,
						   T1.ODAllowWaiver, T1.ODMaxWaiverPerc, T1.FinDivision,T48.DivisionCodeDesc AS LovDescFinDivisionName, T1.FinSuspAcType,
						   T49.AcTypeDesc AS lovDescFinSuspAcTypeName, T52.ProductDesc AS lovDescProductCodeDesc,T1.Product, T1.StartDate, T1.EndDate,
						   T1.TakafulMandatory, T1.TakafulReq, T1.RemFeeSchdMethod, T1.TakafulProvider,T53.TakafulName AS lovDescTakafulProviderName,
						   T53.TakafulRate AS lovDescTakafulRate, T1.AllowDownpayPgm, T54.FinTypeDesc AS lovDescPromoFinTypeDesc, 
				           T53.AddrLine1 + ' ' + T53.AddrLine2 AS lovDescTakafulProviderAddr, T1.ScheduleTakaful, T1.Remarks, 
						   T55.PolicyDesc AS lovDescDftStepPolicyName,T1.AlwEarlyPayMethods, T1.PropertyTakafulReq, T1.TakafulPayType,
						   T1.PropertyTakafulPayType, T1.PropertyTakafulProvider, T1.PastduePftCalMthd,T1.PastduePftMargin, 
						   T56.TakafulName AS lovDescPptTakafulProvider, T1.AlwAdvanceRent, T56.TakafulRate AS lovDescPptTakafulRate, T1.GrcAdvBaseRate, 
				           T57.BRTypeDesc AS GrcAdvBaseRateDesc, T1.GrcAdvMargin, T1.GrcAdvPftRate, T1.RpyAdvBaseRate, T58.BRTypeDesc AS RpyAdvBaseRateDesc, 
				           T1.RpyAdvMargin, T1.RpyAdvPftRate, T1.AlwCreditIns, T1.RollOverFinance, T1.RollOverFrq, T1.DownPayRule,
						   T59.RuleCode AS DownPayRuleDesc,T1.FinSuspTrigger, T1.FinSuspRemarks, T1.AlwMultiPartyDisb,T1.collateralType, T1.TDSApplicable,
						   T1.ManualSchedule,T1.ApplyGrcPricing ,T1.GrcPricingMethod, T1.ApplyRpyPricing, T1.RpyPricingMethod, T1.RpyHierarchy,
						   T67.RuleCode AS GrcPricingMethodDesc ,T68.RuleCode AS RpyPricingMethodDesc , T1.DroplineOD , T1.DroppingMethod ,
						   T1.RateChgAnyDay,T52.ProductCategory , T55.StepType as DftStepPolicyType,T1.FinRepayPftOnFrq,
						    T1.AlwBPI , T1.BpiTreatment , T1.PftDueSchOn , T1.PlanEMIHAlw , T1.PlanEMIHMethod , T1.PlanEMIHMaxPerYear , T1.PlanEMIHMax , 
							T1.PlanEMIHLockPeriod , T1.PlanEMICpz , T1.UnPlanEMIHLockPeriod , T1.UnPlanEMICpz , T1.ReAgeCpz, T1.FddLockPeriod, T1.AlwdRpyMethods, 
							T1.MaxUnplannedEmi, T1.MaxReAgeHolidays, T1.CalRoundingMode, T1.FrequencyDays
				FROM       dbo.RMTFinanceTypes AS T1 LEFT OUTER JOIN
				           dbo.RMTFinanceTypes AS T54 ON T1.Product = T54.FinType LEFT OUTER JOIN
				           dbo.BMTProduct AS T52 ON T1.FinCategory = T52.ProductCode LEFT OUTER JOIN
				           dbo.RMTCurrencies AS T2 ON T1.FinCcy = T2.CcyCode LEFT OUTER JOIN
				           dbo.BMTIntRateBasisCodes AS T3 ON T1.FinDaysCalType = T3.IntRateBasisCode LEFT OUTER JOIN
				           dbo.RMTAccountTypes AS T4 ON T1.FinContingentAcType = T4.AcType LEFT OUTER JOIN
				           dbo.RMTAccountTypes AS T38 ON T1.FinBankContingentAcType = T38.AcType LEFT OUTER JOIN
				           dbo.RMTAccountTypes AS T39 ON T1.FinProvisionAcType = T39.AcType LEFT OUTER JOIN
				           dbo.RMTAccountTypes AS T5 ON T1.FinAcType = T5.AcType LEFT OUTER JOIN
				           dbo.BMTSchdMethod AS T6 ON T1.FinSchdMthd = T6.SchdMethod LEFT OUTER JOIN
				           dbo.BMTInterestRateTypes AS T7 ON T1.FinRateType = T7.IntRateTypeCode LEFT OUTER JOIN
				           dbo.RMTBaseRateCodes AS T8 ON T1.FinBaseRate = T8.BRType LEFT OUTER JOIN
				           dbo.RMTSplRateCodes AS T9 ON T1.FinSplRate = T9.SRType LEFT OUTER JOIN
				           dbo.BMTInterestRateTypes AS T10 ON T1.FinGrcRateType = T10.IntRateTypeCode LEFT OUTER JOIN
				           dbo.RMTBaseRateCodes AS T11 ON T1.FinGrcBaseRate = T11.BRType LEFT OUTER JOIN
				           dbo.RMTSplRateCodes AS T12 ON T1.FinGrcSplRate = T12.SRType LEFT OUTER JOIN
				           dbo.BMTRepayMethod AS T30 ON T1.FInRepayMethod = T30.RepayMethod LEFT OUTER JOIN
				           dbo.RMTAccountTypes AS T31 ON T1.PftPayAcType = T31.AcType LEFT OUTER JOIN
				           dbo.RMTBaseRateCodes AS T40 ON T1.FInIndBaseRate = T40.BRType LEFT OUTER JOIN
				           dbo.RMTBaseRateCodes AS T41 ON T1.FinGrcIndBaseRate = T41.BRType LEFT OUTER JOIN
				           dbo.SMTDivisionDetail AS T48 ON T1.FinDivision = T48.DivisionCode LEFT OUTER JOIN
				           dbo.RMTAccountTypes AS T49 ON T1.FinSuspAcType = T49.AcType LEFT OUTER JOIN
				           dbo.TakafulProvider AS T53 ON T1.TakafulProvider = T53.TakafulCode LEFT OUTER JOIN
				           dbo.TakafulProvider AS T56 ON T1.PropertyTakafulProvider = T56.TakafulCode LEFT OUTER JOIN
				           dbo.StepPolicyHeader AS T55 ON T1.DftStepPolicy = T55.PolicyCode LEFT OUTER JOIN
				           dbo.RMTBaseRateCodes AS T57 ON T1.GrcAdvBaseRate = T57.BRType LEFT OUTER JOIN
				           dbo.RMTBaseRateCodes AS T58 ON T1.RpyAdvBaseRate = T58.BRType LEFT OUTER JOIN
				           dbo.Rules AS T59 ON T1.DownPayRule = T59.RuleId LEFT OUTER JOIN
				           dbo.Rules AS T67 ON T1.GrcPricingMethod = T67.RuleId  LEFT OUTER JOIN
				           dbo.Rules AS T68 ON T1.RpyPricingMethod = T68.RuleId
						
		</createView>
		</changeSet>	
		
		<changeSet author="Siva" id="43">
		<createView replaceIfExists="true" viewName="RMTFinanceTypes_View">
			SELECT     T1.FinType, T1.FinCategory, T1.FinTypeDesc, T1.FinCcy, T1.FinDaysCalType, T1.FinAcType, T1.FinContingentAcType,
			           T1.FinIsGenRef, T1.FinMaxAmount, T1.FinMinAmount, T1.FinIsOpenNewFinAc, T1.FinDftStmtFrq, T1.FinIsAlwMD,
					   T1.FinSchdMthd, T1.FInIsAlwGrace, T1.FinHistRetension, T1.FinOrgPrfUnchanged, T1.EqualRepayment, T1.FinRateType,
					   T1.FinBaseRate, T1.FinSplRate, T1.FinIntRate, T1.FInMinRate, T1.FinMaxRate, T1.FinDftIntFrq, T1.FinIsIntCpz, T1.FinCpzFrq, 
			           T1.FinIsRvwAlw, T1.FinRvwFrq, T1.FinGrcRateType, T1.FinGrcBaseRate, T1.FinGrcSplRate, T1.FinGrcIntRate,
					   T1.FInGrcMinRate, T1.FinGrcMaxRate,T1.FinGrcDftIntFrq, T1.FinGrcIsIntCpz, T1.FinGrcCpzFrq, T1.FinGrcIsRvwAlw, 
					   T1.FinGrcRvwFrq, T1.FinMinTerm, T1.FinMaxTerm, T1.FinDftTerms, T1.FinRpyFrq, T1.FInRepayMethod, T1.FinIsAlwPartialRpy,
					   T1.FinIsAlwDifferment, T1.FinMaxDifferment, T1.FinIsAlwEarlyRpy, T1.FinIsAlwEarlySettle, T1.FinODRpyTries, T1.FinEarlyPayRule,
					   T1.FinEarlySettleRule, T1.FinDepositRestrictedTo,T1.FinAEBuyOrInception, T1.FinAESellOrMaturity, T1.FinIsActive, T1.Version,
					   T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType,
					   T1.WorkflowId, T1.StepFinance, T1.SteppingMandatory, T1.AlwManualSteps, T1.AlwdStepPolicies, T1.DftStepPolicy, 
			           T2.CcyDesc AS lovDescFinCcyName, T3.IntRateBasisDesc AS lovDescFinDaysCalTypeName, 
					   T4.AcTypeDesc AS lovDescFinContingentAcTypeName,T5.AcTypeDesc AS lovDescFinAcTypeName,
					   T6.SchdMethodDesc AS lovDescFinSchdMthdName, T7.IntRateTypeDesc AS lovDescFinRateTypeName, 
			           T8.BRTypeDesc AS lovDescFinBaseRateName, T9.SRTypeDesc AS lovDescFinSplRateName,
					   T10.IntRateTypeDesc AS lovDescFinGrcRateTypeName,T11.BRTypeDesc AS lovDescFinGrcBaseRateName,
					   T12.SRTypeDesc AS lovDescFinGrcSplRateName,T30.RepayMethodDesc AS lovDescFInRepayMethodName, 
			           T1.FinIsDwPayRequired, T1.FinRvwRateApplFor,T1.FinAlwRateChangeAnyDate, T1.FinGrcRvwRateApplFor, T1.FinIsIntCpzAtGrcEnd,
					   T2.CcyEditField AS lovDescFinFormetter, T1.FinElgRuleCode, T1.LimitElgRuleCode,T1.FinSchCalCodeOnRvw, T1.AlwPlanDeferment,
					   T1.PlanDeferCount, T1.FinAssetType, T1.PftPayAcType, T1.FinIsOpenPftPayAcc,T31.AcTypeDesc AS lovDescPftPayAcTypeName, 
			           T1.FinIsAlwGrcRepay, T1.FinGrcSchdMthd, T1.FinGrcMargin, T1.FinMargin,T1.FinScheduleOn, T1.FinGrcScheduleOn, 
			           T1.FinCommitmentReq, T1.FinCollateralReq, T1.FinDepreciationReq, T1.FinDepreciationFrq, T1.FinBankContingentAcType, 
			           T1.FinProvisionAcType, T38.AcTypeDesc AS lovDescFinBankContAcTypeName, T39.AcTypeDesc AS lovDescFinProvisionAcTypeName,
					   T1.FinAlwIndRate,T1.FInIndBaseRate, T1.FinGrcAlwIndRate, T1.FinGrcIndBaseRate, T40.BRTypeDesc AS lovDescFinIndBaseRateName, 
			           T41.BRTypeDesc AS lovDescFinGrcIndBaseRateName, T1.AllowRIAInvestment, T1.OverrideLimit, T1.LimitRequired,
					   T1.FinCommitmentOvrride, T1.FinCollateralOvrride,
			           T1.FinPftUnChanged,T1.ApplyODPenalty, T1.ODIncGrcDays,T1.ODChargeType, T1.ODGraceDays, T1.ODChargeCalOn, T1.ODChargeAmtOrPerc,
					   T1.ODAllowWaiver, T1.ODMaxWaiverPerc, T1.FinDivision,T48.DivisionCodeDesc AS LovDescFinDivisionName, T1.FinSuspAcType,
					   T49.AcTypeDesc AS lovDescFinSuspAcTypeName, T52.ProductDesc AS lovDescProductCodeDesc,T1.Product, T1.StartDate, T1.EndDate,
					   T1.TakafulMandatory, T1.TakafulReq, T1.RemFeeSchdMethod, T1.TakafulProvider,T53.TakafulName AS lovDescTakafulProviderName,
					   T53.TakafulRate AS lovDescTakafulRate, T1.AllowDownpayPgm, T54.FinTypeDesc AS lovDescPromoFinTypeDesc, 
			           T53.AddrLine1 + ' ' + T53.AddrLine2 AS lovDescTakafulProviderAddr, T1.ScheduleTakaful, T1.Remarks, 
					   T55.PolicyDesc AS lovDescDftStepPolicyName,T1.AlwEarlyPayMethods, T1.PropertyTakafulReq, T1.TakafulPayType,
					   T1.PropertyTakafulPayType, T1.PropertyTakafulProvider, T1.PastduePftCalMthd,T1.PastduePftMargin, 
					   T56.TakafulName AS lovDescPptTakafulProvider, T1.AlwAdvanceRent, T56.TakafulRate AS lovDescPptTakafulRate, T1.GrcAdvBaseRate, 
			           T57.BRTypeDesc AS GrcAdvBaseRateDesc, T1.GrcAdvMargin, T1.GrcAdvPftRate, T1.RpyAdvBaseRate, T58.BRTypeDesc AS RpyAdvBaseRateDesc, 
			           T1.RpyAdvMargin, T1.RpyAdvPftRate, T1.AlwCreditIns, T1.RollOverFinance, T1.RollOverFrq, T1.DownPayRule,
					   T59.RuleCode AS DownPayRuleDesc,T1.FinSuspTrigger, T1.FinSuspRemarks, T1.AlwMultiPartyDisb,T1.collateralType, T1.TDSApplicable,
					   T1.ManualSchedule,T1.ApplyGrcPricing ,T1.GrcPricingMethod, T1.ApplyRpyPricing, T1.RpyPricingMethod, T1.RpyHierarchy,
					   T67.RuleCode AS GrcPricingMethodDesc ,T68.RuleCode AS RpyPricingMethodDesc , T1.DroplineOD , T1.DroppingMethod ,
					   T1.RateChgAnyDay,T52.ProductCategory , T55.StepType as DftStepPolicyType,T1.FinRepayPftOnFrq,
					    T1.AlwBPI , T1.BpiTreatment , T1.PftDueSchOn , T1.PlanEMIHAlw , T1.PlanEMIHMethod , T1.PlanEMIHMaxPerYear , T1.PlanEMIHMax , 
						T1.PlanEMIHLockPeriod , T1.PlanEMICpz , T1.UnPlanEMIHLockPeriod , T1.UnPlanEMICpz , T1.ReAgeCpz, T1.FddLockPeriod, T1.AlwdRpyMethods, 
						T1.MaxUnplannedEmi, T1.MaxReAgeHolidays, T1.CalRoundingMode, T1.FrequencyDays
			FROM       dbo.RMTFinanceTypes_Temp AS T1 LEFT OUTER JOIN
			           dbo.RMTFinanceTypes AS T54 ON T1.Product = T54.FinType LEFT OUTER JOIN
			           dbo.BMTProduct AS T52 ON T1.FinCategory = T52.ProductCode LEFT OUTER JOIN
			           dbo.RMTCurrencies AS T2 ON T1.FinCcy = T2.CcyCode LEFT OUTER JOIN
			           dbo.BMTIntRateBasisCodes AS T3 ON T1.FinDaysCalType = T3.IntRateBasisCode LEFT OUTER JOIN
			           dbo.RMTAccountTypes AS T4 ON T1.FinContingentAcType = T4.AcType LEFT OUTER JOIN
			           dbo.RMTAccountTypes AS T38 ON T1.FinBankContingentAcType = T38.AcType LEFT OUTER JOIN
			           dbo.RMTAccountTypes AS T39 ON T1.FinProvisionAcType = T39.AcType LEFT OUTER JOIN
			           dbo.RMTAccountTypes AS T5 ON T1.FinAcType = T5.AcType LEFT OUTER JOIN
			           dbo.BMTSchdMethod AS T6 ON T1.FinSchdMthd = T6.SchdMethod LEFT OUTER JOIN
			           dbo.BMTInterestRateTypes AS T7 ON T1.FinRateType = T7.IntRateTypeCode LEFT OUTER JOIN
			           dbo.RMTBaseRateCodes AS T8 ON T1.FinBaseRate = T8.BRType LEFT OUTER JOIN
			           dbo.RMTSplRateCodes AS T9 ON T1.FinSplRate = T9.SRType LEFT OUTER JOIN
			           dbo.BMTInterestRateTypes AS T10 ON T1.FinGrcRateType = T10.IntRateTypeCode LEFT OUTER JOIN
			           dbo.RMTBaseRateCodes AS T11 ON T1.FinGrcBaseRate = T11.BRType LEFT OUTER JOIN
			           dbo.RMTSplRateCodes AS T12 ON T1.FinGrcSplRate = T12.SRType LEFT OUTER JOIN
			           dbo.BMTRepayMethod AS T30 ON T1.FInRepayMethod = T30.RepayMethod LEFT OUTER JOIN
			           dbo.RMTAccountTypes AS T31 ON T1.PftPayAcType = T31.AcType LEFT OUTER JOIN
			           dbo.RMTBaseRateCodes AS T40 ON T1.FInIndBaseRate = T40.BRType LEFT OUTER JOIN
			           dbo.RMTBaseRateCodes AS T41 ON T1.FinGrcIndBaseRate = T41.BRType LEFT OUTER JOIN
			           dbo.SMTDivisionDetail AS T48 ON T1.FinDivision = T48.DivisionCode LEFT OUTER JOIN
			           dbo.RMTAccountTypes AS T49 ON T1.FinSuspAcType = T49.AcType LEFT OUTER JOIN
			           dbo.TakafulProvider AS T53 ON T1.TakafulProvider = T53.TakafulCode LEFT OUTER JOIN
			           dbo.TakafulProvider AS T56 ON T1.PropertyTakafulProvider = T56.TakafulCode LEFT OUTER JOIN
			           dbo.StepPolicyHeader AS T55 ON T1.DftStepPolicy = T55.PolicyCode LEFT OUTER JOIN
			           dbo.RMTBaseRateCodes AS T57 ON T1.GrcAdvBaseRate = T57.BRType LEFT OUTER JOIN
			           dbo.RMTBaseRateCodes AS T58 ON T1.RpyAdvBaseRate = T58.BRType LEFT OUTER JOIN
			           dbo.Rules AS T59 ON T1.DownPayRule = T59.RuleId LEFT OUTER JOIN
			           dbo.Rules AS T67 ON T1.GrcPricingMethod = T67.RuleId  LEFT OUTER JOIN
			           dbo.Rules AS T68 ON T1.RpyPricingMethod = T68.RuleId 
			UNION ALL
			SELECT     T1.FinType, T1.FinCategory, T1.FinTypeDesc, T1.FinCcy, T1.FinDaysCalType, T1.FinAcType, T1.FinContingentAcType,
			           T1.FinIsGenRef, T1.FinMaxAmount, T1.FinMinAmount, T1.FinIsOpenNewFinAc, T1.FinDftStmtFrq, T1.FinIsAlwMD,
					   T1.FinSchdMthd, T1.FInIsAlwGrace, T1.FinHistRetension, T1.FinOrgPrfUnchanged, T1.EqualRepayment, T1.FinRateType,
					   T1.FinBaseRate, T1.FinSplRate, T1.FinIntRate, T1.FInMinRate, T1.FinMaxRate, T1.FinDftIntFrq, T1.FinIsIntCpz, T1.FinCpzFrq, 
			           T1.FinIsRvwAlw, T1.FinRvwFrq, T1.FinGrcRateType, T1.FinGrcBaseRate, T1.FinGrcSplRate, T1.FinGrcIntRate,
					   T1.FInGrcMinRate, T1.FinGrcMaxRate,T1.FinGrcDftIntFrq, T1.FinGrcIsIntCpz, T1.FinGrcCpzFrq, T1.FinGrcIsRvwAlw, 
					   T1.FinGrcRvwFrq, T1.FinMinTerm, T1.FinMaxTerm, T1.FinDftTerms, T1.FinRpyFrq, T1.FInRepayMethod, T1.FinIsAlwPartialRpy,
					   T1.FinIsAlwDifferment, T1.FinMaxDifferment, T1.FinIsAlwEarlyRpy, T1.FinIsAlwEarlySettle, T1.FinODRpyTries, T1.FinEarlyPayRule,
					   T1.FinEarlySettleRule, T1.FinDepositRestrictedTo,T1.FinAEBuyOrInception, T1.FinAESellOrMaturity, T1.FinIsActive, T1.Version,
					   T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType,
					   T1.WorkflowId, T1.StepFinance, T1.SteppingMandatory, T1.AlwManualSteps, T1.AlwdStepPolicies, T1.DftStepPolicy, 
			           T2.CcyDesc AS lovDescFinCcyName, T3.IntRateBasisDesc AS lovDescFinDaysCalTypeName, 
					   T4.AcTypeDesc AS lovDescFinContingentAcTypeName,T5.AcTypeDesc AS lovDescFinAcTypeName,
					   T6.SchdMethodDesc AS lovDescFinSchdMthdName, T7.IntRateTypeDesc AS lovDescFinRateTypeName, 
			           T8.BRTypeDesc AS lovDescFinBaseRateName, T9.SRTypeDesc AS lovDescFinSplRateName,
					   T10.IntRateTypeDesc AS lovDescFinGrcRateTypeName,T11.BRTypeDesc AS lovDescFinGrcBaseRateName,
					   T12.SRTypeDesc AS lovDescFinGrcSplRateName,T30.RepayMethodDesc AS lovDescFInRepayMethodName, 
			           T1.FinIsDwPayRequired, T1.FinRvwRateApplFor,T1.FinAlwRateChangeAnyDate, T1.FinGrcRvwRateApplFor, T1.FinIsIntCpzAtGrcEnd,
					   T2.CcyEditField AS lovDescFinFormetter, T1.FinElgRuleCode, T1.LimitElgRuleCode,T1.FinSchCalCodeOnRvw, T1.AlwPlanDeferment,
					   T1.PlanDeferCount, T1.FinAssetType, T1.PftPayAcType, T1.FinIsOpenPftPayAcc,T31.AcTypeDesc AS lovDescPftPayAcTypeName, 
			           T1.FinIsAlwGrcRepay, T1.FinGrcSchdMthd, T1.FinGrcMargin, T1.FinMargin,T1.FinScheduleOn, T1.FinGrcScheduleOn, 
			           T1.FinCommitmentReq, T1.FinCollateralReq, T1.FinDepreciationReq, T1.FinDepreciationFrq, T1.FinBankContingentAcType, 
			           T1.FinProvisionAcType, T38.AcTypeDesc AS lovDescFinBankContAcTypeName, T39.AcTypeDesc AS lovDescFinProvisionAcTypeName,
					   T1.FinAlwIndRate,T1.FInIndBaseRate, T1.FinGrcAlwIndRate, T1.FinGrcIndBaseRate, T40.BRTypeDesc AS lovDescFinIndBaseRateName, 
			           T41.BRTypeDesc AS lovDescFinGrcIndBaseRateName, T1.AllowRIAInvestment, T1.OverrideLimit, T1.LimitRequired,
					   T1.FinCommitmentOvrride, T1.FinCollateralOvrride,
			           T1.FinPftUnChanged,T1.ApplyODPenalty, T1.ODIncGrcDays,T1.ODChargeType, T1.ODGraceDays, T1.ODChargeCalOn, T1.ODChargeAmtOrPerc,
					   T1.ODAllowWaiver, T1.ODMaxWaiverPerc, T1.FinDivision,T48.DivisionCodeDesc AS LovDescFinDivisionName, T1.FinSuspAcType,
					   T49.AcTypeDesc AS lovDescFinSuspAcTypeName, T52.ProductDesc AS lovDescProductCodeDesc,T1.Product, T1.StartDate, T1.EndDate,
					   T1.TakafulMandatory, T1.TakafulReq, T1.RemFeeSchdMethod, T1.TakafulProvider,T53.TakafulName AS lovDescTakafulProviderName,
					   T53.TakafulRate AS lovDescTakafulRate, T1.AllowDownpayPgm, T54.FinTypeDesc AS lovDescPromoFinTypeDesc, 
			           T53.AddrLine1 + ' ' + T53.AddrLine2 AS lovDescTakafulProviderAddr, T1.ScheduleTakaful, T1.Remarks, 
					   T55.PolicyDesc AS lovDescDftStepPolicyName,T1.AlwEarlyPayMethods, T1.PropertyTakafulReq, T1.TakafulPayType,
					   T1.PropertyTakafulPayType, T1.PropertyTakafulProvider, T1.PastduePftCalMthd,T1.PastduePftMargin, 
					   T56.TakafulName AS lovDescPptTakafulProvider, T1.AlwAdvanceRent, T56.TakafulRate AS lovDescPptTakafulRate, T1.GrcAdvBaseRate, 
			           T57.BRTypeDesc AS GrcAdvBaseRateDesc, T1.GrcAdvMargin, T1.GrcAdvPftRate, T1.RpyAdvBaseRate, T58.BRTypeDesc AS RpyAdvBaseRateDesc, 
			           T1.RpyAdvMargin, T1.RpyAdvPftRate, T1.AlwCreditIns, T1.RollOverFinance, T1.RollOverFrq, T1.DownPayRule,
					   T59.RuleCode AS DownPayRuleDesc,T1.FinSuspTrigger, T1.FinSuspRemarks, T1.AlwMultiPartyDisb,T1.collateralType, T1.TDSApplicable,
					   T1.ManualSchedule,T1.ApplyGrcPricing ,T1.GrcPricingMethod, T1.ApplyRpyPricing, T1.RpyPricingMethod, T1.RpyHierarchy,
					   T67.RuleCode AS GrcPricingMethodDesc ,T68.RuleCode AS RpyPricingMethodDesc , T1.DroplineOD , T1.DroppingMethod ,
					   T1.RateChgAnyDay,T52.ProductCategory , T55.StepType as DftStepPolicyType,T1.FinRepayPftOnFrq,
					    T1.AlwBPI , T1.BpiTreatment , T1.PftDueSchOn , T1.PlanEMIHAlw , T1.PlanEMIHMethod , T1.PlanEMIHMaxPerYear , T1.PlanEMIHMax , 
						T1.PlanEMIHLockPeriod , T1.PlanEMICpz , T1.UnPlanEMIHLockPeriod , T1.UnPlanEMICpz , T1.ReAgeCpz, T1.FddLockPeriod, T1.AlwdRpyMethods, 
						T1.MaxUnplannedEmi, T1.MaxReAgeHolidays, T1.CalRoundingMode, T1.FrequencyDays
			FROM       dbo.RMTFinanceTypes AS T1 LEFT OUTER JOIN
			           dbo.RMTFinanceTypes AS T54 ON T1.Product = T54.FinType LEFT OUTER JOIN
			           dbo.BMTProduct AS T52 ON T1.FinCategory = T52.ProductCode LEFT OUTER JOIN
			           dbo.RMTCurrencies AS T2 ON T1.FinCcy = T2.CcyCode LEFT OUTER JOIN
			           dbo.BMTIntRateBasisCodes AS T3 ON T1.FinDaysCalType = T3.IntRateBasisCode LEFT OUTER JOIN
			           dbo.RMTAccountTypes AS T4 ON T1.FinContingentAcType = T4.AcType LEFT OUTER JOIN
			           dbo.RMTAccountTypes AS T38 ON T1.FinBankContingentAcType = T38.AcType LEFT OUTER JOIN
			           dbo.RMTAccountTypes AS T39 ON T1.FinProvisionAcType = T39.AcType LEFT OUTER JOIN
			           dbo.RMTAccountTypes AS T5 ON T1.FinAcType = T5.AcType LEFT OUTER JOIN
			           dbo.BMTSchdMethod AS T6 ON T1.FinSchdMthd = T6.SchdMethod LEFT OUTER JOIN
			           dbo.BMTInterestRateTypes AS T7 ON T1.FinRateType = T7.IntRateTypeCode LEFT OUTER JOIN
			           dbo.RMTBaseRateCodes AS T8 ON T1.FinBaseRate = T8.BRType LEFT OUTER JOIN
			           dbo.RMTSplRateCodes AS T9 ON T1.FinSplRate = T9.SRType LEFT OUTER JOIN
			           dbo.BMTInterestRateTypes AS T10 ON T1.FinGrcRateType = T10.IntRateTypeCode LEFT OUTER JOIN
			           dbo.RMTBaseRateCodes AS T11 ON T1.FinGrcBaseRate = T11.BRType LEFT OUTER JOIN
			           dbo.RMTSplRateCodes AS T12 ON T1.FinGrcSplRate = T12.SRType LEFT OUTER JOIN
			           dbo.BMTRepayMethod AS T30 ON T1.FInRepayMethod = T30.RepayMethod LEFT OUTER JOIN
			           dbo.RMTAccountTypes AS T31 ON T1.PftPayAcType = T31.AcType LEFT OUTER JOIN
			           dbo.RMTBaseRateCodes AS T40 ON T1.FInIndBaseRate = T40.BRType LEFT OUTER JOIN
			           dbo.RMTBaseRateCodes AS T41 ON T1.FinGrcIndBaseRate = T41.BRType LEFT OUTER JOIN
			           dbo.SMTDivisionDetail AS T48 ON T1.FinDivision = T48.DivisionCode LEFT OUTER JOIN
			           dbo.RMTAccountTypes AS T49 ON T1.FinSuspAcType = T49.AcType LEFT OUTER JOIN
			           dbo.TakafulProvider AS T53 ON T1.TakafulProvider = T53.TakafulCode LEFT OUTER JOIN
			           dbo.TakafulProvider AS T56 ON T1.PropertyTakafulProvider = T56.TakafulCode LEFT OUTER JOIN
			           dbo.StepPolicyHeader AS T55 ON T1.DftStepPolicy = T55.PolicyCode LEFT OUTER JOIN
			           dbo.RMTBaseRateCodes AS T57 ON T1.GrcAdvBaseRate = T57.BRType LEFT OUTER JOIN
			           dbo.RMTBaseRateCodes AS T58 ON T1.RpyAdvBaseRate = T58.BRType LEFT OUTER JOIN
			           dbo.Rules AS T59 ON T1.DownPayRule = T59.RuleId LEFT OUTER JOIN
			           dbo.Rules AS T67 ON T1.GrcPricingMethod = T67.RuleId  LEFT OUTER JOIN
			           dbo.Rules AS T68 ON T1.RpyPricingMethod = T68.RuleId 
			WHERE     (NOT EXISTS
			                          (SELECT     1 AS Expr1
			                            FROM          dbo.RMTFinanceTypes_Temp
			                            WHERE      (FinType = T1.FinType)));
						
		</createView>
		</changeSet>
		
		<changeSet author="Siva" id="44">	
		<sql>
			UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS);
			UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS); 
			
			
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'FinanceMainDialog_AlwBpiTreatment','FinanceMainDialog',0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0; 
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'FinanceMainDialog_DftBpiTreatment','FinanceMainDialog',0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0; 
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'FinanceMainDialog_AlwPlannedEmiHoliday','FinanceMainDialog',0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0; 
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'FinanceMainDialog_PlanEmiMethod','FinanceMainDialog',0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0; 
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'FinanceMainDialog_MaxPlanEmiPerAnnum','FinanceMainDialog',0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0; 
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'FinanceMainDialog_MaxPlanEmi','FinanceMainDialog',0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0; 
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'FinanceMainDialog_PlanEmiHLockPeriod','FinanceMainDialog',0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0; 
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'FinanceMainDialog_CpzAtPlanEmi','FinanceMainDialog',0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0; 
			
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='RTL_BRANCH_CSR') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_AlwBpiTreatment'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='RTL_BRANCH_CSR') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_DftBpiTreatment'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='RTL_BRANCH_CSR') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_AlwPlannedEmiHoliday'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='RTL_BRANCH_CSR') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_PlanEmiMethod'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='RTL_BRANCH_CSR') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_MaxPlanEmiPerAnnum'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='RTL_BRANCH_CSR') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_MaxPlanEmi'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='RTL_BRANCH_CSR') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_PlanEmiHLockPeriod'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='RTL_BRANCH_CSR') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_CpzAtPlanEmi'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='LCMUR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_AlwBpiTreatment'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='LCMUR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_DftBpiTreatment'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='LCMUR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_AlwPlannedEmiHoliday'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='LCMUR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_PlanEmiMethod'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='LCMUR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_MaxPlanEmiPerAnnum'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='LCMUR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_MaxPlanEmi'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='LCMUR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_PlanEmiHLockPeriod'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='LCMUR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_CpzAtPlanEmi'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			
			
			UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS);
			UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);
		</sql> 
		</changeSet>	
		
		<changeSet author="Siva" id="45">
		<addColumn tableName="FinanceMain">
			<column name="AlwBPI" type="boolean" />
			<column name="BpiTreatment" type="char(1)" />
			<column name="PlanEMIHAlw" type="boolean" />
			<column name="PlanEMIHMethod" type="char(1)" />
			<column name="PlanEMIHMaxPerYear" type="int" />
			<column name="PlanEMIHMax" type="int" />
			<column name="PlanEMIHLockPeriod" type="int" />
			<column name="PlanEMICpz" type="boolean" />
			<column name="CalRoundingMode" type="char(10)" />
			<column name="AlwMultiDisb" type="boolean" />
		</addColumn>
		</changeSet>	
		
		<changeSet author="Siva" id="46">
		<addColumn tableName="FinanceMain_Temp">
			<column name="AlwBPI" type="boolean" />
			<column name="BpiTreatment" type="char(1)" />
			<column name="PlanEMIHAlw" type="boolean" />
			<column name="PlanEMIHMethod" type="char(1)" />
			<column name="PlanEMIHMaxPerYear" type="int" />
			<column name="PlanEMIHMax" type="int" />
			<column name="PlanEMIHLockPeriod" type="int" />
			<column name="PlanEMICpz" type="boolean" />
			<column name="CalRoundingMode" type="char(10)" />
			<column name="AlwMultiDisb" type="boolean" />
		</addColumn>
		</changeSet>	
		
		<changeSet author="Siva" id="47">
		<addColumn tableName="RejectFinanceMain">
			<column name="AlwBPI" type="boolean" />
			<column name="BpiTreatment" type="char(1)" />
			<column name="PlanEMIHAlw" type="boolean" />
			<column name="PlanEMIHMethod" type="char(1)" />
			<column name="PlanEMIHMaxPerYear" type="int" />
			<column name="PlanEMIHMax" type="int" />
			<column name="PlanEMIHLockPeriod" type="int" />
			<column name="PlanEMICpz" type="boolean" />
			<column name="CalRoundingMode" type="char(10)" />
			<column name="AlwMultiDisb" type="boolean" />
		</addColumn>
		</changeSet>	
		
		<changeSet author="Siva" id="48">
		<addColumn tableName="WIFFinanceMain">
			<column name="AlwBPI" type="boolean" />
			<column name="BpiTreatment" type="char(1)" />
			<column name="PlanEMIHAlw" type="boolean" />
			<column name="PlanEMIHMethod" type="char(1)" />
			<column name="PlanEMIHMaxPerYear" type="int" />
			<column name="PlanEMIHMax" type="int" />
			<column name="PlanEMIHLockPeriod" type="int" />
			<column name="PlanEMICpz" type="boolean" />
			<column name="CalRoundingMode" type="char(10)" />
			<column name="AlwMultiDisb" type="boolean" />
		</addColumn>
		</changeSet>
		
		<changeSet author="Siva" id="49">
		<addColumn tableName="WIFFinanceMain_Temp">
			<column name="AlwBPI" type="boolean" />
			<column name="BpiTreatment" type="char(1)" />
			<column name="PlanEMIHAlw" type="boolean" />
			<column name="PlanEMIHMethod" type="char(1)" />
			<column name="PlanEMIHMaxPerYear" type="int" />
			<column name="PlanEMIHMax" type="int" />
			<column name="PlanEMIHLockPeriod" type="int" />
			<column name="PlanEMICpz" type="boolean" />
			<column name="CalRoundingMode" type="char(10)" />
			<column name="AlwMultiDisb" type="boolean" />
		</addColumn>
		</changeSet>		
		
		<changeSet author="Siva" id="50">
		<addColumn tableName="FinanceMain_PA">
			<column name="AlwBPI" type="boolean" />
			<column name="BpiTreatment" type="char(1)" />
			<column name="PlanEMIHAlw" type="boolean" />
			<column name="PlanEMIHMethod" type="char(1)" />
			<column name="PlanEMIHMaxPerYear" type="int" />
			<column name="PlanEMIHMax" type="int" />
			<column name="PlanEMIHLockPeriod" type="int" />
			<column name="PlanEMICpz" type="boolean" />
			<column name="CalRoundingMode" type="char(10)" />
			<column name="AlwMultiDisb" type="boolean" />
		</addColumn>
		</changeSet>	
		
		<changeSet author="Siva" id="51">
		<createView replaceIfExists="true" viewName="FinanceMain_TView">
		
		SELECT     T1.FinReference, T1.InvestmentRef, T1.NumberOfTerms, T1.GrcPeriodEndDate, T1.AllowGrcPeriod, T1.GraceBaseRate, T1.GraceSpecialRate, T1.GrcPftRate, 
                      T1.GrcPftFrq, T1.NextGrcPftDate, T1.AllowGrcPftRvw, T1.GrcPftRvwFrq, T1.NextGrcPftRvwDate, T1.AllowGrcCpz, T1.GrcCpzFrq, T1.NextGrcCpzDate, 
                      T1.RepayBaseRate, T1.RepaySpecialRate, T1.RepayProfitRate, T1.RepayFrq, T1.NextRepayDate, T1.RepayPftFrq, T1.NextRepayPftDate, T1.AllowRepayRvw, 
                      T1.RepayRvwFrq, T1.NextRepayRvwDate, T1.AllowRepayCpz, T1.RepayCpzFrq, T1.NextRepayCpzDate, T1.MaturityDate, T1.CpzAtGraceEnd, T1.DownPayment, 
                      T1.GraceFlatAmount, T1.ReqRepayAmount, T1.TotalProfit, T1.TotalCpz, T1.TotalGrossPft, T1.TotalGrossGrcPft, T1.TotalGracePft, T1.TotalGraceCpz, T1.GrcRateBasis, 
                      T1.RepayRateBasis, T1.FinType, T1.FinRemarks, T1.FinCcy, T1.ScheduleMethod, T1.ProfitDaysBasis, T1.ReqMaturity, T1.CalTerms, T1.CalMaturity, T1.FirstRepay, 
                      T1.LastRepay, T1.FinStartDate, T1.FinAmount, T1.FinAmount + T1.FeeChargeAmt - T1.DownPayment lovDescFinancingAmount, T1.FinRepaymentAmount, T1.CustID, 
                      T1.Defferments, T1.PlanDeferCount, T1.FinBranch, T1.FinSourceID, T1.AllowedDefRpyChange, T1.AvailedDefRpyChange, T1.AllowedDefFrqChange, 
                      T1.AvailedDefFrqChange, T1.RecalType, T1.FinAssetValue, T1.DisbAccountId, T1.RepayAccountId, T1.FinIsActive, T1.LimitValid, T1.OverrideLimit, T1.SecurityDeposit, 
                      T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId, 
                      T2.CcyDesc lovDescFinCcyName, T3.SchdMethodDesc lovDescScheduleMethodName, T4.IntRateBasisDesc lovDescProfitDaysBasisName, 
                      T5.BRTypeDesc lovDescGraceBaseRateName, T6.SRTypeDesc lovDescGraceSpecialRateName, T7.FinTypeDesc lovDescFinTypeName, 
                      T8.BRTypeDesc lovDescRepayBaseRateName, T9.SRTypeDesc lovDescRepaySpecialRateName, T2.CcyEditField lovDescFinFormatter, 
                      T7.FinIsAlwMD lovDescFinIsAlwMD, T7.FinMaxAmount lovDescFinMaxAmt, T7.FinMinAmount lovDescFinMinAmount, T1.MinDownpayPerc, 
                      T7.FinIsAlwDifferment lovDescFinAlwDeferment, T7.FinIsDwPayRequired lovDescDwnPayReq, T7.FinMaxDifferment lovDescFinMaxDifferment, 
                      T10.CustCIF lovDescCustCIF, T10.CustFName lovDescCustFName, T10.CustLName lovDescCustLName, T12.BranchDesc lovDescFinBranchName, T1.LastRepayDate, 
                      T1.LastRepayPftDate, T1.LastRepayRvwDate, T1.LastRepayCpzDate,  
                      T1.AllowGrcRepay, T1.GrcSchdMthd, T1.GrcMargin, T1.RepayMargin, T1.FinCurrAssetValue, T1.FinCommitmentRef, T1.FinLimitRef,
                      T1.DepreciationFrq, T1.FinContractDate, T13.SaluationDesc lovDescSalutationName, T10.CustShrtName lovDescCustShrtName, 
                      T10.CustCoreBank lovDescCustCoreBank, T1.NextDepDate, T1.LastDepDate, T1.FinAccount, T1.FinCustPftAccount, T1.AlwIndRate, T1.IndBaseRate, T1.GrcAlwIndRate, 
                      T1.GrcIndBaseRate, T15.BRTypeDesc lovDescIndBaseRateName, T16.BRTypeDesc lovDescGrcIndBaseRateName, T17.AcrTillLBD lovDescAccruedTillLBD, 
                      T7.FinRvwRateApplFor, T7.FinGrcRvwRateApplFor, T1.TotalRepayAmt, T7.FinCategory lovDescProductCodeName, T10.CustCtgCode lovDescCustCtgCode, 
                      T1.ClosingStatus, T1.FinApprovedDate, T1.FeeChargeAmt, T1.Blacklisted, T1.FinRepayPftOnFrq, T1.AnualizedPercRate, T1.EffectiveRateOfReturn, 
                      T19.CmtTitle lovDescCommitmentRefName, T31.LimitDesc lovDescLimitRefName, T1.MigratedFinance, T1.ScheduleMaintained, 
                      T1.ScheduleRegenerated, T1.FinPurpose, T20.ValueDesc lovDescFinPurposeName, T1.FinStatus, T1.FinStsReason, T1.InitiateUser, T1.BankName, T1.iban, 
                      T1.AccountType, T1.DdaReferenceNo, T7.FinScheduleOn LovDescFinScheduleOn, T1.CustDSR, T1.Authorization1, T1.Authorization2, 
                      T21.AuthName lovDescAuthorization1Name, T22.AuthName lovDescAuthorization2Name, T1.JointAccount, T1.JointCustId, 
                      T23.CustShrtName lovDescJointCustShrtName, T23.CustCIF lovDescJointCustCIF, '0' AvailCommitAmount, T1.DownPayBank, T1.DownPaySupl, T1.DownPayAccount, 
                      T1.SecurityCollateral, T1.CustomerAcceptance, T1.Approved, T1.CbbApprovalRequired, T1.CbbApproved, T1.Discrepancy, T1.LimitApproved, T1.GraceTerms, 
                      T7.FinDivision lovDescFinDivision, T1.RcdMaintainSts, T1.FinRepayMethod, T1.GrcProfitDaysBasis, T1.StepFinance,T1.StepType, T1.StepPolicy, T1.AlwManualSteps, 
                      T1.NoOfSteps, T1.TakafulFrq, T1.TakafulRate, T1.WaiverReason, T1.TakafulRef, T1.TakafulRequired, 
                      T1.LinkedFinRef, T1.NextUserId, T1.Priority, T24.PolicyDesc LovDescStepPolicyName, T1.GrcMinRate, T1.GrcMaxRate, T1.RpyMinRate, T1.RpyMaxRate, 
                      T2.CcyEditField ReportFormat, T1.DeviationApproval, T1.PptTakafulRequired, T1.PptTakafulFrq, T1.PptWaiverReason, T1.PptTakafulRate, T1.PptTakafulRef, 
                      T1.ManualSchedule, T1.TakeOverFinance, T1.GrcAdvBaseRate, T1.GrcAdvMargin, T1.GrcAdvPftRate, T1.RpyAdvBaseRate, T1.RpyAdvMargin, T1.RpyAdvPftRate, 
                      T25.BRTypeDesc GrcAdvBaseRateDesc, T26.BRTypeDesc RpyAdvBaseRateDesc, T1.SupplementRent, T1.IncreasedCost, T1.CreditInsAmt, T1.RolloverFrq, 
                      T1.NextRolloverDate, T27.CustStsDescription, T1.ShariaStatus, T1.InitiateDate, T1.FINPREAPPROVEDREF, T1.MMAId, T1.AccountsOfficer, 
                      T1.feeAccountId, T1.FinCancelAc,T29.AgreeName, T28.GenDeptDesc lovDescAccountsOfficer,T1.DSACode,T30.ROfficerDesc DSACodeDesc,
					  T29.MMAReference as LovDescMMAReference,T1.TDSApplicable,T1.TakafulStatus, T32.ProductCategory,T1.MandateID,T1.DroplineFrq,T1.FirstDroplineDate,
					  T1.PftServicingODLimit,T1.InsuranceAmt,T1.DeductInsDisb,T1.AlwBPI , T1.BpiTreatment , T1.PlanEMIHAlw , T1.PlanEMIHMethod , 
					  T1.PlanEMIHMaxPerYear , T1.PlanEMIHMax , T1.PlanEMIHLockPeriod , T1.PlanEMICpz , T1.CalRoundingMode , T1.AlwMultiDisb
			FROM         FinanceMain_Temp T1 INNER JOIN
                      RMTCurrencies T2 ON T1.FinCcy = T2.CcyCode LEFT OUTER JOIN --not req
                      BMTSchdMethod T3 ON T1.ScheduleMethod = T3.SchdMethod LEFT OUTER JOIN --verify with combobox reqrmnt
                      BMTIntRateBasisCodes T4 ON T1.ProfitDaysBasis = T4.IntRateBasisCode LEFT OUTER JOIN
                      RMTBaseRateCodes T5 ON T1.GraceBaseRate = T5.BRType LEFT OUTER JOIN --remove join and use single query
                      RMTSplRateCodes T6 ON T1.GraceSpecialRate = T6.SRType INNER JOIN
                      RMTFinanceTypes T7 ON T1.FinType = T7.FinType LEFT OUTER JOIN
                      RMTBaseRateCodes T8 ON T1.RepayBaseRate = T8.BRType LEFT OUTER JOIN --remove join and use single query
                      RMTSplRateCodes T9 ON T1.RepaySpecialRate = T9.SRType LEFT OUTER JOIN
                      Customers T10 ON T1.CustID = T10.CustID LEFT OUTER JOIN
                      BMTSalutations T13 ON T10.CustSalutationCode = T13.SalutationCode LEFT OUTER JOIN --not using it anywhere.remove it
                      RMTBranches T12 ON T1.FinBranch = T12.BranchCode LEFT OUTER JOIN
                      RMTBaseRateCodes T15 ON T1.IndBaseRate = T15.BRType LEFT OUTER JOIN --remove join and use single query
                      RMTBaseRateCodes T16 ON T1.GrcIndBaseRate = T16.BRType LEFT OUTER JOIN --remove join and use single query
                      FINPFTDETAILS T17 ON T17.FINREFERENCE = T1.FINREFERENCE LEFT OUTER JOIN --not req at org
                      Commitments T19 ON T1.FinCommitmentRef = T19.CmtReference AND T10.CustID = T19.custID LEFT OUTER JOIN --not using
                      RMTLOVFielddetail T20 ON T20.FieldCode = 'FINASSTYP' AND T1.FinPurpose = T20.FieldCodeValue LEFT OUTER JOIN
                      AMTAuthorization T21 ON T1.Authorization1 = T21.AuthUserId LEFT OUTER JOIN
                      AMTAuthorization T22 ON T1.Authorization2 = T22.AuthUserId LEFT OUTER JOIN
                      Customers T23 ON T1.JointCustId = T23.CustID LEFT OUTER JOIN --not using
                      StepPolicyHeader T24 ON T1.StepPolicy = T24.PolicyCode LEFT OUTER JOIN
                      RMTBaseRateCodes T25 ON T1.GrcAdvBaseRate = T25.BRType LEFT OUTER JOIN --remove join and use single query
                      RMTBaseRateCodes T26 ON T1.RpyAdvBaseRate = T26.BRType LEFT OUTER JOIN --remove join and use single query
                      BMTCustStatusCodes T27 ON T1.finStatus = T27.CustStsCode LEFT OUTER JOIN --not using in org
                      RMTGenDepartments T28 ON T1.AccountsOfficer = T28.GenDepartment LEFT OUTER JOIN
					  MMAgreements T29 ON T1.MMAId = T29.MMAId LEFT OUTER JOIN
					  RelationshipOfficers T30 ON T1.DSACode = T30.ROfficerCode LEFT OUTER JOIN
                      LimitAPIDetails T31 ON T1.FinLimitRef = T31.LimitRef AND T10.CustCIF = T31.CustomerReference  INNER JOIN --not using 
                      BMTProduct T32 ON T7.FinCategory = T32.ProductCode 
		</createView>
		</changeSet>
		
		<changeSet author="Siva" id="52">
		<createView replaceIfExists="true" viewName="FinanceMain_View">
		
		SELECT     T1.FinReference, T1.InvestmentRef, T1.NumberOfTerms, T1.GrcPeriodEndDate, T1.AllowGrcPeriod, T1.GraceBaseRate, T1.GraceSpecialRate, T1.GrcPftRate, 
                      T1.GrcPftFrq, T1.NextGrcPftDate, T1.AllowGrcPftRvw, T1.GrcPftRvwFrq, T1.NextGrcPftRvwDate, T1.AllowGrcCpz, T1.GrcCpzFrq, T1.NextGrcCpzDate, 
                      T1.RepayBaseRate, T1.RepaySpecialRate, T1.RepayProfitRate, T1.RepayFrq, T1.NextRepayDate, T1.RepayPftFrq, T1.NextRepayPftDate, T1.AllowRepayRvw, 
                      T1.RepayRvwFrq, T1.NextRepayRvwDate, T1.AllowRepayCpz, T1.RepayCpzFrq, T1.NextRepayCpzDate, T1.MaturityDate, T1.CpzAtGraceEnd, T1.DownPayment, 
                      T1.GraceFlatAmount, T1.ReqRepayAmount, T1.TotalProfit, T1.TotalCpz, T1.TotalGrossPft, T1.TotalGrossGrcPft, T1.TotalGracePft, T1.TotalGraceCpz, T1.GrcRateBasis, 
                      T1.RepayRateBasis, T1.FinType, T1.FinRemarks, T1.FinCcy, T1.ScheduleMethod, T1.ProfitDaysBasis, T1.ReqMaturity, T1.CalTerms, T1.CalMaturity, T1.FirstRepay, 
                      T1.LastRepay, T1.FinStartDate, T1.FinAmount, T1.FinAmount + T1.FeeChargeAmt - T1.DownPayment lovDescFinancingAmount, T1.FinRepaymentAmount, T1.CustID, 
                      T1.Defferments, T1.PlanDeferCount, T1.FinBranch, T1.FinSourceID, T1.AllowedDefRpyChange, T1.AvailedDefRpyChange, T1.AllowedDefFrqChange, 
                      T1.AvailedDefFrqChange, T1.RecalType, T1.FinAssetValue, T1.DisbAccountId, T1.RepayAccountId, T1.FinIsActive, T1.LimitValid, T1.OverrideLimit, T1.SecurityDeposit, 
                      T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId, 
                      T2.CcyDesc lovDescFinCcyName, T3.SchdMethodDesc lovDescScheduleMethodName, T4.IntRateBasisDesc lovDescProfitDaysBasisName, 
                      T5.BRTypeDesc lovDescGraceBaseRateName, T6.SRTypeDesc lovDescGraceSpecialRateName, T7.FinTypeDesc lovDescFinTypeName, 
                      T8.BRTypeDesc lovDescRepayBaseRateName, T9.SRTypeDesc lovDescRepaySpecialRateName, T2.CcyEditField lovDescFinFormatter, 
                      T7.FinIsAlwMD lovDescFinIsAlwMD, T7.FinMaxAmount lovDescFinMaxAmt, T7.FinMinAmount lovDescFinMinAmount, T1.MinDownpayPerc, 
                      T7.FinIsAlwDifferment lovDescFinAlwDeferment, T7.FinIsDwPayRequired lovDescDwnPayReq, T7.FinMaxDifferment lovDescFinMaxDifferment, 
                      T10.CustCIF lovDescCustCIF, T10.CustFName lovDescCustFName, T10.CustLName lovDescCustLName, T12.BranchDesc lovDescFinBranchName, T1.LastRepayDate, 
                      T1.LastRepayPftDate, T1.LastRepayRvwDate, T1.LastRepayCpzDate,  
                      T1.AllowGrcRepay, T1.GrcSchdMthd, T1.GrcMargin, T1.RepayMargin, T1.FinCurrAssetValue, T1.FinCommitmentRef, T1.FinLimitRef,
                      T1.DepreciationFrq, T1.FinContractDate, T13.SaluationDesc lovDescSalutationName, T10.CustShrtName lovDescCustShrtName, 
                      T10.CustCoreBank lovDescCustCoreBank, T1.NextDepDate, T1.LastDepDate, T1.FinAccount, T1.FinCustPftAccount, T1.AlwIndRate, T1.IndBaseRate, T1.GrcAlwIndRate, 
                      T1.GrcIndBaseRate, T15.BRTypeDesc lovDescIndBaseRateName, T16.BRTypeDesc lovDescGrcIndBaseRateName, T17.AcrTillLBD lovDescAccruedTillLBD, 
                      T7.FinRvwRateApplFor, T7.FinGrcRvwRateApplFor, T1.TotalRepayAmt, T7.FinCategory lovDescProductCodeName, T10.CustCtgCode lovDescCustCtgCode, 
                      T1.ClosingStatus, T1.FinApprovedDate, T1.FeeChargeAmt, T1.Blacklisted, T1.FinRepayPftOnFrq, T1.AnualizedPercRate, T1.EffectiveRateOfReturn, 
                      T19.CmtTitle lovDescCommitmentRefName, T31.LimitDesc lovDescLimitRefName, T1.MigratedFinance, T1.ScheduleMaintained, 
                      T1.ScheduleRegenerated, T1.FinPurpose, T20.ValueDesc lovDescFinPurposeName, T1.FinStatus, T1.FinStsReason, T1.InitiateUser, T1.BankName, T1.iban, 
                      T1.AccountType, T1.DdaReferenceNo, T7.FinScheduleOn LovDescFinScheduleOn, T1.CustDSR, T1.Authorization1, T1.Authorization2, 
                      T21.AuthName lovDescAuthorization1Name, T22.AuthName lovDescAuthorization2Name, T1.JointAccount, T1.JointCustId, 
                      T23.CustShrtName lovDescJointCustShrtName, T23.CustCIF lovDescJointCustCIF, '0' AvailCommitAmount, T1.DownPayBank, T1.DownPaySupl, T1.DownPayAccount, 
                      T1.SecurityCollateral, T1.CustomerAcceptance, T1.Approved, T1.CbbApprovalRequired, T1.CbbApproved, T1.Discrepancy, T1.LimitApproved, T1.GraceTerms, 
                      T7.FinDivision lovDescFinDivision, T1.RcdMaintainSts, T1.FinRepayMethod, T1.GrcProfitDaysBasis, T1.StepFinance,T1.StepType, T1.StepPolicy, T1.AlwManualSteps, 
                      T1.NoOfSteps, T1.TakafulFrq, T1.TakafulRate, T1.WaiverReason, T1.TakafulRef, T1.TakafulRequired, 
                      T1.LinkedFinRef, T1.NextUserId, T1.Priority, T24.PolicyDesc LovDescStepPolicyName, T1.GrcMinRate, T1.GrcMaxRate, T1.RpyMinRate, T1.RpyMaxRate, 
                      T2.CcyEditField ReportFormat, T1.DeviationApproval, T1.PptTakafulRequired, T1.PptTakafulFrq, T1.PptWaiverReason, T1.PptTakafulRate, T1.PptTakafulRef, 
                      T1.ManualSchedule, T1.TakeOverFinance, T1.GrcAdvBaseRate, T1.GrcAdvMargin, T1.GrcAdvPftRate, T1.RpyAdvBaseRate, T1.RpyAdvMargin, T1.RpyAdvPftRate, 
                      T25.BRTypeDesc GrcAdvBaseRateDesc, T26.BRTypeDesc RpyAdvBaseRateDesc, T1.SupplementRent, T1.IncreasedCost, T1.CreditInsAmt, T1.RolloverFrq, 
                      T1.NextRolloverDate, T27.CustStsDescription, T1.ShariaStatus, T1.InitiateDate, T1.FINPREAPPROVEDREF, T1.MMAId, T1.AccountsOfficer, 
                      T1.feeAccountId, T1.FinCancelAc,T29.AgreeName, T28.GenDeptDesc lovDescAccountsOfficer,T1.DSACode,T30.ROfficerDesc DSACodeDesc,
					  T29.MMAReference as LovDescMMAReference,T1.TDSApplicable,T1.TakafulStatus, T32.ProductCategory,T1.MandateID,T1.DroplineFrq,T1.FirstDroplineDate,T1.PftServicingODLimit,T1.InsuranceAmt,T1.DeductInsDisb,
					  T1.AlwBPI , T1.BpiTreatment , T1.PlanEMIHAlw , T1.PlanEMIHMethod , T1.PlanEMIHMaxPerYear , T1.PlanEMIHMax , T1.PlanEMIHLockPeriod , T1.PlanEMICpz , T1.CalRoundingMode , T1.AlwMultiDisb
FROM         FinanceMain_Temp T1 INNER JOIN
                      RMTCurrencies T2 ON T1.FinCcy = T2.CcyCode LEFT OUTER JOIN
                      BMTSchdMethod T3 ON T1.ScheduleMethod = T3.SchdMethod LEFT OUTER JOIN
                      BMTIntRateBasisCodes T4 ON T1.ProfitDaysBasis = T4.IntRateBasisCode LEFT OUTER JOIN
                      RMTBaseRateCodes T5 ON T1.GraceBaseRate = T5.BRType LEFT OUTER JOIN
                      RMTSplRateCodes T6 ON T1.GraceSpecialRate = T6.SRType INNER JOIN
                      RMTFinanceTypes T7 ON T1.FinType = T7.FinType LEFT OUTER JOIN
                      RMTBaseRateCodes T8 ON T1.RepayBaseRate = T8.BRType LEFT OUTER JOIN
                      RMTSplRateCodes T9 ON T1.RepaySpecialRate = T9.SRType LEFT OUTER JOIN
                      Customers T10 ON T1.CustID = T10.CustID LEFT OUTER JOIN
                      BMTSalutations T13 ON T10.CustSalutationCode = T13.SalutationCode LEFT OUTER JOIN
                      RMTBranches T12 ON T1.FinBranch = T12.BranchCode LEFT OUTER JOIN
                      RMTBaseRateCodes T15 ON T1.IndBaseRate = T15.BRType LEFT OUTER JOIN
                      RMTBaseRateCodes T16 ON T1.GrcIndBaseRate = T16.BRType LEFT OUTER JOIN
                      FINPFTDETAILS T17 ON T17.FINREFERENCE = T1.FINREFERENCE LEFT OUTER JOIN
                      Commitments T19 ON T1.FinCommitmentRef = T19.CmtReference AND T10.CustID = T19.custID LEFT OUTER JOIN
                      RMTLOVFielddetail T20 ON T20.FieldCode = 'FINASSTYP' AND T1.FinPurpose = T20.FieldCodeValue LEFT OUTER JOIN
                      AMTAuthorization T21 ON T1.Authorization1 = T21.AuthUserId LEFT OUTER JOIN
                      AMTAuthorization T22 ON T1.Authorization2 = T22.AuthUserId LEFT OUTER JOIN
                      Customers T23 ON T1.JointCustId = T23.CustID LEFT OUTER JOIN
                      StepPolicyHeader T24 ON T1.StepPolicy = T24.PolicyCode LEFT OUTER JOIN
                      RMTBaseRateCodes T25 ON T1.GrcAdvBaseRate = T25.BRType LEFT OUTER JOIN
                      RMTBaseRateCodes T26 ON T1.RpyAdvBaseRate = T26.BRType LEFT OUTER JOIN
                      BMTCustStatusCodes T27 ON T1.finStatus = T27.CustStsCode LEFT OUTER JOIN
                      RMTGenDepartments T28 ON T1.AccountsOfficer = T28.GenDepartment LEFT OUTER JOIN
					  MMAgreements T29 ON T1.MMAId = T29.MMAId LEFT OUTER JOIN
					  RelationshipOfficers T30 ON T1.DSACode = T30.ROfficerCode LEFT OUTER JOIN
                      LimitAPIDetails T31 ON T1.FinLimitRef = T31.LimitRef AND T10.CustCIF = T31.CustomerReference INNER JOIN  
                      BMTProduct T32 ON T7.FinCategory = T32.ProductCode -- New Filed
			 
UNION ALL
SELECT     T1.FinReference, T1.InvestmentRef, T1.NumberOfTerms, T1.GrcPeriodEndDate, T1.AllowGrcPeriod, T1.GraceBaseRate, T1.GraceSpecialRate, T1.GrcPftRate, 
                      T1.GrcPftFrq, T1.NextGrcPftDate, T1.AllowGrcPftRvw, T1.GrcPftRvwFrq, T1.NextGrcPftRvwDate, T1.AllowGrcCpz, T1.GrcCpzFrq, T1.NextGrcCpzDate, 
                      T1.RepayBaseRate, T1.RepaySpecialRate, T1.RepayProfitRate, T1.RepayFrq, T1.NextRepayDate, T1.RepayPftFrq, T1.NextRepayPftDate, T1.AllowRepayRvw, 
                      T1.RepayRvwFrq, T1.NextRepayRvwDate, T1.AllowRepayCpz, T1.RepayCpzFrq, T1.NextRepayCpzDate, T1.MaturityDate, T1.CpzAtGraceEnd, T1.DownPayment, 
                      T1.GraceFlatAmount, T1.ReqRepayAmount, T1.TotalProfit, T1.TotalCpz, T1.TotalGrossPft, T1.TotalGrossGrcPft, T1.TotalGracePft, T1.TotalGraceCpz, T1.GrcRateBasis, 
                      T1.RepayRateBasis, T1.FinType, T1.FinRemarks, T1.FinCcy, T1.ScheduleMethod, T1.ProfitDaysBasis, T1.ReqMaturity, T1.CalTerms, T1.CalMaturity, T1.FirstRepay, 
                      T1.LastRepay, T1.FinStartDate, T1.FinAmount, T1.FinAmount + T1.FeeChargeAmt - T1.DownPayment lovDescFinancingAmount, T1.FinRepaymentAmount, T1.CustID, 
                      T1.Defferments, T1.PlanDeferCount, T1.FinBranch, T1.FinSourceID, T1.AllowedDefRpyChange, T1.AvailedDefRpyChange, T1.AllowedDefFrqChange, 
                      T1.AvailedDefFrqChange, T1.RecalType, T1.FinAssetValue, T1.DisbAccountId, T1.RepayAccountId, T1.FinIsActive, T1.LimitValid, T1.OverrideLimit, T1.SecurityDeposit, 
                      T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId, 
                      T2.CcyDesc lovDescFinCcyName, T3.SchdMethodDesc lovDescScheduleMethodName, T4.IntRateBasisDesc lovDescProfitDaysBasisName, 
                      T5.BRTypeDesc lovDescGraceBaseRateName, T6.SRTypeDesc lovDescGraceSpecialRateName, T7.FinTypeDesc lovDescFinTypeName, 
                      T8.BRTypeDesc lovDescRepayBaseRateName, T9.SRTypeDesc lovDescRepaySpecialRateName, T2.CcyEditField lovDescFinFormatter, 
                      T7.FinIsAlwMD lovDescFinIsAlwMD, T7.FinMaxAmount lovDescFinMaxAmt, T7.FinMinAmount lovDescFinMinAmount, T1.MinDownpayPerc, 
                      T7.FinIsAlwDifferment lovDescFinAlwDeferment, T7.FinIsDwPayRequired lovDescDwnPayReq, T7.FinMaxDifferment lovDescFinMaxDifferment, 
                      T10.CustCIF lovDescCustCIF, T10.CustFName lovDescCustFName, T10.CustLName lovDescCustLName, T12.BranchDesc lovDescFinBranchName, T1.LastRepayDate, 
                      T1.LastRepayPftDate, T1.LastRepayRvwDate, T1.LastRepayCpzDate,  
                      T1.AllowGrcRepay, T1.GrcSchdMthd, T1.GrcMargin, T1.RepayMargin, T1.FinCurrAssetValue, T1.FinCommitmentRef, T1.FinLimitRef,
                      T1.DepreciationFrq, T1.FinContractDate, T13.SaluationDesc lovDescSalutationName, T10.CustShrtName lovDescCustShrtName, 
                      T10.CustCoreBank lovDescCustCoreBank, T1.NextDepDate, T1.LastDepDate, T1.FinAccount, T1.FinCustPftAccount, T1.AlwIndRate, T1.IndBaseRate, T1.GrcAlwIndRate, 
                      T1.GrcIndBaseRate, T15.BRTypeDesc lovDescIndBaseRateName, T16.BRTypeDesc lovDescGrcIndBaseRateName, T17.AcrTillLBD lovDescAccruedTillLBD, 
                      T7.FinRvwRateApplFor, T7.FinGrcRvwRateApplFor, T1.TotalRepayAmt, T7.FinCategory lovDescProductCodeName, T10.CustCtgCode lovDescCustCtgCode, 
                      T1.ClosingStatus, T1.FinApprovedDate, T1.FeeChargeAmt, T1.Blacklisted, T1.FinRepayPftOnFrq, T1.AnualizedPercRate, T1.EffectiveRateOfReturn, 
                      T19.CmtTitle lovDescCommitmentRefName, T31.LimitDesc lovDescLimitRefName, T1.MigratedFinance, T1.ScheduleMaintained, 
                      T1.ScheduleRegenerated, T1.FinPurpose, T20.ValueDesc lovDescFinPurposeName, T1.FinStatus, T1.FinStsReason, T1.InitiateUser, T1.BankName, T1.iban, 
                      T1.AccountType, T1.DdaReferenceNo, T7.FinScheduleOn LovDescFinScheduleOn, T1.CustDSR, T1.Authorization1, T1.Authorization2, 
                      T21.AuthName lovDescAuthorization1Name, T22.AuthName lovDescAuthorization2Name, T1.JointAccount, T1.JointCustId, 
                      T23.CustShrtName lovDescJointCustShrtName, T23.CustCIF lovDescJointCustCIF, '0' AvailCommitAmount, T1.DownPayBank, T1.DownPaySupl, T1.DownPayAccount, 
                      T1.SecurityCollateral, T1.CustomerAcceptance, T1.Approved, T1.CbbApprovalRequired, T1.CbbApproved, T1.Discrepancy, T1.LimitApproved, T1.GraceTerms, 
                      T7.FinDivision lovDescFinDivision, T1.RcdMaintainSts, T1.FinRepayMethod, T1.GrcProfitDaysBasis, T1.StepFinance,T1.StepType, T1.StepPolicy, T1.AlwManualSteps, 
                      T1.NoOfSteps, T1.TakafulFrq, T1.TakafulRate, T1.WaiverReason, T1.TakafulRef, T1.TakafulRequired, 
                      T1.LinkedFinRef, T1.NextUserId, T1.Priority, T24.PolicyDesc LovDescStepPolicyName, T1.GrcMinRate, T1.GrcMaxRate, T1.RpyMinRate, T1.RpyMaxRate, 
                      T2.CcyEditField ReportFormat, T1.DeviationApproval, T1.PptTakafulRequired, T1.PptTakafulFrq, T1.PptWaiverReason, T1.PptTakafulRate, T1.PptTakafulRef, 
                      T1.ManualSchedule, T1.TakeOverFinance, T1.GrcAdvBaseRate, T1.GrcAdvMargin, T1.GrcAdvPftRate, T1.RpyAdvBaseRate, T1.RpyAdvMargin, T1.RpyAdvPftRate, 
                      T25.BRTypeDesc GrcAdvBaseRateDesc, T26.BRTypeDesc RpyAdvBaseRateDesc, T1.SupplementRent, T1.IncreasedCost, T1.CreditInsAmt, T1.RolloverFrq, 
                      T1.NextRolloverDate, T27.CustStsDescription, T1.ShariaStatus, T1.InitiateDate, T1.FINPREAPPROVEDREF, T1.MMAId, T1.AccountsOfficer, 
                      T1.feeAccountId, T1.FinCancelAc,T29.AgreeName, T28.GenDeptDesc lovDescAccountsOfficer,T1.DSACode,T30.ROfficerDesc DSACodeDesc,
					  T29.MMAReference as LovDescMMAReference,T1.TDSApplicable,T1.TakafulStatus, T32.ProductCategory,T1.MandateID,T1.DroplineFrq,T1.FirstDroplineDate,T1.PftServicingODLimit,T1.InsuranceAmt,T1.DeductInsDisb,
					  T1.AlwBPI , T1.BpiTreatment , T1.PlanEMIHAlw , T1.PlanEMIHMethod , T1.PlanEMIHMaxPerYear , T1.PlanEMIHMax , T1.PlanEMIHLockPeriod , T1.PlanEMICpz , T1.CalRoundingMode , T1.AlwMultiDisb
FROM         FinanceMain T1 INNER JOIN
                      RMTCurrencies T2 ON T1.FinCcy = T2.CcyCode LEFT OUTER JOIN
                      BMTSchdMethod T3 ON T1.ScheduleMethod = T3.SchdMethod LEFT OUTER JOIN
                      BMTIntRateBasisCodes T4 ON T1.ProfitDaysBasis = T4.IntRateBasisCode LEFT OUTER JOIN
                      RMTBaseRateCodes T5 ON T1.GraceBaseRate = T5.BRType LEFT OUTER JOIN
                      RMTSplRateCodes T6 ON T1.GraceSpecialRate = T6.SRType INNER JOIN
                      RMTFinanceTypes T7 ON T1.FinType = T7.FinType LEFT OUTER JOIN
                      RMTBaseRateCodes T8 ON T1.RepayBaseRate = T8.BRType LEFT OUTER JOIN
                      RMTSplRateCodes T9 ON T1.RepaySpecialRate = T9.SRType LEFT OUTER JOIN
                      Customers T10 ON T1.CustID = T10.CustID LEFT OUTER JOIN
                      BMTSalutations T13 ON T10.CustSalutationCode = T13.SalutationCode LEFT OUTER JOIN
                      RMTBranches T12 ON T1.FinBranch = T12.BranchCode LEFT OUTER JOIN
                      RMTBaseRateCodes T15 ON T1.IndBaseRate = T15.BRType LEFT OUTER JOIN
                      RMTBaseRateCodes T16 ON T1.GrcIndBaseRate = T16.BRType LEFT OUTER JOIN
                      FINPFTDETAILS T17 ON T17.FINREFERENCE = T1.FINREFERENCE LEFT OUTER JOIN
                      Commitments T19 ON T1.FinCommitmentRef = T19.CmtReference AND T10.CustID = T19.custID LEFT OUTER JOIN
                      RMTLOVFielddetail T20 ON T20.FieldCode = 'FINASSTYP' AND T1.FinPurpose = T20.FieldCodeValue LEFT OUTER JOIN
                      AMTAuthorization T21 ON T1.Authorization1 = T21.AuthUserId LEFT OUTER JOIN
                      AMTAuthorization T22 ON T1.Authorization2 = T22.AuthUserId LEFT OUTER JOIN
                      Customers T23 ON T1.JointCustId = T23.CustID LEFT OUTER JOIN
                      StepPolicyHeader T24 ON T1.StepPolicy = T24.PolicyCode LEFT OUTER JOIN
                      RMTBaseRateCodes T25 ON T1.GrcAdvBaseRate = T25.BRType LEFT OUTER JOIN
                      RMTBaseRateCodes T26 ON T1.RpyAdvBaseRate = T26.BRType LEFT OUTER JOIN
                      BMTCustStatusCodes T27 ON T1.finStatus = T27.CustStsCode LEFT OUTER JOIN
                      RMTGenDepartments T28 ON T1.AccountsOfficer = T28.GenDepartment LEFT OUTER JOIN
					  MMAgreements T29 ON T1.MMAId = T29.MMAId LEFT OUTER JOIN 
					  RelationshipOfficers T30 ON T1.DSACode = T30.ROfficerCode LEFT OUTER JOIN
                      LimitAPIDetails T31 ON T1.FinLimitRef = T31.LimitRef AND T10.CustCIF = T31.CustomerReference INNER JOIN --not using 
                      BMTProduct T32 ON T7.FinCategory = T32.ProductCode -- New Filed
WHERE     (NOT EXISTS
                          (SELECT     1 Expr1
                            FROM          FinanceMain_Temp
                            WHERE      (FINREFERENCE = T1.FINREFERENCE)));
		
		</createView>
		</changeSet>
		
		<changeSet author="Siva" id="53">
		<createView replaceIfExists="true" viewName="FinanceMain_AView">
		
		SELECT     T1.FinReference, T1.NumberOfTerms, T1.GrcPeriodEndDate, T1.AllowGrcPeriod, T1.GraceBaseRate, T1.GraceSpecialRate, T1.GrcPftRate, T1.GrcPftFrq, 
                      T1.NextGrcPftDate, T1.AllowGrcPftRvw, T1.GrcPftRvwFrq, T1.NextGrcPftRvwDate, T1.AllowGrcCpz, T1.GrcCpzFrq, T1.NextGrcCpzDate, T1.RepayBaseRate, 
                      T1.RepaySpecialRate, T1.RepayProfitRate, T1.RepayFrq, T1.NextRepayDate, T1.RepayPftFrq, T1.NextRepayPftDate, T1.AllowRepayRvw, T1.RepayRvwFrq, 
                      T1.NextRepayRvwDate, T1.AllowRepayCpz, T1.RepayCpzFrq, T1.NextRepayCpzDate, T1.MaturityDate, T1.CpzAtGraceEnd, T1.DownPayment, T1.GraceFlatAmount, 
                      T1.ReqRepayAmount, T1.TotalProfit, T1.TotalCpz, T1.TotalGrossPft, T1.TotalGrossGrcPft, T1.TotalGracePft, T1.TotalGraceCpz, T1.GrcRateBasis, T1.RepayRateBasis, 
                      T1.FinType, T1.FinRemarks, T1.FinCcy, T1.ScheduleMethod, T1.ProfitDaysBasis, T1.ReqMaturity, T1.CalTerms, T1.CalMaturity, T1.FirstRepay, T1.LastRepay, 
                      T1.FinStartDate, T1.FinAmount, T1.FinAmount + T1.FeeChargeAmt - T1.DownPayment AS lovDescFinancingAmount, T1.FinRepaymentAmount, T1.CustID, 
                      T1.Defferments, T1.PlanDeferCount, T1.FinBranch, T1.FinSourceID, T1.AllowedDefRpyChange, T1.AvailedDefRpyChange, T1.AllowedDefFrqChange, 
                      T1.AvailedDefFrqChange, T1.RecalType, T1.FinAssetValue, T1.DisbAccountId, T1.RepayAccountId, T1.FinIsActive, T1.LimitValid, T1.OverrideLimit, T1.SecurityDeposit, 
                      T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId, 
                      T2.CcyDesc AS lovDescFinCcyName, T3.SchdMethodDesc AS lovDescScheduleMethodName, T4.IntRateBasisDesc AS lovDescProfitDaysBasisName, 
                      T5.BRTypeDesc AS lovDescGraceBaseRateName, T6.SRTypeDesc AS lovDescGraceSpecialRateName, T7.FinTypeDesc AS lovDescFinTypeName, 
                      T8.BRTypeDesc AS lovDescRepayBaseRateName, T9.SRTypeDesc AS lovDescRepaySpecialRateName, T2.CcyEditField AS lovDescFinFormatter, 
                      T7.FinIsAlwMD AS lovDescFinIsAlwMD, T7.FinMaxAmount AS lovDescFinMaxAmt, T7.FinMinAmount AS lovDescFinMinAmount, 
                      T1.MinDownpayPerc, T7.FinIsAlwDifferment AS lovDescFinAlwDeferment, T7.FinIsDwPayRequired AS lovDescDwnPayReq, 
                      T7.FinMaxDifferment AS lovDescFinMaxDifferment, T10.CustCIF AS lovDescCustCIF, T10.CustFName AS lovDescCustFName, T10.CustLName AS lovDescCustLName, 
                      T12.BranchDesc AS lovDescFinBranchName, T1.LastRepayDate, T1.LastRepayPftDate, T1.LastRepayRvwDate, T1.LastRepayCpzDate, 
                       T1.AllowGrcRepay, 
                      T1.GrcSchdMthd, T1.GrcMargin, T1.RepayMargin, T1.FinCurrAssetValue, T1.FinCommitmentRef, T1.FinLimitRef, T1.DepreciationFrq, T1.FinContractDate, 
                      T13.SaluationDesc AS lovDescSalutationName, T10.CustShrtName AS lovDescCustShrtName, T10.CustCoreBank AS lovDescCustCoreBank, T1.NextDepDate, 
                      T1.LastDepDate, T1.FinAccount, T1.FinCustPftAccount, T1.AlwIndRate, T1.IndBaseRate, T1.GrcAlwIndRate, T1.GrcIndBaseRate, 
                      T15.BRTypeDesc AS lovDescIndBaseRateName, T16.BRTypeDesc AS lovDescGrcIndBaseRateName, T17.AcrTillLBD AS lovDescAccruedTillLBD, 
                      T7.FinRvwRateApplFor, T7.FinGrcRvwRateApplFor, T1.TotalRepayAmt, T7.FinCategory AS lovDescProductCodeName, T1.ClosingStatus, T1.FinApprovedDate, 
                      T1.FeeChargeAmt, T1.Blacklisted, T1.FinRepayPftOnFrq, T1.AnualizedPercRate, T1.EffectiveRateOfReturn, T10.CustCtgCode AS lovDescCustCtgCode, 
                      T19.CmtTitle lovDescCommitmentRefName, T1.MigratedFinance, T1.ScheduleMaintained, T1.ScheduleRegenerated, T1.FinPurpose, 
                      T20.ValueDesc AS lovDescFinPurposeName, T1.FinStatus, T1.FinStsReason, T1.InitiateUser, T1.bankName, T1.iban, T1.accountType, T1.DdaReferenceNo, 
                      T7.FinScheduleOn AS LovDescFinScheduleOn, T1.CustDSR, T1.Authorization1, T1.Authorization2, T21.AuthName AS lovDescAuthorization1Name, 
                      T22.AuthName AS lovDescAuthorization2Name, T1.JointAccount, T1.JointCustId, T23.CustShrtName AS lovDescJointCustShrtName, 
                      T23.CustCIF AS lovDescJointCustCIF, '0' AS AvailCommitAmount, T1.DownPayBank, T1.DownPaySupl, T1.DownPayAccount, T1.SecurityCollateral, 
                      T1.CustomerAcceptance, T1.Approved, T1.CbbApprovalRequired, T1.CbbApproved, T1.Discrepancy, T1.LimitApproved, T1.InvestmentRef, T1.GraceTerms, 
                      T7.FinDivision AS lovDescFinDivision, T1.RcdMaintainSts, T1.FinRepayMethod, T1.GrcProfitDaysBasis, T1.StepFinance,T1.StepType, T1.StepPolicy, T1.AlwManualSteps, 
                      T1.NoOfSteps, T1.TakafulFrq, T1.TakafulRate, T1.WaiverReason, T1.TakafulRef, T1.TakafulRequired, 
                      T1.LinkedFinRef, T1.NextUserId, T1.Priority, T24.PolicyDesc AS LovDescStepPolicyName, T1.GrcMinRate, T1.GrcMaxRate, T1.RpyMinRate, T1.RpyMaxRate, 
                      T2.CcyEditField AS ReportFormat, T1.DeviationApproval, T1.PptTakafulRequired, T1.PptTakafulFrq, T1.PptWaiverReason, T1.PptTakafulRate, T1.PptTakafulRef, 
                      T1.ManualSchedule, T1.TakeOverFinance, T1.GrcAdvBaseRate, T1.GrcAdvMargin, T1.GrcAdvPftRate, T1.RpyAdvBaseRate, T1.RpyAdvMargin, T1.RpyAdvPftRate, 
                      T25.BRTypeDesc AS GrcAdvBaseRateDesc, T26.BRTypeDesc AS RpyAdvBaseRateDesc, T1.SupplementRent, T1.IncreasedCost, T1.CreditInsAmt, T1.RolloverFrq, 
                      T1.NextRolloverDate, T27.CustStsDescription, T1.ShariaStatus, T1.InitiateDate, T1.FINPREAPPROVEDREF, T1.MMAId, T1.AccountsOfficer, 
                      T1.feeAccountId,T1.FinCancelAc,T28.GenDeptDesc lovDescAccountsOfficer,T29.AgreeName,T29.MMAReference as LovDescMMAReference,
					  T1.DSACode,T30.ROfficerDesc DSACodeDesc,T1.TDSApplicable, T31.LimitDesc lovDescLimitRefName,T1.TakafulStatus, T32.ProductCategory,T1.MandateID,T1.DroplineFrq,T1.FirstDroplineDate,
					  T1.PftServicingODLimit,T1.InsuranceAmt,T1.DeductInsDisb,T1.AlwBPI , T1.BpiTreatment , T1.PlanEMIHAlw , T1.PlanEMIHMethod , 
					  T1.PlanEMIHMaxPerYear , T1.PlanEMIHMax , T1.PlanEMIHLockPeriod , T1.PlanEMICpz , T1.CalRoundingMode , T1.AlwMultiDisb
FROM         dbo.FinanceMain AS T1 INNER JOIN
                      dbo.RMTCurrencies AS T2 ON T1.FinCcy = T2.CcyCode LEFT OUTER JOIN
                      dbo.BMTSchdMethod AS T3 ON T1.ScheduleMethod = T3.SchdMethod LEFT OUTER JOIN
                      dbo.BMTIntRateBasisCodes AS T4 ON T1.ProfitDaysBasis = T4.IntRateBasisCode LEFT OUTER JOIN
                      dbo.RMTBaseRateCodes AS T5 ON T1.GraceBaseRate = T5.BRType LEFT OUTER JOIN
                      dbo.RMTSplRateCodes AS T6 ON T1.GraceSpecialRate = T6.SRType INNER JOIN
                      dbo.RMTFinanceTypes AS T7 ON T1.FinType = T7.FinType LEFT OUTER JOIN
                      dbo.RMTBaseRateCodes AS T8 ON T1.RepayBaseRate = T8.BRType LEFT OUTER JOIN
                      dbo.RMTSplRateCodes AS T9 ON T1.RepaySpecialRate = T9.SRType LEFT OUTER JOIN
                      dbo.RMTBaseRateCodes AS T15 ON T1.IndBaseRate = T15.BRType LEFT OUTER JOIN
                      dbo.RMTBaseRateCodes AS T16 ON T1.GrcIndBaseRate = T16.BRType LEFT OUTER JOIN
                      dbo.Customers AS T10 ON T1.CustID = T10.CustID LEFT OUTER JOIN
                      dbo.BMTSalutations AS T13 ON T10.CustSalutationCode = T13.SalutationCode LEFT OUTER JOIN
                      dbo.RMTBranches AS T12 ON T1.FinBranch = T12.BranchCode LEFT OUTER JOIN
                      dbo.FinPftDetails AS T17 ON T17.FinReference = T1.FinReference LEFT OUTER JOIN
                      dbo.Commitments T19 ON T1.FinCommitmentRef = T19.CmtReference AND T10.CustID = T19.custID LEFT OUTER JOIN
                      dbo.RMTLovFieldDetail AS T20 ON T20.FieldCode = 'FINASSTYP' AND T1.FinPurpose = T20.FieldCodeValue LEFT OUTER JOIN
                      dbo.AMTAuthorization AS T21 ON T1.Authorization1 = T21.AuthUserId LEFT OUTER JOIN
                      dbo.AMTAuthorization AS T22 ON T1.Authorization2 = T22.AuthUserId LEFT OUTER JOIN
                      dbo.Customers AS T23 ON T1.JointCustId = T23.CustID LEFT OUTER JOIN
                      dbo.StepPolicyHeader AS T24 ON T1.StepPolicy = T24.PolicyCode LEFT OUTER JOIN
                      dbo.RMTBaseRateCodes AS T25 ON T1.GrcAdvBaseRate = T25.BRType LEFT OUTER JOIN
                      dbo.RMTBaseRateCodes AS T26 ON T1.RpyAdvBaseRate = T26.BRType LEFT OUTER JOIN
                      dbo.BMTCustStatusCodes T27 ON T1.finStatus = T27.CustStsCode LEFT OUTER JOIN 
					  dbo.RMTGENDEPARTMENTS T28 on T1.ACCOUNTSOFFICER = T28.GENDEPARTMENT LEFT OUTER JOIN
					  dbo.MMAgreements T29 ON T1.MMAId = T29.MMAId LEFT OUTER JOIN
					  RelationshipOfficers T30 ON T1.DSACode = T30.ROfficerCode LEFT OUTER JOIN
                      LimitAPIDetails T31 ON T1.FinLimitRef = T31.LimitRef AND T10.CustCIF = T31.CustomerReference INNER JOIN  
                      BMTProduct T32 ON T7.FinCategory = T32.ProductCode -- New Filed

		</createView>
		</changeSet>
		
		<changeSet author="Siva" id="54">
		<createView replaceIfExists="true" viewName="WIFFinanceMain_AView">
		
		SELECT     T1.FinReference, T1.NumberOfTerms, T1.GrcPeriodEndDate, T1.AllowGrcPeriod, T1.GraceBaseRate, T1.GraceSpecialRate, T1.GrcPftRate, T1.GrcPftFrq, 
                      T1.NextGrcPftDate, T1.AllowGrcPftRvw, T1.GrcPftRvwFrq, T1.NextGrcPftRvwDate, T1.AllowGrcCpz, T1.GrcCpzFrq, T1.NextGrcCpzDate, T1.RepayBaseRate, 
                      T1.RepaySpecialRate, T1.RepayProfitRate, T1.RepayFrq, T1.NextRepayDate, T1.RepayPftFrq, T1.NextRepayPftDate, T1.AllowRepayRvw, T1.RepayRvwFrq, 
                      T1.NextRepayRvwDate, T1.AllowRepayCpz, T1.RepayCpzFrq, T1.NextRepayCpzDate, T1.MaturityDate, T1.CpzAtGraceEnd, T1.DownPayment, T1.GraceFlatAmount, 
                      T1.ReqRepayAmount, T1.TotalProfit, T1.TotalCpz, T1.TotalGrossPft, T1.TotalGrossGrcPft, T1.TotalGracePft, T1.TotalGraceCpz, T1.GrcRateBasis, T1.RepayRateBasis, 
                      T1.FinType, T1.FinRemarks, T1.FinCcy, T1.ScheduleMethod, T1.ProfitDaysBasis, T1.ReqMaturity, T1.CalTerms, T1.CalMaturity, T1.FirstRepay, T1.LastRepay, 
                      T1.FinStartDate, T1.FinAmount, T1.FinRepaymentAmount, T1.CustID, T1.Defferments, T1.PlanDeferCount, T1.FinIsActive, T1.Version, T1.LastMntBy, T1.LastMntOn, 
                      T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId, T2.CcyDesc AS lovDescFinCcyName, 
                      T3.SchdMethodDesc AS lovDescScheduleMethodName, T4.IntRateBasisDesc AS lovDescProfitDaysBasisName, T5.BRTypeDesc AS lovDescGraceBaseRateName, 
                      T6.SRTypeDesc AS lovDescGraceSpecialRateName, T7.FinTypeDesc AS lovDescFinTypeName, T8.BRTypeDesc AS lovDescRepayBaseRateName, 
                      T9.SRTypeDesc AS lovDescRepaySpecialRateName, T2.CcyEditField AS lovDescFinFormatter, T7.FinIsAlwMD AS lovDescFinIsAlwMD, T1.FinBranch, T1.FinSourceID, 
                      T1.AllowedDefRpyChange, T1.AvailedDefRpyChange, T1.AllowedDefFrqChange, T1.AvailedDefFrqChange, T7.FinMaxAmount AS lovDescFinMaxAmt, 
                      T7.FinMinAmount AS lovDescFinMinAmount, T7.FinIsAlwDifferment AS lovDescFinAlwDeferment, T1.MinDownpayPerc, 
                      T7.FinIsDwPayRequired AS lovDescDwnPayReq, T1.RecalType, T1.FinAssetValue, T7.FinMaxDifferment AS lovDescFinMaxDifferment, T1.LastRepayDate, 
                      T1.LastRepayPftDate, T1.LastRepayRvwDate, T1.LastRepayCpzDate, T1.DisbAccountId, T1.RepayAccountId, T11.ScreenCode AS lovDescScreenCode, T1.AllowGrcRepay, 
                      T1.GrcSchdMthd, T1.RepayMargin, T1.GrcMargin, T1.NextDepDate, T1.LastDepDate, T7.FinRvwRateApplFor, T7.FinGrcRvwRateApplFor, T1.TotalRepayAmt, 
                      T1.ClosingStatus, T1.FinApprovedDate, T7.FinCategory AS lovDescProductCodeName, T1.DownPayBank, T1.DownPaySupl, T1.GraceTerms, T1.GrcProfitDaysBasis, 
                      T1.StepFinance,T1.StepType, T1.StepPolicy, T1.AlwManualSteps, T1.NoOfSteps, T1.TakafulRequired, T1.TakafulFrq, 
                      T1.WaiverReason, T1.TakafulRate, T1.TakafulRef, T1.LinkedFinRef, T7.Product AS LovDescFinProduct, T1.GrcMinRate, T1.GrcMaxRate, T1.RpyMinRate, 
                      T1.RpyMaxRate, T1.PptTakafulRequired, T1.PptTakafulFrq, T1.PptWaiverReason, T1.PptTakafulRate, T1.PptTakafulRef, T1.ManualSchedule, T1.TakeOverFinance, 
                      T1.GrcAdvBaseRate, T1.GrcAdvMargin, T1.GrcAdvPftRate, T1.RpyAdvBaseRate, T1.RpyAdvMargin, T1.RpyAdvPftRate, T12.BRTypeDesc AS GrcAdvBaseRateDesc, 
                      T13.BRTypeDesc AS RpyAdvBaseRateDesc, T1.SupplementRent, T1.IncreasedCost, T1.CreditInsAmt, T1.feeAccountId, T1.TDSApplicable,T1.InsuranceAmt,T1.DeductInsDisb,
                      T1.AlwBPI , T1.BpiTreatment , T1.PlanEMIHAlw , T1.PlanEMIHMethod ,  T1.PlanEMIHMaxPerYear , T1.PlanEMIHMax , T1.PlanEMIHLockPeriod , T1.PlanEMICpz , T1.CalRoundingMode , T1.AlwMultiDisb
FROM         dbo.WIFFinanceMain AS T1 INNER JOIN
                      dbo.RMTCurrencies AS T2 ON T1.FinCcy = T2.CcyCode INNER JOIN
                      dbo.BMTSchdMethod AS T3 ON T1.ScheduleMethod = T3.SchdMethod INNER JOIN
                      dbo.BMTIntRateBasisCodes AS T4 ON T1.ProfitDaysBasis = T4.IntRateBasisCode INNER JOIN
                      dbo.RMTBaseRateCodes AS T5 ON T1.GraceBaseRate = T5.BRType INNER JOIN
                      dbo.RMTSplRateCodes AS T6 ON T1.GraceSpecialRate = T6.SRType INNER JOIN
                      dbo.RMTFinanceTypes AS T7 ON T1.FinType = T7.FinType INNER JOIN
                      dbo.RMTBaseRateCodes AS T8 ON T1.RepayBaseRate = T8.BRType INNER JOIN
                      dbo.RMTSplRateCodes AS T9 ON T1.RepaySpecialRate = T9.SRType LEFT OUTER JOIN
                      dbo.LMTFinanceWorkFlowDef_AView AS T11 ON T7.FinType = T11.FinType LEFT OUTER JOIN
                      dbo.RMTBaseRateCodes AS T12 ON T1.GrcAdvBaseRate = T12.BRType LEFT OUTER JOIN
                      dbo.RMTBaseRateCodes AS T13 ON T1.RpyAdvBaseRate = T13.BRType

		
		
		</createView>
		</changeSet>
		
		<changeSet author="Siva" id="55">
		<createView replaceIfExists="true" viewName="WIFFinanceMain_View">
		
		SELECT     T1.FinReference, T1.NumberOfTerms, T1.GrcPeriodEndDate, T1.AllowGrcPeriod, T1.GraceBaseRate, T1.GraceSpecialRate, T1.GrcPftRate, T1.GrcPftFrq, 
                      T1.NextGrcPftDate, T1.AllowGrcPftRvw, T1.GrcPftRvwFrq, T1.NextGrcPftRvwDate, T1.AllowGrcCpz, T1.GrcCpzFrq, T1.NextGrcCpzDate, T1.RepayBaseRate, 
                      T1.RepaySpecialRate, T1.RepayProfitRate, T1.RepayFrq, T1.NextRepayDate, T1.RepayPftFrq, T1.NextRepayPftDate, T1.AllowRepayRvw, T1.RepayRvwFrq, 
                      T1.NextRepayRvwDate, T1.AllowRepayCpz, T1.RepayCpzFrq, T1.NextRepayCpzDate, T1.MaturityDate, T1.CpzAtGraceEnd, T1.DownPayment, T1.GraceFlatAmount, 
                      T1.ReqRepayAmount, T1.TotalProfit, T1.TotalCpz, T1.TotalGrossPft, T1.TotalGracePft, T1.TotalGraceCpz, T1.GrcRateBasis, T1.RepayRateBasis, T1.FinType, 
                      T1.FinRemarks, T1.FinCcy, T1.ScheduleMethod, T1.ProfitDaysBasis, T1.ReqMaturity, T1.CalTerms, T1.CalMaturity, T1.FirstRepay, T1.LastRepay, T1.FinStartDate, 
                      T1.FinAmount, T1.FinRepaymentAmount, T1.CustID, T1.Defferments, T1.PlanDeferCount, T1.FinIsActive, T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, 
                      T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId, T2.CcyDesc AS lovDescFinCcyName, T15.CustCIF AS lovDescCustCIF, 
                      T3.SchdMethodDesc AS lovDescScheduleMethodName, T4.IntRateBasisDesc AS lovDescProfitDaysBasisName, T5.BRTypeDesc AS lovDescGraceBaseRateName, 
                      T6.SRTypeDesc AS lovDescGraceSpecialRateName, T7.FinTypeDesc AS lovDescFinTypeName, T8.BRTypeDesc AS lovDescRepayBaseRateName, 
                      T9.SRTypeDesc AS lovDescRepaySpecialRateName, T2.CcyEditField AS lovDescFinFormatter, T7.FinIsAlwMD AS lovDescFinIsAlwMD, T1.FinBranch, T1.FinSourceID, 
                      T1.AllowedDefRpyChange, T1.AvailedDefRpyChange, T1.AllowedDefFrqChange, T1.AvailedDefFrqChange, T7.FinMaxAmount AS lovDescFinMaxAmt, 
                      T7.FinMinAmount AS lovDescFinMinAmount, T7.FinIsAlwDifferment AS lovDescFinAlwDeferment, T1.MinDownpayPerc, 
                      T7.FinIsDwPayRequired AS lovDescDwnPayReq, T1.RecalType, T1.FinAssetValue, T7.FinMaxDifferment AS lovDescFinMaxDifferment, T1.LastRepayDate, 
                      T1.LastRepayPftDate, T1.LastRepayRvwDate, T1.LastRepayCpzDate, T1.DisbAccountId, T1.RepayAccountId,  T11.ScreenCode AS lovDescScreenCode, T1.AllowGrcRepay, 
                      T1.GrcSchdMthd, T1.RepayMargin, T1.GrcMargin, T1.DepreciationFrq, T1.FinCommitmentRef, T1.FinCurrAssetValue, T1.FinContractDate, T1.NextDepDate, 
                      T1.LastDepDate, T1.FinAccount, T1.FinCustPftAccount, T1.AlwIndRate, T1.IndBaseRate, T1.GrcAlwIndRate, T1.GrcIndBaseRate, 
                      T12.BRTypeDesc AS lovDescIndBaseRateName, T13.BRTypeDesc AS lovDescGrcIndBaseRateName, T7.FinRvwRateApplFor, T7.FinGrcRvwRateApplFor, 
                      T1.TotalRepayAmt, T1.ClosingStatus, T1.FinApprovedDate, T7.FinCategory AS lovDescProductCodeName, T1.FinRepayPftOnFrq, T1.AnualizedPercRate, 
                      T1.EffectiveRateOfReturn, T11.LovDescFirstTaskOwner, T1.DownPayBank, T1.DownPaySupl, T7.FinDivision AS LovDescFinDivisionName, T1.GraceTerms, 
                      T14.FacilityType, T15.CustShrtName AS lovDescCustShrtName, T16.BranchDesc AS lovDescFinBranchName, T17.CustTypeCtg AS lovDescCustCtgTypeName, 
                      T1.TotalGrossGrcPft, T1.GrcProfitDaysBasis, T1.StepFinance,T1.StepType, T1.StepPolicy, T1.AlwManualSteps, T1.NoOfSteps, 
                      T1.TakafulRequired, T1.TakafulFrq, T1.WaiverReason, T1.TakafulRate, T1.TakafulRef, T1.LinkedFinRef, T7. Product AS LovDescFinProduct, 
                      T2.CcyEditField ReportFormat, T1.GrcMinRate, T1.GrcMaxRate, T1.RpyMinRate, T1.RpyMaxRate, T1.PptTakafulRequired, T1.PptTakafulFrq, T1.PptWaiverReason, 
                      T1.PptTakafulRate, T1.PptTakafulRef, T1.ManualSchedule, T1.TakeOverFinance, T1.GrcAdvBaseRate, T1.GrcAdvMargin, T1.GrcAdvPftRate, T1.RpyAdvBaseRate, 
                      T1.RpyAdvMargin, T1.RpyAdvPftRate, T18.BRTypeDesc GrcAdvBaseRateDesc, T19.BRTypeDesc RpyAdvBaseRateDesc, T1.SupplementRent, T1.IncreasedCost, 
                      T1.CreditInsAmt, T1.feeAccountId, T1.TDSApplicable,T1.InsuranceAmt,T1.DeductInsDisb,
                      T1.AlwBPI , T1.BpiTreatment , T1.PlanEMIHAlw , T1.PlanEMIHMethod ,  T1.PlanEMIHMaxPerYear , T1.PlanEMIHMax , T1.PlanEMIHLockPeriod , T1.PlanEMICpz , T1.CalRoundingMode , T1.AlwMultiDisb
FROM         dbo.WIFFinanceMain_Temp AS T1 LEFT OUTER JOIN
                      dbo.WIFIndicativeTermDetail_Temp AS T14 ON T14.FinReference = T1.FinReference LEFT OUTER JOIN
                      dbo.Customers AS T15 ON T15.CustID = T1.CustID LEFT OUTER JOIN
                      dbo.RMTCurrencies AS T2 ON T1.FinCcy = T2.CcyCode INNER JOIN
                      dbo.BMTSchdMethod AS T3 ON T1.ScheduleMethod = T3.SchdMethod INNER JOIN
                      dbo.BMTIntRateBasisCodes AS T4 ON T1.ProfitDaysBasis = T4.IntRateBasisCode LEFT OUTER JOIN
                      dbo.RMTBaseRateCodes AS T5 ON T1.GraceBaseRate = T5.BRType LEFT OUTER JOIN
                      dbo.RMTSplRateCodes AS T6 ON T1.GraceSpecialRate = T6.SRType INNER JOIN
                      dbo.RMTFinanceTypes AS T7 ON T1.FinType = T7.FinType LEFT OUTER JOIN
                      dbo.RMTBaseRateCodes AS T8 ON T1.RepayBaseRate = T8.BRType LEFT OUTER JOIN
                      dbo.RMTSplRateCodes AS T9 ON T1.RepaySpecialRate = T9.SRType LEFT OUTER JOIN
                      dbo.LMTFinanceWorkFlowDef_AView AS T11 ON T7.FinType = T11.FinType AND T11.FinEvent = 'Origination' LEFT OUTER JOIN
                      dbo.RMTBaseRateCodes AS T12 ON T1.IndBaseRate = T12.BRType LEFT OUTER JOIN
                      dbo.RMTBaseRateCodes AS T13 ON T1.GrcIndBaseRate = T13.BRType LEFT OUTER JOIN
                      dbo.RMTBranches AS T16 ON T1.FinBranch = T16.BranchCode LEFT OUTER JOIN
                      dbo.RMTCustTypes AS T17 ON T17.CustTypeCode = T15.CustTypeCode LEFT OUTER JOIN
                      dbo.RMTBaseRateCodes AS T18 ON T1.GrcAdvBaseRate = T18.BRType LEFT OUTER JOIN
                      dbo.RMTBaseRateCodes AS T19 ON T1.RpyAdvBaseRate = T19.BRType
UNION ALL
SELECT     T1.FinReference, T1.NumberOfTerms, T1.GrcPeriodEndDate, T1.AllowGrcPeriod, T1.GraceBaseRate, T1.GraceSpecialRate, T1.GrcPftRate, T1.GrcPftFrq, 
                      T1.NextGrcPftDate, T1.AllowGrcPftRvw, T1.GrcPftRvwFrq, T1.NextGrcPftRvwDate, T1.AllowGrcCpz, T1.GrcCpzFrq, T1.NextGrcCpzDate, T1.RepayBaseRate, 
                      T1.RepaySpecialRate, T1.RepayProfitRate, T1.RepayFrq, T1.NextRepayDate, T1.RepayPftFrq, T1.NextRepayPftDate, T1.AllowRepayRvw, T1.RepayRvwFrq, 
                      T1.NextRepayRvwDate, T1.AllowRepayCpz, T1.RepayCpzFrq, T1.NextRepayCpzDate, T1.MaturityDate, T1.CpzAtGraceEnd, T1.DownPayment, T1.GraceFlatAmount, 
                      T1.ReqRepayAmount, T1.TotalProfit, T1.TotalCpz, T1.TotalGrossPft, T1.TotalGracePft, T1.TotalGraceCpz, T1.GrcRateBasis, T1.RepayRateBasis, T1.FinType, 
                      T1.FinRemarks, T1.FinCcy, T1.ScheduleMethod, T1.ProfitDaysBasis, T1.ReqMaturity, T1.CalTerms, T1.CalMaturity, T1.FirstRepay, T1.LastRepay, T1.FinStartDate, 
                      T1.FinAmount, T1.FinRepaymentAmount, T1.CustID, T1.Defferments, T1.PlanDeferCount, T1.FinIsActive, T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, 
                      T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId, T2.CcyDesc AS lovDescFinCcyName, T15.CustCIF AS lovDescCustCIF, 
                      T3.SchdMethodDesc AS lovDescScheduleMethodName, T4.IntRateBasisDesc AS lovDescProfitDaysBasisName, T5.BRTypeDesc AS lovDescGraceBaseRateName, 
                      T6.SRTypeDesc AS lovDescGraceSpecialRateName, T7.FinTypeDesc AS lovDescFinTypeName, T8.BRTypeDesc AS lovDescRepayBaseRateName, 
                      T9.SRTypeDesc AS lovDescRepaySpecialRateName, T2.CcyEditField AS lovDescFinFormatter, T7.FinIsAlwMD AS lovDescFinIsAlwMD, T1.FinBranch, T1.FinSourceID, 
                      T1.AllowedDefRpyChange, T1.AvailedDefRpyChange, T1.AllowedDefFrqChange, T1.AvailedDefFrqChange, T7.FinMaxAmount AS lovDescFinMaxAmt, 
                      T7.FinMinAmount AS lovDescFinMinAmount, T7.FinIsAlwDifferment AS lovDescFinAlwDeferment, T1.MinDownpayPerc, 
                      T7.FinIsDwPayRequired AS lovDescDwnPayReq, T1.RecalType, T1.FinAssetValue, T7.FinMaxDifferment AS lovDescFinMaxDifferment, T1.LastRepayDate, 
                      T1.LastRepayPftDate, T1.LastRepayRvwDate, T1.LastRepayCpzDate, T1.DisbAccountId, T1.RepayAccountId, T11.ScreenCode AS lovDescScreenCode, T1.AllowGrcRepay, 
                      T1.GrcSchdMthd, T1.RepayMargin, T1.GrcMargin, T1.DepreciationFrq, T1.FinCommitmentRef, T1.FinCurrAssetValue, T1.FinContractDate, T1.NextDepDate, 
                      T1.LastDepDate, T1.FinAccount, T1.FinCustPftAccount, T1.AlwIndRate, T1.IndBaseRate, T1.GrcAlwIndRate, T1.GrcIndBaseRate, 
                      T12.BRTypeDesc AS lovDescIndBaseRateName, T13.BRTypeDesc AS lovDescGrcIndBaseRateName, T7.FinRvwRateApplFor, T7.FinGrcRvwRateApplFor, 
                      T1.TotalRepayAmt, T1.ClosingStatus, T1.FinApprovedDate, T7.FinCategory AS lovDescProductCodeName, T1.FinRepayPftOnFrq, T1.AnualizedPercRate, 
                      T1.EffectiveRateOfReturn, T11.LovDescFirstTaskOwner, T1.DownPayBank, T1.DownPaySupl, T7.FinDivision AS LovDescFinDivisionName, T1.GraceTerms, 
                      T14.FacilityType, T15.CustShrtName AS lovDescCustShrtName, T16.BranchDesc AS lovDescFinBranchName, T17.CustTypeCtg AS lovDescCustCtgTypeName, 
                      T1.TotalGrossGrcPft, T1.GrcProfitDaysBasis, T1.StepFinance,T1.StepType, T1.StepPolicy, T1.AlwManualSteps, T1.NoOfSteps,  
                      T1.TakafulRequired, T1.TakafulFrq, T1.WaiverReason, T1.TakafulRate, T1.TakafulRef, T1.LinkedFinRef, T7. Product AS LovDescFinProduct, 
                      T2.CcyEditField ReportFormat, T1.GrcMinRate, T1.GrcMaxRate, T1.RpyMinRate, T1.RpyMaxRate, T1.PptTakafulRequired, T1.PptTakafulFrq, T1.PptWaiverReason, 
                      T1.PptTakafulRate, T1.PptTakafulRef, T1.ManualSchedule, T1.TakeOverFinance, T1.GrcAdvBaseRate, T1.GrcAdvMargin, T1.GrcAdvPftRate, T1.RpyAdvBaseRate, 
                      T1.RpyAdvMargin, T1.RpyAdvPftRate, T18.BRTypeDesc GrcAdvBaseRateDesc, T19.BRTypeDesc RpyAdvBaseRateDesc, T1.SupplementRent, T1.IncreasedCost, 
                      T1.CreditInsAmt, T1.feeAccountId, T1.TDSApplicable,T1.InsuranceAmt,T1.DeductInsDisb,
                      T1.AlwBPI , T1.BpiTreatment , T1.PlanEMIHAlw , T1.PlanEMIHMethod ,  T1.PlanEMIHMaxPerYear , T1.PlanEMIHMax , T1.PlanEMIHLockPeriod , T1.PlanEMICpz , T1.CalRoundingMode , T1.AlwMultiDisb
FROM         dbo.WIFFinanceMain AS T1 LEFT OUTER JOIN
                      dbo.WIFIndicativeTermDetail AS T14 ON T14.FinReference = T1.FinReference LEFT OUTER JOIN
                      dbo.Customers AS T15 ON T15.CustID = T1.CustID LEFT OUTER JOIN
                      dbo.RMTCurrencies AS T2 ON T1.FinCcy = T2.CcyCode INNER JOIN
                      dbo.BMTSchdMethod AS T3 ON T1.ScheduleMethod = T3.SchdMethod INNER JOIN
                      dbo.BMTIntRateBasisCodes AS T4 ON T1.ProfitDaysBasis = T4.IntRateBasisCode LEFT OUTER JOIN
                      dbo.RMTBaseRateCodes AS T5 ON T1.GraceBaseRate = T5.BRType LEFT OUTER JOIN
                      dbo.RMTSplRateCodes AS T6 ON T1.GraceSpecialRate = T6.SRType INNER JOIN
                      dbo.RMTFinanceTypes AS T7 ON T1.FinType = T7.FinType LEFT OUTER JOIN
                      dbo.RMTBaseRateCodes AS T8 ON T1.RepayBaseRate = T8.BRType LEFT OUTER JOIN
                      dbo.RMTSplRateCodes AS T9 ON T1.RepaySpecialRate = T9.SRType LEFT OUTER JOIN
                      dbo.LMTFinanceWorkFlowDef_AView AS T11 ON T7.FinType = T11.FinType AND T11.FinEvent = 'Origination' LEFT OUTER JOIN
                      dbo.RMTBaseRateCodes AS T12 ON T1.IndBaseRate = T12.BRType LEFT OUTER JOIN
                      dbo.RMTBaseRateCodes AS T13 ON T1.GrcIndBaseRate = T13.BRType LEFT OUTER JOIN
                      dbo.RMTBranches AS T16 ON T1.FinBranch = T16.BranchCode LEFT OUTER JOIN
                      dbo.RMTCustTypes AS T17 ON T17.CustTypeCode = T15.CustTypeCode LEFT OUTER JOIN
                      dbo.RMTBaseRateCodes AS T18 ON T1.GrcAdvBaseRate = T18.BRType LEFT OUTER JOIN
                      dbo.RMTBaseRateCodes AS T19 ON T1.RpyAdvBaseRate = T19.BRType
		

		</createView>
		</changeSet>
		
		<changeSet author="Siva" id="56">
		<update tableName="FinanceMain">
			<column name="AlwBPI">0</column>
			<column name="PlanEMIHAlw">0</column>
			<column name="PlanEMIHMaxPerYear">0</column>
			<column name="PlanEMIHMax">0</column>
			<column name="PlanEMIHLockPeriod">0</column>
			<column name="PlanEMICpz">0</column>
			<column name="CalRoundingMode">HALF_DOWN</column>
			<column name="AlwMultiDisb">0</column>
		</update>
		</changeSet>
		
		<changeSet author="Siva" id="57">
		<update tableName="FinanceMain_Temp">
			<column name="AlwBPI">0</column>
			<column name="PlanEMIHAlw">0</column>
			<column name="PlanEMIHMaxPerYear">0</column>
			<column name="PlanEMIHMax">0</column>
			<column name="PlanEMIHLockPeriod">0</column>
			<column name="PlanEMICpz">0</column>
			<column name="CalRoundingMode">HALF_DOWN</column>
			<column name="AlwMultiDisb">0</column>
		</update>
		</changeSet>
		
		<changeSet author="Siva" id="58">
		<update tableName="WIFFinanceMain_Temp">
			<column name="AlwBPI">0</column>
			<column name="PlanEMIHAlw">0</column>
			<column name="PlanEMIHMaxPerYear">0</column>
			<column name="PlanEMIHMax">0</column>
			<column name="PlanEMIHLockPeriod">0</column>
			<column name="PlanEMICpz">0</column>
			<column name="CalRoundingMode">HALF_DOWN</column>
			<column name="AlwMultiDisb">0</column>
		</update>
		</changeSet>
		
		<changeSet author="Siva" id="59">
		<update tableName="WIFFinanceMain">
			<column name="AlwBPI">0</column>
			<column name="PlanEMIHAlw">0</column>
			<column name="PlanEMIHMaxPerYear">0</column>
			<column name="PlanEMIHMax">0</column>
			<column name="PlanEMIHLockPeriod">0</column>
			<column name="PlanEMICpz">0</column>
			<column name="CalRoundingMode">HALF_DOWN</column>
			<column name="AlwMultiDisb">0</column>
		</update>
		</changeSet>
		
	<changeSet author="Madhubabu" id="60">
	<dropPrimaryKey tableName="fininsurances_temp"
		constraintName="PK_FinInsurances_Temp" />
	</changeSet>
	<changeSet author="Madhubabu" id="61">
		<dropPrimaryKey tableName="fininsurances"
			constraintName="PK_FinInsurances" />
	</changeSet>
	<changeSet author="Madhubabu" id="62">
		<addUniqueConstraint columnNames="Reference,Module,InsuranceType,InsReference"
			constraintName="UK_FinInsurances_Temp" deferrable="true" disabled="true"
			initiallyDeferred="true" tableName="fininsurances_temp" />
	</changeSet>
	<changeSet author="Madhubabu" id="63">
		<addUniqueConstraint columnNames="Reference,Module,InsuranceType,InsReference"
			constraintName="UK_FinInsurances" deferrable="true" disabled="true"
			initiallyDeferred="true" tableName="fininsurances" />
	</changeSet>

	<changeSet author="Madhubabu" id="64">
		<addColumn tableName="fininsurances_temp">
			<column name="InsId" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet author="Madhubabu" id="65">
		<addColumn tableName="fininsurances">
			<column name="InsId" type="bigint" />
		</addColumn>
	</changeSet>
	
	<changeSet author="Madhubabu" id="66">
		<addNotNullConstraint tableName="fininsurances_temp"
			columnName="InsId" columnDataType="bigint" />
	</changeSet>
	<changeSet author="Madhubabu" id="67">
		<addNotNullConstraint tableName="fininsurances"
			columnName="InsId" columnDataType="bigint" />
	</changeSet>
	<changeSet author="Madhubabu" id="68">
		<addPrimaryKey columnNames="InsId" constraintName="pk_finins_temp_InsId"
			tableName="fininsurances_temp" />
	</changeSet>
	<changeSet author="Madhubabu" id="69">
		<addPrimaryKey columnNames="InsId" constraintName="pk_finins_InsId"
			tableName="fininsurances" />
	</changeSet>
	<changeSet author="Madhubabu" id="70">
		<delete tableName="FINSCHFRQINSURANCE_TEMP">
		</delete>
	</changeSet>
	<changeSet author="Madhubabu" id="71">
		<delete tableName="FINSCHFRQINSURANCE">
		</delete>
	</changeSet>
     <changeSet author="Madhubabu" id="72">
		<dropPrimaryKey tableName="FinSchFrqInsurance_temp"
			constraintName="PK_FINSCHFRQINSURANCE_TEMP" />
	</changeSet>
	
	<changeSet author="Madhubabu" id="73">
		<dropPrimaryKey tableName="FinSchFrqInsurance"
			constraintName="PK_FINSCHFRQINSURANCE" />
	</changeSet>
	<changeSet author="Madhubabu" id="74">
		<dropForeignKeyConstraint baseTableName="FinSchFrqInsurance_temp"
			constraintName="FK_FinSchFrqIns_temp_InsuranceType" />
	</changeSet>
	<changeSet author="Madhubabu" id="75">
		<dropForeignKeyConstraint baseTableName="FinSchFrqInsurance"
			constraintName="FK_FinSchFrqInsurance_InsuranceType" />
	</changeSet>
	<changeSet author="Madhubabu" id="76">
		<dropColumn columnName="Reference" tableName="FinSchFrqInsurance_temp" />
		<dropColumn columnName="Module" tableName="FinSchFrqInsurance_temp" />
		<dropColumn columnName="InsuranceType" tableName="FinSchFrqInsurance_temp" />
		<dropColumn columnName="InsReference" tableName="FinSchFrqInsurance_temp" />
		
		<dropColumn columnName="Reference" tableName="FinSchFrqInsurance" />
		<dropColumn columnName="Module" tableName="FinSchFrqInsurance" />
		<dropColumn columnName="InsuranceType" tableName="FinSchFrqInsurance" />
		<dropColumn columnName="InsReference" tableName="FinSchFrqInsurance" />
	</changeSet>	
	<changeSet author="Madhubabu" id="77">
		<addColumn tableName="FinSchFrqInsurance_Temp">
			<column name="InsId" type="bigint" />
		</addColumn>
	</changeSet>
	<changeSet author="Madhubabu" id="78">
		<addNotNullConstraint tableName="FinSchFrqInsurance_Temp"
			columnName="InsId" columnDataType="bigint" />
	</changeSet>
	<changeSet author="Madhubabu" id="79">
		<addPrimaryKey columnNames="InsId" constraintName="pk_FinSchFrqInsurance_temp_InsId"
			tableName="FinSchFrqInsurance_Temp" />
	</changeSet>
	
	<changeSet author="Madhubabu" id="80">
		<addColumn tableName="FinSchFrqInsurance">
			<column name="InsId" type="bigint" />
		</addColumn>
	</changeSet>
	<changeSet author="Madhubabu" id="81">
		<addNotNullConstraint tableName="FinSchFrqInsurance"
			columnName="InsId" columnDataType="bigint" />
	</changeSet>
	<changeSet author="Madhubabu" id="82">
		<addPrimaryKey columnNames="InsId" constraintName="pk_FinSchFrqInsurance_InsId"
			tableName="FinSchFrqInsurance" />
	</changeSet>
	<changeSet author="Madhubabu" id="85">
	<createTable tableName="SeqFinInsurance">
		<column name="SeqNo" type="bigint"/>			
	</createTable>
	</changeSet>		
	<changeSet author="Madhubabu" id="86" >
	<insert tableName="SeqFinInsurance">
		<column name="SeqNo">1</column>
	</insert>
    </changeSet>
   
    <changeSet author="Madhubabu" id="87" >
    <createView replaceIfExists="true" viewName="FinInsurances_TView">
    SELECT  T1.Reference, T1.Module,T1.InsuranceType,T2.insuranceTypeDesc,T1.InsReference,T1.InsuranceReq,T1.Provider,T3.TakafulName providerName,T1.PaymentMethod,T1.CalType,T1.InsuranceRate,
            T1.WaiverReason,T1.InsuranceFrq,T1.Amount,T1.CalRule,T1.CalPerc,T1.CalOn,T1.InsuranceStatus,
            T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId
    FROM     FinInsurances_Temp T1 INNER JOIN
             InsuranceType T2 ON T2.InsuranceType=T1.InsuranceType LEFT OUTER JOIN
             TakafulProvider T3 ON T1.provider=T3.TakafulCode
    </createView>
    </changeSet>
    
    <changeSet author="Madhubabu" id="88" >
    <createView replaceIfExists="true" viewName="FinInsurances_View">
   SELECT  T1.InsId,T1.Reference, T1.Module,T1.InsuranceType,T2.insuranceTypeDesc,T1.InsReference,T1.InsuranceReq,T1.Provider,T3.TakafulName ProviderName,T1.PaymentMethod,T1.CalType,T1.InsuranceRate,
   T1.WaiverReason,T1.InsuranceFrq,T1.Amount,T1.CalRule,T1.CalPerc,T1.CalOn,T1.InsuranceStatus,
   T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId
   FROM         FinInsurances_Temp T1 INNER JOIN
             InsuranceType T2 ON T2.InsuranceType=T1.InsuranceType LEFT OUTER JOIN
             TakafulProvider T3 ON T1.provider=T3.TakafulCode
			 
UNION ALL

  SELECT  T1.InsId,T1.Reference, T1.Module,T1.InsuranceType,T2.insuranceTypeDesc,T1.InsReference,T1.InsuranceReq,T1.Provider,T3.TakafulName ProviderName,T1.PaymentMethod,T1.CalType,T1.InsuranceRate,
  T1.WaiverReason,T1.InsuranceFrq,T1.Amount,T1.CalRule,T1.CalPerc,T1.CalOn,T1.InsuranceStatus,
  T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId
  FROM         FinInsurances T1 INNER JOIN
               InsuranceType T2 ON T2.InsuranceType=T1.InsuranceType LEFT OUTER JOIN
               TakafulProvider T3 ON T1.provider=T3.TakafulCode

WHERE     NOT EXISTS
                          (SELECT     1
                            FROM      FinInsurances_Temp
                            WHERE     Reference= T1.Reference AND  Module = T1.Module
							AND       InsuranceType=T1.InsuranceType AND InsReference=T1.InsReference)
    </createView>
    </changeSet>
    
    <changeSet author="Madhubabu" id="89" >
    <createView replaceIfExists="true" viewName="FinInsurances_TView">
    SELECT T1.InsId,T1.Reference, T1.Module,T1.InsuranceType,T2.insuranceTypeDesc,T1.InsReference,T1.InsuranceReq,T1.Provider,T3.TakafulName providerName,T1.PaymentMethod,T1.CalType,T1.InsuranceRate,
            T1.WaiverReason,T1.InsuranceFrq,T1.Amount,T1.CalRule,T1.CalPerc,T1.CalOn,T1.InsuranceStatus,
            T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId
    FROM     FinInsurances_Temp T1 INNER JOIN
             InsuranceType T2 ON T2.InsuranceType=T1.InsuranceType LEFT OUTER JOIN
             TakafulProvider T3 ON T1.provider=T3.TakafulCode
    </createView>
    </changeSet>
     <changeSet author="Madhubabu" id="90" >
    <createView replaceIfExists="true" viewName="FinSchFrqInsurance_TView">
    SELECT T1.InsId,T3.Reference,T3.Module,T3.InsuranceType,T3.Insreference,T2.ClosingBalance, T1.InsSchDate, T1.InsuranceRate, T1.InsuranceFrq,T1.Amount,T1.Version, T1.LastMntBy, T1.LastMntOn,T1.RecordStatus,T1.RoleCode,T1.NextRoleCode, 
          T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId
     FROM FinSchFrqInsurance_Temp T1 inner join
          finscheduledetails T2 ON T2.SchDate = T1.InsSchDate Inner join
          FinInsurances_Temp T3 ON T3.InsId = T1.InsId
    </createView>
    </changeSet>
    
     <changeSet author="Madhubabu" id="91" >
    <createView replaceIfExists="true" viewName="FinSchFrqInsurance_View">
    SELECT T1.InsId,T3.Reference,T3.Module,T3.InsuranceType,T3.Insreference,T2.ClosingBalance, T1.InsSchDate, T1.InsuranceRate, T1.InsuranceFrq,T1.Amount,T1.Version, T1.LastMntBy, T1.LastMntOn,T1.RecordStatus,T1.RoleCode,T1.NextRoleCode, 
          T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId
     FROM FinSchFrqInsurance_Temp T1 inner join
          finscheduledetails_Temp T2 ON T2.SchDate = T1.InsSchDate Inner join
          FinInsurances_Temp T3 ON T3.InsId = T1.InsId


UNION ALL

SELECT T1.InsId,T3.Reference,T3.Module,T3.InsuranceType,T3.Insreference,T2.ClosingBalance, T1.InsSchDate, T1.InsuranceRate, T1.InsuranceFrq,T1.Amount,T1.Version, T1.LastMntBy, T1.LastMntOn,T1.RecordStatus,T1.RoleCode,T1.NextRoleCode, 
          T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId
     FROM FinSchFrqInsurance T1 inner join
          finscheduledetails T2 ON T2.SchDate = T1.InsSchDate Inner join
          FinInsurances T3 ON T3.InsId = T1.InsId


WHERE     NOT EXISTS
                          (SELECT     1
                            FROM       FinSchFrqInsurance_Temp
                            WHERE      InsId = T1.InsId and InsSchDate =T1.InsSchDate)
    
    </createView>
    </changeSet>
    
     <changeSet author="Madhubabu" id="92" >
    <createView replaceIfExists="true" viewName="FinSchFrqInsurance_TView">
    SELECT T1.InsId,T3.Reference,T3.Module,T3.InsuranceType,T3.Insreference,T2.ClosingBalance, T1.InsSchDate, T1.InsuranceRate, T1.InsuranceFrq,T1.Amount,T1.Version, T1.LastMntBy, T1.LastMntOn,T1.RecordStatus,T1.RoleCode,T1.NextRoleCode, 
          T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId
     FROM FinSchFrqInsurance_Temp T1 inner join
          finscheduledetails_temp T2 ON T2.SchDate = T1.InsSchDate Inner join
          FinInsurances_Temp T3 ON T3.InsId = T1.InsId
    </createView>
    </changeSet>
    
    	<changeSet author="DDP" id="83">
		<addColumn tableName="RejectDocumentDetails">
			<column name="DocPurpose" type="varchar(50)" />
			<column name="DocUri" type="varchar(2000)" />
		</addColumn>
	</changeSet>
		
	<changeSet author="DDP" id="84">
		<addColumn tableName="DocumentDetails_PA">
			<column name="DocPurpose" type="varchar(50)" />
			<column name="DocUri" type="varchar(2000)" />
		</addColumn>
	</changeSet>
	<changeSet author="DDP" id="93">
		<addDefaultValue tableName="ErrorDetails"
			defaultValueDate="CURRENT_TIMESTAMP" columnName="LastMntOn"
			columnDataType="datetime" />
	</changeSet>
	<changeSet author="DDP" id="94">
		<insert tableName="ErrorDetails">
			<column name="ErrorCode">90222</column>
			<column name="ErrorLanguage">EN</column>
			<column name="ErrorSeverity">E</column>
			<column name="ErrorMessage">No promotion types exists with code {0}.</column>
			<column name="ErrorExtendedMessage"></column>
			<column name="RecordStatus">Approved</column>
			<column name="RoleCode"></column>
			<column name="NextRoleCode"></column>
			<column name="TaskId"></column>
			<column name="NextTaskId"></column>
			<column name="RecordType"></column>
			<column name="WorkflowId">0</column>
			<column name="LastMntOn"></column>
			<column name="LastMntBy">1000</column>
			<column name="Version">0</column>
		</insert>
		<insert tableName="ErrorDetails">
			<column name="ErrorCode">90223</column>
			<column name="ErrorLanguage">EN</column>
			<column name="ErrorSeverity">E</column>
			<column name="ErrorMessage">Only referential rate allowed for rate basis: {0}.</column>
			<column name="ErrorExtendedMessage"></column>
			<column name="RecordStatus">Approved</column>
			<column name="RoleCode"></column>
			<column name="NextRoleCode"></column>
			<column name="TaskId"></column>
			<column name="NextTaskId"></column>
			<column name="RecordType"></column>
			<column name="WorkflowId">0</column>
			<column name="LastMntOn"></column>
			<column name="LastMntBy">1000</column>
			<column name="Version">0</column>
		</insert>
		<insert tableName="ErrorDetails">
			<column name="ErrorCode">90224</column>
			<column name="ErrorLanguage">EN</column>
			<column name="ErrorSeverity">E</column>
			<column name="ErrorMessage">Invalid {0} code {1}.</column>
			<column name="ErrorExtendedMessage"></column>
			<column name="RecordStatus">Approved</column>
			<column name="RoleCode"></column>
			<column name="NextRoleCode"></column>
			<column name="TaskId"></column>
			<column name="NextTaskId"></column>
			<column name="RecordType"></column>
			<column name="WorkflowId">0</column>
			<column name="LastMntOn"></column>
			<column name="LastMntBy">1000</column>
			<column name="Version">0</column>
		</insert>
		<insert tableName="ErrorDetails">
			<column name="ErrorCode">90402</column>
			<column name="ErrorLanguage">EN</column>
			<column name="ErrorSeverity">E</column>
			<column name="ErrorMessage">{0} is mandatory for custCategory {1}.</column>
			<column name="ErrorExtendedMessage"></column>
			<column name="RecordStatus">Approved</column>
			<column name="RoleCode"></column>
			<column name="NextRoleCode"></column>
			<column name="TaskId"></column>
			<column name="NextTaskId"></column>
			<column name="RecordType"></column>
			<column name="WorkflowId">0</column>
			<column name="LastMntOn"></column>
			<column name="LastMntBy">1000</column>
			<column name="Version">0</column>
		</insert>
	</changeSet>
	<changeSet author="Irfan" id="95">
	<addColumn tableName="FinanceMain">
		<column name="ApplicationNo" type="nvarchar(50)"/>
	</addColumn>
	</changeSet>
	<changeSet author="Irfan" id="96">
	<addColumn tableName="FinanceMain_Temp">
		<column name="ApplicationNo" type="nvarchar(50)"/>
	</addColumn>
	</changeSet>
	<changeSet author="Irfan" id="97" >
		<addColumn tableName="RejectFinanceMain">
		<column name="ApplicationNo" type="nvarchar(50)"/>
		</addColumn>
	</changeSet>
	<changeSet  author="Irfan" id="98">
	<createView replaceIfExists="true" viewName="FinanceMain_View">
	SELECT     T1.FinReference, T1.InvestmentRef, T1.NumberOfTerms, T1.GrcPeriodEndDate, T1.AllowGrcPeriod, T1.GraceBaseRate, T1.GraceSpecialRate, T1.GrcPftRate, 
                      T1.GrcPftFrq, T1.NextGrcPftDate, T1.AllowGrcPftRvw, T1.GrcPftRvwFrq, T1.NextGrcPftRvwDate, T1.AllowGrcCpz, T1.GrcCpzFrq, T1.NextGrcCpzDate, 
                      T1.RepayBaseRate, T1.RepaySpecialRate, T1.RepayProfitRate, T1.RepayFrq, T1.NextRepayDate, T1.RepayPftFrq, T1.NextRepayPftDate, T1.AllowRepayRvw, 
                      T1.RepayRvwFrq, T1.NextRepayRvwDate, T1.AllowRepayCpz, T1.RepayCpzFrq, T1.NextRepayCpzDate, T1.MaturityDate, T1.CpzAtGraceEnd, T1.DownPayment, 
                      T1.GraceFlatAmount, T1.ReqRepayAmount, T1.TotalProfit, T1.TotalCpz, T1.TotalGrossPft, T1.TotalGrossGrcPft, T1.TotalGracePft, T1.TotalGraceCpz, T1.GrcRateBasis, 
                      T1.RepayRateBasis, T1.FinType, T1.FinRemarks, T1.FinCcy, T1.ScheduleMethod, T1.ProfitDaysBasis, T1.ReqMaturity, T1.CalTerms, T1.CalMaturity, T1.FirstRepay, 
                      T1.LastRepay, T1.FinStartDate, T1.FinAmount, T1.FinAmount + T1.FeeChargeAmt - T1.DownPayment lovDescFinancingAmount, T1.FinRepaymentAmount, T1.CustID, 
                      T1.Defferments, T1.PlanDeferCount, T1.FinBranch, T1.FinSourceID, T1.AllowedDefRpyChange, T1.AvailedDefRpyChange, T1.AllowedDefFrqChange, 
                      T1.AvailedDefFrqChange, T1.RecalType, T1.FinAssetValue, T1.DisbAccountId, T1.RepayAccountId, T1.FinIsActive, T1.LimitValid, T1.OverrideLimit, T1.SecurityDeposit, 
                      T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId, 
                      T2.CcyDesc lovDescFinCcyName, T3.SchdMethodDesc lovDescScheduleMethodName, T4.IntRateBasisDesc lovDescProfitDaysBasisName, 
                      T5.BRTypeDesc lovDescGraceBaseRateName, T6.SRTypeDesc lovDescGraceSpecialRateName, T7.FinTypeDesc lovDescFinTypeName, 
                      T8.BRTypeDesc lovDescRepayBaseRateName, T9.SRTypeDesc lovDescRepaySpecialRateName, T2.CcyEditField lovDescFinFormatter, 
                      T7.FinIsAlwMD lovDescFinIsAlwMD, T7.FinMaxAmount lovDescFinMaxAmt, T7.FinMinAmount lovDescFinMinAmount, T1.MinDownpayPerc, 
                      T7.FinIsAlwDifferment lovDescFinAlwDeferment, T7.FinIsDwPayRequired lovDescDwnPayReq, T7.FinMaxDifferment lovDescFinMaxDifferment, 
                      T10.CustCIF lovDescCustCIF, T10.CustFName lovDescCustFName, T10.CustLName lovDescCustLName, T12.BranchDesc lovDescFinBranchName, T1.LastRepayDate, 
                      T1.LastRepayPftDate, T1.LastRepayRvwDate, T1.LastRepayCpzDate,  
                      T1.AllowGrcRepay, T1.GrcSchdMthd, T1.GrcMargin, T1.RepayMargin, T1.FinCurrAssetValue, T1.FinCommitmentRef, T1.FinLimitRef,
                      T1.DepreciationFrq, T1.FinContractDate, T13.SaluationDesc lovDescSalutationName, T10.CustShrtName lovDescCustShrtName, 
                      T10.CustCoreBank lovDescCustCoreBank, T1.NextDepDate, T1.LastDepDate, T1.FinAccount, T1.FinCustPftAccount, T1.AlwIndRate, T1.IndBaseRate, T1.GrcAlwIndRate, 
                      T1.GrcIndBaseRate, T15.BRTypeDesc lovDescIndBaseRateName, T16.BRTypeDesc lovDescGrcIndBaseRateName, T17.AcrTillLBD lovDescAccruedTillLBD, 
                      T7.FinRvwRateApplFor, T7.FinGrcRvwRateApplFor, T1.TotalRepayAmt, T7.FinCategory lovDescProductCodeName, T10.CustCtgCode lovDescCustCtgCode, 
                      T1.ClosingStatus, T1.FinApprovedDate, T1.FeeChargeAmt, T1.Blacklisted, T1.FinRepayPftOnFrq, T1.AnualizedPercRate, T1.EffectiveRateOfReturn, 
                      T19.CmtTitle lovDescCommitmentRefName, T31.LimitDesc lovDescLimitRefName, T1.MigratedFinance, T1.ScheduleMaintained, 
                      T1.ScheduleRegenerated, T1.FinPurpose, T20.ValueDesc lovDescFinPurposeName, T1.FinStatus, T1.FinStsReason, T1.InitiateUser, T1.BankName, T1.iban, 
                      T1.AccountType, T1.DdaReferenceNo, T7.FinScheduleOn LovDescFinScheduleOn, T1.CustDSR, T1.Authorization1, T1.Authorization2, 
                      T21.AuthName lovDescAuthorization1Name, T22.AuthName lovDescAuthorization2Name, T1.JointAccount, T1.JointCustId, 
                      T23.CustShrtName lovDescJointCustShrtName, T23.CustCIF lovDescJointCustCIF, '0' AvailCommitAmount, T1.DownPayBank, T1.DownPaySupl, T1.DownPayAccount, 
                      T1.SecurityCollateral, T1.CustomerAcceptance, T1.Approved, T1.CbbApprovalRequired, T1.CbbApproved, T1.Discrepancy, T1.LimitApproved, T1.GraceTerms, 
                      T7.FinDivision lovDescFinDivision, T1.RcdMaintainSts, T1.FinRepayMethod, T1.GrcProfitDaysBasis, T1.StepFinance,T1.StepType, T1.StepPolicy, T1.AlwManualSteps, 
                      T1.NoOfSteps, T1.TakafulFrq, T1.TakafulRate, T1.WaiverReason, T1.TakafulRef, T1.TakafulRequired, 
                      T1.LinkedFinRef, T1.NextUserId, T1.Priority, T24.PolicyDesc LovDescStepPolicyName, T1.GrcMinRate, T1.GrcMaxRate, T1.RpyMinRate, T1.RpyMaxRate, 
                      T2.CcyEditField ReportFormat, T1.DeviationApproval, T1.PptTakafulRequired, T1.PptTakafulFrq, T1.PptWaiverReason, T1.PptTakafulRate, T1.PptTakafulRef, 
                      T1.ManualSchedule, T1.TakeOverFinance, T1.GrcAdvBaseRate, T1.GrcAdvMargin, T1.GrcAdvPftRate, T1.RpyAdvBaseRate, T1.RpyAdvMargin, T1.RpyAdvPftRate, 
                      T25.BRTypeDesc GrcAdvBaseRateDesc, T26.BRTypeDesc RpyAdvBaseRateDesc, T1.SupplementRent, T1.IncreasedCost, T1.CreditInsAmt, T1.RolloverFrq, 
                      T1.NextRolloverDate, T27.CustStsDescription, T1.ShariaStatus, T1.InitiateDate, T1.FINPREAPPROVEDREF, T1.MMAId, T1.AccountsOfficer, 
                      T1.feeAccountId, T1.FinCancelAc,T29.AgreeName, T28.GenDeptDesc lovDescAccountsOfficer,T1.DSACode,T30.ROfficerDesc DSACodeDesc,
					  T29.MMAReference as LovDescMMAReference,T1.TDSApplicable,T1.TakafulStatus, T32.ProductCategory,T1.MandateID,T1.DroplineFrq,T1.FirstDroplineDate,T1.PftServicingODLimit,T1.InsuranceAmt,T1.DeductInsDisb,
					  T1.AlwBPI , T1.BpiTreatment , T1.PlanEMIHAlw , T1.PlanEMIHMethod , T1.PlanEMIHMaxPerYear , T1.PlanEMIHMax , T1.PlanEMIHLockPeriod , T1.PlanEMICpz , T1.CalRoundingMode , T1.AlwMultiDisb , T1.ApplicationNo
						FROM         FinanceMain_Temp T1 INNER JOIN
                      RMTCurrencies T2 ON T1.FinCcy = T2.CcyCode LEFT OUTER JOIN
                      BMTSchdMethod T3 ON T1.ScheduleMethod = T3.SchdMethod LEFT OUTER JOIN
                      BMTIntRateBasisCodes T4 ON T1.ProfitDaysBasis = T4.IntRateBasisCode LEFT OUTER JOIN
                      RMTBaseRateCodes T5 ON T1.GraceBaseRate = T5.BRType LEFT OUTER JOIN
                      RMTSplRateCodes T6 ON T1.GraceSpecialRate = T6.SRType INNER JOIN
                      RMTFinanceTypes T7 ON T1.FinType = T7.FinType LEFT OUTER JOIN
                      RMTBaseRateCodes T8 ON T1.RepayBaseRate = T8.BRType LEFT OUTER JOIN
                      RMTSplRateCodes T9 ON T1.RepaySpecialRate = T9.SRType LEFT OUTER JOIN
                      Customers T10 ON T1.CustID = T10.CustID LEFT OUTER JOIN
                      BMTSalutations T13 ON T10.CustSalutationCode = T13.SalutationCode LEFT OUTER JOIN
                      RMTBranches T12 ON T1.FinBranch = T12.BranchCode LEFT OUTER JOIN
                      RMTBaseRateCodes T15 ON T1.IndBaseRate = T15.BRType LEFT OUTER JOIN
                      RMTBaseRateCodes T16 ON T1.GrcIndBaseRate = T16.BRType LEFT OUTER JOIN
                      FINPFTDETAILS T17 ON T17.FINREFERENCE = T1.FINREFERENCE LEFT OUTER JOIN
                      Commitments T19 ON T1.FinCommitmentRef = T19.CmtReference AND T10.CustID = T19.custID LEFT OUTER JOIN
                      RMTLOVFielddetail T20 ON T20.FieldCode = 'FINASSTYP' AND T1.FinPurpose = T20.FieldCodeValue LEFT OUTER JOIN
                      AMTAuthorization T21 ON T1.Authorization1 = T21.AuthUserId LEFT OUTER JOIN
                      AMTAuthorization T22 ON T1.Authorization2 = T22.AuthUserId LEFT OUTER JOIN
                      Customers T23 ON T1.JointCustId = T23.CustID LEFT OUTER JOIN
                      StepPolicyHeader T24 ON T1.StepPolicy = T24.PolicyCode LEFT OUTER JOIN
                      RMTBaseRateCodes T25 ON T1.GrcAdvBaseRate = T25.BRType LEFT OUTER JOIN
                      RMTBaseRateCodes T26 ON T1.RpyAdvBaseRate = T26.BRType LEFT OUTER JOIN
                      BMTCustStatusCodes T27 ON T1.finStatus = T27.CustStsCode LEFT OUTER JOIN
                      RMTGenDepartments T28 ON T1.AccountsOfficer = T28.GenDepartment LEFT OUTER JOIN
					  MMAgreements T29 ON T1.MMAId = T29.MMAId LEFT OUTER JOIN
					  RelationshipOfficers T30 ON T1.DSACode = T30.ROfficerCode LEFT OUTER JOIN
                      LimitAPIDetails T31 ON T1.FinLimitRef = T31.LimitRef AND T10.CustCIF = T31.CustomerReference INNER JOIN  
                      BMTProduct T32 ON T7.FinCategory = T32.ProductCode -- New Filed
			 
	UNION ALL
	SELECT     T1.FinReference, T1.InvestmentRef, T1.NumberOfTerms, T1.GrcPeriodEndDate, T1.AllowGrcPeriod, T1.GraceBaseRate, T1.GraceSpecialRate, T1.GrcPftRate, 
                      T1.GrcPftFrq, T1.NextGrcPftDate, T1.AllowGrcPftRvw, T1.GrcPftRvwFrq, T1.NextGrcPftRvwDate, T1.AllowGrcCpz, T1.GrcCpzFrq, T1.NextGrcCpzDate, 
                      T1.RepayBaseRate, T1.RepaySpecialRate, T1.RepayProfitRate, T1.RepayFrq, T1.NextRepayDate, T1.RepayPftFrq, T1.NextRepayPftDate, T1.AllowRepayRvw, 
                      T1.RepayRvwFrq, T1.NextRepayRvwDate, T1.AllowRepayCpz, T1.RepayCpzFrq, T1.NextRepayCpzDate, T1.MaturityDate, T1.CpzAtGraceEnd, T1.DownPayment, 
                      T1.GraceFlatAmount, T1.ReqRepayAmount, T1.TotalProfit, T1.TotalCpz, T1.TotalGrossPft, T1.TotalGrossGrcPft, T1.TotalGracePft, T1.TotalGraceCpz, T1.GrcRateBasis, 
                      T1.RepayRateBasis, T1.FinType, T1.FinRemarks, T1.FinCcy, T1.ScheduleMethod, T1.ProfitDaysBasis, T1.ReqMaturity, T1.CalTerms, T1.CalMaturity, T1.FirstRepay, 
                      T1.LastRepay, T1.FinStartDate, T1.FinAmount, T1.FinAmount + T1.FeeChargeAmt - T1.DownPayment lovDescFinancingAmount, T1.FinRepaymentAmount, T1.CustID, 
                      T1.Defferments, T1.PlanDeferCount, T1.FinBranch, T1.FinSourceID, T1.AllowedDefRpyChange, T1.AvailedDefRpyChange, T1.AllowedDefFrqChange, 
                      T1.AvailedDefFrqChange, T1.RecalType, T1.FinAssetValue, T1.DisbAccountId, T1.RepayAccountId, T1.FinIsActive, T1.LimitValid, T1.OverrideLimit, T1.SecurityDeposit, 
                      T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId, 
                      T2.CcyDesc lovDescFinCcyName, T3.SchdMethodDesc lovDescScheduleMethodName, T4.IntRateBasisDesc lovDescProfitDaysBasisName, 
                      T5.BRTypeDesc lovDescGraceBaseRateName, T6.SRTypeDesc lovDescGraceSpecialRateName, T7.FinTypeDesc lovDescFinTypeName, 
                      T8.BRTypeDesc lovDescRepayBaseRateName, T9.SRTypeDesc lovDescRepaySpecialRateName, T2.CcyEditField lovDescFinFormatter, 
                      T7.FinIsAlwMD lovDescFinIsAlwMD, T7.FinMaxAmount lovDescFinMaxAmt, T7.FinMinAmount lovDescFinMinAmount, T1.MinDownpayPerc, 
                      T7.FinIsAlwDifferment lovDescFinAlwDeferment, T7.FinIsDwPayRequired lovDescDwnPayReq, T7.FinMaxDifferment lovDescFinMaxDifferment, 
                      T10.CustCIF lovDescCustCIF, T10.CustFName lovDescCustFName, T10.CustLName lovDescCustLName, T12.BranchDesc lovDescFinBranchName, T1.LastRepayDate, 
                      T1.LastRepayPftDate, T1.LastRepayRvwDate, T1.LastRepayCpzDate,  
                      T1.AllowGrcRepay, T1.GrcSchdMthd, T1.GrcMargin, T1.RepayMargin, T1.FinCurrAssetValue, T1.FinCommitmentRef, T1.FinLimitRef,
                      T1.DepreciationFrq, T1.FinContractDate, T13.SaluationDesc lovDescSalutationName, T10.CustShrtName lovDescCustShrtName, 
                      T10.CustCoreBank lovDescCustCoreBank, T1.NextDepDate, T1.LastDepDate, T1.FinAccount, T1.FinCustPftAccount, T1.AlwIndRate, T1.IndBaseRate, T1.GrcAlwIndRate, 
                      T1.GrcIndBaseRate, T15.BRTypeDesc lovDescIndBaseRateName, T16.BRTypeDesc lovDescGrcIndBaseRateName, T17.AcrTillLBD lovDescAccruedTillLBD, 
                      T7.FinRvwRateApplFor, T7.FinGrcRvwRateApplFor, T1.TotalRepayAmt, T7.FinCategory lovDescProductCodeName, T10.CustCtgCode lovDescCustCtgCode, 
                      T1.ClosingStatus, T1.FinApprovedDate, T1.FeeChargeAmt, T1.Blacklisted, T1.FinRepayPftOnFrq, T1.AnualizedPercRate, T1.EffectiveRateOfReturn, 
                      T19.CmtTitle lovDescCommitmentRefName, T31.LimitDesc lovDescLimitRefName, T1.MigratedFinance, T1.ScheduleMaintained, 
                      T1.ScheduleRegenerated, T1.FinPurpose, T20.ValueDesc lovDescFinPurposeName, T1.FinStatus, T1.FinStsReason, T1.InitiateUser, T1.BankName, T1.iban, 
                      T1.AccountType, T1.DdaReferenceNo, T7.FinScheduleOn LovDescFinScheduleOn, T1.CustDSR, T1.Authorization1, T1.Authorization2, 
                      T21.AuthName lovDescAuthorization1Name, T22.AuthName lovDescAuthorization2Name, T1.JointAccount, T1.JointCustId, 
                      T23.CustShrtName lovDescJointCustShrtName, T23.CustCIF lovDescJointCustCIF, '0' AvailCommitAmount, T1.DownPayBank, T1.DownPaySupl, T1.DownPayAccount, 
                      T1.SecurityCollateral, T1.CustomerAcceptance, T1.Approved, T1.CbbApprovalRequired, T1.CbbApproved, T1.Discrepancy, T1.LimitApproved, T1.GraceTerms, 
                      T7.FinDivision lovDescFinDivision, T1.RcdMaintainSts, T1.FinRepayMethod, T1.GrcProfitDaysBasis, T1.StepFinance,T1.StepType, T1.StepPolicy, T1.AlwManualSteps, 
                      T1.NoOfSteps, T1.TakafulFrq, T1.TakafulRate, T1.WaiverReason, T1.TakafulRef, T1.TakafulRequired, 
                      T1.LinkedFinRef, T1.NextUserId, T1.Priority, T24.PolicyDesc LovDescStepPolicyName, T1.GrcMinRate, T1.GrcMaxRate, T1.RpyMinRate, T1.RpyMaxRate, 
                      T2.CcyEditField ReportFormat, T1.DeviationApproval, T1.PptTakafulRequired, T1.PptTakafulFrq, T1.PptWaiverReason, T1.PptTakafulRate, T1.PptTakafulRef, 
                      T1.ManualSchedule, T1.TakeOverFinance, T1.GrcAdvBaseRate, T1.GrcAdvMargin, T1.GrcAdvPftRate, T1.RpyAdvBaseRate, T1.RpyAdvMargin, T1.RpyAdvPftRate, 
                      T25.BRTypeDesc GrcAdvBaseRateDesc, T26.BRTypeDesc RpyAdvBaseRateDesc, T1.SupplementRent, T1.IncreasedCost, T1.CreditInsAmt, T1.RolloverFrq, 
                      T1.NextRolloverDate, T27.CustStsDescription, T1.ShariaStatus, T1.InitiateDate, T1.FINPREAPPROVEDREF, T1.MMAId, T1.AccountsOfficer, 
                      T1.feeAccountId, T1.FinCancelAc,T29.AgreeName, T28.GenDeptDesc lovDescAccountsOfficer,T1.DSACode,T30.ROfficerDesc DSACodeDesc,
					  T29.MMAReference as LovDescMMAReference,T1.TDSApplicable,T1.TakafulStatus, T32.ProductCategory,T1.MandateID,T1.DroplineFrq,T1.FirstDroplineDate,T1.PftServicingODLimit,T1.InsuranceAmt,T1.DeductInsDisb,
					  T1.AlwBPI , T1.BpiTreatment , T1.PlanEMIHAlw , T1.PlanEMIHMethod , T1.PlanEMIHMaxPerYear , T1.PlanEMIHMax , T1.PlanEMIHLockPeriod , T1.PlanEMICpz , T1.CalRoundingMode , T1.AlwMultiDisb ,  T1.ApplicationNo
						FROM         FinanceMain T1 INNER JOIN
                      RMTCurrencies T2 ON T1.FinCcy = T2.CcyCode LEFT OUTER JOIN
                      BMTSchdMethod T3 ON T1.ScheduleMethod = T3.SchdMethod LEFT OUTER JOIN
                      BMTIntRateBasisCodes T4 ON T1.ProfitDaysBasis = T4.IntRateBasisCode LEFT OUTER JOIN
                      RMTBaseRateCodes T5 ON T1.GraceBaseRate = T5.BRType LEFT OUTER JOIN
                      RMTSplRateCodes T6 ON T1.GraceSpecialRate = T6.SRType INNER JOIN
                      RMTFinanceTypes T7 ON T1.FinType = T7.FinType LEFT OUTER JOIN
                      RMTBaseRateCodes T8 ON T1.RepayBaseRate = T8.BRType LEFT OUTER JOIN
                      RMTSplRateCodes T9 ON T1.RepaySpecialRate = T9.SRType LEFT OUTER JOIN
                      Customers T10 ON T1.CustID = T10.CustID LEFT OUTER JOIN
                      BMTSalutations T13 ON T10.CustSalutationCode = T13.SalutationCode LEFT OUTER JOIN
                      RMTBranches T12 ON T1.FinBranch = T12.BranchCode LEFT OUTER JOIN
                      RMTBaseRateCodes T15 ON T1.IndBaseRate = T15.BRType LEFT OUTER JOIN
                      RMTBaseRateCodes T16 ON T1.GrcIndBaseRate = T16.BRType LEFT OUTER JOIN
                      FINPFTDETAILS T17 ON T17.FINREFERENCE = T1.FINREFERENCE LEFT OUTER JOIN
                      Commitments T19 ON T1.FinCommitmentRef = T19.CmtReference AND T10.CustID = T19.custID LEFT OUTER JOIN
                      RMTLOVFielddetail T20 ON T20.FieldCode = 'FINASSTYP' AND T1.FinPurpose = T20.FieldCodeValue LEFT OUTER JOIN
                      AMTAuthorization T21 ON T1.Authorization1 = T21.AuthUserId LEFT OUTER JOIN
                      AMTAuthorization T22 ON T1.Authorization2 = T22.AuthUserId LEFT OUTER JOIN
                      Customers T23 ON T1.JointCustId = T23.CustID LEFT OUTER JOIN
                      StepPolicyHeader T24 ON T1.StepPolicy = T24.PolicyCode LEFT OUTER JOIN
                      RMTBaseRateCodes T25 ON T1.GrcAdvBaseRate = T25.BRType LEFT OUTER JOIN
                      RMTBaseRateCodes T26 ON T1.RpyAdvBaseRate = T26.BRType LEFT OUTER JOIN
                      BMTCustStatusCodes T27 ON T1.finStatus = T27.CustStsCode LEFT OUTER JOIN
                      RMTGenDepartments T28 ON T1.AccountsOfficer = T28.GenDepartment LEFT OUTER JOIN
					  MMAgreements T29 ON T1.MMAId = T29.MMAId LEFT OUTER JOIN 
					  RelationshipOfficers T30 ON T1.DSACode = T30.ROfficerCode LEFT OUTER JOIN
                      LimitAPIDetails T31 ON T1.FinLimitRef = T31.LimitRef AND T10.CustCIF = T31.CustomerReference INNER JOIN --not using 
                      BMTProduct T32 ON T7.FinCategory = T32.ProductCode -- New Filed
						WHERE     (NOT EXISTS
                          (SELECT     1 Expr1
                            FROM          FinanceMain_Temp
                            WHERE      (FINREFERENCE = T1.FINREFERENCE)));
	
	</createView>
	</changeSet>
	<changeSet author="Irfan" id="100">
	<createView replaceIfExists="true" viewName="FinanceMain_TView">
		
		SELECT     T1.FinReference, T1.InvestmentRef, T1.NumberOfTerms, T1.GrcPeriodEndDate, T1.AllowGrcPeriod, T1.GraceBaseRate, T1.GraceSpecialRate, T1.GrcPftRate, 
                      T1.GrcPftFrq, T1.NextGrcPftDate, T1.AllowGrcPftRvw, T1.GrcPftRvwFrq, T1.NextGrcPftRvwDate, T1.AllowGrcCpz, T1.GrcCpzFrq, T1.NextGrcCpzDate, 
                      T1.RepayBaseRate, T1.RepaySpecialRate, T1.RepayProfitRate, T1.RepayFrq, T1.NextRepayDate, T1.RepayPftFrq, T1.NextRepayPftDate, T1.AllowRepayRvw, 
                      T1.RepayRvwFrq, T1.NextRepayRvwDate, T1.AllowRepayCpz, T1.RepayCpzFrq, T1.NextRepayCpzDate, T1.MaturityDate, T1.CpzAtGraceEnd, T1.DownPayment, 
                      T1.GraceFlatAmount, T1.ReqRepayAmount, T1.TotalProfit, T1.TotalCpz, T1.TotalGrossPft, T1.TotalGrossGrcPft, T1.TotalGracePft, T1.TotalGraceCpz, T1.GrcRateBasis, 
                      T1.RepayRateBasis, T1.FinType, T1.FinRemarks, T1.FinCcy, T1.ScheduleMethod, T1.ProfitDaysBasis, T1.ReqMaturity, T1.CalTerms, T1.CalMaturity, T1.FirstRepay, 
                      T1.LastRepay, T1.FinStartDate, T1.FinAmount, T1.FinAmount + T1.FeeChargeAmt - T1.DownPayment lovDescFinancingAmount, T1.FinRepaymentAmount, T1.CustID, 
                      T1.Defferments, T1.PlanDeferCount, T1.FinBranch, T1.FinSourceID, T1.AllowedDefRpyChange, T1.AvailedDefRpyChange, T1.AllowedDefFrqChange, 
                      T1.AvailedDefFrqChange, T1.RecalType, T1.FinAssetValue, T1.DisbAccountId, T1.RepayAccountId, T1.FinIsActive, T1.LimitValid, T1.OverrideLimit, T1.SecurityDeposit, 
                      T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId, 
                      T2.CcyDesc lovDescFinCcyName, T3.SchdMethodDesc lovDescScheduleMethodName, T4.IntRateBasisDesc lovDescProfitDaysBasisName, 
                      T5.BRTypeDesc lovDescGraceBaseRateName, T6.SRTypeDesc lovDescGraceSpecialRateName, T7.FinTypeDesc lovDescFinTypeName, 
                      T8.BRTypeDesc lovDescRepayBaseRateName, T9.SRTypeDesc lovDescRepaySpecialRateName, T2.CcyEditField lovDescFinFormatter, 
                      T7.FinIsAlwMD lovDescFinIsAlwMD, T7.FinMaxAmount lovDescFinMaxAmt, T7.FinMinAmount lovDescFinMinAmount, T1.MinDownpayPerc, 
                      T7.FinIsAlwDifferment lovDescFinAlwDeferment, T7.FinIsDwPayRequired lovDescDwnPayReq, T7.FinMaxDifferment lovDescFinMaxDifferment, 
                      T10.CustCIF lovDescCustCIF, T10.CustFName lovDescCustFName, T10.CustLName lovDescCustLName, T12.BranchDesc lovDescFinBranchName, T1.LastRepayDate, 
                      T1.LastRepayPftDate, T1.LastRepayRvwDate, T1.LastRepayCpzDate,  
                      T1.AllowGrcRepay, T1.GrcSchdMthd, T1.GrcMargin, T1.RepayMargin, T1.FinCurrAssetValue, T1.FinCommitmentRef, T1.FinLimitRef,
                      T1.DepreciationFrq, T1.FinContractDate, T13.SaluationDesc lovDescSalutationName, T10.CustShrtName lovDescCustShrtName, 
                      T10.CustCoreBank lovDescCustCoreBank, T1.NextDepDate, T1.LastDepDate, T1.FinAccount, T1.FinCustPftAccount, T1.AlwIndRate, T1.IndBaseRate, T1.GrcAlwIndRate, 
                      T1.GrcIndBaseRate, T15.BRTypeDesc lovDescIndBaseRateName, T16.BRTypeDesc lovDescGrcIndBaseRateName, T17.AcrTillLBD lovDescAccruedTillLBD, 
                      T7.FinRvwRateApplFor, T7.FinGrcRvwRateApplFor, T1.TotalRepayAmt, T7.FinCategory lovDescProductCodeName, T10.CustCtgCode lovDescCustCtgCode, 
                      T1.ClosingStatus, T1.FinApprovedDate, T1.FeeChargeAmt, T1.Blacklisted, T1.FinRepayPftOnFrq, T1.AnualizedPercRate, T1.EffectiveRateOfReturn, 
                      T19.CmtTitle lovDescCommitmentRefName, T31.LimitDesc lovDescLimitRefName, T1.MigratedFinance, T1.ScheduleMaintained, 
                      T1.ScheduleRegenerated, T1.FinPurpose, T20.ValueDesc lovDescFinPurposeName, T1.FinStatus, T1.FinStsReason, T1.InitiateUser, T1.BankName, T1.iban, 
                      T1.AccountType, T1.DdaReferenceNo, T7.FinScheduleOn LovDescFinScheduleOn, T1.CustDSR, T1.Authorization1, T1.Authorization2, 
                      T21.AuthName lovDescAuthorization1Name, T22.AuthName lovDescAuthorization2Name, T1.JointAccount, T1.JointCustId, 
                      T23.CustShrtName lovDescJointCustShrtName, T23.CustCIF lovDescJointCustCIF, '0' AvailCommitAmount, T1.DownPayBank, T1.DownPaySupl, T1.DownPayAccount, 
                      T1.SecurityCollateral, T1.CustomerAcceptance, T1.Approved, T1.CbbApprovalRequired, T1.CbbApproved, T1.Discrepancy, T1.LimitApproved, T1.GraceTerms, 
                      T7.FinDivision lovDescFinDivision, T1.RcdMaintainSts, T1.FinRepayMethod, T1.GrcProfitDaysBasis, T1.StepFinance,T1.StepType, T1.StepPolicy, T1.AlwManualSteps, 
                      T1.NoOfSteps, T1.TakafulFrq, T1.TakafulRate, T1.WaiverReason, T1.TakafulRef, T1.TakafulRequired, 
                      T1.LinkedFinRef, T1.NextUserId, T1.Priority, T24.PolicyDesc LovDescStepPolicyName, T1.GrcMinRate, T1.GrcMaxRate, T1.RpyMinRate, T1.RpyMaxRate, 
                      T2.CcyEditField ReportFormat, T1.DeviationApproval, T1.PptTakafulRequired, T1.PptTakafulFrq, T1.PptWaiverReason, T1.PptTakafulRate, T1.PptTakafulRef, 
                      T1.ManualSchedule, T1.TakeOverFinance, T1.GrcAdvBaseRate, T1.GrcAdvMargin, T1.GrcAdvPftRate, T1.RpyAdvBaseRate, T1.RpyAdvMargin, T1.RpyAdvPftRate, 
                      T25.BRTypeDesc GrcAdvBaseRateDesc, T26.BRTypeDesc RpyAdvBaseRateDesc, T1.SupplementRent, T1.IncreasedCost, T1.CreditInsAmt, T1.RolloverFrq, 
                      T1.NextRolloverDate, T27.CustStsDescription, T1.ShariaStatus, T1.InitiateDate, T1.FINPREAPPROVEDREF, T1.MMAId, T1.AccountsOfficer, 
                      T1.feeAccountId, T1.FinCancelAc,T29.AgreeName, T28.GenDeptDesc lovDescAccountsOfficer,T1.DSACode,T30.ROfficerDesc DSACodeDesc,
					  T29.MMAReference as LovDescMMAReference,T1.TDSApplicable,T1.TakafulStatus, T32.ProductCategory,T1.MandateID,T1.DroplineFrq,T1.FirstDroplineDate,
					  T1.PftServicingODLimit,T1.InsuranceAmt,T1.DeductInsDisb,T1.AlwBPI , T1.BpiTreatment , T1.PlanEMIHAlw , T1.PlanEMIHMethod , 
					  T1.PlanEMIHMaxPerYear , T1.PlanEMIHMax , T1.PlanEMIHLockPeriod , T1.PlanEMICpz , T1.CalRoundingMode , T1.AlwMultiDisb , T1.ApplicationNo
			FROM         FinanceMain_Temp T1 INNER JOIN
                      RMTCurrencies T2 ON T1.FinCcy = T2.CcyCode LEFT OUTER JOIN --not req
                      BMTSchdMethod T3 ON T1.ScheduleMethod = T3.SchdMethod LEFT OUTER JOIN --verify with combobox reqrmnt
                      BMTIntRateBasisCodes T4 ON T1.ProfitDaysBasis = T4.IntRateBasisCode LEFT OUTER JOIN
                      RMTBaseRateCodes T5 ON T1.GraceBaseRate = T5.BRType LEFT OUTER JOIN --remove join and use single query
                      RMTSplRateCodes T6 ON T1.GraceSpecialRate = T6.SRType INNER JOIN
                      RMTFinanceTypes T7 ON T1.FinType = T7.FinType LEFT OUTER JOIN
                      RMTBaseRateCodes T8 ON T1.RepayBaseRate = T8.BRType LEFT OUTER JOIN --remove join and use single query
                      RMTSplRateCodes T9 ON T1.RepaySpecialRate = T9.SRType LEFT OUTER JOIN
                      Customers T10 ON T1.CustID = T10.CustID LEFT OUTER JOIN
                      BMTSalutations T13 ON T10.CustSalutationCode = T13.SalutationCode LEFT OUTER JOIN --not using it anywhere.remove it
                      RMTBranches T12 ON T1.FinBranch = T12.BranchCode LEFT OUTER JOIN
                      RMTBaseRateCodes T15 ON T1.IndBaseRate = T15.BRType LEFT OUTER JOIN --remove join and use single query
                      RMTBaseRateCodes T16 ON T1.GrcIndBaseRate = T16.BRType LEFT OUTER JOIN --remove join and use single query
                      FINPFTDETAILS T17 ON T17.FINREFERENCE = T1.FINREFERENCE LEFT OUTER JOIN --not req at org
                      Commitments T19 ON T1.FinCommitmentRef = T19.CmtReference AND T10.CustID = T19.custID LEFT OUTER JOIN --not using
                      RMTLOVFielddetail T20 ON T20.FieldCode = 'FINASSTYP' AND T1.FinPurpose = T20.FieldCodeValue LEFT OUTER JOIN
                      AMTAuthorization T21 ON T1.Authorization1 = T21.AuthUserId LEFT OUTER JOIN
                      AMTAuthorization T22 ON T1.Authorization2 = T22.AuthUserId LEFT OUTER JOIN
                      Customers T23 ON T1.JointCustId = T23.CustID LEFT OUTER JOIN --not using
                      StepPolicyHeader T24 ON T1.StepPolicy = T24.PolicyCode LEFT OUTER JOIN
                      RMTBaseRateCodes T25 ON T1.GrcAdvBaseRate = T25.BRType LEFT OUTER JOIN --remove join and use single query
                      RMTBaseRateCodes T26 ON T1.RpyAdvBaseRate = T26.BRType LEFT OUTER JOIN --remove join and use single query
                      BMTCustStatusCodes T27 ON T1.finStatus = T27.CustStsCode LEFT OUTER JOIN --not using in org
                      RMTGenDepartments T28 ON T1.AccountsOfficer = T28.GenDepartment LEFT OUTER JOIN
					  MMAgreements T29 ON T1.MMAId = T29.MMAId LEFT OUTER JOIN
					  RelationshipOfficers T30 ON T1.DSACode = T30.ROfficerCode LEFT OUTER JOIN
                      LimitAPIDetails T31 ON T1.FinLimitRef = T31.LimitRef AND T10.CustCIF = T31.CustomerReference  INNER JOIN --not using 
                      BMTProduct T32 ON T7.FinCategory = T32.ProductCode 
		</createView>
	</changeSet>
	<changeSet author="Irfan" id="101">
		<createView replaceIfExists="true" viewName="FinanceMain_AView">

		SELECT     T1.FinReference, T1.NumberOfTerms, T1.GrcPeriodEndDate, T1.AllowGrcPeriod, T1.GraceBaseRate, T1.GraceSpecialRate, T1.GrcPftRate, T1.GrcPftFrq, 
                      T1.NextGrcPftDate, T1.AllowGrcPftRvw, T1.GrcPftRvwFrq, T1.NextGrcPftRvwDate, T1.AllowGrcCpz, T1.GrcCpzFrq, T1.NextGrcCpzDate, T1.RepayBaseRate, 
                      T1.RepaySpecialRate, T1.RepayProfitRate, T1.RepayFrq, T1.NextRepayDate, T1.RepayPftFrq, T1.NextRepayPftDate, T1.AllowRepayRvw, T1.RepayRvwFrq, 
                      T1.NextRepayRvwDate, T1.AllowRepayCpz, T1.RepayCpzFrq, T1.NextRepayCpzDate, T1.MaturityDate, T1.CpzAtGraceEnd, T1.DownPayment, T1.GraceFlatAmount, 
                      T1.ReqRepayAmount, T1.TotalProfit, T1.TotalCpz, T1.TotalGrossPft, T1.TotalGrossGrcPft, T1.TotalGracePft, T1.TotalGraceCpz, T1.GrcRateBasis, T1.RepayRateBasis, 
                      T1.FinType, T1.FinRemarks, T1.FinCcy, T1.ScheduleMethod, T1.ProfitDaysBasis, T1.ReqMaturity, T1.CalTerms, T1.CalMaturity, T1.FirstRepay, T1.LastRepay, 
                      T1.FinStartDate, T1.FinAmount, T1.FinAmount + T1.FeeChargeAmt - T1.DownPayment AS lovDescFinancingAmount, T1.FinRepaymentAmount, T1.CustID, 
                      T1.Defferments, T1.PlanDeferCount, T1.FinBranch, T1.FinSourceID, T1.AllowedDefRpyChange, T1.AvailedDefRpyChange, T1.AllowedDefFrqChange, 
                      T1.AvailedDefFrqChange, T1.RecalType, T1.FinAssetValue, T1.DisbAccountId, T1.RepayAccountId, T1.FinIsActive, T1.LimitValid, T1.OverrideLimit, T1.SecurityDeposit, 
                      T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId, 
                      T2.CcyDesc AS lovDescFinCcyName, T3.SchdMethodDesc AS lovDescScheduleMethodName, T4.IntRateBasisDesc AS lovDescProfitDaysBasisName, 
                      T5.BRTypeDesc AS lovDescGraceBaseRateName, T6.SRTypeDesc AS lovDescGraceSpecialRateName, T7.FinTypeDesc AS lovDescFinTypeName, 
                      T8.BRTypeDesc AS lovDescRepayBaseRateName, T9.SRTypeDesc AS lovDescRepaySpecialRateName, T2.CcyEditField AS lovDescFinFormatter, 
                      T7.FinIsAlwMD AS lovDescFinIsAlwMD, T7.FinMaxAmount AS lovDescFinMaxAmt, T7.FinMinAmount AS lovDescFinMinAmount, 
                      T1.MinDownpayPerc, T7.FinIsAlwDifferment AS lovDescFinAlwDeferment, T7.FinIsDwPayRequired AS lovDescDwnPayReq, 
                      T7.FinMaxDifferment AS lovDescFinMaxDifferment, T10.CustCIF AS lovDescCustCIF, T10.CustFName AS lovDescCustFName, T10.CustLName AS lovDescCustLName, 
                      T12.BranchDesc AS lovDescFinBranchName, T1.LastRepayDate, T1.LastRepayPftDate, T1.LastRepayRvwDate, T1.LastRepayCpzDate, 
                       T1.AllowGrcRepay, 
                      T1.GrcSchdMthd, T1.GrcMargin, T1.RepayMargin, T1.FinCurrAssetValue, T1.FinCommitmentRef, T1.FinLimitRef, T1.DepreciationFrq, T1.FinContractDate, 
                      T13.SaluationDesc AS lovDescSalutationName, T10.CustShrtName AS lovDescCustShrtName, T10.CustCoreBank AS lovDescCustCoreBank, T1.NextDepDate, 
                      T1.LastDepDate, T1.FinAccount, T1.FinCustPftAccount, T1.AlwIndRate, T1.IndBaseRate, T1.GrcAlwIndRate, T1.GrcIndBaseRate, 
                      T15.BRTypeDesc AS lovDescIndBaseRateName, T16.BRTypeDesc AS lovDescGrcIndBaseRateName, T17.AcrTillLBD AS lovDescAccruedTillLBD, 
                      T7.FinRvwRateApplFor, T7.FinGrcRvwRateApplFor, T1.TotalRepayAmt, T7.FinCategory AS lovDescProductCodeName, T1.ClosingStatus, T1.FinApprovedDate, 
                      T1.FeeChargeAmt, T1.Blacklisted, T1.FinRepayPftOnFrq, T1.AnualizedPercRate, T1.EffectiveRateOfReturn, T10.CustCtgCode AS lovDescCustCtgCode, 
                      T19.CmtTitle lovDescCommitmentRefName, T1.MigratedFinance, T1.ScheduleMaintained, T1.ScheduleRegenerated, T1.FinPurpose, 
                      T20.ValueDesc AS lovDescFinPurposeName, T1.FinStatus, T1.FinStsReason, T1.InitiateUser, T1.bankName, T1.iban, T1.accountType, T1.DdaReferenceNo, 
                      T7.FinScheduleOn AS LovDescFinScheduleOn, T1.CustDSR, T1.Authorization1, T1.Authorization2, T21.AuthName AS lovDescAuthorization1Name, 
                      T22.AuthName AS lovDescAuthorization2Name, T1.JointAccount, T1.JointCustId, T23.CustShrtName AS lovDescJointCustShrtName, 
                      T23.CustCIF AS lovDescJointCustCIF, '0' AS AvailCommitAmount, T1.DownPayBank, T1.DownPaySupl, T1.DownPayAccount, T1.SecurityCollateral, 
                      T1.CustomerAcceptance, T1.Approved, T1.CbbApprovalRequired, T1.CbbApproved, T1.Discrepancy, T1.LimitApproved, T1.InvestmentRef, T1.GraceTerms, 
                      T7.FinDivision AS lovDescFinDivision, T1.RcdMaintainSts, T1.FinRepayMethod, T1.GrcProfitDaysBasis, T1.StepFinance,T1.StepType, T1.StepPolicy, T1.AlwManualSteps, 
                      T1.NoOfSteps, T1.TakafulFrq, T1.TakafulRate, T1.WaiverReason, T1.TakafulRef, T1.TakafulRequired, 
                      T1.LinkedFinRef, T1.NextUserId, T1.Priority, T24.PolicyDesc AS LovDescStepPolicyName, T1.GrcMinRate, T1.GrcMaxRate, T1.RpyMinRate, T1.RpyMaxRate, 
                      T2.CcyEditField AS ReportFormat, T1.DeviationApproval, T1.PptTakafulRequired, T1.PptTakafulFrq, T1.PptWaiverReason, T1.PptTakafulRate, T1.PptTakafulRef, 
                      T1.ManualSchedule, T1.TakeOverFinance, T1.GrcAdvBaseRate, T1.GrcAdvMargin, T1.GrcAdvPftRate, T1.RpyAdvBaseRate, T1.RpyAdvMargin, T1.RpyAdvPftRate, 
                      T25.BRTypeDesc AS GrcAdvBaseRateDesc, T26.BRTypeDesc AS RpyAdvBaseRateDesc, T1.SupplementRent, T1.IncreasedCost, T1.CreditInsAmt, T1.RolloverFrq, 
                      T1.NextRolloverDate, T27.CustStsDescription, T1.ShariaStatus, T1.InitiateDate, T1.FINPREAPPROVEDREF, T1.MMAId, T1.AccountsOfficer, 
                      T1.feeAccountId,T1.FinCancelAc,T28.GenDeptDesc lovDescAccountsOfficer,T29.AgreeName,T29.MMAReference as LovDescMMAReference,
					  T1.DSACode,T30.ROfficerDesc DSACodeDesc,T1.TDSApplicable, T31.LimitDesc lovDescLimitRefName,T1.TakafulStatus, T32.ProductCategory,T1.MandateID,T1.DroplineFrq,T1.FirstDroplineDate,
					  T1.PftServicingODLimit,T1.InsuranceAmt,T1.DeductInsDisb,T1.AlwBPI , T1.BpiTreatment , T1.PlanEMIHAlw , T1.PlanEMIHMethod , 
					  T1.PlanEMIHMaxPerYear , T1.PlanEMIHMax , T1.PlanEMIHLockPeriod , T1.PlanEMICpz , T1.CalRoundingMode , T1.AlwMultiDisb , T1.ApplicationNo
						FROM         dbo.FinanceMain AS T1 INNER JOIN
                      dbo.RMTCurrencies AS T2 ON T1.FinCcy = T2.CcyCode LEFT OUTER JOIN
                      dbo.BMTSchdMethod AS T3 ON T1.ScheduleMethod = T3.SchdMethod LEFT OUTER JOIN
                      dbo.BMTIntRateBasisCodes AS T4 ON T1.ProfitDaysBasis = T4.IntRateBasisCode LEFT OUTER JOIN
                      dbo.RMTBaseRateCodes AS T5 ON T1.GraceBaseRate = T5.BRType LEFT OUTER JOIN
                      dbo.RMTSplRateCodes AS T6 ON T1.GraceSpecialRate = T6.SRType INNER JOIN
                      dbo.RMTFinanceTypes AS T7 ON T1.FinType = T7.FinType LEFT OUTER JOIN
                      dbo.RMTBaseRateCodes AS T8 ON T1.RepayBaseRate = T8.BRType LEFT OUTER JOIN
                      dbo.RMTSplRateCodes AS T9 ON T1.RepaySpecialRate = T9.SRType LEFT OUTER JOIN
                      dbo.RMTBaseRateCodes AS T15 ON T1.IndBaseRate = T15.BRType LEFT OUTER JOIN
                      dbo.RMTBaseRateCodes AS T16 ON T1.GrcIndBaseRate = T16.BRType LEFT OUTER JOIN
                      dbo.Customers AS T10 ON T1.CustID = T10.CustID LEFT OUTER JOIN
                      dbo.BMTSalutations AS T13 ON T10.CustSalutationCode = T13.SalutationCode LEFT OUTER JOIN
                      dbo.RMTBranches AS T12 ON T1.FinBranch = T12.BranchCode LEFT OUTER JOIN
                      dbo.FinPftDetails AS T17 ON T17.FinReference = T1.FinReference LEFT OUTER JOIN
                      dbo.Commitments T19 ON T1.FinCommitmentRef = T19.CmtReference AND T10.CustID = T19.custID LEFT OUTER JOIN
                      dbo.RMTLovFieldDetail AS T20 ON T20.FieldCode = 'FINASSTYP' AND T1.FinPurpose = T20.FieldCodeValue LEFT OUTER JOIN
                      dbo.AMTAuthorization AS T21 ON T1.Authorization1 = T21.AuthUserId LEFT OUTER JOIN
                      dbo.AMTAuthorization AS T22 ON T1.Authorization2 = T22.AuthUserId LEFT OUTER JOIN
                      dbo.Customers AS T23 ON T1.JointCustId = T23.CustID LEFT OUTER JOIN
                      dbo.StepPolicyHeader AS T24 ON T1.StepPolicy = T24.PolicyCode LEFT OUTER JOIN
                      dbo.RMTBaseRateCodes AS T25 ON T1.GrcAdvBaseRate = T25.BRType LEFT OUTER JOIN
                      dbo.RMTBaseRateCodes AS T26 ON T1.RpyAdvBaseRate = T26.BRType LEFT OUTER JOIN
                      dbo.BMTCustStatusCodes T27 ON T1.finStatus = T27.CustStsCode LEFT OUTER JOIN 
					  dbo.RMTGENDEPARTMENTS T28 on T1.ACCOUNTSOFFICER = T28.GENDEPARTMENT LEFT OUTER JOIN
					  dbo.MMAgreements T29 ON T1.MMAId = T29.MMAId LEFT OUTER JOIN
					  RelationshipOfficers T30 ON T1.DSACode = T30.ROfficerCode LEFT OUTER JOIN
                      LimitAPIDetails T31 ON T1.FinLimitRef = T31.LimitRef AND T10.CustCIF = T31.CustomerReference INNER JOIN  
                      BMTProduct T32 ON T7.FinCategory = T32.ProductCode -- New Filed

		</createView>
		</changeSet>	
		 <changeSet id="surekha.b001" author="Surekha">
		<sql>
			Update SeqSecRights set SeqNo = (select MAX(RightID) from SecRights);
			Update SeqSecGroups set SeqNo = (select MAX(GrpID) from SecGroups);
			Update SeqSecGroupRights set SeqNo = (select MAX(GrpRightID) from SecGroupRights);
			Update SeqSecRoleGroups set SeqNo = (select MAX(RoleGrpID) from SecRoleGroups);
		</sql>
	</changeSet>	
	
	<changeSet author="Madhubabu" id="95">
		<dropPrimaryKey tableName="FinSchFrqInsurance_temp"
			constraintName="pk_FinSchFrqInsurance_temp_InsId" />
	</changeSet>
	
	<changeSet author="Madhubabu" id="96">
		<dropPrimaryKey tableName="FinSchFrqInsurance"
			constraintName="pk_FinSchFrqInsurance_InsId" />
	</changeSet>

	<changeSet author="DDP" id="97">
		<insert tableName="ErrorDetails">
			<column name="ErrorCode">91121</column>
			<column name="ErrorLanguage">EN</column>
			<column name="ErrorSeverity">E</column>
			<column name="ErrorMessage">{0} should be greater than {1}.</column>
			<column name="ErrorExtendedMessage"></column>
			<column name="RecordStatus">Approved</column>
			<column name="RoleCode"></column>
			<column name="NextRoleCode"></column>
			<column name="TaskId"></column>
			<column name="NextTaskId"></column>
			<column name="RecordType"></column>
			<column name="WorkflowId">0</column>
			<column name="LastMntOn"></column>
			<column name="LastMntBy">1000</column>
			<column name="Version">0</column>
		</insert>
	</changeSet>
	
	<changeSet author="durgaprasad.g" id="98">
		<addNotNullConstraint tableName="VASRecording" columnName="VasReference" columnDataType="nvarchar(20)" />
		<addNotNullConstraint tableName="VASRecording_Temp" columnName="VasReference" columnDataType="nvarchar(20)" />
   </changeSet>
   
	<changeSet author="durgaprasad.g" id="99">
		<dropPrimaryKey tableName="VASRecording" constraintName="PK_VASDetails"/>
	</changeSet>  

	<changeSet author="durgaprasad.g" id="100">
		<addPrimaryKey tableName="VASRecording" constraintName="PK_VASRecording_Ref" columnNames="VasReference"/>
	</changeSet>

	<changeSet author="durgaprasad.g" id="101">
		<dropPrimaryKey tableName="VASRecording_Temp" constraintName="PK_VASDetails_Temp"/>
	</changeSet>

	<changeSet author="durgaprasad.g" id="102">
		<addPrimaryKey tableName="VASRecording_Temp" constraintName="PK_VASRecordingTemp_Ref" columnNames="VasReference"/>
	</changeSet>
   
   
   	<changeSet author="durgaprasad.g" id="103">
		<delete tableName="SMTparameters">
			<where> SysParmCode = 'MAXDAYS_NEXT_INSTDATE'</where>
		</delete>
	</changeSet>
		
	<changeSet author="madhubabu" id="madhubabu01">
		<createView replaceIfExists="true" viewName="FinSchFrqInsurance_TView">
		  SELECT T1.InsId,T3.Reference,T3.Module,T3.InsuranceType,T3.Insreference,T2.ClosingBalance, T1.InsSchDate, T1.InsuranceRate, T1.InsuranceFrq,T1.Amount,T1.Version, T1.LastMntBy, T1.LastMntOn,T1.RecordStatus,T1.RoleCode,T1.NextRoleCode, 
          T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId
     FROM FinSchFrqInsurance_Temp T1 inner join
          FinInsurances_Temp T3 ON T3.InsId = T1.InsId Inner join
          finscheduledetails_temp T2 ON T2.SchDate = T1.InsSchDate AND T3.Reference = T2.FinReference
		</createView>
		</changeSet>
	<changeSet author="madhubabu" id="madhubabu02">
		<createView replaceIfExists="true" viewName="FinSchFrqInsurance_View">
				SELECT T1.InsId,T3.Reference,T3.Module,T3.InsuranceType,T3.Insreference,T2.ClosingBalance, T1.InsSchDate, T1.InsuranceRate, T1.InsuranceFrq,T1.Amount,T1.Version, T1.LastMntBy, T1.LastMntOn,T1.RecordStatus,T1.RoleCode,T1.NextRoleCode, 
	          T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId
	    		 FROM FinSchFrqInsurance_Temp T1 inner join
	          FinInsurances_Temp T3 ON T3.InsId = T1.InsId Inner join
	          FinScheduleDetails_Temp T2 ON T2.SchDate = T1.InsSchDate AND T3.Reference = T2.FinReference
UNION ALL

		SELECT T1.InsId,T3.Reference,T3.Module,T3.InsuranceType,T3.Insreference,T2.ClosingBalance, T1.InsSchDate, T1.InsuranceRate, T1.InsuranceFrq,T1.Amount,T1.Version, T1.LastMntBy, T1.LastMntOn,T1.RecordStatus,T1.RoleCode,T1.NextRoleCode, 
		          T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId
		     FROM FinSchFrqInsurance T1 inner join
		          FinInsurances T3 ON T3.InsId = T1.InsId Inner join
		          finscheduledetails T2 ON T2.SchDate = T1.InsSchDate AND T3.Reference = T2.FinReference
		
		WHERE     NOT EXISTS
		                          (SELECT     1
		                            FROM       FinSchFrqInsurance_Temp
		                            WHERE      InsId = T1.InsId and InsSchDate =T1.InsSchDate)
		</createView>
	</changeSet>
	<changeSet id="satish01" author="satish">
		<delete tableName="LimitTransactionDetails"></delete>
		<delete tableName="LimitReferenceMapping"></delete>
	</changeSet>
	<!-- <changeSet id="satish02" author="satish">
		<dropColumn tableName="LimitTransactionDetails" columnName="RuleCode" />
		<dropColumn tableName="LimitTransactionDetails" columnName="RuleValue" />
		<dropColumn tableName="LimitTransactionDetails" columnName="CustomerId" />
		<dropColumn tableName="LimitTransactionDetails" columnName="CustomerGroup" />
	</changeSet>
	<changeSet id="satish03" author="satish">
		<dropColumn tableName="LimitReferenceMapping" columnName="RuleCode" />
		<dropColumn tableName="LimitReferenceMapping" columnName="RuleValue" />
		<dropColumn tableName="LimitReferenceMapping" columnName="CustomerId" />
		<dropColumn tableName="LimitReferenceMapping" columnName="CustomerGroup" />
	</changeSet>
	<changeSet id="satish04" author="satish">
		<addColumn tableName="LimitTransactionDetails">
			<column name="HeaderId" type="bigint"></column>
		</addColumn>
		<addColumn tableName="LimitReferenceMapping">
			<column name="HeaderId" type="bigint"></column>
		</addColumn>
	</changeSet> -->
	<changeSet id="satish05" author="satish">
	<insert tableName="ErrorDetails">
			<column name="ErrorCode">LM0004</column>
			<column name="ErrorLanguage">EN</column>
			<column name="ErrorSeverity">E</column>
			<column name="ErrorMessage">Limit Structure: {0} is Inactive.</column>
			<column name="ErrorExtendedMessage"></column>
			<column name="RecordStatus">Approved</column>
			<column name="RoleCode"></column>
			<column name="NextRoleCode"></column>
			<column name="TaskId"></column>
			<column name="NextTaskId"></column>
			<column name="RecordType"></column>
			<column name="WorkflowId">0</column>
			<column name="LastMntOn"></column>
			<column name="LastMntBy">1000</column>
			<column name="Version">0</column>
		</insert>
	</changeSet>
	<changeSet  author="Madhubabu" id="madhubabu03">
	<sql>
		Update SeqSecRights set SeqNo = (select MAX(RightID) from SecRights);
		Update SeqSecGroupRights set SeqNo = (select MAX(GrpRightID) from SecGroupRights);
	</sql>
	</changeSet>
	
	<changeSet  author="Madhubabu" id="madhubabu04">
	<sql>
		Insert into SecRights values ((select MAX(RightID)+1 from SecRights),3,'FinInsuranceDialog_calcType','FinInsuranceDialog',0,1000,GETDATE(),'Approved','','','','','',0 );
		Insert into SecRights values ((select MAX(RightID)+2 from SecRights),3,'FinInsuranceDialog_percentage','FinInsuranceDialog',0,1000,GETDATE(),'Approved','','','','','',0 );
		Insert into SecRights values ((select MAX(RightID)+3 from SecRights),3,'FinInsuranceDialog_calculatedOn','FinInsuranceDialog',0,1000,GETDATE(),'Approved','','','','','',0 );
		Insert into SecRights values ((select MAX(RightID)+4 from SecRights),3,'FinInsuranceDialog_InsuranceStatus','FinInsuranceDialog',0,1000,GETDATE(),'Approved','','','','','',0 );
		Insert into SecRights values ((select MAX(RightID)+5 from SecRights),3,'FinInsuranceDialog_waiverReason','FinInsuranceDialog',0,1000,GETDATE(),'Approved','','','','','',0 );
		INSERT INTO SecGroupRights values((SELECT MAX(GrpRightID) + 1 From SecGroupRights), (Select GrpId  From SecGroups Where GrpCode = 'FININSURANCEDIALOG_MAKER'),  (SELECT RightID FROM SecRights where RightName = 'FinInsuranceDialog_waiverReason'), 1, 1, 1000, GETDATE(),'Approved',' ',' ',' ',' ',' ', 0);
	</sql>
	</changeSet>
	<changeSet  author="Madhubabu" id="madhubabu05">
	<sql>
		Update SeqSecRights set SeqNo = (select MAX(RightID) from SecRights);
		Update SeqSecGroupRights set SeqNo = (select MAX(GrpRightID) from SecGroupRights);
	</sql>
	</changeSet>
	
	<changeSet author="Madhubabu" id="madhubabu06">
	 <dropTable tableName="WIFFinInsurances_Temp" />
	</changeSet>
	
	<changeSet author="Madhubabu" id="madhubabu07">
	 <dropTable tableName="WIFFinInsurances" />
	</changeSet>
	
	<changeSet author="Madhubabu" id="madhubabu08">
		<createTable tableName="WIFFinInsurances_Temp">
			<column name="InsId" type="bigInt">
				<constraints primaryKey="true" nullable="false" />
			</column>
			<column name="Reference" type="nvarchar(20)">
				<constraints unique="true" nullable="false" />
			</column>
			<column name="Module" type="nvarchar(10)">
				<constraints unique="true" nullable="false" />
			</column>
			<column name="InsuranceType" type="varchar(8)">
				<constraints unique="true" nullable="false" />
			</column>
			<column name="InsReference" type="nvarchar(20)">
				<constraints unique="true" nullable="false" />
			</column>
			<column name="InsuranceReq" type="nchar(1)"/>
			<column name="Provider" type="varchar(8)"/>
			<column name="PaymentMethod" type="varchar(8)"/>
			<column name="CalType" type="nchar(1)"/>
			<column name="InsuranceRate" type="decimal(13,9)"/>
			<column name="WaiverReason" type="nvarchar(50)"/>
			<column name="InsuranceFrq" type="nvarchar(5)"/>
			<column name="Amount" type="decimal(18,0)" />
			<column name="CalRule" type="nvarchar(8)" />
			<column name="CalPerc" type="decimal(5,2)" />
			<column name="CalOn" type="nvarchar(8)" />
			<column name="InsuranceStatus" type="nvarchar(8)" />
			<column name="Version" type="int" defaultValue="0" />
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="nvarchar(50)" />
			<column name="RoleCode" type="nvarchar(100)" />
			<column name="NextRoleCode" type="nvarchar(200)" />
			<column name="TaskId" type="nvarchar(50)" />
			<column name="NextTaskId" type="nvarchar(200)" />
			<column name="RecordType" type="nvarchar(50)" />
			<column name="WorkflowId" type="bigint" />
		</createTable>
	</changeSet>
	<changeSet author="Madhubabu" id="madhubabu09">
	 <dropTable tableName="WIFFinInsurances_Temp" />
	</changeSet>
	<changeSet author="Madhubabu" id="madhubabu10">
		<createTable tableName="WIFFinInsurances_Temp">
			<column name="InsId" type="bigInt">
				<constraints primaryKey="true" nullable="false" />
			</column>
			<column name="Reference" type="nvarchar(20)">
				<constraints  nullable="false" />
			</column>
			<column name="Module" type="nvarchar(10)">
				<constraints  nullable="false" />
			</column>
			<column name="InsuranceType" type="varchar(8)">
				<constraints  nullable="false" />
			</column>
			<column name="InsReference" type="nvarchar(20)">
				<constraints nullable="false" />
			</column>
			<column name="InsuranceReq" type="nchar(1)"/>
			<column name="Provider" type="varchar(8)"/>
			<column name="PaymentMethod" type="varchar(8)"/>
			<column name="CalType" type="nchar(1)"/>
			<column name="InsuranceRate" type="decimal(13,9)"/>
			<column name="WaiverReason" type="nvarchar(50)"/>
			<column name="InsuranceFrq" type="nvarchar(5)"/>
			<column name="Amount" type="decimal(18,0)" />
			<column name="CalRule" type="nvarchar(8)" />
			<column name="CalPerc" type="decimal(5,2)" />
			<column name="CalOn" type="nvarchar(8)" />
			<column name="InsuranceStatus" type="nvarchar(8)" />
			<column name="Version" type="int" defaultValue="0" />
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="nvarchar(50)" />
			<column name="RoleCode" type="nvarchar(100)" />
			<column name="NextRoleCode" type="nvarchar(200)" />
			<column name="TaskId" type="nvarchar(50)" />
			<column name="NextTaskId" type="nvarchar(200)" />
			<column name="RecordType" type="nvarchar(50)" />
			<column name="WorkflowId" type="bigint" />
		</createTable>
	</changeSet>
	
	<changeSet author="Madhubabu" id="madhubabu11">
		<addUniqueConstraint columnNames="Reference,Module,InsuranceType,InsReference"
			constraintName="UK_WIFFinInsurances_Temp" deferrable="true" disabled="true"
			initiallyDeferred="true" tableName="WIFFinInsurances_Temp" />
	</changeSet>
	
	<changeSet author="Madhubabu" id="madhubabu12">
		<createTable tableName="WIFFinInsurances">
			<column name="InsId" type="bigInt">
				<constraints primaryKey="true" nullable="false" />
			</column>
			<column name="Reference" type="nvarchar(20)">
				<constraints  nullable="false" />
			</column>
			<column name="Module" type="nvarchar(10)">
				<constraints  nullable="false" />
			</column>
			<column name="InsuranceType" type="varchar(8)">
				<constraints  nullable="false" />
			</column>
			<column name="InsReference" type="nvarchar(20)">
				<constraints nullable="false" />
			</column>
			<column name="InsuranceReq" type="nchar(1)"/>
			<column name="Provider" type="varchar(8)"/>
			<column name="PaymentMethod" type="varchar(8)"/>
			<column name="CalType" type="nchar(1)"/>
			<column name="InsuranceRate" type="decimal(13,9)"/>
			<column name="WaiverReason" type="nvarchar(50)"/>
			<column name="InsuranceFrq" type="nvarchar(5)"/>
			<column name="Amount" type="decimal(18,0)" />
			<column name="CalRule" type="nvarchar(8)" />
			<column name="CalPerc" type="decimal(5,2)" />
			<column name="CalOn" type="nvarchar(8)" />
			<column name="InsuranceStatus" type="nvarchar(8)" />
			<column name="Version" type="int" defaultValue="0" />
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="nvarchar(50)" />
			<column name="RoleCode" type="nvarchar(100)" />
			<column name="NextRoleCode" type="nvarchar(200)" />
			<column name="TaskId" type="nvarchar(50)" />
			<column name="NextTaskId" type="nvarchar(200)" />
			<column name="RecordType" type="nvarchar(50)" />
			<column name="WorkflowId" type="bigint" />
		</createTable>
	</changeSet>
	
	<changeSet author="Madhubabu" id="madhubabu13">
		<addUniqueConstraint columnNames="Reference,Module,InsuranceType,InsReference"
			constraintName="UK_WIFFinInsurances" deferrable="true" disabled="true"
			initiallyDeferred="true" tableName="WIFFinInsurances" />
	</changeSet>
	
	<changeSet author="Madhubabu" id="madhubabu14">
	 <dropTable tableName="WIFFinSchFrqInsurance_Temp" />
	</changeSet>
	
	<changeSet author="Madhubabu" id="madhubabu15">
	 <dropTable tableName="WIFFinSchFrqInsurance" />
	</changeSet>
	
	<changeSet author="Madhubabu" id="madhubabu16">
		<createTable tableName="WIFFinSchFrqInsurance_Temp">
			<column name="InsId" type="bigInt" >
			<constraints primaryKey="true" nullable="false"/>
			</column>
			<column name="InsSchDate" type="datetime"/>
			<column name="InsuranceRate" type="decimal(13,9)" />
			<column name="InsuranceFrq" type="nvarchar(5)" />
			<column name="Amount" type="decimal(18,0)" />
			<column name="Version" type="int" defaultValue="0" />
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="nvarchar(50)" />
			<column name="RoleCode" type="nvarchar(100)" />
			<column name="NextRoleCode" type="nvarchar(200)" />
			<column name="TaskId" type="nvarchar(50)" />
			<column name="NextTaskId" type="nvarchar(200)" />
			<column name="RecordType" type="nvarchar(50)" />
			<column name="WorkflowId" type="bigint" />
		</createTable>
	</changeSet>
	
	<changeSet author="Madhubabu" id="madhubabu17">
		<createTable tableName="WIFFinSchFrqInsurance">
			<column name="InsId" type="bigInt" >
			<constraints primaryKey="true" nullable="false"/>
			</column>
			<column name="InsSchDate" type="datetime"/>
			<column name="InsuranceRate" type="decimal(13,9)" />
			<column name="InsuranceFrq" type="nvarchar(5)" />
			<column name="Amount" type="decimal(18,0)" />
			<column name="Version" type="int" defaultValue="0" />
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="nvarchar(50)" />
			<column name="RoleCode" type="nvarchar(100)" />
			<column name="NextRoleCode" type="nvarchar(200)" />
			<column name="TaskId" type="nvarchar(50)" />
			<column name="NextTaskId" type="nvarchar(200)" />
			<column name="RecordType" type="nvarchar(50)" />
			<column name="WorkflowId" type="bigint" />
		</createTable>
	</changeSet>
	<changeSet id="Mandate1" author="satish">
		<addColumn tableName="Mandates">
			<column name="OrgReference" type="nvarchar(25)" />
		</addColumn>
		<addColumn tableName="Mandates_temp">
			<column name="OrgReference" type="nvarchar(25)" />
		</addColumn>
	</changeSet>
	<changeSet id="Mandate2" author="satish">
		<createView replaceIfExists="true" viewName="Mandates_View">
SELECT		T1.MandateID, T1.CustID,   T1.MandateRef, T1.MandateType,T1.BankBranchID, T1.AccNumber, T1.AccHolderName,
			T1.JointAccHolderName, T1.AccType, T1.OpenMandate, T1.StartDate, T1.ExpiryDate, T1.MaxLimit,
			T1.Periodicity, T1.PhoneCountryCode, T1.PhoneAreaCode, T1.PhoneNumber, T1.Status, T1.ApprovalID		
			, T1.Version , T1.LastMntBy, T1.LastMntOn,T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId,
			 T1.NextTaskId, T1.RecordType, T1.WorkflowId,T1.Reason,T1.MandateCcy,T2.CustCIF,T2.CustShrtName, T3.BankCode, T3.BranchCode,T3.BranchDesc,T3.MICR,
			 T3.IFSC, T3.City, T4.BankName, T1.InputDate,T1.Active, 0 useExisting,T1.OrgReference
FROM    	Mandates_Temp T1 INNER JOIN
			Customers T2  ON T1.CustID = T2.CustID INNER JOIN 
			BankBranches T3 ON T1.BankBranchID = T3.BankBranchID  INNER JOIN
			BMTBankDetail T4  ON T3.BankCode=T4.BankCode 
            
UNION ALL

SELECT		T1.MandateID, T1.CustID,   T1.MandateRef, T1.MandateType,T1.BankBranchID, T1.AccNumber, T1.AccHolderName,
			T1.JointAccHolderName, T1.AccType, T1.OpenMandate, T1.StartDate, T1.ExpiryDate, T1.MaxLimit,
			T1.Periodicity, T1.PhoneCountryCode, T1.PhoneAreaCode, T1.PhoneNumber, T1.Status, T1.ApprovalID		
			, T1.Version , T1.LastMntBy, T1.LastMntOn,T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId,
			 T1.NextTaskId, T1.RecordType, T1.WorkflowId,T1.Reason,T1.MandateCcy,T2.CustCIF,T2.CustShrtName, T3.BankCode, T3.BranchCode,T3.BranchDesc,T3.MICR,
			 T3.IFSC, T3.City, T4.BankName, T1.InputDate,T1.Active,1 useExisting,T1.OrgReference
FROM    	Mandates T1 INNER JOIN
			Customers T2  ON T1.CustID = T2.CustID INNER JOIN 
			BankBranches T3 ON T1.BankBranchID = T3.BankBranchID  INNER JOIN
			BMTBankDetail T4  ON T3.BankCode=T4.BankCode 
			WHERE     NOT EXISTS (SELECT 1 FROM Mandates_TEMP WHERE MandateID = T1.MandateID)
		</createView>
		<createView replaceIfExists="true" viewName="Mandates_TView">
SELECT		T1.MandateID, T1.CustID,   T1.MandateRef, T1.MandateType,T1.BankBranchID, T1.AccNumber, T1.AccHolderName,
			T1.JointAccHolderName, T1.AccType, T1.OpenMandate, T1.StartDate, T1.ExpiryDate, T1.MaxLimit,
			T1.Periodicity, T1.PhoneCountryCode, T1.PhoneAreaCode, T1.PhoneNumber, T1.Status, T1.ApprovalID		
			, T1.Version , T1.LastMntBy, T1.LastMntOn,T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId,
			 T1.NextTaskId, T1.RecordType, T1.WorkflowId,T1.Reason,T1.MandateCcy,T2.CustCIF,T2.CustShrtName, T3.BankCode, T3.BranchCode,T3.BranchDesc,T3.MICR,
			 T3.IFSC, T3.City, T4.BankName, T1.InputDate,T1.Active, 0 useExisting,T1.OrgReference
FROM    	Mandates_Temp T1 INNER JOIN
			Customers T2  ON T1.CustID = T2.CustID INNER JOIN 
			BankBranches T3 ON T1.BankBranchID = T3.BankBranchID  INNER JOIN
			BMTBankDetail T4  ON T3.BankCode=T4.BankCode 
		</createView>
		<createView replaceIfExists="true" viewName="Mandates_AView">
		SELECT		T1.MandateID, T1.CustID,   T1.MandateRef, T1.MandateType,T1.BankBranchID, T1.AccNumber, T1.AccHolderName,
			T1.JointAccHolderName, T1.AccType, T1.OpenMandate, T1.StartDate, T1.ExpiryDate, T1.MaxLimit,
			T1.Periodicity, T1.PhoneCountryCode, T1.PhoneAreaCode, T1.PhoneNumber, T1.Status, T1.ApprovalID		
			, T1.Version , T1.LastMntBy, T1.LastMntOn,T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId,
			 T1.NextTaskId, T1.RecordType, T1.WorkflowId,T1.Reason,T1.MandateCcy,T2.CustCIF,T2.CustShrtName, T3.BankCode, T3.BranchCode,T3.BranchDesc,T3.MICR,
			 T3.IFSC, T3.City, T4.BankName, T1.InputDate,T1.Active, 1 useExisting,T1.OrgReference
FROM    	Mandates T1 INNER JOIN
			Customers T2  ON T1.CustID = T2.CustID INNER JOIN 
			BankBranches T3 ON T1.BankBranchID = T3.BankBranchID  INNER JOIN
			BMTBankDetail T4  ON T3.BankCode=T4.BankCode 
		</createView>
	</changeSet>
	
<changeSet author="Madhubabu" id="madhubabu18">
	<createView viewName="WIFFinInsurances_View" replaceIfExists="true">
	SELECT  T1.InsId,T1.Reference, T1.Module,T1.InsuranceType,T2.insuranceTypeDesc,T1.InsReference,T1.InsuranceReq,T1.Provider,T3.TakafulName ProviderName,T1.PaymentMethod,T1.CalType,T1.InsuranceRate,
   T1.WaiverReason,T1.InsuranceFrq,T1.Amount,T1.CalRule,T1.CalPerc,T1.CalOn,T1.InsuranceStatus,
   T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId
   FROM      WIFFinInsurances_Temp T1 INNER JOIN
             InsuranceType T2 ON T2.InsuranceType=T1.InsuranceType LEFT OUTER JOIN
             TakafulProvider T3 ON T1.provider=T3.TakafulCode
			 
UNION ALL

  SELECT  T1.InsId,T1.Reference, T1.Module,T1.InsuranceType,T2.insuranceTypeDesc,T1.InsReference,T1.InsuranceReq,T1.Provider,T3.TakafulName ProviderName,T1.PaymentMethod,T1.CalType,T1.InsuranceRate,
  T1.WaiverReason,T1.InsuranceFrq,T1.Amount,T1.CalRule,T1.CalPerc,T1.CalOn,T1.InsuranceStatus,
  T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId
  FROM         WIFFinInsurances T1 INNER JOIN
               InsuranceType T2 ON T2.InsuranceType=T1.InsuranceType LEFT OUTER JOIN
               TakafulProvider T3 ON T1.provider=T3.TakafulCode

WHERE     NOT EXISTS
                          (SELECT     1
                            FROM      WIFFinInsurances_Temp
                            WHERE     Reference= T1.Reference AND  Module = T1.Module
							AND       InsuranceType=T1.InsuranceType AND InsReference=T1.InsReference)
	
	</createView>
	</changeSet>
	<changeSet author="Subbarao" id="104">
	<createView viewName="CustomerDirectorDetail_AView"
		replaceIfExists="true">
	SELECT     T1.DirectorId, T1.CustID, T2.CustCIF lovDescCustCIF, T2.CustShrtName lovDescCustShrtName, T1.FirstName, T1.MiddleName, T1.LastName, T1.ShortName, 
                      T1.CustGenderCode, T1.CustSalutationCode, T1.SharePerc, T1.CustAddrHNbr, T1.CustFlatNbr, T1.CustAddrStreet, T1.CustAddrLine1, T1.CustAddrLine2, T1.CustPOBox, 
                      T1.CustAddrCity, T1.CustAddrProvince, T1.CustAddrCountry, T1.CustAddrZIP, T1.CustAddrPhone, T1.CustAddrFrom, T1.Shareholder, T1.Director, T1.Designation, 
                      T1.IDType, T1.IDReference, T1.Nationality, T1.DOB, T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, 
                      T1.NextTaskId, T1.RecordType, T1.WorkflowId, T2.RecordType lovDescCustRecordType, T5.PCCityName lovDescCustAddrCityName, 
                      T6.CPProvinceName lovDescCustAddrProvinceName, T7.CountryDesc lovDescCustAddrCountryName, T3.GenderDesc lovDescCustGenderCodeName, 
                      T4.SaluationDesc lovDescCustSalutationCodeName, T8.DesgDesc lovDescDesignationName, T9.CountryDesc lovDescNationalityName, 
                      T10.DocTypeDesc lovDescCustDocCategoryName,T10.DocIdNumMand IDReferenceMand
FROM          CustomerDirectorDetail T1 INNER JOIN
                       Customers_View T2 ON T1.CustID = T2.CustID LEFT OUTER JOIN
                       BMTGenders T3 ON T1.CustGenderCode = T3.GenderCode LEFT OUTER JOIN
                       BMTSalutations T4 ON T1.CustSalutationCode = T4.SalutationCode LEFT OUTER JOIN
                       RMTProvinceVsCity T5 ON T1.CustAddrCountry = T5.PCCountry AND T1.CustAddrProvince = T5.PCProvince AND T1.CustAddrCity = T5.PCCity LEFT OUTER JOIN
                       RMTCountryVsProvince T6 ON T1.CustAddrCountry = T6.CPCountry AND T1.CustAddrProvince = T6.CPProvince INNER JOIN
                       BMTCountries T7 ON T1.CustAddrCountry = T7.CountryCode LEFT OUTER JOIN
                       BMTDesignations T8 ON T1.Designation = T8.DesgCode LEFT OUTER JOIN
                       BMTCountries T9 ON T1.Nationality = T9.CountryCode LEFT OUTER JOIN
                       BMTDocumentTypes T10 ON T1.IDType = T10.DocTypeCode
	</createView>
</changeSet>
	<changeSet author="Subbarao" id="105">
		<createView viewName="CustomerDirectorDetail_View"
			replaceIfExists="true">
	SELECT     T1.DirectorId, T1.CustID, T2.CustCIF lovDescCustCIF, T2.CustShrtName lovDescCustShrtName, T1.FirstName, T1.MiddleName, T1.LastName, T1.ShortName, 
                      T1.CustGenderCode, T1.CustSalutationCode, T1.SharePerc, T1.CustAddrHNbr, T1.CustFlatNbr, T1.CustAddrStreet, T1.CustAddrLine1, T1.CustAddrLine2, T1.CustPOBox, 
                      T1.CustAddrCity, T1.CustAddrProvince, T1.CustAddrCountry, T1.CustAddrZIP, T1.CustAddrPhone, T1.CustAddrFrom, T1.Shareholder, T1.Director, T1.Designation, 
                      T1.IDType, T1.IDReference, T1.Nationality, T1.DOB, T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, 
                      T1.NextTaskId, T1.RecordType, T1.WorkflowId, T2.RecordType lovDescCustRecordType, T5.PCCityName lovDescCustAddrCityName, 
                      T6.CPProvinceName lovDescCustAddrProvinceName, T7.CountryDesc lovDescCustAddrCountryName, T3.GenderDesc lovDescCustGenderCodeName, 
                      T4.SaluationDesc lovDescCustSalutationCodeName, T8.DesgDesc lovDescDesignationName, T9.CountryDesc lovDescNationalityName, 
                      T10.DocTypeDesc lovDescCustDocCategoryName,T10.DocIdNumMand IDReferenceMand
FROM         CustomerDirectorDetail_TEMP T1 INNER JOIN
                       Customers_View T2 ON T1.CustID = T2.CustID LEFT OUTER JOIN
                       BMTGenders T3 ON T1.CustGenderCode = T3.GenderCode LEFT OUTER JOIN
                       BMTSalutations T4 ON T1.CustSalutationCode = T4.SalutationCode LEFT OUTER JOIN
                       RMTProvinceVsCity T5 ON T1.CustAddrCountry = T5.PCCountry AND T1.CustAddrProvince = T5.PCProvince AND T1.CustAddrCity = T5.PCCity LEFT OUTER JOIN
                       RMTCountryVsProvince T6 ON T1.CustAddrCountry = T6.CPCountry AND T1.CustAddrProvince = T6.CPProvince INNER JOIN
                       BMTCountries T7 ON T1.CustAddrCountry = T7.CountryCode LEFT OUTER JOIN
                       BMTDesignations T8 ON T1.Designation = T8.DesgCode LEFT OUTER JOIN
                       BMTCountries T9 ON T1.Nationality = T9.CountryCode LEFT OUTER JOIN
                       BMTDocumentTypes T10 ON T1.IDType = T10.DocTypeCode
UNION ALL
SELECT     T1.DirectorId, T1.CustID, T2.CustCIF lovDescCustCIF, T2.CustShrtName lovDescCustShrtName, T1.FirstName, T1.MiddleName, T1.LastName, T1.ShortName, 
                      T1.CustGenderCode, T1.CustSalutationCode, T1.SharePerc, T1.CustAddrHNbr, T1.CustFlatNbr, T1.CustAddrStreet, T1.CustAddrLine1, T1.CustAddrLine2, T1.CustPOBox, 
                      T1.CustAddrCity, T1.CustAddrProvince, T1.CustAddrCountry, T1.CustAddrZIP, T1.CustAddrPhone, T1.CustAddrFrom, T1.Shareholder, T1.Director, T1.Designation, 
                      T1.IDType, T1.IDReference, T1.Nationality, T1.DOB, T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, 
                      T1.NextTaskId, T1.RecordType, T1.WorkflowId, T2.RecordType lovDescCustRecordType, T5.PCCityName lovDescCustAddrCityName, 
                      T6.CPProvinceName lovDescCustAddrProvinceName, T7.CountryDesc lovDescCustAddrCountryName, T3.GenderDesc lovDescCustGenderCodeName, 
                      T4.SaluationDesc lovDescCustSalutationCodeName, T8.DesgDesc lovDescDesignationName, T9.CountryDesc lovDescNationalityName, 
                      T10.DocTypeDesc lovDescCustDocCategoryName,T10.DocIdNumMand IDReferenceMand
FROM         CustomerDirectorDetail T1 INNER JOIN
                       Customers_View T2 ON T1.CustID = T2.CustID LEFT OUTER JOIN
                       BMTGenders T3 ON T1.CustGenderCode = T3.GenderCode LEFT OUTER JOIN
                       BMTSalutations T4 ON T1.CustSalutationCode = T4.SalutationCode LEFT OUTER JOIN
                       RMTProvinceVsCity T5 ON T1.CustAddrCountry = T5.PCCountry AND T1.CustAddrProvince = T5.PCProvince AND T1.CustAddrCity = T5.PCCity LEFT OUTER JOIN
                       RMTCountryVsProvince T6 ON T1.CustAddrCountry = T6.CPCountry AND T1.CustAddrProvince = T6.CPProvince INNER JOIN
                       BMTCountries T7 ON T1.CustAddrCountry = T7.CountryCode LEFT OUTER JOIN
                       BMTDesignations T8 ON T1.Designation = T8.DesgCode LEFT OUTER JOIN
                       BMTCountries T9 ON T1.Nationality = T9.CountryCode LEFT OUTER JOIN
                       BMTDocumentTypes T10 ON T1.IDType = T10.DocTypeCode
WHERE     NOT EXISTS
                          (SELECT     1
                            FROM          CustomerDirectorDetail_TEMP
                            WHERE      DirectorId = T1.DirectorId AND CustID = T1.CustID)
	</createView>
	</changeSet>
	<changeSet author="Subbarao" id="106">
		<sql>
			UPDATE CustomerDirectorDetail Set Idtype='01' Where Idtype not in
			(Select DocTypeCode from BmtDocumentTypes)
		</sql>
	</changeSet>
<changeSet author="Madhubabu" id="madhubabu18">
	<createView viewName="WIFFinInsurances_View" replaceIfExists="true">
	SELECT  T1.InsId,T1.Reference, T1.Module,T1.InsuranceType,T2.insuranceTypeDesc,T1.InsReference,T1.InsuranceReq,T1.Provider,T3.TakafulName ProviderName,T1.PaymentMethod,T1.CalType,T1.InsuranceRate,
   T1.WaiverReason,T1.InsuranceFrq,T1.Amount,T1.CalRule,T1.CalPerc,T1.CalOn,T1.InsuranceStatus,
   T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId
   FROM      WIFFinInsurances_Temp T1 INNER JOIN
             InsuranceType T2 ON T2.InsuranceType=T1.InsuranceType LEFT OUTER JOIN
             TakafulProvider T3 ON T1.provider=T3.TakafulCode
			 
UNION ALL

  SELECT  T1.InsId,T1.Reference, T1.Module,T1.InsuranceType,T2.insuranceTypeDesc,T1.InsReference,T1.InsuranceReq,T1.Provider,T3.TakafulName ProviderName,T1.PaymentMethod,T1.CalType,T1.InsuranceRate,
  T1.WaiverReason,T1.InsuranceFrq,T1.Amount,T1.CalRule,T1.CalPerc,T1.CalOn,T1.InsuranceStatus,
  T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId
  FROM         WIFFinInsurances T1 INNER JOIN
               InsuranceType T2 ON T2.InsuranceType=T1.InsuranceType LEFT OUTER JOIN
               TakafulProvider T3 ON T1.provider=T3.TakafulCode

WHERE     NOT EXISTS
                          (SELECT     1
                            FROM      WIFFinInsurances_Temp
                            WHERE     Reference= T1.Reference AND  Module = T1.Module
							AND       InsuranceType=T1.InsuranceType AND InsReference=T1.InsReference)
	
	</createView>
	</changeSet>
	
	<changeSet author="Madhubabu" id="madhubabu19">
		<dropPrimaryKey tableName="WIFFinSchFrqInsurance"
			constraintName="PK_WIFFINSCHFRQINSURANCE" />
	</changeSet>
	
	<changeSet author="Madhubabu" id="madhubabu20">
	<createView viewName="WIFFinSchFrqInsurance_View" replaceIfExists="true">
	SELECT T1.InsId,T3.Reference,T3.Module,T3.InsuranceType,T3.Insreference,T2.ClosingBalance, T1.InsSchDate, T1.InsuranceRate, T1.InsuranceFrq,T1.Amount,T1.Version, T1.LastMntBy, T1.LastMntOn,T1.RecordStatus,T1.RoleCode,T1.NextRoleCode, 
	          T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId
	    FROM  WIFFinSchFrqInsurance_Temp T1 inner join
	          WIFFinInsurances_Temp T3 ON T3.InsId = T1.InsId Inner join
	          WIFFinScheduleDetails_Temp T2 ON T2.SchDate = T1.InsSchDate AND T3.Reference = T2.FinReference
UNION ALL

		SELECT T1.InsId,T3.Reference,T3.Module,T3.InsuranceType,T3.Insreference,T2.ClosingBalance, T1.InsSchDate, T1.InsuranceRate, T1.InsuranceFrq,T1.Amount,T1.Version, T1.LastMntBy, T1.LastMntOn,T1.RecordStatus,T1.RoleCode,T1.NextRoleCode, 
		          T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId
		     FROM WIFFinSchFrqInsurance T1 inner join
		          WIFFinInsurances T3 ON T3.InsId = T1.InsId Inner join
		          WIFfinscheduledetails T2 ON T2.SchDate = T1.InsSchDate AND T3.Reference = T2.FinReference
		
		WHERE     NOT EXISTS
		                          (SELECT     1
		                            FROM       FinSchFrqInsurance_Temp
		                            WHERE      InsId = T1.InsId and InsSchDate =T1.InsSchDate)
	</createView>
	</changeSet>
	<changeSet author="Subbarao" id="107">
	<createView viewName="CustomerDirectorDetail_AView"
		replaceIfExists="true">
	SELECT     T1.DirectorId, T1.CustID, T2.CustCIF lovDescCustCIF, T2.CustShrtName lovDescCustShrtName, T1.FirstName, T1.MiddleName, T1.LastName, T1.ShortName, 
                      T1.CustGenderCode, T1.CustSalutationCode, T1.SharePerc, T1.CustAddrHNbr, T1.CustFlatNbr, T1.CustAddrStreet, T1.CustAddrLine1, T1.CustAddrLine2, T1.CustPOBox, 
                      T1.CustAddrCity, T1.CustAddrProvince, T1.CustAddrCountry, T1.CustAddrZIP, T1.CustAddrPhone, T1.CustAddrFrom, T1.Shareholder, T1.Director, T1.Designation, 
                      T1.IDType, T1.IDReference, T1.Nationality, T1.DOB, T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, 
                      T1.NextTaskId, T1.RecordType, T1.WorkflowId, T2.RecordType lovDescCustRecordType, T5.PCCityName lovDescCustAddrCityName, 
                      T6.CPProvinceName lovDescCustAddrProvinceName, T7.CountryDesc lovDescCustAddrCountryName, T3.GenderDesc lovDescCustGenderCodeName, 
                      T4.SaluationDesc lovDescCustSalutationCodeName, T8.DesgDesc lovDescDesignationName, T9.CountryDesc lovDescNationalityName, 
                      T10.DocTypeDesc lovDescCustDocCategoryName,COALESCE(T10.DocIdNumMand,0) IDReferenceMand
FROM          CustomerDirectorDetail T1 INNER JOIN
                       Customers_View T2 ON T1.CustID = T2.CustID LEFT OUTER JOIN
                       BMTGenders T3 ON T1.CustGenderCode = T3.GenderCode LEFT OUTER JOIN
                       BMTSalutations T4 ON T1.CustSalutationCode = T4.SalutationCode LEFT OUTER JOIN
                       RMTProvinceVsCity T5 ON T1.CustAddrCountry = T5.PCCountry AND T1.CustAddrProvince = T5.PCProvince AND T1.CustAddrCity = T5.PCCity LEFT OUTER JOIN
                       RMTCountryVsProvince T6 ON T1.CustAddrCountry = T6.CPCountry AND T1.CustAddrProvince = T6.CPProvince INNER JOIN
                       BMTCountries T7 ON T1.CustAddrCountry = T7.CountryCode LEFT OUTER JOIN
                       BMTDesignations T8 ON T1.Designation = T8.DesgCode LEFT OUTER JOIN
                       BMTCountries T9 ON T1.Nationality = T9.CountryCode LEFT OUTER JOIN
                       BMTDocumentTypes T10 ON T1.IDType = T10.DocTypeCode
	</createView>
</changeSet>
	<changeSet author="Subbarao" id="108">
		<createView viewName="CustomerDirectorDetail_View"
			replaceIfExists="true">
	SELECT     T1.DirectorId, T1.CustID, T2.CustCIF lovDescCustCIF, T2.CustShrtName lovDescCustShrtName, T1.FirstName, T1.MiddleName, T1.LastName, T1.ShortName, 
                      T1.CustGenderCode, T1.CustSalutationCode, T1.SharePerc, T1.CustAddrHNbr, T1.CustFlatNbr, T1.CustAddrStreet, T1.CustAddrLine1, T1.CustAddrLine2, T1.CustPOBox, 
                      T1.CustAddrCity, T1.CustAddrProvince, T1.CustAddrCountry, T1.CustAddrZIP, T1.CustAddrPhone, T1.CustAddrFrom, T1.Shareholder, T1.Director, T1.Designation, 
                      T1.IDType, T1.IDReference, T1.Nationality, T1.DOB, T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, 
                      T1.NextTaskId, T1.RecordType, T1.WorkflowId, T2.RecordType lovDescCustRecordType, T5.PCCityName lovDescCustAddrCityName, 
                      T6.CPProvinceName lovDescCustAddrProvinceName, T7.CountryDesc lovDescCustAddrCountryName, T3.GenderDesc lovDescCustGenderCodeName, 
                      T4.SaluationDesc lovDescCustSalutationCodeName, T8.DesgDesc lovDescDesignationName, T9.CountryDesc lovDescNationalityName, 
                      T10.DocTypeDesc lovDescCustDocCategoryName,COALESCE(T10.DocIdNumMand,0) IDReferenceMand
FROM         CustomerDirectorDetail_TEMP T1 INNER JOIN
                       Customers_View T2 ON T1.CustID = T2.CustID LEFT OUTER JOIN
                       BMTGenders T3 ON T1.CustGenderCode = T3.GenderCode LEFT OUTER JOIN
                       BMTSalutations T4 ON T1.CustSalutationCode = T4.SalutationCode LEFT OUTER JOIN
                       RMTProvinceVsCity T5 ON T1.CustAddrCountry = T5.PCCountry AND T1.CustAddrProvince = T5.PCProvince AND T1.CustAddrCity = T5.PCCity LEFT OUTER JOIN
                       RMTCountryVsProvince T6 ON T1.CustAddrCountry = T6.CPCountry AND T1.CustAddrProvince = T6.CPProvince INNER JOIN
                       BMTCountries T7 ON T1.CustAddrCountry = T7.CountryCode LEFT OUTER JOIN
                       BMTDesignations T8 ON T1.Designation = T8.DesgCode LEFT OUTER JOIN
                       BMTCountries T9 ON T1.Nationality = T9.CountryCode LEFT OUTER JOIN
                       BMTDocumentTypes T10 ON T1.IDType = T10.DocTypeCode
UNION ALL
SELECT     T1.DirectorId, T1.CustID, T2.CustCIF lovDescCustCIF, T2.CustShrtName lovDescCustShrtName, T1.FirstName, T1.MiddleName, T1.LastName, T1.ShortName, 
                      T1.CustGenderCode, T1.CustSalutationCode, T1.SharePerc, T1.CustAddrHNbr, T1.CustFlatNbr, T1.CustAddrStreet, T1.CustAddrLine1, T1.CustAddrLine2, T1.CustPOBox, 
                      T1.CustAddrCity, T1.CustAddrProvince, T1.CustAddrCountry, T1.CustAddrZIP, T1.CustAddrPhone, T1.CustAddrFrom, T1.Shareholder, T1.Director, T1.Designation, 
                      T1.IDType, T1.IDReference, T1.Nationality, T1.DOB, T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, 
                      T1.NextTaskId, T1.RecordType, T1.WorkflowId, T2.RecordType lovDescCustRecordType, T5.PCCityName lovDescCustAddrCityName, 
                      T6.CPProvinceName lovDescCustAddrProvinceName, T7.CountryDesc lovDescCustAddrCountryName, T3.GenderDesc lovDescCustGenderCodeName, 
                      T4.SaluationDesc lovDescCustSalutationCodeName, T8.DesgDesc lovDescDesignationName, T9.CountryDesc lovDescNationalityName, 
                      T10.DocTypeDesc lovDescCustDocCategoryName,COALESCE(T10.DocIdNumMand,0) IDReferenceMand
FROM         CustomerDirectorDetail T1 INNER JOIN
                       Customers_View T2 ON T1.CustID = T2.CustID LEFT OUTER JOIN
                       BMTGenders T3 ON T1.CustGenderCode = T3.GenderCode LEFT OUTER JOIN
                       BMTSalutations T4 ON T1.CustSalutationCode = T4.SalutationCode LEFT OUTER JOIN
                       RMTProvinceVsCity T5 ON T1.CustAddrCountry = T5.PCCountry AND T1.CustAddrProvince = T5.PCProvince AND T1.CustAddrCity = T5.PCCity LEFT OUTER JOIN
                       RMTCountryVsProvince T6 ON T1.CustAddrCountry = T6.CPCountry AND T1.CustAddrProvince = T6.CPProvince INNER JOIN
                       BMTCountries T7 ON T1.CustAddrCountry = T7.CountryCode LEFT OUTER JOIN
                       BMTDesignations T8 ON T1.Designation = T8.DesgCode LEFT OUTER JOIN
                       BMTCountries T9 ON T1.Nationality = T9.CountryCode LEFT OUTER JOIN
                       BMTDocumentTypes T10 ON T1.IDType = T10.DocTypeCode
WHERE     NOT EXISTS
                          (SELECT     1
                            FROM          CustomerDirectorDetail_TEMP
                            WHERE      DirectorId = T1.DirectorId AND CustID = T1.CustID)
	</createView>
	</changeSet>
 <changeSet  author="DurgaPrasadD" id="DDP01">
	<sql>
		INSERT INTO ErrorDetails VALUES('90123','EN','E','Either {0} or {1} are mandatory.','','Approved','','','','','',0,GETDATE(),1000,0);
		INSERT INTO ErrorDetails VALUES('90121','EN','E','Employment Start Date {0} is grater than or equal to employment End Date {1}.','','Approved','','','','','',0,GETDATE(),1000,0);
		INSERT INTO ErrorDetails VALUES('90122','EN','E','Invalid docFormat {0}.','','Approved','','','','','',0,GETDATE(),1000,0);
		INSERT INTO ErrorDetails VALUES('90124','EN','E','{0} is only applicable for {1} customer.','','Approved','','','','','',0,GETDATE(),1000,0);
		
		INSERT INTO ErrorDetails VALUES('91121','EN','E','{0} should be greater than {1}.','','Approved','','','','','',0,GETDATE(),1000,0);
		INSERT INTO ErrorDetails VALUES('91122','EN','E','Can not proceed further, Finance already exists with reference {0}.','','Approved','','','','','',0,GETDATE(),1000,0);
		INSERT INTO ErrorDetails VALUES('91123','EN','E','Invalid frequency day:{0}.','','Approved','','','','','',0,GETDATE(),1000,0);
		INSERT INTO ErrorDetails VALUES('91124','EN','E','{0} is applicable only for grace allowed finances.','','Approved','','','','','',0,GETDATE(),1000,0);
		INSERT INTO ErrorDetails VALUES('91125','EN','E','{0} should be greater than {1}.','','Approved','','','','','',0,GETDATE(),1000,0);
		
		INSERT INTO ErrorDetails VALUES('90807','EN','E','Invalid limitId with code {0}.','','Approved','','','','','',0,GETDATE(),1000,0);
		INSERT INTO ErrorDetails VALUES('90808','EN','E','Customer {0} not exists in the customerGroup {1}.','','Approved','','','','','',0,GETDATE(),1000,0);
	</sql>
	</changeSet>
	<changeSet  author="madhubabu" id="madhubabu20">
	<sql>
	UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS)
	UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS)
	INSERT INTO SecRights SELECT (select (SeqNo+1) from SeqSecRights),2,'btnNew_InsuranceTypeDialog_insuranceProvider','MENU',0,1000,null,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0
	INSERT INTO SecGroupRights SELECT (select (SeqNo+1) from SeqSecGroupRights), (select grpid from SecGroups where GrpCode='INSURANCETYPE_MAKER'), (select RightID from SecRights where RightName='btnNew_InsuranceTypeDialog_insuranceProvider'),1,0,10000,null,' ',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0
	UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS)
	UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS) 
</sql>
</changeSet>
<changeSet  author="madhubabu" id="madhubabu22">
	<sql>
	update SecRights set page='InsuranceTypeDialog' where rightname='btnNew_InsuranceTypeDialog_insuranceProvider'
</sql>
</changeSet>

	<changeSet  author="Irfan" id="irfan01">
	<addColumn tableName="FinanceMain">
	<column name="ReferralId" type="nvarchar(8)"/>
	<column name="DmaCode" type="nvarchar(8)"/>
	<column name="SalesDepartment" type="nvarchar(8)"/>
	<column name="QuickDisb" type="nchar(1)"/>
	<column name="WifReference" type="nvarchar(20)"/>
	</addColumn>
	</changeSet>
	
	<changeSet  author="Irfan" id="irfan02">
	<addColumn tableName="FinanceMain_Temp">
	<column name="ReferralId" type="nvarchar(8)"/>
	<column name="DmaCode" type="nvarchar(8)"/>
	<column name="SalesDepartment" type="nvarchar(8)"/>
	<column name="QuickDisb" type="nchar(1)"/>
	<column name="WifReference" type="nvarchar(20)"/>
	</addColumn>
	</changeSet>
	
	<changeSet author="Irfan" id="irfan03" >
		<addColumn tableName="RejectFinanceMain">
		<column name="ReferralId" type="nvarchar(8)"/>
		<column name="DmaCode" type="nvarchar(8)"/>
		<column name="SalesDepartment" type="nvarchar(8)"/>
		<column name="QuickDisb" type="nchar(1)"/>
		<column name="WifReference" type="nvarchar(20)"/>
		</addColumn>
	</changeSet>
	
	<changeSet  author="Irfan" id="irfan04">
	<createView replaceIfExists="true" viewName="FinanceMain_View">
	SELECT     T1.FinReference, T1.InvestmentRef, T1.NumberOfTerms, T1.GrcPeriodEndDate, T1.AllowGrcPeriod, T1.GraceBaseRate, T1.GraceSpecialRate, T1.GrcPftRate, 
                      T1.GrcPftFrq, T1.NextGrcPftDate, T1.AllowGrcPftRvw, T1.GrcPftRvwFrq, T1.NextGrcPftRvwDate, T1.AllowGrcCpz, T1.GrcCpzFrq, T1.NextGrcCpzDate, 
                      T1.RepayBaseRate, T1.RepaySpecialRate, T1.RepayProfitRate, T1.RepayFrq, T1.NextRepayDate, T1.RepayPftFrq, T1.NextRepayPftDate, T1.AllowRepayRvw, 
                      T1.RepayRvwFrq, T1.NextRepayRvwDate, T1.AllowRepayCpz, T1.RepayCpzFrq, T1.NextRepayCpzDate, T1.MaturityDate, T1.CpzAtGraceEnd, T1.DownPayment, 
                      T1.GraceFlatAmount, T1.ReqRepayAmount, T1.TotalProfit, T1.TotalCpz, T1.TotalGrossPft, T1.TotalGrossGrcPft, T1.TotalGracePft, T1.TotalGraceCpz, T1.GrcRateBasis, 
                      T1.RepayRateBasis, T1.FinType, T1.FinRemarks, T1.FinCcy, T1.ScheduleMethod, T1.ProfitDaysBasis, T1.ReqMaturity, T1.CalTerms, T1.CalMaturity, T1.FirstRepay, 
                      T1.LastRepay, T1.FinStartDate, T1.FinAmount, T1.FinAmount + T1.FeeChargeAmt - T1.DownPayment lovDescFinancingAmount, T1.FinRepaymentAmount, T1.CustID, 
                      T1.Defferments, T1.PlanDeferCount, T1.FinBranch, T1.FinSourceID, T1.AllowedDefRpyChange, T1.AvailedDefRpyChange, T1.AllowedDefFrqChange, 
                      T1.AvailedDefFrqChange, T1.RecalType, T1.FinAssetValue, T1.DisbAccountId, T1.RepayAccountId, T1.FinIsActive, T1.LimitValid, T1.OverrideLimit, T1.SecurityDeposit, 
                      T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId, 
                      T2.CcyDesc lovDescFinCcyName, T3.SchdMethodDesc lovDescScheduleMethodName, T4.IntRateBasisDesc lovDescProfitDaysBasisName, 
                      T5.BRTypeDesc lovDescGraceBaseRateName, T6.SRTypeDesc lovDescGraceSpecialRateName, T7.FinTypeDesc lovDescFinTypeName, 
                      T8.BRTypeDesc lovDescRepayBaseRateName, T9.SRTypeDesc lovDescRepaySpecialRateName, T2.CcyEditField lovDescFinFormatter, 
                      T7.FinIsAlwMD lovDescFinIsAlwMD, T7.FinMaxAmount lovDescFinMaxAmt, T7.FinMinAmount lovDescFinMinAmount, T1.MinDownpayPerc, 
                      T7.FinIsAlwDifferment lovDescFinAlwDeferment, T7.FinIsDwPayRequired lovDescDwnPayReq, T7.FinMaxDifferment lovDescFinMaxDifferment, 
                      T10.CustCIF lovDescCustCIF, T10.CustFName lovDescCustFName, T10.CustLName lovDescCustLName, T12.BranchDesc lovDescFinBranchName, T1.LastRepayDate, 
                      T1.LastRepayPftDate, T1.LastRepayRvwDate, T1.LastRepayCpzDate,  
                      T1.AllowGrcRepay, T1.GrcSchdMthd, T1.GrcMargin, T1.RepayMargin, T1.FinCurrAssetValue, T1.FinCommitmentRef, T1.FinLimitRef,
                      T1.DepreciationFrq, T1.FinContractDate, T13.SaluationDesc lovDescSalutationName, T10.CustShrtName lovDescCustShrtName, 
                      T10.CustCoreBank lovDescCustCoreBank, T1.NextDepDate, T1.LastDepDate, T1.FinAccount, T1.FinCustPftAccount, T1.AlwIndRate, T1.IndBaseRate, T1.GrcAlwIndRate, 
                      T1.GrcIndBaseRate, T15.BRTypeDesc lovDescIndBaseRateName, T16.BRTypeDesc lovDescGrcIndBaseRateName, T17.AcrTillLBD lovDescAccruedTillLBD, 
                      T7.FinRvwRateApplFor, T7.FinGrcRvwRateApplFor, T1.TotalRepayAmt, T7.FinCategory lovDescProductCodeName, T10.CustCtgCode lovDescCustCtgCode, 
                      T1.ClosingStatus, T1.FinApprovedDate, T1.FeeChargeAmt, T1.Blacklisted, T1.FinRepayPftOnFrq, T1.AnualizedPercRate, T1.EffectiveRateOfReturn, 
                      T19.CmtTitle lovDescCommitmentRefName, T31.LimitDesc lovDescLimitRefName, T1.MigratedFinance, T1.ScheduleMaintained, 
                      T1.ScheduleRegenerated, T1.FinPurpose, T20.ValueDesc lovDescFinPurposeName, T1.FinStatus, T1.FinStsReason, T1.InitiateUser, T1.BankName, T1.iban, 
                      T1.AccountType, T1.DdaReferenceNo, T7.FinScheduleOn LovDescFinScheduleOn, T1.CustDSR, T1.Authorization1, T1.Authorization2, 
                      T21.AuthName lovDescAuthorization1Name, T22.AuthName lovDescAuthorization2Name, T1.JointAccount, T1.JointCustId, 
                      T23.CustShrtName lovDescJointCustShrtName, T23.CustCIF lovDescJointCustCIF, '0' AvailCommitAmount, T1.DownPayBank, T1.DownPaySupl, T1.DownPayAccount, 
                      T1.SecurityCollateral, T1.CustomerAcceptance, T1.Approved, T1.CbbApprovalRequired, T1.CbbApproved, T1.Discrepancy, T1.LimitApproved, T1.GraceTerms, 
                      T7.FinDivision lovDescFinDivision, T1.RcdMaintainSts, T1.FinRepayMethod, T1.GrcProfitDaysBasis, T1.StepFinance,T1.StepType, T1.StepPolicy, T1.AlwManualSteps, 
                      T1.NoOfSteps, T1.TakafulFrq, T1.TakafulRate, T1.WaiverReason, T1.TakafulRef, T1.TakafulRequired, 
                      T1.LinkedFinRef, T1.NextUserId, T1.Priority, T24.PolicyDesc LovDescStepPolicyName, T1.GrcMinRate, T1.GrcMaxRate, T1.RpyMinRate, T1.RpyMaxRate, 
                      T2.CcyEditField ReportFormat, T1.DeviationApproval, T1.PptTakafulRequired, T1.PptTakafulFrq, T1.PptWaiverReason, T1.PptTakafulRate, T1.PptTakafulRef, 
                      T1.ManualSchedule, T1.TakeOverFinance, T1.GrcAdvBaseRate, T1.GrcAdvMargin, T1.GrcAdvPftRate, T1.RpyAdvBaseRate, T1.RpyAdvMargin, T1.RpyAdvPftRate, 
                      T25.BRTypeDesc GrcAdvBaseRateDesc, T26.BRTypeDesc RpyAdvBaseRateDesc, T1.SupplementRent, T1.IncreasedCost, T1.CreditInsAmt, T1.RolloverFrq, 
                      T1.NextRolloverDate, T27.CustStsDescription, T1.ShariaStatus, T1.InitiateDate, T1.FINPREAPPROVEDREF, T1.MMAId, T1.AccountsOfficer, 
                      T1.feeAccountId, T1.FinCancelAc,T29.AgreeName, T28.GenDeptDesc lovDescAccountsOfficer,T1.DSACode,T30.ROfficerDesc DSACodeDesc,
					  T29.MMAReference  LovDescMMAReference,T1.TDSApplicable,T1.TakafulStatus, T32.ProductCategory,T1.MandateID,T1.DroplineFrq,T1.FirstDroplineDate,T1.PftServicingODLimit,T1.InsuranceAmt,T1.DeductInsDisb,
					  T1.AlwBPI , T1.BpiTreatment , T1.PlanEMIHAlw , T1.PlanEMIHMethod , T1.PlanEMIHMaxPerYear , T1.PlanEMIHMax , T1.PlanEMIHLockPeriod , T1.PlanEMICpz , T1.CalRoundingMode , T1.AlwMultiDisb , T1.ApplicationNo,
					  T1.ReferralId , T30.ROfficerDesc ReferralIdDesc, T1.DmaCode , T30.ROfficerDesc DmaCodeDesc,  T1.SalesDepartment , T28.GenDeptDesc SalesDepartmentDesc , T1.QuickDisb , T1.WifReference
						FROM         FinanceMain_Temp T1 INNER JOIN
                      RMTCurrencies T2 ON T1.FinCcy = T2.CcyCode LEFT OUTER JOIN
                      BMTSchdMethod T3 ON T1.ScheduleMethod = T3.SchdMethod LEFT OUTER JOIN
                      BMTIntRateBasisCodes T4 ON T1.ProfitDaysBasis = T4.IntRateBasisCode LEFT OUTER JOIN
                      RMTBaseRateCodes T5 ON T1.GraceBaseRate = T5.BRType LEFT OUTER JOIN
                      RMTSplRateCodes T6 ON T1.GraceSpecialRate = T6.SRType INNER JOIN
                      RMTFinanceTypes T7 ON T1.FinType = T7.FinType LEFT OUTER JOIN
                      RMTBaseRateCodes T8 ON T1.RepayBaseRate = T8.BRType LEFT OUTER JOIN
                      RMTSplRateCodes T9 ON T1.RepaySpecialRate = T9.SRType LEFT OUTER JOIN
                      Customers T10 ON T1.CustID = T10.CustID LEFT OUTER JOIN
                      BMTSalutations T13 ON T10.CustSalutationCode = T13.SalutationCode LEFT OUTER JOIN
                      RMTBranches T12 ON T1.FinBranch = T12.BranchCode LEFT OUTER JOIN
                      RMTBaseRateCodes T15 ON T1.IndBaseRate = T15.BRType LEFT OUTER JOIN
                      RMTBaseRateCodes T16 ON T1.GrcIndBaseRate = T16.BRType LEFT OUTER JOIN
                      FINPFTDETAILS T17 ON T17.FINREFERENCE = T1.FINREFERENCE LEFT OUTER JOIN
                      Commitments T19 ON T1.FinCommitmentRef = T19.CmtReference AND T10.CustID = T19.custID LEFT OUTER JOIN
                      RMTLOVFielddetail T20 ON T20.FieldCode = 'FINASSTYP' AND T1.FinPurpose = T20.FieldCodeValue LEFT OUTER JOIN
                      AMTAuthorization T21 ON T1.Authorization1 = T21.AuthUserId LEFT OUTER JOIN
                      AMTAuthorization T22 ON T1.Authorization2 = T22.AuthUserId LEFT OUTER JOIN
                      Customers T23 ON T1.JointCustId = T23.CustID LEFT OUTER JOIN
                      StepPolicyHeader T24 ON T1.StepPolicy = T24.PolicyCode LEFT OUTER JOIN
                      RMTBaseRateCodes T25 ON T1.GrcAdvBaseRate = T25.BRType LEFT OUTER JOIN
                      RMTBaseRateCodes T26 ON T1.RpyAdvBaseRate = T26.BRType LEFT OUTER JOIN
                      BMTCustStatusCodes T27 ON T1.finStatus = T27.CustStsCode LEFT OUTER JOIN
                      RMTGenDepartments T28 ON T1.AccountsOfficer = T28.GenDepartment LEFT OUTER JOIN
					  MMAgreements T29 ON T1.MMAId = T29.MMAId LEFT OUTER JOIN
					  RelationshipOfficers T30 ON T1.DSACode = T30.ROfficerCode LEFT OUTER JOIN
                      LimitAPIDetails T31 ON T1.FinLimitRef = T31.LimitRef AND T10.CustCIF = T31.CustomerReference INNER JOIN  
                      BMTProduct T32 ON T7.FinCategory = T32.ProductCode -- New Filed
			 
	UNION ALL
	SELECT     T1.FinReference, T1.InvestmentRef, T1.NumberOfTerms, T1.GrcPeriodEndDate, T1.AllowGrcPeriod, T1.GraceBaseRate, T1.GraceSpecialRate, T1.GrcPftRate, 
                      T1.GrcPftFrq, T1.NextGrcPftDate, T1.AllowGrcPftRvw, T1.GrcPftRvwFrq, T1.NextGrcPftRvwDate, T1.AllowGrcCpz, T1.GrcCpzFrq, T1.NextGrcCpzDate, 
                      T1.RepayBaseRate, T1.RepaySpecialRate, T1.RepayProfitRate, T1.RepayFrq, T1.NextRepayDate, T1.RepayPftFrq, T1.NextRepayPftDate, T1.AllowRepayRvw, 
                      T1.RepayRvwFrq, T1.NextRepayRvwDate, T1.AllowRepayCpz, T1.RepayCpzFrq, T1.NextRepayCpzDate, T1.MaturityDate, T1.CpzAtGraceEnd, T1.DownPayment, 
                      T1.GraceFlatAmount, T1.ReqRepayAmount, T1.TotalProfit, T1.TotalCpz, T1.TotalGrossPft, T1.TotalGrossGrcPft, T1.TotalGracePft, T1.TotalGraceCpz, T1.GrcRateBasis, 
                      T1.RepayRateBasis, T1.FinType, T1.FinRemarks, T1.FinCcy, T1.ScheduleMethod, T1.ProfitDaysBasis, T1.ReqMaturity, T1.CalTerms, T1.CalMaturity, T1.FirstRepay, 
                      T1.LastRepay, T1.FinStartDate, T1.FinAmount, T1.FinAmount + T1.FeeChargeAmt - T1.DownPayment lovDescFinancingAmount, T1.FinRepaymentAmount, T1.CustID, 
                      T1.Defferments, T1.PlanDeferCount, T1.FinBranch, T1.FinSourceID, T1.AllowedDefRpyChange, T1.AvailedDefRpyChange, T1.AllowedDefFrqChange, 
                      T1.AvailedDefFrqChange, T1.RecalType, T1.FinAssetValue, T1.DisbAccountId, T1.RepayAccountId, T1.FinIsActive, T1.LimitValid, T1.OverrideLimit, T1.SecurityDeposit, 
                      T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId, 
                      T2.CcyDesc lovDescFinCcyName, T3.SchdMethodDesc lovDescScheduleMethodName, T4.IntRateBasisDesc lovDescProfitDaysBasisName, 
                      T5.BRTypeDesc lovDescGraceBaseRateName, T6.SRTypeDesc lovDescGraceSpecialRateName, T7.FinTypeDesc lovDescFinTypeName, 
                      T8.BRTypeDesc lovDescRepayBaseRateName, T9.SRTypeDesc lovDescRepaySpecialRateName, T2.CcyEditField lovDescFinFormatter, 
                      T7.FinIsAlwMD lovDescFinIsAlwMD, T7.FinMaxAmount lovDescFinMaxAmt, T7.FinMinAmount lovDescFinMinAmount, T1.MinDownpayPerc, 
                      T7.FinIsAlwDifferment lovDescFinAlwDeferment, T7.FinIsDwPayRequired lovDescDwnPayReq, T7.FinMaxDifferment lovDescFinMaxDifferment, 
                      T10.CustCIF lovDescCustCIF, T10.CustFName lovDescCustFName, T10.CustLName lovDescCustLName, T12.BranchDesc lovDescFinBranchName, T1.LastRepayDate, 
                      T1.LastRepayPftDate, T1.LastRepayRvwDate, T1.LastRepayCpzDate,  
                      T1.AllowGrcRepay, T1.GrcSchdMthd, T1.GrcMargin, T1.RepayMargin, T1.FinCurrAssetValue, T1.FinCommitmentRef, T1.FinLimitRef,
                      T1.DepreciationFrq, T1.FinContractDate, T13.SaluationDesc lovDescSalutationName, T10.CustShrtName lovDescCustShrtName, 
                      T10.CustCoreBank lovDescCustCoreBank, T1.NextDepDate, T1.LastDepDate, T1.FinAccount, T1.FinCustPftAccount, T1.AlwIndRate, T1.IndBaseRate, T1.GrcAlwIndRate, 
                      T1.GrcIndBaseRate, T15.BRTypeDesc lovDescIndBaseRateName, T16.BRTypeDesc lovDescGrcIndBaseRateName, T17.AcrTillLBD lovDescAccruedTillLBD, 
                      T7.FinRvwRateApplFor, T7.FinGrcRvwRateApplFor, T1.TotalRepayAmt, T7.FinCategory lovDescProductCodeName, T10.CustCtgCode lovDescCustCtgCode, 
                      T1.ClosingStatus, T1.FinApprovedDate, T1.FeeChargeAmt, T1.Blacklisted, T1.FinRepayPftOnFrq, T1.AnualizedPercRate, T1.EffectiveRateOfReturn, 
                      T19.CmtTitle lovDescCommitmentRefName, T31.LimitDesc lovDescLimitRefName, T1.MigratedFinance, T1.ScheduleMaintained, 
                      T1.ScheduleRegenerated, T1.FinPurpose, T20.ValueDesc lovDescFinPurposeName, T1.FinStatus, T1.FinStsReason, T1.InitiateUser, T1.BankName, T1.iban, 
                      T1.AccountType, T1.DdaReferenceNo, T7.FinScheduleOn LovDescFinScheduleOn, T1.CustDSR, T1.Authorization1, T1.Authorization2, 
                      T21.AuthName lovDescAuthorization1Name, T22.AuthName lovDescAuthorization2Name, T1.JointAccount, T1.JointCustId, 
                      T23.CustShrtName lovDescJointCustShrtName, T23.CustCIF lovDescJointCustCIF, '0' AvailCommitAmount, T1.DownPayBank, T1.DownPaySupl, T1.DownPayAccount, 
                      T1.SecurityCollateral, T1.CustomerAcceptance, T1.Approved, T1.CbbApprovalRequired, T1.CbbApproved, T1.Discrepancy, T1.LimitApproved, T1.GraceTerms, 
                      T7.FinDivision lovDescFinDivision, T1.RcdMaintainSts, T1.FinRepayMethod, T1.GrcProfitDaysBasis, T1.StepFinance,T1.StepType, T1.StepPolicy, T1.AlwManualSteps, 
                      T1.NoOfSteps, T1.TakafulFrq, T1.TakafulRate, T1.WaiverReason, T1.TakafulRef, T1.TakafulRequired, 
                      T1.LinkedFinRef, T1.NextUserId, T1.Priority, T24.PolicyDesc LovDescStepPolicyName, T1.GrcMinRate, T1.GrcMaxRate, T1.RpyMinRate, T1.RpyMaxRate, 
                      T2.CcyEditField ReportFormat, T1.DeviationApproval, T1.PptTakafulRequired, T1.PptTakafulFrq, T1.PptWaiverReason, T1.PptTakafulRate, T1.PptTakafulRef, 
                      T1.ManualSchedule, T1.TakeOverFinance, T1.GrcAdvBaseRate, T1.GrcAdvMargin, T1.GrcAdvPftRate, T1.RpyAdvBaseRate, T1.RpyAdvMargin, T1.RpyAdvPftRate, 
                      T25.BRTypeDesc GrcAdvBaseRateDesc, T26.BRTypeDesc RpyAdvBaseRateDesc, T1.SupplementRent, T1.IncreasedCost, T1.CreditInsAmt, T1.RolloverFrq, 
                      T1.NextRolloverDate, T27.CustStsDescription, T1.ShariaStatus, T1.InitiateDate, T1.FINPREAPPROVEDREF, T1.MMAId, T1.AccountsOfficer, 
                      T1.feeAccountId, T1.FinCancelAc,T29.AgreeName, T28.GenDeptDesc lovDescAccountsOfficer,T1.DSACode,T30.ROfficerDesc DSACodeDesc,
					  T29.MMAReference as LovDescMMAReference,T1.TDSApplicable,T1.TakafulStatus, T32.ProductCategory,T1.MandateID,T1.DroplineFrq,T1.FirstDroplineDate,T1.PftServicingODLimit,T1.InsuranceAmt,T1.DeductInsDisb,
					  T1.AlwBPI , T1.BpiTreatment , T1.PlanEMIHAlw , T1.PlanEMIHMethod , T1.PlanEMIHMaxPerYear , T1.PlanEMIHMax , T1.PlanEMIHLockPeriod , T1.PlanEMICpz , T1.CalRoundingMode , T1.AlwMultiDisb ,  T1.ApplicationNo ,
					  T1.ReferralId , T30.ROfficerDesc ReferralIdDesc, T1.DmaCode , T30.ROfficerDesc DmaCodeDesc,  T1.SalesDepartment , T28.GenDeptDesc SalesDepartmentDesc , T1.QuickDisb , T1.WifReference
						FROM         FinanceMain T1 INNER JOIN
                      RMTCurrencies T2 ON T1.FinCcy = T2.CcyCode LEFT OUTER JOIN
                      BMTSchdMethod T3 ON T1.ScheduleMethod = T3.SchdMethod LEFT OUTER JOIN
                      BMTIntRateBasisCodes T4 ON T1.ProfitDaysBasis = T4.IntRateBasisCode LEFT OUTER JOIN
                      RMTBaseRateCodes T5 ON T1.GraceBaseRate = T5.BRType LEFT OUTER JOIN
                      RMTSplRateCodes T6 ON T1.GraceSpecialRate = T6.SRType INNER JOIN
                      RMTFinanceTypes T7 ON T1.FinType = T7.FinType LEFT OUTER JOIN
                      RMTBaseRateCodes T8 ON T1.RepayBaseRate = T8.BRType LEFT OUTER JOIN
                      RMTSplRateCodes T9 ON T1.RepaySpecialRate = T9.SRType LEFT OUTER JOIN
                      Customers T10 ON T1.CustID = T10.CustID LEFT OUTER JOIN
                      BMTSalutations T13 ON T10.CustSalutationCode = T13.SalutationCode LEFT OUTER JOIN
                      RMTBranches T12 ON T1.FinBranch = T12.BranchCode LEFT OUTER JOIN
                      RMTBaseRateCodes T15 ON T1.IndBaseRate = T15.BRType LEFT OUTER JOIN
                      RMTBaseRateCodes T16 ON T1.GrcIndBaseRate = T16.BRType LEFT OUTER JOIN
                      FINPFTDETAILS T17 ON T17.FINREFERENCE = T1.FINREFERENCE LEFT OUTER JOIN
                      Commitments T19 ON T1.FinCommitmentRef = T19.CmtReference AND T10.CustID = T19.custID LEFT OUTER JOIN
                      RMTLOVFielddetail T20 ON T20.FieldCode = 'FINASSTYP' AND T1.FinPurpose = T20.FieldCodeValue LEFT OUTER JOIN
                      AMTAuthorization T21 ON T1.Authorization1 = T21.AuthUserId LEFT OUTER JOIN
                      AMTAuthorization T22 ON T1.Authorization2 = T22.AuthUserId LEFT OUTER JOIN
                      Customers T23 ON T1.JointCustId = T23.CustID LEFT OUTER JOIN
                      StepPolicyHeader T24 ON T1.StepPolicy = T24.PolicyCode LEFT OUTER JOIN
                      RMTBaseRateCodes T25 ON T1.GrcAdvBaseRate = T25.BRType LEFT OUTER JOIN
                      RMTBaseRateCodes T26 ON T1.RpyAdvBaseRate = T26.BRType LEFT OUTER JOIN
                      BMTCustStatusCodes T27 ON T1.finStatus = T27.CustStsCode LEFT OUTER JOIN
                      RMTGenDepartments T28 ON T1.AccountsOfficer = T28.GenDepartment LEFT OUTER JOIN
					  MMAgreements T29 ON T1.MMAId = T29.MMAId LEFT OUTER JOIN 
					  RelationshipOfficers T30 ON T1.DSACode = T30.ROfficerCode LEFT OUTER JOIN
                      LimitAPIDetails T31 ON T1.FinLimitRef = T31.LimitRef AND T10.CustCIF = T31.CustomerReference INNER JOIN --not using 
                      BMTProduct T32 ON T7.FinCategory = T32.ProductCode -- New Filed
						WHERE     (NOT EXISTS
                          (SELECT     1 Expr1
                            FROM          FinanceMain_Temp
                            WHERE      (FINREFERENCE = T1.FINREFERENCE)));
	
	</createView>
	</changeSet>
	<changeSet author="Irfan" id="irfan05">
	<createView replaceIfExists="true" viewName="FinanceMain_TView">
		
		SELECT     T1.FinReference, T1.InvestmentRef, T1.NumberOfTerms, T1.GrcPeriodEndDate, T1.AllowGrcPeriod, T1.GraceBaseRate, T1.GraceSpecialRate, T1.GrcPftRate, 
                      T1.GrcPftFrq, T1.NextGrcPftDate, T1.AllowGrcPftRvw, T1.GrcPftRvwFrq, T1.NextGrcPftRvwDate, T1.AllowGrcCpz, T1.GrcCpzFrq, T1.NextGrcCpzDate, 
                      T1.RepayBaseRate, T1.RepaySpecialRate, T1.RepayProfitRate, T1.RepayFrq, T1.NextRepayDate, T1.RepayPftFrq, T1.NextRepayPftDate, T1.AllowRepayRvw, 
                      T1.RepayRvwFrq, T1.NextRepayRvwDate, T1.AllowRepayCpz, T1.RepayCpzFrq, T1.NextRepayCpzDate, T1.MaturityDate, T1.CpzAtGraceEnd, T1.DownPayment, 
                      T1.GraceFlatAmount, T1.ReqRepayAmount, T1.TotalProfit, T1.TotalCpz, T1.TotalGrossPft, T1.TotalGrossGrcPft, T1.TotalGracePft, T1.TotalGraceCpz, T1.GrcRateBasis, 
                      T1.RepayRateBasis, T1.FinType, T1.FinRemarks, T1.FinCcy, T1.ScheduleMethod, T1.ProfitDaysBasis, T1.ReqMaturity, T1.CalTerms, T1.CalMaturity, T1.FirstRepay, 
                      T1.LastRepay, T1.FinStartDate, T1.FinAmount, T1.FinAmount + T1.FeeChargeAmt - T1.DownPayment lovDescFinancingAmount, T1.FinRepaymentAmount, T1.CustID, 
                      T1.Defferments, T1.PlanDeferCount, T1.FinBranch, T1.FinSourceID, T1.AllowedDefRpyChange, T1.AvailedDefRpyChange, T1.AllowedDefFrqChange, 
                      T1.AvailedDefFrqChange, T1.RecalType, T1.FinAssetValue, T1.DisbAccountId, T1.RepayAccountId, T1.FinIsActive, T1.LimitValid, T1.OverrideLimit, T1.SecurityDeposit, 
                      T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId, 
                      T2.CcyDesc lovDescFinCcyName, T3.SchdMethodDesc lovDescScheduleMethodName, T4.IntRateBasisDesc lovDescProfitDaysBasisName, 
                      T5.BRTypeDesc lovDescGraceBaseRateName, T6.SRTypeDesc lovDescGraceSpecialRateName, T7.FinTypeDesc lovDescFinTypeName, 
                      T8.BRTypeDesc lovDescRepayBaseRateName, T9.SRTypeDesc lovDescRepaySpecialRateName, T2.CcyEditField lovDescFinFormatter, 
                      T7.FinIsAlwMD lovDescFinIsAlwMD, T7.FinMaxAmount lovDescFinMaxAmt, T7.FinMinAmount lovDescFinMinAmount, T1.MinDownpayPerc, 
                      T7.FinIsAlwDifferment lovDescFinAlwDeferment, T7.FinIsDwPayRequired lovDescDwnPayReq, T7.FinMaxDifferment lovDescFinMaxDifferment, 
                      T10.CustCIF lovDescCustCIF, T10.CustFName lovDescCustFName, T10.CustLName lovDescCustLName, T12.BranchDesc lovDescFinBranchName, T1.LastRepayDate, 
                      T1.LastRepayPftDate, T1.LastRepayRvwDate, T1.LastRepayCpzDate,  
                      T1.AllowGrcRepay, T1.GrcSchdMthd, T1.GrcMargin, T1.RepayMargin, T1.FinCurrAssetValue, T1.FinCommitmentRef, T1.FinLimitRef,
                      T1.DepreciationFrq, T1.FinContractDate, T13.SaluationDesc lovDescSalutationName, T10.CustShrtName lovDescCustShrtName, 
                      T10.CustCoreBank lovDescCustCoreBank, T1.NextDepDate, T1.LastDepDate, T1.FinAccount, T1.FinCustPftAccount, T1.AlwIndRate, T1.IndBaseRate, T1.GrcAlwIndRate, 
                      T1.GrcIndBaseRate, T15.BRTypeDesc lovDescIndBaseRateName, T16.BRTypeDesc lovDescGrcIndBaseRateName, T17.AcrTillLBD lovDescAccruedTillLBD, 
                      T7.FinRvwRateApplFor, T7.FinGrcRvwRateApplFor, T1.TotalRepayAmt, T7.FinCategory lovDescProductCodeName, T10.CustCtgCode lovDescCustCtgCode, 
                      T1.ClosingStatus, T1.FinApprovedDate, T1.FeeChargeAmt, T1.Blacklisted, T1.FinRepayPftOnFrq, T1.AnualizedPercRate, T1.EffectiveRateOfReturn, 
                      T19.CmtTitle lovDescCommitmentRefName, T31.LimitDesc lovDescLimitRefName, T1.MigratedFinance, T1.ScheduleMaintained, 
                      T1.ScheduleRegenerated, T1.FinPurpose, T20.ValueDesc lovDescFinPurposeName, T1.FinStatus, T1.FinStsReason, T1.InitiateUser, T1.BankName, T1.iban, 
                      T1.AccountType, T1.DdaReferenceNo, T7.FinScheduleOn LovDescFinScheduleOn, T1.CustDSR, T1.Authorization1, T1.Authorization2, 
                      T21.AuthName lovDescAuthorization1Name, T22.AuthName lovDescAuthorization2Name, T1.JointAccount, T1.JointCustId, 
                      T23.CustShrtName lovDescJointCustShrtName, T23.CustCIF lovDescJointCustCIF, '0' AvailCommitAmount, T1.DownPayBank, T1.DownPaySupl, T1.DownPayAccount, 
                      T1.SecurityCollateral, T1.CustomerAcceptance, T1.Approved, T1.CbbApprovalRequired, T1.CbbApproved, T1.Discrepancy, T1.LimitApproved, T1.GraceTerms, 
                      T7.FinDivision lovDescFinDivision, T1.RcdMaintainSts, T1.FinRepayMethod, T1.GrcProfitDaysBasis, T1.StepFinance,T1.StepType, T1.StepPolicy, T1.AlwManualSteps, 
                      T1.NoOfSteps, T1.TakafulFrq, T1.TakafulRate, T1.WaiverReason, T1.TakafulRef, T1.TakafulRequired, 
                      T1.LinkedFinRef, T1.NextUserId, T1.Priority, T24.PolicyDesc LovDescStepPolicyName, T1.GrcMinRate, T1.GrcMaxRate, T1.RpyMinRate, T1.RpyMaxRate, 
                      T2.CcyEditField ReportFormat, T1.DeviationApproval, T1.PptTakafulRequired, T1.PptTakafulFrq, T1.PptWaiverReason, T1.PptTakafulRate, T1.PptTakafulRef, 
                      T1.ManualSchedule, T1.TakeOverFinance, T1.GrcAdvBaseRate, T1.GrcAdvMargin, T1.GrcAdvPftRate, T1.RpyAdvBaseRate, T1.RpyAdvMargin, T1.RpyAdvPftRate, 
                      T25.BRTypeDesc GrcAdvBaseRateDesc, T26.BRTypeDesc RpyAdvBaseRateDesc, T1.SupplementRent, T1.IncreasedCost, T1.CreditInsAmt, T1.RolloverFrq, 
                      T1.NextRolloverDate, T27.CustStsDescription, T1.ShariaStatus, T1.InitiateDate, T1.FINPREAPPROVEDREF, T1.MMAId, T1.AccountsOfficer, 
                      T1.feeAccountId, T1.FinCancelAc,T29.AgreeName, T28.GenDeptDesc lovDescAccountsOfficer,T1.DSACode,T30.ROfficerDesc DSACodeDesc,
					  T29.MMAReference as LovDescMMAReference,T1.TDSApplicable,T1.TakafulStatus, T32.ProductCategory,T1.MandateID,T1.DroplineFrq,T1.FirstDroplineDate,
					  T1.PftServicingODLimit,T1.InsuranceAmt,T1.DeductInsDisb,T1.AlwBPI , T1.BpiTreatment , T1.PlanEMIHAlw , T1.PlanEMIHMethod , 
					  T1.PlanEMIHMaxPerYear , T1.PlanEMIHMax , T1.PlanEMIHLockPeriod , T1.PlanEMICpz , T1.CalRoundingMode , T1.AlwMultiDisb , T1.ApplicationNo ,
					  T1.ReferralId , T30.ROfficerDesc ReferralIdDesc, T1.DmaCode , T30.ROfficerDesc DmaCodeDesc,  T1.SalesDepartment , T28.GenDeptDesc SalesDepartmentDesc , T1.QuickDisb , T1.WifReference
			FROM         FinanceMain_Temp T1 INNER JOIN
                      RMTCurrencies T2 ON T1.FinCcy = T2.CcyCode LEFT OUTER JOIN --not req
                      BMTSchdMethod T3 ON T1.ScheduleMethod = T3.SchdMethod LEFT OUTER JOIN --verify with combobox reqrmnt
                      BMTIntRateBasisCodes T4 ON T1.ProfitDaysBasis = T4.IntRateBasisCode LEFT OUTER JOIN
                      RMTBaseRateCodes T5 ON T1.GraceBaseRate = T5.BRType LEFT OUTER JOIN --remove join and use single query
                      RMTSplRateCodes T6 ON T1.GraceSpecialRate = T6.SRType INNER JOIN
                      RMTFinanceTypes T7 ON T1.FinType = T7.FinType LEFT OUTER JOIN
                      RMTBaseRateCodes T8 ON T1.RepayBaseRate = T8.BRType LEFT OUTER JOIN --remove join and use single query
                      RMTSplRateCodes T9 ON T1.RepaySpecialRate = T9.SRType LEFT OUTER JOIN
                      Customers T10 ON T1.CustID = T10.CustID LEFT OUTER JOIN
                      BMTSalutations T13 ON T10.CustSalutationCode = T13.SalutationCode LEFT OUTER JOIN --not using it anywhere.remove it
                      RMTBranches T12 ON T1.FinBranch = T12.BranchCode LEFT OUTER JOIN
                      RMTBaseRateCodes T15 ON T1.IndBaseRate = T15.BRType LEFT OUTER JOIN --remove join and use single query
                      RMTBaseRateCodes T16 ON T1.GrcIndBaseRate = T16.BRType LEFT OUTER JOIN --remove join and use single query
                      FINPFTDETAILS T17 ON T17.FINREFERENCE = T1.FINREFERENCE LEFT OUTER JOIN --not req at org
                      Commitments T19 ON T1.FinCommitmentRef = T19.CmtReference AND T10.CustID = T19.custID LEFT OUTER JOIN --not using
                      RMTLOVFielddetail T20 ON T20.FieldCode = 'FINASSTYP' AND T1.FinPurpose = T20.FieldCodeValue LEFT OUTER JOIN
                      AMTAuthorization T21 ON T1.Authorization1 = T21.AuthUserId LEFT OUTER JOIN
                      AMTAuthorization T22 ON T1.Authorization2 = T22.AuthUserId LEFT OUTER JOIN
                      Customers T23 ON T1.JointCustId = T23.CustID LEFT OUTER JOIN --not using
                      StepPolicyHeader T24 ON T1.StepPolicy = T24.PolicyCode LEFT OUTER JOIN
                      RMTBaseRateCodes T25 ON T1.GrcAdvBaseRate = T25.BRType LEFT OUTER JOIN --remove join and use single query
                      RMTBaseRateCodes T26 ON T1.RpyAdvBaseRate = T26.BRType LEFT OUTER JOIN --remove join and use single query
                      BMTCustStatusCodes T27 ON T1.finStatus = T27.CustStsCode LEFT OUTER JOIN --not using in org
                      RMTGenDepartments T28 ON T1.AccountsOfficer = T28.GenDepartment LEFT OUTER JOIN
					  MMAgreements T29 ON T1.MMAId = T29.MMAId LEFT OUTER JOIN
					  RelationshipOfficers T30 ON T1.DSACode = T30.ROfficerCode LEFT OUTER JOIN
                      LimitAPIDetails T31 ON T1.FinLimitRef = T31.LimitRef AND T10.CustCIF = T31.CustomerReference  INNER JOIN --not using 
                      BMTProduct T32 ON T7.FinCategory = T32.ProductCode 
		</createView>
	</changeSet>
	<changeSet author="Irfan" id="irfan06">
		<createView replaceIfExists="true" viewName="FinanceMain_AView">

		SELECT     T1.FinReference, T1.NumberOfTerms, T1.GrcPeriodEndDate, T1.AllowGrcPeriod, T1.GraceBaseRate, T1.GraceSpecialRate, T1.GrcPftRate, T1.GrcPftFrq, 
                      T1.NextGrcPftDate, T1.AllowGrcPftRvw, T1.GrcPftRvwFrq, T1.NextGrcPftRvwDate, T1.AllowGrcCpz, T1.GrcCpzFrq, T1.NextGrcCpzDate, T1.RepayBaseRate, 
                      T1.RepaySpecialRate, T1.RepayProfitRate, T1.RepayFrq, T1.NextRepayDate, T1.RepayPftFrq, T1.NextRepayPftDate, T1.AllowRepayRvw, T1.RepayRvwFrq, 
                      T1.NextRepayRvwDate, T1.AllowRepayCpz, T1.RepayCpzFrq, T1.NextRepayCpzDate, T1.MaturityDate, T1.CpzAtGraceEnd, T1.DownPayment, T1.GraceFlatAmount, 
                      T1.ReqRepayAmount, T1.TotalProfit, T1.TotalCpz, T1.TotalGrossPft, T1.TotalGrossGrcPft, T1.TotalGracePft, T1.TotalGraceCpz, T1.GrcRateBasis, T1.RepayRateBasis, 
                      T1.FinType, T1.FinRemarks, T1.FinCcy, T1.ScheduleMethod, T1.ProfitDaysBasis, T1.ReqMaturity, T1.CalTerms, T1.CalMaturity, T1.FirstRepay, T1.LastRepay, 
                      T1.FinStartDate, T1.FinAmount, T1.FinAmount + T1.FeeChargeAmt - T1.DownPayment  lovDescFinancingAmount, T1.FinRepaymentAmount, T1.CustID, 
                      T1.Defferments, T1.PlanDeferCount, T1.FinBranch, T1.FinSourceID, T1.AllowedDefRpyChange, T1.AvailedDefRpyChange, T1.AllowedDefFrqChange, 
                      T1.AvailedDefFrqChange, T1.RecalType, T1.FinAssetValue, T1.DisbAccountId, T1.RepayAccountId, T1.FinIsActive, T1.LimitValid, T1.OverrideLimit, T1.SecurityDeposit, 
                      T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId, 
                      T2.CcyDesc  lovDescFinCcyName, T3.SchdMethodDesc  lovDescScheduleMethodName, T4.IntRateBasisDesc  lovDescProfitDaysBasisName, 
                      T5.BRTypeDesc  lovDescGraceBaseRateName, T6.SRTypeDesc  lovDescGraceSpecialRateName, T7.FinTypeDesc  lovDescFinTypeName, 
                      T8.BRTypeDesc  lovDescRepayBaseRateName, T9.SRTypeDesc  lovDescRepaySpecialRateName, T2.CcyEditField  lovDescFinFormatter, 
                      T7.FinIsAlwMD  lovDescFinIsAlwMD, T7.FinMaxAmount  lovDescFinMaxAmt, T7.FinMinAmount  lovDescFinMinAmount, 
                      T1.MinDownpayPerc, T7.FinIsAlwDifferment  lovDescFinAlwDeferment, T7.FinIsDwPayRequired  lovDescDwnPayReq, 
                      T7.FinMaxDifferment  lovDescFinMaxDifferment, T10.CustCIF  lovDescCustCIF, T10.CustFName  lovDescCustFName, T10.CustLName  lovDescCustLName, 
                      T12.BranchDesc  lovDescFinBranchName, T1.LastRepayDate, T1.LastRepayPftDate, T1.LastRepayRvwDate, T1.LastRepayCpzDate, 
                       T1.AllowGrcRepay, 
                      T1.GrcSchdMthd, T1.GrcMargin, T1.RepayMargin, T1.FinCurrAssetValue, T1.FinCommitmentRef, T1.FinLimitRef, T1.DepreciationFrq, T1.FinContractDate, 
                      T13.SaluationDesc  lovDescSalutationName, T10.CustShrtName  lovDescCustShrtName, T10.CustCoreBank  lovDescCustCoreBank, T1.NextDepDate, 
                      T1.LastDepDate, T1.FinAccount, T1.FinCustPftAccount, T1.AlwIndRate, T1.IndBaseRate, T1.GrcAlwIndRate, T1.GrcIndBaseRate, 
                      T15.BRTypeDesc  lovDescIndBaseRateName, T16.BRTypeDesc  lovDescGrcIndBaseRateName, T17.AcrTillLBD  lovDescAccruedTillLBD, 
                      T7.FinRvwRateApplFor, T7.FinGrcRvwRateApplFor, T1.TotalRepayAmt, T7.FinCategory  lovDescProductCodeName, T1.ClosingStatus, T1.FinApprovedDate, 
                      T1.FeeChargeAmt, T1.Blacklisted, T1.FinRepayPftOnFrq, T1.AnualizedPercRate, T1.EffectiveRateOfReturn, T10.CustCtgCode  lovDescCustCtgCode, 
                      T19.CmtTitle lovDescCommitmentRefName, T1.MigratedFinance, T1.ScheduleMaintained, T1.ScheduleRegenerated, T1.FinPurpose, 
                      T20.ValueDesc  lovDescFinPurposeName, T1.FinStatus, T1.FinStsReason, T1.InitiateUser, T1.bankName, T1.iban, T1.accountType, T1.DdaReferenceNo, 
                      T7.FinScheduleOn  LovDescFinScheduleOn, T1.CustDSR, T1.Authorization1, T1.Authorization2, T21.AuthName  lovDescAuthorization1Name, 
                      T22.AuthName  lovDescAuthorization2Name, T1.JointAccount, T1.JointCustId, T23.CustShrtName  lovDescJointCustShrtName, 
                      T23.CustCIF  lovDescJointCustCIF, '0'  AvailCommitAmount, T1.DownPayBank, T1.DownPaySupl, T1.DownPayAccount, T1.SecurityCollateral, 
                      T1.CustomerAcceptance, T1.Approved, T1.CbbApprovalRequired, T1.CbbApproved, T1.Discrepancy, T1.LimitApproved, T1.InvestmentRef, T1.GraceTerms, 
                      T7.FinDivision  lovDescFinDivision, T1.RcdMaintainSts, T1.FinRepayMethod, T1.GrcProfitDaysBasis, T1.StepFinance,T1.StepType, T1.StepPolicy, T1.AlwManualSteps, 
                      T1.NoOfSteps, T1.TakafulFrq, T1.TakafulRate, T1.WaiverReason, T1.TakafulRef, T1.TakafulRequired, 
                      T1.LinkedFinRef, T1.NextUserId, T1.Priority, T24.PolicyDesc  LovDescStepPolicyName, T1.GrcMinRate, T1.GrcMaxRate, T1.RpyMinRate, T1.RpyMaxRate, 
                      T2.CcyEditField  ReportFormat, T1.DeviationApproval, T1.PptTakafulRequired, T1.PptTakafulFrq, T1.PptWaiverReason, T1.PptTakafulRate, T1.PptTakafulRef, 
                      T1.ManualSchedule, T1.TakeOverFinance, T1.GrcAdvBaseRate, T1.GrcAdvMargin, T1.GrcAdvPftRate, T1.RpyAdvBaseRate, T1.RpyAdvMargin, T1.RpyAdvPftRate, 
                      T25.BRTypeDesc  GrcAdvBaseRateDesc, T26.BRTypeDesc  RpyAdvBaseRateDesc, T1.SupplementRent, T1.IncreasedCost, T1.CreditInsAmt, T1.RolloverFrq, 
                      T1.NextRolloverDate, T27.CustStsDescription, T1.ShariaStatus, T1.InitiateDate, T1.FINPREAPPROVEDREF, T1.MMAId, T1.AccountsOfficer, 
                      T1.feeAccountId,T1.FinCancelAc,T28.GenDeptDesc lovDescAccountsOfficer,T29.AgreeName,T29.MMAReference as LovDescMMAReference,
					  T1.DSACode,T30.ROfficerDesc DSACodeDesc,T1.TDSApplicable, T31.LimitDesc lovDescLimitRefName,T1.TakafulStatus, T32.ProductCategory,T1.MandateID,T1.DroplineFrq,T1.FirstDroplineDate,
					  T1.PftServicingODLimit,T1.InsuranceAmt,T1.DeductInsDisb,T1.AlwBPI , T1.BpiTreatment , T1.PlanEMIHAlw , T1.PlanEMIHMethod , 
					  T1.PlanEMIHMaxPerYear , T1.PlanEMIHMax , T1.PlanEMIHLockPeriod , T1.PlanEMICpz , T1.CalRoundingMode , T1.AlwMultiDisb , T1.ApplicationNo ,
					  T1.ReferralId , T30.ROfficerDesc ReferralIdDesc, T1.DmaCode , T30.ROfficerDesc DmaCodeDesc,  T1.SalesDepartment , T28.GenDeptDesc SalesDepartmentDesc , T1.QuickDisb , T1.WifReference
						FROM         dbo.FinanceMain AS T1 INNER JOIN
                      RMTCurrencies  T2 ON T1.FinCcy = T2.CcyCode LEFT OUTER JOIN
                      BMTSchdMethod  T3 ON T1.ScheduleMethod = T3.SchdMethod LEFT OUTER JOIN
                      BMTIntRateBasisCodes  T4 ON T1.ProfitDaysBasis = T4.IntRateBasisCode LEFT OUTER JOIN
                      RMTBaseRateCodes T5 ON T1.GraceBaseRate = T5.BRType LEFT OUTER JOIN
                      RMTSplRateCodes  T6 ON T1.GraceSpecialRate = T6.SRType INNER JOIN
                      RMTFinanceTypes  T7 ON T1.FinType = T7.FinType LEFT OUTER JOIN
                      RMTBaseRateCodes T8 ON T1.RepayBaseRate = T8.BRType LEFT OUTER JOIN
                      RMTSplRateCodes  T9 ON T1.RepaySpecialRate = T9.SRType LEFT OUTER JOIN
                      RMTBaseRateCodes T15 ON T1.IndBaseRate = T15.BRType LEFT OUTER JOIN
                      RMTBaseRateCodes T16 ON T1.GrcIndBaseRate = T16.BRType LEFT OUTER JOIN
                      Customers  T10 ON T1.CustID = T10.CustID LEFT OUTER JOIN
                      BMTSalutations  T13 ON T10.CustSalutationCode = T13.SalutationCode LEFT OUTER JOIN
                      RMTBranches  T12 ON T1.FinBranch = T12.BranchCode LEFT OUTER JOIN
                      FinPftDetails  T17 ON T17.FinReference = T1.FinReference LEFT OUTER JOIN
                      Commitments T19 ON T1.FinCommitmentRef = T19.CmtReference AND T10.CustID = T19.custID LEFT OUTER JOIN
                      RMTLovFieldDetail  T20 ON T20.FieldCode = 'FINASSTYP' AND T1.FinPurpose = T20.FieldCodeValue LEFT OUTER JOIN
                      AMTAuthorization  T21 ON T1.Authorization1 = T21.AuthUserId LEFT OUTER JOIN
                      AMTAuthorization  T22 ON T1.Authorization2 = T22.AuthUserId LEFT OUTER JOIN
                      Customers  T23 ON T1.JointCustId = T23.CustID LEFT OUTER JOIN
                      StepPolicyHeader  T24 ON T1.StepPolicy = T24.PolicyCode LEFT OUTER JOIN
                      RMTBaseRateCodes  T25 ON T1.GrcAdvBaseRate = T25.BRType LEFT OUTER JOIN
                      RMTBaseRateCodes  T26 ON T1.RpyAdvBaseRate = T26.BRType LEFT OUTER JOIN
                      BMTCustStatusCodes T27 ON T1.finStatus = T27.CustStsCode LEFT OUTER JOIN 
					  RMTGENDEPARTMENTS T28 ON T1.ACCOUNTSOFFICER = T28.GENDEPARTMENT LEFT OUTER JOIN
					  MMAgreements T29 ON T1.MMAId = T29.MMAId LEFT OUTER JOIN
					  RelationshipOfficers T30 ON T1.DSACode = T30.ROfficerCode LEFT OUTER JOIN
                      LimitAPIDetails T31 ON T1.FinLimitRef = T31.LimitRef AND T10.CustCIF = T31.CustomerReference INNER JOIN  
                      BMTProduct T32 ON T7.FinCategory = T32.ProductCode -- New Filed

		</createView>
		</changeSet>

	<changeSet author="Irfan" id="irfan07">
		<sql>
			Update SeqSecRights set SeqNo = (select MAX(RightID) from SecRights);
			Update SeqSecGroupRights set SeqNo = (select MAX(GrpRightID) from SecGroupRights);
		</sql>
	</changeSet>
	<changeSet author="Irfan" id="irfan08">
		 <comment>SecRights</comment>
			<sql>
			INSERT INTO SecRights SELECT (select (SeqNo+1) from SeqSecRights),3,'FinanceMainDialog_referralId','FinanceMainDialog',0,1000,CURRENT_TIMESTAMP,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
			INSERT INTO SecRights SELECT (select (SeqNo+2) from SeqSecRights),3,'FinanceMainDialog_dmaCode','FinanceMainDialog',0,1000,CURRENT_TIMESTAMP,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
			INSERT INTO SecRights SELECT (select (SeqNo+3) from SeqSecRights),3,'FinanceMainDialog_salesDepartment','FinanceMainDialog',0,1000,CURRENT_TIMESTAMP,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
			INSERT INTO SecRights SELECT (select (SeqNo+4) from SeqSecRights),3,'FinanceMainDialog_quickDisb','FinanceMainDialog',0,1000,CURRENT_TIMESTAMP,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
			INSERT INTO SecRights SELECT (select (SeqNo+5) from SeqSecRights),3,'FinanceMainDialog_applicationNo','FinanceMainDialog',0,1000,CURRENT_TIMESTAMP,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
			</sql>
		</changeSet>
		<changeSet author="Irfan" id="irfan09">
		 <comment>SecGroupRights</comment>
			<sql>
			
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='PBG_TAWARRUQ_BRANCH_CSR') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_referralId'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='PBG_SUKUK_BRANCH_CSR') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_referralId'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='WBG_STRCOMMODITY_RM') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_referralId'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='WBG_MUSHARAKA_CADDUM') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_referralId'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='WBG_MUDARABA_CADDUM') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_referralId'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='WBG_WAKALA_RM') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_referralId'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='WBG_IJARAH_CADDUM') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_referralId'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='WBG_QARDHASSAN_CADDUM') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_referralId'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='PBG_IJA_HF_NEW_FIN_SSO') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_referralId'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='PBG_IJA_CF_NEW_FIN_SSO') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_referralId'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='WBG_CORPMURABAHA_RM') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_referralId'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='WBG_COMMODITY_RM') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_referralId'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='MUR_SER_AMENDMENT_SSO') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_referralId'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_MAINTAINBASIC_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_referralId'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='SUKUK_PREAPPROVAL_SSO') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_referralId'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='IJARAH_PRE_APPROVAL_SSO') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_referralId'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='OD_ODMAINTENANCE_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_referralId'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='PBG_TAWARRUQ_BRANCH_CSR') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_dmaCode'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='PBG_SUKUK_BRANCH_CSR') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_dmaCode'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='WBG_STRCOMMODITY_RM') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_dmaCode'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='WBG_MUSHARAKA_CADDUM') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_dmaCode'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='WBG_MUDARABA_CADDUM') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_dmaCode'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='WBG_WAKALA_RM') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_dmaCode'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='WBG_IJARAH_CADDUM') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_dmaCode'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='WBG_QARDHASSAN_CADDUM') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_dmaCode'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='PBG_IJA_HF_NEW_FIN_SSO') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_dmaCode'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='PBG_IJA_CF_NEW_FIN_SSO') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_dmaCode'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='WBG_CORPMURABAHA_RM') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_dmaCode'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='WBG_COMMODITY_RM') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_dmaCode'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='MUR_SER_AMENDMENT_SSO') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_dmaCode'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_MAINTAINBASIC_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_dmaCode'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='SUKUK_PREAPPROVAL_SSO') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_dmaCode'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='IJARAH_PRE_APPROVAL_SSO') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_dmaCode'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='OD_ODMAINTENANCE_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_dmaCode'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='PBG_TAWARRUQ_BRANCH_CSR') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_salesDepartment'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='PBG_SUKUK_BRANCH_CSR') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_salesDepartment'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='WBG_STRCOMMODITY_RM') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_salesDepartment'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='WBG_MUSHARAKA_CADDUM') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_salesDepartment'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='WBG_MUDARABA_CADDUM') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_salesDepartment'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='WBG_WAKALA_RM') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_salesDepartment'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='WBG_IJARAH_CADDUM') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_salesDepartment'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='WBG_QARDHASSAN_CADDUM') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_salesDepartment'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='PBG_IJA_HF_NEW_FIN_SSO') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_salesDepartment'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='PBG_IJA_CF_NEW_FIN_SSO') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_salesDepartment'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='WBG_CORPMURABAHA_RM') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_salesDepartment'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='WBG_COMMODITY_RM') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_salesDepartment'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='MUR_SER_AMENDMENT_SSO') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_salesDepartment'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_MAINTAINBASIC_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_salesDepartment'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='SUKUK_PREAPPROVAL_SSO') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_salesDepartment'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='IJARAH_PRE_APPROVAL_SSO') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_salesDepartment'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='OD_ODMAINTENANCE_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_salesDepartment'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='RTL_BRANCH_CSR') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_applicationNo'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='LCMUR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_applicationNo'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			
			</sql>
		</changeSet>
		
		<changeSet author="Irfan" id="irfan10">
		<sql>
			Update SeqSecGroupRights set SeqNo = (select MAX(GrpRightID) from SecGroupRights);
		</sql>
		</changeSet>
		
		<changeSet author="Irfan" id="irfan11">
		 <comment>SecGroupRights</comment>
			<sql>
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='RTL_BRANCH_CSR') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_referralId'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='LCMUR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_referralId'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='RTL_BRANCH_CSR') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_dmaCode'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='LCMUR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_dmaCode'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='RTL_BRANCH_CSR') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_salesDepartment'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='LCMUR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_salesDepartment'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='RTL_BRANCH_CSR') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_quickDisb'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='LCMUR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_quickDisb'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			</sql>
			</changeSet>
			
	<changeSet author="Irfan" id="irfan12">
	<addDefaultValue tableName="FinanceMain" defaultValue="0" columnName="QuickDisb" columnDataType="nchar"/>
	</changeSet>
	<changeSet author="Irfan" id="irfan13">
	<addDefaultValue tableName="FinanceMain_Temp" defaultValue="0" columnName="QuickDisb" columnDataType="nchar"/>
	</changeSet>
	<changeSet author="Irfan" id="irfan14">
	<addDefaultValue tableName="RejectFinanceMain" defaultValue="0" columnName="QuickDisb" columnDataType="nchar"/>
	</changeSet>
	<changeSet author="Irfan" id="irfan15">
		<sql>
			Update SeqSecGroupRights set SeqNo = (select MAX(GrpRightID) from SecGroupRights);
		</sql>
		</changeSet>
	<changeSet author="Irfan" id="irfan16">
		 <comment>SecGroupRights</comment>
			<sql>
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_MAINTAINBASIC_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_flagDetails'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			</sql>
			</changeSet>
			
			<changeSet author="Irfan" id="irfan17">
		<sql>
			Update SeqSecGroupRights set SeqNo = (select MAX(GrpRightID) from SecGroupRights);
		</sql>
		</changeSet>
	<changeSet author="Irfan" id="irfan18">
		 <comment>SecGroupRights</comment>
			<sql>
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_MAINTAINBASIC_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_FinanceMainDialog_btnFlagDetails'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			</sql>
			</changeSet>
			<changeSet author="Irfan" id="irfan19">
		<sql>
			Update SeqSecGroupRights set SeqNo = (select MAX(GrpRightID) from SecGroupRights);
		</sql>
		</changeSet>
	<changeSet author="Irfan" id="irfan20">
		 <comment>SecGroupRights</comment>
			<sql>
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='PBG_TAWARRUQ_BRANCH_CSR') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_applicationNo'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='PBG_SUKUK_BRANCH_CSR') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_applicationNo'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='WBG_STRCOMMODITY_RM') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_applicationNo'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='WBG_MUSHARAKA_CADDUM') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_applicationNo'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='WBG_MUDARABA_CADDUM') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_applicationNo'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='WBG_WAKALA_RM') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_applicationNo'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='WBG_IJARAH_CADDUM') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_applicationNo'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='WBG_QARDHASSAN_CADDUM') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_applicationNo'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='PBG_IJA_HF_NEW_FIN_SSO') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_applicationNo'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='PBG_IJA_CF_NEW_FIN_SSO') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_applicationNo'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='WBG_CORPMURABAHA_RM') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_applicationNo'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='WBG_COMMODITY_RM') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_applicationNo'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='MUR_SER_AMENDMENT_SSO') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_applicationNo'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_MAINTAINBASIC_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_applicationNo'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='SUKUK_PREAPPROVAL_SSO') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_applicationNo'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='IJARAH_PRE_APPROVAL_SSO') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_applicationNo'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='OD_ODMAINTENANCE_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_applicationNo'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='PBG_TAWARRUQ_BRANCH_CSR') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_quickDisb'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='PBG_SUKUK_BRANCH_CSR') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_quickDisb'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='WBG_STRCOMMODITY_RM') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_quickDisb'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='WBG_MUSHARAKA_CADDUM') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_quickDisb'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='WBG_MUDARABA_CADDUM') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_quickDisb'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='WBG_WAKALA_RM') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_quickDisb'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='WBG_IJARAH_CADDUM') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_quickDisb'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='WBG_QARDHASSAN_CADDUM') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_quickDisb'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='PBG_IJA_HF_NEW_FIN_SSO') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_quickDisb'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='PBG_IJA_CF_NEW_FIN_SSO') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_quickDisb'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='WBG_CORPMURABAHA_RM') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_quickDisb'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='WBG_COMMODITY_RM') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_quickDisb'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='MUR_SER_AMENDMENT_SSO') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_quickDisb'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_MAINTAINBASIC_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_quickDisb'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='SUKUK_PREAPPROVAL_SSO') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_quickDisb'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='IJARAH_PRE_APPROVAL_SSO') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_quickDisb'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='OD_ODMAINTENANCE_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_quickDisb'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			</sql>
			</changeSet>	
			<changeSet  author="Irfan" id="irfan21">
			<createView replaceIfExists="true" viewName="FinanceMain_View">
				SELECT     T1.FinReference, T1.InvestmentRef, T1.NumberOfTerms, T1.GrcPeriodEndDate, T1.AllowGrcPeriod, T1.GraceBaseRate, T1.GraceSpecialRate, T1.GrcPftRate, 
                      T1.GrcPftFrq, T1.NextGrcPftDate, T1.AllowGrcPftRvw, T1.GrcPftRvwFrq, T1.NextGrcPftRvwDate, T1.AllowGrcCpz, T1.GrcCpzFrq, T1.NextGrcCpzDate, 
                      T1.RepayBaseRate, T1.RepaySpecialRate, T1.RepayProfitRate, T1.RepayFrq, T1.NextRepayDate, T1.RepayPftFrq, T1.NextRepayPftDate, T1.AllowRepayRvw, 
                      T1.RepayRvwFrq, T1.NextRepayRvwDate, T1.AllowRepayCpz, T1.RepayCpzFrq, T1.NextRepayCpzDate, T1.MaturityDate, T1.CpzAtGraceEnd, T1.DownPayment, 
                      T1.GraceFlatAmount, T1.ReqRepayAmount, T1.TotalProfit, T1.TotalCpz, T1.TotalGrossPft, T1.TotalGrossGrcPft, T1.TotalGracePft, T1.TotalGraceCpz, T1.GrcRateBasis, 
                      T1.RepayRateBasis, T1.FinType, T1.FinRemarks, T1.FinCcy, T1.ScheduleMethod, T1.ProfitDaysBasis, T1.ReqMaturity, T1.CalTerms, T1.CalMaturity, T1.FirstRepay, 
                      T1.LastRepay, T1.FinStartDate, T1.FinAmount, T1.FinAmount + T1.FeeChargeAmt - T1.DownPayment lovDescFinancingAmount, T1.FinRepaymentAmount, T1.CustID, 
                      T1.Defferments, T1.PlanDeferCount, T1.FinBranch, T1.FinSourceID, T1.AllowedDefRpyChange, T1.AvailedDefRpyChange, T1.AllowedDefFrqChange, 
                      T1.AvailedDefFrqChange, T1.RecalType, T1.FinAssetValue, T1.DisbAccountId, T1.RepayAccountId, T1.FinIsActive, T1.LimitValid, T1.OverrideLimit, T1.SecurityDeposit, 
                      T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId, 
                      T2.CcyDesc lovDescFinCcyName, T3.SchdMethodDesc lovDescScheduleMethodName, T4.IntRateBasisDesc lovDescProfitDaysBasisName, 
                      T5.BRTypeDesc lovDescGraceBaseRateName, T6.SRTypeDesc lovDescGraceSpecialRateName, T7.FinTypeDesc lovDescFinTypeName, 
                      T8.BRTypeDesc lovDescRepayBaseRateName, T9.SRTypeDesc lovDescRepaySpecialRateName, T2.CcyEditField lovDescFinFormatter, 
                      T7.FinIsAlwMD lovDescFinIsAlwMD, T7.FinMaxAmount lovDescFinMaxAmt, T7.FinMinAmount lovDescFinMinAmount, T1.MinDownpayPerc, 
                      T7.FinIsAlwDifferment lovDescFinAlwDeferment, T7.FinIsDwPayRequired lovDescDwnPayReq, T7.FinMaxDifferment lovDescFinMaxDifferment, 
                      T10.CustCIF lovDescCustCIF, T10.CustFName lovDescCustFName, T10.CustLName lovDescCustLName, T12.BranchDesc lovDescFinBranchName, T1.LastRepayDate, 
                      T1.LastRepayPftDate, T1.LastRepayRvwDate, T1.LastRepayCpzDate,  
                      T1.AllowGrcRepay, T1.GrcSchdMthd, T1.GrcMargin, T1.RepayMargin, T1.FinCurrAssetValue, T1.FinCommitmentRef, T1.FinLimitRef,
                      T1.DepreciationFrq, T1.FinContractDate, T13.SaluationDesc lovDescSalutationName, T10.CustShrtName lovDescCustShrtName, 
                      T10.CustCoreBank lovDescCustCoreBank, T1.NextDepDate, T1.LastDepDate, T1.FinAccount, T1.FinCustPftAccount, T1.AlwIndRate, T1.IndBaseRate, T1.GrcAlwIndRate, 
                      T1.GrcIndBaseRate, T15.BRTypeDesc lovDescIndBaseRateName, T16.BRTypeDesc lovDescGrcIndBaseRateName, T17.AcrTillLBD lovDescAccruedTillLBD, 
                      T7.FinRvwRateApplFor, T7.FinGrcRvwRateApplFor, T1.TotalRepayAmt, T7.FinCategory lovDescProductCodeName, T10.CustCtgCode lovDescCustCtgCode, 
                      T1.ClosingStatus, T1.FinApprovedDate, T1.FeeChargeAmt, T1.Blacklisted, T1.FinRepayPftOnFrq, T1.AnualizedPercRate, T1.EffectiveRateOfReturn, 
                      T19.CmtTitle lovDescCommitmentRefName, T31.LimitDesc lovDescLimitRefName, T1.MigratedFinance, T1.ScheduleMaintained, 
                      T1.ScheduleRegenerated, T1.FinPurpose, T20.ValueDesc lovDescFinPurposeName, T1.FinStatus, T1.FinStsReason, T1.InitiateUser, T1.BankName, T1.iban, 
                      T1.AccountType, T1.DdaReferenceNo, T7.FinScheduleOn LovDescFinScheduleOn, T1.CustDSR, T1.Authorization1, T1.Authorization2, 
                      T21.AuthName lovDescAuthorization1Name, T22.AuthName lovDescAuthorization2Name, T1.JointAccount, T1.JointCustId, 
                      T23.CustShrtName lovDescJointCustShrtName, T23.CustCIF lovDescJointCustCIF, '0' AvailCommitAmount, T1.DownPayBank, T1.DownPaySupl, T1.DownPayAccount, 
                      T1.SecurityCollateral, T1.CustomerAcceptance, T1.Approved, T1.CbbApprovalRequired, T1.CbbApproved, T1.Discrepancy, T1.LimitApproved, T1.GraceTerms, 
                      T7.FinDivision lovDescFinDivision, T1.RcdMaintainSts, T1.FinRepayMethod, T1.GrcProfitDaysBasis, T1.StepFinance,T1.StepType, T1.StepPolicy, T1.AlwManualSteps, 
                      T1.NoOfSteps, T1.TakafulFrq, T1.TakafulRate, T1.WaiverReason, T1.TakafulRef, T1.TakafulRequired, 
                      T1.LinkedFinRef, T1.NextUserId, T1.Priority, T24.PolicyDesc LovDescStepPolicyName, T1.GrcMinRate, T1.GrcMaxRate, T1.RpyMinRate, T1.RpyMaxRate, 
                      T2.CcyEditField ReportFormat, T1.DeviationApproval, T1.PptTakafulRequired, T1.PptTakafulFrq, T1.PptWaiverReason, T1.PptTakafulRate, T1.PptTakafulRef, 
                      T1.ManualSchedule, T1.TakeOverFinance, T1.GrcAdvBaseRate, T1.GrcAdvMargin, T1.GrcAdvPftRate, T1.RpyAdvBaseRate, T1.RpyAdvMargin, T1.RpyAdvPftRate, 
                      T25.BRTypeDesc GrcAdvBaseRateDesc, T26.BRTypeDesc RpyAdvBaseRateDesc, T1.SupplementRent, T1.IncreasedCost, T1.CreditInsAmt, T1.RolloverFrq, 
                      T1.NextRolloverDate, T27.CustStsDescription, T1.ShariaStatus, T1.InitiateDate, T1.FINPREAPPROVEDREF, T1.MMAId, T1.AccountsOfficer, 
                      T1.feeAccountId, T1.FinCancelAc,T29.AgreeName, T28.GenDeptDesc lovDescAccountsOfficer,T1.DSACode,T30.ROfficerDesc DSACodeDesc,
					  T29.MMAReference  LovDescMMAReference,T1.TDSApplicable,T1.TakafulStatus, T32.ProductCategory,T1.MandateID,T1.DroplineFrq,T1.FirstDroplineDate,T1.PftServicingODLimit,T1.InsuranceAmt,T1.DeductInsDisb,
					  T1.AlwBPI , T1.BpiTreatment , T1.PlanEMIHAlw , T1.PlanEMIHMethod , T1.PlanEMIHMaxPerYear , T1.PlanEMIHMax , T1.PlanEMIHLockPeriod , T1.PlanEMICpz , T1.CalRoundingMode , T1.AlwMultiDisb , T1.ApplicationNo,
					  T1.ReferralId , T33.ROfficerDesc ReferralIdDesc, T1.DmaCode , T34.ROfficerDesc DmaCodeDesc,  T1.SalesDepartment , T35.GenDeptDesc SalesDepartmentDesc , T1.QuickDisb , T1.WifReference
						FROM         FinanceMain_Temp T1 INNER JOIN
                      RMTCurrencies T2 ON T1.FinCcy = T2.CcyCode LEFT OUTER JOIN
                      BMTSchdMethod T3 ON T1.ScheduleMethod = T3.SchdMethod LEFT OUTER JOIN
                      BMTIntRateBasisCodes T4 ON T1.ProfitDaysBasis = T4.IntRateBasisCode LEFT OUTER JOIN
                      RMTBaseRateCodes T5 ON T1.GraceBaseRate = T5.BRType LEFT OUTER JOIN
                      RMTSplRateCodes T6 ON T1.GraceSpecialRate = T6.SRType INNER JOIN
                      RMTFinanceTypes T7 ON T1.FinType = T7.FinType LEFT OUTER JOIN
                      RMTBaseRateCodes T8 ON T1.RepayBaseRate = T8.BRType LEFT OUTER JOIN
                      RMTSplRateCodes T9 ON T1.RepaySpecialRate = T9.SRType LEFT OUTER JOIN
                      Customers T10 ON T1.CustID = T10.CustID LEFT OUTER JOIN
                      BMTSalutations T13 ON T10.CustSalutationCode = T13.SalutationCode LEFT OUTER JOIN
                      RMTBranches T12 ON T1.FinBranch = T12.BranchCode LEFT OUTER JOIN
                      RMTBaseRateCodes T15 ON T1.IndBaseRate = T15.BRType LEFT OUTER JOIN
                      RMTBaseRateCodes T16 ON T1.GrcIndBaseRate = T16.BRType LEFT OUTER JOIN
                      FINPFTDETAILS T17 ON T17.FINREFERENCE = T1.FINREFERENCE LEFT OUTER JOIN
                      Commitments T19 ON T1.FinCommitmentRef = T19.CmtReference AND T10.CustID = T19.custID LEFT OUTER JOIN
                      RMTLOVFielddetail T20 ON T20.FieldCode = 'FINASSTYP' AND T1.FinPurpose = T20.FieldCodeValue LEFT OUTER JOIN
                      AMTAuthorization T21 ON T1.Authorization1 = T21.AuthUserId LEFT OUTER JOIN
                      AMTAuthorization T22 ON T1.Authorization2 = T22.AuthUserId LEFT OUTER JOIN
                      Customers T23 ON T1.JointCustId = T23.CustID LEFT OUTER JOIN
                      StepPolicyHeader T24 ON T1.StepPolicy = T24.PolicyCode LEFT OUTER JOIN
                      RMTBaseRateCodes T25 ON T1.GrcAdvBaseRate = T25.BRType LEFT OUTER JOIN
                      RMTBaseRateCodes T26 ON T1.RpyAdvBaseRate = T26.BRType LEFT OUTER JOIN
                      BMTCustStatusCodes T27 ON T1.finStatus = T27.CustStsCode LEFT OUTER JOIN
                      RMTGenDepartments T28 ON T1.AccountsOfficer = T28.GenDepartment LEFT OUTER JOIN
					  MMAgreements T29 ON T1.MMAId = T29.MMAId LEFT OUTER JOIN
					  RelationshipOfficers T30 ON T1.DSACode = T30.ROfficerCode LEFT OUTER JOIN
					  RelationshipOfficers T33 ON T1.ReferralId = T33.ROfficerCode LEFT OUTER JOIN 
					  RelationshipOfficers T34 ON T1.DmaCode = T34.ROfficerCode LEFT OUTER JOIN
					  RMTGenDepartments T35 ON T1.SalesDepartment = T35.GenDepartment LEFT OUTER JOIN
                      LimitAPIDetails T31 ON T1.FinLimitRef = T31.LimitRef AND T10.CustCIF = T31.CustomerReference INNER JOIN  
                      BMTProduct T32 ON T7.FinCategory = T32.ProductCode -- New Filed
			 
	UNION ALL
	SELECT     T1.FinReference, T1.InvestmentRef, T1.NumberOfTerms, T1.GrcPeriodEndDate, T1.AllowGrcPeriod, T1.GraceBaseRate, T1.GraceSpecialRate, T1.GrcPftRate, 
                      T1.GrcPftFrq, T1.NextGrcPftDate, T1.AllowGrcPftRvw, T1.GrcPftRvwFrq, T1.NextGrcPftRvwDate, T1.AllowGrcCpz, T1.GrcCpzFrq, T1.NextGrcCpzDate, 
                      T1.RepayBaseRate, T1.RepaySpecialRate, T1.RepayProfitRate, T1.RepayFrq, T1.NextRepayDate, T1.RepayPftFrq, T1.NextRepayPftDate, T1.AllowRepayRvw, 
                      T1.RepayRvwFrq, T1.NextRepayRvwDate, T1.AllowRepayCpz, T1.RepayCpzFrq, T1.NextRepayCpzDate, T1.MaturityDate, T1.CpzAtGraceEnd, T1.DownPayment, 
                      T1.GraceFlatAmount, T1.ReqRepayAmount, T1.TotalProfit, T1.TotalCpz, T1.TotalGrossPft, T1.TotalGrossGrcPft, T1.TotalGracePft, T1.TotalGraceCpz, T1.GrcRateBasis, 
                      T1.RepayRateBasis, T1.FinType, T1.FinRemarks, T1.FinCcy, T1.ScheduleMethod, T1.ProfitDaysBasis, T1.ReqMaturity, T1.CalTerms, T1.CalMaturity, T1.FirstRepay, 
                      T1.LastRepay, T1.FinStartDate, T1.FinAmount, T1.FinAmount + T1.FeeChargeAmt - T1.DownPayment lovDescFinancingAmount, T1.FinRepaymentAmount, T1.CustID, 
                      T1.Defferments, T1.PlanDeferCount, T1.FinBranch, T1.FinSourceID, T1.AllowedDefRpyChange, T1.AvailedDefRpyChange, T1.AllowedDefFrqChange, 
                      T1.AvailedDefFrqChange, T1.RecalType, T1.FinAssetValue, T1.DisbAccountId, T1.RepayAccountId, T1.FinIsActive, T1.LimitValid, T1.OverrideLimit, T1.SecurityDeposit, 
                      T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId, 
                      T2.CcyDesc lovDescFinCcyName, T3.SchdMethodDesc lovDescScheduleMethodName, T4.IntRateBasisDesc lovDescProfitDaysBasisName, 
                      T5.BRTypeDesc lovDescGraceBaseRateName, T6.SRTypeDesc lovDescGraceSpecialRateName, T7.FinTypeDesc lovDescFinTypeName, 
                      T8.BRTypeDesc lovDescRepayBaseRateName, T9.SRTypeDesc lovDescRepaySpecialRateName, T2.CcyEditField lovDescFinFormatter, 
                      T7.FinIsAlwMD lovDescFinIsAlwMD, T7.FinMaxAmount lovDescFinMaxAmt, T7.FinMinAmount lovDescFinMinAmount, T1.MinDownpayPerc, 
                      T7.FinIsAlwDifferment lovDescFinAlwDeferment, T7.FinIsDwPayRequired lovDescDwnPayReq, T7.FinMaxDifferment lovDescFinMaxDifferment, 
                      T10.CustCIF lovDescCustCIF, T10.CustFName lovDescCustFName, T10.CustLName lovDescCustLName, T12.BranchDesc lovDescFinBranchName, T1.LastRepayDate, 
                      T1.LastRepayPftDate, T1.LastRepayRvwDate, T1.LastRepayCpzDate,  
                      T1.AllowGrcRepay, T1.GrcSchdMthd, T1.GrcMargin, T1.RepayMargin, T1.FinCurrAssetValue, T1.FinCommitmentRef, T1.FinLimitRef,
                      T1.DepreciationFrq, T1.FinContractDate, T13.SaluationDesc lovDescSalutationName, T10.CustShrtName lovDescCustShrtName, 
                      T10.CustCoreBank lovDescCustCoreBank, T1.NextDepDate, T1.LastDepDate, T1.FinAccount, T1.FinCustPftAccount, T1.AlwIndRate, T1.IndBaseRate, T1.GrcAlwIndRate, 
                      T1.GrcIndBaseRate, T15.BRTypeDesc lovDescIndBaseRateName, T16.BRTypeDesc lovDescGrcIndBaseRateName, T17.AcrTillLBD lovDescAccruedTillLBD, 
                      T7.FinRvwRateApplFor, T7.FinGrcRvwRateApplFor, T1.TotalRepayAmt, T7.FinCategory lovDescProductCodeName, T10.CustCtgCode lovDescCustCtgCode, 
                      T1.ClosingStatus, T1.FinApprovedDate, T1.FeeChargeAmt, T1.Blacklisted, T1.FinRepayPftOnFrq, T1.AnualizedPercRate, T1.EffectiveRateOfReturn, 
                      T19.CmtTitle lovDescCommitmentRefName, T31.LimitDesc lovDescLimitRefName, T1.MigratedFinance, T1.ScheduleMaintained, 
                      T1.ScheduleRegenerated, T1.FinPurpose, T20.ValueDesc lovDescFinPurposeName, T1.FinStatus, T1.FinStsReason, T1.InitiateUser, T1.BankName, T1.iban, 
                      T1.AccountType, T1.DdaReferenceNo, T7.FinScheduleOn LovDescFinScheduleOn, T1.CustDSR, T1.Authorization1, T1.Authorization2, 
                      T21.AuthName lovDescAuthorization1Name, T22.AuthName lovDescAuthorization2Name, T1.JointAccount, T1.JointCustId, 
                      T23.CustShrtName lovDescJointCustShrtName, T23.CustCIF lovDescJointCustCIF, '0' AvailCommitAmount, T1.DownPayBank, T1.DownPaySupl, T1.DownPayAccount, 
                      T1.SecurityCollateral, T1.CustomerAcceptance, T1.Approved, T1.CbbApprovalRequired, T1.CbbApproved, T1.Discrepancy, T1.LimitApproved, T1.GraceTerms, 
                      T7.FinDivision lovDescFinDivision, T1.RcdMaintainSts, T1.FinRepayMethod, T1.GrcProfitDaysBasis, T1.StepFinance,T1.StepType, T1.StepPolicy, T1.AlwManualSteps, 
                      T1.NoOfSteps, T1.TakafulFrq, T1.TakafulRate, T1.WaiverReason, T1.TakafulRef, T1.TakafulRequired, 
                      T1.LinkedFinRef, T1.NextUserId, T1.Priority, T24.PolicyDesc LovDescStepPolicyName, T1.GrcMinRate, T1.GrcMaxRate, T1.RpyMinRate, T1.RpyMaxRate, 
                      T2.CcyEditField ReportFormat, T1.DeviationApproval, T1.PptTakafulRequired, T1.PptTakafulFrq, T1.PptWaiverReason, T1.PptTakafulRate, T1.PptTakafulRef, 
                      T1.ManualSchedule, T1.TakeOverFinance, T1.GrcAdvBaseRate, T1.GrcAdvMargin, T1.GrcAdvPftRate, T1.RpyAdvBaseRate, T1.RpyAdvMargin, T1.RpyAdvPftRate, 
                      T25.BRTypeDesc GrcAdvBaseRateDesc, T26.BRTypeDesc RpyAdvBaseRateDesc, T1.SupplementRent, T1.IncreasedCost, T1.CreditInsAmt, T1.RolloverFrq, 
                      T1.NextRolloverDate, T27.CustStsDescription, T1.ShariaStatus, T1.InitiateDate, T1.FINPREAPPROVEDREF, T1.MMAId, T1.AccountsOfficer, 
                      T1.feeAccountId, T1.FinCancelAc,T29.AgreeName, T28.GenDeptDesc lovDescAccountsOfficer,T1.DSACode,T30.ROfficerDesc DSACodeDesc,
					  T29.MMAReference as LovDescMMAReference,T1.TDSApplicable,T1.TakafulStatus, T32.ProductCategory,T1.MandateID,T1.DroplineFrq,T1.FirstDroplineDate,T1.PftServicingODLimit,T1.InsuranceAmt,T1.DeductInsDisb,
					  T1.AlwBPI , T1.BpiTreatment , T1.PlanEMIHAlw , T1.PlanEMIHMethod , T1.PlanEMIHMaxPerYear , T1.PlanEMIHMax , T1.PlanEMIHLockPeriod , T1.PlanEMICpz , T1.CalRoundingMode , T1.AlwMultiDisb ,  T1.ApplicationNo ,
					  T1.ReferralId , T33.ROfficerDesc ReferralIdDesc, T1.DmaCode , T34.ROfficerDesc DmaCodeDesc,  T1.SalesDepartment , T35.GenDeptDesc SalesDepartmentDesc , T1.QuickDisb , T1.WifReference
						FROM         FinanceMain T1 INNER JOIN
                      RMTCurrencies T2 ON T1.FinCcy = T2.CcyCode LEFT OUTER JOIN
                      BMTSchdMethod T3 ON T1.ScheduleMethod = T3.SchdMethod LEFT OUTER JOIN
                      BMTIntRateBasisCodes T4 ON T1.ProfitDaysBasis = T4.IntRateBasisCode LEFT OUTER JOIN
                      RMTBaseRateCodes T5 ON T1.GraceBaseRate = T5.BRType LEFT OUTER JOIN
                      RMTSplRateCodes T6 ON T1.GraceSpecialRate = T6.SRType INNER JOIN
                      RMTFinanceTypes T7 ON T1.FinType = T7.FinType LEFT OUTER JOIN
                      RMTBaseRateCodes T8 ON T1.RepayBaseRate = T8.BRType LEFT OUTER JOIN
                      RMTSplRateCodes T9 ON T1.RepaySpecialRate = T9.SRType LEFT OUTER JOIN
                      Customers T10 ON T1.CustID = T10.CustID LEFT OUTER JOIN
                      BMTSalutations T13 ON T10.CustSalutationCode = T13.SalutationCode LEFT OUTER JOIN
                      RMTBranches T12 ON T1.FinBranch = T12.BranchCode LEFT OUTER JOIN
                      RMTBaseRateCodes T15 ON T1.IndBaseRate = T15.BRType LEFT OUTER JOIN
                      RMTBaseRateCodes T16 ON T1.GrcIndBaseRate = T16.BRType LEFT OUTER JOIN
                      FINPFTDETAILS T17 ON T17.FINREFERENCE = T1.FINREFERENCE LEFT OUTER JOIN
                      Commitments T19 ON T1.FinCommitmentRef = T19.CmtReference AND T10.CustID = T19.custID LEFT OUTER JOIN
                      RMTLOVFielddetail T20 ON T20.FieldCode = 'FINASSTYP' AND T1.FinPurpose = T20.FieldCodeValue LEFT OUTER JOIN
                      AMTAuthorization T21 ON T1.Authorization1 = T21.AuthUserId LEFT OUTER JOIN
                      AMTAuthorization T22 ON T1.Authorization2 = T22.AuthUserId LEFT OUTER JOIN
                      Customers T23 ON T1.JointCustId = T23.CustID LEFT OUTER JOIN
                      StepPolicyHeader T24 ON T1.StepPolicy = T24.PolicyCode LEFT OUTER JOIN
                      RMTBaseRateCodes T25 ON T1.GrcAdvBaseRate = T25.BRType LEFT OUTER JOIN
                      RMTBaseRateCodes T26 ON T1.RpyAdvBaseRate = T26.BRType LEFT OUTER JOIN
                      BMTCustStatusCodes T27 ON T1.finStatus = T27.CustStsCode LEFT OUTER JOIN
                      RMTGenDepartments T28 ON T1.AccountsOfficer = T28.GenDepartment LEFT OUTER JOIN
					  MMAgreements T29 ON T1.MMAId = T29.MMAId LEFT OUTER JOIN 
					  RelationshipOfficers T30 ON T1.DSACode = T30.ROfficerCode LEFT OUTER JOIN
					  RelationshipOfficers T33 ON T1.ReferralId = T33.ROfficerCode LEFT OUTER JOIN 
					  RelationshipOfficers T34 ON T1.DmaCode = T34.ROfficerCode LEFT OUTER JOIN
					  RMTGenDepartments T35 ON T1.SalesDepartment = T35.GenDepartment LEFT OUTER JOIN
                      LimitAPIDetails T31 ON T1.FinLimitRef = T31.LimitRef AND T10.CustCIF = T31.CustomerReference INNER JOIN --not using 
                      BMTProduct T32 ON T7.FinCategory = T32.ProductCode -- New Filed
						WHERE     (NOT EXISTS
                          (SELECT     1 Expr1
                            FROM          FinanceMain_Temp
                            WHERE      (FINREFERENCE = T1.FINREFERENCE)));
	
	</createView>
	</changeSet>
	<changeSet author="Irfan" id="irfan22">
	<createView replaceIfExists="true" viewName="FinanceMain_TView">
		
		SELECT     T1.FinReference, T1.InvestmentRef, T1.NumberOfTerms, T1.GrcPeriodEndDate, T1.AllowGrcPeriod, T1.GraceBaseRate, T1.GraceSpecialRate, T1.GrcPftRate, 
                      T1.GrcPftFrq, T1.NextGrcPftDate, T1.AllowGrcPftRvw, T1.GrcPftRvwFrq, T1.NextGrcPftRvwDate, T1.AllowGrcCpz, T1.GrcCpzFrq, T1.NextGrcCpzDate, 
                      T1.RepayBaseRate, T1.RepaySpecialRate, T1.RepayProfitRate, T1.RepayFrq, T1.NextRepayDate, T1.RepayPftFrq, T1.NextRepayPftDate, T1.AllowRepayRvw, 
                      T1.RepayRvwFrq, T1.NextRepayRvwDate, T1.AllowRepayCpz, T1.RepayCpzFrq, T1.NextRepayCpzDate, T1.MaturityDate, T1.CpzAtGraceEnd, T1.DownPayment, 
                      T1.GraceFlatAmount, T1.ReqRepayAmount, T1.TotalProfit, T1.TotalCpz, T1.TotalGrossPft, T1.TotalGrossGrcPft, T1.TotalGracePft, T1.TotalGraceCpz, T1.GrcRateBasis, 
                      T1.RepayRateBasis, T1.FinType, T1.FinRemarks, T1.FinCcy, T1.ScheduleMethod, T1.ProfitDaysBasis, T1.ReqMaturity, T1.CalTerms, T1.CalMaturity, T1.FirstRepay, 
                      T1.LastRepay, T1.FinStartDate, T1.FinAmount, T1.FinAmount + T1.FeeChargeAmt - T1.DownPayment lovDescFinancingAmount, T1.FinRepaymentAmount, T1.CustID, 
                      T1.Defferments, T1.PlanDeferCount, T1.FinBranch, T1.FinSourceID, T1.AllowedDefRpyChange, T1.AvailedDefRpyChange, T1.AllowedDefFrqChange, 
                      T1.AvailedDefFrqChange, T1.RecalType, T1.FinAssetValue, T1.DisbAccountId, T1.RepayAccountId, T1.FinIsActive, T1.LimitValid, T1.OverrideLimit, T1.SecurityDeposit, 
                      T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId, 
                      T2.CcyDesc lovDescFinCcyName, T3.SchdMethodDesc lovDescScheduleMethodName, T4.IntRateBasisDesc lovDescProfitDaysBasisName, 
                      T5.BRTypeDesc lovDescGraceBaseRateName, T6.SRTypeDesc lovDescGraceSpecialRateName, T7.FinTypeDesc lovDescFinTypeName, 
                      T8.BRTypeDesc lovDescRepayBaseRateName, T9.SRTypeDesc lovDescRepaySpecialRateName, T2.CcyEditField lovDescFinFormatter, 
                      T7.FinIsAlwMD lovDescFinIsAlwMD, T7.FinMaxAmount lovDescFinMaxAmt, T7.FinMinAmount lovDescFinMinAmount, T1.MinDownpayPerc, 
                      T7.FinIsAlwDifferment lovDescFinAlwDeferment, T7.FinIsDwPayRequired lovDescDwnPayReq, T7.FinMaxDifferment lovDescFinMaxDifferment, 
                      T10.CustCIF lovDescCustCIF, T10.CustFName lovDescCustFName, T10.CustLName lovDescCustLName, T12.BranchDesc lovDescFinBranchName, T1.LastRepayDate, 
                      T1.LastRepayPftDate, T1.LastRepayRvwDate, T1.LastRepayCpzDate,  
                      T1.AllowGrcRepay, T1.GrcSchdMthd, T1.GrcMargin, T1.RepayMargin, T1.FinCurrAssetValue, T1.FinCommitmentRef, T1.FinLimitRef,
                      T1.DepreciationFrq, T1.FinContractDate, T13.SaluationDesc lovDescSalutationName, T10.CustShrtName lovDescCustShrtName, 
                      T10.CustCoreBank lovDescCustCoreBank, T1.NextDepDate, T1.LastDepDate, T1.FinAccount, T1.FinCustPftAccount, T1.AlwIndRate, T1.IndBaseRate, T1.GrcAlwIndRate, 
                      T1.GrcIndBaseRate, T15.BRTypeDesc lovDescIndBaseRateName, T16.BRTypeDesc lovDescGrcIndBaseRateName, T17.AcrTillLBD lovDescAccruedTillLBD, 
                      T7.FinRvwRateApplFor, T7.FinGrcRvwRateApplFor, T1.TotalRepayAmt, T7.FinCategory lovDescProductCodeName, T10.CustCtgCode lovDescCustCtgCode, 
                      T1.ClosingStatus, T1.FinApprovedDate, T1.FeeChargeAmt, T1.Blacklisted, T1.FinRepayPftOnFrq, T1.AnualizedPercRate, T1.EffectiveRateOfReturn, 
                      T19.CmtTitle lovDescCommitmentRefName, T31.LimitDesc lovDescLimitRefName, T1.MigratedFinance, T1.ScheduleMaintained, 
                      T1.ScheduleRegenerated, T1.FinPurpose, T20.ValueDesc lovDescFinPurposeName, T1.FinStatus, T1.FinStsReason, T1.InitiateUser, T1.BankName, T1.iban, 
                      T1.AccountType, T1.DdaReferenceNo, T7.FinScheduleOn LovDescFinScheduleOn, T1.CustDSR, T1.Authorization1, T1.Authorization2, 
                      T21.AuthName lovDescAuthorization1Name, T22.AuthName lovDescAuthorization2Name, T1.JointAccount, T1.JointCustId, 
                      T23.CustShrtName lovDescJointCustShrtName, T23.CustCIF lovDescJointCustCIF, '0' AvailCommitAmount, T1.DownPayBank, T1.DownPaySupl, T1.DownPayAccount, 
                      T1.SecurityCollateral, T1.CustomerAcceptance, T1.Approved, T1.CbbApprovalRequired, T1.CbbApproved, T1.Discrepancy, T1.LimitApproved, T1.GraceTerms, 
                      T7.FinDivision lovDescFinDivision, T1.RcdMaintainSts, T1.FinRepayMethod, T1.GrcProfitDaysBasis, T1.StepFinance,T1.StepType, T1.StepPolicy, T1.AlwManualSteps, 
                      T1.NoOfSteps, T1.TakafulFrq, T1.TakafulRate, T1.WaiverReason, T1.TakafulRef, T1.TakafulRequired, 
                      T1.LinkedFinRef, T1.NextUserId, T1.Priority, T24.PolicyDesc LovDescStepPolicyName, T1.GrcMinRate, T1.GrcMaxRate, T1.RpyMinRate, T1.RpyMaxRate, 
                      T2.CcyEditField ReportFormat, T1.DeviationApproval, T1.PptTakafulRequired, T1.PptTakafulFrq, T1.PptWaiverReason, T1.PptTakafulRate, T1.PptTakafulRef, 
                      T1.ManualSchedule, T1.TakeOverFinance, T1.GrcAdvBaseRate, T1.GrcAdvMargin, T1.GrcAdvPftRate, T1.RpyAdvBaseRate, T1.RpyAdvMargin, T1.RpyAdvPftRate, 
                      T25.BRTypeDesc GrcAdvBaseRateDesc, T26.BRTypeDesc RpyAdvBaseRateDesc, T1.SupplementRent, T1.IncreasedCost, T1.CreditInsAmt, T1.RolloverFrq, 
                      T1.NextRolloverDate, T27.CustStsDescription, T1.ShariaStatus, T1.InitiateDate, T1.FINPREAPPROVEDREF, T1.MMAId, T1.AccountsOfficer, 
                      T1.feeAccountId, T1.FinCancelAc,T29.AgreeName, T28.GenDeptDesc lovDescAccountsOfficer,T1.DSACode,T30.ROfficerDesc DSACodeDesc,
					  T29.MMAReference as LovDescMMAReference,T1.TDSApplicable,T1.TakafulStatus, T32.ProductCategory,T1.MandateID,T1.DroplineFrq,T1.FirstDroplineDate,
					  T1.PftServicingODLimit,T1.InsuranceAmt,T1.DeductInsDisb,T1.AlwBPI , T1.BpiTreatment , T1.PlanEMIHAlw , T1.PlanEMIHMethod , 
					  T1.PlanEMIHMaxPerYear , T1.PlanEMIHMax , T1.PlanEMIHLockPeriod , T1.PlanEMICpz , T1.CalRoundingMode , T1.AlwMultiDisb , T1.ApplicationNo ,
					  T1.ReferralId , T33.ROfficerDesc ReferralIdDesc, T1.DmaCode , T34.ROfficerDesc DmaCodeDesc,  T1.SalesDepartment , T35.GenDeptDesc SalesDepartmentDesc , T1.QuickDisb , T1.WifReference
			FROM         FinanceMain_Temp T1 INNER JOIN
                      RMTCurrencies T2 ON T1.FinCcy = T2.CcyCode LEFT OUTER JOIN --not req
                      BMTSchdMethod T3 ON T1.ScheduleMethod = T3.SchdMethod LEFT OUTER JOIN --verify with combobox reqrmnt
                      BMTIntRateBasisCodes T4 ON T1.ProfitDaysBasis = T4.IntRateBasisCode LEFT OUTER JOIN
                      RMTBaseRateCodes T5 ON T1.GraceBaseRate = T5.BRType LEFT OUTER JOIN --remove join and use single query
                      RMTSplRateCodes T6 ON T1.GraceSpecialRate = T6.SRType INNER JOIN
                      RMTFinanceTypes T7 ON T1.FinType = T7.FinType LEFT OUTER JOIN
                      RMTBaseRateCodes T8 ON T1.RepayBaseRate = T8.BRType LEFT OUTER JOIN --remove join and use single query
                      RMTSplRateCodes T9 ON T1.RepaySpecialRate = T9.SRType LEFT OUTER JOIN
                      Customers T10 ON T1.CustID = T10.CustID LEFT OUTER JOIN
                      BMTSalutations T13 ON T10.CustSalutationCode = T13.SalutationCode LEFT OUTER JOIN --not using it anywhere.remove it
                      RMTBranches T12 ON T1.FinBranch = T12.BranchCode LEFT OUTER JOIN
                      RMTBaseRateCodes T15 ON T1.IndBaseRate = T15.BRType LEFT OUTER JOIN --remove join and use single query
                      RMTBaseRateCodes T16 ON T1.GrcIndBaseRate = T16.BRType LEFT OUTER JOIN --remove join and use single query
                      FINPFTDETAILS T17 ON T17.FINREFERENCE = T1.FINREFERENCE LEFT OUTER JOIN --not req at org
                      Commitments T19 ON T1.FinCommitmentRef = T19.CmtReference AND T10.CustID = T19.custID LEFT OUTER JOIN --not using
                      RMTLOVFielddetail T20 ON T20.FieldCode = 'FINASSTYP' AND T1.FinPurpose = T20.FieldCodeValue LEFT OUTER JOIN
                      AMTAuthorization T21 ON T1.Authorization1 = T21.AuthUserId LEFT OUTER JOIN
                      AMTAuthorization T22 ON T1.Authorization2 = T22.AuthUserId LEFT OUTER JOIN
                      Customers T23 ON T1.JointCustId = T23.CustID LEFT OUTER JOIN --not using
                      StepPolicyHeader T24 ON T1.StepPolicy = T24.PolicyCode LEFT OUTER JOIN
                      RMTBaseRateCodes T25 ON T1.GrcAdvBaseRate = T25.BRType LEFT OUTER JOIN --remove join and use single query
                      RMTBaseRateCodes T26 ON T1.RpyAdvBaseRate = T26.BRType LEFT OUTER JOIN --remove join and use single query
                      BMTCustStatusCodes T27 ON T1.finStatus = T27.CustStsCode LEFT OUTER JOIN --not using in org
                      RMTGenDepartments T28 ON T1.AccountsOfficer = T28.GenDepartment LEFT OUTER JOIN
					  MMAgreements T29 ON T1.MMAId = T29.MMAId LEFT OUTER JOIN
					  RelationshipOfficers T30 ON T1.DSACode = T30.ROfficerCode LEFT OUTER JOIN
					  RelationshipOfficers T33 ON T1.ReferralId = T33.ROfficerCode LEFT OUTER JOIN
					  RelationshipOfficers T34 ON T1.DmaCode = T34.ROfficerCode LEFT OUTER JOIN
					  RMTGenDepartments T35 ON T1.SalesDepartment = T35.GenDepartment LEFT OUTER JOIN
                      LimitAPIDetails T31 ON T1.FinLimitRef = T31.LimitRef AND T10.CustCIF = T31.CustomerReference  INNER JOIN --not using 
                      BMTProduct T32 ON T7.FinCategory = T32.ProductCode 
		</createView>
	</changeSet>
	<changeSet author="Irfan" id="irfan23">
		<createView replaceIfExists="true" viewName="FinanceMain_AView">

		SELECT     T1.FinReference, T1.NumberOfTerms, T1.GrcPeriodEndDate, T1.AllowGrcPeriod, T1.GraceBaseRate, T1.GraceSpecialRate, T1.GrcPftRate, T1.GrcPftFrq, 
                      T1.NextGrcPftDate, T1.AllowGrcPftRvw, T1.GrcPftRvwFrq, T1.NextGrcPftRvwDate, T1.AllowGrcCpz, T1.GrcCpzFrq, T1.NextGrcCpzDate, T1.RepayBaseRate, 
                      T1.RepaySpecialRate, T1.RepayProfitRate, T1.RepayFrq, T1.NextRepayDate, T1.RepayPftFrq, T1.NextRepayPftDate, T1.AllowRepayRvw, T1.RepayRvwFrq, 
                      T1.NextRepayRvwDate, T1.AllowRepayCpz, T1.RepayCpzFrq, T1.NextRepayCpzDate, T1.MaturityDate, T1.CpzAtGraceEnd, T1.DownPayment, T1.GraceFlatAmount, 
                      T1.ReqRepayAmount, T1.TotalProfit, T1.TotalCpz, T1.TotalGrossPft, T1.TotalGrossGrcPft, T1.TotalGracePft, T1.TotalGraceCpz, T1.GrcRateBasis, T1.RepayRateBasis, 
                      T1.FinType, T1.FinRemarks, T1.FinCcy, T1.ScheduleMethod, T1.ProfitDaysBasis, T1.ReqMaturity, T1.CalTerms, T1.CalMaturity, T1.FirstRepay, T1.LastRepay, 
                      T1.FinStartDate, T1.FinAmount, T1.FinAmount + T1.FeeChargeAmt - T1.DownPayment  lovDescFinancingAmount, T1.FinRepaymentAmount, T1.CustID, 
                      T1.Defferments, T1.PlanDeferCount, T1.FinBranch, T1.FinSourceID, T1.AllowedDefRpyChange, T1.AvailedDefRpyChange, T1.AllowedDefFrqChange, 
                      T1.AvailedDefFrqChange, T1.RecalType, T1.FinAssetValue, T1.DisbAccountId, T1.RepayAccountId, T1.FinIsActive, T1.LimitValid, T1.OverrideLimit, T1.SecurityDeposit, 
                      T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId, 
                      T2.CcyDesc  lovDescFinCcyName, T3.SchdMethodDesc  lovDescScheduleMethodName, T4.IntRateBasisDesc  lovDescProfitDaysBasisName, 
                      T5.BRTypeDesc  lovDescGraceBaseRateName, T6.SRTypeDesc  lovDescGraceSpecialRateName, T7.FinTypeDesc  lovDescFinTypeName, 
                      T8.BRTypeDesc  lovDescRepayBaseRateName, T9.SRTypeDesc  lovDescRepaySpecialRateName, T2.CcyEditField  lovDescFinFormatter, 
                      T7.FinIsAlwMD  lovDescFinIsAlwMD, T7.FinMaxAmount  lovDescFinMaxAmt, T7.FinMinAmount  lovDescFinMinAmount, 
                      T1.MinDownpayPerc, T7.FinIsAlwDifferment  lovDescFinAlwDeferment, T7.FinIsDwPayRequired  lovDescDwnPayReq, 
                      T7.FinMaxDifferment  lovDescFinMaxDifferment, T10.CustCIF  lovDescCustCIF, T10.CustFName  lovDescCustFName, T10.CustLName  lovDescCustLName, 
                      T12.BranchDesc  lovDescFinBranchName, T1.LastRepayDate, T1.LastRepayPftDate, T1.LastRepayRvwDate, T1.LastRepayCpzDate, 
                       T1.AllowGrcRepay, 
                      T1.GrcSchdMthd, T1.GrcMargin, T1.RepayMargin, T1.FinCurrAssetValue, T1.FinCommitmentRef, T1.FinLimitRef, T1.DepreciationFrq, T1.FinContractDate, 
                      T13.SaluationDesc  lovDescSalutationName, T10.CustShrtName  lovDescCustShrtName, T10.CustCoreBank  lovDescCustCoreBank, T1.NextDepDate, 
                      T1.LastDepDate, T1.FinAccount, T1.FinCustPftAccount, T1.AlwIndRate, T1.IndBaseRate, T1.GrcAlwIndRate, T1.GrcIndBaseRate, 
                      T15.BRTypeDesc  lovDescIndBaseRateName, T16.BRTypeDesc  lovDescGrcIndBaseRateName, T17.AcrTillLBD  lovDescAccruedTillLBD, 
                      T7.FinRvwRateApplFor, T7.FinGrcRvwRateApplFor, T1.TotalRepayAmt, T7.FinCategory  lovDescProductCodeName, T1.ClosingStatus, T1.FinApprovedDate, 
                      T1.FeeChargeAmt, T1.Blacklisted, T1.FinRepayPftOnFrq, T1.AnualizedPercRate, T1.EffectiveRateOfReturn, T10.CustCtgCode  lovDescCustCtgCode, 
                      T19.CmtTitle lovDescCommitmentRefName, T1.MigratedFinance, T1.ScheduleMaintained, T1.ScheduleRegenerated, T1.FinPurpose, 
                      T20.ValueDesc  lovDescFinPurposeName, T1.FinStatus, T1.FinStsReason, T1.InitiateUser, T1.bankName, T1.iban, T1.accountType, T1.DdaReferenceNo, 
                      T7.FinScheduleOn  LovDescFinScheduleOn, T1.CustDSR, T1.Authorization1, T1.Authorization2, T21.AuthName  lovDescAuthorization1Name, 
                      T22.AuthName  lovDescAuthorization2Name, T1.JointAccount, T1.JointCustId, T23.CustShrtName  lovDescJointCustShrtName, 
                      T23.CustCIF  lovDescJointCustCIF, '0'  AvailCommitAmount, T1.DownPayBank, T1.DownPaySupl, T1.DownPayAccount, T1.SecurityCollateral, 
                      T1.CustomerAcceptance, T1.Approved, T1.CbbApprovalRequired, T1.CbbApproved, T1.Discrepancy, T1.LimitApproved, T1.InvestmentRef, T1.GraceTerms, 
                      T7.FinDivision  lovDescFinDivision, T1.RcdMaintainSts, T1.FinRepayMethod, T1.GrcProfitDaysBasis, T1.StepFinance,T1.StepType, T1.StepPolicy, T1.AlwManualSteps, 
                      T1.NoOfSteps, T1.TakafulFrq, T1.TakafulRate, T1.WaiverReason, T1.TakafulRef, T1.TakafulRequired, 
                      T1.LinkedFinRef, T1.NextUserId, T1.Priority, T24.PolicyDesc  LovDescStepPolicyName, T1.GrcMinRate, T1.GrcMaxRate, T1.RpyMinRate, T1.RpyMaxRate, 
                      T2.CcyEditField  ReportFormat, T1.DeviationApproval, T1.PptTakafulRequired, T1.PptTakafulFrq, T1.PptWaiverReason, T1.PptTakafulRate, T1.PptTakafulRef, 
                      T1.ManualSchedule, T1.TakeOverFinance, T1.GrcAdvBaseRate, T1.GrcAdvMargin, T1.GrcAdvPftRate, T1.RpyAdvBaseRate, T1.RpyAdvMargin, T1.RpyAdvPftRate, 
                      T25.BRTypeDesc  GrcAdvBaseRateDesc, T26.BRTypeDesc  RpyAdvBaseRateDesc, T1.SupplementRent, T1.IncreasedCost, T1.CreditInsAmt, T1.RolloverFrq, 
                      T1.NextRolloverDate, T27.CustStsDescription, T1.ShariaStatus, T1.InitiateDate, T1.FINPREAPPROVEDREF, T1.MMAId, T1.AccountsOfficer, 
                      T1.feeAccountId,T1.FinCancelAc,T28.GenDeptDesc lovDescAccountsOfficer,T29.AgreeName,T29.MMAReference as LovDescMMAReference,
					  T1.DSACode,T30.ROfficerDesc DSACodeDesc,T1.TDSApplicable, T31.LimitDesc lovDescLimitRefName,T1.TakafulStatus, T32.ProductCategory,T1.MandateID,T1.DroplineFrq,T1.FirstDroplineDate,
					  T1.PftServicingODLimit,T1.InsuranceAmt,T1.DeductInsDisb,T1.AlwBPI , T1.BpiTreatment , T1.PlanEMIHAlw , T1.PlanEMIHMethod , 
					  T1.PlanEMIHMaxPerYear , T1.PlanEMIHMax , T1.PlanEMIHLockPeriod , T1.PlanEMICpz , T1.CalRoundingMode , T1.AlwMultiDisb , T1.ApplicationNo ,
					  T1.ReferralId , T33.ROfficerDesc ReferralIdDesc, T1.DmaCode , T34.ROfficerDesc DmaCodeDesc,  T1.SalesDepartment , T35.GenDeptDesc SalesDepartmentDesc , T1.QuickDisb , T1.WifReference
						FROM         dbo.FinanceMain AS T1 INNER JOIN
                      RMTCurrencies  T2 ON T1.FinCcy = T2.CcyCode LEFT OUTER JOIN
                      BMTSchdMethod  T3 ON T1.ScheduleMethod = T3.SchdMethod LEFT OUTER JOIN
                      BMTIntRateBasisCodes  T4 ON T1.ProfitDaysBasis = T4.IntRateBasisCode LEFT OUTER JOIN
                      RMTBaseRateCodes T5 ON T1.GraceBaseRate = T5.BRType LEFT OUTER JOIN
                      RMTSplRateCodes  T6 ON T1.GraceSpecialRate = T6.SRType INNER JOIN
                      RMTFinanceTypes  T7 ON T1.FinType = T7.FinType LEFT OUTER JOIN
                      RMTBaseRateCodes T8 ON T1.RepayBaseRate = T8.BRType LEFT OUTER JOIN
                      RMTSplRateCodes  T9 ON T1.RepaySpecialRate = T9.SRType LEFT OUTER JOIN
                      RMTBaseRateCodes T15 ON T1.IndBaseRate = T15.BRType LEFT OUTER JOIN
                      RMTBaseRateCodes T16 ON T1.GrcIndBaseRate = T16.BRType LEFT OUTER JOIN
                      Customers  T10 ON T1.CustID = T10.CustID LEFT OUTER JOIN
                      BMTSalutations  T13 ON T10.CustSalutationCode = T13.SalutationCode LEFT OUTER JOIN
                      RMTBranches  T12 ON T1.FinBranch = T12.BranchCode LEFT OUTER JOIN
                      FinPftDetails  T17 ON T17.FinReference = T1.FinReference LEFT OUTER JOIN
                      Commitments T19 ON T1.FinCommitmentRef = T19.CmtReference AND T10.CustID = T19.custID LEFT OUTER JOIN
                      RMTLovFieldDetail  T20 ON T20.FieldCode = 'FINASSTYP' AND T1.FinPurpose = T20.FieldCodeValue LEFT OUTER JOIN
                      AMTAuthorization  T21 ON T1.Authorization1 = T21.AuthUserId LEFT OUTER JOIN
                      AMTAuthorization  T22 ON T1.Authorization2 = T22.AuthUserId LEFT OUTER JOIN
                      Customers  T23 ON T1.JointCustId = T23.CustID LEFT OUTER JOIN
                      StepPolicyHeader  T24 ON T1.StepPolicy = T24.PolicyCode LEFT OUTER JOIN
                      RMTBaseRateCodes  T25 ON T1.GrcAdvBaseRate = T25.BRType LEFT OUTER JOIN
                      RMTBaseRateCodes  T26 ON T1.RpyAdvBaseRate = T26.BRType LEFT OUTER JOIN
                      BMTCustStatusCodes T27 ON T1.finStatus = T27.CustStsCode LEFT OUTER JOIN 
					  RMTGENDEPARTMENTS T28 ON T1.ACCOUNTSOFFICER = T28.GENDEPARTMENT LEFT OUTER JOIN
					  MMAgreements T29 ON T1.MMAId = T29.MMAId LEFT OUTER JOIN
					  RelationshipOfficers T30 ON T1.DSACode = T30.ROfficerCode LEFT OUTER JOIN
					  RelationshipOfficers T33 ON T1.ReferralId = T33.ROfficerCode LEFT OUTER JOIN
					  RelationshipOfficers T34 ON T1.DmaCode = T34.ROfficerCode LEFT OUTER JOIN
					  RMTGENDEPARTMENTS T35 ON T1.SalesDepartment = T35.GENDEPARTMENT LEFT OUTER JOIN
                      LimitAPIDetails T31 ON T1.FinLimitRef = T31.LimitRef AND T10.CustCIF = T31.CustomerReference INNER JOIN  
                      BMTProduct T32 ON T7.FinCategory = T32.ProductCode -- New Filed

		</createView>
		</changeSet>	
		
<changeSet author="madhubabu" id="madhubabu25">
	<createView viewName="FinTypeInsurances_View"
		replaceIfExists="true">
			SELECT     T1.FinType, T1.InsuranceType,T1.Mandatory,T1.DftPayType,T1.CalType,T1.AmountRule,T4.RuleCodeDesc ,
T1.ConstAmt,T1.Percentage,T1.CalculateOn,T2.InsuranceTypeDesc,
T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId
FROM         FinTypeInsurances_temp T1 INNER JOIN
             insurancetype T2 ON T2.InsuranceType=T1.InsuranceType LEFT OUTER JOIN
             Rules T4 ON T1.AmountRule=T4.RuleCode


UNION ALL

SELECT     T1.FinType, T1.InsuranceType,T1.Mandatory,T1.DftPayType,T1.CalType,T1.AmountRule,T4.RuleCodeDesc,
T1.ConstAmt,T1.Percentage,T1.CalculateOn,T2.InsuranceTypeDesc,
T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId
FROM         FinTypeInsurances T1 INNER JOIN
             insurancetype T2 ON T2.InsuranceType=T1.InsuranceType LEFT OUTER JOIN
             Rules T4 ON T1.AmountRule=T4.RuleCode

WHERE     NOT EXISTS
                          (SELECT     1
                            FROM          FinTypeInsurances_Temp
                            WHERE     FinType= T1.FinType AND  InsuranceType = T1.InsuranceType)
	</createView>
</changeSet>		
<changeSet author="Subbarao" id="Subbarao01">
	<comment>SecGroupRights</comment>
	<sql>
		insert into SECGROUPRIGHTS values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (select GRPID  from SECGROUPS where GRPCODE='RTL_BRANCH_CSR') ,(select RIGHTID from SECRIGHTS where RIGHTNAME='button_FinanceMainDialog_btnFlagDetails'), 1, 0,1000,current_timestamp,' ',' ',' ',' ',' ',' ',0);
		INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='LCMUR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_FinanceMainDialog_btnFlagDetails'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
	</sql>
</changeSet>
	<changeSet author="satish" id="ReportList01">
		<addDefaultValue tableName="ReportList"
			defaultValueDate="CURRENT_TIMESTAMP" columnName="LastMntOn"
			columnDataType="datetime" />
	</changeSet>
	<changeSet author="satish" id="ReportList02">
		<insert tableName="ReportList">
			<column name="Code">FINMANDENQ</column>
			<column name="Module">FinanceMain</column>
			<column name="FieldLabels">listheader_FinType.label,listheader_LovDescProductCodeName.label,listheader_LovDescCustCIF.label,listheader_FinReference.label,listheader_FinBranch.label,listheader_FinStartDate.label,listheader_NumberOfTerms.label,listheader_MaturityDate.label,listheader_FinCcy.label,listheader_FinancingAmount.label,listheader_CurFinAmount.label</column>
			<column name="FieldValues">finType,lovDescProductCodeName,lovDescCustCIF,finReference,finBranch,finStartDate,numberOfTerms,maturityDate,finCcy,financingAmount,curFinAmount</column>
			<column name="FieldType">String,String,String,String,String,Date,int,Date,String,BigDecimal,BigDecimal</column>
			<column name="Addfields"></column>
			<column name="ReportFileName">ReportList11</column>
			<column name="ReportHeading">Mandate Enquiry</column>
			<column name="ModuleType">Loan Enquiry</column>
			<column name="Version">0</column>
			<column name="LastMntBy">1000</column>
			<column name="LastMntOn"></column>
			<column name="RecordStatus">Approved</column>
			<column name="RoleCode"></column>
			<column name="NextRoleCode"></column>
			<column name="TaskId"></column>
			<column name="NextTaskId"></column>
			<column name="RecordType"></column>
			<column name="WorkflowId">0</column>
			<column name="FormatReq">0</column>
		</insert>
		</changeSet>


</databaseChangeLog>