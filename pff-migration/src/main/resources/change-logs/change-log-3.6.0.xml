<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">
	<property name="add.schema" value="dbo." dbms="mssql" />
	<property name="add.schema" value=" " dbms="oracle" />
	<property name="call.substr" value="substring" dbms="mssql" />
	<property name="call.substr" value="substr" dbms="oracle" />
	<property name="call.substr" value="substring" dbms="postgresql" />
	<property name="call.auditdb" value="PFFBFSQCAudit.." dbms="mssql" />
	<property name="call.auditdb" value=" " dbms="oracle" />
	<property name="call.concatenate" value="+" dbms="mssql" />
	<property name="call.concatenate" value="||" dbms="oracle" />
	<property name="call.concatenate" value="||" dbms="postgresql" />
	<property name="call.collength" value="LEN" dbms="mssql" />
	<property name="call.collength" value="LENGTH" dbms="oracle" />
	<property name="call.collength" value="LENGTH" dbms="postgresql" />
	<property name="call.date" value="getdate()" dbms="mssql" />
	<property name="call.date" value="sysdate" dbms="oracle" />
	<property name="call.date" value="now()::timestamp" dbms="postgresql" />
	
	<changeSet id="01" author="Vijay">
	<modifyDataType tableName="WORKFLOWDETAILS" columnName="WORKFLOWDESC" newDataType="VARCHAR2(200)"/>
	</changeSet>
	<changeSet id="02" author="Madhubabu">
<sql>
 UPDATE SEQSECGROUPS SET SEQNO= (SELECT MAX(GRPID) FROM SECGROUPS);
			UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS);
			UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);
			UPDATE SEQSECROLEGROUPS SET SEQNO= (SELECT MAX(ROLEGRPID) FROM SECROLEGROUPS);

INSERT INTO SecGroups SELECT (SELECT MAX(GRPID)+1 FROM SECGROUPS), 'FEEPOSTINGS_MAKER', 'WF Maker for Fee Popstings', 0,1000,CURRENT_TIMESTAMP,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroups WHERE 0=0;
INSERT INTO SecGroups SELECT (SELECT MAX(GRPID)+1 FROM SECGROUPS), 'FEEPOSTINGS_APPROVER', 'WF Maker Fee Popstings', 0,1000,CURRENT_TIMESTAMP,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroups WHERE 0=0;
      

INSERT INTO SecRights SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),0,'menuItem_FinanceManagement_FeePostings','MENU',0,1000,CURRENT_TIMESTAMP,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
INSERT INTO SecRights SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),0,'menuItem_FinanceManagement_FeePostingsEnquiry','MENU',0,1000,CURRENT_TIMESTAMP,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;

INSERT INTO SecRights SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),2,'button_FeePostingList_PrintList','FeePostingList',0,1000,CURRENT_TIMESTAMP,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
INSERT INTO SecRights SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),2,'button_FeePostingList_NewFeePosting','FeePostingList',0,1000,CURRENT_TIMESTAMP,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
INSERT INTO SecRights SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),2,'button_FeePostingsDialog_btnNew','FeePostingsDialog',0,1000,CURRENT_TIMESTAMP,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
INSERT INTO SecRights SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),2,'button_FeePostingsDialog_btnEdit','FeePostingsDialog',0,1000,CURRENT_TIMESTAMP,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
INSERT INTO SecRights SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),2,'button_FeePostingsDialog_btnDelete','FeePostingsDialog',0,1000,CURRENT_TIMESTAMP,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
INSERT INTO SecRights SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),2,'button_FeePostingsDialog_btnSave','FeePostingsDialog',0,1000,CURRENT_TIMESTAMP,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;


INSERT INTO SecRights SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'FeePostingsDialog_postAgainst','FeePostingsDialog',0,1000,CURRENT_TIMESTAMP,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
INSERT INTO SecRights SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'FeePostingsDialog_reference','FeePostingsDialog',0,1000,CURRENT_TIMESTAMP,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
INSERT INTO SecRights SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'FeePostingsDialog_feeTypeCode','FeePostingsDialog',0,1000,CURRENT_TIMESTAMP,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
INSERT INTO SecRights SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'FeePostingsDialog_partnerbankId','FeePostingsDialog',0,1000,CURRENT_TIMESTAMP,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
INSERT INTO SecRights SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'FeePostingsDialog_postingAmount','FeePostingsDialog',0,1000,CURRENT_TIMESTAMP,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
INSERT INTO SecRights SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'FeePostingsDialog_postingCurrency','FeePostingsDialog',0,1000,CURRENT_TIMESTAMP,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
INSERT INTO SecRights SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'FeePostingsDialog_postingDate','FeePostingsDialog',0,1000,CURRENT_TIMESTAMP,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
INSERT INTO SecRights SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'FeePostingsDialog_valueDate','FeePostingsDialog',0,1000,CURRENT_TIMESTAMP,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
INSERT INTO SecRights SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'FeePostingsDialog_remarks','FeePostingsDialog',0,1000,CURRENT_TIMESTAMP,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;


INSERT INTO SecGroupRights SELECT (SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FEEPOSTINGS_MAKER'), (select max(RightID) from SecRights WHERE RightName='menuCat_FinanceManagement'),1,0,10000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
INSERT INTO SecGroupRights SELECT (SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FEEPOSTINGS_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='menuItem_FinanceManagement_FeePostings'),1,0,10000,CURRENT_TIMESTAMP,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
INSERT INTO SecGroupRights SELECT (SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FEEPOSTINGS_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='menuItem_FinanceManagement_FeePostingsEnquiry'),1,0,10000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
INSERT INTO SecGroupRights SELECT (SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FEEPOSTINGS_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_FeePostingList_NewFeePosting'),1,0,10000,CURRENT_TIMESTAMP,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
INSERT INTO SecGroupRights SELECT (SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FEEPOSTINGS_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_FeePostingsDialog_btnDelete'),1,0,10000,CURRENT_TIMESTAMP,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
INSERT INTO SecGroupRights SELECT (SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FEEPOSTINGS_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_FeePostingsDialog_btnSave'),1,0,10000,CURRENT_TIMESTAMP,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
INSERT INTO SecGroupRights SELECT (SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FEEPOSTINGS_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FeePostingsDialog_postAgainst'),1,0,10000,CURRENT_TIMESTAMP,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
INSERT INTO SecGroupRights SELECT (SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FEEPOSTINGS_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FeePostingsDialog_reference'),1,0,10000,CURRENT_TIMESTAMP,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
INSERT INTO SecGroupRights SELECT (SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FEEPOSTINGS_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FeePostingsDialog_feeTypeCode'),1,0,10000,CURRENT_TIMESTAMP,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
INSERT INTO SecGroupRights SELECT (SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FEEPOSTINGS_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FeePostingsDialog_partnerbankId'),1,0,10000,CURRENT_TIMESTAMP,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
INSERT INTO SecGroupRights SELECT (SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FEEPOSTINGS_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FeePostingsDialog_postingAmount'),1,0,10000,CURRENT_TIMESTAMP,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
INSERT INTO SecGroupRights SELECT (SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FEEPOSTINGS_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FeePostingsDialog_postingCurrency'),1,0,10000,CURRENT_TIMESTAMP,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
INSERT INTO SecGroupRights SELECT (SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FEEPOSTINGS_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FeePostingsDialog_postingDate'),1,0,10000,CURRENT_TIMESTAMP,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
INSERT INTO SecGroupRights SELECT (SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FEEPOSTINGS_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FeePostingsDialog_valueDate'),1,0,10000,CURRENT_TIMESTAMP,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
INSERT INTO SecGroupRights SELECT (SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FEEPOSTINGS_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FeePostingsDialog_remarks'),1,0,10000,CURRENT_TIMESTAMP,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;


INSERT INTO SecGroupRights SELECT (SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FEEPOSTINGS_APPROVER'), (select max(RightID) from SecRights WHERE RightName='menuCat_FinanceManagement'),1,0,10000,CURRENT_TIMESTAMP,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
INSERT INTO SecGroupRights SELECT (SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FEEPOSTINGS_APPROVER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='menuItem_FinanceManagement_FeePostings'),1,0,10000,CURRENT_TIMESTAMP,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
INSERT INTO SecGroupRights SELECT (SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FEEPOSTINGS_APPROVER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='menuItem_FinanceManagement_FeePostingsEnquiry'),1,0,10000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
INSERT INTO SecGroupRights SELECT (SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FEEPOSTINGS_APPROVER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_FeePostingsDialog_btnSave'),1,0,10000,CURRENT_TIMESTAMP,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;


INSERT INTO SecRoleGroups SELECT (Select MAX(RoleGrpID)+1 From SecRoleGroups), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FEEPOSTINGS_MAKER'), (select roleid from SecRoles where RoleCd='MSTGRP1_MAKER'), 0,1000,CURRENT_TIMESTAMP,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRoleGroups WHERE 0=0;
INSERT INTO SecRoleGroups SELECT (Select MAX(RoleGrpID)+1 From SecRoleGroups), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FEEPOSTINGS_APPROVER'), (select roleid from SecRoles where RoleCd='MSTGRP1_APPROVER'), 0,1000,CURRENT_TIMESTAMP,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRoleGroups WHERE 0=0;

            UPDATE SEQSECGROUPS SET SEQNO= (SELECT MAX(GRPID) FROM SECGROUPS);
			UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS);
			UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);
			UPDATE SEQSECROLEGROUPS SET SEQNO= (SELECT MAX(ROLEGRPID) FROM SECROLEGROUPS);
</sql>
</changeSet>
	
	<changeSet id="2" author="Siva">
		<createView viewName="FINRECEIPTHEADER_FVIEW" replaceIfExists="true">
  SELECT     T1.ReceiptID, T1.ReceiptDate, T1.ReceiptType,T1.RecAgainst,T1.Reference, T1.ReceiptPurpose, 
				 T1.ReceiptMode, T1.ExcessAdjustTo,T1.AllocationType,T1.ReceiptAmount,T1.EffectSchdMethod, 
				 T1.ReceiptModeStatus, T1.Version, T1.LastMntBy, T1.LastMntOn,T1.RecordStatus,T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId,
				 T2.FinType,  T2.FinBranch, T3.CustCIF , 	T3.CustShrtName, T2.FinCcy, T1.RealizationDate,
				 T1.CancelReason, T4.FinTypeDesc,  T6.BranchDesc FinBranchDesc, T5.CcyDesc FinCcyDesc, T7.RejectDesc CancelReasonDesc, T2.FinIsActive, 
				 T2.ScheduleMethod, T2.ProfitDaysBasis PftDaysBasis, T1.WaviedAmt, T3.CustID
							FROM         FinReceiptHeader_Temp T1 INNER JOIN
				       FinanceMain_Temp T2 ON T1.Reference = T2.FinReference INNER JOIN
				       Customers T3 ON T2.CustId = T3.CustId INNER JOIN
				       RMTFinanceTypes T4 ON T2.FinType = T4.FinType INNER JOIN
				       RMTCurrencies T5 ON T2.FinCcy = T5.CcyCode INNER JOIN
				       RMTBranches T6 ON T2.FinBranch = T6.BranchCode LEFT JOIN
				       BMTRejectCodes T7 ON T1.CancelReason = T7.RejectCode
		</createView>
	</changeSet>
	
	<changeSet id="03" author="Amit">
		<createTable tableName="ExtendedMonthEnd">
			<column name="ExtMnthRequired" type="bit" />
			<column name="MnthExtTo" type="datetime" />
			<column name="Active" type="bit"/>
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkflowId" type="bigint" />
		</createTable>
	</changeSet>
	<changeSet id="04" author="Amit">
		<createTable tableName="ExtendedMonthEnd_Temp">
			<column name="ExtMnthRequired" type="bit" />
			<column name="MnthExtTo" type="datetime" />
			<column name="Active" type="bit"/>
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkflowId" type="bigint" />
		</createTable>
	</changeSet>
	<changeSet id="05" author="Srikanth">
	<sql>
	INSERT INTO ErrorDetails VALUES('90289','EN','E','Uploaded Document {0} and docFormat {1} should be same.','','Approved','','','','','',0,CURRENT_TIMESTAMP,1000,0);
	INSERT INTO ErrorDetails VALUES('90291','EN','E','Uploaded document {0} extension should be required.','','Approved','','','','','',0,CURRENT_TIMESTAMP,1000,0);
	</sql>
	</changeSet>
	<changeSet id="06" author="satya">
	<sql>
	UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);
	INSERT INTO SecGroupRights SELECT (SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='BUILDERCOMPANY_MAKER'), (select max(RightID) from SecRights WHERE RightName='BuilderCompanyDialog_groupId'),1,0,10000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
	UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);
	</sql>
	</changeSet>
	<changeSet id="07" author="Irfan">
	<sql>
		INSERT INTO ReportList Values('VASWorkFlow','VASWorkFlow','listheader_FinType.label,listheader_ScreenCode.label,listheader_WorkFlowType.label','finType,screenCode,workFlowType',
		'String,String,String','','ReportList03','VAS WorkFlow','Solution Factory',1,1000,CURRENT_TIMESTAMP,'Approved','','','','','',0,0);
	
		INSERT INTO ReportList Values('VASRecording','VASRecording','listheader_ProductCode.label,listheader_PostingAgainst.label,listheader_PrimaryLinkRef.label,listheader_VasReference.label,listheader_FeePaymentMode.label,','productCode,postingAgainst,primaryLinkRef,vasReference,feePaymentMode',
		'String,String,String,String,String','','ReportList05','VAS Recording','Loan Origination',1,1000,CURRENT_TIMESTAMP,'Approved','','','','','',0,0);
	</sql>
	</changeSet>
	
	<changeSet id="08" author="Irfan">
	<sql>
		Update ReportList set FIELDLABELS='listheader_ProductCtg.label,listheader_ProductCtgDesc.label' where CODE='VASProductCategory';
	</sql>
	</changeSet>
	
	<changeSet id="09" author="Amit">
	<dropTable tableName="ExtendedMonthEnd"/>
	</changeSet>
	
	<changeSet id="10" author="Amit">
	<dropTable tableName="ExtendedMonthEnd_Temp"/>
	</changeSet>
	
	<changeSet id="11" author="Amit">
		<createTable tableName="EodConfig">
			<column name="EodConfigId" type="bigint">
				<constraints primaryKey="true" nullable="false" />
			</column>
			<column name="ExtMnthRequired" type="bit" />
			<column name="MnthExtTo" type="datetime" />
			<column name="Active" type="bit"/>
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkflowId" type="bigint" />
		</createTable>
	</changeSet>
	<changeSet id="12" author="Amit">
		<createTable tableName="EodConfig_Temp">
			<column name="EodConfigId" type="bigint">
				<constraints primaryKey="true" nullable="false" />
			</column>
			<column name="ExtMnthRequired" type="bit" />
			<column name="MnthExtTo" type="datetime" />
			<column name="Active" type="bit"/>
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkflowId" type="bigint" />
		</createTable>
	</changeSet>
	
		<changeSet id="15" author="Madhubabu">
	<dropTable tableName="FeePostings" />
	<dropTable tableName="FeePostings_temp" />
	</changeSet>
	<changeSet id="16" author="Madhubabu">
		<createTable tableName="FeePostings">
			<column name="PostId" type="bigint">
				<constraints primaryKey="true" nullable="false" />
			</column>
			<column name="PostAgainst" type="nchar(10)" />
			<column name="Reference" type="varchar(20)" />
			<column name="FeeTyeCode" type="char(10)" />
			<column name="PostingAmount" type="decimal(18,0)"/>
			<column name="PostDate" type="datetime" />
			<column name="ValueDate" type="datetime" />
			<column name="Version" type="NUMBER(10,0)" />
			<column name="Remarks" type="nvarchar(200)" />
			<column name="PartnerBankId" type="NUMBER(19,0)" />
			<column name="Lastmntby" type="NUMBER(19,0)" />
			<column name="Lastmnton" type="datetime" />
			<column name="Recordstatus" type="nvarchar(50)" />
			<column name="Rolecode" type="nvarchar(50)" />
			<column name="Nextrolecode" type="nvarchar(200)" />
			<column name="Taskid" type="nvarchar(50)" />
			<column name="Nexttaskid" type="nvarchar(200)" />
			<column name="Recordtype" type="nvarchar(50)" />
			<column name="Workflowid" type="NUMBER(19,0)" />
			
		</createTable>
	</changeSet>
	
	<changeSet id="17" author="Madhubabu">
		<createTable tableName="FeePostings_Temp">
			<column name="PostId" type="bigint">
				<constraints primaryKey="true" nullable="false" />
			</column>
			<column name="PostAgainst" type="nchar(10)" />
			<column name="Reference" type="varchar(20)" />
			<column name="FeeTyeCode" type="char(10)" />
			<column name="PostingAmount" type="decimal(18,0)"/>
			<column name="PostDate" type="datetime" />
			<column name="ValueDate" type="datetime" />
			<column name="Version" type="NUMBER(10,0)" />
			<column name="Remarks" type="nvarchar(200)" />
			<column name="PartnerBankId" type="NUMBER(19,0)" />
			<column name="Lastmntby" type="NUMBER(19,0)" />
			<column name="Lastmnton" type="datetime" />
			<column name="Recordstatus" type="nvarchar(50)" />
			<column name="Rolecode" type="nvarchar(50)" />
			<column name="Nextrolecode" type="nvarchar(200)" />
			<column name="Taskid" type="nvarchar(50)" />
			<column name="Nexttaskid" type="nvarchar(200)" />
			<column name="Recordtype" type="nvarchar(50)" />
			<column name="Workflowid" type="NUMBER(19,0)" />
			
		</createTable>
	</changeSet>
	
	<changeSet id="18" author="Madhubabu">
		<createView viewName="FeePostings_TView" replaceIfExists="true">
   SELECT     T1.PostId,T1.PostAgainst, T1.Reference, T1.FeeTyeCode,T1.PostingAmount,T1.PostDate, T1.ValueDate,T1.PartnerBankId ,T2.partnerBankName,T2.Accountno partnerBankAc,
             T1.Remarks, T1.Version, T1.LastMntBy, T1.LastMntOn,T1.RecordStatus,T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId
			FROM    FeePostings_Temp T1 INNER JOIN
              PartnerBanks T2 ON T1.PartnerBankId = T2.PartnerBankId 
		</createView>
	</changeSet>
<changeSet id="19" author="Madhubabu">
		<createView viewName="FeePostings_View" replaceIfExists="true">
   SELECT     T1.PostId,T1.PostAgainst, T1.Reference, T1.FeeTyeCode,T1.PostingAmount,T1.PostDate, T1.ValueDate,T1.PartnerBankId ,T2.partnerBankName,T2.Accountno partnerBankAc,
             T1.Remarks, T1.Version, T1.LastMntBy, T1.LastMntOn,T1.RecordStatus,T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId
			FROM    FeePostings_Temp T1 INNER JOIN
              PartnerBanks T2 ON T1.PartnerBankId = T2.PartnerBankId 
  UNION ALL	

SELECT     T1.PostId,T1.PostAgainst, T1.Reference, T1.FeeTyeCode,T1.PostingAmount,T1.PostDate, T1.ValueDate,T1.PartnerBankId ,T2.partnerBankName,T2.Accountno partnerBankAc,
             T1.Remarks, T1.Version, T1.LastMntBy, T1.LastMntOn,T1.RecordStatus,T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId
			FROM    FeePostings T1 INNER JOIN
              PartnerBanks T2 ON T1.PartnerBankId = T2.PartnerBankId

WHERE     (NOT EXISTS
                          (SELECT     1 Expr1
                            FROM           FeePostings_Temp
                            WHERE      (PostId = T1.PostId)))
	  
		</createView>
</changeSet>
<changeSet id="20" author="Madhubabu">
		<createView viewName="FeePostings_AView" replaceIfExists="true">
 SELECT     T1.PostId,T1.PostAgainst, T1.Reference, T1.FeeTyeCode,T1.PostingAmount,T1.PostDate, T1.ValueDate,T1.PartnerBankId ,T2.partnerBankName,T2.Accountno partnerBankAc,
             T1.Remarks, T1.Version, T1.LastMntBy, T1.LastMntOn,T1.RecordStatus,T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId
			FROM    FeePostings T1 INNER JOIN
              PartnerBanks T2 ON T1.PartnerBankId = T2.PartnerBankId


		</createView>
</changeSet>		
<changeSet id="21" author="pruthvi">
<createIndex indexName="idx_BankBranches_IFSC" tableName="BankBranches">
			<column name="IFSC" type="varchar(20)" />
		</createIndex>
		</changeSet>	
<changeSet id="22" author="SreeRavali">
	<createTable tableName="Restructure">
		<column name="FinReference" type="nvarchar(20)">
			<constraints primaryKey="true" nullable="false" />
		</column>
		<column name="NoofInstalments" type="int">
			<constraints nullable="false" />
		</column>
		<column name="PaymentAmount" type="decimal(18,0)" />
		<column name="ScheduleMethod" type="varchar(10)">
			<constraints nullable="false" />
		</column>
		<column name="InterestRateType" type="varchar(8)">
			<constraints nullable="false" />
		</column>
		<column name="RepayProfitRate" type="decimal(13,9)" />
		<column name="RepayBaseRate" type="varchar(8)" />
		<column name="RepaySpecialRate" type="varchar(8)" />
		<column name="RepayMargin" type="decimal(13,9)" />
		<column name="CapitalizeODCharges" type="boolean" />
		<column name="CapitalizeODInterest" type="boolean" />
		<column name="RepayFrq" type="varchar(5)">
			<constraints nullable="false" />
		</column>
		<column name="NextRepayDate" type="datetime" />
		<column name="RepayPftFrq" type="varchar(5)">
			<constraints nullable="false" />
		</column>
		<column name="NextRepayPftDate" type="datetime" />
		<column name="RepayRvwFrq" type="varchar(5)">
			<constraints nullable="false" />
		</column>
		<column name="NextRepayRvwDate" type="datetime" />
		<column name="RepayCpzFrq" type="varchar(5)" />
		<column name="NextRepayCpzDate" type="datetime" />
		<column name="MaturityDate" type="datetime">
			<constraints nullable="false" />
		</column>
		<column name="PayInterestonFrq" type="boolean" />
	</createTable>
</changeSet>
<changeSet id="23" author="SreeRavali">
	<createTable tableName="Restructure_Temp">
		<column name="FinReference" type="nvarchar(20)">
			<constraints primaryKey="true" nullable="false" />
		</column>
		<column name="NoofInstalments" type="int">
			<constraints nullable="false" />
		</column>
		<column name="PaymentAmount" type="decimal(18,0)" />
		<column name="ScheduleMethod" type="varchar(10)">
			<constraints nullable="false" />
		</column>
		<column name="InterestRateType" type="varchar(8)">
			<constraints nullable="false" />
		</column>
		<column name="RepayProfitRate" type="decimal(13,9)" />
		<column name="RepayBaseRate" type="varchar(8)" />
		<column name="RepaySpecialRate" type="varchar(8)" />
		<column name="RepayMargin" type="decimal(13,9)" />
		<column name="CapitalizeODCharges" type="boolean" />
		<column name="CapitalizeODInterest" type="boolean" />
		<column name="RepayFrq" type="varchar(5)">
			<constraints nullable="false" />
		</column>
		<column name="NextRepayDate" type="datetime" />
		<column name="RepayPftFrq" type="varchar(5)">
			<constraints nullable="false" />
		</column>
		<column name="NextRepayPftDate" type="datetime" />
		<column name="RepayRvwFrq" type="varchar(5)">
			<constraints nullable="false" />
		</column>
		<column name="NextRepayRvwDate" type="datetime" />
		<column name="RepayCpzFrq" type="varchar(5)" />
		<column name="NextRepayCpzDate" type="datetime" />
		<column name="MaturityDate" type="datetime">
			<constraints nullable="false" />
		</column>
		<column name="PayInterestonFrq" type="boolean" />
	</createTable>
</changeSet>
<changeSet id="24" author="Madhubabu">
		<createView viewName="FeePostings_View" replaceIfExists="true">
   SELECT     T1.PostId,T1.PostAgainst, T1.Reference, T1.FeeTyeCode,T1.PostingAmount,T1.PostDate, T1.ValueDate,T1.PartnerBankId ,T2.partnerBankName,T2.Accountno partnerBankAc,
             T3.AccountSetId,T1.Remarks, T1.Version, T1.LastMntBy, T1.LastMntOn,T1.RecordStatus,T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId
			FROM    FeePostings_Temp T1 INNER JOIN
					PartnerBanks T2 ON T1.PartnerBankId = T2.PartnerBankId Left outer  Join
					Feetypes T3 ON T3.FeeTypeCode=T1.FeeTyeCode
					
  UNION ALL	

SELECT     T1.PostId,T1.PostAgainst, T1.Reference, T1.FeeTyeCode,T1.PostingAmount,T1.PostDate, T1.ValueDate,T1.PartnerBankId ,T2.partnerBankName,T2.Accountno partnerBankAc,
             T3.AccountSetId,T1.Remarks, T1.Version, T1.LastMntBy, T1.LastMntOn,T1.RecordStatus,T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId
			FROM    FeePostings T1 INNER JOIN
					PartnerBanks T2 ON T1.PartnerBankId = T2.PartnerBankId Left outer  Join
					Feetypes T3 ON T3.FeeTypeCode=T1.FeeTyeCode

WHERE     (NOT EXISTS
                          (SELECT     1 Expr1
                            FROM           FeePostings_Temp
                            WHERE      (PostId = T1.PostId)))
	  
</createView>
</changeSet>
<changeSet id="25" author="Madhubabu">
		<createView viewName="FeePostings_AView" replaceIfExists="true">
 SELECT     T1.PostId,T1.PostAgainst, T1.Reference, T1.FeeTyeCode,T1.PostingAmount,T1.PostDate, T1.ValueDate,T1.PartnerBankId ,T2.partnerBankName,T2.Accountno partnerBankAc,
             T3.AccountSetId,T1.Remarks, T1.Version, T1.LastMntBy, T1.LastMntOn,T1.RecordStatus,T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId
			FROM    FeePostings T1 INNER JOIN
					PartnerBanks T2 ON T1.PartnerBankId = T2.PartnerBankId Left outer  Join
					Feetypes T3 ON T3.FeeTypeCode=T1.FeeTyeCode


		</createView>
</changeSet>		
<changeSet id="26" author="Madhubabu">
		<createView viewName="FeePostings_TView" replaceIfExists="true">
  SELECT     T1.PostId,T1.PostAgainst, T1.Reference, T1.FeeTyeCode,T1.PostingAmount,T1.PostDate, T1.ValueDate,T1.PartnerBankId ,T2.partnerBankName,T2.Accountno partnerBankAc,
             T3.AccountSetId,T1.Remarks, T1.Version, T1.LastMntBy, T1.LastMntOn,T1.RecordStatus,T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId
			FROM    FeePostings_Temp T1 INNER JOIN
					PartnerBanks T2 ON T1.PartnerBankId = T2.PartnerBankId Left outer  Join
					Feetypes T3 ON T3.FeeTypeCode=T1.FeeTyeCode
		</createView>
	</changeSet>
<changeSet id="27" author="Amit">
		<createView viewName="EodConfig_AView" replaceIfExists="true">
SELECT		T1.EodConfigId, T1.ExtMnthRequired, T1.MnthExtTo, T1.Active		
			, T1.Version , T1.LastMntBy, T1.LastMntOn,T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId
FROM    	EodConfig  T1
</createView>
	</changeSet>
	<changeSet id="28" author="Amit">
		<createView viewName="EodConfig_View" replaceIfExists="true">
SELECT		T1.EodConfigId, T1.ExtMnthRequired, T1.MnthExtTo, T1.Active		
			, T1.Version , T1.LastMntBy, T1.LastMntOn,T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId
FROM    	EodConfig_Temp T1 
UNION ALL

SELECT		T1.EodConfigId, T1.ExtMnthRequired, T1.MnthExtTo, T1.Active		
			, T1.Version , T1.LastMntBy, T1.LastMntOn,T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId
FROM    	EodConfig  T1 
WHERE     NOT EXISTS (SELECT 1 FROM EodConfig_TEMP WHERE EodConfigId = T1.EodConfigId)
</createView>
	</changeSet>
	<changeSet id="29" author="Amit">
		<createTable tableName="SeqEodConfig">
			<column name="SeqNo" type="bigint" />
		</createTable>
	</changeSet>
	<changeSet id="30" author="Amit">
		<sql>
		
		UPDATE SEQSECRIGHTS SET SEQNO=
			(SELECT MAX(RIGHTID) FROM SECRIGHTS);
			UPDATE
			SEQSECGROUPRIGHTS SET
			SEQNO = (SELECT MAX(GRPRIGHTID) FROM
			SECGROUPRIGHTS);
			UPDATE
			SEQSECGROUPS SET SEQNO=(SELECT MAX(GRPID) FROM
			SECGROUPS);
			UPDATE
			SEQSECROLEGROUPS SET SEQNO=(SELECT MAX(ROLEGRPID)
			FROM SECROLEGROUPS);
			UPDATE SeqPTMenuDetails SET SEQNO= (SELECT
			MAX(menuId) FROM
			PTMenuDetails);
		
		INSERT INTO SecGroups SELECT (select (SeqNo+1) from SeqSecGroups), 'EODCONFIG_VIEW', 'Allow to view EODConfig', 0,1000,'2017-05-24 07:26:48','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroups WHERE 0=0;
INSERT INTO SecGroups SELECT (select (SeqNo+2) from SeqSecGroups), 'EODCONFIG_MAKER', 'WF Maker for EODConfig', 0,1000,'2017-05-24 07:26:48','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroups WHERE 0=0;
INSERT INTO SecGroups SELECT (select (SeqNo+3) from SeqSecGroups), 'EODCONFIG_APPROVER', 'WF Approver for EODConfig', 0,1000,'2017-05-24 07:26:48','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroups WHERE 0=0;
INSERT INTO SecRights SELECT (select (SeqNo+1) from SeqSecRights),0,'menuCat_eod','MENU',0,1000,'2017-05-24  07:26:48','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
INSERT INTO SecRights SELECT (select (SeqNo+2) from SeqSecRights),0,'menuCat_eodEnquiry','MENU',0,1000,'2017-05-24  07:26:48','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
INSERT INTO SecRights SELECT (select (SeqNo+3) from SeqSecRights),0,'menuItem_eod_EODConfig','MENU',0,1000,'2017-05-24 07:26:48','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
INSERT INTO SecRights SELECT (select (SeqNo+4) from SeqSecRights),0,'menuItem_eod_EODConfigEnquiry','MENU',0,1000,'2017-05-24 07:26:48','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
INSERT INTO SecRights SELECT (select (SeqNo+5) from SeqSecRights),2,'button_EODConfigList_PrintList','EODConfigList',0,1000,'2017-05-24 07:26:48','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
INSERT INTO SecRights SELECT (select (SeqNo+6) from SeqSecRights),2,'button_EODConfigList_NewEODConfig','EODConfigList',0,1000,'2017-05-24 07:26:48','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
INSERT INTO SecRights SELECT (select (SeqNo+7) from SeqSecRights),2,'button_EODConfigDialog_btnNew','EODConfigDialog',0,1000,'2017-05-24 07:26:48','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
INSERT INTO SecRights SELECT (select (SeqNo+8) from SeqSecRights),2,'button_EODConfigDialog_btnEdit','EODConfigDialog',0,1000,'2017-05-24 07:26:48','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
INSERT INTO SecRights SELECT (select (SeqNo+9) from SeqSecRights),2,'button_EODConfigDialog_btnDelete','EODConfigDialog',0,1000,'2017-05-24 07:26:48','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
INSERT INTO SecRights SELECT (select (SeqNo+10) from SeqSecRights),2,'button_EODConfigDialog_btnSave','EODConfigDialog',0,1000,'2017-05-24 07:26:48','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
INSERT INTO SecRights SELECT (select (SeqNo+10+1) from SeqSecRights),3,'EODConfigDialog_EodConfigId','EODConfigDialog',0,1000,'2017-05-24 07:26:48','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
INSERT INTO SecRights SELECT (select (SeqNo+10+2) from SeqSecRights),3,'EODConfigDialog_ExtMnthRequired','EODConfigDialog',0,1000,'2017-05-24 07:26:48','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
INSERT INTO SecRights SELECT (select (SeqNo+10+3) from SeqSecRights),3,'EODConfigDialog_MnthExtTo','EODConfigDialog',0,1000,'2017-05-24 07:26:48','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
INSERT INTO SecRights SELECT (select (SeqNo+10+4) from SeqSecRights),3,'EODConfigDialog_Active','EODConfigDialog',0,1000,'2017-05-24 07:26:48','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
INSERT INTO SecGroupRights SELECT (select (SeqNo+1) from SeqSecGroupRights), (select (SeqNo+1) from SeqSecGroups), (select max(RightID) from SecRights WHERE RightName='menuCat_eodEnquiry'),1,0,10000,'2017-05-24 07:26:48','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
INSERT INTO SecGroupRights SELECT (select (SeqNo+2) from SeqSecGroupRights), (select (SeqNo+1) from SeqSecGroups), (select (SeqNo+4) from SeqSecRights),1,0,10000,'2017-05-24 07:26:48',' ',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
INSERT INTO SecGroupRights SELECT (select (SeqNo+16) from SeqSecGroupRights), (select (SeqNo+2) from SeqSecGroups), (select max(RightID) from SecRights WHERE RightName='menuCat_eod'),1,0,10000,'2017-05-24 07:26:48',' ',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
INSERT INTO SecGroupRights SELECT (select (SeqNo+17) from SeqSecGroupRights), (select (SeqNo+2) from SeqSecGroups), (select (SeqNo+3) from SeqSecRights),1,0,10000,'2017-05-24 07:26:48','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
INSERT INTO SecGroupRights SELECT (select (SeqNo+18) from SeqSecGroupRights), (select (SeqNo+2) from SeqSecGroups), (select (SeqNo+6) from SeqSecRights),1,0,10000,'2017-05-24 07:26:48','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
INSERT INTO SecGroupRights SELECT (select (SeqNo+19) from SeqSecGroupRights), (select (SeqNo+2) from SeqSecGroups), (select (SeqNo+9) from SeqSecRights),1,0,10000,'2017-05-24 07:26:48','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
INSERT INTO SecGroupRights SELECT (select (SeqNo+20) from SeqSecGroupRights), (select (SeqNo+2) from SeqSecGroups), (select (SeqNo+10) from SeqSecRights),1,0,10000,'2017-05-24 07:26:48','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
INSERT INTO SecGroupRights SELECT (select (SeqNo+20+1) from SeqSecGroupRights), (select (SeqNo+2) from SeqSecGroups), (select (SeqNo+10+1) from SeqSecRights),1,0,10000,'2017-05-24 07:26:48','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
INSERT INTO SecGroupRights SELECT (select (SeqNo+20+2) from SeqSecGroupRights), (select (SeqNo+2) from SeqSecGroups), (select (SeqNo+10+2) from SeqSecRights),1,0,10000,'2017-05-24 07:26:48','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
INSERT INTO SecGroupRights SELECT (select (SeqNo+20+3) from SeqSecGroupRights), (select (SeqNo+2) from SeqSecGroups), (select (SeqNo+10+3) from SeqSecRights),1,0,10000,'2017-05-24 07:26:48','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
INSERT INTO SecGroupRights SELECT (select (SeqNo+20+4) from SeqSecGroupRights), (select (SeqNo+2) from SeqSecGroups), (select (SeqNo+10+4) from SeqSecRights),1,0,10000,'2017-05-24 07:26:48','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
INSERT INTO SecGroupRights SELECT (select (SeqNo+24+4) from SeqSecGroupRights), (select (SeqNo+3) from SeqSecGroups), (select max(RightID) from SecRights WHERE RightName='menuCat_eod'),1,0,10000,'2017-05-24 07:26:48','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
INSERT INTO SecGroupRights SELECT (select (SeqNo+25+4) from SeqSecGroupRights), (select (SeqNo+3) from SeqSecGroups), (select (SeqNo+3) from SeqSecRights),1,0,10000,'2017-05-24 07:26:48','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
INSERT INTO SecGroupRights SELECT (select (SeqNo+26+4) from SeqSecGroupRights), (select (SeqNo+3) from SeqSecGroups), (select (SeqNo+10) from SeqSecRights),1,0,10000,'2017-05-24 07:26:48','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
update SeqSecGroupRights set SeqNo = (SeqNo+26+4) ;
INSERT INTO SecRoleGroups SELECT (select (SeqNo+1) from SeqSecRoleGroups), (select (SeqNo+2) from SeqSecGroups), (select roleid from SecRoles where RoleCd='MSTGRP1_MAKER'), 0,1000,'2017-05-24 07:26:48','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRoleGroups WHERE 0=0;
INSERT INTO SecRoleGroups SELECT (select (SeqNo+2) from SeqSecRoleGroups), (select (SeqNo+3) from SeqSecGroups), (select roleid from SecRoles where RoleCd='MSTGRP1_APPROVER'), 0,1000,'2017-05-24 07:26:48','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRoleGroups WHERE 0=0;
update SeqSecRoleGroups set SeqNo = (SeqNo+2) ;
INSERT INTO PTMenuDetails SELECT (select (SeqNo+1) from SeqPTMenuDetails),(SELECT AppID FROM PTApplicationDetails WHERE AppCode='PFS'),'EODConfig','menu_Item_EODConfig','/WEB-INF/pages/eod/EODConfig/EODConfigList.zul',0,10000,'2017-05-24 07:26:48','Approved',' ',' ',' ',' ',' ',0,'menuItem_eod_EODConfig' FROM SeqPTMenuDetails WHERE 0=0;
INSERT INTO PTMenuDetails SELECT (select (SeqNo+2) from SeqPTMenuDetails),(SELECT AppID FROM PTApplicationDetails WHERE AppCode='PFS'),'EODConfigEnquiry','menu_Item_EODConfigEnquiry?enqiryModule=Y" ','/WEB-INF/pages/eod/EODConfig/EODConfigEnquiryList.zul',0,10000,'2017-05-24 07:26:48','Approved',' ',' ',' ',' ',' ',0,'menuItem_eod_EODConfig' FROM SeqPTMenuDetails WHERE 0=0;
update SeqPTMenuDetails set SeqNo = (SeqNo+2) ;
update SeqSecGroups set SeqNo = (SeqNo+3) ;
update SeqSecRights set SeqNo = (SeqNo+10+4) ;
		
		UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM
			SECRIGHTS);
			UPDATE
			SEQSECGROUPRIGHTS SET SEQNO = (SELECT
			MAX(GRPRIGHTID) FROM
			SECGROUPRIGHTS);
			UPDATE SEQSECGROUPS SET
			SEQNO=(SELECT MAX(GRPID) FROM
			SECGROUPS);
			UPDATE SEQSECROLEGROUPS SET
			SEQNO=(SELECT MAX(ROLEGRPID)
			FROM SECROLEGROUPS);
			UPDATE
			SeqPTMenuDetails SET SEQNO= (SELECT
			MAX(menuId) FROM PTMenuDetails);
		
		</sql>
	</changeSet>
	<changeSet id="31" author="Surekha">
		<modifyDataType tableName="RMTTRANSACTIONENTRY" columnName="ACCOUNTTYPE" newDataType="VARCHAR(15)"/>
	</changeSet>
	<changeSet id="32" author="Surekha">
		<modifyDataType tableName="RMTTRANSACTIONENTRY_Temp" columnName="ACCOUNTTYPE" newDataType="VARCHAR(15)"/>
	</changeSet>
	<changeSet id="33" author="Madhubabu" dbms="oracle">	
   		<sql splitStatements="false">
     		 begin
              execute immediate 'CREATE SEQUENCE SeqFeePostings START WITH 1 INCREMENT BY 1 MAXVALUE 9223372036854775807 NOCYCLE';  
     		 end;  
     	 </sql>
 	</changeSet>
	<changeSet id="34" author="Surekha">
		<modifyDataType tableName="RMTFINANCETYPES" columnName="FINACTYPE" newDataType="VARCHAR(15)"/>
		<modifyDataType tableName="RMTFINANCETYPES" columnName="FINCONTINGENTACTYPE" newDataType="VARCHAR(15)"/>
		<modifyDataType tableName="RMTFINANCETYPES" columnName="FINBANKCONTINGENTACTYPE" newDataType="VARCHAR(15)"/>
		<modifyDataType tableName="RMTFINANCETYPES" columnName="FINPROVISIONACTYPE" newDataType="VARCHAR(15)"/>
		<modifyDataType tableName="RMTFINANCETYPES" columnName="FINSUSPACTYPE" newDataType="VARCHAR(15)"/>
	</changeSet>
	<changeSet id="35" author="Surekha">
		<modifyDataType tableName="RMTFINANCETYPES_Temp" columnName="FINACTYPE" newDataType="VARCHAR(15)"/>
		<modifyDataType tableName="RMTFINANCETYPES_Temp" columnName="FINCONTINGENTACTYPE" newDataType="VARCHAR(15)"/>
		<modifyDataType tableName="RMTFINANCETYPES_Temp" columnName="FINBANKCONTINGENTACTYPE" newDataType="VARCHAR(15)"/>
		<modifyDataType tableName="RMTFINANCETYPES_Temp" columnName="FINPROVISIONACTYPE" newDataType="VARCHAR(15)"/>
		<modifyDataType tableName="RMTFINANCETYPES_Temp" columnName="FINSUSPACTYPE" newDataType="VARCHAR(15)"/>
	</changeSet>
	<changeSet id="36" author="Surekha">
		<modifyDataType tableName="ACCOUNTS" columnName="ACTYPE" newDataType="VARCHAR(15)"/>
		<modifyDataType tableName="ACCOUNTS_Temp" columnName="ACTYPE" newDataType="VARCHAR(15)"/>
	</changeSet>
	<changeSet author="Siva" id="37">
		<addForeignKeyConstraint constraintName="FK_VPTC_VPC"
			baseTableName="vasproducttype" baseColumnNames="ProductCtg" referencedColumnNames="ProductCtg"
			referencedTableName="vasproductcategory" />
	</changeSet>
	<changeSet author="Siva" id="38">
		<addForeignKeyConstraint constraintName="FK_VSPT_VPT"
			baseTableName="vasstructure" baseColumnNames="ProductType" referencedColumnNames="ProductType"
			referencedTableName="vasproducttype" />
	</changeSet>
	<changeSet author="Siva" id="39">
		<addForeignKeyConstraint constraintName="FK_VSMID_VMID"
			baseTableName="vasstructure" baseColumnNames="ManufacturerID" referencedColumnNames="DealerID"
			referencedTableName="amtvehicledealer" />
	</changeSet>
	<changeSet id="40" author="Surekha">
		<modifyDataType tableName="RMTFINANCETYPES_Temp" columnName="PFTPAYACTYPE" newDataType="VARCHAR(15)"/>
		<modifyDataType tableName="RMTFINANCETYPES" columnName="PFTPAYACTYPE" newDataType="VARCHAR(15)"/>
	</changeSet>
	<changeSet author="Siva" id="41">
		<addForeignKeyConstraint constraintName="FK_VPTC_Temp_VPC"
			baseTableName="vasproducttype_Temp" baseColumnNames="ProductCtg" referencedColumnNames="ProductCtg"
			referencedTableName="vasproductcategory" />
	</changeSet>
	<changeSet author="Siva" id="42">
		<addForeignKeyConstraint constraintName="FK_VSPT_Temp_VPT"
			baseTableName="vasstructure_Temp" baseColumnNames="ProductType" referencedColumnNames="ProductType"
			referencedTableName="vasproducttype" />
	</changeSet>
	<changeSet author="Siva" id="43">
		<addForeignKeyConstraint constraintName="FK_VSMID_Temp_VMID"
			baseTableName="vasstructure_Temp" baseColumnNames="ManufacturerID" referencedColumnNames="DealerID"
			referencedTableName="amtvehicledealer" />
	</changeSet>
	<changeSet author="Siva" id="44">
		<addForeignKeyConstraint constraintName="FK_VRPC_Temp_VSPC"
			baseTableName="vasRecording_Temp" baseColumnNames="ProductCode" referencedColumnNames="ProductCode"
			referencedTableName="vasstructure" />
	</changeSet>
	<changeSet author="Siva" id="45">
		<addForeignKeyConstraint constraintName="FK_VRPC_VSPC"
			baseTableName="vasRecording" baseColumnNames="ProductCode" referencedColumnNames="ProductCode"
			referencedTableName="vasstructure" />
	</changeSet>
		<changeSet id="46" author="Surekha">
		 <dropNotNullConstraint columnDataType="VARCHAR2(8)" columnName="FINTYPE" tableName="ACCOUNTMAPPING"/>
		 <dropNotNullConstraint columnDataType="VARCHAR2(8)" columnName="FINTYPE" tableName="ACCOUNTMAPPING_Temp"/>
	</changeSet>
	
	<changeSet id="47" author="Durgaprasad G">
		<dropNotNullConstraint tableName="INT_DSBIMPS_REQUEST" columnName="RECEIVERMOBILENO" columnDataType="VARCHAR2(105)" />
		<dropNotNullConstraint tableName="INT_DSBIMPS_REQUEST" columnName="RECEIVEREMAILID" columnDataType="VARCHAR2(105)" />
		<dropNotNullConstraint tableName="INT_DSBIMPS_REQUEST" columnName="RECEVIERBANKSTATE" columnDataType="VARCHAR2(105)" />
		<dropNotNullConstraint tableName="INT_DSBIMPS_REQUEST" columnName="RECEVIERBANKCITY" columnDataType="VARCHAR2(35)" />
		<dropNotNullConstraint tableName="INT_DSBIMPS_REQUEST" columnName="REMARKS" columnDataType="VARCHAR2(10)" />
	</changeSet>
		<changeSet id="48" author="pruthvi">
		<sql>
	update reportlist set fieldlabels='listheader_VASProductCode.label,listheader_ScreenCode.label,listheader_WorkFlowType.label'
where code='VASWorkFlow'
</sql>
</changeSet>
	<changeSet id="49" author="pruthvi">
		<sql>
Insert into REPORTLIST  
values ('VehicleDealer','VehicleDealer',
'label_VehicleDealerSearch_DealerName.value,label_VehicleDealerSearch_Email.value,label_VehicleDealerSearch_DealerTelephone.value,listheader_DealerProvince.label,label_VehicleDealerSearch_DealerCity.value,label_VehicleDealerSearch_Active.value',
'dealerName,email,dealerTelephone,dealerProvince,dealerCity,active','String,String,String,String,String,String',' ',
'ReportList06','VAS Manufacturer','System Masters',1,1001,CURRENT_TIMESTAMP,'Approved',' ',' ',' ',' ',' ',0,0);
</sql>
</changeSet>
<changeSet id="50"  author="ahmad">
<sql>
INSERT INTO SecGroups SELECT (select (SeqNo+1) from SeqSecGroups), 'LOCALITY_VIEW', 'Allow to view Locality', 0,1000,'2017-05-22 09:32:37','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroups WHERE 0=0;
INSERT INTO SecGroups SELECT (select (SeqNo+2) from SeqSecGroups), 'LOCALITY_MAKER', 'WF Maker for Locality', 0,1000,'2017-05-22 09:32:37','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroups WHERE 0=0;
INSERT INTO SecGroups SELECT (select (SeqNo+3) from SeqSecGroups), 'LOCALITY_APPROVER', 'WF Approver for Locality', 0,1000,'2017-05-22 09:32:37','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroups WHERE 0=0;
INSERT INTO SecRights SELECT (select (SeqNo+1) from SeqSecRights),0,'menuCat_masters','MENU',0,1000,'2017-05-22  09:32:37','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
INSERT INTO SecRights SELECT (select (SeqNo+2) from SeqSecRights),0,'menuCat_mastersEnquiry','MENU',0,1000,'2017-05-22  09:32:37','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
INSERT INTO SecRights SELECT (select (SeqNo+3) from SeqSecRights),0,'menuItem_masters_Locality','MENU',0,1000,'2017-05-22 09:32:37','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
INSERT INTO SecRights SELECT (select (SeqNo+4) from SeqSecRights),0,'menuItem_masters_LocalityEnquiry','MENU',0,1000,'2017-05-22 09:32:37','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
INSERT INTO SecRights SELECT (select (SeqNo+5) from SeqSecRights),2,'button_LocalityList_PrintList','LocalityList',0,1000,'2017-05-22 09:32:37','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
INSERT INTO SecRights SELECT (select (SeqNo+6) from SeqSecRights),2,'button_LocalityList_NewLocality','LocalityList',0,1000,'2017-05-22 09:32:37','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
INSERT INTO SecRights SELECT (select (SeqNo+7) from SeqSecRights),2,'button_LocalityDialog_btnNew','LocalityDialog',0,1000,'2017-05-22 09:32:37','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
INSERT INTO SecRights SELECT (select (SeqNo+8) from SeqSecRights),2,'button_LocalityDialog_btnEdit','LocalityDialog',0,1000,'2017-05-22 09:32:37','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
INSERT INTO SecRights SELECT (select (SeqNo+9) from SeqSecRights),2,'button_LocalityDialog_btnDelete','LocalityDialog',0,1000,'2017-05-22 09:32:37','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
INSERT INTO SecRights SELECT (select (SeqNo+10) from SeqSecRights),2,'button_LocalityDialog_btnSave','LocalityDialog',0,1000,'2017-05-22 09:32:37','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
INSERT INTO SecRights SELECT (select (SeqNo+10+1) from SeqSecRights),3,'LocalityDialog_id','LocalityDialog',0,1000,'2017-05-22 09:32:37','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
INSERT INTO SecRights SELECT (select (SeqNo+10+2) from SeqSecRights),3,'LocalityDialog_name','LocalityDialog',0,1000,'2017-05-22 09:32:37','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
INSERT INTO SecRights SELECT (select (SeqNo+10+3) from SeqSecRights),3,'LocalityDialog_city','LocalityDialog',0,1000,'2017-05-22 09:32:37','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
INSERT INTO SecGroupRights SELECT (select (SeqNo+1) from SeqSecGroupRights), (select (SeqNo+1) from SeqSecGroups), (select max(RightID) from SecRights WHERE RightName='menuCat_mastersEnquiry'),1,0,10000,'2017-05-22 09:32:37','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
INSERT INTO SecGroupRights SELECT (select (SeqNo+2) from SeqSecGroupRights), (select (SeqNo+1) from SeqSecGroups), (select (SeqNo+4) from SeqSecRights),1,0,10000,'2017-05-22 09:32:37',' ',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
INSERT INTO SecGroupRights SELECT (select (SeqNo+16) from SeqSecGroupRights), (select (SeqNo+2) from SeqSecGroups), (select max(RightID) from SecRights WHERE RightName='menuCat_masters'),1,0,10000,'2017-05-22 09:32:37',' ',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
INSERT INTO SecGroupRights SELECT (select (SeqNo+17) from SeqSecGroupRights), (select (SeqNo+2) from SeqSecGroups), (select (SeqNo+3) from SeqSecRights),1,0,10000,'2017-05-22 09:32:37','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
INSERT INTO SecGroupRights SELECT (select (SeqNo+18) from SeqSecGroupRights), (select (SeqNo+2) from SeqSecGroups), (select (SeqNo+6) from SeqSecRights),1,0,10000,'2017-05-22 09:32:37','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
INSERT INTO SecGroupRights SELECT (select (SeqNo+19) from SeqSecGroupRights), (select (SeqNo+2) from SeqSecGroups), (select (SeqNo+9) from SeqSecRights),1,0,10000,'2017-05-22 09:32:37','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
INSERT INTO SecGroupRights SELECT (select (SeqNo+20) from SeqSecGroupRights), (select (SeqNo+2) from SeqSecGroups), (select (SeqNo+10) from SeqSecRights),1,0,10000,'2017-05-22 09:32:37','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
INSERT INTO SecGroupRights SELECT (select (SeqNo+20+1) from SeqSecGroupRights), (select (SeqNo+2) from SeqSecGroups), (select (SeqNo+10+1) from SeqSecRights),1,0,10000,'2017-05-22 09:32:37','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
INSERT INTO SecGroupRights SELECT (select (SeqNo+20+2) from SeqSecGroupRights), (select (SeqNo+2) from SeqSecGroups), (select (SeqNo+10+2) from SeqSecRights),1,0,10000,'2017-05-22 09:32:37','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
INSERT INTO SecGroupRights SELECT (select (SeqNo+20+3) from SeqSecGroupRights), (select (SeqNo+2) from SeqSecGroups), (select (SeqNo+10+3) from SeqSecRights),1,0,10000,'2017-05-22 09:32:37','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
INSERT INTO SecGroupRights SELECT (select (SeqNo+24+3) from SeqSecGroupRights), (select (SeqNo+3) from SeqSecGroups), (select max(RightID) from SecRights WHERE RightName='menuCat_masters'),1,0,10000,'2017-05-22 09:32:37','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
INSERT INTO SecGroupRights SELECT (select (SeqNo+25+3) from SeqSecGroupRights), (select (SeqNo+3) from SeqSecGroups), (select (SeqNo+3) from SeqSecRights),1,0,10000,'2017-05-22 09:32:37','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
INSERT INTO SecGroupRights SELECT (select (SeqNo+26+3) from SeqSecGroupRights), (select (SeqNo+3) from SeqSecGroups), (select (SeqNo+10) from SeqSecRights),1,0,10000,'2017-05-22 09:32:37','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
update SeqSecGroupRights set SeqNo = (SeqNo+26+3) ;
INSERT INTO SecRoleGroups SELECT (select (SeqNo+1) from SeqSecRoleGroups), (select (SeqNo+2) from SeqSecGroups), (select roleid from SecRoles where RoleCd='MSTGRP1_MAKER'), 0,1000,'2017-05-22 09:32:37','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRoleGroups WHERE 0=0;
INSERT INTO SecRoleGroups SELECT (select (SeqNo+2) from SeqSecRoleGroups), (select (SeqNo+3) from SeqSecGroups), (select roleid from SecRoles where RoleCd='MSTGRP1_APPROVER'), 0,1000,'2017-05-22 09:32:37','Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRoleGroups WHERE 0=0;
update SeqSecRoleGroups set SeqNo = (SeqNo+2) ;
INSERT INTO PTMenuDetails SELECT (select (SeqNo+1) from SeqPTMenuDetails),(SELECT AppID FROM PTApplicationDetails WHERE AppCode='PFF'),'Locality','menu_Item_Locality','/WEB-INF/pages/masters/Locality/LocalityList.zul',0,10000,'2017-05-22 09:32:37','Approved',' ',' ',' ',' ',' ',0,'menuItem_masters_Locality' FROM SeqPTMenuDetails WHERE 0=0;
INSERT INTO PTMenuDetails SELECT (select (SeqNo+2) from SeqPTMenuDetails),(SELECT AppID FROM PTApplicationDetails WHERE AppCode='PFF'),'LocalityEnquiry','menu_Item_LocalityEnquiry?enqiryModule=Y" ','/WEB-INF/pages/masters/Locality/LocalityEnquiryList.zul',0,10000,'2017-05-22 09:32:37','Approved',' ',' ',' ',' ',' ',0,'menuItem_masters_Locality' FROM SeqPTMenuDetails WHERE 0=0;
update SeqPTMenuDetails set SeqNo = (SeqNo+2) ;
update SeqSecGroups set SeqNo = (SeqNo+3) ;
update SeqSecRights set SeqNo = (SeqNo+10+3) ;
</sql>
</changeSet>

<changeSet id="51" author="ahmad">
	<createTable tableName="Locality">
			<column name="id" type="bigint"/>
			<column name="name" type="varchar2(8)"/>
			<column name="city" type="varchar2(20)" />
			<column name="Version" type="NUMBER(10,0)" />
			<column name="Lastmntby" type="NUMBER(19,0)" />
			<column name="Lastmnton" type="datetime" />
			<column name="Recordstatus" type="nvarchar(50)" />
			<column name="Rolecode" type="nvarchar(50)" />
			<column name="Nextrolecode" type="nvarchar(200)" />
			<column name="Taskid" type="nvarchar(50)" />
			<column name="Nexttaskid" type="nvarchar(200)" />
			<column name="Recordtype" type="nvarchar(50)" />
			<column name="Workflowid" type="NUMBER(19,0)" />
	</createTable>
</changeSet>
<changeSet id="52" author="ahmad">
	<createTable tableName="Locality_Temp">
			<column name="id" type="bigint"/>
			<column name="name" type="varchar2(8)"/>
			<column name="city" type="varchar2(20)" />
			<column name="Version" type="NUMBER(10,0)" />
			<column name="Lastmntby" type="NUMBER(19,0)" />
			<column name="Lastmnton" type="datetime" />
			<column name="Recordstatus" type="nvarchar(50)" />
			<column name="Rolecode" type="nvarchar(50)" />
			<column name="Nextrolecode" type="nvarchar(200)" />
			<column name="Taskid" type="nvarchar(50)" />
			<column name="Nexttaskid" type="nvarchar(200)" />
			<column name="Recordtype" type="nvarchar(50)" />
			<column name="Workflowid" type="NUMBER(19,0)" />
	</createTable>
</changeSet>
<changeSet id="53" author="ahmad">
<createView viewName="Locality_View" replaceIfExists="true">

SELECT		T1.id, T1.name, T1.city		
			, T1.Version , T1.LastMntBy, T1.LastMntOn,T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId
FROM    	Locality_Temp  T1 
UNION ALL

SELECT		T1.id, T1.name, T1.city		
			, T1.Version , T1.LastMntBy, T1.LastMntOn,T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId
FROM    	Locality  T1 
WHERE     NOT EXISTS (SELECT 1 FROM Locality_TEMP WHERE id = T1.id)
	</createView>
</changeSet>
<changeSet id="54" author="ahmad"> 
<createView viewName="Locality_AView" replaceIfExists="true">

SELECT		T1.id, T1.name, T1.city		
			, T1.Version , T1.LastMntBy, T1.LastMntOn,T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId
FROM    	Locality  T1 
	</createView>
</changeSet>
<changeSet id="55" author="jayant">
    <sql>
        INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='AGREEMENTDEFINITION_APPROVER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_AgreementDefinitionDialog_btnSave'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0); 
    </sql>
</changeSet>
<changeSet id="56" author="jayant">
    <sql>
        UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);  
    </sql>
</changeSet>
</databaseChangeLog>