<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

	<property name="add.schema" value="dbo." dbms="mssql" />
	<property name="add.schema" value="" dbms="oracle" />
	<property name="add.schema" value="" dbms="postgresql" />
	<property name="call.substr" value="substring" dbms="mssql" />
	<property name="call.substr" value="substr" dbms="oracle" />
	<property name="call.substr" value="substring" dbms="postgresql" />
	<property name="call.auditdb" value="PLFAVANSEQC.." dbms="mssql" />
	<property name="call.auditdb" value=" " dbms="oracle" />
	<property name="call.concatenate" value="+" dbms="mssql" />
	<property name="call.concatenate" value="||" dbms="oracle" />
	<property name="call.concatenate" value="||" dbms="postgresql" />
	<property name="call.collength" value="LEN" dbms="mssql" />
	<property name="call.collength" value="LENGTH" dbms="oracle" />
	<property name="call.collength" value="LENGTH" dbms="postgresql" />
	<property name="call.date" value="getdate()" dbms="mssql" />
	<property name="call.date" value="sysdate" dbms="oracle" />
	<property name="call.date" value="now()" dbms="postgresql" />

	<changeSet id="pre_run_for_pgp" author="Sravani" runAlways="true" dbms="postgresql">
		<sql>
			Set search_path = plf,public,pg_catalog;
		</sql>
	</changeSet>

	<changeSet id="TK#2658.1.0" author="Sravani">
		<createSequence sequenceName="SeqExcess_Transfer_Details" incrementBy="1" startValue="1" minValue="1"
			maxValue="999999999999999999" />
	</changeSet>

	<changeSet id="TK#2658.2.0" author="Sravani">
		<comment>New Temp Table for ExcessTransfer</comment>
		<createTable tableName="Excess_Transfer_Details_Temp">
			<column name="Id" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="FinId" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="FinReference" type="varchar(20)">
				<constraints nullable="false" />
			</column>
			<column name="TransferDate" type="datetime" />
			<column name="TransferToType" type="varchar(8)" />
			<column name="TransferToId" type="bigint" />
			<column name="TransferFromType" type="varchar(8)" />
			<column name="TransferFromId" type="bigint" />
			<column name="LinkedTranId" type="bigint" />
			<column name="Status" type="varchar(50)" />
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="CreatedBy" type="bigint" />
			<column name="CreatedOn" type="datetime" />
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="ApprovedBy" type="bigint" />
			<column name="ApprovedOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkFlowId" type="bigint">
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>

	<changeSet id="TK#2658.3.0" author="Sravani">
		<addPrimaryKey tableName="Excess_Transfer_Details_Temp" columnNames="Id"
			constraintName="pk_Excess_Transfer_Details_T" />
	</changeSet>

	<changeSet id="TK#2658.4.0" author="Sravani">
		<comment>New Temp Table for ExcessTransfer</comment>
		<createTable tableName="Excess_Transfer_Details">
			<column name="Id" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="FinId" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="FinReference" type="varchar(20)">
				<constraints nullable="false" />
			</column>
			<column name="TransferDate" type="datetime" />
			<column name="TransferToType" type="varchar(8)" />
			<column name="TransferToId" type="bigint" />
			<column name="TransferFromType" type="varchar(8)" />
			<column name="TransferFromId" type="bigint" />
			<column name="LinkedTranId" type="bigint" />
			<column name="Status" type="varchar(50)" />
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="CreatedBy" type="bigint" />
			<column name="CreatedOn" type="datetime" />
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="ApprovedBy" type="bigint" />
			<column name="ApprovedOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkFlowId" type="bigint">
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>

	<changeSet id="TK#2658.5.0" author="Sravani">
		<addPrimaryKey tableName="Excess_Transfer_Details" columnNames="Id"
			constraintName="pk_Excess_Transfer_Details" />
	</changeSet>

	<changeSet id="TK#2658.6.0" author="Sravani">
		<addForeignKeyConstraint constraintName="fk_ETD_FinID" referencedTableName="FinanceMain"
			baseColumnNames="FinID" baseTableName="Excess_Transfer_Details" referencedColumnNames="FinID" />
	</changeSet>


	<changeSet id="TK#2658.7.0" author="Sravani">
		<addColumn tableName="Excess_Transfer_Details_Temp">
			<column name="TransferAmount" type="decimal(18,0)" />
		</addColumn>
	</changeSet>

	<changeSet id="TK#2658.8.0" author="Sravani" dbms="mssql">
		<sql>
        <![CDATA[
            ALTER TABLE EXCESS_TRANSFER_DETAILS_TEMP Add CONSTRAINT DF_FETDT_TRANSFERAMOUNT default 0 for TransferAmount;
         ]]>
		</sql>
	</changeSet>


	<changeSet id="TK#2658.8.0" author="Sravani" dbms="postgresql, oracle">
		<addDefaultValue tableName="Excess_Transfer_Details_Temp" columnName="TransferAmount" defaultValue="0" />
	</changeSet>

	<changeSet id="TK#2658.9.0" author="Sravani">
		<addColumn tableName="Excess_Transfer_Details">
			<column name="TransferAmount" type="decimal(18,0)" />
		</addColumn>
	</changeSet>

	<changeSet id="TK#2658.10.0" author="Sravani" dbms="mssql">
		<sql>
        <![CDATA[
            ALTER TABLE EXCESS_TRANSFER_DETAILS Add CONSTRAINT DF_FETD_TRANSFERAMOUNT default 0 for TransferAmount;
         ]]>
		</sql>
	</changeSet>

	<changeSet id="TK#2658.10.0" author="Sravani" dbms="postgresql, oracle">
		<addDefaultValue tableName="Excess_Transfer_Details" columnName="TransferAmount" defaultValue="0" />
	</changeSet>

	<changeSet id="TK#2658.11.0_pre" author="Sravani" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'excess_transfer_details_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="TK#2658.11.0.1" author="Sravani">
		<createView viewName="EXCESS_TRANSFER_DETAILS_VIEW" replaceIfExists="true">
			<![CDATA[
			SELECT T1.ID
					, T1.FINID
					, T1.FINREFERENCE
				    , T1.TRANSFERDATE
					, T1.TRANSFERTOTYPE
				    , T1.TRANSFERTOID
				    , T1.TRANSFERFROMTYPE
				    , T1.TRANSFERFROMID
				    , T1.LINKEDTRANID
				    , T1.STATUS
            		, CUST.CUSTCIF
				    , T1.VERSION
				    , T1.CREATEDBY
				    , T1.CREATEDON
				    , T1.LASTMNTBY
				    , T1.LASTMNTON
				    , T1.APPROVEDBY
				    , T1.APPROVEDON
				    , T1.RECORDSTATUS
				    , T1.ROLECODE
				    , T1.NEXTROLECODE
				    , T1.TASKID
				    , T1.NEXTTASKID
				    , T1.RECORDTYPE
				    , T1.WORKFLOWID
				    ,T1.TRANSFERAMOUNT
				FROM EXCESS_TRANSFER_DETAILS_TEMP T1
        		INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
        		INNER JOIN CUSTOMERS CUST ON CUST.CUSTID = FM.CUSTID
				UNION ALL
	 			SELECT T1.ID
	 				, T1.FINID
					, T1.FINREFERENCE
				    , T1.TRANSFERDATE
					, T1.TRANSFERTOTYPE
				    , T1.TRANSFERTOID
				    , T1.TRANSFERFROMTYPE
				    , T1.TRANSFERFROMID
				    , T1.LINKEDTRANID
				    , T1.STATUS
		            , CUST.CUSTCIF
				    , T1.VERSION
				    , T1.CREATEDBY
				    , T1.CREATEDON
				    , T1.LASTMNTBY
				    , T1.LASTMNTON
				    , T1.APPROVEDBY
				    , T1.APPROVEDON
				    , T1.RECORDSTATUS
				    , T1.ROLECODE
				    , T1.NEXTROLECODE
				    , T1.TASKID
				    , T1.NEXTTASKID
				    , T1.RECORDTYPE
				    , T1.WORKFLOWID
				    ,T1.TRANSFERAMOUNT
				FROM EXCESS_TRANSFER_DETAILS T1
        		INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
        		INNER JOIN CUSTOMERS CUST ON CUST.CUSTID = FM.CUSTID
				WHERE NOT EXISTS (SELECT 1 FROM EXCESS_TRANSFER_DETAILS_TEMP WHERE ID = T1.ID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="TK#2658.11.0_post" author="Sravani" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'excess_transfer_details_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="TK#2658.12.0_pre" author="Sravani" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'excess_transfer_details_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="TK#2658.12.0.1" author="Sravani">
		<createView viewName="EXCESS_TRANSFER_DETAILS_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ID
					, T1.FINID
					, T1.FINREFERENCE
				    , T1.TRANSFERDATE
					, T1.TRANSFERTOTYPE
				    , T1.TRANSFERTOID
				    , T1.TRANSFERFROMTYPE
				    , T1.TRANSFERFROMID
				    , T1.LINKEDTRANID
				    , T1.STATUS
				    , T1.VERSION
				    , T1.CREATEDBY
				    , T1.CREATEDON
				    , T1.LASTMNTBY
				    , T1.LASTMNTON
				    , T1.APPROVEDBY
				    , T1.APPROVEDON
				    , T1.RECORDSTATUS
				    , T1.ROLECODE
				    , T1.NEXTROLECODE
				    , T1.TASKID
				    , T1.NEXTTASKID
				    , T1.RECORDTYPE
				    , T1.WORKFLOWID
				    ,T1.TRANSFERAMOUNT
				FROM EXCESS_TRANSFER_DETAILS T1
			]]>
		</createView>
	</changeSet>

	<changeSet id="TK#2658.12.0_post" author="Sravani" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'excess_transfer_details_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="TK#2658.13.0_pre" author="Sravani" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'excess_transfer_details_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="TK#2658.13.0.1" author="Sravani">
		<createView viewName="EXCESS_TRANSFER_DETAILS_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ID
					, T1.FINID
					, T1.FINREFERENCE
				    , T1.TRANSFERDATE
					, T1.TRANSFERTOTYPE
				    , T1.TRANSFERTOID
				    , T1.TRANSFERFROMTYPE
				    , T1.TRANSFERFROMID
				    , T1.LINKEDTRANID
				    , T1.STATUS
				    , T1.VERSION
				    , T1.CREATEDBY
				    , T1.CREATEDON
				    , T1.LASTMNTBY
				    , T1.LASTMNTON
				    , T1.APPROVEDBY
				    , T1.APPROVEDON
				    , T1.RECORDSTATUS
				    , T1.ROLECODE
				    , T1.NEXTROLECODE
				    , T1.TASKID
				    , T1.NEXTTASKID
				    , T1.RECORDTYPE
				    , T1.WORKFLOWID
				    , T1.TRANSFERAMOUNT
				FROM EXCESS_TRANSFER_DETAILS_TEMP T1
			]]>
		</createView>
	</changeSet>

	<changeSet id="TK#2658.13.0_post" author="Sravani" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'excess_transfer_details_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="TK#2658.14.0" author="Sravani">
		<comment>RIGHTS for Excess Transfer</comment>
		<sql>
			<![CDATA[
				DELETE FROM SECROLEGROUPS WHERE ROLEID = (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'EXCESS_TRANSFER_MAKER');
				DELETE FROM SECROLEGROUPS WHERE ROLEID = (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'EXCESS_TRANSFER_APPROVER');
				
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'EXCESS_TRANSFER_MAKER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'EXCESS_TRANSFER_APPROVER');
					
				DELETE FROM SECROLES WHERE ROLECD = 'EXCESS_TRANSFER_MAKER';
				DELETE FROM SECROLES WHERE ROLECD = 'EXCESS_TRANSFER_APPROVER';
				
				DELETE FROM SECGROUPS WHERE GRPCODE = 'EXCESS_TRANSFER_MAKER';
				DELETE FROM SECGROUPS WHERE GRPCODE = 'EXCESS_TRANSFER_APPROVER';
					
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = ( SELECT RIGHTID FROM SECRIGHTS WHERE RightName = 'menuItem_ExcessTransferMaster_ExcessTransfer');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = ( SELECT RIGHTID FROM SECRIGHTS WHERE RightName = 'button_ExcessTransferDialog_btnNew');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = ( SELECT RIGHTID FROM SECRIGHTS WHERE RightName = 'button_ExcessTransferList_NewExcessTransfer');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = ( SELECT RIGHTID FROM SECRIGHTS WHERE RightName = 'button_ExcessTransferList_ExcessTransferSearchDialog');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = ( SELECT RIGHTID FROM SECRIGHTS WHERE RightName = 'button_ExcessTransferDialog_btnEdit');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = ( SELECT RIGHTID FROM SECRIGHTS WHERE RightName = 'button_ExcessTransferDialog_btnSave');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = ( SELECT RIGHTID FROM SECRIGHTS WHERE RightName = 'button_ExcessTransferDialog_btnDelete');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = ( SELECT RIGHTID FROM SECRIGHTS WHERE RightName = 'ExcessTransferDialog_TransferDate');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = ( SELECT RIGHTID FROM SECRIGHTS WHERE RightName = 'ExcessTransferDialog_ExcessReference');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = ( SELECT RIGHTID FROM SECRIGHTS WHERE RightName = 'ExcessTransferDialog_TransferFrom');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = ( SELECT RIGHTID FROM SECRIGHTS WHERE RightName = 'ExcessTransferDialog_FinReference');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = ( SELECT RIGHTID FROM SECRIGHTS WHERE RightName = 'ExcessTransferDialog_TransferAmount');
				
				DELETE FROM SECRIGHTS WHERE RightName = 'menuItem_ExcessTransferMaster_ExcessTransfer';
				DELETE FROM SECRIGHTS WHERE RightName = 'button_ExcessTransferDialog_btnNew';
				DELETE FROM SECRIGHTS WHERE RightName = 'button_ExcessTransferList_NewExcessTransfer';
				DELETE FROM SECRIGHTS WHERE RightName = 'button_ExcessTransferList_ExcessTransferSearchDialog';
				DELETE FROM SECRIGHTS WHERE RightName = 'button_ExcessTransferDialog_btnEdit';
				DELETE FROM SECRIGHTS WHERE RightName = 'button_ExcessTransferDialog_btnSave';
				DELETE FROM SECRIGHTS WHERE RightName = 'button_ExcessTransferDialog_btnDelete';
				DELETE FROM SECRIGHTS WHERE RightName = 'ExcessTransferDialog_TransferDate';
				DELETE FROM SECRIGHTS WHERE RightName = 'ExcessTransferDialog_ExcessReference';
				DELETE FROM SECRIGHTS WHERE RightName = 'ExcessTransferDialog_TransferFrom';
				DELETE FROM SECRIGHTS WHERE RightName = 'ExcessTransferDialog_FinReference';
				DELETE FROM SECRIGHTS WHERE RightName = 'ExcessTransferDialog_TransferAmount';
				 
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menuItem_ExcessTransferMaster_ExcessTransfer', 'MENU', 0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2, 'button_ExcessTransferDialog_btnNew','ExcessTransferDialog', 0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2, 'button_ExcessTransferList_NewExcessTransfer','ExcessTransferList', 0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2, 'button_ExcessTransferList_ExcessTransferSearchDialog','ExcessTransferList', 0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2, 'button_ExcessTransferDialog_btnEdit','ExcessTransferDialog', 0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2, 'button_ExcessTransferDialog_btnSave','ExcessTransferDialog', 0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2, 'button_ExcessTransferDialog_btnDelete','ExcessTransferDialog', 0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'ExcessTransferDialog_TransferDate','ExcessTransferDialog', 0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'ExcessTransferDialog_ExcessReference','ExcessTransferDialog', 0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'ExcessTransferDialog_TransferFrom','ExcessTransferDialog', 0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'ExcessTransferDialog_FinReference','ExcessTransferDialog', 0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'ExcessTransferDialog_TransferAmount','ExcessTransferDialog', 0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				
				INSERT INTO SECGROUPS (GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'EXCESS_TRANSFER_MAKER', 'EXCESS TRANSFER MAKER',  1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPS (GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'EXCESS_TRANSFER_APPROVER', 'EXCESS TRANSFER APPROVER',  1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'EXCESS_TRANSFER_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menuItem_ExcessTransferMaster_ExcessTransfer'), 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'EXCESS_TRANSFER_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_ExcessTransferDialog_btnNew'), 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'EXCESS_TRANSFER_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_ExcessTransferList_NewExcessTransfer'), 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'EXCESS_TRANSFER_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_ExcessTransferList_ExcessTransferSearchDialog'), 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'EXCESS_TRANSFER_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_ExcessTransferDialog_btnEdit'), 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'EXCESS_TRANSFER_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_ExcessTransferDialog_btnSave'), 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'EXCESS_TRANSFER_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_ExcessTransferDialog_btnDelete'), 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'EXCESS_TRANSFER_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'ExcessTransferDialog_TransferDate'), 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'EXCESS_TRANSFER_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'ExcessTransferDialog_ExcessReference'), 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'EXCESS_TRANSFER_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'ExcessTransferDialog_TransferFrom'), 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'EXCESS_TRANSFER_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'ExcessTransferDialog_FinReference'), 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'EXCESS_TRANSFER_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'ExcessTransferDialog_TransferAmount'), 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'EXCESS_TRANSFER_APPROVER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menuItem_ExcessTransferMaster_ExcessTransfer'), 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'EXCESS_TRANSFER_APPROVER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_ExcessTransferDialog_btnSave'), 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'EXCESS_TRANSFER_MAKER', 'Maker role for Excess Transfer', '', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0); 
		  		INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'EXCESS_TRANSFER_APPROVER', 'Approver role for Excess Transfer',	'', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		    
		    	INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'EXCESS_TRANSFER_MAKER'),    (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'EXCESS_TRANSFER_MAKER'),    0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		    	INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'EXCESS_TRANSFER_APPROVER'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'EXCESS_TRANSFER_APPROVER'), 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		    	
		   		INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'EXCESS_TRANSFER_MAKER'),    (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'MSTGRP1_MAKER'), 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		    	INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'EXCESS_TRANSFER_APPROVER'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'MSTGRP1_APPROVER'), 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="TK#2658.15.0" author="Sravani">
		<sql>
			<![CDATA[
			DELETE FROM ERRORDETAILS WHERE CODE = 'PFA';
            INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION) VALUES('PFA', 'EN', 'E', '{0}',NULL,'Approved', NULL, NULL, NULL, NULL, NULL, 0, CURRENT_TIMESTAMP, 1000, 0);
			
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="TK#2658.16.0" author="Sravani">
		<createTable tableName="EXCESS_TRANSFER_DETAILS_UPLOAD">
			<column name="Id" type="bigint" autoIncrement="true">
				<constraints nullable="false" />
			</column>
			<column name="HeaderId" type="bigint" />
			<column name="FinID" type="bigint" />
			<column name="FinReference" type="varchar(20)" />
			<column name="TransferFromType" type="varchar(8)" />
			<column name="TransferFromId" type="bigint" />
			<column name="TransferToType" type="varchar(8)" />
			<column name="TransferToId" type="bigint" />
			<column name="TransferAmount" type="decimal(18,0)" />
			<column name="Status" type="char(1)" />
			<column name="Progress" type="int" />
			<column name="ErrorCode" type="varchar(20)" />
			<column name="ErrorDesc" type="varchar(2000)" />
		</createTable>
	</changeSet>

	<changeSet id="TK#2658.17.0" author="Sravani">
		<addPrimaryKey tableName="EXCESS_TRANSFER_DETAILS_UPLOAD" columnNames="Id" />
	</changeSet>

	<changeSet id="TK#2658.18.01" author="Sravani">
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='EXCESS_TRANSFER_UPLOAD');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='EXCESS_TRANSFER_UPLOAD');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='EXCESS_TRANSFER_UPLOAD';
 				
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'EXCESS_TRANSFER_UPLOAD'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'EXCESS_TRANSFER_UPLOAD');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'EXCESS_TRANSFER_UPLOAD';

				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'EXCESS_TRANSFER_UPLOAD', 'Excess Transfer UPLOAD File.', 12, 'EXCESSTRANSFER', null, null, ',', 1, 1, null, null, null, 'C', '/opt/pff/hdfc/excesstransfer/UPLOAD', 'ExcessTransfer_', '.xls', 0, CURRENT_TIMESTAMP, '${ddmm},.${SEQ_DATE_FILE}', null, '0', NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'EXCESS_TRANSFER_UPLOAD'), 'EXCESS_TRANSFER_DETAILS_UPLOAD', 1, 'ID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 6, 0, 0);
								
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'EXCESS_TRANSFER_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'EXCESS_TRANSFER_UPLOAD')), 'HEADERID',     		0, 'N', NULL, NULL, '${HEADER_ID}', NULL, '0',  NULL, NULL, NULL, NULL, 'M');								
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'EXCESS_TRANSFER_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'EXCESS_TRANSFER_UPLOAD')), 'FINREFERENCE',       0, 'N', NULL, NULL, NULL, 			NULL, '0',  NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'EXCESS_TRANSFER_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'EXCESS_TRANSFER_UPLOAD')), 'TRANSFERFROMTYPE',   0, 'N', NULL, NULL, NULL, 			NULL, '1',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'EXCESS_TRANSFER_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'EXCESS_TRANSFER_UPLOAD')), 'TRANSFERFROMID',     0, 'N', NULL, NULL, NULL, 			NULL, '2',  NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'EXCESS_TRANSFER_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'EXCESS_TRANSFER_UPLOAD')), 'TRANSFERTOTYPE',    	0, 'N', NULL, NULL, NULL, 			NULL, '3',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'EXCESS_TRANSFER_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'EXCESS_TRANSFER_UPLOAD')), 'TRANSFERTOID',       0, 'N', NULL, NULL, NULL, 			NULL, '4',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'EXCESS_TRANSFER_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'EXCESS_TRANSFER_UPLOAD')), 'TRANSFERAMOUNT',    	0, 'N', NULL, NULL, NULL, 			NULL, '5',  NULL, NULL, NULL, NULL, 'O');
 			]]>
		</sql>
	</changeSet>

	<changeSet id="TK#2658.19.01" author="Sravani">
		<sql>
			<![CDATA[
			    DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='EXCESS_TRANSFER_TEMPLATE');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='EXCESS_TRANSFER_TEMPLATE');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='EXCESS_TRANSFER_TEMPLATE';
							
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'EXCESS_TRANSFER_TEMPLATE'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID IN (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'EXCESS_TRANSFER_TEMPLATE');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'EXCESS_TRANSFER_TEMPLATE';
							
				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'EXCESS_TRANSFER_TEMPLATE', 'Excess Transfer template download', 3, 'EXCESSTRANSFER', NULL, NULL, ',' , 0, 0, NULL, 'ROW:{FinReference, TransferFromType, TransferFromId, TransferToType, TransferToId, TransferAmount}', NULL, 'A', '/opt/pff/hdfc/excesstransfer/template', 'EXCESSTRANSFER_', '.xls', 0, current_timestamp, '${ddMMYYYYHms}', NULL, 0, NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'EXCESS_TRANSFER_TEMPLATE'), 'EXCESS_TRANSFER_DETAILS_UPLOAD',  0, 'ID', 'HEADERID = :HEADERID', NULL, NULL, NULL, NULL, NULL, NULL, 6, 0, 0);
				
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'EXCESS_TRANSFER_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'EXCESS_TRANSFER_TEMPLATE')), 'FINREFERENCE',      	0, 'N', NULL, NULL, NULL, NULL, '3',  NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'EXCESS_TRANSFER_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'EXCESS_TRANSFER_TEMPLATE')), 'TRANSFERFROMTYPE',     0, 'N', NULL, NULL, NULL, NULL, '4',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'EXCESS_TRANSFER_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'EXCESS_TRANSFER_TEMPLATE')), 'TRANSFERFROMID',    	0, 'N', NULL, NULL, NULL, NULL, '5',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'EXCESS_TRANSFER_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'EXCESS_TRANSFER_TEMPLATE')), 'TRANSFERTOTYPE',   	0, 'N', NULL, NULL, NULL, NULL, '6',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'EXCESS_TRANSFER_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'EXCESS_TRANSFER_TEMPLATE')), 'TRANSFERTOID',      	0, 'N', NULL, NULL, NULL, NULL, '7',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'EXCESS_TRANSFER_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'EXCESS_TRANSFER_TEMPLATE')), 'TRANSFERAMOUNT',       0, 'N', NULL, NULL, NULL, NULL, '8',  NULL, NULL, NULL, NULL, 'O');
				]]>
		</sql>
	</changeSet>

	<changeSet id="TK#2658.20.01" author="Sravani">
		<sql>
			<![CDATA[

                DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='EXCESS_TRANSFER_DOWNLOAD');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='EXCESS_TRANSFER_DOWNLOAD');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='EXCESS_TRANSFER_DOWNLOAD';
							
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'EXCESS_TRANSFER_DOWNLOAD'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID IN (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'EXCESS_TRANSFER_DOWNLOAD');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'EXCESS_TRANSFER_DOWNLOAD';
							
				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'EXCESS_TRANSFER_DOWNLOAD', 'Excess Transfer download', 3, 'EXCESSTRANSFER', NULL, NULL, ',' , 0, 0, NULL, 'ROW:{FinReference, TransferFromType, TransferFromId, TransferToType, TransferToId, TransferAmount, Status, Progress, ErrorCode, ErrorDesc}',  '', 'A', '/opt/pff/hdfc/excesstransfer/download', 'ExcessTransfer_', '.xls', 0, current_timestamp, '${ddMMYYYYHms}', NULL, 0, NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'EXCESS_TRANSFER_DOWNLOAD'), 'EXCESS_TRANSFER_DETAILS_UPLOAD',  0, 'ID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 10, 0, 0);
				
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'EXCESS_TRANSFER_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'EXCESS_TRANSFER_DOWNLOAD')), 'FINREFERENCE',      		0, 'N', NULL, NULL, NULL, NULL, '2',  NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'EXCESS_TRANSFER_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'EXCESS_TRANSFER_DOWNLOAD')), 'TRANSFERFROMTYPE',      		0, 'N', NULL, NULL, NULL, NULL, '3',  NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'EXCESS_TRANSFER_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'EXCESS_TRANSFER_DOWNLOAD')), 'TRANSFERFROMID',       			0, 'N', NULL, NULL, NULL, NULL, '4' , NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'EXCESS_TRANSFER_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'EXCESS_TRANSFER_DOWNLOAD')), 'TRANSFERTOTYPE',       			0, 'N', NULL, NULL, NULL, NULL, '5' , NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'EXCESS_TRANSFER_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'EXCESS_TRANSFER_DOWNLOAD')), 'TRANSFERTOID',       		0, 'N', NULL, NULL, NULL, NULL, '6',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'EXCESS_TRANSFER_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'EXCESS_TRANSFER_DOWNLOAD')), 'TRANSFERAMOUNT',    		0, 'N', NULL, NULL, NULL, NULL, '7',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'EXCESS_TRANSFER_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'EXCESS_TRANSFER_DOWNLOAD')), 'STATUS',	                0, 'N', NULL, NULL, NULL, NULL, '8', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'EXCESS_TRANSFER_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'EXCESS_TRANSFER_DOWNLOAD')), 'PROGRESS',      			0, 'N', NULL, NULL, NULL, NULL, '9',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'EXCESS_TRANSFER_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'EXCESS_TRANSFER_DOWNLOAD')), 'ERRORCODE',	            0, 'N', NULL, NULL, NULL, NULL, '10', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'EXCESS_TRANSFER_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'EXCESS_TRANSFER_DOWNLOAD')), 'ERRORDESC',	            0, 'N', NULL, NULL, NULL, NULL, '11', NULL, NULL, NULL, NULL, 'O');
			]]>
		</sql>
	</changeSet>

	<changeSet id="TK#2658.21.0" author="Sravani">
		<sql>
			<![CDATA[
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'EXCESS_TRANSFER_UPLOAD_MAKER');
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'EXCESS_TRANSFER_UPLOAD_APPROVER');

				DELETE FROM SECROLES WHERE ROLECD ='EXCESS_TRANSFER_UPLOAD_MAKER';
				DELETE FROM SECROLES WHERE ROLECD ='EXCESS_TRANSFER_UPLOAD_APPROVER';

				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'EXCESS_TRANSFER_UPLOAD_MAKER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'EXCESS_TRANSFER_UPLOAD_APPROVER');

				DELETE FROM SECGROUPS WHERE GRPCODE ='EXCESS_TRANSFER_UPLOAD_MAKER';
				DELETE FROM SECGROUPS WHERE GRPCODE ='EXCESS_TRANSFER_UPLOAD_APPROVER';

				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='menu_Item_ExcessTransferUpload_Maker';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='menu_Item_ExcessTransferUpload_Approver';

				INSERT INTO SECRIGHTS(RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_ExcessTransferUpload_Maker', 'MENU', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS(RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_ExcessTransferUpload_Approver', 'MENU', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'EXCESS_TRANSFER_UPLOAD_MAKER', 'WF Maker for ExcessTransfer Upload', 0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'EXCESS_TRANSFER_UPLOAD_APPROVER', 'WF Approver for ExcessTransfer Upload', 0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);

				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'EXCESS_TRANSFER_UPLOAD_MAKER'),    (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_ExcessTransferUpload_Maker'),    1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'EXCESS_TRANSFER_UPLOAD_APPROVER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_ExcessTransferUpload_Approver'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);

				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'EXCESS_TRANSFER_UPLOAD_MAKER', 'Maker role from ExcessTransfer Upload', '', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0); 
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'EXCESS_TRANSFER_UPLOAD_APPROVER', 'Approver role from ExcessTransfer Upload',	'', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);

				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'EXCESS_TRANSFER_UPLOAD_MAKER'),    (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'EXCESS_TRANSFER_UPLOAD_MAKER'),    0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'EXCESS_TRANSFER_UPLOAD_APPROVER'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'EXCESS_TRANSFER_UPLOAD_APPROVER'), 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>

</databaseChangeLog>