<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

	<property name="add.schema" value="dbo." dbms="mssql" />
	<property name="add.schema" value="" dbms="oracle" />
	<property name="add.schema" value="" dbms="postgresql" />
	<property name="call.substr" value="substring" dbms="mssql" />
	<property name="call.substr" value="substr" dbms="oracle" />
	<property name="call.substr" value="substring" dbms="postgresql" />
	<property name="call.auditdb" value="PLFAVANSEQC.." dbms="mssql" />
	<property name="call.auditdb" value=" " dbms="oracle" />
	<property name="call.concatenate" value="+" dbms="mssql" />
	<property name="call.concatenate" value="||" dbms="oracle" />
	<property name="call.concatenate" value="||" dbms="postgresql" />
	<property name="call.collength" value="LEN" dbms="mssql" />
	<property name="call.collength" value="LENGTH" dbms="oracle" />
	<property name="call.collength" value="LENGTH" dbms="postgresql" />
	<property name="call.date" value="getdate()" dbms="mssql" />
	<property name="call.date" value="sysdate" dbms="oracle" />
	<property name="call.date" value="now()" dbms="postgresql" />


	<changeSet id="pre_run_for_pgp" author="Adarsh" runAlways="true" dbms="postgresql">
		<sql>
			Set search_path = plf,public,pg_catalog;
		</sql>
	</changeSet>

	<changeSet id="1" author="murthy.y">
		<sql>
			<![CDATA[
				update SMTparameters set SysParmValue = 'GS'  where SysParmCode = 'LOAN_REF_PREFIX';
			]]>
		</sql>
	</changeSet>
	<changeSet id="2" author="saiteja.r">
		<sql>
			<![CDATA[
				update SMTparameters set SysParmValue = 'Y'  where SysParmCode = 'ALLOW_LOWER_TAX_DED_REQ';
			]]>
		</sql>
	</changeSet>

	<changeSet id="3" author="satyanarayana.g">
		<sql>
			<![CDATA[
				update SMTparameters set SysParmValue = '/opt/Growth_Source/PFF/external'  where SysParmCode = 'UPLOAD_FILEPATH';
			]]>
		</sql>
	</changeSet>


	<changeSet id="4.0" author="satyanarayana.g">
		<comment>Disbursement Download Request</comment>
		<sql>
			<![CDATA[
				Delete from DATA_ENGINE_COLUMN  where TABLEID IN (select ID from DATA_ENGINE_TABLE WHERE CONFIGID = (select ID from DATA_ENGINE_CONFIG where Name = 'DISB_EXPORT_DEFAULT'));
				Delete from DATA_ENGINE_TABLE where configid = (select id from DATA_ENGINE_CONFIG where name = 'DISB_EXPORT_DEFAULT');
				Delete from DATA_ENGINE_CONFIG where name = 'DISB_EXPORT_DEFAULT';
				
				Insert into DATA_ENGINE_CONFIG  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG),'DISB_EXPORT_DEFAULT','HDFC Bank Disbursements[NEFT/RTGS/CHEQUE/DD] Download.',2,null,null,null,',',0,0, null, null, null,'A','/opt/Creditsaison_8086/PFF/creditsaison/disbursement','${CLIENT_CODE}','.csv',0, '2019-03-28 13:01:02.390','${ddmm},.${SEQ_DATE_FILE}',null,'0','MOVE_TO_S3_BUCKET,COPY_TO_SFTP',1,1);
				Insert into DATA_ENGINE_TABLE values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE),(Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT'),'DISBURSEMENT_REQUESTS',0,'ID','ID IN (:ID)','UPDATE DISBURSEMENT_REQUESTS SET BATCH_ID = :FILEID, STATUS = ''AC'' WHERE ID IN (:ID)QUERY:UPDATE FINADVANCEPAYMENTS SET STATUS = ''AC'' WHERE PAYMENTID IN (SELECT DISBURSEMENT_ID FROM DISBURSEMENT_REQUESTS WHERE ID IN (:ID) AND STATUS = ''AC'')QUERY:UPDATE PAYMENTINSTRUCTIONS SET STATUS = ''AC'' WHERE PAYMENTINSTRUCTIONID IN (SELECT DISBURSEMENT_ID FROM DISBURSEMENT_REQUESTS WHERE ID IN (:ID) AND STATUS = ''AC'')',null,null,null,null,null,0,0,0);
				
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'DISBURSEMENT_TYPE',       0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')),  'CUSTCIF',                0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'BENFICIARY_ACCOUNT',      0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'DISBURSEMENT_AMOUNT',     0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'BENFICIARY_NAME',         0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'DRAWEE_LOCATION',         0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'PRINT_LOCATION',          0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'BENFICIARY_ADDRESS1',	  0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'BENFICIARY_ADDRESS2',	  0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'BENFICIARY_ADDRESS3',	  0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'BENFICIARY_ADDRESS4',	  0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'BENFICIARY_ADDRESS5',	  0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'FinReference',			  0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'ID',					  0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'PAYMENT_DETAIL1',         0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'PAYMENT_DETAIL2',         0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'PAYMENT_DETAIL3',         0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'PAYMENT_DETAIL4',         0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'PAYMENT_DETAIL5',         0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'PAYMENT_DETAIL6',         0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'PAYMENT_DETAIL7',         0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'CHEQUE_NUMBER',           0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'DISBURSEMENT_DATE',       0,'N',null,null,  '${SYS_DATE}',null,'0',null,null,null,'DATE:dd/MM/yyyy','O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'MICR_CODE',               0,'N',null,null,	null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'IFSC_CODE',               0,'N',null,null,	null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'BENFICIARY_BANK',         0,'N',null,null,	null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'BENFICIARY_BRANCH',       0,'N',null,null,	null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'BENFICIRY_EMAIL',         0,'N',null,null,	null,null,'0',null,null,null,null,'O');
				
				UPDATE SEQ_DATA_ENGINE_CONFIG SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_CONFIG);
				UPDATE SEQ_DATA_ENGINE_TABLE  SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_TABLE);
				UPDATE SEQ_DATA_ENGINE_COLUMN SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_COLUMN);
			 ]]>
		</sql>
	</changeSet>

	<changeSet id="5.0" author="satyanarayana.g">
		<comment>Disbursement Upload Response</comment>
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_COLUMN  where TABLEID IN (select ID from DATA_ENGINE_TABLE WHERE CONFIGID = (select ID from DATA_ENGINE_CONFIG where Name = 'DISB_HDFC_IMPORT'));
				DELETE FROM DATA_ENGINE_TABLE where configid = (select id from DATA_ENGINE_CONFIG where name = 'DISB_HDFC_IMPORT');
				DELETE FROM DATA_ENGINE_CONFIG where name = 'DISB_HDFC_IMPORT';
				
				Insert into DATA_ENGINE_CONFIG  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG),'DISB_HDFC_IMPORT','HDFC Disbursement Response File.',1,null,null,null,',',0,0, null, null, null,'C','/opt/Creditsaison_8086/PFF/creditsaison/disbursement','','',0, '2019-03-28 13:01:02.390','${ddmm},.${SEQ_DATE_FILE}',null,'0','',1,1);
				Insert into DATA_ENGINE_TABLE values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE),(Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT'),'DISBURSEMENT_REQUESTS',2,'ID',null,null,null,null,null,null,0,16,0,0);
				
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'RESP_BATCH_ID',               0,'N',NULL,NULL,'${FILE_ID}',NULL,'0',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'DISBURSEMENT_TYPE',           0,'N',NULL,NULL,   NULL,     NULL,'0',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'CUSTCIF',                     0,'N',NULL,NULL,   NULL,     NULL,'1',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'BENFICIARY_NAME',             0,'N',NULL,NULL,   NULL,     NULL,'2',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'DISBURSEMENT_AMOUNT',         0,'N',NULL,NULL,   NULL,     NULL,'3',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'CHEQUE_NUMBER',               0,'N',NULL,NULL,   NULL,     NULL,'4',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'DISBURSEMENT_DATE',           0,'N',NULL,NULL,   NULL,     NULL,'5',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'ID',                          0,'N',NULL,NULL,   NULL,     NULL,'6',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'PAYMENT_DETAIL1',             0,'N',NULL,NULL,   NULL,     NULL,'7',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'PAYMENT_DETAIL2',             0,'N',NULL,NULL,   NULL,     NULL,'8',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'BENFICIARY_ACCOUNT',          0,'N',NULL,NULL,   NULL,     NULL,'9',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'STATUS',                      0,'N',NULL,NULL,   NULL,     NULL,'11',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'REJECT_REASON',               0,'N',NULL,NULL,   NULL,     NULL,'12',NULL,NULL,NULL,NULL,'CHECK:E,R,P');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'IFSC_CODE',                   0,'N',NULL,NULL,   NULL,     NULL,'13',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'TRANSACTIONREF2',             1,'N',NULL,NULL,   NULL,     NULL,'15',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'TRANSACTIONREF1',             1,'N',NULL,NULL,   NULL,     NULL,'10',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'TRANSACTIONREF',              0,'N',NULL,NULL,   NULL,     NULL,'0',NULL,'if((TRANSACTIONREF ==  ''N'' )){Result =''$TRANSACTIONREF1'';  return;} else if((TRANSACTIONREF ==  ''R'' )){Result =''$TRANSACTIONREF2'';  return;}else {Result ='''';  return;}',NULL,NULL,'O');
				
				UPDATE SEQ_DATA_ENGINE_CONFIG SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_CONFIG);
				UPDATE SEQ_DATA_ENGINE_TABLE  SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_TABLE);
				UPDATE SEQ_DATA_ENGINE_COLUMN SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_COLUMN);
			 ]]>
		</sql>
	</changeSet>

	<changeSet id="6" author="satyanarayana.g">
		<sql>
			<![CDATA[
				update SMTparameters set SysParmValue = 'Y' where sysparmcode='HOLD_DISB_INST_POST'; 
			]]>
		</sql>
	</changeSet>

	<changeSet id="7" author="satyanarayana.g">
		<sql>
			<![CDATA[
				update SMTparameters set SysParmValue = 'Y' where sysparmcode='HOLD_DISB_INST_POST'; 
			]]>
		</sql>
	</changeSet>

	<changeSet id="9" author="vijaya.a">
		<sql>
			<![CDATA[
				Update SMTparameters set SysParmValue = 'Y' Where SYSPARMCODE='MANDATE_DOWNLOAD_STOP_CIF_VALIDATION';
			]]>
		</sql>
	</changeSet>

	<changeSet id="10" author="vijaya.a">
		<sql>
			<![CDATA[
				Delete from DATA_ENGINE_COLUMN  where TABLEID IN (select ID from DATA_ENGINE_TABLE WHERE CONFIGID = (select ID from DATA_ENGINE_CONFIG where Name = 'DISB_EXPORT_DEFAULT'));
				Delete from DATA_ENGINE_TABLE where configid = (select id from DATA_ENGINE_CONFIG where name = 'DISB_EXPORT_DEFAULT');
				Delete from DATA_ENGINE_CONFIG where name = 'DISB_EXPORT_DEFAULT';
				
				Insert into DATA_ENGINE_CONFIG  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG),'DISB_EXPORT_DEFAULT','Disbursements[NEFT/RTGS/CHEQUE/DD] Download.',2,null,null,null,',',0,0, null, null, null,'A','/opt/Growth_Source/PFF/GSF/disbursement','${CLIENT_CODE}','.csv',0,current_timestamp,'${ddmm},.${SEQ_DATE_FILE}',null,'0','MOVE_TO_S3_BUCKET,COPY_TO_SFTP',1,1);
				Insert into DATA_ENGINE_TABLE values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE),(Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT'),'DISBURSEMENT_REQUESTS',0,'ID','ID IN (:ID)','UPDATE DISBURSEMENT_REQUESTS SET BATCH_ID = :FILEID, STATUS = ''AC'' WHERE ID IN (:ID)QUERY:UPDATE FINADVANCEPAYMENTS SET STATUS = ''AC'' WHERE PAYMENTID IN (SELECT DISBURSEMENT_ID FROM DISBURSEMENT_REQUESTS WHERE ID IN (:ID) AND STATUS = ''AC'')QUERY:UPDATE PAYMENTINSTRUCTIONS SET STATUS = ''AC'' WHERE PAYMENTINSTRUCTIONID IN (SELECT DISBURSEMENT_ID FROM DISBURSEMENT_REQUESTS WHERE ID IN (:ID) AND STATUS = ''AC'')',null,null,null,null,null,0,0,0);
				
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'TXN_TYPE',                1,'N',null,'P',  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'DISBURSEMENT_TYPE',      0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'CORP_CODE',      1,'N',null,'GrowthSource',  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'CUSTCIF',     0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'PartnerBank_AccountNo',    0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'DISBURSEMENT_DATE',         0,'N',null,null,  null,null,'0',null,null,null,'DATE:yyyy-MM-dd','O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'TRANSACTION_CURRENCY',	  1,'N',null,'INR',  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'DISBURSEMENT_AMOUNT',	  0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'BENFICIARY_NAME',	  0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'BENFICIARY_CODE',	  1,'N',null,'',  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'BENFICIARY_ACCOUNT',	  0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'BENFICIARY_ACC_TYPE',  1,'N',null,'',  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'BENFICIARY_ADDRESS1',  0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'BENFICIARY_ADDRESS2',  0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'BENFICIARY_ADDRESS3',  0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'BENFICIRY_CITY',         0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'BENFICIRY_STATE',         0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'BENFICIARY_ADDRESS4',         0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'IFSC_CODE',         0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'BENFICIARY_BANK',         0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'MICR_CODE',           0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'CHEQUE_NUMBER',       0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'PAYMENT_DATE',         0,'N',null,null,	null,null,'0',null,null,null,'DATE:yyyy-MM-dd','O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'DRAWEE_LOCATION',      0,'N',null,null,	null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'PRINT_LOCATION',      0,'N',null,null,	null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'BENFICIRY_EMAIL',         0,'N',null,null,	null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'BENFICIRY_EMAIL1',       1,'N',null,'',	null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'BENFICIARY_MOBILE',       0,'N',null,null,	null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'CORP_BATCH_NUM',       1,'N',null,'',	null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'COMAPANY_CODE',       1,'N',null,'',	null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'PRODUCT_CODE',       1,'N',null,'',	null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'FINREFERENCE',       0,'N',null,null,	null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'ID',       0,'N',null,null,	null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'EXTRA3',       1,'N',null,'',	null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'EXTRA4',       1,'N',null,'',	null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'EXTRA5',       1,'N',null,'',	null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'DISBURSEMENT_TYPE',       0,'N',null,null,	null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'CORP_EMAIL_ADDRESS',       1,'N',null,'',	null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'TRANSMISSIONDATE',       1,'N',null,null,	'${SysDate}',null,'0',null,null,null,'DATE:yyyy-MM-dd','O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'USERID',       1,'N',null,null,	'${UserId}',null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'USERDEPARTMENT',       1,'N',null,null,	'${UserBranch}',null,'0',null,null,null,null,'O');
				
				
				UPDATE SEQ_DATA_ENGINE_CONFIG SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_CONFIG);
				UPDATE SEQ_DATA_ENGINE_TABLE  SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_TABLE);
				UPDATE SEQ_DATA_ENGINE_COLUMN SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_COLUMN);
			]]>
		</sql>
	</changeSet>

	<changeSet id="11" author="vijaya.a">
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='MANDATES_EXPORT');
				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY;
				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='MANDATES_EXPORT';
							
				DELETE FROM DATA_ENGINE_COLUMN where TABLEID IN (select ID from DATA_ENGINE_TABLE WHERE CONFIGID = (select ID from DATA_ENGINE_CONFIG where Name = 'MANDATES_EXPORT'));
				DELETE FROM DATA_ENGINE_TABLE where CONFIGID IN (select ID from DATA_ENGINE_CONFIG where Name = 'MANDATES_EXPORT');
				DELETE FROM DATA_ENGINE_CONFIG where Name = 'MANDATES_EXPORT';
							
				INSERT INTO DATA_ENGINE_CONFIG VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG),'MANDATES_EXPORT', 'Mandates export', 3, 'Mandates', NULL, NULL, ',' , 0, 0, NULL, 'ROW:{Date, Utility Code, UMRN No.,Sponsor Bank, Client Name,Applicant Name,Bank Account Holder Name,Bank Name, Branch Name,Bank Account Number, MICR/IFSC, Account type, Start Date, End Date, Amount (Rs.), No. of Installments, Frequency, Mandate ID, Finreference}',  '', 'A', '/opt/Growth_Source/PFF/GSF/mandates', 'MANDATE_', '.xls', 0, NULL, '${ddMMYYYYHms}', NULL, 0, NULL, 1, 1); 
				INSERT INTO DATA_ENGINE_TABLE  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT'), 'MANDATE_REQUESTS',  0, 'ID', 'PROCESS_ID = :PROCESS_ID', 'UPDATE MANDATE_REQUESTS SET BATCH_ID = :FILEID, STATUS = ''AC'' WHERE PROCESS_ID = :PROCESS_ID QUERY:UPDATE MANDATES SET STATUS =  ''AC'' WHERE MANDATEID IN (SELECT MANDATEID FROM MANDATE_REQUESTS WHERE PROCESS_ID = :PROCESS_ID AND STATUS =  ''AC'')', NULL, NULL, NULL, NULL, NULL, 0, 0, 0);
							
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'START_DATE',			0, 'N', NULL, NULL, NULL, NULL, 0, NULL, NULL, NULL, 'DATE:dd-MMM-yyyy', 'M');	
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'Utility Code',		    1, 'N', NULL, '', NULL, NULL, 0, NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'MANDATE_REG_NO',		0, 'N', NULL, NULL, NULL, NULL, 0, NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'SponsorBank',			1, 'N', NULL, 'Axis', NULL, NULL, 0, NULL, NULL, NULL,NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'CLIENT_NAME',	        1, 'N', NULL, 'GS', NULL, NULL, 0, NULL, NULL, NULL, NULL,'M');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'CUSTOMER_NAME',			0, 'N', NULL, NULL, NULL, NULL, 0, NULL, NULL, NULL, NULL,'M');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'ACCT_HOLDER_NAME',					0, 'N', NULL, NULL, NULL, NULL, 0, NULL, NULL, NULL, NULL,'M');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'BANK_NAME',				0, 'N', NULL, NULL, NULL, NULL, 0, NULL, NULL, NULL, NULL,'M');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'BANKBRANCHDESC',		0, 'N', NULL, NULL, NULL, NULL, 0, NULL, NULL, NULL, NULL,'M');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'ACCT_NUMBER',			0, 'N', NULL, NULL, NULL, NULL, 0, NULL, NULL, NULL, NULL,'M');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'MICR_CODE',			0, 'N', NULL, NULL, NULL, NULL, 0, NULL, NULL, NULL, NULL,'M');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'ACCT_TYPE',			0, 'N', NULL, NULL, NULL, NULL, 0, NULL, NULL, NULL, NULL,'M');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'START_DATE',		0, 'N', NULL, NULL, NULL, NULL, 0, NULL, NULL, NULL, 'DATE:dd-MMM-yyyy','M');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'END_DATE',				0, 'N', NULL, NULL, NULL, NULL, 0, NULL, NULL, NULL, 'DATE:dd-MMM-yyyy','M');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'DEBIT_AMOUNT',		0, 'N', NULL, NULL, NULL, NULL, 0, NULL, NULL, NULL, NULL,'M');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'NUMBER_OF_TERMS',			0, 'N', NULL, NULL, NULL, NULL, 0, NULL, NULL, NULL, NULL,'M');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'FREQUENCY',			0, 'N', NULL, NULL, NULL, NULL, 0, NULL, NULL, NULL, NULL,'M');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'MANDATEID',			0, 'N', NULL, NULL, NULL, NULL, 0, NULL, NULL, NULL, NULL,'M');		
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'FINREFERENCE',			0, 'N', NULL, NULL, NULL, NULL, 0, NULL, NULL, NULL, NULL,'M');		
							
				UPDATE SEQ_DATA_ENGINE_CONFIG SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_CONFIG);
				UPDATE SEQ_DATA_ENGINE_TABLE  SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_TABLE);
				UPDATE SEQ_DATA_ENGINE_COLUMN SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_COLUMN);
			
			]]>
		</sql>
	</changeSet>

	<changeSet id="12" author="vijaya.a">
		<sql>
			<![CDATA[
				Delete from DATA_ENGINE_COLUMN  where TABLEID IN (select ID from DATA_ENGINE_TABLE WHERE CONFIGID = (select ID from DATA_ENGINE_CONFIG where Name = 'DISB_EXPORT_DEFAULT'));
				Delete from DATA_ENGINE_TABLE where configid = (select id from DATA_ENGINE_CONFIG where name = 'DISB_EXPORT_DEFAULT');
				Delete from DATA_ENGINE_CONFIG where name = 'DISB_EXPORT_DEFAULT';
				
				Insert into DATA_ENGINE_CONFIG  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG),'DISB_EXPORT_DEFAULT','Disbursements[NEFT/RTGS/CHEQUE/DD] Download.',2,null,null,null,',',0,0, null, null, null,'A','/opt/Growth_Source/PFF/GSF/disbursement','${CLIENT_CODE}','.csv',0,current_timestamp,'${ddmm},.${SEQ_DATE_FILE}',null,'0','MOVE_TO_S3_BUCKET,COPY_TO_SFTP',1,1);
				Insert into DATA_ENGINE_TABLE values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE),(Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT'),'DISBURSEMENT_REQUESTS',0,'ID','ID IN (:ID)','UPDATE DISBURSEMENT_REQUESTS SET BATCH_ID = :FILEID, STATUS = ''AC'' WHERE ID IN (:ID)QUERY:UPDATE FINADVANCEPAYMENTS SET STATUS = ''AC'' WHERE PAYMENTID IN (SELECT DISBURSEMENT_ID FROM DISBURSEMENT_REQUESTS WHERE ID IN (:ID) AND STATUS = ''AC'')QUERY:UPDATE PAYMENTINSTRUCTIONS SET STATUS = ''AC'' WHERE PAYMENTINSTRUCTIONID IN (SELECT DISBURSEMENT_ID FROM DISBURSEMENT_REQUESTS WHERE ID IN (:ID) AND STATUS = ''AC'')',null,null,null,null,null,0,0,0);
				
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'TXN_TYPE',                1,'N',null,'P',  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'DISBURSEMENT_TYPE',      0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'CORP_CODE',      1,'N',null,'GrowthSource',  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'CUSTCIF',     0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'PARTNERBANK_ACCOUNT',    0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'DISBURSEMENT_DATE',         0,'N',null,null,  null,null,'0',null,null,null,'DATE:yyyy-MM-dd','O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'TRANSACTION_CURRENCY',	  1,'N',null,'INR',  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'DISBURSEMENT_AMOUNT',	  0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'BENFICIARY_NAME',	  0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'BENFICIARY_CODE',	  1,'N',null,'',  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'BENFICIARY_ACCOUNT',	  0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'BENFICIARY_ACC_TYPE',  1,'N',null,'',  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'BENFICIARY_ADDRESS1',  0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'BENFICIARY_ADDRESS2',  0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'BENFICIARY_ADDRESS3',  0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'BENFICIRY_CITY',         0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'BENFICIRY_STATE',         0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'BENFICIARY_ADDRESS4',         0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'IFSC_CODE',         0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'BENFICIARY_BANK',         0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'MICR_CODE',           0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'CHEQUE_NUMBER',       0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'PAYMENT_DATE',         0,'N',null,null,	null,null,'0',null,null,null,'DATE:yyyy-MM-dd','O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'DRAWEE_LOCATION',      0,'N',null,null,	null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'PRINT_LOCATION',      0,'N',null,null,	null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'BENFICIRY_EMAIL',         0,'N',null,null,	null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'BENFICIRY_EMAIL1',       1,'N',null,'',	null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'BENFICIARY_MOBILE',       0,'N',null,null,	null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'CORP_BATCH_NUM',       1,'N',null,'',	null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'COMAPANY_CODE',       1,'N',null,'',	null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'PRODUCT_CODE',       1,'N',null,'',	null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'FINREFERENCE',       0,'N',null,null,	null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'ID',       0,'N',null,null,	null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'EXTRA3',       1,'N',null,'',	null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'EXTRA4',       1,'N',null,'',	null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'EXTRA5',       1,'N',null,'',	null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'DISBURSEMENT_TYPE',       0,'N',null,null,	null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'CORP_EMAIL_ADDRESS',       1,'N',null,'',	null,null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'TRANSMISSIONDATE',       1,'N',null,null,	'${SysDate}',null,'0',null,null,null,'DATE:yyyy-MM-dd','O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'USERID',       1,'N',null,null,	'${USER_NAME}',null,'0',null,null,null,null,'O');
				Insert into DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_EXPORT_DEFAULT')), 'USERDEPARTMENT',       1,'N',null,null,	'${USER_DEPT_CODE}',null,'0',null,null,null,null,'O');
				
				
				UPDATE SEQ_DATA_ENGINE_CONFIG SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_CONFIG);
				UPDATE SEQ_DATA_ENGINE_TABLE  SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_TABLE);
				UPDATE SEQ_DATA_ENGINE_COLUMN SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_COLUMN);
			]]>
		</sql>
	</changeSet>

	<changeSet id="13" author="vijaya.a">
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='MANDATES_EXPORT');
				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY;
				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='MANDATES_EXPORT';
							
				DELETE FROM DATA_ENGINE_COLUMN where TABLEID IN (select ID from DATA_ENGINE_TABLE WHERE CONFIGID = (select ID from DATA_ENGINE_CONFIG where Name = 'MANDATES_EXPORT'));
				DELETE FROM DATA_ENGINE_TABLE where CONFIGID IN (select ID from DATA_ENGINE_CONFIG where Name = 'MANDATES_EXPORT');
				DELETE FROM DATA_ENGINE_CONFIG where Name = 'MANDATES_EXPORT';
							
				INSERT INTO DATA_ENGINE_CONFIG VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG),'MANDATES_EXPORT', 'Mandates export', 3, 'Mandates', NULL, NULL, ',' , 0, 0, NULL, 'ROW:{Date, Utility Code, UMRN No.,Sponsor Bank, Client Name,Applicant Name,Bank Account Holder Name,Bank Name, Branch Name,Bank Account Number, MICR/IFSC, Account type, Start Date, End Date, Amount (Rs.), No. of Installments, Frequency, Mandate ID, Finreference}',  '', 'A', '/opt/Growth_Source/PFF/GSF/mandates', 'MANDATE_', '.xls', 0, NULL, '${ddMMYYYYHms}', NULL, 0, NULL, 1, 1); 
				INSERT INTO DATA_ENGINE_TABLE  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT'), 'MANDATE_REQUESTS',  0, 'ID', 'PROCESS_ID = :PROCESS_ID', 'UPDATE MANDATE_REQUESTS SET BATCH_ID = :FILEID, STATUS = ''AC'' WHERE PROCESS_ID = :PROCESS_ID QUERY:UPDATE MANDATES SET STATUS =  ''AC'' WHERE MANDATEID IN (SELECT MANDATEID FROM MANDATE_REQUESTS WHERE PROCESS_ID = :PROCESS_ID AND STATUS =  ''AC'')', NULL, NULL, NULL, NULL, NULL, 0, 0, 0);
							
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'START_DATE',			0, 'N', NULL, NULL, NULL, NULL, 0, NULL, NULL, NULL, 'DATE:dd-MMM-yyyy', 'M');	
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'Utility Code',		    1, 'N', NULL, '', NULL, NULL, 0, NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'MANDATE_REG_NO',		0, 'N', NULL, NULL, NULL, NULL, 0, NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'SponsorBank',			1, 'N', NULL, 'Axis', NULL, NULL, 0, NULL, NULL, NULL,NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'CLIENT_NAME',	        1, 'N', NULL, 'GS', NULL, NULL, 0, NULL, NULL, NULL, NULL,'M');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'CUSTOMER_NAME',			0, 'N', NULL, NULL, NULL, NULL, 0, NULL, NULL, NULL, NULL,'M');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'ACCT_HOLDER_NAME',					0, 'N', NULL, NULL, NULL, NULL, 0, NULL, NULL, NULL, NULL,'M');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'BANK_NAME',				0, 'N', NULL, NULL, NULL, NULL, 0, NULL, NULL, NULL, NULL,'M');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'BANK_BRANCH_NAME',		0, 'N', NULL, NULL, NULL, NULL, 0, NULL, NULL, NULL, NULL,'M');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'ACCT_NUMBER',			0, 'N', NULL, NULL, NULL, NULL, 0, NULL, NULL, NULL, NULL,'M');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'MICR_CODE',			0, 'N', NULL, NULL, NULL, NULL, 0, NULL, NULL, NULL, NULL,'M');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'ACCT_TYPE',			0, 'N', NULL, NULL, NULL, NULL, 0, NULL, NULL, NULL, NULL,'M');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'START_DATE',		0, 'N', NULL, NULL, NULL, NULL, 0, NULL, NULL, NULL, 'DATE:dd-MMM-yyyy','M');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'END_DATE',				0, 'N', NULL, NULL, NULL, NULL, 0, NULL, NULL, NULL, 'DATE:dd-MMM-yyyy','M');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'DEBIT_AMOUNT',		0, 'N', NULL, NULL, NULL, NULL, 0, NULL, NULL, NULL, NULL,'M');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'NUMBER_OF_TERMS',			0, 'N', NULL, NULL, NULL, NULL, 0, NULL, NULL, NULL, NULL,'M');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'FREQUENCY',			0, 'N', NULL, NULL, NULL, NULL, 0, NULL, NULL, NULL, NULL,'M');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'MANDATEID',			0, 'N', NULL, NULL, NULL, NULL, 0, NULL, NULL, NULL, NULL,'M');		
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'FINREFERENCE',			0, 'N', NULL, NULL, NULL, NULL, 0, NULL, NULL, NULL, NULL,'M');		
							
				UPDATE SEQ_DATA_ENGINE_CONFIG SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_CONFIG);
				UPDATE SEQ_DATA_ENGINE_TABLE  SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_TABLE);
				UPDATE SEQ_DATA_ENGINE_COLUMN SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_COLUMN);
				
			]]>
		</sql>
	</changeSet>

	<changeSet id="14" author="vijaya.a">
		<comment>Mandate Response scripts</comment>
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='MANDATES_IMPORT');
				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='MANDATES_IMPORT');
				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='MANDATES_IMPORT';
																	
				DELETE FROM DATA_ENGINE_COLUMN where TABLEID IN (select ID from DATA_ENGINE_TABLE WHERE CONFIGID = (select ID from DATA_ENGINE_CONFIG where Name = 'MANDATES_IMPORT'));
				DELETE FROM DATA_ENGINE_TABLE where CONFIGID IN (select ID from DATA_ENGINE_CONFIG where Name = 'MANDATES_IMPORT');
				DELETE FROM DATA_ENGINE_CONFIG where Name = 'MANDATES_IMPORT';
													
				Insert into DATA_ENGINE_CONFIG  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG),'MANDATES_IMPORT', 'Mandate Response file',12,'Mandates',null,null,null,0,1, null,null, null,'C','/opt/Growth_Source/PFF/GSF/mandates', 'Mandates_','.xls',0, current_timestamp,null,null,'0',null,1,1);
																
				Insert into DATA_ENGINE_TABLE values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE),(Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT'),'MANDATE_RESPONSE',1,'ID',null, null,null,null,null,null,null,33,0,0);
				
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'RESP_BATCH_ID', 0, 'N', NULL, NULL, '${FILE_ID}', NULL, '0', NULL, NULL, NULL, NULL, 'O');												
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'MANDATE_REG_NO', 0, 'N', NULL, NULL, NULL, NULL, '0', NULL, NULL, NULL, NULL, 'O');			
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'STATUS', 0, 'N', NULL, NULL, NULL, NULL, '1', NULL, 'if((STATUS == ''INITIAL REJECTED BY DESTINATIONBANK'')){Result = ''Y'';  return;} else if((STATUS == ''INITIAL ACTIVE'')) {Result = ''N'';  return;} ', NULL, NULL, 'O');			
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'REMARKS', 0, 'N', NULL, NULL, NULL, NULL, '2', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'FINREFERENCE', 0, 'N', NULL, NULL, NULL, NULL, '3', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'PAYMENTTYPE', 1, 'N', NULL, '', NULL, NULL, '4', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'ACCT_NUMBER', 0, 'N', NULL, NULL, NULL, NULL, '5', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'BANK_NAME', 0, 'N', NULL, NULL, NULL, NULL, '6', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'BANK_CODE', 0, 'N', NULL, NULL, NULL, NULL, '7', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'CUSTOMER_NAME', 0, 'N', NULL, NULL, NULL, NULL, '8', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'CREDITORNAME', 1, 'N', NULL, '', NULL, NULL, '9', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'FREQUENCY', 0, 'N', NULL, NULL, NULL, NULL, '10', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'DEBIT_AMOUNT', 0, 'N', NULL, NULL, NULL, NULL, '11', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'START_DATE', 0, 'N', NULL, NULL, NULL, NULL, '12', NULL, NULL, NULL, 'DATE:dd-MM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'END_DATE', 0, 'N', NULL, NULL, NULL, NULL, '13', NULL, NULL, NULL, 'DATE:dd-MM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'INITIATE_DBUSINESS_DATE', 0, 'N', NULL, NULL, NULL, NULL, '14', NULL, NULL, NULL, 'DATE:dd-MM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'SPONSOR_CHECKER_APPROVALDATE', 0, 'N', NULL, NULL, NULL, NULL, '15', NULL, NULL, NULL, 'DATE:dd-MM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'CREATION_DATE', 0, 'N', NULL, NULL, NULL, NULL, '16', NULL, NULL, NULL, 'DATE:dd-MM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'ACCEPTANCE_DATE', 0, 'N', NULL, NULL, NULL, NULL, '17', NULL, NULL, NULL, 'DATE:dd-MM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'CREDITORUTILITYCODE', 1, 'N', NULL, '', NULL, NULL, '18', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'PRO_DATE', 1, 'N', NULL, '', NULL, NULL, '19', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'LOT', 0, 'N', NULL, NULL, NULL, NULL, '20', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'SRNO', 1, 'N', NULL, '', NULL, NULL, '21', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'CLIENTCODE', 1, 'N', NULL, '', NULL, NULL, '22', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'OLD_UMRN', 1, 'N', NULL, '', NULL, NULL, '23', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'DATE', 1, 'N', NULL, '', NULL, NULL, '24', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'SP_BKCODE', 1, 'N', NULL, '', NULL, NULL, '25', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'ACTION', 1, 'N', NULL, '', NULL, NULL, '26', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'ACCT_TYPE', 0, 'N', NULL, NULL, NULL, NULL, '27', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'CUSTOMER_PHONE', 0, 'N', NULL, NULL, NULL, NULL, '28', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'PICKUP_LOCATION', 1, 'N', NULL, '', NULL, NULL, '29', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'INWARD_DATE', 0, 'N', NULL, NULL, NULL, NULL, '30', NULL, NULL, NULL, 'DATE:dd-MM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'SP_BANK', 1, 'N', NULL, '', NULL, NULL, '31', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'MANDATEID', 0, 'N', NULL, NULL, NULL, NULL, '32', NULL, NULL, NULL, NULL, 'M');
													
				UPDATE SEQ_DATA_ENGINE_CONFIG SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_CONFIG);
				UPDATE SEQ_DATA_ENGINE_TABLE  SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_TABLE);
				UPDATE SEQ_DATA_ENGINE_COLUMN SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_COLUMN); 
			]]>
		</sql>
	</changeSet>

	<changeSet id="15" author="vijaya.a">
		<comment>Disbursement response scripts</comment>
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_COLUMN  where TABLEID IN (select ID from DATA_ENGINE_TABLE WHERE CONFIGID = (select ID from DATA_ENGINE_CONFIG where Name = 'DISB_HDFC_IMPORT'));
				DELETE from DATA_ENGINE_TABLE where configid = (select id from DATA_ENGINE_CONFIG where name = 'DISB_HDFC_IMPORT');
				DELETE from DATA_ENGINE_CONFIG where name = 'DISB_HDFC_IMPORT';
				
				INSERT into DATA_ENGINE_CONFIG  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG),'DISB_HDFC_IMPORT','HDFC Disbursement Response File.',1,null,null,null,',',0,0, null, null, null,'C','/opt/PFF/disbursements/response','${CLIENT_CODE}','.csv',0,current_timestamp,'${ddmm},.${SEQ_DATE_FILE}',null,'0','MOVE_TO_S3_BUCKET,COPY_TO_SFTP',1,1);
				INSERT into DATA_ENGINE_TABLE values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE),(Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT'),'DISBURSEMENT_REQUESTS',2,'ID',null,null,null,null,null,null,NULL,0,0,0);
				
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'RESP_BATCH_ID',               0,'N',NULL,NULL,'${FILE_ID}',NULL,'0',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'CUSTCIF',                     0,'N',NULL,NULL,   NULL,     NULL,'0',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'CORPORATECODE',               1,'N',NULL,'',   NULL,     NULL,'1',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'PAYMENTRUNDATE',              1,'N',NULL,'',   NULL,     NULL,'2',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'DISBURSEMENT_TYPE',           0,'N',NULL,NULL,   NULL,     NULL,'3',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'TRANSACTIONUTRNO',            1,'N',NULL,'',   NULL,     NULL,'4',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'CHEQUE_NUMBER',               0,'N',NULL,NULL,   NULL,     NULL,'5',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'STATUS',                  1,'N',NULL,'',   NULL,     NULL,'6',NULL,'if((STATUS == ''SUCCESS'')){Result = ''S'';  return;} else if((STATUS == ''FAIL'')) {Result = ''F'';  return;}' ,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'REJECT_REASON',           1,'N',NULL,NULL,   NULL,     NULL,'7',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'BATCHNO',                     1,'N',NULL,NULL,   NULL,     NULL,'8',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'BENFICIARYCODE',              1,'N',NULL,NULL,   NULL,     NULL,'9',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'PROCESSINGDATE',              1,'N',NULL,NULL,   NULL,     NULL,'10',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'BANKREFERENCENO',             1,'N',NULL,NULL,   NULL,     NULL,'11',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'DISBURSEMENT_AMOUNT',         1,'N',NULL,NULL,   NULL,     NULL,'11',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'PARTNERBANK_ACCOUNT',         0,'N',NULL,NULL,   NULL,     NULL,'12',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'CORPORATEIFSCCODE',           1,'N',NULL,NULL,   NULL,     NULL,'13',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'DEBITCREDITINDICATOR',        1,'N',NULL,NULL,   NULL,     NULL,'14',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'BENFICIARY_ACCOUNT',          0,'N',NULL,NULL,   NULL,     NULL,'15',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'ID',                          0,'N',NULL,NULL,   NULL,     NULL,'16',NULL,NULL,NULL,NULL,'O');
				
				UPDATE SEQ_DATA_ENGINE_CONFIG SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_CONFIG);
				UPDATE SEQ_DATA_ENGINE_TABLE  SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_TABLE);
				UPDATE SEQ_DATA_ENGINE_COLUMN SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_COLUMN);		  
			]]>
		</sql>
	</changeSet>

	<changeSet id="16" author="vijaya.a">
		<comment>Present request scripts</comment>
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='PRESENTMENT_REQUEST');
				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='PRESENTMENT_REQUEST');
				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='PRESENTMENT_REQUEST';
								
				DELETE FROM DATA_ENGINE_COLUMN where TABLEID IN (select ID from DATA_ENGINE_TABLE WHERE CONFIGID = (select ID from DATA_ENGINE_CONFIG where Name = 'PRESENTMENT_REQUEST'));
				DELETE FROM DATA_ENGINE_TABLE where CONFIGID IN (select ID from DATA_ENGINE_CONFIG where Name = 'PRESENTMENT_REQUEST');
				DELETE FROM DATA_ENGINE_CONFIG where Name = 'PRESENTMENT_REQUEST';
								
				INSERT INTO DATA_ENGINE_CONFIG VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'PRESENTMENT_REQUEST', 'Presentment Request.', 3, NULL, NULL, NULL, NULL , 0, 0, NULL, 'CORPORATE UTILITY CODE, CORPORATE NAME/ USER NAME, UMRN, CUSTOMER TO BE DEBITED, CUSTOMER IFSC/ MICR, CUSTOMER DEBIT ACC, TRANSACTION ID/ REF, AMOUNT(RS), DATE OF TXN, FILE NO', '', 'A', '/opt/Growth_Source/PFF/GSF/presentment', 'PRESENTREQ', '.xlsx', 0, NULL, '${SEQ_FILE},_${yyyyMMddHHmmss}', NULL, 0, NULL, 1, 1); 
				INSERT INTO DATA_ENGINE_TABLE  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'PRESENTMENT_REQUEST'), 'PRESENTMENT_REQ_DETAILS_View',  0, 'JOB_ID', 'JOB_ID = :JOB_ID', NULL, NULL, NULL, NULL, NULL, NULL, 0, 0, 0);
								
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'PRESENTMENT_REQ_DETAILS_View' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'PRESENTMENT_REQUEST')), 'CORPORATE_UTILITY_CODE', 1, 'N', NULL, '', NULL, NULL, 0, NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'PRESENTMENT_REQ_DETAILS_View' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'PRESENTMENT_REQUEST')), 'CORPORATENAME/USERNAME', 1, 'N', NULL, 'Growth Source', NULL, NULL, 1, NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'PRESENTMENT_REQ_DETAILS_View' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'PRESENTMENT_REQUEST')), 'UMRN_NO', 0, 'N', NULL, NULL, NULL, NULL, 2, NULL, NULL, NULL, NULL, 'O');	
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'PRESENTMENT_REQ_DETAILS_View' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'PRESENTMENT_REQUEST')), 'DEST_ACC_HOLDER', 0, 'N', NULL, NULL, NULL, NULL, 3, NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'PRESENTMENT_REQ_DETAILS_View' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'PRESENTMENT_REQUEST')), 'MICR_CODE', 0, 'N', NULL, NULL, NULL, NULL, 4, NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'PRESENTMENT_REQ_DETAILS_View' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'PRESENTMENT_REQUEST')), 'ACCOUNTNO', 0, 'N', NULL, NULL, NULL, NULL, 4, NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'PRESENTMENT_REQ_DETAILS_View' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'PRESENTMENT_REQUEST')), 'AGREEMENTNO', 0, 'N', NULL, NULL, NULL, NULL, 5, NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'PRESENTMENT_REQ_DETAILS_View' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'PRESENTMENT_REQUEST')), 'CHEQUEAMOUNT', 0, 'N', NULL, NULL, NULL, NULL, 6, NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'PRESENTMENT_REQ_DETAILS_View' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'PRESENTMENT_REQUEST')), 'CYCLEDATE', 0, 'N', NULL, NULL, NULL, NULL, 7, NULL, NULL, NULL, 'DATE:dd/MM/yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'PRESENTMENT_REQ_DETAILS_View' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'PRESENTMENT_REQUEST')), 'BATCHID', 0, 'N', NULL, NULL, NULL, NULL, 8, NULL, NULL, NULL, NULL, 'O');
				
				UPDATE SEQ_DATA_ENGINE_CONFIG SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_CONFIG);
				UPDATE SEQ_DATA_ENGINE_TABLE  SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_TABLE);
				UPDATE SEQ_DATA_ENGINE_COLUMN SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_COLUMN);

			]]>
		</sql>
	</changeSet>

	<changeSet id="17" author="vijaya.a">
		<comment>Present response scripts</comment>
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='PRESENTMENT_RESPONSE');
				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='PRESENTMENT_RESPONSE');
				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='PRESENTMENT_RESPONSE';
								
				DELETE FROM DATA_ENGINE_COLUMN where TABLEID IN (select ID from DATA_ENGINE_TABLE WHERE CONFIGID = (select ID from DATA_ENGINE_CONFIG where Name = 'PRESENTMENT_RESPONSE'));
				DELETE FROM DATA_ENGINE_TABLE where CONFIGID IN (select ID from DATA_ENGINE_CONFIG where Name = 'PRESENTMENT_RESPONSE');
				DELETE FROM DATA_ENGINE_CONFIG where Name = 'PRESENTMENT_RESPONSE';
								
				INSERT INTO DATA_ENGINE_CONFIG VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'PRESENTMENT_RESPONSE', 'Presentment Default Response file.', 12, 'Presentment', NULL, NULL, NULL , 0, 1, NULL, 'Corporate User No, Corporate Name, UMRN, Customer to be debited, Customer IFSC, Customer Debit AC, Transaction ID/REF, Amount (Rs), Date of Txn, File No, Status Description, Reason Description', '', 'C', '/opt/PFF/presentment/response', 'Presentment_', '.xlsx', 0, current_timestamp, NULL, NULL, 0, NULL, 1, 1); 
				INSERT INTO DATA_ENGINE_TABLE  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'PRESENTMENT_RESPONSE'), 'PRESENTMENT_FILEIMPORT',  0, 'BatchId', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 0, 0, 0);
					
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'PRESENTMENT_FILEIMPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'PRESENTMENT_RESPONSE')), 'AGREEMENTNO', 0, 'N', NULL, NULL, NULL, NULL, 6, NULL, NULL, NULL, NULL, 'O');	
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'PRESENTMENT_FILEIMPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'PRESENTMENT_RESPONSE')), 'AMOUNTCLEARED', 0, 'N', NULL, NULL, NULL, NULL, 7, NULL, NULL, NULL, NULL, 'O');	
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'PRESENTMENT_FILEIMPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'PRESENTMENT_RESPONSE')), 'BATCHID', 0, 'N', NULL, NULL, NULL, NULL, 9, NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'PRESENTMENT_FILEIMPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'PRESENTMENT_RESPONSE')), 'STATUS', 0, 'N', NULL, NULL, NULL, NULL, 10, NULL, 'if((STATUS == ''SUCCESS'')){Result = ''S'';  return;} else if((STATUS == ''FAIL'')) {Result = ''F'';  return;} ', NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'PRESENTMENT_FILEIMPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'PRESENTMENT_RESPONSE')), 'REASONCODE', 0, 'N', NULL, NULL, NULL, NULL, 11, NULL, NULL, NULL, NULL, 'O');
				
						
				UPDATE SEQ_DATA_ENGINE_CONFIG SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_CONFIG);
				UPDATE SEQ_DATA_ENGINE_TABLE  SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_TABLE);
				UPDATE SEQ_DATA_ENGINE_COLUMN SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_COLUMN);
			]]>
		</sql>
	</changeSet>

	<changeSet id="18" author="vijaya.a">
		<comment>Disbursement request file name format scripts</comment>
		<sql>
			<![CDATA[
				Update data_engine_config set FilePreFixName = 'DEMOCORP60_Axis_' , FileNameFormat = '${PAYMENT_TYPE},_${ddMMYYYYHHmmss}' Where Name = 'DISB_EXPORT_DEFAULT';
			]]>
		</sql>
	</changeSet>
	<changeSet id="19" author="meena.a">
		<sql>
			<![CDATA[
				UPDATE SMTPARAMETERS SET SYSPARMVALUE='Y' WHERE SYSPARMCODE='CUST_PAN_VALIDATION';
			]]>
		</sql>
	</changeSet>
	<changeSet id="20" author="meena.a">
		<sql>
			<![CDATA[
				UPDATE SMTPARAMETERS SET SYSPARMVALUE='Y' WHERE SYSPARMCODE='CUST_PRIMARY_ID_REQ';
			]]>
		</sql>
	</changeSet>


	<changeSet id="19" author="vijaya.a">
		<comment>Mandate Response scripts</comment>
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='MANDATES_IMPORT');
				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='MANDATES_IMPORT');
				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='MANDATES_IMPORT';
																	
				DELETE FROM DATA_ENGINE_COLUMN where TABLEID IN (select ID from DATA_ENGINE_TABLE WHERE CONFIGID = (select ID from DATA_ENGINE_CONFIG where Name = 'MANDATES_IMPORT'));
				DELETE FROM DATA_ENGINE_TABLE where CONFIGID IN (select ID from DATA_ENGINE_CONFIG where Name = 'MANDATES_IMPORT');
				DELETE FROM DATA_ENGINE_CONFIG where Name = 'MANDATES_IMPORT';
													
				Insert into DATA_ENGINE_CONFIG  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG),'MANDATES_IMPORT', 'Mandate Response file',12,'Mandates',null,null,null,0,1, null,null, null,'C','/opt/Growth_Source/PFF/GSF/mandates', 'Mandates_','.xls',0, current_timestamp,null,null,'0',null,1,1);
																
				Insert into DATA_ENGINE_TABLE values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE),(Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT'),'MANDATE_RESPONSE',1,'ID',null, null,null,null,null,null,null,33,0,0);
				
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'RESP_BATCH_ID', 0, 'N', NULL, NULL, '${FILE_ID}', NULL, '0', NULL, NULL, NULL, NULL, 'O');												
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'UMRN', 1, 'N', NULL, '', NULL, NULL, '0', NULL, NULL, NULL, NULL, 'O');			
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'STATUS', 0, 'N', NULL, NULL, NULL, NULL, '1', NULL, 'if((STATUS == ''INITIAL REJECTED BY DESTINATIONBANK'')){Result = ''Y'';  return;} else if((STATUS == ''INITIAL ACTIVE'')) {Result = ''N'';  return;} ', NULL, NULL, 'O');			
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'REMARKS', 0, 'N', NULL, NULL, NULL, NULL, '2', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'FINREFERENCE', 0, 'N', NULL, NULL, NULL, NULL, '3', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'PAYMENTTYPE', 1, 'N', NULL, '', NULL, NULL, '4', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'ACCT_NUMBER', 0, 'N', NULL, NULL, NULL, NULL, '5', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'BANK_NAME', 0, 'N', NULL, NULL, NULL, NULL, '6', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'BANK_CODE', 0, 'N', NULL, NULL, NULL, NULL, '7', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'CUSTOMER_NAME', 0, 'N', NULL, NULL, NULL, NULL, '8', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'CREDITORNAME', 1, 'N', NULL, '', NULL, NULL, '9', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'FREQUENCY', 0, 'N', NULL, NULL, NULL, NULL, '10', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'DEBIT_AMOUNT', 0, 'N', NULL, NULL, NULL, NULL, '11', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'START_DATE', 1, 'N', NULL, '', NULL, NULL, '12', NULL, NULL, NULL, 'DATE:dd-MMM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'END_DATE', 1, 'N', NULL, '', NULL, NULL, '13', NULL, NULL, NULL, 'DATE:dd-MMM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'INITIATE_DBUSINESS_DATE', 1, 'N', NULL, '', NULL, NULL, '14', NULL, NULL, NULL, 'DATE:dd-MMM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'SPONSOR_CHECKER_APPROVALDATE', 1, 'N', NULL, '', NULL, NULL, '15', NULL, NULL, NULL, 'DATE:dd-MMM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'CREATION_DATE', 1, 'N', NULL, '', NULL, NULL, '16', NULL, NULL, NULL, 'DATE:dd-MMM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'ACCEPTANCE_DATE', 1, 'N', NULL, '', NULL, NULL, '17', NULL, NULL, NULL, 'DATE:dd-MMM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'CREDITORUTILITYCODE', 1, 'N', NULL, '', NULL, NULL, '18', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'PRO_DATE', 1, 'N', NULL, '', NULL, NULL, '19', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'LOT', 0, 'N', NULL, NULL, NULL, NULL, '20', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'SRNO', 1, 'N', NULL, '', NULL, NULL, '21', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'CLIENTCODE', 1, 'N', NULL, '', NULL, NULL, '22', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'OLD_UMRN', 1, 'N', NULL, '', NULL, NULL, '23', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'DATE', 1, 'N', NULL, '', NULL, NULL, '24', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'SP_BKCODE', 1, 'N', NULL, '', NULL, NULL, '25', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'ACTION', 1, 'N', NULL, '', NULL, NULL, '26', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'ACCT_TYPE', 0, 'N', NULL, NULL, NULL, NULL, '27', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'CUSTOMER_PHONE', 0, 'N', NULL, NULL, NULL, NULL, '28', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'PICKUP_LOCATION', 1, 'N', NULL, '', NULL, NULL, '29', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'INWARD_DATE', 1, 'N', NULL, '', NULL, NULL, '30', NULL, NULL, NULL, 'DATE:dd-MMM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'SP_BANK', 1, 'N', NULL, '', NULL, NULL, '31', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'MANDATEID', 0, 'N', NULL, NULL, NULL, NULL, '32', NULL, NULL, NULL, NULL, 'M');
													
				UPDATE SEQ_DATA_ENGINE_CONFIG SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_CONFIG);
				UPDATE SEQ_DATA_ENGINE_TABLE  SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_TABLE);
				UPDATE SEQ_DATA_ENGINE_COLUMN SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_COLUMN); 
			]]>
		</sql>
	</changeSet>

	<changeSet id="20" author="vijaya.a">
		<comment>Mandate Response scripts</comment>
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_COLUMN  where TABLEID IN (select ID from DATA_ENGINE_TABLE WHERE CONFIGID = (select ID from DATA_ENGINE_CONFIG where Name = 'DISB_HDFC_IMPORT'));
				DELETE from DATA_ENGINE_TABLE where configid = (select id from DATA_ENGINE_CONFIG where name = 'DISB_HDFC_IMPORT');
				DELETE from DATA_ENGINE_CONFIG where name = 'DISB_HDFC_IMPORT';
				
				INSERT into DATA_ENGINE_CONFIG  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG),'DISB_HDFC_IMPORT','HDFC Disbursement Response File.',1,null,null,null,',',0,0, null, null, null,'C','/opt/PFF/disbursements/response','Disbursement_','.csv',0,current_timestamp,null,null,'0','MOVE_TO_S3_BUCKET,COPY_TO_SFTP',1,1);
				INSERT into DATA_ENGINE_TABLE values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE),(Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT'),'DISBURSEMENT_REQUESTS',2,'ID',null,null,null,null,null,null,NULL,18,0,0);
				
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'RESP_BATCH_ID',               0,'N',NULL,NULL,'${FILE_ID}',NULL,'0',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'CUSTCIF',                     0,'N',NULL,NULL,   NULL,     NULL,'0',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'CORPORATECODE',               1,'N',NULL,'',   NULL,     NULL,'1',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'PAYMENTRUNDATE',              1,'N',NULL,'',   NULL,     NULL,'2',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'DISBURSEMENT_TYPE',           0,'N',NULL,NULL,   NULL,     NULL,'3',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'TRANSACTIONUTRNO',            1,'N',NULL,'',   NULL,     NULL,'4',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'CHEQUE_NUMBER',               0,'N',NULL,NULL,   NULL,     NULL,'5',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'STATUS',                  0,'N',NULL,NULL,   NULL,     NULL,'6',NULL,'if((STATUS == ''SUCCESS'')){Result = ''S'';  return;} else if((STATUS == ''FAIL'')) {Result = ''F'';  return;}' ,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'REJECT_REASON',           0,'N',NULL,NULL,   NULL,     NULL,'7',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'BATCHNO',                     1,'N',NULL,'',   NULL,     NULL,'8',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'BENFICIARYCODE',              1,'N',NULL,'',   NULL,     NULL,'9',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'DISBURSEMENT_DATE',              1,'N',NULL,'',   NULL,     NULL,'10',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'BANKREFERENCENO',             1,'N',NULL,'',   NULL,     NULL,'11',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'DISBURSEMENT_AMOUNT',         0,'N',NULL,NULL,   NULL,     NULL,'12',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'PARTNERBANK_ACCOUNT',         0,'N',NULL,NULL,   NULL,     NULL,'13',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'CORPORATEIFSCCODE',           1,'N',NULL,'',   NULL,     NULL,'14',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'DEBITCREDITINDICATOR',        1,'N',NULL,'',   NULL,     NULL,'15',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'BENFICIARY_ACCOUNT',          0,'N',NULL,NULL,   NULL,     NULL,'16',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'ID',                          0,'N',NULL,NULL,   NULL,     NULL,'17',NULL,NULL,NULL,NULL,'O');
				
				UPDATE SEQ_DATA_ENGINE_CONFIG SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_CONFIG);
				UPDATE SEQ_DATA_ENGINE_TABLE  SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_TABLE);
				UPDATE SEQ_DATA_ENGINE_COLUMN SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_COLUMN);	
			]]>
		</sql>
	</changeSet>

	<changeSet id="21" author="gopal">
		<createTable tableName="OGL_TRANSACTION">
			<column name="VoucherNumber" type="numeric(19)" />
			<column name="VoucherDate" type="DATETIME" />
			<column name="ValueDate" type="DATETIME" />
			<column name="GLCode" type="VARCHAR(12)" />
			<column name="GLDescription" type="VARCHAR(12)" />
			<column name="Narration" type="VARCHAR(100)" />
			<column name="DebitCreditMarker" type="VARCHAR(1)" />
			<column name="Amount" type="numeric(10,2)" />
			<column name="LoanReferenceNo" type="VARCHAR(15)" />
			<column name="AccountingPeriod" type="VARCHAR(10)" />
			<column name="TransactionCurrency" type="VARCHAR(15)" />
			<column name="CrossGL" type="VARCHAR(15)" />
			<column name="VoucherTypes" type="VARCHAR(15)" />
			<column name="Branch" type="VARCHAR(10)" />
			<column name="Product" type="VARCHAR(10)" />
			<column name="State" type="VARCHAR(10)" />
		</createTable>
	</changeSet>

	<changeSet id="22" author="gopal">
		<createTable tableName="IDB_INTERFACES_LOG">
			<column name="INTERFACE_NAME" type="VARCHAR(100)" />
			<column name="REF_NUM" type="VARCHAR(100)" />
			<column name="START_DATE" type="VARCHAR(30)" />
			<column name="END_DATE" type="VARCHAR(30)" />
			<column name="RECORDS_PROCESSED" type="BIGINT" />
			<column name="STATUS" type="VARCHAR(10)" />
			<column name="STATUS_DESC" type="VARCHAR(100)" />
			<column name="INTERFACE_INFO" type="VARCHAR(100)" />
		</createTable>
	</changeSet>

	<changeSet id="23" author="gopal">
		<createSequence sequenceName="SEQ_EXTERANAL_IDBINTERFACE" startValue="1" incrementBy="1" />
	</changeSet>

	<changeSet id="24" author="gopal">
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_COLUMN  where TABLEID IN (select ID from DATA_ENGINE_TABLE WHERE CONFIGID = (select ID from DATA_ENGINE_CONFIG where Name = 'OGL_TRANSACTION'));
				DELETE from DATA_ENGINE_TABLE where configid = (select id from DATA_ENGINE_CONFIG where name = 'OGL_TRANSACTION');
				DELETE from DATA_ENGINE_CONFIG where name = 'OGL_TRANSACTION';

				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, NOTIFICATIONSTATUSEMAIL, BACKUPFILE, ACTIVE,HEADER) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'OGL_TRANSACTION', 'GSF OGL Download', 2,',', 0, 0,'A', '/opt/Growth_Source/PFF/GSF/ledgerdownload', 'GSF_', '.csv', 0, CURRENT_TIMESTAMP, '${yyyyMMddHHmmss}', 0, 1, 1,'VoucherNumber, VoucherDate, ValueDate, GLCode, GLDescription, Narration, DebitCreditMarker, Amount, LoanReferenceNo, AccountingPeriod, TransactionCurrency, VoucherTypes, Branch, Product, State');
				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((select max(id)+1 from data_engine_table), (select id from data_engine_config where name = 'OGL_TRANSACTION'), 'OGL_Transaction', 0, 'finreference', 'finreference = :finreference', 0, 0, 0);

				INSERT INTO DATA_ENGINE_COLUMN(ID, TABLEID, NAME, SKIP, SEQTYPE, STARTINDEX) 		VALUES ((select max(id)+1 from data_engine_column), (select id from data_engine_table where name = 'OGL_Transaction'), 'VoucherNumber', 		0, 'N', 0);
				INSERT INTO DATA_ENGINE_COLUMN(ID, TABLEID, NAME, SKIP, SEQTYPE, STARTINDEX,FORMAT) VALUES ((select max(id)+1 from data_engine_column), (select id from data_engine_table where name = 'OGL_TRANSACTION'), 'VoucherDate', 			0, 'N', 0,'DATE:yyyy-MM-dd');
				INSERT INTO DATA_ENGINE_COLUMN(ID, TABLEID, NAME, SKIP, SEQTYPE, STARTINDEX,FORMAT) VALUES ((select max(id)+1 from data_engine_column), (select id from data_engine_table where name = 'OGL_Transaction'), 'ValueDate', 			0, 'N', 0,'DATE:yyyy-MM-dd');
				INSERT INTO DATA_ENGINE_COLUMN(ID, TABLEID, NAME, SKIP, SEQTYPE, STARTINDEX)		VALUES ((select max(id)+1 from data_engine_column), (select id from data_engine_table where name = 'OGL_Transaction'), 'GLCode', 				0, 'N', 0);
				INSERT INTO DATA_ENGINE_COLUMN(ID, TABLEID, NAME, SKIP, SEQTYPE, STARTINDEX)		VALUES ((select max(id)+1 from data_engine_column), (select id from data_engine_table where name = 'OGL_TRANSACTION'), 'GLDescription', 		0, 'N', 0);
				INSERT INTO DATA_ENGINE_COLUMN(ID, TABLEID, NAME, SKIP, SEQTYPE, STARTINDEX)		VALUES ((select max(id)+1 from data_engine_column), (select id from data_engine_table where name = 'OGL_Transaction'), 'Narration', 			0, 'N', 0);
				INSERT INTO DATA_ENGINE_COLUMN(ID, TABLEID, NAME, SKIP, SEQTYPE, STARTINDEX)		VALUES ((select max(id)+1 from data_engine_column), (select id from data_engine_table where name = 'OGL_Transaction'), 'DebitCreditMarker', 	0, 'N', 0);
				INSERT INTO DATA_ENGINE_COLUMN(ID, TABLEID, NAME, SKIP, SEQTYPE, STARTINDEX)		VALUES ((select max(id)+1 from data_engine_column), (select id from data_engine_table where name = 'OGL_Transaction'), 'Amount', 				0, 'N', 0);
				INSERT INTO DATA_ENGINE_COLUMN(ID, TABLEID, NAME, SKIP, SEQTYPE, STARTINDEX)		VALUES ((select max(id)+1 from data_engine_column), (select id from data_engine_table where name = 'OGL_Transaction'), 'LoanReferenceNo', 		0, 'N', 0);
				INSERT INTO DATA_ENGINE_COLUMN(ID, TABLEID, NAME, SKIP, SEQTYPE, STARTINDEX)		VALUES ((select max(id)+1 from data_engine_column), (select id from data_engine_table where name = 'OGL_Transaction'), 'AccountingPeriod', 		0, 'N', 0);
				INSERT INTO DATA_ENGINE_COLUMN(ID, TABLEID, NAME, SKIP, SEQTYPE, STARTINDEX)		VALUES ((select max(id)+1 from data_engine_column), (select id from data_engine_table where name = 'OGL_Transaction'), 'TransactionCurrency', 	0, 'N', 0);
				INSERT INTO DATA_ENGINE_COLUMN(ID, TABLEID, NAME, SKIP, SEQTYPE, STARTINDEX)		VALUES ((select max(id)+1 from data_engine_column), (select id from data_engine_table where name = 'OGL_Transaction'), 'VoucherTypes', 			0, 'N', 0);
				INSERT INTO DATA_ENGINE_COLUMN(ID, TABLEID, NAME, SKIP, SEQTYPE, STARTINDEX)		VALUES ((select max(id)+1 from data_engine_column), (select id from data_engine_table where name = 'OGL_Transaction'), 'Branch', 				0, 'N', 0);
				INSERT INTO DATA_ENGINE_COLUMN(ID, TABLEID, NAME, SKIP, SEQTYPE, STARTINDEX)		VALUES ((select max(id)+1 from data_engine_column), (select id from data_engine_table where name = 'OGL_Transaction'), 'Product', 				0, 'N', 0);
				INSERT INTO DATA_ENGINE_COLUMN(ID, TABLEID, NAME, SKIP, SEQTYPE, STARTINDEX)		VALUES ((select max(id)+1 from data_engine_column), (select id from data_engine_table where name = 'OGL_Transaction'), 'State', 				0, 'N', 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="24" author="vijaya.a">
		<comment>DISB Response scripts</comment>
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_COLUMN  where TABLEID IN (select ID from DATA_ENGINE_TABLE WHERE CONFIGID = (select ID from DATA_ENGINE_CONFIG where Name = 'DISB_HDFC_IMPORT'));
				DELETE from DATA_ENGINE_TABLE where configid = (select id from DATA_ENGINE_CONFIG where name = 'DISB_HDFC_IMPORT');
				DELETE from DATA_ENGINE_CONFIG where name = 'DISB_HDFC_IMPORT';
				
				INSERT into DATA_ENGINE_CONFIG  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG),'DISB_HDFC_IMPORT','HDFC Disbursement Response File.',1,null,null,null,',',0,0, null, null, null,'C','/opt/Growth_Source/PFF/GSF/disbursement','Disbursement_','.csv',0,current_timestamp,null,null,'0','MOVE_TO_S3_BUCKET,COPY_TO_SFTP',1,1);
				INSERT into DATA_ENGINE_TABLE values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE),(Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT'),'DISBURSEMENT_REQUESTS',2,'ID',null,null,null,null,null,null,NULL,18,0,0);
				
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'RESP_BATCH_ID',               0,'N',NULL,NULL,'${FILE_ID}',NULL,'0',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'CUSTCIF',                     0,'N',NULL,NULL,   NULL,     NULL,'0',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'CORPORATECODE',               1,'N',NULL,'',   NULL,     NULL,'1',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'PAYMENTRUNDATE',              1,'N',NULL,'',   NULL,     NULL,'2',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'DISBURSEMENT_TYPE',           0,'N',NULL,NULL,   NULL,     NULL,'3',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'TRANSACTIONUTRNO',            1,'N',NULL,'',   NULL,     NULL,'4',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'CHEQUE_NUMBER',               0,'N',NULL,NULL,   NULL,     NULL,'5',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'STATUS',                  0,'N',NULL,NULL,   NULL,     NULL,'6',NULL,'if((STATUS == ''SUCCESS'')){Result = ''E'';  return;} else if((STATUS == ''FAIL'')) {Result = ''R'';  return;}' ,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'REJECT_REASON',           0,'N',NULL,NULL,   NULL,     NULL,'7',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'BATCHNO',                     1,'N',NULL,'',   NULL,     NULL,'8',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'BENFICIARYCODE',              1,'N',NULL,'',   NULL,     NULL,'9',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'DISBURSEMENT_DATE',              1,'N',NULL,'',   NULL,     NULL,'10',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'BANKREFERENCENO',             1,'N',NULL,'',   NULL,     NULL,'11',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'DISBURSEMENT_AMOUNT',         0,'N',NULL,NULL,   NULL,     NULL,'12',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'PARTNERBANK_ACCOUNT',         0,'N',NULL,NULL,   NULL,     NULL,'13',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'CORPORATEIFSCCODE',           1,'N',NULL,'',   NULL,     NULL,'14',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'DEBITCREDITINDICATOR',        1,'N',NULL,'',   NULL,     NULL,'15',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'BENFICIARY_ACCOUNT',          0,'N',NULL,NULL,   NULL,     NULL,'16',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'ID',                          0,'N',NULL,NULL,   NULL,     NULL,'17',NULL,NULL,NULL,NULL,'O');
				
				UPDATE SEQ_DATA_ENGINE_CONFIG SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_CONFIG);
				UPDATE SEQ_DATA_ENGINE_TABLE  SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_TABLE);
				UPDATE SEQ_DATA_ENGINE_COLUMN SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_COLUMN);	
			]]>
		</sql>
	</changeSet>

	<changeSet id="25" author="vijaya.a">
		<comment>Mandate Response scripts</comment>
		<sql>
			<![CDATA[
				update data_engine_config set uploadpath = '/opt/Growth_Source/PFF/GSF/presentment' where name = 'PRESENTMENT_RESPONSE'	
			]]>
		</sql>
	</changeSet>

	<changeSet id="26" author="vijaya.a">
		<comment>Mandate Response scripts</comment>
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='MANDATES_IMPORT');
				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='MANDATES_IMPORT');
				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='MANDATES_IMPORT';
																	
				DELETE FROM DATA_ENGINE_COLUMN where TABLEID IN (select ID from DATA_ENGINE_TABLE WHERE CONFIGID = (select ID from DATA_ENGINE_CONFIG where Name = 'MANDATES_IMPORT'));
				DELETE FROM DATA_ENGINE_TABLE where CONFIGID IN (select ID from DATA_ENGINE_CONFIG where Name = 'MANDATES_IMPORT');
				DELETE FROM DATA_ENGINE_CONFIG where Name = 'MANDATES_IMPORT';
													
				Insert into DATA_ENGINE_CONFIG  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG),'MANDATES_IMPORT', 'Mandate Response file',12,'Mandates',null,null,null,0,1, null,null, null,'C','/opt/Growth_Source/PFF/GSF/mandates', 'Mandates_','.xls',0, current_timestamp,null,null,'0',null,1,1);
																
				Insert into DATA_ENGINE_TABLE values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE),(Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT'),'MANDATE_RESPONSE',1,'ID',null, null,null,null,null,null,null,33,0,0);
				
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'RESP_BATCH_ID', 0, 'N', NULL, NULL, '${FILE_ID}', NULL, '0', NULL, NULL, NULL, NULL, 'O');												
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'MANDATE_REG_NO', 0, 'N', NULL, NULL, NULL, NULL, '0', NULL, NULL, NULL, NULL, 'O');			
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'STATUS', 0, 'N', NULL, NULL, NULL, NULL, '1', NULL, 'if((STATUS == ''INITIAL REJECTED BY DESTINATIONBANK'')){Result = ''Y'';  return;} else if((STATUS == ''INITIAL ACTIVE'')) {Result = ''N'';  return;} ', NULL, NULL, 'O');			
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'REMARKS', 0, 'N', NULL, NULL, NULL, NULL, '2', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'FINREFERENCE', 0, 'N', NULL, NULL, NULL, NULL, '3', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'PAYMENTTYPE', 1, 'N', NULL, '', NULL, NULL, '4', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'ACCT_NUMBER', 0, 'N', NULL, NULL, NULL, NULL, '5', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'BANK_NAME', 0, 'N', NULL, NULL, NULL, NULL, '6', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'BANK_CODE', 0, 'N', NULL, NULL, NULL, NULL, '7', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'CUSTOMER_NAME', 0, 'N', NULL, NULL, NULL, NULL, '8', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'CREDITORNAME', 1, 'N', NULL, '', NULL, NULL, '9', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'FREQUENCY', 0, 'N', NULL, NULL, NULL, NULL, '10', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'DEBIT_AMOUNT', 0, 'N', NULL, NULL, NULL, NULL, '11', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'START_DATE', 1, 'N', NULL, '', NULL, NULL, '12', NULL, NULL, NULL, 'DATE:dd-MMM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'END_DATE', 1, 'N', NULL, '', NULL, NULL, '13', NULL, NULL, NULL, 'DATE:dd-MMM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'INITIATE_DBUSINESS_DATE', 1, 'N', NULL, '', NULL, NULL, '14', NULL, NULL, NULL, 'DATE:dd-MMM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'SPONSOR_CHECKER_APPROVALDATE', 1, 'N', NULL, '', NULL, NULL, '15', NULL, NULL, NULL, 'DATE:dd-MMM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'CREATION_DATE', 1, 'N', NULL, '', NULL, NULL, '16', NULL, NULL, NULL, 'DATE:dd-MMM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'ACCEPTANCE_DATE', 1, 'N', NULL, '', NULL, NULL, '17', NULL, NULL, NULL, 'DATE:dd-MMM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'CREDITORUTILITYCODE', 1, 'N', NULL, '', NULL, NULL, '18', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'PRO_DATE', 1, 'N', NULL, '', NULL, NULL, '19', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'LOT', 0, 'N', NULL, NULL, NULL, NULL, '20', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'SRNO', 1, 'N', NULL, '', NULL, NULL, '21', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'CLIENTCODE', 1, 'N', NULL, '', NULL, NULL, '22', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'OLD_UMRN', 1, 'N', NULL, '', NULL, NULL, '23', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'DATE', 1, 'N', NULL, '', NULL, NULL, '24', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'SP_BKCODE', 1, 'N', NULL, '', NULL, NULL, '25', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'ACTION', 1, 'N', NULL, '', NULL, NULL, '26', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'ACCT_TYPE', 0, 'N', NULL, NULL, NULL, NULL, '27', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'CUSTOMER_PHONE', 0, 'N', NULL, NULL, NULL, NULL, '28', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'PICKUP_LOCATION', 1, 'N', NULL, '', NULL, NULL, '29', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'INWARD_DATE', 1, 'N', NULL, '', NULL, NULL, '30', NULL, NULL, NULL, 'DATE:dd-MMM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'SP_BANK', 1, 'N', NULL, '', NULL, NULL, '31', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATE_RESPONSE' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')), 'MANDATEID', 0, 'N', NULL, NULL, NULL, NULL, '32', NULL, NULL, NULL, NULL, 'M');
													
				UPDATE SEQ_DATA_ENGINE_CONFIG SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_CONFIG);
				UPDATE SEQ_DATA_ENGINE_TABLE  SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_TABLE);
				UPDATE SEQ_DATA_ENGINE_COLUMN SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_COLUMN); 
			]]>
		</sql>
	</changeSet>

	<changeSet id="27" author="vijaya.a">
		<comment>Rule value modification in Disbursement upload</comment>
		<sql>
			<![CDATA[
				update data_engine_column set RuleforValue = NULL Where Name = 'STATUS' And  TableId = (Select Id from data_engine_table where configId = (Select Id from data_engine_config where Name = 'DISB_HDFC_IMPORT'));
			]]>
		</sql>
	</changeSet>

	<changeSet id="28" author="vijaya.a">
		<comment>DISB Response scripts</comment>
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_COLUMN  where TABLEID IN (select ID from DATA_ENGINE_TABLE WHERE CONFIGID = (select ID from DATA_ENGINE_CONFIG where Name = 'DISB_HDFC_IMPORT'));
				DELETE from DATA_ENGINE_TABLE where configid = (select id from DATA_ENGINE_CONFIG where name = 'DISB_HDFC_IMPORT');
				DELETE from DATA_ENGINE_CONFIG where name = 'DISB_HDFC_IMPORT';
				
				INSERT into DATA_ENGINE_CONFIG  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG),'DISB_HDFC_IMPORT','HDFC Disbursement Response File.',1,null,null,null,',',0,0, null, null, null,'C','/opt/Growth_Source/PFF/GSF/disbursement','Disbursement_','.csv',0,current_timestamp,null,null,'0','MOVE_TO_S3_BUCKET,COPY_TO_SFTP',1,1);
				INSERT into DATA_ENGINE_TABLE values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE),(Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT'),'DISBURSEMENT_REQUESTS',2,'ID',null,null,null,null,null,null,NULL,18,0,0);
				
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'RESP_BATCH_ID',               0,'N',NULL,NULL,'${FILE_ID}',NULL,'0',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'CUSTCIF',                     0,'N',NULL,NULL,   NULL,     NULL,'0',NULL,NULL,NULL,NULL,'M');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'CORPORATECODE',               1,'N',NULL,'',   NULL,     NULL,'1',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'PAYMENTRUNDATE',              1,'N',NULL,'',   NULL,     NULL,'2',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'DISBURSEMENT_TYPE',           0,'N',NULL,NULL,   NULL,     NULL,'3',NULL,NULL,NULL,NULL,'M');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'TRANSACTIONUTRNO',            1,'N',NULL,'',   NULL,     NULL,'4',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'CHEQUE_NUMBER',               0,'N',NULL,NULL,   NULL,     NULL,'5',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'STATUS',                  0,'N',NULL,NULL,   NULL,     NULL,'6',NULL,NULL ,NULL,NULL,'M');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'REJECT_REASON',           0,'N',NULL,NULL,   NULL,     NULL,'7',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'BATCHNO',                     1,'N',NULL,'',   NULL,     NULL,'8',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'BENFICIARYCODE',              1,'N',NULL,'',   NULL,     NULL,'9',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'DISBURSEMENT_DATE',              1,'N',NULL,'',   NULL,     NULL,'10',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'BANKREFERENCENO',             1,'N',NULL,'',   NULL,     NULL,'11',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'DISBURSEMENT_AMOUNT',         0,'N',NULL,NULL,   NULL,     NULL,'12',NULL,NULL,NULL,NULL,'M');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'PARTNERBANK_ACCOUNT',         0,'N',NULL,NULL,   NULL,     NULL,'13',NULL,NULL,NULL,NULL,'M');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'CORPORATEIFSCCODE',           1,'N',NULL,'',   NULL,     NULL,'14',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'DEBITCREDITINDICATOR',        1,'N',NULL,'',   NULL,     NULL,'15',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'BENFICIARY_ACCOUNT',          0,'N',NULL,NULL,   NULL,     NULL,'16',NULL,NULL,NULL,NULL,'M');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_IMPORT')), 'ID',                          0,'N',NULL,NULL,   NULL,     NULL,'17',NULL,NULL,NULL,NULL,'M');
				
				UPDATE SEQ_DATA_ENGINE_CONFIG SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_CONFIG);
				UPDATE SEQ_DATA_ENGINE_TABLE  SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_TABLE);
				UPDATE SEQ_DATA_ENGINE_COLUMN SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_COLUMN);	
			]]>
		</sql>
	</changeSet>

	<changeSet id="29" author="vijaya.a">
		<sql>
			<![CDATA[
				Delete From SecRights Where RightName = 'FinanceMainDialog_AutoScheduleBuild'; 
				INSERT INTO SECRIGHTS values ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'FinanceMainDialog_AutoScheduleBuild','FinanceMainDialog',0,1000,CURRENT_TIMESTAMP,'Approved',' ',' ',' ',' ',' ',0);
			]]>
		</sql>
	</changeSet>

	<changeSet author="Gopal" id="1">
		<sql>
			<![CDATA[
 				alter table OGL_Transaction drop column crossgl;
 			]]>
		</sql>

	</changeSet>

	<changeSet author="Gopal" id="2">
		<sql>
			<![CDATA[
				INSERT INTO DATA_ENGINE_EVENT_PROPERTIES (CONFIG_ID,STORAGE_TYPE,REGION_NAME,BUCKET_NAME,ACCESS_KEY,SECRET_KEY,HOST_NAME,PORT,ID) VALUES ((SELECT ID from DATA_ENGINE_CONFIG WHERE NAME='OGL_TRANSACTION'),'S3','us-east-2','D:\Integration Pennant\Source','Growth','2ew+?rm74-bwY6jt','15.206.35.170','22',(SELECT MAX(ID)+1 FROM DATA_ENGINE_EVENT_PROPERTIES));
 			]]>
		</sql>
	</changeSet>

	<changeSet author="Gopal" id="3">
		<sql>
			<![CDATA[
				delete from master_def where Master_Type = 'OGL';
				insert into master_def values('OGL','ADDDBSF','DISJV');
				insert into master_def values('OGL','ADDDBSN','DISJV');
				insert into master_def values('OGL','ADDDBSP','DISJV');
				insert into master_def values('OGL','AMENDMNT','OTHERS');
				insert into master_def values('OGL','AMZ','OTHERS');
				insert into master_def values('OGL','AMZ_MON','OTHERS');
				insert into master_def values('OGL','AMZPD','OTHERS');
				insert into master_def values('OGL','AMZSUSP','OTHERS');
				insert into master_def values('OGL','B2C','OTHERS');
				insert into master_def values('OGL','C2B','OTHERS');
				insert into master_def values('OGL','CANFIN','DISJV');
				insert into master_def values('OGL','CANINS','INSJV');
				insert into master_def values('OGL','CHQ2B','COLJV');
				insert into master_def values('OGL','CHQ2BR','COLJV');
				insert into master_def values('OGL','CMTDISB','DISJV');
				insert into master_def values('OGL','CMTRPY','DISJV');
				insert into master_def values('OGL','COMMINV','OTHERS');
				insert into master_def values('OGL','COMMINVD','OTHERS');
				insert into master_def values('OGL','COMMINVM','OTHERS');
				insert into master_def values('OGL','COMPOUND','OTHERS');
				insert into master_def values('OGL','DEFFRQ','OTHERS');
				insert into master_def values('OGL','DEFRPY','OTHERS');
				insert into master_def values('OGL','DISBINS','DISJV');
				insert into master_def values('OGL','DPRCIATE','OTHERS');
				insert into master_def values('OGL','EARLYPAY','COLJV');
				insert into master_def values('OGL','EARLYSTL','COLJV');
				insert into master_def values('OGL','EMIDAY','OTHERS');
				insert into master_def values('OGL','FEEPAY','COLJV');
				insert into master_def values('OGL','GRACEEND','OTHERS');
				insert into master_def values('OGL','HLDEMI','OTHERS');
				insert into master_def values('OGL','INSADJ','INSJV');
				insert into master_def values('OGL','INSPAY','INSJV');
				insert into master_def values('OGL','INSTDATE','COLJV');
				insert into master_def values('OGL','JVPOST','OTHERS');
				insert into master_def values('OGL','LATEPAY','COLJV');
				insert into master_def values('OGL','M_AMZ','OTHERS');
				insert into master_def values('OGL','M_NONAMZ','OTHERS');
				insert into master_def values('OGL','MANFEE','COLJV');
				insert into master_def values('OGL','MATURITY','OTHERS');
				insert into master_def values('OGL','MNTCMT','OTHERS');
				insert into master_def values('OGL','NEWCMT','OTHERS');
				insert into master_def values('OGL','NORM_PD','OTHERS');
				insert into master_def values('OGL','NORM_PIS','OTHERS');
				insert into master_def values('OGL','PAYMTINS','DISJV');
				insert into master_def values('OGL','PD_NORM','OTHERS');
				insert into master_def values('OGL','PD_PIS','OTHERS');
				insert into master_def values('OGL','PIS_NORM','OTHERS');
				insert into master_def values('OGL','PIS_PD','OTHERS');
				insert into master_def values('OGL','PRGCLAIM','OTHERS');
				insert into master_def values('OGL','PROVSN','OTHERS');
				insert into master_def values('OGL','RATCHG','OTHERS');
				insert into master_def values('OGL','REAGING','OTHERS');
				insert into master_def values('OGL','RECIP','COLJV');
				insert into master_def values('OGL','REPAY','COLJV');
				insert into master_def values('OGL','SCDCHG','OTHERS');
				insert into master_def values('OGL','SEGCHG','OTHERS');
				insert into master_def values('OGL','STAGE','OTHERS');
				insert into master_def values('OGL','VASACRUL','INSJV');
				insert into master_def values('OGL','VASFEE','INSJV');
				insert into master_def values('OGL','VENCOM','OTHERS');
				insert into master_def values('OGL','WAIVER','OTHERS');
				insert into master_def values('OGL','WRITEBK','OTHERS');
				insert into master_def values('OGL','WRITEOFF','OTHERS');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="30" author="vijaya.a">
		<sql>
			<![CDATA[
				Update data_engine_column set RuleForValue = 'if((DISBURSEMENT_TYPE == ''N'')){Result = ''NE'';  return;} else if((DISBURSEMENT_TYPE == ''R'')) {Result = ''RT'';  return;} else if((DISBURSEMENT_TYPE == ''IMPS'')) {Result = ''IM'';  return;}' where Tableid = (select Id from data_engine_table Where ConfigId = (Select Id From data_engine_config where name = 'DISB_EXPORT_DEFAULT')) And Name = 'DISBURSEMENT_TYPE';
			]]>
		</sql>
	</changeSet>
	
	<changeSet author="satyanarayana.g" id="30">
		<sql>
			<![CDATA[
				UPDATE DATA_ENGINE_COLUMN set FORMAT='DATE:dd-MM-yyyy' where NAME='VoucherDate' and TABLEID=(SELECT ID FROM DATA_ENGINE_TABLE where NAME='OGL_TRANSACTION');
				UPDATE DATA_ENGINE_COLUMN set FORMAT='DATE:dd-MM-yyyy' where NAME='ValueDate' and TABLEID=(SELECT ID FROM DATA_ENGINE_TABLE where NAME='OGL_TRANSACTION');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="31" author="vijaya.a">
		<sql>
			<![CDATA[
				Update data_engine_column set RuleForValue = 'if((DISBURSEMENT_TYPE == ''N'')){Result = ''NE'';  return;} else if((DISBURSEMENT_TYPE == ''R'')) {Result = ''RT'';  return;} else if((DISBURSEMENT_TYPE == ''IMPS'')) {Result = ''PA'';  return;} else if((DISBURSEMENT_TYPE == ''C'')) {Result = ''CC'';  return;}' where Tableid = (select Id from data_engine_table Where ConfigId = (Select Id From data_engine_config where name = 'DISB_EXPORT_DEFAULT')) And Name = 'DISBURSEMENT_TYPE';
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="32" author="vijaya.a">
		<sql>
			<![CDATA[
				Update data_engine_column set DefaultValue = 'UTIB0000248' where Tableid = (select Id from data_engine_table Where ConfigId = (Select Id From data_engine_config where name = 'MANDATES_EXPORT')) And Name = 'SponsorBank';
			]]>
		</sql>
	</changeSet>

	<changeSet id="33" author="vijaya.a">
		<sql>
			<![CDATA[
				Update SMTparameters set SysParmValue = 'BBB_PPP_SSSSSS' Where SysParmCode = 'LOAN_REF_FORMAT';
			]]>
		</sql>
	</changeSet>

	<changeSet id="34" author="vijaya.a">
		<sql>
			<![CDATA[
				update data_engine_config set ColumnDelimiter = '^' Where Name In ('DISB_EXPORT_DEFAULT', 'DISB_HDFC_IMPORT');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="35" author="vijaya.a">
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_COLUMN  where TABLEID IN (select ID from DATA_ENGINE_TABLE WHERE CONFIGID = (select ID from DATA_ENGINE_CONFIG where Name = 'DISB_AXIS_IMPORT'));
				DELETE from DATA_ENGINE_TABLE where configid = (select id from DATA_ENGINE_CONFIG where name = 'DISB_AXIS_IMPORT');
				DELETE from DATA_ENGINE_CONFIG where name = 'DISB_AXIS_IMPORT';
				
				INSERT into DATA_ENGINE_CONFIG  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG),'DISB_AXIS_IMPORT','HDFC Disbursement Response File.',1,null,null,null,'^',0,0, null, null, null,'C','/opt/Growth_Source/PFF/GSF/disbursement','Disbursement_','.csv',0,current_timestamp,null,null,'0','MOVE_TO_S3_BUCKET,COPY_TO_SFTP',1,1);
				INSERT into DATA_ENGINE_TABLE values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE),(Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_AXIS_IMPORT'),'DISBURSEMENT_REQUESTS',2,'ID',null,null,null,null,null,null,NULL,18,0,0);
				
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_AXIS_IMPORT')), 'RESP_BATCH_ID',               0,'N',NULL,NULL,'${FILE_ID}',NULL,'0',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_AXIS_IMPORT')), 'CUSTCIF',                     0,'N',NULL,NULL,   NULL,     NULL,'0',NULL,NULL,NULL,NULL,'M');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_AXIS_IMPORT')), 'CORPORATECODE',               1,'N',NULL,'',   NULL,     NULL,'1',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_AXIS_IMPORT')), 'PAYMENTRUNDATE',              1,'N',NULL,'',   NULL,     NULL,'2',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_AXIS_IMPORT')), 'DISBURSEMENT_TYPE',           0,'N',NULL,NULL,   NULL,     NULL,'3',NULL,NULL,NULL,NULL,'M');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_AXIS_IMPORT')), 'TRANSACTIONUTRNO',            1,'N',NULL,'',   NULL,     NULL,'4',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_AXIS_IMPORT')), 'CHEQUE_NUMBER',               0,'N',NULL,NULL,   NULL,     NULL,'5',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_AXIS_IMPORT')), 'STATUS',                  0,'N',NULL,NULL,   NULL,     NULL,'6',NULL,NULL ,NULL,NULL,'M');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_AXIS_IMPORT')), 'REJECT_REASON',           0,'N',NULL,NULL,   NULL,     NULL,'7',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_AXIS_IMPORT')), 'BATCHNO',                     1,'N',NULL,'',   NULL,     NULL,'8',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_AXIS_IMPORT')), 'BENFICIARYCODE',              1,'N',NULL,'',   NULL,     NULL,'9',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_AXIS_IMPORT')), 'DISBURSEMENT_DATE',              1,'N',NULL,'',   NULL,     NULL,'10',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_AXIS_IMPORT')), 'BANKREFERENCENO',             1,'N',NULL,'',   NULL,     NULL,'11',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_AXIS_IMPORT')), 'DISBURSEMENT_AMOUNT',         0,'N',NULL,NULL,   NULL,     NULL,'12',NULL,NULL,NULL,NULL,'M');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_AXIS_IMPORT')), 'PARTNERBANK_ACCOUNT',         0,'N',NULL,NULL,   NULL,     NULL,'13',NULL,NULL,NULL,NULL,'M');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_AXIS_IMPORT')), 'CORPORATEIFSCCODE',           1,'N',NULL,'',   NULL,     NULL,'14',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_AXIS_IMPORT')), 'DEBITCREDITINDICATOR',        1,'N',NULL,'',   NULL,     NULL,'15',NULL,NULL,NULL,NULL,'O');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_AXIS_IMPORT')), 'BENFICIARY_ACCOUNT',          0,'N',NULL,NULL,   NULL,     NULL,'16',NULL,NULL,NULL,NULL,'M');
				INSERT INTO data_engine_column VALUES((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISBURSEMENT_REQUESTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_AXIS_IMPORT')), 'ID',                          0,'N',NULL,NULL,   NULL,     NULL,'17',NULL,NULL,NULL,NULL,'M');
				
				UPDATE SEQ_DATA_ENGINE_CONFIG SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_CONFIG);
				UPDATE SEQ_DATA_ENGINE_TABLE  SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_TABLE);
				UPDATE SEQ_DATA_ENGINE_COLUMN SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_COLUMN);
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="36" author="vijaya.a">
		<sql>
			<![CDATA[
				Update Secroles set RoleDesc = 'Post Sanction Verification' where RoleCd = 'PSV';
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="37" author="vijaya.a">
		<sql>
			<![CDATA[
				update data_engine_column set DefaultValue = 'GSFTL' Where Name  = 'CORP_CODE' And TableID in (select Id From data_engine_table where ConfigId In (Select Id From data_engine_config where Name = 'DISB_EXPORT_DEFAULT'));
				update data_engine_config set FileExtension = '.txt' Where Name in ('DISB_EXPORT_DEFAULT', 'DISB_AXIS_IMPORT');
				update data_engine_config set FilePreFixName = 'GSFTL_Axis_', POSTEVENT = 'COPY_TO_SFTP' Where Name = 'DISB_EXPORT_DEFAULT';
				delete from data_engine_event_properties Where config_id = (select id from data_engine_config where name = 'DISB_EXPORT_DEFAULT');
				insert into data_engine_event_properties values ((select id from data_engine_config where name = 'DISB_EXPORT_DEFAULT'), 'SFTP',null,'/PFF/GS/AxisBank/Disbursement/Requests', 'ftpuser', 'ftp@axisbank@123!', null,null,'3.6.47.18',443,null,(select max(id)+1 from data_engine_event_properties));
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="38" author="Gopal.p">
		<sql>
			<![CDATA[
				UPDATE DATA_ENGINE_COLUMN SET FORMAT='DATE:ddMMYYYY' WHERE NAME='VoucherDate' AND tableid=(SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME='OGL_Transaction');
				UPDATE DATA_ENGINE_COLUMN SET FORMAT='DATE:ddMMYYYY' WHERE NAME='ValueDate' AND tableid=(SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME='OGL_Transaction');
				UPDATE DATA_ENGINE_CONFIG SET FILEEXTENSION='.csv' WHERE NAME='OGL_Transaction'
			 ]]>
		</sql>
	</changeSet>
	
	<changeSet id="39" author="vijaya.a">
		<sql>
			<![CDATA[
				Update data_engine_column set Name = 'TRANSACTIONREF', skip = 0, DefaultValue = Null Where Name = 'BANKREFERENCENO' And TableId in (select Id from data_engine_table where ConfigId in (select Id from data_engine_config Where name = 'DISB_AXIS_IMPORT'))			 
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="40" author="Keerthi.P">
		<createTable tableName="RestrictedProfile">
			<column name="key" type="BIGINT">
				<constraints primaryKey="true" primaryKeyName="PK_RestrictedProfile_Key" />
			</column>
			<column name="value" type="varchar(500)"></column>
		</createTable>
	</changeSet>
	
	<changeSet id="41" author="Keerthi.P">
		<createTable tableName="CautiousProfile">
			<column name="key" type="BIGINT">
				<constraints primaryKey="true" primaryKeyName="PK_CautiousProfile_Key" />
			</column>
			<column name="value" type="varchar(500)"></column>
		</createTable>
	</changeSet>
	
	<changeSet id="42" author="Keerthi.P">
		<sql>
			<![CDATA[
				insert into RestrictedProfile values(1,'Negative List');
				insert into RestrictedProfile values(2,'Politically exposed persons of any political party currently holding/was holding any position in the last 5 years at Central/State/District/City/Village Level');
				insert into RestrictedProfile values(3,'Bullion Traders (including jewellers)');
				insert into RestrictedProfile values(4,'Private Money Lenders');
				insert into RestrictedProfile values(5,'Chit Funds / Nidhis / Lottery & Gambling Business');
				insert into RestrictedProfile values(6,'Astrologers / Purohits / Vastu Consultants');
				insert into RestrictedProfile values(7,'Collection / Repossession Agencies');
				insert into RestrictedProfile values(8,'DSA & FI Sourcing Agents');
				insert into RestrictedProfile values(9,'Charitable Trust & Society (except EIL and Hospitals)');
				insert into RestrictedProfile values(10,'Cyber Cafes');
				insert into RestrictedProfile values(11,'Multi- level / Network marketing business');
				insert into RestrictedProfile values(12,'STD / PCO / Video parlours / Cyber cafe');
				insert into RestrictedProfile values(13,'Small time money exchangers (less than 10 branches and less than 3 states)');
				insert into RestrictedProfile values(14,'Offensive and warfare products');
				insert into RestrictedProfile values(15,'Sole liquor importers and distributors');
				insert into RestrictedProfile values(16,'Houses of worship and charities');
				insert into RestrictedProfile values(17,'Ayurvedic & Unani Consultation withour BAMS Degree');
				insert into RestrictedProfile values(18,'Liquor Wine-shop Owners');
				insert into RestrictedProfile values(19,'Cable Operater');
				insert into RestrictedProfile values(20,'Plantations & Aqua Culture');
				insert into RestrictedProfile values(21,'Policemen');
				insert into RestrictedProfile values(22,'Stamp Vendor');
				insert into RestrictedProfile values(23,'Verification Agency Owners and its employees');
				insert into RestrictedProfile values(24,'Hatcheries/Animal Hatchery/Stud farms');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="43" author="Keerthi.P">
		<sql>
			<![CDATA[
	            insert into CautiousProfile values(1,'AOP / AJP');
				insert into CautiousProfile values(2,'Entertainment Industry (includes Media / Journalists / Film Personalities - TV and Film industry (actors / artists / producers / directors) / Film Distributors)');
				insert into CautiousProfile values(3,'Gems and Jewellery');
				insert into CautiousProfile values(4,'Lawyers (except solicitor firms, Supreme Court/High Court lawyers)');
				insert into CautiousProfile values(5,'Defence equipments-manufacture/trader /dealer');
				insert into CautiousProfile values(6,'Insurance / Re-insurance / Money exchangers');
				insert into CautiousProfile values(7,'Stockbrokers / Securities Trading / Commodity Brokers including commodity trader');
				insert into CautiousProfile values(8,'Antique dealers with turnover less than Rs 1 Cr');
				insert into CautiousProfile values(9,'NRI/Business run by NRI');
				insert into CautiousProfile values(10,'Leather Industries');
				insert into CautiousProfile values(11,'Non ITA approved travel agency');
				insert into CautiousProfile values(12,'Beauty parlour');
				insert into CautiousProfile values(13,'Real Estate Dealers/ Builders');
				insert into CautiousProfile values(14,'All companies related to Power sector (Cable, Transformer, transmission tower, energy meter, etc.) not to be sourced /processed.(Cable operater in restricted profile also)');
				insert into CautiousProfile values(15,'Ayurvedic/Unani Doctor (Professional)');
				insert into CautiousProfile values(16,'Family Bars');
				insert into CautiousProfile values(17,'Business being operated from Business centre');
				insert into CautiousProfile values(18,'Driving Schools');
				insert into CautiousProfile values(19,'Gyms & Health Clubs');
				insert into CautiousProfile values(20,'Labour contractors');
				insert into CautiousProfile values(21,'Mining & Quarrying');
				insert into CautiousProfile values(22,'Management/Manpower or any other Consultants/Recruitment agencies');
				insert into CautiousProfile values(23,'Press & Media Journalists');
				insert into CautiousProfile values(24,'Sugar Mill');
				insert into CautiousProfile values(25,'NGO''s');
				]]>
		</sql>
	</changeSet>
	
	<changeSet id="44" author="vijaya.a">
		<renameColumn tableName="RESTRICTEDPROFILE" oldColumnName="Key" newColumnName="Key1" />
	</changeSet>
	
	<changeSet id="45" author="vijaya.a">
		<renameColumn tableName="CAUTIOUSPROFILE" oldColumnName="Key" newColumnName="Key1" />
	</changeSet>
	
	<changeSet id="46" author="vijaya.a">
		<sql>
			<![CDATA[
				 Delete from EXTENDEDFIELDDETAIL where FieldName = 'EBIDTA' And ModuleId In(select ModuleId from EXTENDEDFIELDHEADER where ModuleName = 'CUSTOMER');
				Alter table CUSTOMER_CORP_ED_TEMP drop column EBIDTA;
				Alter table CUSTOMER_CORP_ED drop column EBIDTA;
				Alter table CUSTOMER_RETAIL_ED_TEMP drop column EBIDTA;
				Alter table CUSTOMER_RETAIL_ED drop column EBIDTA;
				Alter table CUSTOMER_SME_ED_TEMP drop column EBIDTA;
				Alter table CUSTOMER_SME_ED drop column EBIDTA;
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="47" author="vijaya.a">
		<sql>
			<![CDATA[
				Delete from  Rules where RuleModule = 'ELGRULE' and RuleCode = 'EBIDTA';
			]]>
		</sql>
	</changeSet>

	<changeSet id="48" author="vijaya.a">
		<sql>
			<![CDATA[
				update data_engine_column set RuleForValue = 'if((DISBURSEMENT_TYPE == ''N'')){Result = ''NE'';  return;} else if((DISBURSEMENT_TYPE == ''R'')) {Result = ''RT'';  return;} else if((DISBURSEMENT_TYPE == ''IMPS'')) {Result = ''PA'';  return;} else if((DISBURSEMENT_TYPE == ''C'')) {Result = ''CC'';  return;} else if((DISBURSEMENT_TYPE == ''IFT'')) {Result = ''FT'';  return;}' where name = 'DISBURSEMENT_TYPE' And Tableid in (select id from data_engine_table where configId in (select Id from data_engine_config where Name = 'DISB_EXPORT_DEFAULT'));
			]]>
		</sql>
	</changeSet>
		
	<changeSet id="49" author="vijaya.a">
		<sql>
			<![CDATA[
				Update EXTENDEDFIELDDETAIL set FieldMandatory = 0 Where FieldName in('NETWORTH', 'TURNOVER', 'CRIFSCORE', 'CRIFVINTAGE') And ModuleId in (select ModuleId from EXTENDEDFIELDHEADER Where ModuleName = 'CUSTOMER' And SubModuleName = 'RETAIL');
				Update SMTParameters set SysParmValue = 'Y' where SysParmCode = 'HOLD_DISB_INST_POST'; 
			]]>
		</sql>
	</changeSet>	
	
	<changeSet id="50" author="vijaya.a">
		<sql>
			<![CDATA[
				Delete From BMTAmountCodes Where AllowedEvent = 'REPAY' And AmountCode = 'bounceChargePaid';
				Insert into BMTAmountCodes values('REPAY', 0, 'bounceChargePaid', 'Bounce charges Paid', 1, 1, 1005, current_timestamp, 'Approved', '', '', '', '', '', 0); 
			]]>
		</sql>
	</changeSet>	
	
	<changeSet id="51" author="swamy.p">
		<sql>
            <![CDATA[
            	delete  from CategoryWiseEvents where AeEventCode='LPPAMZ' and CategoryCode ='C'
				delete  from CategoryWiseEvents where AeEventCode='LPPAMZ' and CategoryCode ='F'
				delete  from CategoryWiseEvents where AeEventCode='LPPAMZ' and CategoryCode ='O'
				delete  from CategoryWiseEvents where AeEventCode='LPPAMZ' and CategoryCode ='S'
				INSERT INTO CategoryWiseEvents VALUES ('LPPAMZ','C',1,0,23);
				INSERT INTO CategoryWiseEvents VALUES ('LPPAMZ','F',1,0,25);
				INSERT INTO CategoryWiseEvents VALUES ('LPPAMZ','O',1,0,24);
				INSERT INTO CategoryWiseEvents VALUES ('LPPAMZ','S',1,0,26);
	  		 ]]>
		</sql>
	</changeSet>
	
	<changeSet id="52" author="vijaya.a">
		<sql>
			<![CDATA[
				Delete From BMTAmountCodes Where AllowedEvent = 'EARLYPAY' And AmountCode = 'bounceChargePaid';
				Insert into BMTAmountCodes values('EARLYPAY', 0, 'bounceChargePaid', 'Bounce charges Paid', 1, 1, 1005, current_timestamp, 'Approved', '', '', '', '', '', 0);
				
				Delete From BMTAmountCodes Where AllowedEvent = 'EARLYSTL' And AmountCode = 'bounceChargePaid';
				Insert into BMTAmountCodes values('EARLYSTL', 0, 'bounceChargePaid', 'Bounce charges Paid', 1, 1, 1005, current_timestamp, 'Approved', '', '', '', '', '', 0);
				
				Delete From BMTAmountCodes Where AllowedEvent = 'EARLYSTL' And AmountCode = 'bounceChargeWaived';
				Insert into BMTAmountCodes values('EARLYSTL', 0, 'bounceChargeWaived', 'Bounce charges Waived', 1, 1, 1005, current_timestamp, 'Approved', '', '', '', '', '', 0);
				
				Delete From BMTAmountCodes Where AllowedEvent = 'EARLYPAY' And AmountCode = 'bounceChargeWaived';
				Insert into BMTAmountCodes values('EARLYPAY', 0, 'bounceChargeWaived', 'Bounce charges Waived', 1, 1, 1005, current_timestamp, 'Approved', '', '', '', '', '', 0);
				
				Delete From BMTAmountCodes Where AllowedEvent = 'EARLYPAY' And AmountCode = 'bounceChargeWaived';
				Insert into BMTAmountCodes values('EARLYPAY', 0, 'bounceChargeWaived', 'Bounce charges Waived', 1, 1, 1005, current_timestamp, 'Approved', '', '', '', '', '', 0);
				
				Delete From BMTAmountCodes Where AllowedEvent = 'EARLYPAY' And AmountCode = 'bounceChargeWaived';
				Insert into BMTAmountCodes values('EARLYPAY', 0, 'bounceChargeWaived', 'Bounce charges Waived', 1, 1, 1005, current_timestamp, 'Approved', '', '', '', '', '', 0);
				
				Delete From BMTAmountCodes Where AllowedEvent = 'EARLYPAY' And AmountCode = 'bounceCharge_UGST_P';
				Insert into BMTAmountCodes values('EARLYPAY', 0, 'bounceCharge_UGST_P', 'Bounce charge UGST paid', 1, 1, 1005, current_timestamp, 'Approved', '', '', '', '', '', 0);
				
				Delete From BMTAmountCodes Where AllowedEvent = 'EARLYSTL' And AmountCode = 'bounceCharge_UGST_P';
				Insert into BMTAmountCodes values('EARLYSTL', 0, 'bounceCharge_UGST_P', 'Bounce charge UGST paid', 1, 1, 1005, current_timestamp, 'Approved', '', '', '', '', '', 0);
				
				Delete From BMTAmountCodes Where AllowedEvent = 'EARLYPAY' And AmountCode = 'bounceCharge_SGST_P';
				Insert into BMTAmountCodes values('EARLYPAY', 0, 'bounceCharge_SGST_P', 'Bounce charge SGST paid', 1, 1, 1005, current_timestamp, 'Approved', '', '', '', '', '', 0);
				
				Delete From BMTAmountCodes Where AllowedEvent = 'EARLYSTL' And AmountCode = 'bounceCharge_SGST_P';
				Insert into BMTAmountCodes values('EARLYSTL', 0, 'bounceCharge_SGST_P', 'Bounce charge SGST paid', 1, 1, 1005, current_timestamp, 'Approved', '', '', '', '', '', 0);
				
				Delete From BMTAmountCodes Where AllowedEvent = 'EARLYPAY' And AmountCode = 'bounceCharge_IGST_P';
				Insert into BMTAmountCodes values('EARLYPAY', 0, 'bounceCharge_IGST_P', 'Bounce charge IGSTpaid', 1, 1, 1005, current_timestamp, 'Approved', '', '', '', '', '', 0);
				
				Delete From BMTAmountCodes Where AllowedEvent = 'EARLYSTL' And AmountCode = 'bounceCharge_IGST_P';
				Insert into BMTAmountCodes values('EARLYSTL', 0, 'bounceCharge_IGST_P', 'Bounce charge IGSTpaid', 1, 1, 1005, current_timestamp, 'Approved', '', '', '', '', '', 0);
				
				Delete From BMTAmountCodes Where AllowedEvent = 'EARLYPAY' And AmountCode = 'bounceCharge_CGST_P';
				Insert into BMTAmountCodes values('EARLYPAY', 0, 'bounceCharge_CGST_P', 'Bounce charge CGST paid', 1, 1, 1005, current_timestamp, 'Approved', '', '', '', '', '', 0);
				
				Delete From BMTAmountCodes Where AllowedEvent = 'EARLYSTL' And AmountCode = 'bounceCharge_CGST_P';
				Insert into BMTAmountCodes values('EARLYSTL', 0, 'bounceCharge_CGST_P', 'Bounce charge CGST paid', 1, 1, 1005, current_timestamp, 'Approved', '', '', '', '', '', 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="DE#950" author="vijaya.a">
		<sql>
			<![CDATA[
				Delete From BMTAmountCodes Where AllowedEvent = 'WRITEOFF' And AmountCode = 'fw_writtenoffPri';
				Insert into BMTAmountCodes values('WRITEOFF', 0, 'fw_writtenoffPri', 'written off principle', 1, 1, 1005, current_timestamp, 'Approved', '', '', '', '', '', 0);
				
				Delete From BMTAmountCodes Where AllowedEvent = 'WRITEOFF' And AmountCode = 'fw_writtenoffPft';
				Insert into BMTAmountCodes values('WRITEOFF', 0, 'fw_writtenoffPft', 'written off profit', 1, 1, 1005, current_timestamp, 'Approved', '', '', '', '', '', 0);
				
				Delete From BMTAmountCodes Where AllowedEvent = 'WRITEOFF' And AmountCode = 'fw_curODPri';
				Insert into BMTAmountCodes values('WRITEOFF', 0, 'fw_curODPri', 'Current OD Priniciple', 1, 1, 1005, current_timestamp, 'Approved', '', '', '', '', '', 0);
				
				Delete From BMTAmountCodes Where AllowedEvent = 'WRITEOFF' And AmountCode = 'fw_curODPft';
				Insert into BMTAmountCodes values('WRITEOFF', 0, 'fw_curODPft', 'Current OD Profit', 1, 1, 1005, current_timestamp, 'Approved', '', '', '', '', '', 0);
				
				Delete From BMTAmountCodes Where AllowedEvent = 'WRITEOFF' And AmountCode = 'fw_unPaidSchdPri';
				Insert into BMTAmountCodes values('WRITEOFF', 0, 'fw_unPaidSchdPri', 'Unpaid schedule principle', 1, 1, 1005, current_timestamp, 'Approved', '', '', '', '', '', 0);
				
				Delete From BMTAmountCodes Where AllowedEvent = 'WRITEOFF' And AmountCode = 'fw_unPaidSchdPft';
				Insert into BMTAmountCodes values('WRITEOFF', 0, 'fw_unPaidSchdPft', 'Unpaid schedule profit', 1, 1, 1005, current_timestamp, 'Approved', '', '', '', '', '', 0);
				
				Delete From BMTAmountCodes Where AllowedEvent = 'WRITEOFF' And AmountCode = 'fw_penaltyAmount';
				Insert into BMTAmountCodes values('WRITEOFF', 0, 'fw_penaltyAmount', 'Penality amount', 1, 1, 1005, current_timestamp, 'Approved', '', '', '', '', '', 0);
				
				Delete From BMTAmountCodes Where AllowedEvent = 'WRITEOFF' And AmountCode = 'fw_writtenoffSchFee';
				Insert into BMTAmountCodes values('WRITEOFF', 0, 'fw_writtenoffSchFee', 'written off schedule fee', 1, 1, 1005, current_timestamp, 'Approved', '', '', '', '', '', 0);
				
				Delete From BMTAmountCodes Where AllowedEvent = 'WRITEOFF' And AmountCode = 'fw_writeoffPrincipal';
				Insert into BMTAmountCodes values('WRITEOFF', 0, 'fw_writeoffPrincipal', 'written off principle', 1, 1, 1005, current_timestamp, 'Approved', '', '', '', '', '', 0);
				
				Delete From BMTAmountCodes Where AllowedEvent = 'WRITEOFF' And AmountCode = 'fw_writeoffProfit';
				Insert into BMTAmountCodes values('WRITEOFF', 0, 'fw_writeoffProfit', 'write off profit', 1, 1, 1005, current_timestamp, 'Approved', '', '', '', '', '', 0);
				
				Delete From BMTAmountCodes Where AllowedEvent = 'WRITEOFF' And AmountCode = 'fw_writeoffSchFee';
				Insert into BMTAmountCodes values('WRITEOFF', 0, 'fw_writeoffSchFee', 'write off schedule fee', 1, 1, 1005, current_timestamp, 'Approved', '', '', '', '', '', 0);
			]]>
		</sql>
	</changeSet>
	
</databaseChangeLog>
