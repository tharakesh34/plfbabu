<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

	<property name="add.schema" value="dbo." dbms="mssql" />
	<property name="add.schema" value="" dbms="oracle" />
	<property name="add.schema" value="" dbms="postgresql" />
	<property name="call.substr" value="substring" dbms="mssql" />
	<property name="call.substr" value="substr" dbms="oracle" />
	<property name="call.substr" value="substring" dbms="postgresql" />
	<property name="call.auditdb" value="PLFAVANSEQC.." dbms="mssql" />
	<property name="call.auditdb" value=" " dbms="oracle" />
	<property name="call.concatenate" value="+" dbms="mssql" />
	<property name="call.concatenate" value="||" dbms="oracle" />
	<property name="call.concatenate" value="||" dbms="postgresql" />
	<property name="call.collength" value="LEN" dbms="mssql" />
	<property name="call.collength" value="LENGTH" dbms="oracle" />
	<property name="call.collength" value="LENGTH" dbms="postgresql" />
	<property name="call.date" value="getdate()" dbms="mssql" />
	<property name="call.date" value="sysdate" dbms="oracle" />
	<property name="call.date" value="now()" dbms="postgresql" />

	<changeSet id="pre_run_for_pgp" author="Gopal.p" runAlways="true" dbms="postgresql">
		<sql>
			Set search_path = plf,public,pg_catalog;
		</sql>
	</changeSet>
	
	<changeSet id="ST#730:TK#2762:01" author="Divya.A"> 
		<addColumn tableName="RMTFinanceTypes"> 
		<column name="writeOffRepayHry" type="varchar(50)" /> 
		</addColumn> 
	</changeSet> 

	<changeSet id="ST#730:TK#2762:03" author="Divya.A"> 
		<addColumn tableName="RMTFinanceTypes"> 
		<column name="matureRepayHry" type="varchar(50)" /> 
		</addColumn> 
	</changeSet> 
 
	<changeSet id="ST#730:TK#2762:04" author="Divya.A"> 
		<addColumn tableName="RMTFinanceTypes"> 
		<column name="presentmentRepayHry" type="varchar(50)" /> 
		</addColumn> 
	</changeSet> 
 
	<changeSet id="ST#730:TK#2762:06" author="Divya.A"> 
		<addColumn tableName="RMTFinanceTypes_Temp"> 
		<column name="writeOffRepayHry" type="varchar(50)" /> 
		</addColumn> 
	</changeSet> 
	 
	<changeSet id="ST#730:TK#2762:08" author="Divya.A"> 
		<addColumn tableName="RMTFinanceTypes_Temp"> 
		<column name="matureRepayHry" type="varchar(50)" /> 
		</addColumn> 
	</changeSet> 
	 
	<changeSet id="ST#730:TK#2762:09" author="Divya.A"> 
		<addColumn tableName="RMTFinanceTypes_Temp"> 
		<column name="presentmentRepayHry" type="varchar(50)" /> 
		</addColumn> 
	</changeSet> 

	<changeSet id="ST#730:TK#2762:11_pre" author="Divya.A" dbms="postgresql">
		<sql>
				<![CDATA[
					select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_aview');
			 	]]>
		</sql>
	</changeSet>
		
	<changeSet id="ST#730:TK#2762:11" author="Divya.A"> 
		<createView viewName="rmtfinancetypes_aview" replaceIfExists="true"> 
		<![CDATA[ 
			SELECT T1.FINTYPE,
				    T1.FINCATEGORY,
				    T1.FINTYPEDESC,
				    T1.FINCCY,
				    T1.FINDAYSCALTYPE,
				    T1.FINISGENREF,
				    T1.FINMAXAMOUNT,
				    T1.FINMINAMOUNT,
				    T1.FINDFTSTMTFRQ,
				    T1.FINISALWMD,
				    T1.FINSCHDMTHD,
				    T1.FINISALWGRACE,
				    T1.FINHISTRETENSION,
				    T1.EQUALREPAYMENT,
				    T1.FINRATETYPE,
				    T1.FINBASERATE,
				    T1.FINSPLRATE,
				    T1.FININTRATE,
				    T1.FINMINRATE,
				    T1.FINMAXRATE,
				    T1.FINDFTINTFRQ,
				    T1.FINISINTCPZ,
				    T1.FINCPZFRQ,
				    T1.FINISRVWALW,
				    T1.FINRVWFRQ,
				    T1.FINGRCRATETYPE,
				    T1.FINGRCBASERATE,
				    T1.FINGRCSPLRATE,
				    T1.FINGRCINTRATE,
				    T1.FINGRCMINRATE,
				    T1.FINGRCMAXRATE,
				    T1.FINGRCDFTINTFRQ,
				    T1.FINGRCISINTCPZ,
				    T1.FINGRCCPZFRQ,
				    T1.FINGRCISRVWALW,
				    T1.FINGRCRVWFRQ,
				    T1.FINMINTERM,
				    T1.FINMAXTERM,
				    T1.FINDFTTERMS,
				    T1.FINRPYFRQ,
				    T1.FINREPAYMETHOD,
				    T1.FINISALWPARTIALRPY,
				    T1.FINISALWDIFFERMENT,
				    T1.FINMAXDIFFERMENT,
				    T1.FINISALWEARLYRPY,
				    T1.FINISALWEARLYSETTLE,
				    T1.FINODRPYTRIES,
				    T1.FINEARLYPAYRULE,
				    T1.FINEARLYSETTLERULE,
				    T1.FINISACTIVE,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T1.STEPFINANCE,
				    T1.STEPPINGMANDATORY,
				    T1.ALWMANUALSTEPS,
				    T1.ALWDSTEPPOLICIES,
				    T1.DFTSTEPPOLICY,
				    T1.FINISDWPAYREQUIRED,
				    T1.FINRVWRATEAPPLFOR,
				    T1.FINALWRATECHANGEANYDATE,
				    T1.FINISINTCPZATGRCEND,
				    T1.FINELGRULECODE,
				    T1.LIMITELGRULECODE,
				    T1.FINSCHCALCODEONRVW,
				    T1.ALWPLANDEFERMENT,
				    T1.PLANDEFERCOUNT,
				    T1.FINASSETTYPE,
				    T1.FINISALWGRCREPAY,
				    T1.FINGRCSCHDMTHD,
				    T1.FINGRCMARGIN,
				    T1.FINMARGIN,
				    T1.FINSCHEDULEON,
				    T1.FINGRCSCHEDULEON,
				    T1.FINCOMMITMENTREQ,
				    T1.FINCOLLATERALREQ,
				    T1.OVERRIDELIMIT,
				    T1.LIMITREQUIRED,
				    T1.FINCOMMITMENTOVRRIDE,
				    T1.FINCOLLATERALOVRRIDE,
				    T1.FINPFTUNCHANGED,
				    T1.APPLYODPENALTY,
				    T1.ODINCGRCDAYS,
				    T1.ODCHARGETYPE,
				    T1.ODGRACEDAYS,
				    T1.ODCHARGECALON,
				    T1.ODCHARGEAMTORPERC,
				    T1.ODALLOWWAIVER,
				    T1.ODMAXWAIVERPERC,
				    T1.FINDIVISION,
				    T48.DIVISIONCODEDESC LOVDESCFINDIVISIONNAME,
				    T48.ENTITYCODE LOVDESCENTITYCODE,
				    T1.PRODUCT,
				    T1.STARTDATE,
				    T1.ENDDATE,
				    T1.REMARKS,
				    T1.ALWEARLYPAYMETHODS,
				    T1.PASTDUEPFTCALMTHD,
				    T1.PASTDUEPFTMARGIN,
				    T1.DOWNPAYRULE,
				    T59.RULECODE DOWNPAYRULECODE,
				    T59.RULECODEDESC DOWNPAYRULEDESC,
				    T1.FINSUSPTRIGGER,
				    T1.FINSUSPREMARKS,
				    T1.ALWMULTIPARTYDISB,
				    T1.COLLATERALTYPE,
				    T1.TDSAPPLICABLE,
				    T1.MANUALSCHEDULE,
				    T1.APPLYGRCPRICING,
				    T1.GRCPRICINGMETHOD,
				    T1.APPLYRPYPRICING,
				    T1.RPYPRICINGMETHOD,
				    T1.RPYHIERARCHY,
				    T67.RULECODE GRCPRICINGMETHODDESC,
				    T68.RULECODE RPYPRICINGMETHODDESC,
				    T1.DROPLINEOD,
				    T1.DROPPINGMETHOD,
				    T1.RATECHGANYDAY,
				    T1.FINREPAYPFTONFRQ,
				    T1.ALWBPI,
				    T1.BPITREATMENT,
				    T1.PFTDUESCHON,
				    T1.PLANEMIHALW,
				    T1.PLANEMIHMETHOD,
				    T1.PLANEMIHMAXPERYEAR,
				    T1.PLANEMIHMAX,
				    T1.PLANEMIHLOCKPERIOD,
				    T1.PLANEMICPZ,
				    T1.UNPLANEMIHLOCKPERIOD,
				    T1.UNPLANEMICPZ,
				    T1.REAGECPZ,
				    T1.FDDLOCKPERIOD,
				    T1.ALWDRPYMETHODS,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.ROUNDINGMODE,
				    T1.ROUNDINGTARGET,
				    T1.FREQUENCYDAYS,
				    T1.QUICKDISB,
				    T1.ALWREAGE,
				    T1.ALWUNPLANEMIHOLIDAY,
				    T1.ALWMAXDISBCHECKREQ,
				    T1.FINTYPEDESC LOVDESCPROMOFINTYPEDESC,
				    T1.PROFITCENTERID,
				    T69.PROFITCENTERCODE,
				    T69.PROFITCENTERDESC,
				    T1.PRODUCTCATEGORY,
				    T2.PRODUCTDESC FINCATEGORYDESC,
				    T1.DEVELOPERFINANCE,
				    T1.COSTOFFUNDS,
				    T1.CHEQUECAPTUREREQ,
				    T1.FINLTVCHECK,
				    T1.PARTIALLYSECURED,
				    T1.ALWADVEMI,
				    T1.ADVEMIMINTERMS,
				    T1.ADVEMIMAXTERMS,
				    T1.ADVEMIDFTTERMS,
				    T1.ADVEMISCHDMTHD,
				    T1.BPIPFTDAYSBASIS,
				    T1.ELIGIBILITYMETHODS,
				    T1.ALWHYBRIDRATE,
				    T1.FIXEDRATETENOR,
				    T1.ODMINCAPAMOUNT,
				    T1.ODRULECODE,
				    T1.ALWZEROINTACC,
				    T1.AUTOREJECTIONDAYS,
				    T1.TAXNOMAND,
				    T1.PUTCALLREQUIRED,
				    T1.GRCADVINTERSETREQ,
				    T1.GRCADVTYPE,
				    T1.GRCADVMINTERMS,
				    T1.GRCADVMAXTERMS,
				    T1.GRCADVDEFAULTTERMS,
				    T1.ADVINTERSETREQ,
				    T1.ADVTYPE,
				    T1.ADVMINTERMS,
				    T1.ADVMAXTERMS,
				    T1.ADVDEFAULTTERMS,
				    T1.ADVSTAGE,
				    T1.DSFREQ,
				    T1.CASHCOLLATERALREQ,
				    T1.TDSALLOWTOMODIFY,
				    T1.TDSAPPLICABLETO,
				    T1.ALWVAN,
				    T1.VANALLOCATIONMETHOD,
				    T1.ALLOWDRAWINGPOWER,
				    T1.ALLOWREVOLVING,
				    T1.ALWSANCTIONAMT,
				    T1.ALWSANCTIONAMTOVERRIDE,
				    T1.SANBSDSCHDLE,
				    T1.FINISRATERVWATGRCEND,
				    T1.SCHDONPMTCAL,
				    T1.AUTOAPPROVE,
				    T1.ALWPLANNEDEMIINGRC,
				    T1.OCRREQUIRED,
				    T1.ALLOWEDOCRS,
				    T1.DEFAULTOCR,
				    T1.ALLOWEDLOANPURPOSES,
				    T1.SPECIFICLOANPURPOSES,
				    T1.GRCADJREQ,
				    T1.GRCPERIODAFTRFULLDISB,
				    T1.AUTOINCRGRCENDDATE,
				    T1.GRCAUTOINCRMONTHS,
				    T1.MAXAUTOINCRALLOWED,
				    T1.THRLDTOMAINTAINGRCPRD,
				    T1.ALWLOANSPLIT,
				    T1.SPLITLOANTYPE,
				    T1.INSTBASEDSCHD,
				    T1.TDSTYPE,
				    T1.CALCOFSTEPS,
				    T1.STEPSAPPLIEDFOR,
				    T1.SUBVENTIONREQ,
					T1.OVERDRAFTTXNCHRGREQ,
					T1.OVERDRAFTTXNCHRGFEETYPE,
					T1.OVERDRAFTEXTGRACEDAYS,
					T1.OVERDRAFTCOLCHRGFEETYPE,
					T1.OVERDRAFTCOLAMT,
					T1.REGPROVRULE,
					T1.INTPROVRULE,
					T1.CLOSURETHRESHOLDLIMIT,
					T1.MAXFPPCALTYPE,
					T1.MAXFPPAMOUNT,
					T1.MAXFPPPER,
					T1.MAXFPPCALON,
					T1.PPLOCKINPERIOD,
					T1.ESLOCKINPERIOD,
					T1.MINPPCALTYPE,
					T1.MINPPAMOUNT,
					T1.MINPPPERCENTAGE,
					T1.MINPPCALON,
					T1.MAXPPCALTYPE,
					T1.MAXPPAMOUNT,
					T1.MAXPPPERCENTAGE,
					T1.MAXPPCALON,
					T1.ALLOWAUTOREFUND, 
					T1.MAXAUTOREFUND, 
					T1.MINAUTOREFUND,
					T1.NPARPYHIERARCHY,
					T1.ALLOWCANCELFIN,
					T1.WRITEOFFREPAYHRY, 
					T1.MATUREREPAYHRY, 
					T1.PRESENTMENTREPAYHRY
				FROM RMTFINANCETYPES T1
			    LEFT JOIN BMTPRODUCT T2 ON T1.FINCATEGORY = T2.PRODUCTCODE
			    LEFT JOIN SMTDIVISIONDETAIL T48 ON T1.FINDIVISION = T48.DIVISIONCODE
			    LEFT JOIN RULES T59 ON T1.DOWNPAYRULE = T59.RULEID
			    LEFT JOIN RULES T67 ON T1.GRCPRICINGMETHOD = T67.RULEID
			    LEFT JOIN RULES T68 ON T1.RPYPRICINGMETHOD = T68.RULEID
			    LEFT JOIN PROFITCENTERS T69 ON T69.PROFITCENTERID = T1.PROFITCENTERID
		]]> 
		</createView> 
	</changeSet> 
	
	<changeSet id="ST#730:TK#2762:11_post" author="Divya.A" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_aview');
		 	]]>
		</sql>
	</changeSet>
		 
	<changeSet id="ST#730:TK#2762:12_pre" author="Divya.A" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_view');
		 	]]>
		</sql>
	</changeSet>
		
	<changeSet id="ST#730:TK#2762:12" author="Divya.A"> 
		<createView viewName="rmtfinancetypes_view" replaceIfExists="true"> 
		<![CDATA[ 
			SELECT T1.FINTYPE,
				    T1.FINCATEGORY,
				    T1.FINTYPEDESC,
				    T1.FINCCY,
				    T1.FINDAYSCALTYPE,
				    T1.FINISGENREF,
				    T1.FINMAXAMOUNT,
				    T1.FINMINAMOUNT,
				    T1.FINDFTSTMTFRQ,
				    T1.FINISALWMD,
				    T1.FINSCHDMTHD,
				    T1.FINISALWGRACE,
				    T1.FINHISTRETENSION,
				    T1.EQUALREPAYMENT,
				    T1.FINRATETYPE,
				    T1.FINBASERATE,
				    T1.FINSPLRATE,
				    T1.FININTRATE,
				    T1.FINMINRATE,
				    T1.FINMAXRATE,
				    T1.FINDFTINTFRQ,
				    T1.FINISINTCPZ,
				    T1.FINCPZFRQ,
				    T1.FINISRVWALW,
				    T1.FINRVWFRQ,
				    T1.FINGRCRATETYPE,
				    T1.FINGRCBASERATE,
				    T1.FINGRCSPLRATE,
				    T1.FINGRCINTRATE,
				    T1.FINGRCMINRATE,
				    T1.FINGRCMAXRATE,
				    T1.FINGRCDFTINTFRQ,
				    T1.FINGRCISINTCPZ,
				    T1.FINGRCCPZFRQ,
				    T1.FINGRCISRVWALW,
				    T1.FINGRCRVWFRQ,
				    T1.FINMINTERM,
				    T1.FINMAXTERM,
				    T1.FINDFTTERMS,
				    T1.FINRPYFRQ,
				    T1.FINREPAYMETHOD,
				    T1.FINISALWPARTIALRPY,
				    T1.FINISALWDIFFERMENT,
				    T1.FINMAXDIFFERMENT,
				    T1.FINISALWEARLYRPY,
				    T1.FINISALWEARLYSETTLE,
				    T1.FINODRPYTRIES,
				    T1.FINEARLYPAYRULE,
				    T1.FINEARLYSETTLERULE,
				    T1.FINISACTIVE,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T1.STEPFINANCE,
				    T1.STEPPINGMANDATORY,
				    T1.ALWMANUALSTEPS,
				    T1.ALWDSTEPPOLICIES,
				    T1.DFTSTEPPOLICY,
				    T1.FINISDWPAYREQUIRED,
				    T1.FINRVWRATEAPPLFOR,
				    T1.FINALWRATECHANGEANYDATE,
				    T1.FINISINTCPZATGRCEND,
				    T1.FINELGRULECODE,
				    T1.LIMITELGRULECODE,
				    T1.FINSCHCALCODEONRVW,
				    T1.ALWPLANDEFERMENT,
				    T1.PLANDEFERCOUNT,
				    T1.FINASSETTYPE,
				    T1.FINISALWGRCREPAY,
				    T1.FINGRCSCHDMTHD,
				    T1.FINGRCMARGIN,
				    T1.FINMARGIN,
				    T1.FINSCHEDULEON,
				    T1.FINGRCSCHEDULEON,
				    T1.FINCOMMITMENTREQ,
				    T1.FINCOLLATERALREQ,
				    T1.OVERRIDELIMIT,
				    T1.LIMITREQUIRED,
				    T1.FINCOMMITMENTOVRRIDE,
				    T1.FINCOLLATERALOVRRIDE,
				    T1.FINPFTUNCHANGED,
				    T1.APPLYODPENALTY,
				    T1.ODINCGRCDAYS,
				    T1.ODCHARGETYPE,
				    T1.ODGRACEDAYS,
				    T1.ODCHARGECALON,
				    T1.ODCHARGEAMTORPERC,
				    T1.ODALLOWWAIVER,
				    T1.ODMAXWAIVERPERC,
				    T1.FINDIVISION,
				    T48.DIVISIONCODEDESC LOVDESCFINDIVISIONNAME,
				    T48.ENTITYCODE LOVDESCENTITYCODE,
				    T1.PRODUCT,
				    T1.STARTDATE,
				    T1.ENDDATE,
				    T1.FINTYPEDESC LOVDESCPROMOFINTYPEDESC,
				    T1.REMARKS,
				    T1.ALWEARLYPAYMETHODS,
				    T1.PASTDUEPFTCALMTHD,
				    T1.PASTDUEPFTMARGIN,
				    T1.DOWNPAYRULE,
				    T59.RULECODE DOWNPAYRULECODE,
				    T59.RULECODEDESC DOWNPAYRULEDESC,
				    T1.FINSUSPTRIGGER,
				    T1.FINSUSPREMARKS,
				    T1.ALWMULTIPARTYDISB,
				    T1.COLLATERALTYPE,
				    T1.TDSAPPLICABLE,
				    T1.MANUALSCHEDULE,
				    T1.APPLYGRCPRICING,
				    T1.GRCPRICINGMETHOD,
				    T1.APPLYRPYPRICING,
				    T1.RPYPRICINGMETHOD,
				    T1.RPYHIERARCHY,
				    T67.RULECODE GRCPRICINGMETHODDESC,
				    T68.RULECODE RPYPRICINGMETHODDESC,
				    T1.DROPLINEOD,
				    T1.DROPPINGMETHOD,
				    T1.RATECHGANYDAY,
				    T1.FINREPAYPFTONFRQ,
				    T1.ALWBPI,
				    T1.BPITREATMENT,
				    T1.PFTDUESCHON,
				    T1.PLANEMIHALW,
				    T1.PLANEMIHMETHOD,
				    T1.PLANEMIHMAXPERYEAR,
				    T1.PLANEMIHMAX,
				    T1.PLANEMIHLOCKPERIOD,
				    T1.PLANEMICPZ,
				    T1.UNPLANEMIHLOCKPERIOD,
				    T1.UNPLANEMICPZ,
				    T1.REAGECPZ,
				    T1.FDDLOCKPERIOD,
				    T1.ALWDRPYMETHODS,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.ROUNDINGMODE,
				    T1.ROUNDINGTARGET,
				    T1.FREQUENCYDAYS,
				    T1.QUICKDISB,
				    T1.ALWMAXDISBCHECKREQ,
				    T1.ALWREAGE,
				    T1.ALWUNPLANEMIHOLIDAY,
				    T1.PROFITCENTERID,
				    T69.PROFITCENTERCODE,
				    T69.PROFITCENTERDESC,
				    T1.PRODUCTCATEGORY,
				    T2.PRODUCTDESC FINCATEGORYDESC,
				    T1.DEVELOPERFINANCE,
				    T1.COSTOFFUNDS,
				    T1.CHEQUECAPTUREREQ,
				    T1.FINLTVCHECK,
				    T1.PARTIALLYSECURED,
				    T1.ALWADVEMI,
				    T1.ADVEMIMINTERMS,
				    T1.ADVEMIMAXTERMS,
				    T1.ADVEMIDFTTERMS,
				    T1.ADVEMISCHDMTHD,
				    T1.BPIPFTDAYSBASIS,
				    T1.ELIGIBILITYMETHODS,
				    T1.ALWHYBRIDRATE,
				    T1.FIXEDRATETENOR,
				    T1.ODMINCAPAMOUNT,
				    T1.ODRULECODE,
				    T1.ALWZEROINTACC,
				    T1.AUTOREJECTIONDAYS,
				    T1.TAXNOMAND,
				    T1.PUTCALLREQUIRED,
				    T1.GRCADVINTERSETREQ,
				    T1.GRCADVTYPE,
				    T1.GRCADVMINTERMS,
				    T1.GRCADVMAXTERMS,
				    T1.GRCADVDEFAULTTERMS,
				    T1.ADVINTERSETREQ,
				    T1.ADVTYPE,
				    T1.ADVMINTERMS,
				    T1.ADVMAXTERMS,
				    T1.ADVDEFAULTTERMS,
				    T1.ADVSTAGE,
				    T1.DSFREQ,
				    T1.CASHCOLLATERALREQ,
				    T1.TDSALLOWTOMODIFY,
				    T1.TDSAPPLICABLETO,
				    T1.ALWVAN,
				    T1.VANALLOCATIONMETHOD,
				    T1.ALLOWDRAWINGPOWER,
				    T1.ALLOWREVOLVING,
				    T1.ALWSANCTIONAMT,
				    T1.ALWSANCTIONAMTOVERRIDE,
				    T1.SANBSDSCHDLE,
				    T1.FINISRATERVWATGRCEND,
				    T1.SCHDONPMTCAL,
				    T1.AUTOAPPROVE,
				    T1.OCRREQUIRED,
				    T1.ALLOWEDOCRS,
				    T1.DEFAULTOCR,
				    T1.ALLOWEDLOANPURPOSES,
				    T1.SPECIFICLOANPURPOSES,
				    T1.ALWPLANNEDEMIINGRC,
				    T1.GRCADJREQ,
				    T1.GRCPERIODAFTRFULLDISB,
				    T1.AUTOINCRGRCENDDATE,
				    T1.GRCAUTOINCRMONTHS,
				    T1.MAXAUTOINCRALLOWED,
				    T1.THRLDTOMAINTAINGRCPRD,
				    T1.ALWLOANSPLIT,
				    T1.SPLITLOANTYPE,
				    T1.INSTBASEDSCHD,
				    T1.TDSTYPE,
				    T1.CALCOFSTEPS,
				    T1.STEPSAPPLIEDFOR,
				    T1.SUBVENTIONREQ,
					T1.OVERDRAFTTXNCHRGREQ,
					T1.OVERDRAFTTXNCHRGFEETYPE,
					T1.OVERDRAFTEXTGRACEDAYS,
					T1.OVERDRAFTCOLCHRGFEETYPE,
					T1.OVERDRAFTCOLAMT,
					T1.REGPROVRULE,
					T1.INTPROVRULE,
					T1.CLOSURETHRESHOLDLIMIT,
					T1.MAXFPPCALTYPE,
					T1.MAXFPPAMOUNT,
					T1.MAXFPPPER,
					T1.MAXFPPCALON,
					T1.PPLOCKINPERIOD,
					T1.ESLOCKINPERIOD,
					T1.MINPPCALTYPE,
					T1.MINPPAMOUNT,
					T1.MINPPPERCENTAGE,
					T1.MINPPCALON,
					T1.MAXPPCALTYPE,
					T1.MAXPPAMOUNT,
					T1.MAXPPPERCENTAGE,
					T1.MAXPPCALON,
					T1.ALLOWAUTOREFUND, 
					T1.MAXAUTOREFUND, 
					T1.MINAUTOREFUND,
					T1.NPARPYHIERARCHY,
					T1.ALLOWCANCELFIN,
					T1.WRITEOFFREPAYHRY, 
					T1.MATUREREPAYHRY, 
					T1.PRESENTMENTREPAYHRY
				FROM RMTFINANCETYPES_TEMP T1
				LEFT JOIN BMTPRODUCT T2 ON T1.FINCATEGORY = T2.PRODUCTCODE
				LEFT JOIN SMTDIVISIONDETAIL T48 ON T1.FINDIVISION = T48.DIVISIONCODE
				LEFT JOIN RULES T59 ON T1.DOWNPAYRULE = T59.RULEID
				LEFT JOIN RULES T67 ON T1.GRCPRICINGMETHOD = T67.RULEID
				LEFT JOIN RULES T68 ON T1.RPYPRICINGMETHOD = T68.RULEID
				LEFT JOIN PROFITCENTERS T69 ON T69.PROFITCENTERID = T1.PROFITCENTERID
				UNION ALL
				SELECT T1.FINTYPE,
				    T1.FINCATEGORY,
				    T1.FINTYPEDESC,
				    T1.FINCCY,
				    T1.FINDAYSCALTYPE,
				    T1.FINISGENREF,
				    T1.FINMAXAMOUNT,
				    T1.FINMINAMOUNT,
				    T1.FINDFTSTMTFRQ,
				    T1.FINISALWMD,
				    T1.FINSCHDMTHD,
				    T1.FINISALWGRACE,
				    T1.FINHISTRETENSION,
				    T1.EQUALREPAYMENT,
				    T1.FINRATETYPE,
				    T1.FINBASERATE,
				    T1.FINSPLRATE,
				    T1.FININTRATE,
				    T1.FINMINRATE,
				    T1.FINMAXRATE,
				    T1.FINDFTINTFRQ,
				    T1.FINISINTCPZ,
				    T1.FINCPZFRQ,
				    T1.FINISRVWALW,
				    T1.FINRVWFRQ,
				    T1.FINGRCRATETYPE,
				    T1.FINGRCBASERATE,
				    T1.FINGRCSPLRATE,
				    T1.FINGRCINTRATE,
				    T1.FINGRCMINRATE,
				    T1.FINGRCMAXRATE,
				    T1.FINGRCDFTINTFRQ,
				    T1.FINGRCISINTCPZ,
				    T1.FINGRCCPZFRQ,
				    T1.FINGRCISRVWALW,
				    T1.FINGRCRVWFRQ,
				    T1.FINMINTERM,
				    T1.FINMAXTERM,
				    T1.FINDFTTERMS,
				    T1.FINRPYFRQ,
				    T1.FINREPAYMETHOD,
				    T1.FINISALWPARTIALRPY,
				    T1.FINISALWDIFFERMENT,
				    T1.FINMAXDIFFERMENT,
				    T1.FINISALWEARLYRPY,
				    T1.FINISALWEARLYSETTLE,
				    T1.FINODRPYTRIES,
				    T1.FINEARLYPAYRULE,
				    T1.FINEARLYSETTLERULE,
				    T1.FINISACTIVE,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T1.STEPFINANCE,
				    T1.STEPPINGMANDATORY,
				    T1.ALWMANUALSTEPS,
				    T1.ALWDSTEPPOLICIES,
				    T1.DFTSTEPPOLICY,
				    T1.FINISDWPAYREQUIRED,
				    T1.FINRVWRATEAPPLFOR,
				    T1.FINALWRATECHANGEANYDATE,
				    T1.FINISINTCPZATGRCEND,
				    T1.FINELGRULECODE,
				    T1.LIMITELGRULECODE,
				    T1.FINSCHCALCODEONRVW,
				    T1.ALWPLANDEFERMENT,
				    T1.PLANDEFERCOUNT,
				    T1.FINASSETTYPE,
				    T1.FINISALWGRCREPAY,
				    T1.FINGRCSCHDMTHD,
				    T1.FINGRCMARGIN,
				    T1.FINMARGIN,
				    T1.FINSCHEDULEON,
				    T1.FINGRCSCHEDULEON,
				    T1.FINCOMMITMENTREQ,
				    T1.FINCOLLATERALREQ,
				    T1.OVERRIDELIMIT,
				    T1.LIMITREQUIRED,
				    T1.FINCOMMITMENTOVRRIDE,
				    T1.FINCOLLATERALOVRRIDE,
				    T1.FINPFTUNCHANGED,
				    T1.APPLYODPENALTY,
				    T1.ODINCGRCDAYS,
				    T1.ODCHARGETYPE,
				    T1.ODGRACEDAYS,
				    T1.ODCHARGECALON,
				    T1.ODCHARGEAMTORPERC,
				    T1.ODALLOWWAIVER,
				    T1.ODMAXWAIVERPERC,
				    T1.FINDIVISION,
				    T48.DIVISIONCODEDESC LOVDESCFINDIVISIONNAME,
				    T48.ENTITYCODE LOVDESCENTITYCODE,
				    T1.PRODUCT,
				    T1.STARTDATE,
				    T1.ENDDATE,
				    T1.FINTYPEDESC LOVDESCPROMOFINTYPEDESC,
				    T1.REMARKS,
				    T1.ALWEARLYPAYMETHODS,
				    T1.PASTDUEPFTCALMTHD,
				    T1.PASTDUEPFTMARGIN,
				    T1.DOWNPAYRULE,
				    T59.RULECODE DOWNPAYRULECODE,
				    T59.RULECODEDESC DOWNPAYRULEDESC,
				    T1.FINSUSPTRIGGER,
				    T1.FINSUSPREMARKS,
				    T1.ALWMULTIPARTYDISB,
				    T1.COLLATERALTYPE,
				    T1.TDSAPPLICABLE,
				    T1.MANUALSCHEDULE,
				    T1.APPLYGRCPRICING,
				    T1.GRCPRICINGMETHOD,
				    T1.APPLYRPYPRICING,
				    T1.RPYPRICINGMETHOD,
				    T1.RPYHIERARCHY,
				    T67.RULECODE GRCPRICINGMETHODDESC,
				    T68.RULECODE RPYPRICINGMETHODDESC,
				    T1.DROPLINEOD,
				    T1.DROPPINGMETHOD,
				    T1.RATECHGANYDAY,
				    T1.FINREPAYPFTONFRQ,
				    T1.ALWBPI,
				    T1.BPITREATMENT,
				    T1.PFTDUESCHON,
				    T1.PLANEMIHALW,
				    T1.PLANEMIHMETHOD,
				    T1.PLANEMIHMAXPERYEAR,
				    T1.PLANEMIHMAX,
				    T1.PLANEMIHLOCKPERIOD,
				    T1.PLANEMICPZ,
				    T1.UNPLANEMIHLOCKPERIOD,
				    T1.UNPLANEMICPZ,
				    T1.REAGECPZ,
				    T1.FDDLOCKPERIOD,
				    T1.ALWDRPYMETHODS,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.ROUNDINGMODE,
				    T1.ROUNDINGTARGET,
				    T1.FREQUENCYDAYS,
				    T1.QUICKDISB,
				    T1.ALWMAXDISBCHECKREQ,
				    T1.ALWREAGE,
				    T1.ALWUNPLANEMIHOLIDAY,
				    T1.PROFITCENTERID,
				    T69.PROFITCENTERCODE,
				    T69.PROFITCENTERDESC,
				    T1.PRODUCTCATEGORY,
				    T2.PRODUCTDESC FINCATEGORYDESC,
				    T1.DEVELOPERFINANCE,
				    T1.COSTOFFUNDS,
				    T1.CHEQUECAPTUREREQ,
				    T1.FINLTVCHECK,
				    T1.PARTIALLYSECURED,
				    T1.ALWADVEMI,
				    T1.ADVEMIMINTERMS,
				    T1.ADVEMIMAXTERMS,
				    T1.ADVEMIDFTTERMS,
				    T1.ADVEMISCHDMTHD,
				    T1.BPIPFTDAYSBASIS,
				    T1.ELIGIBILITYMETHODS,
				    T1.ALWHYBRIDRATE,
				    T1.FIXEDRATETENOR,
				    T1.ODMINCAPAMOUNT,
				    T1.ODRULECODE,
				    T1.ALWZEROINTACC,
				    T1.AUTOREJECTIONDAYS,
				    T1.TAXNOMAND,
				    T1.PUTCALLREQUIRED,
				    T1.GRCADVINTERSETREQ,
				    T1.GRCADVTYPE,
				    T1.GRCADVMINTERMS,
				    T1.GRCADVMAXTERMS,
				    T1.GRCADVDEFAULTTERMS,
				    T1.ADVINTERSETREQ,
				    T1.ADVTYPE,
				    T1.ADVMINTERMS,
				    T1.ADVMAXTERMS,
				    T1.ADVDEFAULTTERMS,
				    T1.ADVSTAGE,
				    T1.DSFREQ,
				    T1.CASHCOLLATERALREQ,
				    T1.TDSALLOWTOMODIFY,
				    T1.TDSAPPLICABLETO,
				    T1.ALWVAN,
				    T1.VANALLOCATIONMETHOD,
				    T1.ALLOWDRAWINGPOWER,
				    T1.ALLOWREVOLVING,
				    T1.ALWSANCTIONAMT,
				    T1.ALWSANCTIONAMTOVERRIDE,
				    T1.SANBSDSCHDLE,
				    T1.FINISRATERVWATGRCEND,
				    T1.SCHDONPMTCAL,
				    T1.AUTOAPPROVE,
				    T1.OCRREQUIRED,
				    T1.ALLOWEDOCRS,
				    T1.DEFAULTOCR,
				    T1.ALLOWEDLOANPURPOSES,
				    T1.SPECIFICLOANPURPOSES,
				    T1.ALWPLANNEDEMIINGRC,
				    T1.GRCADJREQ,
				    T1.GRCPERIODAFTRFULLDISB,
				    T1.AUTOINCRGRCENDDATE,
				    T1.GRCAUTOINCRMONTHS,
				    T1.MAXAUTOINCRALLOWED,
				    T1.THRLDTOMAINTAINGRCPRD,
				    T1.ALWLOANSPLIT,
				    T1.SPLITLOANTYPE,
				    T1.INSTBASEDSCHD,
				    T1.TDSTYPE,
				    T1.CALCOFSTEPS,
				    T1.STEPSAPPLIEDFOR,
				    T1.SUBVENTIONREQ,
					T1.OVERDRAFTTXNCHRGREQ,
					T1.OVERDRAFTTXNCHRGFEETYPE,
					T1.OVERDRAFTEXTGRACEDAYS,
					T1.OVERDRAFTCOLCHRGFEETYPE,
					T1.OVERDRAFTCOLAMT,
					T1.REGPROVRULE,
					T1.INTPROVRULE,
					T1.CLOSURETHRESHOLDLIMIT,
					T1.MAXFPPCALTYPE,
					T1.MAXFPPAMOUNT,
					T1.MAXFPPPER,
					T1.MAXFPPCALON,
					T1.PPLOCKINPERIOD,
					T1.ESLOCKINPERIOD,
					T1.MINPPCALTYPE,
					T1.MINPPAMOUNT,
					T1.MINPPPERCENTAGE,
					T1.MINPPCALON,
					T1.MAXPPCALTYPE,
					T1.MAXPPAMOUNT,
					T1.MAXPPPERCENTAGE,
					T1.MAXPPCALON,
					T1.ALLOWAUTOREFUND, 
					T1.MAXAUTOREFUND, 
					T1.MINAUTOREFUND,
					T1.NPARPYHIERARCHY,
					T1.ALLOWCANCELFIN,
					T1.WRITEOFFREPAYHRY, 
					T1.MATUREREPAYHRY, 
					T1.PRESENTMENTREPAYHRY 
					FROM RMTFINANCETYPES T1
					LEFT JOIN BMTPRODUCT T2 ON T1.FINCATEGORY = T2.PRODUCTCODE
					LEFT JOIN SMTDIVISIONDETAIL T48 ON T1.FINDIVISION = T48.DIVISIONCODE
					LEFT JOIN RULES T59 ON T1.DOWNPAYRULE = T59.RULEID
					LEFT JOIN RULES T67 ON T1.GRCPRICINGMETHOD = T67.RULEID
					LEFT JOIN RULES T68 ON T1.RPYPRICINGMETHOD = T68.RULEID
					LEFT JOIN PROFITCENTERS T69 ON T69.PROFITCENTERID = T1.PROFITCENTERID
					WHERE NOT EXISTS (SELECT 1 FROM RMTFINANCETYPES_TEMP WHERE RMTFINANCETYPES_TEMP.FINTYPE = T1.FINTYPE)
		 
		 ]]> 
		</createView> 
	</changeSet> 
		 
	<changeSet id="ST#730:TK#2762:12_post" author="Divya.A" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_view');
		 	]]>
		</sql>
	</changeSet>
		
	 <changeSet id="ST#730:TK#2762:13_pre" author="Divya.A" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_orgview');
		 	]]>
		</sql>
	 </changeSet>
		
	 <changeSet id="ST#730:TK#2762:13" author="Divya.A"> 
		<createView viewName="rmtfinancetypes_orgview" replaceIfExists="true"> 
		<![CDATA[ 
			SELECT T1.FINTYPE,
				    T1.FINCATEGORY,
				    T1.FINTYPEDESC,
				    T1.FINCCY,
				    T1.FINDAYSCALTYPE,
				    T1.FINISGENREF,
				    T1.FINMAXAMOUNT,
				    T1.FINMINAMOUNT,
				    T1.FINISALWMD,
				    T1.FINSCHDMTHD,
				    T1.FINISALWGRACE,
				    T1.EQUALREPAYMENT,
				    T1.FINRATETYPE,
				    T1.FINBASERATE,
				    T1.FINSPLRATE,
				    T1.FININTRATE,
				    T1.FINMINRATE,
				    T1.FINMAXRATE,
				    T1.FINDFTINTFRQ,
				    T1.FINISINTCPZ,
				    T1.FINCPZFRQ,
				    T1.FINISRVWALW,
				    T1.FINRVWFRQ,
				    T1.FINGRCRATETYPE,
				    T1.FINGRCBASERATE,
				    T1.FINGRCSPLRATE,
				    T1.FINGRCINTRATE,
				    T1.FINGRCMINRATE,
				    T1.FINGRCMAXRATE,
				    T1.FINGRCDFTINTFRQ,
				    T1.FINGRCISINTCPZ,
				    T1.FINGRCCPZFRQ,
				    T1.FINGRCISRVWALW,
				    T1.FINGRCRVWFRQ,
				    T1.FINMINTERM,
				    T1.FINMAXTERM,
				    T1.FINDFTTERMS,
				    T1.FINRPYFRQ,
				    T1.FINREPAYMETHOD,
				    T1.FINISALWDIFFERMENT,
				    T1.FINMAXDIFFERMENT,
				    T1.FINISACTIVE,
				    T1.STEPFINANCE,
				    T1.STEPPINGMANDATORY,
				    T1.ALWMANUALSTEPS,
				    T1.ALWDSTEPPOLICIES,
				    T1.DFTSTEPPOLICY,
				    T1.FINISDWPAYREQUIRED,
				    T1.FINRVWRATEAPPLFOR,
				    T1.FINALWRATECHANGEANYDATE,
				    T1.FINISINTCPZATGRCEND,
				    T1.FINSCHCALCODEONRVW,
				    T1.ALWPLANDEFERMENT,
				    T1.PLANDEFERCOUNT,
				    T1.FINISALWGRCREPAY,
				    T1.FINGRCSCHDMTHD,
				    T1.FINGRCMARGIN,
				    T1.FINMARGIN,
				    T1.FINCOMMITMENTREQ,
				    T1.FINCOLLATERALREQ,
				    T1.OVERRIDELIMIT,
				    T1.LIMITREQUIRED,
				    T1.FINCOMMITMENTOVRRIDE,
				    T1.FINCOLLATERALOVRRIDE,
				    T1.FINREPAYPFTONFRQ,
				    T1.FINPFTUNCHANGED,
				    T1.APPLYODPENALTY,
				    T1.ODINCGRCDAYS,
				    T1.ODCHARGETYPE,
				    T1.ODGRACEDAYS,
				    T1.ODCHARGECALON,
				    T1.ODCHARGEAMTORPERC,
				    T1.ODALLOWWAIVER,
				    T1.ODMAXWAIVERPERC,
				    T1.FINDIVISION,
				    T3.DIVISIONCODEDESC LOVDESCFINDIVISIONNAME,
				    T1.PRODUCT,
				    T1.STARTDATE,
				    T1.ENDDATE,
				    T1.FINTYPEDESC LOVDESCPROMOFINTYPEDESC,
				    T1.REMARKS,
				    T4.POLICYDESC LOVDESCDFTSTEPPOLICYNAME,
				    T1.PASTDUEPFTCALMTHD,
				    T1.PASTDUEPFTMARGIN,
				    T1.DOWNPAYRULE,
				    T1.ALWMULTIPARTYDISB,
				    T1.COLLATERALTYPE,
				    T1.TDSAPPLICABLE,
				    T5.RULECODE DOWNPAYRULECODE,
				    T5.RULECODEDESC DOWNPAYRULEDESC,
				    T1.APPLYGRCPRICING,
				    T1.APPLYRPYPRICING,
				    T6.RULECODE GRCPRICINGMETHODDESC,
				    T7.RULECODE RPYPRICINGMETHODDESC,
				    T1.DROPLINEOD,
				    T1.DROPPINGMETHOD,
				    T1.RATECHGANYDAY,
				    T4.STEPTYPE DFTSTEPPOLICYTYPE,
				    T1.MANUALSCHEDULE,
				    T1.ALWBPI,
				    T1.BPITREATMENT,
				    T1.PFTDUESCHON,
				    T1.PLANEMIHALW,
				    T1.PLANEMIHMETHOD,
				    T1.PLANEMIHMAXPERYEAR,
				    T1.PLANEMIHMAX,
				    T1.PLANEMIHLOCKPERIOD,
				    T1.PLANEMICPZ,
				    T1.UNPLANEMIHLOCKPERIOD,
				    T1.UNPLANEMICPZ,
				    T1.REAGECPZ,
				    T1.FDDLOCKPERIOD,
				    T1.ALWDRPYMETHODS,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.ROUNDINGMODE,
				    T1.ROUNDINGTARGET,
				    T1.FREQUENCYDAYS,
				    T1.QUICKDISB,
				    T1.ALWREAGE,
				    T1.ALWUNPLANEMIHOLIDAY,
				    T1.ALWMAXDISBCHECKREQ,
				    T1.PRODUCTCATEGORY,
				    T1.RPYHIERARCHY,
				    T1.DEVELOPERFINANCE,
				    T3.ENTITYCODE LOVDESCENTITYCODE,
				    T8.ENTITYDESC LOVDESCENTITYDESC,
				    T1.COSTOFFUNDS,
				    T1.CHEQUECAPTUREREQ,
				    T1.FINLTVCHECK,
				    T1.PARTIALLYSECURED,
				    T1.ALWADVEMI,
				    T1.ADVEMIMINTERMS,
				    T1.ADVEMIMAXTERMS,
				    T1.ADVEMIDFTTERMS,
				    T1.ADVEMISCHDMTHD,
				    T1.BPIPFTDAYSBASIS,
				    T1.ELIGIBILITYMETHODS,
				    T1.ALWHYBRIDRATE,
				    T1.FIXEDRATETENOR,
				    T1.ODMINCAPAMOUNT,
				    T1.ODRULECODE,
				    T1.ALWZEROINTACC,
				    T1.FINISALWPARTIALRPY,
				    T1.AUTOREJECTIONDAYS,
				    T1.TAXNOMAND,
				    T1.PUTCALLREQUIRED,
				    T1.GRCADVINTERSETREQ,
				    T1.GRCADVTYPE,
				    T1.GRCADVMINTERMS,
				    T1.GRCADVMAXTERMS,
				    T1.GRCADVDEFAULTTERMS,
				    T1.ADVINTERSETREQ,
				    T1.ADVTYPE,
				    T1.ADVMINTERMS,
				    T1.ADVMAXTERMS,
				    T1.ADVDEFAULTTERMS,
				    T1.ADVSTAGE,
				    T1.DSFREQ,
				    T1.CASHCOLLATERALREQ,
				    T1.ALWEARLYPAYMETHODS,
				    T1.FINSCHEDULEON,
				    T1.TDSALLOWTOMODIFY,
				    T1.TDSAPPLICABLETO,
				    T1.ALWVAN,
				    T1.VANALLOCATIONMETHOD,
				    T1.ALLOWDRAWINGPOWER,
				    T1.ALLOWREVOLVING,
				    T1.ALWSANCTIONAMT,
				    T1.ALWSANCTIONAMTOVERRIDE,
				    T1.SANBSDSCHDLE,
				    T1.FINISRATERVWATGRCEND,
				    T1.SCHDONPMTCAL,
				    T1.AUTOAPPROVE,
				    T1.OCRREQUIRED,
				    T1.ALLOWEDOCRS,
				    T1.DEFAULTOCR,
				    T1.ALLOWEDLOANPURPOSES,
				    T1.SPECIFICLOANPURPOSES,
				    T1.ALWPLANNEDEMIINGRC,
				    T1.GRCADJREQ,
				    T1.GRCPERIODAFTRFULLDISB,
				    T1.AUTOINCRGRCENDDATE,
				    T1.GRCAUTOINCRMONTHS,
				    T1.MAXAUTOINCRALLOWED,
				    T1.THRLDTOMAINTAINGRCPRD,
				    T1.ALWLOANSPLIT,
				    T1.SPLITLOANTYPE,
				    T1.INSTBASEDSCHD,
				    T1.TDSTYPE,
				    T1.CALCOFSTEPS,
				    T1.STEPSAPPLIEDFOR,
				    T1.SUBVENTIONREQ,
					T1.OVERDRAFTTXNCHRGREQ,
					T1.OVERDRAFTTXNCHRGFEETYPE,
					T1.OVERDRAFTEXTGRACEDAYS,
					T1.OVERDRAFTCOLCHRGFEETYPE,
					T1.OVERDRAFTCOLAMT,
					T1.REGPROVRULE,
					T1.INTPROVRULE,
					T1.CLOSURETHRESHOLDLIMIT,
					T1.MAXFPPCALTYPE,
					T1.MAXFPPAMOUNT,
					T1.MAXFPPPER,
					T1.MAXFPPCALON,
					T1.PPLOCKINPERIOD,
					T1.ESLOCKINPERIOD,
					T1.MINPPCALTYPE,
					T1.MINPPAMOUNT,
					T1.MINPPPERCENTAGE,
					T1.MINPPCALON,
					T1.MAXPPCALTYPE,
					T1.MAXPPAMOUNT,
					T1.MAXPPPERCENTAGE,
					T1.MAXPPCALON,
					T1.ALLOWAUTOREFUND, 
					T1.MAXAUTOREFUND, 
					T1.MINAUTOREFUND,
					T1.NPARPYHIERARCHY,
					T1.ALLOWCANCELFIN,
					T1.WRITEOFFREPAYHRY, 
					T1.MATUREREPAYHRY, 
					T1.PRESENTMENTREPAYHRY 
					FROM RMTFINANCETYPES T1
					INNER JOIN SMTDIVISIONDETAIL T3 ON T1.FINDIVISION = T3.DIVISIONCODE
					LEFT JOIN STEPPOLICYHEADER T4 ON T1.DFTSTEPPOLICY = T4.POLICYCODE
					LEFT JOIN RULES T5 ON T1.DOWNPAYRULE = T5.RULEID
					LEFT JOIN RULES T6 ON T1.GRCPRICINGMETHOD = T6.RULEID
					LEFT JOIN RULES T7 ON T1.RPYPRICINGMETHOD = T7.RULEID
					LEFT JOIN ENTITY T8 ON T3.ENTITYCODE = T8.ENTITYCODE
			]]> 
		</createView> 
	</changeSet> 
		
	<changeSet id="ST#730:TK#2762:13_post" author="Divya.A" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_orgview');
		 	]]>
		</sql>
	</changeSet>
		
	<changeSet id="ST#730:TK#2762:14_pre" author="Divya.A" dbms="postgresql">
				<sql>
					<![CDATA[
						select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_aeview');
				 	]]>
				</sql>
	</changeSet>
			
	<changeSet id="ST#730:TK#2762:14" author="Divya.A"> 
		<createView viewName="rmtfinancetypes_aeview" replaceIfExists="true"> 
		<![CDATA[ 
			SELECT T1.FINTYPE,
				    '' FINDEFFREQ,
				    T1.FINCCY,
				    T1.FINCATEGORY,
				    T1.DEVELOPERFINANCE,
				    T1.PARTIALLYSECURED,
				    T1.INSTBASEDSCHD,
				    T1.TDSTYPE,
				    T1.SUBVENTIONREQ,
					T1.CLOSURETHRESHOLDLIMIT,
					T1.MAXFPPCALTYPE,
					T1.MAXFPPAMOUNT,
					T1.MAXFPPPER,
					T1.MAXFPPCALON,
					T1.PPLOCKINPERIOD,
					T1.ESLOCKINPERIOD,
					T1.MINPPCALTYPE,
					T1.MINPPAMOUNT,
					T1.MINPPPERCENTAGE,
					T1.MINPPCALON,
					T1.MAXPPCALTYPE,
					T1.MAXPPAMOUNT,
					T1.MAXPPPERCENTAGE,
					T1.MAXPPCALON,
					T1.ALLOWAUTOREFUND, 
					T1.MAXAUTOREFUND, 
					T1.MINAUTOREFUND,
					T1.NPARPYHIERARCHY,
					T1.ALLOWCANCELFIN,
					T1.WRITEOFFREPAYHRY, 
					T1.MATUREREPAYHRY, 
					T1.PRESENTMENTREPAYHRY
					FROM RMTFINANCETYPES T1
				]]> 
		</createView> 
	</changeSet> 
		
	<changeSet id="ST#730:TK#2762:14_post" author="Divya.A" dbms="postgresql">
			<sql>
				<![CDATA[
						select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_aeview');
				 ]]>
			</sql>
	</changeSet>

	<changeSet id="ST#730TK#4755.01" author="Vijayakumar.k">
		<createSequence sequenceName="SEQAUTO_WRITEOFF_LOAN_TYPES" />
	</changeSet>

	<changeSet id="ST#730TK#4755.02" author="Vijayakumar.k">
		<comment>New Table: AUTO_WRITEOFF_LOANTYPES_TEMP [MASTER]</comment>
		<createTable tableName="AUTO_WRITEOFF_LOANTYPES_TEMP">
			<column name="ID" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="PSLCODE" type="varchar(8)">
				<constraints nullable="false" />
			</column>
			<column name="LoanType" type="varchar(8)">
				<constraints nullable="false" />
			</column>
			<column name="DPDDAYS" type="int">
				<constraints nullable="false" />
			</column>
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkflowId" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet id="ST#730TK#4755.03" author="Vijayakumar.k">
		<addPrimaryKey tableName="AUTO_WRITEOFF_LOANTYPES_TEMP" columnNames="ID"
			constraintName="PK_AUTO_WRITEOF_ID" />
	</changeSet>

	<changeSet id="ST#730TK#4755.04" author="Vijayakumar.k">
		<addForeignKeyConstraint constraintName="FK_AUTO_WRITE_LT"
			referencedTableName="RMTFINANCETYPES" referencedColumnNames="FINTYPE" baseTableName="AUTO_WRITEOFF_LOANTYPES_TEMP"
			baseColumnNames="LoanType" />
	</changeSet>

	<changeSet id="ST#730TK#4755.05" author="Vijayakumar.k">
		<addUniqueConstraint tableName="AUTO_WRITEOFF_LOANTYPES_TEMP" columnNames="LoanType, PSLCODE"
			constraintName="UK_FK_AUTO_WRITE_LT_PSL" />
	</changeSet>

	<changeSet id="ST#730TK#4755.06" author="Vijayakumar.k">
		<comment>New Table: AUTO_WRITEOFF_LOANTYPES[Master]</comment>
		<createTable tableName="AUTO_WRITEOFF_LOANTYPES">
			<column name="ID" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="PSLCODE" type="varchar(8)">
				<constraints nullable="false" />
			</column>
			<column name="LoanType" type="varchar(8)">
				<constraints nullable="false" />
			</column>
			<column name="DPDDAYS" type="int">
				<constraints nullable="false" />
			</column>
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkflowId" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet id="ST#730TK#4755.07" author="Vijayakumar.k">
		<addPrimaryKey tableName="AUTO_WRITEOFF_LOANTYPES" columnNames="ID" constraintName="PK_AUTO_WRITE_ID" />
	</changeSet>

	<changeSet id="ST#730TK#4755.08" author="Vijayakumar.k">
		<addForeignKeyConstraint constraintName="FK_AUTO_WRITE_PSLCODE_LT"
			referencedTableName="RMTFINANCETYPES" referencedColumnNames="FINTYPE" baseTableName="AUTO_WRITEOFF_LOANTYPES"
			baseColumnNames="LoanType" />
	</changeSet>
	<changeSet id="ST#730TK#4755.09" author="Vijayakumar.k">
		<addUniqueConstraint tableName="AUTO_WRITEOFF_LOANTYPES" columnNames="LoanType,PSLCODE"
			constraintName="UK_FK_AUTO_WRITE_PSLCODE_LT" />
	</changeSet>

	<changeSet id="ST#730TK#4755.10" author="Vijayakumar.k">
		<createView viewName="AUTO_WRITEOFF_LOANTYPES_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ID,
					   T1.LoanType,
					   T1.PSLCODE,
					   T1.DPDDAYS,
					   T2.FinCategory,
					   T2.FinTypeDesc,
					   T3.DESCRIPTION PSLCODEDESC,
					   T1.Version,
					   T1.LastMntBy,
					   T1.LastMntOn,
					   T1.RecordStatus,
					   T1.RoleCode,
					   T1.NextRoleCode,
					   T1.TaskId,
					   T1.NextTaskId, 
	      			   T1.RecordType,
	      			   T1.WorkflowId
		  			FROM AUTO_WRITEOFF_LOANTYPES_TEMP T1
		  			INNER JOIN RMTFINANCETYPES T2 on T2.FinType = T1.LoanType
					INNER JOIN PSLCATEGORY T3 on T3.CODE = T1.PSLCODE
		  		UNION ALL
		  		SELECT T1.ID,
					   T1.LoanType,
					   T1.PSLCODE,
					   T1.DPDDAYS,
					   T2.FinCategory,
					   T2.FinTypeDesc,
					   T3.DESCRIPTION PSLCODEDESC,
					   T1.Version,
					   T1.LastMntBy,
					   T1.LastMntOn,
					   T1.RecordStatus,
					   T1.RoleCode,
					   T1.NextRoleCode,
					   T1.TaskId,
					   T1.NextTaskId, 
	      			   T1.RecordType,
	      			   T1.WorkflowId
		  			FROM AUTO_WRITEOFF_LOANTYPES T1
		  			INNER JOIN RMTFINANCETYPES T2 on T2.FinType = T1.LoanType
					INNER JOIN PSLCATEGORY T3 on T3.CODE = T1.PSLCODE
		  		WHERE NOT EXISTS (SELECT 1 FROM AUTO_WRITEOFF_LOANTYPES_TEMP WHERE Id = T1.Id)
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#730TK#4755.11" author="Vijayakumar.k">
		<createView viewName="AUTO_WRITEOFF_LOANTYPES_LVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ID,
					   T1.LoanType,
					   T1.PSLCODE,
					   T1.DPDDAYS,
					   T1.Version,
					   T1.LastMntBy,
					   T1.LastMntOn,
					   T1.RecordStatus,
					   T1.RoleCode,
					   T1.NextRoleCode,
					   T1.TaskId,
					   T1.NextTaskId, 
	      			   T1.RecordType,
	      			   T1.WorkflowId
	      			   FROM AUTO_WRITEOFF_LOANTYPES_TEMP T1
		  			where T1.ID in 
 				(SELECT max(Id) from AUTO_WRITEOFF_LOANTYPES_TEMP group by LoanType)
		  		UNION ALL
		  		SELECT T1.ID,
					   T1.LoanType,
					   T1.PSLCODE,
					   T1.DPDDAYS,
					   T1.Version,
					   T1.LastMntBy,
					   T1.LastMntOn,
					   T1.RecordStatus,
					   T1.RoleCode,
					   T1.NextRoleCode,
					   T1.TaskId,
					   T1.NextTaskId, 
	      			   T1.RecordType,
	      			   T1.WorkflowId
		  			FROM AUTO_WRITEOFF_LOANTYPES T1
		  		where T1.ID in 
 				(SELECT max(Id) from AUTO_WRITEOFF_LOANTYPES group by LoanType)
 				 and NOT EXISTS (SELECT 1 FROM AUTO_WRITEOFF_LOANTYPES_TEMP where ID in 
				(SELECT max(Id) from AUTO_WRITEOFF_LOANTYPES_TEMP group by LoanType) and LoanType = T1.LoanType)
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#730TK#4755.12" author="Vijayakumar.k">
		<createView viewName="AUTO_WRITEOFF_LOANTYPES_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ID,
					   T1.LoanType,
					   T1.PSLCODE,
					   T1.DPDDAYS,
					   T2.FinCategory,
					   T2.FinTypeDesc,
					   T3.DESCRIPTION PSLCODEDESC,
					   T1.Version,
					   T1.LastMntBy,
					   T1.LastMntOn,
					   T1.RecordStatus,
					   T1.RoleCode,
					   T1.NextRoleCode,
					   T1.TaskId,
					   T1.NextTaskId, 
	      			   T1.RecordType,
	      			   T1.WorkflowId
		  			FROM AUTO_WRITEOFF_LOANTYPES T1
		  			INNER JOIN RMTFINANCETYPES T2 on T2.FinType = T1.LoanType	
					INNER JOIN PSLCATEGORY T3 on T3.CODE = T1.PSLCODE
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#730TK#4755.13" author="Vijayakumar.k">
		<sql>
			<![CDATA[
			
				INSERT INTO SECROLES  VALUES ((select max(roleid)+1 from secroles), 1, 'LOANTYPE_AUTO_WRITE_OFF_MAKER', 		'Role for auto WRITEOFF maker',	NULL, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL,NULL,NULL,NULL,NULL,0) ;
				INSERT INTO SECROLES  VALUES ((select max(roleid)+1 from secroles), 1, 'LOANTYPE_AUTO_WRITE_OFF_APPROVER', 	'Role for auto WRITEOFF approver',	NULL, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL,NULL,NULL,NULL,NULL,0) ;
				
				INSERT INTO SECGROUPS values ((SELECT MAX(GRPID)+1 FROM SECGROUPS_VIEW), 'LOANTYPE_AUTO_WRITE_OFF_MAKER', 'WF Maker Group',  1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPS values ((SELECT MAX(GRPID)+1 FROM SECGROUPS_VIEW), 'LOANTYPE_AUTO_WRITE_OFF_APPROVER', 'WF Approver Group',  1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				Insert into SECRIGHTS values ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS_VIEW),3,'LoanTypeWriteOffDialog_LoanType','LoanTypeWriteOffDialog',0,1000,CURRENT_TIMESTAMP, 'Approved',null,null,null,null,null,0);
				Insert into SECRIGHTS values ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS_VIEW),2,'button_LoanTypeWriteOffDialog_btnNew','LoanTypeWriteOffDialog',0,1000,CURRENT_TIMESTAMP, 'Approved',null,null,null,null,null,0);
				Insert into SECRIGHTS values ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS_VIEW),2,'button_LoanTypeWriteOffDialog_btnEdit','LoanTypeWriteOffDialog',0,1000,CURRENT_TIMESTAMP, 'Approved',null,null,null,null,null,0);
				Insert into SECRIGHTS values ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS_VIEW),2,'button_LoanTypeWriteOffDialog_btnDelete','LoanTypeWriteOffDialog',0,1000,CURRENT_TIMESTAMP, 'Approved',null,null,null,null,null,0);
				Insert into SECRIGHTS values ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS_VIEW),2,'button_LoanTypeWriteOffDialog_btnSave','LoanTypeWriteOffDialog',0,1000,CURRENT_TIMESTAMP, 'Approved',null,null,null,null,null,0);
				Insert into SECRIGHTS values ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS_VIEW),0,'menu_Item_LoanTypeWriteOff','MENU',0,1000,CURRENT_TIMESTAMP, 'Approved',null,null,null,null,null,0);
				Insert into SECRIGHTS values ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS_VIEW),2,'button_LoanTypeWriteOffDialog_btnPSLCode','LoanTypeWriteOffDialog',0,1000,CURRENT_TIMESTAMP, 'Approved',null,null,null,null,null,0);
			
				Insert into SECGROUPRIGHTS values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS_VIEW),(SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOANTYPE_AUTO_WRITE_OFF_MAKER'),(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'LoanTypeWriteOffDialog_LoanType'),1,0,1000,CURRENT_TIMESTAMP,'Approved',null,null,null,null,null,0);
				Insert into SECGROUPRIGHTS values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS_VIEW),(SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOANTYPE_AUTO_WRITE_OFF_MAKER'),(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_LoanTypeWriteOffDialog_btnNew'),1,0,1000,CURRENT_TIMESTAMP,'Approved',null,null,null,null,null,0);
				Insert into SECGROUPRIGHTS values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS_VIEW),(SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOANTYPE_AUTO_WRITE_OFF_MAKER'),(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_LoanTypeWriteOffDialog_btnEdit'),1,0,1000,CURRENT_TIMESTAMP,'Approved',null,null,null,null,null,0);
				Insert into SECGROUPRIGHTS values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS_VIEW),(SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOANTYPE_AUTO_WRITE_OFF_MAKER'),(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_LoanTypeWriteOffDialog_btnDelete'),1,0,1000,CURRENT_TIMESTAMP,'Approved',null,null,null,null,null,0);
				Insert into SECGROUPRIGHTS values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS_VIEW),(SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOANTYPE_AUTO_WRITE_OFF_MAKER'),(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_LoanTypeWriteOffDialog_btnSave'),1,0,1000,CURRENT_TIMESTAMP,'Approved',null,null,null,null,null,0);
				Insert into SECGROUPRIGHTS values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS_VIEW),(SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOANTYPE_AUTO_WRITE_OFF_MAKER'),(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_LoanTypeWriteOff'),1,0,1000,CURRENT_TIMESTAMP,'Approved',null,null,null,null,null,0);
				Insert into SECGROUPRIGHTS values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS_VIEW),(SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOANTYPE_AUTO_WRITE_OFF_MAKER'),(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_LoanTypeWriteOffDialog_btnPSLCode'),1,0,1000,CURRENT_TIMESTAMP,'Approved',null,null,null,null,null,0);
			
				Insert into SECGROUPRIGHTS values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS_VIEW),(SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOANTYPE_AUTO_WRITE_OFF_APPROVER'),(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_LoanTypeWriteOFFDialog_btnSave'),1,0,1000,CURRENT_TIMESTAMP,'Approved',null,null,null,null,null,0);
				Insert into SECGROUPRIGHTS values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS_VIEW),(SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOANTYPE_AUTO_WRITE_OFF_APPROVER'),(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_LoanTypeWriteOff'),1,0,1000,CURRENT_TIMESTAMP,'Approved',null,null,null,null,null,0);
				
				Insert into SECROLEGROUPS values ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS_VIEW),(SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOANTYPE_AUTO_WRITE_OFF_MAKER'),(SELECT ROLEID FROM SECROLES WHERE ROLECD = 'MSTGRP1_MAKER'),0,1000,CURRENT_TIMESTAMP,null,null,null,null,null,null,0);
				Insert into SECROLEGROUPS values ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS_VIEW),(SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOANTYPE_AUTO_WRITE_OFF_APPROVER'),(SELECT ROLEID FROM SECROLES 	WHERE ROLECD = 'MSTGRP1_APPROVER'),0,1000,CURRENT_TIMESTAMP,null,null,null,null,null,null,0);

			]]>
		</sql>
	</changeSet>


	<changeSet id="ST#730TK#475516.14" author="Vijayakumar.k">
		<createTable tableName="AUTOWRITEOFF_CALC_QUEUE">
			<column name="ID" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="FinID" type="bigint" />
			<column name="ThreadID" type="int">
				<constraints nullable="false" />
			</column>
			<column name="StartTime" type="datetime" />
			<column name="EndTime" type="datetime" />
			<column name="Progress" type="int">
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>

	<changeSet id="ST#730TK#475516.15_post" author="Vijayakumar.k" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE AUTOWRITEOFF_CALC_QUEUE ADD CONSTRAINT DF_AUTOWRITEOFF_CALC_Q_THREADID DEFAULT 0 FOR ThreadID;
				ALTER TABLE AUTOWRITEOFF_CALC_QUEUE ADD CONSTRAINT DF_AUTOWRITEOFF_CALC_Q_PROGRESS DEFAULT 0 FOR Progress;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#730TK#475516.16_post" author="Vijayakumar.k" dbms="postgresql, oracle">
		<addDefaultValue columnName="ThreadID" tableName="AUTOWRITEOFF_CALC_QUEUE" defaultValue="0" />
		<addDefaultValue columnName="Progress" tableName="AUTOWRITEOFF_CALC_QUEUE" defaultValue="0" />
	</changeSet>


	<changeSet id="ST#730TK#475516.17" author="Vijayakumar.k">
		<addPrimaryKey tableName="AUTOWRITEOFF_CALC_QUEUE" columnNames="Id" />
	</changeSet>
	<changeSet id="ST#730TK#475516.18" author="Vijayakumar.k">
		<createIndex tableName="AUTOWRITEOFF_CALC_QUEUE" indexName="idx_aw_queue_tid">
			<column name="ThreadID" type="int" />
		</createIndex>
	</changeSet>
	<changeSet id="ST#730TK#475516.19" author="Vijayakumar.k">
		<createIndex tableName="AUTOWRITEOFF_CALC_QUEUE" indexName="idx_aw_queue_id_progress">
			<column name="ID" type="bigint" />
			<column name="Progress" type="int" />
		</createIndex>
	</changeSet>

	<changeSet id="ST#730TK#475516.20" author="Vijayakumar.k">
		<createIndex tableName="AUTOWRITEOFF_CALC_QUEUE" indexName="idx_aw_queue_fid_progress">
			<column name="FinID" type="bigint" />
			<column name="Progress" type="int" />
		</createIndex>
	</changeSet>
	<changeSet id="ST#730TK#475516.21" author="Vijayakumar.k">
		<createIndex tableName="AUTOWRITEOFF_CALC_QUEUE" indexName="idx_aw_queue_progress">
			<column name="Progress" type="int" />
		</createIndex>
	</changeSet>
	<changeSet id="ST#730TK#475516.22" author="Vijayakumar.k">
		<createIndex tableName="AUTOWRITEOFF_CALC_QUEUE" indexName="idx_aw_queue_id_threadid">
			<column name="ID" type="bigint" />
			<column name="ThreadID" type="int" />
		</createIndex>
	</changeSet>
	<changeSet id="ST#730TK#475516.23" author="Vijayakumar.k">
		<createIndex tableName="AUTOWRITEOFF_CALC_QUEUE" indexName="idx_aw_queue_fid">
			<column name="FinId" type="bigint" />
		</createIndex>
	</changeSet>

	<changeSet id="ST#730TK#475516.24" author="Vijayakumar.k">
		<createTable tableName="Auto_WriteOff_Loans_Log">
			<column name="FinId" type="bigint" />
			<column name="FinRef" type="varchar(20)"/>
			<column name="Code" type="varchar(10)"/>
			<column name="errorMsg" type="varchar(2000)"/>
			<column name="executionDate" type="datetime" />
			<column name="status" type="varchar(2)"/>
		</createTable>
	</changeSet>
	
	
	<changeSet id="ST#730TK#475516.25" author="Vijayakumar.K">
		<sql>
			<![CDATA[
				DELETE FROM ERRORDETAILS WHERE CODE = 'AWL_001';
				INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION) VALUES('AWL_001','EN','E','ThereLoan has does not the PSL category','','Approved',null,null,null,null,null,0,CURRENT_TIMESTAMP,1000,0);
				DELETE FROM ERRORDETAILS WHERE CODE='AWL_002';
				INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, RECORDSTATUS, WORKFLOWID, LASTMNTBY, VERSION) VALUES ('AWL_002', 'EN', 'E', 'Loan type PSL Categories not available in the Loan type Write off Master.', 'Approved', 0, 1000, 1);
				DELETE FROM ERRORDETAILS WHERE CODE='AWL_003';
				INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, RECORDSTATUS, WORKFLOWID, LASTMNTBY, VERSION) VALUES ('AWL_003', 'EN', 'E', 'Loan type PSL Categories or DPD Days are not match with the Loan type Write off Master.', 'Approved', 0, 1000, 1);
				DELETE FROM ERRORDETAILS WHERE CODE='AWL_004';
				INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, RECORDSTATUS, WORKFLOWID, LASTMNTBY, VERSION) VALUES ('AWL_004', 'EN', 'E', 'Loan dues are adjusted against Excess or Payables.', 'Approved', 0, 1000, 1);
				DELETE FROM ERRORDETAILS WHERE CODE='AWL_000';
				INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, RECORDSTATUS, WORKFLOWID, LASTMNTBY, VERSION) VALUES ('AWL_000', 'EN', 'E', 'Loan has writeoffed.', 'Approved', 0, 1000, 1);
			]]>
		</sql>
	</changeSet>

</databaseChangeLog> 