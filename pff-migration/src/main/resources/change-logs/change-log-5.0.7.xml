<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">
	<property name="add.schema" value="dbo." dbms="mssql" />
	<property name="add.schema" value=" " dbms="oracle" />
	<property name="call.substr" value="substring" dbms="mssql" />
	<property name="call.substr" value="substr" dbms="oracle" />
	<property name="call.substr" value="substring" dbms="postgresql" />
	<property name="call.auditdb" value="PFFBFSQCAudit.." dbms="mssql" />
	<property name="call.auditdb" value=" " dbms="oracle" />
	<property name="call.concatenate" value="+" dbms="mssql" />
	<property name="call.concatenate" value="||" dbms="oracle" />
	<property name="call.concatenate" value="||" dbms="postgresql" />
	<property name="call.collength" value="LEN" dbms="mssql" />
	<property name="call.collength" value="LENGTH" dbms="oracle" />
	<property name="call.collength" value="LENGTH" dbms="postgresql" />
	<property name="call.date" value="getdate()" dbms="mssql" />
	<property name="call.date" value="sysdate" dbms="oracle" />
	<property name="call.date" value="now()::timestamp" dbms="postgresql" />

	<changeSet id="pre_run_for_pgp" author="Adarsh" runAlways="true" dbms="postgresql">
		<sql>
			Set search_path = plf,public,pg_catalog;
		</sql>
	</changeSet>


	<changeSet id="1" author="Saikiran.v">
		<addColumn tableName="RMTFinanceTypes">
			<column name="AllowDrawingPower" type="boolean" />
		</addColumn>
	</changeSet>
	<changeSet id="2" author="Saikiran.v">
		<addColumn tableName="RMTFinanceTypes_temp">
			<column name="AllowDrawingPower" type="boolean" />
		</addColumn>
	</changeSet>
	<changeSet id="3" author="Saikiran.v">
		<sql>
			<![CDATA[
				UPDATE RMTFinanceTypes Set AllowDrawingPower = 0;
				UPDATE RMTFinanceTypes_Temp Set AllowDrawingPower = 0;
			
			]]>
		</sql>
	</changeSet>

	<changeSet id="4" author="Saikiran.v" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE RMTFINANCETYPES ADD CONSTRAINT DF_RMTFINANCETYPES_AlwDP DEFAULT 0 FOR AllowDrawingPower;
				ALTER TABLE RMTFINANCETYPES_TEMP ADD CONSTRAINT DF_RMTFINANCETYPES_TEMP_AlwDP DEFAULT 0 FOR AllowDrawingPower;
			]]>
		</sql>
	</changeSet>

	<changeSet id="4" author="Saikiran.v" dbms="postgresql, oracle">
		<addDefaultValue columnName="AllowDrawingPower" tableName="RMTFinanceTypes" defaultValue="0" />
		<addDefaultValue columnName="AllowDrawingPower" tableName="RMTFinanceTypes_Temp" defaultValue="0" />
	</changeSet>

	<changeSet id="5_pre" author="Saikiran.v" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_aview');
					
			]]>
		</sql>
	</changeSet>

	<changeSet id="5" author="Saikiran.v">
		<createView viewName="rmtfinancetypes_aview" replaceIfExists="true">
		SELECT t1.fintype,
			t1.fincategory,
			t1.fintypedesc,
			t1.finccy,
			t1.findayscaltype,
			t1.finactype,
			t1.fincontingentactype,
			t1.finisgenref,
			t1.finmaxamount,
			t1.finminamount,
			t1.finisopennewfinac,
			t1.findftstmtfrq,
			t1.finisalwmd,
			t1.finschdmthd,
			t1.finisalwgrace,
			t1.finhistretension,
			t1.equalrepayment,
			t1.finratetype,
			t1.finbaserate,
			t1.finsplrate,
			t1.finintrate,
			t1.finminrate,
			t1.finmaxrate,
			t1.findftintfrq,
			t1.finisintcpz,
			t1.fincpzfrq,
			t1.finisrvwalw,
			t1.finrvwfrq,
			t1.fingrcratetype,
			t1.fingrcbaserate,
			t1.fingrcsplrate,
			t1.fingrcintrate,
			t1.fingrcminrate,
			t1.fingrcmaxrate,
			t1.fingrcdftintfrq,
			t1.fingrcisintcpz,
			t1.fingrccpzfrq,
			t1.fingrcisrvwalw,
			t1.fingrcrvwfrq,
			t1.finminterm,
			t1.finmaxterm,
			t1.findftterms,
			t1.finrpyfrq,
			t1.finrepaymethod,
			t1.finisalwpartialrpy,
			t1.finisalwdifferment,
			t1.finmaxdifferment,
			t1.finisalwearlyrpy,
			t1.finisalwearlysettle,
			t1.finodrpytries,
			t1.finearlypayrule,
			t1.finearlysettlerule,
			t1.findepositrestrictedto,
			t1.finaebuyorinception,
			t1.finaesellormaturity,
			t1.finisactive,
			t1.version,
			t1.lastmntby,
			t1.lastmnton,
			t1.recordstatus,
			t1.rolecode,
			t1.nextrolecode,
			t1.taskid,
			t1.nexttaskid,
			t1.recordtype,
			t1.workflowid,
			t1.stepfinance,
			t1.steppingmandatory,
			t1.alwmanualsteps,
			t1.alwdsteppolicies,
			t1.dftsteppolicy,
			t4.actypedesc  lovdescfincontingentactypename,
			t5.actypedesc  lovdescfinactypename,
			t1.finisdwpayrequired,
			t1.finrvwrateapplfor,
			t1.finalwratechangeanydate,
			t1.finisintcpzatgrcend,
			t1.finelgrulecode,
			t1.limitelgrulecode,
			t1.finschcalcodeonrvw,
			t1.alwplandeferment,
			t1.plandefercount,
			t1.finassettype,
			t1.pftpayactype,
			t1.finisopenpftpayacc,
			t31.actypedesc  lovdescpftpayactypename,
			t1.finisalwgrcrepay,
			t1.fingrcschdmthd,
			t1.fingrcmargin,
			t1.finmargin,
			t1.finscheduleon,
			t1.fingrcscheduleon,
			t1.fincommitmentreq,
			t1.fincollateralreq,
			t1.findepreciationreq,
			t1.findepreciationfrq,
			t1.finbankcontingentactype,
			t1.finprovisionactype,
			t38.actypedesc  lovdescfinbankcontactypename,
			t39.actypedesc  lovdescfinprovisionactypename,
			t1.allowriainvestment,
			t1.overridelimit,
			t1.limitrequired,
			t1.fincommitmentovrride,
			t1.fincollateralovrride,
			t1.finpftunchanged,
			t1.applyodpenalty,
			t1.odincgrcdays,
			t1.odchargetype,
			t1.odgracedays,
			t1.odchargecalon,
			t1.odchargeamtorperc,
			t1.odallowwaiver,
			t1.odmaxwaiverperc,
			t1.findivision,
			t48.divisioncodedesc  lovdescfindivisionname,
			t48.entitycode  lovdescentitycode,
			t1.finsuspactype,
			t49.actypedesc  lovdescfinsuspactypename,
			t1.product,
			t1.startdate,
			t1.enddate,
			t1.allowdownpaypgm,
			t1.remarks,
			t1.alwearlypaymethods,
			t1.pastduepftcalmthd,
			t1.pastduepftmargin,
			t1.alwadvancerent,
			t1.grcadvbaserate,
			t1.grcadvmargin,
			t1.grcadvpftrate,
			t1.rpyadvbaserate,
			t1.rpyadvmargin,
			t1.rpyadvpftrate,
			t1.rolloverfinance,
			t1.rolloverfrq,
			t1.downpayrule,
			t59.rulecode  downpayrulecode,
			t59.rulecodedesc  downpayruledesc,
			t1.finsusptrigger,
			t1.finsuspremarks,
			t1.alwmultipartydisb,
			t1.collateraltype,
			t1.tdsapplicable,
			t1.manualschedule,
			t1.applygrcpricing,
			t1.grcpricingmethod,
			t1.applyrpypricing,
			t1.rpypricingmethod,
			t1.rpyhierarchy,
			t67.rulecode  grcpricingmethoddesc,
			t68.rulecode  rpypricingmethoddesc,
			t1.droplineod,
			t1.droppingmethod,
			t1.ratechganyday,
			t1.finrepaypftonfrq,
			t1.alwbpi,
			t1.bpitreatment,
			t1.pftdueschon,
			t1.planemihalw,
			t1.planemihmethod,
			t1.planemihmaxperyear,
			t1.planemihmax,
			t1.planemihlockperiod,
			t1.planemicpz,
			t1.unplanemihlockperiod,
			t1.unplanemicpz,
			t1.reagecpz,
			t1.fddlockperiod,
			t1.alwdrpymethods,
			t1.maxunplannedemi,
			t1.maxreageholidays,
			t1.roundingmode,
			t1.roundingtarget,
			t1.frequencydays,
			t1.quickdisb,
			t1.alwreage,
			t1.alwunplanemiholiday,
			t1.alwmaxdisbcheckreq,
			t1.fintypedesc  lovdescpromofintypedesc,
			t1.profitcenterid,
			t69.profitcentercode,
			t69.profitcenterdesc,
			t1.productcategory,
			t2.productdesc  fincategorydesc,
			t1.developerfinance,
			t1.costoffunds,
			t1.chequecapturereq,
			t1.finltvcheck,
			t1.partiallysecured,
			t1.alwadvemi,
			t1.advemiminterms,
			t1.advemimaxterms,
			t1.advemidftterms,
			t1.advemischdmthd,
			t1.bpipftdaysbasis,
			t1.eligibilitymethods,
			t1.alwhybridrate,
			t1.fixedratetenor,
			t1.odmincapamount,
			t1.odrulecode,
			t1.alwzerointacc,
			t1.autorejectiondays,
			t1.taxnomand,
			t1.putcallrequired,
			t1.grcadvintersetreq,
			t1.grcadvtype,
			t1.grcadvminterms,
			t1.grcadvmaxterms,
			t1.grcadvdefaultterms,
			t1.advintersetreq,
			t1.advtype,
			t1.advminterms,
			t1.advmaxterms,
			t1.advdefaultterms,
			t1.advstage,
			t1.dsfreq,
			t1.cashcollateralreq,
			t1.tdsallowtomodify,
			t1.tdsapplicableto,
			t1.alwvan,
			t1.vanallocationmethod,
			t1.AllowDrawingPower
		   FROM rmtfinancetypes t1
			 LEFT JOIN bmtproduct t2 ON t1.fincategory = t2.productcode
			 LEFT JOIN rmtaccounttypes t4 ON t1.fincontingentactype = t4.actype
			 LEFT JOIN rmtaccounttypes t38 ON t1.finbankcontingentactype = t38.actype
			 LEFT JOIN rmtaccounttypes t39 ON t1.finprovisionactype = t39.actype
			 LEFT JOIN rmtaccounttypes t5 ON t1.finactype = t5.actype
			 LEFT JOIN rmtaccounttypes t31 ON t1.pftpayactype = t31.actype
			 LEFT JOIN smtdivisiondetail t48 ON t1.findivision = t48.divisioncode
			 LEFT JOIN rmtaccounttypes t49 ON t1.finsuspactype = t49.actype
			 LEFT JOIN rules t59 ON t1.downpayrule = t59.ruleid
			 LEFT JOIN rules t67 ON t1.grcpricingmethod = t67.ruleid
			 LEFT JOIN rules t68 ON t1.rpypricingmethod = t68.ruleid
			 LEFT JOIN profitcenters t69 ON t69.profitcenterid = t1.profitcenterid
</createView>
	</changeSet>

	<changeSet id="5_post" author="ADARSH" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_restore_dependencies ('plf', 'rmtfinancetypes_aview');
					
			]]>
		</sql>
	</changeSet>


	<changeSet id="6_pre" author="Saikiran.v" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_orgview');
					
			]]>
		</sql>
	</changeSet>

	<changeSet id="6" author="Saikiran.v">
		<createView viewName="rmtfinancetypes_orgview " replaceIfExists="true">	 
		SELECT t1.fintype,
			t1.fincategory,
			t1.fintypedesc,
			t1.finccy,
			t1.findayscaltype,
			t1.finactype,
			t1.fincontingentactype,
			t1.finisgenref,
			t1.finmaxamount,
			t1.finminamount,
			t1.finisopennewfinac,
			t1.finisalwmd,
			t1.finschdmthd,
			t1.finisalwgrace,
			t1.equalrepayment,
			t1.finratetype,
			t1.finbaserate,
			t1.finsplrate,
			t1.finintrate,
			t1.finminrate,
			t1.finmaxrate,
			t1.findftintfrq,
			t1.finisintcpz,
			t1.fincpzfrq,
			t1.finisrvwalw,
			t1.finrvwfrq,
			t1.fingrcratetype,
			t1.fingrcbaserate,
			t1.fingrcsplrate,
			t1.fingrcintrate,
			t1.fingrcminrate,
			t1.fingrcmaxrate,
			t1.fingrcdftintfrq,
			t1.fingrcisintcpz,
			t1.fingrccpzfrq,
			t1.fingrcisrvwalw,
			t1.fingrcrvwfrq,
			t1.finminterm,
			t1.finmaxterm,
			t1.findftterms,
			t1.finrpyfrq,
			t1.finrepaymethod,
			t1.finisalwdifferment,
			t1.finmaxdifferment,
			t1.finisactive,
			t1.stepfinance,
			t1.steppingmandatory,
			t1.alwmanualsteps,
			t1.alwdsteppolicies,
			t1.dftsteppolicy,
			t1.finisdwpayrequired,
			t1.finrvwrateapplfor,
			t1.finalwratechangeanydate,
			t1.finisintcpzatgrcend,
			t1.finschcalcodeonrvw,
			t1.alwplandeferment,
			t1.plandefercount,
			t1.pftpayactype,
			t1.finisopenpftpayacc,
			t1.finisalwgrcrepay,
			t1.fingrcschdmthd,
			t1.fingrcmargin,
			t1.finmargin,
			t1.fincommitmentreq,
			t1.fincollateralreq,
			t1.findepreciationreq,
			t1.findepreciationfrq,
			t1.finbankcontingentactype,
			t1.finprovisionactype,
			t1.allowriainvestment,
			t1.overridelimit,
			t1.limitrequired,
			t1.fincommitmentovrride,
			t1.fincollateralovrride,
			t1.finrepaypftonfrq,
			t1.finpftunchanged,
			t1.applyodpenalty,
			t1.odincgrcdays,
			t1.odchargetype,
			t1.odgracedays,
			t1.odchargecalon,
			t1.odchargeamtorperc,
			t1.odallowwaiver,
			t1.odmaxwaiverperc,
			t1.findivision,
			t3.divisioncodedesc  lovdescfindivisionname,
			t1.finsuspactype,
			t1.product,
			t1.startdate,
			t1.enddate,
			t1.allowdownpaypgm,
			t1.fintypedesc  lovdescpromofintypedesc,
			t1.remarks,
			t4.policydesc  lovdescdftsteppolicyname,
			t1.pastduepftcalmthd,
			t1.pastduepftmargin,
			t1.alwadvancerent,
			t1.grcadvbaserate,
			t1.grcadvmargin,
			t1.grcadvpftrate,
			t1.rpyadvbaserate,
			t1.rpyadvmargin,
			t1.rpyadvpftrate,
			t1.rolloverfinance,
			t1.rolloverfrq,
			t1.downpayrule,
			t1.alwmultipartydisb,
			t1.collateraltype,
			t1.tdsapplicable,
			t5.rulecode  downpayrulecode,
			t5.rulecodedesc  downpayruledesc,
			t1.applygrcpricing,
			t1.applyrpypricing,
			t6.rulecode  grcpricingmethoddesc,
			t7.rulecode  rpypricingmethoddesc,
			t1.droplineod,
			t1.droppingmethod,
			t1.ratechganyday,
			t4.steptype  dftsteppolicytype,
			t1.manualschedule,
			t1.alwbpi,
			t1.bpitreatment,
			t1.pftdueschon,
			t1.planemihalw,
			t1.planemihmethod,
			t1.planemihmaxperyear,
			t1.planemihmax,
			t1.planemihlockperiod,
			t1.planemicpz,
			t1.unplanemihlockperiod,
			t1.unplanemicpz,
			t1.reagecpz,
			t1.fddlockperiod,
			t1.alwdrpymethods,
			t1.maxunplannedemi,
			t1.maxreageholidays,
			t1.roundingmode,
			t1.roundingtarget,
			t1.frequencydays,
			t1.quickdisb,
			t1.alwreage,
			t1.alwunplanemiholiday,
			t1.alwmaxdisbcheckreq,
			t1.productcategory,
			t1.rpyhierarchy,
			t1.developerfinance,
			t3.entitycode  lovdescentitycode,
			t8.entitydesc  lovdescentitydesc,
			t1.costoffunds,
			t1.chequecapturereq,
			t1.finltvcheck,
			t1.partiallysecured,
			t1.alwadvemi,
			t1.advemiminterms,
			t1.advemimaxterms,
			t1.advemidftterms,
			t1.advemischdmthd,
			t1.bpipftdaysbasis,
			t1.eligibilitymethods,
			t1.alwhybridrate,
			t1.fixedratetenor,
			t1.odmincapamount,
			t1.odrulecode,
			t1.alwzerointacc,
			t1.finisalwpartialrpy,
			t1.autorejectiondays,
			t1.taxnomand,
			t1.putcallrequired,
			t1.grcadvintersetreq,
			t1.grcadvtype,
			t1.grcadvminterms,
			t1.grcadvmaxterms,
			t1.grcadvdefaultterms,
			t1.advintersetreq,
			t1.advtype,
			t1.advminterms,
			t1.advmaxterms,
			t1.advdefaultterms,
			t1.advstage,
			t1.dsfreq,
			t1.cashcollateralreq,
			t1.alwearlypaymethods,
			t1.tdsallowtomodify,
			t1.tdsapplicableto,
			t1.alwvan,
			t1.vanallocationmethod,
			t1.AllowDrawingPower
		   FROM rmtfinancetypes t1
			 JOIN smtdivisiondetail t3 ON t1.findivision = t3.divisioncode
			 LEFT JOIN steppolicyheader t4 ON t1.dftsteppolicy = t4.policycode
			 LEFT JOIN rules t5 ON t1.downpayrule = t5.ruleid
			 LEFT JOIN rules t6 ON t1.grcpricingmethod = t6.ruleid
			 LEFT JOIN rules t7 ON t1.rpypricingmethod = t7.ruleid
			 LEFT JOIN entity t8 ON t3.entitycode = t8.entitycode	 
</createView>
	</changeSet>

	<changeSet id="6_post" author="ADARSH" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_restore_dependencies ('plf', 'rmtfinancetypes_aview');
					
			]]>
		</sql>
	</changeSet>


	<changeSet id="7_pre" author="Saikiran.v" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_view');
					
			]]>
		</sql>
	</changeSet>
	<changeSet id="7" author="Saikiran.v">
		<createView viewName="rmtfinancetypes_view " replaceIfExists="true">	 	 
	
			 SELECT t1.fintype,
				t1.fincategory,
				t1.fintypedesc,
				t1.finccy,
				t1.findayscaltype,
				t1.finactype,
				t1.fincontingentactype,
				t1.finisgenref,
				t1.finmaxamount,
				t1.finminamount,
				t1.finisopennewfinac,
				t1.findftstmtfrq,
				t1.finisalwmd,
				t1.finschdmthd,
				t1.finisalwgrace,
				t1.finhistretension,
				t1.equalrepayment,
				t1.finratetype,
				t1.finbaserate,
				t1.finsplrate,
				t1.finintrate,
				t1.finminrate,
				t1.finmaxrate,
				t1.findftintfrq,
				t1.finisintcpz,
				t1.fincpzfrq,
				t1.finisrvwalw,
				t1.finrvwfrq,
				t1.fingrcratetype,
				t1.fingrcbaserate,
				t1.fingrcsplrate,
				t1.fingrcintrate,
				t1.fingrcminrate,
				t1.fingrcmaxrate,
				t1.fingrcdftintfrq,
				t1.fingrcisintcpz,
				t1.fingrccpzfrq,
				t1.fingrcisrvwalw,
				t1.fingrcrvwfrq,
				t1.finminterm,
				t1.finmaxterm,
				t1.findftterms,
				t1.finrpyfrq,
				t1.finrepaymethod,
				t1.finisalwpartialrpy,
				t1.finisalwdifferment,
				t1.finmaxdifferment,
				t1.finisalwearlyrpy,
				t1.finisalwearlysettle,
				t1.finodrpytries,
				t1.finearlypayrule,
				t1.finearlysettlerule,
				t1.findepositrestrictedto,
				t1.finaebuyorinception,
				t1.finaesellormaturity,
				t1.finisactive,
				t1.version,
				t1.lastmntby,
				t1.lastmnton,
				t1.recordstatus,
				t1.rolecode,
				t1.nextrolecode,
				t1.taskid,
				t1.nexttaskid,
				t1.recordtype,
				t1.workflowid,
				t1.stepfinance,
				t1.steppingmandatory,
				t1.alwmanualsteps,
				t1.alwdsteppolicies,
				t1.dftsteppolicy,
				t4.actypedesc  lovdescfincontingentactypename,
				t5.actypedesc  lovdescfinactypename,
				t1.finisdwpayrequired,
				t1.finrvwrateapplfor,
				t1.finalwratechangeanydate,
				t1.finisintcpzatgrcend,
				t1.finelgrulecode,
				t1.limitelgrulecode,
				t1.finschcalcodeonrvw,
				t1.alwplandeferment,
				t1.plandefercount,
				t1.finassettype,
				t1.pftpayactype,
				t1.finisopenpftpayacc,
				t31.actypedesc  lovdescpftpayactypename,
				t1.finisalwgrcrepay,
				t1.fingrcschdmthd,
				t1.fingrcmargin,
				t1.finmargin,
				t1.finscheduleon,
				t1.fingrcscheduleon,
				t1.fincommitmentreq,
				t1.fincollateralreq,
				t1.findepreciationreq,
				t1.findepreciationfrq,
				t1.finbankcontingentactype,
				t1.finprovisionactype,
				t38.actypedesc  lovdescfinbankcontactypename,
				t39.actypedesc  lovdescfinprovisionactypename,
				t1.allowriainvestment,
				t1.overridelimit,
				t1.limitrequired,
				t1.fincommitmentovrride,
				t1.fincollateralovrride,
				t1.finpftunchanged,
				t1.applyodpenalty,
				t1.odincgrcdays,
				t1.odchargetype,
				t1.odgracedays,
				t1.odchargecalon,
				t1.odchargeamtorperc,
				t1.odallowwaiver,
				t1.odmaxwaiverperc,
				t1.findivision,
				t48.divisioncodedesc  lovdescfindivisionname,
				t48.entitycode  lovdescentitycode,
				t1.finsuspactype,
				t49.actypedesc  lovdescfinsuspactypename,
				t1.product,
				t1.startdate,
				t1.enddate,
				t1.allowdownpaypgm,
				t1.fintypedesc  lovdescpromofintypedesc,
				t1.remarks,
				t1.alwearlypaymethods,
				t1.pastduepftcalmthd,
				t1.pastduepftmargin,
				t1.alwadvancerent,
				t1.grcadvbaserate,
				t1.grcadvmargin,
				t1.grcadvpftrate,
				t1.rpyadvbaserate,
				t1.rpyadvmargin,
				t1.rpyadvpftrate,
				t1.rolloverfinance,
				t1.rolloverfrq,
				t1.downpayrule,
				t59.rulecode  downpayrulecode,
				t59.rulecodedesc  downpayruledesc,
				t1.finsusptrigger,
				t1.finsuspremarks,
				t1.alwmultipartydisb,
				t1.collateraltype,
				t1.tdsapplicable,
				t1.manualschedule,
				t1.applygrcpricing,
				t1.grcpricingmethod,
				t1.applyrpypricing,
				t1.rpypricingmethod,
				t1.rpyhierarchy,
				t67.rulecode  grcpricingmethoddesc,
				t68.rulecode  rpypricingmethoddesc,
				t1.droplineod,
				t1.droppingmethod,
				t1.ratechganyday,
				t1.finrepaypftonfrq,
				t1.alwbpi,
				t1.bpitreatment,
				t1.pftdueschon,
				t1.planemihalw,
				t1.planemihmethod,
				t1.planemihmaxperyear,
				t1.planemihmax,
				t1.planemihlockperiod,
				t1.planemicpz,
				t1.unplanemihlockperiod,
				t1.unplanemicpz,
				t1.reagecpz,
				t1.fddlockperiod,
				t1.alwdrpymethods,
				t1.maxunplannedemi,
				t1.maxreageholidays,
				t1.roundingmode,
				t1.roundingtarget,
				t1.frequencydays,
				t1.quickdisb,
				t1.alwmaxdisbcheckreq,
				t1.alwreage,
				t1.alwunplanemiholiday,
				t1.profitcenterid,
				t69.profitcentercode,
				t69.profitcenterdesc,
				t1.productcategory,
				t2.productdesc  fincategorydesc,
				t1.developerfinance,
				t1.costoffunds,
				t1.chequecapturereq,
				t1.finltvcheck,
				t1.partiallysecured,
				t1.alwadvemi,
				t1.advemiminterms,
				t1.advemimaxterms,
				t1.advemidftterms,
				t1.advemischdmthd,
				t1.bpipftdaysbasis,
				t1.eligibilitymethods,
				t1.alwhybridrate,
				t1.fixedratetenor,
				t1.odmincapamount,
				t1.odrulecode,
				t1.alwzerointacc,
				t1.autorejectiondays,
				t1.taxnomand,
				t1.putcallrequired,
				t1.grcadvintersetreq,
				t1.grcadvtype,
				t1.grcadvminterms,
				t1.grcadvmaxterms,
				t1.grcadvdefaultterms,
				t1.advintersetreq,
				t1.advtype,
				t1.advminterms,
				t1.advmaxterms,
				t1.advdefaultterms,
				t1.advstage,
				t1.dsfreq,
				t1.cashcollateralreq,
				t1.tdsallowtomodify,
				t1.tdsapplicableto,
				t1.alwvan,
				t1.vanallocationmethod,
				t1.AllowDrawingPower
			   FROM rmtfinancetypes_temp t1
				 LEFT JOIN bmtproduct t2 ON t1.fincategory = t2.productcode
				 LEFT JOIN rmtaccounttypes t4 ON t1.fincontingentactype = t4.actype
				 LEFT JOIN rmtaccounttypes t38 ON t1.finbankcontingentactype = t38.actype
				 LEFT JOIN rmtaccounttypes t39 ON t1.finprovisionactype = t39.actype
				 LEFT JOIN rmtaccounttypes t5 ON t1.finactype = t5.actype
				 LEFT JOIN rmtaccounttypes t31 ON t1.pftpayactype = t31.actype
				 LEFT JOIN smtdivisiondetail t48 ON t1.findivision = t48.divisioncode
				 LEFT JOIN rmtaccounttypes t49 ON t1.finsuspactype = t49.actype
				 LEFT JOIN rules t59 ON t1.downpayrule = t59.ruleid
				 LEFT JOIN rules t67 ON t1.grcpricingmethod = t67.ruleid
				 LEFT JOIN rules t68 ON t1.rpypricingmethod = t68.ruleid
				 LEFT JOIN profitcenters t69 ON t69.profitcenterid = t1.profitcenterid
			UNION ALL
			 SELECT t1.fintype,
				t1.fincategory,
				t1.fintypedesc,
				t1.finccy,
				t1.findayscaltype,
				t1.finactype,
				t1.fincontingentactype,
				t1.finisgenref,
				t1.finmaxamount,
				t1.finminamount,
				t1.finisopennewfinac,
				t1.findftstmtfrq,
				t1.finisalwmd,
				t1.finschdmthd,
				t1.finisalwgrace,
				t1.finhistretension,
				t1.equalrepayment,
				t1.finratetype,
				t1.finbaserate,
				t1.finsplrate,
				t1.finintrate,
				t1.finminrate,
				t1.finmaxrate,
				t1.findftintfrq,
				t1.finisintcpz,
				t1.fincpzfrq,
				t1.finisrvwalw,
				t1.finrvwfrq,
				t1.fingrcratetype,
				t1.fingrcbaserate,
				t1.fingrcsplrate,
				t1.fingrcintrate,
				t1.fingrcminrate,
				t1.fingrcmaxrate,
				t1.fingrcdftintfrq,
				t1.fingrcisintcpz,
				t1.fingrccpzfrq,
				t1.fingrcisrvwalw,
				t1.fingrcrvwfrq,
				t1.finminterm,
				t1.finmaxterm,
				t1.findftterms,
				t1.finrpyfrq,
				t1.finrepaymethod,
				t1.finisalwpartialrpy,
				t1.finisalwdifferment,
				t1.finmaxdifferment,
				t1.finisalwearlyrpy,
				t1.finisalwearlysettle,
				t1.finodrpytries,
				t1.finearlypayrule,
				t1.finearlysettlerule,
				t1.findepositrestrictedto,
				t1.finaebuyorinception,
				t1.finaesellormaturity,
				t1.finisactive,
				t1.version,
				t1.lastmntby,
				t1.lastmnton,
				t1.recordstatus,
				t1.rolecode,
				t1.nextrolecode,
				t1.taskid,
				t1.nexttaskid,
				t1.recordtype,
				t1.workflowid,
				t1.stepfinance,
				t1.steppingmandatory,
				t1.alwmanualsteps,
				t1.alwdsteppolicies,
				t1.dftsteppolicy,
				t4.actypedesc  lovdescfincontingentactypename,
				t5.actypedesc  lovdescfinactypename,
				t1.finisdwpayrequired,
				t1.finrvwrateapplfor,
				t1.finalwratechangeanydate,
				t1.finisintcpzatgrcend,
				t1.finelgrulecode,
				t1.limitelgrulecode,
				t1.finschcalcodeonrvw,
				t1.alwplandeferment,
				t1.plandefercount,
				t1.finassettype,
				t1.pftpayactype,
				t1.finisopenpftpayacc,
				t31.actypedesc  lovdescpftpayactypename,
				t1.finisalwgrcrepay,
				t1.fingrcschdmthd,
				t1.fingrcmargin,
				t1.finmargin,
				t1.finscheduleon,
				t1.fingrcscheduleon,
				t1.fincommitmentreq,
				t1.fincollateralreq,
				t1.findepreciationreq,
				t1.findepreciationfrq,
				t1.finbankcontingentactype,
				t1.finprovisionactype,
				t38.actypedesc  lovdescfinbankcontactypename,
				t39.actypedesc  lovdescfinprovisionactypename,
				t1.allowriainvestment,
				t1.overridelimit,
				t1.limitrequired,
				t1.fincommitmentovrride,
				t1.fincollateralovrride,
				t1.finpftunchanged,
				t1.applyodpenalty,
				t1.odincgrcdays,
				t1.odchargetype,
				t1.odgracedays,
				t1.odchargecalon,
				t1.odchargeamtorperc,
				t1.odallowwaiver,
				t1.odmaxwaiverperc,
				t1.findivision,
				t48.divisioncodedesc  lovdescfindivisionname,
				t48.entitycode  lovdescentitycode,
				t1.finsuspactype,
				t49.actypedesc  lovdescfinsuspactypename,
				t1.product,
				t1.startdate,
				t1.enddate,
				t1.allowdownpaypgm,
				t1.fintypedesc  lovdescpromofintypedesc,
				t1.remarks,
				t1.alwearlypaymethods,
				t1.pastduepftcalmthd,
				t1.pastduepftmargin,
				t1.alwadvancerent,
				t1.grcadvbaserate,
				t1.grcadvmargin,
				t1.grcadvpftrate,
				t1.rpyadvbaserate,
				t1.rpyadvmargin,
				t1.rpyadvpftrate,
				t1.rolloverfinance,
				t1.rolloverfrq,
				t1.downpayrule,
				t59.rulecode  downpayrulecode,
				t59.rulecodedesc  downpayruledesc,
				t1.finsusptrigger,
				t1.finsuspremarks,
				t1.alwmultipartydisb,
				t1.collateraltype,
				t1.tdsapplicable,
				t1.manualschedule,
				t1.applygrcpricing,
				t1.grcpricingmethod,
				t1.applyrpypricing,
				t1.rpypricingmethod,
				t1.rpyhierarchy,
				t67.rulecode  grcpricingmethoddesc,
				t68.rulecode  rpypricingmethoddesc,
				t1.droplineod,
				t1.droppingmethod,
				t1.ratechganyday,
				t1.finrepaypftonfrq,
				t1.alwbpi,
				t1.bpitreatment,
				t1.pftdueschon,
				t1.planemihalw,
				t1.planemihmethod,
				t1.planemihmaxperyear,
				t1.planemihmax,
				t1.planemihlockperiod,
				t1.planemicpz,
				t1.unplanemihlockperiod,
				t1.unplanemicpz,
				t1.reagecpz,
				t1.fddlockperiod,
				t1.alwdrpymethods,
				t1.maxunplannedemi,
				t1.maxreageholidays,
				t1.roundingmode,
				t1.roundingtarget,
				t1.frequencydays,
				t1.quickdisb,
				t1.alwmaxdisbcheckreq,
				t1.alwreage,
				t1.alwunplanemiholiday,
				t1.profitcenterid,
				t69.profitcentercode,
				t69.profitcenterdesc,
				t1.productcategory,
				t2.productdesc  fincategorydesc,
				t1.developerfinance,
				t1.costoffunds,
				t1.chequecapturereq,
				t1.finltvcheck,
				t1.partiallysecured,
				t1.alwadvemi,
				t1.advemiminterms,
				t1.advemimaxterms,
				t1.advemidftterms,
				t1.advemischdmthd,
				t1.bpipftdaysbasis,
				t1.eligibilitymethods,
				t1.alwhybridrate,
				t1.fixedratetenor,
				t1.odmincapamount,
				t1.odrulecode,
				t1.alwzerointacc,
				t1.autorejectiondays,
				t1.taxnomand,
				t1.putcallrequired,
				t1.grcadvintersetreq,
				t1.grcadvtype,
				t1.grcadvminterms,
				t1.grcadvmaxterms,
				t1.grcadvdefaultterms,
				t1.advintersetreq,
				t1.advtype,
				t1.advminterms,
				t1.advmaxterms,
				t1.advdefaultterms,
				t1.advstage,
				t1.dsfreq,
				t1.cashcollateralreq,
				t1.tdsallowtomodify,
				t1.tdsapplicableto,
				t1.alwvan,
				t1.vanallocationmethod,
				t1.AllowDrawingPower
			   FROM rmtfinancetypes t1
				 LEFT JOIN bmtproduct t2 ON t1.fincategory = t2.productcode
				 LEFT JOIN rmtaccounttypes t4 ON t1.fincontingentactype = t4.actype
				 LEFT JOIN rmtaccounttypes t38 ON t1.finbankcontingentactype = t38.actype
				 LEFT JOIN rmtaccounttypes t39 ON t1.finprovisionactype = t39.actype
				 LEFT JOIN rmtaccounttypes t5 ON t1.finactype = t5.actype
				 LEFT JOIN rmtaccounttypes t31 ON t1.pftpayactype = t31.actype
				 LEFT JOIN smtdivisiondetail t48 ON t1.findivision = t48.divisioncode
				 LEFT JOIN rmtaccounttypes t49 ON t1.finsuspactype = t49.actype
				 LEFT JOIN rules t59 ON t1.downpayrule = t59.ruleid
				 LEFT JOIN rules t67 ON t1.grcpricingmethod = t67.ruleid
				 LEFT JOIN rules t68 ON t1.rpypricingmethod = t68.ruleid
				 LEFT JOIN profitcenters t69 ON t69.profitcenterid = t1.profitcenterid
			  WHERE NOT (EXISTS ( SELECT 1  expr1
					   FROM rmtfinancetypes_temp
					  WHERE rmtfinancetypes_temp.fintype = t1.fintype))				  
		  </createView>
	</changeSet>


	<changeSet id="7_post" author="ADARSH" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_restore_dependencies ('plf', 'rmtfinancetypes_view');
					
			]]>
		</sql>
	</changeSet>

	<changeSet id="8.0" author="meena.a">
		<sql>
			<![CDATA[
				INSERT INTO SMTparameters (SysParmCode, SysParmDesc, SysParmType, SysParmMaint, SysParmValue, SysParmLength, SysParmDec, SysParmList, SysParmValdMod, SysParmDescription, Version, LastMntBy, LastMntOn, RecordStatus, RoleCode, NextRoleCode, TaskId, NexttaskId, RecordType, WorkflowId) VALUES ('USR_ACCT_LOCK_DAYS', 'Numbre of days to auto lock the user account when the user is not login from the N number of days.', 'int', '0', '25', 2, 0, NULL, NULL, '', 1, 1000, CURRENT_TIMESTAMP,'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SMTparameters (SysParmCode, SysParmDesc, SysParmType, SysParmMaint, SysParmValue, SysParmLength, SysParmDec, SysParmList, SysParmValdMod, SysParmDescription, Version, LastMntBy, LastMntOn, RecordStatus, RoleCode, NextRoleCode, TaskId, NexttaskId, RecordType, WorkflowId) VALUES ('USR_ACCT_LOCK_CRON_EXPRESSION', 'Cron Expression for user account locking Job.', 'String', '0', '0 0 5 1/1 * ? *', 20, 0, NULL, NULL, '', 1, 1000, CURRENT_TIMESTAMP,'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="8.1" author="meena.a">
		<addColumn tableName="SecUsers">
			<column name="AccountLockedOn" type="datetime" />
			<column name="AccountUnLockedOn" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="8.2" author="meena.a">
		<addColumn tableName="SecUsers_temp">
			<column name="AccountLockedOn" type="datetime" />
			<column name="AccountUnLockedOn" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="8.2.1.1" author="meena.a">
		<addColumn tableName="SecUsers_Rtemp">
			<column name="AccountLockedOn" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="8.2.1.2" author="meena.a">
		<addColumn tableName="SecUsers_Rtemp">
			<column name="AccountUnLockedOn" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="8.3" author="meena.a">
		<sql>
			<![CDATA[
				update SMTparameters set SysParmMaint = 1 where SysParmCode = 'USR_ACCT_LOCK_DAYS';
			]]>
		</sql>
	</changeSet>

	<!-- GST Waiver Changes Start -->

	<changeSet author="Kesav" id="11">
		<comment>New columns added for GST Waivers</comment>
		<addColumn tableName="FinRepayScheduleDetail_Temp">
			<column name="PenaltyWaiverCGST" type="decimal(18,0)" defaultValue="0">
				<constraints nullable="false" />
			</column>
			<column name="PenaltyWaiverSGST" type="decimal(18,0)" defaultValue="0">
				<constraints nullable="false" />
			</column>
			<column name="PenaltyWaiverUGST" type="decimal(18,0)" defaultValue="0">
				<constraints nullable="false" />
			</column>
			<column name="PenaltyWaiverIGST" type="decimal(18,0)" defaultValue="0">
				<constraints nullable="false" />
			</column>
		</addColumn>
	</changeSet>

	<changeSet author="Kesav" id="12">
		<comment>New columns added for GST Waivers</comment>
		<addColumn tableName="FinRepayScheduleDetail">
			<column name="PenaltyWaiverCGST" type="decimal(18,0)" defaultValue="0">
				<constraints nullable="false" />
			</column>
			<column name="PenaltyWaiverSGST" type="decimal(18,0)" defaultValue="0">
				<constraints nullable="false" />
			</column>
			<column name="PenaltyWaiverUGST" type="decimal(18,0)" defaultValue="0">
				<constraints nullable="false" />
			</column>
			<column name="PenaltyWaiverIGST" type="decimal(18,0)" defaultValue="0">
				<constraints nullable="false" />
			</column>
		</addColumn>
	</changeSet>

	<changeSet author="Kesav" id="13">
		<comment>WaivedGST columns added for GST Waivers</comment>
		<addColumn tableName="ReceiptAllocationDetail">
			<column name="WaivedGST" type="decimal(18,0)" defaultValue="0">
				<constraints nullable="false" />
			</column>
		</addColumn>
	</changeSet>

	<changeSet author="Kesav" id="14">
		<comment>WaivedGST columns added for GST Waivers</comment>
		<addColumn tableName="ReceiptAllocationDetail_Temp">
			<column name="WaivedGST" type="decimal(18,0)" defaultValue="0">
				<constraints nullable="false" />
			</column>
		</addColumn>
	</changeSet>

	<changeSet id="15" author="Kesav">
		<comment> WaivedGST column added for GST Waivers</comment>
		<createView viewName="ReceiptAllocationDetail_Aview" replaceIfExists="true">
			SELECT 		T1.receiptallocationid, T1.receiptid, T1.allocationid, T1.allocationtype, T1.allocationto, T1.paidamount, T1.waivedamount, COALESCE(T3.feetypedesc, T5.feetypedesc) AS typedesc, 
						T1.paidgst, T1.WaivedGST
			FROM 		ReceiptAllocationDetail T1
			LEFT JOIN   finfeedetail T2 ON T1.allocationto = T2.feeid AND T1.allocationtype = 'FEE'
			LEFT JOIN   feetypes T3 ON T2.feetypeid = T3.feetypeid
			LEFT JOIN   manualadvise T4 ON T1.allocationto = T4.adviseid AND T1.allocationtype = 'MANADV'
			LEFT JOIN   feetypes T5 ON T4.feetypeid = T5.feetypeid			
     	</createView>
	</changeSet>

	<changeSet id="16" author="Kesav">
		<comment> WaivedGST column added for GST Waivers</comment>
		<createView viewName="ReceiptAllocationDetail_View" replaceIfExists="true">
			SELECT 		T1.receiptallocationid, T1.receiptid, T1.allocationid, T1.allocationtype, T1.allocationto, T1.paidamount, T1.waivedamount, COALESCE(T3.feetypedesc, T5.feetypedesc) AS typedesc, 
						T1.paidgst, T1.waivedreqamount, T1.waiveraccepted, T1.totaldue, T1.WaivedGST
			FROM 		ReceiptAllocationDetail_Temp T1
			LEFT JOIN 	finfeedetail_temp T2 ON T1.allocationto = T2.feeid AND T1.allocationtype = 'FEE'
			LEFT JOIN 	feetypes T3 ON T2.feetypeid = T3.feetypeid
			LEFT JOIN 	manualadvise T4 ON T1.allocationto = T4.adviseid AND T1.allocationtype = 'MANADV'
			LEFT JOIN 	feetypes T5 ON T4.feetypeid = T5.feetypeid
			
			UNION ALL
			
			SELECT 		T1.receiptallocationid, T1.receiptid, T1.allocationid, T1.allocationtype, T1.allocationto, T1.paidamount, T1.waivedamount, COALESCE(T3.feetypedesc, T5.feetypedesc) AS typedesc, 
						T1.paidgst, T1.waivedreqamount, T1.waiveraccepted, T1.totaldue, T1.WaivedGST
			FROM 		ReceiptAllocationDetail T1
			LEFT JOIN 	finfeedetail T2 ON T1.allocationto = T2.feeid AND T1.allocationtype = 'FEE'
			LEFT JOIN 	feetypes T3 ON T2.feetypeid = T3.feetypeid
			LEFT JOIN 	manualadvise T4 ON T1.allocationto = T4.adviseid AND T1.allocationtype = 'MANADV'
			LEFT JOIN 	feetypes T5 ON T4.feetypeid = T5.feetypeid
			
			WHERE NOT (EXISTS ( SELECT 1 FROM ReceiptAllocationDetail_temp WHERE ReceiptAllocationDetail_temp.receiptid = T1.receiptid))			
     	</createView>
	</changeSet>

	<changeSet author="Kesav" id="17">
		<comment>WaivedCGST, Waived1SGST, WaivedUGST, WaivedIGST columns added for GST Waivers</comment>
		<addColumn tableName="ManualAdvise_Temp">
			<column name="WaivedCGST" type="decimal(18,0)" defaultValue="0">
				<constraints nullable="false" />
			</column>
			<column name="WaivedSGST" type="decimal(18,0)" defaultValue="0">
				<constraints nullable="false" />
			</column>
			<column name="WaivedIGST" type="decimal(18,0)" defaultValue="0">
				<constraints nullable="false" />
			</column>
			<column name="WaivedUGST" type="decimal(18,0)" defaultValue="0">
				<constraints nullable="false" />
			</column>
		</addColumn>
	</changeSet>

	<changeSet author="Kesav" id="18">
		<comment>WaivedCGST, WaivedSGST, WaivedUGST, WaivedIGST columns added for GST Waivers</comment>
		<addColumn tableName="ManualAdvise">
			<column name="WaivedCGST" type="decimal(18,0)" defaultValue="0">
				<constraints nullable="false" />
			</column>
			<column name="WaivedSGST" type="decimal(18,0)" defaultValue="0">
				<constraints nullable="false" />
			</column>
			<column name="WaivedIGST" type="decimal(18,0)" defaultValue="0">
				<constraints nullable="false" />
			</column>
			<column name="WaivedUGST" type="decimal(18,0)" defaultValue="0">
				<constraints nullable="false" />
			</column>
		</addColumn>
	</changeSet>

	<changeSet author="Kesav" id="19">
		<comment>WaivedCGST, WaivedSGST, WaivedUGST, WaivedIGST columns added for GST Waivers</comment>
		<addColumn tableName="ManualAdviseMovements_Temp">
			<column name="WaivedCGST" type="decimal(18,0)" defaultValue="0">
				<constraints nullable="false" />
			</column>
			<column name="WaivedSGST" type="decimal(18,0)" defaultValue="0">
				<constraints nullable="false" />
			</column>
			<column name="WaivedIGST" type="decimal(18,0)" defaultValue="0">
				<constraints nullable="false" />
			</column>
			<column name="WaivedUGST" type="decimal(18,0)" defaultValue="0">
				<constraints nullable="false" />
			</column>
		</addColumn>
	</changeSet>

	<changeSet author="Kesav" id="20">
		<comment>WaivedCGST, WaivedSGST, WaivedUGST, WaivedIGST columns added for GST Waivers</comment>
		<addColumn tableName="ManualAdviseMovements">
			<column name="WaivedCGST" type="decimal(18,0)" defaultValue="0">
				<constraints nullable="false" />
			</column>
			<column name="WaivedSGST" type="decimal(18,0)" defaultValue="0">
				<constraints nullable="false" />
			</column>
			<column name="WaivedIGST" type="decimal(18,0)" defaultValue="0">
				<constraints nullable="false" />
			</column>
			<column name="WaivedUGST" type="decimal(18,0)" defaultValue="0">
				<constraints nullable="false" />
			</column>
		</addColumn>
	</changeSet>

	<changeSet id="21_pre" author="Kesav" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_save_and_drop_dependencies ('plf', 'manualadvise_aview');
					select deps_save_and_drop_dependencies ('plf', 'manualadvise_lview');
					select deps_save_and_drop_dependencies ('plf', 'manualadvise_tview');
					select deps_save_and_drop_dependencies ('plf', 'manualadvise_view');
					select deps_save_and_drop_dependencies ('plf', 'manualadvisemovements_aview');
					select deps_save_and_drop_dependencies ('plf', 'manualadvisemovements_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="21" author="Kesav">
		<comment>WaivedCGST, WaivedSGST, WaivedUGST, WaivedIGST columns added for GST Waivers</comment>
		<createView viewName="ManualAdvise_AView" replaceIfExists="true">
			SELECT  	T1.adviseid, T1.advisetype, T1.finreference, T1.feetypeid, T1.sequence, T1.adviseamount, T1.paidamount, T1.waivedamount, T1.remarks, T1.valuedate, T1.postdate, 
						T1.version, T1.lastmntby, T1.lastmnton, T1.recordstatus, T1.rolecode, T1.nextrolecode, T1.taskid, T1.nexttaskid, T1.recordtype, T1.workflowid, 
						T2.feetypedesc, T2.feetypecode, T1.bounceid, T1.receiptid, T3.bouncecode, T1.reservedamt, T1.balanceamt, 
						T3.reason AS bouncecodedesc, COALESCE(T2.taxapplicable, 0) AS taxapplicable, T2.taxcomponent, T1.paidcgst, T1.paidsgst, T1.paidigst, T1.paidugst,
						T1.WaivedCGST, T1.WaivedSGST, T1.WaivedUGST, T1.WaivedIGST
			FROM 		ManualAdvise T1
			LEFT JOIN 	feetypes T2 ON T1.feetypeid = T2.feetypeid
			LEFT JOIN 	bouncereasons T3 ON T1.bounceid = T3.bounceid			
     	</createView>
	</changeSet>
	<changeSet id="22" author="Kesav">
		<comment>WaivedCGST, WaivedSGST, WaivedUGST, WaivedIGST columns added for GST Waivers</comment>
		<createView viewName="ManualAdvise_LView" replaceIfExists="true">
			SELECT 		T1.adviseid, T1.advisetype, T1.finreference, T1.feetypeid, T1.sequence, T1.adviseamount, T1.paidamount, T1.waivedamount, T1.remarks, T1.valuedate, T1.postdate, 
						T1.version, T1.lastmntby, T1.lastmnton, T1.recordstatus, T1.rolecode, T1.nextrolecode, T1.taskid, T1.nexttaskid, T1.recordtype, T1.workflowid, 
						T2.feetypedesc, T2.feetypecode, T1.bounceid, T1.receiptid, T3.bouncecode, T1.reservedamt, T1.balanceamt, T3.reason AS bouncecodedesc, COALESCE(T2.taxapplicable, 0) AS taxapplicable, 
						T2.taxcomponent, T1.paidcgst, T1.paidsgst, T1.paidigst, T1.paidugst, T1.WaivedCGST, T1.WaivedSGST, T1.WaivedUGST, T1.WaivedIGST
			FROM 		ManualAdvise T1
			LEFT JOIN 	feetypes T2 ON T1.feetypeid = T2.feetypeid
			LEFT JOIN 	bouncereasons T3 ON T1.bounceid = T3.bounceid			
     	</createView>
	</changeSet>

	<changeSet id="23" author="Kesav">
		<comment>WaivedCGST, WaivedSGST, WaivedUGST, WaivedIGST columns added for GST Waivers</comment>
		<createView viewName="ManualAdvise_TView" replaceIfExists="true">
			SELECT 		T1.adviseid, T1.advisetype, T1.finreference, T1.feetypeid, T1.sequence, T1.adviseamount, T1.paidamount, T1.waivedamount, T1.remarks, T1.valuedate, T1.postdate, 
						T1.version, T1.lastmntby, T1.lastmnton, T1.recordstatus, T1.rolecode, T1.nextrolecode, T1.taskid, T1.nexttaskid, T1.recordtype, T1.workflowid, T2.feetypedesc, T2.feetypecode, 
						T1.bounceid, T1.receiptid, T3.bouncecode, T1.reservedamt, T1.balanceamt, T3.reason AS bouncecodedesc, COALESCE(T2.taxapplicable, 0) AS taxapplicable, T2.taxcomponent, 
						T1.paidcgst, T1.paidsgst, T1.paidigst, T1.paidugst, T1.WaivedCGST, T1.WaivedSGST, T1.WaivedUGST, T1.WaivedIGST
			FROM 		ManualAdvise_temp T1
			LEFT JOIN 	feetypes T2 ON T1.feetypeid = T2.feetypeid
			LEFT JOIN 	bouncereasons T3 ON T1.bounceid = T3.bounceid			
     	</createView>
	</changeSet>
	<changeSet id="24" author="Kesav">
		<comment>WaivedCGST, WaivedSGST, WaivedUGST, WaivedIGST columns added for GST Waivers</comment>
		<createView viewName="ManualAdvise_View" replaceIfExists="true">
			SELECT  	T1.adviseid, T1.advisetype, T1.finreference, T1.feetypeid, T1.sequence, T1.adviseamount, T1.paidamount, T1.waivedamount, T1.remarks, T1.valuedate, T1.postdate, 
						T1.version, T1.lastmntby, T1.lastmnton, T1.recordstatus, T1.rolecode, T1.nextrolecode, T1.taskid, T1.nexttaskid, T1.recordtype, T1.workflowid, T2.feetypedesc, T2.feetypecode, 
						T1.bounceid, T1.receiptid, T3.bouncecode, T1.reservedamt, T1.balanceamt, T3.reason AS bouncecodedesc, COALESCE(T2.taxapplicable, 0) AS taxapplicable, T2.taxcomponent, 
						T1.paidcgst, T1.paidsgst, T1.paidigst, T1.paidugst, T1.WaivedCGST, T1.WaivedSGST, T1.WaivedUGST, T1.WaivedIGST
			FROM 		ManualAdvise_temp T1
			LEFT JOIN 	feetypes T2 ON T1.feetypeid = T2.feetypeid
			LEFT JOIN 	bouncereasons T3 ON T1.bounceid = T3.bounceid
			
			UNION ALL
			
			SELECT  	T1.adviseid, T1.advisetype, T1.finreference, T1.feetypeid, T1.sequence, T1.adviseamount, T1.paidamount, T1.waivedamount, T1.remarks, T1.valuedate, T1.postdate, 
						T1.version, T1.lastmntby, T1.lastmnton, T1.recordstatus, T1.rolecode, T1.nextrolecode, T1.taskid, T1.nexttaskid, T1.recordtype, T1.workflowid, T2.feetypedesc, T2.feetypecode, 
						T1.bounceid, T1.receiptid, T3.bouncecode, T1.reservedamt, T1.balanceamt, T3.reason AS bouncecodedesc, COALESCE(T2.taxapplicable, 0) AS taxapplicable, T2.taxcomponent, 
						T1.paidcgst, T1.paidsgst, T1.paidigst, T1.paidugst, T1.WaivedCGST, T1.WaivedSGST, T1.WaivedUGST, T1.WaivedIGST
			FROM 		ManualAdvise T1
			LEFT JOIN 	feetypes T2 ON T1.feetypeid = T2.feetypeid
			LEFT JOIN 	bouncereasons T3 ON T1.bounceid = T3.bounceid
			WHERE NOT (EXISTS ( SELECT 1 FROM ManualAdvise_temp WHERE ManualAdvise_temp.adviseid = T1.adviseid))			
     	</createView>
	</changeSet>

	<changeSet id="25" author="Kesav">
		<comment>WaivedCGST, WaivedSGST, WaivedUGST, WaivedIGST columns added for GST Waivers</comment>
		<createView viewName="ManualAdvisemovements_AView" replaceIfExists="true">
			SELECT  	T1.movementid, T1.adviseid, T1.movementdate, T1.movementamount, T1.paidamount, T1.waivedamount, T1.status, T1.receiptid, T1.receiptseqid, 
						T1.paidcgst, T1.paidsgst, T1.paidigst, T1.paidugst, 
						T2.advisetype, T3.feetypecode, COALESCE(T3.taxapplicable, 0) AS taxapplicable, T3.taxcomponent, T3.feetypedesc, T1.WaivedCGST, T1.WaivedSGST, T1.WaivedUGST, T1.WaivedIGST
			FROM 		ManualAdvisemovements T1
			JOIN 		ManualAdvise T2 ON T1.adviseid = T2.adviseid
			LEFT JOIN 	feetypes T3 ON T2.feetypeid = T3.feetypeid
     	</createView>
	</changeSet>

	<changeSet id="26" author="Kesav">
		<comment>WaivedCGST, WaivedSGST, WaivedUGST, WaivedIGST columns added for GST Waivers</comment>
		<createView viewName="ManualAdvisemovements_TView" replaceIfExists="true">
			SELECT  	T1.movementid, T1.adviseid, T1.movementdate, T1.movementamount, T1.paidamount, T1.waivedamount, T1.status, T1.receiptid, T1.receiptseqid, 
						T1.paidcgst, T1.paidsgst, T1.paidigst, T1.paidugst, 
						T2.advisetype, T3.feetypecode, COALESCE(T3.taxapplicable, 0) AS taxapplicable, T3.taxcomponent, T3.feetypedesc, T1.WaivedCGST, T1.WaivedSGST, T1.WaivedUGST, T1.WaivedIGST
			FROM 		ManualAdvisemovements_temp T1
			JOIN 		ManualAdvise T2 ON T1.adviseid = T2.adviseid
			LEFT JOIN 	feetypes T3 ON T2.feetypeid = T3.feetypeid			
     	</createView>
	</changeSet>

	<changeSet id="21_post" author="Kesav" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_restore_dependencies ('plf', 'manualadvise_aview');
					select deps_restore_dependencies ('plf', 'manualadvise_lview');
					select deps_restore_dependencies ('plf', 'manualadvise_tview');
					select deps_restore_dependencies ('plf', 'manualadvise_view');
					select deps_restore_dependencies ('plf', 'manualadvisemovements_aview');
					select deps_restore_dependencies ('plf', 'manualadvisemovements_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="27" author="Kesav">
		<comment>LPP Waiver GST accounting Configuration parameters</comment>
		<sql>
			insert into BMTAMOUNTCODES
			values('LATEPAY',0,'LPP_CGST_W','Penalty charge CGST
			Waived',1,1,1000,Current_TimeStamp,'Approved',null,null,null,null,null,0);
			insert into BMTAMOUNTCODES
			values('LATEPAY',0,'LPP_SGST_W','Penalty
			charge SGST
			Waived',1,1,1000,Current_TimeStamp,'Approved',null,null,null,null,null,0);
			insert into BMTAMOUNTCODES
			values('LATEPAY',0,'LPP_IGST_W','Penalty
			charge IGST
			Waived',1,1,1000,Current_TimeStamp,'Approved',null,null,null,null,null,0);
			insert into BMTAMOUNTCODES
			values('LATEPAY',0,'LPP_UGST_W','Penalty
			charge UGST
			Waived',1,1,1000,Current_TimeStamp,'Approved',null,null,null,null,null,0);
		</sql>
	</changeSet>

	<changeSet id="28" author="Kesav">
		<comment>Bounce Waiver GST accounting Configuration parameters</comment>
		<sql>
			insert into BMTAMOUNTCODES
			values('REPAY',0,'bounceCharge_CGST_W','Bounce charge CGST
			Waived',1,1,1000,Current_TimeStamp,'Approved',null,null,null,null,null,0);
			insert into BMTAMOUNTCODES
			values('REPAY',0,'bounceCharge_SGST_W','Bounce charge SGST
			Waived',1,1,1000,Current_TimeStamp,'Approved',null,null,null,null,null,0);
			insert into BMTAMOUNTCODES
			values('REPAY',0,'bounceCharge_IGST_W','Bounce charge IGST
			Waived',1,1,1000,Current_TimeStamp,'Approved',null,null,null,null,null,0);
			insert into
			BMTAMOUNTCODES
			values('REPAY',0,'bounceCharge_UGST_W','Bounce charge UGST
			Waived',1,1,1000,Current_TimeStamp,'Approved',null,null,null,null,null,0);

			insert into BMTAMOUNTCODES
			values('EARLYSTL',0,'bounceCharge_CGST_W','Bounce charge CGST
			Waived',1,1,1000,Current_TimeStamp,'Approved',null,null,null,null,null,0);
			insert into BMTAMOUNTCODES
			values('EARLYSTL',0,'bounceCharge_SGST_W','Bounce charge SGST
			Waived',1,1,1000,Current_TimeStamp,'Approved',null,null,null,null,null,0);
			insert into BMTAMOUNTCODES
			values('EARLYSTL',0,'bounceCharge_IGST_W','Bounce charge IGST
			Waived',1,1,1000,Current_TimeStamp,'Approved',null,null,null,null,null,0);
			insert into BMTAMOUNTCODES
			values('EARLYSTL',0,'bounceCharge_UGST_W','Bounce charge UGST
			Waived',1,1,1000,Current_TimeStamp,'Approved',null,null,null,null,null,0);
		</sql>
	</changeSet>

	<changeSet author="Kesav" id="29">
		<comment>waivedGST column added for GST Waivers</comment>
		<addColumn tableName="FinFeeDetail">
			<column name="WaivedGST" type="decimal(18,0)" defaultValue="0">
				<constraints nullable="false" />
			</column>
		</addColumn>
	</changeSet>

	<changeSet author="Kesav" id="30">
		<comment>waivedGST column added for GST Waivers</comment>
		<addColumn tableName="FinFeeDetail_Temp">
			<column name="WaivedGST" type="decimal(18,0)" defaultValue="0">
				<constraints nullable="false" />
			</column>
		</addColumn>
	</changeSet>

	<changeSet author="Kesav" id="31">
		<comment>WaivedCGST, WaivedSGST, WaivedUGST, WaivedIGST, WaivedTGST columns added for GST Waivers</comment>
		<addColumn tableName="FinTaxDetails">
			<column name="WaivedCGST" type="decimal(18,0)" defaultValue="0">
				<constraints nullable="false" />
			</column>
			<column name="WaivedSGST" type="decimal(18,0)" defaultValue="0">
				<constraints nullable="false" />
			</column>
			<column name="WaivedIGST" type="decimal(18,0)" defaultValue="0">
				<constraints nullable="false" />
			</column>
			<column name="WaivedUGST" type="decimal(18,0)" defaultValue="0">
				<constraints nullable="false" />
			</column>
			<column name="WaivedTGST" type="decimal(18,0)" defaultValue="0">
				<constraints nullable="false" />
			</column>
		</addColumn>
	</changeSet>

	<changeSet author="Kesav" id="32">
		<comment>WaivedCGST, WaivedSGST, WaivedUGST, WaivedIGST, WaivedTGST columns added for GST Waivers</comment>
		<addColumn tableName="FinTaxDetails_Temp">
			<column name="WaivedCGST" type="decimal(18,0)" defaultValue="0">
				<constraints nullable="false" />
			</column>
			<column name="WaivedSGST" type="decimal(18,0)" defaultValue="0">
				<constraints nullable="false" />
			</column>
			<column name="WaivedIGST" type="decimal(18,0)" defaultValue="0">
				<constraints nullable="false" />
			</column>
			<column name="WaivedUGST" type="decimal(18,0)" defaultValue="0">
				<constraints nullable="false" />
			</column>
			<column name="WaivedTGST" type="decimal(18,0)" defaultValue="0">
				<constraints nullable="false" />
			</column>
		</addColumn>
	</changeSet>

	<changeSet author="Kesav" id="33">
		<comment>waivedGST column added for GST Waivers</comment>
		<addColumn tableName="WIFFinFeeDetail">
			<column name="WaivedGST" type="decimal(18,0)" defaultValue="0">
				<constraints nullable="false" />
			</column>
		</addColumn>
	</changeSet>

	<changeSet author="Kesav" id="34">
		<comment>waivedGST column added for GST Waivers</comment>
		<addColumn tableName="WIFFinFeeDetail_Temp">
			<column name="WaivedGST" type="decimal(18,0)" defaultValue="0">
				<constraints nullable="false" />
			</column>
		</addColumn>
	</changeSet>

	<changeSet id="35_pre" author="Kesav" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_save_and_drop_dependencies ('plf', 'finfeedetail_aview');
					select deps_save_and_drop_dependencies ('plf', 'finfeedetail_tview');
					select deps_save_and_drop_dependencies ('plf', 'finfeedetail_view');
					select deps_save_and_drop_dependencies ('plf', 'fintaxdetails_aview');
					select deps_save_and_drop_dependencies ('plf', 'fintaxdetails_tview');
					select deps_save_and_drop_dependencies ('plf', 'fintaxdetails_view');
					select deps_save_and_drop_dependencies ('plf', 'wiffinfeedetail_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="35" author="Kesav">
		<comment>WaivedGST column added for GST Waivers</comment>
		<createView viewName="FinFeeDetail_Aview" replaceIfExists="true">
			SELECT  	t1.feeid, t1.finreference, t1.originationfee, t1.finevent, t1.feetypeid, t1.feeseq, t1.feeorder, t1.calculatedamount, t1.actualamount, t1.waivedamount, t1.paidamount, 
						t1.feeschedulemethod, t1.terms, t1.remainingfee, t1.paymentref, t1.calculationtype, t1.rulecode, t1.fixedamount, t1.percentage, t1.calculateon, t1.alwdeviation, t1.maxwaiverperc, 
						t1.alwmodifyfee, t1.alwmodifyfeeschdmthd, t1.vasreference, t1.taxapplicable, t1.taxcomponent, t1.paidamountoriginal, t1.paidamountgst, t1.netamountoriginal, t1.netamountgst, 
						t1.netamount, t1.remainingfeeoriginal, t1.remainingfeegst, t1.actualamountoriginal, t1.actualamountgst, t1.feeamz, 
						t1.version, t1.lastmntby, t1.lastmnton, t1.recordstatus, t1.rolecode, t1.nextrolecode, t1.taskid, t1.nexttaskid, t1.recordtype, t1.transactionid, t1.workflowid, 
						t2.feetypecode, t2.feetypedesc, t1.status, t1.refundable, t1.instructionuid, t1.actpercentage, T1.WaivedGST
			FROM 		finfeedetail t1
			LEFT JOIN 	feetypes t2 ON t1.feetypeid = t2.feetypeid				
     	</createView>
	</changeSet>

	<changeSet id="36" author="Kesav">
		<comment>WaivedGST column added for GST Waivers</comment>
		<createView viewName="finfeedetail_tview" replaceIfExists="true">
			SELECT 		t1.feeid, t1.finreference, t1.originationfee, t1.finevent, t1.feetypeid, t1.feeseq, t1.feeorder, t1.calculatedamount, t1.actualamount, t1.waivedamount, t1.paidamount, t1.feeschedulemethod,
						t1.terms, t1.remainingfee, t1.paymentref, t1.calculationtype, t1.rulecode, t1.fixedamount, t1.percentage, t1.calculateon, t1.alwdeviation, t1.maxwaiverperc, t1.alwmodifyfee, 
						t1.alwmodifyfeeschdmthd, t1.vasreference, t1.status, t1.taxapplicable, t1.taxcomponent, t1.paidamountoriginal, t1.paidamountgst, t1.netamountoriginal, t1.netamountgst, t1.netamount, 
						t1.remainingfeeoriginal, t1.remainingfeegst, t1.actualamountoriginal, t1.actualamountgst, t1.feeamz, 
						t1.version, t1.lastmntby, t1.lastmnton, t1.recordstatus, t1.rolecode, t1.nextrolecode, t1.taskid, t1.nexttaskid, t1.recordtype, t1.transactionid, t1.workflowid, 
						t2.feetypecode, t2.feetypedesc, t1.refundable, t1.instructionuid, t1.actpercentage, T1.WaivedGST
			FROM 		finfeedetail_temp t1
			LEFT JOIN 	feetypes t2 ON t1.feetypeid = t2.feetypeid				
     	</createView>
	</changeSet>

	<changeSet id="37" author="Kesav">
		<comment>WaivedGST column added for GST Waivers</comment>
		<createView viewName="finfeedetail_view" replaceIfExists="true">
			SELECT 		t1.feeid, t1.finreference, t1.originationfee, t1.finevent, t1.feetypeid, t1.feeseq, t1.feeorder, t1.calculatedamount, t1.actualamount, t1.waivedamount, t1.paidamount, 
						t1.feeschedulemethod, t1.terms, t1.remainingfee, t1.paymentref, t1.calculationtype, t1.rulecode, t1.fixedamount, t1.percentage, t1.calculateon, t1.alwdeviation, t1.maxwaiverperc, 
						t1.alwmodifyfee, t1.alwmodifyfeeschdmthd, t1.vasreference, t1.status, t1.taxapplicable, t1.taxcomponent, t1.paidamountoriginal, t1.paidamountgst, t1.netamountoriginal, 
						t1.netamountgst, t1.netamount, t1.remainingfeeoriginal, t1.remainingfeegst, t1.actualamountoriginal, t1.actualamountgst, t1.feeamz, 
						t1.version, t1.lastmntby, t1.lastmnton, t1.recordstatus, t1.rolecode, t1.nextrolecode, t1.taskid, t1.nexttaskid, t1.recordtype, t1.transactionid, t1.workflowid, 
						t2.feetypecode, t2.feetypedesc, t1.refundable, t1.instructionuid, t1.actpercentage, T1.WaivedGST
			FROM 		finfeedetail_temp t1
			LEFT JOIN 	feetypes t2 ON t1.feetypeid = t2.feetypeid
			
			UNION ALL
			
			SELECT 		t1.feeid, t1.finreference, t1.originationfee, t1.finevent, t1.feetypeid, t1.feeseq, t1.feeorder, t1.calculatedamount, t1.actualamount, t1.waivedamount, t1.paidamount, 
						t1.feeschedulemethod, t1.terms, t1.remainingfee, t1.paymentref, t1.calculationtype, t1.rulecode, t1.fixedamount, t1.percentage, t1.calculateon, t1.alwdeviation, t1.maxwaiverperc, 
						t1.alwmodifyfee, t1.alwmodifyfeeschdmthd, t1.vasreference, t1.status, t1.taxapplicable, t1.taxcomponent, t1.paidamountoriginal, t1.paidamountgst, t1.netamountoriginal, 
						t1.netamountgst, t1.netamount, t1.remainingfeeoriginal, t1.remainingfeegst, t1.actualamountoriginal, t1.actualamountgst, t1.feeamz, 
						t1.version, t1.lastmntby, t1.lastmnton, t1.recordstatus, t1.rolecode, t1.nextrolecode, t1.taskid, t1.nexttaskid, t1.recordtype, t1.transactionid, t1.workflowid, 
						t2.feetypecode, t2.feetypedesc, t1.refundable, t1.instructionuid, t1.actpercentage, T1.WaivedGST
			FROM 		finfeedetail t1
			LEFT JOIN 	feetypes t2 ON t1.feetypeid = t2.feetypeid
			
			WHERE NOT (EXISTS ( SELECT 1 FROM finfeedetail_temp WHERE finfeedetail_temp.feeid = t1.feeid))				
     	</createView>
	</changeSet>

	<changeSet id="38" author="Kesav">
		<comment>WaivedCGST, WaivedSGST, WaivedUGST, WaivedIGST, WaivedTGST columns added for GST Waivers</comment>
		<createView viewName="fintaxdetails_aview" replaceIfExists="true">
			SELECT 		T1.fintaxid, T1.feeid, T1.paidcgst, T1.paidigst, T1.paidugst, T1.paidsgst, T1.paidtgst, T1.netcgst, T1.netigst, T1.netugst, T1.netsgst, T1.nettgst, T1.remfeecgst, T1.remfeeigst,T1.remfeeugst, T1.remfeesgst, T1.remfeetgst, 
						T1.version, T1.lastmntby, T1.lastmnton, T1.recordstatus, T1.rolecode, T1.nextrolecode, T1.taskid, T1.nexttaskid, T1.recordtype, T1.workflowid, 
						T1.actualcgst, T1.actualigst, T1.actualugst, T1.actualsgst, T1.actualtgst, T1.WaivedCGST, T1.WaivedSGST, T1.WaivedUGST, T1.WaivedIGST, T1.WaivedTGST
			FROM 		fintaxdetails T1
			LEFT JOIN 	finfeedetail T2 ON T1.feeid = T2.feeid			
     	</createView>
	</changeSet>

	<changeSet id="39" author="Kesav">
		<comment>WaivedCGST, WaivedSGST, WaivedUGST, WaivedIGST, WaivedTGST columns added for GST Waivers</comment>
		<createView viewName="fintaxdetails_tview" replaceIfExists="true">
			SELECT 		T1.fintaxid, T1.feeid, T1.paidcgst, T1.paidigst, T1.paidugst, T1.paidsgst, T1.paidtgst, T1.netcgst, T1.netigst, T1.netugst, T1.netsgst, T1.nettgst, T1.remfeecgst, T1.remfeeigst, T1.remfeeugst, T1.remfeesgst, T1.remfeetgst, 
						T1.version, T1.lastmntby, T1.lastmnton, T1.recordstatus, T1.rolecode, T1.nextrolecode, T1.taskid, T1.nexttaskid, T1.recordtype, T1.workflowid, 
						T1.actualcgst, T1.actualigst, T1.actualugst, T1.actualsgst, T1.actualtgst, T1.WaivedCGST, T1.WaivedSGST, T1.WaivedUGST, T1.WaivedIGST, T1.WaivedTGST
			FROM 		fintaxdetails_temp T1
			LEFT JOIN 	finfeedetail T2 ON T1.feeid = T2.feeid			
     	</createView>
	</changeSet>

	<changeSet id="40" author="Kesav">
		<comment>WaivedCGST, WaivedSGST, WaivedUGST, WaivedIGST, WaivedTGST columns added for GST Waivers</comment>
		<createView viewName="fintaxdetails_view" replaceIfExists="true">
			SELECT 		T1.fintaxid, T1.feeid, T1.paidcgst, T1.paidigst, T1.paidugst, T1.paidsgst, T1.paidtgst, T1.netcgst, T1.netigst, T1.netugst, T1.netsgst, T1.nettgst, T1.remfeecgst, T1.remfeeigst, T1.remfeeugst, T1.remfeesgst, T1.remfeetgst, 
						T1.version, T1.lastmntby, T1.lastmnton, T1.recordstatus, T1.rolecode, T1.nextrolecode, T1.taskid, T1.nexttaskid, T1.recordtype, T1.workflowid, 
						T1.actualcgst, T1.actualigst, T1.actualugst, T1.actualsgst, T1.actualtgst, T1.WaivedCGST, T1.WaivedSGST, T1.WaivedUGST, T1.WaivedIGST, T1.WaivedTGST
			FROM 		fintaxdetails_temp T1
			LEFT JOIN 	finfeedetail T2 ON T1.feeid = T2.feeid
			
			UNION ALL
			
			SELECT 		T1.fintaxid, T1.feeid, T1.paidcgst, T1.paidigst, T1.paidugst, T1.paidsgst, T1.paidtgst, T1.netcgst, T1.netigst, T1.netugst, T1.netsgst, T1.nettgst, T1.remfeecgst, T1.remfeeigst, T1.remfeeugst, T1.remfeesgst, T1.remfeetgst, 
						T1.version, T1.lastmntby, T1.lastmnton, T1.recordstatus, T1.rolecode, T1.nextrolecode, T1.taskid, T1.nexttaskid, T1.recordtype, T1.workflowid, 
						T1.actualcgst, T1.actualigst, T1.actualugst, T1.actualsgst, T1.actualtgst, T1.WaivedCGST, T1.WaivedSGST, T1.WaivedUGST, T1.WaivedIGST, T1.WaivedTGST
			FROM 		fintaxdetails T1
			LEFT JOIN 	finfeedetail T2 ON T1.feeid = T2.feeid
			WHERE NOT (EXISTS ( SELECT 1 FROM fintaxdetails_temp WHERE fintaxdetails_temp.feeid = T1.feeid AND fintaxdetails_temp.fintaxid = T1.fintaxid))				
     	</createView>
	</changeSet>

	<changeSet id="41" author="Kesav">
		<comment>WaivedGST column added for GST Waivers</comment>
		<createView viewName="Wiffinfeedetail_View" replaceIfExists="true">
			SELECT 		T1.feeid, T1.finreference, T1.feeseq, T1.originationfee, T1.finevent, T1.feetypeid, T1.feeorder, T1.calculatedamount, T1.actualamount, T1.waivedamount, T1.paidamount, 
						T1.feeschedulemethod, T1.terms, T1.remainingfee, T1.paymentref, T1.calculationtype, T1.rulecode, T1.fixedamount, T1.percentage, T1.calculateon, T1.alwdeviation, T1.maxwaiverperc, 
						T1.alwmodifyfee, T1.alwmodifyfeeschdmthd, T1.vasreference, T1.status, T1.taxapplicable, T1.taxcomponent, T1.paidamountoriginal, T1.paidamountgst, T1.netamountoriginal, 
						T1.netamountgst, T1.netamount, T1.remainingfeeoriginal, T1.remainingfeegst, T1.actualamountoriginal, T1.actualamountgst, 
						T1.version, T1.lastmntby, T1.lastmnton, T1.recordstatus, T1.rolecode, T1.nextrolecode, T1.taskid, T1.nexttaskid, T1.recordtype, T1.workflowid, 
						T2.feetypecode, T2.feetypedesc, T1.refundable, T1.instructionuid, T1.WaivedGST
			FROM 		wiffinfeedetail_temp T1
			LEFT JOIN 	feetypes T2 ON T1.feetypeid = T2.feetypeid
			
			UNION ALL
			 
			SELECT 		T1.feeid, T1.finreference, T1.feeseq, T1.originationfee, T1.finevent, T1.feetypeid, T1.feeorder, T1.calculatedamount, T1.actualamount, T1.waivedamount, T1.paidamount, 
						T1.feeschedulemethod, T1.terms, T1.remainingfee, T1.paymentref, T1.calculationtype, T1.rulecode, T1.fixedamount, T1.percentage, T1.calculateon, T1.alwdeviation, T1.maxwaiverperc, 
						T1.alwmodifyfee, T1.alwmodifyfeeschdmthd, T1.vasreference, T1.status, T1.taxapplicable, T1.taxcomponent, T1.paidamountoriginal, T1.paidamountgst, T1.netamountoriginal, 
						T1.netamountgst, T1.netamount, T1.remainingfeeoriginal, T1.remainingfeegst, T1.actualamountoriginal, T1.actualamountgst, 
						T1.version, T1.lastmntby, T1.lastmnton, T1.recordstatus, T1.rolecode, T1.nextrolecode, T1.taskid, T1.nexttaskid, T1.recordtype, T1.workflowid, 
						T2.feetypecode, T2.feetypedesc, T1.refundable, T1.instructionuid, T1.WaivedGST
			FROM 		wiffinfeedetail T1
			LEFT JOIN 	feetypes T2 ON T1.feetypeid = T2.feetypeid
			
			WHERE NOT (EXISTS ( SELECT 1 FROM wiffinfeedetail_temp WHERE wiffinfeedetail_temp.finreference = T1.finreference AND wiffinfeedetail_temp.originationfee = T1.originationfee AND wiffinfeedetail_temp.finevent = T1.finevent AND wiffinfeedetail_temp.feetypeid = T1.feetypeid))				
     	</createView>
	</changeSet>

	<changeSet id="35_post" author="Kesav" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_restore_dependencies ('plf', 'finfeedetail_aview');
					select deps_restore_dependencies ('plf', 'finfeedetail_tview');
					select deps_restore_dependencies ('plf', 'finfeedetail_view');
					select deps_restore_dependencies ('plf', 'fintaxdetails_aview');
					select deps_restore_dependencies ('plf', 'fintaxdetails_tview');
					select deps_restore_dependencies ('plf', 'fintaxdetails_view');
					select deps_restore_dependencies ('plf', 'wiffinfeedetail_view');
			]]>
		</sql>
	</changeSet>

	<changeSet author="Kesav" id="42">
		<comment>ReferenceId column added for Receipt Fees</comment>
		<addColumn tableName="FinFeeDetail">
			<column name="ReferenceId" type="bigint" defaultValue="0">
				<constraints nullable="false" />
			</column>
		</addColumn>
	</changeSet>

	<changeSet author="Kesav" id="43">
		<comment>ReferenceId column added for Receipt Fees</comment>
		<addColumn tableName="FinFeeDetail_Temp">
			<column name="ReferenceId" type="bigint" defaultValue="0">
				<constraints nullable="false" />
			</column>
		</addColumn>
	</changeSet>

	<changeSet author="Kesav" id="44">
		<comment>ReferenceId column added for Receipt Fees</comment>
		<addColumn tableName="WIFFinFeeDetail">
			<column name="ReferenceId" type="bigint" defaultValue="0">
				<constraints nullable="false" />
			</column>
		</addColumn>
	</changeSet>

	<changeSet author="Kesav" id="45">
		<comment>ReferenceId column added for Receipt Fees</comment>
		<addColumn tableName="WIFFinFeeDetail_Temp">
			<column name="ReferenceId" type="bigint" defaultValue="0">
				<constraints nullable="false" />
			</column>
		</addColumn>
	</changeSet>

	<changeSet id="46_pre" author="Kesav" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_save_and_drop_dependencies ('plf', 'finfeedetail_aview');
					select deps_save_and_drop_dependencies ('plf', 'finfeedetail_tview');
					select deps_save_and_drop_dependencies ('plf', 'finfeedetail_view');
					select deps_save_and_drop_dependencies ('plf', 'wiffinfeedetail_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="46" author="Kesav">
		<comment>ReferenceId column added for Receipt Fees</comment>
		<createView viewName="FinFeeDetail_Aview" replaceIfExists="true">
			SELECT  	t1.feeid, t1.finreference, t1.originationfee, t1.finevent, t1.feetypeid, t1.feeseq, t1.feeorder, t1.calculatedamount, t1.actualamount, t1.waivedamount, t1.paidamount, 
						t1.feeschedulemethod, t1.terms, t1.remainingfee, t1.paymentref, t1.calculationtype, t1.rulecode, t1.fixedamount, t1.percentage, t1.calculateon, t1.alwdeviation, t1.maxwaiverperc, 
						t1.alwmodifyfee, t1.alwmodifyfeeschdmthd, t1.vasreference, t1.taxapplicable, t1.taxcomponent, t1.paidamountoriginal, t1.paidamountgst, t1.netamountoriginal, t1.netamountgst, 
						t1.netamount, t1.remainingfeeoriginal, t1.remainingfeegst, t1.actualamountoriginal, t1.actualamountgst, t1.feeamz, 
						t1.version, t1.lastmntby, t1.lastmnton, t1.recordstatus, t1.rolecode, t1.nextrolecode, t1.taskid, t1.nexttaskid, t1.recordtype, t1.transactionid, t1.workflowid, 
						t2.feetypecode, t2.feetypedesc, t1.status, t1.refundable, t1.instructionuid, t1.actpercentage, T1.WaivedGST, T1.ReferenceId
			FROM 		finfeedetail t1
			LEFT JOIN 	feetypes t2 ON t1.feetypeid = t2.feetypeid				
     	</createView>
	</changeSet>

	<changeSet id="47" author="Kesav">
		<comment>ReferenceId column added for Receipt Fees</comment>
		<createView viewName="finfeedetail_tview" replaceIfExists="true">
			SELECT 		t1.feeid, t1.finreference, t1.originationfee, t1.finevent, t1.feetypeid, t1.feeseq, t1.feeorder, t1.calculatedamount, t1.actualamount, t1.waivedamount, t1.paidamount, t1.feeschedulemethod,
						t1.terms, t1.remainingfee, t1.paymentref, t1.calculationtype, t1.rulecode, t1.fixedamount, t1.percentage, t1.calculateon, t1.alwdeviation, t1.maxwaiverperc, t1.alwmodifyfee, 
						t1.alwmodifyfeeschdmthd, t1.vasreference, t1.status, t1.taxapplicable, t1.taxcomponent, t1.paidamountoriginal, t1.paidamountgst, t1.netamountoriginal, t1.netamountgst, t1.netamount, 
						t1.remainingfeeoriginal, t1.remainingfeegst, t1.actualamountoriginal, t1.actualamountgst, t1.feeamz, 
						t1.version, t1.lastmntby, t1.lastmnton, t1.recordstatus, t1.rolecode, t1.nextrolecode, t1.taskid, t1.nexttaskid, t1.recordtype, t1.transactionid, t1.workflowid, 
						t2.feetypecode, t2.feetypedesc, t1.refundable, t1.instructionuid, t1.actpercentage, T1.WaivedGST, T1.ReferenceId
			FROM 		finfeedetail_temp t1
			LEFT JOIN 	feetypes t2 ON t1.feetypeid = t2.feetypeid				
     	</createView>
	</changeSet>

	<changeSet id="48" author="Kesav">
		<comment>ReferenceId column added for Receipt Fees</comment>
		<createView viewName="finfeedetail_view" replaceIfExists="true">
			SELECT 		t1.feeid, t1.finreference, t1.originationfee, t1.finevent, t1.feetypeid, t1.feeseq, t1.feeorder, t1.calculatedamount, t1.actualamount, t1.waivedamount, t1.paidamount, 
						t1.feeschedulemethod, t1.terms, t1.remainingfee, t1.paymentref, t1.calculationtype, t1.rulecode, t1.fixedamount, t1.percentage, t1.calculateon, t1.alwdeviation, t1.maxwaiverperc, 
						t1.alwmodifyfee, t1.alwmodifyfeeschdmthd, t1.vasreference, t1.status, t1.taxapplicable, t1.taxcomponent, t1.paidamountoriginal, t1.paidamountgst, t1.netamountoriginal, 
						t1.netamountgst, t1.netamount, t1.remainingfeeoriginal, t1.remainingfeegst, t1.actualamountoriginal, t1.actualamountgst, t1.feeamz, 
						t1.version, t1.lastmntby, t1.lastmnton, t1.recordstatus, t1.rolecode, t1.nextrolecode, t1.taskid, t1.nexttaskid, t1.recordtype, t1.transactionid, t1.workflowid, 
						t2.feetypecode, t2.feetypedesc, t1.refundable, t1.instructionuid, t1.actpercentage, T1.WaivedGST, T1.ReferenceId
			FROM 		finfeedetail_temp t1
			LEFT JOIN 	feetypes t2 ON t1.feetypeid = t2.feetypeid
			
			UNION ALL
			
			SELECT 		t1.feeid, t1.finreference, t1.originationfee, t1.finevent, t1.feetypeid, t1.feeseq, t1.feeorder, t1.calculatedamount, t1.actualamount, t1.waivedamount, t1.paidamount, 
						t1.feeschedulemethod, t1.terms, t1.remainingfee, t1.paymentref, t1.calculationtype, t1.rulecode, t1.fixedamount, t1.percentage, t1.calculateon, t1.alwdeviation, t1.maxwaiverperc, 
						t1.alwmodifyfee, t1.alwmodifyfeeschdmthd, t1.vasreference, t1.status, t1.taxapplicable, t1.taxcomponent, t1.paidamountoriginal, t1.paidamountgst, t1.netamountoriginal, 
						t1.netamountgst, t1.netamount, t1.remainingfeeoriginal, t1.remainingfeegst, t1.actualamountoriginal, t1.actualamountgst, t1.feeamz, 
						t1.version, t1.lastmntby, t1.lastmnton, t1.recordstatus, t1.rolecode, t1.nextrolecode, t1.taskid, t1.nexttaskid, t1.recordtype, t1.transactionid, t1.workflowid, 
						t2.feetypecode, t2.feetypedesc, t1.refundable, t1.instructionuid, t1.actpercentage, T1.WaivedGST, T1.ReferenceId
			FROM 		finfeedetail t1
			LEFT JOIN 	feetypes t2 ON t1.feetypeid = t2.feetypeid
			
			WHERE NOT (EXISTS ( SELECT 1 FROM finfeedetail_temp WHERE finfeedetail_temp.feeid = t1.feeid))				
     	</createView>
	</changeSet>

	<changeSet id="49" author="Kesav">
		<comment>ReferenceId column added for Receipt Fees</comment>
		<createView viewName="Wiffinfeedetail_View" replaceIfExists="true">
			SELECT 		T1.feeid, T1.finreference, T1.feeseq, T1.originationfee, T1.finevent, T1.feetypeid, T1.feeorder, T1.calculatedamount, T1.actualamount, T1.waivedamount, T1.paidamount, 
						T1.feeschedulemethod, T1.terms, T1.remainingfee, T1.paymentref, T1.calculationtype, T1.rulecode, T1.fixedamount, T1.percentage, T1.calculateon, T1.alwdeviation, T1.maxwaiverperc, 
						T1.alwmodifyfee, T1.alwmodifyfeeschdmthd, T1.vasreference, T1.status, T1.taxapplicable, T1.taxcomponent, T1.paidamountoriginal, T1.paidamountgst, T1.netamountoriginal, 
						T1.netamountgst, T1.netamount, T1.remainingfeeoriginal, T1.remainingfeegst, T1.actualamountoriginal, T1.actualamountgst, 
						T1.version, T1.lastmntby, T1.lastmnton, T1.recordstatus, T1.rolecode, T1.nextrolecode, T1.taskid, T1.nexttaskid, T1.recordtype, T1.workflowid, 
						T2.feetypecode, T2.feetypedesc, T1.refundable, T1.instructionuid, T1.WaivedGST, T1.ReferenceId
			FROM 		wiffinfeedetail_temp T1
			LEFT JOIN 	feetypes T2 ON T1.feetypeid = T2.feetypeid
			
			UNION ALL
			 
			SELECT 		T1.feeid, T1.finreference, T1.feeseq, T1.originationfee, T1.finevent, T1.feetypeid, T1.feeorder, T1.calculatedamount, T1.actualamount, T1.waivedamount, T1.paidamount, 
						T1.feeschedulemethod, T1.terms, T1.remainingfee, T1.paymentref, T1.calculationtype, T1.rulecode, T1.fixedamount, T1.percentage, T1.calculateon, T1.alwdeviation, T1.maxwaiverperc, 
						T1.alwmodifyfee, T1.alwmodifyfeeschdmthd, T1.vasreference, T1.status, T1.taxapplicable, T1.taxcomponent, T1.paidamountoriginal, T1.paidamountgst, T1.netamountoriginal, 
						T1.netamountgst, T1.netamount, T1.remainingfeeoriginal, T1.remainingfeegst, T1.actualamountoriginal, T1.actualamountgst, 
						T1.version, T1.lastmntby, T1.lastmnton, T1.recordstatus, T1.rolecode, T1.nextrolecode, T1.taskid, T1.nexttaskid, T1.recordtype, T1.workflowid, 
						T2.feetypecode, T2.feetypedesc, T1.refundable, T1.instructionuid, T1.WaivedGST, T1.ReferenceId
			FROM 		wiffinfeedetail T1
			LEFT JOIN 	feetypes T2 ON T1.feetypeid = T2.feetypeid
			
			WHERE NOT (EXISTS ( SELECT 1 FROM wiffinfeedetail_temp WHERE wiffinfeedetail_temp.finreference = T1.finreference AND wiffinfeedetail_temp.originationfee = T1.originationfee AND wiffinfeedetail_temp.finevent = T1.finevent AND wiffinfeedetail_temp.feetypeid = T1.feetypeid))				
     	</createView>
	</changeSet>

	<changeSet id="46_post" author="Kesav" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_restore_dependencies ('plf', 'finfeedetail_aview');
					select deps_restore_dependencies ('plf', 'finfeedetail_tview');
					select deps_restore_dependencies ('plf', 'finfeedetail_view');
					select deps_restore_dependencies ('plf', 'wiffinfeedetail_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="50" author="Kesav">
		<sql>
		 	<![CDATA[
			    delete from SMTPARAMETERS where sysparmcode='ALW_PROFIT_SCHD_INVOICE';
				INSERT INTO SMTPARAMETERS Values('ALW_PROFIT_SCHD_INVOICE','Allow Profit Schedule Invoice','String', 0, 'N', 1, 0, NULL, NULL,'Allow Profit Schedule Invoice',1,  1000,CURRENT_TIMESTAMP,'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>

	<!-- GST Waiver Changes END -->

	<changeSet id="51" author="Durga Prasad G">
		<sql>
		 	<![CDATA[
				Update ERRORDETAILS set MESSAGE= '{0} Creation rejected, Reason: {1} ' Where Code ='99014';
			]]>
		</sql>
	</changeSet>

	<changeSet id="52" author="Manoj.P">
		<addColumn tableName="ReportConfiguration">
			<column name="scheduleReq" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="53" author="Manoj.P">
		<sql>
                   <![CDATA[
                          Update ReportConfiguration set scheduleReq=0;
                    ]]>
		</sql>
	</changeSet>

	<changeSet id="54" author="prathap" dbms="oracle">
		<modifyDataType tableName="FIN_OPTIONS_TEMP" columnName="NoticePeriodDays" newDataType="Number(5,0)" />
	</changeSet>

	<changeSet id="55" author="prathap" dbms="oracle">
		<modifyDataType tableName="FIN_OPTIONS_TEMP" columnName="AlertDays" newDataType="Number(5,0)" />
	</changeSet>

	<changeSet id="56" author="prathap" dbms="oracle">
		<modifyDataType tableName="FIN_OPTIONS" columnName="NoticePeriodDays" newDataType="Number(5,0)" />
	</changeSet>

	<changeSet id="57" author="prathap" dbms="oracle">
		<modifyDataType tableName="FIN_OPTIONS" columnName="AlertDays" newDataType="Number(5,0)" />
	</changeSet>

	<changeSet id="54" author="prathap" dbms="mssql">
		<modifyDataType tableName="FIN_OPTIONS_TEMP" columnName="NoticePeriodDays" newDataType="smallint" />
	</changeSet>

	<changeSet id="55" author="prathap" dbms="mssql">
		<modifyDataType tableName="FIN_OPTIONS_TEMP" columnName="AlertDays" newDataType="smallint" />
	</changeSet>

	<changeSet id="56" author="prathap" dbms="mssql">
		<modifyDataType tableName="FIN_OPTIONS" columnName="NoticePeriodDays" newDataType="smallint" />
	</changeSet>

	<changeSet id="57" author="prathap" dbms="mssql">
		<modifyDataType tableName="FIN_OPTIONS" columnName="AlertDays" newDataType="smallint" />
	</changeSet>
	<!-- 5.0.7 is Under QC please use 5.0.8 -->

	<changeSet id="58" author="Saikiran.V">
		<sql>
	        <![CDATA[
	              Insert into SMTPARAMETERS (sysparmcode,sysparmdesc,sysparmtype,sysparmmaint,sysparmvalue,sysparmlength,sysparmdec,sysparmlist,sysparmvaldmod,sysparmdescription,version,lastmntby,lastmnton,recordstatus,rolecode,nextrolecode,taskid,nexttaskid,recordtype,workflowid ) values ('PUTCALL_DEFAULT_ALERTDAYS_REQUIRED','Put-call Default value need or not.','String',1,'N',8,0,null,null,'Put-call Default value need or not',1,1000,CURRENT_TIMESTAMP,'Approved',null,null,null,null,null,0);
	         ]]>
		</sql>
	</changeSet>

	<changeSet id="59" author="satyanarayana.g">
		<comment>HoldDisbursement</comment>
		<sql>
			<![CDATA[
				Delete from reportList where code ='HoldDisbursement';
				INSERT INTO ReportList VALUES ('HoldDisbursement', 'HoldDisbursement', 'listheader_FinReference.label,listheader_Hold.label',  'FinReference,Hold', 'String,boolean', ' ', 'ReportList02', 'HoldDisbursement',  'Loan Management', 1, 1000, CURRENT_TIMESTAMP, 'Approved', ' ', ' ', ' ', ' ', ' ', 0, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="60" author="vijaya.a">
		<addColumn tableName="vasprovideraccdetail">
			<column name="PartnerBankId" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="61" author="vijaya.a">
		<addColumn tableName="vasprovideraccdetail_temp">
			<column name="PartnerBankId" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="62" author="vijaya.a">
		<createView viewName="Vasprovideraccdetail_view" replaceIfExists="true">
			SELECT t1.id,
    			t1.providerid,
    			t5.dealername AS providerdesc,
    			t1.entitycode,
    			t2.entitydesc,
    			t1.paymentmode,
    			t3.bankcode,
    			t4.bankname,
    			t1.bankbranchid,
			    t3.branchdesc,
			    t1.accountnumber,
			    t3.micr AS micrcode,
			    t3.ifsc AS ifsccode,
			    t1.receivableadjustment,
			    t1.reconciliationamount,
			    t1.active,
			    t1.partnerBankId,
			    pb.partnerBankCode,
    			pb.partnerBankName,
			    t1.version,
			    t1.lastmntby,
			    t1.lastmnton,
			    t1.recordstatus,
			    t1.rolecode,
			    t1.nextrolecode,
			    t1.taskid,
			    t1.nexttaskid,
			    t1.recordtype,
			    t1.workflowid
			  FROM vasprovideraccdetail_temp t1
			  JOIN entity t2 ON t2.entitycode = t1.entitycode
		      JOIN bankbranches t3 ON t3.bankbranchid = t1.bankbranchid
			  LEFT JOIN bmtbankdetail t4 ON t4.bankcode = t3.bankcode
			  JOIN amtvehicledealer t5 ON t5.dealerid = t1.providerid
			  JOIN PartnerBanks PB ON pb.partnerBankId = t1.partnerbankId
			  UNION ALL
			SELECT t1.id,
			    t1.providerid,
			    t5.dealername AS providerdesc,
			    t1.entitycode,
			    t2.entitydesc,
			    t1.paymentmode,
			    t3.bankcode,
			    t4.bankname,
			    t1.bankbranchid,
			    t3.branchdesc,
			    t1.accountnumber,
			    t3.micr AS micrcode,
			    t3.ifsc AS ifsccode,
			    t1.receivableadjustment,
			    t1.reconciliationamount,
			    t1.active,
			    t1.partnerBankId,
			    pb.partnerBankCode,
    			pb.partnerBankName,
			    t1.version,
			    t1.lastmntby,
			    t1.lastmnton,
			    t1.recordstatus,
			    t1.rolecode,
			    t1.nextrolecode,
			    t1.taskid,
			    t1.nexttaskid,
			    t1.recordtype,
			    t1.workflowid
			 FROM vasprovideraccdetail t1
			 JOIN entity t2 ON t2.entitycode = t1.entitycode
			 JOIN bankbranches t3 ON t3.bankbranchid = t1.bankbranchid
			 LEFT JOIN bmtbankdetail t4 ON t4.bankcode = t3.bankcode
			 JOIN amtvehicledealer t5 ON t5.dealerid = t1.providerid
			 JOIN PartnerBanks PB ON pb.partnerBankId = t1.partnerbankId
			 WHERE NOT (EXISTS ( SELECT 1
			 FROM vasprovideraccdetail_temp
			 WHERE vasprovideraccdetail_temp.id = t1.id))
			 </createView>
	</changeSet>

	<changeSet id="63" author="vijaya.a">
		<createView viewName="Vasprovideraccdetail_aview" replaceIfExists="true">
			SELECT t1.id,
			    t1.providerid,
			    t5.dealername AS providerdesc,
			    t1.entitycode,
			    t2.entitydesc,
			    t1.paymentmode,
			    t3.bankcode,
			    t4.bankname,
			    t1.bankbranchid,
			    t3.branchdesc,
			    t1.accountnumber,
			    t3.micr AS micrcode,
			    t3.ifsc AS ifsccode,
			    t1.receivableadjustment,
			    t1.reconciliationamount,
			    t1.active,
			    t1.partnerBankId,
			    pb.partnerBankCode,
    			pb.partnerBankName,
			    t1.version,
			    t1.lastmntby,
			    t1.lastmnton,
			    t1.recordstatus,
			    t1.rolecode,
			    t1.nextrolecode,
			    t1.taskid,
			    t1.nexttaskid,
			    t1.recordtype,
			    t1.workflowid
			  FROM vasprovideraccdetail t1
			  JOIN entity t2 ON t2.entitycode = t1.entitycode
			  JOIN bankbranches t3 ON t3.bankbranchid = t1.bankbranchid
			  LEFT JOIN bmtbankdetail t4 ON t4.bankcode = t3.bankcode
			  JOIN amtvehicledealer t5 ON t5.dealerid = t1.providerid
			  JOIN PartnerBanks PB ON pb.partnerBankId = t1.partnerbankId
			  </createView>
	</changeSet>

	<changeSet id="64" author="vijaya.a">
		<sql>
			<![CDATA[
				DELETE FROM SMTPARAMETERS WHERE SYSPARMCODE='INSURANCE_INST_ON_DISB';
			   	INSERT INTO SMTPARAMETERS VALUES ('INSURANCE_INST_ON_DISB', 'Insurance Product Req', 'String', 1, 'N', 1, 0, NULL, NULL,'Insurance Product Req', 1, 1000, CURRENT_TIMESTAMP,'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="65" author="Varaprasad.k">
		<sql>
                <![CDATA[   
                    Delete from SecRights where RightName = 'menuItem_Verification_PersonalDiscussiont_Enquiry';
                    INSERT INTO SecRights VALUES ((Select MAX(RightID)+1 From SecRights), 0, 'menuItem_Verification_PersonalDiscussiont_Enquiry', 'MENU',  1, 1000, current_timestamp, 'Approved',' ',' ',' ',' ',' ',0);
                    Insert Into secGrouprights values((select MAX(GrpRightID)+1 From secGrouprights),(select GrpId from SecGroups where Grpcode='PersonalDiscussion_MAKER'),(select RightId from secRights where      RightName='menuItem_Verification_PersonalDiscussiont_Enquiry'),1,0,1000,current_timestamp, 'Approved','','','','','',0);
                    Insert Into secGrouprights values((select MAX(GrpRightID)+1 From secGrouprights),(select GrpId from SecGroups where Grpcode='PersonalDiscussion_APPROVER'),(select RightId from secRights where RightName='menuItem_Verification_PersonalDiscussiont_Enquiry'),1,0,1000,current_timestamp, 'Approved','','','','','',0);
                   
                ]]>
		</sql>
	</changeSet>

	<changeSet id="66" author="Varaprasad.k">
		<sql>
                   <![CDATA[
                     INSERT INTO BMTAmountcodes VALUES('REPAY',0,'LPP_CGST_P','Paid Late Payment Penalty CGST',1,1,'1005',Current_TimeStamp,'Approved','','','','','','0');
                     INSERT INTO BMTAmountcodes VALUES('REPAY',0,'LPP_SGST_P','Paid Late Payment Penalty SGST',1,1,'1005',Current_TimeStamp,'Approved','','','','','','0');
                     INSERT INTO BMTAmountcodes VALUES('REPAY',0,'LPP_UGST_P','Paid Late Payment Penalty UGST',1,1,'1005',Current_TimeStamp,'Approved','','','','','','0');   
                     INSERT INTO BMTAmountcodes VALUES('REPAY',0,'LPP_IGST_P','Paid Late Payment Penalty IGST',1,1,'1005',Current_TimeStamp,'Approved','','','','','','0');

                     INSERT INTO BMTAmountcodes VALUES('EARLYSTL',0,'LPP_CGST_P','Paid Late Payment Penalty CGST',1,1,'1005',Current_TimeStamp,'Approved','','','','','','0');
                     INSERT INTO BMTAmountcodes VALUES('EARLYSTL',0,'LPP_SGST_P','Paid Late Payment Penalty SGST',1,1,'1005',Current_TimeStamp,'Approved','','','','','','0');
                     INSERT INTO BMTAmountcodes VALUES('EARLYSTL',0,'LPP_UGST_P','Paid Late Payment Penalty UGST',1,1,'1005',Current_TimeStamp,'Approved','','','','','','0');   
                     INSERT INTO BMTAmountcodes VALUES('EARLYSTL',0,'LPP_IGST_P','Paid Late Payment Penalty IGST',1,1,'1005',Current_TimeStamp,'Approved','','','','','','0');     
                   ]]>
		</sql>
	</changeSet>

	<changeSet id="67" author="Varaprasad.k">
		<sql>
                   <![CDATA[
                     Delete from SMTparameters where SysParmCode = 'PD_DOCUMENT_MANDATORY';
                     Delete from SMTparameters where SysParmCode = 'RCU_DOCUMENT_MANDATORY';
                     Delete from SMTparameters where SysParmCode = 'LV_DOCUMENT_MANDATORY';
                     Delete from SMTparameters where SysParmCode = 'TV_DOCUMENT_MANDATORY';
                     INSERT INTO SMTparameters Values('PD_DOCUMENT_MANDATORY','Atleast One Document is Mandatory For Personal Discussion','String', 0, 'N', 1, 0, NULL, NULL,'Atleast One Document is Mandatory For Personal Discussion',1,  1000,CURRENT_TIMESTAMP,'Approved', NULL, NULL, NULL, NULL, NULL, 0);
                     INSERT INTO SMTPARAMETERS Values('RCU_DOCUMENT_MANDATORY','Atleast One Document is Mandatory For Risk Containment Unit','String', 0, 'N', 1, 0, NULL, NULL,'Atleast One Document is Mandatory For Risk Containment Unit',1,  1000,CURRENT_TIMESTAMP,'Approved', NULL, NULL, NULL, NULL, NULL, 0);
                     INSERT INTO SMTPARAMETERS Values('LV_DOCUMENT_MANDATORY','Atleast One Document is Mandatory For Legal Verification','String', 0, 'N', 1, 0, NULL, NULL,'Atleast One Document is Mandatory For Legal Verification',1,  1000,CURRENT_TIMESTAMP,'Approved', NULL, NULL, NULL, NULL, NULL, 0); 
                     INSERT INTO SMTPARAMETERS Values('TV_DOCUMENT_MANDATORY','Atleast One Document is Mandatory For Technical Verification','String', 0, 'N', 1, 0, NULL, NULL,'Atleast One Document is Mandatory For Technical Verification',1,  1000,CURRENT_TIMESTAMP,'Approved', NULL, NULL, NULL, NULL, NULL, 0);                                                  
                   ]]>
		</sql>
	</changeSet>

	<changeSet id="68" author="Varaprasad.k">
		<modifyDataType tableName="PRESENTMENT_FILEIMPORT" columnName="reasoncode" newDataType="varchar(8)" />
	</changeSet>

	<changeSet id="69" author="meena.a">
		<addColumn tableName="MANDATE_REQUESTS">
			<column name="PROCESS_ID" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="70" author="meena.a">
		<sql>
	<![CDATA[
		update MANDATE_REQUESTS set PROCESS_ID = BATCH_ID;
	]]>
		</sql>
	</changeSet>

	<changeSet id="71" author="meena.a">
		<addNotNullConstraint tableName="MANDATE_REQUESTS" columnName="PROCESS_ID" columnDataType="bigint" />
	</changeSet>

	<changeSet id="72" author="meena.a">
		<createIndex tableName="MANDATE_REQUESTS" indexName="IDX_MANDATE_REQ_PROCESS_ID">
			<column name="PROCESS_ID" />
		</createIndex>
	</changeSet>


	<changeSet id="73" author="meena.a">
		<sql>
	<![CDATA[
		update data_engine_table set filter = 'PROCESS_ID = :PROCESS_ID'  where configid in (select id from data_engine_config where name = 'MANDATES_EXPORT');

		update data_engine_table set statusupdate = 'UPDATE MANDATE_REQUESTS SET BATCH_ID = :FILEID, 
		STATUS = ''AC'' WHERE PROCESS_ID = :PROCESS_ID QUERY:UPDATE MANDATES SET STATUS =  ''AC'' WHERE MANDATEID IN (SELECT MANDATEID FROM MANDATE_REQUESTS WHERE PROCESS_ID = :PROCESS_ID AND STATUS =  ''AC'')' 
		where configid in (select id from data_engine_config where name = 'MANDATES_EXPORT');
	]]>
		</sql>
	</changeSet>

	<changeSet id="74" author="meena.a">
		<addUniqueConstraint tableName="MANDATE_REQUESTS" columnNames="MANDATEID, STATUS, PROCESS_ID"
			constraintName="UK_MANDATE_REQ_MID_STATUS_PID" />
	</changeSet>

	<changeSet id="75" author="Manoj.p" dbms="oracle">
		<sql splitStatements="false">
			begin
			execute immediate 'CREATE SEQUENCE
			SEQ_MANDATES_REQUEST_PROCESS START WITH 1
			INCREMENT BY
			1 MAXVALUE
			9223372036854775807 NOCYCLE';
			end;
		</sql>
	</changeSet>

	<changeSet id="75" author="Manoj.p" dbms="postgresql">
		<sql splitStatements="false">
			do $$
			begin
			execute 'CREATE SEQUENCE
			SEQ_MANDATES_REQUEST_PROCESS START 1 INCREMENT BY 1';
			end;
			$$;
		</sql>
	</changeSet>

	<changeSet id="75" author="Manoj.p" dbms="mssql">
		<sql splitStatements="false">
			CREATE TABLE
			SEQ_MANDATES_REQUEST_PROCESS(SeqNo bigint IDENTITY(1,1) NOT NULL,
			Value int NOT
			NULL);
		</sql>
	</changeSet>

	<changeSet id="76" author="MURTHY">
		<createView viewName="rpt_soa_loan_view" replaceIfExists="true">
		
		SELECT 	fm.finreference,
        		CASE
            	WHEN rf.productcategory = 'ODFCLITY' THEN fm.finassetvalue
            	ELSE fp.totalprischd 
            	END AS loanamount,
    			fm.repaybaserate AS plrrate,
    			fm.repaymargin AS variance,
    			fm.effectiverateofreturn AS irr,
    			fp.curreducingrate AS roi,
    			fp.noinst AS tenure,
				FM.REPAYFRQ,
    			fp.totalpripaid AS emireceivedpri,
    			fp.totalpftpaid AS emireceivedpft,
    			0.00 AS preferredcardlimit,
    			fp.prvrpyschpri AS previnstamtpri,
    			fp.prvrpyschpft AS previnstamtpft,
        		CASE
            	WHEN fm.rvwrateapplfor IS NULL OR fm.rvwrateapplfor = '#' THEN 'Fixed'
            	ELSE 'Floating'
        		END AS intratetype,
	    		fp.latestdisbdate AS lastdisbursaldate,
    			fp.firstrepaydate AS firstduedate,
    			fm.maturitydate AS endinstallmentdate,
 			   	'0.00/ 0' AS advinstamt,
    			fm.finisactive,
    			fm.closingstatus,
    			fp.futureinst AS futureinstno,
    			fp.totalprischd AS futurepri1,
    			fp.tdschdpri AS futurepri2,
    			fp.totalpftschd AS futurerpypft1,
    			fp.tdschdpft AS futurerpypft2,
    			fp.totchargespaid AS charge_coll_cust,
    			fp.upfrontfee AS upfront_int_cust,
    			0 AS int_paid_dealer_upfront,
    			0 AS pre_emi_int_paid,
    			'' AS repo_status,
    			'' AS repo_date,
    			'' AS sale_date,
    			'' AS release_date,
    	   		fp.latestrpydate,
    			c.ccyminorccyunits,
    			c.ccyeditfield,
				COALESCE(fp.totalpftcpz, 0) AS totalpftcpz
   		FROM financemain fm
    	JOIN finpftdetails fp ON fp.finreference = fm.finreference
    	JOIN rmtfinancetypes rf ON rf.fintype = fm.fintype
    	JOIN rmtcurrencies c ON c.ccycode = fp.finccy
	
			
		</createView>
	</changeSet>

	<changeSet id="77_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_save_and_drop_dependencies ('plf', 'querydetail');
					select deps_save_and_drop_dependencies ('plf', 'querydetail_temp');
			]]>
		</sql>
	</changeSet>

	<changeSet id="77" author="satyanarayana.g">
		<modifyDataType tableName="QUERYDETAIL" columnName="FINREFERENCE" newDataType="varchar(20)" />
		<modifyDataType tableName="QUERYDETAIL_TEMP" columnName="FINREFERENCE" newDataType="varchar(20)" />
	</changeSet>

	<changeSet id="77_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_restore_dependencies ('plf', 'querydetail');
					select deps_restore_dependencies ('plf', 'querydetail_temp');
					
			]]>
		</sql>
	</changeSet>

	<changeSet id="78" author="satyanarayana.g">
		<comment>Receipt Maker</comment>
		<sql>
			<![CDATA[
				Delete from reportList where code ='FinReceiptHeader';
				INSERT INTO ReportList VALUES ('FinReceiptHeader', 'FinReceiptHeader', 'listheader_ReceiptId.label,listheader_ReceiptDate.label,listheader_ReceiptMode.label,listheader_ReceiptPurpose.label,listheader_CustomerCIF.label,listheader_FinType.label,listheader_FinReference.label,listheader_PayTypeRef.label,listheader_ReceiptAmount.label,listheader_PartnerBank.label',
				'ReceiptID,ReceiptDate,ReceiptMode,ReceiptPurpose,CustCIF,FinType,Reference,TransactionRef,ReceiptAmount,partnerBankCode',
				'Long,Date,String,String,String,String,String,String,BigDecimal,String', ' ', 'ReportList10', 'FinReceiptHeader',  'Loan Management', 1, 1000, CURRENT_TIMESTAMP, 'Approved', ' ', ' ', ' ', ' ', ' ', 0, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="80_pre" author="Durgaprasad.G" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_save_and_drop_dependencies ('plf', 'errordetails');
					select deps_save_and_drop_dependencies ('plf', 'errordetails_temp');
			]]>
		</sql>
	</changeSet>

	<changeSet id="80" author="Durgaprasad.G">
		<modifyDataType tableName="ERRORDETAILS" columnName="Message" newDataType="Varchar(200)" />
		<modifyDataType tableName="ERRORDETAILS_TEMP" columnName="Message" newDataType="Varchar(200)" />
	</changeSet>

	<changeSet id="80_post" author="Durgaprasad.G" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_restore_dependencies ('plf', 'errordetails');
					select deps_restore_dependencies ('plf', 'errordetails_temp');
			]]>
		</sql>
	</changeSet>

	<changeSet id="81" author="satyanarayana.g">
		<addColumn tableName="FINANCEMAIN">
			<column name="AllowDrawingPower" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="82" author="satyanarayana.g">
		<addColumn tableName="FINANCEMAIN_TEMP">
			<column name="AllowDrawingPower" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="83" author="satyanarayana.g">
		<sql>
			<![CDATA[
				UPDATE FINANCEMAIN Set AllowDrawingPower = 0 where AllowDrawingPower is null;
				UPDATE FINANCEMAIN_Temp Set AllowDrawingPower = 0 where AllowDrawingPower is null;
			]]>
		</sql>
	</changeSet>

	<changeSet id="84" author="satyanarayana.g" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE FINANCEMAIN ADD CONSTRAINT DF_FINANCEMAIN_ALWDP DEFAULT 0 FOR ALLOWDRAWINGPOWER;
				ALTER TABLE FINANCEMAIN_TEMP ADD CONSTRAINT DF_FINANCEMAIN_TEMP_ALWDP DEFAULT 0 FOR ALLOWDRAWINGPOWER;
			]]>
		</sql>
	</changeSet>

	<changeSet id="85" author="satyanarayana.g" dbms="postgresql, oracle">
		<addDefaultValue columnName="AllowDrawingPower" tableName="FINANCEMAIN" defaultValue="0" />
		<addDefaultValue columnName="AllowDrawingPower" tableName="FINANCEMAIN_Temp" defaultValue="0" />
	</changeSet>

	<changeSet id="86" author="satyanarayana.g">
		<addColumn tableName="FINANCEMAIN_PA">
			<column name="AllowDrawingPower" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="87" author="satyanarayana.g">
		<sql>
			<![CDATA[
				UPDATE FINANCEMAIN_PA Set AllowDrawingPower = 0 where AllowDrawingPower is null;
			]]>
		</sql>
	</changeSet>

	<changeSet id="88" author="satyanarayana.g" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE FINANCEMAIN_PA ADD CONSTRAINT DF_FINANCEMAIN_ALLOWDRAWINGPOWER DEFAULT 0 FOR ALLOWDRAWINGPOWER;
			]]>
		</sql>
	</changeSet>

	<changeSet id="89" author="satyanarayana.g" dbms="postgresql, oracle">
		<addDefaultValue columnName="AllowDrawingPower" tableName="FINANCEMAIN_PA" defaultValue="0" />
	</changeSet>

	<changeSet id="90" author="satyanarayana.g">
		<addColumn tableName="REJECTFINANCEMAIN">
			<column name="AllowDrawingPower" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="92" author="satyanarayana.g">
		<sql>
			<![CDATA[
				UPDATE REJECTFINANCEMAIN Set AllowDrawingPower = 0 where AllowDrawingPower is null;
			]]>
		</sql>
	</changeSet>

	<changeSet id="93" author="satyanarayana.g" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE REJECTFINANCEMAIN ADD CONSTRAINT DF_REJECTFINANCEMAIN_ALWDP DEFAULT 0 FOR ALLOWDRAWINGPOWER;
			]]>
		</sql>
	</changeSet>

	<changeSet id="94" author="satyanarayana.g" dbms="postgresql, oracle">
		<addDefaultValue columnName="AllowDrawingPower" tableName="REJECTFINANCEMAIN" defaultValue="0" />
	</changeSet>

	<changeSet id="95_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_save_and_drop_dependencies ('plf', 'financemain_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="96" author="satyanarayana.g">
		<createView viewName="FINANCEMAIN_VIEW" replaceIfExists="true">
			SELECT T1.FINREFERENCE,
					T1.INVESTMENTREF,
					T1.NUMBEROFTERMS,
					T1.GRCPERIODENDDATE,
					T1.ALLOWGRCPERIOD,
					T1.GRACEBASERATE,
					T1.GRACESPECIALRATE,
					T1.GRCPFTRATE,
					T1.GRCPFTFRQ,
					T1.NEXTGRCPFTDATE,
					T1.ALLOWGRCPFTRVW,
					T1.GRCPFTRVWFRQ,
					T1.NEXTGRCPFTRVWDATE,
					T1.ALLOWGRCCPZ,
					T1.GRCCPZFRQ,
					T1.NEXTGRCCPZDATE,
					T1.REPAYBASERATE,
					T1.REPAYSPECIALRATE,
					T1.REPAYPROFITRATE,
					T1.REPAYFRQ,
					T1.NEXTREPAYDATE,
					T1.REPAYPFTFRQ,
					T1.NEXTREPAYPFTDATE,
					T1.ALLOWREPAYRVW,
					T1.REPAYRVWFRQ,
					T1.NEXTREPAYRVWDATE,
					T1.ALLOWREPAYCPZ,
					T1.REPAYCPZFRQ,
					T1.NEXTREPAYCPZDATE,
					T1.MATURITYDATE,
					T1.CPZATGRACEEND,
					T1.DOWNPAYMENT,
					T1.GRACEFLATAMOUNT,
					T1.REQREPAYAMOUNT,
					T1.TOTALPROFIT,
					T1.TOTALCPZ,
					T1.TOTALGROSSPFT,
					T1.TOTALGROSSGRCPFT,
					T1.TOTALGRACEPFT,
					T1.TOTALGRACECPZ,
					T1.GRCRATEBASIS,
					T1.REPAYRATEBASIS,
					T1.FINTYPE,
					T1.FINREMARKS,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.REQMATURITY,
					T1.CALTERMS,
					T1.CALMATURITY,
					T1.FIRSTREPAY,
					T1.LASTREPAY,
					T1.FINSTARTDATE,
					T1.FINAMOUNT,
					T1.FINAMOUNT + T1.FEECHARGEAMT - T1.DOWNPAYMENT AS LOVDESCFINANCINGAMOUNT,
					T1.FINREPAYMENTAMOUNT,
					T1.CUSTID,
					T1.DEFFERMENTS,
					T1.PLANDEFERCOUNT,
					T1.FINBRANCH,
					T1.FINSOURCEID,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.ALLOWEDDEFFRQCHANGE,
					T1.AVAILEDDEFFRQCHANGE,
					T1.RECALTYPE,
					T1.FINASSETVALUE,
					T1.DISBACCOUNTID,
					T1.REPAYACCOUNTID,
					T1.FINISACTIVE,
					T1.LIMITVALID,
					T1.OVERRIDELIMIT,
					T1.SECURITYDEPOSIT,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T7.FINTYPEDESC   LOVDESCFINTYPENAME,
					T7.FINMAXAMOUNT  LOVDESCFINMAXAMT,
					T7.FINMINAMOUNT  LOVDESCFINMINAMOUNT,
					T1.MINDOWNPAYPERC,
					T7.FINISALWDIFFERMENT  LOVDESCFINALWDEFERMENT,
					T7.FINISDWPAYREQUIRED  LOVDESCDWNPAYREQ,
					T7.FINMAXDIFFERMENT   LOVDESCFINMAXDIFFERMENT,
					T12.BRANCHDESC        LOVDESCFINBRANCHNAME,
					T12.BRANCHPROVINCE    FINBRANCHPROVINCECODE,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.LASTREPAYRVWDATE,
					T1.LASTREPAYCPZDATE,
					T1.ALLOWGRCREPAY,
					T1.GRCSCHDMTHD,
					T1.GRCMARGIN,
					T1.REPAYMARGIN,
					T1.FINCURRASSETVALUE,
					T1.FINCOMMITMENTREF,
					T1.FINLIMITREF,
					T1.DEPRECIATIONFRQ,
					T1.FINCONTRACTDATE,
					T1.NEXTDEPDATE,
					T1.LASTDEPDATE,
					T1.FINACCOUNT,
					T1.FINCUSTPFTACCOUNT,
					T17.ACRTILLLBD  LOVDESCACCRUEDTILLLBD,
					T7.FINRVWRATEAPPLFOR,
					T1.TOTALREPAYAMT,
					T1.CLOSINGSTATUS,
					T1.FINAPPROVEDDATE,
					T1.FEECHARGEAMT,
					T1.BLACKLISTED,
					T1.FINREPAYPFTONFRQ,
					T1.ANUALIZEDPERCRATE,
					T1.EFFECTIVERATEOFRETURN,
					T1.MIGRATEDFINANCE,
					T1.SCHEDULEMAINTAINED,
					T1.SCHEDULEREGENERATED,
					T1.FINPURPOSE,
					T39.LOANPURPOSEDESC  LOVDESCFINPURPOSENAME,
					T1.FINSTATUS,
					T1.FINSTSREASON,
					T1.INITIATEUSER,
					T1.BANKNAME,
					T1.IBAN,
					T1.ACCOUNTTYPE,
					T1.DDAREFERENCENO,
					T7.FINSCHEDULEON  LOVDESCFINSCHEDULEON,
					T1.CUSTDSR,
					T1.JOINTACCOUNT,
					T1.JOINTCUSTID,
					T1.DOWNPAYBANK,
					T1.DOWNPAYSUPL,
					T1.DOWNPAYACCOUNT,
					T1.SECURITYCOLLATERAL,
					T1.APPROVED,
					T1.DISCREPANCY,
					T1.LIMITAPPROVED,
					T1.GRACETERMS,
					T7.FINDIVISION  LOVDESCFINDIVISION,
					T1.RCDMAINTAINSTS,
					T1.FINREPAYMETHOD,
					T1.GRCPROFITDAYSBASIS,
					T1.STEPFINANCE,
					T1.STEPTYPE,
					T1.STEPPOLICY,
					T1.ALWMANUALSTEPS,
					T1.NOOFSTEPS,
					T1.LINKEDFINREF,
					T1.NEXTUSERID,
					T1.PRIORITY,
					T24.POLICYDESC  LOVDESCSTEPPOLICYNAME,
					T1.GRCMINRATE,
					T1.GRCMAXRATE,
					T1.RPYMINRATE,
					T1.RPYMAXRATE,
					T1.DEVIATIONAPPROVAL,
					T1.MANUALSCHEDULE,
					T1.TAKEOVERFINANCE,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.SUPPLEMENTRENT,
					T1.INCREASEDCOST,
					T1.CREDITINSAMT,
					T1.ROLLOVERFRQ,
					T1.NEXTROLLOVERDATE,
					T27.CUSTSTSDESCRIPTION,
					T1.SHARIASTATUS,
					T1.INITIATEDATE,
					T1.FINPREAPPROVEDREF,
					T1.MMAID,
					T1.ACCOUNTSOFFICER,
					T1.FEEACCOUNTID,
					T1.FINCANCELAC,
					T28.DEALERNAME  LOVDESCACCOUNTSOFFICER,
					T28.DEALERCITY  LOVDESCSOURCECITY,
					T1.DSACODE,
					T30.ROFFICERDESC  DSACODEDESC,
					T1.TDSAPPLICABLE,
					T1.MANDATEID,
					T1.DROPLINEFRQ,
					T1.FIRSTDROPLINEDATE,
					T1.PFTSERVICINGODLIMIT,
					T1.INSURANCEAMT,
					T1.DEDUCTINSDISB,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.CALROUNDINGMODE,
					T1.ALWMULTIDISB,
					T1.APPLICATIONNO,
					T1.REFERRALID,
					T33.ROFFICERDESC  REFERRALIDDESC,
					T1.DMACODE,
					T34.ROFFICERDESC  DMACODEDESC,
					T1.SALESDEPARTMENT,
					T35.GENDEPTDESC  SALESDEPARTMENTDESC,
					T1.QUICKDISB,
					T1.WIFREFERENCE,
					T1.UNPLANEMIHLOCKPERIOD,
					T1.UNPLANEMICPZ,
					T1.REAGECPZ,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.AVAILEDUNPLANEMI,
					T1.AVAILEDREAGEH,
					T1.BPIAMOUNT,
					T1.DEDUCTFEEDISB,
					T1.RVWRATEAPPLFOR,
					T1.SCHCALONRVW,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.PROMOTIONCODE,
					T1.RESTRUCTURELOAN,
					T1.OLDFINREFERENCE,
					T1.REAGEBUCKET,
					T1.FINCATEGORY,
					T1.PRODUCTCATEGORY,
					T1.ROUNDINGTARGET,
					T36.ENTITYCODE  LOVDESCENTITYCODE,
					T1.ELIGIBILITYMETHOD,
					T38.FIELDCODEVALUE  LOVELIGIBILITYMETHOD,
					T38.VALUEDESC       LOVDESCELIGIBILITYMETHOD,
					T1.EMPLOYEENAME,
					T37.ROFFICERDESC  EMPLOYEENAMEDESC,
					T1.SAMPLINGREQUIRED,
					T1.LEGALREQUIRED,
					T1.GRCMAXAMOUNT,
					T1.CONNECTOR,
					T40.DEALERNAME  CONNECTORCODE,
					T40.DEALERCITY  CONNECTORDESC,
					T1.ADVANCEEMI,
					T1.ADVEMITERMS,
					T1.BPIPFTDAYSBASIS,
					T1.FIXEDRATETENOR,
					T1.FIXEDTENORRATE,
					T12.BRANCHTEL  FINBRANCHCONTACT,
					T1.PROCESSATTRIBUTES,
					T1.BUSINESSVERTICAL,
					BV.CODE         BUSINESSVERTICALCODE,
					BV.DESCRIPTION  BUSINESSVERTICALDESC,
					T1.GRCADVTYPE,
					T1.GRCADVTERMS,
					T1.ADVTYPE,
					T1.ADVTERMS,
					T1.ADVSTAGE,
					T1.TDSPERCENTAGE,
					T1.TDSSTARTDATE,
					T1.TDSENDDATE,
					T1.TDSLIMITAMT,
					T1.VANREQ,
					T1.VANCODE,
					T1.ALLOWDRAWINGPOWER
					FROM FINANCEMAIN_TEMP T1
					JOIN RMTFINANCETYPES T7 ON T1.FINTYPE = T7.FINTYPE
					LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH = T12.BRANCHCODE
					LEFT JOIN FINPFTDETAILS T17 ON T17.FINREFERENCE = T1.FINREFERENCE
					LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY = T24.POLICYCODE
					LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS = T27.CUSTSTSCODE
					LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
					LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE = T30.ROFFICERCODE
					LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID = T33.ROFFICERCODE
					LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE = T34.ROFFICERCODE
					LEFT JOIN RMTGENDEPARTMENTS T35 ON T1.SALESDEPARTMENT = T35.GENDEPARTMENT
					LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION = T36.DIVISIONCODE
					LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME = T37.ROFFICERCODE
					LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE = 'ELGMETHOD'
					LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE = T39.LOANPURPOSECODE
					LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
					LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
					UNION ALL
					SELECT T1.FINREFERENCE,
					T1.INVESTMENTREF,
					T1.NUMBEROFTERMS,
					T1.GRCPERIODENDDATE,
					T1.ALLOWGRCPERIOD,
					T1.GRACEBASERATE,
					T1.GRACESPECIALRATE,
					T1.GRCPFTRATE,
					T1.GRCPFTFRQ,
					T1.NEXTGRCPFTDATE,
					T1.ALLOWGRCPFTRVW,
					T1.GRCPFTRVWFRQ,
					T1.NEXTGRCPFTRVWDATE,
					T1.ALLOWGRCCPZ,
					T1.GRCCPZFRQ,
					T1.NEXTGRCCPZDATE,
					T1.REPAYBASERATE,
					T1.REPAYSPECIALRATE,
					T1.REPAYPROFITRATE,
					T1.REPAYFRQ,
					T1.NEXTREPAYDATE,
					T1.REPAYPFTFRQ,
					T1.NEXTREPAYPFTDATE,
					T1.ALLOWREPAYRVW,
					T1.REPAYRVWFRQ,
					T1.NEXTREPAYRVWDATE,
					T1.ALLOWREPAYCPZ,
					T1.REPAYCPZFRQ,
					T1.NEXTREPAYCPZDATE,
					T1.MATURITYDATE,
					T1.CPZATGRACEEND,
					T1.DOWNPAYMENT,
					T1.GRACEFLATAMOUNT,
					T1.REQREPAYAMOUNT,
					T1.TOTALPROFIT,
					T1.TOTALCPZ,
					T1.TOTALGROSSPFT,
					T1.TOTALGROSSGRCPFT,
					T1.TOTALGRACEPFT,
					T1.TOTALGRACECPZ,
					T1.GRCRATEBASIS,
					T1.REPAYRATEBASIS,
					T1.FINTYPE,
					T1.FINREMARKS,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.REQMATURITY,
					T1.CALTERMS,
					T1.CALMATURITY,
					T1.FIRSTREPAY,
					T1.LASTREPAY,
					T1.FINSTARTDATE,
					T1.FINAMOUNT,
					T1.FINAMOUNT + T1.FEECHARGEAMT - T1.DOWNPAYMENT  LOVDESCFINANCINGAMOUNT,
					T1.FINREPAYMENTAMOUNT,
					T1.CUSTID,
					T1.DEFFERMENTS,
					T1.PLANDEFERCOUNT,
					T1.FINBRANCH,
					T1.FINSOURCEID,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.ALLOWEDDEFFRQCHANGE,
					T1.AVAILEDDEFFRQCHANGE,
					T1.RECALTYPE,
					T1.FINASSETVALUE,
					T1.DISBACCOUNTID,
					T1.REPAYACCOUNTID,
					T1.FINISACTIVE,
					T1.LIMITVALID,
					T1.OVERRIDELIMIT,
					T1.SECURITYDEPOSIT,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T7.FINTYPEDESC   LOVDESCFINTYPENAME,
					T7.FINMAXAMOUNT  LOVDESCFINMAXAMT,
					T7.FINMINAMOUNT  LOVDESCFINMINAMOUNT,
					T1.MINDOWNPAYPERC,
					T7.FINISALWDIFFERMENT  LOVDESCFINALWDEFERMENT,
					T7.FINISDWPAYREQUIRED  LOVDESCDWNPAYREQ,
					T7.FINMAXDIFFERMENT   LOVDESCFINMAXDIFFERMENT,
					T12.BRANCHDESC     LOVDESCFINBRANCHNAME,
					T12.BRANCHPROVINCE   FINBRANCHPROVINCECODE,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.LASTREPAYRVWDATE,
					T1.LASTREPAYCPZDATE,
					T1.ALLOWGRCREPAY,
					T1.GRCSCHDMTHD,
					T1.GRCMARGIN,
					T1.REPAYMARGIN,
					T1.FINCURRASSETVALUE,
					T1.FINCOMMITMENTREF,
					T1.FINLIMITREF,
					T1.DEPRECIATIONFRQ,
					T1.FINCONTRACTDATE,
					T1.NEXTDEPDATE,
					T1.LASTDEPDATE,
					T1.FINACCOUNT,
					T1.FINCUSTPFTACCOUNT,
					T17.ACRTILLLBD  LOVDESCACCRUEDTILLLBD,
					T7.FINRVWRATEAPPLFOR,
					T1.TOTALREPAYAMT,
					T1.CLOSINGSTATUS,
					T1.FINAPPROVEDDATE,
					T1.FEECHARGEAMT,
					T1.BLACKLISTED,
					T1.FINREPAYPFTONFRQ,
					T1.ANUALIZEDPERCRATE,
					T1.EFFECTIVERATEOFRETURN,
					T1.MIGRATEDFINANCE,
					T1.SCHEDULEMAINTAINED,
					T1.SCHEDULEREGENERATED,
					T1.FINPURPOSE,
					T39.LOANPURPOSEDESC  LOVDESCFINPURPOSENAME,
					T1.FINSTATUS,
					T1.FINSTSREASON,
					T1.INITIATEUSER,
					T1.BANKNAME,
					T1.IBAN,
					T1.ACCOUNTTYPE,
					T1.DDAREFERENCENO,
					T7.FINSCHEDULEON  LOVDESCFINSCHEDULEON,
					T1.CUSTDSR,
					T1.JOINTACCOUNT,
					T1.JOINTCUSTID,
					T1.DOWNPAYBANK,
					T1.DOWNPAYSUPL,
					T1.DOWNPAYACCOUNT,
					T1.SECURITYCOLLATERAL,
					T1.APPROVED,
					T1.DISCREPANCY,
					T1.LIMITAPPROVED,
					T1.GRACETERMS,
					T7.FINDIVISION  LOVDESCFINDIVISION,
					T1.RCDMAINTAINSTS,
					T1.FINREPAYMETHOD,
					T1.GRCPROFITDAYSBASIS,
					T1.STEPFINANCE,
					T1.STEPTYPE,
					T1.STEPPOLICY,
					T1.ALWMANUALSTEPS,
					T1.NOOFSTEPS,
					T1.LINKEDFINREF,
					T1.NEXTUSERID,
					T1.PRIORITY,
					T24.POLICYDESC  LOVDESCSTEPPOLICYNAME,
					T1.GRCMINRATE,
					T1.GRCMAXRATE,
					T1.RPYMINRATE,
					T1.RPYMAXRATE,
					T1.DEVIATIONAPPROVAL,
					T1.MANUALSCHEDULE,
					T1.TAKEOVERFINANCE,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.SUPPLEMENTRENT,
					T1.INCREASEDCOST,
					T1.CREDITINSAMT,
					T1.ROLLOVERFRQ,
					T1.NEXTROLLOVERDATE,
					T27.CUSTSTSDESCRIPTION,
					T1.SHARIASTATUS,
					T1.INITIATEDATE,
					T1.FINPREAPPROVEDREF,
					T1.MMAID,
					T1.ACCOUNTSOFFICER,
					T1.FEEACCOUNTID,
					T1.FINCANCELAC,
					T28.DEALERNAME  LOVDESCACCOUNTSOFFICER,
					T28.DEALERCITY  LOVDESCSOURCECITY,
					T1.DSACODE,
					T30.ROFFICERDESC  DSACODEDESC,
					T1.TDSAPPLICABLE,
					T1.MANDATEID,
					T1.DROPLINEFRQ,
					T1.FIRSTDROPLINEDATE,
					T1.PFTSERVICINGODLIMIT,
					T1.INSURANCEAMT,
					T1.DEDUCTINSDISB,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.CALROUNDINGMODE,
					T1.ALWMULTIDISB,
					T1.APPLICATIONNO,
					T1.REFERRALID,
					T33.ROFFICERDESC  REFERRALIDDESC,
					T1.DMACODE,
					T34.ROFFICERDESC  DMACODEDESC,
					T1.SALESDEPARTMENT,
					T35.GENDEPTDESC  SALESDEPARTMENTDESC,
					T1.QUICKDISB,
					T1.WIFREFERENCE,
					T1.UNPLANEMIHLOCKPERIOD,
					T1.UNPLANEMICPZ,
					T1.REAGECPZ,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.AVAILEDUNPLANEMI,
					T1.AVAILEDREAGEH,
					T1.BPIAMOUNT,
					T1.DEDUCTFEEDISB,
					T1.RVWRATEAPPLFOR,
					T1.SCHCALONRVW,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.PROMOTIONCODE,
					T1.RESTRUCTURELOAN,
					T1.OLDFINREFERENCE,
					T1.REAGEBUCKET,
					T1.FINCATEGORY,
					T1.PRODUCTCATEGORY,
					T1.ROUNDINGTARGET,
					T36.ENTITYCODE  LOVDESCENTITYCODE,
					T1.ELIGIBILITYMETHOD,
					T38.FIELDCODEVALUE  LOVELIGIBILITYMETHOD,
					T38.VALUEDESC       LOVDESCELIGIBILITYMETHOD,
					T1.EMPLOYEENAME,
					T37.ROFFICERDESC  EMPLOYEENAMEDESC,
					T1.SAMPLINGREQUIRED,
					T1.LEGALREQUIRED,
					T1.GRCMAXAMOUNT,
					T1.CONNECTOR,
					T40.DEALERNAME  CONNECTORCODE,
					T40.DEALERCITY  CONNECTORDESC,
					T1.ADVANCEEMI,
					T1.ADVEMITERMS,
					T1.BPIPFTDAYSBASIS,
					T1.FIXEDRATETENOR,
					T1.FIXEDTENORRATE,
					T12.BRANCHTEL  FINBRANCHCONTACT,
					T1.PROCESSATTRIBUTES,
					T1.BUSINESSVERTICAL,
					BV.CODE         BUSINESSVERTICALCODE,
					BV.DESCRIPTION  BUSINESSVERTICALDESC,
					T1.GRCADVTYPE,
					T1.GRCADVTERMS,
					T1.ADVTYPE,
					T1.ADVTERMS,
					T1.ADVSTAGE,
					T1.TDSPERCENTAGE,
					T1.TDSSTARTDATE,
					T1.TDSENDDATE,
					T1.TDSLIMITAMT,
					T1.VANREQ,
					T1.VANCODE,
					T1.ALLOWDRAWINGPOWER
					FROM FINANCEMAIN T1
					JOIN RMTFINANCETYPES T7 ON T1.FINTYPE = T7.FINTYPE
					LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH = T12.BRANCHCODE
					LEFT JOIN FINPFTDETAILS T17 ON T17.FINREFERENCE = T1.FINREFERENCE
					LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY = T24.POLICYCODE
					LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS = T27.CUSTSTSCODE
					LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
					LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE = T30.ROFFICERCODE
					LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID = T33.ROFFICERCODE
					LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE = T34.ROFFICERCODE
					LEFT JOIN RMTGENDEPARTMENTS T35 ON T1.SALESDEPARTMENT = T35.GENDEPARTMENT
					LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION = T36.DIVISIONCODE
					LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME = T37.ROFFICERCODE
					LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE = 'ELGMETHOD'
					LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE = T39.LOANPURPOSECODE
					LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
					LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
					WHERE NOT (EXISTS (SELECT 1 FROM FINANCEMAIN_TEMP WHERE FINANCEMAIN_TEMP.FINREFERENCE = T1.FINREFERENCE ))
	</createView>
	</changeSet>

	<changeSet id="96_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_restore_dependencies ('plf', 'financemain_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="97_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_save_and_drop_dependencies ('plf', 'financemain_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="97" author="satyanarayana.g">
		<createView viewName="FINANCEMAIN_TVIEW" replaceIfExists="true">
			SELECT T1.FINREFERENCE,
					T1.INVESTMENTREF,
					T1.NUMBEROFTERMS,
					T1.GRCPERIODENDDATE,
					T1.ALLOWGRCPERIOD,
					T1.GRACEBASERATE,
					T1.GRACESPECIALRATE,
					T1.GRCPFTRATE,
					T1.GRCPFTFRQ,
					T1.NEXTGRCPFTDATE,
					T1.ALLOWGRCPFTRVW,
					T1.GRCPFTRVWFRQ,
					T1.NEXTGRCPFTRVWDATE,
					T1.ALLOWGRCCPZ,
					T1.GRCCPZFRQ,
					T1.NEXTGRCCPZDATE,
					T1.REPAYBASERATE,
					T1.REPAYSPECIALRATE,
					T1.REPAYPROFITRATE,
					T1.REPAYFRQ,
					T1.NEXTREPAYDATE,
					T1.REPAYPFTFRQ,
					T1.NEXTREPAYPFTDATE,
					T1.ALLOWREPAYRVW,
					T1.REPAYRVWFRQ,
					T1.NEXTREPAYRVWDATE,
					T1.ALLOWREPAYCPZ,
					T1.REPAYCPZFRQ,
					T1.NEXTREPAYCPZDATE,
					T1.MATURITYDATE,
					T1.CPZATGRACEEND,
					T1.DOWNPAYMENT,
					T1.GRACEFLATAMOUNT,
					T1.REQREPAYAMOUNT,
					T1.TOTALPROFIT,
					T1.TOTALCPZ,
					T1.TOTALGROSSPFT,
					T1.TOTALGROSSGRCPFT,
					T1.TOTALGRACEPFT,
					T1.TOTALGRACECPZ,
					T1.GRCRATEBASIS,
					T1.REPAYRATEBASIS,
					T1.FINTYPE,
					T1.FINREMARKS,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.REQMATURITY,
					T1.CALTERMS,
					T1.CALMATURITY,
					T1.FIRSTREPAY,
					T1.LASTREPAY,
					T1.FINSTARTDATE,
					T1.FINAMOUNT,
					T1.FINAMOUNT + T1.FEECHARGEAMT - T1.DOWNPAYMENT  LOVDESCFINANCINGAMOUNT,
					T1.FINREPAYMENTAMOUNT,
					T1.CUSTID,
					T1.DEFFERMENTS,
					T1.PLANDEFERCOUNT,
					T1.FINBRANCH,
					T1.FINSOURCEID,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.ALLOWEDDEFFRQCHANGE,
					T1.AVAILEDDEFFRQCHANGE,
					T1.RECALTYPE,
					T1.FINASSETVALUE,
					T1.DISBACCOUNTID,
					T1.REPAYACCOUNTID,
					T1.FINISACTIVE,
					T1.LIMITVALID,
					T1.OVERRIDELIMIT,
					T1.SECURITYDEPOSIT,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T7.FINTYPEDESC   LOVDESCFINTYPENAME,
					T7.FINMAXAMOUNT  LOVDESCFINMAXAMT,
					T7.FINMINAMOUNT  LOVDESCFINMINAMOUNT,
					T1.MINDOWNPAYPERC,
					T7.FINISALWDIFFERMENT  LOVDESCFINALWDEFERMENT,
					T7.FINISDWPAYREQUIRED  LOVDESCDWNPAYREQ,
					T7.FINMAXDIFFERMENT   LOVDESCFINMAXDIFFERMENT,
					T12.BRANCHDESC        LOVDESCFINBRANCHNAME,
					T12.BRANCHPROVINCE    FINBRANCHPROVINCECODE,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.LASTREPAYRVWDATE,
					T1.LASTREPAYCPZDATE,
					T1.ALLOWGRCREPAY,
					T1.GRCSCHDMTHD,
					T1.GRCMARGIN,
					T1.REPAYMARGIN,
					T1.FINCURRASSETVALUE,
					T1.FINCOMMITMENTREF,
					T1.FINLIMITREF,
					T1.DEPRECIATIONFRQ,
					T1.FINCONTRACTDATE,
					T1.NEXTDEPDATE,
					T1.LASTDEPDATE,
					T1.FINACCOUNT,
					T1.FINCUSTPFTACCOUNT,
					T17.ACRTILLLBD  LOVDESCACCRUEDTILLLBD,
					T7.FINRVWRATEAPPLFOR,
					T1.TOTALREPAYAMT,
					T1.CLOSINGSTATUS,
					T1.FINAPPROVEDDATE,
					T1.FEECHARGEAMT,
					T1.BLACKLISTED,
					T1.FINREPAYPFTONFRQ,
					T1.ANUALIZEDPERCRATE,
					T1.EFFECTIVERATEOFRETURN,
					T1.MIGRATEDFINANCE,
					T1.SCHEDULEMAINTAINED,
					T1.SCHEDULEREGENERATED,
					T1.FINPURPOSE,
					T39.LOANPURPOSEDESC  LOVDESCFINPURPOSENAME,
					T1.FINSTATUS,
					T1.FINSTSREASON,
					T1.INITIATEUSER,
					T1.BANKNAME,
					T1.IBAN,
					T1.ACCOUNTTYPE,
					T1.DDAREFERENCENO,
					T7.FINSCHEDULEON  LOVDESCFINSCHEDULEON,
					T1.CUSTDSR,
					T1.JOINTACCOUNT,
					T1.JOINTCUSTID,
					T1.DOWNPAYBANK,
					T1.DOWNPAYSUPL,
					T1.DOWNPAYACCOUNT,
					T1.SECURITYCOLLATERAL,
					T1.APPROVED,
					T1.DISCREPANCY,
					T1.LIMITAPPROVED,
					T1.GRACETERMS,
					T7.FINDIVISION  LOVDESCFINDIVISION,
					T1.RCDMAINTAINSTS,
					T1.FINREPAYMETHOD,
					T1.GRCPROFITDAYSBASIS,
					T1.STEPFINANCE,
					T1.STEPTYPE,
					T1.STEPPOLICY,
					T1.ALWMANUALSTEPS,
					T1.NOOFSTEPS,
					T1.LINKEDFINREF,
					T1.NEXTUSERID,
					T1.PRIORITY,
					T24.POLICYDESC  LOVDESCSTEPPOLICYNAME,
					T1.GRCMINRATE,
					T1.GRCMAXRATE,
					T1.RPYMINRATE,
					T1.RPYMAXRATE,
					T1.DEVIATIONAPPROVAL,
					T1.MANUALSCHEDULE,
					T1.TAKEOVERFINANCE,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.SUPPLEMENTRENT,
					T1.INCREASEDCOST,
					T1.CREDITINSAMT,
					T1.ROLLOVERFRQ,
					T1.NEXTROLLOVERDATE,
					T27.CUSTSTSDESCRIPTION,
					T1.SHARIASTATUS,
					T1.INITIATEDATE,
					T1.FINPREAPPROVEDREF,
					T1.MMAID,
					T1.ACCOUNTSOFFICER,
					T1.FEEACCOUNTID,
					T1.FINCANCELAC,
					T28.DEALERNAME  LOVDESCACCOUNTSOFFICER,
					T28.DEALERCITY  LOVDESCSOURCECITY,
					T1.DSACODE,
					T30.ROFFICERDESC  DSACODEDESC,
					T1.TDSAPPLICABLE,
					T1.MANDATEID,
					T1.DROPLINEFRQ,
					T1.FIRSTDROPLINEDATE,
					T1.PFTSERVICINGODLIMIT,
					T1.INSURANCEAMT,
					T1.DEDUCTINSDISB,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.CALROUNDINGMODE,
					T1.ALWMULTIDISB,
					T1.APPLICATIONNO,
					T1.REFERRALID,
					T33.ROFFICERDESC  REFERRALIDDESC,
					T1.DMACODE,
					T34.ROFFICERDESC  DMACODEDESC,
					T1.SALESDEPARTMENT,
					T35.GENDEPTDESC  SALESDEPARTMENTDESC,
					T1.QUICKDISB,
					T1.WIFREFERENCE,
					T1.UNPLANEMIHLOCKPERIOD,
					T1.UNPLANEMICPZ,
					T1.REAGECPZ,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.AVAILEDUNPLANEMI,
					T1.AVAILEDREAGEH,
					T1.BPIAMOUNT,
					T1.DEDUCTFEEDISB,
					T1.RVWRATEAPPLFOR,
					T1.SCHCALONRVW,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.PROMOTIONCODE,
					T1.RESTRUCTURELOAN,
					T1.OLDFINREFERENCE,
					T1.REAGEBUCKET,
					T1.FINCATEGORY,
					T1.PRODUCTCATEGORY,
					T1.ROUNDINGTARGET,
					T36.ENTITYCODE  LOVDESCENTITYCODE,
					T1.ELIGIBILITYMETHOD,
					T38.FIELDCODEVALUE  LOVELIGIBILITYMETHOD,
					T38.VALUEDESC       LOVDESCELIGIBILITYMETHOD,
					T1.EMPLOYEENAME,
					T37.ROFFICERDESC  EMPLOYEENAMEDESC,
					T1.SAMPLINGREQUIRED,
					T1.LEGALREQUIRED,
					T1.GRCMAXAMOUNT,
					T1.CONNECTOR,
					T40.DEALERNAME  CONNECTORCODE,
					T40.DEALERCITY  CONNECTORDESC,
					T1.ADVANCEEMI,
					T1.ADVEMITERMS,
					T1.BPIPFTDAYSBASIS,
					T1.FIXEDRATETENOR,
					T1.FIXEDTENORRATE,
					T12.BRANCHTEL  FINBRANCHCONTACT,
					T1.PROCESSATTRIBUTES,
					T1.BUSINESSVERTICAL,
					BV.CODE         BUSINESSVERTICALCODE,
					BV.DESCRIPTION  BUSINESSVERTICALDESC,
					T1.GRCADVTYPE,
					T1.GRCADVTERMS,
					T1.ADVTYPE,
					T1.ADVTERMS,
					T1.ADVSTAGE,
					T1.TDSPERCENTAGE,
					T1.TDSSTARTDATE,
					T1.TDSENDDATE,
					T1.TDSLIMITAMT,
					T1.VANREQ,
					T1.VANCODE,
					T1.ALLOWDRAWINGPOWER
					FROM FINANCEMAIN_TEMP T1
					JOIN RMTFINANCETYPES T7 ON T1.FINTYPE = T7.FINTYPE
					LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH = T12.BRANCHCODE
					LEFT JOIN FINPFTDETAILS T17 ON T17.FINREFERENCE = T1.FINREFERENCE
					LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY = T24.POLICYCODE
					LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS = T27.CUSTSTSCODE
					LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
					LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE = T30.ROFFICERCODE
					LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID = T33.ROFFICERCODE
					LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE = T34.ROFFICERCODE
					LEFT JOIN RMTGENDEPARTMENTS T35 ON T1.SALESDEPARTMENT = T35.GENDEPARTMENT
					LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION = T36.DIVISIONCODE
					LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME = T37.ROFFICERCODE
					LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE = 'ELGMETHOD'
					LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE = T39.LOANPURPOSECODE
					LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
					LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
	</createView>
	</changeSet>

	<changeSet id="97_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_restore_dependencies ('plf', 'financemain_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="98_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_save_and_drop_dependencies ('plf', 'financemain_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="98" author="satyanarayana.g">
		<createView viewName="FINANCEMAIN_AVIEW" replaceIfExists="true">
			SELECT T1.FINREFERENCE,
					T1.INVESTMENTREF,
					T1.NUMBEROFTERMS,
					T1.GRCPERIODENDDATE,
					T1.ALLOWGRCPERIOD,
					T1.GRACEBASERATE,
					T1.GRACESPECIALRATE,
					T1.GRCPFTRATE,
					T1.GRCPFTFRQ,
					T1.NEXTGRCPFTDATE,
					T1.ALLOWGRCPFTRVW,
					T1.GRCPFTRVWFRQ,
					T1.NEXTGRCPFTRVWDATE,
					T1.ALLOWGRCCPZ,
					T1.GRCCPZFRQ,
					T1.NEXTGRCCPZDATE,
					T1.REPAYBASERATE,
					T1.REPAYSPECIALRATE,
					T1.REPAYPROFITRATE,
					T1.REPAYFRQ,
					T1.NEXTREPAYDATE,
					T1.REPAYPFTFRQ,
					T1.NEXTREPAYPFTDATE,
					T1.ALLOWREPAYRVW,
					T1.REPAYRVWFRQ,
					T1.NEXTREPAYRVWDATE,
					T1.ALLOWREPAYCPZ,
					T1.REPAYCPZFRQ,
					T1.NEXTREPAYCPZDATE,
					T1.MATURITYDATE,
					T1.CPZATGRACEEND,
					T1.DOWNPAYMENT,
					T1.GRACEFLATAMOUNT,
					T1.REQREPAYAMOUNT,
					T1.TOTALPROFIT,
					T1.TOTALCPZ,
					T1.TOTALGROSSPFT,
					T1.TOTALGROSSGRCPFT,
					T1.TOTALGRACEPFT,
					T1.TOTALGRACECPZ,
					T1.GRCRATEBASIS,
					T1.REPAYRATEBASIS,
					T1.FINTYPE,
					T1.FINREMARKS,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.REQMATURITY,
					T1.CALTERMS,
					T1.CALMATURITY,
					T1.FIRSTREPAY,
					T1.LASTREPAY,
					T1.FINSTARTDATE,
					T1.FINAMOUNT,
					T1.FINAMOUNT + T1.FEECHARGEAMT - T1.DOWNPAYMENT  LOVDESCFINANCINGAMOUNT,
					T1.FINREPAYMENTAMOUNT,
					T1.CUSTID,
					T1.DEFFERMENTS,
					T1.PLANDEFERCOUNT,
					T1.FINBRANCH,
					T1.FINSOURCEID,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.ALLOWEDDEFFRQCHANGE,
					T1.AVAILEDDEFFRQCHANGE,
					T1.RECALTYPE,
					T1.FINASSETVALUE,
					T1.DISBACCOUNTID,
					T1.REPAYACCOUNTID,
					T1.FINISACTIVE,
					T1.LIMITVALID,
					T1.OVERRIDELIMIT,
					T1.SECURITYDEPOSIT,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T7.FINTYPEDESC   LOVDESCFINTYPENAME,
					T7.FINMAXAMOUNT  LOVDESCFINMAXAMT,
					T7.FINMINAMOUNT  LOVDESCFINMINAMOUNT,
					T1.MINDOWNPAYPERC,
					T7.FINISALWDIFFERMENT  LOVDESCFINALWDEFERMENT,
					T7.FINISDWPAYREQUIRED  LOVDESCDWNPAYREQ,
					T7.FINMAXDIFFERMENT    LOVDESCFINMAXDIFFERMENT,
					T12.BRANCHDESC         LOVDESCFINBRANCHNAME,
					T12.BRANCHPROVINCE     FINBRANCHPROVINCECODE,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.LASTREPAYRVWDATE,
					T1.LASTREPAYCPZDATE,
					T1.ALLOWGRCREPAY,
					T1.GRCSCHDMTHD,
					T1.GRCMARGIN,
					T1.REPAYMARGIN,
					T1.FINCURRASSETVALUE,
					T1.FINCOMMITMENTREF,
					T1.FINLIMITREF,
					T1.DEPRECIATIONFRQ,
					T1.FINCONTRACTDATE,
					T1.NEXTDEPDATE,
					T1.LASTDEPDATE,
					T1.FINACCOUNT,
					T1.FINCUSTPFTACCOUNT,
					T17.ACRTILLLBD  LOVDESCACCRUEDTILLLBD,
					T7.FINRVWRATEAPPLFOR,
					T1.TOTALREPAYAMT,
					T1.CLOSINGSTATUS,
					T1.FINAPPROVEDDATE,
					T1.FEECHARGEAMT,
					T1.BLACKLISTED,
					T1.FINREPAYPFTONFRQ,
					T1.ANUALIZEDPERCRATE,
					T1.EFFECTIVERATEOFRETURN,
					T1.MIGRATEDFINANCE,
					T1.SCHEDULEMAINTAINED,
					T1.SCHEDULEREGENERATED,
					T1.FINPURPOSE,
					T39.LOANPURPOSEDESC  LOVDESCFINPURPOSENAME,
					T1.FINSTATUS,
					T1.FINSTSREASON,
					T1.INITIATEUSER,
					T1.BANKNAME,
					T1.IBAN,
					T1.ACCOUNTTYPE,
					T1.DDAREFERENCENO,
					T7.FINSCHEDULEON  LOVDESCFINSCHEDULEON,
					T1.CUSTDSR,
					T1.JOINTACCOUNT,
					T1.JOINTCUSTID,
					T1.DOWNPAYBANK,
					T1.DOWNPAYSUPL,
					T1.DOWNPAYACCOUNT,
					T1.SECURITYCOLLATERAL,
					T1.APPROVED,
					T1.DISCREPANCY,
					T1.LIMITAPPROVED,
					T1.GRACETERMS,
					T7.FINDIVISION  LOVDESCFINDIVISION,
					T1.RCDMAINTAINSTS,
					T1.FINREPAYMETHOD,
					T1.GRCPROFITDAYSBASIS,
					T1.STEPFINANCE,
					T1.STEPTYPE,
					T1.STEPPOLICY,
					T1.ALWMANUALSTEPS,
					T1.NOOFSTEPS,
					T1.LINKEDFINREF,
					T1.NEXTUSERID,
					T1.PRIORITY,
					T24.POLICYDESC  LOVDESCSTEPPOLICYNAME,
					T1.GRCMINRATE,
					T1.GRCMAXRATE,
					T1.RPYMINRATE,
					T1.RPYMAXRATE,
					T1.DEVIATIONAPPROVAL,
					T1.MANUALSCHEDULE,
					T1.TAKEOVERFINANCE,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.SUPPLEMENTRENT,
					T1.INCREASEDCOST,
					T1.CREDITINSAMT,
					T1.ROLLOVERFRQ,
					T1.NEXTROLLOVERDATE,
					T27.CUSTSTSDESCRIPTION,
					T1.SHARIASTATUS,
					T1.INITIATEDATE,
					T1.FINPREAPPROVEDREF,
					T1.MMAID,
					T1.ACCOUNTSOFFICER,
					T1.FEEACCOUNTID,
					T1.FINCANCELAC,
					T28.DEALERNAME  LOVDESCACCOUNTSOFFICER,
					T28.DEALERCITY  LOVDESCSOURCECITY,
					T1.DSACODE,
					T30.ROFFICERDESC  DSACODEDESC,
					T1.TDSAPPLICABLE,
					T1.MANDATEID,
					T1.DROPLINEFRQ,
					T1.FIRSTDROPLINEDATE,
					T1.PFTSERVICINGODLIMIT,
					T1.INSURANCEAMT,
					T1.DEDUCTINSDISB,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.CALROUNDINGMODE,
					T1.ALWMULTIDISB,
					T1.APPLICATIONNO,
					T1.REFERRALID,
					T33.ROFFICERDESC  REFERRALIDDESC,
					T1.DMACODE,
					T34.ROFFICERDESC  DMACODEDESC,
					T1.SALESDEPARTMENT,
					T35.GENDEPTDESC  SALESDEPARTMENTDESC,
					T1.QUICKDISB,
					T1.WIFREFERENCE,
					T1.UNPLANEMIHLOCKPERIOD,
					T1.UNPLANEMICPZ,
					T1.REAGECPZ,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.AVAILEDUNPLANEMI,
					T1.AVAILEDREAGEH,
					T1.BPIAMOUNT,
					T1.DEDUCTFEEDISB,
					T1.RVWRATEAPPLFOR,
					T1.SCHCALONRVW,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.PROMOTIONCODE,
					T1.RESTRUCTURELOAN,
					T1.OLDFINREFERENCE,
					T1.REAGEBUCKET,
					T1.FINCATEGORY,
					T1.PRODUCTCATEGORY,
					T1.ROUNDINGTARGET,
					T36.ENTITYCODE  LOVDESCENTITYCODE,
					T1.ELIGIBILITYMETHOD,
					T38.FIELDCODEVALUE  LOVELIGIBILITYMETHOD,
					T38.VALUEDESC       LOVDESCELIGIBILITYMETHOD,
					T1.EMPLOYEENAME,
					T37.ROFFICERDESC  EMPLOYEENAMEDESC,
					T1.SAMPLINGREQUIRED,
					T1.LEGALREQUIRED,
					T1.GRCMAXAMOUNT,
					T1.CONNECTOR,
					T40.DEALERNAME  CONNECTORCODE,
					T40.DEALERCITY  CONNECTORDESC,
					T1.ADVANCEEMI,
					T1.ADVEMITERMS,
					T1.BPIPFTDAYSBASIS,
					T1.FIXEDRATETENOR,
					T1.FIXEDTENORRATE,
					T12.BRANCHTEL  FINBRANCHCONTACT,
					T1.PROCESSATTRIBUTES,
					T1.BUSINESSVERTICAL,
					BV.CODE         BUSINESSVERTICALCODE,
					BV.DESCRIPTION  BUSINESSVERTICALDESC,
					T1.GRCADVTYPE,
					T1.GRCADVTERMS,
					T1.ADVTYPE,
					T1.ADVTERMS,
					T1.ADVSTAGE,
					T1.TDSPERCENTAGE,
					T1.TDSSTARTDATE,
					T1.TDSENDDATE,
					T1.TDSLIMITAMT,
					T1.VANREQ,
					T1.VANCODE,
					T1.ALLOWDRAWINGPOWER
					FROM FINANCEMAIN T1
					JOIN RMTFINANCETYPES T7 ON T1.FINTYPE = T7.FINTYPE
					LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH = T12.BRANCHCODE
					LEFT JOIN FINPFTDETAILS T17 ON T17.FINREFERENCE = T1.FINREFERENCE
					LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY = T24.POLICYCODE
					LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS = T27.CUSTSTSCODE
					LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
					LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE = T30.ROFFICERCODE
					LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID = T33.ROFFICERCODE
					LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE = T34.ROFFICERCODE
					LEFT JOIN RMTGENDEPARTMENTS T35 ON T1.SALESDEPARTMENT = T35.GENDEPARTMENT
					LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION = T36.DIVISIONCODE
					LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME = T37.ROFFICERCODE
					LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE = 'ELGMETHOD'
					LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE = T39.LOANPURPOSECODE
					LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
					LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
	</createView>
	</changeSet>

	<changeSet id="98_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_restore_dependencies ('plf', 'financemain_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="99_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_save_and_drop_dependencies ('plf', 'rejectfinancemain_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="99" author="satyanarayana.g">
		<createView viewName="REJECTFINANCEMAIN_VIEW" replaceIfExists="true">
			SELECT F.FINREFERENCE,
					T.FINCATEGORY  LOVDESCPRODUCTCODENAME,
					F.FINTYPE,
					F.FINBRANCH,
					F.FINSTARTDATE,
					F.MATURITYDATE,
					F.NUMBEROFTERMS,
					F.FINCCY,
					F.FINAMOUNT,
					F.FINAMOUNT - F.DOWNPAYMENT + F.FEECHARGEAMT + F.INSURANCEAMT  FINANCINGAMOUNT,
					F.FEECHARGEAMT,
					F.INSURANCEAMT,
					F.FINAMOUNT - F.DOWNPAYMENT + F.FEECHARGEAMT + F.INSURANCEAMT - F.FINREPAYMENTAMOUNT  CURFINAMOUNT,
					F.DOWNPAYMENT,
					F.FINCURRASSETVALUE,
					F.FINASSETVALUE,
					F.ALLOWDRAWINGPOWER,
					C.CUSTCIF  LOVDESCCUSTCIF
					FROM REJECTFINANCEMAIN F
					LEFT JOIN CUSTOMERS C ON F.CUSTID = C.CUSTID
					LEFT JOIN RMTFINANCETYPES T ON F.FINTYPE = T.FINTYPE
	</createView>
	</changeSet>

	<changeSet id="99_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_restore_dependencies ('plf', 'rejectfinancemain_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="100" author="satyanarayana.g">
		<sql>
			<![CDATA[
				 UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS);
			 	 UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);
			 	 
			 	 DELETE FROM SECGROUPRIGHTS Where GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='BFSD_ORIGINATION_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_AllowDrawingPower');
			 	 DELETE FROM SECRIGHTS Where RightName = 'FinanceMainDialog_AllowDrawingPower';
			 	 
				 INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3,'FinanceMainDialog_AllowDrawingPower','FinanceMainDialog', 0, 1000,CURRENT_TIMESTAMP,'',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0; 
 				 INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),(SELECT GRPID FROM SECGROUPS WHERE GRPCODE='BFSD_ORIGINATION_MAKER'),(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_AllowDrawingPower'), 1, 0, 1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0); 
			 
				 UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS);
			     UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);
			]]>
		</sql>
	</changeSet>

	<changeSet id="101" author="murthy">
		<comment>New RBFields Added for Limit Rule</comment>
		<sql>
            <![CDATA[ 
				Delete from BMTAMOUNTCODES Where ALLOWEDEVENT = 'ADDDBSN' ANd AMOUNTCODE = 'ae_deductFeeDisb';
				Insert into BMTAMOUNTCODES values ('ADDDBSN', 0, 'ae_deductFeeDisb', 'Deduct Fee From Disbursement', '1', 1, 1000, Current_TimeStamp, 'Approved', null, null, null, null, null, 0);
    	     ]]>
		</sql>
	</changeSet>

	<changeSet id="102" author="murthy">
		<comment>New RBFields Added for Limit Rule</comment>
		<sql>
            <![CDATA[ 
				Insert into RBFieldDetails Values ('LMTLINE', 'BANK', 'fm_lovDescAccountsOfficer', 'Sourcing Type', 'varchar', 100, 0, 0, '', 'dbvalue', 'SourceOfficer');
               	Insert into RBFieldDetails Values ('LMTLINE', 'CUSTOMER', 'fm_lovDescAccountsOfficer', 'Sourcing Type', 'varchar', 100, 0, 0, '', 'dbvalue', 'SourceOfficer');
    	     ]]>
		</sql>
	</changeSet>

	<changeSet id="103" author="Manoj">
		<sql> 
	 	 <![CDATA[ 
	  	 	DELETE FROM SMTPARAMETERS where sysparmcode = 'HOLD_INS_INST_POST';
		 	INSERT INTO SMTPARAMETERS VALUES ('HOLD_INS_INST_POST','Insurance Instruction Posting During Loan','String', 0, 'N', 1, 0, NULL, NULL,'Disbursement Instruction Posting During Loan',1, 1000,CURRENT_TIMESTAMP,'Approved',NULL, NULL, NULL, NULL, NULL, 0); 
	 	]]>
		</sql>
	</changeSet>
	<!-- please skip id no "104" for next change set -->

	<changeSet id="105" author="murthy">
		<comment>New RBFields Added for Limit Rule</comment>
		<sql>
            <![CDATA[ 
				delete from RBFieldDetails where RBModule = 'LMTLINE' and RbFldName = 'fm_lovDescAccountsOfficer';
				delete from RBFieldDetails where RBModule = 'LMTLINE' and RbFldName = 'fm_dmaCodeDesc';

				Insert into RBFieldDetails Values ('LMTLINE', 'BANK', 'fm_lovDescAccountsOfficer', 'Sourcing Officer', 'varchar', 100, 0, 0, '', 'dbvalue', 'SourceOfficer');
				Insert into RBFieldDetails Values ('LMTLINE', 'CUSTOMER', 'fm_lovDescAccountsOfficer', 'Sourcing Officer', 'varchar', 100, 0, 0, '', 'dbvalue', 'SourceOfficer');

				Insert into RBFieldDetails Values ('LMTLINE', 'BANK', 'fm_dmaCodeDesc', 'DMA Code', 'varchar', 100, 0, 0, '', 'dbvalue', 'DMA');
				Insert into RBFieldDetails Values ('LMTLINE', 'CUSTOMER', 'fm_dmaCodeDesc', 'DMA Code', 'varchar', 100, 0, 0, '', 'dbvalue', 'DMA');
    	     ]]>
		</sql>
	</changeSet>

	<changeSet id="106" author="Varaprasad.K">
		<sql>
	  <![CDATA[ 
		  delete from errordetails where code='RU0047';
		  INSERT INTO ErrorDetails VALUES('RU0047','EN','E','{0} {1} should be equal.','','Approved','','','','','',0,CURRENT_TIMESTAMP,1000,0);
  		]]>
		</sql>
	</changeSet>

	<changeSet id="107" author="Varaprasad.K">
		<sql>
		 <![CDATA[ 
			delete from errordetails where code='RU0048';
			INSERT INTO ErrorDetails VALUES('RU0048','EN','E','Value date should be after first disbursement date.','','Approved','','','','','',0,CURRENT_TIMESTAMP,1000,0);
		]]>
		</sql>
	</changeSet>

	<changeSet id="108_pre" author="murthy.y" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_save_and_drop_dependencies ('plf', 'secusers_rtemp');
			]]>
		</sql>
	</changeSet>

	<changeSet id="108" author="Varaprasad.k">
		<modifyDataType tableName="SecUsers_Rtemp" columnName="USERSTAFFID" newDataType="varchar(10)" />
	</changeSet>

	<changeSet id="108_post" author="murthy.y" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_restore_dependencies ('plf', 'secusers_rtemp');
			]]>
		</sql>
	</changeSet>

	<changeSet id="109" author="Varaprasad.k" dbms="postgresql,oracle">
		<sql>
			<![CDATA[
			delete from SMTPARAMETERS WHERE SYSPARMCODE='RECEIPTUPLOAD_DEDUPCHECK'; 
			Insert into SMTPARAMETERS (SYSPARMCODE,SYSPARMDESC,SYSPARMTYPE,SYSPARMMAINT,SYSPARMVALUE,SYSPARMLENGTH,SYSPARMDEC,SYSPARMLIST,SYSPARMVALDMOD,SYSPARMDESCRIPTION,VERSION,LASTMNTBY,LASTMNTON,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID) values ('RECEIPTUPLOAD_DEDUPCHECK','Receipt Upload Dedup Check','String',0,'Y',1,0,null,null,'Receipt Upload Dedup Check',1,1000,to_date('30-07-19','DD-MM-RR'),'Approved',null,null,null,null,null,0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="109" author="Varaprasad.k" dbms="mssql">
		<sql>
			<![CDATA[
			delete from SMTPARAMETERS WHERE SYSPARMCODE='RECEIPTUPLOAD_DEDUPCHECK'; 
			Insert into SMTPARAMETERS (SYSPARMCODE,SYSPARMDESC,SYSPARMTYPE,SYSPARMMAINT,SYSPARMVALUE,SYSPARMLENGTH,SYSPARMDEC,SYSPARMLIST,SYSPARMVALDMOD,SYSPARMDESCRIPTION,VERSION,LASTMNTBY,LASTMNTON,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID) values ('RECEIPTUPLOAD_DEDUPCHECK','Receipt Upload Dedup Check','String',0,'Y',1,0,null,null,'Receipt Upload Dedup Check',1,1000,convert(varchar,'2019-07-30',23),'Approved',null,null,null,null,null,0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="110_pre" author="murthy.y" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_save_and_drop_dependencies ('plf', 'finprovisions');
					select deps_save_and_drop_dependencies ('plf', 'finprovisions_temp');
			]]>
		</sql>
	</changeSet>

	<changeSet id="110" author="Varaprasad.k">
		<modifyDataType tableName="finprovisions" columnName="USENFPROV" newDataType="boolean" />
		<modifyDataType tableName="finprovisions_temp" columnName="USENFPROV" newDataType="boolean" />
		<modifyDataType tableName="finprovisions" columnName="AUTORELEASENFP" newDataType="boolean" />
		<modifyDataType tableName="finprovisions_temp" columnName="AUTORELEASENFP" newDataType="boolean" />
	</changeSet>

	<changeSet id="110_post" author="murthy.y" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_restore_dependencies ('plf', 'finprovisions');
					select deps_restore_dependencies ('plf', 'finprovisions_temp');
			]]>
		</sql>
	</changeSet>

	<changeSet id="111" author="Saikiran.v">
		<sql>
			<![CDATA[
				UPDATE finprovisions Set USENFPROV = 0;
				UPDATE finprovisions_temp Set USENFPROV = 0;
				UPDATE finprovisions Set AUTORELEASENFP = 0;
				UPDATE finprovisions_temp Set AUTORELEASENFP = 0;
			
			]]>
		</sql>
	</changeSet>

	<changeSet id="112" author="Saikiran.v" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE finprovisions ADD CONSTRAINT DF_finprovisions_USENFPROV DEFAULT 0 FOR USENFPROV;
				ALTER TABLE finprovisions_temp ADD CONSTRAINT DF_finprovisions_temp_USENFPROV DEFAULT 0 FOR USENFPROV;
				ALTER TABLE finprovisions ADD CONSTRAINT DF_finprovisions_AUTORELEASENFP DEFAULT 0 FOR AUTORELEASENFP;
				ALTER TABLE finprovisions_temp ADD CONSTRAINT DF_finprovisions_temp_AUTORELEASENFP DEFAULT 0 FOR AUTORELEASENFP;
			]]>
		</sql>
	</changeSet>

	<changeSet id="113" author="Saikiran.v" dbms="postgresql, oracle">
		<addDefaultValue columnName="USENFPROV" tableName="finprovisions" defaultValue="0" />
		<addDefaultValue columnName="USENFPROV" tableName="finprovisions_temp" defaultValue="0" />
		<addDefaultValue columnName="AUTORELEASENFP" tableName="finprovisions" defaultValue="0" />
		<addDefaultValue columnName="AUTORELEASENFP" tableName="finprovisions_temp" defaultValue="0" />
	</changeSet>

	<changeSet id="114" author="Saikiran.V">
		<createView viewName="receiptallocationdetail_view" replaceIfExists="true">
					SELECT t1.receiptallocationid,
				    t1.receiptid,
				    t1.allocationid,
				    t1.allocationtype,
				    t1.allocationto,
				    t1.paidamount,
				    t1.waivedamount,
				    COALESCE(t3.feetypedesc, t5.feetypedesc) AS typedesc,
				    t1.paidgst,
				    t1.waivedreqamount,
				    t1.waiveraccepted,
				    t1.totaldue,
				    t1.waivedgst
				   FROM receiptallocationdetail_temp t1
				     LEFT JOIN finfeedetail_temp t2 ON t1.allocationto = (- t2.feeid) AND t1.allocationtype = 'FEE' 
				     LEFT JOIN feetypes t3 ON t2.feetypeid = t3.feetypeid
				     LEFT JOIN manualadvise t4 ON t1.allocationto = t4.adviseid AND t1.allocationtype = 'MANADV'
				     LEFT JOIN feetypes t5 ON t4.feetypeid = t5.feetypeid
				UNION ALL
				 SELECT t1.receiptallocationid,
				    t1.receiptid,
				    t1.allocationid,
				    t1.allocationtype,
				    t1.allocationto,
				    t1.paidamount,
				    t1.waivedamount,
				    COALESCE(t3.feetypedesc, t5.feetypedesc) AS typedesc,
				    t1.paidgst,
				    t1.waivedreqamount,
				    t1.waiveraccepted,
				    t1.totaldue,
				    t1.waivedgst
				   FROM receiptallocationdetail t1
				     LEFT JOIN finfeedetail t2 ON t1.allocationto = (- t2.feeid) AND t1.allocationtype = 'FEE' 
				     LEFT JOIN feetypes t3 ON t2.feetypeid = t3.feetypeid
				     LEFT JOIN manualadvise t4 ON t1.allocationto = t4.adviseid AND t1.allocationtype = 'MANADV' 
				     LEFT JOIN feetypes t5 ON t4.feetypeid = t5.feetypeid
				  WHERE NOT (EXISTS ( SELECT 1
				           FROM receiptallocationdetail_temp
				          WHERE receiptallocationdetail_temp.receiptid = t1.receiptid))
		</createView>
	</changeSet>
	<changeSet id="115" author="Saikiran.V">
		<createView viewName="receiptallocationdetail_view" replaceIfExists="true">
					SELECT t1.receiptallocationid,
				    t1.receiptid,
				    t1.allocationid,
				    t1.allocationtype,
				    t1.allocationto,
				    t1.paidamount,
				    t1.waivedamount,
				    COALESCE(t3.feetypedesc, t5.feetypedesc) AS typedesc,
				    t1.paidgst,
				    t1.waivedreqamount,
				    t1.waiveraccepted,
				    t1.totaldue,
				    t1.waivedgst
				   FROM receiptallocationdetail_temp t1
				     LEFT JOIN finfeedetail_temp t2 ON t1.allocationto =  t2.feeid AND t1.allocationtype = 'FEE' 
				     LEFT JOIN feetypes t3 ON t2.feetypeid = t3.feetypeid
				     LEFT JOIN manualadvise t4 ON t1.allocationto = t4.adviseid AND t1.allocationtype = 'MANADV'
				     LEFT JOIN feetypes t5 ON t4.feetypeid = t5.feetypeid
				UNION ALL
				 SELECT t1.receiptallocationid,
				    t1.receiptid,
				    t1.allocationid,
				    t1.allocationtype,
				    t1.allocationto,
				    t1.paidamount,
				    t1.waivedamount,
				    COALESCE(t3.feetypedesc, t5.feetypedesc) AS typedesc,
				    t1.paidgst,
				    t1.waivedreqamount,
				    t1.waiveraccepted,
				    t1.totaldue,
				    t1.waivedgst
				   FROM receiptallocationdetail t1
				     LEFT JOIN finfeedetail t2 ON t1.allocationto = t2.feeid AND t1.allocationtype = 'FEE' 
				     LEFT JOIN feetypes t3 ON t2.feetypeid = t3.feetypeid
				     LEFT JOIN manualadvise t4 ON t1.allocationto = t4.adviseid AND t1.allocationtype = 'MANADV' 
				     LEFT JOIN feetypes t5 ON t4.feetypeid = t5.feetypeid
				  WHERE NOT (EXISTS ( SELECT 1
				           FROM receiptallocationdetail_temp
				          WHERE receiptallocationdetail_temp.receiptid = t1.receiptid))
		</createView>
	</changeSet>
	<changeSet id="116" author="Saikiran.V">
		<sql>
	   	  <![CDATA[
			  UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS_VIEW);
			  INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menuItem_FinanceManagement_ReceiptKnockOffCancelApprover','MENU',0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0 FROM SEQSECRIGHTS WHERE 0=0;
			  UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS_VIEW); 
	 	 ]]>
		</sql>
	</changeSet>
	<changeSet id="117" author="Saikiran.V">
		<sql>
			<![CDATA[
				UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS_VIEW); 
				delete from SECGROUPRIGHTS where grpid=(SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_KNOCKOFFRECEIPTCANCEL_APPROVER') and RIGHTID= (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='menuItem_FinanceManagement_ReceiptKnockOffCancel');
 				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_KNOCKOFFRECEIPTCANCEL_APPROVER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='menuItem_FinanceManagement_ReceiptKnockOffCancelApprover'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS_VIEW);
      	   ]]>
		</sql>
	</changeSet>

	<changeSet id="119" author="vijaya.a">
		<comment>Commodity and LAS</comment>
		<createView viewName="COMMODITIES_VIEW" replaceIfExists="true">
			  SELECT t1.id,
    			t2.code commodityTypeCode,
    			t1.commoditytype,
    			t1.code,
    			t1.description,
    			t1.currentvalue,
    			t1.hsncode,
    			t1.alertsRequired,
    			t1.alertType,
    			t1.alertToRoles,
    			t1.UserTemplate,
    			T3.TemplateCode UserTemplateCode,
			  	T3.TemplateDesc UserTemplateName,
    			t1.CustomerTemplate,
    			T4.TemplateCode CustomerTemplateCode,
			  	T4.TemplateDesc CustomerTemplateName,
    			t2.unittype,
    			t1.active,
    			t1.version,
    			t1.lastmntby,
    			t1.lastmnton,
    			t1.recordstatus,
    			t1.rolecode,
    			t1.nextrolecode,
    			t1.taskid,
    			t1.nexttaskid,
    			t1.recordtype,
    			t1.workflowid
   			  FROM commodities_temp t1
     		  LEFT JOIN commodity_types t2 ON t2.id = t1.commoditytype
     		  LEFT JOIN TEMPLATES T3 ON T3.TemplateId = T1.UserTemplate
			  LEFT JOIN TEMPLATES T4 ON T4.TemplateId = T1.CustomerTemplate
			  UNION ALL
 			  SELECT t1.id,
 				t2.code commodityTypeCode,
    			t1.commoditytype,
    			t1.code,
    			t1.description,
    			t1.currentvalue,
    			t1.hsncode,
    			t1.alertsRequired,
    			t1.alertType,
    			t1.alertToRoles,
    			t1.UserTemplate,
    			T3.TemplateCode UserTemplateCode,
			  	T3.TemplateDesc UserTemplateName,
    			t1.CustomerTemplate,
    			T4.TemplateCode CustomerTemplateCode,
			  	T4.TemplateDesc CustomerTemplateName,
    			t2.unittype,
    			t1.active,
    			t1.version,
    			t1.lastmntby,
    			t1.lastmnton,
    			t1.recordstatus,
    			t1.rolecode,
    			t1.nextrolecode,	
    			t1.taskid,
    			t1.nexttaskid,
    			t1.recordtype,
    			t1.workflowid
   			  FROM commodities t1
     		  LEFT JOIN commodity_types t2 ON t2.id = t1.commoditytype
     		  LEFT JOIN TEMPLATES T3 ON T3.TemplateId = T1.UserTemplate
			  LEFT JOIN TEMPLATES T4 ON T4.TemplateId = T1.CustomerTemplate
  			  WHERE NOT (EXISTS ( SELECT 1
              FROM commodities_temp
              WHERE commodities_temp.id = t1.id))
		</createView>
	</changeSet>

	<changeSet id="120" author="Varaprasad.K">
		<sql>
		<![CDATA[
			delete from errordetails where code='RM0001';
			INSERT INTO ErrorDetails VALUES('RM0001','EN','E','Now allowed to do earlysettlement on/after maturity date.','','Approved','','','','','',0,CURRENT_TIMESTAMP,1000,0);
		   ]]>
		</sql>
	</changeSet>

	<changeSet id="121" author="Sudhakar.N">
		<createIndex tableName="plfapilogdetails" indexName="idx_apilogdetails_messageid">
			<column name="messageid" />
			<column name="processed" />
			<column name="entityid" />
		</createIndex>
	</changeSet>

	<changeSet id="122" author="Sudhakar.N">
		<createIndex tableName="pincodes" indexName="idx_pincodes_pincode_city">
			<column name="pincode" />
			<column name="city" />
		</createIndex>
	</changeSet>

	<changeSet id="123" author="Sudhakar.N">
		<createIndex tableName="bankbranches" indexName="idx_bankbranches_micr_activce">
			<column name="micr" />
			<column name="active" />
		</createIndex>
	</changeSet>

	<changeSet id="124" author="Prabhakar">
		<sql>
		<![CDATA[
	      update RBFIELDDETAILS set RBFLDTYPE = 'char', RBFLDDESC = 'Eligibility Method' where  RBFLDNAME  = 'eligibilityMethod';
		 ]]>
		</sql>
	</changeSet>

	<changeSet id="125" author="Varaprasad.k">
		<sql>
            <![CDATA[
                delete from reasons where reasontypeid IN (select id from reasontypes where code IN ('PDWRES', 'PDSTATUS')) and reasoncategoryId IN (select id from reasoncategory where code IN ('PDWRES', 'PDSTATUS'));
                delete from reasontypes where code IN ('PDWRES', 'PDSTATUS');
                
                update seqreasontypes set seqno = (select coalesce(max(Id), 0) from reasontypes_view);
                 
                insert into reasontypes values((select coalesce(max(Id), 0)+1 from reasontypes_view), 'PDWRES', 'Personal Discussion verification waiver reason type.', 1, 1000, CURRENT_TIMESTAMP,'Approved', ' ', ' ', ' ', ' ', ' ', 0);
                insert into reasontypes values((select coalesce(max(Id), 0)+1 from reasontypes_view), 'PDSTATUS', 'Personal Discussion verification status reason type.', 1, 1000, CURRENT_TIMESTAMP,'Approved', ' ', ' ', ' ', ' ', ' ', 0);
                
                update seqreasontypes set seqno = (select coalesce(max(Id), 0) from reasontypes_view);

              ]]>
		</sql>
	</changeSet>

	<changeSet id="126" author="Bharat R">
		<addColumn tableName="FinOdDetails">
			<column name="LockODRecalCal" type="Boolean" defaultValue="0">
			</column>
		</addColumn>
	</changeSet>

	<changeSet id="127" author="Bharat R">
		<createView viewName="finoddetails_view" replaceIfExists="true">
	SELECT od.finreference,
    od.finodschddate,
    od.finodfor,
    od.finbranch,
    od.fintype,
    od.custid,
    od.finodtilldate,
    od.fincurodamt,
    od.fincurodpri,
    od.fincurodpft,
    od.finmaxodamt,
    od.finmaxodpri,
    od.finmaxodpft,
    od.gracedays,
    od.incgracedays,
    od.fincuroddays,
    od.totpenaltyamt,
    od.totwaived,
    od.totpenaltypaid,
    od.lpiamt,
    od.lpipaid,
    od.lpibal,
    od.totpenaltybal,
    od.finlmdfdate,
    COALESCE(pr.applyodpenalty, 0) AS applyodpenalty,
    COALESCE(pr.odincgrcdays, 0) AS odincgrcdays,
    COALESCE(pr.odchargetype, '') AS odchargetype,
    COALESCE(pr.odgracedays, 0) AS odgracedays,
    COALESCE(pr.odchargecalon, '') AS odchargecalon,
    COALESCE(pr.odchargeamtorperc, 0) AS odchargeamtorperc,
    COALESCE(pr.odallowwaiver, 0) AS odallowwaiver,
    COALESCE(pr.odmaxwaiverperc, 0) AS odmaxwaiverperc,
    COALESCE(pr.odrulecode, '') AS odrulecode,
    od.LockODRecalCal
   FROM finoddetails od
     LEFT JOIN finodpenalty_latest_rates_view pr ON od.finreference = pr.finreference
</createView>
	</changeSet>

	<changeSet id="128_pre" author="murthy" dbms="postgresql">
		<dropView viewName="accounts_view" />
	</changeSet>

	<changeSet id="128" author="murthy">
		<dropTable tableName="ACCOUNTS_TEMP" />
	</changeSet>

	<changeSet id="129" author="Manoj.p">
		<sql>
			<![CDATA[
			DELETE FROM SMTPARAMETERS where SYSPARMCODE = 'CUST_PAN_VALIDATION';
			INSERT INTO SMTPARAMETERS VALUES ('CUST_PAN_VALIDATION', 'Cust
			Panvalidation Required or Not(Y, N)', 'String', 1, 'N', 1, 0, NULL,
			NULL,'CRM Required or Not', 1, 1000, CURRENT_TIMESTAMP,'Approved',
			NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="130_pre" author="Manoj.P" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_save_and_drop_dependencies ('plf', 'fintypevasproducts');
					select deps_save_and_drop_dependencies ('plf', 'fintypevasproducts_temp');
			]]>
		</sql>
	</changeSet>

	<changeSet id="130" author="Manoj.P">
		<modifyDataType tableName="fintypevasproducts" columnName="mandatory" newDataType="smallint" />
		<modifyDataType tableName="fintypevasproducts_temp" columnName="mandatory" newDataType="smallint" />
	</changeSet>

	<changeSet id="130_post" author="Manoj.P" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_restore_dependencies ('plf', 'fintypevasproducts');
					select deps_restore_dependencies ('plf', 'fintypevasproducts_temp');
			]]>
		</sql>
	</changeSet>

	<changeSet id="131" author="Sai priya">
		<sql>
		<![CDATA[
	      update rbfielddetails set rbfldtype='nvarchar' where rbfldname ='eligibilityMethod';
		 ]]>
		</sql>
	</changeSet>

	<changeSet id="132" author="murthy" dbms="postgresql">
		<sql>
		<![CDATA[
	        delete from deps_saved_ddl;
		 ]]>
		</sql>
	</changeSet>


	<changeSet id="133_pre" author="murthy" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_save_and_drop_dependencies ('plf', 'bmtsubsectors');
			]]>
		</sql>
	</changeSet>

	<changeSet id="133" author="murthy">
		<modifyDataType tableName="BMTSUBSECTORS" columnName="SubSectorDesc" newDataType="varchar(100)" />
	</changeSet>

	<changeSet id="133_post" author="Manoj.P" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_restore_dependencies ('plf', 'bmtsubsectors');
			]]>
		</sql>
	</changeSet>

	<changeSet id="134" author="Kesav">
		<sql>
			<![CDATA[
				Update SMTParameters set SysParmValue = '10,20,30', SysParmType ='String' where SysParmCode = 'BANKINFO_DAYS';
			]]>
		</sql>
	</changeSet>

	<changeSet id="135_pre" author="Kesav" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_save_and_drop_dependencies ('plf', 'extendedfieldheader_temp');
					select deps_save_and_drop_dependencies ('plf', 'extendedfieldheader');
			]]>
		</sql>
	</changeSet>

	<changeSet author="Kesav" id="135">
		<comment>data type modified from varchar(10) to varchar(20)</comment>
		<modifyDataType tableName="ExtendedFieldHeader_Temp" columnName="ModuleName" newDataType="varchar(20)" />
	</changeSet>

	<changeSet author="Kesav" id="136">
		<comment>data type modified from varchar(10) to varchar(20)</comment>
		<modifyDataType tableName="ExtendedFieldHeader" columnName="ModuleName" newDataType="varchar(20)" />
	</changeSet>

	<changeSet id="135_post" author="Kesav" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_restore_dependencies ('plf', 'extendedfieldheader_temp');
					select deps_restore_dependencies ('plf', 'extendedfieldheader');
			]]>
		</sql>
	</changeSet>

	<changeSet author="Varaprasad.K" id="137.1">
		<sql>

			UPDATE SeqWorkFlowDetails SET SEQNO= (SELECT MAX(WorkflowId)+1
			FROM workflowdetails);
			UPDATE WorkFlowDetails SET
			WorkFlowActive= 0
			where WorkFlowType='RECEIPTUPLOAD';

		</sql>
		<insert tableName="WorkFlowDetails">
			<column name="WorkFlowId" valueComputed="(select max(WorkFlowId) + 1 from WorkFlowDetails)" />
			<column name="WorkFlowType">RECEIPTUPLOAD</column>
			<column name="WorkFlowSubType">Receipt Upload</column>
			<column name="WorkFlowDesc">Receipt Upload</column>
			<column name="JsonDesign" type="nclob"><![CDATA[NULL]]></column>
			<column name="SvgDesign" type="nclob"><![CDATA[NULL]]></column>
			<column name="WorkFlowXml" type="clob"><![CDATA[NULL]]></column>
			<column name="WorkFlowRoles">RECEIPTUPLOAD_MAKER;RECEIPTUPLOAD_APPROVER
			</column>
			<column name="FirstTaskOwner">RECEIPTUPLOAD_MAKER</column>
			<column name="WorkFlowActive">1</column>
			<column name="Version">0</column>
			<column name="LastMntBy">1000</column>
			<column name="LastMntOn" valueDate="current_timestamp" />
			<column name="RecordStatus">Null</column>
			<column name="RoleCode">Null</column>
			<column name="NextRoleCode">Null</column>
			<column name="TaskId">Null</column>
			<column name="NextTaskId">Null</column>
			<column name="RecordType">NULL</column>
		</insert>
	</changeSet>

	<changeSet id="138.1" author="Varaprasad.K">
		<update tableName="WORKFLOWDETAILS">
			<column name="JSONDESIGN" type="NCLOB"><![CDATA[{"resourceId":"canvas","properties":{"process_id":"RECEIPTUPLOAD","name":"Receipt Upload","documentation":"Receipt Upload","category":"","listenerclass":"","listenerentitytype":""},"stencil":{"id":"BPMNDiagram"},"childShapes":[{"resourceId":"startEvent1","properties":{"overrideid":"","name":"Start"},"stencil":{"id":"StartNoneEvent"},"childShapes":[],"outgoing":[{"resourceId":"sid-389A8CE0-888D-4B00-920C-69E34A7C0661"}],"bounds":{"lowerRight":{"x":120,"y":180},"upperLeft":{"x":90,"y":150}},"dockers":[]},{"resourceId":"sid-64DF32BA-44C7-4549-BADB-E1F4DA259B38","properties":{"overrideid":"","name":"Maker","usertaskassignment":{"assignment":{"type":"idm","idm":{"type":"user","assignee":{"email":"RECEIPTUPLOAD_MAKER","firstName":"RECEIPTUPLOAD_MAKER","fullName":"RECEIPTUPLOAD_MAKER","id":"RECEIPTUPLOAD_MAKER","roledesc":"RECEIPTUPLOAD_MAKER","$$hashKey":"object:2569"}}}},"additionalforms":"","formkeydefinition":"","allowrevert":"","prioritydefinition":"Role Queue","baseactor":"","duedatedefinition":"","multiinstance_type":"None","isforcompensation":"false"},"stencil":{"id":"UserTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-801C6882-8F81-4ED2-93C0-7A01911559A3"}],"bounds":{"lowerRight":{"x":282.34375,"y":205},"upperLeft":{"x":182.34375,"y":125}},"dockers":[]},{"resourceId":"sid-389A8CE0-888D-4B00-920C-69E34A7C0661","properties":{"overrideid":"","name":"","repruseaction":"false","conditionsequenceflow":"","defaultflow":"false","action":"","state":"","mandatenotes":"false","capturereasons":"false","typeofreason":"","constraint":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-64DF32BA-44C7-4549-BADB-E1F4DA259B38"}],"bounds":{"lowerRight":{"x":181.60009765625,"y":165},"upperLeft":{"x":120.923095703125,"y":165}},"dockers":[{"x":15,"y":15},{"x":50,"y":40}],"target":{"resourceId":"sid-64DF32BA-44C7-4549-BADB-E1F4DA259B38"}},{"resourceId":"sid-21CBDDAF-AAD8-4B7D-849C-693E3538F277","properties":{"overrideid":"","name":"Author","usertaskassignment":{"assignment":{"type":"idm","idm":{"type":"user","assignee":{"email":"RECEIPTUPLOAD_APPROVER","firstName":"RECEIPTUPLOAD_APPROVER","fullName":"RECEIPTUPLOAD_APPROVER","id":"RECEIPTUPLOAD_APPROVER","roledesc":"Receipt Upload Approver","$$hashKey":"object:5001"}}}},"additionalforms":"","formkeydefinition":"","allowrevert":"","prioritydefinition":"Role Queue","baseactor":"","duedatedefinition":"","multiinstance_type":"None","isforcompensation":"false"},"stencil":{"id":"UserTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-3E9F7C6D-BABA-4547-B63B-DDFD425FB640"}],"bounds":{"lowerRight":{"x":636.34375,"y":205},"upperLeft":{"x":536.34375,"y":125}},"dockers":[]},{"resourceId":"sid-D6A6605D-79A3-4AF4-87AF-7B1520094211","properties":{"overrideid":"","name":"","sequencefloworder":""},"stencil":{"id":"ExclusiveGateway"},"childShapes":[],"outgoing":[{"resourceId":"sid-AC222929-D459-4D8F-BA05-D961DA14FC32"},{"resourceId":"sid-11AE199B-F50B-493C-86CF-FB3130890950"},{"resourceId":"sid-B0C34E28-1BC6-410D-9E16-1D201079A426"}],"bounds":{"lowerRight":{"x":776.34375,"y":185},"upperLeft":{"x":736.34375,"y":145}},"dockers":[]},{"resourceId":"sid-3E9F7C6D-BABA-4547-B63B-DDFD425FB640","properties":{"overrideid":"","name":"","repruseaction":"false","conditionsequenceflow":"","defaultflow":"false","action":"","state":"","mandatenotes":"false","capturereasons":"false","typeofreason":"","constraint":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-D6A6605D-79A3-4AF4-87AF-7B1520094211"}],"bounds":{"lowerRight":{"x":735.8632855499009,"y":165.43847371129004},"upperLeft":{"x":636.6289019500991,"y":165.14746378870996}},"dockers":[{"x":50,"y":40},{"x":20.5,"y":20.5}],"target":{"resourceId":"sid-D6A6605D-79A3-4AF4-87AF-7B1520094211"}},{"resourceId":"sid-801C6882-8F81-4ED2-93C0-7A01911559A3","properties":{"overrideid":"","name":"Submit","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Submitted'"}},"defaultflow":"false","action":"Submit","state":"Submitted","mandatenotes":"false","capturereasons":"false","typeofreason":"","constraint":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-21CBDDAF-AAD8-4B7D-849C-693E3538F277"}],"bounds":{"lowerRight":{"x":535.5625,"y":165},"upperLeft":{"x":283.125,"y":165}},"dockers":[{"x":50,"y":40},{"x":50,"y":40}],"target":{"resourceId":"sid-21CBDDAF-AAD8-4B7D-849C-693E3538F277"}},{"resourceId":"sid-AC222929-D459-4D8F-BA05-D961DA14FC32","properties":{"overrideid":"","name":"Resubmit","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Resubmitted'"}},"defaultflow":"false","action":"Resubmit","state":"Resubmitted","mandatenotes":"false","capturereasons":"false","typeofreason":"","constraint":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-64DF32BA-44C7-4549-BADB-E1F4DA259B38"}],"bounds":{"lowerRight":{"x":756.84375,"y":144.482421875},"upperLeft":{"x":232.34375,"y":27}},"dockers":[{"x":20.5,"y":20.5},{"x":756.84375,"y":27},{"x":232.34375,"y":27},{"x":50,"y":40}],"target":{"resourceId":"sid-64DF32BA-44C7-4549-BADB-E1F4DA259B38"}},{"resourceId":"sid-DDD249AA-E185-4DB7-BA7D-36BA1F8B00C9","properties":{"overrideid":"","name":"Approve","rerunnable":true,"servicetaskexpression":"doApprove","isforcompensation":"false","multiinstance_type":"None","parameters":""},"stencil":{"id":"approveTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-9DB49125-804C-45EB-A3CD-C88FAC84A6E1"}],"bounds":{"lowerRight":{"x":955,"y":200},"upperLeft":{"x":855,"y":120}},"dockers":[]},{"resourceId":"sid-11AE199B-F50B-493C-86CF-FB3130890950","properties":{"overrideid":"","name":"Approve","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Approved'"}},"defaultflow":"false","action":"Approve","state":"Approved","mandatenotes":"false","capturereasons":"false","typeofreason":"","constraint":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-DDD249AA-E185-4DB7-BA7D-36BA1F8B00C9"}],"bounds":{"lowerRight":{"x":854.2294481116865,"y":164.7754025836125},"upperLeft":{"x":776.3625929039385,"y":161.8847536663875}},"dockers":[{"x":20.5,"y":20.5},{"x":50,"y":40}],"target":{"resourceId":"sid-DDD249AA-E185-4DB7-BA7D-36BA1F8B00C9"}},{"resourceId":"sid-797F644F-7D8B-42C2-833B-80827AAAC7E8","properties":{"overrideid":"","name":"Approved"},"stencil":{"id":"EndNoneEvent"},"childShapes":[],"outgoing":[],"bounds":{"lowerRight":{"x":1058.34375,"y":174},"upperLeft":{"x":1030.34375,"y":146}},"dockers":[]},{"resourceId":"sid-9DB49125-804C-45EB-A3CD-C88FAC84A6E1","properties":{"overrideid":"","name":"","repruseaction":"false","conditionsequenceflow":"","defaultflow":"false","action":"","state":"","mandatenotes":"false","capturereasons":"false","typeofreason":"","constraint":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-797F644F-7D8B-42C2-833B-80827AAAC7E8"}],"bounds":{"lowerRight":{"x":1030.2802734375,"y":160},"upperLeft":{"x":955.5323486328125,"y":160}},"dockers":[{"x":50,"y":40},{"x":14,"y":14}],"target":{"resourceId":"sid-797F644F-7D8B-42C2-833B-80827AAAC7E8"}},{"resourceId":"sid-A841C3F5-F0CD-4D94-8670-47E344328594","properties":{"overrideid":"","name":"Cancel Process","rerunnable":true,"servicetaskexpression":"doReject","isforcompensation":"false","multiinstance_type":"None","parameters":""},"stencil":{"id":"rejectTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-F55455F9-B71E-4D16-A9DC-BFACF6DF910D"}],"bounds":{"lowerRight":{"x":803.34375,"y":359},"upperLeft":{"x":703.34375,"y":279}},"dockers":[]},{"resourceId":"sid-B0C34E28-1BC6-410D-9E16-1D201079A426","properties":{"overrideid":"","name":"Reject","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Rejected'"}},"defaultflow":"false","action":"Reject","state":"Rejected","mandatenotes":"false","capturereasons":"false","typeofreason":"","constraint":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-A841C3F5-F0CD-4D94-8670-47E344328594"}],"bounds":{"lowerRight":{"x":756.3971264969502,"y":278.4260410983908},"upperLeft":{"x":754.2688891280498,"y":185.0876307766092}},"dockers":[{"x":20.5,"y":20.5},{"x":50,"y":40}],"target":{"resourceId":"sid-A841C3F5-F0CD-4D94-8670-47E344328594"}},{"resourceId":"sid-88D42B2F-F2F4-4C8C-B5D9-717384758F2E","properties":{"overrideid":"","name":"Approved"},"stencil":{"id":"EndNoneEvent"},"childShapes":[],"outgoing":[],"bounds":{"lowerRight":{"x":908.34375,"y":333},"upperLeft":{"x":880.34375,"y":305}},"dockers":[]},{"resourceId":"sid-F55455F9-B71E-4D16-A9DC-BFACF6DF910D","properties":{"overrideid":"","name":"","repruseaction":"false","conditionsequenceflow":"","defaultflow":"false","action":"","state":"","mandatenotes":"false","capturereasons":"false","typeofreason":"","constraint":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-88D42B2F-F2F4-4C8C-B5D9-717384758F2E"}],"bounds":{"lowerRight":{"x":880.125,"y":319},"upperLeft":{"x":803.9140625,"y":319}},"dockers":[{"x":50,"y":40},{"x":14,"y":14}],"target":{"resourceId":"sid-88D42B2F-F2F4-4C8C-B5D9-717384758F2E"}}],"bounds":{"lowerRight":{"x":1200,"y":1050},"upperLeft":{"x":0,"y":0}},"stencilset":{"url":"stencilsets/bpmn2.0/bpmn2.0.json","namespace":"http://b3mn.org/stencilset/bpmn2.0#"},"ssextensions":[]}]]></column>
			<column name="WORKFLOWXML" type="CLOB"><![CDATA[<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:activiti="http://activiti.org/bpmn" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI" typeLanguage="http://www.w3.org/2001/XMLSchema" expressionLanguage="http://www.w3.org/1999/XPath" targetNamespace="http://activiti.org/test">
  <process id="RECEIPTUPLOAD" name="Receipt Upload" isExecutable="true">
    <documentation>Receipt Upload</documentation>
    <startEvent id="startEvent1" name="Start"/>
    <userTask id="sid-64DF32BA-44C7-4549-BADB-E1F4DA259B38" name="Maker" activiti:actor="RECEIPTUPLOAD_MAKER" activiti:assignmentLevel="Role Queue"/>
    <sequenceFlow id="sid-389A8CE0-888D-4B00-920C-69E34A7C0661" sourceRef="startEvent1" targetRef="sid-64DF32BA-44C7-4549-BADB-E1F4DA259B38" representsUserAction="false" mandateNotes="false" captureReasons="false"/>
    <userTask id="sid-21CBDDAF-AAD8-4B7D-849C-693E3538F277" name="Author" activiti:actor="RECEIPTUPLOAD_APPROVER" activiti:assignmentLevel="Role Queue"/>
    <exclusiveGateway id="sid-D6A6605D-79A3-4AF4-87AF-7B1520094211"/>
    <sequenceFlow id="sid-3E9F7C6D-BABA-4547-B63B-DDFD425FB640" sourceRef="sid-21CBDDAF-AAD8-4B7D-849C-693E3538F277" targetRef="sid-D6A6605D-79A3-4AF4-87AF-7B1520094211" representsUserAction="false" mandateNotes="false" captureReasons="false"/>
    <sequenceFlow id="sid-801C6882-8F81-4ED2-93C0-7A01911559A3" name="Submit" sourceRef="sid-64DF32BA-44C7-4549-BADB-E1F4DA259B38" targetRef="sid-21CBDDAF-AAD8-4B7D-849C-693E3538F277" action="Submit" state="Submitted" representsUserAction="true" mandateNotes="false" captureReasons="false">
      <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Submitted'</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-AC222929-D459-4D8F-BA05-D961DA14FC32" name="Resubmit" sourceRef="sid-D6A6605D-79A3-4AF4-87AF-7B1520094211" targetRef="sid-64DF32BA-44C7-4549-BADB-E1F4DA259B38" action="Resubmit" state="Resubmitted" representsUserAction="true" mandateNotes="false" captureReasons="false">
      <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Resubmitted'</conditionExpression>
    </sequenceFlow>
    <serviceTask id="sid-DDD249AA-E185-4DB7-BA7D-36BA1F8B00C9" name="Approve" activiti:operation="doApprove" activiti:rerunnable="true"/>
    <sequenceFlow id="sid-11AE199B-F50B-493C-86CF-FB3130890950" name="Approve" sourceRef="sid-D6A6605D-79A3-4AF4-87AF-7B1520094211" targetRef="sid-DDD249AA-E185-4DB7-BA7D-36BA1F8B00C9" action="Approve" state="Approved" representsUserAction="true" mandateNotes="false" captureReasons="false">
      <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Approved'</conditionExpression>
    </sequenceFlow>
    <endEvent id="sid-797F644F-7D8B-42C2-833B-80827AAAC7E8" name="Approved"/>
    <sequenceFlow id="sid-9DB49125-804C-45EB-A3CD-C88FAC84A6E1" sourceRef="sid-DDD249AA-E185-4DB7-BA7D-36BA1F8B00C9" targetRef="sid-797F644F-7D8B-42C2-833B-80827AAAC7E8" representsUserAction="false" mandateNotes="false" captureReasons="false"/>
    <serviceTask id="sid-A841C3F5-F0CD-4D94-8670-47E344328594" name="Cancel Process" activiti:operation="doReject" activiti:rerunnable="true"/>
    <sequenceFlow id="sid-B0C34E28-1BC6-410D-9E16-1D201079A426" name="Reject" sourceRef="sid-D6A6605D-79A3-4AF4-87AF-7B1520094211" targetRef="sid-A841C3F5-F0CD-4D94-8670-47E344328594" action="Reject" state="Rejected" representsUserAction="true" mandateNotes="false" captureReasons="false">
      <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Rejected'</conditionExpression>
    </sequenceFlow>
    <endEvent id="sid-88D42B2F-F2F4-4C8C-B5D9-717384758F2E" name="Approved"/>
    <sequenceFlow id="sid-F55455F9-B71E-4D16-A9DC-BFACF6DF910D" sourceRef="sid-A841C3F5-F0CD-4D94-8670-47E344328594" targetRef="sid-88D42B2F-F2F4-4C8C-B5D9-717384758F2E" representsUserAction="false" mandateNotes="false" captureReasons="false"/>
  </process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_RECEIPTUPLOAD">
    <bpmndi:BPMNPlane bpmnElement="RECEIPTUPLOAD" id="BPMNPlane_RECEIPTUPLOAD">
      <bpmndi:BPMNShape bpmnElement="startEvent1" id="BPMNShape_startEvent1">
        <omgdc:Bounds height="30.0" width="30.0" x="90.0" y="150.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-64DF32BA-44C7-4549-BADB-E1F4DA259B38" id="BPMNShape_sid-64DF32BA-44C7-4549-BADB-E1F4DA259B38">
        <omgdc:Bounds height="80.0" width="100.0" x="182.34375" y="125.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-21CBDDAF-AAD8-4B7D-849C-693E3538F277" id="BPMNShape_sid-21CBDDAF-AAD8-4B7D-849C-693E3538F277">
        <omgdc:Bounds height="80.0" width="100.0" x="536.34375" y="125.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-D6A6605D-79A3-4AF4-87AF-7B1520094211" id="BPMNShape_sid-D6A6605D-79A3-4AF4-87AF-7B1520094211">
        <omgdc:Bounds height="40.0" width="40.0" x="736.34375" y="145.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-DDD249AA-E185-4DB7-BA7D-36BA1F8B00C9" id="BPMNShape_sid-DDD249AA-E185-4DB7-BA7D-36BA1F8B00C9">
        <omgdc:Bounds height="80.0" width="100.0" x="855.0" y="120.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-797F644F-7D8B-42C2-833B-80827AAAC7E8" id="BPMNShape_sid-797F644F-7D8B-42C2-833B-80827AAAC7E8">
        <omgdc:Bounds height="28.0" width="28.0" x="1030.34375" y="146.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-A841C3F5-F0CD-4D94-8670-47E344328594" id="BPMNShape_sid-A841C3F5-F0CD-4D94-8670-47E344328594">
        <omgdc:Bounds height="80.0" width="100.0" x="703.34375" y="279.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-88D42B2F-F2F4-4C8C-B5D9-717384758F2E" id="BPMNShape_sid-88D42B2F-F2F4-4C8C-B5D9-717384758F2E">
        <omgdc:Bounds height="28.0" width="28.0" x="880.34375" y="305.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge bpmnElement="sid-F55455F9-B71E-4D16-A9DC-BFACF6DF910D" id="BPMNEdge_sid-F55455F9-B71E-4D16-A9DC-BFACF6DF910D">
        <omgdi:waypoint x="803.34375" y="319.0"/>
        <omgdi:waypoint x="880.34375" y="319.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-389A8CE0-888D-4B00-920C-69E34A7C0661" id="BPMNEdge_sid-389A8CE0-888D-4B00-920C-69E34A7C0661">
        <omgdi:waypoint x="120.0" y="165.0"/>
        <omgdi:waypoint x="182.34375" y="165.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-9DB49125-804C-45EB-A3CD-C88FAC84A6E1" id="BPMNEdge_sid-9DB49125-804C-45EB-A3CD-C88FAC84A6E1">
        <omgdi:waypoint x="955.0" y="160.0"/>
        <omgdi:waypoint x="1030.34375" y="160.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-AC222929-D459-4D8F-BA05-D961DA14FC32" id="BPMNEdge_sid-AC222929-D459-4D8F-BA05-D961DA14FC32">
        <omgdi:waypoint x="756.84375" y="145.5"/>
        <omgdi:waypoint x="756.84375" y="27.0"/>
        <omgdi:waypoint x="232.34375" y="27.0"/>
        <omgdi:waypoint x="232.34375" y="125.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-11AE199B-F50B-493C-86CF-FB3130890950" id="BPMNEdge_sid-11AE199B-F50B-493C-86CF-FB3130890950">
        <omgdi:waypoint x="776.1278663310962" y="164.7841163310962"/>
        <omgdi:waypoint x="855.0" y="161.85614849187937"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-B0C34E28-1BC6-410D-9E16-1D201079A426" id="BPMNEdge_sid-B0C34E28-1BC6-410D-9E16-1D201079A426">
        <omgdi:waypoint x="756.4004166666666" y="184.94333333333333"/>
        <omgdi:waypoint x="754.2558021172638" y="279.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-801C6882-8F81-4ED2-93C0-7A01911559A3" id="BPMNEdge_sid-801C6882-8F81-4ED2-93C0-7A01911559A3">
        <omgdi:waypoint x="282.34375" y="165.0"/>
        <omgdi:waypoint x="536.34375" y="165.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-3E9F7C6D-BABA-4547-B63B-DDFD425FB640" id="BPMNEdge_sid-3E9F7C6D-BABA-4547-B63B-DDFD425FB640">
        <omgdi:waypoint x="636.34375" y="165.1466275659824"/>
        <omgdi:waypoint x="736.7849264705883" y="165.44117647058823"/>
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</definitions>]]></column>
			<where>workflowtype='RECEIPTUPLOAD' and workflowactive=1
			</where>
		</update>
	</changeSet>

	<changeSet id="139" author="SaiPriya">
		<sql>
			<![CDATA[
				INSERT INTO SECROLES SELECT (SELECT MAX(ROLEID)+1 FROM SECROLES),1, 'REINSTATELOAN_MAKER', 'Reinstate Maker','FINANCE', 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0 FROM SEQSECROLES WHERE 0=0;
				INSERT INTO SECROLES SELECT (SELECT MAX(ROLEID)+1 FROM SECROLES),1, 'REINSTATELOAN_APPROVER', 'Reinstate Approver','', 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0 FROM SEQSECROLES WHERE 0=0;		
			]]>
		</sql>
	</changeSet>

	<changeSet id="140.1" author="VaraPrasad.K">
		<sql>
            <![CDATA[
                delete from REPORTFILTERFIELDS where reportid=(select reportid from REPORTCONFIGURATION where MENUITEMCODE = 'menu_Item_putcallreport');
				delete from REPORTFILTERFIELDS where reportid=(select reportid from REPORTCONFIGURATION where MENUITEMCODE = 'menu_Item_CovenantRegisterReport');
				delete from REPORTFILTERFIELDS where reportid=(select reportid from REPORTCONFIGURATION where MENUITEMCODE = 'menu_Item_CollateralRegister');

            	delete from REPORTCONFIGURATION where MENUITEMCODE = 'menu_Item_putcallreport';
				delete from REPORTCONFIGURATION where MENUITEMCODE = 'menu_Item_CovenantRegisterReport';
				delete from REPORTCONFIGURATION where MENUITEMCODE = 'menu_Item_CollateralRegister';
				
				
            	Insert into REPORTCONFIGURATION values ((select max(reportid)+1 from REPORTCONFIGURATION),'Excel:Put/Call Report','Put/Call Report',1,'PutCall','dataSource',1,'menu_Item_putcallreport',1,1000,null,null,null,null,null,null,0,current_timestamp,0,1,0);
				Insert into REPORTFILTERFIELDS values ((select reportid from REPORTCONFIGURATION where menuitemcode='menu_Item_putcallreport'),1,'Loan Reference','LOVSEARCH','Loan Reference','fm.FinReference',null,'FinanceMain','getFinReference','getFinReference',0,0,0,0,1,1,' ',' ',' ',' ',250,0,'=',1,1000,'Approved',null,null,null,null,null,0,current_timestamp,null);
				Insert into REPORTCONFIGURATION values ((select max(reportid)+1 from REPORTCONFIGURATION),'Excel:Covenant Register Report','Covenant Register Report',1,'CovenantRegisterReportl','dataSource',1,'menu_Item_CovenantRegisterReport',1,1000,null,null,null,null,null,null,0,current_timestamp,0,1,0);
				Insert into REPORTFILTERFIELDS values ((select reportid from REPORTCONFIGURATION where menuitemcode='menu_Item_CovenantRegisterReport'),1,'Loan Reference','LOVSEARCH','Loan Reference','fm.FinReference',null,'FinanceMain','getFinReference','getFinReference',0,0,0,0,1,1,' ',' ',' ',' ',250,0,'=',1,1000,'Approved',null,null,null,null,null,0,current_timestamp,null);
				Insert into REPORTCONFIGURATION values ((select max(reportid)+1 from REPORTCONFIGURATION),'Excel:Collateral Register Report','Collateral Register Report',1,'CollateralRegister','dataSource',1,'menu_Item_CollateralRegister',1,1000,null,null,null,null,null,null,0,current_timestamp,0,1,0);
				Insert into REPORTFILTERFIELDS values ((select reportid from REPORTCONFIGURATION where menuitemcode='menu_Item_CollateralRegister'),1,'Loan Reference','LOVSEARCH','Loan Reference','fm.FinReference',null,'FinanceMain','getFinReference','getFinReference',0,0,0,0,1,1,' ',' ',' ',' ',250,0,'=',1,1000,'Approved',null,null,null,null,null,0,current_timestamp,null);
				
                Delete from secgrouprights where grpid = (select grpid from secgroups where grpcode='COVENANT_REGISTER_REPORT');
                Delete from secgrouprights where grpid = (select grpid from secgroups where grpcode='COLLATERAL_REGISTER_REPORT');
                
                Delete From SecRights Where RightName = 'menu_Item_CovenantRegisterReport';
                Delete From SecRights Where RightName = 'menu_Item_CollateralRegisterReport';
                delete from SecRoleGroups where GrpID=(select grpid from secgroups where grpcode = 'COVENANT_REGISTER_REPORT');
				
                Delete from secgroups where grpcode = 'COVENANT_REGISTER_REPORT';
                Delete from secgroups where grpcode = 'COLLATERAL_REGISTER_REPORT';

                update seqsecgroups set seqno=(select max(grpid) from secgroups_view);
                insert into secgroups values((select max(grpid)+1 from secgroups),'COVENANT_REGISTER_REPORT','Convenant Register Report',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
                insert into secgroups values((select max(grpid)+1 from secgroups),'COLLATERAL_REGISTER_REPORT','Collateral Register Report',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
                update seqsecgroups set seqno=(select max(grpid) from secgroups_view);

                update seqsecrights set seqno=(select max(rightid)+1 from secrights_view);
                INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_CovenantRegisterReport','MENU',0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0 FROM SEQSECRIGHTS WHERE 0=0;
                INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_CollateralRegisterReport','MENU',0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0 FROM SEQSECRIGHTS WHERE 0=0;
                update seqsecrights set seqno=(select max(rightid)+1 from secrights_view);

                INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='COVENANT_REGISTER_REPORT') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='menu_Item_CovenantRegisterReport'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
                INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='COLLATERAL_REGISTER_REPORT') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='menu_Item_CollateralRegisterReport'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
                
                update reportconfiguration set wherecondition=1 where menuitemcode='menu_Item_DailyPastdue';
				update reportfilterfields set fielddbname='T5.FinDivision' where reportid in  (select reportid from reportconfiguration where menuitemcode='menu_Item_DailyPastdue') and fieldid=1;
		 	]]>
		</sql>
	</changeSet>

	<changeSet id="142" author="VaraPrasad.K">
		<sql>
            <![CDATA[
            	update REPORTCONFIGURATION set REPORTJASPERNAME = 'CovenantRegisterReport' where REPORTJASPERNAME = 'CovenantRegisterReportl';
            	update REPORTCONFIGURATION set MENUITEMCODE = 'menu_Item_CollateralRegisterReport' where MENUITEMCODE = 'menu_Item_CollateralRegister';
				update REPORTFILTERFIELDS set fieldDBName = 'c.CustCIF' where reportId = (select ReportId from REPORTCONFIGURATION where MENUITEMCODE = 'menu_Item_CollateralRegisterReport');
				update REPORTCONFIGURATION set ReportHeading = 'Put Call Report', REPORTNAME = 'Excel:Put Call Report' where MENUITEMCODE = 'menu_Item_putcallreport'
            ]]>
		</sql>
	</changeSet>

	<changeSet id="143" author="vijaya.a">
		<sql>
            <![CDATA[
            	delete from data_engine_column where TableId in (select id from data_engine_table where ConfigId in (select id from data_engine_config where name in ('GL_VOCHER_DOWNLOAD_TALLY')));
				delete from data_engine_table where ConfigId in (select id from data_engine_config where name in ('GL_VOCHER_DOWNLOAD_TALLY'));
				delete from data_engine_config  where name in ('GL_VOCHER_DOWNLOAD_TALLY');
				
				INSERT INTO data_engine_config (id, name, description, parser, worksheet, textqualifier, rowdelimiter, columndelimiter, startingrow, skipheaderrow, fieldnames, header, trailer, uploadlocation, uploadpath, fileprefixname, fileextension, filesequenceno, lastprocessedon, filenameformat, cronexpression, notificationstatusemail, postevent, backupfile, active) 
				VALUES ((select max(id) + 1 from data_engine_config), 'GL_VOCHER_DOWNLOAD_TALLY', 'VOUCHER_UPLOAD', 3 , 'VOUCHER_UPLOAD', NULL, NULL, NULL, 0, 0, NULL , 'Voucher Number, Voucher Date,  Voucher Value Date, Voucher Type, GL Code, GL Description, DrCr Flag, Amount, Narration', NULL, 'A', 'C:/Pennant/PFF/DailyDownload/GLVochers' , 'GL_VOUCHERS_', '.xlsx', 1, NULL, '${VOCHER_DATE}', NULL, '0', NULL, 1, 1);
				
				INSERT INTO data_engine_table (id, configid, name, operation, keyfields, filter, statusupdate, skiprows, identifier, description, startindex, endindex, recordlength, multirow, headertable) 
				VALUES ((select max(id) + 1 from data_engine_table), (select id from data_engine_config where name = 'GL_VOCHER_DOWNLOAD_TALLY'), 'GL_VOCHERS_VIEW', 0, 'ID', 'POSTDATE = :POSTDATE', NULL, NULL, NULL, NULL, NULL, NULL, 0, 0, 0);
				
				INSERT INTO data_engine_column (id, tableid, name, skip, seqtype, seqobject, defaultvalue, derivedfrom, referencecolumn, startindex, endindex, ruleforvalue, queryforvalue, format, constrainttype) VALUES ((select max(id) + 1 from data_engine_column), (select id from data_engine_table where configId = (select id from data_engine_config where name = 'GL_VOCHER_DOWNLOAD_TALLY')), 'LINKEDTRANID', 	 	 0, 'N', NULL, NULL, NULL, NULL, '0', NULL, NULL, NULL, 'NUMBER:', 				'O');
				INSERT INTO data_engine_column (id, tableid, name, skip, seqtype, seqobject, defaultvalue, derivedfrom, referencecolumn, startindex, endindex, ruleforvalue, queryforvalue, format, constrainttype) VALUES ((select max(id) + 1 from data_engine_column), (select id from data_engine_table where configId = (select id from data_engine_config where name = 'GL_VOCHER_DOWNLOAD_TALLY')), 'POSTDATE', 		 	 0, 'N', NULL, NULL, NULL, NULL, '0', NULL, NULL, NULL, 'DATE:dd.MM.yyyy', 		'O');
				INSERT INTO data_engine_column (id, tableid, name, skip, seqtype, seqobject, defaultvalue, derivedfrom, referencecolumn, startindex, endindex, ruleforvalue, queryforvalue, format, constrainttype) VALUES ((select max(id) + 1 from data_engine_column), (select id from data_engine_table where configId = (select id from data_engine_config where name = 'GL_VOCHER_DOWNLOAD_TALLY')), 'VALUEDATE', 		 0, 'N', NULL, NULL, NULL, NULL, '0', NULL, NULL, NULL, 'DATE:dd.MM.yyyy', 		'O');
				INSERT INTO data_engine_column (id, tableid, name, skip, seqtype, seqobject, defaultvalue, derivedfrom, referencecolumn, startindex, endindex, ruleforvalue, queryforvalue, format, constrainttype) VALUES ((select max(id) + 1 from data_engine_column), (select id from data_engine_table where configId = (select id from data_engine_config where name = 'GL_VOCHER_DOWNLOAD_TALLY')), 'GROUPDESCRIPTION', 	 0, 'N', NULL, NULL, NULL, NULL, '0', NULL, NULL, NULL, NULL, 					'O');
				INSERT INTO data_engine_column (id, tableid, name, skip, seqtype, seqobject, defaultvalue, derivedfrom, referencecolumn, startindex, endindex, ruleforvalue, queryforvalue, format, constrainttype) VALUES ((select max(id) + 1 from data_engine_column), (select id from data_engine_table where configId = (select id from data_engine_config where name = 'GL_VOCHER_DOWNLOAD_TALLY')), 'HOSTACCOUNT', 	 	 0, 'N', NULL, NULL, NULL, NULL, '0', NULL, NULL, NULL, NULL, 					'O');
				INSERT INTO data_engine_column (id, tableid, name, skip, seqtype, seqobject, defaultvalue, derivedfrom, referencecolumn, startindex, endindex, ruleforvalue, queryforvalue, format, constrainttype) VALUES ((select max(id) + 1 from data_engine_column), (select id from data_engine_table where configId = (select id from data_engine_config where name = 'GL_VOCHER_DOWNLOAD_TALLY')), 'TRANDESC', 		 	 0, 'N', NULL, NULL, NULL, NULL, '0', NULL, NULL, NULL, NULL, 					'O');
				INSERT INTO data_engine_column (id, tableid, name, skip, seqtype, seqobject, defaultvalue, derivedfrom, referencecolumn, startindex, endindex, ruleforvalue, queryforvalue, format, constrainttype) VALUES ((select max(id) + 1 from data_engine_column), (select id from data_engine_table where configId = (select id from data_engine_config where name = 'GL_VOCHER_DOWNLOAD_TALLY')), 'DRORCR', 	 		 0, 'N', NULL, NULL, NULL, NULL, '0', NULL, NULL, NULL, NULL, 					'O');
				INSERT INTO data_engine_column (id, tableid, name, skip, seqtype, seqobject, defaultvalue, derivedfrom, referencecolumn, startindex, endindex, ruleforvalue, queryforvalue, format, constrainttype) VALUES ((select max(id) + 1 from data_engine_column), (select id from data_engine_table where configId = (select id from data_engine_config where name = 'GL_VOCHER_DOWNLOAD_TALLY')), 'POSTAMOUNT', 	 	 0, 'N', NULL, NULL, NULL, NULL, '0', NULL, NULL, NULL, 'AMOUNT:###,###', 		'O');
				INSERT INTO data_engine_column (id, tableid, name, skip, seqtype, seqobject, defaultvalue, derivedfrom, referencecolumn, startindex, endindex, ruleforvalue, queryforvalue, format, constrainttype) VALUES ((select max(id) + 1 from data_engine_column), (select id from data_engine_table where configId = (select id from data_engine_config where name = 'GL_VOCHER_DOWNLOAD_TALLY')), 'NARRATION', 	 	 1, 'N', NULL, NULL, NULL, NULL, '0', NULL, NULL, NULL, NULL, 					'O');
				
				update seq_data_engine_config set SeqNo = (select max(id) from data_engine_config);
				update seq_data_engine_table set SeqNo = (select max(id) from data_engine_table);
            ]]>
		</sql>
	</changeSet>

	<changeSet id="144" author="vijaya.a">
		<sql>
            <![CDATA[
            	UPDATE SEQSECRIGHTS SET SEQNO = (SELECT MAX(RIGHTID) FROM SECRIGHTS_VIEW);
				UPDATE SEQSECGROUPS SET SEQNO = (SELECT MAX(GRPID)  FROM SECGROUPS_VIEW);
				UPDATE SEQSECROLES SET SEQNO = (SELECT MAX(ROLEID)  FROM SECROLES);
				UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS_VIEW);
				UPDATE SEQSECROLEGROUPS SET SEQNO = (SELECT MAX(ROLEGRPID) FROM SECROLEGROUPS_VIEW);
				
				DELETE FROM SECROLEGROUPS where GRPID in (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='GL_VOCHER_DOWNLOAD');
				DELETE FROM SECGROUPRIGHTS where GRPID in (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='GL_VOCHER_DOWNLOAD');
				DELETE FROM SECRIGHTS WHERE RightName='menu_Item_Vocher_Dowload';
				DELETE FROM SECGROUPS WHERE GRPCODE='GL_VOCHER_DOWNLOAD';
				DELETE FROM SECROLES WHERE RoleCd='GL_VOCHER_DOWNLOAD';

				INSERT INTO SECROLES SELECT (SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'GL_VOCHER_DOWNLOAD', 'General Ledger Daily Download Role', '', 0, 1000, CURRENT_TIMESTAMP,'', '', '', '', '', '', 0 FROM SEQSECROLES WHERE 0=0;
				INSERT INTO SECGROUPS SELECT (SELECT MAX(GRPID)+1 FROM SECGROUPS), 'GL_VOCHER_DOWNLOAD','General Ledger Daily Download Group', 0, 1000, CURRENT_TIMESTAMP, 'APPROVED', '', '', '', '', '', 0 FROM SEQSECGROUPS WHERE 0=0;
				INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_Vocher_Dowload','MENU',0, 1000, CURRENT_TIMESTAMP, '', '', '', '', '', '', 0 FROM SEQSECRIGHTS WHERE 0=0;
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='GL_VOCHER_DOWNLOAD') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='menu_Item_Vocher_Dowload'), 1, 0, 1000, CURRENT_TIMESTAMP, '', '', '', '', '', '', 0);
				INSERT INTO SECROLEGROUPS VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='GL_VOCHER_DOWNLOAD'),(SELECT ROLEID FROM SECROLES WHERE ROLECD='GL_VOCHER_DOWNLOAD'), 0, 1000, CURRENT_TIMESTAMP, 'APPROVED', '', '', '', '', '', 0);
				
				UPDATE SEQSECRIGHTS SET SEQNO = (SELECT MAX(RIGHTID) FROM SECRIGHTS_VIEW);
				UPDATE SEQSECGROUPS SET SEQNO = (SELECT MAX(GRPID)  FROM SECGROUPS_VIEW);
				UPDATE SEQSECROLES SET SEQNO = (SELECT MAX(ROLEID)  FROM SECROLES);
				UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS_VIEW);
				UPDATE SEQSECROLEGROUPS SET SEQNO = (SELECT MAX(ROLEGRPID) FROM SECROLEGROUPS_VIEW);
            ]]>
		</sql>
	</changeSet>

	<changeSet id="145" author="vijaya.a">
		<createView viewName="GL_VOCHERS_VIEW" replaceIfExists="true">
			select 
			LinkedTranId, 
			PostDate, 
			ValueDate, 
			DRORCR, 
			PostAmount/100 PostAmount, 
			am.Account, 
			HostAccount, 
			GroupCode, 
			GroupDescription, 
			TransOrder, 
			TranCode, 
			TranDesc
			from Postings p
			inner join AccountMapping am on am.account = p.account
			inner join RMTAccountTypes at on at.acType = am.accountType
			inner join AccountTypeGroup atg on atg.GroupId = at.acTypeGrpId
			where PostAmount != 0 
		</createView>
	</changeSet>

	<changeSet id="146" author="murthy.y">
		<sql>
            <![CDATA[
            	update REPORTFILTERFIELDS set MULTISELECTSEARCH=0 where reportid in (select reportid from reportconfiguration where menuitemcode='menu_Item_LoanwiseVoucherDetail') and fieldid=2;
				Insert into REPORTCONFIGURATION  values ((select max(reportid)+1 from REPORTCONFIGURATION),'Excel:Loan Wise Voucher Report','Excel:Loan Wise Voucher Report',1,'LoanwiseVoucherReportForAll','dataSource',1,'menu_Item_LoanwiseVoucherReport',2,1000, null, null, null, null, null, null, 0, current_timestamp, 0, 0, 0);
             ]]>
		</sql>
	</changeSet>

	<changeSet id="147" author="vijaya.a">
		<createTable tableName="MiscPostingUploads">
			<column name="UPLOADID" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="MISCPOSTINGID" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="BATCH" type="varchar(20)" />
			<column name="BRANCH" type="varchar(12)" />
			<column name="BATCHPURPOSE" type="varchar(20)" />
			<column name="POSTAGAINST" type="varchar(5)" />
			<column name="REFERENCE" type="varchar(20)" />
			<column name="POSTINGDIVISION" type="varchar(8)" />
			<column name="ACCOUNT" type="varchar(50)" />
			<column name="TXNENTRY" type="varchar(1)" />
			<column name="VALUEDATE" type="datetime" />
			<column name="TXNAMOUNT" type="decimal(18,2)" />
			<column name="NARRLINE1" type="varchar(100)" />
			<column name="NARRLINE2" type="varchar(100)" />
			<column name="NARRLINE3" type="varchar(100)" />
			<column name="NARRLINE4" type="varchar(100)" />
			<column name="UPLOADSTATUS" type="varchar(10)" />
			<column name="REASON" type="varchar(200)" />
			<column name="VERSION" type="int" />
			<column name="LASTMNTBY" type="bigint" />
			<column name="LASTMNTON" type="datetime" />
			<column name="RECORDSTATUS" type="varchar(50)" />
			<column name="ROLECODE" type="varchar(50)" />
			<column name="NEXTROLECODE" type="varchar(200)" />
			<column name="TASKID" type="varchar(50)" />
			<column name="NEXTTASKID" type="varchar(200)" />
			<column name="RECORDTYPE" type="varchar(50)" />
			<column name="WORKFLOWID" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet id="148" author="vijaya.a">
		<addPrimaryKey tableName="MiscPostingUploads" columnNames="MISCPOSTINGID" constraintName="PK_MISCPOSTINGUPLOADS" />
	</changeSet>

	<changeSet id="149" author="Rahul">
		<createView viewName="MISCPOSTINGUPLOADS_AVIEW">
    			SELECT 		
    				T1.UploadId, 
    				T1.MISCPOSTINGID, 
    				T2.FILENAME, 
    				T1.BATCH, 
    				T1.BRANCH, 
    				T1.BATCHPURPOSE, 
    				T1.POSTAGAINST, 
    				T1.REFERENCE, 
    				T1.POSTINGDIVISION, 
    				T1.ACCOUNT,
					T1.Version, 
					T1.LastMntBy, 
					T1.LastMntOn, 
					T1.RecordStatus, 
					T1.RoleCode, 
					T1.NextRoleCode, 
					T1.TaskId, 
					T1.NextTaskId, 
					T1.RecordType, 
					T1.WorkflowId,
					T1.TXNENTRY,
					T1.VALUEDATE,
					T1.TXNAMOUNT,
					T1.NARRLINE1,
					T1.NARRLINE2,
					T1.NARRLINE3,
					T1.NARRLINE4, 
					T1.UPLOADSTATUS, 
					T1.REASON
				FROM MISCPOSTINGUPLOADS T1 INNER JOIN 
			    UPLOADHEADER T2 ON T1.UploadId = T2.UploadId
    	</createView>
	</changeSet>

	<changeSet id="150" author="vijaya.a">
		<sql>
	    	<![CDATA[
	        	 INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, NEXTTASKID, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), '0', 'menuItem_MiscPostingUpload', 'MENU', '0', '1000', CURRENT_TIMESTAMP, 'Approved', ' ', '0');
			     INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, NEXTTASKID, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), '0', 'menuCat_BulkUploads', 'MENU', '0', '1000', CURRENT_TIMESTAMP, 'Approved', ' ', '0');
			     INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, NEXTTASKID, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), '2', 'button_UploadList_NewMiscPostingUpload', 'MiscPostingUploadDialog', '0', '1000', CURRENT_TIMESTAMP, 'Approved', ' ', '0');
			     INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, NEXTTASKID, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), '2', 'button_MiscPostingUploadDialog_btnBrowse', 'MiscPostingUploadDialog', '0', '1000', CURRENT_TIMESTAMP, 'Approved', ' ', '0');
			     INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, NEXTTASKID, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), '2', 'button_MiscPostingUploadDialog_btnNew', 'MiscPostingUploadDialog', '0', '1000', CURRENT_TIMESTAMP, 'Approved', ' ', '0');
			     INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, NEXTTASKID, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), '2', 'button_MiscPostingUploadDialog_btnEdit', 'MiscPostingUploadDialog', '0', '1000', CURRENT_TIMESTAMP, 'Approved', ' ', '0');
			     INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, NEXTTASKID, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), '2', 'button_MiscPostingUploadDialog_btnDelete', 'MiscPostingUploadDialog', '0', '1000', CURRENT_TIMESTAMP, 'Approved', ' ', '0');
			     INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, NEXTTASKID, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), '2', 'button_MiscPostingUploadDialog_btnSave', 'MiscPostingUploadDialog', '0', '1000', CURRENT_TIMESTAMP, 'Approved', ' ', '0');
					
				 INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, NEXTTASKID, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), '0', 'menuItem_MiscPostingUploadApproval', 'MENU', '0', '1000', CURRENT_TIMESTAMP, 'Approved', ' ', '0');
				
				 INSERT INTO SECGROUPS VALUES ((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'MISCPOSTINGUPLOAD_MAKER', 'WF Maker Group',  1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
			     INSERT INTO SECGROUPS VALUES ((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'MISCPOSTINGUPLOAD_APPROVER', 'WF Maker Group',  1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
			     INSERT INTO SECGROUPRIGHTS VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),(SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'MISCPOSTINGUPLOAD_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menuItem_MiscPostingUpload'), 1, 1, 1000, CURRENT_TIMESTAMP, '', '', '', '', '', '', 0);
			     INSERT INTO SECGROUPRIGHTS VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),(SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'MISCPOSTINGUPLOAD_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menuCat_BulkUploads'), 1, 1, 1000, CURRENT_TIMESTAMP, '', '', '', '', '', '', 0);
			     INSERT INTO SECGROUPRIGHTS VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),(SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'MISCPOSTINGUPLOAD_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_UploadList_NewMiscPostingUpload'), 1, 1, 1000, CURRENT_TIMESTAMP, '', '', '', '', '', '', 0);
			     INSERT INTO SECGROUPRIGHTS VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),(SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'MISCPOSTINGUPLOAD_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_MiscPostingUploadDialog_btnBrowse'), 1, 1, 1000, CURRENT_TIMESTAMP, '', '', '', '', '', '', 0);
			     INSERT INTO SECGROUPRIGHTS VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),(SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'MISCPOSTINGUPLOAD_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_MiscPostingUploadDialog_btnNew'), 1, 1, 1000, CURRENT_TIMESTAMP, '', '', '', '', '', '', 0);
			     INSERT INTO SECGROUPRIGHTS VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),(SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'MISCPOSTINGUPLOAD_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_MiscPostingUploadDialog_btnEdit'), 1, 1, 1000, CURRENT_TIMESTAMP, '', '', '', '', '', '', 0);
			     INSERT INTO SECGROUPRIGHTS VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),(SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'MISCPOSTINGUPLOAD_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_MiscPostingUploadDialog_btnDelete'), 1, 1, 1000, CURRENT_TIMESTAMP, '', '', '', '', '', '', 0);
			     INSERT INTO SECGROUPRIGHTS VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),(SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'MISCPOSTINGUPLOAD_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_MiscPostingUploadDialog_btnSave'), 1, 1, 1000, CURRENT_TIMESTAMP, '', '', '', '', '', '', 0);
			     INSERT INTO SECGROUPRIGHTS VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),(SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'MISCPOSTINGUPLOAD_APPROVER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_MiscPostingUploadDialog_btnSave'), 1, 1, 1000, CURRENT_TIMESTAMP, '', '', '', '', '', '', 0);
			
			     INSERT INTO SECGROUPRIGHTS VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),(SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'MISCPOSTINGUPLOAD_APPROVER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menuCat_BulkUploads'), 1, 1, 1000, CURRENT_TIMESTAMP, '', '', '', '', '', '', 0);	 
			     INSERT INTO SECGROUPRIGHTS VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),(SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'MISCPOSTINGUPLOAD_APPROVER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menuItem_MiscPostingUploadApproval'), 1, 1, 1000, CURRENT_TIMESTAMP, '', '', '', '', '', '', 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="151" author="vijaya.a">
		<addColumn tableName="MiscPostingUploads">
			<column name="TransactionId" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="152" author="vijaya.a">
		<sql>
	    	<![CDATA[
			 	delete from REPORTFILTERFIELDS where reportid in (select reportid from REPORTCONFIGURATION where menuitemcode='menu_Item_MiscellaneouspostUploadStsrpt');
       			delete from REPORTCONFIGURATION where menuitemcode='menu_Item_MiscellaneouspostUploadStsrpt';
       			Insert into REPORTCONFIGURATION values ((select max(reportid)+1 from REPORTCONFIGURATION),'Excel:Miscellaneous posting Upload Status report','Miscellaneous posting Upload Status report',1,'MiscellaneouspostUploadStsrpt','datasource',1,'menu_Item_MiscellaneouspostUploadStsrpt',1,1000,null,null,null,null,null,null,0,current_timestamp,0,0,0);
       			Insert into REPORTFILTERFIELDS values ((select reportid from REPORTCONFIGURATION where menuitemcode='menu_Item_MiscellaneouspostUploadStsrpt'),1,'Entity','LOVSEARCH','Entity','t1.entity',null,'Entity','getEntityCode','getEntityDesc',0,0,0,0,1,1,null,null,null,null,150,0,'=',1,1000,'Approved',null,null,null,null,null,0,current_timestamp,null);
       			Insert into REPORTFILTERFIELDS values ((select reportid from REPORTCONFIGURATION where menuitemcode='menu_Item_MiscellaneouspostUploadStsrpt'),2,'File Name','LOVSEARCH','File Name','t1.filename',null,'MiscUploadPostings','getFileName','getFileName',0,0,0,0,2,1,' ',' ',' ',' ',250,0,'=',1,1000,'Approved',null,null,null,null,null,0,current_timestamp,null);
       			Insert into REPORTFILTERFIELDS values ((select reportid from REPORTCONFIGURATION where menuitemcode='menu_Item_MiscellaneouspostUploadStsrpt'),3,'Date','DATE','Date','t1.transactiondate',null,'---Select----',null,null,0,0,0,0,3,0,null,null,null,null,150,0,'=',3,1000,'Approved',null,null,null,null,null,0,current_timestamp,null);
			]]>
		</sql>
	</changeSet>

	<changeSet id="153" author="vijaya.a">
		<sql>
	    	<![CDATA[
				delete from REPORTFILTERFIELDS where reportid in (select reportid from REPORTCONFIGURATION where menuitemcode='menu_Item_MiscellaneouspostUploadStsrpt');
			    delete from REPORTCONFIGURATION where menuitemcode='menu_Item_MiscellaneouspostUploadStsrpt';
			    Insert into REPORTCONFIGURATION values ((select max(reportid)+1 from REPORTCONFIGURATION),'Excel:Miscellaneous posting Upload Status report','Miscellaneous posting Upload Status report',1,'MiscellaneouspostUploadStsrpt','datasource',1,'menu_Item_MiscellaneouspostUploadStsrpt',1,1000,null,null,null,null,null,null,0,current_timestamp,0,0,0);
			    Insert into REPORTFILTERFIELDS values ((select reportid from REPORTCONFIGURATION where menuitemcode='menu_Item_MiscellaneouspostUploadStsrpt'),1,'Entity','LOVSEARCH','Entity','t1.entity',null,'Entity','getEntityCode','getEntityDesc',0,0,0,0,1,1,null,null,null,null,150,0,'=',1,1000,'Approved',null,null,null,null,null,0,current_timestamp,null);
			    Insert into REPORTFILTERFIELDS values ((select reportid from REPORTCONFIGURATION where menuitemcode='menu_Item_MiscellaneouspostUploadStsrpt'),2,'File Name','LOVSEARCH','File Name','t1.filename',null,'MiscUploadPostings','getFileName','getFileName',0,0,0,0,2,1,' ',' ',' ',' ',250,0,'=',1,1000,'Approved',null,null,null,null,null,0,current_timestamp,null);
			    Insert into REPORTFILTERFIELDS values ((select reportid from REPORTCONFIGURATION where menuitemcode='menu_Item_MiscellaneouspostUploadStsrpt'),3,'Date','DATE','Date','t1.transactiondate',null,'---Select----',null,null,0,0,0,0,3,0,null,null,null,null,150,0,'=',3,1000,'Approved',null,null,null,null,null,0,current_timestamp,null);
			]]>
		</sql>
	</changeSet>

	<changeSet id="154" author="vijaya.a">
		<createView viewName="MISCPOSTINGUPLOADS_AVIEW" replaceIfExists="true">
    		SELECT 		
    			T1.UploadId, 
    			T1.MISCPOSTINGID, 
    			T2.FILENAME, 
    			T1.BATCH, 
    			T1.BRANCH, 
    			T1.BATCHPURPOSE, 
    			T1.POSTAGAINST, 
    			T1.REFERENCE, 
    			T1.POSTINGDIVISION, 
    			T1.ACCOUNT,
				T1.Version, 
				T1.LastMntBy, 
				T1.LastMntOn, 
				T1.RecordStatus, 
				T1.RoleCode, 
				T1.NextRoleCode, 
				T1.TaskId, 
				T1.NextTaskId, 
				T1.RecordType, 
				T1.WorkflowId,
				T1.TXNENTRY,
				T1.VALUEDATE,
				T1.TXNAMOUNT,
				T1.NARRLINE1,
				T1.NARRLINE2,
				T1.NARRLINE3,
				T1.NARRLINE4, 
				T1.UPLOADSTATUS, 
				T1.REASON,
				t1.transactionid
			FROM MISCPOSTINGUPLOADS T1 INNER JOIN 
			UPLOADHEADER T2 ON T1.UploadId = T2.UploadId
    </createView>
	</changeSet>

	<changeSet id="156" author="vijaya.a" dbms="postgresql,oracle">
		<sql>
	    	<![CDATA[
	        	Insert into REPORTLIST (CODE,MODULE,FIELDLABELS,FIELDVALUES,FIELDTYPE,ADDFIELDS,REPORTFILENAME,REPORTHEADING,MODULETYPE,VERSION,LASTMNTBY,LASTMNTON,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID,FORMATREQ) values ('JVPosting','JVPosting','listheader_BatchReference.label,listheader_Batch.label,listheader_DebitCount.label,listheader_CreditsCount.label,listheader_TotDebitsByBatchCcy.label,listheader_TotCreditsByBatchCcy.label,listheader_RecordStatus.label','reference,batch,debitCount,creditsCount,totDebitsByBatchCcy,totCreditsByBatchCcy,recordStatus','String,String,int,int,int,int,String',' ','ReportList07','Miscellaneous Posting Upload Details','Upload Masters',2,1001,to_date('12-02-19','DD-MM-RR'),'Approved',' ',' ',' ',' ',' ',0,0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="156" author="vijaya.a" dbms="mssql">
		<sql>
	    	<![CDATA[
	        	Insert into REPORTLIST (CODE,MODULE,FIELDLABELS,FIELDVALUES,FIELDTYPE,ADDFIELDS,REPORTFILENAME,REPORTHEADING,MODULETYPE,VERSION,LASTMNTBY,LASTMNTON,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID,FORMATREQ) values ('JVPosting','JVPosting','listheader_BatchReference.label,listheader_Batch.label,listheader_DebitCount.label,listheader_CreditsCount.label,listheader_TotDebitsByBatchCcy.label,listheader_TotCreditsByBatchCcy.label,listheader_RecordStatus.label','reference,batch,debitCount,creditsCount,totDebitsByBatchCcy,totCreditsByBatchCcy,recordStatus','String,String,int,int,int,int,String',' ','ReportList07','Miscellaneous Posting Upload Details','Upload Masters',2,1001,convert(varchar,'2019-02-12',23),'Approved',' ',' ',' ',' ',' ',0,0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="157" author="vijaya.a">
		<sql>
	    	<![CDATA[
	        	INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, NEXTTASKID, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), '0', 'menu_Item_MiscellaneouspostUploadStsrpt', 'MiscPostingUploadDialog', '0', '1000', CURRENT_TIMESTAMP, 'Approved', ' ', '0');
	        	INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, NEXTTASKID, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), '0', 'menuCat_Reports', 'MiscPostingUploadDialog', '0', '1000', CURRENT_TIMESTAMP, 'Approved', ' ', '0');
	 			INSERT INTO SECGROUPRIGHTS VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),(SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'MISCPOSTINGUPLOAD_APPROVER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menuCat_Reports'), 1, 1, 1000, CURRENT_TIMESTAMP, '', '', '', '', '', '', 0);	 
     			INSERT INTO SECGROUPRIGHTS VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),(SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'MISCPOSTINGUPLOAD_APPROVER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_MiscellaneouspostUploadStsrpt'), 1, 1, 1000, CURRENT_TIMESTAMP, '', '', '', '', '', '', 0);
     			INSERT INTO SECGROUPRIGHTS VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),(SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'MISCPOSTINGUPLOAD_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menuCat_Reports'), 1, 1, 1000, CURRENT_TIMESTAMP, '', '', '', '', '', '', 0);
     			INSERT INTO SECGROUPRIGHTS VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),(SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'MISCPOSTINGUPLOAD_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_MiscellaneouspostUploadStsrpt'), 1, 1, 1000, CURRENT_TIMESTAMP, '', '', '', '', '', '', 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="158" author="vijaya.a">
		<createSequence sequenceName="SeqMscPostRef" incrementBy="1" startValue="00000001" />
	</changeSet>

	<changeSet id="159" author="vijaya.a">
		<sql>
	    	<![CDATA[
	        	delete from SECGROUPRIGHTS where grpid =(SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'MISCPOSTINGUPLOAD_MAKER') and rightid =(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'JVPostingDialog_PostingDivision');
	 			INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, NEXTTASKID, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), '0', 'JVPostingDialog_PostingDivision', 'MiscPostingUploadDialog', '0', '1000', CURRENT_TIMESTAMP, 'Approved', ' ', '0');
	 			INSERT INTO SECGROUPRIGHTS VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),(SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'MISCPOSTINGUPLOAD_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'JVPostingDialog_PostingDivision'), 1, 1, 1000, CURRENT_TIMESTAMP, '', '', '', '', '', '', 0);
			]]>
		</sql>
	</changeSet>


	<changeSet id="161" author="vijaya.a">
		<modifyDataType tableName="MiscPostingUploads" columnName="BATCHPURPOSE" newDataType="varchar(200)" />
	</changeSet>

	<changeSet id="162" author="vijaya.a">
		<sql>
	    	<![CDATA[
	        	delete from SECGROUPRIGHTS where grpid =(SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'MISCPOSTINGUPLOAD_MAKER') and rightid =(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'JVPostingDialog_PostingBranch');
			  	delete from SECRIGHTS where  rightid =(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'JVPostingDialog_PostingBranch');
	  			INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, NEXTTASKID, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), '0', 'JVPostingDialog_PostingBranch', 'MiscPostingUploadDialog', '0', '1000', CURRENT_TIMESTAMP, 'Approved', ' ', '0');
	 			INSERT INTO SECGROUPRIGHTS VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),(SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'MISCPOSTINGUPLOAD_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'JVPostingDialog_PostingBranch'), 1, 1, 1000, CURRENT_TIMESTAMP, '', '', '', '', '', '', 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="163" author="vijaya.a">
		<dropSequence sequenceName="SeqMscPostRef" />
	</changeSet>

	<changeSet id="164" author="vijaya.a">
		<createSequence sequenceName="SeqMscPostRef" incrementBy="1" startValue="10000000" />
	</changeSet>


	<changeSet id="165" author="vijaya.a" dbms="postgresql,oracle">
		<sql>
	    	<![CDATA[
	        	delete from SECGROUPRIGHTS where grpid =(SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'JVPOSTINGS_MAKER') and rightid =(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'JVPostingDialog_PostingDivision');
	 			delete from SECGROUPRIGHTS where grpid =(SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'JVPOSTINGS_MAKER') and rightid =(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'JVPostingDialog_PostingBranch');
	 			Insert into SECGROUPRIGHTS (GRPRIGHTID,GRPID,RIGHTID,ACCESSTYPE,VERSION,LASTMNTBY,LASTMNTON,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID) values ((select max(grprightid) from secgrouprights)+1,(select grpid from secgroups where grpcode='JVPOSTINGS_MAKER'),(select rightid from secrights where rightname='JVPostingDialog_PostingDivision'),1,0,10000,to_date('18-05-17','DD-MM-RR'),'Approved',' ',' ',' ',' ',' ',0);
     			Insert into SECGROUPRIGHTS (GRPRIGHTID,GRPID,RIGHTID,ACCESSTYPE,VERSION,LASTMNTBY,LASTMNTON,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID) values ((select max(grprightid) from secgrouprights)+1,(select grpid from secgroups where grpcode='JVPOSTINGS_MAKER'),(select rightid from secrights where rightname='JVPostingDialog_PostingBranch'),1,0,10000,to_date('18-05-17','DD-MM-RR'),'Approved',' ',' ',' ',' ',' ',0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="165" author="vijaya.a" dbms="mssql">
		<sql>
	    	<![CDATA[
	        	delete from SECGROUPRIGHTS where grpid =(SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'JVPOSTINGS_MAKER') and rightid =(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'JVPostingDialog_PostingDivision');
	 			delete from SECGROUPRIGHTS where grpid =(SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'JVPOSTINGS_MAKER') and rightid =(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'JVPostingDialog_PostingBranch');
	 			Insert into SECGROUPRIGHTS (GRPRIGHTID,GRPID,RIGHTID,ACCESSTYPE,VERSION,LASTMNTBY,LASTMNTON,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID) values ((select max(grprightid) from secgrouprights)+1,(select grpid from secgroups where grpcode='JVPOSTINGS_MAKER'),(select rightid from secrights where rightname='JVPostingDialog_PostingDivision'),1,0,10000,Convert(Datetime,'18-MAY-17'),'Approved',' ',' ',' ',' ',' ',0);
     			Insert into SECGROUPRIGHTS (GRPRIGHTID,GRPID,RIGHTID,ACCESSTYPE,VERSION,LASTMNTBY,LASTMNTON,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID) values ((select max(grprightid) from secgrouprights)+1,(select grpid from secgroups where grpcode='JVPOSTINGS_MAKER'),(select rightid from secrights where rightname='JVPostingDialog_PostingBranch'),1,0,10000,Convert(Datetime,'18-MAY-17'),'Approved',' ',' ',' ',' ',' ',0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="166" author="vijaya.a">
		<sql>
	    	<![CDATA[
	        	update secrights set righttype=3 where rightname in ('JVPostingDialog_PostingBranch','JVPostingDialog_PostingDivision');
			]]>
		</sql>
	</changeSet>

	<changeSet id="167" author="vijaya.a">
		<createView replaceIfExists="true" viewName="MISCUPLOADPOSTINGS_RVIEW">
			select UPLOADID,FILENAME from UploadHeader where module = 'MiscPostingUpload'
		</createView>
	</changeSet>

	<changeSet id="168" author="vijaya.a" dbms="oracle">
		<createView replaceIfExists="true" viewName="POSTINGS_VIEW">	
	SELECT	
				T1.LinkedTranId, 
				T1.Postref, 
				T1.PostingId, 
				T1.Finreference,
				T1.FinEvent, 
				T1.PostDate, 
				T1.ValueDate,
				T1.AppValueDate,
				T1.AppDate, 
				T1.TranCode, 
				T1.RevTranCode, 
				T1.DrOrCr, 
				T1.Account, 
				T1.PostAmount, 
				T1.PostStatus, 
				T1.ErrorId, 
				T1.ErrorMsg, 
				T2.AEEventCodeDesc LovDescEventCodeName, 
				T1.ShadowPosting, 
				T1.TranDesc, 
				T1.AmountType, 
				T1.AcCcy, 
				T1.PostBranch, 
				T1.Userbranch, 
				T1.TranOrderID, 
				T1.TransOrder
			FROM Postings T1
				INNER JOIN BMTAEEvents T2 ON T1.FinEvent = T2.AEEventCode
				INNER JOIN Financemain T3 on T3.Finreference = T1.Finreference
				WHERE T1.FinEvent NOT IN ('VASFEE', 'JVPOST')
			UNION ALL
			SELECT	
				T1.LinkedTranId, 
				T1.Postref, 
				T1.PostingId, 
				T3.Primarylinkref, 
				T1.FinEvent, 
				T1.PostDate, 
				T1.ValueDate,
				T1.AppValueDate,
				T1.AppDate,
				T1.TranCode, 
				T1.RevTranCode, 
				T1.DrOrCr, 
				T1.Account, 
				T1.PostAmount, 
				T1.PostStatus, 
				T1.ErrorId, 
				T1.ErrorMsg, 
				T2.AEEventCodeDesc LovDescEventCodeName, 
				T1.ShadowPosting, 
				T1.TranDesc, 
				T1.AmountType, 
				T1.AcCcy, 
				T1.PostBranch, 
				T1.Userbranch, 
				T1.TranOrderID, 
				T1.TransOrder
			FROM Postings T1
				INNER JOIN BMTAEEvents T2 ON T1.FinEvent = T2.AEEventCode
				INNER JOIN vasrecording T3 ON T3.vasreference = T1.Finreference
				WHERE T1.FinEvent='VASFEE'
			UNION ALL
			SELECT	
				T1.LinkedTranId, 
				T1.Postref, 
				T1.PostingId, 
				cast(T3.Reference as varchar(20)) Finreference, 
				T1.FinEvent, 
				T1.PostDate, 
				T1.ValueDate,
				T1.AppValueDate,
				T1.AppDate, 
				T1.TranCode, 
				T1.RevTranCode, 
				T1.DrOrCr, 
				T1.Account, 
				T1.PostAmount, 
				T1.PostStatus, 
				T1.ErrorId, 
				T1.ErrorMsg, 
				T2.AEEventCodeDesc LovDescEventCodeName, 
				T1.ShadowPosting, 
				T1.TranDesc, 
				T1.AmountType, 
				T1.AcCcy, 
				T1.PostBranch, 
				T1.Userbranch, 
				T1.TranOrderID, 
				T1.TransOrder
			FROM  Postings T1
				INNER JOIN BMTAEEvents T2 ON T1.FinEvent = T2.AEEventCode 
				INNER JOIN jvpostings T3 on cast(T3.Batchreference as varchar(20)) = T1.Finreference
				INNER JOIN Financemain T4 on T3.Reference = T4.Finreference
				WHERE T1.FinEvent ='JVPOST'				
		</createView>
	</changeSet>

	<changeSet id="168" author="vijaya.a" dbms="postgresql">
		<createView replaceIfExists="true" viewName="POSTINGS_VIEW">
			SELECT	
				T1.LinkedTranId, 
				T1.Postref, 
				T1.PostingId, 
				T1.Finreference,
				T1.FinEvent, 
				T1.PostDate, 
				T1.ValueDate,
				T1.AppValueDate,
				T1.AppDate, 
				T1.TranCode, 
				T1.RevTranCode, 
				T1.DrOrCr, 
				T1.Account, 
				T1.PostAmount, 
				T1.PostStatus, 
				T1.ErrorId, 
				T1.ErrorMsg, 
				T2.AEEventCodeDesc LovDescEventCodeName, 
				T1.ShadowPosting, 
				T1.TranDesc, 
				T1.AmountType, 
				T1.AcCcy, 
				T1.PostBranch, 
				T1.Userbranch, 
				T1.TranOrderID, 
				T1.TransOrder
			FROM Postings T1
				INNER JOIN BMTAEEvents T2 ON T1.FinEvent = T2.AEEventCode
				INNER JOIN Financemain T3 on T3.Finreference = T1.Finreference
				WHERE T1.FinEvent NOT IN ('VASFEE', 'JVPOST')
			UNION ALL
			SELECT	
				T1.LinkedTranId, 
				T1.Postref, 
				T1.PostingId, 
				T3.Primarylinkref, 
				T1.FinEvent, 
				T1.PostDate, 
				T1.ValueDate,
				T1.AppValueDate,
				T1.AppDate,
				T1.TranCode, 
				T1.RevTranCode, 
				T1.DrOrCr, 
				T1.Account, 
				T1.PostAmount, 
				T1.PostStatus, 
				T1.ErrorId, 
				T1.ErrorMsg, 
				T2.AEEventCodeDesc LovDescEventCodeName, 
				T1.ShadowPosting, 
				T1.TranDesc, 
				T1.AmountType, 
				T1.AcCcy, 
				T1.PostBranch, 
				T1.Userbranch, 
				T1.TranOrderID, 
				T1.TransOrder
			FROM Postings T1
				INNER JOIN BMTAEEvents T2 ON T1.FinEvent = T2.AEEventCode
				INNER JOIN vasrecording T3 ON T3.vasreference = T1.Finreference
				WHERE T1.FinEvent='VASFEE'
			UNION ALL
			SELECT	
				T1.LinkedTranId, 
				T1.Postref, 
				T1.PostingId, 
				T3.Reference Finreference, 
				T1.FinEvent, 
				T1.PostDate, 
				T1.ValueDate,
				T1.AppValueDate,
				T1.AppDate, 
				T1.TranCode, 
				T1.RevTranCode, 
				T1.DrOrCr, 
				T1.Account, 
				T1.PostAmount, 
				T1.PostStatus, 
				T1.ErrorId, 
				T1.ErrorMsg, 
				T2.AEEventCodeDesc LovDescEventCodeName, 
				T1.ShadowPosting, 
				T1.TranDesc, 
				T1.AmountType, 
				T1.AcCcy, 
				T1.PostBranch, 
				T1.Userbranch, 
				T1.TranOrderID, 
				T1.TransOrder
			FROM  Postings T1
				INNER JOIN BMTAEEvents T2 ON T1.FinEvent = T2.AEEventCode 
				INNER JOIN jvpostings T3 on cast(T3.Batchreference as varchar(20)) = T1.Finreference
				INNER JOIN Financemain T4 on T3.Reference = T4.Finreference
				WHERE T1.FinEvent ='JVPOST'
	 	</createView>
	</changeSet>

	<changeSet id="168" author="vijaya.a" dbms="mssql">
		<createView replaceIfExists="true" viewName="POSTINGS_VIEW">
			SELECT	
				T1.LinkedTranId, 
				T1.Postref, 
				T1.PostingId, 
				T1.Finreference,
				T1.FinEvent, 
				T1.PostDate, 
				T1.ValueDate,
				T1.AppValueDate,
				T1.AppDate, 
				T1.TranCode, 
				T1.RevTranCode, 
				T1.DrOrCr, 
				T1.Account, 
				T1.PostAmount, 
				T1.PostStatus, 
				T1.ErrorId, 
				T1.ErrorMsg, 
				T2.AEEventCodeDesc LovDescEventCodeName, 
				T1.ShadowPosting, 
				T1.TranDesc, 
				T1.AmountType, 
				T1.AcCcy, 
				T1.PostBranch, 
				T1.Userbranch, 
				T1.TranOrderID, 
				T1.TransOrder
			FROM Postings T1
				INNER JOIN BMTAEEvents T2 ON T1.FinEvent = T2.AEEventCode
				INNER JOIN Financemain T3 on T3.Finreference = T1.Finreference
				WHERE T1.FinEvent NOT IN ('VASFEE', 'JVPOST')
			UNION ALL
			SELECT	
				T1.LinkedTranId, 
				T1.Postref, 
				T1.PostingId, 
				T3.Primarylinkref, 
				T1.FinEvent, 
				T1.PostDate, 
				T1.ValueDate,
				T1.AppValueDate,
				T1.AppDate,
				T1.TranCode, 
				T1.RevTranCode, 
				T1.DrOrCr, 
				T1.Account, 
				T1.PostAmount, 
				T1.PostStatus, 
				T1.ErrorId, 
				T1.ErrorMsg, 
				T2.AEEventCodeDesc LovDescEventCodeName, 
				T1.ShadowPosting, 
				T1.TranDesc, 
				T1.AmountType, 
				T1.AcCcy, 
				T1.PostBranch, 
				T1.Userbranch, 
				T1.TranOrderID, 
				T1.TransOrder
			FROM Postings T1
				INNER JOIN BMTAEEvents T2 ON T1.FinEvent = T2.AEEventCode
				INNER JOIN vasrecording T3 ON T3.vasreference = T1.Finreference
				WHERE T1.FinEvent='VASFEE'
			UNION ALL
			SELECT	
				T1.LinkedTranId, 
				T1.Postref, 
				T1.PostingId, 
				T3.Reference Finreference, 
				T1.FinEvent, 
				T1.PostDate, 
				T1.ValueDate,
				T1.AppValueDate,
				T1.AppDate, 
				T1.TranCode, 
				T1.RevTranCode, 
				T1.DrOrCr, 
				T1.Account, 
				T1.PostAmount, 
				T1.PostStatus, 
				T1.ErrorId, 
				T1.ErrorMsg, 
				T2.AEEventCodeDesc LovDescEventCodeName, 
				T1.ShadowPosting, 
				T1.TranDesc, 
				T1.AmountType, 
				T1.AcCcy, 
				T1.PostBranch, 
				T1.Userbranch, 
				T1.TranOrderID, 
				T1.TransOrder
			FROM  Postings T1
				INNER JOIN BMTAEEvents T2 ON T1.FinEvent = T2.AEEventCode 
				INNER JOIN jvpostings T3 on T3.Batchreference = T1.Finreference
				INNER JOIN Financemain T4 on T3.Reference = T4.Finreference
				WHERE T1.FinEvent ='JVPOST'
	 	</createView>
	</changeSet>

	<changeSet id="175" author="vijaya.a">
		<createTable tableName="UPLOADHEADER_Temp">
			<column name="UPLOADID" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="FILELOCATION" type="varchar(250)" />
			<column name="FILENAME" type="varchar(250)">
				<constraints nullable="false" />
			</column>
			<column name="TRANSACTIONDATE" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="TOTALRECORDS" type="int" />
			<column name="SUCCESSCOUNT" type="int" />
			<column name="FAILEDCOUNT" type="int" />
			<column name="MODULE" type="varchar(250)">
				<constraints nullable="false" />
			</column>
			<column name="VERSION" type="int" />
			<column name="LASTMNTBY" type="bigint" />
			<column name="LASTMNTON" type="datetime" />
			<column name="RECORDSTATUS" type="varchar(50)" />
			<column name="ROLECODE" type="varchar(50)" />
			<column name="NEXTROLECODE" type="varchar(200)" />
			<column name="TASKID" type="varchar(50)" />
			<column name="NEXTTASKID" type="varchar(200)" />
			<column name="RECORDTYPE" type="varchar(50)" />
			<column name="WORKFLOWID" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet id="177" author="vijaya.a">
		<addColumn tableName="UPLOADHEADER">
			<column name="Entity" type="varchar(8)" />
		</addColumn>
		<addColumn tableName="UPLOADHEADER_TEMP">
			<column name="Entity" type="varchar(8)" />
		</addColumn>
	</changeSet>

	<changeSet id="178" author="vijaya.a">
		<dropColumn tableName="UPLOADHEADER" columnName="Entity" />
		<dropColumn tableName="UPLOADHEADER_temp" columnName="Entity" />
	</changeSet>

	<changeSet id="179" author="vijaya.a">
		<addColumn tableName="UPLOADHEADER">
			<column name="EntityCode" type="varchar(8)" />
		</addColumn>
		<addColumn tableName="UPLOADHEADER_TEMP">
			<column name="EntityCode" type="varchar(8)" />
		</addColumn>
	</changeSet>

	<changeSet id="180" author="vijaya.a" dbms="mssql">
		<createTable tableName="SeqJVpostings">
			<column name="SeqNo" type="bigint" autoIncrement="true" />
			<column name="Value" type="int" />
		</createTable>
	</changeSet>

	<changeSet id="181" author="vijaya.a" dbms="oracle">
		<createView replaceIfExists="true" viewName="UploadHeader_View">
	 	 
	SELECT 		T1.UploadId, T1.FileLocation, T1.FileName, T1.TransactionDate, T1.TotalRecords, T1.SuccessCount, T1.FailedCount, T1.Module
				,T1.Version, T1.LastMntBy, T1.LastMntOn, cast( T1.RecordStatus as NVARCHAR2(50)) RecordStatus,cast( T1.RoleCode as NVARCHAR2(50)) RoleCode
        , cast( T1.NextRoleCode as NVARCHAR2(50)) NextRoleCode,cast( T1.TaskId as NVARCHAR2(50)) TaskId,cast( T1.NextTaskId as NVARCHAR2(50)) NextTaskId,cast( T1.RecordType as NVARCHAR2(50)) RecordType, T1.WorkflowId
				,T1.Entitycode, T2.EntityDesc, T3.UsrLogIn USERNAME
	FROM 		UploadHeader_Temp T1 LEFT JOIN	
			    Entity T2 ON T1.Entitycode = T2.EntityCode LEFT JOIN 
				SecUsers T3 ON T3.USRID = T1.LASTMNTBY

	Union All

	SELECT 		T1.UploadId, T1.FileLocation, T1.FileName, T1.TransactionDate, T1.TotalRecords, T1.SuccessCount, T1.FailedCount, T1.Module
				,T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus RecordStatus , T1.RoleCode
        , T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId
				,T1.Entitycode, T2.EntityDesc, T3.UsrLogIn USERNAME
	FROM 		UploadHeader T1 LEFT JOIN	
			    Entity T2 ON T1.Entitycode = T2.EntityCode LEFT JOIN 
				SecUsers T3 ON T3.USRID = T1.LASTMNTBY
	WHERE 		NOT EXISTS ( SELECT 1 FROM UploadHeader_Temp WHERE UploadId = T1.UploadId)
	
	</createView>
	</changeSet>

	<changeSet id="181" author="vijaya.a" dbms="postgresql,mssql">
		<createView replaceIfExists="true" viewName="UploadHeader_View">
	 
	SELECT 		T1.UploadId, T1.FileLocation, T1.FileName, T1.TransactionDate, T1.TotalRecords, T1.SuccessCount, T1.FailedCount, T1.Module,
				T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId,
				T1.Entitycode, T2.EntityDesc, T3.UsrLogIn USERNAME
	FROM 		UploadHeader_Temp T1 LEFT JOIN	
			    Entity T2 ON T1.Entitycode = T2.EntityCode LEFT JOIN 
				SecUsers T3 ON T3.USRID = T1.LASTMNTBY
			
	Union All

	SELECT 		T1.UploadId, T1.FileLocation, T1.FileName, T1.TransactionDate, T1.TotalRecords, T1.SuccessCount, T1.FailedCount, T1.Module,
				T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId,
				T1.Entitycode, T2.EntityDesc, T3.UsrLogIn USERNAME
	FROM 		UploadHeader T1 LEFT JOIN	
			    Entity T2 ON T1.Entitycode = T2.EntityCode LEFT JOIN 
				SecUsers T3 ON T3.USRID = T1.LASTMNTBY
	WHERE 		NOT EXISTS ( SELECT 1 FROM UploadHeader_Temp WHERE UploadId = T1.UploadId)


	</createView>
	</changeSet>

	<changeSet id="182" author="vijaya.a">
		<dropSequence sequenceName="SeqMscPostRef" />
	</changeSet>

	<changeSet id="183" author="vijaya.a" dbms="mssql">
		<createTable tableName="SeqMscPostRef">
			<column name="SeqNo" type="bigint" autoIncrement="true" />
			<column name="Value" type="int" />
		</createTable>
	</changeSet>

	<changeSet id="184" author="vijaya.a" dbms="oracle">
		<createView replaceIfExists="true" viewName="POSTINGS_VIEW">
		SELECT	
				T1.LinkedTranId, 
				T1.Postref, 
				T1.PostingId, 
				T1.Finreference,
				T1.FinEvent, 
				T1.PostDate, 
				T1.ValueDate,
				T1.AppValueDate,
				T1.AppDate, 
				T1.TranCode, 
				T1.RevTranCode, 
				T1.DrOrCr, 
				T1.Account, 
				T1.PostAmount, 
				T1.PostStatus, 
				T1.ErrorId, 
				T1.ErrorMsg, 
				T2.AEEventCodeDesc LovDescEventCodeName, 
				T1.ShadowPosting, 
				T1.TranDesc, 
				T1.AmountType, 
				T1.AcCcy, 
				T1.PostBranch, 
				T1.Userbranch, 
				T1.TranOrderID, 
				T1.TransOrder
			FROM Postings T1
				INNER JOIN BMTAEEvents T2 ON T1.FinEvent = T2.AEEventCode
				INNER JOIN (Select FinReference from FinanceMain UNION 
		           SELECT FinReference from FinanceMain_Temp) T3 on T3.Finreference = T1.Finreference
				WHERE T1.FinEvent NOT IN ('VASFEE', 'JVPOST')
			UNION ALL
			SELECT	
				T1.LinkedTranId, 
				T1.Postref, 
				T1.PostingId, 
				T3.Primarylinkref, 
				T1.FinEvent, 
				T1.PostDate, 
				T1.ValueDate,
				T1.AppValueDate,
				T1.AppDate,
				T1.TranCode, 
				T1.RevTranCode, 
				T1.DrOrCr, 
				T1.Account, 
				T1.PostAmount, 
				T1.PostStatus, 
				T1.ErrorId, 
				T1.ErrorMsg, 
				T2.AEEventCodeDesc LovDescEventCodeName, 
				T1.ShadowPosting, 
				T1.TranDesc, 
				T1.AmountType, 
				T1.AcCcy, 
				T1.PostBranch, 
				T1.Userbranch, 
				T1.TranOrderID, 
				T1.TransOrder
			FROM Postings T1
				INNER JOIN BMTAEEvents T2 ON T1.FinEvent = T2.AEEventCode
				INNER JOIN vasrecording T3 ON T3.vasreference = T1.Finreference
				WHERE T1.FinEvent='VASFEE'
			UNION ALL
			SELECT	
				T1.LinkedTranId, 
				T1.Postref, 
				T1.PostingId,
        cast(T3.Reference as varchar(20)) Finreference, 
				T1.FinEvent, 
				T1.PostDate, 
				T1.ValueDate,
				T1.AppValueDate,
				T1.AppDate, 
				T1.TranCode, 
				T1.RevTranCode, 
				T1.DrOrCr, 
				T1.Account, 
				T1.PostAmount, 
				T1.PostStatus, 
				T1.ErrorId, 
				T1.ErrorMsg, 
				T2.AEEventCodeDesc LovDescEventCodeName, 
				T1.ShadowPosting, 
				T1.TranDesc, 
				T1.AmountType, 
				T1.AcCcy, 
				T1.PostBranch, 
				T1.Userbranch, 
				T1.TranOrderID, 
				T1.TransOrder
			FROM  Postings T1
				INNER JOIN BMTAEEvents T2 ON T1.FinEvent = T2.AEEventCode 
				INNER JOIN jvpostings T3 on cast(T3.batchreference as varchar(20)) = T1.Finreference
				INNER JOIN Financemain T4 on T3.Reference = T4.Finreference
				WHERE T1.FinEvent ='JVPOST'
	</createView>
	</changeSet>

	<changeSet id="184" author="vijaya.a" dbms="postgresql">
		<createView replaceIfExists="true" viewName="POSTINGS_VIEW">
			SELECT	
				T1.LinkedTranId, 
				T1.Postref, 
				T1.PostingId, 
				T1.Finreference,
				T1.FinEvent, 
				T1.PostDate, 
				T1.ValueDate,
				T1.AppValueDate,
				T1.AppDate, 
				T1.TranCode, 
				T1.RevTranCode, 
				T1.DrOrCr, 
				T1.Account, 
				T1.PostAmount, 
				T1.PostStatus, 
				T1.ErrorId, 
				T1.ErrorMsg, 
				T2.AEEventCodeDesc LovDescEventCodeName, 
				T1.ShadowPosting, 
				T1.TranDesc, 
				T1.AmountType, 
				T1.AcCcy, 
				T1.PostBranch, 
				T1.Userbranch, 
				T1.TranOrderID, 
				T1.TransOrder
			FROM Postings T1
				INNER JOIN BMTAEEvents T2 ON T1.FinEvent = T2.AEEventCode
				INNER JOIN (Select FinReference from FinanceMain UNION 
		           SELECT FinReference from FinanceMain_Temp) T3 on T3.Finreference = T1.Finreference
				WHERE T1.FinEvent NOT IN ('VASFEE', 'JVPOST')
			UNION ALL
			SELECT	
				T1.LinkedTranId, 
				T1.Postref, 
				T1.PostingId, 
				T3.Primarylinkref, 
				T1.FinEvent, 
				T1.PostDate, 
				T1.ValueDate,
				T1.AppValueDate,
				T1.AppDate,
				T1.TranCode, 
				T1.RevTranCode, 
				T1.DrOrCr, 
				T1.Account, 
				T1.PostAmount, 
				T1.PostStatus, 
				T1.ErrorId, 
				T1.ErrorMsg, 
				T2.AEEventCodeDesc LovDescEventCodeName, 
				T1.ShadowPosting, 
				T1.TranDesc, 
				T1.AmountType, 
				T1.AcCcy, 
				T1.PostBranch, 
				T1.Userbranch, 
				T1.TranOrderID, 
				T1.TransOrder
			FROM Postings T1
				INNER JOIN BMTAEEvents T2 ON T1.FinEvent = T2.AEEventCode
				INNER JOIN vasrecording T3 ON T3.vasreference = T1.Finreference
				WHERE T1.FinEvent='VASFEE'
			UNION ALL
			SELECT	
				T1.LinkedTranId, 
				T1.Postref, 
				T1.PostingId, 
				T3.Reference Finreference, 
				T1.FinEvent, 
				T1.PostDate, 
				T1.ValueDate,
				T1.AppValueDate,
				T1.AppDate, 
				T1.TranCode, 
				T1.RevTranCode, 
				T1.DrOrCr, 
				T1.Account, 
				T1.PostAmount, 
				T1.PostStatus, 
				T1.ErrorId, 
				T1.ErrorMsg, 
				T2.AEEventCodeDesc LovDescEventCodeName, 
				T1.ShadowPosting, 
				T1.TranDesc, 
				T1.AmountType, 
				T1.AcCcy, 
				T1.PostBranch, 
				T1.Userbranch, 
				T1.TranOrderID, 
				T1.TransOrder
			FROM  Postings T1
				INNER JOIN BMTAEEvents T2 ON T1.FinEvent = T2.AEEventCode 
				INNER JOIN jvpostings T3 on cast(T3.batchreference as varchar(20)) = T1.Finreference
				INNER JOIN Financemain T4 on T3.Reference = T4.Finreference
				WHERE T1.FinEvent ='JVPOST'
	 	</createView>
	</changeSet>

	<changeSet id="184" author="vijaya.a" dbms="mssql">
		<createView replaceIfExists="true" viewName="POSTINGS_VIEW">
			SELECT	
				T1.LinkedTranId, 
				T1.Postref, 
				T1.PostingId, 
				T1.Finreference,
				T1.FinEvent, 
				T1.PostDate, 
				T1.ValueDate,
				T1.AppValueDate,
				T1.AppDate, 
				T1.TranCode, 
				T1.RevTranCode, 
				T1.DrOrCr, 
				T1.Account, 
				T1.PostAmount, 
				T1.PostStatus, 
				T1.ErrorId, 
				T1.ErrorMsg, 
				T2.AEEventCodeDesc LovDescEventCodeName, 
				T1.ShadowPosting, 
				T1.TranDesc, 
				T1.AmountType, 
				T1.AcCcy, 
				T1.PostBranch, 
				T1.Userbranch, 
				T1.TranOrderID, 
				T1.TransOrder
			FROM Postings T1
				INNER JOIN BMTAEEvents T2 ON T1.FinEvent = T2.AEEventCode
				INNER JOIN (Select FinReference from FinanceMain UNION 
		           SELECT FinReference from FinanceMain_Temp) T3 on T3.Finreference = T1.Finreference
				WHERE T1.FinEvent NOT IN ('VASFEE', 'JVPOST')
			UNION ALL
			SELECT	
				T1.LinkedTranId, 
				T1.Postref, 
				T1.PostingId, 
				T3.Primarylinkref, 
				T1.FinEvent, 
				T1.PostDate, 
				T1.ValueDate,
				T1.AppValueDate,
				T1.AppDate,
				T1.TranCode, 
				T1.RevTranCode, 
				T1.DrOrCr, 
				T1.Account, 
				T1.PostAmount, 
				T1.PostStatus, 
				T1.ErrorId, 
				T1.ErrorMsg, 
				T2.AEEventCodeDesc LovDescEventCodeName, 
				T1.ShadowPosting, 
				T1.TranDesc, 
				T1.AmountType, 
				T1.AcCcy, 
				T1.PostBranch, 
				T1.Userbranch, 
				T1.TranOrderID, 
				T1.TransOrder
			FROM Postings T1
				INNER JOIN BMTAEEvents T2 ON T1.FinEvent = T2.AEEventCode
				INNER JOIN vasrecording T3 ON T3.vasreference = T1.Finreference
				WHERE T1.FinEvent='VASFEE'
			UNION ALL
			SELECT	
				T1.LinkedTranId, 
				T1.Postref, 
				T1.PostingId, 
				T3.Reference Finreference, 
				T1.FinEvent, 
				T1.PostDate, 
				T1.ValueDate,
				T1.AppValueDate,
				T1.AppDate, 
				T1.TranCode, 
				T1.RevTranCode, 
				T1.DrOrCr, 
				T1.Account, 
				T1.PostAmount, 
				T1.PostStatus, 
				T1.ErrorId, 
				T1.ErrorMsg, 
				T2.AEEventCodeDesc LovDescEventCodeName, 
				T1.ShadowPosting, 
				T1.TranDesc, 
				T1.AmountType, 
				T1.AcCcy, 
				T1.PostBranch, 
				T1.Userbranch, 
				T1.TranOrderID, 
				T1.TransOrder
			FROM  Postings T1
				INNER JOIN BMTAEEvents T2 ON T1.FinEvent = T2.AEEventCode 
				INNER JOIN jvpostings T3 on cast(T3.batchreference as varchar(20)) = T1.Finreference
				INNER JOIN Financemain T4 on T3.Reference = T4.Finreference
				WHERE T1.FinEvent ='JVPOST'
	 	</createView>
	</changeSet>

	<changeSet id="185" author="vijaya.a">
		<sql>
	    	<![CDATA[
	        	INSERT INTO SECROLEGROUPS VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='MISCPOSTINGUPLOAD_MAKER'),(SELECT ROLEID FROM SECROLES WHERE ROLECD='MISC_POST_MAKER'), 0, 1000, CURRENT_TIMESTAMP, 'APPROVED', '', '', '', '', '', 0);
				INSERT INTO SECROLEGROUPS VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='MISCPOSTINGUPLOAD_APPROVER'),(SELECT ROLEID FROM SECROLES WHERE ROLECD='MISC_POST_APPROVER'), 0, 1000, CURRENT_TIMESTAMP, 'APPROVED', '', '', '', '', '', 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="186" author="murthy.y">
		<sql>
	    	<![CDATA[
	        	update FinODDetails set LockODRecalCal = 0 where LockODRecalCal is null;
			]]>
		</sql>
	</changeSet>

	<changeSet id="188" author="murthy.y">
		<sql>
	    	<![CDATA[
	        	update REPORTCONFIGURATION set PROMPTREQUIRED = 0 where MENUITEMCODE = 'menu_Item_LoanwiseVoucherReport';
			]]>
		</sql>
	</changeSet>

	<changeSet id="189" author="murthy.y">
		<dropForeignKeyConstraint baseTableName="COVENANT_DOCUMENTS" constraintName="FK_COVENANT_DOCUMENTS_CID" />
	</changeSet>

	<changeSet id="190" author="murthy">
		<comment>New RBFields Added for Limit Rule</comment>
		<sql>
            <![CDATA[ 
				delete from RBFieldDetails where RBModule = 'LMTLINE' and RbFldName = 'fm_dmaName';
				Insert into RBFieldDetails Values ('LMTLINE', 'BANK', 'fm_dmaName', 'DMA Code', 'varchar', 100, 0, 0, '', 'dbvalue', 'DMA');
				Insert into RBFieldDetails Values ('LMTLINE', 'CUSTOMER', 'fm_dmaName', 'DMA Code', 'varchar', 100, 0, 0, '', 'dbvalue', 'DMA');
    	     ]]>
		</sql>
	</changeSet>

	<changeSet id="191" author="murthy">
		<sql>
            <![CDATA[ 
				update SecGroups set GrpCode = 'MISC_POSTING_UPLOAD_MAKER' where GrpCode = 'MISCPOSTINGUPLOAD_MAKER';
				update SecGroups set GrpCode = 'MISC_POSTING_UPLOAD_APPROVER' where GrpCode = 'MISCPOSTINGUPLOAD_APPROVER';
    	     ]]>
		</sql>
	</changeSet>

	<changeSet id="192" author="murthy">
		<sql>
            <![CDATA[ 
				delete from RBFieldDetails where RBModule = 'LMTLINE' and RBFldName = 'ct_custAddrProvince';
				delete from RBFieldDetails where RBModule = 'LMTLINE' and RbFldName = 'fm_dmaName';
				delete from RBFieldDetails where RBModule = 'LMTLINE' and RbFldName = 'fm_dmaCodeDesc';
				delete from RBFieldDetails where RBModule = 'LMTLINE' and RbFldName = 'fm_numOfMonths';
				delete from RBFieldDetails where RBModule = 'LMTLINE' and RbFldName = 'fm_lovDescAccountsOfficer';

				delete from RBFieldDetails where RBModule = 'LMTLINE' and RbFldName = 'fm_dmaCode';
				Insert into RBFieldDetails Values ('LMTLINE', 'BANK', 'fm_dmaCode', 'DMA Id', 'bigint', 100, 0, 0, '', 'dbvalue', 'DMA_LMT');
				Insert into RBFieldDetails Values ('LMTLINE', 'CUSTOMER', 'fm_dmaCode', 'DMA Id', 'bigint', 100, 0, 0, '', 'dbvalue', 'DMA_LMT');

				delete from RBFieldDetails where RBModule = 'LMTLINE' and RbFldName = 'fm_AccountsOfficer';
				Insert into RBFieldDetails Values ('LMTLINE', 'BANK', 'fm_AccountsOfficer', 'Sourcing Officer', 'bigint', 100, 0, 0, '', 'dbvalue', 'SourceOfficer_LMT');
				Insert into RBFieldDetails Values ('LMTLINE', 'CUSTOMER', 'fm_AccountsOfficer', 'Sourcing Officer', 'bigint', 100, 0, 0, '', 'dbvalue', 'SourceOfficer_LMT');
    	     ]]>
		</sql>
	</changeSet>

	<changeSet id="193" author="murthy">
		<sql>
            <![CDATA[ 
				update REPORTFILTERFIELDS set mandatory=0,MULTISELECTSEARCH=1 where reportid in (select reportid from REPORTCONFIGURATION where menuitemcode='menu_Item_LoanwiseVoucherDetail') and FIELDID=2;
				update REPORTFILTERFIELDS set mandatory=1 where reportid in (select reportid from REPORTCONFIGURATION where menuitemcode='menu_Item_LoanwiseVoucherDetail') and FIELDID=3;
			 ]]>
		</sql>
	</changeSet>

	<changeSet id="194" author="Prabhakar">
		<addColumn tableName="Sys_Notifications">
			<column name="TemplateCode" type="varchar(50)" />
		</addColumn>
	</changeSet>

	<changeSet id="195" author="Prabhakar">
		<modifyDataType tableName="Sys_Notification_Attributes" columnName="NAME" newDataType="varchar(200)" />
	</changeSet>

	<changeSet id="196" author="SRINIVAS VARMA">
		<addColumn tableName="INTERFACELOGDETAILS">
			<column name="REQUEST_INT" type="clob" />
		</addColumn>
	</changeSet>

	<changeSet id="197" author="SRINIVAS VARMA">
		<sql>
		<![CDATA[
		UPDATE INTERFACELOGDETAILS SET REQUEST_INT = REQUEST;
		]]>
		</sql>
	</changeSet>

	<changeSet id="198" author="SRINIVAS VARMA">
		<sql>
		<![CDATA[
		ALTER TABLE INTERFACELOGDETAILS DROP COLUMN REQUEST;
		]]>
		</sql>
	</changeSet>

	<changeSet id="199" author="SRINIVAS VARMA" dbms="postgresql,oracle">
		<sql>
		<![CDATA[
		ALTER TABLE INTERFACELOGDETAILS RENAME COLUMN REQUEST_INT TO REQUEST;
		]]>
		</sql>
	</changeSet>

	<changeSet id="200" author="SRINIVAS VARMA" dbms="mssql">
		<sql>
		<![CDATA[
			EXEC sp_rename 'INTERFACELOGDETAILS.REQUEST_INT', 'REQUEST', 'COLUMN';
		]]>
		</sql>
	</changeSet>

	<changeSet id="201" author="vijaya.a">
		<createView viewName="FIN_OPTIONS_VIEW" replaceIfExists="true">
			SELECT T1.Id,
					  T1.Finreference,
					  T1.OptionType,
					  T1.CurrentOptionDate,
					  T1.Frequency,
					  T1.NoticePeriodDays,
					  T1.AlertDays,
					  T1.OptionExercise,
					  T1.NextOptionDate,
					  T1.AlertType,
					  T1.AlertToRoles,
					  T1.UserTemplate,
					  T1.CustomerTemplate,
					  ut.TemplateCode UserTemplateCode,
                      cust.TemplateCode CustomerTemplateCode,
					  T1.Version,
					  T1.LastMntBy,
					  T1.LastMntOn,
					  T1.RecordStatus,
					  T1.RoleCode,
					  T1.NextRoleCode,
					  T1.TaskId,
					  T1.NextTaskId,
					  T1.RecordType,
					  T1.WorkflowId
					FROM FIN_OPTIONS_TEMP T1
					 left join Templates ut on ut.TemplateId = T1.UserTemplate
					 left join Templates cust on cust.TemplateId =T1.CustomerTemplate
					UNION ALL
					SELECT T1.Id,
					  T1.Finreference,
					  T1.OptionType,
					  T1.CurrentOptionDate,
					  T1.Frequency,
					  T1.NoticePeriodDays,
					  T1.AlertDays,
					  T1.OptionExercise,
					  T1.NextOptionDate,
					  T1.AlertType,
					  T1.AlertToRoles,
					  T1.UserTemplate,
					  T1.CustomerTemplate,
					  ut.TemplateCode UserTemplateCode,
                      cust.TemplateCode CustomerTemplateCode,
					  T1.Version,
					  T1.LastMntBy,
					  T1.LastMntOn,
					  T1.RecordStatus,
					  T1.RoleCode,
					  T1.NextRoleCode,
					  T1.TaskId,
					  T1.NextTaskId,
					  T1.RecordType,
					  T1.WorkflowId
					FROM  FIN_OPTIONS T1
					 left join Templates ut on ut.TemplateId = T1.UserTemplate
					  left join Templates cust on cust.TemplateId =T1.CustomerTemplate
					WHERE NOT EXISTS (SELECT 1 FROM FIN_OPTIONS_TEMP WHERE Id = T1.Id)
	    </createView>
	</changeSet>
	<changeSet id="202" author="vijaya.a">
		<sql>
            <![CDATA[
            	delete from data_engine_column where TableId in (select id from data_engine_table where ConfigId in (select id from data_engine_config where name in ('GL_VOCHER_DOWNLOAD_TALLY')));
				delete from data_engine_table where ConfigId in (select id from data_engine_config where name in ('GL_VOCHER_DOWNLOAD_TALLY'));
				delete from data_engine_config  where name in ('GL_VOCHER_DOWNLOAD_TALLY');
				
				INSERT INTO data_engine_config (id, name, description, parser, worksheet, textqualifier, rowdelimiter, columndelimiter, startingrow, skipheaderrow, fieldnames, header, trailer, uploadlocation, uploadpath, fileprefixname, fileextension, filesequenceno, lastprocessedon, filenameformat, cronexpression, notificationstatusemail, postevent, backupfile, active) 
				VALUES ((select max(id) + 1 from data_engine_config), 'GL_VOCHER_DOWNLOAD_TALLY', 'VOUCHER_UPLOAD', 3 , 'VOUCHER_UPLOAD', NULL, NULL, NULL, 0, 0, NULL , 'Voucher Number, Voucher Date,  Voucher Value Date, Voucher Type, GL Code, GL Description, DrCr Flag, Amount, Narration', NULL, 'A', 'C:/Pennant/PFF/DailyDownload/GLVochers' , 'GL_VOUCHERS_', '.xlsx', 1, NULL, '${VOCHER_DATE}', NULL, '0', NULL, 1, 1);
				
				INSERT INTO data_engine_table (id, configid, name, operation, keyfields, filter, statusupdate, skiprows, identifier, description, startindex, endindex, recordlength, multirow, headertable) 
				VALUES ((select max(id) + 1 from data_engine_table), (select id from data_engine_config where name = 'GL_VOCHER_DOWNLOAD_TALLY'), 'GL_VOCHERS_VIEW', 0, 'ID', 'POSTDATE BETWEEN :FROM_DATE AND :TO_DATE', NULL, NULL, NULL, NULL, NULL, NULL, 0, 0, 0);
				
				INSERT INTO data_engine_column (id, tableid, name, skip, seqtype, seqobject, defaultvalue, derivedfrom, referencecolumn, startindex, endindex, ruleforvalue, queryforvalue, format, constrainttype) VALUES ((select max(id) + 1 from data_engine_column), (select id from data_engine_table where configId = (select id from data_engine_config where name = 'GL_VOCHER_DOWNLOAD_TALLY')), 'LINKEDTRANID', 	 	 0, 'N', NULL, NULL, NULL, 		NULL, '0', NULL, NULL, 												NULL, 'NUMBER:', 				'O');
				INSERT INTO data_engine_column (id, tableid, name, skip, seqtype, seqobject, defaultvalue, derivedfrom, referencecolumn, startindex, endindex, ruleforvalue, queryforvalue, format, constrainttype) VALUES ((select max(id) + 1 from data_engine_column), (select id from data_engine_table where configId = (select id from data_engine_config where name = 'GL_VOCHER_DOWNLOAD_TALLY')), 'POSTDATE', 		 	 0, 'N', NULL, NULL, NULL, 		NULL, '0', NULL, NULL, 												NULL, 'DATE:dd.MM.yyyy', 		'O');
				INSERT INTO data_engine_column (id, tableid, name, skip, seqtype, seqobject, defaultvalue, derivedfrom, referencecolumn, startindex, endindex, ruleforvalue, queryforvalue, format, constrainttype) VALUES ((select max(id) + 1 from data_engine_column), (select id from data_engine_table where configId = (select id from data_engine_config where name = 'GL_VOCHER_DOWNLOAD_TALLY')), 'VALUEDATE', 		 0, 'N', NULL, NULL, NULL, 		NULL, '0', NULL, NULL, 												NULL, 'DATE:dd.MM.yyyy', 		'O');
				INSERT INTO data_engine_column (id, tableid, name, skip, seqtype, seqobject, defaultvalue, derivedfrom, referencecolumn, startindex, endindex, ruleforvalue, queryforvalue, format, constrainttype) VALUES ((select max(id) + 1 from data_engine_column), (select id from data_engine_table where configId = (select id from data_engine_config where name = 'GL_VOCHER_DOWNLOAD_TALLY')), 'GROUPDESCRIPTION', 	 0, 'N', NULL, NULL, NULL, 		NULL, '0', NULL, NULL, 												NULL, NULL, 					'O');
				INSERT INTO data_engine_column (id, tableid, name, skip, seqtype, seqobject, defaultvalue, derivedfrom, referencecolumn, startindex, endindex, ruleforvalue, queryforvalue, format, constrainttype) VALUES ((select max(id) + 1 from data_engine_column), (select id from data_engine_table where configId = (select id from data_engine_config where name = 'GL_VOCHER_DOWNLOAD_TALLY')), 'HOSTACCOUNT', 	 	 0, 'N', NULL, NULL, NULL, 		NULL, '0', NULL, NULL, 												NULL, NULL, 					'O');
				INSERT INTO data_engine_column (id, tableid, name, skip, seqtype, seqobject, defaultvalue, derivedfrom, referencecolumn, startindex, endindex, ruleforvalue, queryforvalue, format, constrainttype) VALUES ((select max(id) + 1 from data_engine_column), (select id from data_engine_table where configId = (select id from data_engine_config where name = 'GL_VOCHER_DOWNLOAD_TALLY')), 'TRANDESC', 		 	 0, 'N', NULL, NULL, NULL, 		NULL, '0', NULL, NULL, 												NULL, NULL, 					'O');
				INSERT INTO data_engine_column (id, tableid, name, skip, seqtype, seqobject, defaultvalue, derivedfrom, referencecolumn, startindex, endindex, ruleforvalue, queryforvalue, format, constrainttype) VALUES ((select max(id) + 1 from data_engine_column), (select id from data_engine_table where configId = (select id from data_engine_config where name = 'GL_VOCHER_DOWNLOAD_TALLY')), 'DRORCR', 	 		 0, 'N', NULL, NULL, NULL, 		NULL, '0', NULL, NULL, 												NULL, NULL, 					'O');
				INSERT INTO data_engine_column (id, tableid, name, skip, seqtype, seqobject, defaultvalue, derivedfrom, referencecolumn, startindex, endindex, ruleforvalue, queryforvalue, format, constrainttype) VALUES ((select max(id) + 1 from data_engine_column), (select id from data_engine_table where configId = (select id from data_engine_config where name = 'GL_VOCHER_DOWNLOAD_TALLY')), 'POSTAMOUNT', 	 	 0, 'N', NULL, NULL, NULL, 		NULL, '0', NULL, NULL, 												NULL, 'AMOUNT:###,###', 		'O');
				INSERT INTO data_engine_column (id, tableid, name, skip, seqtype, seqobject, defaultvalue, derivedfrom, referencecolumn, startindex, endindex, ruleforvalue, queryforvalue, format, constrainttype) VALUES ((select max(id) + 1 from data_engine_column), (select id from data_engine_table where configId = (select id from data_engine_config where name = 'GL_VOCHER_DOWNLOAD_TALLY')), 'NARRATION', 	 	 1, 'N', NULL, NULL, 'FROM_RS', NULL, '0', NULL, '$FINREFERENCE$ - $FINEVENT$ -$ACTYPEDESC$',		NULL, NULL, 					'O');
				INSERT INTO data_engine_column (id, tableid, name, skip, seqtype, seqobject, defaultvalue, derivedfrom, referencecolumn, startindex, endindex, ruleforvalue, queryforvalue, format, constrainttype) VALUES ((select max(id) + 1 from data_engine_column), (select id from data_engine_table where configId = (select id from data_engine_config where name = 'GL_VOCHER_DOWNLOAD_TALLY')), 'FINREFERENCE', 	 	 1, 'N', NULL, NULL, NULL,		NULL, '0', NULL, NULL, 												NULL, NULL,						'O');
				INSERT INTO data_engine_column (id, tableid, name, skip, seqtype, seqobject, defaultvalue, derivedfrom, referencecolumn, startindex, endindex, ruleforvalue, queryforvalue, format, constrainttype) VALUES ((select max(id) + 1 from data_engine_column), (select id from data_engine_table where configId = (select id from data_engine_config where name = 'GL_VOCHER_DOWNLOAD_TALLY')), 'FINEVENT', 	 	 	 1, 'N', NULL, NULL, NULL,		NULL, '0', NULL, NULL, 												NULL, NULL, 					'O');
				INSERT INTO data_engine_column (id, tableid, name, skip, seqtype, seqobject, defaultvalue, derivedfrom, referencecolumn, startindex, endindex, ruleforvalue, queryforvalue, format, constrainttype) VALUES ((select max(id) + 1 from data_engine_column), (select id from data_engine_table where configId = (select id from data_engine_config where name = 'GL_VOCHER_DOWNLOAD_TALLY')), 'ACTYPEDESC', 	 	 1, 'N', NULL, NULL, NULL,		NULL, '0', NULL, NULL, 												NULL, NULL, 					'O');
				
				update seq_data_engine_config set SeqNo = (select max(id) from data_engine_config);
				update seq_data_engine_table set SeqNo = (select max(id) from data_engine_table);
            ]]>
		</sql>
	</changeSet>

	<changeSet id="203" author="vijaya.a">
		<createView viewName="GL_VOCHERS_VIEW" replaceIfExists="true">
			select 
			LinkedTranId,
			FinReference, 
			PostDate, 
			ValueDate, 
			DRORCR, 
			PostAmount,
			FinEvent, 
			am.Account, 
			HostAccount, 
			at.AcType,
			at.AcTypeDesc,
			GroupCode, 
			GroupDescription, 
			TransOrder, 
			TranCode, 
			TranDesc
			from Postings p
			inner join AccountMapping am on am.account = p.account
			inner join RMTAccountTypes at on at.acType = am.accountType
			inner join AccountTypeGroup atg on atg.GroupId = at.acTypeGrpId
			where PostAmount != 0 and FinEvent != 'JVPOST'
			union all
			select 
			distinct 
			p.LinkedTranId,
			Reference FinReference,
			p.PostDate, 
			p.ValueDate, 
			p.DRORCR, 
			p.PostAmount, 
			FinEvent,
			am.Account, 
			HostAccount, 
			GroupCode, 
			GroupDescription,
			at.AcType,
			at.AcTypeDesc, 
			p.TransOrder, 
			p.TranCode, 
			p.TranDesc
			from JVPostingEntry JP 
			inner join JVPostings JVE ON JVE.BatchReference = JP.BatchReference
			inner join Postings p on P.FinReference = cast(JP.BatchReference as varchar(20))
			inner join AccountMapping am on am.account = p.account
			inner join RMTAccountTypes at on at.acType = am.accountType
			inner join AccountTypeGroup atg on atg.GroupId = at.acTypeGrpId
			where PostAmount != 0 and FinEvent = 'JVPOST'
		</createView>
	</changeSet>

	<changeSet id="204" author="vijaya.a">
		<addColumn tableName="FIN_OPTIONS">
			<column name="Remarks" type="varchar(250)" />
		</addColumn>
	</changeSet>

	<changeSet id="205" author="vijaya.a">
		<addColumn tableName="FIN_OPTIONS_TEMP">
			<column name="Remarks" type="varchar(250)" />
		</addColumn>
	</changeSet>

	<changeSet id="206" author="vijaya.a">
		<createView viewName="FIN_OPTIONS_VIEW" replaceIfExists="true">
			SELECT t1.id,
			    t1.finreference,
			    t1.optiontype,
			    t1.currentoptiondate,
			    t1.frequency,
			    t1.noticeperioddays,
			    t1.alertdays,
			    t1.optionexercise,
			    t1.nextoptiondate,
			    t1.alerttype,
			    t1.alerttoroles,
			    t1.usertemplate,
			    t1.customertemplate,
			    ut.templatecode AS usertemplatecode,
			    cust.templatecode AS customertemplatecode,
			    t1.version,
			    t1.lastmntby,
			    t1.lastmnton,
			    t1.recordstatus,
			    t1.rolecode,
			    t1.nextrolecode,
			    t1.taskid,
			    t1.nexttaskid,
			    t1.recordtype,
			    t1.workflowid,
				t1.remarks
			   FROM fin_options_temp t1
			     LEFT JOIN templates ut ON ut.templateid = t1.usertemplate
			     LEFT JOIN templates cust ON cust.templateid = t1.customertemplate
			UNION ALL
			 SELECT t1.id,
			    t1.finreference,
			    t1.optiontype,
			    t1.currentoptiondate,
			    t1.frequency,
			    t1.noticeperioddays,
			    t1.alertdays,
			    t1.optionexercise,
			    t1.nextoptiondate,
			    t1.alerttype,
			    t1.alerttoroles,
			    t1.usertemplate,
			    t1.customertemplate,
			    ut.templatecode AS usertemplatecode,
			    cust.templatecode AS customertemplatecode,
			    t1.version,
			    t1.lastmntby,
			    t1.lastmnton,
			    t1.recordstatus,
			    t1.rolecode,
			    t1.nextrolecode,
			    t1.taskid,
			    t1.nexttaskid,
			    t1.recordtype,
			    t1.workflowid,
				t1.remarks
			   FROM fin_options t1
			     LEFT JOIN templates ut ON ut.templateid = t1.usertemplate
			     LEFT JOIN templates cust ON cust.templateid = t1.customertemplate
			  WHERE NOT (EXISTS ( SELECT 1
			           FROM fin_options_temp
			          WHERE fin_options_temp.id = t1.id))
		</createView>
	</changeSet>

	<changeSet id="207" author="vijaya.a">
		<createView viewName="FIN_OPTIONS_AVIEW" replaceIfExists="true">
			SELECT t1.id,
			    t1.finreference,
			    t1.optiontype,
			    t1.currentoptiondate,
			    t1.frequency,
			    t1.noticeperioddays,
			    t1.alertdays,
			    t1.optionexercise,
			    t1.nextoptiondate,
			    t1.alerttype,
			    t1.alerttoroles,
			    t1.usertemplate,
			    t1.customertemplate,
			    ut.templatecode AS usertemplatecode,
			    cust.templatecode AS customertemplatecode,
			    t1.version,
			    t1.lastmntby,
			    t1.lastmnton,
			    t1.recordstatus,
			    t1.rolecode,
			    t1.nextrolecode,
			    t1.taskid,
			    t1.nexttaskid,
			    t1.recordtype,
			    t1.workflowid,
				t1.remarks
			   FROM fin_options t1
			     LEFT JOIN templates ut ON ut.templateid = t1.usertemplate
			     LEFT JOIN templates cust ON cust.templateid = t1.customertemplate
		</createView>
	</changeSet>

	<changeSet id="208" author="satyanarayana.g">
		<createView viewName="ACCOUNTS_AVIEW" replaceIfExists="true">
		   SELECT A.ID,
				    A.ACTYPE,
				    A.ACNUMBER,
				    A.ACBALANCE,
				    A.ACBRANCH,
				    A.ACCCY,
				    A.ACOPENDATE,
				    AM.ACCOUNT,
				    AM.ACCOUNTTYPE,
				    AM.COSTCENTERID,
				    AM.FINTYPE,
				    AM.HOSTACCOUNT,
				    AM.PROFITCENTERID,
				    AT.ACCADDLCHAR1,
				    AT.ACCADDLVAR1,
				    AT.ACCADDLVAR2,
				    AT.ACCADDLVAR3,
				    AT.ACCADDLVAR4,
				    AT.ACHEADCODE,
				    AT.ACLMTCATEGORY,
				    AT.ACPURPOSE,
				    AT.ACTYPEDESC,
				    AT.ACTYPEGRPID,
				    AT.ACTYPEISACTIVE,
				    AT.ALLOWOVERDRAW,
				    AT.ASSERTORLIABILITY,
				    AT.CONTROLAC,
				    AT.CUSTSYSAC,
				    AT.EXTRACTIONTYPE,
				    AT.INTERNALAC,
				    AT.ONBALANCESHEET,
				    AT.TAXAPPLICABLE
				  FROM ACCOUNTS A
				  INNER JOIN ACCOUNTMAPPING AM ON AM.ACCOUNT = A.ACNUMBER
				  INNER JOIN RMTACCOUNTTYPES AT ON AT.ACTYPE = AM.ACCOUNTTYPE
	 </createView>
	</changeSet>

	<changeSet id="209" author="satyanarayana.g">
		<createView viewName="ACCOUNTS_AVIEW" replaceIfExists="true">
		   SELECT A.ID,
				    A.ACTYPE,
				    A.ACNUMBER,
				    A.ACBALANCE,
				    A.ACBRANCH,
				    A.ACCCY,
				    A.ACOPENDATE,
				    AM.ACCOUNT,
				    AM.ACCOUNTTYPE,
				    AM.COSTCENTERID,
				    AM.FINTYPE,
				    AM.HOSTACCOUNT,
				    AM.PROFITCENTERID,
				    AT.ACCADDLCHAR1,
				    AT.ACCADDLVAR1,
				    AT.ACCADDLVAR2,
				    AT.ACCADDLVAR3,
				    AT.ACCADDLVAR4,
				    AT.ACHEADCODE,
				    AT.ACLMTCATEGORY,
				    AT.ACPURPOSE,
				    AT.ACTYPEDESC,
				    AT.ACTYPEGRPID,
				    AT.ACTYPEISACTIVE,
				    AT.ALLOWOVERDRAW,
				    AT.ASSERTORLIABILITY,
				    AT.CONTROLAC,
				    AT.CUSTSYSAC,
				    AT.EXTRACTIONTYPE,
				    AT.INTERNALAC,
				    AT.ONBALANCESHEET,
				    AT.TAXAPPLICABLE
				  FROM ACCOUNTS A
				  INNER JOIN ACCOUNTMAPPING AM ON AM.ACCOUNT = A.ACNUMBER
				  INNER JOIN RMTACCOUNTTYPES AT ON AT.ACTYPE = AM.ACCOUNTTYPE
	 </createView>
	</changeSet>
	<changeSet id="210" author="vijaya.a">
		<sql>
            <![CDATA[
            	delete from data_engine_column where TableId in (select id from data_engine_table where ConfigId in (select id from data_engine_config where name in ('GL_VOCHER_DOWNLOAD_TALLY')));
				delete from data_engine_table where ConfigId in (select id from data_engine_config where name in ('GL_VOCHER_DOWNLOAD_TALLY'));
				delete from data_engine_config  where name in ('GL_VOCHER_DOWNLOAD_TALLY');
				
				INSERT INTO data_engine_config (id, name, description, parser, worksheet, textqualifier, rowdelimiter, columndelimiter, startingrow, skipheaderrow, fieldnames, header, trailer, uploadlocation, uploadpath, fileprefixname, fileextension, filesequenceno, lastprocessedon, filenameformat, cronexpression, notificationstatusemail, postevent, backupfile, active) 
				VALUES ((select max(id) + 1 from data_engine_config), 'GL_VOCHER_DOWNLOAD_TALLY', 'VOUCHER_UPLOAD', 3 , 'VOUCHER_UPLOAD', NULL, NULL, NULL, 0, 0, NULL , 'Voucher Number, Voucher Date,  Voucher Value Date, Voucher Type, GL Code, GL Description, DrCr Flag, Amount, Narration', NULL, 'A', 'C:/Pennant/PFF/DailyDownload/GLVochers' , 'GL_VOUCHERS_', '.xlsx', 1, NULL, '${VOCHER_DATE}', NULL, '0', NULL, 1, 1);
				
				INSERT INTO data_engine_table (id, configid, name, operation, keyfields, filter, statusupdate, skiprows, identifier, description, startindex, endindex, recordlength, multirow, headertable) 
				VALUES ((select max(id) + 1 from data_engine_table), (select id from data_engine_config where name = 'GL_VOCHER_DOWNLOAD_TALLY'), 'GL_VOCHERS_VIEW', 0, 'ID', 'POSTDATE BETWEEN :FROM_DATE AND :TO_DATE', NULL, NULL, NULL, NULL, NULL, NULL, 0, 0, 0);
				
				INSERT INTO data_engine_column (id, tableid, name, skip, seqtype, seqobject, defaultvalue, derivedfrom, referencecolumn, startindex, endindex, ruleforvalue, queryforvalue, format, constrainttype) VALUES ((select max(id) + 1 from data_engine_column), (select id from data_engine_table where configId = (select id from data_engine_config where name = 'GL_VOCHER_DOWNLOAD_TALLY')), 'LINKEDTRANID', 	 	 0, 'N', NULL, NULL, NULL, 		NULL, '0', NULL, NULL, 												NULL, 'NUMBER:', 				'O');
				INSERT INTO data_engine_column (id, tableid, name, skip, seqtype, seqobject, defaultvalue, derivedfrom, referencecolumn, startindex, endindex, ruleforvalue, queryforvalue, format, constrainttype) VALUES ((select max(id) + 1 from data_engine_column), (select id from data_engine_table where configId = (select id from data_engine_config where name = 'GL_VOCHER_DOWNLOAD_TALLY')), 'POSTDATE', 		 	 0, 'N', NULL, NULL, NULL, 		NULL, '0', NULL, NULL, 												NULL, 'DATE:dd.MM.yyyy', 		'O');
				INSERT INTO data_engine_column (id, tableid, name, skip, seqtype, seqobject, defaultvalue, derivedfrom, referencecolumn, startindex, endindex, ruleforvalue, queryforvalue, format, constrainttype) VALUES ((select max(id) + 1 from data_engine_column), (select id from data_engine_table where configId = (select id from data_engine_config where name = 'GL_VOCHER_DOWNLOAD_TALLY')), 'VALUEDATE', 		 0, 'N', NULL, NULL, NULL, 		NULL, '0', NULL, NULL, 												NULL, 'DATE:dd.MM.yyyy', 		'O');
				INSERT INTO data_engine_column (id, tableid, name, skip, seqtype, seqobject, defaultvalue, derivedfrom, referencecolumn, startindex, endindex, ruleforvalue, queryforvalue, format, constrainttype) VALUES ((select max(id) + 1 from data_engine_column), (select id from data_engine_table where configId = (select id from data_engine_config where name = 'GL_VOCHER_DOWNLOAD_TALLY')), 'GROUPDESCRIPTION', 	 0, 'N', NULL, NULL, NULL, 		NULL, '0', NULL, NULL, 												NULL, NULL, 					'O');
				INSERT INTO data_engine_column (id, tableid, name, skip, seqtype, seqobject, defaultvalue, derivedfrom, referencecolumn, startindex, endindex, ruleforvalue, queryforvalue, format, constrainttype) VALUES ((select max(id) + 1 from data_engine_column), (select id from data_engine_table where configId = (select id from data_engine_config where name = 'GL_VOCHER_DOWNLOAD_TALLY')), 'HOSTACCOUNT', 	 	 0, 'N', NULL, NULL, NULL, 		NULL, '0', NULL, NULL, 												NULL, NULL, 					'O');
				INSERT INTO data_engine_column (id, tableid, name, skip, seqtype, seqobject, defaultvalue, derivedfrom, referencecolumn, startindex, endindex, ruleforvalue, queryforvalue, format, constrainttype) VALUES ((select max(id) + 1 from data_engine_column), (select id from data_engine_table where configId = (select id from data_engine_config where name = 'GL_VOCHER_DOWNLOAD_TALLY')), 'TRANDESC', 		 	 0, 'N', NULL, NULL, NULL, 		NULL, '0', NULL, NULL, 												NULL, NULL, 					'O');
				INSERT INTO data_engine_column (id, tableid, name, skip, seqtype, seqobject, defaultvalue, derivedfrom, referencecolumn, startindex, endindex, ruleforvalue, queryforvalue, format, constrainttype) VALUES ((select max(id) + 1 from data_engine_column), (select id from data_engine_table where configId = (select id from data_engine_config where name = 'GL_VOCHER_DOWNLOAD_TALLY')), 'DRORCR', 	 		 0, 'N', NULL, NULL, NULL, 		NULL, '0', NULL, NULL, 												NULL, NULL, 					'O');
				INSERT INTO data_engine_column (id, tableid, name, skip, seqtype, seqobject, defaultvalue, derivedfrom, referencecolumn, startindex, endindex, ruleforvalue, queryforvalue, format, constrainttype) VALUES ((select max(id) + 1 from data_engine_column), (select id from data_engine_table where configId = (select id from data_engine_config where name = 'GL_VOCHER_DOWNLOAD_TALLY')), 'POSTAMOUNT', 	 	 0, 'N', NULL, NULL, NULL, 		NULL, '0', NULL, NULL, 												NULL, 'AMOUNT:###,###', 		'O');
				INSERT INTO data_engine_column (id, tableid, name, skip, seqtype, seqobject, defaultvalue, derivedfrom, referencecolumn, startindex, endindex, ruleforvalue, queryforvalue, format, constrainttype) VALUES ((select max(id) + 1 from data_engine_column), (select id from data_engine_table where configId = (select id from data_engine_config where name = 'GL_VOCHER_DOWNLOAD_TALLY')), 'NARRATION', 	 	 1, 'N', NULL, NULL, 'FROM_RS', NULL, '0', NULL, '$FINREFERENCE$ - $FINEVENT$ -$ACTYPEDESC$',		NULL, NULL, 					'O');
				INSERT INTO data_engine_column (id, tableid, name, skip, seqtype, seqobject, defaultvalue, derivedfrom, referencecolumn, startindex, endindex, ruleforvalue, queryforvalue, format, constrainttype) VALUES ((select max(id) + 1 from data_engine_column), (select id from data_engine_table where configId = (select id from data_engine_config where name = 'GL_VOCHER_DOWNLOAD_TALLY')), 'FINREFERENCE', 	 	 1, 'N', NULL, NULL, 'FROM_RS',	NULL, '0', NULL, NULL, 												NULL, NULL,						'O');
				INSERT INTO data_engine_column (id, tableid, name, skip, seqtype, seqobject, defaultvalue, derivedfrom, referencecolumn, startindex, endindex, ruleforvalue, queryforvalue, format, constrainttype) VALUES ((select max(id) + 1 from data_engine_column), (select id from data_engine_table where configId = (select id from data_engine_config where name = 'GL_VOCHER_DOWNLOAD_TALLY')), 'FINEVENT', 	 	 	 1, 'N', NULL, NULL, 'FROM_RS',	NULL, '0', NULL, NULL, 												NULL, NULL, 					'O');
				INSERT INTO data_engine_column (id, tableid, name, skip, seqtype, seqobject, defaultvalue, derivedfrom, referencecolumn, startindex, endindex, ruleforvalue, queryforvalue, format, constrainttype) VALUES ((select max(id) + 1 from data_engine_column), (select id from data_engine_table where configId = (select id from data_engine_config where name = 'GL_VOCHER_DOWNLOAD_TALLY')), 'ACTYPEDESC', 	 	 1, 'N', NULL, NULL, 'FROM_RS',	NULL, '0', NULL, NULL, 												NULL, NULL, 					'O');
				
				update seq_data_engine_config set SeqNo = (select max(id) from data_engine_config);
				update seq_data_engine_table set SeqNo = (select max(id) from data_engine_table);
            ]]>
		</sql>
	</changeSet>
	<changeSet id="211" author="murthy">
		<sql>
            <![CDATA[
            	update REPORTFILTERFIELDS set modulename='FinOptionReport',LOVHIDDENFIELDMETHOD='getFinReference',LOVTEXTFIELDMETHOD='getFinReference' where reportid in (select reportid from  REPORTCONFIGURATION where menuitemcode='menu_Item_putcallreport')  and fieldid=1;
				update REPORTFILTERFIELDS set MULTISELECTSEARCH=1 where reportid in (select reportid from  REPORTCONFIGURATION where menuitemcode='menu_Item_putcallreport')  and fieldid=1;
				update REPORTFILTERFIELDS set MULTISELECTSEARCH=1 where reportid in (select reportid from  REPORTCONFIGURATION where menuitemcode='menu_Item_CovenantRegisterReport')  and fieldid=1;
				update REPORTFILTERFIELDS set modulename='CovenantReport',LOVHIDDENFIELDMETHOD='getKeyReference',LOVTEXTFIELDMETHOD='getKeyReference' where reportid in (select reportid from  REPORTCONFIGURATION where menuitemcode='menu_Item_CovenantRegisterReport')  and fieldid=1;
				update REPORTFILTERFIELDS set modulename='FinOptionReport',LOVHIDDENFIELDMETHOD='getFinReference',LOVTEXTFIELDMETHOD='getFinReference' where reportid in (select reportid from  REPORTCONFIGURATION where menuitemcode='menu_Item_putcallreport')  and fieldid=1;;
				update REPORTFILTERFIELDS set FIELDNAME='CustCIF',FIELDLABEL='Customer Number',FIELDDBNAME='c.CustCIF', MODULENAME='Customer',LOVHIDDENFIELDMETHOD='getCustCIF',LOVTEXTFIELDMETHOD='getCustShrtName',MULTISELECTSEARCH=1,mandatory=0  where reportid in (select reportid from reportconfiguration where menuitemcode='menu_Item_CollateralRegisterReport') and fieldid=1;
              ]]>
		</sql>
	</changeSet>
</databaseChangeLog>