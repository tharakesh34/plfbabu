<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

	<property name="add.schema" value="dbo." dbms="mssql" />
	<property name="add.schema" value=" " dbms="oracle" />
	<property name="call.substr" value="substring" dbms="mssql" />
	<property name="call.substr" value="substr" dbms="oracle" />
	<property name="call.substr" value="substring" dbms="postgresql" />
	<property name="call.auditdb" value="PFFBFSQCAudit.." dbms="mssql" />
	<property name="call.auditdb" value=" " dbms="oracle" />
	<property name="call.concatenate" value="+" dbms="mssql" />
	<property name="call.concatenate" value="||" dbms="oracle" />
	<property name="call.concatenate" value="||" dbms="postgresql" />
	<property name="call.collength" value="LEN" dbms="mssql" />
	<property name="call.collength" value="LENGTH" dbms="oracle" />
	<property name="call.collength" value="LENGTH" dbms="postgresql" />
	<property name="call.date" value="getdate()" dbms="mssql" />
	<property name="call.date" value="sysdate" dbms="oracle" />
	<property name="call.date" value="now()::timestamp" dbms="postgresql" />


	<changeSet id="pre_run_for_pgp" author="Jayant" runAlways="true"
		dbms="postgresql">
		<sql>
			Set search_path = plf,public,pg_catalog;
		</sql>
	</changeSet>

	<changeSet id="1" author="Vinay">
		<addColumn tableName="CustomerBankInfo">
			<column name="CreditTranNo" defaultValue="0" type="number(18,0)" />
			<column name="CreditTranAmt" defaultValue="0" type="number(18,0)" />
			<column name="CreditTranAvg" defaultValue="0" type="number(18,0)" />
			<column name="DebitTranNo" defaultValue="0" type="int" />
			<column name="DebitTranAmt" defaultValue="0" type="number(18,0)" />
			<column name="CashDepositNo" defaultValue="0" type="int" />
			<column name="CashDepositAmt" defaultValue="0" type="number(18,0)" />
			<column name="CashWithdrawalNo" defaultValue="0" type="int" />
			<column name="CashWithdrawalAmt" defaultValue="0" type="number(18,0)" />
			<column name="ChqDepositNo" defaultValue="0" type="int" />
			<column name="ChqDepositAmt" defaultValue="0" type="number(18,0)" />
			<column name="ChqIssueNo" defaultValue="0" type="int" />
			<column name="ChqIssueAmt" defaultValue="0" type="number(18,0)" />
			<column name="InwardChqBounceNo" defaultValue="0" type="int" />
			<column name="OutwardChqBounceNo" defaultValue="0" type="int" />
			<column name="EodBalMin" defaultValue="0" type="number(18,0)" />
			<column name="EodBalMax" defaultValue="0" type="number(18,0)" />
			<column name="EodBalAvg" defaultValue="0" type="number(18,0)" />
		</addColumn>
		<addColumn tableName="CustomerBankInfo_Temp">
			<column name="CreditTranNo" defaultValue="0" type="number(18,0)" />
			<column name="CreditTranAmt" defaultValue="0" type="number(18,0)" />
			<column name="CreditTranAvg" defaultValue="0" type="number(18,0)" />
			<column name="DebitTranNo" defaultValue="0" type="int" />
			<column name="DebitTranAmt" defaultValue="0" type="number(18,0)" />
			<column name="CashDepositNo" defaultValue="0" type="int" />
			<column name="CashDepositAmt" defaultValue="0" type="number(18,0)" />
			<column name="CashWithdrawalNo" defaultValue="0" type="int" />
			<column name="CashWithdrawalAmt" defaultValue="0" type="number(18,0)" />
			<column name="ChqDepositNo" defaultValue="0" type="int" />
			<column name="ChqDepositAmt" defaultValue="0" type="number(18,0)" />
			<column name="ChqIssueNo" defaultValue="0" type="int" />
			<column name="ChqIssueAmt" defaultValue="0" type="number(18,0)" />
			<column name="InwardChqBounceNo" defaultValue="0" type="int" />
			<column name="OutwardChqBounceNo" defaultValue="0" type="int" />
			<column name="EodBalMin" defaultValue="0" type="number(18,0)" />
			<column name="EodBalMax" defaultValue="0" type="number(18,0)" />
			<column name="EodBalAvg" defaultValue="0" type="number(18,0)" />
		</addColumn>
	</changeSet>

	<changeSet id="2" author="Vinay">
		<createView viewName="customerbankinfo_aview"
			replaceIfExists="true">
		 SELECT t1.bankid,
    t1.custid,
    t1.bankname,
    t1.accountnumber,
    t1.accounttype,
    t1.salaryaccount,
    t1.version,
    t1.lastmntby,
    t1.lastmnton,
    t1.recordstatus,
    t1.rolecode,
    t1.nextrolecode,
    t1.taskid,
    t1.nexttaskid,
    t1.recordtype,
    t1.workflowid,
    t3.bankname AS lovdescbankname,
    t4.valuedesc AS lovdescaccounttype,
	t1.CreditTranNo,
	t1.CreditTranAmt,
	t1.CreditTranAvg,
	t1.DebitTranNo,
	t1.DebitTranAmt,
	t1.CashDepositNo,
	t1.CashDepositAmt,
	t1.CashWithdrawalNo,
	t1.CashWithdrawalAmt,
	t1.ChqDepositNo,
	t1.ChqDepositAmt,
	t1.ChqIssueNo,
	t1.ChqIssueAmt,
	t1.InwardChqBounceNo,
	t1.OutwardChqBounceNo,
	t1.EodBalMin,
	t1.EodBalMax,
	t1.EodBalAvg
   FROM customerbankinfo t1
     JOIN bmtbankdetail t3 ON t3.bankcode = t1.bankname
     JOIN rmtlovfielddetail t4 ON t4.fieldcodevalue = t1.accounttype AND t4.fieldcode = 'ACC_TYPE'
		</createView>

		<createView viewName="customerbankinfo_view"
			replaceIfExists="true">
		SELECT t1.bankid,
    t1.custid,
    t1.bankname,
    t1.accountnumber,
    t1.accounttype,
    t1.salaryaccount,
    t1.version,
    t1.lastmntby,
    t1.lastmnton,
    t1.recordstatus,
    t1.rolecode,
    t1.nextrolecode,
    t1.taskid,
    t1.nexttaskid,
    t1.recordtype,
    t1.workflowid,
    t3.bankname AS lovdescbankname,
    t4.valuedesc AS lovdescaccounttype,
	t1.CreditTranNo,
	t1.CreditTranAmt,
	t1.CreditTranAvg,
	t1.DebitTranNo,
	t1.DebitTranAmt,
	t1.CashDepositNo,
	t1.CashDepositAmt,
	t1.CashWithdrawalNo,
	t1.CashWithdrawalAmt,
	t1.ChqDepositNo,
	t1.ChqDepositAmt,
	t1.ChqIssueNo,
	t1.ChqIssueAmt,
	t1.InwardChqBounceNo,
	t1.OutwardChqBounceNo,
	t1.EodBalMin,
	t1.EodBalMax,
	t1.EodBalAvg
   FROM customerbankinfo_temp t1
     JOIN bmtbankdetail t3 ON t3.bankcode = t1.bankname
     JOIN rmtlovfielddetail t4 ON t4.fieldcodevalue = t1.accounttype AND t4.fieldcode = 'ACC_TYPE'
UNION ALL
 SELECT t1.bankid,
    t1.custid,
    t1.bankname,
    t1.accountnumber,
    t1.accounttype,
    t1.salaryaccount,
    t1.version,
    t1.lastmntby,
    t1.lastmnton,
    t1.recordstatus,
    t1.rolecode,
    t1.nextrolecode,
    t1.taskid,
    t1.nexttaskid,
    t1.recordtype,
    t1.workflowid,
    t3.bankname AS lovdescbankname,
    t4.valuedesc AS lovdescaccounttype,
	t1.CreditTranNo,
	t1.CreditTranAmt,
	t1.CreditTranAvg,
	t1.DebitTranNo,
	t1.DebitTranAmt,
	t1.CashDepositNo,
	t1.CashDepositAmt,
	t1.CashWithdrawalNo,
	t1.CashWithdrawalAmt,
	t1.ChqDepositNo,
	t1.ChqDepositAmt,
	t1.ChqIssueNo,
	t1.ChqIssueAmt,
	t1.InwardChqBounceNo,
	t1.OutwardChqBounceNo,
	t1.EodBalMin,
	t1.EodBalMax,
	t1.EodBalAvg
   FROM customerbankinfo t1
     JOIN bmtbankdetail t3 ON t3.bankcode = t1.bankname
     JOIN rmtlovfielddetail t4 ON t4.fieldcodevalue = t1.accounttype AND t4.fieldcode = 'ACC_TYPE'
  WHERE NOT (EXISTS ( SELECT 1
           FROM customerbankinfo_temp
          WHERE customerbankinfo_temp.bankid = t1.bankid))
		</createView>
	</changeSet>

	<changeSet id="3" author="Vinay">
		<sql>
			UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS);
			UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM
			SECGROUPRIGHTS);

			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3,
			'CustomerBankInfoDialog_CreditTranAmt','CustomerBankInfoDialog',0,1000,CURRENT_TIMESTAMP,'
			',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3,
			'CustomerBankInfoDialog_CreditTranAvg','CustomerBankInfoDialog',0,1000,CURRENT_TIMESTAMP,'
			',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3,
			'CustomerBankInfoDialog_DebitTranNo','CustomerBankInfoDialog',0,1000,CURRENT_TIMESTAMP,'
			',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3,
			'CustomerBankInfoDialog_DebitTranAmt','CustomerBankInfoDialog',0,1000,CURRENT_TIMESTAMP,'
			',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3,
			'CustomerBankInfoDialog_CashDepositNo','CustomerBankInfoDialog',0,1000,CURRENT_TIMESTAMP,'
			',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3,
			'CustomerBankInfoDialog_CashDepositAmt','CustomerBankInfoDialog',0,1000,CURRENT_TIMESTAMP,'
			',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3,
			'CustomerBankInfoDialog_CashWithdrawalNo','CustomerBankInfoDialog',0,1000,CURRENT_TIMESTAMP,'
			',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3,
			'CustomerBankInfoDialog_CashWithdrawalAmt','CustomerBankInfoDialog',0,1000,CURRENT_TIMESTAMP,'
			',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3,
			'CustomerBankInfoDialog_ChqDepositNo','CustomerBankInfoDialog',0,1000,CURRENT_TIMESTAMP,'
			',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3,
			'CustomerBankInfoDialog_ChqDepositAmt','CustomerBankInfoDialog',0,1000,CURRENT_TIMESTAMP,'
			',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3,
			'CustomerBankInfoDialog_ChqIssueNo','CustomerBankInfoDialog',0,1000,CURRENT_TIMESTAMP,'
			',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3,
			'CustomerBankInfoDialog_ChqIssueAmt','CustomerBankInfoDialog',0,1000,CURRENT_TIMESTAMP,'
			',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3,
			'CustomerBankInfoDialog_InwardChqBounceNo','CustomerBankInfoDialog',0,1000,CURRENT_TIMESTAMP,'
			',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3,
			'CustomerBankInfoDialog_OutwardChqBounceNo','CustomerBankInfoDialog',0,1000,CURRENT_TIMESTAMP,'
			',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3,
			'CustomerBankInfoDialog_EodBalMin','CustomerBankInfoDialog',0,1000,CURRENT_TIMESTAMP,'
			',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3,
			'CustomerBankInfoDialog_EodBalMax','CustomerBankInfoDialog',0,1000,CURRENT_TIMESTAMP,'
			',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3,
			'CustomerBankInfoDialog_EodBalAvg','CustomerBankInfoDialog',0,1000,CURRENT_TIMESTAMP,'
			',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;

			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM
			SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE
			GRPCODE='CustomerBankInfo_Maker') ,(SELECT RIGHTID FROM SECRIGHTS
			WHERE RIGHTNAME='CustomerBankInfoDialog_CreditTranAmt'), 1,
			0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM
			SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE
			GRPCODE='CustomerBankInfo_Maker') ,(SELECT RIGHTID FROM SECRIGHTS
			WHERE RIGHTNAME='CustomerBankInfoDialog_CreditTranAvg'), 1,
			0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM
			SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE
			GRPCODE='CustomerBankInfo_Maker') ,(SELECT RIGHTID FROM SECRIGHTS
			WHERE RIGHTNAME='CustomerBankInfoDialog_DebitTranNo'), 1,
			0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM
			SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE
			GRPCODE='CustomerBankInfo_Maker') ,(SELECT RIGHTID FROM SECRIGHTS
			WHERE RIGHTNAME='CustomerBankInfoDialog_DebitTranAmt'), 1,
			0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM
			SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE
			GRPCODE='CustomerBankInfo_Maker') ,(SELECT RIGHTID FROM SECRIGHTS
			WHERE RIGHTNAME='CustomerBankInfoDialog_CashDepositNo'), 1,
			0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM
			SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE
			GRPCODE='CustomerBankInfo_Maker') ,(SELECT RIGHTID FROM SECRIGHTS
			WHERE RIGHTNAME='CustomerBankInfoDialog_CashDepositAmt'), 1,
			0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM
			SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE
			GRPCODE='CustomerBankInfo_Maker') ,(SELECT RIGHTID FROM SECRIGHTS
			WHERE RIGHTNAME='CustomerBankInfoDialog_CashWithdrawalNo'), 1,
			0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM
			SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE
			GRPCODE='CustomerBankInfo_Maker') ,(SELECT RIGHTID FROM SECRIGHTS
			WHERE RIGHTNAME='CustomerBankInfoDialog_CashWithdrawalAmt'), 1,
			0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM
			SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE
			GRPCODE='CustomerBankInfo_Maker') ,(SELECT RIGHTID FROM SECRIGHTS
			WHERE RIGHTNAME='CustomerBankInfoDialog_ChqDepositNo'), 1,
			0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM
			SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE
			GRPCODE='CustomerBankInfo_Maker') ,(SELECT RIGHTID FROM SECRIGHTS
			WHERE RIGHTNAME='CustomerBankInfoDialog_ChqDepositAmt'), 1,
			0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM
			SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE
			GRPCODE='CustomerBankInfo_Maker') ,(SELECT RIGHTID FROM SECRIGHTS
			WHERE RIGHTNAME='CustomerBankInfoDialog_ChqIssueNo'), 1,
			0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM
			SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE
			GRPCODE='CustomerBankInfo_Maker') ,(SELECT RIGHTID FROM SECRIGHTS
			WHERE RIGHTNAME='CustomerBankInfoDialog_ChqIssueAmt'), 1,
			0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM
			SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE
			GRPCODE='CustomerBankInfo_Maker') ,(SELECT RIGHTID FROM SECRIGHTS
			WHERE RIGHTNAME='CustomerBankInfoDialog_InwardChqBounceNo'), 1,
			0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM
			SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE
			GRPCODE='CustomerBankInfo_Maker') ,(SELECT RIGHTID FROM SECRIGHTS
			WHERE RIGHTNAME='CustomerBankInfoDialog_OutwardChqBounceNo'), 1,
			0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM
			SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE
			GRPCODE='CustomerBankInfo_Maker') ,(SELECT RIGHTID FROM SECRIGHTS
			WHERE RIGHTNAME='CustomerBankInfoDialog_EodBalMin'), 1,
			0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM
			SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE
			GRPCODE='CustomerBankInfo_Maker') ,(SELECT RIGHTID FROM SECRIGHTS
			WHERE RIGHTNAME='CustomerBankInfoDialog_EodBalMax'), 1,
			0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM
			SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE
			GRPCODE='CustomerBankInfo_Maker') ,(SELECT RIGHTID FROM SECRIGHTS
			WHERE RIGHTNAME='CustomerBankInfoDialog_EodBalAvg'), 1,
			0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);

			UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS);
			UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM
			SECGROUPRIGHTS);
		</sql>
	</changeSet>
	<changeSet id="5" author="Vinay">
		<addColumn tableName="CustomerExtLiability">
			<column name="roi" defaultValue="0" type="decimal(18,0)">
				<constraints nullable="false" />
			</column>
			<column name="tenure" defaultValue="0" type="int">
				<constraints nullable="false" />
			</column>
			<column name="tenureBal" defaultValue="0" type="int">
				<constraints nullable="false" />
			</column>
			<column name="bounceNo" defaultValue="0" type="int" />
			<column name="pos" defaultValue="0" type="decimal(18,0)">
				<constraints nullable="false" />
			</column>
			<column name="overdue" defaultValue="0" type="decimal(18,0)" />
			<column name="isEmiCnsdrForFOIR" defaultValue="0" type="boolean">
				<constraints nullable="false" />
			</column>
			<column name="source" defaultValue="" type="VARCHAR(8)">
				<constraints nullable="false" />
			</column>
			<column name="checkedBy" defaultValue="" type="VARCHAR(8)">
				<constraints nullable="false" />
			</column>
			<column name="securityDetail" defaultValue="" type="VARCHAR(50)" />
			<column name="endUseOfFunds" defaultValue="" type="VARCHAR(8)">
				<constraints nullable="false" />
			</column>
			<column name="repayFrom" defaultValue="" type="VARCHAR(8)">
				<constraints nullable="false" />
			</column>
		</addColumn>
		<addColumn tableName="CustomerExtLiability_Temp">
			<column name="roi" defaultValue="0" type="decimal(18,0)">
				<constraints nullable="false" />
			</column>
			<column name="tenure" defaultValue="0" type="int">
				<constraints nullable="false" />
			</column>
			<column name="tenureBal" defaultValue="0" type="int">
				<constraints nullable="false" />
			</column>
			<column name="bounceNo" defaultValue="0" type="int" />
			<column name="pos" defaultValue="0" type="decimal(18,0)">
				<constraints nullable="false" />
			</column>
			<column name="overdue" defaultValue="0" type="decimal(18,0)" />
			<column name="isEmiCnsdrForFOIR" defaultValue="0" type="boolean">
				<constraints nullable="false" />
			</column>
			<column name="source" defaultValue="" type="VARCHAR(8)">
				<constraints nullable="false" />
			</column>
			<column name="checkedBy" defaultValue="" type="VARCHAR(8)">
				<constraints nullable="false" />
			</column>
			<column name="securityDetail" defaultValue="" type="VARCHAR(50)" />
			<column name="endUseOfFunds" defaultValue="" type="VARCHAR(8)">
				<constraints nullable="false" />
			</column>
			<column name="repayFrom" defaultValue="" type="VARCHAR(8)">
				<constraints nullable="false" />
			</column>
		</addColumn>
	</changeSet>

	<changeSet id="6" author="Vinay">
		<sql>
			UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM
			SECRIGHTS);
			UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT
			MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);

			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3,
			'CustomerExtLiabilityDialog_ROI','CustomerExtLiabilityDialog',0,1000,CURRENT_TIMESTAMP,'
			',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3,
			'CustomerExtLiabilityDialog_TotalTenure','CustomerExtLiabilityDialog',0,1000,CURRENT_TIMESTAMP,'
			',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3,
			'CustomerExtLiabilityDialog_BalanceTenure','CustomerExtLiabilityDialog',0,1000,CURRENT_TIMESTAMP,'
			',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3,
			'CustomerExtLiabilityDialog_NoOfBounces','CustomerExtLiabilityDialog',0,1000,CURRENT_TIMESTAMP,'
			',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3,
			'CustomerExtLiabilityDialog_POS','CustomerExtLiabilityDialog',0,1000,CURRENT_TIMESTAMP,'
			',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3,
			'CustomerExtLiabilityDialog_Overdue','CustomerExtLiabilityDialog',0,1000,CURRENT_TIMESTAMP,'
			',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3,
			'CustomerExtLiabilityDialog_EMIFoir','CustomerExtLiabilityDialog',0,1000,CURRENT_TIMESTAMP,'
			',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3,
			'CustomerExtLiabilityDialog_Source','CustomerExtLiabilityDialog',0,1000,CURRENT_TIMESTAMP,'
			',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3,
			'CustomerExtLiabilityDialog_CheckedBy','CustomerExtLiabilityDialog',0,1000,CURRENT_TIMESTAMP,'
			',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3,
			'CustomerExtLiabilityDialog_SecurityDetail','CustomerExtLiabilityDialog',0,1000,CURRENT_TIMESTAMP,'
			',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3,
			'CustomerExtLiabilityDialog_EndUseOfFunds','CustomerExtLiabilityDialog',0,1000,CURRENT_TIMESTAMP,'
			',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3,
			'CustomerExtLiabilityDialog_RepayFrom','CustomerExtLiabilityDialog',0,1000,CURRENT_TIMESTAMP,'
			',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;

			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM
			SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE
			GRPCODE='CustomerExtLiability_Maker') ,(SELECT RIGHTID FROM SECRIGHTS
			WHERE RIGHTNAME='CustomerExtLiabilityDialog_ROI'), 1,
			0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO
			SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),
			(SELECT GRPID FROM SECGROUPS WHERE
			GRPCODE='CustomerExtLiability_Maker') ,(SELECT RIGHTID FROM SECRIGHTS
			WHERE RIGHTNAME='CustomerExtLiabilityDialog_TotalTenure'), 1,
			0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO
			SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),
			(SELECT GRPID FROM SECGROUPS WHERE
			GRPCODE='CustomerExtLiability_Maker') ,(SELECT RIGHTID FROM SECRIGHTS
			WHERE RIGHTNAME='CustomerExtLiabilityDialog_BalanceTenure'), 1,
			0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO
			SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),
			(SELECT GRPID FROM SECGROUPS WHERE
			GRPCODE='CustomerExtLiability_Maker') ,(SELECT RIGHTID FROM SECRIGHTS
			WHERE RIGHTNAME='CustomerExtLiabilityDialog_NoOfBounces'), 1,
			0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO
			SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),
			(SELECT GRPID FROM SECGROUPS WHERE
			GRPCODE='CustomerExtLiability_Maker') ,(SELECT RIGHTID FROM SECRIGHTS
			WHERE RIGHTNAME='CustomerExtLiabilityDialog_POS'), 1,
			0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO
			SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),
			(SELECT GRPID FROM SECGROUPS WHERE
			GRPCODE='CustomerExtLiability_Maker') ,(SELECT RIGHTID FROM SECRIGHTS
			WHERE RIGHTNAME='CustomerExtLiabilityDialog_Overdue'), 1,
			0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO
			SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),
			(SELECT GRPID FROM SECGROUPS WHERE
			GRPCODE='CustomerExtLiability_Maker') ,(SELECT RIGHTID FROM SECRIGHTS
			WHERE RIGHTNAME='CustomerExtLiabilityDialog_EMIFoir'), 1,
			0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO
			SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),
			(SELECT GRPID FROM SECGROUPS WHERE
			GRPCODE='CustomerExtLiability_Maker') ,(SELECT RIGHTID FROM SECRIGHTS
			WHERE RIGHTNAME='CustomerExtLiabilityDialog_Source'), 1,
			0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO
			SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),
			(SELECT GRPID FROM SECGROUPS WHERE
			GRPCODE='CustomerExtLiability_Maker') ,(SELECT RIGHTID FROM SECRIGHTS
			WHERE RIGHTNAME='CustomerExtLiabilityDialog_CheckedBy'), 1,
			0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO
			SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),
			(SELECT GRPID FROM SECGROUPS WHERE
			GRPCODE='CustomerExtLiability_Maker') ,(SELECT RIGHTID FROM SECRIGHTS
			WHERE RIGHTNAME='CustomerExtLiabilityDialog_SecurityDetail'), 1,
			0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO
			SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),
			(SELECT GRPID FROM SECGROUPS WHERE
			GRPCODE='CustomerExtLiability_Maker') ,(SELECT RIGHTID FROM SECRIGHTS
			WHERE RIGHTNAME='CustomerExtLiabilityDialog_EndUseOfFunds'), 1,
			0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO
			SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),
			(SELECT GRPID FROM SECGROUPS WHERE
			GRPCODE='CustomerExtLiability_Maker') ,(SELECT RIGHTID FROM SECRIGHTS
			WHERE RIGHTNAME='CustomerExtLiabilityDialog_RepayFrom'), 1,
			0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);

			UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS);
			UPDATE
			SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM
			SECGROUPRIGHTS);
		</sql>
	</changeSet>

	<changeSet id="7" author="Vinay">
		<renameColumn newColumnName="EmiCnsdrForFOIR"
			oldColumnName="IsEmiCnsdrForFOIR" tableName="CustomerExtLiability" />
	</changeSet>
	<changeSet id="8" author="Vinay">
		<renameColumn newColumnName="EmiCnsdrForFOIR"
			oldColumnName="IsEmiCnsdrForFOIR" tableName="CustomerExtLiability_Temp" />
	</changeSet>

	<changeSet id="9" author="Vinay">
		<createView viewName="customerextliability_aview"
			replaceIfExists="true">
			SELECT t1.custid,
		    t1.liabilityseq,
		    t1.findate,
		    t1.fintype,
		    t1.bankname,
		    t1.originalamount,
		    t1.instalmentamount,
		    t1.outstandingbal,
		    t1.finstatus,
		    t1.version,
		    t1.lastmntby,
		    t1.lastmnton,
		    t1.recordstatus,
		    t1.rolecode,
		    t1.nextrolecode,
		    t1.taskid,
		    t1.nexttaskid,
		    t1.recordtype,
		    t1.workflowid,
		    t3.bankname AS lovdescbankname,
		    t4.fintypedesc AS lovdescfintype,
		    t5.custstsdescription AS lovdescfinstatus,
			t1.roi,
			t1.tenure,
			t1.tenureBal,
			t1.bounceNo,
			t1.pos,
			t1.overdue,
			t1.emiCnsdrForFOIR,
			t1.source,
			t1.checkedBy,
			t1.securityDetail,
			t1.endUseOfFunds,
			t1.repayFrom,
			t6.loanpurposedesc,
			t7.bankname AS lovdescrepayfrom
		   FROM customerextliability_TEMP t1
			 INNER JOIN bmtbankdetail t3 ON t3.bankcode = t1.bankname
		     INNER JOIN otherbankfinancetype t4 ON t4.fintype = t1.fintype
		     LEFT JOIN bmtcuststatuscodes t5 ON t5.custstscode = t1.finstatus 
			 INNER JOIN LOANPURPOSES t6 ON t6.Loanpurposecode = t1.endUseOfFunds
			 INNER JOIN bmtbankdetail t7 ON t7.bankcode = t1.repayFrom
		</createView>

		<createView viewName="customerextliability_view"
			replaceIfExists="true">
			SELECT t1.custid,
		    t1.liabilityseq,
		    t1.findate,
		    t1.fintype,
		    t1.bankname,
		    t1.originalamount,
		    t1.instalmentamount,
		    t1.outstandingbal,
		    t1.finstatus,
		    t1.version,
		    t1.lastmntby,
		    t1.lastmnton,
		    t1.recordstatus,
		    t1.rolecode,
		    t1.nextrolecode,
		    t1.taskid,
		    t1.nexttaskid,
		    t1.recordtype,
		    t1.workflowid,
		    t3.bankname AS lovdescbankname,
		    t4.fintypedesc AS lovdescfintype,
		    t5.custstsdescription AS lovdescfinstatus,
			t1.roi,
			t1.tenure,
			t1.tenureBal,
			t1.bounceNo,
			t1.pos,
			t1.overdue,
			t1.emiCnsdrForFOIR,
			t1.source,
			t1.checkedBy,
			t1.securityDetail,
			t1.endUseOfFunds,
			t1.repayFrom,
			t6.loanpurposedesc,
			t7.bankname AS lovdescrepayfrom
		   FROM customerextliability_temp t1
		     INNER JOIN bmtbankdetail t3 ON t3.bankcode = t1.bankname
		     INNER JOIN otherbankfinancetype t4 ON t4.fintype = t1.fintype
		     LEFT JOIN bmtcuststatuscodes t5 ON t5.custstscode = t1.finstatus
			 INNER JOIN LOANPURPOSES t6 ON t6.Loanpurposecode = t1.endUseOfFunds
			 INNER JOIN bmtbankdetail t7 ON t7.bankcode = t1.repayFrom
		UNION ALL
		 SELECT t1.custid,
		    t1.liabilityseq,
		    t1.findate,
		    t1.fintype,
		    t1.bankname,
		    t1.originalamount,
		    t1.instalmentamount,
		    t1.outstandingbal,
		    t1.finstatus,
		    t1.version,
		    t1.lastmntby,
		    t1.lastmnton,
		    t1.recordstatus,
		    t1.rolecode,
		    t1.nextrolecode,
		    t1.taskid,
		    t1.nexttaskid,
		    t1.recordtype,
		    t1.workflowid,
		    t3.bankname AS lovdescbankname,
		    t4.fintypedesc AS lovdescfintype,
		    t5.custstsdescription AS lovdescfinstatus,
			t1.roi,
			t1.tenure,
			t1.tenureBal,
			t1.bounceNo,
			t1.pos,
			t1.overdue,
			t1.emiCnsdrForFOIR,
			t1.source,
			t1.checkedBy,
			t1.securityDetail,
			t1.endUseOfFunds,
			t1.repayFrom,
			t6.loanpurposedesc,
			t7.bankname AS lovdescrepayfrom
			FROM customerextliability t1
		     INNER JOIN bmtbankdetail t3 ON t3.bankcode = t1.bankname
		     INNER JOIN otherbankfinancetype t4 ON t4.fintype = t1.fintype
		     LEFT JOIN bmtcuststatuscodes t5 ON t5.custstscode = t1.finstatus 
			 INNER JOIN LOANPURPOSES t6 ON t6.Loanpurposecode = t1.endUseOfFunds
			 INNER JOIN bmtbankdetail t7 ON t7.bankcode = t1.repayFrom
		  WHERE NOT (EXISTS ( SELECT 1
		           FROM customerextliability_temp
		          WHERE customerextliability_temp.custid = t1.custid AND customerextliability_temp.liabilityseq = t1.liabilityseq))
		</createView>
	</changeSet>

	<changeSet id="10" author="Vinay">
		<sql>
			UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM
			SECRIGHTS);
			UPDATE SEQSECGROUPS SET SEQNO= (SELECT MAX(GRPID) FROM
			SECGROUPS);
			UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT
			MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);
			UPDATE SEQSECROLEGROUPS SET SEQNO= (SELECT MAX(ROLEGRPID) FROM
			SECROLEGROUPS);

			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2,
			'button_DedupParmList_NewCollateralDedup','DedupParmList',0,1000,CURRENT_TIMESTAMP,'
			',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2,
			'button_DedupParmDialog_btnCollateralSave','DedupParmDialog',0,1000,CURRENT_TIMESTAMP,'
			',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2,
			'button_DedupParmDialog_btnCollateralDelete','DedupParmDialog',0,1000,CURRENT_TIMESTAMP,'
			',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2,
			'button_DedupParmDialog_btnCollateralEdit','DedupParmDialog',0,1000,CURRENT_TIMESTAMP,'
			',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2,
			'button_DedupParmDialog_btnCollateralNew','DedupParmDialog',0,1000,CURRENT_TIMESTAMP,'
			',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3,
			'DedupParmDialog_CollateralType','DedupParmDialog',0,1000,CURRENT_TIMESTAMP,'
			',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0,
			'menuItem_RulesFactory_CollateralDedupParm','MENU',0,1000,CURRENT_TIMESTAMP,'
			',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2,
			'button_DedupParmDialog_btnCollateralMaintain','DedupParmDialog',0,1000,CURRENT_TIMESTAMP,'
			',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2,
			'button_DedupParmDialog_btnCollateralDeletion','DedupParmDialog',0,1000,CURRENT_TIMESTAMP,'
			',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;

			INSERT INTO SECGROUPS SELECT (SELECT MAX(GRPID)+1 FROM SECGROUPS),
			'COLLATERALDEDUP_MAKER', 'Collateral Dedup Details for Maker',
			0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0 FROM SEQSECGROUPS
			WHERE 0=0;
			INSERT INTO SECGROUPS SELECT (SELECT MAX(GRPID)+1 FROM
			SECGROUPS), 'COLLATERALDEDUP_APPROVER', 'Collateral Dedup Details for
			Approver', 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0 FROM
			SEQSECGROUPS WHERE 0=0;

			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM
			SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE
			GRPCODE='COLLATERALDEDUP_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS
			WHERE RIGHTNAME='button_DedupParmList_NewCollateralDedup'), 1,
			0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO
			SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),
			(SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COLLATERALDEDUP_MAKER')
			,(SELECT RIGHTID FROM SECRIGHTS WHERE
			RIGHTNAME='button_DedupParmDialog_btnCollateralSave'), 1,
			0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO
			SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),
			(SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COLLATERALDEDUP_MAKER')
			,(SELECT RIGHTID FROM SECRIGHTS WHERE
			RIGHTNAME='button_DedupParmDialog_btnCollateralDelete'), 1,
			0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO
			SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),
			(SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COLLATERALDEDUP_MAKER')
			,(SELECT RIGHTID FROM SECRIGHTS WHERE
			RIGHTNAME='button_DedupParmDialog_btnCollateralEdit'), 1,
			0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO
			SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),
			(SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COLLATERALDEDUP_MAKER')
			,(SELECT RIGHTID FROM SECRIGHTS WHERE
			RIGHTNAME='button_DedupParmDialog_btnCollateralNew'), 1,
			0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO
			SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),
			(SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COLLATERALDEDUP_MAKER')
			,(SELECT RIGHTID FROM SECRIGHTS WHERE
			RIGHTNAME='menuItem_RulesFactory_CollateralDedupParm'), 1,
			0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO
			SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),
			(SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COLLATERALDEDUP_MAKER')
			,(SELECT RIGHTID FROM SECRIGHTS WHERE
			RIGHTNAME='DedupParmDialog_CollateralType'), 1,
			0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO
			SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),
			(SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COLLATERALDEDUP_MAKER')
			,(SELECT RIGHTID FROM SECRIGHTS WHERE
			RIGHTNAME='button_DedupParmDialog_btnCollateralMaintain'), 1,
			0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO
			SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),
			(SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COLLATERALDEDUP_MAKER')
			,(SELECT RIGHTID FROM SECRIGHTS WHERE
			RIGHTNAME='button_DedupParmDialog_btnCollateralDeletion'), 1,
			0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO
			SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),
			(SELECT GRPID FROM SECGROUPS WHERE
			GRPCODE='COLLATERALDEDUP_APPROVER') ,(SELECT RIGHTID FROM SECRIGHTS
			WHERE RIGHTNAME='button_DedupParmDialog_btnCollateralSave'), 1,
			0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO
			SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),
			(SELECT GRPID FROM SECGROUPS WHERE
			GRPCODE='COLLATERALDEDUP_APPROVER') ,(SELECT RIGHTID FROM SECRIGHTS
			WHERE RIGHTNAME='menuItem_RulesFactory_CollateralDedupParm'), 1,
			0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);

			INSERT INTO SecRoleGroups values((Select MAX(RoleGrpID)+1 From
			SecRoleGroups),(Select GrpId From SecGroups Where
			GrpCode='COLLATERALDEDUP_MAKER'), (Select RoleID From SecRoles Where
			RoleCd='MSTGRP1_MAKER'),0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ','
			',' ',0);
			INSERT INTO SecRoleGroups values((Select MAX(RoleGrpID)+1 From
			SecRoleGroups),(Select GrpId From SecGroups Where
			GrpCode='COLLATERALDEDUP_APPROVER'), (Select RoleID From SecRoles
			Where RoleCd='MSTGRP1_APPROVER'),0,1000,CURRENT_TIMESTAMP,' ',' ','
			',' ',' ',' ',0);

			UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS);
			UPDATE
			SEQSECGROUPS SET SEQNO= (SELECT MAX(GRPID) FROM SECGROUPS);
			UPDATE
			SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM
			SECGROUPRIGHTS);
			UPDATE SEQSECROLEGROUPS SET SEQNO= (SELECT MAX(ROLEGRPID) FROM
			SECROLEGROUPS);
		</sql>
	</changeSet>
	<changeSet id="11" author="Jayant">
		<createView viewName="INT_DISBURSEMENT_REQUEST_VIEW"
			replaceIfExists="true">
			SELECT FA. PAYMENTID,
				   FA.FINREFERENCE,
				   'D' CHANNEL, 
				   CASE WHEN FA.PAYMENTTYPE = 'NEFT' THEN 'N' WHEN FA.PAYMENTTYPE = 'RTGS' THEN 'R' WHEN FA.PAYMENTTYPE = 'DD' THEN 'D' WHEN FA.PAYMENTTYPE = 'CHEQUE' THEN 'C' ELSE  FA.PAYMENTTYPE END  DISBURSEMENT_TYPE,
				   FA.AMTTOBERELEASED/CCY.CCYMINORCCYUNITS  AMTTOBERELEASED,
				   FA.DISBDATE,
	               FA.LLDATE,
				   FA.PAYABLELOC,
				   FA.PRINTINGLOC,
				   CU.CUSTCIF,            
				   CU.CUSTSHRTNAME,     
				   '' AS CUSTOMER_MOBILE,
				   CE.CUSTEMAIL       CUSTOMER_EMAIL,
				   CS.CPPROVINCENAME  CUSTOMER_STATE,
				   CC.PCCITYNAME      CUSTOMER_CITY,
				   ''                 CUSTOMER_ADDRESS1,
				   ''                 CUSTOMER_ADDRESS2,
				   ''                 CUSTOMER_ADDRESS3,
				   ''                 CUSTOMER_ADDRESS4,
				   ''                 CUSTOMER_ADDRESS5,
	              BD.BANKNAME BANKNAME,
	              BB.BRANCHCODE,
	              BB.BRANCHDESC BRANCHDESC,
				  PBD.CPPROVINCENAME  BENFICIARY_BRANCH_STATE,
				  PBD.PCCITYNAME      BENFICIARY_BRANCH_CITY,
				   BB.MICR             MICR_CODE,
				   BB.IFSC             IFSC_CODE,
				   FA.BENEFICIARYACCNO,
				   CASE WHEN FA.PAYMENTTYPE = 'CHEQUE' OR  FA.PAYMENTTYPE = 'DD' THEN FA.LIABILITYHOLDNAME ELSE FA.BENEFICIARYNAME END BENEFICIARYNAME,
				   FA.PHONECOUNTRYCODE${call.concatenate}FA.PHONEAREACODE${call.concatenate}FA.PHONENUMBER AS BENEFICIARY_MOBILE, 
				   BCE.CUSTEMAIL        BENFICIRY_EMAIL,
				   BRS.CPPROVINCENAME  BENFICIARY_STATE,
				   BRC.PCCITYNAME      BENFICIARY_CITY,
				   ''                  BENFICIARY_ADDRESS1,
				   ''                  BENFICIARY_ADDRESS2,
				   ''                  BENFICIARY_ADDRESS3,
				   ''                  BENFICIARY_ADDRESS4,
				   ''                  BENFICIARY_ADDRESS5,
				   ''				   PAYMENT_DETAIL1,
				   ''                  PAYMENT_DETAIL2,
				   ''                  PAYMENT_DETAIL3,
				   ''                  PAYMENT_DETAIL4,
				   ''                  PAYMENT_DETAIL5,
				   ''                  PAYMENT_DETAIL6,
				   ''                  PAYMENT_DETAIL7,     
				   FA.STATUS           STATUS,
				   FA.DESCRIPTION      REMARKS,
				     FA.PAYMENTTYPE      PAYMENTTYPE,
				     FM.FINTYPE,
				     PB.PARTNERBANKID,
				     PB.PARTNERBANKCODE,
				     FA.INPUTDATE,
				     PB.ALWFILEDOWNLOAD,
	                PB.FILENAME,
				     FM.FINISACTIVE,
					 SMD.ENTITYCODE
				   FROM FINADVANCEPAYMENTS FA
				   INNER JOIN (select CUSTID, FINREFERENCE, FINTYPE,  FINISACTIVE from financemain union all select CUSTID, FINREFERENCE, FINTYPE,  FINISACTIVE from financemain_temp where QUICKDISB=1) FM on FM.FINREFERENCE = FA.FINREFERENCE
				   INNER JOIN CUSTOMERS CU ON CU.CUSTID = FM.CUSTID
				   INNER JOIN RMTCURRENCIES CCY ON CCY.CCYCODE = FA.DISBCCY
        		   INNER JOIN PARTNERBANKS PB ON PB.PARTNERBANKID = FA.PARTNERBANKID
				   LEFT JOIN CUSTOMEREMAILS CE ON CE.CUSTID = CU.CUSTID AND CE.CUSTEMAILPRIORITY = 5
				   LEFT JOIN CUSTOMERADDRESSES CA ON CA.CUSTID = CE.CUSTID AND CA.CUSTADDRPRIORITY = 5
				   LEFT JOIN RMTPROVINCEVSCITY CC ON CC.PCCITY = CA.CUSTADDRCITY
				   LEFT JOIN RMTCOUNTRYVSPROVINCE CS ON CS.CPPROVINCE = CC.PCPROVINCE  
				   LEFT JOIN BANKBRANCHES BB ON BB.BANKBRANCHID = FA.BANKBRANCHID
				   LEFT JOIN BMTBANKDETAIL BD ON BD.BANKCODE = BB.BANKCODE
	         	   LEFT JOIN  (select PB.PARTNERBANKID, PBD.BANKNAME, PBB.BRANCHDESC, PBBRC.PCCITYNAME, PBBRS.CPPROVINCENAME from PARTNERBANKS PB INNER JOIN BANKBRANCHES PBB ON PBB.BRANCHCODE = PB.BANKBRANCHCODE INNER JOIN BMTBANKDETAIL PBD ON PBD.BANKCODE = PBB.BANKCODE LEFT JOIN RMTPROVINCEVSCITY PBBRC ON PBBRC.PCCITY = PBB.CITY LEFT JOIN RMTCOUNTRYVSPROVINCE PBBRS ON PBBRS.CPPROVINCE = PBBRC.PCPROVINCE ) PBD ON PBD.PARTNERBANKID = PB.PARTNERBANKID
				   LEFT JOIN BENEFICIARY BR ON BR.BANKBRANCHID = FA.BANKBRANCHID AND BR.ACCNUMBER = FA.BENEFICIARYACCNO AND BR.CUSTID = FM.CUSTID
				   LEFT JOIN CUSTOMERS BC ON BC.CUSTID = BR.CUSTID
				   LEFT JOIN CUSTOMEREMAILS BCE ON BCE.CUSTID = CU.CUSTID AND BCE.CUSTEMAILPRIORITY = 5
				   LEFT JOIN CUSTOMERADDRESSES BRCA ON BRCA.CUSTID = BR.CUSTID AND BRCA.CUSTADDRPRIORITY = 5
				   LEFT JOIN RMTPROVINCEVSCITY BRC ON BRC.PCCITY = BRCA.CUSTADDRCITY
				   LEFT JOIN RMTCOUNTRYVSPROVINCE BRS ON BRS.CPPROVINCE = BRC.PCPROVINCE
				   LEFT JOIN RMTFINANCETYPES RFT ON  FM.FINTYPE=RFT.FINTYPE
				   LEFT JOIN SMTDIVISIONDETAIL SMD ON RFT.FINDIVISION=SMD.DIVISIONCODE
				   WHERE STATUS='APPROVED' AND PAYMENTID NOT IN (SELECT DISBURSEMENT_ID FROM DISBURSEMENT_REQUESTS)
				   
				   UNION ALL
				   
				   SELECT PI. PAYMENTINSTRUCTIONID PAYMENTID,
				   PH.FINREFERENCE,
				   PH.PAYMENTTYPE CHANNEL, 
				   CASE WHEN PI.PAYMENTTYPE = 'NEFT' THEN 'N' WHEN PI.PAYMENTTYPE = 'RTGS' THEN 'R' WHEN PI.PAYMENTTYPE = 'DD' THEN 'D' WHEN PI.PAYMENTTYPE = 'CHEQUE' THEN 'C' ELSE  PI.PAYMENTTYPE END  DISBURSEMENT_TYPE,
				   PI.PAYMENTAMOUNT/CCY.CCYMINORCCYUNITS  AMTTOBERELEASED,
				   PI.POSTDATE DISBDATE, 
				   PI.POSTDATE LLDATE, 
				   PI.PAYABLELOC, 
				   PI.PRINTINGLOC, 
				   CU.CUSTCIF,            
				   CU.CUSTSHRTNAME,     
				   '' AS CUSTOMER_MOBILE,
				   CE.CUSTEMAIL       CUSTOMER_EMAIL,
				   CS.CPPROVINCENAME  CUSTOMER_STATE,
				   CC.PCCITYNAME      CUSTOMER_CITY,
				   ''                 CUSTOMER_ADDRESS1,
				   ''                 CUSTOMER_ADDRESS2,
				   ''                 CUSTOMER_ADDRESS3,
				   ''                 CUSTOMER_ADDRESS4,
				   ''                 CUSTOMER_ADDRESS5,
				   BD.BANKNAME,
				   BB.BRANCHCODE,
				   BB.BRANCHDESC,
				   BBRS.CPPROVINCENAME  BENFICIARY_BRANCH_STATE,
				   BBRC.PCCITYNAME      BENFICIARY_BRANCH_CITY,
				   BB.MICR              MICR_CODE,
				   BB.IFSC              IFSC_CODE,
				   PI.ACCOUNTNO BENEFICIARYACCNO,
				   CASE WHEN PI.PAYMENTTYPE = 'CHEQUE' OR  PI.PAYMENTTYPE = 'DD' THEN PI.FAVOURNAME ELSE PI.ACCTHOLDERNAME END BENEFICIARYNAME,
				   PI.PHONECOUNTRYCODE${call.concatenate}PI.PHONENUMBER AS BENEFICIARY_MOBILE,
				   BCE.CUSTEMAIL       BENFICIRY_EMAIL,
				   BRS.CPPROVINCENAME  BENFICIARY_STATE,
				   BRC.PCCITYNAME      BENFICIARY_CITY,
				   ''                  BENFICIARY_ADDRESS1,
				   ''                  BENFICIARY_ADDRESS2,
				   ''                  BENFICIARY_ADDRESS3,
				   ''                  BENFICIARY_ADDRESS4,
				   ''                  BENFICIARY_ADDRESS5,
				   ''				   PAYMENT_DETAIL1,
				   ''                  PAYMENT_DETAIL2,
				   ''                  PAYMENT_DETAIL3,
				   ''                  PAYMENT_DETAIL4,
				   ''                  PAYMENT_DETAIL5,
				   ''                  PAYMENT_DETAIL6,
				   ''                  PAYMENT_DETAIL7,     
				   PI.STATUS           STATUS, 
				   PI.REMARKS          REMARKS,
				   PI.PAYMENTTYPE      PAYMENTTYPE,
				   FM.FINTYPE,
				   PB.PARTNERBANKID,
				   PB.PARTNERBANKCODE,
				   PI.POSTDATE INPUTDATE, 
				   PB.ALWFILEDOWNLOAD,
				   PB.FILENAME,
				   FM.FINISACTIVE,
				    SMD.ENTITYCODE
				   FROM PAYMENTINSTRUCTIONS PI 
				   INNER JOIN PAYMENTHEADER PH ON PH.PAYMENTID = PI.PAYMENTID
				   INNER JOIN (select CUSTID, FINREFERENCE, FINTYPE,  FINISACTIVE from financemain union all select CUSTID, FINREFERENCE, FINTYPE,  FINISACTIVE from financemain_temp where QUICKDISB=1) FM on FM.FINREFERENCE = PH.FINREFERENCE 
				   INNER JOIN CUSTOMERS CU ON CU.CUSTID = FM.CUSTID
				   INNER JOIN RMTCURRENCIES CCY ON CCY.CCYCODE = PI.PAYMENTCCY
				   INNER JOIN PARTNERBANKS PB ON PB.PARTNERBANKID = PI.PARTNERBANKID
				   LEFT JOIN CUSTOMEREMAILS CE ON CE.CUSTID = CU.CUSTID AND CE.CUSTEMAILPRIORITY = 5
				   LEFT JOIN CUSTOMERADDRESSES CA ON CA.CUSTID = CE.CUSTID AND CA.CUSTADDRPRIORITY = 5
				   LEFT JOIN RMTPROVINCEVSCITY CC ON CC.PCCITY = CA.CUSTADDRCITY
				   LEFT JOIN RMTCOUNTRYVSPROVINCE CS ON CS.CPPROVINCE = CC.PCPROVINCE
				   LEFT JOIN CUSTOMERPHONENUMBERS CM ON CM.PHONECUSTID = CU.CUSTID AND CM.PHONETYPECODE = 'MOBILE1' AND CM.PHONETYPEPRIORITY = 5  
				   LEFT JOIN BANKBRANCHES BB ON BB.BANKBRANCHID = PI.BANKBRANCHID
				   LEFT JOIN BMTBANKDETAIL BD ON BD.BANKCODE = BB.BANKCODE
				   LEFT JOIN RMTPROVINCEVSCITY BBRC ON BBRC.PCCITY = BB.CITY
				   LEFT JOIN RMTCOUNTRYVSPROVINCE BBRS ON BBRS.CPPROVINCE = BBRC.PCPROVINCE
				   LEFT JOIN BENEFICIARY BR ON BR.BANKBRANCHID = PI.BANKBRANCHID AND BR.ACCNUMBER = PI.ACCOUNTNO  AND BR.CUSTID = FM.CUSTID
				   LEFT JOIN CUSTOMERS BC ON BC.CUSTID = BR.CUSTID
				   LEFT JOIN CUSTOMEREMAILS BCE ON BCE.CUSTID = CU.CUSTID AND BCE.CUSTEMAILPRIORITY = 5
				   LEFT JOIN CUSTOMERADDRESSES BRCA ON BRCA.CUSTID = BR.CUSTID AND BRCA.CUSTADDRPRIORITY = 5
				   LEFT JOIN RMTPROVINCEVSCITY BRC ON BRC.PCCITY = BRCA.CUSTADDRCITY
				   LEFT JOIN RMTCOUNTRYVSPROVINCE BRS ON BRS.CPPROVINCE = BRC.PCPROVINCE
				    LEFT JOIN RMTFINANCETYPES RFT ON  FM.FINTYPE=RFT.FINTYPE
				   LEFT JOIN SMTDIVISIONDETAIL SMD ON RFT.FINDIVISION=SMD.DIVISIONCODE
				   WHERE PI.STATUS='APPROVED' AND PI.PAYMENTINSTRUCTIONID NOT IN (SELECT DISBURSEMENT_ID FROM DISBURSEMENT_REQUESTS)
		</createView>
	</changeSet>
	<changeSet id="12" author="Jayant">
		<createView viewName="FINFEEDETAIL_TVIEW" replaceIfExists="true">
			SELECT  	T1.FeeID, T1.FinReference, T1.OriginationFee, T1.FinEvent, T1.FeeTypeID, T1.FeeSeq, T1.FeeOrder, T1.CalculatedAmount, T1.ActualAmount, T1.WaivedAmount, 
						T1.PaidAmount, T1.FeeScheduleMethod, T1.Terms, T1.RemainingFee, T1.PaymentRef, T1.CalculationType, T1.RuleCode, T1.FixedAmount, T1.Percentage, T1.CalculateOn,
						T1.AlwDeviation, T1.MaxWaiverPerc, T1.AlwModifyFee, T1.AlwModifyFeeSchdMthd, T1.VasReference, T1.Status, T1.TaxApplicable, T1.TaxComponent, T1.PaidAmountOriginal, T1.PaidAmountGST,
						T1.NetAmountOriginal, T1.NetAmountGST, T1.NetAmount, T1.RemainingFeeOriginal, T1.RemainingFeeGST, T1.ActualAmountOriginal,T1.ActualAmountGST, T1.FeeAmz, 
						T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId,
						T2.FeeTypeCode, T2.FeeTypeDesc
			FROM    	FinFeeDetail_Temp T1 
			LEFT JOIN 	FeeTypes T2 ON T1.FeeTypeID = T2.FeeTypeID
		</createView>
	</changeSet>

	<changeSet id="13" author="Jayant">
		<createView viewName="FINFEEDETAIL_VIEW" replaceIfExists="true">
			SELECT  	T1.FeeID, T1.FinReference, T1.OriginationFee, T1.FinEvent, T1.FeeTypeID, T1.FeeSeq, T1.FeeOrder, T1.CalculatedAmount, T1.ActualAmount, T1.WaivedAmount, 
						T1.PaidAmount, T1.FeeScheduleMethod, T1.Terms, T1.RemainingFee, T1.PaymentRef, T1.CalculationType, T1.RuleCode, T1.FixedAmount, T1.Percentage, T1.CalculateOn,
						T1.AlwDeviation, T1.MaxWaiverPerc, T1.AlwModifyFee, T1.AlwModifyFeeSchdMthd, T1.VasReference, T1.Status, T1.TaxApplicable, T1.TaxComponent, T1.PaidAmountOriginal, T1.PaidAmountGST,
						T1.NetAmountOriginal, T1.NetAmountGST, T1.NetAmount, T1.RemainingFeeOriginal, T1.RemainingFeeGST, T1.ActualAmountOriginal,T1.ActualAmountGST, T1.FeeAmz, 
						T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId,
						T2.FeeTypeCode, T2.FeeTypeDesc
			FROM    	FinFeeDetail_Temp T1 
			LEFT JOIN 	FeeTypes T2 ON T1.FeeTypeID = T2.FeeTypeID
			
			UNION ALL
			
			SELECT  	T1.FeeID, T1.FinReference, T1.OriginationFee, T1.FinEvent, T1.FeeTypeID, T1.FeeSeq, T1.FeeOrder, T1.CalculatedAmount, T1.ActualAmount, T1.WaivedAmount, 
						T1.PaidAmount, T1.FeeScheduleMethod, T1.Terms, T1.RemainingFee, T1.PaymentRef, T1.CalculationType, T1.RuleCode, T1.FixedAmount, T1.Percentage, T1.CalculateOn,
						T1.AlwDeviation, T1.MaxWaiverPerc, T1.AlwModifyFee, T1.AlwModifyFeeSchdMthd, T1.VasReference, T1.Status, T1.TaxApplicable, T1.TaxComponent, T1.PaidAmountOriginal, T1.PaidAmountGST,
						T1.NetAmountOriginal, T1.NetAmountGST, T1.NetAmount, T1.RemainingFeeOriginal, T1.RemainingFeeGST, T1.ActualAmountOriginal,T1.ActualAmountGST, T1.FeeAmz, 
						T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId,
						T2.FeeTypeCode, T2.FeeTypeDesc
			FROM    	FinFeeDetail T1 
			LEFT JOIN 	FeeTypes T2 ON T1.FeeTypeID = T2.FeeTypeID
			
			WHERE     	NOT EXISTS (SELECT 1 FROM FinFeeDetail_Temp WHERE FeeID = T1.FeeID)
		</createView>
	</changeSet>
	<changeSet id="14" author="Jayant">
		<createView viewName="WIFFINFEEDETAIL_VIEW"
			replaceIfExists="true">
			SELECT  	T1.FeeID, T1.FinReference, T1.FeeSeq, T1.OriginationFee, T1.FinEvent, T1.FeeTypeID, T1.FeeOrder, T1.CalculatedAmount, T1.ActualAmount, T1.WaivedAmount,
						T1.PaidAmount, T1.FeeScheduleMethod, T1.Terms, T1.RemainingFee, T1.PaymentRef, T1.CalculationType, T1.RuleCode, T1.FixedAmount, T1.Percentage, T1.CalculateOn,
						T1.AlwDeviation, T1.MaxWaiverPerc, T1.AlwModifyFee, T1.AlwModifyFeeSchdMthd, T1.VasReference, T1.Status, T1.TaxApplicable, T1.TaxComponent, T1.PaidAmountOriginal, T1.PaidAmountGST,
						T1.NetAmountOriginal, T1.NetAmountGST, T1.NetAmount, T1.RemainingFeeOriginal, T1.RemainingFeeGST, T1.ActualAmountOriginal, T1.ActualAmountGST,
						T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId,
						T2.FeeTypeCode, T2.FeeTypeDesc
			FROM    	WIFFinFeeDetail_Temp T1 
			LEFT JOIN 	FeeTypes T2 ON T1.FeeTypeID = T2.FeeTypeID
			
			UNION ALL
			
			SELECT  	T1.FeeID, T1.FinReference, T1.FeeSeq, T1.OriginationFee, T1.FinEvent, T1.FeeTypeID, T1.FeeOrder, T1.CalculatedAmount, T1.ActualAmount, T1.WaivedAmount,
						T1.PaidAmount, T1.FeeScheduleMethod, T1.Terms, T1.RemainingFee, T1.PaymentRef, T1.CalculationType, T1.RuleCode, T1.FixedAmount, T1.Percentage, T1.CalculateOn,
						T1.AlwDeviation, T1.MaxWaiverPerc, T1.AlwModifyFee, T1.AlwModifyFeeSchdMthd, T1.VasReference, T1.Status, T1.TaxApplicable, T1.TaxComponent, T1.PaidAmountOriginal, T1.PaidAmountGST,
						T1.NetAmountOriginal, T1.NetAmountGST, T1.NetAmount, T1.RemainingFeeOriginal, T1.RemainingFeeGST, T1.ActualAmountOriginal, T1.ActualAmountGST,
						T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId,
						T2.FeeTypeCode, T2.FeeTypeDesc
			FROM      	WIFFinFeeDetail T1 
			LEFT JOIN	FeeTypes T2 ON T1.FeeTypeID = T2.FeeTypeID
			WHERE     	NOT EXISTS (SELECT 1 FROM WIFFinFeeDetail_Temp
									WHERE FinReference = T1.FinReference AND OriginationFee = T1.OriginationFee AND FinEvent = T1.FinEvent AND FeeTypeID = T1.FeeTypeID)
		</createView>
	</changeSet>

	<changeSet id="15" author="VijayKumar.I">
		<createView viewName="FINFEEDETAIL_AVIEW" replaceIfExists="true">
			SELECT  	T1.FeeID, T1.FinReference, T1.OriginationFee, T1.FinEvent, T1.FeeTypeID, T1.FeeSeq, T1.FeeOrder, T1.CalculatedAmount, T1.ActualAmount, T1.WaivedAmount, 
						T1.PaidAmount, T1.FeeScheduleMethod, T1.Terms, T1.RemainingFee, T1.PaymentRef, T1.CalculationType, T1.RuleCode, T1.FixedAmount, T1.Percentage, T1.CalculateOn,
						T1.AlwDeviation, T1.MaxWaiverPerc, T1.AlwModifyFee, T1.AlwModifyFeeSchdMthd, T1.VasReference, T1.Status, T1.TaxApplicable, T1.TaxComponent, T1.PaidAmountOriginal, T1.PaidAmountGST,
						T1.NetAmountOriginal, T1.NetAmountGST, T1.NetAmount, T1.RemainingFeeOriginal, T1.RemainingFeeGST, T1.ActualAmountOriginal,T1.ActualAmountGST, T1.FeeAmz, 
						T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId,
						T2.FeeTypeCode, T2.FeeTypeDesc
			FROM    	FinFeeDetail T1 
			LEFT JOIN 	FeeTypes T2 ON T1.FeeTypeID = T2.FeeTypeID
		</createView>
	</changeSet>

	<changeSet id="15" author="Ganesh.p">
		<sql>
			INSERT INTO ErrorDetails VALUES('92006','EN','E','{0} is
			mandatory in the
			header.','','Approved','','','','','',0,current_timestamp,1000,0);
		</sql>
	</changeSet>

	<changeSet id="16" author="Ganesh.p">
		<sql>
			INSERT INTO ErrorDetails VALUES('92007','EN','E','{0} is invalid
			in header.','','Approved','','','','','',0,current_timestamp,1000,0);
		</sql>
	</changeSet>

	<changeSet id="17" author="Ganesh.p">
		<sql>
			INSERT INTO ErrorDetails VALUES('92008','EN','E','{0} in header
			should be {1}
			format.','','Approved','','','','','',0,current_timestamp,1000,0);
		</sql>
	</changeSet>

	<changeSet id="18" author="Vinay">
		<addColumn tableName="COLLATERALSTRUCTURE">
			<column name="valuationFrequency" type="varchar(5)"
				defaultValue="" />
			<column name="nextValuationDate" type="datetime" defaultValue="now()" />
			<column name="valuationPending" type="boolean" defaultValue="0" />
			<column name="queryId" type="number(18,0)" defaultValue="0" />
		</addColumn>
		<addColumn tableName="COLLATERALSTRUCTURE_TEMP">
			<column name="valuationFrequency" type="varchar(5)"
				defaultValue="" />
			<column name="nextValuationDate" type="datetime" defaultValue="now()" />
			<column name="valuationPending" type="boolean" defaultValue="0" />
			<column name="queryId" type="number(18,0)" defaultValue="0" />
		</addColumn>
	</changeSet>

	<changeSet id="19" author="Vinay">
		<createView viewName="COLLATERALSTRUCTURE_AVIEW"
			replaceIfExists="true">
			SELECT 	  			T1.CollateralType, T1.CollateralDesc, T1.LtvType, T1.LtvPercentage, T1.MarketableSecurities, T1.PreValidationReq,			
								T1.PostValidationReq, T1.CollateralLocReq, T1.CollateralValuatorReq, T1.Remarks, T1.AllowLtvWaiver,PreValidation, T1.PostValidation,				
								T1.MaxLtvWaiver, T1.ActualBlock, T1.SQLRule, T1.Fields, T1.Active, T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, 
								T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId, 
								T1.ValuationFrequency, T1.nextValuationDate, T1.valuationPending, T1.QueryId,
								T2.QueryCode, T2.QuerySubCode
			FROM 				CollateralStructure T1
			LEFT OUTER JOIN 	DedupParams T2 ON T1.QueryId = T2.QueryId and QueryModule = 'Collateral'
		</createView>

		<createView viewName="COLLATERALSTRUCTURE_VIEW"
			replaceIfExists="true">
			SELECT 	  			T1.CollateralType, T1.CollateralDesc, T1.LtvType, T1.LtvPercentage, T1.MarketableSecurities, T1.PreValidationReq,			
								T1.PostValidationReq, T1.CollateralLocReq, T1.CollateralValuatorReq, T1.Remarks, T1.AllowLtvWaiver,PreValidation, T1.PostValidation,				
								T1.MaxLtvWaiver, T1.ActualBlock, T1.SQLRule, T1.Fields, T1.Active, T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, 
								T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId, 
								T1.ValuationFrequency, T1.nextValuationDate, T1.valuationPending, T1.QueryId,
								T2.QueryCode, T2.QuerySubCode
			FROM 				CollateralStructure_Temp T1
			LEFT OUTER JOIN 	DedupParams T2 ON T1.QueryId = T2.QueryId and QueryModule = 'Collateral'
			
			UNION ALL
			
			SELECT 	  			T1.CollateralType, T1.CollateralDesc, T1.LtvType, T1.LtvPercentage, T1.MarketableSecurities, T1.PreValidationReq,			
								T1.PostValidationReq, T1.CollateralLocReq, T1.CollateralValuatorReq, T1.Remarks, T1.AllowLtvWaiver,PreValidation, T1.PostValidation,				
								T1.MaxLtvWaiver, T1.ActualBlock, T1.SQLRule, T1.Fields, T1.Active, T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, 
								T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId, 
								T1.ValuationFrequency, T1.nextValuationDate, T1.valuationPending, T1.QueryId,
								T2.QueryCode, T2.QuerySubCode
			FROM 				CollateralStructure T1
			LEFT OUTER JOIN 	DedupParams T2 ON T1.QueryId = T2.QueryId and QueryModule = 'Collateral'
			
			WHERE  NOT EXISTS  (SELECT 1 FROM CollateralStructure_Temp  WHERE CollateralType = T1.CollateralType)
		</createView>
	</changeSet>

	<changeSet id="20" author="Vinay">
		<sql>
			UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM
			SECRIGHTS);
			UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT
			MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);

			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3,
			'CollateralStructureDialog_CollateralDedup','CollateralStructureDialog',0,1000,CURRENT_TIMESTAMP,'
			',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3,
			'CollateralStructureDialog_ValuationFrequency','CollateralStructureDialog',0,1000,CURRENT_TIMESTAMP,'
			',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3,
			'CollateralStructureDialog_ValuationPending','CollateralStructureDialog',0,1000,CURRENT_TIMESTAMP,'
			',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3,
			'CollateralStructureDialog_NextValuationDate','CollateralStructureDialog',0,1000,CURRENT_TIMESTAMP,'
			',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;

			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM
			SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE
			GRPCODE='COLLATERALSTRUCTURE_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS
			WHERE RIGHTNAME='CollateralStructureDialog_CollateralDedup'), 1,
			0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO
			SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),
			(SELECT GRPID FROM SECGROUPS WHERE
			GRPCODE='COLLATERALSTRUCTURE_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS
			WHERE RIGHTNAME='CollateralStructureDialog_ValuationFrequency'), 1,
			0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO
			SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),
			(SELECT GRPID FROM SECGROUPS WHERE
			GRPCODE='COLLATERALSTRUCTURE_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS
			WHERE RIGHTNAME='CollateralStructureDialog_ValuationPending'), 1,
			0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO
			SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),
			(SELECT GRPID FROM SECGROUPS WHERE
			GRPCODE='COLLATERALSTRUCTURE_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS
			WHERE RIGHTNAME='CollateralStructureDialog_NextValuationDate'), 1,
			0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);

			UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS);
			UPDATE
			SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM
			SECGROUPRIGHTS);
		</sql>
	</changeSet>

	<changeSet id="21" author="Durga Prasad D">
		<sql>
			update SeqPinCodes set seqNo = (select max(pincodeid) from
			PinCodes);
		</sql>
	</changeSet>
	<changeSet id="22" author="Srikanth">
		<sql>
			delete from secrolegroups where grpid in (Select grpid from
			secgroups where grpcode='DISBURSEMENT_FILE_UPLOAD_DOWNLOAD') and
			roleid in (Select roleid from secroles where
			rolecd='DISBURSEMENT_FILE_UPLOAD_DOWNLOAD');
			insert into secrolegroups
			values((Select Max(rolegrpid)+1 from secrolegroups),(Select grpid
			from secgroups where
			grpcode='DISBURSEMENT_FILE_UPLOAD_DOWNLOAD'),(Select roleid from
			secroles where
			rolecd='DISBURSEMENT_FILE_UPLOAD_DOWNLOAD'),0,'1000','2018-04-23
			11:22:56','','','','','','','0');
		</sql>
	</changeSet>

	<changeSet id="22" author="Vinay">
		<sql>
			delete from SMTPARAMETERS where sysparmcode='FEESALLOWZRO';
			Insert into SMTPARAMETERS values ('FEESALLOWZERO','Fees allowed
			zero.','String','1','Y',1,0,null,null,'Fees allowed zero when
			calculated type is fixed amount',1,1000,'0001-07-26
			00:00:00.0','Approved',null,null,null,null,null,0);
		</sql>
	</changeSet>
	<changeSet id="23" author="Jayant">
		<sql>
			delete from secrolegroups where grpid in (Select grpid from
			secgroups where grpcode='DATAENGINE_IMPORT') and roleid in (Select
			roleid from secroles where rolecd='DATAENGINE_IMPORT');
			insert into
			secrolegroups values((Select Max(rolegrpid)+1 from
			secrolegroups),(Select grpid from secgroups where
			grpcode='DATAENGINE_IMPORT'),(Select roleid from secroles where
			rolecd='DATAENGINE_IMPORT'),0,'1000','2018-04-23
			11:22:56','','','','','','','0');
		</sql>
	</changeSet>
	<changeSet id="23" author="Vinay">
		<addColumn tableName="FinanceMain">
			<column name="EligibilityMethod" defaultValue="" type="VARCHAR(4)" />
		</addColumn>
		<addColumn tableName="FinanceMain_PA">
			<column name="EligibilityMethod" defaultValue="" type="VARCHAR(4)" />
		</addColumn>
		<addColumn tableName="FinanceMain_Temp">
			<column name="EligibilityMethod" defaultValue="" type="VARCHAR(4)" />
		</addColumn>
	</changeSet>

	<changeSet id="24" author="Vinay">
		<createView viewName="financemain_view" replaceIfExists="true">
			SELECT t1.finreference,
		    t1.investmentref,
		    t1.numberofterms,
		    t1.grcperiodenddate,
		    t1.allowgrcperiod,
		    t1.gracebaserate,
		    t1.gracespecialrate,
		    t1.grcpftrate,
		    t1.grcpftfrq,
		    t1.nextgrcpftdate,
		    t1.allowgrcpftrvw,
		    t1.grcpftrvwfrq,
		    t1.nextgrcpftrvwdate,
		    t1.allowgrccpz,
		    t1.grccpzfrq,
		    t1.nextgrccpzdate,
		    t1.repaybaserate,
		    t1.repayspecialrate,
		    t1.repayprofitrate,
		    t1.repayfrq,
		    t1.nextrepaydate,
		    t1.repaypftfrq,
		    t1.nextrepaypftdate,
		    t1.allowrepayrvw,
		    t1.repayrvwfrq,
		    t1.nextrepayrvwdate,
		    t1.allowrepaycpz,
		    t1.repaycpzfrq,
		    t1.nextrepaycpzdate,
		    t1.maturitydate,
		    t1.cpzatgraceend,
		    t1.downpayment,
		    t1.graceflatamount,
		    t1.reqrepayamount,
		    t1.totalprofit,
		    t1.totalcpz,
		    t1.totalgrosspft,
		    t1.totalgrossgrcpft,
		    t1.totalgracepft,
		    t1.totalgracecpz,
		    t1.grcratebasis,
		    t1.repayratebasis,
		    t1.fintype,
		    t1.finremarks,
		    t1.finccy,
		    t1.schedulemethod,
		    t1.profitdaysbasis,
		    t1.reqmaturity,
		    t1.calterms,
		    t1.calmaturity,
		    t1.firstrepay,
		    t1.lastrepay,
		    t1.finstartdate,
		    t1.finamount,
		    t1.finamount + t1.feechargeamt - t1.downpayment AS lovdescfinancingamount,
		    t1.finrepaymentamount,
		    t1.custid,
		    t1.defferments,
		    t1.plandefercount,
		    t1.finbranch,
		    t1.finsourceid,
		    t1.alloweddefrpychange,
		    t1.availeddefrpychange,
		    t1.alloweddeffrqchange,
		    t1.availeddeffrqchange,
		    t1.recaltype,
		    t1.finassetvalue,
		    t1.disbaccountid,
		    t1.repayaccountid,
		    t1.finisactive,
		    t1.limitvalid,
		    t1.overridelimit,
		    t1.securitydeposit,
		    t1.version,
		    t1.lastmntby,
		    t1.lastmnton,
		    t1.recordstatus,
		    t1.rolecode,
		    t1.nextrolecode,
		    t1.taskid,
		    t1.nexttaskid,
		    t1.recordtype,
		    t1.workflowid,
		    t7.fintypedesc AS lovdescfintypename,
		    t7.finmaxamount AS lovdescfinmaxamt,
		    t7.finminamount AS lovdescfinminamount,
		    t1.mindownpayperc,
		    t7.finisalwdifferment AS lovdescfinalwdeferment,
		    t7.finisdwpayrequired AS lovdescdwnpayreq,
		    t7.finmaxdifferment AS lovdescfinmaxdifferment,
		    t12.branchdesc AS lovdescfinbranchname,
		    t1.lastrepaydate,
		    t1.lastrepaypftdate,
		    t1.lastrepayrvwdate,
		    t1.lastrepaycpzdate,
		    t1.allowgrcrepay,
		    t1.grcschdmthd,
		    t1.grcmargin,
		    t1.repaymargin,
		    t1.fincurrassetvalue,
		    t1.fincommitmentref,
		    t1.finlimitref,
		    t1.depreciationfrq,
		    t1.fincontractdate,
		    t1.nextdepdate,
		    t1.lastdepdate,
		    t1.finaccount,
		    t1.fincustpftaccount,
		    t17.acrtilllbd AS lovdescaccruedtilllbd,
		    t7.finrvwrateapplfor,
		    t1.totalrepayamt,
		    t1.closingstatus,
		    t1.finapproveddate,
		    t1.feechargeamt,
		    t1.blacklisted,
		    t1.finrepaypftonfrq,
		    t1.anualizedpercrate,
		    t1.effectiverateofreturn,
		    t1.migratedfinance,
		    t1.schedulemaintained,
		    t1.scheduleregenerated,
		    t1.finpurpose,
		    t1.finstatus,
		    t1.finstsreason,
		    t1.initiateuser,
		    t1.bankname,
		    t1.iban,
		    t1.accounttype,
		    t1.ddareferenceno,
		    t7.finscheduleon AS lovdescfinscheduleon,
		    t1.custdsr,
		    t1.jointaccount,
		    t1.jointcustid,
		    t1.downpaybank,
		    t1.downpaysupl,
		    t1.downpayaccount,
		    t1.securitycollateral,
		    t1.approved,
		    t1.discrepancy,
		    t1.limitapproved,
		    t1.graceterms,
		    t7.findivision AS lovdescfindivision,
		    t1.rcdmaintainsts,
		    t1.finrepaymethod,
		    t1.grcprofitdaysbasis,
		    t1.stepfinance,
		    t1.steptype,
		    t1.steppolicy,
		    t1.alwmanualsteps,
		    t1.noofsteps,
		    t1.linkedfinref,
		    t1.nextuserid,
		    t1.priority,
		    t24.policydesc AS lovdescsteppolicyname,
		    t1.grcminrate,
		    t1.grcmaxrate,
		    t1.rpyminrate,
		    t1.rpymaxrate,
		    t1.deviationapproval,
		    t1.manualschedule,
		    t1.takeoverfinance,
		    t1.grcadvbaserate,
		    t1.grcadvmargin,
		    t1.grcadvpftrate,
		    t1.rpyadvbaserate,
		    t1.rpyadvmargin,
		    t1.rpyadvpftrate,
		    t1.supplementrent,
		    t1.increasedcost,
		    t1.rolloverfrq,
		    t1.nextrolloverdate,
		    t27.custstsdescription,
		    t1.shariastatus,
		    t1.initiatedate,
		    t1.finpreapprovedref,
		    t1.mmaid,
		    t1.accountsofficer,
		    t1.feeaccountid,
		    t1.fincancelac,
		    t28.dealername AS lovdescaccountsofficer,
		    t28.dealercity AS lovdescsourcecity,
		    t1.dsacode,
		    t30.rofficerdesc AS dsacodedesc,
		    t1.tdsapplicable,
		    t1.mandateid,
		    t1.droplinefrq,
		    t1.firstdroplinedate,
		    t1.pftservicingodlimit,
		    t1.insuranceamt,
		    t1.deductinsdisb,
		    t1.alwbpi,
		    t1.bpitreatment,
		    t1.planemihalw,
		    t1.planemihmethod,
		    t1.planemihmaxperyear,
		    t1.planemihmax,
		    t1.planemihlockperiod,
		    t1.planemicpz,
		    t1.calroundingmode,
		    t1.alwmultidisb,
		    t1.applicationno,
		    t1.referralid,
		    t33.rofficerdesc AS referraliddesc,
		    t1.dmacode,
		    t34.rofficerdesc AS dmacodedesc,
		    t1.salesdepartment,
		    t35.gendeptdesc AS salesdepartmentdesc,
		    t1.quickdisb,
		    t1.wifreference,
		    t1.unplanemihlockperiod,
		    t1.unplanemicpz,
		    t1.reagecpz,
		    t1.maxunplannedemi,
		    t1.maxreageholidays,
		    t1.availedunplanemi,
		    t1.availedreageh,
		    t1.bpiamount,
		    t1.deductfeedisb,
		    t1.rvwrateapplfor,
		    t1.schcalonrvw,
		    t1.pastduepftcalmthd,
		    t1.pastduepftmargin,
		    t1.droppingmethod,
		    t1.ratechganyday,
		    t1.promotioncode,
		    t1.restructureloan,
		    t1.oldfinreference,
		    t1.reagebucket,
		    t1.fincategory,
		    t1.productcategory,
		    t1.roundingtarget,
		    t36.entitycode AS lovdescentitycode,
			t1.eligibilitymethod
		   FROM financemain_temp t1
		     JOIN rmtfinancetypes t7 ON t1.fintype = t7.fintype
		     LEFT JOIN rmtbranches t12 ON t1.finbranch = t12.branchcode
		     LEFT JOIN finpftdetails t17 ON t17.finreference = t1.finreference
		     LEFT JOIN steppolicyheader t24 ON t1.steppolicy = t24.policycode
		     LEFT JOIN bmtcuststatuscodes t27 ON t1.finstatus = t27.custstscode
		     LEFT JOIN amtvehicledealer t28 ON t1.accountsofficer = t28.dealerid
		     LEFT JOIN relationshipofficers t30 ON t1.dsacode = t30.rofficercode
		     LEFT JOIN relationshipofficers t33 ON t1.referralid = t33.rofficercode
		     LEFT JOIN relationshipofficers t34 ON t1.dmacode = t34.rofficercode
		     LEFT JOIN rmtgendepartments t35 ON t1.salesdepartment = t35.gendepartment
		     LEFT JOIN smtdivisiondetail t36 ON t7.findivision = t36.divisioncode
		UNION ALL
		 SELECT t1.finreference,
		    t1.investmentref,
		    t1.numberofterms,
		    t1.grcperiodenddate,
		    t1.allowgrcperiod,
		    t1.gracebaserate,
		    t1.gracespecialrate,
		    t1.grcpftrate,
		    t1.grcpftfrq,
		    t1.nextgrcpftdate,
		    t1.allowgrcpftrvw,
		    t1.grcpftrvwfrq,
		    t1.nextgrcpftrvwdate,
		    t1.allowgrccpz,
		    t1.grccpzfrq,
		    t1.nextgrccpzdate,
		    t1.repaybaserate,
		    t1.repayspecialrate,
		    t1.repayprofitrate,
		    t1.repayfrq,
		    t1.nextrepaydate,
		    t1.repaypftfrq,
		    t1.nextrepaypftdate,
		    t1.allowrepayrvw,
		    t1.repayrvwfrq,
		    t1.nextrepayrvwdate,
		    t1.allowrepaycpz,
		    t1.repaycpzfrq,
		    t1.nextrepaycpzdate,
		    t1.maturitydate,
		    t1.cpzatgraceend,
		    t1.downpayment,
		    t1.graceflatamount,
		    t1.reqrepayamount,
		    t1.totalprofit,
		    t1.totalcpz,
		    t1.totalgrosspft,
		    t1.totalgrossgrcpft,
		    t1.totalgracepft,
		    t1.totalgracecpz,
		    t1.grcratebasis,
		    t1.repayratebasis,
		    t1.fintype,
		    t1.finremarks,
		    t1.finccy,
		    t1.schedulemethod,
		    t1.profitdaysbasis,
		    t1.reqmaturity,
		    t1.calterms,
		    t1.calmaturity,
		    t1.firstrepay,
		    t1.lastrepay,
		    t1.finstartdate,
		    t1.finamount,
		    t1.finamount + t1.feechargeamt - t1.downpayment AS lovdescfinancingamount,
		    t1.finrepaymentamount,
		    t1.custid,
		    t1.defferments,
		    t1.plandefercount,
		    t1.finbranch,
		    t1.finsourceid,
		    t1.alloweddefrpychange,
		    t1.availeddefrpychange,
		    t1.alloweddeffrqchange,
		    t1.availeddeffrqchange,
		    t1.recaltype,
		    t1.finassetvalue,
		    t1.disbaccountid,
		    t1.repayaccountid,
		    t1.finisactive,
		    t1.limitvalid,
		    t1.overridelimit,
		    t1.securitydeposit,
		    t1.version,
		    t1.lastmntby,
		    t1.lastmnton,
		    t1.recordstatus,
		    t1.rolecode,
		    t1.nextrolecode,
		    t1.taskid,
		    t1.nexttaskid,
		    t1.recordtype,
		    t1.workflowid,
		    t7.fintypedesc AS lovdescfintypename,
		    t7.finmaxamount AS lovdescfinmaxamt,
		    t7.finminamount AS lovdescfinminamount,
		    t1.mindownpayperc,
		    t7.finisalwdifferment AS lovdescfinalwdeferment,
		    t7.finisdwpayrequired AS lovdescdwnpayreq,
		    t7.finmaxdifferment AS lovdescfinmaxdifferment,
		    t12.branchdesc AS lovdescfinbranchname,
		    t1.lastrepaydate,
		    t1.lastrepaypftdate,
		    t1.lastrepayrvwdate,
		    t1.lastrepaycpzdate,
		    t1.allowgrcrepay,
		    t1.grcschdmthd,
		    t1.grcmargin,
		    t1.repaymargin,
		    t1.fincurrassetvalue,
		    t1.fincommitmentref,
		    t1.finlimitref,
		    t1.depreciationfrq,
		    t1.fincontractdate,
		    t1.nextdepdate,
		    t1.lastdepdate,
		    t1.finaccount,
		    t1.fincustpftaccount,
		    t17.acrtilllbd AS lovdescaccruedtilllbd,
		    t7.finrvwrateapplfor,
		    t1.totalrepayamt,
		    t1.closingstatus,
		    t1.finapproveddate,
		    t1.feechargeamt,
		    t1.blacklisted,
		    t1.finrepaypftonfrq,
		    t1.anualizedpercrate,
		    t1.effectiverateofreturn,
		    t1.migratedfinance,
		    t1.schedulemaintained,
		    t1.scheduleregenerated,
		    t1.finpurpose,
		    t1.finstatus,
		    t1.finstsreason,
		    t1.initiateuser,
		    t1.bankname,
		    t1.iban,
		    t1.accounttype,
		    t1.ddareferenceno,
		    t7.finscheduleon AS lovdescfinscheduleon,
		    t1.custdsr,
		    t1.jointaccount,
		    t1.jointcustid,
		    t1.downpaybank,
		    t1.downpaysupl,
		    t1.downpayaccount,
		    t1.securitycollateral,
		    t1.approved,
		    t1.discrepancy,
		    t1.limitapproved,
		    t1.graceterms,
		    t7.findivision AS lovdescfindivision,
		    t1.rcdmaintainsts,
		    t1.finrepaymethod,
		    t1.grcprofitdaysbasis,
		    t1.stepfinance,
		    t1.steptype,
		    t1.steppolicy,
		    t1.alwmanualsteps,
		    t1.noofsteps,
		    t1.linkedfinref,
		    t1.nextuserid,
		    t1.priority,
		    t24.policydesc AS lovdescsteppolicyname,
		    t1.grcminrate,
		    t1.grcmaxrate,
		    t1.rpyminrate,
		    t1.rpymaxrate,
		    t1.deviationapproval,
		    t1.manualschedule,
		    t1.takeoverfinance,
		    t1.grcadvbaserate,
		    t1.grcadvmargin,
		    t1.grcadvpftrate,
		    t1.rpyadvbaserate,
		    t1.rpyadvmargin,
		    t1.rpyadvpftrate,
		    t1.supplementrent,
		    t1.increasedcost,
		    t1.rolloverfrq,
		    t1.nextrolloverdate,
		    t27.custstsdescription,
		    t1.shariastatus,
		    t1.initiatedate,
		    t1.finpreapprovedref,
		    t1.mmaid,
		    t1.accountsofficer,
		    t1.feeaccountid,
		    t1.fincancelac,
		    t28.dealername AS lovdescaccountsofficer,
		    t28.dealercity AS lovdescsourcecity,
		    t1.dsacode,
		    t30.rofficerdesc AS dsacodedesc,
		    t1.tdsapplicable,
		    t1.mandateid,
		    t1.droplinefrq,
		    t1.firstdroplinedate,
		    t1.pftservicingodlimit,
		    t1.insuranceamt,
		    t1.deductinsdisb,
		    t1.alwbpi,
		    t1.bpitreatment,
		    t1.planemihalw,
		    t1.planemihmethod,
		    t1.planemihmaxperyear,
		    t1.planemihmax,
		    t1.planemihlockperiod,
		    t1.planemicpz,
		    t1.calroundingmode,
		    t1.alwmultidisb,
		    t1.applicationno,
		    t1.referralid,
		    t33.rofficerdesc AS referraliddesc,
		    t1.dmacode,
		    t34.rofficerdesc AS dmacodedesc,
		    t1.salesdepartment,
		    t35.gendeptdesc AS salesdepartmentdesc,
		    t1.quickdisb,
		    t1.wifreference,
		    t1.unplanemihlockperiod,
		    t1.unplanemicpz,
		    t1.reagecpz,
		    t1.maxunplannedemi,
		    t1.maxreageholidays,
		    t1.availedunplanemi,
		    t1.availedreageh,
		    t1.bpiamount,
		    t1.deductfeedisb,
		    t1.rvwrateapplfor,
		    t1.schcalonrvw,
		    t1.pastduepftcalmthd,
		    t1.pastduepftmargin,
		    t1.droppingmethod,
		    t1.ratechganyday,
		    t1.promotioncode,
		    t1.restructureloan,
		    t1.oldfinreference,
		    t1.reagebucket,
		    t1.fincategory,
		    t1.productcategory,
		    t1.roundingtarget,
		    t36.entitycode AS lovdescentitycode,
			t1.eligibilitymethod
		   FROM financemain t1
		     JOIN rmtfinancetypes t7 ON t1.fintype = t7.fintype
		     LEFT JOIN rmtbranches t12 ON t1.finbranch = t12.branchcode
		     LEFT JOIN finpftdetails t17 ON t17.finreference = t1.finreference
		     LEFT JOIN steppolicyheader t24 ON t1.steppolicy = t24.policycode
		     LEFT JOIN bmtcuststatuscodes t27 ON t1.finstatus = t27.custstscode
		     LEFT JOIN amtvehicledealer t28 ON t1.accountsofficer = t28.dealerid
		     LEFT JOIN relationshipofficers t30 ON t1.dsacode = t30.rofficercode
		     LEFT JOIN relationshipofficers t33 ON t1.referralid = t33.rofficercode
		     LEFT JOIN relationshipofficers t34 ON t1.dmacode = t34.rofficercode
		     LEFT JOIN rmtgendepartments t35 ON t1.salesdepartment = t35.gendepartment
		     LEFT JOIN smtdivisiondetail t36 ON t7.findivision = t36.divisioncode
		  WHERE NOT (EXISTS ( SELECT 1 AS expr1
		           FROM financemain_temp
		          WHERE financemain_temp.finreference = t1.finreference))
		</createView>

		<createView viewName="financemain_tview" replaceIfExists="true">
			 	SELECT t1.finreference,
			    t1.investmentref,
			    t1.numberofterms,
			    t1.grcperiodenddate,
			    t1.allowgrcperiod,
			    t1.gracebaserate,
			    t1.gracespecialrate,
			    t1.grcpftrate,
			    t1.grcpftfrq,
			    t1.nextgrcpftdate,
			    t1.allowgrcpftrvw,
			    t1.grcpftrvwfrq,
			    t1.nextgrcpftrvwdate,
			    t1.allowgrccpz,
			    t1.grccpzfrq,
			    t1.nextgrccpzdate,
			    t1.repaybaserate,
			    t1.repayspecialrate,
			    t1.repayprofitrate,
			    t1.repayfrq,
			    t1.nextrepaydate,
			    t1.repaypftfrq,
			    t1.nextrepaypftdate,
			    t1.allowrepayrvw,
			    t1.repayrvwfrq,
			    t1.nextrepayrvwdate,
			    t1.allowrepaycpz,
			    t1.repaycpzfrq,
			    t1.nextrepaycpzdate,
			    t1.maturitydate,
			    t1.cpzatgraceend,
			    t1.downpayment,
			    t1.graceflatamount,
			    t1.reqrepayamount,
			    t1.totalprofit,
			    t1.totalcpz,
			    t1.totalgrosspft,
			    t1.totalgrossgrcpft,
			    t1.totalgracepft,
			    t1.totalgracecpz,
			    t1.grcratebasis,
			    t1.repayratebasis,
			    t1.fintype,
			    t1.finremarks,
			    t1.finccy,
			    t1.schedulemethod,
			    t1.profitdaysbasis,
			    t1.reqmaturity,
			    t1.calterms,
			    t1.calmaturity,
			    t1.firstrepay,
			    t1.lastrepay,
			    t1.finstartdate,
			    t1.finamount,
			    t1.finrepaymentamount,
			    t1.custid,
			    t1.defferments,
			    t1.plandefercount,
			    t1.finbranch,
			    t1.finsourceid,
			    t1.alloweddefrpychange,
			    t1.availeddefrpychange,
			    t1.alloweddeffrqchange,
			    t1.availeddeffrqchange,
			    t1.recaltype,
			    t1.finassetvalue,
			    t1.disbaccountid,
			    t1.repayaccountid,
			    t1.finisactive,
			    t1.limitvalid,
			    t1.overridelimit,
			    t1.securitydeposit,
			    t1.version,
			    t1.lastmntby,
			    t1.lastmnton,
			    t1.recordstatus,
			    t1.rolecode,
			    t1.nextrolecode,
			    t1.taskid,
			    t1.nexttaskid,
			    t1.recordtype,
			    t1.workflowid,
			    t2.fintypedesc AS lovdescfintypename,
			    t2.finmaxamount AS lovdescfinmaxamt,
			    t2.finminamount AS lovdescfinminamount,
			    t1.mindownpayperc,
			    t4.branchdesc AS lovdescfinbranchname,
			    t1.lastrepaydate,
			    t1.lastrepaypftdate,
			    t1.lastrepayrvwdate,
			    t1.lastrepaycpzdate,
			    t1.allowgrcrepay,
			    t1.grcschdmthd,
			    t1.grcmargin,
			    t1.repaymargin,
			    t1.fincurrassetvalue,
			    t1.fincommitmentref,
			    t1.finlimitref,
			    t1.depreciationfrq,
			    t1.fincontractdate,
			    t1.nextdepdate,
			    t1.lastdepdate,
			    t1.finaccount,
			    t1.fincustpftaccount,
			    t1.totalrepayamt,
			    t1.finapproveddate,
			    t1.feechargeamt,
			    t1.blacklisted,
			    t1.finrepaypftonfrq,
			    t1.anualizedpercrate,
			    t1.effectiverateofreturn,
			    t1.migratedfinance,
			    t1.schedulemaintained,
			    t1.scheduleregenerated,
			    t1.finpurpose,
			    t1.finstatus,
			    t1.finstsreason,
			    t1.initiateuser,
			    t1.bankname,
			    t1.iban,
			    t1.accounttype,
			    t1.ddareferenceno,
			    t1.custdsr,
			    t1.jointaccount,
			    t1.jointcustid,
			    t1.downpaybank,
			    t1.downpaysupl,
			    t1.downpayaccount,
			    t1.securitycollateral,
			    t1.approved,
			    t1.discrepancy,
			    t1.limitapproved,
			    t1.graceterms,
			    t2.findivision AS lovdescfindivision,
			    t1.rcdmaintainsts,
			    t1.finrepaymethod,
			    t1.grcprofitdaysbasis,
			    t1.stepfinance,
			    t1.steptype,
			    t1.steppolicy,
			    t1.alwmanualsteps,
			    t1.noofsteps,
			    t1.linkedfinref,
			    t1.nextuserid,
			    t1.priority,
			    t5.policydesc AS lovdescsteppolicyname,
			    t1.grcminrate,
			    t1.grcmaxrate,
			    t1.rpyminrate,
			    t1.rpymaxrate,
			    t1.deviationapproval,
			    t1.manualschedule,
			    t1.takeoverfinance,
			    t1.grcadvbaserate,
			    t1.grcadvmargin,
			    t1.grcadvpftrate,
			    t1.rpyadvbaserate,
			    t1.rpyadvmargin,
			    t1.rpyadvpftrate,
			    t1.supplementrent,
			    t1.increasedcost,
			    t1.creditinsamt,
			    t1.rolloverfrq,
			    t1.nextrolloverdate,
			    t1.shariastatus,
			    t1.initiatedate,
			    t1.finpreapprovedref,
			    t1.mmaid,
			    t1.accountsofficer,
			    t1.feeaccountid,
			    t1.fincancelac,
			    t6.dealername AS lovdescaccountsofficer,
			    t6.dealercity AS lovdescsourcecity,
			    t1.dsacode,
			    t7.rofficerdesc AS dsacodedesc,
			    t1.tdsapplicable,
			    t1.mandateid,
			    t1.droplinefrq,
			    t1.firstdroplinedate,
			    t1.pftservicingodlimit,
			    t1.insuranceamt,
			    t1.deductinsdisb,
			    t1.alwbpi,
			    t1.bpitreatment,
			    t1.planemihalw,
			    t1.planemihmethod,
			    t1.planemihmaxperyear,
			    t1.planemihmax,
			    t1.planemihlockperiod,
			    t1.planemicpz,
			    t1.calroundingmode,
			    t1.alwmultidisb,
			    t1.applicationno,
			    t1.referralid,
			    t8.rofficerdesc AS referraliddesc,
			    t1.dmacode,
			    t9.rofficerdesc AS dmacodedesc,
			    t1.salesdepartment,
			    t10.gendeptdesc AS salesdepartmentdesc,
			    t1.quickdisb,
			    t1.wifreference,
			    t1.unplanemihlockperiod,
			    t1.unplanemicpz,
			    t1.reagecpz,
			    t1.maxunplannedemi,
			    t1.maxreageholidays,
			    t1.availedunplanemi,
			    t1.availedreageh,
			    t1.bpiamount,
			    t1.deductfeedisb,
			    t1.rvwrateapplfor,
			    t1.schcalonrvw,
			    t1.pastduepftcalmthd,
			    t1.pastduepftmargin,
			    t1.droppingmethod,
			    t1.ratechganyday,
			    t1.promotioncode,
			    t1.restructureloan,
			    t1.oldfinreference,
			    t1.reagebucket,
			    t1.fincategory,
			    t1.productcategory,
			    t1.roundingtarget,
			    t11.entitycode AS lovdescentitycode,
				t1.eligibilitymethod
			   FROM financemain_temp t1
			     JOIN rmtfinancetypes t2 ON t1.fintype = t2.fintype
			     JOIN rmtbranches t4 ON t1.finbranch = t4.branchcode
			     LEFT JOIN steppolicyheader t5 ON t1.steppolicy = t5.policycode
			     LEFT JOIN amtvehicledealer t6 ON t1.accountsofficer = t6.dealerid
			     LEFT JOIN relationshipofficers t7 ON t1.dsacode = t7.rofficercode
			     LEFT JOIN relationshipofficers t8 ON t1.referralid = t8.rofficercode
			     LEFT JOIN relationshipofficers t9 ON t1.dmacode = t9.rofficercode
			     LEFT JOIN rmtgendepartments t10 ON t1.salesdepartment = t10.gendepartment
			     LEFT JOIN smtdivisiondetail t11 ON t2.findivision = t11.divisioncode
		</createView>

		<createView viewName="financemain_aview" replaceIfExists="true">
			SELECT t1.finreference,
		    t1.numberofterms,
		    t1.grcperiodenddate,
		    t1.allowgrcperiod,
		    t1.gracebaserate,
		    t1.gracespecialrate,
		    t1.grcpftrate,
		    t1.grcpftfrq,
		    t1.nextgrcpftdate,
		    t1.allowgrcpftrvw,
		    t1.grcpftrvwfrq,
		    t1.nextgrcpftrvwdate,
		    t1.allowgrccpz,
		    t1.grccpzfrq,
		    t1.nextgrccpzdate,
		    t1.repaybaserate,
		    t1.repayspecialrate,
		    t1.repayprofitrate,
		    t1.repayfrq,
		    t1.nextrepaydate,
		    t1.repaypftfrq,
		    t1.nextrepaypftdate,
		    t1.allowrepayrvw,
		    t1.repayrvwfrq,
		    t1.nextrepayrvwdate,
		    t1.allowrepaycpz,
		    t1.repaycpzfrq,
		    t1.nextrepaycpzdate,
		    t1.maturitydate,
		    t1.cpzatgraceend,
		    t1.downpayment,
		    t1.graceflatamount,
		    t1.reqrepayamount,
		    t1.totalprofit,
		    t1.totalcpz,
		    t1.totalgrosspft,
		    t1.totalgrossgrcpft,
		    t1.totalgracepft,
		    t1.totalgracecpz,
		    t1.grcratebasis,
		    t1.repayratebasis,
		    t1.fintype,
		    t1.finremarks,
		    t1.finccy,
		    t1.schedulemethod,
		    t1.profitdaysbasis,
		    t1.reqmaturity,
		    t1.calterms,
		    t1.calmaturity,
		    t1.firstrepay,
		    t1.lastrepay,
		    t1.finstartdate,
		    t1.finamount,
		    t1.finamount + t1.feechargeamt - t1.downpayment AS lovdescfinancingamount,
		    t1.finrepaymentamount,
		    t1.custid,
		    t1.defferments,
		    t1.plandefercount,
		    t1.finbranch,
		    t1.finsourceid,
		    t1.alloweddefrpychange,
		    t1.availeddefrpychange,
		    t1.alloweddeffrqchange,
		    t1.availeddeffrqchange,
		    t1.recaltype,
		    t1.finassetvalue,
		    t1.disbaccountid,
		    t1.repayaccountid,
		    t1.finisactive,
		    t1.limitvalid,
		    t1.overridelimit,
		    t1.securitydeposit,
		    t1.version,
		    t1.lastmntby,
		    t1.lastmnton,
		    t1.recordstatus,
		    t1.rolecode,
		    t1.nextrolecode,
		    t1.taskid,
		    t1.nexttaskid,
		    t1.recordtype,
		    t1.workflowid,
		    t7.fintypedesc AS lovdescfintypename,
		    t7.finmaxamount AS lovdescfinmaxamt,
		    t7.finminamount AS lovdescfinminamount,
		    t1.mindownpayperc,
		    t7.finisalwdifferment AS lovdescfinalwdeferment,
		    t7.finisdwpayrequired AS lovdescdwnpayreq,
		    t7.finmaxdifferment AS lovdescfinmaxdifferment,
		    t12.branchdesc AS lovdescfinbranchname,
		    t1.lastrepaydate,
		    t1.lastrepaypftdate,
		    t1.lastrepayrvwdate,
		    t1.lastrepaycpzdate,
		    t1.allowgrcrepay,
		    t1.grcschdmthd,
		    t1.grcmargin,
		    t1.repaymargin,
		    t1.fincurrassetvalue,
		    t1.fincommitmentref,
		    t1.finlimitref,
		    t1.depreciationfrq,
		    t1.fincontractdate,
		    t1.nextdepdate,
		    t1.lastdepdate,
		    t1.finaccount,
		    t1.fincustpftaccount,
		    t17.acrtilllbd AS lovdescaccruedtilllbd,
		    t7.finrvwrateapplfor,
		    t1.totalrepayamt,
		    t1.closingstatus,
		    t1.finapproveddate,
		    t1.feechargeamt,
		    t1.blacklisted,
		    t1.finrepaypftonfrq,
		    t1.anualizedpercrate,
		    t1.effectiverateofreturn,
		    t1.migratedfinance,
		    t1.schedulemaintained,
		    t1.scheduleregenerated,
		    t1.finpurpose,
		    t1.finstatus,
		    t1.finstsreason,
		    t1.initiateuser,
		    t1.bankname,
		    t1.iban,
		    t1.accounttype,
		    t1.ddareferenceno,
		    t7.finscheduleon AS lovdescfinscheduleon,
		    t1.custdsr,
		    t1.jointaccount,
		    t1.jointcustid,
		    t1.downpaybank,
		    t1.downpaysupl,
		    t1.downpayaccount,
		    t1.securitycollateral,
		    t1.approved,
		    t1.discrepancy,
		    t1.limitapproved,
		    t1.investmentref,
		    t1.graceterms,
		    t7.findivision AS lovdescfindivision,
		    t1.rcdmaintainsts,
		    t1.finrepaymethod,
		    t1.grcprofitdaysbasis,
		    t1.stepfinance,
		    t1.steptype,
		    t1.steppolicy,
		    t1.alwmanualsteps,
		    t1.noofsteps,
		    t1.linkedfinref,
		    t1.nextuserid,
		    t1.priority,
		    t24.policydesc AS lovdescsteppolicyname,
		    t1.grcminrate,
		    t1.grcmaxrate,
		    t1.rpyminrate,
		    t1.rpymaxrate,
		    t1.deviationapproval,
		    t1.manualschedule,
		    t1.takeoverfinance,
		    t1.grcadvbaserate,
		    t1.grcadvmargin,
		    t1.grcadvpftrate,
		    t1.rpyadvbaserate,
		    t1.rpyadvmargin,
		    t1.rpyadvpftrate,
		    t1.supplementrent,
		    t1.increasedcost,
		    t1.rolloverfrq,
		    t1.nextrolloverdate,
		    t27.custstsdescription,
		    t1.shariastatus,
		    t1.initiatedate,
		    t1.finpreapprovedref,
		    t1.mmaid,
		    t1.accountsofficer,
		    t1.feeaccountid,
		    t1.fincancelac,
		    t28.dealername AS lovdescaccountsofficer,
		    t28.dealercity AS lovdescsourcecity,
		    t29.agreename,
		    t29.mmareference AS lovdescmmareference,
		    t1.dsacode,
		    t30.rofficerdesc AS dsacodedesc,
		    t1.tdsapplicable,
		    t1.mandateid,
		    t1.droplinefrq,
		    t1.firstdroplinedate,
		    t1.pftservicingodlimit,
		    t1.insuranceamt,
		    t1.deductinsdisb,
		    t1.alwbpi,
		    t1.bpitreatment,
		    t1.planemihalw,
		    t1.planemihmethod,
		    t1.planemihmaxperyear,
		    t1.planemihmax,
		    t1.planemihlockperiod,
		    t1.planemicpz,
		    t1.calroundingmode,
		    t1.alwmultidisb,
		    t1.applicationno,
		    t1.referralid,
		    t33.rofficerdesc AS referraliddesc,
		    t1.dmacode,
		    t34.rofficerdesc AS dmacodedesc,
		    t1.salesdepartment,
		    t35.gendeptdesc AS salesdepartmentdesc,
		    t1.quickdisb,
		    t1.wifreference,
		    t1.unplanemihlockperiod,
		    t1.unplanemicpz,
		    t1.reagecpz,
		    t1.maxunplannedemi,
		    t1.maxreageholidays,
		    t1.availedunplanemi,
		    t1.availedreageh,
		    t1.bpiamount,
		    t1.deductfeedisb,
		    t1.rvwrateapplfor,
		    t1.schcalonrvw,
		    t1.pastduepftcalmthd,
		    t1.pastduepftmargin,
		    t1.droppingmethod,
		    t1.ratechganyday,
		    t1.promotioncode,
		    t1.restructureloan,
		    t1.oldfinreference,
		    t1.reagebucket,
		    t1.fincategory,
		    t1.productcategory,
		    t1.roundingtarget,
		    t36.entitycode AS lovdescentitycode,
			t1.eligibilitymethod
		   FROM financemain t1
		     JOIN rmtfinancetypes t7 ON t1.fintype = t7.fintype
		     LEFT JOIN rmtbranches t12 ON t1.finbranch = t12.branchcode
		     LEFT JOIN finpftdetails t17 ON t17.finreference = t1.finreference
		     LEFT JOIN steppolicyheader t24 ON t1.steppolicy = t24.policycode
		     LEFT JOIN bmtcuststatuscodes t27 ON t1.finstatus = t27.custstscode
		     LEFT JOIN amtvehicledealer t28 ON t1.accountsofficer = t28.dealerid
		     LEFT JOIN mmagreements t29 ON t1.mmaid = t29.mmaid
		     LEFT JOIN relationshipofficers t30 ON t1.dsacode = t30.rofficercode
		     LEFT JOIN relationshipofficers t33 ON t1.referralid = t33.rofficercode
		     LEFT JOIN relationshipofficers t34 ON t1.dmacode = t34.rofficercode
		     LEFT JOIN rmtgendepartments t35 ON t1.salesdepartment = t35.gendepartment
		     LEFT JOIN smtdivisiondetail t36 ON t7.findivision = t36.divisioncode
		</createView>
	</changeSet>

	<changeSet id="25" author="Vinay">
		<sql>
			Insert into RBFIELDDETAILS values
			('ELGRULE','ELGRULE','eligibilityMethod','Eligibility Method to
			control fileds in finance','nvarchar',4,'0','1',' ','static',' ');
		</sql>
	</changeSet>
	<changeSet id="26" author="vijaykumar.l">
		<sql>
			delete from DATA_ENGINE_CONFIG where name= 'ME_RMTBRANCHES';
			delete from DATA_ENGINE_CONFIG where name= 'ME_BMTBANKDETAIL';
			delete from DATA_ENGINE_CONFIG where name= 'ME_BANKBRANCHES';
			delete from DATA_ENGINE_CONFIG where name= 'ME_RMTCOUNTRYVSPROVINCE';
			delete from DATA_ENGINE_CONFIG where name= 'ME_RMTPROVINCEVSCITY';
			delete from DATA_ENGINE_CONFIG where name= 'ME_BMTCUSTCATEGORIES';
			delete from DATA_ENGINE_CONFIG where name= 'ME_RMTBASERATES';
			delete from DATA_ENGINE_CONFIG where name= 'ME_RMTSPLRATECODES';
			delete from DATA_ENGINE_CONFIG where name= 'ME_RMTSPLRATES';
			delete from DATA_ENGINE_CONFIG where name= 'ME_BMTPRODUCT';
			delete from DATA_ENGINE_CONFIG where name= 'ME_RMTFINANCETYPES';
			delete from DATA_ENGINE_CONFIG where name= 'ME_PROMOTIONS';
			delete from DATA_ENGINE_CONFIG where name= 'ME_FINTYPEPARTNERBANKS';
			delete from DATA_ENGINE_CONFIG where name= 'ME_VASPRODUCTTYPE';
			delete from DATA_ENGINE_CONFIG where name= 'ME_VASSTRUCTURE';
			delete from DATA_ENGINE_CONFIG where name= 'ME_AMTVEHICLEDEALER_VASMANF';
			delete from DATA_ENGINE_CONFIG where name= 'ME_BUILDERGROUP';
			delete from DATA_ENGINE_CONFIG where name= 'ME_BUILDERCOMPANY';
			delete from DATA_ENGINE_CONFIG where name= 'ME_BUILDERPROJCET';
			delete from DATA_ENGINE_CONFIG where name= 'ME_LOCALITY';
		</sql>
	</changeSet>

</databaseChangeLog>
	