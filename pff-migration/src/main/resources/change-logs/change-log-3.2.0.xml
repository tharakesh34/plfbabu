<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">
	<property name="add.schema" value="dbo." dbms="mssql" />
	<property name="add.schema" value=" " dbms="oracle" />
	<property name="call.substr" value="substring" dbms="mssql" />
	<property name="call.substr" value="substr" dbms="oracle" />
	<property name="call.substr" value="substring" dbms="postgresql" />
	<property name="call.auditdb" value="PFFBFSQCAudit.." dbms="mssql" />
	<property name="call.auditdb" value=" " dbms="oracle" />
	<property name="call.concatenate" value="+" dbms="mssql" />
	<property name="call.concatenate" value="||" dbms="oracle" />
	<property name="call.concatenate" value="||" dbms="postgresql" />
	<property name="call.collength" value="LEN" dbms="mssql" />
	<property name="call.collength" value="LENGTH" dbms="oracle" />
	<property name="call.collength" value="LENGTH" dbms="postgresql" />
	<property name="call.date" value="getdate()" dbms="mssql" />
	<property name="call.date" value="sysdate" dbms="oracle" />
	<property name="call.date" value="now()::timestamp" dbms="postgresql" />

	<changeSet id="01" author="Surekha">
		<sql>
			update SMTDivisionDetail set divisionCodeDesc='Bajaj Finance Service' where divisionCode='BFSD';
		</sql>
	</changeSet>

	<changeSet id="02" author="Durgaprasad G">
		<addColumn tableName="PRESENTMENTDETAILS">
			<column name="ErrorCode" type="varchar(10)" />
			<column name="ErrorDesc" type="varchar(250)" />
		</addColumn>
	</changeSet>
	
		<changeSet id="03" author="Durgaprasad G">
		<addColumn tableName="PRESENTMENTDETAILS_TEMP">
			<column name="ErrorCode" type="varchar(10)" />
			<column name="ErrorDesc" type="varchar(250)" />
		</addColumn>
	</changeSet>
	
	
<changeSet id="04" author="Durgaprasad g">
		<createView viewName="PRESENTMENTDETAILS_AVIEW" replaceIfExists="true">
  SELECT		T1.ID, T1.PRESENTMENTID, T1.PRESENTMENTREF, T1.FINREFERENCE, T1.SCHDATE, T1.MANDATEID, T1.SCHAMTDUE, T1.SCHPRIDUE, T1.SCHPFTDUE, T1.SCHFEEDUE, T1.SCHINSDUE,
							T1.schPenaltyDue, T1.advanceAmt, T1.excessID, T1.adviseAmt, T1.presentmentAmt, T1.ExcludeReason, T1. TDSAMOUNT, T1.bounceID, T1.emiNo, T1.status,
							T1.Version , T1.LastMntBy, T1.LastMntOn,T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId,T2.MANDATETYPE,T3.FINTYPE,T4.FINTYPEDESC,
      						T5.CUSTSHRTNAME CUSTOMERNAME  ,T1.ReceiptID, T1.ECSRETURN, T1.ErrorCode, T1.ErrorDesc 
				FROM 		PRESENTMENTDETAILS    T1  INNER JOIN 
							MANDATES  T2 ON T1.MANDATEID = T2.MANDATEID INNER JOIN 
							FINANCEMAIN T3 ON T1.FINREFERENCE = T3.FINREFERENCE INNER JOIN 
							RMTFINANCETYPES T4 ON T3.FINTYPE  = T4.FINTYPE INNER JOIN 
							CUSTOMERS T5 ON T5.CUSTID  = T3.CUSTID
							
	</createView>
</changeSet>							

<changeSet id="05" author="Durgaprasad g">
		<createView viewName="PRESENTMENTDETAILS_VIEW" replaceIfExists="true">
			SELECT		T1.ID, T1.PRESENTMENTID, T1.PRESENTMENTREF, T1.FINREFERENCE, T1.SCHDATE, T1.MANDATEID, T1.SCHAMTDUE, T1.SCHPRIDUE, T1.SCHPFTDUE, T1.SCHFEEDUE, T1.SCHINSDUE,
										T1.schPenaltyDue, T1.advanceAmt, T1.excessID, T1.adviseAmt, T1.presentmentAmt, T1.ExcludeReason, T1. TDSAMOUNT, T1.bounceID, T1.emiNo, T1.status,
										T1.Version , T1.LastMntBy, T1.LastMntOn,T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId,
										T2.MANDATETYPE,T3.FINTYPE,T4.FINTYPEDESC, T5.CUSTSHRTNAME CUSTOMERNAME, T1.ReceiptID ,T1.ECSRETURN,
										T1.ErrorCode, T1.ErrorDesc 
							FROM 		PRESENTMENTDETAILS_TEMP  T1  INNER JOIN 
										MANDATES  T2 ON T1.MANDATEID = T2.MANDATEID INNER JOIN 
										FINANCEMAIN T3 ON T1.FINREFERENCE = T3.FINREFERENCE INNER JOIN 
										RMTFINANCETYPES T4 ON T3.FINTYPE  = T4.FINTYPE INNER JOIN 
										CUSTOMERS T5 ON T5.CUSTID  = T3.CUSTID
			UNION ALL

			SELECT		T1.ID, T1.PRESENTMENTID, T1.PRESENTMENTREF, T1.FINREFERENCE, T1.SCHDATE, T1.MANDATEID, T1.SCHAMTDUE, T1.SCHPRIDUE, T1.SCHPFTDUE, T1.SCHFEEDUE, T1.SCHINSDUE,
										T1.schPenaltyDue, T1.advanceAmt, T1.excessID, T1.adviseAmt, T1.presentmentAmt, T1.ExcludeReason, T1. TDSAMOUNT, T1.bounceID, T1.emiNo, T1.status,
										T1.Version , T1.LastMntBy, T1.LastMntOn,T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId,
										T2.MANDATETYPE,T3.FINTYPE,T4.FINTYPEDESC, T5.CUSTSHRTNAME CUSTOMERNAME , T1.ReceiptID ,T1.ECSRETURN,
										T1.ErrorCode, T1.ErrorDesc 
							FROM 		PRESENTMENTDETAILS    T1  INNER JOIN 
										MANDATES  T2 ON T1.MANDATEID = T2.MANDATEID INNER JOIN 
										FINANCEMAIN T3 ON T1.FINREFERENCE = T3.FINREFERENCE INNER JOIN 
										RMTFINANCETYPES T4 ON T3.FINTYPE  = T4.FINTYPE INNER JOIN 
										CUSTOMERS T5 ON T5.CUSTID  = T3.CUSTID
			WHERE     NOT EXISTS (SELECT 1 FROM PRESENTMENTDETAILS_TEMP WHERE ID = T1.ID)
	</createView>
</changeSet>	
	
	
	<changeSet id="06" author="Durgaprasad g">
		<modifyDataType tableName="PRESENTMENTDETAILS" columnName="ErrorDesc"
			newDataType="varchar(1000)" />
	</changeSet>
	
	<changeSet id="07" author="Durgaprasad g">
		<modifyDataType tableName="PRESENTMENTDETAILS_TEMP" columnName="ErrorDesc"
			newDataType="varchar(1000)" />
	</changeSet>
	
	
<changeSet id="08" author="Durgaprasad g">
<sql>
	DELETE  from RBFIELDDETAILS Where RBMODULE = 'BOUNCE' ANd RBFLDNAME = 'rd_paymentType';
	INSERT INTO RBFIELDDETAILS VALUES ('BOUNCE','BOUNCE','rd_paymentType','Mandate Types','nvarchar',8,'0','1','FINRECEIPTDETAIL','static,global,dbvalue','');
</sql>
</changeSet>

   <changeSet id="09" author="Manojkumar.P">
		<createView viewName="DE_DISBURSE_FILE_CONTROL_VIEW" replaceIfExists="true">
		 SELECT DISTINCT(DS.ID), DC.NAME, DC.UPLOADPATH FILELOCATION, DS.FILENAME, DS.VALUEDATE, DS.STATUS, 
			PB.ALWFILEDOWNLOAD,  PB.PARTNERBANKID, PB.PARTNERBANKCODE, PB.PARTNERBANKNAME, FA.PAYMENTTYPE
			FROM DATA_ENGINE_CONFIG DC
			INNER JOIN DATA_ENGINE_STATUS DS ON DS.NAME = DC.NAME 
			INNER JOIN DISBURSEMENT_REQUESTS DR ON DR.BATCH_ID =DS.ID
      		INNER JOIN FINADVANCEPAYMENTS FA ON FA.PAYMENTID = DR.DISBURSEMENT_ID
			INNER JOIN PARTNERBANKS PB ON PB.PARTNERBANKID=FA.PARTNERBANKID
      		ORDER BY DS.ID DESC
	</createView>	
	</changeSet>
   <changeSet id="10" author="Madhubabu">
		<createView viewName="ACCOUNTS_VIEW" replaceIfExists="true">
		SELECT     T1.AccountId, T1.AcCcy, T1.AcType, T1.AcBranch, T1.AcCustId, T1.AcFullName, T1.AcShortName, T1.AcPurpose, T1.InternalAc, T1.CustSysAc, 
                      T1.SHADOWBAL, T1.ACBALANCE, T1.AcOpenDate, T1.AcCloseDate, 
                      T1.AcLastCustTrnDate, T1.AcLastSysTrnDate, T1.AcActive, T1.AcBlocked, T1.AcClosed, T1.HostAcNumber, T1.Version, T1.LastMntBy, T1.LastMntOn, 
                      T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId, 
                      Customers.CustCIF lovDescCustCIF,  RMTBranches.BranchDesc lovDescBranchCodeName, 
                       RMTAccountTypes.AcTypeDesc lovDescAccTypeDesc
FROM          Accounts_Temp T1 LEFT OUTER JOIN
                       Customers ON T1.AcCustId =  Customers.CustID AND T1.AcCustId =  Customers.CustID INNER JOIN
                       RMTBranches ON T1.AcBranch =  RMTBranches.BranchCode AND T1.AcBranch =  RMTBranches.BranchCode INNER JOIN
                       RMTAccountTypes ON T1.AcType =  RMTAccountTypes.AcType AND T1.AcType =  RMTAccountTypes.AcType
UNION ALL
SELECT     T1.AccountId, T1.AcCcy, T1.AcType, T1.AcBranch, T1.AcCustId, T1.AcFullName, T1.AcShortName, T1.AcPurpose, T1.InternalAc, T1.CustSysAc, 
                      T1.SHADOWBAL, T1.ACBALANCE, T1.AcOpenDate, T1.AcCloseDate, 
                      T1.AcLastCustTrnDate, T1.AcLastSysTrnDate, T1.AcActive, T1.AcBlocked, T1.AcClosed, T1.HostAcNumber, T1.Version, T1.LastMntBy, T1.LastMntOn, 
                      T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId, 
                      Customers.CustCIF lovDescCustCIF,  RMTBranches.BranchDesc lovDescBranchCodeName, 
                       RMTAccountTypes.AcTypeDesc lovDescAccTypeDesc
FROM          Accounts T1 LEFT OUTER JOIN
                       Customers ON T1.AcCustId =  Customers.CustID AND T1.AcCustId =  Customers.CustID INNER JOIN
                       RMTBranches ON T1.AcBranch =  RMTBranches.BranchCode AND T1.AcBranch =  RMTBranches.BranchCode INNER JOIN
                       RMTAccountTypes ON T1.AcType =  RMTAccountTypes.AcType AND T1.AcType =  RMTAccountTypes.AcType
WHERE     NOT EXISTS
                          (SELECT     1
                            FROM          Accounts_TEMP
                            WHERE      AccountId = T1.AccountId)
	</createView>	
	</changeSet>
	
	<changeSet id="11" author="Madhubabu">
<sql>
Update wifFinanceMain set FinCurrAssetValue = (select SUM(DisbAmount) from wifFinDisbursementDetails D  WHERE wifFinanceMain.FinReference = D.FinReference);
Update wifFinanceMain set FinCurrAssetValue = FinCurrAssetValue-DownPayment;
Update wiffinancemain_temp set FinCurrAssetValue = (select SUM(DisbAmount) from wifFinDisbursementDetails_temp D  WHERE wifFinanceMain_Temp.FinReference = D.FinReference);
Update wiffinancemain_temp set FinCurrAssetValue = FinCurrAssetValue-DownPayment;
Update wiffinancemain_temp set FinCurrAssetValue = 0 WHERE FinCurrAssetValue IS NULL;
Update wifFinanceMain set FinCurrAssetValue = 0 WHERE FinCurrAssetValue IS NULL;
</sql>
</changeSet>

     <changeSet id="12" author="ManojKumar.P">
		<dropTable tableName="DISBURSMENT_UPLOAD_MAPPING"/>
	</changeSet> 
	
	<changeSet id="13" author="ManojKumar.P" >
	<createView viewName="DE_DISBURSE_FILE_CONTROL_VIEW" replaceIfExists="true">
		 SELECT DISTINCT(DS.ID), DC.NAME, DC.UPLOADPATH FILELOCATION, DS.FILENAME, DS.ENDTIME, DS.STATUS, 
			PB.ALWFILEDOWNLOAD,  PB.PARTNERBANKID, PB.PARTNERBANKCODE, PB.PARTNERBANKNAME, FA.PAYMENTTYPE
			FROM DATA_ENGINE_CONFIG DC
			INNER JOIN DATA_ENGINE_STATUS DS ON DS.NAME = DC.NAME 
			INNER JOIN DISBURSEMENT_REQUESTS DR ON DR.BATCH_ID =DS.ID
      		INNER JOIN FINADVANCEPAYMENTS FA ON FA.PAYMENTID = DR.DISBURSEMENT_ID
			INNER JOIN PARTNERBANKS PB ON PB.PARTNERBANKID=FA.PARTNERBANKID
      		ORDER BY DS.ID DESC
	</createView>	
	</changeSet>
	
	<changeSet id="14" author="ManojKumar.P">
	<createView viewName="DE_FILE_CONTROL_VIEW" replaceIfExists="true">
		SELECT DS.ID, DC.NAME, DC.UPLOADPATH FILELOCATION, DS.FILENAME, DS.ENDTIME, DS.STATUS 
		FROM DATA_ENGINE_CONFIG DC
		INNER JOIN DATA_ENGINE_STATUS DS ON DS.NAME = DC.NAME 
		ORDER BY DS.ID DESC
	</createView>	
	</changeSet>
	<changeSet id="15" author="Surekha">
	<sql>
		update ReportList set FieldLabels='listheader_FinType.label,listheader_FinTypeDesc.label,listheader_FinCcy.label,listheader_FinDaysCalType.label,listheader_FinSchdMthd.label,listheader_FInIsAlwGrace.label,listheader_FinDivision.label,listheader_RecordStatus.label,listheader_RecordType.label,listheader_LovDescProductCodeDesc.label' , FieldValues='finType,finTypeDesc,finCcy,finDaysCalType,finSchdMthd,fInIsAlwGrace,finDivision,recordStatus,recordType,lovDescProductCodeDesc' , FieldType='String,String,String,String,String,boolean,String,String,String,String' , reportFileName='ReportList10' where Code='FinanceType';
	</sql>
	</changeSet>
	<changeSet id="16" author="Surekha">
	<sql>
		update ReportList set FieldLabels='listheader_FinType.label,listheader_FinTypeDesc.label,listheader_FinCcy.label,listheader_FinDaysCalType.label,listheader_FinSchdMthd.label,listheader_FInIsAlwGrace.label,listheader_FinDivision.label,listheader_RecordStatus.label,listheader_RecordType.label' , FieldValues='finType,finTypeDesc,finCcy,finDaysCalType,finSchdMthd,fInIsAlwGrace,finDivision,recordStatus,recordType' , FieldType='String,String,String,String,String,boolean,String,String,String' , reportFileName='ReportList09' where Code='FinanceType';
	</sql>
		</changeSet>		
	
	<changeSet id="18" author="Jayant">    
	    <createIndex tableName="DOCUMENTDETAILS" indexName="ix_DD_DocModule">
	        <column name="DocModule" type="nvarchar(50)"/>
	    </createIndex>
	    <createIndex tableName="DOCUMENTDETAILS" indexName="ix_DD_FinEvent">
	        <column name="FinEvent" type="nvarchar(50)"/>
	    </createIndex>
	    <createIndex tableName="DOCUMENTDETAILS_Temp" indexName="ix_DD_ReferenceId_T">
	        <column name="ReferenceId" type="nvarchar(50)"/>
	    </createIndex>
	     <createIndex tableName="DOCUMENTDETAILS_Temp" indexName="ix_DD_DocModule_T">
	        <column name="DocModule" type="nvarchar(50)"/>
	    </createIndex>
	     <createIndex tableName="DOCUMENTDETAILS_Temp" indexName="ix_DD_FinEvent_T">
	        <column name="FinEvent" type="nvarchar(50)"/>
	    </createIndex>
	</changeSet>
	<changeSet id="19" author="Jayant">
	    <!-- <dropIndex tableName="CUSTOMERDOCUMENTS" indexName="IX_CD_CUST_TIT_CAT_ID"/> -->
	    <createIndex tableName="CUSTOMERDOCUMENTS" indexName="IX_CD_CUST_TIT_CAT_ID">
	        <column name="CUSTDOCTITLE" type="nvarchar(50)"/>
	        <column name="CUSTDOCCATEGORY" type="nvarchar(50)"/>
	        <column name="CUSTID" type="bigint"/>
	    </createIndex>
	     <dropIndex tableName="CUSTOMERDOCUMENTS_TEMP" indexName="IX_CD_CUST_TIT_CAT_ID"/>
	     <createIndex tableName="CUSTOMERDOCUMENTS_TEMP" indexName="IX_CD_CUST_TIT_CAT_ID">
	           <column name="CUSTDOCTITLE" type="nvarchar(50)"/>
	        <column name="CUSTDOCCATEGORY" type="nvarchar(50)"/>
	        <column name="CUSTID" type="bigint"/>
	    </createIndex>
	</changeSet>
	<changeSet id="20" author="Jayant">
	    <createIndex tableName="rmtfinancetypes" indexName="ix_fin_type_division">
	        <column name="FinDivision" type="nvarchar(50)"/>
	    </createIndex>
	</changeSet>
	<changeSet id="21" author="Jayant">
		<createIndex tableName="FinanceMain" indexName="ix_fin_main_active_branch">
	        <column name="FinIsActive" type="boolean"/>
	         <column name="FinBranch" type="varchar(50)"/>
	    </createIndex>
	    <createIndex tableName="FinanceMain" indexName="IX_FM_Cust_ID">
	        <column name="CustID" type="bigint"/>
	    </createIndex>
	</changeSet>
	<changeSet id="22" author="Jayant">
	    <dropIndex tableName="SECLOGINLOG" indexName="IX_SECLOG_SESSIONID"/>
	</changeSet>
	<changeSet id="23" author="Jayant">
	     <dropIndex tableName="SECUSEROPERATIONS" indexName="IX_UO_UID_OID"/>
	     <addUniqueConstraint tableName="secuseroperations" columnNames="usrid, oprid" constraintName="uk_user_oper"/>
	    <createIndex tableName="secuseroperations" indexName="ix_user_oper_user_id">
	        <column name="usrid" type="bigint"/>
	    </createIndex>
		 <createIndex tableName="secuseroperations" indexName="ix_user_oper_oper_id">
	        <column name="oprid" type="bigint"/>
	    </createIndex>
	</changeSet>
	<changeSet id="24" author="Jayant">
	     <addUniqueConstraint tableName="secoperations" columnNames="oprcode" constraintName="uk_oper_code"/>
	</changeSet>
	<changeSet id="25" author="Jayant">
	     <dropIndex tableName="SECOPERATIONROLES" indexName="IX_OR_OID_RID"/>
	     <addUniqueConstraint tableName="secoperationroles" columnNames="oprid, roleid" constraintName="uk_oper_role"/>
	       <createIndex tableName="secoperationroles" indexName="ix_oper_role_oper_id">
	        <column name="oprid" type="bigint"/>
	    </createIndex>
		 <createIndex tableName="secoperationroles" indexName="ix_oper_role_role_id">
	        <column name="roleid" type="bigint"/>
	    </createIndex>
	</changeSet>
	<changeSet id="26" author="Jayant">
	      <addUniqueConstraint tableName="secroles" columnNames="rolecd, roleapp" constraintName="uk_role_code_app"/>
	</changeSet>
	<changeSet id="27" author="Jayant">
	       <createIndex tableName="SecRoleGroups" indexName="IX_SRG_RID">
	        <column name="RoleID" type="bigint"/>
	    </createIndex>
		 <createIndex tableName="secrolegroups" indexName="ix_role_group_group_id">
	        <column name="grpid" type="bigint"/>
	    </createIndex>
	</changeSet>
	<changeSet id="28" author="Jayant">
	    <dropIndex tableName="SecGroupRights" indexName="IX_SGR_GID"/>
	    <createIndex tableName="SecGroupRights" indexName="IX_SGR_GID">
	        <column name="GrpID" type="bigint"/>
	    </createIndex>
	    <dropIndex tableName="SecGroupRights" indexName="IX_group_right_right_id"/>
		 <createIndex tableName="secgrouprights" indexName="ix_group_right_right_id">
	        <column name="rightid" type="bigint"/>
	    </createIndex>
	    <dropUniqueConstraint tableName="SecGroupRights" constraintName="IDXSECGROUPRIGHTS_GRPANDRIGHT" />
	    <addUniqueConstraint tableName="secgrouprights" columnNames="grpid,rightid" constraintName="uk_group_right"/>
	</changeSet>
	<changeSet id="29" author="Jayant">
	       <createIndex tableName="secrights" indexName="ix_rights_page_right_type">
	        <column name="PAGE" type="varchar(50)"/>
	        <column name="RIGHTTYPE" type="int"/>
	    </createIndex>
	</changeSet>
	<changeSet id="30" author="Jayant">
	    <sql>
	        DELETE  from SECURITYUSERDIVBRANCH where rowid not in ( SELECT MIN(rowid) FROM SECURITYUSERDIVBRANCH GROUP BY USRID,USERDIVISION,USERBRANCH );
	    	alter table SECURITYUSERDIVBRANCH add constraint PK_SECUSRDIVBRANCH primary key (USRID,USERDIVISION,USERBRANCH);
	    </sql>
	</changeSet>
	<changeSet id="31" author="Jayant">
	    <createIndex tableName="OFFLINEUSRMESSAGESBACKUP" indexName="IX_OLUMB_TOUSRID">
	        <column name="TOUSRID" type="varchar(50)"/>
	    </createIndex>
	</changeSet>
	<changeSet id="32" author="Jayant">
	    <sql>
	        alter table TATNotificationCodes add constraint PK_TATNotificationCodes primary key (TatNotificationId);
	    </sql>
	</changeSet>
	<changeSet id="33" author="Jayant">
	    <createIndex tableName="Notes" indexName="ix_Note_Modulename">
	        <column name="MODULENAME" type="varchar(50)"/>
	    </createIndex>
	    <createIndex tableName="Notes" indexName="ix_Note_Reference">
	        <column name="Reference" type="varchar(50)"/>
	    </createIndex>
	 	<createIndex tableName="Notes" indexName="ix_Note_RemarkType">
	        <column name="RemarkType" type="char(1)"/>
	    </createIndex>
	    <createIndex tableName="Notes" indexName="ix_Note_InputBy">
	        <column name="InputBy" type="bigint"/>
	    </createIndex>
	</changeSet>
	<changeSet id="34" author="Jayant">
	    
	    	
	    <createIndex tableName="CUSTOMERS" indexName="IX_CUST_CRCPR_ID">
	        <column name="CUSTCRCPR" type="nvarchar(20)" />
	        <column name="CUSTID" type="bigint"/>
	    </createIndex>
	   
	    <createIndex tableName="CUSTOMERS_TEMP" indexName="IX_CUST_T_CRCPR_ID">
	        <column name="CUSTCRCPR" type="nvarchar(20)" />
	        <column name="CUSTID" type="bigint"/>
	    </createIndex>
	</changeSet>

<changeSet id="35" author="Siva">
		<addColumn tableName="FinRepayDetails">
			<column name="FinSchdTdsPaid" type="decimal(18,0)" />
		</addColumn>
	</changeSet>
	
	<changeSet id="36" author="Siva">
		<addColumn tableName="FINREPAYSCHEDULEDETAIL">
			<column name="TdsSchdPayNow" type="decimal(18,0)" />
		</addColumn>
	</changeSet>
	
	<changeSet id="37" author="Siva">
		<addColumn tableName="FINREPAYSCHEDULEDETAIL_TEMP">
			<column name="TdsSchdPayNow" type="decimal(18,0)" />
		</addColumn>
	</changeSet>
	
	<changeSet id="38" author="Siva">
		<addColumn tableName="FINSCHEDULEDETAILS">
			<column name="TDSPaid" type="decimal(18,0)" />
		</addColumn>
	</changeSet>
	
	<changeSet id="39" author="Siva">
		<addColumn tableName="FINSCHEDULEDETAILS_TEMP">
			<column name="TDSPaid" type="decimal(18,0)" />
		</addColumn>
	</changeSet>
	
	<changeSet id="40" author="Siva">
		<addColumn tableName="FINSCHEDULEDETAILS_PA">
			<column name="TDSPaid" type="decimal(18,0)" />
		</addColumn>
	</changeSet>
	
	<changeSet id="41" author="Siva">
		<addColumn tableName="FINSCHEDULEDETAILS_LOG">
			<column name="TDSPaid" type="decimal(18,0)" />
		</addColumn>
	</changeSet>
	
	<changeSet id="42" author="Siva">
		<addColumn tableName="REJECTFINSCHEDULEDETAILS">
			<column name="TDSPaid" type="decimal(18,0)" />
		</addColumn>
	</changeSet>
	
	<changeSet id="43" author="Siva">
		<addColumn tableName="WIFFINSCHEDULEDETAILS">
			<column name="TDSPaid" type="decimal(18,0)" />
		</addColumn>
	</changeSet>
	
	<changeSet id="44" author="Siva">
		<addColumn tableName="WIFFINSCHEDULEDETAILS_TEMP">
			<column name="TDSPaid" type="decimal(18,0)" />
		</addColumn>
	</changeSet>
	
	
	<changeSet id="45" author="Siva">
			<createView viewName="FINSCHEDULEDETAILS_AVIEW" replaceIfExists="true">
	  SELECT     T1.FinReference, T1.SchSeq, T1.SchDate, T1.PftOnSchDate, T1.RepayOnSchDate, T1.CpzOnSchDate, T1.RvwOnSchDate, T1.DisbOnSchDate, 
	                     T1.DownpaymentOnSchDate, T1.BalanceForPftCal, T1.BaseRate, T1.SplRate, T1.ActRate, T1.NoOfDays, T1.DayFactor, T1.ProfitCalc, T1.ProfitSchd, 
	                      T1.PrincipalSchd, T1.RepayAmount, T1.ProfitBalance, T1.DisbAmount, T1.CpzAmount, T1.DownPaymentAmount,  
	                      T1.ClosingBalance, T1.ProfitFraction, T1.PrvRepayAmount, T1.SchdPftPaid, T1.SchPftPaid, T1.SchdPriPaid, T1.SchPriPaid, 
	                      T1.Specifier, T1.DefSchdDate, T1.SchdMethod, T1.MrgRate, 
	                      T1.CalOnIndRate,T1.FeeChargeAmt, T1.CalculatedRate, T1.EarlyPaidBal, T1.EarlyPaid, T1.RefundOrWaiver, T1.WriteoffPrincipal, 
	                      T1.WriteoffProfit, T1.OrgPft, T1.OrgPri, T1.OrgEndBal, T1.OrgPlanPft, T1.FeeSchd, T1.SchdFeePaid, T1.SchdFeeOS, T1.InsSchd, T1. SchdInsPaid, 
	                       T1.AdvPftRate , T1.AdvProfit ,  T1.AdvRepayAmount , T1.AdvBaseRate , T1.AdvMargin , T1.AdvCalRate, T1.SuplRent ,  T1.IncrCost ,  T1.SuplRentPaid ,  T1.IncrCostPaid ,
	                       T1.RolloverOnSchDate,  T1.RolloverAmount,  T1.RolloverAmountPaid, T1.TDSAmount, T1.TDSPaid,
	                       T1.PftDaysBasis,T1.WriteoffIns,T1.WriteoffIncrCost,T1.WriteoffSuplRent,T1.WriteoffSchFee,T1.InsuranceAmt, T1.InstNumber, T1.BpiOrHoliday, T1.FrqDate,T1.PresentmentId
	
	FROM         FinScheduleDetails  T1							
		</createView>
	</changeSet>		
	
	<changeSet id="46" author="Siva">
			<createView viewName="FINSCHEDULEDETAILS_TVIEW" replaceIfExists="true">
	  SELECT     T1.FinReference, T1.SchSeq, T1.SchDate, T1.PftOnSchDate, T1.RepayOnSchDate, T1.CpzOnSchDate, T1.RvwOnSchDate, T1.DisbOnSchDate, 
	                     T1.DownpaymentOnSchDate, T1.BalanceForPftCal, T1.BaseRate, T1.SplRate, T1.ActRate, T1.NoOfDays, T1.DayFactor, T1.ProfitCalc, T1.ProfitSchd, 
	                      T1.PrincipalSchd, T1.RepayAmount, T1.ProfitBalance, T1.DisbAmount, T1.CpzAmount, T1.DownPaymentAmount,  
	                      T1.ClosingBalance, T1.ProfitFraction, T1.PrvRepayAmount, T1.SchdPftPaid, T1.SchPftPaid, T1.SchdPriPaid, T1.SchPriPaid, 
	                      T1.Specifier, T1.DefSchdDate, T1.SchdMethod, T1.MrgRate, 
	                      T1.CalOnIndRate,T1.FeeChargeAmt, T1.CalculatedRate, T1.EarlyPaidBal, T1.EarlyPaid, T1.RefundOrWaiver, T1.WriteoffPrincipal, 
	                      T1.WriteoffProfit, T1.OrgPft, T1.OrgPri, T1.OrgEndBal, T1.OrgPlanPft, T1.FeeSchd, T1.SchdFeePaid, T1.SchdFeeOS, T1.InsSchd, T1. SchdInsPaid, 
	                       T1.AdvPftRate , T1.AdvProfit ,  T1.AdvRepayAmount , T1.AdvBaseRate , T1.AdvMargin , T1.AdvCalRate, T1.SuplRent ,  T1.IncrCost ,  T1.SuplRentPaid ,  T1.IncrCostPaid ,
	                       T1.RolloverOnSchDate,  T1.RolloverAmount,  T1.RolloverAmountPaid, T1.TDSAmount, T1.TDSPaid,
	                       T1.PftDaysBasis,T1.WriteoffIns,T1.WriteoffIncrCost,T1.WriteoffSuplRent,T1.WriteoffSchFee,T1.InsuranceAmt, T1.InstNumber, T1.BpiOrHoliday, T1.FrqDate,T1.PresentmentId
	
					FROM         FinScheduleDetails_Temp  T1							
		</createView>
	</changeSet>		
	
	<changeSet id="47" author="Siva">
			<createView viewName="FINSCHEDULEDETAILS_VIEW" replaceIfExists="true">
	  SELECT     T1.FinReference, T1.SchSeq, T1.SchDate, T1.PftOnSchDate, T1.RepayOnSchDate, T1.CpzOnSchDate, T1.RvwOnSchDate, T1.DisbOnSchDate, 
	                     T1.DownpaymentOnSchDate, T1.BalanceForPftCal, T1.BaseRate, T1.SplRate, T1.ActRate, T1.NoOfDays, T1.DayFactor, T1.ProfitCalc, T1.ProfitSchd, 
	                      T1.PrincipalSchd, T1.RepayAmount, T1.ProfitBalance, T1.DisbAmount, T1.CpzAmount, T1.DownPaymentAmount,  
	                      T1.ClosingBalance, T1.ProfitFraction, T1.PrvRepayAmount, T1.SchdPftPaid, T1.SchPftPaid, T1.SchdPriPaid, T1.SchPriPaid, 
	                      T1.Specifier, T1.DefSchdDate, T1.SchdMethod, T1.MrgRate, 
	                      T1.CalOnIndRate,T1.FeeChargeAmt, T1.CalculatedRate, T1.EarlyPaidBal, T1.EarlyPaid, T1.RefundOrWaiver, T1.WriteoffPrincipal, 
	                      T1.WriteoffProfit, T1.OrgPft, T1.OrgPri, T1.OrgEndBal, T1.OrgPlanPft, T1.FeeSchd, T1.SchdFeePaid, T1.SchdFeeOS, T1.InsSchd, T1. SchdInsPaid, 
	                       T1.AdvPftRate , T1.AdvProfit ,  T1.AdvRepayAmount , T1.AdvBaseRate , T1.AdvMargin , T1.AdvCalRate, T1.SuplRent ,  T1.IncrCost ,  T1.SuplRentPaid ,  T1.IncrCostPaid ,
	                       T1.RolloverOnSchDate,  T1.RolloverAmount,  T1.RolloverAmountPaid, T1.TDSAmount, T1.TDSPaid,
	                       T1.PftDaysBasis,T1.WriteoffIns,T1.WriteoffIncrCost,T1.WriteoffSuplRent,T1.WriteoffSchFee,T1.InsuranceAmt, T1.InstNumber, T1.BpiOrHoliday, T1.FrqDate,T1.PresentmentId
	
	FROM         FinScheduleDetails_Temp  T1
	UNION ALL
	SELECT     T1.FinReference, T1.SchSeq, T1.SchDate, T1.PftOnSchDate, T1.RepayOnSchDate, T1.CpzOnSchDate, T1.RvwOnSchDate, T1.DisbOnSchDate, 
	                     T1.DownpaymentOnSchDate, T1.BalanceForPftCal, T1.BaseRate, T1.SplRate, T1.ActRate, T1.NoOfDays, T1.DayFactor, T1.ProfitCalc, T1.ProfitSchd, 
	                      T1.PrincipalSchd, T1.RepayAmount, T1.ProfitBalance, T1.DisbAmount, T1.CpzAmount, T1.DownPaymentAmount,  
	                      T1.ClosingBalance, T1.ProfitFraction, T1.PrvRepayAmount, T1.SchdPftPaid, T1.SchPftPaid, T1.SchdPriPaid, T1.SchPriPaid, 
	                      T1.Specifier, T1.DefSchdDate, T1.SchdMethod, T1.MrgRate, 
	                      T1.CalOnIndRate,T1.FeeChargeAmt, T1.CalculatedRate, T1.EarlyPaidBal, T1.EarlyPaid, T1.RefundOrWaiver, T1.WriteoffPrincipal, 
	                      T1.WriteoffProfit, T1.OrgPft, T1.OrgPri, T1.OrgEndBal, T1.OrgPlanPft, T1.FeeSchd, T1.SchdFeePaid, T1.SchdFeeOS, T1.InsSchd, T1. SchdInsPaid, 
	                       T1.AdvPftRate , T1.AdvProfit ,  T1.AdvRepayAmount , T1.AdvBaseRate , T1.AdvMargin , T1.AdvCalRate, T1.SuplRent ,  T1.IncrCost ,  T1.SuplRentPaid ,  T1.IncrCostPaid ,
	                       T1.RolloverOnSchDate,  T1.RolloverAmount,  T1.RolloverAmountPaid, T1.TDSAmount, T1.TDSPaid,
	                       T1.PftDaysBasis,T1.WriteoffIns,T1.WriteoffIncrCost,T1.WriteoffSuplRent,T1.WriteoffSchFee,T1.InsuranceAmt, T1.InstNumber, T1.BpiOrHoliday, T1.FrqDate,T1.PresentmentId
	
	FROM         FinScheduleDetails  T1
	WHERE     NOT EXISTS
	                          (SELECT     1
	                            FROM          FinScheduleDetails_Temp
	                            WHERE      FinReference = T1.FinReference)						
		</createView>
	</changeSet>		
	
	<changeSet id="48" author="Siva">
			<createView viewName="WIFFINSCHEDULEDETAILS_TVIEW" replaceIfExists="true">
	  SELECT     T1.FinReference, T1.SchSeq, T1.SchDate, T1.PftOnSchDate, T1.RepayOnSchDate, T1.CpzOnSchDate, T1.RvwOnSchDate, T1.DisbOnSchDate, 
	                     T1.DownpaymentOnSchDate, T1.BalanceForPftCal, T1.BaseRate, T1.SplRate, T1.ActRate, T1.NoOfDays, T1.DayFactor, T1.ProfitCalc, T1.ProfitSchd, 
	                      T1.PrincipalSchd, T1.RepayAmount, T1.ProfitBalance, T1.DisbAmount, T1.CpzAmount, T1.DownPaymentAmount,  
	                      T1.ClosingBalance, T1.ProfitFraction, T1.PrvRepayAmount, T1.SchdPftPaid, T1.SchPftPaid, T1.SchdPriPaid, T1.SchPriPaid, 
	                      T1.Specifier, T1.DefSchdDate, T1.SchdMethod, T1.MrgRate,  
	                      T1.CalOnIndRate,T1.FeeChargeAmt, T1.CalculatedRate, T1.OrgPft, T1.OrgPri, T1.OrgEndBal, T1.OrgPlanPft, T1.FeeSchd, T1.SchdFeePaid, T1.SchdFeeOS, T1.InsSchd, T1. SchdInsPaid, 
	                       T1.AdvPftRate , T1.AdvProfit ,  T1.AdvRepayAmount , T1.AdvBaseRate , T1.AdvMargin , T1.AdvCalRate, T1.SuplRent ,  T1.IncrCost ,  T1.SuplRentPaid ,  T1.IncrCostPaid ,
	                       T1.RolloverOnSchDate,  T1.RolloverAmount,  T1.RolloverAmountPaid, T1.TDSAmount, T1.TDSPaid,
	                       T1.PftDaysBasis,T1.InsuranceAmt, T1.InstNumber, T1.BpiOrHoliday, T1.FrqDate
		FROM         WIFFinScheduleDetails_Temp T1					
		</createView>
	</changeSet>		
	
	<changeSet id="49" author="Siva">
			<createView viewName="WIFFINSCHEDULEDETAILS_VIEW" replaceIfExists="true">
	  SELECT     T1.FinReference, T1.SchSeq, T1.SchDate, T1.PftOnSchDate, T1.RepayOnSchDate, T1.CpzOnSchDate, T1.RvwOnSchDate, T1.DisbOnSchDate, 
	                     T1.DownpaymentOnSchDate, T1.BalanceForPftCal, T1.BaseRate, T1.SplRate, T1.ActRate, T1.NoOfDays, T1.DayFactor, T1.ProfitCalc, T1.ProfitSchd, 
	                      T1.PrincipalSchd, T1.RepayAmount, T1.ProfitBalance, T1.DisbAmount, T1.CpzAmount, T1.DownPaymentAmount,  
	                      T1.ClosingBalance, T1.ProfitFraction, T1.PrvRepayAmount, T1.SchdPftPaid, T1.SchPftPaid, T1.SchdPriPaid, T1.SchPriPaid, 
	                      T1.Specifier, T1.DefSchdDate, T1.SchdMethod, T1.MrgRate, 
	                      T1.CalOnIndRate,T1.FeeChargeAmt, T1.CalculatedRate, T1.OrgPft, T1.OrgPri, T1.OrgEndBal, T1.OrgPlanPft, T1.FeeSchd, T1.SchdFeePaid, T1.SchdFeeOS, T1.InsSchd, T1. SchdInsPaid, 
	                       T1.AdvPftRate , T1.AdvProfit ,  T1.AdvRepayAmount , T1.AdvBaseRate , T1.AdvMargin , T1.AdvCalRate, T1.SuplRent ,  T1.IncrCost ,  T1.SuplRentPaid ,  T1.IncrCostPaid ,
	                       T1.RolloverOnSchDate,  T1.RolloverAmount,  T1.RolloverAmountPaid, T1.TDSAmount, T1.TDSPaid,
	                       T1.PftDaysBasis,T1.InsuranceAmt, T1.InstNumber, T1.BpiOrHoliday, T1.FrqDate
	
		FROM         WIFFinScheduleDetails_Temp T1
		UNION ALL
				SELECT     T1.FinReference, T1.SchSeq, T1.SchDate, T1.PftOnSchDate, T1.RepayOnSchDate, T1.CpzOnSchDate, T1.RvwOnSchDate, T1.DisbOnSchDate, 
	                     T1.DownpaymentOnSchDate, T1.BalanceForPftCal, T1.BaseRate, T1.SplRate, T1.ActRate, T1.NoOfDays, T1.DayFactor, T1.ProfitCalc, T1.ProfitSchd, 
	                      T1.PrincipalSchd, T1.RepayAmount, T1.ProfitBalance, T1.DisbAmount, T1.CpzAmount, T1.DownPaymentAmount,  
	                      T1.ClosingBalance, T1.ProfitFraction, T1.PrvRepayAmount, T1.SchdPftPaid, T1.SchPftPaid, T1.SchdPriPaid, T1.SchPriPaid, 
	                      T1.Specifier, T1.DefSchdDate, T1.SchdMethod, T1.MrgRate, 
	                      T1.CalOnIndRate,T1.FeeChargeAmt, T1.CalculatedRate, T1.OrgPft, T1.OrgPri, T1.OrgEndBal, T1.OrgPlanPft, T1.FeeSchd, T1.SchdFeePaid, T1.SchdFeeOS, T1.InsSchd, T1. SchdInsPaid, 
	                       T1.AdvPftRate , T1.AdvProfit ,  T1.AdvRepayAmount , T1.AdvBaseRate , T1.AdvMargin , T1.AdvCalRate, T1.SuplRent ,  T1.IncrCost ,  T1.SuplRentPaid ,  T1.IncrCostPaid ,
	                       T1.RolloverOnSchDate,  T1.RolloverAmount,  T1.RolloverAmountPaid, T1.TDSAmount, T1.TDSPaid,
	                       T1.PftDaysBasis,T1.InsuranceAmt, T1.InstNumber, T1.BpiOrHoliday, T1.FrqDate
	
		FROM         WIFFinScheduleDetails T1
		WHERE     NOT EXISTS
	                          (SELECT     1
	                            FROM          WIFFinScheduleDetails_Temp
	                            WHERE      FinReference = T1.FinReference)				
		</createView>
	</changeSet>		
	
	
	<changeSet id="50" author="Siva">
	<sql>
		UPDATE  FinRepayDetails SET FinSchdTdsPaid = 0;
		UPDATE  FINREPAYSCHEDULEDETAIL SET TdsSchdPayNow = 0;
		UPDATE  FINREPAYSCHEDULEDETAIL_TEMP SET TdsSchdPayNow = 0;
		UPDATE  FINSCHEDULEDETAILS SET TDSPaid = 0;
		UPDATE  FINSCHEDULEDETAILS_TEMP SET TDSPaid = 0;
		UPDATE  FINSCHEDULEDETAILS_PA SET TDSPaid = 0;
		UPDATE  FINSCHEDULEDETAILS_LOG SET TDSPaid = 0;
		UPDATE  REJECTFINSCHEDULEDETAILS SET TDSPaid = 0;
		UPDATE  WIFFINSCHEDULEDETAILS SET TDSPaid = 0;
		UPDATE  WIFFINSCHEDULEDETAILS_TEMP SET TDSPaid = 0;
	</sql>
	</changeSet>
	<changeSet id="51" author="Kesav">
	<sql>
		UPDATE BMTAEevents SET MANDATORY = 1 WHERE AEEVENTCODE = 'ADDDBSN';
	</sql>
	</changeSet>
	
	
		<changeSet id="52" author="Durgaprasad G">
		<addColumn tableName="PRESENTMENTDETAILS">
			<column name="ManualAdviseId" type="bigint" />
		</addColumn>
	</changeSet>
	
		<changeSet id="53" author="Durgaprasad G">
		<addColumn tableName="PRESENTMENTDETAILS_TEMP">
			<column name="ManualAdviseId" type="bigint" />
		</addColumn>
	</changeSet>
	
<changeSet id="54" author="Durgaprasad g">
		<createView viewName="PRESENTMENTDETAILS_AVIEW" replaceIfExists="true">
  SELECT		T1.ID, T1.PRESENTMENTID, T1.PRESENTMENTREF, T1.FINREFERENCE, T1.SCHDATE, T1.MANDATEID, T1.SCHAMTDUE, T1.SCHPRIDUE, T1.SCHPFTDUE, T1.SCHFEEDUE, T1.SCHINSDUE,
							T1.schPenaltyDue, T1.advanceAmt, T1.excessID, T1.adviseAmt, T1.presentmentAmt, T1.ExcludeReason, T1. TDSAMOUNT, T1.bounceID, T1.emiNo, T1.status,
							T1.Version , T1.LastMntBy, T1.LastMntOn,T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId,T2.MANDATETYPE,T3.FINTYPE,T4.FINTYPEDESC,
      						T5.CUSTSHRTNAME CUSTOMERNAME  ,T1.ReceiptID, T1.ECSRETURN, T1.ErrorCode, T1.ErrorDesc, T1.ManualAdviseId 
				FROM 		PRESENTMENTDETAILS    T1  INNER JOIN 
							MANDATES  T2 ON T1.MANDATEID = T2.MANDATEID INNER JOIN 
							FINANCEMAIN T3 ON T1.FINREFERENCE = T3.FINREFERENCE INNER JOIN 
							RMTFINANCETYPES T4 ON T3.FINTYPE  = T4.FINTYPE INNER JOIN 
							CUSTOMERS T5 ON T5.CUSTID  = T3.CUSTID
							
	</createView>
</changeSet>							

<changeSet id="55" author="Durgaprasad g">
		<createView viewName="PRESENTMENTDETAILS_VIEW" replaceIfExists="true">
			SELECT		T1.ID, T1.PRESENTMENTID, T1.PRESENTMENTREF, T1.FINREFERENCE, T1.SCHDATE, T1.MANDATEID, T1.SCHAMTDUE, T1.SCHPRIDUE, T1.SCHPFTDUE, T1.SCHFEEDUE, T1.SCHINSDUE,
										T1.schPenaltyDue, T1.advanceAmt, T1.excessID, T1.adviseAmt, T1.presentmentAmt, T1.ExcludeReason, T1. TDSAMOUNT, T1.bounceID, T1.emiNo, T1.status,
										T1.Version , T1.LastMntBy, T1.LastMntOn,T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId,
										T2.MANDATETYPE,T3.FINTYPE,T4.FINTYPEDESC, T5.CUSTSHRTNAME CUSTOMERNAME, T1.ReceiptID ,T1.ECSRETURN,
										T1.ErrorCode, T1.ErrorDesc, T1.ManualAdviseId  
							FROM 		PRESENTMENTDETAILS_TEMP  T1  INNER JOIN 
										MANDATES  T2 ON T1.MANDATEID = T2.MANDATEID INNER JOIN 
										FINANCEMAIN T3 ON T1.FINREFERENCE = T3.FINREFERENCE INNER JOIN 
										RMTFINANCETYPES T4 ON T3.FINTYPE  = T4.FINTYPE INNER JOIN 
										CUSTOMERS T5 ON T5.CUSTID  = T3.CUSTID
			UNION ALL

			SELECT		T1.ID, T1.PRESENTMENTID, T1.PRESENTMENTREF, T1.FINREFERENCE, T1.SCHDATE, T1.MANDATEID, T1.SCHAMTDUE, T1.SCHPRIDUE, T1.SCHPFTDUE, T1.SCHFEEDUE, T1.SCHINSDUE,
										T1.schPenaltyDue, T1.advanceAmt, T1.excessID, T1.adviseAmt, T1.presentmentAmt, T1.ExcludeReason, T1. TDSAMOUNT, T1.bounceID, T1.emiNo, T1.status,
										T1.Version , T1.LastMntBy, T1.LastMntOn,T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId,
										T2.MANDATETYPE,T3.FINTYPE,T4.FINTYPEDESC, T5.CUSTSHRTNAME CUSTOMERNAME , T1.ReceiptID ,T1.ECSRETURN,
										T1.ErrorCode, T1.ErrorDesc, T1.ManualAdviseId  
							FROM 		PRESENTMENTDETAILS    T1  INNER JOIN 
										MANDATES  T2 ON T1.MANDATEID = T2.MANDATEID INNER JOIN 
										FINANCEMAIN T3 ON T1.FINREFERENCE = T3.FINREFERENCE INNER JOIN 
										RMTFINANCETYPES T4 ON T3.FINTYPE  = T4.FINTYPE INNER JOIN 
										CUSTOMERS T5 ON T5.CUSTID  = T3.CUSTID
			WHERE     NOT EXISTS (SELECT 1 FROM PRESENTMENTDETAILS_TEMP WHERE ID = T1.ID)
	</createView>
</changeSet>
				
<changeSet id="56" author="Irfan">
	<createView viewName="MANUALADVISE_AVIEW" replaceIfExists="true">
	SELECT		T1.AdviseID, T1.AdviseType, T1.FinReference, T1.FeeTypeID, T1.Sequence,
  				T1.AdviseAmount, T1.PaidAmount, T1.WaivedAmount, T1.Remarks, T1.ValueDate, T1.PostDate,
  					T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, 
                      T1.NextTaskId, T1.RecordType, T1.WorkflowId, T2.FeeTypeDesc, T2.FeeTypeCode, T1.BounceID, T1.ReceiptID,T3.BOUNCECODE
				FROM    	ManualAdvise  T1
       			LEFT JOIN FEETYPES T2 ON T1.FeeTypeID = T2.FeeTypeID
				LEFT JOIN BOUNCEREASONS T3 ON T1.BounceID = T3.BOUNCEID	
	</createView>

</changeSet>
<changeSet id="57" author="Prasad">
	<createView viewName="RPT_SOA_TXNDETAILS_VIEW" replaceIfExists="true">
	<![CDATA[Select T1.Finreference,Schdate,Particulars,Debit,Credit,ccyMinorccyunits,ccyEditField,
		 (Select to_date(sysparmvalue, 'YYYY-MM-DD')  sysparmvalue from smtparameters where SYSPARMCODE='APP_DATE') APP_DATE 
		 from ( 
			Select Finreference,Schdate, (case when Disbonschdate=1 then 'Amount Financed - Payable ('||Finreference||')' 
									     when BPIORHOLIDAY='B' then 'Broken Period Interest Receivable -Due('||Finreference||')' else 
											  'Due for Installment '||INSTNUMBER||' ('||Finreference||')' end) Particulars,
			 case when Disbonschdate=1 then 0 else Repayamount end Debit,
			 case when Disbonschdate=1 then DisbAmount else 0 end Credit
	   from finscheduledetails  
	   where (BPIORHOLIDAY!='H' or BPIORHOLIDAY is null) and 
			 schdate<=(Select to_date(sysparmvalue, 'YYYY-MM-DD')  sysparmvalue from smtparameters where SYSPARMCODE='APP_DATE')  			 
	union 	
		SELECT FINREFERENCE,M.VALUEDATE,(CASE WHEN F.FEETYPEID IS NOT NULL THEN FEETYPEDESC 
		else 'Bounce' end) ||'- Due ('||Finreference||')' ,m.ADVISEAMOUNT Debit ,0 Credit 
		FROM MANUALADVISE M
		LEFT JOIN FEETYPES F ON F.FEETYPEID = M.FEETYPEID 	
		LEFT JOIN BOUNCEREASONS T3 ON M.BounceID = T3.BOUNCEID		
	union	
		Select REFERENCE,Receiveddate,(Case when PAYMENTTYPE NOT in ('EXCESS','CASH') then 'Payment Recieved vide '||PAYMENTTYPE ||' No.:'||CHEQUEACNO ||'('||REFERENCE||')'
										 when PAYMENTTYPE in ('EXCESS') then 'Amount Adjusted ('||REFERENCE||')' 
										 when PAYMENTTYPE in ('CASH') then 'Cash received Vide Receipt No.'||CHEQUEACNO ||'('||REFERENCE||')' end) Particulars,
			    Case when PAYMENTTYPE NOT in ('EXCESS') then 0  when PAYMENTTYPE in ('EXCESS') then Amount end debit,Amount credit
		from FINRECEIPTHEADER T1 inner join 
			 FINRECEIPTDETAIL T2 on T1.RECEIPTID =T2.RECEIPTID			 
	union 	
		Select finreference, FinODSchdDate, 'Penalty Due Created for Past due till date ' || FINODTILLDATE Particulars, 
		TotPenaltyAmt Debit, 0 credit
		From FinODDetails where TOtPenaltyAmt > 0 
	)T1 
	 inner join finpftdetails t2 on t2.Finreference=t1.Finreference
	 inner join RMTCURRENCIES C on C.ccycode= T2.finccy]]>
	</createView>

</changeSet>
<changeSet id="58" author="Irfan">
	<createView viewName="MANUALADVISE_VIEW" replaceIfExists="true">
	SELECT		T1.AdviseID, T1.AdviseType, T1.FinReference, T1.FeeTypeID, T1.Sequence,
  				T1.AdviseAmount, T1.PaidAmount, T1.WaivedAmount, T1.Remarks, T1.ValueDate, T1.PostDate,
  					T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, 
                      T1.NextTaskId, T1.RecordType, T1.WorkflowId, T2.FeeTypeDesc, T2.FeeTypeCode, T1.BounceID, T1.ReceiptID,T3.BOUNCECODE
				FROM    	ManualAdvise_Temp  T1
       			LEFT JOIN FEETYPES T2 ON T1.FeeTypeID = T2.FeeTypeID
         		LEFT JOIN BOUNCEREASONS T3 ON T1.BounceID = T3.BOUNCEID
				UNION ALL
								
SELECT		T1.AdviseID, T1.AdviseType, T1.FinReference, T1.FeeTypeID, T1.Sequence,
  				T1.AdviseAmount, T1.PaidAmount, T1.WaivedAmount, T1.Remarks, T1.ValueDate, T1.PostDate,
  					T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, 
                      T1.NextTaskId, T1.RecordType, T1.WorkflowId, T2.FeeTypeDesc, T2.FeeTypeCode, T1.BounceID, T1.ReceiptID,T3.BOUNCECODE
				FROM    	ManualAdvise  T1
       			LEFT JOIN FEETYPES T2 ON T1.FeeTypeID = T2.FeeTypeID
           		LEFT JOIN BOUNCEREASONS T3 ON T1.BounceID = T3.BOUNCEID
				WHERE     NOT EXISTS (SELECT 1 FROM ManualAdvise_TEMP WHERE AdviseID = T1.AdviseID)
	</createView>
</changeSet>

<changeSet id="59" author="Siva">
	<renameColumn columnDataType="varchar(10)" newColumnName="RoundingMode"
		oldColumnName="CalRoundingMode" tableName="RMTFinanceTypes" />
</changeSet>
	
<changeSet id="60" author="Siva">
	<renameColumn columnDataType="varchar(10)" newColumnName="RoundingMode"
		oldColumnName="CalRoundingMode" tableName="RMTFinanceTypes_Temp" />
</changeSet>
	
<changeSet id="61" author="Siva">
	<addColumn tableName="RMTFinanceTypes">
		<column name="RoundingTarget" type="int"/>
	</addColumn>
</changeSet>

<changeSet id="62" author="Siva">
	<addColumn tableName="RMTFinanceTypes_Temp">
		<column name="RoundingTarget" type="int"/>
	</addColumn>
</changeSet>

<changeSet id="63" author="Siva">
	<createView viewName="RMTFINANCETYPES_AVIEW" replaceIfExists="true">
		SELECT     T1.FinType, T1.FinCategory, T1.FinTypeDesc, T1.FinCcy, T1.FinDaysCalType, T1.FinAcType, T1.FinContingentAcType,
				           T1.FinIsGenRef, T1.FinMaxAmount, T1.FinMinAmount, T1.FinIsOpenNewFinAc, T1.FinDftStmtFrq, T1.FinIsAlwMD,
						   T1.FinSchdMthd, T1.FInIsAlwGrace, T1.FinHistRetension,  T1.EqualRepayment, T1.FinRateType,
						   T1.FinBaseRate, T1.FinSplRate, T1.FinIntRate, T1.FInMinRate, T1.FinMaxRate, T1.FinDftIntFrq, T1.FinIsIntCpz, T1.FinCpzFrq, 
				           T1.FinIsRvwAlw, T1.FinRvwFrq, T1.FinGrcRateType, T1.FinGrcBaseRate, T1.FinGrcSplRate, T1.FinGrcIntRate,
						   T1.FInGrcMinRate, T1.FinGrcMaxRate,T1.FinGrcDftIntFrq, T1.FinGrcIsIntCpz, T1.FinGrcCpzFrq, T1.FinGrcIsRvwAlw, 
						   T1.FinGrcRvwFrq, T1.FinMinTerm, T1.FinMaxTerm, T1.FinDftTerms, T1.FinRpyFrq, T1.FInRepayMethod, T1.FinIsAlwPartialRpy,
						   T1.FinIsAlwDifferment, T1.FinMaxDifferment, T1.FinIsAlwEarlyRpy, T1.FinIsAlwEarlySettle, T1.FinODRpyTries, T1.FinEarlyPayRule,
						   T1.FinEarlySettleRule, T1.FinDepositRestrictedTo,T1.FinAEBuyOrInception, T1.FinAESellOrMaturity, T1.FinIsActive, T1.Version,
						   T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType,
						   T1.WorkflowId, T1.StepFinance, T1.SteppingMandatory, T1.AlwManualSteps, T1.AlwdStepPolicies, T1.DftStepPolicy, 
						   T4.AcTypeDesc lovDescFinContingentAcTypeName,T5.AcTypeDesc lovDescFinAcTypeName,
				           T1.FinIsDwPayRequired, T1.FinRvwRateApplFor,T1.FinAlwRateChangeAnyDate, T1.FinIsIntCpzAtGrcEnd,
						   T1.FinElgRuleCode, T1.LimitElgRuleCode,T1.FinSchCalCodeOnRvw, T1.AlwPlanDeferment,
						   T1.PlanDeferCount, T1.FinAssetType, T1.PftPayAcType, T1.FinIsOpenPftPayAcc,T31.AcTypeDesc lovDescPftPayAcTypeName, 
				           T1.FinIsAlwGrcRepay, T1.FinGrcSchdMthd, T1.FinGrcMargin, T1.FinMargin,T1.FinScheduleOn, T1.FinGrcScheduleOn, 
				           T1.FinCommitmentReq, T1.FinCollateralReq, T1.FinDepreciationReq, T1.FinDepreciationFrq, T1.FinBankContingentAcType, 
				           T1.FinProvisionAcType, T38.AcTypeDesc lovDescFinBankContAcTypeName, T39.AcTypeDesc lovDescFinProvisionAcTypeName, 
				           T1.AllowRIAInvestment, T1.OverrideLimit, T1.LimitRequired,
						   T1.FinCommitmentOvrride, T1.FinCollateralOvrride, 
				           T1.FinPftUnChanged,T1.ApplyODPenalty, T1.ODIncGrcDays,T1.ODChargeType, T1.ODGraceDays, T1.ODChargeCalOn, T1.ODChargeAmtOrPerc,
						   T1.ODAllowWaiver, T1.ODMaxWaiverPerc, T1.FinDivision,T48.DivisionCodeDesc LovDescFinDivisionName, T1.FinSuspAcType,
						   T49.AcTypeDesc lovDescFinSuspAcTypeName,T1.Product, T1.StartDate, T1.EndDate,
						   T1.AllowDownpayPgm, T1.Remarks, 
						   T1.AlwEarlyPayMethods,T1.PastduePftCalMthd,T1.PastduePftMargin, 
						   T1.AlwAdvanceRent, T1.GrcAdvBaseRate, 
				           T1.GrcAdvMargin, T1.GrcAdvPftRate, T1.RpyAdvBaseRate,  
				           T1.RpyAdvMargin, T1.RpyAdvPftRate, T1.RollOverFinance, T1.RollOverFrq, T1.DownPayRule,
						   T59.RuleCode DownPayRuleDesc,T1.FinSuspTrigger, T1.FinSuspRemarks, T1.AlwMultiPartyDisb,T1.collateralType, T1.TDSApplicable,
						   T1.ManualSchedule,T1.ApplyGrcPricing ,T1.GrcPricingMethod, T1.ApplyRpyPricing, T1.RpyPricingMethod, T1.RpyHierarchy,
						   T67.RuleCode GrcPricingMethodDesc ,T68.RuleCode RpyPricingMethodDesc , T1.DroplineOD , T1.DroppingMethod ,
						   T1.RateChgAnyDay, T1.FinRepayPftOnFrq,
						    T1.AlwBPI , T1.BpiTreatment , T1.PftDueSchOn , T1.PlanEMIHAlw , T1.PlanEMIHMethod , T1.PlanEMIHMaxPerYear , T1.PlanEMIHMax , 
							T1.PlanEMIHLockPeriod , T1.PlanEMICpz , T1.UnPlanEMIHLockPeriod , T1.UnPlanEMICpz , T1.ReAgeCpz, T1.FddLockPeriod, 
							T1.AlwdRpyMethods, T1.MaxUnplannedEmi, T1.MaxReAgeHolidays, T1.RoundingMode,  T1.RoundingTarget,T1.FrequencyDays, T1.QuickDisb,T1.AlwReage,
							T1.AlwUnPlanEmiHoliday,T1.AlwMaxDisbCheckReq, T1.FinTypeDesc lovDescPromoFinTypeDesc, T3.ProductDesc lovDescProductCodeDesc,T3.ProductCategory,
							T1.ProfitCenterID, T69.ProfitCenterCode, T69.ProfitCenterDesc  
				FROM       RMTFinanceTypes T1 LEFT OUTER JOIN
				           BMTProduct T3 ON T1.FinCategory = T3.ProductCode LEFT OUTER JOIN
				           RMTAccountTypes T4 ON T1.FinContingentAcType = T4.AcType LEFT OUTER JOIN
				           RMTAccountTypes T38 ON T1.FinBankContingentAcType = T38.AcType LEFT OUTER JOIN
				           RMTAccountTypes T39 ON T1.FinProvisionAcType = T39.AcType LEFT OUTER JOIN
				           RMTAccountTypes T5 ON T1.FinAcType = T5.AcType LEFT OUTER JOIN
				           RMTAccountTypes T31 ON T1.PftPayAcType = T31.AcType LEFT OUTER JOIN
				           SMTDivisionDetail T48 ON T1.FinDivision = T48.DivisionCode LEFT OUTER JOIN
				           RMTAccountTypes T49 ON T1.FinSuspAcType = T49.AcType LEFT OUTER JOIN
				           Rules T59 ON T1.DownPayRule = T59.RuleId LEFT OUTER JOIN
				           Rules T67 ON T1.GrcPricingMethod = T67.RuleId  LEFT OUTER JOIN
				           Rules T68 ON T1.RpyPricingMethod = T68.RuleId LEFT OUTER JOIN 
                  		   ProfitCenters T69 ON T69.ProfitCenterID = T1.ProfitCenterID
	</createView>
</changeSet>


<changeSet id="64" author="Siva">
	<createView viewName="RMTFINANCETYPES_ORGVIEW" replaceIfExists="true">
		 SELECT		T1.FinType, T1.FinCategory, T1.FinTypeDesc, T1.FinCcy, T1.FinDaysCalType, T1.FinAcType, 
					T1.FinContingentAcType, T1.FinIsGenRef, T1.FinMaxAmount, T1.FinMinAmount, T1.FinIsOpenNewFinAc, 
					T1.FinIsAlwMD, T1.FinSchdMthd, T1.FInIsAlwGrace, T1.EqualRepayment, T1.FinRateType, 
					T1.FinBaseRate, T1.FinSplRate, T1.FinIntRate, T1.FInMinRate, T1.FinMaxRate, T1.FinDftIntFrq, 
					T1.FinIsIntCpz, T1.FinCpzFrq, T1.FinIsRvwAlw, T1.FinRvwFrq, T1.FinGrcRateType, T1.FinGrcBaseRate, 
					T1.FinGrcSplRate, T1.FinGrcIntRate, T1.FInGrcMinRate, T1.FinGrcMaxRate, T1.FinGrcDftIntFrq, 
					T1.FinGrcIsIntCpz, T1.FinGrcCpzFrq, T1.FinGrcIsRvwAlw, T1.FinGrcRvwFrq, T1.FinMinTerm, 
					T1.FinMaxTerm, T1.FinDftTerms, T1.FinRpyFrq, T1.FInRepayMethod, T1.FinIsAlwDifferment, 
					T1.FinMaxDifferment, T1.FinIsActive, T1.StepFinance, T1.SteppingMandatory, T1.AlwManualSteps, 
					T1.AlwdStepPolicies, T1.DftStepPolicy, T1.FinIsDwPayRequired, T1.FinRvwRateApplFor,
					T1.FinAlwRateChangeAnyDate,  T1.FinIsIntCpzAtGrcEnd, T1.FinSchCalCodeOnRvw, T1.AlwPlanDeferment, 
					T1.PlanDeferCount, T1.PftPayAcType, T1.FinIsOpenPftPayAcc, T1.FinIsAlwGrcRepay, T1.FinGrcSchdMthd, 
					T1.FinGrcMargin, T1.FinMargin, T1.FinCommitmentReq, T1.FinCollateralReq, T1.FinDepreciationReq, 
					T1.FinDepreciationFrq, T1.FinBankContingentAcType, T1.FinProvisionAcType, T1.AllowRIAInvestment, 
					T1.OverrideLimit, T1.LimitRequired, T1.FinCommitmentOvrride, T1.FinCollateralOvrride, 
					T1.FinRepayPftOnFrq, T1.FinPftUnChanged, T1.ApplyODPenalty, T1.ODIncGrcDays, T1.ODChargeType, 
					T1.ODGraceDays, T1.ODChargeCalOn, T1.ODChargeAmtOrPerc, T1.ODAllowWaiver, T1.ODMaxWaiverPerc, 
					T1.FinDivision, T3.DivisionCodeDesc LovDescFinDivisionName, T1.FinSuspAcType, T1.Product, 
					T1.StartDate, T1.EndDate, T1.AllowDownpayPgm, T1.FinTypeDesc lovDescPromoFinTypeDesc, T1.Remarks, 
					T4.PolicyDesc lovDescDftStepPolicyName, T1.PastduePftCalMthd,  T1.AlwAdvanceRent, 
					T1.GrcAdvBaseRate, T1.GrcAdvMargin, T1.GrcAdvPftRate, T1.RpyAdvBaseRate, T1.RpyAdvMargin, 
					T1.RpyAdvPftRate, T1.RollOverFinance, T1.RollOverFrq, T1.DownPayRule, T1.AlwMultiPartyDisb, 
					T1.collateralType, T1.TDSApplicable, T5.RuleCode DownPayRuleDesc, T1.ApplyGrcPricing, 
					T1.ApplyRpyPricing, T6.RuleCode GrcPricingMethodDesc, T7.RuleCode RpyPricingMethodDesc, 
					T1.DroplineOD, T1.DroppingMethod, T1.RateChgAnyDay, T4.StepType DftStepPolicyType, 
					T1.ManualSchedule,T8.ProductCategory, T1.AlwBPI , T1.BpiTreatment , T1.PftDueSchOn , 
					T1.PlanEMIHAlw , T1.PlanEMIHMethod , T1.PlanEMIHMaxPerYear , T1.PlanEMIHMax ,T1.PlanEMIHLockPeriod , 
					T1.PlanEMICpz , T1.UnPlanEMIHLockPeriod , T1.UnPlanEMICpz , T1.ReAgeCpz, T1.FddLockPeriod, 
					T1.AlwdRpyMethods, T1.MaxUnplannedEmi, T1.MaxReAgeHolidays, T1.RoundingMode,T1.RoundingTarget, T1.FrequencyDays, 
					T1.QuickDisb,T1.AlwReage,T1.AlwUnPlanEmiHoliday,T1.AlwMaxDisbCheckReq
					FROM			RMTFinanceTypes T1 INNER JOIN
                    SMTDivisionDetail T3 ON T1.FinDivision = T3.DivisionCode LEFT OUTER JOIN
					                StepPolicyHeader T4 ON T1.DftStepPolicy = T4.PolicyCode LEFT OUTER JOIN
					                Rules T5 ON T1.DownPayRule = T5.RuleId LEFT OUTER JOIN
					                Rules T6 ON T1.GrcPricingMethod = T6.RuleId LEFT OUTER JOIN
					                Rules T7 ON T1.RpyPricingMethod = T7.RuleId INNER JOIN
									BMTProduct T8 ON T1.FinCategory = T8.ProductCode
	</createView>
</changeSet>


<changeSet id="65" author="Siva">
	<createView viewName="RMTFINANCETYPES_VIEW" replaceIfExists="true">
		 SELECT     T1.FinType, T1.FinCategory, T1.FinTypeDesc, T1.FinCcy, T1.FinDaysCalType, T1.FinAcType, T1.FinContingentAcType,
			           T1.FinIsGenRef, T1.FinMaxAmount, T1.FinMinAmount, T1.FinIsOpenNewFinAc, T1.FinDftStmtFrq, T1.FinIsAlwMD,
					   T1.FinSchdMthd, T1.FInIsAlwGrace, T1.FinHistRetension, T1.EqualRepayment, T1.FinRateType,
					   T1.FinBaseRate, T1.FinSplRate, T1.FinIntRate, T1.FInMinRate, T1.FinMaxRate, T1.FinDftIntFrq, T1.FinIsIntCpz, T1.FinCpzFrq, 
			           T1.FinIsRvwAlw, T1.FinRvwFrq, T1.FinGrcRateType, T1.FinGrcBaseRate, T1.FinGrcSplRate, T1.FinGrcIntRate,
					   T1.FInGrcMinRate, T1.FinGrcMaxRate,T1.FinGrcDftIntFrq, T1.FinGrcIsIntCpz, T1.FinGrcCpzFrq, T1.FinGrcIsRvwAlw, 
					   T1.FinGrcRvwFrq, T1.FinMinTerm, T1.FinMaxTerm, T1.FinDftTerms, T1.FinRpyFrq, T1.FInRepayMethod, T1.FinIsAlwPartialRpy,
					   T1.FinIsAlwDifferment, T1.FinMaxDifferment, T1.FinIsAlwEarlyRpy, T1.FinIsAlwEarlySettle, T1.FinODRpyTries, T1.FinEarlyPayRule,
					   T1.FinEarlySettleRule, T1.FinDepositRestrictedTo,T1.FinAEBuyOrInception, T1.FinAESellOrMaturity, T1.FinIsActive, T1.Version,
					   T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType,
					   T1.WorkflowId, T1.StepFinance, T1.SteppingMandatory, T1.AlwManualSteps, T1.AlwdStepPolicies, T1.DftStepPolicy, 
					   T4.AcTypeDesc lovDescFinContingentAcTypeName,T5.AcTypeDesc lovDescFinAcTypeName,
			           T1.FinIsDwPayRequired, T1.FinRvwRateApplFor,T1.FinAlwRateChangeAnyDate,T1.FinIsIntCpzAtGrcEnd,
					  T1.FinElgRuleCode, T1.LimitElgRuleCode,T1.FinSchCalCodeOnRvw, T1.AlwPlanDeferment,
					   T1.PlanDeferCount, T1.FinAssetType, T1.PftPayAcType, T1.FinIsOpenPftPayAcc,T31.AcTypeDesc lovDescPftPayAcTypeName, 
			           T1.FinIsAlwGrcRepay, T1.FinGrcSchdMthd, T1.FinGrcMargin, T1.FinMargin,T1.FinScheduleOn, T1.FinGrcScheduleOn, 
			           T1.FinCommitmentReq, T1.FinCollateralReq, T1.FinDepreciationReq, T1.FinDepreciationFrq, T1.FinBankContingentAcType, 
			           T1.FinProvisionAcType, T38.AcTypeDesc lovDescFinBankContAcTypeName, T39.AcTypeDesc lovDescFinProvisionAcTypeName, 
			           T1.AllowRIAInvestment, T1.OverrideLimit, T1.LimitRequired,T1.FinCommitmentOvrride, T1.FinCollateralOvrride,
			           T1.FinPftUnChanged,T1.ApplyODPenalty, T1.ODIncGrcDays,T1.ODChargeType, T1.ODGraceDays, T1.ODChargeCalOn, T1.ODChargeAmtOrPerc,
					   T1.ODAllowWaiver, T1.ODMaxWaiverPerc, T1.FinDivision,T48.DivisionCodeDesc LovDescFinDivisionName, T1.FinSuspAcType,
					   T49.AcTypeDesc lovDescFinSuspAcTypeName, T52.ProductDesc lovDescProductCodeDesc,T1.Product, T1.StartDate, T1.EndDate,
					   T1.AllowDownpayPgm, T1.FinTypeDesc lovDescPromoFinTypeDesc, 
			          T1.Remarks, T1.AlwEarlyPayMethods, T1.PastduePftCalMthd,T1.PastduePftMargin, 
					  T1.AlwAdvanceRent, T1.GrcAdvBaseRate,T1.GrcAdvMargin, T1.GrcAdvPftRate, T1.RpyAdvBaseRate, 
			           T1.RpyAdvMargin, T1.RpyAdvPftRate, T1.RollOverFinance, T1.RollOverFrq, T1.DownPayRule,
					   T59.RuleCode DownPayRuleDesc,T1.FinSuspTrigger, T1.FinSuspRemarks, T1.AlwMultiPartyDisb,T1.collateralType, T1.TDSApplicable,
					   T1.ManualSchedule,T1.ApplyGrcPricing ,T1.GrcPricingMethod, T1.ApplyRpyPricing, T1.RpyPricingMethod, T1.RpyHierarchy,
					   T67.RuleCode GrcPricingMethodDesc ,T68.RuleCode RpyPricingMethodDesc , T1.DroplineOD , T1.DroppingMethod ,
					   T1.RateChgAnyDay,T52.ProductCategory , T1.FinRepayPftOnFrq,
					    T1.AlwBPI , T1.BpiTreatment , T1.PftDueSchOn , T1.PlanEMIHAlw , T1.PlanEMIHMethod , T1.PlanEMIHMaxPerYear , T1.PlanEMIHMax , 
						T1.PlanEMIHLockPeriod , T1.PlanEMICpz , T1.UnPlanEMIHLockPeriod , T1.UnPlanEMICpz , T1.ReAgeCpz, T1.FddLockPeriod, T1.AlwdRpyMethods, 
						T1.MaxUnplannedEmi, T1.MaxReAgeHolidays, T1.RoundingMode,T1.RoundingTarget, T1.FrequencyDays, T1.QuickDisb,T1.AlwMaxDisbCheckReq,
						T1.AlwReage,T1.AlwUnPlanEmiHoliday,
							T1.ProfitCenterID, T69.ProfitCenterCode, T69.ProfitCenterDesc  

			FROM       RMTFinanceTypes_Temp T1 LEFT OUTER JOIN
			           BMTProduct T52 ON T1.FinCategory = T52.ProductCode LEFT OUTER JOIN
			           RMTAccountTypes T4 ON T1.FinContingentAcType = T4.AcType LEFT OUTER JOIN
			           RMTAccountTypes T38 ON T1.FinBankContingentAcType = T38.AcType LEFT OUTER JOIN
			           RMTAccountTypes T39 ON T1.FinProvisionAcType = T39.AcType LEFT OUTER JOIN
			           RMTAccountTypes T5 ON T1.FinAcType = T5.AcType LEFT OUTER JOIN
			           RMTAccountTypes T31 ON T1.PftPayAcType = T31.AcType LEFT OUTER JOIN
			           SMTDivisionDetail T48 ON T1.FinDivision = T48.DivisionCode LEFT OUTER JOIN
			           RMTAccountTypes T49 ON T1.FinSuspAcType = T49.AcType LEFT OUTER JOIN
			           Rules T59 ON T1.DownPayRule = T59.RuleId LEFT OUTER JOIN
			           Rules T67 ON T1.GrcPricingMethod = T67.RuleId  LEFT OUTER JOIN
			           Rules T68 ON T1.RpyPricingMethod = T68.RuleId LEFT OUTER JOIN 
                       ProfitCenters T69 ON T69.ProfitCenterID = T1.ProfitCenterID
			UNION ALL
			SELECT     T1.FinType, T1.FinCategory, T1.FinTypeDesc, T1.FinCcy, T1.FinDaysCalType, T1.FinAcType, T1.FinContingentAcType,
			           T1.FinIsGenRef, T1.FinMaxAmount, T1.FinMinAmount, T1.FinIsOpenNewFinAc, T1.FinDftStmtFrq, T1.FinIsAlwMD,
					   T1.FinSchdMthd, T1.FInIsAlwGrace, T1.FinHistRetension, T1.EqualRepayment, T1.FinRateType,
					   T1.FinBaseRate, T1.FinSplRate, T1.FinIntRate, T1.FInMinRate, T1.FinMaxRate, T1.FinDftIntFrq, T1.FinIsIntCpz, T1.FinCpzFrq, 
			           T1.FinIsRvwAlw, T1.FinRvwFrq, T1.FinGrcRateType, T1.FinGrcBaseRate, T1.FinGrcSplRate, T1.FinGrcIntRate,
					   T1.FInGrcMinRate, T1.FinGrcMaxRate,T1.FinGrcDftIntFrq, T1.FinGrcIsIntCpz, T1.FinGrcCpzFrq, T1.FinGrcIsRvwAlw, 
					   T1.FinGrcRvwFrq, T1.FinMinTerm, T1.FinMaxTerm, T1.FinDftTerms, T1.FinRpyFrq, T1.FInRepayMethod, T1.FinIsAlwPartialRpy,
					   T1.FinIsAlwDifferment, T1.FinMaxDifferment, T1.FinIsAlwEarlyRpy, T1.FinIsAlwEarlySettle, T1.FinODRpyTries, T1.FinEarlyPayRule,
					   T1.FinEarlySettleRule, T1.FinDepositRestrictedTo,T1.FinAEBuyOrInception, T1.FinAESellOrMaturity, T1.FinIsActive, T1.Version,
					   T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType,
					   T1.WorkflowId, T1.StepFinance, T1.SteppingMandatory, T1.AlwManualSteps, T1.AlwdStepPolicies, T1.DftStepPolicy, 
					   T4.AcTypeDesc lovDescFinContingentAcTypeName,T5.AcTypeDesc lovDescFinAcTypeName, 
			           T1.FinIsDwPayRequired, T1.FinRvwRateApplFor,T1.FinAlwRateChangeAnyDate, T1.FinIsIntCpzAtGrcEnd,
					  T1.FinElgRuleCode, T1.LimitElgRuleCode,T1.FinSchCalCodeOnRvw, T1.AlwPlanDeferment,
					   T1.PlanDeferCount, T1.FinAssetType, T1.PftPayAcType, T1.FinIsOpenPftPayAcc,T31.AcTypeDesc lovDescPftPayAcTypeName, 
			           T1.FinIsAlwGrcRepay, T1.FinGrcSchdMthd, T1.FinGrcMargin, T1.FinMargin,T1.FinScheduleOn, T1.FinGrcScheduleOn, 
			           T1.FinCommitmentReq, T1.FinCollateralReq, T1.FinDepreciationReq, T1.FinDepreciationFrq, T1.FinBankContingentAcType, 
			           T1.FinProvisionAcType, T38.AcTypeDesc lovDescFinBankContAcTypeName, T39.AcTypeDesc lovDescFinProvisionAcTypeName, 
			           T1.AllowRIAInvestment, T1.OverrideLimit, T1.LimitRequired, T1.FinCommitmentOvrride, T1.FinCollateralOvrride,
			           T1.FinPftUnChanged,T1.ApplyODPenalty, T1.ODIncGrcDays,T1.ODChargeType, T1.ODGraceDays, T1.ODChargeCalOn, T1.ODChargeAmtOrPerc,
					   T1.ODAllowWaiver, T1.ODMaxWaiverPerc, T1.FinDivision,T48.DivisionCodeDesc LovDescFinDivisionName, T1.FinSuspAcType,
					   T49.AcTypeDesc lovDescFinSuspAcTypeName, T52.ProductDesc lovDescProductCodeDesc,T1.Product, T1.StartDate, T1.EndDate,
					  T1.AllowDownpayPgm, T1.FinTypeDesc lovDescPromoFinTypeDesc, T1.Remarks, T1.AlwEarlyPayMethods, T1.PastduePftCalMthd,T1.PastduePftMargin, 
					   T1.AlwAdvanceRent, T1.GrcAdvBaseRate,  T1.GrcAdvMargin, T1.GrcAdvPftRate, T1.RpyAdvBaseRate, 
			           T1.RpyAdvMargin, T1.RpyAdvPftRate, T1.RollOverFinance, T1.RollOverFrq, T1.DownPayRule,
					   T59.RuleCode DownPayRuleDesc,T1.FinSuspTrigger, T1.FinSuspRemarks, T1.AlwMultiPartyDisb,T1.collateralType, T1.TDSApplicable,
					   T1.ManualSchedule,T1.ApplyGrcPricing ,T1.GrcPricingMethod, T1.ApplyRpyPricing, T1.RpyPricingMethod, T1.RpyHierarchy,
					   T67.RuleCode GrcPricingMethodDesc ,T68.RuleCode RpyPricingMethodDesc , T1.DroplineOD , T1.DroppingMethod ,
					   T1.RateChgAnyDay,T52.ProductCategory ,T1.FinRepayPftOnFrq,
					    T1.AlwBPI , T1.BpiTreatment , T1.PftDueSchOn , T1.PlanEMIHAlw , T1.PlanEMIHMethod , T1.PlanEMIHMaxPerYear , T1.PlanEMIHMax , 
						T1.PlanEMIHLockPeriod , T1.PlanEMICpz , T1.UnPlanEMIHLockPeriod , T1.UnPlanEMICpz , T1.ReAgeCpz, T1.FddLockPeriod, T1.AlwdRpyMethods, 
						T1.MaxUnplannedEmi, T1.MaxReAgeHolidays,T1.RoundingMode,T1.RoundingTarget, T1.FrequencyDays, T1.QuickDisb,T1.AlwMaxDisbCheckReq,
						T1.AlwReage,T1.AlwUnPlanEmiHoliday,
							T1.ProfitCenterID, T69.ProfitCenterCode, T69.ProfitCenterDesc  

			FROM       RMTFinanceTypes T1 LEFT OUTER JOIN
			           BMTProduct T52 ON T1.FinCategory = T52.ProductCode LEFT OUTER JOIN
			           RMTAccountTypes T4 ON T1.FinContingentAcType = T4.AcType LEFT OUTER JOIN
			           RMTAccountTypes T38 ON T1.FinBankContingentAcType = T38.AcType LEFT OUTER JOIN
			           RMTAccountTypes T39 ON T1.FinProvisionAcType = T39.AcType LEFT OUTER JOIN
			           RMTAccountTypes T5 ON T1.FinAcType = T5.AcType LEFT OUTER JOIN
			           RMTAccountTypes T31 ON T1.PftPayAcType = T31.AcType LEFT OUTER JOIN
			           SMTDivisionDetail T48 ON T1.FinDivision = T48.DivisionCode LEFT OUTER JOIN
			           RMTAccountTypes T49 ON T1.FinSuspAcType = T49.AcType LEFT OUTER JOIN
			           Rules T59 ON T1.DownPayRule = T59.RuleId LEFT OUTER JOIN
			           Rules T67 ON T1.GrcPricingMethod = T67.RuleId  LEFT OUTER JOIN
			           Rules T68 ON T1.RpyPricingMethod = T68.RuleId LEFT OUTER JOIN 
                       ProfitCenters T69 ON T69.ProfitCenterID = T1.ProfitCenterID
			WHERE     (NOT EXISTS
			                          (SELECT     1 Expr1
			                            FROM          RMTFinanceTypes_Temp
			                            WHERE      (FinType = T1.FinType)))
	</createView>
</changeSet>
<changeSet id="66" author="Siva">
	<sql>
		UPDATE RMTFINANCETYPES SET ROUNDINGMODE = 'HALF_DOWN';
		UPDATE RMTFINANCETYPES SET ROUNDINGTARGET = 100;
	</sql>
</changeSet>

	<changeSet id="67" author="Siva">
		<modifyDataType tableName="RMTFinanceTypes" columnName="RoundingMode"
			newDataType="varchar(10)" />
	</changeSet>
	<changeSet id="68" author="Siva">
		<modifyDataType tableName="RMTFinanceTypes_Temp" columnName="RoundingMode"
			newDataType="varchar(10)" />
	</changeSet>
	
	<changeSet id="69" author="Siva">
	<sql>
		UPDATE RMTFINANCETYPES SET ROUNDINGMODE = 'HALF_DOWN';
		UPDATE RMTFINANCETYPES SET ROUNDINGTARGET = 100;
	</sql>
</changeSet>
<changeSet author="Pruthvi" id="70">
<sql>
update WorkFlowDetails set workflowactive='0' where workflowtype='BAJAJ_LOAN_ORG';
update WorkFlowDetails set workflowactive='0' where workflowtype='BFSD_ORIGINATION';
	</sql>
	</changeSet>

<changeSet author="Pruthvi" id="71">
		<insert tableName="WorkFlowDetails">
			<column name="WorkFlowId"
				valueComputed="(select max(WorkFlowId) + 1 from WorkFlowDetails)" />
			<column name="WorkFlowType">BAJAJ_LOAN_ORG</column>
			<column name="WorkFlowSubType">Bajaj Loan Origination</column>
			<column name="WorkFlowDesc">Maker/checker for Bajaj Loan Origination</column>
			<column name="JsonDesign" type="nclob"><![CDATA[NULL]]></column>
			<column name="SvgDesign" type="nclob"><![CDATA[NULL]]></column>
			<column name="WorkFlowXml" type="clob"><![CDATA[NULL]]></column>
			<column name="WorkFlowRoles">LOAN_ORG_MAKER;LOAN_ORG_APPROVER</column>
			<column name="FirstTaskOwner">LOAN_ORG_MAKER</column>
			<column name="WorkFlowActive">1</column>
			<column name="Version">5</column>
			<column name="LastMntBy">1000</column>
			<column name="LastMntOn">11-MAY-2017</column>
			<column name="RecordStatus">Null</column>
			<column name="RoleCode">Null</column>
			<column name="NextRoleCode">Null</column>
			<column name="TaskId">Null</column>
			<column name="NextTaskId">Null</column>
			<column name="RecordType">NULL</column>
		</insert>
	</changeSet>
	
<changeSet id="72" author="Jayant">
		<update tableName="WORKFLOWDETAILS">
			<column name="JSONDESIGN" type="NCLOB"><![CDATA[{"resourceId":"CCMS_MSTGRP1","properties":{"name":"Finance Rate Change\n","documentation":"","auditing":"","monitoring":"","executable":"true","package":"","vardefs":"","imports":"","id":"FIN_RATECHANGE","version":"","author":"","language":"English","namespaces":"","targetnamespace":"http://www.omg.org/bpmn20","expressionlanguage":"http://www.w3.org/1999/XPath","typelanguage":"http://www.w3.org/2001/XMLSchema","creationdate":"","modificationdate":""},"stencil":{"id":"BPMNDiagram"},"childShapes":[{"resourceId":"_FF9D4911-C022-42B0-B00A-9C353226F4A7","properties":{"name":"Start","documentation":"","auditing":"","monitoring":"","dataoutputassociations":"","dataoutput":"","outputset":"","bgcolor":"#C5F970","trigger":"None"},"stencil":{"id":"StartNoneEvent"},"childShapes":[],"outgoing":[{"resourceId":"_5EE9B2AF-F8EA-432C-BB52-88124AA2A117"}],"bounds":{"lowerRight":{"x":116,"y":138},"upperLeft":{"x":86,"y":108}},"dockers":[]},{"resourceId":"_7B64C6C5-337C-44C2-98C6-A723EC862BFF","properties":{"name":"Maker","documentation":"","auditing":"","monitoring":"","categories":"","startquantity":1,"completionquantity":1,"isforcompensation":false,"assignments":"","callacitivity":"","tasktype":"User","implementation":"webService","resources":"","messageref":"","operationref":"","instantiate":"","script":"","script_language":"","inmessagetype":"","outmessagetype":"","servicename":"","namespace":"","operation":"","porttype":"","wsdlurl":"","bgcolor":"#FF6600","looptype":"None","testbefore":"","loopcondition":"","loopmaximum":"","loopcardinality":"","loopdatainput":"","loopdataoutput":"","inputdataitem":"","outputdataitem":"","behavior":"all","complexbehaviordefinition":"","completioncondition":"","onebehavioreventref":"signal","nonebehavioreventref":"signal","properties":"","datainputset":"","dataoutputset":"","ruleflowgroup":"","onentryactions":"scope=Own","onexitactions":"","taskname":"","actors":"LOAN_ORG_MAKER"},"stencil":{"id":"Task"},"childShapes":[],"outgoing":[{"resourceId":"_9305AD0C-8EA2-46BB-AD97-8B650D65B67D"},{"resourceId":"_14CED7D6-CEC3-49D1-A614-5168AD7F13F6"}],"bounds":{"lowerRight":{"x":250,"y":163},"upperLeft":{"x":150,"y":83}},"dockers":[]},{"resourceId":"_5EE9B2AF-F8EA-432C-BB52-88124AA2A117","properties":{"name":"","documentation":"","auditing":"","monitoring":"","conditiontype":"None","conditionexpression":"","isimmediate":"","showdiamondmarker":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"_7B64C6C5-337C-44C2-98C6-A723EC862BFF"}],"bounds":{"lowerRight":{"x":149.5,"y":123},"upperLeft":{"x":116.6953125,"y":123}},"dockers":[{"x":15,"y":15},{"x":50,"y":40}],"target":{"resourceId":"_7B64C6C5-337C-44C2-98C6-A723EC862BFF"}},{"resourceId":"_77E97F8E-6071-449B-9BD7-4B0F3A5A657A","properties":{"name":"Approver","documentation":"","auditing":"","monitoring":"","categories":"","startquantity":1,"completionquantity":1,"isforcompensation":"","assignments":"","callacitivity":"","tasktype":"User","implementation":"webService","resources":"","messageref":"","operationref":"","instantiate":"","script":"","script_language":"","inmessagetype":"","outmessagetype":"","servicename":"","namespace":"","operation":"","porttype":"","wsdlurl":"","bgcolor":"#FF6600","looptype":"None","testbefore":"","loopcondition":"","loopmaximum":"","loopcardinality":"","loopdatainput":"","loopdataoutput":"","inputdataitem":"","outputdataitem":"","behavior":"all","complexbehaviordefinition":"","completioncondition":"","onebehavioreventref":"signal","nonebehavioreventref":"signal","properties":"","datainputset":"","dataoutputset":"","ruleflowgroup":"","onentryactions":"show_tabs=Accounting","onexitactions":"","taskname":"","actors":"LOAN_ORG_APPROVER"},"stencil":{"id":"Task"},"childShapes":[],"outgoing":[{"resourceId":"_00E367A7-32B3-4238-95E1-394CAF4A448E"}],"bounds":{"lowerRight":{"x":430,"y":163},"upperLeft":{"x":330,"y":83}},"dockers":[]},{"resourceId":"_9305AD0C-8EA2-46BB-AD97-8B650D65B67D","properties":{"name":"Submit","documentation":"Submit=Submitted","auditing":"","monitoring":"","conditiontype":"None","conditionexpression":"vo.recordStatus == 'Submitted'","isimmediate":"","showdiamondmarker":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"_77E97F8E-6071-449B-9BD7-4B0F3A5A657A"}],"bounds":{"lowerRight":{"x":329.78125,"y":123},"upperLeft":{"x":250.21875,"y":123}},"dockers":[{"x":50,"y":40},{"x":50,"y":40}],"target":{"resourceId":"_77E97F8E-6071-449B-9BD7-4B0F3A5A657A"}},{"resourceId":"_C0021C4A-21DA-4AB3-83DF-43DE36042CD0","properties":{"name":"","documentation":"","auditing":"","monitoring":"","categories":"","assignments":"","pool":"","lanes":"","gates":"","gates_outgoingsequenceflow":"","gates_assignments":"","bgcolor":"#ffffff","gatewaytype":"XOR","xortype":"Data","markervisible":"true","defaultgate":"","gate_outgoingsequenceflow":"","gate_assignments":""},"stencil":{"id":"Exclusive_Databased_Gateway"},"childShapes":[],"outgoing":[{"resourceId":"_0C53F5CF-91B6-48EF-AA7A-0FFB1BDC9D56"},{"resourceId":"_2AE689CD-94CB-4752-9CE3-748559E63D53"},{"resourceId":"_A96EF8F0-08CB-4FD7-8DAC-5CF5E6E1F059"}],"bounds":{"lowerRight":{"x":515,"y":143},"upperLeft":{"x":475,"y":103}},"dockers":[]},{"resourceId":"_00E367A7-32B3-4238-95E1-394CAF4A448E","properties":{"name":"","documentation":"","auditing":"","monitoring":"","conditiontype":"None","conditionexpression":"","isimmediate":"","showdiamondmarker":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"_C0021C4A-21DA-4AB3-83DF-43DE36042CD0"}],"bounds":{"lowerRight":{"x":474.64844687000755,"y":123.4097335362338},"upperLeft":{"x":430.62889687999245,"y":123.2191727137662}},"dockers":[{"x":50,"y":40},{"x":20.5,"y":20.5}],"target":{"resourceId":"_C0021C4A-21DA-4AB3-83DF-43DE36042CD0"}},{"resourceId":"_DD6234E6-F810-4F4B-BD18-D36A2B5A4618","properties":{"name":"Complete Process","documentation":"","auditing":"","monitoring":"","categories":"","startquantity":1,"completionquantity":1,"isforcompensation":"","assignments":"","callacitivity":"","tasktype":"Service","implementation":"webService","resources":"","messageref":" ","operationref":"","instantiate":"","script":"","script_language":"","inmessagetype":"","outmessagetype":"","servicename":"","namespace":"","operation":"doApprove","porttype":"","wsdlurl":"","bgcolor":"#ffffcc","looptype":"None","testbefore":"","loopcondition":"","loopmaximum":"","loopcardinality":"","loopdatainput":"","loopdataoutput":"","inputdataitem":"","outputdataitem":"","behavior":"all","complexbehaviordefinition":"","completioncondition":"","onebehavioreventref":"signal","nonebehavioreventref":"signal","properties":"","datainputset":"","dataoutputset":"","ruleflowgroup":"","onentryactions":"","onexitactions":"","taskname":"","actors":""},"stencil":{"id":"Task"},"childShapes":[],"outgoing":[{"resourceId":"_A921FE66-42C4-42CC-BB5C-15ABAA47A008"}],"bounds":{"lowerRight":{"x":700,"y":163},"upperLeft":{"x":600,"y":83}},"dockers":[]},{"resourceId":"_0C53F5CF-91B6-48EF-AA7A-0FFB1BDC9D56","properties":{"name":"Approve","documentation":"Approve=Approved","auditing":"","monitoring":"","conditiontype":"None","conditionexpression":"vo.recordStatus == 'Approved'","isimmediate":"","showdiamondmarker":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"_DD6234E6-F810-4F4B-BD18-D36A2B5A4618"}],"bounds":{"lowerRight":{"x":599.5117239866028,"y":123.43426377099223},"upperLeft":{"x":515.8124947633972,"y":123.16339247900777}},"dockers":[{"x":20.5,"y":20.5},{"x":50,"y":40}],"target":{"resourceId":"_DD6234E6-F810-4F4B-BD18-D36A2B5A4618"}},{"resourceId":"_73682DD6-4D65-497A-BAA5-B80623CB6C01","properties":{"name":"Approved","documentation":"","auditing":"","monitoring":"","datainputassociations":"","datainput":"","inputset":"","bgcolor":"#F47677","trigger":"None"},"stencil":{"id":"EndNoneEvent"},"childShapes":[],"outgoing":[],"bounds":{"lowerRight":{"x":793,"y":137},"upperLeft":{"x":765,"y":109}},"dockers":[]},{"resourceId":"_A921FE66-42C4-42CC-BB5C-15ABAA47A008","properties":{"name":"","documentation":"","auditing":"","monitoring":"","conditiontype":"None","conditionexpression":"","isimmediate":"","showdiamondmarker":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"_73682DD6-4D65-497A-BAA5-B80623CB6C01"}],"bounds":{"lowerRight":{"x":764.8984375,"y":123},"upperLeft":{"x":700.3828125,"y":123}},"dockers":[{"x":50,"y":40},{"x":14,"y":14}],"target":{"resourceId":"_73682DD6-4D65-497A-BAA5-B80623CB6C01"}},{"resourceId":"_2AE689CD-94CB-4752-9CE3-748559E63D53","properties":{"name":"Resubmit","documentation":"Resubmit=Resubmitted","auditing":"Notes","monitoring":"","conditiontype":"None","conditionexpression":"vo.recordStatus == 'Resubmitted'","isimmediate":"","showdiamondmarker":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"_7B64C6C5-337C-44C2-98C6-A723EC862BFF"}],"bounds":{"lowerRight":{"x":495.5,"y":102.53125},"upperLeft":{"x":200,"y":17}},"dockers":[{"x":20.5,"y":20.5},{"x":495.5,"y":17},{"x":200,"y":17},{"x":50,"y":40}],"target":{"resourceId":"_7B64C6C5-337C-44C2-98C6-A723EC862BFF"}},{"resourceId":"_5F12FFE5-4B96-49AF-A35C-73A4DBEE36B0","properties":{"name":"Cancel Process","documentation":"","auditing":"","monitoring":"","categories":"","startquantity":1,"completionquantity":1,"isforcompensation":"","assignments":"","callacitivity":"","tasktype":"Service","implementation":"webService","resources":"","messageref":"","operationref":"","instantiate":"","script":"","script_language":"","inmessagetype":"","outmessagetype":"","servicename":"","namespace":"","operation":"doReject","porttype":"","wsdlurl":"","bgcolor":"#ffffcc","looptype":"None","testbefore":"","loopcondition":"","loopmaximum":"","loopcardinality":"","loopdatainput":"","loopdataoutput":"","inputdataitem":"","outputdataitem":"","behavior":"all","complexbehaviordefinition":"","completioncondition":"","onebehavioreventref":"signal","nonebehavioreventref":"signal","properties":"","datainputset":"","dataoutputset":"","ruleflowgroup":"","onentryactions":"","onexitactions":"","taskname":"","actors":""},"stencil":{"id":"Task"},"childShapes":[],"outgoing":[{"resourceId":"_DAFA463C-32E5-4B16-BC89-284B69E70681"}],"bounds":{"lowerRight":{"x":545,"y":290},"upperLeft":{"x":445,"y":210}},"dockers":[]},{"resourceId":"_A96EF8F0-08CB-4FD7-8DAC-5CF5E6E1F059","properties":{"name":"Reject","documentation":"Reject=Rejected","auditing":"","monitoring":"","conditiontype":"None","conditionexpression":"vo.recordStatus == 'Rejected'","isimmediate":"","showdiamondmarker":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"_5F12FFE5-4B96-49AF-A35C-73A4DBEE36B0"}],"bounds":{"lowerRight":{"x":495.4218287117048,"y":209.46875781130998},"upperLeft":{"x":495.1602025382952,"y":143.27733593869002}},"dockers":[{"x":20.5,"y":20.5},{"x":50,"y":40}],"target":{"resourceId":"_5F12FFE5-4B96-49AF-A35C-73A4DBEE36B0"}},{"resourceId":"_87A46993-91DA-47E0-811B-2F196FBAD6AA","properties":{"name":"Rejected","documentation":"","auditing":"","monitoring":"","datainputassociations":"","datainput":"","inputset":"","bgcolor":"#F47677","trigger":"None"},"stencil":{"id":"EndNoneEvent"},"childShapes":[],"outgoing":[],"bounds":{"lowerRight":{"x":509,"y":358},"upperLeft":{"x":481,"y":330}},"dockers":[]},{"resourceId":"_DAFA463C-32E5-4B16-BC89-284B69E70681","properties":{"name":"","documentation":"","auditing":"","monitoring":"","conditiontype":"None","conditionexpression":"","isimmediate":"","showdiamondmarker":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"_87A46993-91DA-47E0-811B-2F196FBAD6AA"}],"bounds":{"lowerRight":{"x":495,"y":329.78125},"upperLeft":{"x":495,"y":290.65625}},"dockers":[{"x":50,"y":40},{"x":14,"y":14}],"target":{"resourceId":"_87A46993-91DA-47E0-811B-2F196FBAD6AA"}},{"resourceId":"_14CED7D6-CEC3-49D1-A614-5168AD7F13F6","properties":{"name":"Cancel","documentation":"Cancel=Cancelled","auditing":"Notes","monitoring":"","conditiontype":"None","conditionexpression":"vo.recordStatus == 'Cancelled'","isimmediate":"","showdiamondmarker":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"_5F12FFE5-4B96-49AF-A35C-73A4DBEE36B0"}],"bounds":{"lowerRight":{"x":444.44921875,"y":250},"upperLeft":{"x":200,"y":163.6875}},"dockers":[{"x":50,"y":40},{"x":200,"y":250},{"x":50,"y":40}],"target":{"resourceId":"_5F12FFE5-4B96-49AF-A35C-73A4DBEE36B0"}}],"bounds":{"lowerRight":{"x":3000,"y":2000},"upperLeft":{"x":0,"y":0}},"stencilset":{"url":"bpmn2.0pbpm","namespace":"http://b3mn.org/stencilset/bpmn2.0#"},"ssextensions":[]}]]></column>
			<column name="WORKFLOWXML" type="CLOB"><![CDATA[<bpmn2:definitions xmlns:bpmn2="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns="http://www.omg.org/bpmn20" xmlns:drools="http://www.jboss.org/drools" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="_5EMkwTY9EeeN5MAjx8Ez1A" xsi:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd http://www.jboss.org/drools drools.xsd" targetNamespace="http://www.omg.org/bpmn20"><bpmn2:itemDefinition id="_DD6234E6-F810-4F4B-BD18-D36A2B5A4618_InMessageType" /><bpmn2:itemDefinition id="_5F12FFE5-4B96-49AF-A35C-73A4DBEE36B0_InMessageType" /><bpmn2:message id="_DD6234E6-F810-4F4B-BD18-D36A2B5A4618_InMessage" itemRef="_DD6234E6-F810-4F4B-BD18-D36A2B5A4618_InMessageType" /><bpmn2:message id="_5F12FFE5-4B96-49AF-A35C-73A4DBEE36B0_InMessage" itemRef="_5F12FFE5-4B96-49AF-A35C-73A4DBEE36B0_InMessageType" /><bpmn2:interface id="_5EMk1jY9EeeN5MAjx8Ez1A"><bpmn2:operation id="_DD6234E6-F810-4F4B-BD18-D36A2B5A4618_ServiceOperation" name="doApprove"><bpmn2:inMessageRef>_DD6234E6-F810-4F4B-BD18-D36A2B5A4618_InMessage</bpmn2:inMessageRef></bpmn2:operation></bpmn2:interface><bpmn2:interface id="_5EMk1zY9EeeN5MAjx8Ez1A"><bpmn2:operation id="_5F12FFE5-4B96-49AF-A35C-73A4DBEE36B0_ServiceOperation" name="doReject"><bpmn2:inMessageRef>_5F12FFE5-4B96-49AF-A35C-73A4DBEE36B0_InMessage</bpmn2:inMessageRef></bpmn2:operation></bpmn2:interface><bpmn2:process id="FIN_RATECHANGE" name="Finance Rate Change " isExecutable="true"><bpmn2:startEvent id="_FF9D4911-C022-42B0-B00A-9C353226F4A7" drools:bgcolor="#C5F970" name="Start"><bpmn2:outgoing>_5EE9B2AF-F8EA-432C-BB52-88124AA2A117</bpmn2:outgoing></bpmn2:startEvent><bpmn2:userTask id="_7B64C6C5-337C-44C2-98C6-A723EC862BFF" drools:bgcolor="#FF6600" name="Maker"><bpmn2:extensionElements><drools:onEntry-script scriptFormat="http://www.java.com/java"><drools:script>scope=Own</drools:script></drools:onEntry-script></bpmn2:extensionElements><bpmn2:incoming>_5EE9B2AF-F8EA-432C-BB52-88124AA2A117</bpmn2:incoming><bpmn2:incoming>_2AE689CD-94CB-4752-9CE3-748559E63D53</bpmn2:incoming><bpmn2:outgoing>_9305AD0C-8EA2-46BB-AD97-8B650D65B67D</bpmn2:outgoing><bpmn2:outgoing>_14CED7D6-CEC3-49D1-A614-5168AD7F13F6</bpmn2:outgoing><bpmn2:potentialOwner id="_5EMkwjY9EeeN5MAjx8Ez1A"><bpmn2:resourceAssignmentExpression id="_5EMkwzY9EeeN5MAjx8Ez1A"><bpmn2:formalExpression id="_5EMkxDY9EeeN5MAjx8Ez1A">LOAN_ORG_MAKER</bpmn2:formalExpression></bpmn2:resourceAssignmentExpression></bpmn2:potentialOwner></bpmn2:userTask><bpmn2:sequenceFlow id="_5EE9B2AF-F8EA-432C-BB52-88124AA2A117" sourceRef="_FF9D4911-C022-42B0-B00A-9C353226F4A7" targetRef="_7B64C6C5-337C-44C2-98C6-A723EC862BFF" /><bpmn2:userTask id="_77E97F8E-6071-449B-9BD7-4B0F3A5A657A" drools:bgcolor="#FF6600" name="Approver"><bpmn2:extensionElements><drools:onEntry-script scriptFormat="http://www.java.com/java"><drools:script>show_tabs=Accounting</drools:script></drools:onEntry-script></bpmn2:extensionElements><bpmn2:incoming>_9305AD0C-8EA2-46BB-AD97-8B650D65B67D</bpmn2:incoming><bpmn2:outgoing>_00E367A7-32B3-4238-95E1-394CAF4A448E</bpmn2:outgoing><bpmn2:potentialOwner id="_5EMkxTY9EeeN5MAjx8Ez1A"><bpmn2:resourceAssignmentExpression id="_5EMkxjY9EeeN5MAjx8Ez1A"><bpmn2:formalExpression id="_5EMkxzY9EeeN5MAjx8Ez1A">LOAN_ORG_APPROVER</bpmn2:formalExpression></bpmn2:resourceAssignmentExpression></bpmn2:potentialOwner></bpmn2:userTask><bpmn2:sequenceFlow id="_9305AD0C-8EA2-46BB-AD97-8B650D65B67D" name="Submit" sourceRef="_7B64C6C5-337C-44C2-98C6-A723EC862BFF" targetRef="_77E97F8E-6071-449B-9BD7-4B0F3A5A657A"><bpmn2:documentation id="_5EMkyDY9EeeN5MAjx8Ez1A">Submit=Submitted</bpmn2:documentation><bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="_5EMkyTY9EeeN5MAjx8Ez1A">vo.recordStatus == 'Submitted'</bpmn2:conditionExpression></bpmn2:sequenceFlow><bpmn2:exclusiveGateway id="_C0021C4A-21DA-4AB3-83DF-43DE36042CD0" drools:bgcolor="#ffffff" drools:dg="" name="" gatewayDirection="Diverging"><bpmn2:incoming>_00E367A7-32B3-4238-95E1-394CAF4A448E</bpmn2:incoming><bpmn2:outgoing>_0C53F5CF-91B6-48EF-AA7A-0FFB1BDC9D56</bpmn2:outgoing><bpmn2:outgoing>_2AE689CD-94CB-4752-9CE3-748559E63D53</bpmn2:outgoing><bpmn2:outgoing>_A96EF8F0-08CB-4FD7-8DAC-5CF5E6E1F059</bpmn2:outgoing></bpmn2:exclusiveGateway><bpmn2:sequenceFlow id="_00E367A7-32B3-4238-95E1-394CAF4A448E" sourceRef="_77E97F8E-6071-449B-9BD7-4B0F3A5A657A" targetRef="_C0021C4A-21DA-4AB3-83DF-43DE36042CD0" /><bpmn2:serviceTask id="_DD6234E6-F810-4F4B-BD18-D36A2B5A4618" drools:bgcolor="#ffffcc" drools:servicetaskoperation="doApprove" name="Complete Process" operationRef="_DD6234E6-F810-4F4B-BD18-D36A2B5A4618_ServiceOperation"><bpmn2:incoming>_0C53F5CF-91B6-48EF-AA7A-0FFB1BDC9D56</bpmn2:incoming><bpmn2:outgoing>_A921FE66-42C4-42CC-BB5C-15ABAA47A008</bpmn2:outgoing></bpmn2:serviceTask><bpmn2:sequenceFlow id="_0C53F5CF-91B6-48EF-AA7A-0FFB1BDC9D56" name="Approve" sourceRef="_C0021C4A-21DA-4AB3-83DF-43DE36042CD0" targetRef="_DD6234E6-F810-4F4B-BD18-D36A2B5A4618"><bpmn2:documentation id="_5EMkyjY9EeeN5MAjx8Ez1A">Approve=Approved</bpmn2:documentation><bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="_5EMkyzY9EeeN5MAjx8Ez1A">vo.recordStatus == 'Approved'</bpmn2:conditionExpression></bpmn2:sequenceFlow><bpmn2:endEvent id="_73682DD6-4D65-497A-BAA5-B80623CB6C01" drools:bgcolor="#F47677" name="Approved"><bpmn2:incoming>_A921FE66-42C4-42CC-BB5C-15ABAA47A008</bpmn2:incoming></bpmn2:endEvent><bpmn2:sequenceFlow id="_A921FE66-42C4-42CC-BB5C-15ABAA47A008" sourceRef="_DD6234E6-F810-4F4B-BD18-D36A2B5A4618" targetRef="_73682DD6-4D65-497A-BAA5-B80623CB6C01" /><bpmn2:sequenceFlow id="_2AE689CD-94CB-4752-9CE3-748559E63D53" name="Resubmit" sourceRef="_C0021C4A-21DA-4AB3-83DF-43DE36042CD0" targetRef="_7B64C6C5-337C-44C2-98C6-A723EC862BFF"><bpmn2:documentation id="_5EMkzDY9EeeN5MAjx8Ez1A">Resubmit=Resubmitted</bpmn2:documentation><bpmn2:auditing id="_5EMkzTY9EeeN5MAjx8Ez1A"><bpmn2:documentation id="_5EMkzjY9EeeN5MAjx8Ez1A">Notes</bpmn2:documentation></bpmn2:auditing><bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="_5EMkzzY9EeeN5MAjx8Ez1A">vo.recordStatus == 'Resubmitted'</bpmn2:conditionExpression></bpmn2:sequenceFlow><bpmn2:serviceTask id="_5F12FFE5-4B96-49AF-A35C-73A4DBEE36B0" drools:bgcolor="#ffffcc" drools:servicetaskoperation="doReject" name="Cancel Process" operationRef="_5F12FFE5-4B96-49AF-A35C-73A4DBEE36B0_ServiceOperation"><bpmn2:incoming>_A96EF8F0-08CB-4FD7-8DAC-5CF5E6E1F059</bpmn2:incoming><bpmn2:incoming>_14CED7D6-CEC3-49D1-A614-5168AD7F13F6</bpmn2:incoming><bpmn2:outgoing>_DAFA463C-32E5-4B16-BC89-284B69E70681</bpmn2:outgoing></bpmn2:serviceTask><bpmn2:sequenceFlow id="_A96EF8F0-08CB-4FD7-8DAC-5CF5E6E1F059" name="Reject" sourceRef="_C0021C4A-21DA-4AB3-83DF-43DE36042CD0" targetRef="_5F12FFE5-4B96-49AF-A35C-73A4DBEE36B0"><bpmn2:documentation id="_5EMk0DY9EeeN5MAjx8Ez1A">Reject=Rejected</bpmn2:documentation><bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="_5EMk0TY9EeeN5MAjx8Ez1A">vo.recordStatus == 'Rejected'</bpmn2:conditionExpression></bpmn2:sequenceFlow><bpmn2:endEvent id="_87A46993-91DA-47E0-811B-2F196FBAD6AA" drools:bgcolor="#F47677" name="Rejected"><bpmn2:incoming>_DAFA463C-32E5-4B16-BC89-284B69E70681</bpmn2:incoming></bpmn2:endEvent><bpmn2:sequenceFlow id="_DAFA463C-32E5-4B16-BC89-284B69E70681" sourceRef="_5F12FFE5-4B96-49AF-A35C-73A4DBEE36B0" targetRef="_87A46993-91DA-47E0-811B-2F196FBAD6AA" /><bpmn2:sequenceFlow id="_14CED7D6-CEC3-49D1-A614-5168AD7F13F6" name="Cancel" sourceRef="_7B64C6C5-337C-44C2-98C6-A723EC862BFF" targetRef="_5F12FFE5-4B96-49AF-A35C-73A4DBEE36B0"><bpmn2:documentation id="_5EMk0jY9EeeN5MAjx8Ez1A">Cancel=Cancelled</bpmn2:documentation><bpmn2:auditing id="_5EMk0zY9EeeN5MAjx8Ez1A"><bpmn2:documentation id="_5EMk1DY9EeeN5MAjx8Ez1A">Notes</bpmn2:documentation></bpmn2:auditing><bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="_5EMk1TY9EeeN5MAjx8Ez1A">vo.recordStatus == 'Cancelled'</bpmn2:conditionExpression></bpmn2:sequenceFlow></bpmn2:process><bpmndi:BPMNDiagram id="_5EMk2DY9EeeN5MAjx8Ez1A"><bpmndi:BPMNPlane id="_5EMk2TY9EeeN5MAjx8Ez1A" bpmnElement="FIN_RATECHANGE"><bpmndi:BPMNShape id="_5EMk2jY9EeeN5MAjx8Ez1A" bpmnElement="_FF9D4911-C022-42B0-B00A-9C353226F4A7"><dc:Bounds height="30.0" width="30.0" x="86.0" y="108.0" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="_5EMk2zY9EeeN5MAjx8Ez1A" bpmnElement="_7B64C6C5-337C-44C2-98C6-A723EC862BFF"><dc:Bounds height="80.0" width="100.0" x="150.0" y="83.0" /></bpmndi:BPMNShape><bpmndi:BPMNEdge id="_5EMk3DY9EeeN5MAjx8Ez1A" bpmnElement="_5EE9B2AF-F8EA-432C-BB52-88124AA2A117"><di:waypoint xsi:type="dc:Point" x="101.0" y="123.0" /><di:waypoint xsi:type="dc:Point" x="200.0" y="123.0" /></bpmndi:BPMNEdge><bpmndi:BPMNShape id="_5EMk3TY9EeeN5MAjx8Ez1A" bpmnElement="_77E97F8E-6071-449B-9BD7-4B0F3A5A657A"><dc:Bounds height="80.0" width="100.0" x="330.0" y="83.0" /></bpmndi:BPMNShape><bpmndi:BPMNEdge id="_5EMk3jY9EeeN5MAjx8Ez1A" bpmnElement="_9305AD0C-8EA2-46BB-AD97-8B650D65B67D"><di:waypoint xsi:type="dc:Point" x="200.0" y="123.0" /><di:waypoint xsi:type="dc:Point" x="380.0" y="123.0" /></bpmndi:BPMNEdge><bpmndi:BPMNShape id="_5EMk3zY9EeeN5MAjx8Ez1A" bpmnElement="_C0021C4A-21DA-4AB3-83DF-43DE36042CD0"><dc:Bounds height="40.0" width="40.0" x="475.0" y="103.0" /></bpmndi:BPMNShape><bpmndi:BPMNEdge id="_5EMk4DY9EeeN5MAjx8Ez1A" bpmnElement="_00E367A7-32B3-4238-95E1-394CAF4A448E"><di:waypoint xsi:type="dc:Point" x="380.0" y="123.0" /><di:waypoint xsi:type="dc:Point" x="495.0" y="123.0" /></bpmndi:BPMNEdge><bpmndi:BPMNShape id="_5EMk4TY9EeeN5MAjx8Ez1A" bpmnElement="_DD6234E6-F810-4F4B-BD18-D36A2B5A4618"><dc:Bounds height="80.0" width="100.0" x="600.0" y="83.0" /></bpmndi:BPMNShape><bpmndi:BPMNEdge id="_5EMk4jY9EeeN5MAjx8Ez1A" bpmnElement="_0C53F5CF-91B6-48EF-AA7A-0FFB1BDC9D56"><di:waypoint xsi:type="dc:Point" x="495.0" y="123.0" /><di:waypoint xsi:type="dc:Point" x="650.0" y="123.0" /></bpmndi:BPMNEdge><bpmndi:BPMNShape id="_5EMk4zY9EeeN5MAjx8Ez1A" bpmnElement="_73682DD6-4D65-497A-BAA5-B80623CB6C01"><dc:Bounds height="28.0" width="28.0" x="765.0" y="109.0" /></bpmndi:BPMNShape><bpmndi:BPMNEdge id="_5EMk5DY9EeeN5MAjx8Ez1A" bpmnElement="_A921FE66-42C4-42CC-BB5C-15ABAA47A008"><di:waypoint xsi:type="dc:Point" x="650.0" y="123.0" /><di:waypoint xsi:type="dc:Point" x="779.0" y="123.0" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="_5EMk5TY9EeeN5MAjx8Ez1A" bpmnElement="_2AE689CD-94CB-4752-9CE3-748559E63D53"><di:waypoint xsi:type="dc:Point" x="495.0" y="123.0" /><di:waypoint xsi:type="dc:Point" x="495.0" y="17.0" /><di:waypoint xsi:type="dc:Point" x="200.0" y="17.0" /><di:waypoint xsi:type="dc:Point" x="200.0" y="123.0" /></bpmndi:BPMNEdge><bpmndi:BPMNShape id="_5EMk5jY9EeeN5MAjx8Ez1A" bpmnElement="_5F12FFE5-4B96-49AF-A35C-73A4DBEE36B0"><dc:Bounds height="80.0" width="100.0" x="445.0" y="210.0" /></bpmndi:BPMNShape><bpmndi:BPMNEdge id="_5EMk5zY9EeeN5MAjx8Ez1A" bpmnElement="_A96EF8F0-08CB-4FD7-8DAC-5CF5E6E1F059"><di:waypoint xsi:type="dc:Point" x="495.0" y="123.0" /><di:waypoint xsi:type="dc:Point" x="495.0" y="250.0" /></bpmndi:BPMNEdge><bpmndi:BPMNShape id="_5EMk6DY9EeeN5MAjx8Ez1A" bpmnElement="_87A46993-91DA-47E0-811B-2F196FBAD6AA"><dc:Bounds height="28.0" width="28.0" x="481.0" y="330.0" /></bpmndi:BPMNShape><bpmndi:BPMNEdge id="_5EMk6TY9EeeN5MAjx8Ez1A" bpmnElement="_DAFA463C-32E5-4B16-BC89-284B69E70681"><di:waypoint xsi:type="dc:Point" x="495.0" y="250.0" /><di:waypoint xsi:type="dc:Point" x="495.0" y="344.0" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="_5EMk6jY9EeeN5MAjx8Ez1A" bpmnElement="_14CED7D6-CEC3-49D1-A614-5168AD7F13F6"><di:waypoint xsi:type="dc:Point" x="200.0" y="123.0" /><di:waypoint xsi:type="dc:Point" x="200.0" y="250.0" /><di:waypoint xsi:type="dc:Point" x="495.0" y="250.0" /></bpmndi:BPMNEdge></bpmndi:BPMNPlane></bpmndi:BPMNDiagram><bpmn2:relationship id="_5EMk6zY9EeeN5MAjx8Ez1A" type="jBPMProcessSimulation"><bpmn2:extensionElements><drools:ProcessAnalysisData><drools:Scenario xsi:type="drools:Scenario" id="default" name="Simulationscenario"><drools:ScenarioParameters xsi:type="drools:ScenarioParameters_._type" /><drools:ElementParameters xsi:type="drools:ElementParameters_._type" elementId="_DD6234E6-F810-4F4B-BD18-D36A2B5A4618" id="_5EMk7DY9EeeN5MAjx8Ez1A"><drools:CostParameters xsi:type="drools:CostParameters" /></drools:ElementParameters><drools:ElementParameters xsi:type="drools:ElementParameters_._type" elementId="_5F12FFE5-4B96-49AF-A35C-73A4DBEE36B0" id="_5EMk7TY9EeeN5MAjx8Ez1A"><drools:CostParameters xsi:type="drools:CostParameters" /></drools:ElementParameters><drools:ElementParameters xsi:type="drools:ElementParameters_._type" elementId="_77E97F8E-6071-449B-9BD7-4B0F3A5A657A" id="_5EMk7jY9EeeN5MAjx8Ez1A"><drools:ResourceParameters xsi:type="drools:ResourceParameters" /><drools:CostParameters xsi:type="drools:CostParameters" /></drools:ElementParameters><drools:ElementParameters xsi:type="drools:ElementParameters_._type" elementId="_7B64C6C5-337C-44C2-98C6-A723EC862BFF" id="_5EMk7zY9EeeN5MAjx8Ez1A"><drools:ResourceParameters xsi:type="drools:ResourceParameters" /><drools:CostParameters xsi:type="drools:CostParameters" /></drools:ElementParameters></drools:Scenario></drools:ProcessAnalysisData></bpmn2:extensionElements><bpmn2:source>_5EMkwTY9EeeN5MAjx8Ez1A</bpmn2:source><bpmn2:target>_5EMkwTY9EeeN5MAjx8Ez1A</bpmn2:target></bpmn2:relationship></bpmn2:definitions>]]></column>
			<where>workflowtype='BAJAJ_LOAN_ORG'and workflowactive=1</where>
		</update>
	</changeSet>
<changeSet author="Jayant" id="73">
		<insert tableName="WorkFlowDetails">
			<column name="WorkFlowId"
				valueComputed="(select max(WorkFlowId) + 1 from WorkFlowDetails)" />
			<column name="WorkFlowType">BFSD_ORIGINATION</column>
			<column name="WorkFlowSubType">Maker/Checker for Finance Rate Change</column>
			<column name="WorkFlowDesc">Maker/Checker for Finance Rate Change</column>
			<column name="JsonDesign" type="nclob"><![CDATA[NULL]]></column>
			<column name="SvgDesign" type="nclob"><![CDATA[NULL]]></column>
			<column name="WorkFlowXml" type="clob"><![CDATA[NULL]]></column>
			<column name="WorkFlowRoles">BFSD_DISB_MAKER;BFSD_DISB_APPROVER</column>
			<column name="FirstTaskOwner">BFSD_DISB_MAKER</column>
			<column name="WorkFlowActive">1</column>
			<column name="Version">5</column>
			<column name="LastMntBy">1000</column>
			<column name="LastMntOn">11-MAY-2017</column>
			<column name="RecordStatus">Null</column>
			<column name="RoleCode">Null</column>
			<column name="NextRoleCode">Null</column>
			<column name="TaskId">Null</column>
			<column name="NextTaskId">Null</column>
			<column name="RecordType">NULL</column>
		</insert>
	</changeSet>
	
<changeSet id="74" author="Jayant">
		<update tableName="WORKFLOWDETAILS">
			<column name="JSONDESIGN" type="NCLOB"><![CDATA[{"resourceId":"CCMS_MSTGRP1","properties":{"name":"Finance Rate Change\n","documentation":"","auditing":"","monitoring":"","executable":"true","package":"","vardefs":"","imports":"","id":"FIN_RATECHANGE","version":"","author":"","language":"English","namespaces":"","targetnamespace":"http://www.omg.org/bpmn20","expressionlanguage":"http://www.w3.org/1999/XPath","typelanguage":"http://www.w3.org/2001/XMLSchema","creationdate":"","modificationdate":""},"stencil":{"id":"BPMNDiagram"},"childShapes":[{"resourceId":"_FF9D4911-C022-42B0-B00A-9C353226F4A7","properties":{"name":"Start","documentation":"","auditing":"","monitoring":"","dataoutputassociations":"","dataoutput":"","outputset":"","bgcolor":"#C5F970","trigger":"None"},"stencil":{"id":"StartNoneEvent"},"childShapes":[],"outgoing":[{"resourceId":"_5EE9B2AF-F8EA-432C-BB52-88124AA2A117"}],"bounds":{"lowerRight":{"x":116,"y":138},"upperLeft":{"x":86,"y":108}},"dockers":[]},{"resourceId":"_7B64C6C5-337C-44C2-98C6-A723EC862BFF","properties":{"name":"Maker","documentation":"","auditing":"","monitoring":"","categories":"","startquantity":1,"completionquantity":1,"isforcompensation":false,"assignments":"","callacitivity":"","tasktype":"User","implementation":"webService","resources":"","messageref":"","operationref":"","instantiate":"","script":"","script_language":"","inmessagetype":"","outmessagetype":"","servicename":"","namespace":"","operation":"","porttype":"","wsdlurl":"","bgcolor":"#FF6600","looptype":"None","testbefore":"","loopcondition":"","loopmaximum":"","loopcardinality":"","loopdatainput":"","loopdataoutput":"","inputdataitem":"","outputdataitem":"","behavior":"all","complexbehaviordefinition":"","completioncondition":"","onebehavioreventref":"signal","nonebehavioreventref":"signal","properties":"","datainputset":"","dataoutputset":"","ruleflowgroup":"","onentryactions":"scope=Own","onexitactions":"","taskname":"","actors":"BFSD_DISB_MAKER"},"stencil":{"id":"Task"},"childShapes":[],"outgoing":[{"resourceId":"_9305AD0C-8EA2-46BB-AD97-8B650D65B67D"},{"resourceId":"_14CED7D6-CEC3-49D1-A614-5168AD7F13F6"}],"bounds":{"lowerRight":{"x":250,"y":163},"upperLeft":{"x":150,"y":83}},"dockers":[]},{"resourceId":"_5EE9B2AF-F8EA-432C-BB52-88124AA2A117","properties":{"name":"","documentation":"","auditing":"","monitoring":"","conditiontype":"None","conditionexpression":"","isimmediate":"","showdiamondmarker":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"_7B64C6C5-337C-44C2-98C6-A723EC862BFF"}],"bounds":{"lowerRight":{"x":149.5,"y":123},"upperLeft":{"x":116.6953125,"y":123}},"dockers":[{"x":15,"y":15},{"x":50,"y":40}],"target":{"resourceId":"_7B64C6C5-337C-44C2-98C6-A723EC862BFF"}},{"resourceId":"_77E97F8E-6071-449B-9BD7-4B0F3A5A657A","properties":{"name":"Approver","documentation":"","auditing":"","monitoring":"","categories":"","startquantity":1,"completionquantity":1,"isforcompensation":"","assignments":"","callacitivity":"","tasktype":"User","implementation":"webService","resources":"","messageref":"","operationref":"","instantiate":"","script":"","script_language":"","inmessagetype":"","outmessagetype":"","servicename":"","namespace":"","operation":"","porttype":"","wsdlurl":"","bgcolor":"#FF6600","looptype":"None","testbefore":"","loopcondition":"","loopmaximum":"","loopcardinality":"","loopdatainput":"","loopdataoutput":"","inputdataitem":"","outputdataitem":"","behavior":"all","complexbehaviordefinition":"","completioncondition":"","onebehavioreventref":"signal","nonebehavioreventref":"signal","properties":"","datainputset":"","dataoutputset":"","ruleflowgroup":"","onentryactions":"show_tabs=Accounting","onexitactions":"","taskname":"","actors":"BFSD_DISB_APPROVER"},"stencil":{"id":"Task"},"childShapes":[],"outgoing":[{"resourceId":"_00E367A7-32B3-4238-95E1-394CAF4A448E"}],"bounds":{"lowerRight":{"x":430,"y":163},"upperLeft":{"x":330,"y":83}},"dockers":[]},{"resourceId":"_9305AD0C-8EA2-46BB-AD97-8B650D65B67D","properties":{"name":"Submit","documentation":"Submit=Submitted","auditing":"","monitoring":"","conditiontype":"None","conditionexpression":"vo.recordStatus == 'Submitted'","isimmediate":"","showdiamondmarker":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"_77E97F8E-6071-449B-9BD7-4B0F3A5A657A"}],"bounds":{"lowerRight":{"x":329.78125,"y":123},"upperLeft":{"x":250.21875,"y":123}},"dockers":[{"x":50,"y":40},{"x":50,"y":40}],"target":{"resourceId":"_77E97F8E-6071-449B-9BD7-4B0F3A5A657A"}},{"resourceId":"_C0021C4A-21DA-4AB3-83DF-43DE36042CD0","properties":{"name":"","documentation":"","auditing":"","monitoring":"","categories":"","assignments":"","pool":"","lanes":"","gates":"","gates_outgoingsequenceflow":"","gates_assignments":"","bgcolor":"#ffffff","gatewaytype":"XOR","xortype":"Data","markervisible":"true","defaultgate":"","gate_outgoingsequenceflow":"","gate_assignments":""},"stencil":{"id":"Exclusive_Databased_Gateway"},"childShapes":[],"outgoing":[{"resourceId":"_0C53F5CF-91B6-48EF-AA7A-0FFB1BDC9D56"},{"resourceId":"_2AE689CD-94CB-4752-9CE3-748559E63D53"},{"resourceId":"_A96EF8F0-08CB-4FD7-8DAC-5CF5E6E1F059"}],"bounds":{"lowerRight":{"x":515,"y":143},"upperLeft":{"x":475,"y":103}},"dockers":[]},{"resourceId":"_00E367A7-32B3-4238-95E1-394CAF4A448E","properties":{"name":"","documentation":"","auditing":"","monitoring":"","conditiontype":"None","conditionexpression":"","isimmediate":"","showdiamondmarker":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"_C0021C4A-21DA-4AB3-83DF-43DE36042CD0"}],"bounds":{"lowerRight":{"x":474.64844687000755,"y":123.4097335362338},"upperLeft":{"x":430.62889687999245,"y":123.2191727137662}},"dockers":[{"x":50,"y":40},{"x":20.5,"y":20.5}],"target":{"resourceId":"_C0021C4A-21DA-4AB3-83DF-43DE36042CD0"}},{"resourceId":"_DD6234E6-F810-4F4B-BD18-D36A2B5A4618","properties":{"name":"Complete Process","documentation":"","auditing":"","monitoring":"","categories":"","startquantity":1,"completionquantity":1,"isforcompensation":"","assignments":"","callacitivity":"","tasktype":"Service","implementation":"webService","resources":"","messageref":" ","operationref":"","instantiate":"","script":"","script_language":"","inmessagetype":"","outmessagetype":"","servicename":"","namespace":"","operation":"doApprove","porttype":"","wsdlurl":"","bgcolor":"#ffffcc","looptype":"None","testbefore":"","loopcondition":"","loopmaximum":"","loopcardinality":"","loopdatainput":"","loopdataoutput":"","inputdataitem":"","outputdataitem":"","behavior":"all","complexbehaviordefinition":"","completioncondition":"","onebehavioreventref":"signal","nonebehavioreventref":"signal","properties":"","datainputset":"","dataoutputset":"","ruleflowgroup":"","onentryactions":"","onexitactions":"","taskname":"","actors":""},"stencil":{"id":"Task"},"childShapes":[],"outgoing":[{"resourceId":"_A921FE66-42C4-42CC-BB5C-15ABAA47A008"}],"bounds":{"lowerRight":{"x":700,"y":163},"upperLeft":{"x":600,"y":83}},"dockers":[]},{"resourceId":"_0C53F5CF-91B6-48EF-AA7A-0FFB1BDC9D56","properties":{"name":"Approve","documentation":"Approve=Approved","auditing":"","monitoring":"","conditiontype":"None","conditionexpression":"vo.recordStatus == 'Approved'","isimmediate":"","showdiamondmarker":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"_DD6234E6-F810-4F4B-BD18-D36A2B5A4618"}],"bounds":{"lowerRight":{"x":599.5117239866028,"y":123.43426377099223},"upperLeft":{"x":515.8124947633972,"y":123.16339247900777}},"dockers":[{"x":20.5,"y":20.5},{"x":50,"y":40}],"target":{"resourceId":"_DD6234E6-F810-4F4B-BD18-D36A2B5A4618"}},{"resourceId":"_73682DD6-4D65-497A-BAA5-B80623CB6C01","properties":{"name":"Approved","documentation":"","auditing":"","monitoring":"","datainputassociations":"","datainput":"","inputset":"","bgcolor":"#F47677","trigger":"None"},"stencil":{"id":"EndNoneEvent"},"childShapes":[],"outgoing":[],"bounds":{"lowerRight":{"x":793,"y":137},"upperLeft":{"x":765,"y":109}},"dockers":[]},{"resourceId":"_A921FE66-42C4-42CC-BB5C-15ABAA47A008","properties":{"name":"","documentation":"","auditing":"","monitoring":"","conditiontype":"None","conditionexpression":"","isimmediate":"","showdiamondmarker":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"_73682DD6-4D65-497A-BAA5-B80623CB6C01"}],"bounds":{"lowerRight":{"x":764.8984375,"y":123},"upperLeft":{"x":700.3828125,"y":123}},"dockers":[{"x":50,"y":40},{"x":14,"y":14}],"target":{"resourceId":"_73682DD6-4D65-497A-BAA5-B80623CB6C01"}},{"resourceId":"_2AE689CD-94CB-4752-9CE3-748559E63D53","properties":{"name":"Resubmit","documentation":"Resubmit=Resubmitted","auditing":"Notes","monitoring":"","conditiontype":"None","conditionexpression":"vo.recordStatus == 'Resubmitted'","isimmediate":"","showdiamondmarker":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"_7B64C6C5-337C-44C2-98C6-A723EC862BFF"}],"bounds":{"lowerRight":{"x":495.5,"y":102.53125},"upperLeft":{"x":200,"y":17}},"dockers":[{"x":20.5,"y":20.5},{"x":495.5,"y":17},{"x":200,"y":17},{"x":50,"y":40}],"target":{"resourceId":"_7B64C6C5-337C-44C2-98C6-A723EC862BFF"}},{"resourceId":"_5F12FFE5-4B96-49AF-A35C-73A4DBEE36B0","properties":{"name":"Cancel Process","documentation":"","auditing":"","monitoring":"","categories":"","startquantity":1,"completionquantity":1,"isforcompensation":"","assignments":"","callacitivity":"","tasktype":"Service","implementation":"webService","resources":"","messageref":"","operationref":"","instantiate":"","script":"","script_language":"","inmessagetype":"","outmessagetype":"","servicename":"","namespace":"","operation":"doReject","porttype":"","wsdlurl":"","bgcolor":"#ffffcc","looptype":"None","testbefore":"","loopcondition":"","loopmaximum":"","loopcardinality":"","loopdatainput":"","loopdataoutput":"","inputdataitem":"","outputdataitem":"","behavior":"all","complexbehaviordefinition":"","completioncondition":"","onebehavioreventref":"signal","nonebehavioreventref":"signal","properties":"","datainputset":"","dataoutputset":"","ruleflowgroup":"","onentryactions":"","onexitactions":"","taskname":"","actors":""},"stencil":{"id":"Task"},"childShapes":[],"outgoing":[{"resourceId":"_DAFA463C-32E5-4B16-BC89-284B69E70681"}],"bounds":{"lowerRight":{"x":545,"y":290},"upperLeft":{"x":445,"y":210}},"dockers":[]},{"resourceId":"_A96EF8F0-08CB-4FD7-8DAC-5CF5E6E1F059","properties":{"name":"Reject","documentation":"Reject=Rejected","auditing":"","monitoring":"","conditiontype":"None","conditionexpression":"vo.recordStatus == 'Rejected'","isimmediate":"","showdiamondmarker":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"_5F12FFE5-4B96-49AF-A35C-73A4DBEE36B0"}],"bounds":{"lowerRight":{"x":495.4218287117048,"y":209.46875781130998},"upperLeft":{"x":495.1602025382952,"y":143.27733593869002}},"dockers":[{"x":20.5,"y":20.5},{"x":50,"y":40}],"target":{"resourceId":"_5F12FFE5-4B96-49AF-A35C-73A4DBEE36B0"}},{"resourceId":"_87A46993-91DA-47E0-811B-2F196FBAD6AA","properties":{"name":"Rejected","documentation":"","auditing":"","monitoring":"","datainputassociations":"","datainput":"","inputset":"","bgcolor":"#F47677","trigger":"None"},"stencil":{"id":"EndNoneEvent"},"childShapes":[],"outgoing":[],"bounds":{"lowerRight":{"x":509,"y":358},"upperLeft":{"x":481,"y":330}},"dockers":[]},{"resourceId":"_DAFA463C-32E5-4B16-BC89-284B69E70681","properties":{"name":"","documentation":"","auditing":"","monitoring":"","conditiontype":"None","conditionexpression":"","isimmediate":"","showdiamondmarker":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"_87A46993-91DA-47E0-811B-2F196FBAD6AA"}],"bounds":{"lowerRight":{"x":495,"y":329.78125},"upperLeft":{"x":495,"y":290.65625}},"dockers":[{"x":50,"y":40},{"x":14,"y":14}],"target":{"resourceId":"_87A46993-91DA-47E0-811B-2F196FBAD6AA"}},{"resourceId":"_14CED7D6-CEC3-49D1-A614-5168AD7F13F6","properties":{"name":"Cancel","documentation":"Cancel=Cancelled","auditing":"Notes","monitoring":"","conditiontype":"None","conditionexpression":"vo.recordStatus == 'Cancelled'","isimmediate":"","showdiamondmarker":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"_5F12FFE5-4B96-49AF-A35C-73A4DBEE36B0"}],"bounds":{"lowerRight":{"x":444.44921875,"y":250},"upperLeft":{"x":200,"y":163.6875}},"dockers":[{"x":50,"y":40},{"x":200,"y":250},{"x":50,"y":40}],"target":{"resourceId":"_5F12FFE5-4B96-49AF-A35C-73A4DBEE36B0"}}],"bounds":{"lowerRight":{"x":3000,"y":2000},"upperLeft":{"x":0,"y":0}},"stencilset":{"url":"bpmn2.0pbpm","namespace":"http://b3mn.org/stencilset/bpmn2.0#"},"ssextensions":[]}]]></column>
			<column name="WORKFLOWXML" type="CLOB"><![CDATA[<bpmn2:definitions xmlns:bpmn2="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns="http://www.omg.org/bpmn20" xmlns:drools="http://www.jboss.org/drools" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="_Lo0WgDY-EeeN5MAjx8Ez1A" xsi:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd http://www.jboss.org/drools drools.xsd" targetNamespace="http://www.omg.org/bpmn20"><bpmn2:itemDefinition id="_DD6234E6-F810-4F4B-BD18-D36A2B5A4618_InMessageType" /><bpmn2:itemDefinition id="_5F12FFE5-4B96-49AF-A35C-73A4DBEE36B0_InMessageType" /><bpmn2:message id="_DD6234E6-F810-4F4B-BD18-D36A2B5A4618_InMessage" itemRef="_DD6234E6-F810-4F4B-BD18-D36A2B5A4618_InMessageType" /><bpmn2:message id="_5F12FFE5-4B96-49AF-A35C-73A4DBEE36B0_InMessage" itemRef="_5F12FFE5-4B96-49AF-A35C-73A4DBEE36B0_InMessageType" /><bpmn2:interface id="_Lo0WlTY-EeeN5MAjx8Ez1A"><bpmn2:operation id="_DD6234E6-F810-4F4B-BD18-D36A2B5A4618_ServiceOperation" name="doApprove"><bpmn2:inMessageRef>_DD6234E6-F810-4F4B-BD18-D36A2B5A4618_InMessage</bpmn2:inMessageRef></bpmn2:operation></bpmn2:interface><bpmn2:interface id="_Lo0WljY-EeeN5MAjx8Ez1A"><bpmn2:operation id="_5F12FFE5-4B96-49AF-A35C-73A4DBEE36B0_ServiceOperation" name="doReject"><bpmn2:inMessageRef>_5F12FFE5-4B96-49AF-A35C-73A4DBEE36B0_InMessage</bpmn2:inMessageRef></bpmn2:operation></bpmn2:interface><bpmn2:process id="FIN_RATECHANGE" name="Finance Rate Change " isExecutable="true"><bpmn2:startEvent id="_FF9D4911-C022-42B0-B00A-9C353226F4A7" drools:bgcolor="#C5F970" name="Start"><bpmn2:outgoing>_5EE9B2AF-F8EA-432C-BB52-88124AA2A117</bpmn2:outgoing></bpmn2:startEvent><bpmn2:userTask id="_7B64C6C5-337C-44C2-98C6-A723EC862BFF" drools:bgcolor="#FF6600" name="Maker"><bpmn2:extensionElements><drools:onEntry-script scriptFormat="http://www.java.com/java"><drools:script>scope=Own</drools:script></drools:onEntry-script></bpmn2:extensionElements><bpmn2:incoming>_5EE9B2AF-F8EA-432C-BB52-88124AA2A117</bpmn2:incoming><bpmn2:incoming>_2AE689CD-94CB-4752-9CE3-748559E63D53</bpmn2:incoming><bpmn2:outgoing>_9305AD0C-8EA2-46BB-AD97-8B650D65B67D</bpmn2:outgoing><bpmn2:outgoing>_14CED7D6-CEC3-49D1-A614-5168AD7F13F6</bpmn2:outgoing><bpmn2:potentialOwner id="_Lo0WgTY-EeeN5MAjx8Ez1A"><bpmn2:resourceAssignmentExpression id="_Lo0WgjY-EeeN5MAjx8Ez1A"><bpmn2:formalExpression id="_Lo0WgzY-EeeN5MAjx8Ez1A">BFSD_DISB_MAKER</bpmn2:formalExpression></bpmn2:resourceAssignmentExpression></bpmn2:potentialOwner></bpmn2:userTask><bpmn2:sequenceFlow id="_5EE9B2AF-F8EA-432C-BB52-88124AA2A117" sourceRef="_FF9D4911-C022-42B0-B00A-9C353226F4A7" targetRef="_7B64C6C5-337C-44C2-98C6-A723EC862BFF" /><bpmn2:userTask id="_77E97F8E-6071-449B-9BD7-4B0F3A5A657A" drools:bgcolor="#FF6600" name="Approver"><bpmn2:extensionElements><drools:onEntry-script scriptFormat="http://www.java.com/java"><drools:script>show_tabs=Accounting</drools:script></drools:onEntry-script></bpmn2:extensionElements><bpmn2:incoming>_9305AD0C-8EA2-46BB-AD97-8B650D65B67D</bpmn2:incoming><bpmn2:outgoing>_00E367A7-32B3-4238-95E1-394CAF4A448E</bpmn2:outgoing><bpmn2:potentialOwner id="_Lo0WhDY-EeeN5MAjx8Ez1A"><bpmn2:resourceAssignmentExpression id="_Lo0WhTY-EeeN5MAjx8Ez1A"><bpmn2:formalExpression id="_Lo0WhjY-EeeN5MAjx8Ez1A">BFSD_DISB_APPROVER</bpmn2:formalExpression></bpmn2:resourceAssignmentExpression></bpmn2:potentialOwner></bpmn2:userTask><bpmn2:sequenceFlow id="_9305AD0C-8EA2-46BB-AD97-8B650D65B67D" name="Submit" sourceRef="_7B64C6C5-337C-44C2-98C6-A723EC862BFF" targetRef="_77E97F8E-6071-449B-9BD7-4B0F3A5A657A"><bpmn2:documentation id="_Lo0WhzY-EeeN5MAjx8Ez1A">Submit=Submitted</bpmn2:documentation><bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="_Lo0WiDY-EeeN5MAjx8Ez1A">vo.recordStatus == 'Submitted'</bpmn2:conditionExpression></bpmn2:sequenceFlow><bpmn2:exclusiveGateway id="_C0021C4A-21DA-4AB3-83DF-43DE36042CD0" drools:bgcolor="#ffffff" drools:dg="" name="" gatewayDirection="Diverging"><bpmn2:incoming>_00E367A7-32B3-4238-95E1-394CAF4A448E</bpmn2:incoming><bpmn2:outgoing>_0C53F5CF-91B6-48EF-AA7A-0FFB1BDC9D56</bpmn2:outgoing><bpmn2:outgoing>_2AE689CD-94CB-4752-9CE3-748559E63D53</bpmn2:outgoing><bpmn2:outgoing>_A96EF8F0-08CB-4FD7-8DAC-5CF5E6E1F059</bpmn2:outgoing></bpmn2:exclusiveGateway><bpmn2:sequenceFlow id="_00E367A7-32B3-4238-95E1-394CAF4A448E" sourceRef="_77E97F8E-6071-449B-9BD7-4B0F3A5A657A" targetRef="_C0021C4A-21DA-4AB3-83DF-43DE36042CD0" /><bpmn2:serviceTask id="_DD6234E6-F810-4F4B-BD18-D36A2B5A4618" drools:bgcolor="#ffffcc" drools:servicetaskoperation="doApprove" name="Complete Process" operationRef="_DD6234E6-F810-4F4B-BD18-D36A2B5A4618_ServiceOperation"><bpmn2:incoming>_0C53F5CF-91B6-48EF-AA7A-0FFB1BDC9D56</bpmn2:incoming><bpmn2:outgoing>_A921FE66-42C4-42CC-BB5C-15ABAA47A008</bpmn2:outgoing></bpmn2:serviceTask><bpmn2:sequenceFlow id="_0C53F5CF-91B6-48EF-AA7A-0FFB1BDC9D56" name="Approve" sourceRef="_C0021C4A-21DA-4AB3-83DF-43DE36042CD0" targetRef="_DD6234E6-F810-4F4B-BD18-D36A2B5A4618"><bpmn2:documentation id="_Lo0WiTY-EeeN5MAjx8Ez1A">Approve=Approved</bpmn2:documentation><bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="_Lo0WijY-EeeN5MAjx8Ez1A">vo.recordStatus == 'Approved'</bpmn2:conditionExpression></bpmn2:sequenceFlow><bpmn2:endEvent id="_73682DD6-4D65-497A-BAA5-B80623CB6C01" drools:bgcolor="#F47677" name="Approved"><bpmn2:incoming>_A921FE66-42C4-42CC-BB5C-15ABAA47A008</bpmn2:incoming></bpmn2:endEvent><bpmn2:sequenceFlow id="_A921FE66-42C4-42CC-BB5C-15ABAA47A008" sourceRef="_DD6234E6-F810-4F4B-BD18-D36A2B5A4618" targetRef="_73682DD6-4D65-497A-BAA5-B80623CB6C01" /><bpmn2:sequenceFlow id="_2AE689CD-94CB-4752-9CE3-748559E63D53" name="Resubmit" sourceRef="_C0021C4A-21DA-4AB3-83DF-43DE36042CD0" targetRef="_7B64C6C5-337C-44C2-98C6-A723EC862BFF"><bpmn2:documentation id="_Lo0WizY-EeeN5MAjx8Ez1A">Resubmit=Resubmitted</bpmn2:documentation><bpmn2:auditing id="_Lo0WjDY-EeeN5MAjx8Ez1A"><bpmn2:documentation id="_Lo0WjTY-EeeN5MAjx8Ez1A">Notes</bpmn2:documentation></bpmn2:auditing><bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="_Lo0WjjY-EeeN5MAjx8Ez1A">vo.recordStatus == 'Resubmitted'</bpmn2:conditionExpression></bpmn2:sequenceFlow><bpmn2:serviceTask id="_5F12FFE5-4B96-49AF-A35C-73A4DBEE36B0" drools:bgcolor="#ffffcc" drools:servicetaskoperation="doReject" name="Cancel Process" operationRef="_5F12FFE5-4B96-49AF-A35C-73A4DBEE36B0_ServiceOperation"><bpmn2:incoming>_14CED7D6-CEC3-49D1-A614-5168AD7F13F6</bpmn2:incoming><bpmn2:incoming>_A96EF8F0-08CB-4FD7-8DAC-5CF5E6E1F059</bpmn2:incoming><bpmn2:outgoing>_DAFA463C-32E5-4B16-BC89-284B69E70681</bpmn2:outgoing></bpmn2:serviceTask><bpmn2:sequenceFlow id="_A96EF8F0-08CB-4FD7-8DAC-5CF5E6E1F059" name="Reject" sourceRef="_C0021C4A-21DA-4AB3-83DF-43DE36042CD0" targetRef="_5F12FFE5-4B96-49AF-A35C-73A4DBEE36B0"><bpmn2:documentation id="_Lo0WjzY-EeeN5MAjx8Ez1A">Reject=Rejected</bpmn2:documentation><bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="_Lo0WkDY-EeeN5MAjx8Ez1A">vo.recordStatus == 'Rejected'</bpmn2:conditionExpression></bpmn2:sequenceFlow><bpmn2:endEvent id="_87A46993-91DA-47E0-811B-2F196FBAD6AA" drools:bgcolor="#F47677" name="Rejected"><bpmn2:incoming>_DAFA463C-32E5-4B16-BC89-284B69E70681</bpmn2:incoming></bpmn2:endEvent><bpmn2:sequenceFlow id="_DAFA463C-32E5-4B16-BC89-284B69E70681" sourceRef="_5F12FFE5-4B96-49AF-A35C-73A4DBEE36B0" targetRef="_87A46993-91DA-47E0-811B-2F196FBAD6AA" /><bpmn2:sequenceFlow id="_14CED7D6-CEC3-49D1-A614-5168AD7F13F6" name="Cancel" sourceRef="_7B64C6C5-337C-44C2-98C6-A723EC862BFF" targetRef="_5F12FFE5-4B96-49AF-A35C-73A4DBEE36B0"><bpmn2:documentation id="_Lo0WkTY-EeeN5MAjx8Ez1A">Cancel=Cancelled</bpmn2:documentation><bpmn2:auditing id="_Lo0WkjY-EeeN5MAjx8Ez1A"><bpmn2:documentation id="_Lo0WkzY-EeeN5MAjx8Ez1A">Notes</bpmn2:documentation></bpmn2:auditing><bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="_Lo0WlDY-EeeN5MAjx8Ez1A">vo.recordStatus == 'Cancelled'</bpmn2:conditionExpression></bpmn2:sequenceFlow></bpmn2:process><bpmndi:BPMNDiagram id="_Lo0WlzY-EeeN5MAjx8Ez1A"><bpmndi:BPMNPlane id="_Lo0WmDY-EeeN5MAjx8Ez1A" bpmnElement="FIN_RATECHANGE"><bpmndi:BPMNShape id="_Lo0WmTY-EeeN5MAjx8Ez1A" bpmnElement="_FF9D4911-C022-42B0-B00A-9C353226F4A7"><dc:Bounds height="30.0" width="30.0" x="86.0" y="108.0" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="_Lo0WmjY-EeeN5MAjx8Ez1A" bpmnElement="_7B64C6C5-337C-44C2-98C6-A723EC862BFF"><dc:Bounds height="80.0" width="100.0" x="150.0" y="83.0" /></bpmndi:BPMNShape><bpmndi:BPMNEdge id="_Lo0WmzY-EeeN5MAjx8Ez1A" bpmnElement="_5EE9B2AF-F8EA-432C-BB52-88124AA2A117"><di:waypoint xsi:type="dc:Point" x="101.0" y="123.0" /><di:waypoint xsi:type="dc:Point" x="200.0" y="123.0" /></bpmndi:BPMNEdge><bpmndi:BPMNShape id="_Lo0WnDY-EeeN5MAjx8Ez1A" bpmnElement="_77E97F8E-6071-449B-9BD7-4B0F3A5A657A"><dc:Bounds height="80.0" width="100.0" x="330.0" y="83.0" /></bpmndi:BPMNShape><bpmndi:BPMNEdge id="_Lo0WnTY-EeeN5MAjx8Ez1A" bpmnElement="_9305AD0C-8EA2-46BB-AD97-8B650D65B67D"><di:waypoint xsi:type="dc:Point" x="200.0" y="123.0" /><di:waypoint xsi:type="dc:Point" x="380.0" y="123.0" /></bpmndi:BPMNEdge><bpmndi:BPMNShape id="_Lo0WnjY-EeeN5MAjx8Ez1A" bpmnElement="_C0021C4A-21DA-4AB3-83DF-43DE36042CD0"><dc:Bounds height="40.0" width="40.0" x="475.0" y="103.0" /></bpmndi:BPMNShape><bpmndi:BPMNEdge id="_Lo0WnzY-EeeN5MAjx8Ez1A" bpmnElement="_00E367A7-32B3-4238-95E1-394CAF4A448E"><di:waypoint xsi:type="dc:Point" x="380.0" y="123.0" /><di:waypoint xsi:type="dc:Point" x="495.0" y="123.0" /></bpmndi:BPMNEdge><bpmndi:BPMNShape id="_Lo0WoDY-EeeN5MAjx8Ez1A" bpmnElement="_DD6234E6-F810-4F4B-BD18-D36A2B5A4618"><dc:Bounds height="80.0" width="100.0" x="600.0" y="83.0" /></bpmndi:BPMNShape><bpmndi:BPMNEdge id="_Lo0WoTY-EeeN5MAjx8Ez1A" bpmnElement="_0C53F5CF-91B6-48EF-AA7A-0FFB1BDC9D56"><di:waypoint xsi:type="dc:Point" x="495.0" y="123.0" /><di:waypoint xsi:type="dc:Point" x="650.0" y="123.0" /></bpmndi:BPMNEdge><bpmndi:BPMNShape id="_Lo0WojY-EeeN5MAjx8Ez1A" bpmnElement="_73682DD6-4D65-497A-BAA5-B80623CB6C01"><dc:Bounds height="28.0" width="28.0" x="765.0" y="109.0" /></bpmndi:BPMNShape><bpmndi:BPMNEdge id="_Lo0WozY-EeeN5MAjx8Ez1A" bpmnElement="_A921FE66-42C4-42CC-BB5C-15ABAA47A008"><di:waypoint xsi:type="dc:Point" x="650.0" y="123.0" /><di:waypoint xsi:type="dc:Point" x="779.0" y="123.0" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="_Lo0WpDY-EeeN5MAjx8Ez1A" bpmnElement="_2AE689CD-94CB-4752-9CE3-748559E63D53"><di:waypoint xsi:type="dc:Point" x="495.0" y="123.0" /><di:waypoint xsi:type="dc:Point" x="495.0" y="17.0" /><di:waypoint xsi:type="dc:Point" x="200.0" y="17.0" /><di:waypoint xsi:type="dc:Point" x="200.0" y="123.0" /></bpmndi:BPMNEdge><bpmndi:BPMNShape id="_Lo0WpTY-EeeN5MAjx8Ez1A" bpmnElement="_5F12FFE5-4B96-49AF-A35C-73A4DBEE36B0"><dc:Bounds height="80.0" width="100.0" x="445.0" y="210.0" /></bpmndi:BPMNShape><bpmndi:BPMNEdge id="_Lo0WpjY-EeeN5MAjx8Ez1A" bpmnElement="_A96EF8F0-08CB-4FD7-8DAC-5CF5E6E1F059"><di:waypoint xsi:type="dc:Point" x="495.0" y="123.0" /><di:waypoint xsi:type="dc:Point" x="495.0" y="250.0" /></bpmndi:BPMNEdge><bpmndi:BPMNShape id="_Lo0WpzY-EeeN5MAjx8Ez1A" bpmnElement="_87A46993-91DA-47E0-811B-2F196FBAD6AA"><dc:Bounds height="28.0" width="28.0" x="481.0" y="330.0" /></bpmndi:BPMNShape><bpmndi:BPMNEdge id="_Lo0WqDY-EeeN5MAjx8Ez1A" bpmnElement="_DAFA463C-32E5-4B16-BC89-284B69E70681"><di:waypoint xsi:type="dc:Point" x="495.0" y="250.0" /><di:waypoint xsi:type="dc:Point" x="495.0" y="344.0" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="_Lo0WqTY-EeeN5MAjx8Ez1A" bpmnElement="_14CED7D6-CEC3-49D1-A614-5168AD7F13F6"><di:waypoint xsi:type="dc:Point" x="200.0" y="123.0" /><di:waypoint xsi:type="dc:Point" x="200.0" y="250.0" /><di:waypoint xsi:type="dc:Point" x="495.0" y="250.0" /></bpmndi:BPMNEdge></bpmndi:BPMNPlane></bpmndi:BPMNDiagram><bpmn2:relationship id="_Lo0WqjY-EeeN5MAjx8Ez1A" type="jBPMProcessSimulation"><bpmn2:extensionElements><drools:ProcessAnalysisData><drools:Scenario xsi:type="drools:Scenario" id="default" name="Simulationscenario"><drools:ScenarioParameters xsi:type="drools:ScenarioParameters_._type" /><drools:ElementParameters xsi:type="drools:ElementParameters_._type" elementId="_DD6234E6-F810-4F4B-BD18-D36A2B5A4618" id="_Lo0WqzY-EeeN5MAjx8Ez1A"><drools:CostParameters xsi:type="drools:CostParameters" /></drools:ElementParameters><drools:ElementParameters xsi:type="drools:ElementParameters_._type" elementId="_5F12FFE5-4B96-49AF-A35C-73A4DBEE36B0" id="_Lo0WrDY-EeeN5MAjx8Ez1A"><drools:CostParameters xsi:type="drools:CostParameters" /></drools:ElementParameters><drools:ElementParameters xsi:type="drools:ElementParameters_._type" elementId="_77E97F8E-6071-449B-9BD7-4B0F3A5A657A" id="_Lo0WrTY-EeeN5MAjx8Ez1A"><drools:ResourceParameters xsi:type="drools:ResourceParameters" /><drools:CostParameters xsi:type="drools:CostParameters" /></drools:ElementParameters><drools:ElementParameters xsi:type="drools:ElementParameters_._type" elementId="_7B64C6C5-337C-44C2-98C6-A723EC862BFF" id="_Lo0WrjY-EeeN5MAjx8Ez1A"><drools:ResourceParameters xsi:type="drools:ResourceParameters" /><drools:CostParameters xsi:type="drools:CostParameters" /></drools:ElementParameters></drools:Scenario></drools:ProcessAnalysisData></bpmn2:extensionElements><bpmn2:source>_Lo0WgDY-EeeN5MAjx8Ez1A</bpmn2:source><bpmn2:target>_Lo0WgDY-EeeN5MAjx8Ez1A</bpmn2:target></bpmn2:relationship></bpmn2:definitions>]]></column>
			<where>workflowtype='BFSD_ORIGINATION'and workflowactive=1</where>
		</update>
	</changeSet>
<changeSet id="75" author="Pruthvi">
	<sql>
		UPDATE SeqWorkFlowDetails SET SEQNO= (SELECT MAX(WorkflowId)+1 FROM workflowdetails);
	</sql>
</changeSet>
<changeSet id="76" author="Siva">
	<sql>
		UPDATE  errordetails SET errormessage = REPLACE(errormessage, 'Finance', 'Loan');
	</sql>
</changeSet>

<changeSet id="77" author="Siva">
		<addColumn tableName="FinReceiptHeader">
			<column name="CancelReason" type="varchar(8)" />
		</addColumn>
		<addColumn tableName="FinReceiptHeader_Temp">
			<column name="CancelReason" type="varchar(8)" />
		</addColumn>
	</changeSet>
	<changeSet id="78" author="Siva">
	<createView viewName="FINRECEIPTHEADER_VIEW" replaceIfExists="true">
		  SELECT     T1.ReceiptID, T1.ReceiptDate, T1.ReceiptType,T1.RecAgainst,T1.Reference, T1.ReceiptPurpose, 
				 T1.ReceiptMode, T1.ExcessAdjustTo,T1.AllocationType,T1.ReceiptAmount,T1.EffectSchdMethod, 
				 T1.ReceiptModeStatus, T1.Version, T1.LastMntBy, T1.LastMntOn,T1.RecordStatus,T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId,
				 T2.FinType,  T2.FinBranch, T3.CustCIF , 	T3.CustShrtName, T2.FinCcy, T1.RealizationDate, T4.FinTypeDesc,  T6.BranchDesc FinBranchDesc, T5.CcyDesc FinCcyDesc
							FROM         FinReceiptHeader_Temp T1 INNER JOIN
				       FinanceMain T2 ON T1.Reference = T2.FinReference INNER JOIN
				       Customers T3 ON T2.CustId = T3.CustId INNER JOIN
				       RMTFinanceTypes T4 ON T2.FinType = T4.FinType INNER JOIN
				       RMTCurrencies T5 ON T2.FinCcy = T5.CcyCode INNER JOIN
				       RMTBranches T6 ON T2.FinBranch = T6.BranchCode
				UNION ALL
				 SELECT     T1.ReceiptID, T1.ReceiptDate, T1.ReceiptType,T1.RecAgainst,T1.Reference, T1.ReceiptPurpose, 
				 T1.ReceiptMode, T1.ExcessAdjustTo,T1.AllocationType,T1.ReceiptAmount,T1.EffectSchdMethod, 
				 T1.ReceiptModeStatus, T1.Version, T1.LastMntBy, T1.LastMntOn,T1.RecordStatus,T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId,
				 T2.FinType,  T2.FinBranch, T3.CustCIF , 	T3.CustShrtName, T2.FinCcy, T1.RealizationDate, T4.FinTypeDesc,  T6.BranchDesc FinBranchDesc, T5.CcyDesc FinCcyDesc
							FROM         FinReceiptHeader T1 INNER JOIN
				       FinanceMain T2 ON T1.Reference = T2.FinReference INNER JOIN
				       Customers T3 ON T2.CustId = T3.CustId INNER JOIN
				       RMTFinanceTypes T4 ON T2.FinType = T4.FinType INNER JOIN
				       RMTCurrencies T5 ON T2.FinCcy = T5.CcyCode INNER JOIN
				       RMTBranches T6 ON T2.FinBranch = T6.BranchCode
						WHERE     NOT EXISTS
				                          (SELECT     1
				                            FROM          FinReceiptHeader_TEMP 
				                            WHERE      ReceiptID = T1.ReceiptID)
		</createView>
	</changeSet>
	<changeSet id="79" author="Siva">
	<sql>
		Update BMTRejectCodes SET REJECTTYPE = 'Finance';
	</sql>
</changeSet>

	<changeSet id="80" author="Siva">
	<createView viewName="FINRECEIPTHEADER_VIEW" replaceIfExists="true">
		  SELECT     T1.ReceiptID, T1.ReceiptDate, T1.ReceiptType,T1.RecAgainst,T1.Reference, T1.ReceiptPurpose, 
				 T1.ReceiptMode, T1.ExcessAdjustTo,T1.AllocationType,T1.ReceiptAmount,T1.EffectSchdMethod, 
				 T1.ReceiptModeStatus, T1.Version, T1.LastMntBy, T1.LastMntOn,T1.RecordStatus,T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId,
				 T2.FinType,  T2.FinBranch, T3.CustCIF , 	T3.CustShrtName, T2.FinCcy, T1.RealizationDate,
				 T1.CancelReason, T4.FinTypeDesc,  T6.BranchDesc FinBranchDesc, T5.CcyDesc FinCcyDesc, T7.RejectDesc CancelReasonDesc
							FROM         FinReceiptHeader_Temp T1 INNER JOIN
				       FinanceMain T2 ON T1.Reference = T2.FinReference INNER JOIN
				       Customers T3 ON T2.CustId = T3.CustId INNER JOIN
				       RMTFinanceTypes T4 ON T2.FinType = T4.FinType INNER JOIN
				       RMTCurrencies T5 ON T2.FinCcy = T5.CcyCode INNER JOIN
				       RMTBranches T6 ON T2.FinBranch = T6.BranchCode LEFT JOIN
				       BMTRejectCodes T7 ON T1.CancelReason = T7.RejectCode
				UNION ALL
				 SELECT     T1.ReceiptID, T1.ReceiptDate, T1.ReceiptType,T1.RecAgainst,T1.Reference, T1.ReceiptPurpose, 
				 T1.ReceiptMode, T1.ExcessAdjustTo,T1.AllocationType,T1.ReceiptAmount,T1.EffectSchdMethod, 
				 T1.ReceiptModeStatus, T1.Version, T1.LastMntBy, T1.LastMntOn,T1.RecordStatus,T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId,
				 T2.FinType,  T2.FinBranch, T3.CustCIF , 	T3.CustShrtName, T2.FinCcy, T1.RealizationDate,
				 T1.CancelReason, T4.FinTypeDesc,  T6.BranchDesc FinBranchDesc, T5.CcyDesc FinCcyDesc, T7.RejectDesc CancelReasonDesc
							FROM         FinReceiptHeader T1 INNER JOIN
				       FinanceMain T2 ON T1.Reference = T2.FinReference INNER JOIN
				       Customers T3 ON T2.CustId = T3.CustId INNER JOIN
				       RMTFinanceTypes T4 ON T2.FinType = T4.FinType INNER JOIN
				       RMTCurrencies T5 ON T2.FinCcy = T5.CcyCode INNER JOIN
				       RMTBranches T6 ON T2.FinBranch = T6.BranchCode LEFT JOIN
				       BMTRejectCodes T7 ON T1.CancelReason = T7.RejectCode
						WHERE     NOT EXISTS
				                          (SELECT     1
				                            FROM          FinReceiptHeader_TEMP 
				                            WHERE      ReceiptID = T1.ReceiptID)
		</createView>
	</changeSet>
		<changeSet id="81" author="Siva">
	<sql>
		UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS);
		UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS); 
					
		INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'ReceiptCancellationDialog_cancelReason','ReceiptCancellationDialog',0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
		INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='RECEIPTCANCEL_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptCancellationDialog_cancelReason'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
		
		UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS);
		UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS); 
	</sql>
</changeSet>

		<changeSet id="82" author="pruthvi">
	<sql>
Insert into SMTPARAMETERS (SYSPARMCODE,SYSPARMDESC,SYSPARMTYPE,SYSPARMMAINT,SYSPARMVALUE,SYSPARMLENGTH,SYSPARMDEC,SYSPARMLIST,SYSPARMVALDMOD,SYSPARMDESCRIPTION,VERSION,LASTMNTBY,LASTMNTON,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID) values ('FEE_POSTPONEMENT_METHOD','Fee Postponement Method when scheule installment postponed','int ',0,'1',1,0,null,null,'1: Postpone to next available schedule 2: Set along with postponed installment',1,1000,to_date('30-APR-2017 00:00:00','DD-MON-RRRR HH24:MI:SS'),'Approved',null,null,null,null,null,0);
Insert into SMTPARAMETERS (SYSPARMCODE,SYSPARMDESC,SYSPARMTYPE,SYSPARMMAINT,SYSPARMVALUE,SYSPARMLENGTH,SYSPARMDEC,SYSPARMLIST,SYSPARMVALDMOD,SYSPARMDESCRIPTION,VERSION,LASTMNTBY,LASTMNTON,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID) values ('FEE_RECAL_ON_DELETE_TERMS','Fee Calculation Method when scheule installments reduced','int ',0,'2',1,0,null,null,'1: Adjust to next available schedule 2: Recalculate 3: Adjust to Last schedule',1,1000,to_date('30-APR-2017 00:00:00','DD-MON-RRRR HH24:MI:SS'),'Approved',null,null,null,null,null,0);
</sql>
</changeSet>
<changeSet id="83" author="Irfan">
	<sql>
		DELETE FROM SECGROUPRIGHTS WHERE RIGHTID IN(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME LIKE '%button_WIFFinanceMainDialog_btnRecalEMIH%');
		DELETE from SECRIGHTS where rightName = 'button_WIFFinanceMainDialog_btnRecalEMIH';
		
		UPDATE SeqSecRights SET SeqNo = (SELECT MAX(RightID) FROM SecRights);
		UPDATE SeqSecGroupRights SET SeqNo = (SELECT MAX(GrpRightID) FROM SecGroupRights);
		
		INSERT INTO SECRIGHTS VALUES((SELECT MAX(RIGHTID) + 1 FROM SECRIGHTS) ,2, 'button_WIFFinanceMainDialog_btnRecalEMIH','WIFFinanceMainDialog',1,1000,CURRENT_TIMESTAMP,'','','','','','',0);
		INSERT INTO SECGROUPRIGHTS VALUES ((SELECT MAX(GRPRIGHTID) +1  FROM SECGROUPRIGHTS),(SELECT GRPID FROM SECGROUPS WHERE GRPCODE ='CL_ORIGINATION_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME ='button_WIFFinanceMainDialog_btnRecalEMIH'), 1,0,1000,CURRENT_TIMESTAMP,'','','','','','',0);
		INSERT INTO SECGROUPRIGHTS VALUES ((SELECT MAX(GRPRIGHTID) +1  FROM SECGROUPRIGHTS),(SELECT GRPID FROM SECGROUPS WHERE GRPCODE ='CL_ORIGINATION_WRM'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME ='button_WIFFinanceMainDialog_btnRecalEMIH'), 1,0,1000,CURRENT_TIMESTAMP,'','','','','','',0);
		INSERT INTO SECGROUPRIGHTS VALUES ((SELECT MAX(GRPRIGHTID) +1  FROM SECGROUPRIGHTS),(SELECT GRPID FROM SECGROUPS WHERE GRPCODE ='FIN_PLANNEDEMIH_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME ='button_WIFFinanceMainDialog_btnRecalEMIH'), 1,0,1000,CURRENT_TIMESTAMP,'','','','','','',0);
		INSERT INTO SECGROUPRIGHTS VALUES ((SELECT MAX(GRPRIGHTID) +1  FROM SECGROUPRIGHTS),(SELECT GRPID FROM SECGROUPS WHERE GRPCODE ='BFSD_ORIGINATION_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME ='button_WIFFinanceMainDialog_btnRecalEMIH'), 1,0,1000,CURRENT_TIMESTAMP,'','','','','','',0);
		
		UPDATE SeqSecRights SET SeqNo = (SELECT MAX(RightID) FROM SecRights);
		UPDATE SeqSecGroupRights SET SeqNo = (SELECT MAX(GrpRightID) FROM SecGroupRights);
	</sql>
	</changeSet>
	<changeSet id="84" author="Prasad">
	<createView viewName="RPT_SOA_TXNDETAILS_VIEW" replaceIfExists="true">
		  <![CDATA[Select T1.Finreference,Schdate,Particulars,Debit,Credit,ccyMinorccyunits,ccyEditField,
		 (Select to_date(sysparmvalue, 'YYYY-MM-DD')  sysparmvalue from smtparameters where SYSPARMCODE='APP_DATE') APP_DATE 
		 from ( 
			Select Finreference,Schdate, (case when Disbonschdate=1 then 'Amount Financed - Payable ('||Finreference||')' 
									     when BPIORHOLIDAY='B' then 'Broken Period Interest Receivable -Due('||Finreference||')' else 
											  'Due for Installment '||INSTNUMBER||' ('||Finreference||')' end) Particulars,
			 case when Disbonschdate=1 then 0 else Repayamount end Debit,
			 case when Disbonschdate=1 then DisbAmount else 0 end Credit
	   from finscheduledetails  
	   where (BPIORHOLIDAY!='H' or BPIORHOLIDAY is null) and 
			 schdate<=(Select to_date(sysparmvalue, 'YYYY-MM-DD')  sysparmvalue from smtparameters where SYSPARMCODE='APP_DATE')  			 
	union 	
		SELECT FINREFERENCE,M.POSTDATE,(CASE WHEN F.FEETYPEID IS NOT NULL THEN FEETYPEDESC 
		else 'Bounce' end) ||'- Due ('||Finreference||')' ,m.ADVISEAMOUNT Debit ,0 Credit 
		FROM MANUALADVISE M
		LEFT JOIN FEETYPES F ON F.FEETYPEID = M.FEETYPEID 	
		LEFT JOIN BOUNCEREASONS T3 ON M.BounceID = T3.BOUNCEID		
	union	
		Select REFERENCE,Receiveddate,(Case when PAYMENTTYPE NOT in ('EXCESS','CASH') then 'Payment Recieved vide '||PAYMENTTYPE ||' No.:'||CHEQUEACNO ||'('||REFERENCE||')'
										 when PAYMENTTYPE in ('EXCESS') then 'Amount Adjusted ('||REFERENCE||')' 
										 when PAYMENTTYPE in ('CASH') then 'Cash received Vide Receipt No.'||CHEQUEACNO ||'('||REFERENCE||')' end) Particulars,
			    Case when PAYMENTTYPE NOT in ('EXCESS') then 0  when PAYMENTTYPE in ('EXCESS') then Amount end debit,Amount credit
		from FINRECEIPTHEADER T1 inner join 
			 FINRECEIPTDETAIL T2 on T1.RECEIPTID =T2.RECEIPTID			 
	union 	
		Select finreference, FinODSchdDate, 'Penalty Due Created for Past due till date ' || FINODTILLDATE Particulars, 
		TotPenaltyAmt Debit, 0 credit
		From FinODDetails where TOtPenaltyAmt > 0 
	)T1 
	 inner join finpftdetails t2 on t2.Finreference=t1.Finreference
	 inner join RMTCURRENCIES C on C.ccycode= T2.finccy]]>
		</createView>
	</changeSet>
	<changeSet id="85" author="Srikanth">
	<sql>
	INSERT INTO ErrorDetails VALUES('90278','EN','E','Phone Number is invalid. Allowed Characters are [0-9].','','Approved','','','','','',0,CURRENT_TIMESTAMP,1000,0);
	update errorDetails set ErrorMessage='PAN Number invalid. Please Provide valid PAN Number.Allowed Format is CCCCCNNNNC.' where ErrorCode='90251';
	</sql>
	</changeSet>
</databaseChangeLog>