<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">
	<property name="add.schema" value="dbo." dbms="mssql" />
	<property name="add.schema" value=" " dbms="oracle" />
	<property name="call.substr" value="substring" dbms="mssql" />
	<property name="call.substr" value="substr" dbms="oracle" />
	<property name="call.substr" value="substring" dbms="postgresql" />
	<property name="call.auditdb" value="PFFBFSQCAudit.." dbms="mssql" />
	<property name="call.auditdb" value=" " dbms="oracle" />
	<property name="call.concatenate" value="+" dbms="mssql" />
	<property name="call.concatenate" value="||" dbms="oracle" />
	<property name="call.concatenate" value="||" dbms="postgresql" />
	<property name="call.collength" value="LEN" dbms="mssql" />
	<property name="call.collength" value="LENGTH" dbms="oracle" />
	<property name="call.collength" value="LENGTH" dbms="postgresql" />
	<property name="call.date" value="getdate()" dbms="mssql" />
	<property name="call.date" value="sysdate" dbms="oracle" />
	<property name="call.date" value="now()::timestamp" dbms="postgresql" />

	<changeSet id="pre_run_for_pgp" author="vijaya.a" runAlways="true" dbms="postgresql">
		<sql>
			Set search_path = plf,public,pg_catalog;
		</sql>
	</changeSet>

	<changeSet id="ST#3007_1" author="vijaya.a">
		<sql>
			<![CDATA[
				
				Delete From RMTACCOUNTTYPES Where ACTYPE like 'FEE_IE%';
				
				INSERT INTO RMTACCOUNTTYPES (ACTYPE, ACTYPEDESC, ACPURPOSE, ACHEADCODE, INTERNALAC, CUSTSYSAC, ACLMTCATEGORY, ACTYPEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, ASSERTORLIABILITY, ONBALANCESHEET, ALLOWOVERDRAW, ACTYPEGRPID, PROFITCENTERID, COSTCENTERID, TAXAPPLICABLE, ACCADDLVAR1, ACCADDLVAR2, ACCADDLCHAR1, ACCADDLVAR3, ACCADDLVAR4, EXTRACTIONTYPE, CONTROLAC) VALUES ('FEE_IE', 				'Single Fee A/c', 						'F', '0000', 1, 0, null, 1, 1, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0, null, 0, '0', 4, (SELECT PROFITCENTERID FROM PROFITCENTERS WHERE PROFITCENTERCODE = 'DEFAULT'), 34, '1', '9971', 'FINANCE AND RELATED SERVICES', '0', null, 'MIGR', 'TRN', 0);
				INSERT INTO RMTACCOUNTTYPES (ACTYPE, ACTYPEDESC, ACPURPOSE, ACHEADCODE, INTERNALAC, CUSTSYSAC, ACLMTCATEGORY, ACTYPEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, ASSERTORLIABILITY, ONBALANCESHEET, ALLOWOVERDRAW, ACTYPEGRPID, PROFITCENTERID, COSTCENTERID, TAXAPPLICABLE, ACCADDLVAR1, ACCADDLVAR2, ACCADDLCHAR1, ACCADDLVAR3, ACCADDLVAR4, EXTRACTIONTYPE, CONTROLAC) VALUES ('FEE_IE_CGST', 			'CGST For Single Fee A/c',   			'F', '0000', 1, 0, null, 1, 1, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0, null, 0, '0', 4, (SELECT PROFITCENTERID FROM PROFITCENTERS WHERE PROFITCENTERCODE = 'DEFAULT'), 34, '1', '9971', 'FINANCE AND RELATED SERVICES', '0', null, 'MIGR', 'TRN', 0);
				INSERT INTO RMTACCOUNTTYPES (ACTYPE, ACTYPEDESC, ACPURPOSE, ACHEADCODE, INTERNALAC, CUSTSYSAC, ACLMTCATEGORY, ACTYPEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, ASSERTORLIABILITY, ONBALANCESHEET, ALLOWOVERDRAW, ACTYPEGRPID, PROFITCENTERID, COSTCENTERID, TAXAPPLICABLE, ACCADDLVAR1, ACCADDLVAR2, ACCADDLCHAR1, ACCADDLVAR3, ACCADDLVAR4, EXTRACTIONTYPE, CONTROLAC) VALUES ('FEE_IE_SGST', 			'SGST For Single Fee A/c',   			'F', '0000', 1, 0, null, 1, 1, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0, null, 0, '0', 4, (SELECT PROFITCENTERID FROM PROFITCENTERS WHERE PROFITCENTERCODE = 'DEFAULT'), 34, '1', '9971', 'FINANCE AND RELATED SERVICES', '0', null, 'MIGR', 'TRN', 0);
				INSERT INTO RMTACCOUNTTYPES (ACTYPE, ACTYPEDESC, ACPURPOSE, ACHEADCODE, INTERNALAC, CUSTSYSAC, ACLMTCATEGORY, ACTYPEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, ASSERTORLIABILITY, ONBALANCESHEET, ALLOWOVERDRAW, ACTYPEGRPID, PROFITCENTERID, COSTCENTERID, TAXAPPLICABLE, ACCADDLVAR1, ACCADDLVAR2, ACCADDLCHAR1, ACCADDLVAR3, ACCADDLVAR4, EXTRACTIONTYPE, CONTROLAC) VALUES ('FEE_IE_IGST', 			'IGST For Single Fee A/c',   			'F', '0000', 1, 0, null, 1, 1, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0, null, 0, '0', 4, (SELECT PROFITCENTERID FROM PROFITCENTERS WHERE PROFITCENTERCODE = 'DEFAULT'), 34, '1', '9971', 'FINANCE AND RELATED SERVICES', '0', null, 'MIGR', 'TRN', 0);
				INSERT INTO RMTACCOUNTTYPES (ACTYPE, ACTYPEDESC, ACPURPOSE, ACHEADCODE, INTERNALAC, CUSTSYSAC, ACLMTCATEGORY, ACTYPEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, ASSERTORLIABILITY, ONBALANCESHEET, ALLOWOVERDRAW, ACTYPEGRPID, PROFITCENTERID, COSTCENTERID, TAXAPPLICABLE, ACCADDLVAR1, ACCADDLVAR2, ACCADDLCHAR1, ACCADDLVAR3, ACCADDLVAR4, EXTRACTIONTYPE, CONTROLAC) VALUES ('FEE_IE_UGST', 			'UGST For Single Fee A/c',   			'F', '0000', 1, 0, null, 1, 1, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0, null, 0, '0', 4, (SELECT PROFITCENTERID FROM PROFITCENTERS WHERE PROFITCENTERCODE = 'DEFAULT'), 34, '1', '9971', 'FINANCE AND RELATED SERVICES', '0', null, 'MIGR', 'TRN', 0);
				INSERT INTO RMTACCOUNTTYPES (ACTYPE, ACTYPEDESC, ACPURPOSE, ACHEADCODE, INTERNALAC, CUSTSYSAC, ACLMTCATEGORY, ACTYPEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, ASSERTORLIABILITY, ONBALANCESHEET, ALLOWOVERDRAW, ACTYPEGRPID, PROFITCENTERID, COSTCENTERID, TAXAPPLICABLE, ACCADDLVAR1, ACCADDLVAR2, ACCADDLCHAR1, ACCADDLVAR3, ACCADDLVAR4, EXTRACTIONTYPE, CONTROLAC) VALUES ('FEE_IE_CESS', 			'CESS For Single Fee A/c',  			'F', '0000', 1, 0, null, 1, 1, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0, null, 0, '0', 4, (SELECT PROFITCENTERID FROM PROFITCENTERS WHERE PROFITCENTERCODE = 'DEFAULT'), 34, '1', '9971', 'FINANCE AND RELATED SERVICES', '0', null, 'MIGR', 'TRN', 0);
				INSERT INTO RMTACCOUNTTYPES (ACTYPE, ACTYPEDESC, ACPURPOSE, ACHEADCODE, INTERNALAC, CUSTSYSAC, ACLMTCATEGORY, ACTYPEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, ASSERTORLIABILITY, ONBALANCESHEET, ALLOWOVERDRAW, ACTYPEGRPID, PROFITCENTERID, COSTCENTERID, TAXAPPLICABLE, ACCADDLVAR1, ACCADDLVAR2, ACCADDLCHAR1, ACCADDLVAR3, ACCADDLVAR4, EXTRACTIONTYPE, CONTROLAC) VALUES ('FEE_IE_TDS',  			'TDS For Single Fee A/c',    			'F', '0000', 1, 0, null, 1, 1, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0, null, 0, '0', 4, (SELECT PROFITCENTERID FROM PROFITCENTERS WHERE PROFITCENTERCODE = 'DEFAULT'), 34, '1', '9971', 'FINANCE AND RELATED SERVICES', '0', null, 'MIGR', 'TRN', 0);
				INSERT INTO RMTACCOUNTTYPES (ACTYPE, ACTYPEDESC, ACPURPOSE, ACHEADCODE, INTERNALAC, CUSTSYSAC, ACLMTCATEGORY, ACTYPEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, ASSERTORLIABILITY, ONBALANCESHEET, ALLOWOVERDRAW, ACTYPEGRPID, PROFITCENTERID, COSTCENTERID, TAXAPPLICABLE, ACCADDLVAR1, ACCADDLVAR2, ACCADDLCHAR1, ACCADDLVAR3, ACCADDLVAR4, EXTRACTIONTYPE, CONTROLAC) VALUES ('FEE_IE_WR', 			'Waiver or Refunc For Single Fee A/c',  'F', '0000', 1, 0, null, 1, 1, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0, null, 0, '0', 4, (SELECT PROFITCENTERID FROM PROFITCENTERS WHERE PROFITCENTERCODE = 'DEFAULT'), 34, '1', '9971', 'FINANCE AND RELATED SERVICES', '0', null, 'MIGR', 'TRN', 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#3007.1" author="vijaya.a">
		<addColumn tableName="RMTTRANSACTIONENTRY_TEMP">
			<column name="FeeRepeat" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#3007.2" author="vijaya.a">
		<addColumn tableName="RMTTRANSACTIONENTRY_TEMP">
			<column name="ReceivableOrPayable" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#3007.3" author="vijaya.a">
		<addColumn tableName="RMTTRANSACTIONENTRY_TEMP">
			<column name="AssignmentEntry" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#3007.4" author="vijaya.a">
		<addColumn tableName="RMTTRANSACTIONENTRY_TEMP">
			<column name="Bulking" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#3007.5" author="vijaya.a">
		<addColumn tableName="RMTTRANSACTIONENTRY">
			<column name="FeeRepeat" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#3007.6" author="vijaya.a">
		<addColumn tableName="RMTTRANSACTIONENTRY">
			<column name="ReceivableOrPayable" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#3007.7" author="vijaya.a">
		<addColumn tableName="RMTTRANSACTIONENTRY">
			<column name="AssignmentEntry" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#3007.8" author="vijaya.a">
		<addColumn tableName="RMTTRANSACTIONENTRY">
			<column name="Bulking" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#3007.9" author="vijaya.a">
		<sql>
			<![CDATA[
				UPDATE RMTTRANSACTIONENTRY_TEMP SET FEEREPEAT = 0;
				UPDATE RMTTRANSACTIONENTRY_TEMP SET RECEIVABLEORPAYABLE = 0;
				UPDATE RMTTRANSACTIONENTRY_TEMP SET ASSIGNMENTENTRY = 0;
				UPDATE RMTTRANSACTIONENTRY_TEMP SET BULKING = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#3007.10" author="vijaya.a">
		<sql>
			<![CDATA[
				UPDATE RMTTRANSACTIONENTRY SET FEEREPEAT = 0;
				UPDATE RMTTRANSACTIONENTRY SET RECEIVABLEORPAYABLE = 0;
				UPDATE RMTTRANSACTIONENTRY SET ASSIGNMENTENTRY = 0;
				UPDATE RMTTRANSACTIONENTRY SET BULKING = 0;
			]]>
		</sql>
	</changeSet>


	<changeSet id="ST#3007.11" author="vijaya.a" dbms="postgresql, oracle">
		<addDefaultValue columnName="FeeRepeat" tableName="RMTTRANSACTIONENTRY_TEMP" defaultValue="0" />
		<addDefaultValue columnName="ReceivableOrPayable" tableName="RMTTRANSACTIONENTRY_TEMP"
			defaultValue="0" />
		<addDefaultValue columnName="AssignmentEntry" tableName="RMTTRANSACTIONENTRY_TEMP" defaultValue="0" />
		<addDefaultValue columnName="Bulking" tableName="RMTTRANSACTIONENTRY_TEMP" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#3007.11" author="vijaya.a" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE RMTTRANSACTIONENTRY_TEMP ADD CONSTRAINT DF_RTET_FeeRepeat DEFAULT 0 FOR FeeRepeat;
				ALTER TABLE RMTTRANSACTIONENTRY_TEMP ADD CONSTRAINT DF_RTET_ReceivableOrPayable DEFAULT 0 FOR ReceivableOrPayable;
				ALTER TABLE RMTTRANSACTIONENTRY_TEMP ADD CONSTRAINT DF_RTET_AssignmentEntry DEFAULT 0 FOR AssignmentEntry;
				ALTER TABLE RMTTRANSACTIONENTRY_TEMP ADD CONSTRAINT DF_RTET_Bulking DEFAULT 0 FOR Bulking;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#3007.12" author="vijaya.a" dbms="postgresql, oracle">
		<addDefaultValue columnName="FeeRepeat" tableName="RMTTRANSACTIONENTRY" defaultValue="0" />
		<addDefaultValue columnName="ReceivableOrPayable" tableName="RMTTRANSACTIONENTRY" defaultValue="0" />
		<addDefaultValue columnName="AssignmentEntry" tableName="RMTTRANSACTIONENTRY" defaultValue="0" />
		<addDefaultValue columnName="Bulking" tableName="RMTTRANSACTIONENTRY" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#3007.12" author="vijaya.a" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE RMTTRANSACTIONENTRY ADD CONSTRAINT DF_RTE_FeeRepeat DEFAULT 0 FOR FeeRepeat;
				ALTER TABLE RMTTRANSACTIONENTRY ADD CONSTRAINT DF_RTE_ReceivableOrPayable DEFAULT 0 FOR ReceivableOrPayable;
				ALTER TABLE RMTTRANSACTIONENTRY ADD CONSTRAINT DF_RTE_AssignmentEntry DEFAULT 0 FOR AssignmentEntry;
				ALTER TABLE RMTTRANSACTIONENTRY ADD CONSTRAINT DF_RFE_Bulking DEFAULT 0 FOR Bulking;
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#3007.13" author="vijaya.a">
		<addNotNullConstraint tableName="RMTTRANSACTIONENTRY_TEMP" columnName="FeeRepeat" columnDataType="boolean" />
		<addNotNullConstraint tableName="RMTTRANSACTIONENTRY_TEMP" columnName="ReceivableOrPayable"	columnDataType="boolean" />
		<addNotNullConstraint tableName="RMTTRANSACTIONENTRY_TEMP" columnName="AssignmentEntry" columnDataType="boolean" />
		<addNotNullConstraint tableName="RMTTRANSACTIONENTRY_TEMP" columnName="Bulking"	columnDataType="boolean" />
	</changeSet>

	<changeSet id="ST#3007.14" author="vijaya.a">
		<addNotNullConstraint tableName="RMTTRANSACTIONENTRY" columnName="FeeRepeat" columnDataType="boolean" />
		<addNotNullConstraint tableName="RMTTRANSACTIONENTRY" columnName="ReceivableOrPayable" columnDataType="boolean" />
		<addNotNullConstraint tableName="RMTTRANSACTIONENTRY" columnName="AssignmentEntry" columnDataType="boolean" />
		<addNotNullConstraint tableName="RMTTRANSACTIONENTRY" columnName="Bulking" columnDataType="boolean" />
	</changeSet>

	<changeSet id="ST#3007.15" author="vijaya.a">
		<addColumn tableName="FEETYPES_TEMP">
			<column name="FeeIncomeOrExpense" type="varchar(50)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#3007.16" author="vijaya.a">
		<addColumn tableName="FEETYPES_TEMP">
			<column name="AcType" type="varchar(15)" />
		</addColumn>
	</changeSet>


	<changeSet id="ST#3007.17" author="vijaya.a">
		<addColumn tableName="FEETYPES">
			<column name="FeeIncomeOrExpense" type="varchar(50)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#3007.18" author="vijaya.a">
		<addColumn tableName="FEETYPES">
			<column name="AcType" type="varchar(15)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#3007.19" author="vijaya.a">
		<addColumn tableName="FINTYPEFEES_TEMP">
			<column name="InclForAssignment" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#3007.20" author="vijaya.a">
		<addColumn tableName="FINTYPEFEES">
			<column name="InclForAssignment" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#3007.21" author="vijaya.a">
		<sql>
			<![CDATA[
				UPDATE FINTYPEFEES_TEMP SET INCLFORASSIGNMENT = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#3007.22" author="vijaya.a">
		<sql>
			<![CDATA[
				UPDATE FINTYPEFEES SET INCLFORASSIGNMENT = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#3007.23" author="vijaya.a" dbms="postgresql, oracle">
		<addDefaultValue columnName="InclForAssignment" tableName="FINTYPEFEES_TEMP" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#3007.23" author="vijaya.a" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE FINTYPEFEES_TEMP ADD CONSTRAINT DF_FTFT_InclForAssignment DEFAULT 0 FOR InclForAssignment;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#3007.24" author="vijaya.a">
		<addNotNullConstraint tableName="FINTYPEFEES_TEMP" columnName="InclForAssignment" columnDataType="boolean" />
	</changeSet>

	<changeSet id="ST#3007.25" author="vijaya.a" dbms="postgresql, oracle">
		<addDefaultValue columnName="InclForAssignment" tableName="FINTYPEFEES" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#3007.25" author="vijaya.a" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE FINTYPEFEES ADD CONSTRAINT DF_FTF_InclForAssignment DEFAULT 0 FOR InclForAssignment;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#3007.26" author="vijaya.a">
		<addNotNullConstraint tableName="FINTYPEFEES" columnName="InclForAssignment" columnDataType="boolean" />
	</changeSet>

	<changeSet id="ST#3007.27_pre" author="vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmttransactionentry_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#3007.27" author="vijaya.a">
		<createView viewName="RMTTRANSACTIONENTRY_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ACCOUNTSETID,
					T1.TRANSORDER,
					T1.TRANSDESC,
					T1.DEBITCREDIT,
					T1.SHADOWPOSTING,
					T1.ACCOUNT,
					T1.ACCOUNTTYPE,
					T1.ACCOUNTSUBHEADRULE,
					T1.TRANSCATIONCODE,
					T1.RVSTRANSACTIONCODE,
					T1.AMOUNTRULE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.ACTYPEDESC LOVDESCACCOUNTTYPENAME,
					T3.RULECODEDESC LOVDESCACCOUNTSUBHEADRULENAME,
					T4.TRANDESC LOVDESCTRANSCATIONCODENAME,
					T5.TRANDESC LOVDESCRVSTRANSACTIONCODENAME,
					T6.EVENTCODE LOVDESCEVENTCODENAME,
					T6.ACCOUNTSETCODE LOVDESCACCSETCODENAME,
					T6.ACCOUNTSETCODENAME LOVDESCACCSETCODEDESC,
					T1.ACCOUNTBRANCH,
					T7.BRANCHDESC LOVDESCACCOUNTBRANCHNAME,
					T8.SIASHORTNAME LOVDESCSYSINACTYPENAME,
					T1.FEECODE,
					T1.CHARGETYPE,
					T1.ENTRYBYINVESTMENT,
					T1.POSTTOSYS,
					T1.OPENNEWFINAC,
					T9.AEEVENTCODEDESC LOVDESCEVENTCODEDESC,
					T1.DERIVEDTRANORDER,
					T1.FEEREPEAT,
					T1.RECEIVABLEORPAYABLE, 
					T1.ASSIGNMENTENTRY, 
					T1.BULKING
				FROM RMTTRANSACTIONENTRY_TEMP T1
				LEFT JOIN RMTACCOUNTTYPES T2 ON T1.ACCOUNTTYPE = T2.ACTYPE
				JOIN BMTTRANSACTIONCODE T4 ON T1.TRANSCATIONCODE = T4.TRANCODE
				JOIN BMTTRANSACTIONCODE T5 ON T1.RVSTRANSACTIONCODE = T5.TRANCODE
				JOIN RMTACCOUNTINGSET_VIEW T6 ON T1.ACCOUNTSETID = T6.ACCOUNTSETID
				LEFT JOIN RMTBRANCHES T7 ON T1.ACCOUNTBRANCH = T7.BRANCHCODE
				LEFT JOIN RULES T3 ON T1.ACCOUNTSUBHEADRULE = T3.RULECODE AND T3.RULEMODULE = 'SUBHEAD'
				LEFT JOIN SYSTEMINTERNALACCOUNTDEF T8 ON T1.ACCOUNTTYPE = T8.SIACODE
				JOIN BMTAEEVENTS T9 ON T6.EVENTCODE = T9.AEEVENTCODE
				UNION ALL
				SELECT T1.ACCOUNTSETID,
					T1.TRANSORDER,
					T1.TRANSDESC,
					T1.DEBITCREDIT,
					T1.SHADOWPOSTING,
					T1.ACCOUNT,
					T1.ACCOUNTTYPE,
					T1.ACCOUNTSUBHEADRULE,
					T1.TRANSCATIONCODE,
					T1.RVSTRANSACTIONCODE,
					T1.AMOUNTRULE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.ACTYPEDESC LOVDESCACCOUNTTYPENAME,
					T3.RULECODEDESC LOVDESCACCOUNTSUBHEADRULENAME,
					T4.TRANDESC LOVDESCTRANSCATIONCODENAME,
					T5.TRANDESC LOVDESCRVSTRANSACTIONCODENAME,
					T6.EVENTCODE LOVDESCEVENTCODENAME,
					T6.ACCOUNTSETCODE LOVDESCACCSETCODENAME,
					T6.ACCOUNTSETCODENAME LOVDESCACCSETCODEDESC,
					T1.ACCOUNTBRANCH,
					T7.BRANCHDESC LOVDESCACCOUNTBRANCHNAME,
					T8.SIASHORTNAME LOVDESCSYSINACTYPENAME,
					T1.FEECODE,
					T1.CHARGETYPE,
					T1.ENTRYBYINVESTMENT,
					T1.POSTTOSYS,
					T1.OPENNEWFINAC,
					T9.AEEVENTCODEDESC LOVDESCEVENTCODEDESC,
					T1.DERIVEDTRANORDER,
					T1.FEEREPEAT,
		   			T1.RECEIVABLEORPAYABLE, 
		   			T1.ASSIGNMENTENTRY, 
		   			T1.BULKING
				FROM RMTTRANSACTIONENTRY T1
				LEFT JOIN RMTACCOUNTTYPES T2 ON T1.ACCOUNTTYPE = T2.ACTYPE
				JOIN BMTTRANSACTIONCODE T4 ON T1.TRANSCATIONCODE = T4.TRANCODE
				JOIN BMTTRANSACTIONCODE T5 ON T1.RVSTRANSACTIONCODE = T5.TRANCODE
				JOIN RMTACCOUNTINGSET_VIEW T6 ON T1.ACCOUNTSETID = T6.ACCOUNTSETID
				LEFT JOIN RMTBRANCHES T7 ON T1.ACCOUNTBRANCH = T7.BRANCHCODE
				LEFT JOIN RULES T3 ON T1.ACCOUNTSUBHEADRULE = T3.RULECODE AND T3.RULEMODULE = 'SUBHEAD'
				LEFT JOIN SYSTEMINTERNALACCOUNTDEF T8 ON T1.ACCOUNTTYPE = T8.SIACODE
				JOIN BMTAEEVENTS T9 ON T6.EVENTCODE = T9.AEEVENTCODE
				WHERE NOT EXISTS (SELECT 1 FROM RMTTRANSACTIONENTRY_TEMP
					WHERE RMTTRANSACTIONENTRY_TEMP.ACCOUNTSETID = T1.ACCOUNTSETID AND RMTTRANSACTIONENTRY_TEMP.TRANSORDER = T1.TRANSORDER)
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#3007_post" author="vijaya.a" dbms="postgresql">
		<sql>
		  <![CDATA[
		    	select deps_restore_dependencies ('plf', 'rmttransactionentry_view');
		 ]]>
		</sql>
	</changeSet>

	<changeSet id="ST#3007.28_pre" author="vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmttransactionentry_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#3007.28" author="vijaya.a">
		<createView viewName="RMTTRANSACTIONENTRY_AVIEW" replaceIfExists="true">
			<![CDATA[
			  	SELECT T1.ACCOUNTSETID,
					T1.TRANSORDER,
					T1.TRANSDESC,
					T1.DEBITCREDIT,
					T1.SHADOWPOSTING,
					T1.ACCOUNT,
					T1.ACCOUNTTYPE,
					T1.ACCOUNTSUBHEADRULE,
					T1.TRANSCATIONCODE,
					T1.RVSTRANSACTIONCODE,
					T1.AMOUNTRULE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.ACTYPEDESC LOVDESCACCOUNTTYPENAME,
					T3.RULECODEDESC LOVDESCACCOUNTSUBHEADRULENAME,
					T4.TRANDESC LOVDESCTRANSCATIONCODENAME,
					T5.TRANDESC LOVDESCRVSTRANSACTIONCODENAME,
					T6.EVENTCODE LOVDESCEVENTCODENAME,
					T6.ACCOUNTSETCODE LOVDESCACCSETCODENAME,
					T6.ACCOUNTSETCODENAME LOVDESCACCSETCODEDESC,
					T1.ACCOUNTBRANCH,
					T7.BRANCHDESC LOVDESCACCOUNTBRANCHNAME,
					T8.SIASHORTNAME LOVDESCSYSINACTYPENAME,
					T1.FEECODE,
					T1.CHARGETYPE,
					T1.ENTRYBYINVESTMENT,
					T1.POSTTOSYS,
					T1.OPENNEWFINAC,
					T9.AEEVENTCODEDESC LOVDESCEVENTCODEDESC,
					T1.DERIVEDTRANORDER,
					T1.FEEREPEAT,
		   			T1.RECEIVABLEORPAYABLE, 
		   			T1.ASSIGNMENTENTRY, 
		   			T1.BULKING
				FROM RMTTRANSACTIONENTRY T1
				LEFT JOIN RMTACCOUNTTYPES T2 ON T1.ACCOUNTTYPE = T2.ACTYPE
				JOIN BMTTRANSACTIONCODE T4 ON T1.TRANSCATIONCODE = T4.TRANCODE
				JOIN BMTTRANSACTIONCODE T5 ON T1.RVSTRANSACTIONCODE = T5.TRANCODE
				JOIN RMTACCOUNTINGSET_VIEW T6 ON T1.ACCOUNTSETID = T6.ACCOUNTSETID
				LEFT JOIN RMTBRANCHES T7 ON T1.ACCOUNTBRANCH = T7.BRANCHCODE
				LEFT JOIN RULES T3 ON T1.ACCOUNTSUBHEADRULE = T3.RULECODE AND T3.RULEMODULE = 'SUBHEAD'
				LEFT JOIN SYSTEMINTERNALACCOUNTDEF T8 ON T1.ACCOUNTTYPE = T8.SIACODE
				JOIN BMTAEEVENTS T9 ON T6.EVENTCODE = T9.AEEVENTCODE
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#3007.28_post" author="vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
		    	select deps_restore_dependencies ('plf', 'rmttransactionentry_aview');
		 	]]>
		</sql>
	</changeSet>

	<changeSet id="ST#3007.29_pre" author="vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmttransactionentry_aeview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#3007.29" author="vijaya.a">
		<createView viewName="RMTTRANSACTIONENTRY_AEVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ACCOUNTSETID,
					T1.TRANSORDER,
					T1.TRANSDESC,
					T1.DEBITCREDIT,
					T1.SHADOWPOSTING,
					T1.ACCOUNT,
					T1.ACCOUNTTYPE,
					T1.ACCOUNTSUBHEADRULE,
					T1.TRANSCATIONCODE,
					T1.RVSTRANSACTIONCODE,
					T1.AMOUNTRULE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.ACCOUNTBRANCH,
					T1.FEECODE,
					T2.EVENTCODE LOVDESCEVENTCODENAME,
					T1.CHARGETYPE,
					T1.ENTRYBYINVESTMENT,
					T1.OPENNEWFINAC,
					T1.POSTTOSYS,
					T3.AEEVENTCODEDESC LOVDESCEVENTCODEDESC,
					T1.DERIVEDTRANORDER,
					T2.ACCOUNTSETCODENAME LOVDESCACCSETCODENAME,
					T1.FEEREPEAT,
				   	T1.RECEIVABLEORPAYABLE, 
				   	T1.ASSIGNMENTENTRY, 
			   		T1.BULKING
				FROM RMTTRANSACTIONENTRY T1
				JOIN RMTACCOUNTINGSET T2 ON T1.ACCOUNTSETID = T2.ACCOUNTSETID
				JOIN BMTAEEVENTS T3 ON T2.EVENTCODE = T3.AEEVENTCODE
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#3007.29_post" author="vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
		    	select deps_restore_dependencies ('plf', 'rmttransactionentry_aeview');
		 	]]>
		</sql>
	</changeSet>

	<changeSet id="ST#3007.30_pre" author="vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'feetypes_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#3007.30" author="vijaya.a">
		<createView viewName="FEETYPES_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FEETYPEID,
					T1.FEETYPECODE,
					T1.FEETYPEDESC,
					T1.MANUALADVICE,
					T1.REFUNDABLE,
					T1.ADVISETYPE,
					T1.ACCOUNTSETID,
					T1.HOSTFEETYPECODE,
					T1.TAXAPPLICABLE,
					T1.TAXCOMPONENT,
					T1.ACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.ACCOUNTSETCODE,
					T2.ACCOUNTSETCODENAME,
					T1.AMORTZREQ,
					T1.DUEACCREQ,
					T1.DUEACCSET,
         			T3.ACCOUNTSETCODE DUEACCTSETCODE,
					T3.ACCOUNTSETCODENAME DUEACCTSETCODENAME,
					T1.TDSREQ,
					T1.FEEINCOMEOREXPENSE, 
		    		T1.ACTYPE, 
		    		T4.ACTYPEDESC
				FROM FEETYPES_TEMP T1
				LEFT JOIN RMTACCOUNTINGSET T2 ON T2.ACCOUNTSETID = T1.ACCOUNTSETID
          		LEFT JOIN RMTACCOUNTINGSET T3 ON T3.ACCOUNTSETID = T1.DUEACCSET
          		LEFT JOIN RMTACCOUNTTYPES T4 ON T4.ACTYPE = T1.ACTYPE
				UNION ALL
				SELECT T1.FEETYPEID,
					T1.FEETYPECODE,
					T1.FEETYPEDESC,
					T1.MANUALADVICE,
					T1.REFUNDABLE,
					T1.ADVISETYPE,
					T1.ACCOUNTSETID,
					T1.HOSTFEETYPECODE,
					T1.TAXAPPLICABLE,
					T1.TAXCOMPONENT,
					T1.ACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.ACCOUNTSETCODE,
					T2.ACCOUNTSETCODENAME,
					T1.AMORTZREQ,
					T1.DUEACCREQ,
					T1.DUEACCSET,
          			T3.ACCOUNTSETCODE DUEACCTSETCODE,
					T3.ACCOUNTSETCODENAME DUEACCTSETCODENAME,
					T1.TDSREQ,
					T1.FEEINCOMEOREXPENSE, 
		    		T1.ACTYPE, 
		    		T4.ACTYPEDESC
				FROM FEETYPES T1
				LEFT JOIN RMTACCOUNTINGSET T2 ON T2.ACCOUNTSETID = T1.ACCOUNTSETID
          		LEFT JOIN RMTACCOUNTINGSET T3 ON T3.ACCOUNTSETID = T1.DUEACCSET
          		LEFT JOIN RMTACCOUNTTYPES T4 ON T4.ACTYPE = T1.ACTYPE
				WHERE NOT (EXISTS (SELECT 1 FROM FEETYPES_TEMP WHERE FEETYPES_TEMP.FEETYPEID = T1.FEETYPEID))
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#3007.30_post" author="vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
		    	select deps_restore_dependencies ('plf', 'feetypes_view');
		 	]]>
		</sql>
	</changeSet>

	<changeSet id="ST#3007.31_pre" author="vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'feetypes_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#3007.31" author="vijaya.a">
		<createView viewName="FEETYPES_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FEETYPEID,
					T1.FEETYPECODE,
					T1.FEETYPEDESC,
					T1.MANUALADVICE,
					T1.REFUNDABLE,
					T1.ADVISETYPE,
					T1.ACCOUNTSETID,
					T1.HOSTFEETYPECODE,
					T1.TAXAPPLICABLE,
					T1.TAXCOMPONENT,
					T1.ACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.ACCOUNTSETCODE,
					T2.ACCOUNTSETCODENAME,
					T1.AMORTZREQ,
					T1.DUEACCREQ,
					T1.DUEACCSET,
         			T3.ACCOUNTSETCODE DUEACCTSETCODE,
					T3.ACCOUNTSETCODENAME DUEACCTSETCODENAME,
					T1.TDSREQ,
					T1.FEEINCOMEOREXPENSE, 
		    		T1.ACTYPE, 
		    		T4.ACTYPEDESC
				FROM FEETYPES T1
				LEFT JOIN RMTACCOUNTINGSET T2 ON T2.ACCOUNTSETID = T1.ACCOUNTSETID
          		LEFT JOIN RMTACCOUNTINGSET T3 ON T3.ACCOUNTSETID = T1.DUEACCSET
          		LEFT JOIN RMTACCOUNTTYPES T4 ON T4.ACTYPE = T1.ACTYPE
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#3007.31_post" author="vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
		    	select deps_restore_dependencies ('plf', 'feetypes_aview');
		 	]]>
		</sql>
	</changeSet>

	<changeSet id="ST#3007.32_pre" author="vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'feetypes_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#3007.32" author="vijaya.a">
		<createView viewName="FEETYPES_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FEETYPEID,
					T1.FEETYPECODE,
					T1.FEETYPEDESC,
					T1.MANUALADVICE,
					T1.REFUNDABLE,
					T1.ADVISETYPE,
					T1.ACCOUNTSETID,
					T1.HOSTFEETYPECODE,
					T1.TAXAPPLICABLE,
					T1.TAXCOMPONENT,
					T1.ACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.ACCOUNTSETCODE,
					T2.ACCOUNTSETCODENAME,
					T1.AMORTZREQ,
					T1.DUEACCREQ,
					T1.DUEACCSET,
           			T3.ACCOUNTSETCODE DUEACCTSETCODE,
					T3.ACCOUNTSETCODENAME DUEACCTSETCODENAME,
					T1.TDSREQ,
					T1.FEEINCOMEOREXPENSE, 
		    		T1.ACTYPE, 
		    		T4.ACTYPEDESC
				FROM FEETYPES_TEMP T1
				LEFT JOIN RMTACCOUNTINGSET T2 ON T2.ACCOUNTSETID = T1.ACCOUNTSETID
           		LEFT JOIN RMTACCOUNTINGSET T3 ON T3.ACCOUNTSETID = T1.DUEACCSET
           		LEFT JOIN RMTACCOUNTTYPES T4 ON T4.ACTYPE = T1.ACTYPE
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#3007.32_post" author="vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
		    	select deps_restore_dependencies ('plf', 'feetypes_tview');
		 	]]>
		</sql>
	</changeSet>

	<changeSet id="ST#3007.33_pre" author="vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'fintypefees_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#3007.33" author="vijaya.a">
		<createView viewName="FINTYPEFEES_VIEW" replaceIfExists="true">
			<![CDATA[
					SELECT T1.FINTYPE,
					T1.ORIGINATIONFEE,
					T1.FINEVENT,
					T1.FEETYPEID,
					T1.FEEORDER,
					T1.FEESCHEDULEMETHOD,
					T1.CALCULATIONTYPE,
					T1.RULECODE,
					T1.AMOUNT,
					T1.PERCENTAGE,
					T1.CALCULATEON,
					T1.ALWDEVIATION,
					T1.MAXWAIVERPERC,
					T1.ALWMODIFYFEE,
					T1.ALWMODIFYFEESCHDMTHD,
					T1.ACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.MODULEID,
					T1.ALWPREINCOMIZATION,
					T2.FEETYPECODE,
					T2.FEETYPEDESC,
					T2.TAXAPPLICABLE,
					T2.TAXCOMPONENT,
					T3.RULECODEDESC AS RULEDESC,
					T1.REFERENCEID,
					T1.PERCTYPE,
					T1.PERCRULE,
					T1.FINTYPEFEEID,
					T2.TDSREQ,
					T1.INCLFORASSIGNMENT
				FROM FINTYPEFEES_TEMP T1
				JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
				LEFT JOIN RULES T3 ON T1.RULECODE = T3.RULECODE AND T3.RULEMODULE = 'FEES' AND T1.FINEVENT = T3.RULEEVENT
				UNION ALL
				SELECT T1.FINTYPE,
					T1.ORIGINATIONFEE,
					T1.FINEVENT,
					T1.FEETYPEID,
					T1.FEEORDER,
					T1.FEESCHEDULEMETHOD,
					T1.CALCULATIONTYPE,
					T1.RULECODE,
					T1.AMOUNT,
					T1.PERCENTAGE,
					T1.CALCULATEON,
					T1.ALWDEVIATION,
					T1.MAXWAIVERPERC,
					T1.ALWMODIFYFEE,
					T1.ALWMODIFYFEESCHDMTHD,
					T1.ACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.MODULEID,
					T1.ALWPREINCOMIZATION,
					T2.FEETYPECODE,
					T2.FEETYPEDESC,
					T2.TAXAPPLICABLE,
					T2.TAXCOMPONENT,
					T3.RULECODEDESC AS RULEDESC,
					T1.REFERENCEID,
					T1.PERCTYPE,
					T1.PERCRULE, 
					T1.FINTYPEFEEID,
					T2.TDSREQ,
					T1.INCLFORASSIGNMENT
				FROM FINTYPEFEES T1
				JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
				LEFT JOIN RULES T3 ON T1.RULECODE = T3.RULECODE AND T3.RULEMODULE = 'FEES' AND T1.FINEVENT = T3.RULEEVENT
				WHERE NOT EXISTS (SELECT 1 FROM FINTYPEFEES_TEMP F WHERE F.FINTYPE = T1.FINTYPE 
					AND F.FINEVENT = T1.FINEVENT AND F.FEETYPEID = T1.FEETYPEID AND F.ORIGINATIONFEE = T1.ORIGINATIONFEE)
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#3007.33_post" author="vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
		    	select deps_restore_dependencies ('plf', 'fintypefees_view');
		 	]]>
		</sql>
	</changeSet>

	<changeSet id="ST#3007.34_pre" author="vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'fintypefees_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#3007.34" author="vijaya.a">
		<createView viewName="FINTYPEFEES_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINTYPE,
					T1.ORIGINATIONFEE,
					T1.FINEVENT,
					T1.FEETYPEID,
					T1.FEEORDER,
					T1.FEESCHEDULEMETHOD,
					T1.CALCULATIONTYPE,
					T1.RULECODE,
					T1.AMOUNT,
					T1.PERCENTAGE,
					T1.CALCULATEON,
					T1.ALWDEVIATION,
					T1.MAXWAIVERPERC,
					T1.ALWMODIFYFEE,
					T1.ALWMODIFYFEESCHDMTHD,
					T1.ACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.MODULEID,
					T1.ALWPREINCOMIZATION,
					T2.FEETYPECODE,
					T2.FEETYPEDESC,
					T2.TAXAPPLICABLE,
					T2.TAXCOMPONENT,
					T3.RULECODEDESC AS RULEDESC,
					T1.REFERENCEID,
					T1.PERCTYPE,
					T1.PERCRULE, 
					T1.FINTYPEFEEID,
					T2.TDSREQ,
					T1.INCLFORASSIGNMENT
				FROM FINTYPEFEES T1
				JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
				LEFT JOIN RULES T3 ON T1.RULECODE = T3.RULECODE AND T3.RULEMODULE = 'FEES' AND T1.FINEVENT = 	T3.RULEEVENT
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#3007.34_post" author="vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
		    	select deps_restore_dependencies ('plf', 'fintypefees_aview');
		 	]]>
		</sql>
	</changeSet>

	<changeSet id="ST#3007.35" author="vijaya.a">
		<sql>
		 	<![CDATA[
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((Select max(RightID) + 1 from SecRights), 3, 'TransactionEntryDialog_FeeRepeat', 'TransactionEntryDialog', 1, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((Select max(RightID) + 1 from SecRights), 3, 'TransactionEntryDialog_RecOrPay', 'TransactionEntryDialog', 1, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((Select max(RightID) + 1 from SecRights), 3, 'TransactionEntryDialog_AssignEntry', 'TransactionEntryDialog', 1, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((Select max(RightID) + 1 from SecRights), 3, 'TransactionEntryDialog_Bulking', 'TransactionEntryDialog', 1, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((Select max(RightID) + 1 from SecRights), 3, 'FeeTypeDialog_FeeIncomeOrExpense', 'FeeTypeDialog', 1, 1000, current_Timestamp, null, null, null, null, null, null, 0);
				
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'TRANSACTIONENTRY_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'TransactionEntryDialog_FeeRepeat'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'TRANSACTIONENTRY_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'TransactionEntryDialog_RecOrPay'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'TRANSACTIONENTRY_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'TransactionEntryDialog_AssignEntry'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'TRANSACTIONENTRY_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'TransactionEntryDialog_Bulking'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);     
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FEETYPE_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'FeeTypeDialog_FeeIncomeOrExpense'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((Select max(RightID) + 1 from SecRights), 3, 'FeeTypeDialog_FeeIncome', 'FeeTypeDialog', 1, 1000, current_Timestamp, null, null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((Select max(RightID) + 1 from SecRights), 3, 'FeeTypeDialog_FeeWaiver', 'FeeTypeDialog', 1, 1000, current_Timestamp, null, null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((Select max(RightID) + 1 from SecRights), 3, 'FeeTypeDialog_FeeRefund', 'FeeTypeDialog', 1, 1000, current_Timestamp, null, null, null, null, null, null, 0);
				
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FEETYPE_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'FeeTypeDialog_FeeIncome'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FEETYPE_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'FeeTypeDialog_FeeWaiver'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FEETYPE_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'FeeTypeDialog_FeeRefund'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID) + 1 FROM SECRIGHTS), 3, 'FinTypeFeesDialog_InclForAssignment', 'FinTypeFeesDialog', 0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FINANCETYPE_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'FinTypeFeesDialog_InclForAssignment'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#3007.37" author="saikrishna.b">
		<renameColumn newColumnName="IncomeOrExpenseAcType" oldColumnName="FeeIncomeORExpense" tableName="FEETYPES" />
	</changeSet>
	
	<changeSet id="ST#3007.38" author="saikrishna.b">
		<renameColumn newColumnName="IncomeOrExpenseAcType" oldColumnName="FeeIncomeORExpense" tableName="FEETYPES_TEMP" />
	</changeSet>
	
	<changeSet id="ST#3007.39" author="saikrishna.b">
		<addColumn tableName="FEETYPES_TEMP">
			<column name="WaiverOrRefundAcType" type="varchar(50)" />
		</addColumn>
	</changeSet>


	<changeSet id="ST#3007.40" author="saikrishna.b">
		<addColumn tableName="FEETYPES">
			<column name="WaiverOrRefundAcType" type="varchar(50)" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#3007.44" author="saikrishna.b">
		<sql>
		 	<![CDATA[
		 		DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'FeeTypeDialog_FeeIncomeOrExpense');
		 		DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'FeeTypeDialog_IncomeOrExpenseAcType');
		 		DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'FeeTypeDialog_WaiverOrRefundAcType');
		 		
		 		DELETE FROM SECRIGHTS WHERE RIGHTNAME ='FeeTypeDialog_FeeIncomeOrExpense';
		 		DELETE FROM SECRIGHTS WHERE RIGHTNAME ='FeeTypeDialog_IncomeOrExpenseAcType';
		 		DELETE FROM SECRIGHTS WHERE RIGHTNAME ='FeeTypeDialog_WaiverOrRefundAcType';
		 		
		 		INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((Select max(RightID) + 1 from SecRights), 3, 'FeeTypeDialog_IncomeOrExpenseAcType',  'FeeTypeDialog', 1, 1000, current_Timestamp, null, null, null, null, null, null, 0);
		 		INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((Select max(RightID) + 1 from SecRights), 3, 'FeeTypeDialog_WaiverOrRefundAcType',   'FeeTypeDialog', 1, 1000, current_Timestamp, null, null, null, null, null, null, 0);
		 		
		 		INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FEETYPE_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'FeeTypeDialog_IncomeOrExpenseAcType'),  1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
		 		INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FEETYPE_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'FeeTypeDialog_WaiverOrRefundAcType'),   1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
		 	]]>
		</sql>
	</changeSet>

</databaseChangeLog>