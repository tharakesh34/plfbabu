<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">
	<property name="add.schema" value="dbo." dbms="mssql" />
	<property name="add.schema" value=" " dbms="oracle" />
	<property name="add.schema" value=" " dbms="postgresql" />
	<property name="call.substr" value="substring" dbms="mssql" />
	<property name="call.substr" value="substr" dbms="oracle" />
	<property name="call.substr" value="substring" dbms="postgresql" />
	<property name="call.auditdb" value="PFFBFSQCAudit.." dbms="mssql" />
	<property name="call.auditdb" value=" " dbms="oracle" />
	<property name="call.concatenate" value="+" dbms="mssql" />
	<property name="call.concatenate" value="||" dbms="oracle" />
	<property name="call.concatenate" value="||" dbms="postgresql" />
	<property name="call.collength" value="LEN" dbms="mssql" />
	<property name="call.collength" value="LENGTH" dbms="oracle" />
	<property name="call.collength" value="LENGTH" dbms="postgresql" />
	<property name="call.date" value="getdate()" dbms="mssql" />
	<property name="call.date" value="sysdate" dbms="oracle" />
	<property name="call.date" value="now()::timestamp" dbms="postgresql" />

	<changeSet id="pre_run_for_pgp" author="Gopal.p" runAlways="true" dbms="postgresql">
		<sql>
			Set search_path = plf,public,pg_catalog;
		</sql>
	</changeSet>

	<changeSet id="1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'customersdedup_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="1" author="Gopal.p">
		<comment>No new changes</comment>
		<createView viewName="CUSTOMERSDEDUP_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.CUSTID,
			    T1.CUSTCIF,
			    T1.CUSTFNAME,
			    T1.CUSTLNAME,
			    T1.CUSTCRCPR,
			    T1.CUSTSHRTNAME,
			    T1.CUSTDOB,
			    T1.CUSTNATIONALITY,
			    COALESCE(CASE WHEN T1.PHONENUMBER = '' THEN NULL
		            ELSE T1.PHONENUMBER END, T7.PHONENUMBER) MOBILENUMBER,
	            T1.CUSTMOTHERMAIDEN FATHERNAME,
	            T1.CUSTSHRTNAMELCLLNG MOTHERNAME,
			    T1.CUSTCTGCODE,
			    T1.CUSTDFTBRANCH,
			    T1.CUSTTYPECODE,
			    T1.CUSTSECTOR,
			    T1.CUSTSUBSECTOR,
			    T1.SUBCATEGORY,
			    T1.CASTEID,
			    T1.RELIGIONID,
			    T3.CASTECODE,
			    T3.CASTEDESC,
			    T4.RELIGIONCODE,
			    T4.RELIGIONDESC,
			    T2.CUSTTYPECTG LOVDESCCUSTCTGTYPE,
			    CDA.CUSTDOCTITLE AADHARNUMBER,
			    CDP.CUSTDOCTITLE PANNUMBER,
	            CDVI.CUSTDOCTITLE VOTERID,
	            CDRC.CUSTDOCTITLE RATIONCARD,
	            CDLPG.CUSTDOCTITLE LPGNUMBER,
	            CDPP.CUSTDOCTITLE CUSTPASSPORTNO,
	            CDDL.CUSTDOCTITLE DRIVINGLICENCENO,
			    T6.CUSTEMAIL
		   	FROM CUSTOMERS_TEMP T1
		    LEFT JOIN RMTCUSTTYPES T2 ON T1.CUSTTYPECODE = T2.CUSTTYPECODE
		    LEFT JOIN CASTE T3 ON T1.CASTEID = T3.CASTEID
		    LEFT JOIN RELIGION T4 ON T1.RELIGIONID = T4.RELIGIONID
		    LEFT JOIN CUSTOMERDOCUMENTS CDA ON CDA.CUSTID = T1.CUSTID AND CDA.CUSTDOCCATEGORY in ((( SELECT MASTER_DEF.KEY_CODE
		          FROM MASTER_DEF
		         WHERE MASTER_DEF.MASTER_TYPE = 'DOC_TYPE' AND MASTER_DEF.KEY_TYPE = 'AADHAAR')))
		    LEFT JOIN CUSTOMERDOCUMENTS CDP ON CDP.CUSTID = T1.CUSTID AND CDP.CUSTDOCCATEGORY in ((( SELECT MASTER_DEF.KEY_CODE
		          FROM MASTER_DEF
		         WHERE MASTER_DEF.MASTER_TYPE = 'DOC_TYPE' AND MASTER_DEF.KEY_TYPE = 'PAN')))
		    LEFT JOIN CUSTOMERDOCUMENTS CDPP ON CDPP.CUSTID = T1.CUSTID AND CDPP.CUSTDOCCATEGORY in ((( SELECT MASTER_DEF.KEY_CODE
		          FROM MASTER_DEF
		         WHERE MASTER_DEF.MASTER_TYPE = 'DOC_TYPE' AND MASTER_DEF.KEY_TYPE = 'PASSPORT')))
                    LEFT JOIN CUSTOMERDOCUMENTS CDVI ON CDVI.CUSTID = T1.CUSTID AND CDVI.CUSTDOCCATEGORY in ((( SELECT MASTER_DEF.KEY_CODE
		          FROM MASTER_DEF
		         WHERE MASTER_DEF.MASTER_TYPE = 'DOC_TYPE' AND MASTER_DEF.KEY_TYPE = 'VOTER_ID')))
                    LEFT JOIN CUSTOMERDOCUMENTS CDRC ON CDRC.CUSTID = T1.CUSTID AND CDRC.CUSTDOCCATEGORY in ((( SELECT MASTER_DEF.KEY_CODE

		          FROM MASTER_DEF
		         WHERE MASTER_DEF.MASTER_TYPE = 'DOC_TYPE' AND MASTER_DEF.KEY_TYPE = 'RATION_CARD')))
                    LEFT JOIN CUSTOMERDOCUMENTS CDLPG ON CDLPG.CUSTID = T1.CUSTID AND CDLPG.CUSTDOCCATEGORY in ((( SELECT MASTER_DEF.KEY_CODE
		          FROM MASTER_DEF
		         WHERE MASTER_DEF.MASTER_TYPE = 'DOC_TYPE' AND MASTER_DEF.KEY_TYPE = 'LPG_NUMBER')))
                    LEFT JOIN CUSTOMERDOCUMENTS CDDL ON CDDL.CUSTID = T1.CUSTID AND CDDL.CUSTDOCCATEGORY in ((( SELECT MASTER_DEF.KEY_CODE
		          FROM MASTER_DEF
		         WHERE MASTER_DEF.MASTER_TYPE = 'DOC_TYPE' AND MASTER_DEF.KEY_TYPE = 'DRIVING_LICENCE')))
		    LEFT JOIN CUSTOMEREMAILS T6 ON T1.CUSTID = T6.CUSTID AND T6.CUSTEMAILPRIORITY = 5
		    LEFT JOIN CUSTOMERPHONENUMBERS T7 ON T1.CUSTID = T7.PHONECUSTID AND T7.PHONETYPEPRIORITY = 5
			UNION ALL
		 	SELECT T1.CUSTID,
			    T1.CUSTCIF,
			    T1.CUSTFNAME,
			    T1.CUSTLNAME,
			    T1.CUSTCRCPR,
			    T1.CUSTSHRTNAME,
			    T1.CUSTDOB,
			    T1.CUSTNATIONALITY,
			    COALESCE(CASE WHEN T1.PHONENUMBER = '' THEN NULL
			       ELSE T1.PHONENUMBER END, T7.PHONENUMBER) MOBILENUMBER,
	            T1.CUSTMOTHERMAIDEN FATHERNAME,
	            T1.CUSTSHRTNAMELCLLNG MOTHERNAME,
			    T1.CUSTCTGCODE,
			    T1.CUSTDFTBRANCH,
			    T1.CUSTTYPECODE,
			    T1.CUSTSECTOR,
			    T1.CUSTSUBSECTOR,
			    T1.SUBCATEGORY,
			    T1.CASTEID,
			    T1.RELIGIONID,
			    T3.CASTECODE,
			    T3.CASTEDESC,
			    T4.RELIGIONCODE,
			    T4.RELIGIONDESC,
			    T2.CUSTTYPECTG LOVDESCCUSTCTGTYPE,
			    CDA.CUSTDOCTITLE AADHARNUMBER,
			    CDP.CUSTDOCTITLE PANNUMBER,
	            CDVI.CUSTDOCTITLE VOTERID,
	            CDRC.CUSTDOCTITLE RATIONCARD,
	            CDLPG.CUSTDOCTITLE LPGNUMBER,
	            CDPP.CUSTDOCTITLE CUSTPASSPORTNO,
	            CDDL.CUSTDOCTITLE DRIVINGLICENCENO,
			    T6.CUSTEMAIL
		   FROM CUSTOMERS T1
		   LEFT JOIN RMTCUSTTYPES T2 ON T1.CUSTTYPECODE = T2.CUSTTYPECODE
		   LEFT JOIN CASTE T3 ON T1.CASTEID = T3.CASTEID
		   LEFT JOIN RELIGION T4 ON T1.RELIGIONID = T4.RELIGIONID
		   LEFT JOIN CUSTOMERDOCUMENTS CDA ON CDA.CUSTID = T1.CUSTID AND CDA.CUSTDOCCATEGORY in ((( SELECT MASTER_DEF.KEY_CODE
		         FROM MASTER_DEF
		        WHERE MASTER_DEF.MASTER_TYPE = 'DOC_TYPE' AND MASTER_DEF.KEY_TYPE = 'AADHAAR')))
		   LEFT JOIN CUSTOMERDOCUMENTS CDP ON CDP.CUSTID = T1.CUSTID AND CDP.CUSTDOCCATEGORY in ((( SELECT MASTER_DEF.KEY_CODE
		         FROM MASTER_DEF
		        WHERE MASTER_DEF.MASTER_TYPE = 'DOC_TYPE' AND MASTER_DEF.KEY_TYPE = 'PAN')))
		   LEFT JOIN CUSTOMERDOCUMENTS CDPP ON CDPP.CUSTID = T1.CUSTID AND CDPP.CUSTDOCCATEGORY in ((( SELECT MASTER_DEF.KEY_CODE
		         FROM MASTER_DEF
		        WHERE MASTER_DEF.MASTER_TYPE = 'DOC_TYPE' AND MASTER_DEF.KEY_TYPE = 'PASSPORT')))
           LEFT JOIN CUSTOMERDOCUMENTS CDVI ON CDVI.CUSTID = T1.CUSTID AND CDVI.CUSTDOCCATEGORY in ((( SELECT MASTER_DEF.KEY_CODE
		         FROM MASTER_DEF
		        WHERE MASTER_DEF.MASTER_TYPE = 'DOC_TYPE' AND MASTER_DEF.KEY_TYPE = 'VOTER_ID')))
           LEFT JOIN CUSTOMERDOCUMENTS CDRC ON CDRC.CUSTID = T1.CUSTID AND CDRC.CUSTDOCCATEGORY in ((( SELECT MASTER_DEF.KEY_CODE
		         FROM MASTER_DEF
		        WHERE MASTER_DEF.MASTER_TYPE = 'DOC_TYPE' AND MASTER_DEF.KEY_TYPE = 'RATION_CARD')))
           LEFT JOIN CUSTOMERDOCUMENTS CDLPG ON CDLPG.CUSTID = T1.CUSTID AND CDLPG.CUSTDOCCATEGORY in ((( SELECT MASTER_DEF.KEY_CODE
		         FROM MASTER_DEF
		        WHERE MASTER_DEF.MASTER_TYPE = 'DOC_TYPE' AND MASTER_DEF.KEY_TYPE = 'LPG_NUMBER')))
           LEFT JOIN CUSTOMERDOCUMENTS CDDL ON CDDL.CUSTID = T1.CUSTID AND CDDL.CUSTDOCCATEGORY in ((( SELECT MASTER_DEF.KEY_CODE
		         FROM MASTER_DEF
		        WHERE MASTER_DEF.MASTER_TYPE = 'DOC_TYPE' AND MASTER_DEF.KEY_TYPE = 'DRIVING_LICENCE')))
		   LEFT JOIN CUSTOMEREMAILS T6 ON T1.CUSTID = T6.CUSTID AND T6.CUSTEMAILPRIORITY = 5
		   LEFT JOIN CUSTOMERPHONENUMBERS T7 ON T1.CUSTID = T7.PHONECUSTID AND T7.PHONETYPEPRIORITY = 5
		   WHERE NOT (EXISTS ( SELECT 1 FROM CUSTOMERS_TEMP
				WHERE CUSTOMERS_TEMP.CUSTID = T1.CUSTID))
			]]>
		</createView>
	</changeSet>

	<changeSet id="1_post" author="gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'customersdedup_view');
			]]>
		</sql>
	</changeSet>


	<changeSet id="2_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'receipt_realization_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="2" author="Gopal.p">
		<createView viewName="RECEIPT_REALIZATION_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T4.CUSTCIF,
					T3.FINID,
					T1.REFERENCE,
					T3.FINTYPE,
					T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTAMOUNT,
					T1.DEPOSITDATE,
					T1.BANKCODE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.BOUNCEDATE CANCELDATE,
					T1.VALUEDATE,
					T2.PAYAGAINSTID,
					T1.BOUNCEDATE,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					T3.CLOSINGSTATUS,
					T3.FINBRANCH,
					T3.FINCURRASSETVALUE,
					T3.PRODUCTCATEGORY,
					T6.PARTNERBANKCODE,
					T1.TRANSACTIONREF,
					T1.PARTNERBANKID FUNDINGAC,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T5.ROLEDESC LOVDESCREQUESTSTAGE,
					T1.RECEIPTMODE PAYMENTTYPE,
					T1.RECEIPTMODESTATUS,
					T1.ACTFINRECEIPT,
					T1.RECEIVEDDATE
				FROM FINRECEIPTHEADER_TEMP T1
				LEFT JOIN FINRECEIPTDETAIL_TEMP T2 ON T1.RECEIPTID = T2.RECEIPTID
				LEFT JOIN FINANCEMAIN T3 ON T1.FINID = T3.FINID
				LEFT JOIN CUSTOMERS T4 ON T3.CUSTID = T4.CUSTID
				LEFT JOIN SECROLES T5 ON T1.NEXTROLECODE = T5.ROLECD
				LEFT JOIN PARTNERBANKS T6 ON T6.PARTNERBANKID = T2.FUNDINGAC
				UNION ALL
				SELECT T4.CUSTCIF,
					T3.FINID,
					T1.REFERENCE,
					T3.FINTYPE,
					T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTAMOUNT,
					T1.DEPOSITDATE,
					T1.BANKCODE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.BOUNCEDATE CANCELDATE,
					T1.VALUEDATE,
					T2.PAYAGAINSTID,
					T1.BOUNCEDATE,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					T3.CLOSINGSTATUS,
					T3.FINBRANCH,
					T3.FINCURRASSETVALUE,
					T3.PRODUCTCATEGORY,
					T6.PARTNERBANKCODE,
					T1.TRANSACTIONREF,
					T1.PARTNERBANKID FUNDINGAC,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T5.ROLEDESC LOVDESCREQUESTSTAGE,
					T1.RECEIPTMODE PAYMENTTYPE,
					T1.RECEIPTMODESTATUS,
					T1.ACTFINRECEIPT,
					T1.RECEIVEDDATE
				FROM FINRECEIPTHEADER T1
				LEFT JOIN FINRECEIPTDETAIL T2 ON T1.RECEIPTID = T2.RECEIPTID
				LEFT JOIN FINANCEMAIN T3 ON T1.FINID = T3.FINID
				LEFT JOIN CUSTOMERS T4 ON T3.CUSTID = T4.CUSTID
				LEFT JOIN SECROLES T5 ON T1.NEXTROLECODE = T5.ROLECD
				LEFT JOIN PARTNERBANKS T6 ON T6.PARTNERBANKID = T2.FUNDINGAC
				WHERE NOT (EXISTS (SELECT 1 FROM FINRECEIPTHEADER_TEMP
					WHERE FINRECEIPTHEADER_TEMP.RECEIPTID = T1.RECEIPTID))
			]]>
		</createView>
	</changeSet>

	<changeSet id="2_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'receipt_realization_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="3_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'lmtfinanceworkflowdef_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="3" author="Gopal.p">
		<createView viewName="LMTFINANCEWORKFLOWDEF_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINTYPE,
					T1.FINTYPE TYPECODE,
					T2.FINTYPEDESC LOVDESCFINTYPENAME,
					T6.COLLATERALDESC,
					T7.PRODUCTDESC VASPRODUCTDESC,
					T8.DESCRIPTION COMMITMENTTYPEDESC,
					T1.FINTYPE LOVDESCPROMOTIONCODE,
					T2.FINTYPEDESC LOVDESCPROMOTIONNAME,
					T4.FACILITYDESC LOVDESCFACILITYTYPENAME,
					T1.SCREENCODE,
					T1.WORKFLOWTYPE,
					T3.WORKFLOWDESC LOVDESCWORKFLOWTYPENAME,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T3.WORKFLOWROLES LOVDESCWORKFLOWROLESNAME,
					T2.FINCATEGORY LOVDESCPRODUCTCODENAME,
					T2.FINDIVISION LOVDESCFINDIVISIONNAME,
					T3.FIRSTTASKOWNER LOVDESCFIRSTTASKOWNER,
					T1.MODULENAME,
					COALESCE(t2.FINISACTIVE, T6.ACTIVE, T7.ACTIVE, T8.ACTIVE) FINISACTIVE,
					COALESCE(t2.PRODUCT, '') LOVDESCPRODUCTNAME,
					T2.LOVDESCPROMOFINTYPEDESC,
					T2.FINASSETTYPE,
					T2.STARTDATE,
					T2.ENDDATE,
					T1.FINEVENT,
					T5.PRODUCTCATEGORY,
					COALESCE(t9.REFERENCEID, 0) REFERENCEID
				FROM LMTFINANCEWORKFLOWDEF T1
				LEFT JOIN RMTFINANCETYPES_AVIEW T2 ON T1.FINTYPE = T2.FINTYPE
				INNER JOIN WORKFLOWDETAILS T3 ON T1.WORKFLOWTYPE = T3.WORKFLOWTYPE AND T3.WORKFLOWACTIVE = 1
				LEFT JOIN CAFFACILITYTYPES T4 ON T1.FINTYPE = T4.FACILITYTYPE
				LEFT JOIN BMTPRODUCT T5 ON T2.FINCATEGORY = T5.PRODUCTCODE
				LEFT JOIN COLLATERALSTRUCTURE T6 ON T1.FINTYPE = T6.COLLATERALTYPE
				LEFT JOIN VASSTRUCTURE T7 ON T1.FINTYPE = T7.PRODUCTCODE
				LEFT JOIN COMMITMENTTYPE T8 ON T1.FINTYPE = T8.TYPECODE
				LEFT JOIN PROMOTIONS T9 ON T9.PROMOTIONCODE = T1.FINTYPE
			]]>
		</createView>
	</changeSet>

	<changeSet id="3_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'lmtfinanceworkflowdef_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="4_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'loan_provisions_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="4" author="Gopal.p">
		<createView viewName="LOAN_PROVISIONS_VIEW" replaceIfExists="true">
		   <![CDATA[
		   		SELECT LP.ID
					, LP.FINID
					, LP.FINREFERENCE
					, LP.PROVISIONDATE
					, LP.MANUALPROVISION
					, LP.REGPROVSNPER
					, LP.REGPROVSNAMT
					, LP.REGSECPROVSNPER
					, LP.REGSECPROVSNAMT
					, LP.REGUNSECPROVSNPER
					, LP.REGUNSECPROVSNAMT
					, LP.TOTREGPROVSNAMT
					, LP.INTPROVSNPER
					, LP.INTPROVSNAMT
					, LP.INTSECPROVSNPER
					, LP.INTSECPROVSNAMT
					, LP.INTUNSECPROVSNPER
					, LP.INTUNSECPROVSNAMT
					, LP.TOTINTPROVSNAMT
					, LP.MANPROVSNPER
					, LP.MANPROVSNAMT
					, LP.PASTDUEDAYS
					, LP.NPAPASTDUEDAYS
					, LP.EFFNPAPASTDUEDAYS
					, LP.NPAAGING
					, LP.EFFNPAAGING
					, LP.NPACLASSID
					, LP.EFFNPACLASSID
					, LP.OSPRINCIPAL
					, LP.OSPROFIT
					, LP.PROFITACCRUEDANDDUE
					, LP.PROFITACCRUEDANDNOTDUE
					, LP.COLLATERALAMT
					, LP.INSURANCEAMT
					, LP.LINKEDTRANID
					, LP.CHGLINKEDTRANID
					, LP.VERSION
					, LP.CREATEDBY
					, LP.CREATEDON
					, LP.APPROVEDBY
					, LP.APPROVEDON
					, LP.LASTMNTBY
					, LP.LASTMNTON
					, LP.RECORDSTATUS
					, LP.ROLECODE
					, LP.NEXTROLECODE
					, LP.TASKID
					, LP.NEXTTASKID
					, LP.RECORDTYPE
					, LP.WORKFLOWID
					, FM.FINTYPE
					, FM.FINISACTIVE
					, C.CUSTCIF
					, C.CUSTSHRTNAME
					, ACC.CODE LOANCLASSIFICATION
					, EACC.CODE EFFECTIVECLASSIFICATION
					, LP.MANUALCLASSIFICATION
				FROM LOAN_PROVISIONS_TEMP LP
				INNER JOIN FINANCEMAIN FM ON FM.FINID = LP.FINID
				INNER JOIN CUSTOMERS C ON C.CUSTID = FM.CUSTID
				INNER JOIN ASSET_CLASS_SETUP_DETAILS ACSD ON ACSD.ID = LP.NPACLASSID
                INNER JOIN ASSET_CLASS_CODES ACC ON ACC.ID = ACSD.CLASSID
                LEFT JOIN ASSET_CLASS_SETUP_DETAILS EACSD ON EACSD.ID = LP.EFFNPACLASSID
                LEFT JOIN ASSET_CLASS_CODES EACC ON EACC.ID = EACSD.CLASSID
				UNION ALL
				SELECT LP.ID
					, LP.FINID
					, LP.FINREFERENCE
					, LP.PROVISIONDATE
					, LP.MANUALPROVISION
					, LP.REGPROVSNPER
					, LP.REGPROVSNAMT
					, LP.REGSECPROVSNPER
					, LP.REGSECPROVSNAMT
					, LP.REGUNSECPROVSNPER
					, LP.REGUNSECPROVSNAMT
					, LP.TOTREGPROVSNAMT
					, LP.INTPROVSNPER
					, LP.INTPROVSNAMT
					, LP.INTSECPROVSNPER
					, LP.INTSECPROVSNAMT
					, LP.INTUNSECPROVSNPER
					, LP.INTUNSECPROVSNAMT
					, LP.TOTINTPROVSNAMT
					, LP.MANPROVSNPER
					, LP.MANPROVSNAMT
					, LP.PASTDUEDAYS
					, LP.NPAPASTDUEDAYS
					, LP.EFFNPAPASTDUEDAYS
					, LP.NPAAGING
					, LP.EFFNPAAGING
					, LP.NPACLASSID
					, LP.EFFNPACLASSID
					, LP.OSPRINCIPAL
					, LP.OSPROFIT
					, LP.PROFITACCRUEDANDDUE
					, LP.PROFITACCRUEDANDNOTDUE
					, LP.COLLATERALAMT
					, LP.INSURANCEAMT
					, LP.LINKEDTRANID
					, LP.CHGLINKEDTRANID
					, LP.VERSION
					, LP.CREATEDBY
					, LP.CREATEDON
					, LP.APPROVEDBY
					, LP.APPROVEDON
					, LP.LASTMNTBY
					, LP.LASTMNTON
					, LP.RECORDSTATUS
					, LP.ROLECODE
					, LP.NEXTROLECODE
					, LP.TASKID
					, LP.NEXTTASKID
					, LP.RECORDTYPE
					, LP.WORKFLOWID
					, FM.FINTYPE
					, FM.FINISACTIVE
					, C.CUSTCIF
					, C.CUSTSHRTNAME
					, ACC.CODE LOANCLASSIFICATION
					, EACC.CODE EFFECTIVECLASSIFICATION
					, LP.MANUALCLASSIFICATION
				FROM LOAN_PROVISIONS LP
				INNER JOIN FINANCEMAIN FM ON FM.FINID = LP.FINID
				INNER JOIN CUSTOMERS C ON C.CUSTID = FM.CUSTID
				INNER JOIN ASSET_CLASS_SETUP_DETAILS ACSD ON ACSD.ID = LP.NPACLASSID
                INNER JOIN ASSET_CLASS_CODES ACC ON ACC.ID = ACSD.CLASSID
                LEFT JOIN ASSET_CLASS_SETUP_DETAILS EACSD ON EACSD.ID = LP.EFFNPACLASSID
                LEFT JOIN ASSET_CLASS_CODES EACC ON EACC.ID = EACSD.CLASSID
				WHERE NOT EXISTS (SELECT 1 FROM LOAN_PROVISIONS_TEMP WHERE LOAN_PROVISIONS_TEMP.ID = LP.ID)
		   ]]>
		</createView>
	</changeSet>

	<changeSet id="4_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'loan_provisions_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="5_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'loan_provisions_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="5" author="Gopal.p">
		<createView viewName="LOAN_PROVISIONS_AVIEW" replaceIfExists="true">
		   <![CDATA[
		   		SELECT LP.ID
					, LP.FINID
					, LP.FINREFERENCE
					, LP.PROVISIONDATE
					, LP.MANUALPROVISION
					, LP.REGPROVSNPER
					, LP.REGPROVSNAMT
					, LP.REGSECPROVSNPER
					, LP.REGSECPROVSNAMT
					, LP.REGUNSECPROVSNPER
					, LP.REGUNSECPROVSNAMT
					, LP.TOTREGPROVSNAMT
					, LP.INTPROVSNPER
					, LP.INTPROVSNAMT
					, LP.INTSECPROVSNPER
					, LP.INTSECPROVSNAMT
					, LP.INTUNSECPROVSNPER
					, LP.INTUNSECPROVSNAMT
					, LP.TOTINTPROVSNAMT
					, LP.MANPROVSNPER
					, LP.MANPROVSNAMT
					, LP.PASTDUEDAYS
					, LP.NPAPASTDUEDAYS
					, LP.EFFNPAPASTDUEDAYS
					, LP.NPAAGING
					, LP.EFFNPAAGING
					, LP.NPACLASSID
					, LP.EFFNPACLASSID
					, LP.OSPRINCIPAL
					, LP.OSPROFIT
					, LP.PROFITACCRUEDANDDUE
					, LP.PROFITACCRUEDANDNOTDUE
					, LP.COLLATERALAMT
					, LP.INSURANCEAMT
					, LP.LINKEDTRANID
					, LP.CHGLINKEDTRANID
					, LP.VERSION
					, LP.CREATEDBY
					, LP.CREATEDON
					, LP.APPROVEDBY
					, LP.APPROVEDON
					, LP.LASTMNTBY
					, LP.LASTMNTON
					, LP.RECORDSTATUS
					, LP.ROLECODE
					, LP.NEXTROLECODE
					, LP.TASKID
					, LP.NEXTTASKID
					, LP.RECORDTYPE
					, LP.WORKFLOWID
					, FM.FINTYPE
					, FM.FINISACTIVE
					, C.CUSTCIF
					, C.CUSTSHRTNAME
					, ACC.CODE LOANCLASSIFICATION
					, EACC.CODE EFFECTIVECLASSIFICATION
					, LP.MANUALCLASSIFICATION
				FROM LOAN_PROVISIONS LP
				INNER JOIN FINANCEMAIN FM ON FM.FINID = LP.FINID
				INNER JOIN CUSTOMERS C ON C.CUSTID = FM.CUSTID
				INNER JOIN ASSET_CLASS_SETUP_DETAILS ACSD ON ACSD.ID = LP.NPACLASSID
                INNER JOIN ASSET_CLASS_CODES ACC ON ACC.ID = ACSD.CLASSID
                LEFT JOIN ASSET_CLASS_SETUP_DETAILS EACSD ON EACSD.ID = LP.EFFNPACLASSID
                LEFT JOIN ASSET_CLASS_CODES EACC ON EACC.ID = EACSD.CLASSID
		   ]]>
		</createView>
	</changeSet>

	<changeSet id="5_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'loan_provisions_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="6_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rpt_soa_loan_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="6" author="Gopal.p">
		<createView viewName="RPT_SOA_LOAN_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FM.FINREFERENCE,
					FM.FINASSETVALUE LOANAMOUNT,
			      	FM.REPAYBASERATE PLRRATE,
			      	FM.REPAYMARGIN VARIANCE,
			      	FM.EFFECTIVERATEOFRETURN IRR,
			      	FP.CURREDUCINGRATE ROI,
			      	FP.NOINST TENURE,
			      	FM.REPAYFRQ,
			      	TOTALPRIPAID EMIRECEIVEDPRI,
			      	TOTALPFTPAID EMIRECEIVEDPFT,
			      	0.00 PREFERREDCARDLIMIT,
			      	PRVRPYSCHPRI PREVINSTAMTPRI,
			      	PRVRPYSCHPFT PREVINSTAMTPFT,
			      	CASE WHEN FM.REPAYRATEBASIS ='R' THEN 'Reducing'
			      		 WHEN FM.REPAYRATEBASIS ='F' THEN 'Flat' 
			      		 WHEN FM.REPAYRATEBASIS ='C' THEN 'Flat Converting to Reduce' 
			      		 else '' END INTRATETYPE,
				    FP.LATESTDISBDATE LASTDISBURSALDATE,
				    FP.FIRSTREPAYDATE FIRSTDUEDATE,
				    FM.MATURITYDATE ENDINSTALLMENTDATE,
				    '0.00/ 0' ADVINSTAMT,
				    FM.FINISACTIVE,
				    FM.CLOSINGSTATUS,
				    FM.CLOSEDDATE,
				    FP.FUTUREINST FUTUREINSTNO,
				    FP.TOTALPRISCHD FUTUREPRI1,
				    FP.TDSCHDPRI FUTUREPRI2,
		            FP.TOTALPFTSCHD FUTURERPYPFT1,
		            FP.TDSCHDPFT FUTURERPYPFT2,
				    FP.TOTCHARGESPAID CHARGE_COLL_CUST,
				    FP.UPFRONTFEE UPFRONT_INT_CUST,
				    0 INT_PAID_DEALER_UPFRONT,
				    0 PRE_EMI_INT_PAID,
				    '' REPO_STATUS,
				    '' REPO_DATE,
				    '' SALE_DATE,
				    '' RELEASE_DATE,
				    FP.LATESTRPYDATE,
		            C.CCYMINORCCYUNITS,
		            CCYEDITFIELD,
		            COALESCE(FP.TOTALPFTCPZ,0) TOTALPFTCPZ
				FROM FINANCEMAIN FM 
				INNER JOIN FINPFTDETAILS FP ON FP.FINREFERENCE = FM.FINREFERENCE 
				INNER JOIN RMTFINANCETYPES RF ON RF.FINTYPE = FM.FINTYPE
				INNER JOIN RMTCURRENCIES C ON C.CCYCODE= FP.FINCCY
          ]]>
		</createView>
	</changeSet>

	<changeSet id="6_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rpt_soa_loan_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="7_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'interestcertificate_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="7" author="Gopal.p">
		<createView viewName="INTERESTCERTIFICATE_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T2.CUSTSHRTNAME CUSTNAME,
					T3.CUSTADDRHNBR,
					T3.CUSTADDRSTREET,
					T11.COUNTRYDESC,
					T12.CPPROVINCENAME CUSTADDRSTATE,
					T13.PCCITYNAME CUSTADDRCITY,
					T3.CUSTADDRZIP,
					T8.FINREFERENCE,
					T4.CUSTEMAIL,
					T5.PHONENUMBER CUSTPHONENUMBER,
					T6.FINTYPEDESC,
					T8.FINASSETVALUE,
					T8.EFFECTIVERATEOFRETURN EFFECTIVERATE,
					T10.ENTITYCODE,
					T10.ENTITYDESC,
					T10.PANNUMBER ENTITYPANNUMBER,
					T10.ENTITYADDRHNBR,
					T10.ENTITYFLATNBR,
					T10.ENTITYADDRSTREET,
					T14.CPPROVINCENAME ENTITYSTATE,
					T15.PCCITYNAME ENTITYCITY,
					T10.PINCODE ENTITYZIP,
					T1.FINPOSTDATE,
					T1.FINSCHDPFTPAID,
					T1.FINSCHDPRIPAID,
					T8.FINCCY,
					T8.FINASSETVALUE FINAMOUNT,
					T8.FINTYPE,
					T3.CUSTFLATNBR,
					T8.FINCURRASSETVALUE,
					T2.CUSTSALUTATIONCODE CUSTSALUTATION,
					(T16.TOTALPFTBAL + T16.TOTALPRIBAL) TOTOUSTANDINGAMT,
					T16.TOTALPFTBAL,
					T16.TOTALPRIBAL
				FROM FINANCEMAIN T8
				LEFT JOIN FINREPAYDETAILS T1 ON T8.FINID = T1.FINID
				INNER JOIN CUSTOMERS T2 ON T2.CUSTID = T8.CUSTID
				LEFT JOIN CUSTOMERADDRESSES T3 ON T3.CUSTID = T8.CUSTID AND T3.CUSTADDRPRIORITY = 5
				LEFT JOIN CUSTOMEREMAILS T4 ON T4.CUSTID = T8.CUSTID AND T4.CUSTEMAILPRIORITY = 5
				LEFT JOIN CUSTOMERPHONENUMBERS T5 ON T5.PHONECUSTID = T8.CUSTID AND T5.PHONETYPEPRIORITY = 5
				INNER JOIN RMTFINANCETYPES T6 ON T6.FINTYPE = T8.FINTYPE
				INNER JOIN SMTDIVISIONDETAIL T9 ON T9.DIVISIONCODE = T6.FINDIVISION
				INNER JOIN ENTITY T10 ON T10.ENTITYCODE = T9.ENTITYCODE
				LEFT JOIN BMTCOUNTRIES T11 ON T11.COUNTRYCODE = T3.CUSTADDRCOUNTRY
				LEFT JOIN RMTCOUNTRYVSPROVINCE T12 ON T12.CPPROVINCE = T3.CUSTADDRPROVINCE
				LEFT JOIN RMTPROVINCEVSCITY T13 ON T13.PCCITY = T3.CUSTADDRCITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE T14 ON T14.CPPROVINCE = T10.STATECODE
				INNER JOIN RMTPROVINCEVSCITY T15 ON T15.PCCITY = T10.CITYCODE
				INNER JOIN FINPFTDETAILS T16 ON T16.FINID = T8.FINID
			]]>
		</createView>
	</changeSet>

	<changeSet id="7_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'interestcertificate_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="8_pre" author="Gopal.p" dbms="postgresql">
		<sql> 
			<![CDATA[ 
				select deps_save_and_drop_dependencies ('plf', 'tan_assignments_view'); 
			]]>
		</sql>
	</changeSet>

	<changeSet id="8" author="Gopal.p">
		<createView viewName="TAN_ASSIGNMENTS_VIEW" replaceIfExists="true">
			<![CDATA[  
				SELECT TA.ID, 
					TA.CUSTID,
					TA.FINID, 
					TA.FINREFERENCE, 
					TA.TANID, 
					TA.VERSION, 
					TA.LASTMNTBY, 
					TA.LASTMNTON, 
					TA.RECORDSTATUS, 
					TA.ROLECODE, 
					TA.NEXTROLECODE, 
					TA.TASKID, 
					TA.NEXTTASKID, 
					TA.RECORDTYPE, 
					TA.WORKFLOWID 
					FROM TAN_ASSIGNMENTS_TEMP TA 
				UNION ALL 
				SELECT 	TA.ID, 
					TA.CUSTID, 
					TA.FINID,
					TA.FINREFERENCE, 
					TA.TANID, 
					TA.VERSION, 
					TA.LASTMNTBY, 
					TA.LASTMNTON, 
					TA.RECORDSTATUS, 
					TA.ROLECODE, 
					TA.NEXTROLECODE, 
					TA.TASKID, 
					TA.NEXTTASKID, 
					TA.RECORDTYPE, 
					TA.WORKFLOWID 
				FROM TAN_ASSIGNMENTS TA 
				WHERE NOT EXISTS (SELECT 1 FROM TAN_ASSIGNMENTS_TEMP WHERE ID = TA.ID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="8_post" author="Gopal.p" dbms="postgresql">
		<sql> 
			<![CDATA[ 
				select deps_restore_dependencies ('plf', 'tan_assignments_view'); 
			]]>
		</sql>
	</changeSet>

	<changeSet id="9_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'jvpostingentry_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="9" author="rajesh.n">
		<createView viewName="JVPOSTINGENTRY_AVIEW" replaceIfExists="true">
			<![CDATA[  
				SELECT T1.BATCHREFERENCE,
					T1.ACCOUNTNAME,
					T1.TXNCCY,
					T1.TXNCODE,
					T1.POSTINGDATE,
					T1.VALUEDATE,
					T1.TXNAMOUNT,
					T1.TXNREFERENCE,
					T1.NARRLINE1,
					T1.NARRLINE2,
					T1.NARRLINE3,
					T1.NARRLINE4,
					T1.EXCHRATE_BATCH,
					T1.EXCHRATE_AC,
					T1.TXNAMOUNT_BATCH,
					T1.TXNAMOUNT_AC,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.ACCCCY,
					T5.TRANDESC TXNDESC,
					T1.VALIDATIONSTATUS,
					T1.MODIFIEDFLAG,
					T1.DELETEDFLAG,
					T1.TXNENTRY,
					T1.POSTINGSTATUS,
					T1.HOSTSEQNO,
					T1.ACTYPE, 
					T1.ACENTRYREF,
					T1.EXTERNALACCOUNT,
					T1.ACCOUNT,
					T1.FILENAME, 
					T1.LINKEDTRANID,
					T1.VERSION,
					T1.DERIVEDTXNREF,
					T1.TDSADJREQ
				FROM JVPOSTINGENTRY T1
				LEFT OUTER JOIN BMTTRANSACTIONCODE T5 ON T1.TXNCODE = T5.TRANCODE
			]]>
		</createView>
	</changeSet>

	<changeSet id="9_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'jvpostingentry_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="10_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'jvpostingentry_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="10" author="Gopal.p">
		<createView replaceIfExists="true" viewName="JVPOSTINGENTRY_VIEW">
			<![CDATA[
			 	SELECT T1.BATCHREFERENCE,
					T1.ACCOUNT,
					T1.ACCOUNTNAME,
					T1.TXNCCY,
					T1.TXNCODE,
					T1.POSTINGDATE,
					T1.VALUEDATE,
					T1.TXNAMOUNT,
					T1.TXNREFERENCE,
					T1.NARRLINE1, 
					T1.NARRLINE2,
					T1.NARRLINE3,
					T1.NARRLINE4,
					T1.EXCHRATE_BATCH,
					T1.EXCHRATE_AC,
					T1.TXNAMOUNT_BATCH,
					T1.TXNAMOUNT_AC,
					T1.LASTMNTBY,
					T1.LASTMNTON, 
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID, 
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,  
					T1.ACCCCY,
					T5.TRANDESC TXNDESC,
					T1.VALIDATIONSTATUS, 
					T1.MODIFIEDFLAG,
					T1.DELETEDFLAG,
					T1.TXNENTRY,
					T1.POSTINGSTATUS,
					T1.HOSTSEQNO,
					T1.ACTYPE, 
					T1.ACENTRYREF,
					T1.EXTERNALACCOUNT,
					T1.FILENAME,
					T1.LINKEDTRANID,
					T1.DERIVEDTXNREF,
					T1.TDSADJREQ
				FROM JVPOSTINGENTRY_TEMP T1
				LEFT OUTER JOIN BMTTRANSACTIONCODE T5 ON T1.TXNCODE = T5.TRANCODE
				UNION ALL
				SELECT T1.BATCHREFERENCE, 
					T1.ACCOUNT,
					T1.ACCOUNTNAME,
					T1.TXNCCY,
					T1.TXNCODE,
					T1.POSTINGDATE,
					T1.VALUEDATE,
					T1.TXNAMOUNT,
					T1.TXNREFERENCE,
					T1.NARRLINE1, 
					T1.NARRLINE2,
					T1.NARRLINE3,
					T1.NARRLINE4,
					T1.EXCHRATE_BATCH,
					T1.EXCHRATE_AC,
					T1.TXNAMOUNT_BATCH,
					T1.TXNAMOUNT_AC,
					T1.LASTMNTBY,
					T1.LASTMNTON, 
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.ACCCCY, 
					T5.TRANDESC TXNDESC,
					T1.VALIDATIONSTATUS, 
					T1.MODIFIEDFLAG,
					T1.DELETEDFLAG,
					T1.TXNENTRY,
					T1.POSTINGSTATUS,
					T1.HOSTSEQNO,
					T1.ACTYPE, 
					T1.ACENTRYREF,
					T1.EXTERNALACCOUNT,
					T1.FILENAME,
					T1.LINKEDTRANID, 
					T1.DERIVEDTXNREF,
					T1.TDSADJREQ
				FROM JVPOSTINGENTRY T1 
				LEFT OUTER JOIN BMTTRANSACTIONCODE T5 ON T1.TXNCODE = T5.TRANCODE
				WHERE NOT EXISTS (SELECT 1 FROM JVPOSTINGENTRY_TEMP WHERE BATCHREFERENCE = T1.BATCHREFERENCE AND TXNREFERENCE = T1.TXNREFERENCE)
			]]>
		</createView>
	</changeSet>

	<changeSet id="10_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'jvpostingentry_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="11_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'jvpostingentry_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="11" author="Gopal.p">
		<createView replaceIfExists="true" viewName="JVPOSTINGENTRY_TVIEW">
			<![CDATA[
				SELECT T1.BATCHREFERENCE,
					 T1.ACCOUNT,
					 T1.ACCOUNTNAME,
					 T1.TXNCCY,
					 T1.TXNCODE,
					 T1.POSTINGDATE,
					 T1.VALUEDATE,
					 T1.TXNAMOUNT,
					 T1.TXNREFERENCE,
					 T1.NARRLINE1, 
					 T1.NARRLINE2,
					 T1.NARRLINE3,
					 T1.NARRLINE4,
					 T1.EXCHRATE_BATCH,
					 T1.EXCHRATE_AC,
					 T1.TXNAMOUNT_BATCH,
					 T1.TXNAMOUNT_AC,
					 T1.LASTMNTBY,
					 T1.LASTMNTON, 
					 T1.RECORDSTATUS,
					 T1.ROLECODE,
					 T1.NEXTROLECODE,
					 T1.TASKID,
					 T1.NEXTTASKID,
					 T1.RECORDTYPE,
					 T1.WORKFLOWID,
					 T1.ACCCCY,
					 T5.TRANDESC TXNDESC, 
					 T1.VALIDATIONSTATUS,
					 T1.MODIFIEDFLAG,
					 T1.DELETEDFLAG,
					 T1.TXNENTRY,
					 T1.POSTINGSTATUS,
					 T1.HOSTSEQNO,
					 T1.ACTYPE,
					 T1.ACENTRYREF,
					 T1.EXTERNALACCOUNT,
					 T1.FILENAME,
					 T1.LINKEDTRANID,
					 T1.DERIVEDTXNREF,
					 T1.TDSADJREQ
				FROM JVPOSTINGENTRY_TEMP T1 
				LEFT OUTER JOIN BMTTRANSACTIONCODE T5 ON T1.TXNCODE = T5.TRANCODE
			]]>
        </createView>
	</changeSet>

	<changeSet id="11_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'jvpostingentry_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="12_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'cibil_customer_extarct_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="12" author="Gopal.p">
		<createView viewName="CIBIL_CUSTOMER_EXTARCT_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT C.CUSTID,
					FM.FINID,
					FM.FINREFERENCE,
					CASE WHEN FM.FINREFERENCE IS NULL THEN 4
						ELSE 1 END OWNERSHIP,
					PD.LATESTRPYDATE,
					SMT.ENTITYCODE
				FROM FINANCEMAIN FM
				INNER JOIN CUSTOMERS C ON C.CUSTID = FM.CUSTID
				INNER JOIN FINPFTDETAILS PD ON PD.FINID = FM.FINID
				INNER JOIN RMTFINANCETYPES RFT ON RFT.FINTYPE = PD.FINTYPE
				INNER JOIN SMTDIVISIONDETAIL SMT ON SMT.DIVISIONCODE = RFT.FINDIVISION
				WHERE C.CUSTTYPECODE IN (SELECT RMTCUSTTYPES.CUSTTYPECODE FROM RMTCUSTTYPES WHERE RMTCUSTTYPES.CUSTTYPECTG = 'RETAIL')
				UNION ALL
				SELECT C.CUSTID,
					FM.FINID,
					FM.FINREFERENCE,
					3 OWNERSHIP,
					PD.LATESTRPYDATE,
					SMT.ENTITYCODE
				FROM FINGUARANTORSDETAILS GD
				INNER JOIN CUSTOMERS C ON C.CUSTCIF = GD.GUARANTORCIF
				INNER JOIN FINANCEMAIN FM ON FM.FINID = GD.FINID
				INNER JOIN FINPFTDETAILS PD ON PD.FINID = GD.FINID
				INNER JOIN RMTFINANCETYPES RFT ON RFT.FINTYPE = PD.FINTYPE
				INNER JOIN SMTDIVISIONDETAIL SMT ON SMT.DIVISIONCODE = RFT.FINDIVISION
				WHERE C.CUSTTYPECODE IN (SELECT RMTCUSTTYPES.CUSTTYPECODE FROM RMTCUSTTYPES WHERE RMTCUSTTYPES.CUSTTYPECTG = 'RETAIL')
				UNION ALL
				SELECT C.CUSTID,
					FM.FINID,
					FM.FINREFERENCE,
					4 OWNERSHIP,
					PD.LATESTRPYDATE,
					SMT.ENTITYCODE
				FROM FINJOINTACCOUNTDETAILS JA
				INNER JOIN CUSTOMERS C ON C.CUSTCIF = JA.CUSTCIF
				INNER JOIN FINANCEMAIN FM ON FM.FINID = JA.FINID
				INNER JOIN FINPFTDETAILS PD ON PD.FINID = FM.FINID
				INNER JOIN RMTFINANCETYPES RFT ON RFT.FINTYPE = PD.FINTYPE
				INNER JOIN SMTDIVISIONDETAIL SMT ON SMT.DIVISIONCODE = RFT.FINDIVISION
				WHERE C.CUSTTYPECODE IN (SELECT RMTCUSTTYPES.CUSTTYPECODE FROM RMTCUSTTYPES WHERE RMTCUSTTYPES.CUSTTYPECTG = 'RETAIL')
			]]>	
		</createView>
	</changeSet>

	<changeSet id="12_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'cibil_customer_extarct_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="13_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'bmtbankdetail_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="13" author="Gopal.p">
		<createView viewName="BMTBANKDETAIL_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT BANKCODE,
					BANKNAME,
					BANKSHORTCODE,
					ACTIVE,
					VERSION,
					LASTMNTBY,
					LASTMNTON,
					RECORDSTATUS,
					ROLECODE,
					NEXTROLECODE,
					TASKID,
					NEXTTASKID,
					RECORDTYPE,
					WORKFLOWID,
					ACCNOLENGTH,
					ALLOWMULTIPLEIFSC,
					MINACCNOLENGTH
				FROM BMTBANKDETAIL
			]]>
		</createView>
	</changeSet>

	<changeSet id="13_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'bmtbankdetail_aview');
			]]>
		</sql>
	</changeSet>


	<changeSet id="14_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'bmtbankdetail_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="14" author="Gopal.p">
		<createView viewName="BMTBANKDETAIL_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT BANKCODE, 
			       BANKNAME, 
			       BANKSHORTCODE, 
			       ACTIVE,
			       VERSION, 
			       LASTMNTBY, 
			       LASTMNTON, 
			       RECORDSTATUS, 
			       ROLECODE, 
			       NEXTROLECODE, 
			       TASKID, 
			       NEXTTASKID, 
			       RECORDTYPE, 
			       WORKFLOWID, 
			       ACCNOLENGTH,
			       ALLOWMULTIPLEIFSC,
			       MINACCNOLENGTH 
				FROM BMTBANKDETAIL_TEMP
				UNION ALL 
				SELECT BANKCODE, 
			       BANKNAME, 
			       BANKSHORTCODE, 
			       ACTIVE, 
			       VERSION, 
			       LASTMNTBY, 
			       LASTMNTON, 
			       RECORDSTATUS, 
			       ROLECODE, 
			       NEXTROLECODE, 
			       TASKID, 
			       NEXTTASKID, 
			       RECORDTYPE, 
			       WORKFLOWID, 
			       ACCNOLENGTH,
			       ALLOWMULTIPLEIFSC,
			       MINACCNOLENGTH
				FROM BMTBANKDETAIL WHERE  NOT EXISTS (SELECT 1 FROM BMTBANKDETAIL_TEMP WHERE BANKCODE = BMTBANKDETAIL.BANKCODE) 
			]]>
		</createView>
	</changeSet>

	<changeSet id="14_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'bmtbankdetail_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="15_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'bankbranches_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="15" author="Gopal.p">
		<createView viewName="BANKBRANCHES_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.BANKBRANCHID,
					T1.BANKCODE,
					T1.BRANCHCODE,
					T1.BRANCHDESC,
					T1.CITY,
					T3.PCCITYNAME,
					T1.MICR,
					T1.IFSC,
					T2.BANKNAME,
					T1.ECS,
					T1.DDA,
					T1.NACH,
					T1.DD,
					T1.ADDOFBRANCH,
					T1.CHEQUE,
					T1.ACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.ACCNOLENGTH,
					T1.PARENTBRANCH,
					T1.PARENTBRANCHDESC,
					T1.EMANDATE,
					T1.ALLOWEDSOURCES,
					T2.ALLOWMULTIPLEIFSC
				FROM BANKBRANCHES_TEMP T1
				INNER JOIN BMTBANKDETAIL T2 ON T1.BANKCODE = T2.BANKCODE
				LEFT JOIN RMTPROVINCEVSCITY T3 ON T3.PCCITY = T1.CITY
				UNION ALL
				SELECT T1.BANKBRANCHID,
					T1.BANKCODE,
					T1.BRANCHCODE,
					T1.BRANCHDESC,
					T1.CITY,
					T3.PCCITYNAME,
					T1.MICR,
					T1.IFSC,
					T2.BANKNAME,
					T1.ECS,
					T1.DDA,
					T1.NACH,
					T1.DD,
					T1.ADDOFBRANCH,
					T1.CHEQUE,
					T1.ACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.ACCNOLENGTH,
					T1.PARENTBRANCH,
					T1.PARENTBRANCHDESC,
					T1.EMANDATE,
					T1.ALLOWEDSOURCES,
					T2.ALLOWMULTIPLEIFSC
				FROM BANKBRANCHES T1
				INNER JOIN BMTBANKDETAIL T2 ON T1.BANKCODE = T2.BANKCODE
				LEFT JOIN RMTPROVINCEVSCITY T3 ON T3.PCCITY = T1.CITY
				WHERE NOT EXISTS ( SELECT 1 FROM BANKBRANCHES_TEMP WHERE BANKBRANCHES_TEMP.BANKBRANCHID = T1.BANKBRANCHID) 
			]]>
		</createView>
	</changeSet>

	<changeSet id="15_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'bankbranches_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="16_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'overdraft_loan_limits_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="16" author="Gopal.p">
		<createView viewName="OVERDRAFT_LOAN_LIMITS_VIEW" replaceIfExists="true">
		    <![CDATA[
				SELECT T1.ID, 
					T1.FINID, 
                    T1.FINREFERENCE,
					T3.CUSTCIF,
					T2.FINISACTIVE,
					T1.ACTUALLIMIT,
					T1.MONTHLYLIMIT,
					T1.ACTUALLIMITBAL,
					T1.MONTHLYLIMITBAL,
                    T1.BLOCKLIMIT,
                    T1.BLOCKTYPE,
                    T1.VERSION,
					T1.CREATEDBY,
					T1.CREATEDON,
                    T1.LASTMNTBY,
                    T1.LASTMNTON,
                    T1.RECORDSTATUS,
                    T1.ROLECODE,
                    T1.NEXTROLECODE,
                    T1.TASKID,
                    T1.NEXTTASKID,
                    T1.RECORDTYPE,
                    T1.WORKFLOWID
                FROM OVERDRAFT_LOAN_LIMITS_TEMP T1
				INNER JOIN FINANCEMAIN T2 ON T1.FINID = T2.FINID
				INNER JOIN CUSTOMERS T3 ON  T2.CUSTID = T3.CUSTID 
				UNION ALL
                SELECT T1.ID, 
                    T1.FINID, 
                    T1.FINREFERENCE,
					T3.CUSTCIF,
					T2.FINISACTIVE,
					T1.ACTUALLIMIT,
					T1.MONTHLYLIMIT,
					T1.ACTUALLIMITBAL,
					T1.MONTHLYLIMITBAL,
                    T1.BLOCKLIMIT,
                    T1.BLOCKTYPE,
                    T1.VERSION,
					T1.CREATEDBY,
					T1.CREATEDON,
                    T1.LASTMNTBY,
                    T1.LASTMNTON,
                    T1.RECORDSTATUS,
                    T1.ROLECODE,
                    T1.NEXTROLECODE,
                    T1.TASKID,
                    T1.NEXTTASKID,
                    T1.RECORDTYPE,
                    T1.WORKFLOWID
                FROM OVERDRAFT_LOAN_LIMITS T1
				INNER JOIN FINANCEMAIN T2 ON T1.FINID = T2.FINID
				INNER JOIN CUSTOMERS T3 ON  T2.CUSTID = T3.CUSTID
				WHERE NOT (EXISTS ( SELECT 1 FROM OVERDRAFT_LOAN_LIMITS_TEMP WHERE FINID = T1.FINID))
			]]>	
		</createView>
	</changeSet>

	<changeSet id="16_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'overdraft_loan_limits_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="17_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'overdraft_loan_limits_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="17" author="Gopal.p">
		<createView viewName="OVERDRAFT_LOAN_LIMITS_AVIEW" replaceIfExists="true">
		    <![CDATA[
                SELECT T1.ID, 
                    T1.FINID, 
                    T1.FINREFERENCE,
					T3.CUSTCIF,
					T2.FINISACTIVE,
					T1.ACTUALLIMIT,
					T1.MONTHLYLIMIT,
					T1.ACTUALLIMITBAL,
					T1.MONTHLYLIMITBAL,
                    T1.BLOCKLIMIT,
                    T1.BLOCKTYPE,
                    T1.VERSION,
					T1.CREATEDBY,
					T1.CREATEDON,
                    T1.LASTMNTBY,
                    T1.LASTMNTON,
                    T1.RECORDSTATUS,
                    T1.ROLECODE,
                    T1.NEXTROLECODE,
                    T1.TASKID,
                    T1.NEXTTASKID,
                    T1.RECORDTYPE,
                    T1.WORKFLOWID
                FROM OVERDRAFT_LOAN_LIMITS T1
				INNER JOIN FINANCEMAIN T2 ON T1.FINID = T2.FINID
				INNER JOIN CUSTOMERS T3 ON  T2.CUSTID = T3.CUSTID
			]]>	
		</createView>
	</changeSet>

	<changeSet id="17_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'overdraft_loan_limits_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="18.1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'lmtfinrefdetail_finview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="18.1" author="Gopal.p " dbms="postgresql,mssql">
		<createView viewName="LMTFINREFDETAIL_FINVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINREFDETAILID,
					T1.FINTYPE,
					T1.FINREFTYPE,
					T1.FINREFID,
					T1.ISACTIVE,
					T1.SHOWINSTAGE,
					T1.MANDINPUTINSTAGE,
					T1.ALLOWINPUTINSTAGE,
					T1.ALLOWDEVIATION,
					T1.ALLOWWAIVER,
					T1.ALLOWPOSTPONE,
					T1.ALLOWEXPIRE,
					T1.OVERRIDE,
					T1.OVERRIDEVALUE,
					T1.FINEVENT,
					T1.ALERTTYPE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINTYPEDESC LOVDESCFINTYPEDESCNAME,
					T2.FINCCY LOVDESCFINCCYCODE,
					T2.FINCATEGORY LOVDESCPRODUCTCODENAME,
					T3.AGGIMAGE LOVDESCAGGIMAGE,
					COALESCE(T3.AGGNAME, T4.EVENTCODE, T7.RULECODEDESC, T8.SCOREGROUPNAME, T9.SCOREGROUPNAME, T11.TABDESCRIPTION) LOVDESCNAMELOV,
					COALESCE(T3.AGGCODE, T7.RULECODE, T8.SCOREGROUPCODE, T9.SCOREGROUPCODE, T11.TABCODE) LOVDESCCODELOV,
					COALESCE(T3.AGGDESC, T4.ACCOUNTSETCODENAME, T5.CHECKLISTDESC, T7.RULECODE, T8.SCOREGROUPCODE, T9.SCOREGROUPCODE, T10.LIMITCODE, T11.TABCODE) LOVDESCREFDESC,
					T3.AGGREPORTNAME LOVDESCAGGREPORTNAME,
					T3.AGGREPORTPATH LOVDESCAGGREPORTPATH,
					T3.AGRRULE LOVDESCAGGRULENAME,
					T3.AGGTYPE,
					T3.MODULETYPE,
					COALESCE(T3.ALLOWMULTIPLE, 0) ALLOWMULTIPLE,
					COALESCE(T5.REMARKS, '0') LOVDESCISREMARKSALLOWED,
					COALESCE(T5.CHECKMINCOUNT, 0) LOVDESCCHECKMINCOUNT,
					COALESCE(T5.CHECKMAXCOUNT, 0) LOVDESCCHECKMAXCOUNT,
					COALESCE(T6.SQLRULE, T7.SQLRULE) LOVDESCELGRULEVALUE,
					COALESCE(T6.RETURNTYPE, T7.RETURNTYPE) LOVDESCRULERETURNTYPE,
					COALESCE(T8.MINSCORE, T9.MINSCORE, '0') LOVDESCMINSCORE,
					COALESCE(T8.ISOVERRIDE, T9.ISOVERRIDE, 0) LOVDESCISOVERRIDE,
					COALESCE(T8.OVERRIDESCORE, T9.OVERRIDESCORE, '0') LOVDESCOVERRIDESCORE,
					T11.TABCODE
				FROM LMTFINREFDETAIL T1
				INNER JOIN RMTFINANCETYPES T2 ON T1.FINTYPE = T2.FINTYPE
				LEFT JOIN BMTAGGREMENTDEF T3 ON T1.FINREFID = T3.AGGID AND T1.FINREFTYPE = 2
				LEFT JOIN RMTACCOUNTINGSET T4 ON T1.FINREFID = T4.ACCOUNTSETID AND T1.FINREFTYPE = 5
				LEFT JOIN BMTCHECKLIST T5 ON T1.FINREFID = T5.CHECKLISTID AND T1.FINREFTYPE = 1
				LEFT JOIN RULES T6 ON T6.RULECODE = T5.CHECKRULE AND T6.RULEMODULE = 'CLRULE' AND T6.RULEEVENT = 'CLRULE'
				LEFT JOIN RULES T7 ON T1.FINREFID = T7.RULEID AND T1.FINREFTYPE = 3
				LEFT JOIN RMTSCORINGGROUP T8 ON T1.FINREFID = T8.SCOREGROUPID AND T1.FINREFTYPE = 4 AND T8.CATEGORYTYPE = 'RETAIL'
				LEFT JOIN RMTSCORINGGROUP T9 ON T1.FINREFID = T9.SCOREGROUPID AND T1.FINREFTYPE = 7 AND T9.CATEGORYTYPE = 'CORP'
				LEFT JOIN LIMITCODEDETAIL T10 ON T10.LIMITID = T1.FINREFID
				LEFT JOIN STAGETABDETAIL T11 ON T1.FINREFID = T11.TABID AND T1.FINREFTYPE = 15
			]]>
		</createView>
	</changeSet>

	<changeSet id="18.1" author="Gopal.p " dbms="oracle">
		<createView viewName="LMTFINREFDETAIL_FINVIEW" replaceIfExists="true">
			<![CDATA[
					SELECT T1.FINREFDETAILID,
							T1.FINTYPE,
							T1.FINREFTYPE,
							T1.FINREFID,
							T1.ISACTIVE,
							T1.SHOWINSTAGE,
							T1.MANDINPUTINSTAGE,
							T1.ALLOWINPUTINSTAGE,
							T1.ALLOWDEVIATION,
							T1.ALLOWWAIVER,
							T1.ALLOWPOSTPONE,
							T1.ALLOWEXPIRE,
							T1.OVERRIDE,
							T1.OVERRIDEVALUE,
							T1.FINEVENT,
							T1.ALERTTYPE,
							T1.VERSION,
							T1.LASTMNTBY,
							T1.LASTMNTON,
							T1.RECORDSTATUS,
							T1.ROLECODE,
							T1.NEXTROLECODE,
							T1.TASKID,
							T1.NEXTTASKID,
							T1.RECORDTYPE,
							T1.WORKFLOWID,
							T2.FINTYPEDESC LOVDESCFINTYPEDESCNAME,
							T2.FINCCY LOVDESCFINCCYCODE,
							T2.FINCATEGORY LOVDESCPRODUCTCODENAME,
							T3.AGGIMAGE LOVDESCAGGIMAGE ,
							COALESCE(T3.AGGNAME, T4.EVENTCODE, T7.RULECODEDESC, T8.SCOREGROUPNAME, T9.SCOREGROUPNAME, T11.TABDESCRIPTION) LOVDESCNAMELOV ,
							COALESCE( T3.AGGCODE, T7.RULECODE , T8.SCOREGROUPCODE , T9.SCOREGROUPCODE, cast(T11.TABCODE as NVARCHAR2(50))) LOVDESCCODELOV  ,
							COALESCE(T3.AGGDESC, T4.ACCOUNTSETCODENAME , T5.CHECKLISTDESC , 
							cast(T7.RULECODE as varchar(8)), cast(T8.SCOREGROUPCODE as varchar(8)),  cast(T9.SCOREGROUPCODE as varchar(8)), T10.LIMITCODE ,  T11.TABCODE ) LOVDESCREFDESC ,
							T3.AGGREPORTNAME LOVDESCAGGREPORTNAME,
							T3.AGGREPORTPATH LOVDESCAGGREPORTPATH,
							T3.AGRRULE LOVDESCAGGRULENAME,
							T3.AGGTYPE,
							T3.MODULETYPE,
							COALESCE(T3.ALLOWMULTIPLE, 0) ALLOWMULTIPLE,
							COALESCE(T5.REMARKS, '0') LOVDESCISREMARKSALLOWED,
							COALESCE(T5.CHECKMINCOUNT, 0) LOVDESCCHECKMINCOUNT,
							COALESCE(T5.CHECKMAXCOUNT, 0) LOVDESCCHECKMAXCOUNT,
							COALESCE(T6.SQLRULE, T7.SQLRULE) LOVDESCELGRULEVALUE,
							COALESCE(T6.RETURNTYPE, T7.RETURNTYPE) LOVDESCRULERETURNTYPE,
							COALESCE(T8.MINSCORE, T9.MINSCORE, '0') LOVDESCMINSCORE,
							COALESCE(T8.ISOVERRIDE, T9.ISOVERRIDE, 0) LOVDESCISOVERRIDE,
							COALESCE(T8.OVERRIDESCORE, T9.OVERRIDESCORE, '0') LOVDESCOVERRIDESCORE,
							T11.TABCODE
						FROM LMTFINREFDETAIL T1
						INNER JOIN RMTFINANCETYPES T2 ON T1.FINTYPE = T2.FINTYPE
						LEFT JOIN BMTAGGREMENTDEF T3 ON T1.FINREFID = T3.AGGID AND T1.FINREFTYPE = 2
						LEFT JOIN RMTACCOUNTINGSET T4 ON T1.FINREFID = T4.ACCOUNTSETID AND T1.FINREFTYPE = 5
						LEFT JOIN BMTCHECKLIST T5 ON T1.FINREFID = T5.CHECKLISTID AND T1.FINREFTYPE = 1
						LEFT JOIN RULES T6 ON T6.RULECODE = T5.CHECKRULE AND T6.RULEMODULE = 'CLRULE' AND T6.RULEEVENT = 'CLRULE'
						LEFT JOIN RULES T7 ON T1.FINREFID = T7.RULEID AND T1.FINREFTYPE = 3
						LEFT JOIN RMTSCORINGGROUP T8 ON T1.FINREFID = T8.SCOREGROUPID AND T1.FINREFTYPE = 4 AND T8.CATEGORYTYPE = 'RETAIL'
						LEFT JOIN RMTSCORINGGROUP T9 ON T1.FINREFID = T9.SCOREGROUPID AND T1.FINREFTYPE = 7 AND T9.CATEGORYTYPE = 'CORP'
						LEFT JOIN LIMITCODEDETAIL T10 ON T10.LIMITID = T1.FINREFID
						LEFT JOIN STAGETABDETAIL T11 ON T1.FINREFID = T11.TABID AND T1.FINREFTYPE = 15
			]]>
		</createView>
	</changeSet>

	<changeSet id="18.1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'lmtfinrefdetail_finview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="19_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finoverdueenquiry_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="19" author="Gopal.p">
		<createView viewName="FINOVERDUEENQUIRY_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINID,
					T1.FINREFERENCE,
				    T1.FINBRANCH,
				    T1.FINTYPE,
				    T1.FINCCY,
				    T1.SCHEDULEMETHOD,
				    T1.PROFITDAYSBASIS,
				    T1.FINSTARTDATE,
				    T1.NUMBEROFTERMS,
				    T1.CUSTID,
				    T1.FINAMOUNT,
				    T1.GRCPERIODENDDATE,
				    T1.MATURITYDATE,
				    T1.FINREPAYMENTAMOUNT,
				    T1.FINISACTIVE,
				    T1.ALLOWGRCPERIOD,
				    T1.DOWNPAYMENT,
				    T1.MIGRATEDFINANCE,
				    T1.LASTREPAYDATE,
				    T1.LASTREPAYPFTDATE,
				    T5.FINTYPEDESC LOVDESCFINTYPENAME,
				    T6.CUSTCIF LOVDESCCUSTCIF,
				    T6.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
				    T7.BRANCHDESC LOVDESCFINBRANCHNAME,
				    T1.BLACKLISTED,
				    T5.FINSCHEDULEON LOVDESCFINSCHEDULEON,
				    T1.FEECHARGEAMT,
				    T1.CLOSINGSTATUS,
				    T8.CUSTTYPECTG,
				    T1.GRACETERMS,
				    T5.FINDIVISION LOVDESCFINDIVISION,
				    T5.FINCATEGORY LOVDESCPRODUCTCODENAME,
				    T1.ALWMULTIDISB,
				    T5.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
				    T1.DEFFERMENTS,
				    T1.FINCURRASSETVALUE,
				    T1.FINAMOUNT - T1.DOWNPAYMENT + T1.FEECHARGEAMT - T1.FINREPAYMENTAMOUNT CURFINAMOUNT,
				    T1.FINAMOUNT - T1.DOWNPAYMENT + T1.FEECHARGEAMT FINANCINGAMOUNT,
				    T1.FINSTATUS,
				    T1.TOTALCPZ,
				    T2.NOINST
				FROM FINANCEMAIN T1
				INNER JOIN FINPFTDETAILS T2 ON T2.FINID = T1.FINID
			    JOIN RMTFINANCETYPES T5 ON T1.FINTYPE = T5.FINTYPE
			    JOIN CUSTOMERS T6 ON T1.CUSTID = T6.CUSTID
			    JOIN RMTBRANCHES T7 ON T1.FINBRANCH = T7.BRANCHCODE
			    JOIN RMTCUSTTYPES T8 ON T6.CUSTTYPECODE = T8.CUSTTYPECODE
  				WHERE (T1.FINID IN ( SELECT FINODDETAILS.FINID FROM FINODDETAILS))
			]]>
		</createView>
	</changeSet>

	<changeSet id="19_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finoverdueenquiry_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="20_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'customerdocuments_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="20" author="Gopal.p">
		<createView viewName="CUSTOMERDOCUMENTS_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.CUSTID,
				    T1.CUSTDOCTYPE,
				    T2.DOCTYPEDESC LOVDESCCUSTDOCCATEGORY,
				    T1.CUSTDOCTITLE,
				    T1.CUSTDOCSYSNAME,
				    T1.CUSTDOCRCVDON,
				    T1.CUSTDOCEXPDATE,
				    T1.CUSTDOCISSUEDON,
				    T1.CUSTDOCISSUEDCOUNTRY,
				    T3.COUNTRYDESC LOVDESCCUSTDOCISSUEDCOUNTRY,
				    T1.CUSTDOCISVERIFIED,
				    T1.CUSTDOCVERIFIEDBY,
				    T1.CUSTDOCISACRIVE,
				    T1.DOCPURPOSE,
				    T1.DOCURI,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.CUSTDOCNAME,
				    T1.CUSTDOCCATEGORY,
				    T1.CUSTDOCIMAGE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T2.DOCEXPDATEISMAND,
				    T2.DOCISSUEDATEMAND,
				    T2.DOCIDNUMMAND,
				    T2.DOCISSUEDAUTHORITYMAND,
				    T2.DOCISMANDATORY,
				    T1.DOCREFID,
				    T2.DOCISPDFEXTREQUIRED,
				    T2.DOCISPASSWORDPROTECTED,
				    T2.PDFMAPPINGREF,
				    T1.PDFPASSWORD,
					T1.REMARKS,
					T1.ID
				FROM CUSTOMERDOCUMENTS_TEMP T1
				INNER JOIN BMTDOCUMENTTYPES T2 ON T1.CUSTDOCCATEGORY  = T2.DOCTYPECODE
				INNER JOIN BMTCOUNTRIES T3 ON T1.CUSTDOCISSUEDCOUNTRY = T3.COUNTRYCODE
				UNION ALL
				SELECT T1.CUSTID,
				    T1.CUSTDOCTYPE,
				    T2.DOCTYPEDESC LOVDESCCUSTDOCCATEGORY,
				    T1.CUSTDOCTITLE,
				    T1.CUSTDOCSYSNAME,
				    T1.CUSTDOCRCVDON,
				    T1.CUSTDOCEXPDATE,
				    T1.CUSTDOCISSUEDON,
				    T1.CUSTDOCISSUEDCOUNTRY,
				    T3.COUNTRYDESC LOVDESCCUSTDOCISSUEDCOUNTRY,
				    T1.CUSTDOCISVERIFIED,
				    T1.CUSTDOCVERIFIEDBY,
				    T1.CUSTDOCISACRIVE,
				    T1.DOCPURPOSE,
				    T1.DOCURI,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.CUSTDOCNAME,
				    T1.CUSTDOCCATEGORY,
				    T1.CUSTDOCIMAGE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T2.DOCEXPDATEISMAND,
				    T2.DOCISSUEDATEMAND,
				    T2.DOCIDNUMMAND,
				    T2.DOCISSUEDAUTHORITYMAND,
				    T2.DOCISMANDATORY,
				    T1.DOCREFID,
				    T2.DOCISPDFEXTREQUIRED,
				    T2.DOCISPASSWORDPROTECTED,
				    T2.PDFMAPPINGREF,
				    T1.PDFPASSWORD,
					T1.REMARKS,
					T1.ID
				FROM CUSTOMERDOCUMENTS T1
				INNER JOIN BMTDOCUMENTTYPES T2 ON T1.CUSTDOCCATEGORY = T2.DOCTYPECODE  
				INNER JOIN BMTCOUNTRIES T3 ON T1.CUSTDOCISSUEDCOUNTRY = T3.COUNTRYCODE
				WHERE NOT EXISTS (SELECT 1 FROM CUSTOMERDOCUMENTS_TEMP WHERE CUSTID = T1.CUSTID AND CUSTDOCCATEGORY = T1.CUSTDOCCATEGORY)
			]]>
		</createView>
	</changeSet>

	<changeSet id="20_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'customerdocuments_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="21_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'customerdocuments_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="21" author="Gopal.p">
		<createView viewName="CUSTOMERDOCUMENTS_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.CUSTID,
				    T1.CUSTDOCTYPE,
				    T2.DOCTYPEDESC LOVDESCCUSTDOCCATEGORY,
				    T1.CUSTDOCTITLE,
				    T1.CUSTDOCSYSNAME,
				    T1.CUSTDOCRCVDON,
				    T1.CUSTDOCEXPDATE,
				    T1.CUSTDOCISSUEDON,
				    T1.CUSTDOCISSUEDCOUNTRY,
				    T3.COUNTRYDESC LOVDESCCUSTDOCISSUEDCOUNTRY,
				    T1.CUSTDOCISVERIFIED,
				    T1.CUSTDOCVERIFIEDBY,
				    T1.CUSTDOCISACRIVE,
				    T1.DOCPURPOSE,
				    T1.DOCURI,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.CUSTDOCNAME,
				    T1.CUSTDOCCATEGORY,
				    T1.CUSTDOCIMAGE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T2.DOCEXPDATEISMAND,
				    T2.DOCISSUEDATEMAND,
				    T2.DOCIDNUMMAND,
				    T2.DOCISSUEDAUTHORITYMAND,
				    T2.DOCISMANDATORY,
				    T1.DOCREFID,
				    T2.DOCISPDFEXTREQUIRED,
				    T2.DOCISPASSWORDPROTECTED,
				    T2.PDFMAPPINGREF,
				    T1.PDFPASSWORD,
					T1.REMARKS,
					T1.ID
				FROM CUSTOMERDOCUMENTS T1
				INNER JOIN BMTDOCUMENTTYPES T2 ON T1.CUSTDOCCATEGORY = T2.DOCTYPECODE  
				INNER JOIN BMTCOUNTRIES T3 ON T1.CUSTDOCISSUEDCOUNTRY = T3.COUNTRYCODE
			]]>
		</createView>
	</changeSet>

	<changeSet id="21_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'customerdocuments_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="22_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'documentstatus_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="22" author="Gopal.p">
		<createView viewName="DOCUMENTSTATUS_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FM.FINID,
					FM.FINREFERENCE,
                    FT.FINTYPE,
                    FM.FINBRANCH,
                    FM.FINSTARTDATE,
                    FM.MATURITYDATE,
                    FM.FINCCY,
                    FM.SCHEDULEMETHOD,
                    FM.PROFITDAYSBASIS,
                    FM.FINISACTIVE,
                    CU.CUSTCIF,
				    CU.CUSTSHRTNAME,
				    FT.FINCATEGORY,
				    RB.BRANCHDESC,
				    FT.FINTYPEDESC,
				    DS.VERSION,
					DS.LASTMNTBY,
					DS.LASTMNTON,
					DS.RECORDSTATUS,
					DS.ROLECODE,
					DS.NEXTROLECODE,
					DS.TASKID,
					DS.NEXTTASKID,
					DS.RECORDTYPE,
					DS.WORKFLOWID
				FROM FINANCEMAIN_TEMP FM
                INNER JOIN CUSTOMERS CU ON CU.CUSTID = FM.CUSTID
                INNER JOIN RMTFINANCETYPES FT ON FT.FINTYPE = FM.FINTYPE
                INNER JOIN RMTBRANCHES RB ON RB.BRANCHCODE = FM.FINBRANCH
                LEFT JOIN (SELECT * FROM DOCUMENT_STATUS_TEMP UNION ALL SELECT * FROM DOCUMENT_STATUS WHERE NOT EXISTS(SELECT 1 FROM DOCUMENT_STATUS_TEMP WHERE ID=DOCUMENT_STATUS.ID)) DS ON DS.FINREFERENCE = FM.FINREFERENCE
                UNION ALL
				SELECT FM.FINID,
					FM.FINREFERENCE,
	                FT.FINTYPE,
	                FM.FINBRANCH,
	                FM.FINSTARTDATE,
	                FM.MATURITYDATE,
	                FM.FINCCY,
	                FM.SCHEDULEMETHOD,
	                FM.PROFITDAYSBASIS,
	                FM.FINISACTIVE,
	                CU.CUSTCIF,
					CU.CUSTSHRTNAME,
					FT.FINCATEGORY,
					RB.BRANCHDESC,
					FT.FINTYPEDESC,
					DS.VERSION,
					DS.LASTMNTBY,
					DS.LASTMNTON,
					DS.RECORDSTATUS,
					DS.ROLECODE,
					DS.NEXTROLECODE,
					DS.TASKID,
					DS.NEXTTASKID,
					DS.RECORDTYPE,
					DS.WORKFLOWID
				FROM FINANCEMAIN FM
                INNER JOIN CUSTOMERS CU ON CU.CUSTID = FM.CUSTID
                INNER JOIN RMTFINANCETYPES FT ON FT.FINTYPE = FM.FINTYPE
                INNER JOIN RMTBRANCHES RB ON RB.BRANCHCODE = FM.FINBRANCH
                LEFT JOIN (SELECT * FROM DOCUMENT_STATUS_TEMP UNION ALL SELECT * FROM DOCUMENT_STATUS WHERE NOT EXISTS(SELECT 1 FROM DOCUMENT_STATUS_TEMP WHERE ID=DOCUMENT_STATUS.ID)) DS ON DS.FINREFERENCE = FM.FINREFERENCE
				WHERE CU.CUSTID IN (SELECT CUSTID FROM CUSTOMERDOCUMENTS_TEMP UNION ALL SELECT CUSTID FROM CUSTOMERDOCUMENTS) OR FM.FINREFERENCE IN (SELECT REFERENCEID FROM DOCUMENTDETAILS_TEMP UNION ALL SELECT REFERENCEID FROM DOCUMENTDETAILS)
	       ]]>	
		</createView>
	</changeSet>

	<changeSet id="22_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'documentstatus_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="23_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'feewaiveruploadheader_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="23" author="Gopal.p">
		<createView viewName="FEEWAIVERUPLOADHEADER_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.UPLOADID,
					T1.FILELOCATION,
					T1.FILENAME,
					T1.TRANSACTIONDATE,
					T1.TOTALRECORDS,
					T1.SUCCESSCOUNT,
					T1.FAILEDCOUNT,
					T1.MODULE,
					T1.FILEDOWNLOAD,
					T1.APPROVEDDATE,
					T1.MAKERID,
					T1.APPROVERID,
					T2.USRLOGIN USERNAME,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM FEEWAIVERUPLOADHEADER_TEMP T1
				LEFT JOIN SECUSERS T2 ON T2.USRID = T1.LASTMNTBY
				UNION ALL
				SELECT T1.UPLOADID,
					T1.FILELOCATION,
					T1.FILENAME,
					T1.TRANSACTIONDATE,
					T1.TOTALRECORDS,
					T1.SUCCESSCOUNT,
					T1.FAILEDCOUNT,
					T1.MODULE,
					T1.FILEDOWNLOAD,
					T1.APPROVEDDATE,
					T1.MAKERID,
					T1.APPROVERID,
					T2.USRLOGIN USERNAME,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM FEEWAIVERUPLOADHEADER T1
				LEFT JOIN SECUSERS T2 ON T2.USRID = T1.LASTMNTBY
				WHERE NOT EXISTS (SELECT 1 FROM FEEWAIVERUPLOADHEADER_TEMP WHERE FEEWAIVERUPLOADHEADER_TEMP.UPLOADID = T1.UPLOADID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="23_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'feewaiveruploadheader_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="24_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'feewaiveruploadheader_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="24" author="Gopal.p">
		<createView viewName="FEEWAIVERUPLOADHEADER_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.UPLOADID,
					T1.FILELOCATION,
					T1.FILENAME,
					T1.TRANSACTIONDATE,
					T1.TOTALRECORDS,
					T1.SUCCESSCOUNT,
					T1.FAILEDCOUNT,
					T1.MODULE,
					T1.FILEDOWNLOAD,
					T1.APPROVEDDATE,
					T1.MAKERID,
					T1.APPROVERID,
					T2.USRLOGIN USERNAME,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM FEEWAIVERUPLOADHEADER_TEMP T1
				LEFT JOIN SECUSERS T2 ON T2.USRID = T1.LASTMNTBY
			]]>
		</createView>
	</changeSet>

	<changeSet id="24_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'feewaiveruploadheader_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="25_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'feewaiveruploadheader_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="25" author="Gopal.p">
		<createView viewName="FEEWAIVERUPLOADHEADER_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.UPLOADID,
					T1.FILELOCATION,
					T1.FILENAME,
					T1.TRANSACTIONDATE,
					T1.TOTALRECORDS,
					T1.SUCCESSCOUNT,
					T1.FAILEDCOUNT,
					T1.MODULE,
					T1.FILEDOWNLOAD,
					T1.APPROVEDDATE,
					T1.MAKERID,
					T1.APPROVERID,
					T2.USRLOGIN USERNAME,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM FEEWAIVERUPLOADHEADER T1
				LEFT JOIN SECUSERS T2 ON T2.USRID = T1.LASTMNTBY
			]]>
		</createView>
	</changeSet>

	<changeSet id="25_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'feewaiveruploadheader_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="26_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'feewaiveruploadheader_fwview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="26" author="Gopal.p">
		<createView viewName="FEEWAIVERUPLOADHEADER_FWVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT UPLOADID,
					FILENAME,
					MODULE,
					TRANSACTIONDATE
				FROM FEEWAIVERUPLOADHEADER_TEMP WHERE MODULE = 'FEEWAIVERUPLOAD'
				UNION ALL
				SELECT UPLOADID,
					FILENAME,
					MODULE,
					TRANSACTIONDATE
				FROM FEEWAIVERUPLOADHEADER
				WHERE FEEWAIVERUPLOADHEADER.MODULE = 'FEEWAIVERUPLOAD' AND NOT (EXISTS (SELECT 1
					FROM FEEWAIVERUPLOADHEADER_TEMP WHERE UPLOADID = FEEWAIVERUPLOADHEADER.UPLOADID))
			]]>
		</createView>
	</changeSet>

	<changeSet id="26_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'feewaiveruploadheader_fwview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="27_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'feewaiveruploads_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="27" author="Gopal.p">
		<createView viewName="FEEWAIVERUPLOADS_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.WAIVERID,
					T1.UPLOADID,
					T1.FINID,
					T1.FINREFERENCE,
					T1.FEETYPECODE,
					T1.VALUEDATE,
					T1.WAIVEDAMOUNT,
					T1.REMARKS,
					T1.STATUS,
					T1.REASON,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FEETYPEID,
					T1.REJECTSTAGE
				FROM FEEWAIVERUPLOADS T1
				LEFT JOIN FEETYPES T2 ON T2.FEETYPECODE = T1.FEETYPECODE
			]]>
		</createView>
	</changeSet>

	<changeSet id="27_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'feewaiveruploads_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="28_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'feewaiveruploads_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="28" author="Gopal.p">
		<createView viewName="FEEWAIVERUPLOADS_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.WAIVERID,
					T1.UPLOADID,
					T1.FINID,
					T1.FINREFERENCE,
					T1.FEETYPECODE,
					T1.VALUEDATE,
					T1.WAIVEDAMOUNT,
					T1.REMARKS,
					T1.STATUS,
					T1.REASON,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FEETYPEID,
					T1.REJECTSTAGE
				FROM FEEWAIVERUPLOADS_TEMP T1
				LEFT JOIN FEETYPES T2 ON T2.FEETYPECODE = T1.FEETYPECODE
			]]>
		</createView>
	</changeSet>

	<changeSet id="29_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'feewaiveruploads_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="30_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'feewaiveruploads_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="30" author="Gopal.p">
		<createView viewName="FEEWAIVERUPLOADS_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.WAIVERID,
					T1.UPLOADID,
					T1.FINID,
					T1.FINREFERENCE,
					T1.FEETYPECODE,
					T1.VALUEDATE,
					T1.WAIVEDAMOUNT,
					T1.REMARKS,
					T1.STATUS,
					T1.REASON,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FEETYPEID,
					T1.REJECTSTAGE
				FROM FEEWAIVERUPLOADS_TEMP T1
				LEFT JOIN FEETYPES T2 ON T2.FEETYPECODE = T1.FEETYPECODE
				UNION ALL
				SELECT T1.WAIVERID,
					T1.UPLOADID,
					T1.FINID,
					T1.FINREFERENCE,
					T1.FEETYPECODE,
					T1.VALUEDATE,
					T1.WAIVEDAMOUNT,
					T1.REMARKS,
					T1.STATUS,
					T1.REASON,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FEETYPEID,
					T1.REJECTSTAGE
				FROM FEEWAIVERUPLOADS T1
				LEFT JOIN FEETYPES T2 ON T2.FEETYPECODE = T1.FEETYPECODE
				WHERE NOT EXISTS (SELECT 1 FROM FEEWAIVERUPLOADS_TEMP WHERE FINID = T1.FINID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="30_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'feewaiveruploads_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="31_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'cibil_customer_loans_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="31" author="Gopal.p">
		<createView viewName="CIBIL_CUSTOMER_LOANS_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT AT.SEGMENT_TYPE,
					CU.CUSTID,
					AT.CODE FINTYPE,
					FM.FINID,
					FM.FINREFERENCE,
					FM.FINSTARTDATE,
					FM.FINAPPROVEDDATE,
					PD.LATESTRPYDATE,
					FM.REPAYFRQ,
					${add.schema}UDF_CONVERTCURRENCY(FM.FINASSETVALUE, FM.FINCCY, 'INR') FINASSETVALUE,
					PD.TOTALPFTPAID + PD.TOTALPRIPAID INSTALMENT_PAID,
					PD.CURODDAYS,
					PD.MATURITYDATE,
					PD.CURREDUCINGRATE,
					FM.CLOSINGSTATUS,
					CU.OWNERSHIP,
					FM.NUMBEROFTERMS,
					FM.FIRSTREPAY,
					FM.CLOSEDDATE
				FROM FINANCEMAIN FM
			    JOIN CIBIL_CUSTOMER_EXTRACT CU ON CU.FINID = FM.FINID
			    JOIN FINPFTDETAILS PD ON PD.FINID = FM.FINID
			    JOIN CIBIL_ACCOUNT_TYPES_MAPPING ATM ON ATM.FIN_TYPE = FM.FINTYPE
			    JOIN CIBIL_ACCOUNT_TYPES AT ON AT.CODE = ATM.CODE AND AT.SEGMENT_TYPE = ATM.SEGMENT_TYPE
			]]>	
		</createView>
	</changeSet>

	<changeSet id="31_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'cibil_customer_loans_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="32_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'fintaxdetail_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="32" author="Gopal.p">
		<createView viewName="FINTAXDETAIL_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINID,
					T1.FINREFERENCE,
					T1.APPLICABLEFOR,
					T1.TAXCUSTID,
					T1.TAXEXEMPTED,
					T1.TAXNUMBER,
					T1.ADDRLINE1,
					T1.ADDRLINE2,
					T1.ADDRLINE3,
					T1.ADDRLINE4,
					T1.COUNTRY,
					T1.PROVINCE,
					T1.CITY,
					T1.PINCODE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.COUNTRYDESC COUNTRYNAME,
					T3.CPPROVINCENAME PROVINCENAME,
					T4.PCCITYNAME CITYNAME,
					T5.AREANAME PINCODENAME,
					T6.CUSTCIF,
					T6.CUSTSHRTNAME,
					T1.SEZCERTIFICATENO,
					T1.SEZVALUEDATE,
					T1.ADDRESSDETAIL,
					T1.PINCODEID,
					T1.AVAILCUSTTAXNUM
				FROM FINTAXDETAIL T1
				LEFT JOIN BMTCOUNTRIES T2 ON T1.COUNTRY = T2.COUNTRYCODE
				LEFT JOIN RMTCOUNTRYVSPROVINCE T3 ON T1.PROVINCE = T3.CPPROVINCE AND T1.COUNTRY = T3.CPCOUNTRY
				LEFT JOIN RMTPROVINCEVSCITY T4 ON T1.CITY = T4.PCCITY AND T1.PROVINCE = T4.PCPROVINCE AND T1.COUNTRY = T4.PCCOUNTRY
				LEFT JOIN PINCODES T5 ON T1.PINCODEID = T5.PINCODEID AND T1.CITY = T5.CITY
				INNER JOIN CUSTOMERS T6 ON T1.TAXCUSTID = T6.CUSTID
			]]>
		</createView>
	</changeSet>

	<changeSet id="33_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'fintaxdetail_aview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="34_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'fintaxdetail_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="34" author="Gopal.p">
		<createView viewName="FINTAXDETAIL_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINID,
					T1.FINREFERENCE,
					T1.APPLICABLEFOR,
					T1.TAXCUSTID,
					T1.TAXEXEMPTED,
					T1.TAXNUMBER,
					T1.ADDRLINE1,
					T1.ADDRLINE2,
					T1.ADDRLINE3,
					T1.ADDRLINE4,
					T1.COUNTRY,
					T1.PROVINCE,
					T1.CITY,
					T1.PINCODE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.COUNTRYDESC COUNTRYNAME,
					T3.CPPROVINCENAME PROVINCENAME,
					T4.PCCITYNAME CITYNAME,
					T5.AREANAME PINCODENAME,
					T6.CUSTCIF,
					T6.CUSTSHRTNAME,
					T1.SEZCERTIFICATENO,
					T1.SEZVALUEDATE,
					T1.ADDRESSDETAIL,
					T1.PINCODEID,
					T1.AVAILCUSTTAXNUM
				FROM FINTAXDETAIL_TEMP T1
				LEFT JOIN BMTCOUNTRIES T2 ON T1.COUNTRY = T2.COUNTRYCODE
				LEFT JOIN RMTCOUNTRYVSPROVINCE T3 ON T1.PROVINCE = T3.CPPROVINCE AND T1.COUNTRY = T3.CPCOUNTRY
				LEFT JOIN RMTPROVINCEVSCITY T4 ON T1.CITY = T4.PCCITY AND T1.PROVINCE = T4.PCPROVINCE AND T1.COUNTRY = T4.PCCOUNTRY
				LEFT JOIN PINCODES T5 ON T1.PINCODEID = T5.PINCODEID AND T1.CITY = T5.CITY
				JOIN CUSTOMERS T6 ON T1.TAXCUSTID = T6.CUSTID
			]]>
		</createView>
	</changeSet>

	<changeSet id="34_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'fintaxdetail_tview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="35_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'fintaxdetail_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="35" author="Gopal.p">
		<createView viewName="FINTAXDETAIL_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINID,
					T1.FINREFERENCE,
					T1.APPLICABLEFOR,
					T1.TAXCUSTID,
					T1.TAXEXEMPTED,
					T1.TAXNUMBER,
					T1.ADDRLINE1,
					T1.ADDRLINE2,
					T1.ADDRLINE3,
					T1.ADDRLINE4,
					T1.COUNTRY,
					T1.PROVINCE,
					T1.CITY,
					T1.PINCODE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.COUNTRYDESC COUNTRYNAME,
					T3.CPPROVINCENAME PROVINCENAME,
					T4.PCCITYNAME CITYNAME,
					T5.AREANAME PINCODENAME,
					T6.CUSTCIF,
					T6.CUSTSHRTNAME,
					T1.SEZCERTIFICATENO,
					T1.SEZVALUEDATE,
					T1.ADDRESSDETAIL,
					T1.PINCODEID,
					T1.AVAILCUSTTAXNUM
				FROM FINTAXDETAIL_TEMP T1
				LEFT JOIN BMTCOUNTRIES T2 ON T2.COUNTRYCODE = T1.COUNTRY
				LEFT JOIN RMTCOUNTRYVSPROVINCE T3 ON T1.PROVINCE = T3.CPPROVINCE AND T1.COUNTRY = T3.CPCOUNTRY
				LEFT JOIN RMTPROVINCEVSCITY T4 ON T1.CITY = T4.PCCITY AND T1.PROVINCE = T4.PCPROVINCE AND T1.COUNTRY = T4.PCCOUNTRY
				LEFT JOIN PINCODES T5 ON T1.PINCODEID = T5.PINCODEID AND T1.CITY = T5.CITY
				JOIN CUSTOMERS T6 ON T1.TAXCUSTID = T6.CUSTID
				UNION ALL
				SELECT T1.FINID,
					T1.FINREFERENCE,
					T1.APPLICABLEFOR,
					T1.TAXCUSTID,
					T1.TAXEXEMPTED,
					T1.TAXNUMBER,
					T1.ADDRLINE1,
					T1.ADDRLINE2,
					T1.ADDRLINE3,
					T1.ADDRLINE4,
					T1.COUNTRY,
					T1.PROVINCE,
					T1.CITY,
					T1.PINCODE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.COUNTRYDESC COUNTRYNAME,
					T3.CPPROVINCENAME PROVINCENAME,
					T4.PCCITYNAME CITYNAME,
					T5.AREANAME PINCODENAME,
					T6.CUSTCIF,
					T6.CUSTSHRTNAME,
					T1.SEZCERTIFICATENO,
					T1.SEZVALUEDATE,
					T1.ADDRESSDETAIL,
					T1.PINCODEID,
					T1.AVAILCUSTTAXNUM
				FROM FINTAXDETAIL T1
				LEFT JOIN BMTCOUNTRIES T2 ON T2.COUNTRYCODE = T1.COUNTRY
				LEFT JOIN RMTCOUNTRYVSPROVINCE T3 ON T1.PROVINCE = T3.CPPROVINCE AND T1.COUNTRY = T3.CPCOUNTRY
				LEFT JOIN RMTPROVINCEVSCITY T4 ON T1.CITY = T4.PCCITY AND T1.PROVINCE = T4.PCPROVINCE AND T1.COUNTRY = T4.PCCOUNTRY
				LEFT JOIN PINCODES T5 ON T1.PINCODEID = T5.PINCODEID AND T1.CITY = T5.CITY
				JOIN CUSTOMERS T6 ON T1.TAXCUSTID = T6.CUSTID
				WHERE NOT EXISTS (SELECT 1 FROM FINTAXDETAIL_TEMP WHERE FINTAXDETAIL_TEMP.FINID = T1.FINID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="35_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'fintaxdetail_view');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="36_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'customers_aeview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="36" author="Gopal.p">
		<createView viewName="CUSTOMERS_AEVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.CUSTID,
				   T1.CUSTCIF,
				   T1.CUSTCOREBANK,
				   T1.CUSTCTGCODE,
				   T1.CUSTTYPECODE,
				   T1.CUSTSHRTNAME,
				   T1.CUSTFNAME,
				   T1.CUSTLNAME,
				   T1.CUSTDOB,
				   T1.CUSTNATIONALITY,
				   T1.CUSTSECTOR,
				   T1.CUSTSUBSECTOR,
				   T2.PHONENUMBER,
				   T2.PHONEAREACODE,
				   T2.PHONECOUNTRYCODE,
				   T1.CUSTCRCPR,
				   T1.CUSTPASSPORTNO,
				   T3.CUSTEMAIL EMAILID,
				   T1.CUSTADDLVAR82,
				   T4.CUSTTYPEDESC LOVDESCCUSTTYPECODENAME,
				   T1.CUSTBASECCY,
				   T4.CUSTTYPECTG LOVDESCCUSTCTGTYPE,
				   T5.CUSTCTGDESC LOVDESCCUSTCTGCODENAME,
				   T6.CUSTSTSDESCRIPTION LOVDESCCUSTSTSNAME,
				   T1.CUSTDFTBRANCH,
				   T7.BRANCHDESC LOVDESCCUSTDFTBRANCHNAME,
				   T1.SUBCATEGORY,
				   T1.CASTEID,
				   T1.RELIGIONID,
				   T8.CASTECODE,
				   T8.CASTEDESC,
				   T9.RELIGIONCODE,
				   T9.RELIGIONDESC,
				   COALESCE(T32.ROLEDESC, ${add.schema}FN_GET_ROLEDESC(T1.NEXTROLECODE)) LOVDESCREQUESTSTAGE,
				   T1.MARGINDEVIATION,
				   T1.OTHERCASTE,
				   T1.OTHERRELIGION,
				   T1.NATUREOFBUSINESS,
				   T1.ENTITYTYPE,
				   T1.CUSTRESIDENTIALSTS,
				   T1.QUALIFICATION,
				   T1.CUSTFLAG,
				   T1.VIP,
				   T12.NATIONALITYDESC LOVDESCCUSTNATIONALITYNAME
				FROM CUSTOMERS T1
				LEFT JOIN CUSTOMERPHONENUMBERS T2 ON T1.CUSTID = T2.PHONECUSTID AND T2.PHONETYPEPRIORITY = 5
				LEFT JOIN CUSTOMEREMAILS T3 ON T1.CUSTID = T3.CUSTID AND T3.CUSTEMAILTYPECODE  = 'OFFICE' 
				LEFT JOIN RMTCUSTTYPES T4 ON T1.CUSTTYPECODE  = T4.CUSTTYPECODE
				LEFT JOIN BMTCUSTCATEGORIES T5 ON T1.CUSTCTGCODE  = T5.CUSTCTGCODE
				LEFT JOIN BMTCUSTSTATUSCODES T6 ON T1.CUSTSTS  = T6.CUSTSTSCODE
				LEFT JOIN RMTBRANCHES T7 ON T1.CUSTDFTBRANCH  = T7.BRANCHCODE
				LEFT JOIN CASTE T8 ON T1.CASTEID = T8.CASTEID
				LEFT JOIN RELIGION T9 ON T1.RELIGIONID = T9.RELIGIONID
				LEFT JOIN SECROLES T32 ON T1.NEXTROLECODE  = T32.ROLECD
				LEFT JOIN BMTNATIONALITYCODES T12 ON T1.CUSTNATIONALITY = T12.NATIONALITYCODE
			]]>
		</createView>
	</changeSet>

	<changeSet id="36_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'customers_aeview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="37_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'customers_aeview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="37" author="Gopal.p">
		<createView viewName="CUSTOMERS_AEVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.CUSTID,
					T1.CUSTCIF,
					T1.CUSTCOREBANK,
					T1.CUSTCTGCODE,
					T1.CUSTTYPECODE,
					T1.CUSTSHRTNAME,
					T1.CUSTFNAME,
					T1.CUSTLNAME,
					T1.CUSTDOB,
					T1.CUSTNATIONALITY,
					T1.CUSTSECTOR,
					T1.CUSTSUBSECTOR,
					T2.PHONENUMBER,
					T2.PHONEAREACODE,
					T2.PHONECOUNTRYCODE,
					T1.CUSTCRCPR,
					T1.CUSTPASSPORTNO,
					T3.CUSTEMAIL EMAILID,
					T1.CUSTADDLVAR82,
					T4.CUSTTYPEDESC LOVDESCCUSTTYPECODENAME,
					T1.CUSTBASECCY,
					T4.CUSTTYPECTG LOVDESCCUSTCTGTYPE,
					T5.CUSTCTGDESC LOVDESCCUSTCTGCODENAME,
					T6.CUSTSTSDESCRIPTION LOVDESCCUSTSTSNAME,
					T1.CUSTDFTBRANCH,
					T7.BRANCHDESC LOVDESCCUSTDFTBRANCHNAME,
					T1.SUBCATEGORY,
					T1.CASTEID,
					T1.RELIGIONID,
					T8.CASTECODE,
					T8.CASTEDESC,
					T9.RELIGIONCODE,
					T9.RELIGIONDESC,
					COALESCE(T32.ROLEDESC,  ${add.schema}FN_GET_ROLEDESC(T1.NEXTROLECODE)) LOVDESCREQUESTSTAGE,
					T1.MARGINDEVIATION,
					T12.NATIONALITYDESC LOVDESCCUSTNATIONALITYNAME,
					CA.CUSTADDRCITY,
					CA.CUSTADDRPROVINCE,
					CA.CUSTADDRCOUNTRY,
					BC.COUNTRYDESC LOVDESCCUSTADDRCOUNTRY,
					RC.PCCITYNAME LOVDESCCUSTADDRCITY,
					RR.CPPROVINCENAME LOVDESCCUSTADDRPROVINCE
				FROM CUSTOMERS T1
				LEFT JOIN CUSTOMERPHONENUMBERS T2 ON T1.CUSTID = T2.PHONECUSTID AND T2.PHONETYPEPRIORITY = 5
				LEFT JOIN CUSTOMEREMAILS T3 ON T1.CUSTID = T3.CUSTID AND T3.CUSTEMAILTYPECODE = 'OFFICE'
				LEFT JOIN RMTCUSTTYPES T4 ON T1.CUSTTYPECODE = T4.CUSTTYPECODE
				LEFT JOIN BMTCUSTCATEGORIES T5 ON T1.CUSTCTGCODE = T5.CUSTCTGCODE
				LEFT JOIN BMTCUSTSTATUSCODES T6 ON T1.CUSTSTS = T6.CUSTSTSCODE
				LEFT JOIN RMTBRANCHES T7 ON T1.CUSTDFTBRANCH = T7.BRANCHCODE
				LEFT JOIN CASTE T8 ON T1.CASTEID = T8.CASTEID
				LEFT JOIN RELIGION T9 ON T1.RELIGIONID = T9.RELIGIONID
				LEFT JOIN SECROLES T32 ON T1.NEXTROLECODE = T32.ROLECD
				LEFT JOIN BMTNATIONALITYCODES T12 ON T1.CUSTNATIONALITY = T12.NATIONALITYCODE
				LEFT JOIN CUSTOMERADDRESSES CA ON CA.CUSTID = T1.CUSTID AND CA.CUSTADDRPRIORITY = 5
				LEFT JOIN BMTCOUNTRIES BC ON BC.COUNTRYCODE = CA.CUSTADDRCOUNTRY
				LEFT JOIN RMTProvinceVsCity RC ON RC.PCCITY = CA.CUSTADDRCITY
				LEFT JOIN RMTCountryVsProvince RR ON RR.CPPROVINCE = CA.CUSTADDRPROVINCE
			]]>
		</createView>
	</changeSet>

	<changeSet id="37_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'customers_aeview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="38_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'collateralassignment_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="38" author="Gopal.p">
		<createView viewName="COLLATERALASSIGNMENT_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT CA.MODULE,
				    CA.REFERENCE,
				    CA.COLLATERALREF,
				    CA.ASSIGNPERC,
				    CS.COLLATERALCCY,
				    CA.ACTIVE,
				    CA.HOSTREFERENCE,
				    CS.COLLATERALVALUE,
				    CS.BANKVALUATION,
				    T.TOTASSIGNPERC - CA.ASSIGNPERC TOTASSIGNPERC,
				    COALESCE(FM.FINCURRASSETVALUE - FM.DOWNPAYMENT + FM.FEECHARGEAMT - FM.FINREPAYMENTAMOUNT, CM.CMTUTILIZEDAMOUNT) UTILIZEDAMOUNT,
				    CA.VERSION,
				    CA.LASTMNTBY,
				    CA.LASTMNTON,
				    CA.RECORDSTATUS,
				    CA.ROLECODE,
				    CA.NEXTROLECODE,
				    CA.TASKID,
				    CA.NEXTTASKID,
				    CA.RECORDTYPE,
				    CA.WORKFLOWID,
				    CS.SPECIALLTV,
				    CS.BANKLTV,
				    CU.CUSTCIF DEPOSITORCIF,
				    CS.COLLATERALTYPE
				FROM COLLATERALASSIGNMENT CA
				INNER JOIN COLLATERALSETUP CS ON CA.COLLATERALREF = CS.COLLATERALREF
				INNER JOIN CUSTOMERS CU ON CU.CUSTID = CS.DEPOSITORID
				LEFT JOIN ( SELECT T1.COLLATERALREF, SUM(T1.ASSIGNPERC) TOTASSIGNPERC
				FROM ( SELECT COLLATERALASSIGNMENT_TEMP.REFERENCE, COLLATERALASSIGNMENT_TEMP.COLLATERALREF, COLLATERALASSIGNMENT_TEMP.ASSIGNPERC FROM COLLATERALASSIGNMENT_TEMP
				UNION ALL
				SELECT CA_1.REFERENCE, CA_1.COLLATERALREF, CA_1.ASSIGNPERC
				FROM COLLATERALASSIGNMENT CA_1 WHERE NOT EXISTS ( SELECT 1 FROM COLLATERALASSIGNMENT_TEMP 
				WHERE COLLATERALASSIGNMENT_TEMP.COLLATERALREF = CA_1.COLLATERALREF AND COLLATERALASSIGNMENT_TEMP.MODULE = CA_1.MODULE AND COLLATERALASSIGNMENT_TEMP.REFERENCE = CA_1.REFERENCE)) T1
				GROUP BY T1.COLLATERALREF) T ON T.COLLATERALREF = CA.COLLATERALREF
				LEFT JOIN FINANCEMAIN FM ON CA.REFERENCE = FM.FINREFERENCE
				LEFT JOIN COMMITMENTS CM ON CM.CMTREFERENCE = CA.REFERENCE
			]]>
		</createView>
	</changeSet>

	<changeSet id="38_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'collateralassignment_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="39_pre" author="Gopal.p" dbms="postgresql">
		<sql> 
			<![CDATA[ 
				select deps_save_and_drop_dependencies ('plf', 'collateralassignment_tview'); 
			]]>
		</sql>
	</changeSet>

	<changeSet id="39" author="Gopal.p">
		<createView viewName="COLLATERALASSIGNMENT_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT CA.MODULE,
					CA.REFERENCE,
					CA.COLLATERALREF,
					CA.ASSIGNPERC,
					CS.COLLATERALCCY,
					CA.ACTIVE,
					CA.HOSTREFERENCE,
					CS.COLLATERALVALUE,
					CS.BANKVALUATION,
					T.TOTASSIGNPERC - CA.ASSIGNPERC TOTASSIGNPERC,
					FM.FINCURRASSETVALUE - FM.DOWNPAYMENT + FM.FEECHARGEAMT - FM.FINREPAYMENTAMOUNT UTILIZEDAMOUNT,
					CA.VERSION,
					CA.LASTMNTBY,
					CA.LASTMNTON,
					CA.RECORDSTATUS,
					CA.ROLECODE,
					CA.NEXTROLECODE,
					CA.TASKID,
					CA.NEXTTASKID,
					CA.RECORDTYPE,
					CA.WORKFLOWID,
					CS.SPECIALLTV,
					CS.BANKLTV,
					CU.CUSTCIF AS DEPOSITORCIF,
					CS.COLLATERALTYPE
				FROM COLLATERALASSIGNMENT_TEMP CA
				INNER JOIN COLLATERALSETUP CS ON CA.COLLATERALREF = CS.COLLATERALREF
				INNER JOIN CUSTOMERS CU ON CU.CUSTID = CS.DEPOSITORID
				LEFT JOIN (SELECT T1.COLLATERALREF, SUM(T1.ASSIGNPERC) TOTASSIGNPERC FROM 
					(SELECT CAT.REFERENCE, CAT.COLLATERALREF, CAT.ASSIGNPERC FROM COLLATERALASSIGNMENT_TEMP CAT
					UNION ALL
					SELECT CA_1.REFERENCE, CA_1.COLLATERALREF, CA_1.ASSIGNPERC FROM COLLATERALASSIGNMENT CA_1
					WHERE NOT EXISTS (SELECT 1 FROM COLLATERALASSIGNMENT_TEMP
					WHERE COLLATERALASSIGNMENT_TEMP.COLLATERALREF = CA_1.COLLATERALREF AND COLLATERALASSIGNMENT_TEMP.MODULE = CA_1.MODULE 
					AND COLLATERALASSIGNMENT_TEMP.REFERENCE = CA_1.REFERENCE)) T1 GROUP BY T1.COLLATERALREF) T ON T.COLLATERALREF = CA.COLLATERALREF
				LEFT JOIN FINANCEMAIN_TEMP FM ON CA.REFERENCE = FM.FINREFERENCE
			]]>
		</createView>
	</changeSet>

	<changeSet id="39_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'collateralassignment_tview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="40_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'collateralassignment_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="40" author="Gopal.p">
		<createView viewName="COLLATERALASSIGNMENT_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT CA.MODULE,
				    CA.REFERENCE,
				    CA.COLLATERALREF,
				    CA.ASSIGNPERC,
				    CS.COLLATERALCCY,
				    CA.ACTIVE,
				    CA.HOSTREFERENCE,
				    CS.COLLATERALVALUE,
				    CS.BANKVALUATION,
				    T.TOTASSIGNPERC - CA.ASSIGNPERC TOTASSIGNPERC,
				    COALESCE(FM.FINCURRASSETVALUE - FM.DOWNPAYMENT + FM.FEECHARGEAMT - FM.FINREPAYMENTAMOUNT, CM.CMTUTILIZEDAMOUNT) UTILIZEDAMOUNT,
				    CA.VERSION,
				    CA.LASTMNTBY,
				    CA.LASTMNTON,
				    CA.RECORDSTATUS,
				    CA.ROLECODE,
				    CA.NEXTROLECODE,
				    CA.TASKID,
				    CA.NEXTTASKID,
				    CA.RECORDTYPE,
				    CA.WORKFLOWID,
				    CS.SPECIALLTV,
				    CS.BANKLTV,
				    CU.CUSTCIF DEPOSITORCIF,
				    CS.COLLATERALTYPE
				FROM COLLATERALASSIGNMENT_TEMP CA
				INNER JOIN COLLATERALSETUP CS ON CA.COLLATERALREF = CS.COLLATERALREF
				INNER JOIN CUSTOMERS CU ON CU.CUSTID = CS.DEPOSITORID
				LEFT JOIN ( SELECT T1.COLLATERALREF, SUM(T1.ASSIGNPERC) TOTASSIGNPERC
				FROM (SELECT COLLATERALASSIGNMENT_TEMP.REFERENCE, COLLATERALASSIGNMENT_TEMP.COLLATERALREF, COLLATERALASSIGNMENT_TEMP.ASSIGNPERC
						FROM COLLATERALASSIGNMENT_TEMP		
				       	UNION ALL
				        SELECT CA_1.REFERENCE, CA_1.COLLATERALREF, CA_1.ASSIGNPERC FROM COLLATERALASSIGNMENT CA_1
				        WHERE NOT EXISTS ( SELECT 1 FROM COLLATERALASSIGNMENT_TEMP
				        WHERE COLLATERALASSIGNMENT_TEMP.COLLATERALREF = CA_1.COLLATERALREF AND COLLATERALASSIGNMENT_TEMP.MODULE = CA_1.MODULE AND COLLATERALASSIGNMENT_TEMP.REFERENCE = CA_1.REFERENCE)) T1
				        GROUP BY T1.COLLATERALREF) T ON T.COLLATERALREF = CA.COLLATERALREF
				LEFT JOIN FINANCEMAIN_TEMP FM ON CA.REFERENCE = FM.FINREFERENCE
				LEFT JOIN COMMITMENTS_TEMP CM ON CM.CMTREFERENCE = CA.REFERENCE
				UNION ALL
				SELECT CA.MODULE,
					CA.REFERENCE,
					CA.COLLATERALREF,
					CA.ASSIGNPERC,
					CS.COLLATERALCCY,
					CA.ACTIVE,
					CA.HOSTREFERENCE,
					CS.COLLATERALVALUE,
					CS.BANKVALUATION,
					T.TOTASSIGNPERC - CA.ASSIGNPERC TOTASSIGNPERC,
					COALESCE(FM.FINCURRASSETVALUE - FM.DOWNPAYMENT + FM.FEECHARGEAMT - FM.FINREPAYMENTAMOUNT, CM.CMTUTILIZEDAMOUNT) UTILIZEDAMOUNT,
					CA.VERSION,
					CA.LASTMNTBY,
					CA.LASTMNTON,
					CA.RECORDSTATUS,
					CA.ROLECODE,
					CA.NEXTROLECODE,
					CA.TASKID,
					CA.NEXTTASKID,
					CA.RECORDTYPE,
					CA.WORKFLOWID,
					CS.SPECIALLTV,
					CS.BANKLTV,
				    CU.CUSTCIF DEPOSITORCIF,
				    CS.COLLATERALTYPE
				FROM COLLATERALASSIGNMENT CA
				INNER JOIN COLLATERALSETUP CS ON CA.COLLATERALREF = CS.COLLATERALREF
				INNER JOIN CUSTOMERS CU ON CU.CUSTID = CS.DEPOSITORID
				LEFT JOIN (SELECT T1.COLLATERALREF, SUM(T1.ASSIGNPERC) TOTASSIGNPERC 
					FROM ( SELECT COLLATERALASSIGNMENT_TEMP.REFERENCE, COLLATERALASSIGNMENT_TEMP.COLLATERALREF, COLLATERALASSIGNMENT_TEMP.ASSIGNPERC
				    FROM COLLATERALASSIGNMENT_TEMP
				    UNION ALL
				    SELECT CA_1.REFERENCE, CA_1.COLLATERALREF, CA_1.ASSIGNPERC
				    FROM COLLATERALASSIGNMENT CA_1
				    WHERE NOT EXISTS (SELECT 1 FROM COLLATERALASSIGNMENT_TEMP
				  	WHERE COLLATERALASSIGNMENT_TEMP.COLLATERALREF = CA_1.COLLATERALREF AND COLLATERALASSIGNMENT_TEMP.MODULE = CA_1.MODULE AND COLLATERALASSIGNMENT_TEMP.REFERENCE = CA_1.REFERENCE)) T1
					GROUP BY T1.COLLATERALREF) T ON T.COLLATERALREF = CA.COLLATERALREF
				LEFT JOIN FINANCEMAIN FM ON CA.REFERENCE = FM.FINREFERENCE
				LEFT JOIN COMMITMENTS CM ON CM.CMTREFERENCE = CA.REFERENCE
				WHERE NOT EXISTS ( SELECT 1 FROM COLLATERALASSIGNMENT_TEMP WHERE COLLATERALASSIGNMENT_TEMP.COLLATERALREF = CA.COLLATERALREF AND COLLATERALASSIGNMENT_TEMP.MODULE = CA.MODULE AND COLLATERALASSIGNMENT_TEMP.REFERENCE = CA.REFERENCE)						
			]]>
		</createView>
	</changeSet>

	<changeSet id="40_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'collateralassignment_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="41_pre" author="Gopal.p" dbms="postgresql">
		<sql> 
			<![CDATA[ 
				select deps_save_and_drop_dependencies ('plf', 'collateralassignment_ctview'); 
			]]>
		</sql>
	</changeSet>

	<changeSet id="41" author="Gopal.p">
		<createView viewName="COLLATERALASSIGNMENT_CTVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT CA.MODULE,
					CA.REFERENCE,
					CA.COLLATERALREF,
					CA.ASSIGNPERC,
					CS.COLLATERALCCY,
					CA.ACTIVE,
					CS.COLLATERALVALUE,
					CS.BANKVALUATION,
					T.TOTASSIGNPERC - CA.ASSIGNPERC TOTASSIGNPERC,
					FM.FINCURRASSETVALUE - FM.DOWNPAYMENT + FM.FEECHARGEAMT - FM.FINREPAYMENTAMOUNT UTILIZEDAMOUNT,
					CA.VERSION,
					CA.LASTMNTBY,
					CA.LASTMNTON,
					CA.RECORDSTATUS,
					CA.ROLECODE,
					CA.NEXTROLECODE,
					CA.TASKID,
					CA.NEXTTASKID,
					CA.RECORDTYPE,
					CA.WORKFLOWID,
					CS.SPECIALLTV,
					CS.BANKLTV,
					CA.HOSTREFERENCE,
					CU.CUSTCIF DEPOSITORCIF,
					CS.COLLATERALTYPE
				FROM COLLATERALASSIGNMENT_TEMP CA
				INNER JOIN COLLATERALSETUP_TEMP CS ON CA.COLLATERALREF= CS.COLLATERALREF
				INNER JOIN CUSTOMERS CU ON CU.CUSTID = CS.DEPOSITORID
				LEFT JOIN (SELECT T1.COLLATERALREF, SUM(T1.ASSIGNPERC) TOTASSIGNPERC FROM 
					(SELECT CAT.REFERENCE, CAT.COLLATERALREF, CAT.ASSIGNPERC FROM COLLATERALASSIGNMENT_TEMP CAT
					UNION ALL
					SELECT CA_1.REFERENCE, CA_1.COLLATERALREF, CA_1.ASSIGNPERC FROM COLLATERALASSIGNMENT CA_1
					WHERE NOT EXISTS (SELECT 1 FROM COLLATERALASSIGNMENT_TEMP
						WHERE COLLATERALASSIGNMENT_TEMP.COLLATERALREF = CA_1.COLLATERALREF AND COLLATERALASSIGNMENT_TEMP.MODULE = CA_1.MODULE 
							AND COLLATERALASSIGNMENT_TEMP.REFERENCE = CA_1.REFERENCE)) T1 GROUP BY T1.COLLATERALREF) T ON T.COLLATERALREF = CA.COLLATERALREF
				LEFT JOIN FINANCEMAIN_TEMP FM ON CA.REFERENCE = FM.FINREFERENCE
				]]>
		</createView>
	</changeSet>

	<changeSet id="41_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'collateralassignment_ctview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="42_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'wiffinancemain_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="42" author="Gopal.p">
		<createView viewName="WIFFINANCEMAIN_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINID,
					T1.FINREFERENCE,
					T1.NUMBEROFTERMS,
					T1.GRCPERIODENDDATE,
					T1.ALLOWGRCPERIOD,
					T1.GRACEBASERATE,
					T1.GRACESPECIALRATE,
					T1.GRCPFTRATE,
					T1.GRCPFTFRQ,
					T1.NEXTGRCPFTDATE,
					T1.ALLOWGRCPFTRVW,
					T1.GRCPFTRVWFRQ,
					T1.NEXTGRCPFTRVWDATE,
					T1.ALLOWGRCCPZ,
					T1.GRCCPZFRQ,
					T1.NEXTGRCCPZDATE,
					T1.REPAYBASERATE,
					T1.REPAYSPECIALRATE,
					T1.REPAYPROFITRATE,
					T1.REPAYFRQ,
					T1.NEXTREPAYDATE,
					T1.REPAYPFTFRQ,
					T1.NEXTREPAYPFTDATE,
					T1.ALLOWREPAYRVW,
					T1.REPAYRVWFRQ,
					T1.NEXTREPAYRVWDATE,
					T1.ALLOWREPAYCPZ,
					T1.REPAYCPZFRQ,
					T1.NEXTREPAYCPZDATE,
					T1.MATURITYDATE,
					T1.CPZATGRACEEND,
					T1.DOWNPAYMENT,
					T1.GRACEFLATAMOUNT,
					T1.REQREPAYAMOUNT,
					T1.TOTALPROFIT,
					T1.TOTALCPZ,
					T1.TOTALGROSSPFT,
					T1.TOTALGRACEPFT,
					T1.TOTALGRACECPZ,
					T1.GRCRATEBASIS,
					T1.REPAYRATEBASIS,
					T1.FINTYPE,
					T1.FINREMARKS,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.REQMATURITY,
					T1.CALTERMS,
					T1.CALMATURITY,
					T1.FIRSTREPAY,
					T1.LASTREPAY,
					T1.FINSTARTDATE,
					T1.FINAMOUNT,
					T1.FINREPAYMENTAMOUNT,
					T1.CUSTID,
					T1.DEFFERMENTS,
					T1.PLANDEFERCOUNT,
					T1.FINISACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T15.CUSTCIF LOVDESCCUSTCIF,
					T7.FINTYPEDESC LOVDESCFINTYPENAME,
					T1.FINBRANCH,
					T1.FINSOURCEID,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.ALLOWEDDEFFRQCHANGE,
					T1.AVAILEDDEFFRQCHANGE,
					T7.FINMAXAMOUNT LOVDESCFINMAXAMT,
					T7.FINMINAMOUNT LOVDESCFINMINAMOUNT,
					T7.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
					T1.MINDOWNPAYPERC,
					T7.FINISDWPAYREQUIRED LOVDESCDWNPAYREQ,
					T1.RECALTYPE,
					T1.FINASSETVALUE,
					T7.FINMAXDIFFERMENT LOVDESCFINMAXDIFFERMENT,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.LASTREPAYRVWDATE,
					T1.LASTREPAYCPZDATE,
					T1.ALLOWGRCREPAY,
					T1.GRCSCHDMTHD,
					T1.REPAYMARGIN,
					T1.GRCMARGIN,
					T1.FINCOMMITMENTREF,
					T1.FINCURRASSETVALUE,
					T1.FINCONTRACTDATE,
					T7.FINRVWRATEAPPLFOR,
					T1.TOTALREPAYAMT,
					T1.CLOSINGSTATUS,
					T1.FINAPPROVEDDATE,
					T1.FINREPAYPFTONFRQ,
					T1.ANUALIZEDPERCRATE,
					T1.EFFECTIVERATEOFRETURN,
					T1.DOWNPAYBANK,
					T1.DOWNPAYSUPL,
					T7.FINDIVISION LOVDESCFINDIVISIONNAME,
					T1.GRACETERMS,
					T14.FACILITYTYPE,
					T15.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
					T16.BRANCHDESC LOVDESCFINBRANCHNAME,
					T1.TOTALGROSSGRCPFT,
					T1.GRCPROFITDAYSBASIS,
					T1.STEPFINANCE,
					T1.STEPTYPE,
					T1.STEPPOLICY,
					T1.ALWMANUALSTEPS,
					T1.NOOFSTEPS,
					T1.LINKEDFINREF,
					T7.PRODUCT LOVDESCFINPRODUCT,
					T1.GRCMINRATE,
					T1.GRCMAXRATE,
					T1.RPYMINRATE,
					T1.RPYMAXRATE,
					T1.MANUALSCHEDULE,
					T1.TDSAPPLICABLE,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.CALROUNDINGMODE,
					T1.ALWMULTIDISB,
					T1.BPIAMOUNT,
					T1.DEDUCTFEEDISB,
					T1.FEECHARGEAMT,
					T1.RVWRATEAPPLFOR,
					T1.SCHCALONRVW,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.FINCATEGORY,
					T1.PRODUCTCATEGORY,
					T1.ROUNDINGTARGET,
					T1.GRCMAXAMOUNT,
					T1.ADVANCEEMI,
					T1.ADVEMITERMS,
					T1.BPIPFTDAYSBASIS,
					T1.FIXEDTENORRATE,
					T1.FIXEDRATETENOR,
					T1.GRCADVTYPE,
					T1.GRCADVTERMS,
					T1.ADVTYPE,
					T1.ADVTERMS,
					T1.ADVSTAGE,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING,
					T1.APPLIEDLOANAMT,
					T1.FINISRATERVWATGRCEND,
					T1.CBAMOUNT,
					T1.SVAMOUNT,
					T1.SANBSDSCHDLE,
					T1.PROMOTIONSEQID,
					T1.ALWGRCADJ,
					T1.PLANEMIHALWINGRACE,
					T1.ENDGRCPERIODAFTRFULLDISB,
					T1.AUTOINCGRCENDDATE,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS,
					T1.MANUALSCHDTYPE,
					T1.ISRA,
					T1.OVERDRAFTTXNCHRGREQ,
					T1.OVERDRAFTCALCCHRG,
					T1.OVERDRAFTCHRGAMTORPERC,
					T1.OVERDRAFTCHRCALON
				FROM WIFFINANCEMAIN_TEMP T1
				LEFT JOIN WIFINDICATIVETERMDETAIL_TEMP T14 ON T14.FINREFERENCE = T1.FINREFERENCE
				LEFT JOIN CUSTOMERS T15 ON T15.CUSTID = T1.CUSTID
				JOIN RMTFINANCETYPES T7 ON T1.FINTYPE = T7.FINTYPE
				LEFT JOIN RMTBRANCHES T16 ON T1.FINBRANCH = T16.BRANCHCODE
				UNION ALL
				SELECT T1.FINID,
					T1.FINREFERENCE,
					T1.NUMBEROFTERMS,
					T1.GRCPERIODENDDATE,
					T1.ALLOWGRCPERIOD,
					T1.GRACEBASERATE,
					T1.GRACESPECIALRATE,
					T1.GRCPFTRATE,
					T1.GRCPFTFRQ,
					T1.NEXTGRCPFTDATE,
					T1.ALLOWGRCPFTRVW,
					T1.GRCPFTRVWFRQ,
					T1.NEXTGRCPFTRVWDATE,
					T1.ALLOWGRCCPZ,
					T1.GRCCPZFRQ,
					T1.NEXTGRCCPZDATE,
					T1.REPAYBASERATE,
					T1.REPAYSPECIALRATE,
					T1.REPAYPROFITRATE,
					T1.REPAYFRQ,
					T1.NEXTREPAYDATE,
					T1.REPAYPFTFRQ,
					T1.NEXTREPAYPFTDATE,
					T1.ALLOWREPAYRVW,
					T1.REPAYRVWFRQ,
					T1.NEXTREPAYRVWDATE,
					T1.ALLOWREPAYCPZ,
					T1.REPAYCPZFRQ,
					T1.NEXTREPAYCPZDATE,
					T1.MATURITYDATE,
					T1.CPZATGRACEEND,
					T1.DOWNPAYMENT,
					T1.GRACEFLATAMOUNT,
					T1.REQREPAYAMOUNT,
					T1.TOTALPROFIT,
					T1.TOTALCPZ,
					T1.TOTALGROSSPFT,
					T1.TOTALGRACEPFT,
					T1.TOTALGRACECPZ,
					T1.GRCRATEBASIS,
					T1.REPAYRATEBASIS,
					T1.FINTYPE,
					T1.FINREMARKS,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.REQMATURITY,
					T1.CALTERMS,
					T1.CALMATURITY,
					T1.FIRSTREPAY,
					T1.LASTREPAY,
					T1.FINSTARTDATE,
					T1.FINAMOUNT,
					T1.FINREPAYMENTAMOUNT,
					T1.CUSTID,
					T1.DEFFERMENTS,
					T1.PLANDEFERCOUNT,
					T1.FINISACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T15.CUSTCIF LOVDESCCUSTCIF,
					T7.FINTYPEDESC LOVDESCFINTYPENAME,
					T1.FINBRANCH,
					T1.FINSOURCEID,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.ALLOWEDDEFFRQCHANGE,
					T1.AVAILEDDEFFRQCHANGE,
					T7.FINMAXAMOUNT LOVDESCFINMAXAMT,
					T7.FINMINAMOUNT LOVDESCFINMINAMOUNT,
					T7.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
					T1.MINDOWNPAYPERC,
					T7.FINISDWPAYREQUIRED LOVDESCDWNPAYREQ,
					T1.RECALTYPE,
					T1.FINASSETVALUE,
					T7.FINMAXDIFFERMENT LOVDESCFINMAXDIFFERMENT,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.LASTREPAYRVWDATE,
					T1.LASTREPAYCPZDATE,
					T1.ALLOWGRCREPAY,
					T1.GRCSCHDMTHD,
					T1.REPAYMARGIN,
					T1.GRCMARGIN,
					T1.FINCOMMITMENTREF,
					T1.FINCURRASSETVALUE,
					T1.FINCONTRACTDATE,
					T7.FINRVWRATEAPPLFOR,
					T1.TOTALREPAYAMT,
					T1.CLOSINGSTATUS,
					T1.FINAPPROVEDDATE,
					T1.FINREPAYPFTONFRQ,
					T1.ANUALIZEDPERCRATE,
					T1.EFFECTIVERATEOFRETURN,
					T1.DOWNPAYBANK,
					T1.DOWNPAYSUPL,
					T7.FINDIVISION LOVDESCFINDIVISIONNAME,
					T1.GRACETERMS,
					T14.FACILITYTYPE,
					T15.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
					T16.BRANCHDESC LOVDESCFINBRANCHNAME,
					T1.TOTALGROSSGRCPFT,
					T1.GRCPROFITDAYSBASIS,
					T1.STEPFINANCE,
					T1.STEPTYPE,
					T1.STEPPOLICY,
					T1.ALWMANUALSTEPS,
					T1.NOOFSTEPS,
					T1.LINKEDFINREF,
					T7.PRODUCT LOVDESCFINPRODUCT,
					T1.GRCMINRATE,
					T1.GRCMAXRATE,
					T1.RPYMINRATE,
					T1.RPYMAXRATE,
					T1.MANUALSCHEDULE,
					T1.TDSAPPLICABLE,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.CALROUNDINGMODE,
					T1.ALWMULTIDISB,
					T1.BPIAMOUNT,
					T1.DEDUCTFEEDISB,
					T1.FEECHARGEAMT,
					T1.RVWRATEAPPLFOR,
					T1.SCHCALONRVW,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.FINCATEGORY,
					T1.PRODUCTCATEGORY,
					T1.ROUNDINGTARGET,
					T1.GRCMAXAMOUNT,
					T1.ADVANCEEMI,
					T1.ADVEMITERMS,
					T1.BPIPFTDAYSBASIS,
					T1.FIXEDTENORRATE,
					T1.FIXEDRATETENOR,
					T1.GRCADVTYPE,
					T1.GRCADVTERMS,
					T1.ADVTYPE,
					T1.ADVTERMS,
					T1.ADVSTAGE,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING,
					T1.APPLIEDLOANAMT,
					T1.FINISRATERVWATGRCEND,
					T1.CBAMOUNT,
					T1.SVAMOUNT,
					T1.SANBSDSCHDLE,
					T1.PROMOTIONSEQID,
					T1.ALWGRCADJ,
					T1.PLANEMIHALWINGRACE,
					T1.ENDGRCPERIODAFTRFULLDISB,
					T1.AUTOINCGRCENDDATE,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS,
					T1.MANUALSCHDTYPE,
					T1.ISRA,
					T1.OVERDRAFTTXNCHRGREQ,
					T1.OVERDRAFTCALCCHRG,
					T1.OVERDRAFTCHRGAMTORPERC,
					T1.OVERDRAFTCHRCALON
				FROM WIFFINANCEMAIN T1
				LEFT JOIN WIFINDICATIVETERMDETAIL_TEMP T14 ON T14.FINREFERENCE = T1.FINREFERENCE
				LEFT JOIN CUSTOMERS T15 ON T15.CUSTID = T1.CUSTID
				JOIN RMTFINANCETYPES T7 ON T1.FINTYPE = T7.FINTYPE
				LEFT JOIN RMTBRANCHES T16 ON T1.FINBRANCH = T16.BRANCHCODE
				WHERE NOT EXISTS (SELECT 1 FROM WIFFINANCEMAIN_TEMP WHERE WIFFINANCEMAIN_TEMP.FINREFERENCE = T1.FINREFERENCE)
			]]>
		</createView>
	</changeSet>

	<changeSet id="42_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'wiffinancemain_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="43_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'wiffinancemain_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="43" author="Gopal.p">
		<createView viewName="WIFFINANCEMAIN_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINID,
					T1.FINREFERENCE,
					T1.NUMBEROFTERMS,
					T1.GRCPERIODENDDATE,
					T1.ALLOWGRCPERIOD,
					T1.GRACEBASERATE,
					T1.GRACESPECIALRATE,
					T1.GRCPFTRATE,
					T1.GRCPFTFRQ,
					T1.NEXTGRCPFTDATE,
					T1.ALLOWGRCPFTRVW,
					T1.GRCPFTRVWFRQ,
					T1.NEXTGRCPFTRVWDATE,
					T1.ALLOWGRCCPZ,
					T1.GRCCPZFRQ,
					T1.NEXTGRCCPZDATE,
					T1.REPAYBASERATE,
					T1.REPAYSPECIALRATE,
					T1.REPAYPROFITRATE,
					T1.REPAYFRQ,
					T1.NEXTREPAYDATE,
					T1.REPAYPFTFRQ,
					T1.NEXTREPAYPFTDATE,
					T1.ALLOWREPAYRVW,
					T1.REPAYRVWFRQ,
					T1.NEXTREPAYRVWDATE,
					T1.ALLOWREPAYCPZ,
					T1.REPAYCPZFRQ,
					T1.NEXTREPAYCPZDATE,
					T1.MATURITYDATE,
					T1.CPZATGRACEEND,
					T1.DOWNPAYMENT,
					T1.GRACEFLATAMOUNT,
					T1.REQREPAYAMOUNT,
					T1.TOTALPROFIT,
					T1.TOTALCPZ,
					T1.TOTALGROSSPFT,
					T1.TOTALGRACEPFT,
					T1.TOTALGRACECPZ,
					T1.GRCRATEBASIS,
					T1.REPAYRATEBASIS,
					T1.FINTYPE,
					T1.FINREMARKS,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.REQMATURITY,
					T1.CALTERMS,
					T1.CALMATURITY,
					T1.FIRSTREPAY,
					T1.LASTREPAY,
					T1.FINSTARTDATE,
					T1.FINAMOUNT,
					T1.FINREPAYMENTAMOUNT,
					T1.CUSTID,
					T1.DEFFERMENTS,
					T1.PLANDEFERCOUNT,
					T1.FINISACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T15.CUSTCIF LOVDESCCUSTCIF,
					T7.FINTYPEDESC LOVDESCFINTYPENAME,
					T1.FINBRANCH,
					T1.FINSOURCEID,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.ALLOWEDDEFFRQCHANGE,
					T1.AVAILEDDEFFRQCHANGE,
					T7.FINMAXAMOUNT LOVDESCFINMAXAMT,
					T7.FINMINAMOUNT LOVDESCFINMINAMOUNT,
					T7.FINISALWDIFFERMENT  LOVDESCFINALWDEFERMENT,
					T1.MINDOWNPAYPERC,
					T7.FINISDWPAYREQUIRED LOVDESCDWNPAYREQ,
					T1.RECALTYPE,
					T1.FINASSETVALUE,
					T7.FINMAXDIFFERMENT LOVDESCFINMAXDIFFERMENT,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.LASTREPAYRVWDATE,
					T1.LASTREPAYCPZDATE,
					T1.ALLOWGRCREPAY,
					T1.GRCSCHDMTHD,
					T1.REPAYMARGIN,
					T1.GRCMARGIN,
					T1.FINCOMMITMENTREF,
					T1.FINCURRASSETVALUE,
					T1.FINCONTRACTDATE,
					T7.FINRVWRATEAPPLFOR,
					T1.TOTALREPAYAMT,
					T1.CLOSINGSTATUS,
					T1.FINAPPROVEDDATE,
					T1.FINREPAYPFTONFRQ,
					T1.ANUALIZEDPERCRATE,
					T1.EFFECTIVERATEOFRETURN,
					T1.DOWNPAYBANK,
					T1.DOWNPAYSUPL,
					T7.FINDIVISION LOVDESCFINDIVISIONNAME,
					T1.GRACETERMS,
					T14.FACILITYTYPE,
					T15.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
					T16.BRANCHDESC LOVDESCFINBRANCHNAME,
					T1.TOTALGROSSGRCPFT,
					T1.GRCPROFITDAYSBASIS,
					T1.STEPFINANCE,
					T1.STEPTYPE,
					T1.STEPPOLICY,
					T1.ALWMANUALSTEPS,
					T1.NOOFSTEPS,
					T1.LINKEDFINREF,
					T7.PRODUCT LOVDESCFINPRODUCT,
					T1.GRCMINRATE,
					T1.GRCMAXRATE,
					T1.RPYMINRATE,
					T1.RPYMAXRATE,
					T1.MANUALSCHEDULE,
					T1.TDSAPPLICABLE,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.CALROUNDINGMODE,
					T1.ALWMULTIDISB,
					T1.BPIAMOUNT,
					T1.DEDUCTFEEDISB,
					T1.FEECHARGEAMT,
					T1.RVWRATEAPPLFOR,
					T1.SCHCALONRVW,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.ROUNDINGTARGET,
					T1.GRCMAXAMOUNT,
					T1.ADVANCEEMI,
					T1.ADVEMITERMS,
					T1.BPIPFTDAYSBASIS BPIRATEBASIS,
					T1.GRCADVTYPE,
					T1.GRCADVTERMS,
					T1.ADVTYPE,
					T1.ADVTERMS,
					T1.ADVSTAGE,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING,
					T1.APPLIEDLOANAMT,
					T1.FINISRATERVWATGRCEND,
					T1.CBAMOUNT,
					T1.SVAMOUNT,
					T1.SANBSDSCHDLE,
					T1.PROMOTIONSEQID,
					T1.ALWGRCADJ,
					T1.PLANEMIHALWINGRACE,
					T1.ENDGRCPERIODAFTRFULLDISB,
					T1.AUTOINCGRCENDDATE,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS,
					T1.MANUALSCHDTYPE,
					T1.ISRA,
					T1.OVERDRAFTTXNCHRGREQ,
					T1.OVERDRAFTCALCCHRG,
					T1.OVERDRAFTCHRGAMTORPERC,
					T1.OVERDRAFTCHRCALON
				FROM WIFFINANCEMAIN T1
				LEFT JOIN WIFINDICATIVETERMDETAIL_TEMP T14 ON T14.FINREFERENCE = T1.FINREFERENCE
				LEFT JOIN CUSTOMERS T15 ON T15.CUSTID = T1.CUSTID
				INNER JOIN RMTFINANCETYPES T7 ON T1.FINTYPE = T7.FINTYPE
				LEFT JOIN RMTBRANCHES T16 ON T1.FINBRANCH = T16.BRANCHCODE
			]]>
		</createView>
	</changeSet>

	<changeSet id="43_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'wiffinancemain_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="44_pre" author="Gopal.p" dbms="postgresql">
		<sql> 
		<![CDATA[ 
			select deps_save_and_drop_dependencies ('plf', 'financemaintenance_view'); 
		]]>
		</sql>
	</changeSet>

	<changeSet id="44" author="Gopal.p">
		<createView viewName="FINANCEMAINTENANCE_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINID,
					T1.FINREFERENCE,
					T1.FINBRANCH,
					T1.FINTYPE,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.FINSTARTDATE,
					T1.NUMBEROFTERMS,
					T1.CUSTID,
					T1.FINAMOUNT,
					T1.MATURITYDATE,
					T1.FINREPAYMENTAMOUNT,
					T1.FINISACTIVE,
					T1.BLACKLISTED,
					T1.FEECHARGEAMT,
					T1.GRACETERMS,
					T1.ALLOWGRCPERIOD,
					T1.GRCPERIODENDDATE,
					T1.ALWMULTIDISB,
					T1.DEFFERMENTS,
					T1.NEXTROLECODE,
					T1.RECORDSTATUS,
					T1.RECORDTYPE,
					T1.ALLOWGRCPFTRVW,
					T1.ALLOWREPAYRVW,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.RCDMAINTAINSTS,
					T1.MIGRATEDFINANCE,
					T1.CLOSINGSTATUS,
					T1.REPAYRATEBASIS,
					T1.MANUALSCHEDULE,
					T1.FINCURRASSETVALUE,
					T1.AVAILEDUNPLANEMI,
					T1.AVAILEDREAGEH,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.DOWNPAYMENT,
					T1.PLANEMIHALW,
					T1.CALTERMS,
					T1.RATECHGANYDAY,
					T1.FINASSETVALUE,
					T2.CUSTCIF LOVDESCCUSTCIF,
					T2.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
					T3.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
					T3.FINDIVISION LOVDESCFINDIVISION,
					T3.FINCATEGORY LOVDESCPRODUCTCODENAME,
					T4.PRODUCTCATEGORY,
					COALESCE(T5.ROLEDESC,  ${ADD.SCHEMA}FN_GET_ROLEDESC(T1.NEXTROLECODE)) LOVDESCREQUESTSTAGE,
					COALESCE(T9.NOINST, 0) NOINST,
					T1.SAMPLINGREQUIRED,
					T1.ADVEMITERMS,
					T1.SANBSDSCHDLE,
					T1.PROMOTIONSEQID,
					T1.SVAMOUNT,
					T1.CBAMOUNT,
					T1.REPAYPFTFRQ,
					T1.VERSION,
					T1.TOTALCPZ,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.MANUALSCHDTYPE,
					T1.ISRA,
					T1.SANCTIONEDDATE,
					T1.OVERDRAFTTXNCHRGREQ,
					T1.OVERDRAFTCALCCHRG,
					T1.OVERDRAFTCHRGAMTORPERC,
					T1.OVERDRAFTCHRCALON,
					T1.STEPFINANCE,
					T1.CALCOFSTEPS
				FROM FINANCEMAIN_TEMP T1
				INNER JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
				INNER JOIN RMTFINANCETYPES T3 ON T1.FINTYPE = T3.FINTYPE
				LEFT JOIN SECROLES T5 ON T1.NEXTROLECODE = T5.ROLECD
				INNER JOIN BMTPRODUCT T4 ON T3.FINCATEGORY = T4.PRODUCTCODE
				LEFT JOIN FINPFTDETAILS T9 ON T1.FINREFERENCE = T9.FINREFERENCE
				UNION ALL
				SELECT T1.FINID,
					T1.FINREFERENCE,
					T1.FINBRANCH,
					T1.FINTYPE,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.FINSTARTDATE,
					T1.NUMBEROFTERMS,
					T1.CUSTID,
					T1.FINAMOUNT,
					T1.MATURITYDATE,
					T1.FINREPAYMENTAMOUNT,
					T1.FINISACTIVE,
					T1.BLACKLISTED,
					T1.FEECHARGEAMT,
					T1.GRACETERMS,
					T1.ALLOWGRCPERIOD,
					T1.GRCPERIODENDDATE,
					T1.ALWMULTIDISB,
					T1.DEFFERMENTS,
					T1.NEXTROLECODE,
					T1.RECORDSTATUS,
					T1.RECORDTYPE,
					T1.ALLOWGRCPFTRVW,
					T1.ALLOWREPAYRVW,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.RCDMAINTAINSTS,
					T1.MIGRATEDFINANCE,
					T1.CLOSINGSTATUS,
					T1.REPAYRATEBASIS,
					T1.MANUALSCHEDULE,
					T1.FINCURRASSETVALUE,
					T1.AVAILEDUNPLANEMI,
					T1.AVAILEDREAGEH,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.DOWNPAYMENT,
					T1.PLANEMIHALW,
					T1.CALTERMS,
					T1.RATECHGANYDAY,
					T1.FINASSETVALUE,
					T2.CUSTCIF LOVDESCCUSTCIF,
					T2.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
					T3.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
					T3.FINDIVISION LOVDESCFINDIVISION,
					T3.FINCATEGORY LOVDESCPRODUCTCODENAME,
					T4.PRODUCTCATEGORY,
					COALESCE(T5.ROLEDESC,  ${ADD.SCHEMA}FN_GET_ROLEDESC(T1.NEXTROLECODE)) LOVDESCREQUESTSTAGE,
					COALESCE(T9.NOINST, 0) NOINST,
					T1.SAMPLINGREQUIRED,
					T1.ADVEMITERMS,
					T1.SANBSDSCHDLE,
					T1.PROMOTIONSEQID,
					T1.SVAMOUNT,
					T1.CBAMOUNT,
					T1.REPAYPFTFRQ,
					T1.VERSION,
					T1.TOTALCPZ,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.MANUALSCHDTYPE,
					T1.ISRA,
					T1.SANCTIONEDDATE,
					T1.OVERDRAFTTXNCHRGREQ,
					T1.OVERDRAFTCALCCHRG,
					T1.OVERDRAFTCHRGAMTORPERC,
					T1.OVERDRAFTCHRCALON,
					T1.STEPFINANCE,
					T1.CALCOFSTEPS
				FROM FINANCEMAIN T1
				INNER JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
				INNER JOIN RMTFINANCETYPES T3 ON T1.FINTYPE = T3.FINTYPE
				LEFT JOIN SECROLES T5 ON T1.NEXTROLECODE = T5.ROLECD
				INNER JOIN BMTPRODUCT T4 ON T3.FINCATEGORY = T4.PRODUCTCODE
				LEFT JOIN FINPFTDETAILS T9 ON T1.FINID = T9.FINID
				WHERE NOT EXISTS (SELECT 1 FROM FINANCEMAIN_TEMP WHERE FINANCEMAIN_TEMP.FINID = T1.FINID)
			  ]]>
		</createView>
	</changeSet>

	<changeSet id="44_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemaintenance_view');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="45_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'receiptdetails_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="45" author="Gopal.p">
		<createView viewName="RECEIPTDETAILS_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T4.CUSTCIF,
					T3.FINID,
					T1.REFERENCE,
					T3.FINTYPE,
					T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTAMOUNT,
					T1.BANKCODE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.BOUNCEDATE CANCELDATE,
					T2.PAYAGAINSTID,
					T1.BOUNCEDATE,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					T3.CLOSINGSTATUS,
					T3.FINBRANCH,
					T3.FINCURRASSETVALUE,
					T3.PRODUCTCATEGORY,
					T6.PARTNERBANKCODE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T5.ROLEDESC LOVDESCREQUESTSTAGE,
					T1.RECEIPTMODE PAYMENTTYPE,
					T1.RECEIPTMODESTATUS,
					T1.ACTFINRECEIPT,
					T1.REFWAIVERAMT,
					T1.SOURCE,
					T1.VALUEDATE,
					T1.TRANSACTIONREF,
					T1.DEPOSITDATE,
					T1.PARTNERBANKID FUNDINGAC,
					T1.PRVRECEIPTPURPOSE,
					T1.RECEIPTSOURCE,
					T1.RECAPPDATE,
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.MODULETYPE
				FROM FINRECEIPTHEADER_TEMP T1
				LEFT JOIN FINRECEIPTDETAIL_TEMP T2 ON T1.RECEIPTID = T2.RECEIPTID
				LEFT JOIN FINANCEMAIN T3 ON T1.FINID = T3.FINID
				LEFT JOIN CUSTOMERS T4 ON T3.CUSTID = T4.CUSTID
				JOIN SECROLES T5 ON T1.NEXTROLECODE = T5.ROLECD
				LEFT JOIN PARTNERBANKS T6 ON T6.PARTNERBANKID = T2.FUNDINGAC	  
			]]>
		</createView>
	</changeSet>

	<changeSet id="45_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'receiptdetails_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="46_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="46" author="Gopal.p">
		<createView viewName="FINRECEIPTHEADER_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.RECAGAINST,
					T2.FINID,
					T1.REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.EXTREFERENCE,
					T1.MODULE,
					T1.RECEIPTMODESTATUS,
					T1.SUBRECEIPTMODE,
					T1.RECEIPTCHANNEL,
					T1.RECEIVEDFROM,
					T1.PANNUMBER,
					T1.COLLECTIONAGENTID,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINTYPE,
					T2.FINBRANCH,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					T2.FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					T4.FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					T5.CCYDESC FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					T2.FINISACTIVE,
					T1.WAVIEDAMT,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T2.NEXTREPAYRVWDATE,
					T1.CASHIERBRANCH,
					T1.INITIATEDATE,
					T1.INSTRUCTIONUID,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T1.ACTFINRECEIPT,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE, 
					T1.TRANSACTIONREF,               
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPEID,
	      			T13.CODE CLOSURETYPEDESC,
					T1.RECADJAMT,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE
				FROM FINRECEIPTHEADER T1
				INNER JOIN FINANCEMAIN T2 ON T1.FINID = T2.FINID
				INNER JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				INNER JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				INNER JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				INNER JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CLOSURE_TYPES	T13 ON T13.ID = T1.CLOSURETYPEID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
			]]>
		</createView>
	</changeSet>

	<changeSet id="46_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="47_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_dview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="47" author="Gopal.p">
		<createView viewName="FINRECEIPTHEADER_DVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.RECEIPTID,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.REMARKS,
					T1.DEPOSITBRANCH,
					T1.RECEIPTAMOUNT AMOUNT,
					T3.FINID,
					T3.FINREFERENCE,
					T4.CUSTSHRTNAME,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID FUNDINGAC,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPEID,
	      			T13.CODE CLOSURETYPEDESC,
					T1.RECADJAMT,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE
				FROM FINRECEIPTHEADER_TEMP T1
				INNER JOIN FINANCEMAIN T3 ON T1.FINID = T3.FINID
				INNER JOIN CUSTOMERS T4 ON T3.CUSTID = T4.CUSTID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH   = T12.BRANCHCODE
				LEFT JOIN CLOSURE_TYPES	T13 ON T13.ID = T1.CLOSURETYPEID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				WHERE T1.RECEIPTMODE IN ('CHEQUE', 'DD') AND T1.DEPOSITPROCESS = 1
					AND T1.RECEIPTID NOT IN (SELECT RECEIPTID FROM DEPOSITCHEQUES_TEMP )
				UNION ALL
				SELECT T1.RECEIPTID,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.REMARKS,
					T1.DEPOSITBRANCH,
					T1.RECEIPTAMOUNT AMOUNT,
					T3.FINID,
					T3.FINREFERENCE,
					T4.CUSTSHRTNAME,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID FUNDINGAC,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPEID,
	      			T13.CODE CLOSURETYPEDESC,
					T1.RECADJAMT,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE
				FROM FINRECEIPTHEADER T1
				INNER JOIN FINANCEMAIN T3 ON T1.FINID = T3.FINID
				INNER JOIN CUSTOMERS T4 ON T3.CUSTID = T4.CUSTID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CLOSURE_TYPES	T13 ON T13.ID = T1.CLOSURETYPEID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				WHERE NOT EXISTS (SELECT 1 FROM FINRECEIPTHEADER_TEMP 
					WHERE RECEIPTID = T1.RECEIPTID ) AND T1.RECEIPTMODE   IN ('CHEQUE', 'DD')
					AND T1.DEPOSITPROCESS = 1 AND T1.RECEIPTID NOT IN
					(SELECT RECEIPTID FROM DEPOSITCHEQUES_TEMP)
			]]>
		</createView>
	</changeSet>

	<changeSet id="47_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader_dview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="48_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_fcdview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="48" author="Gopal.p">
		<createView viewName="FINRECEIPTHEADER_FCDVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.RECAGAINST,
					T2.FINID,
					(CASE WHEN T1.RECAGAINST ='C' THEN T13.CUSTCIF
						ELSE T1.REFERENCE END) REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.RECEIPTMODESTATUS,
					T1.SUBRECEIPTMODE,
					T1.RECEIPTCHANNEL,
					T1.RECEIVEDFROM,
					T1.PANNUMBER,
					T1.COLLECTIONAGENTID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINTYPE,
					T2.FINBRANCH,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					T2.FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					T4.FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					T5.CCYDESC FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
					T2.SCHEDULEMETHOD,
					T2.PROFITDAYSBASIS PFTDAYSBASIS,
					T1.WAVIEDAMT,
					COALESCE(T3.CUSTID, 0) CUSTID,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T2.NEXTREPAYRVWDATE,
					T1.CASHIERBRANCH,
					T1.INITIATEDATE,
					T1.INSTRUCTIONUID,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.MODULE,
					T1.EXTREFERENCE,
					T13.CUSTCIF CUSTOMERCIF,
					T13.CUSTSHRTNAME CUSTOMERNAME,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPEID,
	      			T14.CODE CLOSURETYPEDESC,
					T1.RECADJAMT,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE
				FROM FINRECEIPTHEADER_TEMP T1
				LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.FINID = T2.FINID
				LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
				LEFT JOIN CLOSURE_TYPES	T14 ON T14.ID = T1.CLOSURETYPEID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				UNION ALL
				SELECT T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.RECAGAINST,
					T2.FINID,
					( CASE WHEN T1.RECAGAINST ='C' THEN T13.CUSTCIF
						ELSE T1.REFERENCE END) REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.RECEIPTMODESTATUS,
					T1.SUBRECEIPTMODE,
					T1.RECEIPTCHANNEL,
					T1.RECEIVEDFROM,
					T1.PANNUMBER,
					T1.COLLECTIONAGENTID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINTYPE,
					T2.FINBRANCH,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					T2.FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					T4.FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					T5.CCYDESC FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
					T2.SCHEDULEMETHOD,
					T2.PROFITDAYSBASIS PFTDAYSBASIS,
					T1.WAVIEDAMT,
					COALESCE(T3.CUSTID, 0) CUSTID,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T2.NEXTREPAYRVWDATE,
					T1.CASHIERBRANCH,
					T1.INITIATEDATE,
					T1.INSTRUCTIONUID,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.MODULE,
					T1.EXTREFERENCE,
					T13.CUSTCIF CUSTOMERCIF,
					T13.CUSTSHRTNAME CUSTOMERNAME,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPEID,
	      			T14.CODE CLOSURETYPEDESC,
					T1.RECADJAMT,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE
				FROM FINRECEIPTHEADER T1
				LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.FINID = T2.FINID
				LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
				LEFT JOIN CLOSURE_TYPES	T14 ON T14.ID = T1.CLOSURETYPEID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				WHERE NOT EXISTS ( SELECT 1 FROM FINRECEIPTHEADER_TEMP WHERE RECEIPTID = T1.RECEIPTID )
			]]>
		</createView>
	</changeSet>

	<changeSet id="48_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader_fcdview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="49_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_fcview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="49" author="Gopal.p">
		<createView viewName="FINRECEIPTHEADER_FCVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.RECAGAINST,
					T2.FINID,
					T1.REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.RECEIPTMODESTATUS,
					T1.SUBRECEIPTMODE,
					T1.RECEIPTCHANNEL,
					T1.RECEIVEDFROM,
					T1.PANNUMBER,
					T1.COLLECTIONAGENTID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINTYPE,
					T2.FINBRANCH,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					T2.FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					T4.FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					T5.CCYDESC FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
					T2.SCHEDULEMETHOD,
					T2.PROFITDAYSBASIS PFTDAYSBASIS,
					T1.WAVIEDAMT,
					COALESCE(T3.CUSTID, 0) CUSTID,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T2.NEXTREPAYRVWDATE,
					T1.CASHIERBRANCH,
					T1.INITIATEDATE,
					T1.INSTRUCTIONUID,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.MODULE,
					T1.EXTREFERENCE,
					T13.CUSTCIF CUSTOMERCIF,
					T13.CUSTSHRTNAME CUSTOMERNAME,
					T1.ACTFINRECEIPT,
					T1.REASONCODE,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPEID,
	      			T14.CODE CLOSURETYPEDESC,
					T1.RECADJAMT,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE
				FROM FINRECEIPTHEADER_TEMP T1
				LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.FINID = T2.FINID
				LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
				LEFT JOIN CLOSURE_TYPES	T14 ON T14.ID = T1.CLOSURETYPEID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				UNION ALL
				SELECT
					T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.RECAGAINST,
					T2.FINID,
					T1.REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.RECEIPTMODESTATUS,
					T1.SUBRECEIPTMODE,
					T1.RECEIPTCHANNEL,
					T1.RECEIVEDFROM,
					T1.PANNUMBER,
					T1.COLLECTIONAGENTID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINTYPE,
					T2.FINBRANCH,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					T2.FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					T4.FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					T5.CCYDESC FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
					T2.SCHEDULEMETHOD,
					T2.PROFITDAYSBASIS PFTDAYSBASIS,
					T1.WAVIEDAMT,
					COALESCE(T3.CUSTID, 0) CUSTID,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T2.NEXTREPAYRVWDATE,
					T1.CASHIERBRANCH,
					T1.INITIATEDATE,
					T1.INSTRUCTIONUID,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.MODULE,
					T1.EXTREFERENCE,
					T13.CUSTCIF CUSTOMERCIF,
					T13.CUSTSHRTNAME CUSTOMERNAME,
					T1.ACTFINRECEIPT,
					T1.REASONCODE,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPEID,
	      			T14.CODE CLOSURETYPEDESC,
					T1.RECADJAMT,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE
				FROM FINRECEIPTHEADER T1
				LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.FINID = T2.FINID
				LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
				LEFT JOIN CLOSURE_TYPES	T14 ON T14.ID = T1.CLOSURETYPEID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				WHERE NOT EXISTS ( SELECT 1 FROM FINRECEIPTHEADER_TEMP WHERE RECEIPTID = T1.RECEIPTID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="49_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader_fcview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="50_pre" author="Gopsl.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_fdview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="50" author="Gopal.p">
		<createView viewName="FINRECEIPTHEADER_FDVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.RECAGAINST,
					T2.FINID,
					CASE WHEN T1.RECAGAINST = 'C' THEN T10.CUSTCIF
						ELSE T1.REFERENCE END REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.RECEIPTMODESTATUS,
					T1.SUBRECEIPTMODE,
					T1.RECEIPTCHANNEL,
					T1.RECEIVEDFROM,
					T1.PANNUMBER,
					T1.COLLECTIONAGENTID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					COALESCE(T2.FINTYPE,T1.FINTYPE) FINTYPE,
					T2.FINBRANCH,
					COALESCE(T3.CUSTCIF,T10.CUSTCIF) CUSTCIF,
					COALESCE(T3.CUSTSHRTNAME,T10.CUSTSHRTNAME) CUSTSHRTNAME,
					COALESCE(T2.FINCCY,T14.FINCCY) FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					COALESCE(T4.FINTYPEDESC,T14.FINTYPEDESC) FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					COALESCE(T5.CCYDESC,T15.CCYDESC) FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
					T2.SCHEDULEMETHOD,
					T2.PROFITDAYSBASIS PFTDAYSBASIS,
					T1.WAVIEDAMT,
					COALESCE(T3.CUSTID, T10.CUSTID) CUSTID,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T1.CASHIERBRANCH,
					T2.NEXTREPAYRVWDATE,
					T1.INITIATEDATE,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.MODULE,
					T1.EXTREFERENCE,
					T10.CUSTCIF CUSTOMERCIF,
					T10.CUSTSHRTNAME CUSTOMERNAME,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T11.DIVISIONCODEDESC FINDIVISIONDESC,
					T12.BRANCHDESC POSTBRANCHDESC,
					T13.BRANCHDESC CASHIERBRANCHDESC,
					T11.ENTITYCODE,
					T1.INSTRUCTIONUID,
					T1.ACTFINRECEIPT,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPEID,
	      			T16.CODE CLOSURETYPEDESC,
					T1.RECADJAMT,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE
				FROM FINRECEIPTHEADER_TEMP T1
				LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.FINID = T2.FINID
				LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN CUSTOMERS T10 ON CAST(T10.CUSTID AS VARCHAR(20)) = T1.REFERENCE
				LEFT JOIN SMTDIVISIONDETAIL T11 ON T1.FINDIVISION = T11.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.POSTBRANCH = T12.BRANCHCODE
				LEFT JOIN RMTBRANCHES T13 ON T1.CASHIERBRANCH = T13.BRANCHCODE
				LEFT JOIN RMTFINANCETYPES T14 ON T1.FINTYPE = T14.FINTYPE
				LEFT JOIN RMTCURRENCIES T15 ON T14.FINCCY= T15.CCYCODE
				LEFT JOIN CLOSURE_TYPES	T16 ON T16.ID = T1.CLOSURETYPEID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
			]]>
		</createView>
	</changeSet>

	<changeSet id="50_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader_fdview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="51_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_fedview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="51" author="Gopal.p">
		<createView viewName="FINRECEIPTHEADER_FEDVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.RECAGAINST,
					T2.FINID,
					CASE WHEN T1.RECAGAINST ='C' THEN T13.CUSTCIF
						ELSE T1.REFERENCE END REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.RECEIPTMODESTATUS,
					T1.SUBRECEIPTMODE,
					T1.RECEIPTCHANNEL,
					T1.RECEIVEDFROM,
					T1.PANNUMBER,
					T1.COLLECTIONAGENTID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINBRANCH,
					COALESCE(T3.CUSTCIF, T13.CUSTCIF) CUSTCIF,
					COALESCE(T3.CUSTSHRTNAME,T13.CUSTSHRTNAME) CUSTSHRTNAME,
					T2.FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					COALESCE(T2.FINTYPE, T1.FINTYPE) FINTYPE,
					COALESCE(T4.FINTYPEDESC, T14.FINTYPEDESC) FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					T5.CCYDESC FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
					T2.SCHEDULEMETHOD,
					T2.PROFITDAYSBASIS PFTDAYSBASIS,
					T1.WAVIEDAMT,
					COALESCE(T3.CUSTID, 0) CUSTID,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T2.NEXTREPAYRVWDATE,
					T1.CASHIERBRANCH,
					T1.INITIATEDATE,
					T1.INSTRUCTIONUID,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.MODULE,
					T1.EXTREFERENCE,
					T13.CUSTCIF CUSTOMERCIF,
					T13.CUSTSHRTNAME CUSTOMERNAME,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPEID,
	      			T15.CODE CLOSURETYPEDESC,
					T1.RECADJAMT,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE
				FROM FINRECEIPTHEADER_TEMP T1
				LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.FINID = T2.FINID
				LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
				LEFT JOIN RMTFINANCETYPES T14 ON T1.FINTYPE = T14.FINTYPE
				LEFT JOIN CLOSURE_TYPES	T15 ON T15.ID = T1.CLOSURETYPEID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				UNION ALL
				SELECT T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.RECAGAINST,
					T2.FINID,
					(CASE WHEN T1.RECAGAINST ='C' THEN T13.CUSTCIF
						ELSE T1.REFERENCE END) REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.RECEIPTMODESTATUS,
					T1.SUBRECEIPTMODE,
					T1.RECEIPTCHANNEL,
					T1.RECEIVEDFROM,
					T1.PANNUMBER,
					T1.COLLECTIONAGENTID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINBRANCH,
					COALESCE(T3.CUSTCIF,T13.CUSTCIF) CUSTCIF,
					COALESCE(T3.CUSTSHRTNAME,T13.CUSTSHRTNAME) CUSTSHRTNAME,
					T2.FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					COALESCE(T2.FINTYPE, T1.FINTYPE) FINTYPE,
					COALESCE(T4.FINTYPEDESC, T14.FINTYPEDESC) FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					T5.CCYDESC FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
					T2.SCHEDULEMETHOD,
					T2.PROFITDAYSBASIS PFTDAYSBASIS,
					T1.WAVIEDAMT,
					COALESCE(T3.CUSTID, 0) CUSTID,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T2.NEXTREPAYRVWDATE,
					T1.CASHIERBRANCH,
					T1.INITIATEDATE,
					T1.INSTRUCTIONUID,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.MODULE,
					T1.EXTREFERENCE,
					T13.CUSTCIF CUSTOMERCIF,
					T13.CUSTSHRTNAME CUSTOMERNAME,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPEID,
	      			T15.CODE CLOSURETYPEDESC,
					T1.RECADJAMT,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE
				FROM FINRECEIPTHEADER T1
				LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.FINID = T2.FINID
				LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
				LEFT JOIN RMTFINANCETYPES T14 ON T1.FINTYPE = T14.FINTYPE
				LEFT JOIN CLOSURE_TYPES	T15 ON T15.ID = T1.CLOSURETYPEID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				WHERE NOT EXISTS ( SELECT 1 FROM FINRECEIPTHEADER_TEMP WHERE RECEIPTID = T1.RECEIPTID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="51_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader_fedview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="52_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_feview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="52" author="Gopal.p">
		<createView viewName="FINRECEIPTHEADER_FEVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.RECAGAINST,
					T2.FINID,
					T1.REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.RECEIPTMODESTATUS,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINTYPE,
					T2.FINBRANCH,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					T2.FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					T4.FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					T5.CCYDESC FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
					T2.SCHEDULEMETHOD,
					T2.PROFITDAYSBASIS PFTDAYSBASIS,
					T1.WAVIEDAMT,
					COALESCE(T3.CUSTID, 0) CUSTID,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T2.NEXTREPAYRVWDATE,
					T1.CASHIERBRANCH,
					T1.INITIATEDATE,
					T4.FINDIVISION LOVDESCFINDIVISION,
					T2.BUSINESSVERTICAL,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.INSTRUCTIONUID,
					T1.MODULE,
					T1.EXTREFERENCE,
					T1.COLLECTIONAGENTID,
					T1.PANNUMBER,
					T1.RECEIVEDFROM,
					T1.RECEIPTCHANNEL,
					T1.SUBRECEIPTMODE,
					T13.CUSTCIF CUSTOMERCIF,
					T13.CUSTSHRTNAME CUSTOMERNAME,
					T1.ACTFINRECEIPT,
					T1.REASONCODE,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPEID,
	      			T14.CODE CLOSURETYPEDESC,
				    T1.RECADJAMT,
				    T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE
				FROM FINRECEIPTHEADER_TEMP T1
				LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.FINID = T2.FINID
				LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
				LEFT JOIN CLOSURE_TYPES	T14 ON T14.ID = T1.CLOSURETYPEID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				UNION ALL
				SELECT T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.RECAGAINST,
					T2.FINID,
					T1.REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.RECEIPTMODESTATUS,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINTYPE,
					T2.FINBRANCH,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					T2.FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					T4.FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					T5.CCYDESC FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
					T2.SCHEDULEMETHOD,
					T2.PROFITDAYSBASIS PFTDAYSBASIS,
					T1.WAVIEDAMT,
					COALESCE(T3.CUSTID, 0) CUSTID,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T2.NEXTREPAYRVWDATE,
					T1.CASHIERBRANCH,
					T1.INITIATEDATE,
					T4.FINDIVISION LOVDESCFINDIVISION,
					T2.BUSINESSVERTICAL,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.INSTRUCTIONUID,
					T1.MODULE,
					T1.EXTREFERENCE,
					T1.COLLECTIONAGENTID,
					T1.PANNUMBER,
					T1.RECEIVEDFROM,
					T1.RECEIPTCHANNEL,
					T1.SUBRECEIPTMODE,
					T13.CUSTCIF CUSTOMERCIF,
					T13.CUSTSHRTNAME CUSTOMERNAME,
					T1.ACTFINRECEIPT,
					T1.REASONCODE,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPEID,
	      			T14.CODE CLOSURETYPEDESC,
				    T1.RECADJAMT,
				    T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE
					FROM FINRECEIPTHEADER T1
					LEFT JOIN (SELECT FINID, FINREFERENCE, FINBRANCH, FINTYPE
							, FINCCY, SCHEDULEMETHOD, PROFITDAYSBASIS, FINISACTIVE
							, CUSTID, PRODUCTCATEGORY, PROMOTIONCODE, NEXTREPAYRVWDATE
							, BUSINESSVERTICAL
						FROM FINANCEMAIN_TEMP
						UNION
						SELECT FINID, FINREFERENCE, FINBRANCH, FINTYPE, FINCCY
							, SCHEDULEMETHOD, PROFITDAYSBASIS, FINISACTIVE
							, CUSTID, PRODUCTCATEGORY, PROMOTIONCODE, NEXTREPAYRVWDATE
							, BUSINESSVERTICAL
						FROM FINANCEMAIN ) T2 ON T1.FINID = T2.FINID
				LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
				LEFT JOIN CLOSURE_TYPES	T14 ON T14.ID = T1.CLOSURETYPEID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				WHERE NOT EXISTS ( SELECT 1 FROM FINRECEIPTHEADER_TEMP WHERE RECEIPTID = T1.RECEIPTID )
			]]>
		</createView>
	</changeSet>

	<changeSet id="52_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader_feview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="53_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_fview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="53" author="Gopal.p">
		<createView viewName="FINRECEIPTHEADER_FVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.ACTFINRECEIPT,
					T1.RECAGAINST,
					T2.FINID,
					T1.REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.RECEIPTMODESTATUS,
					T1.SUBRECEIPTMODE,
					T1.RECEIPTCHANNEL,
					T1.RECEIVEDFROM,
					T1.PANNUMBER,
					T1.COLLECTIONAGENTID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					COALESCE(T1.FINTYPE, T2.FINTYPE) FINTYPE,
					T2.FINBRANCH,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					COALESCE(T2.FINCCY, T15.FINCCY) FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					COALESCE(T4.FINTYPEDESC, T15.FINTYPEDESC) FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					COALESCE(T5.CCYDESC, T14.CCYDESC) FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
					T2.SCHEDULEMETHOD,
					T2.PROFITDAYSBASIS PFTDAYSBASIS,
					T1.WAVIEDAMT,
					COALESCE(T3.CUSTID, T10.CUSTID, 0) CUSTID,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T1.CASHIERBRANCH,
					T2.NEXTREPAYRVWDATE,
					T1.INITIATEDATE,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.MODULE,
					T1.INSTRUCTIONUID,
					T1.EXTREFERENCE,
					T10.CUSTCIF CUSTOMERCIF,
					T10.CUSTSHRTNAME CUSTOMERNAME,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T11.DIVISIONCODEDESC FINDIVISIONDESC,
					T12.BRANCHDESC POSTBRANCHDESC,
					T13.BRANCHDESC CASHIERBRANCHDESC,
					T11.ENTITYCODE,
					COALESCE(T3.CUSTBASECCY,T10.CUSTBASECCY)CUSTBASECCY,
					T1.REASONCODE,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T2.TDSAPPLICABLE FINTDSAPPLICABLE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPEID,
	      			T16.CODE CLOSURETYPEDESC,
				    T1.RECADJAMT,
				    T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE
				FROM FINRECEIPTHEADER_TEMP T1
				LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.FINID = T2.FINID
				LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN Customers T10 ON CAST(T10.CustId AS VARCHAR(20)) = T1.REFERENCE
				LEFT JOIN SMTDIVISIONDETAIL T11 ON T1.FINDIVISION = T11.DIVISIONCODE
				LEFT JOIN RMTBranches T12 ON T1.PostBranch = T12.BranchCode
				LEFT JOIN RMTBranches T13 ON T1.CASHIERBRANCH = T13.BranchCode
				LEFT JOIN RMTFINANCETYPES T15 ON T1.FINTYPE = T15.FINTYPE
				LEFT JOIN RMTCURRENCIES T14 ON T14.CCYCODE= T3.CUSTBASECCY
				LEFT JOIN CLOSURE_TYPES	T16 ON T16.ID = T1.CLOSURETYPEID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
			]]>
		</createView>
	</changeSet>

	<changeSet id="53_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader_fview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="54_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="54" author="Gopal.p">
		<createView viewName="FINRECEIPTHEADER_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.RECAGAINST,
					T2.FINID,
					T1.REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.EXTREFERENCE,
					T1.MODULE,
					T1.RECEIPTMODESTATUS,
					T1.SUBRECEIPTMODE,
					T1.RECEIPTCHANNEL,
					T1.RECEIVEDFROM,
					T1.PANNUMBER,
					T1.COLLECTIONAGENTID,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINTYPE,
					T2.FINBRANCH,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					T2.FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					T4.FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					T5.CCYDESC FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					T2.FINISACTIVE,
					T1.WAVIEDAMT,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T2.NEXTREPAYRVWDATE,
					T1.CASHIERBRANCH,
					T1.INITIATEDATE,
					T1.INSTRUCTIONUID,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T1.ACTFINRECEIPT,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPEID,
	      			T14.CODE CLOSURETYPEDESC,
				    T1.RECADJAMT,
				    T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE
				FROM FINRECEIPTHEADER_TEMP T1
				INNER JOIN FINANCEMAIN T2 ON T1.FINID = T2.FINID
				INNER JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				INNER JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				INNER JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				INNER JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CLOSURE_TYPES	T14 ON T14.ID = T1.CLOSURETYPEID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
			]]>
		</createView>
	</changeSet>

	<changeSet id="54_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="55.1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="55.1" author="Gopal.p">
		<createView viewName="FINRECEIPTHEADER_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.RECEIPTID,
				    T1.RECEIPTDATE,
				    T1.RECEIPTTYPE,
				    T1.RECAGAINST,
					T2.FINID,
				    T1.REFERENCE,
				    T1.RECEIPTPURPOSE,
				    T1.RECEIPTMODE,
				    T1.EXCESSADJUSTTO,
				    T1.ALLOCATIONTYPE,
				    T1.RECEIPTAMOUNT,
				    T1.EFFECTSCHDMETHOD,
				    T1.EXTREFERENCE,
				    T1.MODULE,
				    T1.RECEIPTMODESTATUS,
				    T1.SUBRECEIPTMODE,
				    T1.RECEIPTCHANNEL,
				    T1.RECEIVEDFROM,
				    T1.PANNUMBER,
				    T1.COLLECTIONAGENTID,
				    T9.CODE COLLECTIONAGENTCODE,
				    T9.DESCRIPTION COLLECTIONAGENTDESC,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T2.FINTYPE,
				    T2.FINBRANCH,
				    T3.CUSTCIF,
				    T3.CUSTSHRTNAME,
				    T2.FINCCY,
				    T1.REALIZATIONDATE,
				    T1.CANCELREASON,
				    T4.FINTYPEDESC,
				    T6.BRANCHDESC FINBRANCHDESC,
				    T5.CCYDESC FINCCYDESC,
				    T7.REJECTDESC CANCELREASONDESC,
				    T2.FINISACTIVE,
				    T1.WAVIEDAMT,
				    T1.TOTFEEAMOUNT,
				    T1.BOUNCEDATE,
				    T1.REMARKS,
				    T1.RCDMAINTAINSTS,
				    T1.GDRAVAILABLE,
				    T1.RELEASETYPE,
				    T1.THIRDPARTYNAME,
				    T1.THIRDPARTYMOBILENUM,
				    T1.DEPOSITPROCESS,
				    T1.DEPOSITBRANCH,
				    T1.LPIAMOUNT,
				    T1.LPPAMOUNT,
				    T1.GSTLPIAMOUNT,
				    T1.GSTLPPAMOUNT,
				    T2.PRODUCTCATEGORY,
				    T2.PROMOTIONCODE,
				    T2.NEXTREPAYRVWDATE,
				    T1.CASHIERBRANCH,
				    T1.INITIATEDATE,
				    T1.INSTRUCTIONUID,
				    T1.FINDIVISION,
				    T1.POSTBRANCH,
				    T10.DIVISIONCODEDESC FINDIVISIONDESC,
				    T11.BRANCHDESC POSTBRANCHDESC,
				    T12.BRANCHDESC CASHIERBRANCHDESC,
				    T10.ENTITYCODE,
				    T1.ACTFINRECEIPT,
					T1.REASONCODE,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPEID,
	      			T13.CODE CLOSURETYPEDESC,
				    T1.RECADJAMT,
				    T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE,
					T2.SCHEDULEMETHOD,
                    T2.PROFITDAYSBASIS  PFTDAYSBASIS
				FROM FINRECEIPTHEADER_TEMP T1
				JOIN FINANCEMAIN T2 ON T1.FINID = T2.FINID
				JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CLOSURE_TYPES	T13 ON T13.ID = T1.CLOSURETYPEID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				UNION ALL
				SELECT T1.RECEIPTID,
				    T1.RECEIPTDATE,
				    T1.RECEIPTTYPE,
				    T1.RECAGAINST,
					T2.FINID,
				    T1.REFERENCE,
				    T1.RECEIPTPURPOSE,
				    T1.RECEIPTMODE,
				    T1.EXCESSADJUSTTO,
				    T1.ALLOCATIONTYPE,
				    T1.RECEIPTAMOUNT,
				    T1.EFFECTSCHDMETHOD,
				    T1.EXTREFERENCE,
				    T1.MODULE,
				    T1.RECEIPTMODESTATUS,
				    T1.SUBRECEIPTMODE,
				    T1.RECEIPTCHANNEL,
				    T1.RECEIVEDFROM,
				    T1.PANNUMBER,
				    T1.COLLECTIONAGENTID,
				    T9.CODE COLLECTIONAGENTCODE,
				    T9.DESCRIPTION COLLECTIONAGENTDESC,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T2.FINTYPE,
				    T2.FINBRANCH,
				    T3.CUSTCIF,
				    T3.CUSTSHRTNAME,
				    T2.FINCCY,
				    T1.REALIZATIONDATE,
				    T1.CANCELREASON,
				    T4.FINTYPEDESC,
				    T6.BRANCHDESC FINBRANCHDESC,
				    T5.CCYDESC FINCCYDESC,
				    T7.REJECTDESC CANCELREASONDESC,
				    T2.FINISACTIVE,
				    T1.WAVIEDAMT,
				    T1.TOTFEEAMOUNT,
				    T1.BOUNCEDATE,
				    T1.REMARKS,
				    T1.RCDMAINTAINSTS,
				    T1.GDRAVAILABLE,
				    T1.RELEASETYPE,
				    T1.THIRDPARTYNAME,
				    T1.THIRDPARTYMOBILENUM,
				    T1.DEPOSITPROCESS,
				    T1.DEPOSITBRANCH,
				    T1.LPIAMOUNT,
				    T1.LPPAMOUNT,
				    T1.GSTLPIAMOUNT,
				    T1.GSTLPPAMOUNT,
				    T2.PRODUCTCATEGORY,
				    T2.PROMOTIONCODE,
				    T2.NEXTREPAYRVWDATE,
				    T1.CASHIERBRANCH,
				    T1.INITIATEDATE,
				    T1.INSTRUCTIONUID,
				    T1.FINDIVISION,
				    T1.POSTBRANCH,
				    T10.DIVISIONCODEDESC FINDIVISIONDESC,
				    T11.BRANCHDESC POSTBRANCHDESC,
				    T12.BRANCHDESC CASHIERBRANCHDESC,
				    T10.ENTITYCODE,
				    T1.ACTFINRECEIPT,
					T1.REASONCODE,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPEID,
	      			T13.CODE CLOSURETYPEDESC,
				    T1.RECADJAMT,
				    T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE,
					T2.SCHEDULEMETHOD,
                    T2.PROFITDAYSBASIS  PFTDAYSBASIS
				FROM FINRECEIPTHEADER T1
				JOIN FINANCEMAIN T2 ON T1.FINID = T2.FINID
				JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CLOSURE_TYPES	T13 ON T13.ID = T1.CLOSURETYPEID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				WHERE NOT (EXISTS ( SELECT 1 FROM FINRECEIPTHEADER_TEMP WHERE FINRECEIPTHEADER_TEMP.RECEIPTID = T1.RECEIPTID))
			]]>
		</createView>
	</changeSet>

	<changeSet id="55.1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="56_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'receiptdetails_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="56" author="Gopal.p">
		<createView viewName="RECEIPTDETAILS_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T4.CUSTCIF,
					T3.FINID,
					T1.REFERENCE,
					T3.FINTYPE,
					T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTAMOUNT,
					T1.BANKCODE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.BOUNCEDATE CANCELDATE,
					T2.PAYAGAINSTID,
					T1.BOUNCEDATE,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					T3.CLOSINGSTATUS,
					T3.FINBRANCH,
					T3.FINCURRASSETVALUE,
					T3.PRODUCTCATEGORY,
					T6.PARTNERBANKCODE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T5.ROLEDESC LOVDESCREQUESTSTAGE,
					T1.RECEIPTMODE PAYMENTTYPE,
					T1.RECEIPTMODESTATUS,
					T1.ACTFINRECEIPT,
					T1.REFWAIVERAMT,
					T1.SOURCE,
					T1.VALUEDATE,
					T1.TRANSACTIONREF,
					T1.DEPOSITDATE,
					T1.PARTNERBANKID FUNDINGAC,
					T1.PRVRECEIPTPURPOSE,
					T1.RECEIPTSOURCE,
					T1.RECAPPDATE,
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					TX.RECEIPTSEQID,
					T1.DEPOSITPROCESS,
					T2.STATUS
				FROM FINRECEIPTHEADER_TEMP T1
				JOIN (SELECT MAX(FINRECEIPTDETAIL_TEMP.RECEIPTSEQID) RECEIPTSEQID, FINRECEIPTDETAIL_TEMP.RECEIPTID
					FROM FINRECEIPTDETAIL_TEMP GROUP BY FINRECEIPTDETAIL_TEMP.RECEIPTID) TX ON TX.RECEIPTID = T1.RECEIPTID
				LEFT JOIN FINRECEIPTDETAIL_TEMP T2 ON T1.RECEIPTID = T2.RECEIPTID AND T2.RECEIPTSEQID = TX.RECEIPTSEQID
				LEFT JOIN FINANCEMAIN T3 ON T1.FINID = T3.FINID
				LEFT JOIN CUSTOMERS T4 ON T3.CUSTID = T4.CUSTID
				JOIN SECROLES T5 ON T1.NEXTROLECODE = T5.ROLECD
				LEFT JOIN PARTNERBANKS T6 ON T6.PARTNERBANKID = T2.FUNDINGAC
				UNION ALL
				SELECT T4.CUSTCIF,
					T3.FINID,
					T1.REFERENCE,
					T3.FINTYPE,
					T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTAMOUNT,
					T1.BANKCODE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.BOUNCEDATE CANCELDATE,
					T2.PAYAGAINSTID,
					T1.BOUNCEDATE,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					T3.CLOSINGSTATUS,
					T3.FINBRANCH,
					T3.FINCURRASSETVALUE,
					T3.PRODUCTCATEGORY,
					T6.PARTNERBANKCODE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T5.ROLEDESC LOVDESCREQUESTSTAGE,
					T1.RECEIPTMODE PAYMENTTYPE,
					T1.RECEIPTMODESTATUS,
					T1.ACTFINRECEIPT,
					T1.REFWAIVERAMT,
					T1.SOURCE,
					T1.VALUEDATE,
					T1.TRANSACTIONREF,
					T1.DEPOSITDATE,
					T1.PARTNERBANKID FUNDINGAC,
					T1.PRVRECEIPTPURPOSE,
					T1.RECEIPTSOURCE,
					T1.RECAPPDATE,
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					TX.RECEIPTSEQID,
					T1.DEPOSITPROCESS,
					T2.STATUS
				FROM FINRECEIPTHEADER T1
				JOIN (SELECT MAX(FINRECEIPTDETAIL.RECEIPTSEQID) RECEIPTSEQID, FINRECEIPTDETAIL.RECEIPTID
						FROM FINRECEIPTDETAIL GROUP BY FINRECEIPTDETAIL.RECEIPTID) TX ON TX.RECEIPTID = T1.RECEIPTID
				LEFT JOIN FINRECEIPTDETAIL T2 ON T1.RECEIPTID = T2.RECEIPTID AND T2.RECEIPTSEQID = TX.RECEIPTSEQID
				LEFT JOIN FINANCEMAIN T3 ON T1.FINID = T3.FINID
				LEFT JOIN CUSTOMERS T4 ON T3.CUSTID = T4.CUSTID
				LEFT JOIN SECROLES T5 ON T1.NEXTROLECODE = T5.ROLECD
				LEFT JOIN PARTNERBANKS T6 ON T6.PARTNERBANKID = T2.FUNDINGAC
				WHERE NOT (EXISTS ( SELECT 1 FROM FINRECEIPTHEADER_TEMP WHERE FINRECEIPTHEADER_TEMP.RECEIPTID = T1.RECEIPTID))
			]]>
		</createView>
	</changeSet>

	<changeSet id="56_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'receiptdetails_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="57_pre" author="Praveena.V" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'bouncereasons_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="57" author="Praveena.V">
		<createView viewName="BOUNCEREASONS_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.BOUNCEID,
					T1.BOUNCECODE,
					T1.REASONTYPE,
                    T1.CATEGORY,
					CASE WHEN T1.CATEGORY = 1 THEN 'TECHNICAL'
						WHEN T1.CATEGORY = 2 THEN 'NON TECHNICAL'
						ELSE NULL END LOVDESCCATEGORY,
					T1.REASON,
					T1.ACTION,
					T1.RULEID,
					T1.RETURNCODE,
					T1.ACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.RULECODE,
					T2.RULECODEDESC,
					CASE WHEN T1.REASONTYPE = 1 THEN 'CANCELLED CHEQUES'
						WHEN T1.REASONTYPE = 2 THEN 'BOUNCED CHEQUES'
						WHEN T1.REASONTYPE = 3 THEN 'HOLD CHEQUES'
						ELSE NULL END LOVDESCREASONTYPE
				FROM BOUNCEREASONS_TEMP T1
				INNER JOIN RULES T2 ON T1.RULEID = T2.RULEID
				UNION ALL
				SELECT T1.BOUNCEID,
					T1.BOUNCECODE,
					T1.REASONTYPE,
					T1.CATEGORY,
					CASE WHEN T1.CATEGORY = 1 THEN 'TECHNICAL'
						WHEN T1.CATEGORY = 2 THEN 'NON TECHNICAL'
						ELSE NULL END LOVDESCCATEGORY,
					T1.REASON,
					T1.ACTION,
					T1.RULEID,
					T1.RETURNCODE,
					T1.ACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.RULECODE,
					T2.RULECODEDESC,
					CASE WHEN T1.REASONTYPE = 1 THEN 'CANCELLED CHEQUES'
						WHEN T1.REASONTYPE = 2 THEN 'BOUNCED CHEQUES'
						WHEN T1.REASONTYPE = 3 THEN 'HOLD CHEQUES'
						ELSE NULL END LOVDESCREASONTYPE
				FROM BOUNCEREASONS T1
				INNER JOIN RULES T2 ON T1.RULEID = T2.RULEID 
				WHERE NOT EXISTS (SELECT 1 FROM BOUNCEREASONS_TEMP WHERE BOUNCEID = T1.BOUNCEID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="57_post" author="Praveena.V" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'bouncereasons_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="58_pre" author="Gopal.p" dbms="postgresql">
		<sql> 
			<![CDATA[ 
				select deps_save_and_drop_dependencies ('plf', 'financemain_lview'); 
			]]>
		</sql>
	</changeSet>

	<changeSet id="58" author="Gopal.p">
		<createView viewName="FINANCEMAIN_LVIEW" replaceIfExists="true">
			<![CDATA[
		 		SELECT T1.FINID,
		 			T1.FINREFERENCE,
					T1.INVESTMENTREF,
					T1.FINTYPE,
					T1.FINCCY,
					T1.FINAMOUNT,
					T1.DOWNPAYMENT,
					T1.FEECHARGEAMT,
					T1.SCHEDULEMETHOD,
					T1.NUMBEROFTERMS,
					T1.RECORDSTATUS,
					T1.RECORDTYPE,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.FINBRANCH,
					T1.FINCONTRACTDATE,
					T1.LINKEDFINREF,
					T1.NEXTUSERID,
					T1.PRIORITY,
					T1.WORKFLOWID,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.FINPREAPPROVEDREF,
					T1.RCDMAINTAINSTS,
					T1.FINCURRASSETVALUE,
					T1.CALTERMS,
					T1.DEVIATIONAPPROVAL,
					T1.FINPURPOSE,
					T1.INITIATEDATE,
					T1.FINASSETVALUE,
					T2.CUSTCIF LOVDESCCUSTCIF,
					T2.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
					T2.CUSTPASSPORTNO LOVDESCCUSTPASSPORTNO,
					T2.CUSTDOB LOVDESCCUSTDOB,
					T2.CUSTCRCPR LOVDESCCUSTCRCPR,
					T2.PHONENUMBER,
					T3.FINCATEGORY LOVDESCPRODUCTCODENAME,
					T3.FINDIVISION LOVDESCFINDIVISION,
					T3.PRODUCT LOVDESCFINPRODUCT,
					T3.FINTYPEDESC LOVDESCFINTYPENAME,
					COALESCE(T4.ROLEDESC, ${add.schema}FN_GET_ROLEDESC(T1.NEXTROLECODE)) LOVDESCREQUESTSTAGE,
					T1.SAMPLINGREQUIRED,
					T1.ADVANCEEMI,
					T1.ADVEMITERMS,
					T1.BPIPFTDAYSBASIS,
					T1.GRACETERMS,
					T1.PRODUCTCATEGORY,
					T1.REQLOANAMT,
					T1.REQLOANTENOR,
					T1.FINOCRREQUIRED,
					T1.OFFERPRODUCT,
					T1.OFFERAMOUNT,
					T1.CUSTSEGMENTATION,
					T1.BASEPRODUCT,
					T1.PROCESSTYPE,
					T1.BUREAUTIMESERIES,
					T1.CAMPAIGNNAME,
					T1.EXISTINGLANREFNO,
					T1.LEADSOURCE,
					T1.POSOURCE,
					T1.RSA,
					T1.VERIFICATION,
					T1.SOURCINGBRANCH,
					T1.SOURCHANNELCATEGORY,
					T1.ASMNAME,
					T1.OFFERID,
					T1.APPLICATIONNO,
					T1.LASTMNTON,
					T1.VERSION,
					T1.TDSAPPLICABLE,
					T2.CUSTID,
					T1.INSTBASEDSCHD,
					T1.ALLOWSUBVENTION,
					T1.TDSTYPE,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS,
					T1.SCHDVERSION,
					T1.SUBVENTIONFROM,
					T1.MANUFACTURERDEALERID,
					T5.DEALERNAME MANUFACTURERDEALERNAME,
					T5.CODE MANUFACTURERDEALERCODE,
					T1.ESCROW,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MANUALSCHDTYPE,
					T1.ISRA,
					T1.SANCTIONEDDATE,
					T1.OVERDRAFTTXNCHRGREQ,
					T1.OVERDRAFTCALCCHRG,
					T1.OVERDRAFTCHRGAMTORPERC,
					T1.OVERDRAFTCHRCALON
				FROM FINANCEMAIN_TEMP T1
				INNER JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
				INNER JOIN RMTFINANCETYPES T3 ON T3.FINTYPE = T1.FINTYPE
				LEFT JOIN SECROLES T4 ON T1.NEXTROLECODE= T4.ROLECD
				LEFT JOIN AMTVEHICLEDEALER T5 ON T1.MANUFACTURERDEALERID = T5.DEALERID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
			]]>
		</createView>
	</changeSet>

	<changeSet id="58_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_lview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="59_pre" author="Gopal.p" dbms="postgresql">
		<sql> 
			<![CDATA[ 
				select deps_save_and_drop_dependencies ('plf', 'financemain_aview'); 
			]]>
		</sql>
	</changeSet>

	<changeSet id="59" author="Gopal.p">
		<createView viewName="FINANCEMAIN_AVIEW" replaceIfExists="true">
			 <![CDATA[ 
				SELECT T1.FINID,
					T1.FINREFERENCE,
			    	T1.INVESTMENTREF,
			    	T1.NUMBEROFTERMS,
			    	T1.GRCPERIODENDDATE,
			    	T1.ALLOWGRCPERIOD,
			    	T1.GRACEBASERATE,
			    	T1.GRACESPECIALRATE,
			    	T1.GRCPFTRATE,
			    	T1.GRCPFTFRQ,
			    	T1.NEXTGRCPFTDATE,
			    	T1.ALLOWGRCPFTRVW,
			    	T1.GRCPFTRVWFRQ,
			    	T1.NEXTGRCPFTRVWDATE,
			    	T1.ALLOWGRCCPZ,
			    	T1.GRCCPZFRQ,
			    	T1.NEXTGRCCPZDATE,
			    	T1.REPAYBASERATE,
			    	T1.REPAYSPECIALRATE,
			    	T1.REPAYPROFITRATE,
			    	T1.REPAYFRQ,
			    	T1.NEXTREPAYDATE,
			    	T1.REPAYPFTFRQ,
			    	T1.NEXTREPAYPFTDATE,
			    	T1.ALLOWREPAYRVW,
			    	T1.REPAYRVWFRQ,
			    	T1.NEXTREPAYRVWDATE,
			    	T1.ALLOWREPAYCPZ,
			    	T1.REPAYCPZFRQ,
			    	T1.NEXTREPAYCPZDATE,
			    	T1.MATURITYDATE,
			    	T1.CPZATGRACEEND,
			    	T1.DOWNPAYMENT,
			    	T1.GRACEFLATAMOUNT,
			    	T1.REQREPAYAMOUNT,
			    	T1.TOTALPROFIT,
			    	T1.TOTALCPZ,
			    	T1.TOTALGROSSPFT,
			    	T1.TOTALGROSSGRCPFT,
			    	T1.TOTALGRACEPFT,
			    	T1.TOTALGRACECPZ,
			    	T1.GRCRATEBASIS,
			    	T1.REPAYRATEBASIS,
			    	T1.FINTYPE,
			    	T1.FINREMARKS,
			    	T1.FINCCY,
			    	T1.SCHEDULEMETHOD,
			    	T1.PROFITDAYSBASIS,
			    	T1.REQMATURITY,
			    	T1.CALTERMS,
			    	T1.CALMATURITY,
			    	T1.FIRSTREPAY,
			    	T1.LASTREPAY,
			    	T1.FINSTARTDATE,
			    	T1.FINAMOUNT,
					T1.FINAMOUNT + T1.FEECHARGEAMT - T1.DOWNPAYMENT LOVDESCFINANCINGAMOUNT,
			    	T1.FINREPAYMENTAMOUNT,
			    	T1.CUSTID,
			   		T1.DEFFERMENTS,
			    	T1.PLANDEFERCOUNT,
			    	T1.FINBRANCH,
			    	T1.FINSOURCEID,
			    	T1.ALLOWEDDEFRPYCHANGE,
			    	T1.AVAILEDDEFRPYCHANGE,
			    	T1.ALLOWEDDEFFRQCHANGE,
			    	T1.AVAILEDDEFFRQCHANGE,
			    	T1.RECALTYPE,
			    	T1.FINASSETVALUE,
			    	T1.FINISACTIVE,
			    	T1.LIMITVALID,
			    	T1.OVERRIDELIMIT,
			    	T1.VERSION,
			    	T1.LASTMNTBY,
			    	T1.LASTMNTON,
			    	T1.RECORDSTATUS,
			    	T1.ROLECODE,
			    	T1.NEXTROLECODE,
			    	T1.TASKID,
			    	T1.NEXTTASKID,
			    	T1.RECORDTYPE,
			    	T1.WORKFLOWID,
					T7.FINTYPEDESC LOVDESCFINTYPENAME,
					T7.FINMAXAMOUNT LOVDESCFINMAXAMT,
					T7.FINMINAMOUNT LOVDESCFINMINAMOUNT,
			    	T1.MINDOWNPAYPERC,
					T7.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
					T7.FINISDWPAYREQUIRED LOVDESCDWNPAYREQ,
					T7.FINMAXDIFFERMENT LOVDESCFINMAXDIFFERMENT,
					T12.BRANCHDESC LOVDESCFINBRANCHNAME,
					T12.BRANCHPROVINCE FINBRANCHPROVINCECODE,
			    	T1.LASTREPAYDATE,
			    	T1.LASTREPAYPFTDATE,
			    	T1.LASTREPAYRVWDATE,
			    	T1.LASTREPAYCPZDATE,
			    	T1.ALLOWGRCREPAY,
			    	T1.GRCSCHDMTHD,
			    	T1.GRCMARGIN,
			    	T1.REPAYMARGIN,
			    	T1.FINCURRASSETVALUE,
			    	T1.FINCOMMITMENTREF,
			    	T1.FINLIMITREF,
			    	T1.FINCONTRACTDATE,
					T17.ACRTILLLBD LOVDESCACCRUEDTILLLBD,
			    	T7.FINRVWRATEAPPLFOR,
			    	T1.TOTALREPAYAMT,
			    	T1.CLOSINGSTATUS,
			    	T1.FINAPPROVEDDATE,
			    	T1.FEECHARGEAMT,
			    	T1.BLACKLISTED,
			    	T1.FINREPAYPFTONFRQ,
			    	T1.ANUALIZEDPERCRATE,
			    	T1.EFFECTIVERATEOFRETURN,
			    	T1.MIGRATEDFINANCE,
			    	T1.SCHEDULEMAINTAINED,
			    	T1.SCHEDULEREGENERATED,
			    	T1.FINPURPOSE,
					T39.LOANPURPOSEDESC LOVDESCFINPURPOSENAME,
			    	T1.FINSTATUS,
			    	T1.FINSTSREASON,
			    	T1.INITIATEUSER,
					T7.FINSCHEDULEON LOVDESCFINSCHEDULEON,
			    	T1.CUSTDSR,
			    	T1.JOINTACCOUNT,
			    	T1.JOINTCUSTID,
			    	T1.DOWNPAYBANK,
			    	T1.DOWNPAYSUPL,
			    	T1.SECURITYCOLLATERAL,
			    	T1.APPROVED,
			    	T1.DISCREPANCY,
			    	T1.LIMITAPPROVED,
			    	T1.GRACETERMS,
					T7.FINDIVISION LOVDESCFINDIVISION,
			    	T1.RCDMAINTAINSTS,
			    	T1.FINREPAYMETHOD,
			    	T1.GRCPROFITDAYSBASIS,
			    	T1.STEPFINANCE,
			    	T1.STEPTYPE,
				    T1.STEPPOLICY,
				    T1.ALWMANUALSTEPS,
				    T1.NOOFSTEPS,
				    T1.LINKEDFINREF,
				    T1.NEXTUSERID,
				    T1.PRIORITY,
					T24.POLICYDESC LOVDESCSTEPPOLICYNAME,
				    T1.GRCMINRATE,
				    T1.GRCMAXRATE,
				    T1.RPYMINRATE,
				    T1.RPYMAXRATE,
				    T1.DEVIATIONAPPROVAL,
				    T1.MANUALSCHEDULE,
				    T1.CREDITINSAMT,
				    T27.CUSTSTSDESCRIPTION,
				    T1.INITIATEDATE,
				    T1.FINPREAPPROVEDREF,
				    T1.ACCOUNTSOFFICER,
					T28.DEALERNAME LOVDESCACCOUNTSOFFICER,
					T28.DEALERCITY LOVDESCSOURCECITY,
				    T1.DSACODE,
					T30.ROFFICERDESC DSACODEDESC,
				    T1.TDSAPPLICABLE,
				    T1.MANDATEID,
				    T1.DROPLINEFRQ,
				    T1.FIRSTDROPLINEDATE,
				    T1.PFTSERVICINGODLIMIT,
				    T1.ALWBPI,
				    T1.BPITREATMENT,
				    T1.PLANEMIHALW,
				    T1.PLANEMIHMETHOD,
				    T1.PLANEMIHMAXPERYEAR,
				    T1.PLANEMIHMAX,
				    T1.PLANEMIHLOCKPERIOD,
				    T1.PLANEMICPZ,
				    T1.CALROUNDINGMODE,
				    T1.ALWMULTIDISB,
				    T1.APPLICATIONNO,
				    T1.REFERRALID,
					T33.ROFFICERDESC REFERRALIDDESC,
				    T1.DMACODE,
					T34.ROFFICERDESC DMACODEDESC,
				    T1.SALESDEPARTMENT,
					T35.DEPTDESC SALESDEPARTMENTDESC,
				    T1.QUICKDISB,
				    T1.WIFREFERENCE,
				    T1.UNPLANEMIHLOCKPERIOD,
				    T1.UNPLANEMICPZ,
				    T1.REAGECPZ,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.AVAILEDUNPLANEMI,
				    T1.AVAILEDREAGEH,
				    T1.BPIAMOUNT,
				    T1.DEDUCTFEEDISB,
				    T1.RVWRATEAPPLFOR,
				    T1.SCHCALONRVW,
				    T1.PASTDUEPFTCALMTHD,
				    T1.PASTDUEPFTMARGIN,
				    T1.DROPPINGMETHOD,
				    T1.RATECHGANYDAY,
				    T1.PROMOTIONCODE,
				    T1.RESTRUCTURELOAN,
				    T1.OLDFINREFERENCE,
				    T1.REAGEBUCKET,
				    T1.FINCATEGORY,
				    T1.PRODUCTCATEGORY,
				    T1.ROUNDINGTARGET,
					T36.ENTITYCODE LOVDESCENTITYCODE,
				    T1.ELIGIBILITYMETHOD,
					T38.FIELDCODEVALUE LOVELIGIBILITYMETHOD,
					T38.VALUEDESC LOVDESCELIGIBILITYMETHOD,
				    T1.EMPLOYEENAME,
					T37.ROFFICERDESC EMPLOYEENAMEDESC,
				    T1.SAMPLINGREQUIRED,
				    T1.LEGALREQUIRED,
				    T1.GRCMAXAMOUNT,
				    T1.CONNECTOR,
					T40.DEALERNAME CONNECTORCODE,
					T40.DEALERCITY CONNECTORDESC,
				    T1.ADVANCEEMI,
				    T1.ADVEMITERMS,
				    T1.BPIPFTDAYSBASIS,
				    T1.FIXEDRATETENOR,
				    T1.FIXEDTENORRATE,
					T12.BRANCHTEL FINBRANCHCONTACT,
				    T1.PROCESSATTRIBUTES,
				    T1.BUSINESSVERTICAL,
					BV.CODE BUSINESSVERTICALCODE,
					BV.DESCRIPTION BUSINESSVERTICALDESC,
				    T1.GRCADVTYPE,
				    T1.GRCADVTERMS,
				    T1.ADVTYPE,
				    T1.ADVTERMS,
				    T1.ADVSTAGE,
				    T1.TDSPERCENTAGE,
				    T1.TDSSTARTDATE,
				    T1.TDSENDDATE,
				    T1.TDSLIMITAMT,
				    T1.VANREQ,
				    T1.VANCODE,
				    T1.ALLOWDRAWINGPOWER,
				    T1.ALLOWREVOLVING,
				    T1.SANBSDSCHDLE,
				    T1.PROMOTIONSEQID,
				    T1.SVAMOUNT,
				    T1.CBAMOUNT,
				    T1.APPLIEDLOANAMT,
				    T1.FINISRATERVWATGRCEND,
				    T1.PLANEMIHALWINGRACE,
					T1.REQLOANAMT,
					T1.REQLOANTENOR,
					T1.FINOCRREQUIRED,
					T1.OFFERPRODUCT,
					T1.OFFERAMOUNT,
					T1.CUSTSEGMENTATION,
					T1.BASEPRODUCT,
					T1.PROCESSTYPE,
					T1.BUREAUTIMESERIES,
					T1.CAMPAIGNNAME,
					T1.EXISTINGLANREFNO,
					T1.LEADSOURCE,
					T1.POSOURCE,
					T1.RSA,
					T1.VERIFICATION,
					T1.SOURCINGBRANCH,
					T1.SOURCHANNELCATEGORY,
					T1.ASMNAME,
					T13.BRANCHDESC LOVDESCSOURCINGBRANCH,
					T1.ENDGRCPERIODAFTRFULLDISB,
					T1.AUTOINCGRCENDDATE,
					T1.ALWGRCADJ,
					T1.PMAY,
					T1.OFFERID,
					T1.ALWLOANSPLIT,
					T1.PARENTREF,
					T1.LOANSPLITTED,
					T1.INSTBASEDSCHD,
					C.CUSTCIF LOVDESCCUSTCIF,
					T1.ALLOWSUBVENTION,
					T1.TDSTYPE,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS,
					T1.SCHDVERSION,
					T1.SUBVENTIONFROM,
					T1.MANUFACTURERDEALERID,
					T41.DEALERNAME MANUFACTURERDEALERNAME,
					T41.CODE MANUFACTURERDEALERCODE,
					T1.ESCROW,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MANUALSCHDTYPE,
					T1.ISRA,
					T1.SANCTIONEDDATE,
					T1.OVERDRAFTTXNCHRGREQ,
					T1.OVERDRAFTCALCCHRG,
					T1.OVERDRAFTCHRGAMTORPERC,
					T1.OVERDRAFTCHRCALON,
					T17.NOINST
				FROM FINANCEMAIN T1
				JOIN RMTFINANCETYPES T7 ON T1.FINTYPE = T7.FINTYPE 
				LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH  = T12.BRANCHCODE 
				LEFT JOIN RMTBRANCHES T13 ON T1.SOURCINGBRANCH = T13.BRANCHCODE
				LEFT JOIN FINPFTDETAILS T17 ON T17.FINID  = T1.FINID 
				LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY  = T24.POLICYCODE 
				LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS  = T27.CUSTSTSCODE 
				LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
				LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE  = T30.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID  = T33.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE  = T34.ROFFICERCODE 
				LEFT JOIN BMTDEPARTMENTS T35 ON T1.SALESDEPARTMENT  = T35.DEPTCODE 
				LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION  = T36.DIVISIONCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME  = T37.ROFFICERCODE 
				LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE  = 'ELGMETHOD' 
				LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE  = T39.LOANPURPOSECODE 
				LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
				LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
				INNER JOIN CUSTOMERS C ON C.CUSTID = T1.CUSTID
				LEFT JOIN AMTVEHICLEDEALER T41 ON T1.MANUFACTURERDEALERID = T41.DEALERID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
			]]>
		</createView>
	</changeSet>

	<changeSet id="59_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_aview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="60_pre" author="Gopal.p" dbms="postgresql">
		<sql> 
		<![CDATA[ 
			select deps_save_and_drop_dependencies ('plf', 'financemain_view'); 
		]]>
		</sql>
	</changeSet>

	<changeSet id="60" author="Gopal.p">
		<createView viewName="FINANCEMAIN_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINID,
					T1.FINREFERENCE,
				    T1.INVESTMENTREF,
				    T1.NUMBEROFTERMS,
				    T1.GRCPERIODENDDATE,
				    T1.ALLOWGRCPERIOD,
				    T1.GRACEBASERATE,
				    T1.GRACESPECIALRATE,
				    T1.GRCPFTRATE,
				    T1.GRCPFTFRQ,
				    T1.NEXTGRCPFTDATE,
				    T1.ALLOWGRCPFTRVW,
				    T1.GRCPFTRVWFRQ,
				    T1.NEXTGRCPFTRVWDATE,
				    T1.ALLOWGRCCPZ,
				    T1.GRCCPZFRQ,
				    T1.NEXTGRCCPZDATE,
				    T1.REPAYBASERATE,
				    T1.REPAYSPECIALRATE,
				    T1.REPAYPROFITRATE,
				    T1.REPAYFRQ,
				    T1.NEXTREPAYDATE,
				    T1.REPAYPFTFRQ,
				    T1.NEXTREPAYPFTDATE,
				    T1.ALLOWREPAYRVW,
				    T1.REPAYRVWFRQ,
				    T1.NEXTREPAYRVWDATE,
				    T1.ALLOWREPAYCPZ,
				    T1.REPAYCPZFRQ,
				    T1.NEXTREPAYCPZDATE,
				    T1.MATURITYDATE,
				    T1.CPZATGRACEEND,
				    T1.DOWNPAYMENT,
				    T1.GRACEFLATAMOUNT,
				    T1.REQREPAYAMOUNT,
				    T1.TOTALPROFIT,
				    T1.TOTALCPZ,
				    T1.TOTALGROSSPFT,
				    T1.TOTALGROSSGRCPFT,
				    T1.TOTALGRACEPFT,
				    T1.TOTALGRACECPZ,
				    T1.GRCRATEBASIS,
				    T1.REPAYRATEBASIS,
				    T1.FINTYPE,
				    T1.FINREMARKS,
				    T1.FINCCY,
				    T1.SCHEDULEMETHOD,
				    T1.PROFITDAYSBASIS,
				    T1.REQMATURITY,
				    T1.CALTERMS,
				    T1.CALMATURITY,
				    T1.FIRSTREPAY,
				    T1.LASTREPAY,
				    T1.FINSTARTDATE,
				    T1.FINAMOUNT,
					((T1.FINAMOUNT + T1.FEECHARGEAMT) - T1.DOWNPAYMENT) LOVDESCFINANCINGAMOUNT,
				    T1.FINREPAYMENTAMOUNT,
				    T1.CUSTID,
				    T1.DEFFERMENTS,
				    T1.PLANDEFERCOUNT,
				    T1.FINBRANCH,
				    T1.FINSOURCEID,
				    T1.ALLOWEDDEFRPYCHANGE,
				    T1.AVAILEDDEFRPYCHANGE,
				    T1.ALLOWEDDEFFRQCHANGE,
				    T1.AVAILEDDEFFRQCHANGE,
				    T1.RECALTYPE,
				    T1.FINASSETVALUE,
				    T1.FINISACTIVE,
				    T1.LIMITVALID,
				    T1.OVERRIDELIMIT,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T7.FINTYPEDESC LOVDESCFINTYPENAME,
				    T7.FINMAXAMOUNT LOVDESCFINMAXAMT,
				    T7.FINMINAMOUNT LOVDESCFINMINAMOUNT,
				    T1.MINDOWNPAYPERC,
				    T7.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
				    T7.FINISDWPAYREQUIRED LOVDESCDWNPAYREQ,
				    T7.FINMAXDIFFERMENT LOVDESCFINMAXDIFFERMENT,
				    T12.BRANCHDESC LOVDESCFINBRANCHNAME,
				    T12.BRANCHPROVINCE FINBRANCHPROVINCECODE,
				    T1.LASTREPAYDATE,
				    T1.LASTREPAYPFTDATE,
				    T1.LASTREPAYRVWDATE,
				    T1.LASTREPAYCPZDATE,
				    T1.ALLOWGRCREPAY,
				    T1.GRCSCHDMTHD,
				    T1.GRCMARGIN,
				    T1.REPAYMARGIN,
				    T1.FINCURRASSETVALUE,
				    T1.FINCOMMITMENTREF,
				    T1.FINLIMITREF,
				    T1.FINCONTRACTDATE,
				    T17.ACRTILLLBD LOVDESCACCRUEDTILLLBD,
				    T7.FINRVWRATEAPPLFOR,
				    T1.TOTALREPAYAMT,
				    T1.CLOSINGSTATUS,
				    T1.FINAPPROVEDDATE,
				    T1.FEECHARGEAMT,
				    T1.BLACKLISTED,
				    T1.FINREPAYPFTONFRQ,
				    T1.ANUALIZEDPERCRATE,
				    T1.EFFECTIVERATEOFRETURN,
				    T1.MIGRATEDFINANCE,
				    T1.SCHEDULEMAINTAINED,
				    T1.SCHEDULEREGENERATED,
				    T1.FINPURPOSE,
				    T39.LOANPURPOSEDESC LOVDESCFINPURPOSENAME,
				    T1.FINSTATUS,
				    T1.FINSTSREASON,
				    T1.INITIATEUSER,
				    T7.FINSCHEDULEON LOVDESCFINSCHEDULEON,
				    T1.CUSTDSR,
				    T1.JOINTACCOUNT,
				    T1.JOINTCUSTID,
				    T1.DOWNPAYBANK,
				    T1.DOWNPAYSUPL,
				    T1.SECURITYCOLLATERAL,
				    T1.APPROVED,
				    T1.DISCREPANCY,
				    T1.LIMITAPPROVED,
				    T1.GRACETERMS,
				    T7.FINDIVISION LOVDESCFINDIVISION,
				    T1.RCDMAINTAINSTS,
				    T1.FINREPAYMETHOD,
				    T1.GRCPROFITDAYSBASIS,
				    T1.STEPFINANCE,
				    T1.STEPTYPE,
				    T1.STEPPOLICY,
				    T1.ALWMANUALSTEPS,
				    T1.NOOFSTEPS,
				    T1.LINKEDFINREF,
				    T1.NEXTUSERID,
				    T1.PRIORITY,
				    T24.POLICYDESC LOVDESCSTEPPOLICYNAME,
				    T1.GRCMINRATE,
				    T1.GRCMAXRATE,
				    T1.RPYMINRATE,
				    T1.RPYMAXRATE,
				    T1.DEVIATIONAPPROVAL,
				    T1.MANUALSCHEDULE,
				    T1.CREDITINSAMT,
				    T27.CUSTSTSDESCRIPTION,
				    T1.INITIATEDATE,
				    T1.FINPREAPPROVEDREF,
				    T1.ACCOUNTSOFFICER,
				    T28.DEALERNAME LOVDESCACCOUNTSOFFICER,
				    T28.DEALERCITY LOVDESCSOURCECITY,
				    T1.DSACODE,
				    T30.ROFFICERDESC DSACODEDESC,
				    T1.TDSAPPLICABLE,
				    T1.MANDATEID,
				    T1.DROPLINEFRQ,
				    T1.FIRSTDROPLINEDATE,
				    T1.PFTSERVICINGODLIMIT,
				    T1.ALWBPI,
				    T1.BPITREATMENT,
				    T1.PLANEMIHALW,
				    T1.PLANEMIHMETHOD,
				    T1.PLANEMIHMAXPERYEAR,
				    T1.PLANEMIHMAX,
				    T1.PLANEMIHLOCKPERIOD,
				    T1.PLANEMICPZ,
				    T1.CALROUNDINGMODE,
				    T1.ALWMULTIDISB,
				    T1.APPLICATIONNO,
				    T1.REFERRALID,
				    T33.ROFFICERDESC REFERRALIDDESC,
				    T1.DMACODE,
				    T34.ROFFICERDESC DMACODEDESC,
				    T1.SALESDEPARTMENT,
				    T35.DEPTDESC SALESDEPARTMENTDESC,
				    T1.QUICKDISB,
				    T1.WIFREFERENCE,
				    T1.UNPLANEMIHLOCKPERIOD,
				    T1.UNPLANEMICPZ,
				    T1.REAGECPZ,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.AVAILEDUNPLANEMI,
				    T1.AVAILEDREAGEH,
				    T1.BPIAMOUNT,
				    T1.DEDUCTFEEDISB,
				    T1.RVWRATEAPPLFOR,
				    T1.SCHCALONRVW,
				    T1.PASTDUEPFTCALMTHD,
				    T1.PASTDUEPFTMARGIN,
				    T1.DROPPINGMETHOD,
				    T1.RATECHGANYDAY,
				    T1.PROMOTIONCODE,
				    T1.RESTRUCTURELOAN,
				    T1.OLDFINREFERENCE,
				    T1.REAGEBUCKET,
				    T1.FINCATEGORY,
				    T1.PRODUCTCATEGORY,
				    T1.ROUNDINGTARGET,
				    T36.ENTITYCODE LOVDESCENTITYCODE,
				    T1.ELIGIBILITYMETHOD,
				    T38.FIELDCODEVALUE LOVELIGIBILITYMETHOD,
				    T38.VALUEDESC LOVDESCELIGIBILITYMETHOD,
				    T1.EMPLOYEENAME,
				    T37.ROFFICERDESC EMPLOYEENAMEDESC,
				    T1.SAMPLINGREQUIRED,
				    T1.LEGALREQUIRED,
				    T1.GRCMAXAMOUNT,
				    T1.CONNECTOR,
				    T40.DEALERNAME CONNECTORCODE,
				    T40.DEALERCITY CONNECTORDESC,
				    T1.ADVANCEEMI,
				    T1.ADVEMITERMS,
				    T1.BPIPFTDAYSBASIS,
				    T1.FIXEDRATETENOR,
				    T1.FIXEDTENORRATE,
				    T12.BRANCHTEL FINBRANCHCONTACT,
				    T1.PROCESSATTRIBUTES,
				    T1.BUSINESSVERTICAL,
				    BV.CODE BUSINESSVERTICALCODE,
				    BV.DESCRIPTION BUSINESSVERTICALDESC,
				    T1.GRCADVTYPE,
				    T1.GRCADVTERMS,
				    T1.ADVTYPE,
				    T1.ADVTERMS,
				    T1.ADVSTAGE,
				    T1.TDSPERCENTAGE,
				    T1.TDSSTARTDATE,
				    T1.TDSENDDATE,
				    T1.TDSLIMITAMT,
				    T1.VANREQ,
				    T1.VANCODE,
				    T1.ALLOWDRAWINGPOWER,
				    T1.ALLOWREVOLVING,
				    T1.SANBSDSCHDLE,
				    T1.PROMOTIONSEQID,
				    T1.SVAMOUNT,
				    T1.CBAMOUNT,
				    T1.APPLIEDLOANAMT,
				    T1.FINISRATERVWATGRCEND,
					T1.REQLOANAMT,
					T1.REQLOANTENOR,
					T1.FINOCRREQUIRED,
					T1.OFFERPRODUCT,
					T1.OFFERAMOUNT,
					T1.CUSTSEGMENTATION,
					T1.BASEPRODUCT,
					T1.PROCESSTYPE,
					T1.BUREAUTIMESERIES,
					T1.CAMPAIGNNAME,
					T1.EXISTINGLANREFNO,
					T1.LEADSOURCE,
					T1.POSOURCE,
					T1.RSA,
					T1.VERIFICATION,
					T1.SOURCINGBRANCH,
					T1.SOURCHANNELCATEGORY,
					T1.ASMNAME,
					T13.BRANCHDESC LOVDESCSOURCINGBRANCH,
					T1.OFFERID,
					T1.ALWGRCADJ,
					T1.ENDGRCPERIODAFTRFULLDISB,
					T1.AUTOINCGRCENDDATE,
					T1.PMAY,
					T1.ALWLOANSPLIT,
					T1.PARENTREF,
					T1.LOANSPLITTED,
					T1.INSTBASEDSCHD,
					T1.PLANEMIHALWINGRACE,
					T1.ALLOWSUBVENTION,
					T1.TDSTYPE,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS,
					T1.SCHDVERSION,
					T1.SUBVENTIONFROM,
					T1.MANUFACTURERDEALERID,
					T41.DEALERNAME MANUFACTURERDEALERNAME,
					T41.CODE MANUFACTURERDEALERCODE,
					T1.ESCROW,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MANUALSCHDTYPE,
					T1.ISRA,
					T1.SANCTIONEDDATE,
					T1.OVERDRAFTTXNCHRGREQ,
					T1.OVERDRAFTCALCCHRG,
					T1.OVERDRAFTCHRGAMTORPERC,
					T1.OVERDRAFTCHRCALON
				FROM FINANCEMAIN_TEMP T1
				JOIN RMTFINANCETYPES T7 ON T1.FINTYPE  = T7.FINTYPE 
				LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH  = T12.BRANCHCODE 
				LEFT JOIN RMTBRANCHES T13 ON T1.SOURCINGBRANCH = T13.BRANCHCODE
				LEFT JOIN FINPFTDETAILS T17 ON T17.FINID  = T1.FINID 
				LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY  = T24.POLICYCODE 
				LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS  = T27.CUSTSTSCODE 
				LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
				LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE  = T30.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID  = T33.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE  = T34.ROFFICERCODE 
				LEFT JOIN BMTDEPARTMENTS T35 ON T1.SALESDEPARTMENT  = T35.DEPTCODE 
				LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION  = T36.DIVISIONCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME  = T37.ROFFICERCODE 
				LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE  = 'ELGMETHOD' 
				LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE  = T39.LOANPURPOSECODE 
				LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
				LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
				LEFT JOIN AMTVEHICLEDEALER T41 ON T1.MANUFACTURERDEALERID = T41.DEALERID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				UNION ALL
				SELECT T1.FINID,
					T1.FINREFERENCE,
				    T1.INVESTMENTREF,
				    T1.NUMBEROFTERMS,
				    T1.GRCPERIODENDDATE,
				    T1.ALLOWGRCPERIOD,
				    T1.GRACEBASERATE,
				    T1.GRACESPECIALRATE,
				    T1.GRCPFTRATE,
				    T1.GRCPFTFRQ,
				    T1.NEXTGRCPFTDATE,
				    T1.ALLOWGRCPFTRVW,
				    T1.GRCPFTRVWFRQ,
				    T1.NEXTGRCPFTRVWDATE,
				    T1.ALLOWGRCCPZ,
				    T1.GRCCPZFRQ,
				    T1.NEXTGRCCPZDATE,
				    T1.REPAYBASERATE,
				    T1.REPAYSPECIALRATE,
				    T1.REPAYPROFITRATE,
				    T1.REPAYFRQ,
				    T1.NEXTREPAYDATE,
				    T1.REPAYPFTFRQ,
				    T1.NEXTREPAYPFTDATE,
				    T1.ALLOWREPAYRVW,
				    T1.REPAYRVWFRQ,
				    T1.NEXTREPAYRVWDATE,
				    T1.ALLOWREPAYCPZ,
				    T1.REPAYCPZFRQ,
				    T1.NEXTREPAYCPZDATE,
				    T1.MATURITYDATE,
				    T1.CPZATGRACEEND,
				    T1.DOWNPAYMENT,
				    T1.GRACEFLATAMOUNT,
				    T1.REQREPAYAMOUNT,
				    T1.TOTALPROFIT,
				    T1.TOTALCPZ,
				    T1.TOTALGROSSPFT,
				    T1.TOTALGROSSGRCPFT,
				    T1.TOTALGRACEPFT,
				    T1.TOTALGRACECPZ,
				    T1.GRCRATEBASIS,
				    T1.REPAYRATEBASIS,
				    T1.FINTYPE,
				    T1.FINREMARKS,
				    T1.FINCCY,
				    T1.SCHEDULEMETHOD,
				    T1.PROFITDAYSBASIS,
				    T1.REQMATURITY,
				    T1.CALTERMS,
				    T1.CALMATURITY,
				    T1.FIRSTREPAY,
				    T1.LASTREPAY,
				    T1.FINSTARTDATE,
				    T1.FINAMOUNT,
					((T1.FINAMOUNT + T1.FEECHARGEAMT) - T1.DOWNPAYMENT) LOVDESCFINANCINGAMOUNT,
				    T1.FINREPAYMENTAMOUNT,
				    T1.CUSTID,
				    T1.DEFFERMENTS,
				    T1.PLANDEFERCOUNT,
				    T1.FINBRANCH,
				    T1.FINSOURCEID,
				    T1.ALLOWEDDEFRPYCHANGE,
				    T1.AVAILEDDEFRPYCHANGE,
				    T1.ALLOWEDDEFFRQCHANGE,
				    T1.AVAILEDDEFFRQCHANGE,
				    T1.RECALTYPE,
				    T1.FINASSETVALUE,
				    T1.FINISACTIVE,
				    T1.LIMITVALID,
				    T1.OVERRIDELIMIT,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T7.FINTYPEDESC LOVDESCFINTYPENAME,
				    T7.FINMAXAMOUNT LOVDESCFINMAXAMT,
				    T7.FINMINAMOUNT LOVDESCFINMINAMOUNT,
				    T1.MINDOWNPAYPERC,
				    T7.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
				    T7.FINISDWPAYREQUIRED LOVDESCDWNPAYREQ,
				    T7.FINMAXDIFFERMENT LOVDESCFINMAXDIFFERMENT,
				    T12.BRANCHDESC LOVDESCFINBRANCHNAME,
				    T12.BRANCHPROVINCE FINBRANCHPROVINCECODE,
				    T1.LASTREPAYDATE,
				    T1.LASTREPAYPFTDATE,
				    T1.LASTREPAYRVWDATE,
				    T1.LASTREPAYCPZDATE,
				    T1.ALLOWGRCREPAY,
				    T1.GRCSCHDMTHD,
				    T1.GRCMARGIN,
				    T1.REPAYMARGIN,
				    T1.FINCURRASSETVALUE,
				    T1.FINCOMMITMENTREF,
				    T1.FINLIMITREF,
				    T1.FINCONTRACTDATE,
				    T17.ACRTILLLBD LOVDESCACCRUEDTILLLBD,
				    T7.FINRVWRATEAPPLFOR,
				    T1.TOTALREPAYAMT,
				    T1.CLOSINGSTATUS,
				    T1.FINAPPROVEDDATE,
				    T1.FEECHARGEAMT,
				    T1.BLACKLISTED,
				    T1.FINREPAYPFTONFRQ,
				    T1.ANUALIZEDPERCRATE,
				    T1.EFFECTIVERATEOFRETURN,
				    T1.MIGRATEDFINANCE,
				    T1.SCHEDULEMAINTAINED,
				    T1.SCHEDULEREGENERATED,
				    T1.FINPURPOSE,
				    T39.LOANPURPOSEDESC LOVDESCFINPURPOSENAME,
				    T1.FINSTATUS,
				    T1.FINSTSREASON,
				    T1.INITIATEUSER,
				    T7.FINSCHEDULEON LOVDESCFINSCHEDULEON,
				    T1.CUSTDSR,
				    T1.JOINTACCOUNT,
				    T1.JOINTCUSTID,
				    T1.DOWNPAYBANK,
				    T1.DOWNPAYSUPL,
				    T1.SECURITYCOLLATERAL,
				    T1.APPROVED,
				    T1.DISCREPANCY,
				    T1.LIMITAPPROVED,
				    T1.GRACETERMS,
				    T7.FINDIVISION LOVDESCFINDIVISION,
				    T1.RCDMAINTAINSTS,
				    T1.FINREPAYMETHOD,
				    T1.GRCPROFITDAYSBASIS,
				    T1.STEPFINANCE,
				    T1.STEPTYPE,
				    T1.STEPPOLICY,
				    T1.ALWMANUALSTEPS,
				    T1.NOOFSTEPS,
				    T1.LINKEDFINREF,
				    T1.NEXTUSERID,
				    T1.PRIORITY,
				    T24.POLICYDESC LOVDESCSTEPPOLICYNAME,
				    T1.GRCMINRATE,
				    T1.GRCMAXRATE,
				    T1.RPYMINRATE,
				    T1.RPYMAXRATE,
				    T1.DEVIATIONAPPROVAL,
				    T1.MANUALSCHEDULE,
				    T1.CREDITINSAMT,
				    T27.CUSTSTSDESCRIPTION,
				    T1.INITIATEDATE,
				    T1.FINPREAPPROVEDREF,
				    T1.ACCOUNTSOFFICER,
				    T28.DEALERNAME LOVDESCACCOUNTSOFFICER,
				    T28.DEALERCITY LOVDESCSOURCECITY,
				    T1.DSACODE,
				    T30.ROFFICERDESC DSACODEDESC,
				    T1.TDSAPPLICABLE,
				    T1.MANDATEID,
				    T1.DROPLINEFRQ,
				    T1.FIRSTDROPLINEDATE,
				    T1.PFTSERVICINGODLIMIT,
				    T1.ALWBPI,
				    T1.BPITREATMENT,
				    T1.PLANEMIHALW,
				    T1.PLANEMIHMETHOD,
				    T1.PLANEMIHMAXPERYEAR,
				    T1.PLANEMIHMAX,
				    T1.PLANEMIHLOCKPERIOD,
				    T1.PLANEMICPZ,
				    T1.CALROUNDINGMODE,
				    T1.ALWMULTIDISB,
				    T1.APPLICATIONNO,
				    T1.REFERRALID,
				    T33.ROFFICERDESC REFERRALIDDESC,
				    T1.DMACODE,
				    T34.ROFFICERDESC DMACODEDESC,
				    T1.SALESDEPARTMENT,
				    T35.DEPTDESC SALESDEPARTMENTDESC,
				    T1.QUICKDISB,
				    T1.WIFREFERENCE,
				    T1.UNPLANEMIHLOCKPERIOD,
				    T1.UNPLANEMICPZ,
				    T1.REAGECPZ,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.AVAILEDUNPLANEMI,
				    T1.AVAILEDREAGEH,
				    T1.BPIAMOUNT,
				    T1.DEDUCTFEEDISB,
				    T1.RVWRATEAPPLFOR,
				    T1.SCHCALONRVW,
				    T1.PASTDUEPFTCALMTHD,
				    T1.PASTDUEPFTMARGIN,
				    T1.DROPPINGMETHOD,
				    T1.RATECHGANYDAY,
				    T1.PROMOTIONCODE,
				    T1.RESTRUCTURELOAN,
				    T1.OLDFINREFERENCE,
				    T1.REAGEBUCKET,
				    T1.FINCATEGORY,
				    T1.PRODUCTCATEGORY,
				    T1.ROUNDINGTARGET,
				    T36.ENTITYCODE LOVDESCENTITYCODE,
				    T1.ELIGIBILITYMETHOD,
				    T38.FIELDCODEVALUE LOVELIGIBILITYMETHOD,
				    T38.VALUEDESC LOVDESCELIGIBILITYMETHOD,
				    T1.EMPLOYEENAME,
				    T37.ROFFICERDESC EMPLOYEENAMEDESC,
				    T1.SAMPLINGREQUIRED,
				    T1.LEGALREQUIRED,
				    T1.GRCMAXAMOUNT,
				    T1.CONNECTOR,
				    T40.DEALERNAME CONNECTORCODE,
				    T40.DEALERCITY CONNECTORDESC,
				    T1.ADVANCEEMI,
				    T1.ADVEMITERMS,
				    T1.BPIPFTDAYSBASIS,
				    T1.FIXEDRATETENOR,
				    T1.FIXEDTENORRATE,
				    T12.BRANCHTEL FINBRANCHCONTACT,
				    T1.PROCESSATTRIBUTES,
				    T1.BUSINESSVERTICAL,
				    BV.CODE BUSINESSVERTICALCODE,
				    BV.DESCRIPTION BUSINESSVERTICALDESC,
				    T1.GRCADVTYPE,
				    T1.GRCADVTERMS,
				    T1.ADVTYPE,
				    T1.ADVTERMS,
				    T1.ADVSTAGE,
				    T1.TDSPERCENTAGE,
				    T1.TDSSTARTDATE,
				    T1.TDSENDDATE,
				    T1.TDSLIMITAMT,
				    T1.VANREQ,
				    T1.VANCODE,
				    T1.ALLOWDRAWINGPOWER,
				    T1.ALLOWREVOLVING,
				    T1.SANBSDSCHDLE,
				    T1.PROMOTIONSEQID,
				    T1.SVAMOUNT,
				    T1.CBAMOUNT,
				    T1.APPLIEDLOANAMT,
				    T1.FINISRATERVWATGRCEND,
					T1.REQLOANAMT,
					T1.REQLOANTENOR,
					T1.FINOCRREQUIRED,
					T1.OFFERPRODUCT,
					T1.OFFERAMOUNT,
					T1.CUSTSEGMENTATION,
					T1.BASEPRODUCT,
					T1.PROCESSTYPE,
					T1.BUREAUTIMESERIES,
					T1.CAMPAIGNNAME,
					T1.EXISTINGLANREFNO,
					T1.LEADSOURCE,
					T1.POSOURCE,
					T1.RSA,
					T1.VERIFICATION,
					T1.SOURCINGBRANCH,
					T1.SOURCHANNELCATEGORY,
					T1.ASMNAME,
					T13.BRANCHDESC LOVDESCSOURCINGBRANCH,
					T1.OFFERID,
					T1.ALWGRCADJ,
					T1.ENDGRCPERIODAFTRFULLDISB,
					T1.AUTOINCGRCENDDATE,
					T1.PMAY,
					T1.ALWLOANSPLIT,
					T1.PARENTREF,
					T1.LOANSPLITTED,
					T1.INSTBASEDSCHD,
					T1.PLANEMIHALWINGRACE,
					T1.ALLOWSUBVENTION,
					T1.TDSTYPE,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS,
					T1.SCHDVERSION,
					T1.SUBVENTIONFROM,
					T1.MANUFACTURERDEALERID,
					T41.DEALERNAME MANUFACTURERDEALERNAME,
					T41.CODE MANUFACTURERDEALERCODE,
					T1.ESCROW,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MANUALSCHDTYPE,
					T1.ISRA,
					T1.SANCTIONEDDATE,
					T1.OVERDRAFTTXNCHRGREQ,
					T1.OVERDRAFTCALCCHRG,
					T1.OVERDRAFTCHRGAMTORPERC,
					T1.OVERDRAFTCHRCALON
				FROM FINANCEMAIN T1
				JOIN RMTFINANCETYPES T7 ON T1.FINTYPE  = T7.FINTYPE 
				LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH  = T12.BRANCHCODE 
				LEFT JOIN RMTBRANCHES T13 ON T1.SOURCINGBRANCH = T13.BRANCHCODE
				LEFT JOIN FINPFTDETAILS T17 ON T17.FINID  = T1.FINID 
				LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY  = T24.POLICYCODE 
				LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS  = T27.CUSTSTSCODE 
				LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
				LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE  = T30.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID  = T33.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE  = T34.ROFFICERCODE 
				LEFT JOIN BMTDEPARTMENTS T35 ON T1.SALESDEPARTMENT  = T35.DEPTCODE 
				LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION  = T36.DIVISIONCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME  = T37.ROFFICERCODE 
				LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE  = 'ELGMETHOD' 
				LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE  = T39.LOANPURPOSECODE 
				LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
				LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
				LEFT JOIN AMTVEHICLEDEALER T41 ON T1.MANUFACTURERDEALERID = T41.DEALERID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				WHERE NOT EXISTS (SELECT 1 FROM FINANCEMAIN_TEMP WHERE FINANCEMAIN_TEMP.FINID = T1.FINID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="60_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_view');	
			]]>
		</sql>
	</changeSet>
	<changeSet id="61_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemain_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="61" author="Gopal.p">
		<createView viewName="FINANCEMAIN_TVIEW" replaceIfExists="true">
		    <![CDATA[
				SELECT T1.FINID,
					T1.FINREFERENCE,
					T1.INVESTMENTREF,
					T1.NUMBEROFTERMS,
					T1.GRCPERIODENDDATE,
					T1.ALLOWGRCPERIOD,
					T1.GRACEBASERATE,
					T1.GRACESPECIALRATE,
					T1.GRCPFTRATE,
					T1.GRCPFTFRQ,
					T1.NEXTGRCPFTDATE,
					T1.ALLOWGRCPFTRVW,
					T1.GRCPFTRVWFRQ,
					T1.NEXTGRCPFTRVWDATE,
					T1.ALLOWGRCCPZ,
					T1.GRCCPZFRQ,
					T1.NEXTGRCCPZDATE,
					T1.REPAYBASERATE,
					T1.REPAYSPECIALRATE,
					T1.REPAYPROFITRATE,
					T1.REPAYFRQ,
					T1.NEXTREPAYDATE,
					T1.REPAYPFTFRQ,
					T1.NEXTREPAYPFTDATE,
					T1.ALLOWREPAYRVW,
					T1.REPAYRVWFRQ,
					T1.NEXTREPAYRVWDATE,
					T1.ALLOWREPAYCPZ,
					T1.REPAYCPZFRQ,
					T1.NEXTREPAYCPZDATE,
					T1.MATURITYDATE,
					T1.CPZATGRACEEND,
					T1.DOWNPAYMENT,
					T1.GRACEFLATAMOUNT,
					T1.REQREPAYAMOUNT,
					T1.TOTALPROFIT,
					T1.TOTALCPZ,
					T1.TOTALGROSSPFT,
					T1.TOTALGROSSGRCPFT,
					T1.TOTALGRACEPFT,
					T1.TOTALGRACECPZ,
					T1.GRCRATEBASIS,
					T1.REPAYRATEBASIS,
					T1.FINTYPE,
					T1.FINREMARKS,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.REQMATURITY,
					T1.CALTERMS,
					T1.CALMATURITY,
					T1.FIRSTREPAY,
					T1.LASTREPAY,
					T1.FINSTARTDATE,
					T1.FINAMOUNT,
					T1.FINAMOUNT + T1.FEECHARGEAMT - T1.DOWNPAYMENT LOVDESCFINANCINGAMOUNT,
					T1.FINREPAYMENTAMOUNT,
					T1.CUSTID,
					T1.DEFFERMENTS,
					T1.PLANDEFERCOUNT,
					T1.FINBRANCH,
					T1.FINSOURCEID,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.ALLOWEDDEFFRQCHANGE,
					T1.AVAILEDDEFFRQCHANGE,
					T1.RECALTYPE,
					T1.FINASSETVALUE,
					T1.FINISACTIVE,
					T1.LIMITVALID,
					T1.OVERRIDELIMIT,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T7.FINTYPEDESC LOVDESCFINTYPENAME,
					T7.FINMAXAMOUNT LOVDESCFINMAXAMT,
					T7.FINMINAMOUNT LOVDESCFINMINAMOUNT,
					T1.MINDOWNPAYPERC,
					T7.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
					T7.FINISDWPAYREQUIRED LOVDESCDWNPAYREQ,
					T7.FINMAXDIFFERMENT LOVDESCFINMAXDIFFERMENT,
					T12.BRANCHDESC LOVDESCFINBRANCHNAME,
					T12.BRANCHPROVINCE FINBRANCHPROVINCECODE,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.LASTREPAYRVWDATE,
					T1.LASTREPAYCPZDATE,
					T1.ALLOWGRCREPAY,
					T1.GRCSCHDMTHD,
					T1.GRCMARGIN,
					T1.REPAYMARGIN,
					T1.FINCURRASSETVALUE,
					T1.FINCOMMITMENTREF,
					T1.FINLIMITREF,
					T1.FINCONTRACTDATE,
					T17.ACRTILLLBD LOVDESCACCRUEDTILLLBD,
					T7.FINRVWRATEAPPLFOR,
					T1.TOTALREPAYAMT,
					T1.CLOSINGSTATUS,
					T1.FINAPPROVEDDATE,
					T1.FEECHARGEAMT,
					T1.BLACKLISTED,
					T1.FINREPAYPFTONFRQ,
					T1.ANUALIZEDPERCRATE,
					T1.EFFECTIVERATEOFRETURN,
					T1.MIGRATEDFINANCE,
					T1.SCHEDULEMAINTAINED,
					T1.SCHEDULEREGENERATED,
					T1.FINPURPOSE,
					T39.LOANPURPOSEDESC LOVDESCFINPURPOSENAME,
					T1.FINSTATUS,
					T1.FINSTSREASON,
					T1.INITIATEUSER,
					T7.FINSCHEDULEON LOVDESCFINSCHEDULEON,
					T1.CUSTDSR,
					T1.JOINTACCOUNT,
					T1.JOINTCUSTID,
					T1.DOWNPAYBANK,
					T1.DOWNPAYSUPL,
					T1.SECURITYCOLLATERAL,
					T1.APPROVED,
					T1.DISCREPANCY,
					T1.LIMITAPPROVED,
					T1.GRACETERMS,
					T7.FINDIVISION LOVDESCFINDIVISION,
					T1.RCDMAINTAINSTS,
					T1.FINREPAYMETHOD,
					T1.GRCPROFITDAYSBASIS,
					T1.STEPFINANCE,
					T1.STEPTYPE,
					T1.STEPPOLICY,
					T1.ALWMANUALSTEPS,
					T1.NOOFSTEPS,
					T1.LINKEDFINREF,
					T1.NEXTUSERID,
					T1.PRIORITY,
					T24.POLICYDESC LOVDESCSTEPPOLICYNAME,
					T1.GRCMINRATE,
					T1.GRCMAXRATE,
					T1.RPYMINRATE,
					T1.RPYMAXRATE,
					T1.DEVIATIONAPPROVAL,
					T1.MANUALSCHEDULE,
					T1.CREDITINSAMT,
					T27.CUSTSTSDESCRIPTION,
					T1.INITIATEDATE,
					T1.FINPREAPPROVEDREF,
					T1.ACCOUNTSOFFICER,
					T28.DEALERNAME LOVDESCACCOUNTSOFFICER,
					T28.DEALERCITY LOVDESCSOURCECITY,
					T1.DSACODE,
					T30.ROFFICERDESC DSACODEDESC,
					T1.TDSAPPLICABLE,
					T1.MANDATEID,
					T1.DROPLINEFRQ,
					T1.FIRSTDROPLINEDATE,
					T1.PFTSERVICINGODLIMIT,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.CALROUNDINGMODE,
					T1.ALWMULTIDISB,
					T1.APPLICATIONNO,
					T1.REFERRALID,
					T33.ROFFICERDESC REFERRALIDDESC,
					T1.DMACODE,
					T34.ROFFICERDESC DMACODEDESC,
					T1.SALESDEPARTMENT,
					T35.DEPTDESC SALESDEPARTMENTDESC,
					T1.QUICKDISB,
					T1.WIFREFERENCE,
					T1.UNPLANEMIHLOCKPERIOD,
					T1.UNPLANEMICPZ,
					T1.REAGECPZ,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.AVAILEDUNPLANEMI,
					T1.AVAILEDREAGEH,
					T1.BPIAMOUNT,
					T1.DEDUCTFEEDISB,
					T1.RVWRATEAPPLFOR,
					T1.SCHCALONRVW,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.PROMOTIONCODE,
					T1.RESTRUCTURELOAN,
					T1.OLDFINREFERENCE,
					T1.REAGEBUCKET,
					T1.FINCATEGORY,
					T1.PRODUCTCATEGORY,
					T1.ROUNDINGTARGET,
					T36.ENTITYCODE LOVDESCENTITYCODE,
					T1.ELIGIBILITYMETHOD,
					T38.FIELDCODEVALUE LOVELIGIBILITYMETHOD,
					T38.VALUEDESC LOVDESCELIGIBILITYMETHOD,
					T1.EMPLOYEENAME,
					T37.ROFFICERDESC EMPLOYEENAMEDESC,
					T1.SAMPLINGREQUIRED,
					T1.LEGALREQUIRED,
					T1.GRCMAXAMOUNT,
					T1.CONNECTOR,
					T40.DEALERNAME CONNECTORCODE,
					T40.DEALERCITY CONNECTORDESC,
					T1.ADVANCEEMI,
					T1.ADVEMITERMS,
					T1.BPIPFTDAYSBASIS,
					T1.FIXEDRATETENOR,
					T1.FIXEDTENORRATE,
					T12.BRANCHTEL FINBRANCHCONTACT,
					T1.PROCESSATTRIBUTES,
					T1.BUSINESSVERTICAL,
					BV.CODE BUSINESSVERTICALCODE,
					BV.DESCRIPTION BUSINESSVERTICALDESC,
					T1.GRCADVTYPE,
					T1.GRCADVTERMS,
					T1.ADVTYPE,
					T1.ADVTERMS,
					T1.ADVSTAGE,
					T1.TDSPERCENTAGE,
					T1.TDSSTARTDATE,
					T1.TDSENDDATE,
					T1.TDSLIMITAMT,
					T1.VANREQ,
					T1.VANCODE,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING,
					T1.SANBSDSCHDLE,
					T1.PROMOTIONSEQID,
					T1.SVAMOUNT,
					T1.CBAMOUNT,
					T1.APPLIEDLOANAMT,
					T1.FINISRATERVWATGRCEND,
					T1.REQLOANAMT,
					T1.REQLOANTENOR,
					T1.FINOCRREQUIRED,
					T1.OFFERPRODUCT,
					T1.OFFERAMOUNT,
					T1.CUSTSEGMENTATION,
					T1.BASEPRODUCT,
					T1.PROCESSTYPE,
					T1.BUREAUTIMESERIES,
					T1.CAMPAIGNNAME,
					T1.EXISTINGLANREFNO,
					T1.LEADSOURCE,
					T1.POSOURCE,
					T1.RSA,
					T1.VERIFICATION,
					T1.SOURCINGBRANCH,
					T1.SOURCHANNELCATEGORY,
					T1.ASMNAME,
					T13.BRANCHDESC LOVDESCSOURCINGBRANCH,
					T1.OFFERID,
					T1.ENDGRCPERIODAFTRFULLDISB,
					T1.AUTOINCGRCENDDATE,
					T1.ALWGRCADJ,
					T1.PMAY,
					T1.ALWLOANSPLIT,
					T1.PARENTREF,
					T1.LOANSPLITTED,
					T1.INSTBASEDSCHD,
					T1.PLANEMIHALWINGRACE,
					T1.ALLOWSUBVENTION,
					T1.TDSTYPE,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS,
					T1.SCHDVERSION,
					T1.SUBVENTIONFROM,
					T1.MANUFACTURERDEALERID,
					T41.DEALERNAME MANUFACTURERDEALERNAME,
					T41.CODE MANUFACTURERDEALERCODE,
					T1.ESCROW,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MANUALSCHDTYPE,
					T1.ISRA,
					T1.SANCTIONEDDATE,
					T1.OVERDRAFTTXNCHRGREQ,
					T1.OVERDRAFTCALCCHRG,
					T1.OVERDRAFTCHRGAMTORPERC,
					T1.OVERDRAFTCHRCALON
				FROM FINANCEMAIN_TEMP T1
				JOIN RMTFINANCETYPES T7 ON T1.FINTYPE  = T7.FINTYPE 
				LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH  = T12.BRANCHCODE 
				LEFT JOIN RMTBRANCHES T13 ON T1.SOURCINGBRANCH = T13.BRANCHCODE
				LEFT JOIN FINPFTDETAILS T17 ON T17.FINID  = T1.FINID 
				LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY  = T24.POLICYCODE 
				LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS  = T27.CUSTSTSCODE 
				LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
				LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE  = T30.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID  = T33.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE  = T34.ROFFICERCODE 
				LEFT JOIN BMTDEPARTMENTS T35 ON T1.SALESDEPARTMENT  = T35.DEPTCODE 
				LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION  = T36.DIVISIONCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME  = T37.ROFFICERCODE 
				LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE  = 'ELGMETHOD' 
				LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE  = T39.LOANPURPOSECODE 
				LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
				LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
				LEFT JOIN AMTVEHICLEDEALER T41 ON T1.MANUFACTURERDEALERID = T41.DEALERID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
			]]>
		</createView>
	</changeSet>

	<changeSet id="61_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="62_pre" author="Gopal.p" dbms="postgresql">
		<sql> 
			<![CDATA[ 
				select deps_save_and_drop_dependencies ('plf', 'financemain_dview'); 
			]]>
		</sql>
	</changeSet>

	<changeSet id="62" author="Gopal.p">
		<createView viewName="FINANCEMAIN_DVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINID,
					T1.FINREFERENCE,
					T1.INVESTMENTREF,
					T1.FINTYPE,
					T1.FINCCY,
					T1.FINAMOUNT,
					T1.DOWNPAYMENT,
					T1.FEECHARGEAMT,
					T1.SCHEDULEMETHOD,
					T1.RECORDSTATUS,
					T1.RECORDTYPE,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.FINBRANCH,
					T1.FINASSETVALUE,
					T2.CUSTCIF LOVDESCCUSTCIF,
					T2.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
					T2.CUSTID,
					T2.CUSTCIF,
					T3.FINCATEGORY LOVDESCPRODUCTCODENAME,
					T3.FINDIVISION LOVDESCFINDIVISION,
					T1.SAMPLINGREQUIRED,
					T1.LEGALREQUIRED,
					T1.INSTBASEDSCHD,
					T1.ALLOWSUBVENTION,
					T1.TDSTYPE,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS,
					T1.SCHDVERSION,
					T1.SUBVENTIONFROM,
					T1.MANUFACTURERDEALERID,
					T5.DEALERNAME MANUFACTURERDEALERNAME,
					T5.CODE MANUFACTURERDEALERCODE,
					T1.ESCROW,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MANUALSCHDTYPE,
					T1.ISRA,
					T1.SANCTIONEDDATE,
					T1.OVERDRAFTTXNCHRGREQ,
					T1.OVERDRAFTCALCCHRG,
					T1.OVERDRAFTCHRGAMTORPERC,
					T1.OVERDRAFTCHRCALON
				FROM FINANCEMAIN_TEMP T1
				JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
				JOIN RMTFINANCETYPES T3 ON T3.FINTYPE = T1.FINTYPE
				JOIN INVESTMENTFINHEADER T4 ON T4.INVESTMENTREF = T1.INVESTMENTREF
				LEFT JOIN AMTVEHICLEDEALER T5 ON T1.MANUFACTURERDEALERID = T5.DEALERID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
			]]>
		</createView>
	</changeSet>

	<changeSet id="62_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_dview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="63_Pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemain_dataview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="63" author="Gopal.p">
		<createView viewName="FINANCEMAIN_DATAVIEW" replaceIfExists="true"> 
			<![CDATA[
				SELECT T1.FINID,
					T1.FINREFERENCE,
					T1.FINTYPE,
					T2.CUSTCIF LOVDESCCUSTCIF,
					T1.CUSTID,
					T1.CLOSINGSTATUS,
					T1.FINISACTIVE,
					T1.MATURITYDATE,
					T1.PRODUCTCATEGORY,
					T1.WRITEOFFLOAN,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS,
					T1.SCHDVERSION,
					T4.TOTALPRIBAL OUTSTANDINGAMOUNT,
					T1.MANUALSCHDTYPE,
          			T1.MANUALSCHEDULE
				FROM FINANCEMAIN T1
				JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
				JOIN RMTFINANCETYPES T3 ON T3.FINTYPE = T1.FINTYPE
				JOIN FINPFTDETAILS T4 ON T4.FINID = T1.FINID
				LEFT JOIN AMTVEHICLEDEALER T5 ON T1.MANUFACTURERDEALERID = T5.DEALERID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				WHERE (T1.CLOSINGSTATUS IS NULL OR T1.CLOSINGSTATUS <> 'C')
			]]>
		</createView>
	</changeSet>

	<changeSet id="63_Post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_dataview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="64_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemain_lfview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="64" author="Gopal.p">
		<createView viewName="FINANCEMAIN_LFVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT F.FINID,
					F.FINREFERENCE, 
					F.CUSTID, 
					C.CUSTCIF LOVDESCCUSTCIF, 
					C.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
					F.FINTYPE, 
					F.FINISACTIVE, 
					SD.ENTITYCODE,
					F.RCDMAINTAINSTS,
					F.RECORDSTATUS,
					F.QUICKDISB,
					F.ESCROW,
					F.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					F.MANUALSCHDTYPE,
          			F.MANUALSCHEDULE,
          			F.ISRA,
          			F.SANCTIONEDDATE,
					F.OVERDRAFTTXNCHRGREQ,
					F.OVERDRAFTCALCCHRG,
					F.OVERDRAFTCHRGAMTORPERC,
					F.OVERDRAFTCHRCALON
				FROM FINANCEMAIN_TEMP F 
				INNER JOIN CUSTOMERS C ON F.CUSTID = C.CUSTID AND F.QUICKDISB = 1 AND F.RECORDSTATUS = 'Submitted'
				INNER JOIN RMTFINANCETYPES FT ON FT.FINTYPE = F.FINTYPE
				INNER JOIN SMTDivisiondetail SD On FT.FINDIVISION = SD.DivisionCode
				LEFT JOIN CUSTOMERBANKINFO CB ON F.CUSTBANKID = CB.BANKID
				UNION ALL
				SELECT F.FINID,
					F.FINREFERENCE, 
					F.CUSTID, 
					C.CUSTCIF LOVDESCCUSTCIF, 
					C.CUSTSHRTNAME LOVDESCCUSTSHRTNAME, 
					F.FINTYPE, 
					F.FINISACTIVE, 
					SD.ENTITYCODE, 
					F.RCDMAINTAINSTS,
					F.RECORDSTATUS,
					F.QUICKDISB,
					F.ESCROW,
					F.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					F.MANUALSCHDTYPE,
          			F.MANUALSCHEDULE,
          			F.ISRA,
          			F.SANCTIONEDDATE,
					F.OVERDRAFTTXNCHRGREQ,
					F.OVERDRAFTCALCCHRG,
					F.OVERDRAFTCHRGAMTORPERC,
					F.OVERDRAFTCHRCALON
				FROM FINANCEMAIN F INNER JOIN CUSTOMERS C ON F.CUSTID = C.CUSTID
				INNER JOIN RMTFINANCETYPES FT ON FT.FINTYPE = F.FINTYPE
				INNER JOIN SMTDIVISIONDETAIL SD ON FT.FINDIVISION = SD.DIVISIONCODE
				LEFT JOIN CUSTOMERBANKINFO CB ON F.CUSTBANKID = CB.BANKID
				WHERE NOT EXISTS (SELECT 1 EXPR1 FROM FINANCEMAIN_TEMP WHERE FINID = F.FINID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="64_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_lfview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="65_pre" author="Alekhya.t" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rejectfinancemain_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="65" author="Alekhya.t">
		<createView viewName="REJECTFINANCEMAIN_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT F.FINID,
					F.FINREFERENCE,
					T.FINCATEGORY LOVDESCPRODUCTCODENAME,
				    F.FINTYPE,
				    F.FINBRANCH,
				    F.FINSTARTDATE,
				    F.MATURITYDATE,
				    F.NUMBEROFTERMS,
				    F.FINCCY,
				    F.FINAMOUNT,
					(((F.FINAMOUNT - F.DOWNPAYMENT) + F.FEECHARGEAMT) + F.INSURANCEAMT) FINANCINGAMOUNT,
				    F.FEECHARGEAMT,
				    F.INSURANCEAMT,
					((((F.FINAMOUNT - F.DOWNPAYMENT) + F.FEECHARGEAMT) + F.INSURANCEAMT) - F.FINREPAYMENTAMOUNT) CURFINAMOUNT,
				    F.DOWNPAYMENT,
				    F.FINCURRASSETVALUE,
				    F.FINASSETVALUE,
				    F.ALLOWDRAWINGPOWER,
				    F.PROMOTIONSEQID,
				    F.SANBSDSCHDLE,
					C.CUSTCIF LOVDESCCUSTCIF,
				    F.SVAMOUNT,
				    F.CBAMOUNT,
				    F.FINISRATERVWATGRCEND,
				    F.ALWGRCADJ,
				    F.ENDGRCPERIODAFTRFULLDISB,
				    F.AUTOINCGRCENDDATE,
					F.REQLOANAMT,
					F.REQLOANTENOR,
					F.OFFERPRODUCT,
					F.OFFERAMOUNT,
					F.CUSTSEGMENTATION,
					F.BASEPRODUCT,
					F.PROCESSTYPE,
					F.BUREAUTIMESERIES,
					F.CAMPAIGNNAME,
					F.EXISTINGLANREFNO,
					F.LEADSOURCE,
					F.POSOURCE,
					F.RSA,
					F.VERIFICATION,
					F.SOURCINGBRANCH,
					F.SOURCHANNELCATEGORY,
					F.ASMNAME,
					F.TDSTYPE,
					F.WRITEOFFLOAN,
					F.RESTRUCTURE,
					F.CALCOFSTEPS,
					F.STEPSAPPLIEDFOR,
					F.NOOFGRCSTEPS,
					F.FINREPAYMENTAMOUNT,
					F.MANUALSCHDTYPE,
					F.ISRA,
					F.SANCTIONEDDATE,
					F.OVERDRAFTTXNCHRGREQ,
					F.OVERDRAFTCALCCHRG,
					F.OVERDRAFTCHRGAMTORPERC,
					F.OVERDRAFTCHRCALON
			    FROM REJECTFINANCEMAIN F
				LEFT JOIN CUSTOMERS C ON F.CUSTID = C.CUSTID
				LEFT JOIN RMTFINANCETYPES T ON F.FINTYPE = T.FINTYPE
			 ]]>
		</createView>
	</changeSet>

	<changeSet id="65_post" author="Alekhya.t" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rejectfinancemain_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="66_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'wiffinfeedetail_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="66" author="Gopal.p">
		<createView viewName="WIFFINFEEDETAIL_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FEEID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.FEESEQ,
					T1.ORIGINATIONFEE,
					T1.FINEVENT,
					T1.FEETYPEID,
					T1.FEEORDER,
					T1.CALCULATEDAMOUNT,
					T1.ACTUALAMOUNT,
					T1.WAIVEDAMOUNT,
					T1.PAIDAMOUNT,
					T1.FEESCHEDULEMETHOD,
					T1.TERMS,
					T1.REMAININGFEE,
					T1.PAYMENTREF,
					T1.CALCULATIONTYPE,
					T1.RULECODE,
					T1.FIXEDAMOUNT,
					T1.PERCENTAGE,
					T1.CALCULATEON,
					T1.ALWDEVIATION,
					T1.MAXWAIVERPERC,
					T1.ALWMODIFYFEE,
					T1.ALWMODIFYFEESCHDMTHD,
					T1.VASREFERENCE,
					T1.STATUS,
					T1.TAXAPPLICABLE,
					T1.TAXCOMPONENT,
					T1.PAIDAMOUNTORIGINAL,
					T1.PAIDAMOUNTGST,
					T1.NETAMOUNTORIGINAL,
					T1.NETAMOUNTGST,
					T1.NETAMOUNT,
					T1.REMAININGFEEORIGINAL,
					T1.REMAININGFEEGST,
					T1.ACTUALAMOUNTORIGINAL,
					T1.ACTUALAMOUNTGST,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FEETYPECODE,
					T2.FEETYPEDESC,
					T1.REFUNDABLE,
					T1.INSTRUCTIONUID,
					T1.WAIVEDGST,
					T1.REFERENCEID,
					T1.TAXHEADERID,
					T1.PAIDTDS,
					T1.REMTDS,
					T1.NETTDS,
					T2.TDSREQ
				FROM WIFFINFEEDETAIL_TEMP T1
				INNER JOIN WIFFINANCEMAIN_TEMP FM ON FM.FINID = T1.FINID
				LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
				UNION ALL
				SELECT T1.FEEID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.FEESEQ,
					T1.ORIGINATIONFEE,
					T1.FINEVENT,
					T1.FEETYPEID,
					T1.FEEORDER,
					T1.CALCULATEDAMOUNT,
					T1.ACTUALAMOUNT,
					T1.WAIVEDAMOUNT,
					T1.PAIDAMOUNT,
					T1.FEESCHEDULEMETHOD,
					T1.TERMS,
					T1.REMAININGFEE,
					T1.PAYMENTREF,
					T1.CALCULATIONTYPE,
					T1.RULECODE,
					T1.FIXEDAMOUNT,
					T1.PERCENTAGE,
					T1.CALCULATEON,
					T1.ALWDEVIATION,
					T1.MAXWAIVERPERC,
					T1.ALWMODIFYFEE,
					T1.ALWMODIFYFEESCHDMTHD,
					T1.VASREFERENCE,
					T1.STATUS,
					T1.TAXAPPLICABLE,
					T1.TAXCOMPONENT,
					T1.PAIDAMOUNTORIGINAL,
					T1.PAIDAMOUNTGST,
					T1.NETAMOUNTORIGINAL,
					T1.NETAMOUNTGST,
					T1.NETAMOUNT,
					T1.REMAININGFEEORIGINAL,
					T1.REMAININGFEEGST,
					T1.ACTUALAMOUNTORIGINAL,
					T1.ACTUALAMOUNTGST,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FEETYPECODE,
					T2.FEETYPEDESC,
					T1.REFUNDABLE,
					T1.INSTRUCTIONUID,
					T1.WAIVEDGST,
					T1.REFERENCEID,
					T1.TAXHEADERID,
					T1.PAIDTDS,
					T1.REMTDS,
					T1.NETTDS,
					T2.TDSREQ
				FROM WIFFINFEEDETAIL T1
				INNER JOIN WIFFINANCEMAIN FM ON FM.FINID = T1.FINID
				LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
				WHERE NOT EXISTS (SELECT 1 FROM WIFFINFEEDETAIL_TEMP
				WHERE WIFFINFEEDETAIL_TEMP.FINID = T1.FINID AND WIFFINFEEDETAIL_TEMP.ORIGINATIONFEE = T1.ORIGINATIONFEE AND WIFFINFEEDETAIL_TEMP.FINEVENT = T1.FINEVENT AND WIFFINFEEDETAIL_TEMP.FEETYPEID = T1.FEETYPEID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="66_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'wiffinfeedetail_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="67_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'foreclosure_tview');
			]]>
		</sql>
	</changeSet>
	<changeSet id="67" author="Gopal.p">
		<createView viewName="FORECLOSURE_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T3.CUSTCIF,
				    T1.REFERENCE,
				    T2.FINTYPE,
				    T1.RECEIPTID,
				    T1.RECEIPTDATE,
				    T1.RECEIPTAMOUNT,
				    T1.RECEIPTPURPOSE,
				    T2.FINBRANCH,
				    T2.FINCURRASSETVALUE,
				    T2.PRODUCTCATEGORY,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T4.ROLEDESC LOVDESCREQUESTSTAGE,
				    T1.RECEIPTMODESTATUS,
				    T1.ACTFINRECEIPT,
				    T1.RECEIVEDDATE,
				    T1.KNOCKOFFTYPE,
				    T1.RECEIPTMODE,
				    T1.TRANSACTIONREF,
				    T5.PARTNERBANKCODE
   				FROM FINRECEIPTHEADER_TEMP T1
     			LEFT JOIN FINANCEMAIN T2 ON T1.REFERENCE = T2.FINREFERENCE
     			LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
     			LEFT JOIN PARTNERBANKS T5 ON T5.PARTNERBANKID = T1.PARTNERBANKID
     			JOIN SECROLES T4 ON T1.NEXTROLECODE = T4.ROLECD
			]]>
		</createView>
	</changeSet>
	<changeSet id="67_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'foreclosure_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="68_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finoddetails_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="68" author="Gopal.p">
		<createView viewName="FINODDETAILS_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FM.FINID,
					FM.FINREFERENCE,
					OD.FINODSCHDDATE,
					OD.FINODFOR,
					OD.FINBRANCH,
					OD.FINTYPE,
					OD.CUSTID,
					OD.FINODTILLDATE,
					OD.FINCURODAMT,
					OD.FINCURODPRI,
					OD.FINCURODPFT,
					OD.FINMAXODAMT,
					OD.FINMAXODPRI,
					OD.FINMAXODPFT,
					OD.GRACEDAYS,
					OD.INCGRACEDAYS,
					OD.FINCURODDAYS,
					OD.TOTPENALTYAMT,
					OD.TOTWAIVED,
					OD.TOTPENALTYPAID,
					OD.LPIAMT,
					OD.LPIPAID,
					OD.LPIBAL,
					OD.TOTPENALTYBAL,
					OD.FINLMDFDATE,
					COALESCE(PR.APPLYODPENALTY, 0)  APPLYODPENALTY,
					COALESCE(PR.ODINCGRCDAYS, 0)  ODINCGRCDAYS,
					COALESCE(PR.ODCHARGETYPE, '')  ODCHARGETYPE,
					COALESCE(PR.ODGRACEDAYS, 0)  ODGRACEDAYS,
					COALESCE(PR.ODCHARGECALON, '')  ODCHARGECALON,
					COALESCE(PR.ODCHARGEAMTORPERC, 0)  ODCHARGEAMTORPERC,
					COALESCE(PR.ODALLOWWAIVER, 0)  ODALLOWWAIVER,
					COALESCE(PR.ODMAXWAIVERPERC, 0)  ODMAXWAIVERPERC,
					COALESCE(PR.ODRULECODE, '')  ODRULECODE,
					OD.LOCKODRECALCAL,
					OD.LPPTDSPAID,
					OD.LPCPZ,
					OD.LPCPZAMOUNT,
					OD.LPCURCPZBAL,
					OD.PRESENTMENTID,
					OD.CUROVERDRAFTTXNCHRG,
					OD.MAXOVERDRAFTTXNCHRG
				FROM FINODDETAILS OD
				INNER JOIN FINANCEMAIN FM ON FM.FINID = OD.FINID
				LEFT JOIN FINODPENALTY_LATEST_RATES_VIEW PR ON FM.FINID = PR.FINID
			]]>
		</createView>
	</changeSet>

	<changeSet id="68_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finoddetails_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="69_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finodpenaltyrates_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="69" author="Gopal.p">
		<createView viewName="FINODPENALTYRATES_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FINID,
					FINREFERENCE,
					FINEFFECTDATE,
					APPLYODPENALTY,
					ODINCGRCDAYS,
					ODCHARGETYPE,
					ODGRACEDAYS,
					ODCHARGECALON,
					ODCHARGEAMTORPERC,
					ODALLOWWAIVER,
					ODMAXWAIVERPERC,
					ODRULECODE,
					ODMINCAPAMOUNT,
					ODTDSREQ,
					OVERDRAFTEXTGRACEDAYS,
					OVERDRAFTCOLCHRGFEETYPE,
					OVERDRAFTCOLAMT
				FROM FINODPENALTYRATES
			]]>
		</createView>
	</changeSet>

	<changeSet id="69_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finodpenaltyrates_aview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="70_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finodpenaltyrates_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="70" author="Gopal.p">
		<createView viewName="FINODPENALTYRATES_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FINID,
					FINREFERENCE,
					FINEFFECTDATE,
					APPLYODPENALTY,
					ODINCGRCDAYS,
					ODCHARGETYPE,
					ODGRACEDAYS,
					ODCHARGECALON,
					ODCHARGEAMTORPERC,
					ODALLOWWAIVER,
					ODMAXWAIVERPERC,
					ODRULECODE,
					ODMINCAPAMOUNT,
					ODTDSREQ,
					OVERDRAFTEXTGRACEDAYS,
					OVERDRAFTCOLCHRGFEETYPE,
					OVERDRAFTCOLAMT
				FROM FINODPENALTYRATES_TEMP
			]]>
		</createView>
	</changeSet>

	<changeSet id="70_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finodpenaltyrates_tview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="71_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finodpenaltyrates_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="71" author="Gopal.p">
		<createView viewName="FINODPENALTYRATES_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FINID,
					FINREFERENCE,
					FINEFFECTDATE,
					APPLYODPENALTY,
					ODINCGRCDAYS,
					ODCHARGETYPE,
					ODGRACEDAYS,
					ODCHARGECALON,
					ODCHARGEAMTORPERC,
					ODALLOWWAIVER,
					ODMAXWAIVERPERC,
					ODRULECODE,
					ODMINCAPAMOUNT,
					ODTDSREQ,
					OVERDRAFTEXTGRACEDAYS,
					OVERDRAFTCOLCHRGFEETYPE,
					OVERDRAFTCOLAMT
				FROM FINODPENALTYRATES_TEMP
				UNION
				SELECT FINID,
					FINREFERENCE,
					FINEFFECTDATE,
					APPLYODPENALTY,
					ODINCGRCDAYS,
					ODCHARGETYPE,
					ODGRACEDAYS,
					ODCHARGECALON,
					ODCHARGEAMTORPERC,
					ODALLOWWAIVER,
					ODMAXWAIVERPERC,
					ODRULECODE,
					ODMINCAPAMOUNT,
					ODTDSREQ,
					OVERDRAFTEXTGRACEDAYS,
					OVERDRAFTCOLCHRGFEETYPE,
					OVERDRAFTCOLAMT
				FROM FINODPENALTYRATES
				WHERE NOT EXISTS (SELECT 1 FROM FINODPENALTYRATES_TEMP WHERE FINID = FINODPENALTYRATES.FINID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="71_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finodpenaltyrates_view');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="72_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'manualadvisemovements_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="72" author="Gopal.p">
		<createView viewName="MANUALADVISEMOVEMENTS_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.MOVEMENTID,
					T1.ADVISEID,
					T1.MOVEMENTDATE,
					T1.MOVEMENTAMOUNT,
					T1.PAIDAMOUNT,
					T1.WAIVEDAMOUNT,
					T1.STATUS,
					T1.RECEIPTID,
					T1.RECEIPTSEQID,
					T1.PAIDCGST,
					T1.PAIDSGST,
					T1.PAIDIGST,
					T1.PAIDUGST,
					T2.ADVISETYPE,
					T3.FEETYPECODE,
					COALESCE(T3.TAXAPPLICABLE, 0) TAXAPPLICABLE,
					T3.TAXCOMPONENT,
					T3.FEETYPEDESC,
					T1.WAIVEDCGST,
					T1.WAIVEDSGST,
					T1.WAIVEDUGST,
					T1.WAIVEDIGST,
					T1.TAXHEADERID,
					T2.HOLDDUE,
					T1.TDSPAID,
					T2.DUEDATE
  				FROM MANUALADVISEMOVEMENTS_TEMP T1 
  				JOIN MANUALADVISE T2 ON T1.ADVISEID = T2.ADVISEID 
  				LEFT JOIN FEETYPES T3 ON T2.FEETYPEID = T3.FEETYPEID
			]]>
		</createView>
	</changeSet>

	<changeSet id="72_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'manualadvisemovements_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="73_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'manualadvisemovements_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="73" author="Gopal.p">
		<createView viewName="MANUALADVISEMOVEMENTS_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.MOVEMENTID,
					T1.ADVISEID,
					T1.MOVEMENTDATE,
					T1.MOVEMENTAMOUNT,
					T1.PAIDAMOUNT,
					T1.WAIVEDAMOUNT,
    				T1.STATUS, 
    				T1.RECEIPTID, 
    				T1.RECEIPTSEQID, 
    				T1.PAIDCGST, 
    				T1.PAIDSGST, 
    				T1.PAIDIGST,
    				T1.PAIDUGST,
    				T2.ADVISETYPE, 
    				T3.FEETYPECODE,
    				COALESCE(T3.TAXAPPLICABLE, 0) TAXAPPLICABLE,
    				T3.TAXCOMPONENT,
    				T3.FEETYPEDESC,
    				T1.WAIVEDCGST,
    				T1.WAIVEDSGST, 
    				T1.WAIVEDUGST, 
    				T1.WAIVEDIGST,
    				T1.TAXHEADERID,
    				T2.HOLDDUE,
					T1.TDSPAID,
					T2.DUEDATE
				FROM MANUALADVISEMOVEMENTS T1
    			JOIN MANUALADVISE T2 ON T1.ADVISEID = T2.ADVISEID
    			LEFT JOIN FEETYPES T3 ON T2.FEETYPEID = T3.FEETYPEID
			]]>
		</createView>
	</changeSet>

	<changeSet id="73_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'manualadvisemovements_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="74_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'manualadvise_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="74" author="Gopal.p">
		<createView viewName="MANUALADVISE_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ADVISEID,
					T1.ADVISETYPE,
					FM.FINID,
					FM.FINREFERENCE,
					T1.FEETYPEID,
					T1.SEQUENCE,
					T1.ADVISEAMOUNT,
					T1.PAIDAMOUNT,
					T1.WAIVEDAMOUNT,
					T1.REMARKS,
					T1.VALUEDATE,
					T1.POSTDATE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FEETYPEDESC,
					T2.FEETYPECODE,
					T1.BOUNCEID,
					T1.RECEIPTID,
					T3.BOUNCECODE,
					T1.RESERVEDAMT,
					T1.BALANCEAMT,
					T3.REASON BOUNCECODEDESC,
					COALESCE(T2.TAXAPPLICABLE, 0) TAXAPPLICABLE,
					COALESCE(T2.TDSREQ, 0) TDSREQ,
					T2.TAXCOMPONENT,
					T1.PAIDCGST,
					T1.PAIDSGST,
					T1.PAIDIGST,
					T1.PAIDUGST,
					T1.WAIVEDCGST,
					T1.WAIVEDSGST,
					T1.WAIVEDUGST,
					T1.WAIVEDIGST,
					T1.WAIVEDCESS,
					T1.PAIDCESS,
					T1.FINSOURCE,
					T1.DUECREATION,
					T1.LINKEDTRANID,
					T1.TDSPAID,
					T1.HOLDDUE,
					T1.PRESENTMENTID,
					T1.STATUS,
					T1.REASON,
					T1.DUEDATE
				FROM MANUALADVISE T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
				LEFT JOIN BOUNCEREASONS T3 ON T1.BOUNCEID = T3.BOUNCEID
			]]>
		</createView>
	</changeSet>

	<changeSet id="74_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'manualadvise_aview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="75_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'manualadvise_lovview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="75" author="Gopal.p">
		<createView viewName="MANUALADVISE_LOVVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ADVISEID,
					T1.FEETYPEID,
					T1.ADVISETYPE,
					FM.FINID,
					FM.FINREFERENCE,
					T1.VALUEDATE,
					T1.POSTDATE,
					round(T1.ADVISEAMOUNT/100, 2)  ADVISEAMOUNT,
					round(T1.RESERVEDAMT/100, 2) RESERVEDAMT,
					round(T1.BALANCEAMT/100, 2) BALANCEAMT
				FROM MANUALADVISE T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				WHERE T1.HOLDDUE = 0
			]]>
		</createView>
	</changeSet>

	<changeSet id="75_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'manualadvise_lovview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="76_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'manualadvise_lview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="76" author="Gopal.p">
		<createView viewName="MANUALADVISE_LVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ADVISEID,
					T1.ADVISETYPE,
					FM.FINID,
					FM.FINREFERENCE,
					T1.FEETYPEID,
					T1.SEQUENCE,
					T1.ADVISEAMOUNT,
					T1.PAIDAMOUNT,
					T1.WAIVEDAMOUNT,
					T1.REMARKS,
					T1.VALUEDATE,
					T1.POSTDATE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FEETYPEDESC,
					T2.FEETYPECODE,
					T1.BOUNCEID,
					T1.RECEIPTID,
					T3.BOUNCECODE,
					T1.RESERVEDAMT,
					T1.BALANCEAMT,
					T3.REASON BOUNCECODEDESC,
					COALESCE(T2.TAXAPPLICABLE, 0) TAXAPPLICABLE,
					COALESCE(T2.TDSREQ, 0) TDSREQ,
					T2.TAXCOMPONENT,
					T1.PAIDCGST,
					T1.PAIDSGST,
					T1.PAIDIGST,
					T1.PAIDUGST,
					T1.WAIVEDCGST,
					T1.WAIVEDSGST,
					T1.WAIVEDUGST,
					T1.WAIVEDIGST,
					T1.FINSOURCE,
					T1.DUECREATION,
					T1.LINKEDTRANID,
					T1.TDSPAID,
					T1.HOLDDUE,
					T1.PRESENTMENTID,
					T1.STATUS,
					T1.REASON,
					T1.DUEDATE
				FROM MANUALADVISE T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
				LEFT JOIN BOUNCEREASONS T3 ON T1.BOUNCEID = T3.BOUNCEID
			]]>
		</createView>
	</changeSet>

	<changeSet id="76_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'manualadvise_lview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="77_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'manualadvise_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="77" author="Gopal.p">
		<createView viewName="MANUALADVISE_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ADVISEID,
					T1.ADVISETYPE,
					FM.FINID,
					FM.FINREFERENCE,
					T1.FEETYPEID,
					T1.SEQUENCE,
					T1.ADVISEAMOUNT,
					T1.PAIDAMOUNT,
					T1.WAIVEDAMOUNT,
					T1.REMARKS,
					T1.VALUEDATE,
					T1.POSTDATE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FEETYPEDESC,
					T2.FEETYPECODE,
					T1.BOUNCEID,
					T1.RECEIPTID,
					T3.BOUNCECODE,
					T1.RESERVEDAMT,
					T1.BALANCEAMT,
					T3.REASON AS BOUNCECODEDESC,
					COALESCE(T2.TAXAPPLICABLE, 0) TAXAPPLICABLE,
					COALESCE(T2.TDSREQ, 0) TDSREQ,
					T2.TAXCOMPONENT,
					T1.PAIDCGST,
					T1.PAIDSGST,
					T1.PAIDIGST,
					T1.PAIDUGST,
					T1.WAIVEDCGST,
					T1.WAIVEDSGST,
					T1.WAIVEDUGST,
					T1.WAIVEDIGST,
					T1.WAIVEDCESS,
					T1.PAIDCESS,
					T1.FINSOURCE,
					T1.DUECREATION,
					T1.LINKEDTRANID,
					T1.TDSPAID,
					T1.HOLDDUE,
					T1.PRESENTMENTID,
					T1.STATUS,
					T1.REASON,
					T1.DUEDATE
				FROM MANUALADVISE_TEMP T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
				LEFT JOIN BOUNCEREASONS T3 ON T1.BOUNCEID = T3.BOUNCEID
			]]>
		</createView>
	</changeSet>

	<changeSet id="77_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'manualadvise_tview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="78_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'manualadvise_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="78" author="Gopal.p">
		<createView viewName="MANUALADVISE_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ADVISEID,
					T1.ADVISETYPE,
					FM.FINID,
					FM.FINREFERENCE,
					T1.FEETYPEID,
					T1.SEQUENCE,
					T1.ADVISEAMOUNT,
					T1.PAIDAMOUNT,
					T1.WAIVEDAMOUNT,
					T1.REMARKS,
					T1.VALUEDATE,
					T1.POSTDATE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FEETYPEDESC,
					T2.FEETYPECODE,
					T1.BOUNCEID,
					T1.RECEIPTID,
					T3.BOUNCECODE,
					T1.RESERVEDAMT,
					T1.BALANCEAMT,
					T3.REASON BOUNCECODEDESC,
					COALESCE(T2.TAXAPPLICABLE, 0) TAXAPPLICABLE,
					T2.TAXCOMPONENT,
					COALESCE(T2.TDSREQ, 0) TDSREQ,
					T1.PAIDCGST,
					T1.PAIDSGST,
					T1.PAIDIGST,
					T1.PAIDUGST,
					T1.WAIVEDCGST,
					T1.WAIVEDSGST,
					T1.WAIVEDUGST,
					T1.WAIVEDIGST,
					T1.WAIVEDCESS,
					T1.PAIDCESS,
					T1.FINSOURCE,
					T1.DUECREATION,
					T1.LINKEDTRANID,
					T1.TDSPAID,
					T1.HOLDDUE,
					T1.PRESENTMENTID,
					T1.STATUS,
					T1.REASON,
					T1.DUEDATE
				FROM MANUALADVISE_TEMP T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
				LEFT JOIN BOUNCEREASONS T3 ON T1.BOUNCEID = T3.BOUNCEID
				UNION ALL
				SELECT T1.ADVISEID,
					T1.ADVISETYPE,
					FM.FINID,
					FM.FINREFERENCE,
					T1.FEETYPEID,
					T1.SEQUENCE,
					T1.ADVISEAMOUNT,
					T1.PAIDAMOUNT,
					T1.WAIVEDAMOUNT,
					T1.REMARKS,
					T1.VALUEDATE,
					T1.POSTDATE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FEETYPEDESC,
					T2.FEETYPECODE,
					T1.BOUNCEID,
					T1.RECEIPTID,
					T3.BOUNCECODE,
					T1.RESERVEDAMT,
					T1.BALANCEAMT,
					T3.REASON BOUNCECODEDESC,
					COALESCE(T2.TAXAPPLICABLE, 0) TAXAPPLICABLE,
					T2.TAXCOMPONENT,
					COALESCE(T2.TDSREQ, 0) TDSREQ,
					T1.PAIDCGST,
					T1.PAIDSGST,
					T1.PAIDIGST,
					T1.PAIDUGST,
					T1.WAIVEDCGST,
					T1.WAIVEDSGST,
					T1.WAIVEDUGST,
					T1.WAIVEDIGST,
					T1.WAIVEDCESS,
					T1.PAIDCESS,
					T1.FINSOURCE,
					T1.DUECREATION,
					T1.LINKEDTRANID,
					T1.TDSPAID,
					T1.HOLDDUE,
					T1.PRESENTMENTID,
					T1.STATUS,
					T1.REASON,
					T1.DUEDATE
				FROM MANUALADVISE T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
				LEFT JOIN BOUNCEREASONS T3 ON T1.BOUNCEID = T3.BOUNCEID
				WHERE NOT EXISTS (SELECT 1 FROM MANUALADVISE_TEMP WHERE MANUALADVISE_TEMP.ADVISEID = T1.ADVISEID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="78_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'manualadvise_view');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="79_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_aview'); 
			]]>
		</sql>
	</changeSet>

	<changeSet id="79" author="Gopal.p">
		<createView viewName="RMTFINANCETYPES_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINTYPE,
				    T1.FINCATEGORY,
				    T1.FINTYPEDESC,
				    T1.FINCCY,
				    T1.FINDAYSCALTYPE,
				    T1.FINISGENREF,
				    T1.FINMAXAMOUNT,
				    T1.FINMINAMOUNT,
				    T1.FINDFTSTMTFRQ,
				    T1.FINISALWMD,
				    T1.FINSCHDMTHD,
				    T1.FINISALWGRACE,
				    T1.FINHISTRETENSION,
				    T1.EQUALREPAYMENT,
				    T1.FINRATETYPE,
				    T1.FINBASERATE,
				    T1.FINSPLRATE,
				    T1.FININTRATE,
				    T1.FINMINRATE,
				    T1.FINMAXRATE,
				    T1.FINDFTINTFRQ,
				    T1.FINISINTCPZ,
				    T1.FINCPZFRQ,
				    T1.FINISRVWALW,
				    T1.FINRVWFRQ,
				    T1.FINGRCRATETYPE,
				    T1.FINGRCBASERATE,
				    T1.FINGRCSPLRATE,
				    T1.FINGRCINTRATE,
				    T1.FINGRCMINRATE,
				    T1.FINGRCMAXRATE,
				    T1.FINGRCDFTINTFRQ,
				    T1.FINGRCISINTCPZ,
				    T1.FINGRCCPZFRQ,
				    T1.FINGRCISRVWALW,
				    T1.FINGRCRVWFRQ,
				    T1.FINMINTERM,
				    T1.FINMAXTERM,
				    T1.FINDFTTERMS,
				    T1.FINRPYFRQ,
				    T1.FINREPAYMETHOD,
				    T1.FINISALWPARTIALRPY,
				    T1.FINISALWDIFFERMENT,
				    T1.FINMAXDIFFERMENT,
				    T1.FINISALWEARLYRPY,
				    T1.FINISALWEARLYSETTLE,
				    T1.FINODRPYTRIES,
				    T1.FINEARLYPAYRULE,
				    T1.FINEARLYSETTLERULE,
				    T1.FINISACTIVE,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T1.STEPFINANCE,
				    T1.STEPPINGMANDATORY,
				    T1.ALWMANUALSTEPS,
				    T1.ALWDSTEPPOLICIES,
				    T1.DFTSTEPPOLICY,
				    T1.FINISDWPAYREQUIRED,
				    T1.FINRVWRATEAPPLFOR,
				    T1.FINALWRATECHANGEANYDATE,
				    T1.FINISINTCPZATGRCEND,
				    T1.FINELGRULECODE,
				    T1.LIMITELGRULECODE,
				    T1.FINSCHCALCODEONRVW,
				    T1.ALWPLANDEFERMENT,
				    T1.PLANDEFERCOUNT,
				    T1.FINASSETTYPE,
				    T1.FINISALWGRCREPAY,
				    T1.FINGRCSCHDMTHD,
				    T1.FINGRCMARGIN,
				    T1.FINMARGIN,
				    T1.FINSCHEDULEON,
				    T1.FINGRCSCHEDULEON,
				    T1.FINCOMMITMENTREQ,
				    T1.FINCOLLATERALREQ,
				    T1.OVERRIDELIMIT,
				    T1.LIMITREQUIRED,
				    T1.FINCOMMITMENTOVRRIDE,
				    T1.FINCOLLATERALOVRRIDE,
				    T1.FINPFTUNCHANGED,
				    T1.APPLYODPENALTY,
				    T1.ODINCGRCDAYS,
				    T1.ODCHARGETYPE,
				    T1.ODGRACEDAYS,
				    T1.ODCHARGECALON,
				    T1.ODCHARGEAMTORPERC,
				    T1.ODALLOWWAIVER,
				    T1.ODMAXWAIVERPERC,
				    T1.FINDIVISION,
				    T48.DIVISIONCODEDESC LOVDESCFINDIVISIONNAME,
				    T48.ENTITYCODE LOVDESCENTITYCODE,
				    T1.PRODUCT,
				    T1.STARTDATE,
				    T1.ENDDATE,
				    T1.REMARKS,
				    T1.ALWEARLYPAYMETHODS,
				    T1.PASTDUEPFTCALMTHD,
				    T1.PASTDUEPFTMARGIN,
				    T1.DOWNPAYRULE,
				    T59.RULECODE DOWNPAYRULECODE,
				    T59.RULECODEDESC DOWNPAYRULEDESC,
				    T1.FINSUSPTRIGGER,
				    T1.FINSUSPREMARKS,
				    T1.ALWMULTIPARTYDISB,
				    T1.COLLATERALTYPE,
				    T1.TDSAPPLICABLE,
				    T1.MANUALSCHEDULE,
				    T1.APPLYGRCPRICING,
				    T1.GRCPRICINGMETHOD,
				    T1.APPLYRPYPRICING,
				    T1.RPYPRICINGMETHOD,
				    T1.RPYHIERARCHY,
				    T67.RULECODE GRCPRICINGMETHODDESC,
				    T68.RULECODE RPYPRICINGMETHODDESC,
				    T1.DROPLINEOD,
				    T1.DROPPINGMETHOD,
				    T1.RATECHGANYDAY,
				    T1.FINREPAYPFTONFRQ,
				    T1.ALWBPI,
				    T1.BPITREATMENT,
				    T1.PFTDUESCHON,
				    T1.PLANEMIHALW,
				    T1.PLANEMIHMETHOD,
				    T1.PLANEMIHMAXPERYEAR,
				    T1.PLANEMIHMAX,
				    T1.PLANEMIHLOCKPERIOD,
				    T1.PLANEMICPZ,
				    T1.UNPLANEMIHLOCKPERIOD,
				    T1.UNPLANEMICPZ,
				    T1.REAGECPZ,
				    T1.FDDLOCKPERIOD,
				    T1.ALWDRPYMETHODS,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.ROUNDINGMODE,
				    T1.ROUNDINGTARGET,
				    T1.FREQUENCYDAYS,
				    T1.QUICKDISB,
				    T1.ALWREAGE,
				    T1.ALWUNPLANEMIHOLIDAY,
				    T1.ALWMAXDISBCHECKREQ,
				    T1.FINTYPEDESC LOVDESCPROMOFINTYPEDESC,
				    T1.PROFITCENTERID,
				    T69.PROFITCENTERCODE,
				    T69.PROFITCENTERDESC,
				    T1.PRODUCTCATEGORY,
				    T2.PRODUCTDESC FINCATEGORYDESC,
				    T1.DEVELOPERFINANCE,
				    T1.COSTOFFUNDS,
				    T1.CHEQUECAPTUREREQ,
				    T1.FINLTVCHECK,
				    T1.PARTIALLYSECURED,
				    T1.ALWADVEMI,
				    T1.ADVEMIMINTERMS,
				    T1.ADVEMIMAXTERMS,
				    T1.ADVEMIDFTTERMS,
				    T1.ADVEMISCHDMTHD,
				    T1.BPIPFTDAYSBASIS,
				    T1.ELIGIBILITYMETHODS,
				    T1.ALWHYBRIDRATE,
				    T1.FIXEDRATETENOR,
				    T1.ODMINCAPAMOUNT,
				    T1.ODRULECODE,
				    T1.ALWZEROINTACC,
				    T1.AUTOREJECTIONDAYS,
				    T1.TAXNOMAND,
				    T1.PUTCALLREQUIRED,
				    T1.GRCADVINTERSETREQ,
				    T1.GRCADVTYPE,
				    T1.GRCADVMINTERMS,
				    T1.GRCADVMAXTERMS,
				    T1.GRCADVDEFAULTTERMS,
				    T1.ADVINTERSETREQ,
				    T1.ADVTYPE,
				    T1.ADVMINTERMS,
				    T1.ADVMAXTERMS,
				    T1.ADVDEFAULTTERMS,
				    T1.ADVSTAGE,
				    T1.DSFREQ,
				    T1.CASHCOLLATERALREQ,
				    T1.TDSALLOWTOMODIFY,
				    T1.TDSAPPLICABLETO,
				    T1.ALWVAN,
				    T1.VANALLOCATIONMETHOD,
				    T1.ALLOWDRAWINGPOWER,
				    T1.ALLOWREVOLVING,
				    T1.ALWSANCTIONAMT,
				    T1.ALWSANCTIONAMTOVERRIDE,
				    T1.SANBSDSCHDLE,
				    T1.FINISRATERVWATGRCEND,
				    T1.SCHDONPMTCAL,
				    T1.AUTOAPPROVE,
				    T1.ALWPLANNEDEMIINGRC,
				    T1.OCRREQUIRED,
				    T1.ALLOWEDOCRS,
				    T1.DEFAULTOCR,
				    T1.ALLOWEDLOANPURPOSES,
				    T1.SPECIFICLOANPURPOSES,
				    T1.GRCADJREQ,
				    T1.GRCPERIODAFTRFULLDISB,
				    T1.AUTOINCRGRCENDDATE,
				    T1.GRCAUTOINCRMONTHS,
				    T1.MAXAUTOINCRALLOWED,
				    T1.THRLDTOMAINTAINGRCPRD,
				    T1.ALWLOANSPLIT,
				    T1.SPLITLOANTYPE,
				    T1.INSTBASEDSCHD,
				    T1.TDSTYPE,
				    T1.CALCOFSTEPS,
				    T1.STEPSAPPLIEDFOR,
				    T1.SUBVENTIONREQ,
					T1.OVERDRAFTTXNCHRGREQ,
					T1.OVERDRAFTTXNCHRGFEETYPE,
					T1.OVERDRAFTEXTGRACEDAYS,
					T1.OVERDRAFTCOLCHRGFEETYPE,
					T1.OVERDRAFTCOLAMT,
					T1.REGPROVRULE,
					T1.INTPROVRULE
				FROM RMTFINANCETYPES T1
			    LEFT JOIN BMTPRODUCT T2 ON T1.FINCATEGORY = T2.PRODUCTCODE
			    LEFT JOIN SMTDIVISIONDETAIL T48 ON T1.FINDIVISION = T48.DIVISIONCODE
			    LEFT JOIN RULES T59 ON T1.DOWNPAYRULE = T59.RULEID
			    LEFT JOIN RULES T67 ON T1.GRCPRICINGMETHOD = T67.RULEID
			    LEFT JOIN RULES T68 ON T1.RPYPRICINGMETHOD = T68.RULEID
			    LEFT JOIN PROFITCENTERS T69 ON T69.PROFITCENTERID = T1.PROFITCENTERID
			]]>
		</createView>
	</changeSet>

	<changeSet id="79_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rmtfinancetypes_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="80_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_view'); 
			]]>
		</sql>
	</changeSet>

	<changeSet id="80" author="Gopal.p">
		<createView viewName="RMTFINANCETYPES_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINTYPE,
				    T1.FINCATEGORY,
				    T1.FINTYPEDESC,
				    T1.FINCCY,
				    T1.FINDAYSCALTYPE,
				    T1.FINISGENREF,
				    T1.FINMAXAMOUNT,
				    T1.FINMINAMOUNT,
				    T1.FINDFTSTMTFRQ,
				    T1.FINISALWMD,
				    T1.FINSCHDMTHD,
				    T1.FINISALWGRACE,
				    T1.FINHISTRETENSION,
				    T1.EQUALREPAYMENT,
				    T1.FINRATETYPE,
				    T1.FINBASERATE,
				    T1.FINSPLRATE,
				    T1.FININTRATE,
				    T1.FINMINRATE,
				    T1.FINMAXRATE,
				    T1.FINDFTINTFRQ,
				    T1.FINISINTCPZ,
				    T1.FINCPZFRQ,
				    T1.FINISRVWALW,
				    T1.FINRVWFRQ,
				    T1.FINGRCRATETYPE,
				    T1.FINGRCBASERATE,
				    T1.FINGRCSPLRATE,
				    T1.FINGRCINTRATE,
				    T1.FINGRCMINRATE,
				    T1.FINGRCMAXRATE,
				    T1.FINGRCDFTINTFRQ,
				    T1.FINGRCISINTCPZ,
				    T1.FINGRCCPZFRQ,
				    T1.FINGRCISRVWALW,
				    T1.FINGRCRVWFRQ,
				    T1.FINMINTERM,
				    T1.FINMAXTERM,
				    T1.FINDFTTERMS,
				    T1.FINRPYFRQ,
				    T1.FINREPAYMETHOD,
				    T1.FINISALWPARTIALRPY,
				    T1.FINISALWDIFFERMENT,
				    T1.FINMAXDIFFERMENT,
				    T1.FINISALWEARLYRPY,
				    T1.FINISALWEARLYSETTLE,
				    T1.FINODRPYTRIES,
				    T1.FINEARLYPAYRULE,
				    T1.FINEARLYSETTLERULE,
				    T1.FINISACTIVE,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T1.STEPFINANCE,
				    T1.STEPPINGMANDATORY,
				    T1.ALWMANUALSTEPS,
				    T1.ALWDSTEPPOLICIES,
				    T1.DFTSTEPPOLICY,
				    T1.FINISDWPAYREQUIRED,
				    T1.FINRVWRATEAPPLFOR,
				    T1.FINALWRATECHANGEANYDATE,
				    T1.FINISINTCPZATGRCEND,
				    T1.FINELGRULECODE,
				    T1.LIMITELGRULECODE,
				    T1.FINSCHCALCODEONRVW,
				    T1.ALWPLANDEFERMENT,
				    T1.PLANDEFERCOUNT,
				    T1.FINASSETTYPE,
				    T1.FINISALWGRCREPAY,
				    T1.FINGRCSCHDMTHD,
				    T1.FINGRCMARGIN,
				    T1.FINMARGIN,
				    T1.FINSCHEDULEON,
				    T1.FINGRCSCHEDULEON,
				    T1.FINCOMMITMENTREQ,
				    T1.FINCOLLATERALREQ,
				    T1.OVERRIDELIMIT,
				    T1.LIMITREQUIRED,
				    T1.FINCOMMITMENTOVRRIDE,
				    T1.FINCOLLATERALOVRRIDE,
				    T1.FINPFTUNCHANGED,
				    T1.APPLYODPENALTY,
				    T1.ODINCGRCDAYS,
				    T1.ODCHARGETYPE,
				    T1.ODGRACEDAYS,
				    T1.ODCHARGECALON,
				    T1.ODCHARGEAMTORPERC,
				    T1.ODALLOWWAIVER,
				    T1.ODMAXWAIVERPERC,
				    T1.FINDIVISION,
				    T48.DIVISIONCODEDESC LOVDESCFINDIVISIONNAME,
				    T48.ENTITYCODE LOVDESCENTITYCODE,
				    T1.PRODUCT,
				    T1.STARTDATE,
				    T1.ENDDATE,
				    T1.FINTYPEDESC LOVDESCPROMOFINTYPEDESC,
				    T1.REMARKS,
				    T1.ALWEARLYPAYMETHODS,
				    T1.PASTDUEPFTCALMTHD,
				    T1.PASTDUEPFTMARGIN,
				    T1.DOWNPAYRULE,
				    T59.RULECODE DOWNPAYRULECODE,
				    T59.RULECODEDESC DOWNPAYRULEDESC,
				    T1.FINSUSPTRIGGER,
				    T1.FINSUSPREMARKS,
				    T1.ALWMULTIPARTYDISB,
				    T1.COLLATERALTYPE,
				    T1.TDSAPPLICABLE,
				    T1.MANUALSCHEDULE,
				    T1.APPLYGRCPRICING,
				    T1.GRCPRICINGMETHOD,
				    T1.APPLYRPYPRICING,
				    T1.RPYPRICINGMETHOD,
				    T1.RPYHIERARCHY,
				    T67.RULECODE GRCPRICINGMETHODDESC,
				    T68.RULECODE RPYPRICINGMETHODDESC,
				    T1.DROPLINEOD,
				    T1.DROPPINGMETHOD,
				    T1.RATECHGANYDAY,
				    T1.FINREPAYPFTONFRQ,
				    T1.ALWBPI,
				    T1.BPITREATMENT,
				    T1.PFTDUESCHON,
				    T1.PLANEMIHALW,
				    T1.PLANEMIHMETHOD,
				    T1.PLANEMIHMAXPERYEAR,
				    T1.PLANEMIHMAX,
				    T1.PLANEMIHLOCKPERIOD,
				    T1.PLANEMICPZ,
				    T1.UNPLANEMIHLOCKPERIOD,
				    T1.UNPLANEMICPZ,
				    T1.REAGECPZ,
				    T1.FDDLOCKPERIOD,
				    T1.ALWDRPYMETHODS,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.ROUNDINGMODE,
				    T1.ROUNDINGTARGET,
				    T1.FREQUENCYDAYS,
				    T1.QUICKDISB,
				    T1.ALWMAXDISBCHECKREQ,
				    T1.ALWREAGE,
				    T1.ALWUNPLANEMIHOLIDAY,
				    T1.PROFITCENTERID,
				    T69.PROFITCENTERCODE,
				    T69.PROFITCENTERDESC,
				    T1.PRODUCTCATEGORY,
				    T2.PRODUCTDESC FINCATEGORYDESC,
				    T1.DEVELOPERFINANCE,
				    T1.COSTOFFUNDS,
				    T1.CHEQUECAPTUREREQ,
				    T1.FINLTVCHECK,
				    T1.PARTIALLYSECURED,
				    T1.ALWADVEMI,
				    T1.ADVEMIMINTERMS,
				    T1.ADVEMIMAXTERMS,
				    T1.ADVEMIDFTTERMS,
				    T1.ADVEMISCHDMTHD,
				    T1.BPIPFTDAYSBASIS,
				    T1.ELIGIBILITYMETHODS,
				    T1.ALWHYBRIDRATE,
				    T1.FIXEDRATETENOR,
				    T1.ODMINCAPAMOUNT,
				    T1.ODRULECODE,
				    T1.ALWZEROINTACC,
				    T1.AUTOREJECTIONDAYS,
				    T1.TAXNOMAND,
				    T1.PUTCALLREQUIRED,
				    T1.GRCADVINTERSETREQ,
				    T1.GRCADVTYPE,
				    T1.GRCADVMINTERMS,
				    T1.GRCADVMAXTERMS,
				    T1.GRCADVDEFAULTTERMS,
				    T1.ADVINTERSETREQ,
				    T1.ADVTYPE,
				    T1.ADVMINTERMS,
				    T1.ADVMAXTERMS,
				    T1.ADVDEFAULTTERMS,
				    T1.ADVSTAGE,
				    T1.DSFREQ,
				    T1.CASHCOLLATERALREQ,
				    T1.TDSALLOWTOMODIFY,
				    T1.TDSAPPLICABLETO,
				    T1.ALWVAN,
				    T1.VANALLOCATIONMETHOD,
				    T1.ALLOWDRAWINGPOWER,
				    T1.ALLOWREVOLVING,
				    T1.ALWSANCTIONAMT,
				    T1.ALWSANCTIONAMTOVERRIDE,
				    T1.SANBSDSCHDLE,
				    T1.FINISRATERVWATGRCEND,
				    T1.SCHDONPMTCAL,
				    T1.AUTOAPPROVE,
				    T1.OCRREQUIRED,
				    T1.ALLOWEDOCRS,
				    T1.DEFAULTOCR,
				    T1.ALLOWEDLOANPURPOSES,
				    T1.SPECIFICLOANPURPOSES,
				    T1.ALWPLANNEDEMIINGRC,
				    T1.GRCADJREQ,
				    T1.GRCPERIODAFTRFULLDISB,
				    T1.AUTOINCRGRCENDDATE,
				    T1.GRCAUTOINCRMONTHS,
				    T1.MAXAUTOINCRALLOWED,
				    T1.THRLDTOMAINTAINGRCPRD,
				    T1.ALWLOANSPLIT,
				    T1.SPLITLOANTYPE,
				    T1.INSTBASEDSCHD,
				    T1.TDSTYPE,
				    T1.CALCOFSTEPS,
				    T1.STEPSAPPLIEDFOR,
				    T1.SUBVENTIONREQ,
					T1.OVERDRAFTTXNCHRGREQ,
					T1.OVERDRAFTTXNCHRGFEETYPE,
					T1.OVERDRAFTEXTGRACEDAYS,
					T1.OVERDRAFTCOLCHRGFEETYPE,
					T1.OVERDRAFTCOLAMT,
					T1.REGPROVRULE,
					T1.INTPROVRULE
				FROM RMTFINANCETYPES_TEMP T1
				LEFT JOIN BMTPRODUCT T2 ON T1.FINCATEGORY = T2.PRODUCTCODE
				LEFT JOIN SMTDIVISIONDETAIL T48 ON T1.FINDIVISION = T48.DIVISIONCODE
				LEFT JOIN RULES T59 ON T1.DOWNPAYRULE = T59.RULEID
				LEFT JOIN RULES T67 ON T1.GRCPRICINGMETHOD = T67.RULEID
				LEFT JOIN RULES T68 ON T1.RPYPRICINGMETHOD = T68.RULEID
				LEFT JOIN PROFITCENTERS T69 ON T69.PROFITCENTERID = T1.PROFITCENTERID
				UNION ALL
				SELECT T1.FINTYPE,
				    T1.FINCATEGORY,
				    T1.FINTYPEDESC,
				    T1.FINCCY,
				    T1.FINDAYSCALTYPE,
				    T1.FINISGENREF,
				    T1.FINMAXAMOUNT,
				    T1.FINMINAMOUNT,
				    T1.FINDFTSTMTFRQ,
				    T1.FINISALWMD,
				    T1.FINSCHDMTHD,
				    T1.FINISALWGRACE,
				    T1.FINHISTRETENSION,
				    T1.EQUALREPAYMENT,
				    T1.FINRATETYPE,
				    T1.FINBASERATE,
				    T1.FINSPLRATE,
				    T1.FININTRATE,
				    T1.FINMINRATE,
				    T1.FINMAXRATE,
				    T1.FINDFTINTFRQ,
				    T1.FINISINTCPZ,
				    T1.FINCPZFRQ,
				    T1.FINISRVWALW,
				    T1.FINRVWFRQ,
				    T1.FINGRCRATETYPE,
				    T1.FINGRCBASERATE,
				    T1.FINGRCSPLRATE,
				    T1.FINGRCINTRATE,
				    T1.FINGRCMINRATE,
				    T1.FINGRCMAXRATE,
				    T1.FINGRCDFTINTFRQ,
				    T1.FINGRCISINTCPZ,
				    T1.FINGRCCPZFRQ,
				    T1.FINGRCISRVWALW,
				    T1.FINGRCRVWFRQ,
				    T1.FINMINTERM,
				    T1.FINMAXTERM,
				    T1.FINDFTTERMS,
				    T1.FINRPYFRQ,
				    T1.FINREPAYMETHOD,
				    T1.FINISALWPARTIALRPY,
				    T1.FINISALWDIFFERMENT,
				    T1.FINMAXDIFFERMENT,
				    T1.FINISALWEARLYRPY,
				    T1.FINISALWEARLYSETTLE,
				    T1.FINODRPYTRIES,
				    T1.FINEARLYPAYRULE,
				    T1.FINEARLYSETTLERULE,
				    T1.FINISACTIVE,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T1.STEPFINANCE,
				    T1.STEPPINGMANDATORY,
				    T1.ALWMANUALSTEPS,
				    T1.ALWDSTEPPOLICIES,
				    T1.DFTSTEPPOLICY,
				    T1.FINISDWPAYREQUIRED,
				    T1.FINRVWRATEAPPLFOR,
				    T1.FINALWRATECHANGEANYDATE,
				    T1.FINISINTCPZATGRCEND,
				    T1.FINELGRULECODE,
				    T1.LIMITELGRULECODE,
				    T1.FINSCHCALCODEONRVW,
				    T1.ALWPLANDEFERMENT,
				    T1.PLANDEFERCOUNT,
				    T1.FINASSETTYPE,
				    T1.FINISALWGRCREPAY,
				    T1.FINGRCSCHDMTHD,
				    T1.FINGRCMARGIN,
				    T1.FINMARGIN,
				    T1.FINSCHEDULEON,
				    T1.FINGRCSCHEDULEON,
				    T1.FINCOMMITMENTREQ,
				    T1.FINCOLLATERALREQ,
				    T1.OVERRIDELIMIT,
				    T1.LIMITREQUIRED,
				    T1.FINCOMMITMENTOVRRIDE,
				    T1.FINCOLLATERALOVRRIDE,
				    T1.FINPFTUNCHANGED,
				    T1.APPLYODPENALTY,
				    T1.ODINCGRCDAYS,
				    T1.ODCHARGETYPE,
				    T1.ODGRACEDAYS,
				    T1.ODCHARGECALON,
				    T1.ODCHARGEAMTORPERC,
				    T1.ODALLOWWAIVER,
				    T1.ODMAXWAIVERPERC,
				    T1.FINDIVISION,
				    T48.DIVISIONCODEDESC LOVDESCFINDIVISIONNAME,
				    T48.ENTITYCODE LOVDESCENTITYCODE,
				    T1.PRODUCT,
				    T1.STARTDATE,
				    T1.ENDDATE,
				    T1.FINTYPEDESC LOVDESCPROMOFINTYPEDESC,
				    T1.REMARKS,
				    T1.ALWEARLYPAYMETHODS,
				    T1.PASTDUEPFTCALMTHD,
				    T1.PASTDUEPFTMARGIN,
				    T1.DOWNPAYRULE,
				    T59.RULECODE DOWNPAYRULECODE,
				    T59.RULECODEDESC DOWNPAYRULEDESC,
				    T1.FINSUSPTRIGGER,
				    T1.FINSUSPREMARKS,
				    T1.ALWMULTIPARTYDISB,
				    T1.COLLATERALTYPE,
				    T1.TDSAPPLICABLE,
				    T1.MANUALSCHEDULE,
				    T1.APPLYGRCPRICING,
				    T1.GRCPRICINGMETHOD,
				    T1.APPLYRPYPRICING,
				    T1.RPYPRICINGMETHOD,
				    T1.RPYHIERARCHY,
				    T67.RULECODE GRCPRICINGMETHODDESC,
				    T68.RULECODE RPYPRICINGMETHODDESC,
				    T1.DROPLINEOD,
				    T1.DROPPINGMETHOD,
				    T1.RATECHGANYDAY,
				    T1.FINREPAYPFTONFRQ,
				    T1.ALWBPI,
				    T1.BPITREATMENT,
				    T1.PFTDUESCHON,
				    T1.PLANEMIHALW,
				    T1.PLANEMIHMETHOD,
				    T1.PLANEMIHMAXPERYEAR,
				    T1.PLANEMIHMAX,
				    T1.PLANEMIHLOCKPERIOD,
				    T1.PLANEMICPZ,
				    T1.UNPLANEMIHLOCKPERIOD,
				    T1.UNPLANEMICPZ,
				    T1.REAGECPZ,
				    T1.FDDLOCKPERIOD,
				    T1.ALWDRPYMETHODS,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.ROUNDINGMODE,
				    T1.ROUNDINGTARGET,
				    T1.FREQUENCYDAYS,
				    T1.QUICKDISB,
				    T1.ALWMAXDISBCHECKREQ,
				    T1.ALWREAGE,
				    T1.ALWUNPLANEMIHOLIDAY,
				    T1.PROFITCENTERID,
				    T69.PROFITCENTERCODE,
				    T69.PROFITCENTERDESC,
				    T1.PRODUCTCATEGORY,
				    T2.PRODUCTDESC FINCATEGORYDESC,
				    T1.DEVELOPERFINANCE,
				    T1.COSTOFFUNDS,
				    T1.CHEQUECAPTUREREQ,
				    T1.FINLTVCHECK,
				    T1.PARTIALLYSECURED,
				    T1.ALWADVEMI,
				    T1.ADVEMIMINTERMS,
				    T1.ADVEMIMAXTERMS,
				    T1.ADVEMIDFTTERMS,
				    T1.ADVEMISCHDMTHD,
				    T1.BPIPFTDAYSBASIS,
				    T1.ELIGIBILITYMETHODS,
				    T1.ALWHYBRIDRATE,
				    T1.FIXEDRATETENOR,
				    T1.ODMINCAPAMOUNT,
				    T1.ODRULECODE,
				    T1.ALWZEROINTACC,
				    T1.AUTOREJECTIONDAYS,
				    T1.TAXNOMAND,
				    T1.PUTCALLREQUIRED,
				    T1.GRCADVINTERSETREQ,
				    T1.GRCADVTYPE,
				    T1.GRCADVMINTERMS,
				    T1.GRCADVMAXTERMS,
				    T1.GRCADVDEFAULTTERMS,
				    T1.ADVINTERSETREQ,
				    T1.ADVTYPE,
				    T1.ADVMINTERMS,
				    T1.ADVMAXTERMS,
				    T1.ADVDEFAULTTERMS,
				    T1.ADVSTAGE,
				    T1.DSFREQ,
				    T1.CASHCOLLATERALREQ,
				    T1.TDSALLOWTOMODIFY,
				    T1.TDSAPPLICABLETO,
				    T1.ALWVAN,
				    T1.VANALLOCATIONMETHOD,
				    T1.ALLOWDRAWINGPOWER,
				    T1.ALLOWREVOLVING,
				    T1.ALWSANCTIONAMT,
				    T1.ALWSANCTIONAMTOVERRIDE,
				    T1.SANBSDSCHDLE,
				    T1.FINISRATERVWATGRCEND,
				    T1.SCHDONPMTCAL,
				    T1.AUTOAPPROVE,
				    T1.OCRREQUIRED,
				    T1.ALLOWEDOCRS,
				    T1.DEFAULTOCR,
				    T1.ALLOWEDLOANPURPOSES,
				    T1.SPECIFICLOANPURPOSES,
				    T1.ALWPLANNEDEMIINGRC,
				    T1.GRCADJREQ,
				    T1.GRCPERIODAFTRFULLDISB,
				    T1.AUTOINCRGRCENDDATE,
				    T1.GRCAUTOINCRMONTHS,
				    T1.MAXAUTOINCRALLOWED,
				    T1.THRLDTOMAINTAINGRCPRD,
				    T1.ALWLOANSPLIT,
				    T1.SPLITLOANTYPE,
				    T1.INSTBASEDSCHD,
				    T1.TDSTYPE,
				    T1.CALCOFSTEPS,
				    T1.STEPSAPPLIEDFOR,
				    T1.SUBVENTIONREQ,
					T1.OVERDRAFTTXNCHRGREQ,
					T1.OVERDRAFTTXNCHRGFEETYPE,
					T1.OVERDRAFTEXTGRACEDAYS,
					T1.OVERDRAFTCOLCHRGFEETYPE,
					T1.OVERDRAFTCOLAMT,
					T1.REGPROVRULE,
					T1.INTPROVRULE
				FROM RMTFINANCETYPES T1
				LEFT JOIN BMTPRODUCT T2 ON T1.FINCATEGORY = T2.PRODUCTCODE
				LEFT JOIN SMTDIVISIONDETAIL T48 ON T1.FINDIVISION = T48.DIVISIONCODE
				LEFT JOIN RULES T59 ON T1.DOWNPAYRULE = T59.RULEID
				LEFT JOIN RULES T67 ON T1.GRCPRICINGMETHOD = T67.RULEID
				LEFT JOIN RULES T68 ON T1.RPYPRICINGMETHOD = T68.RULEID
				LEFT JOIN PROFITCENTERS T69 ON T69.PROFITCENTERID = T1.PROFITCENTERID
				WHERE NOT EXISTS ( SELECT 1 FROM RMTFINANCETYPES_TEMP WHERE RMTFINANCETYPES_TEMP.FINTYPE = T1.FINTYPE)
			]]>
		</createView>
	</changeSet>

	<changeSet id="80_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rmtfinancetypes_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="81_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_orgview'); 	
			]]>
		</sql>
	</changeSet>

	<changeSet id="81" author="Gopal.p">
		<createView viewName="RMTFINANCETYPES_ORGVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINTYPE,
				    T1.FINCATEGORY,
				    T1.FINTYPEDESC,
				    T1.FINCCY,
				    T1.FINDAYSCALTYPE,
				    T1.FINISGENREF,
				    T1.FINMAXAMOUNT,
				    T1.FINMINAMOUNT,
				    T1.FINISALWMD,
				    T1.FINSCHDMTHD,
				    T1.FINISALWGRACE,
				    T1.EQUALREPAYMENT,
				    T1.FINRATETYPE,
				    T1.FINBASERATE,
				    T1.FINSPLRATE,
				    T1.FININTRATE,
				    T1.FINMINRATE,
				    T1.FINMAXRATE,
				    T1.FINDFTINTFRQ,
				    T1.FINISINTCPZ,
				    T1.FINCPZFRQ,
				    T1.FINISRVWALW,
				    T1.FINRVWFRQ,
				    T1.FINGRCRATETYPE,
				    T1.FINGRCBASERATE,
				    T1.FINGRCSPLRATE,
				    T1.FINGRCINTRATE,
				    T1.FINGRCMINRATE,
				    T1.FINGRCMAXRATE,
				    T1.FINGRCDFTINTFRQ,
				    T1.FINGRCISINTCPZ,
				    T1.FINGRCCPZFRQ,
				    T1.FINGRCISRVWALW,
				    T1.FINGRCRVWFRQ,
				    T1.FINMINTERM,
				    T1.FINMAXTERM,
				    T1.FINDFTTERMS,
				    T1.FINRPYFRQ,
				    T1.FINREPAYMETHOD,
				    T1.FINISALWDIFFERMENT,
				    T1.FINMAXDIFFERMENT,
				    T1.FINISACTIVE,
				    T1.STEPFINANCE,
				    T1.STEPPINGMANDATORY,
				    T1.ALWMANUALSTEPS,
				    T1.ALWDSTEPPOLICIES,
				    T1.DFTSTEPPOLICY,
				    T1.FINISDWPAYREQUIRED,
				    T1.FINRVWRATEAPPLFOR,
				    T1.FINALWRATECHANGEANYDATE,
				    T1.FINISINTCPZATGRCEND,
				    T1.FINSCHCALCODEONRVW,
				    T1.ALWPLANDEFERMENT,
				    T1.PLANDEFERCOUNT,
				    T1.FINISALWGRCREPAY,
				    T1.FINGRCSCHDMTHD,
				    T1.FINGRCMARGIN,
				    T1.FINMARGIN,
				    T1.FINCOMMITMENTREQ,
				    T1.FINCOLLATERALREQ,
				    T1.OVERRIDELIMIT,
				    T1.LIMITREQUIRED,
				    T1.FINCOMMITMENTOVRRIDE,
				    T1.FINCOLLATERALOVRRIDE,
				    T1.FINREPAYPFTONFRQ,
				    T1.FINPFTUNCHANGED,
				    T1.APPLYODPENALTY,
				    T1.ODINCGRCDAYS,
				    T1.ODCHARGETYPE,
				    T1.ODGRACEDAYS,
				    T1.ODCHARGECALON,
				    T1.ODCHARGEAMTORPERC,
				    T1.ODALLOWWAIVER,
				    T1.ODMAXWAIVERPERC,
				    T1.FINDIVISION,
				    T3.DIVISIONCODEDESC LOVDESCFINDIVISIONNAME,
				    T1.PRODUCT,
				    T1.STARTDATE,
				    T1.ENDDATE,
				    T1.FINTYPEDESC LOVDESCPROMOFINTYPEDESC,
				    T1.REMARKS,
				    T4.POLICYDESC LOVDESCDFTSTEPPOLICYNAME,
				    T1.PASTDUEPFTCALMTHD,
				    T1.PASTDUEPFTMARGIN,
				    T1.DOWNPAYRULE,
				    T1.ALWMULTIPARTYDISB,
				    T1.COLLATERALTYPE,
				    T1.TDSAPPLICABLE,
				    T5.RULECODE DOWNPAYRULECODE,
				    T5.RULECODEDESC DOWNPAYRULEDESC,
				    T1.APPLYGRCPRICING,
				    T1.APPLYRPYPRICING,
				    T6.RULECODE GRCPRICINGMETHODDESC,
				    T7.RULECODE RPYPRICINGMETHODDESC,
				    T1.DROPLINEOD,
				    T1.DROPPINGMETHOD,
				    T1.RATECHGANYDAY,
				    T4.STEPTYPE DFTSTEPPOLICYTYPE,
				    T1.MANUALSCHEDULE,
				    T1.ALWBPI,
				    T1.BPITREATMENT,
				    T1.PFTDUESCHON,
				    T1.PLANEMIHALW,
				    T1.PLANEMIHMETHOD,
				    T1.PLANEMIHMAXPERYEAR,
				    T1.PLANEMIHMAX,
				    T1.PLANEMIHLOCKPERIOD,
				    T1.PLANEMICPZ,
				    T1.UNPLANEMIHLOCKPERIOD,
				    T1.UNPLANEMICPZ,
				    T1.REAGECPZ,
				    T1.FDDLOCKPERIOD,
				    T1.ALWDRPYMETHODS,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.ROUNDINGMODE,
				    T1.ROUNDINGTARGET,
				    T1.FREQUENCYDAYS,
				    T1.QUICKDISB,
				    T1.ALWREAGE,
				    T1.ALWUNPLANEMIHOLIDAY,
				    T1.ALWMAXDISBCHECKREQ,
				    T1.PRODUCTCATEGORY,
				    T1.RPYHIERARCHY,
				    T1.DEVELOPERFINANCE,
				    T3.ENTITYCODE LOVDESCENTITYCODE,
				    T8.ENTITYDESC LOVDESCENTITYDESC,
				    T1.COSTOFFUNDS,
				    T1.CHEQUECAPTUREREQ,
				    T1.FINLTVCHECK,
				    T1.PARTIALLYSECURED,
				    T1.ALWADVEMI,
				    T1.ADVEMIMINTERMS,
				    T1.ADVEMIMAXTERMS,
				    T1.ADVEMIDFTTERMS,
				    T1.ADVEMISCHDMTHD,
				    T1.BPIPFTDAYSBASIS,
				    T1.ELIGIBILITYMETHODS,
				    T1.ALWHYBRIDRATE,
				    T1.FIXEDRATETENOR,
				    T1.ODMINCAPAMOUNT,
				    T1.ODRULECODE,
				    T1.ALWZEROINTACC,
				    T1.FINISALWPARTIALRPY,
				    T1.AUTOREJECTIONDAYS,
				    T1.TAXNOMAND,
				    T1.PUTCALLREQUIRED,
				    T1.GRCADVINTERSETREQ,
				    T1.GRCADVTYPE,
				    T1.GRCADVMINTERMS,
				    T1.GRCADVMAXTERMS,
				    T1.GRCADVDEFAULTTERMS,
				    T1.ADVINTERSETREQ,
				    T1.ADVTYPE,
				    T1.ADVMINTERMS,
				    T1.ADVMAXTERMS,
				    T1.ADVDEFAULTTERMS,
				    T1.ADVSTAGE,
				    T1.DSFREQ,
				    T1.CASHCOLLATERALREQ,
				    T1.ALWEARLYPAYMETHODS,
				    T1.TDSALLOWTOMODIFY,
				    T1.TDSAPPLICABLETO,
				    T1.ALWVAN,
				    T1.VANALLOCATIONMETHOD,
				    T1.ALLOWDRAWINGPOWER,
				    T1.ALLOWREVOLVING,
				    T1.ALWSANCTIONAMT,
				    T1.ALWSANCTIONAMTOVERRIDE,
				    T1.SANBSDSCHDLE,
				    T1.FINISRATERVWATGRCEND,
				    T1.SCHDONPMTCAL,
				    T1.AUTOAPPROVE,
				    T1.OCRREQUIRED,
				    T1.ALLOWEDOCRS,
				    T1.DEFAULTOCR,
				    T1.ALLOWEDLOANPURPOSES,
				    T1.SPECIFICLOANPURPOSES,
				    T1.ALWPLANNEDEMIINGRC,
				    T1.GRCADJREQ,
				    T1.GRCPERIODAFTRFULLDISB,
				    T1.AUTOINCRGRCENDDATE,
				    T1.GRCAUTOINCRMONTHS,
				    T1.MAXAUTOINCRALLOWED,
				    T1.THRLDTOMAINTAINGRCPRD,
				    T1.ALWLOANSPLIT,
				    T1.SPLITLOANTYPE,
				    T1.INSTBASEDSCHD,
				    T1.TDSTYPE,
				    T1.CALCOFSTEPS,
				    T1.STEPSAPPLIEDFOR,
				    T1.SUBVENTIONREQ,
					T1.OVERDRAFTTXNCHRGREQ,
					T1.OVERDRAFTTXNCHRGFEETYPE,
					T1.OVERDRAFTEXTGRACEDAYS,
					T1.OVERDRAFTCOLCHRGFEETYPE,
					T1.OVERDRAFTCOLAMT,
					T1.REGPROVRULE,
					T1.INTPROVRULE
				FROM RMTFINANCETYPES T1
				JOIN SMTDIVISIONDETAIL T3 ON T1.FINDIVISION = T3.DIVISIONCODE
				LEFT JOIN STEPPOLICYHEADER T4 ON T1.DFTSTEPPOLICY = T4.POLICYCODE
				LEFT JOIN RULES T5 ON T1.DOWNPAYRULE = T5.RULEID
				LEFT JOIN RULES T6 ON T1.GRCPRICINGMETHOD = T6.RULEID
				LEFT JOIN RULES T7 ON T1.RPYPRICINGMETHOD = T7.RULEID
				LEFT JOIN ENTITY T8 ON T3.ENTITYCODE = T8.ENTITYCODE
			]]>
		</createView>
	</changeSet>

	<changeSet id="81_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rmtfinancetypes_orgview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="82_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_aeview'); 
			]]>
		</sql>
	</changeSet>

	<changeSet id="82" author="Gopal.p">
		<createView viewName="RMTFINANCETYPES_AEVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINTYPE,
				    '' FINDEFFREQ,
				    T1.FINCCY,
				    T1.FINCATEGORY,
				    T1.DEVELOPERFINANCE,
				    T1.PARTIALLYSECURED,
				    T1.INSTBASEDSCHD,
				    T1.TDSTYPE,
				    T1.SUBVENTIONREQ
				FROM RMTFINANCETYPES T1	
			]]>
		</createView>
	</changeSet>

	<changeSet id="82_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rmtfinancetypes_aeview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="83_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'presentmentdetails_aview');
		 	]]>
		</sql>
	</changeSet>

	<changeSet id="83" author="Gopal.p">
		<createView viewName="PRESENTMENTDETAILS_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ID, 
					T1.PRESENTMENTID, 
					T1.PRESENTMENTREF,
					T1.FINID, 
					T1.FINREFERENCE, 
					T1.SCHDATE, 
					T1.MANDATEID, 
					T1.SCHAMTDUE, 
					T1.SCHPRIDUE, 
					T1.SCHPFTDUE, 
					T1.SCHFEEDUE,
					T1.SCHINSDUE, 
					T1.SCHPENALTYDUE, 
					T1.ADVANCEAMT, 
					T1.EXCESSID, 
					T1.ADVISEAMT, 
					T1.PRESENTMENTAMT, 
					T1.EXCLUDEREASON, 
					T1.TDSAMOUNT, 
					T1.BOUNCEID, 
					T1.EMINO, 
					T1.STATUS,
					T1.VERSION, 
					T1.LASTMNTBY, 
					T1.LASTMNTON,
					T1.RECORDSTATUS, 
					T1.ROLECODE, 
					T1.NEXTROLECODE, 
					T1.TASKID, 
					T1.NEXTTASKID, 
					T1.RECORDTYPE, 
					T1.WORKFLOWID, 
					T2.MANDATETYPE, 
					T3.FINTYPE,
					T4.FINTYPEDESC, 
					T5.CUSTSHRTNAME CUSTOMERNAME,
					T1.RECEIPTID, 
					T1.ECSRETURN, 
					T1.ERRORCODE, 
					T1.ERRORDESC, 
					T1.MANUALADVISEID,
					T1.CHARGES,
					T1.LPPAMOUNT, 
					T1.BOUNCEAMOUNT, 
					T7.BANKNAME
				FROM PRESENTMENTDETAILS T1 
				INNER JOIN MANDATES T2 ON T1.MANDATEID = T2.MANDATEID
				INNER JOIN FINANCEMAIN T3 ON T1.FINID = T3.FINID 
				INNER JOIN RMTFINANCETYPES T4 ON T3.FINTYPE = T4.FINTYPE 
				INNER JOIN CUSTOMERS T5 ON T5.CUSTID = T3.CUSTID 
				LEFT OUTER JOIN BANKBRANCHES T6 ON T2.BANKBRANCHID = T6.BANKBRANCHID 
				LEFT OUTER JOIN BMTBANKDETAIL T7 ON T6.BANKCODE = T7.BANKCODE
			]]>
		</createView>
	</changeSet>

	<changeSet id="83_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'presentmentdetails_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="84_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'presentmentdetails_pdcaview');
		 	]]>
		</sql>
	</changeSet>

	<changeSet id="84" author="Gopal.p">
		<createView viewName="PRESENTMENTDETAILS_PDCAVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ID, 
					T1.PRESENTMENTID, 
					T1.PRESENTMENTREF, 
					T1.FINID,
					T1.FINREFERENCE, 
					T1.SCHDATE, 
					T1.MANDATEID, 
					T1.SCHAMTDUE, 
					T1.SCHPRIDUE, 
					T1.SCHPFTDUE, 
					T1.SCHFEEDUE, 
					T1.SCHINSDUE,
	 				T1.SCHPENALTYDUE, 
	 				T1.ADVANCEAMT, 
	 				T1.EXCESSID, 
	 				T1.ADVISEAMT, 
	 				T1.PRESENTMENTAMT, 
	 				T1.EXCLUDEREASON, 
	 				T1.TDSAMOUNT, 
	 				T1.BOUNCEID, 
	 				T1.EMINO, 
	 				T1.STATUS, 
	 				T1.VERSION,
	 				T1.LASTMNTBY, 
	 				T1.LASTMNTON, 
	 				T1.RECORDSTATUS, 
	 				T1.ROLECODE, 
	 				T1.NEXTROLECODE, 
	 				T1.TASKID, 
	 				T1.NEXTTASKID, 
	 				T1.RECORDTYPE, 
	 				T1.WORKFLOWID, 
	 				T2.CHEQUETYPE MANDATETYPE,
	 				T3.FINTYPE, 
	 				T4.FINTYPEDESC, 
	 				T5.CUSTSHRTNAME CUSTOMERNAME, 
	 				T1.RECEIPTID, 
	 				T1.ECSRETURN, 
	 				T1.ERRORCODE, 
	 				T1.ERRORDESC, 
	 				T1.MANUALADVISEID,
	 				T1.CHARGES,
	 				T1.LPPAMOUNT, 
	 				T1.BOUNCEAMOUNT, 
	 				T7.BANKNAME
				FROM PRESENTMENTDETAILS T1 
				INNER JOIN CHEQUEDETAIL T2 ON T2.CHEQUEDETAILSID = T1.MANDATEID
				INNER JOIN FINANCEMAIN T3 ON T1.FINID = T3.FINID
				INNER JOIN RMTFINANCETYPES T4 ON T3.FINTYPE = T4.FINTYPE 
				INNER JOIN CUSTOMERS T5 ON T5.CUSTID = T3.CUSTID 
				LEFT OUTER JOIN BANKBRANCHES T6 ON T2.BANKBRANCHID = T6.BANKBRANCHID 
				LEFT OUTER JOIN BMTBANKDETAIL T7 ON T6.BANKCODE=T7.BANKCODE
	   	 	]]>
		</createView>
	</changeSet>

	<changeSet id="84_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'presentmentdetails_pdcaview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="85_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'presentmentdetails_pdcview');
		 	]]>
		</sql>
	</changeSet>

	<changeSet id="85" author="Gopal.p">
		<createView viewName="PRESENTMENTDETAILS_PDCVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ID, 
					T1.PRESENTMENTID, 
					T1.PRESENTMENTREF, 
					T1.FINID,
					T1.FINREFERENCE, 
					T1.SCHDATE, 
					T1.MANDATEID, 
					T1.SCHAMTDUE, 
					T1.SCHPRIDUE, 
					T1.SCHPFTDUE, 
					T1.SCHFEEDUE, 
					T1.SCHINSDUE,
					T1.SCHPENALTYDUE, 
					T1.ADVANCEAMT, 
					T1.EXCESSID, 
					T1.ADVISEAMT, 
					T1.PRESENTMENTAMT, 
					T1.EXCLUDEREASON, 
					T1.TDSAMOUNT, 
					T1.BOUNCEID, 
					T1.EMINO, 
					T1.STATUS, 
					T1.VERSION,
					T1.LASTMNTBY, 
					T1.LASTMNTON, 
					T1.RECORDSTATUS, 
					T1.ROLECODE, 
					T1.NEXTROLECODE, 
					T1.TASKID, 
					T1.NEXTTASKID, 
					T1.RECORDTYPE, 
					T1.WORKFLOWID, 
					T2.CHEQUETYPE MANDATETYPE,
					T3.FINTYPE, 
					T4.FINTYPEDESC, 
					T5.CUSTSHRTNAME CUSTOMERNAME, 
					T1.RECEIPTID, 
					T1.ECSRETURN, 
					T1.ERRORCODE, 
					T1.ERRORDESC, 
					T1.MANUALADVISEID,
					T1.CHARGES,
					T1.LPPAMOUNT, 
					T1.BOUNCEAMOUNT,
					T7.BANKNAME
				FROM PRESENTMENTDETAILS_TEMP T1 
				INNER JOIN CHEQUEDETAIL T2 ON	T2.CHEQUEDETAILSID = T1.MANDATEID 
				INNER JOIN FINANCEMAIN T3 ON T1.FINID = T3.FINID
				INNER JOIN RMTFINANCETYPES T4 ON T3.FINTYPE = T4.FINTYPE 
				INNER JOIN CUSTOMERS T5 ON T5.CUSTID = T3.CUSTID 
				LEFT OUTER JOIN BANKBRANCHES T6 ON T2.BANKBRANCHID = T6.BANKBRANCHID
				LEFT OUTER JOIN BMTBANKDETAIL T7 ON T6.BANKCODE=T7.BANKCODE
				UNION ALL
				SELECT T1.ID, 
					T1.PRESENTMENTID, 
					T1.PRESENTMENTREF, 
					T1.FINID,
					T1.FINREFERENCE, 
					T1.SCHDATE, 
					T1.MANDATEID, 
					T1.SCHAMTDUE, 
					T1.SCHPRIDUE, 
					T1.SCHPFTDUE, 
					T1.SCHFEEDUE, 
					T1.SCHINSDUE,
					T1.SCHPENALTYDUE, 
					T1.ADVANCEAMT, 
					T1.EXCESSID, 
					T1.ADVISEAMT, 
					T1.PRESENTMENTAMT, 
					T1.EXCLUDEREASON, 
					T1.TDSAMOUNT, 
					T1.BOUNCEID, 
					T1.EMINO, 
					T1.STATUS, 
					T1.VERSION,
					T1.LASTMNTBY, 
					T1.LASTMNTON, 
					T1.RECORDSTATUS, 
					T1.ROLECODE, 
					T1.NEXTROLECODE, 
					T1.TASKID, 
					T1.NEXTTASKID, 
					T1.RECORDTYPE, 
					T1.WORKFLOWID, 
					T2.CHEQUETYPE MANDATETYPE,
					T3.FINTYPE, 
					T4.FINTYPEDESC, 
					T5.CUSTSHRTNAME CUSTOMERNAME, 
					T1.RECEIPTID, 
					T1.ECSRETURN, 
					T1.ERRORCODE, 
					T1.ERRORDESC, 
					T1.MANUALADVISEID,
					T1.CHARGES,
					T1.LPPAMOUNT, 
					T1.BOUNCEAMOUNT,
					T7.BANKNAME
				FROM PRESENTMENTDETAILS T1 
				INNER JOIN CHEQUEDETAIL T2 ON	T2.CHEQUEDETAILSID = T1.MANDATEID 
				INNER JOIN FINANCEMAIN T3 ON T1.FINID = T3.FINID 
				INNER JOIN RMTFINANCETYPES T4 ON T3.FINTYPE = T4.FINTYPE 
				INNER JOIN CUSTOMERS T5 ON T5.CUSTID = T3.CUSTID 
				LEFT OUTER JOIN BANKBRANCHES T6 ON T2.BANKBRANCHID = T6.BANKBRANCHID
				LEFT OUTER JOIN BMTBANKDETAIL T7 ON T6.BANKCODE=T7.BANKCODE
				WHERE NOT EXISTS (SELECT 1 FROM PRESENTMENTDETAILS_TEMP WHERE PRESENTMENTDETAILS_TEMP.ID = T1.ID)
	    	]]>
		</createView>
	</changeSet>

	<changeSet id="85_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'presentmentdetails_pdcview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="86_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'presentmentdetails_view');
		 	]]>
		</sql>
	</changeSet>

	<changeSet id="86" author="Gopal.p">
		<createView viewName="PRESENTMENTDETAILS_VIEW" replaceIfExists="true">
			<![CDATA[
	 			SELECT T1.ID, 
					T1.PRESENTMENTID, 
					T1.PRESENTMENTREF,
					T1.FINID, 
					T1.FINREFERENCE, 
					T1.SCHDATE, 
					T1.MANDATEID, 
					T1.SCHAMTDUE, 
					T1.SCHPRIDUE, 
					T1.SCHPFTDUE, 
					T1.SCHFEEDUE,
					T1.SCHINSDUE, 
					T1.SCHPENALTYDUE, 
					T1.ADVANCEAMT, 
					T1.EXCESSID, 
					T1.ADVISEAMT, 
					T1.PRESENTMENTAMT, 
					T1.EXCLUDEREASON, 
					T1.TDSAMOUNT, 
					T1.BOUNCEID, 
					T1.EMINO, 
					T1.STATUS,
					T1.VERSION, 
					T1.LASTMNTBY, 
					T1.LASTMNTON,
					T1.RECORDSTATUS, 
					T1.ROLECODE, 
					T1.NEXTROLECODE, 
					T1.TASKID, 
					T1.NEXTTASKID, 
					T1.RECORDTYPE, 
					T1.WORKFLOWID, 
					T2.MANDATETYPE, 
					T3.FINTYPE,
					T4.FINTYPEDESC, 
					T5.CUSTSHRTNAME CUSTOMERNAME,
					T1.RECEIPTID, 
					T1.ECSRETURN, 
					T1.ERRORCODE, 
					T1.ERRORDESC, 
					T1.MANUALADVISEID,
					T1.CHARGES,
					T1.LPPAMOUNT, 
					T1.BOUNCEAMOUNT, 
					T7.BANKNAME
				FROM PRESENTMENTDETAILS_TEMP T1 
				INNER JOIN MANDATES T2 ON T1.MANDATEID = T2.MANDATEID 
				INNER JOIN FINANCEMAIN T3 ON T1.FINID = T3.FINID 
				INNER JOIN RMTFINANCETYPES T4 ON T3.FINTYPE = T4.FINTYPE 
				INNER JOIN CUSTOMERS T5 ON T5.CUSTID = T3.CUSTID 
				LEFT OUTER JOIN BANKBRANCHES T6 ON T2.BANKBRANCHID = T6.BANKBRANCHID 
				LEFT OUTER JOIN BMTBANKDETAIL T7 ON T6.BANKCODE=T7.BANKCODE
		 		UNION ALL
		 		SELECT T1.ID, 
					T1.PRESENTMENTID, 
					T1.PRESENTMENTREF,
					T1.FINID, 
					T1.FINREFERENCE, 
					T1.SCHDATE, 
					T1.MANDATEID, 
					T1.SCHAMTDUE, 
					T1.SCHPRIDUE, 
					T1.SCHPFTDUE, 
					T1.SCHFEEDUE,
					T1.SCHINSDUE, 
					T1.SCHPENALTYDUE, 
					T1.ADVANCEAMT, 
					T1.EXCESSID, 
					T1.ADVISEAMT, 
					T1.PRESENTMENTAMT, 
					T1.EXCLUDEREASON, 
					T1.TDSAMOUNT, 
					T1.BOUNCEID, 
					T1.EMINO, 
					T1.STATUS,
					T1.VERSION, 
					T1.LASTMNTBY, 
					T1.LASTMNTON,
					T1.RECORDSTATUS, 
					T1.ROLECODE, 
					T1.NEXTROLECODE, 
					T1.TASKID, 
					T1.NEXTTASKID, 
					T1.RECORDTYPE, 
					T1.WORKFLOWID, 
					T2.MANDATETYPE, 
					T3.FINTYPE,
					T4.FINTYPEDESC, 
					T5.CUSTSHRTNAME CUSTOMERNAME,
					T1.RECEIPTID, 
					T1.ECSRETURN, 
					T1.ERRORCODE, 
					T1.ERRORDESC, 
					T1.MANUALADVISEID,
					T1.CHARGES,
					T1.LPPAMOUNT, 
					T1.BOUNCEAMOUNT, 
					T7.BANKNAME
				FROM PRESENTMENTDETAILS T1 
				INNER JOIN MANDATES T2 ON T1.MANDATEID = T2.MANDATEID 
				INNER JOIN FINANCEMAIN T3 ON T1.FINID = T3.FINID 
				INNER JOIN RMTFINANCETYPES T4 ON T3.FINTYPE = T4.FINTYPE 
				INNER JOIN CUSTOMERS T5 ON T5.CUSTID = T3.CUSTID 
				LEFT OUTER JOIN BANKBRANCHES T6 ON T2.BANKBRANCHID = T6.BANKBRANCHID 
				LEFT OUTER JOIN BMTBANKDETAIL T7 ON T6.BANKCODE=T7.BANKCODE
				WHERE NOT EXISTS (SELECT 1 FROM PRESENTMENTDETAILS_TEMP WHERE ID = T1.ID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="86_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'presentmentdetails_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="87_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'presentmentheader_aview');
		 	]]>
		</sql>
	</changeSet>

	<changeSet id="87" author="Gopal.p">
		<createView viewName="PRESENTMENTHEADER_AVIEW" replaceIfExists="true">
			<![CDATA[ 
				SELECT T1.ID, 
					T1.REFERENCE,
					T1.PRESENTMENTDATE, 
					T1.PARTNERBANKID, 
					T1.FROMDATE, 
					T1.TODATE,
					T1.STATUS, 
					T1.MANDATETYPE, 
					T1.EMANDATESOURCE, 
					T1.LOANTYPE, 
					T1.FINBRANCH, 
					T1.SCHDATE,
					T1.BANKCODE,
					T1.VERSION , 
					T1.LASTMNTBY, 
					T1.LASTMNTON,
					T1.RECORDSTATUS, 
					T1.ROLECODE,
					T1.NEXTROLECODE, 
					T1.TASKID, 
					T1.NEXTTASKID, 
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.DBSTATUSID, 
					T2.PARTNERBANKNAME,
					T2.PARTNERBANKCODE, 
					T2.ACCOUNTNO PARTNERACCTNUMBER,
					T2.ACTYPE PARTNERACCTTYPE,
					T1.IMPORTSTATUSID, 
					T1.TOTALRECORDS,
					T1.PROCESSEDRECORDS,
					T1.SUCCESSRECORDS,
					T1.FAILEDRECORDS,
					T3.BANKNAME,
					T1.ENTITYCODE, 
					T1.PRESENTMENTTYPE,
					T1.LPPREQ,
					T1.BOUNCEREQ,
					T1.APPROVEDDATE
				FROM PRESENTMENTHEADER T1
				LEFT JOIN PARTNERBANKS T2 ON T1.PARTNERBANKID = T2.PARTNERBANKID
				LEFT JOIN BMTBANKDETAIL T3 ON T3.BANKCODE = T1.BANKCODE
	   	 	]]>
		</createView>
	</changeSet>

	<changeSet id="87_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'presentmentheader_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="88_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'presentmentheader_view');
		 	]]>
		</sql>
	</changeSet>

	<changeSet id="88" author="Gopal.p">
		<createView viewName="PRESENTMENTHEADER_VIEW" replaceIfExists="true">
			<![CDATA[ 
				SELECT T1.ID, 
					T1.REFERENCE,
					T1.PRESENTMENTDATE, 
					T1.PARTNERBANKID, 
					T1.FROMDATE, 
					T1.TODATE,
					T1.STATUS, 
					T1.MANDATETYPE, 
					T1.EMANDATESOURCE, 
					T1.LOANTYPE, 
					T1.FINBRANCH, 
					T1.SCHDATE,
					T1.BANKCODE,
					T1.VERSION , 
					T1.LASTMNTBY, 
					T1.LASTMNTON,
					T1.RECORDSTATUS, 
					T1.ROLECODE,
					T1.NEXTROLECODE, 
					T1.TASKID, 
					T1.NEXTTASKID, 
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.DBSTATUSID, 
					T2.PARTNERBANKNAME,
					T2.PARTNERBANKCODE, 
					T2.ACCOUNTNO PARTNERACCTNUMBER,
					T2.ACTYPE PARTNERACCTTYPE,
					T1.IMPORTSTATUSID, 
					T1.TOTALRECORDS,
					T1.PROCESSEDRECORDS,
					T1.SUCCESSRECORDS,
					T1.FAILEDRECORDS,
					T3.BANKNAME,
					T1.ENTITYCODE, 
					T1.PRESENTMENTTYPE,
					T1.LPPREQ,
					T1.BOUNCEREQ,
					T1.APPROVEDDATE
				FROM PRESENTMENTHEADER_TEMP T1
				LEFT JOIN PARTNERBANKS T2 ON T1.PARTNERBANKID = T2.PARTNERBANKID
				LEFT JOIN BMTBANKDETAIL T3 ON T3.BANKCODE = T1.BANKCODE
				UNION ALL
				SELECT T1.ID, 
					T1.REFERENCE,
					T1.PRESENTMENTDATE, 
					T1.PARTNERBANKID, 
					T1.FROMDATE, 
					T1.TODATE,
					T1.STATUS, 
					T1.MANDATETYPE, 
					T1.EMANDATESOURCE, 
					T1.LOANTYPE, 
					T1.FINBRANCH, 
					T1.SCHDATE,
					T1.BANKCODE,
					T1.VERSION , 
					T1.LASTMNTBY, 
					T1.LASTMNTON,
					T1.RECORDSTATUS, 
					T1.ROLECODE,
					T1.NEXTROLECODE, 
					T1.TASKID, 
					T1.NEXTTASKID, 
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.DBSTATUSID, 
					T2.PARTNERBANKNAME,
					T2.PARTNERBANKCODE, 
					T2.ACCOUNTNO PARTNERACCTNUMBER,
					T2.ACTYPE PARTNERACCTTYPE,
					T1.IMPORTSTATUSID, 
					T1.TOTALRECORDS,
					T1.PROCESSEDRECORDS,
					T1.SUCCESSRECORDS,
					T1.FAILEDRECORDS,
					T3.BANKNAME,
					T1.ENTITYCODE, 
					T1.PRESENTMENTTYPE,
					T1.LPPREQ,
					T1.BOUNCEREQ,
					T1.APPROVEDDATE
				FROM PRESENTMENTHEADER T1
				LEFT JOIN PARTNERBANKS T2 ON T1.PARTNERBANKID = T2.PARTNERBANKID
				LEFT JOIN BMTBANKDETAIL T3 ON T3.BANKCODE = T1.BANKCODE
				WHERE NOT EXISTS (SELECT 1 FROM PRESENTMENTHEADER_TEMP WHERE ID = T1.ID)
	    	]]>
		</createView>
	</changeSet>

	<changeSet id="88_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'presentmentheader_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="89_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'int_mandate_request_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="89" author="Gopal.p">
		<createView replaceIfExists="true" viewName="INT_MANDATE_REQUEST_VIEW">
		 	<![CDATA[
				SELECT M.MANDATEID,
					M.DOCUMENTNAME,
					BD.BANKSHORTCODE BANKCODE,
					BD.BANKNAME,
					CASE WHEN LB.BRANCHCODE IS NULL THEN CB.BRANCHCODE
						ELSE LB.BRANCHCODE END BRANCHCODE,
					CASE WHEN LB.BRANCHDESC IS NULL THEN CB.BRANCHDESC
						ELSE LB.BRANCHDESC END BRANCHDESC,
					CUST.CUSTCIF,
					CUST.CUSTSHRTNAME,
					CUST.CUSTCOREBANK,
					FT.FINTYPEDESC FINTYPE,
					FIN.FINID,
					FIN.FINREFERENCE,
					COALESCE((( SELECT SUM(T.TOTALAMOUNT) SUM
						FROM ( SELECT MAX(FSD.REPAYAMOUNT + FSD.FEESCHD) TOTALAMOUNT
							FROM FINSCHEDULEDETAILS FSD
							JOIN FINANCEMAIN FM ON FM.FINID = FSD.FINID AND FM.CUSTID = M.CUSTID
                  			GROUP BY FM.FINID) T)) / CCY.CCYMINORCCYUNITS, 0) CUST_EMI,
    				COALESCE((( SELECT SUM(T.TOTALAMOUNT) SUM
           				FROM ( SELECT MAX(FSD.REPAYAMOUNT + FSD.FEESCHD) TOTALAMOUNT
                   			FROM FINSCHEDULEDETAILS FSD
                  			WHERE (FSD.REPAYONSCHDATE = 1 OR FSD.PFTONSCHDATE = 1) AND (FSD.FINID IN 
                  				(SELECT FINANCEMAIN.FINID FROM FINANCEMAIN
                          			WHERE FINANCEMAIN.MANDATEID = M.MANDATEID))
                  			GROUP BY FSD.FINID) T)) / CCY.CCYMINORCCYUNITS, 0) EMI,
        			CASE M.OPENMANDATE WHEN 1 THEN 'new open ecs'
            			ELSE 'no open ecs' END OPENMANDATE,
    				M.ACCNUMBER,
        			CASE WHEN M.ACCTYPE = '10' THEN 'savings account'
            			WHEN M.ACCTYPE = '11' THEN 'current account'
            			WHEN M.ACCTYPE = '12' THEN 'cash credit account'
            			WHEN M.ACCTYPE = '13' THEN 'SBNRE'
						WHEN M.ACCTYPE = '14' THEN 'SBNRO'
            			ELSE M.ACCTYPE END ACCTYPE,
    				M.ACCHOLDERNAME,
    				BB.MICR,
    				BB.IFSC,
    				BB.ADDOFBRANCH,
    				( SELECT MIN(FINPFTDETAILS.FIRSTREPAYDATE) MIN FROM FINPFTDETAILS
          					WHERE (FINPFTDETAILS.FINID IN (SELECT FINANCEMAIN.FINID
                   			FROM FINANCEMAIN WHERE FINANCEMAIN.MANDATEID = M.MANDATEID))) FIRSTDUEDATE,
    				(SELECT MAX(FINSCHEDULEDETAILS.SCHDATE) MAX FROM FINSCHEDULEDETAILS
          					WHERE (FINSCHEDULEDETAILS.REPAYONSCHDATE = 1 OR FINSCHEDULEDETAILS.PFTONSCHDATE = 1) AND
          					 (FINSCHEDULEDETAILS.FINID IN (SELECT FINANCEMAIN.FINID
                   			FROM FINANCEMAIN WHERE FINANCEMAIN.MANDATEID = M.MANDATEID))) EMIENDDATE,
    				COALESCE(M.MAXLIMIT, 0) MAXLIMIT,
    				COALESCE(( SELECT SUM(T.MANDATEDEBITAMOUNT) SUM FROM (SELECT MAX(FINSCHEDULEDETAILS.REPAYAMOUNT + FINSCHEDULEDETAILS.FEESCHD) MANDATEDEBITAMOUNT
							FROM FINSCHEDULEDETAILS WHERE (FINSCHEDULEDETAILS.REPAYONSCHDATE = 1 OR FINSCHEDULEDETAILS.PFTONSCHDATE = 1) 
							AND (FINSCHEDULEDETAILS.FINID IN (SELECT FINANCEMAIN.FINID FROM FINANCEMAIN
                          		WHERE FINANCEMAIN.MANDATEID = M.MANDATEID))
                  			GROUP BY FINSCHEDULEDETAILS.FINID) T), 0) / CCY.CCYMINORCCYUNITS DEBITAMOUNT,
    				FIN.NUMBEROFTERMS,
				    M.PERIODICITY,
				    M.STARTDATE,
				    M.EXPIRYDATE,
				    FIN.APPLICATIONNO,
				    M.MANDATETYPE,
				    M.STATUS,
				    M.INPUTDATE,
				    M.RECORDSTATUS,
				    M.RECORDTYPE,
				    M.MANDATECCY,
				    COALESCE(CCY.CCYMINORCCYUNITS, 100) CCYMINORCCYUNITS,
				    M.ENTITYCODE,
				    CP.PHONENUMBER,
				    CE.CUSTEMAIL,
				    PB.PARTNERBANKNAME,
				    M.LASTMNTON,
				    BB.BRANCHDESC BANK_BRANCH_NAME,
				    ET.ENTITYDESC,
				    PB.UTILITYCODE,
				    PB.SPONSORBANKCODE,
				    M.PARTNERBANKID,
				    PB.PARTNERBANKCODE,
				    PB.BRANCHIFSCCODE
   				FROM MANDATES M
				JOIN BANKBRANCHES BB ON BB.BANKBRANCHID = M.BANKBRANCHID
				JOIN BMTBANKDETAIL BD ON BD.BANKCODE = BB.BANKCODE
				JOIN CUSTOMERS CUST ON CUST.CUSTID = M.CUSTID
				JOIN RMTBRANCHES CB ON CB.BRANCHCODE = CUST.CUSTDFTBRANCH
				LEFT JOIN PARTNERBANKS PB ON PB.PARTNERBANKID = M.PARTNERBANKID
				LEFT JOIN CUSTOMEREMAILS CE ON CE.CUSTID = CUST.CUSTID AND CE.CUSTEMAILPRIORITY = 5
				LEFT JOIN CUSTOMERPHONENUMBERS CP ON CP.PHONECUSTID = CUST.CUSTID AND CP.PHONETYPEPRIORITY = 5
				LEFT JOIN RMTCURRENCIES CCY ON CCY.CCYCODE = M.MANDATECCY
				LEFT JOIN FINANCEMAIN FIN ON M.ORGREFERENCE = FIN.FINREFERENCE
				LEFT JOIN RMTBRANCHES LB ON LB.BRANCHCODE = FIN.FINBRANCH
				LEFT JOIN RMTFINANCETYPES FT ON FIN.FINTYPE = FT.FINTYPE
				LEFT JOIN ENTITY ET ON M.ENTITYCODE = ET.ENTITYCODE
  				WHERE M.STATUS = 'NEW' AND NOT (M.MANDATEID IN ( SELECT MANDATE_REQUESTS.MANDATEID FROM MANDATE_REQUESTS
          			WHERE MANDATE_REQUESTS.STATUS = 'AC' OR MANDATE_REQUESTS.STATUS = 'NEW'))
			]]>
		</createView>
	</changeSet>

	<changeSet id="89_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'int_mandate_request_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="90_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'int_disbursement_request_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="90" author="Gopal.p">
		<createView viewName="INT_DISBURSEMENT_REQUEST_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FA.PAYMENTID,
					FM.FINID,
					FM.FINREFERENCE,
					FA.PAYMENTDETAIL,
					'D' CHANNEL,
					MANUFACTURERID PROVIDERID,
					CASE WHEN FA.PAYMENTTYPE = 'NEFT' THEN 'N'
						WHEN FA.PAYMENTTYPE = 'RTGS' THEN 'R'
						WHEN FA.PAYMENTTYPE = 'DD' THEN 'D'
						WHEN FA.PAYMENTTYPE = 'CHEQUE' THEN 'C'
						WHEN FA.PAYMENTTYPE = 'IFT' THEN 'I'
						ELSE FA.PAYMENTTYPE END DISBURSEMENT_TYPE,
					FA.AMTTOBERELEASED,
					FA.DISBDATE,
					FA.LLDATE,
					FA.PAYABLELOC,
					FA.PRINTINGLOC,
					FA.LLREFERENCENO CHEQUE_NUMBER,
					CU.CUSTCIF,
					CU.CUSTSHRTNAME,
					CU.PHONENUMBER CUSTOMER_MOBILE,
					CE.CUSTEMAIL CUSTOMER_EMAIL,
					CS.CPPROVINCENAME CUSTOMER_STATE,
					CC.PCCITYNAME CUSTOMER_CITY,
					CA.CUSTADDRHNBR CUSTOMER_ADDRESS1,
					CA.CUSTFLATNBR CUSTOMER_ADDRESS2,
					CA.CUSTADDRSTREET CUSTOMER_ADDRESS3,
					CA.CUSTADDRZIP PINCODE,
					CA.CUSTADDRLINE1 CUSTOMER_ADDRESS4,
					CA.CUSTADDRLINE2 CUSTOMER_ADDRESS5,
					BD.BANKNAME,
					BB.BRANCHCODE,
					BB.BRANCHDESC,
					PBD.CPPROVINCENAME BENFICIARY_BRANCH_STATE,
					PBD.PCCITYNAME BENFICIARY_BRANCH_CITY,
					BB.MICR MICR_CODE,
					BB.IFSC IFSC_CODE,
					FA.BENEFICIARYACCNO,
					CASE WHEN FA.PAYMENTTYPE = 'CHEQUE' OR FA.PAYMENTTYPE = 'DD'
						THEN FA.LIABILITYHOLDNAME
						ELSE FA.BENEFICIARYNAME END BENEFICIARYNAME,
					(FA.PHONECOUNTRYCODE ${call.concatenate} FA.PHONEAREACODE) ${call.concatenate} FA.PHONENUMBER BENEFICIARY_MOBILE,
					BCE.CUSTEMAIL BENFICIRY_EMAIL,
					BRS.CPPROVINCENAME BENFICIARY_STATE,
					BRC.PCCITYNAME BENFICIARY_CITY,
					BRCA.CUSTADDRHNBR ${call.concatenate}','${call.concatenate} BRCA.CUSTADDRSTREET ${call.concatenate}','${call.concatenate} BRC.PCCITYNAME ${call.concatenate}','${call.concatenate} BRS.CPPROVINCENAME  BENFICIARY_ADDRESS1,
					'' BENFICIARY_ADDRESS2,
					'' BENFICIARY_ADDRESS3,
					'' BENFICIARY_ADDRESS4,
					BRCA.CUSTADDRZIP BENFICIARY_ADDRESS5,
					'' PAYMENT_DETAIL1,
					'' PAYMENT_DETAIL2,
					PB.ACCOUNTNO PAYMENT_DETAIL3,
					'' PAYMENT_DETAIL4,
					CPN.PHONENUMBER PAYMENT_DETAIL5,
					FA.PAYMENTDETAIL PAYMENT_DETAIL6,
					CHQBR.BANKNAME PAYMENT_DETAIL7,
					FA.STATUS,
					FA.DESCRIPTION REMARKS,
					FA.PAYMENTTYPE,
					FM.FINTYPE,
					PB.PARTNERBANKID
					PARTNERBANK_ID,
					PB.PARTNERBANKCODE PARTNERBANK_CODE,
					FA.INPUTDATE,
					PB.ALWFILEDOWNLOAD,
					PB.DOWNLOADTYPE,
					PB.FILENAME,
					FM.FINISACTIVE,
					FM.FINAMOUNT,
					FMB.BRANCHDESC FINBRANCH,
					SMD.ENTITYCODE,
					FA.HOLDDISBURSEMENT HOLDDISBURSEMENT,
					PB.ACCOUNTNO,
					PB.ACCOUNTNO PARTNERBANK_ACCOUNT,
					CASE WHEN FA.PAYMENTTYPE = 'NEFT' OR FA.PAYMENTTYPE   = 'RTGS' THEN 'LBT'
						WHEN FA.PAYMENTTYPE = 'IMPS' THEN 'BT' ELSE ''
			  			END TRANSACTION_TYPE_CODE,
			  		FA.LEI,
					PBBRC.PCCITYNAME CITY_NAME,
					PBBRS.CPPROVINCENAME PROVINCE_NAME,
					bbe.BRANCHDESC PRINT_LOC_BRANCH_DESC,
					FA.LLREFERENCENO,
					FA.PHONENUMBER,
					PB.ACTYPE PARTNERBANKACTYPE,
					FA.DISBCCY
				FROM FINADVANCEPAYMENTS FA
				INNER JOIN (SELECT fmt.CUSTID, fmt.FINID, fmt.FINREFERENCE, fmt.FINTYPE, fmt.FINISACTIVE, fmt.FINAMOUNT, fmt.FINBRANCH
					FROM FINANCEMAIN_TEMP fmt
					UNION ALL
					SELECT T2.CUSTID, T2.FINID, T2.FINREFERENCE, T2.FINTYPE, T2.FINISACTIVE, T2.FINAMOUNT, T2.FINBRANCH
					FROM FINANCEMAIN T2
					WHERE NOT (EXISTS ( SELECT 1 FROM FINANCEMAIN_TEMP T3 
						WHERE T3.FINID = T2.FINID))) FM
					ON FM.FINID = FA.FINID
				INNER JOIN RMTBRANCHES FMB ON FMB.BRANCHCODE = FM.FINBRANCH
				INNER JOIN CUSTOMERS CU ON CU.CUSTID = FM.CUSTID	
				INNER JOIN RMTCURRENCIES CCY ON CCY.CCYCODE	= FA.DISBCCY
				INNER JOIN PARTNERBANKS PB ON PB.PARTNERBANKID = FA.PARTNERBANKID
				LEFT JOIN CUSTOMEREMAILS CE	ON CE.CUSTID = CU.CUSTID AND CE.CUSTEMAILPRIORITY = 5
				LEFT JOIN CUSTOMERADDRESSES CA ON CA.CUSTID = CU.CUSTID	AND CA.CUSTADDRPRIORITY = 5
				LEFT JOIN RMTPROVINCEVSCITY CC ON CC.PCCITY = CA.CUSTADDRCITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE CS ON CS.CPPROVINCE = CC.PCPROVINCE
				LEFT JOIN BANKBRANCHES BB ON BB.BANKBRANCHID = FA.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL BD ON BD.BANKCODE =	BB.BANKCODE
				LEFT JOIN ( SELECT PB_1.PARTNERBANKID, PBD_1.BANKNAME, PBB.BRANCHDESC,
					PBBRC.PCCITYNAME, PBBRS.CPPROVINCENAME 
					FROM PARTNERBANKS PB_1
					INNER JOIN BANKBRANCHES PBB ON PBB.BRANCHCODE = PB_1.BANKBRANCHCODE AND PBB.BANKCODE = PB_1.BANKCODE
					INNER JOIN BMTBANKDETAIL PBD_1 ON PBD_1.BANKCODE = PBB.BANKCODE
					LEFT JOIN RMTPROVINCEVSCITY PBBRC ON PBBRC.PCCITY = PBB.CITY
					LEFT JOIN RMTCOUNTRYVSPROVINCE PBBRS ON PBBRS.CPPROVINCE = PBBRC.PCPROVINCE
					) PBD ON PBD.PARTNERBANKID = PB.PARTNERBANKID
				LEFT JOIN BENEFICIARY BR ON BR.BANKBRANCHID = FA.BANKBRANCHID AND BR.ACCNUMBER = FA.BENEFICIARYACCNO AND BR.CUSTID = FM.CUSTID
				LEFT JOIN CUSTOMERS BC ON BC.CUSTID = BR.CUSTID
				LEFT JOIN CUSTOMEREMAILS BCE ON BCE.CUSTID = CU.CUSTID AND BCE.CUSTEMAILPRIORITY = 5
				LEFT JOIN CUSTOMERADDRESSES	BRCA ON	BRCA.CUSTID = BR.CUSTID AND BRCA.CUSTADDRPRIORITY = 5
				LEFT JOIN CUSTOMERPHONENUMBERS CPN ON CPN.PHONECUSTID = CU.CUSTID AND CPN.PHONETYPEPRIORITY = 5
				LEFT JOIN RMTPROVINCEVSCITY BRC	ON BRC.PCCITY =	BRCA.CUSTADDRCITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE BRS ON BRS.CPPROVINCE = BRC.PCPROVINCE
				LEFT JOIN RMTFINANCETYPES RFT ON FM.FINTYPE = RFT.FINTYPE
				LEFT JOIN SMTDIVISIONDETAIL SMD	ON RFT.FINDIVISION = SMD.DIVISIONCODE 
				LEFT JOIN BMTBANKDETAIL CHQBR ON CHQBR.BANKCODE = FA.BANKCODE
				LEFT JOIN BANKBRANCHES bbe on bbe.BANKBRANCHID = FA.BANKBRANCHID and bbe.branchcode = FA.PRINTINGLOC
				LEFT JOIN RMTPROVINCEVSCITY PBBRC ON PBBRC.PCCITY = bbe.CITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE PBBRS ON PBBRS.CPPROVINCE = PBBRC.PCPROVINCE
				LEFT JOIN VASRECORDING VR ON VR.VASREFERENCE = FA.VASREFERENCE
				LEFT JOIN VASSTRUCTURE VS ON VS.PRODUCTCODE = VR.PRODUCTCODE
				WHERE FA.STATUS = 'APPROVED' AND NOT (FA.PAYMENTID IN ( 
					SELECT DISBURSEMENT_REQUESTS.DISBURSEMENT_ID FROM DISBURSEMENT_REQUESTS))
					AND NOT	(FA.PAYMENTID IN ( SELECT FINADVANCEPAYMENTS_TEMP.PAYMENTID FROM FINADVANCEPAYMENTS_TEMP))
				UNION ALL
				SELECT PI.PAYMENTINSTRUCTIONID PAYMENTID,
					FM.FINID,
					FM.FINREFERENCE,
					'CS' PAYMENTDETAIL,
					PH.PAYMENTTYPE CHANNEL,
					0 PROVIDERID,
					CASE WHEN PI.PAYMENTTYPE = 'NEFT' THEN 'N'
						WHEN PI.PAYMENTTYPE = 'RTGS' THEN 'R'
						WHEN PI.PAYMENTTYPE = 'DD' THEN 'D'
						WHEN PI.PAYMENTTYPE = 'CHEQUE' THEN 'C'
						WHEN PI.PAYMENTTYPE = 'IFT' THEN 'I'
						ELSE PI.PAYMENTTYPE END DISBURSEMENT_TYPE,
					PI.PAYMENTAMOUNT AMTTOBERELEASED,
					PI.POSTDATE DISBDATE,
					PI.POSTDATE LLDATE,
					PI.PAYABLELOC,
					PI.PRINTINGLOC,
					PI.FAVOURNUMBER CHEQUE_NUMBER,
					CU.CUSTCIF,
					CU.CUSTSHRTNAME,
					CU.PHONENUMBER CUSTOMER_MOBILE,
					CE.CUSTEMAIL
					CUSTOMER_EMAIL,
					CS.CPPROVINCENAME CUSTOMER_STATE,
					CC.PCCITYNAME CUSTOMER_CITY,
					CA.CUSTADDRHNBR CUSTOMER_ADDRESS1,
					CA.CUSTFLATNBR CUSTOMER_ADDRESS2,
					CA.CUSTADDRSTREET CUSTOMER_ADDRESS3,
					CA.CUSTADDRZIP PINCODE,
					CA.CUSTADDRLINE1 CUSTOMER_ADDRESS4,
					CA.CUSTADDRLINE2 CUSTOMER_ADDRESS5,
					BD.BANKNAME,
					BB.BRANCHCODE,
					BB.BRANCHDESC,
					BBRS.CPPROVINCENAME BENFICIARY_BRANCH_STATE,
					BBRC.PCCITYNAME BENFICIARY_BRANCH_CITY,
					BB.MICR MICR_CODE,
					BB.IFSC IFSC_CODE,
					PI.ACCOUNTNO BENEFICIARYACCNO,
					CASE WHEN PI.PAYMENTTYPE = 'CHEQUE' OR PI.PAYMENTTYPE = 'DD'
						THEN PI.FAVOURNAME
						ELSE PI.ACCTHOLDERNAME END BENEFICIARYNAME,
					PI.PHONECOUNTRYCODE ${call.concatenate} PI.PHONENUMBER BENEFICIARY_MOBILE,
					BCE.CUSTEMAIL BENFICIRY_EMAIL,
					BRS.CPPROVINCENAME BENFICIARY_STATE,
					BRC.PCCITYNAME BENFICIARY_CITY,
					'' BENFICIARY_ADDRESS1,
					'' BENFICIARY_ADDRESS2,
					'' BENFICIARY_ADDRESS3,
					'' BENFICIARY_ADDRESS4,
					BRCA.CUSTADDRZIP BENFICIARY_ADDRESS5,
					'' PAYMENT_DETAIL1,
					'' PAYMENT_DETAIL2,
					PB.ACCOUNTNO PAYMENT_DETAIL3,
					'' PAYMENT_DETAIL4,
					'' PAYMENT_DETAIL5,
					CPN.PHONENUMBER PAYMENT_DETAIL6,
					'' PAYMENT_DETAIL7,
					PI.STATUS,
					PI.REMARKS,
					PI.PAYMENTTYPE,
					FM.FINTYPE,
					PB.PARTNERBANKID PARTNERBANK_ID,
					PB.PARTNERBANKCODE
					PARTNERBANK_CODE,
					PI.POSTDATE INPUTDATE,
					PB.ALWFILEDOWNLOAD,
					PB.DOWNLOADTYPE,
					PB.FILENAME,
					FM.FINISACTIVE,
					FM.FINAMOUNT,
					FMB.BRANCHDESC FINBRANCH,
					SMD.ENTITYCODE,
					0 HOLDDISBURSEMENT,
					PB.ACCOUNTNO,
					PB.ACCOUNTNO PARTNERBANK_ACCOUNT,
					CASE WHEN PI.PAYMENTTYPE = 'NEFT' OR PI.PAYMENTTYPE   = 'RTGS' THEN 'LBT'
						WHEN PI.PAYMENTTYPE = 'IMPS' THEN 'BT' ELSE '' 
						END TRANSACTION_TYPE_CODE,
					PI.LEI,
					PBBRC.PCCITYNAME CITY_NAME,
					PBBRS.CPPROVINCENAME PROVINCE_NAME,
					bbe.BRANCHDESC PRINT_LOC_BRANCH_DESC,
					'' LLReferenceNo,
					'' PHONENUMBER,
					PB.ACTYPE PARTNERBANKACTYPE,
					PI.PAYMENTCCY
				FROM PAYMENTINSTRUCTIONS PI
				JOIN PAYMENTHEADER PH ON PH.PAYMENTID = PI.PAYMENTID
				JOIN (SELECT fmm.CUSTID, fmm.FINID, fmm.FINREFERENCE, fmm.FINTYPE, fmm.FINISACTIVE, fmm.FINAMOUNT, fmm.FINBRANCH
					FROM FINANCEMAIN fmm
					UNION ALL
					SELECT T2.CUSTID, T2.FINID, T2.FINREFERENCE, T2.FINTYPE, T2.FINISACTIVE, T2.FINAMOUNT, T2.FINBRANCH
					FROM FINANCEMAIN_TEMP T2
					WHERE NOT (EXISTS ( SELECT 1 FROM FINANCEMAIN_TEMP T3
						WHERE T3.FINID = T2.FINID))) FM ON FM.FINID = PH.FINID
				INNER JOIN RMTBRANCHES FMB ON FMB.BRANCHCODE = FM.FINBRANCH
				INNER JOIN CUSTOMERS CU ON CU.CUSTID = FM.CUSTID
				INNER JOIN RMTCURRENCIES CCY ON CCY.CCYCODE = PI.PAYMENTCCY
				INNER JOIN PARTNERBANKS PB ON PB.PARTNERBANKID = PI.PARTNERBANKID
				LEFT JOIN CUSTOMEREMAILS CE ON CE.CUSTID = CU.CUSTID AND CE.CUSTEMAILPRIORITY = 5
				LEFT JOIN CUSTOMERADDRESSES CA ON CA.CUSTID = CU.CUSTID AND CA.CUSTADDRPRIORITY = 5
				LEFT JOIN CUSTOMERPHONENUMBERS CPN ON CPN.PHONECUSTID = CU.CUSTID AND CPN.PHONETYPEPRIORITY = 5
				LEFT JOIN RMTPROVINCEVSCITY CC ON CC.PCCITY = CA.CUSTADDRCITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE CS ON CS.CPPROVINCE = CC.PCPROVINCE
				LEFT JOIN CUSTOMERPHONENUMBERS CM ON CM.PHONECUSTID = CU.CUSTID AND CM.PHONETYPECODE = 'MOBILE1' AND CM.PHONETYPEPRIORITY = 5
				LEFT JOIN BANKBRANCHES BB ON BB.BANKBRANCHID = PI.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL BD ON BD.BANKCODE = BB.BANKCODE
				LEFT JOIN RMTPROVINCEVSCITY	BBRC ON BBRC.PCCITY = BB.CITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE BBRS	ON BBRS.CPPROVINCE = BBRC.PCPROVINCE
				LEFT JOIN BENEFICIARY BR ON BR.BANKBRANCHID = PI.BANKBRANCHID AND BR.ACCNUMBER = PI.ACCOUNTNO	AND BR.CUSTID = FM.CUSTID
				LEFT JOIN CUSTOMERS BC ON BC.CUSTID = BR.CUSTID
				LEFT JOIN CUSTOMEREMAILS BCE ON	BCE.CUSTID = CU.CUSTID AND BCE.CUSTEMAILPRIORITY = 5
				LEFT JOIN CUSTOMERADDRESSES BRCA ON BRCA.CUSTID = BR.CUSTID	AND	BRCA.CUSTADDRPRIORITY = 5
				LEFT JOIN RMTPROVINCEVSCITY BRC	ON BRC.PCCITY = BRCA.CUSTADDRCITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE BRS ON BRS.CPPROVINCE = BRC.PCPROVINCE
				LEFT JOIN RMTFINANCETYPES RFT ON FM.FINTYPE = RFT.FINTYPE
				LEFT JOIN SMTDIVISIONDETAIL SMD	ON RFT.FINDIVISION = SMD.DIVISIONCODE
				LEFT JOIN BANKBRANCHES bbe on bbe.BANKBRANCHID = PI.BANKBRANCHID and bbe.branchcode = PI.PRINTINGLOC
				LEFT JOIN RMTPROVINCEVSCITY PBBRC ON PBBRC.PCCITY = bbe.CITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE PBBRS ON PBBRS.CPPROVINCE = PBBRC.PCPROVINCE
				WHERE PI.STATUS = 'APPROVED' AND NOT (PI.PAYMENTINSTRUCTIONID IN
					( SELECT DISBURSEMENT_REQUESTS.DISBURSEMENT_ID FROM DISBURSEMENT_REQUESTS))
			]]>
		</createView>
	</changeSet>

	<changeSet id="90_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'int_disbursement_request_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="91_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'extended_field_mnt_view'); 
			]]>
		</sql>
	</changeSet>
	<changeSet id="91" author="Gopal.p">
		<createView viewName="EXTENDED_FIELD_MNT_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ID,
					T2.FINID,
				    T2.FINREFERENCE,
				    T1.REFERENCE,
				    T2.FINTYPE,
				    T1.TYPE,
				    T2.FINISACTIVE,
				    T6.FINDIVISION AS LOVDESCFINDIVISION,
				    T2.FINCATEGORY AS LOVDESCPRODUCTCODENAME,
				    T2.FINBRANCH,
				    T2.GRACETERMS,
				    T2.CALTERMS,
				    T2.ADVTERMS,
				    T2.FINCURRASSETVALUE,
				    T2.FEECHARGEAMT,
				    T2.FINREPAYMENTAMOUNT,
				    T2.CLOSINGSTATUS,
				    COALESCE(T4.ROLEDESC, ${add.schema}FN_GET_ROLEDESC(T1.NEXTROLECODE)) LOVDESCREQUESTSTAGE,
				    T2.FINSTARTDATE,
				    T2.NUMBEROFTERMS,
				    T2.MATURITYDATE,
				    T2.FINCCY,
				    T2.FINASSETVALUE,
				    T3.CUSTCIF LOVDESCCUSTCIF,
				    T5.PRODUCTCATEGORY,
				    T1.EVENT,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDSTATUS,
				    T1.RECORDTYPE,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.WORKFLOWID,
				    T2.SCHEDULEMETHOD,
				    T2.PROFITDAYSBASIS,
				    COALESCE(T7.NOINST, 0) NOINST
				FROM EXTENDED_FIELD_MNT_TEMP T1
			    JOIN FINANCEMAIN T2 ON T2.FINREFERENCE = T1.REFERENCE
			    INNER JOIN FINPFTDETAILS T7 ON T7.FINREFERENCE = T1.REFERENCE
			    JOIN CUSTOMERS T3 ON T3.CUSTID = T2.CUSTID
			    LEFT JOIN SECROLES T4 ON T1.NEXTROLECODE = T4.ROLECD
			    JOIN BMTPRODUCT T5 ON T2.FINCATEGORY = T5.PRODUCTCODE
			    JOIN RMTFINANCETYPES T6 ON T6.FINTYPE = T2.FINTYPE
				UNION ALL
			 	SELECT T1.ID,
			 		T2.FINID,
			    	T2.FINREFERENCE,
				    T1.REFERENCE,
				    T2.FINTYPE,
				    T1.TYPE,
				    T2.FINISACTIVE,
				    T6.FINDIVISION LOVDESCFINDIVISION,
				    T2.FINCATEGORY LOVDESCPRODUCTCODENAME,
				    T2.FINBRANCH,
				    T2.GRACETERMS,
				    T2.CALTERMS,
				    T2.ADVTERMS,
				    T2.FINCURRASSETVALUE,
				    T2.FEECHARGEAMT,
				    T2.FINREPAYMENTAMOUNT,
				    T2.CLOSINGSTATUS,
				    COALESCE(T4.ROLEDESC, ${add.schema}FN_GET_ROLEDESC(T1.NEXTROLECODE)) LOVDESCREQUESTSTAGE,
				    T2.FINSTARTDATE,
				    T2.NUMBEROFTERMS,
				    T2.MATURITYDATE,
				    T2.FINCCY,
				    T2.FINASSETVALUE,
				    T3.CUSTCIF AS LOVDESCCUSTCIF,
				    T5.PRODUCTCATEGORY,
				    T1.EVENT,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDSTATUS,
				    T1.RECORDTYPE,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.WORKFLOWID,
				    T2.SCHEDULEMETHOD,
				    T2.PROFITDAYSBASIS,
				    COALESCE(T7.NOINST, 0) NOINST
				FROM EXTENDED_FIELD_MNT T1
     			JOIN FINANCEMAIN T2 ON T2.FINREFERENCE = T1.REFERENCE
     			INNER JOIN FINPFTDETAILS T7 ON T7.FINREFERENCE = T1.REFERENCE
     			JOIN CUSTOMERS T3 ON T3.CUSTID = T2.CUSTID
    		    LEFT JOIN SECROLES T4 ON T1.NEXTROLECODE = T4.ROLECD
     			JOIN BMTPRODUCT T5 ON T2.FINCATEGORY = T5.PRODUCTCODE
     			JOIN RMTFINANCETYPES T6 ON T6.FINTYPE = T2.FINTYPE
  				WHERE NOT EXISTS ( SELECT 1 FROM EXTENDED_FIELD_MNT_TEMP WHERE EXTENDED_FIELD_MNT_TEMP.REFERENCE = T1.REFERENCE)
			]]>
		</createView>
	</changeSet>
	<changeSet id="91_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'extended_field_mnt_view');	
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="92_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'linkedfinances_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="92" author="Gopal.p">
		<createView viewName="LINKEDFINANCES_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ID, 
					T1.FINID,
					T1.FINREFERENCE,  
					T1.LINKEDREFERENCE, 
					F.FINTYPE LINKEDFINTYPE, 
					T1.VERSION, 
					T1.LASTMNTBY, 
					T1.LASTMNTON, 
					T1.RECORDSTATUS, 
					T1.ROLECODE, 
					T1.NEXTROLECODE,
					T1.TASKID, 
					T1.NEXTTASKID, 
					T1.RECORDTYPE, 
					T1.WORKFLOWID, 
					C.CUSTSHRTNAME, 
					T1.STATUS
				FROM LINKEDFINANCES T1 
				INNER JOIN FINANCEMAIN_TEMP F ON T1.LINKEDREFERENCE = F.FINREFERENCE AND F.QUICKDISB = 1 
				INNER JOIN CUSTOMERS C ON F.CUSTID = C.CUSTID
				UNION ALL 
				SELECT T1.ID, 
					T1.FINID,
					T1.FINREFERENCE,  
					T1.LINKEDREFERENCE, 
					F.FINTYPE LINKEDFINTYPE, 
					T1.VERSION, 
					T1.LASTMNTBY, 
					T1.LASTMNTON, 
					T1.RECORDSTATUS, 
					T1.ROLECODE, 
					T1.NEXTROLECODE,
					T1.TASKID, 
					T1.NEXTTASKID, 
					T1.RECORDTYPE, 
					T1.WORKFLOWID, 
					C.CUSTSHRTNAME, 
					T1.STATUS
				FROM LINKEDFINANCES T1 
				INNER JOIN FINANCEMAIN F ON T1.LINKEDREFERENCE = F.FINREFERENCE 
				INNER JOIN CUSTOMERS C ON F.CUSTID = C.CUSTID
			]]>
		</createView>
	</changeSet>

	<changeSet id="92_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'linkedfinances_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="93_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'linkedfinances_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="93" author="Gopal.p">
		<createView viewName="LINKEDFINANCES_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ID, 
					T1.FINID,
					T1.FINREFERENCE,  
					T1.LINKEDREFERENCE, 
					F.FINTYPE LINKEDFINTYPE, 
					T1.VERSION, 
					T1.LASTMNTBY, 
					T1.LASTMNTON, 
					T1.RECORDSTATUS, 
					T1.ROLECODE, 
					T1.NEXTROLECODE,
					T1.TASKID, 
					T1.NEXTTASKID, 
					T1.RECORDTYPE, 
					T1.WORKFLOWID, 
					C.CUSTSHRTNAME, 
					T1.STATUS,
					F.QUICKDISB
				FROM LINKEDFINANCES_TEMP T1 
				INNER JOIN FINANCEMAIN_TEMP F ON T1.LINKEDREFERENCE = F.FINREFERENCE AND F.QUICKDISB = 1 
				INNER JOIN CUSTOMERS C ON F.CUSTID = C.CUSTID
				UNION ALL 
				SELECT T1.ID, 
					T1.FINID,
					T1.FINREFERENCE,  
					T1.LINKEDREFERENCE, 
					F.FINTYPE LINKEDFINTYPE, 
					T1.VERSION, 
					T1.LASTMNTBY, 
					T1.LASTMNTON, 
					T1.RECORDSTATUS, 
					T1.ROLECODE, 
					T1.NEXTROLECODE,
					T1.TASKID, 
					T1.NEXTTASKID, 
					T1.RECORDTYPE, 
					T1.WORKFLOWID, 
					C.CUSTSHRTNAME, 
					T1.STATUS,
					F.QUICKDISB
				FROM LINKEDFINANCES_TEMP T1 
				INNER JOIN FINANCEMAIN F ON T1.LINKEDREFERENCE = F.FINREFERENCE 
				INNER JOIN CUSTOMERS C ON F.CUSTID = C.CUSTID
			]]>
		</createView>
	</changeSet>

	<changeSet id="93_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'linkedfinances_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="94_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'linkedfinances_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="94" author="Gopal.p">
		<createView viewName="LINKEDFINANCES_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ID, 
					T1.FINID,
					T1.FINREFERENCE,  
					T1.LINKEDREFERENCE, 
					F.FINTYPE LINKEDFINTYPE, 
					T1.VERSION, 
					T1.LASTMNTBY, 
					T1.LASTMNTON, 
					T1.RECORDSTATUS, 
					T1.ROLECODE, 
					T1.NEXTROLECODE,
					T1.TASKID, 
					T1.NEXTTASKID, 
					T1.RECORDTYPE, 
					T1.WORKFLOWID, 
					C.CUSTSHRTNAME, 
					T1.STATUS
				FROM LINKEDFINANCES_TEMP T1 
				INNER JOIN FINANCEMAIN F ON T1.LINKEDREFERENCE = F.FINREFERENCE 
				INNER JOIN CUSTOMERS C ON F.CUSTID = C.CUSTID
				UNION ALL
				SELECT	T1.ID, 
					T1.FINID,
					T1.FINREFERENCE,  
					T1.LINKEDREFERENCE, 
					F.FINTYPE LINKEDFINTYPE, 
					T1.VERSION, T1.LASTMNTBY, 
					T1.LASTMNTON, 
					T1.RECORDSTATUS, 
					T1.ROLECODE, 
					T1.NEXTROLECODE,
					T1.TASKID, 
					T1.NEXTTASKID, 
					T1.RECORDTYPE, 
					T1.WORKFLOWID,  
					C.CUSTSHRTNAME, 
					T1.STATUS
				FROM LINKEDFINANCES T1 
				INNER JOIN FINANCEMAIN F ON T1.LINKEDREFERENCE = F.FINREFERENCE 
				INNER JOIN CUSTOMERS C ON F.CUSTID = C.CUSTID
				WHERE NOT EXISTS (SELECT 1 FROM LINKEDFINANCES_TEMP WHERE  FINREFERENCE = T1.FINREFERENCE)
			]]>
		</createView>
	</changeSet>

	<changeSet id="94_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'linkedfinances_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="PSD#204813_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'feerefundfinancemain_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="PSD#204813" author="Gopal.p">
		<comment>TDS APPLICABLE ADDED</comment>
		<createView viewName="FEEREFUNDFINANCEMAIN_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT Distinct FM.FINID,
					FM.FINREFERENCE,
  					FM.FINTYPE,
  					FM.FINCCY,
  					FM.FINBRANCH,
  					FM.CLOSINGSTATUS,
					FM.TDSAPPLICABLE
  					FROM FINANCEMAIN FM
  				INNER JOIN FINRECEIPTHEADER FR ON FR.REFERENCE = FM.FINREFERENCE AND FR.RECEIPTPURPOSE  = 'FeePayment'
               		AND (SELECT SUM(FD.PaidAmount) from FINFEEDETAIL FD Where FD.FINREFERENCE = FM.FINREFERENCE) > 0
  				WHERE FM.CLOSINGSTATUS  = 'C'
				UNION ALL
				SELECT Distinct FM.FINID,
					FM.FINREFERENCE,
  					FM.FINTYPE,
  					FM.FINCCY,
  					FM.FINBRANCH,
  					FM.CLOSINGSTATUS,
					FM.TDSAPPLICABLE
  					FROM REJECTFINANCEMAIN FM
  				INNER JOIN FINRECEIPTHEADER FR ON FM.FINREFERENCE = FR.REFERENCE AND FR.RECEIPTPURPOSE  = 'FeePayment'
  				WHERE FR.RECEIPTMODESTATUS != 'C' AND NOT (EXISTS
  					(SELECT 1 FROM FINANCEMAIN  WHERE FINANCEMAIN.FINREFERENCE = FM.FINREFERENCE
  						AND FINANCEMAIN.CLOSINGSTATUS  = 'C'))
			]]>
		</createView>
	</changeSet>

	<changeSet id="PSD#204813_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'feerefundfinancemain_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="PSD#203310_pre" author="Sandeepkumar.m" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'manualadvise_cview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="PSD#203310" author="Sandeepkuamr.m">
		<createView viewName="MANUALADVISE_CVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ADVISEID,
   					 T1.ADVISETYPE,
   					 FM.FINID,
   					 FM.FINREFERENCE,
                     T1.FEETYPEID,
                     T1.SEQUENCE,
                     T1.ADVISEAMOUNT,
                     T1.PAIDAMOUNT,
                     T1.WAIVEDAMOUNT,
                     T1.REMARKS,
					 T1.VALUEDATE,
					 T1.POSTDATE,
					 T1.VERSION,
					 T1.LASTMNTBY,
					 T1.LASTMNTON,
					 T1.RECORDSTATUS,
					 T1.ROLECODE,
					 T1.NEXTROLECODE,
					 T1.TASKID,
					 T1.NEXTTASKID,
					 T1.RECORDTYPE,
					 T1.WORKFLOWID,
					 T2.FEETYPEDESC,
					 T2.FEETYPECODE,
					 T1.BOUNCEID,
					 T1.RECEIPTID,
					 T3.BOUNCECODE,
					 T1.RESERVEDAMT,
					 T1.BALANCEAMT,
					 T3.REASON BOUNCECODEDESC,
					 COALESCE(T2.TAXAPPLICABLE, 0) TAXAPPLICABLE,
					 COALESCE(T2.TDSREQ, 0)  TDSREQ,
					 T2.TAXCOMPONENT,
					 T1.PAIDCGST,
					 T1.PAIDSGST,
					 T1.PAIDIGST,
					 T1.PAIDUGST,
					 T1.WAIVEDCGST,
					 T1.WAIVEDSGST,
					 T1.WAIVEDUGST,
					 T1.WAIVEDIGST,
					 T1.WAIVEDCESS,
					 T1.PAIDCESS,
					 T1.FINSOURCE,
					 T1.DUECREATION,
					 T1.LINKEDTRANID,
					 T1.TDSPAID,
					 T1.HOLDDUE,
					 T1.PRESENTMENTID,
					 T1.STATUS,
					 T1.REASON,
					 T1.DUEDATE
				FROM MANUALADVISE T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
			    LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
				LEFT JOIN BOUNCEREASONS T3 ON T1.BOUNCEID = T3.BOUNCEID
				WHERE NOT EXISTS ( SELECT 1 FROM MANUALADVISE_TEMP MAT WHERE MAT.FINID = T1.FINID and MAT.ADVISEID = T1.ADVISEID and STATUS in ('C','M'))
			    UNION ALL
				 SELECT  T1.ADVISEID,
					    T1.ADVISETYPE,
					    FM.FINID,
					    FM.FINREFERENCE,
					    T1.FEETYPEID,
					    T1.SEQUENCE,
					    T1.ADVISEAMOUNT,
					    T1.PAIDAMOUNT,
					    T1.WAIVEDAMOUNT,
					    T1.REMARKS,
					    T1.VALUEDATE,
					    T1.POSTDATE,
					    T1.VERSION,
					    T1.LASTMNTBY,
					    T1.LASTMNTON,
					    T1.RECORDSTATUS,
					    T1.ROLECODE,
					    T1.NEXTROLECODE,
					    T1.TASKID,
					    T1.NEXTTASKID,
					    T1.RECORDTYPE,
					    T1.WORKFLOWID,
					    T2.FEETYPEDESC,
					    T2.FEETYPECODE,
					    T1.BOUNCEID,
					    T1.RECEIPTID,
					    T3.BOUNCECODE,
					    T1.RESERVEDAMT,
					    T1.BALANCEAMT,
					    T3.REASON BOUNCECODEDESC,
					    COALESCE(T2.TAXAPPLICABLE, 0) TAXAPPLICABLE,
					    COALESCE(T2.TDSREQ, 0) TDSREQ,
					    T2.TAXCOMPONENT,
					    T1.PAIDCGST,
					    T1.PAIDSGST,
					    T1.PAIDIGST,
					    T1.PAIDUGST,
					    T1.WAIVEDCGST,
					    T1.WAIVEDSGST,
					    T1.WAIVEDUGST,
					    T1.WAIVEDIGST,
					    T1.WAIVEDCESS,
					    T1.PAIDCESS,
					    T1.FINSOURCE,
					    T1.DUECREATION,
					    T1.LINKEDTRANID,
					    T1.TDSPAID,
					    T1.HOLDDUE,
					    T1.PRESENTMENTID,
					    T1.STATUS,
					    T1.REASON,
					    T1.DUEDATE
				FROM MANUALADVISE_TEMP T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
			    LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
				LEFT JOIN BOUNCEREASONS T3 ON T1.BOUNCEID = T3.BOUNCEID
				WHERE EXISTS (SELECT 1 FROM MANUALADVISE MA WHERE MA.FINID = T1.FINID and MA.ADVISEID = T1.ADVISEID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="PSD#203310_post" author="Sandeepkumar.m" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'manualadvise_cview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="95_pre" author="rahul.r" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'linkedfinances_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="95" author="rahul.r">
		<createView viewName="LINKEDFINANCES_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ID, 
					T1.FINID,
					T1.FINREFERENCE,  
					T1.LINKEDREFERENCE, 
					F.FINTYPE LINKEDFINTYPE, 
					T1.VERSION, 
					T1.LASTMNTBY, 
					T1.LASTMNTON, 
					T1.RECORDSTATUS, 
					T1.ROLECODE, 
					T1.NEXTROLECODE,
					T1.TASKID, 
					T1.NEXTTASKID, 
					T1.RECORDTYPE, 
					T1.WORKFLOWID, 
					C.CUSTSHRTNAME, 
					T1.STATUS,
					F.QUICKDISB
				FROM LINKEDFINANCES_TEMP T1 
				INNER JOIN FINANCEMAIN_TEMP F ON T1.LINKEDREFERENCE = F.FINREFERENCE 
				INNER JOIN CUSTOMERS C ON F.CUSTID = C.CUSTID
				UNION ALL 
				SELECT T1.ID, 
					T1.FINID,
					T1.FINREFERENCE,  
					T1.LINKEDREFERENCE, 
					F.FINTYPE LINKEDFINTYPE, 
					T1.VERSION, 
					T1.LASTMNTBY, 
					T1.LASTMNTON, 
					T1.RECORDSTATUS, 
					T1.ROLECODE, 
					T1.NEXTROLECODE,
					T1.TASKID, 
					T1.NEXTTASKID, 
					T1.RECORDTYPE, 
					T1.WORKFLOWID, 
					C.CUSTSHRTNAME, 
					T1.STATUS,
					F.QUICKDISB
				FROM LINKEDFINANCES_TEMP T1 
				INNER JOIN FINANCEMAIN F ON T1.LINKEDREFERENCE = F.FINREFERENCE 
				INNER JOIN CUSTOMERS C ON F.CUSTID = C.CUSTID
			]]>
		</createView>
	</changeSet>

	<changeSet id="95_post" author="rahul.r" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'linkedfinances_tview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="96.1_pre" author="rahul.r" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'lmtfinrefdetail_peview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="96.1" author="rahul.r">
		<createView viewName="LMTFINREFDETAIL_PEVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT t1.finrefdetailid,
			    t1.fintype,
			    t1.finreftype,
			    t1.finrefid,
			    t1.isactive,
			    t1.showinstage,
			    t1.mandinputinstage,
			    t1.allowinputinstage,
			    t1.allowdeviation,
			    t1.allowwaiver,
			    t1.allowpostpone,
			    t1.allowexpire,
			    t1.override,
			    t1.overridevalue,
			    t1.finevent,
			    t1.alerttype,
			    t1.version,
			    t1.lastmntby,
			    t1.lastmnton,
			    t1.recordstatus,
			    t1.rolecode,
			    t1.nextrolecode,
			    t1.taskid,
			    t1.nexttaskid,
			    t1.recordtype,
			    t1.workflowid,
			    COALESCE(t2.fintypedesc, t10.collateraldesc, t11.productdesc) AS lovdescfintypedescname,
			    t2.finccy AS lovdescfinccycode,
			    t2.fincategory AS lovdescproductcodename,
			    t3.aggimage AS lovdescaggimage,
			    COALESCE(t3.aggname, t4.eventcode, t7.rulecodedesc, t8.scoregroupname, t9.scoregroupname) AS lovdescnamelov,
			    COALESCE(t3.aggcode, t7.rulecode, t8.scoregroupcode, t9.scoregroupcode) AS lovdesccodelov,
			    COALESCE(t3.aggdesc, t4.accountsetcodename, t5.checklistdesc, t7.rulecode, t8.scoregroupcode, t9.scoregroupcode) AS lovdescrefdesc,
			    t3.aggreportname AS lovdescaggreportname,
			    t3.aggreportpath AS lovdescaggreportpath,
			    t3.agrrule AS lovdescaggrulename,
			    t3.aggtype,
			    t3.moduletype,
			    COALESCE(t3.allowmultiple, 0) AS allowmultiple,
			    COALESCE(t5.remarks, '0') AS lovdescisremarksallowed,
			    COALESCE(t5.checkmincount, 0) AS lovdesccheckmincount,
			    COALESCE(t5.checkmaxcount, 0) AS lovdesccheckmaxcount,
			    COALESCE(t6.sqlrule, t7.sqlrule) AS lovdescelgrulevalue,
			    COALESCE(t6.returntype, t7.returntype) AS lovdescrulereturntype,
			    COALESCE(t8.minscore, t9.minscore, 0) AS lovdescminscore,
			    COALESCE(t8.isoverride, t9.isoverride, 0) AS lovdescisoverride,
			    COALESCE(t8.overridescore, t9.overridescore, '0') AS lovdescoverridescore
			   FROM lmtfinrefdetail t1
			     LEFT JOIN rmtfinancetypes t2 ON t1.fintype = t2.fintype
			     LEFT JOIN collateralstructure t10 ON t1.fintype = t10.collateraltype
			     LEFT JOIN vasstructure t11 ON t1.fintype = t11.productcode
			     LEFT JOIN bmtaggrementdef t3 ON t1.finrefid = t3.aggid AND t1.finreftype = 2
			     LEFT JOIN rmtaccountingset t4 ON t1.finrefid = t4.accountsetid AND t1.finreftype = 5
			     LEFT JOIN bmtchecklist t5 ON t1.finrefid = t5.checklistid AND t1.finreftype = 1
			     LEFT JOIN rules t6 ON t6.rulecode = t5.checkrule AND t6.rulemodule = 'CLRULE' AND t6.ruleevent = 'CLRULE'
			     LEFT JOIN rules t7 ON t1.finrefid = t7.ruleid AND t1.finreftype = 3
			     LEFT JOIN rmtscoringgroup t8 ON t1.finrefid = t8.scoregroupid AND t1.finreftype = 4 AND t8.categorytype = 'RETAIL'
			     LEFT JOIN rmtscoringgroup t9 ON t1.finrefid = t9.scoregroupid AND t1.finreftype = 7 AND t9.categorytype = 'CORP'
			]]>
		</createView>
	</changeSet>
	
	<changeSet id="96.1_post" author="rahul.r" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'lmtfinrefdetail_peview');
			]]>
		</sql>
	</changeSet>
	
	
	<changeSet id="97.1_pre" author="rahul.r" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'lmtfinrefdetail_finview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="97.1" author="rahul.r">
		<createView viewName="LMTFINREFDETAIL_FINVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT t1.finrefdetailid,
			    t1.fintype,
			    t1.finreftype,
			    t1.finrefid,
			    t1.isactive,
			    t1.showinstage,
			    t1.mandinputinstage,
			    t1.allowinputinstage,
			    t1.allowdeviation,
			    t1.allowwaiver,
			    t1.allowpostpone,
			    t1.allowexpire,
			    t1.override,
			    t1.overridevalue,
			    t1.finevent,
			    t1.alerttype,
			    t1.version,
			    t1.lastmntby,
			    t1.lastmnton,
			    t1.recordstatus,
			    t1.rolecode,
			    t1.nextrolecode,
			    t1.taskid,
			    t1.nexttaskid,
			    t1.recordtype,
			    t1.workflowid,
			    t2.fintypedesc AS lovdescfintypedescname,
			    t2.finccy AS lovdescfinccycode,
			    t2.fincategory AS lovdescproductcodename,
			    t3.aggimage AS lovdescaggimage,
			    COALESCE(t3.aggname, t4.eventcode, t7.rulecodedesc, t8.scoregroupname, t9.scoregroupname, t11.tabdescription) AS lovdescnamelov,
			    COALESCE(t3.aggcode, t7.rulecode, t8.scoregroupcode, t9.scoregroupcode, t11.tabcode) AS lovdesccodelov,
			    COALESCE(t3.aggdesc, t4.accountsetcodename, t5.checklistdesc, t7.rulecode, t8.scoregroupcode, t9.scoregroupcode, t10.limitcode, t11.tabcode) AS lovdescrefdesc,
			    t3.aggreportname AS lovdescaggreportname,
			    t3.aggreportpath AS lovdescaggreportpath,
			    t3.agrrule AS lovdescaggrulename,
			    t3.aggtype,
			    t3.moduletype,
			    COALESCE(t3.allowmultiple, 0) AS allowmultiple,
			    COALESCE(t5.remarks, '0') AS lovdescisremarksallowed,
			    COALESCE(t5.checkmincount, 0) AS lovdesccheckmincount,
			    COALESCE(t5.checkmaxcount, 0) AS lovdesccheckmaxcount,
			    COALESCE(t6.sqlrule, t7.sqlrule) AS lovdescelgrulevalue,
			    COALESCE(t6.returntype, t7.returntype) AS lovdescrulereturntype,
			    COALESCE(t8.minscore, t9.minscore, 0) AS lovdescminscore,
			    COALESCE(t8.isoverride, t9.isoverride, 0) AS lovdescisoverride,
			    COALESCE(t8.overridescore, t9.overridescore, '0') AS lovdescoverridescore,
			    t11.tabcode
			   FROM lmtfinrefdetail t1
			     JOIN rmtfinancetypes t2 ON t1.fintype = t2.fintype
			     LEFT JOIN bmtaggrementdef t3 ON t1.finrefid = t3.aggid AND t1.finreftype = 2
			     LEFT JOIN rmtaccountingset t4 ON t1.finrefid = t4.accountsetid AND t1.finreftype = 5
			     LEFT JOIN bmtchecklist t5 ON t1.finrefid = t5.checklistid AND t1.finreftype = 1
			     LEFT JOIN rules t6 ON t6.rulecode = t5.checkrule AND t6.rulemodule = 'CLRULE' AND t6.ruleevent  = 'CLRULE'
			     LEFT JOIN rules t7 ON t1.finrefid = t7.ruleid AND t1.finreftype = 3
			     LEFT JOIN rmtscoringgroup t8 ON t1.finrefid = t8.scoregroupid AND t1.finreftype = 4 AND t8.categorytype  = 'RETAIL'
			     LEFT JOIN rmtscoringgroup t9 ON t1.finrefid = t9.scoregroupid AND t1.finreftype = 7 AND t9.categorytype  = 'CORP'
			     LEFT JOIN limitcodedetail t10 ON t10.limitid = t1.finrefid
			     LEFT JOIN stagetabdetail t11 ON t1.finrefid = t11.tabid AND t1.finreftype = 15
			]]>
		</createView>
	</changeSet>
	
	<changeSet id="97.1_post" author="rahul.r" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'lmtfinrefdetail_finview');
			]]>
		</sql>
	</changeSet>
	

	<changeSet id="98.1_pre" author="rahul.r" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'facilityreferencedetail_view');
			]]>
		</sql>
	</changeSet>
	<changeSet id="98.1" author="rahul.r">
		<createView viewName="FACILITYREFERENCEDETAIL_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT t1.finrefdetailid,
			    t1.fintype,
			    t1.finreftype,
			    t1.finrefid,
			    t1.isactive,
			    t1.showinstage,
			    t1.mandinputinstage,
			    t1.allowinputinstage,
			    t1.override,
			    t1.overridevalue,
			    t1.version,
			    t1.lastmntby,
			    t1.lastmnton,
			    t1.recordstatus,
			    t1.rolecode,
			    t1.nextrolecode,
			    t1.taskid,
			    t1.nexttaskid,
			    t1.recordtype,
			    t1.workflowid,
			    t2.facilitydesc AS lovdescfintypedescname,
			    COALESCE(t3.aggname, t5.scoregroupname, t6.scoregroupname) AS lovdescnamelov,
			    COALESCE(t3.aggdesc, t4.checklistdesc, t5.scoregroupname, t6.scoregroupname) AS lovdescrefdesc,
			    t3.aggreportname AS lovdescaggreportname,
			    t3.aggreportpath AS lovdescaggreportpath,
			    t3.aggimage AS lovdescaggimage,
			    COALESCE(t3.aggcode, t5.scoregroupcode, t6.scoregroupcode) AS lovdesccodelov,
			    COALESCE(t4.remarks, '0') AS lovdescisremarksallowed,
			    COALESCE(t4.checkmincount, 0) AS lovdesccheckmincount,
			    COALESCE(t4.checkmaxcount, 0) AS lovdesccheckmaxcount,
			    t41.sqlrule AS lovdescelgrulevalue,
			    COALESCE(t5.minscore, t6.minscore, 0) AS lovdescminscore,
			    COALESCE(t5.isoverride, t6.isoverride, 0) AS lovdescisoverride,
			    COALESCE(t5.overridescore, t6.overridescore, '0') AS lovdescoverridescore
			   FROM lmtfacilityrefdetail t1
			     JOIN caffacilitytypes t2 ON t1.fintype = t2.facilitytype
			     LEFT JOIN bmtaggrementdef t3 ON t1.finrefid = t3.aggid AND t1.finreftype = 2
			     LEFT JOIN bmtchecklist t4 ON t1.finrefid = t4.checklistid AND t1.finreftype = 1
			     LEFT JOIN rules t41 ON t41.rulecode = t4.checkrule AND t41.rulemodule = 'CLRULE' AND t41.ruleevent = ''
			     LEFT JOIN rmtscoringgroup t5 ON t1.finrefid = t5.scoregroupid AND t1.finreftype = 4 AND t5.categorytype = 'I'
			     LEFT JOIN rmtscoringgroup t6 ON t1.finrefid = t6.scoregroupid AND t1.finreftype = 7 AND t6.categorytype = 'C'
			]]>
		</createView>
	</changeSet>
	
	<changeSet id="98.1_post" author="rahul.r" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'facilityreferencedetail_view');
			]]>
		</sql>
	</changeSet>
	
</databaseChangeLog>