<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">
	<property name="add.schema" value="dbo." dbms="mssql" />
	<property name="add.schema" value=" " dbms="oracle" />
	<property name="add.schema" value=" " dbms="postgresql" />
	<property name="call.substr" value="substring" dbms="mssql" />
	<property name="call.substr" value="substr" dbms="oracle" />
	<property name="call.substr" value="substring" dbms="postgresql" />
	<property name="call.auditdb" value="PFFBFSQCAudit.." dbms="mssql" />
	<property name="call.auditdb" value=" " dbms="oracle" />
	<property name="call.concatenate" value="+" dbms="mssql" />
	<property name="call.concatenate" value="||" dbms="oracle" />
	<property name="call.concatenate" value="||" dbms="postgresql" />
	<property name="call.collength" value="LEN" dbms="mssql" />
	<property name="call.collength" value="LENGTH" dbms="oracle" />
	<property name="call.collength" value="LENGTH" dbms="postgresql" />
	<property name="call.date" value="getdate()" dbms="mssql" />
	<property name="call.date" value="sysdate" dbms="oracle" />
	<property name="call.date" value="now()::timestamp" dbms="postgresql" />

	<changeSet id="pre_run_for_pgp" author="satish" runAlways="true" dbms="postgresql">
		<sql>
			Set search_path = plf,public,pg_catalog;
		</sql>
	</changeSet>
	
	<changeSet id="01" author="saikrishna.b">
		<sql>
   			 <![CDATA[
				DELETE FROM REPORTLIST WHERE CODE = 'OverdraftLimit';
				
				INSERT INTO REPORTLIST (CODE, MODULE, FIELDLABELS, FIELDVALUES, FIELDTYPE, ADDFIELDS, REPORTFILENAME, REPORTHEADING, MODULETYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, FORMATREQ) VALUES ('OverdraftLimit', 'OverdraftLimit', 'listheader_custCIF.label,listheader_FinReference.label', 'CUSTCIF, FINREFERENCE', 'String,String', '', 'ReportList02', 'Manual Blocking', 'Manual Blocking', 1, 1000, NULL,'Approved', NULL, NULL, NULL, NULL, NULL, 0, 0);
   			 ]]>
		</sql>
	</changeSet>

	<changeSet id="PSD#205798" author="vasudevarao.s">
		<dropNotNullConstraint tableName="COVENANTS" columnName="REMARKS" columnDataType="varchar(500)" />
	</changeSet>

	<changeSet id="PSD#205798.01" author="vasudevarao.s">
		<dropNotNullConstraint tableName="COVENANTS_TEMP" columnName="REMARKS" columnDataType="varchar(500)" />
	</changeSet>
	
	<changeSet id="PSD#205878_pre" author="Mounika.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'querydetail');
				select deps_save_and_drop_dependencies ('plf', 'querydetail_temp');
			]]>
		</sql>
	</changeSet>

	 <changeSet id="PSD#205878.1" author="Mounika.M">
    	<modifyDataType tableName="QueryDetail" columnName="QryNotes" newDataType="varchar(2000)"/>
    </changeSet>
    
    <changeSet id="PSD#205878.2" author="Mounika.M">
    	<modifyDataType tableName="QueryDetail" columnName="Status" newDataType="varchar(100)"/>
    </changeSet>
    
     <changeSet id="PSD#205878.3" author="Mounika.M">
		<modifyDataType tableName="Querydetail_Temp" columnName="QryNotes" newDataType="varchar(2000)"/>
     </changeSet>
     
      <changeSet id="PSD#205878.4" author="Mounika.M">
      	<modifyDataType tableName="Querydetail_Temp" columnName="Status" newDataType="varchar(100)"/>
     </changeSet>
	 
	 <changeSet id="PSD#205878_post" author="Mounika.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'querydetail_temp');
				select deps_restore_dependencies ('plf', 'querydetail');
			]]>
		</sql>
	</changeSet>
     
     <changeSet id="Linked_1" author="nagavamsi.p">
		<sql>
			<![CDATA[
				DELETE FROM STAGETABDETAIL WHERE TABCODE = 'Linked';
				INSERT INTO STAGETABDETAIL (TABID, TABCODE, TABDESCRIPTION, ACTIVE) VALUES ((SELECT MAX(TABID)+1 FROM STAGETABDETAIL), 'Linked', 'Linking/De-Linking  details', 1);
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="PSD#205801" author="Mounika.M">
		<sql>
			<![CDATA[
				UPDATE REPORTLIST SET FIELDVALUES = 'FinType, LovDescProductCodeName, LovDescCustCIF, FinReference, FinBranch, FinStartDate, NumberOfTerms, MaturityDate, FinCcy, FinancingAmount, CurFinAmount, FinCurrAssetValue, FeeChargeAmt, TotalCpz, FinRepaymentAmount, SvAmount, DownPayment, ClosingStatus' WHERE CODE ='SCHENQ';
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="PSD#205073" author="Mounika.M">
		<sql>
			<![CDATA[
				DELETE FROM REPORTFILTERFIELDS WHERE REPORTID IN (SELECT REPORTID FROM REPORTCONFIGURATION WHERE MENUITEMCODE = 'menu_Item_welcomeletter');
                DELETE FROM REPORTCONFIGURATION WHERE MENUITEMCODE = 'menu_Item_welcomeletter';
                
                INSERT INTO REPORTCONFIGURATION (REPORTID, REPORTNAME, REPORTHEADING, PROMPTREQUIRED, REPORTJASPERNAME, DATASOURCENAME, SHOWTEMPLIBRARY, MENUITEMCODE, VERSION, LASTMNTBY, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, ALWMULTIFORMAT, WHERECONDITION, SCHEDULEREQ) VALUES ((SELECT MAX(REPORTID)+1 FROM REPORTCONFIGURATION), 'welcomeletter', 'welcome letter', 1, 'welcomeletter', 'dataSource', 1, 'menu_Item_welcomeletter', 1, 1000, NULL, NULL, NULL, NULL, NULL, NULL, 0, CURRENT_TIMESTAMP, 1, 1, 0);
			    INSERT INTO REPORTFILTERFIELDS (REPORTID, FIELDID, FIELDNAME, FIELDTYPE, FIELDLABEL, FIELDDBNAME, APPUTILMETHODNAME, MODULENAME, LOVHIDDENFIELDMETHOD, LOVTEXTFIELDMETHOD, MULTISELECTSEARCH, FIELDLENGTH, FIELDMAXVALUE, FIELDMINVALUE, SEQORDER, MANDATORY, FIELDCONSTRAINT, FIELDERRORMESSAGE, WHERECONDITION, STATICVALUE, FIELDWIDTH, FILTERREQUIRED, DEFAULTFILTER, VERSION, LASTMNTBY, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, FILTERFILEDS) VALUES ((SELECT REPORTID FROM REPORTCONFIGURATION WHERE MENUITEMCODE = 'menu_Item_welcomeletter'), 1, 'Loan Reference', 'LOVSEARCH', 'Loan Reference', 't.finreference', NULL, 'FinanceMain', 'getFinReference', 'getFinReference', 1, 0, 0, 0, 1, 1, ' ', ' ', ' ', ' ', 250, 0, '=', 1, 1000, 'Approved', NULL, NULL, NULL, NULL, NULL, 0, CURRENT_TIMESTAMP, NULL);  
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="02" author="rahul.r">
		<sql>
			<![CDATA[
				Delete from RBFieldDetails WHERE ((RBModule = 'FIN') AND (RBEvent = 'FIN')) 

				Insert into RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','ct_custShrtName','Customer Name','nvarchar',50,'1','1','Customers','static,global','Customer');
				Insert into RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_custID','Customer ID','bigint',10,'0','1','Customers','static,dbvalue','Customer');
				Insert into RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_downPayment','Down Payment','Decimal',18,'1','1',null,'static',null);
				Insert into RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_effectiveRateOfReturn','Effective Rate of Return','Decimal',18,'1','1',' ','static,global',' ');
				Insert into RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_feeChargeAmt','Fee Charge Amount','Decimal',18,'1','1',null,'static',null);
				Insert into RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_finAmount','Loan Amount','Decimal',18,'1','1',null,'static',null);
				Insert into RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_finApprovedDate','Loan Approved Date','nvarchar',8,'0','1',null,'static',null);
				Insert into RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_finBranch','Loan Branch','nvarchar',8,'0','1','RMTBranches','static,dbvalue','RMTBranches');
				Insert into RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_finCcy','Loan Currency','nvarchar',3,'0','1','RMTCurrencies','static,dbvalue','RMTCurrencies');
				Insert into RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_finReference','Loan Reference','nvarchar',20,'0','1',null,'static',null);
				Insert into RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_finRepayMethod','Loan Repay Method','nvarchar',8,'0','1',' ','static',' ');
				Insert into RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_finRepaymentAmount','Loan Repayment Amount','Decimal',18,'1','1',null,'static',null);
				Insert into RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_finStartDate','Loan Start Date','nvarchar',8,'0','1',null,'static',null);
				Insert into RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_finType','Loan Type','nvarchar',8,'0','1','RMTFinanceTypes','static,dbvalue','FinanceType');
				Insert into RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_firstRepay',' First Repay','Decimal',18,'1','1',null,'static',null);
				Insert into RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_graceTerms','Grace Terms','bigint',9,'1','1',null,'static',null);
				Insert into RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_grcPftRate','Grace Interest Rate','Decimal',13,'1','1',null,'static',null);
				Insert into RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_grcSchdMthd','Grace Schedule Method','nvarchar',8,'0','1',null,'static',null);
				Insert into RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_lastRepayDate','Last Repay Date','nvarchar',8,'0','1',null,'static',null);
				Insert into RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_maturityDate','Maturity Date','nvarchar',8,'0','1',null,'static',null);
				Insert into RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_nextRoleCode','Next Role Code','nvarchar',100,'1','1',null,'static,global',null);
				Insert into RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_nextRoleCodeDesc','Next Role Code Description','nvarchar',100,'1','1',null,'static',null);
				Insert into RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_numberOfTerms','Number Of Terms','bigint',9,'1','1',null,'static',null);
				Insert into RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_profitDaysBasis','Interest Days Basis','nvarchar',8,'0','1',null,'static',null);
				Insert into RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_roleCode','Role Code','nvarchar',100,'1','1',null,'static,global',null);
				Insert into RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_totalCpz','Total Capitalize','Decimal',18,'1','1',null,'static',null);
				Insert into RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_totalGraceCpz','Total Grace Captalize','Decimal',18,'1','1',null,'static',null);
				Insert into RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_totalGracePft','Total Grace Interest','Decimal',18,'1','1',null,'static',null);
				Insert into RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_totalGrossGrcPft','Total Gross Grace Interest','Decimal',18,'1','1',null,'static',null);
				Insert into RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_totalGrossPft','Total Gross Interest','Decimal',18,'1','1',null,'static',null);
				Insert into RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_totalProfit','Total Interest','Decimal',18,'1','1',null,'static',null);
				Insert into RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_totalRepayAmt','Total Repay Amount','Decimal',18,'1','1',null,'static',null);
				Insert into RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_workFlowType','Workflow Type','nvarchar',50,'1','1','WorkFlowDetails','static,dbvalue','WorkFlowDetails');
				Insert into RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','CovenantDoc','Covenant Documents','nvarchar',5,'0','1','static',null,null);
				Insert into RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_receiptpurpose','Receipt Purpose','nvarchar',20,'0','1',null,'static,global',null);
				Insert into RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_recordStatus','Record Status','nvarchar',100,'1','1',null,'static',null);
				]]>
		</sql>
	</changeSet>
		
</databaseChangeLog>