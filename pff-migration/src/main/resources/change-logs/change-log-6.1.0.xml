<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">
	<property name="add.schema" value="dbo." dbms="mssql" />
	<property name="add.schema" value=" " dbms="oracle" />
	<property name="add.schema" value=" " dbms="postgresql" />
	<property name="call.substr" value="substring" dbms="mssql" />
	<property name="call.substr" value="substr" dbms="oracle" />
	<property name="call.substr" value="substring" dbms="postgresql" />
	<property name="call.auditdb" value="PFFBFSQCAudit.." dbms="mssql" />
	<property name="call.auditdb" value=" " dbms="oracle" />
	<property name="call.concatenate" value="+" dbms="mssql" />
	<property name="call.concatenate" value="||" dbms="oracle" />
	<property name="call.concatenate" value="||" dbms="postgresql" />
	<property name="call.collength" value="LEN" dbms="mssql" />
	<property name="call.collength" value="LENGTH" dbms="oracle" />
	<property name="call.collength" value="LENGTH" dbms="postgresql" />
	<property name="call.date" value="getdate()" dbms="mssql" />
	<property name="call.date" value="sysdate" dbms="oracle" />
	<property name="call.date" value="now()::timestamp" dbms="postgresql" />

	<changeSet id="pre_run_for_pgp" author="satish" runAlways="true" dbms="postgresql">
		<sql>
			Set search_path = plf,public,pg_catalog;
		</sql>
	</changeSet>
	
	<changeSet id="01" author="saikrishna.b">
		<sql>
   			 <![CDATA[
				DELETE FROM REPORTLIST WHERE CODE = 'OverdraftLimit';
				
				INSERT INTO REPORTLIST (CODE, MODULE, FIELDLABELS, FIELDVALUES, FIELDTYPE, ADDFIELDS, REPORTFILENAME, REPORTHEADING, MODULETYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, FORMATREQ) VALUES ('OverdraftLimit', 'OverdraftLimit', 'listheader_custCIF.label,listheader_FinReference.label', 'CUSTCIF, FINREFERENCE', 'String,String', '', 'ReportList02', 'Manual Blocking', 'Manual Blocking', 1, 1000, NULL,'Approved', NULL, NULL, NULL, NULL, NULL, 0, 0);
   			 ]]>
		</sql>
	</changeSet>

	<changeSet id="PSD#205798" author="vasudevarao.s">
		<dropNotNullConstraint tableName="COVENANTS" columnName="REMARKS" columnDataType="varchar(500)" />
	</changeSet>

	<changeSet id="PSD#205798.01" author="vasudevarao.s">
		<dropNotNullConstraint tableName="COVENANTS_TEMP" columnName="REMARKS" columnDataType="varchar(500)" />
	</changeSet>
	
	<changeSet id="PSD#205878_pre" author="Mounika.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'querydetail');
				select deps_save_and_drop_dependencies ('plf', 'querydetail_temp');
			]]>
		</sql>
	</changeSet>

	 <changeSet id="PSD#205878.1" author="Mounika.M">
    	<modifyDataType tableName="QueryDetail" columnName="QryNotes" newDataType="varchar(2000)"/>
    </changeSet>
    
    <changeSet id="PSD#205878.2" author="Mounika.M">
    	<modifyDataType tableName="QueryDetail" columnName="Status" newDataType="varchar(100)"/>
    </changeSet>
    
     <changeSet id="PSD#205878.3" author="Mounika.M">
		<modifyDataType tableName="Querydetail_Temp" columnName="QryNotes" newDataType="varchar(2000)"/>
     </changeSet>
     
      <changeSet id="PSD#205878.4" author="Mounika.M">
      	<modifyDataType tableName="Querydetail_Temp" columnName="Status" newDataType="varchar(100)"/>
     </changeSet>
	 
	 <changeSet id="PSD#205878_post" author="Mounika.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'querydetail_temp');
				select deps_restore_dependencies ('plf', 'querydetail');
			]]>
		</sql>
	</changeSet>
     
     <changeSet id="Linked_1" author="nagavamsi.p">
		<sql>
			<![CDATA[
				DELETE FROM STAGETABDETAIL WHERE TABCODE = 'Linked';
				INSERT INTO STAGETABDETAIL (TABID, TABCODE, TABDESCRIPTION, ACTIVE) VALUES ((SELECT MAX(TABID)+1 FROM STAGETABDETAIL), 'Linked', 'Linking/De-Linking  details', 1);
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="PSD#205801" author="Mounika.M">
		<sql>
			<![CDATA[
				UPDATE REPORTLIST SET FIELDVALUES = 'FinType, LovDescProductCodeName, LovDescCustCIF, FinReference, FinBranch, FinStartDate, NumberOfTerms, MaturityDate, FinCcy, FinancingAmount, CurFinAmount, FinCurrAssetValue, FeeChargeAmt, TotalCpz, FinRepaymentAmount, SvAmount, DownPayment, ClosingStatus' WHERE CODE ='SCHENQ';
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="PSD#205073" author="Mounika.M">
		<sql>
			<![CDATA[
				DELETE FROM REPORTFILTERFIELDS WHERE REPORTID IN (SELECT REPORTID FROM REPORTCONFIGURATION WHERE MENUITEMCODE = 'menu_Item_welcomeletter');
                DELETE FROM REPORTCONFIGURATION WHERE MENUITEMCODE = 'menu_Item_welcomeletter';
                
                INSERT INTO REPORTCONFIGURATION (REPORTID, REPORTNAME, REPORTHEADING, PROMPTREQUIRED, REPORTJASPERNAME, DATASOURCENAME, SHOWTEMPLIBRARY, MENUITEMCODE, VERSION, LASTMNTBY, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, ALWMULTIFORMAT, WHERECONDITION, SCHEDULEREQ) VALUES ((SELECT MAX(REPORTID)+1 FROM REPORTCONFIGURATION), 'welcomeletter', 'welcome letter', 1, 'welcomeletter', 'dataSource', 1, 'menu_Item_welcomeletter', 1, 1000, NULL, NULL, NULL, NULL, NULL, NULL, 0, CURRENT_TIMESTAMP, 1, 1, 0);
			    INSERT INTO REPORTFILTERFIELDS (REPORTID, FIELDID, FIELDNAME, FIELDTYPE, FIELDLABEL, FIELDDBNAME, APPUTILMETHODNAME, MODULENAME, LOVHIDDENFIELDMETHOD, LOVTEXTFIELDMETHOD, MULTISELECTSEARCH, FIELDLENGTH, FIELDMAXVALUE, FIELDMINVALUE, SEQORDER, MANDATORY, FIELDCONSTRAINT, FIELDERRORMESSAGE, WHERECONDITION, STATICVALUE, FIELDWIDTH, FILTERREQUIRED, DEFAULTFILTER, VERSION, LASTMNTBY, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, FILTERFILEDS) VALUES ((SELECT REPORTID FROM REPORTCONFIGURATION WHERE MENUITEMCODE = 'menu_Item_welcomeletter'), 1, 'Loan Reference', 'LOVSEARCH', 'Loan Reference', 't.finreference', NULL, 'FinanceMain', 'getFinReference', 'getFinReference', 1, 0, 0, 0, 1, 1, ' ', ' ', ' ', ' ', 250, 0, '=', 1, 1000, 'Approved', NULL, NULL, NULL, NULL, NULL, 0, CURRENT_TIMESTAMP, NULL);  
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="02" author="rahul.r">
		<sql>
			<![CDATA[
				DELETE FROM RBFIELDDETAILS WHERE ((RBMODULE = 'FIN') AND (RBEVENT = 'FIN')) ;

				INSERT INTO RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','ct_custShrtName','Customer Name','nvarchar',50,'1','1','Customers','static,global','Customer');
				INSERT INTO RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_custID','Customer ID','bigint',10,'0','1','Customers','static,dbvalue','Customer');
				INSERT INTO RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_downPayment','Down Payment','Decimal',18,'1','1',null,'static',null);
				INSERT INTO RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_effectiveRateOfReturn','Effective Rate of Return','Decimal',18,'1','1',' ','static,global',' ');
				INSERT INTO RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_feeChargeAmt','Fee Charge Amount','Decimal',18,'1','1',null,'static',null);
				INSERT INTO RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_finAmount','Loan Amount','Decimal',18,'1','1',null,'static',null);
				INSERT INTO RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_finApprovedDate','Loan Approved Date','nvarchar',8,'0','1',null,'static',null);
				INSERT INTO RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_finBranch','Loan Branch','nvarchar',8,'0','1','RMTBranches','static,dbvalue','RMTBranches');
				INSERT INTO RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_finCcy','Loan Currency','nvarchar',3,'0','1','RMTCurrencies','static,dbvalue','RMTCurrencies');
				INSERT INTO RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_finReference','Loan Reference','nvarchar',20,'0','1',null,'static',null);
				INSERT INTO RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_finRepayMethod','Loan Repay Method','nvarchar',8,'0','1',' ','static',' ');
				INSERT INTO RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_finRepaymentAmount','Loan Repayment Amount','Decimal',18,'1','1',null,'static',null);
				INSERT INTO RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_finStartDate','Loan Start Date','nvarchar',8,'0','1',null,'static',null);
				INSERT INTO RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_finType','Loan Type','nvarchar',8,'0','1','RMTFinanceTypes','static,dbvalue','FinanceType');
				INSERT INTO RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_firstRepay',' First Repay','Decimal',18,'1','1',null,'static',null);
				INSERT INTO RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_graceTerms','Grace Terms','bigint',9,'1','1',null,'static',null);
				INSERT INTO RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_grcPftRate','Grace Interest Rate','Decimal',13,'1','1',null,'static',null);
				INSERT INTO RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_grcSchdMthd','Grace Schedule Method','nvarchar',8,'0','1',null,'static',null);
				INSERT INTO RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_lastRepayDate','Last Repay Date','nvarchar',8,'0','1',null,'static',null);
				INSERT INTO RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_maturityDate','Maturity Date','nvarchar',8,'0','1',null,'static',null);
				INSERT INTO RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_nextRoleCode','Next Role Code','nvarchar',100,'1','1',null,'static,global',null);
				INSERT INTO RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_nextRoleCodeDesc','Next Role Code Description','nvarchar',100,'1','1',null,'static',null);
				INSERT INTO RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_numberOfTerms','Number Of Terms','bigint',9,'1','1',null,'static',null);
				INSERT INTO RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_profitDaysBasis','Interest Days Basis','nvarchar',8,'0','1',null,'static',null);
				INSERT INTO RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_roleCode','Role Code','nvarchar',100,'1','1',null,'static,global',null);
				INSERT INTO RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_totalCpz','Total Capitalize','Decimal',18,'1','1',null,'static',null);
				INSERT INTO RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_totalGraceCpz','Total Grace Captalize','Decimal',18,'1','1',null,'static',null);
				INSERT INTO RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_totalGracePft','Total Grace Interest','Decimal',18,'1','1',null,'static',null);
				INSERT INTO RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_totalGrossGrcPft','Total Gross Grace Interest','Decimal',18,'1','1',null,'static',null);
				INSERT INTO RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_totalGrossPft','Total Gross Interest','Decimal',18,'1','1',null,'static',null);
				INSERT INTO RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_totalProfit','Total Interest','Decimal',18,'1','1',null,'static',null);
				INSERT INTO RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_totalRepayAmt','Total Repay Amount','Decimal',18,'1','1',null,'static',null);
				INSERT INTO RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_workFlowType','Workflow Type','nvarchar',50,'1','1','WorkFlowDetails','static,dbvalue','WorkFlowDetails');
				INSERT INTO RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','CovenantDoc','Covenant Documents','nvarchar',5,'0','1','static',null,null);
				INSERT INTO RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_receiptpurpose','Receipt Purpose','nvarchar',20,'0','1',null,'static,global',null);
				INSERT INTO RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FIN','FIN','fm_recordStatus','Record Status','nvarchar',100,'1','1',null,'static',null);
			]]>
		</sql>
	</changeSet>
		
	<changeSet id="PSD#207161.1_Pre" author="Mounika.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_orgview'); 	
			]]>
		</sql>
	</changeSet>

	<changeSet id="PSD#207161.1" author="Mounika.M">
		<createView viewName="RMTFINANCETYPES_ORGVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINTYPE,
				    T1.FINCATEGORY,
				    T1.FINTYPEDESC,
				    T1.FINCCY,
				    T1.FINDAYSCALTYPE,
				    T1.FINISGENREF,
				    T1.FINMAXAMOUNT,
				    T1.FINMINAMOUNT,
				    T1.FINISALWMD,
				    T1.FINSCHDMTHD,
				    T1.FINISALWGRACE,
				    T1.EQUALREPAYMENT,
				    T1.FINRATETYPE,
				    T1.FINBASERATE,
				    T1.FINSPLRATE,
				    T1.FININTRATE,
				    T1.FINMINRATE,
				    T1.FINMAXRATE,
				    T1.FINDFTINTFRQ,
				    T1.FINISINTCPZ,
				    T1.FINCPZFRQ,
				    T1.FINISRVWALW,
				    T1.FINRVWFRQ,
				    T1.FINGRCRATETYPE,
				    T1.FINGRCBASERATE,
				    T1.FINGRCSPLRATE,
				    T1.FINGRCINTRATE,
				    T1.FINGRCMINRATE,
				    T1.FINGRCMAXRATE,
				    T1.FINGRCDFTINTFRQ,
				    T1.FINGRCISINTCPZ,
				    T1.FINGRCCPZFRQ,
				    T1.FINGRCISRVWALW,
				    T1.FINGRCRVWFRQ,
				    T1.FINMINTERM,
				    T1.FINMAXTERM,
				    T1.FINDFTTERMS,
				    T1.FINRPYFRQ,
				    T1.FINREPAYMETHOD,
				    T1.FINISALWDIFFERMENT,
				    T1.FINMAXDIFFERMENT,
				    T1.FINISACTIVE,
				    T1.STEPFINANCE,
				    T1.STEPPINGMANDATORY,
				    T1.ALWMANUALSTEPS,
				    T1.ALWDSTEPPOLICIES,
				    T1.DFTSTEPPOLICY,
				    T1.FINISDWPAYREQUIRED,
				    T1.FINRVWRATEAPPLFOR,
				    T1.FINALWRATECHANGEANYDATE,
				    T1.FINISINTCPZATGRCEND,
				    T1.FINSCHCALCODEONRVW,
				    T1.ALWPLANDEFERMENT,
				    T1.PLANDEFERCOUNT,
				    T1.FINISALWGRCREPAY,
				    T1.FINGRCSCHDMTHD,
				    T1.FINGRCMARGIN,
				    T1.FINMARGIN,
				    T1.FINCOMMITMENTREQ,
				    T1.FINCOLLATERALREQ,
				    T1.OVERRIDELIMIT,
				    T1.LIMITREQUIRED,
				    T1.FINCOMMITMENTOVRRIDE,
				    T1.FINCOLLATERALOVRRIDE,
				    T1.FINREPAYPFTONFRQ,
				    T1.FINPFTUNCHANGED,
				    T1.APPLYODPENALTY,
				    T1.ODINCGRCDAYS,
				    T1.ODCHARGETYPE,
				    T1.ODGRACEDAYS,
				    T1.ODCHARGECALON,
				    T1.ODCHARGEAMTORPERC,
				    T1.ODALLOWWAIVER,
				    T1.ODMAXWAIVERPERC,
				    T1.FINDIVISION,
				    T3.DIVISIONCODEDESC LOVDESCFINDIVISIONNAME,
				    T1.PRODUCT,
				    T1.STARTDATE,
				    T1.ENDDATE,
				    T1.FINTYPEDESC LOVDESCPROMOFINTYPEDESC,
				    T1.REMARKS,
				    T4.POLICYDESC LOVDESCDFTSTEPPOLICYNAME,
				    T1.PASTDUEPFTCALMTHD,
				    T1.PASTDUEPFTMARGIN,
				    T1.DOWNPAYRULE,
				    T1.ALWMULTIPARTYDISB,
				    T1.COLLATERALTYPE,
				    T1.TDSAPPLICABLE,
				    T5.RULECODE DOWNPAYRULECODE,
				    T5.RULECODEDESC DOWNPAYRULEDESC,
				    T1.APPLYGRCPRICING,
				    T1.APPLYRPYPRICING,
				    T6.RULECODE GRCPRICINGMETHODDESC,
				    T7.RULECODE RPYPRICINGMETHODDESC,
				    T1.DROPLINEOD,
				    T1.DROPPINGMETHOD,
				    T1.RATECHGANYDAY,
				    T4.STEPTYPE DFTSTEPPOLICYTYPE,
				    T1.MANUALSCHEDULE,
				    T1.ALWBPI,
				    T1.BPITREATMENT,
				    T1.PFTDUESCHON,
				    T1.PLANEMIHALW,
				    T1.PLANEMIHMETHOD,
				    T1.PLANEMIHMAXPERYEAR,
				    T1.PLANEMIHMAX,
				    T1.PLANEMIHLOCKPERIOD,
				    T1.PLANEMICPZ,
				    T1.UNPLANEMIHLOCKPERIOD,
				    T1.UNPLANEMICPZ,
				    T1.REAGECPZ,
				    T1.FDDLOCKPERIOD,
				    T1.ALWDRPYMETHODS,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.ROUNDINGMODE,
				    T1.ROUNDINGTARGET,
				    T1.FREQUENCYDAYS,
				    T1.QUICKDISB,
				    T1.ALWREAGE,
				    T1.ALWUNPLANEMIHOLIDAY,
				    T1.ALWMAXDISBCHECKREQ,
				    T1.PRODUCTCATEGORY,
				    T1.RPYHIERARCHY,
				    T1.DEVELOPERFINANCE,
				    T3.ENTITYCODE LOVDESCENTITYCODE,
				    T8.ENTITYDESC LOVDESCENTITYDESC,
				    T1.COSTOFFUNDS,
				    T1.CHEQUECAPTUREREQ,
				    T1.FINLTVCHECK,
				    T1.PARTIALLYSECURED,
				    T1.ALWADVEMI,
				    T1.ADVEMIMINTERMS,
				    T1.ADVEMIMAXTERMS,
				    T1.ADVEMIDFTTERMS,
				    T1.ADVEMISCHDMTHD,
				    T1.BPIPFTDAYSBASIS,
				    T1.ELIGIBILITYMETHODS,
				    T1.ALWHYBRIDRATE,
				    T1.FIXEDRATETENOR,
				    T1.ODMINCAPAMOUNT,
				    T1.ODRULECODE,
				    T1.ALWZEROINTACC,
				    T1.FINISALWPARTIALRPY,
				    T1.AUTOREJECTIONDAYS,
				    T1.TAXNOMAND,
				    T1.PUTCALLREQUIRED,
				    T1.GRCADVINTERSETREQ,
				    T1.GRCADVTYPE,
				    T1.GRCADVMINTERMS,
				    T1.GRCADVMAXTERMS,
				    T1.GRCADVDEFAULTTERMS,
				    T1.ADVINTERSETREQ,
				    T1.ADVTYPE,
				    T1.ADVMINTERMS,
				    T1.ADVMAXTERMS,
				    T1.ADVDEFAULTTERMS,
				    T1.ADVSTAGE,
				    T1.DSFREQ,
				    T1.CASHCOLLATERALREQ,
				    T1.ALWEARLYPAYMETHODS,
				    T1.FINSCHEDULEON,
				    T1.TDSALLOWTOMODIFY,
				    T1.TDSAPPLICABLETO,
				    T1.ALWVAN,
				    T1.VANALLOCATIONMETHOD,
				    T1.ALLOWDRAWINGPOWER,
				    T1.ALLOWREVOLVING,
				    T1.ALWSANCTIONAMT,
				    T1.ALWSANCTIONAMTOVERRIDE,
				    T1.SANBSDSCHDLE,
				    T1.FINISRATERVWATGRCEND,
				    T1.SCHDONPMTCAL,
				    T1.AUTOAPPROVE,
				    T1.OCRREQUIRED,
				    T1.ALLOWEDOCRS,
				    T1.DEFAULTOCR,
				    T1.ALLOWEDLOANPURPOSES,
				    T1.SPECIFICLOANPURPOSES,
				    T1.ALWPLANNEDEMIINGRC,
				    T1.GRCADJREQ,
				    T1.GRCPERIODAFTRFULLDISB,
				    T1.AUTOINCRGRCENDDATE,
				    T1.GRCAUTOINCRMONTHS,
				    T1.MAXAUTOINCRALLOWED,
				    T1.THRLDTOMAINTAINGRCPRD,
				    T1.ALWLOANSPLIT,
				    T1.SPLITLOANTYPE,
				    T1.INSTBASEDSCHD,
				    T1.TDSTYPE,
				    T1.CALCOFSTEPS,
				    T1.STEPSAPPLIEDFOR,
				    T1.SUBVENTIONREQ,
					T1.OVERDRAFTTXNCHRGREQ,
					T1.OVERDRAFTTXNCHRGFEETYPE,
					T1.OVERDRAFTEXTGRACEDAYS,
					T1.OVERDRAFTCOLCHRGFEETYPE,
					T1.OVERDRAFTCOLAMT,
					T1.REGPROVRULE,
					T1.INTPROVRULE
				FROM RMTFINANCETYPES T1
				INNER JOIN SMTDIVISIONDETAIL T3 ON T1.FINDIVISION = T3.DIVISIONCODE
				LEFT JOIN STEPPOLICYHEADER T4 ON T1.DFTSTEPPOLICY = T4.POLICYCODE
				LEFT JOIN RULES T5 ON T1.DOWNPAYRULE = T5.RULEID
				LEFT JOIN RULES T6 ON T1.GRCPRICINGMETHOD = T6.RULEID
				LEFT JOIN RULES T7 ON T1.RPYPRICINGMETHOD = T7.RULEID
				LEFT JOIN ENTITY T8 ON T3.ENTITYCODE = T8.ENTITYCODE
			]]>
		</createView>
	</changeSet>

	<changeSet id="PSD#207161.1_Post" author="Mounika.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rmtfinancetypes_orgview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="PSD#207610_Pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'extended_field_ext_temp'); 	
				select deps_save_and_drop_dependencies ('plf', 'extended_field_ext'); 	
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="PSD#207610" author="Gopal.p">
		<modifyDataType tableName="Extended_Field_Ext_Temp" columnName="Event" newDataType="varchar(5)"/>
	</changeSet>
	
	<changeSet id="PSD#207610.1" author="Gopal.p">
		<modifyDataType tableName="Extended_Field_Ext" columnName="Event" newDataType="varchar(5)"/>
	</changeSet>
	
	<changeSet id="PSD#207610_Post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'extended_field_ext');
				select deps_restore_dependencies ('plf', 'extended_field_ext_temp');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="PSD#207610.1.1" author="Gopal.p">
		<sql>
			<![CDATA[
				UPDATE FINANCEMAIN SET RCDMAINTAINSTS = NULL;
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="PSD#207610.2" author="Gopal.p" dbms="postgresql,oracle">
		<sql>
			<![CDATA[
				UPDATE EXTENDED_FIELD_EXT_TEMP SET EVENT = trim(EVENT);
				UPDATE EXTENDED_FIELD_EXT SET EVENT = trim(EVENT);
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="PSD#207610.2" author="Gopal.p" dbms="sqlserver">
		<sql>
			<![CDATA[
				UPDATE EXTENDED_FIELD_EXT_TEMP SET EVENT = ltrim(rtrim(EVENT));
				UPDATE EXTENDED_FIELD_EXT SET EVENT = ltrim(rtrim(EVENT));
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="PSD#206328_pre" author="Mounika.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finfeedetail_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="PSD#206328" author="Mounika.M">
		<createView viewName="FINFEEDETAIL_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FEEID,
					T1.FINID,
					T1.FINREFERENCE,
					T1.ORIGINATIONFEE,
					T1.FINEVENT,
					T1.FEETYPEID,
					T1.FEESEQ,
					T1.FEEORDER,
					T1.CALCULATEDAMOUNT,
					T1.ACTUALAMOUNT,
					T1.WAIVEDAMOUNT,
					T1.PAIDAMOUNT,
					T1.FEESCHEDULEMETHOD,
					T1.TERMS,
					T1.REMAININGFEE,
					T1.PAYMENTREF,
					T1.CALCULATIONTYPE,
					T1.RULECODE,
					T1.FIXEDAMOUNT,
					T1.PERCENTAGE,
					T1.CALCULATEON,
					T1.ALWDEVIATION,
					T1.MAXWAIVERPERC,
					T1.ALWMODIFYFEE,
					T1.ALWMODIFYFEESCHDMTHD,
					T1.VASREFERENCE,
					T1.STATUS,
					T1.TAXAPPLICABLE,
					T1.TAXCOMPONENT,
					T1.PAIDAMOUNTORIGINAL,
					T1.PAIDAMOUNTGST,
					T1.NETAMOUNTORIGINAL,
					T1.NETAMOUNTGST,
					T1.NETAMOUNT,
					T1.REMAININGFEEORIGINAL,
					T1.REMAININGFEEGST,
					T1.ACTUALAMOUNTORIGINAL,
					T1.ACTUALAMOUNTGST,
					T1.FEEAMZ,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.TRANSACTIONID,
					T1.WORKFLOWID,
					T2.FEETYPECODE,
					T2.FEETYPEDESC,
					T1.REFUNDABLE,
					T1.INSTRUCTIONUID,
					T1.ACTPERCENTAGE,
					T1.WAIVEDGST,
					T1.REFERENCEID,
					T1.TAXHEADERID,
					T1.PAIDTDS,
					T1.REMTDS,
					T1.NETTDS,
					T2.TDSREQ,
					T3.PRODUCTCODE VASPRODUCTCODE
				FROM FINFEEDETAIL_TEMP T1
				LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
				LEFT JOIN VASRECORDING_TEMP T3 ON T1.VASREFERENCE = T3.VASREFERENCE
			]]>
		</createView>
	</changeSet>

	<changeSet id="PSD#206328_post" author="Mounika.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finfeedetail_tview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="03" author="rahul.r">
		<sql>
			<![CDATA[
				Create Table Collateral_land_ed_bkp as select * from collateral_land_ed;
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="04" author="rahul.r">
		<sql>
			<![CDATA[
				Alter Table collateral_land_ed drop column noofunits1;
				Alter Table collateral_land_ed drop column unitprice1;
				Alter Table collateral_land_ed drop column noofunits;
				Alter Table collateral_land_ed drop column unitprice;
				
				Alter Table collateral_land_ed_temp drop column noofunits1;
				Alter Table collateral_land_ed_temp drop column unitprice1;
				Alter Table collateral_land_ed_temp drop column noofunits;
				Alter Table collateral_land_ed_temp drop column unitprice;
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="05" author="rahul.r">
		<sql>
			<![CDATA[
				Alter Table collateral_land_ed drop column noofunits;
				Alter Table collateral_land_ed drop column unitprice;

				Alter Table collateral_land_ed_temp drop column noofunits;
				Alter Table collateral_land_ed_temp drop column unitprice;
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="06" author="rahul.r">
		<sql>
			<![CDATA[
				ALTER TABLE FinPlanEMIHDates DROP CONSTRAINT FK_FinPlanEMIHDates_FinId;
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="07" author="rahul.r">
		<sql>
			<![CDATA[
				Delete FROM RBFieldDetails WHERE RBModule = 'ELGRULE' AND RBEvent = 'ELGRULE' and rbfldname='activeLoansOnFinType';
				Delete FROM RBFieldDetails WHERE RBModule = 'ELGRULE' AND RBEvent = 'ELGRULE' and rbfldname='cibilScore';
				Delete FROM RBFieldDetails WHERE RBModule = 'ELGRULE' AND RBEvent = 'ELGRULE' and rbfldname='riskScore';
				Delete FROM RBFieldDetails WHERE RBModule = 'ELGRULE' AND RBEvent = 'ELGRULE' and rbfldname='sal_NotCredit_flag';
				Delete FROM RBFieldDetails WHERE RBModule = 'ELGRULE' AND RBEvent = 'ELGRULE' and rbfldname='calculatedAnnualNetSalary';
				Delete FROM RBFieldDetails WHERE RBModule = 'ELGRULE' AND RBEvent = 'ELGRULE' and rbfldname='emi_Bounce_flag';
				Delete FROM RBFieldDetails WHERE RBModule = 'ELGRULE' AND RBEvent = 'ELGRULE' and rbfldname='custAddrCity';
				Delete FROM RBFieldDetails WHERE RBModule = 'ELGRULE' AND RBEvent = 'ELGRULE' and rbfldname='disbursedAmount';
				Delete FROM RBFieldDetails WHERE RBModule = 'ELGRULE' AND RBEvent = 'ELGRULE' and rbfldname='Collateral_Bank_Valuation';
				
				INSERT INTO RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('ELGRULE','ELGRULE','activeLoansOnFinType','Active Loans for loan type','bigint',4,'1','1',null,'static',null);
				INSERT INTO RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('ELGRULE','ELGRULE','riskScore','risk Score','Decimal',18,'1','1',null,'static,global,calvalue',null);
				INSERT INTO RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('ELGRULE','ELGRULE','cibilScore','cibilScore','Decimal',18,'1','1',null,'static,global,calvalue',null);
				INSERT INTO RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('ELGRULE','ELGRULE','disbursedAmount','Disbursed Amount','Decimal',18,'1','1',null,'calvalue',null);
				INSERT INTO RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('ELGRULE','ELGRULE','Collateral_Bank_Valuation','Collateral Bank Valuation','Decimal',18,'0','0','LoanPurposes','static',null);
				INSERT INTO RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('ELGRULE','ELGRULE','custAddrCity','custAddress City','nchar',1,'1','0',null,'static,global,dbvalue','City');
				INSERT INTO RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('ELGRULE','ELGRULE','calculatedAnnualNetSalary','calculated Annual NetSalary','Decimal',18,'1','1',null,'static,global,calvalue',null);
				INSERT INTO RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('ELGRULE','ELGRULE','emi_Bounce_flag','emi_Bounce flag','Decimal',18,'1','1',null,'static,global,calvalue',null);
				INSERT INTO RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('ELGRULE','ELGRULE','sal_NotCredit_flag','sal_Not Credit_flag','Decimal',18,'1','1',null,'static,global,calvalue',null);
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="08" author="rahul.r">
		<sql>
			<![CDATA[
				Delete FROM RBFieldDetails WHERE RBModule = 'VERRULE' AND RBEvent = 'VERRULE' and rbfldname='LOAN_LAP_UPDATED_LTV_5';
				INSERT INTO RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('VERRULE','VERRULE','LOAN_LAP_UPDATED_LTV_5','LOAN_LAP_UPDATED_LTV_5','Decimal',18,'1','1',null,'static',null);
			]]>
		</sql>
	</changeSet>
	<changeSet id="08" author="rahul.r">
		<sql>
			<![CDATA[
				Delete FROM RBFieldDetails WHERE RBModule = 'FEES' AND RBEvent = 'ADDDBSN' and rbfldname='ct_custNationality';
				Delete FROM RBFieldDetails WHERE RBModule = 'FEES' AND RBEvent = 'WAIVER' and rbfldname='COLLATERAL_OPENPLOT_ADDR';
				
				INSERT INTO RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FEES','ADDDBSN','ct_custNationality','Customer Nationality','nchar',2,'0','0','NationalityCode','static,global,dbvalue',null);
				INSERT INTO RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('FEES','WAIVER','COLLATERAL_OPENPLOT_ADDR','COLLATERAL_OPENPLOT_ADDR','nchar',50,'1','0',null,'static',null);
			]]>
		</sql>
	</changeSet>
</databaseChangeLog>