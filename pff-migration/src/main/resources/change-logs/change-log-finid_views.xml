<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">
	<property name="add.schema" value="dbo." dbms="mssql" />
	<property name="add.schema" value=" " dbms="oracle" />
	<property name="add.schema" value=" " dbms="postgresql" />
	<property name="call.substr" value="substring" dbms="mssql" />
	<property name="call.substr" value="substr" dbms="oracle" />
	<property name="call.substr" value="substring" dbms="postgresql" />
	<property name="call.auditdb" value="PFFBFSQCAudit.." dbms="mssql" />
	<property name="call.auditdb" value=" " dbms="oracle" />
	<property name="call.concatenate" value="+" dbms="mssql" />
	<property name="call.concatenate" value="||" dbms="oracle" />
	<property name="call.concatenate" value="||" dbms="postgresql" />
	<property name="call.collength" value="LEN" dbms="mssql" />
	<property name="call.collength" value="LENGTH" dbms="oracle" />
	<property name="call.collength" value="LENGTH" dbms="postgresql" />
	<property name="call.date" value="getdate()" dbms="mssql" />
	<property name="call.date" value="sysdate" dbms="oracle" />
	<property name="call.date" value="now()::timestamp" dbms="postgresql" />

	<changeSet id="pre_run_for_pgp" author="satish" runAlways="true" dbms="postgresql">
		<sql>
			Set search_path = plf,public,pg_catalog;
		</sql>
	</changeSet>

	<!-- (FMV) :: Finance Main Views handle in single place start -->

	<changeSet id="FMV_1_pre" author="Gopal.p" dbms="postgresql">
		<sql> 
			<![CDATA[ 
				select deps_save_and_drop_dependencies ('plf', 'financemain_lview'); 
			]]>
		</sql>
	</changeSet>

	<changeSet id="FMV_1" author="Gopal.p">
		<createView viewName="FINANCEMAIN_LVIEW" replaceIfExists="true">
			<![CDATA[
		 		SELECT T1.FINID,
		 			T1.FINREFERENCE,
					T1.INVESTMENTREF,
					T1.FINTYPE,
					T1.FINCCY,
					T1.FINAMOUNT,
					T1.DOWNPAYMENT,
					T1.FEECHARGEAMT,
					T1.SCHEDULEMETHOD,
					T1.NUMBEROFTERMS,
					T1.RECORDSTATUS,
					T1.RECORDTYPE,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.FINBRANCH,
					T1.FINCONTRACTDATE,
					T1.LINKEDFINREF,
					T1.NEXTUSERID,
					T1.PRIORITY,
					T1.WORKFLOWID,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.FINPREAPPROVEDREF,
					T1.RCDMAINTAINSTS,
					T1.INSURANCEAMT,
					T1.FINCURRASSETVALUE,
					T1.CALTERMS,
					T1.DEVIATIONAPPROVAL,
					T1.FINPURPOSE,
					T1.INITIATEDATE,
					T1.FINASSETVALUE,
					T2.CUSTCIF LOVDESCCUSTCIF,
					T2.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
					T2.CUSTPASSPORTNO LOVDESCCUSTPASSPORTNO,
					T2.CUSTDOB LOVDESCCUSTDOB,
					T2.CUSTCRCPR LOVDESCCUSTCRCPR,
					T2.PHONENUMBER,
					T3.FINCATEGORY LOVDESCPRODUCTCODENAME,
					T3.FINDIVISION LOVDESCFINDIVISION,
					T3.PRODUCT LOVDESCFINPRODUCT,
					T3.FINTYPEDESC LOVDESCFINTYPENAME,
					COALESCE(T4.ROLEDESC, ${add.schema}FN_GET_ROLEDESC(T1.NEXTROLECODE)) LOVDESCREQUESTSTAGE,
					T1.SAMPLINGREQUIRED,
					T1.ADVANCEEMI,
					T1.ADVEMITERMS,
					T1.BPIPFTDAYSBASIS,
					T1.GRACETERMS,
					T1.PRODUCTCATEGORY,
					T1.REQLOANAMT,
					T1.REQLOANTENOR,
					T1.FINOCRREQUIRED,
					T1.OFFERPRODUCT,
					T1.OFFERAMOUNT,
					T1.CUSTSEGMENTATION,
					T1.BASEPRODUCT,
					T1.PROCESSTYPE,
					T1.BUREAUTIMESERIES,
					T1.CAMPAIGNNAME,
					T1.EXISTINGLANREFNO,
					T1.LEADSOURCE,
					T1.POSOURCE,
					T1.RSA,
					T1.VERIFICATION,
					T1.SOURCINGBRANCH,
					T1.SOURCHANNELCATEGORY,
					T1.ASMNAME,
					T1.OFFERID,
					T1.APPLICATIONNO,
					T1.LASTMNTON,
					T1.VERSION,
					T1.TDSAPPLICABLE,
					T2.CUSTID,
					T1.INSTBASEDSCHD,
					T1.ALLOWSUBVENTION,
					T1.TDSTYPE,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS,
					T1.SCHDVERSION,
					T1.SUBVENTIONFROM,
					T1.MANUFACTURERDEALERID,
					T5.DEALERNAME MANUFACTURERDEALERNAME,
					T5.CODE MANUFACTURERDEALERCODE
				FROM FINANCEMAIN_TEMP T1
				INNER JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
				INNER JOIN RMTFINANCETYPES T3 ON T3.FINTYPE = T1.FINTYPE
				LEFT JOIN SECROLES T4 ON T1.NEXTROLECODE= T4.ROLECD
				LEFT JOIN AMTVEHICLEDEALER T5 ON T1.MANUFACTURERDEALERID = T5.DEALERID
			]]>
		</createView>
	</changeSet>

	<changeSet id="FMV_1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_lview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="FMV_2_pre" author="Gopal.p" dbms="postgresql">
		<sql> 
			<![CDATA[ 
				select deps_save_and_drop_dependencies ('plf', 'financemain_aview'); 
			]]>
		</sql>
	</changeSet>

	<changeSet id="FMV_2" author="Gopal.p">
		<createView viewName="FINANCEMAIN_AVIEW" replaceIfExists="true">
			 <![CDATA[ 
				SELECT T1.FINID,
					T1.FINREFERENCE,
			    	T1.INVESTMENTREF,
			    	T1.NUMBEROFTERMS,
			    	T1.GRCPERIODENDDATE,
			    	T1.ALLOWGRCPERIOD,
			    	T1.GRACEBASERATE,
			    	T1.GRACESPECIALRATE,
			    	T1.GRCPFTRATE,
			    	T1.GRCPFTFRQ,
			    	T1.NEXTGRCPFTDATE,
			    	T1.ALLOWGRCPFTRVW,
			    	T1.GRCPFTRVWFRQ,
			    	T1.NEXTGRCPFTRVWDATE,
			    	T1.ALLOWGRCCPZ,
			    	T1.GRCCPZFRQ,
			    	T1.NEXTGRCCPZDATE,
			    	T1.REPAYBASERATE,
			    	T1.REPAYSPECIALRATE,
			    	T1.REPAYPROFITRATE,
			    	T1.REPAYFRQ,
			    	T1.NEXTREPAYDATE,
			    	T1.REPAYPFTFRQ,
			    	T1.NEXTREPAYPFTDATE,
			    	T1.ALLOWREPAYRVW,
			    	T1.REPAYRVWFRQ,
			    	T1.NEXTREPAYRVWDATE,
			    	T1.ALLOWREPAYCPZ,
			    	T1.REPAYCPZFRQ,
			    	T1.NEXTREPAYCPZDATE,
			    	T1.MATURITYDATE,
			    	T1.CPZATGRACEEND,
			    	T1.DOWNPAYMENT,
			    	T1.GRACEFLATAMOUNT,
			    	T1.REQREPAYAMOUNT,
			    	T1.TOTALPROFIT,
			    	T1.TOTALCPZ,
			    	T1.TOTALGROSSPFT,
			    	T1.TOTALGROSSGRCPFT,
			    	T1.TOTALGRACEPFT,
			    	T1.TOTALGRACECPZ,
			    	T1.GRCRATEBASIS,
			    	T1.REPAYRATEBASIS,
			    	T1.FINTYPE,
			    	T1.FINREMARKS,
			    	T1.FINCCY,
			    	T1.SCHEDULEMETHOD,
			    	T1.PROFITDAYSBASIS,
			    	T1.REQMATURITY,
			    	T1.CALTERMS,
			    	T1.CALMATURITY,
			    	T1.FIRSTREPAY,
			    	T1.LASTREPAY,
			    	T1.FINSTARTDATE,
			    	T1.FINAMOUNT,
					T1.FINAMOUNT + T1.FEECHARGEAMT - T1.DOWNPAYMENT LOVDESCFINANCINGAMOUNT,
			    	T1.FINREPAYMENTAMOUNT,
			    	T1.CUSTID,
			   		T1.DEFFERMENTS,
			    	T1.PLANDEFERCOUNT,
			    	T1.FINBRANCH,
			    	T1.FINSOURCEID,
			    	T1.ALLOWEDDEFRPYCHANGE,
			    	T1.AVAILEDDEFRPYCHANGE,
			    	T1.ALLOWEDDEFFRQCHANGE,
			    	T1.AVAILEDDEFFRQCHANGE,
			    	T1.RECALTYPE,
			    	T1.FINASSETVALUE,
			    	T1.DISBACCOUNTID,
			    	T1.REPAYACCOUNTID,
			    	T1.FINISACTIVE,
			    	T1.LIMITVALID,
			    	T1.OVERRIDELIMIT,
			    	T1.SECURITYDEPOSIT,
			    	T1.VERSION,
			    	T1.LASTMNTBY,
			    	T1.LASTMNTON,
			    	T1.RECORDSTATUS,
			    	T1.ROLECODE,
			    	T1.NEXTROLECODE,
			    	T1.TASKID,
			    	T1.NEXTTASKID,
			    	T1.RECORDTYPE,
			    	T1.WORKFLOWID,
					T7.FINTYPEDESC LOVDESCFINTYPENAME,
					T7.FINMAXAMOUNT LOVDESCFINMAXAMT,
					T7.FINMINAMOUNT LOVDESCFINMINAMOUNT,
			    	T1.MINDOWNPAYPERC,
					T7.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
					T7.FINISDWPAYREQUIRED LOVDESCDWNPAYREQ,
					T7.FINMAXDIFFERMENT LOVDESCFINMAXDIFFERMENT,
					T12.BRANCHDESC LOVDESCFINBRANCHNAME,
					T12.BRANCHPROVINCE FINBRANCHPROVINCECODE,
			    	T1.LASTREPAYDATE,
			    	T1.LASTREPAYPFTDATE,
			    	T1.LASTREPAYRVWDATE,
			    	T1.LASTREPAYCPZDATE,
			    	T1.ALLOWGRCREPAY,
			    	T1.GRCSCHDMTHD,
			    	T1.GRCMARGIN,
			    	T1.REPAYMARGIN,
			    	T1.FINCURRASSETVALUE,
			    	T1.FINCOMMITMENTREF,
			    	T1.FINLIMITREF,
			    	T1.DEPRECIATIONFRQ,
			    	T1.FINCONTRACTDATE,
			    	T1.NEXTDEPDATE,
			    	T1.LASTDEPDATE,
			    	T1.FINACCOUNT,
			    	T1.FINCUSTPFTACCOUNT,
					T17.ACRTILLLBD LOVDESCACCRUEDTILLLBD,
			    	T7.FINRVWRATEAPPLFOR,
			    	T1.TOTALREPAYAMT,
			    	T1.CLOSINGSTATUS,
			    	T1.FINAPPROVEDDATE,
			    	T1.FEECHARGEAMT,
			    	T1.BLACKLISTED,
			    	T1.FINREPAYPFTONFRQ,
			    	T1.ANUALIZEDPERCRATE,
			    	T1.EFFECTIVERATEOFRETURN,
			    	T1.MIGRATEDFINANCE,
			    	T1.SCHEDULEMAINTAINED,
			    	T1.SCHEDULEREGENERATED,
			    	T1.FINPURPOSE,
					T39.LOANPURPOSEDESC LOVDESCFINPURPOSENAME,
			    	T1.FINSTATUS,
			    	T1.FINSTSREASON,
			    	T1.INITIATEUSER,
			    	T1.BANKNAME,
			    	T1.IBAN,
			    	T1.ACCOUNTTYPE,
			    	T1.DDAREFERENCENO,
					T7.FINSCHEDULEON LOVDESCFINSCHEDULEON,
			    	T1.CUSTDSR,
			    	T1.JOINTACCOUNT,
			    	T1.JOINTCUSTID,
			    	T1.DOWNPAYBANK,
			    	T1.DOWNPAYSUPL,
			    	T1.DOWNPAYACCOUNT,
			    	T1.SECURITYCOLLATERAL,
			    	T1.APPROVED,
			    	T1.DISCREPANCY,
			    	T1.LIMITAPPROVED,
			    	T1.GRACETERMS,
					T7.FINDIVISION LOVDESCFINDIVISION,
			    	T1.RCDMAINTAINSTS,
			    	T1.FINREPAYMETHOD,
			    	T1.GRCPROFITDAYSBASIS,
			    	T1.STEPFINANCE,
			    	T1.STEPTYPE,
				    T1.STEPPOLICY,
				    T1.ALWMANUALSTEPS,
				    T1.NOOFSTEPS,
				    T1.LINKEDFINREF,
				    T1.NEXTUSERID,
				    T1.PRIORITY,
					T24.POLICYDESC LOVDESCSTEPPOLICYNAME,
				    T1.GRCMINRATE,
				    T1.GRCMAXRATE,
				    T1.RPYMINRATE,
				    T1.RPYMAXRATE,
				    T1.DEVIATIONAPPROVAL,
				    T1.MANUALSCHEDULE,
				    T1.TAKEOVERFINANCE,
				    T1.GRCADVBASERATE,
				    T1.GRCADVMARGIN,
				    T1.GRCADVPFTRATE,
				    T1.RPYADVBASERATE,
				    T1.RPYADVMARGIN,
				    T1.RPYADVPFTRATE,
				    T1.SUPPLEMENTRENT,
				    T1.INCREASEDCOST,
				    T1.CREDITINSAMT,
				    T1.ROLLOVERFRQ,
				    T1.NEXTROLLOVERDATE,
				    T27.CUSTSTSDESCRIPTION,
				    T1.SHARIASTATUS,
				    T1.INITIATEDATE,
				    T1.FINPREAPPROVEDREF,
				    T1.MMAID,
				    T1.ACCOUNTSOFFICER,
				    T1.FEEACCOUNTID,
				    T1.FINCANCELAC,
					T28.DEALERNAME LOVDESCACCOUNTSOFFICER,
					T28.DEALERCITY LOVDESCSOURCECITY,
				    T1.DSACODE,
					T30.ROFFICERDESC DSACODEDESC,
				    T1.TDSAPPLICABLE,
				    T1.MANDATEID,
				    T1.DROPLINEFRQ,
				    T1.FIRSTDROPLINEDATE,
				    T1.PFTSERVICINGODLIMIT,
				    T1.INSURANCEAMT,
				    T1.DEDUCTINSDISB,
				    T1.ALWBPI,
				    T1.BPITREATMENT,
				    T1.PLANEMIHALW,
				    T1.PLANEMIHMETHOD,
				    T1.PLANEMIHMAXPERYEAR,
				    T1.PLANEMIHMAX,
				    T1.PLANEMIHLOCKPERIOD,
				    T1.PLANEMICPZ,
				    T1.CALROUNDINGMODE,
				    T1.ALWMULTIDISB,
				    T1.APPLICATIONNO,
				    T1.REFERRALID,
					T33.ROFFICERDESC REFERRALIDDESC,
				    T1.DMACODE,
					T34.ROFFICERDESC DMACODEDESC,
				    T1.SALESDEPARTMENT,
					T35.DEPTDESC SALESDEPARTMENTDESC,
				    T1.QUICKDISB,
				    T1.WIFREFERENCE,
				    T1.UNPLANEMIHLOCKPERIOD,
				    T1.UNPLANEMICPZ,
				    T1.REAGECPZ,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.AVAILEDUNPLANEMI,
				    T1.AVAILEDREAGEH,
				    T1.BPIAMOUNT,
				    T1.DEDUCTFEEDISB,
				    T1.RVWRATEAPPLFOR,
				    T1.SCHCALONRVW,
				    T1.PASTDUEPFTCALMTHD,
				    T1.PASTDUEPFTMARGIN,
				    T1.DROPPINGMETHOD,
				    T1.RATECHGANYDAY,
				    T1.PROMOTIONCODE,
				    T1.RESTRUCTURELOAN,
				    T1.OLDFINREFERENCE,
				    T1.REAGEBUCKET,
				    T1.FINCATEGORY,
				    T1.PRODUCTCATEGORY,
				    T1.ROUNDINGTARGET,
					T36.ENTITYCODE LOVDESCENTITYCODE,
				    T1.ELIGIBILITYMETHOD,
					T38.FIELDCODEVALUE LOVELIGIBILITYMETHOD,
					T38.VALUEDESC LOVDESCELIGIBILITYMETHOD,
				    T1.EMPLOYEENAME,
					T37.ROFFICERDESC EMPLOYEENAMEDESC,
				    T1.SAMPLINGREQUIRED,
				    T1.LEGALREQUIRED,
				    T1.GRCMAXAMOUNT,
				    T1.CONNECTOR,
					T40.DEALERNAME CONNECTORCODE,
					T40.DEALERCITY CONNECTORDESC,
				    T1.ADVANCEEMI,
				    T1.ADVEMITERMS,
				    T1.BPIPFTDAYSBASIS,
				    T1.FIXEDRATETENOR,
				    T1.FIXEDTENORRATE,
					T12.BRANCHTEL FINBRANCHCONTACT,
				    T1.PROCESSATTRIBUTES,
				    T1.BUSINESSVERTICAL,
					BV.CODE BUSINESSVERTICALCODE,
					BV.DESCRIPTION BUSINESSVERTICALDESC,
				    T1.GRCADVTYPE,
				    T1.GRCADVTERMS,
				    T1.ADVTYPE,
				    T1.ADVTERMS,
				    T1.ADVSTAGE,
				    T1.TDSPERCENTAGE,
				    T1.TDSSTARTDATE,
				    T1.TDSENDDATE,
				    T1.TDSLIMITAMT,
				    T1.VANREQ,
				    T1.VANCODE,
				    T1.ALLOWDRAWINGPOWER,
				    T1.ALLOWREVOLVING,
				    T1.SANBSDSCHDLE,
				    T1.PROMOTIONSEQID,
				    T1.SVAMOUNT,
				    T1.CBAMOUNT,
				    T1.APPLIEDLOANAMT,
				    T1.FINISRATERVWATGRCEND,
				    T1.PLANEMIHALWINGRACE,
					T1.REQLOANAMT,
					T1.REQLOANTENOR,
					T1.FINOCRREQUIRED,
					T1.OFFERPRODUCT,
					T1.OFFERAMOUNT,
					T1.CUSTSEGMENTATION,
					T1.BASEPRODUCT,
					T1.PROCESSTYPE,
					T1.BUREAUTIMESERIES,
					T1.CAMPAIGNNAME,
					T1.EXISTINGLANREFNO,
					T1.LEADSOURCE,
					T1.POSOURCE,
					T1.RSA,
					T1.VERIFICATION,
					T1.SOURCINGBRANCH,
					T1.SOURCHANNELCATEGORY,
					T1.ASMNAME,
					T13.BRANCHDESC LOVDESCSOURCINGBRANCH,
					T1.ENDGRCPERIODAFTRFULLDISB,
					T1.AUTOINCGRCENDDATE,
					T1.ALWGRCADJ,
					T1.PMAY,
					T1.OFFERID,
					T1.ALWLOANSPLIT,
					T1.PARENTREF,
					T1.LOANSPLITTED,
					T1.INSTBASEDSCHD,
					C.CUSTCIF LOVDESCCUSTCIF,
					T1.ALLOWSUBVENTION,
					T1.TDSTYPE,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS,
					T1.SCHDVERSION,
					T1.SUBVENTIONFROM,
					T1.MANUFACTURERDEALERID,
					T41.DEALERNAME MANUFACTURERDEALERNAME,
					T41.CODE MANUFACTURERDEALERCODE
				FROM FINANCEMAIN T1
				JOIN RMTFINANCETYPES T7 ON T1.FINTYPE = T7.FINTYPE 
				LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH  = T12.BRANCHCODE 
				LEFT JOIN RMTBRANCHES T13 ON T1.SOURCINGBRANCH = T13.BRANCHCODE
				LEFT JOIN FINPFTDETAILS T17 ON T17.FINID  = T1.FINID 
				LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY  = T24.POLICYCODE 
				LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS  = T27.CUSTSTSCODE 
				LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
				LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE  = T30.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID  = T33.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE  = T34.ROFFICERCODE 
				LEFT JOIN BMTDEPARTMENTS T35 ON T1.SALESDEPARTMENT  = T35.DEPTCODE 
				LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION  = T36.DIVISIONCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME  = T37.ROFFICERCODE 
				LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE  = 'ELGMETHOD' 
				LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE  = T39.LOANPURPOSECODE 
				LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
				LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
				INNER JOIN CUSTOMERS C ON C.CUSTID = T1.CUSTID
				LEFT JOIN AMTVEHICLEDEALER T41 ON T1.MANUFACTURERDEALERID = T41.DEALERID
			]]>
		</createView>
	</changeSet>

	<changeSet id="FMV_2_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_aview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="FMV_3_pre" author="Gopal.p" dbms="postgresql">
		<sql> 
		<![CDATA[ 
			select deps_save_and_drop_dependencies ('plf', 'financemain_view'); 
		]]>
		</sql>
	</changeSet>

	<changeSet id="FMV_3" author="Gopal.p">
		<createView viewName="FINANCEMAIN_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINID,
					T1.FINREFERENCE,
				    T1.INVESTMENTREF,
				    T1.NUMBEROFTERMS,
				    T1.GRCPERIODENDDATE,
				    T1.ALLOWGRCPERIOD,
				    T1.GRACEBASERATE,
				    T1.GRACESPECIALRATE,
				    T1.GRCPFTRATE,
				    T1.GRCPFTFRQ,
				    T1.NEXTGRCPFTDATE,
				    T1.ALLOWGRCPFTRVW,
				    T1.GRCPFTRVWFRQ,
				    T1.NEXTGRCPFTRVWDATE,
				    T1.ALLOWGRCCPZ,
				    T1.GRCCPZFRQ,
				    T1.NEXTGRCCPZDATE,
				    T1.REPAYBASERATE,
				    T1.REPAYSPECIALRATE,
				    T1.REPAYPROFITRATE,
				    T1.REPAYFRQ,
				    T1.NEXTREPAYDATE,
				    T1.REPAYPFTFRQ,
				    T1.NEXTREPAYPFTDATE,
				    T1.ALLOWREPAYRVW,
				    T1.REPAYRVWFRQ,
				    T1.NEXTREPAYRVWDATE,
				    T1.ALLOWREPAYCPZ,
				    T1.REPAYCPZFRQ,
				    T1.NEXTREPAYCPZDATE,
				    T1.MATURITYDATE,
				    T1.CPZATGRACEEND,
				    T1.DOWNPAYMENT,
				    T1.GRACEFLATAMOUNT,
				    T1.REQREPAYAMOUNT,
				    T1.TOTALPROFIT,
				    T1.TOTALCPZ,
				    T1.TOTALGROSSPFT,
				    T1.TOTALGROSSGRCPFT,
				    T1.TOTALGRACEPFT,
				    T1.TOTALGRACECPZ,
				    T1.GRCRATEBASIS,
				    T1.REPAYRATEBASIS,
				    T1.FINTYPE,
				    T1.FINREMARKS,
				    T1.FINCCY,
				    T1.SCHEDULEMETHOD,
				    T1.PROFITDAYSBASIS,
				    T1.REQMATURITY,
				    T1.CALTERMS,
				    T1.CALMATURITY,
				    T1.FIRSTREPAY,
				    T1.LASTREPAY,
				    T1.FINSTARTDATE,
				    T1.FINAMOUNT,
					((T1.FINAMOUNT + T1.FEECHARGEAMT) - T1.DOWNPAYMENT) LOVDESCFINANCINGAMOUNT,
				    T1.FINREPAYMENTAMOUNT,
				    T1.CUSTID,
				    T1.DEFFERMENTS,
				    T1.PLANDEFERCOUNT,
				    T1.FINBRANCH,
				    T1.FINSOURCEID,
				    T1.ALLOWEDDEFRPYCHANGE,
				    T1.AVAILEDDEFRPYCHANGE,
				    T1.ALLOWEDDEFFRQCHANGE,
				    T1.AVAILEDDEFFRQCHANGE,
				    T1.RECALTYPE,
				    T1.FINASSETVALUE,
				    T1.DISBACCOUNTID,
				    T1.REPAYACCOUNTID,
				    T1.FINISACTIVE,
				    T1.LIMITVALID,
				    T1.OVERRIDELIMIT,
				    T1.SECURITYDEPOSIT,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T7.FINTYPEDESC LOVDESCFINTYPENAME,
				    T7.FINMAXAMOUNT LOVDESCFINMAXAMT,
				    T7.FINMINAMOUNT LOVDESCFINMINAMOUNT,
				    T1.MINDOWNPAYPERC,
				    T7.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
				    T7.FINISDWPAYREQUIRED LOVDESCDWNPAYREQ,
				    T7.FINMAXDIFFERMENT LOVDESCFINMAXDIFFERMENT,
				    T12.BRANCHDESC LOVDESCFINBRANCHNAME,
				    T12.BRANCHPROVINCE FINBRANCHPROVINCECODE,
				    T1.LASTREPAYDATE,
				    T1.LASTREPAYPFTDATE,
				    T1.LASTREPAYRVWDATE,
				    T1.LASTREPAYCPZDATE,
				    T1.ALLOWGRCREPAY,
				    T1.GRCSCHDMTHD,
				    T1.GRCMARGIN,
				    T1.REPAYMARGIN,
				    T1.FINCURRASSETVALUE,
				    T1.FINCOMMITMENTREF,
				    T1.FINLIMITREF,
				    T1.DEPRECIATIONFRQ,
				    T1.FINCONTRACTDATE,
				    T1.NEXTDEPDATE,
				    T1.LASTDEPDATE,
				    T1.FINACCOUNT,
				    T1.FINCUSTPFTACCOUNT,
				    T17.ACRTILLLBD LOVDESCACCRUEDTILLLBD,
				    T7.FINRVWRATEAPPLFOR,
				    T1.TOTALREPAYAMT,
				    T1.CLOSINGSTATUS,
				    T1.FINAPPROVEDDATE,
				    T1.FEECHARGEAMT,
				    T1.BLACKLISTED,
				    T1.FINREPAYPFTONFRQ,
				    T1.ANUALIZEDPERCRATE,
				    T1.EFFECTIVERATEOFRETURN,
				    T1.MIGRATEDFINANCE,
				    T1.SCHEDULEMAINTAINED,
				    T1.SCHEDULEREGENERATED,
				    T1.FINPURPOSE,
				    T39.LOANPURPOSEDESC LOVDESCFINPURPOSENAME,
				    T1.FINSTATUS,
				    T1.FINSTSREASON,
				    T1.INITIATEUSER,
				    T1.BANKNAME,
				    T1.IBAN,
				    T1.ACCOUNTTYPE,
				    T1.DDAREFERENCENO,
				    T7.FINSCHEDULEON LOVDESCFINSCHEDULEON,
				    T1.CUSTDSR,
				    T1.JOINTACCOUNT,
				    T1.JOINTCUSTID,
				    T1.DOWNPAYBANK,
				    T1.DOWNPAYSUPL,
				    T1.DOWNPAYACCOUNT,
				    T1.SECURITYCOLLATERAL,
				    T1.APPROVED,
				    T1.DISCREPANCY,
				    T1.LIMITAPPROVED,
				    T1.GRACETERMS,
				    T7.FINDIVISION LOVDESCFINDIVISION,
				    T1.RCDMAINTAINSTS,
				    T1.FINREPAYMETHOD,
				    T1.GRCPROFITDAYSBASIS,
				    T1.STEPFINANCE,
				    T1.STEPTYPE,
				    T1.STEPPOLICY,
				    T1.ALWMANUALSTEPS,
				    T1.NOOFSTEPS,
				    T1.LINKEDFINREF,
				    T1.NEXTUSERID,
				    T1.PRIORITY,
				    T24.POLICYDESC LOVDESCSTEPPOLICYNAME,
				    T1.GRCMINRATE,
				    T1.GRCMAXRATE,
				    T1.RPYMINRATE,
				    T1.RPYMAXRATE,
				    T1.DEVIATIONAPPROVAL,
				    T1.MANUALSCHEDULE,
				    T1.TAKEOVERFINANCE,
				    T1.GRCADVBASERATE,
				    T1.GRCADVMARGIN,
				    T1.GRCADVPFTRATE,
				    T1.RPYADVBASERATE,
				    T1.RPYADVMARGIN,
				    T1.RPYADVPFTRATE,
				    T1.SUPPLEMENTRENT,
				    T1.INCREASEDCOST,
				    T1.CREDITINSAMT,
				    T1.ROLLOVERFRQ,
				    T1.NEXTROLLOVERDATE,
				    T27.CUSTSTSDESCRIPTION,
				    T1.SHARIASTATUS,
				    T1.INITIATEDATE,
				    T1.FINPREAPPROVEDREF,
				    T1.MMAID,
				    T1.ACCOUNTSOFFICER,
				    T1.FEEACCOUNTID,
				    T1.FINCANCELAC,
				    T28.DEALERNAME LOVDESCACCOUNTSOFFICER,
				    T28.DEALERCITY LOVDESCSOURCECITY,
				    T1.DSACODE,
				    T30.ROFFICERDESC DSACODEDESC,
				    T1.TDSAPPLICABLE,
				    T1.MANDATEID,
				    T1.DROPLINEFRQ,
				    T1.FIRSTDROPLINEDATE,
				    T1.PFTSERVICINGODLIMIT,
				    T1.INSURANCEAMT,
				    T1.DEDUCTINSDISB,
				    T1.ALWBPI,
				    T1.BPITREATMENT,
				    T1.PLANEMIHALW,
				    T1.PLANEMIHMETHOD,
				    T1.PLANEMIHMAXPERYEAR,
				    T1.PLANEMIHMAX,
				    T1.PLANEMIHLOCKPERIOD,
				    T1.PLANEMICPZ,
				    T1.CALROUNDINGMODE,
				    T1.ALWMULTIDISB,
				    T1.APPLICATIONNO,
				    T1.REFERRALID,
				    T33.ROFFICERDESC REFERRALIDDESC,
				    T1.DMACODE,
				    T34.ROFFICERDESC DMACODEDESC,
				    T1.SALESDEPARTMENT,
				    T35.DEPTDESC SALESDEPARTMENTDESC,
				    T1.QUICKDISB,
				    T1.WIFREFERENCE,
				    T1.UNPLANEMIHLOCKPERIOD,
				    T1.UNPLANEMICPZ,
				    T1.REAGECPZ,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.AVAILEDUNPLANEMI,
				    T1.AVAILEDREAGEH,
				    T1.BPIAMOUNT,
				    T1.DEDUCTFEEDISB,
				    T1.RVWRATEAPPLFOR,
				    T1.SCHCALONRVW,
				    T1.PASTDUEPFTCALMTHD,
				    T1.PASTDUEPFTMARGIN,
				    T1.DROPPINGMETHOD,
				    T1.RATECHGANYDAY,
				    T1.PROMOTIONCODE,
				    T1.RESTRUCTURELOAN,
				    T1.OLDFINREFERENCE,
				    T1.REAGEBUCKET,
				    T1.FINCATEGORY,
				    T1.PRODUCTCATEGORY,
				    T1.ROUNDINGTARGET,
				    T36.ENTITYCODE LOVDESCENTITYCODE,
				    T1.ELIGIBILITYMETHOD,
				    T38.FIELDCODEVALUE LOVELIGIBILITYMETHOD,
				    T38.VALUEDESC LOVDESCELIGIBILITYMETHOD,
				    T1.EMPLOYEENAME,
				    T37.ROFFICERDESC EMPLOYEENAMEDESC,
				    T1.SAMPLINGREQUIRED,
				    T1.LEGALREQUIRED,
				    T1.GRCMAXAMOUNT,
				    T1.CONNECTOR,
				    T40.DEALERNAME CONNECTORCODE,
				    T40.DEALERCITY CONNECTORDESC,
				    T1.ADVANCEEMI,
				    T1.ADVEMITERMS,
				    T1.BPIPFTDAYSBASIS,
				    T1.FIXEDRATETENOR,
				    T1.FIXEDTENORRATE,
				    T12.BRANCHTEL FINBRANCHCONTACT,
				    T1.PROCESSATTRIBUTES,
				    T1.BUSINESSVERTICAL,
				    BV.CODE BUSINESSVERTICALCODE,
				    BV.DESCRIPTION BUSINESSVERTICALDESC,
				    T1.GRCADVTYPE,
				    T1.GRCADVTERMS,
				    T1.ADVTYPE,
				    T1.ADVTERMS,
				    T1.ADVSTAGE,
				    T1.TDSPERCENTAGE,
				    T1.TDSSTARTDATE,
				    T1.TDSENDDATE,
				    T1.TDSLIMITAMT,
				    T1.VANREQ,
				    T1.VANCODE,
				    T1.ALLOWDRAWINGPOWER,
				    T1.ALLOWREVOLVING,
				    T1.SANBSDSCHDLE,
				    T1.PROMOTIONSEQID,
				    T1.SVAMOUNT,
				    T1.CBAMOUNT,
				    T1.APPLIEDLOANAMT,
				    T1.FINISRATERVWATGRCEND,
					T1.REQLOANAMT,
					T1.REQLOANTENOR,
					T1.FINOCRREQUIRED,
					T1.OFFERPRODUCT,
					T1.OFFERAMOUNT,
					T1.CUSTSEGMENTATION,
					T1.BASEPRODUCT,
					T1.PROCESSTYPE,
					T1.BUREAUTIMESERIES,
					T1.CAMPAIGNNAME,
					T1.EXISTINGLANREFNO,
					T1.LEADSOURCE,
					T1.POSOURCE,
					T1.RSA,
					T1.VERIFICATION,
					T1.SOURCINGBRANCH,
					T1.SOURCHANNELCATEGORY,
					T1.ASMNAME,
					T13.BRANCHDESC LOVDESCSOURCINGBRANCH,
					T1.OFFERID,
					T1.ALWGRCADJ,
					T1.ENDGRCPERIODAFTRFULLDISB,
					T1.AUTOINCGRCENDDATE,
					T1.PMAY,
					T1.ALWLOANSPLIT,
					T1.PARENTREF,
					T1.LOANSPLITTED,
					T1.INSTBASEDSCHD,
					T1.PLANEMIHALWINGRACE,
					T1.ALLOWSUBVENTION,
					T1.TDSTYPE,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS,
					T1.SCHDVERSION,
					T1.SUBVENTIONFROM,
					T1.MANUFACTURERDEALERID,
					T41.DEALERNAME MANUFACTURERDEALERNAME,
					T41.CODE MANUFACTURERDEALERCODE
				FROM FINANCEMAIN_TEMP T1
				JOIN RMTFINANCETYPES T7 ON T1.FINTYPE  = T7.FINTYPE 
				LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH  = T12.BRANCHCODE 
				LEFT JOIN RMTBRANCHES T13 ON T1.SOURCINGBRANCH = T13.BRANCHCODE
				LEFT JOIN FINPFTDETAILS T17 ON T17.FINID  = T1.FINID 
				LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY  = T24.POLICYCODE 
				LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS  = T27.CUSTSTSCODE 
				LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
				LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE  = T30.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID  = T33.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE  = T34.ROFFICERCODE 
				LEFT JOIN BMTDEPARTMENTS T35 ON T1.SALESDEPARTMENT  = T35.DEPTCODE 
				LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION  = T36.DIVISIONCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME  = T37.ROFFICERCODE 
				LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE  = 'ELGMETHOD' 
				LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE  = T39.LOANPURPOSECODE 
				LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
				LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
				LEFT JOIN AMTVEHICLEDEALER T41 ON T1.MANUFACTURERDEALERID = T41.DEALERID
				UNION ALL
				SELECT T1.FINID,
					T1.FINREFERENCE,
				    T1.INVESTMENTREF,
				    T1.NUMBEROFTERMS,
				    T1.GRCPERIODENDDATE,
				    T1.ALLOWGRCPERIOD,
				    T1.GRACEBASERATE,
				    T1.GRACESPECIALRATE,
				    T1.GRCPFTRATE,
				    T1.GRCPFTFRQ,
				    T1.NEXTGRCPFTDATE,
				    T1.ALLOWGRCPFTRVW,
				    T1.GRCPFTRVWFRQ,
				    T1.NEXTGRCPFTRVWDATE,
				    T1.ALLOWGRCCPZ,
				    T1.GRCCPZFRQ,
				    T1.NEXTGRCCPZDATE,
				    T1.REPAYBASERATE,
				    T1.REPAYSPECIALRATE,
				    T1.REPAYPROFITRATE,
				    T1.REPAYFRQ,
				    T1.NEXTREPAYDATE,
				    T1.REPAYPFTFRQ,
				    T1.NEXTREPAYPFTDATE,
				    T1.ALLOWREPAYRVW,
				    T1.REPAYRVWFRQ,
				    T1.NEXTREPAYRVWDATE,
				    T1.ALLOWREPAYCPZ,
				    T1.REPAYCPZFRQ,
				    T1.NEXTREPAYCPZDATE,
				    T1.MATURITYDATE,
				    T1.CPZATGRACEEND,
				    T1.DOWNPAYMENT,
				    T1.GRACEFLATAMOUNT,
				    T1.REQREPAYAMOUNT,
				    T1.TOTALPROFIT,
				    T1.TOTALCPZ,
				    T1.TOTALGROSSPFT,
				    T1.TOTALGROSSGRCPFT,
				    T1.TOTALGRACEPFT,
				    T1.TOTALGRACECPZ,
				    T1.GRCRATEBASIS,
				    T1.REPAYRATEBASIS,
				    T1.FINTYPE,
				    T1.FINREMARKS,
				    T1.FINCCY,
				    T1.SCHEDULEMETHOD,
				    T1.PROFITDAYSBASIS,
				    T1.REQMATURITY,
				    T1.CALTERMS,
				    T1.CALMATURITY,
				    T1.FIRSTREPAY,
				    T1.LASTREPAY,
				    T1.FINSTARTDATE,
				    T1.FINAMOUNT,
					((T1.FINAMOUNT + T1.FEECHARGEAMT) - T1.DOWNPAYMENT) LOVDESCFINANCINGAMOUNT,
				    T1.FINREPAYMENTAMOUNT,
				    T1.CUSTID,
				    T1.DEFFERMENTS,
				    T1.PLANDEFERCOUNT,
				    T1.FINBRANCH,
				    T1.FINSOURCEID,
				    T1.ALLOWEDDEFRPYCHANGE,
				    T1.AVAILEDDEFRPYCHANGE,
				    T1.ALLOWEDDEFFRQCHANGE,
				    T1.AVAILEDDEFFRQCHANGE,
				    T1.RECALTYPE,
				    T1.FINASSETVALUE,
				    T1.DISBACCOUNTID,
				    T1.REPAYACCOUNTID,
				    T1.FINISACTIVE,
				    T1.LIMITVALID,
				    T1.OVERRIDELIMIT,
				    T1.SECURITYDEPOSIT,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T7.FINTYPEDESC LOVDESCFINTYPENAME,
				    T7.FINMAXAMOUNT LOVDESCFINMAXAMT,
				    T7.FINMINAMOUNT LOVDESCFINMINAMOUNT,
				    T1.MINDOWNPAYPERC,
				    T7.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
				    T7.FINISDWPAYREQUIRED LOVDESCDWNPAYREQ,
				    T7.FINMAXDIFFERMENT LOVDESCFINMAXDIFFERMENT,
				    T12.BRANCHDESC LOVDESCFINBRANCHNAME,
				    T12.BRANCHPROVINCE FINBRANCHPROVINCECODE,
				    T1.LASTREPAYDATE,
				    T1.LASTREPAYPFTDATE,
				    T1.LASTREPAYRVWDATE,
				    T1.LASTREPAYCPZDATE,
				    T1.ALLOWGRCREPAY,
				    T1.GRCSCHDMTHD,
				    T1.GRCMARGIN,
				    T1.REPAYMARGIN,
				    T1.FINCURRASSETVALUE,
				    T1.FINCOMMITMENTREF,
				    T1.FINLIMITREF,
				    T1.DEPRECIATIONFRQ,
				    T1.FINCONTRACTDATE,
				    T1.NEXTDEPDATE,
				    T1.LASTDEPDATE,
				    T1.FINACCOUNT,
				    T1.FINCUSTPFTACCOUNT,
				    T17.ACRTILLLBD LOVDESCACCRUEDTILLLBD,
				    T7.FINRVWRATEAPPLFOR,
				    T1.TOTALREPAYAMT,
				    T1.CLOSINGSTATUS,
				    T1.FINAPPROVEDDATE,
				    T1.FEECHARGEAMT,
				    T1.BLACKLISTED,
				    T1.FINREPAYPFTONFRQ,
				    T1.ANUALIZEDPERCRATE,
				    T1.EFFECTIVERATEOFRETURN,
				    T1.MIGRATEDFINANCE,
				    T1.SCHEDULEMAINTAINED,
				    T1.SCHEDULEREGENERATED,
				    T1.FINPURPOSE,
				    T39.LOANPURPOSEDESC LOVDESCFINPURPOSENAME,
				    T1.FINSTATUS,
				    T1.FINSTSREASON,
				    T1.INITIATEUSER,
				    T1.BANKNAME,
				    T1.IBAN,
				    T1.ACCOUNTTYPE,
				    T1.DDAREFERENCENO,
				    T7.FINSCHEDULEON LOVDESCFINSCHEDULEON,
				    T1.CUSTDSR,
				    T1.JOINTACCOUNT,
				    T1.JOINTCUSTID,
				    T1.DOWNPAYBANK,
				    T1.DOWNPAYSUPL,
				    T1.DOWNPAYACCOUNT,
				    T1.SECURITYCOLLATERAL,
				    T1.APPROVED,
				    T1.DISCREPANCY,
				    T1.LIMITAPPROVED,
				    T1.GRACETERMS,
				    T7.FINDIVISION LOVDESCFINDIVISION,
				    T1.RCDMAINTAINSTS,
				    T1.FINREPAYMETHOD,
				    T1.GRCPROFITDAYSBASIS,
				    T1.STEPFINANCE,
				    T1.STEPTYPE,
				    T1.STEPPOLICY,
				    T1.ALWMANUALSTEPS,
				    T1.NOOFSTEPS,
				    T1.LINKEDFINREF,
				    T1.NEXTUSERID,
				    T1.PRIORITY,
				    T24.POLICYDESC LOVDESCSTEPPOLICYNAME,
				    T1.GRCMINRATE,
				    T1.GRCMAXRATE,
				    T1.RPYMINRATE,
				    T1.RPYMAXRATE,
				    T1.DEVIATIONAPPROVAL,
				    T1.MANUALSCHEDULE,
				    T1.TAKEOVERFINANCE,
				    T1.GRCADVBASERATE,
				    T1.GRCADVMARGIN,
				    T1.GRCADVPFTRATE,
				    T1.RPYADVBASERATE,
				    T1.RPYADVMARGIN,
				    T1.RPYADVPFTRATE,
				    T1.SUPPLEMENTRENT,
				    T1.INCREASEDCOST,
				    T1.CREDITINSAMT,
				    T1.ROLLOVERFRQ,
				    T1.NEXTROLLOVERDATE,
				    T27.CUSTSTSDESCRIPTION,
				    T1.SHARIASTATUS,
				    T1.INITIATEDATE,
				    T1.FINPREAPPROVEDREF,
				    T1.MMAID,
				    T1.ACCOUNTSOFFICER,
				    T1.FEEACCOUNTID,
				    T1.FINCANCELAC,
				    T28.DEALERNAME LOVDESCACCOUNTSOFFICER,
				    T28.DEALERCITY LOVDESCSOURCECITY,
				    T1.DSACODE,
				    T30.ROFFICERDESC DSACODEDESC,
				    T1.TDSAPPLICABLE,
				    T1.MANDATEID,
				    T1.DROPLINEFRQ,
				    T1.FIRSTDROPLINEDATE,
				    T1.PFTSERVICINGODLIMIT,
				    T1.INSURANCEAMT,
				    T1.DEDUCTINSDISB,
				    T1.ALWBPI,
				    T1.BPITREATMENT,
				    T1.PLANEMIHALW,
				    T1.PLANEMIHMETHOD,
				    T1.PLANEMIHMAXPERYEAR,
				    T1.PLANEMIHMAX,
				    T1.PLANEMIHLOCKPERIOD,
				    T1.PLANEMICPZ,
				    T1.CALROUNDINGMODE,
				    T1.ALWMULTIDISB,
				    T1.APPLICATIONNO,
				    T1.REFERRALID,
				    T33.ROFFICERDESC REFERRALIDDESC,
				    T1.DMACODE,
				    T34.ROFFICERDESC DMACODEDESC,
				    T1.SALESDEPARTMENT,
				    T35.DEPTDESC SALESDEPARTMENTDESC,
				    T1.QUICKDISB,
				    T1.WIFREFERENCE,
				    T1.UNPLANEMIHLOCKPERIOD,
				    T1.UNPLANEMICPZ,
				    T1.REAGECPZ,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.AVAILEDUNPLANEMI,
				    T1.AVAILEDREAGEH,
				    T1.BPIAMOUNT,
				    T1.DEDUCTFEEDISB,
				    T1.RVWRATEAPPLFOR,
				    T1.SCHCALONRVW,
				    T1.PASTDUEPFTCALMTHD,
				    T1.PASTDUEPFTMARGIN,
				    T1.DROPPINGMETHOD,
				    T1.RATECHGANYDAY,
				    T1.PROMOTIONCODE,
				    T1.RESTRUCTURELOAN,
				    T1.OLDFINREFERENCE,
				    T1.REAGEBUCKET,
				    T1.FINCATEGORY,
				    T1.PRODUCTCATEGORY,
				    T1.ROUNDINGTARGET,
				    T36.ENTITYCODE LOVDESCENTITYCODE,
				    T1.ELIGIBILITYMETHOD,
				    T38.FIELDCODEVALUE LOVELIGIBILITYMETHOD,
				    T38.VALUEDESC LOVDESCELIGIBILITYMETHOD,
				    T1.EMPLOYEENAME,
				    T37.ROFFICERDESC EMPLOYEENAMEDESC,
				    T1.SAMPLINGREQUIRED,
				    T1.LEGALREQUIRED,
				    T1.GRCMAXAMOUNT,
				    T1.CONNECTOR,
				    T40.DEALERNAME CONNECTORCODE,
				    T40.DEALERCITY CONNECTORDESC,
				    T1.ADVANCEEMI,
				    T1.ADVEMITERMS,
				    T1.BPIPFTDAYSBASIS,
				    T1.FIXEDRATETENOR,
				    T1.FIXEDTENORRATE,
				    T12.BRANCHTEL FINBRANCHCONTACT,
				    T1.PROCESSATTRIBUTES,
				    T1.BUSINESSVERTICAL,
				    BV.CODE BUSINESSVERTICALCODE,
				    BV.DESCRIPTION BUSINESSVERTICALDESC,
				    T1.GRCADVTYPE,
				    T1.GRCADVTERMS,
				    T1.ADVTYPE,
				    T1.ADVTERMS,
				    T1.ADVSTAGE,
				    T1.TDSPERCENTAGE,
				    T1.TDSSTARTDATE,
				    T1.TDSENDDATE,
				    T1.TDSLIMITAMT,
				    T1.VANREQ,
				    T1.VANCODE,
				    T1.ALLOWDRAWINGPOWER,
				    T1.ALLOWREVOLVING,
				    T1.SANBSDSCHDLE,
				    T1.PROMOTIONSEQID,
				    T1.SVAMOUNT,
				    T1.CBAMOUNT,
				    T1.APPLIEDLOANAMT,
				    T1.FINISRATERVWATGRCEND,
					T1.REQLOANAMT,
					T1.REQLOANTENOR,
					T1.FINOCRREQUIRED,
					T1.OFFERPRODUCT,
					T1.OFFERAMOUNT,
					T1.CUSTSEGMENTATION,
					T1.BASEPRODUCT,
					T1.PROCESSTYPE,
					T1.BUREAUTIMESERIES,
					T1.CAMPAIGNNAME,
					T1.EXISTINGLANREFNO,
					T1.LEADSOURCE,
					T1.POSOURCE,
					T1.RSA,
					T1.VERIFICATION,
					T1.SOURCINGBRANCH,
					T1.SOURCHANNELCATEGORY,
					T1.ASMNAME,
					T13.BRANCHDESC LOVDESCSOURCINGBRANCH,
					T1.OFFERID,
					T1.ALWGRCADJ,
					T1.ENDGRCPERIODAFTRFULLDISB,
					T1.AUTOINCGRCENDDATE,
					T1.PMAY,
					T1.ALWLOANSPLIT,
					T1.PARENTREF,
					T1.LOANSPLITTED,
					T1.INSTBASEDSCHD,
					T1.PLANEMIHALWINGRACE,
					T1.ALLOWSUBVENTION,
					T1.TDSTYPE,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS,
					T1.SCHDVERSION,
					T1.SUBVENTIONFROM,
					T1.MANUFACTURERDEALERID,
					T41.DEALERNAME MANUFACTURERDEALERNAME,
					T41.CODE MANUFACTURERDEALERCODE
				FROM FINANCEMAIN T1
				JOIN RMTFINANCETYPES T7 ON T1.FINTYPE  = T7.FINTYPE 
				LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH  = T12.BRANCHCODE 
				LEFT JOIN RMTBRANCHES T13 ON T1.SOURCINGBRANCH = T13.BRANCHCODE
				LEFT JOIN FINPFTDETAILS T17 ON T17.FINID  = T1.FINID 
				LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY  = T24.POLICYCODE 
				LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS  = T27.CUSTSTSCODE 
				LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
				LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE  = T30.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID  = T33.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE  = T34.ROFFICERCODE 
				LEFT JOIN BMTDEPARTMENTS T35 ON T1.SALESDEPARTMENT  = T35.DEPTCODE 
				LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION  = T36.DIVISIONCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME  = T37.ROFFICERCODE 
				LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE  = 'ELGMETHOD' 
				LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE  = T39.LOANPURPOSECODE 
				LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
				LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
				LEFT JOIN AMTVEHICLEDEALER T41 ON T1.MANUFACTURERDEALERID = T41.DEALERID
				WHERE NOT EXISTS (SELECT 1 FROM FINANCEMAIN_TEMP WHERE FINANCEMAIN_TEMP.FINID = T1.FINID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="FMV_3_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_view');	
			]]>
		</sql>
	</changeSet>
	<changeSet id="FMV_4_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemain_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FMV_4" author="Gopal.p">
		<createView viewName="FINANCEMAIN_TVIEW" replaceIfExists="true">
		    <![CDATA[
				SELECT T1.FINID,
					T1.FINREFERENCE,
					T1.INVESTMENTREF,
					T1.NUMBEROFTERMS,
					T1.GRCPERIODENDDATE,
					T1.ALLOWGRCPERIOD,
					T1.GRACEBASERATE,
					T1.GRACESPECIALRATE,
					T1.GRCPFTRATE,
					T1.GRCPFTFRQ,
					T1.NEXTGRCPFTDATE,
					T1.ALLOWGRCPFTRVW,
					T1.GRCPFTRVWFRQ,
					T1.NEXTGRCPFTRVWDATE,
					T1.ALLOWGRCCPZ,
					T1.GRCCPZFRQ,
					T1.NEXTGRCCPZDATE,
					T1.REPAYBASERATE,
					T1.REPAYSPECIALRATE,
					T1.REPAYPROFITRATE,
					T1.REPAYFRQ,
					T1.NEXTREPAYDATE,
					T1.REPAYPFTFRQ,
					T1.NEXTREPAYPFTDATE,
					T1.ALLOWREPAYRVW,
					T1.REPAYRVWFRQ,
					T1.NEXTREPAYRVWDATE,
					T1.ALLOWREPAYCPZ,
					T1.REPAYCPZFRQ,
					T1.NEXTREPAYCPZDATE,
					T1.MATURITYDATE,
					T1.CPZATGRACEEND,
					T1.DOWNPAYMENT,
					T1.GRACEFLATAMOUNT,
					T1.REQREPAYAMOUNT,
					T1.TOTALPROFIT,
					T1.TOTALCPZ,
					T1.TOTALGROSSPFT,
					T1.TOTALGROSSGRCPFT,
					T1.TOTALGRACEPFT,
					T1.TOTALGRACECPZ,
					T1.GRCRATEBASIS,
					T1.REPAYRATEBASIS,
					T1.FINTYPE,
					T1.FINREMARKS,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.REQMATURITY,
					T1.CALTERMS,
					T1.CALMATURITY,
					T1.FIRSTREPAY,
					T1.LASTREPAY,
					T1.FINSTARTDATE,
					T1.FINAMOUNT,
					T1.FINAMOUNT + T1.FEECHARGEAMT - T1.DOWNPAYMENT LOVDESCFINANCINGAMOUNT,
					T1.FINREPAYMENTAMOUNT,
					T1.CUSTID,
					T1.DEFFERMENTS,
					T1.PLANDEFERCOUNT,
					T1.FINBRANCH,
					T1.FINSOURCEID,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.ALLOWEDDEFFRQCHANGE,
					T1.AVAILEDDEFFRQCHANGE,
					T1.RECALTYPE,
					T1.FINASSETVALUE,
					T1.DISBACCOUNTID,
					T1.REPAYACCOUNTID,
					T1.FINISACTIVE,
					T1.LIMITVALID,
					T1.OVERRIDELIMIT,
					T1.SECURITYDEPOSIT,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T7.FINTYPEDESC LOVDESCFINTYPENAME,
					T7.FINMAXAMOUNT LOVDESCFINMAXAMT,
					T7.FINMINAMOUNT LOVDESCFINMINAMOUNT,
					T1.MINDOWNPAYPERC,
					T7.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
					T7.FINISDWPAYREQUIRED LOVDESCDWNPAYREQ,
					T7.FINMAXDIFFERMENT LOVDESCFINMAXDIFFERMENT,
					T12.BRANCHDESC LOVDESCFINBRANCHNAME,
					T12.BRANCHPROVINCE FINBRANCHPROVINCECODE,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.LASTREPAYRVWDATE,
					T1.LASTREPAYCPZDATE,
					T1.ALLOWGRCREPAY,
					T1.GRCSCHDMTHD,
					T1.GRCMARGIN,
					T1.REPAYMARGIN,
					T1.FINCURRASSETVALUE,
					T1.FINCOMMITMENTREF,
					T1.FINLIMITREF,
					T1.DEPRECIATIONFRQ,
					T1.FINCONTRACTDATE,
					T1.NEXTDEPDATE,
					T1.LASTDEPDATE,
					T1.FINACCOUNT,
					T1.FINCUSTPFTACCOUNT,
					T17.ACRTILLLBD LOVDESCACCRUEDTILLLBD,
					T7.FINRVWRATEAPPLFOR,
					T1.TOTALREPAYAMT,
					T1.CLOSINGSTATUS,
					T1.FINAPPROVEDDATE,
					T1.FEECHARGEAMT,
					T1.BLACKLISTED,
					T1.FINREPAYPFTONFRQ,
					T1.ANUALIZEDPERCRATE,
					T1.EFFECTIVERATEOFRETURN,
					T1.MIGRATEDFINANCE,
					T1.SCHEDULEMAINTAINED,
					T1.SCHEDULEREGENERATED,
					T1.FINPURPOSE,
					T39.LOANPURPOSEDESC LOVDESCFINPURPOSENAME,
					T1.FINSTATUS,
					T1.FINSTSREASON,
					T1.INITIATEUSER,
					T1.BANKNAME,
					T1.IBAN,
					T1.ACCOUNTTYPE,
					T1.DDAREFERENCENO,
					T7.FINSCHEDULEON LOVDESCFINSCHEDULEON,
					T1.CUSTDSR,
					T1.JOINTACCOUNT,
					T1.JOINTCUSTID,
					T1.DOWNPAYBANK,
					T1.DOWNPAYSUPL,
					T1.DOWNPAYACCOUNT,
					T1.SECURITYCOLLATERAL,
					T1.APPROVED,
					T1.DISCREPANCY,
					T1.LIMITAPPROVED,
					T1.GRACETERMS,
					T7.FINDIVISION LOVDESCFINDIVISION,
					T1.RCDMAINTAINSTS,
					T1.FINREPAYMETHOD,
					T1.GRCPROFITDAYSBASIS,
					T1.STEPFINANCE,
					T1.STEPTYPE,
					T1.STEPPOLICY,
					T1.ALWMANUALSTEPS,
					T1.NOOFSTEPS,
					T1.LINKEDFINREF,
					T1.NEXTUSERID,
					T1.PRIORITY,
					T24.POLICYDESC LOVDESCSTEPPOLICYNAME,
					T1.GRCMINRATE,
					T1.GRCMAXRATE,
					T1.RPYMINRATE,
					T1.RPYMAXRATE,
					T1.DEVIATIONAPPROVAL,
					T1.MANUALSCHEDULE,
					T1.TAKEOVERFINANCE,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.SUPPLEMENTRENT,
					T1.INCREASEDCOST,
					T1.CREDITINSAMT,
					T1.ROLLOVERFRQ,
					T1.NEXTROLLOVERDATE,
					T27.CUSTSTSDESCRIPTION,
					T1.SHARIASTATUS,
					T1.INITIATEDATE,
					T1.FINPREAPPROVEDREF,
					T1.MMAID,
					T1.ACCOUNTSOFFICER,
					T1.FEEACCOUNTID,
					T1.FINCANCELAC,
					T28.DEALERNAME LOVDESCACCOUNTSOFFICER,
					T28.DEALERCITY LOVDESCSOURCECITY,
					T1.DSACODE,
					T30.ROFFICERDESC DSACODEDESC,
					T1.TDSAPPLICABLE,
					T1.MANDATEID,
					T1.DROPLINEFRQ,
					T1.FIRSTDROPLINEDATE,
					T1.PFTSERVICINGODLIMIT,
					T1.INSURANCEAMT,
					T1.DEDUCTINSDISB,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.CALROUNDINGMODE,
					T1.ALWMULTIDISB,
					T1.APPLICATIONNO,
					T1.REFERRALID,
					T33.ROFFICERDESC REFERRALIDDESC,
					T1.DMACODE,
					T34.ROFFICERDESC DMACODEDESC,
					T1.SALESDEPARTMENT,
					T35.DEPTDESC SALESDEPARTMENTDESC,
					T1.QUICKDISB,
					T1.WIFREFERENCE,
					T1.UNPLANEMIHLOCKPERIOD,
					T1.UNPLANEMICPZ,
					T1.REAGECPZ,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.AVAILEDUNPLANEMI,
					T1.AVAILEDREAGEH,
					T1.BPIAMOUNT,
					T1.DEDUCTFEEDISB,
					T1.RVWRATEAPPLFOR,
					T1.SCHCALONRVW,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.PROMOTIONCODE,
					T1.RESTRUCTURELOAN,
					T1.OLDFINREFERENCE,
					T1.REAGEBUCKET,
					T1.FINCATEGORY,
					T1.PRODUCTCATEGORY,
					T1.ROUNDINGTARGET,
					T36.ENTITYCODE LOVDESCENTITYCODE,
					T1.ELIGIBILITYMETHOD,
					T38.FIELDCODEVALUE LOVELIGIBILITYMETHOD,
					T38.VALUEDESC LOVDESCELIGIBILITYMETHOD,
					T1.EMPLOYEENAME,
					T37.ROFFICERDESC EMPLOYEENAMEDESC,
					T1.SAMPLINGREQUIRED,
					T1.LEGALREQUIRED,
					T1.GRCMAXAMOUNT,
					T1.CONNECTOR,
					T40.DEALERNAME CONNECTORCODE,
					T40.DEALERCITY CONNECTORDESC,
					T1.ADVANCEEMI,
					T1.ADVEMITERMS,
					T1.BPIPFTDAYSBASIS,
					T1.FIXEDRATETENOR,
					T1.FIXEDTENORRATE,
					T12.BRANCHTEL FINBRANCHCONTACT,
					T1.PROCESSATTRIBUTES,
					T1.BUSINESSVERTICAL,
					BV.CODE BUSINESSVERTICALCODE,
					BV.DESCRIPTION BUSINESSVERTICALDESC,
					T1.GRCADVTYPE,
					T1.GRCADVTERMS,
					T1.ADVTYPE,
					T1.ADVTERMS,
					T1.ADVSTAGE,
					T1.TDSPERCENTAGE,
					T1.TDSSTARTDATE,
					T1.TDSENDDATE,
					T1.TDSLIMITAMT,
					T1.VANREQ,
					T1.VANCODE,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING,
					T1.SANBSDSCHDLE,
					T1.PROMOTIONSEQID,
					T1.SVAMOUNT,
					T1.CBAMOUNT,
					T1.APPLIEDLOANAMT,
					T1.FINISRATERVWATGRCEND,
					T1.REQLOANAMT,
					T1.REQLOANTENOR,
					T1.FINOCRREQUIRED,
					T1.OFFERPRODUCT,
					T1.OFFERAMOUNT,
					T1.CUSTSEGMENTATION,
					T1.BASEPRODUCT,
					T1.PROCESSTYPE,
					T1.BUREAUTIMESERIES,
					T1.CAMPAIGNNAME,
					T1.EXISTINGLANREFNO,
					T1.LEADSOURCE,
					T1.POSOURCE,
					T1.RSA,
					T1.VERIFICATION,
					T1.SOURCINGBRANCH,
					T1.SOURCHANNELCATEGORY,
					T1.ASMNAME,
					T13.BRANCHDESC LOVDESCSOURCINGBRANCH,
					T1.OFFERID,
					T1.ENDGRCPERIODAFTRFULLDISB,
					T1.AUTOINCGRCENDDATE,
					T1.ALWGRCADJ,
					T1.PMAY,
					T1.ALWLOANSPLIT,
					T1.PARENTREF,
					T1.LOANSPLITTED,
					T1.INSTBASEDSCHD,
					T1.PLANEMIHALWINGRACE,
					T1.ALLOWSUBVENTION,
					T1.TDSTYPE,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS,
					T1.SCHDVERSION,
					T1.SUBVENTIONFROM,
					T1.MANUFACTURERDEALERID,
					T41.DEALERNAME MANUFACTURERDEALERNAME,
					T41.CODE MANUFACTURERDEALERCODE
				FROM FINANCEMAIN_TEMP T1
				JOIN RMTFINANCETYPES T7 ON T1.FINTYPE  = T7.FINTYPE 
				LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH  = T12.BRANCHCODE 
				LEFT JOIN RMTBRANCHES T13 ON T1.SOURCINGBRANCH = T13.BRANCHCODE
				LEFT JOIN FINPFTDETAILS T17 ON T17.FINID  = T1.FINID 
				LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY  = T24.POLICYCODE 
				LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS  = T27.CUSTSTSCODE 
				LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
				LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE  = T30.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID  = T33.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE  = T34.ROFFICERCODE 
				LEFT JOIN BMTDEPARTMENTS T35 ON T1.SALESDEPARTMENT  = T35.DEPTCODE 
				LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION  = T36.DIVISIONCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME  = T37.ROFFICERCODE 
				LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE  = 'ELGMETHOD' 
				LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE  = T39.LOANPURPOSECODE 
				LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
				LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
				LEFT JOIN AMTVEHICLEDEALER T41 ON T1.MANUFACTURERDEALERID = T41.DEALERID
			]]>
		</createView>
	</changeSet>

	<changeSet id="FMV_4_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FMV_5_pre" author="Gopal.p" dbms="postgresql">
		<sql> 
			<![CDATA[ 
				select deps_save_and_drop_dependencies ('plf', 'financemain_dview'); 
			]]>
		</sql>
	</changeSet>

	<changeSet id="FMV_5" author="Gopal.p">
		<createView viewName="FINANCEMAIN_DVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINID,
					T1.FINREFERENCE,
					T1.INVESTMENTREF,
					T1.FINTYPE,
					T1.FINCCY,
					T1.FINAMOUNT,
					T1.DOWNPAYMENT,
					T1.FEECHARGEAMT,
					T1.SCHEDULEMETHOD,
					T1.RECORDSTATUS,
					T1.RECORDTYPE,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.FINBRANCH,
					T1.FINASSETVALUE,
					T2.CUSTCIF LOVDESCCUSTCIF,
					T2.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
					T2.CUSTID,
					T2.CUSTCIF,
					T3.FINCATEGORY LOVDESCPRODUCTCODENAME,
					T3.FINDIVISION LOVDESCFINDIVISION,
					T1.SAMPLINGREQUIRED,
					T1.LEGALREQUIRED,
					T1.INSTBASEDSCHD,
					T1.ALLOWSUBVENTION,
					T1.TDSTYPE,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS,
					T1.SCHDVERSION,
					T1.SUBVENTIONFROM,
					T1.MANUFACTURERDEALERID,
					T5.DEALERNAME MANUFACTURERDEALERNAME,
					T5.CODE MANUFACTURERDEALERCODE
				FROM FINANCEMAIN_TEMP T1
				JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
				JOIN RMTFINANCETYPES T3 ON T3.FINTYPE = T1.FINTYPE
				JOIN INVESTMENTFINHEADER T4 ON T4.INVESTMENTREF = T1.INVESTMENTREF
				LEFT JOIN AMTVEHICLEDEALER T5 ON T1.MANUFACTURERDEALERID = T5.DEALERID
			]]>
		</createView>
	</changeSet>

	<changeSet id="FMV_5_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_dview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FMV_6_Pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemain_dataview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FMV_6" author="Gopal.p">
		<createView viewName="FINANCEMAIN_DATAVIEW" replaceIfExists="true"> 
			<![CDATA[
				SELECT T1.FINID,
					T1.FINREFERENCE,
					T1.FINTYPE,
					T2.CUSTCIF LOVDESCCUSTCIF,
					T1.CUSTID,
					T1.CLOSINGSTATUS,
					T1.FINISACTIVE,
					T1.MATURITYDATE,
					T1.PRODUCTCATEGORY,
					T1.WRITEOFFLOAN,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS,
					T1.SCHDVERSION,
					T1.SUBVENTIONFROM,
					T1.MANUFACTURERDEALERID,
					T3.DEALERNAME MANUFACTURERDEALERNAME,
					T3.CODE MANUFACTURERDEALERCODE
				FROM FINANCEMAIN T1
				JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
				LEFT JOIN AMTVEHICLEDEALER T3 ON T1.MANUFACTURERDEALERID = T3.DEALERID
			]]>
		</createView>
	</changeSet>

	<changeSet id="FMV_6_Post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_dataview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FMV_7_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemain_lfview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FMV_7" author="Gopal.p">
		<createView viewName="FINANCEMAIN_LFVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT F.FINID,
					F.FINREFERENCE, 
					F.CUSTID, 
					C.CUSTCIF LOVDESCCUSTCIF, 
					C.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
					F.FINTYPE, 
					F.FINISACTIVE, 
					SD.ENTITYCODE,
					F.RCDMAINTAINSTS,
					F.RECORDSTATUS,
					F.QUICKDISB
				FROM FINANCEMAIN_TEMP F 
				INNER JOIN CUSTOMERS C ON F.CUSTID = C.CUSTID AND F.QUICKDISB = 1 AND F.RECORDSTATUS = 'Submitted'
				INNER JOIN RMTFINANCETYPES FT ON FT.FINTYPE = F.FINTYPE
				INNER JOIN SMTDivisiondetail SD On FT.FINDIVISION = SD.DivisionCode
				UNION ALL
				SELECT F.FINID,
					F.FINREFERENCE, 
					F.CUSTID, 
					C.CUSTCIF LOVDESCCUSTCIF, 
					C.CUSTSHRTNAME LOVDESCCUSTSHRTNAME, 
					F.FINTYPE, 
					F.FINISACTIVE, 
					SD.ENTITYCODE, 
					F.RCDMAINTAINSTS,
					F.RECORDSTATUS,
					F.QUICKDISB
				FROM FINANCEMAIN F INNER JOIN CUSTOMERS C ON F.CUSTID = C.CUSTID
				INNER JOIN RMTFINANCETYPES FT ON FT.FINTYPE = F.FINTYPE
				INNER JOIN SMTDIVISIONDETAIL SD ON FT.FINDIVISION = SD.DIVISIONCODE
				WHERE NOT EXISTS (SELECT 1 EXPR1 FROM FINANCEMAIN_TEMP WHERE FINID = F.FINID)
			]]>	
		</createView>
	</changeSet>

	<changeSet id="FMV_7_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_lfview');
			]]>
		</sql>
	</changeSet>

	<!-- (FMV) :: Finance Main Views handle in single place end -->

	<!-- (FEV) :: Finance Enquiry views handle in single place start -->

	<changeSet id="FEV_1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financeenquiry_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FEV_1" author="Gopal.p">
		<createView viewName="FINANCEENQUIRY_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINID,
					T1.FINREFERENCE,
					T1.FINBRANCH,
					T1.FINTYPE,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.FINSTARTDATE,
					T1.CALTERMS NUMBEROFTERMS,
					T1.CUSTID,
					T1.FINAMOUNT,
					T1.GRCPERIODENDDATE,
					T1.MATURITYDATE,
					T1.FINREPAYMENTAMOUNT,
					T1.FINISACTIVE,
					T1.ALLOWGRCPERIOD,
					T1.DOWNPAYMENT,
					T1.MIGRATEDFINANCE,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.FINCURRASSETVALUE,
					T1.BLACKLISTED,
					T1.FEECHARGEAMT,
					T1.CLOSINGSTATUS,
					T1.GRACETERMS,
					T1.ALWMULTIDISB,
					T1.DEFFERMENTS,
					T1.FINSTATUS,
					T1.MANDATEID,
					T1.FINREPAYMETHOD,
					T1.FINASSETVALUE,
					T1.FINCURRASSETVALUE + T1.FEECHARGEAMT + T1.INSURANCEAMT FINANCINGAMOUNT,
					T1.FINCURRASSETVALUE - T1.FINREPAYMENTAMOUNT + T1.FEECHARGEAMT + T1.INSURANCEAMT CURFINAMOUNT,
					T2.FINTYPEDESC LOVDESCFINTYPENAME,
					T2.FINSCHEDULEON LOVDESCFINSCHEDULEON,
					T2.FINDIVISION LOVDESCFINDIVISION,
					T2.FINCATEGORY LOVDESCPRODUCTCODENAME,
					T2.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
					T3.CUSTCIF LOVDESCCUSTCIF,
					T3.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
					T4.BRANCHDESC LOVDESCFINBRANCHNAME,
					T5.CUSTTYPECTG,
					COALESCE(T9.NOINST, 0)  NOINST,
					T1.FINOCRREQUIRED,
					T1.TOTALCPZ,
					T1.ALWGRCADJ,
					T1.ENDGRCPERIODAFTRFULLDISB,
					T1.AUTOINCGRCENDDATE,
					T1.RECORDSTATUS,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.SUBVENTIONFROM,
					T1.MANUFACTURERDEALERID,
					T10.DEALERNAME MANUFACTURERDEALERNAME,
					T10.CODE MANUFACTURERDEALERCODE
				FROM FINANCEMAIN_TEMP T1
				JOIN RMTFINANCETYPES T2 ON T1.FINTYPE = T2.FINTYPE
				JOIN CUSTOMERS T3 ON T1.CUSTID = T3.CUSTID
				JOIN RMTBRANCHES T4 ON T1.FINBRANCH = T4.BRANCHCODE
				JOIN RMTCUSTTYPES T5 ON T3.CUSTTYPECODE = T5.CUSTTYPECODE
				LEFT JOIN FINPFTDETAILS T9 ON T9.FINID = T1.FINID
				LEFT JOIN AMTVEHICLEDEALER T10 ON T1.MANUFACTURERDEALERID = T10.DEALERID
			]]>
		</createView>
	</changeSet>

	<changeSet id="FEV_1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financeenquiry_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FEV_2_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financeenquiry_view');
		 	]]>
		</sql>
	</changeSet>

	<changeSet id="FEV_2" author="Gopal.p">
		<createView viewName="FINANCEENQUIRY_VIEW" replaceIfExists="true">
		  <![CDATA[
				SELECT T1.FINID,
					T1.FINREFERENCE,
					T1.FINBRANCH,
					T1.FINTYPE,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.FINSTARTDATE,
					T1.CALTERMS NUMBEROFTERMS,
					T1.CUSTID,
					T1.FINAMOUNT,
					T1.GRCPERIODENDDATE,
					T1.MATURITYDATE,
					T1.FINREPAYMENTAMOUNT,
					T1.FINISACTIVE,
					T1.ALLOWGRCPERIOD,
					T1.DOWNPAYMENT,
					T1.MIGRATEDFINANCE,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.FINCURRASSETVALUE,
					T1.BLACKLISTED,
					T1.FEECHARGEAMT,
					T1.CLOSINGSTATUS,
					T1.GRACETERMS,
					T1.ALWMULTIDISB,
					T1.DEFFERMENTS,
					T1.FINSTATUS ,
					T1.MANDATEID,
					T1.FINREPAYMETHOD,
					T1.FINASSETVALUE,
					T1.INSURANCEAMT,
					T1.SANBSDSCHDLE,
					T1.PROMOTIONSEQID,
					T1.SVAMOUNT,
					T1.CBAMOUNT,
					(T1.FINCURRASSETVALUE+ T1.FEECHARGEAMT+T1.INSURANCEAMT) FINANCINGAMOUNT,
					(T1.FINCURRASSETVALUE- T1.FINREPAYMENTAMOUNT+ T1.FEECHARGEAMT+T1.INSURANCEAMT) CURFINAMOUNT,
					T2.FINTYPEDESC LOVDESCFINTYPENAME,
					T2.FINSCHEDULEON LOVDESCFINSCHEDULEON,
					T2.FINDIVISION LOVDESCFINDIVISION,
					T2.FINCATEGORY LOVDESCPRODUCTCODENAME,
					T2.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
					T3.CUSTCIF LOVDESCCUSTCIF,
					T3.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
					T4.BRANCHDESC LOVDESCFINBRANCHNAME,
					T5.CUSTTYPECTG,
					COALESCE(T9.NOINST,0) NOINST,
					T1.TOTALCPZ,
					T1.FINOCRREQUIRED,
					T1.ALWGRCADJ,
					T1.ENDGRCPERIODAFTRFULLDISB,
					T1.AUTOINCGRCENDDATE,
					T1.RECORDSTATUS,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.SUBVENTIONFROM,
					T1.MANUFACTURERDEALERID,
					T10.DEALERNAME MANUFACTURERDEALERNAME,
					T10.CODE MANUFACTURERDEALERCODE
				FROM FINANCEMAIN T1
				INNER JOIN RMTFINANCETYPES T2 ON T1.FINTYPE = T2.FINTYPE
				INNER JOIN CUSTOMERS T3 ON T1.CUSTID = T3.CUSTID
				INNER JOIN RMTBRANCHES T4 ON T1.FINBRANCH = T4.BRANCHCODE
				INNER JOIN RMTCUSTTYPES T5 ON T3.CUSTTYPECODE = T5.CUSTTYPECODE
				LEFT JOIN FINPFTDETAILS T9 ON T9.FINID = T1.FINID
				LEFT JOIN AMTVEHICLEDEALER T10 ON T1.MANUFACTURERDEALERID = T10.DEALERID
			]]>
		</createView>
	</changeSet>

	<changeSet id="FEV_2_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financeenquiry_view');
			]]>
		</sql>
	</changeSet>

	<!-- (FEV) :: Finance Enquiry views handle in single place end -->

	<!-- (SDV) :: Finance Schedule detail Views handle in single place start -->

	<changeSet id="SDV_1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finscheduledetails_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="SDV_1" author="Gopal.p">
		<createView viewName="FINSCHEDULEDETAILS_TVIEW" replaceIfExists="true">
		    <![CDATA[
				SELECT T2.FINID,
					T2.FINREFERENCE,
					T1.SCHSEQ,
					T1.SCHDATE,
					T1.PFTONSCHDATE,
					T1.REPAYONSCHDATE,
					T1.CPZONSCHDATE,
					T1.RVWONSCHDATE,
					T1.DISBONSCHDATE,
					T1.DOWNPAYMENTONSCHDATE,
					T1.BALANCEFORPFTCAL,
					T1.BASERATE,
					T1.SPLRATE,
					T1.ACTRATE,
					T1.NOOFDAYS,
					T1.DAYFACTOR,
					T1.PROFITCALC,
					T1.PROFITSCHD,
					T1.PRINCIPALSCHD,
					T1.REPAYAMOUNT,
					T1.PROFITBALANCE,
					T1.DISBAMOUNT,
					T1.CPZAMOUNT,
					T1.DOWNPAYMENTAMOUNT,
					T1.CLOSINGBALANCE,
					T1.PROFITFRACTION,
					T1.PRVREPAYAMOUNT,
					T1.SCHDPFTPAID,
					T1.SCHPFTPAID,
					T1.SCHDPRIPAID,
					T1.SCHPRIPAID,
					T1.SPECIFIER,
					T1.DEFSCHDDATE,
					T1.SCHDMETHOD,
					T1.MRGRATE,
					T1.CALONINDRATE,
					T1.FEECHARGEAMT,
					T1.CALCULATEDRATE,
					T1.EARLYPAIDBAL,
					T1.EARLYPAID,
					T1.REFUNDORWAIVER,
					T1.WRITEOFFPRINCIPAL,
					T1.WRITEOFFPROFIT,
					T1.ORGPFT,
					T1.ORGPRI,
					T1.ORGENDBAL,
					T1.ORGPLANPFT,
					T1.FEESCHD,
					T1.SCHDFEEPAID,
					T1.SCHDFEEOS,
					T1.INSSCHD,
					T1.SCHDINSPAID,
					T1.ADVPFTRATE,
					T1.ADVPROFIT,
					T1.ADVREPAYAMOUNT,
					T1.ADVBASERATE,
					T1.ADVMARGIN,
					T1.ADVCALRATE,
					T1.SUPLRENT,
					T1.INCRCOST,
					T1.SUPLRENTPAID,
					T1.INCRCOSTPAID,
					T1.ROLLOVERONSCHDATE,
					T1.ROLLOVERAMOUNT,
					T1.ROLLOVERAMOUNTPAID,
					T1.TDSAMOUNT,
					T1.TDSPAID,
					T1.PFTDAYSBASIS,
					T1.WRITEOFFINS,
					T1.WRITEOFFINCRCOST,
					T1.WRITEOFFSUPLRENT,
					T1.WRITEOFFSCHFEE,
					T1.INSURANCEAMT,
					T1.INSTNUMBER,
					T1.BPIORHOLIDAY,
					T1.FRQDATE,
					T1.PRESENTMENTID,
					T1.PARTIALPAIDAMT,
					T1.FEETAX,
					T1.RECALLOCK,
					T1.TDSAPPLICABLE,
					T1.SCHDPFTWAIVER,
					T1.CPZBALANCE
				FROM FINSCHEDULEDETAILS_TEMP T1
				INNER JOIN FINANCEMAIN_TEMP T2 ON T2.FINID = T1.FINID
			]]>
		</createView>
	</changeSet>

	<changeSet id="SDV_1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finscheduledetails_tview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="SDV_2_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finscheduledetails_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="SDV_2" author="Gopal.p">
		<createView viewName="FINSCHEDULEDETAILS_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T2.FINID,
					T2.FINREFERENCE,
					T1.SCHSEQ,
					T1.SCHDATE,
					T1.PFTONSCHDATE,
					T1.REPAYONSCHDATE,
					T1.CPZONSCHDATE,
					T1.RVWONSCHDATE,
					T1.DISBONSCHDATE,
					T1.DOWNPAYMENTONSCHDATE,
					T1.BALANCEFORPFTCAL,
					T1.BASERATE,
					T1.SPLRATE,
					T1.ACTRATE,
					T1.NOOFDAYS,
					T1.DAYFACTOR,
					T1.PROFITCALC,
					T1.PROFITSCHD,
					T1.PRINCIPALSCHD,
					T1.REPAYAMOUNT,
					T1.PROFITBALANCE,
					T1.DISBAMOUNT,
					T1.CPZAMOUNT,
					T1.DOWNPAYMENTAMOUNT,
					T1.CLOSINGBALANCE,
					T1.PROFITFRACTION,
					T1.PRVREPAYAMOUNT,
					T1.SCHDPFTPAID,
					T1.SCHPFTPAID,
					T1.SCHDPRIPAID,
					T1.SCHPRIPAID,
					T1.SPECIFIER,
					T1.DEFSCHDDATE,
					T1.SCHDMETHOD,
					T1.MRGRATE,
					T1.CALONINDRATE,
					T1.FEECHARGEAMT,
					T1.CALCULATEDRATE,
					T1.EARLYPAIDBAL,
					T1.EARLYPAID,
					T1.REFUNDORWAIVER,
					T1.WRITEOFFPRINCIPAL,
					T1.WRITEOFFPROFIT,
					T1.ORGPFT,
					T1.ORGPRI,
					T1.ORGENDBAL,
					T1.ORGPLANPFT,
					T1.FEESCHD,
					T1.SCHDFEEPAID,
					T1.SCHDFEEOS,
					T1.INSSCHD,
					T1.SCHDINSPAID,
					T1.ADVPFTRATE,
					T1.ADVPROFIT,
					T1.ADVREPAYAMOUNT,
					T1.ADVBASERATE,
					T1.ADVMARGIN,
					T1.ADVCALRATE,
					T1.SUPLRENT,
					T1.INCRCOST,
					T1.SUPLRENTPAID,
					T1.INCRCOSTPAID,
					T1.ROLLOVERONSCHDATE,
					T1.ROLLOVERAMOUNT,
					T1.ROLLOVERAMOUNTPAID,
					T1.TDSAMOUNT,
					T1.TDSPAID,
					T1.PFTDAYSBASIS,
					T1.WRITEOFFINS,
					T1.WRITEOFFINCRCOST,
					T1.WRITEOFFSUPLRENT,
					T1.WRITEOFFSCHFEE,
					T1.INSURANCEAMT,
					T1.INSTNUMBER,
					T1.BPIORHOLIDAY,
					T1.FRQDATE,
					T1.PRESENTMENTID,
					T1.PARTIALPAIDAMT,
					T1.FEETAX,
					T1.RECALLOCK,
					T1.TDSAPPLICABLE,
					T1.SCHDPFTWAIVER,
					T1.CPZBALANCE
				FROM FINSCHEDULEDETAILS_TEMP T1
				INNER JOIN FINANCEMAIN_TEMP T2 ON T2.FINID = T1.FINID
				UNION ALL
				SELECT T2.FINID,
					T2.FINREFERENCE,
					T1.SCHSEQ,
					T1.SCHDATE,
					T1.PFTONSCHDATE,
					T1.REPAYONSCHDATE,
					T1.CPZONSCHDATE,
					T1.RVWONSCHDATE,
					T1.DISBONSCHDATE,
					T1.DOWNPAYMENTONSCHDATE,
					T1.BALANCEFORPFTCAL,
					T1.BASERATE,
					T1.SPLRATE,
					T1.ACTRATE,
					T1.NOOFDAYS,
					T1.DAYFACTOR,
					T1.PROFITCALC,
					T1.PROFITSCHD,
					T1.PRINCIPALSCHD,
					T1.REPAYAMOUNT,
					T1.PROFITBALANCE,
					T1.DISBAMOUNT,
					T1.CPZAMOUNT,
					T1.DOWNPAYMENTAMOUNT,
					T1.CLOSINGBALANCE,
					T1.PROFITFRACTION,
					T1.PRVREPAYAMOUNT,
					T1.SCHDPFTPAID,
					T1.SCHPFTPAID,
					T1.SCHDPRIPAID,
					T1.SCHPRIPAID,
					T1.SPECIFIER,
					T1.DEFSCHDDATE,
					T1.SCHDMETHOD,
					T1.MRGRATE,
					T1.CALONINDRATE,
					T1.FEECHARGEAMT,
					T1.CALCULATEDRATE,
					T1.EARLYPAIDBAL,
					T1.EARLYPAID,
					T1.REFUNDORWAIVER,
					T1.WRITEOFFPRINCIPAL,
					T1.WRITEOFFPROFIT,
					T1.ORGPFT,
					T1.ORGPRI,
					T1.ORGENDBAL,
					T1.ORGPLANPFT,
					T1.FEESCHD,
					T1.SCHDFEEPAID,
					T1.SCHDFEEOS,
					T1.INSSCHD,
					T1.SCHDINSPAID,
					T1.ADVPFTRATE,
					T1.ADVPROFIT,
					T1.ADVREPAYAMOUNT,
					T1.ADVBASERATE,
					T1.ADVMARGIN,
					T1.ADVCALRATE,
					T1.SUPLRENT,
					T1.INCRCOST,
					T1.SUPLRENTPAID,
					T1.INCRCOSTPAID,
					T1.ROLLOVERONSCHDATE,
					T1.ROLLOVERAMOUNT,
					T1.ROLLOVERAMOUNTPAID,
					T1.TDSAMOUNT,
					T1.TDSPAID,
					T1.PFTDAYSBASIS,
					T1.WRITEOFFINS,
					T1.WRITEOFFINCRCOST,
					T1.WRITEOFFSUPLRENT,
					T1.WRITEOFFSCHFEE,
					T1.INSURANCEAMT,
					T1.INSTNUMBER,
					T1.BPIORHOLIDAY,
					T1.FRQDATE,
					T1.PRESENTMENTID,
					T1.PARTIALPAIDAMT,
					T1.FEETAX,
					T1.RECALLOCK,
					T1.TDSAPPLICABLE,
					T1.SCHDPFTWAIVER,
					T1.CPZBALANCE
				FROM FINSCHEDULEDETAILS T1
				INNER JOIN FINANCEMAIN T2 ON T2.FINID = T1.FINID
				WHERE NOT EXISTS (SELECT 1 FROM FINSCHEDULEDETAILS_TEMP
					WHERE FINSCHEDULEDETAILS_TEMP.FINID = T1.FINID)
			]]>
		</createView>
	</changeSet>


	<changeSet id="SDV_2_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finscheduledetails_view');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="SDV_3_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finscheduledetails_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="SDV_3" author="Gopal.p">
		<createView viewName="FINSCHEDULEDETAILS_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T2.FINID,
					T2.FINREFERENCE,
					T1.SCHSEQ,
					T1.SCHDATE,
					T1.PFTONSCHDATE,
					T1.REPAYONSCHDATE,
					T1.CPZONSCHDATE,
					T1.RVWONSCHDATE,
					T1.DISBONSCHDATE,
					T1.DOWNPAYMENTONSCHDATE,
					T1.BALANCEFORPFTCAL,
					T1.BASERATE,
					T1.SPLRATE,
					T1.ACTRATE,
					T1.NOOFDAYS,
					T1.DAYFACTOR,
					T1.PROFITCALC,
					T1.PROFITSCHD,
					T1.PRINCIPALSCHD,
					T1.REPAYAMOUNT,
					T1.PROFITBALANCE,
					T1.DISBAMOUNT,
					T1.CPZAMOUNT,
					T1.DOWNPAYMENTAMOUNT,
					T1.CLOSINGBALANCE,
					T1.PROFITFRACTION,
					T1.PRVREPAYAMOUNT,
					T1.SCHDPFTPAID,
					T1.SCHPFTPAID,
					T1.SCHDPRIPAID,
					T1.SCHPRIPAID,
					T1.SPECIFIER,
					T1.DEFSCHDDATE,
					T1.SCHDMETHOD,
					T1.MRGRATE,
					T1.CALONINDRATE,
					T1.FEECHARGEAMT,
					T1.CALCULATEDRATE,
					T1.EARLYPAIDBAL,
					T1.EARLYPAID,
					T1.REFUNDORWAIVER,
					T1.WRITEOFFPRINCIPAL,
					T1.WRITEOFFPROFIT,
					T1.ORGPFT,
					T1.ORGPRI,
					T1.ORGENDBAL,
					T1.ORGPLANPFT,
					T1.FEESCHD,
					T1.SCHDFEEPAID,
					T1.SCHDFEEOS,
					T1.INSSCHD,
					T1.SCHDINSPAID,
					T1.ADVPFTRATE,
					T1.ADVPROFIT,
					T1.ADVREPAYAMOUNT,
					T1.ADVBASERATE,
					T1.ADVMARGIN,
					T1.ADVCALRATE,
					T1.SUPLRENT,
					T1.INCRCOST,
					T1.SUPLRENTPAID,
					T1.INCRCOSTPAID,
					T1.ROLLOVERONSCHDATE,
					T1.ROLLOVERAMOUNT,
					T1.ROLLOVERAMOUNTPAID,
					T1.TDSAMOUNT,
					T1.TDSPAID,
					T1.PFTDAYSBASIS,
					T1.WRITEOFFINS,
					T1.WRITEOFFINCRCOST,
					T1.WRITEOFFSUPLRENT,
					T1.WRITEOFFSCHFEE,
					T1.INSURANCEAMT,
					T1.INSTNUMBER,
					T1.BPIORHOLIDAY,
					T1.FRQDATE,
					T1.PRESENTMENTID,
					T1.PARTIALPAIDAMT,
					T1.FEETAX,
					T1.RECALLOCK,
					T1.TDSAPPLICABLE,
					T1.SCHDPFTWAIVER,
					T1.CPZBALANCE
				FROM FINSCHEDULEDETAILS T1
				INNER JOIN FINANCEMAIN T2 ON T2.FINID = T1.FINID
			]]>
		</createView>
	</changeSet>

	<changeSet id="SDV_3_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finscheduledetails_aview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="SDV_4_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finscheduledetails_iview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="SDV_4" author="Gopal.p">
		<createView viewName="FINSCHEDULEDETAILS_IVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T.REPAYACCOUNTID,
					T.FINTYPE,
					T.FINID,
					T.FINREFERENCE,
					T.SCHDATE,
					T.FINCCY,
					T.REPAYAMOUNT
				   FROM (SELECT row_number() OVER (PARTITION BY T1.FINID ORDER BY T1.SCHDATE) ROW_NUM,
							T2.REPAYACCOUNTID, T2.FINTYPE, T2.FINID, T1.SCHDATE, T2.FINREFERENCE, T2.FINCCY, T1.REPAYAMOUNT
						FROM FINSCHEDULEDETAILS T1
						JOIN FINANCEMAIN T2 ON T2.FINID = T1.FINID
						WHERE (T1.PROFITSCHD - T1.SCHDPFTPAID + T1.PRINCIPALSCHD - T1.SCHDPRIPAID) <> 0 AND
						T1.SCHDATE > (to_date((SELECT SYSPARMVALUE FROM SMTPARAMETERS WHERE SYSPARMCODE = 'APP_DATE'), 'yyyy-MM-dd'))) t
				  WHERE t.ROW_NUM = 1
			]]>
		</createView>
	</changeSet>

	<changeSet id="SDV_4_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finscheduledetails_iview');	
			]]>
		</sql>
	</changeSet>

	<!-- (SDV) :: Finance Schedule detail Views handle in single place end -->

	<!-- (FDDV) :: FIN DISBURSEMENT DETAILS Views handle in single place start -->

	<changeSet id="FDDV_1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'findisbursementdetails_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FDDV_1" author="Gopal.p">
		<createView viewName="FINDISBURSEMENTDETAILS_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T3.FINID,
					T3.FINREFERENCE,
					T1.DISBDATE,
					T1.DISBSEQ,
					T1.DISBDESC,
					T1.DISBACCOUNTID,
					T1.DISBAMOUNT,
					T1.DISBREQDATE,
					T1.DISBDISBURSED,
					T1.DISBISACTIVE,
					T1.DISBREMARKS,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.FEECHARGEAMT,
					T1.DISBSTATUS,
					T1.DISBTYPE,
					T1.DISBCLAIM,
					T1.DISBEXPTYPE,
					T1.DISBRETPERC,
					T1.DISBRETAMOUNT,
					T1.AUTODISB,
					T1.NETADVDUE,
					T1.NETRETDUE,
					T1.DISBRETPAID,
					T1.RETPAIDDATE,
					T2.EXPENCETYPENAME LOVDESCDISBEXPTYPE,
					T1.CONSULTFEEFRQ,
					T1.CONSULTFEESTARTDATE,
					T1.CONSULTFEEENDDATE,
					T1.CONTRACTORID,
					T1.INSURANCEAMT,
					T1.INSTRUCTIONUID,
					T1.QUICKDISB,
					T1.InstCalReq,
					T1.LINKEDDISBID
				FROM FINDISBURSEMENTDETAILS_TEMP T1
				INNER JOIN FINANCEMAIN_TEMP T3 ON T3.FINID = T1.FINID
				LEFT JOIN AMTEXPENSETYPE T2 ON T2.EXPENCETYPEID = T1.DISBEXPTYPE
				UNION ALL
				SELECT T3.FINID,
					T3.FINREFERENCE,
					T1.DISBDATE,
					T1.DISBSEQ,
					T1.DISBDESC,
					T1.DISBACCOUNTID,
					T1.DISBAMOUNT,
					T1.DISBREQDATE,
					T1.DISBDISBURSED,
					T1.DISBISACTIVE,
					T1.DISBREMARKS,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.FEECHARGEAMT,
					T1.DISBSTATUS,
					T1.DISBTYPE,
					T1.DISBCLAIM,
					T1.DISBEXPTYPE,
					T1.DISBRETPERC,
					T1.DISBRETAMOUNT,
					T1.AUTODISB,
					T1.NETADVDUE,
					T1.NETRETDUE,
					T1.DISBRETPAID,
					T1.RETPAIDDATE,
					T2.EXPENCETYPENAME LOVDESCDISBEXPTYPE,
					T1.CONSULTFEEFRQ,
					T1.CONSULTFEESTARTDATE,
					T1.CONSULTFEEENDDATE,
					T1.CONTRACTORID,
					T1.INSURANCEAMT,
					T1.INSTRUCTIONUID,
					T1.QUICKDISB,
					T1.InstCalReq,
					T1.LINKEDDISBID
				FROM FINDISBURSEMENTDETAILS T1
				INNER JOIN FINANCEMAIN_TEMP T3 ON T3.FINID = T1.FINID
				LEFT JOIN AMTEXPENSETYPE T2 ON T2.EXPENCETYPEID = T1.DISBEXPTYPE
				WHERE NOT (EXISTS (SELECT 1 FROM FINDISBURSEMENTDETAILS_TEMP
					WHERE FINDISBURSEMENTDETAILS_TEMP.FINID = T1.FINID))
			]]>
		</createView>
	</changeSet>

	<changeSet id="FDDV_1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'findisbursementdetails_view');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="FDDV_2_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'findisbursementdetails_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FDDV_2" author="Gopal.p">
		<createView viewName="FINDISBURSEMENTDETAILS_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T3.FINID,
					T3.FINREFERENCE,
					T1.DISBDATE,
					T1.DISBSEQ,
					T1.DISBDESC,
					T1.DISBACCOUNTID,
					T1.DISBAMOUNT,
					T1.DISBREQDATE,
					T1.DISBDISBURSED,
					T1.DISBISACTIVE,
					T1.DISBREMARKS,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.FEECHARGEAMT,
					T1.DISBSTATUS,
					T1.DISBTYPE,
					T1.DISBCLAIM,
					T1.DISBEXPTYPE,
					T1.DISBRETPERC,
					T1.DISBRETAMOUNT,
					T1.AUTODISB,
					T1.NETADVDUE,
					T1.NETRETDUE,
					T1.DISBRETPAID,
					T1.RETPAIDDATE,
					T2.EXPENCETYPENAME LOVDESCDISBEXPTYPE,
					T1.CONSULTFEEFRQ,
					T1.CONSULTFEESTARTDATE,
					T1.CONSULTFEEENDDATE,
					T1.CONTRACTORID,
					T1.INSURANCEAMT,
					T1.INSTRUCTIONUID,
					T1.QUICKDISB,
					T1.INSTCALREQ,
					T1.LINKEDDISBID
				FROM FINDISBURSEMENTDETAILS_TEMP T1
				INNER JOIN FINANCEMAIN_TEMP T3 ON T3.FINID = T1.FINID
				LEFT JOIN AMTEXPENSETYPE T2 ON T2.EXPENCETYPEID = T1.DISBEXPTYPE
			]]>
		</createView>
	</changeSet>

	<changeSet id="FDDV_2_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'findisbursementdetails_tview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="FDDV_3_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'findisbursementdetails_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FDDV_3" author="Gopal.p">
		<createView viewName="FINDISBURSEMENTDETAILS_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T3.FINID,
					T3.FINREFERENCE,
					T1.DISBDATE,
					T1.DISBSEQ,
					T1.DISBDESC,
					T1.DISBACCOUNTID,
					T1.DISBAMOUNT,
					T1.DISBREQDATE,
					T1.DISBDISBURSED,
					T1.DISBISACTIVE,
					T1.DISBREMARKS,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.FEECHARGEAMT,
					T1.VERSION,
					T1.DISBSTATUS,
					T1.DISBTYPE,
					T1.DISBCLAIM,
					T1.DISBEXPTYPE,
					T1.DISBRETPERC,
					T1.DISBRETAMOUNT,
					T1.AUTODISB,
					T1.NETADVDUE,
					T1.NETRETDUE,
					T1.DISBRETPAID,
					T1.RETPAIDDATE,
					T2.EXPENCETYPENAME LOVDESCDISBEXPTYPE,
					T1.CONSULTFEEFRQ,
					T1.CONSULTFEESTARTDATE,
					T1.CONSULTFEEENDDATE,
					T1.CONTRACTORID,
					T1.INSURANCEAMT,
					T1.INSTRUCTIONUID,
					T1.QUICKDISB,
					T1.INSTCALREQ,
					T1.LINKEDDISBID
				FROM FINDISBURSEMENTDETAILS T1
				INNER JOIN FINANCEMAIN T3 ON T3.FINID = T1.FINID
				LEFT JOIN AMTEXPENSETYPE T2 ON T2.EXPENCETYPEID = T1.DISBEXPTYPE
			]]>
		</createView>
	</changeSet>

	<changeSet id="FDDV_3_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'findisbursementdetails_aview');	
			]]>
		</sql>
	</changeSet>

	<!-- (FDDV) :: FIN DISBURSEMENT DETAILS Views handle in single place end -->

	<!-- (PMV) :: PMAY Views handle in single place start -->

	<changeSet id="PMV_1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'pmay_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="PMV_1" author="Gopal.p">
		<createView viewName="PMAY_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T2.FINID,
					T2.FINREFERENCE,
					T1.NOTIFIEDTOWN,
					T1.TOWNCODE,
					T4.TOWNNAME,
					T1.CENTRALASSISTANCE,
					T1.OWNEDHOUSE,
					T1.CARPETAREA,
					T1.HOUSEHOLDANNINCOME,
					T1.BALANCETRANSFER,
					T1.PRIMARYAPPLICANT,
					T1.TRANSACTIONFINTYPE,
					T1.PRODUCT,
					T1.PRPRTYOWNEDBYWOMEN,
					T1.WATERSUPPLY,
					T1.DRINAGE,
					T1.ELECTRICITY,
					T1.PMAYCATEGORY,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					T2.FINTYPE
				FROM PMAY_TEMP T1
				INNER JOIN FINANCEMAIN_TEMP T2 ON T2.FINID = T1.FINID
				INNER JOIN CUSTOMERS T3 ON T3.CUSTID =T2.CUSTID
				LEFT JOIN TOWNCODE T4 ON T4.TOWNCODE = T1.TOWNCODE
				WHERE T2.FINISACTIVE = 1
       			UNION ALL 
       			SELECT T2.FINID,
					T2.FINREFERENCE,
					T1.NOTIFIEDTOWN,
					T1.TOWNCODE,
					T4.TOWNNAME,
					T1.CENTRALASSISTANCE,
					T1.OWNEDHOUSE,
					T1.CARPETAREA,
					T1.HOUSEHOLDANNINCOME,
					T1.BALANCETRANSFER,
					T1.PRIMARYAPPLICANT,
					T1.TRANSACTIONFINTYPE,
					T1.PRODUCT,
					T1.PRPRTYOWNEDBYWOMEN,
					T1.WATERSUPPLY,
					T1.DRINAGE,
					T1.ELECTRICITY,
					T1.PMAYCATEGORY,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					T2.FINTYPE
				FROM PMAY T1
      			INNER JOIN FINANCEMAIN T2 ON T2.FINID = T1.FINID
				INNER JOIN CUSTOMERS T3 ON T3.CUSTID = T2.CUSTID
				LEFT JOIN TOWNCODE T4 ON T4.TOWNCODE = T1.TOWNCODE
      			WHERE NOT EXISTS (SELECT 1 FROM PMAY_TEMP WHERE FINID = T2.FINID) AND T2.FINISACTIVE = 1
			]]>
		</createView>
	</changeSet>

	<changeSet id="PMV_1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'pmay_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="PMV_2_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'pmay_lview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="PMV_2" author="Gopal.p">
		<createView viewName="PMAY_LVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T2.FINID,
					T2.FINREFERENCE,
					T1.NOTIFIEDTOWN,
					T1.TOWNCODE,
					T4.TOWNNAME,
					T1.CENTRALASSISTANCE,
					T1.OWNEDHOUSE,
					T1.CARPETAREA,
					T1.HOUSEHOLDANNINCOME,
					T1.BALANCETRANSFER,
					T1.PRIMARYAPPLICANT,
					T1.TRANSACTIONFINTYPE,
					T1.PRODUCT,
					T1.PRPRTYOWNEDBYWOMEN,
					T1.WATERSUPPLY,
					T1.DRINAGE,
					T1.ELECTRICITY,
					T1.PMAYCATEGORY,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					T2.FINTYPE
				FROM PMAY_TEMP T1
				JOIN FINANCEMAIN T2 ON T2.FINID = T1.FINID
				JOIN CUSTOMERS T3 ON T3.CUSTID = T2.CUSTID
				LEFT JOIN TOWNCODE T4 ON T4.TOWNCODE = T1.TOWNCODE
				WHERE T2.FINISACTIVE = 1
				UNION ALL
				SELECT T2.FINID,
					T2.FINREFERENCE,
					T1.NOTIFIEDTOWN,
					T1.TOWNCODE,
					T4.TOWNNAME,
					T1.CENTRALASSISTANCE,
					T1.OWNEDHOUSE,
					T1.CARPETAREA,
					T1.HOUSEHOLDANNINCOME,
					T1.BALANCETRANSFER,
					T1.PRIMARYAPPLICANT,
					T1.TRANSACTIONFINTYPE,
					T1.PRODUCT,
					T1.PRPRTYOWNEDBYWOMEN,
					T1.WATERSUPPLY,
					T1.DRINAGE,
					T1.ELECTRICITY,
					T1.PMAYCATEGORY,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					T2.FINTYPE
				FROM PMAY T1
				JOIN FINANCEMAIN T2 ON T2.FINID = T1.FINID
				JOIN CUSTOMERS T3 ON T3.CUSTID = T2.CUSTID
				LEFT JOIN TOWNCODE T4 ON T4.TOWNCODE = T1.TOWNCODE
				WHERE NOT EXISTS (SELECT 1 FROM PMAY_TEMP WHERE PMAY_TEMP.FINID = T2.FINID) AND T2.FINISACTIVE = 1
			]]>
		</createView>
	</changeSet>

	<changeSet id="PMV_2_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'pmay_lview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="PMV_3_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'pmay_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="PMV_3" author="Gopal.p">
		<createView viewName="PMAY_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T2.FINID,
					T2.FINREFERENCE,
					T1.NOTIFIEDTOWN,
					T1.TOWNCODE,
					T4.TOWNNAME,
					T1.CENTRALASSISTANCE,
					T1.OWNEDHOUSE,
					T1.CARPETAREA,
					T1.HOUSEHOLDANNINCOME,
					T1.BALANCETRANSFER,
					T1.PRIMARYAPPLICANT,
					T1.TRANSACTIONFINTYPE,
					T1.PRODUCT,
					T1.PRPRTYOWNEDBYWOMEN,
					T1.WATERSUPPLY,
					T1.DRINAGE,
					T1.ELECTRICITY,
					T1.PMAYCATEGORY,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					T2.FINTYPE
				FROM PMAY T1
				JOIN FINANCEMAIN T2 ON T2.FINID = T1.FINID
				JOIN CUSTOMERS T3 ON T3.CUSTID = T2.CUSTID
				LEFT JOIN TOWNCODE T4 ON T4.TOWNCODE = T1.TOWNCODE
			]]>
		</createView>
	</changeSet>

	<changeSet id="PMV_3_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'pmay_aview');	
			]]>
		</sql>
	</changeSet>

	<!-- (PMV) :: PMAY Views handle in single place end -->

	<!-- (SSDV) :: Subvention Details and Subvention Schedule Detail Views handle in single place start -->

	<changeSet id="SSDV_1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'subventiondetails_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="SSDV_1" author="Gopal.p">
		<createView viewName="SUBVENTIONDETAILS_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T2.FINID,
					T2.FINREFERENCE,
					T1.METHOD, 
					T1.TYPE, 
					T1.RATE, 
					T1.PERIODRATE, 
					T1.DISCOUNTRATE, 
					T1.TENURE, 
					T1.STARTDATE, 
					T1.ENDDATE,		
					T1.VERSION, 
					T1.LASTMNTBY, 
					T1.LASTMNTON,
					T1.RECORDSTATUS, 
					T1.ROLECODE, 
					T1.NEXTROLECODE, 
					T1.TASKID, 
					T1.NEXTTASKID, 
					T1.RECORDTYPE, 
					T1.WORKFLOWID
				FROM SUBVENTIONDETAILS T1
				INNER JOIN FINANCEMAIN T2 ON T2.FINID = T1.FINID
			]]>
		</createView>
	</changeSet>

	<changeSet id="SSDV_1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'subventiondetails_aview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="SSDV_2_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'subventiondetails_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="SSDV_2" author="Gopal.p">
		<createView viewName="SUBVENTIONDETAILS_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T2.FINID,
					T2.FINREFERENCE,
					T1.METHOD, 
					T1.TYPE, 
					T1.RATE, 
					T1.PERIODRATE, 
					T1.DISCOUNTRATE, 
					T1.TENURE, 
					T1.STARTDATE, 
					T1.ENDDATE,		
					T1.VERSION, 
					T1.LASTMNTBY, 
					T1.LASTMNTON,
					T1.RECORDSTATUS, 
					T1.ROLECODE, 
					T1.NEXTROLECODE, 
					T1.TASKID, 
					T1.NEXTTASKID, 
					T1.RECORDTYPE, 
					T1.WORKFLOWID
				FROM SUBVENTIONDETAILS_TEMP T1
				INNER JOIN FINANCEMAIN_TEMP T2 ON T2.FINID = T1.FINID
				UNION ALL
				SELECT T2.FINID,
					T2.FINREFERENCE,
					T1.METHOD, 
					T1.TYPE, 
					T1.RATE, 
					T1.PERIODRATE, 
					T1.DISCOUNTRATE, 
					T1.TENURE, 
					T1.STARTDATE, 
					T1.ENDDATE,		
					T1.VERSION, 
					T1.LASTMNTBY, 
					T1.LASTMNTON,
					T1.RECORDSTATUS, 
					T1.ROLECODE, 
					T1.NEXTROLECODE, 
					T1.TASKID, 
					T1.NEXTTASKID, 
					T1.RECORDTYPE, 
					T1.WORKFLOWID
				FROM SUBVENTIONDETAILS T1 
				INNER JOIN FINANCEMAIN T2 ON T2.FINID = T1.FINID
				WHERE NOT EXISTS (SELECT 1 FROM SUBVENTIONDETAILS_TEMP WHERE FINID = T1.FINID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="SSDV_2_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'subventiondetails_view');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="SSDV_3_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'subventionscheduledetail_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="SSDV_3" author="Gopal.p">
		<createView viewName="SUBVENTIONSCHEDULEDETAIL_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T2.FINID,
					T2.FINREFERENCE,
					T1.DISBSEQID, 
					T1.SCHDATE, 
					T1.NOOFDAYS, 
					T1.DISCOUNTEDPFT, 
					T1.PRESENTVALUE, 
					T1.FUTUREVALUE, 
					T1.CLOSINGBAL
				FROM SUBVENTIONSCHEDULEDETAIL T1
				INNER JOIN FINANCEMAIN T2 ON T2.FINID = T1.FINID				
			]]>
		</createView>
	</changeSet>

	<changeSet id="SSDV_3_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'subventionscheduledetail_aview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="SSDV_4_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'subventionscheduledetail_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="SSDV_4" author="Gopal.p">
		<createView viewName="SUBVENTIONSCHEDULEDETAIL_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T2.FINID,
					T2.FINREFERENCE, 
					T1.DISBSEQID, 
					T1.SCHDATE, 
					T1.NOOFDAYS, 
					T1.DISCOUNTEDPFT, 
					T1.PRESENTVALUE, 
					T1.FUTUREVALUE, 
					T1.CLOSINGBAL
				FROM SUBVENTIONSCHEDULEDETAIL_TEMP T1	
				INNER JOIN FINANCEMAIN_TEMP T2 ON T2.FINID = T1.FINID					
			]]>
		</createView>
	</changeSet>

	<changeSet id="SSDV_4_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'subventionscheduledetail_tview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="SSDV_5_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'subventionscheduledetail_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="SSDV_5" author="Gopal.p">
		<createView viewName="SUBVENTIONSCHEDULEDETAIL_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T2.FINID,
					T2.FINREFERENCE,
			 		T1.DISBSEQID,
			 		T1.SCHDATE,
			 		T1.NOOFDAYS, 
			 		T1.DISCOUNTEDPFT, 
			 		T1.PRESENTVALUE, 
			 		T1.FUTUREVALUE, 
			 		T1.CLOSINGBAL
				FROM SUBVENTIONSCHEDULEDETAIL_TEMP T1
				INNER JOIN FINANCEMAIN_TEMP T2 ON T2.FINID = T1.FINID	
				UNION ALL		 
				SELECT T2.FINID,
					T2.FINREFERENCE,
					T1.DISBSEQID,
					T1.SCHDATE, 
					T1.NOOFDAYS, 
					T1.DISCOUNTEDPFT, 
					T1.PRESENTVALUE, 
					T1.FUTUREVALUE, 
					T1.CLOSINGBAL
				FROM SUBVENTIONSCHEDULEDETAIL T1
				INNER JOIN FINANCEMAIN T2 ON T2.FINID = T1.FINID	
				WHERE NOT EXISTS (SELECT 1 FROM SUBVENTIONSCHEDULEDETAIL_TEMP WHERE FINID = T1.FINID AND DISBSEQID = T1.DISBSEQID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="SSDV_5_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'subventionscheduledetail_view');	
			]]>
		</sql>
	</changeSet>

	<!-- (SSDV) :: Subvention Details and Subvention Schedule Detail Views handle in single place end -->

	<!-- (FRIV) :: Finance Repay Instruction Views handle in single place start -->

	<changeSet id="FRIV_1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finrepayinstruction_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FRIV_1" author="Gopal.p">
		<createView viewName="FINREPAYINSTRUCTION_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINID,
					T1.FINREFERENCE,
					T1.REPAYDATE,
					T1.REPAYAMOUNT,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.REPAYSCHDMETHOD
				FROM FINREPAYINSTRUCTION T1
			]]>
		</createView>
	</changeSet>

	<changeSet id="FRIV_1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finrepayinstruction_aview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="FRIV_2_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finrepayinstruction_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FRIV_2" author="Gopal.p">
		<createView viewName="FINREPAYINSTRUCTION_TVIEW" replaceIfExists="true">
			<![CDATA[
				 SELECT T1.FINID,
					T1.FINREFERENCE,
					T1.REPAYDATE,
					T1.REPAYAMOUNT,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.REPAYSCHDMETHOD
				FROM FINREPAYINSTRUCTION_TEMP T1
			]]>
		</createView>
	</changeSet>

	<changeSet id="FRIV_2_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finrepayinstruction_tview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="FRIV_3_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finrepayinstruction_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FRIV_3" author="Gopal.p">
		<createView viewName="FINREPAYINSTRUCTION_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINID,
					T1.FINREFERENCE,
					T1.REPAYDATE,
					T1.REPAYAMOUNT,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.REPAYSCHDMETHOD
				FROM FINREPAYINSTRUCTION_TEMP T1
				UNION ALL
				SELECT T1.FINID,
					T1.FINREFERENCE,
					T1.REPAYDATE,
					T1.REPAYAMOUNT,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.REPAYSCHDMETHOD
				   FROM FINREPAYINSTRUCTION T1
				WHERE NOT EXISTS (SELECT 1 FROM FINREPAYINSTRUCTION_TEMP
					WHERE FINREPAYINSTRUCTION_TEMP.FINID = T1.FINID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="FRIV_3_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finrepayinstruction_view');	
			]]>
		</sql>
	</changeSet>

	<!-- (FRIV) :: Finance Repay Instruction Views handle in single place end -->

	<!-- (FFDV) :: Finance Fee Detail Views handle in single place start -->

	<changeSet id="FFDV_1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finfeedetail_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FFDV_1" author="Gopal.p">
		<createView viewName="FINFEEDETAIL_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FEEID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.ORIGINATIONFEE,
					T1.FINEVENT,
					T1.FEETYPEID,
					T1.FEESEQ,
					T1.FEEORDER,
					T1.CALCULATEDAMOUNT,
					T1.ACTUALAMOUNT,
					T1.WAIVEDAMOUNT,
					T1.PAIDAMOUNT,
					T1.FEESCHEDULEMETHOD,
					T1.TERMS,
					T1.REMAININGFEE,
					T1.PAYMENTREF,
					T1.CALCULATIONTYPE,
					T1.RULECODE,
					T1.FIXEDAMOUNT,
					T1.PERCENTAGE,
					T1.CALCULATEON,
					T1.ALWDEVIATION,
					T1.MAXWAIVERPERC,
					T1.ALWMODIFYFEE,
					T1.ALWMODIFYFEESCHDMTHD,
					T1.VASREFERENCE,
					T1.TAXAPPLICABLE,
					T1.TAXCOMPONENT,
					T1.PAIDAMOUNTORIGINAL,
					T1.PAIDAMOUNTGST,
					T1.NETAMOUNTORIGINAL,
					T1.NETAMOUNTGST,
					T1.NETAMOUNT,
					T1.REMAININGFEEORIGINAL,
					T1.REMAININGFEEGST,
					T1.ACTUALAMOUNTORIGINAL,
					T1.ACTUALAMOUNTGST,
					T1.FEEAMZ,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.TRANSACTIONID,
					T1.WORKFLOWID,
					T2.FEETYPECODE,
					T2.FEETYPEDESC,
					T1.STATUS,
					T1.REFUNDABLE,
					T1.INSTRUCTIONUID,
					T1.ACTPERCENTAGE,
					T1.WAIVEDGST,
					T1.REFERENCEID,
					T1.TAXHEADERID,
					T1.PAIDTDS,
					T1.REMTDS,
					T1.NETTDS,
					T2.TDSREQ,
					T3.PRODUCTCODE VASPRODUCTCODE
				FROM FINFEEDETAIL T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
				LEFT JOIN VASRECORDING T3 ON T1.VASREFERENCE = T3.VASREFERENCE
			]]>
		</createView>
	</changeSet>

	<changeSet id="FFDV_1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finfeedetail_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FFDV_2_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finfeedetail_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FFDV_2" author="Gopal.p">
		<createView viewName="FINFEEDETAIL_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FEEID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.ORIGINATIONFEE,
					T1.FINEVENT,
					T1.FEETYPEID,
					T1.FEESEQ,
					T1.FEEORDER,
					T1.CALCULATEDAMOUNT,
					T1.ACTUALAMOUNT,
					T1.WAIVEDAMOUNT,
					T1.PAIDAMOUNT,
					T1.FEESCHEDULEMETHOD,
					T1.TERMS,
					T1.REMAININGFEE,
					T1.PAYMENTREF,
					T1.CALCULATIONTYPE,
					T1.RULECODE,
					T1.FIXEDAMOUNT,
					T1.PERCENTAGE,
					T1.CALCULATEON,
					T1.ALWDEVIATION,
					T1.MAXWAIVERPERC,
					T1.ALWMODIFYFEE,
					T1.ALWMODIFYFEESCHDMTHD,
					T1.VASREFERENCE,
					T1.STATUS,
					T1.TAXAPPLICABLE,
					T1.TAXCOMPONENT,
					T1.PAIDAMOUNTORIGINAL,
					T1.PAIDAMOUNTGST,
					T1.NETAMOUNTORIGINAL,
					T1.NETAMOUNTGST,
					T1.NETAMOUNT,
					T1.REMAININGFEEORIGINAL,
					T1.REMAININGFEEGST,
					T1.ACTUALAMOUNTORIGINAL,
					T1.ACTUALAMOUNTGST,
					T1.FEEAMZ,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.TRANSACTIONID,
					T1.WORKFLOWID,
					T2.FEETYPECODE,
					T2.FEETYPEDESC,
					T1.REFUNDABLE,
					T1.INSTRUCTIONUID,
					T1.ACTPERCENTAGE,
					T1.WAIVEDGST,
					T1.REFERENCEID,
					T1.TAXHEADERID,
					T1.PAIDTDS,
					T1.REMTDS,
					T1.NETTDS,
					T2.TDSREQ,
					T3.PRODUCTCODE VASPRODUCTCODE
				FROM FINFEEDETAIL_TEMP T1
				INNER JOIN FINANCEMAIN_TEMP FM ON FM.FINID = T1.FINID
				LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
				LEFT JOIN VASRECORDING_TEMP T3 ON T1.VASREFERENCE = T3.VASREFERENCE
			]]>
		</createView>
	</changeSet>

	<changeSet id="FFDV_2_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finfeedetail_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FFDV_3_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finfeedetail_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FFDV_3" author="saisandeep.b">
		<createView viewName="FINFEEDETAIL_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FEEID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.ORIGINATIONFEE,
					T1.FINEVENT,
					T1.FEETYPEID,
					T1.FEESEQ,
					T1.FEEORDER,
					T1.CALCULATEDAMOUNT,
					T1.ACTUALAMOUNT,
					T1.WAIVEDAMOUNT,
					T1.PAIDAMOUNT,
					T1.FEESCHEDULEMETHOD,
					T1.TERMS,
					T1.REMAININGFEE,
					T1.PAYMENTREF,
					T1.CALCULATIONTYPE,
					T1.RULECODE,
					T1.FIXEDAMOUNT,
					T1.PERCENTAGE,
					T1.CALCULATEON,
					T1.ALWDEVIATION,
					T1.MAXWAIVERPERC,
					T1.ALWMODIFYFEE,
					T1.ALWMODIFYFEESCHDMTHD,
					T1.VASREFERENCE,
					T1.STATUS,
					T1.TAXAPPLICABLE,
					T1.TAXCOMPONENT,
					T1.PAIDAMOUNTORIGINAL,
					T1.PAIDAMOUNTGST,
					T1.NETAMOUNTORIGINAL,
					T1.NETAMOUNTGST,
					T1.NETAMOUNT,
					T1.REMAININGFEEORIGINAL,
					T1.REMAININGFEEGST,
					T1.ACTUALAMOUNTORIGINAL,
					T1.ACTUALAMOUNTGST,
					T1.FEEAMZ,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.TRANSACTIONID,
					T1.WORKFLOWID,
					T2.FEETYPECODE,
					T2.FEETYPEDESC,
					T1.REFUNDABLE,
					T1.INSTRUCTIONUID,
					T1.ACTPERCENTAGE,
					T1.WAIVEDGST,
					T1.REFERENCEID,
					T1.TAXHEADERID,
					T1.PAIDTDS,
					T1.REMTDS,
					T1.NETTDS,
					T2.TDSREQ,
					T3.PRODUCTCODE VASPRODUCTCODE
				FROM FINFEEDETAIL_TEMP T1
				INNER JOIN FINANCEMAIN_TEMP FM ON FM.FINID = T1.FINID
				LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
				LEFT JOIN VASRECORDING_TEMP T3 ON T1.VASREFERENCE = T3.VASREFERENCE
				UNION ALL
				SELECT T1.FEEID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.ORIGINATIONFEE,
					T1.FINEVENT,
					T1.FEETYPEID,
					T1.FEESEQ,
					T1.FEEORDER,
					T1.CALCULATEDAMOUNT,
					T1.ACTUALAMOUNT,
					T1.WAIVEDAMOUNT,
					T1.PAIDAMOUNT,
					T1.FEESCHEDULEMETHOD,
					T1.TERMS,
					T1.REMAININGFEE,
					T1.PAYMENTREF,
					T1.CALCULATIONTYPE,
					T1.RULECODE,
					T1.FIXEDAMOUNT,
					T1.PERCENTAGE,
					T1.CALCULATEON,
					T1.ALWDEVIATION,
					T1.MAXWAIVERPERC,
					T1.ALWMODIFYFEE,
					T1.ALWMODIFYFEESCHDMTHD,
					T1.VASREFERENCE,
					T1.STATUS,
					T1.TAXAPPLICABLE,
					T1.TAXCOMPONENT,
					T1.PAIDAMOUNTORIGINAL,
					T1.PAIDAMOUNTGST,
					T1.NETAMOUNTORIGINAL,
					T1.NETAMOUNTGST,
					T1.NETAMOUNT,
					T1.REMAININGFEEORIGINAL,
					T1.REMAININGFEEGST,
					T1.ACTUALAMOUNTORIGINAL,
					T1.ACTUALAMOUNTGST,
					T1.FEEAMZ,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.TRANSACTIONID,
					T1.WORKFLOWID,
					T2.FEETYPECODE,
					T2.FEETYPEDESC,
					T1.REFUNDABLE,
					T1.INSTRUCTIONUID,
					T1.ACTPERCENTAGE,
					T1.WAIVEDGST,
					T1.REFERENCEID,
					T1.TAXHEADERID,
					T1.PAIDTDS,
					T1.REMTDS,
					T1.NETTDS,
					T2.TDSREQ,
					T3.PRODUCTCODE VASPRODUCTCODE
				FROM FINFEEDETAIL T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID 
				LEFT JOIN VASRECORDING T3 ON T1.VASREFERENCE = T3.VASREFERENCE
				WHERE NOT EXISTS (SELECT 1 FROM FINFEEDETAIL_TEMP WHERE FINFEEDETAIL_TEMP.FEEID = T1.FEEID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="FFDV_3_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finfeedetail_view');
			]]>
		</sql>
	</changeSet>

	<!-- (FFDV) :: Finance Fee Detail Views handle in single place end -->

	<!-- (FOPR) :: Over due penalty rate Views handle in single place start -->

	<changeSet id="FOPR_1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finodpenaltyrates_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FOPR_1" author="Gopal.p">
		<createView viewName="FINODPENALTYRATES_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FINID,
					FINREFERENCE,
					FINEFFECTDATE,
					APPLYODPENALTY,
					ODINCGRCDAYS,
					ODCHARGETYPE,
					ODGRACEDAYS,
					ODCHARGECALON,
					ODCHARGEAMTORPERC,
					ODALLOWWAIVER,
					ODMAXWAIVERPERC,
					ODRULECODE,
					ODMINCAPAMOUNT,
					ODTDSREQ
				FROM FINODPENALTYRATES
			]]>
		</createView>
	</changeSet>

	<changeSet id="FOPR_1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finodpenaltyrates_aview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="FOPR_2_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finodpenaltyrates_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FOPR_2" author="Gopal.p">
		<createView viewName="FINODPENALTYRATES_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FINID,
					FINREFERENCE,
					FINEFFECTDATE,
					APPLYODPENALTY,
					ODINCGRCDAYS,
					ODCHARGETYPE,
					ODGRACEDAYS,
					ODCHARGECALON,
					ODCHARGEAMTORPERC,
					ODALLOWWAIVER,
					ODMAXWAIVERPERC,
					ODRULECODE,
					ODMINCAPAMOUNT,
					ODTDSREQ
				FROM FINODPENALTYRATES_TEMP
			]]>
		</createView>
	</changeSet>

	<changeSet id="FOPR_2_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finodpenaltyrates_tview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="FOPR_3_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finodpenaltyrates_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FOPR_3" author="Gopal.p">
		<createView viewName="FINODPENALTYRATES_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FINID,
					FINREFERENCE,
					FINEFFECTDATE,
					APPLYODPENALTY,
					ODINCGRCDAYS,
					ODCHARGETYPE,
					ODGRACEDAYS,
					ODCHARGECALON,
					ODCHARGEAMTORPERC,
					ODALLOWWAIVER,
					ODMAXWAIVERPERC,
					ODRULECODE,
					ODMINCAPAMOUNT,
					ODTDSREQ
				FROM FINODPENALTYRATES_TEMP
				UNION
				SELECT FINID,
					FINREFERENCE,
					FINEFFECTDATE,
					APPLYODPENALTY,
					ODINCGRCDAYS,
					ODCHARGETYPE,
					ODGRACEDAYS,
					ODCHARGECALON,
					ODCHARGEAMTORPERC,
					ODALLOWWAIVER,
					ODMAXWAIVERPERC,
					ODRULECODE,
					ODMINCAPAMOUNT,
					ODTDSREQ
				FROM FINODPENALTYRATES
				WHERE NOT (EXISTS (SELECT 1 FROM FINODPENALTYRATES_TEMP
					WHERE FINID = FINODPENALTYRATES.FINID))
			]]>
		</createView>
	</changeSet>

	<changeSet id="FOPR_3_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finodpenaltyrates_view');	
			]]>
		</sql>
	</changeSet>

	<!-- (FOPR) :: Over due penalty rate Views handle in single place end -->

	<!-- (FGDV) :: Fin Guarantor detail Views handle in single place start -->

	<changeSet id="FGDV_1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finguarantorsdetails_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FGDV_1" author="Gopal.p">
		<createView viewName="FINGUARANTORSDETAILS_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.GUARANTORID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.BANKCUSTOMER,
					T1.GUARANTORCIF,
					T1.GUARANTORIDTYPE,
					T1.GUARANTORIDNUMBER,
					T1.GURANTEEPERCENTAGE,
					T1.MOBILENO,
					T1.EMAILID,
					T1.GUARANTORPROOF,
					T1.GUARANTORPROOFNAME,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.GUARANTORCIFNAME,
					T1.REMARKS,
					T1.ADDRHNBR,
					T1.FLATNBR,
					T1.ADDRSTREET,
					T1.ADDRLINE1,
					T1.ADDRLINE2,
					T1.POBOX,
					T1.ADDRCITY,
					T1.ADDRPROVINCE,
					T1.ADDRCOUNTRY,
					T1.ADDRZIP,
					T1.GUARANTORGENDERCODE,
					(SELECT IDENTITYDESC FROM BMTIDENTITYTYPE WHERE IDENTITYTYPE = T1.GUARANTORIDTYPE) GUARANTORIDTYPENAME,
					T2.USRLOGIN,
					T2.USRFNAME,
					T2.USRMNAME,
					T2.USRLNAME,
					COALESCE(T3.CUSTID, 0) CUSTID,
					T3.CUSTSHRTNAME,
					T3.CUSTDOB LOVCUSTDOB
				FROM FINGUARANTORSDETAILS T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				JOIN SECUSERS T2 ON T1.LASTMNTBY = T2.USRID
				LEFT JOIN CUSTOMERS T3 ON T1.GUARANTORCIF = T3.CUSTCIF
			]]>
		</createView>
	</changeSet>

	<changeSet id="FGDV_1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finguarantorsdetails_aview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="FGDV_2_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finguarantorsdetails_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FGDV_2" author="Gopal.p">
		<createView viewName="FINGUARANTORSDETAILS_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.GUARANTORID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.BANKCUSTOMER,
					T1.GUARANTORCIF,
					T1.GUARANTORIDTYPE,
					T1.GUARANTORIDNUMBER,
					T1.GURANTEEPERCENTAGE,
					T1.MOBILENO,
					T1.EMAILID,
					T1.GUARANTORPROOF,
					T1.GUARANTORPROOFNAME,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.GUARANTORCIFNAME,
					T1.REMARKS,
					T1.ADDRHNBR,
					T1.FLATNBR,
					T1.ADDRSTREET,
					T1.ADDRLINE1,
					T1.ADDRLINE2,
					T1.POBOX,
					T1.ADDRCITY,
					T1.ADDRPROVINCE,
					T1.ADDRCOUNTRY,
					T1.ADDRZIP,
					T1.GUARANTORGENDERCODE,
					(SELECT IDENTITYDESC FROM BMTIDENTITYTYPE WHERE IDENTITYTYPE = T1.GUARANTORIDTYPE) GUARANTORIDTYPENAME,
					T2.USRLOGIN,
					T2.USRFNAME,
					T2.USRMNAME,
					T2.USRLNAME,
					COALESCE(T3.CUSTID, 0) CUSTID,
					T3.CUSTSHRTNAME,
					T3.CUSTDOB LOVCUSTDOB
				FROM FINGUARANTORSDETAILS_TEMP T1
				INNER JOIN FINANCEMAIN_TEMP FM ON FM.FINID = T1.FINID
				JOIN SECUSERS T2 ON T1.LASTMNTBY = T2.USRID
				LEFT JOIN CUSTOMERS T3 ON T1.GUARANTORCIF = T3.CUSTCIF
			]]>
		</createView>
	</changeSet>

	<changeSet id="FGDV_2_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finguarantorsdetails_tview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="FGDV_3_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finguarantorsdetails_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FGDV_3" author="Gopal.p">
		<createView viewName="FINGUARANTORSDETAILS_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.GUARANTORID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.BANKCUSTOMER,
					T1.GUARANTORCIF,
					T1.GUARANTORIDTYPE,
					T1.GUARANTORIDNUMBER,
					T1.GURANTEEPERCENTAGE,
					T1.MOBILENO,
					T1.EMAILID,
					T1.GUARANTORPROOF,
					T1.GUARANTORPROOFNAME,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.GUARANTORCIFNAME,
					T1.REMARKS,
					T1.ADDRHNBR,
					T1.FLATNBR,
					T1.ADDRSTREET,
					T1.ADDRLINE1,
					T1.ADDRLINE2,
					T1.POBOX,
					T1.ADDRCITY,
					T1.ADDRPROVINCE,
					T1.ADDRCOUNTRY,
					T1.ADDRZIP,
					T1.GUARANTORGENDERCODE,
					(SELECT IDENTITYDESC FROM BMTIDENTITYTYPE WHERE IDENTITYTYPE = T1.GUARANTORIDTYPE) GUARANTORIDTYPENAME,
					T2.USRLOGIN,
					T2.USRFNAME,
					T2.USRMNAME,
					T2.USRLNAME,
					COALESCE(T3.CUSTID, 0) CUSTID,
					T3.CUSTSHRTNAME,
					T3.CUSTDOB LOVCUSTDOB
				FROM FINGUARANTORSDETAILS_TEMP T1
				INNER JOIN FINANCEMAIN_TEMP FM ON FM.FINID = T1.FINID
				JOIN SECUSERS T2 ON T1.LASTMNTBY = T2.USRID
				LEFT JOIN CUSTOMERS T3 ON T1.GUARANTORCIF::TEXT = T3.CUSTCIF::TEXT
				UNION ALL
				SELECT T1.GUARANTORID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.BANKCUSTOMER,
					T1.GUARANTORCIF,
					T1.GUARANTORIDTYPE,
					T1.GUARANTORIDNUMBER,
					T1.GURANTEEPERCENTAGE,
					T1.MOBILENO,
					T1.EMAILID,
					T1.GUARANTORPROOF,
					T1.GUARANTORPROOFNAME,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.GUARANTORCIFNAME,
					T1.REMARKS,
					T1.ADDRHNBR,
					T1.FLATNBR,
					T1.ADDRSTREET,
					T1.ADDRLINE1,
					T1.ADDRLINE2,
					T1.POBOX,
					T1.ADDRCITY,
					T1.ADDRPROVINCE,
					T1.ADDRCOUNTRY,
					T1.ADDRZIP,
					T1.GUARANTORGENDERCODE,
					(SELECT IDENTITYDESC FROM BMTIDENTITYTYPE WHERE IDENTITYTYPE = T1.GUARANTORIDTYPE) GUARANTORIDTYPENAME,
					T2.USRLOGIN,
					T2.USRFNAME,
					T2.USRMNAME,
					T2.USRLNAME,
					COALESCE(T3.CUSTID, 0::BIGINT) AS CUSTID,
					T3.CUSTSHRTNAME,
					T3.CUSTDOB AS LOVCUSTDOB
				FROM FINGUARANTORSDETAILS T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				JOIN SECUSERS T2 ON T1.LASTMNTBY = T2.USRID
				LEFT JOIN CUSTOMERS T3 ON T1.GUARANTORCIF = T3.CUSTCIF
				WHERE NOT EXISTS (SELECT 1 FROM FINGUARANTORSDETAILS_TEMP
					WHERE FINGUARANTORSDETAILS_TEMP.GUARANTORID = T1.GUARANTORID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="FGDV_3_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finguarantorsdetails_view');	
			]]>
		</sql>
	</changeSet>

	<!-- (FGDV) :: Fin Guarantor detail Views handle in single place end -->


	<!-- (FJADV) :: Fin Joint Account detail Views handle in single place start -->

	<changeSet id="FJADV_1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finjointaccountdetails_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FJADV_1" author="Gopal.p">
		<createView viewName="FINJOINTACCOUNTDETAILS_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.JOINTACCOUNTID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.CUSTCIF,
					T1.INCLUDEREPAY,
					T1.REPAYACCOUNTID,
					T1.CATOFCOAPPLICANT,
					T1.AUTHORITYSIGNATORY,
					T1.SEQUENCE,
					T1.INCLUDEINCOME,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.USRLOGIN,
					T2.USRFNAME,
					T2.USRMNAME,
					T2.USRLNAME,
					T3.CUSTSHRTNAME LOVDESCCIFNAME,
					T3.CUSTID,
					T3.CUSTDOB LOVCUSTDOB
				FROM FINJOINTACCOUNTDETAILS T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				LEFT JOIN SECUSERS T2 ON T1.LASTMNTBY = T2.USRID
				JOIN CUSTOMERS T3 ON T1.CUSTCIF = T3.CUSTCIF
			]]>
		</createView>
	</changeSet>

	<changeSet id="FJADV_1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finjointaccountdetails_aview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="FJADV_2_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finjointaccountdetails_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FJADV_2" author="Gopal.p">
		<createView viewName="FINJOINTACCOUNTDETAILS_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.JOINTACCOUNTID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.CUSTCIF,
					T1.INCLUDEREPAY,
					T1.REPAYACCOUNTID,
					T1.CATOFCOAPPLICANT,
					T1.AUTHORITYSIGNATORY,
					T1.SEQUENCE,
					T1.INCLUDEINCOME,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.USRLOGIN,
					T2.USRFNAME,
					T2.USRMNAME,
					T2.USRLNAME,
					T3.CUSTSHRTNAME LOVDESCCIFNAME,
					T3.CUSTID,
					T3.CUSTDOB LOVCUSTDOB
				FROM FINJOINTACCOUNTDETAILS_TEMP T1
				INNER JOIN FINANCEMAIN_TEMP FM ON FM.FINID = T1.FINID
				LEFT JOIN SECUSERS T2 ON T1.LASTMNTBY = T2.USRID
				JOIN CUSTOMERS T3 ON T1.CUSTCIF = T3.CUSTCIF
			]]>
		</createView>
	</changeSet>

	<changeSet id="FJADV_2_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finjointaccountdetails_tview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="FJADV_3_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finjointaccountdetails_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FJADV_3" author="Gopal.p">
		<createView viewName="FINJOINTACCOUNTDETAILS_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.JOINTACCOUNTID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.CUSTCIF,
					T1.INCLUDEREPAY,
					T1.REPAYACCOUNTID,
					T1.CATOFCOAPPLICANT,
					T1.AUTHORITYSIGNATORY,
					T1.SEQUENCE,
					T1.INCLUDEINCOME,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.USRLOGIN,
					T2.USRFNAME,
					T2.USRMNAME,
					T2.USRLNAME,
					T3.CUSTSHRTNAME LOVDESCCIFNAME,
					T3.CUSTID,
					T3.CUSTDOB LOVCUSTDOB
				FROM FINJOINTACCOUNTDETAILS_TEMP T1
				INNER JOIN FINANCEMAIN_TEMP FM ON FM.FINID = T1.FINID
				LEFT JOIN SECUSERS T2 ON T1.LASTMNTBY = T2.USRID
				JOIN CUSTOMERS T3 ON T1.CUSTCIF = T3.CUSTCIF
				UNION ALL
				SELECT T1.JOINTACCOUNTID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.CUSTCIF,
					T1.INCLUDEREPAY,
					T1.REPAYACCOUNTID,
					T1.CATOFCOAPPLICANT,
					T1.AUTHORITYSIGNATORY,
					T1.SEQUENCE,
					T1.INCLUDEINCOME,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.USRLOGIN,
					T2.USRFNAME,
					T2.USRMNAME,
					T2.USRLNAME,
					T3.CUSTSHRTNAME LOVDESCCIFNAME,
					T3.CUSTID,
					T3.CUSTDOB LOVCUSTDOB
				FROM FINJOINTACCOUNTDETAILS T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				LEFT JOIN SECUSERS T2 ON T1.LASTMNTBY = T2.USRID
				JOIN CUSTOMERS T3 ON T1.CUSTCIF = T3.CUSTCIF
				WHERE NOT EXISTS (SELECT 1 FROM FINJOINTACCOUNTDETAILS_TEMP
					WHERE FINJOINTACCOUNTDETAILS_TEMP.JOINTACCOUNTID = T1.JOINTACCOUNTID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="FJADV_3_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finjointaccountdetails_view');	
			]]>
		</sql>
	</changeSet>

	<!-- (FJADV) :: Fin Joint Account detail Views handle in single place end -->

	<!-- (FTDV) :: Fin Tax detail Views handle in single place start -->

	<changeSet id="FTDV_1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'fintaxdetail_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FTDV_1" author="Gopal.p">
		<createView viewName="FINTAXDETAIL_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FM.FINID,
					FM.FINREFERENCE,
					T1.APPLICABLEFOR,
					T1.TAXCUSTID,
					T1.TAXEXEMPTED,
					T1.TAXNUMBER,
					T1.ADDRLINE1,
					T1.ADDRLINE2,
					T1.ADDRLINE3,
					T1.ADDRLINE4,
					T1.COUNTRY,
					T1.PROVINCE,
					T1.CITY,
					T1.PINCODE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.COUNTRYDESC COUNTRYNAME,
					T3.CPPROVINCENAME PROVINCENAME,
					T4.PCCITYNAME CITYNAME,
					T5.AREANAME PINCODENAME,
					T6.CUSTCIF,
					T6.CUSTSHRTNAME,
					T1.SEZCERTIFICATENO,
					T1.SEZVALUEDATE,
					T1.ADDRESSDETAIL,
					T1.PINCODEID
				FROM FINTAXDETAIL T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				LEFT JOIN BMTCOUNTRIES T2 ON T1.COUNTRY = T2.COUNTRYCODE
				LEFT JOIN RMTCOUNTRYVSPROVINCE T3 ON T1.PROVINCE = T3.CPPROVINCE AND T1.COUNTRY = T3.CPCOUNTRY
				LEFT JOIN RMTPROVINCEVSCITY T4 ON T1.CITY = T4.PCCITY AND T1.PROVINCE = T4.PCPROVINCE AND T1.COUNTRY = T4.PCCOUNTRY
				LEFT JOIN PINCODES T5 ON T1.PINCODEID = T5.PINCODEID AND T1.CITY = T5.CITY
				JOIN CUSTOMERS T6 ON T1.TAXCUSTID = T6.CUSTID
			]]>
		</createView>
	</changeSet>

	<changeSet id="FTDV_1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'fintaxdetail_aview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="FTDV_2_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'fintaxdetail_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FTDV_2" author="Gopal.p">
		<createView viewName="FINTAXDETAIL_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FM.FINID,
					FM.FINREFERENCE,
					T1.APPLICABLEFOR,
					T1.TAXCUSTID,
					T1.TAXEXEMPTED,
					T1.TAXNUMBER,
					T1.ADDRLINE1,
					T1.ADDRLINE2,
					T1.ADDRLINE3,
					T1.ADDRLINE4,
					T1.COUNTRY,
					T1.PROVINCE,
					T1.CITY,
					T1.PINCODE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.COUNTRYDESC COUNTRYNAME,
					T3.CPPROVINCENAME PROVINCENAME,
					T4.PCCITYNAME CITYNAME,
					T5.AREANAME PINCODENAME,
					T6.CUSTCIF,
					T6.CUSTSHRTNAME,
					T1.SEZCERTIFICATENO,
					T1.SEZVALUEDATE,
					T1.ADDRESSDETAIL,
					T1.PINCODEID
				FROM FINTAXDETAIL_TEMP T1
				INNER JOIN FINANCEMAIN_TEMP FM ON FM.FINID = T1.FINID
				LEFT JOIN BMTCOUNTRIES T2 ON T1.COUNTRY = T2.COUNTRYCODE
				LEFT JOIN RMTCOUNTRYVSPROVINCE T3 ON T1.PROVINCE = T3.CPPROVINCE AND T1.COUNTRY = T3.CPCOUNTRY
				LEFT JOIN RMTPROVINCEVSCITY T4 ON T1.CITY = T4.PCCITY AND T1.PROVINCE = T4.PCPROVINCE AND T1.COUNTRY = T4.PCCOUNTRY
				LEFT JOIN PINCODES T5 ON T1.PINCODEID = T5.PINCODEID AND T1.CITY = T5.CITY
				JOIN CUSTOMERS T6 ON T1.TAXCUSTID = T6.CUSTID
			]]>
		</createView>
	</changeSet>

	<changeSet id="FTDV_2_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'fintaxdetail_tview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="FTDV_3_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'fintaxdetail_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FTDV_3" author="Gopal.p">
		<createView viewName="FINTAXDETAIL_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FM.FINID,
					FM.FINREFERENCE,
					T1.APPLICABLEFOR,
					T1.TAXCUSTID,
					T1.TAXEXEMPTED,
					T1.TAXNUMBER,
					T1.ADDRLINE1,
					T1.ADDRLINE2,
					T1.ADDRLINE3,
					T1.ADDRLINE4,
					T1.COUNTRY,
					T1.PROVINCE,
					T1.CITY,
					T1.PINCODE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.COUNTRYDESC COUNTRYNAME,
					T3.CPPROVINCENAME PROVINCENAME,
					T4.PCCITYNAME CITYNAME,
					T5.AREANAME PINCODENAME,
					T6.CUSTCIF,
					T6.CUSTSHRTNAME,
					T1.SEZCERTIFICATENO,
					T1.SEZVALUEDATE,
					T1.ADDRESSDETAIL,
					T1.PINCODEID
				FROM FINTAXDETAIL_TEMP T1
				INNER JOIN FINANCEMAIN_TEMP FM ON FM.FINID = T1.FINID
				LEFT JOIN BMTCOUNTRIES T2 ON T1.COUNTRY = T2.COUNTRYCODE
				LEFT JOIN RMTCOUNTRYVSPROVINCE T3 ON T1.PROVINCE = T3.CPPROVINCE AND T1.COUNTRY = T3.CPCOUNTRY
				LEFT JOIN RMTPROVINCEVSCITY T4 ON T1.CITY = T4.PCCITY AND T1.PROVINCE = T4.PCPROVINCE AND T1.COUNTRY = T4.PCCOUNTRY
				LEFT JOIN PINCODES T5 ON T1.PINCODEID = T5.PINCODEID AND T1.CITY = T5.CITY
				JOIN CUSTOMERS T6 ON T1.TAXCUSTID = T6.CUSTID
				UNION ALL
				SELECT FM.FINID,
					FM.FINREFERENCE,
					T1.APPLICABLEFOR,
					T1.TAXCUSTID,
					T1.TAXEXEMPTED,
					T1.TAXNUMBER,
					T1.ADDRLINE1,
					T1.ADDRLINE2,
					T1.ADDRLINE3,
					T1.ADDRLINE4,
					T1.COUNTRY,
					T1.PROVINCE,
					T1.CITY,
					T1.PINCODE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.COUNTRYDESC COUNTRYNAME,
					T3.CPPROVINCENAME PROVINCENAME,
					T4.PCCITYNAME CITYNAME,
					T5.AREANAME PINCODENAME,
					T6.CUSTCIF,
					T6.CUSTSHRTNAME,
					T1.SEZCERTIFICATENO,
					T1.SEZVALUEDATE,
					T1.ADDRESSDETAIL,
					T1.PINCODEID
				FROM FINTAXDETAIL T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				LEFT JOIN BMTCOUNTRIES T2 ON T1.COUNTRY = T2.COUNTRYCODE
				LEFT JOIN RMTCOUNTRYVSPROVINCE T3 ON T1.PROVINCE = T3.CPPROVINCE AND T1.COUNTRY = T3.CPCOUNTRY
				LEFT JOIN RMTPROVINCEVSCITY T4 ON T1.CITY = T4.PCCITY AND T1.PROVINCE = T4.PCPROVINCE AND T1.COUNTRY = T4.PCCOUNTRY
				LEFT JOIN PINCODES T5 ON T1.PINCODEID = T5.PINCODEID AND T1.CITY = T5.CITY
				JOIN CUSTOMERS T6 ON T1.TAXCUSTID = T6.CUSTID
				WHERE NOT EXISTS (SELECT 1 FROM FINTAXDETAIL_TEMP
					WHERE FINTAXDETAIL_TEMP.FINID = T1.FINID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="FTDV_3_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'fintaxdetail_view');	
			]]>
		</sql>
	</changeSet>

	<!-- (FTDV) :: Fin Tax detail Views handle in single place end -->

	<!-- (FAPV) :: Fin Advance Payment Views handle in single place start -->

	<changeSet id="FAPV_1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finadvancepayments_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FAPV_1" author="Gopal.p">
		<createView viewName="FINADVANCEPAYMENTS_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FM.FINID,
					FM.FINREFERENCE,
					T1.PAYMENTID,
					T1.PAYMENTSEQ,
					T1.PAYMENTDETAIL,
					T1.AMTTOBERELEASED,
					T1.LIABILITYHOLDNAME,
					T1.TRANSACTIONREF,
					T1.BENEFICIARYNAME,
					T1.BENEFICIARYACCNO,
					T1.REENTERBENEFICIARYACCNO,
					T1.DESCRIPTION,
					T1.PAYMENTTYPE,
					T1.LLREFERENCENO,
					T1.LLDATE,
					T1.CUSTCONTRIBUTION,
					T1.SELLERCONTRIBUTION,
					T1.REMARKS,
					T1.DISBDATE,
					T1.DISBSEQ,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.BANKCODE,
					T1.PAYABLELOC,
					T1.PRINTINGLOC,
					T1.VALUEDATE,
					T1.BANKBRANCHID,
					T1.PHONECOUNTRYCODE,
					T1.PHONEAREACODE,
					T1.PHONENUMBER,
					T1.CLEARINGDATE,
					T1.STATUS,
					T1.ACTIVE,
					T1.INPUTDATE,
					T1.DISBCCY,
					T1.POISSUED,
					T3.BANKCODE BRANCHBANKCODE,
					T31.BANKNAME BRANCHBANKNAME,
					T3.BRANCHCODE,
					T3.BRANCHDESC,
					T3.IFSC,
					T3.CITY,
					T4.BANKNAME,
					T1.PARTNERBANKID,
					T5.PARTNERBANKCODE,
					T5.PARTNERBANKNAME,
					T1.LINKEDTRANID,
					T5.ACTYPE PARTNERBANKACTYPE,
					T5.ACCOUNTNO PARTNERBANKAC,
					T6.BRANCHDESC PRINTINGLOCDESC,
					T1.REJECTREASON,
					T1.REALIZATIONDATE,
					T1.HOLDDISBURSEMENT,
					T1.VASREFERENCE
				FROM FINADVANCEPAYMENTS_TEMP T1
				INNER JOIN FINANCEMAIN_TEMP FM ON FM.FINID = T1.FINID
				LEFT JOIN BANKBRANCHES T3 ON T1.BANKBRANCHID = T3.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL T31 ON T31.BANKCODE = T3.BANKCODE
				LEFT JOIN BMTBANKDETAIL T4 ON T1.BANKCODE = T4.BANKCODE
				LEFT JOIN PARTNERBANKS T5 ON T5.PARTNERBANKID = T1.PARTNERBANKID
				LEFT JOIN BANKBRANCHES T6 ON T6.BRANCHCODE = T1.PRINTINGLOC AND T6.BANKCODE = T1.BANKCODE
				UNION ALL
				SELECT FM.FINID,
					FM.FINREFERENCE,
					T1.PAYMENTID,
					T1.PAYMENTSEQ,
					T1.PAYMENTDETAIL,
					T1.AMTTOBERELEASED,
					T1.LIABILITYHOLDNAME,
					T1.TRANSACTIONREF,
					T1.BENEFICIARYNAME,
					T1.BENEFICIARYACCNO,
					T1.REENTERBENEFICIARYACCNO,
					T1.DESCRIPTION,
					T1.PAYMENTTYPE,
					T1.LLREFERENCENO,
					T1.LLDATE,
					T1.CUSTCONTRIBUTION,
					T1.SELLERCONTRIBUTION,
					T1.REMARKS,
					T1.DISBDATE,
					T1.DISBSEQ,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.BANKCODE,
					T1.PAYABLELOC,
					T1.PRINTINGLOC,
					T1.VALUEDATE,
					T1.BANKBRANCHID,
					T1.PHONECOUNTRYCODE,
					T1.PHONEAREACODE,
					T1.PHONENUMBER,
					T1.CLEARINGDATE,
					T1.STATUS,
					T1.ACTIVE,
					T1.INPUTDATE,
					T1.DISBCCY,
					T1.POISSUED,
					T3.BANKCODE BRANCHBANKCODE,
					T31.BANKNAME BRANCHBANKNAME,
					T3.BRANCHCODE,
					T3.BRANCHDESC,
					T3.IFSC,
					T3.CITY,
					T4.BANKNAME,
					T1.PARTNERBANKID,
					T5.PARTNERBANKCODE,
					T5.PARTNERBANKNAME,
					T1.LINKEDTRANID,
					T5.ACTYPE PARTNERBANKACTYPE,
					T5.ACCOUNTNO PARTNERBANKAC,
					T6.BRANCHDESC PRINTINGLOCDESC,
					T1.REJECTREASON,
					T1.REALIZATIONDATE,
					T1.HOLDDISBURSEMENT,
					T1.VASREFERENCE
				FROM FINADVANCEPAYMENTS T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				LEFT JOIN BANKBRANCHES T3 ON T1.BANKBRANCHID = T3.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL T31 ON T31.BANKCODE = T3.BANKCODE
				LEFT JOIN BMTBANKDETAIL T4 ON T1.BANKCODE = T4.BANKCODE
				LEFT JOIN PARTNERBANKS T5 ON T5.PARTNERBANKID = T1.PARTNERBANKID
				LEFT JOIN BANKBRANCHES T6 ON T6.BRANCHCODE = T1.PRINTINGLOC AND T6.BANKCODE = T1.BANKCODE
				WHERE NOT EXISTS (SELECT 1 FROM FINADVANCEPAYMENTS_TEMP
					WHERE FINADVANCEPAYMENTS_TEMP.FINID = T1.FINID AND FINADVANCEPAYMENTS_TEMP.PAYMENTSEQ = T1.PAYMENTSEQ)
			]]>
		</createView>
	</changeSet>

	<changeSet id="FAPV_1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finadvancepayments_view');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="FAPV_2_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finadvancepayments_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FAPV_2" author="Gopal.p">
		<createView viewName="FINADVANCEPAYMENTS_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FM.FINID,
					FM.FINREFERENCE,
					T1.PAYMENTID,
					T1.PAYMENTSEQ,
					T1.PAYMENTDETAIL,
					T1.AMTTOBERELEASED,
					T1.LIABILITYHOLDNAME,
					T1.TRANSACTIONREF,
					T1.BENEFICIARYNAME,
					T1.BENEFICIARYACCNO,
					T1.REENTERBENEFICIARYACCNO,
					T1.DESCRIPTION,
					T1.PAYMENTTYPE,
					T1.LLREFERENCENO,
					T1.LLDATE,
					T1.CUSTCONTRIBUTION,
					T1.SELLERCONTRIBUTION,
					T1.REMARKS,
					T1.DISBDATE,
					T1.DISBSEQ,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.BANKCODE,
					T1.PAYABLELOC,
					T1.PRINTINGLOC,
					T1.VALUEDATE,
					T1.BANKBRANCHID,
					T1.PHONECOUNTRYCODE,
					T1.PHONEAREACODE,
					T1.PHONENUMBER,
					T1.CLEARINGDATE,
					T1.STATUS,
					T1.ACTIVE,
					T1.INPUTDATE,
					T1.DISBCCY,
					T1.POISSUED,
					T3.BANKCODE BRANCHBANKCODE,
					T31.BANKNAME BRANCHBANKNAME,
					T3.BRANCHCODE,
					T3.BRANCHDESC,
					T3.IFSC,
					T3.CITY,
					T4.BANKNAME,
					T1.PARTNERBANKID,
					T5.PARTNERBANKCODE,
					T5.PARTNERBANKNAME,
					T1.LINKEDTRANID,
					T5.ACTYPE PARTNERBANKACTYPE,
					T5.ACCOUNTNO PARTNERBANKAC,
					T6.BRANCHDESC PRINTINGLOCDESC,
					T1.REJECTREASON,
					T1.REALIZATIONDATE,
					T1.HOLDDISBURSEMENT,
					T1.VASREFERENCE
				FROM FINADVANCEPAYMENTS_TEMP T1
				INNER JOIN FINANCEMAIN_TEMP FM ON FM.FINID = T1.FINID
				LEFT JOIN BANKBRANCHES T3 ON T1.BANKBRANCHID = T3.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL T31 ON T31.BANKCODE = T3.BANKCODE
				LEFT JOIN BMTBANKDETAIL T4 ON T1.BANKCODE = T4.BANKCODE
				LEFT JOIN PARTNERBANKS T5 ON T5.PARTNERBANKID = T1.PARTNERBANKID
				LEFT JOIN BANKBRANCHES T6 ON T6.BRANCHCODE = T1.PRINTINGLOC AND T6.BANKCODE = T1.BANKCODE
			]]>
		</createView>
	</changeSet>

	<changeSet id="FAPV_2_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finadvancepayments_tview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="FAPV_3_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finadvancepayments_custaview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FAPV_3" author="Gopal.p">
		<createView viewName="FINADVANCEPAYMENTS_CUSTAVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T6.FINID,
					T6.FINREFERENCE,
					T1.PAYMENTID,
					T1.PAYMENTSEQ,
					T1.BENEFICIARYNAME,
					T1.BENEFICIARYACCNO,
					T1.PAYMENTTYPE,
					T1.LLDATE,
					T1.DISBSEQ,
					T1.BANKBRANCHID,
					T1.STATUS,
					T1.DISBCCY,
					T1.POISSUED,
					T3.BANKCODE BRANCHBANKCODE,
					T31.BANKNAME BRANCHBANKNAME,
					T3.BRANCHCODE,
					T3.BRANCHDESC,
					T3.IFSC,
					T3.CITY,
					T3.MICR,
					T1.PARTNERBANKID,
					T5.PARTNERBANKCODE,
					T5.PARTNERBANKNAME,
					T1.LINKEDTRANID,
					T5.ACTYPE PARTNERBANKACTYPE,
					T5.ACCOUNTNO PARTNERBANKAC,
					T6.CUSTID,
					T1.HOLDDISBURSEMENT
				FROM FINADVANCEPAYMENTS T1
				LEFT JOIN BANKBRANCHES T3 ON T1.BANKBRANCHID = T3.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL T31 ON T31.BANKCODE = T3.BANKCODE
				LEFT JOIN BMTBANKDETAIL T4 ON T1.BANKCODE = T4.BANKCODE
				LEFT JOIN PARTNERBANKS T5 ON T5.PARTNERBANKID = T1.PARTNERBANKID
				LEFT JOIN FINANCEMAIN T6 ON T1.FINID = T6.FINID
			]]>
		</createView>
	</changeSet>

	<changeSet id="FAPV_3_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finadvancepayments_custaview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="FAPV_4_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finadvancepayments_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FAPV_4" author="Gopal.p">
		<createView viewName="FINADVANCEPAYMENTS_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FM.FINID,
					FM.FINREFERENCE,
					T1.PAYMENTID,
					T1.PAYMENTSEQ,
					T1.PAYMENTDETAIL,
					T1.AMTTOBERELEASED,
					T1.LIABILITYHOLDNAME,
					T1.TRANSACTIONREF,
					T1.BENEFICIARYNAME,
					T1.BENEFICIARYACCNO,
					T1.REENTERBENEFICIARYACCNO,
					T1.DESCRIPTION,
					T1.PAYMENTTYPE,
					T1.LLREFERENCENO,
					T1.LLDATE,
					T1.CUSTCONTRIBUTION,
					T1.SELLERCONTRIBUTION,
					T1.REMARKS,
					T1.DISBDATE,
					T1.DISBSEQ,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.BANKCODE,
					T1.PAYABLELOC,
					T1.PRINTINGLOC,
					T1.VALUEDATE,
					T1.BANKBRANCHID,
					T1.PHONECOUNTRYCODE,
					T1.PHONEAREACODE,
					T1.PHONENUMBER,
					T1.CLEARINGDATE,
					T1.STATUS,
					T1.ACTIVE,
					T1.INPUTDATE,
					T1.DISBCCY,
					T1.POISSUED,
					T3.BANKCODE BRANCHBANKCODE,
					T31.BANKNAME BRANCHBANKNAME,
					T3.BRANCHCODE,
					T3.BRANCHDESC,
					T3.IFSC,
					T3.CITY,
					T4.BANKNAME,
					T1.PARTNERBANKID,
					T5.PARTNERBANKCODE,
					T5.PARTNERBANKNAME,
					T1.LINKEDTRANID,
					T5.ACTYPE PARTNERBANKACTYPE,
					T5.ACCOUNTNO PARTNERBANKAC,
					T6.BRANCHDESC PRINTINGLOCDESC,
					T1.REJECTREASON,
					T1.REALIZATIONDATE,
					T1.HOLDDISBURSEMENT,
					T1.VASREFERENCE
				FROM FINADVANCEPAYMENTS T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				LEFT JOIN BANKBRANCHES T3 ON T1.BANKBRANCHID = T3.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL T31 ON T31.BANKCODE = T3.BANKCODE
				LEFT JOIN BMTBANKDETAIL T4 ON T1.BANKCODE = T4.BANKCODE
				LEFT JOIN PARTNERBANKS T5 ON T5.PARTNERBANKID = T1.PARTNERBANKID
				LEFT JOIN BANKBRANCHES T6 ON T6.BRANCHCODE = T1.PRINTINGLOC AND T6.BANKCODE = T1.BANKCODE
			]]>
		</createView>
	</changeSet>

	<changeSet id="FAPV_4_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finadvancepayments_aview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="FAPV_5_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finadvancepayments_adview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FAPV_5" author="Gopal.p">
		<createView viewName="FINADVANCEPAYMENTS_ADVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.PAYMENTID,
					T3.FINID,
					T3.FINREFERENCE,
					T1.PAYMENTSEQ,
					T1.DISBSEQ,
					T1.PAYMENTDETAIL,
					T1.AMTTOBERELEASED,
					T1.LIABILITYHOLDNAME,
					T1.BENEFICIARYNAME,
					T1.BENEFICIARYACCNO,
					T1.DESCRIPTION,
					T1.PAYMENTTYPE,
					T1.BANKCODE,
					T1.LLREFERENCENO,
					T1.LLDATE,
					T1.CUSTCONTRIBUTION,
					T1.SELLERCONTRIBUTION,
					T1.REMARKS,
					T1.PAYABLELOC,
					T1.PRINTINGLOC,
					T1.VALUEDATE,
					T1.BANKBRANCHID,
					T1.PHONECOUNTRYCODE,
					T1.PHONEAREACODE,
					T1.PHONENUMBER,
					T1.CLEARINGDATE,
					T1.STATUS,
					T1.ACTIVE,
					T1.INPUTDATE,
					T1.DISBCCY,
					T1.POISSUED,
					T1.PARTNERBANKID,
					T1.LINKEDTRANID,
					T1.TRANSACTIONREF,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T3.FINTYPE,
					T4.BANKCODE BRANCHBANKCODE,
					T4.BRANCHCODE,
					T4.BRANCHDESC,
					T4.IFSC,
					T4.CITY,
					T4.MICR,
					T5.BANKNAME BRANCHBANKNAME,
					T6.BANKNAME,
					T7.PARTNERBANKCODE,
					T7.PARTNERBANKNAME,
					T7.ACTYPE PARTNERBANKACTYPE,
					T7.ACCOUNTNO PARTNERBANKAC,
					T7.FILENAME,
					T7.ALWFILEDOWNLOAD,
					T1.HOLDDISBURSEMENT
				FROM FINADVANCEPAYMENTS T1
				JOIN FINANCEMAIN T3 ON T3.FINID = T1.FINID
				LEFT JOIN BANKBRANCHES T4 ON T1.BANKBRANCHID = T4.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL T5 ON T5.BANKCODE = T4.BANKCODE
				LEFT JOIN BMTBANKDETAIL T6 ON T1.BANKCODE = T6.BANKCODE
				LEFT JOIN PARTNERBANKS T7 ON T7.PARTNERBANKID = T1.PARTNERBANKID
			]]>
		</createView>
	</changeSet>

	<changeSet id="FAPV_5_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finadvancepayments_adview');	
			]]>
		</sql>
	</changeSet>

	<!-- (FAPV) :: Fin Advance Payment Views handle in single place end -->

	<!-- (FOV) :: Fin Option Views handle in single place start -->

	<changeSet id="FOV_1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'fin_options_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FOV_1" author="Gopal.p">
		<createView viewName="FIN_OPTIONS_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.OPTIONTYPE,
					T1.CURRENTOPTIONDATE,
					T1.FREQUENCY,
					T1.NOTICEPERIODDAYS,
					T1.ALERTDAYS,
					T1.OPTIONEXERCISE,
					T1.NEXTOPTIONDATE,
					T1.ALERTTYPE,
					T1.ALERTTOROLES,
					T1.USERTEMPLATE,
					T1.CUSTOMERTEMPLATE,
					UT.TEMPLATECODE USERTEMPLATECODE,
					CUST.TEMPLATECODE CUSTOMERTEMPLATECODE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.REMARKS
				FROM FIN_OPTIONS_TEMP T1
				INNER JOIN FINANCEMAIN_TEMP FM ON FM.FINID = T1.FINID
				LEFT JOIN TEMPLATES UT ON UT.TEMPLATEID = T1.USERTEMPLATE
				LEFT JOIN TEMPLATES CUST ON CUST.TEMPLATEID = T1.CUSTOMERTEMPLATE
				UNION ALL
				SELECT T1.ID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.OPTIONTYPE,
					T1.CURRENTOPTIONDATE,
					T1.FREQUENCY,
					T1.NOTICEPERIODDAYS,
					T1.ALERTDAYS,
					T1.OPTIONEXERCISE,
					T1.NEXTOPTIONDATE,
					T1.ALERTTYPE,
					T1.ALERTTOROLES,
					T1.USERTEMPLATE,
					T1.CUSTOMERTEMPLATE,
					UT.TEMPLATECODE USERTEMPLATECODE,
					CUST.TEMPLATECODE CUSTOMERTEMPLATECODE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.REMARKS
				FROM FIN_OPTIONS T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				LEFT JOIN TEMPLATES UT ON UT.TEMPLATEID = T1.USERTEMPLATE
				LEFT JOIN TEMPLATES CUST ON CUST.TEMPLATEID = T1.CUSTOMERTEMPLATE
				WHERE NOT EXISTS ( SELECT 1 FROM FIN_OPTIONS_TEMP WHERE FIN_OPTIONS_TEMP.ID = T1.ID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="FOV_1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'fin_options_view');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="FOV_2_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'fin_options_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FOV_2" author="Gopal.p">
		<createView viewName="FIN_OPTIONS_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.OPTIONTYPE,
					T1.CURRENTOPTIONDATE,
					T1.FREQUENCY,
					T1.NOTICEPERIODDAYS,
					T1.ALERTDAYS,
					T1.OPTIONEXERCISE,
					T1.NEXTOPTIONDATE,
					T1.ALERTTYPE,
					T1.ALERTTOROLES,
					T1.USERTEMPLATE,
					T1.CUSTOMERTEMPLATE,
					UT.TEMPLATECODE USERTEMPLATECODE,
					CUST.TEMPLATECODE CUSTOMERTEMPLATECODE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.REMARKS
				FROM FIN_OPTIONS T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				LEFT JOIN TEMPLATES UT ON UT.TEMPLATEID = T1.USERTEMPLATE
				LEFT JOIN TEMPLATES CUST ON CUST.TEMPLATEID = T1.CUSTOMERTEMPLATE
			]]>
		</createView>
	</changeSet>

	<changeSet id="FOV_2_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'fin_options_aview');	
			]]>
		</sql>
	</changeSet>

	<!-- (FOV) :: Fin Option Views handle in single place end -->

	<!-- (FCV) :: Fin Collateral Views handle in single place start -->

	<changeSet id="FCV_1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'fincollaterals_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FCV_1" author="Gopal.p">
		<createView viewName="FINCOLLATERALS_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FM.FINID,
					FM.FINREFERENCE,
					T1.COLLATERALSEQ,
					T1.COLLATERALTYPE,
					T1.CUSTID,
					T1.REFERENCE,
					T1.CCY,
					T1.VALUE,
					T1.COVERAGE,
					T1.TENORTYPE,
					T1.TENOR,
					T1.RATE,
					T1.MATURITYDATE,
					T1.BANKNAME,
					T1.FIRSTCHEQUENO,
					T1.STARTDATE,
					T1.LASTCHEQUENO,
					T1.STATUS,
					T1.REMARKS,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM FINCOLLATERALS T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
			]]>
		</createView>
	</changeSet>

	<changeSet id="FCV_1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'fincollaterals_aview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="FCV_2_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'fincollaterals_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FCV_2" author="Gopal.p">
		<createView viewName="FINCOLLATERALS_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FM.FINID,
					FM.FINREFERENCE,
					T1.COLLATERALSEQ,
					T1.COLLATERALTYPE,
					T1.CUSTID,
					T1.REFERENCE,
					T1.CCY,
					T1.VALUE,
					T1.COVERAGE,
					T1.TENORTYPE,
					T1.TENOR,
					T1.RATE,
					T1.MATURITYDATE,
					T1.BANKNAME,
					T1.FIRSTCHEQUENO,
					T1.STARTDATE,
					T1.LASTCHEQUENO,
					T1.STATUS,
					T1.REMARKS,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM FINCOLLATERALS_TEMP T1
				INNER JOIN FINANCEMAIN_TEMP FM ON FM.FINID = T1.FINID
			]]>
		</createView>
	</changeSet>

	<changeSet id="FCV_2_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'fincollaterals_tview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="FCV_3_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'fincollaterals_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FCV_3" author="Gopal.p">
		<createView viewName="FINCOLLATERALS_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FM.FINID,
					FM.FINREFERENCE,
					T1.COLLATERALSEQ,
					T1.COLLATERALTYPE,
					T1.CUSTID,
					T1.REFERENCE,
					T1.CCY,
					T1.VALUE,
					T1.COVERAGE,
					T1.TENORTYPE,
					T1.TENOR,
					T1.RATE,
					T1.MATURITYDATE,
					T1.BANKNAME,
					T1.FIRSTCHEQUENO,
					T1.STARTDATE,
					T1.LASTCHEQUENO,
					T1.STATUS,
					T1.REMARKS,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM FINCOLLATERALS_TEMP T1
				INNER JOIN FINANCEMAIN_TEMP FM ON FM.FINID = T1.FINID
				UNION ALL
				SELECT FM.FINID,
					FM.FINREFERENCE,
					T1.COLLATERALSEQ,
					T1.COLLATERALTYPE,
					T1.CUSTID,
					T1.REFERENCE,
					T1.CCY,
					T1.VALUE,
					T1.COVERAGE,
					T1.TENORTYPE,
					T1.TENOR,
					T1.RATE,
					T1.MATURITYDATE,
					T1.BANKNAME,
					T1.FIRSTCHEQUENO,
					T1.STARTDATE,
					T1.LASTCHEQUENO,
					T1.STATUS,
					T1.REMARKS,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM FINCOLLATERALS T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				WHERE NOT EXISTS (SELECT 1 FROM FINCOLLATERALS_TEMP
					WHERE FINCOLLATERALS_TEMP.FINID = T1.FINID AND FINCOLLATERALS_TEMP.COLLATERALSEQ = T1.COLLATERALSEQ)
			]]>
		</createView>
	</changeSet>

	<changeSet id="FCV_3_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'fincollaterals_view');	
			]]>
		</sql>
	</changeSet>

	<!-- (FCV) :: Fin Collateral Views handle in single place end -->

	<!-- (PSLDV) :: PSL Detail Views handle in single place start -->

	<changeSet id="PSLDV_1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'psldetail_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="PSLDV_1" author="Gopal.p">
		<createView viewName="PSLDETAIL_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FM.FINID, 
					FM.FINREFERENCE,
					T1.CATEGORYCODE,
					T1.WEAKERSECTION,
					T1.LANDHOLDING,
					T1.LANDAREA,
					T1.SECTOR,
					T1.AMOUNT,
					T1.SUBCATEGORY,
					T1.PURPOSE,
					T1.ENDUSE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.DESCRIPTION WEAKERSECTIONNAME,
					T3.DESCRIPTION PURPOSENAME,
					T4.DESCRIPTION ENDUSENAME,
					T1.ELIGIBLEAMOUNT,
					T1.LOANPURPOSE,
					T5.LOANPURPOSEDESC LOANPURPOSENAME
				FROM PSLDETAIL T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				LEFT JOIN PSLWEAKERSECTION T2 ON T2.CODE = T1.WEAKERSECTION
				LEFT JOIN PSLPURPOSE T3 ON T3.CODE = T1.PURPOSE
				LEFT JOIN PSLENDUSE T4 ON T4.CODE = T1.ENDUSE
				LEFT JOIN LOANPURPOSES T5 ON T5.LOANPURPOSECODE = T1.LOANPURPOSE
			]]>
		</createView>
	</changeSet>

	<changeSet id="PSLDV_1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'psldetail_aview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="PSLDV_2_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'psldetail_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="PSLDV_2" author="Gopal.p">
		<createView viewName="PSLDETAIL_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FM.FINID,
					FM.FINREFERENCE,
					T1.CATEGORYCODE,
					T1.WEAKERSECTION,
					T1.LANDHOLDING,
					T1.LANDAREA,
					T1.SECTOR,
					T1.AMOUNT,
					T1.SUBCATEGORY,
					T1.PURPOSE,
					T1.ENDUSE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.DESCRIPTION WEAKERSECTIONNAME,
					T3.DESCRIPTION PURPOSENAME,
					T4.DESCRIPTION ENDUSENAME,
					T1.ELIGIBLEAMOUNT,
					T1.LOANPURPOSE,
					T5.LOANPURPOSEDESC LOANPURPOSENAME
				FROM PSLDETAIL_TEMP T1
				INNER JOIN FINANCEMAIN_TEMP FM ON FM.FINID = T1.FINID
				LEFT JOIN PSLWEAKERSECTION T2 ON T2.CODE = T1.WEAKERSECTION
				LEFT JOIN PSLPURPOSE T3 ON T3.CODE = T1.PURPOSE
				LEFT JOIN PSLENDUSE T4 ON T4.CODE = T1.ENDUSE
				LEFT JOIN LOANPURPOSES T5 ON T5.LOANPURPOSECODE = T1.LOANPURPOSE
				UNION ALL
				SELECT FM.FINID,
					FM.FINREFERENCE,
					T1.CATEGORYCODE,
					T1.WEAKERSECTION,
					T1.LANDHOLDING,
					T1.LANDAREA,
					T1.SECTOR,
					T1.AMOUNT,
					T1.SUBCATEGORY,
					T1.PURPOSE,
					T1.ENDUSE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.DESCRIPTION WEAKERSECTIONNAME,
					T3.DESCRIPTION PURPOSENAME,
					T4.DESCRIPTION ENDUSENAME,
					T1.ELIGIBLEAMOUNT,
					T1.LOANPURPOSE,
					T5.LOANPURPOSEDESC LOANPURPOSENAME
				FROM PSLDETAIL T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				LEFT JOIN PSLWEAKERSECTION T2 ON T2.CODE = T1.WEAKERSECTION
				LEFT JOIN PSLPURPOSE T3 ON T3.CODE = T1.PURPOSE
				LEFT JOIN PSLENDUSE T4 ON T4.CODE = T1.ENDUSE
				LEFT JOIN LOANPURPOSES T5 ON T5.LOANPURPOSECODE = T1.LOANPURPOSE
				WHERE NOT EXISTS (SELECT 1 FROM PSLDETAIL_TEMP WHERE PSLDETAIL_TEMP.FINID = T1.FINID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="PSLDV_2_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'psldetail_view');	
			]]>
		</sql>
	</changeSet>

	<!-- (PSLDV) :: PSL Detail Views handle in single place end -->

	<!-- (OCRV) :: OCR Capture/Header/Detail Views handle in single place start -->

	<changeSet id="OCRV_1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finocrcapture_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="OCRV_1" author="Gopal.p">
		<createView viewName="FINOCRCAPTURE_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.DISBSEQ,
					T1.DEMANDAMOUNT,
					T1.PAIDAMOUNT,
					T1.REMARKS,
					T1.RECEIPTDATE,
					T1.FILENAME,
					T1.DOCUMENTREF,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				   FROM FINOCRCAPTURE T1
				   INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
			]]>
		</createView>
	</changeSet>

	<changeSet id="OCRV_1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finocrcapture_aview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="OCRV_2_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finocrcapture_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="OCRV_2" author="Gopal.p">
		<createView viewName="FINOCRCAPTURE_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.DISBSEQ,
					T1.DEMANDAMOUNT,
					T1.PAIDAMOUNT,
					T1.REMARKS,
					T1.RECEIPTDATE,
					T1.FILENAME,
					T1.DOCUMENTREF,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM FINOCRCAPTURE_TEMP T1
				INNER JOIN FINANCEMAIN_TEMP FM ON FM.FINID = T1.FINID
				UNION ALL
				SELECT T1.ID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.DISBSEQ,
					T1.DEMANDAMOUNT,
					T1.PAIDAMOUNT,
					T1.REMARKS,
					T1.RECEIPTDATE,
					T1.FILENAME,
					T1.DOCUMENTREF,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM FINOCRCAPTURE T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				WHERE NOT EXISTS (SELECT 1 FROM FINOCRCAPTURE_TEMP WHERE FINOCRCAPTURE_TEMP.ID = T1.ID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="OCRV_2_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finocrcapture_view');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="OCRV_3_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finocrheader_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="OCRV_3" author="Gopal.p">
		<createView viewName="FINOCRHEADER_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.HEADERID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.OCRID,
					T1.OCRDESCRIPTION,
					T1.CUSTOMERPORTION,
					T1.OCRTYPE,
					T1.TOTALDEMAND,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM FINOCRHEADER T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
			]]>
		</createView>
	</changeSet>

	<changeSet id="OCRV_3_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finocrheader_aview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="OCRV_4_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finocrheader_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="OCRV_4" author="Gopal.p">
		<createView viewName="FINOCRHEADER_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.HEADERID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.OCRID,
					T1.OCRDESCRIPTION,
					T1.CUSTOMERPORTION,
					T1.OCRTYPE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.TOTALDEMAND
				FROM FINOCRHEADER_TEMP T1
				INNER JOIN FINANCEMAIN_TEMP FM ON FM.FINID = T1.FINID
				UNION ALL
				SELECT T1.HEADERID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.OCRID,
					T1.OCRDESCRIPTION,
					T1.CUSTOMERPORTION,
					T1.OCRTYPE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.TOTALDEMAND
				FROM FINOCRHEADER T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				WHERE NOT EXISTS (SELECT 1 FROM FINOCRHEADER_TEMP
					WHERE FINOCRHEADER_TEMP.HEADERID = T1.HEADERID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="OCRV_4_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finocrheader_view');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="OCRV_5_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finocrdetails_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="OCRV_5" author="Gopal.p">
		<createView viewName="FINOCRDETAILS_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.DETAILID,
					T1.HEADERID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.STEPSEQUENCE,
					T1.CUSTOMERCONTRIBUTION,
					T1.FINANCERCONTRIBUTION,
					T1.CONTRIBUTOR,
					T2.OCRID,
					T2.OCRDESCRIPTION,
					T2.CUSTOMERPORTION,
					T2.OCRTYPE,
					T2.TOTALDEMAND,
					T1.ACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM FINOCRDETAILS_TEMP T1
				JOIN FINOCRHEADER_TEMP T2 ON T1.HEADERID = T2.HEADERID
				INNER JOIN FINANCEMAIN_TEMP FM ON FM.FINID = T2.FINID
				UNION ALL
				SELECT T1.DETAILID,
					T1.HEADERID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.STEPSEQUENCE,
					T1.CUSTOMERCONTRIBUTION,
					T1.FINANCERCONTRIBUTION,
					T1.CONTRIBUTOR,
					T2.OCRID,
					T2.OCRDESCRIPTION,
					T2.CUSTOMERPORTION,
					T2.OCRTYPE,
					T2.TOTALDEMAND,
					T1.ACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM FINOCRDETAILS T1
				JOIN FINOCRHEADER T2 ON T1.HEADERID = T2.HEADERID
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T2.FINID
				WHERE NOT EXISTS (SELECT 1 FROM FINOCRDETAILS_TEMP
					WHERE FINOCRDETAILS_TEMP.HEADERID = T1.HEADERID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="OCRV_5_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finocrdetails_view');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="OCRV_6_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finocrdetails_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="OCRV_6" author="Gopal.p">
		<createView viewName="FINOCRDETAILS_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.DETAILID,
					T1.HEADERID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.STEPSEQUENCE,
					T1.CUSTOMERCONTRIBUTION,
					T1.FINANCERCONTRIBUTION,
					T1.CONTRIBUTOR,
					T2.OCRID,
					T2.OCRDESCRIPTION,
					T2.CUSTOMERPORTION,
					T2.OCRTYPE,
					T2.TOTALDEMAND,
					T1.ACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM FINOCRDETAILS T1
				JOIN FINOCRHEADER T2 ON T1.HEADERID = T2.HEADERID
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T2.FINID
			]]>
		</createView>
	</changeSet>

	<changeSet id="OCRV_6_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finocrdetails_aview');	
			]]>
		</sql>
	</changeSet>

	<!-- (OCRV) :: OCR Capture/Header/Detail Views handle in single place end -->

	<!-- (FFRV) :: Fin Fee Receipt Views handle in single place start -->

	<changeSet id="FFRV_1_pre" author="Gopal.P" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finfeereceipts_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FFRV_1" author="Gopal.P">
		<createView viewName="FINFEERECEIPTS_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ID,
					T1.FEEID,
					T1.RECEIPTID,
					T1.PAIDAMOUNT,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.AMOUNT RECEIPTAMOUNT,
					T2.TRANSACTIONREF,
					T2.FAVOURNUMBER,
					T3.FEETYPEID,
					T3.VASREFERENCE ,
					T4.FEETYPECODE,
					T4.FEETYPEDESC,
					FM.FINID,
					FM.FINREFERENCE,
					T5.RECEIPTMODE RECEIPTTYPE,
					T1.PAIDTDS
				FROM FINFEERECEIPTS_TEMP T1
				INNER JOIN FINRECEIPTDETAIL_TEMP T2 ON T1.RECEIPTID = T2.RECEIPTID
				INNER JOIN (SELECT FEEID, VASREFERENCE, FEETYPEID, FINID FROM FINFEEDETAIL_TEMP
					UNION ALL
					SELECT FEEID, VASREFERENCE, FEETYPEID, FINID FROM FINFEEDETAIL 
					WHERE NOT EXISTS(SELECT 1 FROM FINFEERECEIPTS_TEMP WHERE FEEID = FINFEEDETAIL.FEEID)
					) T3 ON T3.FEEID = T1.FEEID
				INNER JOIN (SELECT FINID, FINREFERENCE FROM FINANCEMAIN_TEMP
					UNION ALL
					SELECT FINID, FINREFERENCE FROM FINANCEMAIN 
					WHERE NOT EXISTS(SELECT 1 FROM FINANCEMAIN_TEMP WHERE FINID = FINANCEMAIN.FINID)
					) FM ON FM.FINID = T3.FINID
				LEFT JOIN FEETYPES T4 ON T3.FEETYPEID = T4.FEETYPEID
				INNER JOIN FINRECEIPTHEADER_TEMP T5 ON T1.RECEIPTID = T5.RECEIPTID
			 ]]>
		</createView>
	</changeSet>

	<changeSet id="FFRV_1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finfeereceipts_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FFRV_2_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finfeereceipts_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FFRV_2" author="Gopal.p">
		<createView viewName="FINFEERECEIPTS_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ID,
					T1.FEEID,
					T1.RECEIPTID,
					T1.PAIDAMOUNT,
					T1.VERSION ,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.AMOUNT RECEIPTAMOUNT,
					T2.TRANSACTIONREF,
					T2.FAVOURNUMBER,
					T3.FEETYPEID,
					T3.VASREFERENCE ,
					T4.FEETYPECODE,
					T4.FEETYPEDESC,
					FM.FINID,
					FM.FINREFERENCE,
					T5.RECEIPTMODE RECEIPTTYPE,
					T1.PAIDTDS
				FROM FINFEERECEIPTS T1
				INNER JOIN FINRECEIPTDETAIL T2 ON T1.RECEIPTID = T2.RECEIPTID
				INNER JOIN (SELECT FEEID, VASREFERENCE, FEETYPEID, FINID FROM FINFEEDETAIL_TEMP
					UNION ALL
					SELECT FEEID, VASREFERENCE, FEETYPEID, FINID FROM FINFEEDETAIL 
					WHERE NOT EXISTS(SELECT 1 FROM FINFEERECEIPTS_TEMP WHERE FEEID = FINFEEDETAIL.FEEID)
					) T3 ON T3.FEEID = T1.FEEID
				INNER JOIN (SELECT FINID, FINREFERENCE FROM FINANCEMAIN_TEMP
					UNION ALL
					SELECT FINID, FINREFERENCE FROM FINANCEMAIN 
					WHERE NOT EXISTS(SELECT 1 FROM FINANCEMAIN_TEMP WHERE FINID = FINANCEMAIN.FINID)
					) FM ON FM.FINID = T3.FINID
				LEFT JOIN FEETYPES T4 ON T3.FEETYPEID = T4.FEETYPEID
				INNER JOIN FINRECEIPTHEADER T5 ON T1.RECEIPTID = T5.RECEIPTID	
			 ]]>
		</createView>
	</changeSet>

	<changeSet id="FFRV_2_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finfeereceipts_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FFRV_3_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finfeereceipts_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FFRV_3" author="Gopal.p">
		<createView viewName="FINFEERECEIPTS_VIEW" replaceIfExists="true">
		   <![CDATA[
				SELECT T1.ID,
					T1.FEEID,
					T1.RECEIPTID,
					T1.PAIDAMOUNT,
					T1.VERSION ,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.AMOUNT RECEIPTAMOUNT,
					T2.TRANSACTIONREF,
					T2.FAVOURNUMBER,
					T3.FEETYPEID,
					T3.VASREFERENCE ,
					T4.FEETYPECODE,
					T4.FEETYPEDESC,
					FM.FINID,
					FM.FINREFERENCE,
					T5.RECEIPTMODE RECEIPTTYPE,
					T1.PAIDTDS
				FROM FINFEERECEIPTS_TEMP T1
				INNER JOIN FINRECEIPTDETAIL T2 ON T1.RECEIPTID = T2.RECEIPTID
				INNER JOIN (SELECT FEEID, VASREFERENCE, FEETYPEID, FINID FROM FINFEEDETAIL_TEMP
					UNION ALL
					SELECT FEEID, VASREFERENCE, FEETYPEID, FINID FROM FINFEEDETAIL 
					WHERE NOT EXISTS(SELECT 1 FROM FINFEERECEIPTS_TEMP WHERE FEEID = FINFEEDETAIL.FEEID)
					) T3 ON T3.FEEID = T1.FEEID
				INNER JOIN (SELECT FINID, FINREFERENCE FROM FINANCEMAIN_TEMP
					UNION ALL
					SELECT FINID, FINREFERENCE FROM FINANCEMAIN 
					WHERE NOT EXISTS(SELECT 1 FROM FINANCEMAIN_TEMP WHERE FINID = FINANCEMAIN.FINID)
					) FM ON FM.FINID = T3.FINID
				LEFT JOIN FEETYPES T4 ON T3.FEETYPEID = T4.FEETYPEID
				INNER JOIN FINRECEIPTHEADER T5 ON T1.RECEIPTID = T5.RECEIPTID
				UNION ALL
				SELECT T1.ID,
					T1.FEEID,
					T1.RECEIPTID,
					T1.PAIDAMOUNT,
					T1.VERSION ,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.AMOUNT RECEIPTAMOUNT,
					T2.TRANSACTIONREF,
					T2.FAVOURNUMBER,
					T3.FEETYPEID,
					T3.VASREFERENCE,
					T4.FEETYPECODE,
					T4.FEETYPEDESC,
					FM.FINID,
					FM.FINREFERENCE,
					T5.RECEIPTMODE RECEIPTTYPE,
					T1.PAIDTDS
				FROM FINFEERECEIPTS T1
				INNER JOIN FINRECEIPTDETAIL T2 ON T1.RECEIPTID = T2.RECEIPTID
				INNER JOIN (SELECT FEEID, VASREFERENCE, FEETYPEID, FINID FROM FINFEEDETAIL_TEMP
					UNION ALL
					SELECT FEEID, VASREFERENCE, FEETYPEID, FINID FROM FINFEEDETAIL 
					WHERE NOT EXISTS(SELECT 1 FROM FINFEERECEIPTS_TEMP WHERE FEEID = FINFEEDETAIL.FEEID)
					) T3 ON T3.FEEID = T1.FEEID
				INNER JOIN (SELECT FINID, FINREFERENCE FROM FINANCEMAIN_TEMP
					UNION ALL
					SELECT FINID, FINREFERENCE FROM FINANCEMAIN 
					WHERE NOT EXISTS(SELECT 1 FROM FINANCEMAIN_TEMP WHERE FINID = FINANCEMAIN.FINID)
					) FM ON FM.FINID = T3.FINID
				LEFT JOIN FEETYPES T4 ON T3.FEETYPEID = T4.FEETYPEID
				INNER JOIN FINRECEIPTHEADER T5 ON T1.RECEIPTID = T5.RECEIPTID
				WHERE (NOT EXISTS(SELECT 1 FROM FINFEERECEIPTS_TEMP WHERE (ID = T1.ID)))
			]]>
		</createView>
	</changeSet>

	<changeSet id="FFRV_3_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finfeereceipts_view');
			]]>
		</sql>
	</changeSet>

	<!-- (CDV) :: Fin Fee Receipt Views handle in single place end -->

	<!-- (CDV) :: Cheque Header/mantainance Views handle in single place start -->

	<changeSet id="CDV_1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'chequeheader_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="CDV_1" author="Gopal.p">
		<createView viewName="CHEQUEHEADER_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.HEADERID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.NOOFCHEQUES,
					T1.TOTALAMOUNT,
					T1.ACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM CHEQUEHEADER T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
			]]>
		</createView>
	</changeSet>

	<changeSet id="CDV_1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'chequeheader_aview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="CDV_2_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'chequeheader_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="CDV_2" author="Gopal.p">
		<createView viewName="CHEQUEHEADER_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.HEADERID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.NOOFCHEQUES,
					T1.TOTALAMOUNT,
					T1.ACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM CHEQUEHEADER_TEMP T1
				INNER JOIN FINANCEMAIN_TEMP FM ON FM.FINID = T1.FINID
				UNION ALL
				SELECT T1.HEADERID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.NOOFCHEQUES,
					T1.TOTALAMOUNT,
					T1.ACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM CHEQUEHEADER T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				WHERE NOT EXISTS ( SELECT 1 FROM CHEQUEHEADER_TEMP
					WHERE CHEQUEHEADER_TEMP.HEADERID = T1.HEADERID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="CDV_2_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'chequeheader_view');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="CDV_3_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'chequedetailmaintain_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="CDV_3" author="Gopal.p">
		<createView viewName="CHEQUEDETAILMAINTAIN_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.HEADERID,
					T2.FINID,
					T2.FINREFERENCE,
					T1.NOOFCHEQUES,
					T1.TOTALAMOUNT,
					T1.ACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM CHEQUEHEADER_TEMP T1
				JOIN FINANCEMAIN T2 ON T1.FINID = T2.FINID
				UNION ALL
				SELECT T1.HEADERID,
					T2.FINID,
					T2.FINREFERENCE,
					T1.NOOFCHEQUES,
					T1.TOTALAMOUNT,
					T1.ACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM CHEQUEHEADER T1
				JOIN FINANCEMAIN T2 ON T1.FINID = T2.FINID
				WHERE NOT EXISTS ( SELECT 1 FROM CHEQUEHEADER_TEMP
					WHERE CHEQUEHEADER_TEMP.HEADERID = T1.HEADERID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="CDV_3_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'chequedetailmaintain_view');	
			]]>
		</sql>
	</changeSet>

	<!-- (CDV) :: Cheque Header/mantainance Views handle in single place end -->

	<!-- (LFV) :: Linked Finance views are handle in single place start -->

	<changeSet id="LFV_1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'linkedfinances_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="LFV_1" author="Gopal.p">
		<createView viewName="LINKEDFINANCES_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ID, 
					F.FINID,
					F.FINREFERENCE,  
					T1.LINKEDREFERENCE, 
					F.FINTYPE LINKEDFINTYPE, 
					T1.VERSION, 
					T1.LASTMNTBY, 
					T1.LASTMNTON, 
					T1.RECORDSTATUS, 
					T1.ROLECODE, 
					T1.NEXTROLECODE,
					T1.TASKID, 
					T1.NEXTTASKID, 
					T1.RECORDTYPE, 
					T1.WORKFLOWID, 
					C.CUSTSHRTNAME, 
					T1.STATUS
				FROM LINKEDFINANCES T1 
				INNER JOIN FINANCEMAIN_TEMP F ON T1.LINKEDREFERENCE = F.FINREFERENCE AND F.QUICKDISB = 1 
				INNER JOIN CUSTOMERS C ON F.CUSTID = C.CUSTID
				UNION ALL 
				SELECT T1.ID, 
					F.FINID,
					T1.FINREFERENCE,  
					T1.LINKEDREFERENCE, 
					F.FINTYPE LINKEDFINTYPE, 
					T1.VERSION, 
					T1.LASTMNTBY, 
					T1.LASTMNTON, 
					T1.RECORDSTATUS, 
					T1.ROLECODE, 
					T1.NEXTROLECODE,
					T1.TASKID, 
					T1.NEXTTASKID, 
					T1.RECORDTYPE, 
					T1.WORKFLOWID, 
					C.CUSTSHRTNAME, 
					T1.STATUS
				FROM LINKEDFINANCES T1 
				INNER JOIN FINANCEMAIN F ON T1.LINKEDREFERENCE = F.FINREFERENCE 
				INNER JOIN CUSTOMERS C ON F.CUSTID = C.CUSTID
			]]>	
		</createView>
	</changeSet>

	<changeSet id="LFV_1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'linkedfinances_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="LFV_2_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'linkedfinances_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="LFV_2" author="Gopal.p">
		<createView viewName="LINKEDFINANCES_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ID, 
					F.FINID,
					T1.FINREFERENCE,  
					T1.LINKEDREFERENCE, 
					F.FINTYPE LINKEDFINTYPE, 
					T1.VERSION, 
					T1.LASTMNTBY, 
					T1.LASTMNTON, 
					T1.RECORDSTATUS, 
					T1.ROLECODE, 
					T1.NEXTROLECODE,
					T1.TASKID, 
					T1.NEXTTASKID, 
					T1.RECORDTYPE, 
					T1.WORKFLOWID, 
					C.CUSTSHRTNAME, 
					T1.STATUS,
					F.QUICKDISB
				FROM LINKEDFINANCES_TEMP T1 
				INNER JOIN FINANCEMAIN_TEMP F ON T1.LINKEDREFERENCE = F.FINREFERENCE AND F.QUICKDISB = 1 
				INNER JOIN CUSTOMERS C ON F.CUSTID = C.CUSTID
				UNION ALL 
				SELECT T1.ID, 
					F.FINID,
					T1.FINREFERENCE,  
					T1.LINKEDREFERENCE, 
					F.FINTYPE LINKEDFINTYPE, 
					T1.VERSION, 
					T1.LASTMNTBY, 
					T1.LASTMNTON, 
					T1.RECORDSTATUS, 
					T1.ROLECODE, 
					T1.NEXTROLECODE,
					T1.TASKID, 
					T1.NEXTTASKID, 
					T1.RECORDTYPE, 
					T1.WORKFLOWID, 
					C.CUSTSHRTNAME, 
					T1.STATUS,
					F.QUICKDISB
				FROM LINKEDFINANCES_TEMP T1 
				INNER JOIN FINANCEMAIN F ON T1.LINKEDREFERENCE = F.FINREFERENCE 
				INNER JOIN CUSTOMERS C ON F.CUSTID = C.CUSTID
			]]>	
		</createView>
	</changeSet>

	<changeSet id="LFV_2_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'linkedfinances_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="LFV_3_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'linkedfinances_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="LFV_3" author="Gopal.p">
		<createView viewName="LINKEDFINANCES_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ID, 
					F.FINID,
					T1.FINREFERENCE,  
					T1.LINKEDREFERENCE, 
					F.FINTYPE LINKEDFINTYPE, 
					T1.VERSION, 
					T1.LASTMNTBY, 
					T1.LASTMNTON, 
					T1.RECORDSTATUS, 
					T1.ROLECODE, 
					T1.NEXTROLECODE,
					T1.TASKID, 
					T1.NEXTTASKID, 
					T1.RECORDTYPE, 
					T1.WORKFLOWID, 
					C.CUSTSHRTNAME, 
					T1.STATUS
				FROM LINKEDFINANCES_TEMP T1 
				INNER JOIN FINANCEMAIN F ON T1.LINKEDREFERENCE = F.FINREFERENCE 
				INNER JOIN CUSTOMERS C ON F.CUSTID = C.CUSTID
				UNION ALL
				SELECT	T1.ID, 
					F.FINID,
					T1.FINREFERENCE,  
					T1.LINKEDREFERENCE, 
					F.FINTYPE LINKEDFINTYPE, 
					T1.VERSION, T1.LASTMNTBY, 
					T1.LASTMNTON, 
					T1.RECORDSTATUS, 
					T1.ROLECODE, 
					T1.NEXTROLECODE,
					T1.TASKID, 
					T1.NEXTTASKID, 
					T1.RECORDTYPE, 
					T1.WORKFLOWID,  
					C.CUSTSHRTNAME, 
					T1.STATUS
				FROM LINKEDFINANCES T1 
				INNER JOIN FINANCEMAIN F ON T1.LINKEDREFERENCE = F.FINREFERENCE 
				INNER JOIN CUSTOMERS C ON F.CUSTID = C.CUSTID
				WHERE NOT EXISTS (SELECT 1 FROM LINKEDFINANCES_TEMP WHERE  FINREFERENCE = T1.FINREFERENCE)
			]]>
		</createView>
	</changeSet>

	<changeSet id="LFV_3_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'linkedfinances_view');
			]]>
		</sql>
	</changeSet>

	<!-- (LFV) :: Linked Finance views are handle in single place end -->

	<changeSet id="ST#2367.1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'custfinanceexposure_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.1" author="Gopal.p">
		<createView viewName="CUSTFINANCEEXPOSURE_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FM.FINID,
					FM.FINREFERENCE,
					FM.FINCOMMITMENTREF,
					CMT.CMTTITLE,
					FM.CUSTID,
					FM.NUMBEROFTERMS,
					FM.FINSTARTDATE,
					FM.FINTYPE,
					FM.FINAMOUNT + FM.TOTALPROFIT TOTALORIGINAL,
					CMT.CMTAMOUNT,
					CMT.CMTAVAILABLE,
					CMT.CMTEXPDATE CMTEXPIRYDATE,
					FM.FINAMOUNT - FM.FINREPAYMENTAMOUNT + FPD.TOTALPFTBAL TOTALOUTSTANDING,
					FM.MATURITYDATE,
					FM.TOTALREPAYAMT,
					FM.FINSTATUS
				FROM FINANCEMAIN FM
				JOIN FINPFTDETAILS FPD ON FM.FINID = FPD.FINID
				LEFT JOIN COMMITMENTS CMT ON CMT.CMTREFERENCE = FM.FINCOMMITMENTREF
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'custfinanceexposure_view');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.2_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'gl_subheadcodes_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.2" author="Gopal.p">
		<createView viewName="GL_SUBHEADCODES_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FM.FINID,
					FM.FINREFERENCE,
					NULL ENTITYCODE,
					0 ALWFLEXI,
					FM.FINBRANCH,
					NULL BTLOAN,
					BV.CODE BUSINESSVERTICAL,
					CUST.SUBCATEGORY EMPTYPE,
					PC.PCCITYNAME BRANCHCITY,
					FT.FINCOLLATERALREQ,
					RF.FINDIVISION
				FROM FINANCEMAIN_TEMP FM
				JOIN RMTFINANCETYPES FT ON FM.FINTYPE = FT.FINTYPE
				JOIN CUSTOMERS CUST ON CUST.CUSTID = FM.CUSTID
				JOIN RMTBRANCHES BR ON BR.BRANCHCODE = FM.FINBRANCH
				JOIN RMTPROVINCEVSCITY PC ON PC.PCCITY = BR.BRANCHCITY
				LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = FM.BUSINESSVERTICAL
				JOIN RMTFINANCETYPES RF ON RF.FINTYPE = FM.FINTYPE
				UNION ALL
				SELECT FM.FINID,
					FM.FINREFERENCE,
					NULL ENTITYCODE,
					0 ALWFLEXI,
					FM.FINBRANCH,
					NULL BTLOAN,
					BV.CODE BUSINESSVERTICAL,
					CUST.SUBCATEGORY EMPTYPE,
					PC.PCCITYNAME BRANCHCITY,
					FT.FINCOLLATERALREQ,
					RF.FINDIVISION
				FROM FINANCEMAIN FM
				JOIN RMTFINANCETYPES FT ON FM.FINTYPE = FT.FINTYPE
				JOIN CUSTOMERS CUST ON CUST.CUSTID = FM.CUSTID
				JOIN RMTBRANCHES BR ON BR.BRANCHCODE = FM.FINBRANCH
				JOIN RMTPROVINCEVSCITY PC ON PC.PCCITY = BR.BRANCHCITY
				JOIN BUSINESS_VERTICAL BV ON BV.ID = FM.BUSINESSVERTICAL
				JOIN RMTFINANCETYPES RF ON RF.FINTYPE = FM.FINTYPE
				WHERE NOT EXISTS (SELECT 1 FROM FINANCEMAIN_TEMP WHERE FINANCEMAIN_TEMP.FINID = FM.FINID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.2_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'gl_subheadcodes_view');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.3_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finirrdetails_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.3" author="Gopal.p">
		<createView viewName="FINIRRDETAILS_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.IRRID,
					FM.FINID,
					FM.FINREFERENCE,
					T2.IRRCODE,
					T2.IRRCODEDESC,
					T1.IRR,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM FINIRRDETAILS_TEMP T1
				INNER JOIN FINANCEMAIN_TEMP FM ON FM.FINID = T1.FINID
				JOIN IRRCODES T2 ON T1.IRRID = T2.IRRID
				UNION ALL
				SELECT T1.IRRID,
					FM.FINID,
					FM.FINREFERENCE,
					T2.IRRCODE,
					T2.IRRCODEDESC,
					T1.IRR,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM FINIRRDETAILS T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				JOIN IRRCODES T2 ON T1.IRRID = T2.IRRID
				WHERE NOT (EXISTS (SELECT 1 FROM FINIRRDETAILS_TEMP WHERE FINIRRDETAILS_TEMP.IRRID = T1.IRRID))
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.3_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finirrdetails_view');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.4_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financeeligibilitydetail_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.4" author="Gopal.p">
		<createView viewName="FINANCEELIGIBILITYDETAIL_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINID,
					T1.FINREFERENCE,
					T1.ELGRULECODE,
					T1.RULERESULTTYPE,
					T1.RULERESULT,
					T1.CANOVERRIDE,
					T1.OVERRIDEPERC,
					T1.USEROVERRIDE,
					T2.RULECODE LOVDESCELGRULECODE,
					T2.RULECODEDESC LOVDESCELGRULECODEDESC
				FROM FINANCEELIGIBILITYDETAIL T1
				JOIN RULES T2 ON T1.ELGRULECODE = T2.RULEID
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.4_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financeeligibilitydetail_view');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.5_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financescoreheader_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.5" author="Gopal.p">
		<createView viewName="FINANCESCOREHEADER_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.HEADERID,
					T1.GROUPID,
					T1.FINID,
					T1.FINREFERENCE,
					T1.MINSCORE,
					T1.OVERRIDE,
					T1.OVERRIDESCORE,
					T1.CREDITWORTH,
					T2.SCOREGROUPCODE AS GROUPCODE,
					T2.SCOREGROUPNAME AS GROUPCODEDESC,
					T1.CUSTID
				FROM FINANCESCOREHEADER T1
				JOIN RMTSCORINGGROUP T2 ON T1.GROUPID = T2.SCOREGROUPID
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.5_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financescoreheader_view');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.6_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financechecklistref_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.6" author="Gopal.p">
		<createView viewName="FINANCECHECKLISTREF_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FM.FINID, 
					FM.FINREFERENCE,
					T1.QUESTIONID,
					T1.ANSWER,
					T1.REMARKS,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.CHECKLISTDESC AS LOVDESCQUESDESC,
					T3.ANSDESC AS LOVDESCANSWERDESC,
					T1.INSTRUCTIONUID
				FROM FINANCECHECKLISTREF T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				JOIN BMTCHECKLIST T2 ON T1.QUESTIONID = T2.CHECKLISTID
				JOIN RMTCHECKLISTDETAILS T3 ON T1.QUESTIONID = T3.CHECKLISTID AND T1.ANSWER = T3.ANSSEQNO
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.6_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financechecklistref_aview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.7_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financechecklistref_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.7" author="Gopal.p">
		<createView viewName="FINANCECHECKLISTREF_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FM.FINID,
					FM.FINREFERENCE,
					T1.QUESTIONID,
					T1.ANSWER,
					T1.REMARKS,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.CHECKLISTDESC AS LOVDESCQUESDESC,
					T3.ANSDESC AS LOVDESCANSWERDESC,
					T1.INSTRUCTIONUID
				FROM FINANCECHECKLISTREF_TEMP T1
				INNER JOIN FINANCEMAIN_TEMP FM ON FM.FINID = T1.FINID
				JOIN BMTCHECKLIST T2 ON T1.QUESTIONID = T2.CHECKLISTID
				JOIN RMTCHECKLISTDETAILS T3 ON T1.QUESTIONID = T3.CHECKLISTID AND T1.ANSWER = T3.ANSSEQNO
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.7_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financechecklistref_view');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.8_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'reinstatefinance_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.8" author="Gopal.p">
		<createView viewName="REINSTATEFINANCE_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T2.FINID,
					T2.FINREFERENCE,
					T2.FINTYPE,
					T3.FINTYPEDESC,
					T3.FINCATEGORY,
					T4.CUSTCIF,
					T2.FINBRANCH,
					T5.BRANCHDESC,
					T2.FINSTARTDATE,
					T2.NUMBEROFTERMS,
					T2.GRACETERMS,
					T2.MATURITYDATE,
					T2.FINCCY,
					T2.FINAMOUNT,
					T2.FINREPAYMENTAMOUNT,
					T2.SCHEDULEMETHOD,
					T2.FEECHARGEAMT,
					T2.DOWNPAYBANK,
					T2.DOWNPAYSUPL,
					T2.PROFITDAYSBASIS,
					T2.EFFECTIVERATEOFRETURN,
					T2.TOTALPROFIT,
					T3.FINDIVISION AS LOVDESCFINDIVISION,
					T2.FINPREAPPROVEDREF,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM REINSTATEFINANCE_TEMP T1
				JOIN REJECTFINANCEMAIN T2 ON T1.FINREFERENCE = T2.FINREFERENCE
				JOIN RMTFINANCETYPES T3 ON T2.FINTYPE = T3.FINTYPE
				JOIN CUSTOMERS T4 ON T2.CUSTID = T4.CUSTID
				JOIN RMTBRANCHES T5 ON T2.FINBRANCH = T5.BRANCHCODE
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.8_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'reinstatefinance_view');	
			]]>
		</sql>
	</changeSet>

</databaseChangeLog>