<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">
	<property name="add.schema" value="dbo." dbms="mssql" />
	<property name="add.schema" value=" " dbms="oracle" />
	<property name="add.schema" value=" " dbms="postgresql" />
	<property name="call.substr" value="substring" dbms="mssql" />
	<property name="call.substr" value="substr" dbms="oracle" />
	<property name="call.substr" value="substring" dbms="postgresql" />
	<property name="call.auditdb" value="PFFBFSQCAudit.." dbms="mssql" />
	<property name="call.auditdb" value=" " dbms="oracle" />
	<property name="call.concatenate" value="+" dbms="mssql" />
	<property name="call.concatenate" value="||" dbms="oracle" />
	<property name="call.concatenate" value="||" dbms="postgresql" />
	<property name="call.collength" value="LEN" dbms="mssql" />
	<property name="call.collength" value="LENGTH" dbms="oracle" />
	<property name="call.collength" value="LENGTH" dbms="postgresql" />
	<property name="call.date" value="getdate()" dbms="mssql" />
	<property name="call.date" value="sysdate" dbms="oracle" />
	<property name="call.date" value="now()::timestamp" dbms="postgresql" />

	<changeSet id="pre_run_for_pgp" author="Gopal.p" runAlways="true" dbms="postgresql">
		<sql>
			Set search_path = plf,public,pg_catalog;
		</sql>
	</changeSet>

	<!-- (FMV) :: Finance Main Views handle in single place start -->

	<changeSet id="FMV_1.1_pre" author="Gopal.p" dbms="postgresql">
		<sql> 
			<![CDATA[ 
				select deps_save_and_drop_dependencies ('plf', 'financemain_lview'); 
			]]>
		</sql>
	</changeSet>

	<changeSet id="FMV_1.1" author="Gopal.p">
		<createView viewName="FINANCEMAIN_LVIEW" replaceIfExists="true">
			<![CDATA[
		 		SELECT T1.FINID,
		 			T1.FINREFERENCE,
					T1.INVESTMENTREF,
					T1.FINTYPE,
					T1.FINCCY,
					T1.FINAMOUNT,
					T1.DOWNPAYMENT,
					T1.FEECHARGEAMT,
					T1.SCHEDULEMETHOD,
					T1.NUMBEROFTERMS,
					T1.RECORDSTATUS,
					T1.RECORDTYPE,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.FINBRANCH,
					T1.FINCONTRACTDATE,
					T1.LINKEDFINREF,
					T1.NEXTUSERID,
					T1.PRIORITY,
					T1.WORKFLOWID,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.FINPREAPPROVEDREF,
					T1.RCDMAINTAINSTS,
					T1.FINCURRASSETVALUE,
					T1.CALTERMS,
					T1.DEVIATIONAPPROVAL,
					T1.FINPURPOSE,
					T1.INITIATEDATE,
					T1.FINASSETVALUE,
					T2.CUSTCIF LOVDESCCUSTCIF,
					T2.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
					T2.CUSTPASSPORTNO LOVDESCCUSTPASSPORTNO,
					T2.CUSTDOB LOVDESCCUSTDOB,
					T2.CUSTCRCPR LOVDESCCUSTCRCPR,
					T2.PHONENUMBER,
					T3.FINCATEGORY LOVDESCPRODUCTCODENAME,
					T3.FINDIVISION LOVDESCFINDIVISION,
					T3.PRODUCT LOVDESCFINPRODUCT,
					T3.FINTYPEDESC LOVDESCFINTYPENAME,
					COALESCE(T4.ROLEDESC, ${add.schema}FN_GET_ROLEDESC(T1.NEXTROLECODE)) LOVDESCREQUESTSTAGE,
					T1.SAMPLINGREQUIRED,
					T1.ADVANCEEMI,
					T1.ADVEMITERMS,
					T1.BPIPFTDAYSBASIS,
					T1.GRACETERMS,
					T1.PRODUCTCATEGORY,
					T1.REQLOANAMT,
					T1.REQLOANTENOR,
					T1.FINOCRREQUIRED,
					T1.OFFERPRODUCT,
					T1.OFFERAMOUNT,
					T1.CUSTSEGMENTATION,
					T1.BASEPRODUCT,
					T1.PROCESSTYPE,
					T1.BUREAUTIMESERIES,
					T1.CAMPAIGNNAME,
					T1.EXISTINGLANREFNO,
					T1.LEADSOURCE,
					T1.POSOURCE,
					T1.RSA,
					T1.VERIFICATION,
					T1.SOURCINGBRANCH,
					T1.SOURCHANNELCATEGORY,
					T1.ASMNAME,
					T1.OFFERID,
					T1.APPLICATIONNO,
					T1.LASTMNTON,
					T1.VERSION,
					T1.TDSAPPLICABLE,
					T2.CUSTID,
					T1.INSTBASEDSCHD,
					T1.ALLOWSUBVENTION,
					T1.TDSTYPE,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS,
					T1.SCHDVERSION,
					T1.SUBVENTIONFROM,
					T1.MANUFACTURERDEALERID,
					T5.DEALERNAME MANUFACTURERDEALERNAME,
					T5.CODE MANUFACTURERDEALERCODE,
					T1.ESCROW,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME
				FROM FINANCEMAIN_TEMP T1
				INNER JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
				INNER JOIN RMTFINANCETYPES T3 ON T3.FINTYPE = T1.FINTYPE
				LEFT JOIN SECROLES T4 ON T1.NEXTROLECODE= T4.ROLECD
				LEFT JOIN AMTVEHICLEDEALER T5 ON T1.MANUFACTURERDEALERID = T5.DEALERID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
			]]>
		</createView>
	</changeSet>

	<changeSet id="FMV_1.1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_lview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="FMV_2.1_pre" author="Gopal.p" dbms="postgresql">
		<sql> 
			<![CDATA[ 
				select deps_save_and_drop_dependencies ('plf', 'financemain_aview'); 
			]]>
		</sql>
	</changeSet>

	<changeSet id="FMV_2.1" author="Gopal.p">
		<createView viewName="FINANCEMAIN_AVIEW" replaceIfExists="true">
			 <![CDATA[ 
				SELECT T1.FINID,
					T1.FINREFERENCE,
			    	T1.INVESTMENTREF,
			    	T1.NUMBEROFTERMS,
			    	T1.GRCPERIODENDDATE,
			    	T1.ALLOWGRCPERIOD,
			    	T1.GRACEBASERATE,
			    	T1.GRACESPECIALRATE,
			    	T1.GRCPFTRATE,
			    	T1.GRCPFTFRQ,
			    	T1.NEXTGRCPFTDATE,
			    	T1.ALLOWGRCPFTRVW,
			    	T1.GRCPFTRVWFRQ,
			    	T1.NEXTGRCPFTRVWDATE,
			    	T1.ALLOWGRCCPZ,
			    	T1.GRCCPZFRQ,
			    	T1.NEXTGRCCPZDATE,
			    	T1.REPAYBASERATE,
			    	T1.REPAYSPECIALRATE,
			    	T1.REPAYPROFITRATE,
			    	T1.REPAYFRQ,
			    	T1.NEXTREPAYDATE,
			    	T1.REPAYPFTFRQ,
			    	T1.NEXTREPAYPFTDATE,
			    	T1.ALLOWREPAYRVW,
			    	T1.REPAYRVWFRQ,
			    	T1.NEXTREPAYRVWDATE,
			    	T1.ALLOWREPAYCPZ,
			    	T1.REPAYCPZFRQ,
			    	T1.NEXTREPAYCPZDATE,
			    	T1.MATURITYDATE,
			    	T1.CPZATGRACEEND,
			    	T1.DOWNPAYMENT,
			    	T1.GRACEFLATAMOUNT,
			    	T1.REQREPAYAMOUNT,
			    	T1.TOTALPROFIT,
			    	T1.TOTALCPZ,
			    	T1.TOTALGROSSPFT,
			    	T1.TOTALGROSSGRCPFT,
			    	T1.TOTALGRACEPFT,
			    	T1.TOTALGRACECPZ,
			    	T1.GRCRATEBASIS,
			    	T1.REPAYRATEBASIS,
			    	T1.FINTYPE,
			    	T1.FINREMARKS,
			    	T1.FINCCY,
			    	T1.SCHEDULEMETHOD,
			    	T1.PROFITDAYSBASIS,
			    	T1.REQMATURITY,
			    	T1.CALTERMS,
			    	T1.CALMATURITY,
			    	T1.FIRSTREPAY,
			    	T1.LASTREPAY,
			    	T1.FINSTARTDATE,
			    	T1.FINAMOUNT,
					T1.FINAMOUNT + T1.FEECHARGEAMT - T1.DOWNPAYMENT LOVDESCFINANCINGAMOUNT,
			    	T1.FINREPAYMENTAMOUNT,
			    	T1.CUSTID,
			   		T1.DEFFERMENTS,
			    	T1.PLANDEFERCOUNT,
			    	T1.FINBRANCH,
			    	T1.FINSOURCEID,
			    	T1.ALLOWEDDEFRPYCHANGE,
			    	T1.AVAILEDDEFRPYCHANGE,
			    	T1.ALLOWEDDEFFRQCHANGE,
			    	T1.AVAILEDDEFFRQCHANGE,
			    	T1.RECALTYPE,
			    	T1.FINASSETVALUE,
			    	T1.FINISACTIVE,
			    	T1.LIMITVALID,
			    	T1.OVERRIDELIMIT,
			    	T1.VERSION,
			    	T1.LASTMNTBY,
			    	T1.LASTMNTON,
			    	T1.RECORDSTATUS,
			    	T1.ROLECODE,
			    	T1.NEXTROLECODE,
			    	T1.TASKID,
			    	T1.NEXTTASKID,
			    	T1.RECORDTYPE,
			    	T1.WORKFLOWID,
					T7.FINTYPEDESC LOVDESCFINTYPENAME,
					T7.FINMAXAMOUNT LOVDESCFINMAXAMT,
					T7.FINMINAMOUNT LOVDESCFINMINAMOUNT,
			    	T1.MINDOWNPAYPERC,
					T7.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
					T7.FINISDWPAYREQUIRED LOVDESCDWNPAYREQ,
					T7.FINMAXDIFFERMENT LOVDESCFINMAXDIFFERMENT,
					T12.BRANCHDESC LOVDESCFINBRANCHNAME,
					T12.BRANCHPROVINCE FINBRANCHPROVINCECODE,
			    	T1.LASTREPAYDATE,
			    	T1.LASTREPAYPFTDATE,
			    	T1.LASTREPAYRVWDATE,
			    	T1.LASTREPAYCPZDATE,
			    	T1.ALLOWGRCREPAY,
			    	T1.GRCSCHDMTHD,
			    	T1.GRCMARGIN,
			    	T1.REPAYMARGIN,
			    	T1.FINCURRASSETVALUE,
			    	T1.FINCOMMITMENTREF,
			    	T1.FINLIMITREF,
			    	T1.FINCONTRACTDATE,
					T17.ACRTILLLBD LOVDESCACCRUEDTILLLBD,
			    	T7.FINRVWRATEAPPLFOR,
			    	T1.TOTALREPAYAMT,
			    	T1.CLOSINGSTATUS,
			    	T1.FINAPPROVEDDATE,
			    	T1.FEECHARGEAMT,
			    	T1.BLACKLISTED,
			    	T1.FINREPAYPFTONFRQ,
			    	T1.ANUALIZEDPERCRATE,
			    	T1.EFFECTIVERATEOFRETURN,
			    	T1.MIGRATEDFINANCE,
			    	T1.SCHEDULEMAINTAINED,
			    	T1.SCHEDULEREGENERATED,
			    	T1.FINPURPOSE,
					T39.LOANPURPOSEDESC LOVDESCFINPURPOSENAME,
			    	T1.FINSTATUS,
			    	T1.FINSTSREASON,
			    	T1.INITIATEUSER,
					T7.FINSCHEDULEON LOVDESCFINSCHEDULEON,
			    	T1.CUSTDSR,
			    	T1.JOINTACCOUNT,
			    	T1.JOINTCUSTID,
			    	T1.DOWNPAYBANK,
			    	T1.DOWNPAYSUPL,
			    	T1.SECURITYCOLLATERAL,
			    	T1.APPROVED,
			    	T1.DISCREPANCY,
			    	T1.LIMITAPPROVED,
			    	T1.GRACETERMS,
					T7.FINDIVISION LOVDESCFINDIVISION,
			    	T1.RCDMAINTAINSTS,
			    	T1.FINREPAYMETHOD,
			    	T1.GRCPROFITDAYSBASIS,
			    	T1.STEPFINANCE,
			    	T1.STEPTYPE,
				    T1.STEPPOLICY,
				    T1.ALWMANUALSTEPS,
				    T1.NOOFSTEPS,
				    T1.LINKEDFINREF,
				    T1.NEXTUSERID,
				    T1.PRIORITY,
					T24.POLICYDESC LOVDESCSTEPPOLICYNAME,
				    T1.GRCMINRATE,
				    T1.GRCMAXRATE,
				    T1.RPYMINRATE,
				    T1.RPYMAXRATE,
				    T1.DEVIATIONAPPROVAL,
				    T1.MANUALSCHEDULE,
				    T1.CREDITINSAMT,
				    T27.CUSTSTSDESCRIPTION,
				    T1.INITIATEDATE,
				    T1.FINPREAPPROVEDREF,
				    T1.ACCOUNTSOFFICER,
					T28.DEALERNAME LOVDESCACCOUNTSOFFICER,
					T28.DEALERCITY LOVDESCSOURCECITY,
				    T1.DSACODE,
					T30.ROFFICERDESC DSACODEDESC,
				    T1.TDSAPPLICABLE,
				    T1.MANDATEID,
				    T1.DROPLINEFRQ,
				    T1.FIRSTDROPLINEDATE,
				    T1.PFTSERVICINGODLIMIT,
				    T1.ALWBPI,
				    T1.BPITREATMENT,
				    T1.PLANEMIHALW,
				    T1.PLANEMIHMETHOD,
				    T1.PLANEMIHMAXPERYEAR,
				    T1.PLANEMIHMAX,
				    T1.PLANEMIHLOCKPERIOD,
				    T1.PLANEMICPZ,
				    T1.CALROUNDINGMODE,
				    T1.ALWMULTIDISB,
				    T1.APPLICATIONNO,
				    T1.REFERRALID,
					T33.ROFFICERDESC REFERRALIDDESC,
				    T1.DMACODE,
					T34.ROFFICERDESC DMACODEDESC,
				    T1.SALESDEPARTMENT,
					T35.DEPTDESC SALESDEPARTMENTDESC,
				    T1.QUICKDISB,
				    T1.WIFREFERENCE,
				    T1.UNPLANEMIHLOCKPERIOD,
				    T1.UNPLANEMICPZ,
				    T1.REAGECPZ,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.AVAILEDUNPLANEMI,
				    T1.AVAILEDREAGEH,
				    T1.BPIAMOUNT,
				    T1.DEDUCTFEEDISB,
				    T1.RVWRATEAPPLFOR,
				    T1.SCHCALONRVW,
				    T1.PASTDUEPFTCALMTHD,
				    T1.PASTDUEPFTMARGIN,
				    T1.DROPPINGMETHOD,
				    T1.RATECHGANYDAY,
				    T1.PROMOTIONCODE,
				    T1.RESTRUCTURELOAN,
				    T1.OLDFINREFERENCE,
				    T1.REAGEBUCKET,
				    T1.FINCATEGORY,
				    T1.PRODUCTCATEGORY,
				    T1.ROUNDINGTARGET,
					T36.ENTITYCODE LOVDESCENTITYCODE,
				    T1.ELIGIBILITYMETHOD,
					T38.FIELDCODEVALUE LOVELIGIBILITYMETHOD,
					T38.VALUEDESC LOVDESCELIGIBILITYMETHOD,
				    T1.EMPLOYEENAME,
					T37.ROFFICERDESC EMPLOYEENAMEDESC,
				    T1.SAMPLINGREQUIRED,
				    T1.LEGALREQUIRED,
				    T1.GRCMAXAMOUNT,
				    T1.CONNECTOR,
					T40.DEALERNAME CONNECTORCODE,
					T40.DEALERCITY CONNECTORDESC,
				    T1.ADVANCEEMI,
				    T1.ADVEMITERMS,
				    T1.BPIPFTDAYSBASIS,
				    T1.FIXEDRATETENOR,
				    T1.FIXEDTENORRATE,
					T12.BRANCHTEL FINBRANCHCONTACT,
				    T1.PROCESSATTRIBUTES,
				    T1.BUSINESSVERTICAL,
					BV.CODE BUSINESSVERTICALCODE,
					BV.DESCRIPTION BUSINESSVERTICALDESC,
				    T1.GRCADVTYPE,
				    T1.GRCADVTERMS,
				    T1.ADVTYPE,
				    T1.ADVTERMS,
				    T1.ADVSTAGE,
				    T1.TDSPERCENTAGE,
				    T1.TDSSTARTDATE,
				    T1.TDSENDDATE,
				    T1.TDSLIMITAMT,
				    T1.VANREQ,
				    T1.VANCODE,
				    T1.ALLOWDRAWINGPOWER,
				    T1.ALLOWREVOLVING,
				    T1.SANBSDSCHDLE,
				    T1.PROMOTIONSEQID,
				    T1.SVAMOUNT,
				    T1.CBAMOUNT,
				    T1.APPLIEDLOANAMT,
				    T1.FINISRATERVWATGRCEND,
				    T1.PLANEMIHALWINGRACE,
					T1.REQLOANAMT,
					T1.REQLOANTENOR,
					T1.FINOCRREQUIRED,
					T1.OFFERPRODUCT,
					T1.OFFERAMOUNT,
					T1.CUSTSEGMENTATION,
					T1.BASEPRODUCT,
					T1.PROCESSTYPE,
					T1.BUREAUTIMESERIES,
					T1.CAMPAIGNNAME,
					T1.EXISTINGLANREFNO,
					T1.LEADSOURCE,
					T1.POSOURCE,
					T1.RSA,
					T1.VERIFICATION,
					T1.SOURCINGBRANCH,
					T1.SOURCHANNELCATEGORY,
					T1.ASMNAME,
					T13.BRANCHDESC LOVDESCSOURCINGBRANCH,
					T1.ENDGRCPERIODAFTRFULLDISB,
					T1.AUTOINCGRCENDDATE,
					T1.ALWGRCADJ,
					T1.PMAY,
					T1.OFFERID,
					T1.ALWLOANSPLIT,
					T1.PARENTREF,
					T1.LOANSPLITTED,
					T1.INSTBASEDSCHD,
					C.CUSTCIF LOVDESCCUSTCIF,
					T1.ALLOWSUBVENTION,
					T1.TDSTYPE,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS,
					T1.SCHDVERSION,
					T1.SUBVENTIONFROM,
					T1.MANUFACTURERDEALERID,
					T41.DEALERNAME MANUFACTURERDEALERNAME,
					T41.CODE MANUFACTURERDEALERCODE,
					T1.ESCROW,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME
				FROM FINANCEMAIN T1
				JOIN RMTFINANCETYPES T7 ON T1.FINTYPE = T7.FINTYPE 
				LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH  = T12.BRANCHCODE 
				LEFT JOIN RMTBRANCHES T13 ON T1.SOURCINGBRANCH = T13.BRANCHCODE
				LEFT JOIN FINPFTDETAILS T17 ON T17.FINID  = T1.FINID 
				LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY  = T24.POLICYCODE 
				LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS  = T27.CUSTSTSCODE 
				LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
				LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE  = T30.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID  = T33.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE  = T34.ROFFICERCODE 
				LEFT JOIN BMTDEPARTMENTS T35 ON T1.SALESDEPARTMENT  = T35.DEPTCODE 
				LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION  = T36.DIVISIONCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME  = T37.ROFFICERCODE 
				LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE  = 'ELGMETHOD' 
				LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE  = T39.LOANPURPOSECODE 
				LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
				LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
				INNER JOIN CUSTOMERS C ON C.CUSTID = T1.CUSTID
				LEFT JOIN AMTVEHICLEDEALER T41 ON T1.MANUFACTURERDEALERID = T41.DEALERID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
			]]>
		</createView>
	</changeSet>

	<changeSet id="FMV_2.1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_aview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="FMV_3.1_pre" author="Gopal.p" dbms="postgresql">
		<sql> 
		<![CDATA[ 
			select deps_save_and_drop_dependencies ('plf', 'financemain_view'); 
		]]>
		</sql>
	</changeSet>

	<changeSet id="FMV_3.1" author="Gopal.p">
		<createView viewName="FINANCEMAIN_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINID,
					T1.FINREFERENCE,
				    T1.INVESTMENTREF,
				    T1.NUMBEROFTERMS,
				    T1.GRCPERIODENDDATE,
				    T1.ALLOWGRCPERIOD,
				    T1.GRACEBASERATE,
				    T1.GRACESPECIALRATE,
				    T1.GRCPFTRATE,
				    T1.GRCPFTFRQ,
				    T1.NEXTGRCPFTDATE,
				    T1.ALLOWGRCPFTRVW,
				    T1.GRCPFTRVWFRQ,
				    T1.NEXTGRCPFTRVWDATE,
				    T1.ALLOWGRCCPZ,
				    T1.GRCCPZFRQ,
				    T1.NEXTGRCCPZDATE,
				    T1.REPAYBASERATE,
				    T1.REPAYSPECIALRATE,
				    T1.REPAYPROFITRATE,
				    T1.REPAYFRQ,
				    T1.NEXTREPAYDATE,
				    T1.REPAYPFTFRQ,
				    T1.NEXTREPAYPFTDATE,
				    T1.ALLOWREPAYRVW,
				    T1.REPAYRVWFRQ,
				    T1.NEXTREPAYRVWDATE,
				    T1.ALLOWREPAYCPZ,
				    T1.REPAYCPZFRQ,
				    T1.NEXTREPAYCPZDATE,
				    T1.MATURITYDATE,
				    T1.CPZATGRACEEND,
				    T1.DOWNPAYMENT,
				    T1.GRACEFLATAMOUNT,
				    T1.REQREPAYAMOUNT,
				    T1.TOTALPROFIT,
				    T1.TOTALCPZ,
				    T1.TOTALGROSSPFT,
				    T1.TOTALGROSSGRCPFT,
				    T1.TOTALGRACEPFT,
				    T1.TOTALGRACECPZ,
				    T1.GRCRATEBASIS,
				    T1.REPAYRATEBASIS,
				    T1.FINTYPE,
				    T1.FINREMARKS,
				    T1.FINCCY,
				    T1.SCHEDULEMETHOD,
				    T1.PROFITDAYSBASIS,
				    T1.REQMATURITY,
				    T1.CALTERMS,
				    T1.CALMATURITY,
				    T1.FIRSTREPAY,
				    T1.LASTREPAY,
				    T1.FINSTARTDATE,
				    T1.FINAMOUNT,
					((T1.FINAMOUNT + T1.FEECHARGEAMT) - T1.DOWNPAYMENT) LOVDESCFINANCINGAMOUNT,
				    T1.FINREPAYMENTAMOUNT,
				    T1.CUSTID,
				    T1.DEFFERMENTS,
				    T1.PLANDEFERCOUNT,
				    T1.FINBRANCH,
				    T1.FINSOURCEID,
				    T1.ALLOWEDDEFRPYCHANGE,
				    T1.AVAILEDDEFRPYCHANGE,
				    T1.ALLOWEDDEFFRQCHANGE,
				    T1.AVAILEDDEFFRQCHANGE,
				    T1.RECALTYPE,
				    T1.FINASSETVALUE,
				    T1.FINISACTIVE,
				    T1.LIMITVALID,
				    T1.OVERRIDELIMIT,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T7.FINTYPEDESC LOVDESCFINTYPENAME,
				    T7.FINMAXAMOUNT LOVDESCFINMAXAMT,
				    T7.FINMINAMOUNT LOVDESCFINMINAMOUNT,
				    T1.MINDOWNPAYPERC,
				    T7.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
				    T7.FINISDWPAYREQUIRED LOVDESCDWNPAYREQ,
				    T7.FINMAXDIFFERMENT LOVDESCFINMAXDIFFERMENT,
				    T12.BRANCHDESC LOVDESCFINBRANCHNAME,
				    T12.BRANCHPROVINCE FINBRANCHPROVINCECODE,
				    T1.LASTREPAYDATE,
				    T1.LASTREPAYPFTDATE,
				    T1.LASTREPAYRVWDATE,
				    T1.LASTREPAYCPZDATE,
				    T1.ALLOWGRCREPAY,
				    T1.GRCSCHDMTHD,
				    T1.GRCMARGIN,
				    T1.REPAYMARGIN,
				    T1.FINCURRASSETVALUE,
				    T1.FINCOMMITMENTREF,
				    T1.FINLIMITREF,
				    T1.FINCONTRACTDATE,
				    T17.ACRTILLLBD LOVDESCACCRUEDTILLLBD,
				    T7.FINRVWRATEAPPLFOR,
				    T1.TOTALREPAYAMT,
				    T1.CLOSINGSTATUS,
				    T1.FINAPPROVEDDATE,
				    T1.FEECHARGEAMT,
				    T1.BLACKLISTED,
				    T1.FINREPAYPFTONFRQ,
				    T1.ANUALIZEDPERCRATE,
				    T1.EFFECTIVERATEOFRETURN,
				    T1.MIGRATEDFINANCE,
				    T1.SCHEDULEMAINTAINED,
				    T1.SCHEDULEREGENERATED,
				    T1.FINPURPOSE,
				    T39.LOANPURPOSEDESC LOVDESCFINPURPOSENAME,
				    T1.FINSTATUS,
				    T1.FINSTSREASON,
				    T1.INITIATEUSER,
				    T7.FINSCHEDULEON LOVDESCFINSCHEDULEON,
				    T1.CUSTDSR,
				    T1.JOINTACCOUNT,
				    T1.JOINTCUSTID,
				    T1.DOWNPAYBANK,
				    T1.DOWNPAYSUPL,
				    T1.SECURITYCOLLATERAL,
				    T1.APPROVED,
				    T1.DISCREPANCY,
				    T1.LIMITAPPROVED,
				    T1.GRACETERMS,
				    T7.FINDIVISION LOVDESCFINDIVISION,
				    T1.RCDMAINTAINSTS,
				    T1.FINREPAYMETHOD,
				    T1.GRCPROFITDAYSBASIS,
				    T1.STEPFINANCE,
				    T1.STEPTYPE,
				    T1.STEPPOLICY,
				    T1.ALWMANUALSTEPS,
				    T1.NOOFSTEPS,
				    T1.LINKEDFINREF,
				    T1.NEXTUSERID,
				    T1.PRIORITY,
				    T24.POLICYDESC LOVDESCSTEPPOLICYNAME,
				    T1.GRCMINRATE,
				    T1.GRCMAXRATE,
				    T1.RPYMINRATE,
				    T1.RPYMAXRATE,
				    T1.DEVIATIONAPPROVAL,
				    T1.MANUALSCHEDULE,
				    T1.CREDITINSAMT,
				    T27.CUSTSTSDESCRIPTION,
				    T1.INITIATEDATE,
				    T1.FINPREAPPROVEDREF,
				    T1.ACCOUNTSOFFICER,
				    T28.DEALERNAME LOVDESCACCOUNTSOFFICER,
				    T28.DEALERCITY LOVDESCSOURCECITY,
				    T1.DSACODE,
				    T30.ROFFICERDESC DSACODEDESC,
				    T1.TDSAPPLICABLE,
				    T1.MANDATEID,
				    T1.DROPLINEFRQ,
				    T1.FIRSTDROPLINEDATE,
				    T1.PFTSERVICINGODLIMIT,
				    T1.ALWBPI,
				    T1.BPITREATMENT,
				    T1.PLANEMIHALW,
				    T1.PLANEMIHMETHOD,
				    T1.PLANEMIHMAXPERYEAR,
				    T1.PLANEMIHMAX,
				    T1.PLANEMIHLOCKPERIOD,
				    T1.PLANEMICPZ,
				    T1.CALROUNDINGMODE,
				    T1.ALWMULTIDISB,
				    T1.APPLICATIONNO,
				    T1.REFERRALID,
				    T33.ROFFICERDESC REFERRALIDDESC,
				    T1.DMACODE,
				    T34.ROFFICERDESC DMACODEDESC,
				    T1.SALESDEPARTMENT,
				    T35.DEPTDESC SALESDEPARTMENTDESC,
				    T1.QUICKDISB,
				    T1.WIFREFERENCE,
				    T1.UNPLANEMIHLOCKPERIOD,
				    T1.UNPLANEMICPZ,
				    T1.REAGECPZ,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.AVAILEDUNPLANEMI,
				    T1.AVAILEDREAGEH,
				    T1.BPIAMOUNT,
				    T1.DEDUCTFEEDISB,
				    T1.RVWRATEAPPLFOR,
				    T1.SCHCALONRVW,
				    T1.PASTDUEPFTCALMTHD,
				    T1.PASTDUEPFTMARGIN,
				    T1.DROPPINGMETHOD,
				    T1.RATECHGANYDAY,
				    T1.PROMOTIONCODE,
				    T1.RESTRUCTURELOAN,
				    T1.OLDFINREFERENCE,
				    T1.REAGEBUCKET,
				    T1.FINCATEGORY,
				    T1.PRODUCTCATEGORY,
				    T1.ROUNDINGTARGET,
				    T36.ENTITYCODE LOVDESCENTITYCODE,
				    T1.ELIGIBILITYMETHOD,
				    T38.FIELDCODEVALUE LOVELIGIBILITYMETHOD,
				    T38.VALUEDESC LOVDESCELIGIBILITYMETHOD,
				    T1.EMPLOYEENAME,
				    T37.ROFFICERDESC EMPLOYEENAMEDESC,
				    T1.SAMPLINGREQUIRED,
				    T1.LEGALREQUIRED,
				    T1.GRCMAXAMOUNT,
				    T1.CONNECTOR,
				    T40.DEALERNAME CONNECTORCODE,
				    T40.DEALERCITY CONNECTORDESC,
				    T1.ADVANCEEMI,
				    T1.ADVEMITERMS,
				    T1.BPIPFTDAYSBASIS,
				    T1.FIXEDRATETENOR,
				    T1.FIXEDTENORRATE,
				    T12.BRANCHTEL FINBRANCHCONTACT,
				    T1.PROCESSATTRIBUTES,
				    T1.BUSINESSVERTICAL,
				    BV.CODE BUSINESSVERTICALCODE,
				    BV.DESCRIPTION BUSINESSVERTICALDESC,
				    T1.GRCADVTYPE,
				    T1.GRCADVTERMS,
				    T1.ADVTYPE,
				    T1.ADVTERMS,
				    T1.ADVSTAGE,
				    T1.TDSPERCENTAGE,
				    T1.TDSSTARTDATE,
				    T1.TDSENDDATE,
				    T1.TDSLIMITAMT,
				    T1.VANREQ,
				    T1.VANCODE,
				    T1.ALLOWDRAWINGPOWER,
				    T1.ALLOWREVOLVING,
				    T1.SANBSDSCHDLE,
				    T1.PROMOTIONSEQID,
				    T1.SVAMOUNT,
				    T1.CBAMOUNT,
				    T1.APPLIEDLOANAMT,
				    T1.FINISRATERVWATGRCEND,
					T1.REQLOANAMT,
					T1.REQLOANTENOR,
					T1.FINOCRREQUIRED,
					T1.OFFERPRODUCT,
					T1.OFFERAMOUNT,
					T1.CUSTSEGMENTATION,
					T1.BASEPRODUCT,
					T1.PROCESSTYPE,
					T1.BUREAUTIMESERIES,
					T1.CAMPAIGNNAME,
					T1.EXISTINGLANREFNO,
					T1.LEADSOURCE,
					T1.POSOURCE,
					T1.RSA,
					T1.VERIFICATION,
					T1.SOURCINGBRANCH,
					T1.SOURCHANNELCATEGORY,
					T1.ASMNAME,
					T13.BRANCHDESC LOVDESCSOURCINGBRANCH,
					T1.OFFERID,
					T1.ALWGRCADJ,
					T1.ENDGRCPERIODAFTRFULLDISB,
					T1.AUTOINCGRCENDDATE,
					T1.PMAY,
					T1.ALWLOANSPLIT,
					T1.PARENTREF,
					T1.LOANSPLITTED,
					T1.INSTBASEDSCHD,
					T1.PLANEMIHALWINGRACE,
					T1.ALLOWSUBVENTION,
					T1.TDSTYPE,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS,
					T1.SCHDVERSION,
					T1.SUBVENTIONFROM,
					T1.MANUFACTURERDEALERID,
					T41.DEALERNAME MANUFACTURERDEALERNAME,
					T41.CODE MANUFACTURERDEALERCODE,
					T1.ESCROW,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME
				FROM FINANCEMAIN_TEMP T1
				JOIN RMTFINANCETYPES T7 ON T1.FINTYPE  = T7.FINTYPE 
				LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH  = T12.BRANCHCODE 
				LEFT JOIN RMTBRANCHES T13 ON T1.SOURCINGBRANCH = T13.BRANCHCODE
				LEFT JOIN FINPFTDETAILS T17 ON T17.FINID  = T1.FINID 
				LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY  = T24.POLICYCODE 
				LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS  = T27.CUSTSTSCODE 
				LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
				LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE  = T30.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID  = T33.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE  = T34.ROFFICERCODE 
				LEFT JOIN BMTDEPARTMENTS T35 ON T1.SALESDEPARTMENT  = T35.DEPTCODE 
				LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION  = T36.DIVISIONCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME  = T37.ROFFICERCODE 
				LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE  = 'ELGMETHOD' 
				LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE  = T39.LOANPURPOSECODE 
				LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
				LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
				LEFT JOIN AMTVEHICLEDEALER T41 ON T1.MANUFACTURERDEALERID = T41.DEALERID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				UNION ALL
				SELECT T1.FINID,
					T1.FINREFERENCE,
				    T1.INVESTMENTREF,
				    T1.NUMBEROFTERMS,
				    T1.GRCPERIODENDDATE,
				    T1.ALLOWGRCPERIOD,
				    T1.GRACEBASERATE,
				    T1.GRACESPECIALRATE,
				    T1.GRCPFTRATE,
				    T1.GRCPFTFRQ,
				    T1.NEXTGRCPFTDATE,
				    T1.ALLOWGRCPFTRVW,
				    T1.GRCPFTRVWFRQ,
				    T1.NEXTGRCPFTRVWDATE,
				    T1.ALLOWGRCCPZ,
				    T1.GRCCPZFRQ,
				    T1.NEXTGRCCPZDATE,
				    T1.REPAYBASERATE,
				    T1.REPAYSPECIALRATE,
				    T1.REPAYPROFITRATE,
				    T1.REPAYFRQ,
				    T1.NEXTREPAYDATE,
				    T1.REPAYPFTFRQ,
				    T1.NEXTREPAYPFTDATE,
				    T1.ALLOWREPAYRVW,
				    T1.REPAYRVWFRQ,
				    T1.NEXTREPAYRVWDATE,
				    T1.ALLOWREPAYCPZ,
				    T1.REPAYCPZFRQ,
				    T1.NEXTREPAYCPZDATE,
				    T1.MATURITYDATE,
				    T1.CPZATGRACEEND,
				    T1.DOWNPAYMENT,
				    T1.GRACEFLATAMOUNT,
				    T1.REQREPAYAMOUNT,
				    T1.TOTALPROFIT,
				    T1.TOTALCPZ,
				    T1.TOTALGROSSPFT,
				    T1.TOTALGROSSGRCPFT,
				    T1.TOTALGRACEPFT,
				    T1.TOTALGRACECPZ,
				    T1.GRCRATEBASIS,
				    T1.REPAYRATEBASIS,
				    T1.FINTYPE,
				    T1.FINREMARKS,
				    T1.FINCCY,
				    T1.SCHEDULEMETHOD,
				    T1.PROFITDAYSBASIS,
				    T1.REQMATURITY,
				    T1.CALTERMS,
				    T1.CALMATURITY,
				    T1.FIRSTREPAY,
				    T1.LASTREPAY,
				    T1.FINSTARTDATE,
				    T1.FINAMOUNT,
					((T1.FINAMOUNT + T1.FEECHARGEAMT) - T1.DOWNPAYMENT) LOVDESCFINANCINGAMOUNT,
				    T1.FINREPAYMENTAMOUNT,
				    T1.CUSTID,
				    T1.DEFFERMENTS,
				    T1.PLANDEFERCOUNT,
				    T1.FINBRANCH,
				    T1.FINSOURCEID,
				    T1.ALLOWEDDEFRPYCHANGE,
				    T1.AVAILEDDEFRPYCHANGE,
				    T1.ALLOWEDDEFFRQCHANGE,
				    T1.AVAILEDDEFFRQCHANGE,
				    T1.RECALTYPE,
				    T1.FINASSETVALUE,
				    T1.FINISACTIVE,
				    T1.LIMITVALID,
				    T1.OVERRIDELIMIT,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T7.FINTYPEDESC LOVDESCFINTYPENAME,
				    T7.FINMAXAMOUNT LOVDESCFINMAXAMT,
				    T7.FINMINAMOUNT LOVDESCFINMINAMOUNT,
				    T1.MINDOWNPAYPERC,
				    T7.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
				    T7.FINISDWPAYREQUIRED LOVDESCDWNPAYREQ,
				    T7.FINMAXDIFFERMENT LOVDESCFINMAXDIFFERMENT,
				    T12.BRANCHDESC LOVDESCFINBRANCHNAME,
				    T12.BRANCHPROVINCE FINBRANCHPROVINCECODE,
				    T1.LASTREPAYDATE,
				    T1.LASTREPAYPFTDATE,
				    T1.LASTREPAYRVWDATE,
				    T1.LASTREPAYCPZDATE,
				    T1.ALLOWGRCREPAY,
				    T1.GRCSCHDMTHD,
				    T1.GRCMARGIN,
				    T1.REPAYMARGIN,
				    T1.FINCURRASSETVALUE,
				    T1.FINCOMMITMENTREF,
				    T1.FINLIMITREF,
				    T1.FINCONTRACTDATE,
				    T17.ACRTILLLBD LOVDESCACCRUEDTILLLBD,
				    T7.FINRVWRATEAPPLFOR,
				    T1.TOTALREPAYAMT,
				    T1.CLOSINGSTATUS,
				    T1.FINAPPROVEDDATE,
				    T1.FEECHARGEAMT,
				    T1.BLACKLISTED,
				    T1.FINREPAYPFTONFRQ,
				    T1.ANUALIZEDPERCRATE,
				    T1.EFFECTIVERATEOFRETURN,
				    T1.MIGRATEDFINANCE,
				    T1.SCHEDULEMAINTAINED,
				    T1.SCHEDULEREGENERATED,
				    T1.FINPURPOSE,
				    T39.LOANPURPOSEDESC LOVDESCFINPURPOSENAME,
				    T1.FINSTATUS,
				    T1.FINSTSREASON,
				    T1.INITIATEUSER,
				    T7.FINSCHEDULEON LOVDESCFINSCHEDULEON,
				    T1.CUSTDSR,
				    T1.JOINTACCOUNT,
				    T1.JOINTCUSTID,
				    T1.DOWNPAYBANK,
				    T1.DOWNPAYSUPL,
				    T1.SECURITYCOLLATERAL,
				    T1.APPROVED,
				    T1.DISCREPANCY,
				    T1.LIMITAPPROVED,
				    T1.GRACETERMS,
				    T7.FINDIVISION LOVDESCFINDIVISION,
				    T1.RCDMAINTAINSTS,
				    T1.FINREPAYMETHOD,
				    T1.GRCPROFITDAYSBASIS,
				    T1.STEPFINANCE,
				    T1.STEPTYPE,
				    T1.STEPPOLICY,
				    T1.ALWMANUALSTEPS,
				    T1.NOOFSTEPS,
				    T1.LINKEDFINREF,
				    T1.NEXTUSERID,
				    T1.PRIORITY,
				    T24.POLICYDESC LOVDESCSTEPPOLICYNAME,
				    T1.GRCMINRATE,
				    T1.GRCMAXRATE,
				    T1.RPYMINRATE,
				    T1.RPYMAXRATE,
				    T1.DEVIATIONAPPROVAL,
				    T1.MANUALSCHEDULE,
				    T1.CREDITINSAMT,
				    T27.CUSTSTSDESCRIPTION,
				    T1.INITIATEDATE,
				    T1.FINPREAPPROVEDREF,
				    T1.ACCOUNTSOFFICER,
				    T28.DEALERNAME LOVDESCACCOUNTSOFFICER,
				    T28.DEALERCITY LOVDESCSOURCECITY,
				    T1.DSACODE,
				    T30.ROFFICERDESC DSACODEDESC,
				    T1.TDSAPPLICABLE,
				    T1.MANDATEID,
				    T1.DROPLINEFRQ,
				    T1.FIRSTDROPLINEDATE,
				    T1.PFTSERVICINGODLIMIT,
				    T1.ALWBPI,
				    T1.BPITREATMENT,
				    T1.PLANEMIHALW,
				    T1.PLANEMIHMETHOD,
				    T1.PLANEMIHMAXPERYEAR,
				    T1.PLANEMIHMAX,
				    T1.PLANEMIHLOCKPERIOD,
				    T1.PLANEMICPZ,
				    T1.CALROUNDINGMODE,
				    T1.ALWMULTIDISB,
				    T1.APPLICATIONNO,
				    T1.REFERRALID,
				    T33.ROFFICERDESC REFERRALIDDESC,
				    T1.DMACODE,
				    T34.ROFFICERDESC DMACODEDESC,
				    T1.SALESDEPARTMENT,
				    T35.DEPTDESC SALESDEPARTMENTDESC,
				    T1.QUICKDISB,
				    T1.WIFREFERENCE,
				    T1.UNPLANEMIHLOCKPERIOD,
				    T1.UNPLANEMICPZ,
				    T1.REAGECPZ,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.AVAILEDUNPLANEMI,
				    T1.AVAILEDREAGEH,
				    T1.BPIAMOUNT,
				    T1.DEDUCTFEEDISB,
				    T1.RVWRATEAPPLFOR,
				    T1.SCHCALONRVW,
				    T1.PASTDUEPFTCALMTHD,
				    T1.PASTDUEPFTMARGIN,
				    T1.DROPPINGMETHOD,
				    T1.RATECHGANYDAY,
				    T1.PROMOTIONCODE,
				    T1.RESTRUCTURELOAN,
				    T1.OLDFINREFERENCE,
				    T1.REAGEBUCKET,
				    T1.FINCATEGORY,
				    T1.PRODUCTCATEGORY,
				    T1.ROUNDINGTARGET,
				    T36.ENTITYCODE LOVDESCENTITYCODE,
				    T1.ELIGIBILITYMETHOD,
				    T38.FIELDCODEVALUE LOVELIGIBILITYMETHOD,
				    T38.VALUEDESC LOVDESCELIGIBILITYMETHOD,
				    T1.EMPLOYEENAME,
				    T37.ROFFICERDESC EMPLOYEENAMEDESC,
				    T1.SAMPLINGREQUIRED,
				    T1.LEGALREQUIRED,
				    T1.GRCMAXAMOUNT,
				    T1.CONNECTOR,
				    T40.DEALERNAME CONNECTORCODE,
				    T40.DEALERCITY CONNECTORDESC,
				    T1.ADVANCEEMI,
				    T1.ADVEMITERMS,
				    T1.BPIPFTDAYSBASIS,
				    T1.FIXEDRATETENOR,
				    T1.FIXEDTENORRATE,
				    T12.BRANCHTEL FINBRANCHCONTACT,
				    T1.PROCESSATTRIBUTES,
				    T1.BUSINESSVERTICAL,
				    BV.CODE BUSINESSVERTICALCODE,
				    BV.DESCRIPTION BUSINESSVERTICALDESC,
				    T1.GRCADVTYPE,
				    T1.GRCADVTERMS,
				    T1.ADVTYPE,
				    T1.ADVTERMS,
				    T1.ADVSTAGE,
				    T1.TDSPERCENTAGE,
				    T1.TDSSTARTDATE,
				    T1.TDSENDDATE,
				    T1.TDSLIMITAMT,
				    T1.VANREQ,
				    T1.VANCODE,
				    T1.ALLOWDRAWINGPOWER,
				    T1.ALLOWREVOLVING,
				    T1.SANBSDSCHDLE,
				    T1.PROMOTIONSEQID,
				    T1.SVAMOUNT,
				    T1.CBAMOUNT,
				    T1.APPLIEDLOANAMT,
				    T1.FINISRATERVWATGRCEND,
					T1.REQLOANAMT,
					T1.REQLOANTENOR,
					T1.FINOCRREQUIRED,
					T1.OFFERPRODUCT,
					T1.OFFERAMOUNT,
					T1.CUSTSEGMENTATION,
					T1.BASEPRODUCT,
					T1.PROCESSTYPE,
					T1.BUREAUTIMESERIES,
					T1.CAMPAIGNNAME,
					T1.EXISTINGLANREFNO,
					T1.LEADSOURCE,
					T1.POSOURCE,
					T1.RSA,
					T1.VERIFICATION,
					T1.SOURCINGBRANCH,
					T1.SOURCHANNELCATEGORY,
					T1.ASMNAME,
					T13.BRANCHDESC LOVDESCSOURCINGBRANCH,
					T1.OFFERID,
					T1.ALWGRCADJ,
					T1.ENDGRCPERIODAFTRFULLDISB,
					T1.AUTOINCGRCENDDATE,
					T1.PMAY,
					T1.ALWLOANSPLIT,
					T1.PARENTREF,
					T1.LOANSPLITTED,
					T1.INSTBASEDSCHD,
					T1.PLANEMIHALWINGRACE,
					T1.ALLOWSUBVENTION,
					T1.TDSTYPE,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS,
					T1.SCHDVERSION,
					T1.SUBVENTIONFROM,
					T1.MANUFACTURERDEALERID,
					T41.DEALERNAME MANUFACTURERDEALERNAME,
					T41.CODE MANUFACTURERDEALERCODE,
					T1.ESCROW,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME
				FROM FINANCEMAIN T1
				JOIN RMTFINANCETYPES T7 ON T1.FINTYPE  = T7.FINTYPE 
				LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH  = T12.BRANCHCODE 
				LEFT JOIN RMTBRANCHES T13 ON T1.SOURCINGBRANCH = T13.BRANCHCODE
				LEFT JOIN FINPFTDETAILS T17 ON T17.FINID  = T1.FINID 
				LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY  = T24.POLICYCODE 
				LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS  = T27.CUSTSTSCODE 
				LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
				LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE  = T30.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID  = T33.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE  = T34.ROFFICERCODE 
				LEFT JOIN BMTDEPARTMENTS T35 ON T1.SALESDEPARTMENT  = T35.DEPTCODE 
				LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION  = T36.DIVISIONCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME  = T37.ROFFICERCODE 
				LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE  = 'ELGMETHOD' 
				LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE  = T39.LOANPURPOSECODE 
				LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
				LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
				LEFT JOIN AMTVEHICLEDEALER T41 ON T1.MANUFACTURERDEALERID = T41.DEALERID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				WHERE NOT EXISTS (SELECT 1 FROM FINANCEMAIN_TEMP WHERE FINANCEMAIN_TEMP.FINID = T1.FINID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="FMV_3.1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_view');	
			]]>
		</sql>
	</changeSet>
	<changeSet id="FMV_4.1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemain_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FMV_4.1" author="Gopal.p">
		<createView viewName="FINANCEMAIN_TVIEW" replaceIfExists="true">
		    <![CDATA[
				SELECT T1.FINID,
					T1.FINREFERENCE,
					T1.INVESTMENTREF,
					T1.NUMBEROFTERMS,
					T1.GRCPERIODENDDATE,
					T1.ALLOWGRCPERIOD,
					T1.GRACEBASERATE,
					T1.GRACESPECIALRATE,
					T1.GRCPFTRATE,
					T1.GRCPFTFRQ,
					T1.NEXTGRCPFTDATE,
					T1.ALLOWGRCPFTRVW,
					T1.GRCPFTRVWFRQ,
					T1.NEXTGRCPFTRVWDATE,
					T1.ALLOWGRCCPZ,
					T1.GRCCPZFRQ,
					T1.NEXTGRCCPZDATE,
					T1.REPAYBASERATE,
					T1.REPAYSPECIALRATE,
					T1.REPAYPROFITRATE,
					T1.REPAYFRQ,
					T1.NEXTREPAYDATE,
					T1.REPAYPFTFRQ,
					T1.NEXTREPAYPFTDATE,
					T1.ALLOWREPAYRVW,
					T1.REPAYRVWFRQ,
					T1.NEXTREPAYRVWDATE,
					T1.ALLOWREPAYCPZ,
					T1.REPAYCPZFRQ,
					T1.NEXTREPAYCPZDATE,
					T1.MATURITYDATE,
					T1.CPZATGRACEEND,
					T1.DOWNPAYMENT,
					T1.GRACEFLATAMOUNT,
					T1.REQREPAYAMOUNT,
					T1.TOTALPROFIT,
					T1.TOTALCPZ,
					T1.TOTALGROSSPFT,
					T1.TOTALGROSSGRCPFT,
					T1.TOTALGRACEPFT,
					T1.TOTALGRACECPZ,
					T1.GRCRATEBASIS,
					T1.REPAYRATEBASIS,
					T1.FINTYPE,
					T1.FINREMARKS,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.REQMATURITY,
					T1.CALTERMS,
					T1.CALMATURITY,
					T1.FIRSTREPAY,
					T1.LASTREPAY,
					T1.FINSTARTDATE,
					T1.FINAMOUNT,
					T1.FINAMOUNT + T1.FEECHARGEAMT - T1.DOWNPAYMENT LOVDESCFINANCINGAMOUNT,
					T1.FINREPAYMENTAMOUNT,
					T1.CUSTID,
					T1.DEFFERMENTS,
					T1.PLANDEFERCOUNT,
					T1.FINBRANCH,
					T1.FINSOURCEID,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.ALLOWEDDEFFRQCHANGE,
					T1.AVAILEDDEFFRQCHANGE,
					T1.RECALTYPE,
					T1.FINASSETVALUE,
					T1.FINISACTIVE,
					T1.LIMITVALID,
					T1.OVERRIDELIMIT,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T7.FINTYPEDESC LOVDESCFINTYPENAME,
					T7.FINMAXAMOUNT LOVDESCFINMAXAMT,
					T7.FINMINAMOUNT LOVDESCFINMINAMOUNT,
					T1.MINDOWNPAYPERC,
					T7.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
					T7.FINISDWPAYREQUIRED LOVDESCDWNPAYREQ,
					T7.FINMAXDIFFERMENT LOVDESCFINMAXDIFFERMENT,
					T12.BRANCHDESC LOVDESCFINBRANCHNAME,
					T12.BRANCHPROVINCE FINBRANCHPROVINCECODE,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.LASTREPAYRVWDATE,
					T1.LASTREPAYCPZDATE,
					T1.ALLOWGRCREPAY,
					T1.GRCSCHDMTHD,
					T1.GRCMARGIN,
					T1.REPAYMARGIN,
					T1.FINCURRASSETVALUE,
					T1.FINCOMMITMENTREF,
					T1.FINLIMITREF,
					T1.FINCONTRACTDATE,
					T17.ACRTILLLBD LOVDESCACCRUEDTILLLBD,
					T7.FINRVWRATEAPPLFOR,
					T1.TOTALREPAYAMT,
					T1.CLOSINGSTATUS,
					T1.FINAPPROVEDDATE,
					T1.FEECHARGEAMT,
					T1.BLACKLISTED,
					T1.FINREPAYPFTONFRQ,
					T1.ANUALIZEDPERCRATE,
					T1.EFFECTIVERATEOFRETURN,
					T1.MIGRATEDFINANCE,
					T1.SCHEDULEMAINTAINED,
					T1.SCHEDULEREGENERATED,
					T1.FINPURPOSE,
					T39.LOANPURPOSEDESC LOVDESCFINPURPOSENAME,
					T1.FINSTATUS,
					T1.FINSTSREASON,
					T1.INITIATEUSER,
					T7.FINSCHEDULEON LOVDESCFINSCHEDULEON,
					T1.CUSTDSR,
					T1.JOINTACCOUNT,
					T1.JOINTCUSTID,
					T1.DOWNPAYBANK,
					T1.DOWNPAYSUPL,
					T1.SECURITYCOLLATERAL,
					T1.APPROVED,
					T1.DISCREPANCY,
					T1.LIMITAPPROVED,
					T1.GRACETERMS,
					T7.FINDIVISION LOVDESCFINDIVISION,
					T1.RCDMAINTAINSTS,
					T1.FINREPAYMETHOD,
					T1.GRCPROFITDAYSBASIS,
					T1.STEPFINANCE,
					T1.STEPTYPE,
					T1.STEPPOLICY,
					T1.ALWMANUALSTEPS,
					T1.NOOFSTEPS,
					T1.LINKEDFINREF,
					T1.NEXTUSERID,
					T1.PRIORITY,
					T24.POLICYDESC LOVDESCSTEPPOLICYNAME,
					T1.GRCMINRATE,
					T1.GRCMAXRATE,
					T1.RPYMINRATE,
					T1.RPYMAXRATE,
					T1.DEVIATIONAPPROVAL,
					T1.MANUALSCHEDULE,
					T1.CREDITINSAMT,
					T27.CUSTSTSDESCRIPTION,
					T1.INITIATEDATE,
					T1.FINPREAPPROVEDREF,
					T1.ACCOUNTSOFFICER,
					T28.DEALERNAME LOVDESCACCOUNTSOFFICER,
					T28.DEALERCITY LOVDESCSOURCECITY,
					T1.DSACODE,
					T30.ROFFICERDESC DSACODEDESC,
					T1.TDSAPPLICABLE,
					T1.MANDATEID,
					T1.DROPLINEFRQ,
					T1.FIRSTDROPLINEDATE,
					T1.PFTSERVICINGODLIMIT,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.CALROUNDINGMODE,
					T1.ALWMULTIDISB,
					T1.APPLICATIONNO,
					T1.REFERRALID,
					T33.ROFFICERDESC REFERRALIDDESC,
					T1.DMACODE,
					T34.ROFFICERDESC DMACODEDESC,
					T1.SALESDEPARTMENT,
					T35.DEPTDESC SALESDEPARTMENTDESC,
					T1.QUICKDISB,
					T1.WIFREFERENCE,
					T1.UNPLANEMIHLOCKPERIOD,
					T1.UNPLANEMICPZ,
					T1.REAGECPZ,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.AVAILEDUNPLANEMI,
					T1.AVAILEDREAGEH,
					T1.BPIAMOUNT,
					T1.DEDUCTFEEDISB,
					T1.RVWRATEAPPLFOR,
					T1.SCHCALONRVW,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.PROMOTIONCODE,
					T1.RESTRUCTURELOAN,
					T1.OLDFINREFERENCE,
					T1.REAGEBUCKET,
					T1.FINCATEGORY,
					T1.PRODUCTCATEGORY,
					T1.ROUNDINGTARGET,
					T36.ENTITYCODE LOVDESCENTITYCODE,
					T1.ELIGIBILITYMETHOD,
					T38.FIELDCODEVALUE LOVELIGIBILITYMETHOD,
					T38.VALUEDESC LOVDESCELIGIBILITYMETHOD,
					T1.EMPLOYEENAME,
					T37.ROFFICERDESC EMPLOYEENAMEDESC,
					T1.SAMPLINGREQUIRED,
					T1.LEGALREQUIRED,
					T1.GRCMAXAMOUNT,
					T1.CONNECTOR,
					T40.DEALERNAME CONNECTORCODE,
					T40.DEALERCITY CONNECTORDESC,
					T1.ADVANCEEMI,
					T1.ADVEMITERMS,
					T1.BPIPFTDAYSBASIS,
					T1.FIXEDRATETENOR,
					T1.FIXEDTENORRATE,
					T12.BRANCHTEL FINBRANCHCONTACT,
					T1.PROCESSATTRIBUTES,
					T1.BUSINESSVERTICAL,
					BV.CODE BUSINESSVERTICALCODE,
					BV.DESCRIPTION BUSINESSVERTICALDESC,
					T1.GRCADVTYPE,
					T1.GRCADVTERMS,
					T1.ADVTYPE,
					T1.ADVTERMS,
					T1.ADVSTAGE,
					T1.TDSPERCENTAGE,
					T1.TDSSTARTDATE,
					T1.TDSENDDATE,
					T1.TDSLIMITAMT,
					T1.VANREQ,
					T1.VANCODE,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING,
					T1.SANBSDSCHDLE,
					T1.PROMOTIONSEQID,
					T1.SVAMOUNT,
					T1.CBAMOUNT,
					T1.APPLIEDLOANAMT,
					T1.FINISRATERVWATGRCEND,
					T1.REQLOANAMT,
					T1.REQLOANTENOR,
					T1.FINOCRREQUIRED,
					T1.OFFERPRODUCT,
					T1.OFFERAMOUNT,
					T1.CUSTSEGMENTATION,
					T1.BASEPRODUCT,
					T1.PROCESSTYPE,
					T1.BUREAUTIMESERIES,
					T1.CAMPAIGNNAME,
					T1.EXISTINGLANREFNO,
					T1.LEADSOURCE,
					T1.POSOURCE,
					T1.RSA,
					T1.VERIFICATION,
					T1.SOURCINGBRANCH,
					T1.SOURCHANNELCATEGORY,
					T1.ASMNAME,
					T13.BRANCHDESC LOVDESCSOURCINGBRANCH,
					T1.OFFERID,
					T1.ENDGRCPERIODAFTRFULLDISB,
					T1.AUTOINCGRCENDDATE,
					T1.ALWGRCADJ,
					T1.PMAY,
					T1.ALWLOANSPLIT,
					T1.PARENTREF,
					T1.LOANSPLITTED,
					T1.INSTBASEDSCHD,
					T1.PLANEMIHALWINGRACE,
					T1.ALLOWSUBVENTION,
					T1.TDSTYPE,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS,
					T1.SCHDVERSION,
					T1.SUBVENTIONFROM,
					T1.MANUFACTURERDEALERID,
					T41.DEALERNAME MANUFACTURERDEALERNAME,
					T41.CODE MANUFACTURERDEALERCODE,
					T1.ESCROW,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME
				FROM FINANCEMAIN_TEMP T1
				JOIN RMTFINANCETYPES T7 ON T1.FINTYPE  = T7.FINTYPE 
				LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH  = T12.BRANCHCODE 
				LEFT JOIN RMTBRANCHES T13 ON T1.SOURCINGBRANCH = T13.BRANCHCODE
				LEFT JOIN FINPFTDETAILS T17 ON T17.FINID  = T1.FINID 
				LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY  = T24.POLICYCODE 
				LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS  = T27.CUSTSTSCODE 
				LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
				LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE  = T30.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID  = T33.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE  = T34.ROFFICERCODE 
				LEFT JOIN BMTDEPARTMENTS T35 ON T1.SALESDEPARTMENT  = T35.DEPTCODE 
				LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION  = T36.DIVISIONCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME  = T37.ROFFICERCODE 
				LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE  = 'ELGMETHOD' 
				LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE  = T39.LOANPURPOSECODE 
				LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
				LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
				LEFT JOIN AMTVEHICLEDEALER T41 ON T1.MANUFACTURERDEALERID = T41.DEALERID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
			]]>
		</createView>
	</changeSet>

	<changeSet id="FMV_4.1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FMV_5_pre" author="Gopal.p" dbms="postgresql">
		<sql> 
			<![CDATA[ 
				select deps_save_and_drop_dependencies ('plf', 'financemain_dview'); 
			]]>
		</sql>
	</changeSet>

	<changeSet id="FMV_5" author="Gopal.p">
		<createView viewName="FINANCEMAIN_DVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINID,
					T1.FINREFERENCE,
					T1.INVESTMENTREF,
					T1.FINTYPE,
					T1.FINCCY,
					T1.FINAMOUNT,
					T1.DOWNPAYMENT,
					T1.FEECHARGEAMT,
					T1.SCHEDULEMETHOD,
					T1.RECORDSTATUS,
					T1.RECORDTYPE,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.FINBRANCH,
					T1.FINASSETVALUE,
					T2.CUSTCIF LOVDESCCUSTCIF,
					T2.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
					T2.CUSTID,
					T2.CUSTCIF,
					T3.FINCATEGORY LOVDESCPRODUCTCODENAME,
					T3.FINDIVISION LOVDESCFINDIVISION,
					T1.SAMPLINGREQUIRED,
					T1.LEGALREQUIRED,
					T1.INSTBASEDSCHD,
					T1.ALLOWSUBVENTION,
					T1.TDSTYPE,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS,
					T1.SCHDVERSION,
					T1.SUBVENTIONFROM,
					T1.MANUFACTURERDEALERID,
					T5.DEALERNAME MANUFACTURERDEALERNAME,
					T5.CODE MANUFACTURERDEALERCODE,
					T1.ESCROW,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME
				FROM FINANCEMAIN_TEMP T1
				JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
				JOIN RMTFINANCETYPES T3 ON T3.FINTYPE = T1.FINTYPE
				JOIN INVESTMENTFINHEADER T4 ON T4.INVESTMENTREF = T1.INVESTMENTREF
				LEFT JOIN AMTVEHICLEDEALER T5 ON T1.MANUFACTURERDEALERID = T5.DEALERID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
			]]>
		</createView>
	</changeSet>

	<changeSet id="FMV_5_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_dview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FMV_6_Pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemain_dataview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FMV_6" author="Gopal.p">
		<createView viewName="FINANCEMAIN_DATAVIEW" replaceIfExists="true"> 
			<![CDATA[
				SELECT T1.FINID,
					T1.FINREFERENCE,
					T1.FINTYPE,
					T2.CUSTCIF LOVDESCCUSTCIF,
					T1.CUSTID,
					T1.CLOSINGSTATUS,
					T1.FINISACTIVE,
					T1.MATURITYDATE,
					T1.PRODUCTCATEGORY,
					T1.WRITEOFFLOAN,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS,
					T1.SCHDVERSION,
					T1.SUBVENTIONFROM,
					T1.MANUFACTURERDEALERID,
					T3.DEALERNAME MANUFACTURERDEALERNAME,
					T3.CODE MANUFACTURERDEALERCODE,
					T1.ESCROW,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME
				FROM FINANCEMAIN T1
				JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
				LEFT JOIN AMTVEHICLEDEALER T3 ON T1.MANUFACTURERDEALERID = T3.DEALERID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
			]]>
		</createView>
	</changeSet>

	<changeSet id="FMV_6_Post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_dataview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FMV_7_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemain_lfview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FMV_7" author="Gopal.p">
		<createView viewName="FINANCEMAIN_LFVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT F.FINID,
					F.FINREFERENCE, 
					F.CUSTID, 
					C.CUSTCIF LOVDESCCUSTCIF, 
					C.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
					F.FINTYPE, 
					F.FINISACTIVE, 
					SD.ENTITYCODE,
					F.RCDMAINTAINSTS,
					F.RECORDSTATUS,
					F.QUICKDISB,
					F.ESCROW,
					F.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME
				FROM FINANCEMAIN_TEMP F 
				INNER JOIN CUSTOMERS C ON F.CUSTID = C.CUSTID AND F.QUICKDISB = 1 AND F.RECORDSTATUS = 'Submitted'
				INNER JOIN RMTFINANCETYPES FT ON FT.FINTYPE = F.FINTYPE
				INNER JOIN SMTDivisiondetail SD On FT.FINDIVISION = SD.DivisionCode
				LEFT JOIN CUSTOMERBANKINFO CB ON F.CUSTBANKID = CB.BANKID
				UNION ALL
				SELECT F.FINID,
					F.FINREFERENCE, 
					F.CUSTID, 
					C.CUSTCIF LOVDESCCUSTCIF, 
					C.CUSTSHRTNAME LOVDESCCUSTSHRTNAME, 
					F.FINTYPE, 
					F.FINISACTIVE, 
					SD.ENTITYCODE, 
					F.RCDMAINTAINSTS,
					F.RECORDSTATUS,
					F.QUICKDISB,
					F.ESCROW,
					F.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME
				FROM FINANCEMAIN F INNER JOIN CUSTOMERS C ON F.CUSTID = C.CUSTID
				INNER JOIN RMTFINANCETYPES FT ON FT.FINTYPE = F.FINTYPE
				INNER JOIN SMTDIVISIONDETAIL SD ON FT.FINDIVISION = SD.DIVISIONCODE
				LEFT JOIN CUSTOMERBANKINFO CB ON F.CUSTBANKID = CB.BANKID
				WHERE NOT EXISTS (SELECT 1 EXPR1 FROM FINANCEMAIN_TEMP WHERE FINID = F.FINID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="FMV_7_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_lfview');
			]]>
		</sql>
	</changeSet>

	<!-- (FMV) :: Finance Main Views handle in single place end -->

	<!-- (WFMV) :: WIFinance Main Views handle in single place start -->

		<changeSet id="WFMV_1.2_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'wiffinancemain_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="WFMV_1.2" author="Gopal.p">
		<createView viewName="WIFFINANCEMAIN_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINID,
					T1.FINREFERENCE,
					T1.NUMBEROFTERMS,
					T1.GRCPERIODENDDATE,
					T1.ALLOWGRCPERIOD,
					T1.GRACEBASERATE,
					T1.GRACESPECIALRATE,
					T1.GRCPFTRATE,
					T1.GRCPFTFRQ,
					T1.NEXTGRCPFTDATE,
					T1.ALLOWGRCPFTRVW,
					T1.GRCPFTRVWFRQ,
					T1.NEXTGRCPFTRVWDATE,
					T1.ALLOWGRCCPZ,
					T1.GRCCPZFRQ,
					T1.NEXTGRCCPZDATE,
					T1.REPAYBASERATE,
					T1.REPAYSPECIALRATE,
					T1.REPAYPROFITRATE,
					T1.REPAYFRQ,
					T1.NEXTREPAYDATE,
					T1.REPAYPFTFRQ,
					T1.NEXTREPAYPFTDATE,
					T1.ALLOWREPAYRVW,
					T1.REPAYRVWFRQ,
					T1.NEXTREPAYRVWDATE,
					T1.ALLOWREPAYCPZ,
					T1.REPAYCPZFRQ,
					T1.NEXTREPAYCPZDATE,
					T1.MATURITYDATE,
					T1.CPZATGRACEEND,
					T1.DOWNPAYMENT,
					T1.GRACEFLATAMOUNT,
					T1.REQREPAYAMOUNT,
					T1.TOTALPROFIT,
					T1.TOTALCPZ,
					T1.TOTALGROSSPFT,
					T1.TOTALGRACEPFT,
					T1.TOTALGRACECPZ,
					T1.GRCRATEBASIS,
					T1.REPAYRATEBASIS,
					T1.FINTYPE,
					T1.FINREMARKS,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.REQMATURITY,
					T1.CALTERMS,
					T1.CALMATURITY,
					T1.FIRSTREPAY,
					T1.LASTREPAY,
					T1.FINSTARTDATE,
					T1.FINAMOUNT,
					T1.FINREPAYMENTAMOUNT,
					T1.CUSTID,
					T1.DEFFERMENTS,
					T1.PLANDEFERCOUNT,
					T1.FINISACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T15.CUSTCIF LOVDESCCUSTCIF,
					T7.FINTYPEDESC LOVDESCFINTYPENAME,
					T1.FINBRANCH,
					T1.FINSOURCEID,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.ALLOWEDDEFFRQCHANGE,
					T1.AVAILEDDEFFRQCHANGE,
					T7.FINMAXAMOUNT LOVDESCFINMAXAMT,
					T7.FINMINAMOUNT LOVDESCFINMINAMOUNT,
					T7.FINISALWDIFFERMENT  LOVDESCFINALWDEFERMENT,
					T1.MINDOWNPAYPERC,
					T7.FINISDWPAYREQUIRED LOVDESCDWNPAYREQ,
					T1.RECALTYPE,
					T1.FINASSETVALUE,
					T7.FINMAXDIFFERMENT LOVDESCFINMAXDIFFERMENT,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.LASTREPAYRVWDATE,
					T1.LASTREPAYCPZDATE,
					T1.ALLOWGRCREPAY,
					T1.GRCSCHDMTHD,
					T1.REPAYMARGIN,
					T1.GRCMARGIN,
					T1.FINCOMMITMENTREF,
					T1.FINCURRASSETVALUE,
					T1.FINCONTRACTDATE,
					T7.FINRVWRATEAPPLFOR,
					T1.TOTALREPAYAMT,
					T1.CLOSINGSTATUS,
					T1.FINAPPROVEDDATE,
					T1.FINREPAYPFTONFRQ,
					T1.ANUALIZEDPERCRATE,
					T1.EFFECTIVERATEOFRETURN,
					T1.DOWNPAYBANK,
					T1.DOWNPAYSUPL,
					T7.FINDIVISION LOVDESCFINDIVISIONNAME,
					T1.GRACETERMS,
					T14.FACILITYTYPE,
					T15.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
					T16.BRANCHDESC LOVDESCFINBRANCHNAME,
					T1.TOTALGROSSGRCPFT,
					T1.GRCPROFITDAYSBASIS,
					T1.STEPFINANCE,
					T1.STEPTYPE,
					T1.STEPPOLICY,
					T1.ALWMANUALSTEPS,
					T1.NOOFSTEPS,
					T1.LINKEDFINREF,
					T7.PRODUCT LOVDESCFINPRODUCT,
					T1.GRCMINRATE,
					T1.GRCMAXRATE,
					T1.RPYMINRATE,
					T1.RPYMAXRATE,
					T1.MANUALSCHEDULE,
					T1.TDSAPPLICABLE,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.CALROUNDINGMODE,
					T1.ALWMULTIDISB,
					T1.BPIAMOUNT,
					T1.DEDUCTFEEDISB,
					T1.FEECHARGEAMT,
					T1.RVWRATEAPPLFOR,
					T1.SCHCALONRVW,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.ROUNDINGTARGET,
					T1.GRCMAXAMOUNT,
					T1.ADVANCEEMI,
					T1.ADVEMITERMS,
					T1.BPIPFTDAYSBASIS BPIRATEBASIS,
					T1.GRCADVTYPE,
					T1.GRCADVTERMS,
					T1.ADVTYPE,
					T1.ADVTERMS,
					T1.ADVSTAGE,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING,
					T1.APPLIEDLOANAMT,
					T1.FINISRATERVWATGRCEND,
					T1.CBAMOUNT,
					T1.SVAMOUNT,
					T1.SANBSDSCHDLE,
					T1.PROMOTIONSEQID,
					T1.ALWGRCADJ,
					T1.PLANEMIHALWINGRACE,
					T1.ENDGRCPERIODAFTRFULLDISB,
					T1.AUTOINCGRCENDDATE,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS
				FROM WIFFINANCEMAIN T1
				LEFT JOIN WIFINDICATIVETERMDETAIL_TEMP T14 ON T14.FINREFERENCE = T1.FINREFERENCE
				LEFT JOIN CUSTOMERS T15 ON T15.CUSTID = T1.CUSTID
				JOIN RMTFINANCETYPES T7 ON T1.FINTYPE = T7.FINTYPE
				LEFT JOIN RMTBRANCHES T16 ON T1.FINBRANCH = T16.BRANCHCODE
			]]>
		</createView>
	</changeSet>

	<changeSet id="WFMV_1.2_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'wiffinancemain_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="WFMV_2.1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'wiffinancemain_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="WFMV_2.1" author="Gopal.p">
		<createView viewName="WIFFINANCEMAIN_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINID,
					T1.FINREFERENCE,
					T1.NUMBEROFTERMS,
					T1.GRCPERIODENDDATE,
					T1.ALLOWGRCPERIOD,
					T1.GRACEBASERATE,
					T1.GRACESPECIALRATE,
					T1.GRCPFTRATE,
					T1.GRCPFTFRQ,
					T1.NEXTGRCPFTDATE,
					T1.ALLOWGRCPFTRVW,
					T1.GRCPFTRVWFRQ,
					T1.NEXTGRCPFTRVWDATE,
					T1.ALLOWGRCCPZ,
					T1.GRCCPZFRQ,
					T1.NEXTGRCCPZDATE,
					T1.REPAYBASERATE,
					T1.REPAYSPECIALRATE,
					T1.REPAYPROFITRATE,
					T1.REPAYFRQ,
					T1.NEXTREPAYDATE,
					T1.REPAYPFTFRQ,
					T1.NEXTREPAYPFTDATE,
					T1.ALLOWREPAYRVW,
					T1.REPAYRVWFRQ,
					T1.NEXTREPAYRVWDATE,
					T1.ALLOWREPAYCPZ,
					T1.REPAYCPZFRQ,
					T1.NEXTREPAYCPZDATE,
					T1.MATURITYDATE,
					T1.CPZATGRACEEND,
					T1.DOWNPAYMENT,
					T1.GRACEFLATAMOUNT,
					T1.REQREPAYAMOUNT,
					T1.TOTALPROFIT,
					T1.TOTALCPZ,
					T1.TOTALGROSSPFT,
					T1.TOTALGRACEPFT,
					T1.TOTALGRACECPZ,
					T1.GRCRATEBASIS,
					T1.REPAYRATEBASIS,
					T1.FINTYPE,
					T1.FINREMARKS,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.REQMATURITY,
					T1.CALTERMS,
					T1.CALMATURITY,
					T1.FIRSTREPAY,
					T1.LASTREPAY,
					T1.FINSTARTDATE,
					T1.FINAMOUNT,
					T1.FINREPAYMENTAMOUNT,
					T1.CUSTID,
					T1.DEFFERMENTS,
					T1.PLANDEFERCOUNT,
					T1.FINISACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T15.CUSTCIF LOVDESCCUSTCIF,
					T7.FINTYPEDESC LOVDESCFINTYPENAME,
					T1.FINBRANCH,
					T1.FINSOURCEID,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.ALLOWEDDEFFRQCHANGE,
					T1.AVAILEDDEFFRQCHANGE,
					T7.FINMAXAMOUNT LOVDESCFINMAXAMT,
					T7.FINMINAMOUNT LOVDESCFINMINAMOUNT,
					T7.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
					T1.MINDOWNPAYPERC,
					T7.FINISDWPAYREQUIRED LOVDESCDWNPAYREQ,
					T1.RECALTYPE,
					T1.FINASSETVALUE,
					T7.FINMAXDIFFERMENT LOVDESCFINMAXDIFFERMENT,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.LASTREPAYRVWDATE,
					T1.LASTREPAYCPZDATE,
					T1.ALLOWGRCREPAY,
					T1.GRCSCHDMTHD,
					T1.REPAYMARGIN,
					T1.GRCMARGIN,
					T1.FINCOMMITMENTREF,
					T1.FINCURRASSETVALUE,
					T1.FINCONTRACTDATE,
					T7.FINRVWRATEAPPLFOR,
					T1.TOTALREPAYAMT,
					T1.CLOSINGSTATUS,
					T1.FINAPPROVEDDATE,
					T1.FINREPAYPFTONFRQ,
					T1.ANUALIZEDPERCRATE,
					T1.EFFECTIVERATEOFRETURN,
					T1.DOWNPAYBANK,
					T1.DOWNPAYSUPL,
					T7.FINDIVISION LOVDESCFINDIVISIONNAME,
					T1.GRACETERMS,
					T14.FACILITYTYPE,
					T15.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
					T16.BRANCHDESC LOVDESCFINBRANCHNAME,
					T1.TOTALGROSSGRCPFT,
					T1.GRCPROFITDAYSBASIS,
					T1.STEPFINANCE,
					T1.STEPTYPE,
					T1.STEPPOLICY,
					T1.ALWMANUALSTEPS,
					T1.NOOFSTEPS,
					T1.LINKEDFINREF,
					T7.PRODUCT LOVDESCFINPRODUCT,
					T1.GRCMINRATE,
					T1.GRCMAXRATE,
					T1.RPYMINRATE,
					T1.RPYMAXRATE,
					T1.MANUALSCHEDULE,
					T1.TDSAPPLICABLE,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.CALROUNDINGMODE,
					T1.ALWMULTIDISB,
					T1.BPIAMOUNT,
					T1.DEDUCTFEEDISB,
					T1.FEECHARGEAMT,
					T1.RVWRATEAPPLFOR,
					T1.SCHCALONRVW,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.FINCATEGORY,
					T1.PRODUCTCATEGORY,
					T1.ROUNDINGTARGET,
					T1.GRCMAXAMOUNT,
					T1.ADVANCEEMI,
					T1.ADVEMITERMS,
					T1.BPIPFTDAYSBASIS,
					T1.FIXEDTENORRATE,
					T1.FIXEDRATETENOR,
					T1.GRCADVTYPE,
					T1.GRCADVTERMS,
					T1.ADVTYPE,
					T1.ADVTERMS,
					T1.ADVSTAGE,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING,
					T1.APPLIEDLOANAMT,
					T1.FINISRATERVWATGRCEND,
					T1.CBAMOUNT,
					T1.SVAMOUNT,
					T1.SANBSDSCHDLE,
					T1.PROMOTIONSEQID,
					T1.ALWGRCADJ,
					T1.PLANEMIHALWINGRACE,
					T1.ENDGRCPERIODAFTRFULLDISB,
					T1.AUTOINCGRCENDDATE,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS
				FROM WIFFINANCEMAIN_TEMP T1
				LEFT JOIN WIFINDICATIVETERMDETAIL_TEMP T14 ON T14.FINREFERENCE = T1.FINREFERENCE
				LEFT JOIN CUSTOMERS T15 ON T15.CUSTID = T1.CUSTID
				JOIN RMTFINANCETYPES T7 ON T1.FINTYPE = T7.FINTYPE
				LEFT JOIN RMTBRANCHES T16 ON T1.FINBRANCH = T16.BRANCHCODE
				UNION ALL
				SELECT T1.FINID,
					T1.FINREFERENCE,
					T1.NUMBEROFTERMS,
					T1.GRCPERIODENDDATE,
					T1.ALLOWGRCPERIOD,
					T1.GRACEBASERATE,
					T1.GRACESPECIALRATE,
					T1.GRCPFTRATE,
					T1.GRCPFTFRQ,
					T1.NEXTGRCPFTDATE,
					T1.ALLOWGRCPFTRVW,
					T1.GRCPFTRVWFRQ,
					T1.NEXTGRCPFTRVWDATE,
					T1.ALLOWGRCCPZ,
					T1.GRCCPZFRQ,
					T1.NEXTGRCCPZDATE,
					T1.REPAYBASERATE,
					T1.REPAYSPECIALRATE,
					T1.REPAYPROFITRATE,
					T1.REPAYFRQ,
					T1.NEXTREPAYDATE,
					T1.REPAYPFTFRQ,
					T1.NEXTREPAYPFTDATE,
					T1.ALLOWREPAYRVW,
					T1.REPAYRVWFRQ,
					T1.NEXTREPAYRVWDATE,
					T1.ALLOWREPAYCPZ,
					T1.REPAYCPZFRQ,
					T1.NEXTREPAYCPZDATE,
					T1.MATURITYDATE,
					T1.CPZATGRACEEND,
					T1.DOWNPAYMENT,
					T1.GRACEFLATAMOUNT,
					T1.REQREPAYAMOUNT,
					T1.TOTALPROFIT,
					T1.TOTALCPZ,
					T1.TOTALGROSSPFT,
					T1.TOTALGRACEPFT,
					T1.TOTALGRACECPZ,
					T1.GRCRATEBASIS,
					T1.REPAYRATEBASIS,
					T1.FINTYPE,
					T1.FINREMARKS,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.REQMATURITY,
					T1.CALTERMS,
					T1.CALMATURITY,
					T1.FIRSTREPAY,
					T1.LASTREPAY,
					T1.FINSTARTDATE,
					T1.FINAMOUNT,
					T1.FINREPAYMENTAMOUNT,
					T1.CUSTID,
					T1.DEFFERMENTS,
					T1.PLANDEFERCOUNT,
					T1.FINISACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T15.CUSTCIF LOVDESCCUSTCIF,
					T7.FINTYPEDESC LOVDESCFINTYPENAME,
					T1.FINBRANCH,
					T1.FINSOURCEID,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.ALLOWEDDEFFRQCHANGE,
					T1.AVAILEDDEFFRQCHANGE,
					T7.FINMAXAMOUNT LOVDESCFINMAXAMT,
					T7.FINMINAMOUNT LOVDESCFINMINAMOUNT,
					T7.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
					T1.MINDOWNPAYPERC,
					T7.FINISDWPAYREQUIRED LOVDESCDWNPAYREQ,
					T1.RECALTYPE,
					T1.FINASSETVALUE,
					T7.FINMAXDIFFERMENT LOVDESCFINMAXDIFFERMENT,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.LASTREPAYRVWDATE,
					T1.LASTREPAYCPZDATE,
					T1.ALLOWGRCREPAY,
					T1.GRCSCHDMTHD,
					T1.REPAYMARGIN,
					T1.GRCMARGIN,
					T1.FINCOMMITMENTREF,
					T1.FINCURRASSETVALUE,
					T1.FINCONTRACTDATE,
					T7.FINRVWRATEAPPLFOR,
					T1.TOTALREPAYAMT,
					T1.CLOSINGSTATUS,
					T1.FINAPPROVEDDATE,
					T1.FINREPAYPFTONFRQ,
					T1.ANUALIZEDPERCRATE,
					T1.EFFECTIVERATEOFRETURN,
					T1.DOWNPAYBANK,
					T1.DOWNPAYSUPL,
					T7.FINDIVISION LOVDESCFINDIVISIONNAME,
					T1.GRACETERMS,
					T14.FACILITYTYPE,
					T15.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
					T16.BRANCHDESC LOVDESCFINBRANCHNAME,
					T1.TOTALGROSSGRCPFT,
					T1.GRCPROFITDAYSBASIS,
					T1.STEPFINANCE,
					T1.STEPTYPE,
					T1.STEPPOLICY,
					T1.ALWMANUALSTEPS,
					T1.NOOFSTEPS,
					T1.LINKEDFINREF,
					T7.PRODUCT LOVDESCFINPRODUCT,
					T1.GRCMINRATE,
					T1.GRCMAXRATE,
					T1.RPYMINRATE,
					T1.RPYMAXRATE,
					T1.MANUALSCHEDULE,
					T1.TDSAPPLICABLE,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.CALROUNDINGMODE,
					T1.ALWMULTIDISB,
					T1.BPIAMOUNT,
					T1.DEDUCTFEEDISB,
					T1.FEECHARGEAMT,
					T1.RVWRATEAPPLFOR,
					T1.SCHCALONRVW,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.FINCATEGORY,
					T1.PRODUCTCATEGORY,
					T1.ROUNDINGTARGET,
					T1.GRCMAXAMOUNT,
					T1.ADVANCEEMI,
					T1.ADVEMITERMS,
					T1.BPIPFTDAYSBASIS,
					T1.FIXEDTENORRATE,
					T1.FIXEDRATETENOR,
					T1.GRCADVTYPE,
					T1.GRCADVTERMS,
					T1.ADVTYPE,
					T1.ADVTERMS,
					T1.ADVSTAGE,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING,
					T1.APPLIEDLOANAMT,
					T1.FINISRATERVWATGRCEND,
					T1.CBAMOUNT,
					T1.SVAMOUNT,
					T1.SANBSDSCHDLE,
					T1.PROMOTIONSEQID,
					T1.ALWGRCADJ,
					T1.PLANEMIHALWINGRACE,
					T1.ENDGRCPERIODAFTRFULLDISB,
					T1.AUTOINCGRCENDDATE,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS
				FROM WIFFINANCEMAIN T1
				LEFT JOIN WIFINDICATIVETERMDETAIL_TEMP T14 ON T14.FINREFERENCE = T1.FINREFERENCE
				LEFT JOIN CUSTOMERS T15 ON T15.CUSTID = T1.CUSTID
				JOIN RMTFINANCETYPES T7 ON T1.FINTYPE = T7.FINTYPE
				LEFT JOIN RMTBRANCHES T16 ON T1.FINBRANCH = T16.BRANCHCODE
				WHERE NOT (EXISTS ( SELECT 1
				FROM WIFFINANCEMAIN_TEMP
				WHERE WIFFINANCEMAIN_TEMP.FINREFERENCE = T1.FINREFERENCE))
			]]>
		</createView>
	</changeSet>

	<changeSet id="WFM_2.1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'wiffinancemain_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="WFMV_3_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'wiffinancemain_sview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="WFMV_3" author="Gopal.p">
		<createView viewName="WIFFINANCEMAIN_SVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINID,
					T1.FINREFERENCE,
					T1.FINAMOUNT,
					T1.FINCCY,
					T1.FINTYPE,
					T1.CUSTID,
					T1.FINASSETVALUE,
					T1.LASTMNTON,
					T1.FINSTARTDATE,
					T4.FIRSTTASKOWNER LOVDESCFIRSTTASKOWNER,
					T5.PRODUCTCATEGORY LOVDESCPRODUCTCODENAME
				FROM WIFFINANCEMAIN T1
				JOIN RMTFINANCETYPES T2 ON T1.FINTYPE = T2.FINTYPE AND T2.FINISACTIVE = 1
				LEFT JOIN LMTFINANCEWORKFLOWDEF T3 ON T2.FINTYPE = T3.FINTYPE AND T3.FINEVENT = 'Origination'
				JOIN WORKFLOWDETAILS T4 ON T3.WORKFLOWTYPE = T4.WORKFLOWTYPE AND T4.WORKFLOWACTIVE = 1
				JOIN BMTPRODUCT T5 ON T2.FINCATEGORY = T5.PRODUCTCODE
			]]>
		</createView>
	</changeSet>

	<changeSet id="WFMV_3_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'wiffinancemain_sview');	
			]]>
		</sql>
	</changeSet>

	<!-- (WFMV) :: WIFinance Main Views handle in single place end -->

	<!-- (FEV) :: Finance Enquiry views handle in single place start -->

	<changeSet id="FEV_1.1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financeenquiry_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FEV_1.1" author="Gopal.p">
		<createView viewName="FINANCEENQUIRY_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINID,
					T1.FINREFERENCE,
					T1.FINBRANCH,
					T1.FINTYPE,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.FINSTARTDATE,
					T1.CALTERMS NUMBEROFTERMS,
					T1.CUSTID,
					T1.FINAMOUNT,
					T1.GRCPERIODENDDATE,
					T1.MATURITYDATE,
					T1.FINREPAYMENTAMOUNT,
					T1.FINISACTIVE,
					T1.ALLOWGRCPERIOD,
					T1.DOWNPAYMENT,
					T1.MIGRATEDFINANCE,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.FINCURRASSETVALUE,
					T1.BLACKLISTED,
					T1.FEECHARGEAMT,
					T1.CLOSINGSTATUS,
					T1.GRACETERMS,
					T1.ALWMULTIDISB,
					T1.DEFFERMENTS,
					T1.FINSTATUS,
					T1.MANDATEID,
					T1.FINREPAYMETHOD,
					T1.FINASSETVALUE,
					T1.FINCURRASSETVALUE + T1.FEECHARGEAMT FINANCINGAMOUNT,
					T1.FINCURRASSETVALUE - T1.FINREPAYMENTAMOUNT + T1.FEECHARGEAMT CURFINAMOUNT,
					T2.FINTYPEDESC LOVDESCFINTYPENAME,
					T2.FINSCHEDULEON LOVDESCFINSCHEDULEON,
					T2.FINDIVISION LOVDESCFINDIVISION,
					T2.FINCATEGORY LOVDESCPRODUCTCODENAME,
					T2.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
					T3.CUSTCIF LOVDESCCUSTCIF,
					T3.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
					T4.BRANCHDESC LOVDESCFINBRANCHNAME,
					T5.CUSTTYPECTG,
					COALESCE(T9.NOINST, 0)  NOINST,
					T1.FINOCRREQUIRED,
					T1.TOTALCPZ,
					T1.ALWGRCADJ,
					T1.ENDGRCPERIODAFTRFULLDISB,
					T1.AUTOINCGRCENDDATE,
					T1.RECORDSTATUS,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.SUBVENTIONFROM,
					T1.MANUFACTURERDEALERID,
					T10.DEALERNAME MANUFACTURERDEALERNAME,
					T10.CODE MANUFACTURERDEALERCODE,
					T1.ESCROW,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME
				FROM FINANCEMAIN_TEMP T1
				JOIN RMTFINANCETYPES T2 ON T1.FINTYPE = T2.FINTYPE
				JOIN CUSTOMERS T3 ON T1.CUSTID = T3.CUSTID
				JOIN RMTBRANCHES T4 ON T1.FINBRANCH = T4.BRANCHCODE
				JOIN RMTCUSTTYPES T5 ON T3.CUSTTYPECODE = T5.CUSTTYPECODE
				LEFT JOIN FINPFTDETAILS T9 ON T9.FINID = T1.FINID
				LEFT JOIN AMTVEHICLEDEALER T10 ON T1.MANUFACTURERDEALERID = T10.DEALERID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
			]]>
		</createView>
	</changeSet>

	<changeSet id="FEV_1.1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financeenquiry_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FEV_2.1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financeenquiry_view');
		 	]]>
		</sql>
	</changeSet>

	<changeSet id="FEV_2.1" author="Gopal.p">
		<createView viewName="FINANCEENQUIRY_VIEW" replaceIfExists="true">
		  <![CDATA[
				SELECT T1.FINID,
					T1.FINREFERENCE,
					T1.FINBRANCH,
					T1.FINTYPE,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.FINSTARTDATE,
					T1.CALTERMS NUMBEROFTERMS,
					T1.CUSTID,
					T1.FINAMOUNT,
					T1.GRCPERIODENDDATE,
					T1.MATURITYDATE,
					T1.FINREPAYMENTAMOUNT,
					T1.FINISACTIVE,
					T1.ALLOWGRCPERIOD,
					T1.DOWNPAYMENT,
					T1.MIGRATEDFINANCE,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.FINCURRASSETVALUE,
					T1.BLACKLISTED,
					T1.FEECHARGEAMT,
					T1.CLOSINGSTATUS,
					T1.GRACETERMS,
					T1.ALWMULTIDISB,
					T1.DEFFERMENTS,
					T1.FINSTATUS ,
					T1.MANDATEID,
					T1.FINREPAYMETHOD,
					T1.FINASSETVALUE,
					T1.SANBSDSCHDLE,
					T1.PROMOTIONSEQID,
					T1.SVAMOUNT,
					T1.CBAMOUNT,
					(T1.FINCURRASSETVALUE+ T1.FEECHARGEAMT) FINANCINGAMOUNT,
					(T1.FINCURRASSETVALUE- T1.FINREPAYMENTAMOUNT+ T1.FEECHARGEAMT) CURFINAMOUNT,
					T2.FINTYPEDESC LOVDESCFINTYPENAME,
					T2.FINSCHEDULEON LOVDESCFINSCHEDULEON,
					T2.FINDIVISION LOVDESCFINDIVISION,
					T2.FINCATEGORY LOVDESCPRODUCTCODENAME,
					T2.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
					T3.CUSTCIF LOVDESCCUSTCIF,
					T3.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
					T4.BRANCHDESC LOVDESCFINBRANCHNAME,
					T5.CUSTTYPECTG,
					COALESCE(T9.NOINST,0) NOINST,
					T1.TOTALCPZ,
					T1.FINOCRREQUIRED,
					T1.ALWGRCADJ,
					T1.ENDGRCPERIODAFTRFULLDISB,
					T1.AUTOINCGRCENDDATE,
					T1.RECORDSTATUS,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.SUBVENTIONFROM,
					T1.MANUFACTURERDEALERID,
					T10.DEALERNAME MANUFACTURERDEALERNAME,
					T10.CODE MANUFACTURERDEALERCODE,
					T1.ESCROW,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME
				FROM FINANCEMAIN T1
				INNER JOIN RMTFINANCETYPES T2 ON T1.FINTYPE = T2.FINTYPE
				INNER JOIN CUSTOMERS T3 ON T1.CUSTID = T3.CUSTID
				INNER JOIN RMTBRANCHES T4 ON T1.FINBRANCH = T4.BRANCHCODE
				INNER JOIN RMTCUSTTYPES T5 ON T3.CUSTTYPECODE = T5.CUSTTYPECODE
				LEFT JOIN FINPFTDETAILS T9 ON T9.FINID = T1.FINID
				LEFT JOIN AMTVEHICLEDEALER T10 ON T1.MANUFACTURERDEALERID = T10.DEALERID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
			]]>
		</createView>
	</changeSet>

	<changeSet id="FEV_2.1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financeenquiry_view');
			]]>
		</sql>
	</changeSet>

	<!-- (FEV) :: Finance Enquiry views handle in single place end -->

	<!-- (SDV) :: Finance Schedule detail Views handle in single place start -->

	<changeSet id="SDV_1.1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finscheduledetails_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="SDV_1.1" author="Gopal.p">
		<createView viewName="FINSCHEDULEDETAILS_TVIEW" replaceIfExists="true">
		    <![CDATA[
				SELECT T2.FINID,
					T2.FINREFERENCE,
					T1.SCHSEQ,
					T1.SCHDATE,
					T1.PFTONSCHDATE,
					T1.REPAYONSCHDATE,
					T1.CPZONSCHDATE,
					T1.RVWONSCHDATE,
					T1.DISBONSCHDATE,
					T1.DOWNPAYMENTONSCHDATE,
					T1.BALANCEFORPFTCAL,
					T1.BASERATE,
					T1.SPLRATE,
					T1.ACTRATE,
					T1.NOOFDAYS,
					T1.DAYFACTOR,
					T1.PROFITCALC,
					T1.PROFITSCHD,
					T1.PRINCIPALSCHD,
					T1.REPAYAMOUNT,
					T1.PROFITBALANCE,
					T1.DISBAMOUNT,
					T1.CPZAMOUNT,
					T1.DOWNPAYMENTAMOUNT,
					T1.CLOSINGBALANCE,
					T1.PROFITFRACTION,
					T1.PRVREPAYAMOUNT,
					T1.SCHDPFTPAID,
					T1.SCHPFTPAID,
					T1.SCHDPRIPAID,
					T1.SCHPRIPAID,
					T1.SPECIFIER,
					T1.DEFSCHDDATE,
					T1.SCHDMETHOD,
					T1.MRGRATE,
					T1.FEECHARGEAMT,
					T1.CALCULATEDRATE,
					T1.EARLYPAIDBAL,
					T1.EARLYPAID,
					T1.REFUNDORWAIVER,
					T1.WRITEOFFPRINCIPAL,
					T1.WRITEOFFPROFIT,
					T1.ORGPFT,
					T1.ORGPRI,
					T1.ORGENDBAL,
					T1.ORGPLANPFT,
					T1.FEESCHD,
					T1.SCHDFEEPAID,
					T1.SCHDFEEOS,
					T1.TDSAMOUNT,
					T1.TDSPAID,
					T1.PFTDAYSBASIS,
					T1.WRITEOFFSCHFEE,
					T1.INSTNUMBER,
					T1.BPIORHOLIDAY,
					T1.FRQDATE,
					T1.PRESENTMENTID,
					T1.PARTIALPAIDAMT,
					T1.FEETAX,
					T1.RECALLOCK,
					T1.TDSAPPLICABLE,
					T1.SCHDPFTWAIVER,
					T1.CPZBALANCE
				FROM FINSCHEDULEDETAILS_TEMP T1
				INNER JOIN FINANCEMAIN_TEMP T2 ON T2.FINID = T1.FINID
			]]>
		</createView>
	</changeSet>

	<changeSet id="SDV_1.1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finscheduledetails_tview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="SDV_2.1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finscheduledetails_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="SDV_2.1" author="Gopal.p">
		<createView viewName="FINSCHEDULEDETAILS_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T2.FINID,
					T2.FINREFERENCE,
					T1.SCHSEQ,
					T1.SCHDATE,
					T1.PFTONSCHDATE,
					T1.REPAYONSCHDATE,
					T1.CPZONSCHDATE,
					T1.RVWONSCHDATE,
					T1.DISBONSCHDATE,
					T1.DOWNPAYMENTONSCHDATE,
					T1.BALANCEFORPFTCAL,
					T1.BASERATE,
					T1.SPLRATE,
					T1.ACTRATE,
					T1.NOOFDAYS,
					T1.DAYFACTOR,
					T1.PROFITCALC,
					T1.PROFITSCHD,
					T1.PRINCIPALSCHD,
					T1.REPAYAMOUNT,
					T1.PROFITBALANCE,
					T1.DISBAMOUNT,
					T1.CPZAMOUNT,
					T1.DOWNPAYMENTAMOUNT,
					T1.CLOSINGBALANCE,
					T1.PROFITFRACTION,
					T1.PRVREPAYAMOUNT,
					T1.SCHDPFTPAID,
					T1.SCHPFTPAID,
					T1.SCHDPRIPAID,
					T1.SCHPRIPAID,
					T1.SPECIFIER,
					T1.DEFSCHDDATE,
					T1.SCHDMETHOD,
					T1.MRGRATE,
					T1.FEECHARGEAMT,
					T1.CALCULATEDRATE,
					T1.EARLYPAIDBAL,
					T1.EARLYPAID,
					T1.REFUNDORWAIVER,
					T1.WRITEOFFPRINCIPAL,
					T1.WRITEOFFPROFIT,
					T1.ORGPFT,
					T1.ORGPRI,
					T1.ORGENDBAL,
					T1.ORGPLANPFT,
					T1.FEESCHD,
					T1.SCHDFEEPAID,
					T1.SCHDFEEOS,
					T1.TDSAMOUNT,
					T1.TDSPAID,
					T1.PFTDAYSBASIS,
					T1.WRITEOFFSCHFEE,
					T1.INSTNUMBER,
					T1.BPIORHOLIDAY,
					T1.FRQDATE,
					T1.PRESENTMENTID,
					T1.PARTIALPAIDAMT,
					T1.FEETAX,
					T1.RECALLOCK,
					T1.TDSAPPLICABLE,
					T1.SCHDPFTWAIVER,
					T1.CPZBALANCE
				FROM FINSCHEDULEDETAILS_TEMP T1
				INNER JOIN FINANCEMAIN_TEMP T2 ON T2.FINID = T1.FINID
				UNION ALL
				SELECT T2.FINID,
					T2.FINREFERENCE,
					T1.SCHSEQ,
					T1.SCHDATE,
					T1.PFTONSCHDATE,
					T1.REPAYONSCHDATE,
					T1.CPZONSCHDATE,
					T1.RVWONSCHDATE,
					T1.DISBONSCHDATE,
					T1.DOWNPAYMENTONSCHDATE,
					T1.BALANCEFORPFTCAL,
					T1.BASERATE,
					T1.SPLRATE,
					T1.ACTRATE,
					T1.NOOFDAYS,
					T1.DAYFACTOR,
					T1.PROFITCALC,
					T1.PROFITSCHD,
					T1.PRINCIPALSCHD,
					T1.REPAYAMOUNT,
					T1.PROFITBALANCE,
					T1.DISBAMOUNT,
					T1.CPZAMOUNT,
					T1.DOWNPAYMENTAMOUNT,
					T1.CLOSINGBALANCE,
					T1.PROFITFRACTION,
					T1.PRVREPAYAMOUNT,
					T1.SCHDPFTPAID,
					T1.SCHPFTPAID,
					T1.SCHDPRIPAID,
					T1.SCHPRIPAID,
					T1.SPECIFIER,
					T1.DEFSCHDDATE,
					T1.SCHDMETHOD,
					T1.MRGRATE,
					T1.FEECHARGEAMT,
					T1.CALCULATEDRATE,
					T1.EARLYPAIDBAL,
					T1.EARLYPAID,
					T1.REFUNDORWAIVER,
					T1.WRITEOFFPRINCIPAL,
					T1.WRITEOFFPROFIT,
					T1.ORGPFT,
					T1.ORGPRI,
					T1.ORGENDBAL,
					T1.ORGPLANPFT,
					T1.FEESCHD,
					T1.SCHDFEEPAID,
					T1.SCHDFEEOS,
					T1.TDSAMOUNT,
					T1.TDSPAID,
					T1.PFTDAYSBASIS,
					T1.WRITEOFFSCHFEE,
					T1.INSTNUMBER,
					T1.BPIORHOLIDAY,
					T1.FRQDATE,
					T1.PRESENTMENTID,
					T1.PARTIALPAIDAMT,
					T1.FEETAX,
					T1.RECALLOCK,
					T1.TDSAPPLICABLE,
					T1.SCHDPFTWAIVER,
					T1.CPZBALANCE
				FROM FINSCHEDULEDETAILS T1
				INNER JOIN FINANCEMAIN T2 ON T2.FINID = T1.FINID
				WHERE NOT EXISTS (SELECT 1 FROM FINSCHEDULEDETAILS_TEMP
					WHERE FINSCHEDULEDETAILS_TEMP.FINID = T1.FINID)
			]]>
		</createView>
	</changeSet>


	<changeSet id="SDV_2.1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finscheduledetails_view');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="SDV_3.1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finscheduledetails_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="SDV_3.1" author="Gopal.p">
		<createView viewName="FINSCHEDULEDETAILS_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T2.FINID,
					T2.FINREFERENCE,
					T1.SCHSEQ,
					T1.SCHDATE,
					T1.PFTONSCHDATE,
					T1.REPAYONSCHDATE,
					T1.CPZONSCHDATE,
					T1.RVWONSCHDATE,
					T1.DISBONSCHDATE,
					T1.DOWNPAYMENTONSCHDATE,
					T1.BALANCEFORPFTCAL,
					T1.BASERATE,
					T1.SPLRATE,
					T1.ACTRATE,
					T1.NOOFDAYS,
					T1.DAYFACTOR,
					T1.PROFITCALC,
					T1.PROFITSCHD,
					T1.PRINCIPALSCHD,
					T1.REPAYAMOUNT,
					T1.PROFITBALANCE,
					T1.DISBAMOUNT,
					T1.CPZAMOUNT,
					T1.DOWNPAYMENTAMOUNT,
					T1.CLOSINGBALANCE,
					T1.PROFITFRACTION,
					T1.PRVREPAYAMOUNT,
					T1.SCHDPFTPAID,
					T1.SCHPFTPAID,
					T1.SCHDPRIPAID,
					T1.SCHPRIPAID,
					T1.SPECIFIER,
					T1.DEFSCHDDATE,
					T1.SCHDMETHOD,
					T1.MRGRATE,
					T1.FEECHARGEAMT,
					T1.CALCULATEDRATE,
					T1.EARLYPAIDBAL,
					T1.EARLYPAID,
					T1.REFUNDORWAIVER,
					T1.WRITEOFFPRINCIPAL,
					T1.WRITEOFFPROFIT,
					T1.ORGPFT,
					T1.ORGPRI,
					T1.ORGENDBAL,
					T1.ORGPLANPFT,
					T1.FEESCHD,
					T1.SCHDFEEPAID,
					T1.SCHDFEEOS,
					T1.TDSAMOUNT,
					T1.TDSPAID,
					T1.PFTDAYSBASIS,
					T1.WRITEOFFSCHFEE,
					T1.INSTNUMBER,
					T1.BPIORHOLIDAY,
					T1.FRQDATE,
					T1.PRESENTMENTID,
					T1.PARTIALPAIDAMT,
					T1.FEETAX,
					T1.RECALLOCK,
					T1.TDSAPPLICABLE,
					T1.SCHDPFTWAIVER,
					T1.CPZBALANCE
				FROM FINSCHEDULEDETAILS T1
				INNER JOIN FINANCEMAIN T2 ON T2.FINID = T1.FINID
			]]>
		</createView>
	</changeSet>

	<changeSet id="SDV_3.1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finscheduledetails_aview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="SDV_4.1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finscheduledetails_iview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="SDV_4.1" author="Gopal.p" dbms="oracle">
		<createView viewName="FINSCHEDULEDETAILS_IVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T.FINTYPE,
					T.FINID,
					T.FINREFERENCE,
					T.SCHDATE,
					T.FINCCY,
					T.REPAYAMOUNT
				   FROM (SELECT row_number() OVER (PARTITION BY T1.FINID ORDER BY T1.SCHDATE) ROW_NUM,
							T2.FINTYPE, T2.FINID, T1.SCHDATE, T2.FINREFERENCE, T2.FINCCY, T1.REPAYAMOUNT
						FROM FINSCHEDULEDETAILS T1
						JOIN FINANCEMAIN T2 ON T2.FINID = T1.FINID
						WHERE (T1.PROFITSCHD - T1.SCHDPFTPAID + T1.PRINCIPALSCHD - T1.SCHDPRIPAID) <> 0 AND
						T1.SCHDATE > ((SELECT to_date(SYSPARMVALUE ,'yyyy-mm-dd') FROM SMTPARAMETERS WHERE SYSPARMCODE = 'APP_DATE'))) t
				  WHERE t.ROW_NUM = 1
			]]>
		</createView>
	</changeSet>
	
	<changeSet id="SDV_4.1" author="Gopal.p" dbms="postgresql,mssql">
		<createView viewName="FINSCHEDULEDETAILS_IVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T.FINTYPE,
					T.FINID,
					T.FINREFERENCE,
					T.SCHDATE,
					T.FINCCY,
					T.REPAYAMOUNT
				   FROM (SELECT row_number() OVER (PARTITION BY T1.FINID ORDER BY T1.SCHDATE) ROW_NUM,
							T2.FINTYPE, T2.FINID, T1.SCHDATE, T2.FINREFERENCE, T2.FINCCY, T1.REPAYAMOUNT
						FROM FINSCHEDULEDETAILS T1
						JOIN FINANCEMAIN T2 ON T2.FINID = T1.FINID
						WHERE (T1.PROFITSCHD - T1.SCHDPFTPAID + T1.PRINCIPALSCHD - T1.SCHDPRIPAID) <> 0 AND
						T1.SCHDATE > ((SELECT cast(SYSPARMVALUE as date) FROM SMTPARAMETERS WHERE SYSPARMCODE = 'APP_DATE'))) t
				  WHERE t.ROW_NUM = 1
			]]>
		</createView>
	</changeSet>

	<changeSet id="SDV_4.1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finscheduledetails_iview');	
			]]>
		</sql>
	</changeSet>

	<!-- (SDV) :: Finance Schedule detail Views handle in single place end -->

	<!-- (FDDV) :: FIN DISBURSEMENT DETAILS Views handle in single place start -->

	<changeSet id="FDDV_1.2_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'findisbursementdetails_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FDDV_1.2" author="Gopal.p">
		<createView viewName="FINDISBURSEMENTDETAILS_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T3.FINID,
					T3.FINREFERENCE,
					T1.DISBDATE,
					T1.DISBSEQ,
					T1.DISBDESC,
					T1.DISBAMOUNT,
					T1.DISBREQDATE,
					T1.DISBISACTIVE,
					T1.DISBREMARKS,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.FEECHARGEAMT,
					T1.DISBSTATUS,
					T1.DISBTYPE,
					T1.DISBEXPTYPE,
					T1.AUTODISB,
					T2.EXPENCETYPENAME LOVDESCDISBEXPTYPE,
					T1.INSTRUCTIONUID,
					T1.QUICKDISB,
					T1.InstCalReq,
					T1.LINKEDDISBID
				FROM FINDISBURSEMENTDETAILS_TEMP T1
				INNER JOIN FINANCEMAIN_TEMP T3 ON T3.FINID = T1.FINID
				LEFT JOIN AMTEXPENSETYPE T2 ON T2.EXPENCETYPEID = T1.DISBEXPTYPE
				UNION ALL
				SELECT T3.FINID,
					T3.FINREFERENCE,
					T1.DISBDATE,
					T1.DISBSEQ,
					T1.DISBDESC,
					T1.DISBAMOUNT,
					T1.DISBREQDATE,
					T1.DISBISACTIVE,
					T1.DISBREMARKS,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.FEECHARGEAMT,
					T1.DISBSTATUS,
					T1.DISBTYPE,
					T1.DISBEXPTYPE,
					T1.AUTODISB,
					T2.EXPENCETYPENAME LOVDESCDISBEXPTYPE,
					T1.INSTRUCTIONUID,
					T1.QUICKDISB,
					T1.InstCalReq,
					T1.LINKEDDISBID
				FROM FINDISBURSEMENTDETAILS T1
				INNER JOIN FINANCEMAIN T3 ON T3.FINID = T1.FINID
				LEFT JOIN AMTEXPENSETYPE T2 ON T2.EXPENCETYPEID = T1.DISBEXPTYPE
				WHERE NOT (EXISTS (SELECT 1 FROM FINDISBURSEMENTDETAILS_TEMP
					WHERE FINDISBURSEMENTDETAILS_TEMP.FINID = T1.FINID))
			]]>
		</createView>
	</changeSet>

	<changeSet id="FDDV_1.2_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'findisbursementdetails_view');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="FDDV_2.2_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'findisbursementdetails_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FDDV_2.2" author="Gopal.p">
		<createView viewName="FINDISBURSEMENTDETAILS_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T3.FINID,
					T3.FINREFERENCE,
					T1.DISBDATE,
					T1.DISBSEQ,
					T1.DISBDESC,
					T1.DISBAMOUNT,
					T1.DISBREQDATE,
					T1.DISBISACTIVE,
					T1.DISBREMARKS,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.FEECHARGEAMT,
					T1.DISBSTATUS,
					T1.DISBTYPE,
					T1.DISBEXPTYPE,
					T1.AUTODISB,
					T2.EXPENCETYPENAME LOVDESCDISBEXPTYPE,
					T1.INSTRUCTIONUID,
					T1.QUICKDISB,
					T1.INSTCALREQ,
					T1.LINKEDDISBID
				FROM FINDISBURSEMENTDETAILS_TEMP T1
				INNER JOIN FINANCEMAIN_TEMP T3 ON T3.FINID = T1.FINID
				LEFT JOIN AMTEXPENSETYPE T2 ON T2.EXPENCETYPEID = T1.DISBEXPTYPE
			]]>
		</createView>
	</changeSet>

	<changeSet id="FDDV_2.2_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'findisbursementdetails_tview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="FDDV_3.1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'findisbursementdetails_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FDDV_3.1" author="Gopal.p">
		<createView viewName="FINDISBURSEMENTDETAILS_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T3.FINID,
					T3.FINREFERENCE,
					T1.DISBDATE,
					T1.DISBSEQ,
					T1.DISBDESC,
					T1.DISBAMOUNT,
					T1.DISBREQDATE,
					T1.DISBISACTIVE,
					T1.DISBREMARKS,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.FEECHARGEAMT,
					T1.VERSION,
					T1.DISBSTATUS,
					T1.DISBTYPE,
					T1.DISBEXPTYPE,
					T1.AUTODISB,
					T2.EXPENCETYPENAME LOVDESCDISBEXPTYPE,
					T1.INSTRUCTIONUID,
					T1.QUICKDISB,
					T1.INSTCALREQ,
					T1.LINKEDDISBID
				FROM FINDISBURSEMENTDETAILS T1
				INNER JOIN FINANCEMAIN T3 ON T3.FINID = T1.FINID
				LEFT JOIN AMTEXPENSETYPE T2 ON T2.EXPENCETYPEID = T1.DISBEXPTYPE
			]]>
		</createView>
	</changeSet>

	<changeSet id="FDDV_3.1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'findisbursementdetails_aview');	
			]]>
		</sql>
	</changeSet>

	<!-- (FDDV) :: FIN DISBURSEMENT DETAILS Views handle in single place end -->

	<!-- (PMV) :: PMAY Views handle in single place start -->

	<changeSet id="PMV_1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'pmay_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="PMV_1" author="Gopal.p">
		<createView viewName="PMAY_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T2.FINID,
					T2.FINREFERENCE,
					T1.NOTIFIEDTOWN,
					T1.TOWNCODE,
					T4.TOWNNAME,
					T1.CENTRALASSISTANCE,
					T1.OWNEDHOUSE,
					T1.CARPETAREA,
					T1.HOUSEHOLDANNINCOME,
					T1.BALANCETRANSFER,
					T1.PRIMARYAPPLICANT,
					T1.TRANSACTIONFINTYPE,
					T1.PRODUCT,
					T1.PRPRTYOWNEDBYWOMEN,
					T1.WATERSUPPLY,
					T1.DRINAGE,
					T1.ELECTRICITY,
					T1.PMAYCATEGORY,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					T2.FINTYPE
				FROM PMAY_TEMP T1
				INNER JOIN FINANCEMAIN_TEMP T2 ON T2.FINID = T1.FINID
				INNER JOIN CUSTOMERS T3 ON T3.CUSTID =T2.CUSTID
				LEFT JOIN TOWNCODE T4 ON T4.TOWNCODE = T1.TOWNCODE
				WHERE T2.FINISACTIVE = 1
       			UNION ALL 
       			SELECT T2.FINID,
					T2.FINREFERENCE,
					T1.NOTIFIEDTOWN,
					T1.TOWNCODE,
					T4.TOWNNAME,
					T1.CENTRALASSISTANCE,
					T1.OWNEDHOUSE,
					T1.CARPETAREA,
					T1.HOUSEHOLDANNINCOME,
					T1.BALANCETRANSFER,
					T1.PRIMARYAPPLICANT,
					T1.TRANSACTIONFINTYPE,
					T1.PRODUCT,
					T1.PRPRTYOWNEDBYWOMEN,
					T1.WATERSUPPLY,
					T1.DRINAGE,
					T1.ELECTRICITY,
					T1.PMAYCATEGORY,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					T2.FINTYPE
				FROM PMAY T1
      			INNER JOIN FINANCEMAIN T2 ON T2.FINID = T1.FINID
				INNER JOIN CUSTOMERS T3 ON T3.CUSTID = T2.CUSTID
				LEFT JOIN TOWNCODE T4 ON T4.TOWNCODE = T1.TOWNCODE
      			WHERE NOT EXISTS (SELECT 1 FROM PMAY_TEMP WHERE FINID = T2.FINID) AND T2.FINISACTIVE = 1
			]]>
		</createView>
	</changeSet>

	<changeSet id="PMV_1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'pmay_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="PMV_2_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'pmay_lview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="PMV_2" author="Gopal.p">
		<createView viewName="PMAY_LVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T2.FINID,
					T2.FINREFERENCE,
					T1.NOTIFIEDTOWN,
					T1.TOWNCODE,
					T4.TOWNNAME,
					T1.CENTRALASSISTANCE,
					T1.OWNEDHOUSE,
					T1.CARPETAREA,
					T1.HOUSEHOLDANNINCOME,
					T1.BALANCETRANSFER,
					T1.PRIMARYAPPLICANT,
					T1.TRANSACTIONFINTYPE,
					T1.PRODUCT,
					T1.PRPRTYOWNEDBYWOMEN,
					T1.WATERSUPPLY,
					T1.DRINAGE,
					T1.ELECTRICITY,
					T1.PMAYCATEGORY,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					T2.FINTYPE
				FROM PMAY_TEMP T1
				JOIN FINANCEMAIN T2 ON T2.FINID = T1.FINID
				JOIN CUSTOMERS T3 ON T3.CUSTID = T2.CUSTID
				LEFT JOIN TOWNCODE T4 ON T4.TOWNCODE = T1.TOWNCODE
				WHERE T2.FINISACTIVE = 1
				UNION ALL
				SELECT T2.FINID,
					T2.FINREFERENCE,
					T1.NOTIFIEDTOWN,
					T1.TOWNCODE,
					T4.TOWNNAME,
					T1.CENTRALASSISTANCE,
					T1.OWNEDHOUSE,
					T1.CARPETAREA,
					T1.HOUSEHOLDANNINCOME,
					T1.BALANCETRANSFER,
					T1.PRIMARYAPPLICANT,
					T1.TRANSACTIONFINTYPE,
					T1.PRODUCT,
					T1.PRPRTYOWNEDBYWOMEN,
					T1.WATERSUPPLY,
					T1.DRINAGE,
					T1.ELECTRICITY,
					T1.PMAYCATEGORY,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					T2.FINTYPE
				FROM PMAY T1
				JOIN FINANCEMAIN T2 ON T2.FINID = T1.FINID
				JOIN CUSTOMERS T3 ON T3.CUSTID = T2.CUSTID
				LEFT JOIN TOWNCODE T4 ON T4.TOWNCODE = T1.TOWNCODE
				WHERE NOT EXISTS (SELECT 1 FROM PMAY_TEMP WHERE PMAY_TEMP.FINID = T2.FINID) AND T2.FINISACTIVE = 1
			]]>
		</createView>
	</changeSet>

	<changeSet id="PMV_2_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'pmay_lview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="PMV_3_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'pmay_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="PMV_3" author="Gopal.p">
		<createView viewName="PMAY_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T2.FINID,
					T2.FINREFERENCE,
					T1.NOTIFIEDTOWN,
					T1.TOWNCODE,
					T4.TOWNNAME,
					T1.CENTRALASSISTANCE,
					T1.OWNEDHOUSE,
					T1.CARPETAREA,
					T1.HOUSEHOLDANNINCOME,
					T1.BALANCETRANSFER,
					T1.PRIMARYAPPLICANT,
					T1.TRANSACTIONFINTYPE,
					T1.PRODUCT,
					T1.PRPRTYOWNEDBYWOMEN,
					T1.WATERSUPPLY,
					T1.DRINAGE,
					T1.ELECTRICITY,
					T1.PMAYCATEGORY,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					T2.FINTYPE
				FROM PMAY T1
				JOIN FINANCEMAIN T2 ON T2.FINID = T1.FINID
				JOIN CUSTOMERS T3 ON T3.CUSTID = T2.CUSTID
				LEFT JOIN TOWNCODE T4 ON T4.TOWNCODE = T1.TOWNCODE
			]]>
		</createView>
	</changeSet>

	<changeSet id="PMV_3_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'pmay_aview');	
			]]>
		</sql>
	</changeSet>

	<!-- (PMV) :: PMAY Views handle in single place end -->

	<!-- (SSDV) :: Subvention Details and Subvention Schedule Detail Views handle in single place start -->

	<changeSet id="SSDV_1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'subventiondetails_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="SSDV_1" author="Gopal.p">
		<createView viewName="SUBVENTIONDETAILS_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T2.FINID,
					T2.FINREFERENCE,
					T1.METHOD, 
					T1.TYPE, 
					T1.RATE, 
					T1.PERIODRATE, 
					T1.DISCOUNTRATE, 
					T1.TENURE, 
					T1.STARTDATE, 
					T1.ENDDATE,		
					T1.VERSION, 
					T1.LASTMNTBY, 
					T1.LASTMNTON,
					T1.RECORDSTATUS, 
					T1.ROLECODE, 
					T1.NEXTROLECODE, 
					T1.TASKID, 
					T1.NEXTTASKID, 
					T1.RECORDTYPE, 
					T1.WORKFLOWID
				FROM SUBVENTIONDETAILS T1
				INNER JOIN FINANCEMAIN T2 ON T2.FINID = T1.FINID
			]]>
		</createView>
	</changeSet>

	<changeSet id="SSDV_1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'subventiondetails_aview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="SSDV_2_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'subventiondetails_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="SSDV_2" author="Gopal.p">
		<createView viewName="SUBVENTIONDETAILS_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T2.FINID,
					T2.FINREFERENCE,
					T1.METHOD, 
					T1.TYPE, 
					T1.RATE, 
					T1.PERIODRATE, 
					T1.DISCOUNTRATE, 
					T1.TENURE, 
					T1.STARTDATE, 
					T1.ENDDATE,		
					T1.VERSION, 
					T1.LASTMNTBY, 
					T1.LASTMNTON,
					T1.RECORDSTATUS, 
					T1.ROLECODE, 
					T1.NEXTROLECODE, 
					T1.TASKID, 
					T1.NEXTTASKID, 
					T1.RECORDTYPE, 
					T1.WORKFLOWID
				FROM SUBVENTIONDETAILS_TEMP T1
				INNER JOIN FINANCEMAIN_TEMP T2 ON T2.FINID = T1.FINID
				UNION ALL
				SELECT T2.FINID,
					T2.FINREFERENCE,
					T1.METHOD, 
					T1.TYPE, 
					T1.RATE, 
					T1.PERIODRATE, 
					T1.DISCOUNTRATE, 
					T1.TENURE, 
					T1.STARTDATE, 
					T1.ENDDATE,		
					T1.VERSION, 
					T1.LASTMNTBY, 
					T1.LASTMNTON,
					T1.RECORDSTATUS, 
					T1.ROLECODE, 
					T1.NEXTROLECODE, 
					T1.TASKID, 
					T1.NEXTTASKID, 
					T1.RECORDTYPE, 
					T1.WORKFLOWID
				FROM SUBVENTIONDETAILS T1 
				INNER JOIN FINANCEMAIN T2 ON T2.FINID = T1.FINID
				WHERE NOT EXISTS (SELECT 1 FROM SUBVENTIONDETAILS_TEMP WHERE FINID = T1.FINID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="SSDV_2_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'subventiondetails_view');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="SSDV_3_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'subventionscheduledetail_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="SSDV_3" author="Gopal.p">
		<createView viewName="SUBVENTIONSCHEDULEDETAIL_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T2.FINID,
					T2.FINREFERENCE,
					T1.DISBSEQID, 
					T1.SCHDATE, 
					T1.NOOFDAYS, 
					T1.DISCOUNTEDPFT, 
					T1.PRESENTVALUE, 
					T1.FUTUREVALUE, 
					T1.CLOSINGBAL
				FROM SUBVENTIONSCHEDULEDETAIL T1
				INNER JOIN FINANCEMAIN T2 ON T2.FINID = T1.FINID				
			]]>
		</createView>
	</changeSet>

	<changeSet id="SSDV_3_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'subventionscheduledetail_aview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="SSDV_4_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'subventionscheduledetail_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="SSDV_4" author="Gopal.p">
		<createView viewName="SUBVENTIONSCHEDULEDETAIL_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T2.FINID,
					T2.FINREFERENCE, 
					T1.DISBSEQID, 
					T1.SCHDATE, 
					T1.NOOFDAYS, 
					T1.DISCOUNTEDPFT, 
					T1.PRESENTVALUE, 
					T1.FUTUREVALUE, 
					T1.CLOSINGBAL
				FROM SUBVENTIONSCHEDULEDETAIL_TEMP T1	
				INNER JOIN FINANCEMAIN_TEMP T2 ON T2.FINID = T1.FINID					
			]]>
		</createView>
	</changeSet>

	<changeSet id="SSDV_4_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'subventionscheduledetail_tview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="SSDV_5_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'subventionscheduledetail_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="SSDV_5" author="Gopal.p">
		<createView viewName="SUBVENTIONSCHEDULEDETAIL_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T2.FINID,
					T2.FINREFERENCE,
			 		T1.DISBSEQID,
			 		T1.SCHDATE,
			 		T1.NOOFDAYS, 
			 		T1.DISCOUNTEDPFT, 
			 		T1.PRESENTVALUE, 
			 		T1.FUTUREVALUE, 
			 		T1.CLOSINGBAL
				FROM SUBVENTIONSCHEDULEDETAIL_TEMP T1
				INNER JOIN FINANCEMAIN_TEMP T2 ON T2.FINID = T1.FINID	
				UNION ALL		 
				SELECT T2.FINID,
					T2.FINREFERENCE,
					T1.DISBSEQID,
					T1.SCHDATE, 
					T1.NOOFDAYS, 
					T1.DISCOUNTEDPFT, 
					T1.PRESENTVALUE, 
					T1.FUTUREVALUE, 
					T1.CLOSINGBAL
				FROM SUBVENTIONSCHEDULEDETAIL T1
				INNER JOIN FINANCEMAIN T2 ON T2.FINID = T1.FINID	
				WHERE NOT EXISTS (SELECT 1 FROM SUBVENTIONSCHEDULEDETAIL_TEMP WHERE FINID = T1.FINID AND DISBSEQID = T1.DISBSEQID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="SSDV_5_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'subventionscheduledetail_view');	
			]]>
		</sql>
	</changeSet>

	<!-- (SSDV) :: Subvention Details and Subvention Schedule Detail Views handle in single place end -->

	<!-- (FRIV) :: Finance Repay Instruction Views handle in single place start -->

	<changeSet id="FRIV_1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finrepayinstruction_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FRIV_1" author="Gopal.p">
		<createView viewName="FINREPAYINSTRUCTION_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINID,
					T1.FINREFERENCE,
					T1.REPAYDATE,
					T1.REPAYAMOUNT,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.REPAYSCHDMETHOD
				FROM FINREPAYINSTRUCTION T1
			]]>
		</createView>
	</changeSet>

	<changeSet id="FRIV_1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finrepayinstruction_aview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="FRIV_2_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finrepayinstruction_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FRIV_2" author="Gopal.p">
		<createView viewName="FINREPAYINSTRUCTION_TVIEW" replaceIfExists="true">
			<![CDATA[
				 SELECT T1.FINID,
					T1.FINREFERENCE,
					T1.REPAYDATE,
					T1.REPAYAMOUNT,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.REPAYSCHDMETHOD
				FROM FINREPAYINSTRUCTION_TEMP T1
			]]>
		</createView>
	</changeSet>

	<changeSet id="FRIV_2_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finrepayinstruction_tview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="FRIV_3_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finrepayinstruction_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FRIV_3" author="Gopal.p">
		<createView viewName="FINREPAYINSTRUCTION_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINID,
					T1.FINREFERENCE,
					T1.REPAYDATE,
					T1.REPAYAMOUNT,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.REPAYSCHDMETHOD
				FROM FINREPAYINSTRUCTION_TEMP T1
				UNION ALL
				SELECT T1.FINID,
					T1.FINREFERENCE,
					T1.REPAYDATE,
					T1.REPAYAMOUNT,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.REPAYSCHDMETHOD
				   FROM FINREPAYINSTRUCTION T1
				WHERE NOT EXISTS (SELECT 1 FROM FINREPAYINSTRUCTION_TEMP
					WHERE FINREPAYINSTRUCTION_TEMP.FINID = T1.FINID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="FRIV_3_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finrepayinstruction_view');	
			]]>
		</sql>
	</changeSet>

	<!-- (FRIV) :: Finance Repay Instruction Views handle in single place end -->

	<!-- (FFDV) :: Finance Fee Detail Views handle in single place start -->

	<changeSet id="FFDV_1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finfeedetail_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FFDV_1" author="Gopal.p">
		<createView viewName="FINFEEDETAIL_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FEEID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.ORIGINATIONFEE,
					T1.FINEVENT,
					T1.FEETYPEID,
					T1.FEESEQ,
					T1.FEEORDER,
					T1.CALCULATEDAMOUNT,
					T1.ACTUALAMOUNT,
					T1.WAIVEDAMOUNT,
					T1.PAIDAMOUNT,
					T1.FEESCHEDULEMETHOD,
					T1.TERMS,
					T1.REMAININGFEE,
					T1.PAYMENTREF,
					T1.CALCULATIONTYPE,
					T1.RULECODE,
					T1.FIXEDAMOUNT,
					T1.PERCENTAGE,
					T1.CALCULATEON,
					T1.ALWDEVIATION,
					T1.MAXWAIVERPERC,
					T1.ALWMODIFYFEE,
					T1.ALWMODIFYFEESCHDMTHD,
					T1.VASREFERENCE,
					T1.TAXAPPLICABLE,
					T1.TAXCOMPONENT,
					T1.PAIDAMOUNTORIGINAL,
					T1.PAIDAMOUNTGST,
					T1.NETAMOUNTORIGINAL,
					T1.NETAMOUNTGST,
					T1.NETAMOUNT,
					T1.REMAININGFEEORIGINAL,
					T1.REMAININGFEEGST,
					T1.ACTUALAMOUNTORIGINAL,
					T1.ACTUALAMOUNTGST,
					T1.FEEAMZ,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.TRANSACTIONID,
					T1.WORKFLOWID,
					T2.FEETYPECODE,
					T2.FEETYPEDESC,
					T1.STATUS,
					T1.REFUNDABLE,
					T1.INSTRUCTIONUID,
					T1.ACTPERCENTAGE,
					T1.WAIVEDGST,
					T1.REFERENCEID,
					T1.TAXHEADERID,
					T1.PAIDTDS,
					T1.REMTDS,
					T1.NETTDS,
					T2.TDSREQ,
					T3.PRODUCTCODE VASPRODUCTCODE
				FROM FINFEEDETAIL T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
				LEFT JOIN VASRECORDING T3 ON T1.VASREFERENCE = T3.VASREFERENCE
			]]>
		</createView>
	</changeSet>

	<changeSet id="FFDV_1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finfeedetail_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FFDV_2_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finfeedetail_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FFDV_2" author="Gopal.p">
		<createView viewName="FINFEEDETAIL_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FEEID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.ORIGINATIONFEE,
					T1.FINEVENT,
					T1.FEETYPEID,
					T1.FEESEQ,
					T1.FEEORDER,
					T1.CALCULATEDAMOUNT,
					T1.ACTUALAMOUNT,
					T1.WAIVEDAMOUNT,
					T1.PAIDAMOUNT,
					T1.FEESCHEDULEMETHOD,
					T1.TERMS,
					T1.REMAININGFEE,
					T1.PAYMENTREF,
					T1.CALCULATIONTYPE,
					T1.RULECODE,
					T1.FIXEDAMOUNT,
					T1.PERCENTAGE,
					T1.CALCULATEON,
					T1.ALWDEVIATION,
					T1.MAXWAIVERPERC,
					T1.ALWMODIFYFEE,
					T1.ALWMODIFYFEESCHDMTHD,
					T1.VASREFERENCE,
					T1.STATUS,
					T1.TAXAPPLICABLE,
					T1.TAXCOMPONENT,
					T1.PAIDAMOUNTORIGINAL,
					T1.PAIDAMOUNTGST,
					T1.NETAMOUNTORIGINAL,
					T1.NETAMOUNTGST,
					T1.NETAMOUNT,
					T1.REMAININGFEEORIGINAL,
					T1.REMAININGFEEGST,
					T1.ACTUALAMOUNTORIGINAL,
					T1.ACTUALAMOUNTGST,
					T1.FEEAMZ,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.TRANSACTIONID,
					T1.WORKFLOWID,
					T2.FEETYPECODE,
					T2.FEETYPEDESC,
					T1.REFUNDABLE,
					T1.INSTRUCTIONUID,
					T1.ACTPERCENTAGE,
					T1.WAIVEDGST,
					T1.REFERENCEID,
					T1.TAXHEADERID,
					T1.PAIDTDS,
					T1.REMTDS,
					T1.NETTDS,
					T2.TDSREQ,
					T3.PRODUCTCODE VASPRODUCTCODE
				FROM FINFEEDETAIL_TEMP T1
				INNER JOIN FINANCEMAIN_TEMP FM ON FM.FINID = T1.FINID
				LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
				LEFT JOIN VASRECORDING_TEMP T3 ON T1.VASREFERENCE = T3.VASREFERENCE
			]]>
		</createView>
	</changeSet>

	<changeSet id="FFDV_2_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finfeedetail_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FFDV_3_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finfeedetail_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FFDV_3" author="saisandeep.b">
		<createView viewName="FINFEEDETAIL_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FEEID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.ORIGINATIONFEE,
					T1.FINEVENT,
					T1.FEETYPEID,
					T1.FEESEQ,
					T1.FEEORDER,
					T1.CALCULATEDAMOUNT,
					T1.ACTUALAMOUNT,
					T1.WAIVEDAMOUNT,
					T1.PAIDAMOUNT,
					T1.FEESCHEDULEMETHOD,
					T1.TERMS,
					T1.REMAININGFEE,
					T1.PAYMENTREF,
					T1.CALCULATIONTYPE,
					T1.RULECODE,
					T1.FIXEDAMOUNT,
					T1.PERCENTAGE,
					T1.CALCULATEON,
					T1.ALWDEVIATION,
					T1.MAXWAIVERPERC,
					T1.ALWMODIFYFEE,
					T1.ALWMODIFYFEESCHDMTHD,
					T1.VASREFERENCE,
					T1.STATUS,
					T1.TAXAPPLICABLE,
					T1.TAXCOMPONENT,
					T1.PAIDAMOUNTORIGINAL,
					T1.PAIDAMOUNTGST,
					T1.NETAMOUNTORIGINAL,
					T1.NETAMOUNTGST,
					T1.NETAMOUNT,
					T1.REMAININGFEEORIGINAL,
					T1.REMAININGFEEGST,
					T1.ACTUALAMOUNTORIGINAL,
					T1.ACTUALAMOUNTGST,
					T1.FEEAMZ,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.TRANSACTIONID,
					T1.WORKFLOWID,
					T2.FEETYPECODE,
					T2.FEETYPEDESC,
					T1.REFUNDABLE,
					T1.INSTRUCTIONUID,
					T1.ACTPERCENTAGE,
					T1.WAIVEDGST,
					T1.REFERENCEID,
					T1.TAXHEADERID,
					T1.PAIDTDS,
					T1.REMTDS,
					T1.NETTDS,
					T2.TDSREQ,
					T3.PRODUCTCODE VASPRODUCTCODE
				FROM FINFEEDETAIL_TEMP T1
				INNER JOIN FINANCEMAIN_TEMP FM ON FM.FINID = T1.FINID
				LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
				LEFT JOIN VASRECORDING_TEMP T3 ON T1.VASREFERENCE = T3.VASREFERENCE
				UNION ALL
				SELECT T1.FEEID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.ORIGINATIONFEE,
					T1.FINEVENT,
					T1.FEETYPEID,
					T1.FEESEQ,
					T1.FEEORDER,
					T1.CALCULATEDAMOUNT,
					T1.ACTUALAMOUNT,
					T1.WAIVEDAMOUNT,
					T1.PAIDAMOUNT,
					T1.FEESCHEDULEMETHOD,
					T1.TERMS,
					T1.REMAININGFEE,
					T1.PAYMENTREF,
					T1.CALCULATIONTYPE,
					T1.RULECODE,
					T1.FIXEDAMOUNT,
					T1.PERCENTAGE,
					T1.CALCULATEON,
					T1.ALWDEVIATION,
					T1.MAXWAIVERPERC,
					T1.ALWMODIFYFEE,
					T1.ALWMODIFYFEESCHDMTHD,
					T1.VASREFERENCE,
					T1.STATUS,
					T1.TAXAPPLICABLE,
					T1.TAXCOMPONENT,
					T1.PAIDAMOUNTORIGINAL,
					T1.PAIDAMOUNTGST,
					T1.NETAMOUNTORIGINAL,
					T1.NETAMOUNTGST,
					T1.NETAMOUNT,
					T1.REMAININGFEEORIGINAL,
					T1.REMAININGFEEGST,
					T1.ACTUALAMOUNTORIGINAL,
					T1.ACTUALAMOUNTGST,
					T1.FEEAMZ,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.TRANSACTIONID,
					T1.WORKFLOWID,
					T2.FEETYPECODE,
					T2.FEETYPEDESC,
					T1.REFUNDABLE,
					T1.INSTRUCTIONUID,
					T1.ACTPERCENTAGE,
					T1.WAIVEDGST,
					T1.REFERENCEID,
					T1.TAXHEADERID,
					T1.PAIDTDS,
					T1.REMTDS,
					T1.NETTDS,
					T2.TDSREQ,
					T3.PRODUCTCODE VASPRODUCTCODE
				FROM FINFEEDETAIL T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID 
				LEFT JOIN VASRECORDING T3 ON T1.VASREFERENCE = T3.VASREFERENCE
				WHERE NOT EXISTS (SELECT 1 FROM FINFEEDETAIL_TEMP WHERE FINFEEDETAIL_TEMP.FEEID = T1.FEEID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="FFDV_3_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finfeedetail_view');
			]]>
		</sql>
	</changeSet>

	<!-- (FFDV) :: Finance Fee Detail Views handle in single place end -->

	<!-- (FOPR) :: Over due penalty rate Views handle in single place start -->

	<changeSet id="FOPR_1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finodpenaltyrates_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FOPR_1" author="Gopal.p">
		<createView viewName="FINODPENALTYRATES_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FINID,
					FINREFERENCE,
					FINEFFECTDATE,
					APPLYODPENALTY,
					ODINCGRCDAYS,
					ODCHARGETYPE,
					ODGRACEDAYS,
					ODCHARGECALON,
					ODCHARGEAMTORPERC,
					ODALLOWWAIVER,
					ODMAXWAIVERPERC,
					ODRULECODE,
					ODMINCAPAMOUNT,
					ODTDSREQ
				FROM FINODPENALTYRATES
			]]>
		</createView>
	</changeSet>

	<changeSet id="FOPR_1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finodpenaltyrates_aview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="FOPR_2_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finodpenaltyrates_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FOPR_2" author="Gopal.p">
		<createView viewName="FINODPENALTYRATES_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FINID,
					FINREFERENCE,
					FINEFFECTDATE,
					APPLYODPENALTY,
					ODINCGRCDAYS,
					ODCHARGETYPE,
					ODGRACEDAYS,
					ODCHARGECALON,
					ODCHARGEAMTORPERC,
					ODALLOWWAIVER,
					ODMAXWAIVERPERC,
					ODRULECODE,
					ODMINCAPAMOUNT,
					ODTDSREQ
				FROM FINODPENALTYRATES_TEMP
			]]>
		</createView>
	</changeSet>

	<changeSet id="FOPR_2_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finodpenaltyrates_tview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="FOPR_3_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finodpenaltyrates_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FOPR_3" author="Gopal.p">
		<createView viewName="FINODPENALTYRATES_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FINID,
					FINREFERENCE,
					FINEFFECTDATE,
					APPLYODPENALTY,
					ODINCGRCDAYS,
					ODCHARGETYPE,
					ODGRACEDAYS,
					ODCHARGECALON,
					ODCHARGEAMTORPERC,
					ODALLOWWAIVER,
					ODMAXWAIVERPERC,
					ODRULECODE,
					ODMINCAPAMOUNT,
					ODTDSREQ
				FROM FINODPENALTYRATES_TEMP
				UNION
				SELECT FINID,
					FINREFERENCE,
					FINEFFECTDATE,
					APPLYODPENALTY,
					ODINCGRCDAYS,
					ODCHARGETYPE,
					ODGRACEDAYS,
					ODCHARGECALON,
					ODCHARGEAMTORPERC,
					ODALLOWWAIVER,
					ODMAXWAIVERPERC,
					ODRULECODE,
					ODMINCAPAMOUNT,
					ODTDSREQ
				FROM FINODPENALTYRATES
				WHERE NOT (EXISTS (SELECT 1 FROM FINODPENALTYRATES_TEMP
					WHERE FINID = FINODPENALTYRATES.FINID))
			]]>
		</createView>
	</changeSet>

	<changeSet id="FOPR_3_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finodpenaltyrates_view');	
			]]>
		</sql>
	</changeSet>

	<!-- (FOPR) :: Over due penalty rate Views handle in single place end -->

	<!-- (FGDV) :: Fin Guarantor detail Views handle in single place start -->

	<changeSet id="FGDV_1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finguarantorsdetails_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FGDV_1" author="Gopal.p">
		<createView viewName="FINGUARANTORSDETAILS_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.GUARANTORID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.BANKCUSTOMER,
					T1.GUARANTORCIF,
					T1.GUARANTORIDTYPE,
					T1.GUARANTORIDNUMBER,
					T1.GURANTEEPERCENTAGE,
					T1.MOBILENO,
					T1.EMAILID,
					T1.GUARANTORPROOF,
					T1.GUARANTORPROOFNAME,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.GUARANTORCIFNAME,
					T1.REMARKS,
					T1.ADDRHNBR,
					T1.FLATNBR,
					T1.ADDRSTREET,
					T1.ADDRLINE1,
					T1.ADDRLINE2,
					T1.POBOX,
					T1.ADDRCITY,
					T1.ADDRPROVINCE,
					T1.ADDRCOUNTRY,
					T1.ADDRZIP,
					T1.GUARANTORGENDERCODE,
					(SELECT IDENTITYDESC FROM BMTIDENTITYTYPE WHERE IDENTITYTYPE = T1.GUARANTORIDTYPE) GUARANTORIDTYPENAME,
					T2.USRLOGIN,
					T2.USRFNAME,
					T2.USRMNAME,
					T2.USRLNAME,
					COALESCE(T3.CUSTID, 0) CUSTID,
					T3.CUSTSHRTNAME,
					T3.CUSTDOB LOVCUSTDOB
				FROM FINGUARANTORSDETAILS T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				JOIN SECUSERS T2 ON T1.LASTMNTBY = T2.USRID
				LEFT JOIN CUSTOMERS T3 ON T1.GUARANTORCIF = T3.CUSTCIF
			]]>
		</createView>
	</changeSet>

	<changeSet id="FGDV_1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finguarantorsdetails_aview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="FGDV_2_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finguarantorsdetails_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FGDV_2" author="Gopal.p">
		<createView viewName="FINGUARANTORSDETAILS_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.GUARANTORID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.BANKCUSTOMER,
					T1.GUARANTORCIF,
					T1.GUARANTORIDTYPE,
					T1.GUARANTORIDNUMBER,
					T1.GURANTEEPERCENTAGE,
					T1.MOBILENO,
					T1.EMAILID,
					T1.GUARANTORPROOF,
					T1.GUARANTORPROOFNAME,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.GUARANTORCIFNAME,
					T1.REMARKS,
					T1.ADDRHNBR,
					T1.FLATNBR,
					T1.ADDRSTREET,
					T1.ADDRLINE1,
					T1.ADDRLINE2,
					T1.POBOX,
					T1.ADDRCITY,
					T1.ADDRPROVINCE,
					T1.ADDRCOUNTRY,
					T1.ADDRZIP,
					T1.GUARANTORGENDERCODE,
					(SELECT IDENTITYDESC FROM BMTIDENTITYTYPE WHERE IDENTITYTYPE = T1.GUARANTORIDTYPE) GUARANTORIDTYPENAME,
					T2.USRLOGIN,
					T2.USRFNAME,
					T2.USRMNAME,
					T2.USRLNAME,
					COALESCE(T3.CUSTID, 0) CUSTID,
					T3.CUSTSHRTNAME,
					T3.CUSTDOB LOVCUSTDOB
				FROM FINGUARANTORSDETAILS_TEMP T1
				INNER JOIN FINANCEMAIN_TEMP FM ON FM.FINID = T1.FINID
				JOIN SECUSERS T2 ON T1.LASTMNTBY = T2.USRID
				LEFT JOIN CUSTOMERS T3 ON T1.GUARANTORCIF = T3.CUSTCIF
			]]>
		</createView>
	</changeSet>

	<changeSet id="FGDV_2_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finguarantorsdetails_tview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="FGDV_3.1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finguarantorsdetails_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FGDV_3.1" author="Gopal.p">
		<createView viewName="FINGUARANTORSDETAILS_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.GUARANTORID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.BANKCUSTOMER,
					T1.GUARANTORCIF,
					T1.GUARANTORIDTYPE,
					T1.GUARANTORIDNUMBER,
					T1.GURANTEEPERCENTAGE,
					T1.MOBILENO,
					T1.EMAILID,
					T1.GUARANTORPROOF,
					T1.GUARANTORPROOFNAME,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.GUARANTORCIFNAME,
					T1.REMARKS,
					T1.ADDRHNBR,
					T1.FLATNBR,
					T1.ADDRSTREET,
					T1.ADDRLINE1,
					T1.ADDRLINE2,
					T1.POBOX,
					T1.ADDRCITY,
					T1.ADDRPROVINCE,
					T1.ADDRCOUNTRY,
					T1.ADDRZIP,
					T1.GUARANTORGENDERCODE,
					(SELECT IDENTITYDESC FROM BMTIDENTITYTYPE WHERE IDENTITYTYPE = T1.GUARANTORIDTYPE) GUARANTORIDTYPENAME,
					T2.USRLOGIN,
					T2.USRFNAME,
					T2.USRMNAME,
					T2.USRLNAME,
					COALESCE(T3.CUSTID, 0) CUSTID,
					T3.CUSTSHRTNAME,
					T3.CUSTDOB LOVCUSTDOB
				FROM FINGUARANTORSDETAILS_TEMP T1
				INNER JOIN FINANCEMAIN_TEMP FM ON FM.FINID = T1.FINID
				JOIN SECUSERS T2 ON T1.LASTMNTBY = T2.USRID
				LEFT JOIN CUSTOMERS T3 ON T1.GUARANTORCIF = T3.CUSTCIF
				UNION ALL
				SELECT T1.GUARANTORID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.BANKCUSTOMER,
					T1.GUARANTORCIF,
					T1.GUARANTORIDTYPE,
					T1.GUARANTORIDNUMBER,
					T1.GURANTEEPERCENTAGE,
					T1.MOBILENO,
					T1.EMAILID,
					T1.GUARANTORPROOF,
					T1.GUARANTORPROOFNAME,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.GUARANTORCIFNAME,
					T1.REMARKS,
					T1.ADDRHNBR,
					T1.FLATNBR,
					T1.ADDRSTREET,
					T1.ADDRLINE1,
					T1.ADDRLINE2,
					T1.POBOX,
					T1.ADDRCITY,
					T1.ADDRPROVINCE,
					T1.ADDRCOUNTRY,
					T1.ADDRZIP,
					T1.GUARANTORGENDERCODE,
					(SELECT IDENTITYDESC FROM BMTIDENTITYTYPE WHERE IDENTITYTYPE = T1.GUARANTORIDTYPE) GUARANTORIDTYPENAME,
					T2.USRLOGIN,
					T2.USRFNAME,
					T2.USRMNAME,
					T2.USRLNAME,
					COALESCE(T3.CUSTID, 0) AS CUSTID,
					T3.CUSTSHRTNAME,
					T3.CUSTDOB AS LOVCUSTDOB
				FROM FINGUARANTORSDETAILS T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				JOIN SECUSERS T2 ON T1.LASTMNTBY = T2.USRID
				LEFT JOIN CUSTOMERS T3 ON T1.GUARANTORCIF = T3.CUSTCIF
				WHERE NOT EXISTS (SELECT 1 FROM FINGUARANTORSDETAILS_TEMP
					WHERE FINGUARANTORSDETAILS_TEMP.GUARANTORID = T1.GUARANTORID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="FGDV_3.1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finguarantorsdetails_view');	
			]]>
		</sql>
	</changeSet>

	<!-- (FGDV) :: Fin Guarantor detail Views handle in single place end -->


	<!-- (FJADV) :: Fin Joint Account detail Views handle in single place start -->

	<changeSet id="FJADV_1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finjointaccountdetails_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FJADV_1" author="Gopal.p">
		<createView viewName="FINJOINTACCOUNTDETAILS_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.JOINTACCOUNTID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.CUSTCIF,
					T1.INCLUDEREPAY,
					T1.REPAYACCOUNTID,
					T1.CATOFCOAPPLICANT,
					T1.AUTHORITYSIGNATORY,
					T1.SEQUENCE,
					T1.INCLUDEINCOME,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.USRLOGIN,
					T2.USRFNAME,
					T2.USRMNAME,
					T2.USRLNAME,
					T3.CUSTSHRTNAME LOVDESCCIFNAME,
					T3.CUSTID,
					T3.CUSTDOB LOVCUSTDOB
				FROM FINJOINTACCOUNTDETAILS T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				LEFT JOIN SECUSERS T2 ON T1.LASTMNTBY = T2.USRID
				JOIN CUSTOMERS T3 ON T1.CUSTCIF = T3.CUSTCIF
			]]>
		</createView>
	</changeSet>

	<changeSet id="FJADV_1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finjointaccountdetails_aview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="FJADV_2_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finjointaccountdetails_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FJADV_2" author="Gopal.p">
		<createView viewName="FINJOINTACCOUNTDETAILS_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.JOINTACCOUNTID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.CUSTCIF,
					T1.INCLUDEREPAY,
					T1.REPAYACCOUNTID,
					T1.CATOFCOAPPLICANT,
					T1.AUTHORITYSIGNATORY,
					T1.SEQUENCE,
					T1.INCLUDEINCOME,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.USRLOGIN,
					T2.USRFNAME,
					T2.USRMNAME,
					T2.USRLNAME,
					T3.CUSTSHRTNAME LOVDESCCIFNAME,
					T3.CUSTID,
					T3.CUSTDOB LOVCUSTDOB
				FROM FINJOINTACCOUNTDETAILS_TEMP T1
				INNER JOIN FINANCEMAIN_TEMP FM ON FM.FINID = T1.FINID
				LEFT JOIN SECUSERS T2 ON T1.LASTMNTBY = T2.USRID
				JOIN CUSTOMERS T3 ON T1.CUSTCIF = T3.CUSTCIF
			]]>
		</createView>
	</changeSet>

	<changeSet id="FJADV_2_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finjointaccountdetails_tview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="FJADV_3_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finjointaccountdetails_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FJADV_3" author="Gopal.p">
		<createView viewName="FINJOINTACCOUNTDETAILS_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.JOINTACCOUNTID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.CUSTCIF,
					T1.INCLUDEREPAY,
					T1.REPAYACCOUNTID,
					T1.CATOFCOAPPLICANT,
					T1.AUTHORITYSIGNATORY,
					T1.SEQUENCE,
					T1.INCLUDEINCOME,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.USRLOGIN,
					T2.USRFNAME,
					T2.USRMNAME,
					T2.USRLNAME,
					T3.CUSTSHRTNAME LOVDESCCIFNAME,
					T3.CUSTID,
					T3.CUSTDOB LOVCUSTDOB
				FROM FINJOINTACCOUNTDETAILS_TEMP T1
				INNER JOIN FINANCEMAIN_TEMP FM ON FM.FINID = T1.FINID
				LEFT JOIN SECUSERS T2 ON T1.LASTMNTBY = T2.USRID
				JOIN CUSTOMERS T3 ON T1.CUSTCIF = T3.CUSTCIF
				UNION ALL
				SELECT T1.JOINTACCOUNTID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.CUSTCIF,
					T1.INCLUDEREPAY,
					T1.REPAYACCOUNTID,
					T1.CATOFCOAPPLICANT,
					T1.AUTHORITYSIGNATORY,
					T1.SEQUENCE,
					T1.INCLUDEINCOME,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.USRLOGIN,
					T2.USRFNAME,
					T2.USRMNAME,
					T2.USRLNAME,
					T3.CUSTSHRTNAME LOVDESCCIFNAME,
					T3.CUSTID,
					T3.CUSTDOB LOVCUSTDOB
				FROM FINJOINTACCOUNTDETAILS T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				LEFT JOIN SECUSERS T2 ON T1.LASTMNTBY = T2.USRID
				JOIN CUSTOMERS T3 ON T1.CUSTCIF = T3.CUSTCIF
				WHERE NOT EXISTS (SELECT 1 FROM FINJOINTACCOUNTDETAILS_TEMP
					WHERE FINJOINTACCOUNTDETAILS_TEMP.JOINTACCOUNTID = T1.JOINTACCOUNTID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="FJADV_3_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finjointaccountdetails_view');	
			]]>
		</sql>
	</changeSet>

	<!-- (FJADV) :: Fin Joint Account detail Views handle in single place end -->

	<!-- (FTDV) :: Fin Tax detail Views handle in single place start -->

	<changeSet id="FTDV_1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'fintaxdetail_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FTDV_1" author="Gopal.p">
		<createView viewName="FINTAXDETAIL_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FM.FINID,
					FM.FINREFERENCE,
					T1.APPLICABLEFOR,
					T1.TAXCUSTID,
					T1.TAXEXEMPTED,
					T1.TAXNUMBER,
					T1.ADDRLINE1,
					T1.ADDRLINE2,
					T1.ADDRLINE3,
					T1.ADDRLINE4,
					T1.COUNTRY,
					T1.PROVINCE,
					T1.CITY,
					T1.PINCODE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.COUNTRYDESC COUNTRYNAME,
					T3.CPPROVINCENAME PROVINCENAME,
					T4.PCCITYNAME CITYNAME,
					T5.AREANAME PINCODENAME,
					T6.CUSTCIF,
					T6.CUSTSHRTNAME,
					T1.SEZCERTIFICATENO,
					T1.SEZVALUEDATE,
					T1.ADDRESSDETAIL,
					T1.PINCODEID
				FROM FINTAXDETAIL T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				LEFT JOIN BMTCOUNTRIES T2 ON T1.COUNTRY = T2.COUNTRYCODE
				LEFT JOIN RMTCOUNTRYVSPROVINCE T3 ON T1.PROVINCE = T3.CPPROVINCE AND T1.COUNTRY = T3.CPCOUNTRY
				LEFT JOIN RMTPROVINCEVSCITY T4 ON T1.CITY = T4.PCCITY AND T1.PROVINCE = T4.PCPROVINCE AND T1.COUNTRY = T4.PCCOUNTRY
				LEFT JOIN PINCODES T5 ON T1.PINCODEID = T5.PINCODEID AND T1.CITY = T5.CITY
				JOIN CUSTOMERS T6 ON T1.TAXCUSTID = T6.CUSTID
			]]>
		</createView>
	</changeSet>

	<changeSet id="FTDV_1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'fintaxdetail_aview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="FTDV_2_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'fintaxdetail_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FTDV_2" author="Gopal.p">
		<createView viewName="FINTAXDETAIL_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FM.FINID,
					FM.FINREFERENCE,
					T1.APPLICABLEFOR,
					T1.TAXCUSTID,
					T1.TAXEXEMPTED,
					T1.TAXNUMBER,
					T1.ADDRLINE1,
					T1.ADDRLINE2,
					T1.ADDRLINE3,
					T1.ADDRLINE4,
					T1.COUNTRY,
					T1.PROVINCE,
					T1.CITY,
					T1.PINCODE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.COUNTRYDESC COUNTRYNAME,
					T3.CPPROVINCENAME PROVINCENAME,
					T4.PCCITYNAME CITYNAME,
					T5.AREANAME PINCODENAME,
					T6.CUSTCIF,
					T6.CUSTSHRTNAME,
					T1.SEZCERTIFICATENO,
					T1.SEZVALUEDATE,
					T1.ADDRESSDETAIL,
					T1.PINCODEID
				FROM FINTAXDETAIL_TEMP T1
				INNER JOIN FINANCEMAIN_TEMP FM ON FM.FINID = T1.FINID
				LEFT JOIN BMTCOUNTRIES T2 ON T1.COUNTRY = T2.COUNTRYCODE
				LEFT JOIN RMTCOUNTRYVSPROVINCE T3 ON T1.PROVINCE = T3.CPPROVINCE AND T1.COUNTRY = T3.CPCOUNTRY
				LEFT JOIN RMTPROVINCEVSCITY T4 ON T1.CITY = T4.PCCITY AND T1.PROVINCE = T4.PCPROVINCE AND T1.COUNTRY = T4.PCCOUNTRY
				LEFT JOIN PINCODES T5 ON T1.PINCODEID = T5.PINCODEID AND T1.CITY = T5.CITY
				JOIN CUSTOMERS T6 ON T1.TAXCUSTID = T6.CUSTID
			]]>
		</createView>
	</changeSet>

	<changeSet id="FTDV_2_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'fintaxdetail_tview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="FTDV_3.2_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'fintaxdetail_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FTDV_3.2" author="Gopal.p">
		<createView viewName="FINTAXDETAIL_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FM.FINID,
					FM.FINREFERENCE,
					T1.APPLICABLEFOR,
					T1.TAXCUSTID,
					T1.TAXEXEMPTED,
					T1.TAXNUMBER,
					T1.ADDRLINE1,
					T1.ADDRLINE2,
					T1.ADDRLINE3,
					T1.ADDRLINE4,
					T1.COUNTRY,
					T1.PROVINCE,
					T1.CITY,
					T1.PINCODE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.COUNTRYDESC COUNTRYNAME,
					T3.CPPROVINCENAME PROVINCENAME,
					T4.PCCITYNAME CITYNAME,
					T5.AREANAME PINCODENAME,
					T6.CUSTCIF,
					T6.CUSTSHRTNAME,
					T1.SEZCERTIFICATENO,
					T1.SEZVALUEDATE,
					T1.ADDRESSDETAIL,
					T1.PINCODEID
				FROM FINTAXDETAIL_TEMP T1
				INNER JOIN (SELECT FINID, FINREFERENCE FROM FINANCEMAIN_TEMP
					UNION ALL
					SELECT FINID, FINREFERENCE FROM FINANCEMAIN 
					WHERE NOT EXISTS(SELECT 1 FROM FINANCEMAIN_TEMP WHERE FINID = FINANCEMAIN.FINID)
					) FM ON FM.FINID = T1.FINID
				LEFT JOIN BMTCOUNTRIES T2 ON T1.COUNTRY = T2.COUNTRYCODE
				LEFT JOIN RMTCOUNTRYVSPROVINCE T3 ON T1.PROVINCE = T3.CPPROVINCE AND T1.COUNTRY = T3.CPCOUNTRY
				LEFT JOIN RMTPROVINCEVSCITY T4 ON T1.CITY = T4.PCCITY AND T1.PROVINCE = T4.PCPROVINCE AND T1.COUNTRY = T4.PCCOUNTRY
				LEFT JOIN PINCODES T5 ON T1.PINCODEID = T5.PINCODEID AND T1.CITY = T5.CITY
				JOIN CUSTOMERS T6 ON T1.TAXCUSTID = T6.CUSTID
				UNION ALL
				SELECT FM.FINID,
					FM.FINREFERENCE,
					T1.APPLICABLEFOR,
					T1.TAXCUSTID,
					T1.TAXEXEMPTED,
					T1.TAXNUMBER,
					T1.ADDRLINE1,
					T1.ADDRLINE2,
					T1.ADDRLINE3,
					T1.ADDRLINE4,
					T1.COUNTRY,
					T1.PROVINCE,
					T1.CITY,
					T1.PINCODE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.COUNTRYDESC COUNTRYNAME,
					T3.CPPROVINCENAME PROVINCENAME,
					T4.PCCITYNAME CITYNAME,
					T5.AREANAME PINCODENAME,
					T6.CUSTCIF,
					T6.CUSTSHRTNAME,
					T1.SEZCERTIFICATENO,
					T1.SEZVALUEDATE,
					T1.ADDRESSDETAIL,
					T1.PINCODEID
				FROM FINTAXDETAIL T1
				INNER JOIN (SELECT FINID, FINREFERENCE FROM FINANCEMAIN_TEMP
					UNION ALL
					SELECT FINID, FINREFERENCE FROM FINANCEMAIN 
					WHERE NOT EXISTS(SELECT 1 FROM FINANCEMAIN_TEMP WHERE FINID = FINANCEMAIN.FINID)
					) FM ON FM.FINID = T1.FINID
				LEFT JOIN BMTCOUNTRIES T2 ON T1.COUNTRY = T2.COUNTRYCODE
				LEFT JOIN RMTCOUNTRYVSPROVINCE T3 ON T1.PROVINCE = T3.CPPROVINCE AND T1.COUNTRY = T3.CPCOUNTRY
				LEFT JOIN RMTPROVINCEVSCITY T4 ON T1.CITY = T4.PCCITY AND T1.PROVINCE = T4.PCPROVINCE AND T1.COUNTRY = T4.PCCOUNTRY
				LEFT JOIN PINCODES T5 ON T1.PINCODEID = T5.PINCODEID AND T1.CITY = T5.CITY
				JOIN CUSTOMERS T6 ON T1.TAXCUSTID = T6.CUSTID
				WHERE NOT EXISTS (SELECT 1 FROM FINTAXDETAIL_TEMP
					WHERE FINTAXDETAIL_TEMP.FINID = T1.FINID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="FTDV_3.2_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'fintaxdetail_view');	
			]]>
		</sql>
	</changeSet>

	<!-- (FTDV) :: Fin Tax detail Views handle in single place end -->

	<!-- (FAPV) :: Fin Advance Payment Views handle in single place start -->

	<changeSet id="FAPV_1.1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finadvancepayments_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FAPV_1.1" author="Gopal.p">
		<createView viewName="FINADVANCEPAYMENTS_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FM.FINID,
					FM.FINREFERENCE,
					T1.PAYMENTID,
					T1.PAYMENTSEQ,
					T1.PAYMENTDETAIL,
					T1.AMTTOBERELEASED,
					T1.LIABILITYHOLDNAME,
					T1.TRANSACTIONREF,
					T1.BENEFICIARYNAME,
					T1.BENEFICIARYACCNO,
					T1.REENTERBENEFICIARYACCNO,
					T1.DESCRIPTION,
					T1.PAYMENTTYPE,
					T1.LLREFERENCENO,
					T1.LLDATE,
					T1.CUSTCONTRIBUTION,
					T1.SELLERCONTRIBUTION,
					T1.REMARKS,
					T1.DISBDATE,
					T1.DISBSEQ,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.BANKCODE,
					T1.PAYABLELOC,
					T1.PRINTINGLOC,
					T1.VALUEDATE,
					T1.BANKBRANCHID,
					T1.PHONECOUNTRYCODE,
					T1.PHONEAREACODE,
					T1.PHONENUMBER,
					T1.CLEARINGDATE,
					T1.STATUS,
					T1.ACTIVE,
					T1.INPUTDATE,
					T1.DISBCCY,
					T1.POISSUED,
					T3.BANKCODE BRANCHBANKCODE,
					T31.BANKNAME BRANCHBANKNAME,
					T3.BRANCHCODE,
					T3.BRANCHDESC,
					T3.IFSC,
					T3.CITY,
					T4.BANKNAME,
					T1.PARTNERBANKID,
					T5.PARTNERBANKCODE,
					T5.PARTNERBANKNAME,
					T1.LINKEDTRANID,
					T5.ACTYPE PARTNERBANKACTYPE,
					T5.ACCOUNTNO PARTNERBANKAC,
					T6.BRANCHDESC PRINTINGLOCDESC,
					T1.REJECTREASON,
					T1.REALIZATIONDATE,
					T1.HOLDDISBURSEMENT,
					T1.VASREFERENCE,
					T1.LEI
				FROM FINADVANCEPAYMENTS_TEMP T1
				INNER JOIN (SELECT FINID, FINREFERENCE FROM FINANCEMAIN_TEMP
					UNION ALL
					SELECT FINID, FINREFERENCE FROM FINANCEMAIN 
					WHERE NOT EXISTS(SELECT 1 FROM FINANCEMAIN_TEMP WHERE FINID = FINANCEMAIN.FINID)
					) FM ON FM.FINID = T1.FINID
				LEFT JOIN BANKBRANCHES T3 ON T1.BANKBRANCHID = T3.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL T31 ON T31.BANKCODE = T3.BANKCODE
				LEFT JOIN BMTBANKDETAIL T4 ON T1.BANKCODE = T4.BANKCODE
				LEFT JOIN PARTNERBANKS T5 ON T5.PARTNERBANKID = T1.PARTNERBANKID
				LEFT JOIN BANKBRANCHES T6 ON T6.BRANCHCODE = T1.PRINTINGLOC AND T6.BANKCODE = T1.BANKCODE
				UNION ALL
				SELECT FM.FINID,
					FM.FINREFERENCE,
					T1.PAYMENTID,
					T1.PAYMENTSEQ,
					T1.PAYMENTDETAIL,
					T1.AMTTOBERELEASED,
					T1.LIABILITYHOLDNAME,
					T1.TRANSACTIONREF,
					T1.BENEFICIARYNAME,
					T1.BENEFICIARYACCNO,
					T1.REENTERBENEFICIARYACCNO,
					T1.DESCRIPTION,
					T1.PAYMENTTYPE,
					T1.LLREFERENCENO,
					T1.LLDATE,
					T1.CUSTCONTRIBUTION,
					T1.SELLERCONTRIBUTION,
					T1.REMARKS,
					T1.DISBDATE,
					T1.DISBSEQ,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.BANKCODE,
					T1.PAYABLELOC,
					T1.PRINTINGLOC,
					T1.VALUEDATE,
					T1.BANKBRANCHID,
					T1.PHONECOUNTRYCODE,
					T1.PHONEAREACODE,
					T1.PHONENUMBER,
					T1.CLEARINGDATE,
					T1.STATUS,
					T1.ACTIVE,
					T1.INPUTDATE,
					T1.DISBCCY,
					T1.POISSUED,
					T3.BANKCODE BRANCHBANKCODE,
					T31.BANKNAME BRANCHBANKNAME,
					T3.BRANCHCODE,
					T3.BRANCHDESC,
					T3.IFSC,
					T3.CITY,
					T4.BANKNAME,
					T1.PARTNERBANKID,
					T5.PARTNERBANKCODE,
					T5.PARTNERBANKNAME,
					T1.LINKEDTRANID,
					T5.ACTYPE PARTNERBANKACTYPE,
					T5.ACCOUNTNO PARTNERBANKAC,
					T6.BRANCHDESC PRINTINGLOCDESC,
					T1.REJECTREASON,
					T1.REALIZATIONDATE,
					T1.HOLDDISBURSEMENT,
					T1.VASREFERENCE,
					T1.LEI
				FROM FINADVANCEPAYMENTS T1
				INNER JOIN (SELECT FINID, FINREFERENCE FROM FINANCEMAIN_TEMP
					UNION ALL
					SELECT FINID, FINREFERENCE FROM FINANCEMAIN 
					WHERE NOT EXISTS(SELECT 1 FROM FINANCEMAIN_TEMP WHERE FINID = FINANCEMAIN.FINID)
					) FM ON FM.FINID = T1.FINID
				LEFT JOIN BANKBRANCHES T3 ON T1.BANKBRANCHID = T3.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL T31 ON T31.BANKCODE = T3.BANKCODE
				LEFT JOIN BMTBANKDETAIL T4 ON T1.BANKCODE = T4.BANKCODE
				LEFT JOIN PARTNERBANKS T5 ON T5.PARTNERBANKID = T1.PARTNERBANKID
				LEFT JOIN BANKBRANCHES T6 ON T6.BRANCHCODE = T1.PRINTINGLOC AND T6.BANKCODE = T1.BANKCODE
				WHERE NOT EXISTS (SELECT 1 FROM FINADVANCEPAYMENTS_TEMP
					WHERE FINADVANCEPAYMENTS_TEMP.FINID = T1.FINID AND FINADVANCEPAYMENTS_TEMP.PAYMENTSEQ = T1.PAYMENTSEQ)
			]]>
		</createView>
	</changeSet>

	<changeSet id="FAPV_1.1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finadvancepayments_view');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="FAPV_2_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finadvancepayments_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FAPV_2" author="Gopal.p">
		<createView viewName="FINADVANCEPAYMENTS_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FM.FINID,
					FM.FINREFERENCE,
					T1.PAYMENTID,
					T1.PAYMENTSEQ,
					T1.PAYMENTDETAIL,
					T1.AMTTOBERELEASED,
					T1.LIABILITYHOLDNAME,
					T1.TRANSACTIONREF,
					T1.BENEFICIARYNAME,
					T1.BENEFICIARYACCNO,
					T1.REENTERBENEFICIARYACCNO,
					T1.DESCRIPTION,
					T1.PAYMENTTYPE,
					T1.LLREFERENCENO,
					T1.LLDATE,
					T1.CUSTCONTRIBUTION,
					T1.SELLERCONTRIBUTION,
					T1.REMARKS,
					T1.DISBDATE,
					T1.DISBSEQ,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.BANKCODE,
					T1.PAYABLELOC,
					T1.PRINTINGLOC,
					T1.VALUEDATE,
					T1.BANKBRANCHID,
					T1.PHONECOUNTRYCODE,
					T1.PHONEAREACODE,
					T1.PHONENUMBER,
					T1.CLEARINGDATE,
					T1.STATUS,
					T1.ACTIVE,
					T1.INPUTDATE,
					T1.DISBCCY,
					T1.POISSUED,
					T3.BANKCODE BRANCHBANKCODE,
					T31.BANKNAME BRANCHBANKNAME,
					T3.BRANCHCODE,
					T3.BRANCHDESC,
					T3.IFSC,
					T3.CITY,
					T4.BANKNAME,
					T1.PARTNERBANKID,
					T5.PARTNERBANKCODE,
					T5.PARTNERBANKNAME,
					T1.LINKEDTRANID,
					T5.ACTYPE PARTNERBANKACTYPE,
					T5.ACCOUNTNO PARTNERBANKAC,
					T6.BRANCHDESC PRINTINGLOCDESC,
					T1.REJECTREASON,
					T1.REALIZATIONDATE,
					T1.HOLDDISBURSEMENT,
					T1.VASREFERENCE,
					T1.LEI
				FROM FINADVANCEPAYMENTS_TEMP T1
				INNER JOIN FINANCEMAIN_TEMP FM ON FM.FINID = T1.FINID
				LEFT JOIN BANKBRANCHES T3 ON T1.BANKBRANCHID = T3.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL T31 ON T31.BANKCODE = T3.BANKCODE
				LEFT JOIN BMTBANKDETAIL T4 ON T1.BANKCODE = T4.BANKCODE
				LEFT JOIN PARTNERBANKS T5 ON T5.PARTNERBANKID = T1.PARTNERBANKID
				LEFT JOIN BANKBRANCHES T6 ON T6.BRANCHCODE = T1.PRINTINGLOC AND T6.BANKCODE = T1.BANKCODE
			]]>
		</createView>
	</changeSet>

	<changeSet id="FAPV_2_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finadvancepayments_tview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="FAPV_3_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finadvancepayments_custaview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FAPV_3" author="Gopal.p">
		<createView viewName="FINADVANCEPAYMENTS_CUSTAVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T6.FINID,
					T6.FINREFERENCE,
					T1.PAYMENTID,
					T1.PAYMENTSEQ,
					T1.BENEFICIARYNAME,
					T1.BENEFICIARYACCNO,
					T1.PAYMENTTYPE,
					T1.LLDATE,
					T1.DISBSEQ,
					T1.BANKBRANCHID,
					T1.STATUS,
					T1.DISBCCY,
					T1.POISSUED,
					T3.BANKCODE BRANCHBANKCODE,
					T31.BANKNAME BRANCHBANKNAME,
					T3.BRANCHCODE,
					T3.BRANCHDESC,
					T3.IFSC,
					T3.CITY,
					T3.MICR,
					T1.PARTNERBANKID,
					T5.PARTNERBANKCODE,
					T5.PARTNERBANKNAME,
					T1.LINKEDTRANID,
					T5.ACTYPE PARTNERBANKACTYPE,
					T5.ACCOUNTNO PARTNERBANKAC,
					T6.CUSTID,
					T1.HOLDDISBURSEMENT,
					T1.LEI
				FROM FINADVANCEPAYMENTS T1
				LEFT JOIN BANKBRANCHES T3 ON T1.BANKBRANCHID = T3.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL T31 ON T31.BANKCODE = T3.BANKCODE
				LEFT JOIN BMTBANKDETAIL T4 ON T1.BANKCODE = T4.BANKCODE
				LEFT JOIN PARTNERBANKS T5 ON T5.PARTNERBANKID = T1.PARTNERBANKID
				LEFT JOIN FINANCEMAIN T6 ON T1.FINID = T6.FINID
			]]>
		</createView>
	</changeSet>

	<changeSet id="FAPV_3_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finadvancepayments_custaview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="FAPV_4_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finadvancepayments_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FAPV_4" author="Gopal.p">
		<createView viewName="FINADVANCEPAYMENTS_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FM.FINID,
					FM.FINREFERENCE,
					T1.PAYMENTID,
					T1.PAYMENTSEQ,
					T1.PAYMENTDETAIL,
					T1.AMTTOBERELEASED,
					T1.LIABILITYHOLDNAME,
					T1.TRANSACTIONREF,
					T1.BENEFICIARYNAME,
					T1.BENEFICIARYACCNO,
					T1.REENTERBENEFICIARYACCNO,
					T1.DESCRIPTION,
					T1.PAYMENTTYPE,
					T1.LLREFERENCENO,
					T1.LLDATE,
					T1.CUSTCONTRIBUTION,
					T1.SELLERCONTRIBUTION,
					T1.REMARKS,
					T1.DISBDATE,
					T1.DISBSEQ,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.BANKCODE,
					T1.PAYABLELOC,
					T1.PRINTINGLOC,
					T1.VALUEDATE,
					T1.BANKBRANCHID,
					T1.PHONECOUNTRYCODE,
					T1.PHONEAREACODE,
					T1.PHONENUMBER,
					T1.CLEARINGDATE,
					T1.STATUS,
					T1.ACTIVE,
					T1.INPUTDATE,
					T1.DISBCCY,
					T1.POISSUED,
					T3.BANKCODE BRANCHBANKCODE,
					T31.BANKNAME BRANCHBANKNAME,
					T3.BRANCHCODE,
					T3.BRANCHDESC,
					T3.IFSC,
					T3.CITY,
					T4.BANKNAME,
					T1.PARTNERBANKID,
					T5.PARTNERBANKCODE,
					T5.PARTNERBANKNAME,
					T1.LINKEDTRANID,
					T5.ACTYPE PARTNERBANKACTYPE,
					T5.ACCOUNTNO PARTNERBANKAC,
					T6.BRANCHDESC PRINTINGLOCDESC,
					T1.REJECTREASON,
					T1.REALIZATIONDATE,
					T1.HOLDDISBURSEMENT,
					T1.VASREFERENCE,
					T1.LEI
				FROM FINADVANCEPAYMENTS T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				LEFT JOIN BANKBRANCHES T3 ON T1.BANKBRANCHID = T3.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL T31 ON T31.BANKCODE = T3.BANKCODE
				LEFT JOIN BMTBANKDETAIL T4 ON T1.BANKCODE = T4.BANKCODE
				LEFT JOIN PARTNERBANKS T5 ON T5.PARTNERBANKID = T1.PARTNERBANKID
				LEFT JOIN BANKBRANCHES T6 ON T6.BRANCHCODE = T1.PRINTINGLOC AND T6.BANKCODE = T1.BANKCODE
			]]>
		</createView>
	</changeSet>

	<changeSet id="FAPV_4_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finadvancepayments_aview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="FAPV_5_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finadvancepayments_adview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FAPV_5" author="Gopal.p">
		<createView viewName="FINADVANCEPAYMENTS_ADVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.PAYMENTID,
					T3.FINID,
					T3.FINREFERENCE,
					T1.PAYMENTSEQ,
					T1.DISBSEQ,
					T1.PAYMENTDETAIL,
					T1.AMTTOBERELEASED,
					T1.LIABILITYHOLDNAME,
					T1.BENEFICIARYNAME,
					T1.BENEFICIARYACCNO,
					T1.DESCRIPTION,
					T1.PAYMENTTYPE,
					T1.BANKCODE,
					T1.LLREFERENCENO,
					T1.LLDATE,
					T1.CUSTCONTRIBUTION,
					T1.SELLERCONTRIBUTION,
					T1.REMARKS,
					T1.PAYABLELOC,
					T1.PRINTINGLOC,
					T1.VALUEDATE,
					T1.BANKBRANCHID,
					T1.PHONECOUNTRYCODE,
					T1.PHONEAREACODE,
					T1.PHONENUMBER,
					T1.CLEARINGDATE,
					T1.STATUS,
					T1.ACTIVE,
					T1.INPUTDATE,
					T1.DISBCCY,
					T1.POISSUED,
					T1.PARTNERBANKID,
					T1.LINKEDTRANID,
					T1.TRANSACTIONREF,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T3.FINTYPE,
					T4.BANKCODE BRANCHBANKCODE,
					T4.BRANCHCODE,
					T4.BRANCHDESC,
					T4.IFSC,
					T4.CITY,
					T4.MICR,
					T5.BANKNAME BRANCHBANKNAME,
					T6.BANKNAME,
					T7.PARTNERBANKCODE,
					T7.PARTNERBANKNAME,
					T7.ACTYPE PARTNERBANKACTYPE,
					T7.ACCOUNTNO PARTNERBANKAC,
					T7.FILENAME,
					T7.ALWFILEDOWNLOAD,
					T1.HOLDDISBURSEMENT,
					T1.LEI
				FROM FINADVANCEPAYMENTS T1
				JOIN FINANCEMAIN T3 ON T3.FINID = T1.FINID
				LEFT JOIN BANKBRANCHES T4 ON T1.BANKBRANCHID = T4.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL T5 ON T5.BANKCODE = T4.BANKCODE
				LEFT JOIN BMTBANKDETAIL T6 ON T1.BANKCODE = T6.BANKCODE
				LEFT JOIN PARTNERBANKS T7 ON T7.PARTNERBANKID = T1.PARTNERBANKID
			]]>
		</createView>
	</changeSet>

	<changeSet id="FAPV_5_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finadvancepayments_adview');	
			]]>
		</sql>
	</changeSet>

	<!-- (FAPV) :: Fin Advance Payment Views handle in single place end -->

	<!-- (FOV) :: Fin Option Views handle in single place start -->

	<changeSet id="FOV_1.1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'fin_options_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FOV_1.1" author="Gopal.p">
		<createView viewName="FIN_OPTIONS_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.OPTIONTYPE,
					T1.CURRENTOPTIONDATE,
					T1.FREQUENCY,
					T1.NOTICEPERIODDAYS,
					T1.ALERTDAYS,
					T1.OPTIONEXERCISE,
					T1.NEXTOPTIONDATE,
					T1.ALERTTYPE,
					T1.ALERTTOROLES,
					T1.USERTEMPLATE,
					T1.CUSTOMERTEMPLATE,
					UT.TEMPLATECODE USERTEMPLATECODE,
					CUST.TEMPLATECODE CUSTOMERTEMPLATECODE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.REMARKS
				FROM FIN_OPTIONS_TEMP T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				LEFT JOIN TEMPLATES UT ON UT.TEMPLATEID = T1.USERTEMPLATE
				LEFT JOIN TEMPLATES CUST ON CUST.TEMPLATEID = T1.CUSTOMERTEMPLATE
				UNION ALL
				SELECT T1.ID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.OPTIONTYPE,
					T1.CURRENTOPTIONDATE,
					T1.FREQUENCY,
					T1.NOTICEPERIODDAYS,
					T1.ALERTDAYS,
					T1.OPTIONEXERCISE,
					T1.NEXTOPTIONDATE,
					T1.ALERTTYPE,
					T1.ALERTTOROLES,
					T1.USERTEMPLATE,
					T1.CUSTOMERTEMPLATE,
					UT.TEMPLATECODE USERTEMPLATECODE,
					CUST.TEMPLATECODE CUSTOMERTEMPLATECODE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.REMARKS
				FROM FIN_OPTIONS T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				LEFT JOIN TEMPLATES UT ON UT.TEMPLATEID = T1.USERTEMPLATE
				LEFT JOIN TEMPLATES CUST ON CUST.TEMPLATEID = T1.CUSTOMERTEMPLATE
				WHERE NOT EXISTS ( SELECT 1 FROM FIN_OPTIONS_TEMP WHERE FIN_OPTIONS_TEMP.ID = T1.ID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="FOV_1.1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'fin_options_view');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="FOV_2_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'fin_options_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FOV_2" author="Gopal.p">
		<createView viewName="FIN_OPTIONS_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.OPTIONTYPE,
					T1.CURRENTOPTIONDATE,
					T1.FREQUENCY,
					T1.NOTICEPERIODDAYS,
					T1.ALERTDAYS,
					T1.OPTIONEXERCISE,
					T1.NEXTOPTIONDATE,
					T1.ALERTTYPE,
					T1.ALERTTOROLES,
					T1.USERTEMPLATE,
					T1.CUSTOMERTEMPLATE,
					UT.TEMPLATECODE USERTEMPLATECODE,
					CUST.TEMPLATECODE CUSTOMERTEMPLATECODE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.REMARKS
				FROM FIN_OPTIONS T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				LEFT JOIN TEMPLATES UT ON UT.TEMPLATEID = T1.USERTEMPLATE
				LEFT JOIN TEMPLATES CUST ON CUST.TEMPLATEID = T1.CUSTOMERTEMPLATE
			]]>
		</createView>
	</changeSet>

	<changeSet id="FOV_2_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'fin_options_aview');	
			]]>
		</sql>
	</changeSet>

	<!-- (FOV) :: Fin Option Views handle in single place end -->

	<!-- (FCV) :: Fin Collateral Views handle in single place start -->

	<changeSet id="FCV_1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'fincollaterals_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FCV_1" author="Gopal.p">
		<createView viewName="FINCOLLATERALS_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FM.FINID,
					FM.FINREFERENCE,
					T1.COLLATERALSEQ,
					T1.COLLATERALTYPE,
					T1.CUSTID,
					T1.REFERENCE,
					T1.CCY,
					T1.VALUE,
					T1.COVERAGE,
					T1.TENORTYPE,
					T1.TENOR,
					T1.RATE,
					T1.MATURITYDATE,
					T1.BANKNAME,
					T1.FIRSTCHEQUENO,
					T1.STARTDATE,
					T1.LASTCHEQUENO,
					T1.STATUS,
					T1.REMARKS,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM FINCOLLATERALS T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
			]]>
		</createView>
	</changeSet>

	<changeSet id="FCV_1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'fincollaterals_aview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="FCV_2_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'fincollaterals_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FCV_2" author="Gopal.p">
		<createView viewName="FINCOLLATERALS_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FM.FINID,
					FM.FINREFERENCE,
					T1.COLLATERALSEQ,
					T1.COLLATERALTYPE,
					T1.CUSTID,
					T1.REFERENCE,
					T1.CCY,
					T1.VALUE,
					T1.COVERAGE,
					T1.TENORTYPE,
					T1.TENOR,
					T1.RATE,
					T1.MATURITYDATE,
					T1.BANKNAME,
					T1.FIRSTCHEQUENO,
					T1.STARTDATE,
					T1.LASTCHEQUENO,
					T1.STATUS,
					T1.REMARKS,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM FINCOLLATERALS_TEMP T1
				INNER JOIN FINANCEMAIN_TEMP FM ON FM.FINID = T1.FINID
			]]>
		</createView>
	</changeSet>

	<changeSet id="FCV_2_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'fincollaterals_tview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="FCV_3_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'fincollaterals_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FCV_3" author="Gopal.p">
		<createView viewName="FINCOLLATERALS_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FM.FINID,
					FM.FINREFERENCE,
					T1.COLLATERALSEQ,
					T1.COLLATERALTYPE,
					T1.CUSTID,
					T1.REFERENCE,
					T1.CCY,
					T1.VALUE,
					T1.COVERAGE,
					T1.TENORTYPE,
					T1.TENOR,
					T1.RATE,
					T1.MATURITYDATE,
					T1.BANKNAME,
					T1.FIRSTCHEQUENO,
					T1.STARTDATE,
					T1.LASTCHEQUENO,
					T1.STATUS,
					T1.REMARKS,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM FINCOLLATERALS_TEMP T1
				INNER JOIN FINANCEMAIN_TEMP FM ON FM.FINID = T1.FINID
				UNION ALL
				SELECT FM.FINID,
					FM.FINREFERENCE,
					T1.COLLATERALSEQ,
					T1.COLLATERALTYPE,
					T1.CUSTID,
					T1.REFERENCE,
					T1.CCY,
					T1.VALUE,
					T1.COVERAGE,
					T1.TENORTYPE,
					T1.TENOR,
					T1.RATE,
					T1.MATURITYDATE,
					T1.BANKNAME,
					T1.FIRSTCHEQUENO,
					T1.STARTDATE,
					T1.LASTCHEQUENO,
					T1.STATUS,
					T1.REMARKS,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM FINCOLLATERALS T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				WHERE NOT EXISTS (SELECT 1 FROM FINCOLLATERALS_TEMP
					WHERE FINCOLLATERALS_TEMP.FINID = T1.FINID AND FINCOLLATERALS_TEMP.COLLATERALSEQ = T1.COLLATERALSEQ)
			]]>
		</createView>
	</changeSet>

	<changeSet id="FCV_3_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'fincollaterals_view');	
			]]>
		</sql>
	</changeSet>

	<!-- (FCV) :: Fin Collateral Views handle in single place end -->

	<!-- (PSLDV) :: PSL Detail Views handle in single place start -->

	<changeSet id="PSLDV_1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'psldetail_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="PSLDV_1" author="Gopal.p">
		<createView viewName="PSLDETAIL_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FM.FINID, 
					FM.FINREFERENCE,
					T1.CATEGORYCODE,
					T1.WEAKERSECTION,
					T1.LANDHOLDING,
					T1.LANDAREA,
					T1.SECTOR,
					T1.AMOUNT,
					T1.SUBCATEGORY,
					T1.PURPOSE,
					T1.ENDUSE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.DESCRIPTION WEAKERSECTIONNAME,
					T3.DESCRIPTION PURPOSENAME,
					T4.DESCRIPTION ENDUSENAME,
					T1.ELIGIBLEAMOUNT,
					T1.LOANPURPOSE,
					T5.LOANPURPOSEDESC LOANPURPOSENAME
				FROM PSLDETAIL T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				LEFT JOIN PSLWEAKERSECTION T2 ON T2.CODE = T1.WEAKERSECTION
				LEFT JOIN PSLPURPOSE T3 ON T3.CODE = T1.PURPOSE
				LEFT JOIN PSLENDUSE T4 ON T4.CODE = T1.ENDUSE
				LEFT JOIN LOANPURPOSES T5 ON T5.LOANPURPOSECODE = T1.LOANPURPOSE
			]]>
		</createView>
	</changeSet>

	<changeSet id="PSLDV_1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'psldetail_aview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="PSLDV_2_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'psldetail_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="PSLDV_2" author="Gopal.p">
		<createView viewName="PSLDETAIL_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FM.FINID,
					FM.FINREFERENCE,
					T1.CATEGORYCODE,
					T1.WEAKERSECTION,
					T1.LANDHOLDING,
					T1.LANDAREA,
					T1.SECTOR,
					T1.AMOUNT,
					T1.SUBCATEGORY,
					T1.PURPOSE,
					T1.ENDUSE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.DESCRIPTION WEAKERSECTIONNAME,
					T3.DESCRIPTION PURPOSENAME,
					T4.DESCRIPTION ENDUSENAME,
					T1.ELIGIBLEAMOUNT,
					T1.LOANPURPOSE,
					T5.LOANPURPOSEDESC LOANPURPOSENAME
				FROM PSLDETAIL_TEMP T1
				INNER JOIN FINANCEMAIN_TEMP FM ON FM.FINID = T1.FINID
				LEFT JOIN PSLWEAKERSECTION T2 ON T2.CODE = T1.WEAKERSECTION
				LEFT JOIN PSLPURPOSE T3 ON T3.CODE = T1.PURPOSE
				LEFT JOIN PSLENDUSE T4 ON T4.CODE = T1.ENDUSE
				LEFT JOIN LOANPURPOSES T5 ON T5.LOANPURPOSECODE = T1.LOANPURPOSE
				UNION ALL
				SELECT FM.FINID,
					FM.FINREFERENCE,
					T1.CATEGORYCODE,
					T1.WEAKERSECTION,
					T1.LANDHOLDING,
					T1.LANDAREA,
					T1.SECTOR,
					T1.AMOUNT,
					T1.SUBCATEGORY,
					T1.PURPOSE,
					T1.ENDUSE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.DESCRIPTION WEAKERSECTIONNAME,
					T3.DESCRIPTION PURPOSENAME,
					T4.DESCRIPTION ENDUSENAME,
					T1.ELIGIBLEAMOUNT,
					T1.LOANPURPOSE,
					T5.LOANPURPOSEDESC LOANPURPOSENAME
				FROM PSLDETAIL T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				LEFT JOIN PSLWEAKERSECTION T2 ON T2.CODE = T1.WEAKERSECTION
				LEFT JOIN PSLPURPOSE T3 ON T3.CODE = T1.PURPOSE
				LEFT JOIN PSLENDUSE T4 ON T4.CODE = T1.ENDUSE
				LEFT JOIN LOANPURPOSES T5 ON T5.LOANPURPOSECODE = T1.LOANPURPOSE
				WHERE NOT EXISTS (SELECT 1 FROM PSLDETAIL_TEMP WHERE PSLDETAIL_TEMP.FINID = T1.FINID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="PSLDV_2_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'psldetail_view');	
			]]>
		</sql>
	</changeSet>

	<!-- (PSLDV) :: PSL Detail Views handle in single place end -->

	<!-- (OCRV) :: OCR Capture/Header/Detail Views handle in single place start -->

	<changeSet id="OCRV_1.1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finocrcapture_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="OCRV_1.1" author="Gopal.p">
		<createView viewName="FINOCRCAPTURE_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.DISBSEQ,
					T1.DEMANDAMOUNT,
					T1.PAIDAMOUNT,
					T1.REMARKS,
					T1.RECEIPTDATE,
					T1.FILENAME,
					T1.DOCUMENTREF,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM FINOCRCAPTURE T1
				INNER JOIN (SELECT FINID, FINREFERENCE FROM FINANCEMAIN_TEMP
					UNION ALL
					SELECT FINID, FINREFERENCE FROM FINANCEMAIN 
					WHERE NOT EXISTS (SELECT 1 FROM FINANCEMAIN_TEMP WHERE FINID = FINANCEMAIN.FINID)
					) FM ON FM.FINID = T1.FINID
			]]>
		</createView>
	</changeSet>

	<changeSet id="OCRV_1.1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finocrcapture_aview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="OCRV_2.1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finocrcapture_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="OCRV_2.1" author="Gopal.p">
		<createView viewName="FINOCRCAPTURE_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.DISBSEQ,
					T1.DEMANDAMOUNT,
					T1.PAIDAMOUNT,
					T1.REMARKS,
					T1.RECEIPTDATE,
					T1.FILENAME,
					T1.DOCUMENTREF,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM FINOCRCAPTURE_TEMP T1
				INNER JOIN (SELECT FINID, FINREFERENCE FROM FINANCEMAIN_TEMP
					UNION ALL
					SELECT FINID, FINREFERENCE FROM FINANCEMAIN 
					WHERE NOT EXISTS(SELECT 1 FROM FINANCEMAIN_TEMP WHERE FINID = FINANCEMAIN.FINID)
					) FM ON FM.FINID = T1.FINID
				UNION ALL
				SELECT T1.ID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.DISBSEQ,
					T1.DEMANDAMOUNT,
					T1.PAIDAMOUNT,
					T1.REMARKS,
					T1.RECEIPTDATE,
					T1.FILENAME,
					T1.DOCUMENTREF,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM FINOCRCAPTURE T1
				INNER JOIN (SELECT FINID, FINREFERENCE FROM FINANCEMAIN_TEMP
					UNION ALL
					SELECT FINID, FINREFERENCE FROM FINANCEMAIN 
					WHERE NOT EXISTS(SELECT 1 FROM FINANCEMAIN_TEMP WHERE FINID = FINANCEMAIN.FINID)
					) FM ON FM.FINID = T1.FINID
				WHERE NOT EXISTS (SELECT 1 FROM FINOCRCAPTURE_TEMP WHERE FINOCRCAPTURE_TEMP.ID = T1.ID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="OCRV_2.1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finocrcapture_view');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="OCRV_3.1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finocrheader_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="OCRV_3.1" author="Gopal.p">
		<createView viewName="FINOCRHEADER_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.HEADERID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.OCRID,
					T1.OCRDESCRIPTION,
					T1.CUSTOMERPORTION,
					T1.OCRTYPE,
					T1.TOTALDEMAND,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM FINOCRHEADER T1
				INNER JOIN (SELECT FINID, FINREFERENCE FROM FINANCEMAIN_TEMP
					UNION ALL
					SELECT FINID, FINREFERENCE FROM FINANCEMAIN 
					WHERE NOT EXISTS(SELECT 1 FROM FINANCEMAIN_TEMP WHERE FINID = FINANCEMAIN.FINID)
					) FM ON FM.FINID = T1.FINID
			]]>
		</createView>
	</changeSet>

	<changeSet id="OCRV_3.1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finocrheader_aview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="OCRV_4.1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finocrheader_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="OCRV_4.1" author="Gopal.p">
		<createView viewName="FINOCRHEADER_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.HEADERID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.OCRID,
					T1.OCRDESCRIPTION,
					T1.CUSTOMERPORTION,
					T1.OCRTYPE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.TOTALDEMAND
				FROM FINOCRHEADER_TEMP T1
				INNER JOIN (SELECT FINID, FINREFERENCE FROM FINANCEMAIN_TEMP
					UNION ALL
					SELECT FINID, FINREFERENCE FROM FINANCEMAIN 
					WHERE NOT EXISTS(SELECT 1 FROM FINANCEMAIN_TEMP WHERE FINID = FINANCEMAIN.FINID)
					) FM ON FM.FINID = T1.FINID
				UNION ALL
				SELECT T1.HEADERID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.OCRID,
					T1.OCRDESCRIPTION,
					T1.CUSTOMERPORTION,
					T1.OCRTYPE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.TOTALDEMAND
				FROM FINOCRHEADER T1
				INNER JOIN (SELECT FINID, FINREFERENCE FROM FINANCEMAIN_TEMP
					UNION ALL
					SELECT FINID, FINREFERENCE FROM FINANCEMAIN 
					WHERE NOT EXISTS(SELECT 1 FROM FINANCEMAIN_TEMP WHERE FINID = FINANCEMAIN.FINID)
					) FM ON FM.FINID = T1.FINID
				WHERE NOT EXISTS (SELECT 1 FROM FINOCRHEADER_TEMP
					WHERE FINOCRHEADER_TEMP.HEADERID = T1.HEADERID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="OCRV_4.1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finocrheader_view');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="OCRV_5.1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finocrdetails_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="OCRV_5.1" author="Gopal.p">
		<createView viewName="FINOCRDETAILS_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.DETAILID,
					T1.HEADERID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.STEPSEQUENCE,
					T1.CUSTOMERCONTRIBUTION,
					T1.FINANCERCONTRIBUTION,
					T1.CONTRIBUTOR,
					T2.OCRID,
					T2.OCRDESCRIPTION,
					T2.CUSTOMERPORTION,
					T2.OCRTYPE,
					T2.TOTALDEMAND,
					T1.ACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM FINOCRDETAILS_TEMP T1
				JOIN FINOCRHEADER_TEMP T2 ON T1.HEADERID = T2.HEADERID
				INNER JOIN (SELECT FINID, FINREFERENCE FROM FINANCEMAIN_TEMP
					UNION ALL
					SELECT FINID, FINREFERENCE FROM FINANCEMAIN 
					WHERE NOT EXISTS(SELECT 1 FROM FINANCEMAIN_TEMP WHERE FINID = FINANCEMAIN.FINID)
					) FM ON FM.FINID = T2.FINID
				UNION ALL
				SELECT T1.DETAILID,
					T1.HEADERID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.STEPSEQUENCE,
					T1.CUSTOMERCONTRIBUTION,
					T1.FINANCERCONTRIBUTION,
					T1.CONTRIBUTOR,
					T2.OCRID,
					T2.OCRDESCRIPTION,
					T2.CUSTOMERPORTION,
					T2.OCRTYPE,
					T2.TOTALDEMAND,
					T1.ACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM FINOCRDETAILS T1
				JOIN FINOCRHEADER T2 ON T1.HEADERID = T2.HEADERID
				INNER JOIN (SELECT FINID, FINREFERENCE FROM FINANCEMAIN_TEMP
					UNION ALL
					SELECT FINID, FINREFERENCE FROM FINANCEMAIN 
					WHERE NOT EXISTS(SELECT 1 FROM FINANCEMAIN_TEMP WHERE FINID = FINANCEMAIN.FINID)
					) FM ON FM.FINID = T2.FINID
				WHERE NOT EXISTS (SELECT 1 FROM FINOCRDETAILS_TEMP
					WHERE FINOCRDETAILS_TEMP.HEADERID = T1.HEADERID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="OCRV_5.1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finocrdetails_view');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="OCRV_6.1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finocrdetails_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="OCRV_6.1" author="Gopal.p">
		<createView viewName="FINOCRDETAILS_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.DETAILID,
					T1.HEADERID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.STEPSEQUENCE,
					T1.CUSTOMERCONTRIBUTION,
					T1.FINANCERCONTRIBUTION,
					T1.CONTRIBUTOR,
					T2.OCRID,
					T2.OCRDESCRIPTION,
					T2.CUSTOMERPORTION,
					T2.OCRTYPE,
					T2.TOTALDEMAND,
					T1.ACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM FINOCRDETAILS T1
				JOIN FINOCRHEADER T2 ON T1.HEADERID = T2.HEADERID
				INNER JOIN (SELECT FINID, FINREFERENCE FROM FINANCEMAIN_TEMP
					UNION ALL
					SELECT FINID, FINREFERENCE FROM FINANCEMAIN 
					WHERE NOT EXISTS(SELECT 1 FROM FINANCEMAIN_TEMP WHERE FINID = FINANCEMAIN.FINID)
					) FM ON FM.FINID = T2.FINID
			]]>
		</createView>
	</changeSet>

	<changeSet id="OCRV_6.1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finocrdetails_aview');	
			]]>
		</sql>
	</changeSet>

	<!-- (OCRV) :: OCR Capture/Header/Detail Views handle in single place end -->

	<!-- (FFRV) :: Fin Fee Receipt Views handle in single place start -->

	<changeSet id="FFRV_1_pre" author="Gopal.P" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finfeereceipts_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FFRV_1" author="Gopal.P">
		<createView viewName="FINFEERECEIPTS_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ID,
					T1.FEEID,
					T1.RECEIPTID,
					T1.PAIDAMOUNT,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.AMOUNT RECEIPTAMOUNT,
					T2.TRANSACTIONREF,
					T2.FAVOURNUMBER,
					T3.FEETYPEID,
					T3.VASREFERENCE ,
					T4.FEETYPECODE,
					T4.FEETYPEDESC,
					FM.FINID,
					FM.FINREFERENCE,
					T5.RECEIPTMODE RECEIPTTYPE,
					T1.PAIDTDS
				FROM FINFEERECEIPTS_TEMP T1
				INNER JOIN FINRECEIPTDETAIL_TEMP T2 ON T1.RECEIPTID = T2.RECEIPTID
				INNER JOIN (SELECT FEEID, VASREFERENCE, FEETYPEID, FINID FROM FINFEEDETAIL_TEMP
					UNION ALL
					SELECT FEEID, VASREFERENCE, FEETYPEID, FINID FROM FINFEEDETAIL 
					WHERE NOT EXISTS(SELECT 1 FROM FINFEERECEIPTS_TEMP WHERE FEEID = FINFEEDETAIL.FEEID)
					) T3 ON T3.FEEID = T1.FEEID
				INNER JOIN (SELECT FINID, FINREFERENCE FROM FINANCEMAIN_TEMP
					UNION ALL
					SELECT FINID, FINREFERENCE FROM FINANCEMAIN 
					WHERE NOT EXISTS(SELECT 1 FROM FINANCEMAIN_TEMP WHERE FINID = FINANCEMAIN.FINID)
					) FM ON FM.FINID = T3.FINID
				LEFT JOIN FEETYPES T4 ON T3.FEETYPEID = T4.FEETYPEID
				INNER JOIN FINRECEIPTHEADER_TEMP T5 ON T1.RECEIPTID = T5.RECEIPTID
			 ]]>
		</createView>
	</changeSet>

	<changeSet id="FFRV_1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finfeereceipts_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FFRV_2_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finfeereceipts_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FFRV_2" author="Gopal.p">
		<createView viewName="FINFEERECEIPTS_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ID,
					T1.FEEID,
					T1.RECEIPTID,
					T1.PAIDAMOUNT,
					T1.VERSION ,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.AMOUNT RECEIPTAMOUNT,
					T2.TRANSACTIONREF,
					T2.FAVOURNUMBER,
					T3.FEETYPEID,
					T3.VASREFERENCE ,
					T4.FEETYPECODE,
					T4.FEETYPEDESC,
					FM.FINID,
					FM.FINREFERENCE,
					T5.RECEIPTMODE RECEIPTTYPE,
					T1.PAIDTDS
				FROM FINFEERECEIPTS T1
				INNER JOIN FINRECEIPTDETAIL T2 ON T1.RECEIPTID = T2.RECEIPTID
				INNER JOIN (SELECT FEEID, VASREFERENCE, FEETYPEID, FINID FROM FINFEEDETAIL_TEMP
					UNION ALL
					SELECT FEEID, VASREFERENCE, FEETYPEID, FINID FROM FINFEEDETAIL 
					WHERE NOT EXISTS(SELECT 1 FROM FINFEERECEIPTS_TEMP WHERE FEEID = FINFEEDETAIL.FEEID)
					) T3 ON T3.FEEID = T1.FEEID
				INNER JOIN (SELECT FINID, FINREFERENCE FROM FINANCEMAIN_TEMP
					UNION ALL
					SELECT FINID, FINREFERENCE FROM FINANCEMAIN 
					WHERE NOT EXISTS(SELECT 1 FROM FINANCEMAIN_TEMP WHERE FINID = FINANCEMAIN.FINID)
					) FM ON FM.FINID = T3.FINID
				LEFT JOIN FEETYPES T4 ON T3.FEETYPEID = T4.FEETYPEID
				INNER JOIN FINRECEIPTHEADER T5 ON T1.RECEIPTID = T5.RECEIPTID	
			 ]]>
		</createView>
	</changeSet>

	<changeSet id="FFRV_2_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finfeereceipts_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FFRV_3_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finfeereceipts_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FFRV_3" author="Gopal.p">
		<createView viewName="FINFEERECEIPTS_VIEW" replaceIfExists="true">
		   <![CDATA[
				SELECT T1.ID,
					T1.FEEID,
					T1.RECEIPTID,
					T1.PAIDAMOUNT,
					T1.VERSION ,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.AMOUNT RECEIPTAMOUNT,
					T2.TRANSACTIONREF,
					T2.FAVOURNUMBER,
					T3.FEETYPEID,
					T3.VASREFERENCE ,
					T4.FEETYPECODE,
					T4.FEETYPEDESC,
					FM.FINID,
					FM.FINREFERENCE,
					T5.RECEIPTMODE RECEIPTTYPE,
					T1.PAIDTDS
				FROM FINFEERECEIPTS_TEMP T1
				INNER JOIN FINRECEIPTDETAIL T2 ON T1.RECEIPTID = T2.RECEIPTID
				INNER JOIN (SELECT FEEID, VASREFERENCE, FEETYPEID, FINID FROM FINFEEDETAIL_TEMP
					UNION ALL
					SELECT FEEID, VASREFERENCE, FEETYPEID, FINID FROM FINFEEDETAIL 
					WHERE NOT EXISTS(SELECT 1 FROM FINFEERECEIPTS_TEMP WHERE FEEID = FINFEEDETAIL.FEEID)
					) T3 ON T3.FEEID = T1.FEEID
				INNER JOIN (SELECT FINID, FINREFERENCE FROM FINANCEMAIN_TEMP
					UNION ALL
					SELECT FINID, FINREFERENCE FROM FINANCEMAIN 
					WHERE NOT EXISTS(SELECT 1 FROM FINANCEMAIN_TEMP WHERE FINID = FINANCEMAIN.FINID)
					) FM ON FM.FINID = T3.FINID
				LEFT JOIN FEETYPES T4 ON T3.FEETYPEID = T4.FEETYPEID
				INNER JOIN FINRECEIPTHEADER T5 ON T1.RECEIPTID = T5.RECEIPTID
				UNION ALL
				SELECT T1.ID,
					T1.FEEID,
					T1.RECEIPTID,
					T1.PAIDAMOUNT,
					T1.VERSION ,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.AMOUNT RECEIPTAMOUNT,
					T2.TRANSACTIONREF,
					T2.FAVOURNUMBER,
					T3.FEETYPEID,
					T3.VASREFERENCE,
					T4.FEETYPECODE,
					T4.FEETYPEDESC,
					FM.FINID,
					FM.FINREFERENCE,
					T5.RECEIPTMODE RECEIPTTYPE,
					T1.PAIDTDS
				FROM FINFEERECEIPTS T1
				INNER JOIN FINRECEIPTDETAIL T2 ON T1.RECEIPTID = T2.RECEIPTID
				INNER JOIN (SELECT FEEID, VASREFERENCE, FEETYPEID, FINID FROM FINFEEDETAIL_TEMP
					UNION ALL
					SELECT FEEID, VASREFERENCE, FEETYPEID, FINID FROM FINFEEDETAIL 
					WHERE NOT EXISTS(SELECT 1 FROM FINFEERECEIPTS_TEMP WHERE FEEID = FINFEEDETAIL.FEEID)
					) T3 ON T3.FEEID = T1.FEEID
				INNER JOIN (SELECT FINID, FINREFERENCE FROM FINANCEMAIN_TEMP
					UNION ALL
					SELECT FINID, FINREFERENCE FROM FINANCEMAIN 
					WHERE NOT EXISTS(SELECT 1 FROM FINANCEMAIN_TEMP WHERE FINID = FINANCEMAIN.FINID)
					) FM ON FM.FINID = T3.FINID
				LEFT JOIN FEETYPES T4 ON T3.FEETYPEID = T4.FEETYPEID
				INNER JOIN FINRECEIPTHEADER T5 ON T1.RECEIPTID = T5.RECEIPTID
				WHERE (NOT EXISTS(SELECT 1 FROM FINFEERECEIPTS_TEMP WHERE (ID = T1.ID)))
			]]>
		</createView>
	</changeSet>

	<changeSet id="FFRV_3_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finfeereceipts_view');
			]]>
		</sql>
	</changeSet>

	<!-- (CDV) :: Fin Fee Receipt Views handle in single place end -->

	<!-- (CDV) :: Cheque Header/mantainance Views handle in single place start -->

	<changeSet id="CDV_1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'chequeheader_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="CDV_1" author="Gopal.p">
		<createView viewName="CHEQUEHEADER_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.HEADERID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.NOOFCHEQUES,
					T1.TOTALAMOUNT,
					T1.ACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM CHEQUEHEADER T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
			]]>
		</createView>
	</changeSet>

	<changeSet id="CDV_1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'chequeheader_aview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="CDV_2.1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'chequeheader_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="CDV_2.1" author="Gopal.p">
		<createView viewName="CHEQUEHEADER_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.HEADERID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.NOOFCHEQUES,
					T1.TOTALAMOUNT,
					T1.ACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM CHEQUEHEADER_TEMP T1
				INNER JOIN (SELECT FINID, FINREFERENCE FROM FINANCEMAIN_TEMP
					UNION ALL
					SELECT FINID, FINREFERENCE FROM FINANCEMAIN 
					WHERE NOT EXISTS(SELECT 1 FROM FINANCEMAIN_TEMP WHERE FINID = FINANCEMAIN.FINID)
					) FM ON FM.FINID = T1.FINID
				UNION ALL
				SELECT T1.HEADERID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.NOOFCHEQUES,
					T1.TOTALAMOUNT,
					T1.ACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM CHEQUEHEADER T1
				INNER JOIN (SELECT FINID, FINREFERENCE FROM FINANCEMAIN_TEMP
					UNION ALL
					SELECT FINID, FINREFERENCE FROM FINANCEMAIN 
					WHERE NOT EXISTS(SELECT 1 FROM FINANCEMAIN_TEMP WHERE FINID = FINANCEMAIN.FINID)
					) FM ON FM.FINID = T1.FINID
				WHERE NOT EXISTS ( SELECT 1 FROM CHEQUEHEADER_TEMP
					WHERE CHEQUEHEADER_TEMP.HEADERID = T1.HEADERID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="CDV_2.1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'chequeheader_view');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="CDV_3_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'chequedetailmaintain_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="CDV_3" author="Gopal.p">
		<createView viewName="CHEQUEDETAILMAINTAIN_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.HEADERID,
					T2.FINID,
					T2.FINREFERENCE,
					T1.NOOFCHEQUES,
					T1.TOTALAMOUNT,
					T1.ACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM CHEQUEHEADER_TEMP T1
				JOIN FINANCEMAIN T2 ON T1.FINID = T2.FINID
				UNION ALL
				SELECT T1.HEADERID,
					T2.FINID,
					T2.FINREFERENCE,
					T1.NOOFCHEQUES,
					T1.TOTALAMOUNT,
					T1.ACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM CHEQUEHEADER T1
				JOIN FINANCEMAIN T2 ON T1.FINID = T2.FINID
				WHERE NOT EXISTS ( SELECT 1 FROM CHEQUEHEADER_TEMP
					WHERE CHEQUEHEADER_TEMP.HEADERID = T1.HEADERID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="CDV_3_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'chequedetailmaintain_view');	
			]]>
		</sql>
	</changeSet>

	<!-- (CDV) :: Cheque Header/mantainance Views handle in single place end -->

	<!-- (LFV) :: Linked Finance views are handle in single place start -->

	<changeSet id="LFV_1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'linkedfinances_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="LFV_1" author="Gopal.p">
		<createView viewName="LINKEDFINANCES_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ID, 
					F.FINID,
					F.FINREFERENCE,  
					T1.LINKEDREFERENCE, 
					F.FINTYPE LINKEDFINTYPE, 
					T1.VERSION, 
					T1.LASTMNTBY, 
					T1.LASTMNTON, 
					T1.RECORDSTATUS, 
					T1.ROLECODE, 
					T1.NEXTROLECODE,
					T1.TASKID, 
					T1.NEXTTASKID, 
					T1.RECORDTYPE, 
					T1.WORKFLOWID, 
					C.CUSTSHRTNAME, 
					T1.STATUS
				FROM LINKEDFINANCES T1 
				INNER JOIN FINANCEMAIN_TEMP F ON T1.LINKEDREFERENCE = F.FINREFERENCE AND F.QUICKDISB = 1 
				INNER JOIN CUSTOMERS C ON F.CUSTID = C.CUSTID
				UNION ALL 
				SELECT T1.ID, 
					F.FINID,
					T1.FINREFERENCE,  
					T1.LINKEDREFERENCE, 
					F.FINTYPE LINKEDFINTYPE, 
					T1.VERSION, 
					T1.LASTMNTBY, 
					T1.LASTMNTON, 
					T1.RECORDSTATUS, 
					T1.ROLECODE, 
					T1.NEXTROLECODE,
					T1.TASKID, 
					T1.NEXTTASKID, 
					T1.RECORDTYPE, 
					T1.WORKFLOWID, 
					C.CUSTSHRTNAME, 
					T1.STATUS
				FROM LINKEDFINANCES T1 
				INNER JOIN FINANCEMAIN F ON T1.LINKEDREFERENCE = F.FINREFERENCE 
				INNER JOIN CUSTOMERS C ON F.CUSTID = C.CUSTID
			]]>
		</createView>
	</changeSet>

	<changeSet id="LFV_1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'linkedfinances_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="LFV_2_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'linkedfinances_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="LFV_2" author="Gopal.p">
		<createView viewName="LINKEDFINANCES_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ID, 
					F.FINID,
					T1.FINREFERENCE,  
					T1.LINKEDREFERENCE, 
					F.FINTYPE LINKEDFINTYPE, 
					T1.VERSION, 
					T1.LASTMNTBY, 
					T1.LASTMNTON, 
					T1.RECORDSTATUS, 
					T1.ROLECODE, 
					T1.NEXTROLECODE,
					T1.TASKID, 
					T1.NEXTTASKID, 
					T1.RECORDTYPE, 
					T1.WORKFLOWID, 
					C.CUSTSHRTNAME, 
					T1.STATUS,
					F.QUICKDISB
				FROM LINKEDFINANCES_TEMP T1 
				INNER JOIN FINANCEMAIN_TEMP F ON T1.LINKEDREFERENCE = F.FINREFERENCE AND F.QUICKDISB = 1 
				INNER JOIN CUSTOMERS C ON F.CUSTID = C.CUSTID
				UNION ALL 
				SELECT T1.ID, 
					F.FINID,
					T1.FINREFERENCE,  
					T1.LINKEDREFERENCE, 
					F.FINTYPE LINKEDFINTYPE, 
					T1.VERSION, 
					T1.LASTMNTBY, 
					T1.LASTMNTON, 
					T1.RECORDSTATUS, 
					T1.ROLECODE, 
					T1.NEXTROLECODE,
					T1.TASKID, 
					T1.NEXTTASKID, 
					T1.RECORDTYPE, 
					T1.WORKFLOWID, 
					C.CUSTSHRTNAME, 
					T1.STATUS,
					F.QUICKDISB
				FROM LINKEDFINANCES_TEMP T1 
				INNER JOIN FINANCEMAIN F ON T1.LINKEDREFERENCE = F.FINREFERENCE 
				INNER JOIN CUSTOMERS C ON F.CUSTID = C.CUSTID
			]]>
		</createView>
	</changeSet>

	<changeSet id="LFV_2_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'linkedfinances_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="LFV_3_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'linkedfinances_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="LFV_3" author="Gopal.p">
		<createView viewName="LINKEDFINANCES_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ID, 
					F.FINID,
					T1.FINREFERENCE,  
					T1.LINKEDREFERENCE, 
					F.FINTYPE LINKEDFINTYPE, 
					T1.VERSION, 
					T1.LASTMNTBY, 
					T1.LASTMNTON, 
					T1.RECORDSTATUS, 
					T1.ROLECODE, 
					T1.NEXTROLECODE,
					T1.TASKID, 
					T1.NEXTTASKID, 
					T1.RECORDTYPE, 
					T1.WORKFLOWID, 
					C.CUSTSHRTNAME, 
					T1.STATUS
				FROM LINKEDFINANCES_TEMP T1 
				INNER JOIN FINANCEMAIN F ON T1.LINKEDREFERENCE = F.FINREFERENCE 
				INNER JOIN CUSTOMERS C ON F.CUSTID = C.CUSTID
				UNION ALL
				SELECT	T1.ID, 
					F.FINID,
					T1.FINREFERENCE,  
					T1.LINKEDREFERENCE, 
					F.FINTYPE LINKEDFINTYPE, 
					T1.VERSION, T1.LASTMNTBY, 
					T1.LASTMNTON, 
					T1.RECORDSTATUS, 
					T1.ROLECODE, 
					T1.NEXTROLECODE,
					T1.TASKID, 
					T1.NEXTTASKID, 
					T1.RECORDTYPE, 
					T1.WORKFLOWID,  
					C.CUSTSHRTNAME, 
					T1.STATUS
				FROM LINKEDFINANCES T1 
				INNER JOIN FINANCEMAIN F ON T1.LINKEDREFERENCE = F.FINREFERENCE 
				INNER JOIN CUSTOMERS C ON F.CUSTID = C.CUSTID
				WHERE NOT EXISTS (SELECT 1 FROM LINKEDFINANCES_TEMP WHERE  FINREFERENCE = T1.FINREFERENCE)
			]]>
		</createView>
	</changeSet>

	<changeSet id="LFV_3_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'linkedfinances_view');
			]]>
		</sql>
	</changeSet>

	<!-- (LFV) :: Linked Finance views are handle in single place end -->


	<!-- (MAV) :: Manual Advise views are handle in single place start -->

	<changeSet id="MAV_1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'manualadvise_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="MAV_1" author="Gopal.p">
		<createView viewName="MANUALADVISE_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ADVISEID,
					T1.ADVISETYPE,
					FM.FINID,
					FM.FINREFERENCE,
					T1.FEETYPEID,
					T1.SEQUENCE,
					T1.ADVISEAMOUNT,
					T1.PAIDAMOUNT,
					T1.WAIVEDAMOUNT,
					T1.REMARKS,
					T1.VALUEDATE,
					T1.POSTDATE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FEETYPEDESC,
					T2.FEETYPECODE,
					T1.BOUNCEID,
					T1.RECEIPTID,
					T3.BOUNCECODE,
					T1.RESERVEDAMT,
					T1.BALANCEAMT,
					T3.REASON BOUNCECODEDESC,
					COALESCE(T2.TAXAPPLICABLE, 0) TAXAPPLICABLE,
					COALESCE(T2.TDSREQ, 0) TDSREQ,
					T2.TAXCOMPONENT,
					T1.PAIDCGST,
					T1.PAIDSGST,
					T1.PAIDIGST,
					T1.PAIDUGST,
					T1.WAIVEDCGST,
					T1.WAIVEDSGST,
					T1.WAIVEDUGST,
					T1.WAIVEDIGST,
					T1.WAIVEDCESS,
					T1.PAIDCESS,
					T1.FINSOURCE,
					T1.DUECREATION,
					T1.LINKEDTRANID,
					T1.TDSPAID,
					T1.HOLDDUE
				FROM MANUALADVISE T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
				LEFT JOIN BOUNCEREASONS T3 ON T1.BOUNCEID = T3.BOUNCEID
			]]>
		</createView>
	</changeSet>

	<changeSet id="MAV_1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'manualadvise_aview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="MAV_2_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'manualadvise_lovview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="MAV_2" author="Gopal.p">
		<createView viewName="MANUALADVISE_LOVVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ADVISEID,
					T1.FEETYPEID,
					T1.ADVISETYPE,
					FM.FINID,
					FM.FINREFERENCE,
					T1.VALUEDATE,
					T1.POSTDATE,
					round(T1.ADVISEAMOUNT/100, 2)  ADVISEAMOUNT,
					round(T1.RESERVEDAMT/100, 2) RESERVEDAMT,
					round(T1.BALANCEAMT/100, 2) BALANCEAMT
				FROM MANUALADVISE T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				WHERE T1.HOLDDUE = 0
			]]>
		</createView>
	</changeSet>

	<changeSet id="MAV_2_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'manualadvise_lovview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="MAV_3_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'manualadvise_lview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="MAV_3" author="Gopal.p">
		<createView viewName="MANUALADVISE_LVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ADVISEID,
					T1.ADVISETYPE,
					FM.FINID,
					FM.FINREFERENCE,
					T1.FEETYPEID,
					T1.SEQUENCE,
					T1.ADVISEAMOUNT,
					T1.PAIDAMOUNT,
					T1.WAIVEDAMOUNT,
					T1.REMARKS,
					T1.VALUEDATE,
					T1.POSTDATE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FEETYPEDESC,
					T2.FEETYPECODE,
					T1.BOUNCEID,
					T1.RECEIPTID,
					T3.BOUNCECODE,
					T1.RESERVEDAMT,
					T1.BALANCEAMT,
					T3.REASON BOUNCECODEDESC,
					COALESCE(T2.TAXAPPLICABLE, 0) TAXAPPLICABLE,
					COALESCE(T2.TDSREQ, 0) TDSREQ,
					T2.TAXCOMPONENT,
					T1.PAIDCGST,
					T1.PAIDSGST,
					T1.PAIDIGST,
					T1.PAIDUGST,
					T1.WAIVEDCGST,
					T1.WAIVEDSGST,
					T1.WAIVEDUGST,
					T1.WAIVEDIGST,
					T1.FINSOURCE,
					T1.DUECREATION,
					T1.LINKEDTRANID,
					T1.TDSPAID,
					T1.HOLDDUE
				FROM MANUALADVISE T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
				LEFT JOIN BOUNCEREASONS T3 ON T1.BOUNCEID = T3.BOUNCEID
			]]>
		</createView>
	</changeSet>

	<changeSet id="MAV_3_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'manualadvise_lview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="MAV_4_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'manualadvise_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="MAV_4" author="Gopal.p">
		<createView viewName="MANUALADVISE_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ADVISEID,
					T1.ADVISETYPE,
					FM.FINID,
					FM.FINREFERENCE,
					T1.FEETYPEID,
					T1.SEQUENCE,
					T1.ADVISEAMOUNT,
					T1.PAIDAMOUNT,
					T1.WAIVEDAMOUNT,
					T1.REMARKS,
					T1.VALUEDATE,
					T1.POSTDATE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FEETYPEDESC,
					T2.FEETYPECODE,
					T1.BOUNCEID,
					T1.RECEIPTID,
					T3.BOUNCECODE,
					T1.RESERVEDAMT,
					T1.BALANCEAMT,
					T3.REASON AS BOUNCECODEDESC,
					COALESCE(T2.TAXAPPLICABLE, 0) TAXAPPLICABLE,
					COALESCE(T2.TDSREQ, 0) TDSREQ,
					T2.TAXCOMPONENT,
					T1.PAIDCGST,
					T1.PAIDSGST,
					T1.PAIDIGST,
					T1.PAIDUGST,
					T1.WAIVEDCGST,
					T1.WAIVEDSGST,
					T1.WAIVEDUGST,
					T1.WAIVEDIGST,
					T1.WAIVEDCESS,
					T1.PAIDCESS,
					T1.FINSOURCE,
					T1.DUECREATION,
					T1.LINKEDTRANID,
					T1.TDSPAID,
					T1.HOLDDUE
				FROM MANUALADVISE_TEMP T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
				LEFT JOIN BOUNCEREASONS T3 ON T1.BOUNCEID = T3.BOUNCEID
			]]>
		</createView>
	</changeSet>

	<changeSet id="MAV_4_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'manualadvise_tview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="MAV_5_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'manualadvise_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="MAV_5" author="Gopal.p">
		<createView viewName="MANUALADVISE_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ADVISEID,
					T1.ADVISETYPE,
					FM.FINID,
					FM.FINREFERENCE,
					T1.FEETYPEID,
					T1.SEQUENCE,
					T1.ADVISEAMOUNT,
					T1.PAIDAMOUNT,
					T1.WAIVEDAMOUNT,
					T1.REMARKS,
					T1.VALUEDATE,
					T1.POSTDATE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FEETYPEDESC,
					T2.FEETYPECODE,
					T1.BOUNCEID,
					T1.RECEIPTID,
					T3.BOUNCECODE,
					T1.RESERVEDAMT,
					T1.BALANCEAMT,
					T3.REASON BOUNCECODEDESC,
					COALESCE(T2.TAXAPPLICABLE, 0) TAXAPPLICABLE,
					T2.TAXCOMPONENT,
					COALESCE(T2.TDSREQ, 0) TDSREQ,
					T1.PAIDCGST,
					T1.PAIDSGST,
					T1.PAIDIGST,
					T1.PAIDUGST,
					T1.WAIVEDCGST,
					T1.WAIVEDSGST,
					T1.WAIVEDUGST,
					T1.WAIVEDIGST,
					T1.WAIVEDCESS,
					T1.PAIDCESS,
					T1.FINSOURCE,
					T1.DUECREATION,
					T1.LINKEDTRANID,
					T1.TDSPAID,
					T1.HOLDDUE
				FROM MANUALADVISE_TEMP T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
				LEFT JOIN BOUNCEREASONS T3 ON T1.BOUNCEID = T3.BOUNCEID
				UNION ALL
				SELECT T1.ADVISEID,
					T1.ADVISETYPE,
					FM.FINID,
					FM.FINREFERENCE,
					T1.FEETYPEID,
					T1.SEQUENCE,
					T1.ADVISEAMOUNT,
					T1.PAIDAMOUNT,
					T1.WAIVEDAMOUNT,
					T1.REMARKS,
					T1.VALUEDATE,
					T1.POSTDATE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FEETYPEDESC,
					T2.FEETYPECODE,
					T1.BOUNCEID,
					T1.RECEIPTID,
					T3.BOUNCECODE,
					T1.RESERVEDAMT,
					T1.BALANCEAMT,
					T3.REASON BOUNCECODEDESC,
					COALESCE(T2.TAXAPPLICABLE, 0) TAXAPPLICABLE,
					T2.TAXCOMPONENT,
					COALESCE(T2.TDSREQ, 0) TDSREQ,
					T1.PAIDCGST,
					T1.PAIDSGST,
					T1.PAIDIGST,
					T1.PAIDUGST,
					T1.WAIVEDCGST,
					T1.WAIVEDSGST,
					T1.WAIVEDUGST,
					T1.WAIVEDIGST,
					T1.WAIVEDCESS,
					T1.PAIDCESS,
					T1.FINSOURCE,
					T1.DUECREATION,
					T1.LINKEDTRANID,
					T1.TDSPAID,
					T1.HOLDDUE
				FROM MANUALADVISE T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
				LEFT JOIN BOUNCEREASONS T3 ON T1.BOUNCEID = T3.BOUNCEID
				WHERE NOT EXISTS (SELECT 1 FROM MANUALADVISE_TEMP
					WHERE MANUALADVISE_TEMP.ADVISEID = T1.ADVISEID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="MAV_5_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'manualadvise_view');	
			]]>
		</sql>
	</changeSet>

	<!-- (MAV) :: Manual Advise views are handle in single place end -->

	<!-- (FWV) :: Fee Waiver views are handle in single place start -->

	<changeSet id="FWV_1.1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'feewaivers_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FWV_1.1" author="Gopal.p">
		<createView viewName="FEEWAIVERS_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT DISTINCT T1.FINID,
					T1.FINREFERENCE,
					T1.FINBRANCH,
					T1.FINTYPE,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.FINSTARTDATE,
					T1.NUMBEROFTERMS,
					T1.CUSTID,
					T1.FINAMOUNT,
					T1.MATURITYDATE,
					T1.FINREPAYMENTAMOUNT,
					T1.FINISACTIVE,
					T1.BLACKLISTED,
					T1.FEECHARGEAMT,
					T1.GRACETERMS,
					T1.ALLOWGRCPERIOD,
					T1.GRCPERIODENDDATE,
					T1.ALWMULTIDISB,
					T1.DEFFERMENTS,
					T1.ALLOWGRCPFTRVW,
					T1.ALLOWREPAYRVW,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.MIGRATEDFINANCE,
					T1.CLOSINGSTATUS,
					T1.REPAYRATEBASIS,
					T1.MANUALSCHEDULE,
					T1.FINCURRASSETVALUE,
					T1.AVAILEDUNPLANEMI,
					T1.AVAILEDREAGEH,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.DOWNPAYMENT,
					T1.PLANEMIHALW,
					T1.CALTERMS,
					T1.RATECHGANYDAY,
					T1.FINASSETVALUE,
					T2.CUSTCIF LOVDESCCUSTCIF,
					T3.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
					T3.FINDIVISION LOVDESCFINDIVISION,
					T3.FINCATEGORY LOVDESCPRODUCTCODENAME,
					T4.PRODUCTCATEGORY,
					COALESCE(T9.NOINST, 0) NOINST,
					COALESCE(T5.ROLEDESC, T10.NEXTROLECODE) LOVDESCREQUESTSTAGE,
					T10.WAIVERID,
					T10.EVENT RCDMAINTAINSTS,
					T10.NEXTROLECODE,
					T10.RECORDSTATUS,
					T10.RECORDTYPE,
					T1.VERSION,
					T1.FINCATEGORY
				FROM FEEWAIVERHEADER_TEMP T10
				JOIN FINANCEMAIN T1 ON T1.FINID = T10.FINID
				JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
				JOIN RMTFINANCETYPES T3 ON T1.FINTYPE = T3.FINTYPE
				LEFT JOIN SECROLES T5 ON T10.NEXTROLECODE = T5.ROLECD
				JOIN BMTPRODUCT T4 ON T3.FINCATEGORY = T4.PRODUCTCODE
				LEFT JOIN FINPFTDETAILS T9 ON T9.FINID = T1.FINID
				JOIN (SELECT FINID FROM MANUALADVISE WHERE ADVISETYPE = 1 AND (ADVISEAMOUNT - PAIDAMOUNT - WAIVEDAMOUNT) > 0
					UNION ALL
					SELECT FINID FROM FINODDETAILS WHERE TOTPENALTYBAL > 0 OR LPIBAL > 0) T ON T.FINID = T1.FINID
					WHERE T10.EVENT = 'FEEWAIVERS'
				UNION ALL
				SELECT DISTINCT T1.FINID,
					T1.FINREFERENCE,
					T1.FINBRANCH,
					T1.FINTYPE,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.FINSTARTDATE,
					T1.NUMBEROFTERMS,
					T1.CUSTID,
					T1.FINAMOUNT,
					T1.MATURITYDATE,
					T1.FINREPAYMENTAMOUNT,
					T1.FINISACTIVE,
					T1.BLACKLISTED,
					T1.FEECHARGEAMT,
					T1.GRACETERMS,
					T1.ALLOWGRCPERIOD,
					T1.GRCPERIODENDDATE,
					T1.ALWMULTIDISB,
					T1.DEFFERMENTS,
					T1.ALLOWGRCPFTRVW,
					T1.ALLOWREPAYRVW,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.MIGRATEDFINANCE,
					T1.CLOSINGSTATUS,
					T1.REPAYRATEBASIS,
					T1.MANUALSCHEDULE,
					T1.FINCURRASSETVALUE,
					T1.AVAILEDUNPLANEMI,
					T1.AVAILEDREAGEH,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.DOWNPAYMENT,
					T1.PLANEMIHALW,
					T1.CALTERMS,
					T1.RATECHGANYDAY,
					T1.FINASSETVALUE,
					T2.CUSTCIF LOVDESCCUSTCIF,
					T3.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
					T3.FINDIVISION LOVDESCFINDIVISION,
					T3.FINCATEGORY LOVDESCPRODUCTCODENAME,
					T4.PRODUCTCATEGORY,
					COALESCE(T9.NOINST, 0) NOINST,
					NULL LOVDESCREQUESTSTAGE,
					0 WAIVERID,
					NULL RCDMAINTAINSTS,
					NULL NEXTROLECODE,
					NULL RECORDSTATUS,
					NULL RECORDTYPE,
					T1.VERSION,
					T1.FINCATEGORY
				FROM FINANCEMAIN T1
				JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
				JOIN RMTFINANCETYPES T3 ON T1.FINTYPE = T3.FINTYPE
				LEFT JOIN SECROLES T5 ON T1.NEXTROLECODE = T5.ROLECD
				JOIN BMTPRODUCT T4 ON T3.FINCATEGORY = T4.PRODUCTCODE
				LEFT JOIN FINPFTDETAILS T9 ON T1.FINID = T9.FINID
				JOIN (SELECT FINID FROM MANUALADVISE WHERE ADVISETYPE = 1 AND (ADVISEAMOUNT - PAIDAMOUNT - WAIVEDAMOUNT) > 0
					UNION ALL
					SELECT FINID FROM FINODDETAILS WHERE TOTPENALTYBAL > 0 OR LPIBAL > 0) T ON T.FINID = T1.FINID
				WHERE NOT EXISTS (SELECT 1 FROM FEEWAIVERHEADER_TEMP
					WHERE FEEWAIVERHEADER_TEMP.FINID = T1.FINID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="FWV_1.1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'feewaivers_view');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="FWV_2_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'feewaiverheader_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FWV_2" author="Gopal.p">
		<createView viewName="FEEWAIVERHEADER_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.WAIVERID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.EVENT,
					T1.REMARKS,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.POSTINGDATE,
					T1.VALUEDATE
				FROM FEEWAIVERHEADER_TEMP T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
			]]>
		</createView>
	</changeSet>

	<changeSet id="FWV_2_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'feewaiverheader_tview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="FWV_3_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'feewaiverheader_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FWV_3" author="Gopal.p">
		<createView viewName="FEEWAIVERHEADER_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.WAIVERID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.EVENT,
					T1.REMARKS,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.POSTINGDATE,
					T1.VALUEDATE
				FROM FEEWAIVERHEADER_TEMP T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				UNION ALL
				SELECT T1.WAIVERID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.EVENT,
					T1.REMARKS,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.POSTINGDATE,
					T1.VALUEDATE
				FROM FEEWAIVERHEADER T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				WHERE NOT EXISTS (SELECT 1 FROM FEEWAIVERHEADER_TEMP
					WHERE FEEWAIVERHEADER_TEMP.WAIVERID = T1.WAIVERID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="FWV_3_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'feewaiverheader_view');	
			]]>
		</sql>
	</changeSet>

	<!-- (FWV) :: Fee Waiver views are handle in single place end -->

	<!-- (PRV) :: Provision views are handle in single place start -->

	<changeSet id="PRV_1_pre" author="GopalaSwamy.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'provisions_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="PRV_1" author="GopalaSwamy.M">
		<createView viewName="PROVISIONS_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT PA.ID
					, FM.FINID
					, FM.FINREFERENCE
					, CLOSINGBALANCE
					, OUTSTANDPRINCIPAL
					, OUTSTANDPROFIT
					, PROFITACCRUEDANDDUE
					, PROFITACCRUEDANDNOTDUE
					, COLLATERALVALUE
					, DUEFROMDATE
					, LASTFULLYPAIDDATE
					, CURRBUCKET
					, DUEDAYS
					, DPD
					, PROVISIONDATE
					, PROVISIONEDAMT
					, ASSETCODE
					, ASSETSTAGEORDER
					, NPA
					, MANUALPROVISION
					, LINKEDTRANID
					, CHGLINKEDTRANID
					, PA.VERSION
					, PA.LASTMNTBY
					, PA.LASTMNTON
					, PA.RECORDSTATUS
					, PA.ROLECODE
					, PA.NEXTROLECODE
					, PA.TASKID
					, PA.NEXTTASKID
					, PA.RECORDTYPE
					, PA.WORKFLOWID 
					, FM.FINTYPE
					, FM.FINBRANCH
					, FM.FINISACTIVE
					, C.CUSTID
					, C.CUSTCIF
					, C.CUSTSHRTNAME
					, PA.NPATEMPLATEID
					, NP.CODE NPATEMPLATECODE
					, NP.DESCRIPTION NPATEMPLATEDESC
				FROM PROVISIONS_TEMP PA
				INNER JOIN FINANCEMAIN FM ON FM.FINID = PA.FINID
				INNER JOIN CUSTOMERS C ON C.CUSTID = FM.CUSTID
				LEFT JOIN NPA_TEMPLATE_TYPES NP ON NP.ID = PA.NPATEMPLATEID
				UNION ALL
				SELECT PA.ID
					, FM.FINID
					, FM.FINREFERENCE
					, CLOSINGBALANCE
					, OUTSTANDPRINCIPAL
					, OUTSTANDPROFIT
					, PROFITACCRUEDANDDUE
					, PROFITACCRUEDANDNOTDUE
					, COLLATERALVALUE
					, DUEFROMDATE
					, LASTFULLYPAIDDATE
					, CURRBUCKET
					, DUEDAYS
					, DPD
					, PROVISIONDATE
					, PROVISIONEDAMT
					, ASSETCODE
					, ASSETSTAGEORDER
					, NPA
					, MANUALPROVISION
					, LINKEDTRANID
					, CHGLINKEDTRANID
					, PA.VERSION
					, PA.LASTMNTBY
					, PA.LASTMNTON
					, PA.RECORDSTATUS
					, PA.ROLECODE
					, PA.NEXTROLECODE
					, PA.TASKID
					, PA.NEXTTASKID
					, PA.RECORDTYPE
					, PA.WORKFLOWID 
					, FM.FINTYPE
					, FM.FINBRANCH
					, FM.FINISACTIVE
					, C.CUSTID
					, C.CUSTCIF
					, C.CUSTSHRTNAME
					, PA.NPATEMPLATEID
					, NP.CODE NPATEMPLATECODE
					, NP.DESCRIPTION NPATEMPLATEDESC
				FROM PROVISIONS PA
				INNER JOIN FINANCEMAIN FM ON FM.FINID = PA.FINID
				INNER JOIN CUSTOMERS C ON C.CUSTID = FM.CUSTID
				LEFT JOIN NPA_TEMPLATE_TYPES NP ON NP.ID = PA.NPATEMPLATEID
				WHERE NOT (EXISTS ( SELECT 1 FROM PROVISIONS_TEMP WHERE PROVISIONS_TEMP.ID = PA.ID))
			]]>
		</createView>
	</changeSet>

	<changeSet id="PRV_1_post" author="GopalaSwamy.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'provisions_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="PRV_2_pre" author="GopalaSwamy.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'provisions_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="PRV_2" author="Vijayakumar.k">
		<createView viewName="PROVISIONS_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT PA.ID
					, FM.FINID
					, FM.FINREFERENCE
					, CLOSINGBALANCE
					, OUTSTANDPRINCIPAL
					, OUTSTANDPROFIT
					, PROFITACCRUEDANDDUE
					, PROFITACCRUEDANDNOTDUE
					, COLLATERALVALUE
					, DUEFROMDATE
					, LASTFULLYPAIDDATE
					, CURRBUCKET
					, DUEDAYS
					, DPD
					, PROVISIONDATE
					, PROVISIONEDAMT
					, ASSETCODE
					, ASSETSTAGEORDER
					, NPA
					, MANUALPROVISION
					, LINKEDTRANID
					, CHGLINKEDTRANID
					, PA.VERSION
					, PA.LASTMNTBY
					, PA.LASTMNTON
					, PA.RECORDSTATUS
					, PA.ROLECODE
					, PA.NEXTROLECODE
					, PA.TASKID
					, PA.NEXTTASKID
					, PA.RECORDTYPE
					, PA.WORKFLOWID 
					, FM.FINTYPE
					, FM.FINBRANCH
					, FM.FINISACTIVE
					, C.CUSTID
					, C.CUSTCIF
					, C.CUSTSHRTNAME
					, PA.NPATEMPLATEID
					, NP.CODE NPATEMPLATECODE
					, NP.DESCRIPTION NPATEMPLATEDESC
				FROM PROVISIONS PA
				INNER JOIN FINANCEMAIN FM ON FM.FINID = PA.FINID
				INNER JOIN CUSTOMERS C ON C.CUSTID = FM.CUSTID
				LEFT JOIN NPA_TEMPLATE_TYPES NP ON NP.ID = PA.NPATEMPLATEID
			]]>
		</createView>
	</changeSet>

	<changeSet id="PRV_2_post" author="GopalaSwamy.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'provisions_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="PRV_3_pre" author="GopalaSwamy.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'provision_movements_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="PRV_3" author="GopalaSwamy.M">
		<createView viewName="PROVISION_MOVEMENTS_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT PA.ID
					, FM.FINID
					, FM.FINREFERENCE
					, CLOSINGBALANCE
					, OUTSTANDPRINCIPAL
					, OUTSTANDPROFIT
					, PROFITACCRUEDANDDUE
					, PROFITACCRUEDANDNOTDUE
					, COLLATERALVALUE
					, DUEFROMDATE
					, LASTFULLYPAIDDATE
					, CURRBUCKET
					, DUEDAYS
					, DPD
					, PROVISIONDATE
					, PROVISIONEDAMT
					, ASSETCODE
					, ASSETSTAGEORDER
					, NPA
					, MANUALPROVISION
					, LINKEDTRANID
					, CHGLINKEDTRANID
					, PA.VERSION
					, PA.LASTMNTBY
					, PA.LASTMNTON
					, PA.RECORDSTATUS
					, PA.ROLECODE
					, PA.NEXTROLECODE
					, PA.TASKID
					, PA.NEXTTASKID
					, PA.RECORDTYPE
					, PA.WORKFLOWID 
					, FM.FINTYPE
					, FM.FINBRANCH
					, C.CUSTID
					, C.CUSTCIF
					, C.CUSTSHRTNAME
					, PA.NPATEMPLATEID
					, NP.CODE NPATEMPLATECODE
					, NP.DESCRIPTION NPATEMPLATEDESC
				FROM PROVISION_MOVEMENTS PA
				INNER JOIN FINANCEMAIN FM ON FM.FINID = PA.FINID
				INNER JOIN CUSTOMERS C ON C.CUSTID = FM.CUSTID
				LEFT JOIN NPA_TEMPLATE_TYPES NP ON NP.ID = PA.NPATEMPLATEID
			]]>
		</createView>
	</changeSet>

	<changeSet id="PRV_3_post" author="GopalaSwamy.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'provision_movements_view');
			]]>
		</sql>
	</changeSet>

	<!-- (PRV) :: Provision views are handle in single place end -->

	<!-- (RLV) :: Receipt Level views handle in single place starts -->

	<changeSet id="RLV_1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="RLV_1" author="Gopal.p">
		<createView viewName="FINRECEIPTHEADER_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.RECAGAINST,
					T2.FINID,
					T1.REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.EXTREFERENCE,
					T1.MODULE,
					T1.RECEIPTMODESTATUS,
					T1.SUBRECEIPTMODE,
					T1.RECEIPTCHANNEL,
					T1.RECEIVEDFROM,
					T1.PANNUMBER,
					T1.COLLECTIONAGENTID,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINTYPE,
					T2.FINBRANCH,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					T2.FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					T4.FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					T5.CCYDESC FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					T2.FINISACTIVE,
					T1.WAVIEDAMT,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T2.NEXTREPAYRVWDATE,
					T1.CASHIERBRANCH,
					T1.INITIATEDATE,
					T1.INSTRUCTIONUID,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T1.ACTFINRECEIPT,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE, 
					T1.TRANSACTIONREF,               
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPEID,
	      			T13.CODE CLOSURETYPEDESC
				FROM FINRECEIPTHEADER T1
				INNER JOIN FINANCEMAIN T2 ON T1.FINID = T2.FINID
				INNER JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				INNER JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				INNER JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				INNER JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CLOSURE_TYPES	T13 ON T13.ID = T1.CLOSURETYPEID
			]]>
		</createView>
	</changeSet>

	<changeSet id="RLV_1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="RLV_2_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_dview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="RLV_2" author="Gopal.p">
		<createView viewName="FINRECEIPTHEADER_DVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.RECEIPTID,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.REMARKS,
					T1.DEPOSITBRANCH,
					T1.RECEIPTAMOUNT AMOUNT,
					T3.FINID,
					T3.FINREFERENCE,
					T4.CUSTSHRTNAME,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID FUNDINGAC,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPEID,
	      			T13.CODE CLOSURETYPEDESC
				FROM FINRECEIPTHEADER_TEMP T1
				INNER JOIN FINANCEMAIN T3 ON T1.FINID = T3.FINID
				INNER JOIN CUSTOMERS T4 ON T3.CUSTID = T4.CUSTID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH   = T12.BRANCHCODE
				LEFT JOIN CLOSURE_TYPES	T13 ON T13.ID = T1.CLOSURETYPEID
				WHERE T1.RECEIPTMODE IN ('CHEQUE', 'DD') AND T1.DEPOSITPROCESS = 1
					AND T1.RECEIPTID NOT IN (SELECT RECEIPTID FROM DEPOSITCHEQUES_TEMP )
				UNION ALL
				SELECT T1.RECEIPTID,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.REMARKS,
					T1.DEPOSITBRANCH,
					T1.RECEIPTAMOUNT AMOUNT,
					T3.FINID,
					T3.FINREFERENCE,
					T4.CUSTSHRTNAME,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID FUNDINGAC,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPEID,
	      			T13.CODE CLOSURETYPEDESC
				FROM FINRECEIPTHEADER T1
				INNER JOIN FINANCEMAIN T3 ON T1.FINID = T3.FINID
				INNER JOIN CUSTOMERS T4 ON T3.CUSTID = T4.CUSTID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CLOSURE_TYPES	T13 ON T13.ID = T1.CLOSURETYPEID
				WHERE NOT EXISTS (SELECT 1 FROM FINRECEIPTHEADER_TEMP 
					WHERE RECEIPTID = T1.RECEIPTID ) AND T1.RECEIPTMODE   IN ('CHEQUE', 'DD')
					AND T1.DEPOSITPROCESS = 1 AND T1.RECEIPTID NOT IN
					(SELECT RECEIPTID FROM DEPOSITCHEQUES_TEMP)
			]]>
		</createView>
	</changeSet>

	<changeSet id="RLV_2_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader_dview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="RLV_3_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_fcdview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="RLV_3" author="Gopal.p">
		<createView viewName="FINRECEIPTHEADER_FCDVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.RECAGAINST,
					T2.FINID,
					(CASE WHEN T1.RECAGAINST ='C' THEN T13.CUSTCIF
						ELSE T1.REFERENCE END) REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.RECEIPTMODESTATUS,
					T1.SUBRECEIPTMODE,
					T1.RECEIPTCHANNEL,
					T1.RECEIVEDFROM,
					T1.PANNUMBER,
					T1.COLLECTIONAGENTID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINTYPE,
					T2.FINBRANCH,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					T2.FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					T4.FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					T5.CCYDESC FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
					T2.SCHEDULEMETHOD,
					T2.PROFITDAYSBASIS PFTDAYSBASIS,
					T1.WAVIEDAMT,
					COALESCE(T3.CUSTID, 0) CUSTID,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T2.NEXTREPAYRVWDATE,
					T1.CASHIERBRANCH,
					T1.INITIATEDATE,
					T1.INSTRUCTIONUID,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.MODULE,
					T1.EXTREFERENCE,
					T13.CUSTCIF CUSTOMERCIF,
					T13.CUSTSHRTNAME CUSTOMERNAME,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPEID,
	      			T14.CODE CLOSURETYPEDESC
				FROM FINRECEIPTHEADER_TEMP T1
				LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.FINID = T2.FINID
				LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
				LEFT JOIN CLOSURE_TYPES	T14 ON T14.ID = T1.CLOSURETYPEID
				UNION ALL
				SELECT T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.RECAGAINST,
					T2.FINID,
					( CASE WHEN T1.RECAGAINST ='C' THEN T13.CUSTCIF
						ELSE T1.REFERENCE END) REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.RECEIPTMODESTATUS,
					T1.SUBRECEIPTMODE,
					T1.RECEIPTCHANNEL,
					T1.RECEIVEDFROM,
					T1.PANNUMBER,
					T1.COLLECTIONAGENTID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINTYPE,
					T2.FINBRANCH,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					T2.FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					T4.FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					T5.CCYDESC FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
					T2.SCHEDULEMETHOD,
					T2.PROFITDAYSBASIS PFTDAYSBASIS,
					T1.WAVIEDAMT,
					COALESCE(T3.CUSTID, 0) CUSTID,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T2.NEXTREPAYRVWDATE,
					T1.CASHIERBRANCH,
					T1.INITIATEDATE,
					T1.INSTRUCTIONUID,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.MODULE,
					T1.EXTREFERENCE,
					T13.CUSTCIF CUSTOMERCIF,
					T13.CUSTSHRTNAME CUSTOMERNAME,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPEID,
	      			T14.CODE CLOSURETYPEDESC
				FROM FINRECEIPTHEADER T1
				LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.FINID = T2.FINID
				LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
				LEFT JOIN CLOSURE_TYPES	T14 ON T14.ID = T1.CLOSURETYPEID
				WHERE NOT EXISTS ( SELECT 1 FROM FINRECEIPTHEADER_TEMP 
					WHERE RECEIPTID = T1.RECEIPTID )
			]]>
		</createView>
	</changeSet>

	<changeSet id="RLV_3_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader_fcdview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="RLV_4_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_fcview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="RLV_4" author="Gopal.p">
		<createView viewName="FINRECEIPTHEADER_FCVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.RECAGAINST,
					T2.FINID,
					T1.REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.RECEIPTMODESTATUS,
					T1.SUBRECEIPTMODE,
					T1.RECEIPTCHANNEL,
					T1.RECEIVEDFROM,
					T1.PANNUMBER,
					T1.COLLECTIONAGENTID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINTYPE,
					T2.FINBRANCH,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					T2.FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					T4.FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					T5.CCYDESC FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
					T2.SCHEDULEMETHOD,
					T2.PROFITDAYSBASIS PFTDAYSBASIS,
					T1.WAVIEDAMT,
					COALESCE(T3.CUSTID, 0) CUSTID,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T2.NEXTREPAYRVWDATE,
					T1.CASHIERBRANCH,
					T1.INITIATEDATE,
					T1.INSTRUCTIONUID,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.MODULE,
					T1.EXTREFERENCE,
					T13.CUSTCIF CUSTOMERCIF,
					T13.CUSTSHRTNAME CUSTOMERNAME,
					T1.ACTFINRECEIPT,
					T1.REASONCODE,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPEID,
	      			T14.CODE CLOSURETYPEDESC
				FROM FINRECEIPTHEADER_TEMP T1
				LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.FINID = T2.FINID
				LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
				LEFT JOIN CLOSURE_TYPES	T14 ON T14.ID = T1.CLOSURETYPEID
				UNION ALL
				SELECT
					T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.RECAGAINST,
					T2.FINID,
					T1.REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.RECEIPTMODESTATUS,
					T1.SUBRECEIPTMODE,
					T1.RECEIPTCHANNEL,
					T1.RECEIVEDFROM,
					T1.PANNUMBER,
					T1.COLLECTIONAGENTID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINTYPE,
					T2.FINBRANCH,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					T2.FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					T4.FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					T5.CCYDESC FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
					T2.SCHEDULEMETHOD,
					T2.PROFITDAYSBASIS PFTDAYSBASIS,
					T1.WAVIEDAMT,
					COALESCE(T3.CUSTID, 0) CUSTID,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T2.NEXTREPAYRVWDATE,
					T1.CASHIERBRANCH,
					T1.INITIATEDATE,
					T1.INSTRUCTIONUID,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.MODULE,
					T1.EXTREFERENCE,
					T13.CUSTCIF CUSTOMERCIF,
					T13.CUSTSHRTNAME CUSTOMERNAME,
					T1.ACTFINRECEIPT,
					T1.REASONCODE,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPEID,
	      			T14.CODE CLOSURETYPEDESC
				FROM FINRECEIPTHEADER T1
				LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.FINID = T2.FINID
				LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
				LEFT JOIN CLOSURE_TYPES	T14 ON T14.ID = T1.CLOSURETYPEID
				WHERE NOT EXISTS ( SELECT 1 FROM FINRECEIPTHEADER_TEMP WHERE RECEIPTID = T1.RECEIPTID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="RLV_4_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader_fcview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="RLV_5_pre" author="Gopsl.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_fdview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="RLV_5" author="Gopal.p">
		<createView viewName="FINRECEIPTHEADER_FDVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.RECAGAINST,
					T2.FINID,
					CASE WHEN T1.RECAGAINST = 'C' THEN T10.CUSTCIF
						ELSE T1.REFERENCE END REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.RECEIPTMODESTATUS,
					T1.SUBRECEIPTMODE,
					T1.RECEIPTCHANNEL,
					T1.RECEIVEDFROM,
					T1.PANNUMBER,
					T1.COLLECTIONAGENTID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					COALESCE(T2.FINTYPE,T1.FINTYPE) FINTYPE,
					T2.FINBRANCH,
					COALESCE(T3.CUSTCIF,T10.CUSTCIF) CUSTCIF,
					COALESCE(T3.CUSTSHRTNAME,T10.CUSTSHRTNAME) CUSTSHRTNAME,
					COALESCE(T2.FINCCY,T14.FINCCY) FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					COALESCE(T4.FINTYPEDESC,T14.FINTYPEDESC) FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					COALESCE(T5.CCYDESC,T15.CCYDESC) FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
					T2.SCHEDULEMETHOD,
					T2.PROFITDAYSBASIS PFTDAYSBASIS,
					T1.WAVIEDAMT,
					COALESCE(T3.CUSTID, T10.CUSTID) CUSTID,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T1.CASHIERBRANCH,
					T2.NEXTREPAYRVWDATE,
					T1.INITIATEDATE,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.MODULE,
					T1.EXTREFERENCE,
					T10.CUSTCIF CUSTOMERCIF,
					T10.CUSTSHRTNAME CUSTOMERNAME,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T11.DIVISIONCODEDESC FINDIVISIONDESC,
					T12.BRANCHDESC POSTBRANCHDESC,
					T13.BRANCHDESC CASHIERBRANCHDESC,
					T11.ENTITYCODE,
					T1.INSTRUCTIONUID,
					T1.ACTFINRECEIPT,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPEID,
	      			T16.CODE CLOSURETYPEDESC
				FROM FINRECEIPTHEADER_TEMP T1
				LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.FINID = T2.FINID
				LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN CUSTOMERS T10 ON CAST(T10.CUSTID AS VARCHAR(20)) = T1.REFERENCE
				LEFT JOIN SMTDIVISIONDETAIL T11 ON T1.FINDIVISION = T11.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.POSTBRANCH = T12.BRANCHCODE
				LEFT JOIN RMTBRANCHES T13 ON T1.CASHIERBRANCH = T13.BRANCHCODE
				LEFT JOIN RMTFINANCETYPES T14 ON T1.FINTYPE = T14.FINTYPE
				LEFT JOIN RMTCURRENCIES T15 ON T14.FINCCY= T15.CCYCODE
				LEFT JOIN CLOSURE_TYPES	T16 ON T16.ID = T1.CLOSURETYPEID
			]]>
		</createView>
	</changeSet>

	<changeSet id="RLV_5_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader_fdview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="RLV_6_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_fedview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="RLV_6" author="Gopal.p">
		<createView viewName="FINRECEIPTHEADER_FEDVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.RECAGAINST,
					T2.FINID,
					CASE WHEN T1.RECAGAINST ='C' THEN T13.CUSTCIF
						ELSE T1.REFERENCE END REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.RECEIPTMODESTATUS,
					T1.SUBRECEIPTMODE,
					T1.RECEIPTCHANNEL,
					T1.RECEIVEDFROM,
					T1.PANNUMBER,
					T1.COLLECTIONAGENTID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINBRANCH,
					COALESCE(T3.CUSTCIF, T13.CUSTCIF) CUSTCIF,
					COALESCE(T3.CUSTSHRTNAME,T13.CUSTSHRTNAME) CUSTSHRTNAME,
					T2.FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					COALESCE(T2.FINTYPE, T1.FINTYPE) FINTYPE,
					COALESCE(T4.FINTYPEDESC, T14.FINTYPEDESC) FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					T5.CCYDESC FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
					T2.SCHEDULEMETHOD,
					T2.PROFITDAYSBASIS PFTDAYSBASIS,
					T1.WAVIEDAMT,
					COALESCE(T3.CUSTID, 0) CUSTID,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T2.NEXTREPAYRVWDATE,
					T1.CASHIERBRANCH,
					T1.INITIATEDATE,
					T1.INSTRUCTIONUID,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.MODULE,
					T1.EXTREFERENCE,
					T13.CUSTCIF CUSTOMERCIF,
					T13.CUSTSHRTNAME CUSTOMERNAME,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPEID,
	      			T15.CODE CLOSURETYPEDESC
				FROM FINRECEIPTHEADER_TEMP T1
				LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.FINID = T2.FINID
				LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
				LEFT JOIN RMTFINANCETYPES T14 ON T1.FINTYPE = T14.FINTYPE
				LEFT JOIN CLOSURE_TYPES	T15 ON T15.ID = T1.CLOSURETYPEID
				UNION ALL
				SELECT T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.RECAGAINST,
					T2.FINID,
					(CASE WHEN T1.RECAGAINST ='C' THEN T13.CUSTCIF
						ELSE T1.REFERENCE END) REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.RECEIPTMODESTATUS,
					T1.SUBRECEIPTMODE,
					T1.RECEIPTCHANNEL,
					T1.RECEIVEDFROM,
					T1.PANNUMBER,
					T1.COLLECTIONAGENTID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINBRANCH,
					COALESCE(T3.CUSTCIF,T13.CUSTCIF) CUSTCIF,
					COALESCE(T3.CUSTSHRTNAME,T13.CUSTSHRTNAME) CUSTSHRTNAME,
					T2.FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					COALESCE(T2.FINTYPE, T1.FINTYPE) FINTYPE,
					COALESCE(T4.FINTYPEDESC, T14.FINTYPEDESC) FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					T5.CCYDESC FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
					T2.SCHEDULEMETHOD,
					T2.PROFITDAYSBASIS PFTDAYSBASIS,
					T1.WAVIEDAMT,
					COALESCE(T3.CUSTID, 0) CUSTID,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T2.NEXTREPAYRVWDATE,
					T1.CASHIERBRANCH,
					T1.INITIATEDATE,
					T1.INSTRUCTIONUID,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.MODULE,
					T1.EXTREFERENCE,
					T13.CUSTCIF CUSTOMERCIF,
					T13.CUSTSHRTNAME CUSTOMERNAME,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPEID,
	      			T15.CODE CLOSURETYPEDESC
				FROM FINRECEIPTHEADER T1
				LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.FINID = T2.FINID
				LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
				LEFT JOIN RMTFINANCETYPES T14 ON T1.FINTYPE = T14.FINTYPE
				LEFT JOIN CLOSURE_TYPES	T15 ON T15.ID = T1.CLOSURETYPEID
				WHERE NOT EXISTS ( SELECT 1 FROM FINRECEIPTHEADER_TEMP
					WHERE RECEIPTID = T1.RECEIPTID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="RLV_6_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader_fedview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="RLV_7_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_feview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="RLV_7" author="Gopal.p">
		<createView viewName="FINRECEIPTHEADER_FEVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.RECAGAINST,
					T2.FINID,
					T1.REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.RECEIPTMODESTATUS,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINTYPE,
					T2.FINBRANCH,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					T2.FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					T4.FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					T5.CCYDESC FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
					T2.SCHEDULEMETHOD,
					T2.PROFITDAYSBASIS PFTDAYSBASIS,
					T1.WAVIEDAMT,
					COALESCE(T3.CUSTID, 0) CUSTID,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T2.NEXTREPAYRVWDATE,
					T1.CASHIERBRANCH,
					T1.INITIATEDATE,
					T4.FINDIVISION LOVDESCFINDIVISION,
					T2.BUSINESSVERTICAL,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.INSTRUCTIONUID,
					T1.MODULE,
					T1.EXTREFERENCE,
					T1.COLLECTIONAGENTID,
					T1.PANNUMBER,
					T1.RECEIVEDFROM,
					T1.RECEIPTCHANNEL,
					T1.SUBRECEIPTMODE,
					T13.CUSTCIF CUSTOMERCIF,
					T13.CUSTSHRTNAME CUSTOMERNAME,
					T1.ACTFINRECEIPT,
					T1.REASONCODE,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPEID,
	      			T14.CODE CLOSURETYPEDESC
				FROM FINRECEIPTHEADER_TEMP T1
				LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.FINID = T2.FINID
				LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
				LEFT JOIN CLOSURE_TYPES	T14 ON T14.ID = T1.CLOSURETYPEID
				UNION ALL
				SELECT T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.RECAGAINST,
					T2.FINID,
					T1.REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.RECEIPTMODESTATUS,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINTYPE,
					T2.FINBRANCH,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					T2.FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					T4.FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					T5.CCYDESC FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
					T2.SCHEDULEMETHOD,
					T2.PROFITDAYSBASIS PFTDAYSBASIS,
					T1.WAVIEDAMT,
					COALESCE(T3.CUSTID, 0) CUSTID,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T2.NEXTREPAYRVWDATE,
					T1.CASHIERBRANCH,
					T1.INITIATEDATE,
					T4.FINDIVISION LOVDESCFINDIVISION,
					T2.BUSINESSVERTICAL,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.INSTRUCTIONUID,
					T1.MODULE,
					T1.EXTREFERENCE,
					T1.COLLECTIONAGENTID,
					T1.PANNUMBER,
					T1.RECEIVEDFROM,
					T1.RECEIPTCHANNEL,
					T1.SUBRECEIPTMODE,
					T13.CUSTCIF CUSTOMERCIF,
					T13.CUSTSHRTNAME CUSTOMERNAME,
					T1.ACTFINRECEIPT,
					T1.REASONCODE,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPEID,
	      			T14.CODE CLOSURETYPEDESC
					FROM FINRECEIPTHEADER T1
					LEFT JOIN (SELECT FINID, FINREFERENCE, FINBRANCH, FINTYPE
							, FINCCY, SCHEDULEMETHOD, PROFITDAYSBASIS, FINISACTIVE
							, CUSTID, PRODUCTCATEGORY, PROMOTIONCODE, NEXTREPAYRVWDATE
							, BUSINESSVERTICAL
						FROM FINANCEMAIN_TEMP
						UNION
						SELECT FINID, FINREFERENCE, FINBRANCH, FINTYPE, FINCCY
							, SCHEDULEMETHOD, PROFITDAYSBASIS, FINISACTIVE
							, CUSTID, PRODUCTCATEGORY, PROMOTIONCODE, NEXTREPAYRVWDATE
							, BUSINESSVERTICAL
						FROM FINANCEMAIN ) T2 ON T1.FINID = T2.FINID
				LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
				LEFT JOIN CLOSURE_TYPES	T14 ON T14.ID = T1.CLOSURETYPEID
				WHERE NOT EXISTS ( SELECT 1 FROM FINRECEIPTHEADER_TEMP
					WHERE RECEIPTID = T1.RECEIPTID )
			]]>
		</createView>
	</changeSet>

	<changeSet id="RLV_7_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader_feview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="RLV_8_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_fview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="RLV_8" author="Gopal.p">
		<createView viewName="FINRECEIPTHEADER_FVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.ACTFINRECEIPT,
					T1.RECAGAINST,
					T2.FINID,
					T1.REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.RECEIPTMODESTATUS,
					T1.SUBRECEIPTMODE,
					T1.RECEIPTCHANNEL,
					T1.RECEIVEDFROM,
					T1.PANNUMBER,
					T1.COLLECTIONAGENTID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					COALESCE(T1.FINTYPE, T2.FINTYPE) FINTYPE,
					T2.FINBRANCH,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					COALESCE(T2.FINCCY, T15.FINCCY) FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					COALESCE(T4.FINTYPEDESC, T15.FINTYPEDESC) FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					COALESCE(T5.CCYDESC, T14.CCYDESC) FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
					T2.SCHEDULEMETHOD,
					T2.PROFITDAYSBASIS PFTDAYSBASIS,
					T1.WAVIEDAMT,
					COALESCE(T3.CUSTID, T10.CUSTID, 0) CUSTID,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T1.CASHIERBRANCH,
					T2.NEXTREPAYRVWDATE,
					T1.INITIATEDATE,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.MODULE,
					T1.INSTRUCTIONUID,
					T1.EXTREFERENCE,
					T10.CUSTCIF CUSTOMERCIF,
					T10.CUSTSHRTNAME CUSTOMERNAME,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T11.DIVISIONCODEDESC FINDIVISIONDESC,
					T12.BRANCHDESC POSTBRANCHDESC,
					T13.BRANCHDESC CASHIERBRANCHDESC,
					T11.ENTITYCODE,
					COALESCE(T3.CUSTBASECCY,T10.CUSTBASECCY)CUSTBASECCY,
					T1.REASONCODE,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T2.TDSAPPLICABLE FINTDSAPPLICABLE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPEID,
	      			T16.CODE CLOSURETYPEDESC
				FROM FINRECEIPTHEADER_TEMP T1
				LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.FINID = T2.FINID
				LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN Customers T10 ON CAST(T10.CustId AS VARCHAR(20)) = T1.REFERENCE
				LEFT JOIN SMTDIVISIONDETAIL T11 ON T1.FINDIVISION = T11.DIVISIONCODE
				LEFT JOIN RMTBranches T12 ON T1.PostBranch = T12.BranchCode
				LEFT JOIN RMTBranches T13 ON T1.CASHIERBRANCH = T13.BranchCode
				LEFT JOIN RMTFINANCETYPES T15 ON T1.FINTYPE = T15.FINTYPE
				LEFT JOIN RMTCURRENCIES T14 ON T14.CCYCODE= T3.CUSTBASECCY
				LEFT JOIN CLOSURE_TYPES	T16 ON T16.ID = T1.CLOSURETYPEID
			]]>
		</createView>
	</changeSet>

	<changeSet id="RLV_8_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader_fview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="RLV_9_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="RLV_9" author="Gopal.p">
		<createView viewName="FINRECEIPTHEADER_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.RECAGAINST,
					T2.FINID,
					T1.REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.EXTREFERENCE,
					T1.MODULE,
					T1.RECEIPTMODESTATUS,
					T1.SUBRECEIPTMODE,
					T1.RECEIPTCHANNEL,
					T1.RECEIVEDFROM,
					T1.PANNUMBER,
					T1.COLLECTIONAGENTID,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINTYPE,
					T2.FINBRANCH,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					T2.FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					T4.FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					T5.CCYDESC FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					T2.FINISACTIVE,
					T1.WAVIEDAMT,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T2.NEXTREPAYRVWDATE,
					T1.CASHIERBRANCH,
					T1.INITIATEDATE,
					T1.INSTRUCTIONUID,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T1.ACTFINRECEIPT,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPEID,
	      			T14.CODE CLOSURETYPEDESC
				FROM FINRECEIPTHEADER_TEMP T1
				INNER JOIN FINANCEMAIN T2 ON T1.FINID = T2.FINID
				INNER JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				INNER JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				INNER JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				INNER JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CLOSURE_TYPES	T14 ON T14.ID = T1.CLOSURETYPEID
			]]>
		</createView>
	</changeSet>

	<changeSet id="RLV_9_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="RLV_10_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="RLV_10" author="Gopal.p">
		<createView viewName="FINRECEIPTHEADER_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.RECEIPTID,
				    T1.RECEIPTDATE,
				    T1.RECEIPTTYPE,
				    T1.RECAGAINST,
					T2.FINID,
				    T1.REFERENCE,
				    T1.RECEIPTPURPOSE,
				    T1.RECEIPTMODE,
				    T1.EXCESSADJUSTTO,
				    T1.ALLOCATIONTYPE,
				    T1.RECEIPTAMOUNT,
				    T1.EFFECTSCHDMETHOD,
				    T1.EXTREFERENCE,
				    T1.MODULE,
				    T1.RECEIPTMODESTATUS,
				    T1.SUBRECEIPTMODE,
				    T1.RECEIPTCHANNEL,
				    T1.RECEIVEDFROM,
				    T1.PANNUMBER,
				    T1.COLLECTIONAGENTID,
				    T9.CODE COLLECTIONAGENTCODE,
				    T9.DESCRIPTION COLLECTIONAGENTDESC,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T2.FINTYPE,
				    T2.FINBRANCH,
				    T3.CUSTCIF,
				    T3.CUSTSHRTNAME,
				    T2.FINCCY,
				    T1.REALIZATIONDATE,
				    T1.CANCELREASON,
				    T4.FINTYPEDESC,
				    T6.BRANCHDESC FINBRANCHDESC,
				    T5.CCYDESC FINCCYDESC,
				    T7.REJECTDESC CANCELREASONDESC,
				    T2.FINISACTIVE,
				    T1.WAVIEDAMT,
				    T1.TOTFEEAMOUNT,
				    T1.BOUNCEDATE,
				    T1.REMARKS,
				    T1.RCDMAINTAINSTS,
				    T1.GDRAVAILABLE,
				    T1.RELEASETYPE,
				    T1.THIRDPARTYNAME,
				    T1.THIRDPARTYMOBILENUM,
				    T1.DEPOSITPROCESS,
				    T1.DEPOSITBRANCH,
				    T1.LPIAMOUNT,
				    T1.LPPAMOUNT,
				    T1.GSTLPIAMOUNT,
				    T1.GSTLPPAMOUNT,
				    T2.PRODUCTCATEGORY,
				    T2.PROMOTIONCODE,
				    T2.NEXTREPAYRVWDATE,
				    T1.CASHIERBRANCH,
				    T1.INITIATEDATE,
				    T1.INSTRUCTIONUID,
				    T1.FINDIVISION,
				    T1.POSTBRANCH,
				    T10.DIVISIONCODEDESC FINDIVISIONDESC,
				    T11.BRANCHDESC POSTBRANCHDESC,
				    T12.BRANCHDESC CASHIERBRANCHDESC,
				    T10.ENTITYCODE,
				    T1.ACTFINRECEIPT,
					T1.REASONCODE,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPEID,
	      			T13.CODE CLOSURETYPEDESC
				FROM FINRECEIPTHEADER_TEMP T1
				JOIN FINANCEMAIN T2 ON T1.FINID = T2.FINID
				JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CLOSURE_TYPES	T13 ON T13.ID = T1.CLOSURETYPEID
				UNION ALL
				SELECT T1.RECEIPTID,
				    T1.RECEIPTDATE,
				    T1.RECEIPTTYPE,
				    T1.RECAGAINST,
					T2.FINID,
				    T1.REFERENCE,
				    T1.RECEIPTPURPOSE,
				    T1.RECEIPTMODE,
				    T1.EXCESSADJUSTTO,
				    T1.ALLOCATIONTYPE,
				    T1.RECEIPTAMOUNT,
				    T1.EFFECTSCHDMETHOD,
				    T1.EXTREFERENCE,
				    T1.MODULE,
				    T1.RECEIPTMODESTATUS,
				    T1.SUBRECEIPTMODE,
				    T1.RECEIPTCHANNEL,
				    T1.RECEIVEDFROM,
				    T1.PANNUMBER,
				    T1.COLLECTIONAGENTID,
				    T9.CODE COLLECTIONAGENTCODE,
				    T9.DESCRIPTION COLLECTIONAGENTDESC,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T2.FINTYPE,
				    T2.FINBRANCH,
				    T3.CUSTCIF,
				    T3.CUSTSHRTNAME,
				    T2.FINCCY,
				    T1.REALIZATIONDATE,
				    T1.CANCELREASON,
				    T4.FINTYPEDESC,
				    T6.BRANCHDESC FINBRANCHDESC,
				    T5.CCYDESC FINCCYDESC,
				    T7.REJECTDESC CANCELREASONDESC,
				    T2.FINISACTIVE,
				    T1.WAVIEDAMT,
				    T1.TOTFEEAMOUNT,
				    T1.BOUNCEDATE,
				    T1.REMARKS,
				    T1.RCDMAINTAINSTS,
				    T1.GDRAVAILABLE,
				    T1.RELEASETYPE,
				    T1.THIRDPARTYNAME,
				    T1.THIRDPARTYMOBILENUM,
				    T1.DEPOSITPROCESS,
				    T1.DEPOSITBRANCH,
				    T1.LPIAMOUNT,
				    T1.LPPAMOUNT,
				    T1.GSTLPIAMOUNT,
				    T1.GSTLPPAMOUNT,
				    T2.PRODUCTCATEGORY,
				    T2.PROMOTIONCODE,
				    T2.NEXTREPAYRVWDATE,
				    T1.CASHIERBRANCH,
				    T1.INITIATEDATE,
				    T1.INSTRUCTIONUID,
				    T1.FINDIVISION,
				    T1.POSTBRANCH,
				    T10.DIVISIONCODEDESC FINDIVISIONDESC,
				    T11.BRANCHDESC POSTBRANCHDESC,
				    T12.BRANCHDESC CASHIERBRANCHDESC,
				    T10.ENTITYCODE,
				    T1.ACTFINRECEIPT,
					T1.REASONCODE,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPEID,
	      			T13.CODE CLOSURETYPEDESC
				FROM FINRECEIPTHEADER T1
				JOIN FINANCEMAIN T2 ON T1.FINID = T2.FINID
				JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CLOSURE_TYPES	T13 ON T13.ID = T1.CLOSURETYPEID
				WHERE NOT (EXISTS ( SELECT 1 FROM FINRECEIPTHEADER_TEMP
					WHERE FINRECEIPTHEADER_TEMP.RECEIPTID = T1.RECEIPTID))
			]]>
		</createView>
	</changeSet>

	<changeSet id="RLV_10_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="RLV_11_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptdetail_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="RLV_11" author="Gopal.p">
		<createView viewName="FINRECEIPTDETAIL_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T4.CUSTCIF,
					T3.FINID,
					T1.REFERENCE,
					T3.FINTYPE,
					T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTAMOUNT,
					T2.DEPOSITDATE,
					T2.BANKCODE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.BOUNCEDATE CANCELDATE,
					T2.VALUEDATE,
					T2.PAYAGAINSTID,
					T1.BOUNCEDATE,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					T3.CLOSINGSTATUS,
					T3.FINBRANCH,
					T3.FINCURRASSETVALUE,
					T3.PRODUCTCATEGORY,
					T6.PARTNERBANKCODE,
					T2.TRANSACTIONREF,
					T2.FUNDINGAC,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T5.ROLEDESC LOVDESCREQUESTSTAGE,
					T2.PAYMENTTYPE,
					T6.ACTYPE PARTNERBANKACTYPE,
					T6.ACCOUNTNO PARTNERBANKAC,
					T7.BANKNAME BANKCODEDESC,
					T6.PARTNERBANKNAME FUNDINGACDESC,
					T6.PARTNERBANKCODE FUNDINGACCODE,
					T2.LOGKEY,
					T2.PAYORDER,
					T2.STATUS,
					T2.RECEIVEDDATE,
					T2.CHEQUEACNO,
					T2.PAYMENTREF,
					T2.DEPOSITNO,
					T2.FAVOURNAME,
					T2.FAVOURNUMBER,
					T2.AMOUNT,
					T2.PAYMENTTO,
					T2.RECEIPTTYPE,
					T2.RECEIPTSEQID,
					T2.BANKBRANCHID,
					T8.IFSC,
					T8.BRANCHDESC
				FROM FINRECEIPTHEADER_TEMP T1
				LEFT JOIN FINRECEIPTDETAIL_TEMP T2 ON T1.RECEIPTID = T2.RECEIPTID
				LEFT JOIN FINANCEMAIN T3 ON T1.FINID = T3.FINID
				LEFT JOIN CUSTOMERS T4 ON T3.CUSTID = T4.CUSTID
				LEFT JOIN SECROLES T5 ON T1.NEXTROLECODE = T5.ROLECD
				LEFT JOIN PARTNERBANKS T6 ON T6.PARTNERBANKID = T2.FUNDINGAC
				LEFT JOIN BMTBANKDETAIL T7 ON T2.BANKCODE = T7.BANKCODE
				LEFT JOIN BANKBRANCHES T8 ON T2.BANKBRANCHID = T8.BANKBRANCHID
				UNION ALL
				SELECT T4.CUSTCIF,
					T3.FINID,
					T1.REFERENCE,
					T3.FINTYPE,
					T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTAMOUNT,
					T2.DEPOSITDATE,
					T2.BANKCODE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.BOUNCEDATE CANCELDATE,
					T2.VALUEDATE,
					T2.PAYAGAINSTID,
					T1.BOUNCEDATE,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					T3.CLOSINGSTATUS,
					T3.FINBRANCH,
					T3.FINCURRASSETVALUE,
					T3.PRODUCTCATEGORY,
					T6.PARTNERBANKCODE,
					T2.TRANSACTIONREF,
					T2.FUNDINGAC,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T5.ROLEDESC LOVDESCREQUESTSTAGE,
					T2.PAYMENTTYPE,
					T6.ACTYPE PARTNERBANKACTYPE,
					T6.ACCOUNTNO PARTNERBANKAC,
					T7.BANKNAME BANKCODEDESC,
					T6.PARTNERBANKNAME FUNDINGACDESC,
					T6.PARTNERBANKCODE FUNDINGACCODE,
					T2.LOGKEY,
					T2.PAYORDER,
					T2.STATUS,
					T2.RECEIVEDDATE,
					T2.CHEQUEACNO,
					T2.PAYMENTREF,
					T2.DEPOSITNO,
					T2.FAVOURNAME,
					T2.FAVOURNUMBER,
					T2.AMOUNT,
					T2.PAYMENTTO,
					T2.RECEIPTTYPE,
					T2.RECEIPTSEQID,
					T2.BANKBRANCHID,
					T8.IFSC,
					T8.BRANCHDESC
				FROM FINRECEIPTHEADER T1
				LEFT JOIN FINRECEIPTDETAIL T2 ON T1.RECEIPTID = T2.RECEIPTID
				LEFT JOIN FINANCEMAIN T3 ON T1.FINID = T3.FINID
				LEFT JOIN CUSTOMERS T4 ON T3.CUSTID = T4.CUSTID
				LEFT JOIN SECROLES T5 ON T1.NEXTROLECODE = T5.ROLECD
				LEFT JOIN PARTNERBANKS T6 ON T6.PARTNERBANKID = T2.FUNDINGAC
				LEFT JOIN BMTBANKDETAIL T7 ON T2.BANKCODE = T7.BANKCODE
				LEFT JOIN BANKBRANCHES T8 ON T2.BANKBRANCHID = T8.BANKBRANCHID
				WHERE NOT (EXISTS ( SELECT 1 FROM FINRECEIPTHEADER_TEMP
					WHERE FINRECEIPTHEADER_TEMP.RECEIPTID = T1.RECEIPTID))
			]]>
		</createView>
	</changeSet>

	<changeSet id="RLV_11_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptdetail_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="RLV_12.1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'receiptdetails_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="RLV_12.1" author="Gopal.p">
		<createView viewName="RECEIPTDETAILS_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T4.CUSTCIF,
					T3.FINID,
					T1.REFERENCE,
					T3.FINTYPE,
					T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTAMOUNT,
					T1.BANKCODE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.BOUNCEDATE CANCELDATE,
					T2.PAYAGAINSTID,
					T1.BOUNCEDATE,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					T3.CLOSINGSTATUS,
					T3.FINBRANCH,
					T3.FINCURRASSETVALUE,
					T3.PRODUCTCATEGORY,
					T6.PARTNERBANKCODE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T5.ROLEDESC LOVDESCREQUESTSTAGE,
					T1.RECEIPTMODE PAYMENTTYPE,
					T1.RECEIPTMODESTATUS,
					T1.ACTFINRECEIPT,
					T1.REFWAIVERAMT,
					T1.SOURCE,
					T1.VALUEDATE,
					T1.TRANSACTIONREF,
					T1.DEPOSITDATE,
					T1.PARTNERBANKID FUNDINGAC,
					T1.PRVRECEIPTPURPOSE,
					T1.RECEIPTSOURCE,
					T1.RECAPPDATE,
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					TX.RECEIPTSEQID
				FROM FINRECEIPTHEADER_TEMP T1
				JOIN (SELECT MAX(FINRECEIPTDETAIL_TEMP.RECEIPTSEQID) RECEIPTSEQID, FINRECEIPTDETAIL_TEMP.RECEIPTID
					FROM FINRECEIPTDETAIL_TEMP GROUP BY FINRECEIPTDETAIL_TEMP.RECEIPTID) TX ON TX.RECEIPTID = T1.RECEIPTID
				LEFT JOIN FINRECEIPTDETAIL_TEMP T2 ON T1.RECEIPTID = T2.RECEIPTID AND T2.RECEIPTSEQID = TX.RECEIPTSEQID
				LEFT JOIN FINANCEMAIN T3 ON T1.FINID = T3.FINID
				LEFT JOIN CUSTOMERS T4 ON T3.CUSTID = T4.CUSTID
				JOIN SECROLES T5 ON T1.NEXTROLECODE = T5.ROLECD
				LEFT JOIN PARTNERBANKS T6 ON T6.PARTNERBANKID = T2.FUNDINGAC
				UNION ALL
				SELECT T4.CUSTCIF,
					T3.FINID,
					T1.REFERENCE,
					T3.FINTYPE,
					T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTAMOUNT,
					T1.BANKCODE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.BOUNCEDATE CANCELDATE,
					T2.PAYAGAINSTID,
					T1.BOUNCEDATE,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					T3.CLOSINGSTATUS,
					T3.FINBRANCH,
					T3.FINCURRASSETVALUE,
					T3.PRODUCTCATEGORY,
					T6.PARTNERBANKCODE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T5.ROLEDESC LOVDESCREQUESTSTAGE,
					T1.RECEIPTMODE PAYMENTTYPE,
					T1.RECEIPTMODESTATUS,
					T1.ACTFINRECEIPT,
					T1.REFWAIVERAMT,
					T1.SOURCE,
					T1.VALUEDATE,
					T1.TRANSACTIONREF,
					T1.DEPOSITDATE,
					T1.PARTNERBANKID FUNDINGAC,
					T1.PRVRECEIPTPURPOSE,
					T1.RECEIPTSOURCE,
					T1.RECAPPDATE,
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					TX.RECEIPTSEQID
				FROM FINRECEIPTHEADER T1
				JOIN (SELECT MAX(FINRECEIPTDETAIL.RECEIPTSEQID) RECEIPTSEQID, FINRECEIPTDETAIL.RECEIPTID
						FROM FINRECEIPTDETAIL GROUP BY FINRECEIPTDETAIL.RECEIPTID) TX ON TX.RECEIPTID = T1.RECEIPTID
				LEFT JOIN FINRECEIPTDETAIL T2 ON T1.RECEIPTID = T2.RECEIPTID AND T2.RECEIPTSEQID = TX.RECEIPTSEQID
				LEFT JOIN FINANCEMAIN T3 ON T1.FINID = T3.FINID
				LEFT JOIN CUSTOMERS T4 ON T3.CUSTID = T4.CUSTID
				LEFT JOIN SECROLES T5 ON T1.NEXTROLECODE = T5.ROLECD
				LEFT JOIN PARTNERBANKS T6 ON T6.PARTNERBANKID = T2.FUNDINGAC
				WHERE NOT (EXISTS ( SELECT 1 FROM FINRECEIPTHEADER_TEMP
					WHERE FINRECEIPTHEADER_TEMP.RECEIPTID = T1.RECEIPTID))
			]]>
		</createView>
	</changeSet>

	<changeSet id="RLV_12.1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'receiptdetails_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="RLV_13.1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'receiptdetails_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="RLV_13.1" author="Gopal.p">
		<createView viewName="RECEIPTDETAILS_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T4.CUSTCIF,
					T3.FINID,
					T1.REFERENCE,
					T3.FINTYPE,
					T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTAMOUNT,
					T1.BANKCODE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.BOUNCEDATE CANCELDATE,
					T2.PAYAGAINSTID,
					T1.BOUNCEDATE,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					T3.CLOSINGSTATUS,
					T3.FINBRANCH,
					T3.FINCURRASSETVALUE,
					T3.PRODUCTCATEGORY,
					T6.PARTNERBANKCODE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T5.ROLEDESC LOVDESCREQUESTSTAGE,
					T1.RECEIPTMODE PAYMENTTYPE,
					T1.RECEIPTMODESTATUS,
					T1.ACTFINRECEIPT,
					T1.REFWAIVERAMT,
					T1.SOURCE,
					T1.VALUEDATE,
					T1.TRANSACTIONREF,
					T1.DEPOSITDATE,
					T1.PARTNERBANKID FUNDINGAC,
					T1.PRVRECEIPTPURPOSE,
					T1.RECEIPTSOURCE,
					T1.RECAPPDATE,
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE
				FROM FINRECEIPTHEADER_TEMP T1
				LEFT JOIN FINRECEIPTDETAIL_TEMP T2 ON T1.RECEIPTID = T2.RECEIPTID
				LEFT JOIN FINANCEMAIN T3 ON T1.FINID = T3.FINID
				LEFT JOIN CUSTOMERS T4 ON T3.CUSTID = T4.CUSTID
				JOIN SECROLES T5 ON T1.NEXTROLECODE = T5.ROLECD
				LEFT JOIN PARTNERBANKS T6 ON T6.PARTNERBANKID = T2.FUNDINGAC	  
			]]>
		</createView>
	</changeSet>

	<changeSet id="RLV_13.1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'receiptdetails_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="RLV_14_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'receipt_realization_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="RLV_14" author="Gopal.p">
		<createView viewName="RECEIPT_REALIZATION_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T4.CUSTCIF,
					T3.FINID,
					T1.REFERENCE,
					T3.FINTYPE,
					T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTAMOUNT,
					T1.DEPOSITDATE,
					T1.BANKCODE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.BOUNCEDATE CANCELDATE,
					T1.VALUEDATE,
					T2.PAYAGAINSTID,
					T1.BOUNCEDATE,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					T3.CLOSINGSTATUS,
					T3.FINBRANCH,
					T3.FINCURRASSETVALUE,
					T3.PRODUCTCATEGORY,
					T6.PARTNERBANKCODE,
					T1.TRANSACTIONREF,
					T1.PARTNERBANKID FUNDINGAC,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T5.ROLEDESC LOVDESCREQUESTSTAGE,
					T1.RECEIPTMODE PAYMENTTYPE,
					T1.RECEIPTMODESTATUS,
					T1.ACTFINRECEIPT,
					T1.RECEIVEDDATE
				FROM FINRECEIPTHEADER_TEMP T1
				LEFT JOIN FINRECEIPTDETAIL_TEMP T2 ON T1.RECEIPTID = T2.RECEIPTID
				LEFT JOIN FINANCEMAIN T3 ON T1.FINID = T3.FINID
				LEFT JOIN CUSTOMERS T4 ON T3.CUSTID = T4.CUSTID
				LEFT JOIN SECROLES T5 ON T1.NEXTROLECODE = T5.ROLECD
				LEFT JOIN PARTNERBANKS T6 ON T6.PARTNERBANKID = T2.FUNDINGAC
				UNION ALL
				SELECT T4.CUSTCIF,
					T3.FINID,
					T1.REFERENCE,
					T3.FINTYPE,
					T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTAMOUNT,
					T1.DEPOSITDATE,
					T1.BANKCODE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.BOUNCEDATE CANCELDATE,
					T1.VALUEDATE,
					T2.PAYAGAINSTID,
					T1.BOUNCEDATE,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					T3.CLOSINGSTATUS,
					T3.FINBRANCH,
					T3.FINCURRASSETVALUE,
					T3.PRODUCTCATEGORY,
					T6.PARTNERBANKCODE,
					T1.TRANSACTIONREF,
					T1.PARTNERBANKID FUNDINGAC,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T5.ROLEDESC LOVDESCREQUESTSTAGE,
					T1.RECEIPTMODE PAYMENTTYPE,
					T1.RECEIPTMODESTATUS,
					T1.ACTFINRECEIPT,
					T1.RECEIVEDDATE
				FROM FINRECEIPTHEADER T1
				LEFT JOIN FINRECEIPTDETAIL T2 ON T1.RECEIPTID = T2.RECEIPTID
				LEFT JOIN FINANCEMAIN T3 ON T1.FINID = T3.FINID
				LEFT JOIN CUSTOMERS T4 ON T3.CUSTID = T4.CUSTID
				LEFT JOIN SECROLES T5 ON T1.NEXTROLECODE = T5.ROLECD
				LEFT JOIN PARTNERBANKS T6 ON T6.PARTNERBANKID = T2.FUNDINGAC
				WHERE NOT (EXISTS (SELECT 1 FROM FINRECEIPTHEADER_TEMP
					WHERE FINRECEIPTHEADER_TEMP.RECEIPTID = T1.RECEIPTID))
			]]>
		</createView>
	</changeSet>

	<changeSet id="RLV_14_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'receipt_realization_view');
			]]>
		</sql>
	</changeSet>

	<!--(RLV) :: Receipt Level views handle in single place end -->

	<changeSet id="ST#2367.1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'custfinanceexposure_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.1" author="Gopal.p">
		<createView viewName="CUSTFINANCEEXPOSURE_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FM.FINID,
					FM.FINREFERENCE,
					FM.FINCOMMITMENTREF,
					CMT.CMTTITLE,
					FM.CUSTID,
					FM.NUMBEROFTERMS,
					FM.FINSTARTDATE,
					FM.FINTYPE,
					FM.FINAMOUNT + FM.TOTALPROFIT TOTALORIGINAL,
					CMT.CMTAMOUNT,
					CMT.CMTAVAILABLE,
					CMT.CMTEXPDATE CMTEXPIRYDATE,
					FM.FINAMOUNT - FM.FINREPAYMENTAMOUNT + FPD.TOTALPFTBAL TOTALOUTSTANDING,
					FM.MATURITYDATE,
					FM.TOTALREPAYAMT,
					FM.FINSTATUS
				FROM FINANCEMAIN FM
				JOIN FINPFTDETAILS FPD ON FM.FINID = FPD.FINID
				LEFT JOIN COMMITMENTS CMT ON CMT.CMTREFERENCE = FM.FINCOMMITMENTREF
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'custfinanceexposure_view');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.2_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'gl_subheadcodes_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.2" author="Gopal.p">
		<createView viewName="GL_SUBHEADCODES_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FM.FINID,
					FM.FINREFERENCE,
					NULL ENTITYCODE,
					0 ALWFLEXI,
					FM.FINBRANCH,
					NULL BTLOAN,
					BV.CODE BUSINESSVERTICAL,
					CUST.SUBCATEGORY EMPTYPE,
					PC.PCCITYNAME BRANCHCITY,
					FT.FINCOLLATERALREQ,
					RF.FINDIVISION
				FROM FINANCEMAIN_TEMP FM
				JOIN RMTFINANCETYPES FT ON FM.FINTYPE = FT.FINTYPE
				JOIN CUSTOMERS CUST ON CUST.CUSTID = FM.CUSTID
				JOIN RMTBRANCHES BR ON BR.BRANCHCODE = FM.FINBRANCH
				JOIN RMTPROVINCEVSCITY PC ON PC.PCCITY = BR.BRANCHCITY
				LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = FM.BUSINESSVERTICAL
				JOIN RMTFINANCETYPES RF ON RF.FINTYPE = FM.FINTYPE
				UNION ALL
				SELECT FM.FINID,
					FM.FINREFERENCE,
					NULL ENTITYCODE,
					0 ALWFLEXI,
					FM.FINBRANCH,
					NULL BTLOAN,
					BV.CODE BUSINESSVERTICAL,
					CUST.SUBCATEGORY EMPTYPE,
					PC.PCCITYNAME BRANCHCITY,
					FT.FINCOLLATERALREQ,
					RF.FINDIVISION
				FROM FINANCEMAIN FM
				JOIN RMTFINANCETYPES FT ON FM.FINTYPE = FT.FINTYPE
				JOIN CUSTOMERS CUST ON CUST.CUSTID = FM.CUSTID
				JOIN RMTBRANCHES BR ON BR.BRANCHCODE = FM.FINBRANCH
				JOIN RMTPROVINCEVSCITY PC ON PC.PCCITY = BR.BRANCHCITY
				JOIN BUSINESS_VERTICAL BV ON BV.ID = FM.BUSINESSVERTICAL
				JOIN RMTFINANCETYPES RF ON RF.FINTYPE = FM.FINTYPE
				WHERE NOT EXISTS (SELECT 1 FROM FINANCEMAIN_TEMP WHERE FINANCEMAIN_TEMP.FINID = FM.FINID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.2_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'gl_subheadcodes_view');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.3_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finirrdetails_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.3" author="Gopal.p">
		<createView viewName="FINIRRDETAILS_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.IRRID,
					FM.FINID,
					FM.FINREFERENCE,
					T2.IRRCODE,
					T2.IRRCODEDESC,
					T1.IRR,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM FINIRRDETAILS_TEMP T1
				INNER JOIN FINANCEMAIN_TEMP FM ON FM.FINID = T1.FINID
				JOIN IRRCODES T2 ON T1.IRRID = T2.IRRID
				UNION ALL
				SELECT T1.IRRID,
					FM.FINID,
					FM.FINREFERENCE,
					T2.IRRCODE,
					T2.IRRCODEDESC,
					T1.IRR,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM FINIRRDETAILS T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				JOIN IRRCODES T2 ON T1.IRRID = T2.IRRID
				WHERE NOT (EXISTS (SELECT 1 FROM FINIRRDETAILS_TEMP WHERE FINIRRDETAILS_TEMP.IRRID = T1.IRRID))
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.3_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finirrdetails_view');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.4_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financeeligibilitydetail_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.4" author="Gopal.p">
		<createView viewName="FINANCEELIGIBILITYDETAIL_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINID,
					T1.FINREFERENCE,
					T1.ELGRULECODE,
					T1.RULERESULTTYPE,
					T1.RULERESULT,
					T1.CANOVERRIDE,
					T1.OVERRIDEPERC,
					T1.USEROVERRIDE,
					T2.RULECODE LOVDESCELGRULECODE,
					T2.RULECODEDESC LOVDESCELGRULECODEDESC
				FROM FINANCEELIGIBILITYDETAIL T1
				JOIN RULES T2 ON T1.ELGRULECODE = T2.RULEID
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.4_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financeeligibilitydetail_view');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.5_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financescoreheader_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.5" author="Gopal.p">
		<createView viewName="FINANCESCOREHEADER_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.HEADERID,
					T1.GROUPID,
					T1.FINID,
					T1.FINREFERENCE,
					T1.MINSCORE,
					T1.OVERRIDE,
					T1.OVERRIDESCORE,
					T1.CREDITWORTH,
					T2.SCOREGROUPCODE AS GROUPCODE,
					T2.SCOREGROUPNAME AS GROUPCODEDESC,
					T1.CUSTID
				FROM FINANCESCOREHEADER T1
				JOIN RMTSCORINGGROUP T2 ON T1.GROUPID = T2.SCOREGROUPID
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.5_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financescoreheader_view');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.6_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financechecklistref_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.6" author="Gopal.p">
		<createView viewName="FINANCECHECKLISTREF_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FM.FINID, 
					FM.FINREFERENCE,
					T1.QUESTIONID,
					T1.ANSWER,
					T1.REMARKS,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.CHECKLISTDESC AS LOVDESCQUESDESC,
					T3.ANSDESC AS LOVDESCANSWERDESC,
					T1.INSTRUCTIONUID
				FROM FINANCECHECKLISTREF T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				JOIN BMTCHECKLIST T2 ON T1.QUESTIONID = T2.CHECKLISTID
				JOIN RMTCHECKLISTDETAILS T3 ON T1.QUESTIONID = T3.CHECKLISTID AND T1.ANSWER = T3.ANSSEQNO
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.6_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financechecklistref_aview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.7_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financechecklistref_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.7" author="Gopal.p">
		<createView viewName="FINANCECHECKLISTREF_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FM.FINID,
					FM.FINREFERENCE,
					T1.QUESTIONID,
					T1.ANSWER,
					T1.REMARKS,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.CHECKLISTDESC AS LOVDESCQUESDESC,
					T3.ANSDESC AS LOVDESCANSWERDESC,
					T1.INSTRUCTIONUID
				FROM FINANCECHECKLISTREF_TEMP T1
				INNER JOIN FINANCEMAIN_TEMP FM ON FM.FINID = T1.FINID
				JOIN BMTCHECKLIST T2 ON T1.QUESTIONID = T2.CHECKLISTID
				JOIN RMTCHECKLISTDETAILS T3 ON T1.QUESTIONID = T3.CHECKLISTID AND T1.ANSWER = T3.ANSSEQNO
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.7_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financechecklistref_view');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.8.1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'reinstatefinance_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.8.1" author="Gopal.p">
		<createView viewName="REINSTATEFINANCE_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T2.FINID,
					T2.FINREFERENCE,
					T2.FINTYPE,
					T3.FINTYPEDESC,
					T3.FINCATEGORY,
					T4.CUSTCIF,
					T2.FINBRANCH,
					T5.BRANCHDESC,
					T2.FINSTARTDATE,
					T2.NUMBEROFTERMS,
					T2.GRACETERMS,
					T2.MATURITYDATE,
					T2.FINCCY,
					T2.FINAMOUNT,
					T2.FINREPAYMENTAMOUNT,
					T2.SCHEDULEMETHOD,
					T2.FEECHARGEAMT,
					T2.DOWNPAYBANK,
					T2.DOWNPAYSUPL,
					T2.PROFITDAYSBASIS,
					T2.EFFECTIVERATEOFRETURN,
					T2.TOTALPROFIT,
					T3.FINDIVISION AS LOVDESCFINDIVISION,
					T2.FINPREAPPROVEDREF,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T4.CUSTSHRTNAME
				FROM REINSTATEFINANCE_TEMP T1
				JOIN REJECTFINANCEMAIN T2 ON T1.FINREFERENCE = T2.FINREFERENCE
				JOIN RMTFINANCETYPES T3 ON T2.FINTYPE = T3.FINTYPE
				JOIN CUSTOMERS T4 ON T2.CUSTID = T4.CUSTID
				JOIN RMTBRANCHES T5 ON T2.FINBRANCH = T5.BRANCHCODE
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.8.1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'reinstatefinance_view');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.9.1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'querydetail_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.9.1" author="Gopal.p">
		<createView viewName="QUERYDETAIL_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINID,
					T1.FINREFERENCE,
					T1.ID,
					S1.USRLOGIN,
					T1.RAISEDON,
					B1.DESCRIPTION,
					T1.QRYNOTES,
					T1.STATUS,
					T1.RAISEDBY,
					B1.CODE CATEGORYCODE,
					B1.DESCRIPTION CATEGORYDESCRIPTION,
					T1.CATEGORYID,
					T1.ASSIGNEDROLE,
					T1.NOTIFYTO,
					T1.RESPONSNOTES,
					T1.RESPONSEBY,
					S2.USRLOGIN RESPONSEUSER,
					T1.RESPONSEON,
					T1.CLOSERNOTES,
					T1.CLOSERBY,
					S3.USRLOGIN CLOSERUSER,
					T1.CLOSERON,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.MODULE,
					T1.REFERENCE,
					T1.RAISEDUSRROLE
				FROM QUERYDETAIL T1
				JOIN BMTQUERYCATEGORIES B1 ON T1.CATEGORYID = B1.ID
				JOIN SECUSERS S1 ON T1.RAISEDBY = S1.USRID
				LEFT JOIN SECUSERS S2 ON T1.RESPONSEBY = S2.USRID
				LEFT JOIN SECUSERS S3 ON T1.CLOSERBY = S3.USRID
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.9.1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'querydetail_aview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.10.1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'querydetail_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.10.1" author="Gopal.p">
		<createView viewName="QUERYDETAIL_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINID,
					T1.FINREFERENCE,
					T1.ID,
					S1.USRLOGIN,
					T1.RAISEDON,
					B1.DESCRIPTION,
					T1.QRYNOTES,
					T1.STATUS,
					T1.RAISEDBY,
					B1.CODE CATEGORYCODE,
					B1.DESCRIPTION CATEGORYDESCRIPTION,
					T1.CATEGORYID,
					T1.ASSIGNEDROLE,
					T1.NOTIFYTO,
					T1.RESPONSNOTES,
					T1.RESPONSEBY,
					S2.USRLOGIN RESPONSEUSER,
					T1.RESPONSEON,
					T1.CLOSERNOTES,
					T1.CLOSERBY,
					S3.USRLOGIN CLOSERUSER,
					T1.CLOSERON,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.MODULE,
					T1.REFERENCE
				FROM QUERYDETAIL T1
				JOIN BMTQUERYCATEGORIES B1 ON T1.CATEGORYID = B1.ID
				JOIN SECUSERS S1 ON T1.RAISEDBY = S1.USRID
				LEFT JOIN SECUSERS S2 ON T1.RESPONSEBY = S2.USRID
				LEFT JOIN SECUSERS S3 ON T1.CLOSERBY = S3.USRID
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.10.1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'querydetail_view');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.11.1_pre" author="Gopal.p" dbms="postgresql">
		<sql> 
		<![CDATA[ 
			select deps_save_and_drop_dependencies ('plf', 'financemaintenance_view'); 
		]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.11.1" author="Gopal.p">
		<createView viewName="FINANCEMAINTENANCE_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINID,
					T1.FINREFERENCE,
					T1.FINBRANCH,
					T1.FINTYPE,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.FINSTARTDATE,
					T1.NUMBEROFTERMS,
					T1.CUSTID,
					T1.FINAMOUNT,
					T1.MATURITYDATE,
					T1.FINREPAYMENTAMOUNT,
					T1.FINISACTIVE,
					T1.BLACKLISTED,
					T1.FEECHARGEAMT,
					T1.GRACETERMS,
					T1.ALLOWGRCPERIOD,
					T1.GRCPERIODENDDATE,
					T1.ALWMULTIDISB,
					T1.DEFFERMENTS,
					T1.NEXTROLECODE,
					T1.RECORDSTATUS,
					T1.RECORDTYPE,
					T1.ALLOWGRCPFTRVW,
					T1.ALLOWREPAYRVW,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.RCDMAINTAINSTS,
					T1.MIGRATEDFINANCE,
					T1.CLOSINGSTATUS,
					T1.REPAYRATEBASIS,
					T1.MANUALSCHEDULE,
					T1.FINCURRASSETVALUE,
					T1.AVAILEDUNPLANEMI,
					T1.AVAILEDREAGEH,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.DOWNPAYMENT,
					T1.PLANEMIHALW,
					T1.CALTERMS,
					T1.RATECHGANYDAY,
					T1.FINASSETVALUE,
					T2.CUSTCIF LOVDESCCUSTCIF,
					T2.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
					T3.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
					T3.FINDIVISION LOVDESCFINDIVISION,
					T3.FINCATEGORY LOVDESCPRODUCTCODENAME,
					T4.PRODUCTCATEGORY,
					COALESCE(T5.ROLEDESC,  ${ADD.SCHEMA}FN_GET_ROLEDESC(T1.NEXTROLECODE)) LOVDESCREQUESTSTAGE,
					COALESCE(T9.NOINST, 0) NOINST,
					T1.SAMPLINGREQUIRED,
					T1.ADVEMITERMS,
					T1.SANBSDSCHDLE,
					T1.PROMOTIONSEQID,
					T1.SVAMOUNT,
					T1.CBAMOUNT,
					T1.REPAYPFTFRQ,
					T1.VERSION,
					T1.TOTALCPZ
				FROM FINANCEMAIN_TEMP T1
				JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
				JOIN RMTFINANCETYPES T3 ON T1.FINTYPE = T3.FINTYPE
				LEFT JOIN SECROLES T5 ON T1.NEXTROLECODE = T5.ROLECD
				JOIN BMTPRODUCT T4 ON T3.FINCATEGORY = T4.PRODUCTCODE
				LEFT JOIN FINPFTDETAILS T9 ON T1.FINREFERENCE = T9.FINREFERENCE
				UNION ALL
				SELECT T1.FINID,
					T1.FINREFERENCE,
					T1.FINBRANCH,
					T1.FINTYPE,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.FINSTARTDATE,
					T1.NUMBEROFTERMS,
					T1.CUSTID,
					T1.FINAMOUNT,
					T1.MATURITYDATE,
					T1.FINREPAYMENTAMOUNT,
					T1.FINISACTIVE,
					T1.BLACKLISTED,
					T1.FEECHARGEAMT,
					T1.GRACETERMS,
					T1.ALLOWGRCPERIOD,
					T1.GRCPERIODENDDATE,
					T1.ALWMULTIDISB,
					T1.DEFFERMENTS,
					T1.NEXTROLECODE,
					T1.RECORDSTATUS,
					T1.RECORDTYPE,
					T1.ALLOWGRCPFTRVW,
					T1.ALLOWREPAYRVW,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.RCDMAINTAINSTS,
					T1.MIGRATEDFINANCE,
					T1.CLOSINGSTATUS,
					T1.REPAYRATEBASIS,
					T1.MANUALSCHEDULE,
					T1.FINCURRASSETVALUE,
					T1.AVAILEDUNPLANEMI,
					T1.AVAILEDREAGEH,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.DOWNPAYMENT,
					T1.PLANEMIHALW,
					T1.CALTERMS,
					T1.RATECHGANYDAY,
					T1.FINASSETVALUE,
					T2.CUSTCIF LOVDESCCUSTCIF,
					T2.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
					T3.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
					T3.FINDIVISION LOVDESCFINDIVISION,
					T3.FINCATEGORY LOVDESCPRODUCTCODENAME,
					T4.PRODUCTCATEGORY,
					COALESCE(T5.ROLEDESC,  ${ADD.SCHEMA}FN_GET_ROLEDESC(T1.NEXTROLECODE)) LOVDESCREQUESTSTAGE,
					COALESCE(T9.NOINST, 0) NOINST,
					T1.SAMPLINGREQUIRED,
					T1.ADVEMITERMS,
					T1.SANBSDSCHDLE,
					T1.PROMOTIONSEQID,
					T1.SVAMOUNT,
					T1.CBAMOUNT,
					T1.REPAYPFTFRQ,
					T1.VERSION,
					T1.TOTALCPZ
				FROM FINANCEMAIN T1
				JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
				JOIN RMTFINANCETYPES T3 ON T1.FINTYPE = T3.FINTYPE
				LEFT JOIN SECROLES T5 ON T1.NEXTROLECODE = T5.ROLECD
				JOIN BMTPRODUCT T4 ON T3.FINCATEGORY = T4.PRODUCTCODE
				LEFT JOIN FINPFTDETAILS T9 ON T1.FINID = T9.FINID
				WHERE NOT (EXISTS ( SELECT 1 FROM FINANCEMAIN_TEMP WHERE FINANCEMAIN_TEMP.FINID = T1.FINID))
			  ]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.11.1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemaintenance_view');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.12_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'holddisbursement_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.12" author="Gopal.p">
		<createView viewName="HOLDDISBURSEMENT_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FM.FINID,
					FM.FINREFERENCE,
					T1.HOLD,
					T1.TOTALLOANAMT,
					T1.DISBURSEDAMOUNT,
					T1.HOLDLIMITAMOUNT,
					T1.REMARKS,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM HOLDDISBURSEMENT T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.12_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'holddisbursement_aview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.13.1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'holddisbursement_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.13.1" author="Gopal.p">
		<createView viewName="HOLDDISBURSEMENT_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FM.FINID,
					FM.FINREFERENCE,
					T1.HOLD,
					T1.TOTALLOANAMT,
					T1.DISBURSEDAMOUNT,
					T1.HOLDLIMITAMOUNT,
					T1.REMARKS,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM HOLDDISBURSEMENT_TEMP T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				UNION ALL
				SELECT FM.FINID,
					FM.FINREFERENCE,
					T1.HOLD,
					T1.TOTALLOANAMT,
					T1.DISBURSEDAMOUNT,
					T1.HOLDLIMITAMOUNT,
					T1.REMARKS,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM HOLDDISBURSEMENT T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				WHERE NOT EXISTS (SELECT 1 FROM HOLDDISBURSEMENT_TEMP WHERE HOLDDISBURSEMENT_TEMP.FINID = T1.FINID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.13.1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'holddisbursement_view');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.14_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'payorderissueheader_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.14" author="Gopal.p">
		<createView viewName="PAYORDERISSUEHEADER_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T2.FINID,
					T2.FINREFERENCE,
					T4.CUSTCIF,
					T4.PHONENUMBER,
					T4.CUSTSHRTNAME,
					T3.FINTYPE,
					T3.FINTYPEDESC,
					T3.FINCATEGORY,
					T4.CUSTCRCPR,
					T1.TOTALPOAMOUNT,
					T1.TOTALPOCOUNT,
					T1.ISSUEDPOAMOUNT,
					T1.ISSUEDPOCOUNT,
					T1.PODUEAMOUNT,
					T1.PODUECOUNT,
					T2.FINCCY,
					T2.NUMBEROFTERMS,
					T2.GRACETERMS,
					T2.FINSTARTDATE,
					T2.MATURITYDATE,
					T2.FINAMOUNT,
					T2.FEECHARGEAMT,
					T2.DOWNPAYSUPL,
					T2.TOTALPROFIT,
					T2.EFFECTIVERATEOFRETURN,
					T2.PROFITDAYSBASIS,
					T2.CUSTID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T3.ALWMULTIPARTYDISB,
					T2.QUICKDISB,
					T2.LOANAPPROVED
				FROM PAYORDERISSUEHEADER T1
				JOIN (SELECT FINCCY, FINTYPE, CUSTID, NUMBEROFTERMS, GRACETERMS
						, FINSTARTDATE, FINID, FINREFERENCE, 1 LOANAPPROVED
						, MATURITYDATE, FINAMOUNT, FEECHARGEAMT, DOWNPAYSUPL
						, TOTALPROFIT, EFFECTIVERATEOFRETURN, PROFITDAYSBASIS, QUICKDISB
					FROM FINANCEMAIN
					UNION ALL
					SELECT FINCCY, FINTYPE, CUSTID, NUMBEROFTERMS, GRACETERMS
						, FINSTARTDATE, FINID, FINREFERENCE, 1 LOANAPPROVED
						, MATURITYDATE, FINAMOUNT, FEECHARGEAMT, DOWNPAYSUPL
						, TOTALPROFIT, EFFECTIVERATEOFRETURN, PROFITDAYSBASIS, QUICKDISB
					FROM FINANCEMAIN_TEMP
					WHERE NOT EXISTS (SELECT 1 FROM FINANCEMAIN
						WHERE FINANCEMAIN.FINID = FINANCEMAIN_TEMP.FINID)) T2 ON T1.FINID = T2.FINID
				JOIN RMTFINANCETYPES T3 ON T2.FINTYPE = T3.FINTYPE
				JOIN CUSTOMERS T4 ON T2.CUSTID = T4.CUSTID
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.14_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'payorderissueheader_aview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.15_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'payorderissueheader_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.15" author="Gopal.p">
		<createView viewName="PAYORDERISSUEHEADER_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T2.FINID,
					T2.FINREFERENCE,
					T4.CUSTCIF,
					T4.CUSTSHRTNAME,
					T3.FINTYPE,
					T3.FINTYPEDESC,
					T3.FINCATEGORY,
					T4.CUSTCRCPR,
					T1.TOTALPOAMOUNT,
					T1.TOTALPOCOUNT,
					T1.ISSUEDPOAMOUNT,
					T1.ISSUEDPOCOUNT,
					T1.PODUEAMOUNT,
					T1.PODUECOUNT,
					T2.FINCCY,
					T2.CUSTID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T3.ALWMULTIPARTYDISB,
					T2.FINISACTIVE
				FROM PAYORDERISSUEHEADER_TEMP T1
				JOIN (SELECT FINCCY, FINTYPE, CUSTID, FINID, FINREFERENCE, FINISACTIVE
						FROM FINANCEMAIN
						UNION ALL
						SELECT FINCCY, FINTYPE, CUSTID, FINID, FINREFERENCE, FINISACTIVE
						FROM FINANCEMAIN_TEMP
						WHERE NOT EXISTS (SELECT 1 FROM FINANCEMAIN WHERE FINANCEMAIN.FINID = FINANCEMAIN_TEMP.FINID)) T2 ON T1.FINID = T2.FINID
				JOIN RMTFINANCETYPES T3 ON T2.FINTYPE = T3.FINTYPE
				JOIN CUSTOMERS T4 ON T2.CUSTID = T4.CUSTID
				UNION ALL
				SELECT T2.FINID,
					T2.FINREFERENCE,
					T4.CUSTCIF,
					T4.CUSTSHRTNAME,
					T3.FINTYPE,
					T3.FINTYPEDESC,
					T3.FINCATEGORY,
					T4.CUSTCRCPR,
					T1.TOTALPOAMOUNT,
					T1.TOTALPOCOUNT,
					T1.ISSUEDPOAMOUNT,
					T1.ISSUEDPOCOUNT,
					T1.PODUEAMOUNT,
					T1.PODUECOUNT,
					T2.FINCCY,
					T2.CUSTID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T3.ALWMULTIPARTYDISB,
					T2.FINISACTIVE
				FROM PAYORDERISSUEHEADER T1
				JOIN (SELECT FINCCY, FINTYPE, CUSTID, FINID, FINREFERENCE, FINISACTIVE
						FROM FINANCEMAIN
						UNION ALL
						SELECT FINCCY, FINTYPE, CUSTID, FINID, FINREFERENCE, FINISACTIVE
						FROM FINANCEMAIN_TEMP
						WHERE NOT EXISTS (SELECT 1 FROM FINANCEMAIN WHERE FINID = FINANCEMAIN_TEMP.FINID)) T2 ON T1.FINID = T2.FINID
				JOIN RMTFINANCETYPES T3 ON T2.FINTYPE =T3.FINTYPE
				JOIN CUSTOMERS T4 ON T2.CUSTID = T4.CUSTID
				WHERE NOT EXISTS (SELECT 1 FROM PAYORDERISSUEHEADER_TEMP
					WHERE PAYORDERISSUEHEADER_TEMP.FINID = T1.FINID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.15_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'payorderissueheader_view');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.16_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'paymentheader_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.16" author="Gopal.p">
		<createView viewName="PAYMENTHEADER_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.PAYMENTID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.PAYMENTTYPE,
					T1.PAYMENTAMOUNT,
					T1.CREATEDON,
					T1.APPROVEDON,
					T1.STATUS,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					PI.PAYMENTTYPE PAYMENTINSTRTYPE
				FROM PAYMENTHEADER T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				LEFT JOIN PAYMENTINSTRUCTIONS PI ON T1.PAYMENTID = PI.PAYMENTID
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.16_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'paymentheader_aview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.17_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'paymentheader_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.17" author="Gopal.p">
		<createView viewName="PAYMENTHEADER_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.PAYMENTID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.PAYMENTTYPE,
					T1.PAYMENTAMOUNT,
					T1.CREATEDON,
					T1.APPROVEDON,
					T1.STATUS,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					PIT.PAYMENTTYPE PAYMENTINSTRTYPE
				FROM PAYMENTHEADER_TEMP T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				LEFT JOIN PAYMENTINSTRUCTIONS_TEMP PIT ON T1.PAYMENTID = PIT.PAYMENTID
				UNION ALL
				SELECT T1.PAYMENTID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.PAYMENTTYPE,
					T1.PAYMENTAMOUNT,
					T1.CREATEDON,
					T1.APPROVEDON,
					T1.STATUS,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					PI.PAYMENTTYPE PAYMENTINSTRTYPE
				FROM PAYMENTHEADER T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				LEFT JOIN PAYMENTINSTRUCTIONS PI ON T1.PAYMENTID = PI.PAYMENTID
				WHERE NOT EXISTS (SELECT 1 FROM PAYMENTHEADER_TEMP
					WHERE PAYMENTHEADER_TEMP.PAYMENTID = T1.PAYMENTID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.17_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'paymentheader_view');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.18_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'restructure_details_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.18" author="Gopal.p" dbms="postgresql,mssql">
		<createView viewName="RESTRUCTURE_DETAILS_VIEW" replaceIfExists="true"> 
			<![CDATA[
				SELECT T1.ID,
					FM.FINID,
					FM.FINREFERENCE,
				    RESTRUCTURETYPE,
				    EMIHLDPERIOD,
				    PRIHLDPERIOD,
				    EMIPERIODS,
				    TOTNOOFRESTRUCTURE,
				    RECALCULATIONTYPE,
				    SERVICEREQUESTNO,
				    REMARK,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    OLDBUCKET,
				    NEWBUCKET,
				    OLDEMIOS,
				    NEWEMIOS,
				    OLDBALTENURE,
				    NEWBALTENURE,
				    OLDMATURITY,
				    NEWMATURITY,
				    LASTBILLEDDATE,
				    LASTBILLEDINSTNO,
				    ACTLOANAMOUNT,
				    OLDTENURE,
				    NEWTENURE,
				    OLDINTEREST,
				    NEWINTEREST,
				    OLDMAXUNPLANNEDEMI,
				    NEWMAXUNPLANNEDEMI,
				    OLDAVAILEDUNPLANEMI,
				    NEWAVAILEDUNPLANEMI,
				    OLDFINALEMI,
				    NEWFINALEMI,
				    TENORCHANGE,
				    EMIRECAL,
				    RESTRUCTUREDATE,
				    RESTRUCTUREREASON,
				    OLDDPD,
				    NEWDPD,
				    OLDCPZINTEREST,
				    NEWCPZINTEREST,
				    EMIHLDSTARTDATE,
				    EMIHLDENDDATE,
				    PRIHLDSTARTDATE,
				    PRIHLDENDDATE,
				    OLDPOSAMOUNT, 
				    NEWPOSAMOUNT, 
				    OLDEMIOVERDUE, 
				    NEWEMIOVERDUE, 
				    BOUNCECHARGE, 
				    OLDPENALTYAMOUNT,
				    NEWPENALTYAMOUNT, 
				    OTHERCHARGE, 
				    RESTRUCTURECHARGE,
				    APPDATE,
					T2.RSTTYPECODE, 
					T2.RSTTYPEDESC, 
				    T1.FINCURRASSETVALUE,
				    OLDEXTODDAYS, 
				    NEWEXTODDAYS,
				    T1.REPAYPROFITRATE,
					T1.GRCMAXAMOUNT
				FROM RESTRUCTURE_DETAILS_TEMP T1 
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
			  	INNER JOIN RESTRUCTURE_TYPES T2 ON CAST(T1.RESTRUCTURETYPE AS BIGINT) = T2.ID
				UNION ALL	 
		 		SELECT T1.ID, 
				    FM.FINID,
					FM.FINREFERENCE,
				    RESTRUCTURETYPE,
				    EMIHLDPERIOD,
				    PRIHLDPERIOD,
				    EMIPERIODS,
				    TOTNOOFRESTRUCTURE,
				    RECALCULATIONTYPE,
				    SERVICEREQUESTNO,
				    REMARK,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    OLDBUCKET,
				    NEWBUCKET,
				    OLDEMIOS,
				    NEWEMIOS,
				    OLDBALTENURE,
				    NEWBALTENURE,
				    OLDMATURITY,
				    NEWMATURITY,
				    LASTBILLEDDATE,
				    LASTBILLEDINSTNO,
				    ACTLOANAMOUNT,
				    OLDTENURE,
				    NEWTENURE,
				    OLDINTEREST,
				    NEWINTEREST,
				    OLDMAXUNPLANNEDEMI,
				    NEWMAXUNPLANNEDEMI,
				    OLDAVAILEDUNPLANEMI,
				    NEWAVAILEDUNPLANEMI,
				    OLDFINALEMI,
				    NEWFINALEMI,
				    TENORCHANGE,
				    EMIRECAL,
				    RESTRUCTUREDATE,
				    RESTRUCTUREREASON,
				    OLDDPD,
				    NEWDPD,
				    OLDCPZINTEREST,
				    NEWCPZINTEREST,
				    EMIHLDSTARTDATE,
				    EMIHLDENDDATE,
				    PRIHLDSTARTDATE,
				    PRIHLDENDDATE,
				    OLDPOSAMOUNT, 
				    NEWPOSAMOUNT, 
				    OLDEMIOVERDUE, 
				    NEWEMIOVERDUE, 
				    BOUNCECHARGE, 
				    OLDPENALTYAMOUNT,
				    NEWPENALTYAMOUNT, 
				    OTHERCHARGE, 
				    RESTRUCTURECHARGE,
				    APPDATE,
					T2.RSTTYPECODE, 
					T2.RSTTYPEDESC, 
				    T1.FINCURRASSETVALUE,
				    OLDEXTODDAYS, 
				    NEWEXTODDAYS,
				    T1.REPAYPROFITRATE,
					T1.GRCMAXAMOUNT
				FROM RESTRUCTURE_DETAILS T1 
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				INNER JOIN RESTRUCTURE_TYPES T2 ON CAST(T1.RESTRUCTURETYPE AS BIGINT) = T2.ID
				WHERE NOT EXISTS (SELECT 1 FROM RESTRUCTURE_DETAILS_TEMP WHERE ID = T1.ID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.18" author="Gopal.p" dbms="oracle">
		<createView viewName="RESTRUCTURE_DETAILS_VIEW" replaceIfExists="true"> 
			<![CDATA[
				SELECT T1.ID,
					FM.FINID,
					FM.FINREFERENCE,
				    RESTRUCTURETYPE,
				    EMIHLDPERIOD,
				    PRIHLDPERIOD,
				    EMIPERIODS,
				    TOTNOOFRESTRUCTURE,
				    RECALCULATIONTYPE,
				    SERVICEREQUESTNO,
				    REMARK,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    OLDBUCKET,
				    NEWBUCKET,
				    OLDEMIOS,
				    NEWEMIOS,
				    OLDBALTENURE,
				    NEWBALTENURE,
				    OLDMATURITY,
				    NEWMATURITY,
				    LASTBILLEDDATE,
				    LASTBILLEDINSTNO,
				    ACTLOANAMOUNT,
				    OLDTENURE,
				    NEWTENURE,
				    OLDINTEREST,
				    NEWINTEREST,
				    OLDMAXUNPLANNEDEMI,
				    NEWMAXUNPLANNEDEMI,
				    OLDAVAILEDUNPLANEMI,
				    NEWAVAILEDUNPLANEMI,
				    OLDFINALEMI,
				    NEWFINALEMI,
				    TENORCHANGE,
				    EMIRECAL,
				    RESTRUCTUREDATE,
				    RESTRUCTUREREASON,
				    OLDDPD,
				    NEWDPD,
				    OLDCPZINTEREST,
				    NEWCPZINTEREST,
				    EMIHLDSTARTDATE,
				    EMIHLDENDDATE,
				    PRIHLDSTARTDATE,
				    PRIHLDENDDATE,
				    OLDPOSAMOUNT, 
				    NEWPOSAMOUNT, 
				    OLDEMIOVERDUE, 
				    NEWEMIOVERDUE, 
				    BOUNCECHARGE, 
				    OLDPENALTYAMOUNT,
				    NEWPENALTYAMOUNT, 
				    OTHERCHARGE, 
				    RESTRUCTURECHARGE,
				    APPDATE,
					T2.RSTTYPECODE, 
					T2.RSTTYPEDESC, 
				    T1.FINCURRASSETVALUE,
				    OLDEXTODDAYS, 
				    NEWEXTODDAYS,
				    T1.REPAYPROFITRATE,
					T1.GRCMAXAMOUNT
				FROM RESTRUCTURE_DETAILS_TEMP T1 
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
			  	INNER JOIN RESTRUCTURE_TYPES T2 ON CAST(T1.RESTRUCTURETYPE AS number) = T2.ID
				UNION ALL	 
		 		SELECT T1.ID, 
				    FM.FINID,
					FM.FINREFERENCE,
				    RESTRUCTURETYPE,
				    EMIHLDPERIOD,
				    PRIHLDPERIOD,
				    EMIPERIODS,
				    TOTNOOFRESTRUCTURE,
				    RECALCULATIONTYPE,
				    SERVICEREQUESTNO,
				    REMARK,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    OLDBUCKET,
				    NEWBUCKET,
				    OLDEMIOS,
				    NEWEMIOS,
				    OLDBALTENURE,
				    NEWBALTENURE,
				    OLDMATURITY,
				    NEWMATURITY,
				    LASTBILLEDDATE,
				    LASTBILLEDINSTNO,
				    ACTLOANAMOUNT,
				    OLDTENURE,
				    NEWTENURE,
				    OLDINTEREST,
				    NEWINTEREST,
				    OLDMAXUNPLANNEDEMI,
				    NEWMAXUNPLANNEDEMI,
				    OLDAVAILEDUNPLANEMI,
				    NEWAVAILEDUNPLANEMI,
				    OLDFINALEMI,
				    NEWFINALEMI,
				    TENORCHANGE,
				    EMIRECAL,
				    RESTRUCTUREDATE,
				    RESTRUCTUREREASON,
				    OLDDPD,
				    NEWDPD,
				    OLDCPZINTEREST,
				    NEWCPZINTEREST,
				    EMIHLDSTARTDATE,
				    EMIHLDENDDATE,
				    PRIHLDSTARTDATE,
				    PRIHLDENDDATE,
				    OLDPOSAMOUNT, 
				    NEWPOSAMOUNT, 
				    OLDEMIOVERDUE, 
				    NEWEMIOVERDUE, 
				    BOUNCECHARGE, 
				    OLDPENALTYAMOUNT,
				    NEWPENALTYAMOUNT, 
				    OTHERCHARGE, 
				    RESTRUCTURECHARGE,
				    APPDATE,
					T2.RSTTYPECODE, 
					T2.RSTTYPEDESC, 
				    T1.FINCURRASSETVALUE,
				    OLDEXTODDAYS, 
				    NEWEXTODDAYS,
				    T1.REPAYPROFITRATE,
					T1.GRCMAXAMOUNT
				FROM RESTRUCTURE_DETAILS T1 
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				INNER JOIN RESTRUCTURE_TYPES T2 ON CAST(T1.RESTRUCTURETYPE AS number) = T2.ID
				WHERE NOT EXISTS (SELECT 1 FROM RESTRUCTURE_DETAILS_TEMP WHERE ID = T1.ID)
			]]>
		</createView>
	</changeSet>


	<changeSet id="ST#2367.18_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'restructure_details_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.19_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'restructure_details_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.19" author="Gopal.p" dbms="postgresql,mssql">
		<createView viewName="RESTRUCTURE_DETAILS_AVIEW" replaceIfExists="true"> 
			<![CDATA[
		 		 SELECT T1.ID,
					FM.FINID,
					FM.FINREFERENCE,
					RESTRUCTURETYPE,
					EMIHLDPERIOD,
					PRIHLDPERIOD,
					EMIPERIODS,
					TOTNOOFRESTRUCTURE,
					RECALCULATIONTYPE,
					SERVICEREQUESTNO,
					REMARK,
					T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
					OLDBUCKET,
					NEWBUCKET,
					OLDEMIOS,
					NEWEMIOS,
					OLDBALTENURE,
					NEWBALTENURE,
					OLDMATURITY,
					NEWMATURITY,
					LASTBILLEDDATE,
					LASTBILLEDINSTNO,
					ACTLOANAMOUNT,
					OLDTENURE,
					NEWTENURE,
					OLDINTEREST,
					NEWINTEREST,
					OLDMAXUNPLANNEDEMI,
					NEWMAXUNPLANNEDEMI,
					OLDAVAILEDUNPLANEMI,
					NEWAVAILEDUNPLANEMI,
					OLDFINALEMI,
					NEWFINALEMI,
					TENORCHANGE,
					EMIRECAL, 
					RESTRUCTUREDATE,
					RESTRUCTUREREASON,
					OLDDPD,
					NEWDPD,
					OLDCPZINTEREST,
					NEWCPZINTEREST,
					EMIHLDSTARTDATE,
					EMIHLDENDDATE,
					PRIHLDSTARTDATE,
					PRIHLDENDDATE,
					OLDPOSAMOUNT, 
					NEWPOSAMOUNT, 
					OLDEMIOVERDUE,
					NEWEMIOVERDUE, 
					BOUNCECHARGE,
					OLDPENALTYAMOUNT, 
					NEWPENALTYAMOUNT, 
					OTHERCHARGE,
					RESTRUCTURECHARGE,
					APPDATE,
				 	T2.RSTTYPECODE,
				 	T2.RSTTYPEDESC,
		    		T1.FINCURRASSETVALUE, 
					OLDEXTODDAYS,
					NEWEXTODDAYS,
					T1.REPAYPROFITRATE,
				 	T1.GRCMAXAMOUNT
				FROM RESTRUCTURE_DETAILS T1 
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				INNER JOIN RESTRUCTURE_TYPES T2 ON CAST(T1.RESTRUCTURETYPE AS BIGINT) = T2.ID 
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.19" author="Gopal.p" dbms="oracle">
		<createView viewName="RESTRUCTURE_DETAILS_AVIEW" replaceIfExists="true"> 
			<![CDATA[
		 		 SELECT T1.ID,
					FM.FINID,
					FM.FINREFERENCE,
					RESTRUCTURETYPE,
					EMIHLDPERIOD,
					PRIHLDPERIOD,
					EMIPERIODS,
					TOTNOOFRESTRUCTURE,
					RECALCULATIONTYPE,
					SERVICEREQUESTNO,
					REMARK,
					T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
					OLDBUCKET,
					NEWBUCKET,
					OLDEMIOS,
					NEWEMIOS,
					OLDBALTENURE,
					NEWBALTENURE,
					OLDMATURITY,
					NEWMATURITY,
					LASTBILLEDDATE,
					LASTBILLEDINSTNO,
					ACTLOANAMOUNT,
					OLDTENURE,
					NEWTENURE,
					OLDINTEREST,
					NEWINTEREST,
					OLDMAXUNPLANNEDEMI,
					NEWMAXUNPLANNEDEMI,
					OLDAVAILEDUNPLANEMI,
					NEWAVAILEDUNPLANEMI,
					OLDFINALEMI,
					NEWFINALEMI,
					TENORCHANGE,
					EMIRECAL, 
					RESTRUCTUREDATE,
					RESTRUCTUREREASON,
					OLDDPD,
					NEWDPD,
					OLDCPZINTEREST,
					NEWCPZINTEREST,
					EMIHLDSTARTDATE,
					EMIHLDENDDATE,
					PRIHLDSTARTDATE,
					PRIHLDENDDATE,
					OLDPOSAMOUNT, 
					NEWPOSAMOUNT, 
					OLDEMIOVERDUE,
					NEWEMIOVERDUE, 
					BOUNCECHARGE,
					OLDPENALTYAMOUNT, 
					NEWPENALTYAMOUNT, 
					OTHERCHARGE,
					RESTRUCTURECHARGE,
					APPDATE,
				 	T2.RSTTYPECODE,
				 	T2.RSTTYPEDESC,
		    		T1.FINCURRASSETVALUE, 
					OLDEXTODDAYS,
					NEWEXTODDAYS,
					T1.REPAYPROFITRATE,
				 	T1.GRCMAXAMOUNT
				FROM RESTRUCTURE_DETAILS T1 
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				INNER JOIN RESTRUCTURE_TYPES T2 ON CAST(T1.RESTRUCTURETYPE AS number) = T2.ID 
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.19_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'restructure_details_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.20.1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'covenantsmaintenance_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.20.1" author="Gopal.p" dbms="postgresql">
		<createView viewName="COVENANTSMAINTENANCE_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINID,
					T1.FINREFERENCE,
					T1.FINBRANCH,
					T1.FINTYPE,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.FINSTARTDATE,
					T1.NUMBEROFTERMS,
					T1.CUSTID,
					T1.FINAMOUNT,
					T1.MATURITYDATE,
					T1.FINREPAYMENTAMOUNT,
					T1.FINISACTIVE,
					T1.BLACKLISTED,
					T1.FEECHARGEAMT,
					T1.GRACETERMS,
					T1.ALLOWGRCPERIOD,
					T1.GRCPERIODENDDATE,
					T1.ALWMULTIDISB,
					T1.DEFFERMENTS,
					T1.ALLOWGRCPFTRVW,
					T1.ALLOWREPAYRVW,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.MIGRATEDFINANCE,
					T1.CLOSINGSTATUS,
					T1.REPAYRATEBASIS,
					T1.MANUALSCHEDULE,
					T1.FINCURRASSETVALUE,
					T1.AVAILEDUNPLANEMI,
					T1.AVAILEDREAGEH,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.DOWNPAYMENT,
					T1.PLANEMIHALW,
					T1.CALTERMS,
					T1.RATECHGANYDAY,
					T1.FINASSETVALUE,
					T2.CUSTCIF LOVDESCCUSTCIF,
					T3.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
					T3.FINDIVISION LOVDESCFINDIVISION,
					T3.FINCATEGORY LOVDESCPRODUCTCODENAME,
					T4.PRODUCTCATEGORY,
					COALESCE(T9.NOINST,0) NOINST,
					COALESCE(T5.ROLEDESC, ${ADD.SCHEMA}FN_GET_ROLEDESC(T10.NEXTROLECODE))  LOVDESCREQUESTSTAGE,
					T10.FINMAINTAINID,
					T10.EVENT RCDMAINTAINSTS,
					T10.NEXTROLECODE,
					T10.RECORDSTATUS,
					T10.RECORDTYPE,
					T1.VERSION
				FROM FINMAINTAININSTRUCTIONS_TEMP T10
				JOIN FINANCEMAIN T1 ON T1.FINID = T10.FINID
				JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
				JOIN RMTFINANCETYPES T3 ON T1.FINTYPE = T3.FINTYPE
				LEFT JOIN SECROLES T5 ON T10.NEXTROLECODE = T5.ROLECD
				JOIN BMTPRODUCT T4 ON T3.FINCATEGORY = T4.PRODUCTCODE
				LEFT JOIN FINPFTDETAILS T9 ON T1.FINID = T9.FINID
				WHERE T10.EVENT = 'Covenants'
				UNION ALL
				SELECT T1.FINID,
					T1.FINREFERENCE,
					T1.FINBRANCH,
					T1.FINTYPE,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.FINSTARTDATE,
					T1.NUMBEROFTERMS,
					T1.CUSTID,
					T1.FINAMOUNT,
					T1.MATURITYDATE,
					T1.FINREPAYMENTAMOUNT,
					T1.FINISACTIVE,
					T1.BLACKLISTED,
					T1.FEECHARGEAMT,
					T1.GRACETERMS,
					T1.ALLOWGRCPERIOD,
					T1.GRCPERIODENDDATE,
					T1.ALWMULTIDISB,
					T1.DEFFERMENTS,
					T1.ALLOWGRCPFTRVW,
					T1.ALLOWREPAYRVW,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.MIGRATEDFINANCE,
					T1.CLOSINGSTATUS,
					T1.REPAYRATEBASIS,
					T1.MANUALSCHEDULE,
					T1.FINCURRASSETVALUE,
					T1.AVAILEDUNPLANEMI,
					T1.AVAILEDREAGEH,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.DOWNPAYMENT,
					T1.PLANEMIHALW,
					T1.CALTERMS,
					T1.RATECHGANYDAY,
					T1.FINASSETVALUE,
					T2.CUSTCIF LOVDESCCUSTCIF,
					T3.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
					T3.FINDIVISION LOVDESCFINDIVISION,
					T3.FINCATEGORY LOVDESCPRODUCTCODENAME,
					T4.PRODUCTCATEGORY,
					COALESCE(T9.NOINST,0) NOINST,
					NULL LOVDESCREQUESTSTAGE,
					NULL FINMAINTAINID,
					NULL RCDMAINTAINSTS,
					NULL NEXTROLECODE,
					NULL RECORDSTATUS,
					NULL RECORDTYPE,
					T1.VERSION
				FROM FINANCEMAIN T1
				JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
				JOIN RMTFINANCETYPES T3 ON T1.FINTYPE = T3.FINTYPE
				LEFT JOIN SECROLES T5 ON T1.NEXTROLECODE = T5.ROLECD
				JOIN BMTPRODUCT T4 ON T3.FINCATEGORY = T4.PRODUCTCODE
				LEFT JOIN FINPFTDETAILS T9 ON T1.FINID = T9.FINID
				WHERE NOT (EXISTS ( SELECT 1 FROM FINMAINTAININSTRUCTIONS_TEMP
					WHERE FINMAINTAININSTRUCTIONS_TEMP.FINID = T1.FINID))
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.20.1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'covenantsmaintenance_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.21_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finliabilityreq_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.21" author="Gopal.p">
		<createView viewName="FINLIABILITYREQ_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ID,
					T2.FINID,
					T2.FINREFERENCE,
					T1.INITIATEDBY,
					T1.FINEVENT,
					T1.INSPAIDSTATUS,
					T1.INSCLAIMAMOUNT,
					T1.INSCLAIMREASON,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINTYPE,
					T2.FINBRANCH,
					T2.FINSTARTDATE,
					T2.NUMBEROFTERMS,
					T2.MATURITYDATE,
					T2.FINCCY,
					T2.FINAMOUNT,
					T2.FINASSETVALUE,
					T4.CUSTCIF,
					T4.CUSTSHRTNAME,
					T5.BRANCHDESC,
					T6.FINDIVISION LOVDESCFINDIVISION
				FROM FINLIABILITYREQ_TEMP T1
				JOIN FINANCEMAIN T2 ON T1.FINID = T2.FINID
				JOIN CUSTOMERS T4 ON T2.CUSTID = T4.CUSTID
				JOIN RMTBRANCHES T5 ON T2.FINBRANCH = T5.BRANCHCODE
				JOIN RMTFINANCETYPES T6 ON T2.FINTYPE = T6.FINTYPE
				UNION ALL
				SELECT T1.ID,
					T2.FINID,
					T2.FINREFERENCE,
					T1.INITIATEDBY,
					T1.FINEVENT,
					T1.INSPAIDSTATUS,
					T1.INSCLAIMAMOUNT,
					T1.INSCLAIMREASON,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINTYPE,
					T2.FINBRANCH,
					T2.FINSTARTDATE,
					T2.NUMBEROFTERMS,
					T2.MATURITYDATE,
					T2.FINCCY,
					T2.FINAMOUNT,
					T2.FINASSETVALUE,
					T4.CUSTCIF,
					T4.CUSTSHRTNAME,
					T5.BRANCHDESC,
					T6.FINDIVISION LOVDESCFINDIVISION
				FROM FINLIABILITYREQ T1
				JOIN FINANCEMAIN T2 ON T1.FINID = T2.FINID
				JOIN CUSTOMERS T4 ON T2.CUSTID = T4.CUSTID
				JOIN RMTBRANCHES T5 ON T2.FINBRANCH = T5.BRANCHCODE
				JOIN RMTFINANCETYPES T6 ON T2.FINTYPE = T6.FINTYPE
				WHERE NOT EXISTS (SELECT 1 FROM FINLIABILITYREQ_TEMP WHERE FINLIABILITYREQ_TEMP.ID = T1.ID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.21_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finliabilityreq_view');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.22.1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
		<![CDATA[
			select deps_save_and_drop_dependencies('plf','customerfinancedetails_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.22.1" author="Gopal.p">
		<createView viewName="CUSTOMERFINANCEDETAILS_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINID,
					T1.FINREFERENCE,
					T1.FINBRANCH,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.FINTYPE,
					T1.FINAMOUNT,
					T1.DOWNPAYMENT,
					T1.FEECHARGEAMT,
					T1.FINSTARTDATE,
					T1.LASTMNTBY,
					T1.FINCCY,
					T1.RECORDTYPE,
					T1.FINASSETVALUE,
					T2.CUSTID,
					T2.CUSTCIF,
					T2.CUSTSHRTNAME,
					T3.ROLEDESC PRVROLEDESC,
					COALESCE(T4.ROLEDESC,${add.schema}FN_GET_ROLEDESC(T1.NEXTROLECODE)) NEXTROLEDESC,
					T6.DEPTDESC,
					T7.USRFNAME,
					T7.USRLNAME LASTMNTBYUSER,
					T9.FINTYPEDESC,
					T9.FINDIVISION LOVDESCFINDIVISION,
					T1.FIRSTREPAY,
					T1.NUMBEROFTERMS
				FROM FINANCEMAIN_TEMP T1
				JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
				LEFT JOIN SECROLES T3 ON T3.ROLECD = T1.ROLECODE
				LEFT JOIN SECROLES T4 ON T4.ROLECD = T1.NEXTROLECODE
				LEFT JOIN SECUSERS T5 ON T5.USRID = T1.LASTMNTBY
				LEFT JOIN BMTDEPARTMENTS T6 ON T6.DEPTCODE = T5.USRDEPTCODE
				LEFT JOIN SECUSERS T7 ON T1.LASTMNTBY = T7.USRID
				LEFT JOIN RMTFINANCETYPES T9 ON T1.FINTYPE = T9.FINTYPE
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.22.1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies('plf','customerfinancedetails_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.23.1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
		<![CDATA[
			select deps_save_and_drop_dependencies('plf','customerfinancedetails_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.23.1" author="Gopal.p">
		<createView viewName="CUSTOMERFINANCEDETAILS_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FM.FINID,
					FM.FINREFERENCE,
					FM.FINBRANCH,
					FM.ROLECODE,
					FM.NEXTROLECODE,
					FM.RECORDTYPE,
					FM.FINCCY,
					FM.FINTYPE,
					FM.FINAMOUNT,
					FM.DOWNPAYMENT,
					FM.FEECHARGEAMT,
					FM.FINSTARTDATE,
					FM.LASTMNTBY,
					FM.FINASSETVALUE,
					C.CUSTCIF,
					C.CUSTSHRTNAME,
					'' PRVROLEDESC,
					'' NEXTROLEDESC,
					C.CUSTID,
					D.DEPTDESC,
					U.USRFNAME,
					U.USRLNAME LASTMNTBYUSER,
					FT.FINTYPEDESC,
					FT.FINDIVISION LOVDESCFINDIVISION,
					FM.FIRSTREPAY,
					FM.NUMBEROFTERMS
				FROM FINANCEMAIN FM
				JOIN RMTFINANCETYPES FT ON FT.FINTYPE = FM.FINTYPE
				JOIN CUSTOMERS C ON C.CUSTID = FM.CUSTID
				JOIN SECUSERS U ON U.USRID = FM.LASTMNTBY
				JOIN BMTDEPARTMENTS D ON D.DEPTCODE = U.USRDEPTCODE
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.23.1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies('plf','customerfinancedetails_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.24.1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies('plf','finsusphead_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.24.1" author="Gopal.p">
		<createView viewName="FINSUSPHEAD_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINID,	
					T2.FINREFERENCE,
					T1.FINBRANCH,
					T1.FINTYPE,
					T1.CUSTID,
					T1.FINSUSPSEQ,
					T1.FINISINSUSP,
					T1.MANUALSUSP,
					T1.FINSUSPDATE,
					T1.FINSUSPTRFDATE,
					T1.FINSUSPAMT,
					T1.FINCURSUSPAMT,
					T4.CUSTCIF LOVDESCCUSTCIFNAME,
					T4.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
					T1.VERSION,
					T1.LASTMNTON,
					T1.LASTMNTBY,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T5.FINDIVISION LOVDESCFINDIVISION,
					T2.FINCCY
				FROM FINSUSPHEAD_TEMP T1
				JOIN FINANCEMAIN T2 ON T1.FINID = T2.FINID
				LEFT JOIN CUSTOMERS T4 ON T1.CUSTID = T4.CUSTID
				JOIN RMTFINANCETYPES T5 ON T2.FINTYPE = T5.FINTYPE
				UNION ALL
				SELECT T2.FINID,
					T2.FINREFERENCE,
					T1.FINBRANCH,
					T1.FINTYPE,
					T1.CUSTID,
					T1.FINSUSPSEQ,
					T1.FINISINSUSP,
					T1.MANUALSUSP,
					T1.FINSUSPDATE,
					T1.FINSUSPTRFDATE,
					T1.FINSUSPAMT,
					T1.FINCURSUSPAMT,
					T4.CUSTCIF LOVDESCCUSTCIFNAME,
					T4.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
					T1.VERSION,
					T1.LASTMNTON,
					T1.LASTMNTBY,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T5.FINDIVISION LOVDESCFINDIVISION,
					T2.FINCCY
				FROM FINSUSPHEAD T1
				JOIN FINANCEMAIN T2 ON T1.FINID =  T2.FINID
				LEFT JOIN CUSTOMERS T4 ON T1.CUSTID = T4.CUSTID
				JOIN RMTFINANCETYPES T5 ON T2.FINTYPE = T5.FINTYPE
				WHERE NOT (EXISTS ( SELECT 1 FROM FINSUSPHEAD_TEMP
					WHERE FINSUSPHEAD_TEMP.FINID = T1.FINID))
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.24.1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies('plf','finsusphead_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.25.1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
		<![CDATA[
			select deps_save_and_drop_dependencies('plf','finsusphead_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.25.1" author="Gopal.p">
		<createView viewName="FINSUSPHEAD_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T2.FINID,
					T2.FINREFERENCE,
					T1.FINBRANCH,
					T1.FINTYPE,
					T1.CUSTID,
					T1.FINSUSPSEQ,
					T1.FINISINSUSP,
					T1.MANUALSUSP,
					T1.FINSUSPDATE,
					T1.FINSUSPTRFDATE,
					T1.FINSUSPAMT,
					T1.FINCURSUSPAMT,
					T3.CCYEDITFIELD LOVDESCFINFORMATTER,
					T4.CUSTCIF LOVDESCCUSTCIFNAME,
					T4.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
					T1.VERSION,
					T1.LASTMNTON,
					T1.LASTMNTBY,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM FINSUSPHEAD T1
				JOIN FINANCEMAIN T2 ON T1.FINID = T2.FINID
				JOIN RMTCURRENCIES T3 ON T2.FINCCY = T3.CCYCODE
				LEFT JOIN CUSTOMERS T4 ON T1.CUSTID = T4.CUSTID
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.25.1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies('plf','finsusphead_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.26_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemainmaintenance_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.26" author="Gopal.p">
		<createView viewName="FINANCEMAINMAINTENANCE_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINID,
					T1.FINREFERENCE,
					T1.FINTYPE,
					T1.FINCCY,
					T1.CALROUNDINGMODE,
					T1.ROUNDINGTARGET,
					T1.FINBRANCH,
					T1.CUSTID,
					T1.FINSTARTDATE,
					T1.MATURITYDATE,
					T1.CLOSINGSTATUS
				FROM FINANCEMAIN_TEMP T1
				UNION ALL
				SELECT T1.FINID,
					T1.FINREFERENCE,
					T1.FINTYPE,
					T1.FINCCY,
					T1.CALROUNDINGMODE,
					T1.ROUNDINGTARGET,
					T1.FINBRANCH,
					T1.CUSTID,
					T1.FINSTARTDATE,
					T1.MATURITYDATE,
					T1.CLOSINGSTATUS
				FROM FINANCEMAIN T1
				WHERE NOT EXISTS (SELECT 1 FROM FINANCEMAIN_TEMP WHERE FINANCEMAIN_TEMP.FINID= T1.FINID)
		   ]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.26_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemainmaintenance_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.27_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finfeecharges_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.27" author="Gopal.p">
		<createView viewName="FINFEECHARGES_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FC.FINID,
					FC.FINREFERENCE,
					FC.SCHDATE,
					FC.FEECODE,
					FC.FEECODEDESC,
					FC.FEEORDER,
					FC.FEEAMOUNT,
					FC.WAIVERAMOUNT,
					FC.PAIDAMOUNT,
					FC.SEQNO,
					FC.ALLOWWAIVER,
					FC.WAIVERPERC,
					FC.EXCLUDEFROMRPT,
					FC.CALFEEMODIFY,
					FC.CALFEEAMOUNT,
					FC.FEETOFINANCE,
					FC.FINEVENT,
					FC.FEEMETHOD,
					FC.SCHEDULETERMS
				FROM FINFEECHARGES_TEMP FC
		   ]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.27_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finfeecharges_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.28_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finfeecharges_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.28" author="Gopal.p">
		<createView viewName="FINFEECHARGES_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FC.FINID,
					FC.FINREFERENCE,
					FC.SCHDATE,
					FC.FEECODE,
					FC.FEECODEDESC,
					FC.FEEORDER,
					FC.FEEAMOUNT,
					FC.WAIVERAMOUNT,
					FC.PAIDAMOUNT,
					FC.SEQNO,
					FC.ALLOWWAIVER,
					FC.WAIVERPERC,
					FC.EXCLUDEFROMRPT,
					FC.CALFEEMODIFY,
					FC.CALFEEAMOUNT,
					FC.FEETOFINANCE,
					FC.FINEVENT,
					FC.FEEMETHOD,
					FC.SCHEDULETERMS
				 FROM FINFEECHARGES_TEMP FC
		   ]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.28_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finfeecharges_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.29_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finfeeconfig_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.29" author="Gopal.p">
		<createView viewName="FINFEECONFIG_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINTYPEFEEID,
					T1.FINID,
					T1.FINREFERENCE,
					T1.ORIGINATIONFEE,
					T1.FINEVENT,
					T1.FEETYPEID,
					T1.FEEORDER,
					T1.FEESCHEDULEMETHOD,
					T1.CALCULATIONTYPE,
					T1.RULECODE,
					T1.AMOUNT,
					T1.PERCENTAGE,
					T1.CALCULATEON,
					T1.ALWDEVIATION,
					T1.MAXWAIVERPERC,
					T1.ALWMODIFYFEE,
					T1.ALWMODIFYFEESCHDMTHD,
					T1.MODULEID,
					T1.ALWPREINCOMIZATION,
					T2.FEETYPECODE,
					T2.FEETYPEDESC,
					CASE WHEN T3.RULECODEDESC IS NOT NULL THEN T3.RULECODEDESC
						WHEN T4.RULECODEDESC IS NOT NULL THEN T4.RULECODEDESC
						ELSE '' END RULEDESC,
					T1.REFERENCEID,
					T2.TAXAPPLICABLE,
					T2.TAXCOMPONENT,
					T1.PERCTYPE,
					T1.PERCRULE,
					T1.PERCRULEID
				FROM FINFEECONFIG T1
				JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
				LEFT JOIN RULES T3 ON T1.PERCRULEID = T3.RULEID
				LEFT JOIN RULES T4 ON T1.RULECODE = T4.RULECODE AND T4.RULEMODULE = 'FEES' AND T1.FINEVENT = T4.RULEEVENT
				WHERE T1.FINEVENT = T1.FINEVENT AND T1.FEETYPEID = T1.FEETYPEID AND T1.ORIGINATIONFEE = T1.ORIGINATIONFEE
		   ]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.29_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finfeeconfig_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.30_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finfeerefundheader_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.30" author="Gopal.p">
		<createView viewName="FINFEEREFUNDHEADER_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.HEADERID,
					T2.FINID,
					T2.FINREFERENCE,
					T1.LINKEDTRANID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINTYPE,
					T2.FINBRANCH,
					T2.CUSTID,
					T2.FINCCY,
					T3.CUSTCIF LOVDESCCUSTCIF,
					T3.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
					T4.FINTYPEDESC,
					T5.BRANCHDESC,
					T2.TDSAPPLICABLE FINTDSAPPLICABLE
				FROM FINFEEREFUNDHEADER_TEMP T1
				LEFT JOIN (SELECT FINID, FINREFERENCE, FINTYPE, FINBRANCH, CUSTID, FINCCY, TDSAPPLICABLE FROM FINANCEMAIN 
					UNION ALL 
					SELECT FINID, FINREFERENCE, FINTYPE, FINBRANCH, CUSTID, FINCCY, TDSAPPLICABLE FROM FINANCEMAIN_TEMP) T2 ON T2.FINID = T1.FINID
				LEFT JOIN CUSTOMERS T3 ON T3.CUSTID = T2.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T4.FINTYPE = T2.FINTYPE
				LEFT JOIN RMTBRANCHES T5 ON T2.FINBRANCH = T5.BRANCHCODE
				UNION ALL
				SELECT T1.HEADERID,
					T2.FINID,
					T2.FINREFERENCE,
					T1.LINKEDTRANID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINTYPE,
					T2.FINBRANCH,
					T2.CUSTID,
					T2.FINCCY,
					T3.CUSTCIF LOVDESCCUSTCIF,
					T3.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
					T4.FINTYPEDESC,
					T5.BRANCHDESC,
					T2.TDSAPPLICABLE FINTDSAPPLICABLE
				FROM FINFEEREFUNDHEADER T1
				LEFT JOIN (SELECT FINID, FINREFERENCE, FINTYPE, FINBRANCH, CUSTID, FINCCY, TDSAPPLICABLE FROM FINANCEMAIN 
					UNION ALL 
					SELECT FINID, FINREFERENCE, FINTYPE, FINBRANCH, CUSTID, FINCCY, TDSAPPLICABLE FROM FINANCEMAIN_TEMP) T2 ON T2.FINID = T1.FINID
				LEFT JOIN CUSTOMERS T3 ON T3.CUSTID = T2.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T4.FINTYPE = T2.FINTYPE
				LEFT JOIN RMTBRANCHES T5 ON T2.FINBRANCH = T5.BRANCHCODE
				WHERE NOT EXISTS (SELECT 1 FROM FINFEEREFUNDHEADER_TEMP
					WHERE FINFEEREFUNDHEADER_TEMP.HEADERID = T1.HEADERID)
		   ]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.30_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finfeerefundheader_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.31_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finfeerefundheader_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.31" author="Gopal.p">
		<createView viewName="FINFEEREFUNDHEADER_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.HEADERID,
					T2.FINID,
					T2.FINREFERENCE,
					T1.LINKEDTRANID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINTYPE,
					T2.FINBRANCH,
					T2.CUSTID,
					T2.FINCCY,
					T3.CUSTCIF LOVDESCCUSTCIF,
					T3.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
					T4.FINTYPEDESC,
					T5.BRANCHDESC
				FROM FINFEEREFUNDHEADER_TEMP T1
				LEFT JOIN (SELECT FINID, FINREFERENCE, FINTYPE, FINBRANCH, CUSTID, FINCCY, TDSAPPLICABLE FROM FINANCEMAIN 
					UNION ALL 
					SELECT FINID, FINREFERENCE, FINTYPE, FINBRANCH, CUSTID, FINCCY, TDSAPPLICABLE FROM FINANCEMAIN_TEMP) T2 ON T2.FINID = T1.FINID
				LEFT JOIN CUSTOMERS T3 ON T3.CUSTID = T2.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T4.FINTYPE = T2.FINTYPE
				LEFT JOIN RMTBRANCHES T5 ON T2.FINBRANCH = T5.BRANCHCODE
		   ]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.31_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finfeerefundheader_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.32_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finfeerefundheader_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.32" author="Gopal.p">
		<createView viewName="FINFEEREFUNDHEADER_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.HEADERID,
					T2.FINID,
					T2.FINREFERENCE,
					T1.LINKEDTRANID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINTYPE,
					T2.FINBRANCH,
					T2.CUSTID,
					T2.FINCCY,
					T3.CUSTCIF LOVDESCCUSTCIF,
					T3.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
					T4.FINTYPEDESC,
					T5.BRANCHDESC
				FROM FINFEEREFUNDHEADER T1
				LEFT JOIN (SELECT FINID, FINREFERENCE, FINTYPE, FINBRANCH, CUSTID, FINCCY, TDSAPPLICABLE FROM FINANCEMAIN 
					UNION ALL 
					SELECT FINID, FINREFERENCE, FINTYPE, FINBRANCH, CUSTID, FINCCY, TDSAPPLICABLE FROM FINANCEMAIN_TEMP) T2 ON T2.FINID = T1.FINID
				LEFT JOIN CUSTOMERS T3 ON T3.CUSTID = T2.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T4.FINTYPE = T2.FINTYPE
				LEFT JOIN RMTBRANCHES T5 ON T2.FINBRANCH = T5.BRANCHCODE
		   ]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.32_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finfeerefundheader_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.33_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'int_disbursement_request_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.33" author="Gopal.p">
		<createView viewName="INT_DISBURSEMENT_REQUEST_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FA.PAYMENTID,
					FM.FINID,
					FM.FINREFERENCE,
					FA.PAYMENTDETAIL,
					'D' CHANNEL,
					MANUFACTURERID PROVIDERID,
					CASE WHEN FA.PAYMENTTYPE = 'NEFT' THEN 'N'
						WHEN FA.PAYMENTTYPE = 'RTGS' THEN 'R'
						WHEN FA.PAYMENTTYPE = 'DD' THEN 'D'
						WHEN FA.PAYMENTTYPE = 'CHEQUE' THEN 'C'
						WHEN FA.PAYMENTTYPE = 'IFT' THEN 'I'
						ELSE FA.PAYMENTTYPE END DISBURSEMENT_TYPE,
					FA.AMTTOBERELEASED,
					FA.DISBDATE,
					FA.LLDATE,
					FA.PAYABLELOC,
					FA.PRINTINGLOC,
					FA.LLREFERENCENO CHEQUE_NUMBER,
					CU.CUSTCIF,
					CU.CUSTSHRTNAME,
					'' CUSTOMER_MOBILE,
					CE.CUSTEMAIL CUSTOMER_EMAIL,
					CS.CPPROVINCENAME CUSTOMER_STATE,
					CC.PCCITYNAME CUSTOMER_CITY,
					'' CUSTOMER_ADDRESS1,
					'' CUSTOMER_ADDRESS2,
					'' CUSTOMER_ADDRESS3,
					'' CUSTOMER_ADDRESS4,
					'' CUSTOMER_ADDRESS5,
					BD.BANKNAME,
					BB.BRANCHCODE,
					BB.BRANCHDESC,
					PBD.CPPROVINCENAME BENFICIARY_BRANCH_STATE,
					PBD.PCCITYNAME BENFICIARY_BRANCH_CITY,
					BB.MICR MICR_CODE,
					BB.IFSC IFSC_CODE,
					FA.BENEFICIARYACCNO,
					CASE WHEN FA.PAYMENTTYPE = 'CHEQUE' OR FA.PAYMENTTYPE = 'DD'
						THEN FA.LIABILITYHOLDNAME
						ELSE FA.BENEFICIARYNAME END BENEFICIARYNAME,
					(FA.PHONECOUNTRYCODE ${call.concatenate} FA.PHONEAREACODE) ${call.concatenate} FA.PHONENUMBER BENEFICIARY_MOBILE,
					BCE.CUSTEMAIL BENFICIRY_EMAIL,
					BRS.CPPROVINCENAME BENFICIARY_STATE,
					BRC.PCCITYNAME BENFICIARY_CITY,
					BRCA.CUSTADDRHNBR ${call.concatenate}','${call.concatenate} BRCA.CUSTADDRSTREET ${call.concatenate}','${call.concatenate} BRC.PCCITYNAME ${call.concatenate}','${call.concatenate} BRS.CPPROVINCENAME  BENFICIARY_ADDRESS1,
					'' BENFICIARY_ADDRESS2,
					'' BENFICIARY_ADDRESS3,
					'' BENFICIARY_ADDRESS4,
					BRCA.CUSTADDRZIP BENFICIARY_ADDRESS5,
					'' PAYMENT_DETAIL1,
					'' PAYMENT_DETAIL2,
					'' PAYMENT_DETAIL3,
					'' PAYMENT_DETAIL4,
					'' PAYMENT_DETAIL5,
					FA.PAYMENTDETAIL PAYMENT_DETAIL6,
					'' PAYMENT_DETAIL7,
					FA.STATUS,
					FA.DESCRIPTION REMARKS,
					FA.PAYMENTTYPE,
					FM.FINTYPE,
					PB.PARTNERBANKID
					PARTNERBANK_ID,
					PB.PARTNERBANKCODE PARTNERBANK_CODE,
					FA.INPUTDATE,
					PB.ALWFILEDOWNLOAD,
					PB.DOWNLOADTYPE,
					PB.FILENAME,
					FM.FINISACTIVE,
					FM.FINAMOUNT,
					SMD.ENTITYCODE,
					FA.HOLDDISBURSEMENT HOLDDISBURSEMENT,
					PB.ACCOUNTNO PARTNERBANK_ACCOUNT,
					CASE WHEN FA.PAYMENTTYPE = 'NEFT' OR FA.PAYMENTTYPE   = 'RTGS' THEN 'LBT'
						WHEN FA.PAYMENTTYPE = 'IMPS' THEN 'BT' ELSE ''
			  			END TRANSACTION_TYPE_CODE,
			  		FA.LEI,
					PBBRC.PCCITYNAME CITY_NAME,
					PBBRS.CPPROVINCENAME PROVINCE_NAME
				FROM FINADVANCEPAYMENTS FA
				JOIN (SELECT fmt.CUSTID, fmt.FINID, fmt.FINREFERENCE, fmt.FINTYPE, fmt.FINISACTIVE, fmt.FINAMOUNT
					FROM FINANCEMAIN_TEMP fmt
					UNION ALL
					SELECT T2.CUSTID, T2.FINID, T2.FINREFERENCE, T2.FINTYPE, T2.FINISACTIVE, T2.FINAMOUNT
					FROM FINANCEMAIN T2
					WHERE NOT (EXISTS ( SELECT 1 FROM FINANCEMAIN_TEMP T3 
						WHERE T3.FINID = T2.FINID))) FM
					ON FM.FINID = FA.FINID
				JOIN CUSTOMERS CU ON CU.CUSTID = FM.CUSTID	
				JOIN RMTCURRENCIES CCY ON CCY.CCYCODE	= FA.DISBCCY
				JOIN PARTNERBANKS PB ON PB.PARTNERBANKID = FA.PARTNERBANKID
				LEFT JOIN CUSTOMEREMAILS CE	ON CE.CUSTID = CU.CUSTID AND CE.CUSTEMAILPRIORITY = 5
				LEFT JOIN CUSTOMERADDRESSES CA ON CA.CUSTID = CE.CUSTID	AND CA.CUSTADDRPRIORITY = 5
				LEFT JOIN RMTPROVINCEVSCITY CC ON CC.PCCITY = CA.CUSTADDRCITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE CS ON CS.CPPROVINCE = CC.PCPROVINCE
				LEFT JOIN BANKBRANCHES BB ON BB.BANKBRANCHID = FA.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL BD ON BD.BANKCODE =	BB.BANKCODE
				LEFT JOIN ( SELECT PB_1.PARTNERBANKID, PBD_1.BANKNAME, PBB.BRANCHDESC,
					PBBRC.PCCITYNAME, PBBRS.CPPROVINCENAME 
					FROM PARTNERBANKS PB_1
					JOIN BANKBRANCHES PBB ON PBB.BRANCHCODE = PB_1.BANKBRANCHCODE AND PBB.BANKCODE = PB_1.BANKCODE
					JOIN BMTBANKDETAIL PBD_1 ON PBD_1.BANKCODE = PBB.BANKCODE
					LEFT JOIN RMTPROVINCEVSCITY PBBRC ON PBBRC.PCCITY = PBB.CITY
					LEFT JOIN RMTCOUNTRYVSPROVINCE PBBRS ON PBBRS.CPPROVINCE = PBBRC.PCPROVINCE
					) PBD ON PBD.PARTNERBANKID = PB.PARTNERBANKID
				LEFT JOIN BENEFICIARY BR ON BR.BANKBRANCHID = FA.BANKBRANCHID AND BR.ACCNUMBER = FA.BENEFICIARYACCNO AND BR.CUSTID = FM.CUSTID
				LEFT JOIN CUSTOMERS BC ON BC.CUSTID = BR.CUSTID
				LEFT JOIN CUSTOMEREMAILS BCE ON BCE.CUSTID = CU.CUSTID AND BCE.CUSTEMAILPRIORITY = 5
				LEFT JOIN CUSTOMERADDRESSES	BRCA ON	BRCA.CUSTID = BR.CUSTID AND BRCA.CUSTADDRPRIORITY = 5
				LEFT JOIN RMTPROVINCEVSCITY BRC	ON BRC.PCCITY =	BRCA.CUSTADDRCITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE BRS ON BRS.CPPROVINCE = BRC.PCPROVINCE
				LEFT JOIN RMTFINANCETYPES RFT ON FM.FINTYPE = RFT.FINTYPE
				LEFT JOIN SMTDIVISIONDETAIL SMD	ON RFT.FINDIVISION = SMD.DIVISIONCODE 
				LEFT JOIN BANKBRANCHES bbe on bbe.BANKBRANCHID = FA.BANKBRANCHID and bbe.branchcode = FA.PRINTINGLOC
				LEFT JOIN RMTPROVINCEVSCITY PBBRC ON PBBRC.PCCITY = bbe.CITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE PBBRS ON PBBRS.CPPROVINCE = PBBRC.PCPROVINCE
				LEFT JOIN VASRECORDING VR ON VR.VASREFERENCE = FA.VASREFERENCE
				LEFT JOIN VASSTRUCTURE VS ON VS.PRODUCTCODE = VR.PRODUCTCODE
				WHERE FA.STATUS = 'APPROVED' AND NOT (FA.PAYMENTID IN ( 
					SELECT DISBURSEMENT_REQUESTS.DISBURSEMENT_ID FROM DISBURSEMENT_REQUESTS))
					AND NOT	(FA.PAYMENTID IN ( SELECT FINADVANCEPAYMENTS_TEMP.PAYMENTID FROM FINADVANCEPAYMENTS_TEMP))
				UNION ALL
				SELECT PI.PAYMENTINSTRUCTIONID PAYMENTID,
					FM.FINID,
					FM.FINREFERENCE,
					'CS' PAYMENTDETAIL,
					PH.PAYMENTTYPE CHANNEL,
					0 PROVIDERID,
					CASE WHEN PI.PAYMENTTYPE = 'NEFT' THEN 'N'
						WHEN PI.PAYMENTTYPE = 'RTGS' THEN 'R'
						WHEN PI.PAYMENTTYPE = 'DD' THEN 'D'
						WHEN PI.PAYMENTTYPE = 'CHEQUE' THEN 'C'
						WHEN PI.PAYMENTTYPE = 'IFT' THEN 'I'
						ELSE PI.PAYMENTTYPE END DISBURSEMENT_TYPE,
					PI.PAYMENTAMOUNT AMTTOBERELEASED,
					PI.POSTDATE DISBDATE,
					PI.POSTDATE LLDATE,
					PI.PAYABLELOC,
					PI.PRINTINGLOC,
					PI.FAVOURNUMBER CHEQUE_NUMBER,
					CU.CUSTCIF,
					CU.CUSTSHRTNAME,
					'' CUSTOMER_MOBILE,
					CE.CUSTEMAIL
					CUSTOMER_EMAIL,
					CS.CPPROVINCENAME CUSTOMER_STATE,
					CC.PCCITYNAME CUSTOMER_CITY,
					'' CUSTOMER_ADDRESS1,
					'' CUSTOMER_ADDRESS2,
					'' CUSTOMER_ADDRESS3,
					'' CUSTOMER_ADDRESS4,
					'' CUSTOMER_ADDRESS5,
					BD.BANKNAME,
					BB.BRANCHCODE,
					BB.BRANCHDESC,
					BBRS.CPPROVINCENAME BENFICIARY_BRANCH_STATE,
					BBRC.PCCITYNAME BENFICIARY_BRANCH_CITY,
					BB.MICR MICR_CODE,
					BB.IFSC IFSC_CODE,
					PI.ACCOUNTNO BENEFICIARYACCNO,
					CASE WHEN PI.PAYMENTTYPE = 'CHEQUE' OR PI.PAYMENTTYPE = 'DD'
						THEN PI.FAVOURNAME
						ELSE PI.ACCTHOLDERNAME END BENEFICIARYNAME,
					PI.PHONECOUNTRYCODE ${call.concatenate} PI.PHONENUMBER BENEFICIARY_MOBILE,
					BCE.CUSTEMAIL BENFICIRY_EMAIL,
					BRS.CPPROVINCENAME BENFICIARY_STATE,
					BRC.PCCITYNAME BENFICIARY_CITY,
					'' BENFICIARY_ADDRESS1,
					'' BENFICIARY_ADDRESS2,
					'' BENFICIARY_ADDRESS3,
					'' BENFICIARY_ADDRESS4,
					BRCA.CUSTADDRZIP BENFICIARY_ADDRESS5,
					'' PAYMENT_DETAIL1,
					'' PAYMENT_DETAIL2,
					'' PAYMENT_DETAIL3,
					'' PAYMENT_DETAIL4,
					'' PAYMENT_DETAIL5,
					'' PAYMENT_DETAIL6,
					'' PAYMENT_DETAIL7,
					PI.STATUS,
					PI.REMARKS,
					PI.PAYMENTTYPE,
					FM.FINTYPE,
					PB.PARTNERBANKID PARTNERBANK_ID,
					PB.PARTNERBANKCODE
					PARTNERBANK_CODE,
					PI.POSTDATE INPUTDATE,
					PB.ALWFILEDOWNLOAD,
					PB.DOWNLOADTYPE,
					PB.FILENAME,
					FM.FINISACTIVE,
					FM.FINAMOUNT,
					SMD.ENTITYCODE,
					0 HOLDDISBURSEMENT,
					PB.ACCOUNTNO PARTNERBANK_ACCOUNT,
					CASE WHEN PI.PAYMENTTYPE = 'NEFT' OR PI.PAYMENTTYPE   = 'RTGS' THEN 'LBT'
						WHEN PI.PAYMENTTYPE = 'IMPS' THEN 'BT' ELSE '' 
						END TRANSACTION_TYPE_CODE,
					PI.LEI,
					PBBRC.PCCITYNAME CITY_NAME,
					PBBRS.CPPROVINCENAME PROVINCE_NAME
				FROM PAYMENTINSTRUCTIONS PI
				JOIN PAYMENTHEADER PH ON PH.PAYMENTID = PI.PAYMENTID
				JOIN (SELECT fmm.CUSTID, fmm.FINID, fmm.FINREFERENCE, fmm.FINTYPE, fmm.FINISACTIVE, fmm.FINAMOUNT
					FROM FINANCEMAIN fmm
					UNION ALL
					SELECT T2.CUSTID, T2.FINID, T2.FINREFERENCE, T2.FINTYPE, T2.FINISACTIVE, T2.FINAMOUNT
					FROM FINANCEMAIN_TEMP T2
					WHERE NOT (EXISTS ( SELECT 1 FROM FINANCEMAIN_TEMP T3
						WHERE T3.FINID = T2.FINID))) FM ON FM.FINID = PH.FINID
				JOIN CUSTOMERS CU ON CU.CUSTID = FM.CUSTID
				JOIN RMTCURRENCIES CCY ON CCY.CCYCODE = PI.PAYMENTCCY
				JOIN PARTNERBANKS PB ON PB.PARTNERBANKID = PI.PARTNERBANKID
				LEFT JOIN CUSTOMEREMAILS CE ON CE.CUSTID = CU.CUSTID AND CE.CUSTEMAILPRIORITY = 5
				LEFT JOIN CUSTOMERADDRESSES CA ON CA.CUSTID = CE.CUSTID AND CA.CUSTADDRPRIORITY = 5
				LEFT JOIN RMTPROVINCEVSCITY CC ON CC.PCCITY = CA.CUSTADDRCITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE CS ON CS.CPPROVINCE = CC.PCPROVINCE
				LEFT JOIN CUSTOMERPHONENUMBERS CM ON CM.PHONECUSTID = CU.CUSTID AND CM.PHONETYPECODE = 'MOBILE1' AND CM.PHONETYPEPRIORITY = 5
				LEFT JOIN BANKBRANCHES BB ON BB.BANKBRANCHID = PI.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL BD ON BD.BANKCODE = BB.BANKCODE
				LEFT JOIN RMTPROVINCEVSCITY	BBRC ON BBRC.PCCITY = BB.CITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE BBRS	ON BBRS.CPPROVINCE = BBRC.PCPROVINCE
				LEFT JOIN BENEFICIARY BR ON BR.BANKBRANCHID = PI.BANKBRANCHID AND BR.ACCNUMBER = PI.ACCOUNTNO	AND BR.CUSTID = FM.CUSTID
				LEFT JOIN CUSTOMERS BC ON BC.CUSTID = BR.CUSTID
				LEFT JOIN CUSTOMEREMAILS BCE ON	BCE.CUSTID = CU.CUSTID AND BCE.CUSTEMAILPRIORITY = 5
				LEFT JOIN CUSTOMERADDRESSES BRCA ON BRCA.CUSTID = BR.CUSTID	AND	BRCA.CUSTADDRPRIORITY = 5
				LEFT JOIN RMTPROVINCEVSCITY BRC	ON BRC.PCCITY = BRCA.CUSTADDRCITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE BRS ON BRS.CPPROVINCE = BRC.PCPROVINCE
				LEFT JOIN RMTFINANCETYPES RFT ON FM.FINTYPE = RFT.FINTYPE
				LEFT JOIN SMTDIVISIONDETAIL SMD	ON RFT.FINDIVISION = SMD.DIVISIONCODE
				LEFT JOIN BANKBRANCHES bbe on bbe.BANKBRANCHID = PI.BANKBRANCHID and bbe.branchcode = PI.PRINTINGLOC
				LEFT JOIN RMTPROVINCEVSCITY PBBRC ON PBBRC.PCCITY = bbe.CITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE PBBRS ON PBBRS.CPPROVINCE = PBBRC.PCPROVINCE
				WHERE PI.STATUS = 'APPROVED' AND NOT (PI.PAYMENTINSTRUCTIONID IN
					( SELECT DISBURSEMENT_REQUESTS.DISBURSEMENT_ID FROM DISBURSEMENT_REQUESTS))
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.33_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'int_disbursement_request_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.34_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finsteppolicydetail_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.34" author="Gopal.p">
		<createView viewName="FINSTEPPOLICYDETAIL_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FM.FINID,
					FM.FINREFERENCE,
					T1.STEPNO,
					T1.TENORSPLITPERC,
					T1.INSTALLMENTS,
					T1.RATEMARGIN,
					T1.EMISPLITPERC,
					T1.STEPPEDEMI,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.STEPSPECIFIER,
					T1.STEPSTART,
					T1.STEPEND,
					T1.AUTOCAL
				FROM FINSTEPPOLICYDETAIL T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.34_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finsteppolicydetail_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.35_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finsteppolicydetail_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.35" author="Gopal.p">
		<createView viewName="FINSTEPPOLICYDETAIL_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FM.FINID,	
					FM.FINREFERENCE,
					T1.STEPNO,
					T1.TENORSPLITPERC,
					T1.INSTALLMENTS,
					T1.RATEMARGIN,
					T1.EMISPLITPERC,
					T1.STEPPEDEMI,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.STEPSPECIFIER,
					T1.STEPSTART,
					T1.STEPEND,
					T1.AUTOCAL
				FROM FINSTEPPOLICYDETAIL_TEMP T1
				INNER JOIN FINANCEMAIN_TEMP FM ON FM.FINID = T1.FINID
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.35_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finsteppolicydetail_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.36_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finsteppolicydetail_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.36" author="Gopal.p">
		<createView viewName="FINSTEPPOLICYDETAIL_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FM.FINID,
					FM.FINREFERENCE,
					T1.STEPNO,
					T1.TENORSPLITPERC,
					T1.INSTALLMENTS,
					T1.RATEMARGIN,
					T1.EMISPLITPERC,
					T1.STEPPEDEMI,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.STEPSPECIFIER,
					T1.STEPSTART,
					T1.STEPEND,
					T1.AUTOCAL
				FROM FINSTEPPOLICYDETAIL_TEMP T1
				INNER JOIN FINANCEMAIN_TEMP FM ON FM.FINID = T1.FINID
				UNION ALL
				SELECT FM.FINID,
					FM.FINREFERENCE,
					T1.STEPNO,
					T1.TENORSPLITPERC,
					T1.INSTALLMENTS,
					T1.RATEMARGIN,
					T1.EMISPLITPERC,
					T1.STEPPEDEMI,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.STEPSPECIFIER,
					T1.STEPSTART,
					T1.STEPEND,
					T1.AUTOCAL
				FROM FINSTEPPOLICYDETAIL T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				WHERE NOT EXISTS (SELECT 1 FROM FINSTEPPOLICYDETAIL_TEMP
					WHERE FINSTEPPOLICYDETAIL_TEMP.FINID = T1.FINID AND FINSTEPPOLICYDETAIL_TEMP.STEPNO = T1.STEPNO)
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.36_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finsteppolicydetail_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.37_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'wiffinsteppolicydetail_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.37" author="Gopal.p">
		<createView viewName="WIFFINSTEPPOLICYDETAIL_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FM.FINID,
					FM.FINREFERENCE,
					T1.STEPNO,
					T1.TENORSPLITPERC,
					T1.INSTALLMENTS,
					T1.RATEMARGIN,
					T1.EMISPLITPERC,
					T1.STEPPEDEMI,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.STEPSPECIFIER,
					T1.STEPSTART,
					T1.STEPEND,
					T1.AUTOCAL
				FROM WIFFINSTEPPOLICYDETAIL_TEMP T1
				INNER JOIN FINANCEMAIN_TEMP FM ON FM.FINID = T1.FINID
				UNION ALL
				SELECT FM.FINID,
					FM.FINREFERENCE,
					T1.STEPNO,
					T1.TENORSPLITPERC,
					T1.INSTALLMENTS,
					T1.RATEMARGIN,
					T1.EMISPLITPERC,
					T1.STEPPEDEMI,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.STEPSPECIFIER,
					T1.STEPSTART,
					T1.STEPEND,
					T1.AUTOCAL
				FROM WIFFINSTEPPOLICYDETAIL T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				WHERE NOT EXISTS (SELECT 1 FROM WIFFINSTEPPOLICYDETAIL_TEMP
					WHERE WIFFINSTEPPOLICYDETAIL_TEMP.FINID = T1.FINID AND WIFFINSTEPPOLICYDETAIL_TEMP.STEPNO = T1.STEPNO)
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.37_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'wiffinsteppolicydetail_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.38_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finlegalexpenses_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.38" author="Gopal.p">
		<createView viewName="FINLEGALEXPENSES_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.EXPREFERENCE,
					T1.CUSTOMERID,
					T1.BOOKINGDATE,
					T1.AMOUNT,
					FM.FINID,
					FM.FINREFERENCE,
					T1.TRANSACTIONTYPE,
					T1.REMARKS,
					T1.RECOVEREDAMOUNT,
					T1.AMOUNTDUE,
					T1.ISRECOVERDFROMMOPA,
					T1.TOTALCHARGES,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T2.USRLOGIN,
					T2.USRFNAME,
					T2.USRMNAME,
					T2.USRLNAME,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM FINLEGALEXPENSES_TEMP T1
				INNER JOIN FINANCEMAIN_TEMP FM ON FM.FINID = T1.FINID
				JOIN SECUSERS T2 ON T1.LASTMNTBY = T2.USRID
				UNION ALL
				SELECT T1.EXPREFERENCE,
					T1.CUSTOMERID,
					T1.BOOKINGDATE,
					T1.AMOUNT,
					FM.FINID,
					FM.FINREFERENCE,
					T1.TRANSACTIONTYPE,
					T1.REMARKS,
					T1.RECOVEREDAMOUNT,
					T1.AMOUNTDUE,
					T1.ISRECOVERDFROMMOPA,
					T1.TOTALCHARGES,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T2.USRLOGIN,
					T2.USRFNAME,
					T2.USRMNAME,
					T2.USRLNAME,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM FINLEGALEXPENSES T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				JOIN SECUSERS T2 ON T1.LASTMNTBY = T2.USRID
				WHERE NOT EXISTS (SELECT 1 FROM FINLEGALEXPENSES_TEMP
					WHERE FINLEGALEXPENSES_TEMP.CUSTOMERID = T1.CUSTOMERID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.38_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finlegalexpenses_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.39_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finlegalexpenses_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.39" author="Gopal.p">
		<createView viewName="FINLEGALEXPENSES_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.EXPREFERENCE,
					T1.CUSTOMERID,
					T1.BOOKINGDATE,
					T1.AMOUNT,
					FM.FINID,
					FM.FINREFERENCE,
					T1.TRANSACTIONTYPE,
					T1.REMARKS,
					T1.RECOVEREDAMOUNT,
					T1.AMOUNTDUE,
					T1.ISRECOVERDFROMMOPA,
					T1.TOTALCHARGES,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T2.USRLOGIN,
					T2.USRFNAME,
					T2.USRMNAME,
					T2.USRLNAME,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM FINLEGALEXPENSES_TEMP T1
				INNER JOIN FINANCEMAIN_TEMP FM ON FM.FINID = T1.FINID
				JOIN SECUSERS T2 ON T1.LASTMNTBY = T2.USRID
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.39_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finlegalexpenses_tview');
			]]>
		</sql>
	</changeSet>


	<changeSet id="ST#2367.40_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finlegalexpenses_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.40" author="Gopal.p">
		<createView viewName="FINLEGALEXPENSES_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.EXPREFERENCE,
					T1.CUSTOMERID,
					T1.BOOKINGDATE,
					T1.AMOUNT,
					FM.FINID,
					FM.FINREFERENCE,
					T1.TRANSACTIONTYPE,
					T1.REMARKS,
					T1.RECOVEREDAMOUNT,
					T1.AMOUNTDUE,
					T1.ISRECOVERDFROMMOPA,
					T1.TOTALCHARGES,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T2.USRLOGIN,
					T2.USRFNAME,
					T2.USRMNAME,
					T2.USRLNAME,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM FINLEGALEXPENSES T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				JOIN SECUSERS T2 ON T1.LASTMNTBY = T2.USRID
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.40_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finlegalexpenses_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.41_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finchangecustomer_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.41" author="Gopal.p">
		<createView viewName="FINCHANGECUSTOMER_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINID,
					T1.FINREFERENCE,
					T1.OLDCUSTID,
					T1.COAPPLICANTID,
					C.CUSTCTGCODE CUSTCATEGORY,
					C.CUSTCIF,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM FINCHANGECUSTOMER T1
				JOIN CUSTOMERS C ON T1.OLDCUSTID = C.CUSTID
				WHERE NOT EXISTS (SELECT 1 FROM FINCHANGECUSTOMER_TEMP
					WHERE FINCHANGECUSTOMER_TEMP.FINID = T1.FINID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.41_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finchangecustomer_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.42_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finchangecustomer_lview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.42" author="Gopal.p">
		<createView viewName="FINCHANGECUSTOMER_LVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ID,
					T1.FINID,
					T1.FINREFERENCE,
					T1.OLDCUSTID,
					C.CUSTCIF,
					T1.COAPPLICANTID,
					JC.CUSTCIF JCUSTCIF,
					C.CUSTCTGCODE CUSTCATEGORY,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM FINCHANGECUSTOMER_TEMP T1
				JOIN CUSTOMERS C ON T1.OLDCUSTID = C.CUSTID
				LEFT JOIN CUSTOMERS JC ON T1.COAPPLICANTID = JC.CUSTID
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.42_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finchangecustomer_lview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.43_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finchangecustomer_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.43" author="Gopal.p">
		<createView viewName="FINCHANGECUSTOMER_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINID,
					T1.FINREFERENCE,
					T1.FINTYPE,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					C.CUSTID OLDCUSTID,
					C.CUSTCTGCODE CUSTCATEGORY,
					C.CUSTCIF
				FROM FINANCEMAIN_TEMP T1
				JOIN CUSTOMERS C ON T1.CUSTID = C.CUSTID
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.43_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finchangecustomer_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.44_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finchangecustomer_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.44" author="Gopal.p">
		<createView viewName="FINCHANGECUSTOMER_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ID,
					T1.FINID,
					T1.FINREFERENCE,
					T1.OLDCUSTID,
					C.CUSTCIF,
					T1.COAPPLICANTID,
					JC.CUSTCIF JCUSTCIF,
					C.CUSTCTGCODE CUSTCATEGORY,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM FINCHANGECUSTOMER_TEMP T1
				JOIN CUSTOMERS C ON T1.OLDCUSTID = C.CUSTID
				LEFT JOIN CUSTOMERS JC ON T1.COAPPLICANTID = JC.CUSTID
				UNION ALL
				SELECT T1.ID,
					T1.FINID,
					T1.FINREFERENCE,
					T1.OLDCUSTID,
					C.CUSTCIF,
					T1.COAPPLICANTID,
					JC.CUSTCIF JCUSTCIF,
					C.CUSTCTGCODE CUSTCATEGORY,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM FINCHANGECUSTOMER T1
				JOIN CUSTOMERS C ON T1.OLDCUSTID = C.CUSTID
				LEFT JOIN CUSTOMERS JC ON T1.COAPPLICANTID = JC.CUSTID
				WHERE NOT (EXISTS ( SELECT 1 FROM FINCHANGECUSTOMER_TEMP
					WHERE FINCHANGECUSTOMER_TEMP.ID = T1.ID))
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.44_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finchangecustomer_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.45.1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'wiffinscheduledetails_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.45.1" author="Gopal.p">
		<createView viewName="WIFFINSCHEDULEDETAILS_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FM.FINID,
					FM.FINREFERENCE,
					T1.SCHSEQ,
					T1.SCHDATE,
					T1.PFTONSCHDATE,
					T1.REPAYONSCHDATE,
					T1.CPZONSCHDATE,
					T1.RVWONSCHDATE,
					T1.DISBONSCHDATE,
					T1.DOWNPAYMENTONSCHDATE,
					T1.BALANCEFORPFTCAL,
					T1.BASERATE,
					T1.SPLRATE,
					T1.ACTRATE,
					T1.NOOFDAYS,
					T1.DAYFACTOR,
					T1.PROFITCALC,
					T1.PROFITSCHD,
					T1.PRINCIPALSCHD,
					T1.REPAYAMOUNT,
					T1.PROFITBALANCE,
					T1.DISBAMOUNT,
					T1.CPZAMOUNT,
					T1.DOWNPAYMENTAMOUNT,
					T1.CLOSINGBALANCE,
					T1.PROFITFRACTION,
					T1.PRVREPAYAMOUNT,
					T1.SCHDPFTPAID,
					T1.SCHPFTPAID,
					T1.SCHDPRIPAID,
					T1.SCHPRIPAID,
					T1.SPECIFIER,
					T1.DEFSCHDDATE,
					T1.SCHDMETHOD,
					T1.MRGRATE,
					T1.FEECHARGEAMT,
					T1.CALCULATEDRATE,
					T1.ORGPFT,
					T1.ORGPRI,
					T1.ORGENDBAL,
					T1.ORGPLANPFT,
					T1.FEESCHD,
					T1.SCHDFEEPAID,
					T1.SCHDFEEOS,
					T1.TDSAMOUNT,
					T1.TDSPAID,
					T1.PFTDAYSBASIS,
					T1.INSTNUMBER,
					T1.BPIORHOLIDAY,
					T1.FRQDATE,
					T1.FEETAX,
					T1.RECALLOCK,
					T1.CPZBALANCE
				FROM WIFFINSCHEDULEDETAILS_TEMP T1
				INNER JOIN WIFFINANCEMAIN_TEMP FM ON FM.FINID = T1.FINID
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.45.1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'wiffinscheduledetails_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.46.1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'wiffinscheduledetails_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.46.1" author="Gopal.p">
		<createView viewName="WIFFINSCHEDULEDETAILS_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FM.FINID,
					FM.FINREFERENCE,
					T1.SCHSEQ,
					T1.SCHDATE,
					T1.PFTONSCHDATE,
					T1.REPAYONSCHDATE,
					T1.CPZONSCHDATE,
					T1.RVWONSCHDATE,
					T1.DISBONSCHDATE,
					T1.DOWNPAYMENTONSCHDATE,
					T1.BALANCEFORPFTCAL,
					T1.BASERATE,
					T1.SPLRATE,
					T1.ACTRATE,
					T1.NOOFDAYS,
					T1.DAYFACTOR,
					T1.PROFITCALC,
					T1.PROFITSCHD,
					T1.PRINCIPALSCHD,
					T1.REPAYAMOUNT,
					T1.PROFITBALANCE,
					T1.DISBAMOUNT,
					T1.CPZAMOUNT,
					T1.DOWNPAYMENTAMOUNT,
					T1.CLOSINGBALANCE,
					T1.PROFITFRACTION,
					T1.PRVREPAYAMOUNT,
					T1.SCHDPFTPAID,
					T1.SCHPFTPAID,
					T1.SCHDPRIPAID,
					T1.SCHPRIPAID,
					T1.SPECIFIER,
					T1.DEFSCHDDATE,
					T1.SCHDMETHOD,
					T1.MRGRATE,
					T1.FEECHARGEAMT,
					T1.CALCULATEDRATE,
					T1.ORGPFT,
					T1.ORGPRI,
					T1.ORGENDBAL,
					T1.ORGPLANPFT,
					T1.FEESCHD,
					T1.SCHDFEEPAID,
					T1.SCHDFEEOS,
					T1.TDSAMOUNT,
					T1.PFTDAYSBASIS,
					T1.INSTNUMBER,
					T1.BPIORHOLIDAY,
					T1.FRQDATE,
					T1.RECALLOCK,
					T1.TDSPAID,
					T1.CPZBALANCE
				FROM WIFFINSCHEDULEDETAILS_TEMP T1
				INNER JOIN WIFFINANCEMAIN_TEMP FM ON FM.FINID = T1.FINID
				UNION ALL
				SELECT FM.FINID,
					FM.FINREFERENCE,
					T1.SCHSEQ,
					T1.SCHDATE,
					T1.PFTONSCHDATE,
					T1.REPAYONSCHDATE,
					T1.CPZONSCHDATE,
					T1.RVWONSCHDATE,
					T1.DISBONSCHDATE,
					T1.DOWNPAYMENTONSCHDATE,
					T1.BALANCEFORPFTCAL,
					T1.BASERATE,
					T1.SPLRATE,
					T1.ACTRATE,
					T1.NOOFDAYS,
					T1.DAYFACTOR,
					T1.PROFITCALC,
					T1.PROFITSCHD,
					T1.PRINCIPALSCHD,
					T1.REPAYAMOUNT,
					T1.PROFITBALANCE,
					T1.DISBAMOUNT,
					T1.CPZAMOUNT,
					T1.DOWNPAYMENTAMOUNT,
					T1.CLOSINGBALANCE,
					T1.PROFITFRACTION,
					T1.PRVREPAYAMOUNT,
					T1.SCHDPFTPAID,
					T1.SCHPFTPAID,
					T1.SCHDPRIPAID,
					T1.SCHPRIPAID,
					T1.SPECIFIER,
					T1.DEFSCHDDATE,
					T1.SCHDMETHOD,
					T1.MRGRATE,
					T1.FEECHARGEAMT,
					T1.CALCULATEDRATE,
					T1.ORGPFT,
					T1.ORGPRI,
					T1.ORGENDBAL,
					T1.ORGPLANPFT,
					T1.FEESCHD,
					T1.SCHDFEEPAID,
					T1.SCHDFEEOS,
					T1.TDSAMOUNT,
					T1.PFTDAYSBASIS,
					T1.INSTNUMBER,
					T1.BPIORHOLIDAY,
					T1.FRQDATE,
					T1.RECALLOCK,
					T1.TDSPAID,
					T1.CPZBALANCE
				FROM WIFFINSCHEDULEDETAILS T1
				INNER JOIN WIFFINANCEMAIN FM ON FM.FINID = T1.FINID
				WHERE NOT EXISTS (SELECT 1 FROM WIFFINSCHEDULEDETAILS_TEMP
					WHERE WIFFINSCHEDULEDETAILS_TEMP.FINID = T1.FINID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.46.1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'wiffinscheduledetails_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.47.1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'wiffindisbursementdetails_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.47.1" author="Gopal.p">
		<createView viewName="WIFFINDISBURSEMENTDETAILS_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FM.FINID,
					FM.FINREFERENCE,
					T1.DISBDATE,
					T1.DISBSEQ,
					T1.DISBDESC,
					T1.DISBAMOUNT,
					T1.DISBISACTIVE,
					T1.DISBREMARKS,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.DISBREQDATE,
					T1.FEECHARGEAMT
				FROM WIFFINDISBURSEMENTDETAILS_TEMP T1
				INNER JOIN WIFFINANCEMAIN_TEMP FM ON FM.FINID = T1.FINID
				UNION ALL
				 SELECT FM.FINID,
					FM.FINREFERENCE,
					T1.DISBDATE,
					T1.DISBSEQ,
					T1.DISBDESC,
					T1.DISBAMOUNT,
					T1.DISBISACTIVE,
					T1.DISBREMARKS,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.DISBREQDATE,
					T1.FEECHARGEAMT
				FROM WIFFINDISBURSEMENTDETAILS T1
				INNER JOIN WIFFINANCEMAIN FM ON FM.FINID = T1.FINID
				WHERE NOT EXISTS (SELECT 1 FROM WIFFINDISBURSEMENTDETAILS_TEMP
					WHERE WIFFINDISBURSEMENTDETAILS_TEMP.FINID = T1.FINID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.47.1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'wiffindisbursementdetails_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.48_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'wiffinrepayinstruction_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.48" author="Gopal.p">
		<createView viewName="WIFFINREPAYINSTRUCTION_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FM.FINID,
					FM.FINREFERENCE,
					T1.REPAYDATE,
					T1.REPAYAMOUNT,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.REPAYSCHDMETHOD
				FROM WIFFINREPAYINSTRUCTION_TEMP T1
				INNER JOIN WIFFINANCEMAIN_TEMP FM ON FM.FINID = T1.FINID
				UNION ALL
				SELECT FM.FINID,
					FM.FINREFERENCE,
					T1.REPAYDATE,
					T1.REPAYAMOUNT,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.REPAYSCHDMETHOD
				FROM WIFFINREPAYINSTRUCTION T1
				INNER JOIN WIFFINANCEMAIN FM ON FM.FINID = T1.FINID
				WHERE NOT EXISTS (SELECT 1 FROM WIFFINREPAYINSTRUCTION_TEMP
					WHERE WIFFINREPAYINSTRUCTION_TEMP.FINID = T1.FINID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.48_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'wiffinrepayinstruction_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.49_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'wiffinrepayinstruction_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.49" author="Gopal.p">
		<createView viewName="WIFFINREPAYINSTRUCTION_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FM.FINID,
					FM.FINREFERENCE,
					T1.REPAYDATE,
					T1.REPAYAMOUNT,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.REPAYSCHDMETHOD
				FROM WIFFINREPAYINSTRUCTION_TEMP T1
				INNER JOIN WIFFINANCEMAIN_TEMP FM ON FM.FINID = T1.FINID
				UNION ALL
				SELECT FM.FINID,
					FM.FINREFERENCE,
					T1.REPAYDATE,
					T1.REPAYAMOUNT,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.REPAYSCHDMETHOD
				FROM WIFFINREPAYINSTRUCTION T1
				INNER JOIN WIFFINANCEMAIN FM ON FM.FINID = T1.FINID
				WHERE NOT EXISTS (SELECT 1 FROM WIFFINREPAYINSTRUCTION_TEMP
					WHERE WIFFINREPAYINSTRUCTION_TEMP.FINID = T1.FINID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.49_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'wiffinrepayinstruction_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.50_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'wiffinfeedetail_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.50" author="Gopal.p">
		<createView viewName="WIFFINFEEDETAIL_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FEEID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.FEESEQ,
					T1.ORIGINATIONFEE,
					T1.FINEVENT,
					T1.FEETYPEID,
					T1.FEEORDER,
					T1.CALCULATEDAMOUNT,
					T1.ACTUALAMOUNT,
					T1.WAIVEDAMOUNT,
					T1.PAIDAMOUNT,
					T1.FEESCHEDULEMETHOD,
					T1.TERMS,
					T1.REMAININGFEE,
					T1.PAYMENTREF,
					T1.CALCULATIONTYPE,
					T1.RULECODE,
					T1.FIXEDAMOUNT,
					T1.PERCENTAGE,
					T1.CALCULATEON,
					T1.ALWDEVIATION,
					T1.MAXWAIVERPERC,
					T1.ALWMODIFYFEE,
					T1.ALWMODIFYFEESCHDMTHD,
					T1.VASREFERENCE,
					T1.STATUS,
					T1.TAXAPPLICABLE,
					T1.TAXCOMPONENT,
					T1.PAIDAMOUNTORIGINAL,
					T1.PAIDAMOUNTGST,
					T1.NETAMOUNTORIGINAL,
					T1.NETAMOUNTGST,
					T1.NETAMOUNT,
					T1.REMAININGFEEORIGINAL,
					T1.REMAININGFEEGST,
					T1.ACTUALAMOUNTORIGINAL,
					T1.ACTUALAMOUNTGST,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FEETYPECODE,
					T2.FEETYPEDESC,
					T1.REFUNDABLE,
					T1.INSTRUCTIONUID,
					T1.WAIVEDGST,
					T1.REFERENCEID,
					T1.TAXHEADERID,
					T1.PAIDTDS,
					T1.REMTDS,
					T1.NETTDS
				FROM WIFFINFEEDETAIL_TEMP T1
				INNER JOIN WIFFINANCEMAIN_TEMP FM ON FM.FINID = T1.FINID
				LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
				UNION ALL
				SELECT T1.FEEID,
					FM.FINID,
					FM.FINREFERENCE,
					T1.FEESEQ,
					T1.ORIGINATIONFEE,
					T1.FINEVENT,
					T1.FEETYPEID,
					T1.FEEORDER,
					T1.CALCULATEDAMOUNT,
					T1.ACTUALAMOUNT,
					T1.WAIVEDAMOUNT,
					T1.PAIDAMOUNT,
					T1.FEESCHEDULEMETHOD,
					T1.TERMS,
					T1.REMAININGFEE,
					T1.PAYMENTREF,
					T1.CALCULATIONTYPE,
					T1.RULECODE,
					T1.FIXEDAMOUNT,
					T1.PERCENTAGE,
					T1.CALCULATEON,
					T1.ALWDEVIATION,
					T1.MAXWAIVERPERC,
					T1.ALWMODIFYFEE,
					T1.ALWMODIFYFEESCHDMTHD,
					T1.VASREFERENCE,
					T1.STATUS,
					T1.TAXAPPLICABLE,
					T1.TAXCOMPONENT,
					T1.PAIDAMOUNTORIGINAL,
					T1.PAIDAMOUNTGST,
					T1.NETAMOUNTORIGINAL,
					T1.NETAMOUNTGST,
					T1.NETAMOUNT,
					T1.REMAININGFEEORIGINAL,
					T1.REMAININGFEEGST,
					T1.ACTUALAMOUNTORIGINAL,
					T1.ACTUALAMOUNTGST,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FEETYPECODE,
					T2.FEETYPEDESC,
					T1.REFUNDABLE,
					T1.INSTRUCTIONUID,
					T1.WAIVEDGST,
					T1.REFERENCEID,
					T1.TAXHEADERID,
					T1.PAIDTDS,
					T1.REMTDS,
					T1.NETTDS
				FROM WIFFINFEEDETAIL T1
				INNER JOIN WIFFINANCEMAIN FM ON FM.FINID = T1.FINID
				LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
				WHERE NOT EXISTS (SELECT 1 FROM WIFFINFEEDETAIL_TEMP
				WHERE WIFFINFEEDETAIL_TEMP.FINID = T1.FINID AND WIFFINFEEDETAIL_TEMP.ORIGINATIONFEE = T1.ORIGINATIONFEE AND WIFFINFEEDETAIL_TEMP.FINEVENT = T1.FINEVENT AND WIFFINFEEDETAIL_TEMP.FEETYPEID = T1.FEETYPEID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.50_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'wiffinfeedetail_view');
			]]>
		</sql>
	</changeSet>


	<changeSet id="ST#2367.51.1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'cibil_customer_loans_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.51.1" author="Gopal.p">
		<createView viewName="CIBIL_CUSTOMER_LOANS_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT AT.SEGMENT_TYPE,
					CU.CUSTID,
					AT.CODE FINTYPE,
					FM.FINID,
					FM.FINREFERENCE,
					FM.FINSTARTDATE,
					FM.FINAPPROVEDDATE,
					PD.LATESTRPYDATE,
					FM.REPAYFRQ,
					${add.schema}udf_convertcurrency(FM.FINASSETVALUE, FM.FINCCY, 'INR') FINASSETVALUE,
					${add.schema}udf_convertcurrency(PD.TOTALPRIBAL, FM.FINCCY, 'INR') FUTURE_SCHEDULE_PRIN,
					${add.schema}udf_convertcurrency(PD.ODPRINCIPAL + PD.ODPROFIT, FM.FINCCY, 'INR') INSTALMENT_DUE,
					${add.schema}udf_convertcurrency(PD.TOTALPFTPAID + PD.TOTALPRIPAID, FM.FINCCY, 'INR') INSTALMENT_PAID,
					${add.schema}udf_convertcurrency(MA.BOUNCE_DUE, FM.FINCCY, 'INR') BOUNCE_DUE,
					${add.schema}udf_convertcurrency(MA.BOUNCE_PAID, FM.FINCCY, 'INR') BOUNCE_PAID,
					${add.schema}udf_convertcurrency(FO.LATE_PAYMENT_PENALTY_DUE, FM.FINCCY, 'INR') LATE_PAYMENT_PENALTY_DUE,
					${add.schema}udf_convertcurrency(FO.LATE_PAYMENT_PENALTY_PAID, FM.FINCCY, 'INR') LATE_PAYMENT_PENALTY_PAID,
					${add.schema}udf_convertcurrency(PD.TOTALPRISCHD, FM.FINCCY, 'INR') TOTAL_PRI_SCHD,
					${add.schema}udf_convertcurrency(PD.TOTALPRIPAID, FM.FINCCY, 'INR') TOTAL_PRI_PAID,
					${add.schema}udf_convertcurrency(PD.TOTALPFTSCHD, FM.FINCCY, 'INR') TOTAL_PFT_SCHD,
					${add.schema}udf_convertcurrency(PD.TOTALPFTPAID, FM.FINCCY, 'INR') TOTAL_PFT_PAID,
					${add.schema}udf_convertcurrency(FE.EXCESS_AMOUNT, FM.FINCCY, 'INR') EXCESS_AMOUNT,
					${add.schema}udf_convertcurrency(FE.EXCESS_AMT_PAID, FM.FINCCY, 'INR') EXCESS_AMT_PAID,
					PD.CURODDAYS,
					PD.MATURITYDATE,
					PD.CURREDUCINGRATE,
					FM.CLOSINGSTATUS,
					CU.OWNERSHIP,
					FM.NUMBEROFTERMS,
					FM.FIRSTREPAY,
					${add.schema}udf_convertcurrency(CI.CUSTINCOME, FM.FINCCY, 'INR') CUSTINCOME,
					FM.CLOSEDDATE
				FROM FINANCEMAIN FM
			    JOIN CIBIL_CUSTOMER_EXTRACT CU ON CU.FINID = FM.FINID
			    JOIN FINPFTDETAILS PD ON PD.FINID = FM.FINID
			    JOIN CIBIL_ACCOUNT_TYPES_MAPPING ATM ON ATM.FIN_TYPE = FM.FINTYPE
			    JOIN CIBIL_ACCOUNT_TYPES AT ON AT.CODE = ATM.CODE AND AT.SEGMENT_TYPE = ATM.SEGMENT_TYPE
			    LEFT JOIN ( SELECT MA_1.FINID, Sum(COALESCE(MA_1.ADVISEAMOUNT, 0) - COALESCE(MA_1.PAIDAMOUNT, 0) - COALESCE(MA_1.WAIVEDAMOUNT, 0)) BOUNCE_DUE, Sum(Ma_1.Paidamount) BOUNCE_PAID FROM MANUALADVISE MA_1 WHERE MA_1.BOUNCEID > 0 GROUP BY MA_1.FINID) MA ON MA.FINID = FM.FINID
			    LEFT JOIN ( SELECT FINODDETAILS.FINID, Sum(FINODDETAILS.TOTPENALTYBAL) LATE_PAYMENT_PENALTY_DUE, Sum(FINODDETAILS.TOTPENALTYPAID) LATE_PAYMENT_PENALTY_PAID FROM FINODDETAILS GROUP BY FINODDETAILS.FINID) FO ON FO.FINID = FM.FINID
			    LEFT JOIN ( SELECT FINEXCESSAMOUNT.FINID, Sum(FINEXCESSAMOUNT.AMOUNT) EXCESS_AMOUNT, Sum(COALESCE(FINEXCESSAMOUNT.UTILISEDAMT, 0) + COALESCE(FINEXCESSAMOUNT.RESERVEDAMT, 0)) EXCESS_AMT_PAID FROM FINEXCESSAMOUNT GROUP BY FINEXCESSAMOUNT.FINID) FE ON FE.FINID = FM.FINID
			    LEFT JOIN ( SELECT CUSTOMERINCOMES.CUSTID, COALESCE(Sum(CUSTOMERINCOMES.CUSTINCOME), 0) CUSTINCOME FROM CUSTOMERINCOMES GROUP BY CUSTOMERINCOMES.CUSTID) CI ON CI.CUSTID = CU.CUSTID
			]]>	
		</createView>
	</changeSet>

	<changeSet id="ST#2367.51.1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'cibil_customer_loans_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.52_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'cibil_customer_extarct_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.52" author="Gopal.p">
		<createView viewName="CIBIL_CUSTOMER_EXTARCT_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT C.CUSTID,
					FM.FINID,
					FM.FINREFERENCE,
					CASE WHEN FM.FINREFERENCE IS NULL THEN 4
						ELSE 1 END OWNERSHIP,
					PD.LATESTRPYDATE,
					SMT.ENTITYCODE
				FROM FINANCEMAIN FM
				JOIN CUSTOMERS C ON C.CUSTID = FM.CUSTID
				JOIN FINPFTDETAILS PD ON PD.FINID = FM.FINID
				JOIN RMTFINANCETYPES RFT ON RFT.FINTYPE = PD.FINTYPE
				JOIN SMTDIVISIONDETAIL SMT ON SMT.DIVISIONCODE = RFT.FINDIVISION
				WHERE (C.CUSTID IN ( SELECT DISTINCT FINANCEMAIN.CUSTID FROM FINANCEMAIN)) AND (C.CUSTTYPECODE IN (SELECT RMTCUSTTYPES.CUSTTYPECODE FROM RMTCUSTTYPES WHERE RMTCUSTTYPES.CUSTTYPECTG = 'RETAIL'))
				UNION ALL
				SELECT C.CUSTID,
					FM.FINID,
					FM.FINREFERENCE,
					3 OWNERSHIP,
					PD.LATESTRPYDATE,
					SMT.ENTITYCODE
				FROM FINGUARANTORSDETAILS GD
				JOIN CUSTOMERS C ON C.CUSTCIF = GD.GUARANTORCIF
				JOIN FINANCEMAIN FM ON FM.FINID = GD.FINID
				JOIN FINPFTDETAILS PD ON PD.FINID = GD.FINID
				JOIN RMTFINANCETYPES RFT ON RFT.FINTYPE = PD.FINTYPE
				JOIN SMTDIVISIONDETAIL SMT ON SMT.DIVISIONCODE = RFT.FINDIVISION
				WHERE (C.CUSTID IN ( SELECT DISTINCT FINANCEMAIN.CUSTID FROM FINANCEMAIN)) AND (C.CUSTTYPECODE IN (SELECT RMTCUSTTYPES.CUSTTYPECODE FROM RMTCUSTTYPES WHERE RMTCUSTTYPES.CUSTTYPECTG = 'RETAIL'))
				UNION ALL
				SELECT C.CUSTID,
					FM.FINID,
					FM.FINREFERENCE,
					4 OWNERSHIP,
					PD.LATESTRPYDATE,
					SMT.ENTITYCODE
				FROM FINJOINTACCOUNTDETAILS JA
				JOIN CUSTOMERS C ON C.CUSTCIF = JA.CUSTCIF
				JOIN FINANCEMAIN FM ON FM.FINID = JA.FINID
				JOIN FINPFTDETAILS PD ON PD.FINID = FM.FINID
				JOIN RMTFINANCETYPES RFT ON RFT.FINTYPE = PD.FINTYPE
				JOIN SMTDIVISIONDETAIL SMT ON SMT.DIVISIONCODE = RFT.FINDIVISION
				WHERE (C.CUSTID IN ( SELECT DISTINCT FINANCEMAIN.CUSTID FROM FINANCEMAIN)) AND (C.CUSTTYPECODE IN (SELECT RMTCUSTTYPES.CUSTTYPECODE FROM RMTCUSTTYPES WHERE RMTCUSTTYPES.CUSTTYPECTG = 'RETAIL'))
			]]>	
		</createView>
	</changeSet>

	<changeSet id="ST#2367.52_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'cibil_customer_extarct_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.53_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'restructure_details_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2367.53" author="Gopal.p" dbms="postgresql,mssql">
		<createView viewName="RESTRUCTURE_DETAILS_VIEW" replaceIfExists="true"> 
			<![CDATA[
				SELECT T1.ID,
					fm.FINID,
					fm.FINREFERENCE,
				    T1.RESTRUCTURETYPE,
				    T1.EMIHLDPERIOD,
				    T1.PRIHLDPERIOD,
				    T1.EMIPERIODS,
				    T1.TOTNOOFRESTRUCTURE,
				    T1.RECALCULATIONTYPE,
				    T1.SERVICEREQUESTNO,
				    T1.REMARK,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T1.OLDBUCKET,
				    T1.NEWBUCKET,
				    T1.OLDEMIOS,
				    T1.NEWEMIOS,
				    T1.OLDBALTENURE,
				    T1.NEWBALTENURE,
				    T1.OLDMATURITY,
				    T1.NEWMATURITY,
				    T1.LASTBILLEDDATE,
				    T1.LASTBILLEDINSTNO,
				    T1.ACTLOANAMOUNT,
				    T1.OLDTENURE,
				    T1.NEWTENURE,
				    T1.OLDINTEREST,
				    T1.NEWINTEREST,
				    T1.OLDMAXUNPLANNEDEMI,
				    T1.NEWMAXUNPLANNEDEMI,
				    T1.OLDAVAILEDUNPLANEMI,
				    T1.NEWAVAILEDUNPLANEMI,
				    T1.OLDFINALEMI,
				    T1.NEWFINALEMI,
				    T1.TENORCHANGE,
				    T1.EMIRECAL,
				    T1.RESTRUCTUREDATE,
				    T1.RESTRUCTUREREASON,
				    T1.OLDDPD,
				    T1.NEWDPD,
				    T1.OLDCPZINTEREST,
				    T1.NEWCPZINTEREST,
				    T1.EMIHLDSTARTDATE,
				    T1.EMIHLDENDDATE,
				    T1.PRIHLDSTARTDATE,
				    T1.PRIHLDENDDATE,
				    T1.OLDPOSAMOUNT, 
				    T1.NEWPOSAMOUNT, 
				    T1.OLDEMIOVERDUE, 
				    T1.NEWEMIOVERDUE, 
				    T1.BOUNCECHARGE, 
				    T1.OLDPENALTYAMOUNT,
				    T1.NEWPENALTYAMOUNT, 
				    T1.OTHERCHARGE, 
				    T1.RESTRUCTURECHARGE,
				    T1.APPDATE,
					T2.RSTTYPECODE, 
					T2.RSTTYPEDESC, 
				    T1.FINCURRASSETVALUE,
				    T1.OLDEXTODDAYS, 
				    T1.NEWEXTODDAYS,
				    T1.REPAYPROFITRATE,
					T1.GRCMAXAMOUNT,
					T1.BASERATE,
					T1.SPLRATE,
					T1.MARGIN,
					T1.RECEIPTID
				FROM RESTRUCTURE_DETAILS_TEMP T1 
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
			  	INNER JOIN RESTRUCTURE_TYPES T2 ON CAST(T1.RESTRUCTURETYPE AS BIGINT) = T2.ID
				UNION ALL	 
		 		SELECT T1.ID, 
				    FM.FINID,
				    FM.FINREFERENCE,
				    T1.RESTRUCTURETYPE,
				    T1.EMIHLDPERIOD,
				    T1.PRIHLDPERIOD,
				    T1.EMIPERIODS,
				    T1.TOTNOOFRESTRUCTURE,
				    T1.RECALCULATIONTYPE,
				    T1.SERVICEREQUESTNO,
				    T1.REMARK,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T1.OLDBUCKET,
				    T1.NEWBUCKET,
				    T1.OLDEMIOS,
				    T1.NEWEMIOS,
				    T1.OLDBALTENURE,
				    T1.NEWBALTENURE,
				    T1.OLDMATURITY,
				    T1.NEWMATURITY,
				    T1.LASTBILLEDDATE,
				    T1.LASTBILLEDINSTNO,
				    T1.ACTLOANAMOUNT,
				    T1.OLDTENURE,
				    T1.NEWTENURE,
				    T1.OLDINTEREST,
				    T1.NEWINTEREST,
				    T1.OLDMAXUNPLANNEDEMI,
				    T1.NEWMAXUNPLANNEDEMI,
				    T1.OLDAVAILEDUNPLANEMI,
				    T1.NEWAVAILEDUNPLANEMI,
				    T1.OLDFINALEMI,
				    T1.NEWFINALEMI,
				    T1.TENORCHANGE,
				    T1.EMIRECAL,
				    T1.RESTRUCTUREDATE,
				    T1.RESTRUCTUREREASON,
				    T1.OLDDPD,
				    T1.NEWDPD,
				    T1.OLDCPZINTEREST,
				    T1.NEWCPZINTEREST,
				    T1.EMIHLDSTARTDATE,
				    T1.EMIHLDENDDATE,
				    T1.PRIHLDSTARTDATE,
				    T1.PRIHLDENDDATE,
				    T1.OLDPOSAMOUNT, 
				    T1.NEWPOSAMOUNT, 
				    T1.OLDEMIOVERDUE, 
				    T1.NEWEMIOVERDUE, 
				    T1.BOUNCECHARGE, 
				    T1.OLDPENALTYAMOUNT,
				    T1.NEWPENALTYAMOUNT, 
				    T1.OTHERCHARGE, 
				    T1.RESTRUCTURECHARGE,
				    T1.APPDATE,
					T2.RSTTYPECODE, 
					T2.RSTTYPEDESC, 
				    T1.FINCURRASSETVALUE,
				    T1.OLDEXTODDAYS, 
				    T1.NEWEXTODDAYS,
				    T1.REPAYPROFITRATE,
					T1.GRCMAXAMOUNT,
					T1.BASERATE,
					T1.SPLRATE,
					T1.MARGIN,
					T1.RECEIPTID
				FROM RESTRUCTURE_DETAILS T1 
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				INNER JOIN RESTRUCTURE_TYPES T2 ON CAST(T1.RESTRUCTURETYPE AS BIGINT) = T2.ID
				WHERE NOT EXISTS (SELECT 1 FROM RESTRUCTURE_DETAILS_TEMP WHERE ID = T1.ID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.53" author="Gopal.p" dbms="oracle">
		<createView viewName="RESTRUCTURE_DETAILS_VIEW" replaceIfExists="true"> 
			<![CDATA[
				SELECT T1.ID, 
				    FM.FINID,
				    FM.FINREFERENCE,
				    T1.RESTRUCTURETYPE,
				    T1.EMIHLDPERIOD,
				    T1.PRIHLDPERIOD,
				    T1.EMIPERIODS,
				    T1.TOTNOOFRESTRUCTURE,
				    T1.RECALCULATIONTYPE,
				    T1.SERVICEREQUESTNO,
				    T1.REMARK,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T1.OLDBUCKET,
				    T1.NEWBUCKET,
				    T1.OLDEMIOS,
				    T1.NEWEMIOS,
				    T1.OLDBALTENURE,
				    T1.NEWBALTENURE,
				    T1.OLDMATURITY,
				    T1.NEWMATURITY,
				    T1.LASTBILLEDDATE,
				    T1.LASTBILLEDINSTNO,
				    T1.ACTLOANAMOUNT,
				    T1.OLDTENURE,
				    T1.NEWTENURE,
				    T1.OLDINTEREST,
				    T1.NEWINTEREST,
				    T1.OLDMAXUNPLANNEDEMI,
				    T1.NEWMAXUNPLANNEDEMI,
				    T1.OLDAVAILEDUNPLANEMI,
				    T1.NEWAVAILEDUNPLANEMI,
				    T1.OLDFINALEMI,
				    T1.NEWFINALEMI,
				    T1.TENORCHANGE,
				    T1.EMIRECAL,
				    T1.RESTRUCTUREDATE,
				    T1.RESTRUCTUREREASON,
				    T1.OLDDPD,
				    T1.NEWDPD,
				    T1.OLDCPZINTEREST,
				    T1.NEWCPZINTEREST,
				    T1.EMIHLDSTARTDATE,
				    T1.EMIHLDENDDATE,
				    T1.PRIHLDSTARTDATE,
				    T1.PRIHLDENDDATE,
				    T1.OLDPOSAMOUNT, 
				    T1.NEWPOSAMOUNT, 
				    T1.OLDEMIOVERDUE, 
				    T1.NEWEMIOVERDUE, 
				    T1.BOUNCECHARGE, 
				    T1.OLDPENALTYAMOUNT,
				    T1.NEWPENALTYAMOUNT, 
				    T1.OTHERCHARGE, 
				    T1.RESTRUCTURECHARGE,
				    T1.APPDATE,
					T2.RSTTYPECODE, 
					T2.RSTTYPEDESC, 
				    T1.FINCURRASSETVALUE,
				    T1.OLDEXTODDAYS, 
				    T1.NEWEXTODDAYS,
				    T1.REPAYPROFITRATE,
					T1.GRCMAXAMOUNT,
					T1.BASERATE,
					T1.SPLRATE,
					T1.MARGIN,
					T1.RECEIPTID
				FROM RESTRUCTURE_DETAILS_TEMP T1 
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
			  	INNER JOIN RESTRUCTURE_TYPES T2 ON CAST(T1.RESTRUCTURETYPE AS number) = T2.ID
				UNION ALL	 
		 		SELECT T1.ID, 
				    FM.FINID,
				    FM.FINREFERENCE,
				    T1.RESTRUCTURETYPE,
				    T1.EMIHLDPERIOD,
				    T1.PRIHLDPERIOD,
				    T1.EMIPERIODS,
				    T1.TOTNOOFRESTRUCTURE,
				    T1.RECALCULATIONTYPE,
				    T1.SERVICEREQUESTNO,
				    T1.REMARK,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T1.OLDBUCKET,
				    T1.NEWBUCKET,
				    T1.OLDEMIOS,
				    T1.NEWEMIOS,
				    T1.OLDBALTENURE,
				    T1.NEWBALTENURE,
				    T1.OLDMATURITY,
				    T1.NEWMATURITY,
				    T1.LASTBILLEDDATE,
				    T1.LASTBILLEDINSTNO,
				    T1.ACTLOANAMOUNT,
				    T1.OLDTENURE,
				    T1.NEWTENURE,
				    T1.OLDINTEREST,
				    T1.NEWINTEREST,
				    T1.OLDMAXUNPLANNEDEMI,
				    T1.NEWMAXUNPLANNEDEMI,
				    T1.OLDAVAILEDUNPLANEMI,
				    T1.NEWAVAILEDUNPLANEMI,
				    T1.OLDFINALEMI,
				    T1.NEWFINALEMI,
				    T1.TENORCHANGE,
				    T1.EMIRECAL,
				    T1.RESTRUCTUREDATE,
				    T1.RESTRUCTUREREASON,
				    T1.OLDDPD,
				    T1.NEWDPD,
				    T1.OLDCPZINTEREST,
				    T1.NEWCPZINTEREST,
				    T1.EMIHLDSTARTDATE,
				    T1.EMIHLDENDDATE,
				    T1.PRIHLDSTARTDATE,
				    T1.PRIHLDENDDATE,
				    T1.OLDPOSAMOUNT, 
				    T1.NEWPOSAMOUNT, 
				    T1.OLDEMIOVERDUE, 
				    T1.NEWEMIOVERDUE, 
				    T1.BOUNCECHARGE, 
				    T1.OLDPENALTYAMOUNT,
				    T1.NEWPENALTYAMOUNT, 
				    T1.OTHERCHARGE, 
				    T1.RESTRUCTURECHARGE,
				    T1.APPDATE,
					T2.RSTTYPECODE, 
					T2.RSTTYPEDESC, 
				    T1.FINCURRASSETVALUE,
				    T1.OLDEXTODDAYS, 
				    T1.NEWEXTODDAYS,
				    T1.REPAYPROFITRATE,
					T1.GRCMAXAMOUNT,
					T1.BASERATE,
					T1.SPLRATE,
					T1.MARGIN,
					T1.RECEIPTID
				FROM RESTRUCTURE_DETAILS T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				INNER JOIN RESTRUCTURE_TYPES T2 ON CAST(T1.RESTRUCTURETYPE AS number) = T2.ID
				WHERE NOT EXISTS (SELECT 1 FROM RESTRUCTURE_DETAILS_TEMP WHERE ID = T1.ID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2367.53_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'restructure_details_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#556.34_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'restructure_details_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#556.34" author="Gopal.p" dbms="postgresql,mssql">
		<createView viewName="Restructure_Details_AView" replaceIfExists="true"> 
		 	<![CDATA[
		 		 SELECT T1.ID, 
				    FM.FINID,
				    FM.FINREFERENCE,
				    T1.RESTRUCTURETYPE,
				    T1.EMIHLDPERIOD,
				    T1.PRIHLDPERIOD,
				    T1.EMIPERIODS,
				    T1.TOTNOOFRESTRUCTURE,
				    T1.RECALCULATIONTYPE,
				    T1.SERVICEREQUESTNO,
				    T1.REMARK,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T1.OLDBUCKET,
				    T1.NEWBUCKET,
				    T1.OLDEMIOS,
				    T1.NEWEMIOS,
				    T1.OLDBALTENURE,
				    T1.NEWBALTENURE,
				    T1.OLDMATURITY,
				    T1.NEWMATURITY,
				    T1.LASTBILLEDDATE,
				    T1.LASTBILLEDINSTNO,
				    T1.ACTLOANAMOUNT,
				    T1.OLDTENURE,
				    T1.NEWTENURE,
				    T1.OLDINTEREST,
				    T1.NEWINTEREST,
				    T1.OLDMAXUNPLANNEDEMI,
				    T1.NEWMAXUNPLANNEDEMI,
				    T1.OLDAVAILEDUNPLANEMI,
				    T1.NEWAVAILEDUNPLANEMI,
				    T1.OLDFINALEMI,
				    T1.NEWFINALEMI,
				    T1.TENORCHANGE,
				    T1.EMIRECAL,
				    T1.RESTRUCTUREDATE,
				    T1.RESTRUCTUREREASON,
				    T1.OLDDPD,
				    T1.NEWDPD,
				    T1.OLDCPZINTEREST,
				    T1.NEWCPZINTEREST,
				    T1.EMIHLDSTARTDATE,
				    T1.EMIHLDENDDATE,
				    T1.PRIHLDSTARTDATE,
				    T1.PRIHLDENDDATE,
				    T1.OLDPOSAMOUNT, 
				    T1.NEWPOSAMOUNT, 
				    T1.OLDEMIOVERDUE, 
				    T1.NEWEMIOVERDUE, 
				    T1.BOUNCECHARGE, 
				    T1.OLDPENALTYAMOUNT,
				    T1.NEWPENALTYAMOUNT, 
				    T1.OTHERCHARGE, 
				    T1.RESTRUCTURECHARGE,
				    T1.APPDATE,
					T2.RSTTYPECODE, 
					T2.RSTTYPEDESC, 
				    T1.FINCURRASSETVALUE,
				    T1.OLDEXTODDAYS, 
				    T1.NEWEXTODDAYS,
				    T1.REPAYPROFITRATE,
					T1.GRCMAXAMOUNT,
					T1.BASERATE,
					T1.SPLRATE,
					T1.MARGIN,
					T1.RECEIPTID
				FROM RESTRUCTURE_DETAILS T1 
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				INNER JOIN RESTRUCTURE_TYPES T2 ON CAST(T1.RESTRUCTURETYPE AS BIGINT) = T2.ID 
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#556.34" author="Gopal.p" dbms="oracle">
		<createView viewName="RESTRUCTURE_DETAILS_AVIEW" replaceIfExists="true"> 
			<![CDATA[
		 		 SELECT T1.ID, 
				    FM.FINID,
				    FM.FINREFERENCE,
				    T1.RESTRUCTURETYPE,
				    T1.EMIHLDPERIOD,
				    T1.PRIHLDPERIOD,
				    T1.EMIPERIODS,
				    T1.TOTNOOFRESTRUCTURE,
				    T1.RECALCULATIONTYPE,
				    T1.SERVICEREQUESTNO,
				    T1.REMARK,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T1.OLDBUCKET,
				    T1.NEWBUCKET,
				    T1.OLDEMIOS,
				    T1.NEWEMIOS,
				    T1.OLDBALTENURE,
				    T1.NEWBALTENURE,
				    T1.OLDMATURITY,
				    T1.NEWMATURITY,
				    T1.LASTBILLEDDATE,
				    T1.LASTBILLEDINSTNO,
				    T1.ACTLOANAMOUNT,
				    T1.OLDTENURE,
				    T1.NEWTENURE,
				    T1.OLDINTEREST,
				    T1.NEWINTEREST,
				    T1.OLDMAXUNPLANNEDEMI,
				    T1.NEWMAXUNPLANNEDEMI,
				    T1.OLDAVAILEDUNPLANEMI,
				    T1.NEWAVAILEDUNPLANEMI,
				    T1.OLDFINALEMI,
				    T1.NEWFINALEMI,
				    T1.TENORCHANGE,
				    T1.EMIRECAL,
				    T1.RESTRUCTUREDATE,
				    T1.RESTRUCTUREREASON,
				    T1.OLDDPD,
				    T1.NEWDPD,
				    T1.OLDCPZINTEREST,
				    T1.NEWCPZINTEREST,
				    T1.EMIHLDSTARTDATE,
				    T1.EMIHLDENDDATE,
				    T1.PRIHLDSTARTDATE,
				    T1.PRIHLDENDDATE,
				    T1.OLDPOSAMOUNT, 
				    T1.NEWPOSAMOUNT, 
				    T1.OLDEMIOVERDUE, 
				    T1.NEWEMIOVERDUE, 
				    T1.BOUNCECHARGE, 
				    T1.OLDPENALTYAMOUNT,
				    T1.NEWPENALTYAMOUNT, 
				    T1.OTHERCHARGE, 
				    T1.RESTRUCTURECHARGE,
				    T1.APPDATE,
					T2.RSTTYPECODE, 
					T2.RSTTYPEDESC, 
				    T1.FINCURRASSETVALUE,
				    T1.OLDEXTODDAYS, 
				    T1.NEWEXTODDAYS,
				    T1.REPAYPROFITRATE,
					T1.GRCMAXAMOUNT,
					T1.BASERATE,
					T1.SPLRATE,
					T1.MARGIN,
					T1.RECEIPTID
				FROM RESTRUCTURE_DETAILS T1 
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				INNER JOIN RESTRUCTURE_TYPES T2 ON CAST(T1.RESTRUCTURETYPE AS number) = T2.ID 
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#556.34_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'restructure_details_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#556.35_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'extendedfielddetail_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#556.35" author="Gopal.p">
		<createView replaceIfExists="true" viewName="EXTENDEDFIELDDETAIL_AVIEW">
			<![CDATA[
				SELECT T1.MODULEID,
				    T1.FIELDNAME,
				    T2.MODULENAME LOVDESCMODULENAME,
				    T2.SUBMODULENAME LOVDESCSUBMODULENAME,
				    T1.FIELDTYPE,
				    T1.FIELDLENGTH,
				    T1.FIELDPREC,
				    T1.FIELDLABEL,
				    T1.FIELDMANDATORY,
				    T1.FIELDCONSTRAINT,
				    T1.FIELDSEQORDER,
				    T1.FIELDLIST,
				    T1.FIELDDEFAULTVALUE,
				    T1.FIELDMINVALUE,
				    T1.FIELDMAXVALUE,
				    T1.FIELDUNIQUE,
				    T1.EXTENDEDTYPE,
				    T1.FILTERS,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T1.MULTILINE,
				    T1.PARENTTAG,
				    T1.INPUTELEMENT,
				    T1.EDITABLE,
				    T1.ALLOWINRULE,
				    T1.SCRIPTLET,
				    T1.VISIBLE,
				    T1.VALFROMSCRIPT,
					T1.MAINTALWD,
					T1.DEFVALUE,
					T1.AGRFIELD
				FROM EXTENDEDFIELDDETAIL T1
				JOIN EXTENDEDFIELDHEADER T2 ON T1.MODULEID = T2.MODULEID	
			]]>
        </createView>
	</changeSet>

	<changeSet id="ST#556.35_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'extendedfielddetail_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#556.36_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'extendedfielddetail_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#556.36" author="Gopal.p">
		<createView replaceIfExists="true" viewName="EXTENDEDFIELDDETAIL_VIEW">
			<![CDATA[
				SELECT T1.MODULEID,
			   		T1.FIELDNAME,
			   		T2.MODULENAME LOVDESCMODULENAME,
			    	T2.SUBMODULENAME LOVDESCSUBMODULENAME,
			    	T1.FIELDTYPE,
			    	T1.FIELDLENGTH,
			    	T1.FIELDPREC,
			    	T1.FIELDLABEL,
			    	T1.FIELDMANDATORY,
			    	T1.FIELDCONSTRAINT,
			    	T1.FIELDSEQORDER,
			   		T1.FIELDLIST,
			    	T1.FIELDDEFAULTVALUE,
			    	T1.FIELDMINVALUE,
			    	T1.FIELDMAXVALUE,
			    	T1.FIELDUNIQUE,
			    	T1.EXTENDEDTYPE,
			    	T1.FILTERS,
			    	T1.VERSION,
			    	T1.LASTMNTBY,
			    	T1.LASTMNTON,
			    	T1.RECORDSTATUS,
			    	T1.ROLECODE,
			    	T1.NEXTROLECODE,
			    	T1.TASKID,
			    	T1.NEXTTASKID,
			    	T1.RECORDTYPE,
			    	T1.WORKFLOWID,
			    	T1.MULTILINE,
			    	T1.PARENTTAG,
			    	T1.INPUTELEMENT,
			    	T1.EDITABLE,
			    	T1.ALLOWINRULE,
			    	T1.SCRIPTLET,
			    	T1.VISIBLE,
			    	T1.VALFROMSCRIPT,
					T1.MAINTALWD,
					T1.DEFVALUE,
					T1.AGRFIELD
				FROM EXTENDEDFIELDDETAIL_TEMP T1
				JOIN EXTENDEDFIELDHEADER_TEMP T2 ON T1.MODULEID = T2.MODULEID
				UNION ALL
				SELECT T1.MODULEID,
			    	T1.FIELDNAME,
				    T2.MODULENAME LOVDESCMODULENAME,
				    T2.SUBMODULENAME LOVDESCSUBMODULENAME,
				    T1.FIELDTYPE,
				    T1.FIELDLENGTH,
				    T1.FIELDPREC,
				    T1.FIELDLABEL,
				    T1.FIELDMANDATORY,
				    T1.FIELDCONSTRAINT,
				    T1.FIELDSEQORDER,
				    T1.FIELDLIST,
				    T1.FIELDDEFAULTVALUE,
				    T1.FIELDMINVALUE,
				    T1.FIELDMAXVALUE,
				    T1.FIELDUNIQUE,
				    T1.EXTENDEDTYPE,
				    T1.FILTERS,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T1.MULTILINE,
				    T1.PARENTTAG,
				    T1.INPUTELEMENT,
				    T1.EDITABLE,
				    T1.ALLOWINRULE,
				    T1.SCRIPTLET,
				    T1.VISIBLE,
				    T1.VALFROMSCRIPT,
					T1.MAINTALWD,
					T1.DEFVALUE,
					T1.AGRFIELD
				FROM EXTENDEDFIELDDETAIL T1
				JOIN EXTENDEDFIELDHEADER T2 ON T1.MODULEID = T2.MODULEID
				WHERE NOT (EXISTS (SELECT 1  FROM EXTENDEDFIELDDETAIL_TEMP 
					WHERE EXTENDEDFIELDDETAIL_TEMP.MODULEID = T1.MODULEID AND EXTENDEDFIELDDETAIL_TEMP.FIELDNAME = T1.FIELDNAME))	
			]]>
        </createView>
	</changeSet>

	<changeSet id="ST#556.36_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'extendedfielddetail_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#556.37.2_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'int_mandate_request_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#556.37.2" author="Gopal.p">
		<createView replaceIfExists="true" viewName="INT_MANDATE_REQUEST_VIEW">
		 	<![CDATA[
				SELECT M.MANDATEID,
					M.DOCUMENTNAME,
					BD.BANKSHORTCODE BANKCODE,
					BD.BANKNAME,
					CASE WHEN LB.BRANCHCODE IS NULL THEN CB.BRANCHCODE
						ELSE LB.BRANCHCODE END BRANCHCODE,
					CASE WHEN LB.BRANCHDESC IS NULL THEN CB.BRANCHDESC
						ELSE LB.BRANCHDESC END BRANCHDESC,
					CUST.CUSTCIF,
					CUST.CUSTSHRTNAME,
					CUST.CUSTCOREBANK,
					FT.FINTYPEDESC FINTYPE,
					FIN.FINID,
					FIN.FINREFERENCE,
					COALESCE((( SELECT SUM(T.TOTALAMOUNT) SUM
						FROM ( SELECT MAX(FSD.REPAYAMOUNT + FSD.FEESCHD) TOTALAMOUNT
							FROM FINSCHEDULEDETAILS FSD
							JOIN FINANCEMAIN FM ON FM.FINID = FSD.FINID AND FM.CUSTID = M.CUSTID
                  			GROUP BY FM.FINID) T)) / CCY.CCYMINORCCYUNITS, 0) CUST_EMI,
    				COALESCE((( SELECT SUM(T.TOTALAMOUNT) SUM
           				FROM ( SELECT MAX(FSD.REPAYAMOUNT + FSD.FEESCHD) TOTALAMOUNT
                   			FROM FINSCHEDULEDETAILS FSD
                  			WHERE (FSD.REPAYONSCHDATE = 1 OR FSD.PFTONSCHDATE = 1) AND (FSD.FINID IN 
                  				(SELECT FINANCEMAIN.FINID FROM FINANCEMAIN
                          			WHERE FINANCEMAIN.MANDATEID = M.MANDATEID))
                  			GROUP BY FSD.FINID) T)) / CCY.CCYMINORCCYUNITS, 0) EMI,
        			CASE M.OPENMANDATE WHEN 1 THEN 'new open ecs'
            			ELSE 'no open ecs' END OPENMANDATE,
    				M.ACCNUMBER,
        			CASE WHEN M.ACCTYPE = '10' THEN 'savings account'
            			WHEN M.ACCTYPE = '11' THEN 'current account'
            			WHEN M.ACCTYPE = '12' THEN 'cash credit account'
            			ELSE M.ACCTYPE END ACCTYPE,
    				M.ACCHOLDERNAME,
    				BB.MICR,
    				BB.IFSC,
    				BB.ADDOFBRANCH,
    				( SELECT MIN(FINPFTDETAILS.FIRSTREPAYDATE) MIN FROM FINPFTDETAILS
          					WHERE (FINPFTDETAILS.FINID IN (SELECT FINANCEMAIN.FINID
                   			FROM FINANCEMAIN WHERE FINANCEMAIN.MANDATEID = M.MANDATEID))) FIRSTDUEDATE,
    				(SELECT MAX(FINSCHEDULEDETAILS.SCHDATE) MAX FROM FINSCHEDULEDETAILS
          					WHERE (FINSCHEDULEDETAILS.REPAYONSCHDATE = 1 OR FINSCHEDULEDETAILS.PFTONSCHDATE = 1) AND
          					 (FINSCHEDULEDETAILS.FINID IN (SELECT FINANCEMAIN.FINID
                   			FROM FINANCEMAIN WHERE FINANCEMAIN.MANDATEID = M.MANDATEID))) EMIENDDATE,
    				COALESCE(M.MAXLIMIT, 0) MAXLIMIT,
    				COALESCE(( SELECT SUM(T.MANDATEDEBITAMOUNT) SUM FROM (SELECT MAX(FINSCHEDULEDETAILS.REPAYAMOUNT + FINSCHEDULEDETAILS.FEESCHD) MANDATEDEBITAMOUNT
							FROM FINSCHEDULEDETAILS WHERE (FINSCHEDULEDETAILS.REPAYONSCHDATE = 1 OR FINSCHEDULEDETAILS.PFTONSCHDATE = 1) 
							AND (FINSCHEDULEDETAILS.FINID IN (SELECT FINANCEMAIN.FINID FROM FINANCEMAIN
                          		WHERE FINANCEMAIN.MANDATEID = M.MANDATEID))
                  			GROUP BY FINSCHEDULEDETAILS.FINID) T), 0) / CCY.CCYMINORCCYUNITS DEBITAMOUNT,
    				FIN.NUMBEROFTERMS,
				    M.PERIODICITY,
				    M.STARTDATE,
				    M.EXPIRYDATE,
				    FIN.APPLICATIONNO,
				    M.MANDATETYPE,
				    M.STATUS,
				    M.INPUTDATE,
				    M.RECORDSTATUS,
				    M.RECORDTYPE,
				    M.MANDATECCY,
				    COALESCE(CCY.CCYMINORCCYUNITS, 100) CCYMINORCCYUNITS,
				    M.ENTITYCODE,
				    CP.PHONENUMBER,
				    CE.CUSTEMAIL,
				    PB.PARTNERBANKNAME,
				    M.LASTMNTON,
				    BB.BRANCHDESC BANK_BRANCH_NAME,
				    ET.ENTITYDESC,
				    PB.UTILITYCODE,
				    PB.SPONSORBANKCODE,
				    M.PARTNERBANKID,
				    PB.PARTNERBANKCODE,
				    PB.BRANCHIFSCCODE
   				FROM MANDATES M
				JOIN BANKBRANCHES BB ON BB.BANKBRANCHID = M.BANKBRANCHID
				JOIN BMTBANKDETAIL BD ON BD.BANKCODE = BB.BANKCODE
				JOIN CUSTOMERS CUST ON CUST.CUSTID = M.CUSTID
				JOIN RMTBRANCHES CB ON CB.BRANCHCODE = CUST.CUSTDFTBRANCH
				LEFT JOIN PARTNERBANKS PB ON PB.PARTNERBANKID = M.PARTNERBANKID
				LEFT JOIN CUSTOMEREMAILS CE ON CE.CUSTID = CUST.CUSTID AND CE.CUSTEMAILPRIORITY = 5
				LEFT JOIN CUSTOMERPHONENUMBERS CP ON CP.PHONECUSTID = CUST.CUSTID AND CP.PHONETYPEPRIORITY = 5
				LEFT JOIN RMTCURRENCIES CCY ON CCY.CCYCODE = M.MANDATECCY
				LEFT JOIN FINANCEMAIN FIN ON M.ORGREFERENCE = FIN.FINREFERENCE
				LEFT JOIN RMTBRANCHES LB ON LB.BRANCHCODE = FIN.FINBRANCH
				LEFT JOIN RMTFINANCETYPES FT ON FIN.FINTYPE = FT.FINTYPE
				LEFT JOIN ENTITY ET ON M.ENTITYCODE = ET.ENTITYCODE
  				WHERE M.STATUS = 'NEW' AND NOT (M.MANDATEID IN ( SELECT MANDATE_REQUESTS.MANDATEID FROM MANDATE_REQUESTS
          			WHERE MANDATE_REQUESTS.STATUS = 'AC' OR MANDATE_REQUESTS.STATUS = 'NEW'))
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#556.37.2_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'int_mandate_request_view');
			]]>
		</sql>
	</changeSet>

	<!-- Dependency with Finance Main /Receipt Views -->

	<changeSet id="ST#556.37.1_pre" author="Gopal.p" dbms="postgresql">
		<sql> 
			<![CDATA[ 
				select deps_save_and_drop_dependencies ('plf', 'verification_tv_view'); 
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#556.37.1" author="Gopal.p">
		<createView viewName="VERIFICATION_TV_VIEW" replaceIfExists="true">
			<![CDATA[	 
				SELECT TV.VERIFICATIONID,
				    TV.AGENTCODE,
				    TV.AGENTNAME,
				    TV.TYPE,
				    TV.VERIFIEDDATE,
				    TV.STATUS,
				    CS.COLLATERALTYPE,
				    CS.COLLATERALCCY,
				    CS.COLLATERALLOC,
				    TV.REASON,
				    TV.VALUATIONAMOUNT,
				    R1.CODE AS REASONCODE,
				    R1.DESCRIPTION AS REASONDESC,
				    TV.SUMMARYREMARKS,
				    TV.SOURCEFORMNAME,
				    TV.VERIFICATIONFORMNAME,
				    TV.DOCUMENTNAME,
				    TV.DOCUMENTREF,
				    TV.VERSION,
				    TV.LASTMNTBY,
				    TV.LASTMNTON,
				    TV.RECORDSTATUS,
				    TV.ROLECODE,
				    TV.NEXTROLECODE,
				    TV.TASKID,
				    TV.NEXTTASKID,
				    TV.RECORDTYPE,
				    TV.WORKFLOWID,
				    TV.OBSERVATIONREMARKS,
				    C.CUSTCIF AS CIF,
				    V.KEYREFERENCE,
				    V.CREATEDON,
				    V.AGENCY,
				    A.DEALERNAME AS AGENCYNAME,
				    A.DEALERCITY AS AGENCYCITY,
				    V.CUSTID,
				    C.CUSTSHRTNAME AS CUSTNAME,
				    V.VERIFICATIONCATEGORY,
				    CS.COLLATERALREF,
				    CPNH.PHONENUMBER AS CONTACTNUMBER1,
				    CPNL.PHONENUMBER AS CONTACTNUMBER2,
				    TV.VALASPERPE,
				    TV.FINALVALAMT,
				    TV.DECISIONONVAL,
				    TV.FINALVALREMARKS,
				    FM.PRODUCTCATEGORY,
				    FM.FINTYPE AS LOANTYPE,
				    FM.LOVDESCFINTYPENAME AS LOVDESCLOANTYPENAME,
				    FM.SOURCINGBRANCH,
				    FM.LOVDESCSOURCINGBRANCH
				FROM VERIFICATION_TV_TEMP TV
				JOIN VERIFICATIONS V ON V.ID = TV.VERIFICATIONID
				JOIN (SELECT CST.COLLATERALTYPE, CST.COLLATERALCCY, CST.COLLATERALLOC, CST.COLLATERALREF FROM COLLATERALSETUP_TEMP CST
				      UNION
				      SELECT CSP.COLLATERALTYPE, CSP.COLLATERALCCY, CSP.COLLATERALLOC, CSP.COLLATERALREF FROM COLLATERALSETUP CSP
				      WHERE NOT EXISTS ( SELECT 1 FROM COLLATERALSETUP_TEMP WHERE COLLATERALSETUP_TEMP.COLLATERALREF = CSP.COLLATERALREF)
				      ) CS ON CS.COLLATERALREF = V.REFERENCEFOR
				JOIN COLLATERALSTRUCTURE CST ON CST.COLLATERALTYPE = CS.COLLATERALTYPE
				LEFT JOIN AMTVEHICLEDEALER A ON A.DEALERID = V.AGENCY
				LEFT JOIN CUSTOMERS C ON C.CUSTID = V.CUSTID
				LEFT JOIN CUSTOMERPHONENUMBERS CPNH ON CPNH.PHONECUSTID = C.CUSTID AND CPNH.PHONETYPEPRIORITY = 5
				LEFT JOIN CUSTOMERPHONENUMBERS CPNL ON CPNL.PHONECUSTID = C.CUSTID AND CPNL.PHONETYPEPRIORITY = 4
				LEFT JOIN REASONS R1 ON R1.ID = TV.REASON
				JOIN FINANCEMAIN_VIEW FM ON FM.FINREFERENCE = V.KEYREFERENCE
				UNION ALL
				SELECT TV.VERIFICATIONID,
					TV.AGENTCODE,
					TV.AGENTNAME,
					TV.TYPE,
					TV.VERIFIEDDATE,
					TV.STATUS,
					CS.COLLATERALTYPE,
					CS.COLLATERALCCY,
					CS.COLLATERALLOC,
					TV.REASON,
					TV.VALUATIONAMOUNT,
					R1.CODE AS REASONCODE,
					R1.DESCRIPTION AS REASONDESC,
					TV.SUMMARYREMARKS,
					TV.SOURCEFORMNAME,
					TV.VERIFICATIONFORMNAME,
					TV.DOCUMENTNAME,
					TV.DOCUMENTREF,
					TV.VERSION,
					TV.LASTMNTBY,
					TV.LASTMNTON,
					TV.RECORDSTATUS,
					TV.ROLECODE,
					TV.NEXTROLECODE,
					TV.TASKID,
					TV.NEXTTASKID,
					TV.RECORDTYPE,
					TV.WORKFLOWID,
					TV.OBSERVATIONREMARKS,
					C.CUSTCIF AS CIF,
					V.KEYREFERENCE,
					V.CREATEDON,
					V.AGENCY,
					A.DEALERNAME AS AGENCYNAME,
					A.DEALERCITY AS AGENCYCITY,
					V.CUSTID,
					C.CUSTSHRTNAME AS CUSTNAME,
					V.VERIFICATIONCATEGORY,
					CS.COLLATERALREF,
					CPNH.PHONENUMBER AS CONTACTNUMBER1,
					CPNL.PHONENUMBER AS CONTACTNUMBER2,
					TV.VALASPERPE,
					TV.FINALVALAMT,
					TV.DECISIONONVAL,
					TV.FINALVALREMARKS,
					FM.PRODUCTCATEGORY,
					FM.FINTYPE AS LOANTYPE,
					FM.LOVDESCFINTYPENAME AS LOVDESCLOANTYPENAME,
					FM.SOURCINGBRANCH,
					FM.LOVDESCSOURCINGBRANCH
				FROM VERIFICATION_TV TV
				JOIN VERIFICATIONS V ON V.ID = TV.VERIFICATIONID
				JOIN (SELECT CST.COLLATERALTYPE, CST.COLLATERALCCY, CST.COLLATERALLOC, CST.COLLATERALREF FROM COLLATERALSETUP_TEMP CST
				      UNION
				      SELECT CSP.COLLATERALTYPE, CSP.COLLATERALCCY, CSP.COLLATERALLOC, CSP.COLLATERALREF FROM COLLATERALSETUP CSP
				      WHERE NOT EXISTS ( SELECT 1 FROM COLLATERALSETUP_TEMP WHERE COLLATERALSETUP_TEMP.COLLATERALREF = CSP.COLLATERALREF)
				      ) CS ON CS.COLLATERALREF = V.REFERENCEFOR
				JOIN COLLATERALSTRUCTURE CST ON CST.COLLATERALTYPE = CS.COLLATERALTYPE
				LEFT JOIN AMTVEHICLEDEALER A ON A.DEALERID = V.AGENCY
				LEFT JOIN CUSTOMERS C ON C.CUSTID = V.CUSTID
				LEFT JOIN CUSTOMERPHONENUMBERS CPNH ON CPNH.PHONECUSTID = C.CUSTID AND CPNH.PHONETYPEPRIORITY = 5
				LEFT JOIN CUSTOMERPHONENUMBERS CPNL ON CPNL.PHONECUSTID = C.CUSTID AND CPNL.PHONETYPEPRIORITY = 4
				LEFT JOIN REASONS R1 ON R1.ID = TV.REASON
				JOIN FINANCEMAIN_VIEW FM ON FM.FINREFERENCE = V.KEYREFERENCE
				WHERE NOT EXISTS (SELECT 1 FROM VERIFICATION_TV_TEMP WHERE VERIFICATION_TV_TEMP.VERIFICATIONID = TV.VERIFICATIONID)
		  		]]>
		</createView>
	</changeSet>

	<changeSet id="ST#556.37.1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'verification_tv_view');	
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#556.38_pre" author="Mounika.M" dbms="postgresql">
		<sql> 
			<![CDATA[ 
				select deps_save_and_drop_dependencies ('plf', 'collateralsmaintenance_view'); 
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#556.38" author="Mounika.M">
		<createView viewName="COLLATERALSMAINTENANCE_VIEW" replaceIfExists="true">
			<![CDATA[ 
				SELECT T1.FINID,
					T1.FINREFERENCE,
				    T1.FINBRANCH,
				    T1.FINTYPE,
				    T1.FINCCY,
				    T1.SCHEDULEMETHOD,
				    T1.PROFITDAYSBASIS,
				    T1.FINSTARTDATE,
				    T1.NUMBEROFTERMS,
				    T1.CUSTID,
				    T1.FINAMOUNT,
				    T1.MATURITYDATE,
				    T1.FINREPAYMENTAMOUNT,
				    T1.FINISACTIVE,
				    T1.BLACKLISTED,
				    T1.FEECHARGEAMT,
				    T1.GRACETERMS,
				    T1.ALLOWGRCPERIOD,
				    T1.GRCPERIODENDDATE,
				    T1.ALWMULTIDISB,
				    T1.DEFFERMENTS,
				    T1.ALLOWGRCPFTRVW,
				    T1.ALLOWREPAYRVW,
				    T1.LASTREPAYDATE,
				    T1.LASTREPAYPFTDATE,
				    T1.ALLOWEDDEFRPYCHANGE,
				    T1.AVAILEDDEFRPYCHANGE,
				    T1.MIGRATEDFINANCE,
				    T1.CLOSINGSTATUS,
				    T1.REPAYRATEBASIS,
				    T1.MANUALSCHEDULE,
				    T1.FINCURRASSETVALUE,
				    T1.AVAILEDUNPLANEMI,
				    T1.AVAILEDREAGEH,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.DOWNPAYMENT,
				    T1.PLANEMIHALW,
				    T1.CALTERMS,
				    T1.RATECHGANYDAY,
				    T1.FINASSETVALUE,
				    T2.CUSTCIF LOVDESCCUSTCIF,
				    T3.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
				    T3.FINDIVISION LOVDESCFINDIVISION,
				    T3.FINCATEGORY LOVDESCPRODUCTCODENAME,
				    T4.PRODUCTCATEGORY,
				    COALESCE(T9.NOINST, 0 ) NOINST,
				    COALESCE(T5.ROLEDESC, ${add.schema}FN_GET_ROLEDESC(T10.NEXTROLECODE)) LOVDESCREQUESTSTAGE,
				    T10.FINMAINTAINID,
				    T10.EVENT RCDMAINTAINSTS,
				    T10.NEXTROLECODE,
				    T10.RECORDSTATUS,
				    T10.RECORDTYPE,
				    T1.VERSION
				FROM FINMAINTAININSTRUCTIONS_TEMP T10
				JOIN FINANCEMAIN T1 ON T1.FINID = T10.FINID
				JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
				JOIN RMTFINANCETYPES T3 ON T1.FINTYPE = T3.FINTYPE
				LEFT JOIN SECROLES T5 ON T10.NEXTROLECODE = T5.ROLECD
				JOIN BMTPRODUCT T4 ON T3.FINCATEGORY = T4.PRODUCTCODE
				LEFT JOIN FINPFTDETAILS T9 ON T1.FINID = T9.FINID
				WHERE T10.EVENT = 'Collaterals'
				UNION ALL
				SELECT T1.FINID,
					T1.FINREFERENCE,
				    T1.FINBRANCH,
				    T1.FINTYPE,
				    T1.FINCCY,
				    T1.SCHEDULEMETHOD,
				    T1.PROFITDAYSBASIS,
				    T1.FINSTARTDATE,
				    T1.NUMBEROFTERMS,
				    T1.CUSTID,
				    T1.FINAMOUNT,
				    T1.MATURITYDATE,
				    T1.FINREPAYMENTAMOUNT,
				    T1.FINISACTIVE,
				    T1.BLACKLISTED,
				    T1.FEECHARGEAMT,
				    T1.GRACETERMS,
				    T1.ALLOWGRCPERIOD,
				    T1.GRCPERIODENDDATE,
				    T1.ALWMULTIDISB,
				    T1.DEFFERMENTS,
				    T1.ALLOWGRCPFTRVW,
				    T1.ALLOWREPAYRVW,
				    T1.LASTREPAYDATE,
				    T1.LASTREPAYPFTDATE,
				    T1.ALLOWEDDEFRPYCHANGE,
				    T1.AVAILEDDEFRPYCHANGE,
				    T1.MIGRATEDFINANCE,
				    T1.CLOSINGSTATUS,
				    T1.REPAYRATEBASIS,
				    T1.MANUALSCHEDULE,
				    T1.FINCURRASSETVALUE,
				    T1.AVAILEDUNPLANEMI,
				    T1.AVAILEDREAGEH,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.DOWNPAYMENT,
				    T1.PLANEMIHALW,
				    T1.CALTERMS,
				    T1.RATECHGANYDAY,
				    T1.FINASSETVALUE,
				    T2.CUSTCIF LOVDESCCUSTCIF,
				    T3.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
				    T3.FINDIVISION LOVDESCFINDIVISION,
				    T3.FINCATEGORY LOVDESCPRODUCTCODENAME,
				    T4.PRODUCTCATEGORY,
				    COALESCE(T9.NOINST, 0) NOINST,
				    NULL LOVDESCREQUESTSTAGE,
				    NULL FINMAINTAINID,
				    NULL RCDMAINTAINSTS,
				    NULL NEXTROLECODE,
				    NULL RECORDSTATUS,
				    NULL RECORDTYPE,
				    T1.VERSION
				FROM FINANCEMAIN T1
			    JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
			    JOIN RMTFINANCETYPES T3 ON T1.FINTYPE = T3.FINTYPE
			    LEFT JOIN SECROLES T5 ON T1.NEXTROLECODE = T5.ROLECD
			    JOIN BMTPRODUCT T4 ON T3.FINCATEGORY = T4.PRODUCTCODE
			    LEFT JOIN FINPFTDETAILS T9 ON T1.FINID = T9.FINID
				WHERE NOT EXISTS ( SELECT 1 FROM FINMAINTAININSTRUCTIONS_TEMP
					WHERE FINMAINTAININSTRUCTIONS_TEMP.FINID = T1.FINID)
			]]>
		</createView>
	</changeSet>
	<changeSet id="ST#556.38_post" author="Mounika.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'collateralsmaintenance_view');	
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#556.39_pre" author="Mounika.m" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemaintenance_aview'); 
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#556.39" author="Mounika.M">
		<createView viewName="FINANCEMAINTENANCE_AVIEW" replaceIfExists="true">
			<![CDATA[
				 SELECT T1.FINID,
				    T1.FINREFERENCE,
				    T1.FINBRANCH,
				    T1.FINTYPE,
				    T1.FINCCY,
				    T1.SCHEDULEMETHOD,
				    T1.PROFITDAYSBASIS,
				    T1.FINSTARTDATE,
				    T1.NUMBEROFTERMS,
				    T1.CUSTID,
				    T1.FINAMOUNT,
				    T1.MATURITYDATE,
				    T1.FINREPAYMENTAMOUNT,
				    T1.FINISACTIVE,
				    T1.BLACKLISTED,
				    T1.FEECHARGEAMT,
				    T1.GRACETERMS,
				    T1.ALLOWGRCPERIOD,
				    T1.GRCPERIODENDDATE,
				    T1.ALWMULTIDISB,
				    T1.DEFFERMENTS,
				    T1.NEXTROLECODE,
				    T1.RECORDSTATUS,
				    T1.RECORDTYPE,
				    T1.ALLOWGRCPFTRVW,
				    T1.ALLOWREPAYRVW,
				    T1.LASTREPAYDATE,
				    T1.LASTREPAYPFTDATE,
				    T1.ALLOWEDDEFRPYCHANGE,
				    T1.AVAILEDDEFRPYCHANGE,
				    T1.MIGRATEDFINANCE,
				    T1.RCDMAINTAINSTS,
				    T1.CLOSINGSTATUS,
				    T1.REPAYRATEBASIS,
				    T1.MANUALSCHEDULE,
				    T1.DOWNPAYMENT,
				    T1.PLANEMIHALW,
				    T1.FINCURRASSETVALUE,
				    T1.FINASSETVALUE,
				    T2.CUSTCIF LOVDESCCUSTCIF,
				    T3.FINCATEGORY LOVDESCPRODUCTCODENAME,
				    T3.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
				    T4.PRODUCTCATEGORY,
				    T1.SAMPLINGREQUIRED,
				    T1.ADVANCEEMI,
				    T1.ADVEMITERMS,
				    T1.BPIPFTDAYSBASIS BPIRATEBASIS,
				    T1.SANBSDSCHDLE,
				    T1.PROMOTIONSEQID,
				    T1.SVAMOUNT,
				    T1.CBAMOUNT,
				    T5.ENTITYCODE
				FROM FINANCEMAIN T1
				JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
				JOIN RMTFINANCETYPES T3 ON T1.FINTYPE = T3.FINTYPE
				JOIN BMTPRODUCT T4 ON T3.FINCATEGORY = T4.PRODUCTCODE
				LEFT JOIN SMTDIVISIONDETAIL T5 ON T3.FINDIVISION = T5.DIVISIONCODE
			]]>
		</createView>
	</changeSet>
	
	<changeSet id="ST#556.39_post" author="Mounika.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemaintenance_aview');	
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#556.60_pre" author="Mounika.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finoptionsmaintenance_view'); 
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#556.60" author="Mounika.M">
		<createView viewName="FINOPTIONSMAINTENANCE_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINID,
					T1.FINREFERENCE,
				    T1.FINBRANCH,
				    T1.FINTYPE,
				    T1.FINCCY,
				    T1.SCHEDULEMETHOD,
				    T1.PROFITDAYSBASIS,
				    T1.FINSTARTDATE,
				    T1.NUMBEROFTERMS,
				    T1.CUSTID,
				    T1.FINAMOUNT,
				    T1.MATURITYDATE,
				    T1.FINREPAYMENTAMOUNT,
				    T1.FINISACTIVE,
				    T1.BLACKLISTED,
				    T1.FEECHARGEAMT,
				    T1.GRACETERMS,
				    T1.ALLOWGRCPERIOD,
				    T1.GRCPERIODENDDATE,
				    T1.ALWMULTIDISB,
				    T1.DEFFERMENTS,
				    T1.ALLOWGRCPFTRVW,
				    T1.ALLOWREPAYRVW,
				    T1.LASTREPAYDATE,
				    T1.LASTREPAYPFTDATE,
				    T1.ALLOWEDDEFRPYCHANGE,
				    T1.AVAILEDDEFRPYCHANGE,
				    T1.MIGRATEDFINANCE,
				    T1.CLOSINGSTATUS,
				    T1.REPAYRATEBASIS,
				    T1.MANUALSCHEDULE,
				    T1.FINCURRASSETVALUE,
				    T1.AVAILEDUNPLANEMI,
				    T1.AVAILEDREAGEH,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.DOWNPAYMENT,
				    T1.PLANEMIHALW,
				    T1.CALTERMS,
				    T1.RATECHGANYDAY,
				    T1.FINASSETVALUE,
				    T2.CUSTCIF LOVDESCCUSTCIF,
				    T3.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
				    T3.FINDIVISION LOVDESCFINDIVISION,
				    T3.FINCATEGORY LOVDESCPRODUCTCODENAME,
				    T4.PRODUCTCATEGORY,
				    COALESCE(T9.NOINST, 0) NOINST,
				    COALESCE(T5.ROLEDESC, ${add.schema}FN_GET_ROLEDESC(T10.NEXTROLECODE)) LOVDESCREQUESTSTAGE,
				    T10.FINMAINTAINID,
				    T10.EVENT RCDMAINTAINSTS,
				    T10.NEXTROLECODE,
				    T10.RECORDSTATUS,
				    T10.RECORDTYPE,
				    T1.VERSION
				FROM FINMAINTAININSTRUCTIONS_TEMP T10
				JOIN FINANCEMAIN T1 ON T1.FINID = T10.FINID
				JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
				JOIN RMTFINANCETYPES T3 ON T1.FINTYPE = T3.FINTYPE
				LEFT JOIN SECROLES T5 ON T10.NEXTROLECODE = T5.ROLECD
				JOIN BMTPRODUCT T4 ON T3.FINCATEGORY = T4.PRODUCTCODE
				LEFT JOIN FINPFTDETAILS T9 ON T1.FINID = T9.FINID
				WHERE T10.EVENT = 'FINOPTIONS'
				UNION ALL
				SELECT T1.FINID,
				    T1.FINREFERENCE,
				    T1.FINBRANCH,
				    T1.FINTYPE,
				    T1.FINCCY,
				    T1.SCHEDULEMETHOD,
				    T1.PROFITDAYSBASIS,
				    T1.FINSTARTDATE,
				    T1.NUMBEROFTERMS,
				    T1.CUSTID,
				    T1.FINAMOUNT,
				    T1.MATURITYDATE,
				    T1.FINREPAYMENTAMOUNT,
				    T1.FINISACTIVE,
				    T1.BLACKLISTED,
				    T1.FEECHARGEAMT,
				    T1.GRACETERMS,
				    T1.ALLOWGRCPERIOD,
				    T1.GRCPERIODENDDATE,
				    T1.ALWMULTIDISB,
				    T1.DEFFERMENTS,
				    T1.ALLOWGRCPFTRVW,
				    T1.ALLOWREPAYRVW,
				    T1.LASTREPAYDATE,
				    T1.LASTREPAYPFTDATE,
				    T1.ALLOWEDDEFRPYCHANGE,
				    T1.AVAILEDDEFRPYCHANGE,
				    T1.MIGRATEDFINANCE,
				    T1.CLOSINGSTATUS,
				    T1.REPAYRATEBASIS,
				    T1.MANUALSCHEDULE,
				    T1.FINCURRASSETVALUE,
				    T1.AVAILEDUNPLANEMI,
				    T1.AVAILEDREAGEH,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.DOWNPAYMENT,
				    T1.PLANEMIHALW,
				    T1.CALTERMS,
				    T1.RATECHGANYDAY,
				    T1.FINASSETVALUE,
				    T2.CUSTCIF LOVDESCCUSTCIF,
				    T3.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
				    T3.FINDIVISION LOVDESCFINDIVISION,
				    T3.FINCATEGORY LOVDESCPRODUCTCODENAME,
				    T4.PRODUCTCATEGORY,
				    COALESCE(T9.NOINST, 0) NOINST,
				    NULL LOVDESCREQUESTSTAGE,
				    NULL FINMAINTAINID,
				    NULL RCDMAINTAINSTS,
				    NULL NEXTROLECODE,
				    NULL RECORDSTATUS,
				    NULL RECORDTYPE,
				    T1.VERSION
				FROM FINANCEMAIN T1
				JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
				JOIN RMTFINANCETYPES T3 ON T1.FINTYPE = T3.FINTYPE
				LEFT JOIN SECROLES T5 ON T1.NEXTROLECODE = T5.ROLECD
				JOIN BMTPRODUCT T4 ON T3.FINCATEGORY = T4.PRODUCTCODE
				LEFT JOIN FINPFTDETAILS T9 ON T1.FINID = T9.FINID
				WHERE NOT EXISTS (SELECT 1 FROM FINMAINTAININSTRUCTIONS_TEMP WHERE FINMAINTAININSTRUCTIONS_TEMP.FINID = T1.FINID)
			]]>
		</createView>
	</changeSet>
	
	<changeSet id="ST#556.60_post" author="Mounika.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finoptionsmaintenance_view');	
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#556.40_pre" author="Mounika.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'linkedfinmaintenance_view'); 
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#556.40" author="Mounika.M">
		<createView viewName="LINKEDFINMAINTENANCE_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINID,
					T1.FINREFERENCE,
				    T1.FINBRANCH,
				    T1.FINTYPE,
				    T1.FINCCY,
				    T1.SCHEDULEMETHOD,
				    T1.PROFITDAYSBASIS,
				    T1.FINSTARTDATE,
				    T1.NUMBEROFTERMS,
				    T1.CUSTID,
				    T1.FINAMOUNT,
				    T1.MATURITYDATE,
				    T1.FINREPAYMENTAMOUNT,
				    T1.FINISACTIVE,
				    T1.BLACKLISTED,
				    T1.FEECHARGEAMT,
				    T1.GRACETERMS,
				    T1.ALLOWGRCPERIOD,
				    T1.GRCPERIODENDDATE,
				    T1.ALWMULTIDISB,
				    T1.DEFFERMENTS,
				    T1.ALLOWGRCPFTRVW,
				    T1.ALLOWREPAYRVW,
				    T1.LASTREPAYDATE,
				    T1.LASTREPAYPFTDATE,
				    T1.ALLOWEDDEFRPYCHANGE,
				    T1.AVAILEDDEFRPYCHANGE,
				    T1.MIGRATEDFINANCE,
				    T1.CLOSINGSTATUS,
				    T1.REPAYRATEBASIS,
				    T1.MANUALSCHEDULE,
				    T1.FINCURRASSETVALUE,
				    T1.AVAILEDUNPLANEMI,
				    T1.AVAILEDREAGEH,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.DOWNPAYMENT,
				    T1.PLANEMIHALW,
				    T1.CALTERMS,
				    T1.RATECHGANYDAY,
				    T1.FINASSETVALUE,
				    T2.CUSTCIF LOVDESCCUSTCIF,
				    T3.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
				    T3.FINDIVISION LOVDESCFINDIVISION,
				    T3.FINCATEGORY LOVDESCPRODUCTCODENAME,
				    T4.PRODUCTCATEGORY,
				    COALESCE(T9.NOINST, 0) NOINST,
				    COALESCE(T5.ROLEDESC, ${add.schema}FN_GET_ROLEDESC(T10.NEXTROLECODE)) LOVDESCREQUESTSTAGE,
				    T10.FINMAINTAINID,
				    T10.EVENT RCDMAINTAINSTS,
				    T10.NEXTROLECODE,
				    T10.RECORDSTATUS,
				    T10.RECORDTYPE,
				    T1.VERSION,
				    T11.ENTITYCODE
				FROM FINMAINTAININSTRUCTIONS_TEMP T10
				JOIN FINANCEMAIN T1 ON T1.FINID = T10.FINID
				JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
				JOIN RMTFINANCETYPES T3 ON T1.FINTYPE = T3.FINTYPE
				LEFT JOIN SECROLES T5 ON T10.NEXTROLECODE = T5.ROLECD
				JOIN BMTPRODUCT T4 ON T3.FINCATEGORY = T4.PRODUCTCODE
				LEFT JOIN FINPFTDETAILS T9 ON T1.FINID = T9.FINID
				LEFT JOIN SMTDIVISIONDETAIL T11 ON T3.FINDIVISION = T11.DIVISIONCODE
				WHERE T10.EVENT = 'LinkDelink'
				UNION ALL
				SELECT T1.FINID,
				    T1.FINREFERENCE,
				    T1.FINBRANCH,
				    T1.FINTYPE,
				    T1.FINCCY,
				    T1.SCHEDULEMETHOD,
				    T1.PROFITDAYSBASIS,
				    T1.FINSTARTDATE,
				    T1.NUMBEROFTERMS,
				    T1.CUSTID,
				    T1.FINAMOUNT,
				    T1.MATURITYDATE,
				    T1.FINREPAYMENTAMOUNT,
				    T1.FINISACTIVE,
				    T1.BLACKLISTED,
				    T1.FEECHARGEAMT,
				    T1.GRACETERMS,
				    T1.ALLOWGRCPERIOD,
				    T1.GRCPERIODENDDATE,
				    T1.ALWMULTIDISB,
				    T1.DEFFERMENTS,
				    T1.ALLOWGRCPFTRVW,
				    T1.ALLOWREPAYRVW,
				    T1.LASTREPAYDATE,
				    T1.LASTREPAYPFTDATE,
				    T1.ALLOWEDDEFRPYCHANGE,
				    T1.AVAILEDDEFRPYCHANGE,
				    T1.MIGRATEDFINANCE,
				    T1.CLOSINGSTATUS,
				    T1.REPAYRATEBASIS,
				    T1.MANUALSCHEDULE,
				    T1.FINCURRASSETVALUE,
				    T1.AVAILEDUNPLANEMI,
				    T1.AVAILEDREAGEH,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.DOWNPAYMENT,
				    T1.PLANEMIHALW,
				    T1.CALTERMS,
				    T1.RATECHGANYDAY,
				    T1.FINASSETVALUE,
				    T2.CUSTCIF LOVDESCCUSTCIF,
				    T3.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
				    T3.FINDIVISION LOVDESCFINDIVISION,
				    T3.FINCATEGORY LOVDESCPRODUCTCODENAME,
				    T4.PRODUCTCATEGORY,
				    COALESCE(T9.NOINST, 0) NOINST,
				    NULL LOVDESCREQUESTSTAGE,
				    NULL FINMAINTAINID,
				    NULL RCDMAINTAINSTS,
				    NULL NEXTROLECODE,
				    NULL RECORDSTATUS,
				    NULL RECORDTYPE,
				    T1.VERSION,
				    T11.ENTITYCODE
				FROM FINANCEMAIN T1
				JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
				JOIN RMTFINANCETYPES T3 ON T1.FINTYPE = T3.FINTYPE
				LEFT JOIN SECROLES T5 ON T1.NEXTROLECODE = T5.ROLECD
				JOIN BMTPRODUCT T4 ON T3.FINCATEGORY = T4.PRODUCTCODE
				LEFT JOIN FINPFTDETAILS T9 ON T1.FINID = T9.FINID
				LEFT JOIN SMTDIVISIONDETAIL T11 ON T3.FINDIVISION = T11.DIVISIONCODE
				WHERE NOT EXISTS ( SELECT 1 FROM FINMAINTAININSTRUCTIONS_TEMP WHERE FINMAINTAININSTRUCTIONS_TEMP.FINID = T1.FINID)
			]]>
		</createView>
	</changeSet>
	
	<changeSet id="ST#556.40_post" author="Mounika.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'linkedfinmaintenance_view');	
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#556.41_pre" author="Mounika.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rolledoverfinancedetail_tview'); 
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#556.41" author="Mounika.M">
		<createView viewName="ROLLEDOVERFINANCEDETAIL_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT R.NEWFINREFERENCE,
				    R.FINREFERENCE,
				    R.ROLLOVERAMOUNT,
				    R.CUSTPAYMENT,
				    P.TOTALPFTBAL,
				    P.TOTALPRIBAL,
				    F.FINSTARTDATE STARTDATE,
				    F.FINAMOUNT,
				    F.EFFECTIVERATEOFRETURN PROFITRATE,
				    F.TOTALPROFIT
				FROM ROLLEDOVERFINANCEDETAIL_TEMP R
                JOIN FINANCEMAIN F ON R.FINREFERENCE = F.FINREFERENCE
                JOIN FINPFTDETAILS P ON F.FINREFERENCE = P.FINREFERENCE
			]]>
		</createView>
	</changeSet>
	
	<changeSet id="ST#556.41_post" author="Mounika.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rolledoverfinancedetail_tview');	
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#556.43_pre" author="Mounika.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'extended_field_mnt_view'); 
			]]>
		</sql>
	</changeSet>
	<changeSet id="ST#556.43" author="Mounika.M">
		<createView viewName="EXTENDED_FIELD_MNT_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ID,
				    T2.FINREFERENCE,
				    T1.REFERENCE,
				    T2.FINTYPE,
				    T1.TYPE,
				    T2.FINISACTIVE,
				    T6.FINDIVISION AS LOVDESCFINDIVISION,
				    T2.FINCATEGORY AS LOVDESCPRODUCTCODENAME,
				    T2.FINBRANCH,
				    T2.GRACETERMS,
				    T2.CALTERMS,
				    T2.ADVTERMS,
				    T2.FINCURRASSETVALUE,
				    T2.FEECHARGEAMT,
				    T2.FINREPAYMENTAMOUNT,
				    T2.CLOSINGSTATUS,
				    COALESCE(T4.ROLEDESC, ${add.schema}FN_GET_ROLEDESC(T1.NEXTROLECODE)) LOVDESCREQUESTSTAGE,
				    T2.FINSTARTDATE,
				    T2.NUMBEROFTERMS,
				    T2.MATURITYDATE,
				    T2.FINCCY,
				    T2.FINASSETVALUE,
				    T3.CUSTCIF LOVDESCCUSTCIF,
				    T5.PRODUCTCATEGORY,
				    T1.EVENT,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDSTATUS,
				    T1.RECORDTYPE,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.WORKFLOWID,
				    T2.SCHEDULEMETHOD,
				    T2.PROFITDAYSBASIS
				FROM EXTENDED_FIELD_MNT_TEMP T1
			    JOIN FINANCEMAIN T2 ON T2.FINREFERENCE = T1.REFERENCE
			    JOIN CUSTOMERS T3 ON T3.CUSTID = T2.CUSTID
			    LEFT JOIN SECROLES T4 ON T1.NEXTROLECODE = T4.ROLECD
			    JOIN BMTPRODUCT T5 ON T2.FINCATEGORY = T5.PRODUCTCODE
			    JOIN RMTFINANCETYPES T6 ON T6.FINTYPE = T2.FINTYPE
				UNION ALL
			 	SELECT T1.ID,
			    	T2.FINREFERENCE,
				    T1.REFERENCE,
				    T2.FINTYPE,
				    T1.TYPE,
				    T2.FINISACTIVE,
				    T6.FINDIVISION LOVDESCFINDIVISION,
				    T2.FINCATEGORY LOVDESCPRODUCTCODENAME,
				    T2.FINBRANCH,
				    T2.GRACETERMS,
				    T2.CALTERMS,
				    T2.ADVTERMS,
				    T2.FINCURRASSETVALUE,
				    T2.FEECHARGEAMT,
				    T2.FINREPAYMENTAMOUNT,
				    T2.CLOSINGSTATUS,
				    COALESCE(T4.ROLEDESC, ${add.schema}FN_GET_ROLEDESC(T1.NEXTROLECODE)) LOVDESCREQUESTSTAGE,
				    T2.FINSTARTDATE,
				    T2.NUMBEROFTERMS,
				    T2.MATURITYDATE,
				    T2.FINCCY,
				    T2.FINASSETVALUE,
				    T3.CUSTCIF AS LOVDESCCUSTCIF,
				    T5.PRODUCTCATEGORY,
				    T1.EVENT,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDSTATUS,
				    T1.RECORDTYPE,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.WORKFLOWID,
				    T2.SCHEDULEMETHOD,
				    T2.PROFITDAYSBASIS
				FROM EXTENDED_FIELD_MNT T1
     			JOIN FINANCEMAIN T2 ON T2.FINREFERENCE = T1.REFERENCE
     			JOIN CUSTOMERS T3 ON T3.CUSTID = T2.CUSTID
    		    LEFT JOIN SECROLES T4 ON T1.NEXTROLECODE = T4.ROLECD
     			JOIN BMTPRODUCT T5 ON T2.FINCATEGORY = T5.PRODUCTCODE
     			JOIN RMTFINANCETYPES T6 ON T6.FINTYPE = T2.FINTYPE
  				WHERE NOT EXISTS ( SELECT 1 FROM EXTENDED_FIELD_MNT_TEMP WHERE EXTENDED_FIELD_MNT_TEMP.REFERENCE = T1.REFERENCE)
			]]>
		</createView>
	</changeSet>
	<changeSet id="ST#556.43_post" author="Mounika.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'extended_field_mnt_view');	
			]]>
		</sql>
	</changeSet>
	
    <changeSet id="ST#556.44_pre" author="Mounika.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rpt_provision_view'); 
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#556.44" author="Mounika.M" dbms="postgresql">
		<createView viewName="RPT_PROVISION_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T3.FINDIVISION,
				    T2.FINTYPE,
				    T3.FINTYPEDESC,
        			CASE WHEN T2.FINTYPE IS NULL THEN ''
        				 ELSE (T2.FINTYPE || '-') || T3.FINTYPEDESC
        			 END LOANTYPE,
    				'PERFORMING 0-90' CLASSIFICATIONS,
    				4 GRADEORDER,
    				SUM(T1.FINCURODPRI + T1.FINCURODPFT) EXPOSUREBHD,
    				SUM(T4.PROVISIONDUE) PROVISION
   				FROM FINODDETAILS T1
     			JOIN FINPFTDETAILS T2 ON T1.FINID = T2.FINID
     			JOIN RMTFINANCETYPES T3 ON T2.FINTYPE = T3.FINTYPE
     			JOIN FINPROVISIONS T4 ON T4.FINID = T1.FINID
  				WHERE T1.FINCURODAMT <> 0 AND T1.FINCURODDAYS >= 0 AND T1.FINCURODDAYS <= 90 AND COALESCE(T2.CLOSINGSTATUS, '') <> 'C'
  				GROUP BY T2.FINTYPE, T3.FINTYPEDESC, T3.FINDIVISION
				UNION
 				SELECT T3.FINDIVISION,
				    T2.FINTYPE,
				    T3.FINTYPEDESC,
        			CASE WHEN T2.FINTYPE IS NULL THEN '' 
        				ELSE (T2.FINTYPE || '-') || T3.FINTYPEDESC 
        			END LOANTYPE, 
            		'SUBSTANDARD 91-180' CLASSIFICATIONS,
    				3 GRADEORDER,
    				SUM(T1.FINCURODPRI + T1.FINCURODPFT) EXPOSUREBHD,
    				SUM(T4.PROVISIONDUE) PROVISION
   				FROM FINODDETAILS T1
     			JOIN FINPFTDETAILS T2 ON T1.FINID = T2.FINID
     			JOIN RMTFINANCETYPES T3 ON T2.FINTYPE = T3.FINTYPE
     			JOIN FINPROVISIONS T4 ON T4.FINID = T1.FINID
  				WHERE T1.FINCURODAMT <> 0 AND T1.FINCURODDAYS >= 91 AND T1.FINCURODDAYS <= 180 AND COALESCE(T2.CLOSINGSTATUS, '') <> 'C'
  				GROUP BY T2.FINTYPE, T3.FINTYPEDESC, T3.FINDIVISION
				UNION
 				SELECT T3.FINDIVISION,
    				T2.FINTYPE,
    				T3.FINTYPEDESC,
        			CASE WHEN T2.FINTYPE IS NULL THEN ''
        				ELSE  (T2.FINTYPE || '-') || T3.FINTYPEDESC 
        			END LOANTYPE,
    				'DOUBTFUL 181-365' CLASSIFICATIONS,
    				2 GRADEORDER,
    				SUM(T1.FINCURODPRI + T1.FINCURODPFT) EXPOSUREBHD,
    				SUM(T4.PROVISIONDUE) PROVISION
   				FROM FINODDETAILS T1
     			JOIN FINPFTDETAILS T2 ON T1.FINID = T2.FINID
     			JOIN RMTFINANCETYPES T3 ON T2.FINTYPE = T3.FINTYPE
     			JOIN FINPROVISIONS T4 ON T4.FINID = T1.FINID
  				WHERE T1.FINCURODAMT <> 0 AND T1.FINCURODDAYS >= 181 AND T1.FINCURODDAYS <= 365 AND COALESCE(T2.CLOSINGSTATUS, '') <> 'C'
  				GROUP BY T2.FINTYPE, T3.FINTYPEDESC, T3.FINDIVISION
				UNION
 				SELECT T3.FINDIVISION,
    				T2.FINTYPE,
    				T3.FINTYPEDESC,
        			CASE WHEN T2.FINTYPE IS NULL THEN '' 
        				ELSE (T2.FINTYPE || '-') || T3.FINTYPEDESC 
        			END LOANTYPE,
    				'LOSS 365>' CLASSIFICATIONS,
    				1 GRADEORDER,
    				SUM(T1.FINCURODPRI + T1.FINCURODPFT) EXPOSUREBHD,
    				SUM(T4.PROVISIONDUE) PROVISION
   				FROM FINODDETAILS T1
     			JOIN FINPFTDETAILS T2 ON T1.FINID = T2.FINID
     			JOIN RMTFINANCETYPES T3 ON T2.FINTYPE = T3.FINTYPE
     			JOIN FINPROVISIONS T4 ON T4.FINID = T1.FINID
 			 	WHERE T1.FINCURODAMT <> 0 AND T1.FINCURODDAYS > 365 AND COALESCE(T2.CLOSINGSTATUS, '') <> 'C'
  				GROUP BY T2.FINTYPE, T3.FINTYPEDESC, T3.FINDIVISION	
			]]>
		</createView>
	</changeSet>
	
	<changeSet id="ST#556.44_post" author="Mounika.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rpt_provision_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#556.45_pre" author="Mounika.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_aview'); 
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#556.45" author="Mounika.M">
		<createView viewName="RMTFINANCETYPES_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINTYPE,
				    T1.FINCATEGORY,
				    T1.FINTYPEDESC,
				    T1.FINCCY,
				    T1.FINDAYSCALTYPE,
				    T1.FINISGENREF,
				    T1.FINMAXAMOUNT,
				    T1.FINMINAMOUNT,
				    T1.FINDFTSTMTFRQ,
				    T1.FINISALWMD,
				    T1.FINSCHDMTHD,
				    T1.FINISALWGRACE,
				    T1.FINHISTRETENSION,
				    T1.EQUALREPAYMENT,
				    T1.FINRATETYPE,
				    T1.FINBASERATE,
				    T1.FINSPLRATE,
				    T1.FININTRATE,
				    T1.FINMINRATE,
				    T1.FINMAXRATE,
				    T1.FINDFTINTFRQ,
				    T1.FINISINTCPZ,
				    T1.FINCPZFRQ,
				    T1.FINISRVWALW,
				    T1.FINRVWFRQ,
				    T1.FINGRCRATETYPE,
				    T1.FINGRCBASERATE,
				    T1.FINGRCSPLRATE,
				    T1.FINGRCINTRATE,
				    T1.FINGRCMINRATE,
				    T1.FINGRCMAXRATE,
				    T1.FINGRCDFTINTFRQ,
				    T1.FINGRCISINTCPZ,
				    T1.FINGRCCPZFRQ,
				    T1.FINGRCISRVWALW,
				    T1.FINGRCRVWFRQ,
				    T1.FINMINTERM,
				    T1.FINMAXTERM,
				    T1.FINDFTTERMS,
				    T1.FINRPYFRQ,
				    T1.FINREPAYMETHOD,
				    T1.FINISALWPARTIALRPY,
				    T1.FINISALWDIFFERMENT,
				    T1.FINMAXDIFFERMENT,
				    T1.FINISALWEARLYRPY,
				    T1.FINISALWEARLYSETTLE,
				    T1.FINODRPYTRIES,
				    T1.FINEARLYPAYRULE,
				    T1.FINEARLYSETTLERULE,
				    T1.FINISACTIVE,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T1.STEPFINANCE,
				    T1.STEPPINGMANDATORY,
				    T1.ALWMANUALSTEPS,
				    T1.ALWDSTEPPOLICIES,
				    T1.DFTSTEPPOLICY,
				    T1.FINISDWPAYREQUIRED,
				    T1.FINRVWRATEAPPLFOR,
				    T1.FINALWRATECHANGEANYDATE,
				    T1.FINISINTCPZATGRCEND,
				    T1.FINELGRULECODE,
				    T1.LIMITELGRULECODE,
				    T1.FINSCHCALCODEONRVW,
				    T1.ALWPLANDEFERMENT,
				    T1.PLANDEFERCOUNT,
				    T1.FINASSETTYPE,
				    T1.FINISALWGRCREPAY,
				    T1.FINGRCSCHDMTHD,
				    T1.FINGRCMARGIN,
				    T1.FINMARGIN,
				    T1.FINSCHEDULEON,
				    T1.FINGRCSCHEDULEON,
				    T1.FINCOMMITMENTREQ,
				    T1.FINCOLLATERALREQ,
				    T1.OVERRIDELIMIT,
				    T1.LIMITREQUIRED,
				    T1.FINCOMMITMENTOVRRIDE,
				    T1.FINCOLLATERALOVRRIDE,
				    T1.FINPFTUNCHANGED,
				    T1.APPLYODPENALTY,
				    T1.ODINCGRCDAYS,
				    T1.ODCHARGETYPE,
				    T1.ODGRACEDAYS,
				    T1.ODCHARGECALON,
				    T1.ODCHARGEAMTORPERC,
				    T1.ODALLOWWAIVER,
				    T1.ODMAXWAIVERPERC,
				    T1.FINDIVISION,
				    T48.DIVISIONCODEDESC LOVDESCFINDIVISIONNAME,
				    T48.ENTITYCODE LOVDESCENTITYCODE,
				    T1.PRODUCT,
				    T1.STARTDATE,
				    T1.ENDDATE,
				    T1.REMARKS,
				    T1.ALWEARLYPAYMETHODS,
				    T1.PASTDUEPFTCALMTHD,
				    T1.PASTDUEPFTMARGIN,
				    T1.DOWNPAYRULE,
				    T59.RULECODE DOWNPAYRULECODE,
				    T59.RULECODEDESC DOWNPAYRULEDESC,
				    T1.FINSUSPTRIGGER,
				    T1.FINSUSPREMARKS,
				    T1.ALWMULTIPARTYDISB,
				    T1.COLLATERALTYPE,
				    T1.TDSAPPLICABLE,
				    T1.MANUALSCHEDULE,
				    T1.APPLYGRCPRICING,
				    T1.GRCPRICINGMETHOD,
				    T1.APPLYRPYPRICING,
				    T1.RPYPRICINGMETHOD,
				    T1.RPYHIERARCHY,
				    T67.RULECODE GRCPRICINGMETHODDESC,
				    T68.RULECODE RPYPRICINGMETHODDESC,
				    T1.DROPLINEOD,
				    T1.DROPPINGMETHOD,
				    T1.RATECHGANYDAY,
				    T1.FINREPAYPFTONFRQ,
				    T1.ALWBPI,
				    T1.BPITREATMENT,
				    T1.PFTDUESCHON,
				    T1.PLANEMIHALW,
				    T1.PLANEMIHMETHOD,
				    T1.PLANEMIHMAXPERYEAR,
				    T1.PLANEMIHMAX,
				    T1.PLANEMIHLOCKPERIOD,
				    T1.PLANEMICPZ,
				    T1.UNPLANEMIHLOCKPERIOD,
				    T1.UNPLANEMICPZ,
				    T1.REAGECPZ,
				    T1.FDDLOCKPERIOD,
				    T1.ALWDRPYMETHODS,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.ROUNDINGMODE,
				    T1.ROUNDINGTARGET,
				    T1.FREQUENCYDAYS,
				    T1.QUICKDISB,
				    T1.ALWREAGE,
				    T1.ALWUNPLANEMIHOLIDAY,
				    T1.ALWMAXDISBCHECKREQ,
				    T1.FINTYPEDESC LOVDESCPROMOFINTYPEDESC,
				    T1.PROFITCENTERID,
				    T69.PROFITCENTERCODE,
				    T69.PROFITCENTERDESC,
				    T1.PRODUCTCATEGORY,
				    T2.PRODUCTDESC FINCATEGORYDESC,
				    T1.DEVELOPERFINANCE,
				    T1.COSTOFFUNDS,
				    T1.CHEQUECAPTUREREQ,
				    T1.FINLTVCHECK,
				    T1.PARTIALLYSECURED,
				    T1.ALWADVEMI,
				    T1.ADVEMIMINTERMS,
				    T1.ADVEMIMAXTERMS,
				    T1.ADVEMIDFTTERMS,
				    T1.ADVEMISCHDMTHD,
				    T1.BPIPFTDAYSBASIS,
				    T1.ELIGIBILITYMETHODS,
				    T1.ALWHYBRIDRATE,
				    T1.FIXEDRATETENOR,
				    T1.ODMINCAPAMOUNT,
				    T1.ODRULECODE,
				    T1.ALWZEROINTACC,
				    T1.AUTOREJECTIONDAYS,
				    T1.TAXNOMAND,
				    T1.PUTCALLREQUIRED,
				    T1.GRCADVINTERSETREQ,
				    T1.GRCADVTYPE,
				    T1.GRCADVMINTERMS,
				    T1.GRCADVMAXTERMS,
				    T1.GRCADVDEFAULTTERMS,
				    T1.ADVINTERSETREQ,
				    T1.ADVTYPE,
				    T1.ADVMINTERMS,
				    T1.ADVMAXTERMS,
				    T1.ADVDEFAULTTERMS,
				    T1.ADVSTAGE,
				    T1.DSFREQ,
				    T1.CASHCOLLATERALREQ,
				    T1.TDSALLOWTOMODIFY,
				    T1.TDSAPPLICABLETO,
				    T1.ALWVAN,
				    T1.VANALLOCATIONMETHOD,
				    T1.ALLOWDRAWINGPOWER,
				    T1.ALLOWREVOLVING,
				    T1.ALWSANCTIONAMT,
				    T1.ALWSANCTIONAMTOVERRIDE,
				    T1.SANBSDSCHDLE,
				    T1.FINISRATERVWATGRCEND,
				    T1.SCHDONPMTCAL,
				    T1.AUTOAPPROVE,
				    T1.ALWPLANNEDEMIINGRC,
				    T1.OCRREQUIRED,
				    T1.ALLOWEDOCRS,
				    T1.DEFAULTOCR,
				    T1.ALLOWEDLOANPURPOSES,
				    T1.SPECIFICLOANPURPOSES,
				    T1.GRCADJREQ,
				    T1.GRCPERIODAFTRFULLDISB,
				    T1.AUTOINCRGRCENDDATE,
				    T1.GRCAUTOINCRMONTHS,
				    T1.MAXAUTOINCRALLOWED,
				    T1.THRLDTOMAINTAINGRCPRD,
				    T1.ALWLOANSPLIT,
				    T1.SPLITLOANTYPE,
				    T1.INSTBASEDSCHD,
				    T1.TDSTYPE,
				    T1.CALCOFSTEPS,
				    T1.STEPSAPPLIEDFOR,
				    T1.SUBVENTIONREQ
				FROM RMTFINANCETYPES T1
			    LEFT JOIN BMTPRODUCT T2 ON T1.FINCATEGORY = T2.PRODUCTCODE
			    LEFT JOIN SMTDIVISIONDETAIL T48 ON T1.FINDIVISION = T48.DIVISIONCODE
			    LEFT JOIN RULES T59 ON T1.DOWNPAYRULE = T59.RULEID
			    LEFT JOIN RULES T67 ON T1.GRCPRICINGMETHOD = T67.RULEID
			    LEFT JOIN RULES T68 ON T1.RPYPRICINGMETHOD = T68.RULEID
			    LEFT JOIN PROFITCENTERS T69 ON T69.PROFITCENTERID = T1.PROFITCENTERID
			]]>
		</createView>
	</changeSet>
	
	<changeSet id="ST#556.45_post" author="Mounika.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rmtfinancetypes_aview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#556.46_pre" author="M.Mounika" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_view'); 
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#556.46" author="M.Mounika">
		<createView viewName="RMTFINANCETYPES_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINTYPE,
				    T1.FINCATEGORY,
				    T1.FINTYPEDESC,
				    T1.FINCCY,
				    T1.FINDAYSCALTYPE,
				    T1.FINISGENREF,
				    T1.FINMAXAMOUNT,
				    T1.FINMINAMOUNT,
				    T1.FINDFTSTMTFRQ,
				    T1.FINISALWMD,
				    T1.FINSCHDMTHD,
				    T1.FINISALWGRACE,
				    T1.FINHISTRETENSION,
				    T1.EQUALREPAYMENT,
				    T1.FINRATETYPE,
				    T1.FINBASERATE,
				    T1.FINSPLRATE,
				    T1.FININTRATE,
				    T1.FINMINRATE,
				    T1.FINMAXRATE,
				    T1.FINDFTINTFRQ,
				    T1.FINISINTCPZ,
				    T1.FINCPZFRQ,
				    T1.FINISRVWALW,
				    T1.FINRVWFRQ,
				    T1.FINGRCRATETYPE,
				    T1.FINGRCBASERATE,
				    T1.FINGRCSPLRATE,
				    T1.FINGRCINTRATE,
				    T1.FINGRCMINRATE,
				    T1.FINGRCMAXRATE,
				    T1.FINGRCDFTINTFRQ,
				    T1.FINGRCISINTCPZ,
				    T1.FINGRCCPZFRQ,
				    T1.FINGRCISRVWALW,
				    T1.FINGRCRVWFRQ,
				    T1.FINMINTERM,
				    T1.FINMAXTERM,
				    T1.FINDFTTERMS,
				    T1.FINRPYFRQ,
				    T1.FINREPAYMETHOD,
				    T1.FINISALWPARTIALRPY,
				    T1.FINISALWDIFFERMENT,
				    T1.FINMAXDIFFERMENT,
				    T1.FINISALWEARLYRPY,
				    T1.FINISALWEARLYSETTLE,
				    T1.FINODRPYTRIES,
				    T1.FINEARLYPAYRULE,
				    T1.FINEARLYSETTLERULE,
				    T1.FINISACTIVE,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T1.STEPFINANCE,
				    T1.STEPPINGMANDATORY,
				    T1.ALWMANUALSTEPS,
				    T1.ALWDSTEPPOLICIES,
				    T1.DFTSTEPPOLICY,
				    T1.FINISDWPAYREQUIRED,
				    T1.FINRVWRATEAPPLFOR,
				    T1.FINALWRATECHANGEANYDATE,
				    T1.FINISINTCPZATGRCEND,
				    T1.FINELGRULECODE,
				    T1.LIMITELGRULECODE,
				    T1.FINSCHCALCODEONRVW,
				    T1.ALWPLANDEFERMENT,
				    T1.PLANDEFERCOUNT,
				    T1.FINASSETTYPE,
				    T1.FINISALWGRCREPAY,
				    T1.FINGRCSCHDMTHD,
				    T1.FINGRCMARGIN,
				    T1.FINMARGIN,
				    T1.FINSCHEDULEON,
				    T1.FINGRCSCHEDULEON,
				    T1.FINCOMMITMENTREQ,
				    T1.FINCOLLATERALREQ,
				    T1.OVERRIDELIMIT,
				    T1.LIMITREQUIRED,
				    T1.FINCOMMITMENTOVRRIDE,
				    T1.FINCOLLATERALOVRRIDE,
				    T1.FINPFTUNCHANGED,
				    T1.APPLYODPENALTY,
				    T1.ODINCGRCDAYS,
				    T1.ODCHARGETYPE,
				    T1.ODGRACEDAYS,
				    T1.ODCHARGECALON,
				    T1.ODCHARGEAMTORPERC,
				    T1.ODALLOWWAIVER,
				    T1.ODMAXWAIVERPERC,
				    T1.FINDIVISION,
				    T48.DIVISIONCODEDESC LOVDESCFINDIVISIONNAME,
				    T48.ENTITYCODE LOVDESCENTITYCODE,
				    T1.PRODUCT,
				    T1.STARTDATE,
				    T1.ENDDATE,
				    T1.FINTYPEDESC LOVDESCPROMOFINTYPEDESC,
				    T1.REMARKS,
				    T1.ALWEARLYPAYMETHODS,
				    T1.PASTDUEPFTCALMTHD,
				    T1.PASTDUEPFTMARGIN,
				    T1.DOWNPAYRULE,
				    T59.RULECODE DOWNPAYRULECODE,
				    T59.RULECODEDESC DOWNPAYRULEDESC,
				    T1.FINSUSPTRIGGER,
				    T1.FINSUSPREMARKS,
				    T1.ALWMULTIPARTYDISB,
				    T1.COLLATERALTYPE,
				    T1.TDSAPPLICABLE,
				    T1.MANUALSCHEDULE,
				    T1.APPLYGRCPRICING,
				    T1.GRCPRICINGMETHOD,
				    T1.APPLYRPYPRICING,
				    T1.RPYPRICINGMETHOD,
				    T1.RPYHIERARCHY,
				    T67.RULECODE GRCPRICINGMETHODDESC,
				    T68.RULECODE RPYPRICINGMETHODDESC,
				    T1.DROPLINEOD,
				    T1.DROPPINGMETHOD,
				    T1.RATECHGANYDAY,
				    T1.FINREPAYPFTONFRQ,
				    T1.ALWBPI,
				    T1.BPITREATMENT,
				    T1.PFTDUESCHON,
				    T1.PLANEMIHALW,
				    T1.PLANEMIHMETHOD,
				    T1.PLANEMIHMAXPERYEAR,
				    T1.PLANEMIHMAX,
				    T1.PLANEMIHLOCKPERIOD,
				    T1.PLANEMICPZ,
				    T1.UNPLANEMIHLOCKPERIOD,
				    T1.UNPLANEMICPZ,
				    T1.REAGECPZ,
				    T1.FDDLOCKPERIOD,
				    T1.ALWDRPYMETHODS,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.ROUNDINGMODE,
				    T1.ROUNDINGTARGET,
				    T1.FREQUENCYDAYS,
				    T1.QUICKDISB,
				    T1.ALWMAXDISBCHECKREQ,
				    T1.ALWREAGE,
				    T1.ALWUNPLANEMIHOLIDAY,
				    T1.PROFITCENTERID,
				    T69.PROFITCENTERCODE,
				    T69.PROFITCENTERDESC,
				    T1.PRODUCTCATEGORY,
				    T2.PRODUCTDESC FINCATEGORYDESC,
				    T1.DEVELOPERFINANCE,
				    T1.COSTOFFUNDS,
				    T1.CHEQUECAPTUREREQ,
				    T1.FINLTVCHECK,
				    T1.PARTIALLYSECURED,
				    T1.ALWADVEMI,
				    T1.ADVEMIMINTERMS,
				    T1.ADVEMIMAXTERMS,
				    T1.ADVEMIDFTTERMS,
				    T1.ADVEMISCHDMTHD,
				    T1.BPIPFTDAYSBASIS,
				    T1.ELIGIBILITYMETHODS,
				    T1.ALWHYBRIDRATE,
				    T1.FIXEDRATETENOR,
				    T1.ODMINCAPAMOUNT,
				    T1.ODRULECODE,
				    T1.ALWZEROINTACC,
				    T1.AUTOREJECTIONDAYS,
				    T1.TAXNOMAND,
				    T1.PUTCALLREQUIRED,
				    T1.GRCADVINTERSETREQ,
				    T1.GRCADVTYPE,
				    T1.GRCADVMINTERMS,
				    T1.GRCADVMAXTERMS,
				    T1.GRCADVDEFAULTTERMS,
				    T1.ADVINTERSETREQ,
				    T1.ADVTYPE,
				    T1.ADVMINTERMS,
				    T1.ADVMAXTERMS,
				    T1.ADVDEFAULTTERMS,
				    T1.ADVSTAGE,
				    T1.DSFREQ,
				    T1.CASHCOLLATERALREQ,
				    T1.TDSALLOWTOMODIFY,
				    T1.TDSAPPLICABLETO,
				    T1.ALWVAN,
				    T1.VANALLOCATIONMETHOD,
				    T1.ALLOWDRAWINGPOWER,
				    T1.ALLOWREVOLVING,
				    T1.ALWSANCTIONAMT,
				    T1.ALWSANCTIONAMTOVERRIDE,
				    T1.SANBSDSCHDLE,
				    T1.FINISRATERVWATGRCEND,
				    T1.SCHDONPMTCAL,
				    T1.AUTOAPPROVE,
				    T1.OCRREQUIRED,
				    T1.ALLOWEDOCRS,
				    T1.DEFAULTOCR,
				    T1.ALLOWEDLOANPURPOSES,
				    T1.SPECIFICLOANPURPOSES,
				    T1.ALWPLANNEDEMIINGRC,
				    T1.GRCADJREQ,
				    T1.GRCPERIODAFTRFULLDISB,
				    T1.AUTOINCRGRCENDDATE,
				    T1.GRCAUTOINCRMONTHS,
				    T1.MAXAUTOINCRALLOWED,
				    T1.THRLDTOMAINTAINGRCPRD,
				    T1.ALWLOANSPLIT,
				    T1.SPLITLOANTYPE,
				    T1.INSTBASEDSCHD,
				    T1.TDSTYPE,
				    T1.CALCOFSTEPS,
				    T1.STEPSAPPLIEDFOR,
				    T1.SUBVENTIONREQ
				FROM RMTFINANCETYPES_TEMP T1
				LEFT JOIN BMTPRODUCT T2 ON T1.FINCATEGORY = T2.PRODUCTCODE
				LEFT JOIN SMTDIVISIONDETAIL T48 ON T1.FINDIVISION = T48.DIVISIONCODE
				LEFT JOIN RULES T59 ON T1.DOWNPAYRULE = T59.RULEID
				LEFT JOIN RULES T67 ON T1.GRCPRICINGMETHOD = T67.RULEID
				LEFT JOIN RULES T68 ON T1.RPYPRICINGMETHOD = T68.RULEID
				LEFT JOIN PROFITCENTERS T69 ON T69.PROFITCENTERID = T1.PROFITCENTERID
				UNION ALL
				SELECT T1.FINTYPE,
				    T1.FINCATEGORY,
				    T1.FINTYPEDESC,
				    T1.FINCCY,
				    T1.FINDAYSCALTYPE,
				    T1.FINISGENREF,
				    T1.FINMAXAMOUNT,
				    T1.FINMINAMOUNT,
				    T1.FINDFTSTMTFRQ,
				    T1.FINISALWMD,
				    T1.FINSCHDMTHD,
				    T1.FINISALWGRACE,
				    T1.FINHISTRETENSION,
				    T1.EQUALREPAYMENT,
				    T1.FINRATETYPE,
				    T1.FINBASERATE,
				    T1.FINSPLRATE,
				    T1.FININTRATE,
				    T1.FINMINRATE,
				    T1.FINMAXRATE,
				    T1.FINDFTINTFRQ,
				    T1.FINISINTCPZ,
				    T1.FINCPZFRQ,
				    T1.FINISRVWALW,
				    T1.FINRVWFRQ,
				    T1.FINGRCRATETYPE,
				    T1.FINGRCBASERATE,
				    T1.FINGRCSPLRATE,
				    T1.FINGRCINTRATE,
				    T1.FINGRCMINRATE,
				    T1.FINGRCMAXRATE,
				    T1.FINGRCDFTINTFRQ,
				    T1.FINGRCISINTCPZ,
				    T1.FINGRCCPZFRQ,
				    T1.FINGRCISRVWALW,
				    T1.FINGRCRVWFRQ,
				    T1.FINMINTERM,
				    T1.FINMAXTERM,
				    T1.FINDFTTERMS,
				    T1.FINRPYFRQ,
				    T1.FINREPAYMETHOD,
				    T1.FINISALWPARTIALRPY,
				    T1.FINISALWDIFFERMENT,
				    T1.FINMAXDIFFERMENT,
				    T1.FINISALWEARLYRPY,
				    T1.FINISALWEARLYSETTLE,
				    T1.FINODRPYTRIES,
				    T1.FINEARLYPAYRULE,
				    T1.FINEARLYSETTLERULE,
				    T1.FINISACTIVE,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T1.STEPFINANCE,
				    T1.STEPPINGMANDATORY,
				    T1.ALWMANUALSTEPS,
				    T1.ALWDSTEPPOLICIES,
				    T1.DFTSTEPPOLICY,
				    T1.FINISDWPAYREQUIRED,
				    T1.FINRVWRATEAPPLFOR,
				    T1.FINALWRATECHANGEANYDATE,
				    T1.FINISINTCPZATGRCEND,
				    T1.FINELGRULECODE,
				    T1.LIMITELGRULECODE,
				    T1.FINSCHCALCODEONRVW,
				    T1.ALWPLANDEFERMENT,
				    T1.PLANDEFERCOUNT,
				    T1.FINASSETTYPE,
				    T1.FINISALWGRCREPAY,
				    T1.FINGRCSCHDMTHD,
				    T1.FINGRCMARGIN,
				    T1.FINMARGIN,
				    T1.FINSCHEDULEON,
				    T1.FINGRCSCHEDULEON,
				    T1.FINCOMMITMENTREQ,
				    T1.FINCOLLATERALREQ,
				    T1.OVERRIDELIMIT,
				    T1.LIMITREQUIRED,
				    T1.FINCOMMITMENTOVRRIDE,
				    T1.FINCOLLATERALOVRRIDE,
				    T1.FINPFTUNCHANGED,
				    T1.APPLYODPENALTY,
				    T1.ODINCGRCDAYS,
				    T1.ODCHARGETYPE,
				    T1.ODGRACEDAYS,
				    T1.ODCHARGECALON,
				    T1.ODCHARGEAMTORPERC,
				    T1.ODALLOWWAIVER,
				    T1.ODMAXWAIVERPERC,
				    T1.FINDIVISION,
				    T48.DIVISIONCODEDESC LOVDESCFINDIVISIONNAME,
				    T48.ENTITYCODE LOVDESCENTITYCODE,
				    T1.PRODUCT,
				    T1.STARTDATE,
				    T1.ENDDATE,
				    T1.FINTYPEDESC LOVDESCPROMOFINTYPEDESC,
				    T1.REMARKS,
				    T1.ALWEARLYPAYMETHODS,
				    T1.PASTDUEPFTCALMTHD,
				    T1.PASTDUEPFTMARGIN,
				    T1.DOWNPAYRULE,
				    T59.RULECODE DOWNPAYRULECODE,
				    T59.RULECODEDESC DOWNPAYRULEDESC,
				    T1.FINSUSPTRIGGER,
				    T1.FINSUSPREMARKS,
				    T1.ALWMULTIPARTYDISB,
				    T1.COLLATERALTYPE,
				    T1.TDSAPPLICABLE,
				    T1.MANUALSCHEDULE,
				    T1.APPLYGRCPRICING,
				    T1.GRCPRICINGMETHOD,
				    T1.APPLYRPYPRICING,
				    T1.RPYPRICINGMETHOD,
				    T1.RPYHIERARCHY,
				    T67.RULECODE GRCPRICINGMETHODDESC,
				    T68.RULECODE RPYPRICINGMETHODDESC,
				    T1.DROPLINEOD,
				    T1.DROPPINGMETHOD,
				    T1.RATECHGANYDAY,
				    T1.FINREPAYPFTONFRQ,
				    T1.ALWBPI,
				    T1.BPITREATMENT,
				    T1.PFTDUESCHON,
				    T1.PLANEMIHALW,
				    T1.PLANEMIHMETHOD,
				    T1.PLANEMIHMAXPERYEAR,
				    T1.PLANEMIHMAX,
				    T1.PLANEMIHLOCKPERIOD,
				    T1.PLANEMICPZ,
				    T1.UNPLANEMIHLOCKPERIOD,
				    T1.UNPLANEMICPZ,
				    T1.REAGECPZ,
				    T1.FDDLOCKPERIOD,
				    T1.ALWDRPYMETHODS,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.ROUNDINGMODE,
				    T1.ROUNDINGTARGET,
				    T1.FREQUENCYDAYS,
				    T1.QUICKDISB,
				    T1.ALWMAXDISBCHECKREQ,
				    T1.ALWREAGE,
				    T1.ALWUNPLANEMIHOLIDAY,
				    T1.PROFITCENTERID,
				    T69.PROFITCENTERCODE,
				    T69.PROFITCENTERDESC,
				    T1.PRODUCTCATEGORY,
				    T2.PRODUCTDESC FINCATEGORYDESC,
				    T1.DEVELOPERFINANCE,
				    T1.COSTOFFUNDS,
				    T1.CHEQUECAPTUREREQ,
				    T1.FINLTVCHECK,
				    T1.PARTIALLYSECURED,
				    T1.ALWADVEMI,
				    T1.ADVEMIMINTERMS,
				    T1.ADVEMIMAXTERMS,
				    T1.ADVEMIDFTTERMS,
				    T1.ADVEMISCHDMTHD,
				    T1.BPIPFTDAYSBASIS,
				    T1.ELIGIBILITYMETHODS,
				    T1.ALWHYBRIDRATE,
				    T1.FIXEDRATETENOR,
				    T1.ODMINCAPAMOUNT,
				    T1.ODRULECODE,
				    T1.ALWZEROINTACC,
				    T1.AUTOREJECTIONDAYS,
				    T1.TAXNOMAND,
				    T1.PUTCALLREQUIRED,
				    T1.GRCADVINTERSETREQ,
				    T1.GRCADVTYPE,
				    T1.GRCADVMINTERMS,
				    T1.GRCADVMAXTERMS,
				    T1.GRCADVDEFAULTTERMS,
				    T1.ADVINTERSETREQ,
				    T1.ADVTYPE,
				    T1.ADVMINTERMS,
				    T1.ADVMAXTERMS,
				    T1.ADVDEFAULTTERMS,
				    T1.ADVSTAGE,
				    T1.DSFREQ,
				    T1.CASHCOLLATERALREQ,
				    T1.TDSALLOWTOMODIFY,
				    T1.TDSAPPLICABLETO,
				    T1.ALWVAN,
				    T1.VANALLOCATIONMETHOD,
				    T1.ALLOWDRAWINGPOWER,
				    T1.ALLOWREVOLVING,
				    T1.ALWSANCTIONAMT,
				    T1.ALWSANCTIONAMTOVERRIDE,
				    T1.SANBSDSCHDLE,
				    T1.FINISRATERVWATGRCEND,
				    T1.SCHDONPMTCAL,
				    T1.AUTOAPPROVE,
				    T1.OCRREQUIRED,
				    T1.ALLOWEDOCRS,
				    T1.DEFAULTOCR,
				    T1.ALLOWEDLOANPURPOSES,
				    T1.SPECIFICLOANPURPOSES,
				    T1.ALWPLANNEDEMIINGRC,
				    T1.GRCADJREQ,
				    T1.GRCPERIODAFTRFULLDISB,
				    T1.AUTOINCRGRCENDDATE,
				    T1.GRCAUTOINCRMONTHS,
				    T1.MAXAUTOINCRALLOWED,
				    T1.THRLDTOMAINTAINGRCPRD,
				    T1.ALWLOANSPLIT,
				    T1.SPLITLOANTYPE,
				    T1.INSTBASEDSCHD,
				    T1.TDSTYPE,
				    T1.CALCOFSTEPS,
				    T1.STEPSAPPLIEDFOR,
				    T1.SUBVENTIONREQ
				FROM RMTFINANCETYPES T1
				LEFT JOIN BMTPRODUCT T2 ON T1.FINCATEGORY = T2.PRODUCTCODE
				LEFT JOIN SMTDIVISIONDETAIL T48 ON T1.FINDIVISION = T48.DIVISIONCODE
				LEFT JOIN RULES T59 ON T1.DOWNPAYRULE = T59.RULEID
				LEFT JOIN RULES T67 ON T1.GRCPRICINGMETHOD = T67.RULEID
				LEFT JOIN RULES T68 ON T1.RPYPRICINGMETHOD = T68.RULEID
				LEFT JOIN PROFITCENTERS T69 ON T69.PROFITCENTERID = T1.PROFITCENTERID
				WHERE NOT EXISTS ( SELECT 1 FROM RMTFINANCETYPES_TEMP WHERE RMTFINANCETYPES_TEMP.FINTYPE = T1.FINTYPE)
			]]>
		</createView>
	</changeSet>
	
	<changeSet id="ST#556.46_post" author="M.Mounika" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rmtfinancetypes_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#556.61_pre" author="M.Mounika" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_orgview'); 	
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#556.61" author="M.Mounika">
		<createView viewName="RMTFINANCETYPES_ORGVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINTYPE,
				    T1.FINCATEGORY,
				    T1.FINTYPEDESC,
				    T1.FINCCY,
				    T1.FINDAYSCALTYPE,
				    T1.FINISGENREF,
				    T1.FINMAXAMOUNT,
				    T1.FINMINAMOUNT,
				    T1.FINISALWMD,
				    T1.FINSCHDMTHD,
				    T1.FINISALWGRACE,
				    T1.EQUALREPAYMENT,
				    T1.FINRATETYPE,
				    T1.FINBASERATE,
				    T1.FINSPLRATE,
				    T1.FININTRATE,
				    T1.FINMINRATE,
				    T1.FINMAXRATE,
				    T1.FINDFTINTFRQ,
				    T1.FINISINTCPZ,
				    T1.FINCPZFRQ,
				    T1.FINISRVWALW,
				    T1.FINRVWFRQ,
				    T1.FINGRCRATETYPE,
				    T1.FINGRCBASERATE,
				    T1.FINGRCSPLRATE,
				    T1.FINGRCINTRATE,
				    T1.FINGRCMINRATE,
				    T1.FINGRCMAXRATE,
				    T1.FINGRCDFTINTFRQ,
				    T1.FINGRCISINTCPZ,
				    T1.FINGRCCPZFRQ,
				    T1.FINGRCISRVWALW,
				    T1.FINGRCRVWFRQ,
				    T1.FINMINTERM,
				    T1.FINMAXTERM,
				    T1.FINDFTTERMS,
				    T1.FINRPYFRQ,
				    T1.FINREPAYMETHOD,
				    T1.FINISALWDIFFERMENT,
				    T1.FINMAXDIFFERMENT,
				    T1.FINISACTIVE,
				    T1.STEPFINANCE,
				    T1.STEPPINGMANDATORY,
				    T1.ALWMANUALSTEPS,
				    T1.ALWDSTEPPOLICIES,
				    T1.DFTSTEPPOLICY,
				    T1.FINISDWPAYREQUIRED,
				    T1.FINRVWRATEAPPLFOR,
				    T1.FINALWRATECHANGEANYDATE,
				    T1.FINISINTCPZATGRCEND,
				    T1.FINSCHCALCODEONRVW,
				    T1.ALWPLANDEFERMENT,
				    T1.PLANDEFERCOUNT,
				    T1.FINISALWGRCREPAY,
				    T1.FINGRCSCHDMTHD,
				    T1.FINGRCMARGIN,
				    T1.FINMARGIN,
				    T1.FINCOMMITMENTREQ,
				    T1.FINCOLLATERALREQ,
				    T1.OVERRIDELIMIT,
				    T1.LIMITREQUIRED,
				    T1.FINCOMMITMENTOVRRIDE,
				    T1.FINCOLLATERALOVRRIDE,
				    T1.FINREPAYPFTONFRQ,
				    T1.FINPFTUNCHANGED,
				    T1.APPLYODPENALTY,
				    T1.ODINCGRCDAYS,
				    T1.ODCHARGETYPE,
				    T1.ODGRACEDAYS,
				    T1.ODCHARGECALON,
				    T1.ODCHARGEAMTORPERC,
				    T1.ODALLOWWAIVER,
				    T1.ODMAXWAIVERPERC,
				    T1.FINDIVISION,
				    T3.DIVISIONCODEDESC LOVDESCFINDIVISIONNAME,
				    T1.PRODUCT,
				    T1.STARTDATE,
				    T1.ENDDATE,
				    T1.FINTYPEDESC LOVDESCPROMOFINTYPEDESC,
				    T1.REMARKS,
				    T4.POLICYDESC LOVDESCDFTSTEPPOLICYNAME,
				    T1.PASTDUEPFTCALMTHD,
				    T1.PASTDUEPFTMARGIN,
				    T1.DOWNPAYRULE,
				    T1.ALWMULTIPARTYDISB,
				    T1.COLLATERALTYPE,
				    T1.TDSAPPLICABLE,
				    T5.RULECODE DOWNPAYRULECODE,
				    T5.RULECODEDESC DOWNPAYRULEDESC,
				    T1.APPLYGRCPRICING,
				    T1.APPLYRPYPRICING,
				    T6.RULECODE GRCPRICINGMETHODDESC,
				    T7.RULECODE RPYPRICINGMETHODDESC,
				    T1.DROPLINEOD,
				    T1.DROPPINGMETHOD,
				    T1.RATECHGANYDAY,
				    T4.STEPTYPE DFTSTEPPOLICYTYPE,
				    T1.MANUALSCHEDULE,
				    T1.ALWBPI,
				    T1.BPITREATMENT,
				    T1.PFTDUESCHON,
				    T1.PLANEMIHALW,
				    T1.PLANEMIHMETHOD,
				    T1.PLANEMIHMAXPERYEAR,
				    T1.PLANEMIHMAX,
				    T1.PLANEMIHLOCKPERIOD,
				    T1.PLANEMICPZ,
				    T1.UNPLANEMIHLOCKPERIOD,
				    T1.UNPLANEMICPZ,
				    T1.REAGECPZ,
				    T1.FDDLOCKPERIOD,
				    T1.ALWDRPYMETHODS,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.ROUNDINGMODE,
				    T1.ROUNDINGTARGET,
				    T1.FREQUENCYDAYS,
				    T1.QUICKDISB,
				    T1.ALWREAGE,
				    T1.ALWUNPLANEMIHOLIDAY,
				    T1.ALWMAXDISBCHECKREQ,
				    T1.PRODUCTCATEGORY,
				    T1.RPYHIERARCHY,
				    T1.DEVELOPERFINANCE,
				    T3.ENTITYCODE LOVDESCENTITYCODE,
				    T8.ENTITYDESC LOVDESCENTITYDESC,
				    T1.COSTOFFUNDS,
				    T1.CHEQUECAPTUREREQ,
				    T1.FINLTVCHECK,
				    T1.PARTIALLYSECURED,
				    T1.ALWADVEMI,
				    T1.ADVEMIMINTERMS,
				    T1.ADVEMIMAXTERMS,
				    T1.ADVEMIDFTTERMS,
				    T1.ADVEMISCHDMTHD,
				    T1.BPIPFTDAYSBASIS,
				    T1.ELIGIBILITYMETHODS,
				    T1.ALWHYBRIDRATE,
				    T1.FIXEDRATETENOR,
				    T1.ODMINCAPAMOUNT,
				    T1.ODRULECODE,
				    T1.ALWZEROINTACC,
				    T1.FINISALWPARTIALRPY,
				    T1.AUTOREJECTIONDAYS,
				    T1.TAXNOMAND,
				    T1.PUTCALLREQUIRED,
				    T1.GRCADVINTERSETREQ,
				    T1.GRCADVTYPE,
				    T1.GRCADVMINTERMS,
				    T1.GRCADVMAXTERMS,
				    T1.GRCADVDEFAULTTERMS,
				    T1.ADVINTERSETREQ,
				    T1.ADVTYPE,
				    T1.ADVMINTERMS,
				    T1.ADVMAXTERMS,
				    T1.ADVDEFAULTTERMS,
				    T1.ADVSTAGE,
				    T1.DSFREQ,
				    T1.CASHCOLLATERALREQ,
				    T1.ALWEARLYPAYMETHODS,
				    T1.TDSALLOWTOMODIFY,
				    T1.TDSAPPLICABLETO,
				    T1.ALWVAN,
				    T1.VANALLOCATIONMETHOD,
				    T1.ALLOWDRAWINGPOWER,
				    T1.ALLOWREVOLVING,
				    T1.ALWSANCTIONAMT,
				    T1.ALWSANCTIONAMTOVERRIDE,
				    T1.SANBSDSCHDLE,
				    T1.FINISRATERVWATGRCEND,
				    T1.SCHDONPMTCAL,
				    T1.AUTOAPPROVE,
				    T1.OCRREQUIRED,
				    T1.ALLOWEDOCRS,
				    T1.DEFAULTOCR,
				    T1.ALLOWEDLOANPURPOSES,
				    T1.SPECIFICLOANPURPOSES,
				    T1.ALWPLANNEDEMIINGRC,
				    T1.GRCADJREQ,
				    T1.GRCPERIODAFTRFULLDISB,
				    T1.AUTOINCRGRCENDDATE,
				    T1.GRCAUTOINCRMONTHS,
				    T1.MAXAUTOINCRALLOWED,
				    T1.THRLDTOMAINTAINGRCPRD,
				    T1.ALWLOANSPLIT,
				    T1.SPLITLOANTYPE,
				    T1.INSTBASEDSCHD,
				    T1.TDSTYPE,
				    T1.CALCOFSTEPS,
				    T1.STEPSAPPLIEDFOR,
				    T1.SUBVENTIONREQ
				FROM RMTFINANCETYPES T1
				JOIN SMTDIVISIONDETAIL T3 ON T1.FINDIVISION = T3.DIVISIONCODE
				LEFT JOIN STEPPOLICYHEADER T4 ON T1.DFTSTEPPOLICY = T4.POLICYCODE
				LEFT JOIN RULES T5 ON T1.DOWNPAYRULE = T5.RULEID
				LEFT JOIN RULES T6 ON T1.GRCPRICINGMETHOD = T6.RULEID
				LEFT JOIN RULES T7 ON T1.RPYPRICINGMETHOD = T7.RULEID
				LEFT JOIN ENTITY T8 ON T3.ENTITYCODE = T8.ENTITYCODE
			]]>
		</createView>
	</changeSet>
	
	<changeSet id="ST#556.61_post" author="M.Mounika" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rmtfinancetypes_orgview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#556.47_pre" author="Mounika.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_aeview'); 
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#556.47" author="Mounika.M">
		<createView viewName="RMTFINANCETYPES_AEVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINTYPE,
				    '' FINDEFFREQ,
				    T1.FINCCY,
				    T1.FINCATEGORY,
				    T1.DEVELOPERFINANCE,
				    T1.PARTIALLYSECURED,
				    T1.INSTBASEDSCHD,
				    T1.TDSTYPE,
				    T1.SUBVENTIONREQ
				FROM RMTFINANCETYPES T1	
			]]>
		</createView>
	</changeSet>
	
	<changeSet id="ST#556.47_post" author="Mounika.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rmtfinancetypes_aeview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#556.48" author="Mounika.M">
		<createView viewName="RPT_PORTFOLIOBEHAVIORSMRY_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINDIVISION,
					 T1.FINTYPE,
					 T1.FINTYPEDESC,
					 T1.GRADE,
					 T1.CLASSIFICATION,
					 T1.DPD,
					 T1.CUROUTSTANDINGBHD,
					 T1.CUROUTSTANDINGUSD,
					 T.PORTFOLIOEXPOSUREBHD,
					 T.PORTFOLIOEXPOSUREUSD,
					 T.TOTALCUSTOMERS,
					 T2.NOOFRECORDS,
					 T.FINDIVORDER,
				     SMTDIVISIONDETAIL.DIVISIONCODEDESC
				FROM (((( SELECT T2_1.FINDIVISION, T1_1.FINTYPE,
				            CASE WHEN ((T2_1.FINDIVISION) = 'BFSD') THEN 1
	                    		 WHEN ((T2_1.FINDIVISION) = 'CL') THEN 2
	                    		 ELSE NULL END FINDIVORDER,
	            	SUM(${add.schema}UDF_CONVERTCURRENCY((T1_1.TOTALPRIBAL + T1_1.TOTALPFTBAL), (T1_1.FINCCY), 'INR')) PORTFOLIOEXPOSUREBHD,
	            	SUM(${add.schema}UDF_CONVERTCURRENCY((T1_1.TOTALPRIBAL + T1_1.TOTALPFTBAL), (T1_1.FINCCY), 'USD')) PORTFOLIOEXPOSUREUSD,
	            	COUNT(DISTINCT T1_1.CUSTCIF) TOTALCUSTOMERS
	           	FROM (FINPFTDETAILS T1_1 JOIN RMTFINANCETYPES T2_1 ON (((T1_1.FINTYPE) = (T2_1.FINTYPE))))
	          	GROUP BY T1_1.FINTYPE, T2_1.FINDIVISION) T
	     		JOIN RPT_PORTFOLIOBEHAVIOR T1 ON ((((T.FINTYPE) = (T1.FINTYPE)) AND ((T.FINDIVISION) = (T1.FINDIVISION)))))
	     		JOIN SMTDIVISIONDETAIL ON (((SMTDIVISIONDETAIL.DIVISIONCODE) = (T.FINDIVISION))))
	     		JOIN ( SELECT RPT_PORTFOLIOBEHAVIOR.FINDIVISION, RPT_PORTFOLIOBEHAVIOR.FINTYPE, COUNT(*) NOOFRECORDS
	           	FROM RPT_PORTFOLIOBEHAVIOR
	          	GROUP BY RPT_PORTFOLIOBEHAVIOR.FINTYPE, RPT_PORTFOLIOBEHAVIOR.FINDIVISION) T2 ON ((((T.FINTYPE) = (T2.FINTYPE)) AND ((T.FINDIVISION) = (T2.FINDIVISION)))))
			]]>
		</createView>
	</changeSet>
	
	<changeSet id="ST#556.49_pre" author="Mounika.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rpt_portfoliobehavior');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#556.49" author="Mounika.M">
		<createView viewName="RPT_PORTFOLIOBEHAVIOR" replaceIfExists="true">
			<![CDATA[
				SELECT T3.FINDIVISION,
				    T2.FINTYPE,
				    T3.FINTYPEDESC,
				    1 GRADE,
				    'EXCEPTIONAL-RISK FREE' CLASSIFICATION,
				    '0' DPD,
				    SUM(${add.schema}UDF_CONVERTCURRENCY(T1.FINCURODPRI + T1.FINCURODPFT, T2.FINCCY, 'INR')) CUROUTSTANDINGBHD,
				    SUM(${add.schema}UDF_CONVERTCURRENCY(T1.FINCURODPRI + T1.FINCURODPFT, T2.FINCCY, 'USD')) CUROUTSTANDINGUSD
				FROM FINODDETAILS T1
     			JOIN FINPFTDETAILS T2 ON T1.FINID = T2.FINID
     			JOIN RMTFINANCETYPES T3 ON T2.FINTYPE= T3.FINTYPE
  				WHERE T1.FINCURODAMT <> 0 AND T1.FINCURODDAYS = 0 AND COALESCE(T2.CLOSINGSTATUS, '') <> 'C'
  				GROUP BY T2.FINTYPE, T3.FINTYPEDESC, T3.FINDIVISION
				UNION
 				SELECT T3.FINDIVISION,
    				T2.FINTYPE,
    				T3.FINTYPEDESC,
    				2 GRADE,
    				'EXCELLENT-LOW RISK' CLASSIFICATION,
    				'1-15' DPD,
    				SUM(${add.schema}UDF_CONVERTCURRENCY(T1.FINCURODPRI + T1.FINCURODPFT, T2.FINCCY, 'INR')) CUROUTSTANDINGBHD,
    				SUM(${add.schema}UDF_CONVERTCURRENCY(T1.FINCURODPRI + T1.FINCURODPFT, T2.FINCCY, 'USD')) CUROUTSTANDINGUSD
   				FROM FINODDETAILS T1
     			JOIN FINPFTDETAILS T2 ON T1.FINID = T2.FINID
     			JOIN RMTFINANCETYPES T3 ON T2.FINTYPE = T3.FINTYPE
  				WHERE T1.FINCURODAMT <> 0 AND T1.FINCURODDAYS >= 1 AND T1.FINCURODDAYS <= 15 AND COALESCE(T2.CLOSINGSTATUS, '') <> 'C'
  				GROUP BY T2.FINTYPE, T3.FINTYPEDESC, T3.FINDIVISION
				UNION
 				SELECT T3.FINDIVISION,
    				T2.FINTYPE,
    				T3.FINTYPEDESC,
    				3 GRADE,
				    'SUPERIOR-MODEST RISK' CLASSIFICATION,
				    '16-30' DPD,
				    SUM(${add.schema}UDF_CONVERTCURRENCY(T1.FINCURODPRI + T1.FINCURODPFT, T2.FINCCY, 'INR')) CUROUTSTANDINGBHD,
				    SUM(${add.schema}UDF_CONVERTCURRENCY(T1.FINCURODPRI + T1.FINCURODPFT, T2.FINCCY, 'USD')) CUROUTSTANDINGUSD
   				FROM FINODDETAILS T1
     			JOIN FINPFTDETAILS T2 ON T1.FINID = T2.FINID
     			JOIN RMTFINANCETYPES T3 ON T2.FINTYPE = T3.FINTYPE
  				WHERE T1.FINCURODAMT <> 0 AND T1.FINCURODDAYS >= 16 AND T1.FINCURODDAYS <= 30 AND COALESCE(T2.CLOSINGSTATUS, '') <> 'C'
  				GROUP BY T2.FINTYPE, T3.FINTYPEDESC, T3.FINDIVISION
				UNION
 				SELECT T3.FINDIVISION,
				    T2.FINTYPE,
				    T3.FINTYPEDESC,
				    4 AS GRADE,
				    'GOOD-ABOVE AVERAGE RISK' CLASSIFICATION,
				    '31-45' DPD,
				    SUM(${add.schema}UDF_CONVERTCURRENCY(T1.FINCURODPRI + T1.FINCURODPFT, T2.FINCCY, 'INR')) CUROUTSTANDINGBHD,
				    SUM(${add.schema}UDF_CONVERTCURRENCY(T1.FINCURODPRI + T1.FINCURODPFT, T2.FINCCY, 'USD')) CUROUTSTANDINGUSD
   				FROM FINODDETAILS T1
     			JOIN FINPFTDETAILS T2 ON T1.FINID = T2.FINID
     			JOIN RMTFINANCETYPES T3 ON T2.FINTYPE = T3.FINTYPE
  				WHERE T1.FINCURODAMT <> 0 AND T1.FINCURODDAYS >= 31 AND T1.FINCURODDAYS <= 45 AND COALESCE(T2.CLOSINGSTATUS, '') <> 'C'
  				GROUP BY T2.FINTYPE, T3.FINTYPEDESC, T3.FINDIVISION
				UNION
 				SELECT T3.FINDIVISION,
				    T2.FINTYPE,
				    T3.FINTYPEDESC,
				    5 AS GRADE,
				    'SATISFACTORY-AVERAGE RISK' CLASSIFICATION,
				    '46-60' DPD,
				    SUM(${add.schema}UDF_CONVERTCURRENCY(T1.FINCURODPRI + T1.FINCURODPFT, T2.FINCCY, 'INR')) CUROUTSTANDINGBHD,
				    SUM(${add.schema}UDF_CONVERTCURRENCY(T1.FINCURODPRI + T1.FINCURODPFT, T2.FINCCY, 'USD')) CUROUTSTANDINGUSD
   				FROM FINODDETAILS T1
     			JOIN FINPFTDETAILS T2 ON T1.FINID = T2.FINID
     			JOIN RMTFINANCETYPES T3 ON T2.FINTYPE = T3.FINTYPE
  				WHERE T1.FINCURODAMT <> 0 AND T1.FINCURODDAYS >= 46 AND T1.FINCURODDAYS <= 60 AND COALESCE(T2.CLOSINGSTATUS, '') <> 'C'
  				GROUP BY T2.FINTYPE, T3.FINTYPEDESC, T3.FINDIVISION
				UNION
 				SELECT T3.FINDIVISION,
				    T2.FINTYPE,
				    T3.FINTYPEDESC,
				    6 GRADE,
				    'ADEQUATE-BORDERLINE' CLASSIFICATION,
				    '61-70' DPD,
				    SUM(${add.schema}UDF_CONVERTCURRENCY(T1.FINCURODPRI + T1.FINCURODPFT, T2.FINCCY, 'INR')) CUROUTSTANDINGBHD,
				    SUM(${add.schema}UDF_CONVERTCURRENCY(T1.FINCURODPRI + T1.FINCURODPFT, T2.FINCCY, 'USD')) CUROUTSTANDINGUSD
   				FROM FINODDETAILS T1
     			JOIN FINPFTDETAILS T2 ON T1.FINID = T2.FINID
     			JOIN RMTFINANCETYPES T3 ON T2.FINTYPE = T3.FINTYPE
  				WHERE T1.FINCURODAMT <> 0 AND T1.FINCURODDAYS >= 61 AND T1.FINCURODDAYS <= 70 AND COALESCE(T2.CLOSINGSTATUS, '') <> 'C'
  				GROUP BY T2.FINTYPE, T3.FINTYPEDESC, T3.FINDIVISION
				UNION
 				SELECT T3.FINDIVISION,
				    T2.FINTYPE,
				    T3.FINTYPEDESC,
				    7 GRADE,
				    'WATCH LIST' CLASSIFICATION,
				    '71-80' DPD,
				    SUM(${add.schema}UDF_CONVERTCURRENCY(T1.FINCURODPRI + T1.FINCURODPFT, T2.FINCCY, 'INR')) CUROUTSTANDINGBHD,
				    SUM(${add.schema}UDF_CONVERTCURRENCY(T1.FINCURODPRI + T1.FINCURODPFT, T2.FINCCY, 'USD')) CUROUTSTANDINGUSD
   				FROM FINODDETAILS T1
     			JOIN FINPFTDETAILS T2 ON T1.FINID = T2.FINID
     			JOIN RMTFINANCETYPES T3 ON T2.FINTYPE = T3.FINTYPE
  				WHERE T1.FINCURODAMT <> 0 AND T1.FINCURODDAYS >= 71 AND T1.FINCURODDAYS <= 80 AND COALESCE(T2.CLOSINGSTATUS, '') <> 'C'
  				GROUP BY T2.FINTYPE, T3.FINTYPEDESC, T3.FINDIVISION
				UNION
 				SELECT T3.FINDIVISION,
    				T2.FINTYPE,
				    T3.FINTYPEDESC,
				    8 GRADE,
				    'SPECIAL MENTION'CLASSIFICATION,
				    '81-90' DPD,
				    SUM(${add.schema}UDF_CONVERTCURRENCY(T1.FINCURODPRI + T1.FINCURODPFT, T2.FINCCY, 'INR')) CUROUTSTANDINGBHD,
				    SUM(${add.schema}UDF_CONVERTCURRENCY(T1.FINCURODPRI + T1.FINCURODPFT, T2.FINCCY, 'USD')) CUROUTSTANDINGUSD
   				FROM FINODDETAILS T1
     			JOIN FINPFTDETAILS T2 ON T1.FINID = T2.FINID
     			JOIN RMTFINANCETYPES T3 ON T2.FINTYPE = T3.FINTYPE
  				WHERE T1.FINCURODAMT <> 0 AND T1.FINCURODDAYS >= 81 AND T1.FINCURODDAYS <= 90 AND COALESCE(T2.CLOSINGSTATUS, '') <> 'C'
  				GROUP BY T2.FINTYPE, T3.FINTYPEDESC, T3.FINDIVISION
				UNION
 				SELECT T3.FINDIVISION,
				    T2.FINTYPE,
				    T3.FINTYPEDESC,
				    9 GRADE,
				    'SUBSTANDARD' CLASSIFICATION,
				    '91-180' DPD,
				    SUM(${add.schema}UDF_CONVERTCURRENCY(T1.FINCURODPRI + T1.FINCURODPFT, T2.FINCCY, 'INR')) CUROUTSTANDINGBHD,
				    SUM(${add.schema}UDF_CONVERTCURRENCY(T1.FINCURODPRI + T1.FINCURODPFT, T2.FINCCY, 'USD')) CUROUTSTANDINGUSD
   				FROM FINODDETAILS T1
     			JOIN FINPFTDETAILS T2 ON T1.FINID = T2.FINID
     			JOIN RMTFINANCETYPES T3 ON T2.FINTYPE = T3.FINTYPE
  				WHERE T1.FINCURODAMT <> 0 AND T1.FINCURODDAYS >= 91 AND T1.FINCURODDAYS <= 180 AND COALESCE(T2.CLOSINGSTATUS, '') <> 'C'
  				GROUP BY T2.FINTYPE, T3.FINTYPEDESC, T3.FINDIVISION
				UNION
 				SELECT T3.FINDIVISION,
				    T2.FINTYPE,
				    T3.FINTYPEDESC,
				    10 GRADE,
				    'DOUBTFUL' CLASSIFICATION,
				    '181-365' DPD,
				    SUM(${add.schema}UDF_CONVERTCURRENCY(T1.FINCURODPRI + T1.FINCURODPFT, T2.FINCCY, 'INR')) CUROUTSTANDINGBHD,
				    SUM(${add.schema}UDF_CONVERTCURRENCY(T1.FINCURODPRI + T1.FINCURODPFT, T2.FINCCY, 'USD')) CUROUTSTANDINGUSD
   				FROM FINODDETAILS T1
     			JOIN FINPFTDETAILS T2 ON T1.FINID = T2.FINID
     			JOIN RMTFINANCETYPES T3 ON T2.FINTYPE = T3.FINTYPE
  				WHERE T1.FINCURODAMT <> 0 AND T1.FINCURODDAYS >= 181 AND T1.FINCURODDAYS <= 365 AND COALESCE(T2.CLOSINGSTATUS, '') <> 'C'
  				GROUP BY T2.FINTYPE, T3.FINTYPEDESC, T3.FINDIVISION
				UNION
 				SELECT T3.FINDIVISION,
				    T2.FINTYPE,
				    T3.FINTYPEDESC,
				    11 GRADE,
				    'LOSS' CLASSIFICATION,
				    '365>' DPD,
				    SUM(${add.schema}UDF_CONVERTCURRENCY(T1.FINCURODPRI + T1.FINCURODPFT, T2.FINCCY, 'INR')) CUROUTSTANDINGBHD,
				    SUM(${add.schema}UDF_CONVERTCURRENCY(T1.FINCURODPRI + T1.FINCURODPFT, T2.FINCCY, 'USD')) CUROUTSTANDINGUSD
   				FROM FINODDETAILS T1
     			JOIN FINPFTDETAILS T2 ON T1.FINID = T2.FINID
     			JOIN RMTFINANCETYPES T3 ON T2.FINTYPE = T3.FINTYPE
  				WHERE T1.FINCURODAMT <> 0 AND T1.FINCURODDAYS > 365 AND COALESCE(T2.CLOSINGSTATUS, '') <> 'C'
  				GROUP BY T2.FINTYPE, T3.FINTYPEDESC, T3.FINDIVISION
			]]>
		</createView>
	</changeSet>
	
	 <changeSet id="ST#556.49_post" author="Mounika.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rpt_portfoliobehavior');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#556.50_pre" author="Mounika.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'customerfinances_iview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#556.50" author="Mounika.M">
		<createView viewName="CUSTOMERFINANCES_IVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.CUSTID CUSTOMERNO,
					T1.FINID,
				    T1.FINREFERENCE FINANCEREF,
				    T1.FINSTARTDATE STARTDATE,
				    T1.MATURITYDATE,
				    T1.TOTALPROFIT PROFITAMOUNT,
				    T1.TOTALREPAYAMT TOTALAMOUNT,
				    T1.FINAMOUNT FINANCEAMOUNT,
				    T1.NEXTREPAYDATE DUEDATE,
				    T1.NUMBEROFTERMS TOTALINSTALLMENTS,
				    T1.FINTYPE FINANCETYPE,
				    T3.CUSTSHRTNAME CUSTOMERNAME,
				    T1.REPAYPROFITRATE PROFITRATE,
				    T1.REPAYMARGIN MARGINRATE,
				    T1.REPAYBASERATE BASERATE,
				    T2.BRANCHDESC BRANCH,
				    T4.FINCATEGORY PRODUCTTYPE,
				    T5.NSCHDPFT + T5.NSCHDPRI INSTALLMENTAMOUNT,
				    T5.NSCHDPFT + T5.NSCHDPRI + T5.NSCHDPFTDUE + T5.NSCHDPRIDUE OUTSTANDINGAMOUNT,
				    T5.TOTALPFTBAL - T5.PFTACCRUED UNEARNEDPROFIT,
				    T5.NOINST - T5.NOPAIDINST REMAININGINSTALLMENTS,
				    T5.CURODDAYS DAYSPTDUE,
				    T1.FINAMOUNT - T1.FINREPAYMENTAMOUNT OUTSTANDINGBALANCE,
				    T6.CUSTSTSCODE FINANCESTATUS
				FROM FINANCEMAIN T1
				JOIN RMTBRANCHES T2 ON T1.FINBRANCH = T2.BRANCHCODE
				JOIN CUSTOMERS T3 ON T1.CUSTID = T3.CUSTID
				JOIN RMTFINANCETYPES T4 ON T1.FINTYPE = T4.FINTYPE
				JOIN FINPFTDETAILS T5 ON T1.FINID = T5.FINID
				JOIN BMTCUSTSTATUSCODES T6 ON T1.FINSTATUS = T6.CUSTSTSCODE
			]]>
		</createView>
	</changeSet>
	
	<changeSet id="ST#556.50_post" author="Mounika.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'customerfinances_iview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#556.51_pre" author="Mounika.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finunpaidrepayments_iview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#556.51" author="Mounika.M" dbms="postgresql">
		<createView viewName="FINUNPAIDREPAYMENTS_IVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT TEMP.FINTYPE,
				    TEMP.FINID,
				    TEMP.FINREFERENCE,
				    TEMP.SCHDATE,
				    TEMP.FINCCY,
				    TEMP.REPAYAMOUNT
   				FROM ( SELECT ROW_NUMBER() OVER (PARTITION BY T1.FINID ORDER BY T1.SCHDATE) ROW_NUM,
				     T2.FINTYPE,
				     T2.FINREFERENCE,
				     T2.FINID,
				     T1.SCHDATE,
				     T2.FINCCY,
				     T1.REPAYAMOUNT
           		FROM FINSCHEDULEDETAILS T1
             	JOIN FINANCEMAIN T2 ON T1.FINID = T2.FINID
          		WHERE (T1.PROFITSCHD - T1.SCHDPFTPAID + T1.PRINCIPALSCHD - T1.SCHDPRIPAID) <> 0 AND cast(T1.SCHDATE as character varying(1000))> (( SELECT SM.SYSPARMVALUE SYSPARMVALUE
                FROM SMTPARAMETERS SM
                WHERE SM.SYSPARMCODE = 'APP_DATE'))) TEMP WHERE TEMP.ROW_NUM = 1
			]]>
		</createView>
	</changeSet>
	
	<changeSet id="ST#556.51" author="Mounika.M" dbms="oracle">
		<createView viewName="FINUNPAIDREPAYMENTS_IVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT TEMP.FINTYPE,
				    TEMP.FINID,
				    TEMP.FINREFERENCE,
				    TEMP.SCHDATE,
				    TEMP.FINCCY,
				    TEMP.REPAYAMOUNT
   				FROM ( SELECT ROW_NUMBER() OVER (PARTITION BY T1.FINID ORDER BY T1.SCHDATE) ROW_NUM,
				     T2.FINTYPE,
				     T2.FINREFERENCE,
				     T2.FINID,
				     T1.SCHDATE,
				     T2.FINCCY,
				     T1.REPAYAMOUNT
           		FROM FINSCHEDULEDETAILS T1
             	JOIN FINANCEMAIN T2 ON T1.FINID = T2.FINID
          		WHERE (T1.PROFITSCHD - T1.SCHDPFTPAID + T1.PRINCIPALSCHD - T1.SCHDPRIPAID) <> 0 AND cast(T1.SCHDATE as varchar2(1000))> (( SELECT SM.SYSPARMVALUE SYSPARMVALUE
                FROM SMTPARAMETERS SM
                WHERE SM.SYSPARMCODE = 'APP_DATE'))) TEMP WHERE TEMP.ROW_NUM = 1
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#556.51" author="Mounika.M" dbms="mssql">
		<createView viewName="FINUNPAIDREPAYMENTS_IVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT TEMP.FINTYPE,
				    TEMP.FINID,
				    TEMP.FINREFERENCE,
				    TEMP.SCHDATE,
				    TEMP.FINCCY,
				    TEMP.REPAYAMOUNT
   				FROM ( SELECT ROW_NUMBER() OVER (PARTITION BY T1.FINID ORDER BY T1.SCHDATE) ROW_NUM,
				     T2.FINTYPE,
				     T2.FINREFERENCE,
				     T2.FINID,
				     T1.SCHDATE,
				     T2.FINCCY,
				     T1.REPAYAMOUNT
           		FROM FINSCHEDULEDETAILS T1
             	JOIN FINANCEMAIN T2 ON T1.FINID = T2.FINID
          		WHERE (T1.PROFITSCHD - T1.SCHDPFTPAID + T1.PRINCIPALSCHD - T1.SCHDPRIPAID) <> 0 AND cast(T1.SCHDATE as varchar(1000))> (( SELECT SM.SYSPARMVALUE SYSPARMVALUE
                FROM SMTPARAMETERS SM
                WHERE SM.SYSPARMCODE = 'APP_DATE'))) TEMP WHERE TEMP.ROW_NUM = 1
			]]>
		</createView>
	</changeSet>
	
	<changeSet id="ST#556.51_post" author="Mounika.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finunpaidrepayments_iview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#556.52_pre" author="M.Mounika" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rpt_noliability_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#556.52" author="M.Mounika">
		<createView viewName="RPT_NOLIABILITY_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT DISTINCT T1.CUSTCIF,
				    T1.CUSTSHRTNAME,
				    T4.CUSTDOCTITLE AS CUSTCPRNO
   				FROM CUSTOMERS T1
     			JOIN FINANCEMAIN T2 ON T1.CUSTID = T2.CUSTID
     			LEFT JOIN CUSTOMERDOCUMENTS T4 ON T4.CUSTID = T1.CUSTID AND T4.CUSTDOCTYPE = '03'
			]]>
		</createView>
	</changeSet>
	
	<changeSet id="ST#556.52_post" author="M.Mounika" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rpt_noliability_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#556.53_pre" author="Mounika.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finscheduledetails_iview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#556.53" author="Mounika.M" dbms="postgresql,oracle">
		<createView viewName="FINSCHEDULEDETAILS_IVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T.FINTYPE,
				    T.FINID,
				    T.FINREFERENCE,
				    T.SCHDATE,
				    T.FINCCY,
				    T.REPAYAMOUNT
   				FROM ( SELECT ROW_NUMBER() OVER (PARTITION BY T1.FINID ORDER BY T1.SCHDATE) AS ROW_NUM,
		            T2.FINTYPE,
		            T2.FINID,
		            T1.SCHDATE,
		            T2.FINREFERENCE,
		            T2.FINCCY,
		            T1.REPAYAMOUNT
           		FROM FINSCHEDULEDETAILS T1
             	JOIN FINANCEMAIN T2 ON T2.FINID = T1.FINID
          		WHERE (T1.PROFITSCHD - T1.SCHDPFTPAID + T1.PRINCIPALSCHD - T1.SCHDPRIPAID) <> 0 AND T1.SCHDATE > TO_DATE((( SELECT SMTPARAMETERS.SYSPARMVALUE
                FROM SMTPARAMETERS
                WHERE SMTPARAMETERS.SYSPARMCODE = 'APP_DATE')), 'YYYY-MM-DD')) T WHERE T.ROW_NUM = 1
			]]>
		</createView>
	</changeSet>
	
	<changeSet id="ST#556.53" author="Mounika.M" dbms="mssql">
		<createView viewName="FINSCHEDULEDETAILS_IVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T.FINTYPE,
				    T.FINID,
				    T.FINREFERENCE,
				    T.SCHDATE,
				    T.FINCCY,
				    T.REPAYAMOUNT
   				FROM ( SELECT ROW_NUMBER() OVER (PARTITION BY T1.FINID ORDER BY T1.SCHDATE) AS ROW_NUM,
		            T2.FINTYPE,
		            T2.FINID,
		            T1.SCHDATE,
		            T2.FINREFERENCE,
		            T2.FINCCY,
		            T1.REPAYAMOUNT
           		FROM FINSCHEDULEDETAILS T1
             	JOIN FINANCEMAIN T2 ON T2.FINID = T1.FINID
          		WHERE (T1.PROFITSCHD - T1.SCHDPFTPAID + T1.PRINCIPALSCHD - T1.SCHDPRIPAID) <> 0 AND T1.SCHDATE > (( SELECT SMTPARAMETERS.SYSPARMVALUE
                FROM SMTPARAMETERS
                WHERE SMTPARAMETERS.SYSPARMCODE = 'APP_DATE'))) T WHERE T.ROW_NUM = 1
			]]>
		</createView>
	</changeSet>
	
	<changeSet id="ST#556.53_post" author="Mounika.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finscheduledetails_iview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#556.54_pre" author="M.Mounika" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'collateralassignment_aview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#556.54" author="M.Mounika">
		<createView viewName="COLLATERALASSIGNMENT_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT CA.MODULE,
				    CA.REFERENCE,
				    CA.COLLATERALREF,
				    CA.ASSIGNPERC,
				    CS.COLLATERALCCY,
				    CA.ACTIVE,
				    CA.HOSTREFERENCE,
				    CS.COLLATERALVALUE,
				    CS.BANKVALUATION,
				    T.TOTASSIGNPERC - CA.ASSIGNPERC TOTASSIGNPERC,
				    COALESCE(FM.FINCURRASSETVALUE - FM.DOWNPAYMENT + FM.FEECHARGEAMT - FM.FINREPAYMENTAMOUNT, CM.CMTUTILIZEDAMOUNT) UTILIZEDAMOUNT,
				    CA.VERSION,
				    CA.LASTMNTBY,
				    CA.LASTMNTON,
				    CA.RECORDSTATUS,
				    CA.ROLECODE,
				    CA.NEXTROLECODE,
				    CA.TASKID,
				    CA.NEXTTASKID,
				    CA.RECORDTYPE,
				    CA.WORKFLOWID,
				    CS.SPECIALLTV,
				    CS.BANKLTV,
				    CU.CUSTCIF DEPOSITORCIF,
				    CS.COLLATERALTYPE
				FROM COLLATERALASSIGNMENT CA
				JOIN COLLATERALSETUP CS ON CA.COLLATERALREF = CS.COLLATERALREF
				JOIN CUSTOMERS CU ON CU.CUSTID = CS.DEPOSITORID
				LEFT JOIN ( SELECT T1.COLLATERALREF, SUM(T1.ASSIGNPERC) TOTASSIGNPERC
				FROM ( SELECT COLLATERALASSIGNMENT_TEMP.REFERENCE, COLLATERALASSIGNMENT_TEMP.COLLATERALREF, COLLATERALASSIGNMENT_TEMP.ASSIGNPERC FROM COLLATERALASSIGNMENT_TEMP
				UNION
				SELECT CA_1.REFERENCE, CA_1.COLLATERALREF, CA_1.ASSIGNPERC
				FROM COLLATERALASSIGNMENT CA_1 WHERE NOT EXISTS ( SELECT 1 FROM COLLATERALASSIGNMENT_TEMP 
				WHERE COLLATERALASSIGNMENT_TEMP.COLLATERALREF = CA_1.COLLATERALREF AND COLLATERALASSIGNMENT_TEMP.MODULE = CA_1.MODULE AND COLLATERALASSIGNMENT_TEMP.REFERENCE = CA_1.REFERENCE)) T1
				GROUP BY T1.COLLATERALREF) T ON T.COLLATERALREF = CA.COLLATERALREF
				LEFT JOIN FINANCEMAIN FM ON CA.REFERENCE = FM.FINREFERENCE
				LEFT JOIN COMMITMENTS CM ON CM.CMTREFERENCE = CA.REFERENCE
			]]>
		</createView>
	</changeSet>
	
	<changeSet id="ST#556.54_post" author="M.Mounika" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'collateralassignment_aview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#556.55_pre" author="Mounika.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'collateralassignment_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#556.55" author="Mounika.M">
		<createView viewName="COLLATERALASSIGNMENT_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT CA.MODULE,
				    CA.REFERENCE,
				    CA.COLLATERALREF,
				    CA.ASSIGNPERC,
				    CS.COLLATERALCCY,
				    CA.ACTIVE,
				    CA.HOSTREFERENCE,
				    CS.COLLATERALVALUE,
				    CS.BANKVALUATION,
				    T.TOTASSIGNPERC - CA.ASSIGNPERC TOTASSIGNPERC,
				    COALESCE(FM.FINCURRASSETVALUE - FM.DOWNPAYMENT + FM.FEECHARGEAMT - FM.FINREPAYMENTAMOUNT, CM.CMTUTILIZEDAMOUNT) UTILIZEDAMOUNT,
				    CA.VERSION,
				    CA.LASTMNTBY,
				    CA.LASTMNTON,
				    CA.RECORDSTATUS,
				    CA.ROLECODE,
				    CA.NEXTROLECODE,
				    CA.TASKID,
				    CA.NEXTTASKID,
				    CA.RECORDTYPE,
				    CA.WORKFLOWID,
				    CS.SPECIALLTV,
				    CS.BANKLTV,
				    CU.CUSTCIF DEPOSITORCIF,
				    CS.COLLATERALTYPE
				FROM COLLATERALASSIGNMENT_TEMP CA
				JOIN COLLATERALSETUP CS ON CA.COLLATERALREF = CS.COLLATERALREF
				JOIN CUSTOMERS CU ON CU.CUSTID = CS.DEPOSITORID
				LEFT JOIN ( SELECT T1.COLLATERALREF, SUM(T1.ASSIGNPERC) TOTASSIGNPERC
				FROM (SELECT COLLATERALASSIGNMENT_TEMP.REFERENCE, COLLATERALASSIGNMENT_TEMP.COLLATERALREF, COLLATERALASSIGNMENT_TEMP.ASSIGNPERC
						FROM COLLATERALASSIGNMENT_TEMP		
				       	UNION
				        SELECT CA_1.REFERENCE, CA_1.COLLATERALREF, CA_1.ASSIGNPERC FROM COLLATERALASSIGNMENT CA_1
				        WHERE NOT EXISTS ( SELECT 1 FROM COLLATERALASSIGNMENT_TEMP
				        WHERE COLLATERALASSIGNMENT_TEMP.COLLATERALREF = CA_1.COLLATERALREF AND COLLATERALASSIGNMENT_TEMP.MODULE = CA_1.MODULE AND COLLATERALASSIGNMENT_TEMP.REFERENCE = CA_1.REFERENCE)) T1
				        GROUP BY T1.COLLATERALREF) T ON T.COLLATERALREF = CA.COLLATERALREF
				LEFT JOIN FINANCEMAIN_TEMP FM ON CA.REFERENCE = FM.FINREFERENCE
				LEFT JOIN COMMITMENTS_TEMP CM ON CM.CMTREFERENCE = CA.REFERENCE
				UNION ALL
				SELECT CA.MODULE,
					CA.REFERENCE,
					CA.COLLATERALREF,
					CA.ASSIGNPERC,
					CS.COLLATERALCCY,
					CA.ACTIVE,
					CA.HOSTREFERENCE,
					CS.COLLATERALVALUE,
					CS.BANKVALUATION,
					T.TOTASSIGNPERC - CA.ASSIGNPERC TOTASSIGNPERC,
					COALESCE(FM.FINCURRASSETVALUE - FM.DOWNPAYMENT + FM.FEECHARGEAMT - FM.FINREPAYMENTAMOUNT, CM.CMTUTILIZEDAMOUNT) UTILIZEDAMOUNT,
					CA.VERSION,
					CA.LASTMNTBY,
					CA.LASTMNTON,
					CA.RECORDSTATUS,
					CA.ROLECODE,
					CA.NEXTROLECODE,
					CA.TASKID,
					CA.NEXTTASKID,
					CA.RECORDTYPE,
					CA.WORKFLOWID,
					CS.SPECIALLTV,
					CS.BANKLTV,
				    CU.CUSTCIF DEPOSITORCIF,
				    CS.COLLATERALTYPE
				FROM COLLATERALASSIGNMENT CA
				JOIN COLLATERALSETUP CS ON CA.COLLATERALREF = CS.COLLATERALREF
				JOIN CUSTOMERS CU ON CU.CUSTID = CS.DEPOSITORID
				LEFT JOIN ( SELECT T1.COLLATERALREF, SUM(T1.ASSIGNPERC) TOTASSIGNPERC 
							FROM ( SELECT COLLATERALASSIGNMENT_TEMP.REFERENCE, COLLATERALASSIGNMENT_TEMP.COLLATERALREF, COLLATERALASSIGNMENT_TEMP.ASSIGNPERC
				                FROM COLLATERALASSIGNMENT_TEMP
				                UNION SELECT CA_1.REFERENCE, CA_1.COLLATERALREF, CA_1.ASSIGNPERC
				                FROM COLLATERALASSIGNMENT CA_1
				                WHERE NOT EXISTS ( SELECT 1 FROM COLLATERALASSIGNMENT_TEMP
				                WHERE COLLATERALASSIGNMENT_TEMP.COLLATERALREF = CA_1.COLLATERALREF AND COLLATERALASSIGNMENT_TEMP.MODULE = CA_1.MODULE AND COLLATERALASSIGNMENT_TEMP.REFERENCE = CA_1.REFERENCE)) T1
							GROUP BY T1.COLLATERALREF) T ON T.COLLATERALREF = CA.COLLATERALREF
				LEFT JOIN FINANCEMAIN FM ON CA.REFERENCE = FM.FINREFERENCE
				LEFT JOIN COMMITMENTS CM ON CM.CMTREFERENCE = CA.REFERENCE
				WHERE NOT EXISTS ( SELECT 1 FROM COLLATERALASSIGNMENT_TEMP WHERE COLLATERALASSIGNMENT_TEMP.COLLATERALREF = CA.COLLATERALREF AND COLLATERALASSIGNMENT_TEMP.MODULE = CA.MODULE AND COLLATERALASSIGNMENT_TEMP.REFERENCE = CA.REFERENCE)						
			]]>
		</createView>
	</changeSet>
	
	<changeSet id="ST#556.55_post" author="Mounika.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'collateralassignment_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#556.56_pre" author="Mounika.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financeenquiry_hierarchy_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#556.56" author="Mounika.M">
		<createView viewName="FINANCEENQUIRY_HIERARCHY_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINID,
					T1.FINREFERENCE,
				    T1.FINBRANCH,
				    T1.FINTYPE,
				    T1.FINCCY,
				    T1.SCHEDULEMETHOD,
				    T1.PROFITDAYSBASIS,
				    T1.FINSTARTDATE,
				    T1.CALTERMS NUMBEROFTERMS,
				    T1.CUSTID,
				    T1.FINAMOUNT,
				    T1.GRCPERIODENDDATE,
				    T1.MATURITYDATE,
				    T1.FINREPAYMENTAMOUNT,
				    T1.FINISACTIVE,
				    T1.ALLOWGRCPERIOD,
				    T1.DOWNPAYMENT,
				    T1.MIGRATEDFINANCE,
				    T1.LASTREPAYDATE,
				    T1.LASTREPAYPFTDATE,
				    T1.FINCURRASSETVALUE,
				    T1.BLACKLISTED,
				    T1.FEECHARGEAMT,
				    T1.CLOSINGSTATUS,
				    T1.GRACETERMS,
				    T1.ALWMULTIDISB,
				    T1.DEFFERMENTS,
				    T1.FINSTATUS,
				    T1.MANDATEID,
				    T1.FINREPAYMETHOD,
				    T1.FINASSETVALUE,
				    T1.FINCURRASSETVALUE + T1.FEECHARGEAMT + T1.TOTALCPZ FINANCINGAMOUNT,
				    T1.TOTALCPZ,
				    T1.FINCURRASSETVALUE + T1.TOTALCPZ - T1.FINREPAYMENTAMOUNT + T1.FEECHARGEAMT CURFINAMOUNT,
				    T2.FINTYPEDESC LOVDESCFINTYPENAME,
				    T2.FINSCHEDULEON LOVDESCFINSCHEDULEON,
				    T2.FINDIVISION LOVDESCFINDIVISION,
				    T2.FINCATEGORY LOVDESCPRODUCTCODENAME,
				    T2.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
				    T3.CUSTCIF LOVDESCCUSTCIF,
				    T3.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
				    T4.BRANCHDESC LOVDESCFINBRANCHNAME,
				    T5.CUSTTYPECTG,
				    COALESCE(T9.NOINST, 0) NOINST,
				    H.REPORTING_TO
				FROM FINANCEMAIN T1
     			JOIN USER_HIERARCHY H ON T1.BUSINESSVERTICAL = COALESCE(H.BUSINESS_VERTICAL, T1.BUSINESSVERTICAL) AND T1.FINCATEGORY = COALESCE(H.PRODUCT, T1.FINCATEGORY) AND T1.FINTYPE = COALESCE(H.FIN_TYPE, T1.FINTYPE) AND T1.FINBRANCH = COALESCE(H.BRANCH, T1.FINBRANCH)
     			JOIN RMTFINANCETYPES T2 ON T1.FINTYPE = T2.FINTYPE
     			JOIN CUSTOMERS T3 ON T1.CUSTID = T3.CUSTID
     			JOIN RMTBRANCHES T4 ON T1.FINBRANCH = T4.BRANCHCODE
     			JOIN RMTCUSTTYPES T5 ON T3.CUSTTYPECODE = T5.CUSTTYPECODE
     			LEFT JOIN FINPFTDETAILS T9 ON T1.FINID = T9.FINID
			]]>
		</createView>
	</changeSet>
	
	<changeSet id="ST#556.56_post" author="Mounika.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financeenquiry_hierarchy_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#556.57_pre" author="Mounika.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finoverdueenquiry_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#556.57" author="Mounika.M">
		<createView viewName="FINOVERDUEENQUIRY_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINID,
					T1.FINREFERENCE,
				    T1.FINBRANCH,
				    T1.FINTYPE,
				    T1.FINCCY,
				    T1.SCHEDULEMETHOD,
				    T1.PROFITDAYSBASIS,
				    T1.FINSTARTDATE,
				    T1.NUMBEROFTERMS,
				    T1.CUSTID,
				    T1.FINAMOUNT,
				    T1.GRCPERIODENDDATE,
				    T1.MATURITYDATE,
				    T1.FINREPAYMENTAMOUNT,
				    T1.FINISACTIVE,
				    T1.ALLOWGRCPERIOD,
				    T1.DOWNPAYMENT,
				    T1.MIGRATEDFINANCE,
				    T1.LASTREPAYDATE,
				    T1.LASTREPAYPFTDATE,
				    T5.FINTYPEDESC LOVDESCFINTYPENAME,
				    T6.CUSTCIF LOVDESCCUSTCIF,
				    T6.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
				    T7.BRANCHDESC LOVDESCFINBRANCHNAME,
				    T1.BLACKLISTED,
				    T5.FINSCHEDULEON LOVDESCFINSCHEDULEON,
				    T1.FEECHARGEAMT,
				    T1.CLOSINGSTATUS,
				    T8.CUSTTYPECTG,
				    T1.GRACETERMS,
				    T5.FINDIVISION LOVDESCFINDIVISION,
				    T5.FINCATEGORY LOVDESCPRODUCTCODENAME,
				    T1.ALWMULTIDISB,
				    T5.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
				    T1.DEFFERMENTS,
				    T1.FINCURRASSETVALUE,
				    T1.FINAMOUNT - T1.DOWNPAYMENT + T1.FEECHARGEAMT - T1.FINREPAYMENTAMOUNT CURFINAMOUNT,
				    T1.FINAMOUNT - T1.DOWNPAYMENT + T1.FEECHARGEAMT FINANCINGAMOUNT,
				    T1.FINSTATUS,
				    T1.TOTALCPZ
				FROM FINANCEMAIN T1
			    JOIN RMTFINANCETYPES T5 ON T1.FINTYPE = T5.FINTYPE
			    JOIN CUSTOMERS T6 ON T1.CUSTID = T6.CUSTID
			    JOIN RMTBRANCHES T7 ON T1.FINBRANCH = T7.BRANCHCODE
			    JOIN RMTCUSTTYPES T8 ON T6.CUSTTYPECODE = T8.CUSTTYPECODE
  				WHERE (T1.FINID IN ( SELECT FINODDETAILS.FINID FROM FINODDETAILS))
			]]>
		</createView>
	</changeSet>
	
	<changeSet id="ST#556.57_post" author="Mounika.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finoverdueenquiry_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#556.58_pre" author="Mounika.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'mandateenquiry_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#556.58" author="Mounika.M" dbms="postgresql">
		<createView viewName="MANDATEENQUIRY_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINID,
					T1.FINREFERENCE,
				    T1.FINBRANCH,
				    T1.FINTYPE,
				    T1.FINCCY,
				    T1.SCHEDULEMETHOD,
				    T1.PROFITDAYSBASIS,
				    T1.FINSTARTDATE,
				    T1.CALTERMS NUMBEROFTERMS,
				    T1.CUSTID,
				    T1.FINAMOUNT,
				    T1.GRCPERIODENDDATE,
				    T1.MATURITYDATE,
				    T1.FINREPAYMENTAMOUNT,
				    T1.FINISACTIVE,
				    T1.ALLOWGRCPERIOD,
				    T1.DOWNPAYMENT,
				    T1.MIGRATEDFINANCE,
				    T1.LASTREPAYDATE,
				    T1.LASTREPAYPFTDATE,
				    T1.FINCURRASSETVALUE,
				    T1.BLACKLISTED,
				    T1.FEECHARGEAMT,
				    T1.CLOSINGSTATUS,
				    T1.GRACETERMS,
				    T1.ALWMULTIDISB,
				    T1.DEFFERMENTS,
				    T1.FINSTATUS,
				    T1.MANDATEID,
				    T1.FINREPAYMETHOD,
				    T1.FINASSETVALUE,
				    T1.FINCURRASSETVALUE + T1.FEECHARGEAMT FINANCINGAMOUNT,
				    T1.FINCURRASSETVALUE - T1.FINREPAYMENTAMOUNT + T1.FEECHARGEAMT CURFINAMOUNT,
				    T2.FINTYPEDESC LOVDESCFINTYPENAME,
				    T2.FINSCHEDULEON LOVDESCFINSCHEDULEON,
				    T2.FINDIVISION LOVDESCFINDIVISION,
				    T2.FINCATEGORY LOVDESCPRODUCTCODENAME,
				    T2.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
				    T3.CUSTCIF LOVDESCCUSTCIF,
				    T3.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
				    T4.BRANCHDESC LOVDESCFINBRANCHNAME,
				    T5.CUSTTYPECTG,
				    COALESCE(T9.NOINST, 0) NOINST,
				    T6.MAXINSTAMOUNT
				FROM FINANCEMAIN T1
				JOIN RMTFINANCETYPES T2 ON T1.FINTYPE = T2.FINTYPE
				JOIN CUSTOMERS T3 ON T1.CUSTID = T3.CUSTID
				JOIN RMTBRANCHES T4 ON T1.FINBRANCH = T4.BRANCHCODE
				JOIN RMTCUSTTYPES T5 ON T3.CUSTTYPECODE = T5.CUSTTYPECODE
				LEFT JOIN FINPFTDETAILS T9 ON T1.FINID = T9.FINID
				LEFT JOIN ( SELECT FINSCHEDULEDETAILS.FINID, MAX(FINSCHEDULEDETAILS.REPAYAMOUNT + FINSCHEDULEDETAILS.FEESCHD) MAXINSTAMOUNT
				FROM FINSCHEDULEDETAILS WHERE cast(FINSCHEDULEDETAILS.SCHDATE as character varying(1000)) >= ((( SELECT SMTPARAMETERS.SYSPARMVALUE FROM SMTPARAMETERS WHERE SMTPARAMETERS.SYSPARMCODE = 'APP_DATE'))) GROUP BY FINSCHEDULEDETAILS.FINID) T6 ON T6.FINID = T1.FINID				
			]]>
		</createView>
	</changeSet>
	
	<changeSet id="ST#556.58" author="Mounika.M" dbms="oracle">
		<createView viewName="MANDATEENQUIRY_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINID,
					T1.FINREFERENCE,
				    T1.FINBRANCH,
				    T1.FINTYPE,
				    T1.FINCCY,
				    T1.SCHEDULEMETHOD,
				    T1.PROFITDAYSBASIS,
				    T1.FINSTARTDATE,
				    T1.CALTERMS NUMBEROFTERMS,
				    T1.CUSTID,
				    T1.FINAMOUNT,
				    T1.GRCPERIODENDDATE,
				    T1.MATURITYDATE,
				    T1.FINREPAYMENTAMOUNT,
				    T1.FINISACTIVE,
				    T1.ALLOWGRCPERIOD,
				    T1.DOWNPAYMENT,
				    T1.MIGRATEDFINANCE,
				    T1.LASTREPAYDATE,
				    T1.LASTREPAYPFTDATE,
				    T1.FINCURRASSETVALUE,
				    T1.BLACKLISTED,
				    T1.FEECHARGEAMT,
				    T1.CLOSINGSTATUS,
				    T1.GRACETERMS,
				    T1.ALWMULTIDISB,
				    T1.DEFFERMENTS,
				    T1.FINSTATUS,
				    T1.MANDATEID,
				    T1.FINREPAYMETHOD,
				    T1.FINASSETVALUE,
				    T1.FINCURRASSETVALUE + T1.FEECHARGEAMT FINANCINGAMOUNT,
				    T1.FINCURRASSETVALUE - T1.FINREPAYMENTAMOUNT + T1.FEECHARGEAMT CURFINAMOUNT,
				    T2.FINTYPEDESC LOVDESCFINTYPENAME,
				    T2.FINSCHEDULEON LOVDESCFINSCHEDULEON,
				    T2.FINDIVISION LOVDESCFINDIVISION,
				    T2.FINCATEGORY LOVDESCPRODUCTCODENAME,
				    T2.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
				    T3.CUSTCIF LOVDESCCUSTCIF,
				    T3.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
				    T4.BRANCHDESC LOVDESCFINBRANCHNAME,
				    T5.CUSTTYPECTG,
				    COALESCE(T9.NOINST, 0) NOINST,
				    T6.MAXINSTAMOUNT
				FROM FINANCEMAIN T1
				JOIN RMTFINANCETYPES T2 ON T1.FINTYPE = T2.FINTYPE
				JOIN CUSTOMERS T3 ON T1.CUSTID = T3.CUSTID
				JOIN RMTBRANCHES T4 ON T1.FINBRANCH = T4.BRANCHCODE
				JOIN RMTCUSTTYPES T5 ON T3.CUSTTYPECODE = T5.CUSTTYPECODE
				LEFT JOIN FINPFTDETAILS T9 ON T1.FINID = T9.FINID
				LEFT JOIN ( SELECT FINSCHEDULEDETAILS.FINID, MAX(FINSCHEDULEDETAILS.REPAYAMOUNT + FINSCHEDULEDETAILS.FEESCHD) MAXINSTAMOUNT
				FROM FINSCHEDULEDETAILS WHERE cast(FINSCHEDULEDETAILS.SCHDATE as varchar2(1000)) >= ((( SELECT SMTPARAMETERS.SYSPARMVALUE FROM SMTPARAMETERS WHERE SMTPARAMETERS.SYSPARMCODE = 'APP_DATE'))) GROUP BY FINSCHEDULEDETAILS.FINID) T6 ON T6.FINID = T1.FINID				
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#556.58" author="Mounika.M" dbms="mssql">
		<createView viewName="MANDATEENQUIRY_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINID,
					T1.FINREFERENCE,
				    T1.FINBRANCH,
				    T1.FINTYPE,
				    T1.FINCCY,
				    T1.SCHEDULEMETHOD,
				    T1.PROFITDAYSBASIS,
				    T1.FINSTARTDATE,
				    T1.CALTERMS NUMBEROFTERMS,
				    T1.CUSTID,
				    T1.FINAMOUNT,
				    T1.GRCPERIODENDDATE,
				    T1.MATURITYDATE,
				    T1.FINREPAYMENTAMOUNT,
				    T1.FINISACTIVE,
				    T1.ALLOWGRCPERIOD,
				    T1.DOWNPAYMENT,
				    T1.MIGRATEDFINANCE,
				    T1.LASTREPAYDATE,
				    T1.LASTREPAYPFTDATE,
				    T1.FINCURRASSETVALUE,
				    T1.BLACKLISTED,
				    T1.FEECHARGEAMT,
				    T1.CLOSINGSTATUS,
				    T1.GRACETERMS,
				    T1.ALWMULTIDISB,
				    T1.DEFFERMENTS,
				    T1.FINSTATUS,
				    T1.MANDATEID,
				    T1.FINREPAYMETHOD,
				    T1.FINASSETVALUE,
				    T1.FINCURRASSETVALUE + T1.FEECHARGEAMT FINANCINGAMOUNT,
				    T1.FINCURRASSETVALUE - T1.FINREPAYMENTAMOUNT + T1.FEECHARGEAMT CURFINAMOUNT,
				    T2.FINTYPEDESC LOVDESCFINTYPENAME,
				    T2.FINSCHEDULEON LOVDESCFINSCHEDULEON,
				    T2.FINDIVISION LOVDESCFINDIVISION,
				    T2.FINCATEGORY LOVDESCPRODUCTCODENAME,
				    T2.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
				    T3.CUSTCIF LOVDESCCUSTCIF,
				    T3.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
				    T4.BRANCHDESC LOVDESCFINBRANCHNAME,
				    T5.CUSTTYPECTG,
				    COALESCE(T9.NOINST, 0) NOINST,
				    T6.MAXINSTAMOUNT
				FROM FINANCEMAIN T1
				JOIN RMTFINANCETYPES T2 ON T1.FINTYPE = T2.FINTYPE
				JOIN CUSTOMERS T3 ON T1.CUSTID = T3.CUSTID
				JOIN RMTBRANCHES T4 ON T1.FINBRANCH = T4.BRANCHCODE
				JOIN RMTCUSTTYPES T5 ON T3.CUSTTYPECODE = T5.CUSTTYPECODE
				LEFT JOIN FINPFTDETAILS T9 ON T1.FINID = T9.FINID
				LEFT JOIN ( SELECT FINSCHEDULEDETAILS.FINID, MAX(FINSCHEDULEDETAILS.REPAYAMOUNT + FINSCHEDULEDETAILS.FEESCHD) MAXINSTAMOUNT
				FROM FINSCHEDULEDETAILS WHERE cast(FINSCHEDULEDETAILS.SCHDATE as varchar(1000)) >= ((( SELECT SMTPARAMETERS.SYSPARMVALUE FROM SMTPARAMETERS WHERE SMTPARAMETERS.SYSPARMCODE = 'APP_DATE'))) GROUP BY FINSCHEDULEDETAILS.FINID) T6 ON T6.FINID = T1.FINID				
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#556.58_post" author="Mounika.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'mandateenquiry_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#556.59_pre" author="Mounika.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'dm_disb_details_daily_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#556.59" author="Mounika.M" dbms="postgresql">
		<createView viewName="DM_DISB_DETAILS_DAILY_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T2.FINAPPROVEDDATE AGREEMENTDATE,
				    ${call.substr}(T2.FINREFERENCE, 9, ${call.collength}(T2.FINREFERENCE)) APPLID,
				    T2.FINREFERENCE AGREEMENTNO,
				    T3.DISBSEQ DISBURSEMENTNO,
				    T3.DISBDATE DISBURSEMENTDATE,
				    NULL PARENT_AGREEMENTNO,
				    T2.FINAMOUNT / RC.CCYMINORCCYUNITS AMTFIN,
				    (T2.FINAMOUNT - T2.DOWNPAYMENT + T2.FEECHARGEAMT) / RC.CCYMINORCCYUNITS NET_AMTFIN,
				    T7.DISBAMOUNT / RC.CCYMINORCCYUNITS DISBURSEDAMT,
        			CASE WHEN T2.FINASSETVALUE = T2.FINCURRASSETVALUE THEN 
            			'FULLY DISBURSED'
            		ELSE 
            			'PARTIALLY DISBURSED'
        			END DISB_STATUS,
    				T1.FIRSTREPAYDATE FIRST_DUE_DATE,
    				DATE_PART('MONTH', T2.MATURITYDATE - T2.FINSTARTDATE) GROSS_TENURE,
				    T1.NOINST NET_TENURE,
				    T2.MATURITYDATE,
				    T2.LASTREPAYDATE EXPIRYDATE,
				    NULL NO_OF_ADV_INSTL,
				    NULL ADV_EMI_AMT,
				    T2.FIRSTREPAY EMI,
				    T2.FINREPAYMETHOD REPAYMENT_MODE,
				    T2.FINTYPE PRODUCTFLAG,
				    P.PROMOTIONID,
				    NULL ICICI_LOMBARD,
				    NULL BAGIC,
				    NULL BALIC_CHARGES,
				    NULL BUSINESSDATE,
				    'N' PROCESSED_FLAG,
				    NULL PROCESS_DATE,
				    NULL SEGMENTS,
				    T9.TOTALFEE / RC.CCYMINORCCYUNITS FEE,
				    NULL DEALER_SUBV,
				    NULL MANU_SUBV_DED,
				    NULL MANU_SUBV_NDED,
				    T2.BPIAMOUNT / RC.CCYMINORCCYUNITS PREEMI,
				    NULL EXISTING_LANNO,
				    NULL MORTGAGE_FEE,
				    NULL COMMITMENT_FEE,
				    T10.PROCES_FEE / RC.CCYMINORCCYUNITS PROCESSING_FEE,
				    NULL PRE_EMI_RECEIVABLE,
				    T2.FINREPAYMETHOD PAYMENTMODE,
        			CASE WHEN  ${call.substr}(T2.REPAYFRQ, 1, 1) = 'Y' THEN
							'A'
            			ELSE 
            				 ${call.substr}(T2.REPAYFRQ, 1, 1)
        			END FREQ,
				    FA.LLREFERENCENO CHEQUENUM,
				    ${call.substr}(FA.BENEFICIARYACCNO, 1, 16) CUST_ACCT_NO,
				    T5.BANKNAME,
				    T6.MICR MICRCODE,
				    NULL BUSINESS_YEAR,
				    NULL EMI_CHARGE,
				    NULL PDC_CHARGE,
				    CASE WHEN T2.EFFECTIVERATEOFRETURN > 999 THEN 
				    		999	
            			 ELSE 
            			 	T2.EFFECTIVERATEOFRETURN
        			END IRR_PER,
				    T9.TOTALFEE / RC.CCYMINORCCYUNITS FEE_WL,
				    NULL ELC_CHARGE,
				    NULL CREDIT_VIDYA_FEES,
				    NULL BATCH_ID
				FROM FINANCEMAIN T2
				JOIN FINPFTDETAILS T1 ON T1.FINID = T2.FINID
				JOIN FINDISBURSEMENTDETAILS T3 ON T3.FINID = T2.FINID
				JOIN RMTFINANCETYPES T4 ON T4.FINTYPE = T2.FINTYPE
				LEFT JOIN BANKBRANCHES T6 ON T6.BRANCHCODE = T2.FINBRANCH
     			LEFT JOIN BMTBANKDETAIL T5 ON T5.BANKCODE = T6.BANKCODE
     			LEFT JOIN PROMOTIONS P ON P.PROMOTIONCODE = T2.PROMOTIONCODE
     			JOIN RMTCURRENCIES RC ON RC.CCYCODE = T2.FINCCY
     			LEFT JOIN ( SELECT FINDISBURSEMENTDETAILS.FINID, SUM(FINDISBURSEMENTDETAILS.DISBAMOUNT) DISBAMOUNT FROM FINDISBURSEMENTDETAILS
          					WHERE FINDISBURSEMENTDETAILS.DISBDATE <= (( SELECT TO_DATE(SMTPARAMETERS.SYSPARMVALUE, 'YYYY-MM-DD') SYSPARMVALUE FROM SMTPARAMETERS
                  			WHERE SMTPARAMETERS.SYSPARMCODE ='APP_DATE')) GROUP BY FINDISBURSEMENTDETAILS.FINID) T7 ON T7.FINID = T2.FINID
     			LEFT JOIN ( SELECT FINEXCESSAMOUNT.FINID, SUM(FINEXCESSAMOUNT.BALANCEAMT) BALANCEAMT FROM FINEXCESSAMOUNT
          					WHERE FINEXCESSAMOUNT.AMOUNTTYPE = 'A' GROUP BY FINEXCESSAMOUNT.FINID) T8 ON T8.FINID = T2.FINID
     			LEFT JOIN ( SELECT FINFEEDETAIL.FINID, SUM(FINFEEDETAIL.ACTUALAMOUNT - FINFEEDETAIL.WAIVEDAMOUNT) TOTALFEE FROM FINFEEDETAIL GROUP BY FINFEEDETAIL.FINID) T9 ON T9.FINID = T2.FINID
     			LEFT JOIN ( SELECT F.FINID, SUM(F.ACTUALAMOUNT - F.WAIVEDAMOUNT) PROCES_FEE FROM FINFEEDETAIL F
             	JOIN FEETYPES FT ON F.FEETYPEID = FT.FEETYPEID WHERE FT.FEETYPECODE = 'PROCFEE'
          		GROUP BY F.FINID) T10 ON T10.FINID = T2.FINID
     			LEFT JOIN ( SELECT FA_1.FINREFERENCE, FA_1.BENEFICIARYACCNO, FA_1.LLREFERENCENO
           		FROM ( SELECT FINADVANCEPAYMENTS.FINREFERENCE, MAX(FINADVANCEPAYMENTS.PAYMENTSEQ) MAXPAYMENTSEQ FROM FINADVANCEPAYMENTS
                GROUP BY FINADVANCEPAYMENTS.FINREFERENCE) T
             	JOIN FINADVANCEPAYMENTS FA_1 ON FA_1.FINREFERENCE = T.FINREFERENCE AND FA_1.PAYMENTSEQ = T.MAXPAYMENTSEQ) FA ON FA.FINREFERENCE = T2.FINREFERENCE
			]]>
		</createView>
	</changeSet>
	
	<changeSet id="ST#556.59" author="Mounika.M" dbms="oracle">
		<createView viewName="DM_DISB_DETAILS_DAILY_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T2.FINAPPROVEDDATE AGREEMENTDATE,
				    ${call.substr}(T2.FINREFERENCE, 9, ${call.collength}(T2.FINREFERENCE)) APPLID,
				    T2.FINREFERENCE AGREEMENTNO,
				    T3.DISBSEQ DISBURSEMENTNO,
				    T3.DISBDATE DISBURSEMENTDATE,
				    NULL PARENT_AGREEMENTNO,
				    T2.FINAMOUNT / RC.CCYMINORCCYUNITS AMTFIN,
				    (T2.FINAMOUNT - T2.DOWNPAYMENT + T2.FEECHARGEAMT) / RC.CCYMINORCCYUNITS NET_AMTFIN,
				    T7.DISBAMOUNT / RC.CCYMINORCCYUNITS DISBURSEDAMT,
        			CASE WHEN T2.FINASSETVALUE = T2.FINCURRASSETVALUE THEN 
            			'FULLY DISBURSED'
            		ELSE 
            			'PARTIALLY DISBURSED'
        			END DISB_STATUS,
    				T1.FIRSTREPAYDATE FIRST_DUE_DATE,
    				to_char( T2.MATURITYDATE - T2.FINSTARTDATE,'MONTH') GROSS_TENURE,
				    T1.NOINST NET_TENURE,
				    T2.MATURITYDATE,
				    T2.LASTREPAYDATE EXPIRYDATE,
				    NULL NO_OF_ADV_INSTL,
				    NULL ADV_EMI_AMT,
				    T2.FIRSTREPAY EMI,
				    T2.FINREPAYMETHOD REPAYMENT_MODE,
				    T2.FINTYPE PRODUCTFLAG,
				    P.PROMOTIONID,
				    NULL ICICI_LOMBARD,
				    NULL BAGIC,
				    NULL BALIC_CHARGES,
				    NULL BUSINESSDATE,
				    'N' PROCESSED_FLAG,
				    NULL PROCESS_DATE,
				    NULL SEGMENTS,
				    T9.TOTALFEE / RC.CCYMINORCCYUNITS FEE,
				    NULL DEALER_SUBV,
				    NULL MANU_SUBV_DED,
				    NULL MANU_SUBV_NDED,
				    T2.BPIAMOUNT / RC.CCYMINORCCYUNITS PREEMI,
				    NULL EXISTING_LANNO,
				    NULL MORTGAGE_FEE,
				    NULL COMMITMENT_FEE,
				    T10.PROCES_FEE / RC.CCYMINORCCYUNITS PROCESSING_FEE,
				    NULL PRE_EMI_RECEIVABLE,
				    T2.FINREPAYMETHOD PAYMENTMODE,
        			CASE WHEN  ${call.substr}(T2.REPAYFRQ, 1, 1) = 'Y' THEN
							'A'
            			ELSE 
            				 ${call.substr}(T2.REPAYFRQ, 1, 1)
        			END FREQ,
				    FA.LLREFERENCENO CHEQUENUM,
				    ${call.substr}(FA.BENEFICIARYACCNO, 1, 16) CUST_ACCT_NO,
				    T5.BANKNAME,
				    T6.MICR MICRCODE,
				    NULL BUSINESS_YEAR,
				    NULL EMI_CHARGE,
				    NULL PDC_CHARGE,
				    CASE WHEN T2.EFFECTIVERATEOFRETURN > 999 THEN 
				    		999	
            			 ELSE 
            			 	T2.EFFECTIVERATEOFRETURN
        			END IRR_PER,
				    T9.TOTALFEE / RC.CCYMINORCCYUNITS FEE_WL,
				    NULL ELC_CHARGE,
				    NULL CREDIT_VIDYA_FEES,
				    NULL BATCH_ID
				FROM FINANCEMAIN T2
				JOIN FINPFTDETAILS T1 ON T1.FINID = T2.FINID
				JOIN FINDISBURSEMENTDETAILS T3 ON T3.FINID = T2.FINID
				JOIN RMTFINANCETYPES T4 ON T4.FINTYPE = T2.FINTYPE
				LEFT JOIN BANKBRANCHES T6 ON T6.BRANCHCODE = T2.FINBRANCH
     			LEFT JOIN BMTBANKDETAIL T5 ON T5.BANKCODE = T6.BANKCODE
     			LEFT JOIN PROMOTIONS P ON P.PROMOTIONCODE = T2.PROMOTIONCODE
     			JOIN RMTCURRENCIES RC ON RC.CCYCODE = T2.FINCCY
     			LEFT JOIN ( SELECT FINDISBURSEMENTDETAILS.FINID, SUM(FINDISBURSEMENTDETAILS.DISBAMOUNT) DISBAMOUNT FROM FINDISBURSEMENTDETAILS
          					WHERE FINDISBURSEMENTDETAILS.DISBDATE <= (( SELECT TO_DATE(SMTPARAMETERS.SYSPARMVALUE, 'YYYY-MM-DD') SYSPARMVALUE FROM SMTPARAMETERS
                  			WHERE SMTPARAMETERS.SYSPARMCODE ='APP_DATE')) GROUP BY FINDISBURSEMENTDETAILS.FINID) T7 ON T7.FINID = T2.FINID
     			LEFT JOIN ( SELECT FINEXCESSAMOUNT.FINID, SUM(FINEXCESSAMOUNT.BALANCEAMT) BALANCEAMT FROM FINEXCESSAMOUNT
          					WHERE FINEXCESSAMOUNT.AMOUNTTYPE = 'A' GROUP BY FINEXCESSAMOUNT.FINID) T8 ON T8.FINID = T2.FINID
     			LEFT JOIN ( SELECT FINFEEDETAIL.FINID, SUM(FINFEEDETAIL.ACTUALAMOUNT - FINFEEDETAIL.WAIVEDAMOUNT) TOTALFEE FROM FINFEEDETAIL GROUP BY FINFEEDETAIL.FINID) T9 ON T9.FINID = T2.FINID
     			LEFT JOIN ( SELECT F.FINID, SUM(F.ACTUALAMOUNT - F.WAIVEDAMOUNT) PROCES_FEE FROM FINFEEDETAIL F
             	JOIN FEETYPES FT ON F.FEETYPEID = FT.FEETYPEID WHERE FT.FEETYPECODE = 'PROCFEE'
          		GROUP BY F.FINID) T10 ON T10.FINID = T2.FINID
     			LEFT JOIN ( SELECT FA_1.FINREFERENCE, FA_1.BENEFICIARYACCNO, FA_1.LLREFERENCENO
           		FROM ( SELECT FINADVANCEPAYMENTS.FINREFERENCE, MAX(FINADVANCEPAYMENTS.PAYMENTSEQ) MAXPAYMENTSEQ FROM FINADVANCEPAYMENTS
                GROUP BY FINADVANCEPAYMENTS.FINREFERENCE) T
             	JOIN FINADVANCEPAYMENTS FA_1 ON FA_1.FINREFERENCE = T.FINREFERENCE AND FA_1.PAYMENTSEQ = T.MAXPAYMENTSEQ) FA ON FA.FINREFERENCE = T2.FINREFERENCE
			]]>
		</createView>
	</changeSet>
	
		<changeSet id="ST#556.59" author="Mounika.M" dbms="mssql">
		<createView viewName="DM_DISB_DETAILS_DAILY_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T2.FINAPPROVEDDATE AGREEMENTDATE,
				    ${call.substr}(T2.FINREFERENCE, 9, ${call.collength}(T2.FINREFERENCE)) APPLID,
				    T2.FINREFERENCE AGREEMENTNO,
				    T3.DISBSEQ DISBURSEMENTNO,
				    T3.DISBDATE DISBURSEMENTDATE,
				    NULL PARENT_AGREEMENTNO,
				    T2.FINAMOUNT / RC.CCYMINORCCYUNITS AMTFIN,
				    (T2.FINAMOUNT - T2.DOWNPAYMENT + T2.FEECHARGEAMT) / RC.CCYMINORCCYUNITS NET_AMTFIN,
				    T7.DISBAMOUNT / RC.CCYMINORCCYUNITS DISBURSEDAMT,
        			CASE WHEN T2.FINASSETVALUE = T2.FINCURRASSETVALUE THEN 
            			'FULLY DISBURSED'
            		ELSE 
            			'PARTIALLY DISBURSED'
        			END DISB_STATUS,
    				T1.FIRSTREPAYDATE FIRST_DUE_DATE,
    				DATEPART(MONTH,T2.MATURITYDATE - T2.FINSTARTDATE) GROSS_TENURE,
				    T1.NOINST NET_TENURE,
				    T2.MATURITYDATE,
				    T2.LASTREPAYDATE EXPIRYDATE,
				    NULL NO_OF_ADV_INSTL,
				    NULL ADV_EMI_AMT,
				    T2.FIRSTREPAY EMI,
				    T2.FINREPAYMETHOD REPAYMENT_MODE,
				    T2.FINTYPE PRODUCTFLAG,
				    P.PROMOTIONID,
				    NULL ICICI_LOMBARD,
				    NULL BAGIC,
				    NULL BALIC_CHARGES,
				    NULL BUSINESSDATE,
				    'N' PROCESSED_FLAG,
				    NULL PROCESS_DATE,
				    NULL SEGMENTS,
				    T9.TOTALFEE / RC.CCYMINORCCYUNITS FEE,
				    NULL DEALER_SUBV,
				    NULL MANU_SUBV_DED,
				    NULL MANU_SUBV_NDED,
				    T2.BPIAMOUNT / RC.CCYMINORCCYUNITS PREEMI,
				    NULL EXISTING_LANNO,
				    NULL MORTGAGE_FEE,
				    NULL COMMITMENT_FEE,
				    T10.PROCES_FEE / RC.CCYMINORCCYUNITS PROCESSING_FEE,
				    NULL PRE_EMI_RECEIVABLE,
				    T2.FINREPAYMETHOD PAYMENTMODE,
        			CASE WHEN  ${call.substr}(T2.REPAYFRQ, 1, 1) = 'Y' THEN
							'A'
            			ELSE 
            				 ${call.substr}(T2.REPAYFRQ, 1, 1)
        			END FREQ,
				    FA.LLREFERENCENO CHEQUENUM,
				    ${call.substr}(FA.BENEFICIARYACCNO, 1, 16) CUST_ACCT_NO,
				    T5.BANKNAME,
				    T6.MICR MICRCODE,
				    NULL BUSINESS_YEAR,
				    NULL EMI_CHARGE,
				    NULL PDC_CHARGE,
				    CASE WHEN T2.EFFECTIVERATEOFRETURN > 999 THEN 
				    		999	
            			 ELSE 
            			 	T2.EFFECTIVERATEOFRETURN
        			END IRR_PER,
				    T9.TOTALFEE / RC.CCYMINORCCYUNITS FEE_WL,
				    NULL ELC_CHARGE,
				    NULL CREDIT_VIDYA_FEES,
				    NULL BATCH_ID
				FROM FINANCEMAIN T2
				JOIN FINPFTDETAILS T1 ON T1.FINID = T2.FINID
				JOIN FINDISBURSEMENTDETAILS T3 ON T3.FINID = T2.FINID
				JOIN RMTFINANCETYPES T4 ON T4.FINTYPE = T2.FINTYPE
				LEFT JOIN BANKBRANCHES T6 ON T6.BRANCHCODE = T2.FINBRANCH
     			LEFT JOIN BMTBANKDETAIL T5 ON T5.BANKCODE = T6.BANKCODE
     			LEFT JOIN PROMOTIONS P ON P.PROMOTIONCODE = T2.PROMOTIONCODE
     			JOIN RMTCURRENCIES RC ON RC.CCYCODE = T2.FINCCY
     			LEFT JOIN ( SELECT FINDISBURSEMENTDETAILS.FINID, SUM(FINDISBURSEMENTDETAILS.DISBAMOUNT) DISBAMOUNT FROM FINDISBURSEMENTDETAILS
          					WHERE FINDISBURSEMENTDETAILS.DISBDATE <= (( SELECT SMTPARAMETERS.SYSPARMVALUE SYSPARMVALUE FROM SMTPARAMETERS
                  			WHERE SMTPARAMETERS.SYSPARMCODE ='APP_DATE')) GROUP BY FINDISBURSEMENTDETAILS.FINID) T7 ON T7.FINID = T2.FINID
     			LEFT JOIN ( SELECT FINEXCESSAMOUNT.FINID, SUM(FINEXCESSAMOUNT.BALANCEAMT) BALANCEAMT FROM FINEXCESSAMOUNT
          					WHERE FINEXCESSAMOUNT.AMOUNTTYPE = 'A' GROUP BY FINEXCESSAMOUNT.FINID) T8 ON T8.FINID = T2.FINID
     			LEFT JOIN ( SELECT FINFEEDETAIL.FINID, SUM(FINFEEDETAIL.ACTUALAMOUNT - FINFEEDETAIL.WAIVEDAMOUNT) TOTALFEE FROM FINFEEDETAIL GROUP BY FINFEEDETAIL.FINID) T9 ON T9.FINID = T2.FINID
     			LEFT JOIN ( SELECT F.FINID, SUM(F.ACTUALAMOUNT - F.WAIVEDAMOUNT) PROCES_FEE FROM FINFEEDETAIL F
             	JOIN FEETYPES FT ON F.FEETYPEID = FT.FEETYPEID WHERE FT.FEETYPECODE = 'PROCFEE'
          		GROUP BY F.FINID) T10 ON T10.FINID = T2.FINID
     			LEFT JOIN ( SELECT FA_1.FINREFERENCE, FA_1.BENEFICIARYACCNO, FA_1.LLREFERENCENO
           		FROM ( SELECT FINADVANCEPAYMENTS.FINREFERENCE, MAX(FINADVANCEPAYMENTS.PAYMENTSEQ) MAXPAYMENTSEQ FROM FINADVANCEPAYMENTS
                GROUP BY FINADVANCEPAYMENTS.FINREFERENCE) T
             	JOIN FINADVANCEPAYMENTS FA_1 ON FA_1.FINREFERENCE = T.FINREFERENCE AND FA_1.PAYMENTSEQ = T.MAXPAYMENTSEQ) FA ON FA.FINREFERENCE = T2.FINREFERENCE
			]]>
		</createView>
	</changeSet>
		
	<changeSet id="ST#556.59_post" author="Mounika.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'dm_disb_details_daily_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#556.62_pre" author="Mounika.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'investment_deal_tview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#556.62" author="Mounika.M">
		<createView viewName="INVESTMENT_DEAL_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINID,
					T1.FINREFERENCE,
				    T1.INVESTMENTREF,
				    T1.FINTYPE,
				    T3.FINTYPEDESC LOVDESCFINTYPENAME,
				    T1.FINCCY,
				    T1.FINAMOUNT,
				    T1.TOTALPROFIT,
				    T1.TOTALREPAYAMT,
				    T1.FINSTARTDATE,
				    T1.MATURITYDATE,
				    T1.LASTREPAYDATE,
				    T1.LASTREPAYPFTDATE,
				    T1.LASTREPAYRVWDATE,
				    T1.LASTREPAYCPZDATE,
				    T1.RECORDSTATUS,
				    T1.RECORDTYPE,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.WORKFLOWID,
				    T2.CUSTID,
				    T2.CUSTCIF LOVDESCCUSTCIF,
				    T2.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
				    T3.FINCATEGORY LOVDESCPRODUCTCODENAME,
				    T1.REPAYPROFITRATE,
				    T1.FINBRANCH,
				    T7.BRANCHDESC LOVDESCFINBRANCHNAME,
				    T1.SCHEDULEMETHOD,
				    T10.SCHDMETHODDESC LOVDESCSCHEDULEMETHODNAME,
				    T1.PROFITDAYSBASIS,
				    T9.INTRATEBASISCODE LOVDESCPROFITDAYSBASISNAME
				FROM FINANCEMAIN_TEMP T1
				JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
				JOIN RMTFINANCETYPES T3 ON T3.FINTYPE = T1.FINTYPE
				JOIN INVESTMENTFINHEADER_VIEW T6 ON T6.INVESTMENTREF = T1.INVESTMENTREF
				JOIN RMTBRANCHES T7 ON T7.BRANCHCODE = T1.FINBRANCH
				JOIN BMTINTRATEBASISCODES T9 ON T9.INTRATEBASISCODE = T1.PROFITDAYSBASIS
				JOIN BMTSCHDMETHOD T10 ON T1.SCHEDULEMETHOD = T10.SCHDMETHOD
			]]>
		</createView>
	</changeSet>
	
	<changeSet id="ST#556.62_post" author="Mounika.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'investment_deal_tview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#556.63_pre" author="Mounika.M" dbms="postgresql">
		<sql> 
		<![CDATA[ 
			select deps_save_and_drop_dependencies ('plf', 'collateralassignment_tview'); 
		]]>
		</sql>
	</changeSet>

	<changeSet id="ST#556.63" author="Mounika.M">
		<createView viewName="COLLATERALASSIGNMENT_TVIEW" replaceIfExists="true">
			<![CDATA[
					SELECT CA.MODULE,
						CA.REFERENCE,
						CA.COLLATERALREF,
						CA.ASSIGNPERC,
						CS.COLLATERALCCY,
						CA.ACTIVE,
						CA.HOSTREFERENCE,
						CS.COLLATERALVALUE,
						CS.BANKVALUATION,
						T.TOTASSIGNPERC - CA.ASSIGNPERC TOTASSIGNPERC,
						FM.FINCURRASSETVALUE - FM.DOWNPAYMENT + FM.FEECHARGEAMT - FM.FINREPAYMENTAMOUNT UTILIZEDAMOUNT,
						CA.VERSION,
						CA.LASTMNTBY,
						CA.LASTMNTON,
						CA.RECORDSTATUS,
						CA.ROLECODE,
						CA.NEXTROLECODE,
						CA.TASKID,
						CA.NEXTTASKID,
						CA.RECORDTYPE,
						CA.WORKFLOWID,
						CS.SPECIALLTV,
						CS.BANKLTV,
						CU.CUSTCIF AS DEPOSITORCIF,
						CS.COLLATERALTYPE
						FROM COLLATERALASSIGNMENT_TEMP CA
						JOIN COLLATERALSETUP CS ON CA.COLLATERALREF = CS.COLLATERALREF
						JOIN CUSTOMERS CU ON CU.CUSTID = CS.DEPOSITORID
						LEFT JOIN (SELECT T1.COLLATERALREF, SUM(T1.ASSIGNPERC) TOTASSIGNPERC FROM 
							(SELECT CAT.REFERENCE, CAT.COLLATERALREF, CAT.ASSIGNPERC FROM COLLATERALASSIGNMENT_TEMP CAT
							 UNION
							 SELECT CA_1.REFERENCE, CA_1.COLLATERALREF, CA_1.ASSIGNPERC FROM COLLATERALASSIGNMENT CA_1
							 WHERE NOT EXISTS (SELECT 1 FROM COLLATERALASSIGNMENT_TEMP
								WHERE COLLATERALASSIGNMENT_TEMP.COLLATERALREF = CA_1.COLLATERALREF AND COLLATERALASSIGNMENT_TEMP.MODULE = CA_1.MODULE 
									AND COLLATERALASSIGNMENT_TEMP.REFERENCE = CA_1.REFERENCE)) T1 GROUP BY T1.COLLATERALREF) T ON T.COLLATERALREF = CA.COLLATERALREF
						LEFT JOIN FINANCEMAIN_TEMP FM ON CA.REFERENCE = FM.FINREFERENCE
					]]>
		</createView>
	</changeSet>

	<changeSet id="ST#556.63_post" author="Mounika.M" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_restore_dependencies ('plf', 'collateralassignment_tview');	
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#556.64_pre" author="Mounika.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financeenquiry_hierarchy_tview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#556.64" author="Mounika.M">
		<createView viewName="FINANCEENQUIRY_HIERARCHY_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINID,
					T1.FINREFERENCE,
				    T1.FINBRANCH,
				    T1.FINTYPE,
				    T1.FINCCY,
				    T1.SCHEDULEMETHOD,
				    T1.PROFITDAYSBASIS,
				    T1.FINSTARTDATE,
				    T1.CALTERMS NUMBEROFTERMS,
				    T1.CUSTID,
				    T1.FINAMOUNT,
				    T1.GRCPERIODENDDATE,
				    T1.MATURITYDATE,
				    T1.FINREPAYMENTAMOUNT,
				    T1.FINISACTIVE,
				    T1.ALLOWGRCPERIOD,
				    T1.DOWNPAYMENT,
				    T1.MIGRATEDFINANCE,
				    T1.LASTREPAYDATE,
				    T1.LASTREPAYPFTDATE,
				    T1.FINCURRASSETVALUE,
				    T1.BLACKLISTED,
				    T1.FEECHARGEAMT,
				    T1.CLOSINGSTATUS,
				    T1.GRACETERMS,
				    T1.ALWMULTIDISB,
				    T1.DEFFERMENTS,
				    T1.FINSTATUS,
				    T1.MANDATEID,
				    T1.FINREPAYMETHOD,
				    T1.FINASSETVALUE,
				    T1.FINCURRASSETVALUE + T1.TOTALCPZ + T1.FEECHARGEAMT FINANCINGAMOUNT,
				    T1.TOTALCPZ,
				    T1.FINCURRASSETVALUE + T1.TOTALCPZ - T1.FINREPAYMENTAMOUNT + T1.FEECHARGEAMT CURFINAMOUNT,
				    T2.FINTYPEDESC LOVDESCFINTYPENAME,
				    T2.FINSCHEDULEON LOVDESCFINSCHEDULEON,
				    T2.FINDIVISION LOVDESCFINDIVISION,
				    T2.FINCATEGORY LOVDESCPRODUCTCODENAME,
				    T2.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
				    T3.CUSTCIF LOVDESCCUSTCIF,
				    T3.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
				    T4.BRANCHDESC LOVDESCFINBRANCHNAME,
				    T5.CUSTTYPECTG,
				    COALESCE(T9.NOINST, 0) NOINST,
				    H.REPORTING_TO
				FROM FINANCEMAIN_TEMP T1
				JOIN USER_HIERARCHY H ON T1.BUSINESSVERTICAL = COALESCE(H.BUSINESS_VERTICAL, T1.BUSINESSVERTICAL) AND T1.FINCATEGORY = COALESCE(H.PRODUCT, T1.FINCATEGORY) AND T1.FINTYPE = COALESCE(H.FIN_TYPE, T1.FINTYPE) AND T1.FINBRANCH = COALESCE(H.BRANCH, T1.FINBRANCH)
				JOIN RMTFINANCETYPES T2 ON T1.FINTYPE = T2.FINTYPE
				JOIN CUSTOMERS T3 ON T1.CUSTID = T3.CUSTID
				JOIN RMTBRANCHES T4 ON T1.FINBRANCH = T4.BRANCHCODE
				JOIN RMTCUSTTYPES T5 ON T3.CUSTTYPECODE = T5.CUSTTYPECODE
				LEFT JOIN FINPFTDETAILS T9 ON T1.FINID = T9.FINID
			]]>
		</createView>
	</changeSet>
	
	<changeSet id="ST#556.64_post" author="Mounika.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financeenquiry_hierarchy_tview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#556.65_pre" author="Mounika.M" dbms="postgresql">
		<sql> 
			<![CDATA[ 
				select deps_save_and_drop_dependencies ('plf', 'collateralassignment_ctview'); 
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#556.65" author="Mounika.M">
		<createView viewName="COLLATERALASSIGNMENT_CTVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT CA.MODULE,
					CA.REFERENCE,
					CA.COLLATERALREF,
					CA.ASSIGNPERC,
					CS.COLLATERALCCY,
					CA.ACTIVE,
					CS.COLLATERALVALUE,
					CS.BANKVALUATION,
					T.TOTASSIGNPERC - CA.ASSIGNPERC TOTASSIGNPERC,
					FM.FINCURRASSETVALUE - FM.DOWNPAYMENT + FM.FEECHARGEAMT - FM.FINREPAYMENTAMOUNT AS UTILIZEDAMOUNT,
					CA.VERSION,
					CA.LASTMNTBY,
					CA.LASTMNTON,
					CA.RECORDSTATUS,
					CA.ROLECODE,
					CA.NEXTROLECODE,
					CA.TASKID,
					CA.NEXTTASKID,
					CA.RECORDTYPE,
					CA.WORKFLOWID,
					CS.SPECIALLTV,
					CS.BANKLTV,
					CA.HOSTREFERENCE,
					CU.CUSTCIF AS DEPOSITORCIF,
					CS.COLLATERALTYPE
				FROM COLLATERALASSIGNMENT_TEMP CA
				JOIN COLLATERALSETUP_TEMP CS ON CA.COLLATERALREF= CS.COLLATERALREF
				JOIN CUSTOMERS CU ON CU.CUSTID = CS.DEPOSITORID
				LEFT JOIN (SELECT T1.COLLATERALREF, SUM(T1.ASSIGNPERC) TOTASSIGNPERC FROM 
					(SELECT CAT.REFERENCE, CAT.COLLATERALREF, CAT.ASSIGNPERC FROM COLLATERALASSIGNMENT_TEMP CAT
					UNION
					SELECT CA_1.REFERENCE, CA_1.COLLATERALREF, CA_1.ASSIGNPERC FROM COLLATERALASSIGNMENT CA_1
					WHERE NOT EXISTS (SELECT 1 FROM COLLATERALASSIGNMENT_TEMP
						WHERE COLLATERALASSIGNMENT_TEMP.COLLATERALREF = CA_1.COLLATERALREF AND COLLATERALASSIGNMENT_TEMP.MODULE = CA_1.MODULE 
							AND COLLATERALASSIGNMENT_TEMP.REFERENCE = CA_1.REFERENCE)) T1 GROUP BY T1.COLLATERALREF) T ON T.COLLATERALREF = CA.COLLATERALREF
				LEFT JOIN FINANCEMAIN_TEMP FM ON CA.REFERENCE = FM.FINREFERENCE
				]]>
		</createView>
	</changeSet>

	<changeSet id="ST#556.65_post" author="Mounika.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'collateralassignment_ctview');	
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#556.66_pre" author="Gopal" dbms="postgresql">
		<sql> 
			<![CDATA[ 
				select deps_save_and_drop_dependencies ('plf', 'rpt_emrassetagingoddtl_view'); 
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#556.66" author="Gopal">
		<createView viewName="rpt_emrassetagingoddtl_view" replaceIfExists="true">
			<![CDATA[	 
			SELECT 
				sum(${add.schema}udf_convertcurrency(t1.fincurodpri, (t2.finccy), 'INR')) AS unpaidtotalamt,
				'DUE 0 to 7D' AS clmn,
				'P' AS flag
			FROM ((finoddetails t1
				JOIN finpftdetails t2 ON (((t1.finreference) = (t2.finreference)))))
			WHERE (((t2.closingstatus <> ('C')) OR (t2.closingstatus IS NULL)) AND (t2.finisactive = 1) AND (t2.pftinsusp = 1) AND (t1.fincurodamt <> (0)) AND ((- t1.fincuroddays) >= '-7') AND ((- t1.fincuroddays) <= 0))
			
			UNION ALL
			SELECT 
				
				sum(${add.schema}udf_convertcurrency(t1.fincurodpri, (t2.finccy), 'INR')) AS unpaidtotalamt,
				'DUE 7D to 1M' AS clmn,
				'P' AS flag
			FROM ((finoddetails t1
				JOIN finpftdetails t2 ON (((t1.finreference) = (t2.finreference))))
				)
			WHERE (((t2.closingstatus <> ('C')) OR (t2.closingstatus IS NULL)) AND (t2.finisactive = 1) AND (t2.pftinsusp = 1) AND (t1.fincurodamt <> (0)) AND ((- t1.fincuroddays) >= '-30') AND ((- t1.fincuroddays) < '-7'))
			
			UNION ALL
			SELECT 
				
				sum(${add.schema}udf_convertcurrency(t1.fincurodpri, (t2.finccy), 'INR')) AS unpaidtotalamt,
				'DUE 1M to 3M' AS clmn,
				'P' AS flag
			FROM ((finoddetails t1
				JOIN finpftdetails t2 ON (((t1.finreference) = (t2.finreference)))))
			WHERE (((t2.closingstatus <> ('C')) OR (t2.closingstatus IS NULL)) AND (t2.finisactive = 1) AND (t2.pftinsusp = 1) AND (t1.fincurodamt <> (0)) AND ((- t1.fincuroddays) >= '-90') AND ((- t1.fincuroddays) < '-30'))
			
			UNION ALL
			SELECT 
				
				sum(${add.schema}udf_convertcurrency(t1.fincurodpri, (t2.finccy), 'INR')) AS unpaidtotalamt,
				'DUE 3M to 6M' AS clmn,
				'P' AS flag
			FROM ((finoddetails t1
				JOIN finpftdetails t2 ON (((t1.finreference) = (t2.finreference))))
				)
			WHERE (((t2.closingstatus <> ('C')) OR (t2.closingstatus IS NULL)) AND (t2.finisactive = 1) AND (t2.pftinsusp = 1) AND (t1.fincurodamt <> (0)) AND ((- t1.fincuroddays) >= '-180') AND ((- t1.fincuroddays) < '-90'))
			
			UNION ALL
			SELECT 
				
				sum(${add.schema}udf_convertcurrency(t1.fincurodpri, (t2.finccy), 'INR')) AS unpaidtotalamt,
				'DUE 6M to 1Y' AS clmn,
				'P' AS flag
			FROM ((finoddetails t1
				JOIN finpftdetails t2 ON (((t1.finreference) = (t2.finreference))))
				)
			WHERE (((t2.closingstatus <> ('C')) OR (t2.closingstatus IS NULL)) AND (t2.finisactive = 1) AND (t2.pftinsusp = 1) AND (t1.fincurodamt <> (0)) AND ((- t1.fincuroddays) >= '-365') AND ((- t1.fincuroddays) < '-180'))
			
			UNION ALL
			SELECT 
				
				sum(${add.schema}udf_convertcurrency(t1.fincurodpri, (t2.finccy), 'INR')) AS unpaidtotalamt,
				'DUE 1Y to 3Y' AS clmn,
				'P' AS flag
			FROM ((finoddetails t1
				JOIN finpftdetails t2 ON (((t1.finreference) = (t2.finreference))))
				)
			WHERE (((t2.closingstatus <> ('C')) OR (t2.closingstatus IS NULL)) AND (t2.finisactive = 1) AND (t2.pftinsusp = 1) AND (t1.fincurodamt <> (0)) AND ((- t1.fincuroddays) >= '-1095') AND ((- t1.fincuroddays) < '-365'))
			
			UNION ALL
			SELECT 
				
				sum(${add.schema}udf_convertcurrency(t1.fincurodpri, (t2.finccy), 'INR')) AS unpaidtotalamt,
				'DUE 3Y to 5Y' AS clmn,
				'P' AS flag
			FROM ((finoddetails t1
				JOIN finpftdetails t2 ON (((t1.finreference) = (t2.finreference))))
				)
			WHERE (((t2.closingstatus <> ('C')) OR (t2.closingstatus IS NULL)) AND (t2.finisactive = 1) AND (t2.pftinsusp = 1) AND (t1.fincurodamt <> (0)) AND ((- t1.fincuroddays) >= '-1825') AND ((- t1.fincuroddays) < '-1095'))
			
			UNION ALL
			SELECT 
				
				sum(${add.schema}udf_convertcurrency(t1.fincurodpri, (t2.finccy), 'INR')) AS unpaidtotalamt,
				'DUE 5Y to 10Y' AS clmn,
				'P' AS flag
			FROM ((finoddetails t1
				JOIN finpftdetails t2 ON (((t1.finreference) = (t2.finreference))))
				)
			WHERE (((t2.closingstatus <> ('C')) OR (t2.closingstatus IS NULL)) AND (t2.finisactive = 1) AND (t2.pftinsusp = 1) AND (t1.fincurodamt <> (0)) AND ((- t1.fincuroddays) >= '-3650') AND ((- t1.fincuroddays) < '-1825'))
			
			UNION ALL
			SELECT 
				
				sum(${add.schema}udf_convertcurrency(t1.fincurodpri, (t2.finccy), 'INR')) AS unpaidtotalamt,
				'DUE 10Y to 20Y' AS clmn,
				'P' AS flag
			FROM ((finoddetails t1
				JOIN finpftdetails t2 ON (((t1.finreference) = (t2.finreference))))
				)
			WHERE (((t2.closingstatus <> ('C')) OR (t2.closingstatus IS NULL)) AND (t2.finisactive = 1) AND (t2.pftinsusp = 1) AND (t1.fincurodamt <> (0)) AND ((- t1.fincuroddays) >= '-7300') AND ((- t1.fincuroddays) < '-3650'))
			
			UNION ALL
			SELECT 
				
				sum(${add.schema}udf_convertcurrency(t1.fincurodpri, (t2.finccy), 'INR')) AS unpaidtotalamt,
				'DUE OVER 20Y' AS clmn,
				'P' AS flag
			FROM ((finoddetails t1
				JOIN finpftdetails t2 ON (((t1.finreference) = (t2.finreference))))
				)
			WHERE (((t2.closingstatus <> ('C')) OR (t2.closingstatus IS NULL)) AND (t2.finisactive = 1) AND (t2.pftinsusp = 1) AND (t1.fincurodamt <> (0)) AND ((- t1.fincuroddays) < '-7300'))
			
			UNION ALL
			SELECT 
				
				sum(${add.schema}udf_convertcurrency(t1.fincurodpri, (t2.finccy), 'INR')) AS unpaidtotalamt,
				'NOT YET PAID' AS clmn,
				'P' AS flag
			FROM ((finoddetails t1
				JOIN finpftdetails t2 ON (((t1.finreference) = (t2.finreference))))
				)
			WHERE (((t2.closingstatus <> ('C')) OR (t2.closingstatus IS NULL)) AND (t2.finisactive = 1) AND (t2.pftinsusp = 1) AND (t1.fincurodamt <> (0)) AND ((- t1.fincuroddays) > 0))
			
			UNION ALL
			SELECT 
				
				sum(${add.schema}udf_convertcurrency(t1.fincurodpft, (t2.finccy), 'INR')) AS unpaidtotalamt,
				'DUE 0 to 7D' AS clmn,
				'I' AS flag
			FROM ((finoddetails t1
				JOIN finpftdetails t2 ON (((t1.finreference) = (t2.finreference))))
				)
			WHERE (((t2.closingstatus <> ('C')) OR (t2.closingstatus IS NULL)) AND (t2.finisactive = 1) AND (t2.pftinsusp = 1) AND (t1.fincurodamt <> (0)) AND ((- t1.fincuroddays) >= '-7') AND ((- t1.fincuroddays) <= 0))
			
			UNION ALL
			SELECT 
				
				sum(${add.schema}udf_convertcurrency(t1.fincurodpft, (t2.finccy), 'INR')) AS unpaidtotalamt,
				'DUE 7D to 1M' AS clmn,
				'I' AS flag
			FROM ((finoddetails t1
				JOIN finpftdetails t2 ON (((t1.finreference) = (t2.finreference))))
				)
			WHERE (((t2.closingstatus <> ('C')) OR (t2.closingstatus IS NULL)) AND (t2.finisactive = 1) AND (t2.pftinsusp = 1) AND (t1.fincurodamt <> (0)) AND ((- t1.fincuroddays) >= '-30') AND ((- t1.fincuroddays) < '-7'))
			
			UNION ALL
			SELECT 
				
				sum(${add.schema}udf_convertcurrency(t1.fincurodpft, (t2.finccy), 'INR')) AS unpaidtotalamt,
				'DUE 1M to 3M' AS clmn,
				'I' AS flag
			FROM ((finoddetails t1
				JOIN finpftdetails t2 ON (((t1.finreference) = (t2.finreference))))
				)
			WHERE (((t2.closingstatus <> ('C')) OR (t2.closingstatus IS NULL)) AND (t2.finisactive = 1) AND (t2.pftinsusp = 1) AND (t1.fincurodamt <> (0)) AND ((- t1.fincuroddays) >= '-90') AND ((- t1.fincuroddays) < '-30'))
			
			UNION ALL
			SELECT 
				
				sum(${add.schema}udf_convertcurrency(t1.fincurodpft, (t2.finccy), 'INR')) AS unpaidtotalamt,
				'DUE 3M to 6M' AS clmn,
				'I' AS flag
			FROM ((finoddetails t1
				JOIN finpftdetails t2 ON (((t1.finreference) = (t2.finreference))))
				)
			WHERE (((t2.closingstatus <> ('C')) OR (t2.closingstatus IS NULL)) AND (t2.finisactive = 1) AND (t2.pftinsusp = 1) AND (t1.fincurodamt <> (0)) AND ((- t1.fincuroddays) >= '-180') AND ((- t1.fincuroddays) < '-90'))
			
			UNION ALL
			SELECT 
				
				sum(${add.schema}udf_convertcurrency(t1.fincurodpft, (t2.finccy), 'INR')) AS unpaidtotalamt,
				'DUE 6M to 1Y' AS clmn,
				'I' AS flag
			FROM ((finoddetails t1
				JOIN finpftdetails t2 ON (((t1.finreference) = (t2.finreference))))
				)
			WHERE (((t2.closingstatus <> ('C')) OR (t2.closingstatus IS NULL)) AND (t2.finisactive = 1) AND (t2.pftinsusp = 1) AND (t1.fincurodamt <> (0)) AND ((- t1.fincuroddays) >= '-365') AND ((- t1.fincuroddays) < '-180'))
			
			UNION ALL
			SELECT 
				
				sum(${add.schema}udf_convertcurrency(t1.fincurodpft, (t2.finccy), 'INR')) AS unpaidtotalamt,
				'DUE 1Y to 3Y' AS clmn,
				'I' AS flag
			FROM ((finoddetails t1
				JOIN finpftdetails t2 ON (((t1.finreference) = (t2.finreference))))
				)
			WHERE (((t2.closingstatus <> ('C')) OR (t2.closingstatus IS NULL)) AND (t2.finisactive = 1) AND (t2.pftinsusp = 1) AND (t1.fincurodamt <> (0)) AND ((- t1.fincuroddays) >= '-1095') AND ((- t1.fincuroddays) < '-365'))
			
			UNION ALL
			SELECT 
				
				sum(${add.schema}udf_convertcurrency(t1.fincurodpft, (t2.finccy), 'INR')) AS unpaidtotalamt,
				'DUE 3Y to 5Y' AS clmn,
				'I' AS flag
			FROM ((finoddetails t1
				JOIN finpftdetails t2 ON (((t1.finreference) = (t2.finreference))))
				)
			WHERE (((t2.closingstatus <> ('C')) OR (t2.closingstatus IS NULL)) AND (t2.finisactive = 1) AND (t2.pftinsusp = 1) AND (t1.fincurodamt <> (0)) AND ((- t1.fincuroddays) >= '-1825') AND ((- t1.fincuroddays) < '-1095'))
			
			UNION ALL
			SELECT 
				
				sum(${add.schema}udf_convertcurrency(t1.fincurodpft, (t2.finccy), 'INR')) AS unpaidtotalamt,
				'DUE 5Y to 10Y' AS clmn,
				'I' AS flag
			FROM ((finoddetails t1
				JOIN finpftdetails t2 ON (((t1.finreference) = (t2.finreference))))
				)
			WHERE (((t2.closingstatus <> ('C')) OR (t2.closingstatus IS NULL)) AND (t2.finisactive = 1) AND (t2.pftinsusp = 1) AND (t1.fincurodamt <> (0)) AND ((- t1.fincuroddays) >= '-3650') AND ((- t1.fincuroddays) < '-1825'))
			
			UNION ALL
			SELECT 
				
				sum(${add.schema}udf_convertcurrency(t1.fincurodpft, (t2.finccy), 'INR')) AS unpaidtotalamt,
				'DUE 10Y to 20Y' AS clmn,
				'I' AS flag
			FROM ((finoddetails t1
				JOIN finpftdetails t2 ON (((t1.finreference) = (t2.finreference))))
				)
			WHERE (((t2.closingstatus <> ('C')) OR (t2.closingstatus IS NULL)) AND (t2.finisactive = 1) AND (t2.pftinsusp = 1) AND (t1.fincurodamt <> (0)) AND ((- t1.fincuroddays) >= '-7300') AND ((- t1.fincuroddays) < '-3650'))
			
			UNION ALL
			SELECT 
				
				sum(${add.schema}udf_convertcurrency(t1.fincurodpft, (t2.finccy), 'INR')) AS unpaidtotalamt,
				'DUE OVER 20Y' AS clmn,
				'I' AS flag
			FROM ((finoddetails t1
				JOIN finpftdetails t2 ON (((t1.finreference) = (t2.finreference))))
				)
			WHERE (((t2.closingstatus <> ('C')) OR (t2.closingstatus IS NULL)) AND (t2.finisactive = 1) AND (t2.pftinsusp = 1) AND (t1.fincurodamt <> (0)) AND ((- t1.fincuroddays) < '-7300'))
			
			UNION ALL
			SELECT 
				
				sum(${add.schema}udf_convertcurrency(t1.fincurodpft, (t2.finccy), 'INR')) AS unpaidtotalamt,
				'NOT YET PAID' AS clmn,
				'I' AS flag
			FROM ((finoddetails t1
				JOIN finpftdetails t2 ON (((t1.finreference) = (t2.finreference))))
				)
			WHERE (((t2.closingstatus <> ('C')) OR (t2.closingstatus IS NULL)) AND (t2.finisactive = 1) AND (t2.pftinsusp = 1) AND (t1.fincurodamt <> (0)) AND ((- t1.fincuroddays) > 0))
		]]>
		</createView>
	</changeSet>
	
	<changeSet id="ST#556.66_post" author="Mounika.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rpt_emrassetagingoddtl_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#556.67_pre" author="Mounika.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rolledoverfinancedetail_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#556.67" author="Mounika.M">
		<createView viewName="ROLLEDOVERFINANCEDETAIL_VIEW" replaceIfExists="true">
		<![CDATA[
			SELECT r.newfinreference,
				r.finreference,
				r.rolloveramount,
				r.custpayment,
				p.totalpftbal,
				p.totalpribal,
				f.finstartdate AS startdate,
				f.finamount,
				f.effectiverateofreturn AS profitrate,
				f.totalprofit
			FROM ((rolledoverfinancedetail_temp r
				JOIN financemain f ON (((r.finreference) = (f.finreference))))
				JOIN finpftdetails p ON (((f.finreference) = (p.finreference))))
			UNION ALL
			SELECT r.newfinreference,
				r.finreference,
				r.rolloveramount,
				r.custpayment,
				p.totalpftbal,
				p.totalpribal,
				f.finstartdate AS startdate,
				f.finamount,
				f.effectiverateofreturn AS profitrate,
				f.totalprofit
			FROM ((rolledoverfinancedetail r
				JOIN financemain f ON (((r.finreference) = (f.finreference))))
				JOIN finpftdetails p ON (((f.finreference) = (p.finreference))))
			WHERE (NOT (EXISTS ( SELECT 1
					FROM rolledoverfinancedetail_temp
					WHERE (((rolledoverfinancedetail_temp.finreference) = (r.finreference)) AND ((rolledoverfinancedetail_temp.newfinreference) = (r.newfinreference))))))
		]]>
		</createView>
	</changeSet>
	
	<changeSet id="ST#556.67_post" author="Mounika.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rolledoverfinancedetail_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#556.66_pre" author="Saikiran.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'adviseuploads_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#556.66" author="Saikiran.n">
		<createView viewName="ADVISEUPLOADS_VIEW" replaceIfExists="true">
			<![CDATA[
				 SELECT T1.ADVISEID,
					T1.UPLOADID,
					T1.FINREFERENCE,
					T1.ADVISETYPE,
					T1.FEETYPECODE,
					T1.VALUEDATE,
					T1.ADVISEAMOUNT,
					T1.REMARKS,
					T1.STATUS,
					T1.REASON,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FEETYPEID,
					T1.REJECTSTAGE,
					T1.FINID
				FROM ADVISEUPLOADS_TEMP T1
				LEFT JOIN FEETYPES T2 ON T2.FEETYPECODE = T1.FEETYPECODE
				UNION ALL
				SELECT T1.ADVISEID,
					T1.UPLOADID,
					T1.FINREFERENCE,
					T1.ADVISETYPE,
					T1.FEETYPECODE,
					T1.VALUEDATE,
					T1.ADVISEAMOUNT,
					T1.REMARKS,
					T1.STATUS,
					T1.REASON,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FEETYPEID,
					T1.REJECTSTAGE,
					T1.FINID
				FROM ADVISEUPLOADS T1
				LEFT JOIN FEETYPES T2 ON T2.FEETYPECODE = T1.FEETYPECODE
				WHERE NOT (EXISTS ( SELECT 1
				FROM ADVISEUPLOADS_TEMP
				WHERE ADVISEUPLOADS_TEMP.FINREFERENCE = T1.FINREFERENCE))
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#556.66_post" author="Saikiran.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'adviseuploads_view');	
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#556.67_pre" author="vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finodpenalty_latest_rates_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#556.67" author="vijaya.a">
		<createView viewName="FINODPENALTY_LATEST_RATES_VIEW" replaceIfExists="true">
			<![CDATA[			
				SELECT FM.FINID, 
					FM.FINREFERENCE,
				    ODPR.FINEFFECTDATE,
				    ODPR.APPLYODPENALTY,
				    ODPR.ODINCGRCDAYS,
				   	ODPR.ODCHARGETYPE,
				    ODPR.ODGRACEDAYS,
				    ODPR.ODCHARGECALON,
				    ODPR.ODCHARGEAMTORPERC,
				    ODPR.ODALLOWWAIVER,
				    ODPR.ODMAXWAIVERPERC,
				    ODPR.ODRULECODE
				FROM FINODPENALTYRATES ODPR 
				INNER JOIN FINANCEMAIN FM ON FM.FINID = ODPR.FINID
				WHERE ODPR.FINEFFECTDATE = (( SELECT MAX(FINODPENALTYRATES.FINEFFECTDATE) EXPR1
					FROM FINODPENALTYRATES WHERE FINODPENALTYRATES.FINID = ODPR.FINID))
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#556.67_post" author="vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finodpenalty_latest_rates_view');
			]]>
		</sql>
	</changeSet>	
	
	<changeSet id="ST#556.68_pre" author="vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finoddetails_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#556.68" author="vijaya.a">
		<createView viewName="FINODDETAILS_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FM.FINID,
					FM.FINREFERENCE,
					OD.FINODSCHDDATE,
					OD.FINODFOR,
					OD.FINBRANCH,
					OD.FINTYPE,
					OD.CUSTID,
					OD.FINODTILLDATE,
					OD.FINCURODAMT,
					OD.FINCURODPRI,
					OD.FINCURODPFT,
					OD.FINMAXODAMT,
					OD.FINMAXODPRI,
					OD.FINMAXODPFT,
					OD.GRACEDAYS,
					OD.INCGRACEDAYS,
					OD.FINCURODDAYS,
					OD.TOTPENALTYAMT,
					OD.TOTWAIVED,
					OD.TOTPENALTYPAID,
					OD.LPIAMT,
					OD.LPIPAID,
					OD.LPIBAL,
					OD.TOTPENALTYBAL,
					OD.FINLMDFDATE,
					COALESCE(PR.APPLYODPENALTY, 0)  APPLYODPENALTY,
					COALESCE(PR.ODINCGRCDAYS, 0)  ODINCGRCDAYS,
					COALESCE(PR.ODCHARGETYPE, '')  ODCHARGETYPE,
					COALESCE(PR.ODGRACEDAYS, 0)  ODGRACEDAYS,
					COALESCE(PR.ODCHARGECALON, '')  ODCHARGECALON,
					COALESCE(PR.ODCHARGEAMTORPERC, 0)  ODCHARGEAMTORPERC,
					COALESCE(PR.ODALLOWWAIVER, 0)  ODALLOWWAIVER,
					COALESCE(PR.ODMAXWAIVERPERC, 0)  ODMAXWAIVERPERC,
					COALESCE(PR.ODRULECODE, '')  ODRULECODE,
					OD.LOCKODRECALCAL,
					OD.LPPTDSPAID,
					OD.LPCPZ,
					OD.LPCPZAMOUNT,
					OD.LPCURCPZBAL
				FROM FINODDETAILS OD
				INNER JOIN FINANCEMAIN FM ON FM.FINID = OD.FINID
				LEFT JOIN FINODPENALTY_LATEST_RATES_VIEW PR ON FM.FINID = PR.FINID
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#556.68_post" author="vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finoddetails_view');
			]]>
		</sql>
	</changeSet>
	
</databaseChangeLog>