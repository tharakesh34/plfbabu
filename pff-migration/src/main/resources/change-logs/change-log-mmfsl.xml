<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

	<property name="add.schema" value="dbo." dbms="mssql" />
	<property name="add.schema" value="" dbms="oracle" />
	<property name="add.schema" value="" dbms="postgresql" />
	<property name="call.substr" value="substring" dbms="mssql" />
	<property name="call.substr" value="substr" dbms="oracle" />
	<property name="call.substr" value="substring" dbms="postgresql" />
	<property name="call.auditdb" value="PLFAVANSEQC.." dbms="mssql" />
	<property name="call.auditdb" value=" " dbms="oracle" />
	<property name="call.concatenate" value="+" dbms="mssql" />
	<property name="call.concatenate" value="||" dbms="oracle" />
	<property name="call.concatenate" value="||" dbms="postgresql" />
	<property name="call.collength" value="LEN" dbms="mssql" />
	<property name="call.collength" value="LENGTH" dbms="oracle" />
	<property name="call.collength" value="LENGTH" dbms="postgresql" />
	<property name="call.date" value="getdate()" dbms="mssql" />
	<property name="call.date" value="sysdate" dbms="oracle" />
	<property name="call.date" value="now()" dbms="postgresql" />

	<changeSet id="pre_run_for_pgp" author="Adarsh" runAlways="true"
		dbms="postgresql">
		<sql>
			Set search_path = plf,public,pg_catalog;
		</sql>
	</changeSet>

	<changeSet id="1" author="vijaya.a" dbms="postgresql, oracle">
		<createSequence sequenceName="SEQCD_MANUFACTURERS" />
	</changeSet>

	<changeSet id="1.1" author="vijaya.a" dbms="mssql">
		<createTable tableName="SEQCD_MANUFACTURERS">
			<column name="SeqNo" type="bigint" autoIncrement="true" />
			<column name="Value" type="int"></column>
		</createTable>
	</changeSet>

	<changeSet id="1.2" author="vijaya.a">
		<createTable tableName="CD_Manufacturers">
			<column name="ManufacturerId" type="int">
				<constraints nullable="false" primaryKey="true"
					primaryKeyName="PK_CD_MANUFACTURER_ID" />
			</column>
			<column name="Name" type="varchar(100)">
			</column>
			<column name="Description" type="varchar(100)">
			</column>
			<column name="Channel" type="varchar(20)">
			</column>
			<column name="Active" type="boolean">
			</column>
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkflowId" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet id="1.3" author="vijaya.a">
		<createTable tableName="CD_Manufacturers_Temp">
			<column name="ManufacturerId" type="int">
				<constraints nullable="false" primaryKey="true"
					primaryKeyName="PK_CD_MANUFACTURER_TEMP_ID" />
			</column>
			<column name="Name" type="varchar(100)">
			</column>
			<column name="Description" type="varchar(100)">
			</column>
			<column name="Channel" type="varchar(20)">
			</column>
			<column name="Active" type="boolean">
			</column>
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkflowId" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet id="1.4" author="vijaya.a">
		<createView viewName="CD_Manufacturers_VIEW"
			replaceIfExists="true">
			  SELECT t1.manufacturerId,
    			t1.name,
   				t1.description,
    			t1.channel,
          		t1.active,
    			t1.version,
    			t1.lastmntby,
    			t1.lastmnton,
    			t1.recordstatus,
   				t1.rolecode,
    			t1.nextrolecode,
    			t1.taskid,
    			t1.nexttaskid,
    			t1.recordtype,
    			t1.workflowid
   			FROM CD_Manufacturers_Temp t1
			UNION ALL
 			SELECT t1.manufacturerId,
    			t1.name,
   				t1.description,
    			t1.channel,
         		t1.active,
    			t1.version,
    			t1.lastmntby,
    			t1.lastmnton,
    			t1.recordstatus,
   				t1.rolecode,
    			t1.nextrolecode,
    			t1.taskid,
    			t1.nexttaskid,
    			t1.recordtype,
    			t1.workflowid
   				FROM CD_Manufacturers t1
  			WHERE NOT (EXISTS ( SELECT 1
            FROM CD_Manufacturers_Temp
            WHERE CD_Manufacturers_Temp.manufacturerId = t1.manufacturerId))
		</createView>
	</changeSet>

	<changeSet id="1.5" author="vijaya.a">
		<createView viewName="CD_Manufacturers_AVIEW"
			replaceIfExists="true">
			  SELECT t1.manufacturerId,
    			t1.name,
   				t1.description,
    			t1.channel,     
    			t1.active,
    			t1.version,
    			t1.lastmntby,
    			t1.lastmnton,
    			t1.recordstatus,
   				t1.rolecode,
    			t1.nextrolecode,
    			t1.taskid,
    			t1.nexttaskid,
    			t1.recordtype,
    			t1.workflowid
   			  FROM CD_Manufacturers t1
		</createView>
	</changeSet>

	<changeSet id="1.6" author="vijaya.a">
		<createView viewName="CD_Manufacturers_TVIEW"
			replaceIfExists="true">
			  SELECT t1.manufacturerId,
    			t1.name,
   				t1.description,
    			t1.channel,     
    			t1.active,
    			t1.version,
    			t1.lastmntby,
    			t1.lastmnton,
    			t1.recordstatus,
   				t1.rolecode,
    			t1.nextrolecode,
    			t1.taskid,
    			t1.nexttaskid,
    			t1.recordtype,
    			t1.workflowid
   			  FROM CD_Manufacturers_Temp t1
		</createView>
	</changeSet>

	<changeSet id="2" author="vijaya.a" dbms="postgresql, oracle">
		<createSequence sequenceName="SEQCD_PRODUCTS" />
	</changeSet>

	<changeSet id="2.1" author="vijaya.a" dbms="mssql">
		<createTable tableName="SEQCD_PRODUCTS">
			<column name="SeqNo" type="bigint" autoIncrement="true" />
			<column name="Value" type="int"></column>
		</createTable>
	</changeSet>

	<changeSet id="2.2" author="vijaya.a">
		<createTable tableName="CD_Products">
			<column name="ProductId" type="int">
				<constraints nullable="false" primaryKey="true"
					primaryKeyName="PK_CD_PRODUCT_ID" />
			</column>
			<column name="ModelId" type="varchar(8)">
			</column>
			<column name="ModelDescription" type="varchar(20)">
			</column>
			<column name="ManufacturerId" type="varchar(50)">
			</column>
			<column name="AssetDescription" type="Varchar(20)">
			</column>
			<column name="MinAmount" type="decimal(18,0)">
			</column>
			<column name="MaxAmount" type="decimal(18,0)">
			</column>
			<column name="ModelStatus" type="Varchar(20)">
			</column>
			<column name="Channel" type="Varchar(20)">
			</column>
			<column name="Active" type="boolean">
			</column>
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkflowId" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet id="2.3" author="vijaya.a">
		<createTable tableName="CD_Products_Temp">
			<column name="ProductId" type="int">
				<constraints nullable="false" primaryKey="true"
					primaryKeyName="PK_CD_PRODUCT_Temp_ID" />
			</column>
			<column name="ModelId" type="varchar(8)">
			</column>
			<column name="ModelDescription" type="varchar(20)">
			</column>
			<column name="ManufacturerId" type="varchar(50)">
			</column>
			<column name="AssetDescription" type="Varchar(20)">
			</column>
			<column name="MinAmount" type="decimal(18,0)">
			</column>
			<column name="MaxAmount" type="decimal(18,0)">
			</column>
			<column name="ModelStatus" type="Varchar(20)">
			</column>
			<column name="Channel" type="Varchar(20)">
			</column>
			<column name="Active" type="boolean">
			</column>
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkflowId" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet id="2.5" author="vijaya.a">
		<createView viewName="CD_Products_VIEW" replaceIfExists="true">
			  SELECT t1.productId,
    			t1.modelId,
   				t1.modelDescription,
    			t1.manufacturerId,     
    			t1.assetDescription,
    			t1.minAmount,
    			t1.maxAmount,
    			t1.modelStatus,
    			t1.channel,
    			t1.active,
    			t1.version,
    			t1.lastmntby,
    			t1.lastmnton,
    			t1.recordstatus,
   				t1.rolecode,
    			t1.nextrolecode,
    			t1.taskid,
    			t1.nexttaskid,
    			t1.recordtype,
    			t1.workflowid
   			FROM CD_Products_Temp t1
			UNION ALL
 			SELECT t1.productId,
    			t1.modelId,
   				t1.modelDescription,
    			t1.manufacturerId,     
    			t1.assetDescription,
    			t1.minAmount,
    			t1.maxAmount,
    			t1.modelStatus,
    			t1.channel,
    			t1.active,
    			t1.version,
    			t1.lastmntby,
    			t1.lastmnton,
    			t1.recordstatus,
   				t1.rolecode,
    			t1.nextrolecode,
    			t1.taskid,
    			t1.nexttaskid,
    			t1.recordtype,
    			t1.workflowid
   				FROM CD_Products t1
  			WHERE NOT (EXISTS ( SELECT 1
            FROM CD_Products_Temp
            WHERE CD_Products_Temp.productId = t1.productId))
		</createView>
	</changeSet>

	<changeSet id="2.6" author="vijaya.a">
		<createView viewName="CD_Products_AVIEW" replaceIfExists="true">
			  SELECT t1.productId,
    			t1.modelId,
   				t1.modelDescription,
    			t1.manufacturerId,     
    			t1.assetDescription,
    			t1.minAmount,
    			t1.maxAmount,
    			t1.modelStatus,
    			t1.channel,
    			t1.active,
    			t1.version,
    			t1.lastmntby,
    			t1.lastmnton,
    			t1.recordstatus,
   				t1.rolecode,
    			t1.nextrolecode,
    			t1.taskid,
    			t1.nexttaskid,
    			t1.recordtype,
    			t1.workflowid
   			  FROM CD_Products t1
		</createView>
	</changeSet>

	<changeSet id="2.7" author="vijaya.a">
		<createView viewName="CD_Products_TVIEW" replaceIfExists="true">
			  SELECT t1.productId,
    			t1.modelId,
   				t1.modelDescription,
    			t1.manufacturerId,     
    			t1.assetDescription,
    			t1.minAmount,
    			t1.maxAmount,
    			t1.modelStatus,
    			t1.channel,
    			t1.active,
    			t1.version,
    			t1.lastmntby,
    			t1.lastmnton,
    			t1.recordstatus,
   				t1.rolecode,
    			t1.nextrolecode,
    			t1.taskid,
    			t1.nexttaskid,
    			t1.recordtype,
    			t1.workflowid
   			  FROM CD_Products_Temp t1
		</createView>
	</changeSet>

	<changeSet id="3" author="vijaya.a" dbms="postgresql, oracle">
		<createSequence sequenceName="SEQCD_MERCHANTS" />
	</changeSet>

	<changeSet id="3.1" author="vijaya.a" dbms="mssql">
		<createTable tableName="SEQCD_MERCHANTS">
			<column name="SeqNo" type="bigint" autoIncrement="true" />
			<column name="Value" type="int"></column>
		</createTable>
	</changeSet>

	<changeSet id="3.2" author="vijaya.a">
		<createTable tableName="CD_Merchants">
			<column name="MerchantId" type="int">
				<constraints nullable="false" primaryKey="true"
					primaryKeyName="PK_CD_MERCHANT_ID" />
			</column>
			<column name="MerchantName" type="varchar(50)">
			</column>
			<column name="StoreId" type="int">
			</column>
			<column name="StoreName" type="varchar(50)">
			</column>
			<column name="StoreAddressLine1" type="varchar(200)">
			</column>
			<column name="StoreAddressLine2" type="varchar(100)">
			</column>
			<column name="StoreAddressLine3" type="varchar(100)">
			</column>
			<column name="StoreCity" type="varchar(50)">
			</column>
			<column name="StoreState" type="varchar(8)">
			</column>
			<column name="StoreCountry" type="varchar(50)">
			</column>
			<column name="CountryName" type="varchar(50)">
			</column>
			<column name="StateName" type="varchar(50)">
			</column>
			<column name="cityName" type="varchar(50)">
			</column>
			<column name="POSID" type="int">
			</column>
			<column name="AvgTranPerMnth" type="decimal(18,0)">
			</column>
			<column name="AvgTranAmtPerMnth" type="decimal(18,0)">
			</column>
			<column name="TranAmtPerTran" type="decimal(18,0)">
			</column>
			<column name="TranAmtPerDay" type="decimal(18,0)">
			</column>
			<column name="AllowRefund" type="boolean">
			</column>
			<column name="PeakTransPerDay" type="decimal(18,0)">
			</column>
			<column name="Channel" type="varchar(20)">
			</column>
			<column name="Active" type="bit">
			</column>
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkflowId" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet id="3.3" author="vijaya.a">
		<createTable tableName="CD_Merchants_Temp">
			<column name="MerchantId" type="int">
				<constraints nullable="false" primaryKey="true"
					primaryKeyName="PK_CD_MERCHANT_TEMP_ID" />
			</column>
			<column name="MerchantName" type="varchar(50)">
			</column>
			<column name="StoreId" type="int">
			</column>
			<column name="StoreName" type="varchar(50)">
			</column>
			<column name="StoreAddressLine1" type="varchar(200)">
			</column>
			<column name="StoreAddressLine2" type="varchar(100)">
			</column>
			<column name="StoreAddressLine3" type="varchar(100)">
			</column>
			<column name="StoreCity" type="varchar(50)">
			</column>
			<column name="StoreState" type="varchar(8)">
			</column>
			<column name="StoreCountry" type="varchar(50)">
			</column>
			<column name="CountryName" type="varchar(50)">
			</column>
			<column name="StateName" type="varchar(50)">
			</column>
			<column name="cityName" type="varchar(50)">
			</column>
			<column name="POSID" type="int">
			</column>
			<column name="AvgTranPerMnth" type="decimal(18,0)">
			</column>
			<column name="AvgTranAmtPerMnth" type="decimal(18,0)">
			</column>
			<column name="TranAmtPerTran" type="decimal(18,0)">
			</column>
			<column name="TranAmtPerDay" type="decimal(18,0)">
			</column>
			<column name="AllowRefund" type="bit">
			</column>
			<column name="PeakTransPerDay" type="decimal(18,0)">
			</column>
			<column name="Channel" type="varchar(20)">
			</column>
			<column name="Active" type="boolean">
			</column>
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkflowId" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet id="3.3_post" author="vijaya.a">
		<addUniqueConstraint tableName="CD_MERCHANTS"
			columnNames="StoreId" constraintName="UK_CD_MERCHANTS_STOREID" />
		<addUniqueConstraint tableName="CD_MERCHANTS_TEMP"
			columnNames="StoreId" constraintName="UK_CD_MERCHANTS_TEMP_STOREID" />
	</changeSet>

	<changeSet id="3.4" author="vijaya.a">
		<createView viewName="CD_Merchants_VIEW" replaceIfExists="true">
			  SELECT t1.merchantId,
    			t1.merchantName,
   				t1.storeId,
    			t1.storeName,     
    			t1.storeAddressLine1,
    			t1.storeAddressLine2,
    			t1.storeAddressLine3,
    			t1.storeCity,
    			t1.storeState,
         		t1.storeCountry,
         		t1.cityName,
          		t1.stateName,
          		t1.countryName,
    			t1.pOSID,
    			t1.avgTranPerMnth,
    			t1.avgTranAmtPerMnth,
    			t1.tranAmtPerTran,
    			t1.tranAmtPerDay,
    			t1.allowRefund,
    			t1.peakTransPerDay,
    			t1.channel,
    			t1.active,
    			t1.version,
    			t1.lastmntby,
    			t1.lastmnton,
    			t1.recordstatus,
   				t1.rolecode,
    			t1.nextrolecode,
    			t1.taskid,
    			t1.nexttaskid,
    			t1.recordtype,
    			t1.workflowid
   			FROM CD_Merchants_Temp t1
			UNION ALL
 			SELECT t1.merchantId,
    			t1.merchantName,
   				t1.storeId,
    			t1.storeName,     
    			t1.storeAddressLine1,
    			t1.storeAddressLine2,
    			t1.storeAddressLine3,
    			t1.storeCity,
    			t1.storeState,
    			t1.storeCountry,
         		t1.cityName,
          		t1.stateName,
          		t1.countryName,
    			t1.pOSID,
    			t1.avgTranPerMnth,
    			t1.avgTranAmtPerMnth,
    			t1.tranAmtPerTran,
    			t1.tranAmtPerDay,
    			t1.allowRefund,
    			t1.peakTransPerDay,
    			t1.channel,
    			t1.active,
    			t1.version,
    			t1.lastmntby,
    			t1.lastmnton,
    			t1.recordstatus,
   				t1.rolecode,
    			t1.nextrolecode,
    			t1.taskid,
    			t1.nexttaskid,
    			t1.recordtype,
    			t1.workflowid
   			FROM CD_Merchants t1
  			WHERE NOT (EXISTS ( SELECT 1
            FROM CD_Merchants_Temp
            WHERE CD_Merchants_Temp.merchantId = t1.merchantId))
		</createView>
	</changeSet>

	<changeSet id="3.5" author="vijaya.a">
		<createView viewName="CD_Merchants_AVIEW" replaceIfExists="true">
			  SELECT t1.merchantId,
    			t1.merchantName,
   				t1.storeId,
    			t1.storeName,     
    			t1.storeAddressLine1,
    			t1.storeAddressLine2,
    			t1.storeAddressLine3,
    			t1.storeCity,
    			t1.storeState,
    			t1.storeCountry,
         		t1.cityName,
          		t1.stateName,
          		t1.countryName,
    			t1.pOSID,
    			t1.avgTranPerMnth,
    			t1.avgTranAmtPerMnth,
    			t1.tranAmtPerTran,
    			t1.tranAmtPerDay,
    			t1.allowRefund,
    			t1.peakTransPerDay,
    			t1.channel,
    			t1.active,
    			t1.version,
    			t1.lastmntby,
    			t1.lastmnton,
    			t1.recordstatus,
   				t1.rolecode,
    			t1.nextrolecode,
    			t1.taskid,
    			t1.nexttaskid,
    			t1.recordtype,
    			t1.workflowid
   			FROM CD_Merchants t1
		</createView>
	</changeSet>

	<changeSet id="3.6" author="vijaya.a">
		<createView viewName="CD_Merchants_TVIEW" replaceIfExists="true">
			  SELECT t1.merchantId,
    			t1.merchantName,
   				t1.storeId,
    			t1.storeName,     
    			t1.storeAddressLine1,
    			t1.storeAddressLine2,
    			t1.storeAddressLine3,
    			t1.storeCity,
    			t1.storeState,
    			t1.storeCountry,
          		t1.cityName,
          		t1.stateName,
          		t1.countryName,
    			t1.pOSID,
    			t1.avgTranPerMnth,
    			t1.avgTranAmtPerMnth,
    			t1.tranAmtPerTran,
    			t1.tranAmtPerDay,
    			t1.allowRefund,
    			t1.peakTransPerDay,
    			t1.channel,
    			t1.active,
    			t1.version,
    			t1.lastmntby,
    			t1.lastmnton,
    			t1.recordstatus,
   				t1.rolecode,
    			t1.nextrolecode,
    			t1.taskid,
    			t1.nexttaskid,
    			t1.recordtype,
    			t1.workflowid
   			FROM CD_Merchants_Temp t1
		</createView>
	</changeSet>

	<changeSet id="4" author="vijaya.a">
		<sql>
			<![CDATA[
				UPDATE SEQSECRIGHTS SET SEQNO = (SELECT MAX(RIGHTID) FROM SECRIGHTS);
				UPDATE SEQSECGROUPS SET SEQNO = (SELECT MAX(GRPID)  FROM SECGROUPS);
				UPDATE SEQSECROLES SET SEQNO = (SELECT MAX(ROLEID)  FROM SECROLES);
				UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);
				UPDATE SEQSECROLEGROUPS SET SEQNO = (SELECT MAX(ROLEGRPID) FROM SECROLEGROUPS);
				
				INSERT INTO SecRoles  VALUES ((select max(roleid)+1 from secroles), 1, 'CD_MANUFACTURERS_VIEW', 'Role for manufacturer enquiry', NULL, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SecRoles  VALUES ((select max(roleid)+1 from secroles), 1, 'CD_MANUFACTURERS_MAKER', 'Role for manufacturer maker',	NULL, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0) ;
				INSERT INTO SecRoles  VALUES ((select max(roleid)+1 from secroles), 1, 'CD_MANUFACTURERS_APPROVER', 'Role for manufacturer approver', NULL, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0) ;
								
				INSERT INTO SecGroups Values ((Select MAX(GrpID)+1 From SecGroups), 'CD_MANUFACTURERS_VIEW', 'Group for manufacturer enquiry', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SecGroups Values ((Select MAX(GrpID)+1 From SecGroups), 'CD_MANUFACTURERS_MAKER', 'Group for manufacturer maker', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SecGroups Values ((Select MAX(GrpID)+1 From SecGroups), 'CD_MANUFACTURERS_APPROVER', 'Group for manufacturer approver', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),0, 'menuItem_CDManufacturers','MENU', 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),2, 'button_CDManufacturersList_PrintList','CDManufacturersList', 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),2, 'button_CDManufacturersList_NewManufacturer','CDManufacturersList', 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),2, 'button_CDManufacturersDialogue_btnNew','CDManufacturersDialogue', 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),2, 'button_CDManufacturersDialogue_btnEdit','CDManufacturersDialogue', 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),2, 'button_CDManufacturersDialogue_btnDelete','CDManufacturersDialogue', 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),2, 'button_CDManufacturersDialogue_btnSave','CDManufacturersDialogue', 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'CDManufacturersDialogue_Name', 'CDManufacturersDialogue', 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'CDManufacturersDialogue_Description','CDManufacturersDialogue',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'CDManufacturersDialogue_Channel','CDManufacturersDialogue',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'CDManufacturersDialogue_Active','CDManufacturersDialogue',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_MANUFACTURERS_VIEW'), (Select RightID from SecRights where RightName = 'button_CDManufacturersList_PrintList'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_MANUFACTURERS_MAKER'), (Select RightID from SecRights where RightName = 'menuItem_CDManufacturers'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_MANUFACTURERS_MAKER'), (Select RightID from SecRights where RightName = 'button_CDManufacturersList_PrintList'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_MANUFACTURERS_MAKER'), (Select RightID from SecRights where RightName = 'button_CDManufacturersList_NewManufacturer'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_MANUFACTURERS_MAKER'), (Select RightID from SecRights where RightName = 'button_CDManufacturersDialogue_btnNew'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_MANUFACTURERS_MAKER'), (Select RightID from SecRights where RightName = 'button_CDManufacturersDialogue_btnEdit'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_MANUFACTURERS_MAKER'), (Select RightID from SecRights where RightName = 'button_CDManufacturersDialogue_btnDelete'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_MANUFACTURERS_MAKER'), (Select RightID from SecRights where RightName = 'button_CDManufacturersDialogue_btnSave'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_MANUFACTURERS_MAKER'), (Select RightID from SecRights where RightName = 'CDManufacturersDialogue_Name'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_MANUFACTURERS_MAKER'), (Select RightID from SecRights where RightName = 'CDManufacturersDialogue_Description'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_MANUFACTURERS_MAKER'), (Select RightID from SecRights where RightName = 'CDManufacturersDialogue_Channel'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_MANUFACTURERS_MAKER'), (Select RightID from SecRights where RightName = 'CDManufacturersDialogue_Active'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_MANUFACTURERS_APPROVER'), (Select RightID from SecRights where RightName = 'menuItem_CDManufacturers'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_MANUFACTURERS_APPROVER'), (Select RightID from SecRights where RightName = 'button_CDManufacturersList_PrintList'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_MANUFACTURERS_APPROVER'), (Select RightID from SecRights where RightName = 'button_CDManufacturersDialogue_btnSave'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				Insert into secRoleGroups Values ((select MAX(RoleGrpID)+1 From secRoleGroups),(select GrpID from SecGroups where grpCode='CD_MANUFACTURERS_VIEW'),(select RoleID from secRoles where RoleCd='CD_MANUFACTURERS_VIEW'), 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				Insert into secRoleGroups Values ((select MAX(RoleGrpID)+1 From secRoleGroups),(select GrpID from SecGroups where grpCode='CD_MANUFACTURERS_MAKER'),(select RoleID from secRoles where RoleCd='CD_MANUFACTURERS_MAKER'), 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				Insert into secRoleGroups Values ((select MAX(RoleGrpID)+1 From secRoleGroups),(select GrpID from SecGroups where grpCode='CD_MANUFACTURERS_APPROVER'),(select RoleID from secRoles where RoleCd='CD_MANUFACTURERS_APPROVER'), 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
				UPDATE SEQSECRIGHTS SET SEQNO = (SELECT MAX(RIGHTID) FROM SECRIGHTS);
				UPDATE SEQSECGROUPS SET SEQNO = (SELECT MAX(GRPID)  FROM SECGROUPS);
				UPDATE SEQSECROLES SET SEQNO = (SELECT MAX(ROLEID)  FROM SECROLES);
				UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID)  FROM SECGROUPRIGHTS);
				UPDATE SEQSECROLEGROUPS SET SEQNO = (SELECT MAX(ROLEGRPID)  FROM SECROLEGROUPS);
			]]>
		</sql>
	</changeSet>

	<changeSet id="5" author="vijaya.a">
		<sql>
			<![CDATA[
				UPDATE SEQSECRIGHTS SET SEQNO = (SELECT MAX(RIGHTID) FROM SECRIGHTS);
				UPDATE SEQSECGROUPS SET SEQNO = (SELECT MAX(GRPID)  FROM SECGROUPS);
				UPDATE SEQSECROLES SET SEQNO = (SELECT MAX(ROLEID)  FROM SECROLES);
				UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);
				UPDATE SEQSECROLEGROUPS SET SEQNO = (SELECT MAX(ROLEGRPID) FROM SECROLEGROUPS);
				
				INSERT INTO SecRoles  VALUES ((select max(roleid)+1 from secroles), 1, 'CD_PRODUCT_VIEW', 'Role for product enquiry',	NULL, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL,NULL, 0);
				INSERT INTO SecRoles  VALUES ((select max(roleid)+1 from secroles), 1, 'CD_PRODUCT_MAKER', 'Role for product maker',	NULL, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL,NULL,NULL,NULL,NULL,0) ;
				INSERT INTO SecRoles  VALUES ((select max(roleid)+1 from secroles), 1, 'CD_PRODUCT_APPROVER', 'Role for product approver',	NULL, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL,NULL,NULL,NULL,NULL,0) ;
								
				INSERT INTO SecGroups Values ((Select MAX(GrpID)+1 From SecGroups), 'CD_PRODUCT_VIEW', 'Group for product enquiry', 	1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL,NULL, 0);
				INSERT INTO SecGroups Values ((Select MAX(GrpID)+1 From SecGroups), 'CD_PRODUCT_MAKER', 'Group for product maker', 		1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL,NULL, 0);
				INSERT INTO SecGroups Values ((Select MAX(GrpID)+1 From SecGroups), 'CD_PRODUCT_APPROVER', 'Group for product approver', 	1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL,NULL, 0);
				
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),0, 'menuItem_Product','MENU',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),2, 'button_ProductList_PrintList','ProductList',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),2, 'button_ProductList_NewProduct','ProductList',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),2, 'button_ProductDialogue_btnNew','ProductDialogue',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),2, 'button_ProductDialogue_btnEdit','ProductDialogue',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),2, 'button_ProductDialogue_btnDelete','ProductDialogue',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),2, 'button_ProductDialogue_btnSave','ProductDialogue',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'ProductDialogue_ModuleId','ProductDialogue',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'ProductDialogue_Description','ProductDialogue',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'ProductDialogue_Name','ProductDialogue',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'ProductDialogue_AssetDescription','ProductDialogue',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'ProductDialogue_MinimumAmount','ProductDialogue',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'ProductDialogue_MaximumAmount','ProductDialogue',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'ProductDialogue_ModelStatus','ProductDialogue',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'ProductDialogue_Channel','ProductDialogue',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'ProductDialogue_Active','ProductDialogue',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_PRODUCT_VIEW'), (Select RightID from SecRights where RightName = 'button_ProductList_PrintList'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_PRODUCT_MAKER'), (Select RightID from SecRights where RightName = 'menuItem_Product'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_PRODUCT_MAKER'), (Select RightID from SecRights where RightName = 'button_ProductList_PrintList'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_PRODUCT_MAKER'), (Select RightID from SecRights where RightName = 'button_ProductList_NewProduct'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_PRODUCT_MAKER'), (Select RightID from SecRights where RightName = 'button_ProductDialogue_btnNew'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_PRODUCT_MAKER'), (Select RightID from SecRights where RightName = 'button_ProductDialogue_btnEdit'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_PRODUCT_MAKER'), (Select RightID from SecRights where RightName = 'button_ProductDialogue_btnDelete'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_PRODUCT_MAKER'), (Select RightID from SecRights where RightName = 'button_ProductDialogue_btnSave'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_PRODUCT_MAKER'), (Select RightID from SecRights where RightName = 'ProductDialogue_ModuleId'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_PRODUCT_MAKER'), (Select RightID from SecRights where RightName = 'ProductDialogue_Description'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_PRODUCT_MAKER'), (Select RightID from SecRights where RightName = 'ProductDialogue_Name'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_PRODUCT_MAKER'), (Select RightID from SecRights where RightName = 'ProductDialogue_AssetDescription'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_PRODUCT_MAKER'), (Select RightID from SecRights where RightName = 'ProductDialogue_MinimumAmount'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_PRODUCT_MAKER'), (Select RightID from SecRights where RightName = 'ProductDialogue_MaximumAmount'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_PRODUCT_MAKER'), (Select RightID from SecRights where RightName = 'ProductDialogue_ModelStatus'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_PRODUCT_MAKER'), (Select RightID from SecRights where RightName = 'ProductDialogue_Channel'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_PRODUCT_MAKER'), (Select RightID from SecRights where RightName = 'ProductDialogue_Active'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_PRODUCT_APPROVER'), (Select RightID from SecRights where RightName = 'menuItem_Product'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_PRODUCT_APPROVER'), (Select RightID from SecRights where RightName = 'button_ProductList_PrintList'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_PRODUCT_APPROVER'), (Select RightID from SecRights where RightName = 'button_ProductDialogue_btnSave'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				Insert into secRoleGroups Values ((select MAX(RoleGrpID)+1 From secRoleGroups),(select GrpID from SecGroups where grpCode='CD_PRODUCT_VIEW'),(select RoleID from secRoles where RoleCd='CD_PRODUCT_VIEW'), 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				Insert into secRoleGroups Values ((select MAX(RoleGrpID)+1 From secRoleGroups),(select GrpID from SecGroups where grpCode='CD_PRODUCT_MAKER'),(select RoleID from secRoles where RoleCd='CD_PRODUCT_MAKER'), 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				Insert into secRoleGroups Values ((select MAX(RoleGrpID)+1 From secRoleGroups),(select GrpID from SecGroups where grpCode='CD_PRODUCT_APPROVER'),(select RoleID from secRoles where RoleCd='CD_PRODUCT_APPROVER'), 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
				UPDATE SEQSECRIGHTS SET SEQNO = (SELECT MAX(RIGHTID) FROM SECRIGHTS);
				UPDATE SEQSECGROUPS SET SEQNO = (SELECT MAX(GRPID)  FROM SECGROUPS);
				UPDATE SEQSECROLES SET SEQNO = (SELECT MAX(ROLEID)  FROM SECROLES);
				UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID)  FROM SECGROUPRIGHTS);
				UPDATE SEQSECROLEGROUPS SET SEQNO = (SELECT MAX(ROLEGRPID)  FROM SECROLEGROUPS);
			]]>
		</sql>
	</changeSet>

	<changeSet id="6" author="Nageswar.p">
		<sql>
			<![CDATA[
				UPDATE SEQSECRIGHTS SET SEQNO = (SELECT MAX(RIGHTID) FROM SECRIGHTS);
				UPDATE SEQSECGROUPS SET SEQNO = (SELECT MAX(GRPID)  FROM SECGROUPS);
				UPDATE SEQSECROLES SET SEQNO = (SELECT MAX(ROLEID)  FROM SECROLES);
				UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);
				UPDATE SEQSECROLEGROUPS SET SEQNO = (SELECT MAX(ROLEGRPID) FROM SECROLEGROUPS);
				
				INSERT INTO SecRoles  VALUES ((select max(roleid)+1 from secroles), 1, 'CD_MERCHANT_VIEW', 'Role for merchant enquiry',	NULL, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL,NULL, 0);
				INSERT INTO SecRoles  VALUES ((select max(roleid)+1 from secroles), 1, 'CD_MERCHANT_MAKER', 'Role for merchant maker',	NULL, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL,NULL,NULL,NULL,NULL,0) ;
				INSERT INTO SecRoles  VALUES ((select max(roleid)+1 from secroles), 1, 'CD_MERCHANT_APPROVER', 'Role for merchant approver',	NULL, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL,NULL,NULL,NULL,NULL,0) ;
								
				INSERT INTO SecGroups Values ((Select MAX(GrpID)+1 From SecGroups), 'CD_MERCHANT_VIEW', 'Group for merchant enquiry', 	1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL,NULL, 0);
				INSERT INTO SecGroups Values ((Select MAX(GrpID)+1 From SecGroups), 'CD_MERCHANT_MAKER', 'Group for merchant maker', 		1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL,NULL, 0);
				INSERT INTO SecGroups Values ((Select MAX(GrpID)+1 From SecGroups), 'CD_MERCHANT_APPROVER', 'Group for merchant approver', 	1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL,NULL, 0);
				
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),0, 'menuItem_Merchant','MENU',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),2, 'button_MerchantList_PrintList','MerchantList',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),2, 'button_MerchantList_NewProduct','MerchantList',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),2, 'button_MerchantDialogue_btnNew','MerchantDialogue',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),2, 'button_MerchantDialogue_btnEdit','MerchantDialogue',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),2, 'button_MerchantDialogue_btnDelete','MerchantDialogue',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),2, 'button_MerchantDialogue_btnSave','MerchantDialogue',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'MerchantDialogue_Name','MerchantDialogue',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'MerchantDialogue_StoreId','MerchantDialogue',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'MerchantDialogue_StoreName','MerchantDialogue',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'MerchantDialogue_AddressLine1','MerchantDialogue',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'MerchantDialogue_AddressLine2','MerchantDialogue',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'MerchantDialogue_AddressLine3','MerchantDialogue',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'MerchantDialogue_City','MerchantDialogue',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'MerchantDialogue_State','MerchantDialogue',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'MerchantDialogue_Pincode','MerchantDialogue',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'MerchantDialogue_Active','MerchantDialogue',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'MerchantDialogue_TransactionsPerMonth','MerchantDialogue',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'MerchantDialogue_AmountPerMonth','MerchantDialogue',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'MerchantDialogue_LimitPerTransaction','MerchantDialogue',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'MerchantDialogue_LimitPerDay','MerchantDialogue',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'MerchantDialogue_TransactionPerDay','MerchantDialogue',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'MerchantDialogue_RefundAllowed','MerchantDialogue',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'MerchantDialogue_Channel','MerchantDialogue',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_MERCHANT_VIEW'), (Select RightID from SecRights where RightName = 'button_MerchantList_PrintList'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_MERCHANT_MAKER'), (Select RightID from SecRights where RightName = 'menuItem_Merchant'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_MERCHANT_MAKER'), (Select RightID from SecRights where RightName = 'button_MerchantList_PrintList'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_MERCHANT_MAKER'), (Select RightID from SecRights where RightName = 'button_MerchantList_NewProduct'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_MERCHANT_MAKER'), (Select RightID from SecRights where RightName = 'button_MerchantDialogue_btnNew'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_MERCHANT_MAKER'), (Select RightID from SecRights where RightName = 'button_MerchantDialogue_btnEdit'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_MERCHANT_MAKER'), (Select RightID from SecRights where RightName = 'button_MerchantDialogue_btnDelete'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_MERCHANT_MAKER'), (Select RightID from SecRights where RightName = 'button_MerchantDialogue_btnSave'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_MERCHANT_MAKER'), (Select RightID from SecRights where RightName = 'MerchantDialogue_Name'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_MERCHANT_MAKER'), (Select RightID from SecRights where RightName = 'MerchantDialogue_StoreId'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_MERCHANT_MAKER'), (Select RightID from SecRights where RightName = 'MerchantDialogue_StoreName'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_MERCHANT_MAKER'), (Select RightID from SecRights where RightName = 'MerchantDialogue_AddressLine1'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_MERCHANT_MAKER'), (Select RightID from SecRights where RightName = 'MerchantDialogue_AddressLine2'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_MERCHANT_MAKER'), (Select RightID from SecRights where RightName = 'MerchantDialogue_AddressLine3'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_MERCHANT_MAKER'), (Select RightID from SecRights where RightName = 'MerchantDialogue_City'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_MERCHANT_MAKER'), (Select RightID from SecRights where RightName = 'MerchantDialogue_State'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_MERCHANT_MAKER'), (Select RightID from SecRights where RightName = 'MerchantDialogue_Pincode'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_MERCHANT_MAKER'), (Select RightID from SecRights where RightName = 'MerchantDialogue_Active'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_MERCHANT_MAKER'), (Select RightID from SecRights where RightName = 'MerchantDialogue_TransactionsPerMonth'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_MERCHANT_MAKER'), (Select RightID from SecRights where RightName = 'MerchantDialogue_AmountPerMonth'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_MERCHANT_MAKER'), (Select RightID from SecRights where RightName = 'MerchantDialogue_LimitPerTransaction'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_MERCHANT_MAKER'), (Select RightID from SecRights where RightName = 'MerchantDialogue_LimitPerDay'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_MERCHANT_MAKER'), (Select RightID from SecRights where RightName = 'MerchantDialogue_TransactionPerDay'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_MERCHANT_MAKER'), (Select RightID from SecRights where RightName = 'MerchantDialogue_RefundAllowed'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_MERCHANT_MAKER'), (Select RightID from SecRights where RightName = 'MerchantDialogue_Channel'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_MERCHANT_APPROVER'), (Select RightID from SecRights where RightName = 'menuItem_Merchant'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_MERCHANT_APPROVER'), (Select RightID from SecRights where RightName = 'button_MerchantList_PrintList'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_MERCHANT_APPROVER'), (Select RightID from SecRights where RightName = 'button_MerchantDialogue_btnSave'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				Insert into secRoleGroups Values ((select MAX(RoleGrpID)+1 From secRoleGroups),(select GrpID from SecGroups where grpCode='CD_MERCHANT_VIEW'),(select RoleID from secRoles where RoleCd='CD_MERCHANT_VIEW'), 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				Insert into secRoleGroups Values ((select MAX(RoleGrpID)+1 From secRoleGroups),(select GrpID from SecGroups where grpCode='CD_MERCHANT_MAKER'),(select RoleID from secRoles where RoleCd='CD_MERCHANT_MAKER'), 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				Insert into secRoleGroups Values ((select MAX(RoleGrpID)+1 From secRoleGroups),(select GrpID from SecGroups where grpCode='CD_MERCHANT_APPROVER'),(select RoleID from secRoles where RoleCd='CD_MERCHANT_APPROVER'), 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
				UPDATE SEQSECRIGHTS SET SEQNO = (SELECT MAX(RIGHTID) FROM SECRIGHTS);
				UPDATE SEQSECGROUPS SET SEQNO = (SELECT MAX(GRPID)  FROM SECGROUPS);
				UPDATE SEQSECROLES SET SEQNO = (SELECT MAX(ROLEID)  FROM SECROLES);
				UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID)  FROM SECGROUPRIGHTS);
				UPDATE SEQSECROLEGROUPS SET SEQNO = (SELECT MAX(ROLEGRPID)  FROM SECROLEGROUPS);
			]]>
		</sql>
	</changeSet>

	<changeSet id="6.1" author="Nageswar.p">
		<sql>
			<![CDATA[
				UPDATE SEQSECRIGHTS SET SEQNO = (SELECT MAX(RIGHTID) FROM SECRIGHTS);
				UPDATE SEQSECGROUPS SET SEQNO = (SELECT MAX(GRPID)  FROM SECGROUPS);
				UPDATE SEQSECROLES SET SEQNO = (SELECT MAX(ROLEID)  FROM SECROLES);
				UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);
				UPDATE SEQSECROLEGROUPS SET SEQNO = (SELECT MAX(ROLEGRPID) FROM SECROLEGROUPS);
				
				INSERT INTO SecRoles  VALUES ((select max(roleid)+1 from secroles), 1, 'DEALERMAPPING_VIEW', 'Role for DealerMapping enquiry',	NULL, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL,NULL, 0);
				INSERT INTO SecRoles  VALUES ((select max(roleid)+1 from secroles), 1, 'DEALERMAPPING_MAKER', 'Role for DealerMapping maker',	NULL, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL,NULL,NULL,NULL,NULL,0) ;
				INSERT INTO SecRoles  VALUES ((select max(roleid)+1 from secroles), 1, 'DEALERMAPPING_APPROVER', 'Role for DealerMapping approver',	NULL, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL,NULL,NULL,NULL,NULL,0) ;
							
				INSERT INTO SecGroups Values ((Select MAX(GrpID)+1 From SecGroups), 'DEALERMAPPING_VIEW', 'Group for DealerMapping enquiry', 	1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL,NULL, 0);
				INSERT INTO SecGroups Values ((Select MAX(GrpID)+1 From SecGroups), 'DEALERMAPPING_MAKER', 'Group for DealerMapping maker', 		1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL,NULL, 0);
				INSERT INTO SecGroups Values ((Select MAX(GrpID)+1 From SecGroups), 'DEALERMAPPING_APPROVER', 'Group for DealerMapping approver', 	1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL,NULL, 0);
				
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),0, 'menuItem_DealerMapping','MENU',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),2, 'button_DealerMappingList_PrintList','DealerMappingList',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),2, 'button_DealerMappingList_NewProduct','DealerMappingList',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),2, 'button_DealerMappingDialog_btnNew','DealerMappingDialog',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),2, 'button_DealerMappingDialog_btnEdit','DealerMappingDialog',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),2, 'button_DealerMappingDialog_btnDelete','DealerMappingDialog',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),2, 'button_DealerMappingDialog_btnSave','DealerMappingDialog',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'DealerMappingDialog_MerchantName','DealerMappingDialog',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'DealerMappingDialog_StoreName','DealerMappingDialog',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'DealerMappingDialog_Active','DealerMappingDialog',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'DEALERMAPPING_VIEW'), (Select RightID from SecRights where RightName = 'button_DealerMappingList_PrintList'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'DEALERMAPPING_MAKER'), (Select RightID from SecRights where RightName = 'menuItem_DealerMapping'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'DEALERMAPPING_MAKER'), (Select RightID from SecRights where RightName = 'button_DealerMappingList_PrintList'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'DEALERMAPPING_MAKER'), (Select RightID from SecRights where RightName = 'button_DealerMappingList_NewProduct'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'DEALERMAPPING_MAKER'), (Select RightID from SecRights where RightName = 'button_DealerMappingDialog_btnNew'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'DEALERMAPPING_MAKER'), (Select RightID from SecRights where RightName = 'button_DealerMappingDialog_btnEdit'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'DEALERMAPPING_MAKER'), (Select RightID from SecRights where RightName = 'button_DealerMappingDialog_btnDelete'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'DEALERMAPPING_MAKER'), (Select RightID from SecRights where RightName = 'button_DealerMappingDialog_btnSave'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'DEALERMAPPING_MAKER'), (Select RightID from SecRights where RightName = 'DealerMappingDialog_MerchantName'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'DEALERMAPPING_MAKER'), (Select RightID from SecRights where RightName = 'DealerMappingDialog_StoreName'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'DEALERMAPPING_MAKER'), (Select RightID from SecRights where RightName = 'DealerMappingDialog_Active'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'DEALERMAPPING_APPROVER'), (Select RightID from SecRights where RightName = 'menuItem_DealerMapping'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'DEALERMAPPING_APPROVER'), (Select RightID from SecRights where RightName = 'button_DealerMappingList_PrintList'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'DEALERMAPPING_APPROVER'), (Select RightID from SecRights where RightName = 'button_DealerMappingDialog_btnSave'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				Insert into secRoleGroups Values ((select MAX(RoleGrpID)+1 From secRoleGroups),(select GrpID from SecGroups where grpCode='DEALERMAPPING_VIEW'),(select RoleID from secRoles where RoleCd='DEALERMAPPING_VIEW'), 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				Insert into secRoleGroups Values ((select MAX(RoleGrpID)+1 From secRoleGroups),(select GrpID from SecGroups where grpCode='DEALERMAPPING_MAKER'),(select RoleID from secRoles where RoleCd='DEALERMAPPING_MAKER'), 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				Insert into secRoleGroups Values ((select MAX(RoleGrpID)+1 From secRoleGroups),(select GrpID from SecGroups where grpCode='DEALERMAPPING_APPROVER'),(select RoleID from secRoles where RoleCd='DEALERMAPPING_APPROVER'), 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
				UPDATE SEQSECRIGHTS SET SEQNO = (SELECT MAX(RIGHTID) FROM SECRIGHTS);
				UPDATE SEQSECGROUPS SET SEQNO = (SELECT MAX(GRPID)  FROM SECGROUPS);
				UPDATE SEQSECROLES SET SEQNO = (SELECT MAX(ROLEID)  FROM SECROLES);
				UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID)  FROM SECGROUPRIGHTS);
				UPDATE SEQSECROLEGROUPS SET SEQNO = (SELECT MAX(ROLEGRPID)  FROM SECROLEGROUPS);
			]]>
		</sql>
	</changeSet>

	<changeSet id="7" author="Nageswar.p" dbms="postgresql, oracle">
		<createSequence sequenceName="SEQCD_DEALERMAPPING" />
	</changeSet>

	<changeSet id="7.1" author="Nageswar.p" dbms="mssql">
		<createTable tableName="SEQCD_DEALERMAPPING">
			<column name="SeqNo" type="bigint" autoIncrement="true" />
			<column name="Value" type="int"></column>
		</createTable>
	</changeSet>

	<changeSet id="7.2" author="Nageswar.p">
		<createTable tableName="CD_DealerMapping">
			<column name="DealerMapId" type="int">
				<constraints nullable="false" primaryKey="true"
					primaryKeyName="PK_CD_DEALERMAP_ID" />
			</column>
			<column name="MerchantId" type="int">
			</column>
			<column name="StoreId" type="int">
			</column>
			<column name="DealerCode" type="int">
			</column>
			<column name="Active" type="boolean" />
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkflowId" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet id="7.3" author="Nageswar.p">
		<createTable tableName="CD_DealerMapping_Temp">
			<column name="DealerMapId" type="int">
				<constraints nullable="false" primaryKey="true"
					primaryKeyName="PK_CD_DEALERMAP_T_ID" />
			</column>
			<column name="MerchantId" type="int">
			</column>
			<column name="StoreId" type="int">
			</column>
			<column name="DealerCode" type="int">
			</column>
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="Active" type="boolean" />
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkflowId" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet id="7.4" author="Nageswar.p">
		<createView viewName="CD_DealerMapping_VIEW"
			replaceIfExists="true">
			  SELECT t1.dealerMapId,
    			t1.MerchantId,
   				t1.storeId,
    			t1.dealerCode,
    			t1.active,     
    			t1.version,
    			t1.lastmntby,
    			t1.lastmnton,
    			t1.recordstatus,
   				t1.rolecode,
    			t1.nextrolecode,
    			t1.taskid,
    			t1.nexttaskid,
    			t1.recordtype,
    			t1.workflowid
   			   FROM CD_DealerMapping_Temp t1
			UNION ALL
 			SELECT t1.dealerMapId,
    			t1.MerchantId,
   				t1.storeId,
    			t1.dealerCode,
    			t1.active,    
    			t1.version,
    			t1.lastmntby,
    			t1.lastmnton,
    			t1.recordstatus,
   				t1.rolecode,
    			t1.nextrolecode,
    			t1.taskid,
    			t1.nexttaskid,
    			t1.recordtype,
    			t1.workflowid
   			FROM CD_DealerMapping t1
  			WHERE NOT (EXISTS (SELECT 1
            FROM CD_DealerMapping_Temp 
            WHERE CD_DealerMapping_Temp.dealerMapId = t1.dealerMapId))
		</createView>
	</changeSet>

	<changeSet id="7.5" author="Nageswar.p">
		<createView viewName="CD_DealerMapping_AVIEW"
			replaceIfExists="true">
			  SELECT t1.dealerMapId,
    			t1.MerchantId,
   				t1.storeId,
    			t1.dealerCode,
    			t1.active,   
    			t1.version,
    			t1.lastmntby,
    			t1.lastmnton,
    			t1.recordstatus,
   				t1.rolecode,
    			t1.nextrolecode,
    			t1.taskid,
    			t1.nexttaskid,
    			t1.recordtype,
    			t1.workflowid
   			FROM CD_DealerMapping t1
		</createView>
	</changeSet>

	<changeSet id="7.6" author="Nageswar.p">
		<createView viewName="CD_DealerMapping_TVIEW"
			replaceIfExists="true">
			  SELECT t1.dealerMapId,
    			t1.MerchantId,
   				t1.storeId,
    			t1.dealerCode,
    			t1.active,
    			t1.version,
    			t1.lastmntby,
    			t1.lastmnton,
    			t1.recordstatus,
   				t1.rolecode,
    			t1.nextrolecode,
    			t1.taskid,
    			t1.nexttaskid,
    			t1.recordtype,
    			t1.workflowid
   			FROM CD_DealerMapping_Temp t1
		</createView>
	</changeSet>

	<changeSet id="7.7" author="Nageswar.p">
		<sql>
		<![CDATA[
		INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),2, 'button_DealerMappingList_DealerMappingSearchDialog','DealerMappingList',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
		INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),2, 'button_DealerMappingList_NewDealerMapping','DealerMappingList',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
		
		INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'DEALERMAPPING_VIEW'), (Select RightID from SecRights where RightName = 'button_DealerMappingList_DealerMappingSearchDialog'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
		INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'DEALERMAPPING_MAKER'), (Select RightID from SecRights where RightName = 'button_DealerMappingList_DealerMappingSearchDialog'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
		INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'DEALERMAPPING_APPROVER'), (Select RightID from SecRights where RightName = 'button_DealerMappingList_DealerMappingSearchDialog'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
		INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'DEALERMAPPING_MAKER'), (Select RightID from SecRights where RightName = 'button_DealerMappingList_NewDealerMapping'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);	
		]]>
		</sql>
	</changeSet>

	<changeSet id="8" author="Shahbaj.b" dbms="postgresql, oracle">
		<createSequence sequenceName="SEQCD_DEALERGROUP" />
	</changeSet>

	<changeSet id="8.1" author="Shahbaj.b" dbms="oracle">
		<createTable tableName="SEQCD_DEALERGROUP">
			<column name="SeqNo" type="bigint" autoIncrement="true" />
			<column name="Value" type="int"></column>
		</createTable>
	</changeSet>

	<changeSet id="8.2" author="Shahbaj.b">
		<createTable tableName="CD_DealerGroup">
			<column name="DealerGroupId" type="int">
				<constraints nullable="false" />
			</column>
			<column name="DealerCode" type="varchar(8)">
			</column>
			<column name="DealerCategoryId" type="int">
			</column>
			<column name="Channel" type="varchar(8)">
			</column>
			<column name="Active" type="boolean">
			</column>
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkflowId" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet id="8.3" author="Shahbaj.b">
		<createTable tableName="CD_DealerGroup_Temp">
			<column name="DealerGroupId" type="int">
				<constraints nullable="false" />
			</column>
			<column name="DealerCode" type="varchar(8)">
			</column>
			<column name="DealerCategoryId" type="int">
			</column>
			<column name="Channel" type="varchar(8)">
			</column>
			<column name="Active" type="boolean">
			</column>
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkflowId" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet id="8.4" author="Shahbaj.b">
		<createView viewName="CD_DealerGroup_VIEW" replaceIfExists="true">
			  SELECT t1.dealerGroupId,
    			t1.dealercode,
   				t1.dealercategoryid,
    			t1.channel,
    			t1.active,     
    			t1.version,
    			t1.lastmntby,
    			t1.lastmnton,
    			t1.recordstatus,
   				t1.rolecode,
    			t1.nextrolecode,
    			t1.taskid,
    			t1.nexttaskid,
    			t1.recordtype,
    			t1.workflowid
   			FROM CD_DealerGroup_Temp t1
			UNION ALL
 			SELECT t1.dealerGroupId,
    			t1.dealercode,
   				t1.dealercategoryid,
    			t1.channel,
    			t1.active,     
    			t1.version,
    			t1.lastmntby,
    			t1.lastmnton,
    			t1.recordstatus,
   				t1.rolecode,
    			t1.nextrolecode,
    			t1.taskid,
    			t1.nexttaskid,
    			t1.recordtype,
    			t1.workflowid
   			FROM CD_DealerGroup t1
  			WHERE NOT (EXISTS ( SELECT 1
            FROM CD_DealerGroup_Temp
            WHERE CD_DealerGroup_Temp.dealerGroupId = t1.dealerGroupId))
		</createView>
	</changeSet>

	<changeSet id="8.5" author="Shahbaj.b">
		<createView viewName="CD_DealerGroup_AVIEW"
			replaceIfExists="true">
			  SELECT t1.dealerGroupId,
    			t1.dealercode,
   				t1.dealercategoryid,
    			t1.channel,
    			t1.active,     
    			t1.version,
    			t1.lastmntby,
    			t1.lastmnton,
    			t1.recordstatus,
   				t1.rolecode,
    			t1.nextrolecode,
    			t1.taskid,
    			t1.nexttaskid,
    			t1.recordtype,
    			t1.workflowid
   			FROM CD_DealerGroup t1
		</createView>
	</changeSet>

	<changeSet id="8.6" author="Shahbaj.b">
		<createView viewName="CD_DealerGroup_TVIEW"
			replaceIfExists="true">
			 SELECT t1.dealerGroupId,
    			t1.dealercode,
   				t1.dealercategoryid,
    			t1.channel,
    			t1.active,     
    			t1.version,
    			t1.lastmntby,
    			t1.lastmnton,
    			t1.recordstatus,
   				t1.rolecode,
    			t1.nextrolecode,
    			t1.taskid,
    			t1.nexttaskid,
    			t1.recordtype,
    			t1.workflowid
   			FROM CD_DealerGroup_Temp t1
		</createView>
	</changeSet>

	<changeSet id="8.7" author="Shahbaj.b">
		<sql>
			<![CDATA[
				UPDATE SEQSECRIGHTS SET SEQNO = (SELECT MAX(RIGHTID) FROM SECRIGHTS);
				UPDATE SEQSECGROUPS SET SEQNO = (SELECT MAX(GRPID)  FROM SECGROUPS);
				UPDATE SEQSECROLES SET SEQNO = (SELECT MAX(ROLEID)  FROM SECROLES);
				UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);
				UPDATE SEQSECROLEGROUPS SET SEQNO = (SELECT MAX(ROLEGRPID) FROM SECROLEGROUPS);
				
				INSERT INTO SecRoles  VALUES ((select max(roleid)+1 from secroles), 1, 'DEALERGROUP_VIEW', 'Role for Dealer Group enquiry',	NULL, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL,NULL, 0);
				INSERT INTO SecRoles  VALUES ((select max(roleid)+1 from secroles), 1, 'DEALERGROUP_MAKER', 'Role for Dealer Group maker',	NULL, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL,NULL,NULL,NULL,NULL,0) ;
				INSERT INTO SecRoles  VALUES ((select max(roleid)+1 from secroles), 1, 'DEALERGROUP_APPROVER', 'Role for Dealer Group approver',	NULL, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL,NULL,NULL,NULL,NULL,0) ;
							
				INSERT INTO SecGroups Values ((Select MAX(GrpID)+1 From SecGroups), 'DEALERGROUP_VIEW', 'Group for Dealer Group enquiry', 	1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL,NULL, 0);
				INSERT INTO SecGroups Values ((Select MAX(GrpID)+1 From SecGroups), 'DEALERGROUP_MAKER', 'Group for Dealer Group maker', 		1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL,NULL, 0);
				INSERT INTO SecGroups Values ((Select MAX(GrpID)+1 From SecGroups), 'DEALERGROUP_APPROVER', 'Group for Dealer Group approver', 	1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL,NULL, 0);
				
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),0, 'menuItem_DealerGroup','MENU',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),2, 'button_DealerGroupList_PrintList','DealerGroupList',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),2, 'button_DealerGroupList_NewDealerGroup','DealerGroupList',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),2, 'button_DealerGroupDialog_btnNew','DealerGroupDialog',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),2, 'button_DealerGroupDialog_btnEdit','DealerGroupDialog',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),2, 'button_DealerGroupDialog_btnDelete','DealerGroupDialog',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),2, 'button_DealerGroupDialog_btnSave','DealerGroupDialog',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'DealerGroupDialog_DealerCode','DealerGroupDialog',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'DealerGroupDialog_DealerCategoryId','DealerGroupDialog',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'DealerGroupDialog_Channel','DealerGroupDialog',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'DealerGroupDialog_Active','DealerGroupDialog',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'DEALERGROUP_VIEW'), (Select RightID from SecRights where RightName = 'button_DealerGroupList_PrintList'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'DEALERGROUP_MAKER'), (Select RightID from SecRights where RightName = 'menuItem_DealerGroup'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'DEALERGROUP_MAKER'), (Select RightID from SecRights where RightName = 'button_DealerGroupList_PrintList'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'DEALERGROUP_MAKER'), (Select RightID from SecRights where RightName = 'button_DealerGroupList_NewDealerGroup'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'DEALERGROUP_MAKER'), (Select RightID from SecRights where RightName = 'button_DealerGroupDialog_btnNew'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'DEALERGROUP_MAKER'), (Select RightID from SecRights where RightName = 'button_DealerGroupDialog_btnEdit'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'DEALERGROUP_MAKER'), (Select RightID from SecRights where RightName = 'button_DealerGroupDialog_btnDelete'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'DEALERGROUP_MAKER'), (Select RightID from SecRights where RightName = 'button_DealerGroupDialog_btnSave'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'DEALERGROUP_MAKER'), (Select RightID from SecRights where RightName = 'DealerGroupDialog_DealerCode'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'DEALERGROUP_MAKER'), (Select RightID from SecRights where RightName = 'DealerGroupDialog_DealerCategoryId'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'DEALERGROUP_MAKER'), (Select RightID from SecRights where RightName = 'DealerGroupDialog_Channel'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'DEALERGROUP_MAKER'), (Select RightID from SecRights where RightName = 'DealerGroupDialog_Active'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'DEALERGROUP_APPROVER'), (Select RightID from SecRights where RightName = 'menuItem_DealerGroup'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'DEALERGROUP_APPROVER'), (Select RightID from SecRights where RightName = 'button_DealerGroupList_PrintList'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'DEALERGROUP_APPROVER'), (Select RightID from SecRights where RightName = 'button_DealerGroupDialog_btnSave'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				Insert into secRoleGroups Values ((select MAX(RoleGrpID)+1 From secRoleGroups),(select GrpID from SecGroups where grpCode='DEALERGROUP_VIEW'),(select RoleID from secRoles where RoleCd='DEALERGROUP_VIEW'), 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				Insert into secRoleGroups Values ((select MAX(RoleGrpID)+1 From secRoleGroups),(select GrpID from SecGroups where grpCode='DEALERGROUP_MAKER'),(select RoleID from secRoles where RoleCd='DEALERGROUP_MAKER'), 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				Insert into secRoleGroups Values ((select MAX(RoleGrpID)+1 From secRoleGroups),(select GrpID from SecGroups where grpCode='DEALERGROUP_APPROVER'),(select RoleID from secRoles where RoleCd='DEALERGROUP_APPROVER'), 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
				UPDATE SEQSECRIGHTS SET SEQNO = (SELECT MAX(RIGHTID) FROM SECRIGHTS);
				UPDATE SEQSECGROUPS SET SEQNO = (SELECT MAX(GRPID)  FROM SECGROUPS);
				UPDATE SEQSECROLES SET SEQNO = (SELECT MAX(ROLEID)  FROM SECROLES);
				UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID)  FROM SECGROUPRIGHTS);
				UPDATE SEQSECROLEGROUPS SET SEQNO = (SELECT MAX(ROLEGRPID)  FROM SECROLEGROUPS);
			]]>
		</sql>
	</changeSet>

	<changeSet id="10" author="Nageswar.p">
		<createSequence sequenceName="SEQCD_DEALERMAPPING_Code"
			incrementBy="1" maxValue="999999999999999" startValue="1" />
	</changeSet>

	<changeSet id="9" author="Shahbaj.b" dbms="postgresql, oracle">
		<createSequence sequenceName="SEQPRODUCTGROUP" />
	</changeSet>

	<changeSet id="9.1" author="Shahbaj.b" dbms="mssql">
		<createTable tableName="SEQPRODUCTGROUP">
			<column name="SeqNo" type="bigint" autoIncrement="true" />
			<column name="Value" type="int"></column>
		</createTable>
	</changeSet>

	<changeSet id="9.2" author="Shahbaj.b">
		<createTable tableName="ProductGroup">
			<column name="ProductGroupId" type="int">
				<constraints nullable="false" />
			</column>
			<column name="ModelId" type="varchar(8)">
			</column>
			<column name="ProductCategoryId" type="int">
			</column>
			<column name="Channel" type="int">
			</column>
			<column name="Active" type="boolean">
			</column>
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkflowId" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet id="9.3" author="Shahbaj.b">
		<createTable tableName="ProductGroup_Temp">
			<column name="ProductGroupId" type="int">
				<constraints nullable="false" />
			</column>
			<column name="ModelId" type="varchar(8)">
			</column>
			<column name="ProductCategoryId" type="int">
			</column>
			<column name="Channel" type="int">
			</column>
			<column name="Active" type="boolean">
			</column>
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkflowId" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet id="9.4" author="Shahbaj.b">
		<createView viewName="ProductGroup_VIEW" replaceIfExists="true">
			 SELECT t1.productGroupId,
    			t1.modelId,
   				t1.productcategoryid,
    			t1.channel,
    			t1.active,     
    			t1.version,
    			t1.lastmntby,
    			t1.lastmnton,
    			t1.recordstatus,
   				t1.rolecode,
    			t1.nextrolecode,
    			t1.taskid,
    			t1.nexttaskid,
    			t1.recordtype,
    			t1.workflowid
   			FROM ProductGroup_Temp t1
			UNION ALL
 			SELECT t1.productGroupId,
    			t1.modelId,
   				t1.productcategoryid,
    			t1.channel,
    			t1.active,     
    			t1.version,
    			t1.lastmntby,
    			t1.lastmnton,
    			t1.recordstatus,
   				t1.rolecode,
    			t1.nextrolecode,
    			t1.taskid,
    			t1.nexttaskid,
    			t1.recordtype,
    			t1.workflowid
   			FROM ProductGroup t1
  			WHERE NOT (EXISTS ( SELECT 1
            FROM ProductGroup_Temp
            WHERE ProductGroup_Temp.productGroupId = t1.productGroupId))
		</createView>
	</changeSet>

	<changeSet id="9.5" author="Shahbaj.b">
		<createView viewName="ProductGroup_AVIEW" replaceIfExists="true">
			  SELECT t1.productGroupId,
    			t1.modelId,
   				t1.productcategoryid,
    			t1.channel,
    			t1.active,     
    			t1.version,
    			t1.lastmntby,
    			t1.lastmnton,
    			t1.recordstatus,
   				t1.rolecode,
    			t1.nextrolecode,
    			t1.taskid,
    			t1.nexttaskid,
    			t1.recordtype,
    			t1.workflowid
   			FROM ProductGroup t1
		</createView>
	</changeSet>

	<changeSet id="9.6" author="Shahbaj.b">
		<createView viewName="ProductGroup_TVIEW" replaceIfExists="true">
			 SELECT t1.productGroupId,
    			t1.modelId,
   				t1.productcategoryid,
    			t1.channel,
    			t1.active,     
    			t1.version,
    			t1.lastmntby,
    			t1.lastmnton,
    			t1.recordstatus,
   				t1.rolecode,
    			t1.nextrolecode,
    			t1.taskid,
    			t1.nexttaskid,
    			t1.recordtype,
    			t1.workflowid
   			FROM ProductGroup_Temp t1
		</createView>
	</changeSet>

	<changeSet id="9.7" author="Shahbaj.b">
		<sql>
			<![CDATA[
				UPDATE SEQSECRIGHTS SET SEQNO = (SELECT MAX(RIGHTID) FROM SECRIGHTS);
				UPDATE SEQSECGROUPS SET SEQNO = (SELECT MAX(GRPID)  FROM SECGROUPS);
				UPDATE SEQSECROLES SET SEQNO = (SELECT MAX(ROLEID)  FROM SECROLES);
				UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);
				UPDATE SEQSECROLEGROUPS SET SEQNO = (SELECT MAX(ROLEGRPID) FROM SECROLEGROUPS);
				
				INSERT INTO SecRoles  VALUES ((select max(roleid)+1 from secroles), 1, 'PRODUCTGROUP_VIEW', 'Role for Product Group enquiry',	NULL, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL,NULL, 0);
				INSERT INTO SecRoles  VALUES ((select max(roleid)+1 from secroles), 1, 'PRODUCTGROUP_MAKER', 'Role for Product Group maker',	NULL, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL,NULL,NULL,NULL,NULL,0) ;
				INSERT INTO SecRoles  VALUES ((select max(roleid)+1 from secroles), 1, 'PRODUCTGROUP_APPROVER', 'Role for Product Group approver',	NULL, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL,NULL,NULL,NULL,NULL,0) ;
							
				INSERT INTO SecGroups Values ((Select MAX(GrpID)+1 From SecGroups), 'PRODUCTGROUP_VIEW', 'Group for Product Group enquiry', 	1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL,NULL, 0);
				INSERT INTO SecGroups Values ((Select MAX(GrpID)+1 From SecGroups), 'PRODUCTGROUP_MAKER', 'Group for Product Group maker', 		1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL,NULL, 0);
				INSERT INTO SecGroups Values ((Select MAX(GrpID)+1 From SecGroups), 'PRODUCTGROUP_APPROVER', 'Group for Product Group approver', 	1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL,NULL, 0);
				
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),0, 'menu_Item_ProductGroup','MENU',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),2, 'button_ProductGroupList_PrintList','ProductGroupList',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),2, 'button_ProductGroupList_NewProductGroup','ProductGroupList',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),2, 'button_ProductGroupDialog_btnNew','ProductGroupDialog',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),2, 'button_ProductGroupDialog_btnEdit','ProductGroupDialog',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),2, 'button_ProductGroupDialog_btnDelete','ProductGroupDialog',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),2, 'button_ProductGroupDialog_btnSave','ProductGroupDialog',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'ProductGroupDialog_ModelCode','ProductGroupDialog',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'ProductGroupDialog_ProductCategoryId','ProductGroupDialog',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'ProductGroupDialog_Channel','ProductGroupDialog',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'ProductGroupDialog_Active','ProductGroupDialog',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'PRODUCTGROUP_VIEW'), (Select RightID from SecRights where RightName = 'button_ProductGroupList_PrintList'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'PRODUCTGROUP_MAKER'), (Select RightID from SecRights where RightName = 'menu_Item_ProductGroup'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'PRODUCTGROUP_MAKER'), (Select RightID from SecRights where RightName = 'button_ProductGroupList_PrintList'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'PRODUCTGROUP_MAKER'), (Select RightID from SecRights where RightName = 'button_ProductGroupList_NewProductGroup'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'PRODUCTGROUP_MAKER'), (Select RightID from SecRights where RightName = 'button_ProductGroupDialog_btnNew'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'PRODUCTGROUP_MAKER'), (Select RightID from SecRights where RightName = 'button_ProductGroupDialog_btnEdit'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'PRODUCTGROUP_MAKER'), (Select RightID from SecRights where RightName = 'button_ProductGroupDialog_btnDelete'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'PRODUCTGROUP_MAKER'), (Select RightID from SecRights where RightName = 'button_ProductGroupDialog_btnSave'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'PRODUCTGROUP_MAKER'), (Select RightID from SecRights where RightName = 'ProductGroupDialog_ModelCode'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'PRODUCTGROUP_MAKER'), (Select RightID from SecRights where RightName = 'ProductGroupDialog_ProductCategoryId'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'PRODUCTGROUP_MAKER'), (Select RightID from SecRights where RightName = 'ProductGroupDialog_Channel'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'PRODUCTGROUP_MAKER'), (Select RightID from SecRights where RightName = 'ProductGroupDialog_Active'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'PRODUCTGROUP_APPROVER'), (Select RightID from SecRights where RightName = 'menu_Item_ProductGroup'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'PRODUCTGROUP_APPROVER'), (Select RightID from SecRights where RightName = 'button_ProductGroupList_PrintList'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'PRODUCTGROUP_APPROVER'), (Select RightID from SecRights where RightName = 'button_ProductGroupDialog_btnSave'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				Insert into secRoleGroups Values ((select MAX(RoleGrpID)+1 From secRoleGroups),(select GrpID from SecGroups where grpCode='PRODUCTGROUP_VIEW'),(select RoleID from secRoles where RoleCd='PRODUCTGROUP_VIEW'), 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				Insert into secRoleGroups Values ((select MAX(RoleGrpID)+1 From secRoleGroups),(select GrpID from SecGroups where grpCode='PRODUCTGROUP_MAKER'),(select RoleID from secRoles where RoleCd='PRODUCTGROUP_MAKER'), 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				Insert into secRoleGroups Values ((select MAX(RoleGrpID)+1 From secRoleGroups),(select GrpID from SecGroups where grpCode='PRODUCTGROUP_APPROVER'),(select RoleID from secRoles where RoleCd='PRODUCTGROUP_APPROVER'), 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
				UPDATE SEQSECRIGHTS SET SEQNO = (SELECT MAX(RIGHTID) FROM SECRIGHTS);
				UPDATE SEQSECGROUPS SET SEQNO = (SELECT MAX(GRPID)  FROM SECGROUPS);
				UPDATE SEQSECROLES SET SEQNO = (SELECT MAX(ROLEID)  FROM SECROLES);
				UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID)  FROM SECGROUPRIGHTS);
				UPDATE SEQSECROLEGROUPS SET SEQNO = (SELECT MAX(ROLEGRPID)  FROM SECROLEGROUPS);
			]]>
		</sql>
	</changeSet>

	<changeSet id="10" author="vijaya.a" dbms="postgresql, oracle">
		<createSequence sequenceName="SEQCD_Scheme_DealerGroup" />
	</changeSet>

	<changeSet id="10.1" author="vijaya.a" dbms="mssql">
		<createTable tableName="SEQCD_Scheme_DealerGroup">
			<column name="SeqNo" type="bigint" autoIncrement="true" />
			<column name="Value" type="int"></column>
		</createTable>
	</changeSet>

	<changeSet id="10.2" author="vijaya.a">
		<createTable tableName="CD_Scheme_DealerGroup">
			<column name="SchemeDealerGroupId" type="int">
				<constraints nullable="false" primaryKey="true"
					primaryKeyName="PK_CD_SchemeDealerGroupId_ID" />
			</column>
			<column name="PromotionId" type="varchar(20)">
			</column>
			<column name="DealerGroupCode" type="int">
			</column>
			<column name="Active" type="bit">
			</column>
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkflowId" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet id="10.3" author="vijaya.a">
		<createTable tableName="CD_Scheme_DealerGroup_Temp">
			<column name="SchemeDealerGroupId" type="int">
				<constraints nullable="false" primaryKey="true"
					primaryKeyName="PK_CD_SchemeDlrGrpId_TEMP_ID" />
			</column>
			<column name="PromotionId" type="varchar(20)">
			</column>
			<column name="DealerGroupCode" type="int">
			</column>
			<column name="Active" type="bit">
			</column>
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkflowId" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet id="10.3_post" author="vijaya.a">
		<addUniqueConstraint tableName="CD_SCHEME_DEALERGROUP_TEMP"
			columnNames="DealerGroupCode" constraintName="UK_CDSCHM_DLRGRP_TEMP_CODE" />
		<addUniqueConstraint tableName="CD_SCHEME_DEALERGROUP"
			columnNames="DealerGroupCode" constraintName="UK_CD_SCHEME_DEALERGROUP_CODE" />
	</changeSet>

	<changeSet id="10.4" author="vijaya.a">
		<createView viewName="CD_Scheme_DealerGroup_VIEW"
			replaceIfExists="true">
			SELECT t1.schemeDealerGroupId, 
				t1.promotionId,
				t1.dealerGroupCode,
   				t1.active,     
    			t1.version,
    			t1.lastmntby,
    			t1.lastmnton,
    			t1.recordstatus,
   				t1.rolecode,
    			t1.nextrolecode,
    			t1.taskid,
    			t1.nexttaskid,
    			t1.recordtype,
    			t1.workflowid
   			FROM CD_Scheme_DealerGroup_Temp t1
			UNION ALL
 			SELECT t1.schemeDealerGroupId, 
				t1.promotionId,
    			t1.dealerGroupCode,
   				t1.active,     
    			t1.version,
    			t1.lastmntby,
    			t1.lastmnton,
    			t1.recordstatus,
   				t1.rolecode,
    			t1.nextrolecode,
    			t1.taskid,
    			t1.nexttaskid,
    			t1.recordtype,
    			t1.workflowid
   			FROM CD_Scheme_DealerGroup t1
  			WHERE NOT (EXISTS ( SELECT 1
            FROM CD_Scheme_DealerGroup_Temp
            WHERE CD_Scheme_DealerGroup_Temp.promotionId = t1.promotionId))
		</createView>
	</changeSet>

	<changeSet id="10.5" author="vijaya.a">
		<createView viewName="CD_Scheme_DealerGroup_AVIEW"
			replaceIfExists="true">
			SELECT t1.schemeDealerGroupId, 
				t1.promotionId,
    			t1.dealerGroupCode,
   				t1.active,     
    			t1.version,
    			t1.lastmntby,
    			t1.lastmnton,
    			t1.recordstatus,
   				t1.rolecode,
    			t1.nextrolecode,
    			t1.taskid,
    			t1.nexttaskid,
    			t1.recordtype,
    			t1.workflowid
   			FROM CD_Scheme_DealerGroup t1
		</createView>
	</changeSet>

	<changeSet id="10.6" author="vijaya.a">
		<createView viewName="CD_Scheme_DealerGroup_TVIEW"
			replaceIfExists="true">
			  SELECT t1.schemeDealerGroupId, 
				t1.promotionId,
    			t1.dealerGroupCode,
   				t1.active,     
    			t1.version,
    			t1.lastmntby,
    			t1.lastmnton,
    			t1.recordstatus,
   				t1.rolecode,
    			t1.nextrolecode,
    			t1.taskid,
    			t1.nexttaskid,
    			t1.recordtype,
    			t1.workflowid
   			FROM CD_Scheme_DealerGroup_Temp t1
		</createView>
	</changeSet>

	<changeSet id="10.7" author="vijaya.a">
		<sql>
			<![CDATA[
				UPDATE SEQSECRIGHTS SET SEQNO = (SELECT MAX(RIGHTID) FROM SECRIGHTS);
				UPDATE SEQSECGROUPS SET SEQNO = (SELECT MAX(GRPID)  FROM SECGROUPS);
				UPDATE SEQSECROLES SET SEQNO = (SELECT MAX(ROLEID)  FROM SECROLES);
				UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);
				UPDATE SEQSECROLEGROUPS SET SEQNO = (SELECT MAX(ROLEGRPID) FROM SECROLEGROUPS);
				
				INSERT INTO SecRoles  VALUES ((select max(roleid)+1 from secroles), 1, 'CD_SCHEME_DEALERGROUP_VIEW', 'Role for scheme dealer group enquiry', NULL, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SecRoles  VALUES ((select max(roleid)+1 from secroles), 1, 'CD_SCHEME_DEALERGROUP_MAKER', 'Role for scheme dealer group maker',	NULL, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0) ;
				INSERT INTO SecRoles  VALUES ((select max(roleid)+1 from secroles), 1, 'CD_SCHEME_DEALERGROUP_APPROVER', 'Role for scheme dealer group approver', NULL, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0) ;
								
				INSERT INTO SecGroups Values ((Select MAX(GrpID)+1 From SecGroups), 'CD_SCHEME_DEALERGROUP_VIEW', 'Group for manufacturer enquiry', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SecGroups Values ((Select MAX(GrpID)+1 From SecGroups), 'CD_SCHEME_DEALERGROUP_MAKER', 'Group for manufacturer maker', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SecGroups Values ((Select MAX(GrpID)+1 From SecGroups), 'CD_SCHEME_DEALERGROUP_APPROVER', 'Group for manufacturer approver', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),0, 'menuItem_CDSchemeDealerGroup','MENU', 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),2, 'button_CDSchemeDealerGroupList_PrintList','CDSchemeDealerGroupList', 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),2, 'button_CDSchemeDealerGroupList_NewSchemeDealerGroup','CDSchemeDealerGroupList', 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),2, 'button_CDSchemeDealerGroupDialogue_btnNew','CDSchemeDealerGroupDialogue', 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),2, 'button_CDSchemeDealerGroupDialogue_btnEdit','CDSchemeDealerGroupDialogue', 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),2, 'button_CDSchemeDealerGroupDialogue_btnDelete','CDSchemeDealerGroupDialogue', 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),2, 'button_CDSchemeDealerGroupDialogue_btnSave','CDSchemeDealerGroupDialogue', 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'CDSchemeDealerGroupDialogue_SchemeId', 'CDSchemeDealerGroupDialogue', 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'CDSchemeDealerGroupDialogue_DealerGroupCode','CDSchemeDealerGroupDialogue',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'CDSchemeDealerGroupDialogue_Active','CDSchemeDealerGroupDialogue',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_SCHEME_DEALERGROUP_VIEW'), (Select RightID from SecRights where RightName = 'button_CDSchemeDealerGroupList_PrintList'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_SCHEME_DEALERGROUP_MAKER'), (Select RightID from SecRights where RightName = 'menuItem_CDSchemeDealerGroup'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_SCHEME_DEALERGROUP_MAKER'), (Select RightID from SecRights where RightName = 'button_CDSchemeDealerGroupList_PrintList'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_SCHEME_DEALERGROUP_MAKER'), (Select RightID from SecRights where RightName = 'button_CDSchemeDealerGroupList_NewSchemeDealerGroup'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_SCHEME_DEALERGROUP_MAKER'), (Select RightID from SecRights where RightName = 'CDSchemeDealerGroupDialogue_SchemeId'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_SCHEME_DEALERGROUP_MAKER'), (Select RightID from SecRights where RightName = 'CDSchemeDealerGroupDialogue_DealerGroupCode'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_SCHEME_DEALERGROUP_MAKER'), (Select RightID from SecRights where RightName = 'CDSchemeDealerGroupDialogue_Active'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_SCHEME_DEALERGROUP_MAKER'), (Select RightID from SecRights where RightName = 'button_CDSchemeDealerGroupDialogue_btnNew'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_SCHEME_DEALERGROUP_MAKER'), (Select RightID from SecRights where RightName = 'button_CDSchemeDealerGroupDialogue_btnEdit'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_SCHEME_DEALERGROUP_MAKER'), (Select RightID from SecRights where RightName = 'button_CDSchemeDealerGroupDialogue_btnDelete'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_SCHEME_DEALERGROUP_MAKER'), (Select RightID from SecRights where RightName = 'button_CDSchemeDealerGroupDialogue_btnSave'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_SCHEME_DEALERGROUP_APPROVER'), (Select RightID from SecRights where RightName = 'menuItem_CDSchemeDealerGroup'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_SCHEME_DEALERGROUP_APPROVER'), (Select RightID from SecRights where RightName = 'button_CDSchemeDealerGroupList_PrintList'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_SCHEME_DEALERGROUP_APPROVER'), (Select RightID from SecRights where RightName = 'button_CDSchemeDealerGroupDialogue_btnSave'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				Insert into secRoleGroups Values ((select MAX(RoleGrpID)+1 From secRoleGroups),(select GrpID from SecGroups where grpCode='CD_SCHEME_DEALERGROUP_VIEW'),(select RoleID from secRoles where RoleCd='CD_SCHEME_DEALERGROUP_VIEW'), 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				Insert into secRoleGroups Values ((select MAX(RoleGrpID)+1 From secRoleGroups),(select GrpID from SecGroups where grpCode='CD_SCHEME_DEALERGROUP_MAKER'),(select RoleID from secRoles where RoleCd='CD_SCHEME_DEALERGROUP_MAKER'), 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				Insert into secRoleGroups Values ((select MAX(RoleGrpID)+1 From secRoleGroups),(select GrpID from SecGroups where grpCode='CD_SCHEME_DEALERGROUP_APPROVER'),(select RoleID from secRoles where RoleCd='CD_SCHEME_DEALERGROUP_APPROVER'), 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
				UPDATE SEQSECRIGHTS SET SEQNO = (SELECT MAX(RIGHTID) FROM SECRIGHTS);
				UPDATE SEQSECGROUPS SET SEQNO = (SELECT MAX(GRPID)  FROM SECGROUPS);
				UPDATE SEQSECROLES SET SEQNO = (SELECT MAX(ROLEID)  FROM SECROLES);
				UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID)  FROM SECGROUPRIGHTS);
				UPDATE SEQSECROLEGROUPS SET SEQNO = (SELECT MAX(ROLEGRPID)  FROM SECROLEGROUPS);
			]]>
		</sql>
	</changeSet>

	<changeSet id="10.1" author="Nageswar.p">
		<createView viewName="CD_DealerMapping_VIEW"
			replaceIfExists="true">
 			SELECT t1.dealerMapId,
    			t1.MerchantId,
   				t1.storeId,
    			t1.dealerCode,
    			t1.active,
          		t2.merchantName,
          		t2.storeName As storeName,
          		t2.storeCity As storeCity,
          		t2.STOREADDRESSLINE1 As storeAddress,
    			t1.version,
    			t1.lastmntby,
    			t1.lastmnton,
    			t1.recordstatus,
   				t1.rolecode,
    			t1.nextrolecode,
    			t1.taskid,
    			t1.nexttaskid,
    			t1.recordtype,
    			t1.workflowid
   			FROM CD_DealerMapping_Temp t1 
         	left outer  Join Cd_Merchants t2 on t1.storeId = t2.storeId
			UNION ALL
 			SELECT t1.dealerMapId,
    			t1.MerchantId,
   				t1.storeId,
    			t1.dealerCode,
    			t1.active,  
          		t2.merchantName,
          		t2.storeName As storeName,
          		t2.storeCity As storeCity,
          		t2.STOREADDRESSLINE1 As storeAddress,
    			t1.version,
    			t1.lastmntby,
    			t1.lastmnton,
    			t1.recordstatus,
   				t1.rolecode,
    			t1.nextrolecode,
    			t1.taskid,
    			t1.nexttaskid,
    			t1.recordtype,
    			t1.workflowid
   			FROM CD_DealerMapping t1 
        	left outer Join Cd_Merchants t2 on  t1.storeId = t2.storeId
  			WHERE NOT (EXISTS (SELECT 1
            FROM CD_DealerMapping_Temp  
            WHERE CD_DealerMapping_Temp.dealerMapId = t1.dealerMapId))
		</createView>
	</changeSet>

	<changeSet id="11" author="vijaya.a" dbms="postgresql, oracle">
		<createSequence sequenceName="SEQCD_Scheme_ProductGroup" />
	</changeSet>

	<changeSet id="11.1" author="vijaya.a" dbms="mssql">
		<createTable tableName="SEQCD_Scheme_ProductGroup">
			<column name="SeqNo" type="bigint" autoIncrement="true" />
			<column name="Value" type="int"></column>
		</createTable>
	</changeSet>

	<changeSet id="11.2" author="vijaya.a">
		<createTable tableName="CD_Scheme_ProductGroup">
			<column name="SchemeProductGroupId" type="int">
				<constraints nullable="false" primaryKey="true"
					primaryKeyName="PK_CD_SCHM_PRODUCTGROUPID_ID" />
			</column>
			<column name="PromotionId" type="varchar(20)">
			</column>
			<column name="ProductGroupCode" type="int">
			</column>
			<column name="POSVendor" type="bit">
			</column>
			<column name="Active" type="bit">
			</column>
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkflowId" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet id="11.3" author="vijaya.a">
		<createTable tableName="CD_Scheme_ProductGroup_Temp">
			<column name="SchemeProductGroupId" type="int">
				<constraints nullable="false" primaryKey="true"
					primaryKeyName="PK_CD_SCHM_PRDCTGRPID_Temp_ID" />
			</column>
			<column name="PromotionId" type="varchar(20)">
			</column>
			<column name="ProductGroupCode" type="int">
			</column>
			<column name="POSVendor" type="bit">
			</column>
			<column name="Active" type="bit">
			</column>
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkflowId" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet id="11.3_post" author="vijaya.a">
		<addUniqueConstraint tableName="CD_SCHEME_PRODUCTGROUP_TEMP"
			columnNames="ProductGroupCode" constraintName="UK_CDSCHM_PRDCTGRP_TEMP_CODE" />
		<addUniqueConstraint tableName="CD_SCHEME_PRODUCTGROUP"
			columnNames="ProductGroupCode" constraintName="UK_CD_SCHEME_PRDCTGRP_CODE" />
	</changeSet>

	<changeSet id="11.4" author="vijaya.a">
		<createView viewName="CD_Scheme_ProductGroup_VIEW"
			replaceIfExists="true">
			SELECT t1.schemeProductGroupId,
				t1.promotionId,
    			t1.productGroupCode,
    			t1.pOSVendor,
   				t1.active,     
    			t1.version,
    			t1.lastmntby,
    			t1.lastmnton,
    			t1.recordstatus,
   				t1.rolecode,
    			t1.nextrolecode,
    			t1.taskid,
    			t1.nexttaskid,
    			t1.recordtype,
    			t1.workflowid
   			FROM CD_Scheme_ProductGroup_Temp t1
			UNION ALL
 			SELECT t1.schemeProductGroupId,
				t1.promotionId,
    			t1.productGroupCode,
    			t1.pOSVendor,
   				t1.active,     
    			t1.version,
    			t1.lastmntby,
    			t1.lastmnton,
    			t1.recordstatus,
   				t1.rolecode,
    			t1.nextrolecode,
    			t1.taskid,
    			t1.nexttaskid,
    			t1.recordtype,
    			t1.workflowid
   			FROM CD_Scheme_ProductGroup t1
  			WHERE NOT (EXISTS ( SELECT 1
            FROM CD_Scheme_ProductGroup_Temp
            WHERE CD_Scheme_ProductGroup_Temp.schemeProductGroupId = t1.schemeProductGroupId))
		</createView>
	</changeSet>

	<changeSet id="11.5" author="vijaya.a">
		<createView viewName="CD_Scheme_ProductGroup_AVIEW"
			replaceIfExists="true">
			SELECT t1.schemeProductGroupId,
				t1.promotionId,
    			t1.productGroupCode,
    			t1.pOSVendor,
   				t1.active,     
    			t1.version,
    			t1.lastmntby,
    			t1.lastmnton,
    			t1.recordstatus,
   				t1.rolecode,
    			t1.nextrolecode,
    			t1.taskid,
    			t1.nexttaskid,
    			t1.recordtype,
    			t1.workflowid
   			FROM CD_Scheme_ProductGroup t1
		</createView>
	</changeSet>

	<changeSet id="11.6" author="vijaya.a">
		<createView viewName="CD_Scheme_ProductGroup_TVIEW"
			replaceIfExists="true">
			  SELECT t1.schemeProductGroupId,
				t1.promotionId,
    			t1.productGroupCode,
    			t1.pOSVendor,
   				t1.active,     
    			t1.version,
    			t1.lastmntby,
    			t1.lastmnton,
    			t1.recordstatus,
   				t1.rolecode,
    			t1.nextrolecode,
    			t1.taskid,
    			t1.nexttaskid,
    			t1.recordtype,
    			t1.workflowid
   			FROM CD_Scheme_ProductGroup_Temp t1
		</createView>
	</changeSet>

	<changeSet id="11.7" author="vijaya.a">
		<sql>
			<![CDATA[
				UPDATE SEQSECRIGHTS SET SEQNO = (SELECT MAX(RIGHTID) FROM SECRIGHTS);
				UPDATE SEQSECGROUPS SET SEQNO = (SELECT MAX(GRPID)  FROM SECGROUPS);
				UPDATE SEQSECROLES SET SEQNO = (SELECT MAX(ROLEID)  FROM SECROLES);
				UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);
				UPDATE SEQSECROLEGROUPS SET SEQNO = (SELECT MAX(ROLEGRPID) FROM SECROLEGROUPS);
				
				INSERT INTO SecRoles  VALUES ((select max(roleid)+1 from secroles), 1, 'CD_SCHEME_PRODUCTGROUP_VIEW', 'Role for scheme product group enquiry', NULL, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SecRoles  VALUES ((select max(roleid)+1 from secroles), 1, 'CD_SCHEME_PRODUCTGROUP_MAKER', 'Role for scheme product group maker',	NULL, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0) ;
				INSERT INTO SecRoles  VALUES ((select max(roleid)+1 from secroles), 1, 'CD_SCHEME_PRODUCTGROUP_APPROVER', 'Role for scheme product group approver', NULL, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0) ;
								
				INSERT INTO SecGroups Values ((Select MAX(GrpID)+1 From SecGroups), 'CD_SCHEME_PRODUCTGROUP_VIEW', 'Group for scheme product group enquiry', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SecGroups Values ((Select MAX(GrpID)+1 From SecGroups), 'CD_SCHEME_PRODUCTGROUP_MAKER', 'Group for scheme product group maker', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SecGroups Values ((Select MAX(GrpID)+1 From SecGroups), 'CD_SCHEME_PRODUCTGROUP_APPROVER', 'Group for scheme product group approver', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),0, 'menuItem_CDSchemeProductGroup','MENU', 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),2, 'button_CDSchemeProductGroupList_PrintList','CDSchemeProductGroupList', 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),2, 'button_CDSchemeProductGroupList_NewSchemeProductGroup','CDSchemeProductGroupList', 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),2, 'button_CDSchemeProductGroupDialogue_btnNew','CDSchemeProductGroupDialogue', 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),2, 'button_CDSchemeProductGroupDialogue_btnEdit','CDSchemeProductGroupDialogue', 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),2, 'button_CDSchemeProductGroupDialogue_btnDelete','CDSchemeProductGroupDialogue', 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),2, 'button_CDSchemeProductGroupDialogue_btnSave','CDSchemeProductGroupDialogue', 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'CDSchemeProductGroupDialogue_SchemeId', 'CDSchemeProductGroupDialogue', 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'CDSchemeProductGroupDialogue_ProductGroupCode','CDSchemeProductGroupDialogue',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'CDSchemeProductGroupDialogue_POSVendor','CDSchemeProductGroupDialogue',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'CDSchemeProductGroupDialogue_Active','CDSchemeProductGroupDialogue',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_SCHEME_PRODUCTGROUP_VIEW'), (Select RightID from SecRights where RightName = 'button_CDSchemeProductGroupList_PrintList'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_SCHEME_PRODUCTGROUP_MAKER'), (Select RightID from SecRights where RightName = 'menuItem_CDSchemeProductGroup'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_SCHEME_PRODUCTGROUP_MAKER'), (Select RightID from SecRights where RightName = 'button_CDSchemeProductGroupList_PrintList'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_SCHEME_PRODUCTGROUP_MAKER'), (Select RightID from SecRights where RightName = 'button_CDSchemeProductGroupList_NewSchemeProductGroup'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_SCHEME_PRODUCTGROUP_MAKER'), (Select RightID from SecRights where RightName = 'CDSchemeProductGroupDialogue_SchemeId'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_SCHEME_PRODUCTGROUP_MAKER'), (Select RightID from SecRights where RightName = 'CDSchemeProductGroupDialogue_ProductGroupCode'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_SCHEME_PRODUCTGROUP_MAKER'), (Select RightID from SecRights where RightName = 'CDSchemeProductGroupDialogue_POSVendor'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_SCHEME_PRODUCTGROUP_MAKER'), (Select RightID from SecRights where RightName = 'CDSchemeProductGroupDialogue_Active'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_SCHEME_PRODUCTGROUP_MAKER'), (Select RightID from SecRights where RightName = 'button_CDSchemeProductGroupDialogue_btnNew'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_SCHEME_PRODUCTGROUP_MAKER'), (Select RightID from SecRights where RightName = 'button_CDSchemeProductGroupDialogue_btnEdit'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_SCHEME_PRODUCTGROUP_MAKER'), (Select RightID from SecRights where RightName = 'button_CDSchemeProductGroupDialogue_btnDelete'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_SCHEME_PRODUCTGROUP_MAKER'), (Select RightID from SecRights where RightName = 'button_CDSchemeProductGroupDialogue_btnSave'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_SCHEME_PRODUCTGROUP_APPROVER'), (Select RightID from SecRights where RightName = 'menuItem_CDSchemeProductGroup'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_SCHEME_PRODUCTGROUP_APPROVER'), (Select RightID from SecRights where RightName = 'button_CDSchemeProductGroupList_PrintList'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_SCHEME_PRODUCTGROUP_APPROVER'), (Select RightID from SecRights where RightName = 'button_CDSchemeProductGroupDialogue_btnSave'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				Insert into secRoleGroups Values ((select MAX(RoleGrpID)+1 From secRoleGroups),(select GrpID from SecGroups where grpCode='CD_SCHEME_PRODUCTGROUP_VIEW'),(select RoleID from secRoles where RoleCd='CD_SCHEME_PRODUCTGROUP_VIEW'), 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				Insert into secRoleGroups Values ((select MAX(RoleGrpID)+1 From secRoleGroups),(select GrpID from SecGroups where grpCode='CD_SCHEME_PRODUCTGROUP_MAKER'),(select RoleID from secRoles where RoleCd='CD_SCHEME_PRODUCTGROUP_MAKER'), 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				Insert into secRoleGroups Values ((select MAX(RoleGrpID)+1 From secRoleGroups),(select GrpID from SecGroups where grpCode='CD_SCHEME_PRODUCTGROUP_APPROVER'),(select RoleID from secRoles where RoleCd='CD_SCHEME_PRODUCTGROUP_APPROVER'), 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
				UPDATE SEQSECRIGHTS SET SEQNO = (SELECT MAX(RIGHTID) FROM SECRIGHTS);
				UPDATE SEQSECGROUPS SET SEQNO = (SELECT MAX(GRPID)  FROM SECGROUPS);
				UPDATE SEQSECROLES SET SEQNO = (SELECT MAX(ROLEID)  FROM SECROLES);
				UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID)  FROM SECGROUPRIGHTS);
				UPDATE SEQSECROLEGROUPS SET SEQNO = (SELECT MAX(ROLEGRPID)  FROM SECROLEGROUPS);
			]]>
		</sql>
	</changeSet>

	<changeSet id="11" author="Nageswar.p" dbms="postgresql, oracle">
		<createSequence sequenceName="SEQTRANSACTIONMAPPING" />
	</changeSet>

	<changeSet id="11.1" author="Nageswar.p" dbms="mssql">
		<createTable tableName="SEQTRANSACTIONMAPPING">
			<column name="SeqNo" type="bigint" autoIncrement="true" />
			<column name="Value" type="int"></column>
		</createTable>
	</changeSet>

	<changeSet id="11.2.1" author="Nageswar.p">
		<createTable tableName="TransactionMapping">
			<column name="Id" type="int">
				<constraints nullable="false" primaryKey="true"
					primaryKeyName="TransactionMapping_PK_ID" />
			</column>
			<column name="POSId" type="int">
				<constraints nullable="false" />
			</column>
			<column name="DealerCode" type="int">
				<constraints nullable="false" />
			</column>
			<column name="DealerName" type="varchar2(100)">
			</column>
			<column name="MID" type="int">
				<constraints nullable="false" />
			</column>
			<column name="TID" type="number(6)" />
			<column name="Active" type="boolean">
			</column>
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkflowId" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet id="11.3.1" author="Nageswar.p">
		<createTable tableName="TransactionMapping_Temp">
			<column name="Id" type="int">
				<constraints nullable="false" primaryKey="true"
					primaryKeyName="TransactionMapping_Temp_PK_ID" />
			</column>
			<column name="POSId" type="int">
				<constraints nullable="false" />
			</column>
			<column name="DealerCode" type="int">
				<constraints nullable="false" />
			</column>
			<column name="DealerName" type="varchar2(100)">
			</column>
			<column name="MID" type="int">
				<constraints nullable="false" />
			</column>
			<column name="TID" type="number(6)" />
			<column name="Active" type="boolean">
			</column>
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkflowId" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet id="11.4" author="Nageswar.p">
		<createView viewName="TransactionMapping_VIEW"
			replaceIfExists="true">
			 SELECT t1.Id,
    			t1.POSId,
   				t1.DealerCode,
    			t1.DealerName,
    			t1.MID,
    			t1.TID,
    			t1.active,     
    			t1.version,
    			t1.lastmntby,
    			t1.lastmnton,
    			t1.recordstatus,
   				t1.rolecode,
    			t1.nextrolecode,
    			t1.taskid,
    			t1.nexttaskid,
    			t1.recordtype,
    			t1.workflowid
   			FROM TransactionMapping_Temp t1
			UNION ALL
 			SELECT t1.Id,
    			t1.POSId,
   				t1.DealerCode,
    			t1.DealerName,
    			t1.MID,
    			t1.TID,
    			t1.active,     
    			t1.version,
    			t1.lastmntby,
    			t1.lastmnton,
    			t1.recordstatus,
   				t1.rolecode,
    			t1.nextrolecode,
    			t1.taskid,
    			t1.nexttaskid,
    			t1.recordtype,
    			t1.workflowid
   			FROM TransactionMapping t1
  			WHERE NOT (EXISTS ( SELECT 1
            FROM TransactionMapping_Temp
            WHERE TransactionMapping_Temp.Id = t1.Id))
		</createView>
	</changeSet>

	<changeSet id="11.5" author="Nageswar.b">
		<createView viewName="TransactionMapping_AVIEW"
			replaceIfExists="true">
			  SELECT t1.Id,
    			t1.POSId,
   				t1.DealerCode,
    			t1.DealerName,
    			t1.MID,
    			t1.TID,
    			t1.active,     
    			t1.version,
    			t1.lastmntby,
    			t1.lastmnton,
    			t1.recordstatus,
   				t1.rolecode,
    			t1.nextrolecode,
    			t1.taskid,
    			t1.nexttaskid,
    			t1.recordtype,
    			t1.workflowid
   			FROM TransactionMapping t1
		</createView>
	</changeSet>

	<changeSet id="11.6" author="Nageswar.p">
		<createView viewName="TransactionMapping_TVIEW"
			replaceIfExists="true">
			 SELECT t1.Id,
    			t1.POSId,
   				t1.DealerCode,
    			t1.DealerName,
    			t1.MID,
    			t1.TID,
    			t1.active,     
    			t1.version,
    			t1.lastmntby,
    			t1.lastmnton,
    			t1.recordstatus,
   				t1.rolecode,
    			t1.nextrolecode,
    			t1.taskid,
    			t1.nexttaskid,
    			t1.recordtype,
    			t1.workflowid
   			FROM TransactionMapping_Temp t1
		</createView>
	</changeSet>
	<changeSet id="11.7" author="Nageswar.p">
		<sql>
			<![CDATA[
				UPDATE SEQSECRIGHTS SET SEQNO = (SELECT MAX(RIGHTID) FROM SECRIGHTS);
				UPDATE SEQSECGROUPS SET SEQNO = (SELECT MAX(GRPID)  FROM SECGROUPS);
				UPDATE SEQSECROLES SET SEQNO = (SELECT MAX(ROLEID)  FROM SECROLES);
				UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);
				UPDATE SEQSECROLEGROUPS SET SEQNO = (SELECT MAX(ROLEGRPID) FROM SECROLEGROUPS);
				
				INSERT INTO SecRoles  VALUES ((select max(roleid)+1 from secroles), 1, 'TRANSACTIONMAPPING_VIEW', 'Role for Transaction Mapping enquiry',	NULL, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL,NULL, 0);
				INSERT INTO SecRoles  VALUES ((select max(roleid)+1 from secroles), 1, 'TRANSACTIONMAPPING_MAKER', 'Role for Transaction Mapping maker',	NULL, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL,NULL,NULL,NULL,NULL,0) ;
				INSERT INTO SecRoles  VALUES ((select max(roleid)+1 from secroles), 1, 'TRANSACTIONMAPPING_APPROVER', 'Role for Transaction Mapping approver',	NULL, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL,NULL,NULL,NULL,NULL,0) ;
							
				INSERT INTO SecGroups Values ((Select MAX(GrpID)+1 From SecGroups), 'TRANSACTIONMAPPING_VIEW', 'Group for Transaction Mapping enquiry', 	1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL,NULL, 0);
				INSERT INTO SecGroups Values ((Select MAX(GrpID)+1 From SecGroups), 'TRANSACTIONMAPPING_MAKER', 'Group for Transaction Mapping maker', 		1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL,NULL, 0);
				INSERT INTO SecGroups Values ((Select MAX(GrpID)+1 From SecGroups), 'TRANSACTIONMAPPING_APPROVER', 'Group for Transaction Mapping approver', 	1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL,NULL, 0);
				
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),0, 'menu_Item_TransactionMapping','MENU',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),2, 'button_TransactionMappingList_PrintList','TransactionMappingList',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),2, 'button_TransactionMappingList_NewTransactionMapping','TransactionMappingList',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),2, 'button_TransactionMappingDialog_btnNew','TransactionMappingDialog',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),2, 'button_TransactionMappingDialog_btnEdit','TransactionMappingDialog',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),2, 'button_TransactionMappingDialog_btnDelete','TransactionMappingDialog',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),2, 'button_TransactionMappingDialog_btnSave','TransactionMappingDialog',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'TransactionMapping_DealerCode','TransactionMappingDialog',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'TransactionMappingDialog_POSId','TransactionMappingDialog',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'TransactionMappingDialog_DealerName','TransactionMappingDialog',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'TransactionMappingDialog_MID','TransactionMappingDialog',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'TransactionMappingDialog_TID','TransactionMappingDialog',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'TransactionMappingDialog_Active','TransactionMappingDialog',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'TRANSACTIONMAPPING_VIEW'), (Select RightID from SecRights where RightName = 'button_TransactionMappingList_PrintList'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'TRANSACTIONMAPPING_MAKER'), (Select RightID from SecRights where RightName = 'menu_Item_TransactionMapping'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'TRANSACTIONMAPPING_MAKER'), (Select RightID from SecRights where RightName = 'button_TransactionMappingList_PrintList'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'TRANSACTIONMAPPING_MAKER'), (Select RightID from SecRights where RightName = 'button_TransactionMappingList_NewTransactionMapping'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'TRANSACTIONMAPPING_MAKER'), (Select RightID from SecRights where RightName = 'button_TransactionMappingDialog_btnNew'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'TRANSACTIONMAPPING_MAKER'), (Select RightID from SecRights where RightName = 'button_TransactionMappingDialog_btnEdit'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'TRANSACTIONMAPPING_MAKER'), (Select RightID from SecRights where RightName = 'button_TransactionMappingDialog_btnDelete'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'TRANSACTIONMAPPING_MAKER'), (Select RightID from SecRights where RightName = 'button_TransactionMappingDialog_btnSave'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'TRANSACTIONMAPPING_MAKER'), (Select RightID from SecRights where RightName = 'TransactionMapping_DealerCode'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'TRANSACTIONMAPPING_MAKER'), (Select RightID from SecRights where RightName = 'TransactionMappingDialog_POSId'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'TRANSACTIONMAPPING_MAKER'), (Select RightID from SecRights where RightName = 'TransactionMappingDialog_DealerName'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'TRANSACTIONMAPPING_MAKER'), (Select RightID from SecRights where RightName = 'TransactionMappingDialog_MID'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'TRANSACTIONMAPPING_MAKER'), (Select RightID from SecRights where RightName = 'TransactionMappingDialog_TID'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'TRANSACTIONMAPPING_MAKER'), (Select RightID from SecRights where RightName = 'TransactionMappingDialog_Active'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'TRANSACTIONMAPPING_APPROVER'), (Select RightID from SecRights where RightName = 'menu_Item_TransactionMapping'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'TRANSACTIONMAPPING_APPROVER'), (Select RightID from SecRights where RightName = 'button_TransactionMappingList_PrintList'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'TRANSACTIONMAPPING_APPROVER'), (Select RightID from SecRights where RightName = 'button_TransactionMappingDialog_btnSave'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				Insert into secRoleGroups Values ((select MAX(RoleGrpID)+1 From secRoleGroups),(select GrpID from SecGroups where grpCode='TRANSACTIONMAPPING_VIEW'),(select RoleID from secRoles where RoleCd='TRANSACTIONMAPPING_VIEW'), 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				Insert into secRoleGroups Values ((select MAX(RoleGrpID)+1 From secRoleGroups),(select GrpID from SecGroups where grpCode='TRANSACTIONMAPPING_MAKER'),(select RoleID from secRoles where RoleCd='TRANSACTIONMAPPING_MAKER'), 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				Insert into secRoleGroups Values ((select MAX(RoleGrpID)+1 From secRoleGroups),(select GrpID from SecGroups where grpCode='TRANSACTIONMAPPING_APPROVER'),(select RoleID from secRoles where RoleCd='TRANSACTIONMAPPING_APPROVER'), 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
				UPDATE SEQSECRIGHTS SET SEQNO = (SELECT MAX(RIGHTID) FROM SECRIGHTS);
				UPDATE SEQSECGROUPS SET SEQNO = (SELECT MAX(GRPID)  FROM SECGROUPS);
				UPDATE SEQSECROLES SET SEQNO = (SELECT MAX(ROLEID)  FROM SECROLES);
				UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID)  FROM SECGROUPRIGHTS);
				UPDATE SEQSECROLEGROUPS SET SEQNO = (SELECT MAX(ROLEGRPID)  FROM SECROLEGROUPS);
			]]>
		</sql>
	</changeSet>

	<changeSet id="11.8" author="Nageswar.p">
		<sql>
			<![CDATA[ 
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'TransactionMappingDialog_DealerCode',
				'TransactionMappingDialog',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where
				 GrpCode = 'TRANSACTIONMAPPING_MAKER'), (Select RightID from SecRights where RightName = 'TransactionMappingDialog_DealerCode'), 
				 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="12" author="Vijaya.a">
		<sql>
			<![CDATA[ 
				alter table ProductGroup modify (channel Varchar(20));
				alter table ProductGroup_Temp modify (channel Varchar(20));
				alter table DealerGroupId modify (channel Varchar(20));
				alter table DealerGroupId_Temp modify (channel Varchar(20));
			]]>
		</sql>
	</changeSet>

	<changeSet id="13" author="vijaya.a">
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='SETTLEMENT_REQUEST_UPLOAD');
				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='SETTLEMENT_REQUEST_UPLOAD');
				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='SETTLEMENT_REQUEST_UPLOAD';

				DELETE FROM DATA_ENGINE_COLUMN where TABLEID IN (select ID from DATA_ENGINE_TABLE WHERE CONFIGID = (select ID from DATA_ENGINE_CONFIG where Name = 'SETTLEMENT_REQUEST_UPLOAD'));
				DELETE FROM DATA_ENGINE_TABLE where CONFIGID IN (select ID from DATA_ENGINE_CONFIG where Name = 'SETTLEMENT_REQUEST_UPLOAD');
				DELETE FROM DATA_ENGINE_CONFIG where Name = 'SETTLEMENT_REQUEST_UPLOAD';

				INSERT INTO DATA_ENGINE_CONFIG VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'SETTLEMENT_REQUEST_UPLOAD', 'Settlement process upload', 12, 'SettlementProcess', NULL, NULL, NULL , 0, 0, NULL, 'SettlementRef, CustomerRef, EMIOffer, SubPayByManfacturer, SubvensionAmount, CustName, CustMobile, CustAddress, CustEmail, StoreName, StoreAddress, StoreCity, StoreState, Issuer, Category, Description, Serial, Manufacturer, TransactionAmount, Acquirer, ManufactureId, TerminalId, SettlementBatch, BankInvoice, AuthCode, HostReference, TransactionDateTime, SettlementDateTime, BillingInvoice, TransactionStatus, Reason, ProductCategory, ProductSubCategory1, ProductSubCategory2, ModelName, MaxValueOfProduct, MerchantName', '', 'A', '/opt/PFF/SettlementProcess', 'Settlement_', '.xls', 0, NULL, '${ddMMYYYYHms}', NULL, 0, NULL, 1, 1); 
				INSERT INTO DATA_ENGINE_TABLE  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'SETTLEMENT_REQUEST_UPLOAD'), 'SETTLEMENT_UPLOAD',  0, 'EMIId', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 0, 0, 0);

				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'SETTLEMENT_UPLOAD' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'SETTLEMENT_REQUEST_UPLOAD')), 'SettlementRef', 0, 'N', NULL, NULL, NULL, NULL, 0, NULL, NULL, NULL, NULL, 'M');
  				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'SETTLEMENT_UPLOAD' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'SETTLEMENT_REQUEST_UPLOAD')), 'CustomerRef', 0, 'N', NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'SETTLEMENT_UPLOAD' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'SETTLEMENT_REQUEST_UPLOAD')), 'EMIOffer', 0, 'N', NULL, NULL, NULL, NULL, 2, NULL, NULL, NULL, NULL, 'O');	
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'SETTLEMENT_UPLOAD' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'SETTLEMENT_REQUEST_UPLOAD')), 'SubPayByManfacturer', 0, 'N', NULL, NULL, NULL, NULL, 3, NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'SETTLEMENT_UPLOAD' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'SETTLEMENT_REQUEST_UPLOAD')), 'SubvensionAmount', 0, 'N', NULL, NULL, NULL, NULL, 4, NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'SETTLEMENT_UPLOAD' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'SETTLEMENT_REQUEST_UPLOAD')), 'CustName', 0, 'N', NULL, NULL, NULL, NULL, 5, NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'SETTLEMENT_UPLOAD' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'SETTLEMENT_REQUEST_UPLOAD')), 'CustMobile', 0, 'N', NULL, NULL, NULL, NULL, 6, NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'SETTLEMENT_UPLOAD' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'SETTLEMENT_REQUEST_UPLOAD')), 'CustAddress', 0, 'N', NULL, NULL, NULL, NULL, 7, NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'SETTLEMENT_UPLOAD' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'SETTLEMENT_REQUEST_UPLOAD')), 'CustEmail', 0, 'N', NULL, NULL, NULL, NULL, 8, NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'SETTLEMENT_UPLOAD' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'SETTLEMENT_REQUEST_UPLOAD')), 'StoreName', 0, 'N', NULL, NULL, NULL, NULL, 9, NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'SETTLEMENT_UPLOAD' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'SETTLEMENT_REQUEST_UPLOAD')), 'StoreAddress', 0, 'N', NULL, NULL, NULL, NULL, 10, NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'SETTLEMENT_UPLOAD' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'SETTLEMENT_REQUEST_UPLOAD')), 'StoreCity', 0, 'N', NULL, NULL, NULL, NULL, 11, NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'SETTLEMENT_UPLOAD' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'SETTLEMENT_REQUEST_UPLOAD')), 'StoreState', 0, 'N', NULL, NULL, NULL, NULL, 12, NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'SETTLEMENT_UPLOAD' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'SETTLEMENT_REQUEST_UPLOAD')), 'Issuer', 0, 'N', NULL, NULL, NULL, NULL, 13, NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'SETTLEMENT_UPLOAD' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'SETTLEMENT_REQUEST_UPLOAD')), 'Category', 0, 'N', NULL, NULL, NULL, NULL, 14, NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'SETTLEMENT_UPLOAD' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'SETTLEMENT_REQUEST_UPLOAD')), 'Description', 0, 'N', NULL, NULL, NULL, NULL, 15, NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'SETTLEMENT_UPLOAD' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'SETTLEMENT_REQUEST_UPLOAD')), 'Serial', 0, 'N', NULL, NULL, NULL, NULL, 16, NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'SETTLEMENT_UPLOAD' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'SETTLEMENT_REQUEST_UPLOAD')), 'Manufacturer', 0, 'N', NULL, NULL, NULL, NULL, 17, NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'SETTLEMENT_UPLOAD' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'SETTLEMENT_REQUEST_UPLOAD')), 'TransactionAmount', 0, 'N', NULL, NULL, NULL, NULL, 18, NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'SETTLEMENT_UPLOAD' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'SETTLEMENT_REQUEST_UPLOAD')), 'Acquirer', 0, 'N', NULL, NULL, NULL, NULL, 19, NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'SETTLEMENT_UPLOAD' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'SETTLEMENT_REQUEST_UPLOAD')), 'ManufactureId', 0, 'N', NULL, NULL, NULL, NULL, 20, NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'SETTLEMENT_UPLOAD' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'SETTLEMENT_REQUEST_UPLOAD')), 'TerminalId', 0, 'N', NULL, NULL, NULL, NULL, 21, NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'SETTLEMENT_UPLOAD' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'SETTLEMENT_REQUEST_UPLOAD')), 'SettlementBatch', 0, 'N', NULL, NULL, NULL, NULL, 22, NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'SETTLEMENT_UPLOAD' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'SETTLEMENT_REQUEST_UPLOAD')), 'BankInvoice', 0, 'N', NULL, NULL, NULL, NULL, 23, NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'SETTLEMENT_UPLOAD' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'SETTLEMENT_REQUEST_UPLOAD')), 'AuthCode', 0, 'N', NULL, NULL, NULL, NULL, 24, NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'SETTLEMENT_UPLOAD' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'SETTLEMENT_REQUEST_UPLOAD')), 'HostReference', 0, 'N', NULL, NULL, NULL, NULL, 25, NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'SETTLEMENT_UPLOAD' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'SETTLEMENT_REQUEST_UPLOAD')), 'TransactionDateTime', 0, 'N', NULL, NULL, NULL, NULL, 26, NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'SETTLEMENT_UPLOAD' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'SETTLEMENT_REQUEST_UPLOAD')), 'SettlementDateTime', 0, 'N', NULL, NULL, NULL, NULL, 27, NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'SETTLEMENT_UPLOAD' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'SETTLEMENT_REQUEST_UPLOAD')), 'BillingInvoice', 0, 'N', NULL, NULL, NULL, NULL, 28, NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'SETTLEMENT_UPLOAD' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'SETTLEMENT_REQUEST_UPLOAD')), 'TransactionStatus', 0, 'N', NULL, NULL, NULL, NULL, 29, NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'SETTLEMENT_UPLOAD' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'SETTLEMENT_REQUEST_UPLOAD')), 'Reason', 0, 'N', NULL, NULL, NULL, NULL, 30, NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'SETTLEMENT_UPLOAD' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'SETTLEMENT_REQUEST_UPLOAD')), 'ProductCategory', 0, 'N', NULL, NULL, NULL, NULL, 31, NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'SETTLEMENT_UPLOAD' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'SETTLEMENT_REQUEST_UPLOAD')), 'ProductSubCategory1', 0, 'N', NULL, NULL, NULL, NULL, 32, NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'SETTLEMENT_UPLOAD' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'SETTLEMENT_REQUEST_UPLOAD')), 'ProductSubCategory2', 0, 'N', NULL, NULL, NULL, NULL, 33, NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'SETTLEMENT_UPLOAD' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'SETTLEMENT_REQUEST_UPLOAD')), 'ModelName', 0, 'N', NULL, NULL, NULL, NULL, 34, NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'SETTLEMENT_UPLOAD' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'SETTLEMENT_REQUEST_UPLOAD')), 'MaxValueOfProduct', 0, 'N', NULL, NULL, NULL, NULL, 35, NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'SETTLEMENT_UPLOAD' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'SETTLEMENT_REQUEST_UPLOAD')), 'MerchantName', 0, 'N', NULL, NULL, NULL, NULL, 36, NULL, NULL, NULL, NULL, 'O');
				
				UPDATE SEQ_DATA_ENGINE_CONFIG SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_CONFIG);
				UPDATE SEQ_DATA_ENGINE_TABLE  SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_TABLE);
				UPDATE SEQ_DATA_ENGINE_COLUMN SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_COLUMN);
			]]>
		</sql>
	</changeSet>

	<changeSet id="14" author="vijaya.a">
		<createTable tableName="Settlement_Request">
			<column name="Id" type="bigint" autoIncrement="true">
				<constraints nullable="false" primaryKey="true"
					primaryKeyName="pk_settlement_request" />
			</column>
			<column name="RequestBatchId" type="bigint" />
			<column name="SettlementRef" type="varchar(50)">
				<constraints nullable="false" unique="true"
					uniqueConstraintName="uk_settlement_request_ref" />
			</column>
			<column name="CustomerRef" type="varchar(50)" />
			<column name="EMIOffer" type="varchar(50)" />
			<column name="SubPayByManfacturer" type="decimal(5, 2)" />
			<column name="SubvensionAmount" type="decimal(18, 0)" />
			<column name="CustName" type="varchar(100)" />
			<column name="CustAddress" type="varchar(100)" />
			<column name="CustMobile" type="varchar(20)" />
			<column name="CustEmail" type="varchar(50)" />
			<column name="StoreName" type="varchar(100)" />
			<column name="StoreAddress" type="varchar(100)" />
			<column name="StoreCountry" type="varchar(50)" />
			<column name="StoreState" type="varchar(50)" />
			<column name="StoreCity" type="varchar(50)" />
			<column name="Issuer" type="varchar(50)" />
			<column name="Category" type="varchar(50)" />
			<column name="Description" type="varchar(200)" />
			<column name="Serial" type="varchar(100)" />
			<column name="Manufacturer" type="varchar(50)" />
			<column name="TransactionAmount" type="decimal(18, 0)" />
			<column name="Acquirer" type="varchar(100)" />
			<column name="ManuFactureId" type="bigint" />
			<column name="TerminalId" type="varchar(20)" />
			<column name="SettlementBatch" type="varchar(50)" />
			<column name="BankInvoice" type="varchar(50)" />
			<column name="AuthCode" type="varchar(10)" />
			<column name="HostReference" type="varchar(20)" />
			<column name="TransactionDateTime" type="datetime" />
			<column name="SettlementDateTime" type="datetime" />
			<column name="BillingInvoice" type="varchar(50)" />
			<column name="TransactionStatus" type="varchar(50)" />
			<column name="Reason" type="varchar(50)" />
			<column name="ProductCategory" type="varchar2(100)" />
			<column name="ProductSubCategory1" type="varchar(100)" />
			<column name="ProductSubCategory2" type="varchar(100)" />
			<column name="ModelName" type="varchar2(50)" />
			<column name="MaxValueOfProduct" type="decimal(18,0)" />
			<column name="MerchantName" type="varchar(50)" />
		</createTable>
	</changeSet>

	<changeSet id="15" author="vijaya.a">
		<createView viewName="SETTLEMENT_REQUEST_VIEW"
			replaceIfExists="true">
			SELECT DISTINCT(DS.ID), 
				DC.NAME, 
			  	DC.UPLOADPATH FILELOCATION, 
			  	DS.FILENAME, 
			  	DS.ENDTIME, 
			  	DS.STATUS, 
			  	DC.Id As ConfigId,
			  	DC.PostEvent,
				SR.HOSTREFERENCE, 
				SR.CUSTOMERREF, 
				SR.TRANSACTIONAMOUNT,
				SR.TRANSACTIONDATETIME, 
				SR.MERCHANTNAME, 
				SR.TERMINALID, 
				SR.MANUFACTUREID,
				SR.REQUESTBATCHID, 
				SR.ID As SettlementId
			FROM DATA_ENGINE_CONFIG DC
			INNER JOIN DATA_ENGINE_STATUS DS ON DS.NAME = DC.NAME 
			INNER JOIN SETTLEMENT_REQUEST SR ON SR.REQUESTBATCHID=DS.ID
		</createView>
	</changeSet>

	<changeSet id="16" author="vijaya.a">
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='SETTLEMENT_REQUEST_DOWNLOAD');
				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='SETTLEMENT_REQUEST_DOWNLOAD');
				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='SETTLEMENT_REQUEST_DOWNLOAD';

				DELETE FROM DATA_ENGINE_COLUMN where TABLEID IN (select ID from DATA_ENGINE_TABLE WHERE CONFIGID = (select ID from DATA_ENGINE_CONFIG where Name = 'SETTLEMENT_REQUEST_DOWNLOAD'));
				DELETE FROM DATA_ENGINE_TABLE where CONFIGID IN (select ID from DATA_ENGINE_CONFIG where Name = 'SETTLEMENT_REQUEST_DOWNLOAD');
				DELETE FROM DATA_ENGINE_CONFIG where Name = 'SETTLEMENT_REQUEST_DOWNLOAD';
			
				Insert into  DATA_ENGINE_CONFIG  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM  DATA_ENGINE_CONFIG),'SETTLEMENT_REQUEST_DOWNLOAD','Settlement Process Download',3,null,null,null,',',0,0, null, 'ROW:{HOSTREFERENCE,CUSTOMERREF,TRANSACTIONAMOUNT,TRANSACTIONDATETIME,MERCHANTNAME,TERMINALID,MANUFACTUREID}',null,'A','/opt/PFF/SettlementProcess','${SETTLEMENT_PROCESS}','.xlsx','7',to_date('28-06-19','DD-MM-RR'),'${ddmm},.${SEQ_DATE_FILE}',null,'0','MOVE_TO_S3_BUCKET,COPY_TO_SFTP',1,1);
				Insert into  DATA_ENGINE_TABLE values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM  DATA_ENGINE_TABLE),(Select Id FROM  DATA_ENGINE_CONFIG WHERE Name = 'SETTLEMENT_REQUEST_DOWNLOAD'),'SETTLEMENT_REQUEST',0,'ID','REQUESTBATCHID IN (:REQUESTBATCHID)','',null,null,null,null,null,0,0,0);
				
				Insert into  DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM  DATA_ENGINE_COLUMN), (Select Id FROM  DATA_ENGINE_TABLE WHERE Name = 'SETTLEMENT_REQUEST' and CONFIGID = (Select Id FROM  DATA_ENGINE_CONFIG WHERE Name = 'SETTLEMENT_REQUEST_DOWNLOAD')), 'HOSTREFERENCE', 0,'N',null,'',  null,null,'0',null,null,null,null,'O');
				Insert into  DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM  DATA_ENGINE_COLUMN), (Select Id FROM  DATA_ENGINE_TABLE WHERE Name = 'SETTLEMENT_REQUEST' and CONFIGID = (Select Id FROM  DATA_ENGINE_CONFIG WHERE Name = 'SETTLEMENT_REQUEST_DOWNLOAD')),  'CUSTOMERREF', 0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into  DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM  DATA_ENGINE_COLUMN), (Select Id FROM  DATA_ENGINE_TABLE WHERE Name = 'SETTLEMENT_REQUEST' and CONFIGID = (Select Id FROM  DATA_ENGINE_CONFIG WHERE Name = 'SETTLEMENT_REQUEST_DOWNLOAD')),  'TRANSACTIONAMOUNT', 0,'N',null,'',  null,null,'0',null,null,null,null,'O');
				Insert into  DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM  DATA_ENGINE_COLUMN), (Select Id FROM  DATA_ENGINE_TABLE WHERE Name = 'SETTLEMENT_REQUEST' and CONFIGID = (Select Id FROM  DATA_ENGINE_CONFIG WHERE Name = 'SETTLEMENT_REQUEST_DOWNLOAD')), 'TRANSACTIONDATETIME', 0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into  DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM  DATA_ENGINE_COLUMN), (Select Id FROM  DATA_ENGINE_TABLE WHERE Name = 'SETTLEMENT_REQUEST' and CONFIGID = (Select Id FROM  DATA_ENGINE_CONFIG WHERE Name = 'SETTLEMENT_REQUEST_DOWNLOAD')),  'MERCHANTNAME', 0,'N',null,'',  null,null,'0',null,null,null,null,'O');
				Insert into  DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM  DATA_ENGINE_COLUMN), (Select Id FROM  DATA_ENGINE_TABLE WHERE Name = 'SETTLEMENT_REQUEST' and CONFIGID = (Select Id FROM  DATA_ENGINE_CONFIG WHERE Name = 'SETTLEMENT_REQUEST_DOWNLOAD')), 'TERMINALID', 0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into  DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM  DATA_ENGINE_COLUMN), (Select Id FROM  DATA_ENGINE_TABLE WHERE Name = 'SETTLEMENT_REQUEST' and CONFIGID = (Select Id FROM  DATA_ENGINE_CONFIG WHERE Name = 'SETTLEMENT_REQUEST_DOWNLOAD')), 'MANUFACTUREID', 0,'N',null,'',  null,null,'0',null,null,null,null,'O');
			]]>
		</sql>
	</changeSet>

	<changeSet id="17" author="vijaya.a">
		<sql>
			<![CDATA[
				UPDATE SEQSECRIGHTS SET SEQNO = (SELECT MAX(RIGHTID) FROM SECRIGHTS);
				UPDATE SEQSECGROUPS SET SEQNO = (SELECT MAX(GRPID)  FROM SECGROUPS);
				UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);
				UPDATE SEQSECROLEGROUPS SET SEQNO = (SELECT MAX(ROLEGRPID) FROM SECROLEGROUPS);
				
				INSERT INTO SecGroups Values ((Select MAX(GrpID)+1 From SecGroups), 'SETTLEMENTPROCESS_UPLOAD_VIEW', 'Group for settlement process upload enquiry', 	1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL,NULL, 0);
				INSERT INTO SecGroups Values ((Select MAX(GrpID)+1 From SecGroups), 'SETTLEMENTPROCESS_UPLOAD_MAKER', 'Group for settlement process upload maker', 		1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL,NULL, 0);
				INSERT INTO SecGroups Values ((Select MAX(GrpID)+1 From SecGroups), 'SETTLEMENTPROCESS_UPLOAD_APPROVER', 'Group for settlement process upload approver', 	1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL,NULL, 0);
				
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),0, 'menuItem_Settlement_Process_Upload','MENU',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'SETTLEMENTPROCESS_UPLOAD_MAKER'), (Select RightID from SecRights where RightName = 'menuItem_Settlement_Process_Upload'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'SETTLEMENTPROCESS_UPLOAD_APPROVER'), (Select RightID from SecRights where RightName = 'menuItem_Settlement_Process_Upload'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				UPDATE SEQSECRIGHTS SET SEQNO = (SELECT MAX(RIGHTID) FROM SECRIGHTS);
				UPDATE SEQSECGROUPS SET SEQNO = (SELECT MAX(GRPID)  FROM SECGROUPS);
				UPDATE SEQSECROLES SET SEQNO = (SELECT MAX(ROLEID)  FROM SECROLES);
				UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID)  FROM SECGROUPRIGHTS);
				UPDATE SEQSECROLEGROUPS SET SEQNO = (SELECT MAX(ROLEGRPID)  FROM SECROLEGROUPS);
			]]>
		</sql>
	</changeSet>

	<changeSet id="18" author="vijaya.a">
		<sql>
			<![CDATA[
				UPDATE SEQSECRIGHTS SET SEQNO = (SELECT MAX(RIGHTID) FROM SECRIGHTS);
				UPDATE SEQSECGROUPS SET SEQNO = (SELECT MAX(GRPID)  FROM SECGROUPS);
				UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);
				UPDATE SEQSECROLEGROUPS SET SEQNO = (SELECT MAX(ROLEGRPID) FROM SECROLEGROUPS);
				
				INSERT INTO SecGroups Values ((Select MAX(GrpID)+1 From SecGroups), 'SETTLEMENTPROCESS_DOWNLOAD_VIEW', 'Group for settlement process upload enquiry', 	1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL,NULL, 0);
				INSERT INTO SecGroups Values ((Select MAX(GrpID)+1 From SecGroups), 'SETTLEMENTPROCESS_DOWNLOAD_MAKER', 'Group for settlement process upload maker', 		1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL,NULL, 0);
				INSERT INTO SecGroups Values ((Select MAX(GrpID)+1 From SecGroups), 'SETTLEMENTPROCESS_DOWNLOAD_APPROVER', 'Group for settlement process upload approver', 	1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL,NULL, 0);
				
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),0, 'menuItem_Settlement_Process_Download','MENU',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'SETTLEMENTPROCESS_DOWNLOAD_MAKER'), (Select RightID from SecRights where RightName = 'menuItem_Settlement_Process_Download'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'SETTLEMENTPROCESS_DOWNLOAD_APPROVER'), (Select RightID from SecRights where RightName = 'menuItem_Settlement_Process_Download'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				UPDATE SEQSECRIGHTS SET SEQNO = (SELECT MAX(RIGHTID) FROM SECRIGHTS);
				UPDATE SEQSECGROUPS SET SEQNO = (SELECT MAX(GRPID)  FROM SECGROUPS);
				UPDATE SEQSECROLES SET SEQNO = (SELECT MAX(ROLEID)  FROM SECROLES);
				UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID)  FROM SECGROUPRIGHTS);
				UPDATE SEQSECROLEGROUPS SET SEQNO = (SELECT MAX(ROLEGRPID)  FROM SECROLEGROUPS);
			]]>
		</sql>
	</changeSet>

	<changeSet id="19" author="vijaya.a">
		<sql>
			<![CDATA[
				Update DATA_ENGINE_CONFIG set UploadLocation = 'C' Where name = 'SETTLEMENT_REQUEST_UPLOAD';
			]]>
		</sql>
	</changeSet>

	<changeSet id="20" author="vijaya.a">
		<sql>
			<![CDATA[
				Update SMTPARAMETERS set SYSPARMVALUE='Y' Where SYSPARMCODE='HOLD_DISB_INST_POST';
			]]>
		</sql>
	</changeSet>

	<changeSet id="22" author="vijaya.a">
		<sql>
			<![CDATA[
				Update DATA_ENGINE_CONFIG set SKIPHEADERROW = 1 Where Name = 'SETTLEMENT_REQUEST_UPLOAD';
			]]>
		</sql>
	</changeSet>

	<changeSet id="23" author="vijaya.a">
		<addColumn tableName="CD_Merchants_Temp">
			<column name="Pincode" type="varchar(8)" />
		</addColumn>
	</changeSet>

	<changeSet id="24" author="vijaya.a">
		<addColumn tableName="CD_Merchants">
			<column name="Pincode" type="varchar(8)" />
		</addColumn>
	</changeSet>

	<changeSet id="25" author="vijaya.a">
		<addColumn tableName="TransactionMapping_Temp">
			<column name="MobileNumber1" type="varchar(20)" />
		</addColumn>
		<addColumn tableName="TransactionMapping_Temp">
			<column name="MobileNumber2" type="varchar(20)" />
		</addColumn>
		<addColumn tableName="TransactionMapping_Temp">
			<column name="MobileNumber3" type="varchar(20)" />
		</addColumn>
	</changeSet>

	<changeSet id="26" author="vijaya.a">
		<addColumn tableName="TransactionMapping">
			<column name="MobileNumber1" type="varchar(20)" />
		</addColumn>
		<addColumn tableName="TransactionMapping">
			<column name="MobileNumber2" type="varchar(20)" />
		</addColumn>
		<addColumn tableName="TransactionMapping">
			<column name="MobileNumber3" type="varchar(20)" />
		</addColumn>
	</changeSet>

	<changeSet id="27" author="vijaya.a">
		<sql>
			<![CDATA[
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'MerchantDialogue_POSId','MerchantDialogue',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'CD_MERCHANT_MAKER'), (Select RightID from SecRights where RightName = 'MerchantDialogue_POSId'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="28" author="vijaya.a">
		<sql>
			<![CDATA[
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'TransactionMappingDialog_MobileNumber1','TransactionMappingDialog',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'TRANSACTIONMAPPING_MAKER'), (Select RightID from SecRights where RightName = 'TransactionMappingDialog_MobileNumber1'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);

				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'TransactionMappingDialog_MobileNumber2','TransactionMappingDialog',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'TRANSACTIONMAPPING_MAKER'), (Select RightID from SecRights where RightName = 'TransactionMappingDialog_MobileNumber2'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);

				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3, 'TransactionMappingDialog_MobileNumber3','TransactionMappingDialog',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'TRANSACTIONMAPPING_MAKER'), (Select RightID from SecRights where RightName = 'TransactionMappingDialog_MobileNumber3'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="29" author="vijaya.a">
		<createView viewName="TransactionMapping_VIEW"
			replaceIfExists="true">
			 SELECT t1.Id,
    			t1.POSId,
   				t1.DealerCode,
    			t1.DealerName,
    			t1.MID,
    			t1.TID,
    			t1.MobileNumber1,
    			t1.MobileNumber2,
    			t1.MobileNumber3,
    			t1.active,     
    			t1.version,
    			t1.lastmntby,
    			t1.lastmnton,
    			t1.recordstatus,
   				t1.rolecode,
    			t1.nextrolecode,
    			t1.taskid,
    			t1.nexttaskid,
    			t1.recordtype,
    			t1.workflowid
   			FROM TransactionMapping_Temp t1
			UNION ALL
 			SELECT t1.Id,
    			t1.POSId,
   				t1.DealerCode,
    			t1.DealerName,
    			t1.MID,
    			t1.TID,
    			t1.MobileNumber1,
    			t1.MobileNumber2,
    			t1.MobileNumber3,
    			t1.active,     
    			t1.version,
    			t1.lastmntby,
    			t1.lastmnton,
    			t1.recordstatus,
   				t1.rolecode,
    			t1.nextrolecode,
    			t1.taskid,
    			t1.nexttaskid,
    			t1.recordtype,
    			t1.workflowid
   			FROM TransactionMapping t1
  			WHERE NOT (EXISTS ( SELECT 1
            FROM TransactionMapping_Temp
            WHERE TransactionMapping_Temp.Id = t1.Id))
		</createView>
	</changeSet>

	<changeSet id="30" author="vijaya.a">
		<createView viewName="TransactionMapping_AVIEW"
			replaceIfExists="true">
			  SELECT t1.Id,
    			t1.POSId,
   				t1.DealerCode,
    			t1.DealerName,
    			t1.MID,
    			t1.TID,
    			t1.MobileNumber1,
    			t1.MobileNumber2,
    			t1.MobileNumber3,
    			t1.active,     
    			t1.version,
    			t1.lastmntby,
    			t1.lastmnton,
    			t1.recordstatus,
   				t1.rolecode,
    			t1.nextrolecode,
    			t1.taskid,
    			t1.nexttaskid,
    			t1.recordtype,
    			t1.workflowid
   			FROM TransactionMapping t1
		</createView>
	</changeSet>

	<changeSet id="31" author="vijaya.a">
		<createView viewName="TransactionMapping_TVIEW"
			replaceIfExists="true">
			 SELECT t1.Id,
    			t1.POSId,
   				t1.DealerCode,
    			t1.DealerName,
    			t1.MID,
    			t1.TID,
    			t1.MobileNumber1,
    			t1.MobileNumber2,
    			t1.MobileNumber3,
    			t1.active,     
    			t1.version,
    			t1.lastmntby,
    			t1.lastmnton,
    			t1.recordstatus,
   				t1.rolecode,
    			t1.nextrolecode,
    			t1.taskid,
    			t1.nexttaskid,
    			t1.recordtype,
    			t1.workflowid
   			FROM TransactionMapping_Temp t1
		</createView>
	</changeSet>

	<changeSet id="32" author="vijaya.a">
		<createView viewName="CD_Merchants_VIEW" replaceIfExists="true">
			  SELECT t1.merchantId,
    			t1.merchantName,
   				t1.storeId,
    			t1.storeName,     
    			t1.storeAddressLine1,
    			t1.storeAddressLine2,
    			t1.storeAddressLine3,
    			t1.storeCity,
    			t1.storeState,
         		t1.storeCountry,
         		t1.cityName,
          		t1.stateName,
          		t1.countryName,
    			t1.pOSID,
    			t1.avgTranPerMnth,
    			t1.avgTranAmtPerMnth,
    			t1.tranAmtPerTran,
    			t1.tranAmtPerDay,
    			t1.allowRefund,
    			t1.peakTransPerDay,
    			t1.channel,
    			t1.Pincode,
    			t1.active,
    			t1.version,
    			t1.lastmntby,
    			t1.lastmnton,
    			t1.recordstatus,
   				t1.rolecode,
    			t1.nextrolecode,
    			t1.taskid,
    			t1.nexttaskid,
    			t1.recordtype,
    			t1.workflowid
   			FROM CD_Merchants_Temp t1
			UNION ALL
 			SELECT t1.merchantId,
    			t1.merchantName,
   				t1.storeId,
    			t1.storeName,     
    			t1.storeAddressLine1,
    			t1.storeAddressLine2,
    			t1.storeAddressLine3,
    			t1.storeCity,
    			t1.storeState,
    			t1.storeCountry,
         		t1.cityName,
          		t1.stateName,
          		t1.countryName,
    			t1.pOSID,
    			t1.avgTranPerMnth,
    			t1.avgTranAmtPerMnth,
    			t1.tranAmtPerTran,
    			t1.tranAmtPerDay,
    			t1.allowRefund,
    			t1.peakTransPerDay,
    			t1.channel,
    			t1.Pincode,
    			t1.active,
    			t1.version,
    			t1.lastmntby,
    			t1.lastmnton,
    			t1.recordstatus,
   				t1.rolecode,
    			t1.nextrolecode,
    			t1.taskid,
    			t1.nexttaskid,
    			t1.recordtype,
    			t1.workflowid
   			FROM CD_Merchants t1
  			WHERE NOT (EXISTS ( SELECT 1
            FROM CD_Merchants_Temp
            WHERE CD_Merchants_Temp.merchantId = t1.merchantId))
		</createView>
	</changeSet>

	<changeSet id="33" author="vijaya.a">
		<createView viewName="CD_Merchants_AVIEW" replaceIfExists="true">
			  SELECT t1.merchantId,
    			t1.merchantName,
   				t1.storeId,
    			t1.storeName,     
    			t1.storeAddressLine1,
    			t1.storeAddressLine2,
    			t1.storeAddressLine3,
    			t1.storeCity,
    			t1.storeState,
    			t1.storeCountry,
         		t1.cityName,
          		t1.stateName,
          		t1.countryName,
    			t1.pOSID,
    			t1.avgTranPerMnth,
    			t1.avgTranAmtPerMnth,
    			t1.tranAmtPerTran,
    			t1.tranAmtPerDay,
    			t1.allowRefund,
    			t1.peakTransPerDay,
    			t1.channel,
    			t1.Pincode,
    			t1.active,
    			t1.version,
    			t1.lastmntby,
    			t1.lastmnton,
    			t1.recordstatus,
   				t1.rolecode,
    			t1.nextrolecode,
    			t1.taskid,
    			t1.nexttaskid,
    			t1.recordtype,
    			t1.workflowid
   			FROM CD_Merchants t1
		</createView>
	</changeSet>

	<changeSet id="34" author="vijaya.a">
		<createView viewName="CD_Merchants_TVIEW" replaceIfExists="true">
			  SELECT t1.merchantId,
    			t1.merchantName,
   				t1.storeId,
    			t1.storeName,     
    			t1.storeAddressLine1,
    			t1.storeAddressLine2,
    			t1.storeAddressLine3,
    			t1.storeCity,
    			t1.storeState,
    			t1.storeCountry,
          		t1.cityName,
          		t1.stateName,
          		t1.countryName,
    			t1.pOSID,
    			t1.avgTranPerMnth,
    			t1.avgTranAmtPerMnth,
    			t1.tranAmtPerTran,
    			t1.tranAmtPerDay,
    			t1.allowRefund,
    			t1.peakTransPerDay,
    			t1.channel,
    			t1.active,
    			t1.version,
    			t1.lastmntby,
    			t1.lastmnton,
    			t1.recordstatus,
   				t1.rolecode,
    			t1.nextrolecode,
    			t1.taskid,
    			t1.nexttaskid,
    			t1.recordtype,
    			t1.workflowid
   			FROM CD_Merchants_Temp t1
		</createView>
	</changeSet>

	<changeSet id="35" author="Pruthvi" dbms="oracle">
		<sql>
		<![CDATA[
		INSERT INTO rmtaccountingset  VALUES (1124, 'AMZ', 'MMFLAMZ', 'MMFL Accrual', 0, 0, 2, 1000, current_timestamp, 'Approved', '', '', '', '', '', 0,'','','');
		INSERT INTO rmtaccountingset  VALUES (1121, 'ADDDBSP', 'MMFLDBSP', 'MMFL Loan Booking', 0, 0, 8, 1000, current_timestamp, 'Approved', '', '', '', '', '', 0,'','','');
		INSERT INTO rmtaccountingset  VALUES (1125, 'REPAY', 'MMFLRPY', 'MMFL Repayment', 0, 0, 3, 1000, current_timestamp, 'Approved', '', '', '', '', '', 0,'','','');
		]]>
		</sql>
	</changeSet>

	<changeSet id="36" author="Pruthvi" dbms="oracle">
		<sql>
		<![CDATA[
		INSERT INTO rmttransactionentry (accountsetid, transorder, transdesc, debitcredit, shadowposting, accounttype, accountbranch, account, accountsubheadrule, transcationcode, rvstransactioncode, amountrule, ruledecider, feecode, chargetype, entrybyinvestment, opennewfinac, version, lastmntby, lastmnton, recordstatus, rolecode, nextrolecode, taskid, nexttaskid, recordtype, workflowid, posttosys, derivedtranorder) VALUES ((select accountsetid from rmtaccountingset where accountsetcode='MMFLAMZ'), 10, 'Interest Accrual A/c.', 'D', 0, 'INTRE', '', '', 'GLCREATE', '010', '510', 'Result=ae_dAmz;', NULL, '', NULL, 0, 0, 1, 0, current_timestamp, 'Approved', '', '', '', '', '', 0, NULL, 0);
		INSERT INTO rmttransactionentry (accountsetid, transorder, transdesc, debitcredit, shadowposting, accounttype, accountbranch, account, accountsubheadrule, transcationcode, rvstransactioncode, amountrule, ruledecider, feecode, chargetype, entrybyinvestment, opennewfinac, version, lastmntby, lastmnton, recordstatus, rolecode, nextrolecode, taskid, nexttaskid, recordtype, workflowid, posttosys, derivedtranorder) VALUES ((select accountsetid from rmtaccountingset where accountsetcode='MMFLAMZ'), 20, 'Interest Income', 'C', 0, 'INTIN', '', '', 'GLCREATE', '510', '010', 'Result=ae_dAmz;', NULL, '', NULL, 0, 0, 1, 0, current_timestamp, 'Approved', '', '', '', '', '', 0, NULL, 0);
		INSERT INTO rmttransactionentry (accountsetid, transorder, transdesc, debitcredit, shadowposting, accounttype, accountbranch, account, accountsubheadrule, transcationcode, rvstransactioncode, amountrule, ruledecider, feecode, chargetype, entrybyinvestment, opennewfinac, version, lastmntby, lastmnton, recordstatus, rolecode, nextrolecode, taskid, nexttaskid, recordtype, workflowid, posttosys, derivedtranorder) VALUES ((select accountsetid from rmtaccountingset where accountsetcode='MMFLAMZ'), 30, 'Gap Interest Receivable', 'D', 0, 'GAPINTRE', '', 'BUILD', 'GLCODE', '010', '510', 'Result=ae_dGapAmz;', NULL, '', 'D', 0, 0, 1, 0, current_timestamp, 'Approved', '', '', '', '', '', 0, 'E', 0);
		INSERT INTO rmttransactionentry (accountsetid, transorder, transdesc, debitcredit, shadowposting, accounttype, accountbranch, account, accountsubheadrule, transcationcode, rvstransactioncode, amountrule, ruledecider, feecode, chargetype, entrybyinvestment, opennewfinac, version, lastmntby, lastmnton, recordstatus, rolecode, nextrolecode, taskid, nexttaskid, recordtype, workflowid, posttosys, derivedtranorder) VALUES ((select accountsetid from rmtaccountingset where accountsetcode='MMFLAMZ'), 40, 'Gap Interest Income', 'C', 0, 'GAPINTIN', '', 'BUILD', 'GLCODE', '510', '010', 'Result=ae_dGapAmz;', NULL, '', 'D', 0, 0, 1, 0, current_timestamp, 'Approved', '', '', '', '', '', 0, 'E', 0);
		INSERT INTO rmttransactionentry (accountsetid, transorder, transdesc, debitcredit, shadowposting, accounttype, accountbranch, account, accountsubheadrule, transcationcode, rvstransactioncode, amountrule, ruledecider, feecode, chargetype, entrybyinvestment, opennewfinac, version, lastmntby, lastmnton, recordstatus, rolecode, nextrolecode, taskid, nexttaskid, recordtype, workflowid, posttosys, derivedtranorder) VALUES ((select accountsetid from rmtaccountingset where accountsetcode='MMFLDBSP'), 10, 'Loan & Advances', 'D', 0, 'LOAN', '', 'BUILD', 'GLCODE', '010', '510', 'Result=ae_disburse;', NULL, '', 'D', 0, 0, 1, 0, current_timestamp, 'Approved', '', '', '', '', '', 0, 'E', 0);
		INSERT INTO rmttransactionentry (accountsetid, transorder, transdesc, debitcredit, shadowposting, accounttype, accountbranch, account, accountsubheadrule, transcationcode, rvstransactioncode, amountrule, ruledecider, feecode, chargetype, entrybyinvestment, opennewfinac, version, lastmntby, lastmnton, recordstatus, rolecode, nextrolecode, taskid, nexttaskid, recordtype, workflowid, posttosys, derivedtranorder) VALUES ((select accountsetid from rmtaccountingset where accountsetcode='MMFLDBSP'), 20, 'Net Disbursement to Settlement', 'C', 0, 'SUDISB', '', 'BUILD', 'GLCODE', '510', '010', 'Result=ae_disburse-MMFLDBD_N - MMFLPROC_N; ', NULL, '', 'D', 0, 0, 1, 0, current_timestamp, 'Approved', '', '', '', '', '', 0, 'E', 0);
		INSERT INTO rmttransactionentry (accountsetid, transorder, transdesc, debitcredit, shadowposting, accounttype, accountbranch, account, accountsubheadrule, transcationcode, rvstransactioncode, amountrule, ruledecider, feecode, chargetype, entrybyinvestment, opennewfinac, version, lastmntby, lastmnton, recordstatus, rolecode, nextrolecode, taskid, nexttaskid, recordtype, workflowid, posttosys, derivedtranorder) VALUES ((select accountsetid from rmtaccountingset where accountsetcode='MMFLDBSP'), 30, 'Processing Fee Excluding GST', 'C', 0, 'PROIN', '', 'BUILD', 'GLCODE', '510', '010', 'Result=MMFLPROC_N - MMFLPROC_CGST_N - MMFLPROC_SGST_N - MMFLPROC_UGST_N - MMFLPROC_IGST_N;', NULL, '', 'D', 0, 0, 1, 0, current_timestamp, 'Approved', '', '', '', '', '', 0, 'E', 0);
		INSERT INTO rmttransactionentry (accountsetid, transorder, transdesc, debitcredit, shadowposting, accounttype, accountbranch, account, accountsubheadrule, transcationcode, rvstransactioncode, amountrule, ruledecider, feecode, chargetype, entrybyinvestment, opennewfinac, version, lastmntby, lastmnton, recordstatus, rolecode, nextrolecode, taskid, nexttaskid, recordtype, workflowid, posttosys, derivedtranorder) VALUES ((select accountsetid from rmtaccountingset where accountsetcode='MMFLDBSP'), 40, 'DBD Excluding GST', 'C', 0, 'DBDIN', '', 'BUILD', 'GLCODE', '510', '010', 'Result=MMFLDBD_N - MMFLDBD_CGST_N - MMFLDBD_SGST_N - MMFLDBD_UGST_N- MMFLDBD_IGST_N;', NULL, '', 'D', 0, 0, 1, 0, current_timestamp, 'Approved', '', '', '', '', '', 0, 'E', 0);
		INSERT INTO rmttransactionentry (accountsetid, transorder, transdesc, debitcredit, shadowposting, accounttype, accountbranch, account, accountsubheadrule, transcationcode, rvstransactioncode, amountrule, ruledecider, feecode, chargetype, entrybyinvestment, opennewfinac, version, lastmntby, lastmnton, recordstatus, rolecode, nextrolecode, taskid, nexttaskid, recordtype, workflowid, posttosys, derivedtranorder) VALUES ((select accountsetid from rmtaccountingset where accountsetcode='MMFLDBSP'), 50, 'Net CGST', 'C', 0, 'CGST', '', 'BUILD', 'GLCODE', '510', '010', 'Result=MMFLDBD_CGST_N + MMFLPROC_CGST_N;', NULL, '', 'D', 0, 0, 1, 0, current_timestamp, 'Approved', '', '', '', '', '', 0, 'E', 0);
		INSERT INTO rmttransactionentry (accountsetid, transorder, transdesc, debitcredit, shadowposting, accounttype, accountbranch, account, accountsubheadrule, transcationcode, rvstransactioncode, amountrule, ruledecider, feecode, chargetype, entrybyinvestment, opennewfinac, version, lastmntby, lastmnton, recordstatus, rolecode, nextrolecode, taskid, nexttaskid, recordtype, workflowid, posttosys, derivedtranorder) VALUES ((select accountsetid from rmtaccountingset where accountsetcode='MMFLDBSP'), 60, 'Net SGST', 'C', 0, 'SGST', '', 'BUILD', 'GLCODE', '510', '010', 'Result=MMFLDBD_SGST_N + MMFLPROC_SGST_N;', NULL, '', 'D', 0, 0, 1, 0, current_timestamp, 'Approved', '', '', '', '', '', 0, 'E', 0);
		INSERT INTO rmttransactionentry (accountsetid, transorder, transdesc, debitcredit, shadowposting, accounttype, accountbranch, account, accountsubheadrule, transcationcode, rvstransactioncode, amountrule, ruledecider, feecode, chargetype, entrybyinvestment, opennewfinac, version, lastmntby, lastmnton, recordstatus, rolecode, nextrolecode, taskid, nexttaskid, recordtype, workflowid, posttosys, derivedtranorder) VALUES ((select accountsetid from rmtaccountingset where accountsetcode='MMFLDBSP'), 70, 'Net UGST', 'C', 0, 'UGST', '', 'BUILD', 'GLCODE', '510', '010', 'Result=MMFLDBD_UGST_N + MMFLPROC_UGST_N;', NULL, '', 'D', 0, 0, 1, 0, current_timestamp, 'Approved', '', '', '', '', '', 0, 'E', 0);
		INSERT INTO rmttransactionentry (accountsetid, transorder, transdesc, debitcredit, shadowposting, accounttype, accountbranch, account, accountsubheadrule, transcationcode, rvstransactioncode, amountrule, ruledecider, feecode, chargetype, entrybyinvestment, opennewfinac, version, lastmntby, lastmnton, recordstatus, rolecode, nextrolecode, taskid, nexttaskid, recordtype, workflowid, posttosys, derivedtranorder) VALUES ((select accountsetid from rmtaccountingset where accountsetcode='MMFLDBSP'), 80, 'Net IGST', 'C', 0, 'IGST', '', 'BUILD', 'GLCODE', '510', '010', 'Result=MMFLDBD_IGST_N + MMFLPROC_IGST_N;', NULL, '', 'D', 0, 0, 1, 0, current_timestamp, 'Approved', '', '', '', '', '', 0, 'E', 0);
		INSERT INTO rmttransactionentry (accountsetid, transorder, transdesc, debitcredit, shadowposting, accounttype, accountbranch, account, accountsubheadrule, transcationcode, rvstransactioncode, amountrule, ruledecider, feecode, chargetype, entrybyinvestment, opennewfinac, version, lastmntby, lastmnton, recordstatus, rolecode, nextrolecode, taskid, nexttaskid, recordtype, workflowid, posttosys, derivedtranorder) VALUES ((select accountsetid from rmtaccountingset where accountsetcode='MMFLDBSP'), 90, 'Downpayment', 'D', 0, 'SUDISB', '', 'BUILD', 'GLCODE', '010', '510', 'Result=ae_downpay;', NULL, '', 'D', 0, 0, 1, 0, current_timestamp, 'Approved', '', '', '', '', '', 0, 'E', 0);
		INSERT INTO rmttransactionentry (accountsetid, transorder, transdesc, debitcredit, shadowposting, accounttype, accountbranch, account, accountsubheadrule, transcationcode, rvstransactioncode, amountrule, ruledecider, feecode, chargetype, entrybyinvestment, opennewfinac, version, lastmntby, lastmnton, recordstatus, rolecode, nextrolecode, taskid, nexttaskid, recordtype, workflowid, posttosys, derivedtranorder) VALUES ((select accountsetid from rmtaccountingset where accountsetcode='MMFLDBSP'), 100, 'Downpayment', 'C', 0, 'LOAN', '', 'BUILD', 'GLCODE', '510', '010', 'Result=ae_downpay;', NULL, '', 'D', 0, 0, 1, 0, current_timestamp, 'Approved', '', '', '', '', '', 0, 'E', 0);
		INSERT INTO rmttransactionentry (accountsetid, transorder, transdesc, debitcredit, shadowposting, accounttype, accountbranch, account, accountsubheadrule, transcationcode, rvstransactioncode, amountrule, ruledecider, feecode, chargetype, entrybyinvestment, opennewfinac, version, lastmntby, lastmnton, recordstatus, rolecode, nextrolecode, taskid, nexttaskid, recordtype, workflowid, posttosys, derivedtranorder) VALUES ((select accountsetid from rmtaccountingset where accountsetcode='MMFLDBSP'), 110, 'Subvention Receivable', 'D', 0, 'SVRCVBL', '', 'BUILD', 'GLCODE', '010', '510', 'Result=ae_svAmount;', NULL, '', 'D', 0, 0, 3, 0, current_timestamp, 'Approved', '', '', '', '', '', 0, 'E', 0);
		INSERT INTO rmttransactionentry (accountsetid, transorder, transdesc, debitcredit, shadowposting, accounttype, accountbranch, account, accountsubheadrule, transcationcode, rvstransactioncode, amountrule, ruledecider, feecode, chargetype, entrybyinvestment, opennewfinac, version, lastmntby, lastmnton, recordstatus, rolecode, nextrolecode, taskid, nexttaskid, recordtype, workflowid, posttosys, derivedtranorder) VALUES ((select accountsetid from rmtaccountingset where accountsetcode='MMFLDBSP'), 120, 'Subvention Income', 'C', 0, 'SVIN', '', 'BUILD', 'GLCODE', '510', '010', 'Result=ae_svAmount;', NULL, '', 'D', 0, 0, 3, 0, current_timestamp, 'Approved', '', '', '', '', '', 0, 'E', 0);
		INSERT INTO rmttransactionentry (accountsetid, transorder, transdesc, debitcredit, shadowposting, accounttype, accountbranch, account, accountsubheadrule, transcationcode, rvstransactioncode, amountrule, ruledecider, feecode, chargetype, entrybyinvestment, opennewfinac, version, lastmntby, lastmnton, recordstatus, rolecode, nextrolecode, taskid, nexttaskid, recordtype, workflowid, posttosys, derivedtranorder) VALUES ((select accountsetid from rmtaccountingset where accountsetcode='MMFLRPY'), 1, 'Bank/Cash', 'D', 0, 'BANK', '', 'BUILD', 'GLCREATE', '010', '510', 'Result=PB_ReceiptAmount;', NULL, '', NULL, 0, 0, 1, 0, current_timestamp, 'Approved', '', '', '', '', '', 0, NULL, 0);
		INSERT INTO rmttransactionentry (accountsetid, transorder, transdesc, debitcredit, shadowposting, accounttype, accountbranch, account, accountsubheadrule, transcationcode, rvstransactioncode, amountrule, ruledecider, feecode, chargetype, entrybyinvestment, opennewfinac, version, lastmntby, lastmnton, recordstatus, rolecode, nextrolecode, taskid, nexttaskid, recordtype, workflowid, posttosys, derivedtranorder) VALUES ((select accountsetid from rmtaccountingset where accountsetcode='MMFLRPY'), 3, 'Excess & Control A/c', 'D', 0, 'XCESS', '', 'BUILD', 'GLCREATE', '010', '510', 'Result=EX_ReceiptAmount;', NULL, '', NULL, 0, 0, 1, 0, current_timestamp, 'Approved', '', '', '', '', '', 0, NULL, 0);
		INSERT INTO rmttransactionentry (accountsetid, transorder, transdesc, debitcredit, shadowposting, accounttype, accountbranch, account, accountsubheadrule, transcationcode, rvstransactioncode, amountrule, ruledecider, feecode, chargetype, entrybyinvestment, opennewfinac, version, lastmntby, lastmnton, recordstatus, rolecode, nextrolecode, taskid, nexttaskid, recordtype, workflowid, posttosys, derivedtranorder) VALUES ((select accountsetid from rmtaccountingset where accountsetcode='MMFLRPY'), 5, 'Advance from customer', 'D', 0, 'ADVCUST', '', 'BUILD', 'GLCREATE', '010', '510', 'Result=EA_ReceiptAmount;', NULL, '', NULL, 0, 0, 1, 0, current_timestamp, 'Approved', '', '', '', '', '', 0, NULL, 0);
		INSERT INTO rmttransactionentry (accountsetid, transorder, transdesc, debitcredit, shadowposting, accounttype, accountbranch, account, accountsubheadrule, transcationcode, rvstransactioncode, amountrule, ruledecider, feecode, chargetype, entrybyinvestment, opennewfinac, version, lastmntby, lastmnton, recordstatus, rolecode, nextrolecode, taskid, nexttaskid, recordtype, workflowid, posttosys, derivedtranorder) VALUES ((select accountsetid from rmtaccountingset where accountsetcode='MMFLRPY'), 8, 'EMI Receivable A/c', 'C', 0, 'EMIRE', '', 'BUILD', 'GLCREATE', '510', '010', 'Result=ae_rpTot;', NULL, '', 'D', 0, 0, 1, 0, current_timestamp, 'Approved', '', '', '', '', '', 0, 'E', 0);
		INSERT INTO rmttransactionentry (accountsetid, transorder, transdesc, debitcredit, shadowposting, accounttype, accountbranch, account, accountsubheadrule, transcationcode, rvstransactioncode, amountrule, ruledecider, feecode, chargetype, entrybyinvestment, opennewfinac, version, lastmntby, lastmnton, recordstatus, rolecode, nextrolecode, taskid, nexttaskid, recordtype, workflowid, posttosys, derivedtranorder) VALUES ((select accountsetid from rmtaccountingset where accountsetcode='MMFLRPY'), 12, 'Advance from customer', 'C', 0, 'EMIRE', '', 'BUILD', 'GLCREATE', '510', '010', 'Result=ae_toEmiAdvance;', NULL, '', NULL, 0, 0, 1, 0, current_timestamp, 'Approved', '', '', '', '', '', 0, NULL, 0);
		INSERT INTO rmttransactionentry (accountsetid, transorder, transdesc, debitcredit, shadowposting, accounttype, accountbranch, account, accountsubheadrule, transcationcode, rvstransactioncode, amountrule, ruledecider, feecode, chargetype, entrybyinvestment, opennewfinac, version, lastmntby, lastmnton, recordstatus, rolecode, nextrolecode, taskid, nexttaskid, recordtype, workflowid, posttosys, derivedtranorder) VALUES ((select accountsetid from rmtaccountingset where accountsetcode='MMFLRPY'), 14, 'Excess & Control A/c', 'C', 0, 'XCESS', '', 'BUILD', 'GLCREATE', '510', '010', 'Result=ae_toExcessAmt;', NULL, '', NULL, 0, 0, 1, 0, current_timestamp, 'Approved', '', '', '', '', '', 0, NULL, 0);
		INSERT INTO rmttransactionentry (accountsetid, transorder, transdesc, debitcredit, shadowposting, accounttype, accountbranch, account, accountsubheadrule, transcationcode, rvstransactioncode, amountrule, ruledecider, feecode, chargetype, entrybyinvestment, opennewfinac, version, lastmntby, lastmnton, recordstatus, rolecode, nextrolecode, taskid, nexttaskid, recordtype, workflowid, posttosys, derivedtranorder) VALUES ((select accountsetid from rmtaccountingset where accountsetcode='MMFLRPY'), 16, 'LPP Charge', 'C', 0, 'LPPIN', '', 'BUILD', 'GLCREATE', '510', '010', 'Result=ae_lppPaid;', NULL, '', NULL, 0, 0, 1, 0, current_timestamp, 'Approved', '', '', '', '', '', 0, NULL, 0);
		INSERT INTO rmttransactionentry (accountsetid, transorder, transdesc, debitcredit, shadowposting, accounttype, accountbranch, account, accountsubheadrule, transcationcode, rvstransactioncode, amountrule, ruledecider, feecode, chargetype, entrybyinvestment, opennewfinac, version, lastmntby, lastmnton, recordstatus, rolecode, nextrolecode, taskid, nexttaskid, recordtype, workflowid, posttosys, derivedtranorder) VALUES ((select accountsetid from rmtaccountingset where accountsetcode='MMFLRPY'), 20, 'Bounce Charge Income', 'C', 0, 'BOUIN', '', 'BUILD', 'GLCODE', '510', '010', 'Result=bounceChargePaid-bounceCharge_CGST_P-bounceCharge_SGST_P-bounceCharge_IGST_P-bounceCharge_UGST_P;', NULL, 'bounceCharge', 'D', 0, 0, 1, 0, current_timestamp, 'Approved', '', '', '', '', '', 0, 'E', 0);
		INSERT INTO rmttransactionentry (accountsetid, transorder, transdesc, debitcredit, shadowposting, accounttype, accountbranch, account, accountsubheadrule, transcationcode, rvstransactioncode, amountrule, ruledecider, feecode, chargetype, entrybyinvestment, opennewfinac, version, lastmntby, lastmnton, recordstatus, rolecode, nextrolecode, taskid, nexttaskid, recordtype, workflowid, posttosys, derivedtranorder) VALUES ((select accountsetid from rmtaccountingset where accountsetcode='MMFLRPY'), 21, 'CGST On Bounce Charge', 'C', 0, 'CGST', '', 'BUILD', 'GLCODE', '510', '010', 'Result=bounceCharge_CGST_P;', NULL, 'bounceCharge', 'D', 0, 0, 1, 0, current_timestamp, 'Approved', '', '', '', '', '', 0, 'E', 0);
		INSERT INTO rmttransactionentry (accountsetid, transorder, transdesc, debitcredit, shadowposting, accounttype, accountbranch, account, accountsubheadrule, transcationcode, rvstransactioncode, amountrule, ruledecider, feecode, chargetype, entrybyinvestment, opennewfinac, version, lastmntby, lastmnton, recordstatus, rolecode, nextrolecode, taskid, nexttaskid, recordtype, workflowid, posttosys, derivedtranorder) VALUES ((select accountsetid from rmtaccountingset where accountsetcode='MMFLRPY'), 22, 'SGST On Bounce Charge', 'C', 0, 'SGST', '', 'BUILD', 'GLCODE', '510', '010', 'Result=bounceCharge_SGST_P;', NULL, 'bounceCharge', 'D', 0, 0, 1, 0, current_timestamp, 'Approved', '', '', '', '', '', 0, 'E', 0);
		INSERT INTO rmttransactionentry (accountsetid, transorder, transdesc, debitcredit, shadowposting, accounttype, accountbranch, account, accountsubheadrule, transcationcode, rvstransactioncode, amountrule, ruledecider, feecode, chargetype, entrybyinvestment, opennewfinac, version, lastmntby, lastmnton, recordstatus, rolecode, nextrolecode, taskid, nexttaskid, recordtype, workflowid, posttosys, derivedtranorder) VALUES ((select accountsetid from rmtaccountingset where accountsetcode='MMFLRPY'), 23, 'UGST on Bounce Charges', 'C', 0, 'UGST', '', 'BUILD', 'GLCODE', '510', '010', 'Result=bounceCharge_UGST_P;', NULL, 'bounceCharge', 'D', 0, 0, 1, 0, current_timestamp, 'Approved', '', '', '', '', '', 0, 'E', 0);
		INSERT INTO rmttransactionentry (accountsetid, transorder, transdesc, debitcredit, shadowposting, accounttype, accountbranch, account, accountsubheadrule, transcationcode, rvstransactioncode, amountrule, ruledecider, feecode, chargetype, entrybyinvestment, opennewfinac, version, lastmntby, lastmnton, recordstatus, rolecode, nextrolecode, taskid, nexttaskid, recordtype, workflowid, posttosys, derivedtranorder) VALUES ((select accountsetid from rmtaccountingset where accountsetcode='MMFLRPY'), 24, 'IGST on Bounce Charges', 'C', 0, 'IGST', '', 'BUILD', 'GLCODE', '510', '010', 'Result=bounceCharge_IGST_P;', NULL, 'bounceCharge', 'D', 0, 0, 1, 0, current_timestamp, 'Approved', '', '', '', '', '', 0, 'E', 0);
	]]>
		</sql>
	</changeSet>

	<changeSet id="37" author="naga.g" dbms="oracle">
		<sql>
			<![CDATA[
				create table offlineusrmessagesbackup_1 as 
				select * from offlineusrmessagesbackup;
			]]>
		</sql>
	</changeSet>

	<changeSet id="38" author="naga.g" dbms="oracle">
		<dropTable tableName="offlineusrmessagesbackup" />
	</changeSet>

	<changeSet id="39" author="naga.g" dbms="oracle">
		<createTable tableName="offlineusrmessagesbackup">
			<column name="id" type="NUMBER(10,0)" autoIncrement="true">
				<constraints nullable="false" primaryKey="true"
					primaryKeyName="offlineusrmessagesbackup_pkey" />
			</column>
			<column name="tousrid" type="VARCHAR2(15)">
				<constraints nullable="false" />
			</column>
			<column name="fromusrid" type="VARCHAR2(15)">
				<constraints nullable="false" />
			</column>
			<column name="sendtime" type="datetime " />
			<column name="message" type="VARCHAR2(2000)">
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>

	<changeSet id="40" author="naga.g" dbms="oracle">
		<createIndex tableName="OFFLINEUSRMESSAGESBACKUP"
			indexName="IX_OLUMB_TOUSRID">
			<column name="TOUSRID" type="varchar(50)" />
		</createIndex>
	</changeSet>
	<changeSet id="41" author="naga.g" dbms="oracle">
		<sql>
			<![CDATA[
			Insert into data_engine_config (ID,NAME,DESCRIPTION,PARSER,WORKSHEET,TEXTQUALIFIER,ROWDELIMITER,COLUMNDELIMITER,STARTINGROW,SKIPHEADERROW,FIELDNAMES,HEADER,TRAILER,UPLOADLOCATION,UPLOADPATH,FILEPREFIXNAME,FILEEXTENSION,FILESEQUENCENO,LASTPROCESSEDON,FILENAMEFORMAT,CRONEXPRESSION,NOTIFICATIONSTATUSEMAIL,POSTEVENT,BACKUPFILE,ACTIVE) values ((select max(id)+1 from data_engine_config),'ME_SCHEMEDEALERGROUP','SchemeDealerGroup extract',3,null,'"',null,'~',0,0, EMPTY_CLOB(),'ROW:{SCHEME_ID,DEALERGROUPCODE,STATUS}', null,'A','/opt/PFF/master_extract','SDM','.xlsx',4,to_date(sysdate,'DD-MON-RR'),'_${yyyyMMddHHmmss}',null,'0',null,0,1);

            Insert into data_engine_table (ID,CONFIGID,NAME,OPERATION,KEYFIELDS,FILTER,STATUSUPDATE,SKIPROWS,IDENTIFIER,DESCRIPTION,STARTINDEX,ENDINDEX,RECORDLENGTH,MULTIROW,HEADERTABLE) values ((select max(id)+1 from data_engine_table),(select max(id) from data_engine_config) ,'CD_SCHEME_DEALERGROUP',0,'PROMOTIONID',null,null,null,null,null,null,null,0,0,0);

            Insert into data_engine_column (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id)+1 from data_engine_column),( select max(id) from data_engine_table ),'promotionId',0,'N',null,null,null,null,'0',null,null,null,null,'O');

            Insert into data_engine_column (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id)+1 from data_engine_column),( select max(id) from data_engine_table ) ,'DEALERGROUPCODE',0,'N',null,null,null,null,'0',null,null,null,null,'O');

            Insert into data_engine_column (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id)+1 from data_engine_column),( select max(id) from data_engine_table ),'ACTIVE',0,'N',null,null,null,null,'0',null,null,null,null,'O');

			
			]]>
		</sql>
	</changeSet>
	<changeSet id="42" author="naga.g" dbms="oracle">
		<sql>
		<![CDATA[
			Insert into data_engine_config (ID,NAME,DESCRIPTION,PARSER,WORKSHEET,TEXTQUALIFIER,ROWDELIMITER,COLUMNDELIMITER,STARTINGROW,SKIPHEADERROW,FIELDNAMES,HEADER,TRAILER,UPLOADLOCATION,UPLOADPATH,FILEPREFIXNAME,FILEEXTENSION,FILESEQUENCENO,LASTPROCESSEDON,FILENAMEFORMAT,CRONEXPRESSION,NOTIFICATIONSTATUSEMAIL,POSTEVENT,BACKUPFILE,ACTIVE) values ((select max(id)+1 from  data_engine_config),'ME_SCHEMEPRODUCTGROUP','Scheme Product Group extract',3,null,'"',null,'~',0,0, EMPTY_CLOB(),'ROW:{SCHEME_ID,PRODUCT_GROUP_CODE
            ,STATUS,POSVENDOR}',null,'A','/opt/PFF/master_extract','SPM','.xlsx',4,to_date(sysdate,'DD-MON-RR'),'_${yyyyMMddHHmmss}',null,'0',null,0,1);

            Insert into data_engine_table (ID,CONFIGID,NAME,OPERATION,KEYFIELDS,FILTER,STATUSUPDATE,SKIPROWS,IDENTIFIER,DESCRIPTION,STARTINDEX,ENDINDEX,RECORDLENGTH,MULTIROW,HEADERTABLE) values ((select max(id)+1 from data_engine_table),(select max(id) from data_engine_config),'CD_SCHEME_PRODUCTGROUP',0,'PROMOTIONID',null,null,null,null,null,null,null,0,0,0);

            Insert into data_engine_column (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id)+1 from data_engine_column),( select max(id) from data_engine_table ),'PROMOTIONID',0,'N',null,null,null,null,'0',null,null,null,null,'O');

            Insert into data_engine_column (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id)+1 from data_engine_column),( select max(id) from data_engine_table ) ,'PRODUCTGROUPCODE',0,'N',null,null,null,null,'0',null,null,null,null,'O');

            Insert into data_engine_column (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id)+1 from data_engine_column),( select max(id) from data_engine_table ),'ACTIVE',0,'N',null,null,null,null,'0',null,null,null,null,'O');

            Insert into data_engine_column (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id)+1 from data_engine_column),( select max(id) from data_engine_table ),'POSVENDOR',0,'N',null,null,null,null,'0',null,null,null,null,'O');
			
			]]>
		</sql>
	</changeSet>
	<changeSet id="43" author="naga.g" dbms="oracle">
		<sql>
		<![CDATA[
		         Insert into data_engine_config (ID,NAME,DESCRIPTION,PARSER,WORKSHEET,TEXTQUALIFIER,ROWDELIMITER,COLUMNDELIMITER,STARTINGROW,SKIPHEADERROW,FIELDNAMES,HEADER,TRAILER,UPLOADLOCATION,UPLOADPATH,FILEPREFIXNAME,FILEEXTENSION,FILESEQUENCENO,LASTPROCESSEDON,FILENAMEFORMAT,CRONEXPRESSION,NOTIFICATIONSTATUSEMAIL,POSTEVENT,BACKUPFILE,ACTIVE) values ((select max(id)+1 from data_engine_config),'ME_SCHEMEMASTER','Scheme Master extract',3,null,'"',null,'~',0,0, EMPTY_CLOB(),
                 'ROW:{SCHEME_ID,SCHEME_DESCRIPTION,TENURE,ROI,ADVANCE_EMI,DBD,SCHEME_START_DATE,SCHEME_END_DATE,MAX_AMOUNT,MIN_AMOUNT,PROCESSING_FEE,PORTAL_DESCRIPTION,STATUS,
                 SPECIAL_SCHEME_FLAG,IS_PF_SCHEME}', 
                 null,'A','/opt/PFF/master_extract','PROMOTIONS_','.xlsx',4,to_date(sysdate,'DD-MON-RR'),'${SEQ_FILE},_${yyyyMMddHHmmss}',null,'0',null,0,1);

              Insert into data_engine_table (ID,CONFIGID,NAME,OPERATION,KEYFIELDS,FILTER,STATUSUPDATE,SKIPROWS,IDENTIFIER,DESCRIPTION,STARTINDEX,ENDINDEX,RECORDLENGTH,MULTIROW,HEADERTABLE) values ((select max(id)+1 from data_engine_table),(select max(id) from data_engine_config),'SCHEMEMASTER_VIEW',0,'PROMOTIONCODE',null,null,null,null,null,null,null,0,0,0);

              Insert into data_engine_column (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id)+1 from data_engine_column),( select max(id) from data_engine_table ),'PROMOTIONCODE',0,'N',null,null,null,null,'0',null,null,null,null,'O');

              Insert into data_engine_column (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id)+1 from data_engine_column),( select max(id) from data_engine_table ),'PROMOTIONDESC',0,'N',null,null,null,null,'0',null,null,null,null,'O');

              Insert into data_engine_column (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id)+1 from data_engine_column),( select max(id) from data_engine_table ),'TENOR',0,'N',null,null,null,null,'0',null,null,null,null,'O');

              Insert into data_engine_column (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id)+1 from data_engine_column),( select max(id) from data_engine_table ),'ACTUALINTERESTRATE',0,'N',null,null,null,null,'0',null,null,null,null,'O');

              Insert into data_engine_column (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id)+1 from data_engine_column),( select max(id) from data_engine_table ),'ADVEMITERMS',0,'N',null,null,null,null,'0',null,null,null,null,'O');

              Insert into data_engine_column (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id)+1 from data_engine_column),( select max(id) from data_engine_table ),'STARTDATE',0,'N',null,null,null,null,'0',null,null,null,null,'O');

              Insert into data_engine_column (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id)+1 from data_engine_column),( select max(id) from data_engine_table ),'ENDDATE',0,'N',null,null,null,null,'0',null,null,null,null,'O');

              Insert into data_engine_column (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id)+1 from data_engine_column),( select max(id) from data_engine_table ),'FINMINAMOUNT',0,'N',null,null,null,null,'0',null,null,null,null,'O');

              Insert into data_engine_column (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id)+1 from data_engine_column),( select max(id) from data_engine_table ),'FINMAXAMOUNT',0,'N',null,null,null,null,'0',null,null,null,null,'O');

              Insert into data_engine_column (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id)+1 from data_engine_column),( select max(id) from data_engine_table ),'REMARKS',0,'N',null,null,null,null,'0',null,null,null,null,'O');

              Insert into data_engine_column (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id)+1 from data_engine_column),( select max(id) from data_engine_table ),'ACTIVE',0,'N',null,null,null,null,'0',null,null,null,null,'O');
			  
              Insert into data_engine_column (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id)+1 from data_engine_column),( select max(id) from data_engine_table ),'SPECIALSCHEME',0,'N',null,null,null,null,'0',null,null,null,null,'O');


              Insert into data_engine_column (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id)+1 from data_engine_column),( select max(id) from data_engine_table ),'PROSEEFEE',0,'N',null,null,null,null,'0',null,null,null,null,'O');

              Insert into data_engine_column (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id)+1 from data_engine_column),( select max(id) from data_engine_table ),'DBDFEE',0,'N',null,null,null,null,'0',null,null,null,null,'O');
			
			]]>
		</sql>
	</changeSet>
	<changeSet id="44" author="naga.g" dbms="oracle">
		<createView viewName="SCHEMEMASTER_VIEW" replaceIfExists="true">
		    select pm.promotioncode,pm.promotiondesc,pm.TENOR,CONCAT(to_char(pm.ACTUALINTERESTRATE,'99.99'), '%') ACTUALINTERESTRATE ,pm.ADVEMITERMS,pm.STARTDATE,pm.enddate,
            pm.FINMINAMOUNT/100 FINMINAMOUNT,pm.FINMAXAMOUNT/100 FINMAXAMOUNT ,pm.remarks,pm.ACTIVE,pm.SPECIALSCHEME,CASE  when fp1.Amount>0 then fp1.Amount/100 Else fp1.percentage  END ProseeFee, 
            CASE  when fp2.Amount>0 then fp2.Amount Else  fp2.percentage END DBDFEE ,pm.LASTMNTON
            from promotions pm 
            left join fintypefees_aview fp1 on pm.promotionCode = fp1.finType and fp1.moduleid=2 and fp1.FeeTypeID = 134 
            left join fintypefees_aview fp2 on pm.promotionCode = fp2.finType and fp2.moduleid=2 and fp2.FeeTypeID = 133;
		</createView>
	</changeSet>
	<changeSet id="45" author="naga.g" dbms="oracle">
		<sql>
			<![CDATA[
			    update from DATA_ENGINE_TABLE set FILTER='LASTMNTON > :LAST_MNT_ON' where configId in ('CD_SCHEME_DEALERGROUP','CD_SCHEME_PRODUCTGROUP','SCHEMEMASTER_VIEW')
			]]>
		</sql>
	</changeSet>
</databaseChangeLog>	