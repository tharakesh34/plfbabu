<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

	<property name="add.schema" value="dbo." dbms="mssql" />
	<property name="add.schema" value="" dbms="oracle" />
	<property name="add.schema" value="" dbms="postgresql" />
	<property name="call.substr" value="substring" dbms="mssql" />
	<property name="call.substr" value="substr" dbms="oracle" />
	<property name="call.substr" value="substring" dbms="postgresql" />
	<property name="call.auditdb" value="PLFAVANSEQC.." dbms="mssql" />
	<property name="call.auditdb" value=" " dbms="oracle" />
	<property name="call.concatenate" value="+" dbms="mssql" />
	<property name="call.concatenate" value="||" dbms="oracle" />
	<property name="call.concatenate" value="||" dbms="postgresql" />
	<property name="call.collength" value="LEN" dbms="mssql" />
	<property name="call.collength" value="LENGTH" dbms="oracle" />
	<property name="call.collength" value="LENGTH" dbms="postgresql" />
	<property name="call.date" value="getdate()" dbms="mssql" />
	<property name="call.date" value="sysdate" dbms="oracle" />
	<property name="call.date" value="now()" dbms="postgresql" />

	<changeSet id="pre_run_for_pgp" author="Adarsh" runAlways="true" dbms="postgresql">
		<sql>
			Set search_path = plf,public,pg_catalog;
		</sql>
	</changeSet>

	<changeSet id="ST#320" author="pavankalyan.s">
		<preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="0">SELECT count(*) FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS
				WHERE GRPCODE = 'FIN_RECEIPT_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME =
				'button_Receiptdialog_ForeClosureEffschd_btnPrint');
			</sqlCheck>
		</preConditions>
		<sql>
			<![CDATA[
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FIN_RECEIPT_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_Receiptdialog_ForeClosureEffschd_btnPrint'), 1, 0, 1000, CURRENT_TIMESTAMP, '', '', '','', '', '', 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#321" author="Pavankalyan.s">
		<sql>
	    <![CDATA[   
            DELETE FROM REPORTFILTERFIELDS WHERE REPORTID IN (SELECT REPORTID FROM REPORTCONFIGURATION WHERE REPORTJASPERNAME LIKE '%LoanWiseMandateDetails%');

            INSERT INTO REPORTFILTERFIELDS (REPORTID, FIELDID, FIELDNAME, FIELDTYPE, FIELDLABEL, FIELDDBNAME, APPUTILMETHODNAME, MODULENAME, LOVHIDDENFIELDMETHOD, LOVTEXTFIELDMETHOD, MULTISELECTSEARCH, FIELDLENGTH, FIELDMAXVALUE, FIELDMINVALUE, SEQORDER, MANDATORY, FIELDCONSTRAINT, FIELDERRORMESSAGE, WHERECONDITION, STATICVALUE, FIELDWIDTH, FILTERREQUIRED, DEFAULTFILTER, VERSION, LASTMNTBY, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, FILTERFILEDS) VALUES((SELECT REPORTID FROM REPORTCONFIGURATION WHERE REPORTJASPERNAME LIKE '%LoanWiseMandateDetails%'), 1, 'Product', 'LOVSEARCH', 'Product', 'product.PRODUCTCODE', '', 'Product', 'getProductCode', 'getProductDesc', 1, 0, 0, 0, 1, 1, '', '', '', '', 250, 0, '=', 1, 1000, 'Approved', '', '', '', '', '', 0, CURRENT_TIMESTAMP, '');
	    ]]>
		</sql>
	</changeSet>

	<changeSet id="ST#327.11" author="Pavankalyan.s">
		<addColumn tableName="PRESENTMENT_REQ_DETAILS_TEMP">
			<column name="seqNo" type="int" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#327.12" author="Pavankalyan.s">
		<addColumn tableName="PRESENTMENT_REQ_DETAILS">
			<column name="seqNo" type="int" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#327.14" author="saisandeep.b">
		<sql>
			<![CDATA[
		    	DELETE FROM SMTPARAMETERS WHERE SYSPARMCODE = 'PRESENTMENT_EXTRACTION_TYPE';

            	INSERT INTO SMTPARAMETERS (SYSPARMCODE, SYSPARMDESC, SYSPARMTYPE, SYSPARMMAINT, SYSPARMVALUE, SYSPARMLENGTH, SYSPARMDEC,SYSPARMLIST, SYSPARMVALDMOD, SYSPARMDESCRIPTION, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('PRESENTMENT_EXTRACTION_TYPE', 'Presentment Extraction type. Possible values : DEFAULT,INSTRUMENT_TYPE,PARTNER_BANK,INSTRUMENT_TYPE_PARTNER_BANK', 'String', '1', 'DEFAULT', 50, 0, NULL, NULL, '', 1, 1000, CURRENT_TIMESTAMP,'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#327.15" author="saisandeep.b">
		<preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="1">SELECT count(*) FROM SMTPARAMETERS WHERE SYSPARMCODE =
				'PRESENTMENT_RESPONSE_ALLOW_INSTRUMENT_TYPE' AND SYSPARMVALUE = 'Y';
			</sqlCheck>
		</preConditions>
		<sql>
			<![CDATA[
				UPDATE SMTPARAMETERS SET SYSPARMVALUE = 'INSTRUMENT_TYPE' WHERE SYSPARMCODE = 'PRESENTMENT_EXTRACTION_TYPE';
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#327.16" author="saisandeep.b">
		<sql>
		<![CDATA[
			DELETE FROM SMTPARAMETERS WHERE SYSPARMCODE = 'PRESENTMENT_RESPONSE_ALLOW_INSTRUMENT_TYPE';
		]]>
		</sql>
	</changeSet>

	<changeSet id="ST#222" author="savitri.n">
		<sql>
			<![CDATA[
				DELETE FROM ERRORDETAILS WHERE CODE = 'STP0012';
				DELETE FROM ERRORDETAILS WHERE CODE = 'STP0013';
				DELETE FROM ERRORDETAILS WHERE CODE = 'STP0014';
				DELETE FROM ERRORDETAILS WHERE CODE = 'STP0015';
				INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION) VALUES('STP0012', 'EN', 'E', 'Invalid {0} {1}', '', 'Approved', '', '', '', '', '', 0, CURRENT_TIMESTAMP, 1000, 0);
				INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION) VALUES('STP0013', 'EN', 'E', 'For stepsAppliedFor :{0}, calcOfSteps must be AMT', '', 'Approved', '', '', '', '', '', 0, CURRENT_TIMESTAMP, 1000, 0);
				INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION) VALUES('STP0014', 'EN', 'E', 'For Step Policy :{0}, Step Type should be {1}', '', 'Approved', '', '', '', '', '', 0, CURRENT_TIMESTAMP, 1000, 0);
				INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION) VALUES('STP0015', 'EN', 'E', 'when Step Policy is selected Calc Of Steps, Steps Applied For should be PERC, REGEMI', '', 'Approved', '', '', '', '', '', 0, CURRENT_TIMESTAMP, 1000, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#556.1" author="Siva.M">
		<sql>
			<![CDATA[
				DELETE FROM BMTAEEVENTS WHERE AEEVENTCODE = 'RESTRUCT'; 
				INSERT INTO BMTAEEVENTS (AEEVENTCODE, AEEVENTCODEDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, ACTIVE) VALUES ('RESTRUCT', 'Restrcuture Servicing', 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0, 1);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#556.2" author="Siva.M">
		<sql>
			<![CDATA[
				DELETE FROM BMTAMOUNTCODES WHERE ALLOWEDEVENT ='RESTRUCT';				
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#556.3" author="Siva.M">
		<sql>
			<![CDATA[
				DELETE FROM FEETYPES WHERE FEETYPECODE = 'RESTRUCT';
				INSERT INTO FEETYPES (FEETYPEID, FEETYPECODE, FEETYPEDESC, ACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, MANUALADVICE, ACCOUNTSETID, ADVISETYPE, HOSTFEETYPECODE, AMORTZREQ, TAXAPPLICABLE, TAXCOMPONENT, REFUNDABLE, DUEACCREQ, DUEACCSET, TDSREQ) VALUES ((Select Max(FeeTypeID)+1 FROM FEETYPES), 'RESTRUCT', 'Restructure Cpz Fee type', 1, 2, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0, 0, NULL, 1, NULL, 0, 0, '#', 0, 0, 0, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#556.4" author="Siva.M">
		<addColumn tableName="RESTRUCTURE_DETAILS_TEMP">
			<column name="BaseRate" type="varchar(8)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#556.5" author="Siva.M">
		<addColumn tableName="RESTRUCTURE_DETAILS_TEMP">
			<column name="SplRate" type="varchar(8)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#556.6" author="Siva.M">
		<addColumn tableName="RESTRUCTURE_DETAILS_TEMP">
			<column name="Margin" type="decimal(13,9)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#556.7" author="Siva.M">
		<addColumn tableName="RESTRUCTURE_DETAILS_TEMP">
			<column name="ReceiptId" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#556.8" author="Siva.M">
		<sql>
			<![CDATA[
				UPDATE RESTRUCTURE_DETAILS_TEMP SET MARGIN = 0 WHERE MARGIN IS NULL;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#556.9" author="Siva.M">
		<sql>
			<![CDATA[
				UPDATE RESTRUCTURE_DETAILS_TEMP SET RECEIPTID = 0 WHERE RECEIPTID IS NULL;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#556.10" author="Siva.M" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE RESTRUCTURE_DETAILS_TEMP ADD CONSTRAINT DF_RESTRUDET_T_MARGIN DEFAULT 0 FOR Margin;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#556.11" author="Siva.M" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE RESTRUCTURE_DETAILS_TEMP ADD CONSTRAINT DF_RESTRUDET_T_RECEIPTID DEFAULT 0 FOR ReceiptId;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#556.10" author="Siva.M" dbms="postgresql, oracle">
		<addDefaultValue columnName="Margin" tableName="RESTRUCTURE_DETAILS_TEMP" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#556.11" author="Siva.M" dbms="postgresql, oracle">
		<addDefaultValue columnName="ReceiptId" tableName="Restructure_details_Temp" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#556.12" author="Siva.M">
		<addColumn tableName="RESTRUCTURE_DETAILS">
			<column name="BaseRate" type="varchar(8)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#556.13" author="Siva.M">
		<addColumn tableName="RESTRUCTURE_DETAILS">
			<column name="SplRate" type="varchar(8)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#556.14" author="Siva.M">
		<addColumn tableName="RESTRUCTURE_DETAILS">
			<column name="Margin" type="decimal(13,9)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#556.15" author="Siva.M">
		<addColumn tableName="RESTRUCTURE_DETAILS">
			<column name="ReceiptId" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#556.16" author="Siva.M">
		<sql>
			<![CDATA[
				UPDATE RESTRUCTURE_DETAILS SET MARGIN = 0 WHERE MARGIN IS NULL;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#556.17" author="Siva.M">
		<sql>
			<![CDATA[
				UPDATE RESTRUCTURE_DETAILS SET RECEIPTID = 0 WHERE RECEIPTID IS NULL;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#556.18" author="Siva.M" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE RESTRUCTURE_DETAILS ADD CONSTRAINT DF_RESTRUDET_MARGIN DEFAULT 0 FOR Margin;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#556.19" author="Siva.M" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE RESTRUCTURE_DETAILS ADD CONSTRAINT DF_RESTRUDET_RECEIPTID DEFAULT 0 FOR ReceiptId;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#556.18" author="Siva.M" dbms="postgresql, oracle">
		<addDefaultValue columnName="Margin" tableName="Restructure_details" defaultValue="0" />
	</changeSet>


	<changeSet id="ST#556.19" author="Siva.M" dbms="postgresql, oracle">
		<addDefaultValue columnName="ReceiptId" tableName="Restructure_details" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#556.20" author="Siva.M">
		<createTable tableName="RESTRUCTURECHARGE">
			<column name="RestructureId" type="bigint">
				<constraints nullable="false" primaryKey="true"/>
			</column>
			<column name="ChargeSeq" type="int">
				<constraints nullable="false" primaryKey="true"/>
			</column>
			<column name="Aloctype" type="varchar(8)" />
			<column name="Capitalized" type="smallint" />
			<column name="FeeCode" type="varchar(8)" />
			<column name="ActualAmount" type="decimal(18,0)" />
			<column name="TaxType" type="char(1)" />
			<column name="cgst" type="decimal(18,0)" />
			<column name="sgst" type="decimal(18,0)" />
			<column name="ugst" type="decimal(18,0)" />
			<column name="igst" type="decimal(18,0)" />
			<column name="cess" type="decimal(18,0)" />
			<column name="Tdsamount" type="decimal(18,0))" />
			<column name="TotalAmount" type="decimal(18,0)" />
		</createTable>
	</changeSet>

	<changeSet id="ST#556.22" author="Siva.M" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE RESTRUCTURECHARGE ADD CONSTRAINT df_rc_ActualAmount DEFAULT 0 FOR ActualAmount;
				ALTER TABLE RESTRUCTURECHARGE ADD CONSTRAINT df_rc_cgst DEFAULT 0 FOR cgst;
				ALTER TABLE RESTRUCTURECHARGE ADD CONSTRAINT df_rc_sgst DEFAULT 0 FOR sgst;
				ALTER TABLE RESTRUCTURECHARGE ADD CONSTRAINT df_rc_ugst DEFAULT 0 FOR ugst;
				ALTER TABLE RESTRUCTURECHARGE ADD CONSTRAINT df_rc_igst DEFAULT 0 FOR igst;
				ALTER TABLE RESTRUCTURECHARGE ADD CONSTRAINT df_rc_cess DEFAULT 0 FOR cess;
				ALTER TABLE RESTRUCTURECHARGE ADD CONSTRAINT df_rc_Tdsamount DEFAULT 0 FOR Tdsamount; 
				ALTER TABLE RESTRUCTURECHARGE ADD CONSTRAINT df_rc_TotalAmount DEFAULT 0 FOR TotalAmount; 
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#556.22" author="Siva.M" dbms="postgresql, oracle">
		<addDefaultValue columnName="ActualAmount" tableName="RESTRUCTURECHARGE" defaultValue="0" />
		<addDefaultValue columnName="cgst" tableName="RESTRUCTURECHARGE" defaultValue="0" />
		<addDefaultValue columnName="sgst" tableName="RESTRUCTURECHARGE" defaultValue="0" />
		<addDefaultValue columnName="ugst" tableName="RESTRUCTURECHARGE" defaultValue="0" />
		<addDefaultValue columnName="igst" tableName="RESTRUCTURECHARGE" defaultValue="0" />
		<addDefaultValue columnName="cess" tableName="RESTRUCTURECHARGE" defaultValue="0" />
		<addDefaultValue columnName="Tdsamount" tableName="RESTRUCTURECHARGE" defaultValue="0" />
		<addDefaultValue columnName="TotalAmount" tableName="RESTRUCTURECHARGE" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#556.23" author="Siva.M">
		<createTable tableName="RESTRUCTURECHARGE_TEMP">
			<column name="RestructureId" type="bigint">
				<constraints nullable="false" primaryKey="true"/>
			</column>
			<column name="ChargeSeq" type="int">
				<constraints nullable="false" primaryKey="true"/>
			</column>
			<column name="Aloctype" type="varchar(8)" />
			<column name="Capitalized" type="smallint" />
			<column name="FeeCode" type="varchar(8)" />
			<column name="ActualAmount" type="decimal(18,0)" />
			<column name="TaxType" type="char(1)" />
			<column name="cgst" type="decimal(18,0)" />
			<column name="sgst" type="decimal(18,0)" />
			<column name="ugst" type="decimal(18,0)" />
			<column name="igst" type="decimal(18,0)" />
			<column name="cess" type="decimal(18,0)" />
			<column name="Tdsamount" type="decimal(18,0))" />
			<column name="TotalAmount" type="decimal(18,0)" />
		</createTable>
	</changeSet>

	<changeSet id="ST#556.25" author="Siva.M" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE RESTRUCTURECHARGE_TEMP ADD CONSTRAINT df_rc_t_ActualAmount DEFAULT 0 FOR ActualAmount;
				ALTER TABLE RESTRUCTURECHARGE_TEMP ADD CONSTRAINT df_rc_t_cgst DEFAULT 0 FOR cgst;
				ALTER TABLE RESTRUCTURECHARGE_TEMP ADD CONSTRAINT df_rc_t_sgst DEFAULT 0 FOR sgst;
				ALTER TABLE RESTRUCTURECHARGE_TEMP ADD CONSTRAINT df_rc_t_ugst DEFAULT 0 FOR ugst;
				ALTER TABLE RESTRUCTURECHARGE_TEMP ADD CONSTRAINT df_rc_t_igst DEFAULT 0 FOR igst;
				ALTER TABLE RESTRUCTURECHARGE_TEMP ADD CONSTRAINT df_rc_t_cess DEFAULT 0 FOR cess;
				ALTER TABLE RESTRUCTURECHARGE_TEMP ADD CONSTRAINT df_rc_t_Tdsamount DEFAULT 0 FOR Tdsamount; 
				ALTER TABLE RESTRUCTURECHARGE_TEMP ADD CONSTRAINT df_rc_t_TotalAmount DEFAULT 0 FOR TotalAmount; 
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#556.25" author="Siva.M" dbms="postgresql, oracle">
		<addDefaultValue columnName="ActualAmount" tableName="RESTRUCTURECHARGE_TEMP" defaultValue="0" />
		<addDefaultValue columnName="cgst" tableName="RESTRUCTURECHARGE_TEMP" defaultValue="0" />
		<addDefaultValue columnName="sgst" tableName="RESTRUCTURECHARGE_TEMP" defaultValue="0" />
		<addDefaultValue columnName="ugst" tableName="RESTRUCTURECHARGE_TEMP" defaultValue="0" />
		<addDefaultValue columnName="igst" tableName="RESTRUCTURECHARGE_TEMP" defaultValue="0" />
		<addDefaultValue columnName="cess" tableName="RESTRUCTURECHARGE_TEMP" defaultValue="0" />
		<addDefaultValue columnName="Tdsamount" tableName="RESTRUCTURECHARGE_TEMP" defaultValue="0" />
		<addDefaultValue columnName="TotalAmount" tableName="RESTRUCTURECHARGE_TEMP" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#556.26" author="Siva.M">
		<sql>
			<![CDATA[
				INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('RESTRUCT', 0, 'ae_rpPft', 'Total Repay Interest now (P)', 1, 1, 1005, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('RESTRUCT', 0, 'ae_rpPri', 'Total Repay Principal now (P)', 1, 1, 1005, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('RESTRUCT', 0, 'ae_rpTot', 'Total Repay now (P+I)', 1, 1, 1005, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('RESTRUCT', 0, 'bounceChargePaid', 'Bounce charges Paid', 1, 1, 1005, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('RESTRUCT', 0, 'PB_ReceiptAmount', 'Total Receipt Amount from Bank', 1, 1, 1005, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('RESTRUCT', 0, 'bounceCharge_CGST_P', 'Bounce charge CGST paid', 1, 1, 1005, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('RESTRUCT', 0, 'bounceCharge_SGST_P', 'Bounce charge SGST paid', 1, 1, 1005, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('RESTRUCT', 0, 'bounceCharge_IGST_P', 'Bounce charge IGST paid', 1, 1, 1005, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('RESTRUCT', 0, 'bounceCharge_UGST_P', 'Bounce charge UGST paid', 1, 1, 1005, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('RESTRUCT', 0, 'ae_lpiPaid', 'LPI Paid Now', 1, 1, 1005, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('RESTRUCT', 0, 'bounceCharge_CESS_P', 'Bounce charge CESS paid', 1, 1, 1005, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#556.27" author="Siva.M">
		<sql>
			<![CDATA[
				DELETE FROM RMTTRANSACTIONENTRY WHERE ACCOUNTSETID IN (SELECT ACCOUNTSETID FROM RMTACCOUNTINGSET WHERE ACCOUNTSETCODE = 'RESTRUCT' AND EVentCode = 'RESTRUCT'); 
				DELETE FROM RMTACCOUNTINGSET WHERE ACCOUNTSETCODE = 'RESTRUCT' AND EVENTCODE = 'RESTRUCT'; 
				
				INSERT INTO RMTACCOUNTINGSET (ACCOUNTSETID, EVENTCODE, ACCOUNTSETCODE, ACCOUNTSETCODENAME, ENTRYBYINVESTMENT, SYSTEMDEFAULT, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((Select MAX(AccountSetid)+1 FROM RMTAccountingSet ), 'RESTRUCT', 'RESTRUCT', 'Repayment Accounting with Control A/C', '0', '0', 1, 1001, CURRENT_TIMESTAMP, 'Approved', '', '', '', '', '', 0);
				
				INSERT INTO RMTTRANSACTIONENTRY (ACCOUNTSETID, TRANSORDER, TRANSDESC, DEBITCREDIT, SHADOWPOSTING, ACCOUNTTYPE, ACCOUNTBRANCH, ACCOUNT, ACCOUNTSUBHEADRULE, TRANSCATIONCODE, RVSTRANSACTIONCODE, AMOUNTRULE, RULEDECIDER, FEECODE, CHARGETYPE, ENTRYBYINVESTMENT, OPENNEWFINAC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, POSTTOSYS, DERIVEDTRANORDER) VALUES ((Select MAX(AccountSetid) FROM RMTAccountingSet ), 10, 'Restructured Capitalized Amount', 'D', '0', 'LOAN', '', 'BUILD', 'GLCREATE', '010', '510', 'Result=PB_ReceiptAmount;', NULL, '', 'D', '0', '0', 1, 0, CURRENT_TIMESTAMP, 'Approved', '', '', '', '', '', 0, 'E', 0);
				INSERT INTO RMTTRANSACTIONENTRY (ACCOUNTSETID, TRANSORDER, TRANSDESC, DEBITCREDIT, SHADOWPOSTING, ACCOUNTTYPE, ACCOUNTBRANCH, ACCOUNT, ACCOUNTSUBHEADRULE, TRANSCATIONCODE, RVSTRANSACTIONCODE, AMOUNTRULE, RULEDECIDER, FEECODE, CHARGETYPE, ENTRYBYINVESTMENT, OPENNEWFINAC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, POSTTOSYS, DERIVEDTRANORDER) VALUES  ((Select MAX(AccountSetid) FROM RMTAccountingSet ), 20, 'Repay Control A/c', 'C', '0', 'RPYCTRL', '', 'BUILD', 'GLCREATE', '510', '010', 'Result=PB_ReceiptAmount;', NULL, '', 'D', '0', '0', 1, 0, CURRENT_TIMESTAMP, 'Approved', '', '', '', '', '', 0, 'E', 0);
				INSERT INTO RMTTRANSACTIONENTRY (ACCOUNTSETID, TRANSORDER, TRANSDESC, DEBITCREDIT, SHADOWPOSTING, ACCOUNTTYPE, ACCOUNTBRANCH, ACCOUNT, ACCOUNTSUBHEADRULE, TRANSCATIONCODE, RVSTRANSACTIONCODE, AMOUNTRULE, RULEDECIDER, FEECODE, CHARGETYPE, ENTRYBYINVESTMENT, OPENNEWFINAC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, POSTTOSYS, DERIVEDTRANORDER) VALUES  ((Select MAX(AccountSetid) FROM RMTAccountingSet ), 30, 'Repay Control A/c', 'D', '0', 'RPYCTRL', '', 'BUILD', 'GLCREATE', '010', '510', 'Result=ae_rpPri+ae_rpPft;', NULL, '', 'D', '0', '0', 1, 0, CURRENT_TIMESTAMP, 'Approved', '', '', '', '', '', 0, 'E', 0);
				INSERT INTO RMTTRANSACTIONENTRY (ACCOUNTSETID, TRANSORDER, TRANSDESC, DEBITCREDIT, SHADOWPOSTING, ACCOUNTTYPE, ACCOUNTBRANCH, ACCOUNT, ACCOUNTSUBHEADRULE, TRANSCATIONCODE, RVSTRANSACTIONCODE, AMOUNTRULE, RULEDECIDER, FEECODE, CHARGETYPE, ENTRYBYINVESTMENT, OPENNEWFINAC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, POSTTOSYS, DERIVEDTRANORDER) VALUES  ((Select MAX(AccountSetid) FROM RMTAccountingSet ), 40, 'Principal Receivable A/c', 'C', '0', 'EMIRE', '', 'BUILD', 'GLCREATE', '510', '010', 'Result=ae_rpPri;', NULL, '', 'D', '0', '0', 1, 0, CURRENT_TIMESTAMP, 'Approved', '', '', '', '', '', 0, 'E', 0);
				INSERT INTO RMTTRANSACTIONENTRY (ACCOUNTSETID, TRANSORDER, TRANSDESC, DEBITCREDIT, SHADOWPOSTING, ACCOUNTTYPE, ACCOUNTBRANCH, ACCOUNT, ACCOUNTSUBHEADRULE, TRANSCATIONCODE, RVSTRANSACTIONCODE, AMOUNTRULE, RULEDECIDER, FEECODE, CHARGETYPE, ENTRYBYINVESTMENT, OPENNEWFINAC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, POSTTOSYS, DERIVEDTRANORDER) VALUES  ((Select MAX(AccountSetid) FROM RMTAccountingSet ), 50, 'Interest Receivable A/c', 'C', '0', 'EMIRE', '', 'BUILD', 'GLCREATE', '510', '010', 'Result=ae_rpPft;', NULL, '', 'D', '0', '0', 1, 0, CURRENT_TIMESTAMP, 'Approved', '', '', '', '', '', 0, 'E', 0);
				INSERT INTO RMTTRANSACTIONENTRY (ACCOUNTSETID, TRANSORDER, TRANSDESC, DEBITCREDIT, SHADOWPOSTING, ACCOUNTTYPE, ACCOUNTBRANCH, ACCOUNT, ACCOUNTSUBHEADRULE, TRANSCATIONCODE, RVSTRANSACTIONCODE, AMOUNTRULE, RULEDECIDER, FEECODE, CHARGETYPE, ENTRYBYINVESTMENT, OPENNEWFINAC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, POSTTOSYS, DERIVEDTRANORDER) VALUES  ((Select MAX(AccountSetid) FROM RMTAccountingSet ), 60, 'Repay Control A/c', 'D', '0', 'RPYCTRL', '', 'BUILD', 'GLCREATE', '010', '510', 'Result=bounceChargePaid+BOUNCE_CGST_P+BOUNCE_SGST_P+BOUNCE_IGST_P+BOUNCE_UGST_P+BOUNCE_CESS_P;', NULL, '', 'D', '0', '0', 1, 0, CURRENT_TIMESTAMP, 'Approved', '', '', '', '', '', 0, 'E', 0);
				INSERT INTO RMTTRANSACTIONENTRY (ACCOUNTSETID, TRANSORDER, TRANSDESC, DEBITCREDIT, SHADOWPOSTING, ACCOUNTTYPE, ACCOUNTBRANCH, ACCOUNT, ACCOUNTSUBHEADRULE, TRANSCATIONCODE, RVSTRANSACTIONCODE, AMOUNTRULE, RULEDECIDER, FEECODE, CHARGETYPE, ENTRYBYINVESTMENT, OPENNEWFINAC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, POSTTOSYS, DERIVEDTRANORDER) VALUES  ((Select MAX(AccountSetid) FROM RMTAccountingSet ), 70, 'Bounce charges Income', 'C', '0', 'BOUIN', '', 'BUILD', 'GLCREATE', '510', '010', 'Result=bounceChargePaid;', NULL, '', 'D', '0', '0', 1, 0, CURRENT_TIMESTAMP, 'Approved', '', '', '', '', '', 0, 'E', 0);
				INSERT INTO RMTTRANSACTIONENTRY (ACCOUNTSETID, TRANSORDER, TRANSDESC, DEBITCREDIT, SHADOWPOSTING, ACCOUNTTYPE, ACCOUNTBRANCH, ACCOUNT, ACCOUNTSUBHEADRULE, TRANSCATIONCODE, RVSTRANSACTIONCODE, AMOUNTRULE, RULEDECIDER, FEECODE, CHARGETYPE, ENTRYBYINVESTMENT, OPENNEWFINAC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, POSTTOSYS, DERIVEDTRANORDER) VALUES  ((Select MAX(AccountSetid) FROM RMTAccountingSet ), 80, 'Repay Control - Swap Charges', 'D', '0', 'RPYCTRL', '', 'BUILD', 'GLCREATE', '010', '510', 'Result=SWPCHRG_P+SWPCHRG_CGST_P+SWPCHRG_SGST_P+SWPCHRG_UGST_P+SWPCHRG_IGST_P+SWPCHRG_CESS_P;', NULL, 'SWPCHRG', 'D', '0', '0', 1, 0, CURRENT_TIMESTAMP, 'Approved', '', '', '', '', '', 0, 'E', 0);
				INSERT INTO RMTTRANSACTIONENTRY (ACCOUNTSETID, TRANSORDER, TRANSDESC, DEBITCREDIT, SHADOWPOSTING, ACCOUNTTYPE, ACCOUNTBRANCH, ACCOUNT, ACCOUNTSUBHEADRULE, TRANSCATIONCODE, RVSTRANSACTIONCODE, AMOUNTRULE, RULEDECIDER, FEECODE, CHARGETYPE, ENTRYBYINVESTMENT, OPENNEWFINAC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, POSTTOSYS, DERIVEDTRANORDER) VALUES  ((Select MAX(AccountSetid) FROM RMTAccountingSet ), 90, 'Swap Charges Income', 'C', '0', 'SWPCHGIN', '', 'BUILD', 'GLCREATE', '510', '010', 'Result=SWPCHRG_P;', NULL, 'SWPCHRG', 'D', '0', '0', 1, 0, CURRENT_TIMESTAMP, 'Approved', '', '', '', '', '', 0, 'E', 0);
				INSERT INTO RMTTRANSACTIONENTRY (ACCOUNTSETID, TRANSORDER, TRANSDESC, DEBITCREDIT, SHADOWPOSTING, ACCOUNTTYPE, ACCOUNTBRANCH, ACCOUNT, ACCOUNTSUBHEADRULE, TRANSCATIONCODE, RVSTRANSACTIONCODE, AMOUNTRULE, RULEDECIDER, FEECODE, CHARGETYPE, ENTRYBYINVESTMENT, OPENNEWFINAC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, POSTTOSYS, DERIVEDTRANORDER) VALUES  ((Select MAX(AccountSetid) FROM RMTAccountingSet ), 100, 'Repay Control A/c - FCS', 'D', '0', 'RPYCTRL', '', 'BUILD', 'GLCREATE', '010', '510', 'Result=FCS_P+FCS_CGST_P+FCS_SGST_P+FCS_UGST_P+FCS_IGST_P+FCS_CESS_P;', NULL, 'FCS', 'D', '0', '0', 1, 0, CURRENT_TIMESTAMP, 'Approved', '', '', '', '', '', 0, 'E', 0);
				INSERT INTO RMTTRANSACTIONENTRY (ACCOUNTSETID, TRANSORDER, TRANSDESC, DEBITCREDIT, SHADOWPOSTING, ACCOUNTTYPE, ACCOUNTBRANCH, ACCOUNT, ACCOUNTSUBHEADRULE, TRANSCATIONCODE, RVSTRANSACTIONCODE, AMOUNTRULE, RULEDECIDER, FEECODE, CHARGETYPE, ENTRYBYINVESTMENT, OPENNEWFINAC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, POSTTOSYS, DERIVEDTRANORDER) VALUES  ((Select MAX(AccountSetid) FROM RMTAccountingSet ), 110, 'Forclosure Statement Charges Income', 'C', '0', 'STMTCHGIN', '', 'BUILD', 'GLCREATE', '510', '010', 'Result=FCS_P;', NULL, 'FCS', 'D', '0', '0', 1, 0, CURRENT_TIMESTAMP, 'Approved', '', '', '', '', '', 0, 'E', 0);
				INSERT INTO RMTTRANSACTIONENTRY (ACCOUNTSETID, TRANSORDER, TRANSDESC, DEBITCREDIT, SHADOWPOSTING, ACCOUNTTYPE, ACCOUNTBRANCH, ACCOUNT, ACCOUNTSUBHEADRULE, TRANSCATIONCODE, RVSTRANSACTIONCODE, AMOUNTRULE, RULEDECIDER, FEECODE, CHARGETYPE, ENTRYBYINVESTMENT, OPENNEWFINAC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, POSTTOSYS, DERIVEDTRANORDER) VALUES  ((Select MAX(AccountSetid) FROM RMTAccountingSet ), 120, 'Repay Control A/c - NOC/NDC', 'D', '0', 'RPYCTRL', '', 'BUILD', 'GLCREATE', '010', '510', 'Result=NOCCHRG_P+NOCCHRG_CGST_P+NOCCHRG_SGST_P+NOCCHRG_UGST_P+NOCCHRG_IGST_P+NOCCHRG_CESS_P;', NULL, 'NOCCHRG', 'D', '0', '0', 1, 0, CURRENT_TIMESTAMP, 'Approved', '', '', '', '', '', 0, 'E', 0);
				INSERT INTO RMTTRANSACTIONENTRY (ACCOUNTSETID, TRANSORDER, TRANSDESC, DEBITCREDIT, SHADOWPOSTING, ACCOUNTTYPE, ACCOUNTBRANCH, ACCOUNT, ACCOUNTSUBHEADRULE, TRANSCATIONCODE, RVSTRANSACTIONCODE, AMOUNTRULE, RULEDECIDER, FEECODE, CHARGETYPE, ENTRYBYINVESTMENT, OPENNEWFINAC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, POSTTOSYS, DERIVEDTRANORDER) VALUES  ((Select MAX(AccountSetid) FROM RMTAccountingSet ), 130, 'NDC NOC charges Income', 'C', '0', 'STMTCHGIN', '', 'BUILD', 'GLCREATE', '510', '010', 'Result=NOCCHRG_P;', NULL, 'NOCCHRG', 'D', '0', '0', 1, 0, CURRENT_TIMESTAMP, 'Approved', '', '', '', '', '', 0, 'E', 0);
				INSERT INTO RMTTRANSACTIONENTRY (ACCOUNTSETID, TRANSORDER, TRANSDESC, DEBITCREDIT, SHADOWPOSTING, ACCOUNTTYPE, ACCOUNTBRANCH, ACCOUNT, ACCOUNTSUBHEADRULE, TRANSCATIONCODE, RVSTRANSACTIONCODE, AMOUNTRULE, RULEDECIDER, FEECODE, CHARGETYPE, ENTRYBYINVESTMENT, OPENNEWFINAC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, POSTTOSYS, DERIVEDTRANORDER) VALUES  ((Select MAX(AccountSetid) FROM RMTAccountingSet ), 140, 'Repay Control A/c - Loan Cancellation ', 'D', '0', 'RPYCTRL', '', 'BUILD', 'GLCREATE', '010', '510', 'Result=LOANNCNC_P+LOANNCNC_CGST_P+LOANNCNC_SGST_P+LOANNCNC_UGST_P+LOANNCNC_IGST_P+LOANNCNC_CESS_P;', NULL, 'LOANNCNC', 'D', '0', '0', 1, 0, CURRENT_TIMESTAMP, 'Approved', '', '', '', '', '', 0, 'E', 0);
				INSERT INTO RMTTRANSACTIONENTRY (ACCOUNTSETID, TRANSORDER, TRANSDESC, DEBITCREDIT, SHADOWPOSTING, ACCOUNTTYPE, ACCOUNTBRANCH, ACCOUNT, ACCOUNTSUBHEADRULE, TRANSCATIONCODE, RVSTRANSACTIONCODE, AMOUNTRULE, RULEDECIDER, FEECODE, CHARGETYPE, ENTRYBYINVESTMENT, OPENNEWFINAC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, POSTTOSYS, DERIVEDTRANORDER) VALUES  ((Select MAX(AccountSetid) FROM RMTAccountingSet ), 150, 'Loan Cancellation charges Income', 'C', '0', 'LONCNLIN', '', 'BUILD', 'GLCREATE', '510', '010', 'Result=LOANNCNC_P;', NULL, 'LOANNCNC', 'D', '0', '0', 1, 0, CURRENT_TIMESTAMP, 'Approved', '', '', '', '', '', 0, 'E', 0);
				INSERT INTO RMTTRANSACTIONENTRY (ACCOUNTSETID, TRANSORDER, TRANSDESC, DEBITCREDIT, SHADOWPOSTING, ACCOUNTTYPE, ACCOUNTBRANCH, ACCOUNT, ACCOUNTSUBHEADRULE, TRANSCATIONCODE, RVSTRANSACTIONCODE, AMOUNTRULE, RULEDECIDER, FEECODE, CHARGETYPE, ENTRYBYINVESTMENT, OPENNEWFINAC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, POSTTOSYS, DERIVEDTRANORDER) VALUES  ((Select MAX(AccountSetid) FROM RMTAccountingSet ), 160, 'Repay Control A/c - SOA', 'D', '0', 'RPYCTRL', '', 'BUILD', 'GLCREATE', '010', '510', 'Result=SOA_P+SOA_CGST_P+SOA_SGST_P+SOA_UGST_P+SOA_IGST_P+SOA_CESS_P;', NULL, 'SOA', 'D', '0', '0', 1, 0, CURRENT_TIMESTAMP, 'Approved', '', '', '', '', '', 0, 'E', 0);
				INSERT INTO RMTTRANSACTIONENTRY (ACCOUNTSETID, TRANSORDER, TRANSDESC, DEBITCREDIT, SHADOWPOSTING, ACCOUNTTYPE, ACCOUNTBRANCH, ACCOUNT, ACCOUNTSUBHEADRULE, TRANSCATIONCODE, RVSTRANSACTIONCODE, AMOUNTRULE, RULEDECIDER, FEECODE, CHARGETYPE, ENTRYBYINVESTMENT, OPENNEWFINAC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, POSTTOSYS, DERIVEDTRANORDER) VALUES  ((Select MAX(AccountSetid) FROM RMTAccountingSet ), 170, 'Issuance of SOA Charges Income', 'C', '0', 'STMTCHGIN', '', 'BUILD', 'GLCREATE', '510', '010', 'Result=SOA_P;', NULL, 'SOA', 'D', '0', '0', 1, 0, CURRENT_TIMESTAMP, 'Approved', '', '', '', '', '', 0, 'E', 0);
				INSERT INTO RMTTRANSACTIONENTRY (ACCOUNTSETID, TRANSORDER, TRANSDESC, DEBITCREDIT, SHADOWPOSTING, ACCOUNTTYPE, ACCOUNTBRANCH, ACCOUNT, ACCOUNTSUBHEADRULE, TRANSCATIONCODE, RVSTRANSACTIONCODE, AMOUNTRULE, RULEDECIDER, FEECODE, CHARGETYPE, ENTRYBYINVESTMENT, OPENNEWFINAC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, POSTTOSYS, DERIVEDTRANORDER) VALUES  ((Select MAX(AccountSetid) FROM RMTAccountingSet ), 180, 'Repay Control A/c - RMC', 'D', '0', 'RPYCTRL', '', 'BUILD', 'GLCREATE', '010', '510', 'Result=RMC_P+RMC_CGST_P+RMC_SGST_P+RMC_UGST_P+RMC_IGST_P+RMC_CESS_P;', NULL, 'RMC', 'D', '0', '0', 1, 0, CURRENT_TIMESTAMP, 'Approved', '', '', '', '', '', 0, 'E', 0);
				INSERT INTO RMTTRANSACTIONENTRY (ACCOUNTSETID, TRANSORDER, TRANSDESC, DEBITCREDIT, SHADOWPOSTING, ACCOUNTTYPE, ACCOUNTBRANCH, ACCOUNT, ACCOUNTSUBHEADRULE, TRANSCATIONCODE, RVSTRANSACTIONCODE, AMOUNTRULE, RULEDECIDER, FEECODE, CHARGETYPE, ENTRYBYINVESTMENT, OPENNEWFINAC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, POSTTOSYS, DERIVEDTRANORDER) VALUES  ((Select MAX(AccountSetid) FROM RMTAccountingSet ), 190, 'Restructure Modification Charges Income', 'C', '0', 'RSCHDIN', '', 'BUILD', 'GLCREATE', '510', '010', 'Result=RMC_P;', NULL, 'RMC', 'D', '0', '0', 1, 0, CURRENT_TIMESTAMP, 'Approved', '', '', '', '', '', 0, 'E', 0);
				INSERT INTO RMTTRANSACTIONENTRY (ACCOUNTSETID, TRANSORDER, TRANSDESC, DEBITCREDIT, SHADOWPOSTING, ACCOUNTTYPE, ACCOUNTBRANCH, ACCOUNT, ACCOUNTSUBHEADRULE, TRANSCATIONCODE, RVSTRANSACTIONCODE, AMOUNTRULE, RULEDECIDER, FEECODE, CHARGETYPE, ENTRYBYINVESTMENT, OPENNEWFINAC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, POSTTOSYS, DERIVEDTRANORDER) VALUES  ((Select MAX(AccountSetid) FROM RMTAccountingSet ), 200, 'Repay Control A/c - ITC', 'D', '0', 'RPYCTRL', '', 'BUILD', 'GLCREATE', '010', '510', 'Result=ITC_P+ITC_CGST_P+ITC_SGST_P+ITC_UGST_P+ITC_IGST_P+ITC_CESS_P;', NULL, 'ITC', 'D', '0', '0', 1, 0, CURRENT_TIMESTAMP, 'Approved', '', '', '', '', '', 0, 'E', 0);
				INSERT INTO RMTTRANSACTIONENTRY (ACCOUNTSETID, TRANSORDER, TRANSDESC, DEBITCREDIT, SHADOWPOSTING, ACCOUNTTYPE, ACCOUNTBRANCH, ACCOUNT, ACCOUNTSUBHEADRULE, TRANSCATIONCODE, RVSTRANSACTIONCODE, AMOUNTRULE, RULEDECIDER, FEECODE, CHARGETYPE, ENTRYBYINVESTMENT, OPENNEWFINAC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, POSTTOSYS, DERIVEDTRANORDER) VALUES  ((Select MAX(AccountSetid) FROM RMTAccountingSet ), 210, 'Income Tax Certificate Charge Income', 'C', '0', 'FEEINCOME', '', 'BUILD', 'GLCREATE', '510', '010', 'Result=ITC_P;', NULL, 'ITC', 'D', '0', '0', 1, 0, CURRENT_TIMESTAMP, 'Approved', '', '', '', '', '', 0, 'E', 0);
				INSERT INTO RMTTRANSACTIONENTRY (ACCOUNTSETID, TRANSORDER, TRANSDESC, DEBITCREDIT, SHADOWPOSTING, ACCOUNTTYPE, ACCOUNTBRANCH, ACCOUNT, ACCOUNTSUBHEADRULE, TRANSCATIONCODE, RVSTRANSACTIONCODE, AMOUNTRULE, RULEDECIDER, FEECODE, CHARGETYPE, ENTRYBYINVESTMENT, OPENNEWFINAC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, POSTTOSYS, DERIVEDTRANORDER) VALUES  ((Select MAX(AccountSetid) FROM RMTAccountingSet ), 220, 'Repay Control A/c - Document Retrieval', 'D', '0', 'RPYCTRL', '', 'BUILD', 'GLCREATE', '010', '510', 'Result=DOCFEE_P+DOCFEE_CGST_P+DOCFEE_SGST_P+DOCFEE_UGST_P+DOCFEE_IGST_P+DOCFEE_CESS_P;', NULL, 'DOCFEE', 'D', '0', '0', 1, 0, CURRENT_TIMESTAMP, 'Approved', '', '', '', '', '', 0, 'E', 0);
				INSERT INTO RMTTRANSACTIONENTRY (ACCOUNTSETID, TRANSORDER, TRANSDESC, DEBITCREDIT, SHADOWPOSTING, ACCOUNTTYPE, ACCOUNTBRANCH, ACCOUNT, ACCOUNTSUBHEADRULE, TRANSCATIONCODE, RVSTRANSACTIONCODE, AMOUNTRULE, RULEDECIDER, FEECODE, CHARGETYPE, ENTRYBYINVESTMENT, OPENNEWFINAC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, POSTTOSYS, DERIVEDTRANORDER) VALUES  ((Select MAX(AccountSetid) FROM RMTAccountingSet ), 230, 'Document Retrieval Charge Income', 'C', '0', 'FEEINCOME', '', 'BUILD', 'GLCREATE', '510', '010', 'Result=DOCFEE_P;', NULL, 'DOCFEE', 'D', '0', '0', 1, 0, CURRENT_TIMESTAMP, 'Approved', '', '', '', '', '', 0, 'E', 0);
				INSERT INTO RMTTRANSACTIONENTRY (ACCOUNTSETID, TRANSORDER, TRANSDESC, DEBITCREDIT, SHADOWPOSTING, ACCOUNTTYPE, ACCOUNTBRANCH, ACCOUNT, ACCOUNTSUBHEADRULE, TRANSCATIONCODE, RVSTRANSACTIONCODE, AMOUNTRULE, RULEDECIDER, FEECODE, CHARGETYPE, ENTRYBYINVESTMENT, OPENNEWFINAC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, POSTTOSYS, DERIVEDTRANORDER) VALUES  ((Select MAX(AccountSetid) FROM RMTAccountingSet ), 240, 'Bounce GST Paid', 'C', '0', 'BOURE', '', 'BUILD', 'GLCREATE', '510', '010', 'Result=BOUNCE_CGST_P+BOUNCE_SGST_P+BOUNCE_IGST_P+BOUNCE_UGST_P+BOUNCE_CESS_P;', NULL, 'MNLFEE', 'D', '0', '0', 1, 0, CURRENT_TIMESTAMP, 'Approved', '', '', '', '', '', 0, 'E', 0);
				INSERT INTO RMTTRANSACTIONENTRY (ACCOUNTSETID, TRANSORDER, TRANSDESC, DEBITCREDIT, SHADOWPOSTING, ACCOUNTTYPE, ACCOUNTBRANCH, ACCOUNT, ACCOUNTSUBHEADRULE, TRANSCATIONCODE, RVSTRANSACTIONCODE, AMOUNTRULE, RULEDECIDER, FEECODE, CHARGETYPE, ENTRYBYINVESTMENT, OPENNEWFINAC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, POSTTOSYS, DERIVEDTRANORDER) VALUES  ((Select MAX(AccountSetid) FROM RMTAccountingSet ), 250, 'CGST Income', 'C', '0', 'CGST', '', 'BUILD', 'GLCREATE', '510', '010', 'Result=LOANNCNC_CGST_P+ITC_CGST_P+SOA_CGST_P+FCS_CGST_P+RMC_CGST_P+SWPCHRG_CGST_P+NOCCHRG_CGST_P+DOCFEE_CGST_P;', NULL, '', 'D', '0', '0', 1, 0, CURRENT_TIMESTAMP, 'Approved', '', '', '', '', '', 0, 'E', 0);
				INSERT INTO RMTTRANSACTIONENTRY (ACCOUNTSETID, TRANSORDER, TRANSDESC, DEBITCREDIT, SHADOWPOSTING, ACCOUNTTYPE, ACCOUNTBRANCH, ACCOUNT, ACCOUNTSUBHEADRULE, TRANSCATIONCODE, RVSTRANSACTIONCODE, AMOUNTRULE, RULEDECIDER, FEECODE, CHARGETYPE, ENTRYBYINVESTMENT, OPENNEWFINAC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, POSTTOSYS, DERIVEDTRANORDER) VALUES  ((Select MAX(AccountSetid) FROM RMTAccountingSet ), 260, 'SGST Income', 'C', '0', 'SGST', '', 'BUILD', 'GLCREATE', '510', '010', 'Result=LOANNCNC_SGST_P+ITC_SGST_P+SOA_SGST_P+FCS_SGST_P+RMC_SGST_P+SWPCHRG_SGST_P+NOCCHRG_SGST_P+DOCFEE_SGST_P;', NULL, '', 'D', '0', '0', 1, 0, CURRENT_TIMESTAMP, 'Approved', '', '', '', '', '', 0, 'E', 0);
				INSERT INTO RMTTRANSACTIONENTRY (ACCOUNTSETID, TRANSORDER, TRANSDESC, DEBITCREDIT, SHADOWPOSTING, ACCOUNTTYPE, ACCOUNTBRANCH, ACCOUNT, ACCOUNTSUBHEADRULE, TRANSCATIONCODE, RVSTRANSACTIONCODE, AMOUNTRULE, RULEDECIDER, FEECODE, CHARGETYPE, ENTRYBYINVESTMENT, OPENNEWFINAC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, POSTTOSYS, DERIVEDTRANORDER) VALUES  ((Select MAX(AccountSetid) FROM RMTAccountingSet ), 270, 'UGST Income', 'C', '0', 'UGST', '', 'BUILD', 'GLCREATE', '510', '010', 'Result=LOANNCNC_UGST_P+ITC_UGST_P+SOA_UGST_P+FCS_UGST_P+RMC_UGST_P+SWPCHRG_UGST_P+NOCCHRG_UGST_P+DOCFEE_UGST_P;', NULL, '', 'D', '0', '0', 1, 0, CURRENT_TIMESTAMP, 'Approved', '', '', '', '', '', 0, 'E', 0);
				INSERT INTO RMTTRANSACTIONENTRY (ACCOUNTSETID, TRANSORDER, TRANSDESC, DEBITCREDIT, SHADOWPOSTING, ACCOUNTTYPE, ACCOUNTBRANCH, ACCOUNT, ACCOUNTSUBHEADRULE, TRANSCATIONCODE, RVSTRANSACTIONCODE, AMOUNTRULE, RULEDECIDER, FEECODE, CHARGETYPE, ENTRYBYINVESTMENT, OPENNEWFINAC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, POSTTOSYS, DERIVEDTRANORDER) VALUES  ((Select MAX(AccountSetid) FROM RMTAccountingSet ), 280, 'IGST Income', 'C', '0', 'IGST', '', 'BUILD', 'GLCREATE', '510', '010', 'Result=LOANNCNC_IGST_P+ITC_IGST_P+SOA_IGST_P+FCS_IGST_P+RMC_IGST_P+SWPCHRG_IGST_P+NOCCHRG_IGST_P+DOCFEE_IGST_P;', NULL, '', 'D', '0', '0', 1, 0, CURRENT_TIMESTAMP, 'Approved', '', '', '', '', '', 0, 'E', 0);
				INSERT INTO RMTTRANSACTIONENTRY (ACCOUNTSETID, TRANSORDER, TRANSDESC, DEBITCREDIT, SHADOWPOSTING, ACCOUNTTYPE, ACCOUNTBRANCH, ACCOUNT, ACCOUNTSUBHEADRULE, TRANSCATIONCODE, RVSTRANSACTIONCODE, AMOUNTRULE, RULEDECIDER, FEECODE, CHARGETYPE, ENTRYBYINVESTMENT, OPENNEWFINAC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, POSTTOSYS, DERIVEDTRANORDER) VALUES  ((Select MAX(AccountSetid) FROM RMTAccountingSet ), 290, 'CESS Income', 'C', '0', 'CLIXBANK', '', 'BUILD', 'GLCREATE', '510', '010', 'Result=LOANNCNC_CESS_P+ITC_CESS_P+SOA_CESS_P+FCS_CESS_P+RMC_CESS_P+SWPCHRG_CESS_P+NOCCHRG_CESS_P+DOCFEE_CESS_P;', NULL, '', 'D', '0', '0', 1, 0, CURRENT_TIMESTAMP, 'Approved', '', '', '', '', '', 0, 'E', 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#556.28" author="Siva.M">
		<sql>
			<![CDATA[
				DELETE FROM CATEGORYWISEEVENTS WHERE AEEVENTCODE = 'RESTRUCT' and CATEGORYCODE = 'F';
				INSERT INTO CATEGORYWISEEVENTS (AEEVENTCODE, CATEGORYCODE, ACTIVE, MANDATORY, SEQORDER) VALUES('RESTRUCT', 'F' , 1, 1,30);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#556.29" author="Siva.M">
		<sql>
			<![CDATA[
				INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('RESTRUCT', 0, 'Restruct_Bpi', 'BPI Amount on Restructuring', 1, 1, 1005, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#556.30" author="Siva.M">
		<sql>
			<![CDATA[
				DELETE FROM SMTPARAMETERS WHERE SYSPARMCODE = 'FEETYPE_RESTRUCT_CPZ';
				INSERT INTO SMTPARAMETERS (SYSPARMCODE, SYSPARMDESC, SYSPARMTYPE, SYSPARMMAINT, SYSPARMVALUE, SYSPARMLENGTH, SYSPARMDEC,SYSPARMLIST, SYSPARMVALDMOD, SYSPARMDESCRIPTION, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('FEETYPE_RESTRUCT_CPZ', 'Restructure Cpz Amount Fee', 'String', '1', 'RESTRUCT', 8, 0, null, null, 'FEETYPE_RESTRUCT_CPZ', 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#556.31" author="Manoj.P">
		<sql>
			<![CDATA[
			 	UPDATE RESTRUCTURE_TYPES SET MAXEMITERM = 24 WHERE RSTTYPECODE = 'Scenario8';
  			 	UPDATE RESTRUCTURE_TYPES SET MAXEMITERM = 24 WHERE RSTTYPECODE = 'Scenario7';
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#556.32" author="saiteja.r">
		<sql>
		<![CDATA[
			DELETE FROM ERRORDETAILS WHERE CODE = '92021';
			DELETE FROM ERRORDETAILS WHERE CODE = '12721';
			DELETE FROM ERRORDETAILS WHERE CODE = '12722';
			DELETE FROM ERRORDETAILS WHERE CODE = '12723';
			DELETE FROM ERRORDETAILS WHERE CODE = '12724';
			DELETE FROM ERRORDETAILS WHERE CODE = '12725';
				
			INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION) VALUES ('92021', 'EN', 'E', '{0}', 'error', 'Approved', null, null, null, null, null, 0, null, 1000, 0);
			INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION) VALUES ('12721', 'EN', 'E', '{0} should after {1} and before {2}', 'error', 'Approved', null, null, null, null, null, 0, null, 1000, 0);
			INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION) VALUES ('12722', 'EN', 'E', 'Restructure not allowed for daily loans', 'error', 'Approved', null, null, null, null, null, 0, null, 1000, 0);
			INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION) VALUES ('12723', 'EN', 'E', '{0} cannot be greater than {1}', 'error', 'Approved', null, null, null, null, null, 0, null, 1000, 0);
			INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION) VALUES ('12724', 'EN', 'E', '{0} should be {1} for restructure type scenario 7 & 8', 'error', 'Approved', null, null, null, null, null, 0, null, 1000, 0);
			INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION) VALUES ('12725', 'EN', 'E', 'Not allowed to override actual amount for {0}', 'error', 'Approved', null, null, null, null, null, 0, null, 1000, 0);
		]]>
		</sql>
	</changeSet>

	<changeSet id="PSD#160002.1_pre" author="saiteja.r" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'cibil_customer_loans_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="PSD#160002.1" author="saiteja.r">
		<createView viewName="CIBIL_CUSTOMER_LOANS_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT AT.SEGMENT_TYPE,
					CU.CUSTID,
					AT.CODE FINTYPE,
					FM.FINREFERENCE,
					FM.FINSTARTDATE,
					FM.FINAPPROVEDDATE,
					PD.LATESTRPYDATE,
					FM.REPAYFRQ,
					${add.schema}udf_convertcurrency(FM.FINASSETVALUE, FM.FINCCY, 'INR') FINASSETVALUE,
					${add.schema}udf_convertcurrency(PD.TOTALPRIBAL, FM.FINCCY, 'INR') FUTURE_SCHEDULE_PRIN,
					${add.schema}udf_convertcurrency(PD.ODPRINCIPAL + PD.ODPROFIT, FM.FINCCY, 'INR') INSTALMENT_DUE,
					${add.schema}udf_convertcurrency(PD.TOTALPFTPAID + PD.TOTALPRIPAID, FM.FINCCY, 'INR') INSTALMENT_PAID,
					${add.schema}udf_convertcurrency(MA.BOUNCE_DUE, FM.FINCCY, 'INR') BOUNCE_DUE,
					${add.schema}udf_convertcurrency(MA.BOUNCE_PAID, FM.FINCCY, 'INR') BOUNCE_PAID,
					${add.schema}udf_convertcurrency(FO.LATE_PAYMENT_PENALTY_DUE, FM.FINCCY, 'INR') LATE_PAYMENT_PENALTY_DUE,
					${add.schema}udf_convertcurrency(FO.LATE_PAYMENT_PENALTY_PAID, FM.FINCCY, 'INR') LATE_PAYMENT_PENALTY_PAID,
					${add.schema}udf_convertcurrency(PD.TOTALPRISCHD, FM.FINCCY, 'INR') TOTAL_PRI_SCHD,
					${add.schema}udf_convertcurrency(PD.TOTALPRIPAID, FM.FINCCY, 'INR') TOTAL_PRI_PAID,
					${add.schema}udf_convertcurrency(PD.TOTALPFTSCHD, FM.FINCCY, 'INR') TOTAL_PFT_SCHD,
					${add.schema}udf_convertcurrency(PD.TOTALPFTPAID, FM.FINCCY, 'INR') TOTAL_PFT_PAID,
					${add.schema}udf_convertcurrency(FE.EXCESS_AMOUNT, FM.FINCCY, 'INR') EXCESS_AMOUNT,
					${add.schema}udf_convertcurrency(FE.EXCESS_AMT_PAID, FM.FINCCY, 'INR') EXCESS_AMT_PAID,
					PD.CURODDAYS,
					PD.MATURITYDATE,
					PD.CURREDUCINGRATE,
					FM.CLOSINGSTATUS,
					CU.OWNERSHIP,
					FM.NUMBEROFTERMS,
					FM.FIRSTREPAY,
					${add.schema}udf_convertcurrency(CI.CUSTINCOME, FM.FINCCY, 'INR') CUSTINCOME
				FROM FINANCEMAIN FM
			    JOIN CIBIL_CUSTOMER_EXTRACT CU ON CU.FINREFERENCE = FM.FINREFERENCE
			    JOIN FINPFTDETAILS PD ON PD.FINREFERENCE = FM.FINREFERENCE
			    JOIN CIBIL_ACCOUNT_TYPES_MAPPING ATM ON ATM.FIN_TYPE = FM.FINTYPE
			    JOIN CIBIL_ACCOUNT_TYPES AT ON AT.CODE = ATM.CODE AND AT.SEGMENT_TYPE = ATM.SEGMENT_TYPE
			    LEFT JOIN ( SELECT MA_1.FINREFERENCE, Sum(COALESCE(MA_1.ADVISEAMOUNT, 0) - COALESCE(MA_1.PAIDAMOUNT, 0) - COALESCE(MA_1.WAIVEDAMOUNT, 0)) BOUNCE_DUE, Sum(Ma_1.Paidamount) BOUNCE_PAID FROM MANUALADVISE MA_1 WHERE MA_1.BOUNCEID > 0 GROUP BY MA_1.FINREFERENCE) MA ON MA.FINREFERENCE = FM.FINREFERENCE
			    LEFT JOIN ( SELECT FINODDETAILS.FINREFERENCE, Sum(FINODDETAILS.TOTPENALTYBAL) LATE_PAYMENT_PENALTY_DUE, Sum(FINODDETAILS.TOTPENALTYPAID) LATE_PAYMENT_PENALTY_PAID FROM FINODDETAILS GROUP BY FINODDETAILS.FINREFERENCE) FO ON FO.FINREFERENCE = FM.FINREFERENCE
			    LEFT JOIN ( SELECT FINEXCESSAMOUNT.FINREFERENCE, Sum(FINEXCESSAMOUNT.AMOUNT) EXCESS_AMOUNT, Sum(COALESCE(FINEXCESSAMOUNT.UTILISEDAMT, 0) + COALESCE(FINEXCESSAMOUNT.RESERVEDAMT, 0)) EXCESS_AMT_PAID FROM FINEXCESSAMOUNT GROUP BY FINEXCESSAMOUNT.FINREFERENCE) FE ON FE.FINREFERENCE = FM.FINREFERENCE
			    LEFT JOIN ( SELECT CUSTOMERINCOMES.CUSTID, COALESCE(Sum(CUSTOMERINCOMES.CUSTINCOME), 0) CUSTINCOME FROM CUSTOMERINCOMES GROUP BY CUSTOMERINCOMES.CUSTID) CI ON CI.CUSTID = CU.CUSTID
			]]>	
		</createView>
	</changeSet>

	<changeSet id="PSD#160002.1_post" author="saiteja.r" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'cibil_customer_loans_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="PSD#160002.2_pre" author="saiteja.r" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'cibil_customer_extarct_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="PSD#160002.2" author="saiteja.r">
		<createView viewName="CIBIL_CUSTOMER_EXTARCT_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT C.CUSTID,
					FM.FINREFERENCE,
					CASE WHEN FM.FINREFERENCE IS NULL THEN 4
						ELSE 1 END OWNERSHIP,
					PD.LATESTRPYDATE,
					SMT.ENTITYCODE
				FROM FINANCEMAIN FM
				JOIN CUSTOMERS C ON C.CUSTID = FM.CUSTID
				JOIN FINPFTDETAILS PD ON PD.FINREFERENCE = FM.FINREFERENCE
				JOIN RMTFINANCETYPES RFT ON RFT.FINTYPE = PD.FINTYPE
				JOIN SMTDIVISIONDETAIL SMT ON SMT.DIVISIONCODE = RFT.FINDIVISION
				WHERE (C.CUSTID IN ( SELECT DISTINCT FINANCEMAIN.CUSTID FROM FINANCEMAIN)) AND (C.CUSTTYPECODE IN (SELECT RMTCUSTTYPES.CUSTTYPECODE FROM RMTCUSTTYPES WHERE RMTCUSTTYPES.CUSTTYPECTG = 'RETAIL'))
				UNION ALL
				SELECT C.CUSTID,
					FM.FINREFERENCE,
					3 OWNERSHIP,
					PD.LATESTRPYDATE,
					SMT.ENTITYCODE
				FROM FINGUARANTORSDETAILS GD
				JOIN CUSTOMERS C ON C.CUSTCIF = GD.GUARANTORCIF
				JOIN FINANCEMAIN FM ON FM.FINREFERENCE = GD.FINREFERENCE
				JOIN FINPFTDETAILS PD ON PD.FINREFERENCE = GD.FINREFERENCE
				JOIN RMTFINANCETYPES RFT ON RFT.FINTYPE = PD.FINTYPE
				JOIN SMTDIVISIONDETAIL SMT ON SMT.DIVISIONCODE = RFT.FINDIVISION
				WHERE (C.CUSTID IN ( SELECT DISTINCT FINANCEMAIN.CUSTID FROM FINANCEMAIN)) AND (C.CUSTTYPECODE IN (SELECT RMTCUSTTYPES.CUSTTYPECODE FROM RMTCUSTTYPES WHERE RMTCUSTTYPES.CUSTTYPECTG = 'RETAIL'))
				UNION ALL
				SELECT C.CUSTID,
					FM.FINREFERENCE,
					4 OWNERSHIP,
					PD.LATESTRPYDATE,
					SMT.ENTITYCODE
				FROM FINJOINTACCOUNTDETAILS JA
				JOIN CUSTOMERS C ON C.CUSTCIF = JA.CUSTCIF
				JOIN FINANCEMAIN FM ON FM.FINREFERENCE = JA.FINREFERENCE
				JOIN FINPFTDETAILS PD ON PD.FINREFERENCE = JA.FINREFERENCE
				JOIN RMTFINANCETYPES RFT ON RFT.FINTYPE = PD.FINTYPE
				JOIN SMTDIVISIONDETAIL SMT ON SMT.DIVISIONCODE = RFT.FINDIVISION
				WHERE (C.CUSTID IN ( SELECT DISTINCT FINANCEMAIN.CUSTID FROM FINANCEMAIN)) AND (C.CUSTTYPECODE IN (SELECT RMTCUSTTYPES.CUSTTYPECODE FROM RMTCUSTTYPES WHERE RMTCUSTTYPES.CUSTTYPECTG = 'RETAIL'))
			]]>	
		</createView>
	</changeSet>

	<changeSet id="PSD#160002.2_post" author="saiteja.r" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'cibil_customer_extarct_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="PSD#160002.3" author="saiteja.r">
		<addColumn tableName="CIBIL_CUSTOMER_EXTRACT">
			<column name="Entity" type="char(8)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#556.33_pre" author="Siva.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'restructure_details_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#556.33" author="Siva.M" dbms="postgresql,mssql">
		<createView viewName="RESTRUCTURE_DETAILS_VIEW" replaceIfExists="true"> 
			<![CDATA[
				SELECT T1.ID,
					FINREFERENCE,
				    RESTRUCTURETYPE,
				    EMIHLDPERIOD,
				    PRIHLDPERIOD,
				    EMIPERIODS,
				    TOTNOOFRESTRUCTURE,
				    RECALCULATIONTYPE,
				    SERVICEREQUESTNO,
				    REMARK,
				    VERSION,
				    LASTMNTBY,
				    LASTMNTON,
				    RECORDSTATUS,
				    ROLECODE,
				    NEXTROLECODE,
				    TASKID,
				    NEXTTASKID,
				    RECORDTYPE,
				    WORKFLOWID,
				    OLDBUCKET,
				    NEWBUCKET,
				    OLDEMIOS,
				    NEWEMIOS,
				    OLDBALTENURE,
				    NEWBALTENURE,
				    OLDMATURITY,
				    NEWMATURITY,
				    LASTBILLEDDATE,
				    LASTBILLEDINSTNO,
				    ACTLOANAMOUNT,
				    OLDTENURE,
				    NEWTENURE,
				    OLDINTEREST,
				    NEWINTEREST,
				    OLDMAXUNPLANNEDEMI,
				    NEWMAXUNPLANNEDEMI,
				    OLDAVAILEDUNPLANEMI,
				    NEWAVAILEDUNPLANEMI,
				    OLDFINALEMI,
				    NEWFINALEMI,
				    TENORCHANGE,
				    EMIRECAL,
				    RESTRUCTUREDATE,
				    RESTRUCTUREREASON,
				    OLDDPD,
				    NEWDPD,
				    OLDCPZINTEREST,
				    NEWCPZINTEREST,
				    EMIHLDSTARTDATE,
				    EMIHLDENDDATE,
				    PRIHLDSTARTDATE,
				    PRIHLDENDDATE,
				    OLDPOSAMOUNT, 
				    NEWPOSAMOUNT, 
				    OLDEMIOVERDUE, 
				    NEWEMIOVERDUE, 
				    BOUNCECHARGE, 
				    OLDPENALTYAMOUNT,
				    NEWPENALTYAMOUNT, 
				    OTHERCHARGE, 
				    RESTRUCTURECHARGE,
				    APPDATE,
					T2.RSTTYPECODE, 
					T2.RSTTYPEDESC, 
				    FINCURRASSETVALUE,
				    OLDEXTODDAYS, 
				    NEWEXTODDAYS,
				    REPAYPROFITRATE,
					T1.GRCMAXAMOUNT,
					T1.BASERATE,
					T1.SPLRATE,
					T1.MARGIN,
					T1.RECEIPTID
				FROM RESTRUCTURE_DETAILS_TEMP T1 
			  	INNER JOIN RESTRUCTURE_TYPES T2 ON CAST(T1.RESTRUCTURETYPE AS BIGINT) = T2.ID
				UNION ALL	 
		 		SELECT T1.ID, 
				    FINREFERENCE,
				    RESTRUCTURETYPE,
				    EMIHLDPERIOD,
				    PRIHLDPERIOD,
				    EMIPERIODS,
				    TOTNOOFRESTRUCTURE,
				    RECALCULATIONTYPE,
				    SERVICEREQUESTNO,
				    REMARK,
				    VERSION,
				    LASTMNTBY,
				    LASTMNTON,
				    RECORDSTATUS,
				    ROLECODE,
				    NEXTROLECODE,
				    TASKID,
				    NEXTTASKID,
				    RECORDTYPE,
				    WORKFLOWID,
				    OLDBUCKET,
				    NEWBUCKET,
				    OLDEMIOS,
				    NEWEMIOS,
				    OLDBALTENURE,
				    NEWBALTENURE,
				    OLDMATURITY,
				    NEWMATURITY,
				    LASTBILLEDDATE,
				    LASTBILLEDINSTNO,
				    ACTLOANAMOUNT,
				    OLDTENURE,
				    NEWTENURE,
				    OLDINTEREST,
				    NEWINTEREST,
				    OLDMAXUNPLANNEDEMI,
				    NEWMAXUNPLANNEDEMI,
				    OLDAVAILEDUNPLANEMI,
				    NEWAVAILEDUNPLANEMI,
				    OLDFINALEMI,
				    NEWFINALEMI,
				    TENORCHANGE,
				    EMIRECAL,
				    RESTRUCTUREDATE,
				    RESTRUCTUREREASON,
				    OLDDPD,
				    NEWDPD,
				    OLDCPZINTEREST,
				    NEWCPZINTEREST,
				    EMIHLDSTARTDATE,
				    EMIHLDENDDATE,
				    PRIHLDSTARTDATE,
				    PRIHLDENDDATE,
				    OLDPOSAMOUNT, 
				    NEWPOSAMOUNT, 
				    OLDEMIOVERDUE, 
				    NEWEMIOVERDUE, 
				    BOUNCECHARGE, 
				    OLDPENALTYAMOUNT,
				    NEWPENALTYAMOUNT, 
				    OTHERCHARGE, 
				    RESTRUCTURECHARGE,
				    APPDATE,
					T2.RSTTYPECODE, 
					T2.RSTTYPEDESC, 
				    FINCURRASSETVALUE,
				    OLDEXTODDAYS, 
				    NEWEXTODDAYS,
				    REPAYPROFITRATE,
					T1.GRCMAXAMOUNT,
					T1.BASERATE,
					T1.SPLRATE,
					T1.MARGIN,
					T1.RECEIPTID
				FROM RESTRUCTURE_DETAILS T1 
				INNER JOIN RESTRUCTURE_TYPES T2 ON CAST(T1.RESTRUCTURETYPE AS BIGINT) = T2.ID
				WHERE NOT EXISTS (SELECT 1 FROM RESTRUCTURE_DETAILS_TEMP WHERE ID = T1.ID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#556.33" author="Siva.M" dbms="oracle">
		<createView viewName="RESTRUCTURE_DETAILS_VIEW" replaceIfExists="true"> 
			<![CDATA[
				SELECT T1.ID,
					FINREFERENCE,
				    RESTRUCTURETYPE,
				    EMIHLDPERIOD,
				    PRIHLDPERIOD,
				    EMIPERIODS,
				    TOTNOOFRESTRUCTURE,
				    RECALCULATIONTYPE,
				    SERVICEREQUESTNO,
				    REMARK,
				    VERSION,
				    LASTMNTBY,
				    LASTMNTON,
				    RECORDSTATUS,
				    ROLECODE,
				    NEXTROLECODE,
				    TASKID,
				    NEXTTASKID,
				    RECORDTYPE,
				    WORKFLOWID,
				    OLDBUCKET,
				    NEWBUCKET,
				    OLDEMIOS,
				    NEWEMIOS,
				    OLDBALTENURE,
				    NEWBALTENURE,
				    OLDMATURITY,
				    NEWMATURITY,
				    LASTBILLEDDATE,
				    LASTBILLEDINSTNO,
				    ACTLOANAMOUNT,
				    OLDTENURE,
				    NEWTENURE,
				    OLDINTEREST,
				    NEWINTEREST,
				    OLDMAXUNPLANNEDEMI,
				    NEWMAXUNPLANNEDEMI,
				    OLDAVAILEDUNPLANEMI,
				    NEWAVAILEDUNPLANEMI,
				    OLDFINALEMI,
				    NEWFINALEMI,
				    TENORCHANGE,
				    EMIRECAL,
				    RESTRUCTUREDATE,
				    RESTRUCTUREREASON,
				    OLDDPD,
				    NEWDPD,
				    OLDCPZINTEREST,
				    NEWCPZINTEREST,
				    EMIHLDSTARTDATE,
				    EMIHLDENDDATE,
				    PRIHLDSTARTDATE,
				    PRIHLDENDDATE,
				    OLDPOSAMOUNT, 
				    NEWPOSAMOUNT, 
				    OLDEMIOVERDUE, 
				    NEWEMIOVERDUE, 
				    BOUNCECHARGE, 
				    OLDPENALTYAMOUNT,
				    NEWPENALTYAMOUNT, 
				    OTHERCHARGE, 
				    RESTRUCTURECHARGE,
				    APPDATE,
					T2.RSTTYPECODE, 
					T2.RSTTYPEDESC, 
				    FINCURRASSETVALUE,
				    OLDEXTODDAYS, 
				    NEWEXTODDAYS,
				    REPAYPROFITRATE,
					T1.GRCMAXAMOUNT,
					T1.BASERATE,
					T1.SPLRATE,
					T1.MARGIN,
					T1.RECEIPTID
				FROM RESTRUCTURE_DETAILS_TEMP T1 
			  	INNER JOIN RESTRUCTURE_TYPES T2 ON CAST(T1.RESTRUCTURETYPE AS number) = T2.ID
				UNION ALL	 
		 		SELECT T1.ID, 
				    FINREFERENCE,
				    RESTRUCTURETYPE,
				    EMIHLDPERIOD,
				    PRIHLDPERIOD,
				    EMIPERIODS,
				    TOTNOOFRESTRUCTURE,
				    RECALCULATIONTYPE,
				    SERVICEREQUESTNO,
				    REMARK,
				    VERSION,
				    LASTMNTBY,
				    LASTMNTON,
				    RECORDSTATUS,
				    ROLECODE,
				    NEXTROLECODE,
				    TASKID,
				    NEXTTASKID,
				    RECORDTYPE,
				    WORKFLOWID,
				    OLDBUCKET,
				    NEWBUCKET,
				    OLDEMIOS,
				    NEWEMIOS,
				    OLDBALTENURE,
				    NEWBALTENURE,
				    OLDMATURITY,
				    NEWMATURITY,
				    LASTBILLEDDATE,
				    LASTBILLEDINSTNO,
				    ACTLOANAMOUNT,
				    OLDTENURE,
				    NEWTENURE,
				    OLDINTEREST,
				    NEWINTEREST,
				    OLDMAXUNPLANNEDEMI,
				    NEWMAXUNPLANNEDEMI,
				    OLDAVAILEDUNPLANEMI,
				    NEWAVAILEDUNPLANEMI,
				    OLDFINALEMI,
				    NEWFINALEMI,
				    TENORCHANGE,
				    EMIRECAL,
				    RESTRUCTUREDATE,
				    RESTRUCTUREREASON,
				    OLDDPD,
				    NEWDPD,
				    OLDCPZINTEREST,
				    NEWCPZINTEREST,
				    EMIHLDSTARTDATE,
				    EMIHLDENDDATE,
				    PRIHLDSTARTDATE,
				    PRIHLDENDDATE,
				    OLDPOSAMOUNT, 
				    NEWPOSAMOUNT, 
				    OLDEMIOVERDUE, 
				    NEWEMIOVERDUE, 
				    BOUNCECHARGE, 
				    OLDPENALTYAMOUNT,
				    NEWPENALTYAMOUNT, 
				    OTHERCHARGE, 
				    RESTRUCTURECHARGE,
				    APPDATE,
					T2.RSTTYPECODE, 
					T2.RSTTYPEDESC, 
				    FINCURRASSETVALUE,
				    OLDEXTODDAYS, 
				    NEWEXTODDAYS,
				    REPAYPROFITRATE,
					T1.GRCMAXAMOUNT,
					T1.BASERATE,
					T1.SPLRATE,
					T1.MARGIN,
					T1.RECEIPTID
				FROM RESTRUCTURE_DETAILS T1 
				INNER JOIN RESTRUCTURE_TYPES T2 ON CAST(T1.RESTRUCTURETYPE AS number) = T2.ID
				WHERE NOT EXISTS (SELECT 1 FROM RESTRUCTURE_DETAILS_TEMP WHERE ID = T1.ID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#556.33_post" author="Siva.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'restructure_details_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#556.34_pre" author="Siva.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'restructure_details_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#556.34" author="Siva.M" dbms="postgresql,mssql">
		<createView viewName="Restructure_Details_AView" replaceIfExists="true"> 
		 	<![CDATA[
		 		 SELECT T1.ID,
					FINREFERENCE,
					RESTRUCTURETYPE,
					EMIHLDPERIOD,
					PRIHLDPERIOD,
					EMIPERIODS,
					TOTNOOFRESTRUCTURE,
					RECALCULATIONTYPE,
					SERVICEREQUESTNO,
					REMARK,
					VERSION, 
					LASTMNTBY,
					LASTMNTON,
					RECORDSTATUS,
					ROLECODE,
					NEXTROLECODE,
					TASKID,
					NEXTTASKID,
					RECORDTYPE,
					WORKFLOWID,
					OLDBUCKET,
					NEWBUCKET,
					OLDEMIOS,
					NEWEMIOS,
					OLDBALTENURE,
					NEWBALTENURE,
					OLDMATURITY,
					NEWMATURITY,
					LASTBILLEDDATE,
					LASTBILLEDINSTNO,
					ACTLOANAMOUNT,
					OLDTENURE,
					NEWTENURE,
					OLDINTEREST,
					NEWINTEREST,
					OLDMAXUNPLANNEDEMI,
					NEWMAXUNPLANNEDEMI,
					OLDAVAILEDUNPLANEMI,
					NEWAVAILEDUNPLANEMI,
					OLDFINALEMI,
					NEWFINALEMI,
					TENORCHANGE,
					EMIRECAL, 
					RESTRUCTUREDATE,
					RESTRUCTUREREASON,
					OLDDPD,
					NEWDPD,
					OLDCPZINTEREST,
					NEWCPZINTEREST,
					EMIHLDSTARTDATE,
					EMIHLDENDDATE,
					PRIHLDSTARTDATE,
					PRIHLDENDDATE,
					OLDPOSAMOUNT, 
					NEWPOSAMOUNT, 
					OLDEMIOVERDUE,
					NEWEMIOVERDUE, 
					BOUNCECHARGE,
					OLDPENALTYAMOUNT, 
					NEWPENALTYAMOUNT, 
					OTHERCHARGE,
					RESTRUCTURECHARGE,
					APPDATE,
				 	T2.RSTTYPECODE,
				 	T2.RSTTYPEDESC,
		    		FINCURRASSETVALUE, 
					OLDEXTODDAYS,
					NEWEXTODDAYS,
					REPAYPROFITRATE,
				 	T1.GRCMAXAMOUNT,
					T1.BASERATE,
					T1.SPLRATE,
					T1.MARGIN,
					T1.RECEIPTID
				FROM RESTRUCTURE_DETAILS T1 
				INNER JOIN RESTRUCTURE_TYPES T2 ON CAST(T1.RESTRUCTURETYPE AS BIGINT) = T2.ID 
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#556.34" author="Siva.M" dbms="oracle">
		<createView viewName="RESTRUCTURE_DETAILS_AVIEW" replaceIfExists="true"> 
			<![CDATA[
		 		 SELECT T1.ID,
					FINREFERENCE,
					RESTRUCTURETYPE,
					EMIHLDPERIOD,
					PRIHLDPERIOD,
					EMIPERIODS,
					TOTNOOFRESTRUCTURE,
					RECALCULATIONTYPE,
					SERVICEREQUESTNO,
					REMARK,
					VERSION, 
					LASTMNTBY,
					LASTMNTON,
					RECORDSTATUS,
					ROLECODE,
					NEXTROLECODE,
					TASKID,
					NEXTTASKID,
					RECORDTYPE,
					WORKFLOWID,
					OLDBUCKET,
					NEWBUCKET,
					OLDEMIOS,
					NEWEMIOS,
					OLDBALTENURE,
					NEWBALTENURE,
					OLDMATURITY,
					NEWMATURITY,
					LASTBILLEDDATE,
					LASTBILLEDINSTNO,
					ACTLOANAMOUNT,
					OLDTENURE,
					NEWTENURE,
					OLDINTEREST,
					NEWINTEREST,
					OLDMAXUNPLANNEDEMI,
					NEWMAXUNPLANNEDEMI,
					OLDAVAILEDUNPLANEMI,
					NEWAVAILEDUNPLANEMI,
					OLDFINALEMI,
					NEWFINALEMI,
					TENORCHANGE,
					EMIRECAL, 
					RESTRUCTUREDATE,
					RESTRUCTUREREASON,
					OLDDPD,
					NEWDPD,
					OLDCPZINTEREST,
					NEWCPZINTEREST,
					EMIHLDSTARTDATE,
					EMIHLDENDDATE,
					PRIHLDSTARTDATE,
					PRIHLDENDDATE,
					OLDPOSAMOUNT, 
					NEWPOSAMOUNT, 
					OLDEMIOVERDUE,
					NEWEMIOVERDUE, 
					BOUNCECHARGE,
					OLDPENALTYAMOUNT, 
					NEWPENALTYAMOUNT, 
					OTHERCHARGE,
					RESTRUCTURECHARGE,
					APPDATE,
				 	T2.RSTTYPECODE,
				 	T2.RSTTYPEDESC,
		    		FINCURRASSETVALUE, 
					OLDEXTODDAYS,
					NEWEXTODDAYS,
					REPAYPROFITRATE,
				 	T1.GRCMAXAMOUNT,
					T1.BASERATE,
					T1.SPLRATE,
					T1.MARGIN,
					T1.RECEIPTID
				FROM RESTRUCTURE_DETAILS T1 
				INNER JOIN RESTRUCTURE_TYPES T2 ON CAST(T1.RESTRUCTURETYPE AS number) = T2.ID 
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#556.34_post" author="Siva.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'restructure_details_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#556.100.1" author="Gopal.p">
		<createTable tableName="RESTRUCTURE_CHARGES">
			<column name="ID" type="bigint" />
			<column name="RestructureId" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="ChargeSeq" type="int">
				<constraints nullable="false" />
			</column>
			<column name="Aloctype" type="varchar(8)" />
			<column name="Capitalized" type="smallint" />
			<column name="FeeCode" type="varchar(8)" />
			<column name="ActualAmount" type="decimal(18,0)" />
			<column name="TaxType" type="char(1)" />
			<column name="cgst" type="decimal(18,0)" />
			<column name="sgst" type="decimal(18,0)" />
			<column name="ugst" type="decimal(18,0)" />
			<column name="igst" type="decimal(18,0)" />
			<column name="cess" type="decimal(18,0)" />
			<column name="Tdsamount" type="decimal(18,0))" />
			<column name="TotalAmount" type="decimal(18,0)" />
			<column name="Version" type="int" />
			<column name="LastmntBy" type="bigint" />
			<column name="LastmntOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkflowId" type="bigint">
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>
	
	<changeSet id="ST#556.100.1.0" author="Gopal.p">
		<addNotNullConstraint tableName="RESTRUCTURE_CHARGES"
			columnName="ID" columnDataType="bigint" />
	</changeSet>

	<changeSet id="ST#556.100.2" author="Gopal.p">
		<addPrimaryKey tableName="RESTRUCTURE_CHARGES" columnNames="ID" constraintName="pk_Restructures_Charge" />
	</changeSet>

	<changeSet id="ST#556.100.3" author="Gopal.p">
		<addUniqueConstraint tableName="RESTRUCTURE_CHARGES" columnNames="RestructureId,ChargeSeq"
			constraintName="uk_Restructure_Charges" />
	</changeSet>

	<changeSet id="ST#556.100.4" author="Gopal.p">
		<addForeignKeyConstraint baseColumnNames="RestructureId" baseTableName="RESTRUCTURE_CHARGES"
			referencedColumnNames="ID" referencedTableName="Restructure_Details" constraintName="fk_RESTRUCTURE_CHARGES_RSTID" />
	</changeSet>

	<changeSet id="ST#556.100.5" author="Gopal.p">
		<createIndex tableName="RESTRUCTURE_CHARGES" indexName="idx_RESTRUCTURE_CHARGES_RSTID">
			<column name="RestructureId" type="bigint" />
		</createIndex>
	</changeSet>

	<changeSet id="ST#556.100.6" author="Gopal.p">
		<addNotNullConstraint columnName="ActualAmount" tableName="RESTRUCTURE_CHARGES"
			columnDataType="decimal(18,0)" />
		<addNotNullConstraint columnName="cgst" tableName="RESTRUCTURE_CHARGES"
			columnDataType="decimal(18,0)" />
		<addNotNullConstraint columnName="sgst" tableName="RESTRUCTURE_CHARGES"
			columnDataType="decimal(18,0)" />
		<addNotNullConstraint columnName="ugst" tableName="RESTRUCTURE_CHARGES"
			columnDataType="decimal(18,0)" />
		<addNotNullConstraint columnName="igst" tableName="RESTRUCTURE_CHARGES"
			columnDataType="decimal(18,0)" />
		<addNotNullConstraint columnName="cess" tableName="RESTRUCTURE_CHARGES"
			columnDataType="decimal(18,0)" />
		<addNotNullConstraint columnName="Tdsamount" tableName="RESTRUCTURE_CHARGES"
			columnDataType="decimal(18,0)" />
		<addNotNullConstraint columnName="TotalAmount" tableName="RESTRUCTURE_CHARGES"
			columnDataType="decimal(18,0)" />
	</changeSet>

	<changeSet id="ST#556.100.7" author="Gopal.p" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE RESTRUCTURE_CHARGES ADD CONSTRAINT df_rscr_ActualAmount DEFAULT 0 FOR ActualAmount;
				ALTER TABLE RESTRUCTURE_CHARGES ADD CONSTRAINT df_rscr_cgst DEFAULT 0 FOR cgst;
				ALTER TABLE RESTRUCTURE_CHARGES ADD CONSTRAINT df_rscr_sgst DEFAULT 0 FOR sgst;
				ALTER TABLE RESTRUCTURE_CHARGES ADD CONSTRAINT df_rscr_ugst DEFAULT 0 FOR ugst;
				ALTER TABLE RESTRUCTURE_CHARGES ADD CONSTRAINT df_rscr_igst DEFAULT 0 FOR igst;
				ALTER TABLE RESTRUCTURE_CHARGES ADD CONSTRAINT df_rscr_cess DEFAULT 0 FOR cess;
				ALTER TABLE RESTRUCTURE_CHARGES ADD CONSTRAINT df_rscr_Tdsamount DEFAULT 0 FOR Tdsamount; 
				ALTER TABLE RESTRUCTURE_CHARGES ADD CONSTRAINT df_rscr_TotalAmount DEFAULT 0 FOR TotalAmount; 
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#556.100.7" author="Gopal.p" dbms="postgresql, oracle">
		<addDefaultValue columnName="ActualAmount" tableName="RESTRUCTURE_CHARGES" defaultValue="0" />
		<addDefaultValue columnName="cgst" tableName="RESTRUCTURE_CHARGES" defaultValue="0" />
		<addDefaultValue columnName="sgst" tableName="RESTRUCTURE_CHARGES" defaultValue="0" />
		<addDefaultValue columnName="ugst" tableName="RESTRUCTURE_CHARGES" defaultValue="0" />
		<addDefaultValue columnName="igst" tableName="RESTRUCTURE_CHARGES" defaultValue="0" />
		<addDefaultValue columnName="cess" tableName="RESTRUCTURE_CHARGES" defaultValue="0" />
		<addDefaultValue columnName="Tdsamount" tableName="RESTRUCTURE_CHARGES" defaultValue="0" />
		<addDefaultValue columnName="TotalAmount" tableName="RESTRUCTURE_CHARGES" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#556.100.8" author="Gopal.p">
		<createTable tableName="RESTRUCTURE_CHARGES_TEMP">
			<column name="ID" type="bigint" />
			<column name="RestructureId" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="ChargeSeq" type="int">
				<constraints nullable="false" />
			</column>
			<column name="Aloctype" type="varchar(8)" />
			<column name="Capitalized" type="smallint" />
			<column name="FeeCode" type="varchar(8)" />
			<column name="ActualAmount" type="decimal(18,0)" />
			<column name="TaxType" type="char(1)" />
			<column name="cgst" type="decimal(18,0)" />
			<column name="sgst" type="decimal(18,0)" />
			<column name="ugst" type="decimal(18,0)" />
			<column name="igst" type="decimal(18,0)" />
			<column name="cess" type="decimal(18,0)" />
			<column name="Tdsamount" type="decimal(18,0))" />
			<column name="TotalAmount" type="decimal(18,0)" />
			<column name="Version" type="int" />
			<column name="LastmntBy" type="bigint" />
			<column name="LastmntOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkflowId" type="bigint">
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>
	
	<changeSet id="ST#556.100.9.0" author="Gopal.p">
		<addNotNullConstraint tableName="RESTRUCTURE_CHARGES_TEMP"
			columnName="ID" columnDataType="bigint" />
	</changeSet>

	<changeSet id="ST#556.100.9" author="Gopal.p">
		<addPrimaryKey tableName="RESTRUCTURE_CHARGES_TEMP" columnNames="ID"
			constraintName="pk_Restructure_Charges_Temp" />
	</changeSet>

	<changeSet id="ST#556.100.10" author="Gopal.p">
		<addUniqueConstraint tableName="RESTRUCTURE_CHARGES_TEMP" columnNames="RestructureId,ChargeSeq"
			constraintName="uk_Restructure_Charges_Temp" />
	</changeSet>

	<changeSet id="ST#556.100.11" author="Gopal.p">
		<addNotNullConstraint columnName="ActualAmount" tableName="RESTRUCTURE_CHARGES_TEMP"
			columnDataType="decimal(18,0)" />
		<addNotNullConstraint columnName="cgst" tableName="RESTRUCTURE_CHARGES_TEMP"
			columnDataType="decimal(18,0)" />
		<addNotNullConstraint columnName="sgst" tableName="RESTRUCTURE_CHARGES_TEMP"
			columnDataType="decimal(18,0)" />
		<addNotNullConstraint columnName="ugst" tableName="RESTRUCTURE_CHARGES_TEMP"
			columnDataType="decimal(18,0)" />
		<addNotNullConstraint columnName="igst" tableName="RESTRUCTURE_CHARGES_TEMP"
			columnDataType="decimal(18,0)" />
		<addNotNullConstraint columnName="cess" tableName="RESTRUCTURE_CHARGES_TEMP"
			columnDataType="decimal(18,0)" />
		<addNotNullConstraint columnName="Tdsamount" tableName="RESTRUCTURE_CHARGES_TEMP"
			columnDataType="decimal(18,0)" />
		<addNotNullConstraint columnName="TotalAmount" tableName="RESTRUCTURE_CHARGES_TEMP"
			columnDataType="decimal(18,0)" />
	</changeSet>

	<changeSet id="ST#556.100.12" author="Gopal.p" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE RESTRUCTURE_CHARGES_TEMP ADD CONSTRAINT df_rscr_t_ActualAmount DEFAULT 0 FOR ActualAmount;
				ALTER TABLE RESTRUCTURE_CHARGES_TEMP ADD CONSTRAINT df_rscr_t_cgst DEFAULT 0 FOR cgst;
				ALTER TABLE RESTRUCTURE_CHARGES_TEMP ADD CONSTRAINT df_rscr_t_sgst DEFAULT 0 FOR sgst;
				ALTER TABLE RESTRUCTURE_CHARGES_TEMP ADD CONSTRAINT df_rscr_t_ugst DEFAULT 0 FOR ugst;
				ALTER TABLE RESTRUCTURE_CHARGES_TEMP ADD CONSTRAINT df_rscr_t_igst DEFAULT 0 FOR igst;
				ALTER TABLE RESTRUCTURE_CHARGES_TEMP ADD CONSTRAINT df_rscr_t_cess DEFAULT 0 FOR cess;
				ALTER TABLE RESTRUCTURE_CHARGES_TEMP ADD CONSTRAINT df_rscr_t_Tdsamount DEFAULT 0 FOR Tdsamount; 
				ALTER TABLE RESTRUCTURE_CHARGES_TEMP ADD CONSTRAINT df_rscr_t_TotalAmount DEFAULT 0 FOR TotalAmount; 
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#556.100.12" author="Gopal.p" dbms="postgresql, oracle">
		<addDefaultValue columnName="ActualAmount" tableName="RESTRUCTURE_CHARGES_TEMP" defaultValue="0" />
		<addDefaultValue columnName="cgst" tableName="RESTRUCTURE_CHARGES_TEMP" defaultValue="0" />
		<addDefaultValue columnName="sgst" tableName="RESTRUCTURE_CHARGES_TEMP" defaultValue="0" />
		<addDefaultValue columnName="ugst" tableName="RESTRUCTURE_CHARGES_TEMP" defaultValue="0" />
		<addDefaultValue columnName="igst" tableName="RESTRUCTURE_CHARGES_TEMP" defaultValue="0" />
		<addDefaultValue columnName="cess" tableName="RESTRUCTURE_CHARGES_TEMP" defaultValue="0" />
		<addDefaultValue columnName="Tdsamount" tableName="RESTRUCTURE_CHARGES_TEMP" defaultValue="0" />
		<addDefaultValue columnName="TotalAmount" tableName="RESTRUCTURE_CHARGES_TEMP" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#556.100.13" author="Gopal.p">
		<createSequence sequenceName="SeqRESTRUCTURE_CHARGES" incrementBy="1" maxValue="999999999999999999"
			minValue="1" startValue="1" />
	</changeSet>

	<changeSet id="ST#556.100.14" author="Gopal.p">
		<createTable tableName="RESTRUCTURE_CHARGES_BK">
			<column name="ID" type="bigint" autoIncrement="true" />
			<column name="RestructureId" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="ChargeSeq" type="int">
				<constraints nullable="false" />
			</column>
			<column name="Aloctype" type="varchar(8)" />
			<column name="Capitalized" type="smallint" />
			<column name="FeeCode" type="varchar(8)" />
			<column name="ActualAmount" type="decimal(18,0)" />
			<column name="TaxType" type="char(1)" />
			<column name="cgst" type="decimal(18,0)" />
			<column name="sgst" type="decimal(18,0)" />
			<column name="ugst" type="decimal(18,0)" />
			<column name="igst" type="decimal(18,0)" />
			<column name="cess" type="decimal(18,0)" />
			<column name="Tdsamount" type="decimal(18,0))" />
			<column name="TotalAmount" type="decimal(18,0)" />
			<column name="Type" type="char(1)" />
		</createTable>
	</changeSet>

	<changeSet id="ST#556.100.15" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				INSERT INTO RESTRUCTURE_CHARGES_BK (RESTRUCTUREID, CHARGESEQ, ALOCTYPE, CAPITALIZED, FEECODE, ACTUALAMOUNT, TAXTYPE, CGST, SGST, UGST, IGST, CESS, TDSAMOUNT, TOTALAMOUNT, TYPE) SELECT RESTRUCTUREID, CHARGESEQ, ALOCTYPE, CAPITALIZED, FEECODE, ACTUALAMOUNT, TAXTYPE, CGST, SGST, UGST, IGST, CESS, TDSAMOUNT, TOTALAMOUNT, 'M' FROM RESTRUCTURECHARGE;

				INSERT INTO RESTRUCTURE_CHARGES_BK (RESTRUCTUREID, CHARGESEQ, ALOCTYPE, CAPITALIZED, FEECODE, ACTUALAMOUNT, TAXTYPE, CGST, SGST, UGST, IGST, CESS, TDSAMOUNT, TOTALAMOUNT, TYPE) SELECT RESTRUCTUREID, CHARGESEQ, ALOCTYPE, CAPITALIZED, FEECODE, ACTUALAMOUNT, TAXTYPE, CGST, SGST, UGST, IGST, CESS, TDSAMOUNT, TOTALAMOUNT, 'T' FROM RESTRUCTURECHARGE_TEMP;

				UPDATE RESTRUCTURE_CHARGES_BK SET ID = (SELECT M.ID FROM RESTRUCTURE_CHARGES_BK M WHERE RESTRUCTURE_CHARGES_BK.RESTRUCTUREID = M.RESTRUCTUREID AND RESTRUCTURE_CHARGES_BK.CHARGESEQ = M.CHARGESEQ);

				INSERT INTO RESTRUCTURE_CHARGES (ID, RESTRUCTUREID, CHARGESEQ, ALOCTYPE, CAPITALIZED, FEECODE, ACTUALAMOUNT, TAXTYPE, CGST, SGST, UGST, IGST, CESS, TDSAMOUNT, TOTALAMOUNT) SELECT ID, RESTRUCTUREID, CHARGESEQ, ALOCTYPE, CAPITALIZED, FEECODE, ACTUALAMOUNT, TAXTYPE, CGST, SGST, UGST, IGST, CESS, TDSAMOUNT, TOTALAMOUNT FROM RESTRUCTURE_CHARGES_BK WHERE TYPE = 'M';

				INSERT INTO RESTRUCTURE_CHARGES_TEMP (ID, RESTRUCTUREID, CHARGESEQ, ALOCTYPE, CAPITALIZED, FEECODE, ACTUALAMOUNT, TAXTYPE, CGST, SGST, UGST, IGST, CESS, TDSAMOUNT, TOTALAMOUNT) SELECT ID, RESTRUCTUREID, CHARGESEQ, ALOCTYPE, CAPITALIZED, FEECODE, ACTUALAMOUNT, TAXTYPE, CGST, SGST, UGST, IGST, CESS, TDSAMOUNT, TOTALAMOUNT FROM RESTRUCTURE_CHARGES_BK WHERE TYPE = 'T';   
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#556.100.16" author="Gopal.p">
		<dropTable tableName="RESTRUCTURE_CHARGES_BK" />
	</changeSet>

	<changeSet id="ST#556.100.17" author="Gopal.p">
		<dropTable tableName="RESTRUCTURECHARGE" />
	</changeSet>

	<changeSet id="ST#556.100.18" author="Gopal.p">
		<dropTable tableName="RESTRUCTURECHARGE_TEMP" />
	</changeSet>

	<changeSet id="ST#558.2" author="savitri.n">
		<sql>
			<![CDATA[
				DELETE FROM ERRORDETAILS WHERE CODE = 'STP0016';
				INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION) VALUES('STP0016', 'EN', 'W', 'EMI is less than the interest amount for the given step. Increase the EMI amount for the given Step', '', 'Approved', '', '', '', '', '', 0, CURRENT_TIMESTAMP, 1000, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#342" author="PavanKalyan.s">
		<sql>
            <![CDATA[
              	DELETE FROM RBFIELDDETAILS WHERE  RBMODULE= 'SUBHEAD' and RBEVENT = 'SUBHEAD' and RBFLDNAME = 'ae_vasProductShrtCode'; 
              	INSERT INTO RBFIELDDETAILS (RBMODULE, RBEVENT, RBFLDNAME, RBFLDDESC, RBFLDTYPE, RBFLDLEN, RBFORCALFLDS, RBFORBLDFLDS, RBFLDTABLENAME, RBSTFLDS, MODULECODE) VALUES ('SUBHEAD', 'SUBHEAD', 'ae_vasProductShrtCode', 'VAS Product Short Code', 'nvarchar', 8, '0', '1', '', 'static,global,dbvalue', '');
              	UPDATE RBFIELDDETAILS SET RBFLDDESC = 'Loan Product Code' WHERE  RBMODULE = 'SUBHEAD' and RBEVENT = 'SUBHEAD' and RBFLDNAME = 'ae_productCode'; 
            ]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#9.1" author="saisandeep.b">
		<createTable tableName="RMTDISTRICTS">
			<column name="Id" type="bigint"/>
			<column name="Code" type="varchar(8)">
				<constraints nullable="false" />
			</column>
			<column name="Name" type="varchar(50)">
				<constraints nullable="false" />
			</column>
			<column name="HostReferenceNo" type="varchar(20)" />
			<column name="Active" type="smallint">
				<constraints nullable="false" />
			</column>
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="LastmntBy" type="bigint" />
			<column name="LastmntOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkflowId" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet id="ST#9.1.1_pre" author="saisandeep.bs">
		<addNotNullConstraint tableName="RMTDISTRICTS"
			columnName="ID" columnDataType="bigint" />
	</changeSet>
	
	<changeSet id="ST#9.1.1" author="saisandeep.b">
		<addPrimaryKey tableName="RMTDISTRICTS" columnNames="Id"/>
	</changeSet>
	
	<changeSet id="ST#9.1.2" author="saisandeep.b">
		<addUniqueConstraint tableName="RMTDISTRICTS" columnNames="Code"/>
	</changeSet>
	
	<changeSet id="ST#9.2" author="saisandeep.b">
		<createTable tableName="RMTDISTRICTS_TEMP">
			<column name="Id" type="bigint"/>
			<column name="Code" type="varchar(8)">
				<constraints nullable="false" />
			</column>
			<column name="Name" type="varchar(50)">
				<constraints nullable="false" />
			</column>
			<column name="HostReferenceNo" type="varchar(20)" />
			<column name="Active" type="smallint">
				<constraints nullable="false" />
			</column>
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="LastmntBy" type="bigint" />
			<column name="LastmntOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkflowId" type="bigint" />
		</createTable>
	</changeSet>
	
	<changeSet id="ST#9.2.1_pre" author="saisandeep.bs">
		<addNotNullConstraint tableName="RMTDISTRICTS_TEMP"
			columnName="ID" columnDataType="bigint" />
	</changeSet>
	
	<changeSet id="ST#9.2.1" author="saisandeep.b">
		<addPrimaryKey tableName="RMTDISTRICTS_TEMP" columnNames="Id"/>
	</changeSet>
	
	<changeSet id="ST#9.2.2" author="saisandeep.b">
		<addUniqueConstraint tableName="RMTDISTRICTS_TEMP" columnNames="Code"/>
	</changeSet>

	<changeSet id="ST#9.3_pre" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmtdistricts_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#9.3" author="saisandeep.b">
		<createView replaceIfExists="true" viewName="RMTDISTRICTS_AVIEW">
		 	<![CDATA[
				 SELECT ID,
				 	CODE,
					NAME,
					HOSTREFERENCENO,
					ACTIVE,
					VERSION,
					LASTMNTBY,
					LASTMNTON,
					RECORDSTATUS,
					ROLECODE,
					NEXTROLECODE,
					TASKID,
					NEXTTASKID,
					RECORDTYPE,
					WORKFLOWID
				FROM RMTDISTRICTS
		  	  ]]>
		</createView>
	</changeSet>
	
	<changeSet id="ST#9.3_post" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rmtdistricts_aview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#9.4_pre" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmtdistricts_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#9.4" author="saisandeep.b">
		<createView replaceIfExists="true" viewName="RMTDISTRICTS_VIEW">
			<![CDATA[
				SELECT ID,
					CODE,
					NAME,
					HOSTREFERENCENO,
					ACTIVE,
					VERSION,
					LASTMNTBY,
					LASTMNTON,
					RECORDSTATUS,
					ROLECODE,
					NEXTROLECODE,
					TASKID,
					NEXTTASKID,
					RECORDTYPE,
					WORKFLOWID
				FROM RMTDISTRICTS_TEMP
				UNION ALL
				SELECT ID,
					CODE,
					NAME,
					HOSTREFERENCENO,
					ACTIVE,
					VERSION,
					LASTMNTBY,
					LASTMNTON,
					RECORDSTATUS,
					ROLECODE,
					NEXTROLECODE,
					TASKID,
					NEXTTASKID,
					RECORDTYPE,
					WORKFLOWID
				FROM RMTDISTRICTS
				WHERE NOT (EXISTS ( SELECT 1 FROM RMTDISTRICTS_TEMP
				WHERE RMTDISTRICTS_TEMP.CODE = RMTDISTRICTS.CODE))
			  ]]>
		</createView>
	</changeSet>
	
	<changeSet id="ST#9.4_post" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rmtdistricts_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#9.5.1" author="saisandeep.b">
		<sql>
			<![CDATA[
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menuItem_SystemMaster_District');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_DistrictList_NewDistrict');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_DistrictDialog_btnDelete');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_DistrictDialog_btnEdit');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_DistrictDialog_btnSave');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_DistrictDialog_btnNew');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'DistrictDialog_districtIsActive');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'DistrictDialog_districtName');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'DistrictDialog_hostReferenceNo');
				
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'menuItem_SystemMaster_District';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'button_DistrictList_NewDistrict';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'button_DistrictDialog_btnDelete';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'button_DistrictDialog_btnEdit';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'button_DistrictDialog_btnSave';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'button_DistrictDialog_btnNew';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'DistrictDialog_districtIsActive';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'DistrictDialog_districtName';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'DistrictDialog_hostReferenceNo';
				
				DELETE FROM SECROLEGROUPS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'DISTRICT_MAKER');
				DELETE FROM SECROLEGROUPS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'DISTRICT_APPROVER');
				
				DELETE FROM SECGROUPS WHERE GRPCODE = 'DISTRICT_MAKER';
				DELETE FROM SECGROUPS WHERE GRPCODE = 'DISTRICT_APPROVER';

				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menuItem_SystemMaster_District', 'MENU', 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2, 'button_DistrictList_NewDistrict','DistrictList', 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2, 'button_DistrictDialog_btnDelete','DistrictDialog', 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2, 'button_DistrictDialog_btnEdit','DistrictDialog', 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2, 'button_DistrictDialog_btnSave','DistrictDialog', 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2, 'button_DistrictDialog_btnNew','DistrictDialog', 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'DistrictDialog_districtIsActive','DistrictDialog', 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'DistrictDialog_districtName','DistrictDialog', 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'DistrictDialog_hostReferenceNo','DistrictDialog', 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SECGROUPS (GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'DISTRICT_MAKER','WF Maker for District', 1, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL,NULL, 0);
				INSERT INTO SECGROUPS (GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'DISTRICT_APPROVER','WF Approver for District', 1, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL,NULL, 0);
				
				INSERT INTO	SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'DISTRICT_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menuItem_SystemMaster_District'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO	SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'DISTRICT_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_DistrictList_NewDistrict'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO	SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'DISTRICT_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_DistrictDialog_btnDelete'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO	SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'DISTRICT_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_DistrictDialog_btnEdit'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO	SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'DISTRICT_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_DistrictDialog_btnSave'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO	SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'DISTRICT_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'DistrictDialog_districtIsActive'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO	SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'DISTRICT_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'DistrictDialog_districtName'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO	SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'DISTRICT_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'DistrictDialog_hostReferenceNo'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO	SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'DISTRICT_APPROVER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menuItem_SystemMaster_District'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO	SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'DISTRICT_APPROVER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_DistrictDialog_btnSave'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'DISTRICT_MAKER'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'MSTGRP1_MAKER'), 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'DISTRICT_APPROVER'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'MSTGRP1_APPROVER'), 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST9.6" author="saisandeep.b">
		<comment>Sequence For DistrictMaster</comment>
		<createSequence sequenceName="SeqRmtDistricts" incrementBy="1" startValue="1" minValue="1"
			maxValue="999999999999999999" />
	</changeSet>
	
	<changeSet id="ST#9.7" author="saisandeep.b">
		<addColumn tableName="RMTProvinceVsCity">
			<column name="DistrictId" type="bigint" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#9.8" author="saisandeep.b">
		<addColumn tableName="RMTProvinceVsCity_Temp">
			<column name="DistrictId" type="bigint" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#9.9.1" author="saisandeep.b">
		<sql>
			<![CDATA[
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'CityDialog_pCDistrict');
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'CityDialog_pCDistrict';
		
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'CityDialog_pCDistrict', 'CityDialog', 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO	SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'CITY_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'CityDialog_pCDistrict'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#9.10.1_pre" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmtprovincevscity_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#9.10.1" author="saisandeep.b">
		<createView replaceIfExists="true" viewName="RMTProvinceVsCity_View">
			<![CDATA[
				SELECT T1.PCCOUNTRY,
					T1.PCPROVINCE,
					T1.PCCITY,
					T1.PCCITYNAME,
					T1.PCCITYCLASSIFICATION,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.BANKREFNO,
					T1.CITYISACTIVE,
					T2.COUNTRYDESC LOVDESCPCCOUNTRYNAME,
					T3.CPPROVINCENAME LOVDESCPCPROVINCENAME,
					T3.TAXSTATECODE,
					T1.DISTRICTID,
					T4.CODE DISTRICTCODE,
					T4.NAME DISTRICTNAME
				FROM RMTPROVINCEVSCITY_TEMP  T1
				INNER JOIN BMTCOUNTRIES T2 ON T1.PCCOUNTRY = T2.COUNTRYCODE
				INNER JOIN RMTCOUNTRYVSPROVINCE  T3 ON T1.PCCOUNTRY = T3.CPCOUNTRY AND T1.PCPROVINCE = T3.CPPROVINCE
				LEFT JOIN RMTDISTRICTS T4 ON T1.DISTRICTID = T4.ID 
				UNION ALL
				SELECT T1.PCCOUNTRY,
					T1.PCPROVINCE,
					T1.PCCITY,
					T1.PCCITYNAME,
					T1.PCCITYCLASSIFICATION,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.BANKREFNO,
					T1.CITYISACTIVE,
					T2.COUNTRYDESC LOVDESCPCCOUNTRYNAME,
					T3.CPPROVINCENAME LOVDESCPCPROVINCENAME,
					T3.TAXSTATECODE,
					T1.DISTRICTID,
					T4.CODE DISTRICTCODE,
					T4.NAME DISTRICTNAME
				FROM RMTPROVINCEVSCITY T1
				INNER JOIN BMTCOUNTRIES T2 ON T1.PCCOUNTRY = T2.COUNTRYCODE
				INNER JOIN RMTCOUNTRYVSPROVINCE T3 ON T1.PCCOUNTRY = T3.CPCOUNTRY AND T1.PCPROVINCE = T3.CPPROVINCE
				LEFT JOIN RMTDISTRICTS T4 ON T1.DISTRICTID = T4.ID 	
				WHERE  NOT EXISTS(SELECT 1 FROM RMTPROVINCEVSCITY_TEMP WHERE PCCOUNTRY = T1.PCCOUNTRY 
											AND PCPROVINCE = T1.PCPROVINCE AND PCCITY = T1.PCCITY)
			]]>
		</createView>
	</changeSet>
	
	<changeSet id="ST#9.10.1_post" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rmtprovincevscity_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#9.11.1_pre" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmtprovincevscity_aview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#9.11.1" author="saisandeep.b">
		<createView replaceIfExists="true" viewName="RMTProvinceVsCity_AView">
			<![CDATA[
				SELECT T1.PCCountry,
					T1.PCProvince,
					T1.PCCity,
					T1.PCCityName,
					T1.PCCityClassification,
					T1.Version,
					T1.LastMntBy,
					T1.LastMntOn,
					T1.RecordStatus,
					T1.RoleCode,
					T1.NextRoleCode,
					T1.TaskId,
					T1.NextTaskId,
					T1.RecordType,
					T1.WorkflowId,
					T1.BankRefNo,
					T1.CityIsActive,
					T2.CountryDesc LovDescPCCountryName,
					T3.CPProvinceName LovDescPCProvinceName,
					T3.TAXSTATECODE,
					T1.DistrictId,
					T4.Code DistrictCode,
					T4.Name DistrictName
				FROM RMTProvinceVsCity T1
				INNER JOIN BMTCountries T2 ON T1.PCCountry = T2.CountryCode
				INNER JOIN RMTCountryVsProvince T3 ON T1.PCCountry = T3.CPCountry AND T1.PCProvince = T3.CPProvince
				LEFT JOIN RMTDistricts T4 ON T1.DistrictId = T4.Id 	
			 ]]>
		</createView>
	</changeSet>
	
	<changeSet id="ST#9.11_post" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rmtprovincevscity_aview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#13.1" author="sampath.d">
		<addColumn tableName="EXTENDEDFIELDDETAIL">
			<column name="MaintAlwd" type="smallint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#13.2" author="sampath.d">
		<addColumn tableName="EXTENDEDFIELDDETAIL_TEMP">
			<column name="MaintAlwd" type="smallint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#13.3" author="sampath.d">
		<sql>
			<![CDATA[
				UPDATE EXTENDEDFIELDDETAIL SET MAINTALWD = 0;
				UPDATE EXTENDEDFIELDDETAIL_TEMP SET MAINTALWD = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#13.4" author="sampath.d" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE EXTENDEDFIELDDETAIL ADD CONSTRAINT DF_EFD_MALD DEFAULT 0 FOR MAINTALWD;
				ALTER TABLE EXTENDEDFIELDDETAIL_TEMP ADD CONSTRAINT DF_EFD_TEMP_MALD DEFAULT 0 FOR MAINTALWD;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#13.4" author="sampath.d" dbms="postgresql, oracle">
		<addDefaultValue columnName="MaintAlwd" tableName="EXTENDEDFIELDDETAIL" defaultValue="0" />
		<addDefaultValue columnName="MaintAlwd" tableName="EXTENDEDFIELDDETAIL_TEMP" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#13.5_pre" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'extendedfielddetail_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#13.5" author="sampath.d">
		<createView replaceIfExists="true" viewName="EXTENDEDFIELDDETAIL_AVIEW">
			<![CDATA[
				SELECT T1.MODULEID,
				    T1.FIELDNAME,
				    T2.MODULENAME LOVDESCMODULENAME,
				    T2.SUBMODULENAME LOVDESCSUBMODULENAME,
				    T1.FIELDTYPE,
				    T1.FIELDLENGTH,
				    T1.FIELDPREC,
				    T1.FIELDLABEL,
				    T1.FIELDMANDATORY,
				    T1.FIELDCONSTRAINT,
				    T1.FIELDSEQORDER,
				    T1.FIELDLIST,
				    T1.FIELDDEFAULTVALUE,
				    T1.FIELDMINVALUE,
				    T1.FIELDMAXVALUE,
				    T1.FIELDUNIQUE,
				    T1.EXTENDEDTYPE,
				    T1.FILTERS,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T1.MULTILINE,
				    T1.PARENTTAG,
				    T1.INPUTELEMENT,
				    T1.EDITABLE,
				    T1.ALLOWINRULE,
				    T1.SCRIPTLET,
				    T1.VISIBLE,
				    T1.VALFROMSCRIPT,
					T1.MAINTALWD
				FROM EXTENDEDFIELDDETAIL T1
				JOIN EXTENDEDFIELDHEADER T2 ON T1.MODULEID = T2.MODULEID	
			]]>
        </createView>
	</changeSet>

	<changeSet id="ST#13.5_post" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'extendedfielddetail_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#13.6_pre" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'extendedfielddetail_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#13.6" author="sampath.d">
		<createView replaceIfExists="true" viewName="EXTENDEDFIELDDETAIL_VIEW">
			<![CDATA[
				SELECT T1.MODULEID,
			   		T1.FIELDNAME,
			   		T2.MODULENAME LOVDESCMODULENAME,
			    	T2.SUBMODULENAME LOVDESCSUBMODULENAME,
			    	T1.FIELDTYPE,
			    	T1.FIELDLENGTH,
			    	T1.FIELDPREC,
			    	T1.FIELDLABEL,
			    	T1.FIELDMANDATORY,
			    	T1.FIELDCONSTRAINT,
			    	T1.FIELDSEQORDER,
			   		T1.FIELDLIST,
			    	T1.FIELDDEFAULTVALUE,
			    	T1.FIELDMINVALUE,
			    	T1.FIELDMAXVALUE,
			    	T1.FIELDUNIQUE,
			    	T1.EXTENDEDTYPE,
			    	T1.FILTERS,
			    	T1.VERSION,
			    	T1.LASTMNTBY,
			    	T1.LASTMNTON,
			    	T1.RECORDSTATUS,
			    	T1.ROLECODE,
			    	T1.NEXTROLECODE,
			    	T1.TASKID,
			    	T1.NEXTTASKID,
			    	T1.RECORDTYPE,
			    	T1.WORKFLOWID,
			    	T1.MULTILINE,
			    	T1.PARENTTAG,
			    	T1.INPUTELEMENT,
			    	T1.EDITABLE,
			    	T1.ALLOWINRULE,
			    	T1.SCRIPTLET,
			    	T1.VISIBLE,
			    	T1.VALFROMSCRIPT,
					T1.MAINTALWD
				FROM EXTENDEDFIELDDETAIL_TEMP T1
				JOIN EXTENDEDFIELDHEADER_TEMP T2 ON T1.MODULEID = T2.MODULEID
				UNION ALL
				SELECT T1.MODULEID,
			    	T1.FIELDNAME,
				    T2.MODULENAME LOVDESCMODULENAME,
				    T2.SUBMODULENAME LOVDESCSUBMODULENAME,
				    T1.FIELDTYPE,
				    T1.FIELDLENGTH,
				    T1.FIELDPREC,
				    T1.FIELDLABEL,
				    T1.FIELDMANDATORY,
				    T1.FIELDCONSTRAINT,
				    T1.FIELDSEQORDER,
				    T1.FIELDLIST,
				    T1.FIELDDEFAULTVALUE,
				    T1.FIELDMINVALUE,
				    T1.FIELDMAXVALUE,
				    T1.FIELDUNIQUE,
				    T1.EXTENDEDTYPE,
				    T1.FILTERS,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T1.MULTILINE,
				    T1.PARENTTAG,
				    T1.INPUTELEMENT,
				    T1.EDITABLE,
				    T1.ALLOWINRULE,
				    T1.SCRIPTLET,
				    T1.VISIBLE,
				    T1.VALFROMSCRIPT,
					T1.MAINTALWD
				FROM EXTENDEDFIELDDETAIL T1
				JOIN EXTENDEDFIELDHEADER T2 ON T1.MODULEID = T2.MODULEID
				WHERE NOT (EXISTS (SELECT 1  FROM EXTENDEDFIELDDETAIL_TEMP 
					WHERE EXTENDEDFIELDDETAIL_TEMP.MODULEID = T1.MODULEID AND EXTENDEDFIELDDETAIL_TEMP.FIELDNAME = T1.FIELDNAME))	
			]]>
        </createView>
	</changeSet>

	<changeSet id="ST#13.6_post" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'extendedfielddetail_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#13.7" author="sampath.d">
		<sql>
			<![CDATA[	
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'EXTENDEDFIELDDETAIL_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'ExtendedFieldDetailDialog_fieldIsMaintAlwd');
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'ExtendedFieldDetailDialog_fieldIsMaintAlwd';
				
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID) + 1 FROM SECRIGHTS),0,'ExtendedFieldDetailDialog_fieldIsMaintAlwd','ExtendedFieldDetailDialog',1,1000,CURRENT_TIMESTAMP,null,null,null,null,null,null,0);
							
 				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),(SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'EXTENDEDFIELDDETAIL_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'ExtendedFieldDetailDialog_fieldIsMaintAlwd'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
 				
 			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#13.8" author="sampath.d">
		<createTable tableName="EXTENDEDFIELDEXTENSION">
			<column name="Id" type="bigint" />
			<column name="ExtenrnalRef" type="varchar(50)">
				<constraints nullable="false" />
			</column>
			<column name="Purpose" type="varchar(20)">
				<constraints nullable="false" />
			</column>
			<column name="ModeStatus" type="char(1)">
				<constraints nullable="false" />
			</column>
			<column name="InstructionUID" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="Sequence" type="int">
				<constraints nullable="false" />
			</column>
			<column name="Event" type="char(5)">
				<constraints nullable="false" />
			</column>
			<column name="Version" type="int" />
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkFlowId" type="bigint">
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>
	
	<changeSet id="ST#13.9_pre" author="sampath.d">
		<addNotNullConstraint tableName="EXTENDEDFIELDEXTENSION"
			columnName="ID" columnDataType="bigint" />
	</changeSet>

	<changeSet id="ST#13.9" author="sampath.d">
		<addPrimaryKey tableName="EXTENDEDFIELDEXTENSION" columnNames="Id" constraintName="PK_EXTED_FIELD_EXT_ID" />
	</changeSet>

	<changeSet id="ST#13.10" author="sampath.d">
		<createTable tableName="EXTENDEDFIELDEXTENSION_TEMP">
			<column name="Id" type="bigint" />
			<column name="ExtenrnalRef" type="varchar(50)">
				<constraints nullable="false" />
			</column>
			<column name="Purpose" type="varchar(20)">
				<constraints nullable="false" />
			</column>
			<column name="ModeStatus" type="char(1)">
				<constraints nullable="false" />
			</column>
			<column name="InstructionUID" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="Sequence" type="int">
				<constraints nullable="false" />
			</column>
			<column name="Event" type="char(5)">
				<constraints nullable="false" />
			</column>
			<column name="Version" type="int" />
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkFlowId" type="bigint">
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>
	
	<changeSet id="ST#13.11_pre" author="sampath.d">
		<addNotNullConstraint tableName="EXTENDEDFIELDEXTENSION_TEMP"
			columnName="ID" columnDataType="bigint" />
	</changeSet>

	<changeSet id="ST#13.11" author="sampath.d">
		<addPrimaryKey tableName="EXTENDEDFIELDEXTENSION_TEMP" columnNames="Id"
			constraintName="PK_EXTED_FIELD_EXTN_T_ID" />
	</changeSet>

	<changeSet id="ST#13.12_pre" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'extendedfieldextension_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#13.12" author="sampath.d">
		<createView replaceIfExists="true" viewName="ExtendedFieldExtension_View">
			<![CDATA[
				SELECT T1.ID,
					T1.EXTENRNALREF,
					T1.PURPOSE,
					T1.MODESTATUS,
					T1.INSTRUCTIONUID,
					T1.SEQUENCE,
					T1.EVENT,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM EXTENDEDFIELDEXTENSION_TEMP T1
				UNION ALL
				SELECT T1.ID,
					T1.EXTENRNALREF,
					T1.PURPOSE,
					T1.MODESTATUS,
					T1.INSTRUCTIONUID,
					T1.SEQUENCE,
					T1.EVENT,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM EXTENDEDFIELDEXTENSION T1
				WHERE NOT (EXISTS (SELECT 1  FROM EXTENDEDFIELDEXTENSION_TEMP T2 WHERE T2.ID = T1.ID))
			]]>
        </createView>
	</changeSet>

	<changeSet id="ST#13.12_post" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'extendedfieldextension_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#13.13" author="sampath.d">
		<createSequence sequenceName="seqExtendedFieldExtension" incrementBy="1" startValue="1" minValue="1"
			maxValue="999999999999999999" />
	</changeSet>

	<changeSet id="ST#13.14" author="sampath.d">
		<sql>
			<![CDATA[	
				DELETE FROM SECROLEGROUPS WHERE ROLEID IN (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'EXTENDEDFIELD_MAINTENANCE_MAKER') AND GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'EXTENDEDFIELD_MAINTENANCE_MAKER');
				DELETE FROM SECROLEGROUPS WHERE ROLEID IN (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'EXTENDEDFIELD_MAINTENANCE_APPROVER') AND GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'EXTENDEDFIELD_MAINTENANCE_APPROVER');
			
				DELETE FROM SECROLES WHERE ROLECD = 'EXTENDEDFIELD_MAINTENANCE_MAKER';
				DELETE FROM SECROLES WHERE ROLECD = 'EXTENDEDFIELD_MAINTENANCE_APPROVER';
				
				DELETE FROM SECGROUPRIGHTS WHERE GrpID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='EXTENDEDFIELD_MAINTENANCE_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menuItem_FinanceManagement_ExtendedFields');
				DELETE FROM SECGROUPRIGHTS WHERE GrpID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='EXTENDEDFIELD_MAINTENANCE_APPROVER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menuItem_FinanceManagement_ExtendedFields');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='EXTENDEDFIELD_MAINTENANCE_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_ExtendedFieldCaptureDialog_btnSave');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='EXTENDEDFIELD_MAINTENANCE_APPROVER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_ExtendedFieldMaintenanceDialog_btnSave');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='EXTENDEDFIELD_MAINTENANCE_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_ExtendedFieldMaintenanceDialog_btnSave');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='EXTENDEDFIELD_MAINTENANCE_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'ExtendedFieldMaintenanceDialog_eventName');
				
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'menuItem_FinanceManagement_ExtendedFields';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'button_ExtendedFieldCaptureDialog_btnSave'; 
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'button_ExtendedFieldMaintenanceDialog_btnSave'; 
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'ExtendedFieldMaintenanceDialog_eventName'; 
				
				DELETE FROM SECGROUPS WHERE GRPCODE = 'EXTENDEDFIELD_MAINTENANCE_MAKER';
				DELETE FROM SECGROUPS WHERE GRPCODE = 'EXTENDEDFIELD_MAINTENANCE_APPROVER';
				
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'EXTENDEDFIELD_MAINTENANCE_MAKER', 'Extended Field Maintenance Maker Role', '', 1, 1000, CURRENT_TIMESTAMP, 'Approved', '', '', '', '', '', 0) ;
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'EXTENDEDFIELD_MAINTENANCE_APPROVER', 'Extended Field Maintenance Approver Role', '', 1, 1000, CURRENT_TIMESTAMP, 'Approved', '', '', '', '', '', 0) ;
			
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID) + 1 FROM SECRIGHTS),0,'menuItem_FinanceManagement_ExtendedFields','MENU',1,1000,CURRENT_TIMESTAMP,null,null,null,null,null,null,0);
				
				INSERT INTO SECGROUPS (GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPID)+1 FROM SECGROUPS),'EXTENDEDFIELD_MAINTENANCE_MAKER','Extended fields maintenance maker',1,1000,CURRENT_TIMESTAMP,'Approved',null,null,null,null,null,0);
				INSERT INTO SECGROUPS (GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPID)+1 FROM SECGROUPS),'EXTENDEDFIELD_MAINTENANCE_APPROVER','Extended fields maintenance approver',1,1000,CURRENT_TIMESTAMP,'Approved',null,null,null,null,null,0);
							
 				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),(SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'EXTENDEDFIELD_MAINTENANCE_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menuItem_FinanceManagement_ExtendedFields'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
 				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),(SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'EXTENDEDFIELD_MAINTENANCE_APPROVER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menuItem_FinanceManagement_ExtendedFields'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
 
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'EXTENDEDFIELD_MAINTENANCE_MAKER'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'EXTENDEDFIELD_MAINTENANCE_MAKER'), 0, 1000, CURRENT_TIMESTAMP, '', '', '', '', '', '', 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'EXTENDEDFIELD_MAINTENANCE_APPROVER'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'EXTENDEDFIELD_MAINTENANCE_APPROVER'), 0, 1000, CURRENT_TIMESTAMP, '', '', '', '', '', '', 0);
 			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#13.18" author="sampath.d">
		<createTable tableName="EXTENDEDFIELDMAINTENANCE">
			<column name="Id" type="bigint" />
			<column name="Reference" type="varchar(20)">
				<constraints nullable="false" />
			</column>
			<column name="Type" type="varchar(15)">
				<constraints nullable="false" />
			</column>
			<column name="Event" type="varchar(50)">
				<constraints nullable="false" />
			</column>
			<column name="Version" type="int" />
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkFlowId" type="bigint">
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>
	
	<changeSet id="ST#13.19_pre" author="sampath.d">
		<addNotNullConstraint tableName="EXTENDEDFIELDMAINTENANCE"
			columnName="ID" columnDataType="bigint" />
	</changeSet>

	<changeSet id="ST#13.19" author="sampath.d">
		<addPrimaryKey constraintName="PK_EXT_FLD_MNT_ID" tableName="EXTENDEDFIELDMAINTENANCE" columnNames="Id" />
	</changeSet>

	<changeSet id="ST#13.20" author="sampath.d">
		<addUniqueConstraint constraintName="UK_EXT_FLD_MNT_REF" tableName="EXTENDEDFIELDMAINTENANCE"
			columnNames="Reference" />
	</changeSet>

	<changeSet id="ST#13.15" author="sampath.d">
		<createTable tableName="EXTENDEDFIELDMAINTENANCE_TEMP">
			<column name="Id" type="bigint" />
			<column name="Reference" type="varchar(20)">
				<constraints nullable="false" />
			</column>
			<column name="Type" type="varchar(15)">
				<constraints nullable="false" />
			</column>
			<column name="Event" type="varchar(50)">
				<constraints nullable="false" />
			</column>
			<column name="Version" type="int" />
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkFlowId" type="bigint">
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>
	
	<changeSet id="ST#13.16_pre" author="sampath.d">
		<addNotNullConstraint tableName="EXTENDEDFIELDMAINTENANCE_TEMP"
			columnName="ID" columnDataType="bigint" />
	</changeSet>

	<changeSet id="ST#13.16" author="sampath.d">
		<addPrimaryKey constraintName="PK_EXT_FLD_MNT_T_ID" tableName="EXTENDEDFIELDMAINTENANCE_TEMP" columnNames="Id" />
	</changeSet>

	<changeSet id="ST#13.17" author="sampath.d">
		<addUniqueConstraint constraintName="UK_EXT_FLD_MNT_T_REF" tableName="EXTENDEDFIELDMAINTENANCE_TEMP"
			columnNames="Reference" />
	</changeSet>

	<changeSet id="ST#13.21" author="sampath.d">
		<createSequence sequenceName="SeqExtendedFieldMaintenance" incrementBy="1" startValue="1" minValue="1"
			maxValue="999999999999999999" />
	</changeSet>

	<changeSet id="ST#13.27_pre" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'extendedfieldmaintenance_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#13.27" author="sampath.d">
		<createView replaceIfExists="true" viewName="EXTENDEDFIELDMAINTENANCE_VIEW">
			<![CDATA[
				SELECT T1.ID,
				    T2.FINREFERENCE,
				    T1.REFERENCE,
					T2.FINTYPE,
					T1.TYPE,
					T2.FINISACTIVE,
					T6.FINDIVISION LOVDESCFINDIVISION,
				    T2.FINCATEGORY LOVDESCPRODUCTCODENAME,
				    T2.FINBRANCH,
				    T2.GRACETERMS,
				    T2.CALTERMS,
				    T2.ADVTERMS,
				    T2.NEXTROLLOVERDATE,
				    T2.FINCURRASSETVALUE,
				    T2.FEECHARGEAMT,
				    T2.INSURANCEAMT,
				    T2.FINREPAYMENTAMOUNT,
				    T2.CLOSINGSTATUS,
				    COALESCE(T4.ROLEDESC,  ${add.schema}FN_GET_ROLEDESC(T1.NEXTROLECODE)) LOVDESCREQUESTSTAGE,
				    T2.FINSTARTDATE,
				    T2.NUMBEROFTERMS,
				    T2.MATURITYDATE,
				    T2.FINCCY,
				    T2.FINASSETVALUE,
				    T3.CUSTCIF LOVDESCCUSTCIF,
					T5.PRODUCTCATEGORY,
					T1.EVENT,  
					T1.VERSION, 	
					T1.LASTMNTBY,	
					T1.LASTMNTON,	
					T1.TASKID,
					T1.NEXTTASKID,	
					T1.RECORDSTATUS,	
					T1.RECORDTYPE,	
					T1.ROLECODE,	
					T1.NEXTROLECODE,	
					T1.WORKFLOWID,
		      		T2.SCHEDULEMETHOD,
		      		T2.PROFITDAYSBASIS	
				FROM EXTENDEDFIELDMAINTENANCE_TEMP T1
				JOIN FINANCEMAIN T2 ON T2.FINREFERENCE= T1.REFERENCE
				INNER JOIN CUSTOMERS T3 ON T3.CUSTID = T2.CUSTID
				LEFT JOIN SECROLES T4 ON T1.NEXTROLECODE = T4.ROLECD
				JOIN BMTPRODUCT T5 ON T2.FINCATEGORY = T5.PRODUCTCODE
				JOIN RMTFINANCETYPES T6 ON T6.FINTYPE = T2.FINTYPE
				UNION ALL
		    	SELECT T1.ID,
				    T2.FINREFERENCE,
				    T1.REFERENCE,
					T2.FINTYPE,
					T1.TYPE,
					T2.FINISACTIVE,
					T6.FINDIVISION LOVDESCFINDIVISION,
				    T2.FINCATEGORY LOVDESCPRODUCTCODENAME,
				    T2.FINBRANCH,
				    T2.GRACETERMS,
				    T2.CALTERMS,
				    T2.ADVTERMS,
				    T2.NEXTROLLOVERDATE,
				    T2.FINCURRASSETVALUE,
				    T2.FEECHARGEAMT,
				    T2.INSURANCEAMT,
				    T2.FINREPAYMENTAMOUNT,
				    T2.CLOSINGSTATUS,
				    COALESCE(T4.ROLEDESC,  ${add.schema}FN_GET_ROLEDESC(T1.NEXTROLECODE)) LOVDESCREQUESTSTAGE,
				    T2.FINSTARTDATE,
				    T2.NUMBEROFTERMS,
				    T2.MATURITYDATE,
				    T2.FINCCY,
				    T2.FINASSETVALUE,
				    T3.CUSTCIF LOVDESCCUSTCIF,
					T5.PRODUCTCATEGORY,
					T1.EVENT,  
					T1.VERSION, 	
					T1.LASTMNTBY,	
					T1.LASTMNTON,	
					T1.TASKID,
					T1.NEXTTASKID,	
					T1.RECORDSTATUS,	
					T1.RECORDTYPE,	
					T1.ROLECODE,	
					T1.NEXTROLECODE,	
					T1.WORKFLOWID,
		   		    T2.SCHEDULEMETHOD,
		    		T2.PROFITDAYSBASIS	
				FROM EXTENDEDFIELDMAINTENANCE T1
				JOIN FINANCEMAIN T2 ON T2.FINREFERENCE= T1.REFERENCE
				JOIN CUSTOMERS T3 ON T3.CUSTID = T2.CUSTID
				LEFT JOIN SECROLES T4 ON T1.NEXTROLECODE = T4.ROLECD
				JOIN BMTPRODUCT T5 ON T2.FINCATEGORY = T5.PRODUCTCODE
				JOIN RMTFINANCETYPES T6 ON T6.FINTYPE = T2.FINTYPE
				WHERE NOT (EXISTS ( SELECT 1 FROM EXTENDEDFIELDMAINTENANCE_TEMP
					WHERE EXTENDEDFIELDMAINTENANCE_TEMP.REFERENCE = T1.REFERENCE))
			]]>
        </createView>
	</changeSet>

	<changeSet id="ST#13.27_post" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'extendedfieldmaintenance_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#13.22" author="sampath.d">
		<addColumn tableName="FINSERVICEINSTRUCTION">
			<column name="InitiatedDate" type="datetime" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#13.22.1" author="sampath.d">
		<addColumn tableName="FINSERVICEINSTRUCTION">
			<column name="ApprovedDate" type="datetime" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#13.23" author="sampath.d">
		<addColumn tableName="FINSERVICEINSTRUCTION_TEMP">
			<column name="InitiatedDate" type="datetime" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#13.23.1" author="sampath.d">
		<addColumn tableName="FINSERVICEINSTRUCTION_TEMP">
			<column name="ApprovedDate" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#13.24" author="sampath.d">
		<sql>
			<![CDATA[
				DELETE FROM ERRORDETAILS WHERE CODE = '30550';
				INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION) VALUES ('30550','EN','E','Schedule Date: {0} is in between maker initiated date: {1} and approve Date: {2}.  Please re-initiate transaction.','test','Approved',null,null,null,null,null,0,current_timestamp,1000,3);
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#13.25" author="sampath.d" dbms="oracle">
		<sql>
			<![CDATA[
				INSERT INTO EXTENDEDFIELDMAINTENANCE (ID, REFERENCE, TYPE, EVENT, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, WORKFLOWID) (select SeqExtendedFieldMaintenance.nextval, fm.finreference, fm.fintype, 'Origination', '1', '1000', current_timestamp, 'Approved', '0' from financemain fm where  fm.FINISACTIVE = 1);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#13.26" author="sampath.d">
		<sql>
			<![CDATA[
			
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='EXTENDEDFIELD_MAINTENANCE_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_ExtendedFieldCaptureDialog_btnSave');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='EXTENDEDFIELD_MAINTENANCE_APPROVER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_ExtendedFieldMaintenanceDialog_btnSave');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='EXTENDEDFIELD_MAINTENANCE_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_ExtendedFieldMaintenanceDialog_btnSave');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='EXTENDEDFIELD_MAINTENANCE_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ExtendedFieldMaintenanceDialog_eventName');
				
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'button_ExtendedFieldCaptureDialog_btnSave'; 
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'button_ExtendedFieldMaintenanceDialog_btnSave'; 
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'ExtendedFieldMaintenanceDialog_eventName'; 
				
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),2,'ExtendedFieldMaintenanceDialog_eventName','ExtendedFieldMaintenanceDialog',0,1000,current_timestamp,'Approved','',' ',' ',' ',' ',0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),2,'button_ExtendedFieldMaintenanceDialog_btnSave','ExtendedFieldMaintenanceDialog',0,1000,current_timestamp,'Approved','',' ',' ',' ',' ',0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),2,'button_ExtendedFieldCaptureDialog_btnSave','ExtendedFieldCaptureDialog',0,1000,current_timestamp,'Approved','',' ',' ',' ',' ',0);
				
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),(SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'EXTENDEDFIELD_MAINTENANCE_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'ExtendedFieldMaintenanceDialog_eventName'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),(SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'EXTENDEDFIELD_MAINTENANCE_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_ExtendedFieldMaintenanceDialog_btnSave'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),(SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'EXTENDEDFIELD_MAINTENANCE_APPROVER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_ExtendedFieldMaintenanceDialog_btnSave'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),(SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'EXTENDEDFIELD_MAINTENANCE_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_ExtendedFieldCaptureDialog_btnSave'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#13.28" author="sampath.d" dbms="oracle">
		<sql>
			<![CDATA[
				INSERT INTO EXTENDEDFIELDMAINTENANCE (ID, REFERENCE, TYPE, EVENT, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, WORKFLOWID) (select SeqExtendedFieldMaintenance.nextval, fm.finreference, fm.fintype, 'Origination', '1', '1000', current_timestamp, 'Approved', '0' from financemain fm where  fm.FINISACTIVE = 0);
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#13.29" author="sampath.d">
		<sql>
			<![CDATA[
				DELETE FROM SECROLEGROUPS WHERE ROLEID IN (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'EXTENDEDFIELD_CONFIGURATION_APPROVER') AND GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'EXTENDEDFIELD_CONFIGURATION_APPROVER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='EXTENDEDFIELD_CONFIGURATION_APPROVER');
				DELETE FROM SECROLEGROUPS WHERE GRPID = (SELECT GRPID FROM plf.SECGROUPS WHERE GRPCODE='EXTENDEDFIELD_CONFIGURATION_APPROVER');
				DELETE FROM SECGROUPS WHERE GRPCODE = 'EXTENDEDFIELD_CONFIGURATION_APPROVER';
				DELETE FROM SECROLES WHERE ROLECD = 'EXTENDEDFIELD_CONFIGURATION_APPROVER';
				
				INSERT INTO SECGROUPS (GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPID)+1 FROM SECGROUPS),'EXTENDEDFIELD_CONFIGURATION_APPROVER','Extended fields configuration approver',1,1000,CURRENT_TIMESTAMP,'Approved',null,null,null,null,null,0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),(SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'EXTENDEDFIELD_CONFIGURATION_APPROVER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_ExtendedFieldConfigDialog_btnSave'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'EXTENDEDFIELD_CONFIGURATION_APPROVER', 'Extended Field Maintenance Approver Role', '', 1, 1000, CURRENT_TIMESTAMP, 'Approved', '', '', '', '', '', 0) ;
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'EXTENDEDFIELD_CONFIGURATION_APPROVER'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'EXTENDEDFIELD_CONFIGURATION_APPROVER'), 0, 1000, CURRENT_TIMESTAMP, '', '', '', '', '', '', 0);
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#24.1.1" author="saisandeep.b">
		<addColumn tableName="FinanceMain_Temp">
			<column name="Escrow" type="smallint"/>
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#24.1.2" author="saisandeep.b">
		<addColumn tableName="FinanceMain_Temp">
			<column name="CustBankId" type="bigint" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#24.2.1" author="saisandeep.b">
		<addColumn tableName="FinanceMain">
			<column name="Escrow" type="smallint"/>
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#24.2.2" author="saisandeep.b">
		<addColumn tableName="FinanceMain">
			<column name="CustBankId" type="bigint" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#24.3" author="saisandeep.b">
		<sql>
			<![CDATA[
				Delete From SecGroupRights Where Rightid = (Select Rightid From SecRights Where RightName = 'FinanceMainDialog_escrow');
				Delete From SecGroupRights Where Rightid = (Select Rightid From SecRights Where RightName = 'FinanceMainDialog_CustomerBankAcctNumber');
				
				Delete From SecRights Where RightName = 'FinanceMainDialog_escrow';
				Delete From SecRights Where RightName = 'FinanceMainDialog_CustomerBankAcctNumber';
				
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'FinanceMainDialog_escrow', 'FinanceMainDialog', 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'FinanceMainDialog_CustomerBankAcctNumber', 'FinanceMainDialog', 1,	1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO	SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE =	'BFSD_ORIGINATION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE	RIGHTNAME = 'FinanceMainDialog_escrow'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO	SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE =	'BFSD_ORIGINATION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE	RIGHTNAME = 'FinanceMainDialog_CustomerBankAcctNumber'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
        		INSERT INTO	SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE =	'CL_ORIGINATION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE	RIGHTNAME = 'FinanceMainDialog_escrow'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO	SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE =	'CL_ORIGINATION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE	RIGHTNAME = 'FinanceMainDialog_CustomerBankAcctNumber'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
        		INSERT INTO	SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE =	'OD_ODMAINTENANCE_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE	RIGHTNAME = 'FinanceMainDialog_escrow'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO	SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE =	'OD_ODMAINTENANCE_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE	RIGHTNAME = 'FinanceMainDialog_CustomerBankAcctNumber'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
        		INSERT INTO	SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE =	'FIN_MAINTAINRPYBASIC_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE	RIGHTNAME = 'FinanceMainDialog_escrow'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO	SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE =	'FIN_MAINTAINRPYBASIC_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE	RIGHTNAME = 'FinanceMainDialog_CustomerBankAcctNumber'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
        		INSERT INTO	SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE =	'CL_ORIGINATION_WRM') ,(SELECT RIGHTID FROM SECRIGHTS WHERE	RIGHTNAME = 'FinanceMainDialog_escrow'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO	SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE =	'CL_ORIGINATION_WRM') ,(SELECT RIGHTID FROM SECRIGHTS WHERE	RIGHTNAME = 'FinanceMainDialog_CustomerBankAcctNumber'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#24.4.1" author="saisandeep.b">
		<addForeignKeyConstraint constraintName="FK_FinanceMain_CustBankId"
			baseTableName="FinanceMain" baseColumnNames="CustBankId" referencedColumnNames="BankId"
			referencedTableName="CUSTOMERBANKINFO" />
	</changeSet>
	
	<changeSet id="ST#24.5.1" author="saisandeep.b">
		<addForeignKeyConstraint constraintName="FK_FinanceMain_Temp_CustBankId"
			baseTableName="FinanceMain_Temp" baseColumnNames="CustBankId" referencedColumnNames="BankId"
			referencedTableName="CUSTOMERBANKINFO" />
	</changeSet>
	
	<changeSet id="ST#24.6.1" author="saisandeep.b">
		<sql>
			<![CDATA[
				UPDATE FinanceMain Set Escrow = 0 where Escrow is null;
				UPDATE FinanceMain_Temp Set Escrow = 0 where Escrow is null;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#24.7" author="saisandeep.b">
		<addNotNullConstraint tableName="FinanceMain" columnName="Escrow"
			columnDataType="smallint" />
	</changeSet>

	<changeSet id="ST#24.8" author="saisandeep.b">
		<addNotNullConstraint tableName="FinanceMain_Temp" columnName="Escrow"
			columnDataType="smallint" />
	</changeSet>

	<changeSet id="ST#24.9" author="saisandeep.b" dbms="postgresql, oracle">
		<addDefaultValue columnName="Escrow" tableName="FinanceMain" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#24.10" author="saisandeep.b" dbms="postgresql, oracle">
		<addDefaultValue columnName="Escrow" tableName="FinanceMain_Temp" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#24.9.1" author="saisandeep.b" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE FinanceMain ADD CONSTRAINT DF_FM_Escrow DEFAULT 0 FOR Escrow;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#24.10.1" author="saisandeep.b" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE FinanceMain_Temp ADD CONSTRAINT DF_FMT_Escrow DEFAULT 0 FOR Escrow;
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#24.11_pre" author="saisandeep.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemain_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#24.11" author="saisandeep.b">
		<createView viewName="FINANCEMAIN_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINREFERENCE,
				    T1.INVESTMENTREF,
				    T1.NUMBEROFTERMS,
				    T1.GRCPERIODENDDATE,
				    T1.ALLOWGRCPERIOD,
				    T1.GRACEBASERATE,
				    T1.GRACESPECIALRATE,
				    T1.GRCPFTRATE,
				    T1.GRCPFTFRQ,
				    T1.NEXTGRCPFTDATE,
				    T1.ALLOWGRCPFTRVW,
				    T1.GRCPFTRVWFRQ,
				    T1.NEXTGRCPFTRVWDATE,
				    T1.ALLOWGRCCPZ,
				    T1.GRCCPZFRQ,
				    T1.NEXTGRCCPZDATE,
				    T1.REPAYBASERATE,
				    T1.REPAYSPECIALRATE,
				    T1.REPAYPROFITRATE,
				    T1.REPAYFRQ,
				    T1.NEXTREPAYDATE,
				    T1.REPAYPFTFRQ,
				    T1.NEXTREPAYPFTDATE,
				    T1.ALLOWREPAYRVW,
				    T1.REPAYRVWFRQ,
				    T1.NEXTREPAYRVWDATE,
				    T1.ALLOWREPAYCPZ,
				    T1.REPAYCPZFRQ,
				    T1.NEXTREPAYCPZDATE,
				    T1.MATURITYDATE,
				    T1.CPZATGRACEEND,
				    T1.DOWNPAYMENT,
				    T1.GRACEFLATAMOUNT,
				    T1.REQREPAYAMOUNT,
				    T1.TOTALPROFIT,
				    T1.TOTALCPZ,
				    T1.TOTALGROSSPFT,
				    T1.TOTALGROSSGRCPFT,
				    T1.TOTALGRACEPFT,
				    T1.TOTALGRACECPZ,
				    T1.GRCRATEBASIS,
				    T1.REPAYRATEBASIS,
				    T1.FINTYPE,
				    T1.FINREMARKS,
				    T1.FINCCY,
				    T1.SCHEDULEMETHOD,
				    T1.PROFITDAYSBASIS,
				    T1.REQMATURITY,
				    T1.CALTERMS,
				    T1.CALMATURITY,
				    T1.FIRSTREPAY,
				    T1.LASTREPAY,
				    T1.FINSTARTDATE,
				    T1.FINAMOUNT,
				    T1.FINAMOUNT + T1.FEECHARGEAMT - T1.DOWNPAYMENT LOVDESCFINANCINGAMOUNT,
				    T1.FINREPAYMENTAMOUNT,
				    T1.CUSTID,
				    T1.DEFFERMENTS,
				    T1.PLANDEFERCOUNT,
				    T1.FINBRANCH,
				    T1.FINSOURCEID,
				    T1.ALLOWEDDEFRPYCHANGE,
				    T1.AVAILEDDEFRPYCHANGE,
				    T1.ALLOWEDDEFFRQCHANGE,
				    T1.AVAILEDDEFFRQCHANGE,
				    T1.RECALTYPE,
				    T1.FINASSETVALUE,
				    T1.DISBACCOUNTID,
				    T1.REPAYACCOUNTID,
				    T1.FINISACTIVE,
				    T1.LIMITVALID,
				    T1.OVERRIDELIMIT,
				    T1.SECURITYDEPOSIT,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T7.FINTYPEDESC LOVDESCFINTYPENAME,
				    T7.FINMAXAMOUNT LOVDESCFINMAXAMT,
				    T7.FINMINAMOUNT LOVDESCFINMINAMOUNT,
				    T1.MINDOWNPAYPERC,
				    T7.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
				    T7.FINISDWPAYREQUIRED LOVDESCDWNPAYREQ,
				    T7.FINMAXDIFFERMENT LOVDESCFINMAXDIFFERMENT,
				    T12.BRANCHDESC LOVDESCFINBRANCHNAME,
				    T12.BRANCHPROVINCE FINBRANCHPROVINCECODE,
				    T1.LASTREPAYDATE,
				    T1.LASTREPAYPFTDATE,
				    T1.LASTREPAYRVWDATE,
				    T1.LASTREPAYCPZDATE,
				    T1.ALLOWGRCREPAY,
				    T1.GRCSCHDMTHD,
				    T1.GRCMARGIN,
				    T1.REPAYMARGIN,
				    T1.FINCURRASSETVALUE,
				    T1.FINCOMMITMENTREF,
				    T1.FINLIMITREF,
				    T1.DEPRECIATIONFRQ,
				    T1.FINCONTRACTDATE,
				    T1.NEXTDEPDATE,
				    T1.LASTDEPDATE,
				    T1.FINACCOUNT,
				    T1.FINCUSTPFTACCOUNT,
				    T17.ACRTILLLBD LOVDESCACCRUEDTILLLBD,
				    T7.FINRVWRATEAPPLFOR,
				    T1.TOTALREPAYAMT,
				    T1.CLOSINGSTATUS,
				    T1.FINAPPROVEDDATE,
				    T1.FEECHARGEAMT,
				    T1.BLACKLISTED,
				    T1.FINREPAYPFTONFRQ,
				    T1.ANUALIZEDPERCRATE,
				    T1.EFFECTIVERATEOFRETURN,
				    T1.MIGRATEDFINANCE,
				    T1.SCHEDULEMAINTAINED,
				    T1.SCHEDULEREGENERATED,
				    T1.FINPURPOSE,
				    T39.LOANPURPOSEDESC LOVDESCFINPURPOSENAME,
				    T1.FINSTATUS,
				    T1.FINSTSREASON,
				    T1.INITIATEUSER,
				    T1.BANKNAME,
				    T1.IBAN,
				    T1.ACCOUNTTYPE,
				    T1.DDAREFERENCENO,
				    T7.FINSCHEDULEON LOVDESCFINSCHEDULEON,
				    T1.CUSTDSR,
				    T1.JOINTACCOUNT,
				    T1.JOINTCUSTID,
				    T1.DOWNPAYBANK,
				    T1.DOWNPAYSUPL,
				    T1.DOWNPAYACCOUNT,
				    T1.SECURITYCOLLATERAL,
				    T1.APPROVED,
				    T1.DISCREPANCY,
				    T1.LIMITAPPROVED,
				    T1.GRACETERMS,
				    T7.FINDIVISION LOVDESCFINDIVISION,
				    T1.RCDMAINTAINSTS,
				    T1.FINREPAYMETHOD,
				    T1.GRCPROFITDAYSBASIS,
				    T1.STEPFINANCE,
				    T1.STEPTYPE,
				    T1.STEPPOLICY,
				    T1.ALWMANUALSTEPS,
				    T1.NOOFSTEPS,
				    T1.LINKEDFINREF,
				    T1.NEXTUSERID,
				    T1.PRIORITY,
				    T24.POLICYDESC LOVDESCSTEPPOLICYNAME,
				    T1.GRCMINRATE,
				    T1.GRCMAXRATE,
				    T1.RPYMINRATE,
				    T1.RPYMAXRATE,
				    T1.DEVIATIONAPPROVAL,
				    T1.MANUALSCHEDULE,
				    T1.TAKEOVERFINANCE,
				    T1.GRCADVBASERATE,
				    T1.GRCADVMARGIN,
				    T1.GRCADVPFTRATE,
				    T1.RPYADVBASERATE,
				    T1.RPYADVMARGIN,
				    T1.RPYADVPFTRATE,
				    T1.SUPPLEMENTRENT,
				    T1.INCREASEDCOST,
				    T1.CREDITINSAMT,
				    T1.ROLLOVERFRQ,
				    T1.NEXTROLLOVERDATE,
				    T27.CUSTSTSDESCRIPTION,
				    T1.SHARIASTATUS,
				    T1.INITIATEDATE,
				    T1.FINPREAPPROVEDREF,
				    T1.MMAID,
				    T1.ACCOUNTSOFFICER,
				    T1.FEEACCOUNTID,
				    T1.FINCANCELAC,
				    T28.DEALERNAME LOVDESCACCOUNTSOFFICER,
				    T28.DEALERCITY LOVDESCSOURCECITY,
				    T1.DSACODE,
				    T30.ROFFICERDESC DSACODEDESC,
				    T1.TDSAPPLICABLE,
				    T1.MANDATEID,
				    T1.DROPLINEFRQ,
				    T1.FIRSTDROPLINEDATE,
				    T1.PFTSERVICINGODLIMIT,
				    T1.INSURANCEAMT,
				    T1.DEDUCTINSDISB,
				    T1.ALWBPI,
				    T1.BPITREATMENT,
				    T1.PLANEMIHALW,
				    T1.PLANEMIHMETHOD,
				    T1.PLANEMIHMAXPERYEAR,
				    T1.PLANEMIHMAX,
				    T1.PLANEMIHLOCKPERIOD,
				    T1.PLANEMICPZ,
				    T1.CALROUNDINGMODE,
				    T1.ALWMULTIDISB,
				    T1.APPLICATIONNO,
				    T1.REFERRALID,
				    T33.ROFFICERDESC REFERRALIDDESC,
				    T1.DMACODE,
				    T34.ROFFICERDESC DMACODEDESC,
				    T1.SALESDEPARTMENT,
				    T35.DEPTDESC SALESDEPARTMENTDESC,
				    T1.QUICKDISB,
				    T1.WIFREFERENCE,
				    T1.UNPLANEMIHLOCKPERIOD,
				    T1.UNPLANEMICPZ,
				    T1.REAGECPZ,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.AVAILEDUNPLANEMI,
				    T1.AVAILEDREAGEH,
				    T1.BPIAMOUNT,
				    T1.DEDUCTFEEDISB,
				    T1.RVWRATEAPPLFOR,
				    T1.SCHCALONRVW,
				    T1.PASTDUEPFTCALMTHD,
				    T1.PASTDUEPFTMARGIN,
				    T1.DROPPINGMETHOD,
				    T1.RATECHGANYDAY,
				    T1.PROMOTIONCODE,
				    T1.RESTRUCTURELOAN,
				    T1.OLDFINREFERENCE,
				    T1.REAGEBUCKET,
				    T1.FINCATEGORY,
				    T1.PRODUCTCATEGORY,
				    T1.ROUNDINGTARGET,
				    T36.ENTITYCODE LOVDESCENTITYCODE,
				    T1.ELIGIBILITYMETHOD,
				    T38.FIELDCODEVALUE LOVELIGIBILITYMETHOD,
				    T38.VALUEDESC LOVDESCELIGIBILITYMETHOD,
				    T1.EMPLOYEENAME,
				    T37.ROFFICERDESC EMPLOYEENAMEDESC,
				    T1.SAMPLINGREQUIRED,
				    T1.LEGALREQUIRED,
				    T1.GRCMAXAMOUNT,
				    T1.CONNECTOR,
				    T40.DEALERNAME CONNECTORCODE,
				    T40.DEALERCITY CONNECTORDESC,
				    T1.ADVANCEEMI,
				    T1.ADVEMITERMS,
				    T1.BPIPFTDAYSBASIS,
				    T1.FIXEDRATETENOR,
				    T1.FIXEDTENORRATE,
				    T12.BRANCHTEL FINBRANCHCONTACT,
				    T1.PROCESSATTRIBUTES,
				    T1.BUSINESSVERTICAL,
				    BV.CODE BUSINESSVERTICALCODE,
				    BV.DESCRIPTION BUSINESSVERTICALDESC,
				    T1.GRCADVTYPE,
				    T1.GRCADVTERMS,
				    T1.ADVTYPE,
				    T1.ADVTERMS,
				    T1.ADVSTAGE,
				    T1.TDSPERCENTAGE,
				    T1.TDSSTARTDATE,
				    T1.TDSENDDATE,
				    T1.TDSLIMITAMT,
				    T1.VANREQ,
				    T1.VANCODE,
				    T1.ALLOWDRAWINGPOWER,
				    T1.ALLOWREVOLVING,
				    T1.SANBSDSCHDLE,
				    T1.PROMOTIONSEQID,
				    T1.SVAMOUNT,
				    T1.CBAMOUNT,
				    T1.APPLIEDLOANAMT,
				    T1.FINISRATERVWATGRCEND,
					T1.PLANEMIHALWINGRACE,
					T1.ALWGRCADJ,
					T1.ENDGRCPERIODAFTRFULLDISB,
					T1.AUTOINCGRCENDDATE,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS,
					T1.SCHDVERSION,
					T1.SUBVENTIONFROM,
					T1.MANUFACTURERDEALERID,
					T41.DEALERNAME MANUFACTURERDEALERNAME,
					T41.CODE MANUFACTURERDEALERCODE,
					T1.ESCROW,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME
				FROM FINANCEMAIN_TEMP T1
				JOIN RMTFINANCETYPES T7 ON T1.FINTYPE  = T7.FINTYPE 
				LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH  = T12.BRANCHCODE 
				LEFT JOIN FINPFTDETAILS T17 ON T17.FINREFERENCE  = T1.FINREFERENCE 
				LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY  = T24.POLICYCODE 
				LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS  = T27.CUSTSTSCODE 
				LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
				LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE  = T30.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID  = T33.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE  = T34.ROFFICERCODE 
				LEFT JOIN BMTDEPARTMENTS T35 ON T1.SALESDEPARTMENT  = T35.DEPTCODE 
				LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION  = T36.DIVISIONCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME  = T37.ROFFICERCODE 
				LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE  = 'ELGMETHOD' 
				LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE  = T39.LOANPURPOSECODE 
				LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
				LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
				LEFT JOIN AMTVEHICLEDEALER T41 ON T1.MANUFACTURERDEALERID = T41.DEALERID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				UNION ALL
				SELECT T1.FINREFERENCE,
				    T1.INVESTMENTREF,
				    T1.NUMBEROFTERMS,
				    T1.GRCPERIODENDDATE,
				    T1.ALLOWGRCPERIOD,
				    T1.GRACEBASERATE,
				    T1.GRACESPECIALRATE,
				    T1.GRCPFTRATE,
				    T1.GRCPFTFRQ,
				    T1.NEXTGRCPFTDATE,
				    T1.ALLOWGRCPFTRVW,
				    T1.GRCPFTRVWFRQ,
				    T1.NEXTGRCPFTRVWDATE,
				    T1.ALLOWGRCCPZ,
				    T1.GRCCPZFRQ,
				    T1.NEXTGRCCPZDATE,
				    T1.REPAYBASERATE,
				    T1.REPAYSPECIALRATE,
				    T1.REPAYPROFITRATE,
				    T1.REPAYFRQ,
				    T1.NEXTREPAYDATE,
				    T1.REPAYPFTFRQ,
				    T1.NEXTREPAYPFTDATE,
				    T1.ALLOWREPAYRVW,
				    T1.REPAYRVWFRQ,
				    T1.NEXTREPAYRVWDATE,
				    T1.ALLOWREPAYCPZ,
				    T1.REPAYCPZFRQ,
				    T1.NEXTREPAYCPZDATE,
				    T1.MATURITYDATE,
				    T1.CPZATGRACEEND,
				    T1.DOWNPAYMENT,
				    T1.GRACEFLATAMOUNT,
				    T1.REQREPAYAMOUNT,
				    T1.TOTALPROFIT,
				    T1.TOTALCPZ,
				    T1.TOTALGROSSPFT,
				    T1.TOTALGROSSGRCPFT,
				    T1.TOTALGRACEPFT,
				    T1.TOTALGRACECPZ,
				    T1.GRCRATEBASIS,
				    T1.REPAYRATEBASIS,
				    T1.FINTYPE,
				    T1.FINREMARKS,
				    T1.FINCCY,
				    T1.SCHEDULEMETHOD,
				    T1.PROFITDAYSBASIS,
				    T1.REQMATURITY,
				    T1.CALTERMS,
				    T1.CALMATURITY,
				    T1.FIRSTREPAY,
				    T1.LASTREPAY,
				    T1.FINSTARTDATE,
				    T1.FINAMOUNT,
				    T1.FINAMOUNT + T1.FEECHARGEAMT - T1.DOWNPAYMENT LOVDESCFINANCINGAMOUNT,
				    T1.FINREPAYMENTAMOUNT,
				    T1.CUSTID,
				    T1.DEFFERMENTS,
				    T1.PLANDEFERCOUNT,
				    T1.FINBRANCH,
				    T1.FINSOURCEID,
				    T1.ALLOWEDDEFRPYCHANGE,
				    T1.AVAILEDDEFRPYCHANGE,
				    T1.ALLOWEDDEFFRQCHANGE,
				    T1.AVAILEDDEFFRQCHANGE,
				    T1.RECALTYPE,
				    T1.FINASSETVALUE,
				    T1.DISBACCOUNTID,
				    T1.REPAYACCOUNTID,
				    T1.FINISACTIVE,
				    T1.LIMITVALID,
				    T1.OVERRIDELIMIT,
				    T1.SECURITYDEPOSIT,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T7.FINTYPEDESC LOVDESCFINTYPENAME,
				    T7.FINMAXAMOUNT LOVDESCFINMAXAMT,
				    T7.FINMINAMOUNT LOVDESCFINMINAMOUNT,
				    T1.MINDOWNPAYPERC,
				    T7.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
				    T7.FINISDWPAYREQUIRED LOVDESCDWNPAYREQ,
				    T7.FINMAXDIFFERMENT LOVDESCFINMAXDIFFERMENT,
				    T12.BRANCHDESC LOVDESCFINBRANCHNAME,
				    T12.BRANCHPROVINCE FINBRANCHPROVINCECODE,
				    T1.LASTREPAYDATE,
				    T1.LASTREPAYPFTDATE,
				    T1.LASTREPAYRVWDATE,
				    T1.LASTREPAYCPZDATE,
				    T1.ALLOWGRCREPAY,
				    T1.GRCSCHDMTHD,
				    T1.GRCMARGIN,
				    T1.REPAYMARGIN,
				    T1.FINCURRASSETVALUE,
				    T1.FINCOMMITMENTREF,
				    T1.FINLIMITREF,
				    T1.DEPRECIATIONFRQ,
				    T1.FINCONTRACTDATE,
				    T1.NEXTDEPDATE,
				    T1.LASTDEPDATE,
				    T1.FINACCOUNT,
				    T1.FINCUSTPFTACCOUNT,
				    T17.ACRTILLLBD LOVDESCACCRUEDTILLLBD,
				    T7.FINRVWRATEAPPLFOR,
				    T1.TOTALREPAYAMT,
				    T1.CLOSINGSTATUS,
				    T1.FINAPPROVEDDATE,
				    T1.FEECHARGEAMT,
				    T1.BLACKLISTED,
				    T1.FINREPAYPFTONFRQ,
				    T1.ANUALIZEDPERCRATE,
				    T1.EFFECTIVERATEOFRETURN,
				    T1.MIGRATEDFINANCE,
				    T1.SCHEDULEMAINTAINED,
				    T1.SCHEDULEREGENERATED,
				    T1.FINPURPOSE,
				    T39.LOANPURPOSEDESC LOVDESCFINPURPOSENAME,
				    T1.FINSTATUS,
				    T1.FINSTSREASON,
				    T1.INITIATEUSER,
				    T1.BANKNAME,
				    T1.IBAN,
				    T1.ACCOUNTTYPE,
				    T1.DDAREFERENCENO,
				    T7.FINSCHEDULEON LOVDESCFINSCHEDULEON,
				    T1.CUSTDSR,
				    T1.JOINTACCOUNT,
				    T1.JOINTCUSTID,
				    T1.DOWNPAYBANK,
				    T1.DOWNPAYSUPL,
				    T1.DOWNPAYACCOUNT,
				    T1.SECURITYCOLLATERAL,
				    T1.APPROVED,
				    T1.DISCREPANCY,
				    T1.LIMITAPPROVED,
				    T1.GRACETERMS,
				    T7.FINDIVISION LOVDESCFINDIVISION,
				    T1.RCDMAINTAINSTS,
				    T1.FINREPAYMETHOD,
				    T1.GRCPROFITDAYSBASIS,
				    T1.STEPFINANCE,
				    T1.STEPTYPE,
				    T1.STEPPOLICY,
				    T1.ALWMANUALSTEPS,
				    T1.NOOFSTEPS,
				    T1.LINKEDFINREF,
				    T1.NEXTUSERID,
				    T1.PRIORITY,
				    T24.POLICYDESC LOVDESCSTEPPOLICYNAME,
				    T1.GRCMINRATE,
				    T1.GRCMAXRATE,
				    T1.RPYMINRATE,
				    T1.RPYMAXRATE,
				    T1.DEVIATIONAPPROVAL,
				    T1.MANUALSCHEDULE,
				    T1.TAKEOVERFINANCE,
				    T1.GRCADVBASERATE,
				    T1.GRCADVMARGIN,
				    T1.GRCADVPFTRATE,
				    T1.RPYADVBASERATE,
				    T1.RPYADVMARGIN,
				    T1.RPYADVPFTRATE,
				    T1.SUPPLEMENTRENT,
				    T1.INCREASEDCOST,
				    T1.CREDITINSAMT,
				    T1.ROLLOVERFRQ,
				    T1.NEXTROLLOVERDATE,
				    T27.CUSTSTSDESCRIPTION,
				    T1.SHARIASTATUS,
				    T1.INITIATEDATE,
				    T1.FINPREAPPROVEDREF,
				    T1.MMAID,
				    T1.ACCOUNTSOFFICER,
				    T1.FEEACCOUNTID,
				    T1.FINCANCELAC,
				    T28.DEALERNAME LOVDESCACCOUNTSOFFICER,
				    T28.DEALERCITY LOVDESCSOURCECITY,
				    T1.DSACODE,
				    T30.ROFFICERDESC DSACODEDESC,
				    T1.TDSAPPLICABLE,
				    T1.MANDATEID,
				    T1.DROPLINEFRQ,
				    T1.FIRSTDROPLINEDATE,
				    T1.PFTSERVICINGODLIMIT,
				    T1.INSURANCEAMT,
				    T1.DEDUCTINSDISB,
				    T1.ALWBPI,
				    T1.BPITREATMENT,
				    T1.PLANEMIHALW,
				    T1.PLANEMIHMETHOD,
				    T1.PLANEMIHMAXPERYEAR,
				    T1.PLANEMIHMAX,
				    T1.PLANEMIHLOCKPERIOD,
				    T1.PLANEMICPZ,
				    T1.CALROUNDINGMODE,
				    T1.ALWMULTIDISB,
				    T1.APPLICATIONNO,
				    T1.REFERRALID,
				    T33.ROFFICERDESC REFERRALIDDESC,
				    T1.DMACODE,
				    T34.ROFFICERDESC DMACODEDESC,
				    T1.SALESDEPARTMENT,
				    T35.DEPTDESC SALESDEPARTMENTDESC,
				    T1.QUICKDISB,
				    T1.WIFREFERENCE,
				    T1.UNPLANEMIHLOCKPERIOD,
				    T1.UNPLANEMICPZ,
				    T1.REAGECPZ,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.AVAILEDUNPLANEMI,
				    T1.AVAILEDREAGEH,
				    T1.BPIAMOUNT,
				    T1.DEDUCTFEEDISB,
				    T1.RVWRATEAPPLFOR,
				    T1.SCHCALONRVW,
				    T1.PASTDUEPFTCALMTHD,
				    T1.PASTDUEPFTMARGIN,
				    T1.DROPPINGMETHOD,
				    T1.RATECHGANYDAY,
				    T1.PROMOTIONCODE,
				    T1.RESTRUCTURELOAN,
				    T1.OLDFINREFERENCE,
				    T1.REAGEBUCKET,
				    T1.FINCATEGORY,
				    T1.PRODUCTCATEGORY,
				    T1.ROUNDINGTARGET,
				    T36.ENTITYCODE LOVDESCENTITYCODE,
				    T1.ELIGIBILITYMETHOD,
				    T38.FIELDCODEVALUE LOVELIGIBILITYMETHOD,
				    T38.VALUEDESC LOVDESCELIGIBILITYMETHOD,
				    T1.EMPLOYEENAME,
				    T37.ROFFICERDESC EMPLOYEENAMEDESC,
				    T1.SAMPLINGREQUIRED,
				    T1.LEGALREQUIRED,
				    T1.GRCMAXAMOUNT,
				    T1.CONNECTOR,
				    T40.DEALERNAME CONNECTORCODE,
				    T40.DEALERCITY CONNECTORDESC,
				    T1.ADVANCEEMI,
				    T1.ADVEMITERMS,
				    T1.BPIPFTDAYSBASIS,
				    T1.FIXEDRATETENOR,
				    T1.FIXEDTENORRATE,
				    T12.BRANCHTEL FINBRANCHCONTACT,
				    T1.PROCESSATTRIBUTES,
				    T1.BUSINESSVERTICAL,
				    BV.CODE BUSINESSVERTICALCODE,
				    BV.DESCRIPTION BUSINESSVERTICALDESC,
				    T1.GRCADVTYPE,
				    T1.GRCADVTERMS,
				    T1.ADVTYPE,
				    T1.ADVTERMS,
				    T1.ADVSTAGE,
				    T1.TDSPERCENTAGE,
				    T1.TDSSTARTDATE,
				    T1.TDSENDDATE,
				    T1.TDSLIMITAMT,
				    T1.VANREQ,
				    T1.VANCODE,
				    T1.ALLOWDRAWINGPOWER,
				    T1.ALLOWREVOLVING,
				    T1.SANBSDSCHDLE,
				    T1.PROMOTIONSEQID,
				    T1.SVAMOUNT,
				    T1.CBAMOUNT,
				    T1.APPLIEDLOANAMT,
				    T1.FINISRATERVWATGRCEND,
					T1.PLANEMIHALWINGRACE,
					T1.ALWGRCADJ,
					T1.ENDGRCPERIODAFTRFULLDISB,
					T1.AUTOINCGRCENDDATE,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS,
					T1.SCHDVERSION,
					T1.SUBVENTIONFROM,
					T1.MANUFACTURERDEALERID,
					T41.DEALERNAME MANUFACTURERDEALERNAME,
					T41.CODE MANUFACTURERDEALERCODE,
					T1.ESCROW,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME
				FROM FINANCEMAIN T1
				JOIN RMTFINANCETYPES T7 ON T1.FINTYPE  = T7.FINTYPE 
				LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH  = T12.BRANCHCODE 
				LEFT JOIN FINPFTDETAILS T17 ON T17.FINREFERENCE  = T1.FINREFERENCE 
				LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY  = T24.POLICYCODE 
				LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS  = T27.CUSTSTSCODE 
				LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
				LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE  = T30.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID  = T33.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE  = T34.ROFFICERCODE 
				LEFT JOIN BMTDEPARTMENTS T35 ON T1.SALESDEPARTMENT  = T35.DEPTCODE 
				LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION  = T36.DIVISIONCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME  = T37.ROFFICERCODE 
				LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE  = 'ELGMETHOD' 
				LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE  = T39.LOANPURPOSECODE 
				LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
				LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
				LEFT JOIN AMTVEHICLEDEALER T41 ON T1.MANUFACTURERDEALERID = T41.DEALERID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				WHERE NOT (EXISTS ( SELECT 1 FROM FINANCEMAIN_TEMP 
					WHERE FINANCEMAIN_TEMP.FINREFERENCE  = T1.FINREFERENCE ))
			]]>	
		</createView>
	</changeSet>
	
	<changeSet id="ST#24.11_post" author="saisandeep.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#24.12_pre" author="saisandeep.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemain_aview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id = "ST#24.12" author="saisandeep.b">
		<createView viewName="FINANCEMAIN_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINREFERENCE,
					T1.INVESTMENTREF,
					T1.NUMBEROFTERMS,
					T1.GRCPERIODENDDATE,
					T1.ALLOWGRCPERIOD,
					T1.GRACEBASERATE,
					T1.GRACESPECIALRATE,
					T1.GRCPFTRATE,
					T1.GRCPFTFRQ,
					T1.NEXTGRCPFTDATE,
					T1.ALLOWGRCPFTRVW,
					T1.GRCPFTRVWFRQ,
					T1.NEXTGRCPFTRVWDATE,
					T1.ALLOWGRCCPZ,
					T1.GRCCPZFRQ,
					T1.NEXTGRCCPZDATE,
					T1.REPAYBASERATE,
					T1.REPAYSPECIALRATE,
					T1.REPAYPROFITRATE,
					T1.REPAYFRQ,
					T1.NEXTREPAYDATE,
					T1.REPAYPFTFRQ,
					T1.NEXTREPAYPFTDATE,
					T1.ALLOWREPAYRVW,
					T1.REPAYRVWFRQ,
					T1.NEXTREPAYRVWDATE,
					T1.ALLOWREPAYCPZ,
					T1.REPAYCPZFRQ,
					T1.NEXTREPAYCPZDATE,
					T1.MATURITYDATE,
					T1.CPZATGRACEEND,
					T1.DOWNPAYMENT,
					T1.GRACEFLATAMOUNT,
					T1.REQREPAYAMOUNT,
					T1.TOTALPROFIT,
					T1.TOTALCPZ,
					T1.TOTALGROSSPFT,
					T1.TOTALGROSSGRCPFT,
					T1.TOTALGRACEPFT,
					T1.TOTALGRACECPZ,
					T1.GRCRATEBASIS,
					T1.REPAYRATEBASIS,
					T1.FINTYPE,
					T1.FINREMARKS,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.REQMATURITY,
					T1.CALTERMS,
					T1.CALMATURITY,
					T1.FIRSTREPAY,
					T1.LASTREPAY,
					T1.FINSTARTDATE,
					T1.FINAMOUNT,
					T1.FINAMOUNT + T1.FEECHARGEAMT - T1.DOWNPAYMENT LOVDESCFINANCINGAMOUNT,
					T1.FINREPAYMENTAMOUNT,
					T1.CUSTID,
					T1.DEFFERMENTS,
					T1.PLANDEFERCOUNT,
					T1.FINBRANCH,
					T1.FINSOURCEID,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.ALLOWEDDEFFRQCHANGE,
					T1.AVAILEDDEFFRQCHANGE,
					T1.RECALTYPE,
					T1.FINASSETVALUE,
					T1.DISBACCOUNTID,
					T1.REPAYACCOUNTID,
					T1.FINISACTIVE,
					T1.LIMITVALID,
					T1.OVERRIDELIMIT,
					T1.SECURITYDEPOSIT,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T7.FINTYPEDESC LOVDESCFINTYPENAME,
					T7.FINMAXAMOUNT LOVDESCFINMAXAMT,
					T7.FINMINAMOUNT LOVDESCFINMINAMOUNT,
					T1.MINDOWNPAYPERC,
					T7.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
					T7.FINISDWPAYREQUIRED LOVDESCDWNPAYREQ,
					T7.FINMAXDIFFERMENT LOVDESCFINMAXDIFFERMENT,
					T12.BRANCHDESC LOVDESCFINBRANCHNAME,
					T12.BRANCHPROVINCE FINBRANCHPROVINCECODE,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.LASTREPAYRVWDATE,
					T1.LASTREPAYCPZDATE,
					T1.ALLOWGRCREPAY,
					T1.GRCSCHDMTHD,
					T1.GRCMARGIN,
					T1.REPAYMARGIN,
					T1.FINCURRASSETVALUE,
					T1.FINCOMMITMENTREF,
					T1.FINLIMITREF,
					T1.DEPRECIATIONFRQ,
					T1.FINCONTRACTDATE,
					T1.NEXTDEPDATE,
					T1.LASTDEPDATE,
					T1.FINACCOUNT,
					T1.FINCUSTPFTACCOUNT,
					T17.ACRTILLLBD LOVDESCACCRUEDTILLLBD,
					T7.FINRVWRATEAPPLFOR,
					T1.TOTALREPAYAMT,
					T1.CLOSINGSTATUS,
					T1.FINAPPROVEDDATE,
					T1.FEECHARGEAMT,
					T1.BLACKLISTED,
					T1.FINREPAYPFTONFRQ,
					T1.ANUALIZEDPERCRATE,
					T1.EFFECTIVERATEOFRETURN,
					T1.MIGRATEDFINANCE,
					T1.SCHEDULEMAINTAINED,
					T1.SCHEDULEREGENERATED,
					T1.FINPURPOSE,
					T39.LOANPURPOSEDESC LOVDESCFINPURPOSENAME,
					T1.FINSTATUS,
					T1.FINSTSREASON,
					T1.INITIATEUSER,
					T1.BANKNAME,
					T1.IBAN,
					T1.ACCOUNTTYPE,
					T1.DDAREFERENCENO,
					T7.FINSCHEDULEON LOVDESCFINSCHEDULEON,
					T1.CUSTDSR,
					T1.JOINTACCOUNT,
					T1.JOINTCUSTID,
					T1.DOWNPAYBANK,
					T1.DOWNPAYSUPL,
					T1.DOWNPAYACCOUNT,
					T1.SECURITYCOLLATERAL,
					T1.APPROVED,
					T1.DISCREPANCY,
					T1.LIMITAPPROVED,
					T1.GRACETERMS,
					T7.FINDIVISION LOVDESCFINDIVISION,
					T1.RCDMAINTAINSTS,
					T1.FINREPAYMETHOD,
					T1.GRCPROFITDAYSBASIS,
					T1.STEPFINANCE,
					T1.STEPTYPE,
					T1.STEPPOLICY,
					T1.ALWMANUALSTEPS,
					T1.NOOFSTEPS,
					T1.LINKEDFINREF,
					T1.NEXTUSERID,
					T1.PRIORITY,
					T24.POLICYDESC LOVDESCSTEPPOLICYNAME,
					T1.GRCMINRATE,
					T1.GRCMAXRATE,
					T1.RPYMINRATE,
					T1.RPYMAXRATE,
					T1.DEVIATIONAPPROVAL,
					T1.MANUALSCHEDULE,
					T1.TAKEOVERFINANCE,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.SUPPLEMENTRENT,
					T1.INCREASEDCOST,
					T1.CREDITINSAMT,
					T1.ROLLOVERFRQ,
					T1.NEXTROLLOVERDATE,
					T27.CUSTSTSDESCRIPTION,
					T1.SHARIASTATUS,
					T1.INITIATEDATE,
					T1.FINPREAPPROVEDREF,
					T1.MMAID,
					T1.ACCOUNTSOFFICER,
					T1.FEEACCOUNTID,
					T1.FINCANCELAC,
					T28.DEALERNAME LOVDESCACCOUNTSOFFICER,
					T28.DEALERCITY LOVDESCSOURCECITY,
					T1.DSACODE,
					T30.ROFFICERDESC DSACODEDESC,
					T1.TDSAPPLICABLE,
					T1.MANDATEID,
					T1.DROPLINEFRQ,
					T1.FIRSTDROPLINEDATE,
					T1.PFTSERVICINGODLIMIT,
					T1.INSURANCEAMT,
					T1.DEDUCTINSDISB,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.CALROUNDINGMODE,
					T1.ALWMULTIDISB,
					T1.APPLICATIONNO,
					T1.REFERRALID,
					T33.ROFFICERDESC REFERRALIDDESC,
					T1.DMACODE,
					T34.ROFFICERDESC DMACODEDESC,
					T1.SALESDEPARTMENT,
					T35.DEPTDESC SALESDEPARTMENTDESC,
					T1.QUICKDISB,
					T1.WIFREFERENCE,
					T1.UNPLANEMIHLOCKPERIOD,
					T1.UNPLANEMICPZ,
					T1.REAGECPZ,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.AVAILEDUNPLANEMI,
					T1.AVAILEDREAGEH,
					T1.BPIAMOUNT,
					T1.DEDUCTFEEDISB,
					T1.RVWRATEAPPLFOR,
					T1.SCHCALONRVW,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.PROMOTIONCODE,
					T1.RESTRUCTURELOAN,
					T1.OLDFINREFERENCE,
					T1.REAGEBUCKET,
					T1.FINCATEGORY,
					T1.PRODUCTCATEGORY,
					T1.ROUNDINGTARGET,
					T36.ENTITYCODE LOVDESCENTITYCODE,
					T1.ELIGIBILITYMETHOD,
					T38.FIELDCODEVALUE LOVELIGIBILITYMETHOD,
					T38.VALUEDESC LOVDESCELIGIBILITYMETHOD,
					T1.EMPLOYEENAME,
					T37.ROFFICERDESC EMPLOYEENAMEDESC,
					T1.SAMPLINGREQUIRED,
					T1.LEGALREQUIRED,
					T1.GRCMAXAMOUNT,
					T1.CONNECTOR,
					T40.DEALERNAME CONNECTORCODE,
					T40.DEALERCITY CONNECTORDESC,
					T1.ADVANCEEMI,
					T1.ADVEMITERMS,
					T1.BPIPFTDAYSBASIS,
					T1.FIXEDRATETENOR,
					T1.FIXEDTENORRATE,
					T12.BRANCHTEL FINBRANCHCONTACT,
					T1.PROCESSATTRIBUTES,
					T1.BUSINESSVERTICAL,
					BV.CODE BUSINESSVERTICALCODE,
					BV.DESCRIPTION BUSINESSVERTICALDESC,
					T1.GRCADVTYPE,
					T1.GRCADVTERMS,
					T1.ADVTYPE,
					T1.ADVTERMS,
					T1.ADVSTAGE,
					T1.TDSPERCENTAGE,
					T1.TDSSTARTDATE,
					T1.TDSENDDATE,
					T1.TDSLIMITAMT,
					T1.VANREQ,
					T1.VANCODE,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING,
					T1.SANBSDSCHDLE,
					T1.PROMOTIONSEQID,
					T1.SVAMOUNT,
					T1.CBAMOUNT,
					T1.APPLIEDLOANAMT,
					T1.FINISRATERVWATGRCEND,
					T1.PLANEMIHALWINGRACE,
					T1.ALWGRCADJ,
					T1.ENDGRCPERIODAFTRFULLDISB,
					T1.AUTOINCGRCENDDATE,
					C.CUSTCIF LOVDESCCUSTCIF,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS,
					T1.SCHDVERSION,
					T1.SUBVENTIONFROM,
					T1.MANUFACTURERDEALERID,
					T41.DEALERNAME MANUFACTURERDEALERNAME,
					T41.CODE MANUFACTURERDEALERCODE,
					T1.ESCROW,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME
				FROM FINANCEMAIN T1
				JOIN RMTFINANCETYPES T7 ON T1.FINTYPE = T7.FINTYPE 
				LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH  = T12.BRANCHCODE 
				LEFT JOIN FINPFTDETAILS T17 ON T17.FINREFERENCE  = T1.FINREFERENCE 
				LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY  = T24.POLICYCODE 
				LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS  = T27.CUSTSTSCODE 
				LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
				LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE  = T30.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID  = T33.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE  = T34.ROFFICERCODE 
				LEFT JOIN BMTDEPARTMENTS T35 ON T1.SALESDEPARTMENT  = T35.DEPTCODE 
				LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION  = T36.DIVISIONCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME  = T37.ROFFICERCODE 
				LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE  = 'ELGMETHOD' 
				LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE  = T39.LOANPURPOSECODE 
				LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
				LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
				INNER JOIN CUSTOMERS C ON C.CUSTID = t1.CUSTID
				LEFT JOIN AMTVEHICLEDEALER T41 ON T1.MANUFACTURERDEALERID = T41.DEALERID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
			]]>	
		</createView>
	</changeSet>
	
	<changeSet id="ST#24.12_post" author="saisandeep.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_aview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#24.13_pre" author="saisandeep.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemain_tview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id = "ST#24.13" author="saisandeep.b">
		<createView viewName="FINANCEMAIN_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINREFERENCE,
					T1.INVESTMENTREF,
					T1.NUMBEROFTERMS,
					T1.GRCPERIODENDDATE,
					T1.ALLOWGRCPERIOD,
					T1.GRACEBASERATE,
					T1.GRACESPECIALRATE,
					T1.GRCPFTRATE,
					T1.GRCPFTFRQ,
					T1.NEXTGRCPFTDATE,
					T1.ALLOWGRCPFTRVW,
					T1.GRCPFTRVWFRQ,
					T1.NEXTGRCPFTRVWDATE,
					T1.ALLOWGRCCPZ,
					T1.GRCCPZFRQ,
					T1.NEXTGRCCPZDATE,
					T1.REPAYBASERATE,
					T1.REPAYSPECIALRATE,
					T1.REPAYPROFITRATE,
					T1.REPAYFRQ,
					T1.NEXTREPAYDATE,
					T1.REPAYPFTFRQ,
					T1.NEXTREPAYPFTDATE,
					T1.ALLOWREPAYRVW,
					T1.REPAYRVWFRQ,
					T1.NEXTREPAYRVWDATE,
					T1.ALLOWREPAYCPZ,
					T1.REPAYCPZFRQ,
					T1.NEXTREPAYCPZDATE,
					T1.MATURITYDATE,
					T1.CPZATGRACEEND,
					T1.DOWNPAYMENT,
					T1.GRACEFLATAMOUNT,
					T1.REQREPAYAMOUNT,
					T1.TOTALPROFIT,
					T1.TOTALCPZ,
					T1.TOTALGROSSPFT,
					T1.TOTALGROSSGRCPFT,
					T1.TOTALGRACEPFT,
					T1.TOTALGRACECPZ,
					T1.GRCRATEBASIS,
					T1.REPAYRATEBASIS,
					T1.FINTYPE,
					T1.FINREMARKS,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.REQMATURITY,
					T1.CALTERMS,
					T1.CALMATURITY,
					T1.FIRSTREPAY,
					T1.LASTREPAY,
					T1.FINSTARTDATE,
					T1.FINAMOUNT,
					T1.FINAMOUNT + T1.FEECHARGEAMT - T1.DOWNPAYMENT LOVDESCFINANCINGAMOUNT,
					T1.FINREPAYMENTAMOUNT,
					T1.CUSTID,
					T1.DEFFERMENTS,
					T1.PLANDEFERCOUNT,
					T1.FINBRANCH,
					T1.FINSOURCEID,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.ALLOWEDDEFFRQCHANGE,
					T1.AVAILEDDEFFRQCHANGE,
					T1.RECALTYPE,
					T1.FINASSETVALUE,
					T1.DISBACCOUNTID,
					T1.REPAYACCOUNTID,
					T1.FINISACTIVE,
					T1.LIMITVALID,
					T1.OVERRIDELIMIT,
					T1.SECURITYDEPOSIT,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T7.FINTYPEDESC LOVDESCFINTYPENAME,
					T7.FINMAXAMOUNT LOVDESCFINMAXAMT,
					T7.FINMINAMOUNT LOVDESCFINMINAMOUNT,
					T1.MINDOWNPAYPERC,
					T7.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
					T7.FINISDWPAYREQUIRED LOVDESCDWNPAYREQ,
					T7.FINMAXDIFFERMENT LOVDESCFINMAXDIFFERMENT,
					T12.BRANCHDESC LOVDESCFINBRANCHNAME,
					T12.BRANCHPROVINCE FINBRANCHPROVINCECODE,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.LASTREPAYRVWDATE,
					T1.LASTREPAYCPZDATE,
					T1.ALLOWGRCREPAY,
					T1.GRCSCHDMTHD,
					T1.GRCMARGIN,
					T1.REPAYMARGIN,
					T1.FINCURRASSETVALUE,
					T1.FINCOMMITMENTREF,
					T1.FINLIMITREF,
					T1.DEPRECIATIONFRQ,
					T1.FINCONTRACTDATE,
					T1.NEXTDEPDATE,
					T1.LASTDEPDATE,
					T1.FINACCOUNT,
					T1.FINCUSTPFTACCOUNT,
					T17.ACRTILLLBD LOVDESCACCRUEDTILLLBD,
					T7.FINRVWRATEAPPLFOR,
					T1.TOTALREPAYAMT,
					T1.CLOSINGSTATUS,
					T1.FINAPPROVEDDATE,
					T1.FEECHARGEAMT,
					T1.BLACKLISTED,
					T1.FINREPAYPFTONFRQ,
					T1.ANUALIZEDPERCRATE,
					T1.EFFECTIVERATEOFRETURN,
					T1.MIGRATEDFINANCE,
					T1.SCHEDULEMAINTAINED,
					T1.SCHEDULEREGENERATED,
					T1.FINPURPOSE,
					T39.LOANPURPOSEDESC LOVDESCFINPURPOSENAME,
					T1.FINSTATUS,
					T1.FINSTSREASON,
					T1.INITIATEUSER,
					T1.BANKNAME,
					T1.IBAN,
					T1.ACCOUNTTYPE,
					T1.DDAREFERENCENO,
					T7.FINSCHEDULEON LOVDESCFINSCHEDULEON,
					T1.CUSTDSR,
					T1.JOINTACCOUNT,
					T1.JOINTCUSTID,
					T1.DOWNPAYBANK,
					T1.DOWNPAYSUPL,
					T1.DOWNPAYACCOUNT,
					T1.SECURITYCOLLATERAL,
					T1.APPROVED,
					T1.DISCREPANCY,
					T1.LIMITAPPROVED,
					T1.GRACETERMS,
					T7.FINDIVISION LOVDESCFINDIVISION,
					T1.RCDMAINTAINSTS,
					T1.FINREPAYMETHOD,
					T1.GRCPROFITDAYSBASIS,
					T1.STEPFINANCE,
					T1.STEPTYPE,
					T1.STEPPOLICY,
					T1.ALWMANUALSTEPS,
					T1.NOOFSTEPS,
					T1.LINKEDFINREF,
					T1.NEXTUSERID,
					T1.PRIORITY,
					T24.POLICYDESC LOVDESCSTEPPOLICYNAME,
					T1.GRCMINRATE,
					T1.GRCMAXRATE,
					T1.RPYMINRATE,
					T1.RPYMAXRATE,
					T1.DEVIATIONAPPROVAL,
					T1.MANUALSCHEDULE,
					T1.TAKEOVERFINANCE,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.SUPPLEMENTRENT,
					T1.INCREASEDCOST,
					T1.CREDITINSAMT,
					T1.ROLLOVERFRQ,
					T1.NEXTROLLOVERDATE,
					T27.CUSTSTSDESCRIPTION,
					T1.SHARIASTATUS,
					T1.INITIATEDATE,
					T1.FINPREAPPROVEDREF,
					T1.MMAID,
					T1.ACCOUNTSOFFICER,
					T1.FEEACCOUNTID,
					T1.FINCANCELAC,
					T28.DEALERNAME LOVDESCACCOUNTSOFFICER,
					T28.DEALERCITY LOVDESCSOURCECITY,
					T1.DSACODE,
					T30.ROFFICERDESC DSACODEDESC,
					T1.TDSAPPLICABLE,
					T1.MANDATEID,
					T1.DROPLINEFRQ,
					T1.FIRSTDROPLINEDATE,
					T1.PFTSERVICINGODLIMIT,
					T1.INSURANCEAMT,
					T1.DEDUCTINSDISB,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.CALROUNDINGMODE,
					T1.ALWMULTIDISB,
					T1.APPLICATIONNO,
					T1.REFERRALID,
					T33.ROFFICERDESC REFERRALIDDESC,
					T1.DMACODE,
					T34.ROFFICERDESC DMACODEDESC,
					T1.SALESDEPARTMENT,
					T35.DEPTDESC SALESDEPARTMENTDESC,
					T1.QUICKDISB,
					T1.WIFREFERENCE,
					T1.UNPLANEMIHLOCKPERIOD,
					T1.UNPLANEMICPZ,
					T1.REAGECPZ,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.AVAILEDUNPLANEMI,
					T1.AVAILEDREAGEH,
					T1.BPIAMOUNT,
					T1.DEDUCTFEEDISB,
					T1.RVWRATEAPPLFOR,
					T1.SCHCALONRVW,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.PROMOTIONCODE,
					T1.RESTRUCTURELOAN,
					T1.OLDFINREFERENCE,
					T1.REAGEBUCKET,
					T1.FINCATEGORY,
					T1.PRODUCTCATEGORY,
					T1.ROUNDINGTARGET,
					T36.ENTITYCODE LOVDESCENTITYCODE,
					T1.ELIGIBILITYMETHOD,
					T38.FIELDCODEVALUE LOVELIGIBILITYMETHOD,
					T38.VALUEDESC LOVDESCELIGIBILITYMETHOD,
					T1.EMPLOYEENAME,
					T37.ROFFICERDESC EMPLOYEENAMEDESC,
					T1.SAMPLINGREQUIRED,
					T1.LEGALREQUIRED,
					T1.GRCMAXAMOUNT,
					T1.CONNECTOR,
					T40.DEALERNAME CONNECTORCODE,
					T40.DEALERCITY CONNECTORDESC,
					T1.ADVANCEEMI,
					T1.ADVEMITERMS,
					T1.BPIPFTDAYSBASIS,
					T1.FIXEDRATETENOR,
					T1.FIXEDTENORRATE,
					T12.BRANCHTEL FINBRANCHCONTACT,
					T1.PROCESSATTRIBUTES,
					T1.BUSINESSVERTICAL,
					BV.CODE BUSINESSVERTICALCODE,
					BV.DESCRIPTION BUSINESSVERTICALDESC,
					T1.GRCADVTYPE,
					T1.GRCADVTERMS,
					T1.ADVTYPE,
					T1.ADVTERMS,
					T1.ADVSTAGE,
					T1.TDSPERCENTAGE,
					T1.TDSSTARTDATE,
					T1.TDSENDDATE,
					T1.TDSLIMITAMT,
					T1.VANREQ,
					T1.VANCODE,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING,
					T1.SANBSDSCHDLE,
					T1.PROMOTIONSEQID,
					T1.SVAMOUNT,
					T1.CBAMOUNT,
					T1.APPLIEDLOANAMT,
					T1.FINISRATERVWATGRCEND,
					T1.PLANEMIHALWINGRACE,
					T1.ALWGRCADJ,
					T1.ENDGRCPERIODAFTRFULLDISB,
					T1.AUTOINCGRCENDDATE,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS,
					T1.SCHDVERSION,
					T1.SUBVENTIONFROM,
					T1.MANUFACTURERDEALERID,
					T41.DEALERNAME MANUFACTURERDEALERNAME,
					T41.CODE MANUFACTURERDEALERCODE,
					T1.ESCROW,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME
				FROM FINANCEMAIN_TEMP T1
				JOIN RMTFINANCETYPES T7 ON T1.FINTYPE  = T7.FINTYPE 
				LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH  = T12.BRANCHCODE 
				LEFT JOIN FINPFTDETAILS T17 ON T17.FINREFERENCE  = T1.FINREFERENCE 
				LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY  = T24.POLICYCODE 
				LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS  = T27.CUSTSTSCODE 
				LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
				LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE  = T30.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID  = T33.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE  = T34.ROFFICERCODE 
				LEFT JOIN BMTDEPARTMENTS T35 ON T1.SALESDEPARTMENT  = T35.DEPTCODE 
				LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION  = T36.DIVISIONCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME  = T37.ROFFICERCODE 
				LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE  = 'ELGMETHOD' 
				LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE  = T39.LOANPURPOSECODE 
				LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
				LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
				LEFT JOIN AMTVEHICLEDEALER T41 ON T1.MANUFACTURERDEALERID = T41.DEALERID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
			]]>	
		</createView>
	</changeSet>
	
	<changeSet id="ST#24.13_post" author="saisandeep.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_tview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#24.14_pre" author="saisandeep.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemain_lview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id = "ST#24.14" author="saisandeep.b">
		<createView viewName="FINANCEMAIN_LVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINREFERENCE,
					T1.INVESTMENTREF,
					T1.FINTYPE,
					T1.FINCCY,
					T1.FINAMOUNT,
					T1.DOWNPAYMENT,
					T1.FEECHARGEAMT,
					T1.SCHEDULEMETHOD,
					T1.NUMBEROFTERMS,
					T1.RECORDSTATUS,
					T1.RECORDTYPE,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.FINBRANCH,
					T1.FINCONTRACTDATE,
					T1.LINKEDFINREF,
					T1.NEXTUSERID,
					T1.PRIORITY,
					T1.WORKFLOWID,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.FINPREAPPROVEDREF,
					T1.RCDMAINTAINSTS,
					T1.INSURANCEAMT,
					T1.FINCURRASSETVALUE,
					T1.CALTERMS,
					T1.DEVIATIONAPPROVAL,
					T1.FINPURPOSE,
					T1.INITIATEDATE,
					T1.FINASSETVALUE,
					T2.CUSTID,
					T2.CUSTCIF LOVDESCCUSTCIF,
					T2.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
					T2.CUSTPASSPORTNO LOVDESCCUSTPASSPORTNO,
					T2.CUSTDOB LOVDESCCUSTDOB,
					T2.CUSTCRCPR LOVDESCCUSTCRCPR,
					T2.PHONENUMBER,
					T3.FINCATEGORY LOVDESCPRODUCTCODENAME,
					T3.FINDIVISION LOVDESCFINDIVISION,
					T3.PRODUCT LOVDESCFINPRODUCT,
					T3.FINTYPEDESC LOVDESCFINTYPENAME,
					COALESCE(T4.ROLEDESC,  ${add.schema}FN_GET_ROLEDESC(T1.NEXTROLECODE)) LOVDESCREQUESTSTAGE,
					T1.SAMPLINGREQUIRED,
					T1.ADVANCEEMI,
					T1.ADVEMITERMS,
					T1.BPIPFTDAYSBASIS,
					T1.GRACETERMS,
					T1.PRODUCTCATEGORY,
					T1.VERSION,
					T1.TDSAPPLICABLE,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS,
					T1.SCHDVERSION,
					T1.SUBVENTIONFROM,
					T1.MANUFACTURERDEALERID,
					T5.DEALERNAME MANUFACTURERDEALERNAME,
					T5.CODE MANUFACTURERDEALERCODE,
					T1.ESCROW,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME
				FROM FINANCEMAIN_TEMP T1
				JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
				JOIN RMTFINANCETYPES T3 ON T3.FINTYPE = T1.FINTYPE
				LEFT JOIN SECROLES T4 ON T1.NEXTROLECODE = T4.ROLECD
				LEFT JOIN AMTVEHICLEDEALER T5 ON T1.MANUFACTURERDEALERID = T5.DEALERID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
			]]>	
		</createView>
	</changeSet>
	
	<changeSet id="ST#24.14_post" author="saisandeep.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_lview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#24.15_pre" author="saisandeep.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemain_dataview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id = "ST#24.15" author="saisandeep.b">
		<createView viewName="FINANCEMAIN_DATAVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINREFERENCE,
					T1.FINTYPE,
					T2.CUSTCIF LOVDESCCUSTCIF,
					T1.CUSTID,
					T1.CLOSINGSTATUS,
					T1.FINISACTIVE,
					T1.MATURITYDATE,
					T1.PRODUCTCATEGORY,
					T1.WRITEOFFLOAN,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS,
					T1.SCHDVERSION,
					T4.TOTALPRIBAL OUTSTANDINGAMOUNT,
					T1.SUBVENTIONFROM,
					T1.MANUFACTURERDEALERID,
					T5.DEALERNAME MANUFACTURERDEALERNAME,
					T5.CODE MANUFACTURERDEALERCODE,
					T1.ESCROW,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME
				FROM FINANCEMAIN T1
				JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
				JOIN RMTFINANCETYPES T3 ON T3.FINTYPE = T1.FINTYPE
				JOIN FINPFTDETAILS T4 ON T4.FINREFERENCE = T1.FINREFERENCE
				LEFT JOIN AMTVEHICLEDEALER T5 ON T1.MANUFACTURERDEALERID = T5.DEALERID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				WHERE T4.TOTALPRIBAL > 0 AND (T1.CLOSINGSTATUS IS NULL OR T1.CLOSINGSTATUS <> 'C')
			]]>	
		</createView>
	</changeSet>
	
	<changeSet id="ST#24.15_post" author="saisandeep.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_dataview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#24.16.1_pre" author="saisandeep.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemain_dview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id = "ST#24.16.1" author="saisandeep.b">
		<createView viewName="FINANCEMAIN_DVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINREFERENCE,
					T1.INVESTMENTREF,
					T1.FINTYPE,
					T1.FINCCY,
					T1.FINAMOUNT,
					T1.DOWNPAYMENT,
					T1.FEECHARGEAMT,
					T1.SCHEDULEMETHOD,
					T1.RECORDSTATUS,
					T1.RECORDTYPE,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.FINBRANCH,
					T1.FINASSETVALUE,
					T2.CUSTCIF LOVDESCCUSTCIF,
					T2.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
					T2.CUSTID,
					T2.CUSTCIF,
					T3.FINCATEGORY LOVDESCPRODUCTCODENAME,
					T3.FINDIVISION LOVDESCFINDIVISION,
					T1.SAMPLINGREQUIRED,
					T1.LEGALREQUIRED,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS,
					T1.SCHDVERSION,
					T1.SUBVENTIONFROM,
					T1.MANUFACTURERDEALERID,
					T5.DEALERNAME MANUFACTURERDEALERNAME,
					T5.CODE MANUFACTURERDEALERCODE,
					T1.ESCROW,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME
				FROM FINANCEMAIN_TEMP T1
				JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
				JOIN RMTFINANCETYPES T3 ON T3.FINTYPE = T1.FINTYPE
				JOIN INVESTMENTFINHEADER T4 ON T4.INVESTMENTREF = T1.INVESTMENTREF
				LEFT JOIN AMTVEHICLEDEALER T5 ON T1.MANUFACTURERDEALERID = T5.DEALERID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
			]]>	
		</createView>
	</changeSet>
	
	<changeSet id="ST#24.16.1_post" author="saisandeep.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_dview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#24.17_pre" author="saisandeep.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financeenquiry_tview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id = "ST#24.17" author="saisandeep.b">
		<createView viewName="FINANCEENQUIRY_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINREFERENCE,
					T1.FINBRANCH,
					T1.FINTYPE,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.FINSTARTDATE,
					T1.CALTERMS NUMBEROFTERMS,
					T1.CUSTID,
					T1.FINAMOUNT,
					T1.GRCPERIODENDDATE,
					T1.MATURITYDATE,
					T1.FINREPAYMENTAMOUNT,
					T1.FINISACTIVE,
					T1.ALLOWGRCPERIOD,
					T1.DOWNPAYMENT,
					T1.MIGRATEDFINANCE,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.FINCURRASSETVALUE,
					T1.BLACKLISTED,
					T1.FEECHARGEAMT,
					T1.CLOSINGSTATUS,
					T1.GRACETERMS,
					T1.ALWMULTIDISB,
					T1.DEFFERMENTS,
					T1.FINSTATUS,
					T1.MANDATEID,
					T1.FINREPAYMETHOD,
					T1.FINASSETVALUE,
					T1.FINCURRASSETVALUE + T1.FEECHARGEAMT + T1.INSURANCEAMT FINANCINGAMOUNT,
					T1.FINCURRASSETVALUE - T1.FINREPAYMENTAMOUNT + T1.FEECHARGEAMT + T1.INSURANCEAMT CURFINAMOUNT,
					T2.FINTYPEDESC LOVDESCFINTYPENAME,
					T2.FINSCHEDULEON LOVDESCFINSCHEDULEON,
					T2.FINDIVISION LOVDESCFINDIVISION,
					T2.FINCATEGORY LOVDESCPRODUCTCODENAME,
					T2.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
					T3.CUSTCIF LOVDESCCUSTCIF,
					T3.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
					T4.BRANCHDESC LOVDESCFINBRANCHNAME,
					T5.CUSTTYPECTG,
					COALESCE(T9.NOINST, 0)  NOINST,
					T1.TOTALCPZ,
					T1.ALWGRCADJ,
					T1.ENDGRCPERIODAFTRFULLDISB,
					T1.AUTOINCGRCENDDATE,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.SUBVENTIONFROM,
					T1.MANUFACTURERDEALERID,
					T10.DEALERNAME MANUFACTURERDEALERNAME,
					T10.CODE MANUFACTURERDEALERCODE,
					T1.ESCROW,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME
				FROM FINANCEMAIN_TEMP T1
				JOIN RMTFINANCETYPES T2 ON T1.FINTYPE = T2.FINTYPE
				JOIN CUSTOMERS T3 ON T1.CUSTID = T3.CUSTID
				JOIN RMTBRANCHES T4 ON T1.FINBRANCH = T4.BRANCHCODE
				JOIN RMTCUSTTYPES T5 ON T3.CUSTTYPECODE = T5.CUSTTYPECODE
				LEFT JOIN FINPFTDETAILS T9 ON T1.FINREFERENCE = T9.FINREFERENCE
				LEFT JOIN AMTVEHICLEDEALER T10 ON T1.MANUFACTURERDEALERID = T10.DEALERID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
			]]>	
		</createView>
	</changeSet>
	
	<changeSet id="ST#24.17_post" author="saisandeep.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financeenquiry_tview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#24.18_pre" author="saisandeep.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financeenquiry_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#24.18" author="saisandeep.b">
		<createView viewName="FINANCEENQUIRY_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT t1.finreference,
					T1.FINBRANCH,
					T1.FINTYPE,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.FINSTARTDATE,
					T1.CALTERMS NUMBEROFTERMS,
					T1.CUSTID,
					T1.FINAMOUNT,
					T1.GRCPERIODENDDATE,
					T1.MATURITYDATE,
					T1.FINREPAYMENTAMOUNT,
					T1.FINISACTIVE,
					T1.ALLOWGRCPERIOD,
					T1.DOWNPAYMENT,
					T1.MIGRATEDFINANCE,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.FINCURRASSETVALUE,
					T1.BLACKLISTED,
					T1.FEECHARGEAMT,
					T1.CLOSINGSTATUS,
					T1.GRACETERMS,
					T1.ALWMULTIDISB,
					T1.DEFFERMENTS,
					T1.FINSTATUS ,
					T1.MANDATEID,
					T1.FINREPAYMETHOD,
					T1.FINASSETVALUE,
					T1.INSURANCEAMT,
					T1.SANBSDSCHDLE,
					T1.PROMOTIONSEQID,
					T1.SVAMOUNT,
					T1.CBAMOUNT,
					(T1.FINCURRASSETVALUE+ T1.FEECHARGEAMT+T1.INSURANCEAMT) FINANCINGAMOUNT,
					(T1.FINCURRASSETVALUE- T1.FINREPAYMENTAMOUNT+ T1.FEECHARGEAMT+T1.INSURANCEAMT) CURFINAMOUNT,
					T2.FINTYPEDESC LOVDESCFINTYPENAME,
					T2.FINSCHEDULEON LOVDESCFINSCHEDULEON,
					T2.FINDIVISION LOVDESCFINDIVISION,
					T2.FINCATEGORY LOVDESCPRODUCTCODENAME,
					T2.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
					T3.CUSTCIF LOVDESCCUSTCIF,
					T3.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
					T4.BRANCHDESC LOVDESCFINBRANCHNAME,
					T5.CUSTTYPECTG,
					COALESCE(T9.NOINST,0) NOINST,
					T1.TOTALCPZ,
					T1.ALWGRCADJ,
					T1.ENDGRCPERIODAFTRFULLDISB,
					T1.AUTOINCGRCENDDATE,
					T1.RECORDSTATUS,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.SUBVENTIONFROM,
					T1.MANUFACTURERDEALERID,
					T10.DEALERNAME MANUFACTURERDEALERNAME,
					T10.CODE MANUFACTURERDEALERCODE,
					T1.ESCROW,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME
				FROM FINANCEMAIN T1
				INNER JOIN RMTFINANCETYPES T2 ON T1.FINTYPE = T2.FINTYPE
				INNER JOIN CUSTOMERS T3 ON T1.CUSTID = T3.CUSTID
				INNER JOIN RMTBRANCHES T4 ON T1.FINBRANCH = T4.BRANCHCODE
				INNER JOIN RMTCUSTTYPES T5 ON T3.CUSTTYPECODE = T5.CUSTTYPECODE
				LEFT JOIN FINPFTDETAILS T9 ON T1.FINREFERENCE = T9.FINREFERENCE
				LEFT JOIN AMTVEHICLEDEALER T10 ON T1.MANUFACTURERDEALERID = T10.DEALERID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
			]]>	
		</createView>
	</changeSet>
	
	<changeSet id="ST#24.18_post" author="saisandeep.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financeenquiry_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#24.19" author="saisandeep.b">
		<sql>
			<![CDATA[
				DELETE FROM REPORTFILTERFIELDS WHERE REPORTID IN (SELECT REPORTID FROM REPORTCONFIGURATION WHERE MENUITEMCODE = 'menu_Item_EscrowPresentationReport');
				DELETE FROM REPORTCONFIGURATION WHERE MENUITEMCODE = 'menu_Item_EscrowPresentationReport';
       
				Insert into REPORTCONFIGURATION values ((select max(reportid)+1 from REPORTCONFIGURATION),'Excel:Escrow Presentation Report','Escrow Presentation Report',1,'EscrowMISReport','dataSource',0,'menu_Item_EscrowPresentationReport',1,1000,null,null,null,null,null,null,0,current_timestamp,0,0,0);
				Insert into REPORTFILTERFIELDS values ((select reportid from REPORTCONFIGURATION where menuitemcode='menu_Item_EscrowPresentationReport'),1,'Date','DATERANGE','Date','SCHDATE',null,'---Select----',null,null,0,0,0,0,1,1,null,null,null,null,150,0,'=',3,1000,'Approved',null,null,null,null,null,0,current_timestamp,null);
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#24.20" author="saisandeep.b">
		<sql>
			<![CDATA[
								
				DELETE FROM SECUSEROPERATIONS WHERE OPRID = (SELECT OPRID FROM SECOPERATIONS WHERE OPRCODE = 'Operation_Escrow_Presentation_Report');
				DELETE FROM SECOPERATIONROLES WHERE OPRID = (SELECT OPRID FROM SECOPERATIONS WHERE OPRCODE = 'Operation_Escrow_Presentation_Report') AND ROLEID = (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'Role_Escrow_Presentation_Report');
				DELETE FROM SECROLEGROUPS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'Group_Escrow_Presentation_Report') and ROLEID = (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'Role_Escrow_Presentation_Report');
				DELETE FROM SECGROUPRIGHTS WHERE  GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'Group_Escrow_Presentation_Report') and RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_EscrowPresentationReport');
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_EscrowPresentationReport';
				DELETE FROM SECGROUPS WHERE GRPCODE = 'Group_Escrow_Presentation_Report';
				DELETE FROM SECROLES WHERE ROLECD = 'Role_Escrow_Presentation_Report';
				DELETE FROM SECOPERATIONS WHERE OPRCODE = 'Operation_Escrow_Presentation_Report';
				
				INSERT INTO SECRIGHTS VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),0, 'menu_Item_EscrowPresentationReport','MENU',0,1000,CURRENT_TIMESTAMP,'APPROVED',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPS (GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'Group_Escrow_Presentation_Report', 'Group for Escrow presentation report', 1, 1000, CURRENT_TIMESTAMP, 'Approved', '', '', '', '','', 0);
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'Role_Escrow_Presentation_Report', 'Role for Escrow presentation report', '', 1, 1000, CURRENT_TIMESTAMP, 'Approved', '', '', '', '', '', 0) ;
				INSERT INTO SECOPERATIONS (OPRID, OPRCODE, OPRDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(OPRID)+1 FROM SECOPERATIONS), 'Operation_Escrow_Presentation_Report', 'Operation For Escrow presentation report', 1, 1000, CURRENT_TIMESTAMP, 'Approved', '', '', '', '', '', 0);
				INSERT INTO	SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'Group_Escrow_Presentation_Report'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_EscrowPresentationReport'), 1, 1, 1000, current_timestamp, '', '', '', '', '', '', 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'Group_Escrow_Presentation_Report'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'Role_Escrow_Presentation_Report'), 0, 1000, CURRENT_TIMESTAMP, '', '', '', '', '', '', 0);
				INSERT INTO SECOPERATIONROLES (OPRROLEID, OPRID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(OPRROLEID)+1 FROM SECOPERATIONROLES), (SELECT OPRID FROM SECOPERATIONS WHERE OPRCODE = 'Operation_Escrow_Presentation_Report'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'Role_Escrow_Presentation_Report'), 1, 1000, CURRENT_TIMESTAMP, 'Approved', '', '', '', '', '', 0);
				
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#38.1" author="saisandeep.b">
		<addColumn tableName="FinAdvancePayments">
			<column name="LEI" type="varchar(100)"/>
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#38.2" author="saisandeep.b">
		<addColumn tableName="FinAdvancePayments_Temp">
			<column name="LEI" type="varchar(100)"/>
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#38.3" author="saisandeep.b">
		<addColumn tableName="PaymentInstructions">
			<column name="LEI" type="varchar(100)"/>
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#38.4" author="saisandeep.b">
		<addColumn tableName="PaymentInstructions_Temp">
			<column name="LEI" type="varchar(100)"/>
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#38.5" author="saisandeep.b">
		<addColumn tableName="FinAdvancePayments_PA">
			<column name="LEI" type="varchar(100)"/>
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#38.6_pre" author="saisandeep.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finadvancepayments_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id = "ST#38.6" author="saisandeep.b">
		<createView viewName="FINADVANCEPAYMENTS_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINREFERENCE,
				T1.PAYMENTID,
				T1.PAYMENTSEQ,
				T1.PAYMENTDETAIL,
				T1.AMTTOBERELEASED,
				T1.LIABILITYHOLDNAME,
				T1.TRANSACTIONREF,
				T1.BENEFICIARYNAME,
				T1.BENEFICIARYACCNO,
				T1.REENTERBENEFICIARYACCNO,
				T1.DESCRIPTION,
				T1.PAYMENTTYPE,
				T1.LLREFERENCENO,
				T1.LLDATE,
				T1.CUSTCONTRIBUTION,
				T1.SELLERCONTRIBUTION,
				T1.REMARKS,
				T1.DISBDATE,
				T1.DISBSEQ,
				T1.VERSION,
				T1.LASTMNTBY,
				T1.LASTMNTON,
				T1.RECORDSTATUS,
				T1.ROLECODE,
				T1.NEXTROLECODE,
				T1.TASKID,
				T1.NEXTTASKID,
				T1.RECORDTYPE,
				T1.WORKFLOWID,
				T1.BANKCODE,
				T1.PAYABLELOC,
				T1.PRINTINGLOC,
				T1.VALUEDATE,
				T1.BANKBRANCHID,
				T1.PHONECOUNTRYCODE,
				T1.PHONEAREACODE,
				T1.PHONENUMBER,
				T1.CLEARINGDATE,
				T1.STATUS,
				T1.ACTIVE,
				T1.INPUTDATE,
				T1.DISBCCY,
				T1.POISSUED,
				T3.BANKCODE BRANCHBANKCODE,
				T31.BANKNAME BRANCHBANKNAME,
				T3.BRANCHCODE,
				T3.BRANCHDESC,
				T3.IFSC,
				T3.CITY,
				T4.BANKNAME,
				T1.PARTNERBANKID,
				T5.PARTNERBANKCODE,
				T5.PARTNERBANKNAME,
				T1.LINKEDTRANID,
				T5.ACTYPE PARTNERBANKACTYPE,
				T5.ACCOUNTNO PARTNERBANKAC,
				T6.BRANCHDESC PRINTINGLOCDESC,
				T1.REJECTREASON,
				T1.REALIZATIONDATE,
				T1.HOLDDISBURSEMENT,
				T1.LEI
				FROM FINADVANCEPAYMENTS_TEMP T1
				LEFT JOIN BANKBRANCHES T3 ON T1.BANKBRANCHID = T3.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL T31 ON T31.BANKCODE = T3.BANKCODE
				LEFT JOIN BMTBANKDETAIL T4 ON T1.BANKCODE = T4.BANKCODE
				LEFT JOIN PARTNERBANKS T5 ON T5.PARTNERBANKID = T1.PARTNERBANKID
				LEFT JOIN BANKBRANCHES T6 ON T6.BRANCHCODE = T1.PRINTINGLOC AND T6.BANKCODE = T1.BANKCODE
				UNION ALL
				SELECT T1.FINREFERENCE,
				T1.PAYMENTID,
				T1.PAYMENTSEQ,
				T1.PAYMENTDETAIL,
				T1.AMTTOBERELEASED,
				T1.LIABILITYHOLDNAME,
				T1.TRANSACTIONREF,
				T1.BENEFICIARYNAME,
				T1.BENEFICIARYACCNO,
				T1.REENTERBENEFICIARYACCNO,
				T1.DESCRIPTION,
				T1.PAYMENTTYPE,
				T1.LLREFERENCENO,
				T1.LLDATE,
				T1.CUSTCONTRIBUTION,
				T1.SELLERCONTRIBUTION,
				T1.REMARKS,
				T1.DISBDATE,
				T1.DISBSEQ,
				T1.VERSION,
				T1.LASTMNTBY,
				T1.LASTMNTON,
				T1.RECORDSTATUS,
				T1.ROLECODE,
				T1.NEXTROLECODE,
				T1.TASKID,
				T1.NEXTTASKID,
				T1.RECORDTYPE,
				T1.WORKFLOWID,
				T1.BANKCODE,
				T1.PAYABLELOC,
				T1.PRINTINGLOC,
				T1.VALUEDATE,
				T1.BANKBRANCHID,
				T1.PHONECOUNTRYCODE,
				T1.PHONEAREACODE,
				T1.PHONENUMBER,
				T1.CLEARINGDATE,
				T1.STATUS,
				T1.ACTIVE,
				T1.INPUTDATE,
				T1.DISBCCY,
				T1.POISSUED,
				T3.BANKCODE BRANCHBANKCODE,
				T31.BANKNAME BRANCHBANKNAME,
				T3.BRANCHCODE,
				T3.BRANCHDESC,
				T3.IFSC,
				T3.CITY,
				T4.BANKNAME,
				T1.PARTNERBANKID,
				T5.PARTNERBANKCODE,
				T5.PARTNERBANKNAME,
				T1.LINKEDTRANID,
				T5.ACTYPE PARTNERBANKACTYPE,
				T5.ACCOUNTNO PARTNERBANKAC,
				T6.BRANCHDESC PRINTINGLOCDESC,
				T1.REJECTREASON,
				T1.REALIZATIONDATE,
				T1.HOLDDISBURSEMENT,
				T1.LEI
				FROM FINADVANCEPAYMENTS T1
				LEFT JOIN BANKBRANCHES T3 ON T1.BANKBRANCHID = T3.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL T31 ON T31.BANKCODE = T3.BANKCODE
				LEFT JOIN BMTBANKDETAIL T4 ON T1.BANKCODE = T4.BANKCODE
				LEFT JOIN PARTNERBANKS T5 ON T5.PARTNERBANKID = T1.PARTNERBANKID
				LEFT JOIN BANKBRANCHES T6 ON T6.BRANCHCODE = T1.PRINTINGLOC AND T6.BANKCODE = T1.BANKCODE
				WHERE NOT (EXISTS ( SELECT 1
				FROM FINADVANCEPAYMENTS_TEMP
				WHERE FINADVANCEPAYMENTS_TEMP.FINREFERENCE = T1.FINREFERENCE AND FINADVANCEPAYMENTS_TEMP.PAYMENTSEQ = T1.PAYMENTSEQ))
			]]>	
		</createView>
	</changeSet>
	
	<changeSet id="ST#38.6_post" author="saisandeep.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finadvancepayments_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#38.7_pre" author="saisandeep.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finadvancepayments_aview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id = "ST#38.7" author="saisandeep.b">
		<createView viewName="FINADVANCEPAYMENTS_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINREFERENCE,
				T1.PAYMENTID,
				T1.PAYMENTSEQ,
				T1.PAYMENTDETAIL,
				T1.AMTTOBERELEASED,
				T1.LIABILITYHOLDNAME,
				T1.TRANSACTIONREF,
				T1.BENEFICIARYNAME,
				T1.BENEFICIARYACCNO,
				T1.REENTERBENEFICIARYACCNO,
				T1.DESCRIPTION,
				T1.PAYMENTTYPE,
				T1.LLREFERENCENO,
				T1.LLDATE,
				T1.CUSTCONTRIBUTION,
				T1.SELLERCONTRIBUTION,
				T1.REMARKS,
				T1.DISBDATE,
				T1.DISBSEQ,
				T1.VERSION,
				T1.LASTMNTBY,
				T1.LASTMNTON,
				T1.RECORDSTATUS,
				T1.ROLECODE,
				T1.NEXTROLECODE,
				T1.TASKID,
				T1.NEXTTASKID,
				T1.RECORDTYPE,
				T1.WORKFLOWID,
				T1.BANKCODE,
				T1.PAYABLELOC,
				T1.PRINTINGLOC,
				T1.VALUEDATE,
				T1.BANKBRANCHID,
				T1.PHONECOUNTRYCODE,
				T1.PHONEAREACODE,
				T1.PHONENUMBER,
				T1.CLEARINGDATE,
				T1.STATUS,
				T1.ACTIVE,
				T1.INPUTDATE,
				T1.DISBCCY,
				T1.POISSUED,
				T3.BANKCODE BRANCHBANKCODE,
				T31.BANKNAME BRANCHBANKNAME,
				T3.BRANCHCODE,
				T3.BRANCHDESC,
				T3.IFSC,
				T3.CITY,
				T4.BANKNAME,
				T1.PARTNERBANKID,
				T5.PARTNERBANKCODE,
				T5.PARTNERBANKNAME,
				T1.LINKEDTRANID,
				T5.ACTYPE PARTNERBANKACTYPE,
				T5.ACCOUNTNO PARTNERBANKAC,
				T6.BRANCHDESC PRINTINGLOCDESC,
				T1.REJECTREASON,
				T1.REALIZATIONDATE,
				T1.HOLDDISBURSEMENT,
				T1.LEI
				FROM FINADVANCEPAYMENTS T1
				LEFT JOIN BANKBRANCHES T3 ON T1.BANKBRANCHID = T3.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL T31 ON T31.BANKCODE = T3.BANKCODE
				LEFT JOIN BMTBANKDETAIL T4 ON T1.BANKCODE = T4.BANKCODE
				LEFT JOIN PARTNERBANKS T5 ON T5.PARTNERBANKID = T1.PARTNERBANKID
				LEFT JOIN BANKBRANCHES T6 ON T6.BRANCHCODE = T1.PRINTINGLOC AND T6.BANKCODE = T1.BANKCODE
			]]>	
		</createView>
	</changeSet>
	
	<changeSet id="ST#38.7_post" author="saisandeep.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finadvancepayments_aview');
			]]>
		</sql>
	</changeSet>
	
		<changeSet id="ST#38.8_pre" author="saisandeep.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finadvancepayments_tview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id = "ST#38.8" author="saisandeep.b">
		<createView viewName="FINADVANCEPAYMENTS_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINREFERENCE,
				T1.PAYMENTID,
				T1.PAYMENTSEQ,
				T1.PAYMENTDETAIL,
				T1.AMTTOBERELEASED,
				T1.LIABILITYHOLDNAME,
				T1.TRANSACTIONREF,
				T1.BENEFICIARYNAME,
				T1.BENEFICIARYACCNO,
				T1.REENTERBENEFICIARYACCNO,
				T1.DESCRIPTION,
				T1.PAYMENTTYPE,
				T1.LLREFERENCENO,
				T1.LLDATE,
				T1.CUSTCONTRIBUTION,
				T1.SELLERCONTRIBUTION,
				T1.REMARKS,
				T1.DISBDATE,
				T1.DISBSEQ,
				T1.VERSION,
				T1.LASTMNTBY,
				T1.LASTMNTON,
				T1.RECORDSTATUS,
				T1.ROLECODE,
				T1.NEXTROLECODE,
				T1.TASKID,
				T1.NEXTTASKID,
				T1.RECORDTYPE,
				T1.WORKFLOWID,
				T1.BANKCODE,
				T1.PAYABLELOC,
				T1.PRINTINGLOC,
				T1.VALUEDATE,
				T1.BANKBRANCHID,
				T1.PHONECOUNTRYCODE,
				T1.PHONEAREACODE,
				T1.PHONENUMBER,
				T1.CLEARINGDATE,
				T1.STATUS,
				T1.ACTIVE,
				T1.INPUTDATE,
				T1.DISBCCY,
				T1.POISSUED,
				T3.BANKCODE BRANCHBANKCODE,
				T31.BANKNAME BRANCHBANKNAME,
				T3.BRANCHCODE,
				T3.BRANCHDESC,
				T3.IFSC,
				T3.CITY,
				T4.BANKNAME,
				T1.PARTNERBANKID,
				T5.PARTNERBANKCODE,
				T5.PARTNERBANKNAME,
				T1.LINKEDTRANID,
				T5.ACTYPE PARTNERBANKACTYPE,
				T5.ACCOUNTNO PARTNERBANKAC,
				T6.BRANCHDESC PRINTINGLOCDESC,
				T1.REJECTREASON,
				T1.REALIZATIONDATE,
				T1.HOLDDISBURSEMENT,
				T1.LEI
				FROM FINADVANCEPAYMENTS_TEMP T1
				LEFT JOIN BANKBRANCHES T3 ON T1.BANKBRANCHID = T3.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL T31 ON T31.BANKCODE = T3.BANKCODE
				LEFT JOIN BMTBANKDETAIL T4 ON T1.BANKCODE = T4.BANKCODE
				LEFT JOIN PARTNERBANKS T5 ON T5.PARTNERBANKID = T1.PARTNERBANKID
				LEFT JOIN BANKBRANCHES T6 ON T6.BRANCHCODE = T1.PRINTINGLOC AND T6.BANKCODE = T1.BANKCODE
			]]>	
		</createView>
	</changeSet>
	
	<changeSet id="ST#38.8_post" author="saisandeep.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finadvancepayments_tview');
			]]>
		</sql>
	</changeSet>
	
		<changeSet id="ST#38.9_pre" author="saisandeep.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finadvancepayments_adview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id = "ST#38.9" author="saisandeep.b">
		<createView viewName="FINADVANCEPAYMENTS_ADVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT	T1.PAYMENTID,
				T1.FINREFERENCE, 
				T1. PAYMENTSEQ, 
				T1.DISBSEQ, 
				T1.PAYMENTDETAIL, 
				T1.AMTTOBERELEASED, 
				T1.LIABILITYHOLDNAME, 
				T1.BENEFICIARYNAME, 
				T1.BENEFICIARYACCNO,
				T1.DESCRIPTION, 
				T1.PAYMENTTYPE, 
				T1.BANKCODE, 
				T1.LLREFERENCENO, 
				T1.LLDATE, 
				T1.CUSTCONTRIBUTION,
				T1.SELLERCONTRIBUTION, 
				T1.REMARKS, 
				T1.PAYABLELOC,
				T1.PRINTINGLOC,
				T1.VALUEDATE,
				T1.BANKBRANCHID, 
				T1.PHONECOUNTRYCODE,
				T1.PHONEAREACODE, 
				T1.PHONENUMBER, 
				T1.CLEARINGDATE,
				T1.STATUS, 
				T1.ACTIVE, 
				T1.INPUTDATE,
				T1.DISBCCY, 
				T1.POISSUED, 
				T1.PARTNERBANKID, 
				T1.LINKEDTRANID, 
				T1.TRANSACTIONREF,
				T1.VERSION, 
				T1.LASTMNTBY,
				T1.LASTMNTON, 
				T1.RECORDSTATUS, 
				T1.ROLECODE, 
				T1.NEXTROLECODE,
				T1.TASKID,
				T1.NEXTTASKID, 
				T1.RECORDTYPE,
				T1.WORKFLOWID,
				T3.FINTYPE,
				T4.BANKCODE BRANCHBANKCODE, 
				T4.BRANCHCODE, 
				T4.BRANCHDESC, 
				T4.IFSC, 
				T4.CITY, 
				T4.MICR,
				T5.BANKNAME BRANCHBANKNAME,
				T6.BANKNAME, 
				T7.PARTNERBANKCODE, 
				T7.PARTNERBANKNAME, 
				T7.ACTYPE PARTNERBANKACTYPE,
				T7.ACCOUNTNO PARTNERBANKAC,
				T7.FILENAME,
				T7.ALWFILEDOWNLOAD,
				T1.HOLDDISBURSEMENT,
				T1.LEI
				FROM FINADVANCEPAYMENTS T1
				INNER JOIN FINANCEMAIN T3 ON T3.FINREFERENCE = T1.FINREFERENCE
				LEFT OUTER JOIN	BANKBRANCHES T4 ON T1.BANKBRANCHID = T4.BANKBRANCHID
				LEFT OUTER JOIN	BMTBANKDETAIL T5 ON T5.BANKCODE = T4.BANKCODE 
				LEFT OUTER JOIN	BMTBANKDETAIL T6  ON T1.BANKCODE = T6.BANKCODE
				LEFT OUTER JOIN	PARTNERBANKS T7 ON T7.PARTNERBANKID = T1.PARTNERBANKID

			]]>	
		</createView>
	</changeSet>
	
	<changeSet id="ST#38.9_post" author="saisandeep.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finadvancepayments_adview');
			]]>
		</sql>
	</changeSet>
	
		<changeSet id="ST#38.10_pre" author="saisandeep.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finadvancepayments_custaview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id = "ST#38.10" author="saisandeep.b">
		<createView viewName="FINADVANCEPAYMENTS_CUSTAVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT  T1.FINREFERENCE,
				T1.PAYMENTID, 
				T1.PAYMENTSEQ, 
				T1.BENEFICIARYNAME,
				T1.BENEFICIARYACCNO,
				T1.PAYMENTTYPE,
				T1.LLDATE, 
				T1.DISBSEQ,
				T1.BANKBRANCHID,
				T1.STATUS,
				T1.DISBCCY,
				T1.POISSUED,
				T3.BANKCODE BRANCHBANKCODE,
				T31.BANKNAME BRANCHBANKNAME,
				T3.BRANCHCODE,
				T3.BRANCHDESC,
				T3.IFSC,
				T3.CITY,
				T3.MICR,
				T1.PARTNERBANKID,
				T5.PARTNERBANKCODE,
				T5.PARTNERBANKNAME,
				T1.LINKEDTRANID ,
				T5.ACTYPE PARTNERBANKACTYPE, 
				T5.ACCOUNTNO PARTNERBANKAC,
				T6.CUSTID,
				T1.HOLDDISBURSEMENT,
				T1.LEI
				FROM FINADVANCEPAYMENTS T1 
				LEFT OUTER JOIN BANKBRANCHES T3 ON T1.BANKBRANCHID = T3.BANKBRANCHID  
				LEFT OUTER JOIN BMTBANKDETAIL T31 ON T31.BANKCODE=T3.BANKCODE 
				LEFT OUTER JOIN	BMTBANKDETAIL T4  ON T1.BANKCODE=T4.BANKCODE
				LEFT OUTER JOIN PARTNERBANKS T5 ON T5.PARTNERBANKID=T1.PARTNERBANKID
				LEFT JOIN FINANCEMAIN T6 ON T1.FINREFERENCE = T6.FINREFERENCE
			]]>	
		</createView>
	</changeSet>
	
	<changeSet id="ST#38.10_post" author="saisandeep.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finadvancepayments_custaview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#38.11_pre" author="saisandeep.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'paymentinstructions_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id = "ST#38.11" author="saisandeep.b">
		<createView viewName="PAYMENTINSTRUCTIONS_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.PAYMENTINSTRUCTIONID,
					T1.PAYMENTID,
					T1.PAYMENTTYPE,
					T1.PAYMENTAMOUNT,
					T1.REMARKS,
					T1.PARTNERBANKID,
					T1.ISSUINGBANK,
					T1.FAVOURNAME,
					T1.FAVOURNUMBER,
					T1.PAYABLELOC,
					T1.PRINTINGLOC,
					T1.VALUEDATE,
					T1.POSTDATE,
					T1.BANKBRANCHID,
					T1.ACCTHOLDERNAME,
					T1.ACCOUNTNO,
					T1.PHONECOUNTRYCODE,
					T1.PHONENUMBER,
					T1.CLEARINGDATE,
					T1.ACTIVE,
					T1.PAYMENTCCY,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.STATUS,
					T1.TRANSACTIONREF,
					T5.PARTNERBANKCODE,
					T5.PARTNERBANKNAME,
					T3.BANKCODE BRANCHBANKCODE,
					T3.BRANCHCODE BANKBRANCHCODE,
					T3.IFSC BANKBRANCHIFSC,
					T3.CITY,
					T4.BANKNAME ISSUINGBANKNAME,
					T6.PCCITYNAME,
					T3.BRANCHDESC,
					T2.BANKNAME,
					T5.ACCOUNTNO PARTNERBANKAC,
					T5.ACTYPE PARTNERBANKACTYPE,
					T1.REJECTREASON,
					T1.LEI
				FROM PAYMENTINSTRUCTIONS_TEMP T1
				LEFT JOIN BANKBRANCHES T3 ON T1.BANKBRANCHID = T3.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL T2 ON T2.BANKCODE = T3.BANKCODE
				LEFT JOIN BMTBANKDETAIL T4 ON T1.ISSUINGBANK = T4.BANKCODE
				LEFT JOIN PARTNERBANKS T5 ON T5.PARTNERBANKID = T1.PARTNERBANKID
				LEFT JOIN RMTPROVINCEVSCITY T6 ON T6.PCCITY = T3.CITY
				UNION ALL
				SELECT T1.PAYMENTINSTRUCTIONID,
					T1.PAYMENTID,
					T1.PAYMENTTYPE,
					T1.PAYMENTAMOUNT,
					T1.REMARKS,
					T1.PARTNERBANKID,
					T1.ISSUINGBANK,
					T1.FAVOURNAME,
					T1.FAVOURNUMBER,
					T1.PAYABLELOC,
					T1.PRINTINGLOC,
					T1.VALUEDATE,
					T1.POSTDATE,
					T1.BANKBRANCHID,
					T1.ACCTHOLDERNAME,
					T1.ACCOUNTNO,
					T1.PHONECOUNTRYCODE,
					T1.PHONENUMBER,
					T1.CLEARINGDATE,
					T1.ACTIVE,
					T1.PAYMENTCCY,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.STATUS,
					T1.TRANSACTIONREF,
					T5.PARTNERBANKCODE,
					T5.PARTNERBANKNAME,
					T3.BANKCODE BRANCHBANKCODE,
					T3.BRANCHCODE BANKBRANCHCODE,
					T3.IFSC BANKBRANCHIFSC,
					T3.CITY,
					T4.BANKNAME ISSUINGBANKNAME,
					T6.PCCITYNAME,
					T3.BRANCHDESC,
					T2.BANKNAME,
					T5.ACCOUNTNO PARTNERBANKAC,
					T5.ACTYPE PARTNERBANKACTYPE,
					T1.REJECTREASON,
					T1.LEI
				FROM PAYMENTINSTRUCTIONS T1
				LEFT JOIN BANKBRANCHES T3 ON T1.BANKBRANCHID = T3.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL T2 ON T2.BANKCODE = T3.BANKCODE
				LEFT JOIN BMTBANKDETAIL T4 ON T1.ISSUINGBANK = T4.BANKCODE
				LEFT JOIN PARTNERBANKS T5 ON T5.PARTNERBANKID = T1.PARTNERBANKID
				LEFT JOIN RMTPROVINCEVSCITY T6 ON T6.PCCITY = T3.CITY
				WHERE NOT (EXISTS ( SELECT 1 FROM PAYMENTINSTRUCTIONS_TEMP
				WHERE PAYMENTINSTRUCTIONS_TEMP.PAYMENTINSTRUCTIONID = T1.PAYMENTINSTRUCTIONID))
			]]>	
		</createView>
	</changeSet>
	
	<changeSet id="ST#38.11_post" author="saisandeep.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'paymentinstructions_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#38.12_pre" author="saisandeep.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'paymentinstructions_aview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id = "ST#38.12" author="saisandeep.b">
		<createView viewName="PAYMENTINSTRUCTIONS_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.PAYMENTINSTRUCTIONID,
					T1.PAYMENTID,
					T1.PAYMENTTYPE,
					T1.PAYMENTAMOUNT,
					T1.REMARKS,
					T1.PARTNERBANKID,
					T1.ISSUINGBANK,
					T1.FAVOURNAME,
					T1.FAVOURNUMBER,
					T1.PAYABLELOC,
					T1.PRINTINGLOC,
					T1.VALUEDATE,
					T1.POSTDATE,
					T1.BANKBRANCHID,
					T1.ACCTHOLDERNAME,
					T1.ACCOUNTNO,
					T1.PHONECOUNTRYCODE,
					T1.PHONENUMBER,
					T1.CLEARINGDATE,
					T1.ACTIVE,
					T1.PAYMENTCCY,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.STATUS,
					T1.TRANSACTIONREF,
					T5.PARTNERBANKCODE,
					T5.PARTNERBANKNAME,
					T3.BANKCODE BRANCHBANKCODE,
					T3.BRANCHCODE BANKBRANCHCODE,
					T3.IFSC BANKBRANCHIFSC,
					T3.CITY,
					T4.BANKNAME ISSUINGBANKNAME,
					T6.PCCITYNAME,
					T3.BRANCHDESC,
					T2.BANKNAME,
					T5.ACCOUNTNO PARTNERBANKAC,
					T5.ACTYPE PARTNERBANKACTYPE,
					T1.REJECTREASON,
					T1.LEI
				FROM PAYMENTINSTRUCTIONS T1
				LEFT JOIN BANKBRANCHES T3 ON T1.BANKBRANCHID = T3.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL T2 ON T2.BANKCODE = T3.BANKCODE
				LEFT JOIN BMTBANKDETAIL T4 ON T1.ISSUINGBANK = T4.BANKCODE
				LEFT JOIN PARTNERBANKS T5 ON T5.PARTNERBANKID = T1.PARTNERBANKID
				LEFT JOIN RMTPROVINCEVSCITY T6 ON T6.PCCITY = T3.CITY
			]]>	
		</createView>
	</changeSet>
	
	<changeSet id="ST#38.12_post" author="saisandeep.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'paymentinstructions_aview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#38.13" author="saisandeep.b">
		<sql>
			<![CDATA[
				Delete From SecGroupRights Where Rightid = (Select Rightid From SecRights Where RightName = 'PaymentInstructionDialog_leiNumber');
				Delete From SecRights Where RightName = 'PaymentInstructionDialog_leiNumber';
				
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'PaymentInstructionDialog_leiNumber', 'PaymentInstructionDialog', 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO	SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE =	'PAYMENTINSTRUCTIONS_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE	RIGHTNAME = 'PaymentInstructionDialog_leiNumber'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#38.14" author="saisandeep.b">
		<sql>
			<![CDATA[
				Delete From SecGroupRights Where Rightid = (Select Rightid From SecRights Where RightName = 'FinAdvancePaymentsDialog_leiNumber');
				Delete From SecRights Where RightName = 'FinAdvancePaymentsDialog_leiNumber';
				
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'FinAdvancePaymentsDialog_leiNumber', 'FinAdvancePaymentsDialog', 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO	SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE =	'BFSD_ORIGINATION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE	RIGHTNAME = 'FinAdvancePaymentsDialog_leiNumber'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO	SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE =	'CL_ORIGINATION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE	RIGHTNAME = 'FinAdvancePaymentsDialog_leiNumber'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO	SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE =	'FIN_ADDDISB_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE	RIGHTNAME = 'FinAdvancePaymentsDialog_leiNumber'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO	SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE =	'FinAdvancePayments_Maker') ,(SELECT RIGHTID FROM SECRIGHTS WHERE	RIGHTNAME = 'FinAdvancePaymentsDialog_leiNumber'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
			
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#38.15" author="saisandeep.b">
		<addColumn tableName="DISBURSEMENT_REQUESTS">
			<column name="LEI" type="varchar(100)"/>
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#38.16_pre" author="saisandeep.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'disbursement_requests_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id = "ST#38.16" author="saisandeep.b">
		<createView viewName="DISBURSEMENT_REQUESTS_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT ID ,
				    BATCH_ID,
					DISBURSEMENT_ID ,
					CUSTCIF, 
					FINREFERENCE,
					DISBURSEMENT_AMOUNT, 
					DISBURSEMENT_TYPE, 
					DISBURSEMENT_DATE, 
					DRAWEE_LOCATION , 
					PRINT_LOCATION, 
					CUSTOMER_NAME, 
					CUSTOMER_MOBILE , 
					CUSTOMER_EMAIL, 
					CUSTOMER_STATE, 
					CUSTOMER_CITY, 
					CUSTOMER_ADDRESS1, 
					CUSTOMER_ADDRESS2, 
					CUSTOMER_ADDRESS3, 
					CUSTOMER_ADDRESS4, 
					CUSTOMER_ADDRESS5, 
					BENFICIARY_BANK, 
					BENFICIARY_BRANCH, 
					BENFICIARY_BRANCH_STATE, 
					BENFICIARY_BRANCH_CITY, 
					MICR_CODE, 
					IFSC_CODE, 
					BENFICIARY_ACCOUNT, 
					BENFICIARY_NAME, 
					BENFICIARY_MOBILE, 
					BENFICIRY_EMAIL, 
					BENFICIRY_STATE, 
					BENFICIRY_CITY, 
					BENFICIARY_ADDRESS1, 
					BENFICIARY_ADDRESS2, 
					BENFICIARY_ADDRESS3, 
					BENFICIARY_ADDRESS4, 
					BENFICIARY_ADDRESS5, 
					PAYMENT_DETAIL1, 
					PAYMENT_DETAIL2, 
					PAYMENT_DETAIL3, 
					PAYMENT_DETAIL4, 
					PAYMENT_DETAIL5, 
					PAYMENT_DETAIL6, 
					PAYMENT_DETAIL7, 
					RESP_BATCH_ID, 
					TRANSACTIONREF, 
					CHEQUE_NUMBER, 
					DD_CHEQUE_CHARGE, 
					PAYMENT_DATE, 
					STATUS, 
					REMARKS, 
					REJECT_REASON, 
					CHANNEL, 
					PARTNERBANK_ID, 
					PARTNERBANK_CODE, 
					PARTNERBANK_ACCOUNT, 
					DOWNLOADED_ON, 
					HEADER_ID, 
					AUTO_DOWNLOAD, 
					REALIZATION_DATE, 
					TRANSACTION_TYPE_CODE,
					LEI BENE_LEI,
					FINREFERENCE ${call.concatenate}'_'${call.concatenate}ID UNIQUEREF,
					PBBRC.PCCITYNAME CHQPRINTCITY,
					PBBRS.CPPROVINCENAME CHQPRINTSTATE
				FROM DISBURSEMENT_REQUESTS DR
				LEFT JOIN BANKBRANCHES bbe on bbe.branchcode = DR.PRINT_LOCATION
				LEFT JOIN RMTPROVINCEVSCITY PBBRC ON PBBRC.PCCITY = bbe.CITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE PBBRS ON PBBRS.CPPROVINCE = PBBRC.PCPROVINCE
			]]>	
		</createView>
	</changeSet>
	
	<changeSet id="ST#20.100" author="Gopal.p">
        <preConditions onFail="MARK_RAN">
            	<tableExists tableName="PARTNERBANKS_DATA_ENGINE"/>
        </preConditions>
        <renameTable newTableName="PARTNERBANKS_DATA_ENGINE_BKP" oldTableName="PARTNERBANKS_DATA_ENGINE"/>
	</changeSet>
	
	<changeSet id="ST#20.100.1.3" author="Gopal.p">
        <sql>
           <![CDATA[
                ALTER TABLE PARTNERBANKS_DATA_ENGINE_BKP DROP CONSTRAINT pk_Partnerbanks_Data_Engine;
            ]]>
        </sql>
    </changeSet>
	
	<changeSet id="ST#20.100.1" author="Gopal.p">
		<createTable tableName="PARTNERBANKS_DATA_ENGINE">
			<column name="Id" type="bigint" autoIncrement="true" />
			<column name="Type" type="varchar(20)" />       <!-- Possible values Presentment/Disbursement/Mandate -->
			<column name="PartnerBankId" type="bigint" />
			<column name="PayMode" type="varchar(10)" />           <!-- Possible values NACH/DD/ECS/PDC -->
			<column name="RequestType" type="varchar(10)" />
			<column name="Config_Name" type="varchar(50)" />
			<column name="Version" type="int" />
			<column name="LastmntBy" type="bigint" />
			<column name="LastmntOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkflowId" type="bigint">
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>

	<changeSet id="ST#20.100.2" author="Gopal.p">
		<addPrimaryKey tableName="PARTNERBANKS_DATA_ENGINE" columnNames="Id"
			constraintName="pk_Partnerbanks_Data_Engine" />
	</changeSet>

	<changeSet id="ST#20.100.3" author="Gopal.p" dbms="postgresql, oracle">
		<addDefaultValue columnName="workflowid" tableName="PARTNERBANKS_DATA_ENGINE" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#20.100.4" author="Gopal.p" dbms="mssql">
		<sql>
           <![CDATA[
               ALTER TABLE PARTNERBANKS_DATA_ENGINE ADD CONSTRAINT DF_PARTBDE_workflowid DEFAULT 0 FOR WORKFLOWID;
             ]]>
		</sql>
	</changeSet>

	<changeSet id="ST#20.13.1" author="saisandeep.b">
		<addColumn tableName="MANDATE_RESPONSE">
			<column name="initiate_Dbusiness_Date" type="datetime" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#20.13.2" author="saisandeep.b">
		<addColumn tableName="MANDATE_RESPONSE">
			<column name="sponsor_Checker_Approvaldate" type="datetime" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#20.13.3" author="saisandeep.b">
		<addColumn tableName="MANDATE_RESPONSE">
			<column name="creation_Date" type="datetime" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#20.13.4" author="saisandeep.b">
		<addColumn tableName="MANDATE_RESPONSE">
			<column name="acceptance_Date" type="datetime" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#20.13.5" author="saisandeep.b">
		<addColumn tableName="MANDATE_RESPONSE">
			<column name="inward_Date" type="datetime" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#20.13.6" author="saisandeep.b">
		<addColumn tableName="MANDATE_RESPONSE">
			<column name="lot" type="varchar(50)" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#34.10" author="saisandeep.b">
		<addColumn tableName="DISBURSEMENT_REQUESTS">
			<column name="CITY_NAME" type="varchar(50)"/>
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#34.10.1" author="saisandeep.b">
		<addColumn tableName="DISBURSEMENT_REQUESTS">
			<column name="PROVINCE_NAME" type="varchar(50)"/>
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#34.11.1_pre" author="saisandeep.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'int_disbursement_request_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id = "ST#34.11.1" author="saisandeep.b">
		<createView viewName="INT_DISBURSEMENT_REQUEST_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FA.PAYMENTID,
					FA.FINREFERENCE,
					'D' CHANNEL,
					0 PROVIDERID,
					CASE WHEN FA.PAYMENTTYPE = 'NEFT' THEN 'N'
						WHEN FA.PAYMENTTYPE = 'RTGS' THEN 'R'
						WHEN FA.PAYMENTTYPE = 'DD' THEN 'D'
						WHEN FA.PAYMENTTYPE = 'CHEQUE' THEN 'C'
						WHEN FA.PAYMENTTYPE = 'IFT' THEN 'I'
						ELSE FA.PAYMENTTYPE END DISBURSEMENT_TYPE,
					FA.AMTTOBERELEASED,
					FA.DISBDATE,
					FA.LLDATE,
					FA.PAYABLELOC,
					FA.PRINTINGLOC,
					CU.CUSTCIF,
					CU.CUSTSHRTNAME,
					'' CUSTOMER_MOBILE,
					CE.CUSTEMAIL CUSTOMER_EMAIL,
					CS.CPPROVINCENAME CUSTOMER_STATE,
					CC.PCCITYNAME CUSTOMER_CITY,
					'' CUSTOMER_ADDRESS1,
					'' CUSTOMER_ADDRESS2,
					'' CUSTOMER_ADDRESS3,
					'' CUSTOMER_ADDRESS4,
					'' CUSTOMER_ADDRESS5,
					BD.BANKNAME,
					BB.BRANCHCODE,
					BB.BRANCHDESC,
					PBD.CPPROVINCENAME BENFICIARY_BRANCH_STATE,
					PBD.PCCITYNAME BENFICIARY_BRANCH_CITY,
					BB.MICR MICR_CODE,
					BB.IFSC IFSC_CODE,
					FA.BENEFICIARYACCNO,
					CASE WHEN FA.PAYMENTTYPE = 'CHEQUE' OR FA.PAYMENTTYPE = 'DD'
						THEN FA.LIABILITYHOLDNAME ELSE FA.BENEFICIARYNAME END BENEFICIARYNAME,
					(FA.PHONECOUNTRYCODE  ${call.concatenate} FA.PHONEAREACODE)  ${call.concatenate} FA.PHONENUMBER BENEFICIARY_MOBILE,
					BCE.CUSTEMAIL BENFICIRY_EMAIL,
					BRS.CPPROVINCENAME BENFICIARY_STATE,
					BRC.PCCITYNAME BENFICIARY_CITY,
					BRCA.CUSTADDRHNBR  ${call.concatenate}',' ${call.concatenate} BRCA.CUSTADDRSTREET  ${call.concatenate}',' ${call.concatenate} BRC.PCCITYNAME  ${call.concatenate}',' ${call.concatenate} BRS.CPPROVINCENAME  BENFICIARY_ADDRESS1,
					'' BENFICIARY_ADDRESS2,
					'' BENFICIARY_ADDRESS3,
					'' BENFICIARY_ADDRESS4,
					BRCA.CUSTADDRZIP BENFICIARY_ADDRESS5,
					'' PAYMENT_DETAIL1,
					'' PAYMENT_DETAIL2,
					'' PAYMENT_DETAIL3,
					'' PAYMENT_DETAIL4,
					'' PAYMENT_DETAIL5,
					FA.PAYMENTDETAIL PAYMENT_DETAIL6,
					'' PAYMENT_DETAIL7,
					FA.STATUS,
					FA.DESCRIPTION REMARKS,
					FA.PAYMENTTYPE,
					FM.FINTYPE,
					PB.PARTNERBANKID
					PARTNERBANK_ID,
					PB.PARTNERBANKCODE PARTNERBANK_CODE,
					FA.INPUTDATE,
					PB.ALWFILEDOWNLOAD,
					PB.DOWNLOADTYPE,
					PB.FILENAME,
					FM.FINISACTIVE,
					FM.FINAMOUNT,
					SMD.ENTITYCODE,
					FA.HOLDDISBURSEMENT HOLDDISBURSEMENT,
					PB.ACCOUNTNO PARTNERBANK_ACCOUNT,
					CASE WHEN FA.PAYMENTTYPE = 'NEFT' OR FA.PAYMENTTYPE   = 'RTGS' THEN 'LBT'
						WHEN FA.PAYMENTTYPE = 'IMPS' THEN 'BT' ELSE '' END TRANSACTION_TYPE_CODE,
					FA.LEI,
					PBBRC.PCCITYNAME CITY_NAME,
					PBBRS.CPPROVINCENAME PROVINCE_NAME
				FROM FINADVANCEPAYMENTS FA
				JOIN (SELECT FINANCEMAIN_TEMP.CUSTID,
						FINANCEMAIN_TEMP.FINREFERENCE,
						FINANCEMAIN_TEMP.FINTYPE,
						FINANCEMAIN_TEMP.FINISACTIVE,
						FINANCEMAIN_TEMP.FINAMOUNT
					FROM FINANCEMAIN_TEMP
					UNION ALL
					SELECT T2.CUSTID,
						T2.FINREFERENCE,
						T2.FINTYPE,
						T2.FINISACTIVE,
						T2.FINAMOUNT
					FROM FINANCEMAIN T2
					WHERE NOT (EXISTS (SELECT 1 FROM FINANCEMAIN_TEMP T3 WHERE T3.FINREFERENCE = T2.FINREFERENCE))) FM
				ON FM.FINREFERENCE = FA.FINREFERENCE
				JOIN CUSTOMERS CU ON CU.CUSTID = FM.CUSTID	
				JOIN RMTCURRENCIES CCY ON CCY.CCYCODE	= FA.DISBCCY
				JOIN PARTNERBANKS PB ON PB.PARTNERBANKID = FA.PARTNERBANKID
				LEFT JOIN CUSTOMEREMAILS CE	ON CE.CUSTID = CU.CUSTID AND CE.CUSTEMAILPRIORITY = 5
				LEFT JOIN CUSTOMERADDRESSES CA ON CA.CUSTID = CE.CUSTID	AND CA.CUSTADDRPRIORITY = 5
				LEFT JOIN RMTPROVINCEVSCITY CC ON CC.PCCITY = CA.CUSTADDRCITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE CS ON CS.CPPROVINCE = CC.PCPROVINCE
				LEFT JOIN BANKBRANCHES BB ON BB.BANKBRANCHID = FA.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL BD ON BD.BANKCODE =	BB.BANKCODE
				LEFT JOIN (SELECT PB_1.PARTNERBANKID,	
						PBD_1.BANKNAME,
						PBB.BRANCHDESC,
						PBBRC.PCCITYNAME,
						PBBRS.CPPROVINCENAME FROM PARTNERBANKS PB_1
					JOIN BANKBRANCHES PBB ON PBB.BRANCHCODE = PB_1.BANKBRANCHCODE AND PBB.BANKCODE = PB_1.BANKCODE
					JOIN BMTBANKDETAIL PBD_1 ON PBD_1.BANKCODE = PBB.BANKCODE
					LEFT JOIN RMTPROVINCEVSCITY PBBRC ON PBBRC.PCCITY = PBB.CITY
					LEFT JOIN RMTCOUNTRYVSPROVINCE PBBRS ON PBBRS.CPPROVINCE = PBBRC.PCPROVINCE
					) PBD ON PBD.PARTNERBANKID = PB.PARTNERBANKID
				LEFT JOIN BENEFICIARY BR ON BR.BANKBRANCHID = FA.BANKBRANCHID AND BR.ACCNUMBER = FA.BENEFICIARYACCNO AND BR.CUSTID = FM.CUSTID
				LEFT JOIN CUSTOMERS BC ON BC.CUSTID = BR.CUSTID
				LEFT JOIN CUSTOMEREMAILS BCE ON BCE.CUSTID = CU.CUSTID AND BCE.CUSTEMAILPRIORITY = 5
				LEFT JOIN CUSTOMERADDRESSES	BRCA ON	BRCA.CUSTID = BR.CUSTID AND BRCA.CUSTADDRPRIORITY = 5
				LEFT JOIN RMTPROVINCEVSCITY BRC	ON BRC.PCCITY =	BRCA.CUSTADDRCITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE BRS ON BRS.CPPROVINCE = BRC.PCPROVINCE
				LEFT JOIN RMTFINANCETYPES RFT ON FM.FINTYPE = RFT.FINTYPE
				LEFT JOIN SMTDIVISIONDETAIL SMD	ON RFT.FINDIVISION = SMD.DIVISIONCODE 
				LEFT JOIN BANKBRANCHES bbe on bbe.BANKBRANCHID = FA.BANKBRANCHID and bbe.branchcode = FA.PRINTINGLOC
				LEFT JOIN RMTPROVINCEVSCITY PBBRC ON PBBRC.PCCITY = bbe.CITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE PBBRS ON PBBRS.CPPROVINCE = PBBRC.PCPROVINCE
					WHERE FA.STATUS = 'APPROVED' AND NOT (FA.PAYMENTID IN ( 
						SELECT DISBURSEMENT_REQUESTS.DISBURSEMENT_ID FROM DISBURSEMENT_REQUESTS))
						AND NOT	(FA.PAYMENTID IN ( SELECT FINADVANCEPAYMENTS_TEMP.PAYMENTID FROM FINADVANCEPAYMENTS_TEMP))
				UNION ALL
				SELECT
					PI.PAYMENTINSTRUCTIONID PAYMENTID,
					PH.FINREFERENCE,
					PH.PAYMENTTYPE CHANNEL,
					0 PROVIDERID,
					CASE
					WHEN PI.PAYMENTTYPE =
					'NEFT'
					THEN 'N'
					WHEN PI.PAYMENTTYPE = 'RTGS'
					THEN 'R'
					WHEN PI.PAYMENTTYPE = 'DD'
					THEN 'D'
					WHEN PI.PAYMENTTYPE = 'CHEQUE'
					THEN 'C'
					WHEN PI.PAYMENTTYPE = 'IFT'
					THEN 'I'
					ELSE PI.PAYMENTTYPE
					END DISBURSEMENT_TYPE,
					PI.PAYMENTAMOUNT  AMTTOBERELEASED,
					PI.POSTDATE
					DISBDATE,
					PI.POSTDATE LLDATE,
					PI.PAYABLELOC,
					PI.PRINTINGLOC,
					CU.CUSTCIF,
					CU.CUSTSHRTNAME,
					'' CUSTOMER_MOBILE,
					CE.CUSTEMAIL
					CUSTOMER_EMAIL,
					CS.CPPROVINCENAME CUSTOMER_STATE,
					CC.PCCITYNAME CUSTOMER_CITY,
					'' CUSTOMER_ADDRESS1,
					'' CUSTOMER_ADDRESS2,
					'' CUSTOMER_ADDRESS3,
					'' CUSTOMER_ADDRESS4,
					'' CUSTOMER_ADDRESS5,
					BD.BANKNAME,
					BB.BRANCHCODE,
					BB.BRANCHDESC,
					BBRS.CPPROVINCENAME BENFICIARY_BRANCH_STATE,
					BBRC.PCCITYNAME BENFICIARY_BRANCH_CITY,
					BB.MICR MICR_CODE,
					BB.IFSC IFSC_CODE,
					PI.ACCOUNTNO BENEFICIARYACCNO,
					CASE
					WHEN PI.PAYMENTTYPE = 'CHEQUE'
					OR PI.PAYMENTTYPE = 'DD'
					THEN
					PI.FAVOURNAME
					ELSE PI.ACCTHOLDERNAME
					END BENEFICIARYNAME,
					PI.PHONECOUNTRYCODE  ${call.concatenate} PI.PHONENUMBER BENEFICIARY_MOBILE,
					BCE.CUSTEMAIL BENFICIRY_EMAIL,
					BRS.CPPROVINCENAME BENFICIARY_STATE,
					BRC.PCCITYNAME BENFICIARY_CITY,
					'' BENFICIARY_ADDRESS1,
					'' BENFICIARY_ADDRESS2,
					'' BENFICIARY_ADDRESS3,
					'' BENFICIARY_ADDRESS4,
					BRCA.CUSTADDRZIP BENFICIARY_ADDRESS5,
					'' PAYMENT_DETAIL1,
					'' PAYMENT_DETAIL2,
					'' PAYMENT_DETAIL3,
					'' PAYMENT_DETAIL4,
					'' PAYMENT_DETAIL5,
					'' PAYMENT_DETAIL6,
					'' PAYMENT_DETAIL7,
					PI.STATUS,
					PI.REMARKS,
					PI.PAYMENTTYPE,
					FM.FINTYPE,
					PB.PARTNERBANKID PARTNERBANK_ID,
					PB.PARTNERBANKCODE
					PARTNERBANK_CODE,
					PI.POSTDATE INPUTDATE,
					PB.ALWFILEDOWNLOAD,
					PB.DOWNLOADTYPE,
					PB.FILENAME,
					FM.FINISACTIVE,
					FM.FINAMOUNT,
					SMD.ENTITYCODE,
					0 HOLDDISBURSEMENT,
					PB.ACCOUNTNO PARTNERBANK_ACCOUNTNO,
					CASE WHEN PI.PAYMENTTYPE = 'NEFT' OR PI.PAYMENTTYPE   = 'RTGS' THEN 'LBT'
						WHEN PI.PAYMENTTYPE = 'IMPS' THEN 'BT' 
						ELSE '' END TRANSACTION_TYPE_CODE,
					PI.LEI,
					PBBRC.PCCITYNAME CITY_NAME,
					PBBRS.CPPROVINCENAME PROVINCE_NAME
				FROM PAYMENTINSTRUCTIONS PI
				JOIN PAYMENTHEADER PH ON PH.PAYMENTID = PI.PAYMENTID
				JOIN (SELECT
					FINANCEMAIN.CUSTID,
					FINANCEMAIN.FINREFERENCE,
					FINANCEMAIN.FINTYPE,
					FINANCEMAIN.FINISACTIVE,
					FINANCEMAIN.FINAMOUNT
					FROM FINANCEMAIN
					UNION ALL
					SELECT T2.CUSTID,
					T2.FINREFERENCE,
						T2.FINTYPE,
						T2.FINISACTIVE,
						T2.FINAMOUNT
					FROM FINANCEMAIN_TEMP T2
					WHERE NOT (EXISTS (SELECT 1 FROM FINANCEMAIN_TEMP T3 WHERE T3.FINREFERENCE = T2.FINREFERENCE))) FM ON FM.FINREFERENCE = PH.FINREFERENCE
				JOIN CUSTOMERS CU ON CU.CUSTID = FM.CUSTID
				JOIN RMTCURRENCIES CCY ON CCY.CCYCODE = PI.PAYMENTCCY
				JOIN PARTNERBANKS PB ON PB.PARTNERBANKID = PI.PARTNERBANKID
				LEFT JOIN CUSTOMEREMAILS CE ON CE.CUSTID = CU.CUSTID AND CE.CUSTEMAILPRIORITY = 5
				LEFT JOIN CUSTOMERADDRESSES CA ON CA.CUSTID = CE.CUSTID AND CA.CUSTADDRPRIORITY = 5
				LEFT JOIN RMTPROVINCEVSCITY CC ON CC.PCCITY = CA.CUSTADDRCITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE CS ON CS.CPPROVINCE = CC.PCPROVINCE
				LEFT JOIN CUSTOMERPHONENUMBERS CM ON CM.PHONECUSTID = CU.CUSTID AND CM.PHONETYPECODE = 'MOBILE1' AND CM.PHONETYPEPRIORITY = 5
				LEFT JOIN BANKBRANCHES BB ON BB.BANKBRANCHID = PI.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL BD ON BD.BANKCODE = BB.BANKCODE
				LEFT JOIN RMTPROVINCEVSCITY	BBRC ON BBRC.PCCITY = BB.CITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE BBRS	ON BBRS.CPPROVINCE = BBRC.PCPROVINCE
				LEFT JOIN BENEFICIARY BR ON BR.BANKBRANCHID = PI.BANKBRANCHID AND BR.ACCNUMBER = PI.ACCOUNTNO	AND BR.CUSTID = FM.CUSTID
				LEFT JOIN CUSTOMERS BC ON BC.CUSTID = BR.CUSTID
				LEFT JOIN CUSTOMEREMAILS BCE ON	BCE.CUSTID = CU.CUSTID AND BCE.CUSTEMAILPRIORITY = 5
				LEFT JOIN CUSTOMERADDRESSES BRCA ON BRCA.CUSTID = BR.CUSTID	AND	BRCA.CUSTADDRPRIORITY = 5
				LEFT JOIN RMTPROVINCEVSCITY BRC	ON BRC.PCCITY = BRCA.CUSTADDRCITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE BRS ON BRS.CPPROVINCE = BRC.PCPROVINCE
				LEFT JOIN RMTFINANCETYPES RFT ON FM.FINTYPE = RFT.FINTYPE
				LEFT JOIN SMTDIVISIONDETAIL SMD	ON RFT.FINDIVISION = SMD.DIVISIONCODE
				LEFT JOIN BANKBRANCHES bbe on bbe.BANKBRANCHID = PI.BANKBRANCHID and bbe.branchcode = PI.PRINTINGLOC
				LEFT JOIN RMTPROVINCEVSCITY PBBRC ON PBBRC.PCCITY = bbe.CITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE PBBRS ON PBBRS.CPPROVINCE = PBBRC.PCPROVINCE
				WHERE PI.STATUS = 'APPROVED' AND NOT (PI.PAYMENTINSTRUCTIONID IN
					(SELECT DISBURSEMENT_REQUESTS.DISBURSEMENT_ID FROM DISBURSEMENT_REQUESTS))
				UNION ALL
				SELECT PI.ID PAYMENTID,
					VR.PRIMARYLINKREF FINREFERENCE,
					'I' CHANNEL,
					PI.PROVIDERID,
					CASE WHEN PI.PAYMENTTYPE = 'NEFT' THEN 'N'
						WHEN PI.PAYMENTTYPE = 'RTGS' THEN 'R'
						WHEN PI.PAYMENTTYPE = 'DD' THEN 'D'
						WHEN PI.PAYMENTTYPE = 'CHEQUE' THEN 'C'
						WHEN PI.PAYMENTTYPE = 'IFT' THEN 'I'
						ELSE PI.PAYMENTTYPE END DISBURSEMENT_TYPE,
					PI.PAYMENTAMOUNT AMTTOBERELEASED,
					PI.PAYMENTDATE DISBDATE,
					PI.PAYMENTDATE LLDATE,
					'' PAYABLELOC,
					'' PRINTINGLOC,
					C.CUSTCIF,
					'' CUSTSHRTNAME,
					'' CUSTOMER_MOBILE,
					'' CUSTOMER_EMAIL,
					'' CUSTOMER_STATE,
					'' CUSTOMER_CITY,
					'' CUSTOMER_ADDRESS1,
					'' CUSTOMER_ADDRESS2,
					'' CUSTOMER_ADDRESS3,
					'' CUSTOMER_ADDRESS4,
					'' CUSTOMER_ADDRESS5,
					BD.BANKNAME,
					BB.BRANCHCODE,
					BB.BRANCHDESC,
					BBRS.CPPROVINCENAME BENFICIARY_BRANCH_STATE,
					BBRC.PCCITYNAME BENFICIARY_BRANCH_CITY,
					BB.MICR MICR_CODE,
					BB.IFSC IFSC_CODE,
					VPA.ACCOUNTNUMBER BENEFICIARYACCNO,
					AVD.DEALERNAME BENEFICIARYNAME,
					AVD.DEALERTELEPHONE
					BENEFICIARY_MOBILE,
					AVD.EMAIL BENFICIRY_EMAIL,
					BRS.CPPROVINCENAME BENFICIARY_STATE,
					BRC.PCCITYNAME BENFICIARY_CITY,
					AVD.DEALERADDRESS1 BENFICIARY_ADDRESS1,
					AVD.DEALERADDRESS2 BENFICIARY_ADDRESS2,
					AVD.DEALERADDRESS3 BENFICIARY_ADDRESS3,
					'' BENFICIARY_ADDRESS4,
					AVD.ZIPCODE BENFICIARY_ADDRESS5,
					'' PAYMENT_DETAIL1,
					'' PAYMENT_DETAIL2,
					'' PAYMENT_DETAIL3,
					'' PAYMENT_DETAIL4,
					'' PAYMENT_DETAIL5,
					'' PAYMENT_DETAIL6,
					'' PAYMENT_DETAIL7,
					PI.STATUS,
					PI.REMARKS,
					PI.PAYMENTTYPE,
					'' FINTYPE,
					PB.PARTNERBANKID PARTNERBANK_ID,
					PB.PARTNERBANKCODE PARTNERBANK_CODE,
					PI.PAYMENTDATE INPUTDATE,
					PB.ALWFILEDOWNLOAD,
					PB.DOWNLOADTYPE,
					PB.FILENAME,
					1 FINISACTIVE,
					0 FINAMOUNT,
					PI.ENTITYCODE,
					0 HOLDDISBURSEMENT,
					PB.ACCOUNTNO PARTNERBANK_ACCOUNT,
					CASE WHEN PI.PAYMENTTYPE = 'NEFT' OR PI.PAYMENTTYPE   = 'RTGS' THEN 'LBT'
						WHEN PI.PAYMENTTYPE = 'IMPS' THEN 'BT' 
						ELSE '' END TRANSACTION_TYPE_CODE,
					'' LEI,
					'' CITY_NAME,
					'' PROVINCE_NAME
				FROM INSURANCEPAYMENTINSTRUCTIONS PI
				JOIN RMTCURRENCIES CCY ON CCY.CCYCODE = PI.PAYMENTCCY
				JOIN PARTNERBANKS PB ON	PB.PARTNERBANKID = PI.PARTNERBANKID
				JOIN VASPROVIDERACCDETAIL VPA ON VPA.PROVIDERID = PI.PROVIDERID
				JOIN AMTVEHICLEDEALER AVD ON AVD.DEALERID = VPA.PROVIDERID
				JOIN VASRECORDING VR ON VR.PAYMENTINSID = PI.ID
				LEFT JOIN FINANCEMAIN FM ON FM.FINREFERENCE = VR.PRIMARYLINKREF
				LEFT JOIN CUSTOMERS C ON FM.CUSTID = C.CUSTID
				LEFT JOIN BANKBRANCHES BB ON BB.BANKBRANCHID = VPA.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL BD ON BD.BANKCODE = BB.BANKCODE
				LEFT JOIN RMTPROVINCEVSCITY BBRC ON BBRC.PCCITY	= BB.CITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE BBRS	ON BBRS.CPPROVINCE = BBRC.PCPROVINCE
				LEFT JOIN RMTPROVINCEVSCITY BRC	ON BRC.PCCITY =	AVD.DEALERCITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE BRS ON BRS.CPPROVINCE = BRC.PCPROVINCE
				WHERE PI.STATUS = 'APPROVED' AND PI.PAYMENTAMOUNT > 0 AND NOT (PI.ID IN 
					(SELECT DISBURSEMENT_REQUESTS.DISBURSEMENT_ID FROM DISBURSEMENT_REQUESTS))
			]]>	
		</createView>
	</changeSet>
	
	<changeSet id="ST#34.11.1_post" author="saisandeep.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'int_disbursement_request_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#13.30" author="saisandeep.b">
		<dropPrimaryKey  constraintName="PK_EXTED_FIELD_EXT_ID" tableName="EXTENDEDFIELDEXTENSION"  />
	</changeSet>
	
	<changeSet id="ST#13.31" author="saisandeep.b">
		<dropPrimaryKey constraintName="PK_EXTED_FIELD_EXTN_T_ID" tableName="EXTENDEDFIELDEXTENSION_TEMP" />
	</changeSet>
	
	<changeSet id="ST#13.32" author="saisandeep.b">
		<dropPrimaryKey constraintName="PK_EXT_FLD_MNT_ID" tableName="EXTENDEDFIELDMAINTENANCE" />
	</changeSet>

	<changeSet id="ST#13.33" author="saisandeep.b">
		<dropUniqueConstraint constraintName="UK_EXT_FLD_MNT_REF" tableName="EXTENDEDFIELDMAINTENANCE"/>
	</changeSet>
	
	<changeSet id="ST#13.34" author="saisandeep.b">
		<dropPrimaryKey constraintName="PK_EXT_FLD_MNT_T_ID" tableName="EXTENDEDFIELDMAINTENANCE_TEMP" />
	</changeSet>

	<changeSet id="ST#13.35" author="saisandeep.b">
		<dropUniqueConstraint constraintName="UK_EXT_FLD_MNT_T_REF" tableName="EXTENDEDFIELDMAINTENANCE_TEMP" />
	</changeSet>

	<changeSet id ="ST#13.36" author= "saisandeep.b">
		<renameTable newTableName="EXTENDED_FIELD_EXT" oldTableName = "EXTENDEDFIELDEXTENSION"/>
	</changeSet>
	
	<changeSet id ="ST#13.37" author= "saisandeep.b">
		<renameTable newTableName="EXTENDED_FIELD_EXT_TEMP" oldTableName="EXTENDEDFIELDEXTENSION_TEMP"/>
	</changeSet>

	<changeSet id ="ST#13.38" author="saisandeep.b">
		<renameTable newTableName ="EXTENDED_FIELD_MNT" oldTableName="EXTENDEDFIELDMAINTENANCE"/>
	</changeSet>

	<changeSet id="ST#13.39" author="saisandeep.b">
		<renameTable newTableName="EXTENDED_FIELD_MNT_TEMP" oldTableName="EXTENDEDFIELDMAINTENANCE_TEMP"/>
	</changeSet>
		
	<changeSet id="ST#13.40" author="saisandeep.b">
		<addPrimaryKey tableName="EXTENDED_FIELD_EXT"  constraintName="PK_EXTENDED_FIELD_EXT_ID" columnNames="Id" />
	</changeSet>
	
	<changeSet id="ST#13.41" author="saisandeep.b">
		<addPrimaryKey tableName="EXTENDED_FIELD_EXT_TEMP" constraintName="PK_EXTENDED_FIELD_EXT_T_ID" columnNames="Id" />
	</changeSet>
	
	<changeSet id="ST#13.42" author="saisandeep.b">
		<addPrimaryKey constraintName="PK_EXTENDED_FIELD_MNT_ID" tableName="EXTENDED_FIELD_MNT" columnNames="Id" />
	</changeSet>

	<changeSet id="ST#13.43" author="saisandeep.b">
		<addUniqueConstraint constraintName="UK_EXTENDED_FIELD_MNT_REF" tableName="EXTENDED_FIELD_MNT" columnNames="Reference" />
	</changeSet>
	
	<changeSet id="ST#13.44" author="saisandeep.b">
		<addPrimaryKey constraintName="PK_EXTENDED_FIELD_MNT_T_ID" tableName="EXTENDED_FIELD_MNT_TEMP" columnNames="Id" />
	</changeSet>

	<changeSet id="ST#13.45" author="saisandeep.b">
		<addUniqueConstraint constraintName="UK_EXTENDED_FIELD_MNT_T_REF" tableName="EXTENDED_FIELD_MNT_TEMP" columnNames="Reference" />
	</changeSet>

	<changeSet id="ST#13.46_pre" author="saisandeep.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'extended_field_ext_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#13.46" author="saisandeep.b">
		<createView replaceIfExists="true" viewName="EXTENDED_FIELD_EXT_VIEW">
			<![CDATA[
				SELECT T1.ID,
					T1.EXTENRNALREF,
					T1.PURPOSE,
					T1.MODESTATUS,
					T1.INSTRUCTIONUID,
					T1.SEQUENCE,
					T1.EVENT,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM EXTENDED_FIELD_EXT_TEMP T1
				UNION ALL
				SELECT T1.ID,
					T1.EXTENRNALREF,
					T1.PURPOSE,
					T1.MODESTATUS,
					T1.INSTRUCTIONUID,
					T1.SEQUENCE,
					T1.EVENT,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM EXTENDED_FIELD_EXT T1
				WHERE NOT (EXISTS (SELECT 1  FROM EXTENDED_FIELD_EXT_TEMP T2 WHERE T2.ID = T1.ID))
			]]>
        </createView>
	</changeSet>

	<changeSet id="ST#13.46_post" author="saisandeep.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'extended_field_ext_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#13.47_pre" author="saisandeep.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'extended_field_mnt_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#13.47" author="saisandeep.b">
		<createView replaceIfExists="true" viewName="EXTENDED_FIELD_MNT_VIEW">
			<![CDATA[
				SELECT T1.ID,
				    T2.FINREFERENCE,
				    T1.REFERENCE,
					T2.FINTYPE,
					T1.TYPE,
					T2.FINISACTIVE,
					T6.FINDIVISION LOVDESCFINDIVISION,
				    T2.FINCATEGORY LOVDESCPRODUCTCODENAME,
				    T2.FINBRANCH,
				    T2.GRACETERMS,
				    T2.CALTERMS,
				    T2.ADVTERMS,
				    T2.NEXTROLLOVERDATE,
				    T2.FINCURRASSETVALUE,
				    T2.FEECHARGEAMT,
				    T2.INSURANCEAMT,
				    T2.FINREPAYMENTAMOUNT,
				    T2.CLOSINGSTATUS,
				    COALESCE(T4.ROLEDESC,  ${add.schema}FN_GET_ROLEDESC(T1.NEXTROLECODE)) LOVDESCREQUESTSTAGE,
				    T2.FINSTARTDATE,
				    T2.NUMBEROFTERMS,
				    T2.MATURITYDATE,
				    T2.FINCCY,
				    T2.FINASSETVALUE,
				    T3.CUSTCIF LOVDESCCUSTCIF,
					T5.PRODUCTCATEGORY,
					T1.EVENT,  
					T1.VERSION, 	
					T1.LASTMNTBY,	
					T1.LASTMNTON,	
					T1.TASKID,
					T1.NEXTTASKID,	
					T1.RECORDSTATUS,	
					T1.RECORDTYPE,	
					T1.ROLECODE,	
					T1.NEXTROLECODE,	
					T1.WORKFLOWID,
		      		T2.SCHEDULEMETHOD,
		      		T2.PROFITDAYSBASIS	
				FROM EXTENDED_FIELD_MNT_TEMP T1
				JOIN FINANCEMAIN T2 ON T2.FINREFERENCE= T1.REFERENCE
				INNER JOIN CUSTOMERS T3 ON T3.CUSTID = T2.CUSTID
				LEFT JOIN SECROLES T4 ON T1.NEXTROLECODE = T4.ROLECD
				JOIN BMTPRODUCT T5 ON T2.FINCATEGORY = T5.PRODUCTCODE
				JOIN RMTFINANCETYPES T6 ON T6.FINTYPE = T2.FINTYPE
				UNION ALL
		    	SELECT T1.ID,
				    T2.FINREFERENCE,
				    T1.REFERENCE,
					T2.FINTYPE,
					T1.TYPE,
					T2.FINISACTIVE,
					T6.FINDIVISION LOVDESCFINDIVISION,
				    T2.FINCATEGORY LOVDESCPRODUCTCODENAME,
				    T2.FINBRANCH,
				    T2.GRACETERMS,
				    T2.CALTERMS,
				    T2.ADVTERMS,
				    T2.NEXTROLLOVERDATE,
				    T2.FINCURRASSETVALUE,
				    T2.FEECHARGEAMT,
				    T2.INSURANCEAMT,
				    T2.FINREPAYMENTAMOUNT,
				    T2.CLOSINGSTATUS,
				    COALESCE(T4.ROLEDESC,  ${add.schema}FN_GET_ROLEDESC(T1.NEXTROLECODE)) LOVDESCREQUESTSTAGE,
				    T2.FINSTARTDATE,
				    T2.NUMBEROFTERMS,
				    T2.MATURITYDATE,
				    T2.FINCCY,
				    T2.FINASSETVALUE,
				    T3.CUSTCIF LOVDESCCUSTCIF,
					T5.PRODUCTCATEGORY,
					T1.EVENT,  
					T1.VERSION, 	
					T1.LASTMNTBY,	
					T1.LASTMNTON,	
					T1.TASKID,
					T1.NEXTTASKID,	
					T1.RECORDSTATUS,	
					T1.RECORDTYPE,	
					T1.ROLECODE,	
					T1.NEXTROLECODE,	
					T1.WORKFLOWID,
		   		    T2.SCHEDULEMETHOD,
		    		T2.PROFITDAYSBASIS	
				FROM EXTENDED_FIELD_MNT T1
				JOIN FINANCEMAIN T2 ON T2.FINREFERENCE= T1.REFERENCE
				JOIN CUSTOMERS T3 ON T3.CUSTID = T2.CUSTID
				LEFT JOIN SECROLES T4 ON T1.NEXTROLECODE = T4.ROLECD
				JOIN BMTPRODUCT T5 ON T2.FINCATEGORY = T5.PRODUCTCODE
				JOIN RMTFINANCETYPES T6 ON T6.FINTYPE = T2.FINTYPE
				WHERE NOT (EXISTS ( SELECT 1 FROM EXTENDED_FIELD_MNT_TEMP
					WHERE EXTENDED_FIELD_MNT_TEMP.REFERENCE = T1.REFERENCE))
			]]>
        </createView>
	</changeSet>

	<changeSet id="ST#13.47_post" author="saisandeep.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'extended_field_mnt_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#13.48" author="saisandeep.b">
		<sql>
			<![CDATA[	
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'EXTENDEDFIELDDETAIL_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'ExtendedFieldDetailDialog_fieldIsMaintAlwd');
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'ExtendedFieldDetailDialog_fieldIsMaintAlwd';
				
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID) + 1 FROM SECRIGHTS),0,'ExtendedFieldDetailDialog_fieldIsMaintAlwd','ExtendedFieldDetailDialog',1,1000,CURRENT_TIMESTAMP,'Approved','','','','','',0);
							
 				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),(SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'EXTENDEDFIELDDETAIL_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'ExtendedFieldDetailDialog_fieldIsMaintAlwd'), 1, 1, 1000, CURRENT_TIMESTAMP, '', '', '', '', '', '', 0);
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#13.49" author="saisandeep.b">
		<dropView viewName="ExtendedFieldExtension_View" />
	</changeSet>
	
	<changeSet id="ST#13.50" author="saisandeep.b">
		<dropView viewName="ExtendedFieldMaintenance_View" />
	</changeSet>
	
	<changeSet id="DE#66.1" author="saisandeep.b">
  		 <dropForeignKeyConstraint baseTableName="secusr_reporting_managers_temp" constraintName="fk_reportmng_usrid_t" />
    </changeSet>
	
   <changeSet id="DE#66.2" author="saisandeep.b">
  		<dropForeignKeyConstraint baseTableName="secusr_reporting_managers" constraintName="fk_reportmng_usrid" />
   </changeSet>
   
   <changeSet id="ST#13.51" author="saisandeep.b">
		<sql>
			<![CDATA[
				DELETE FROM ERRORDETAILS WHERE CODE = 'EXT001';
				INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION) VALUES ('EXT001','EN','E','Schedule Date: {0} is in between maker initiated date: {1} and approve Date: {2}.  Please re-initiate transaction.','test','Approved',null,null,null,null,null,0,current_timestamp,1000,3);
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#13.52" author="saisandeep.b">
		<sql>
			<![CDATA[
				DELETE FROM ERRORDETAILS WHERE CODE = '30550';
				INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION) VALUES ('30550','EN','E','{0} {1} {2} {3}','test','Approved',null,null,null,null,null,0,current_timestamp,1000,3);
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#20.62.2_pre" author="saisandeep.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'int_mandate_request_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#20.62.2" author="saisandeep.b">
		<createView replaceIfExists="true" viewName="INT_MANDATE_REQUEST_VIEW">
		 	<![CDATA[
				SELECT M.MANDATEID,
					M.DOCUMENTNAME,
					BD.BANKSHORTCODE BANKCODE,
					BD.BANKNAME,
					CASE WHEN LB.BRANCHCODE IS NULL THEN CB.BRANCHCODE
						ELSE LB.BRANCHCODE END BRANCHCODE,
					CASE WHEN LB.BRANCHDESC IS NULL THEN CB.BRANCHDESC
						ELSE LB.BRANCHDESC END BRANCHDESC,
					CUST.CUSTCIF,
					CUST.CUSTSHRTNAME,
					CUST.CUSTCOREBANK,
					FT.FINTYPEDESC FINTYPE,
					FIN.FINREFERENCE,
					COALESCE((( SELECT SUM(T.TOTALAMOUNT) SUM
						FROM ( SELECT MAX(FSD.REPAYAMOUNT + FSD.FEESCHD) TOTALAMOUNT
							FROM FINSCHEDULEDETAILS FSD
							JOIN FINANCEMAIN FM ON FM.FINREFERENCE = FSD.FINREFERENCE AND FM.CUSTID = M.CUSTID
                  			GROUP BY FM.FINREFERENCE) T)) / CCY.CCYMINORCCYUNITS, 0) CUST_EMI,
    				COALESCE((( SELECT SUM(T.TOTALAMOUNT) SUM
           				FROM ( SELECT MAX(FSD.REPAYAMOUNT + FSD.FEESCHD) TOTALAMOUNT
                   			FROM FINSCHEDULEDETAILS FSD
                  			WHERE (FSD.REPAYONSCHDATE = 1 OR FSD.PFTONSCHDATE = 1) AND (FSD.FINREFERENCE IN 
                  				(SELECT FINANCEMAIN.FINREFERENCE FROM FINANCEMAIN
                          			WHERE FINANCEMAIN.MANDATEID = M.MANDATEID))
                  			GROUP BY FSD.FINREFERENCE) T)) / CCY.CCYMINORCCYUNITS, 0) EMI,
        			CASE M.OPENMANDATE WHEN 1 THEN 'new open ecs'
            			ELSE 'no open ecs' END OPENMANDATE,
    				M.ACCNUMBER,
        			CASE WHEN M.ACCTYPE = '10' THEN 'savings account'
            			WHEN M.ACCTYPE = '11' THEN 'current account'
            			WHEN M.ACCTYPE = '12' THEN 'cash credit account'
            			ELSE M.ACCTYPE END ACCTYPE,
    				M.ACCHOLDERNAME,
    				BB.MICR,
    				BB.IFSC,
    				BB.ADDOFBRANCH,
    				( SELECT MIN(FINPFTDETAILS.FIRSTREPAYDATE) MIN FROM FINPFTDETAILS
          					WHERE (FINPFTDETAILS.FINREFERENCE IN (SELECT FINANCEMAIN.FINREFERENCE
                   			FROM FINANCEMAIN WHERE FINANCEMAIN.MANDATEID = M.MANDATEID))) FIRSTDUEDATE,
    				(SELECT MAX(FINSCHEDULEDETAILS.SCHDATE) MAX FROM FINSCHEDULEDETAILS
          					WHERE (FINSCHEDULEDETAILS.REPAYONSCHDATE = 1 OR FINSCHEDULEDETAILS.PFTONSCHDATE = 1) AND
          					 (FINSCHEDULEDETAILS.FINREFERENCE IN (SELECT FINANCEMAIN.FINREFERENCE
                   			FROM FINANCEMAIN WHERE FINANCEMAIN.MANDATEID = M.MANDATEID))) EMIENDDATE,
    				COALESCE(M.MAXLIMIT, 0) MAXLIMIT,
    				COALESCE(( SELECT SUM(T.MANDATEDEBITAMOUNT) SUM FROM (SELECT MAX(FINSCHEDULEDETAILS.REPAYAMOUNT + FINSCHEDULEDETAILS.FEESCHD) MANDATEDEBITAMOUNT
							FROM FINSCHEDULEDETAILS WHERE (FINSCHEDULEDETAILS.REPAYONSCHDATE = 1 OR FINSCHEDULEDETAILS.PFTONSCHDATE = 1) 
							AND (FINSCHEDULEDETAILS.FINREFERENCE IN (SELECT FINANCEMAIN.FINREFERENCE FROM FINANCEMAIN
                          		WHERE FINANCEMAIN.MANDATEID = M.MANDATEID))
                  			GROUP BY FINSCHEDULEDETAILS.FINREFERENCE) T), 0) / CCY.CCYMINORCCYUNITS DEBITAMOUNT,
    				FIN.NUMBEROFTERMS,
				    M.PERIODICITY,
				    M.STARTDATE,
				    M.EXPIRYDATE,
				    FIN.APPLICATIONNO,
				    M.MANDATETYPE,
				    M.STATUS,
				    M.INPUTDATE,
				    M.RECORDSTATUS,
				    M.RECORDTYPE,
				    M.MANDATECCY,
				    COALESCE(CCY.CCYMINORCCYUNITS, 100) CCYMINORCCYUNITS,
				    M.ENTITYCODE,
				    CP.PHONENUMBER,
				    CE.CUSTEMAIL,
				    PB.PARTNERBANKNAME,
				    M.LASTMNTON,
				    BB.BRANCHDESC BANK_BRANCH_NAME,
				    ET.ENTITYDESC,
				    PB.UTILITYCODE,
				    PB.SPONSORBANKCODE,
				    M.PARTNERBANKID,
				    PB.PARTNERBANKCODE
   				FROM MANDATES M
				JOIN BANKBRANCHES BB ON BB.BANKBRANCHID = M.BANKBRANCHID
				JOIN BMTBANKDETAIL BD ON BD.BANKCODE = BB.BANKCODE
				JOIN CUSTOMERS CUST ON CUST.CUSTID = M.CUSTID
				JOIN RMTBRANCHES CB ON CB.BRANCHCODE = CUST.CUSTDFTBRANCH
				LEFT JOIN PARTNERBANKS PB ON PB.PARTNERBANKID = M.PARTNERBANKID
				LEFT JOIN CUSTOMEREMAILS CE ON CE.CUSTID = CUST.CUSTID AND CE.CUSTEMAILPRIORITY = 5
				LEFT JOIN CUSTOMERPHONENUMBERS CP ON CP.PHONECUSTID = CUST.CUSTID AND CP.PHONETYPEPRIORITY = 5
				LEFT JOIN RMTCURRENCIES CCY ON CCY.CCYCODE = M.MANDATECCY
				LEFT JOIN FINANCEMAIN FIN ON M.ORGREFERENCE = FIN.FINREFERENCE
				LEFT JOIN RMTBRANCHES LB ON LB.BRANCHCODE = FIN.FINBRANCH
				LEFT JOIN RMTFINANCETYPES FT ON FIN.FINTYPE = FT.FINTYPE
				LEFT JOIN ENTITY ET ON M.ENTITYCODE = ET.ENTITYCODE
  				WHERE M.STATUS = 'NEW' AND NOT (M.MANDATEID IN ( SELECT MANDATE_REQUESTS.MANDATEID FROM MANDATE_REQUESTS
          			WHERE MANDATE_REQUESTS.STATUS = 'AC' OR MANDATE_REQUESTS.STATUS = 'NEW'))
			]]>
		</createView>
	</changeSet>
	
	<changeSet id="ST#20.62.2_post" author="saisandeep.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'int_mandate_request_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="PSD#179613" author="Gopal.p">
		<dropPrimaryKey constraintName="cibil_file_info_log_pkey" tableName="CIBIL_FILE_INFO_LOG" />
	</changeSet>
	
	<changeSet id="PSD#179893" author="Gopal.p">
		<sql>
			<![CDATA[
				UPDATE SECRIGHTS SET RIGHTTYPE = 3 WHERE RIGHTNAME = 'ExtendedFieldDetailDialog_fieldIsMaintAlwd';
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="PSD#180070" author="Gopal.p">
		<sql>
			<![CDATA[
   		     	DELETE FROM REPORTLIST WHERE CODE = 'District';
				INSERT INTO REPORTLIST (CODE, MODULE, FIELDLABELS, FIELDVALUES, FIELDTYPE, ADDFIELDS, REPORTFILENAME, REPORTHEADING, MODULETYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, FORMATREQ) VALUES ('District', 'District', 'listheader_DistrictCode.label,listheader_DistrictName.label', 'code,name', 'String,String', null, 'ReportList02', 'District', 'System Masters', 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0, 0);
        	 ]]>
		</sql>
	</changeSet>
	
		<changeSet id="PSD#180247.1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'feewaivers_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="PSD#180247.1" author="Gopal.p" >
		<createView viewName="FEEWAIVERS_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT DISTINCT T1.FINREFERENCE,
					T1.FINBRANCH,
					T1.FINTYPE,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.FINSTARTDATE,
					T1.NUMBEROFTERMS,
					T1.CUSTID,
					T1.FINAMOUNT,
					T1.MATURITYDATE,
					T1.FINREPAYMENTAMOUNT,
					T1.FINISACTIVE,
					T1.BLACKLISTED,
					T1.FEECHARGEAMT,
					T1.INSURANCEAMT,
					T1.GRACETERMS,
					T1.ALLOWGRCPERIOD,
					T1.GRCPERIODENDDATE,
					T1.ALWMULTIDISB,
					T1.DEFFERMENTS,
					T1.ALLOWGRCPFTRVW,
					T1.ALLOWREPAYRVW,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.MIGRATEDFINANCE,
					T1.CLOSINGSTATUS,
					T1.REPAYRATEBASIS,
					T1.MANUALSCHEDULE,
					T1.FINCURRASSETVALUE,
					T1.TAKEOVERFINANCE,
					T1.NEXTROLLOVERDATE,
					T1.AVAILEDUNPLANEMI,
					T1.AVAILEDREAGEH,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.DOWNPAYMENT,
					T1.PLANEMIHALW,
					T1.CALTERMS,
					T1.RATECHGANYDAY,
					T1.FINASSETVALUE,
					T2.CUSTCIF LOVDESCCUSTCIF,
					T3.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
					T3.FINDIVISION LOVDESCFINDIVISION,
					T3.FINCATEGORY LOVDESCPRODUCTCODENAME,
					T4.PRODUCTCATEGORY,
					COALESCE(T9.NOINST, 0) NOINST,
					COALESCE(T5.ROLEDESC, T10.NEXTROLECODE) LOVDESCREQUESTSTAGE,
					T10.WAIVERID,
					T10.EVENT RCDMAINTAINSTS,
					T10.NEXTROLECODE,
					T10.RECORDSTATUS,
					T10.RECORDTYPE,
					T1.VERSION,
					T1.FINCATEGORY
				FROM FEEWAIVERHEADER_TEMP T10
				JOIN FINANCEMAIN T1 ON T1.FINREFERENCE = T10.FINREFERENCE
				JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
				JOIN RMTFINANCETYPES T3 ON T1.FINTYPE = T3.FINTYPE
				LEFT JOIN SECROLES T5 ON T10.NEXTROLECODE = T5.ROLECD
				JOIN BMTPRODUCT T4 ON T3.FINCATEGORY = T4.PRODUCTCODE
				LEFT JOIN FINPFTDETAILS T9 ON T1.FINREFERENCE = T9.FINREFERENCE
				JOIN (SELECT MA.FINREFERENCE FROM MANUALADVISE MA
					WHERE MA.ADVISETYPE = 1 AND (MA.ADVISEAMOUNT - MA.PAIDAMOUNT - 	MA.WAIVEDAMOUNT) > 0
					UNION ALL
					SELECT OD.FINREFERENCE FROM FINODDETAILS OD
					WHERE OD.TOTPENALTYBAL > 0 OR OD.LPIBAL > 0) T ON T.FINREFERENCE = T1.FINREFERENCE
				WHERE T10.EVENT = 'FEEWAIVERS'
				UNION ALL
				SELECT DISTINCT T1.FINREFERENCE,
					T1.FINBRANCH,
					T1.FINTYPE,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.FINSTARTDATE,
					T1.NUMBEROFTERMS,
					T1.CUSTID,
					T1.FINAMOUNT,
					T1.MATURITYDATE,
					T1.FINREPAYMENTAMOUNT,
					T1.FINISACTIVE,
					T1.BLACKLISTED,
					T1.FEECHARGEAMT,
					T1.INSURANCEAMT,
					T1.GRACETERMS,
					T1.ALLOWGRCPERIOD,
					T1.GRCPERIODENDDATE,
					T1.ALWMULTIDISB,
					T1.DEFFERMENTS,
					T1.ALLOWGRCPFTRVW,
					T1.ALLOWREPAYRVW,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.MIGRATEDFINANCE,
					T1.CLOSINGSTATUS,
					T1.REPAYRATEBASIS,
					T1.MANUALSCHEDULE,
					T1.FINCURRASSETVALUE,
					T1.TAKEOVERFINANCE,
					T1.NEXTROLLOVERDATE,
					T1.AVAILEDUNPLANEMI,
					T1.AVAILEDREAGEH,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.DOWNPAYMENT,
					T1.PLANEMIHALW,
					T1.CALTERMS,
					T1.RATECHGANYDAY,
					T1.FINASSETVALUE,
					T2.CUSTCIF LOVDESCCUSTCIF,
					T3.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
					T3.FINDIVISION LOVDESCFINDIVISION,
					T3.FINCATEGORY LOVDESCPRODUCTCODENAME,
					T4.PRODUCTCATEGORY,
					COALESCE(T9.NOINST, 0) NOINST,
					NULL LOVDESCREQUESTSTAGE,
					0 WAIVERID,
					NULL RCDMAINTAINSTS,
					NULL NEXTROLECODE,
					NULL RECORDSTATUS,
					NULL RECORDTYPE,
					T1.VERSION,
					T1.FINCATEGORY
				FROM FINANCEMAIN T1
				JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
				JOIN RMTFINANCETYPES T3 ON T1.FINTYPE = T3.FINTYPE
				LEFT JOIN SECROLES T5 ON T1.NEXTROLECODE = T5.ROLECD
				JOIN BMTPRODUCT T4 ON T3.FINCATEGORY = T4.PRODUCTCODE
				LEFT JOIN FINPFTDETAILS T9 ON T1.FINREFERENCE = T9.FINREFERENCE
				JOIN (SELECT MA.FINREFERENCE FROM MANUALADVISE MA
					WHERE MA.ADVISETYPE = 1 AND (MA.ADVISEAMOUNT - MA.PAIDAMOUNT - MA.WAIVEDAMOUNT) > 0
					UNION ALL
					SELECT OD.FINREFERENCE FROM FINODDETAILS OD
					WHERE OD.TOTPENALTYBAL > 0 OR OD.LPIBAL > 0) T ON T.FINREFERENCE = T1.FINREFERENCE
				WHERE NOT (EXISTS (SELECT 1 FROM FEEWAIVERHEADER_TEMP
					WHERE FEEWAIVERHEADER_TEMP.FINREFERENCE = T1.FINREFERENCE))
			]]>
		</createView>
	</changeSet>
	
	<changeSet id="PSD#180247.1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'feewaivers_view');
			]]>
		</sql>
	</changeSet>
	
</databaseChangeLog>