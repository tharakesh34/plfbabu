<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

	<property name="add.schema" value="dbo." dbms="mssql" />
	<property name="add.schema" value="" dbms="oracle" />
	<property name="add.schema" value="" dbms="postgresql" />
	<property name="call.substr" value="substring" dbms="mssql" />
	<property name="call.substr" value="substr" dbms="oracle" />
	<property name="call.substr" value="substring" dbms="postgresql" />
	<property name="call.auditdb" value="PLFAVANSEQC.." dbms="mssql" />
	<property name="call.auditdb" value=" " dbms="oracle" />
	<property name="call.concatenate" value="+" dbms="mssql" />
	<property name="call.concatenate" value="||" dbms="oracle" />
	<property name="call.concatenate" value="||" dbms="postgresql" />
	<property name="call.collength" value="LEN" dbms="mssql" />
	<property name="call.collength" value="LENGTH" dbms="oracle" />
	<property name="call.collength" value="LENGTH" dbms="postgresql" />
	<property name="call.date" value="getdate()" dbms="mssql" />
	<property name="call.date" value="sysdate" dbms="oracle" />
	<property name="call.date" value="now()" dbms="postgresql" />

	<changeSet id="pre_run_for_pgp" author="nagavamsi.p" runAlways="true" dbms="postgresql">
		<sql>
			Set search_path = plf,public,pg_catalog;
		</sql>
	</changeSet>

	<changeSet id="ST#93.1" author="nagavamsi.p">
		<addColumn tableName="AccountMapping_Temp">
			<column name="OpenedDate" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#93.2" author="nagavamsi.p">
		<addColumn tableName="AccountMapping_Temp">
			<column name="ClosedDate" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#93.3" author="nagavamsi.p">
		<addColumn tableName="AccountMapping_Temp">
			<column name="Status" type="varchar(8)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#93.4" author="nagavamsi.p">
		<addColumn tableName="AccountMapping_Temp">
			<column name="AllowedManualEntry" type="Char(1)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#93.5" author="nagavamsi.p">
		<addColumn tableName="AccountMapping_Temp">
			<column name="CreatedBy" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#93.6" author="nagavamsi.p">
		<addColumn tableName="AccountMapping_Temp">
			<column name="CreatedOn" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#93.7" author="nagavamsi.p">
		<addColumn tableName="AccountMapping_Temp">
			<column name="ApprovedBy" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#93.8" author="nagavamsi.p">
		<addColumn tableName="AccountMapping_Temp">
			<column name="ApprovedOn" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#93.9" author="nagavamsi.p" dbms="postgresql,mssql">
		<sql>
			<![CDATA[  
				UPDATE ACCOUNTMAPPING_TEMP SET OPENEDDATE = (SELECT CAST(SYSPARMVALUE AS DATE) FROM SMTPARAMETERS WHERE SYSPARMCODE='APP_DATE');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#93.9" author="nagavamsi.p" dbms="oracle">
		<sql>
			<![CDATA[  
				UPDATE ACCOUNTMAPPING_TEMP SET OPENEDDATE = (SELECT TO_DATE(SYSPARMVALUE, 'yyyy-mm-dd') FROM SMTPARAMETERS WHERE SYSPARMCODE='APP_DATE');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#93.10" author="nagavamsi.p">
		<sql>
			<![CDATA[  
				UPDATE ACCOUNTMAPPING_TEMP SET STATUS = 'O';
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#93.11" author="nagavamsi.p">
		<sql>
			<![CDATA[  
				UPDATE ACCOUNTMAPPING_TEMP SET ALLOWEDMANUALENTRY = 'B';
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#93.12" author="nagavamsi.p">
		<sql>
			<![CDATA[  
				UPDATE ACCOUNTMAPPING_TEMP SET CREATEDBY = LASTMNTBY;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#93.13" author="nagavamsi.p">
		<sql>
			<![CDATA[  
				UPDATE ACCOUNTMAPPING_TEMP SET CREATEDON = LASTMNTON;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#93.14" author="nagavamsi.p">
		<addNotNullConstraint tableName="AccountMapping_Temp" columnName="OpenedDate"
			columnDataType="datetime" />
	</changeSet>

	<changeSet id="ST#93.15" author="nagavamsi.p">
		<addNotNullConstraint tableName="AccountMapping_Temp" columnName="Status"
			columnDataType="varchar(8)" />
	</changeSet>

	<changeSet id="ST#93.16" author="nagavamsi.p">
		<addNotNullConstraint tableName="AccountMapping_Temp" columnName="AllowedManualEntry"
			columnDataType="Char(1)" />
	</changeSet>

	<changeSet id="ST#93.17" author="nagavamsi.p">
		<addNotNullConstraint tableName="AccountMapping_Temp" columnName="CreatedBy"
			columnDataType="bigint" />
	</changeSet>

	<changeSet id="ST#93.18" author="nagavamsi.p">
		<addNotNullConstraint tableName="AccountMapping_Temp" columnName="CreatedOn"
			columnDataType="datetime" />
	</changeSet>

	<changeSet id="ST#93.14.1" author="nagavamsi.p">
		<dropNotNullConstraint tableName="AccountMapping_Temp" columnName="OpenedDate"
			columnDataType="datetime" />
	</changeSet>

	<changeSet id="ST#93.15.1" author="nagavamsi.p">
		<dropNotNullConstraint tableName="AccountMapping_Temp" columnName="Status"
			columnDataType="varchar(8)" />
	</changeSet>

	<changeSet id="ST#93.16.1" author="nagavamsi.p">
		<dropNotNullConstraint tableName="AccountMapping_Temp" columnName="AllowedManualEntry"
			columnDataType="Char(1)" />
	</changeSet>

	<changeSet id="ST#93.17.1" author="nagavamsi.p">
		<dropNotNullConstraint tableName="AccountMapping_Temp" columnName="CreatedBy"
			columnDataType="bigint" />
	</changeSet>

	<changeSet id="ST#93.18.1" author="nagavamsi.p">
		<dropNotNullConstraint tableName="AccountMapping_Temp" columnName="CreatedOn"
			columnDataType="datetime" />
	</changeSet>

	<changeSet id="ST#93.19" author="nagavamsi.p">
		<addColumn tableName="AccountMapping">
			<column name="OpenedDate" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#93.20" author="nagavamsi.p">
		<addColumn tableName="AccountMapping">
			<column name="ClosedDate" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#93.21" author="nagavamsi.p">
		<addColumn tableName="AccountMapping">
			<column name="Status" type="varchar(8)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#93.22" author="nagavamsi.p">
		<addColumn tableName="AccountMapping">
			<column name="AllowedManualEntry" type="Char(1)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#93.23" author="nagavamsi.p">
		<addColumn tableName="AccountMapping">
			<column name="CreatedBy" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#93.24" author="nagavamsi.p">
		<addColumn tableName="AccountMapping">
			<column name="CreatedOn" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#93.25" author="nagavamsi.p">
		<addColumn tableName="AccountMapping">
			<column name="ApprovedBy" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#93.26" author="nagavamsi.p">
		<addColumn tableName="AccountMapping">
			<column name="ApprovedOn" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#93.27" author="nagavamsi.p" dbms="postgresql,mssql">
		<sql>
			<![CDATA[  
				UPDATE ACCOUNTMAPPING SET OPENEDDATE = (SELECT CAST(SYSPARMVALUE AS DATE) FROM SMTPARAMETERS WHERE SYSPARMCODE='APP_DATE');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#93.27" author="nagavamsi.p" dbms="oracle">
		<sql>
			<![CDATA[  
				UPDATE ACCOUNTMAPPING SET OPENEDDATE = (SELECT TO_DATE(SYSPARMVALUE, 'yyyy-mm-dd') FROM SMTPARAMETERS WHERE SYSPARMCODE='APP_DATE');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#93.28" author="nagavamsi.p">
		<sql>
			<![CDATA[  
				UPDATE ACCOUNTMAPPING SET STATUS = 'O';
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#93.29" author="nagavamsi.p">
		<sql>
			<![CDATA[  
				UPDATE ACCOUNTMAPPING SET ALLOWEDMANUALENTRY = 'B';
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#93.30" author="nagavamsi.p">
		<sql>
			<![CDATA[  
				UPDATE ACCOUNTMAPPING SET CREATEDBY = LASTMNTBY;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#93.31" author="nagavamsi.p">
		<sql>
			<![CDATA[  
				UPDATE ACCOUNTMAPPING SET CREATEDON = LASTMNTON;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#93.32" author="nagavamsi.p">
		<addNotNullConstraint tableName="AccountMapping" columnName="OpenedDate"
			columnDataType="datetime" />
	</changeSet>

	<changeSet id="ST#93.33" author="nagavamsi.p">
		<addNotNullConstraint tableName="AccountMapping" columnName="Status" columnDataType="varchar(8)" />
	</changeSet>

	<changeSet id="ST#93.34" author="nagavamsi.p">
		<addNotNullConstraint tableName="AccountMapping" columnName="AllowedManualEntry"
			columnDataType="Char(1)" />
	</changeSet>

	<changeSet id="ST#93.35" author="nagavamsi.p">
		<addNotNullConstraint tableName="AccountMapping" columnName="CreatedBy" columnDataType="bigint" />
	</changeSet>

	<changeSet id="ST#93.36" author="nagavamsi.p">
		<addNotNullConstraint tableName="AccountMapping" columnName="CreatedOn" columnDataType="datetime" />
	</changeSet>

	<changeSet id="ST#93.32.1" author="nagavamsi.p">
		<dropNotNullConstraint tableName="AccountMapping" columnName="OpenedDate"
			columnDataType="datetime" />
	</changeSet>

	<changeSet id="ST#93.33.1" author="nagavamsi.p">
		<dropNotNullConstraint tableName="AccountMapping" columnName="Status"
			columnDataType="varchar(8)" />
	</changeSet>

	<changeSet id="ST#93.34.1" author="nagavamsi.p">
		<dropNotNullConstraint tableName="AccountMapping" columnName="AllowedManualEntry"
			columnDataType="Char(1)" />
	</changeSet>

	<changeSet id="ST#93.35.1" author="nagavamsi.p">
		<dropNotNullConstraint tableName="AccountMapping" columnName="CreatedBy" columnDataType="bigint" />
	</changeSet>

	<changeSet id="ST#93.36.1" author="nagavamsi.p">
		<dropNotNullConstraint tableName="AccountMapping" columnName="CreatedOn"
			columnDataType="datetime" />
	</changeSet>

	<changeSet id="ST#93.37_pre" author="nagavamsi.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'accountmapping_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#93.37" author="nagavamsi.p">
		<createView replaceIfExists="true" viewName="ACCOUNTMAPPING_VIEW">
			<![CDATA[
				SELECT AM.ACCOUNT
					, AM.HOSTACCOUNT
					, AM.PROFITCENTERID
					, AM.COSTCENTERID
					, AM.FINTYPE
					, AM.ACCOUNTTYPE 
                    , PC.PROFITCENTERCODE
                    , PC.PROFITCENTERDESC	
                    , CC.COSTCENTERCODE	
                    , CC.COSTCENTERDESC	
                    , RAT.ACTYPEDESC ACCOUNTTYPEDESC	
                    , RFT.FINTYPEDESC
                    , AM.OPENEDDATE
                    , AM.CLOSEDDATE					
					, AM.STATUS 
					, AM.ALLOWEDMANUALENTRY
					, AM.VERSION
					, AM.CREATEDBY
					, AM.CREATEDON                                                                           
					, AM.APPROVEDBY
					, AM.APPROVEDON 
					, AM.LASTMNTBY 
					, AM.LASTMNTON 
					, AM.RECORDSTATUS 
					, AM.ROLECODE 
					, AM.NEXTROLECODE 
					, AM.TASKID 
					, AM.NEXTTASKID 
					, AM.RECORDTYPE 
					, AM.WORKFLOWID
				FROM ACCOUNTMAPPING_TEMP AM
				LEFT JOIN PROFITCENTERS PC ON PC.PROFITCENTERID = AM.PROFITCENTERID
				LEFT JOIN COSTCENTERS CC ON CC.COSTCENTERID = AM.COSTCENTERID
				LEFT JOIN RMTACCOUNTTYPES RAT ON RAT.ACTYPE = AM.ACCOUNTTYPE
				LEFT JOIN RMTFINANCETYPES RFT ON RFT.FINTYPE = AM.FINTYPE
				UNION ALL
				SELECT AM.ACCOUNT
					, AM.HOSTACCOUNT
					, AM.PROFITCENTERID
					, AM.COSTCENTERID
					, AM.FINTYPE
					, AM.ACCOUNTTYPE 
                    , PC.PROFITCENTERCODE
                    , PC.PROFITCENTERDESC	
                    , CC.COSTCENTERCODE	
                    , CC.COSTCENTERDESC	
                    , RAT.ACTYPEDESC ACCOUNTTYPEDESC	
                    , RFT.FINTYPEDESC
                    , AM.OPENEDDATE
                    , AM.CLOSEDDATE					
					, AM.STATUS 
					, AM.ALLOWEDMANUALENTRY
					, AM.VERSION
					, AM.CREATEDBY
					, AM.CREATEDON                                                                           
					, AM.APPROVEDBY
					, AM.APPROVEDON 
					, AM.LASTMNTBY 
					, AM.LASTMNTON 
					, AM.RECORDSTATUS 
					, AM.ROLECODE 
					, AM.NEXTROLECODE 
					, AM.TASKID 
					, AM.NEXTTASKID 
					, AM.RECORDTYPE 
					, AM.WORKFLOWID
				FROM ACCOUNTMAPPING AM
				LEFT JOIN PROFITCENTERS PC ON PC.PROFITCENTERID = AM.PROFITCENTERID   
				LEFT JOIN COSTCENTERS CC ON CC.COSTCENTERID = AM.COSTCENTERID 
				LEFT JOIN RMTACCOUNTTYPES RAT ON RAT.ACTYPE = AM.ACCOUNTTYPE  
				LEFT JOIN RMTFINANCETYPES RFT ON RFT.FINTYPE = AM.FINTYPE
        	 	WHERE NOT EXISTS (SELECT 1 FROM ACCOUNTMAPPING_TEMP WHERE ACCOUNT = AM.ACCOUNT)
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#93.37_post" author="nagavamsi.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'accountmapping_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#93.38_pre" author="nagavamsi.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'accountmapping_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#93.38" author="nagavamsi.p">
		<createView replaceIfExists="true" viewName="ACCOUNTMAPPING_AVIEW">
			<![CDATA[
				SELECT AM.ACCOUNT
					, AM.HOSTACCOUNT
					, AM.PROFITCENTERID
					, AM.COSTCENTERID
					, AM.FINTYPE
					, AM.ACCOUNTTYPE 
                    , PC.PROFITCENTERCODE
                    , PC.PROFITCENTERDESC	
                    , CC.COSTCENTERCODE	
                    , CC.COSTCENTERDESC	
                    , RAT.ACTYPEDESC ACCOUNTTYPEDESC	
                    , RFT.FINTYPEDESC
                    , AM.OPENEDDATE
                    , AM.CLOSEDDATE					
					, AM.STATUS 
					, AM.ALLOWEDMANUALENTRY
					, AM.VERSION
					, AM.CREATEDBY
					, AM.CREATEDON                                                                           
					, AM.APPROVEDBY
					, AM.APPROVEDON 
					, AM.LASTMNTBY 
					, AM.LASTMNTON 
					, AM.RECORDSTATUS 
					, AM.ROLECODE 
					, AM.NEXTROLECODE 
					, AM.TASKID 
					, AM.NEXTTASKID 
					, AM.RECORDTYPE 
					, AM.WORKFLOWID
				FROM ACCOUNTMAPPING AM   
				LEFT JOIN PROFITCENTERS PC ON  PC.PROFITCENTERID = AM.PROFITCENTERID   
				LEFT JOIN COSTCENTERS CC ON  CC.COSTCENTERID = AM.COSTCENTERID 
				LEFT JOIN RMTACCOUNTTYPES RAT ON  RAT.ACTYPE = AM.ACCOUNTTYPE  
				LEFT JOIN RMTFINANCETYPES RFT ON RFT.FINTYPE = AM.FINTYPE
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#93.38_post" author="nagavamsi.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'accountmapping_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#93.39" author="nagavamsi.p">
		<sql>
			<![CDATA[
			    DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'AccountMappingDialog_AllowedManualEntry');
			    DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'AccountMappingDialog_OpenedDate');
			    DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'AccountMappingDialog_ClosedDate');
			    DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'AccountMappingDialog_Status');
			    
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'AccountMappingDialog_AllowedManualEntry';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'AccountMappingDialog_OpenedDate';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'AccountMappingDialog_ClosedDate';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'AccountMappingDialog_Status';
				
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'AccountMappingDialog_AllowedManualEntry', 'AccountMappingDialog', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'AccountMappingDialog_OpenedDate', 'AccountMappingDialog', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'AccountMappingDialog_ClosedDate', 'AccountMappingDialog', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'AccountMappingDialog_Status', 'AccountMappingDialog', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);

				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'ACCOUNTMAPPING_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'AccountMappingDialog_AllowedManualEntry'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'ACCOUNTMAPPING_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'AccountMappingDialog_OpenedDate'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'ACCOUNTMAPPING_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'AccountMappingDialog_ClosedDate'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'ACCOUNTMAPPING_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'AccountMappingDialog_Status'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#84.1" author="saikrishna.b">
		<addColumn tableName="SecUsers">
			<column name="DisableReason" type="varchar(50)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#84.2" author="saikrishna.b">
		<addColumn tableName="SecUsers">
			<column name="EmployeeType" type="varchar(50)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#84.3" author="saikrishna.b">
		<addColumn tableName="SecUsers">
			<column name="CreatedBy" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#84.4" author="saikrishna.b">
		<addColumn tableName="SecUsers">
			<column name="CreatedOn" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#84.5" author="saikrishna.b">
		<addColumn tableName="SecUsers">
			<column name="ApprovedBy" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#84.6" author="saikrishna.b">
		<addColumn tableName="SecUsers">
			<column name="ApprovedOn" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#84.7" author="saikrishna.b">
		<addColumn tableName="SecUsers_temp">
			<column name="DisableReason" type="varchar(50)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#84.8" author="saikrishna.b">
		<addColumn tableName="SecUsers_temp">
			<column name="EmployeeType" type="varchar(50)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#84.9" author="saikrishna.b">
		<addColumn tableName="SecUsers_temp">
			<column name="CreatedBy" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#84.10" author="saikrishna.b">
		<addColumn tableName="SecUsers_temp">
			<column name="CreatedOn" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#84.11" author="saikrishna.b">
		<addColumn tableName="SecUsers_temp">
			<column name="ApprovedBy" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#84.12" author="saikrishna.b">
		<addColumn tableName="SecUsers_temp">
			<column name="ApprovedOn" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#84.13" author="saikrishna.b">
		<addColumn tableName="SecUsers_rtemp">
			<column name="DisableReason" type="varchar(50)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#84.14" author="saikrishna.b">
		<addColumn tableName="SecUsers_rtemp">
			<column name="EmployeeType" type="varchar(50)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#84.15" author="saikrishna.b">
		<addColumn tableName="SecUsers_rtemp">
			<column name="CreatedBy" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#84.16" author="saikrishna.b">
		<addColumn tableName="SecUsers_rtemp">
			<column name="CreatedOn" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#84.17" author="saikrishna.b">
		<addColumn tableName="SecUsers_rtemp">
			<column name="ApprovedBy" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#84.18" author="saikrishna.b">
		<addColumn tableName="SecUsers_rtemp">
			<column name="ApprovedOn" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#84.19" author="saikrishna.b">
		<sql>
			<![CDATA[
				UPDATE SECUSERS SET CREATEDBY = LASTMNTBY WHERE CREATEDBY IS NULL;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#84.20" author="saikrishna.b">
		<sql>
			<![CDATA[
				UPDATE SECUSERS SET CREATEDON = LASTMNTON WHERE CREATEDON IS NULL;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#84.21" author="saikrishna.b">
		<sql>
			<![CDATA[
				UPDATE SECUSERS SET APPROVEDBY = LASTMNTBY WHERE APPROVEDBY IS NULL;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#84.22" author="saikrishna.b">
		<sql>
			<![CDATA[
				UPDATE SECUSERS SET APPROVEDON = LASTMNTON WHERE APPROVEDON IS NULL;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#84.23" author="saikrishna.b">
		<sql>
			<![CDATA[
				UPDATE SECUSERS_TEMP SET CREATEDBY = LASTMNTBY WHERE CREATEDBY IS NULL;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#84.24" author="saikrishna.b">
		<sql>
			<![CDATA[
				UPDATE SECUSERS_TEMP SET CREATEDON = LASTMNTON WHERE CREATEDON IS NULL;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#84.25" author="saikrishna.b">
		<sql>
			<![CDATA[
				UPDATE SECUSERS_TEMP SET APPROVEDBY = LASTMNTBY WHERE APPROVEDBY IS NULL;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#84.26" author="saikrishna.b">
		<sql>
			<![CDATA[
				UPDATE SECUSERS_TEMP SET APPROVEDON = LASTMNTON WHERE APPROVEDON IS NULL;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#84.27" author="saikrishna.b">
		<sql>
			<![CDATA[
				UPDATE SECUSERS_RTEMP SET CREATEDBY = LASTMNTBY WHERE CREATEDBY IS NULL;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#84.28" author="saikrishna.b">
		<sql>
			<![CDATA[
				UPDATE SECUSERS_RTEMP SET CREATEDON = LASTMNTON WHERE CREATEDON IS NULL;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#84.29" author="saikrishna.b">
		<sql>
			<![CDATA[
				UPDATE SECUSERS_RTEMP SET APPROVEDBY = LASTMNTBY WHERE APPROVEDBY IS NULL;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#84.30" author="saikrishna.b">
		<sql>
			<![CDATA[
				UPDATE SECUSERS_RTEMP SET APPROVEDON = LASTMNTON WHERE APPROVEDON IS NULL;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#84.31" author="saikrishna.b">
		<addNotNullConstraint tableName="SecUsers" columnName="CreatedBy" columnDataType="bigint" />
	</changeSet>

	<changeSet id="ST#84.32" author="saikrishna.b">
		<addNotNullConstraint tableName="SecUsers" columnName="CreatedOn" columnDataType="datetime" />
	</changeSet>

	<changeSet id="ST#84.33" author="saikrishna.b">
		<addNotNullConstraint tableName="SecUsers_temp" columnName="CreatedBy" columnDataType="bigint" />
	</changeSet>

	<changeSet id="ST#84.34" author="saikrishna.b">
		<addNotNullConstraint tableName="SecUsers_temp" columnName="CreatedOn" columnDataType="datetime" />
	</changeSet>

	<changeSet id="ST#84.35" author="saikrishna.b">
		<addNotNullConstraint tableName="SecUsers_rtemp" columnName="CreatedBy" columnDataType="bigint" />
	</changeSet>

	<changeSet id="ST#84.36" author="saikrishna.b">
		<addNotNullConstraint tableName="SecUsers_rtemp" columnName="CreatedOn" columnDataType="datetime" />
	</changeSet>

	<changeSet id="ST#84.37_pre" author="saikrishna.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'secusers_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#84.37" author="saikrishna.b">
		<createView viewName="SECUSERS_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.USRID
					, T1.USRLOGIN
					, T1.USRPWD
					, T1.USERSTAFFID
					, T1.USRFNAME
					, T1.USRMNAME
					, T1.USRLNAME
					, T1.USRMOBILE
					, T1.USREMAIL
					, T1.USRENABLED
					, T1.USRCANSIGNONFROM
					, T1.USRCANSIGNONTO
					, T1.USRCANOVERRIDELIMITS
					, T1.USRACEXP
					, T1.USRACEXPDT
					, T1.PWDEXPDT
					, T1.USRACLOCKED
					, T1.USRLANGUAGE
					, T5.LNGDESC LOVDESCUSRLANGUAGE
					, T1.USRDFTAPPID
					, T2.APPCODE LOVDESCUSRDFTAPPCODE
					, T2.APPDESCRIPTION LOVDESCUSRDFTAPPCODENAME
					, T1.USRBRANCHCODE
					, T4.BRANCHDESC LOVDESCUSRBRANCHCODENAME
					, T1.USRDEPTCODE
					, T3.DEPTDESC LOVDESCUSRDEPTCODENAME
					, T1.USRTOKEN
					, T1.USRISMULTIBRANCH
					, T1.USRINVLDLOGINTRIES
					, T1.USRDESG
					, T6.DESGDESC LOVDESCUSRDESG
					, T1.BUSINESSVERTICAL
				    , T7.CODE BUSINESSVERTICALCODE
				    , T7.DESCRIPTION BUSINESSVERTICALDESC
					, T1.VERSION
					, T1.LASTMNTBY
					, T1.LASTMNTON
					, T1.RECORDSTATUS
					, T1.ROLECODE
					, T1.NEXTROLECODE
					, T1.TASKID
					, T1.NEXTTASKID
					, T1.RECORDTYPE
					, T1.WORKFLOWID
					, T1.USRDFTAPPCODE
					, T1.AUTHTYPE
					, T1.USERTYPE
					, T1.ACCESSTOALLBRANCHES
					, T1.LDAPDOMAINNAME
					, T1.DELETED
					, T1.DISABLEREASON
					, T1.EMPLOYEETYPE
					, T1.CREATEDBY
					, T1.CREATEDON
					, T1.APPROVEDBY
					, T1.APPROVEDON
			    FROM SECUSERS_TEMP T1
			    LEFT JOIN PTAPPLICATIONDETAILS T2 ON T1.USRDFTAPPID = T2.APPID
			    LEFT JOIN BMTDEPARTMENTS T3 ON T1.USRDEPTCODE = T3.DEPTCODE
			    LEFT JOIN RMTBRANCHES T4 ON T1.USRBRANCHCODE = T4.BRANCHCODE
			    LEFT JOIN BMTLANGUAGE T5 ON T1.USRLANGUAGE = T5.LNGCODE
			    LEFT JOIN BMTDESIGNATIONS T6 ON T1.USRDESG = T6.DESGCODE
			    LEFT JOIN BUSINESS_VERTICAL T7 ON T7.ID = T1.BUSINESSVERTICAL
			 	UNION ALL
			 	SELECT T1.USRID
					, T1.USRLOGIN
					, T1.USRPWD
					, T1.USERSTAFFID
					, T1.USRFNAME
					, T1.USRMNAME
					, T1.USRLNAME
					, T1.USRMOBILE
					, T1.USREMAIL
					, T1.USRENABLED
					, T1.USRCANSIGNONFROM
					, T1.USRCANSIGNONTO
					, T1.USRCANOVERRIDELIMITS
					, T1.USRACEXP
					, T1.USRACEXPDT
					, T1.PWDEXPDT
					, T1.USRACLOCKED
					, T1.USRLANGUAGE
					, T5.LNGDESC LOVDESCUSRLANGUAGE
					, T1.USRDFTAPPID
					, T2.APPCODE LOVDESCUSRDFTAPPCODE
					, T2.APPDESCRIPTION LOVDESCUSRDFTAPPCODENAME
					, T1.USRBRANCHCODE
					, T4.BRANCHDESC LOVDESCUSRBRANCHCODENAME
					, T1.USRDEPTCODE
					, T3.DEPTDESC LOVDESCUSRDEPTCODENAME
					, T1.USRTOKEN
					, T1.USRISMULTIBRANCH
					, T1.USRINVLDLOGINTRIES
					, T1.USRDESG
					, T6.DESGDESC LOVDESCUSRDESG
					, T1.BUSINESSVERTICAL
					, T7.CODE BUSINESSVERTICALCODE
					, T7.DESCRIPTION BUSINESSVERTICALDESC
					, T1.VERSION
					, T1.LASTMNTBY
					, T1.LASTMNTON
					, T1.RECORDSTATUS
					, T1.ROLECODE
					, T1.NEXTROLECODE
					, T1.TASKID
					, T1.NEXTTASKID
					, T1.RECORDTYPE
					, T1.WORKFLOWID
					, T1.USRDFTAPPCODE
					, T1.AUTHTYPE
					, T1.USERTYPE
					, T1.ACCESSTOALLBRANCHES
					, T1.LDAPDOMAINNAME
					, T1.DELETED
					, T1.DISABLEREASON
					, T1.EMPLOYEETYPE
					, T1.CREATEDBY
					, T1.CREATEDON
					, T1.APPROVEDBY
					, T1.APPROVEDON
			    FROM SECUSERS T1
			    LEFT JOIN PTAPPLICATIONDETAILS T2 ON T1.USRDFTAPPID = T2.APPID
			    LEFT JOIN BMTDEPARTMENTS T3 ON T1.USRDEPTCODE = T3.DEPTCODE
			    LEFT JOIN RMTBRANCHES T4 ON T1.USRBRANCHCODE = T4.BRANCHCODE
			    LEFT JOIN BMTLANGUAGE T5 ON T1.USRLANGUAGE = T5.LNGCODE
			    LEFT JOIN BMTDESIGNATIONS T6 ON T1.USRDESG = T6.DESGCODE
			    LEFT JOIN BUSINESS_VERTICAL T7 ON T7.ID = T1.BUSINESSVERTICAL
			    WHERE NOT EXISTS (SELECT 1 FROM SECUSERS_TEMP WHERE SECUSERS_TEMP.USRID = T1.USRID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#84.37_post" author="saikrishna.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'secusers_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#84.38_pre" author="saikrishna.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'secusers_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#84.38" author="saikrishna.b">
		<createView viewName="SECUSERS_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.USRID
					, T1.USRLOGIN
					, T1.USRPWD
					, T1.USERSTAFFID
					, T1.USRFNAME
					, T1.USRMNAME
					, T1.USRLNAME
					, T1.USRMOBILE
					, T1.USREMAIL
					, T1.USRENABLED
					, T1.USRCANSIGNONFROM
					, T1.USRCANSIGNONTO
					, T1.USRCANOVERRIDELIMITS
					, T1.USRACEXP
					, T1.USRACEXPDT
					, T1.PWDEXPDT
					, T1.USRACLOCKED
					, T1.USRLANGUAGE
					, T5.LNGDESC LOVDESCUSRLANGUAGE
					, T1.USRDFTAPPID
					, T2.APPCODE LOVDESCUSRDFTAPPCODE
					, T2.APPDESCRIPTION LOVDESCUSRDFTAPPCODENAME
					, T1.USRBRANCHCODE
					, T4.BRANCHDESC LOVDESCUSRBRANCHCODENAME
					, T1.USRDEPTCODE
					, T3.DEPTDESC LOVDESCUSRDEPTCODENAME
					, T1.USRTOKEN
					, T1.USRISMULTIBRANCH
					, T1.USRINVLDLOGINTRIES
					, T1.USRDESG
					, T6.DESGDESC LOVDESCUSRDESG
					, T1.BUSINESSVERTICAL
					, T7.CODE BUSINESSVERTICALCODE
					, T7.DESCRIPTION BUSINESSVERTICALDESC
					, T1.VERSION
					, T1.LASTMNTBY
					, T1.LASTMNTON
					, T1.RECORDSTATUS
					, T1.ROLECODE
					, T1.NEXTROLECODE
					, T1.TASKID
					, T1.NEXTTASKID
					, T1.RECORDTYPE
					, T1.WORKFLOWID
					, T1.USRDFTAPPCODE
					, T1.AUTHTYPE
					, T1.USERTYPE
					, T1.ACCESSTOALLBRANCHES
					, T1.LDAPDOMAINNAME
					, T1.DELETED
					, T1.DISABLEREASON
					, T1.EMPLOYEETYPE
					, T1.CREATEDBY
					, T1.CREATEDON
					, T1.APPROVEDBY
					, T1.APPROVEDON
			    FROM SECUSERS T1
			    LEFT JOIN PTAPPLICATIONDETAILS T2 ON T1.USRDFTAPPID = T2.APPID
			    LEFT JOIN BMTDEPARTMENTS T3 ON T1.USRDEPTCODE = T3.DEPTCODE
			    LEFT JOIN RMTBRANCHES T4 ON T1.USRBRANCHCODE = T4.BRANCHCODE
			    LEFT JOIN BMTLANGUAGE T5 ON T1.USRLANGUAGE = T5.LNGCODE
			    LEFT JOIN BMTDESIGNATIONS T6 ON T1.USRDESG = T6.DESGCODE
			    LEFT JOIN BUSINESS_VERTICAL T7 ON T7.ID = T1.BUSINESSVERTICAL
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#84.38_post" author="saikrishna.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'secusers_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#84.39_pre" author="saikrishna.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'secusers_rview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#84.39" author="saikrishna.b">
		<createView viewName="SECUSERS_RVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.USRID
				    , T1.USRLOGIN
				    , T1.USRPWD
				    , T1.USERSTAFFID
				    , T1.USRFNAME
				    , T1.USRMNAME
				    , T1.USRLNAME
				    , T1.USRMOBILE
				    , T1.USREMAIL
				    , T1.USRENABLED
				    , T1.USRCANSIGNONFROM
				    , T1.USRCANSIGNONTO
				    , T1.USRCANOVERRIDELIMITS
				    , T1.USRACEXP
				    , T1.USRACEXPDT
				    , T1.PWDEXPDT
				    , T1.USRACLOCKED
				    , T1.USRLANGUAGE
				    , T5.LNGDESC LOVDESCUSRLANGUAGE
				    , T1.USRDFTAPPID
				    , T2.APPCODE LOVDESCUSRDFTAPPCODE
				    , T2.APPDESCRIPTION LOVDESCUSRDFTAPPCODENAME
				    , T1.USRBRANCHCODE
				    , T4.BRANCHDESC LOVDESCUSRBRANCHCODENAME
				    , T1.USRDEPTCODE
				    , T3.DEPTDESC LOVDESCUSRDEPTCODENAME
				    , T1.USRTOKEN
				    , T1.USRISMULTIBRANCH
				    , T1.USRINVLDLOGINTRIES
				    , T1.USRDESG
				    , T6.DESGDESC LOVDESCUSRDESG
				    , T1.BUSINESSVERTICAL
				    , T7.CODE BUSINESSVERTICALCODE
				    , T7.DESCRIPTION BUSINESSVERTICALDESC
				    , T1.VERSION
				    , T1.LASTMNTBY
				    , T1.LASTMNTON
				    , T1.RECORDSTATUS
				    , T1.ROLECODE
				    , T1.NEXTROLECODE
				    , T1.TASKID
				    , T1.NEXTTASKID
				    , T1.RECORDTYPE
				    , T1.WORKFLOWID
				    , T1.USRDFTAPPCODE
				    , T1.AUTHTYPE
				    , T1.USERTYPE
				    , T1.LDAPDOMAINNAME
				    , T1.DELETED
				    , T1.DISABLEREASON
					, T1.EMPLOYEETYPE
					, T1.CREATEDBY
					, T1.CREATEDON
					, T1.APPROVEDBY
					, T1.APPROVEDON
		        FROM SECUSERS_RTEMP T1
		        JOIN PTAPPLICATIONDETAILS T2 ON T1.USRDFTAPPID = T2.APPID
		        JOIN BMTDEPARTMENTS T3 ON T1.USRDEPTCODE = T3.DEPTCODE
		        JOIN RMTBRANCHES T4 ON T1.USRBRANCHCODE = T4.BRANCHCODE
		        JOIN BMTLANGUAGE T5 ON T1.USRLANGUAGE = T5.LNGCODE
		        JOIN BMTDESIGNATIONS T6 ON T1.USRDESG = T6.DESGCODE
		        LEFT JOIN BUSINESS_VERTICAL T7 ON T7.ID = T1.BUSINESSVERTICAL
				UNION ALL
				SELECT T1.USRID
				    , T1.USRLOGIN
				    , T1.USRPWD
				    , T1.USERSTAFFID
				    , T1.USRFNAME
				    , T1.USRMNAME
				    , T1.USRLNAME
				    , T1.USRMOBILE
				    , T1.USREMAIL
				    , T1.USRENABLED
				    , T1.USRCANSIGNONFROM
				    , T1.USRCANSIGNONTO
				    , T1.USRCANOVERRIDELIMITS
				    , T1.USRACEXP
				    , T1.USRACEXPDT
				    , T1.PWDEXPDT
				    , T1.USRACLOCKED
				    , T1.USRLANGUAGE
				    , T5.LNGDESC LOVDESCUSRLANGUAGE
				    , T1.USRDFTAPPID
				    , T2.APPCODE LOVDESCUSRDFTAPPCODE
				    , T2.APPDESCRIPTION LOVDESCUSRDFTAPPCODENAME
				    , T1.USRBRANCHCODE
				    , T4.BRANCHDESC LOVDESCUSRBRANCHCODENAME
				    , T1.USRDEPTCODE
				    , T3.DEPTDESC LOVDESCUSRDEPTCODENAME
				    , T1.USRTOKEN
				    , T1.USRISMULTIBRANCH
				    , T1.USRINVLDLOGINTRIES
				    , T1.USRDESG
				    , T6.DESGDESC LOVDESCUSRDESG
				    , T1.BUSINESSVERTICAL
				    , T7.CODE BUSINESSVERTICALCODE
				    , T7.DESCRIPTION BUSINESSVERTICALDESC
				    , T1.VERSION
				    , T1.LASTMNTBY
				    , T1.LASTMNTON
				    , T1.RECORDSTATUS
				    , T1.ROLECODE
				    , T1.NEXTROLECODE
				    , T1.TASKID
				    , T1.NEXTTASKID
				    , T1.RECORDTYPE
				    , T1.WORKFLOWID
				    , T1.USRDFTAPPCODE
				    , T1.AUTHTYPE
				    , T1.USERTYPE
				    , T1.LDAPDOMAINNAME
				    , T1.DELETED
				    , T1.DISABLEREASON
					, T1.EMPLOYEETYPE
					, T1.CREATEDBY
					, T1.CREATEDON
					, T1.APPROVEDBY
					, T1.APPROVEDON
			   	FROM SECUSERS T1
			    JOIN PTAPPLICATIONDETAILS T2 ON T1.USRDFTAPPID = T2.APPID
			    JOIN BMTDEPARTMENTS T3 ON T1.USRDEPTCODE = T3.DEPTCODE
			    JOIN RMTBRANCHES T4 ON T1.USRBRANCHCODE = T4.BRANCHCODE
			    JOIN BMTLANGUAGE T5 ON T1.USRLANGUAGE = T5.LNGCODE
		        JOIN BMTDESIGNATIONS T6 ON T1.USRDESG = T6.DESGCODE
		        LEFT JOIN BUSINESS_VERTICAL T7 ON T7.ID = T1.BUSINESSVERTICAL
			    WHERE NOT EXISTS (SELECT 1 FROM SECUSERS_RTEMP  WHERE SECUSERS_RTEMP.USRID = T1.USRID)
			 ]]>
		</createView>
	</changeSet>

	<changeSet id="ST#84.39_post" author="saikrishna.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'secusers_rview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#84.40" author="saikrishna.b">
		<sql>
			<![CDATA[
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID IN (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'SecurityUserDialog_usrDisableReason');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID IN (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'SecurityUserDialog_usrEmployeeType');
				
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'SecurityUserDialog_usrDisableReason';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'SecurityUserDialog_usrEmployeeType';
				
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'SecurityUserDialog_usrDisableReason', 'SecurityUserDialog', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'SecurityUserDialog_usrEmployeeType', 'SecurityUserDialog', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'SECURITYUSER_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'SecurityUserDialog_usrDisableReason'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'SECURITYUSER_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'SecurityUserDialog_usrEmployeeType'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#84.41" author="saikrishna.b">
		<sql>
			<![CDATA[
				INSERT INTO BMTLOVFIELDCODE (FIELDCODE, FIELDCODEDESC, FIELDCODETYPE, FIELDEDIT, ISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ('SU_DISABLE_REASON', 'Reason for disabling Security User', 'String', 1, 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#84.42" author="saikrishna.b">
		<sql>
			<![CDATA[
				INSERT INTO BMTLOVFIELDCODE (FIELDCODE, FIELDCODEDESC, FIELDCODETYPE, FIELDEDIT, ISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ('SU_EMP_TYPE', 'List of employee Types in security user', 'String', 1, 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#84.47" author="saikrishna.b">
		<sql>
			<![CDATA[
		    	DELETE FROM SMTPARAMETERS WHERE SYSPARMCODE = 'USR_DISABLE_DAYS_NEW';
				DELETE FROM SMTPARAMETERS WHERE SYSPARMCODE = 'USR_DISABLE_DAYS_EXISTING';
				DELETE FROM SMTPARAMETERS WHERE SYSPARMCODE = 'ALLOW_USR_LOCKING_JOB';
				DELETE FROM SMTPARAMETERS WHERE SYSPARMCODE = 'ALLOW_USR_DISABLE_JOB';

            	INSERT INTO SMTPARAMETERS (SYSPARMCODE, SYSPARMDESC, SYSPARMTYPE, SYSPARMMAINT, SYSPARMVALUE, SYSPARMLENGTH, SYSPARMDEC, SYSPARMLIST, SYSPARMVALDMOD, SYSPARMDESCRIPTION, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('USR_DISABLE_DAYS_NEW', 'Number of days to disable the user account when the new user is created N number of days ago.', 		'String',   1, '30', 3, 0, NULL, NULL, '', 							  1, 1000, CURRENT_TIMESTAMP,'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SMTPARAMETERS (SYSPARMCODE, SYSPARMDESC, SYSPARMTYPE, SYSPARMMAINT, SYSPARMVALUE, SYSPARMLENGTH, SYSPARMDEC, SYSPARMLIST, SYSPARMVALDMOD, SYSPARMDESCRIPTION, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('USR_DISABLE_DAYS_EXISTING', 'Number of days to disable the user account when the user is not login from the N number of days.', 'String',   1, '90', 3, 0, NULL, NULL, '', 							  1, 1000, CURRENT_TIMESTAMP,'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SMTPARAMETERS (SYSPARMCODE, SYSPARMDESC, SYSPARMTYPE, SYSPARMMAINT, SYSPARMVALUE, SYSPARMLENGTH, SYSPARMDEC, SYSPARMLIST, SYSPARMVALDMOD, SYSPARMDESCRIPTION, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('ALLOW_USR_LOCKING_JOB', 'Allowing user locking job ', 																			'String',	1, 'N',  3 ,0, null, null, 'Allowing user locking job',   1, 1000, CURRENT_TIMESTAMP,'Approved', NULL, NULL, NULL, NULL, NULL, 0);
 				INSERT INTO SMTPARAMETERS (SYSPARMCODE, SYSPARMDESC, SYSPARMTYPE, SYSPARMMAINT, SYSPARMVALUE, SYSPARMLENGTH, SYSPARMDEC, SYSPARMLIST, SYSPARMVALDMOD, SYSPARMDESCRIPTION, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('ALLOW_USR_DISABLE_JOB', 'Allowing user disabling job ', 																		'String',   1, 'N',  3, 0, null, null, 'Allowing user disabling job', 1, 1000, CURRENT_TIMESTAMP,'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#84.44" author="saikrishna.b">
		<sql>
			<![CDATA[
				DELETE FROM ERRORDETAILS WHERE CODE = '93303';
				DELETE FROM ERRORDETAILS WHERE CODE = '93304';
				DELETE FROM ERRORDETAILS WHERE CODE = '93305';
				DELETE FROM ERRORDETAILS WHERE CODE = '93306';
				DELETE FROM ERRORDETAILS WHERE CODE = '93307';
				DELETE FROM ERRORDETAILS WHERE CODE = '90007';
				DELETE FROM ERRORDETAILS WHERE CODE = '90008';
				DELETE FROM ERRORDETAILS WHERE CODE = '90009';
				DELETE FROM ERRORDETAILS WHERE CODE = '90010';
				
				INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION) VALUES('93303', 'EN', 'E', 'No records found with User ID {0}', 										     NULL, 						'Approved', NULL, NULL, NULL, NULL, NULL, 0, CURRENT_TIMESTAMP, 1000, 0);
				INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION) VALUES('93304', 'EN', 'E', 'Invalid {0}', 															     NULL, 						'Approved', NULL, NULL, NULL, NULL, NULL, 0, CURRENT_TIMESTAMP, 1000, 0);
				INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION) VALUES('93305', 'EN', 'E', 'Operation with Code {0} is not assigned for User with User Login {1}',        NULL, 						'Approved', NULL, NULL, NULL, NULL, NULL, 0, CURRENT_TIMESTAMP, 1000, 0);
				INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION) VALUES('93306', 'EN', 'E', 'Operation with Code {0} is already assigned for User with User Login {1}',    NULL, 						'Approved', NULL, NULL, NULL, NULL, NULL, 0, CURRENT_TIMESTAMP, 1000, 0);
				INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION) VALUES('93307', 'EN', 'E', 'User ID {0} is not matched for the User Login {1}',                         	 NULL, 						'Approved', NULL, NULL, NULL, NULL, NULL, 0, CURRENT_TIMESTAMP, 1000, 0);
				INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION) VALUES('90007', 'EN', 'W', 'No records found with User Login {0}.',                                       'Cannot proceed further',  'Approved', NULL, NULL, NULL, NULL, NULL, 0, CURRENT_TIMESTAMP, 1000, 0);
				INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION) VALUES('90008', 'EN', 'W', 'You are not authorized to change the data, Once it is expired.',              'Cannot proceed further',  'Approved', NULL, NULL, NULL, NULL, NULL, 0, CURRENT_TIMESTAMP, 1000, 0);
				INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION) VALUES('90009', 'EN', 'W', 'It is under Maintainance: {0}. You are not allowed to maintain this record.', 'Cannot proceed further',  'Approved', NULL, NULL, NULL, NULL, NULL, 0, CURRENT_TIMESTAMP, 1000, 0);
				INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION) VALUES('90010', 'EN', 'E', '{0} is not configured', 														 NULL, 						'Approved', NULL, NULL, NULL, NULL, NULL, 0, CURRENT_TIMESTAMP, 1000, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#84.45" author="Mounika.M">
		<sql>
			<![CDATA[
				DELETE FROM TEMPLATEFIELDS WHERE MODULE = 'OTP' AND FIELD = 'otp';
				DELETE FROM TEMPLATEFIELDS WHERE MODULE = 'OTP' AND FIELD = 'user_name';
				DELETE FROM TEMPLATEFIELDS WHERE MODULE = 'OTP' AND FIELD = 'otp_validity';
				
				INSERT INTO TEMPLATEFIELDS (MODULE, FIELD, FIELDDESC, FIELDFORMAT, EVENT) VALUES ('OTP', 'otp', 'OTP', 'A', 'OTP');
				INSERT INTO TEMPLATEFIELDS (MODULE, FIELD, FIELDDESC, FIELDFORMAT, EVENT) VALUES ('OTP', 'user_name', 'User Name', 'A', 'OTP');
                INSERT INTO TEMPLATEFIELDS (MODULE, FIELD, FIELDDESC, FIELDFORMAT, EVENT) VALUES ('OTP', 'otp_validity', 'OTP Validity', 'A', 'OTP');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#84.46" author="Mounika.M" dbms="postgresql">
		<sql>
			<![CDATA[
				INSERT INTO TEMPLATES (TEMPLATEID, TEMPLATEFOR, MODULE, TEMPLATECODE, TEMPLATEDESC, SMSTEMPLATE, SMSCONTENT, EMAILTEMPLATE, EMAILCONTENT, EMAILFORMAT, EMAILSUBJECT, EMAILSENDTO, TURNAROUNDTIME, REPEAT, ACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, EVENT) VALUES((Select COALESCE(MAX(TEMPLATEID), 0)+1 from TEMPLATES), 'SU', 'OTP', 'RESPWD_OTP', 'Reset Password', 1, 'Dear User your OTP', 1, 'Dear User Your OTP is.', 'H', 'LOGIN OTP', null, 0, 0, 1, 2, 1000, CURRENT_TIMESTAMP, 'Approved', '', '', '', '', '', 0, 'OTP');
				INSERT INTO TEMPLATES (TEMPLATEID, TEMPLATEFOR, MODULE, TEMPLATECODE, TEMPLATEDESC, SMSTEMPLATE, SMSCONTENT, EMAILTEMPLATE, EMAILCONTENT, EMAILFORMAT, EMAILSUBJECT, EMAILSENDTO, TURNAROUNDTIME, REPEAT, ACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, EVENT) VALUES((Select COALESCE(MAX(TEMPLATEID), 0)+1 from TEMPLATES), 'SU', 'OTP', 'TWO_FACTOR_OTP', 'Two Factor Authentication', 1, 'Dear User Your OTP', 1, 'Dear User Your OTP is.', 'H', 'LOGIN OTP', null, 0, 0, 1, 2, 1000, CURRENT_TIMESTAMP, 'Approved', '', '', '', '', '', 0, 'OTP');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#84.46" author="Mounika.M" dbms="mssql">
		<sql>
			<![CDATA[
				INSERT INTO TEMPLATES (TEMPLATEID, TEMPLATEFOR, MODULE, TEMPLATECODE, TEMPLATEDESC, SMSTEMPLATE, SMSCONTENT, EMAILTEMPLATE, EMAILCONTENT, EMAILFORMAT, EMAILSUBJECT, EMAILSENDTO, TURNAROUNDTIME, REPEAT, ACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, EVENT) VALUES((Select COALESCE(MAX(TEMPLATEID), 0)+1 from TEMPLATES), 'SU', 'OTP', 'RESPWD_OTP', 'Reset Password', 1, 'Dear User your OTP', 1, (Convert(varbinary(max),'Dear User Your OTP is.')), 'H', 'LOGIN OTP', null, 0, 0, 1, 2, 1000, CURRENT_TIMESTAMP, 'Approved', '', '', '', '', '', 0, 'OTP');
				INSERT INTO TEMPLATES (TEMPLATEID, TEMPLATEFOR, MODULE, TEMPLATECODE, TEMPLATEDESC, SMSTEMPLATE, SMSCONTENT, EMAILTEMPLATE, EMAILCONTENT, EMAILFORMAT, EMAILSUBJECT, EMAILSENDTO, TURNAROUNDTIME, REPEAT, ACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, EVENT) VALUES((Select COALESCE(MAX(TEMPLATEID), 0)+1 from TEMPLATES), 'SU', 'OTP', 'TWO_FACTOR_OTP', 'Two Factor Authentication', 1,'Dear User Your OTP', 1, (Convert(varbinary(max),'Dear User Your OTP is.')), 'H', 'LOGIN OTP', null, 0, 0, 1, 2, 1000, CURRENT_TIMESTAMP, 'Approved', '', '', '', '', '', 0, 'OTP');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#84.46" author="Mounika.M" dbms="oracle">
		<sql>
			<![CDATA[
				INSERT INTO TEMPLATES (TEMPLATEID, TEMPLATEFOR, MODULE, TEMPLATECODE, TEMPLATEDESC, SMSTEMPLATE, SMSCONTENT, EMAILTEMPLATE, EMAILCONTENT, EMAILFORMAT, EMAILSUBJECT, EMAILSENDTO, TURNAROUNDTIME, REPEAT, ACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, EVENT) VALUES((Select COALESCE(MAX(TEMPLATEID), 0)+1 from TEMPLATES), 'SU', 'OTP', 'RESPWD_OTP', 'Reset Password', 1, 'Dear User your OTP', 1, utl_raw.cast_to_raw('Dear User Your OTP is.'), 'H', 'LOGIN OTP', null, 0, 0, 1, 2, 1000, CURRENT_TIMESTAMP, 'Approved', '', '', '', '', '', 0, 'OTP');
				INSERT INTO TEMPLATES (TEMPLATEID, TEMPLATEFOR, MODULE, TEMPLATECODE, TEMPLATEDESC, SMSTEMPLATE, SMSCONTENT, EMAILTEMPLATE, EMAILCONTENT, EMAILFORMAT, EMAILSUBJECT, EMAILSENDTO, TURNAROUNDTIME, REPEAT, ACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, EVENT) VALUES((Select COALESCE(MAX(TEMPLATEID), 0)+1 from TEMPLATES), 'SU', 'OTP', 'TWO_FACTOR_OTP', 'Two Factor Authentication', 1, 'Dear User Your OTP', 1, utl_raw.cast_to_raw('Dear User Your OTP is.'), 'H', 'LOGIN OTP', null, 0, 0, 1, 2, 1000, CURRENT_TIMESTAMP, 'Approved', '', '', '', '', '', 0, 'OTP');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#166.1" author="ganeshdurga.n">
		<createTable tableName="USER_ACCESS_AUDIT">
			<column name="Id" type="bigint" autoIncrement="true">
				<constraints nullable="false" />
			</column>
			<column name="UsrLoginId" type="bigint" />
			<column name="MenuItem" type="varchar(200)" />
			<column name="Module" type="varchar(200)" />
			<column name="Reference" type="varchar(200)" />
			<column name="Role" type="varchar(200)" />
			<column name="AccessedBy" type="bigint" />
			<column name="AccessedOn" type="datetime" />
		</createTable>
	</changeSet>

	<changeSet id="ST#166.2" author="ganeshdurga.n">
		<addPrimaryKey constraintName="PK_USER_ACCESS_AUDIT" tableName="USER_ACCESS_AUDIT" columnNames="Id" />
	</changeSet>

	<changeSet id="ST#166.3" author="ganeshdurga.n">
		<addForeignKeyConstraint baseColumnNames="AccessedBy" baseTableName="USER_ACCESS_AUDIT"
			constraintName="FK_SECUSERS_ACCESSEDBY" referencedColumnNames="USRID" referencedTableName="SECUSERS" />
	</changeSet>

	<changeSet id="ST#103.1" author="vasudevarao.s">
		<addColumn tableName="FEETYPES">
			<column name="PayableLinkTo" type="varchar(30)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#103.2" author="vasudevarao.s">
		<addColumn tableName="FEETYPES">
			<column name="RecvFeeTypeId" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#103.3" author="vasudevarao.s">
		<sql>
			<![CDATA[	
				UPDATE FEETYPES SET RECVFEETYPEID = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#103.4" author="vasudevarao.s" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE FEETYPES ADD CONSTRAINT DF_FT_RECVFEETYPEID DEFAULT 0 FOR RECVFEETYPEID;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#103.4" author="vasudevarao.s" dbms="postgresql, oracle">
		<addDefaultValue columnName="RecvFeeTypeId" tableName="FeeTypes" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#103.5" author="vasudevarao.s">
		<addColumn tableName="FEETYPES_TEMP">
			<column name="PayableLinkTo" type="varchar(30)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#103.6" author="vasudevarao.s">
		<addColumn tableName="FEETYPES_TEMP">
			<column name="RecvFeeTypeId" type="Bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#103.7" author="vasudevarao.s">
		<sql>
			<![CDATA[	
				UPDATE FEETYPES_TEMP SET RECVFEETYPEID = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#103.8" author="vasudevarao.s" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE FEETYPES_TEMP ADD CONSTRAINT DF_FT_T_RECVFEETYPEID DEFAULT 0 FOR RECVFEETYPEID;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#103.8" author="vasudevarao.s" dbms="postgresql, oracle">
		<addDefaultValue columnName="RecvFeeTypeId" tableName="FEETYPES_TEMP" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#103.9_pre" author="vasudevarao.s" dbms="postgresql">
		<sql>
		<![CDATA[
			select deps_save_and_drop_dependencies ('plf', 'feetypes_aview');
		]]>
		</sql>
	</changeSet>

	<changeSet id="ST#103.9" author="vasudevarao.s">
		<createView viewName="FEETYPES_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FEETYPEID
					, T1.FEETYPECODE
					, T1.FEETYPEDESC
					, T1.MANUALADVICE
					, T1.REFUNDABLE
					, T1.ADVISETYPE
					, T1.ACCOUNTSETID
					, T1.HOSTFEETYPECODE
					, T1.TAXAPPLICABLE
					, T1.TAXCOMPONENT
					, T1.ACTIVE
					, T1.VERSION
					, T1.LASTMNTBY
					, T1.LASTMNTON
					, T1.RECORDSTATUS
					, T1.ROLECODE
					, T1.NEXTROLECODE
					, T1.TASKID
					, T1.NEXTTASKID
					, T1.RECORDTYPE
					, T1.WORKFLOWID
					, T2.ACCOUNTSETCODE
					, T2.ACCOUNTSETCODENAME
					, T1.AMORTZREQ
					, T1.DUEACCREQ
					, T1.DUEACCSET
	        		, T3.ACCOUNTSETCODE DUEACCTSETCODE
					, T3.ACCOUNTSETCODENAME DUEACCTSETCODENAME
					, T1.TDSREQ
					, T1.FEEINCOMEOREXPENSE 
		    		, T1.ACTYPE 
		    		, T4.ACTYPEDESC
					, T1.PAYABLELINKTO
					, T1.RECVFEETYPEID
				FROM FEETYPES T1
				LEFT JOIN RMTACCOUNTINGSET T2 ON T2.ACCOUNTSETID = T1.ACCOUNTSETID
          		LEFT JOIN RMTACCOUNTINGSET T3 ON T3.ACCOUNTSETID = T1.DUEACCSET
          		LEFT JOIN RMTACCOUNTTYPES T4 ON T4.ACTYPE = T1.ACTYPE
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#103.9_post" author="vasudevarao.s" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'feetypes_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#103.10_pre" author="vasudevarao.s" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'feetypes_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#103.10" author="vasudevarao.s">
		<createView viewName="FEETYPES_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FEETYPEID
					, T1.FEETYPECODE
					, T1.FEETYPEDESC
					, T1.MANUALADVICE
					, T1.REFUNDABLE
					, T1.ADVISETYPE
					, T1.ACCOUNTSETID
					, T1.HOSTFEETYPECODE
					, T1.TAXAPPLICABLE
					, T1.TAXCOMPONENT
					, T1.ACTIVE
					, T1.VERSION
					, T1.LASTMNTBY
					, T1.LASTMNTON
					, T1.RECORDSTATUS
					, T1.ROLECODE
					, T1.NEXTROLECODE
					, T1.TASKID
					, T1.NEXTTASKID
					, T1.RECORDTYPE
					, T1.WORKFLOWID
					, T2.ACCOUNTSETCODE
					, T2.ACCOUNTSETCODENAME
					, T1.AMORTZREQ
					, T1.DUEACCREQ
					, T1.DUEACCSET
	        		, T3.ACCOUNTSETCODE DUEACCTSETCODE
					, T3.ACCOUNTSETCODENAME DUEACCTSETCODENAME
					, T1.TDSREQ
					, T1.FEEINCOMEOREXPENSE 
		    		, T1.ACTYPE 
		    		, T4.ACTYPEDESC
					, T1.PAYABLELINKTO
					, T1.RECVFEETYPEID
				FROM FEETYPES_TEMP T1
				LEFT JOIN RMTACCOUNTINGSET T2 ON T2.ACCOUNTSETID = T1.ACCOUNTSETID
           		LEFT JOIN RMTACCOUNTINGSET T3 ON T3.ACCOUNTSETID = T1.DUEACCSET
           		LEFT JOIN RMTACCOUNTTYPES T4 ON T4.ACTYPE = T1.ACTYPE
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#103.10_post" author="vasudevarao.s" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'feetypes_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#103.11_pre" author="vasudevarao.s" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'feetypes_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#103.11" author="vasudevarao.s">
		<createView viewName="FEETYPES_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FEETYPEID
					, T1.FEETYPECODE
					, T1.FEETYPEDESC
					, T1.MANUALADVICE
					, T1.REFUNDABLE
					, T1.ADVISETYPE
					, T1.ACCOUNTSETID
					, T1.HOSTFEETYPECODE
					, T1.TAXAPPLICABLE
					, T1.TAXCOMPONENT
					, T1.ACTIVE
					, T1.VERSION
					, T1.LASTMNTBY
					, T1.LASTMNTON
					, T1.RECORDSTATUS
					, T1.ROLECODE
					, T1.NEXTROLECODE
					, T1.TASKID
					, T1.NEXTTASKID
					, T1.RECORDTYPE
					, T1.WORKFLOWID
					, T2.ACCOUNTSETCODE
					, T2.ACCOUNTSETCODENAME
					, T1.AMORTZREQ
					, T1.DUEACCREQ
					, T1.DUEACCSET
					, T3.ACCOUNTSETCODE DUEACCTSETCODE
					, T3.ACCOUNTSETCODENAME DUEACCTSETCODENAME
					, T1.TDSREQ
					, T1.FEEINCOMEOREXPENSE 
					, T1.ACTYPE 
					, T4.ACTYPEDESC
					, T1.PAYABLELINKTO
					, T1.RECVFEETYPEID
					, T5.FEETYPEDESC RECVFEETYPEDESC
					, T5.FEETYPECODE RECVFEETYPECODE
				FROM FEETYPES_TEMP T1
				LEFT JOIN RMTACCOUNTINGSET T2 ON T2.ACCOUNTSETID = T1.ACCOUNTSETID
				LEFT JOIN RMTACCOUNTINGSET T3 ON T3.ACCOUNTSETID = T1.DUEACCSET
				LEFT JOIN RMTACCOUNTTYPES T4 ON T4.ACTYPE = T1.ACTYPE
				LEFT JOIN FEETYPES T5 ON T5.FEETYPEID = T1.RECVFEETYPEID
				UNION ALL
				SELECT T1.FEETYPEID
					, T1.FEETYPECODE
					, T1.FEETYPEDESC
					, T1.MANUALADVICE
					, T1.REFUNDABLE
					, T1.ADVISETYPE
					, T1.ACCOUNTSETID
					, T1.HOSTFEETYPECODE
					, T1.TAXAPPLICABLE
					, T1.TAXCOMPONENT
					, T1.ACTIVE
					, T1.VERSION
					, T1.LASTMNTBY
					, T1.LASTMNTON
					, T1.RECORDSTATUS
					, T1.ROLECODE
					, T1.NEXTROLECODE
					, T1.TASKID
					, T1.NEXTTASKID
					, T1.RECORDTYPE
					, T1.WORKFLOWID
					, T2.ACCOUNTSETCODE
					, T2.ACCOUNTSETCODENAME
					, T1.AMORTZREQ
					, T1.DUEACCREQ
					, T1.DUEACCSET
					, T3.ACCOUNTSETCODE DUEACCTSETCODE
					, T3.ACCOUNTSETCODENAME DUEACCTSETCODENAME
					, T1.TDSREQ
					, T1.FEEINCOMEOREXPENSE 
					, T1.ACTYPE 
					, T4.ACTYPEDESC
					, T1.PAYABLELINKTO
					, T1.RECVFEETYPEID
					, T5.FEETYPEDESC RECVFEETYPEDESC
					, T5.FEETYPECODE RECVFEETYPECODE
				FROM FEETYPES T1
				LEFT JOIN RMTACCOUNTINGSET T2 ON T2.ACCOUNTSETID = T1.ACCOUNTSETID
				LEFT JOIN RMTACCOUNTINGSET T3 ON T3.ACCOUNTSETID = T1.DUEACCSET
				LEFT JOIN RMTACCOUNTTYPES T4 ON T4.ACTYPE = T1.ACTYPE
				LEFT JOIN FEETYPES T5 ON T5.FEETYPEID = T1.RECVFEETYPEID
				WHERE NOT EXISTS (SELECT 1 FROM FEETYPES_TEMP WHERE FEETYPES_TEMP.FEETYPEID = T1.FEETYPEID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#103.11_post" author="vasudevarao.s" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'feetypes_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#103.12_pre" author="vasudevarao.s" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'manualadvise_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#103.12" author="vasudevarao.s">
		<createView viewName="MANUALADVISE_AVIEW" replaceIfExists="true">
			<![CDATA[
	 			SELECT T1.ADVISEID
					, T1.ADVISETYPE
					, FM.FINID
					, FM.FINREFERENCE
					, T1.FEETYPEID
					, T1.SEQUENCE
					, T1.ADVISEAMOUNT
					, T1.PAIDAMOUNT
					, T1.WAIVEDAMOUNT
					, T1.REMARKS
					, T1.VALUEDATE
					, T1.POSTDATE
					, T1.VERSION
					, T1.LASTMNTBY
					, T1.LASTMNTON
					, T1.RECORDSTATUS
					, T1.ROLECODE
					, T1.NEXTROLECODE
					, T1.TASKID
					, T1.NEXTTASKID
					, T1.RECORDTYPE
					, T1.WORKFLOWID
					, T2.FEETYPEDESC
					, T2.FEETYPECODE
					, T1.BOUNCEID
					, T1.RECEIPTID
					, T3.BOUNCECODE
					, T1.RESERVEDAMT
					, T1.BALANCEAMT
					, T3.REASON BOUNCECODEDESC
					, COALESCE(T2.TAXAPPLICABLE, 0) TAXAPPLICABLE
					, COALESCE(T2.TDSREQ, 0) TDSREQ
					, T2.TAXCOMPONENT
					, T1.PAIDCGST
					, T1.PAIDSGST
					, T1.PAIDIGST
					, T1.PAIDUGST
					, T1.WAIVEDCGST
					, T1.WAIVEDSGST
					, T1.WAIVEDUGST
					, T1.WAIVEDIGST
					, T1.WAIVEDCESS
					, T1.PAIDCESS
					, T1.FINSOURCE
					, T1.DUECREATION
					, T1.LINKEDTRANID
					, T1.TDSPAID
					, T1.HOLDDUE
					, T1.PRESENTMENTID
					, T1.STATUS
					, T1.REASON
					, T1.DUEDATE
					, T2.PAYABLELINKTO
				FROM MANUALADVISE T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
				LEFT JOIN BOUNCEREASONS T3 ON T1.BOUNCEID = T3.BOUNCEID
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#103.12_post" author="vasudevarao.s" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'manualadvise_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#103.13_pre" author="vasudevarao.s" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'manualadvise_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#103.13" author="vasudevarao.s">
		<createView viewName="MANUALADVISE_VIEW" replaceIfExists="true">
			<![CDATA[
	 			SELECT T1.ADVISEID
					, T1.ADVISETYPE
					, FM.FINID
					, FM.FINREFERENCE
					, T1.FEETYPEID
					, T1.SEQUENCE
					, T1.ADVISEAMOUNT
					, T1.PAIDAMOUNT
					, T1.WAIVEDAMOUNT
					, T1.REMARKS
					, T1.VALUEDATE
					, T1.POSTDATE
					, T1.VERSION
					, T1.LASTMNTBY
					, T1.LASTMNTON
					, T1.RECORDSTATUS
					, T1.ROLECODE
					, T1.NEXTROLECODE
					, T1.TASKID
					, T1.NEXTTASKID
					, T1.RECORDTYPE
					, T1.WORKFLOWID
					, T2.FEETYPEDESC
					, T2.FEETYPECODE
					, T1.BOUNCEID
					, T1.RECEIPTID
					, T3.BOUNCECODE
					, T1.RESERVEDAMT
					, T1.BALANCEAMT
					, T3.REASON BOUNCECODEDESC
					, COALESCE(T2.TAXAPPLICABLE, 0) TAXAPPLICABLE
					, T2.TAXCOMPONENT
					, COALESCE(T2.TDSREQ, 0) TDSREQ
					, T1.PAIDCGST
					, T1.PAIDSGST
					, T1.PAIDIGST
					, T1.PAIDUGST
					, T1.WAIVEDCGST
					, T1.WAIVEDSGST
					, T1.WAIVEDUGST
					, T1.WAIVEDIGST
					, T1.WAIVEDCESS
					, T1.PAIDCESS
					, T1.FINSOURCE
					, T1.DUECREATION
					, T1.LINKEDTRANID
					, T1.TDSPAID
					, T1.HOLDDUE
					, T1.PRESENTMENTID
					, T1.STATUS
					, T1.REASON
					, T1.DUEDATE
					, T2.PAYABLELINKTO
				FROM MANUALADVISE_TEMP T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
				LEFT JOIN BOUNCEREASONS T3 ON T1.BOUNCEID = T3.BOUNCEID
				UNION ALL
				SELECT T1.ADVISEID
					, T1.ADVISETYPE
					, FM.FINID
					, FM.FINREFERENCE
					, T1.FEETYPEID
					, T1.SEQUENCE
					, T1.ADVISEAMOUNT
					, T1.PAIDAMOUNT
					, T1.WAIVEDAMOUNT
					, T1.REMARKS
					, T1.VALUEDATE
					, T1.POSTDATE
					, T1.VERSION
					, T1.LASTMNTBY
					, T1.LASTMNTON
					, T1.RECORDSTATUS
					, T1.ROLECODE
					, T1.NEXTROLECODE
					, T1.TASKID
					, T1.NEXTTASKID
					, T1.RECORDTYPE
					, T1.WORKFLOWID
					, T2.FEETYPEDESC
					, T2.FEETYPECODE
					, T1.BOUNCEID
					, T1.RECEIPTID
					, T3.BOUNCECODE
					, T1.RESERVEDAMT
					, T1.BALANCEAMT
					, T3.REASON BOUNCECODEDESC
					, COALESCE(T2.TAXAPPLICABLE, 0) TAXAPPLICABLE
					, T2.TAXCOMPONENT
					, COALESCE(T2.TDSREQ, 0) TDSREQ
					, T1.PAIDCGST
					, T1.PAIDSGST
					, T1.PAIDIGST
					, T1.PAIDUGST
					, T1.WAIVEDCGST
					, T1.WAIVEDSGST
					, T1.WAIVEDUGST
					, T1.WAIVEDIGST
					, T1.WAIVEDCESS
					, T1.PAIDCESS
					, T1.FINSOURCE
					, T1.DUECREATION
					, T1.LINKEDTRANID
					, T1.TDSPAID
					, T1.HOLDDUE
					, T1.PRESENTMENTID
					, T1.STATUS
					, T1.REASON
					, T1.DUEDATE
					, T2.PAYABLELINKTO
				FROM MANUALADVISE T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
				LEFT JOIN BOUNCEREASONS T3 ON T1.BOUNCEID = T3.BOUNCEID
				WHERE NOT EXISTS (SELECT 1 FROM MANUALADVISE_TEMP
				WHERE MANUALADVISE_TEMP.ADVISEID = T1.ADVISEID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#103.13_post" author="vasudevarao.s" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'manualadvise_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#103.14_pre" author="vasudevarao.s" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'manualadvise_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#103.14" author="vasudevarao.s">
		<createView viewName="MANUALADVISE_TVIEW" replaceIfExists="true">
			<![CDATA[
	 			SELECT T1.ADVISEID
					, T1.ADVISETYPE
					, FM.FINID
					, FM.FINREFERENCE
					, T1.FEETYPEID
					, T1.SEQUENCE
					, T1.ADVISEAMOUNT
					, T1.PAIDAMOUNT
					, T1.WAIVEDAMOUNT
					, T1.REMARKS
					, T1.VALUEDATE
					, T1.POSTDATE
					, T1.VERSION
					, T1.LASTMNTBY
					, T1.LASTMNTON
					, T1.RECORDSTATUS
					, T1.ROLECODE
					, T1.NEXTROLECODE
					, T1.TASKID
					, T1.NEXTTASKID
					, T1.RECORDTYPE
					, T1.WORKFLOWID
					, T2.FEETYPEDESC
					, T2.FEETYPECODE
					, T1.BOUNCEID
					, T1.RECEIPTID
					, T3.BOUNCECODE
					, T1.RESERVEDAMT
					, T1.BALANCEAMT
					, T3.REASON AS BOUNCECODEDESC
					, COALESCE(T2.TAXAPPLICABLE, 0) TAXAPPLICABLE
					, COALESCE(T2.TDSREQ, 0) TDSREQ
					, T2.TAXCOMPONENT
					, T1.PAIDCGST
					, T1.PAIDSGST
					, T1.PAIDIGST
					, T1.PAIDUGST
					, T1.WAIVEDCGST
					, T1.WAIVEDSGST
					, T1.WAIVEDUGST
					, T1.WAIVEDIGST
					, T1.WAIVEDCESS
					, T1.PAIDCESS
					, T1.FINSOURCE
					, T1.DUECREATION
					, T1.LINKEDTRANID
					, T1.TDSPAID
					, T1.HOLDDUE
					, T1.PRESENTMENTID
					, T1.STATUS
					, T1.REASON
					, T1.DUEDATE
					, T2.PAYABLELINKTO
				FROM MANUALADVISE_TEMP T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
				LEFT JOIN BOUNCEREASONS T3 ON T1.BOUNCEID = T3.BOUNCEID
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#103.14_post" author="vasudevarao.s" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'manualadvise_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#103.15" author="vasudevarao.s">
		<sql>
			<![CDATA[
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FEETYPE_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'FeeTypeDialog_PayableLinkTo');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FEETYPE_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'FeeTypeDialog_ReceivableType');

				DELETE FROM SECRIGHTS WHERE RightName = 'FeeTypeDialog_AdviseCategory';
				DELETE FROM SECRIGHTS WHERE RightName = 'FeeTypeDialog_ReceivableType';

				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'FeeTypeDialog_PayableLinkTo','FeeTypeDialog', 0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'FeeTypeDialog_ReceivableType','FeeTypeDialog', 0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);

				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FEETYPE_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'FeeTypeDialog_PayableLinkTo'),  1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FEETYPE_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'FeeTypeDialog_ReceivableType'), 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
	 		]]>
		</sql>
	</changeSet>

	<changeSet id="ST#103.16" author="vasudevarao.s">
		<sql>
			<![CDATA[ 
				DELETE FROM ERRORDETAILS WHERE CODE = '90006';
			
				INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID,NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION) VALUES(90006, 'EN', 'W', 'This combination of data is already exists. Try another.', 'Cannot proceed further', 'Approved', NULL, NULL, NULL, NULL, NULL, 0, CURRENT_TIMESTAMP, 1000, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#76.1" author="saikiran.n">
		<addColumn tableName="Mandates_Temp">
			<column name="SwapEffectiveDate" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#76.2" author="saikiran.n">
		<addColumn tableName="Mandates_Temp">
			<column name="HoldReason" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#76.3" author="saikiran.n">
		<addColumn tableName="Mandates_Temp">
			<column name="SecurityMandate" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#76.3.1_post" author="saikiran.n">
		<sql>
			<![CDATA[  
				UPDATE Mandates_Temp SET SecurityMandate = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#76.3_post" author="saikiran.n" dbms="postgresql, oracle">
		<addDefaultValue columnName="SecurityMandate" tableName="Mandates_Temp" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#76.3_post" author="saikiran.n" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE MANDATES_TEMP ADD CONSTRAINT DF_MANDATES_TEMP_SECMANDATE DEFAULT 0 FOR SecurityMandate;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#76.4" author="saikiran.n">
		<addColumn tableName="Mandates_Temp">
			<column name="EmployeeID" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#76.5" author="saikiran.n">
		<addColumn tableName="Mandates_Temp">
			<column name="EmployerName" type="varchar(200)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#76.6" author="saikiran.n">
		<addForeignKeyConstraint constraintName="fk_mandates_temp_holdreason"
			referencedTableName="BounceReasons" baseColumnNames="HoldReason" baseTableName="Mandates_Temp"
			referencedColumnNames="BounceId" />
	</changeSet>

	<changeSet id="ST#76.7" author="saikiran.n">
		<addForeignKeyConstraint constraintName="fk_mandates_temp_employeeid"
			referencedTableName="EmployerDetail" baseColumnNames="EmployeeID" baseTableName="Mandates_Temp"
			referencedColumnNames="employerid" />
	</changeSet>

	<changeSet id="ST#76.11" author="saikiran.n">
		<addNotNullConstraint tableName="MANDATES_TEMP" columnName="SecurityMandate"
			columnDataType="boolean" />
	</changeSet>

	<changeSet id="ST#76.12" author="saikiran.n">
		<addColumn tableName="Mandates">
			<column name="SwapEffectiveDate" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#76.13" author="saikiran.n">
		<addColumn tableName="Mandates">
			<column name="HoldReason" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#76.14" author="saikiran.n">
		<addColumn tableName="Mandates">
			<column name="SecurityMandate" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#76.14.1_post" author="saikiran.n">
		<sql>
			<![CDATA[  
				UPDATE Mandates SET SecurityMandate = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#76.14_post" author="saikiran.n" dbms="postgresql, oracle">
		<addDefaultValue columnName="SecurityMandate" tableName="Mandates" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#76.14_post" author="saikiran.n" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE Mandates ADD CONSTRAINT DF_MANDATES_SECMANDATE DEFAULT 0 FOR SecurityMandate;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#76.15" author="saikiran.n">
		<addColumn tableName="Mandates">
			<column name="EmployeeID" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#76.16" author="saikiran.n">
		<addColumn tableName="Mandates">
			<column name="EmployerName" type="varchar(200)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#76.17" author="saikiran.n">
		<addForeignKeyConstraint constraintName="fk_mandates_holdreason"
			referencedTableName="BounceReasons" baseColumnNames="HoldReason" baseTableName="Mandates"
			referencedColumnNames="BounceId" />
	</changeSet>

	<changeSet id="ST#76.18" author="saikiran.n">
		<addForeignKeyConstraint constraintName="fk_mandates_employeeid"
			referencedTableName="EmployerDetail" baseColumnNames="EmployeeID" baseTableName="Mandates"
			referencedColumnNames="employerid" />
	</changeSet>

	<changeSet id="ST#76.21" author="saikiran.n">
		<addNotNullConstraint tableName="MANDATES" columnName="SECURITYMANDATE" columnDataType="boolean" />
	</changeSet>

	<changeSet id="ST#76.25" author="saikiran.n">
		<sql>
			<![CDATA[
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='MANDATE_MAKER')  AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'MandateDialog_ExternalMandate');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='MANDATES_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'MandateDialog_ExternalMandate');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='MANDATE_MAKER')  AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'MandateDialog_SwapEffectiveDate');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='MANDATES_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'MandateDialog_SwapEffectiveDate');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='MANDATE_MAKER')  AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'MandateDialog_HoldReason');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='MANDATES_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'MandateDialog_HoldReason');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='MANDATE_MAKER')  AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'MandateDialog_SecurityMandate');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='MANDATES_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'MandateDialog_SecurityMandate');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='MANDATE_MAKER')  AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'MandateDialog_EmployeeID');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='MANDATES_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'MandateDialog_EmployeeID');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='MANDATE_MAKER')  AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'MandateDialog_EmployerName');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='MANDATES_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'MandateDialog_EmployerName');
				
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'MandateDialog_ExternalMandate';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'MandateDialog_SwapEffectiveDate';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'MandateDialog_HoldReason';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'MandateDialog_SecurityMandate';
				DELETE FROM SECRIGHTS where RIGHTNAME = 'MandateDialog_EmployeeID';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'MandateDialog_EmployerName';
			    
			    INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'MandateDialog_ExternalMandate',    'MandateDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'MandateDialog_SwapEffectiveDate',  'MandateDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'MandateDialog_HoldReason', 		'MandateDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'MandateDialog_SecurityMandate', 	'MandateDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'MandateDialog_EmployeeID', 		'MandateDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'MandateDialog_EmployerName', 		'MandateDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'MANDATE_MAKER'),  (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'MandateDialog_ExternalMandate'),   1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'MANDATES_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'MandateDialog_ExternalMandate'),   1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'MANDATE_MAKER'),  (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'MandateDialog_SwapEffectiveDate'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'MANDATES_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'MandateDialog_SwapEffectiveDate'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'MANDATE_MAKER'),  (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'MandateDialog_HoldReason'), 		  1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'MANDATES_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'MandateDialog_HoldReason'), 		  1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'MANDATE_MAKER'),  (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'MandateDialog_SecurityMandate'),   1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'MANDATES_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'MandateDialog_SecurityMandate'),   1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'MANDATE_MAKER'),  (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'MandateDialog_EmployeeID'), 		  1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'MANDATES_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'MandateDialog_EmployeeID'), 		  1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'MANDATE_MAKER'),  (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'MandateDialog_EmployerName'), 	  1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'MANDATES_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'MandateDialog_EmployerName'), 	  1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#76.26" author="saikiran.n">
		<sql>
			<![CDATA[
				DELETE FROM SMTPARAMETERS WHERE SYSPARMCODE = 'MANDATE_ALW_PARTNER_BANK';
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#76.27" author="saikiran.n">
		<sql>
			<![CDATA[
				DELETE FROM SMTPARAMETERS WHERE SYSPARMCODE = 'ALLOW_MANDATE_ACCT_DET_READONLY';
			]]>
		</sql>
	</changeSet>


	<changeSet id="ST#76.28" author="saikiran.n">
		<sql>
            <![CDATA[
            	DELETE FROM STAGETABDETAIL WHERE TABCODE = 'SECMAN';
				INSERT INTO STAGETABDETAIL (TABID, TABCODE, TABDESCRIPTION, ACTIVE) VALUES ((select max(TABID)+1 from STAGETABDETAIL), 'SECMAN', 'Security Mandates', 1);
            ]]>
		</sql>
	</changeSet>

	<changeSet id="ST#81.1" author="nagavamsi.p">
		<addColumn tableName="EMPLOYERDETAIL_TEMP">
			<column name="AllowDAS" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#81.2" author="nagavamsi.p">
		<sql>
		<![CDATA[  
			UPDATE EMPLOYERDETAIL_TEMP SET ALLOWDAS = 0;
		]]>
		</sql>
	</changeSet>

	<changeSet id="ST#81.3" author="nagavamsi.p" dbms="oracle, postgresql">
		<addDefaultValue columnName="AllowDAS" tableName="EMPLOYERDETAIL_TEMP" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#76.3" author="nagavamsi.p" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE EMPLOYERDETAIL_TEMP ADD CONSTRAINT DF_EMPLOYERDET_TEMP_ALLOWDAS DEFAULT 0 FOR ALLOWDAS;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#81.4" author="nagavamsi.p">
		<addNotNullConstraint tableName="EMPLOYERDETAIL_TEMP" columnName="AllowDAS"
			columnDataType="boolean" />
	</changeSet>

	<changeSet id="ST#81.5" author="nagavamsi.p">
		<addColumn tableName="EMPLOYERDETAIL">
			<column name="AllowDAS" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#81.6" author="nagavamsi.p">
		<sql>
			<![CDATA[  
				UPDATE EMPLOYERDETAIL SET ALLOWDAS = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#81.7" author="nagavamsi.p" dbms="oracle, postgresql">
		<addDefaultValue columnName="AllowDAS" tableName="EMPLOYERDETAIL" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#81.7" author="nagavamsi.p" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE EMPLOYERDETAIL ADD CONSTRAINT DF_EMPLOYERDETAIL_ALLOWDAS DEFAULT 0 FOR ALLOWDAS;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#81.8" author="nagavamsi.p">
		<addNotNullConstraint tableName="EMPLOYERDETAIL" columnName="AllowDAS" columnDataType="boolean" />
	</changeSet>

	<changeSet id="ST#81.9_pre" author="nagavamsi.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'employerdetail_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#81.9" author="nagavamsi.p">
		<createView viewName="EMPLOYERDETAIL_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT ED.EMPLOYERID
					, ED.EMPINDUSTRY
					, ED.EMPNAME
					, ED.ESTABLISHDATE
					, ED.EMPADDRHNBR
					, ED.EMPFLATNBR
					, ED.EMPADDRSTREET
					, ED.EMPADDRLINE1
					, ED.EMPADDRLINE2
					, ED.EMPPOBOX
					, ED.EMPCOUNTRY
					, ED.EMPPHONE
					, ED.EMPFAX
					, ED.EMPTELEXNO
					, ED.EMPEMAILID
					, ED.EMPPROVINCE
					, ED.EMPCITY
					, ED.EMPWEBSITE
					, ED.CONTACTPERSONNAME
					, ED.CONTACTPERSONNO
					, ED.EMPALOCATIONTYPE
					, ED.BANKREFNO
					, ED.EMPCATEGORY
					, ED.EMPISACTIVE
					, ED.ALLOWDAS
					, ED.VERSION
					, ED.LASTMNTBY
					, ED.LASTMNTON
					, ED.RECORDSTATUS
					, ED.ROLECODE
					, ED.NEXTROLECODE
					, ED.TASKID
					, ED.NEXTTASKID
					, ED.RECORDTYPE
					, ED.WORKFLOWID
					, SU.USRLOGIN
					, SU.USRFNAME
					, SU.USRMNAME
					, SU.USRLNAME
					, IDS.INDUSTRYDESC LOVDESCINDUSTRYDESC
					, C.COUNTRYDESC LOVDESCCOUNTRYDESC
					, CP.CPPROVINCENAME LOVDESCPROVINCENAME
					, PC.PCCITYNAME LOVDESCCITYNAME
				FROM EMPLOYERDETAIL_TEMP ED
				INNER JOIN SECUSERS SU ON SU.USRID = ED.LASTMNTBY
				LEFT JOIN BMTINDUSTRIES IDS ON IDS.INDUSTRYCODE = ED.EMPINDUSTRY
				LEFT JOIN BMTCOUNTRIES C ON C.COUNTRYCODE = ED.EMPCOUNTRY
				LEFT JOIN RMTCOUNTRYVSPROVINCE CP ON CP.CPPROVINCE = ED.EMPPROVINCE AND CP.CPCOUNTRY = ED.EMPCOUNTRY
				LEFT JOIN RMTPROVINCEVSCITY PC ON PC.PCCITY = ED.EMPCITY AND PC.PCPROVINCE = ED.EMPPROVINCE AND PC.PCCOUNTRY = ED.EMPCOUNTRY
				UNION ALL
				SELECT ED.EMPLOYERID
					, ED.EMPINDUSTRY
					, ED.EMPNAME
					, ED.ESTABLISHDATE
					, ED.EMPADDRHNBR
					, ED.EMPFLATNBR
					, ED.EMPADDRSTREET
					, ED.EMPADDRLINE1
					, ED.EMPADDRLINE2
					, ED.EMPPOBOX
					, ED.EMPCOUNTRY
					, ED.EMPPHONE
					, ED.EMPFAX
					, ED.EMPTELEXNO
					, ED.EMPEMAILID
					, ED.EMPPROVINCE
					, ED.EMPCITY
					, ED.EMPWEBSITE
					, ED.CONTACTPERSONNAME
					, ED.CONTACTPERSONNO
					, ED.EMPALOCATIONTYPE
					, ED.BANKREFNO
					, ED.EMPCATEGORY
					, ED.EMPISACTIVE
					, ED.ALLOWDAS
					, ED.VERSION
					, ED.LASTMNTBY
					, ED.LASTMNTON
					, ED.RECORDSTATUS
					, ED.ROLECODE
					, ED.NEXTROLECODE
					, ED.TASKID
					, ED.NEXTTASKID
					, ED.RECORDTYPE
					, ED.WORKFLOWID
					, SU.USRLOGIN
					, SU.USRFNAME
					, SU.USRMNAME
					, SU.USRLNAME
					, IDS.INDUSTRYDESC LOVDESCINDUSTRYDESC
					, C.COUNTRYDESC LOVDESCCOUNTRYDESC
					, CP.CPPROVINCENAME LOVDESCPROVINCENAME
					, PC.PCCITYNAME LOVDESCCITYNAME
				FROM EMPLOYERDETAIL ED
				INNER JOIN SECUSERS SU ON SU.USRID = ED.LASTMNTBY
				LEFT JOIN BMTINDUSTRIES IDS ON IDS.INDUSTRYCODE = ED.EMPINDUSTRY
				LEFT JOIN BMTCOUNTRIES C ON C.COUNTRYCODE = ED.EMPCOUNTRY
				LEFT JOIN RMTCOUNTRYVSPROVINCE CP ON CP.CPPROVINCE = ED.EMPPROVINCE AND CP.CPCOUNTRY = ED.EMPCOUNTRY
				LEFT JOIN RMTPROVINCEVSCITY PC ON PC.PCCITY = ED.EMPCITY AND PC.PCPROVINCE = ED.EMPPROVINCE AND PC.PCCOUNTRY = ED.EMPCOUNTRY
				WHERE NOT EXISTS ( SELECT 1 FROM EMPLOYERDETAIL_TEMP WHERE EMPLOYERDETAIL_TEMP.EMPLOYERID = ED.EMPLOYERID)			
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#81.9_post" author="nagavamsi.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'employerdetail_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#81.10_pre" author="nagavamsi.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'employerdetail_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#81.10" author="nagavamsi.p">
		<createView viewName="EMPLOYERDETAIL_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT ED.EMPLOYERID
					, ED.EMPINDUSTRY
					, ED.EMPNAME
					, ED.ESTABLISHDATE
					, ED.EMPADDRHNBR
					, ED.EMPFLATNBR
					, ED.EMPADDRSTREET
					, ED.EMPADDRLINE1
					, ED.EMPADDRLINE2
					, ED.EMPPOBOX
					, ED.EMPCOUNTRY
					, ED.EMPPHONE
					, ED.EMPFAX
					, ED.EMPTELEXNO
					, ED.EMPEMAILID
					, ED.EMPPROVINCE
					, ED.EMPCITY
					, ED.EMPWEBSITE
					, ED.CONTACTPERSONNAME
					, ED.CONTACTPERSONNO
					, ED.EMPALOCATIONTYPE
					, ED.BANKREFNO
					, ED.EMPCATEGORY
					, ED.EMPISACTIVE
					, ED.ALLOWDAS
					, ED.VERSION
					, ED.LASTMNTBY
					, ED.LASTMNTON
					, ED.RECORDSTATUS
					, ED.ROLECODE
					, ED.NEXTROLECODE
					, ED.TASKID
					, ED.NEXTTASKID
					, ED.RECORDTYPE
					, ED.WORKFLOWID
					, SU.USRLOGIN
					, SU.USRFNAME
					, SU.USRMNAME
					, SU.USRLNAME
					, IDS.INDUSTRYDESC LOVDESCINDUSTRYDESC
					, C.COUNTRYDESC LOVDESCCOUNTRYDESC
					, CP.CPPROVINCENAME LOVDESCPROVINCENAME
					, PC.PCCITYNAME LOVDESCCITYNAME
				FROM EMPLOYERDETAIL ED
				INNER JOIN SECUSERS SU ON SU.USRID = ED.LASTMNTBY
				LEFT JOIN BMTINDUSTRIES IDS ON IDS.INDUSTRYCODE = ED.EMPINDUSTRY
				LEFT JOIN BMTCOUNTRIES C ON C.COUNTRYCODE = ED.EMPCOUNTRY
				LEFT JOIN RMTCOUNTRYVSPROVINCE CP ON CP.CPPROVINCE = ED.EMPPROVINCE AND CP.CPCOUNTRY = ED.EMPCOUNTRY
				LEFT JOIN RMTPROVINCEVSCITY PC ON PC.PCCITY = ED.EMPCITY AND PC.PCPROVINCE = ED.EMPPROVINCE AND PC.PCCOUNTRY = ED.EMPCOUNTRY			
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#81.10_post" author="nagavamsi.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'employerdetail_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#81.11" author="nagavamsi.p">
		<sql>
			<![CDATA[
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'EmployerDetailDialog_AllowDas');
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'EmployerDetailDialog_AllowDas';
			
				INSERT INTO SECRIGHTS VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'EmployerDetailDialog_AllowDas', 'EmployerDetailDialog', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);

				INSERT INTO SECGROUPRIGHTS VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='EMPLOYERDETAIL_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='EmployerDetailDialog_AllowDas'), 1, 0, 10000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
        	 ]]>
		</sql>
	</changeSet>

	<changeSet id="ST#98.1" author="nagavamsi.p">
		<addColumn tableName="RMTBaseRates_Temp">
			<column name="CreatedBy" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#98.2" author="nagavamsi.p">
		<addColumn tableName="RMTBaseRates_Temp">
			<column name="CreatedOn" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#98.3" author="nagavamsi.p">
		<addColumn tableName="RMTBaseRates_Temp">
			<column name="ApprovedBy" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#98.4" author="nagavamsi.p">
		<addColumn tableName="RMTBaseRates_Temp">
			<column name="ApprovedOn" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#98.5" author="nagavamsi.p">
		<addColumn tableName="RMTBaseRates">
			<column name="CreatedBy" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#98.6" author="nagavamsi.p">
		<addColumn tableName="RMTBaseRates">
			<column name="CreatedOn" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#98.7" author="nagavamsi.p">
		<addColumn tableName="RMTBaseRates">
			<column name="ApprovedBy" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#98.8" author="nagavamsi.p">
		<addColumn tableName="RMTBaseRates">
			<column name="ApprovedOn" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#98.9_pre" author="nagavamsi.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmtbaserates_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#98.9" author="nagavamsi.p">
		<createView viewName="RMTBASERATES_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT BR.BRTYPE
				    , BRC.BRTYPEDESC LOVDESCBRTYPENAME
				    , BR.CURRENCY
				    , BR.BREFFDATE
				    , BR.BRRATE
				    , BR.BRTYPEISACTIVE
					, BR.LASTMDFDATE
				    , BR.DELEXISTINGRATES
					, BR.LOCKINGPERIOD
					, BR.CREATEDBY
					, BR.CREATEDON
					, BR.APPROVEDBY
					, BR.APPROVEDON
					, BR.VERSION
				    , BR.LASTMNTBY
				    , BR.LASTMNTON
				    , BR.RECORDSTATUS
				    , BR.ROLECODE
				    , BR.NEXTROLECODE
				    , BR.TASKID
				    , BR.NEXTTASKID
				    , BR.RECORDTYPE
				    , BR.WORKFLOWID
				    , SUC.USRLOGIN CREATEDUSER
				    , SUA.USRLOGIN APPROVEDUSER
				FROM RMTBASERATES_TEMP BR
				INNER JOIN RMTBASERATECODES BRC ON BRC.BRTYPE = BR.BRTYPE
				LEFT JOIN SECUSERS SUC ON SUC.USRID = BR.CREATEDBY
				LEFT JOIN SECUSERS SUA ON SUA.USRID = BR.APPROVEDBY
				UNION ALL
				SELECT BR.BRTYPE
				    , BRC.BRTYPEDESC LOVDESCBRTYPENAME
				    , BR.CURRENCY
				    , BR.BREFFDATE
				    , BR.BRRATE
				    , BR.BRTYPEISACTIVE
					, BR.LASTMDFDATE
				    , BR.DELEXISTINGRATES
					, BR.LOCKINGPERIOD
					, BR.CREATEDBY
					, BR.CREATEDON
					, BR.APPROVEDBY
					, BR.APPROVEDON
					, BR.VERSION
				    , BR.LASTMNTBY
				    , BR.LASTMNTON
				    , BR.RECORDSTATUS
				    , BR.ROLECODE
				    , BR.NEXTROLECODE
				    , BR.TASKID
				    , BR.NEXTTASKID
				    , BR.RECORDTYPE
				    , BR.WORKFLOWID
				    , SUC.USRLOGIN CREATEDUSER
				    , SUA.USRLOGIN APPROVEDUSER
				FROM RMTBASERATES BR
				INNER JOIN RMTBASERATECODES BRC ON BRC.BRTYPE = BR.BRTYPE
				LEFT JOIN SECUSERS SUC ON SUC.USRID = BR.CREATEDBY
				LEFT JOIN SECUSERS SUA ON SUA.USRID = BR.APPROVEDBY
				WHERE NOT EXISTS ( SELECT 1 FROM RMTBASERATES_TEMP WHERE BRTYPE = BR.BRTYPE AND BREFFDATE = BR.BREFFDATE AND CURRENCY = BR.CURRENCY)			
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#98.9_post" author="nagavamsi.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rmtbaserates_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#98.10_pre" author="nagavamsi.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmtbaserates_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#98.10" author="nagavamsi.p">
		<createView viewName="RMTBASERATES_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT BR.BRTYPE
				    , BRC.BRTYPEDESC LOVDESCBRTYPENAME
				    , BR.CURRENCY
				    , BR.BREFFDATE
				    , BR.BRRATE
				    , BR.BRTYPEISACTIVE
					, BR.LASTMDFDATE
				    , BR.DELEXISTINGRATES
					, BR.LOCKINGPERIOD
					, BR.CREATEDBY
					, BR.CREATEDON
					, BR.APPROVEDBY
					, BR.APPROVEDON
					, BR.VERSION
				    , BR.LASTMNTBY
				    , BR.LASTMNTON
				    , BR.RECORDSTATUS
				    , BR.ROLECODE
				    , BR.NEXTROLECODE
				    , BR.TASKID
				    , BR.NEXTTASKID
				    , BR.RECORDTYPE
				    , BR.WORKFLOWID
				    , SUC.USRLOGIN CREATEDUSER
				    , SUA.USRLOGIN APPROVEDUSER
				FROM RMTBASERATES_TEMP BR
				INNER JOIN RMTBASERATECODES BRC ON BRC.BRTYPE = BR.BRTYPE	
				LEFT JOIN SECUSERS SUC ON SUC.USRID = BR.CREATEDBY
				LEFT JOIN SECUSERS SUA ON SUA.USRID = BR.APPROVEDBY
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#98.10_post" author="nagavamsi.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rmtbaserates_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#79.1" author="nagavamsi.p">
		<addColumn tableName="BounceReasons_Temp">
			<column name="InstrumentType" type="varchar(8)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#79.2" author="nagavamsi.p">
		<addColumn tableName="BounceReasons_Temp">
			<column name="HoldMarkBounceCount" type="int" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#79.3" author="nagavamsi.p">
		<sql>
			<![CDATA[  
				UPDATE BOUNCEREASONS_TEMP SET HOLDMARKBOUNCECOUNT = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#79.4" author="nagavamsi.p" dbms="oracle, postgresql">
		<addDefaultValue columnName="HoldMarkBounceCount" tableName="BounceReasons_Temp" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#79.4" author="nagavamsi.p" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE BOUNCEREASONS_TEMP ADD CONSTRAINT DF_BR_TEMP_HOLDMARKBOUNCECNT DEFAULT 0 FOR HOLDMARKBOUNCECOUNT;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#79.5" author="nagavamsi.p">
		<addNotNullConstraint tableName="BounceReasons_Temp" columnName="HoldMarkBounceCount"
			columnDataType="int" />
	</changeSet>

	<changeSet id="ST#79.6" author="nagavamsi.p">
		<addColumn tableName="BounceReasons">
			<column name="InstrumentType" type="varchar(8)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#79.7" author="nagavamsi.p">
		<addColumn tableName="BounceReasons">
			<column name="HoldMarkBounceCount" type="int" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#79.8" author="nagavamsi.p">
		<sql>
			<![CDATA[  
				UPDATE BOUNCEREASONS SET HOLDMARKBOUNCECOUNT = 0 ;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#79.9" author="nagavamsi.p" dbms="oracle, postgresql">
		<addDefaultValue columnName="HoldMarkBounceCount" tableName="BounceReasons" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#79.9" author="nagavamsi.p" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE BOUNCEREASONS ADD CONSTRAINT DF_BR_HOLDMARKBOUNCECOUNT DEFAULT 0 FOR HOLDMARKBOUNCECOUNT;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#79.10" author="nagavamsi.p" dbms="oracle, postgresql">
		<addNotNullConstraint tableName="BounceReasons" columnName="HoldMarkBounceCount"
			columnDataType="int" />
	</changeSet>

	<changeSet id="ST#79.11_pre" author="nagavamsi.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'bouncereasons_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#79.11" author="nagavamsi.p">
		<createView viewName="BOUNCEREASONS_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT BR.BOUNCEID
					, BR.BOUNCECODE
					, BR.REASONTYPE
					, CASE WHEN BR.REASONTYPE = 1 THEN 'CANCELLED CHEQUES'
						WHEN BR.REASONTYPE = 2 THEN 'BOUNCED CHEQUES'
						WHEN BR.REASONTYPE = 3 THEN 'HOLD CHEQUES'
						ELSE NULL END LOVDESCREASONTYPE
					, BR.CATEGORY
					, CASE WHEN BR.CATEGORY = 1 THEN 'TECHNICAL'
						WHEN BR.CATEGORY = 2 THEN 'NON TECHNICAL'
						ELSE NULL END LOVDESCCATEGORY
					, BR.REASON
					, BR.ACTION
					, BR.RULEID
					, BR.RETURNCODE
					, BR.INSTRUMENTTYPE
					, BR.HOLDMARKBOUNCECOUNT
					, R.RULECODE
					, R.RULECODEDESC
					, BR.ACTIVE
					, BR.VERSION
					, BR.LASTMNTBY
					, BR.LASTMNTON
					, BR.RECORDSTATUS
					, BR.ROLECODE
					, BR.NEXTROLECODE
					, BR.TASKID
					, BR.NEXTTASKID
					, BR.RECORDTYPE
					, BR.WORKFLOWID
				FROM BOUNCEREASONS_TEMP BR
				INNER JOIN RULES R ON R.RULEID = BR.RULEID
				UNION ALL
				SELECT BR.BOUNCEID
					, BR.BOUNCECODE
					, BR.REASONTYPE
					, CASE WHEN BR.REASONTYPE = 1 THEN 'CANCELLED CHEQUES'
						WHEN BR.REASONTYPE = 2 THEN 'BOUNCED CHEQUES'
						WHEN BR.REASONTYPE = 3 THEN 'HOLD CHEQUES'
						ELSE NULL END LOVDESCREASONTYPE
					, BR.CATEGORY
					, CASE WHEN BR.CATEGORY = 1 THEN 'TECHNICAL'
						WHEN BR.CATEGORY = 2 THEN 'NON TECHNICAL'
						ELSE NULL END LOVDESCCATEGORY
					, BR.REASON
					, BR.ACTION
					, BR.RULEID
					, BR.RETURNCODE
					, BR.INSTRUMENTTYPE
					, BR.HOLDMARKBOUNCECOUNT
					, R.RULECODE
					, R.RULECODEDESC
					, BR.ACTIVE
					, BR.VERSION
					, BR.LASTMNTBY
					, BR.LASTMNTON
					, BR.RECORDSTATUS
					, BR.ROLECODE
					, BR.NEXTROLECODE
					, BR.TASKID
					, BR.NEXTTASKID
					, BR.RECORDTYPE
					, BR.WORKFLOWID
				FROM BOUNCEREASONS BR
				INNER JOIN RULES R ON R.RULEID = BR.RULEID
				WHERE NOT EXISTS (SELECT 1 FROM BOUNCEREASONS_TEMP WHERE BOUNCEID = BR.BOUNCEID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#79.11_post" author="nagavamsi.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'bouncereasons_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#79.12_pre" author="nagavamsi.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'bouncereasons_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#79.12" author="nagavamsi.p">
		<createView viewName="BOUNCEREASONS_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT BR.BOUNCEID
					, BR.BOUNCECODE
					, BR.REASONTYPE
					, CASE WHEN BR.REASONTYPE = 1 THEN 'CANCELLED CHEQUES'
						WHEN BR.REASONTYPE = 2 THEN 'BOUNCED CHEQUES'
						WHEN BR.REASONTYPE = 3 THEN 'HOLD CHEQUES'
						ELSE NULL END LOVDESCREASONTYPE
					, BR.CATEGORY
					, CASE WHEN BR.CATEGORY = 1 THEN 'TECHNICAL'
						WHEN BR.CATEGORY = 2 THEN 'NON TECHNICAL'
						ELSE NULL END LOVDESCCATEGORY
					, BR.REASON
					, BR.ACTION
					, BR.RULEID
					, BR.RETURNCODE
					, BR.INSTRUMENTTYPE
					, BR.HOLDMARKBOUNCECOUNT
					, R.RULECODE
					, R.RULECODEDESC
					, BR.ACTIVE
					, BR.VERSION
					, BR.LASTMNTBY
					, BR.LASTMNTON
					, BR.RECORDSTATUS
					, BR.ROLECODE
					, BR.NEXTROLECODE
					, BR.TASKID
					, BR.NEXTTASKID
					, BR.RECORDTYPE
					, BR.WORKFLOWID
				FROM BOUNCEREASONS BR
				INNER JOIN RULES R ON R.RULEID = BR.RULEID
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#79.12_post" author="nagavamsi.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'bouncereasons_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#79.13" author="nagavamsi.p">
		<sql>
			<![CDATA[
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'BounceReasonDialog_InstrumentType');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'BounceReasonDialog_HoldMarkBounceCount');
				
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'BounceReasonDialog_InstrumentType';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'BounceReasonDialog_HoldMarkBounceCount';
				
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'BounceReasonDialog_InstrumentType', 	  'BounceReasonDialog', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'BounceReasonDialog_HoldMarkBounceCount', 'BounceReasonDialog', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
	
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'BOUNCEREASON_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'BounceReasonDialog_InstrumentType'),      1, 0, 10000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'BOUNCEREASON_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'BounceReasonDialog_HoldMarkBounceCount'), 1, 0, 10000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);			
        	]]>
		</sql>
	</changeSet>

	<changeSet id="ST#94.1" author="saikiran.n">
		<sql>
			<![CDATA[
				DELETE FROM SMTPARAMETERS WHERE SYSPARMCODE = 'MANDATE_EMANDATE_REQUIRED';
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#94.2" author="saikiran.n">
		<addColumn tableName="BMTBankDetail_Temp">
			<column name="Nach" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#94.2.1_post" author="saikiran.n">
		<sql>
			<![CDATA[  
				UPDATE BMTBankDetail_Temp SET Nach = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#94.2_post" author="saikiran.n" dbms="oracle, postgresql">
		<addDefaultValue columnName="Nach" tableName="BMTBankDetail_Temp" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#94.2_post" author="saikiran.n" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE BMTBankDetail_Temp ADD CONSTRAINT DF_BMTBankDetail_Temp_Nach DEFAULT 0 FOR Nach;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#94.3" author="saikiran.n">
		<addColumn tableName="BMTBankDetail_Temp">
			<column name="Dd" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#94.3.1_post" author="saikiran.n">
		<sql>
			<![CDATA[  
				UPDATE BMTBankDetail_Temp SET Dd = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#94.3_post" author="saikiran.n" dbms="oracle, postgresql">
		<addDefaultValue columnName="Dd" tableName="BMTBankDetail_Temp" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#94.3_post" author="saikiran.n" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE BMTBankDetail_Temp ADD CONSTRAINT DF_BMTBankDetail_Temp_Dd DEFAULT 0 FOR Dd;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#94.4" author="saikiran.n">
		<addColumn tableName="BMTBankDetail_Temp">
			<column name="Dda" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#94.4.1_post" author="saikiran.n">
		<sql>
			<![CDATA[  
				UPDATE BMTBankDetail_Temp SET Dda = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#94.4_post" author="saikiran.n" dbms="oracle, postgresql">
		<addDefaultValue columnName="Dda" tableName="BMTBankDetail_Temp" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#94.4_post" author="saikiran.n" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE BMTBankDetail_Temp ADD CONSTRAINT DF_BMTBankDetail_Temp_Dda DEFAULT 0 FOR Dda;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#94.5" author="saikiran.n">
		<addColumn tableName="BMTBankDetail_Temp">
			<column name="Ecs" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#94.5.1_post" author="saikiran.n">
		<sql>
			<![CDATA[  
				UPDATE BMTBankDetail_Temp SET Ecs = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#94.5_post" author="saikiran.n" dbms="oracle, postgresql">
		<addDefaultValue columnName="Ecs" tableName="BMTBankDetail_Temp" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#94.5_post" author="saikiran.n" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE BMTBankDetail_Temp ADD CONSTRAINT DF_BMTBankDetail_Temp_Ecs DEFAULT 0 FOR Ecs;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#94.6" author="saikiran.n">
		<addColumn tableName="BMTBankDetail_Temp">
			<column name="Cheque" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#94.6.1_post" author="saikiran.n">
		<sql>
			<![CDATA[  
				UPDATE BMTBankDetail_Temp SET Cheque = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#94.6_post" author="saikiran.n" dbms="oracle, postgresql">
		<addDefaultValue columnName="Cheque" tableName="BMTBankDetail_Temp" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#94.6_post" author="saikiran.n" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE BMTBankDetail_Temp ADD CONSTRAINT DF_BMTBankDetail_Temp_Cheque DEFAULT 0 FOR Cheque;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#94.7" author="saikiran.n">
		<addColumn tableName="BMTBankDetail_Temp">
			<column name="Emandate" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#94.7.1_post" author="saikiran.n">
		<sql>
			<![CDATA[  
				UPDATE BMTBankDetail_Temp SET Emandate = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#94.7_post" author="saikiran.n" dbms="oracle, postgresql">
		<addDefaultValue columnName="Emandate" tableName="BMTBankDetail_Temp" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#94.7_post" author="saikiran.n" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE BMTBankDetail_Temp ADD CONSTRAINT DF_BMTBankDetail_T_Emandate DEFAULT 0 FOR Emandate;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#94.8" author="saikiran.n">
		<addColumn tableName="BMTBankDetail_Temp">
			<column name="AllowedSources" type="varchar(50)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#94.8.1_post" author="saikiran.n">
		<sql>
			<![CDATA[  
				UPDATE BMTBankDetail_Temp SET AllowedSources = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#94.8_post" author="saikiran.n" dbms="oracle, postgresql">
		<addDefaultValue columnName="AllowedSources" tableName="BMTBankDetail_Temp" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#94.8_post" author="saikiran.n" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE BMTBankDetail_Temp ADD CONSTRAINT DF_BMTBankDet_T_AllowedSources DEFAULT 0 FOR AllowedSources;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#94.9" author="saikiran.n">
		<addColumn tableName="BMTBankDetail_Temp">
			<column name="UpdateBranches" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#94.9.1_post" author="saikiran.n">
		<sql>
			<![CDATA[  
				UPDATE BMTBankDetail_Temp SET UpdateBranches = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#94.9_post" author="saikiran.n" dbms="oracle, postgresql">
		<addDefaultValue columnName="UpdateBranches" tableName="BMTBankDetail_Temp" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#94.9_post" author="saikiran.n" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE BMTBankDetail_Temp ADD CONSTRAINT DF_BMTBankDet_T_UpdateBranches DEFAULT 0 FOR UpdateBranches;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#94.10" author="saikiran.n">
		<addColumn tableName="BMTBankDetail">
			<column name="Nach" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#94.10.1_post" author="saikiran.n">
		<sql>
			<![CDATA[  
				UPDATE BMTBankDetail SET Nach = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#94.10_post" author="saikiran.n" dbms="oracle, postgresql">
		<addDefaultValue columnName="Nach" tableName="BMTBankDetail" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#94.10_post" author="saikiran.n" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE BMTBankDetail ADD CONSTRAINT DF_BMTBankDetail_Nach DEFAULT 0 FOR Nach;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#94.11" author="saikiran.n">
		<addColumn tableName="BMTBankDetail">
			<column name="Dd" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#94.11.1_post" author="saikiran.n">
		<sql>
			<![CDATA[  
				UPDATE BMTBankDetail SET Dd = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#94.11_post" author="saikiran.n" dbms="oracle, postgresql">
		<addDefaultValue columnName="Dd" tableName="BMTBankDetail" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#94.11_post" author="saikiran.n" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE BMTBankDetail ADD CONSTRAINT DF_BMTBankDetail_Dd DEFAULT 0 FOR Dd;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#94.12" author="saikiran.n">
		<addColumn tableName="BMTBankDetail">
			<column name="Dda" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#94.12.1_post" author="saikiran.n">
		<sql>
			<![CDATA[  
				UPDATE BMTBankDetail SET Dda = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#94.12_post" author="saikiran.n" dbms="oracle, postgresql">
		<addDefaultValue columnName="Dda" tableName="BMTBankDetail" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#94.12_post" author="saikiran.n" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE BMTBankDetail ADD CONSTRAINT DF_BMTBankDetail_Dda DEFAULT 0 FOR Dda;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#94.13" author="saikiran.n">
		<addColumn tableName="BMTBankDetail">
			<column name="Ecs" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#94.13.1_post" author="saikiran.n">
		<sql>
			<![CDATA[  
				UPDATE BMTBankDetail SET Ecs = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#94.13_post" author="saikiran.n" dbms="oracle, postgresql">
		<addDefaultValue columnName="Ecs" tableName="BMTBankDetail" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#94.13_post" author="saikiran.n" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE BMTBankDetail ADD CONSTRAINT DF_BMTBankDetail_Ecs DEFAULT 0 FOR Ecs;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#94.14" author="saikiran.n">
		<addColumn tableName="BMTBankDetail">
			<column name="Cheque" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#94.14.1_post" author="saikiran.n">
		<sql>
			<![CDATA[  
				UPDATE BMTBankDetail SET Cheque = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#94.14_post" author="saikiran.n" dbms="oracle, postgresql">
		<addDefaultValue columnName="Cheque" tableName="BMTBankDetail" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#94.14_post" author="saikiran.n" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE BMTBankDetail ADD CONSTRAINT DF_BMTBankDetail_Cheque DEFAULT 0 FOR Cheque;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#94.15" author="saikiran.n">
		<addColumn tableName="BMTBankDetail">
			<column name="Emandate" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#94.15.1_post" author="saikiran.n">
		<sql>
			<![CDATA[  
				UPDATE BMTBankDetail SET Emandate = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#94.15_post" author="saikiran.n" dbms="oracle, postgresql">
		<addDefaultValue columnName="Emandate" tableName="BMTBankDetail" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#94.15_post" author="saikiran.n" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE BMTBankDetail ADD CONSTRAINT DF_BMTBankDetail_Emandate DEFAULT 0 FOR Emandate;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#94.16" author="saikiran.n">
		<addColumn tableName="BMTBankDetail">
			<column name="AllowedSources" type="varchar(50)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#94.17" author="saikiran.n">
		<addColumn tableName="BMTBankDetail">
			<column name="UpdateBranches" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#94.17.1_post" author="saikiran.n">
		<sql>
			<![CDATA[  
				UPDATE BMTBankDetail SET UpdateBranches = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#94.17_post" author="saikiran.n" dbms="oracle, postgresql">
		<addDefaultValue columnName="UpdateBranches" tableName="BMTBankDetail" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#94.17_post" author="saikiran.n" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE BMTBankDetail ADD CONSTRAINT DF_BMTBankDet_UpdateBranches DEFAULT 0 FOR UpdateBranches;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#94.18_pre" author="saikiran.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'bank_instrument_mapping');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#94.18" author="saikiran.n" dbms="oracle, postgresql">
		<createView viewName="BANK_INSTRUMENT_MAPPING" replaceIfExists="true">
			<![CDATA[
				SELECT BANKCODE
					, MAX(DD) DD
					, MAX(DDA) DDA
					, MAX(NACH) NACH
					, MAX(ECS) ECS
					, MAX(CHEQUE) CHEQUE
					, MAX(EMANDATE) EMANDATE
				FROM (
					SELECT BANKCODE, DD, DDA, NACH, ECS, CHEQUE, EMANDATE FROM BANKBRANCHES WHERE (DD = 1 OR DDA = 1 OR NACH = 1 OR ECS = 1 OR CHEQUE = 1 OR EMANDATE = 1)
					UNION ALL
					SELECT BANKCODE, DD, DDA, NACH, ECS, CHEQUE, EMANDATE FROM BANKBRANCHES_TEMP WHERE (DD = 1 OR DDA = 1 OR NACH = 1 OR ECS = 1 OR CHEQUE = 1 OR EMANDATE = 1)
				) T GROUP BY BANKCODE
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#94.18" author="saikiran.n" dbms="mssql">
		<createView viewName="BANK_INSTRUMENT_MAPPING" replaceIfExists="true">
			<![CDATA[
				SELECT BANKCODE
					, DD
					, DDA
					, NACH
					, ECS
					, CHEQUE
					, EMANDATE
				FROM (
						SELECT BANKCODE, 
							   convert(bit, min(convert(int, DD))) DD, 
							   convert(bit, min(convert(int, DDA))) DDA, 
							   convert(bit, min(convert(int, NACH))) NACH, 
							   convert(bit, min(convert(int, ECS))) ECS, 
							   convert(bit, min(convert(int, CHEQUE))) CHEQUE, 
							   convert(bit, min(convert(int, EMANDATE))) EMANDATE 
						FROM BANKBRANCHES WHERE (DD = 1 OR DDA = 1 OR NACH = 1 OR ECS = 1 OR CHEQUE = 1 OR EMANDATE = 1)
						group by BANKCODE,DD,DDA,NACH,ECS,CHEQUE,EMANDATE
						UNION ALL
						SELECT BANKCODE, 
								convert(bit, min(convert(int, DD))) DD, 
								convert(bit, min(convert(int, DDA))) DDA, 
								convert(bit, min(convert(int, NACH))) NACH, 
								convert(bit, min(convert(int, ECS))) ECS, 
								convert(bit, min(convert(int, CHEQUE))) CHEQUE, 
								convert(bit, min(convert(int, EMANDATE))) EMANDATE
						FROM BANKBRANCHES_TEMP WHERE (DD = 1 OR DDA = 1 OR NACH = 1 OR ECS = 1 OR CHEQUE = 1 OR EMANDATE = 1)
						group by BANKCODE,DD,DDA,NACH,ECS,CHEQUE,EMANDATE
						) T 
				GROUP BY BANKCODE,DD,DDA,NACH,ECS,CHEQUE,EMANDATE
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#94.18_post" author="saikiran.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'bank_instrument_mapping');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#94.19" author="saikiran.n" dbms="oracle,postgresql">
		<sql>
			<![CDATA[
				UPDATE BMTBANKDETAIL SET DD =   	(SELECT BB.DD   	FROM BANK_INSTRUMENT_MAPPING BB WHERE BMTBANKDETAIL.BANKCODE = BB.BANKCODE AND BB.DD = 1);
				UPDATE BMTBANKDETAIL SET DDA =  	(SELECT BB.DDA  	FROM BANK_INSTRUMENT_MAPPING BB WHERE BMTBANKDETAIL.BANKCODE = BB.BANKCODE AND BB.DDA = 1);
				UPDATE BMTBANKDETAIL SET NACH = 	(SELECT BB.NACH 	FROM BANK_INSTRUMENT_MAPPING BB WHERE BMTBANKDETAIL.BANKCODE = BB.BANKCODE AND BB.NACH = 1);
				UPDATE BMTBANKDETAIL SET ECS =  	(SELECT BB.ECS  	FROM BANK_INSTRUMENT_MAPPING BB WHERE BMTBANKDETAIL.BANKCODE = BB.BANKCODE AND BB.ECS = 1);
				UPDATE BMTBANKDETAIL SET CHEQUE =   (SELECT BB.CHEQUE 	FROM BANK_INSTRUMENT_MAPPING BB WHERE BMTBANKDETAIL.BANKCODE = BB.BANKCODE AND BB.CHEQUE = 1);
				UPDATE BMTBANKDETAIL SET EMANDATE = (SELECT BB.EMANDATE FROM BANK_INSTRUMENT_MAPPING BB WHERE BMTBANKDETAIL.BANKCODE = BB.BANKCODE AND BB.EMANDATE = 1);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#94.19" author="saikiran.n" dbms="mssql">
		<sql>
			<![CDATA[
				update BMTBANKDETAIL set DD = BIM.DD 
				from BMTBANKDETAIL BBD 
				inner join BANK_INSTRUMENT_MAPPING BIM on BBD.BankCode=BIM.BANKCODE AND BIM.DD = 1;
				
				update BMTBANKDETAIL set DDA = BIM.DDA 
				from BMTBANKDETAIL BBD 
				inner join BANK_INSTRUMENT_MAPPING BIM on BBD.BankCode=BIM.BANKCODE AND BIM.DDA = 1;
				
				update BMTBANKDETAIL set NACH = BIM.NACH 
				from BMTBANKDETAIL BBD 
				inner join BANK_INSTRUMENT_MAPPING BIM on BBD.BankCode=BIM.BANKCODE AND BIM.NACH = 1;
				
				update BMTBANKDETAIL set ECS = BIM.ECS 
				from BMTBANKDETAIL BBD 
				inner join BANK_INSTRUMENT_MAPPING BIM on BBD.BankCode=BIM.BANKCODE AND BIM.ECS = 1;
				
				update BMTBANKDETAIL set CHEQUE = BIM.CHEQUE 
				from BMTBANKDETAIL BBD 
				inner join BANK_INSTRUMENT_MAPPING BIM on BBD.BankCode=BIM.BANKCODE AND BIM.CHEQUE = 1;
				
				update BMTBANKDETAIL set EMANDATE = BIM.EMANDATE 
				from BMTBANKDETAIL BBD 
				inner join BANK_INSTRUMENT_MAPPING BIM on BBD.BankCode=BIM.BANKCODE AND BIM.EMANDATE = 1;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#94.20" author="saikiran.n" dbms="oracle,postgresql">
		<sql>
			<![CDATA[
				UPDATE BMTBANKDETAIL_TEMP SET DD       = (SELECT BB.DD       FROM BANK_INSTRUMENT_MAPPING BB WHERE BMTBANKDETAIL_TEMP.BANKCODE = BB.BANKCODE AND BB.DD = 1);
				UPDATE BMTBANKDETAIL_TEMP SET DDA 	   = (SELECT BB.DDA      FROM BANK_INSTRUMENT_MAPPING BB WHERE BMTBANKDETAIL_TEMP.BANKCODE = BB.BANKCODE AND BB.DDA = 1);
				UPDATE BMTBANKDETAIL_TEMP SET NACH     = (SELECT BB.NACH     FROM BANK_INSTRUMENT_MAPPING BB WHERE BMTBANKDETAIL_TEMP.BANKCODE = BB.BANKCODE AND BB.NACH = 1);
				UPDATE BMTBANKDETAIL_TEMP SET ECS      = (SELECT BB.ECS      FROM BANK_INSTRUMENT_MAPPING BB WHERE BMTBANKDETAIL_TEMP.BANKCODE = BB.BANKCODE AND BB.ECS = 1);
				UPDATE BMTBANKDETAIL_TEMP SET CHEQUE   = (SELECT BB.CHEQUE   FROM BANK_INSTRUMENT_MAPPING BB WHERE BMTBANKDETAIL_TEMP.BANKCODE = BB.BANKCODE AND BB.CHEQUE = 1);
				UPDATE BMTBANKDETAIL_TEMP SET EMANDATE = (SELECT BB.EMANDATE FROM BANK_INSTRUMENT_MAPPING BB WHERE BMTBANKDETAIL_TEMP.BANKCODE = BB.BANKCODE AND BB.EMANDATE = 1);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#94.20" author="saikiran.n" dbms="mssql">
		<sql>
			<![CDATA[
				update BMTBANKDETAIL_TEMP set DD = BIM.DD 
				from BMTBANKDETAIL_TEMP BBD 
				inner join BANK_INSTRUMENT_MAPPING BIM on BBD.BankCode=BIM.BANKCODE AND BIM.DD = 1;
				
				update BMTBANKDETAIL_TEMP set DDA = BIM.DDA 
				from BMTBANKDETAIL_TEMP BBD 
				inner join BANK_INSTRUMENT_MAPPING BIM on BBD.BankCode=BIM.BANKCODE AND BIM.DDA = 1;
				
				update BMTBANKDETAIL_TEMP set NACH = BIM.NACH 
				from BMTBANKDETAIL_TEMP BBD 
				inner join BANK_INSTRUMENT_MAPPING BIM on BBD.BankCode=BIM.BANKCODE AND BIM.NACH = 1;
				
				update BMTBANKDETAIL_TEMP set ECS = BIM.ECS 
				from BMTBANKDETAIL_TEMP BBD 
				inner join BANK_INSTRUMENT_MAPPING BIM on BBD.BankCode=BIM.BANKCODE AND BIM.ECS = 1;
				
				update BMTBANKDETAIL_TEMP set CHEQUE = BIM.CHEQUE 
				from BMTBANKDETAIL_TEMP BBD 
				inner join BANK_INSTRUMENT_MAPPING BIM on BBD.BankCode=BIM.BANKCODE AND BIM.CHEQUE = 1;
				
				update BMTBANKDETAIL_TEMP set EMANDATE = BIM.EMANDATE 
				from BMTBANKDETAIL_TEMP BBD 
				inner join BANK_INSTRUMENT_MAPPING BIM on BBD.BankCode=BIM.BANKCODE AND BIM.EMANDATE = 1;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#94.21" author="saikiran.n">
		<dropView viewName="BANK_INSTRUMENT_MAPPING" />
	</changeSet>

	<changeSet id="ST#94.22" author="saikiran.n">
		<sql>
			<![CDATA[
				UPDATE BMTBANKDETAIL_TEMP SET NACH           = 0 WHERE NACH IS NULL;
				UPDATE BMTBANKDETAIL_TEMP SET DD             = 0 WHERE DD IS NULL;
				UPDATE BMTBANKDETAIL_TEMP SET DDA            = 0 WHERE DDA IS NULL;
				UPDATE BMTBANKDETAIL_TEMP SET ECS            = 0 WHERE ECS IS NULL;
				UPDATE BMTBANKDETAIL_TEMP SET CHEQUE         = 0 WHERE CHEQUE IS NULL;
				UPDATE BMTBANKDETAIL_TEMP SET EMANDATE       = 0 WHERE EMANDATE IS NULL;
				UPDATE BMTBANKDETAIL_TEMP SET UPDATEBRANCHES = 0 WHERE UPDATEBRANCHES IS NULL;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#94.23" author="saikiran.n">
		<sql>
			<![CDATA[
				UPDATE BMTBANKDETAIL SET NACH           = 0 WHERE NACH IS NULL;
				UPDATE BMTBANKDETAIL SET DD             = 0 WHERE DD IS NULL;
				UPDATE BMTBANKDETAIL SET DDA            = 0 WHERE DDA IS NULL;
				UPDATE BMTBANKDETAIL SET ECS            = 0 WHERE ECS IS NULL;
				UPDATE BMTBANKDETAIL SET CHEQUE         = 0 WHERE CHEQUE IS NULL;
				UPDATE BMTBANKDETAIL SET EMANDATE       = 0 WHERE EMANDATE IS NULL;
				UPDATE BMTBANKDETAIL SET UPDATEBRANCHES = 0 WHERE UPDATEBRANCHES IS NULL;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#94.24.1.pre" author="saikiran.n">
		<sql>
			<![CDATA[
				DELETE FROM SECGROUPRIGHTS WHERE  RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'BankDetailDialog_Ecs');
				DELETE FROM SECGROUPRIGHTS WHERE  RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'BankDetailDialog_Dda');
				DELETE FROM SECGROUPRIGHTS WHERE  RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'BankDetailDialog_Dd');
				DELETE FROM SECGROUPRIGHTS WHERE  RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'BankDetailDialog_Nach');
				DELETE FROM SECGROUPRIGHTS WHERE  RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'BankDetailDialog_Cheque');
				DELETE FROM SECGROUPRIGHTS WHERE  RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'BankDetailDialog_Emandate');
				DELETE FROM SECGROUPRIGHTS WHERE  RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'BankDetailDialog_AllowedSources');
				DELETE FROM SECGROUPRIGHTS WHERE  RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_BankDetailDialog_btnMultiSource');
				DELETE FROM SECGROUPRIGHTS WHERE  RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'BankDetailDialog_UpdateBranches');
				
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'BankDetailDialog_Ecs';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'BankDetailDialog_Dda';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'BankDetailDialog_Dd';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'BankDetailDialog_Nach';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'BankDetailDialog_Cheque';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'BankDetailDialog_Emandate';
				DELETE FROM SecRights where RightName = 'BankDetailDialog_AllowedSources';
				DELETE FROM SecRights where RightName = 'button_BankDetailDialog_btnMultiSource';
				DELETE FROM SecRights where RightName = 'BankDetailDialog_UpdateBranches';
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#94.24.1" author="saikiran.n">
		<sql>
			<![CDATA[
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='BANKDETAIL_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'BankDetailDialog_ECS');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='BANKDETAIL_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'BankDetailDialog_DDA');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='BANKDETAIL_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'BankDetailDialog_DD');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='BANKDETAIL_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'BankDetailDialog_NACH');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='BANKDETAIL_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'BankDetailDialog_Cheque');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='BANKDETAIL_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'BankDetailDialog_Emandate');
				DELETE FROM SECGROUPRIGHTS Where GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='BANKDETAIL_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'BankDetailDialog_AllowedSources');
				DELETE FROM SECGROUPRIGHTS Where GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='BANKDETAIL_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_BankDetailDialog_btnMultiSource');
				DELETE FROM SECGROUPRIGHTS Where GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='BANKDETAIL_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'BankDetailDialog_UpdateBranches');

				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'BankDetailDialog_ECS';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'BankDetailDialog_DDA';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'BankDetailDialog_DD';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'BankDetailDialog_NACH';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'BankDetailDialog_Cheque';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'BankDetailDialog_Emandate';
				DELETE FROM SecRights where RightName = 'BankDetailDialog_AllowedSources';
				DELETE FROM SecRights where RightName = 'button_BankDetailDialog_btnMultiSource';
				DELETE FROM SecRights where RightName = 'BankDetailDialog_UpdateBranches';
				
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((select max(RightId)+1 from SecRights), 3, 'BankDetailDialog_ECS', 					'BankDetailDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((select max(RightId)+1 from SecRights), 3, 'BankDetailDialog_DDA', 					'BankDetailDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((select max(RightId)+1 from SecRights), 3, 'BankDetailDialog_DD', 						'BankDetailDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((select max(RightId)+1 from SecRights), 3, 'BankDetailDialog_NACH', 					'BankDetailDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((select max(RightId)+1 from SecRights), 3, 'BankDetailDialog_Cheque', 					'BankDetailDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((select max(RightId)+1 from SecRights), 3, 'BankDetailDialog_Emandate', 				'BankDetailDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((select max(RightId)+1 from SecRights), 3, 'BankDetailDialog_AllowedSources', 			'BankDetailDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((select max(RightId)+1 from SecRights), 2, 'button_BankDetailDialog_btnMultiSource', 	'BankDetailDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((select max(RightId)+1 from SecRights), 3, 'BankDetailDialog_UpdateBranches', 			'BankDetailDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);

				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'BANKDETAIL_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'BankDetailDialog_ECS'), 					1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'BANKDETAIL_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'BankDetailDialog_DDA'), 					1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'BANKDETAIL_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'BankDetailDialog_DD'), 					1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'BANKDETAIL_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'BankDetailDialog_NACH'), 					1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'BANKDETAIL_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'BankDetailDialog_Cheque'), 				1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'BANKDETAIL_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'BankDetailDialog_Emandate'),  			1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'BANKDETAIL_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'BankDetailDialog_AllowedSources'), 		1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'BANKDETAIL_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_BankDetailDialog_btnMultiSource'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'BANKDETAIL_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'BankDetailDialog_UpdateBranches'), 		1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#94.25_pre" author="saikiran.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'bmtbankdetail_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#94.25" author="saikiran.n">
		<createView viewName="BMTBANKDETAIL_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT BANKCODE
					, BANKNAME
					, BANKSHORTCODE
					, ACCNOLENGTH
					, ALLOWMULTIPLEIFSC
					, MINACCNOLENGTH
					, NACH
					, DDA
					, DD
					, ECS
					, CHEQUE
					, EMANDATE
					, ALLOWEDSOURCES
					, UPDATEBRANCHES
					, ACTIVE
					, VERSION
					, LASTMNTBY
					, LASTMNTON
					, RECORDSTATUS
					, ROLECODE
					, NEXTROLECODE
					, TASKID
					, NEXTTASKID
					, RECORDTYPE
					, WORKFLOWID
				FROM BMTBANKDETAIL
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#94.25_post" author="saikiran.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'bmtbankdetail_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#94.26_pre" author="saikiran.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'bmtbankdetail_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#94.26" author="saikiran.n">
		<createView viewName="BMTBANKDETAIL_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT BANKCODE
					, BANKNAME
					, BANKSHORTCODE
					, ACCNOLENGTH
					, ALLOWMULTIPLEIFSC
					, MINACCNOLENGTH
					, NACH
					, DDA
					, DD
					, ECS
					, CHEQUE
					, EMANDATE
					, ALLOWEDSOURCES
					, UPDATEBRANCHES
					, ACTIVE
					, VERSION
					, LASTMNTBY
					, LASTMNTON
					, RECORDSTATUS
					, ROLECODE
					, NEXTROLECODE
					, TASKID
					, NEXTTASKID
					, RECORDTYPE
					, WORKFLOWID
				FROM BMTBANKDETAIL_TEMP
				UNION ALL 
				SELECT BANKCODE
					, BANKNAME
					, BANKSHORTCODE
					, ACCNOLENGTH
					, ALLOWMULTIPLEIFSC
					, MINACCNOLENGTH
					, NACH
					, DDA
					, DD
					, ECS
					, CHEQUE
					, EMANDATE
					, ALLOWEDSOURCES
					, UPDATEBRANCHES
					, ACTIVE
					, VERSION
					, LASTMNTBY
					, LASTMNTON
					, RECORDSTATUS
					, ROLECODE
					, NEXTROLECODE
					, TASKID
					, NEXTTASKID
					, RECORDTYPE
					, WORKFLOWID
				FROM BMTBANKDETAIL WHERE NOT EXISTS (SELECT 1 FROM BMTBANKDETAIL_TEMP WHERE BANKCODE = BMTBANKDETAIL.BANKCODE) 
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#94.26_post" author="saikiran.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'bmtbankdetail_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#99.0" author="saikrishna.b">
		<createTable tableName="Presentment_Extraction_Job">
			<column name="ID" type="bigint" autoIncrement="true">
				<constraints nullable="false" />
			</column>
			<column name="Name" type="varchar(10)" />
			<column name="StartTime" type="datetime" />
			<column name="EndTime" type="datetime" />
			<column name="SuccessRecords" type="int" />
			<column name="FailedRecords" type="int" />
			<column name="TotalRecords" type="int" />
			<column name="Remarks" type="varchar(100)" />
		</createTable>
	</changeSet>

	<changeSet id="ST#99.0.1" author="saikrishna.b">
		<addPrimaryKey tableName="Presentment_Extraction_Job" columnNames="ID" constraintName="pk_pej_ID" />
	</changeSet>

	<changeSet id="ST#99.1" author="saikrishna.b">
		<createTable tableName="Presentment_Extraction_Stage">
			<column name="ID" type="bigint" autoIncrement="true">
				<constraints nullable="false" />
			</column>
			<column name="JobID" type="bigint" />
			<column name="FinID" type="bigint" />
			<column name="FinReference" type="varchar(20)" />
			<column name="FinType" type="varchar(8)" />
			<column name="ProductCategory" type="varchar(8)" />
			<column name="FinBranch" type="varchar(12)" />
			<column name="EntityCode" type="varchar(8)" />
			<column name="BpiTreatment" type="char(1)" />
			<column name="GrcPeriodEndDate" type="datetime" />
			<column name="GrcAdvType" type="varchar(10)" />
			<column name="AdvType" type="varchar(10)" />
			<column name="AdvStage" type="varchar(10)" />
			<column name="SchDate" type="datetime" />
			<column name="DefSchdDate" type="datetime" />
			<column name="SchSeq" type="bigint" />
			<column name="InstNumber" type="int" />
			<column name="BpiOrHoliday" type="char(1)" />
			<column name="ProfitSchd" type="decimal(18,0)" />
			<column name="PrincipalSchd" type="decimal(18,0)" />
			<column name="FeeSchd" type="decimal(18,0)" />
			<column name="TDSAmount" type="decimal(18,0)" />
			<column name="SchdPftPaid" type="decimal(18,0)" />
			<column name="SchdPriPaid" type="decimal(18,0)" />
			<column name="SchdFeePaid" type="decimal(18,0)" />
			<column name="TDSPaid" type="decimal(18,0)" />
			<column name="InstrumentType" type="varchar(20)" />
			<column name="MandateId" type="bigint" />
			<column name="MandateType" type="varchar(20)" />
			<column name="EmandateSource" type="varchar(50)" />
			<column name="MandateStatus" type="varchar(20)" />
			<column name="MandateExpiryDate" type="datetime" />
			<column name="ChequeID" type="int" />
			<column name="ChequeType" type="varchar(8)" />
			<column name="ChequeStatus" type="varchar(10)" />
			<column name="ChequeDate" type="datetime" />
			<column name="PartnerBankId" type="bigint" />
			<column name="BranchCode" type="varchar(12)" />
			<column name="BankCode" type="varchar(8)" />
			<column name="DueDate" type="datetime" />
			<column name="EmployerId" type="bigint" />
			<column name="EmployerName" type="varchar(50)" />
			<column name="HeaderId" type="bigint" />
			<column name="ProcessingFlag" type="smallint" />
		</createTable>
	</changeSet>

	<changeSet id="ST#99.2" author="saikrishna.b">
		<addPrimaryKey tableName="Presentment_Extraction_Stage" columnNames="ID" constraintName="pk_pes_ID" />
	</changeSet>

	<changeSet id="ST#99.3" author="saikrishna.b" dbms="postgresql, oracle">
		<addDefaultValue columnName="ProcessingFlag" tableName="Presentment_Extraction_Stage" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#99.3" author="saikrishna.b" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE PRESENTMENT_EXTRACTION_STAGE ADD CONSTRAINT DF_PS_PROCESSINGFLAG DEFAULT 0 FOR PROCESSINGFLAG;
			]]>
		</sql>
	</changeSet>
	<changeSet id="ST#99.4" author="saikrishna.b">
		<createTable tableName="Presentment_Consecutive_Bounce">
			<column name="ID" type="bigint" autoIncrement="true">
				<constraints nullable="false" />
			</column>
			<column name="MandateId" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="BounceId" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="LastBounceDate" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="BounceCount" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="CreatedOn" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="LastMnton" type="datetime">
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>

	<changeSet id="ST#99.5" author="saikrishna.b">
		<addPrimaryKey tableName="Presentment_consecutive_Bounce" columnNames="ID" constraintName="pk_pcb_id" />
	</changeSet>

	<changeSet id="ST#99.6" author="saikrishna.b">
		<addForeignKeyConstraint constraintName="fk_pcb_BounceId" referencedTableName="BounceReasons"
			referencedColumnNames="BounceId" baseTableName="Presentment_consecutive_Bounce" baseColumnNames="BounceId" />
	</changeSet>

	<changeSet id="ST#99.7.0" author="saikrishna.b">
		<createIndex tableName="Presentment_consecutive_Bounce" indexName="idx_pcb_mid" unique="true">
			<column name="MandateId" type="bigint" />
		</createIndex>
	</changeSet>

	<changeSet id="ST#112.0" author="saikrishna.b">
		<createSequence sequenceName="SEQ_Presentment_Exclude_Codes" minValue="1"
			maxValue="9223372036854775807" incrementBy="1" startValue="1" />
	</changeSet>

	<changeSet id="ST#112.1" author="sandeepkumar.m">
		<createTable tableName="Presentment_Exclude_Codes">
			<column name="ID" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="Code" type="varchar(20)">
				<constraints nullable="false" />
			</column>
			<column name="Description" type="varchar(100)">
				<constraints nullable="false" />
			</column>
			<column name="ExcludeId" type="int" />
			<column name="BounceID" type="bigint" />
			<column name="CreateBounceOnDueDate" type="boolean">
				<constraints nullable="false" />
			</column>
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="CreatedBy" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="CreatedOn" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="ApprovedBy" type="bigint" />
			<column name="ApprovedOn" type="datetime" />
			<column name="LastMntBy" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="LastMnton" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="Active" type="boolean">
				<constraints nullable="false" />
			</column>
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkFloWId" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet id="ST#112.1.1" author="saikrishna.b">
		<addColumn tableName="Presentment_Exclude_Codes">
			<column name="InstrumentType" type="varchar(10)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#112.2" author="sandeepkumar.m">
		<addPrimaryKey tableName="Presentment_Exclude_Codes" columnNames="ID" constraintName="pk_Pec" />
	</changeSet>

	<changeSet id="ST#112.3.1" author="saikrishna.b">
		<dropUniqueConstraint tableName="Presentment_Exclude_Codes" uniqueColumns="Code"
			constraintName="uk_pec_code" />
	</changeSet>

	<changeSet id="ST#112.3.2" author="sandeepkumar.m">
		<addUniqueConstraint tableName="Presentment_Exclude_Codes" columnNames="Code,InstrumentType"
			constraintName="uk_pec_codeinstrumentType" />
	</changeSet>

	<changeSet id="ST#112.4" author="sandeepkumar.m" dbms="postgresql, oracle">
		<addDefaultValue columnName="Version" tableName="Presentment_Exclude_Codes" defaultValue="0" />
		<addDefaultValue columnName="Active" tableName="Presentment_Exclude_Codes" defaultValue="0" />
		<addDefaultValue columnName="CreateBounceOnDueDate" tableName="Presentment_Exclude_Codes"
			defaultValue="0" />
	</changeSet>

	<changeSet id="ST#112.4" author="sandeepkumar.m" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE PRESENTMENT_EXCLUDE_CODES ADD CONSTRAINT DF_PEC_VERSION DEFAULT 0 FOR VERSION;
				ALTER TABLE PRESENTMENT_EXCLUDE_CODES ADD CONSTRAINT DF_PEC_ACTIVE DEFAULT 0 FOR ACTIVE;
				ALTER TABLE PRESENTMENT_EXCLUDE_CODES ADD CONSTRAINT DF_PEC_CREATEBOUNCEONDUEDATE DEFAULT 0 FOR CREATEBOUNCEONDUEDATE;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#112.5" author="sandeepkumar.m">
		<addForeignKeyConstraint constraintName="fk_pec_bounceid" referencedTableName="BounceReasons"
			referencedColumnNames="BounceId" baseTableName="Presentment_Exclude_Codes" baseColumnNames="BounceId" />
	</changeSet>

	<changeSet id="ST#112.6" author="saikrishna.b">
		<sql>
			<![CDATA[
				INSERT INTO PRESENTMENT_EXCLUDE_CODES (ID, CODE, DESCRIPTION, EXCLUDEID, BOUNCEID, CREATEBOUNCEONDUEDATE, VERSION, CREATEDBY, CREATEDON, APPROVEDBY, APPROVEDON, LASTMNTBY,LASTMNTON, ACTIVE, RECORDSTATUS,ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOwID) VALUES(1, 'EMI_IN_ADVANCE', 			'Due adjusted from the EMI in Advance', 	1, NULL, 0, 1, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO PRESENTMENT_EXCLUDE_CODES (ID, CODE, DESCRIPTION, EXCLUDEID, BOUNCEID, CREATEBOUNCEONDUEDATE, VERSION, CREATEDBY, CREATEDON, APPROVEDBY, APPROVEDON, LASTMNTBY,LASTMNTON, ACTIVE, RECORDSTATUS,ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOwID) VALUES(2, 'EMI_HOLD', 				'EMI is marked as hold', 					2, NULL, 0, 1, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO PRESENTMENT_EXCLUDE_CODES (ID, CODE, DESCRIPTION, EXCLUDEID, BOUNCEID, CREATEBOUNCEONDUEDATE, VERSION, CREATEDBY, CREATEDON, APPROVEDBY, APPROVEDON, LASTMNTBY,LASTMNTON, ACTIVE, RECORDSTATUS,ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOwID) VALUES(3, 'MANDATE_HOLD', 			'Mandate is marked as hold', 				3, NULL, 0, 1, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO PRESENTMENT_EXCLUDE_CODES (ID, CODE, DESCRIPTION, EXCLUDEID, BOUNCEID, CREATEBOUNCEONDUEDATE, VERSION, CREATEDBY, CREATEDON, APPROVEDBY, APPROVEDON, LASTMNTBY,LASTMNTON, ACTIVE, RECORDSTATUS,ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOwID) VALUES(4, 'MANDATE_NOT_APPROVED', 	'Mandate is not registered', 				4, NULL, 0, 1, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO PRESENTMENT_EXCLUDE_CODES (ID, CODE, DESCRIPTION, EXCLUDEID, BOUNCEID, CREATEBOUNCEONDUEDATE, VERSION, CREATEDBY, CREATEDON, APPROVEDBY, APPROVEDON, LASTMNTBY,LASTMNTON, ACTIVE, RECORDSTATUS,ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOwID) VALUES(5, 'MANDATE_EXPIRED', 		'Mandate Expired', 							5, NULL, 0, 1, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO PRESENTMENT_EXCLUDE_CODES (ID, CODE, DESCRIPTION, EXCLUDEID, BOUNCEID, CREATEBOUNCEONDUEDATE, VERSION, CREATEDBY, CREATEDON, APPROVEDBY, APPROVEDON, LASTMNTBY,LASTMNTON, ACTIVE, RECORDSTATUS,ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOwID) VALUES(6, 'MANUAL_EXCLUDE', 			'Excluded Manually', 						6, NULL, 0, 1, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO PRESENTMENT_EXCLUDE_CODES (ID, CODE, DESCRIPTION, EXCLUDEID, BOUNCEID, CREATEBOUNCEONDUEDATE, VERSION, CREATEDBY, CREATEDON, APPROVEDBY, APPROVEDON, LASTMNTBY,LASTMNTON, ACTIVE, RECORDSTATUS,ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOwID) VALUES(7, 'MANDATE_REJECTED',		'Mandate rejected',							7, NULL, 0, 1, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO PRESENTMENT_EXCLUDE_CODES (ID, CODE, DESCRIPTION, EXCLUDEID, BOUNCEID, CREATEBOUNCEONDUEDATE, VERSION, CREATEDBY, CREATEDON, APPROVEDBY, APPROVEDON, LASTMNTBY,LASTMNTON, ACTIVE, RECORDSTATUS,ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOwID) VALUES(8, 'INT_ADV', 				'Due adjusted from interest in advance', 	8, NULL, 0, 1, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1, 'Approved', NULL, NULL, NULL, NULL, NULL, 0); 
				INSERT INTO PRESENTMENT_EXCLUDE_CODES (ID, CODE, DESCRIPTION, EXCLUDEID, BOUNCEID, CREATEBOUNCEONDUEDATE, VERSION, CREATEDBY, CREATEDON, APPROVEDBY, APPROVEDON, LASTMNTBY,LASTMNTON, ACTIVE, RECORDSTATUS,ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOwID) VALUES(9, 'EMI_ADV', 				'Due adjusted from EMI in advance', 		9, NULL, 0, 1, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#112.7" author="sandeepkumar.m">
		<createTable tableName="Presentment_Exclude_Codes_temp">
			<column name="ID" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="Code" type="varchar(20)">
				<constraints nullable="false" />
			</column>
			<column name="Description" type="varchar(100)">
				<constraints nullable="false" />
			</column>
			<column name="ExcludeId" type="int" />
			<column name="BounceID" type="bigint" />
			<column name="CreateBounceOnDueDate" type="boolean">
				<constraints nullable="false" />
			</column>
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="CreatedBy" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="CreatedOn" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="ApprovedBy" type="bigint" />
			<column name="ApprovedOn" type="datetime" />
			<column name="LastMntBy" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="LastMnton" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="Active" type="boolean">
				<constraints nullable="false" />
			</column>
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkFloWId" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet id="ST#112.7.1" author="saikrishna.b">
		<addColumn tableName="Presentment_Exclude_Codes_temp">
			<column name="InstrumentType" type="varchar(10)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#112.8" author="sandeepkumar.m">
		<addPrimaryKey tableName="Presentment_Exclude_Codes_temp" columnNames="ID" constraintName="pk_pec_t_id" />
	</changeSet>

	<changeSet id="ST#112.9.1" author="saikrishna.b">
		<dropUniqueConstraint tableName="Presentment_Exclude_Codes_temp" uniqueColumns="Code"
			constraintName="uk_pec_t_code" />
	</changeSet>

	<changeSet id="ST#112.9.2" author="sandeepkumar.m">
		<addUniqueConstraint tableName="Presentment_Exclude_Codes_temp" columnNames="Code,InstrumentType"
			constraintName="uk_pec_t_codeinstrumentType" />
	</changeSet>

	<changeSet id="ST#112.10" author="sandeepkumar.m" dbms="postgresql, oracle">
		<addDefaultValue columnName="Version" tableName="Presentment_Exclude_Codes_temp" defaultValue="0" />
		<addDefaultValue columnName="Active" tableName="Presentment_Exclude_Codes_temp" defaultValue="0" />
		<addDefaultValue columnName="CreateBounceOnDueDate" tableName="Presentment_Exclude_Codes_temp"
			defaultValue="0" />
	</changeSet>

	<changeSet id="ST#112.10" author="sandeepkumar.m" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE PRESENTMENT_EXCLUDE_CODES_TEMP ADD CONSTRAINT DF_PECT_VERSION DEFAULT 0 FOR VERSION;
				ALTER TABLE PRESENTMENT_EXCLUDE_CODES_TEMP ADD CONSTRAINT DF_PECT_ACTIVE DEFAULT 0 FOR ACTIVE;
				ALTER TABLE PRESENTMENT_EXCLUDE_CODES_TEMP ADD CONSTRAINT DF_PECT_CREATEBOUNCEONDUEDATE DEFAULT 0 FOR CREATEBOUNCEONDUEDATE;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#112.11" author="sandeepkumar.m">
		<addForeignKeyConstraint constraintName="fk_pec_bounceid_t"
			referencedTableName="BounceReasons" referencedColumnNames="BounceId" baseTableName="Presentment_Exclude_Codes_temp"
			baseColumnNames="BounceId" />
	</changeSet>

	<changeSet id="ST#112.12.2" author="sandeepkumar.m">
		<sql>
			<![CDATA[
			    DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'PRESENTMENT_EXCLUDE_CODES_MAKER');
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'PRESENTMENT_EXCLUDE_CODES_APPROVER');
				
				DELETE FROM SECROLES WHERE ROLECD ='PRESENTMENT_EXCLUDE_CODES_MAKER';
				DELETE FROM SECROLES WHERE ROLECD ='PRESENTMENT_EXCLUDE_CODES_APPROVER';
			
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'PRESENTMENT_EXCLUDE_CODES_MAKER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'PRESENTMENT_EXCLUDE_CODES_APPROVER');
				
				DELETE FROM SECGROUPS WHERE GRPCODE ='PRESENTMENT_EXCLUDE_CODES_MAKER';
				DELETE FROM SECGROUPS WHERE GRPCODE ='PRESENTMENT_EXCLUDE_CODES_APPROVER';
				
				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='menuItem_PresentmentExcludeCodes';
				DELETE FROM SECRIGHTS WHERE RightName ='button_PresentmentExcludeCode_btnPresentmentExcludeCode';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='button_PresentmentExcludeCode_btnDelete';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='PresentmentExcludeCodeDialog_Code';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='PresentmentExcludeCodeDialog_Description';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='PresentmentExcludeCodeDialog_BounceOnDueDate';
				DELETE FROM SECRIGHTS WHERE RightName ='PresentmentExcludeCodeDialog_InstrumentType';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='PresentmentExcludeCodeDialog_BounceCode';
				
				INSERT INTO SECRIGHTS(RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menuItem_PresentmentExcludeCodes', 'MENU', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2, 'button_PresentmentExcludeCode_btnPresentmentExcludeCode', 'PresentmentExcludeCodeDialog', 0, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2, 'button_PresentmentExcludeCode_btnDelete', 'PresentmentExcludeCodeDialog', 0, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'PresentmentExcludeCodeDialog_Code', 'PresentmentExcludeCodeDialog', 0, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'PresentmentExcludeCodeDialog_Description', 'PresentmentExcludeCodeDialog', 0, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
		    	INSERT INTO SECRIGHTS(RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'PresentmentExcludeCodeDialog_BounceOnDueDate', 'PresentmentExcludeCodesDialog', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		    	
		    	INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'PresentmentExcludeCodeDialog_InstrumentType', 'PresentmentExcludeCodeDialog', 0, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
		    	
		    	INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'PresentmentExcludeCodeDialog_BounceCode', 'PresentmentExcludeCodeDialog', 0, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
		    
		    	INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'PRESENTMENT_EXCLUDE_CODES_MAKER', 'WF Maker for BounceCode', 0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'PRESENTMENT_EXCLUDE_CODES_APPROVER', 'WF Approver for BounceCode', 0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
		   
		   		INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'PRESENTMENT_EXCLUDE_CODES_MAKER'),    (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menuItem_PresentmentExcludeCodes'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		   		INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'PRESENTMENT_EXCLUDE_CODES_APPROVER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menuItem_PresentmentExcludeCodes'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		   		
		   		INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),(SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'PRESENTMENT_EXCLUDE_CODES_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_PresentmentExcludeCode_btnPresentmentExcludeCode'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
		   		INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),(SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'PRESENTMENT_EXCLUDE_CODES_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_PresentmentExcludeCode_btnDelete'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
		   		
		   		INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'PRESENTMENT_EXCLUDE_CODES_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'PresentmentExcludeCodeDialog_Code'), 			1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		   		INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'PRESENTMENT_EXCLUDE_CODES_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'PresentmentExcludeCodeDialog_Description'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		   		INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'PRESENTMENT_EXCLUDE_CODES_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'PresentmentExcludeCodeDialog_BounceOnDueDate'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		   		INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'PRESENTMENT_EXCLUDE_CODES_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'PresentmentExcludeCodeDialog_instrumentType'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		   		INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'PRESENTMENT_EXCLUDE_CODES_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'PresentmentExcludeCodeDialog_BounceCode'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		   		
		  		INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'PRESENTMENT_EXCLUDE_CODES_MAKER', 'Maker role from Presentment Exclude Codes', '', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0); 
		  		INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'PRESENTMENT_EXCLUDE_CODES_APPROVER', 'Approver role from Presentment Exclude Codes',	'', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		    
		    	INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'PRESENTMENT_EXCLUDE_CODES_MAKER'),    (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'PRESENTMENT_EXCLUDE_CODES_MAKER'),    0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		    	INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'PRESENTMENT_EXCLUDE_CODES_APPROVER'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'PRESENTMENT_EXCLUDE_CODES_APPROVER'), 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		    	
		   		INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'PRESENTMENT_EXCLUDE_CODES_MAKER'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'MSTGRP1_MAKER'), 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		    	INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'PRESENTMENT_EXCLUDE_CODES_APPROVER'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'MSTGRP1_APPROVER'), 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#112.17" author="sandeepkumar.m">
		<addColumn tableName="INSTRUMENT_TYPES">
			<column name="BatchSize" type="int" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#112.18" author="sandeepkumar.m">
		<addColumn tableName="Instrument_Types_Temp">
			<column name="BatchSize" type="int" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#112.19" author="saikrishna.b" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE INSTRUMENT_TYPES ADD CONSTRAINT DF_IT_BATCHSIZE DEFAULT 0 FOR BATCHSIZE;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#112.19" author="saikrishna.b" dbms="postgresql, oracle">
		<addDefaultValue columnName="BatchSize" tableName="INSTRUMENT_TYPES" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#112.20" author="saikrishna.b" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE INSTRUMENT_TYPES_TEMP ADD CONSTRAINT DF_ITT_BATCHSIZE DEFAULT 0 FOR BATCHSIZE;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#112.20" author="saikrishna.b" dbms="postgresql, oracle">
		<addDefaultValue columnName="BatchSize" tableName="Instrument_Types_Temp" defaultValue="0" />
	</changeSet>
	
	<changeSet id="ST#112.21_pre" author="saikrishna.b" dbms="mssql">
		<sql>
			<![CDATA[
				  alter table Presentment_Exclude_Codes 	 drop constraint DF_PEC_CREATEBOUNCEONDUEDATE;
				  alter table Presentment_Exclude_Codes_TEMP drop constraint DF_PECT_CREATEBOUNCEONDUEDATE;
				]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#112.21" author="sandeepkumar.m">
		<dropColumn tableName="Presentment_Exclude_Codes" columnName="CreateBounceOnDueDate" />
	</changeSet>

	<changeSet id="ST#112.22" author="sandeepkumar.m">
		<dropColumn tableName="Presentment_Exclude_Codes_TEMP" columnName="CreateBounceOnDueDate" />
	</changeSet>

	<changeSet id="ST#112.23" author="saikrishna.b">
		<sql>
			<![CDATA[	
				DELETE FROM Presentment_Exclude_Codes;
				DELETE FROM Presentment_Exclude_Codes_TEMP;
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#112.002" author="sandeep">
		<sql>
			<![CDATA[
   		     	DELETE FROM REPORTLIST WHERE CODE = 'PresentmentExcludeCode';
				INSERT INTO REPORTLIST (CODE, MODULE, FIELDLABELS, FIELDVALUES, FIELDTYPE, ADDFIELDS, REPORTFILENAME, REPORTHEADING, MODULETYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, FORMATREQ) VALUES ('PresentmentExcludeCode', 'PresentmentExcludeCode', 'code,codeDesc,bounceCode,instrumentType' ,'code,description,bounceCode,instrumentType', 'String,String,String,String', null, 'ReportList04', 'PresentmentExcludeCode', 'System Masters', 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0, 0);
        	 ]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#90.0" author="Alekhya.T">
		<createTable tableName="Instrument_Types">
			<column name="ID" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="Code" type="varchar(8)" />
			<column name="Description" type="varchar(100)">
				<constraints nullable="false" />
			</column>
			<column name="Internal" type="boolean">
				<constraints nullable="false" />
			</column>
			<column name="Enabled" type="boolean">
				<constraints nullable="false" />
			</column>
			<column name="AutoExtraction" type="boolean">
				<constraints nullable="false" />
			</column>
			<column name="ExtractionDays" type="smallint">
				<constraints nullable="false" />
			</column>
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="CreatedBy" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="CreatedOn" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="ApprovedBy" type="bigint" />
			<column name="ApprovedOn" type="datetime" />
			<column name="LastMntBy" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="LastMntOn" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="Active" type="boolean">
				<constraints nullable="false" />
			</column>
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkFlowId" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet id="ST#90.1" author="Alekhya.T">
		<addPrimaryKey tableName="Instrument_Types" columnNames="ID" constraintName="PK_Instrument_Type" />
	</changeSet>

	<changeSet id="ST#90.2" author="Alekhya.T">
		<addUniqueConstraint tableName="Instrument_Types" columnNames="Code" constraintName="UK_Codes" />
	</changeSet>

	<changeSet id="ST#90.3" author="Alekhya.T" dbms="posgres,oracle">
		<addDefaultValue tableName="INSTRUMENT_TYPES" columnName="Internal" defaultValue="0" />
		<addDefaultValue tableName="INSTRUMENT_TYPES" columnName="Enabled" defaultValue="0" />
		<addDefaultValue tableName="INSTRUMENT_TYPES" columnName="AutoExtraction" defaultValue="0" />
		<addDefaultValue tableName="INSTRUMENT_TYPES" columnName="ExtractionDays" defaultValue="0" />
		<addDefaultValue tableName="INSTRUMENT_TYPES" columnName="Version" defaultValue="0" />
		<addDefaultValue tableName="INSTRUMENT_TYPES" columnName="Active" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#90.3" author="Alekhya.T" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE INSTRUMENT_TYPES ADD CONSTRAINT DF_IT_INTERNAL DEFAULT       0 FOR INTERNAL;
				ALTER TABLE INSTRUMENT_TYPES ADD CONSTRAINT DF_IT_ENABLED DEFAULT        0 FOR ENABLED;
				ALTER TABLE INSTRUMENT_TYPES ADD CONSTRAINT DF_IT_AUTOEXTRACTION DEFAULT 0 FOR AUTOEXTRACTION;
				ALTER TABLE INSTRUMENT_TYPES ADD CONSTRAINT DF_IT_EXTRACTIONDAYS DEFAULT 0 FOR EXTRACTIONDAYS;
				ALTER TABLE INSTRUMENT_TYPES ADD CONSTRAINT DF_IT_VERSION DEFAULT        0 FOR VERSION;
				ALTER TABLE INSTRUMENT_TYPES ADD CONSTRAINT DF_IT_ACTIVE DEFAULT         0 FOR ACTIVE;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#90.4" author="Alekhya.T">
		<createTable tableName="Instrument_Types_Temp">
			<column name="ID" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="Code" type="varchar(8)" />
			<column name="Description" type="varchar(100)">
				<constraints nullable="false" />
			</column>
			<column name="Internal" type="boolean">
				<constraints nullable="false" />
			</column>
			<column name="Enabled" type="boolean">
				<constraints nullable="false" />
			</column>
			<column name="AutoExtraction" type="boolean">
				<constraints nullable="false" />
			</column>
			<column name="ExtractionDays" type="smallint">
				<constraints nullable="false" />
			</column>
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="CreatedBy" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="CreatedOn" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="ApprovedBy" type="bigint" />
			<column name="ApprovedOn" type="datetime" />
			<column name="LastMntBy" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="LastMntOn" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="Active" type="boolean">
				<constraints nullable="false" />
			</column>
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkFlowId" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet id="ST#90.5" author="Alekhya.T">
		<addPrimaryKey tableName="Instrument_Types_Temp" columnNames="ID" constraintName="PK_Instrument_Type_T" />
	</changeSet>

	<changeSet id="ST#90.6" author="Alekhya.T">
		<addUniqueConstraint tableName="Instrument_Types_Temp" columnNames="Code"
			constraintName="UK_Codes_T" />
	</changeSet>

	<changeSet id="ST#90.7" author="Alekhya.T" dbms="posgres,oracle">
		<addDefaultValue tableName="INSTRUMENT_TYPES_TEMP" columnName="Internal" defaultValue="0" />
		<addDefaultValue tableName="INSTRUMENT_TYPES_TEMP" columnName="Enabled" defaultValue="0" />
		<addDefaultValue tableName="INSTRUMENT_TYPES_TEMP" columnName="AutoExtraction" defaultValue="0" />
		<addDefaultValue tableName="INSTRUMENT_TYPES_TEMP" columnName="ExtractionDays" defaultValue="0" />
		<addDefaultValue tableName="INSTRUMENT_TYPES_TEMP" columnName="Version" defaultValue="0" />
		<addDefaultValue tableName="INSTRUMENT_TYPES_TEMP" columnName="Active" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#90.7" author="Alekhya.T" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE INSTRUMENT_TYPES_TEMP ADD CONSTRAINT DF_ITT_INTERNAL DEFAULT       0 FOR INTERNAL;
				ALTER TABLE INSTRUMENT_TYPES_TEMP ADD CONSTRAINT DF_ITT_ENABLED DEFAULT        0 FOR ENABLED;
				ALTER TABLE INSTRUMENT_TYPES_TEMP ADD CONSTRAINT DF_ITT_AUTOEXTRACTION DEFAULT 0 FOR AUTOEXTRACTION;
				ALTER TABLE INSTRUMENT_TYPES_TEMP ADD CONSTRAINT DF_ITT_EXTRACTIONDAYS DEFAULT 0 FOR EXTRACTIONDAYS;
				ALTER TABLE INSTRUMENT_TYPES_TEMP ADD CONSTRAINT DF_ITT_VERSION DEFAULT        0 FOR VERSION;
				ALTER TABLE INSTRUMENT_TYPES_TEMP ADD CONSTRAINT DF_ITT_ACTIVE DEFAULT         0 FOR ACTIVE;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#90.8" author="Alekhya.T">
		<createSequence sequenceName="Seq_Due_Extraction_Header" minValue="1" maxValue="999999999999999999"
			startValue="1" />
	</changeSet>

	<changeSet id="ST#90.9" author="Alekhya.T">
		<createTable tableName="Due_Extraction_Header">
			<column name="ID" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="ExtractionMonth" type="varchar(10)">
				<constraints nullable="false" />
			</column>
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="CreatedBy" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="CreatedOn" type="datetime">
				<constraints nullable="false" />
			</column>

			<column name="ApprovedBy" type="bigint" />
			<column name="ApprovedOn" type="datetime" />
			<column name="LastMntBy" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="LastMntOn" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="Active" type="boolean">
				<constraints nullable="false" />
			</column>
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkFlowId" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet id="ST#90.10" author="Alekhya.T">
		<addPrimaryKey tableName="Due_Extraction_Header" columnNames="ID"
			constraintName="PK_Due_Extraction_Header" />
	</changeSet>

	<changeSet id="ST#90.11" author="Alekhya.T" dbms="posgres,oracle">
		<addDefaultValue tableName="Due_Extraction_Header" columnName="Version" defaultValue="0" />
		<addDefaultValue tableName="Due_Extraction_Header" columnName="Active" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#90.11" author="Alekhya.T" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE DUE_EXTRACTION_HEADER ADD CONSTRAINT DF_DEH_VERSION DEFAULT 0 FOR VERSION;
				ALTER TABLE DUE_EXTRACTION_HEADER ADD CONSTRAINT DF_DEH_ACTIVE DEFAULT  0 FOR ACTIVE;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#90.12" author="Alekhya.T">
		<createTable tableName="Due_Extraction_Header_Temp">
			<column name="ID" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="ExtractionMonth" type="varchar(10)">
				<constraints nullable="false" />
			</column>
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="CreatedBy" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="CreatedOn" type="datetime">
				<constraints nullable="false" />
			</column>

			<column name="ApprovedBy" type="bigint" />
			<column name="ApprovedOn" type="datetime" />
			<column name="LastMntBy" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="LastMntOn" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="Active" type="boolean">
				<constraints nullable="false" />
			</column>
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkFlowId" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet id="ST#90.13" author="Alekhya.T">
		<addPrimaryKey tableName="Due_Extraction_Header_Temp" columnNames="ID"
			constraintName="PK_Due_Extraction_Header_Temp" />
	</changeSet>

	<changeSet id="ST#90.14" author="Alekhya.T" dbms="posgres,oracle">
		<addDefaultValue tableName="Due_Extraction_Header_Temp" columnName="Version" defaultValue="0" />
		<addDefaultValue tableName="Due_Extraction_Header_Temp" columnName="Active" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#90.14" author="Alekhya.T" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE DUE_EXTRACTION_HEADER_TEMP ADD CONSTRAINT DF_DEHT_VERSION DEFAULT 0 FOR VERSION;
				ALTER TABLE DUE_EXTRACTION_HEADER_TEMP ADD CONSTRAINT DF_DEHT_ACTIVE DEFAULT  0 FOR ACTIVE;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#90.15" author="Alekhya.T">
		<createSequence sequenceName="Seq_Due_Extraction_Config" minValue="1" maxValue="999999999999999999"
			startValue="1" />
	</changeSet>

	<changeSet id="ST#90.16" author="Alekhya.T">
		<createTable tableName="Due_Extraction_Config">
			<column name="ID" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="MonthID" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="InstrumentID" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="DueDate" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="ExtractionDate" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="Modified" type="boolean" />
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="CreatedBy" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="CreatedOn" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="ApprovedBy" type="bigint" />
			<column name="ApprovedOn" type="datetime" />
			<column name="LastMntBy" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="LastMntOn" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="Active" type="boolean">
				<constraints nullable="false" />
			</column>
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkFlowId" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet id="ST#90.17" author="Alekhya.T">
		<addPrimaryKey tableName="Due_Extraction_Config" columnNames="ID"
			constraintName="PK_Due_Extraction_Config" />
	</changeSet>

	<changeSet id="ST#90.18" author="Alekhya.T">
		<addForeignKeyConstraint constraintName="FK_Due_Extraction_Config_ID"
			referencedTableName="Instrument_Types" referencedColumnNames="ID" baseColumnNames="InstrumentID"
			baseTableName="Due_Extraction_Config" />
	</changeSet>

	<changeSet id="ST#90.19" author="Alekhya.T">
		<addForeignKeyConstraint constraintName="FK_DEC_MonthId"
			referencedTableName="Due_Extraction_Header" referencedColumnNames="ID" baseColumnNames="MonthId"
			baseTableName="Due_Extraction_Config" />
	</changeSet>

	<changeSet id="ST#90.20" author="Alekhya.T">
		<addUniqueConstraint tableName="Due_Extraction_Config"
			columnNames="InstrumentID, DueDate, ExtractionDate" constraintName="UK_DEC_II_DD_ED" />
	</changeSet>

	<changeSet id="ST#90.21" author="Alekhya.T" dbms="posgres,oracle">
		<addDefaultValue tableName="Due_Extraction_Config" columnName="Version" defaultValue="0" />
		<addDefaultValue tableName="Due_Extraction_Config" columnName="Active" defaultValue="0" />
		<addDefaultValue tableName="Due_Extraction_Config" columnName="Modified" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#90.21" author="Alekhya.T" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE DUE_EXTRACTION_CONFIG ADD CONSTRAINT DF_DEC_VERSION DEFAULT  0 FOR VERSION;
				ALTER TABLE DUE_EXTRACTION_CONFIG ADD CONSTRAINT DF_DEC_ACTIVE DEFAULT   0 FOR ACTIVE;
				ALTER TABLE DUE_EXTRACTION_CONFIG ADD CONSTRAINT DF_DEC_MODIFIED DEFAULT 0 FOR MODIFIED;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#90.22" author="Alekhya.T">
		<createTable tableName="Due_Extraction_Config_Temp">
			<column name="ID" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="MonthID" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="InstrumentID" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="DueDate" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="ExtractionDate" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="Modified" type="boolean" />
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="CreatedBy" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="CreatedOn" type="datetime">
				<constraints nullable="false" />
			</column>

			<column name="ApprovedBy" type="bigint" />
			<column name="ApprovedOn" type="datetime" />
			<column name="LastMntBy" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="LastMntOn" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="Active" type="boolean">
				<constraints nullable="false" />
			</column>
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkFlowId" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet id="ST#90.23" author="Alekhya.T">
		<addPrimaryKey tableName="Due_Extraction_Config_Temp" columnNames="ID"
			constraintName="PK_Due_Extraction_Config_T" />
	</changeSet>

	<changeSet id="ST#90.24" author="Alekhya.T">
		<addForeignKeyConstraint constraintName="FK_Due_Extraction_Config_T_ID"
			referencedTableName="Instrument_Types" referencedColumnNames="ID" baseColumnNames="InstrumentID"
			baseTableName="Due_Extraction_Config_Temp" />
	</changeSet>

	<changeSet id="ST#90.25" author="Alekhya.T">
		<addForeignKeyConstraint constraintName="FK_DECT_MonthId"
			referencedTableName="Due_Extraction_Header" referencedColumnNames="ID" baseColumnNames="MonthID"
			baseTableName="Due_Extraction_Config_Temp" />
	</changeSet>

	<changeSet id="ST#90.26" author="Alekhya.T">
		<addUniqueConstraint tableName="Due_Extraction_Config_Temp"
			columnNames="InstrumentID, DueDate, ExtractionDate" constraintName="UK_DEC_II_DD_ED_Te" />
	</changeSet>

	<changeSet id="ST#90.27" author="Alekhya.T" dbms="postgresql, oracle">
		<addDefaultValue tableName="Due_Extraction_Config_Temp" columnName="Version" defaultValue="0" />
		<addDefaultValue tableName="Due_Extraction_Config_Temp" columnName="Active" defaultValue="0" />
		<addDefaultValue tableName="Due_Extraction_Config_Temp" columnName="Modified" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#90.27" author="Alekhya.T" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE DUE_EXTRACTION_CONFIG_TEMP ADD CONSTRAINT DF_DECT_VERSION  DEFAULT 0 FOR VERSION;
				ALTER TABLE DUE_EXTRACTION_CONFIG_TEMP ADD CONSTRAINT DF_DECT_ACTIVE   DEFAULT 0 FOR ACTIVE;
				ALTER TABLE DUE_EXTRACTION_CONFIG_TEMP ADD CONSTRAINT DF_DECT_MODIFIED DEFAULT 0 FOR MODIFIED;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#90.28" author="Alekhya.T">
		<createTable tableName="Due_Extraction_Config_Log">
			<column name="ID" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="MonthID" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="InstrumentID" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="DueDate" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="ExtractionDate" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="Modified" type="boolean" />
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="CreatedBy" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="CreatedOn" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="ApprovedBy" type="bigint" />
			<column name="ApprovedOn" type="datetime" />
			<column name="LastMntBy" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="LastMntOn" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="Active" type="boolean">
				<constraints nullable="false" />
			</column>
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkFlowId" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet id="ST#90.29" author="Alekhya.T">
		<addPrimaryKey tableName="Due_Extraction_Config_Log" columnNames="ID"
			constraintName="PK_Due_Extraction_Config_Log" />
	</changeSet>

	<changeSet id="ST#90.30.1_temp" author="Gopal.p">
		<sql>
			<![CDATA[
				DELETE FROM DUE_EXTRACTION_CONFIG_TEMP;
				DELETE FROM DUE_EXTRACTION_CONFIG;
				
				DELETE FROM DUE_EXTRACTION_HEADER_TEMP;
				DELETE FROM DUE_EXTRACTION_HEADER;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#90.30.1" author="Alekhya.T">
		<sql>
			<![CDATA[
				DELETE FROM INSTRUMENT_TYPES;
				
				INSERT INTO INSTRUMENT_TYPES (ID, CODE, DESCRIPTION, INTERNAL, ENABLED, AUTOEXTRACTION, EXTRACTIONDAYS, VERSION, CREATEDBY, CREATEDON, APPROVEDBY, APPROVEDON, LASTMNTBY, LASTMNTON, ACTIVE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM INSTRUMENT_TYPES), 'ECS',    'ELECTRONIC CLEARING SERVICE', 					0, 1, 0, 5, 1, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO INSTRUMENT_TYPES (ID, CODE, DESCRIPTION, INTERNAL, ENABLED, AUTOEXTRACTION, EXTRACTIONDAYS, VERSION, CREATEDBY, CREATEDON, APPROVEDBY, APPROVEDON, LASTMNTBY, LASTMNTON, ACTIVE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM INSTRUMENT_TYPES), 'NACH',   'NATIONAL AUTOMATED CLEARING HOUSE', 				0, 1, 0, 5, 1, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO INSTRUMENT_TYPES (ID, CODE, DESCRIPTION, INTERNAL, ENABLED, AUTOEXTRACTION, EXTRACTIONDAYS, VERSION, CREATEDBY, CREATEDON, APPROVEDBY, APPROVEDON, LASTMNTBY, LASTMNTON, ACTIVE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM INSTRUMENT_TYPES), 'PDC',    'POST DATED CHEQUE', 								0, 1, 0, 5, 1, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO INSTRUMENT_TYPES (ID, CODE, DESCRIPTION, INTERNAL, ENABLED, AUTOEXTRACTION, EXTRACTIONDAYS, VERSION, CREATEDBY, CREATEDON, APPROVEDBY, APPROVEDON, LASTMNTBY, LASTMNTON, ACTIVE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM INSTRUMENT_TYPES), 'EMNDT',  'ELECTRONIC MANDATE', 							0, 1, 0, 5, 1, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO INSTRUMENT_TYPES (ID, CODE, DESCRIPTION, INTERNAL, ENABLED, AUTOEXTRACTION, EXTRACTIONDAYS, VERSION, CREATEDBY, CREATEDON, APPROVEDBY, APPROVEDON, LASTMNTBY, LASTMNTON, ACTIVE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM INSTRUMENT_TYPES), 'DAS',    'DEDUCTION AGAINST SALARY',			 			0, 1, 0, 0, 1, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO INSTRUMENT_TYPES (ID, CODE, DESCRIPTION, INTERNAL, ENABLED, AUTOEXTRACTION, EXTRACTIONDAYS, VERSION, CREATEDBY, CREATEDON, APPROVEDBY, APPROVEDON, LASTMNTBY, LASTMNTON, ACTIVE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM INSTRUMENT_TYPES), 'SI',     'STANDING INSTRUCTION',			 				0, 1, 0, 0, 1, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO INSTRUMENT_TYPES (ID, CODE, DESCRIPTION, INTERNAL, ENABLED, AUTOEXTRACTION, EXTRACTIONDAYS, VERSION, CREATEDBY, CREATEDON, APPROVEDBY, APPROVEDON, LASTMNTBY, LASTMNTON, ACTIVE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM INSTRUMENT_TYPES), 'IPDC',   'INTERNAL POST DATED CHEQUE', 					1, 1, 0, 5, 1, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1, NULL, NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#90.31.1" author="Alekhya.T" dbms="oralce">
		<sql>
			<![CDATA[
				UPDATE INSTRUMENT_TYPES SET EXTRACTIONDAYS = (SELECT SYSPARMVALUE FROM SMTPARAMETERS WHERE SYSPARMCODE = 'PRESENTMENT_NACH_DATE_FREQUENCY') WHERE CODE = 'ECS';
				UPDATE INSTRUMENT_TYPES SET EXTRACTIONDAYS = (SELECT SYSPARMVALUE FROM SMTPARAMETERS WHERE SYSPARMCODE = 'PRESENTMENT_NACH_DATE_FREQUENCY') WHERE CODE = 'NACH';
				UPDATE INSTRUMENT_TYPES SET EXTRACTIONDAYS = (SELECT SYSPARMVALUE FROM SMTPARAMETERS WHERE SYSPARMCODE = 'PRESENTMENT_NACH_DATE_FREQUENCY') WHERE CODE = 'EMNDT';
				UPDATE INSTRUMENT_TYPES SET EXTRACTIONDAYS = (SELECT SYSPARMVALUE FROM SMTPARAMETERS WHERE SYSPARMCODE = 'PRESENTMENT_PDC_DATE_FREQUENCY')  WHERE CODE = 'PDC';
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#90.31.1" author="Alekhya.T" dbms="postgresql,mssql">
		<sql>
			<![CDATA[
				UPDATE INSTRUMENT_TYPES SET EXTRACTIONDAYS = (SELECT cast(SYSPARMVALUE as smallint) FROM SMTPARAMETERS WHERE SYSPARMCODE = 'PRESENTMENT_NACH_DATE_FREQUENCY') WHERE CODE = 'ECS';
				UPDATE INSTRUMENT_TYPES SET EXTRACTIONDAYS = (SELECT cast(SYSPARMVALUE as smallint) FROM SMTPARAMETERS WHERE SYSPARMCODE = 'PRESENTMENT_NACH_DATE_FREQUENCY') WHERE CODE = 'NACH';
				UPDATE INSTRUMENT_TYPES SET EXTRACTIONDAYS = (SELECT cast(SYSPARMVALUE as smallint) FROM SMTPARAMETERS WHERE SYSPARMCODE = 'PRESENTMENT_NACH_DATE_FREQUENCY') WHERE CODE = 'EMNDT';
				UPDATE INSTRUMENT_TYPES SET EXTRACTIONDAYS = (SELECT cast(SYSPARMVALUE as smallint) FROM SMTPARAMETERS WHERE SYSPARMCODE = 'PRESENTMENT_PDC_DATE_FREQUENCY')  WHERE CODE = 'PDC';
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#90.32" author="Gopal.p">
		<sql>
			<![CDATA[
				DELETE FROM SMTPARAMETERS WHERE SYSPARMCODE = 'PRESENTMENT_NACH_DATE_FREQUENCY';
				DELETE FROM SMTPARAMETERS WHERE SYSPARMCODE = 'PRESENTMENT_PDC_DATE_FREQUENCY';
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#76.29" author="saikiran.n">
		<sql>
			<![CDATA[
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='MANDATE_MAKER')  AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'MandateDialog_UmrNumber');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='MANDATES_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'MandateDialog_UmrNumber');
				
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'MandateDialog_UmrNumber';
			    
			    INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'MandateDialog_UmrNumber', 'MandateDialog', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'MANDATE_MAKER'),  (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'MandateDialog_UmrNumber'),   1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'MANDATES_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'MandateDialog_UmrNumber'),   1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="PSD#206624" author="saikiran.n">
		<sql>
			<![CDATA[
				DELETE FROM SMTPARAMETERS WHERE SYSPARMCODE = 'CUSTOMIZED_SOAREPORT';			
			]]>
		</sql>
	</changeSet>

	<changeSet id="PSD#206193.2_pre" author="saikrishna.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'cluster_hierarchy_lview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="PSD#206193.2" author="saikrishna.b">
		<createView viewName="CLUSTER_HIERARCHY_LVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT DISTINCT T1.ENTITY
	 				, T1.RECORDSTATUS
	 				, T1.RECORDTYPE
	 				, T1.NEXTROLECODE
	 			FROM CLUSTER_HIERARCHY_TEMP T1
	 			UNION ALL
				SELECT DISTINCT T1.ENTITY
					, T1.RECORDSTATUS
					, T1.RECORDTYPE
					, T1.NEXTROLECODE
				FROM CLUSTER_HIERARCHY T1
			    WHERE NOT EXISTS (SELECT 1 FROM CLUSTER_HIERARCHY_TEMP WHERE ENTITY = T1.ENTITY)
			 ]]>
		</createView>
	</changeSet>

	<changeSet id="PSD#206193.2_post" author="saikrishna.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'cluster_hierarchy_lview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#76.30.1" author="saikiran.n">
		<sql>
			<![CDATA[
				DELETE FROM ERRORDETAILS WHERE CODE = 'MNDT01';
				
				INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION) VALUES('MNDT01', 'EN', 'E', 'Employer Id {0} not matched with Customer Current Employer Id.', 'error', 'Approved', null, null, null, null, null, 0, null, 1000, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#76.31.1" author="saikiran.n">
		<sql>
			<![CDATA[
				DELETE FROM ERRORDETAILS WHERE CODE = 'MNDT02';
				
				INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION) VALUES('MNDT02', 'EN', 'E', 'Allow Das is not applicable for this employer {0}.', 'error', 'Approved', null, null, null, null, null, 0, null, 1000, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#112.002" author="Gopal.p">
		<sql>
			<![CDATA[
			    DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'DUE_EXTRACTION_CONFIG_MAKER');
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'DUE_EXTRACTION_CONFIG_APPROVER');
				
				DELETE FROM SECROLES WHERE ROLECD ='DUE_EXTRACTION_CONFIG_MAKER';
				DELETE FROM SECROLES WHERE ROLECD ='DUE_EXTRACTION_CONFIG_APPROVER';
			
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'DUE_EXTRACTION_CONFIG_MAKER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'DUE_EXTRACTION_CONFIG_APPROVER');
				
				DELETE FROM SECGROUPS WHERE GRPCODE ='DUE_EXTRACTION_CONFIG_MAKER';
				DELETE FROM SECGROUPS WHERE GRPCODE ='DUE_EXTRACTION_CONFIG_APPROVER';
				
				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='menuItem_DueExtractionConfig';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='DueExtractionConfig_ExtractionDate';
				
				INSERT INTO SECRIGHTS(RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menuItem_DueExtractionConfig', 'MENU', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
		    	INSERT INTO SECRIGHTS(RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'DueExtractionConfig_ExtractionDate', 'DueExtractionConfigDialog', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		    
		    	INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'DUE_EXTRACTION_CONFIG_MAKER', 'WF Maker for Due Extraction Config', 0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'DUE_EXTRACTION_CONFIG_APPROVER', 'WF Approver for Due Extraction Config', 0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
		   
		   		INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'DUE_EXTRACTION_CONFIG_MAKER'),    (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menuItem_DueExtractionConfig'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		   		INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'DUE_EXTRACTION_CONFIG_APPROVER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menuItem_DueExtractionConfig'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		   		
		   		INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'DUE_EXTRACTION_CONFIG_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'DueExtractionConfig_ExtractionDate'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		   		
		  		INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'DUE_EXTRACTION_CONFIG_MAKER', 'Maker role from Due Extraction Config', '', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0); 
		  		INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'DUE_EXTRACTION_CONFIG_APPROVER', 'Approver role from Due Extraction Config',	'', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		    
		    	INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'DUE_EXTRACTION_CONFIG_MAKER'),    (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'DUE_EXTRACTION_CONFIG_MAKER'),    0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		    	INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'DUE_EXTRACTION_CONFIG_APPROVER'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'DUE_EXTRACTION_CONFIG_APPROVER'), 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		    	
		   		INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'DUE_EXTRACTION_CONFIG_MAKER'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'MSTGRP1_MAKER'), 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		    	INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'DUE_EXTRACTION_CONFIG_APPROVER'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'MSTGRP1_APPROVER'), 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#76.32" author="saikiran.n">
		<sql>
			<![CDATA[
				DELETE FROM SMTPARAMETERS WHERE SYSPARMCODE = 'BANK_CODE';
			
				INSERT INTO SMTPARAMETERS (SYSPARMCODE, SYSPARMDESC, SYSPARMTYPE, SYSPARMMAINT, SYSPARMVALUE, SYSPARMLENGTH, SYSPARMDEC, SYSPARMLIST, SYSPARMVALDMOD, SYSPARMDESCRIPTION, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('BANK_CODE', 'Bank Code', 'String', 1, NULL, 5, 0, NULL, NULL, '', 1, 1000, CURRENT_TIMESTAMP,'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#76.33" author="saikiran.n">
		<sql>
			<![CDATA[
				DELETE FROM ERRORDETAILS WHERE CODE = 'MNDT03';
				
				INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION) VALUES('MNDT03', 'EN', 'E', 'For SI Bank Code should be {0}.', 'error', 'Approved', null, null, null, null, null, 0, null, 1000, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="01" author="Gopal.p">
		<addColumn tableName="Presentment_Extraction_Stage">
			<column name="SchdVersion" type="int" />
		</addColumn>
	</changeSet>

	<changeSet id="02" author="Gopal.p">
		<addColumn tableName="PresentmentDetails">
			<column name="SchdVersion" type="int" />
		</addColumn>
	</changeSet>

	<changeSet id="03" author="Gopal.p">
		<addColumn tableName="PRESENTMENTDETAILS">
			<column name="FateCorrection" type="char(1)" />
		</addColumn>
	</changeSet>

	<changeSet id="04" author="Gopal.p">
		<addColumn tableName="PRESENTMENT_FILEIMPORT">
			<column name="FateCorrection" type="char(1)" />
		</addColumn>
	</changeSet>

	<changeSet id="05" author="Gopal.p">
		<addColumn tableName="PRESENTMENT_RESP_DTLS">
			<column name="FateCorrection" type="char(1)" />
		</addColumn>
	</changeSet>
	
	<changeSet id="05.1" author="Gopal.p">
		<addColumn tableName="PRESENTMENT_RESP_DTLS_LOG">
			<column name="FateCorrection" type="char(1)" />
		</addColumn>
	</changeSet>

	<changeSet id="06" author="saikrishna.b">
		<sql>
			<![CDATA[	
				UPDATE PRESENTMENTDETAILS SET FATECORRECTION = 'N' WHERE FATECORRECTION IS NULL;
			]]>
		</sql>
	</changeSet>

	<changeSet id="07" author="saikrishna.b">
		<sql>
			<![CDATA[	
				UPDATE PRESENTMENT_FILEIMPORT SET FATECORRECTION = 'N' WHERE FATECORRECTION IS NULL;
			]]>
		</sql>
	</changeSet>

	<changeSet id="08" author="saikrishna.b">
		<sql>
			<![CDATA[	
				UPDATE PRESENTMENT_RESP_DTLS SET FATECORRECTION = 'N' WHERE FATECORRECTION IS NULL;
			]]>
		</sql>
	</changeSet>

	<changeSet id="09" author="saikrishna.b">
		<addNotNullConstraint tableName="PRESENTMENTDETAILS" columnName="FateCorrection"
			columnDataType="char(1)" />
	</changeSet>

	<changeSet id="10" author="saikrishna.b">
		<addNotNullConstraint tableName="PRESENTMENT_FILEIMPORT" columnName="FateCorrection"
			columnDataType="char(1)" />
	</changeSet>

	<changeSet id="11" author="saikrishna.b">
		<addNotNullConstraint tableName="PRESENTMENT_RESP_DTLS" columnName="FateCorrection"
			columnDataType="char(1)" />
	</changeSet>

	<changeSet id="12" author="saikrishna.b" dbms="postgresql, oracle">
		<addDefaultValue columnName="FateCorrection" tableName="PRESENTMENTDETAILS" defaultValue="N" />
	</changeSet>

	<changeSet id="12" author="saikrishna.b" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE PRESENTMENTDETAILS ADD CONSTRAINT DF_PD_FATECORRECTION DEFAULT 'N' FOR FATECORRECTION;
			]]>
		</sql>
	</changeSet>

	<changeSet id="13" author="saikrishna.b" dbms="postgresql, oracle">
		<addDefaultValue columnName="FateCorrection" tableName="PRESENTMENT_FILEIMPORT" defaultValue="N" />
	</changeSet>

	<changeSet id="13" author="saikrishna.b" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE PRESENTMENT_FILEIMPORT ADD CONSTRAINT DF_PFI_FATECORRECTION DEFAULT 'N' FOR FATECORRECTION;
			]]>
		</sql>
	</changeSet>

	<changeSet id="14" author="saikrishna.b" dbms="postgresql, oracle">
		<addDefaultValue columnName="FateCorrection" tableName="PRESENTMENT_RESP_DTLS" defaultValue="N" />
	</changeSet>

	<changeSet id="14" author="saikrishna.b" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE PRESENTMENT_RESP_DTLS ADD CONSTRAINT DF_PRD_FATECORRECTION DEFAULT 'N' FOR FATECORRECTION;
			]]>
		</sql>
	</changeSet>

	<changeSet id="15" author="murthy.y">
		<sql>
			<![CDATA[	
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menuItem_PresentmentDetail_PresentmentFileDownlaod');
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'menuItem_PresentmentDetail_PresentmentFileDownlaod';


				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menuItem_PresentmentDetail_PresentmentFileDownlaod', 'FileDBInterface', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);

				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'PRESENTMENTBATCH_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menuItem_PresentmentDetail_PresentmentFileDownlaod'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'PRESENTMENTBATCH_APPROVER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menuItem_PresentmentDetail_PresentmentFileDownlaod'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#76.34" author="saikiran.n">
		<sql>
			<![CDATA[
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='BFSD_ORIGINATION_MAKER')  AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'MandateDialog_EmployeeID');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='BFSD_ORIGINATION_MAKER')  AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'MandateDialog_EmployerName');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='BFSD_ORIGINATION_MAKER')  AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'MandateDialog_ExternalMandate');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='BFSD_ORIGINATION_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'MandateDialog_UmrNumber');
				
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'BFSD_ORIGINATION_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'MandateDialog_EmployeeID'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'BFSD_ORIGINATION_MAKER'),  (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'MandateDialog_EmployerName'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'BFSD_ORIGINATION_MAKER'),  (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'MandateDialog_ExternalMandate'),   1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'BFSD_ORIGINATION_MAKER'),  (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'MandateDialog_UmrNumber'),   1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
			]]>
		</sql>
	</changeSet>

	<changeSet id="PSD#208051" author="Gopal.p">
		<sql>
			<![CDATA[	
				UPDATE CHEQUEDETAIL SET CHEQUETYPE = 'SPDC' WHERE CHEQUETYPE = 'UDC';
				UPDATE CHEQUEDETAIL_TEMP SET CHEQUETYPE = 'SPDC' WHERE CHEQUETYPE = 'UDC';
			]]>
		</sql>
	</changeSet>

	<changeSet id="PSD#205073" author="saikrishna.b">
		<sql>
   			 <![CDATA[
				DELETE FROM REPORTLIST WHERE CODE = 'LPPRule';
				
				INSERT INTO REPORTLIST (CODE, MODULE, FIELDLABELS, FIELDVALUES, FIELDTYPE, ADDFIELDS, REPORTFILENAME, REPORTHEADING, MODULETYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, FORMATREQ) VALUES ('LPPRule', 'Rule', 'listheader_RuleEvent.label,label_RuleCode,listheader_RuleCodeDesc.label', 'ruleEvent,ruleCode,ruleCodeDesc', 'String,String,String', '', 'ReportList03', 'LPP Details', 'Rules Factory', 1, 1000, NULL,'Approved', NULL, NULL, NULL, NULL, NULL, 0, 0);
   			 ]]>
		</sql>
	</changeSet>

	<changeSet id="PSD#208131" author="saikrishna.b">
		<sql>
   			 <![CDATA[
   			 	UPDATE REPORTFILTERFIELDS SET FIELDDBNAME = 'FinBranch' WHERE REPORTID = (SELECT REPORTID FROM REPORTCONFIGURATION WHERE MENUITEMCODE = 'menu_Item_LoanwiseVoucherDetail') AND FIELDID = 3;
   			  ]]>
		</sql>
	</changeSet>

	<changeSet id="ST#92.1_pre" author="Mounika.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'categorywiseevents_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#92.1" author="Mounika.M">
		<createView viewName="CATEGORYWISEEVENTS_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT         
  					T1.AEEVENTCODE,
  					T1.CATEGORYCODE,
  					T1.MANDATORY,
  					T1.SEQORDER,
  					T2.AEEVENTCODEDESC,
  					T2.ACTIVE 
   				FROM  CATEGORYWISEEVENTS  T1 
   				INNER JOIN BMTAEEVENTS T2 ON T1.AEEVENTCODE = T2.AEEVENTCODE
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#92.1_post" author="Mounika.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'categorywiseevents_view');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#92.2" author="Mounika.M">
		<sql>
			<![CDATA[
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'AccountTypeDialog_isControlAc');
				
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'AccountType_Maker'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'AccountTypeDialog_isControlAc'), 1, 0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#4597_01" author="murthy.y">
		<renameColumn tableName="PRESENTMENT_EXTRACTION_STAGE" oldColumnName="JobId" newColumnName="BatchID" />
	</changeSet>

	<changeSet id="ST#4597_02" author="murthy.y">
		<createIndex tableName="PRESENTMENT_EXTRACTION_STAGE" indexName="IDX_PEX_BATCHID">
			<column name="BatchID" type="bigint" />
		</createIndex>
	</changeSet>

	<changeSet id="ST#4597_03" author="murthy.y">
		<renameTable newTableName="PRESENTMENT_BATCH_JOB" oldTableName="PRESENTMENT_EXTRACTION_JOB" />
	</changeSet>

	<changeSet id="ST#4597_04.1" author="murthy.y">
		<addColumn tableName="PRESENTMENTHEADER_TEMP">
			<column name="BatchID" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#4597_04.2" author="murthy.y">
		<createIndex tableName="PRESENTMENTHEADER_TEMP" indexName="IDX_PHT_BATCHID">
			<column name="BatchID" type="bigint" />
		</createIndex>
	</changeSet>

	<changeSet id="ST#4597_04.3" author="murthy.y">
		<addColumn tableName="PRESENTMENTHEADER">
			<column name="BatchID" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#4597_04.4" author="murthy.y">
		<createIndex tableName="PRESENTMENTHEADER" indexName="IDX_PH_BATCHID">
			<column name="BatchID" type="bigint" />
		</createIndex>
	</changeSet>

	<changeSet id="PSD#207229" author="saikiran.n">
		<sql>
			<![CDATA[
				DELETE FROM ERRORDETAILS WHERE CODE = 'MNDT04';
				
				INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION) VALUES('MNDT04', 'EN', 'E', 'Selected mandate is not an Open mandate {0}.', 'error', 'Approved', null, null, null, null, null, 0, null, 1000, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#76.35" author="saikiran.n">
		<sql>
			<![CDATA[
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='MANDATES_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'MandateDialog_eMandateSource');
   				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='MANDATES_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'MandateDialog_eMandateReferenceNo');
				
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'MANDATES_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'MandateDialog_eMandateSource'),   1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
     			INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'MANDATES_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'MandateDialog_eMandateReferenceNo'),   1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#76.22.1_pre" author="saikiran.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'mandates_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#76.22.1" author="saikiran.n">
		<createView viewName="MANDATES_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT M.MANDATEID
					, M.CUSTID
					, M.MANDATEREF
					, M.MANDATETYPE
					, M.BANKBRANCHID
					, M.ACCNUMBER
					, M.ACCHOLDERNAME
					, M.JOINTACCHOLDERNAME
					, M.ACCTYPE
					, M.OPENMANDATE
					, M.STARTDATE
					, M.EXPIRYDATE
					, M.MAXLIMIT
					, M.PERIODICITY
					, M.PHONECOUNTRYCODE
					, M.PHONEAREACODE
					, M.PHONENUMBER
					, M.STATUS
					, M.APPROVALID
					, M.VERSION
					, M.LASTMNTBY
					, M.LASTMNTON
					, M.RECORDSTATUS
					, M.ROLECODE
					, M.NEXTROLECODE
					, M.TASKID
					, M.NEXTTASKID
					, M.RECORDTYPE
					, M.WORKFLOWID
					, M.REASON
					, M.MANDATECCY
					, C.CUSTCIF
					, C.CUSTSHRTNAME
					, BB.BANKCODE
					, BB.BRANCHCODE
					, BB.BRANCHDESC
					, BB.MICR
					, BB.IFSC
					, BB.CITY
					, BD.BANKNAME
					, M.INPUTDATE
					, M.INPUTDATE FROMDATE
					, M.INPUTDATE TODATE
					, M.ACTIVE
					, M.DEFAULTMANDATE
					, 1  USEEXISTING
					, M.ORGREFERENCE
					, PC.PCCITYNAME
					, M.DOCUMENTNAME
					, M.DOCUMENTREF
					, M.EXTERNALREF
					, M.ENTITYCODE
					, E.ENTITYDESC
					, M.PRIMARYMANDATEID
					, M.SWAPISACTIVE
					, M.BARCODENUMBER
					, PB.PARTNERBANKCODE
					, PB.PARTNERBANKNAME
					, M.PARTNERBANKID
					, M.EMANDATESOURCE
					, M.EMANDATEREFERENCENO
					, FM.FINTYPE
					, M.HOLDREASON
					, M.SWAPEFFECTIVEDATE
					, M.SECURITYMANDATE
				FROM MANDATES M
				INNER JOIN CUSTOMERS C ON C.CUSTID = M.CUSTID
				LEFT JOIN BANKBRANCHES BB ON BB.BANKBRANCHID = M.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL BD ON BD.BANKCODE = BB.BANKCODE 
				LEFT JOIN RMTPROVINCEVSCITY PC ON PC.PCCITY = BB.CITY
				LEFT JOIN ENTITY E ON E.ENTITYCODE = M.ENTITYCODE
				LEFT JOIN PARTNERBANKS PB ON PB.PARTNERBANKID = M.PARTNERBANKID
				LEFT JOIN FINANCEMAIN FM ON FM.FINREFERENCE = M.ORGREFERENCE
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#76.22.1_post" author="saikiran.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'mandates_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#76.23.1_pre" author="saikiran.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'mandates_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#76.23.1" author="saikiran.n">
		<createView viewName="MANDATES_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT M.MANDATEID
					, M.CUSTID
					, M.MANDATEREF
					, M.MANDATETYPE
					, M.BANKBRANCHID
					, M.ACCNUMBER
					, M.ACCHOLDERNAME
					, M.JOINTACCHOLDERNAME
					, M.ACCTYPE
					, M.OPENMANDATE
					, M.STARTDATE
					, M.EXPIRYDATE
					, M.MAXLIMIT
					, M.PERIODICITY
					, M.PHONECOUNTRYCODE
					, M.PHONEAREACODE
					, M.PHONENUMBER
					, M.STATUS
					, M.APPROVALID
					, M.VERSION
					, M.LASTMNTBY
					, M.LASTMNTON
					, M.RECORDSTATUS
					, M.ROLECODE
					, M.NEXTROLECODE
					, M.TASKID
					, M.NEXTTASKID
					, M.RECORDTYPE
					, M.WORKFLOWID
					, M.REASON
					, M.MANDATECCY
					, C.CUSTCIF
					, C.CUSTSHRTNAME
					, BB.BANKCODE
					, BB.BRANCHCODE
					, BB.BRANCHDESC
					, BB.MICR
					, BB.IFSC
					, BB.CITY
					, BD.BANKNAME
					, M.INPUTDATE
					, M.ACTIVE
					, M.DEFAULTMANDATE
					, 0 USEEXISTING
					, M.ORGREFERENCE
					, PC.PCCITYNAME
					, M.DOCUMENTNAME
					, M.DOCUMENTREF
					, M.EXTERNALREF
					, M.ENTITYCODE
					, E.ENTITYDESC
					, M.PRIMARYMANDATEID
					, M.SWAPISACTIVE
					, M.BARCODENUMBER
					, PB.PARTNERBANKCODE
					, PB.PARTNERBANKNAME
					, M.PARTNERBANKID
					, M.EMANDATESOURCE
					, M.EMANDATEREFERENCENO
					, FM.FINTYPE
					, M.HOLDREASON
					, M.SWAPEFFECTIVEDATE
					, M.SECURITYMANDATE
				FROM MANDATES_TEMP M
				INNER JOIN CUSTOMERS C ON C.CUSTID = M.CUSTID
				LEFT JOIN BANKBRANCHES BB ON BB.BANKBRANCHID = M.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL BD ON BD.BANKCODE = BB.BANKCODE
				LEFT JOIN RMTPROVINCEVSCITY PC ON PC.PCCITY = BB.CITY
				LEFT JOIN ENTITY E ON E.ENTITYCODE = M.ENTITYCODE
				LEFT JOIN PARTNERBANKS PB ON PB.PARTNERBANKID = M.PARTNERBANKID
				LEFT JOIN FINANCEMAIN FM ON FM.FINREFERENCE = M.ORGREFERENCE
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#76.23.1_post" author="saikiran.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'mandates_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#76.24.1_pre" author="saikiran.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'mandates_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#76.24.1" author="saikiran.n">
		<createView viewName="MANDATES_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT M.MANDATEID
					, M.CUSTID
					, M.MANDATEREF
					, M.MANDATETYPE
					, M.BANKBRANCHID
					, M.ACCNUMBER
					, M.ACCHOLDERNAME
					, M.JOINTACCHOLDERNAME
					, M.ACCTYPE
					, M.OPENMANDATE
					, M.STARTDATE
					, M.EXPIRYDATE
					, M.MAXLIMIT
					, M.PERIODICITY
					, M.PHONECOUNTRYCODE
					, M.PHONEAREACODE
					, M.PHONENUMBER
					, M.STATUS
					, M.APPROVALID
					, M.VERSION
					, M.LASTMNTBY
					, M.LASTMNTON
					, M.RECORDSTATUS
					, M.ROLECODE
					, M.NEXTROLECODE
					, M.TASKID
					, M.NEXTTASKID
					, M.RECORDTYPE
					, M.WORKFLOWID
					, M.REASON
					, M.MANDATECCY
					, C.CUSTCIF
					, C.CUSTSHRTNAME
					, BB.BANKCODE
					, BB.BRANCHCODE
					, BB.BRANCHDESC
					, BB.MICR
					, BB.IFSC
					, BB.CITY
					, BD.BANKNAME
					, M.INPUTDATE
					, M.ACTIVE
					, M.DEFAULTMANDATE
					, 0 USEEXISTING
					, M.ORGREFERENCE
					, PC.PCCITYNAME
					, M.DOCUMENTNAME
					, M.DOCUMENTREF
					, M.EXTERNALREF
					, M.ENTITYCODE
					, E.ENTITYDESC
					, M.PRIMARYMANDATEID
					, M.SWAPISACTIVE
					, M.BARCODENUMBER
					, PB.PARTNERBANKCODE
					, PB.PARTNERBANKNAME
					, M.PARTNERBANKID
					, M.EMANDATESOURCE
					, M.EMANDATEREFERENCENO
					, FM.FINTYPE
					, M.HOLDREASON
					, M.SWAPEFFECTIVEDATE
					, M.SECURITYMANDATE
				FROM MANDATES_TEMP M
				INNER JOIN CUSTOMERS C ON M.CUSTID = C.CUSTID
				LEFT JOIN BANKBRANCHES BB ON M.BANKBRANCHID = BB.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL BD ON BB.BANKCODE = BD.BANKCODE
				LEFT JOIN RMTPROVINCEVSCITY PC ON BB.CITY = PC.PCCITY
				LEFT JOIN ENTITY E ON M.ENTITYCODE = E.ENTITYCODE
				LEFT JOIN PARTNERBANKS PB ON M.PARTNERBANKID = PB.PARTNERBANKID
				LEFT JOIN FINANCEMAIN FM ON M.ORGREFERENCE = FM.FINREFERENCE
				UNION ALL
				SELECT M.MANDATEID
					, M.CUSTID
					, M.MANDATEREF
					, M.MANDATETYPE
					, M.BANKBRANCHID
					, M.ACCNUMBER
					, M.ACCHOLDERNAME
					, M.JOINTACCHOLDERNAME
					, M.ACCTYPE
					, M.OPENMANDATE
					, M.STARTDATE
					, M.EXPIRYDATE
					, M.MAXLIMIT
					, M.PERIODICITY
					, M.PHONECOUNTRYCODE
					, M.PHONEAREACODE
					, M.PHONENUMBER
					, M.STATUS
					, M.APPROVALID
					, M.VERSION
					, M.LASTMNTBY
					, M.LASTMNTON
					, M.RECORDSTATUS
					, M.ROLECODE
					, M.NEXTROLECODE
					, M.TASKID
					, M.NEXTTASKID
					, M.RECORDTYPE
					, M.WORKFLOWID
					, M.REASON
					, M.MANDATECCY
					, C.CUSTCIF
					, C.CUSTSHRTNAME
					, BB.BANKCODE
					, BB.BRANCHCODE
					, BB.BRANCHDESC
					, BB.MICR
					, BB.IFSC
					, BB.CITY
					, BD.BANKNAME
					, M.INPUTDATE
					, M.ACTIVE
					, M.DEFAULTMANDATE
					, 1 USEEXISTING
					, M.ORGREFERENCE
					, PC.PCCITYNAME
					, M.DOCUMENTNAME
					, M.DOCUMENTREF
					, M.EXTERNALREF
					, M.ENTITYCODE
					, E.ENTITYDESC
					, M.PRIMARYMANDATEID
					, M.SWAPISACTIVE
					, M.BARCODENUMBER
					, PB.PARTNERBANKCODE
					, PB.PARTNERBANKNAME
					, M.PARTNERBANKID
					, M.EMANDATESOURCE
					, M.EMANDATEREFERENCENO
					, FM.FINTYPE
					, M.HOLDREASON
					, M.SWAPEFFECTIVEDATE
					, M.SECURITYMANDATE
				FROM MANDATES M
				INNER JOIN CUSTOMERS C ON M.CUSTID = C.CUSTID
				LEFT JOIN BANKBRANCHES BB ON M.BANKBRANCHID = BB.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL BD ON BB.BANKCODE = BD.BANKCODE
				LEFT JOIN RMTPROVINCEVSCITY PC ON BB.CITY = PC.PCCITY
				LEFT JOIN ENTITY E ON M.ENTITYCODE = E.ENTITYCODE
				LEFT JOIN PARTNERBANKS PB ON M.PARTNERBANKID = PB.PARTNERBANKID
				LEFT JOIN FINANCEMAIN FM ON M.ORGREFERENCE = FM.FINREFERENCE
				WHERE NOT EXISTS (SELECT 1 FROM MANDATES_TEMP WHERE MANDATES_TEMP.MANDATEID = M.MANDATEID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#76.24.1_post" author="saikiran.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'mandates_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#76.36" author="saikiran.n">
		<renameColumn tableName="Mandates_Temp" oldColumnName="EmployeeID" newColumnName="EmployerID" />
	</changeSet>

	<changeSet id="ST#76.37" author="saikiran.n">
		<renameColumn tableName="Mandates_Temp" oldColumnName="EmployerName" newColumnName="EmployeeNo" />
	</changeSet>

	<changeSet id="ST#76.38" author="saikiran.n">
		<renameColumn tableName="Mandates" oldColumnName="EmployeeID" newColumnName="EmployerID" />
	</changeSet>

	<changeSet id="ST#76.39" author="saikiran.n">
		<renameColumn tableName="Mandates" oldColumnName="EmployerName" newColumnName="EmployeeNo" />
	</changeSet>

	<changeSet id="ST#76.40_pre" author="saikiran.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'mandates_temp');
				select deps_save_and_drop_dependencies ('plf', 'mandates');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#76.40" author="saikiran.n">
		<modifyDataType tableName="Mandates_Temp" columnName="EmployeeNo" newDataType="varchar(50)" />
	</changeSet>

	<changeSet id="ST#76.41" author="saikiran.n">
		<modifyDataType tableName="Mandates" columnName="EmployeeNo" newDataType="varchar(50)" />
	</changeSet>

	<changeSet id="ST#76.40_post" author="saikiran.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'mandates_temp');
				select deps_restore_dependencies ('plf', 'mandates');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#76.42" author="saikiran.n">
		<renameColumn tableName="Presentment_Extraction_Stage" oldColumnName="EmployerName"
			newColumnName="EmployeeNo" />
	</changeSet>

	<changeSet id="ST#76.43" author="saikiran.n">
		<addColumn tableName="PresentmentDetails">
			<column name="EmployerID" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#76.44" author="saikiran.n">
		<addColumn tableName="PresentmentDetails">
			<column name="EmployeeNo" type="varchar(50)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#76.45" author="saikiran.n">
		<sql>
			<![CDATA[
				UPDATE SECRIGHTS SET RIGHTNAME = 'MandateDialog_EmployeeID' WHERE RIGHTNAME = 'MandateDialog_EmployerID';
				UPDATE SECRIGHTS SET RIGHTNAME = 'MandateDialog_EmployeeNo' WHERE RIGHTNAME = 'MandateDialog_EmployerName';
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#76.46.1" author="saikiran.n">
		<addColumn tableName="PresentmentDetails">
			<column name="EmployerName" type="varchar(50)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#76.22.2_01_pre" author="saikiran.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'mandates_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#76.22.2_01" author="saikiran.n">
		<createView viewName="MANDATES_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT M.MANDATEID
					, M.CUSTID
					, M.MANDATEREF
					, M.MANDATETYPE
					, M.BANKBRANCHID
					, M.ACCNUMBER
					, M.ACCHOLDERNAME
					, M.JOINTACCHOLDERNAME
					, M.ACCTYPE
					, M.OPENMANDATE
					, M.STARTDATE
					, M.EXPIRYDATE
					, M.MAXLIMIT
					, M.PERIODICITY
					, M.PHONECOUNTRYCODE
					, M.PHONEAREACODE
					, M.PHONENUMBER
					, M.STATUS
					, M.APPROVALID
					, M.VERSION
					, M.LASTMNTBY
					, M.LASTMNTON
					, M.RECORDSTATUS
					, M.ROLECODE
					, M.NEXTROLECODE
					, M.TASKID
					, M.NEXTTASKID
					, M.RECORDTYPE
					, M.WORKFLOWID
					, M.REASON
					, M.MANDATECCY
					, C.CUSTCIF
					, C.CUSTSHRTNAME
					, BB.BANKCODE
					, BB.BRANCHCODE
					, BB.BRANCHDESC
					, BB.MICR
					, BB.IFSC
					, BB.CITY
					, BD.BANKNAME
					, M.INPUTDATE
					, M.INPUTDATE FROMDATE
					, M.INPUTDATE TODATE
					, M.ACTIVE
					, M.DEFAULTMANDATE
					, 1  USEEXISTING
					, M.ORGREFERENCE
					, PC.PCCITYNAME
					, M.DOCUMENTNAME
					, M.DOCUMENTREF
					, M.EXTERNALREF
					, M.ENTITYCODE
					, E.ENTITYDESC
					, M.PRIMARYMANDATEID
					, M.SWAPISACTIVE
					, M.BARCODENUMBER
					, PB.PARTNERBANKCODE
					, PB.PARTNERBANKNAME
					, M.PARTNERBANKID
					, M.EMANDATESOURCE
					, M.EMANDATEREFERENCENO
					, FM.FINTYPE
					, M.HOLDREASON
					, M.SWAPEFFECTIVEDATE
					, M.SECURITYMANDATE
					, M.EMPLOYERID
					, ED.EMPNAME
					, M.EMPLOYEENO
				FROM MANDATES M
				INNER JOIN CUSTOMERS C ON C.CUSTID = M.CUSTID
				LEFT JOIN BANKBRANCHES BB ON BB.BANKBRANCHID = M.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL BD ON BD.BANKCODE = BB.BANKCODE 
				LEFT JOIN RMTPROVINCEVSCITY PC ON PC.PCCITY = BB.CITY
				LEFT JOIN ENTITY E ON E.ENTITYCODE = M.ENTITYCODE
				LEFT JOIN PARTNERBANKS PB ON PB.PARTNERBANKID = M.PARTNERBANKID
				LEFT JOIN FINANCEMAIN FM ON FM.FINREFERENCE = M.ORGREFERENCE
				LEFT JOIN EMPLOYERDETAIL ED ON ED.EMPLOYERID = M.EMPLOYERID
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#76.22.2_01_post" author="saikiran.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'mandates_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#76.23.2_01_pre" author="saikiran.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'mandates_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#76.23.2_01" author="saikiran.n">
		<createView viewName="MANDATES_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT M.MANDATEID
					, M.CUSTID
					, M.MANDATEREF
					, M.MANDATETYPE
					, M.BANKBRANCHID
					, M.ACCNUMBER
					, M.ACCHOLDERNAME
					, M.JOINTACCHOLDERNAME
					, M.ACCTYPE
					, M.OPENMANDATE
					, M.STARTDATE
					, M.EXPIRYDATE
					, M.MAXLIMIT
					, M.PERIODICITY
					, M.PHONECOUNTRYCODE
					, M.PHONEAREACODE
					, M.PHONENUMBER
					, M.STATUS
					, M.APPROVALID
					, M.VERSION
					, M.LASTMNTBY
					, M.LASTMNTON
					, M.RECORDSTATUS
					, M.ROLECODE
					, M.NEXTROLECODE
					, M.TASKID
					, M.NEXTTASKID
					, M.RECORDTYPE
					, M.WORKFLOWID
					, M.REASON
					, M.MANDATECCY
					, C.CUSTCIF
					, C.CUSTSHRTNAME
					, BB.BANKCODE
					, BB.BRANCHCODE
					, BB.BRANCHDESC
					, BB.MICR
					, BB.IFSC
					, BB.CITY
					, BD.BANKNAME
					, M.INPUTDATE
					, M.ACTIVE
					, M.DEFAULTMANDATE
					, 0 USEEXISTING
					, M.ORGREFERENCE
					, PC.PCCITYNAME
					, M.DOCUMENTNAME
					, M.DOCUMENTREF
					, M.EXTERNALREF
					, M.ENTITYCODE
					, E.ENTITYDESC
					, M.PRIMARYMANDATEID
					, M.SWAPISACTIVE
					, M.BARCODENUMBER
					, PB.PARTNERBANKCODE
					, PB.PARTNERBANKNAME
					, M.PARTNERBANKID
					, M.EMANDATESOURCE
					, M.EMANDATEREFERENCENO
					, FM.FINTYPE
					, M.HOLDREASON
					, M.SWAPEFFECTIVEDATE
					, M.SECURITYMANDATE
					, M.EMPLOYERID
					, ED.EMPNAME
					, M.EMPLOYEENO
				FROM MANDATES_TEMP M
				INNER JOIN CUSTOMERS C ON C.CUSTID = M.CUSTID
				LEFT JOIN BANKBRANCHES BB ON BB.BANKBRANCHID = M.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL BD ON BD.BANKCODE = BB.BANKCODE
				LEFT JOIN RMTPROVINCEVSCITY PC ON PC.PCCITY = BB.CITY
				LEFT JOIN ENTITY E ON E.ENTITYCODE = M.ENTITYCODE
				LEFT JOIN PARTNERBANKS PB ON PB.PARTNERBANKID = M.PARTNERBANKID
				LEFT JOIN FINANCEMAIN FM ON FM.FINREFERENCE = M.ORGREFERENCE
				LEFT JOIN EMPLOYERDETAIL ED ON ED.EMPLOYERID = M.EMPLOYERID
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#76.23.2_01_post" author="saikiran.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'mandates_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#76.24.2_01_pre" author="saikiran.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'mandates_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#76.24.2_01" author="saikiran.n">
		<createView viewName="MANDATES_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT M.MANDATEID
					, M.CUSTID
					, M.MANDATEREF
					, M.MANDATETYPE
					, M.BANKBRANCHID
					, M.ACCNUMBER
					, M.ACCHOLDERNAME
					, M.JOINTACCHOLDERNAME
					, M.ACCTYPE
					, M.OPENMANDATE
					, M.STARTDATE
					, M.EXPIRYDATE
					, M.MAXLIMIT
					, M.PERIODICITY
					, M.PHONECOUNTRYCODE
					, M.PHONEAREACODE
					, M.PHONENUMBER
					, M.STATUS
					, M.APPROVALID
					, M.VERSION
					, M.LASTMNTBY
					, M.LASTMNTON
					, M.RECORDSTATUS
					, M.ROLECODE
					, M.NEXTROLECODE
					, M.TASKID
					, M.NEXTTASKID
					, M.RECORDTYPE
					, M.WORKFLOWID
					, M.REASON
					, M.MANDATECCY
					, C.CUSTCIF
					, C.CUSTSHRTNAME
					, BB.BANKCODE
					, BB.BRANCHCODE
					, BB.BRANCHDESC
					, BB.MICR
					, BB.IFSC
					, BB.CITY
					, BD.BANKNAME
					, M.INPUTDATE
					, M.ACTIVE
					, M.DEFAULTMANDATE
					, 0 USEEXISTING
					, M.ORGREFERENCE
					, PC.PCCITYNAME
					, M.DOCUMENTNAME
					, M.DOCUMENTREF
					, M.EXTERNALREF
					, M.ENTITYCODE
					, E.ENTITYDESC
					, M.PRIMARYMANDATEID
					, M.SWAPISACTIVE
					, M.BARCODENUMBER
					, PB.PARTNERBANKCODE
					, PB.PARTNERBANKNAME
					, M.PARTNERBANKID
					, M.EMANDATESOURCE
					, M.EMANDATEREFERENCENO
					, FM.FINTYPE
					, M.HOLDREASON
					, M.SWAPEFFECTIVEDATE
					, M.SECURITYMANDATE
					, M.EMPLOYERID
					, ED.EMPNAME
					, M.EMPLOYEENO
				FROM MANDATES_TEMP M
				INNER JOIN CUSTOMERS C ON M.CUSTID = C.CUSTID
				LEFT JOIN BANKBRANCHES BB ON M.BANKBRANCHID = BB.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL BD ON BB.BANKCODE = BD.BANKCODE
				LEFT JOIN RMTPROVINCEVSCITY PC ON BB.CITY = PC.PCCITY
				LEFT JOIN ENTITY E ON M.ENTITYCODE = E.ENTITYCODE
				LEFT JOIN PARTNERBANKS PB ON M.PARTNERBANKID = PB.PARTNERBANKID
				LEFT JOIN FINANCEMAIN FM ON M.ORGREFERENCE = FM.FINREFERENCE
				LEFT JOIN EMPLOYERDETAIL ED ON ED.EMPLOYERID = M.EMPLOYERID
				UNION ALL
				SELECT M.MANDATEID
					, M.CUSTID
					, M.MANDATEREF
					, M.MANDATETYPE
					, M.BANKBRANCHID
					, M.ACCNUMBER
					, M.ACCHOLDERNAME
					, M.JOINTACCHOLDERNAME
					, M.ACCTYPE
					, M.OPENMANDATE
					, M.STARTDATE
					, M.EXPIRYDATE
					, M.MAXLIMIT
					, M.PERIODICITY
					, M.PHONECOUNTRYCODE
					, M.PHONEAREACODE
					, M.PHONENUMBER
					, M.STATUS
					, M.APPROVALID
					, M.VERSION
					, M.LASTMNTBY
					, M.LASTMNTON
					, M.RECORDSTATUS
					, M.ROLECODE
					, M.NEXTROLECODE
					, M.TASKID
					, M.NEXTTASKID
					, M.RECORDTYPE
					, M.WORKFLOWID
					, M.REASON
					, M.MANDATECCY
					, C.CUSTCIF
					, C.CUSTSHRTNAME
					, BB.BANKCODE
					, BB.BRANCHCODE
					, BB.BRANCHDESC
					, BB.MICR
					, BB.IFSC
					, BB.CITY
					, BD.BANKNAME
					, M.INPUTDATE
					, M.ACTIVE
					, M.DEFAULTMANDATE
					, 1 USEEXISTING
					, M.ORGREFERENCE
					, PC.PCCITYNAME
					, M.DOCUMENTNAME
					, M.DOCUMENTREF
					, M.EXTERNALREF
					, M.ENTITYCODE
					, E.ENTITYDESC
					, M.PRIMARYMANDATEID
					, M.SWAPISACTIVE
					, M.BARCODENUMBER
					, PB.PARTNERBANKCODE
					, PB.PARTNERBANKNAME
					, M.PARTNERBANKID
					, M.EMANDATESOURCE
					, M.EMANDATEREFERENCENO
					, FM.FINTYPE
					, M.HOLDREASON
					, M.SWAPEFFECTIVEDATE
					, M.SECURITYMANDATE
					, M.EMPLOYERID
					, ED.EMPNAME
					, M.EMPLOYEENO
				FROM MANDATES M
				INNER JOIN CUSTOMERS C ON M.CUSTID = C.CUSTID
				LEFT JOIN BANKBRANCHES BB ON M.BANKBRANCHID = BB.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL BD ON BB.BANKCODE = BD.BANKCODE
				LEFT JOIN RMTPROVINCEVSCITY PC ON BB.CITY = PC.PCCITY
				LEFT JOIN ENTITY E ON M.ENTITYCODE = E.ENTITYCODE
				LEFT JOIN PARTNERBANKS PB ON M.PARTNERBANKID = PB.PARTNERBANKID
				LEFT JOIN FINANCEMAIN FM ON M.ORGREFERENCE = FM.FINREFERENCE
				LEFT JOIN EMPLOYERDETAIL ED ON ED.EMPLOYERID = M.EMPLOYERID
				WHERE NOT EXISTS (SELECT 1 FROM MANDATES_TEMP WHERE MANDATES_TEMP.MANDATEID = M.MANDATEID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#76.24.2_01_post" author="saikiran.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'mandates_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="16.3_pre" author="murthy.y" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'presentmentdetails_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="16.3" author="murthy.y">
		<createView replaceIfExists="true" viewName="PRESENTMENTDETAILS_AVIEW">
			<![CDATA[
				SELECT T1.ID, 
					T1.PRESENTMENTID, 
					T1.PRESENTMENTREF,
					T1.FINID, 
					T1.FINREFERENCE, 
					T1.SCHDATE, 
					T1.MANDATEID, 
					T1.SCHAMTDUE, 
					T1.SCHPRIDUE, 
					T1.SCHPFTDUE, 
					T1.SCHFEEDUE,
					T1.SCHINSDUE, 
					T1.SCHPENALTYDUE, 
					T1.ADVANCEAMT, 
					T1.EXCESSID, 
					T1.ADVISEAMT, 
					T1.PRESENTMENTAMT, 
					T1.EXCLUDEREASON, 
					T1.TDSAMOUNT, 
					T1.BOUNCEID, 
					T1.EMINO, 
					T1.STATUS,
					T1.VERSION, 
					T1.LASTMNTBY, 
					T1.LASTMNTON,
					T1.RECORDSTATUS, 
					T1.ROLECODE, 
					T1.NEXTROLECODE, 
					T1.TASKID, 
					T1.NEXTTASKID, 
					T1.RECORDTYPE, 
					T1.WORKFLOWID, 
					PH.MANDATETYPE, 
					T3.FINTYPE,
					T4.FINTYPEDESC, 
					T5.CUSTSHRTNAME CUSTOMERNAME,
					T1.RECEIPTID, 
					T1.ECSRETURN, 
					T1.ERRORCODE, 
					T1.ERRORDESC, 
					T1.MANUALADVISEID,
					T1.CHARGES,
					T1.LPPAMOUNT, 
					T1.BOUNCEAMOUNT, 
					T7.BANKNAME,
					T1.EMPLOYERID,
					T1.EMPLOYEENO,
					T1.EMPLOYERNAME
				FROM PRESENTMENTDETAILS T1
                INNER JOIN PRESENTMENTHEADER PH ON PH.ID = T1.PRESENTMENTID
                LEFT JOIN MANDATES T2 ON T1.MANDATEID = T2.MANDATEID
				INNER JOIN FINANCEMAIN T3 ON T1.FINID = T3.FINID 
				INNER JOIN RMTFINANCETYPES T4 ON T3.FINTYPE = T4.FINTYPE 
				INNER JOIN CUSTOMERS T5 ON T5.CUSTID = T3.CUSTID 
				LEFT JOIN BANKBRANCHES T6 ON T2.BANKBRANCHID = T6.BANKBRANCHID 
				LEFT JOIN BMTBANKDETAIL T7 ON T6.BANKCODE = T7.BANKCODE
			]]>
		</createView>
	</changeSet>

	<changeSet id="16.3_post" author="murthy.y" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'presentmentdetails_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#76.48.1" author="saikiran.n">
		<addColumn tableName="Presentment_Extraction_Stage">
			<column name="EmployerName" type="varchar(50)" />
		</addColumn>
	</changeSet>

	<changeSet id="PSD#208744.1" author="saikrishna.b" dbms="oracle">
		<sql splitStatements="false">
		<![CDATA[
			declare
			v_maxval NUMBER(19);
			begin
			select COALESCE(max(T.FIELDCODEID),0)+1 into v_maxval from
			(select
			FIELDCODEID from RMTLOVFIELDDETAIL union all select FIELDCODEID from RMTLOVFIELDDETAIL_Temp) T;
			EXECUTE IMMEDIATE
			'alter sequence SEQRMTLOVFIELDDETAIL restart start with ' || v_maxval;
			end;
			]]>
		</sql>
	</changeSet>

	<changeSet id="PSD#208744.2" author="saikrishna.b" dbms="postgresql">
		<sql splitStatements="false">
		<![CDATA[
			do $$
			declare
			v_maxval BIGINT;
			begin
			select COALESCE(max(T.FIELDCODEID),0)+1 into v_maxval from
			(select FIELDCODEID from RMTLOVFIELDDETAIL union all select FIELDCODEID from RMTLOVFIELDDETAIL_Temp) T;
			EXECUTE 'alter
			sequence SEQRMTLOVFIELDDETAIL restart start with ' || v_maxval;
			end;
			$$;
			]]>
		</sql>
	</changeSet>

	<changeSet id="PSD#208744.3" author="saikrishna.b" dbms="mssql">
		<sql splitStatements="false">
		<![CDATA[
			DECLARE @SQLCmd VARCHAR(MAX);
			DECLARE @MAXNO BIGINT;
			SELECT
			@MAXNO=COALESCE(max(T.FIELDCODEID),0)+1 from
			(select FIELDCODEID from RMTLOVFIELDDETAIL union all select FIELDCODEID
			from RMTLOVFIELDDETAIL_Temp) T;

			SET @SQLCmd = '
                ALTER SEQUENCE SEQRMTLOVFIELDDETAIL
                RESTART WITH ' + CAST(@MAXNO AS VARCHAR(MAX));
                           
                EXEC (@SQLCmd);
			]]>
		</sql>
	</changeSet>

	<changeSet id="PSD#208851.1" author="saikrishna.b">
		<sql>
			<![CDATA[
				DELETE FROM BMTLOVFIELDCODE WHERE FIELDCODE = 'MANDATE_HOLD_REASON';
				
				INSERT INTO BMTLOVFIELDCODE (FIELDCODE, FIELDCODEDESC, FIELDCODETYPE, FIELDEDIT, ISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ('MANDATE_HOLD_REASON', 'Reason for Mandate Hold', 'String', 1, 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="PSD#208851.2.0_pre" author="saikrishna.b">
		<sql>
			<![CDATA[
				update MANDATES set HOLDREASON = null;
				update MANDATES_TEMP set HOLDREASON = null;
			]]>
		</sql>
	</changeSet>

	<changeSet id="PSD#208851.2.1_pre" author="saikrishna.b">
		<dropForeignKeyConstraint baseTableName="MANDATES" constraintName="fk_mandates_holdreason" />
		<dropForeignKeyConstraint baseTableName="MANDATES_TEMP"
			constraintName="fk_mandates_temp_holdreason" />
	</changeSet>

	<changeSet id="PSD#208851.2_pre" author="saikrishna.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'mandates');
				select deps_save_and_drop_dependencies ('plf', 'mandates_temp');
			]]>
		</sql>
	</changeSet>

	<changeSet id="PSD#208851.2" author="saikrishna.b">
		<modifyDataType tableName="MANDATES" columnName="HOLDREASON" newDataType="varchar(50)" />
	</changeSet>

	<changeSet id="PSD#208851.3" author="saikrishna.b">
		<modifyDataType tableName="MANDATES_TEMP" columnName="HOLDREASON" newDataType="varchar(50)" />
	</changeSet>

	<changeSet id="PSD#208851.2_post" author="saikrishna.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'mandates');
				select deps_restore_dependencies ('plf', 'mandates_temp');
			]]>
		</sql>
	</changeSet>

	<changeSet id="PSD#209101.01" author="murthy.y">
		<addColumn tableName="Presentment_Extraction_Stage">
			<column name="ChequeAmount" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="PSD#209101.02" author="murthy.y" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE PRESENTMENT_EXTRACTION_STAGE ADD CONSTRAINT DF_PRESENTMENT_EXTRACTION_STAGE_CHEQUEAMOUNT DEFAULT 0 FOR CHEQUEAMOUNT;
			]]>
		</sql>
	</changeSet>

	<changeSet id="PSD#209101.02" author="murthy.y" dbms="postgresql, oracle">
		<addDefaultValue columnName="ChequeAmount" tableName="Presentment_Extraction_Stage" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#99.20_pre" author="murthy.y">
		<sql>
			<![CDATA[	
				delete from Presentment_Extraction_Stage;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#99.20" author="murthy.y">
		<addUniqueConstraint tableName="Presentment_Extraction_Stage" columnNames="FinID, SchDate"
			constraintName="uk_pes_finid_schdate" />
	</changeSet>

	<changeSet id="ST#99.21" author="murthy.y">
		<dropIndex tableName="FINEXCESSAMOUNT" indexName="IDX_FNEXCSSAMN_FINREF_AMTTYPE" />
	</changeSet>

	<changeSet id="ST#99.22" author="murthy.y">
		<createIndex tableName="FINEXCESSAMOUNT" indexName="idx_fnexcssamn_finid_amttype" unique="true">
			<column name="FINID" type="bigint" />
			<column name="AMOUNTTYPE" type="varchar(8)" />
		</createIndex>
	</changeSet>

	<changeSet id="PSD#209027.1" author="NagaVamsi.P">
		<sql>
			<![CDATA[
   		     	 DELETE FROM REPORTLIST WHERE CODE = 'AccountType';
				 INSERT INTO REPORTLIST (CODE, MODULE, FIELDLABELS, FIELDVALUES, FIELDTYPE, ADDFIELDS, REPORTFILENAME, REPORTHEADING, MODULETYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, FORMATREQ) VALUES ('AccountType', 'AccountType', 'listheader_AcType.label,listheader_AcTypeDesc.label,listheader_AcTypeIsActive.label', 'acType,acTypeDesc,acTypeIsActive', 'String,String,boolean', null, 'ReportList03', 'Account Types', 'Solution Factory', 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0, 0);        	 ]]>
		</sql>
	</changeSet>

	<changeSet id="ST#76.45_01" author="saikiran.n">
		<sql>
			<![CDATA[
				UPDATE SECRIGHTS SET RIGHTNAME = 'MandateDialog_EmployerID' WHERE RIGHTNAME = 'MandateDialog_EmployeeID';
			]]>
		</sql>
	</changeSet>

	<changeSet id="PSD#209101.03.1" author="saikiran.n" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE Presentment_Extraction_Stage DROP  CONSTRAINT DF_PRESENTMENT_EXTRACTION_STAGE_CHEQUEAMOUNT;
			]]>
		</sql>
	</changeSet>

	<changeSet id="PSD#209101.03_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_save_and_drop_dependencies ('plf', 'presentment_extraction_stage');
			]]>
		</sql>
	</changeSet>

	<changeSet id="PSD#209101.03" author="Gopal.p">
		<modifyDataType tableName="Presentment_Extraction_Stage " columnName="ChequeAmount"
			newDataType="decimal(18,0)" />
	</changeSet>

	<changeSet id="PSD#209101.03_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_restore_dependencies ('plf', 'presentment_extraction_stage');
			]]>
		</sql>
	</changeSet>

	<changeSet id="PSD#209101.04" author="murthy.y" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE PRESENTMENT_EXTRACTION_STAGE ADD CONSTRAINT DF_PRESENTMENT_EXT_STG_CHEAMT DEFAULT 0 FOR CHEQUEAMOUNT;
			]]>
		</sql>
	</changeSet>

	<changeSet id="PSD#210561_pre" author="saikiran.n" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_save_and_drop_dependencies ('plf', 'querydetail_temp');
					select deps_save_and_drop_dependencies ('plf', 'querydetail');
			]]>
		</sql>
	</changeSet>

	<changeSet id="PSD#210561" author="saikiran.n">
		<modifyDataType tableName="QUERYDETAIL_TEMP" columnName="NOTIFYTO" newDataType="VARCHAR(2000)" />
		<modifyDataType tableName="QUERYDETAIL_TEMP" columnName="RESPONSNOTES" newDataType="VARCHAR(2000)" />
		<modifyDataType tableName="QUERYDETAIL" columnName="NOTIFYTO" newDataType="VARCHAR(2000)" />
		<modifyDataType tableName="QUERYDETAIL" columnName="RESPONSNOTES" newDataType="VARCHAR(2000)" />
	</changeSet>

	<changeSet id="PSD#210561_post" author="saikiran.n" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_restore_dependencies ('plf', 'querydetail_temp');
					select deps_restore_dependencies ('plf', 'querydetail');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#99.23" author="saikrishna.b">
		<sql>
			<![CDATA[
				DELETE FROM SMTPARAMETERS WHERE SYSPARMCODE = 'PRESENTMENT_EXTRACTION_THREAD_COUNT';
				INSERT INTO SMTPARAMETERS (SYSPARMCODE, SYSPARMDESC, SYSPARMTYPE, SYSPARMMAINT, SYSPARMVALUE, SYSPARMLENGTH, SYSPARMDEC,SYSPARMLIST, SYSPARMVALDMOD, SYSPARMDESCRIPTION, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('PRESENTMENT_EXTRACTION_THREAD_COUNT', 'Presentment Extraction Thread Count', 'int', 0, '10', 3, 0, NULL, NULL, 'Presentment Extraction Thread Count', 1, 1000, CURRENT_TIMESTAMP,'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#99.23.1" author="saikrishna.b" dbms="oracle">
		<createSequence sequenceName="SEQ_PRMNT_EXTRACTION_QUEUE" minValue="1" maxValue="9223372036854775807"
			incrementBy="1" startValue="1" ordered="true" />
	</changeSet>
	
	<changeSet id="ST#99.23.1" author="saikrishna.b" dbms="postgresql,mssql">
		<createSequence sequenceName="SEQ_PRMNT_EXTRACTION_QUEUE" minValue="1" maxValue="9223372036854775807"
			incrementBy="1" startValue="1" />
	</changeSet>

	<changeSet id="ST#99.23.2" author="saikrishna.b">
		<createTable tableName="PRMNT_EXTRACTION_QUEUE">
			<column name="ID" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="BatchId" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="ReferenceId" type="bigint" />
			<column name="ThreadId" type="int" />
			<column name="StartTime" type="datetime" />
			<column name="EndTime" type="datetime" />
			<column name="Progress" type="int" />
			<column name="ErrorLog" type="varchar(2000)" />
			<column name="ResetCounterId" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet id="ST#99.23.3" author="saikrishna.b" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE PRMNT_EXTRACTION_QUEUE ADD CONSTRAINT DF_PEQ_PROGRESS DEFAULT 0 FOR PROGRESS;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#99.23.3" author="saikrishna.b" dbms="postgresql, oracle">
		<addDefaultValue columnName="Progress" tableName="PRMNT_EXTRACTION_QUEUE" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#99.23.4" author="saikrishna.b">
		<addPrimaryKey tableName="PRMNT_EXTRACTION_QUEUE" columnNames="ID, BatchId"
			constraintName="pk_prmnt_extraction_queue" />
	</changeSet>

	<changeSet id="ST#99.23.5" author="saikrishna.b">
		<createIndex tableName="PRMNT_EXTRACTION_QUEUE" indexName="idx_prmnt_extraction_queue_rid">
			<column name="ReferenceId" type="bigint" />
		</createIndex>
	</changeSet>

	<changeSet id="ST#99.24" author="saikrishna.b">
		<renameTable newTableName="PRMNT_EXTRACTION_STAGE" oldTableName="Presentment_Extraction_Stage" />
	</changeSet>

	<changeSet id="ST#99.25" author="saikrishna.b">
		<dropTable tableName="PRESENTMENT_BATCH_JOB" />
	</changeSet>

	<changeSet id="ST#99.25.1" author="saikrishna.b">
		<createTable tableName="PRMNT_BATCH_JOBS">
			<column name="ID" type="bigint" autoIncrement="true">
				<constraints nullable="false" />
			</column>
			<column name="Batch_Type" type="varchar(20)" />
			<column name="Created_By" type="bigint" />
			<column name="Start_Time" type="datetime" />
			<column name="End_Time" type="datetime" />
			<column name="Total_Records" type="int" />
			<column name="Process_Records" type="int" />
			<column name="Success_Records" type="int" />
			<column name="Failed_Records" type="int" />
			<column name="Status" type="VARCHAR(10)" />
			<column name="Failed_Step" type="varchar(100)" />
			<column name="Error" type="varchar(2000)" />
			<column name="Remarks" type="varchar(1000)" />
		</createTable>
	</changeSet>

	<changeSet id="ST#99.25.2" author="saikrishna.b">
		<addPrimaryKey tableName="PRMNT_BATCH_JOBS" columnNames="ID" constraintName="PK_PRMNT_BATCH_JOBS" />
	</changeSet>
	<changeSet id="ST#99.25.3" author="saikrishna.b">
		<createIndex tableName="PRMNT_BATCH_JOBS" indexName="IDX_PRMNT_BATCH_JOBS_BTYPE">
			<column name="Batch_Type" type="varchar(20)" />
		</createIndex>
	</changeSet>

	<changeSet id="ST#665" author="saikiran.n">
		<sql>
			<![CDATA[
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='MANDATE_MAKER')  AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'MandateDialog_MICR');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='MANDATES_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'MandateDialog_MICR');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='BFSD_ORIGINATION_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'MandateDialog_MICR');
				
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'MandateDialog_MICR';
				
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'MandateDialog_MICR', 'MandateDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'MANDATE_MAKER'),  (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'MandateDialog_MICR'),   1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'MANDATES_MAKER'),  (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'MandateDialog_MICR'),   1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'BFSD_ORIGINATION_MAKER'),  (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'MandateDialog_MICR'),   1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#670_pre" author="saikiran.n" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_save_and_drop_dependencies ('plf', 'rmtbranches_temp');
					select deps_save_and_drop_dependencies ('plf', 'rmtbranches');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#670" author="saikiran.n">
		<modifyDataType tableName="RMTBranches_temp" columnName="BranchSwiftBrnCde" newDataType="varchar(5)" />
		<modifyDataType tableName="RMTBranches" columnName="BranchSwiftBrnCde" newDataType="varchar(5)" />
	</changeSet>

	<changeSet id="ST#670_post" author="saikiran.n" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_restore_dependencies ('plf', 'rmtbranches_temp');
					select deps_restore_dependencies ('plf', 'rmtbranches');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#113" author="Gireesh.G">
		<createSequence sequenceName="SEQ_FILE_UPLOAD_HEADER" incrementBy="1" startValue="1" minValue="1"
			maxValue="999999999999999999" />
	</changeSet>

	<changeSet id="ST#113.1" author="Gireesh.G">
		<createTable tableName="FILE_UPLOAD_HEADER_TEMP">
			<column name="Id" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="EntityCode" type="varchar(8)">
				<constraints nullable="false" />
			</column>
			<column name="Type" type="varchar(50)">
				<constraints nullable="false" />
			</column>
			<column name="FileName" type="varchar(100)">
				<constraints nullable="false" />
			</column>
			<column name="TotalRecords" type="int" />
			<column name="SuccessRecords" type="int" />
			<column name="FailureRecords" type="int" />
			<column name="Progress" type="int" />
			<column name="CreatedBy" type="bigint" />
			<column name="CreatedOn" type="datetime" />
			<column name="ApprovedBy" type="bigint" />
			<column name="ApprovedOn" type="datetime" />
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkflowId" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet id="ST#113.2" author="Gireesh.G">
		<addPrimaryKey tableName="FILE_UPLOAD_HEADER_TEMP" columnNames="Id" />
	</changeSet>

	<changeSet id="ST#113.3" author="Gireesh.G">
		<addUniqueConstraint tableName="FILE_UPLOAD_HEADER_TEMP" columnNames="EntityCode, Type, FileName" />
	</changeSet>

	<changeSet id="ST#113.4" author="Gireesh.G">
		<createTable tableName="FILE_UPLOAD_HEADER">
			<column name="Id" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="EntityCode" type="varchar(8)">
				<constraints nullable="false" />
			</column>
			<column name="Type" type="varchar(50)">
				<constraints nullable="false" />
			</column>
			<column name="FileName" type="varchar(100)">
				<constraints nullable="false" />
			</column>
			<column name="TotalRecords" type="int" />
			<column name="SuccessRecords" type="int" />
			<column name="FailureRecords" type="int" />
			<column name="Progress" type="int" />
			<column name="CreatedBy" type="bigint" />
			<column name="CreatedOn" type="datetime" />
			<column name="ApprovedBy" type="bigint" />
			<column name="ApprovedOn" type="datetime" />
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkflowId" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet id="ST#113.5" author="Gireesh.G">
		<addPrimaryKey tableName="FILE_UPLOAD_HEADER" columnNames="Id" />
	</changeSet>

	<changeSet id="ST#113.6" author="Gireesh.G">
		<addUniqueConstraint tableName="FILE_UPLOAD_HEADER" columnNames="EntityCode, Type, FileName" />
	</changeSet>

	<changeSet id="ST#113.7.1" author="Gireesh.G">
		<createTable tableName="REPRESENT_UPLOADS">
			<column name="Id" type="bigint" autoIncrement="true">
				<constraints nullable="false" />
			</column>
			<column name="HeaderId" type="bigint" />
			<column name="FinID" type="bigint" />
			<column name="FinReference" type="varchar(20)" />
			<column name="PresentmentID" type="bigint" />
			<column name="DueDate" type="datetime" />
			<column name="Progress" type="int" />
			<column name="Remarks" type="varchar(2000)" />
		</createTable>
	</changeSet>

	<changeSet id="ST#113.8" author="Gireesh.G">
		<addPrimaryKey tableName="REPRESENT_UPLOADS" columnNames="Id" />
	</changeSet>

	<changeSet id="ST#113.9_pre" author="Gireesh.G" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'file_upload_header_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#113.9.1" author="Gireesh.G">
		<createView viewName="FILE_UPLOAD_HEADER_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ID,
					T1.ENTITYCODE, 
					T1.TYPE,
					T1.FILENAME,
					T1.TOTALRECORDS, 
					T1.SUCCESSRECORDS,  
					T1.FAILURERECORDS,
					T1.PROGRESS,
					T1.CREATEDON,
					T1.CREATEDBY,
					T1.APPROVEDBY,
					T1.APPROVEDON,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.VERSION,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM FILE_UPLOAD_HEADER T1		    
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#113.9_post" author="Gireesh.G" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'file_upload_header_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#113.10_pre" author="Gireesh.G" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'file_upload_header_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#113.10.2" author="Gireesh.G">
		<createView viewName="FILE_UPLOAD_HEADER_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ID,
					T1.TYPE,
					T1.FILENAME,
					T1.ENTITYCODE, 
					T1.TOTALRECORDS, 
					T1.SUCCESSRECORDS,  
					T1.FAILURERECORDS,
					T1.PROGRESS,
					T1.CREATEDON,
					T1.CREATEDBY,
					T1.APPROVEDBY,
					T1.APPROVEDON,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.VERSION,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM FILE_UPLOAD_HEADER_TEMP T1
				UNION ALL
				SELECT T1.ID,
					T1.TYPE,
					T1.FILENAME,
					T1.ENTITYCODE, 
					T1.TOTALRECORDS, 
					T1.SUCCESSRECORDS,  
					T1.FAILURERECORDS,
					T1.PROGRESS,
					T1.CREATEDON,
					T1.CREATEDBY,
					T1.APPROVEDBY,
					T1.APPROVEDON,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.VERSION,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM FILE_UPLOAD_HEADER T1
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#113.10_post" author="Gireesh.G" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'file_upload_header_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#113.11_pre" author="Gireesh.G" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'file_upload_header_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#113.11.1" author="Gireesh.G">
		<createView viewName="FILE_UPLOAD_HEADER_TVIEW" replaceIfExists="true">
			<![CDATA[
				 SELECT T1.ID,
					T1.TYPE,
					T1.FILENAME,
					T1.ENTITYCODE, 
					T1.TOTALRECORDS, 
					T1.SUCCESSRECORDS,  
					T1.FAILURERECORDS,
					T1.PROGRESS,
					T1.CREATEDON,
					T1.CREATEDBY,
					T1.APPROVEDBY,
					T1.APPROVEDON,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.VERSION,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
				FROM FILE_UPLOAD_HEADER_TEMP T1
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#113.12_post" author="Gireesh.G" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'file_upload_header_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#113.13" author="Gireesh.G">
		<insert tableName="WorkFlowDetails">
			<column name="WorkFlowId" valueComputed="(select max(WorkFlowId) + 1 from WorkFlowDetails)" />
			<column name="WorkFlowType">REPRESENT_UPLOAD</column>
			<column name="WorkFlowSubType">Representment Upload</column>
			<column name="WorkFlowDesc">Representment Upload Workflow Process</column>
			<column name="JsonDesign" type="nclob"><![CDATA[NULL]]></column>
			<column name="SvgDesign" type="nclob"><![CDATA[NULL]]></column>
			<column name="WorkFlowXml" type="clob"><![CDATA[NULL]]></column>
			<column name="WorkFlowRoles">REPRESENT_UPLOAD_MAKER;REPRESENT_UPLOAD_APPROVER</column>
			<column name="FirstTaskOwner">REPRESENT_UPLOAD_MAKER</column>
			<column name="WorkFlowActive">1</column>
			<column name="Version">0</column>
			<column name="LastMntBy">1000</column>
			<column name="LastMntOn" valueDate="current_timestamp" />
			<column name="RecordStatus">Null</column>
			<column name="RoleCode">Null</column>
			<column name="NextRoleCode">Null</column>
			<column name="TaskId">Null</column>
			<column name="NextTaskId">Null</column>
			<column name="RecordType">NULL</column>
		</insert>
	</changeSet>

	<changeSet id="ST#113.14" author="Gireesh.G">
		<update tableName="WORKFLOWDETAILS">
			<column name="JSONDESIGN" type="NCLOB"><![CDATA[{"resourceId":968,"properties":{"process_id":"REPRESENT_UPLOAD","name":"RePresentment Upload Process","documentation":"Maker/Checker WorkFlow","category":"","listenerclass":"","listenerentitytype":""},"stencil":{"id":"BPMNDiagram"},"childShapes":[{"resourceId":"startEvent1","properties":{"overrideid":"","name":"Start"},"stencil":{"id":"StartNoneEvent"},"childShapes":[],"outgoing":[{"resourceId":"sid-CB1DEE00-A9A1-4162-BD4A-CC3D4B6E7CC1"}],"bounds":{"lowerRight":{"x":130,"y":193},"upperLeft":{"x":100,"y":163}},"dockers":[]},{"resourceId":"sid-38272C15-118D-4D4F-80E0-DD3A3FEC8897","properties":{"overrideid":"","name":"Maker","usertaskassignment":{"assignment":{"type":"idm","idm":{"type":"user","assignee":{"email":"REPRESENT_UPLOAD_MAKER","firstName":"REPRESENT_UPLOAD_MAKER","fullName":"REPRESENT_UPLOAD_MAKER","id":"REPRESENT_UPLOAD_MAKER","roledesc":"Workflow Maker","$$hashKey":"object:575"}}}},"additionalforms":"","formkeydefinition":"","prioritydefinition":"Role Queue","baseactor":"","duedatedefinition":"","multiinstance_type":"None","isforcompensation":"false"},"stencil":{"id":"UserTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-F8AD09C4-9AD3-4E9F-9432-0B753ACDBFF3"},{"resourceId":"sid-751124CB-1CC1-40AF-B5DB-360706ED6035"}],"bounds":{"lowerRight":{"x":275,"y":218},"upperLeft":{"x":175,"y":138}},"dockers":[]},{"resourceId":"sid-CB1DEE00-A9A1-4162-BD4A-CC3D4B6E7CC1","properties":{"overrideid":"","name":"","repruseaction":"false","conditionsequenceflow":"","defaultflow":"false","action":"","state":"","mandatenotes":"false"},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-38272C15-118D-4D4F-80E0-DD3A3FEC8897"}],"bounds":{"lowerRight":{"x":174.15625,"y":178},"upperLeft":{"x":130.609375,"y":178}},"dockers":[{"x":15,"y":15},{"x":50,"y":40}],"target":{"resourceId":"sid-38272C15-118D-4D4F-80E0-DD3A3FEC8897"}},{"resourceId":"sid-0E4577E1-11E1-450D-A2B6-DBE242378F08","properties":{"overrideid":"","name":"Approver","usertaskassignment":{"assignment":{"type":"idm","idm":{"type":"user","assignee":{"email":"REPRESENT_UPLOAD_APPROVER","firstName":"REPRESENT_UPLOAD_APPROVER","fullName":"REPRESENT_UPLOAD_APPROVER","id":"REPRESENT_UPLOAD_APPROVER","roledesc":"Workflow Approver","$$hashKey":"object:965"}}}},"additionalforms":"","formkeydefinition":"","prioritydefinition":"Role Queue","baseactor":"","duedatedefinition":"","multiinstance_type":"None","isforcompensation":"false"},"stencil":{"id":"UserTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-E75E07AC-22E7-4F1C-B6E9-733C5C1A3E22"}],"bounds":{"lowerRight":{"x":490,"y":218},"upperLeft":{"x":390,"y":138}},"dockers":[]},{"resourceId":"sid-6D2A3EE4-19BA-44FF-93AB-717BFF16FC01","properties":{"overrideid":"","name":"","sequencefloworder":""},"stencil":{"id":"ExclusiveGateway"},"childShapes":[],"outgoing":[{"resourceId":"sid-90A1D39E-E70D-4EB1-BB50-DF5F8F43359D"},{"resourceId":"sid-79F17746-BC9F-45F8-A31F-CA3969C76736"},{"resourceId":"sid-4A389521-29A1-4967-8A99-23A3D1BA8CDE"}],"bounds":{"lowerRight":{"x":575,"y":198},"upperLeft":{"x":535,"y":158}},"dockers":[]},{"resourceId":"sid-22D15E29-D37A-4505-A48C-7A329DF13429","properties":{"overrideid":"","name":"Complete Process","servicetaskexpression":"doApprove","isforcompensation":"false","multiinstance_type":"None"},"stencil":{"id":"approveTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-5AABA17A-E718-463D-95FA-7B0E9E938247"}],"bounds":{"lowerRight":{"x":760,"y":218},"upperLeft":{"x":660,"y":138}},"dockers":[]},{"resourceId":"sid-5FF3A069-112E-49C0-9A73-07B73600334B","properties":{"overrideid":"","name":"Approved"},"stencil":{"id":"EndNoneEvent"},"childShapes":[],"outgoing":[],"bounds":{"lowerRight":{"x":833,"y":192},"upperLeft":{"x":805,"y":164}},"dockers":[]},{"resourceId":"sid-5AABA17A-E718-463D-95FA-7B0E9E938247","properties":{"overrideid":"","name":"","repruseaction":"false","conditionsequenceflow":"","defaultflow":"false","action":"","state":"","mandatenotes":"false"},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-5FF3A069-112E-49C0-9A73-07B73600334B"}],"bounds":{"lowerRight":{"x":804.375,"y":178},"upperLeft":{"x":760.390625,"y":178}},"dockers":[{"x":50,"y":40},{"x":14,"y":14}],"target":{"resourceId":"sid-5FF3A069-112E-49C0-9A73-07B73600334B"}},{"resourceId":"sid-0AD002F0-2C5A-4D9F-B0D2-7A03A8025FEB","properties":{"overrideid":"","name":"Cancel Process","servicetaskexpression":"doReject","isforcompensation":"false","multiinstance_type":"None"},"stencil":{"id":"rejectTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-9E25CBF1-5C3D-444E-B619-F8DF70F8710B"}],"bounds":{"lowerRight":{"x":605,"y":369},"upperLeft":{"x":505,"y":289}},"dockers":[]},{"resourceId":"sid-B8114559-3D1A-4A63-A65F-B62B0D0812CA","properties":{"overrideid":"","name":"Rejected"},"stencil":{"id":"EndNoneEvent"},"childShapes":[],"outgoing":[],"bounds":{"lowerRight":{"x":678,"y":343},"upperLeft":{"x":650,"y":315}},"dockers":[]},{"resourceId":"sid-9E25CBF1-5C3D-444E-B619-F8DF70F8710B","properties":{"overrideid":"","name":"","repruseaction":"false","conditionsequenceflow":"","defaultflow":"false","action":"","state":"","mandatenotes":"false"},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-B8114559-3D1A-4A63-A65F-B62B0D0812CA"}],"bounds":{"lowerRight":{"x":649.375,"y":329},"upperLeft":{"x":605.390625,"y":329}},"dockers":[{"x":50,"y":40},{"x":14,"y":14}],"target":{"resourceId":"sid-B8114559-3D1A-4A63-A65F-B62B0D0812CA"}},{"resourceId":"sid-E75E07AC-22E7-4F1C-B6E9-733C5C1A3E22","properties":{"overrideid":"","name":"","repruseaction":"false","conditionsequenceflow":"","defaultflow":"false","action":"","state":"","mandatenotes":"false"},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-6D2A3EE4-19BA-44FF-93AB-717BFF16FC01"}],"bounds":{"lowerRight":{"x":534.6484468700075,"y":178.4097335362338},"upperLeft":{"x":490.62889687999245,"y":178.2191727137662}},"dockers":[{"x":50,"y":40},{"x":20.5,"y":20.5}],"target":{"resourceId":"sid-6D2A3EE4-19BA-44FF-93AB-717BFF16FC01"}},{"resourceId":"sid-79F17746-BC9F-45F8-A31F-CA3969C76736","properties":{"overrideid":"","name":"Approve","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Approved'"}},"defaultflow":"false","action":"Approve","state":"Approved","mandatenotes":"false"},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-22D15E29-D37A-4505-A48C-7A329DF13429"}],"bounds":{"lowerRight":{"x":659.5117239866028,"y":178.43426377099223},"upperLeft":{"x":575.8124947633972,"y":178.16339247900777}},"dockers":[{"x":20.5,"y":20.5},{"x":50,"y":40}],"target":{"resourceId":"sid-22D15E29-D37A-4505-A48C-7A329DF13429"}},{"resourceId":"sid-751124CB-1CC1-40AF-B5DB-360706ED6035","properties":{"overrideid":"","name":"Cancel","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Cancelled'"}},"defaultflow":"false","action":"Cancel","state":"Cancelled","mandatenotes":true},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-0AD002F0-2C5A-4D9F-B0D2-7A03A8025FEB"}],"bounds":{"lowerRight":{"x":504.37109375,"y":329},"upperLeft":{"x":225,"y":218.51953125}},"dockers":[{"x":50,"y":40},{"x":225,"y":329},{"x":50,"y":40}],"target":{"resourceId":"sid-0AD002F0-2C5A-4D9F-B0D2-7A03A8025FEB"}},{"resourceId":"sid-4A389521-29A1-4967-8A99-23A3D1BA8CDE","properties":{"overrideid":"","name":"Reject","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Rejected'"}},"defaultflow":"false","action":"Reject","state":"Rejected","mandatenotes":true},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-0AD002F0-2C5A-4D9F-B0D2-7A03A8025FEB"}],"bounds":{"lowerRight":{"x":555.4341777591982,"y":288.0234430186572},"upperLeft":{"x":555.1361347408018,"y":198.3124944813428}},"dockers":[{"x":20.5,"y":20.5},{"x":50,"y":40}],"target":{"resourceId":"sid-0AD002F0-2C5A-4D9F-B0D2-7A03A8025FEB"}},{"resourceId":"sid-90A1D39E-E70D-4EB1-BB50-DF5F8F43359D","properties":{"overrideid":"","name":"Resubmit","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Resubmitted'"}},"defaultflow":"false","action":"Resubmit","state":"Resubmitted","mandatenotes":true},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-38272C15-118D-4D4F-80E0-DD3A3FEC8897"}],"bounds":{"lowerRight":{"x":555.5,"y":157.48046875},"upperLeft":{"x":225,"y":76}},"dockers":[{"x":20.5,"y":20.5},{"x":555.5,"y":76},{"x":225,"y":76},{"x":50,"y":40}],"target":{"resourceId":"sid-38272C15-118D-4D4F-80E0-DD3A3FEC8897"}},{"resourceId":"sid-F8AD09C4-9AD3-4E9F-9432-0B753ACDBFF3","properties":{"overrideid":"","name":"Submit","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Submitted'"}},"defaultflow":"false","action":"Submit","state":"Submitted","mandatenotes":false},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-0E4577E1-11E1-450D-A2B6-DBE242378F08"}],"bounds":{"lowerRight":{"x":389.44921875,"y":178},"upperLeft":{"x":275.55078125,"y":178}},"dockers":[{"x":50,"y":40},{"x":50,"y":40}],"target":{"resourceId":"sid-0E4577E1-11E1-450D-A2B6-DBE242378F08"}}],"bounds":{"lowerRight":{"x":1200,"y":1050},"upperLeft":{"x":0,"y":0}},"stencilset":{"url":"stencilsets/bpmn2.0/bpmn2.0.json","namespace":"http://b3mn.org/stencilset/bpmn2.0#"},"ssextensions":[]}]]></column>
			<column name="WORKFLOWXML" type="CLOB"><![CDATA[<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:activiti="http://activiti.org/bpmn" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI" typeLanguage="http://www.w3.org/2001/XMLSchema" expressionLanguage="http://www.w3.org/1999/XPath" targetNamespace="http://activiti.org/test"> <process id="REPRESENT_UPLOAD" name="Representment Upload Workflow Process" isExecutable="true"> <documentation>Maker/Checker WorkFlow</documentation> <startEvent id="startEvent1" name="Start" /> <userTask id="sid-38272C15-118D-4D4F-80E0-DD3A3FEC8897" name="Maker" activiti:actor="REPRESENT_UPLOAD_MAKER" activiti:assignmentLevel="Role Queue" /> <sequenceFlow id="sid-CB1DEE00-A9A1-4162-BD4A-CC3D4B6E7CC1" sourceRef="startEvent1" targetRef="sid-38272C15-118D-4D4F-80E0-DD3A3FEC8897" representsUserAction="false" mandateNotes="false" /> <userTask id="sid-0E4577E1-11E1-450D-A2B6-DBE242378F08" name="Approver" activiti:actor="REPRESENT_UPLOAD_APPROVER" activiti:assignmentLevel="Role Queue" /> <exclusiveGateway id="sid-6D2A3EE4-19BA-44FF-93AB-717BFF16FC01" /> <serviceTask id="sid-22D15E29-D37A-4505-A48C-7A329DF13429" name="Complete Process" activiti:operation="doApprove" /> <endEvent id="sid-5FF3A069-112E-49C0-9A73-07B73600334B" name="Approved" /> <sequenceFlow id="sid-5AABA17A-E718-463D-95FA-7B0E9E938247" sourceRef="sid-22D15E29-D37A-4505-A48C-7A329DF13429" targetRef="sid-5FF3A069-112E-49C0-9A73-07B73600334B" representsUserAction="false" mandateNotes="false" /> <serviceTask id="sid-0AD002F0-2C5A-4D9F-B0D2-7A03A8025FEB" name="Cancel Process" activiti:operation="doReject" /> <endEvent id="sid-B8114559-3D1A-4A63-A65F-B62B0D0812CA" name="Rejected" /> <sequenceFlow id="sid-9E25CBF1-5C3D-444E-B619-F8DF70F8710B" sourceRef="sid-0AD002F0-2C5A-4D9F-B0D2-7A03A8025FEB" targetRef="sid-B8114559-3D1A-4A63-A65F-B62B0D0812CA" representsUserAction="false" mandateNotes="false" /> <sequenceFlow id="sid-E75E07AC-22E7-4F1C-B6E9-733C5C1A3E22" sourceRef="sid-0E4577E1-11E1-450D-A2B6-DBE242378F08" targetRef="sid-6D2A3EE4-19BA-44FF-93AB-717BFF16FC01" representsUserAction="false" mandateNotes="false" /> <sequenceFlow id="sid-79F17746-BC9F-45F8-A31F-CA3969C76736" name="Approve" sourceRef="sid-6D2A3EE4-19BA-44FF-93AB-717BFF16FC01" targetRef="sid-22D15E29-D37A-4505-A48C-7A329DF13429" action="Approve" state="Approved" representsUserAction="true" mandateNotes="false"> <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Approved'</conditionExpression> </sequenceFlow> <sequenceFlow id="sid-751124CB-1CC1-40AF-B5DB-360706ED6035" name="Cancel" sourceRef="sid-38272C15-118D-4D4F-80E0-DD3A3FEC8897" targetRef="sid-0AD002F0-2C5A-4D9F-B0D2-7A03A8025FEB" action="Cancel" state="Cancelled" representsUserAction="true" mandateNotes="true"> <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Cancelled'</conditionExpression> </sequenceFlow> <sequenceFlow id="sid-4A389521-29A1-4967-8A99-23A3D1BA8CDE" name="Reject" sourceRef="sid-6D2A3EE4-19BA-44FF-93AB-717BFF16FC01" targetRef="sid-0AD002F0-2C5A-4D9F-B0D2-7A03A8025FEB" action="Reject" state="Rejected" representsUserAction="true" mandateNotes="true"> <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Rejected'</conditionExpression> </sequenceFlow> <sequenceFlow id="sid-90A1D39E-E70D-4EB1-BB50-DF5F8F43359D" name="Resubmit" sourceRef="sid-6D2A3EE4-19BA-44FF-93AB-717BFF16FC01" targetRef="sid-38272C15-118D-4D4F-80E0-DD3A3FEC8897" action="Resubmit" state="Resubmitted" representsUserAction="true" mandateNotes="true"> <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Resubmitted'</conditionExpression> </sequenceFlow> <sequenceFlow id="sid-F8AD09C4-9AD3-4E9F-9432-0B753ACDBFF3" name="Submit" sourceRef="sid-38272C15-118D-4D4F-80E0-DD3A3FEC8897" targetRef="sid-0E4577E1-11E1-450D-A2B6-DBE242378F08" action="Submit" state="Submitted" representsUserAction="true" mandateNotes="false"> <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Submitted'</conditionExpression> </sequenceFlow> </process> <bpmndi:BPMNDiagram id="BPMNDiagram_REPRESENT_UPLOAD"> <bpmndi:BPMNPlane bpmnElement="REPRESENT_UPLOAD" id="BPMNPlane_REPRESENT_UPLOAD"> <bpmndi:BPMNShape bpmnElement="startEvent1" id="BPMNShape_startEvent1"> <omgdc:Bounds height="30.0" width="30.0" x="100.0" y="163.0" /> </bpmndi:BPMNShape> <bpmndi:BPMNShape bpmnElement="sid-38272C15-118D-4D4F-80E0-DD3A3FEC8897" id="BPMNShape_sid-38272C15-118D-4D4F-80E0-DD3A3FEC8897"> <omgdc:Bounds height="80.0" width="100.0" x="175.0" y="138.0" /> </bpmndi:BPMNShape> <bpmndi:BPMNShape bpmnElement="sid-0E4577E1-11E1-450D-A2B6-DBE242378F08" id="BPMNShape_sid-0E4577E1-11E1-450D-A2B6-DBE242378F08"> <omgdc:Bounds height="80.0" width="100.0" x="390.0" y="138.0" /> </bpmndi:BPMNShape> <bpmndi:BPMNShape bpmnElement="sid-6D2A3EE4-19BA-44FF-93AB-717BFF16FC01" id="BPMNShape_sid-6D2A3EE4-19BA-44FF-93AB-717BFF16FC01"> <omgdc:Bounds height="40.0" width="40.0" x="535.0" y="158.0" /> </bpmndi:BPMNShape> <bpmndi:BPMNShape bpmnElement="sid-22D15E29-D37A-4505-A48C-7A329DF13429" id="BPMNShape_sid-22D15E29-D37A-4505-A48C-7A329DF13429"> <omgdc:Bounds height="80.0" width="100.0" x="660.0" y="138.0" /> </bpmndi:BPMNShape> <bpmndi:BPMNShape bpmnElement="sid-5FF3A069-112E-49C0-9A73-07B73600334B" id="BPMNShape_sid-5FF3A069-112E-49C0-9A73-07B73600334B"> <omgdc:Bounds height="28.0" width="28.0" x="805.0" y="164.0" /> </bpmndi:BPMNShape> <bpmndi:BPMNShape bpmnElement="sid-0AD002F0-2C5A-4D9F-B0D2-7A03A8025FEB" id="BPMNShape_sid-0AD002F0-2C5A-4D9F-B0D2-7A03A8025FEB"> <omgdc:Bounds height="80.0" width="100.0" x="505.0" y="289.0" /> </bpmndi:BPMNShape> <bpmndi:BPMNShape bpmnElement="sid-B8114559-3D1A-4A63-A65F-B62B0D0812CA" id="BPMNShape_sid-B8114559-3D1A-4A63-A65F-B62B0D0812CA"> <omgdc:Bounds height="28.0" width="28.0" x="650.0" y="315.0" /> </bpmndi:BPMNShape> <bpmndi:BPMNEdge bpmnElement="sid-F8AD09C4-9AD3-4E9F-9432-0B753ACDBFF3" id="BPMNEdge_sid-F8AD09C4-9AD3-4E9F-9432-0B753ACDBFF3"> <omgdi:waypoint x="275.0" y="178.0" /> <omgdi:waypoint x="390.0" y="178.0" /> </bpmndi:BPMNEdge> <bpmndi:BPMNEdge bpmnElement="sid-90A1D39E-E70D-4EB1-BB50-DF5F8F43359D" id="BPMNEdge_sid-90A1D39E-E70D-4EB1-BB50-DF5F8F43359D"> <omgdi:waypoint x="555.5" y="158.5" /> <omgdi:waypoint x="555.5" y="76.0" /> <omgdi:waypoint x="225.0" y="76.0" /> <omgdi:waypoint x="225.0" y="138.0" /> </bpmndi:BPMNEdge> <bpmndi:BPMNEdge bpmnElement="sid-79F17746-BC9F-45F8-A31F-CA3969C76736" id="BPMNEdge_sid-79F17746-BC9F-45F8-A31F-CA3969C76736"> <omgdi:waypoint x="574.5616883116883" y="178.4383116883117" /> <omgdi:waypoint x="660.0" y="178.16181229773463" /> </bpmndi:BPMNEdge> <bpmndi:BPMNEdge bpmnElement="sid-5AABA17A-E718-463D-95FA-7B0E9E938247" id="BPMNEdge_sid-5AABA17A-E718-463D-95FA-7B0E9E938247"> <omgdi:waypoint x="760.0" y="178.0" /> <omgdi:waypoint x="805.0" y="178.0" /> </bpmndi:BPMNEdge> <bpmndi:BPMNEdge bpmnElement="sid-CB1DEE00-A9A1-4162-BD4A-CC3D4B6E7CC1" id="BPMNEdge_sid-CB1DEE00-A9A1-4162-BD4A-CC3D4B6E7CC1"> <omgdi:waypoint x="130.0" y="178.0" /> <omgdi:waypoint x="175.0" y="178.0" /> </bpmndi:BPMNEdge> <bpmndi:BPMNEdge bpmnElement="sid-751124CB-1CC1-40AF-B5DB-360706ED6035" id="BPMNEdge_sid-751124CB-1CC1-40AF-B5DB-360706ED6035"> <omgdi:waypoint x="225.0" y="218.0" /> <omgdi:waypoint x="225.0" y="329.0" /> <omgdi:waypoint x="505.0" y="329.0" /> </bpmndi:BPMNEdge> <bpmndi:BPMNEdge bpmnElement="sid-4A389521-29A1-4967-8A99-23A3D1BA8CDE" id="BPMNEdge_sid-4A389521-29A1-4967-8A99-23A3D1BA8CDE"> <omgdi:waypoint x="555.4366666666667" y="197.56333333333333" /> <omgdi:waypoint x="555.1328903654485" y="289.0" /> </bpmndi:BPMNEdge> <bpmndi:BPMNEdge bpmnElement="sid-9E25CBF1-5C3D-444E-B619-F8DF70F8710B" id="BPMNEdge_sid-9E25CBF1-5C3D-444E-B619-F8DF70F8710B"> <omgdi:waypoint x="605.0" y="329.0" /> <omgdi:waypoint x="650.0" y="329.0" /> </bpmndi:BPMNEdge> <bpmndi:BPMNEdge bpmnElement="sid-E75E07AC-22E7-4F1C-B6E9-733C5C1A3E22" id="BPMNEdge_sid-E75E07AC-22E7-4F1C-B6E9-733C5C1A3E22"> <omgdi:waypoint x="490.0" y="178.2164502164502" /> <omgdi:waypoint x="535.4130434782609" y="178.41304347826087" /> </bpmndi:BPMNEdge> </bpmndi:BPMNPlane> </bpmndi:BPMNDiagram> </definitions>]]></column>
			<where>workflowtype='REPRESENT_UPLOAD'</where>
		</update>
	</changeSet>

	<changeSet id="ST#113.15" author="Gireesh.G">
		<sql>
			<![CDATA[
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'REPRESENT_UPLOAD_MAKER');
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'REPRESENT_UPLOAD_APPROVER');

				DELETE FROM SECROLES WHERE ROLECD ='REPRESENT_UPLOAD_MAKER';
				DELETE FROM SECROLES WHERE ROLECD ='REPRESENT_UPLOAD_APPROVER';

				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'REPRESENT_UPLOAD_MAKER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'REPRESENT_UPLOAD_APPROVER');

				DELETE FROM SECGROUPS WHERE GRPCODE ='REPRESENT_UPLOAD_MAKER';
				DELETE FROM SECGROUPS WHERE GRPCODE ='REPRESENT_UPLOAD_APPROVER';

				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='menu_Item_RePresentUpload_Maker';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='menu_Item_RePresentUpload_Approver';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='button_RePresentMentUpload_btnSave';

				INSERT INTO SECRIGHTS(RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_RePresentUpload_Maker', 'MENU', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS(RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_RePresentUpload_Approver', 'MENU', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SECRIGHTS(RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2, 'button_RePresentMentUpload_btnSave', 'RePresentMentUpload', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);

				INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'REPRESENT_UPLOAD_MAKER', 'WF Maker for RePresentUpload', 0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'REPRESENT_UPLOAD_APPROVER', 'WF Approver for RePresentUpload', 0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);

				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'REPRESENT_UPLOAD_MAKER'),    (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_RePresentUpload_Maker'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'REPRESENT_UPLOAD_APPROVER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_RePresentUpload_Approver'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);

				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'REPRESENT_UPLOAD_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_RePresentMentUpload_btnSave'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);

				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'REPRESENT_UPLOAD_MAKER', 'Maker role from RePresentment Upload', '', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0); 
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'REPRESENT_UPLOAD_APPROVER', 'Approver role from RePresentment Upload',	'', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);

				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'REPRESENT_UPLOAD_MAKER'),    (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'REPRESENT_UPLOAD_MAKER'),    0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'REPRESENT_UPLOAD_APPROVER'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'REPRESENT_UPLOAD_APPROVER'), 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#113.16" author="Gireesh.G">
		<addColumn tableName="PRMNT_EXTRACTION_STAGE">
			<column name="RePresentUploadID" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#113.17" author="Gireesh.G">
		<sql>
			<![CDATA[
		    	DELETE FROM SMTPARAMETERS WHERE SYSPARMCODE = 'BOUNCE_CODES_FOR_ACCOUNT_CLOSED';

            	INSERT INTO SMTPARAMETERS (SYSPARMCODE, SYSPARMDESC, SYSPARMTYPE, SYSPARMMAINT, SYSPARMVALUE, SYSPARMLENGTH, SYSPARMDEC, SYSPARMLIST, SYSPARMVALDMOD, SYSPARMDESCRIPTION, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('BOUNCE_CODES_FOR_ACCOUNT_CLOSED', 'Bounce codes for reason account closed(Codes in comma seperated)', 'String', 1, '130,131', 100, 0, NULL, NULL, '', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="PSD#211274_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'otp_messages');
			]]>
		</sql>
	</changeSet>

	<changeSet id="PSD#211274" author="Gopal.p">
		<modifyDataType tableName="OTP_Messages" columnName="MobileNo" newDataType="varchar(20)" />
	</changeSet>

	<changeSet id="PSD#211274_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'otp_messages');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#99.26" author="saikrishna.b">
		<sql>
			<![CDATA[
				DELETE FROM SMTPARAMETERS WHERE SYSPARMCODE = 'PRESENTMENT_RESPONSE_THREAD_COUNT';
				INSERT INTO SMTPARAMETERS (SYSPARMCODE, SYSPARMDESC, SYSPARMTYPE, SYSPARMMAINT, SYSPARMVALUE, SYSPARMLENGTH, SYSPARMDEC,SYSPARMLIST, SYSPARMVALDMOD, SYSPARMDESCRIPTION, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('PRESENTMENT_RESPONSE_THREAD_COUNT', 'Presentment Response Thread Count', 'int', 0, '10', 3, 0, NULL, NULL, 'Presentment Response Thread Count', 1, 1000, CURRENT_TIMESTAMP,'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#99.26.1" author="saikrishna.b" dbms="oracle">
		<createSequence sequenceName="SEQ_PRMNT_RESP_SUCCESS_QUEUE" minValue="1"
			maxValue="9223372036854775807" incrementBy="1" startValue="1"  ordered="true" />
	</changeSet>
	
	<changeSet id="ST#99.26.1" author="saikrishna.b" dbms="postgresql,mssql">
		<createSequence sequenceName="SEQ_PRMNT_RESP_SUCCESS_QUEUE" minValue="1"
			maxValue="9223372036854775807" incrementBy="1" startValue="1"   />
	</changeSet>

	<changeSet id="ST#99.26.2" author="saikrishna.b">
		<createTable tableName="PRMNT_RESP_SUCCESS_QUEUE">
			<column name="ID" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="BatchId" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="ReferenceId" type="bigint" />
			<column name="ThreadId" type="int" />
			<column name="StartTime" type="datetime" />
			<column name="EndTime" type="datetime" />
			<column name="Progress" type="int" />
			<column name="ErrorLog" type="varchar(2000)" />
			<column name="ResetCounterId" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet id="ST#99.26.3" author="saikrishna.b" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE PRMNT_RESP_SUCCESS_QUEUE ADD CONSTRAINT DF_PESQ_PROGRESS DEFAULT 0 FOR PROGRESS;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#99.26.3" author="saikrishna.b" dbms="postgresql, oracle">
		<addDefaultValue columnName="Progress" tableName="PRMNT_RESP_SUCCESS_QUEUE" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#99.26.4" author="saikrishna.b">
		<addPrimaryKey tableName="PRMNT_RESP_SUCCESS_QUEUE" columnNames="ID, BatchId"
			constraintName="PK_PRMNT_RESP_SUCCESS_QUEUE" />
	</changeSet>

	<changeSet id="ST#99.26.5" author="saikrishna.b">
		<createIndex tableName="PRMNT_RESP_SUCCESS_QUEUE" indexName="IDX_PRMNT_RESP_SUCCESS_Q_RID">
			<column name="ReferenceId" type="bigint" />
		</createIndex>
	</changeSet>

	<changeSet id="ST#99.26.6" author="saikrishna.b">
		<dropPrimaryKey tableName="PRMNT_RESP_SUCCESS_QUEUE" />
	</changeSet>

	<changeSet id="ST#99.26.7" author="saikrishna.b">
		<addPrimaryKey tableName="PRMNT_RESP_SUCCESS_QUEUE" columnNames="ID"
			constraintName="PK_PRMNT_RESP_SUCCESS_QUEUE" />
	</changeSet>

	<changeSet id="ST#99.27.1" author="saikrishna.b" dbms="oracle">
		<createSequence sequenceName="SEQ_PRMNT_RESP_BOUNCE_QUEUE" minValue="1"
			maxValue="9223372036854775807" incrementBy="1" startValue="1"  ordered="true" />
	</changeSet>

	<changeSet id="ST#99.27.1" author="saikrishna.b" dbms="postgresql,mssql">
		<createSequence sequenceName="SEQ_PRMNT_RESP_BOUNCE_QUEUE" minValue="1"
			maxValue="9223372036854775807" incrementBy="1" startValue="1"  />
	</changeSet>

	<changeSet id="ST#99.27.2" author="saikrishna.b">
		<createTable tableName="PRMNT_RESP_BOUNCE_QUEUE">
			<column name="ID" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="BatchId" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="ReferenceId" type="bigint" />
			<column name="ThreadId" type="int" />
			<column name="StartTime" type="datetime" />
			<column name="EndTime" type="datetime" />
			<column name="Progress" type="int" />
			<column name="ErrorLog" type="varchar(2000)" />
			<column name="ResetCounterId" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet id="ST#99.27.3" author="saikrishna.b" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE PRMNT_RESP_BOUNCE_QUEUE ADD CONSTRAINT DF_PEBQ_PROGRESS DEFAULT 0 FOR PROGRESS;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#99.27.3" author="saikrishna.b" dbms="postgresql, oracle">
		<addDefaultValue columnName="Progress" tableName="PRMNT_RESP_BOUNCE_QUEUE" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#99.27.4" author="saikrishna.b">
		<addPrimaryKey tableName="PRMNT_RESP_BOUNCE_QUEUE" columnNames="ID, BatchId"
			constraintName="PK_PRMNT_RESP_BOUNCE_QUEUE" />
	</changeSet>

	<changeSet id="ST#99.27.5" author="saikrishna.b">
		<createIndex tableName="PRMNT_RESP_BOUNCE_QUEUE" indexName="IDX_PRMNT_RESP_BOUNCE_Q_RID">
			<column name="ReferenceId" type="bigint" />
		</createIndex>
	</changeSet>

	<changeSet id="ST#99.27.6" author="saikrishna.b">
		<dropPrimaryKey tableName="PRMNT_RESP_BOUNCE_QUEUE" />
	</changeSet>

	<changeSet id="ST#99.27.7" author="saikrishna.b">
		<addPrimaryKey tableName="PRMNT_RESP_BOUNCE_QUEUE" columnNames="ID"
			constraintName="PK_PRMNT_RESP_BOUNCE_QUEUE" />
	</changeSet>


	<changeSet id="ST#99.28" author="saikrishna.b">
		<addColumn tableName="PRESENTMENT_RESP_HEADER">
			<column name="Progress" type="int" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#99.28.1" author="saikrishna.b" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE PRESENTMENT_RESP_HEADER ADD CONSTRAINT DF_PRH_PROGRESS DEFAULT 0 FOR PROGRESS;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#99.28.1" author="saikrishna.b" dbms="postgresql, oracle">
		<addDefaultValue columnName="Progress" tableName="PRESENTMENT_RESP_HEADER" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#99.28.2" author="saikrishna.b">
		<addColumn tableName="PRESENTMENT_RESP_DTLS">
			<column name="ERROR_CODE" type="varchar(10)" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#99.28.2.1" author="saikrishna.b">
		<addColumn tableName="PRESENTMENT_RESP_DTLS">
			<column name="ERROR_DESCRIPTION" type="varchar(2000)" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#99.28.2_01" author="saikrishna.b">
		<addColumn tableName="PRESENTMENT_RESP_DTLS_LOG">
			<column name="ERROR_CODE" type="varchar(10)" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#99.28.2.1_01" author="saikrishna.b">
		<addColumn tableName="PRESENTMENT_RESP_DTLS_LOG">
			<column name="ERROR_DESCRIPTION" type="varchar(2000)" />
		</addColumn>
	</changeSet>
	
	<changeSet id="PSD#210986_pre" author="Alekhya.T" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'postings_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="PSD#210986" author="Alekhya.T">
		<createView viewName="POSTINGS_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.LINKEDTRANID
					, T1.POSTREF
					, T1.POSTINGID
					, T1.FINREFERENCE
					, T1.FINEVENT
					, T1.POSTDATE
					, T1.VALUEDATE
					, T1.APPVALUEDATE
					, T1.APPDATE
					, T1.TRANCODE
					, T1.REVTRANCODE
					, T1.DRORCR
					, T1.ACCOUNT
					, T1.POSTAMOUNT
					, T1.POSTSTATUS
					, T1.ERRORID
					, T1.ERRORMSG
					, T2.AEEVENTCODEDESC LOVDESCEVENTCODENAME
					, T1.SHADOWPOSTING
					, T1.TRANDESC
					, T1.AMOUNTTYPE
					, T1.ACCCY
					, T1.POSTBRANCH
					, T1.USERBRANCH
					, T1.TRANORDERID
					, T1.TRANSORDER
					, AM.HOSTACCOUNT GLCODE
				FROM POSTINGS T1
				INNER JOIN BMTAEEVENTS T2 ON T1.FINEVENT = T2.AEEVENTCODE
				INNER JOIN (SELECT FINREFERENCE FROM FINANCEMAIN
					  UNION ALL
					  SELECT FINREFERENCE FROM FINANCEMAIN_TEMP) T3 ON T3.FINREFERENCE = T1.FINREFERENCE
				LEFT JOIN ACCOUNTMAPPING AM ON AM.ACCOUNT = T1.ACCOUNT
            	WHERE T1.FINEVENT  NOT IN ('VASFEE', 'JVPOST')
				UNION ALL
				SELECT T1.LINKEDTRANID
					, T1.POSTREF
					, T1.POSTINGID
					, T3.PRIMARYLINKREF FINREFERENCE
					, T1.FINEVENT
					, T1.POSTDATE
					, T1.VALUEDATE
					, T1.APPVALUEDATE
					, T1.APPDATE
					, T1.TRANCODE
					, T1.REVTRANCODE
					, T1.DRORCR
					, T1.ACCOUNT
					, T1.POSTAMOUNT
					, T1.POSTSTATUS
					, T1.ERRORID
					, T1.ERRORMSG
					, T2.AEEVENTCODEDESC LOVDESCEVENTCODENAME
					, T1.SHADOWPOSTING
					, T1.TRANDESC
					, T1.AMOUNTTYPE
					, T1.ACCCY
					, T1.POSTBRANCH
					, T1.USERBRANCH
					, T1.TRANORDERID
					, T1.TRANSORDER
					, AM.HOSTACCOUNT GLCODE
				FROM POSTINGS T1
				INNER JOIN BMTAEEVENTS T2 ON T1.FINEVENT = T2.AEEVENTCODE
				INNER JOIN VASRECORDING T3 ON T3.VASREFERENCE = T1.FINREFERENCE
				LEFT JOIN ACCOUNTMAPPING AM ON AM.ACCOUNT = T1.ACCOUNT
        		WHERE T1.FINEVENT = 'VASFEE'
				UNION ALL
				SELECT T1.LINKEDTRANID
					, T1.POSTREF
					, T1.POSTINGID
					, CAST(T3.REFERENCE as VARCHAR(20)) FINREFERENCE
					, T1.FINEVENT
					, T1.POSTDATE
					, T1.VALUEDATE
					, T1.APPVALUEDATE
					, T1.APPDATE
					, T1.TRANCODE
					, T1.REVTRANCODE
					, T1.DRORCR
					, T1.ACCOUNT
					, T1.POSTAMOUNT
					, T1.POSTSTATUS
					, T1.ERRORID
					, T1.ERRORMSG
					, T2.AEEVENTCODEDESC LOVDESCEVENTCODENAME
					, T1.SHADOWPOSTING
					, T1.TRANDESC
					, T1.AMOUNTTYPE
					, T1.ACCCY
					, T1.POSTBRANCH
					, T1.USERBRANCH
					, T1.TRANORDERID
					, T1.TRANSORDER
					, AM.HOSTACCOUNT GLCODE
				FROM POSTINGS T1
				INNER JOIN BMTAEEVENTS T2 ON T1.FINEVENT = T2.AEEVENTCODE
				INNER JOIN JVPOSTINGS T3 ON CAST(T3.BATCHREFERENCE AS VARCHAR(20))= T1.FINREFERENCE
				INNER JOIN FINANCEMAIN T4 ON T3.REFERENCE = T4.FINREFERENCE
        		LEFT JOIN ACCOUNTMAPPING AM ON AM.ACCOUNT = T1.ACCOUNT
       			WHERE T1.FINEVENT = 'JVPOST'
				UNION ALL
				SELECT T1.LINKEDTRANID
					, T1.POSTREF
					, T1.POSTINGID
					, T4.FINREFERENCE
					, T1.FINEVENT
					, T1.POSTDATE
					, T1.VALUEDATE
					, T1.APPVALUEDATE
					, T1.APPDATE
					, T1.TRANCODE
					, T1.REVTRANCODE
					, T1.DRORCR
					, T1.ACCOUNT
					, T1.POSTAMOUNT
					, T1.POSTSTATUS
					, T1.ERRORID
					, T1.ERRORMSG
					, T2.AEEVENTCODEDESC LOVDESCEVENTCODENAME
					, T1.SHADOWPOSTING
					, T1.TRANDESC
					, T1.AMOUNTTYPE
					, T1.ACCCY
					, T1.POSTBRANCH
					, T1.USERBRANCH
					, T1.TRANORDERID
					, T1.TRANSORDER
					, AM.HOSTACCOUNT GLCODE
				FROM POSTINGS T1
				INNER JOIN BMTAEEVENTS T2 ON T1.FINEVENT = T2.AEEVENTCODE
				INNER JOIN FEEPOSTINGS T3 ON CAST(T3.POSTID as VARCHAR(20)) = T1.FINREFERENCE
				INNER JOIN FINANCEMAIN T4 ON T3.REFERENCE = T4.FINREFERENCE
				LEFT JOIN ACCOUNTMAPPING AM ON AM.ACCOUNT = T1.ACCOUNT
				WHERE T1.FINEVENT = 'MANFEE'
			]]>
		</createView>
	</changeSet>
	
	<changeSet id="PSD#210986_post" author="Alekhya.T" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'postings_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="PSD#210989" author="saikrishna.b">
		<sql>
			<![CDATA[
				DELETE FROM RBFieldDetails Where RBMODULE = 'FEEPERC' and RBEVENT IN ('EARLYSTL', 'EARLYPAY');
				INSERT INTO RBFieldDetails (RBMODULE, RBEVENT, RBFLDNAME, RBFLDDESC, RBFLDTYPE, RBFLDLEN, RBFORCALFLDS, RBFORBLDFLDS, RBFLDTABLENAME, RBSTFLDS, MODULECODE) Select 'FEEPERC' RBMODULE, RBEVENT, RBFLDNAME, RBFLDDESC, RBFLDTYPE, RBFLDLEN, RBFORCALFLDS, RBFORBLDFLDS, RBFLDTABLENAME, RBSTFLDS, MODULECODE FROM RBFIELDDETAILS where RBMODULE = 'FEES' and RBEVENT IN ('EARLYSTL', 'EARLYPAY') order by RBEVENT;
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="PSD#211957_pre" author="saikrishna.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'filebatchstatus_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="PSD#211957" author="saikrishna.b">
		<createView viewName="FILEBATCHSTATUS_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT ID,
			  		BATCH_NAME FILENAME
				FROM PRESENTMENT_RESP_HEADER WHERE EVENT = 'IMPORT'
			]]>
      	</createView>
	</changeSet>
	
	<changeSet id="PSD#211957_post" author="saikrishna.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'filebatchstatus_aview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="PSD#211957.1" author="saikrishna.b">
		<sql>
			<![CDATA[
				UPDATE INSTRUMENT_TYPES SET CODE = 'EMANDATE' WHERE CODE ='EMNDT';
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="PSD#213620.1" author="saikrishna.b">
		<addColumn tableName="PresentmentHeader">
			<column name="Resp_Total" type="bigint" />
		</addColumn>
	</changeSet>
	
	<changeSet id="PSD#213620.2" author="saikrishna.b">
		<addColumn tableName="PresentmentHeader">
			<column name="Resp_Success" type="bigint" />
		</addColumn>
	</changeSet>
	
	<changeSet id="PSD#213620.3" author="saikrishna.b">
		<addColumn tableName="PresentmentHeader">
			<column name="Resp_Failed" type="bigint" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#822.1" author="goutham.ch">
		<addColumn tableName="MANDATE_REQUESTS">
			<column name="MANDATE_DATE" type="datetime" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#822.2" author="goutham.ch">
		<addColumn tableName="MANDATE_REQUESTS">
			<column name="NAME_OF_COMPANY" type="VARCHAR(500)" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#822.3" author="goutham.ch">
		<addColumn tableName="MANDATE_REQUESTS">
			<column name="ACTION" type="VARCHAR(50)" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#822.4" author="goutham.ch">
		<addColumn tableName="MANDATE_REQUESTS">
			<column name="AMOUNT" type="decimal(18,0)" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#822.5" author="goutham.ch">
		<addColumn tableName="MANDATE_REQUESTS">
			<column name="TELEPHONE_NO" type="VARCHAR(50)" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#822.6" author="goutham.ch">
		<addColumn tableName="MANDATE_REQUESTS">
			<column name="IMAGE_NAME" type="VARCHAR(500)" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#822.7" author="goutham.ch">
		<addColumn tableName="MANDATE_REQUESTS">
			<column name="CAT_CODE" type="VARCHAR(50)" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#822.8" author="goutham.ch">
		<addColumn tableName="MANDATE_REQUESTS">
			<column name="SECURITYMANDATE" type="int" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#822.8.1" author="goutham.ch" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE MANDATE_REQUESTS ADD CONSTRAINT DF_M_R_SECURITYMANDATE DEFAULT 0 FOR SECURITYMANDATE;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#822.8.2" author="goutham.ch" dbms="postgresql, oracle">
		<addDefaultValue columnName="SECURITYMANDATE" tableName="MANDATE_REQUESTS" defaultValue="0" />
	</changeSet>
	
	<changeSet id="PSD#214482_pre" author="Gireesh.G" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financeenquiry_view');
		 	]]>
		</sql>
	</changeSet>

	<changeSet id="PSD#214482" author="Gireesh.G">
		<createView viewName="FINANCEENQUIRY_VIEW" replaceIfExists="true">
		  <![CDATA[
				SELECT T1.FINID,
					T1.FINREFERENCE,
					T1.FINBRANCH,
					T1.FINTYPE,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.FINSTARTDATE,
					T1.CALTERMS NUMBEROFTERMS,
					T1.CUSTID,
					T1.FINAMOUNT,
					T1.GRCPERIODENDDATE,
					T1.MATURITYDATE,
					T1.FINREPAYMENTAMOUNT,
					T1.FINISACTIVE,
					T1.ALLOWGRCPERIOD,
					T1.DOWNPAYMENT,
					T1.MIGRATEDFINANCE,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.FINCURRASSETVALUE,
					T1.BLACKLISTED,
					T1.FEECHARGEAMT,
					T1.CLOSINGSTATUS,
					T1.GRACETERMS,
					T1.ALWMULTIDISB,
					T1.DEFFERMENTS,
					T1.FINSTATUS ,
					T1.MANDATEID,
					T1.FINREPAYMETHOD,
					T1.FINASSETVALUE,
					T1.SANBSDSCHDLE,
					T1.PROMOTIONSEQID,
					T1.SVAMOUNT,
					T1.CBAMOUNT,
					(T1.FINCURRASSETVALUE+ T1.FEECHARGEAMT) FINANCINGAMOUNT,
					(T1.FINCURRASSETVALUE- T1.FINREPAYMENTAMOUNT+ T1.FEECHARGEAMT) CURFINAMOUNT,
					T2.FINTYPEDESC LOVDESCFINTYPENAME,
					T2.FINSCHEDULEON LOVDESCFINSCHEDULEON,
					T2.FINDIVISION LOVDESCFINDIVISION,
					T2.FINCATEGORY LOVDESCPRODUCTCODENAME,
					T2.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
					T3.CUSTCIF LOVDESCCUSTCIF,
					T3.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
					T4.BRANCHDESC LOVDESCFINBRANCHNAME,
					T5.CUSTTYPECTG,
					COALESCE(T9.NOINST,0) NOINST,
					T1.TOTALCPZ,
					T1.FINOCRREQUIRED,
					T1.ALWGRCADJ,
					T1.ENDGRCPERIODAFTRFULLDISB,
					T1.AUTOINCGRCENDDATE,
					T1.RECORDSTATUS,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.SUBVENTIONFROM,
					T1.MANUFACTURERDEALERID,
					T10.DEALERNAME MANUFACTURERDEALERNAME,
					T10.CODE MANUFACTURERDEALERCODE,
					T1.ESCROW,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.ADVANCEEMI
				FROM FINANCEMAIN T1
				INNER JOIN RMTFINANCETYPES T2 ON T1.FINTYPE = T2.FINTYPE
				INNER JOIN CUSTOMERS T3 ON T1.CUSTID = T3.CUSTID
				INNER JOIN RMTBRANCHES T4 ON T1.FINBRANCH = T4.BRANCHCODE
				INNER JOIN RMTCUSTTYPES T5 ON T3.CUSTTYPECODE = T5.CUSTTYPECODE
				LEFT JOIN FINPFTDETAILS T9 ON T9.FINID = T1.FINID
				LEFT JOIN AMTVEHICLEDEALER T10 ON T1.MANUFACTURERDEALERID = T10.DEALERID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
			]]>
		</createView>
	</changeSet>

	<changeSet id="PSD#214482_post" author="Gireesh.G" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financeenquiry_view');
			]]>
		</sql>
	</changeSet>
	
</databaseChangeLog>