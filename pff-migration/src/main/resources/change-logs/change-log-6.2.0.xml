<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

	<property name="add.schema" value="dbo." dbms="mssql" />
	<property name="add.schema" value="" dbms="oracle" />
	<property name="add.schema" value="" dbms="postgresql" />
	<property name="call.substr" value="substring" dbms="mssql" />
	<property name="call.substr" value="substr" dbms="oracle" />
	<property name="call.substr" value="substring" dbms="postgresql" />
	<property name="call.auditdb" value="PLFAVANSEQC.." dbms="mssql" />
	<property name="call.auditdb" value=" " dbms="oracle" />
	<property name="call.concatenate" value="+" dbms="mssql" />
	<property name="call.concatenate" value="||" dbms="oracle" />
	<property name="call.concatenate" value="||" dbms="postgresql" />
	<property name="call.collength" value="LEN" dbms="mssql" />
	<property name="call.collength" value="LENGTH" dbms="oracle" />
	<property name="call.collength" value="LENGTH" dbms="postgresql" />
	<property name="call.date" value="getdate()" dbms="mssql" />
	<property name="call.date" value="sysdate" dbms="oracle" />
	<property name="call.date" value="now()" dbms="postgresql" />

	<changeSet id="pre_run_for_pgp" author="nagavamsi.p" runAlways="true" dbms="postgresql">
		<sql>
			Set search_path = plf,public,pg_catalog;
		</sql>
	</changeSet>

	<changeSet id="ST#93" author="nagavamsi.p">
		<addColumn tableName="AccountMapping_Temp">
			<column name="OpenedDate" type="datetime" />
			<column name="ClosedDate" type="datetime" />
			<column name="Status" type="varchar(8)" />
			<column name="AllowedManualEntry" type="Char(1)" />
			<column name="CreatedBy" type="bigint" />
			<column name="CreatedOn" type="datetime" />
			<column name="ApprovedBy" type="bigint" />
			<column name="ApprovedOn" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#93.1" author="nagavamsi.p">
		<sql>
			<![CDATA[  
				UPDATE ACCOUNTMAPPING_TEMP SET OPENEDDATE = (SELECT CAST(SYSPARMVALUE AS DATE) FROM SMTPARAMETERS WHERE SYSPARMCODE='APP_DATE');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#93.1.1" author="nagavamsi.p">
		<addNotNullConstraint tableName="AccountMapping_Temp" columnName="OpenedDate"
			columnDataType="datetime" />
	</changeSet>

	<changeSet id="ST#93.1.2" author="nagavamsi.p">
		<sql>
			<![CDATA[  
				UPDATE ACCOUNTMAPPING_TEMP SET STATUS = 'O';
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#93.1.3" author="nagavamsi.p">
		<addNotNullConstraint tableName="AccountMapping_Temp" columnName="Status"
			columnDataType="varchar(8)" />
	</changeSet>

	<changeSet id="ST#93.1.4" author="nagavamsi.p">
		<sql>
			<![CDATA[  
				UPDATE ACCOUNTMAPPING_TEMP SET ALLOWEDMANUALENTRY = 'B';
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#93.1.5" author="nagavamsi.p">
		<addNotNullConstraint tableName="AccountMapping_Temp" columnName="AllowedManualEntry"
			columnDataType="Char(1)" />
	</changeSet>

	<changeSet id="ST#93.1.6" author="nagavamsi.p">
		<sql>
			<![CDATA[  
				UPDATE ACCOUNTMAPPING_TEMP SET CREATEDBY = LASTMNTBY WHERE CREATEDBY IS NULL;
				UPDATE ACCOUNTMAPPING_TEMP SET CREATEDON = LASTMNTON WHERE CREATEDON IS NULL;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#93.1.7" author="nagavamsi.p">
		<addNotNullConstraint tableName="AccountMapping_Temp" columnName="CreatedBy"
			columnDataType="bigint" />
	</changeSet>

	<changeSet id="ST#93.1.8" author="nagavamsi.p">
		<addNotNullConstraint tableName="AccountMapping_Temp" columnName="CreatedOn"
			columnDataType="datetime" />
	</changeSet>

	<changeSet id="ST#93.2" author="nagavamsi.p">
		<addColumn tableName="AccountMapping">
			<column name="OpenedDate" type="datetime" />
			<column name="ClosedDate" type="datetime" />
			<column name="Status" type="varchar(8)" />
			<column name="AllowedManualEntry" type="Char(1)" />
			<column name="CreatedBy" type="bigint" />
			<column name="CreatedOn" type="datetime" />
			<column name="ApprovedBy" type="bigint" />
			<column name="ApprovedOn" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#93.2.1" author="nagavamsi.p">
		<sql>
			<![CDATA[  
				UPDATE ACCOUNTMAPPING SET OPENEDDATE = (SELECT CAST(SYSPARMVALUE DATE) FROM SMTPARAMETERS WHERE SYSPARMCODE='APP_DATE');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#93.2.2" author="nagavamsi.p">
		<addNotNullConstraint tableName="AccountMapping" columnName="OpenedDate"
			columnDataType="datetime" />
	</changeSet>

	<changeSet id="ST#93.2.3" author="nagavamsi.p">
		<sql>
			<![CDATA[  
				UPDATE ACCOUNTMAPPING SET STATUS = 'O';
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#93.2.4" author="nagavamsi.p">
		<addNotNullConstraint tableName="AccountMapping" columnName="Status" columnDataType="varchar(8)" />
	</changeSet>

	<changeSet id="ST#93.2.5" author="nagavamsi.p">
		<sql>
		<![CDATA[  
			UPDATE ACCOUNTMAPPING SET ALLOWEDMANUALENTRY  = 'B';
		]]>
		</sql>
	</changeSet>

	<changeSet id="ST#93.2.6" author="nagavamsi.p">
		<addNotNullConstraint tableName="AccountMapping" columnName="AllowedManualEntry"
			columnDataType="Char(1)" />
	</changeSet>

	<changeSet id="ST#93.2.7" author="nagavamsi.p">
		<sql>
			<![CDATA[  
				UPDATE ACCOUNTMAPPING SET CREATEDBY = LASTMNTBY WHERE CREATEDBY IS NULL;
				UPDATE ACCOUNTMAPPING SET CREATEDON = LASTMNTON WHERE CREATEDON IS NULL;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#93.2.8" author="nagavamsi.p">
		<addNotNullConstraint tableName="AccountMapping" columnName="CreatedBy" columnDataType="bigint" />
	</changeSet>

	<changeSet id="ST#93.2.9" author="nagavamsi.p">
		<addNotNullConstraint tableName="AccountMapping" columnName="CreatedOn" columnDataType="datetime" />
	</changeSet>

	<changeSet id="ST#93.3.1_pre" author="nagavamsi.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'accountmapping_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#93.3.1" author="nagavamsi.p">
		<createView replaceIfExists="true" viewName="ACCOUNTMAPPING_VIEW">
			<![CDATA[
				SELECT AM.ACCOUNT
					, AM.HOSTACCOUNT
					, AM.PROFITCENTERID
					, AM.COSTCENTERID
					, AM.FINTYPE
					, AM.ACCOUNTTYPE 
                    , PC.PROFITCENTERCODE
                    , PC.PROFITCENTERDESC	
                    , CC.COSTCENTERCODE	
                    , CC.COSTCENTERDESC	
                    , RAT.ACTYPEDESC ACCOUNTTYPEDESC	
                    , RFT.FINTYPEDESC
                    , AM.OPENEDDATE
                    , AM.CLOSEDDATE					
					, AM.STATUS 
					, AM.ALLOWEDMANUALENTRY
					, AM.VERSION
					, AM.CREATEDBY
					, AM.CREATEDON                                                                           
					, AM.APPROVEDBY
					, AM.APPROVEDON 
					, AM.LASTMNTBY 
					, AM.LASTMNTON 
					, AM.RECORDSTATUS 
					, AM.ROLECODE 
					, AM.NEXTROLECODE 
					, AM.TASKID 
					, AM.NEXTTASKID 
					, AM.RECORDTYPE 
					, AM.WORKFLOWID
				FROM ACCOUNTMAPPING_TEMP AM
				LEFT JOIN PROFITCENTERS PC ON PC.PROFITCENTERID = AM.PROFITCENTERID
				LEFT JOIN COSTCENTERS CC ON CC.COSTCENTERID = AM.COSTCENTERID
				LEFT JOIN RMTACCOUNTTYPES RAT ON RAT.ACTYPE = AM.ACCOUNTTYPE
				LEFT JOIN RMTFINANCETYPES RFT ON RFT.FINTYPE = AM.FINTYPE
				UNION ALL
				SELECT AM.ACCOUNT
					, AM.HOSTACCOUNT
					, AM.PROFITCENTERID
					, AM.COSTCENTERID
					, AM.FINTYPE
					, AM.ACCOUNTTYPE 
                    , PC.PROFITCENTERCODE
                    , PC.PROFITCENTERDESC	
                    , CC.COSTCENTERCODE	
                    , CC.COSTCENTERDESC	
                    , RAT.ACTYPEDESC ACCOUNTTYPEDESC	
                    , RFT.FINTYPEDESC
                    , AM.OPENEDDATE
                    , AM.CLOSEDDATE					
					, AM.STATUS 
					, AM.ALLOWEDMANUALENTRY
					, AM.VERSION
					, AM.CREATEDBY
					, AM.CREATEDON                                                                           
					, AM.APPROVEDBY
					, AM.APPROVEDON 
					, AM.LASTMNTBY 
					, AM.LASTMNTON 
					, AM.RECORDSTATUS 
					, AM.ROLECODE 
					, AM.NEXTROLECODE 
					, AM.TASKID 
					, AM.NEXTTASKID 
					, AM.RECORDTYPE 
					, AM.WORKFLOWID
				FROM ACCOUNTMAPPING  AM
				LEFT JOIN PROFITCENTERS PC ON PC.PROFITCENTERID = AM.PROFITCENTERID   
				LEFT JOIN COSTCENTERS CC ON CC.COSTCENTERID = AM.COSTCENTERID 
				LEFT JOIN RMTACCOUNTTYPES RAT ON RAT.ACTYPE = AM.ACCOUNTTYPE  
				LEFT JOIN RMTFINANCETYPES RFT ON RFT.FINTYPE = AM.FINTYPE
        	 	WHERE NOT EXISTS (SELECT 1 FROM ACCOUNTMAPPING_TEMP WHERE ACCOUNT = AM.ACCOUNT)
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#93.3.1_post" author="nagavamsi.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'accountmapping_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#93.4.1_pre" author="nagavamsi.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'accountmapping_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#93.4.1" author="nagavamsi.p">
		<createView replaceIfExists="true" viewName="ACCOUNTMAPPING_AVIEW">
			<![CDATA[
				SELECT AM.ACCOUNT
					, AM.HOSTACCOUNT
					, AM.PROFITCENTERID
					, AM.COSTCENTERID
					, AM.FINTYPE
					, AM.ACCOUNTTYPE 
                    , PC.PROFITCENTERCODE
                    , PC.PROFITCENTERDESC	
                    , CC.COSTCENTERCODE	
                    , CC.COSTCENTERDESC	
                    , RAT.ACTYPEDESC ACCOUNTTYPEDESC	
                    , RFT.FINTYPEDESC
                    , AM.OPENEDDATE
                    , AM.CLOSEDDATE					
					, AM.STATUS 
					, AM.ALLOWEDMANUALENTRY
					, AM.VERSION
					, AM.CREATEDBY
					, AM.CREATEDON                                                                           
					, AM.APPROVEDBY
					, AM.APPROVEDON 
					, AM.LASTMNTBY 
					, AM.LASTMNTON 
					, AM.RECORDSTATUS 
					, AM.ROLECODE 
					, AM.NEXTROLECODE 
					, AM.TASKID 
					, AM.NEXTTASKID 
					, AM.RECORDTYPE 
					, AM.WORKFLOWID
				FROM ACCOUNTMAPPING AM   
				LEFT OUTER JOIN PROFITCENTERS PC ON  PC.PROFITCENTERID = AM.PROFITCENTERID   
				LEFT OUTER JOIN COSTCENTERS CC ON  CC.COSTCENTERID = AM.COSTCENTERID 
				LEFT OUTER JOIN RMTACCOUNTTYPES RAT ON  RAT.ACTYPE = AM.ACCOUNTTYPE  
				LEFT OUTER JOIN RMTFINANCETYPES RFT ON RFT.FINTYPE = AM.FINTYPE
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#93.4.1_post" author="nagavamsi.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'accountmapping_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#93.5" author="nagavamsi.p">
		<sql>
			<![CDATA[
			    DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'AccountMappingDialog_AllowedManualEntry');
			    DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'AccountMappingDialog_OpenedDate');
			    DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'AccountMappingDialog_ClosedDate');
			    DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'AccountMappingDialog_Status');
			    
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'AccountMappingDialog_AllowedManualEntry';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'AccountMappingDialog_OpenedDate';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'AccountMappingDialog_ClosedDate';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'AccountMappingDialog_Status';
				
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'AccountMappingDialog_AllowedManualEntry', 'AccountMappingDialog', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'AccountMappingDialog_OpenedDate', 'AccountMappingDialog', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'AccountMappingDialog_ClosedDate', 'AccountMappingDialog', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'AccountMappingDialog_Status', 'AccountMappingDialog', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);

				INSERT INTO SECGROUPRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'ACCOUNTMAPPING_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'AccountMappingDialog_AllowedManualEntry'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'ACCOUNTMAPPING_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'AccountMappingDialog_OpenedDate'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'ACCOUNTMAPPING_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'AccountMappingDialog_ClosedDate'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'ACCOUNTMAPPING_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'AccountMappingDialog_Status'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#84.1" author="saikrishna.b">
		<addColumn tableName="SecUsers">
			<column name="DisableReason" type="varchar(50)" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#84.2" author="saikrishna.b">
		<addColumn tableName="SecUsers">
			<column name="EmployeeType" type="varchar(50)" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#84.3" author="saikrishna.b">
		<addColumn tableName="SecUsers_temp">
			<column name="DisableReason" type="varchar(50)" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#84.4" author="saikrishna.b">
		<addColumn tableName="SecUsers_temp">
			<column name="EmployeeType" type="varchar(50)" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#84.5" author="saikrishna.b">
		<addColumn tableName="SecUsers_rtemp">
			<column name="DisableReason" type="varchar(50)" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#84.6" author="saikrishna.b">
		<addColumn tableName="SecUsers_rtemp">
			<column name="EmployeeType" type="varchar(50)" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#85.1" author="saikrishna.b">
		<addColumn tableName="SecUsers">
			<column name="CreatedBy" type="bigint" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#85.2" author="saikrishna.b">
		<addColumn tableName="SecUsers">
			<column name="CreatedOn" type="datetime" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#85.3" author="saikrishna.b">
		<addColumn tableName="SecUsers">
			<column name="ApprovedBy" type="bigint" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#85.4" author="saikrishna.b">
		<addColumn tableName="SecUsers">
			<column name="ApprovedOn" type="datetime" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#85.5" author="saikrishna.b">
		<addColumn tableName="SecUsers_temp">
			<column name="CreatedBy" type="bigint" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#85.6" author="saikrishna.b">
		<addColumn tableName="SecUsers_temp">
			<column name="CreatedOn" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#85.7" author="saikrishna.b">
		<addColumn tableName="SecUsers_temp">
			<column name="ApprovedBy" type="bigint" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#85.8" author="saikrishna.b">
		<addColumn tableName="SecUsers_temp">
			<column name="ApprovedOn" type="datetime" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#85.9" author="saikrishna.b">
		<addColumn tableName="SecUsers_rtemp">
			<column name="CreatedBy" type="bigint" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#85.10" author="saikrishna.b">
		<addColumn tableName="SecUsers_rtemp">
			<column name="CreatedOn" type="datetime" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#85.11" author="saikrishna.b">
		<addColumn tableName="SecUsers_rtemp">
			<column name="ApprovedBy" type="bigint" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#85.12" author="saikrishna.b">
		<addColumn tableName="SecUsers_rtemp">
			<column name="ApprovedOn" type="datetime" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#85.13" author="saikrishna.b" >
		<sql>
			<![CDATA[
				UPDATE SECUSERS SET CREATEDBY = LASTMNTBY WHERE CREATEDBY IS NULL;
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#85.14" author="saikrishna.b" >
		<sql>
			<![CDATA[
				UPDATE SECUSERS SET CREATEDON = LASTMNTON WHERE CREATEDON IS NULL;
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#85.15" author="saikrishna.b" >
		<sql>
			<![CDATA[
				UPDATE SECUSERS SET APPROVEDBY = LASTMNTBY WHERE APPROVEDBY IS NULL;
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#85.16" author="saikrishna.b" >
		<sql>
			<![CDATA[
				UPDATE SECUSERS SET APPROVEDON = LASTMNTON WHERE APPROVEDON IS NULL;
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#85.17" author="saikrishna.b" >
		<sql>
			<![CDATA[
				UPDATE SECUSERS_TEMP SET CREATEDBY = LASTMNTBY WHERE CREATEDBY IS NULL;
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#85.18" author="saikrishna.b" >
		<sql>
			<![CDATA[
				UPDATE SECUSERS_TEMP SET CREATEDON = LASTMNTON WHERE CREATEDON IS NULL;
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#85.19" author="saikrishna.b" >
		<sql>
			<![CDATA[
				UPDATE SECUSERS_TEMP SET APPROVEDBY = LASTMNTBY WHERE APPROVEDBY IS NULL;
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#85.20" author="saikrishna.b" >
		<sql>
			<![CDATA[
				UPDATE SECUSERS_TEMP SET APPROVEDON = LASTMNTON WHERE APPROVEDON IS NULL;
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#85.21" author="saikrishna.b" >
		<sql>
			<![CDATA[
				UPDATE SECUSERS_RTEMP SET CREATEDBY = LASTMNTBY WHERE CREATEDBY IS NULL;
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#85.22" author="saikrishna.b" >
		<sql>
			<![CDATA[
				UPDATE SECUSERS_RTEMP SET CREATEDON = LASTMNTON WHERE CREATEDON IS NULL;
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#85.23" author="saikrishna.b" >
		<sql>
			<![CDATA[
				UPDATE SECUSERS_RTEMP SET APPROVEDBY = LASTMNTBY WHERE APPROVEDBY IS NULL;
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#85.24" author="saikrishna.b" >
		<sql>
			<![CDATA[
				UPDATE SECUSERS_RTEMP SET APPROVEDON = LASTMNTON WHERE APPROVEDON IS NULL;
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#85.25" author="saikrishna.b">
		<addNotNullConstraint tableName="SecUsers" columnName="CreatedBy"
			columnDataType="bigint" />
	</changeSet>
	
	<changeSet id="ST#85.26" author="saikrishna.b">
		<addNotNullConstraint tableName="SecUsers" columnName="CreatedOn"
			columnDataType="datetime" />
	</changeSet>
	
	<changeSet id="ST#85.27" author="saikrishna.b">
		<addNotNullConstraint tableName="SecUsers_temp" columnName="CreatedBy"
			columnDataType="bigint" />
	</changeSet>
	
	<changeSet id="ST#85.28" author="saikrishna.b">
		<addNotNullConstraint tableName="SecUsers_temp" columnName="CreatedOn"
			columnDataType="datetime" />
	</changeSet>
	
	<changeSet id="ST#85.29" author="saikrishna.b">
		<addNotNullConstraint tableName="SecUsers_rtemp" columnName="CreatedBy"
			columnDataType="bigint" />
	</changeSet>
	
	<changeSet id="ST#85.30" author="saikrishna.b">
		<addNotNullConstraint tableName="SecUsers_rtemp" columnName="CreatedOn"
			columnDataType="datetime" />
	</changeSet>
	
	<changeSet id="ST#84.10_pre" author="saikrishna.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'secusers_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#84.10" author="saikrishna.b">
		<createView viewName="SECUSERS_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.USRID
					, T1.USRLOGIN
					, T1.USRPWD
					, T1.USERSTAFFID
					, T1.USRFNAME
					, T1.USRMNAME
					, T1.USRLNAME
					, T1.USRMOBILE
					, T1.USREMAIL
					, T1.USRENABLED
					, T1.USRCANSIGNONFROM
					, T1.USRCANSIGNONTO
					, T1.USRCANOVERRIDELIMITS
					, T1.USRACEXP
					, T1.USRACEXPDT
					, T1.PWDEXPDT
					, T1.USRACLOCKED
					, T1.USRLANGUAGE
					, T5.LNGDESC LOVDESCUSRLANGUAGE
					, T1.USRDFTAPPID
					, T2.APPCODE LOVDESCUSRDFTAPPCODE
					, T2.APPDESCRIPTION LOVDESCUSRDFTAPPCODENAME
					, T1.USRBRANCHCODE
					, T4.BRANCHDESC LOVDESCUSRBRANCHCODENAME
					, T1.USRDEPTCODE
					, T3.DEPTDESC LOVDESCUSRDEPTCODENAME
					, T1.USRTOKEN
					, T1.USRISMULTIBRANCH
					, T1.USRINVLDLOGINTRIES
					, T1.USRDESG
					, T6.DESGDESC LOVDESCUSRDESG
					, T1.BUSINESSVERTICAL
				    , T7.CODE BUSINESSVERTICALCODE
				    , T7.DESCRIPTION BUSINESSVERTICALDESC
					, T1.VERSION
					, T1.LASTMNTBY
					, T1.LASTMNTON
					, T1.RECORDSTATUS
					, T1.ROLECODE
					, T1.NEXTROLECODE
					, T1.TASKID
					, T1.NEXTTASKID
					, T1.RECORDTYPE
					, T1.WORKFLOWID
					, T1.USRDFTAPPCODE
					, T1.AUTHTYPE
					, T1.USERTYPE
					, T1.ACCESSTOALLBRANCHES
					, T1.LDAPDOMAINNAME
					, T1.DELETED
					, T1.DISABLEREASON
					, T1.EMPLOYEETYPE
					, T1.CREATEDBY
					, T1.CREATEDON
					, T1.APPROVEDBY
					, T1.APPROVEDON
			    FROM SECUSERS_TEMP T1
			    LEFT JOIN PTAPPLICATIONDETAILS T2 ON T1.USRDFTAPPID = T2.APPID
			    LEFT JOIN BMTDEPARTMENTS T3 ON T1.USRDEPTCODE = T3.DEPTCODE
			    LEFT JOIN RMTBRANCHES T4 ON T1.USRBRANCHCODE = T4.BRANCHCODE
			    LEFT JOIN BMTLANGUAGE T5 ON T1.USRLANGUAGE = T5.LNGCODE
			    LEFT JOIN BMTDESIGNATIONS T6 ON T1.USRDESG = T6.DESGCODE
			    LEFT JOIN BUSINESS_VERTICAL T7 ON T7.ID = T1.BUSINESSVERTICAL
			 	UNION ALL
			 	SELECT T1.USRID
					, T1.USRLOGIN
					, T1.USRPWD
					, T1.USERSTAFFID
					, T1.USRFNAME
					, T1.USRMNAME
					, T1.USRLNAME
					, T1.USRMOBILE
					, T1.USREMAIL
					, T1.USRENABLED
					, T1.USRCANSIGNONFROM
					, T1.USRCANSIGNONTO
					, T1.USRCANOVERRIDELIMITS
					, T1.USRACEXP
					, T1.USRACEXPDT
					, T1.PWDEXPDT
					, T1.USRACLOCKED
					, T1.USRLANGUAGE
					, T5.LNGDESC LOVDESCUSRLANGUAGE
					, T1.USRDFTAPPID
					, T2.APPCODE LOVDESCUSRDFTAPPCODE
					, T2.APPDESCRIPTION LOVDESCUSRDFTAPPCODENAME
					, T1.USRBRANCHCODE
					, T4.BRANCHDESC LOVDESCUSRBRANCHCODENAME
					, T1.USRDEPTCODE
					, T3.DEPTDESC LOVDESCUSRDEPTCODENAME
					, T1.USRTOKEN
					, T1.USRISMULTIBRANCH
					, T1.USRINVLDLOGINTRIES
					, T1.USRDESG
					, T6.DESGDESC LOVDESCUSRDESG
					, T1.BUSINESSVERTICAL
					, T7.CODE BUSINESSVERTICALCODE
					, T7.DESCRIPTION BUSINESSVERTICALDESC
					, T1.VERSION
					, T1.LASTMNTBY
					, T1.LASTMNTON
					, T1.RECORDSTATUS
					, T1.ROLECODE
					, T1.NEXTROLECODE
					, T1.TASKID
					, T1.NEXTTASKID
					, T1.RECORDTYPE
					, T1.WORKFLOWID
					, T1.USRDFTAPPCODE
					, T1.AUTHTYPE
					, T1.USERTYPE
					, T1.ACCESSTOALLBRANCHES
					, T1.LDAPDOMAINNAME
					, T1.DELETED
					, T1.DISABLEREASON
					, T1.EMPLOYEETYPE
					, T1.CREATEDBY
					, T1.CREATEDON
					, T1.APPROVEDBY
					, T1.APPROVEDON
			    FROM SECUSERS T1
			    LEFT JOIN PTAPPLICATIONDETAILS T2 ON T1.USRDFTAPPID = T2.APPID
			    LEFT JOIN BMTDEPARTMENTS T3 ON T1.USRDEPTCODE = T3.DEPTCODE
			    LEFT JOIN RMTBRANCHES T4 ON T1.USRBRANCHCODE = T4.BRANCHCODE
			    LEFT JOIN BMTLANGUAGE T5 ON T1.USRLANGUAGE = T5.LNGCODE
			    LEFT JOIN BMTDESIGNATIONS T6 ON T1.USRDESG = T6.DESGCODE
			    LEFT JOIN BUSINESS_VERTICAL T7 ON T7.ID = T1.BUSINESSVERTICAL
			    WHERE NOT EXISTS (SELECT 1  FROM SECUSERS_TEMP WHERE SECUSERS_TEMP.USRID = T1.USRID)
			]]>	
		</createView>
	</changeSet>
	
	<changeSet id="ST#84.10_post" author="saikrishna.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'secusers_view');
			]]>
		</sql>
	</changeSet>
	
	
	<changeSet id="ST#84.11_pre" author="saikrishna.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'secusers_aview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#84.11" author="saikrishna.b">
		<createView viewName="SECUSERS_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.USRID
					, T1.USRLOGIN
					, T1.USRPWD
					, T1.USERSTAFFID
					, T1.USRFNAME
					, T1.USRMNAME
					, T1.USRLNAME
					, T1.USRMOBILE
					, T1.USREMAIL
					, T1.USRENABLED
					, T1.USRCANSIGNONFROM
					, T1.USRCANSIGNONTO
					, T1.USRCANOVERRIDELIMITS
					, T1.USRACEXP
					, T1.USRACEXPDT
					, T1.PWDEXPDT
					, T1.USRACLOCKED
					, T1.USRLANGUAGE
					, T5.LNGDESC LOVDESCUSRLANGUAGE
					, T1.USRDFTAPPID
					, T2.APPCODE LOVDESCUSRDFTAPPCODE
					, T2.APPDESCRIPTION LOVDESCUSRDFTAPPCODENAME
					, T1.USRBRANCHCODE
					, T4.BRANCHDESC LOVDESCUSRBRANCHCODENAME
					, T1.USRDEPTCODE
					, T3.DEPTDESC LOVDESCUSRDEPTCODENAME
					, T1.USRTOKEN
					, T1.USRISMULTIBRANCH
					, T1.USRINVLDLOGINTRIES
					, T1.USRDESG
					, T6.DESGDESC LOVDESCUSRDESG
					, T1.BUSINESSVERTICAL
					, T7.CODE BUSINESSVERTICALCODE
					, T7.DESCRIPTION BUSINESSVERTICALDESC
					, T1.VERSION
					, T1.LASTMNTBY
					, T1.LASTMNTON
					, T1.RECORDSTATUS
					, T1.ROLECODE
					, T1.NEXTROLECODE
					, T1.TASKID
					, T1.NEXTTASKID
					, T1.RECORDTYPE
					, T1.WORKFLOWID
					, T1.USRDFTAPPCODE
					, T1.AUTHTYPE
					, T1.USERTYPE
					, T1.ACCESSTOALLBRANCHES
					, T1.LDAPDOMAINNAME
					, T1.DELETED
					, T1.DISABLEREASON
					, T1.EMPLOYEETYPE
					, T1.CREATEDBY
					, T1.CREATEDON
					, T1.APPROVEDBY
					, T1.APPROVEDON
			    FROM SECUSERS T1
			    LEFT JOIN PTAPPLICATIONDETAILS T2 ON T1.USRDFTAPPID = T2.APPID
			    LEFT JOIN BMTDEPARTMENTS T3 ON T1.USRDEPTCODE = T3.DEPTCODE
			    LEFT JOIN RMTBRANCHES T4 ON T1.USRBRANCHCODE = T4.BRANCHCODE
			    LEFT JOIN BMTLANGUAGE T5 ON T1.USRLANGUAGE = T5.LNGCODE
			    LEFT JOIN BMTDESIGNATIONS T6 ON T1.USRDESG = T6.DESGCODE
			    LEFT JOIN BUSINESS_VERTICAL T7 ON T7.ID = T1.BUSINESSVERTICAL
			]]>	
		</createView>
	</changeSet>
	
	<changeSet id="ST#84.11_post" author="saikrishna.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'secusers_aview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#84.12_pre" author="saikrishna.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'secusers_rview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#84.12" author="saikrishna.b">
		<createView viewName="SECUSERS_RVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.USRID
				    , T1.USRLOGIN
				    , T1.USRPWD
				    , T1.USERSTAFFID
				    , T1.USRFNAME
				    , T1.USRMNAME
				    , T1.USRLNAME
				    , T1.USRMOBILE
				    , T1.USREMAIL
				    , T1.USRENABLED
				    , T1.USRCANSIGNONFROM
				    , T1.USRCANSIGNONTO
				    , T1.USRCANOVERRIDELIMITS
				    , T1.USRACEXP
				    , T1.USRACEXPDT
				    , T1.PWDEXPDT
				    , T1.USRACLOCKED
				    , T1.USRLANGUAGE
				    , T5.LNGDESC LOVDESCUSRLANGUAGE
				    , T1.USRDFTAPPID
				    , T2.APPCODE LOVDESCUSRDFTAPPCODE
				    , T2.APPDESCRIPTION LOVDESCUSRDFTAPPCODENAME
				    , T1.USRBRANCHCODE
				    , T4.BRANCHDESC LOVDESCUSRBRANCHCODENAME
				    , T1.USRDEPTCODE
				    , T3.DEPTDESC LOVDESCUSRDEPTCODENAME
				    , T1.USRTOKEN
				    , T1.USRISMULTIBRANCH
				    , T1.USRINVLDLOGINTRIES
				    , T1.USRDESG
				    , T6.DESGDESC LOVDESCUSRDESG
				    , T1.BUSINESSVERTICAL
				    , T7.CODE BUSINESSVERTICALCODE
				    , T7.DESCRIPTION BUSINESSVERTICALDESC
				    , T1.VERSION
				    , T1.LASTMNTBY
				    , T1.LASTMNTON
				    , T1.RECORDSTATUS
				    , T1.ROLECODE
				    , T1.NEXTROLECODE
				    , T1.TASKID
				    , T1.NEXTTASKID
				    , T1.RECORDTYPE
				    , T1.WORKFLOWID
				    , T1.USRDFTAPPCODE
				    , T1.AUTHTYPE
				    , T1.USERTYPE
				    , T1.LDAPDOMAINNAME
				    , T1.DELETED
				    , T1.DISABLEREASON
					, T1.EMPLOYEETYPE
					, T1.CREATEDBY
					, T1.CREATEDON
					, T1.APPROVEDBY
					, T1.APPROVEDON
		        FROM SECUSERS_RTEMP T1
		        JOIN PTAPPLICATIONDETAILS T2 ON T1.USRDFTAPPID = T2.APPID
		        JOIN BMTDEPARTMENTS T3 ON T1.USRDEPTCODE = T3.DEPTCODE
		        JOIN RMTBRANCHES T4 ON T1.USRBRANCHCODE = T4.BRANCHCODE
		        JOIN BMTLANGUAGE T5 ON T1.USRLANGUAGE = T5.LNGCODE
		        JOIN BMTDESIGNATIONS T6 ON T1.USRDESG = T6.DESGCODE
		        LEFT JOIN BUSINESS_VERTICAL T7 ON T7.ID = T1.BUSINESSVERTICAL
				UNION ALL
				SELECT T1.USRID
				    , T1.USRLOGIN
				    , T1.USRPWD
				    , T1.USERSTAFFID
				    , T1.USRFNAME
				    , T1.USRMNAME
				    , T1.USRLNAME
				    , T1.USRMOBILE
				    , T1.USREMAIL
				    , T1.USRENABLED
				    , T1.USRCANSIGNONFROM
				    , T1.USRCANSIGNONTO
				    , T1.USRCANOVERRIDELIMITS
				    , T1.USRACEXP
				    , T1.USRACEXPDT
				    , T1.PWDEXPDT
				    , T1.USRACLOCKED
				    , T1.USRLANGUAGE
				    , T5.LNGDESC LOVDESCUSRLANGUAGE
				    , T1.USRDFTAPPID
				    , T2.APPCODE LOVDESCUSRDFTAPPCODE
				    , T2.APPDESCRIPTION LOVDESCUSRDFTAPPCODENAME
				    , T1.USRBRANCHCODE
				    , T4.BRANCHDESC LOVDESCUSRBRANCHCODENAME
				    , T1.USRDEPTCODE
				    , T3.DEPTDESC LOVDESCUSRDEPTCODENAME
				    , T1.USRTOKEN
				    , T1.USRISMULTIBRANCH
				    , T1.USRINVLDLOGINTRIES
				    , T1.USRDESG
				    , T6.DESGDESC LOVDESCUSRDESG
				    , T1.BUSINESSVERTICAL
				    , T7.CODE BUSINESSVERTICALCODE
				    , T7.DESCRIPTION BUSINESSVERTICALDESC
				    , T1.VERSION
				    , T1.LASTMNTBY
				    , T1.LASTMNTON
				    , T1.RECORDSTATUS
				    , T1.ROLECODE
				    , T1.NEXTROLECODE
				    , T1.TASKID
				    , T1.NEXTTASKID
				    , T1.RECORDTYPE
				    , T1.WORKFLOWID
				    , T1.USRDFTAPPCODE
				    , T1.AUTHTYPE
				    , T1.USERTYPE
				    , T1.LDAPDOMAINNAME
				    , T1.DELETED
				    , T1.DISABLEREASON
					, T1.EMPLOYEETYPE
					, T1.CREATEDBY
					, T1.CREATEDON
					, T1.APPROVEDBY
					, T1.APPROVEDON
			   	FROM SECUSERS T1
			    JOIN PTAPPLICATIONDETAILS T2 ON T1.USRDFTAPPID = T2.APPID
			    JOIN BMTDEPARTMENTS T3 ON T1.USRDEPTCODE = T3.DEPTCODE
			    JOIN RMTBRANCHES T4 ON T1.USRBRANCHCODE = T4.BRANCHCODE
			    JOIN BMTLANGUAGE T5 ON T1.USRLANGUAGE = T5.LNGCODE
		        JOIN BMTDESIGNATIONS T6 ON T1.USRDESG = T6.DESGCODE
		        LEFT JOIN BUSINESS_VERTICAL T7 ON T7.ID = T1.BUSINESSVERTICAL
			    WHERE NOT EXISTS (SELECT 1 FROM SECUSERS_RTEMP  WHERE SECUSERS_RTEMP.USRID = T1.USRID)
			 ]]>	
		</createView>
	</changeSet>
	
	<changeSet id="ST#84.12_post" author="saikrishna.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'secusers_rview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#84.13" author="saikrishna.b">
		<sql>
			<![CDATA[
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID IN (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'SecurityUserDialog_usrDisableReason');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID IN (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'SecurityUserDialog_usrEmployeeType');
				
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'SecurityUserDialog_usrDisableReason';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'SecurityUserDialog_usrEmployeeType';
				
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'SecurityUserDialog_usrDisableReason', 'SecurityUserDialog', 1, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'SecurityUserDialog_usrEmployeeType', 'SecurityUserDialog', 1, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
				
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'SECURITYUSER_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'SecurityUserDialog_usrDisableReason'), 1, 0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'SECURITYUSER_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'SecurityUserDialog_usrEmployeeType'), 1, 0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#84.14" author="saikrishna.b">
		<sql>
			<![CDATA[
				INSERT INTO BMTLOVFIELDCODE (FIELDCODE, FIELDCODEDESC, FIELDCODETYPE, FIELDEDIT, ISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ('SU_DISABLE_REASON', 'Reason for disabling Security User', 'String', 1, 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#84.15" author="saikrishna.b">
		<sql>
			<![CDATA[
				INSERT INTO BMTLOVFIELDCODE (FIELDCODE, FIELDCODEDESC, FIELDCODETYPE, FIELDEDIT, ISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ('SU_EMP_TYPE', 'List of employee Types in security user', 'String', 1, 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#85.31" author="saikrishna.b">
		<sql>
			<![CDATA[
		    	DELETE FROM SMTPARAMETERS WHERE SYSPARMCODE = 'USR_DISABLE_DAYS_NEW';
				DELETE FROM SMTPARAMETERS WHERE SYSPARMCODE = 'USR_DISABLE_DAYS_EXISTING';

            	INSERT INTO SMTPARAMETERS (SYSPARMCODE, SYSPARMDESC, SYSPARMTYPE, SYSPARMMAINT, SYSPARMVALUE, SYSPARMLENGTH, SYSPARMDEC,SYSPARMLIST, SYSPARMVALDMOD, SYSPARMDESCRIPTION, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('USR_DISABLE_DAYS_NEW', 'Number of days to disable the user account when the new user is created N number of days ago.', 'String', '1', '30', 3, 0, NULL, NULL, '', 1, 1000, CURRENT_TIMESTAMP,'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SMTPARAMETERS (SYSPARMCODE, SYSPARMDESC, SYSPARMTYPE, SYSPARMMAINT, SYSPARMVALUE, SYSPARMLENGTH, SYSPARMDEC,SYSPARMLIST, SYSPARMVALDMOD, SYSPARMDESCRIPTION, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('USR_DISABLE_DAYS_EXISTING', 'Numbre of days to disable the user account when the user is not login from the N number of days.', 'String', '1', '90', 3, 0, NULL, NULL, '', 1, 1000, CURRENT_TIMESTAMP,'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#85.32" author="saikrishna.b">
		<sql>
			<![CDATA[
				DELETE FROM SMTPARAMETERS WHERE SYSPARMCODE = 'ALLOW_USR_LOCKING_JOB';
				DELETE FROM SMTPARAMETERS WHERE SYSPARMCODE = 'ALLOW_USR_DISABLE_JOB';

				INSERT INTO SMTPARAMETERS (SYSPARMCODE,SYSPARMDESC,SYSPARMTYPE,SYSPARMMAINT,SYSPARMVALUE,SYSPARMLENGTH,SYSPARMDEC,SYSPARMLIST,SYSPARMVALDMOD,SYSPARMDESCRIPTION,VERSION,LASTMNTBY,LASTMNTON,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID) VALUES ('ALLOW_USR_LOCKING_JOB','Allowing user locking job ','String',1,'N',3,0,null,null,'Allowing user locking job',1,1000,current_timestamp,'Approved',null,null,null,null,null,0);
 
 				INSERT INTO SMTPARAMETERS (SYSPARMCODE,SYSPARMDESC,SYSPARMTYPE,SYSPARMMAINT,SYSPARMVALUE,SYSPARMLENGTH,SYSPARMDEC,SYSPARMLIST,SYSPARMVALDMOD,SYSPARMDESCRIPTION,VERSION,LASTMNTBY,LASTMNTON,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID) VALUES ('ALLOW_USR_DISABLE_JOB','Allowing user disabling job ','String',1,'N',3,0,null,null,'Allowing user disabling job',1,1000,current_timestamp,'Approved',null,null,null,null,null,0);
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#87.1" author="saikrishna.b">
		<sql>
		<![CDATA[
			DELETE FROM ERRORDETAILS WHERE CODE = '93303';
			INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION) VALUES('93303', 'EN', 'E', 'No records found with User ID {0}', '', 'Approved', '', '', '', '', '', 0, CURRENT_TIMESTAMP, 1000, 0);
		]]>
		</sql>
	</changeSet>

	<changeSet id="ST#87.2" author="saikrishna.b">
		<sql>
		<![CDATA[
			DELETE FROM ERRORDETAILS WHERE CODE = '93304';
			INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION) VALUES('93304', 'EN', 'E', 'Invalid {0}', NULL, 'Approved', NULL, NULL, NULL, NULL, NULL, 0, CURRENT_TIMESTAMP, 1000, 0);
		]]>
		</sql>
	</changeSet>

	<changeSet id="ST#87.3" author="saikrishna.b">
		<sql>
		<![CDATA[
			DELETE FROM ERRORDETAILS WHERE CODE = '93305';
			INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION) VALUES('93305', 'EN', 'E', 'Operation with Code {0} is not assigned for User with User Login {1}', NULL, 'Approved', NULL, NULL, NULL, NULL, NULL, 0, CURRENT_TIMESTAMP, 1000, 0);
		]]>
		</sql>
	</changeSet>

	<changeSet id="ST#87.4" author="saikrishna.b">
		<sql>
		<![CDATA[
			DELETE FROM ERRORDETAILS WHERE CODE = '93306';
			INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION) VALUES('93306','EN','E','Operation with Code {0} is already assigned for User with User Login {1}', NULL, 'Approved', NULL, NULL, NULL, NULL, NULL, 0, CURRENT_TIMESTAMP, 1000, 0);
		]]>
		</sql>
	</changeSet>

	<changeSet id="ST#87.5" author="saikrishna.b">
		<sql>
		<![CDATA[
			DELETE FROM ERRORDETAILS WHERE CODE = '93307';
			INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION) VALUES('93307','EN','E','User ID {0} is not matched for the User Login {1}', NULL, 'Approved', NULL, NULL, NULL, NULL, NULL, 0, CURRENT_TIMESTAMP, 1000, 0);
		]]>
		</sql>
	</changeSet>

	<changeSet id="ST#87.6" author="saikrishna.b">
		<sql>
			<![CDATA[ 
				DELETE FROM ERRORDETAILS WHERE CODE = '90007';
				DELETE FROM ERRORDETAILS WHERE CODE = '90008';
				DELETE FROM ERRORDETAILS WHERE CODE = '90009';
			
				INSERT INTO ErrorDetails(CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID,NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION)VALUES(90007, 'EN', 'W', 'No records found with User Login {0}.', 'Cannot proceed further', 'Approved', null, null, null, null, null, 0, CURRENT_TIMESTAMP, 1000, 0);
				INSERT INTO ErrorDetails(CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID,NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION)VALUES(90008, 'EN', 'W', 'You are not authorized to change the data, Once it is expired.', 'Cannot proceed further', 'Approved', null, null, null, null, null, 0, CURRENT_TIMESTAMP, 1000, 0);
				INSERT INTO ErrorDetails(CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID,NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION)VALUES(90009, 'EN', 'W', 'It is under Maintainance: {0}. You are not allowed to maintain this record.', 'Cannot proceed further', 'Approved', null, null, null, null, null, 0, CURRENT_TIMESTAMP, 1000, 0);
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#87.7" author="saikrishna.b">
		<sql>
		<![CDATA[
			DELETE FROM ERRORDETAILS WHERE CODE = '90010';
			INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION) VALUES('90010','EN','E','{0} is not configured', NULL, 'Approved', NULL, NULL, NULL, NULL, NULL, 0, CURRENT_TIMESTAMP, 1000, 0);
		]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#88.1" author="Mounika.M">
		<sql>
			<![CDATA[
				DELETE FROM TEMPLATEFIELDS WHERE MODULE = 'OTP' AND FIELD = 'otp';
				INSERT INTO TEMPLATEFIELDS(MODULE, FIELD, FIELDDESC, FIELDFORMAT, EVENT) VALUES ('OTP', 'otp', 'OTP', 'A', 'OTP');

				DELETE FROM TEMPLATEFIELDS WHERE MODULE = 'OTP' AND FIELD = 'user_name';
				INSERT INTO TEMPLATEFIELDS(MODULE, FIELD, FIELDDESC, FIELDFORMAT, EVENT) VALUES ('OTP', 'user_name', 'User Name', 'A', 'OTP');

                DELETE FROM TEMPLATEFIELDS WHERE MODULE = 'OTP' AND FIELD = 'otp_validity';
                INSERT INTO TEMPLATEFIELDS(MODULE, FIELD, FIELDDESC, FIELDFORMAT, EVENT) VALUES ('OTP', 'otp_validity', 'OTP Validity', 'A', 'OTP');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#88.2" author="Mounika.M">
		<sql>
			<![CDATA[
				INSERT INTO TEMPLATES (TEMPLATEID, TEMPLATEFOR, MODULE, TEMPLATECODE, TEMPLATEDESC, SMSTEMPLATE, SMSCONTENT, EMAILTEMPLATE, EMAILCONTENT, EMAILFORMAT, EMAILSUBJECT, EMAILSENDTO, TURNAROUNDTIME, REPEAT, ACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, EVENT) VALUES((Select MAX(Seqno)+1 from SeqMailTemplate), 'SU', 'OTP', 'RESPWD_OTP', 'Reset Password', 1, 'Dear User your OTP', 1, 'Dear User Your OTP is.', 'H', 'LOGIN OTP', null, 0, 0, 1, 2, 1000, CURRENT_TIMESTAMP, 'Approved', '', '', '', '', '', 0, 'OTP')
				INSERT INTO TEMPLATES (TEMPLATEID, TEMPLATEFOR, MODULE, TEMPLATECODE, TEMPLATEDESC, SMSTEMPLATE, SMSCONTENT, EMAILTEMPLATE, EMAILCONTENT, EMAILFORMAT, EMAILSUBJECT, EMAILSENDTO, TURNAROUNDTIME, REPEAT, ACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, EVENT) VALUES((Select MAX(Seqno)+1 from SeqMailTemplate), 'SU', 'OTP', 'TWO_FACTOR_OTP', 'Two Factor Authentication', 1, 'Dear User Your OTP', 1, 'Dear User Your OTP is.', 'H', 'LOGIN OTP', null, 0, 0, 1, 2, 1000, CURRENT_TIMESTAMP, 'Approved', '', '', '', '', '', 0, 'OTP')
			]]>
		</sql>
	</changeSet> 
	
	<changeSet id="ST#166.1" author="ganeshdurga.n">
		<createTable tableName="USER_ACCESS_AUDIT">
			<column name="Id" type="bigint" autoIncrement="true">
				<constraints nullable="false" />
			</column>
			<column name="UsrLoginId" type="bigint" />
			<column name="MenuItem" type="varchar(200)" />
			<column name="Module" type="varchar(200)"/>
			<column name="Reference" type="varchar(200)"/>
			<column name="Role" type="varchar(200)"/>
			<column name="AccessedBy" type="bigint" />
			<column name="AccessedOn" type="datetime" />
		</createTable>
	</changeSet>

	<changeSet id="ST#166.2" author="ganeshdurga.n">
		<addPrimaryKey constraintName="PK_USER_ACCESS_AUDIT" tableName="USER_ACCESS_AUDIT" columnNames="Id" />
	</changeSet>

	<changeSet id="ST#166.3" author="ganeshdurga.n">
		<addForeignKeyConstraint baseColumnNames="AccessedBy" baseTableName="USER_ACCESS_AUDIT"
			constraintName="FK_SECUSERS_ACCESSEDBY" referencedColumnNames="USRID" referencedTableName="SECUSERS" />
	</changeSet>
	
	<changeSet id="ST#103" author="vasudevarao.s">
		<addColumn tableName="FEETYPES">
			<column name="PayableLinkTo" type="varchar(30)" />
			<column name="RecvFeeTypeId" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#103.01" author="vasudevarao.s">
		<sql>
			<![CDATA[	
				UPDATE FEETYPES SET RECVFEETYPEID = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#103.02" author="vasudevarao.s" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE FEETYPES ADD CONSTRAINT DF_FT_RECVFEETYPEID DEFAULT 0 FOR RECVFEETYPEID;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#103.03" author="vasudevarao.s" dbms="postgresql, oracle">
		<addDefaultValue columnName="RecvFeeTypeId" tableName="FeeTypes" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#103.04" author="vasudevarao.s">
		<addColumn tableName="FEETYPES_TEMP">
			<column name="PayableLinkTo" type="varchar(30)" />
			<column name="RecvFeeTypeId" type="Bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#103.01.01" author="vasudevarao.s">
		<sql>
			<![CDATA[	
				UPDATE FEETYPES_TEMP SET RECVFEETYPEID = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#103.05" author="vasudevarao.s" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE FEETYPES_TEMP ADD CONSTRAINT DF_FT_T_RECVFEETYPEID DEFAULT 0 FOR RECVFEETYPEID;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#103.06" author="vasudevarao.s" dbms="postgresql, oracle">
		<addDefaultValue columnName="RecvFeeTypeId" tableName="FEETYPES_TEMP" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#103.08_pre" author="vasudevarao.s" dbms="postgresql">
		<sql>
		<![CDATA[
			select deps_save_and_drop_dependencies ('plf', 'feetypes_aview');
		]]>
		</sql>
	</changeSet>

	<changeSet id="ST#103.08" author="vasudevarao.s">
		<createView viewName="FEETYPES_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FEETYPEID
					, T1.FEETYPECODE
					, T1.FEETYPEDESC
					, T1.MANUALADVICE
					, T1.REFUNDABLE
					, T1.ADVISETYPE
					, T1.ACCOUNTSETID
					, T1.HOSTFEETYPECODE
					, T1.TAXAPPLICABLE
					, T1.TAXCOMPONENT
					, T1.ACTIVE
					, T1.VERSION
					, T1.LASTMNTBY
					, T1.LASTMNTON
					, T1.RECORDSTATUS
					, T1.ROLECODE
					, T1.NEXTROLECODE
					, T1.TASKID
					, T1.NEXTTASKID
					, T1.RECORDTYPE
					, T1.WORKFLOWID
					, T2.ACCOUNTSETCODE
					, T2.ACCOUNTSETCODENAME
					, T1.AMORTZREQ
					, T1.DUEACCREQ
					, T1.DUEACCSET
	        		, T3.ACCOUNTSETCODE DUEACCTSETCODE
					, T3.ACCOUNTSETCODENAME DUEACCTSETCODENAME
					, T1.TDSREQ
					, T1.FEEINCOMEOREXPENSE 
		    		, T1.ACTYPE 
		    		, T4.ACTYPEDESC
					, T1.PAYABLELINKTO
					, T1.RECVFEETYPEID
				FROM FEETYPES T1
				LEFT JOIN RMTACCOUNTINGSET T2 ON T2.ACCOUNTSETID = T1.ACCOUNTSETID
          		LEFT JOIN RMTACCOUNTINGSET T3 ON T3.ACCOUNTSETID = T1.DUEACCSET
          		LEFT JOIN RMTACCOUNTTYPES T4 ON T4.ACTYPE = T1.ACTYPE
			]]>
    	</createView>
	</changeSet>

	<changeSet id="ST#103.08_post" author="vasudevarao.s" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'feetypes_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#103.09_pre" author="vasudevarao.s" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'feetypes_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#103.09" author="vasudevarao.s">
		<createView viewName="FEETYPES_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FEETYPEID
					, T1.FEETYPECODE
					, T1.FEETYPEDESC
					, T1.MANUALADVICE
					, T1.REFUNDABLE
					, T1.ADVISETYPE
					, T1.ACCOUNTSETID
					, T1.HOSTFEETYPECODE
					, T1.TAXAPPLICABLE
					, T1.TAXCOMPONENT
					, T1.ACTIVE
					, T1.VERSION
					, T1.LASTMNTBY
					, T1.LASTMNTON
					, T1.RECORDSTATUS
					, T1.ROLECODE
					, T1.NEXTROLECODE
					, T1.TASKID
					, T1.NEXTTASKID
					, T1.RECORDTYPE
					, T1.WORKFLOWID
					, T2.ACCOUNTSETCODE
					, T2.ACCOUNTSETCODENAME
					, T1.AMORTZREQ
					, T1.DUEACCREQ
					, T1.DUEACCSET
	        		, T3.ACCOUNTSETCODE DUEACCTSETCODE
					, T3.ACCOUNTSETCODENAME DUEACCTSETCODENAME
					, T1.TDSREQ
					, T1.FEEINCOMEOREXPENSE 
		    		, T1.ACTYPE 
		    		, T4.ACTYPEDESC
					, T1.PAYABLELINKTO
					, T1.RECVFEETYPEID
				FROM FEETYPES_TEMP T1
				LEFT JOIN RMTACCOUNTINGSET T2 ON T2.ACCOUNTSETID = T1.ACCOUNTSETID
           		LEFT JOIN RMTACCOUNTINGSET T3 ON T3.ACCOUNTSETID = T1.DUEACCSET
           		LEFT JOIN RMTACCOUNTTYPES T4 ON T4.ACTYPE = T1.ACTYPE
			]]>
   		</createView>
	</changeSet>

	<changeSet id="ST#103.09_post" author="vasudevarao.s" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'feetypes_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#103.10" author="vasudevarao.s">
		<sql>
			<![CDATA[
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FEETYPE_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'FeeTypeDialog_PayableLinkTo');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FEETYPE_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'FeeTypeDialog_ReceivableType');

				DELETE FROM SECRIGHTS WHERE RightName = 'FeeTypeDialog_AdviseCategory';
				DELETE FROM SECRIGHTS WHERE RightName = 'FeeTypeDialog_ReceivableType';

				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'FeeTypeDialog_PayableLinkTo','FeeTypeDialog', 0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'FeeTypeDialog_ReceivableType','FeeTypeDialog', 0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);

				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FEETYPE_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'FeeTypeDialog_PayableLinkTo'),  1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FEETYPE_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'FeeTypeDialog_ReceivableType'), 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
	 		]]>
		</sql>
	</changeSet>

	<changeSet id="ST#103.11_pre" author="vasudevarao.s" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'feetypes_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#103.11" author="vasudevarao.s">
		<createView viewName="FEETYPES_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FEETYPEID
					, T1.FEETYPECODE
					, T1.FEETYPEDESC
					, T1.MANUALADVICE
					, T1.REFUNDABLE
					, T1.ADVISETYPE
					, T1.ACCOUNTSETID
					, T1.HOSTFEETYPECODE
					, T1.TAXAPPLICABLE
					, T1.TAXCOMPONENT
					, T1.ACTIVE
					, T1.VERSION
					, T1.LASTMNTBY
					, T1.LASTMNTON
					, T1.RECORDSTATUS
					, T1.ROLECODE
					, T1.NEXTROLECODE
					, T1.TASKID
					, T1.NEXTTASKID
					, T1.RECORDTYPE
					, T1.WORKFLOWID
					, T2.ACCOUNTSETCODE
					, T2.ACCOUNTSETCODENAME
					, T1.AMORTZREQ
					, T1.DUEACCREQ
					, T1.DUEACCSET
					, T3.ACCOUNTSETCODE DUEACCTSETCODE
					, T3.ACCOUNTSETCODENAME DUEACCTSETCODENAME
					, T1.TDSREQ
					, T1.FEEINCOMEOREXPENSE 
					, T1.ACTYPE 
					, T4.ACTYPEDESC
					, T1.PAYABLELINKTO
					, T1.RECVFEETYPEID
					, T5.FEETYPEDESC RECVFEETYPEDESC
					, T5.FEETYPECODE RECVFEETYPECODE
				FROM FEETYPES_TEMP T1
				LEFT JOIN RMTACCOUNTINGSET T2 ON T2.ACCOUNTSETID = T1.ACCOUNTSETID
				LEFT JOIN RMTACCOUNTINGSET T3 ON T3.ACCOUNTSETID = T1.DUEACCSET
				LEFT JOIN RMTACCOUNTTYPES T4 ON T4.ACTYPE = T1.ACTYPE
				LEFT JOIN FEETYPES T5 ON T5.FEETYPEID = T1.RECVFEETYPEID
				UNION ALL
				SELECT T1.FEETYPEID
					, T1.FEETYPECODE
					, T1.FEETYPEDESC
					, T1.MANUALADVICE
					, T1.REFUNDABLE
					, T1.ADVISETYPE
					, T1.ACCOUNTSETID
					, T1.HOSTFEETYPECODE
					, T1.TAXAPPLICABLE
					, T1.TAXCOMPONENT
					, T1.ACTIVE
					, T1.VERSION
					, T1.LASTMNTBY
					, T1.LASTMNTON
					, T1.RECORDSTATUS
					, T1.ROLECODE
					, T1.NEXTROLECODE
					, T1.TASKID
					, T1.NEXTTASKID
					, T1.RECORDTYPE
					, T1.WORKFLOWID
					, T2.ACCOUNTSETCODE
					, T2.ACCOUNTSETCODENAME
					, T1.AMORTZREQ
					, T1.DUEACCREQ
					, T1.DUEACCSET
					, T3.ACCOUNTSETCODE DUEACCTSETCODE
					, T3.ACCOUNTSETCODENAME DUEACCTSETCODENAME
					, T1.TDSREQ
					, T1.FEEINCOMEOREXPENSE 
					, T1.ACTYPE 
					, T4.ACTYPEDESC
					, T1.PAYABLELINKTO
					, T1.RECVFEETYPEID
					, T5.FEETYPEDESC RECVFEETYPEDESC
					, T5.FEETYPECODE RECVFEETYPECODE
				FROM FEETYPES T1
				LEFT JOIN RMTACCOUNTINGSET T2 ON T2.ACCOUNTSETID = T1.ACCOUNTSETID
				LEFT JOIN RMTACCOUNTINGSET T3 ON T3.ACCOUNTSETID = T1.DUEACCSET
				LEFT JOIN RMTACCOUNTTYPES T4 ON T4.ACTYPE = T1.ACTYPE
				LEFT JOIN FEETYPES T5 ON T5.FEETYPEID = T1.RECVFEETYPEID
				WHERE NOT (EXISTS (SELECT 1 FROM FEETYPES_TEMP WHERE FEETYPES_TEMP.FEETYPEID = T1.FEETYPEID))
			]]>
    	</createView>
	</changeSet>

	<changeSet id="ST#103.11_post" author="vasudevarao.s" dbms="postgresql">
		<sql>
		<![CDATA[
			select deps_restore_dependencies ('plf', 'feetypes_view');
		]]>
		</sql>
	</changeSet>

	<changeSet id="ST#103.02.01" author="vasudevarao.s">
		<sql>
			<![CDATA[ 
				DELETE FROM ERRORDETAILS WHERE CODE = '90006';
			
				INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID,NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION) VALUES(90006, 'EN', 'W', 'This combination of data is already exists. Try another.', 'Cannot proceed further', 'Approved', null, null, null, null, null, 0, CURRENT_TIMESTAMP, 1000, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#103.03.12_pre" author="vasudevarao.s" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'manualadvise_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#103.03.12" author="vasudevarao.s">
		<createView viewName="MANUALADVISE_AVIEW" replaceIfExists="true">
			<![CDATA[
	 			SELECT T1.ADVISEID
					, T1.ADVISETYPE
					, FM.FINID
					, FM.FINREFERENCE
					, T1.FEETYPEID
					, T1.SEQUENCE
					, T1.ADVISEAMOUNT
					, T1.PAIDAMOUNT
					, T1.WAIVEDAMOUNT
					, T1.REMARKS
					, T1.VALUEDATE
					, T1.POSTDATE
					, T1.VERSION
					, T1.LASTMNTBY
					, T1.LASTMNTON
					, T1.RECORDSTATUS
					, T1.ROLECODE
					, T1.NEXTROLECODE
					, T1.TASKID
					, T1.NEXTTASKID
					, T1.RECORDTYPE
					, T1.WORKFLOWID
					, T2.FEETYPEDESC
					, T2.FEETYPECODE
					, T1.BOUNCEID
					, T1.RECEIPTID
					, T3.BOUNCECODE
					, T1.RESERVEDAMT
					, T1.BALANCEAMT
					, T3.REASON BOUNCECODEDESC
					, COALESCE(T2.TAXAPPLICABLE, 0) TAXAPPLICABLE
					, COALESCE(T2.TDSREQ, 0) TDSREQ
					, T2.TAXCOMPONENT
					, T1.PAIDCGST
					, T1.PAIDSGST
					, T1.PAIDIGST
					, T1.PAIDUGST
					, T1.WAIVEDCGST
					, T1.WAIVEDSGST
					, T1.WAIVEDUGST
					, T1.WAIVEDIGST
					, T1.WAIVEDCESS
					, T1.PAIDCESS
					, T1.FINSOURCE
					, T1.DUECREATION
					, T1.LINKEDTRANID
					, T1.TDSPAID
					, T1.HOLDDUE
					, T1.PRESENTMENTID
					, T1.STATUS
					, T1.REASON
					, T1.DUEDATE
					, T2.PAYABLELINKTO
				FROM MANUALADVISE T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
				LEFT JOIN BOUNCEREASONS T3 ON T1.BOUNCEID = T3.BOUNCEID
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#103.03.12_post" author="vasudevarao.s" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'manualadvise_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#103.04.13_pre" author="vasudevarao.s" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'manualadvise_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#103.04.13" author="vasudevarao.s">
		<createView viewName="MANUALADVISE_VIEW" replaceIfExists="true">
			<![CDATA[
	 			SELECT T1.ADVISEID
					, T1.ADVISETYPE
					, FM.FINID
					, FM.FINREFERENCE
					, T1.FEETYPEID
					, T1.SEQUENCE
					, T1.ADVISEAMOUNT
					, T1.PAIDAMOUNT
					, T1.WAIVEDAMOUNT
					, T1.REMARKS
					, T1.VALUEDATE
					, T1.POSTDATE
					, T1.VERSION
					, T1.LASTMNTBY
					, T1.LASTMNTON
					, T1.RECORDSTATUS
					, T1.ROLECODE
					, T1.NEXTROLECODE
					, T1.TASKID
					, T1.NEXTTASKID
					, T1.RECORDTYPE
					, T1.WORKFLOWID
					, T2.FEETYPEDESC
					, T2.FEETYPECODE
					, T1.BOUNCEID
					, T1.RECEIPTID
					, T3.BOUNCECODE
					, T1.RESERVEDAMT
					, T1.BALANCEAMT
					, T3.REASON BOUNCECODEDESC
					, COALESCE(T2.TAXAPPLICABLE, 0) TAXAPPLICABLE
					, T2.TAXCOMPONENT
					, COALESCE(T2.TDSREQ, 0) TDSREQ
					, T1.PAIDCGST
					, T1.PAIDSGST
					, T1.PAIDIGST
					, T1.PAIDUGST
					, T1.WAIVEDCGST
					, T1.WAIVEDSGST
					, T1.WAIVEDUGST
					, T1.WAIVEDIGST
					, T1.WAIVEDCESS
					, T1.PAIDCESS
					, T1.FINSOURCE
					, T1.DUECREATION
					, T1.LINKEDTRANID
					, T1.TDSPAID
					, T1.HOLDDUE
					, T1.PRESENTMENTID
					, T1.STATUS
					, T1.REASON
					, T1.DUEDATE
					, T2.PAYABLELINKTO
				FROM MANUALADVISE_TEMP T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
				LEFT JOIN BOUNCEREASONS T3 ON T1.BOUNCEID = T3.BOUNCEID
				UNION ALL
				SELECT T1.ADVISEID
					, T1.ADVISETYPE
					, FM.FINID
					, FM.FINREFERENCE
					, T1.FEETYPEID
					, T1.SEQUENCE
					, T1.ADVISEAMOUNT
					, T1.PAIDAMOUNT
					, T1.WAIVEDAMOUNT
					, T1.REMARKS
					, T1.VALUEDATE
					, T1.POSTDATE
					, T1.VERSION
					, T1.LASTMNTBY
					, T1.LASTMNTON
					, T1.RECORDSTATUS
					, T1.ROLECODE
					, T1.NEXTROLECODE
					, T1.TASKID
					, T1.NEXTTASKID
					, T1.RECORDTYPE
					, T1.WORKFLOWID
					, T2.FEETYPEDESC
					, T2.FEETYPECODE
					, T1.BOUNCEID
					, T1.RECEIPTID
					, T3.BOUNCECODE
					, T1.RESERVEDAMT
					, T1.BALANCEAMT
					, T3.REASON BOUNCECODEDESC
					, COALESCE(T2.TAXAPPLICABLE, 0) TAXAPPLICABLE
					, T2.TAXCOMPONENT
					, COALESCE(T2.TDSREQ, 0) TDSREQ
					, T1.PAIDCGST
					, T1.PAIDSGST
					, T1.PAIDIGST
					, T1.PAIDUGST
					, T1.WAIVEDCGST
					, T1.WAIVEDSGST
					, T1.WAIVEDUGST
					, T1.WAIVEDIGST
					, T1.WAIVEDCESS
					, T1.PAIDCESS
					, T1.FINSOURCE
					, T1.DUECREATION
					, T1.LINKEDTRANID
					, T1.TDSPAID
					, T1.HOLDDUE
					, T1.PRESENTMENTID
					, T1.STATUS
					, T1.REASON
					, T1.DUEDATE
					, T2.PAYABLELINKTO
				FROM MANUALADVISE T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
				LEFT JOIN BOUNCEREASONS T3 ON T1.BOUNCEID = T3.BOUNCEID
				WHERE NOT EXISTS (SELECT 1 FROM MANUALADVISE_TEMP
				WHERE MANUALADVISE_TEMP.ADVISEID = T1.ADVISEID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#103.04.13_post" author="vasudevarao.s" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'manualadvise_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#103.05.14_pre" author="vasudevarao.s" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'manualadvise_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#103.05.14" author="vasudevarao.s">
		<createView viewName="MANUALADVISE_TVIEW" replaceIfExists="true">
			<![CDATA[
	 			SELECT T1.ADVISEID
					, T1.ADVISETYPE
					, FM.FINID
					, FM.FINREFERENCE
					, T1.FEETYPEID
					, T1.SEQUENCE
					, T1.ADVISEAMOUNT
					, T1.PAIDAMOUNT
					, T1.WAIVEDAMOUNT
					, T1.REMARKS
					, T1.VALUEDATE
					, T1.POSTDATE
					, T1.VERSION
					, T1.LASTMNTBY
					, T1.LASTMNTON
					, T1.RECORDSTATUS
					, T1.ROLECODE
					, T1.NEXTROLECODE
					, T1.TASKID
					, T1.NEXTTASKID
					, T1.RECORDTYPE
					, T1.WORKFLOWID
					, T2.FEETYPEDESC
					, T2.FEETYPECODE
					, T1.BOUNCEID
					, T1.RECEIPTID
					, T3.BOUNCECODE
					, T1.RESERVEDAMT
					, T1.BALANCEAMT
					, T3.REASON AS BOUNCECODEDESC
					, COALESCE(T2.TAXAPPLICABLE, 0) TAXAPPLICABLE
					, COALESCE(T2.TDSREQ, 0) TDSREQ
					, T2.TAXCOMPONENT
					, T1.PAIDCGST
					, T1.PAIDSGST
					, T1.PAIDIGST
					, T1.PAIDUGST
					, T1.WAIVEDCGST
					, T1.WAIVEDSGST
					, T1.WAIVEDUGST
					, T1.WAIVEDIGST
					, T1.WAIVEDCESS
					, T1.PAIDCESS
					, T1.FINSOURCE
					, T1.DUECREATION
					, T1.LINKEDTRANID
					, T1.TDSPAID
					, T1.HOLDDUE
					, T1.PRESENTMENTID
					, T1.STATUS
					, T1.REASON
					, T1.DUEDATE
					, T2.PAYABLELINKTO
				FROM MANUALADVISE_TEMP T1
				INNER JOIN FINANCEMAIN FM ON FM.FINID = T1.FINID
				LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
				LEFT JOIN BOUNCEREASONS T3 ON T1.BOUNCEID = T3.BOUNCEID
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#103.05.14_post" author="vasudevarao.s" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'manualadvise_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#76.1" author="saikiran.n">
		<addColumn tableName="Mandates_Temp">
			<column name="SwapEffectiveDate" type="datetime" />
			<column name="HoldReason" type="bigint" />
			<column name="SecurityMandate" type="boolean" />
			<column name="EmployeeID" type="bigint" />
			<column name="EmployerName" type="varchar(200)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#76.1.1" author="saikiran.n">
		<addForeignKeyConstraint constraintName="fk_mandates_temp_holdreason"
			referencedTableName="BounceReasons" baseColumnNames="HoldReason" baseTableName="Mandates_Temp"
			referencedColumnNames="BounceId" />
	</changeSet>

	<changeSet id="ST#76.1.2" author="saikiran.n">
		<addForeignKeyConstraint constraintName="fk_mandates_temp_employeeid"
			referencedTableName="EmployerDetail" baseColumnNames="EmployeeID" baseTableName="Mandates_Temp"
			referencedColumnNames="employerid" />
	</changeSet>

	<changeSet id="ST#76.1.3" author="saikiran.n">
		<sql>
			<![CDATA[
				UPDATE MANDATES_TEMP SET SECURITYMANDATE = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#76.1.4" author="saikiran.n">
		<addNotNullConstraint tableName="MANDATES_TEMP" columnName="SECURITYMANDATE"
			columnDataType="boolean" />
	</changeSet>

	<changeSet id="ST#76.1.5" author="saikiran.n" dbms="postgresql, oracle">
		<addDefaultValue columnName="SecurityMandate" tableName="Mandates_Temp" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#76.1.5" author="saikiran.n" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE Mandates_Temp ADD CONSTRAINT DF_MANDATES_TEMP_SECURITYMANDATE DEFAULT 0 FOR SECURITYMANDATE;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#76.2" author="saikiran.n">
		<addColumn tableName="Mandates">
			<column name="SwapEffectiveDate" type="datetime" />
			<column name="HoldReason" type="bigint" />
			<column name="SecurityMandate" type="boolean" />
			<column name="EmployeeID" type="bigint" />
			<column name="EmployerName" type="varchar(200)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#76.2.1" author="saikiran.n">
		<addForeignKeyConstraint constraintName="fk_mandates_holdreason"
			referencedTableName="BounceReasons" baseColumnNames="HoldReason" baseTableName="Mandates"
			referencedColumnNames="BounceId" />
	</changeSet>

	<changeSet id="ST#76.2.2" author="saikiran.n">
		<addForeignKeyConstraint constraintName="fk_mandates_employeeid"
			referencedTableName="EmployerDetail" baseColumnNames="EmployeeID" baseTableName="Mandates"
			referencedColumnNames="employerid" />
	</changeSet>

	<changeSet id="ST#76.2.3" author="saikiran.n">
		<sql>
			<![CDATA[
				UPDATE MANDATES SET SECURITYMANDATE = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#76.2.4" author="saikiran.n">
		<addNotNullConstraint tableName="MANDATES" columnName="SECURITYMANDATE" columnDataType="boolean" />
	</changeSet>

	<changeSet id="ST#76.2.5" author="saikiran.n" dbms="postgresql, oracle">
		<addDefaultValue columnName="SecurityMandate" tableName="Mandates" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#76.2.5" author="saikiran.n" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE Mandates ADD CONSTRAINT DF_MANDATES_SECURITYMANDATE DEFAULT 0 FOR SECURITYMANDATE;
			]]>
		</sql>
	</changeSet>



	<changeSet id="ST#76.3_pre" author="saikiran.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'mandates_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#76.3" author="saikiran.n">
		<createView viewName="MANDATES_AVIEW" replaceIfExists="true">
				<![CDATA[
					SELECT M.MANDATEID
						, M.CUSTID
						, M.MANDATEREF
						, M.MANDATETYPE
						, M.BANKBRANCHID
						, M.ACCNUMBER
						, M.ACCHOLDERNAME
						, M.JOINTACCHOLDERNAME
						, M.ACCTYPE
						, M.OPENMANDATE
						, M.STARTDATE
						, M.EXPIRYDATE
						, M.MAXLIMIT
						, M.PERIODICITY
						, M.PHONECOUNTRYCODE
						, M.PHONEAREACODE
						, M.PHONENUMBER
						, M.STATUS
						, M.APPROVALID
						, M.VERSION
						, M.LASTMNTBY
						, M.LASTMNTON
						, M.RECORDSTATUS
						, M.ROLECODE
						, M.NEXTROLECODE
						, M.TASKID
						, M.NEXTTASKID
						, M.RECORDTYPE
						, M.WORKFLOWID
						, M.REASON
						, M.MANDATECCY
						, C.CUSTCIF
						, C.CUSTSHRTNAME
						, BB.BANKCODE
						, BB.BRANCHCODE
						, BB.BRANCHDESC
						, BB.MICR
						, BB.IFSC
						, BB.CITY
						, BD.BANKNAME
						, M.INPUTDATE
						, M.INPUTDATE FROMDATE
						, M.INPUTDATE TODATE
						, M.ACTIVE
						, M.DEFAULTMANDATE
						, 1  USEEXISTING
						, M.ORGREFERENCE
						, PC.PCCITYNAME
						, M.DOCUMENTNAME
						, M.DOCUMENTREF
						, M.EXTERNALREF
						, M.ENTITYCODE
						, E.ENTITYDESC
						, M.PRIMARYMANDATEID
						, M.SWAPISACTIVE
						, M.BARCODENUMBER
						, PB.PARTNERBANKCODE
						, PB.PARTNERBANKNAME
						, M.PARTNERBANKID
						, M.EMANDATESOURCE
						, M.EMANDATEREFERENCENO
						, FM.FINTYPE
						, M.HOLDREASON
						, M.SWAPEFFECTIVEDATE
						, M.SECURITYMANDATE
						, M.EMPLOYEEID
						, M.EMPLOYERNAME
					FROM MANDATES M
					INNER JOIN CUSTOMERS C ON C.CUSTID = M.CUSTID
					LEFT JOIN BANKBRANCHES BB ON BB.BANKBRANCHID = M.BANKBRANCHID
					LEFT JOIN BMTBANKDETAIL BD ON BD.BANKCODE = BB.BANKCODE 
					LEFT JOIN RMTPROVINCEVSCITY PC ON PC.PCCITY = BB.CITY
					LEFT JOIN ENTITY E ON E.ENTITYCODE = M.ENTITYCODE
					LEFT JOIN PARTNERBANKS PB ON PB.PARTNERBANKID = M.PARTNERBANKID
					LEFT JOIN FINANCEMAIN FM ON FM.FINREFERENCE = M.ORGREFERENCE
				]]>
		</createView>
	</changeSet>

	<changeSet id="ST#76.3_post" author="saikiran.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'mandates_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#76.3.1_pre" author="saikiran.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'mandates_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#76.3.1" author="saikiran.n">
		<createView viewName="MANDATES_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT 	M.MANDATEID
					, M.CUSTID
					, M.MANDATEREF
					, M.MANDATETYPE
					, M.BANKBRANCHID
					, M.ACCNUMBER
					, M.ACCHOLDERNAME
					, M.JOINTACCHOLDERNAME
					, M.ACCTYPE
					, M.OPENMANDATE
					, M.STARTDATE
					, M.EXPIRYDATE
					, M.MAXLIMIT
					, M.PERIODICITY
					, M.PHONECOUNTRYCODE
					, M.PHONEAREACODE
					, M.PHONENUMBER
					, M.STATUS
					, M.APPROVALID
					, M.VERSION
					, M.LASTMNTBY
					, M.LASTMNTON
					, M.RECORDSTATUS
					, M.ROLECODE
					, M.NEXTROLECODE
					, M.TASKID
					, M.NEXTTASKID
					, M.RECORDTYPE
					, M.WORKFLOWID
					, M.REASON
					, M.MANDATECCY
					, C.CUSTCIF
					, C.CUSTSHRTNAME
					, BB.BANKCODE
					, BB.BRANCHCODE
					, BB.BRANCHDESC
					, BB.MICR
					, BB.IFSC
					, BB.CITY
					, BD.BANKNAME
					, M.INPUTDATE
					, M.ACTIVE
					, M.DEFAULTMANDATE
					, 0 USEEXISTING
					, M.ORGREFERENCE
					, PC.PCCITYNAME
					, M.DOCUMENTNAME
					, M.DOCUMENTREF
					, M.EXTERNALREF
					, M.ENTITYCODE
					, E.ENTITYDESC
					, M.PRIMARYMANDATEID
					, M.SWAPISACTIVE
					, M.BARCODENUMBER
					, PB.PARTNERBANKCODE
					, PB.PARTNERBANKNAME
					, M.PARTNERBANKID
					, M.EMANDATESOURCE
					, M.EMANDATEREFERENCENO
					, FM.FINTYPE
					, M.HOLDREASON
					, M.SWAPEFFECTIVEDATE
					, M.SECURITYMANDATE
					, M.EMPLOYEEID
					, M.EMPLOYERNAME
				FROM MANDATES_TEMP M
				INNER JOIN CUSTOMERS C ON C.CUSTID = M.CUSTID
				LEFT JOIN BANKBRANCHES BB ON BB.BANKBRANCHID = M.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL BD ON BD.BANKCODE = BB.BANKCODE
				LEFT JOIN RMTPROVINCEVSCITY PC ON PC.PCCITY = BB.CITY
				LEFT JOIN ENTITY E ON E.ENTITYCODE = M.ENTITYCODE
				LEFT JOIN PARTNERBANKS PB ON PB.PARTNERBANKID = M.PARTNERBANKID
				LEFT JOIN FINANCEMAIN FM ON FM.FINREFERENCE = M.ORGREFERENCE
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#76.3.1_post" author="saikiran.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'mandates_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#76.3.2_pre" author="saikiran.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'mandates_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#76.3.2" author="saikiran.n">
		<createView viewName="MANDATES_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT M.MANDATEID
					    , M.CUSTID
					    , M.MANDATEREF
					    , M.MANDATETYPE
					    , M.BANKBRANCHID
					    , M.ACCNUMBER
					    , M.ACCHOLDERNAME
					    , M.JOINTACCHOLDERNAME
					    , M.ACCTYPE
					    , M.OPENMANDATE
					    , M.STARTDATE
					    , M.EXPIRYDATE
					    , M.MAXLIMIT
					    , M.PERIODICITY
					    , M.PHONECOUNTRYCODE
					    , M.PHONEAREACODE
					    , M.PHONENUMBER
					    , M.STATUS
					    , M.APPROVALID
					    , M.VERSION
					    , M.LASTMNTBY
					    , M.LASTMNTON
					    , M.RECORDSTATUS
					    , M.ROLECODE
					    , M.NEXTROLECODE
					    , M.TASKID
					    , M.NEXTTASKID
					    , M.RECORDTYPE
					    , M.WORKFLOWID
					    , M.REASON
					    , M.MANDATECCY
					    , C.CUSTCIF
					    , C.CUSTSHRTNAME
					    , BB.BANKCODE
					    , BB.BRANCHCODE
					    , BB.BRANCHDESC
					    , BB.MICR
					    , BB.IFSC
					    , BB.CITY
					    , BD.BANKNAME
					    , M.INPUTDATE
					    , M.ACTIVE
					    , M.DEFAULTMANDATE
					    , 0 USEEXISTING
					    , M.ORGREFERENCE
					    , PC.PCCITYNAME
					    , M.DOCUMENTNAME
					    , M.DOCUMENTREF
					    , M.EXTERNALREF
					    , M.ENTITYCODE
					    , E.ENTITYDESC
					    , M.PRIMARYMANDATEID
					    , M.SWAPISACTIVE
					    , M.BARCODENUMBER
					    , PB.PARTNERBANKCODE
					    , PB.PARTNERBANKNAME
					    , M.PARTNERBANKID
					    , M.EMANDATESOURCE
					    , M.EMANDATEREFERENCENO
						, FM.FINTYPE
						, M.HOLDREASON
						, M.SWAPEFFECTIVEDATE
						, M.SECURITYMANDATE
						, M.EMPLOYEEID
						, M.EMPLOYERNAME
					FROM MANDATES_TEMP M
					JOIN CUSTOMERS C ON M.CUSTID = C.CUSTID
					LEFT JOIN BANKBRANCHES BB ON M.BANKBRANCHID = BB.BANKBRANCHID
					LEFT JOIN BMTBANKDETAIL BD ON BB.BANKCODE = BD.BANKCODE
					LEFT JOIN RMTPROVINCEVSCITY PC ON BB.CITY = PC.PCCITY
					LEFT JOIN ENTITY E ON M.ENTITYCODE = E.ENTITYCODE
					LEFT JOIN PARTNERBANKS PB ON M.PARTNERBANKID = PB.PARTNERBANKID
					LEFT JOIN FINANCEMAIN FM ON M.ORGREFERENCE = FM.FINREFERENCE
					UNION ALL
					SELECT M.MANDATEID
						, M.CUSTID
						, M.MANDATEREF
						, M.MANDATETYPE
						, M.BANKBRANCHID
						, M.ACCNUMBER
						, M.ACCHOLDERNAME
						, M.JOINTACCHOLDERNAME
						, M.ACCTYPE
						, M.OPENMANDATE
						, M.STARTDATE
						, M.EXPIRYDATE
						, M.MAXLIMIT
						, M.PERIODICITY
						, M.PHONECOUNTRYCODE
						, M.PHONEAREACODE
						, M.PHONENUMBER
						, M.STATUS
						, M.APPROVALID
						, M.VERSION
						, M.LASTMNTBY
						, M.LASTMNTON
						, M.RECORDSTATUS
						, M.ROLECODE
						, M.NEXTROLECODE
						, M.TASKID
						, M.NEXTTASKID
						, M.RECORDTYPE
						, M.WORKFLOWID
						, M.REASON
						, M.MANDATECCY
						, C.CUSTCIF
						, C.CUSTSHRTNAME
						, BB.BANKCODE
						, BB.BRANCHCODE
						, BB.BRANCHDESC
						, BB.MICR
						, BB.IFSC
						, BB.CITY
						, BD.BANKNAME
						, M.INPUTDATE
						, M.ACTIVE
						, M.DEFAULTMANDATE
						, 1 USEEXISTING
						, M.ORGREFERENCE
						, PC.PCCITYNAME
						, M.DOCUMENTNAME
						, M.DOCUMENTREF
						, M.EXTERNALREF
						, M.ENTITYCODE
						, E.ENTITYDESC
						, M.PRIMARYMANDATEID
						, M.SWAPISACTIVE
						, M.BARCODENUMBER
						, PB.PARTNERBANKCODE
						, PB.PARTNERBANKNAME
						, M.PARTNERBANKID
						, M.EMANDATESOURCE
						, M.EMANDATEREFERENCENO
						, FM.FINTYPE
						, M.HOLDREASON
						, M.SWAPEFFECTIVEDATE
						, M.SECURITYMANDATE
						, M.EMPLOYEEID
						, M.EMPLOYERNAME
					FROM MANDATES M
					JOIN CUSTOMERS C ON M.CUSTID = C.CUSTID
					LEFT JOIN BANKBRANCHES BB ON M.BANKBRANCHID = BB.BANKBRANCHID
					LEFT JOIN BMTBANKDETAIL BD ON BB.BANKCODE = BD.BANKCODE
					LEFT JOIN RMTPROVINCEVSCITY PC ON BB.CITY = PC.PCCITY
					LEFT JOIN ENTITY E ON M.ENTITYCODE = E.ENTITYCODE
					LEFT JOIN PARTNERBANKS PB ON M.PARTNERBANKID = PB.PARTNERBANKID
					LEFT JOIN FINANCEMAIN FM ON M.ORGREFERENCE = FM.FINREFERENCE
					WHERE NOT (EXISTS ( SELECT 1
					FROM MANDATES_TEMP
					WHERE MANDATES_TEMP.MANDATEID = M.MANDATEID))
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#76.3.2_post" author="saikiran.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'mandates_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#76.4" author="saikiran.n">
		<sql>
			<![CDATA[
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='MANDATE_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='MandateDialog_ExternalMandate');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='MANDATES_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='MandateDialog_ExternalMandate');
				DELETE FROM SECRIGHTS WHERE RIGHTNAME='MandateDialog_ExternalMandate';
					
			    INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((select max(RightId)+1 from SecRights), 3, 'MandateDialog_ExternalMandate', 'MandateDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='MANDATE_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='MandateDialog_ExternalMandate'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='MANDATES_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='MandateDialog_ExternalMandate'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
						
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='MANDATE_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='MandateDialog_SwapEffectiveDate');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='MANDATES_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='MandateDialog_SwapEffectiveDate');
				DELETE FROM SECRIGHTS WHERE RIGHTNAME='MandateDialog_SwapEffectiveDate';
					
			    INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((select max(RightId)+1 from SecRights), 3, 'MandateDialog_SwapEffectiveDate', 'MandateDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='MANDATE_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='MandateDialog_SwapEffectiveDate'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='MANDATES_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='MandateDialog_SwapEffectiveDate'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
							
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='MANDATE_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='MandateDialog_HoldReason');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='MANDATES_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='MandateDialog_HoldReason');
				DELETE FROM SECRIGHTS WHERE RIGHTNAME='MandateDialog_HoldReason';
					
			    INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((select max(RightId)+1 from SecRights), 3,'MandateDialog_HoldReason', 'MandateDialog', 0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='MANDATE_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='MandateDialog_HoldReason'), 1, 0,1000,CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='MANDATES_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='MandateDialog_HoldReason'), 1, 0,1000,CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='MANDATE_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='MandateDialog_SecurityMandate');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='MANDATES_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='MandateDialog_SecurityMandate');
				DELETE FROM SECRIGHTS WHERE RIGHTNAME='MandateDialog_SecurityMandate';
					
			    INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((select max(RightId)+1 from SecRights), 3, 'MandateDialog_SecurityMandate', 'MandateDialog', 0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='MANDATE_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='MandateDialog_SecurityMandate'), 1, 0,1000,CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='MANDATES_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='MandateDialog_SecurityMandate'), 1, 0,1000,CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='MANDATE_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='MandateDialog_EmployeeID');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='MANDATES_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='MandateDialog_EmployeeID');
				DELETE FROM SECRIGHTS where RIGHTNAME='MandateDialog_EmployeeID';
					
			    INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((select max(RightId)+1 from SecRights), 3, 'MandateDialog_EmployeeID', 'MandateDialog', 0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='MANDATE_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='MandateDialog_EmployeeID'), 1, 0,1000,CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='MANDATES_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='MandateDialog_EmployeeID'), 1, 0,1000,CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='MANDATE_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='MandateDialog_EmployerName');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='MANDATES_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='MandateDialog_EmployerName');
				DELETE FROM SECRIGHTS WHERE RIGHTNAME='MandateDialog_EmployerName';
					
			    INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((select max(RightId)+1 from SecRights), 3, 'MandateDialog_EmployerName', 'MandateDialog', 0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='MANDATE_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='MandateDialog_EmployerName'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='MANDATES_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='MandateDialog_EmployerName'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="76.5" author="saikiran.n">
		<sql>
			<![CDATA[
				DELETE FROM SMTPARAMETERS WHERE SYSPARMCODE = 'MANDATE_ALW_PARTNER_BANK';
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="76.6" author="saikiran.n">
		<sql>
			<![CDATA[
				DELETE FROM SMTPARAMETERS WHERE SYSPARMCODE = 'ALLOW_MANDATE_ACCT_DET_READONLY';
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#81.1" author="nagavamsi.p">
		<addColumn tableName="EMPLOYERDETAIL_TEMP">
			<column name="AllowDAS" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#81.1.1" author="nagavamsi.p">
		<sql>
		<![CDATA[  
			UPDATE EmployerDetail_Temp SET AllowDAS = 0;
		]]>
		</sql>
	</changeSet>

	<changeSet id="ST#81.1.2" author="nagavamsi.p" dbms="oracle, postgresql">
		<addNotNullConstraint tableName="EMPLOYERDETAIL_TEMP" columnName="AllowDAS"
			columnDataType="boolean" />
	</changeSet>

	<changeSet id="ST#81.1.3" author="nagavamsi.p">
		<addDefaultValue columnName="AllowDAS" tableName="EMPLOYERDETAIL_TEMP" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#76.1.3" author="nagavamsi.p" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE EMPLOYERDETAIL_TEMP ADD CONSTRAINT DF_EMPLOYERDETAIL_TEMP_ALLOWDAS DEFAULT 0 FOR ALLOWDAS;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#81.2" author="nagavamsi.p">
		<addColumn tableName="EMPLOYERDETAIL">
			<column name="AllowDAS" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#81.2.1" author="nagavamsi.p">
		<sql>
		<![CDATA[  
			UPDATE EmployerDetail SET AllowDAS = 0 ;
		]]>
		</sql>
	</changeSet>

	<changeSet id="ST#81.2.2" author="nagavamsi.p" dbms="oracle, postgresql">
		<addNotNullConstraint tableName="EMPLOYERDETAIL" columnName="AllowDAS" columnDataType="boolean" />
	</changeSet>

	<changeSet id="ST#81.2.3" author="nagavamsi.p">
		<addDefaultValue columnName="AllowDAS" tableName="EMPLOYERDETAIL" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#81.2.3" author="nagavamsi.p" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE EMPLOYERDETAIL ADD CONSTRAINT DF_EMPLOYERDETAIL_ALLOWDAS DEFAULT 0 FOR ALLOWDAS;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#81.3_pre" author="nagavamsi.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'employerdetail_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#81.3" author="nagavamsi.p">
		<createView viewName="EMPLOYERDETAIL_VIEW" replaceIfExists="true">
			<![CDATA[
					Select ed.employerid
						, ed.EmpIndustry
						, ed.EmpName
						, ed.EstablishDate
						, ed.EmpAddrhNbr
						, ed.EmpFlatNbr
						, ed.EmpAddrStreet
						, ed.EmpAddrLine1
						, ed.EmpAddrLine2
						, ed.EmpPoBox
						, ed.EmpCountry
						, ed.EmpPhone
						, ed.EmpFax
						, ed.EmpTelexno
						, ed.EmpEmailId
						, ed.EmpProvince
						, ed.EmpCity
						, ed.EmpWebsite
						, ed.ContactPersonName
						, ed.ContactPersonNo
						, ed.EmpAlocationType
						, ed.BankRefNo
						, ed.EmpCategory
						, ed.EmpIsActive
						, ed.AllowDas
						, ed.Version
						, ed.LastMntBy
						, ed.LastMntOn
						, ed.RecordStatus
						, ed.RoleCode
						, ed.NextRoleCode
						, ed.TaskId
						, ed.NextTaskId
						, ed.RecordType
						, ed.WorkflowId
						, su.UsrLogin
						, su.UsrFName
						, su.UsrMName
						, su.UsrLName
						, ids.IndustryDesc LovDescIndustryDesc
						, c.CountryDesc LovDescCountryDesc
						, cp.CpProvinceName LovdesCprovinceName
						, pc.PcCityName LovDescCityName
					FROM EmployerDetail_Temp ed
					INNER JOIN SecUsers su ON su.UsrId = ed.LastMntBy
					LEFT JOIN BmtIndustries ids ON ids.IndustryCode = ed.EmpIndustry
					LEFT JOIN BmtCountries c ON c.countrycode = ed.EmpCountry
					LEFT JOIN RmtCountryVsProvince cp ON cp.CpProvince = ed.EmpProvince and cp.CpCountry = ed.EmpCountry
					LEFT JOIN RmtProvinceVsCity pc ON pc.PcCity = ed.EmpCity and pc.PcProvince = ed.EmpProvince and pc.PcCountry = ed.EmpCountry
					UNION ALL
					Select ed.employerid
						, ed.EmpIndustry
						, ed.EmpName
						, ed.EstablishDate
						, ed.EmpAddrhNbr
						, ed.EmpFlatNbr
						, ed.EmpAddrStreet
						, ed.EmpAddrLine1
						, ed.EmpAddrLine2
						, ed.EmpPoBox
						, ed.EmpCountry
						, ed.EmpPhone
						, ed.EmpFax
						, ed.EmpTelexno
						, ed.EmpEmailId
						, ed.EmpProvince
						, ed.EmpCity
						, ed.EmpWebsite
						, ed.ContactPersonName
						, ed.ContactPersonNo
						, ed.EmpAlocationType
						, ed.BankRefNo
						, ed.EmpCategory
						, ed.EmpIsActive
						, ed.AllowDas
						, ed.Version
						, ed.LastMntBy
						, ed.LastMntOn
						, ed.RecordStatus
						, ed.RoleCode
						, ed.NextRoleCode
						, ed.TaskId
						, ed.NextTaskId
						, ed.RecordType
						, ed.WorkflowId
						, su.UsrLogin
						, su.UsrFName
						, su.UsrMName
						, su.UsrLName
						, ids.IndustryDesc LovDescIndustryDesc
						, c.CountryDesc LovDescCountryDesc
						, cp.CpProvinceName LovdesCprovinceName
						, pc.PcCityName LovDescCityName
					FROM EmployerDetail ed
					INNER JOIN SecUsers su ON su.UsrId = ed.LastMntBy
					LEFT JOIN BmtIndustries ids ON ids.IndustryCode = ed.EmpIndustry
					LEFT JOIN BmtCountries c ON c.countrycode = ed.EmpCountry
					LEFT JOIN RmtCountryVsProvince cp ON cp.CpProvince = ed.EmpProvince and cp.CpCountry = ed.EmpCountry
					LEFT JOIN RmtProvinceVsCity pc ON pc.PcCity = ed.EmpCity and pc.PcProvince = ed.EmpProvince and pc.PcCountry = ed.EmpCountry
						  WHERE NOT (EXISTS ( SELECT 1
						           FROM EmployerDetail_Temp
						          WHERE EmployerDetail_Temp.EmployerId = ed.EmployerId))				
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#81.3_post" author="nagavamsi.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'employerdetail_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#81.4_pre" author="nagavamsi.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'employerdetail_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#81.4" author="nagavamsi.p">
		<createView viewName="EMPLOYERDETAIL_AVIEW" replaceIfExists="true">
			<![CDATA[
					Select ed.employerid
						, ed.EmpIndustry
						, ed.EmpName
						, ed.EstablishDate
						, ed.EmpAddrhNbr
						, ed.EmpFlatNbr
						, ed.EmpAddrStreet
						, ed.EmpAddrLine1
						, ed.EmpAddrLine2
						, ed.EmpPoBox
						, ed.EmpCountry
						, ed.EmpPhone
						, ed.EmpFax
						, ed.EmpTelexno
						, ed.EmpEmailId
						, ed.EmpProvince
						, ed.EmpCity
						, ed.EmpWebsite
						, ed.ContactPersonName
						, ed.ContactPersonNo
						, ed.EmpAlocationType
						, ed.BankRefNo
						, ed.EmpCategory
						, ed.EmpIsActive
						, ed.AllowDas
						, ed.Version
						, ed.LastMntBy
						, ed.LastMntOn
						, ed.RecordStatus
						, ed.RoleCode
						, ed.NextRoleCode
						, ed.TaskId
						, ed.NextTaskId
						, ed.RecordType
						, ed.WorkflowId
						, su.UsrLogin
						, su.UsrFName
						, su.UsrMName
						, su.UsrLName
						, ids.IndustryDesc LovDescIndustryDesc
						, c.CountryDesc LovDescCountryDesc
						, cp.CpProvinceName LovdesCprovinceName
						, pc.PcCityName LovDescCityName
					FROM EmployerDetail ed
					INNER JOIN SecUsers su ON su.UsrId = ed.LastMntBy
					LEFT JOIN BmtIndustries ids ON ids.IndustryCode = ed.EmpIndustry
					LEFT JOIN BmtCountries c ON c.countrycode = ed.EmpCountry
					LEFT JOIN RmtCountryVsProvince cp ON cp.CpProvince = ed.EmpProvince and cp.CpCountry = ed.EmpCountry
					LEFT JOIN RmtProvinceVsCity pc ON pc.PcCity = ed.EmpCity and pc.PcProvince = ed.EmpProvince and pc.PcCountry = ed.EmpCountry			
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#81.4_post" author="nagavamsi.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'employerdetail_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#81.5" author="nagavamsi.p">
		<sql>
			<![CDATA[
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'EmployerDetailDialog_AllowDas');
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'EmployerDetailDialog_AllowDas';
			
				INSERT INTO SECRIGHTS VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'EmployerDetailDialog_AllowDas', 'EmployerDetailDialog', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);

				INSERT INTO SECGROUPRIGHTS VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='EMPLOYERDETAIL_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='EmployerDetailDialog_AllowDas'), 1, 0, 10000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
        	 ]]>
		</sql>
	</changeSet>

	<changeSet id="ST#98.1" author="nagavamsi.p">
		<addColumn tableName="RMTBaseRates_Temp">
			<column name="CreatedBy" type="bigint" />
			<column name="CreatedOn" type="datetime" />
			<column name="ApprovedBy" type="bigint" />
			<column name="ApprovedOn" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#98.2" author="nagavamsi.p">
		<addColumn tableName="RMTBaseRates">
			<column name="CreatedBy" type="bigint" />
			<column name="CreatedOn" type="datetime" />
			<column name="ApprovedBy" type="bigint" />
			<column name="ApprovedOn" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#98.3_pre" author="nagavamsi.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmtbaserates_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#98.3" author="nagavamsi.p">
		<createView viewName="RMTBASERATES_VIEW" replaceIfExists="true">
			<![CDATA[
					Select br.BrType
				    , brc.BrTypeDesc LovDescBrTypeName
				    , br.Currency
				    , br.BrEffDate
				    , br.BrRate
				    , br.BrTypeIsActive
					, br.LastMdfDate
				    , br.DelExistingRates
					, br.LockingPeriod
					, br.CreatedBy
					, br.CreatedOn
					, br.ApprovedBy
					, br.ApprovedOn
					, br.Version
				    , br.LastMntBy
				    , br.LastMntOn
				    , br.RecordStatus
				    , br.RoleCode
				    , br.NextRoleCode
				    , br.TaskId
				    , br.NextTaskId
				    , br.RecordType
				    , br.WorkflowId
				    , suc.Usrlogin CreatedUser
				    , sua.Usrlogin ApprovedUser
				FROM RmtBaseRates_Temp br
				INNER JOIN RmtBaseRateCodes brc ON brc.BrType = br.BrType
				LEFT JOIN SecUsers suc ON suc.UsrId = br.CreatedBy
				LEFT JOIN SecUsers sua ON sua.UsrId = br.ApprovedBy
				UNION ALL
				Select br.BrType
				    , brc.BrTypeDesc LovDescBrTypeName
				    , br.Currency
				    , br.BrEffDate
				    , br.BrRate
				    , br.BrTypeIsActive
					, br.LastMdfDate
				    , br.DelExistingRates
					, br.LockingPeriod
					, br.CreatedBy
					, br.CreatedOn
					, br.ApprovedBy
					, br.ApprovedOn
					, br.Version
				    , br.LastMntBy
				    , br.LastMntOn
				    , br.RecordStatus
				    , br.RoleCode
				    , br.NextRoleCode
				    , br.TaskId
				    , br.NextTaskId
				    , br.RecordType
				    , br.WorkflowId
				    , suc.Usrlogin CreatedUser
				    , sua.Usrlogin ApprovedUser
				FROM RmtBaseRates br
				INNER JOIN RmtBaseRateCodes brc ON brc.BrType = br.BrType
				LEFT JOIN SecUsers suc ON suc.UsrId = br.CreatedBy
				LEFT JOIN SecUsers sua ON sua.UsrId = br.ApprovedBy
				  WHERE NOT (EXISTS ( SELECT 1
				           FROM RmtBaseRates_Temp
				          WHERE RmtBaseRates_Temp.BrType = br.BrType and RmtBaseRates_Temp.BrEffDate = br.BrEffDate and RmtBaseRates_Temp.Currency = br.Currency))			
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#98.3_post" author="nagavamsi.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rmtbaserates_view');
			]]>
		</sql>
	</changeSet>


	<changeSet id="ST#98.4_pre" author="nagavamsi.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmtbaserates_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#98.4" author="nagavamsi.p">
		<createView viewName="RMTBASERATES_AVIEW" replaceIfExists="true">
			<![CDATA[
					Select br.BrType
				    , brc.BrTypeDesc LovDescBrTypeName
				    , br.Currency
				    , br.BrEffDate
				    , br.BrRate
				    , br.BrTypeIsActive
					, br.LastMdfDate
				    , br.DelExistingRates
					, br.LockingPeriod
					, br.CreatedBy
					, br.CreatedOn
					, br.ApprovedBy
					, br.ApprovedOn
					, br.Version
				    , br.LastMntBy
				    , br.LastMntOn
				    , br.RecordStatus
				    , br.RoleCode
				    , br.NextRoleCode
				    , br.TaskId
				    , br.NextTaskId
				    , br.RecordType
				    , br.WorkflowId
				    , suc.Usrlogin CreatedUser
				    , sua.Usrlogin ApprovedUser
				FROM RmtBaseRates_Temp br
				INNER JOIN RmtBaseRateCodes brc ON brc.BrType = br.BrType	
				LEFT JOIN SecUsers suc ON suc.UsrId = br.CreatedBy
				LEFT JOIN SecUsers sua ON sua.UsrId = br.ApprovedBy
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#98.4_post" author="nagavamsi.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rmtbaserates_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#79.1" author="nagavamsi.p">
		<addColumn tableName="BounceReasons_Temp">
			<column name="InstrumentType" type="varchar(8)" />
			<column name="HoldMarkBounceCount" type="int" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#79.1.1" author="nagavamsi.p">
		<sql>
			<![CDATA[  
				UPDATE BounceReasons_Temp Set HoldMarkBounceCount = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#79.1.2" author="nagavamsi.p" dbms="oracle, postgresql">
		<addNotNullConstraint tableName="BounceReasons_Temp" columnName="HoldMarkBounceCount"
			columnDataType="int" />
	</changeSet>

	<changeSet id="ST#79.1.3" author="nagavamsi.p">
		<addDefaultValue columnName="HoldMarkBounceCount" tableName="BounceReasons_Temp" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#79.1.3" author="nagavamsi.p" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE BOUNCEREASONS_TEMP ADD CONSTRAINT DF_BOUNCEREASONS_TEMP_HOLDMARKBOUNCECOUNT DEFAULT 0 FOR HOLDMARKBOUNCECOUNT;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#79.2" author="nagavamsi.p">
		<addColumn tableName="BounceReasons">
			<column name="InstrumentType" type="varchar(8)" />
			<column name="HoldMarkBounceCount" type="int" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#79.2.1" author="nagavamsi.p">
		<sql>
		<![CDATA[  
			UPDATE BounceReasons SET HoldMarkBounceCount = 0 ;
		]]>
		</sql>
	</changeSet>

	<changeSet id="ST#79.2.2" author="nagavamsi.p" dbms="oracle, postgresql">
		<addNotNullConstraint tableName="BounceReasons" columnName="HoldMarkBounceCount"
			columnDataType="int" />
	</changeSet>

	<changeSet id="ST#79.2.3" author="nagavamsi.p">
		<addDefaultValue columnName="HoldMarkBounceCount" tableName="BounceReasons" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#79.2.3" author="nagavamsi.p" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE BOUNCEREASONS ADD CONSTRAINT DF_BOUNCEREASONS_HOLDMARKBOUNCECOUNT DEFAULT 0 FOR HOLDMARKBOUNCECOUNT;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#79.3_pre" author="nagavamsi.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'bouncereasons_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#79.3" author="nagavamsi.p">
		<createView viewName="BOUNCEREASONS_VIEW" replaceIfExists="true">
			<![CDATA[
				Select br.BounceId
					, br.BounceCode
					, br.ReasonType
					, CASE WHEN br.ReasonType = 1 THEN 'CANCELLED CHEQUES'
						WHEN br.ReasonType = 2 THEN 'BOUNCED CHEQUES'
						WHEN br.ReasonType = 3 THEN 'HOLD CHEQUES'
						ELSE NULL END LovDescReasonType
					, br.Category
					, CASE WHEN br.Category = 1 THEN 'TECHNICAL'
						WHEN br.Category = 2 THEN 'NON TECHNICAL'
						ELSE NULL END LovDescCategory
					, br.Reason
					, br.Action
					, br.RuleId
					, br.ReturnCode
					, br.InstrumentType
					, br.HoldMarkBounceCount
					, r.RuleCode
					, r.RuleCodeDesc
					, br.Active
					, br.Version
					, br.LastMntBy
					, br.LastMntOn
					, br.RecordStatus
					, br.RoleCode
					, br.NextRoleCode
					, br.TaskId
					, br.NextTaskId
					, br.RecordType
					, br.WorkflowId
				FROM BOUNCEREASONS_TEMP br
				INNER JOIN RULES r ON r.RuleID = br.RuleID
				UNION ALL
				Select br.BounceId
					, br.BounceCode
					, br.ReasonType
					, CASE WHEN br.ReasonType = 1 THEN 'CANCELLED CHEQUES'
						WHEN br.ReasonType = 2 THEN 'BOUNCED CHEQUES'
						WHEN br.ReasonType = 3 THEN 'HOLD CHEQUES'
						ELSE NULL END LovDescReasonType
					, br.Category
					, CASE WHEN br.Category = 1 THEN 'TECHNICAL'
						WHEN br.Category = 2 THEN 'NON TECHNICAL'
						ELSE NULL END LovDescCategory
					, br.Reason
					, br.Action
					, br.RuleId
					, br.ReturnCode
					, br.InstrumentType
					, br.HoldMarkBounceCount
					, r.RuleCode
					, r.RuleCodeDesc
					, br.Active
					, br.Version
					, br.LastMntBy
					, br.LastMntOn
					, br.RecordStatus
					, br.RoleCode
					, br.NextRoleCode
					, br.TaskId
					, br.NextTaskId
					, br.RecordType
					, br.WorkflowId
				FROM BOUNCEREASONS br
				INNER JOIN RULES r ON r.RuleID = br.RuleID
				WHERE NOT EXISTS (SELECT 1 FROM BOUNCEREASONS_TEMP WHERE BounceId = br.BounceId)
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#79.3_post" author="nagavamsi.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'bouncereasons_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#79.4_pre" author="nagavamsi.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'bouncereasons_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#79.4" author="nagavamsi.p">
		<createView viewName="BOUNCEREASONS_AVIEW" replaceIfExists="true">
			<![CDATA[
				Select br.BounceId
					, br.BounceCode
					, br.ReasonType
					, CASE WHEN br.ReasonType = 1 THEN 'CANCELLED CHEQUES'
						WHEN br.ReasonType = 2 THEN 'BOUNCED CHEQUES'
						WHEN br.ReasonType = 3 THEN 'HOLD CHEQUES'
						ELSE NULL END LovDescReasonType
					, br.Category
					, CASE WHEN br.Category = 1 THEN 'TECHNICAL'
						WHEN br.Category = 2 THEN 'NON TECHNICAL'
						ELSE NULL END LovDescCategory
					, br.Reason
					, br.Action
					, br.RuleId
					, br.ReturnCode
					, br.InstrumentType
					, br.HoldMarkBounceCount
					, r.RuleCode
					, r.RuleCodeDesc
					, br.Active
					, br.Version
					, br.LastMntBy
					, br.LastMntOn
					, br.RecordStatus
					, br.RoleCode
					, br.NextRoleCode
					, br.TaskId
					, br.NextTaskId
					, br.RecordType
					, br.WorkflowId
				FROM BOUNCEREASONS br
				INNER JOIN RULES r ON r.RuleID = br.RuleID
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#79.4_post" author="nagavamsi.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'bouncereasons_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#79.5" author="nagavamsi.p">
		<sql>
			<![CDATA[
			DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'BounceReasonDialog_InstrumentType');
			DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'BounceReasonDialog_HoldMarkBounceCount');
			
			DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'BounceReasonDialog_InstrumentType';
			DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'BounceReasonDialog_HoldMarkBounceCount';
			
			INSERT INTO SECRIGHTS VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3, 'BounceReasonDialog_InstrumentType', 'BounceReasonDialog', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			INSERT INTO SECRIGHTS VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3, 'BounceReasonDialog_HoldMarkBounceCount', 'BounceReasonDialog', 0, 1000, CURRENT_TIMESTAMP,'Approved', NULL, NULL, NULL, NULL, NULL, 0);

			INSERT INTO SECGROUPRIGHTS VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='BOUNCEREASON_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='BounceReasonDialog_InstrumentType'), 1, 0, 10000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			INSERT INTO SECGROUPRIGHTS VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='BOUNCEREASON_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='BounceReasonDialog_HoldMarkBounceCount'), 1, 0, 10000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			
        	 ]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#94.1" author="saikiran.n">
		<sql>
			<![CDATA[
				DELETE FROM SMTPARAMETERS WHERE SYSPARMCODE='MANDATE_EMANDATE_REQUIRED';
			]]>
		</sql>
	</changeSet>
	
	
	<changeSet id="ST#94.2.1" author="saikiran.n">
		<addColumn tableName="BMTBankDetail_Temp">
			<column name="Nach" type="boolean" />
			<column name="Dd" type="boolean" />
			<column name="Dda" type="boolean" />
			<column name="Ecs" type="boolean" />
			<column name="Cheque" type="boolean" />
			<column name="Emandate" type="boolean" />
			<column name="AllowedSources" type="varchar(50)" />
			<column name="UpdateBranches" type="boolean" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#94.2.2" author="saikiran.n" dbms="postgresql, oracle">
		<addDefaultValue columnName="Nach" tableName="BMTBankDetail_Temp" defaultValue="0" />
		<addDefaultValue columnName="Dd" tableName="BMTBankDetail_Temp" defaultValue="0" />
		<addDefaultValue columnName="Dda" tableName="BMTBankDetail_Temp" defaultValue="0" />
		<addDefaultValue columnName="Ecs" tableName="BMTBankDetail_Temp" defaultValue="0" />
		<addDefaultValue columnName="Cheque" tableName="BMTBankDetail_Temp" defaultValue="0" />
		<addDefaultValue columnName="Emandate" tableName="BMTBankDetail_Temp" defaultValue="0" />
		<addDefaultValue columnName="UpdateBranches" tableName="BMTBankDetail_Temp" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#94.2.2" author="saikiran.n" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE BMTBankDetail_Temp ADD CONSTRAINT DF_BMTBANKDEATAIL_TEMP_NACH DEFAULT 0 FOR NACH;
				ALTER TABLE BMTBankDetail_Temp ADD CONSTRAINT DF_BMTBANKDEATAIL_TEMP_DD DEFAULT 0 FOR DD;
				ALTER TABLE BMTBankDetail_Temp ADD CONSTRAINT DF_BMTBANKDEATAIL_TEMP_DDA DEFAULT 0 FOR DDA;
				ALTER TABLE BMTBankDetail_Temp ADD CONSTRAINT DF_BMTBANKDEATAIL_TEMP_ECS DEFAULT 0 FOR ECS;
				ALTER TABLE BMTBankDetail_Temp ADD CONSTRAINT DF_BMTBANKDEATAIL_TEMP_CHEQUE DEFAULT 0 FOR CHEQUE;
				ALTER TABLE BMTBankDetail_Temp ADD CONSTRAINT DF_BMTBANKDEATAIL_TEMP_EMANDATE DEFAULT 0 FOR EMANDATE;
				ALTER TABLE BMTBankDetail_Temp ADD CONSTRAINT DF_BMTBANKDEATAIL_TEMP_UPDATEBRANCHES DEFAULT 0 FOR UPDATEBRANCHES;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#94.3.1" author="saikiran.n">
		<addColumn tableName="BMTBankDetail">
			<column name="Nach" type="boolean" />
			<column name="Dd" type="boolean" />
			<column name="Dda" type="boolean" />
			<column name="Ecs" type="boolean" />
			<column name="Cheque" type="boolean" />
			<column name="Emandate" type="boolean" />
			<column name="AllowedSources" type="varchar(50)" />
			<column name="UpdateBranches" type="boolean" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#94.3.2" author="saikiran.n" dbms="postgresql, oracle">
		<addDefaultValue columnName="Nach" tableName="BMTBankDetail" defaultValue="0" />
		<addDefaultValue columnName="Dd" tableName="BMTBankDetail" defaultValue="0"/>
		<addDefaultValue columnName="Dda" tableName="BMTBankDetail" defaultValue="0"/>
		<addDefaultValue columnName="Ecs" tableName="BMTBankDetail" defaultValue="0"/>
		<addDefaultValue columnName="Cheque" tableName="BMTBankDetail" defaultValue="0"/>
		<addDefaultValue columnName="Emandate" tableName="BMTBankDetail" defaultValue="0"/>
		<addDefaultValue columnName="UpdateBranches" tableName="BMTBankDetail" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#94.3.2" author="saikiran.n" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE BMTBankDetail ADD CONSTRAINT DF_BMTBANKDEATAIL_NACH DEFAULT 0 FOR NACH;
				ALTER TABLE BMTBankDetail ADD CONSTRAINT DF_BMTBANKDEATAIL_DD DEFAULT 0 FOR DD;
				ALTER TABLE BMTBankDetail ADD CONSTRAINT DF_BMTBANKDEATAIL_DDA DEFAULT 0 FOR DDA;
				ALTER TABLE BMTBankDetail ADD CONSTRAINT DF_BMTBANKDEATAIL_ECS DEFAULT 0 FOR ECS;
				ALTER TABLE BMTBankDetail ADD CONSTRAINT DF_BMTBANKDEATAIL_CHEQUE DEFAULT 0 FOR CHEQUE;
				ALTER TABLE BMTBankDetail ADD CONSTRAINT DF_BMTBANKDEATAIL_EMANDATE DEFAULT 0 FOR EMANDATE;
				ALTER TABLE BMTBankDetail ADD CONSTRAINT DF_BMTBANKDEATAIL_UPDATEBRANCHES DEFAULT 0 FOR UPDATEBRANCHES;
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#94.4.1" author="saikiran.n">
		<createView viewName="Bank_Instrument_mapping" replaceIfExists="true">
			<![CDATA[
				Select BankCode
				, max(dd) dd
				, max(dda) dda
				, max(nach) nach
				, max(ecs) ecs
				, max(cheque) cheque
				, max(emandate) emandate
			from (
				Select BankCode, dd, dda, nach, ecs, cheque, emandate From BankBranches Where (dd = 1 or dda = 1 or nach = 1 or ecs = 1 or cheque = 1 or emandate = 1)
				Union 
				Select BankCode, dd, dda, nach, ecs, cheque, emandate From BankBranches_Temp Where (dd = 1 or dda = 1 or nach = 1 or ecs = 1 or cheque = 1 or emandate = 1)
			) T group by BankCode
																																		   
			]]>
		</createView>
	</changeSet>
	
	<changeSet id="ST#94.4.2" author="saikiran.n">
		<sql>
			<![CDATA[
				Update BMTBankDetail Set DD = (Select bb.DD From Bank_Instrument_mapping bb Where BMTBankDetail.BankCode = bb.BankCode and bb.DD = 1);
				Update BMTBankDetail Set DDA = (Select bb.DDA From Bank_Instrument_mapping bb Where BMTBankDetail.BankCode = bb.BankCode and bb.DDA = 1);
				Update BMTBankDetail Set NACH = (Select bb.NACH From Bank_Instrument_mapping bb Where BMTBankDetail.BankCode = bb.BankCode and bb.NACH = 1);
				Update BMTBankDetail Set ECS = (Select bb.ECS From Bank_Instrument_mapping bb Where BMTBankDetail.BankCode = bb.BankCode and bb.ECS = 1);
				Update BMTBankDetail Set CHEQUE = (Select bb.CHEQUE From Bank_Instrument_mapping bb Where BMTBankDetail.BankCode = bb.BankCode and bb.CHEQUE = 1);
				Update BMTBankDetail Set EMANDATE = (Select bb.DD From Bank_Instrument_mapping bb Where BMTBankDetail.BankCode = bb.BankCode and bb.EMANDATE = 1);

			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#94.4.3" author="saikiran.n">
		<sql>
			<![CDATA[
				Update BMTBankDetail_Temp Set DD = (Select bb.DD From Bank_Instrument_mapping bb Where BMTBankDetail_Temp.BankCode = bb.BankCode and bb.DD = 1);
				Update BMTBankDetail_Temp Set DDA = (Select bb.DDA From Bank_Instrument_mapping bb Where BMTBankDetail_Temp.BankCode = bb.BankCode and bb.DDA = 1);
				Update BMTBankDetail_Temp Set NACH = (Select bb.NACH From Bank_Instrument_mapping bb Where BMTBankDetail_Temp.BankCode = bb.BankCode and bb.NACH = 1);
				Update BMTBankDetail_Temp Set ECS = (Select bb.ECS From Bank_Instrument_mapping bb Where BMTBankDetail_Temp.BankCode = bb.BankCode and bb.ECS = 1);
				Update BMTBankDetail_Temp Set CHEQUE = (Select bb.CHEQUE From Bank_Instrument_mapping bb Where BMTBankDetail_Temp.BankCode = bb.BankCode and bb.CHEQUE = 1);
				Update BMTBankDetail_Temp Set EMANDATE = (Select bb.EMANDATE From Bank_Instrument_mapping bb Where BMTBankDetail_Temp.BankCode = bb.BankCode and bb.EMANDATE = 1);

			]]>
		</sql>
	</changeSet>
	<changeSet id="ST#94.4.4" author="saikiran.n">
		<dropView viewName="Bank_Instrument_mapping"/>
	</changeSet>
	
	<changeSet id="ST#94.4.5" author="saikiran.n">
		<sql>
			<![CDATA[
				UPDATE BMTBankDetail_Temp SET Nach = 0 where Nach is null;
				UPDATE BMTBankDetail_Temp SET Dd = 0 where Dd is null;
				UPDATE BMTBankDetail_Temp SET Dda = 0 where dda is null;
				UPDATE BMTBankDetail_Temp SET Ecs = 0 where Ecs is null;
				UPDATE BMTBankDetail_Temp SET Cheque = 0 where Cheque is null;
				UPDATE BMTBankDetail_Temp SET Emandate = 0 where Emandate is null;
				UPDATE BMTBankDetail_Temp SET UpdateBranches = 0 where UpdateBranches is null;
				
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#94.4.6" author="saikiran.n">
		<sql>
			<![CDATA[
				UPDATE BMTBankDetail SET Nach = 0 where Nach is null;
				UPDATE BMTBankDetail SET Dd = 0 where Dd is null;
				UPDATE BMTBankDetail SET Dda = 0 where Dda is null;
				UPDATE BMTBankDetail SET Ecs = 0 where Ecs is null;
				UPDATE BMTBankDetail SET Cheque = 0 where Cheque is null;
				UPDATE BMTBankDetail SET Emandate = 0 where Emandate is null;
				UPDATE BMTBankDetail SET UpdateBranches = 0 where UpdateBranches is null;
			]]>
		</sql>
	</changeSet>
		
	<changeSet id="ST#94.5" author="saikiran.n">
		<sql>
			<![CDATA[
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='BANKDETAIL_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='BankDetailDialog_ECS');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='BANKDETAIL_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='BankDetailDialog_DDA');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='BANKDETAIL_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='BankDetailDialog_DD');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='BANKDETAIL_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='BankDetailDialog_NACH');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='BANKDETAIL_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='BankDetailDialog_Cheque');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='BANKDETAIL_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='BankDetailDialog_Emandate');
				DELETE FROM SECGROUPRIGHTS Where GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='BANKDETAIL_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='BankDetailDialog_AllowedSources');
				DELETE FROM SECGROUPRIGHTS Where GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='BANKDETAIL_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_BankDetailDialog_btnMultiSource');
				DELETE FROM SECGROUPRIGHTS Where GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='BANKDETAIL_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='BankDetailDialog_UpdateBranches');

				DELETE FROM SECRIGHTS WHERE RIGHTNAME='BankDetailDialog_ECS';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME='BankDetailDialog_DDA';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME='BankDetailDialog_DD';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME='BankDetailDialog_NACH';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME='BankDetailDialog_Cheque';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME='BankDetailDialog_Emandate';
				DELETE FROM SecRights where RightName='BankDetailDialog_AllowedSources';
				DELETE FROM SecRights where RightName='button_BankDetailDialog_btnMultiSource';
				DELETE FROM SecRights where RightName='BankDetailDialog_UpdateBranches';
				
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((select max(RightId)+1 from SecRights), 3, 'BankDetailDialog_ECS', 'BankDetailDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((select max(RightId)+1 from SecRights), 3, 'BankDetailDialog_DDA', 'BankDetailDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((select max(RightId)+1 from SecRights), 3, 'BankDetailDialog_DD', 'BankDetailDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((select max(RightId)+1 from SecRights), 3, 'BankDetailDialog_NACH', 'BankDetailDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((select max(RightId)+1 from SecRights), 3, 'BankDetailDialog_Cheque', 'BankDetailDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((select max(RightId)+1 from SecRights), 3, 'BankDetailDialog_Emandate', 'BankDetailDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((select max(RightId)+1 from SecRights), 3, 'BankDetailDialog_AllowedSources', 'BankDetailDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((select max(RightId)+1 from SecRights), 2, 'button_BankDetailDialog_btnMultiSource', 'BankDetailDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((select max(RightId)+1 from SecRights), 3, 'BankDetailDialog_UpdateBranches', 'BankDetailDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);

				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='BANKDETAIL_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='BankDetailDialog_ECS'), 1, 0,1000,CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='BANKDETAIL_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='BankDetailDialog_DDA'), 1, 0,1000,CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='BANKDETAIL_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='BankDetailDialog_DD'), 1, 0,1000,CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='BANKDETAIL_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='BankDetailDialog_NACH'), 1, 0,1000,CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='BANKDETAIL_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='BankDetailDialog_Cheque'), 1, 0,1000,CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='BANKDETAIL_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='BankDetailDialog_Emandate'), 1, 0,1000,CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='BANKDETAIL_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='BankDetailDialog_AllowedSources'), 1, 0,1000,CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='BANKDETAIL_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_BankDetailDialog_btnMultiSource'), 1, 0,1000,CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='BANKDETAIL_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='BankDetailDialog_UpdateBranches'), 1, 0,1000,CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#94.6_pre" author="saikiran.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'bmtbankdetail_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#94.6" author="saikiran.n">
		<createView viewName="BMTBANKDETAIL_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT BankCode
					, BankName
					, BankShortCode
					, AccnoLength
					, AllowMultipleIfsc
					, MinAccnoLength
					, Nach
					, Dda
					, Dd
					, Ecs
					, Cheque
					, Emandate
					, AllowedSources
					, UpdateBranches
					, Active
					, Version
					, LastMntBy
					, LastMntOn
					, RecordStatus
					, RoleCode
					, NextRoleCode
					, TaskId
					, NextTaskId
					, RecordType
					, WorkFlowId
				From BmtBankDetail
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#94.6_post" author="saikiran.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'bmtbankdetail_aview');
			]]>
		</sql>
	</changeSet>


	<changeSet id="ST#94.6.1_pre" author="saikiran.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'bmtbankdetail_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#94.6.1" author="saikiran.n">
		<createView viewName="BMTBANKDETAIL_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT BankCode
					, BankName
					, BankShortCode
					, AccnoLength
					, AllowMultipleIfsc
					, MinAccnoLength
					, Nach
					, Dda
					, Dd
					, Ecs
					, Cheque
					, Emandate
					, AllowedSources
					, UpdateBranches
					, Active
					, Version
					, LastMntBy
					, LastMntOn
					, RecordStatus
					, RoleCode
					, NextRoleCode
					, TaskId
					, NextTaskId
					, RecordType
					, WorkFlowId
				From BmtBankDetail_Temp
				Union All 
				SELECT BankCode
					, BankName
					, BankShortCode
					, AccnoLength
					, AllowMultipleIfsc
					, MinAccnoLength
					, Nach
					, Dda
					, Dd
					, Ecs
					, Cheque
					, Emandate
					, AllowedSources
					, UpdateBranches
					, Active
					, Version
					, LastMntBy
					, LastMntOn
					, RecordStatus
					, RoleCode
					, NextRoleCode
					, TaskId
					, NextTaskId
					, RecordType
					, WorkFlowId
				From BmtBankDetail Where Not Exists (Select 1 From BmtBankDetail_Temp Where BankCode = BmtBankDetail.BankCode) 
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#94.6.1_post" author="saikiran.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'bmtbankdetail_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#76.5" author="saikiran.n">
		<sql>
            <![CDATA[
            	DELETE FROM STAGETABDETAIL WHERE TABCODE = 'SECMAN';
				INSERT INTO STAGETABDETAIL (TABID, TABCODE, TABDESCRIPTION, ACTIVE) VALUES (22, 'SECMAN', 'Security Mandates', 1);
            ]]>
		</sql>
	</changeSet>
	
	<changeSet id="1.0" author="saikrishna.b">
		<createTable tableName="Presentment_Stage">
			<column name="ID" type="bigint" autoIncrement="true" />
			<column name="FinID" type="bigint" />
			<column name="FinReference" type="varchar(20)" />
			<column name="FinType" type="varchar(8)" />
			<column name="ProductCategory" type="varchar(8)" />
			<column name="FinBranch" type="varchar(12)" />
			<column name="EntityCode" type="varchar(8)" />
			<column name="BpiTreatment" type="char(1)" />
			<column name="GrcPeriodEndDate" type="datetime" />
			<column name="GrcAdvType" type="varchar(10)" />
			<column name="AdvType" type="varchar(10)" />
			<column name="AdvStage" type="varchar(10)" />
			<column name="SchDate" type="datetime" />
			<column name="DefSchdDate" type="datetime" />
			<column name="SchSeq" type="bigint" />
			<column name="InstNumber" type="int" />
			<column name="BpiOrHoliday" type="char(1)" />
			<column name="ProfitSchd" type="decimal(18,0)" />
			<column name="PrincipalSchd" type="decimal(18,0)" />
			<column name="FeeSchd" type="decimal(18,0)" />
			<column name="TDSAmount" type="decimal(18,0)" />
			<column name="SchdPftPaid" type="decimal(18,0)" />
			<column name="SchdPriPaid" type="decimal(18,0)" />
			<column name="SchdFeePaid" type="decimal(18,0)" />
			<column name="TDSPaid" type="decimal(18,0)" />
			<column name="InstrumentType" type="varchar(20)" />
			<column name="MandateId" type="bigint" />
			<column name="MandateType" type="varchar(20)" />
			<column name="EmandateSource" type="varchar(50)" />
			<column name="MandateStatus" type="varchar(20)" />
			<column name="MandateExpiryDate" type="datetime" />
			<column name="ChequeID" type="int" />
			<column name="ChequeType" type="varchar(8)" />
			<column name="ChequeStatus" type="varchar(10)" />
			<column name="ChequeDate" type="datetime" />
			<column name="PartnerBankId" type="bigint" />
			<column name="BranchCode" type="varchar(12)" />
			<column name="BankCode" type="varchar(8)" />
			<column name="DueDate" type="datetime" />
			<column name="EmployerId" type="bigint" />
			<column name="EmployerName" type="varchar(50)" />
			<column name="HeaderId" type="bigint" />
			<column name="ProcessingFlag" type="smallint" />
		</createTable>
	</changeSet>

	<changeSet id="1.1" author="saikrishna.b">
		<addPrimaryKey tableName="Presentment_Stage" columnNames="ID" constraintName="pk_presentment_stage_ID" />
	</changeSet>
	
	<changeSet id="1.2" author="saikrishna.b" dbms="postgresql, oracle">
		<addDefaultValue columnName="ProcessingFlag" tableName="Presentment_Stage" defaultValue="0" />
	</changeSet>
	
	<changeSet id="1.2" author="saikrishna.b" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE PRESENTMENT_STAGE ADD CONSTRAINT DF_PS_PROCESSINGFLAG DEFAULT 0 FOR PROCESSINGFLAG;
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="" author="saikrishna.b">
		<createTable tableName="Presentment_Consecutive_Bounce">
			<column name="ID" type="bigint" autoIncrement = "true" >
				<constraints nullable="false" />
			</column>
			<column name="MandateId" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="BounceId" type="bigint" >
				<constraints nullable="false" />
			</column>
			<column name="LastBounceDate" type="datetime" >
				<constraints nullable="false" />
			</column>
			<column name="BounceCount" type="bigint" >
				<constraints nullable="false" />
			</column>
			<column name="CreatedOn" type="datetime" >
				<constraints nullable="false" />
			</column>
			<column name="LastMnton" type="datetime" >
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>
	
	<changeSet id="" author="saikrishna.b">
		<addPrimaryKey tableName="Presentment_consecutive_Bounce" columnNames="ID" constraintName="pk_pcb_id" />
	</changeSet>
	
	<changeSet id="" author="saikrishna.b">
		<addForeignKeyConstraint constraintName="fk_pcb_BounceId" referencedTableName="BounceReasons" referencedColumnNames="BounceId" baseTableName="Presentment_consecutive_Bounce" baseColumnNames="BounceId" />
	</changeSet>
	
	<changeSet id="" author="saikrishna.b">
		<createIndex tableName="Presentment_consecutive_Bounce" indexName="idx_pcb_mid_bid" unique = "true">
			<column name="MandateId" type="bigint"/>
			<column name="BounceId" type="bigint"/>
		</createIndex>
	</changeSet>
	
	<changeSet id="ST#112.1" author="sandeepkumar.m">
		<createTable tableName="Presentment_Exclude_Codes">
			<column name="ID" type="bigint" />
			<column name="Code" type="varchar(20)">
				<constraints nullable="false" />
			</column>
			<column name="Description" type="varchar(100)">
				<constraints nullable="false" />
			</column>
			<column name="ExcludeId" type="int" />
			<column name="BounceID" type="bigint" />
			<column name="CreateBounceOnDueDate" type="boolean">
				<constraints nullable="false" />
			</column>
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="CreatedBy" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="CreatedOn" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="ApprovedBy" type="bigint" />
			<column name="ApprovedOn" type="datetime" />
			<column name="LastMntBy" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="LastMnton" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="Active" type="boolean">
				<constraints nullable="false" />
			</column>
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkFloWId" type="bigint" />
		</createTable>
	</changeSet>
	
	<changeSet id="ST#112.8" author="sandeepkumar.m">
		<addPrimaryKey tableName="Presentment_Exclude_Codes" columnNames="ID"
			constraintName="pk_Pec" />
	</changeSet>
	
	<changeSet id="ST#112.9" author="sandeepkumar.m">
		<addUniqueConstraint tableName="Presentment_Exclude_Codes" columnNames="Code"
			constraintName="uk_pec_code" />
	</changeSet>
	
	<changeSet id="ST#112.2" author="sandeepkumar.m" dbms="postgresql, oracle">
		<addDefaultValue columnName="Version" tableName="Presentment_Exclude_Codes" defaultValue="0" />
		<addDefaultValue columnName="Active" tableName="Presentment_Exclude_Codes" defaultValue="0" />
		<addDefaultValue columnName="CreateBounceOnDueDate" tableName="Presentment_Exclude_Codes"
			defaultValue="0" />
	</changeSet>

	<changeSet id="ST#112.3" author="sandeepkumar.m" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE PRESENTMENT_EXCLUDE_CODES ADD CONSTRAINT DF_PEC_VERSION DEFAULT 0 FOR VERSION;
				ALTER TABLE PRESENTMENT_EXCLUDE_CODES ADD CONSTRAINT DF_PEC_ACTIVE DEFAULT 0 FOR ACTIVE;
				ALTER TABLE PRESENTMENT_EXCLUDE_CODES ADD CONSTRAINT DF_PEC_CREATEBOUNCEONDUEDATE DEFAULT 0 FOR CREATEBOUNCEONDUEDATE;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#112.10" author="sandeepkumar.m">
		<addForeignKeyConstraint constraintName="fk_pec_bounceid" referencedTableName="BounceReasons"
			referencedColumnNames="BounceId" baseTableName="Presentment_Exclude_Codes" baseColumnNames="BounceId" />
	</changeSet>
	
	<changeSet id="ST#112.10.1" author="saikrishna.b">
		<sql>
			<![CDATA[
				INSERT INTO PRESENTMENT_EXCLUDE_CODES (ID, CODE, DESCRIPTION, EXCLUDEID, BOUNCEID, CREATEBOUNCEONDUEDATE, VERSION, CREATEDBY, CREATEDON, APPROVEDBY, APPROVEDON, LASTMNTBY,LASTMNTON, ACTIVE, RECORDSTATUS,ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOwID) VALUES(1, 'EMI_IN_ADVANCE', 			'Due adjusted from the EMI in Advance', 	1, NULL, NULL, 1, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO PRESENTMENT_EXCLUDE_CODES (ID, CODE, DESCRIPTION, EXCLUDEID, BOUNCEID, CREATEBOUNCEONDUEDATE, VERSION, CREATEDBY, CREATEDON, APPROVEDBY, APPROVEDON, LASTMNTBY,LASTMNTON, ACTIVE, RECORDSTATUS,ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOwID) VALUES(2, 'EMI_HOLD', 				'EMI is marked as hold', 					2, NULL, NULL, 1, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO PRESENTMENT_EXCLUDE_CODES (ID, CODE, DESCRIPTION, EXCLUDEID, BOUNCEID, CREATEBOUNCEONDUEDATE, VERSION, CREATEDBY, CREATEDON, APPROVEDBY, APPROVEDON, LASTMNTBY,LASTMNTON, ACTIVE, RECORDSTATUS,ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOwID) VALUES(3, 'MANDATE_HOLD', 			'Mandate is marked as hold', 				3, NULL, NULL, 1, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO PRESENTMENT_EXCLUDE_CODES (ID, CODE, DESCRIPTION, EXCLUDEID, BOUNCEID, CREATEBOUNCEONDUEDATE, VERSION, CREATEDBY, CREATEDON, APPROVEDBY, APPROVEDON, LASTMNTBY,LASTMNTON, ACTIVE, RECORDSTATUS,ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOwID) VALUES(4, 'MANDATE_NOT_APPROVED', 	'Mandate is not registered', 				4, NULL, NULL, 1, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO PRESENTMENT_EXCLUDE_CODES (ID, CODE, DESCRIPTION, EXCLUDEID, BOUNCEID, CREATEBOUNCEONDUEDATE, VERSION, CREATEDBY, CREATEDON, APPROVEDBY, APPROVEDON, LASTMNTBY,LASTMNTON, ACTIVE, RECORDSTATUS,ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOwID) VALUES(5, 'MANDATE_EXPIRED', 		'Mandate Expired', 							5, NULL, NULL, 1, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO PRESENTMENT_EXCLUDE_CODES (ID, CODE, DESCRIPTION, EXCLUDEID, BOUNCEID, CREATEBOUNCEONDUEDATE, VERSION, CREATEDBY, CREATEDON, APPROVEDBY, APPROVEDON, LASTMNTBY,LASTMNTON, ACTIVE, RECORDSTATUS,ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOwID) VALUES(6, 'MANUAL_EXCLUDE', 			'Excluded Manually', 						6, NULL, NULL, 1, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO PRESENTMENT_EXCLUDE_CODES (ID, CODE, DESCRIPTION, EXCLUDEID, BOUNCEID, CREATEBOUNCEONDUEDATE, VERSION, CREATEDBY, CREATEDON, APPROVEDBY, APPROVEDON, LASTMNTBY,LASTMNTON, ACTIVE, RECORDSTATUS,ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOwID) VALUES(7, 'MANDATE_REJECTED',		'Mandate rejected',							7, NULL, NULL, 1, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO PRESENTMENT_EXCLUDE_CODES (ID, CODE, DESCRIPTION, EXCLUDEID, BOUNCEID, CREATEBOUNCEONDUEDATE, VERSION, CREATEDBY, CREATEDON, APPROVEDBY, APPROVEDON, LASTMNTBY,LASTMNTON, ACTIVE, RECORDSTATUS,ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOwID) VALUES(8, 'INT_ADV', 				'Due adjusted from interest in advance', 	8, NULL, NULL, 1, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1, 'Approved', NULL, NULL, NULL, NULL, NULL, 0); 
				INSERT INTO PRESENTMENT_EXCLUDE_CODES (ID, CODE, DESCRIPTION, EXCLUDEID, BOUNCEID, CREATEBOUNCEONDUEDATE, VERSION, CREATEDBY, CREATEDON, APPROVEDBY, APPROVEDON, LASTMNTBY,LASTMNTON, ACTIVE, RECORDSTATUS,ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOwID) VALUES(9, 'EMI_ADV', 				'Due adjusted from EMI in advance', 		9, NULL, NULL, 1, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>	
	</changeSet>

	<changeSet id="ST#112.11" author="sandeepkumar.m">
		<createTable tableName="Presentment_Exclude_Codes_temp">
			<column name="ID" type="bigint" />
			<column name="Code" type="varchar(20)">
				<constraints nullable="false" />
			</column>
			<column name="Description" type="varchar(100)">
				<constraints nullable="false" />
			</column>
			<column name="ExcludeId" type="int" />
			<column name="BounceID" type="bigint" />
			<column name="CreateBounceOnDueDate" type="boolean">
				<constraints nullable="false" />
			</column>
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="CreatedBy" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="CreatedOn" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="ApprovedBy" type="bigint" />
			<column name="ApprovedOn" type="datetime" />
			<column name="LastMntBy" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="LastMnton" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="Active" type="boolean">
				<constraints nullable="false" />
			</column>
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkFloWId" type="bigint" />
		</createTable>
	</changeSet>
	
	<changeSet id="ST#112.18" author="sandeepkumar.m">
		<addPrimaryKey tableName="Presentment_Exclude_Codes_temp" columnNames="ID"
			constraintName="pk_pec_t_id" />
	</changeSet>

	<changeSet id="ST#112.19" author="sandeepkumar.m">
		<addUniqueConstraint tableName="Presentment_Exclude_Codes_temp" columnNames="Code"
			constraintName="uk_pec_t_code" />
	</changeSet>

	<changeSet id="ST#112.12" author="sandeepkumar.m" dbms="postgresql, oracle">
		<addDefaultValue columnName="Version" tableName="Presentment_Exclude_Codes_temp" defaultValue="0" />
		<addDefaultValue columnName="Active" tableName="Presentment_Exclude_Codes_temp" defaultValue="0" />
		<addDefaultValue columnName="CreateBounceOnDueDate" tableName="Presentment_Exclude_Codes_temp"
			defaultValue="0" />
	</changeSet>

	<changeSet id="ST#112.13" author="sandeepkumar.m" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE PRESENTMENT_EXCLUDE_CODES_TEMP ADD CONSTRAINT DF_PEC_VERSION DEFAULT 0 FOR VERSION;
				ALTER TABLE PRESENTMENT_EXCLUDE_CODES_TEMP ADD CONSTRAINT DF_PEC_ACTIVE DEFAULT 0 FOR ACTIVE;
				ALTER TABLE PRESENTMENT_EXCLUDE_CODES_TEMP ADD CONSTRAINT DF_PEC_CREATEBOUNCEONDUEDATE DEFAULT 0 FOR CREATEBOUNCEONDUEDATE;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#112.20" author="sandeepkumar.m">
		<addForeignKeyConstraint constraintName="fk_pec_bounceid_t"
			referencedTableName="BounceReasons" referencedColumnNames="BounceId" baseTableName="Presentment_Exclude_Codes_temp"
			baseColumnNames="BounceId" />
	</changeSet>

	<changeSet id="ST#112.6.0" author="sandeepkumar.m">
		<sql>
			<![CDATA[
			    DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'PRESENTMENT_EXCLUDE_CODES_MAKER');
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'PRESENTMENT_EXCLUDE_CODES_APPROVER');
				
				DELETE FROM SECROLES WHERE ROLECD ='PRESENTMENT_EXCLUDE_CODES_MAKER';
				DELETE FROM SECROLES WHERE ROLECD ='PRESENTMENT_EXCLUDE_CODES_APPROVER';
			
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'PRESENTMENT_EXCLUDE_CODES_MAKER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'PRESENTMENT_EXCLUDE_CODES_APPROVER');
				
				DELETE FROM SECGROUPS WHERE GRPCODE ='PRESENTMENT_EXCLUDE_CODES_MAKER';
				DELETE FROM SECGROUPS WHERE GRPCODE ='PRESENTMENT_EXCLUDE_CODES_APPROVER';
				
				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='menuItem_PresentmentExcludeCodes';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='PresentmentExcludeCodes_BounceOnDueDate';
				
				INSERT INTO SECRIGHTS(RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menuItem_PresentmentExcludeCodes', 'MENU', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
		    	INSERT INTO SECRIGHTS(RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'PresentmentExcludeCodes_BounceOnDueDate', 'PresentmentExcludeCodesDialog', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		    
		    	INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'PRESENTMENT_EXCLUDE_CODES_MAKER', 'WF Maker for BounceCode', 0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'PRESENTMENT_EXCLUDE_CODES_APPROVER', 'WF Approver for BounceCode', 0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
		   
		   		INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'PRESENTMENT_EXCLUDE_CODES_MAKER'),    (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menuItem_PresentmentExcludeCodes'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		   		INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'PRESENTMENT_EXCLUDE_CODES_APPROVER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menuItem_PresentmentExcludeCodes'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		   		
		   		INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'PRESENTMENT_EXCLUDE_CODES_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'PresentmentExcludeCodes_BounceOnDueDate'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		   		
		  		INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'PRESENTMENT_EXCLUDE_CODES_MAKER', 'Maker role from Presentment Exclude Codes', '', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0); 
		  		INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'PRESENTMENT_EXCLUDE_CODES_APPROVER', 'Approver role from Presentment Exclude Codes',	'', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		    
		    	INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'PRESENTMENT_EXCLUDE_CODES_MAKER'),    (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'PRESENTMENT_EXCLUDE_CODES_MAKER'),    0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		    	INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'PRESENTMENT_EXCLUDE_CODES_APPROVER'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'PRESENTMENT_EXCLUDE_CODES_APPROVER'), 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		    	
		   		INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'PRESENTMENT_EXCLUDE_CODES_MAKER'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'MSTGRP1_MAKER'), 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		    	INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'PRESENTMENT_EXCLUDE_CODES_APPROVER'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'MSTGRP1_APPROVER'), 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet> 
	
	<changeSet id="ST#90.0" author="Alekhya.T">
		<createTable tableName="Instrument_Types">
			<column name="ID" type="bigint" />
			<column name="Code" type="varchar(8)" />
			<column name="Description" type="varchar(100)">
				<constraints nullable="false" />
			</column>
			<column name="Internal" type="boolean">
				<constraints nullable="false" />
			</column>
			<column name="Enabled" type="boolean">
				<constraints nullable="false" />
			</column>
			<column name="AutoExtraction" type="boolean">
				<constraints nullable="false" />
			</column>
			<column name="ExtractionDays" type="smallint">
				<constraints nullable="false" />
			</column>
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="CreatedBy" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="CreatedOn" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="ApprovedBy" type="bigint" />
			<column name="ApprovedOn" type="datetime" />
			<column name="LastMntBy" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="LastMntOn" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="Active" type="boolean">
				<constraints nullable="false" />
			</column>
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkFlowId" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet id="ST#90.1" author="Alekhya.T">
		<addPrimaryKey tableName="Instrument_Types" columnNames="ID" constraintName="PK_Instrument_Type" />
	</changeSet>

	<changeSet id="ST#90.2" author="Alekhya.T">
		<addUniqueConstraint tableName="Instrument_Types" columnNames="Code" constraintName="UK_Codes" />
	</changeSet>

	<changeSet id="ST#90.3" author="Alekhya.T" dbms="posgres,oracle">
		<addDefaultValue tableName="INSTRUMENT_TYPES" columnName="Internal" defaultValue="0" />
		<addDefaultValue tableName="INSTRUMENT_TYPES" columnName="Enabled" defaultValue="0" />
		<addDefaultValue tableName="INSTRUMENT_TYPES" columnName="AutoExtraction" defaultValue="0" />
		<addDefaultValue tableName="INSTRUMENT_TYPES" columnName="ExtractionDays" defaultValue="0" />
		<addDefaultValue tableName="INSTRUMENT_TYPES" columnName="Version" defaultValue="0" />
		<addDefaultValue tableName="INSTRUMENT_TYPES" columnName="Active" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#90.3" author="Alekhya.T" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE INSTRUMENT_TYPES ADD CONSTRAINT DF_IT_INTERNAL DEFAULT       0 FOR INTERNAL;
				ALTER TABLE INSTRUMENT_TYPES ADD CONSTRAINT DF_IT_ENABLED DEFAULT        0 FOR ENABLED;
				ALTER TABLE INSTRUMENT_TYPES ADD CONSTRAINT DF_IT_AUTOEXTRACTION DEFAULT 0 FOR AUTOEXTRACTION;
				ALTER TABLE INSTRUMENT_TYPES ADD CONSTRAINT DF_IT_EXTRACTIONDAYS DEFAULT 0 FOR EXTRACTIONDAYS;
				ALTER TABLE INSTRUMENT_TYPES ADD CONSTRAINT DF_IT_VERSION DEFAULT        0 FOR VERSION;
				ALTER TABLE INSTRUMENT_TYPES ADD CONSTRAINT DF_IT_ACTIVE DEFAULT         0 FOR ACTIVE;
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#90.4" author="Alekhya.T">
		<createTable tableName="Instrument_Types_Temp">
			<column name="ID" type="bigint" />
			<column name="Code" type="varchar(8)" />
			<column name="Description" type="varchar(100)">
				<constraints nullable="false" />
			</column>
			<column name="Internal" type="boolean">
				<constraints nullable="false" />
			</column>
			<column name="Enabled" type="boolean">
				<constraints nullable="false" />
			</column>
			<column name="AutoExtraction" type="boolean">
				<constraints nullable="false" />
			</column>
			<column name="ExtractionDays" type="smallint">
				<constraints nullable="false" />
			</column>
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="CreatedBy" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="CreatedOn" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="ApprovedBy" type="bigint" />
			<column name="ApprovedOn" type="datetime" />
			<column name="LastMntBy" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="LastMntOn" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="Active" type="boolean">
				<constraints nullable="false" />
			</column>
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkFlowId" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet id="ST#90.5" author="Alekhya.T">
		<addPrimaryKey tableName="Instrument_Types_Temp" columnNames="ID" constraintName="PK_Instrument_Type_T" />
	</changeSet>

	<changeSet id="ST#90.6" author="Alekhya.T">
		<addUniqueConstraint tableName="Instrument_Types_Temp" columnNames="Code"
			constraintName="UK_Codes_T" />
	</changeSet>

	<changeSet id="ST#90.7" author="Alekhya.T" dbms="posgres,oracle">
		<addDefaultValue tableName="INSTRUMENT_TYPES_TEMP" columnName="Internal" defaultValue="0" />
		<addDefaultValue tableName="INSTRUMENT_TYPES_TEMP" columnName="Enabled" defaultValue="0" />
		<addDefaultValue tableName="INSTRUMENT_TYPES_TEMP" columnName="AutoExtraction" defaultValue="0" />
		<addDefaultValue tableName="INSTRUMENT_TYPES_TEMP" columnName="ExtractionDays" defaultValue="0" />
		<addDefaultValue tableName="INSTRUMENT_TYPES_TEMP" columnName="Version" defaultValue="0" />
		<addDefaultValue tableName="INSTRUMENT_TYPES_TEMP" columnName="Active" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#90.7" author="Alekhya.T" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE INSTRUMENT_TYPES_TEMP ADD CONSTRAINT DF_ITT_INTERNAL DEFAULT       0 FOR INTERNAL;
				ALTER TABLE INSTRUMENT_TYPES_TEMP ADD CONSTRAINT DF_ITT_ENABLED DEFAULT        0 FOR ENABLED;
				ALTER TABLE INSTRUMENT_TYPES_TEMP ADD CONSTRAINT DF_ITT_AUTOEXTRACTION DEFAULT 0 FOR AUTOEXTRACTION;
				ALTER TABLE INSTRUMENT_TYPES_TEMP ADD CONSTRAINT DF_ITT_EXTRACTIONDAYS DEFAULT 0 FOR EXTRACTIONDAYS;
				ALTER TABLE INSTRUMENT_TYPES_TEMP ADD CONSTRAINT DF_ITT_VERSION DEFAULT        0 FOR VERSION;
				ALTER TABLE INSTRUMENT_TYPES_TEMP ADD CONSTRAINT DF_ITT_ACTIVE DEFAULT         0 FOR ACTIVE;
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#90.8" author="Alekhya.T">
		<createSequence sequenceName="Seq_Due_Extraction_Header" minValue="1" maxValue="999999999999999999" startValue="1"/>
	</changeSet>
	
	<changeSet id="ST#90.9" author="Alekhya.T">
		<createTable tableName="Due_Extraction_Header">
			<column name="ID" type="bigint"/>
			<column name="ExtractionMonth" type="varchar(10)" >
				<constraints nullable="false" />
			</column>
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="CreatedBy" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="CreatedOn" type="datetime">
				<constraints nullable="false" />
			</column>

			<column name="ApprovedBy" type="bigint" />
			<column name="ApprovedOn" type="datetime" />
			<column name="LastMntBy" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="LastMntOn" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="Active" type="boolean">
				<constraints nullable="false" />
			</column>
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkFlowId" type="bigint" />
		</createTable>
	</changeSet>
	
	<changeSet id="ST#90.10" author="Alekhya.T">
		<addPrimaryKey tableName="Due_Extraction_Header" columnNames="ID"
			constraintName="PK_Due_Extraction_Header" />
	</changeSet>
	
	<changeSet id="ST#90.11" author="Alekhya.T" dbms="posgres,oracle">
		<addDefaultValue tableName="Due_Extraction_Header" columnName="Version" defaultValue="0" />
		<addDefaultValue tableName="Due_Extraction_Header" columnName="Active" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#90.11" author="Alekhya.T" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE DUE_EXTRACTION_HEADER ADD CONSTRAINT DF_DEH_VERSION DEFAULT 0 FOR VERSION;
				ALTER TABLE DUE_EXTRACTION_HEADER ADD CONSTRAINT DF_DEH_ACTIVE DEFAULT  0 FOR ACTIVE;
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#90.12" author="Alekhya.T">
		<createTable tableName="Due_Extraction_Header_Temp">
			<column name="ID" type="bigint" />
			<column name="ExtractionMonth" type="varchar(10)" >
				<constraints nullable="false" />
			</column>
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="CreatedBy" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="CreatedOn" type="datetime">
				<constraints nullable="false" />
			</column>

			<column name="ApprovedBy" type="bigint" />
			<column name="ApprovedOn" type="datetime" />
			<column name="LastMntBy" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="LastMntOn" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="Active" type="boolean">
				<constraints nullable="false" />
			</column>
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkFlowId" type="bigint" />
		</createTable>
	</changeSet>
	
	<changeSet id="ST#90.13" author="Alekhya.T">
		<addPrimaryKey tableName="Due_Extraction_Header_Temp" columnNames="ID"
			constraintName="PK_Due_Extraction_Header_Temp" />
	</changeSet>
	
	<changeSet id="ST#90.14" author="Alekhya.T" dbms="posgres,oracle">
		<addDefaultValue tableName="Due_Extraction_Header_Temp" columnName="Version" defaultValue="0" />
		<addDefaultValue tableName="Due_Extraction_Header_Temp" columnName="Active" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#90.14" author="Alekhya.T" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE DUE_EXTRACTION_HEADER_TEMP ADD CONSTRAINT DF_DEHT_VERSION DEFAULT 0 FOR VERSION;
				ALTER TABLE DUE_EXTRACTION_HEADER_TEMP ADD CONSTRAINT DF_DEHT_ACTIVE DEFAULT  0 FOR ACTIVE;
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#90.15" author="Alekhya.T">
		<createSequence sequenceName="Seq_Due_Extraction_Config" minValue="1" maxValue="999999999999999999" startValue="1"/>
	</changeSet>

	<changeSet id="ST#90.16" author="Alekhya.T">
		<createTable tableName="Due_Extraction_Config">
			<column name="ID" type="bigint" />
			<column name="MonthID" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="InstrumentID" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="DueDate" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="ExtractionDate" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="Modified" type="boolean" />
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="CreatedBy" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="CreatedOn" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="ApprovedBy" type="bigint" />
			<column name="ApprovedOn" type="datetime" />
			<column name="LastMntBy" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="LastMntOn" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="Active" type="boolean">
				<constraints nullable="false" />
			</column>
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkFlowId" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet id="ST#90.17" author="Alekhya.T">
		<addPrimaryKey tableName="Due_Extraction_Config" columnNames="ID"
			constraintName="PK_Due_Extraction_Config" />
	</changeSet>

	<changeSet id="ST#90.18" author="Alekhya.T">
		<addForeignKeyConstraint constraintName="FK_Due_Extraction_Config_ID"
			referencedTableName="Instrument_Types" referencedColumnNames="ID" 
			baseColumnNames="InstrumentID" baseTableName="Due_Extraction_Config" />
	</changeSet>
	
	<changeSet id="ST#90.19" author="Alekhya.T">
		<addForeignKeyConstraint constraintName="FK_DEC_MonthId"
			referencedTableName="Due_Extraction_Header" referencedColumnNames="ID" 
			baseColumnNames="MonthId" baseTableName="Due_Extraction_Config" />
	</changeSet>

	<changeSet id="ST#90.20" author="Alekhya.T">
		<addUniqueConstraint tableName="Due_Extraction_Config"
			columnNames="InstrumentID, DueDate, ExtractionDate" constraintName="UK_DEC_II_DD_ED" />
	</changeSet>

	<changeSet id="ST#90.21" author="Alekhya.T" dbms="posgres,oracle">
		<addDefaultValue tableName="Due_Extraction_Config" columnName="Version" defaultValue="0" />
		<addDefaultValue tableName="Due_Extraction_Config" columnName="Active" defaultValue="0" />
		<addDefaultValue tableName="Due_Extraction_Config" columnName="Modified" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#90.21" author="Alekhya.T" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE DUE_EXTRACTION_CONFIG ADD CONSTRAINT DF_DEC_VERSION DEFAULT  0 FOR VERSION;
				ALTER TABLE DUE_EXTRACTION_CONFIG ADD CONSTRAINT DF_DEC_ACTIVE DEFAULT   0 FOR ACTIVE;
				ALTER TABLE DUE_EXTRACTION_CONFIG ADD CONSTRAINT DF_DEC_MODIFIED DEFAULT 0 FOR MODIFIED;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#90.22" author="Alekhya.T">
		<createTable tableName="Due_Extraction_Config_Temp">
			<column name="ID" type="bigint" />
			<column name="InstrumentID" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="DueDate" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="ExtractionDate" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="Modified" type="boolean" />
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="CreatedBy" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="CreatedOn" type="datetime">
				<constraints nullable="false" />
			</column>

			<column name="ApprovedBy" type="bigint" />
			<column name="ApprovedOn" type="datetime" />
			<column name="LastMntBy" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="LastMntOn" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="Active" type="boolean">
				<constraints nullable="false" />
			</column>
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkFlowId" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet id="ST#90.23" author="Alekhya.T">
		<addPrimaryKey tableName="Due_Extraction_Config_Temp" columnNames="ID"
			constraintName="PK_Due_Extraction_Config_T" />
	</changeSet>

	<changeSet id="ST#90.24" author="Alekhya.T">
		<addForeignKeyConstraint constraintName="FK_Due_Extraction_Config_T_ID"
			referencedTableName="InstrumentTypes" referencedColumnNames="ID"
			baseColumnNames="InstrumentID" baseTableName="Due_Extraction_Config_Temp"/>
	</changeSet>
	
	<changeSet id="ST#90.25" author="Alekhya.T">
		<addForeignKeyConstraint constraintName="FK_DECT_MonthId"
			referencedTableName="Due_Extraction_Header" referencedColumnNames="ID" 
			baseColumnNames="MonthId" baseTableName="Due_Extraction_Config_Temp" />
	</changeSet>

	<changeSet id="ST#90.26" author="Alekhya.T">
		<addUniqueConstraint tableName="Due_Extraction_Config_Temp"
			columnNames="InstrumentID, DueDate, ExtractionDate" constraintName="UK_DEC_II_DD_ED_Te" />
	</changeSet>

	<changeSet id="ST#90.27" author="Alekhya.T" dbms="postgresql, oracle">
		<addDefaultValue tableName="Due_Extraction_Config_Temp" columnName="Version" defaultValue="0" />
		<addDefaultValue tableName="Due_Extraction_Config_Temp" columnName="Active" defaultValue="0" />
		<addDefaultValue tableName="Due_Extraction_Config_Temp" columnName="Modified" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#90.27" author="Alekhya.T" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE DUE_EXTRACTION_CONFIG_TEMP ADD CONSTRAINT DF_DECT_VERSION  DEFAULT 0 FOR VERSION;
				ALTER TABLE DUE_EXTRACTION_CONFIG_TEMP ADD CONSTRAINT DF_DECT_ACTIVE   DEFAULT 0 FOR ACTIVE;
				ALTER TABLE DUE_EXTRACTION_CONFIG_TEMP ADD CONSTRAINT DF_DECT_MODIFIED DEFAULT 0 FOR MODIFIED;
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#90.28" author="Alekhya.T">
		<createTable tableName="Due_Extraction_Config_Log">
			<column name="ID" type="bigint" />
			<column name="MonthID" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="InstrumentID" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="DueDate" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="ExtractionDate" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="Modified" type="boolean" />
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="CreatedBy" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="CreatedOn" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="ApprovedBy" type="bigint" />
			<column name="ApprovedOn" type="datetime" />
			<column name="LastMntBy" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="LastMntOn" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="Active" type="boolean">
				<constraints nullable="false" />
			</column>
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkFlowId" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet id="ST#90.29" author="Alekhya.T">
		<addPrimaryKey tableName="Due_Extraction_Config" columnNames="ID"
			constraintName="PK_Due_Extraction_Config" />
	</changeSet>
	
	<changeSet id="ST#90.30" author="Alekhya.T">
		<sql>
			<![CDATA[
				INSERT INTO INSTRUMENT_TYPES(ID, CODE, DESCRIPTION, INTERNAL, ENABLED, AUTOEXTRACTION, EXTRACTIONDAYS, VERSION, CREATEDBY, CREATEDON, APPROVEDBY, APPROVEDON, LASTMNTBY, LASTMNTON, ACTIVE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM INSTRUMENT_TYPES), 'ECS',    'ELECTRONIC CLEARING SERVICE', 					0, 1, 0, 5, 1, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO INSTRUMENT_TYPES(ID, CODE, DESCRIPTION, INTERNAL, ENABLED, AUTOEXTRACTION, EXTRACTIONDAYS, VERSION, CREATEDBY, CREATEDON, APPROVEDBY, APPROVEDON, LASTMNTBY, LASTMNTON, ACTIVE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM INSTRUMENT_TYPES), 'DDM',    'Direct Debit', 									0, 1, 0, 5, 1, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO INSTRUMENT_TYPES(ID, CODE, DESCRIPTION, INTERNAL, ENABLED, AUTOEXTRACTION, EXTRACTIONDAYS, VERSION, CREATEDBY, CREATEDON, APPROVEDBY, APPROVEDON, LASTMNTBY, LASTMNTON, ACTIVE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM INSTRUMENT_TYPES), 'NACH',   'NATIONAL AUTOMATED CLEARING HOUSE', 				0, 1, 0, 5, 1, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO INSTRUMENT_TYPES(ID, CODE, DESCRIPTION, INTERNAL, ENABLED, AUTOEXTRACTION, EXTRACTIONDAYS, VERSION, CREATEDBY, CREATEDON, APPROVEDBY, APPROVEDON, LASTMNTBY, LASTMNTON, ACTIVE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM INSTRUMENT_TYPES), 'PDC',    'POST DATED CHEQUE', 								0, 1, 0, 5, 1, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO INSTRUMENT_TYPES(ID, CODE, DESCRIPTION, INTERNAL, ENABLED, AUTOEXTRACTION, EXTRACTIONDAYS, VERSION, CREATEDBY, CREATEDON, APPROVEDBY, APPROVEDON, LASTMNTBY, LASTMNTON, ACTIVE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM INSTRUMENT_TYPES), 'EMNDT',  'ELECTRONIC MANDATE', 								0, 1, 0, 5, 1, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO INSTRUMENT_TYPES(ID, CODE, DESCRIPTION, INTERNAL, ENABLED, AUTOEXTRACTION, EXTRACTIONDAYS, VERSION, CREATEDBY, CREATEDON, APPROVEDBY, APPROVEDON, LASTMNTBY, LASTMNTON, ACTIVE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM INSTRUMENT_TYPES), 'DAS',    'DEDUCTION AGAINST SALARY',			 			0, 1, 0, 5, 1, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO INSTRUMENT_TYPES(ID, CODE, DESCRIPTION, INTERNAL, ENABLED, AUTOEXTRACTION, EXTRACTIONDAYS, VERSION, CREATEDBY, CREATEDON, APPROVEDBY, APPROVEDON, LASTMNTBY, LASTMNTON, ACTIVE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM INSTRUMENT_TYPES), 'SI',     'STANDING INSTRUCTION',			 				0, 1, 0, 5, 1, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO INSTRUMENT_TYPES(ID, CODE, DESCRIPTION, INTERNAL, ENABLED, AUTOEXTRACTION, EXTRACTIONDAYS, VERSION, CREATEDBY, CREATEDON, APPROVEDBY, APPROVEDON, LASTMNTBY, LASTMNTON, ACTIVE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM INSTRUMENT_TYPES), 'E-NACH', 'ELECTRONIC NATIONAL AUTOMATED CLEARING HOUSE',	0, 1, 0, 5, 1, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO INSTRUMENT_TYPES(ID, CODE, DESCRIPTION, INTERNAL, ENABLED, AUTOEXTRACTION, EXTRACTIONDAYS, VERSION, CREATEDBY, CREATEDON, APPROVEDBY, APPROVEDON, LASTMNTBY, LASTMNTON, ACTIVE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM INSTRUMENT_TYPES), 'IPDC',   'INTERNAL POST DATED CHEQUE', 						1, 1, 0, 5, 1, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1000, CURRENT_TIMESTAMP, 1, NULL, NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#90.31" author="Alekhya.T">
		<sql>
			<![CDATA[
				UPDATE INSTRUMENT_TYPES SET EXTRACTIONDAYS = (SELECT SYSPARMVALUE FROM SMTPARAMETERS WHERE SYSPARMCODE = 'PRESENTMENT_NACH_DATE_FREQUENCY') WHERE CODE = 'ECS';
				UPDATE INSTRUMENT_TYPES SET EXTRACTIONDAYS = (SELECT SYSPARMVALUE FROM SMTPARAMETERS WHERE SYSPARMCODE = 'PRESENTMENT_NACH_DATE_FREQUENCY') WHERE CODE = 'DDM';
				UPDATE INSTRUMENT_TYPES SET EXTRACTIONDAYS = (SELECT SYSPARMVALUE FROM SMTPARAMETERS WHERE SYSPARMCODE = 'PRESENTMENT_NACH_DATE_FREQUENCY') WHERE CODE = 'NACH';
				UPDATE INSTRUMENT_TYPES SET EXTRACTIONDAYS = (SELECT SYSPARMVALUE FROM SMTPARAMETERS WHERE SYSPARMCODE = 'PRESENTMENT_NACH_DATE_FREQUENCY') WHERE CODE = 'EMNDT';
				UPDATE INSTRUMENT_TYPES SET EXTRACTIONDAYS = (SELECT SYSPARMVALUE FROM SMTPARAMETERS WHERE SYSPARMCODE = 'PRESENTMENT_NACH_DATE_FREQUENCY') WHERE CODE = 'E-NACH';
				UPDATE INSTRUMENT_TYPES SET EXTRACTIONDAYS = (SELECT SYSPARMVALUE FROM SMTPARAMETERS WHERE SYSPARMCODE = 'PRESENTMENT_PDC_DATE_FREQUENCY')  WHERE CODE = 'PDC';
			]]>
		</sql>
	</changeSet>
	
</databaseChangeLog>