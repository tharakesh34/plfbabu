<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

	<property name="add.schema" value="dbo." dbms="mssql" />
	<property name="add.schema" value="" dbms="oracle" />
	<property name="add.schema" value="" dbms="postgresql" />
	<property name="call.substr" value="substring" dbms="mssql" />
	<property name="call.substr" value="substr" dbms="oracle" />
	<property name="call.substr" value="substring" dbms="postgresql" />
	<property name="call.auditdb" value="PLFAVANSEQC.." dbms="mssql" />
	<property name="call.auditdb" value=" " dbms="oracle" />
	<property name="call.concatenate" value="+" dbms="mssql" />
	<property name="call.concatenate" value="||" dbms="oracle" />
	<property name="call.concatenate" value="||" dbms="postgresql" />
	<property name="call.collength" value="LEN" dbms="mssql" />
	<property name="call.collength" value="LENGTH" dbms="oracle" />
	<property name="call.collength" value="LENGTH" dbms="postgresql" />
	<property name="call.date" value="getdate()" dbms="mssql" />
	<property name="call.date" value="sysdate" dbms="oracle" />
	<property name="call.date" value="now()" dbms="postgresql" />


	 <changeSet id="pre_run_for_pgp" author="Jayant" runAlways="true"
		dbms="postgresql">
		<sql>
			Set search_path = plf,public,pg_catalog;
		</sql>
	</changeSet>
	
	<changeSet id="2.1" author="somasekhar">
		<createView replaceIfExists="true" viewName="DE_FILE_CONTROL_VIEW">
	     SELECT DS.ID,
		 	DC.NAME,
		    DC.UPLOADPATH FILELOCATION,
		  	DS.FILENAME,
		  	DS.ENDTIME,
		  	DS.STATUS,
		  	DC.id AS CONFIGID,
		  	DC.POSTEVENT,
		  	DS.VALUEDATE,
            DS.USERID,
            TH.STARTDATE,
            TH.ENDDATE
		FROM DATA_ENGINE_CONFIG DC
		INNER JOIN DATA_ENGINE_STATUS DS ON DS.NAME = DC.NAME
        LEFT join TRIAL_BALANCE_HEADER TH on TH.FILENAME=DS.FILENAME
	 </createView>
</changeSet>
	
<changeSet id="3" author="somasekhar">
	 <sql>
	  delete from SMTPARAMETERS where SYSPARMCODE='FINANCIAL_YEAR_START_MONTH';
 
      Insert into SMTPARAMETERS (SYSPARMCODE,SYSPARMDESC,SYSPARMTYPE,SYSPARMMAINT,SYSPARMVALUE,SYSPARMLENGTH,SYSPARMDEC,SYSPARMLIST,SYSPARMVALDMOD,SYSPARMDESCRIPTION,VERSION,LASTMNTBY,LASTMNTON,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID) values ('FINANCIAL_YEAR_START_MONTH','Finance year Start month','String',1,'4',4,0,null,null,'Finance year Start month',1,1000,current_timestamp,'Approved',null,null,null,null,null,0);

      delete from SMTPARAMETERS where SYSPARMCODE='FINANCIAL_YEAR_END_MONTH';
 
      Insert into SMTPARAMETERS (SYSPARMCODE,SYSPARMDESC,SYSPARMTYPE,SYSPARMMAINT,SYSPARMVALUE,SYSPARMLENGTH,SYSPARMDEC,SYSPARMLIST,SYSPARMVALDMOD,SYSPARMDESCRIPTION,VERSION,LASTMNTBY,LASTMNTON,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID) values ('FINANCIAL_YEAR_END_MONTH','Finance year END month','String',1,'3',4,0,null,null,'Finance year END month',1,1000,current_timestamp,'Approved',null,null,null,null,null,0);
	 
	 </sql>
</changeSet>
	
<changeSet id="4" author="somasekhar">
	 <sql>
	 update DATA_ENGINE_CONFIG set header='Row:{, ${COMPANY_NAME}}Row:{, ${REPORT_NAME}}Row:{, ${TRANSACTION_DURATION}}Row:{Currency: ${CURRENCY}Row:{PARENT GROUP,PLF LEDGER, SAP GL,DESCRIPTION,OPENING BALANCE,CR/DR,DEBIT AMOUNT,CREDIT AMOUNT,CLOSING BALANCE,CR/DR,LOAN TYPE}' where name='TRIAL_BALANCE_EXPORT_CONSOLIDATE';
     update DATA_ENGINE_CONFIG set header='Row:{, ${COMPANY_NAME}}Row:{, ${REPORT_NAME}}Row:{, ${TRANSACTION_DURATION}}Row:{Currency: ${CURRENCY}Row:{STATE,PARENT GROUP,PLF LEDGER,SAP GL,DESCRIPTION,OPENING BALANCE,CR/DR,DEBIT AMOUNT,CREDIT AMOUNT,CLOSING BALANCE,CR/DR,LOAN TYPE}' where name='TRIAL_BALANCE_EXPORT_STATE';
	 
	 </sql>
</changeSet>

<changeSet id="7" author="swami.v">
<sql>
Insert into RBFieldDetails (rbmodule, rbevent,  rbfldname ,rbflddesc , rbfldtype, rbfldlen , rbforcalflds,rbforbldflds, rbfldtablename , rbstflds, modulecode) values ('PVR','PVR','vd_recordStatus','Record Status','nvarchar','100','1','1','','static','');

</sql>
</changeSet>
	<changeSet id="9" author="Dheerendra">
		<createTable tableName="collection_financedetails">
			<column name="id" type="int" autoIncrement="true">
				<constraints primaryKey="true" primaryKeyName="PK_CLCTN_FINDTL_ID" />
			</column>
			<column name="loanreference" type="varchar(20)">
				<constraints nullable="false" />
			</column>
			<column name="custcif" type="varchar(20)" />
			<column name="loantype" type="varchar(8)" />
			<column name="loantypedesc" type="varchar(50)">
				<constraints nullable="false" />
			</column>
			<column name="currency" type="varchar(3)" />
			<column name="productcode" type="varchar(8)" />
			<column name="productdesc" type="varchar(50)" />

			<column name="branchcode" type="varchar(9)">
				<constraints nullable="false" />
			</column>
			<column name="branchname" type="varchar(50)" />
			<column name="finstartdate" type="datetime" />
			<column name="maturitydate" type="datetime" />
			<column name="noinst" type="decimal(6,0)" />
			<column name="nopaidinst" type="decimal(6,0)" />
			<column name="firstrepaydate" type="datetime" />
			<column name="firstrepayamount" type="decimal(18,0)" />
			<column name="nschddate" type="datetime" />
			<column name="nschdpri" type="decimal(18,0)" />
			<column name="nschdpft" type="decimal(18,0)" />
			<column name="totoutstandingamt" type="decimal(18,0)" />
			<column name="overduedate" type="datetime" />
			<column name="noodinst" type="decimal(4,0)" />
			<column name="curoddays" type="decimal(6,0)" />
			<column name="actualoddays" type="decimal(6,0)" />
			<column name="odprincipal" type="decimal(18,0)" />
			<column name="odprofit" type="decimal(18,0)" />
			<column name="duebucket" type="decimal(4,0)" />
			<column name="penaltypaid" type="decimal(18,0)" />
			<column name="penaltydue" type="decimal(18,0)" />
			<column name="penaltywaived" type="decimal(18,0)" />
			<column name="bouncecharges" type="decimal(18,0)" />
			<column name="finstatus" type="varchar(8)" />
			<column name="finstsreason" type="varchar(1)" />
			<column name="finworststatus" type="varchar(8)" />
			<column name="finactive" type="boolean" />
			<column name="recordstatus" type="varchar(2)" />

		</createTable>
	</changeSet>
	
<changeSet id="5" author="aditya">
<comment>New column added for Loan Type Details(extended details)</comment>
	<addColumn tableName="rmtfinancetypes">
			<column name="odmincapamount" type="decimal(18,0)" defaultValueNumeric="0.00"/>
	</addColumn>
	<addColumn tableName="rmtfinancetypes_temp">
			<column name="odmincapamount" type="decimal(18,0)" defaultValueNumeric="0.00"/>
	</addColumn>
</changeSet>

<changeSet id="6.2" author="aditya">
	 <createView viewName="rmtfinancetypes_view" replaceIfExists="true">
		SELECT t1.fintype,
    t1.fincategory,
    t1.fintypedesc,
    t1.finccy,
    t1.findayscaltype,
    t1.finactype,
    t1.fincontingentactype,
    t1.finisgenref,
    t1.finmaxamount,
    t1.finminamount,
    t1.finisopennewfinac,
    t1.findftstmtfrq,
    t1.finisalwmd,
    t1.finschdmthd,
    t1.finisalwgrace,
    t1.finhistretension,
    t1.equalrepayment,
    t1.finratetype,
    t1.finbaserate,
    t1.finsplrate,
    t1.finintrate,
    t1.finminrate,
    t1.finmaxrate,
    t1.findftintfrq,
    t1.finisintcpz,
    t1.fincpzfrq,
    t1.finisrvwalw,
    t1.finrvwfrq,
    t1.fingrcratetype,
    t1.fingrcbaserate,
    t1.fingrcsplrate,
    t1.fingrcintrate,
    t1.fingrcminrate,
    t1.fingrcmaxrate,
    t1.fingrcdftintfrq,
    t1.fingrcisintcpz,
    t1.fingrccpzfrq,
    t1.fingrcisrvwalw,
    t1.fingrcrvwfrq,
    t1.finminterm,
    t1.finmaxterm,
    t1.findftterms,
    t1.finrpyfrq,
    t1.finrepaymethod,
    t1.finisalwpartialrpy,
    t1.finisalwdifferment,
    t1.finmaxdifferment,
    t1.finisalwearlyrpy,
    t1.finisalwearlysettle,
    t1.finodrpytries,
    t1.finearlypayrule,
    t1.finearlysettlerule,
    t1.findepositrestrictedto,
    t1.finaebuyorinception,
    t1.finaesellormaturity,
    t1.finisactive,
    t1.version,
    t1.lastmntby,
    t1.lastmnton,
    t1.recordstatus,
    t1.rolecode,
    t1.nextrolecode,
    t1.taskid,
    t1.nexttaskid,
    t1.recordtype,
    t1.workflowid,
    t1.stepfinance,
    t1.steppingmandatory,
    t1.alwmanualsteps,
    t1.alwdsteppolicies,
    t1.dftsteppolicy,
    t4.actypedesc AS lovdescfincontingentactypename,
    t5.actypedesc AS lovdescfinactypename,
    t1.finisdwpayrequired,
    t1.finrvwrateapplfor,
    t1.finalwratechangeanydate,
    t1.finisintcpzatgrcend,
    t1.finelgrulecode,
    t1.limitelgrulecode,
    t1.finschcalcodeonrvw,
    t1.alwplandeferment,
    t1.plandefercount,
    t1.finassettype,
    t1.pftpayactype,
    t1.finisopenpftpayacc,
    t31.actypedesc AS lovdescpftpayactypename,
    t1.finisalwgrcrepay,
    t1.fingrcschdmthd,
    t1.fingrcmargin,
    t1.finmargin,
    t1.finscheduleon,
    t1.fingrcscheduleon,
    t1.fincommitmentreq,
    t1.fincollateralreq,
    t1.findepreciationreq,
    t1.findepreciationfrq,
    t1.finbankcontingentactype,
    t1.finprovisionactype,
    t38.actypedesc AS lovdescfinbankcontactypename,
    t39.actypedesc AS lovdescfinprovisionactypename,
    t1.allowriainvestment,
    t1.overridelimit,
    t1.limitrequired,
    t1.fincommitmentovrride,
    t1.fincollateralovrride,
    t1.finpftunchanged,
    t1.applyodpenalty,
    t1.odincgrcdays,
    t1.odchargetype,
    t1.odgracedays,
    t1.odchargecalon,
    t1.odchargeamtorperc,
    t1.odallowwaiver,
    t1.odmaxwaiverperc,
    t1.findivision,
    t48.divisioncodedesc AS lovdescfindivisionname,
    t48.entitycode AS lovdescentitycode,
    t1.finsuspactype,
    t49.actypedesc AS lovdescfinsuspactypename,
    t1.product,
    t1.startdate,
    t1.enddate,
    t1.allowdownpaypgm,
    t1.fintypedesc AS lovdescpromofintypedesc,
    t1.remarks,
    t1.alwearlypaymethods,
    t1.pastduepftcalmthd,
    t1.pastduepftmargin,
    t1.alwadvancerent,
    t1.grcadvbaserate,
    t1.grcadvmargin,
    t1.grcadvpftrate,
    t1.rpyadvbaserate,
    t1.rpyadvmargin,
    t1.rpyadvpftrate,
    t1.rolloverfinance,
    t1.rolloverfrq,
    t1.downpayrule,
    t59.rulecode AS downpayruledesc,
    t1.finsusptrigger,
    t1.finsuspremarks,
    t1.alwmultipartydisb,
    t1.collateraltype,
    t1.tdsapplicable,
    t1.manualschedule,
    t1.applygrcpricing,
    t1.grcpricingmethod,
    t1.applyrpypricing,
    t1.rpypricingmethod,
    t1.rpyhierarchy,
    t67.rulecode AS grcpricingmethoddesc,
    t68.rulecode AS rpypricingmethoddesc,
    t1.droplineod,
    t1.droppingmethod,
    t1.ratechganyday,
    t1.finrepaypftonfrq,
    t1.alwbpi,
    t1.bpitreatment,
    t1.pftdueschon,
    t1.planemihalw,
    t1.planemihmethod,
    t1.planemihmaxperyear,
    t1.planemihmax,
    t1.planemihlockperiod,
    t1.planemicpz,
    t1.unplanemihlockperiod,
    t1.unplanemicpz,
    t1.reagecpz,
    t1.fddlockperiod,
    t1.alwdrpymethods,
    t1.maxunplannedemi,
    t1.maxreageholidays,
    t1.roundingmode,
    t1.roundingtarget,
    t1.frequencydays,
    t1.quickdisb,
    t1.alwmaxdisbcheckreq,
    t1.alwreage,
    t1.alwunplanemiholiday,
    t1.profitcenterid,
    t69.profitcentercode,
    t69.profitcenterdesc,
    t1.productcategory,
    t2.productdesc AS fincategorydesc,
    t1.developerfinance,
    t1.costoffunds,
    t1.chequecapturereq,
    t1.finltvcheck,
    t1.partiallysecured,
    t1.alwadvemi,
    t1.advemiminterms,
    t1.advemimaxterms,
    t1.advemidftterms,
    t1.advemischdmthd,
    t1.bpipftdaysbasis,
    t1.eligibilitymethods,
    t1.alwhybridrate,
    t1.fixedratetenor,
    t1.odmincapamount
   FROM rmtfinancetypes_temp t1
     LEFT JOIN bmtproduct t2 ON t1.fincategory = t2.productcode
     LEFT JOIN rmtaccounttypes t4 ON t1.fincontingentactype = t4.actype
     LEFT JOIN rmtaccounttypes t38 ON t1.finbankcontingentactype = t38.actype
     LEFT JOIN rmtaccounttypes t39 ON t1.finprovisionactype = t39.actype
     LEFT JOIN rmtaccounttypes t5 ON t1.finactype = t5.actype
     LEFT JOIN rmtaccounttypes t31 ON t1.pftpayactype = t31.actype
     LEFT JOIN smtdivisiondetail t48 ON t1.findivision = t48.divisioncode
     LEFT JOIN rmtaccounttypes t49 ON t1.finsuspactype = t49.actype
     LEFT JOIN rules t59 ON t1.downpayrule = t59.ruleid
     LEFT JOIN rules t67 ON t1.grcpricingmethod = t67.ruleid
     LEFT JOIN rules t68 ON t1.rpypricingmethod = t68.ruleid
     LEFT JOIN profitcenters t69 ON t69.profitcenterid = t1.profitcenterid
UNION ALL
 SELECT t1.fintype,
    t1.fincategory,
    t1.fintypedesc,
    t1.finccy,
    t1.findayscaltype,
    t1.finactype,
    t1.fincontingentactype,
    t1.finisgenref,
    t1.finmaxamount,
    t1.finminamount,
    t1.finisopennewfinac,
    t1.findftstmtfrq,
    t1.finisalwmd,
    t1.finschdmthd,
    t1.finisalwgrace,
    t1.finhistretension,
    t1.equalrepayment,
    t1.finratetype,
    t1.finbaserate,
    t1.finsplrate,
    t1.finintrate,
    t1.finminrate,
    t1.finmaxrate,
    t1.findftintfrq,
    t1.finisintcpz,
    t1.fincpzfrq,
    t1.finisrvwalw,
    t1.finrvwfrq,
    t1.fingrcratetype,
    t1.fingrcbaserate,
    t1.fingrcsplrate,
    t1.fingrcintrate,
    t1.fingrcminrate,
    t1.fingrcmaxrate,
    t1.fingrcdftintfrq,
    t1.fingrcisintcpz,
    t1.fingrccpzfrq,
    t1.fingrcisrvwalw,
    t1.fingrcrvwfrq,
    t1.finminterm,
    t1.finmaxterm,
    t1.findftterms,
    t1.finrpyfrq,
    t1.finrepaymethod,
    t1.finisalwpartialrpy,
    t1.finisalwdifferment,
    t1.finmaxdifferment,
    t1.finisalwearlyrpy,
    t1.finisalwearlysettle,
    t1.finodrpytries,
    t1.finearlypayrule,
    t1.finearlysettlerule,
    t1.findepositrestrictedto,
    t1.finaebuyorinception,
    t1.finaesellormaturity,
    t1.finisactive,
    t1.version,
    t1.lastmntby,
    t1.lastmnton,
    t1.recordstatus,
    t1.rolecode,
    t1.nextrolecode,
    t1.taskid,
    t1.nexttaskid,
    t1.recordtype,
    t1.workflowid,
    t1.stepfinance,
    t1.steppingmandatory,
    t1.alwmanualsteps,
    t1.alwdsteppolicies,
    t1.dftsteppolicy,
    t4.actypedesc AS lovdescfincontingentactypename,
    t5.actypedesc AS lovdescfinactypename,
    t1.finisdwpayrequired,
    t1.finrvwrateapplfor,
    t1.finalwratechangeanydate,
    t1.finisintcpzatgrcend,
    t1.finelgrulecode,
    t1.limitelgrulecode,
    t1.finschcalcodeonrvw,
    t1.alwplandeferment,
    t1.plandefercount,
    t1.finassettype,
    t1.pftpayactype,
    t1.finisopenpftpayacc,
    t31.actypedesc AS lovdescpftpayactypename,
    t1.finisalwgrcrepay,
    t1.fingrcschdmthd,
    t1.fingrcmargin,
    t1.finmargin,
    t1.finscheduleon,
    t1.fingrcscheduleon,
    t1.fincommitmentreq,
    t1.fincollateralreq,
    t1.findepreciationreq,
    t1.findepreciationfrq,
    t1.finbankcontingentactype,
    t1.finprovisionactype,
    t38.actypedesc AS lovdescfinbankcontactypename,
    t39.actypedesc AS lovdescfinprovisionactypename,
    t1.allowriainvestment,
    t1.overridelimit,
    t1.limitrequired,
    t1.fincommitmentovrride,
    t1.fincollateralovrride,
    t1.finpftunchanged,
    t1.applyodpenalty,
    t1.odincgrcdays,
    t1.odchargetype,
    t1.odgracedays,
    t1.odchargecalon,
    t1.odchargeamtorperc,
    t1.odallowwaiver,
    t1.odmaxwaiverperc,
    t1.findivision,
    t48.divisioncodedesc AS lovdescfindivisionname,
    t48.entitycode AS lovdescentitycode,
    t1.finsuspactype,
    t49.actypedesc AS lovdescfinsuspactypename,
    t1.product,
    t1.startdate,
    t1.enddate,
    t1.allowdownpaypgm,
    t1.fintypedesc AS lovdescpromofintypedesc,
    t1.remarks,
    t1.alwearlypaymethods,
    t1.pastduepftcalmthd,
    t1.pastduepftmargin,
    t1.alwadvancerent,
    t1.grcadvbaserate,
    t1.grcadvmargin,
    t1.grcadvpftrate,
    t1.rpyadvbaserate,
    t1.rpyadvmargin,
    t1.rpyadvpftrate,
    t1.rolloverfinance,
    t1.rolloverfrq,
    t1.downpayrule,
    t59.rulecode AS downpayruledesc,
    t1.finsusptrigger,
    t1.finsuspremarks,
    t1.alwmultipartydisb,
    t1.collateraltype,
    t1.tdsapplicable,
    t1.manualschedule,
    t1.applygrcpricing,
    t1.grcpricingmethod,
    t1.applyrpypricing,
    t1.rpypricingmethod,
    t1.rpyhierarchy,
    t67.rulecode AS grcpricingmethoddesc,
    t68.rulecode AS rpypricingmethoddesc,
    t1.droplineod,
    t1.droppingmethod,
    t1.ratechganyday,
    t1.finrepaypftonfrq,
    t1.alwbpi,
    t1.bpitreatment,
    t1.pftdueschon,
    t1.planemihalw,
    t1.planemihmethod,
    t1.planemihmaxperyear,
    t1.planemihmax,
    t1.planemihlockperiod,
    t1.planemicpz,
    t1.unplanemihlockperiod,
    t1.unplanemicpz,
    t1.reagecpz,
    t1.fddlockperiod,
    t1.alwdrpymethods,
    t1.maxunplannedemi,
    t1.maxreageholidays,
    t1.roundingmode,
    t1.roundingtarget,
    t1.frequencydays,
    t1.quickdisb,
    t1.alwmaxdisbcheckreq,
    t1.alwreage,
    t1.alwunplanemiholiday,
    t1.profitcenterid,
    t69.profitcentercode,
    t69.profitcenterdesc,
    t1.productcategory,
    t2.productdesc AS fincategorydesc,
    t1.developerfinance,
    t1.costoffunds,
    t1.chequecapturereq,
    t1.finltvcheck,
    t1.partiallysecured,
    t1.alwadvemi,
    t1.advemiminterms,
    t1.advemimaxterms,
    t1.advemidftterms,
    t1.advemischdmthd,
    t1.bpipftdaysbasis,
    t1.eligibilitymethods,
    t1.alwhybridrate,
    t1.fixedratetenor,
    t1.odmincapamount
   FROM rmtfinancetypes t1
     LEFT JOIN bmtproduct t2 ON t1.fincategory = t2.productcode
     LEFT JOIN rmtaccounttypes t4 ON t1.fincontingentactype = t4.actype
     LEFT JOIN rmtaccounttypes t38 ON t1.finbankcontingentactype = t38.actype
     LEFT JOIN rmtaccounttypes t39 ON t1.finprovisionactype = t39.actype
     LEFT JOIN rmtaccounttypes t5 ON t1.finactype = t5.actype
     LEFT JOIN rmtaccounttypes t31 ON t1.pftpayactype = t31.actype
     LEFT JOIN smtdivisiondetail t48 ON t1.findivision = t48.divisioncode
     LEFT JOIN rmtaccounttypes t49 ON t1.finsuspactype = t49.actype
     LEFT JOIN rules t59 ON t1.downpayrule = t59.ruleid
     LEFT JOIN rules t67 ON t1.grcpricingmethod = t67.ruleid
     LEFT JOIN rules t68 ON t1.rpypricingmethod = t68.ruleid
     LEFT JOIN profitcenters t69 ON t69.profitcenterid = t1.profitcenterid
  WHERE NOT (EXISTS ( SELECT 1 AS expr1
           FROM rmtfinancetypes_temp
          WHERE rmtfinancetypes_temp.fintype = t1.fintype))
</createView>
</changeSet>

<changeSet id="7_Pre.1" author="Aditya" dbms="postgresql">
	<sql>
		select deps_save_and_drop_dependencies('plf','rmtfinancetypes_aview');
	</sql>
</changeSet>
<changeSet id="7.2" author="aditya">
<createView viewName="rmtfinancetypes_aview" replaceIfExists="true">
SELECT t1.fintype,
    t1.fincategory,
    t1.fintypedesc,
    t1.finccy,
    t1.findayscaltype,
    t1.finactype,
    t1.fincontingentactype,
    t1.finisgenref,
    t1.finmaxamount,
    t1.finminamount,
    t1.finisopennewfinac,
    t1.findftstmtfrq,
    t1.finisalwmd,
    t1.finschdmthd,
    t1.finisalwgrace,
    t1.finhistretension,
    t1.equalrepayment,
    t1.finratetype,
    t1.finbaserate,
    t1.finsplrate,
    t1.finintrate,
    t1.finminrate,
    t1.finmaxrate,
    t1.findftintfrq,
    t1.finisintcpz,
    t1.fincpzfrq,
    t1.finisrvwalw,
    t1.finrvwfrq,
    t1.fingrcratetype,
    t1.fingrcbaserate,
    t1.fingrcsplrate,
    t1.fingrcintrate,
    t1.fingrcminrate,
    t1.fingrcmaxrate,
    t1.fingrcdftintfrq,
    t1.fingrcisintcpz,
    t1.fingrccpzfrq,
    t1.fingrcisrvwalw,
    t1.fingrcrvwfrq,
    t1.finminterm,
    t1.finmaxterm,
    t1.findftterms,
    t1.finrpyfrq,
    t1.finrepaymethod,
    t1.finisalwpartialrpy,
    t1.finisalwdifferment,
    t1.finmaxdifferment,
    t1.finisalwearlyrpy,
    t1.finisalwearlysettle,
    t1.finodrpytries,
    t1.finearlypayrule,
    t1.finearlysettlerule,
    t1.findepositrestrictedto,
    t1.finaebuyorinception,
    t1.finaesellormaturity,
    t1.finisactive,
    t1.version,
    t1.lastmntby,
    t1.lastmnton,
    t1.recordstatus,
    t1.rolecode,
    t1.nextrolecode,
    t1.taskid,
    t1.nexttaskid,
    t1.recordtype,
    t1.workflowid,
    t1.stepfinance,
    t1.steppingmandatory,
    t1.alwmanualsteps,
    t1.alwdsteppolicies,
    t1.dftsteppolicy,
    t4.actypedesc AS lovdescfincontingentactypename,
    t5.actypedesc AS lovdescfinactypename,
    t1.finisdwpayrequired,
    t1.finrvwrateapplfor,
    t1.finalwratechangeanydate,
    t1.finisintcpzatgrcend,
    t1.finelgrulecode,
    t1.limitelgrulecode,
    t1.finschcalcodeonrvw,
    t1.alwplandeferment,
    t1.plandefercount,
    t1.finassettype,
    t1.pftpayactype,
    t1.finisopenpftpayacc,
    t31.actypedesc AS lovdescpftpayactypename,
    t1.finisalwgrcrepay,
    t1.fingrcschdmthd,
    t1.fingrcmargin,
    t1.finmargin,
    t1.finscheduleon,
    t1.fingrcscheduleon,
    t1.fincommitmentreq,
    t1.fincollateralreq,
    t1.findepreciationreq,
    t1.findepreciationfrq,
    t1.finbankcontingentactype,
    t1.finprovisionactype,
    t38.actypedesc AS lovdescfinbankcontactypename,
    t39.actypedesc AS lovdescfinprovisionactypename,
    t1.allowriainvestment,
    t1.overridelimit,
    t1.limitrequired,
    t1.fincommitmentovrride,
    t1.fincollateralovrride,
    t1.finpftunchanged,
    t1.applyodpenalty,
    t1.odincgrcdays,
    t1.odchargetype,
    t1.odgracedays,
    t1.odchargecalon,
    t1.odchargeamtorperc,
    t1.odallowwaiver,
    t1.odmaxwaiverperc,
    t1.findivision,
    t48.divisioncodedesc AS lovdescfindivisionname,
    t48.entitycode AS lovdescentitycode,
    t1.finsuspactype,
    t49.actypedesc AS lovdescfinsuspactypename,
    t1.product,
    t1.startdate,
    t1.enddate,
    t1.allowdownpaypgm,
    t1.remarks,
    t1.alwearlypaymethods,
    t1.pastduepftcalmthd,
    t1.pastduepftmargin,
    t1.alwadvancerent,
    t1.grcadvbaserate,
    t1.grcadvmargin,
    t1.grcadvpftrate,
    t1.rpyadvbaserate,
    t1.rpyadvmargin,
    t1.rpyadvpftrate,
    t1.rolloverfinance,
    t1.rolloverfrq,
    t1.downpayrule,
    t59.rulecode AS downpayruledesc,
    t1.finsusptrigger,
    t1.finsuspremarks,
    t1.alwmultipartydisb,
    t1.collateraltype,
    t1.tdsapplicable,
    t1.manualschedule,
    t1.applygrcpricing,
    t1.grcpricingmethod,
    t1.applyrpypricing,
    t1.rpypricingmethod,
    t1.rpyhierarchy,
    t67.rulecode AS grcpricingmethoddesc,
    t68.rulecode AS rpypricingmethoddesc,
    t1.droplineod,
    t1.droppingmethod,
    t1.ratechganyday,
    t1.finrepaypftonfrq,
    t1.alwbpi,
    t1.bpitreatment,
    t1.pftdueschon,
    t1.planemihalw,
    t1.planemihmethod,
    t1.planemihmaxperyear,
    t1.planemihmax,
    t1.planemihlockperiod,
    t1.planemicpz,
    t1.unplanemihlockperiod,
    t1.unplanemicpz,
    t1.reagecpz,
    t1.fddlockperiod,
    t1.alwdrpymethods,
    t1.maxunplannedemi,
    t1.maxreageholidays,
    t1.roundingmode,
    t1.roundingtarget,
    t1.frequencydays,
    t1.quickdisb,
    t1.alwreage,
    t1.alwunplanemiholiday,
    t1.alwmaxdisbcheckreq,
    t1.fintypedesc AS lovdescpromofintypedesc,
    t1.profitcenterid,
    t69.profitcentercode,
    t69.profitcenterdesc,
    t1.productcategory,
    t2.productdesc AS fincategorydesc,
    t1.developerfinance,
    t1.costoffunds,
    t1.chequecapturereq,
    t1.finltvcheck,
    t1.partiallysecured,
    t1.alwadvemi,
    t1.advemiminterms,
    t1.advemimaxterms,
    t1.advemidftterms,
    t1.advemischdmthd,
    t1.bpipftdaysbasis,
    t1.eligibilitymethods,
    t1.alwhybridrate,
    t1.fixedratetenor,
    t1.odmincapamount
   FROM rmtfinancetypes t1
     LEFT JOIN bmtproduct t2 ON t1.fincategory = t2.productcode
     LEFT JOIN rmtaccounttypes t4 ON t1.fincontingentactype = t4.actype
     LEFT JOIN rmtaccounttypes t38 ON t1.finbankcontingentactype = t38.actype
     LEFT JOIN rmtaccounttypes t39 ON t1.finprovisionactype = t39.actype
     LEFT JOIN rmtaccounttypes t5 ON t1.finactype = t5.actype
     LEFT JOIN rmtaccounttypes t31 ON t1.pftpayactype = t31.actype
     LEFT JOIN smtdivisiondetail t48 ON t1.findivision = t48.divisioncode
     LEFT JOIN rmtaccounttypes t49 ON t1.finsuspactype = t49.actype
     LEFT JOIN rules t59 ON t1.downpayrule = t59.ruleid
     LEFT JOIN rules t67 ON t1.grcpricingmethod = t67.ruleid
     LEFT JOIN rules t68 ON t1.rpypricingmethod = t68.ruleid
     LEFT JOIN profitcenters t69 ON t69.profitcenterid = t1.profitcenterid
</createView>
</changeSet>
<changeSet id="7_Post.1" author="Aditya" dbms="postgresql">
	<sql>
		select deps_restore_dependencies('plf','rmtfinancetypes_aview');
	</sql>
</changeSet>

<changeSet id="8" author="swami.v">
<sql>
Insert into templatefields (module, field, fielddesc, fieldformat) values ('PVR','vd_dealerName','Name','A');
Insert into templatefields (module, field, fielddesc, fieldformat) values ('PVR','vd_email','e-Mail','A');
Insert into templatefields (module, field, fielddesc, fieldformat) values ('PVR','vd_dealerTelephone','Telephone','A');
Insert into templatefields (module, field, fielddesc, fieldformat)values ('PVR','vd_dealerFax','Fax','A');
Insert into templatefields (module, field, fielddesc, fieldformat) values ('PVR','vd_dealerAddress1','Address1','A');
Insert into templatefields (module, field, fielddesc, fieldformat) values ('PVR','vd_dealerAddress2','Address2','A');
Insert into templatefields (module, field, fielddesc, fieldformat) values ('PVR','vd_dealerAddress3','Address3','A');
Insert into templatefields (module, field, fielddesc, fieldformat) values ('PVR','vd_lovDescCountry','Country','A');
Insert into templatefields (module, field, fielddesc, fieldformat) values ('PVR','vd_lovDescProvince','Province/State','A');
Insert into templatefields (module, field, fielddesc, fieldformat) values ('PVR','vd_lovDescCity','City','A');
Insert into templatefields (module, field, fielddesc, fieldformat) values ('PVR','vd_pOBox','pOBox','A');
Insert into templatefields (module, field, fielddesc, fieldformat) values ('PVR','vd_zipCode','PIN/ZIP Code','A');
Insert into templatefields (module, field, fielddesc, fieldformat) values ('PVR','vd_active','Active','A');
Insert into templatefields (module, field, fielddesc, fieldformat) values ('PVR','vd_code','Code','A');
Insert into templatefields (module, field, fielddesc, fieldformat) values ('PVR','vd_panNumber','PAN Number','A');
Insert into templatefields (module, field, fielddesc, fieldformat) values ('PVR','vd_uidNumber','Aadhar Number','A');
Insert into templatefields (module, field, fielddesc, fieldformat) values ('PVR','vd_taxNumber','GST Number','A');
Insert into templatefields (module, field, fielddesc, fieldformat) values ('PVR','vd_fromprovinceName','From Province/Stater','A');
Insert into templatefields (module, field, fielddesc, fieldformat) values ('PVR','vd_toprovinceName','To Province/State','A');
Insert into templatefields (module, field, fielddesc, fieldformat) values ('PVR','vd_accountNo','Account Number','A');
Insert into templatefields (module, field, fielddesc, fieldformat) values ('PVR','vd_accountType','Account Type','A');
Insert into templatefields (module, field, fielddesc, fieldformat) values ('PVR','vd_bankBranchCodeName','Branch Name','A');
Insert into templatefields (module, field, fielddesc, fieldformat) values ('PVR','vd_bankName','Bank Name','A');
Insert into templatefields (module, field, fielddesc, fieldformat) values ('PVR','vd_branchIFSCCode','Branch IFSC Code','A');
Insert into templatefields (module, field, fielddesc, fieldformat) values ('PVR','vd_branchMICRCode','Branch MICR Code','A');
Insert into templatefields (module, field, fielddesc, fieldformat) values ('PVR','vd_branchCity','Branch City','A');
</sql>
</changeSet>

<changeSet id="9" author="Kranthi Kumar K">
<sql>
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'finAmount', 'Finance Amount', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'nextRepayDate', 'NextRepayDate', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'ct_custAddrCountry', 'custAddrCountry', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'numberOfTerms', 'numberOfTerms', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'repayProfitRate', 'repayProfitRate', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'finRepaymentAmount', 'finRepaymentAmount', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'repayFrq', 'RepayFrq', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'finStartDate', 'FinStartDate', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'ct_custRO1', 'Source', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'custAddrStreet', 'custAddrStreet', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'custAddrCity', 'custAddrCity', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'custAddrProvince', 'custAddrProvince', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'custAddrHNbr', 'custAddrHNbr', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'custAddrLine1', 'custAddrLine1', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'ct_repayProfitRate', 'RepayProfitRate', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'custAddrLine2', 'custAddrLine2', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'firstRepay', 'FirstRepay', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'curReducingRate', 'CurReducingRate', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'custAddrFlatNo', 'custAddrFlatNo', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'schd_calculatedRate', 'CalculatedRate', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'schd_repayAmount', 'RepayAmount', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'finReference', 'Loan Reference Number', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'finBranchContact', 'Branch Contact Number', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'valueDate', 'Receipt Value Date', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'amount', 'Receipt Amount', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'custCoreBank', 'Cust Core Bank ID', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'finCurrAssetValue', 'FinCurrent Asset Value', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'finAssetValue', 'Fin Asset Value', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'repaymentFrequency', 'Repayment Frequency', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'firstDueDate', 'First Due Date Frequency', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'maturityDate', 'Maturity Date', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'graceBaseRate', 'Grace BaseRate', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'graceSpecialRate', 'Grace SpecialRate', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'repayBaseRate', 'Repay BaseRate', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'repaySpecialRate', 'Repay SpecialRate', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'repayMargin', 'Repay Margin', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'finBranch', 'Fin Branch', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'finCcy', 'FinCcy', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'finDivision', 'FinDivision', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'accountsOfficerDesc', 'Accounts Officer Desc', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'dsaCode', 'DSA Code', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'dsaDesc', 'DSA Desc', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'DMACodeDesc', 'DMA CodeDesc', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'totalProfit', 'Total Profit', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'lastRepay', 'Last Repay', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'custAddrDistrict', 'custAddrDistrict', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'custAddrPincode', 'custAddrPincode', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'custMobileNumber', 'Customer Mobile Number', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'custEmailId', 'Customer Email Id', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'receiptAmount', 'Receipt Amount', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'custFlatNbr', 'CustFlatNbr', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'custPOBox', 'CustPOBox','A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'ct_custShrtName', 'Customer Name','A');
</sql>
</changeSet>
	
<changeSet id="10" author="aditya">
<createView viewName="rmtfinancetypes_orgview" replaceIfExists="true">
 SELECT t1.fintype,
    t1.fincategory,
    t1.fintypedesc,
    t1.finccy,
    t1.findayscaltype,
    t1.finactype,
    t1.fincontingentactype,
    t1.finisgenref,
    t1.finmaxamount,
    t1.finminamount,
    t1.finisopennewfinac,
    t1.finisalwmd,
    t1.finschdmthd,
    t1.finisalwgrace,
    t1.equalrepayment,
    t1.finratetype,
    t1.finbaserate,
    t1.finsplrate,
    t1.finintrate,
    t1.finminrate,
    t1.finmaxrate,
    t1.findftintfrq,
    t1.finisintcpz,
    t1.fincpzfrq,
    t1.finisrvwalw,
    t1.finrvwfrq,
    t1.fingrcratetype,
    t1.fingrcbaserate,
    t1.fingrcsplrate,
    t1.fingrcintrate,
    t1.fingrcminrate,
    t1.fingrcmaxrate,
    t1.fingrcdftintfrq,
    t1.fingrcisintcpz,
    t1.fingrccpzfrq,
    t1.fingrcisrvwalw,
    t1.fingrcrvwfrq,
    t1.finminterm,
    t1.finmaxterm,
    t1.findftterms,
    t1.finrpyfrq,
    t1.finrepaymethod,
    t1.finisalwdifferment,
    t1.finmaxdifferment,
    t1.finisactive,
    t1.stepfinance,
    t1.steppingmandatory,
    t1.alwmanualsteps,
    t1.alwdsteppolicies,
    t1.dftsteppolicy,
    t1.finisdwpayrequired,
    t1.finrvwrateapplfor,
    t1.finalwratechangeanydate,
    t1.finisintcpzatgrcend,
    t1.finschcalcodeonrvw,
    t1.alwplandeferment,
    t1.plandefercount,
    t1.pftpayactype,
    t1.finisopenpftpayacc,
    t1.finisalwgrcrepay,
    t1.fingrcschdmthd,
    t1.fingrcmargin,
    t1.finmargin,
    t1.fincommitmentreq,
    t1.fincollateralreq,
    t1.findepreciationreq,
    t1.findepreciationfrq,
    t1.finbankcontingentactype,
    t1.finprovisionactype,
    t1.allowriainvestment,
    t1.overridelimit,
    t1.limitrequired,
    t1.fincommitmentovrride,
    t1.fincollateralovrride,
    t1.finrepaypftonfrq,
    t1.finpftunchanged,
    t1.applyodpenalty,
    t1.odincgrcdays,
    t1.odchargetype,
    t1.odgracedays,
    t1.odchargecalon,
    t1.odchargeamtorperc,
    t1.odallowwaiver,
    t1.odmaxwaiverperc,
    t1.findivision,
    t3.divisioncodedesc AS lovdescfindivisionname,
    t1.finsuspactype,
    t1.product,
    t1.startdate,
    t1.enddate,
    t1.allowdownpaypgm,
    t1.fintypedesc AS lovdescpromofintypedesc,
    t1.remarks,
    t4.policydesc AS lovdescdftsteppolicyname,
    t1.pastduepftcalmthd,
    t1.pastduepftmargin,
    t1.alwadvancerent,
    t1.grcadvbaserate,
    t1.grcadvmargin,
    t1.grcadvpftrate,
    t1.rpyadvbaserate,
    t1.rpyadvmargin,
    t1.rpyadvpftrate,
    t1.rolloverfinance,
    t1.rolloverfrq,
    t1.downpayrule,
    t1.alwmultipartydisb,
    t1.collateraltype,
    t1.tdsapplicable,
    t5.rulecode AS downpayruledesc,
    t1.applygrcpricing,
    t1.applyrpypricing,
    t6.rulecode AS grcpricingmethoddesc,
    t7.rulecode AS rpypricingmethoddesc,
    t1.droplineod,
    t1.droppingmethod,
    t1.ratechganyday,
    t4.steptype AS dftsteppolicytype,
    t1.manualschedule,
    t1.alwbpi,
    t1.bpitreatment,
    t1.pftdueschon,
    t1.planemihalw,
    t1.planemihmethod,
    t1.planemihmaxperyear,
    t1.planemihmax,
    t1.planemihlockperiod,
    t1.planemicpz,
    t1.unplanemihlockperiod,
    t1.unplanemicpz,
    t1.reagecpz,
    t1.fddlockperiod,
    t1.alwdrpymethods,
    t1.maxunplannedemi,
    t1.maxreageholidays,
    t1.roundingmode,
    t1.roundingtarget,
    t1.frequencydays,
    t1.quickdisb,
    t1.alwreage,
    t1.alwunplanemiholiday,
    t1.alwmaxdisbcheckreq,
    t1.productcategory,
    t1.rpyhierarchy,
    t1.developerfinance,
    t3.entitycode AS lovdescentitycode,
    t8.entitydesc AS lovdescentitydesc,
    t1.costoffunds,
    t1.chequecapturereq,
    t1.finltvcheck,
    t1.partiallysecured,
    t1.alwadvemi,
    t1.advemiminterms,
    t1.advemimaxterms,
    t1.advemidftterms,
    t1.advemischdmthd,
    t1.bpipftdaysbasis,
    t1.eligibilitymethods,
    t1.alwhybridrate,
    t1.fixedratetenor,
    t1.odmincapamount
   FROM rmtfinancetypes t1
     JOIN smtdivisiondetail t3 ON t1.findivision = t3.divisioncode
     LEFT JOIN steppolicyheader t4 ON t1.dftsteppolicy = t4.policycode
     LEFT JOIN rules t5 ON t1.downpayrule = t5.ruleid
     LEFT JOIN rules t6 ON t1.grcpricingmethod = t6.ruleid
     LEFT JOIN rules t7 ON t1.rpypricingmethod = t7.ruleid
     LEFT JOIN entity t8 ON t3.entitycode = t8.entitycode
</createView>
</changeSet>
<changeSet id="11" author="Dheerendra">
		<addColumn tableName="collection_financedetails">
			<column name="RepayMethod" type="varchar(8)" />
		</addColumn>
	</changeSet>
	
<changeSet id="11" author="Siva">
		<addColumn tableName="RejectDocumentDetails">
			<column name="DocOriginal" type="boolean" defaultValueBoolean="false"/>
		</addColumn>
</changeSet>
	
	<changeSet id="12" author="Kranthi Kumar.K">
	<sql>
	<![CDATA[
		delete from templatefields where field='ct_custShrtName';
		delete from templatefields where field='repayProfitRate';
		delete from templatefields where field='ct_repayProfitRate';
		delete from templatefields where field='schd_repayAmount';
		delete from templatefields where field='ct_custAddrCountry';
		delete from templatefields where field='ct_repayProfitRate';
		delete from templatefields where field='ct_custRO1';
		
		
		INSERT INTO templatefields(module, field, fielddesc, fieldformat) VALUES ('FIN', 'custShrtName', 'Customer Name', 'A');
		INSERT INTO templatefields(module, field, fielddesc, fieldformat) VALUES ('FIN', 'repayProfitRate', 'Repay ProfitRate', 'A');
		INSERT INTO templatefields(module, field, fielddesc, fieldformat) VALUES ('FIN', 'schd_repayAmount', 'Schd RepayAmount', 'A');
		INSERT INTO templatefields(module, field, fielddesc, fieldformat) VALUES ('FIN', 'custAddrCountry', 'custAddrCountry', 'A');
		INSERT INTO templatefields(module, field, fielddesc, fieldformat) VALUES ('FIN', 'custRO1', 'Source', 'A');
	]]>
	</sql>
</changeSet>
	
<changeSet id="13" author="Siva">
	<sql>
		UPDATE finscheduledetails SET RecalLock = 0 WHERE RecalLock IS NULL;
		UPDATE finscheduledetails_log SET RecalLock = 0 WHERE RecalLock IS NULL;
		UPDATE finscheduledetails_pa SET RecalLock = 0 WHERE RecalLock IS NULL;
		UPDATE finscheduledetails_temp SET RecalLock = 0 WHERE RecalLock IS NULL;
		UPDATE rejectfinscheduledetails SET RecalLock = 0 WHERE RecalLock IS NULL;
		UPDATE wiffinscheduledetails SET RecalLock = 0 WHERE RecalLock IS NULL;
		UPDATE wiffinscheduledetails_temp SET RecalLock = 0 WHERE RecalLock IS NULL;
	</sql>
</changeSet>
	
<changeSet id="14" author="aditya">
	<sql>
	   update reportlist set fieldtype='String,int,BigDecimal' where code='ChequeHeader';
	</sql>
</changeSet>

<changeSet  id="17" author="kranthikumar.k">
<sql>
<![CDATA[
		INSERT INTO templatefields(module, field, fielddesc, fieldformat) VALUES ('FIN', 'custShrtName', 'Customer Name', 'A');
		INSERT INTO templatefields(module, field, fielddesc, fieldformat) VALUES ('FIN', 'repayProfitRate', 'Repay ProfitRate', 'A');
		INSERT INTO templatefields(module, field, fielddesc, fieldformat) VALUES ('FIN', 'schd_repayAmount', 'Schd RepayAmount', 'A');
		INSERT INTO templatefields(module, field, fielddesc, fieldformat) VALUES ('FIN', 'custAddrCountry', 'custAddrCountry', 'A');
		INSERT INTO templatefields(module, field, fielddesc, fieldformat) VALUES ('FIN', 'custRO1', 'Source', 'A');
]]>
</sql>
</changeSet>

<changeSet id="18" author="aditya">
<sql>
<![CDATA[
       UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS);
       UPDATE SEQSECGROUPS SET SEQNO= (SELECT MAX(GRPID) FROM SECGROUPS);
       UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);
       UPDATE SEQSECROLEGROUPS SET SEQNO= (SELECT MAX(Rolegrpid) FROM SECROLEGROUPS);

       INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2,           'button_BulkRateChangeList_NewBulkRateChange','BulkRateChngList',0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0; 
       INSERT INTO SECGROUPS SELECT (SELECT MAX(GRPID)+1 FROM SECGROUPS), 'BULKRATE_MAKER', 'Bulk Rate Maker', 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0 FROM SEQSECGROUPS WHERE 0=0;
       INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='BULKRATE_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_BulkRateChangeList_NewBulkRateChange'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
       INSERT INTO SecRoleGroups values((Select MAX(RoleGrpID)+1 From SecRoleGroups),(Select GrpId  From SecGroups Where GrpCode='BULKRATE_MAKER'), (Select   RoleID  From SecRoles Where RoleCd='CANCEL_DISB_MAKER'),0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0); 

       UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS);
       UPDATE SEQSECGROUPS SET SEQNO= (SELECT MAX(GRPID) FROM SECGROUPS);
       UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);
       UPDATE SEQSECROLEGROUPS SET SEQNO= (SELECT MAX(Rolegrpid) FROM SECROLEGROUPS);
]]> 
</sql>
</changeSet>

<changeSet id="19" author="aditya">
<sql>
<![CDATA[
       UPDATE SEQSecOperationRoles SET SEQNO= (SELECT MAX(OprRoleID) FROM SecOperationRoles);	
       
       INSERT INTO SecOperationRoles values((Select MAX(OprRoleID)+1 From SecOperationRoles),(Select OprId  From SecOperations Where OprCode='ADMIN'), (Select  RoleID  From SecRoles Where RoleCd='CANCEL_DISB_MAKER'),0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0); 
       
       UPDATE SEQSecOperationRoles SET SEQNO= (SELECT MAX(OprRoleID) FROM SecOperationRoles);
]]> 
</sql>
</changeSet>
	<changeSet id="20" author="saikrishna.p">
		<comment>Security related scripts required for Queue Assignment.</comment>
		<sql>
		<![CDATA[
			-- Groups
			insert into SecGroups(GrpID, GrpCode, GrpDesc, Version, LastMntBy, LastMntOn, RecordStatus, WorkflowId)
				values ((select MAX(GrpID) + 1 from SecGroups), 'QUEUE_ASSIGNMENT_MAKER', 'Queue Assignment Maker', 1
					, 1000, current_timestamp, 'Approved', 0);
			
			update SeqSecGroups set SeqNo = (select MAX(GrpID) from SecGroups);
			
			-- Group Rights
			insert into SecGroupRights (GrpRightID, GrpID, RightID, Version, LastMntBy, LastMntOn, RecordStatus
					, WorkflowId, AccessType)
				values ((select MAX(GrpRightID) + 1 from SecGroupRights)
					, (select GrpID from SecGroups where GrpCode = 'QUEUE_ASSIGNMENT_MAKER')
					, (select RightId from SecRights where RightName = 'menuItem_Reassignment')
					, 1, 1000, current_timestamp, 'Approved', 1, 1);
			insert into SecGroupRights (GrpRightID, GrpID, RightID, Version, LastMntBy, LastMntOn, RecordStatus
					, WorkflowId, AccessType)
				values ((select MAX(GrpRightID) + 1 from SecGroupRights)
					, (select GrpID from SecGroups where GrpCode = 'QUEUE_ASSIGNMENT_MAKER')
					, (select RightId from SecRights where RightName = 'button_AssignmentDialog_btnSave')
					, 1, 1000, current_timestamp, 'Approved', 1, 1);
			
			update SeqSecGroupRights set SeqNo = (select MAX(GrpRightID) from SecGroupRights);		
		]]>
		</sql>
	</changeSet>
	<changeSet id="20.1" author="saikrishna.p">
		<comment>Security related scripts required for Queue Assignment - Contd...</comment>
		<sql>
		<![CDATA[
			-- Groups
			insert into SecGroups(GrpID, GrpCode, GrpDesc, Version, LastMntBy, LastMntOn, RecordStatus, WorkflowId)
				values ((select MAX(GrpID) + 1 from SecGroups), 'QUEUE_ASSIGNMENT_APPROVER', 'Queue Assignment Approver', 1
					, 1000, current_timestamp, 'Approved', 0);
			
			update SeqSecGroups set SeqNo = (select MAX(GrpID) from SecGroups);
			
			-- Group Rights
			insert into SecGroupRights (GrpRightID, GrpID, RightID, Version, LastMntBy, LastMntOn, RecordStatus
					, WorkflowId, AccessType)
				values ((select MAX(GrpRightID) + 1 from SecGroupRights)
					, (select GrpID from SecGroups where GrpCode = 'QUEUE_ASSIGNMENT_APPROVER')
					, (select RightId from SecRights where RightName = 'menuItem_Reassignment')
					, 1, 1000, current_timestamp, 'Approved', 1, 1);
			insert into SecGroupRights (GrpRightID, GrpID, RightID, Version, LastMntBy, LastMntOn, RecordStatus
					, WorkflowId, AccessType)
				values ((select MAX(GrpRightID) + 1 from SecGroupRights)
					, (select GrpID from SecGroups where GrpCode = 'QUEUE_ASSIGNMENT_APPROVER')
					, (select RightId from SecRights where RightName = 'button_AssignmentDialog_btnSave')
					, 1, 1000, current_timestamp, 'Approved', 1, 1);
			
			update SeqSecGroupRights set SeqNo = (select MAX(GrpRightID) from SecGroupRights);		
		]]>
		</sql>
	</changeSet>

<changeSet id="20" author="Sriklanth">
	<sql>
	<![CDATA[
		UPDATE ErrorDetails set message='Customer {0} found' where code='90343';
		]]> 
	</sql>
	</changeSet>

<changeSet id="20" author="aditya">
<sql>
<![CDATA[
       update reportlist set code='PromotionWorkFlow' where module='PromotionWorkFlow';
]]> 
</sql>
</changeSet>

<changeSet id="21" author="aditya">
<comment>Account Type Groups Print Button Query</comment>
<sql>
<![CDATA[
       INSERT INTO REPORTLIST VALUES ('AccountTypeGroup', 'AccountTypeGroup', 'listheader_GroupCode,listheader_AcctTypeLevel,listheader_ParentGroup', 'groupCode,acctTypeLevel,parentGroup', 'String,int,String', '', 'ReportList03', 'Account Type Groups', 'Solution Factory', 3, 1001, CURRENT_TIMESTAMP, 'Approved', '', '', '', '', '', 0, 0);
]]> 
</sql>
</changeSet>
<changeSet id="22" author="kranthikumar.k">
<sql>
<![CDATA[
		INSERT INTO templatefields(module, field, fielddesc, fieldformat) VALUES ('FIN','bounceDate','Bounce Date', 'A');
		INSERT INTO templatefields(module, field, fielddesc, fieldformat) VALUES ('FIN','bounceReason','Bounce Reason', 'A');
		INSERT INTO templatefields(module, field, fielddesc, fieldformat) VALUES ('FIN','cancellationReason','Cancellation Reason', 'A');
]]>
</sql>
</changeSet>

<changeSet id="25" author="somasekhar">
 <dropView viewName="trial_balance_report_file_view"/>
</changeSet>

<changeSet id="25.1" author="somasekhar">
 <dropView viewName="trial_balance_consolidate_view"/>
</changeSet>

<changeSet id="26" author="somasekhar">
 <dropColumn tableName="TRIAL_BALANCE_REPORT_FILE" columnName="debitamount"/>
 <dropColumn tableName="TRIAL_BALANCE_REPORT_FILE" columnName="creditamount"/>
</changeSet>

<changeSet id="27" author="somasekhar">
  <addColumn tableName="TRIAL_BALANCE_REPORT_FILE">
  <column name="debitamount" type="bigint"/>
  <column name="creditamount" type="bigint"/>
  
  </addColumn>
</changeSet>

<changeSet id="28" author="somasekhar">
 <createView viewName="trial_balance_report_file_view">
 SELECT tbrf.id,
    tbrf.country,
    tbrf.province,
    rmt.cpprovincename AS state,
    tbrf.actypegrpid,
    tbrf.account,
    tbrf.hostaccount,
    tbrf.description,
    tbrf.openingbal,
    tbrf.openingbaltype,
    tbrf.debitamount,
    tbrf.creditamount,
    tbrf.closingbal,
    tbrf.closingbaltype,
    tbrf.fintype AS productflag
   FROM trial_balance_report_file tbrf
     LEFT JOIN rmtcountryvsprovince rmt ON rmt.cpprovince = tbrf.province
  
  
 </createView>
</changeSet>
<changeSet id="29" author="somasekhar">
 <createView viewName="trial_balance_consolidate_view">
 SELECT tbrf.id,
    tbrf.actypegrpid,
    tbrf.account,
    tbrf.hostaccount,
    tbrf.description,
    tbrf.openingbal,
    tbrf.openingbaltype,
    tbrf.debitamount,
    tbrf.creditamount,
    tbrf.closingbal,
    tbrf.closingbaltype,
    tbrf.fintype
   FROM trial_balance_report_file tbrf
     LEFT JOIN rmtcountryvsprovince rmt ON rmt.cpprovince= tbrf.province
  
  
 </createView>
</changeSet>

	<changeSet id="31" author="somasekhar">
	 <createTable tableName="TRANSACTION_SUMMARY_REPORT">
	  <column name="ENTITY" type="varchar(8)"/>
	  <column name="LINK" type="int"/>
	  <column name="BLDAT" type="datetime"/>
	  <column name="BLART" type="varchar(10)"/>
	  <column name="BUKRS" type="varchar(10)"/>
	  <column name="BUDAT" type="datetime"/>
	  <column name="MONAT" type="int"/>
	  <column name="CURRCY" type="varchar(20)"/>
	  <column name="XBLNR" type="varchar(50)"/>
	  <column name="BKTXT" type="varchar(50)"/>
	 </createTable>
	</changeSet>
	
	<changeSet id="32" author="somasekhar">
	 <createView replaceIfExists="true" viewName="TRIAL_BALANCE_CONSOLIDATE_VIEW">
		SELECT ID,
		ACTYPEGRPID,
		TBRF.ACCOUNT,
		TBRF.HOSTACCOUNT,
		DESCRIPTION,
		OPENINGBAL,
		OPENINGBALTYPE,
		DEBITAMOUNT,
		CREDITAMOUNT,
		CLOSINGBAL,
		CLOSINGBALTYPE,
		FINTYPE
		FROM   TRIAL_BALANCE_REPORT_FILE TBRF LEFT JOIN
		RMTCOUNTRYVSPROVINCE RMT ON RMT.CPPROVINCE = TBRF.PROVINCE
		
	 </createView>
	</changeSet>
		<changeSet id="33" author="somasekhar">
		 <createView replaceIfExists="true" viewName="TRIAL_BALANCE_REPORT_FILE_VIEW">
		 SELECT 	ID,COUNTRY,
		PROVINCE,
		CPPROVINCENAME AS STATE,
		ACTYPEGRPID,
		TBRF.ACCOUNT,
		TBRF.HOSTACCOUNT,
		DESCRIPTION,
		OPENINGBAL,
		OPENINGBALTYPE,
		DEBITAMOUNT,
		CREDITAMOUNT,
		CLOSINGBAL,
		CLOSINGBALTYPE,
		FINTYPE AS PRODUCTFLAG
		FROM 	TRIAL_BALANCE_REPORT_FILE TBRF LEFT JOIN
		RMTCOUNTRYVSPROVINCE RMT ON RMT.CPPROVINCE = TBRF.PROVINCE
		
		 
		 </createView>
		</changeSet>
		
	<changeSet id="34" author="somasekhar">
	 <createView viewName="TRANSACTION_DETAIL_REPORT_VIEW">
	 SELECT ID, DR.ENTITY, DR.LINK, BSCHL, HKONT, UMSKZ, WRBTR/CCYMINORCCYUNITS WRBTR,GSBER, BUPLA, KOSTL, PRCTR, ZUONR, SGTXT
			FROM TRANSACTION_DETAIL_REPORT DR
			INNER JOIN TRANSACTION_SUMMARY_REPORT SR ON SR.LINK = DR.LINK
			INNER JOIN RMTCURRENCIES CCY ON CCY.CCYCODE = SR.CURRCY
	 </createView>
	</changeSet>
	
	<changeSet id="35" author="somasekhar">
	 <sql>
	 		
			Insert into DATA_ENGINE_CONFIG (ID,NAME,DESCRIPTION,PARSER,WORKSHEET,TEXTQUALIFIER,ROWDELIMITER,COLUMNDELIMITER,STARTINGROW,SKIPHEADERROW,FIELDNAMES,HEADER,TRAILER,UPLOADLOCATION,UPLOADPATH,FILEPREFIXNAME,FILEEXTENSION,FILESEQUENCENO,LASTPROCESSEDON,FILENAMEFORMAT,CRONEXPRESSION,NOTIFICATIONSTATUSEMAIL,POSTEVENT,BACKUPFILE,ACTIVE) values ((select max(id) from DATA_ENGINE_CONFIG)+1,'GL_TRANSACTION_EXPORT','Transaction Detail Report',2,'','','',',',0,0,'','LINK, BSCHL, HKONT, UMSKZ, WRBTR, GSBER, BUPLA, KOSTL, PRCTR, ZUONR, SGTXT', '','A','/opt/PFF/SAPGL','${ENTITY_CODE}','.csv',0,current_timestamp,'','','0','MOVE_TO_S3_BUCKET',1,1);
			Insert into DATA_ENGINE_CONFIG (ID,NAME,DESCRIPTION,PARSER,WORKSHEET,TEXTQUALIFIER,ROWDELIMITER,COLUMNDELIMITER,STARTINGROW,SKIPHEADERROW,FIELDNAMES,HEADER,TRAILER,UPLOADLOCATION,UPLOADPATH,FILEPREFIXNAME,FILEEXTENSION,FILESEQUENCENO,LASTPROCESSEDON,FILENAMEFORMAT,CRONEXPRESSION,NOTIFICATIONSTATUSEMAIL,POSTEVENT,BACKUPFILE,ACTIVE) values ((select max(id) from DATA_ENGINE_CONFIG)+1,'GL_TRANSACTION_SUMMARY_EXPORT','Transaction Summary Report',2,'','','',',',0,0,'','LINK, BLDAT, BLART, BUKRS, BUDAT, MONAT, CURRCY, XBLNR, BKTXT', '','A','/opt/PFF/SAPGL','${ENTITY_CODE}','.csv',0,current_timestamp,'','','0','MOVE_TO_S3_BUCKET',1,1);
			Insert into DATA_ENGINE_CONFIG (ID,NAME,DESCRIPTION,PARSER,WORKSHEET,TEXTQUALIFIER,ROWDELIMITER,COLUMNDELIMITER,STARTINGROW,SKIPHEADERROW,FIELDNAMES,HEADER,TRAILER,UPLOADLOCATION,UPLOADPATH,FILEPREFIXNAME,FILEEXTENSION,FILESEQUENCENO,LASTPROCESSEDON,FILENAMEFORMAT,CRONEXPRESSION,NOTIFICATIONSTATUSEMAIL,POSTEVENT,BACKUPFILE,ACTIVE) values ((select max(id) from DATA_ENGINE_CONFIG)+1,'TRIAL_BALANCE_EXPORT_CONSOLIDATE','Trial balance consolidate report',2,'','','',',',0,0, '','Row:{, ${COMPANY_NAME}}Row:{, ${REPORT_NAME}}Row:{, ${TRANSACTION_DURATION}}Row:{Currency: ${CURRENCY}Row:{PARENT GROUP,PLF LEDGER, SAP GL,DESCRIPTION,OPENING BALANCE,CR/DR,DEBIT AMOUNT,CREDIT AMOUNT,CLOSING BALANCE,CR/DR,LOAN TYPE}', '','A','/opt/PFF','${ENTITY_CODE}','.csv',0,current_timestamp,'${START_DATE}, _${END_DATE},_${HEADER_ID}','','0','MOVE_TO_S3_BUCKET',1,1);
			Insert into DATA_ENGINE_CONFIG (ID,NAME,DESCRIPTION,PARSER,WORKSHEET,TEXTQUALIFIER,ROWDELIMITER,COLUMNDELIMITER,STARTINGROW,SKIPHEADERROW,FIELDNAMES,HEADER,TRAILER,UPLOADLOCATION,UPLOADPATH,FILEPREFIXNAME,FILEEXTENSION,FILESEQUENCENO,LASTPROCESSEDON,FILENAMEFORMAT,CRONEXPRESSION,NOTIFICATIONSTATUSEMAIL,POSTEVENT,BACKUPFILE,ACTIVE) values ((select max(id) from DATA_ENGINE_CONFIG)+1,'TRIAL_BALANCE_EXPORT_STATE','SAP GL Trail Balance Report',2,'','','',',',0,0, '','Row:{, ${COMPANY_NAME}}Row:{, ${REPORT_NAME}}Row:{, ${TRANSACTION_DURATION}}Row:{Currency: ${CURRENCY}Row:{STATE,PARENT GROUP,PLF LEDGER,SAP GL,DESCRIPTION,OPENING BALANCE,CR/DR,DEBIT AMOUNT,CREDIT AMOUNT,CLOSING BALANCE,CR/DR,LOAN TYPE}', '','A','/opt/PFF/SAPGL','${ENTITY_CODE}','.csv',0,current_timestamp,'${START_DATE},_${END_DATE},_${HEADER_ID}','','0','MOVE_TO_S3_BUCKET',1,1);
			
			
			
			
			Insert into DATA_ENGINE_TABLE (ID,CONFIGID,NAME,OPERATION,KEYFIELDS,FILTER,STATUSUPDATE,SKIPROWS,IDENTIFIER,DESCRIPTION,STARTINDEX,ENDINDEX,RECORDLENGTH,MULTIROW,HEADERTABLE) values ((select max(id) from DATA_ENGINE_TABLE)+1,(select id from DATA_ENGINE_CONFIg where name ='GL_TRANSACTION_EXPORT'),'TRANSACTION_DETAIL_REPORT_VIEW',0,'ID','ENTITY=:ENTITY','','','','','','',0,0,0);
			Insert into DATA_ENGINE_TABLE (ID,CONFIGID,NAME,OPERATION,KEYFIELDS,FILTER,STATUSUPDATE,SKIPROWS,IDENTIFIER,DESCRIPTION,STARTINDEX,ENDINDEX,RECORDLENGTH,MULTIROW,HEADERTABLE) values ((select max(id) from DATA_ENGINE_TABLE)+1,(select id from DATA_ENGINE_CONFIg where name ='GL_TRANSACTION_SUMMARY_EXPORT'),'TRANSACTION_SUMMARY_REPORT',0,'ID','ENTITY=:ENTITY','','','','','','',0,0,0);
			Insert into DATA_ENGINE_TABLE (ID,CONFIGID,NAME,OPERATION,KEYFIELDS,FILTER,STATUSUPDATE,SKIPROWS,IDENTIFIER,DESCRIPTION,STARTINDEX,ENDINDEX,RECORDLENGTH,MULTIROW,HEADERTABLE) values ((select max(id) from DATA_ENGINE_TABLE)+1,(select id from DATA_ENGINE_CONFIg where name ='TRIAL_BALANCE_EXPORT_CONSOLIDATE'),'TRIAL_BALANCE_CONSOLIDATE_VIEW',0,'HEADERID','','UPDATE TRIAL_BALANCE_HEADER SET FILENAME = :FILE_NAME WHERE ID = :ID AND DIMENSION = :DIMENSION','','','','','',0,0,0);
			Insert into DATA_ENGINE_TABLE (ID,CONFIGID,NAME,OPERATION,KEYFIELDS,FILTER,STATUSUPDATE,SKIPROWS,IDENTIFIER,DESCRIPTION,STARTINDEX,ENDINDEX,RECORDLENGTH,MULTIROW,HEADERTABLE) values ((select max(id) from DATA_ENGINE_TABLE)+1,(select id from DATA_ENGINE_CONFIg where name ='TRIAL_BALANCE_EXPORT_STATE'),'TRIAL_BALANCE_REPORT_FILE_VIEW',0,'HEADERID','','UPDATE TRIAL_BALANCE_HEADER SET FILENAME = :FILE_NAME WHERE ID = :ID AND DIMENSION = :DIMENSION','','','','','',0,0,0);
			
			
			
			
			Insert into DATA_ENGINE_COLUMN (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id) from DATA_ENGINE_COLUMN)+1,(select id from data_engine_table where CONFIGID in (select id from DATA_ENGINE_CONFIg where name ='TRIAL_BALANCE_EXPORT_STATE')),'STATE',0,'N','','','','','0','','','','','0');
			Insert into DATA_ENGINE_COLUMN (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id) from DATA_ENGINE_COLUMN)+1,(select id from data_engine_table where CONFIGID in (select id from DATA_ENGINE_CONFIg where name ='TRIAL_BALANCE_EXPORT_STATE')),'ACTYPEGRPID',0,'N','','','','','0','','','','','O');
			Insert into DATA_ENGINE_COLUMN (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id) from DATA_ENGINE_COLUMN)+1,(select id from data_engine_table where CONFIGID in (select id from DATA_ENGINE_CONFIg where name ='TRIAL_BALANCE_EXPORT_STATE')),'ACCOUNT',0,'N','','','','','0','','','','','O');
			Insert into DATA_ENGINE_COLUMN (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id) from DATA_ENGINE_COLUMN)+1,(select id from data_engine_table where CONFIGID in (select id from DATA_ENGINE_CONFIg where name ='TRIAL_BALANCE_EXPORT_STATE')),'DESCRIPTION',0,'N','','','','','0','','','','','O');
			Insert into DATA_ENGINE_COLUMN (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id) from DATA_ENGINE_COLUMN)+1,(select id from data_engine_table where CONFIGID in (select id from DATA_ENGINE_CONFIg where name ='TRIAL_BALANCE_EXPORT_STATE')),'HOSTACCOUNT',0,'N','','','','','0','','','','','O');
			Insert into DATA_ENGINE_COLUMN (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id) from DATA_ENGINE_COLUMN)+1,(select id from data_engine_table where CONFIGID in (select id from DATA_ENGINE_CONFIg where name ='TRIAL_BALANCE_EXPORT_STATE')),'OPENINGBAL',0,'N','','','','','0','','','','','O');
			Insert into DATA_ENGINE_COLUMN (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id) from DATA_ENGINE_COLUMN)+1,(select id from data_engine_table where CONFIGID in (select id from DATA_ENGINE_CONFIg where name ='TRIAL_BALANCE_EXPORT_STATE')),'OPENINGBALTYPE',0,'N','','','','','0','','','','','O');
			Insert into DATA_ENGINE_COLUMN (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id) from DATA_ENGINE_COLUMN)+1,(select id from data_engine_table where CONFIGID in (select id from DATA_ENGINE_CONFIg where name ='TRIAL_BALANCE_EXPORT_STATE')),'DEBITAMOUNT',0,'N','','','','','0','','','','','O');
			Insert into DATA_ENGINE_COLUMN (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id) from DATA_ENGINE_COLUMN)+1,(select id from data_engine_table where CONFIGID in (select id from DATA_ENGINE_CONFIg where name ='TRIAL_BALANCE_EXPORT_STATE')),'CREDITAMOUNT',0,'N','','','','','0','','','','','O');
			Insert into DATA_ENGINE_COLUMN (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id) from DATA_ENGINE_COLUMN)+1,(select id from data_engine_table where CONFIGID in (select id from DATA_ENGINE_CONFIg where name ='TRIAL_BALANCE_EXPORT_STATE')),'CLOSINGBAL',0,'N','','','','','0','','','','','O');
			Insert into DATA_ENGINE_COLUMN (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id) from DATA_ENGINE_COLUMN)+1,(select id from data_engine_table where CONFIGID in (select id from DATA_ENGINE_CONFIg where name ='TRIAL_BALANCE_EXPORT_STATE')),'CLOSINGBALTYPE',0,'N','','','','','0','','','','','O');
			Insert into DATA_ENGINE_COLUMN (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id) from DATA_ENGINE_COLUMN)+1,(select id from data_engine_table where CONFIGID in (select id from DATA_ENGINE_CONFIg where name ='TRIAL_BALANCE_EXPORT_STATE')),'PRODUCTFLAG',0,'N','','','','','0','','','','','O');
			
			Insert into DATA_ENGINE_COLUMN (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id) from DATA_ENGINE_COLUMN)+1,(select id from data_engine_table where CONFIGID in (select id from DATA_ENGINE_CONFIg where name ='TRIAL_BALANCE_EXPORT_CONSOLIDATE')),'ACTYPEGRPID',0,'N','','','','','0','','','','','O');
			Insert into DATA_ENGINE_COLUMN (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id) from DATA_ENGINE_COLUMN)+1,(select id from data_engine_table where CONFIGID in (select id from DATA_ENGINE_CONFIg where name ='TRIAL_BALANCE_EXPORT_CONSOLIDATE')),'ACCOUNT',0,'N','','','','','0','','','','','O');
			Insert into DATA_ENGINE_COLUMN (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id) from DATA_ENGINE_COLUMN)+1,(select id from data_engine_table where CONFIGID in (select id from DATA_ENGINE_CONFIg where name ='TRIAL_BALANCE_EXPORT_CONSOLIDATE')),'DESCRIPTION',0,'N','','','','','0','','','','','O');
			Insert into DATA_ENGINE_COLUMN (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id) from DATA_ENGINE_COLUMN)+1,(select id from data_engine_table where CONFIGID in (select id from DATA_ENGINE_CONFIg where name ='TRIAL_BALANCE_EXPORT_CONSOLIDATE')),'HOSTACCOUNT',0,'N','','','','','0','','','','','O');
			Insert into DATA_ENGINE_COLUMN (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id) from DATA_ENGINE_COLUMN)+1,(select id from data_engine_table where CONFIGID in (select id from DATA_ENGINE_CONFIg where name ='TRIAL_BALANCE_EXPORT_CONSOLIDATE')),'OPENINGBAL',0,'N','','','','','0','','','','','O');
			Insert into DATA_ENGINE_COLUMN (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id) from DATA_ENGINE_COLUMN)+1,(select id from data_engine_table where CONFIGID in (select id from DATA_ENGINE_CONFIg where name ='TRIAL_BALANCE_EXPORT_CONSOLIDATE')),'OPENINGBALTYPE',0,'N','','','','','0','','','','','O');
			Insert into DATA_ENGINE_COLUMN (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id) from DATA_ENGINE_COLUMN)+1,(select id from data_engine_table where CONFIGID in (select id from DATA_ENGINE_CONFIg where name ='TRIAL_BALANCE_EXPORT_CONSOLIDATE')),'DEBITAMOUNT',0,'N','','','','','0','','','','','O');
			Insert into DATA_ENGINE_COLUMN (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id) from DATA_ENGINE_COLUMN)+1,(select id from data_engine_table where CONFIGID in (select id from DATA_ENGINE_CONFIg where name ='TRIAL_BALANCE_EXPORT_CONSOLIDATE')),'CREDITAMOUNT',0,'N','','','','','0','','','','','O');
			Insert into DATA_ENGINE_COLUMN (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id) from DATA_ENGINE_COLUMN)+1,(select id from data_engine_table where CONFIGID in (select id from DATA_ENGINE_CONFIg where name ='TRIAL_BALANCE_EXPORT_CONSOLIDATE')),'CLOSINGBAL',0,'N','','','','','0','','','','','O');
			Insert into DATA_ENGINE_COLUMN (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id) from DATA_ENGINE_COLUMN)+1,(select id from data_engine_table where CONFIGID in (select id from DATA_ENGINE_CONFIg where name ='TRIAL_BALANCE_EXPORT_CONSOLIDATE')),'CLOSINGBALTYPE',0,'N','','','','','0','','','','','O');
			Insert into DATA_ENGINE_COLUMN (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id) from DATA_ENGINE_COLUMN)+1,(select id from data_engine_table where CONFIGID in (select id from DATA_ENGINE_CONFIg where name ='TRIAL_BALANCE_EXPORT_CONSOLIDATE')),'FINTYPE',0,'N','','','','','0','','','','','O');
			
			Insert into DATA_ENGINE_COLUMN (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id) from DATA_ENGINE_COLUMN)+1,(select id from data_engine_table where CONFIGID in (select id from DATA_ENGINE_CONFIg where name ='GL_TRANSACTION_SUMMARY_EXPORT')),'LINK',0,'N','','','','','0','','','','','O');
			Insert into DATA_ENGINE_COLUMN (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id) from DATA_ENGINE_COLUMN)+1,(select id from data_engine_table where CONFIGID in (select id from DATA_ENGINE_CONFIg where name ='GL_TRANSACTION_SUMMARY_EXPORT')),'BLDAT',0,'N','','','','','0','','','','DATE:dd.MM.yyyy','O');
			Insert into DATA_ENGINE_COLUMN (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id) from DATA_ENGINE_COLUMN)+1,(select id from data_engine_table where CONFIGID in (select id from DATA_ENGINE_CONFIg where name ='GL_TRANSACTION_SUMMARY_EXPORT')),'BLART',0,'N','','','','','0','','','','','O');
			Insert into DATA_ENGINE_COLUMN (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id) from DATA_ENGINE_COLUMN)+1,(select id from data_engine_table where CONFIGID in (select id from DATA_ENGINE_CONFIg where name ='GL_TRANSACTION_SUMMARY_EXPORT')),'BUKRS',0,'N','','','','','0','','','','','O');
			Insert into DATA_ENGINE_COLUMN (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id) from DATA_ENGINE_COLUMN)+1,(select id from data_engine_table where CONFIGID in (select id from DATA_ENGINE_CONFIg where name ='GL_TRANSACTION_SUMMARY_EXPORT')),'BUDAT',0,'N','','','','','0','','','','DATE:dd.MM.yyyy','O');
			Insert into DATA_ENGINE_COLUMN (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id) from DATA_ENGINE_COLUMN)+1,(select id from data_engine_table where CONFIGID in (select id from DATA_ENGINE_CONFIg where name ='GL_TRANSACTION_SUMMARY_EXPORT')),'MONAT',0,'N','','','','','0','','','','','O');
			Insert into DATA_ENGINE_COLUMN (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id) from DATA_ENGINE_COLUMN)+1,(select id from data_engine_table where CONFIGID in (select id from DATA_ENGINE_CONFIg where name ='GL_TRANSACTION_SUMMARY_EXPORT')),'CURRCY',0,'N','','','','','0','','','','','O');
			Insert into DATA_ENGINE_COLUMN (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id) from DATA_ENGINE_COLUMN)+1,(select id from data_engine_table where CONFIGID in (select id from DATA_ENGINE_CONFIg where name ='GL_TRANSACTION_SUMMARY_EXPORT')),'XBLNR',0,'N','','','','','0','','','','','O');
			Insert into DATA_ENGINE_COLUMN (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id) from DATA_ENGINE_COLUMN)+1,(select id from data_engine_table where CONFIGID in (select id from DATA_ENGINE_CONFIg where name ='GL_TRANSACTION_SUMMARY_EXPORT')),'BKTXT',0,'N','','','','','0','','','','','O');
			
			
			Insert into DATA_ENGINE_COLUMN (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id) from DATA_ENGINE_COLUMN)+1,(select id from data_engine_table where CONFIGID in (select id from DATA_ENGINE_CONFIg where name ='GL_TRANSACTION_EXPORT')),'LINK',0,'N','','','','','0','','','','','O');
			Insert into DATA_ENGINE_COLUMN (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id) from DATA_ENGINE_COLUMN)+1,(select id from data_engine_table where CONFIGID in (select id from DATA_ENGINE_CONFIg where name ='GL_TRANSACTION_EXPORT')),'BSCHL',0,'N','','','','','0','','','','','O');
			Insert into DATA_ENGINE_COLUMN (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id) from DATA_ENGINE_COLUMN)+1,(select id from data_engine_table where CONFIGID in (select id from DATA_ENGINE_CONFIg where name ='GL_TRANSACTION_EXPORT')),'HKONT',0,'N','','','','','0','','','','','O');
			Insert into DATA_ENGINE_COLUMN (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id) from DATA_ENGINE_COLUMN)+1,(select id from data_engine_table where CONFIGID in (select id from DATA_ENGINE_CONFIg where name ='GL_TRANSACTION_EXPORT')),'UMSKZ',0,'N','','','','','0','','','','','O');
			Insert into DATA_ENGINE_COLUMN (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id) from DATA_ENGINE_COLUMN)+1,(select id from data_engine_table where CONFIGID in (select id from DATA_ENGINE_CONFIg where name ='GL_TRANSACTION_EXPORT')),'WRBTR',0,'N','','','','','0','','','','','O');
			Insert into DATA_ENGINE_COLUMN (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id) from DATA_ENGINE_COLUMN)+1,(select id from data_engine_table where CONFIGID in (select id from DATA_ENGINE_CONFIg where name ='GL_TRANSACTION_EXPORT')),'GSBER',0,'N','','','','','0','','','','','O');
			Insert into DATA_ENGINE_COLUMN (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id) from DATA_ENGINE_COLUMN)+1,(select id from data_engine_table where CONFIGID in (select id from DATA_ENGINE_CONFIg where name ='GL_TRANSACTION_EXPORT')),'BUPLA',0,'N','','','','','0','','','','','O');
			Insert into DATA_ENGINE_COLUMN (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id) from DATA_ENGINE_COLUMN)+1,(select id from data_engine_table where CONFIGID in (select id from DATA_ENGINE_CONFIg where name ='GL_TRANSACTION_EXPORT')),'KOSTL',0,'N','','','','','0','','','','','O');
			Insert into DATA_ENGINE_COLUMN (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id) from DATA_ENGINE_COLUMN)+1,(select id from data_engine_table where CONFIGID in (select id from DATA_ENGINE_CONFIg where name ='GL_TRANSACTION_EXPORT')),'PRCTR',0,'N','','','','','0','','','','','O');
			Insert into DATA_ENGINE_COLUMN (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id) from DATA_ENGINE_COLUMN)+1,(select id from data_engine_table where CONFIGID in (select id from DATA_ENGINE_CONFIg where name ='GL_TRANSACTION_EXPORT')),'ZUONR',0,'N','','','','','0','','','','','O');
			Insert into DATA_ENGINE_COLUMN (ID,TABLEID,NAME,SKIP,SEQTYPE,SEQOBJECT,DEFAULTVALUE,DERIVEDFROM,REFERENCECOLUMN,STARTINDEX,ENDINDEX,RULEFORVALUE,QUERYFORVALUE,FORMAT,CONSTRAINTTYPE) values ((select max(id) from DATA_ENGINE_COLUMN)+1,(select id from data_engine_table where CONFIGID in (select id from DATA_ENGINE_CONFIg where name ='GL_TRANSACTION_EXPORT')),'SGTXT',0,'N','','','','','0','','','','','O');
			
	
	 </sql>
	</changeSet>
	
	<changeSet id="36" author="somasekhar">
	 <sql>
	 update data_engine_config set fieldnames=null where name in ('GL_TRANSACTION_EXPORT','GL_TRANSACTION_SUMMARY_EXPORT','TRIAL_BALANCE_EXPORT_CONSOLIDATE','TRIAL_BALANCE_EXPORT_STATE');
	 </sql>
	</changeSet>
	
	<changeSet id="37" author="somasekhar">
	 <sql>
	 Insert into DATA_ENGINE_EVENT_PROPERTIES (CONFIG_ID,STORAGE_TYPE,REGION_NAME,BUCKET_NAME,ACCESS_KEY,SECRET_KEY,PREFIX,SSE_ALGORITHM,HOST_NAME,PORT,PRIVATE_KEY) values ((select id from data_engine_config where name ='TRIAL_BALANCE_EXPORT_STATE'),'S3','us-east-2','sai-workshop-bucket-1','AKIAIYG2R7I7C5R64G3Q','pP0U8zA2qSxBaTQgZHnHx8tOGV409SxFf8Y58X1O','SAPGL','AES_256',null,null,null);
     Insert into DATA_ENGINE_EVENT_PROPERTIES (CONFIG_ID,STORAGE_TYPE,REGION_NAME,BUCKET_NAME,ACCESS_KEY,SECRET_KEY,PREFIX,SSE_ALGORITHM,HOST_NAME,PORT,PRIVATE_KEY) values ((select id from data_engine_config where name ='GL_TRANSACTION_EXPORT'),'S3','us-east-2','sai-workshop-bucket-1','AKIAIYG2R7I7C5R64G3Q','pP0U8zA2qSxBaTQgZHnHx8tOGV409SxFf8Y58X1O','SAPGL','AES_256',null,null,null);
     Insert into DATA_ENGINE_EVENT_PROPERTIES (CONFIG_ID,STORAGE_TYPE,REGION_NAME,BUCKET_NAME,ACCESS_KEY,SECRET_KEY,PREFIX,SSE_ALGORITHM,HOST_NAME,PORT,PRIVATE_KEY) values ((select id from data_engine_config where name ='GL_TRANSACTION_SUMMARY_EXPORT'),'S3','us-east-2','sai-workshop-bucket-1','AKIAIYG2R7I7C5R64G3Q','pP0U8zA2qSxBaTQgZHnHx8tOGV409SxFf8Y58X1O','SAPGL','AES_256',null,null,null);
     Insert into DATA_ENGINE_EVENT_PROPERTIES (CONFIG_ID,STORAGE_TYPE,REGION_NAME,BUCKET_NAME,ACCESS_KEY,SECRET_KEY,PREFIX,SSE_ALGORITHM,HOST_NAME,PORT,PRIVATE_KEY) values ((select id from data_engine_config where name ='TRIAL_BALANCE_EXPORT_CONSOLIDATE'),'S3','us-east-2','sai-workshop-bucket-1','AKIAIYG2R7I7C5R64G3Q','pP0U8zA2qSxBaTQgZHnHx8tOGV409SxFf8Y58X1O','SAPGL','AES_256',null,null,null);
	 
	 
	 </sql>
	</changeSet>
	
	<changeSet id="38" author="somasekhar" dbms="postgresql">
		<createSequence sequenceName="SEQ_TRANSACTION_DETAIL_REPORT"/>
	</changeSet>
	<changeSet id="39" author="somasekhar" dbms="postgresql">
		<sql>
			alter table TRANSACTION_DETAIL_REPORT alter column id SET DEFAULT nextval('SEQ_TRANSACTION_DETAIL_REPORT');
		</sql>
	</changeSet>
	
	<changeSet id="41" author="saikrishna.p">
		<comment>Security related scripts required for Release Lock.</comment>
		<sql>
		<![CDATA[
			-- Rights
			insert into SecRights (RightID, RightType, RightName, Page, Version, LastMntBy, LastMntOn, RecordStatus
					, WorkflowId) 
				values ((select MAX(RightID) + 1 from SecRights), 0, 'menuItem_ReleaseLock', 'MENU', 1
					, 1000, current_timestamp, 'Approved', 0);
			
			update SeqSecRights set SeqNo = (select MAX(RightID) FROM SecRights);
			
			-- Groups
			insert into SecGroups(GrpID, GrpCode, GrpDesc, Version, LastMntBy, LastMntOn, RecordStatus, WorkflowId)
				values ((select MAX(GrpID) + 1 from SecGroups), 'RELEASE_LOCK_LOAN_QUEUE'
					, 'Release Lock of Loan Queue Administrator', 1, 1000, current_timestamp, 'Approved', 0);
			
			update SeqSecGroups set SeqNo = (select MAX(GrpID) from SecGroups);
			
			-- Group Rights
			insert into SecGroupRights (GrpRightID, GrpID, RightID, Version, LastMntBy, LastMntOn, RecordStatus
					, WorkflowId, AccessType)
				values ((select MAX(GrpRightID) + 1 from SecGroupRights)
					, (select GrpID from SecGroups where GrpCode = 'RELEASE_LOCK_LOAN_QUEUE')
					, (select RightId from SecRights where RightName = 'menuItem_ReleaseLock')
					, 1, 1000, current_timestamp, 'Approved', 1, 1);
			
			update SeqSecGroupRights set SeqNo = (select MAX(GrpRightID) from SecGroupRights);		
		]]>
		</sql>
	</changeSet>
	<changeSet id="42" author="SaiKrishna.P">
		<comment> user able to lock record and work on it. admin has provison to unlock</comment>
		<createView viewName="LockedFinances_View" replaceIfExists="true">
		   <![CDATA[
		   select t1.finreference , t2.usrlogin nextusrname, t2.usrmobile lovvalue,t1.recordtype,t1.recordstatus 
		   from financemain_temp t1
		   inner join secusers t2 on cast(t2.usrid as varchar(20)) = t1.nextuserid
		   ]]>
		</createView>
	</changeSet>
<changeSet id="43" author="aditya">
		<addColumn tableName="Finodpenaltyrates_log">
		<column name="ODRuleCode" type="Varchar2(8)"/>
		</addColumn>
</changeSet>	

<changeSet id="44.1" author="kranthikumar.k">
<createView replaceIfExists="true" viewName="financemain_view">
 SELECT t1.finreference,
    t1.investmentref,
    t1.numberofterms,
    t1.grcperiodenddate,
    t1.allowgrcperiod,
    t1.gracebaserate,
    t1.gracespecialrate,
    t1.grcpftrate,
    t1.grcpftfrq,
    t1.nextgrcpftdate,
    t1.allowgrcpftrvw,
    t1.grcpftrvwfrq,
    t1.nextgrcpftrvwdate,
    t1.allowgrccpz,
    t1.grccpzfrq,
    t1.nextgrccpzdate,
    t1.repaybaserate,
    t1.repayspecialrate,
    t1.repayprofitrate,
    t1.repayfrq,
    t1.nextrepaydate,
    t1.repaypftfrq,
    t1.nextrepaypftdate,
    t1.allowrepayrvw,
    t1.repayrvwfrq,
    t1.nextrepayrvwdate,
    t1.allowrepaycpz,
    t1.repaycpzfrq,
    t1.nextrepaycpzdate,
    t1.maturitydate,
    t1.cpzatgraceend,
    t1.downpayment,
    t1.graceflatamount,
    t1.reqrepayamount,
    t1.totalprofit,
    t1.totalcpz,
    t1.totalgrosspft,
    t1.totalgrossgrcpft,
    t1.totalgracepft,
    t1.totalgracecpz,
    t1.grcratebasis,
    t1.repayratebasis,
    t1.fintype,
    t1.finremarks,
    t1.finccy,
    t1.schedulemethod,
    t1.profitdaysbasis,
    t1.reqmaturity,
    t1.calterms,
    t1.calmaturity,
    t1.firstrepay,
    t1.lastrepay,
    t1.finstartdate,
    t1.finamount,
    (t1.finamount + t1.feechargeamt - t1.downpayment) lovdescfinancingamount,
    t1.finrepaymentamount,
    t1.custid,
    t1.defferments,
    t1.plandefercount,
    t1.finbranch,
    t1.finsourceid,
    t1.alloweddefrpychange,
    t1.availeddefrpychange,
    t1.alloweddeffrqchange,
    t1.availeddeffrqchange,
    t1.recaltype,
    t1.finassetvalue,
    t1.disbaccountid,
    t1.repayaccountid,
    t1.finisactive,
    t1.limitvalid,
    t1.overridelimit,
    t1.securitydeposit,
    t1.version,
    t1.lastmntby,
    t1.lastmnton,
    t1.recordstatus,
    t1.rolecode,
    t1.nextrolecode,
    t1.taskid,
    t1.nexttaskid,
    t1.recordtype,
    t1.workflowid,
    t7.fintypedesc lovdescfintypename,
    t7.finmaxamount lovdescfinmaxamt,
    t7.finminamount lovdescfinminamount,
    t1.mindownpayperc,
    t7.finisalwdifferment lovdescfinalwdeferment,
    t7.finisdwpayrequired lovdescdwnpayreq,
    t7.finmaxdifferment lovdescfinmaxdifferment,
    t12.branchdesc lovdescfinbranchname,
    t12.branchprovince finbranchprovincecode,
    t1.lastrepaydate,
    t1.lastrepaypftdate,
    t1.lastrepayrvwdate,
    t1.lastrepaycpzdate,
    t1.allowgrcrepay,
    t1.grcschdmthd,
    t1.grcmargin,
    t1.repaymargin,
    t1.fincurrassetvalue,
    t1.fincommitmentref,
    t1.finlimitref,
    t1.depreciationfrq,
    t1.fincontractdate,
    t1.nextdepdate,
    t1.lastdepdate,
    t1.finaccount,
    t1.fincustpftaccount,
    t17.acrtilllbd lovdescaccruedtilllbd,
    t7.finrvwrateapplfor,
    t1.totalrepayamt,
    t1.closingstatus,
    t1.finapproveddate,
    t1.feechargeamt,
    t1.blacklisted,
    t1.finrepaypftonfrq,
    t1.anualizedpercrate,
    t1.effectiverateofreturn,
    t1.migratedfinance,
    t1.schedulemaintained,
    t1.scheduleregenerated,
    t1.finpurpose,
    t39.loanpurposedesc lovdescfinpurposename,
    t1.finstatus,
    t1.finstsreason,
    t1.initiateuser,
    t1.bankname,
    t1.iban,
    t1.accounttype,
    t1.ddareferenceno,
    t7.finscheduleon lovdescfinscheduleon,
    t1.custdsr,
    t1.jointaccount,
    t1.jointcustid,
    t1.downpaybank,
    t1.downpaysupl,
    t1.downpayaccount,
    t1.securitycollateral,
    t1.approved,
    t1.discrepancy,
    t1.limitapproved,
    t1.graceterms,
    t7.findivision lovdescfindivision,
    t1.rcdmaintainsts,
    t1.finrepaymethod,
    t1.grcprofitdaysbasis,
    t1.stepfinance,
    t1.steptype,
    t1.steppolicy,
    t1.alwmanualsteps,
    t1.noofsteps,
    t1.linkedfinref,
    t1.nextuserid,
    t1.priority,
    t24.policydesc lovdescsteppolicyname,
    t1.grcminrate,
    t1.grcmaxrate,
    t1.rpyminrate,
    t1.rpymaxrate,
    t1.deviationapproval,
    t1.manualschedule,
    t1.takeoverfinance,
    t1.grcadvbaserate,
    t1.grcadvmargin,
    t1.grcadvpftrate,
    t1.rpyadvbaserate,
    t1.rpyadvmargin,
    t1.rpyadvpftrate,
    t1.supplementrent,
    t1.increasedcost,
    t1.rolloverfrq,
    t1.nextrolloverdate,
    t27.custstsdescription,
    t1.shariastatus,
    t1.initiatedate,
    t1.finpreapprovedref,
    t1.mmaid,
    t1.accountsofficer,
    t1.feeaccountid,
    t1.fincancelac,
    t28.dealername lovdescaccountsofficer,
    t28.dealercity lovdescsourcecity,
    t1.dsacode,
    t30.rofficerdesc dsacodedesc,
    t1.tdsapplicable,
    t1.mandateid,
    t1.droplinefrq,
    t1.firstdroplinedate,
    t1.pftservicingodlimit,
    t1.insuranceamt,
    t1.deductinsdisb,
    t1.alwbpi,
    t1.bpitreatment,
    t1.planemihalw,
    t1.planemihmethod,
    t1.planemihmaxperyear,
    t1.planemihmax,
    t1.planemihlockperiod,
    t1.planemicpz,
    t1.calroundingmode,
    t1.alwmultidisb,
    t1.applicationno,
    t1.referralid,
    t33.rofficerdesc referraliddesc,
    t1.dmacode,
    t34.rofficerdesc dmacodedesc,
    t1.salesdepartment,
    t35.gendeptdesc salesdepartmentdesc,
    t1.quickdisb,
    t1.wifreference,
    t1.unplanemihlockperiod,
    t1.unplanemicpz,
    t1.reagecpz,
    t1.maxunplannedemi,
    t1.maxreageholidays,
    t1.availedunplanemi,
    t1.availedreageh,
    t1.bpiamount,
    t1.deductfeedisb,
    t1.rvwrateapplfor,
    t1.schcalonrvw,
    t1.pastduepftcalmthd,
    t1.pastduepftmargin,
    t1.droppingmethod,
    t1.ratechganyday,
    t1.promotioncode,
    t1.restructureloan,
    t1.oldfinreference,
    t1.reagebucket,
    t1.fincategory,
    t1.productcategory,
    t1.roundingtarget,
    t36.entitycode lovdescentitycode,
    t1.eligibilitymethod,
    t38.fieldcodevalue loveligibilitymethod,
    t38.valuedesc lovdesceligibilitymethod,
    t1.employeename,
    t37.rofficerdesc employeenamedesc,
    t1.samplingrequired,
    t1.legalrequired,
    t1.grcmaxamount,
    t1.connector,
    t40.dealername connectorcode,
    t40.dealercity connectordesc,
    t1.advanceemi,
    t1.advemiterms,
    t1.bpipftdaysbasis,
    t1.fixedratetenor,
    t1.fixedtenorrate,
    t12.branchtel finbranchcontact,
    t1.processattributes
   FROM financemain_temp t1
     JOIN rmtfinancetypes t7 ON t1.fintype = t7.fintype
     LEFT JOIN rmtbranches t12 ON t1.finbranch = t12.branchcode
     LEFT JOIN finpftdetails t17 ON t17.finreference = t1.finreference
     LEFT JOIN steppolicyheader t24 ON t1.steppolicy = t24.policycode
     LEFT JOIN bmtcuststatuscodes t27 ON t1.finstatus = t27.custstscode
     LEFT JOIN amtvehicledealer t28 ON t1.accountsofficer = t28.dealerid
     LEFT JOIN relationshipofficers t30 ON t1.dsacode = t30.rofficercode
     LEFT JOIN relationshipofficers t33 ON t1.referralid = t33.rofficercode
     LEFT JOIN relationshipofficers t34 ON t1.dmacode = t34.rofficercode
     LEFT JOIN rmtgendepartments t35 ON t1.salesdepartment = t35.gendepartment
     LEFT JOIN smtdivisiondetail t36 ON t7.findivision = t36.divisioncode
     LEFT JOIN relationshipofficers t37 ON t1.employeename = t37.rofficercode
     LEFT JOIN rmtlovfielddetail t38 ON t1.eligibilitymethod = t38.fieldcodeid AND t38.fieldcode = 'ELGMETHOD'
     LEFT JOIN loanpurposes t39 ON t1.finpurpose = t39.loanpurposecode
     LEFT JOIN amtvehicledealer t40 ON t1.connector = t40.dealerid
UNION ALL
 SELECT t1.finreference,
    t1.investmentref,
    t1.numberofterms,
    t1.grcperiodenddate,
    t1.allowgrcperiod,
    t1.gracebaserate,
    t1.gracespecialrate,
    t1.grcpftrate,
    t1.grcpftfrq,
    t1.nextgrcpftdate,
    t1.allowgrcpftrvw,
    t1.grcpftrvwfrq,
    t1.nextgrcpftrvwdate,
    t1.allowgrccpz,
    t1.grccpzfrq,
    t1.nextgrccpzdate,
    t1.repaybaserate,
    t1.repayspecialrate,
    t1.repayprofitrate,
    t1.repayfrq,
    t1.nextrepaydate,
    t1.repaypftfrq,
    t1.nextrepaypftdate,
    t1.allowrepayrvw,
    t1.repayrvwfrq,
    t1.nextrepayrvwdate,
    t1.allowrepaycpz,
    t1.repaycpzfrq,
    t1.nextrepaycpzdate,
    t1.maturitydate,
    t1.cpzatgraceend,
    t1.downpayment,
    t1.graceflatamount,
    t1.reqrepayamount,
    t1.totalprofit,
    t1.totalcpz,
    t1.totalgrosspft,
    t1.totalgrossgrcpft,
    t1.totalgracepft,
    t1.totalgracecpz,
    t1.grcratebasis,
    t1.repayratebasis,
    t1.fintype,
    t1.finremarks,
    t1.finccy,
    t1.schedulemethod,
    t1.profitdaysbasis,
    t1.reqmaturity,
    t1.calterms,
    t1.calmaturity,
    t1.firstrepay,
    t1.lastrepay,
    t1.finstartdate,
    t1.finamount,
    (t1.finamount + t1.feechargeamt - t1.downpayment) lovdescfinancingamount,
    t1.finrepaymentamount,
    t1.custid,
    t1.defferments,
    t1.plandefercount,
    t1.finbranch,
    t1.finsourceid,
    t1.alloweddefrpychange,
    t1.availeddefrpychange,
    t1.alloweddeffrqchange,
    t1.availeddeffrqchange,
    t1.recaltype,
    t1.finassetvalue,
    t1.disbaccountid,
    t1.repayaccountid,
    t1.finisactive,
    t1.limitvalid,
    t1.overridelimit,
    t1.securitydeposit,
    t1.version,
    t1.lastmntby,
    t1.lastmnton,
    t1.recordstatus,
    t1.rolecode,
    t1.nextrolecode,
    t1.taskid,
    t1.nexttaskid,
    t1.recordtype,
    t1.workflowid,
    t7.fintypedesc lovdescfintypename,
    t7.finmaxamount lovdescfinmaxamt,
    t7.finminamount lovdescfinminamount,
    t1.mindownpayperc,
    t7.finisalwdifferment lovdescfinalwdeferment,
    t7.finisdwpayrequired lovdescdwnpayreq,
    t7.finmaxdifferment lovdescfinmaxdifferment,
    t12.branchdesc lovdescfinbranchname,
    t12.branchprovince finbranchprovincecode,
    t1.lastrepaydate,
    t1.lastrepaypftdate,
    t1.lastrepayrvwdate,
    t1.lastrepaycpzdate,
    t1.allowgrcrepay,
    t1.grcschdmthd,
    t1.grcmargin,
    t1.repaymargin,
    t1.fincurrassetvalue,
    t1.fincommitmentref,
    t1.finlimitref,
    t1.depreciationfrq,
    t1.fincontractdate,
    t1.nextdepdate,
    t1.lastdepdate,
    t1.finaccount,
    t1.fincustpftaccount,
    t17.acrtilllbd lovdescaccruedtilllbd,
    t7.finrvwrateapplfor,
    t1.totalrepayamt,
    t1.closingstatus,
    t1.finapproveddate,
    t1.feechargeamt,
    t1.blacklisted,
    t1.finrepaypftonfrq,
    t1.anualizedpercrate,
    t1.effectiverateofreturn,
    t1.migratedfinance,
    t1.schedulemaintained,
    t1.scheduleregenerated,
    t1.finpurpose,
    t39.loanpurposedesc lovdescfinpurposename,
    t1.finstatus,
    t1.finstsreason,
    t1.initiateuser,
    t1.bankname,
    t1.iban,
    t1.accounttype,
    t1.ddareferenceno,
    t7.finscheduleon lovdescfinscheduleon,
    t1.custdsr,
    t1.jointaccount,
    t1.jointcustid,
    t1.downpaybank,
    t1.downpaysupl,
    t1.downpayaccount,
    t1.securitycollateral,
    t1.approved,
    t1.discrepancy,
    t1.limitapproved,
    t1.graceterms,
    t7.findivision lovdescfindivision,
    t1.rcdmaintainsts,
    t1.finrepaymethod,
    t1.grcprofitdaysbasis,
    t1.stepfinance,
    t1.steptype,
    t1.steppolicy,
    t1.alwmanualsteps,
    t1.noofsteps,
    t1.linkedfinref,
    t1.nextuserid,
    t1.priority,
    t24.policydesc lovdescsteppolicyname,
    t1.grcminrate,
    t1.grcmaxrate,
    t1.rpyminrate,
    t1.rpymaxrate,
    t1.deviationapproval,
    t1.manualschedule,
    t1.takeoverfinance,
    t1.grcadvbaserate,
    t1.grcadvmargin,
    t1.grcadvpftrate,
    t1.rpyadvbaserate,
    t1.rpyadvmargin,
    t1.rpyadvpftrate,
    t1.supplementrent,
    t1.increasedcost,
    t1.rolloverfrq,
    t1.nextrolloverdate,
    t27.custstsdescription,
    t1.shariastatus,
    t1.initiatedate,
    t1.finpreapprovedref,
    t1.mmaid,
    t1.accountsofficer,
    t1.feeaccountid,
    t1.fincancelac,
    t28.dealername lovdescaccountsofficer,
    t28.dealercity lovdescsourcecity,
    t1.dsacode,
    t30.rofficerdesc dsacodedesc,
    t1.tdsapplicable,
    t1.mandateid,
    t1.droplinefrq,
    t1.firstdroplinedate,
    t1.pftservicingodlimit,
    t1.insuranceamt,
    t1.deductinsdisb,
    t1.alwbpi,
    t1.bpitreatment,
    t1.planemihalw,
    t1.planemihmethod,
    t1.planemihmaxperyear,
    t1.planemihmax,
    t1.planemihlockperiod,
    t1.planemicpz,
    t1.calroundingmode,
    t1.alwmultidisb,
    t1.applicationno,
    t1.referralid,
    t33.rofficerdesc referraliddesc,
    t1.dmacode,
    t34.rofficerdesc dmacodedesc,
    t1.salesdepartment,
    t35.gendeptdesc salesdepartmentdesc,
    t1.quickdisb,
    t1.wifreference,
    t1.unplanemihlockperiod,
    t1.unplanemicpz,
    t1.reagecpz,
    t1.maxunplannedemi,
    t1.maxreageholidays,
    t1.availedunplanemi,
    t1.availedreageh,
    t1.bpiamount,
    t1.deductfeedisb,
    t1.rvwrateapplfor,
    t1.schcalonrvw,
    t1.pastduepftcalmthd,
    t1.pastduepftmargin,
    t1.droppingmethod,
    t1.ratechganyday,
    t1.promotioncode,
    t1.restructureloan,
    t1.oldfinreference,
    t1.reagebucket,
    t1.fincategory,
    t1.productcategory,
    t1.roundingtarget,
    t36.entitycode lovdescentitycode,
    t1.eligibilitymethod,
    t38.fieldcodevalue loveligibilitymethod,
    t38.valuedesc lovdesceligibilitymethod,
    t1.employeename,
    t37.rofficerdesc employeenamedesc,
    t1.samplingrequired,
    t1.legalrequired,
    t1.grcmaxamount,
    t1.connector,
    t40.dealername connectorcode,
    t40.dealercity connectordesc,
    t1.advanceemi,
    t1.advemiterms,
    t1.bpipftdaysbasis,
    t1.fixedratetenor,
    t1.fixedtenorrate,
    t12.branchtel finbranchcontact,
    t1.processattributes
   FROM financemain t1
     JOIN rmtfinancetypes t7 ON t1.fintype = t7.fintype
     LEFT JOIN rmtbranches t12 ON t1.finbranch = t12.branchcode
     LEFT JOIN finpftdetails t17 ON t17.finreference = t1.finreference
     LEFT JOIN steppolicyheader t24 ON t1.steppolicy = t24.policycode
     LEFT JOIN bmtcuststatuscodes t27 ON t1.finstatus = t27.custstscode
     LEFT JOIN amtvehicledealer t28 ON t1.accountsofficer = t28.dealerid
     LEFT JOIN relationshipofficers t30 ON t1.dsacode = t30.rofficercode
     LEFT JOIN relationshipofficers t33 ON t1.referralid = t33.rofficercode
     LEFT JOIN relationshipofficers t34 ON t1.dmacode = t34.rofficercode
     LEFT JOIN rmtgendepartments t35 ON t1.salesdepartment = t35.gendepartment
     LEFT JOIN smtdivisiondetail t36 ON t7.findivision = t36.divisioncode
     LEFT JOIN relationshipofficers t37 ON t1.employeename = t37.rofficercode
     LEFT JOIN rmtlovfielddetail t38 ON t1.eligibilitymethod = t38.fieldcodeid AND t38.fieldcode = 'ELGMETHOD'
     LEFT JOIN loanpurposes t39 ON t1.finpurpose = t39.loanpurposecode
     LEFT JOIN amtvehicledealer t40 ON t1.connector = t40.dealerid
  WHERE NOT (EXISTS ( SELECT 1 AS expr1
           FROM financemain_temp
          WHERE financemain_temp.finreference = t1.finreference))
</createView>
</changeSet>
<changeSet id="44.2" author="kranthikumar.k">
<createView replaceIfExists="true" viewName="financemain_tview">
 SELECT t1.finreference,
    t1.investmentref,
    t1.numberofterms,
    t1.grcperiodenddate,
    t1.allowgrcperiod,
    t1.gracebaserate,
    t1.gracespecialrate,
    t1.grcpftrate,
    t1.grcpftfrq,
    t1.nextgrcpftdate,
    t1.allowgrcpftrvw,
    t1.grcpftrvwfrq,
    t1.nextgrcpftrvwdate,
    t1.allowgrccpz,
    t1.grccpzfrq,
    t1.nextgrccpzdate,
    t1.repaybaserate,
    t1.repayspecialrate,
    t1.repayprofitrate,
    t1.repayfrq,
    t1.nextrepaydate,
    t1.repaypftfrq,
    t1.nextrepaypftdate,
    t1.allowrepayrvw,
    t1.repayrvwfrq,
    t1.nextrepayrvwdate,
    t1.allowrepaycpz,
    t1.repaycpzfrq,
    t1.nextrepaycpzdate,
    t1.maturitydate,
    t1.cpzatgraceend,
    t1.downpayment,
    t1.graceflatamount,
    t1.reqrepayamount,
    t1.totalprofit,
    t1.totalcpz,
    t1.totalgrosspft,
    t1.totalgrossgrcpft,
    t1.totalgracepft,
    t1.totalgracecpz,
    t1.grcratebasis,
    t1.repayratebasis,
    t1.fintype,
    t1.finremarks,
    t1.finccy,
    t1.schedulemethod,
    t1.profitdaysbasis,
    t1.reqmaturity,
    t1.calterms,
    t1.calmaturity,
    t1.firstrepay,
    t1.lastrepay,
    t1.finstartdate,
    t1.finamount,
    t1.finrepaymentamount,
    t1.custid,
    t1.defferments,
    t1.plandefercount,
    t1.finbranch,
    t1.finsourceid,
    t1.alloweddefrpychange,
    t1.availeddefrpychange,
    t1.alloweddeffrqchange,
    t1.availeddeffrqchange,
    t1.recaltype,
    t1.finassetvalue,
    t1.disbaccountid,
    t1.repayaccountid,
    t1.finisactive,
    t1.limitvalid,
    t1.overridelimit,
    t1.securitydeposit,
    t1.version,
    t1.lastmntby,
    t1.lastmnton,
    t1.recordstatus,
    t1.rolecode,
    t1.nextrolecode,
    t1.taskid,
    t1.nexttaskid,
    t1.recordtype,
    t1.workflowid,
    t2.fintypedesc lovdescfintypename,
    t2.finmaxamount lovdescfinmaxamt,
    t2.finminamount lovdescfinminamount,
    t1.mindownpayperc,
    t4.branchdesc lovdescfinbranchname,
    t4.branchprovince finbranchprovincecode,
    t1.lastrepaydate,
    t1.lastrepaypftdate,
    t1.lastrepayrvwdate,
    t1.lastrepaycpzdate,
    t1.allowgrcrepay,
    t1.grcschdmthd,
    t1.grcmargin,
    t1.repaymargin,
    t1.fincurrassetvalue,
    t1.fincommitmentref,
    t1.finlimitref,
    t1.depreciationfrq,
    t1.fincontractdate,
    t1.nextdepdate,
    t1.lastdepdate,
    t1.finaccount,
    t1.fincustpftaccount,
    t1.totalrepayamt,
    t1.finapproveddate,
    t1.feechargeamt,
    t1.blacklisted,
    t1.finrepaypftonfrq,
    t1.anualizedpercrate,
    t1.effectiverateofreturn,
    t1.migratedfinance,
    t1.schedulemaintained,
    t1.scheduleregenerated,
    t1.finpurpose,
    t14.loanpurposedesc lovdescfinpurposename,
    t1.finstatus,
    t1.finstsreason,
    t1.initiateuser,
    t1.bankname,
    t1.iban,
    t1.accounttype,
    t1.ddareferenceno,
    t1.custdsr,
    t1.jointaccount,
    t1.jointcustid,
    t1.downpaybank,
    t1.downpaysupl,
    t1.downpayaccount,
    t1.securitycollateral,
    t1.approved,
    t1.discrepancy,
    t1.limitapproved,
    t1.graceterms,
    t2.findivision lovdescfindivision,
    t1.rcdmaintainsts,
    t1.finrepaymethod,
    t1.grcprofitdaysbasis,
    t1.stepfinance,
    t1.steptype,
    t1.steppolicy,
    t1.alwmanualsteps,
    t1.noofsteps,
    t1.linkedfinref,
    t1.nextuserid,
    t1.priority,
    t5.policydesc lovdescsteppolicyname,
    t1.grcminrate,
    t1.grcmaxrate,
    t1.rpyminrate,
    t1.rpymaxrate,
    t1.deviationapproval,
    t1.manualschedule,
    t1.takeoverfinance,
    t1.grcadvbaserate,
    t1.grcadvmargin,
    t1.grcadvpftrate,
    t1.rpyadvbaserate,
    t1.rpyadvmargin,
    t1.rpyadvpftrate,
    t1.supplementrent,
    t1.increasedcost,
    t1.creditinsamt,
    t1.rolloverfrq,
    t1.nextrolloverdate,
    t1.shariastatus,
    t1.initiatedate,
    t1.finpreapprovedref,
    t1.mmaid,
    t1.accountsofficer,
    t1.feeaccountid,
    t1.fincancelac,
    t6.dealername lovdescaccountsofficer,
    t6.dealercity lovdescsourcecity,
    t1.dsacode,
    t7.rofficerdesc dsacodedesc,
    t1.tdsapplicable,
    t1.mandateid,
    t1.droplinefrq,
    t1.firstdroplinedate,
    t1.pftservicingodlimit,
    t1.insuranceamt,
    t1.deductinsdisb,
    t1.alwbpi,
    t1.bpitreatment,
    t1.planemihalw,
    t1.planemihmethod,
    t1.planemihmaxperyear,
    t1.planemihmax,
    t1.planemihlockperiod,
    t1.planemicpz,
    t1.calroundingmode,
    t1.alwmultidisb,
    t1.applicationno,
    t1.referralid,
    t8.rofficerdesc referraliddesc,
    t1.dmacode,
    t9.rofficerdesc dmacodedesc,
    t1.salesdepartment,
    t10.gendeptdesc salesdepartmentdesc,
    t1.quickdisb,
    t1.wifreference,
    t1.unplanemihlockperiod,
    t1.unplanemicpz,
    t1.reagecpz,
    t1.maxunplannedemi,
    t1.maxreageholidays,
    t1.availedunplanemi,
    t1.availedreageh,
    t1.bpiamount,
    t1.deductfeedisb,
    t1.rvwrateapplfor,
    t1.schcalonrvw,
    t1.pastduepftcalmthd,
    t1.pastduepftmargin,
    t1.droppingmethod,
    t1.ratechganyday,
    t1.promotioncode,
    t1.restructureloan,
    t1.oldfinreference,
    t1.reagebucket,
    t1.fincategory,
    t1.productcategory,
    t1.roundingtarget,
    t11.entitycode lovdescentitycode,
    t1.eligibilitymethod,
    t13.fieldcodevalue loveligibilitymethod,
    t13.valuedesc lovdesceligibilitymethod,
    t1.employeename,
    t12.rofficerdesc employeenamedesc,
    t1.samplingrequired,
    t1.legalrequired,
    t1.grcmaxamount,
    t1.connector,
    t15.dealername connectorcode,
    t15.dealercity connectordesc,
    t1.advanceemi,
    t1.advemiterms,
    t1.bpipftdaysbasis,
    t1.fixedratetenor,
    t1.fixedtenorrate,
    t4.branchtel finbranchcontact,
    t1.processattributes
   FROM financemain_temp t1
     JOIN rmtfinancetypes t2 ON t1.fintype = t2.fintype
     JOIN rmtbranches t4 ON t1.finbranch = t4.branchcode
     LEFT JOIN steppolicyheader t5 ON t1.steppolicy = t5.policycode
     LEFT JOIN amtvehicledealer t6 ON t1.accountsofficer = t6.dealerid
     LEFT JOIN relationshipofficers t7 ON t1.dsacode = t7.rofficercode
     LEFT JOIN relationshipofficers t8 ON t1.referralid = t8.rofficercode
     LEFT JOIN relationshipofficers t9 ON t1.dmacode = t9.rofficercode
     LEFT JOIN rmtgendepartments t10 ON t1.salesdepartment = t10.gendepartment
     LEFT JOIN smtdivisiondetail t11 ON t2.findivision = t11.divisioncode
     LEFT JOIN relationshipofficers t12 ON t1.employeename = t12.rofficercode
     LEFT JOIN rmtlovfielddetail t13 ON t1.eligibilitymethod = t13.fieldcodeid AND t13.fieldcode = 'ELGMETHOD'
     LEFT JOIN loanpurposes t14 ON t1.finpurpose = t14.loanpurposecode
     LEFT JOIN amtvehicledealer t15 ON t1.connector = t15.dealerid
</createView>
</changeSet>
<changeSet id="44.3" author="kranthikumar.k">
<createView replaceIfExists="true" viewName="financemain_aview">
 SELECT t1.finreference,
    t1.numberofterms,
    t1.grcperiodenddate,
    t1.allowgrcperiod,
    t1.gracebaserate,
    t1.gracespecialrate,
    t1.grcpftrate,
    t1.grcpftfrq,
    t1.nextgrcpftdate,
    t1.allowgrcpftrvw,
    t1.grcpftrvwfrq,
    t1.nextgrcpftrvwdate,
    t1.allowgrccpz,
    t1.grccpzfrq,
    t1.nextgrccpzdate,
    t1.repaybaserate,
    t1.repayspecialrate,
    t1.repayprofitrate,
    t1.repayfrq,
    t1.nextrepaydate,
    t1.repaypftfrq,
    t1.nextrepaypftdate,
    t1.allowrepayrvw,
    t1.repayrvwfrq,
    t1.nextrepayrvwdate,
    t1.allowrepaycpz,
    t1.repaycpzfrq,
    t1.nextrepaycpzdate,
    t1.maturitydate,
    t1.cpzatgraceend,
    t1.downpayment,
    t1.graceflatamount,
    t1.reqrepayamount,
    t1.totalprofit,
    t1.totalcpz,
    t1.totalgrosspft,
    t1.totalgrossgrcpft,
    t1.totalgracepft,
    t1.totalgracecpz,
    t1.grcratebasis,
    t1.repayratebasis,
    t1.fintype,
    t1.finremarks,
    t1.finccy,
    t1.schedulemethod,
    t1.profitdaysbasis,
    t1.reqmaturity,
    t1.calterms,
    t1.calmaturity,
    t1.firstrepay,
    t1.lastrepay,
    t1.finstartdate,
    t1.finamount,
   (t1.finamount + t1.feechargeamt - t1.downpayment) lovdescfinancingamount,
    t1.finrepaymentamount,
    t1.custid,
    t1.defferments,
    t1.plandefercount,
    t1.finbranch,
    t1.finsourceid,
    t1.alloweddefrpychange,
    t1.availeddefrpychange,
    t1.alloweddeffrqchange,
    t1.availeddeffrqchange,
    t1.recaltype,
    t1.finassetvalue,
    t1.disbaccountid,
    t1.repayaccountid,
    t1.finisactive,
    t1.limitvalid,
    t1.overridelimit,
    t1.securitydeposit,
    t1.version,
    t1.lastmntby,
    t1.lastmnton,
    t1.recordstatus,
    t1.rolecode,
    t1.nextrolecode,
    t1.taskid,
    t1.nexttaskid,
    t1.recordtype,
    t1.workflowid,
    t7.fintypedesc  lovdescfintypename,
    t7.finmaxamount lovdescfinmaxamt,
    t7.finminamount lovdescfinminamount,
    t1.mindownpayperc,
    t7.finisalwdifferment lovdescfinalwdeferment,
    t7.finisdwpayrequired lovdescdwnpayreq,
    t7.finmaxdifferment lovdescfinmaxdifferment,
    t12.branchdesc lovdescfinbranchname,
    t12.branchprovince finbranchprovincecode,
    t1.lastrepaydate,
    t1.lastrepaypftdate,
    t1.lastrepayrvwdate,
    t1.lastrepaycpzdate,
    t1.allowgrcrepay,
    t1.grcschdmthd,
    t1.grcmargin,
    t1.repaymargin,
    t1.fincurrassetvalue,
    t1.fincommitmentref,
    t1.finlimitref,
    t1.depreciationfrq,
    t1.fincontractdate,
    t1.nextdepdate,
    t1.lastdepdate,
    t1.finaccount,
    t1.fincustpftaccount,
    t17.acrtilllbd lovdescaccruedtilllbd,
    t7.finrvwrateapplfor,
    t1.totalrepayamt,
    t1.closingstatus,
    t1.finapproveddate,
    t1.feechargeamt,
    t1.blacklisted,
    t1.finrepaypftonfrq,
    t1.anualizedpercrate,
    t1.effectiverateofreturn,
    t1.migratedfinance,
    t1.schedulemaintained,
    t1.scheduleregenerated,
    t1.finpurpose,
    t39.loanpurposedesc lovdescfinpurposename,
    t1.finstatus,
    t1.finstsreason,
    t1.initiateuser,
    t1.bankname,
    t1.iban,
    t1.accounttype,
    t1.ddareferenceno,
    t7.finscheduleon lovdescfinscheduleon,
    t1.custdsr,
    t1.jointaccount,
    t1.jointcustid,
    t1.downpaybank,
    t1.downpaysupl,
    t1.downpayaccount,
    t1.securitycollateral,
    t1.approved,
    t1.discrepancy,
    t1.limitapproved,
    t1.investmentref,
    t1.graceterms,
    t7.findivision lovdescfindivision,
    t1.rcdmaintainsts,
    t1.finrepaymethod,
    t1.grcprofitdaysbasis,
    t1.stepfinance,
    t1.steptype,
    t1.steppolicy,
    t1.alwmanualsteps,
    t1.noofsteps,
    t1.linkedfinref,
    t1.nextuserid,
    t1.priority,
    t24.policydesc lovdescsteppolicyname,
    t1.grcminrate,
    t1.grcmaxrate,
    t1.rpyminrate,
    t1.rpymaxrate,
    t1.deviationapproval,
    t1.manualschedule,
    t1.takeoverfinance,
    t1.grcadvbaserate,
    t1.grcadvmargin,
    t1.grcadvpftrate,
    t1.rpyadvbaserate,
    t1.rpyadvmargin,
    t1.rpyadvpftrate,
    t1.supplementrent,
    t1.increasedcost,
    t1.rolloverfrq,
    t1.nextrolloverdate,
    t27.custstsdescription,
    t1.shariastatus,
    t1.initiatedate,
    t1.finpreapprovedref,
    t1.mmaid,
    t1.accountsofficer,
    t1.feeaccountid,
    t1.fincancelac,
    t28.dealername  lovdescaccountsofficer,
    t28.dealercity lovdescsourcecity,
    t29.agreename,
    t29.mmareference lovdescmmareference,
    t1.dsacode,
    t30.rofficerdesc dsacodedesc,
    t1.tdsapplicable,
    t1.mandateid,
    t1.droplinefrq,
    t1.firstdroplinedate,
    t1.pftservicingodlimit,
    t1.insuranceamt,
    t1.deductinsdisb,
    t1.alwbpi,
    t1.bpitreatment,
    t1.planemihalw,
    t1.planemihmethod,
    t1.planemihmaxperyear,
    t1.planemihmax,
    t1.planemihlockperiod,
    t1.planemicpz,
    t1.calroundingmode,
    t1.alwmultidisb,
    t1.applicationno,
    t1.referralid,
    t33.rofficerdesc referraliddesc,
    t1.dmacode,
    t34.rofficerdesc dmacodedesc,
    t1.salesdepartment,
    t35.gendeptdesc salesdepartmentdesc,
    t1.quickdisb,
    t1.wifreference,
    t1.unplanemihlockperiod,
    t1.unplanemicpz,
    t1.reagecpz,
    t1.maxunplannedemi,
    t1.maxreageholidays,
    t1.availedunplanemi,
    t1.availedreageh,
    t1.bpiamount,
    t1.deductfeedisb,
    t1.rvwrateapplfor,
    t1.schcalonrvw,
    t1.pastduepftcalmthd,
    t1.pastduepftmargin,
    t1.droppingmethod,
    t1.ratechganyday,
    t1.promotioncode,
    t1.restructureloan,
    t1.oldfinreference,
    t1.reagebucket,
    t1.fincategory,
    t1.productcategory,
    t1.roundingtarget,
    t36.entitycode  lovdescentitycode,
    t1.eligibilitymethod,
    t38.fieldcodevalue  loveligibilitymethod,
    t38.valuedesc  lovdesceligibilitymethod,
    t1.employeename,
    t37.rofficerdesc employeenamedesc,
    t1.samplingrequired,
    t1.legalrequired,
    t1.grcmaxamount,
    t1.connector,
    t40.dealername connectorcode,
    t40.dealercity connectordesc,
    t1.advanceemi,
    t1.advemiterms,
    t1.bpipftdaysbasis,
    t1.fixedratetenor,
    t1.fixedtenorrate,
    t12.branchtel  finbranchcontact,
    t1.processattributes
   FROM financemain t1
     JOIN rmtfinancetypes t7 ON t1.fintype = t7.fintype
     LEFT JOIN rmtbranches t12 ON t1.finbranch = t12.branchcode
     LEFT JOIN finpftdetails t17 ON t17.finreference = t1.finreference
     LEFT JOIN steppolicyheader t24 ON t1.steppolicy = t24.policycode
     LEFT JOIN bmtcuststatuscodes t27 ON t1.finstatus = t27.custstscode
     LEFT JOIN amtvehicledealer t28 ON t1.accountsofficer = t28.dealerid
     LEFT JOIN mmagreements t29 ON t1.mmaid = t29.mmaid
     LEFT JOIN relationshipofficers t30 ON t1.dsacode = t30.rofficercode
     LEFT JOIN relationshipofficers t33 ON t1.referralid = t33.rofficercode
     LEFT JOIN relationshipofficers t34 ON t1.dmacode = t34.rofficercode
     LEFT JOIN rmtgendepartments t35 ON t1.salesdepartment = t35.gendepartment
     LEFT JOIN smtdivisiondetail t36 ON t7.findivision = t36.divisioncode
     LEFT JOIN relationshipofficers t37 ON t1.employeename = t37.rofficercode
     LEFT JOIN rmtlovfielddetail t38 ON t1.eligibilitymethod = t38.fieldcodeid AND t38.fieldcode = 'ELGMETHOD'
     LEFT JOIN loanpurposes t39 ON t1.finpurpose = t39.loanpurposecode
     LEFT JOIN amtvehicledealer t40 ON t1.connector = t40.dealerid

</createView>
</changeSet>

<changeSet author="Vinay" id="23">
		<createTable tableName="FinTypeReceiptModes">
			<column name="FinType" type="nvarchar(8)">
			<constraints nullable="false" />
			</column>
			<column name="ReceiptMode" type="nvarchar(8)">
			<constraints nullable="false" />
			</column>
			<column name="Version" type="int" defaultValue="0" />
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="nvarchar(50)" />
			<column name="RoleCode" type="nvarchar(100)" />
			<column name="NextRoleCode" type="nvarchar(200)" />
			<column name="TaskId" type="nvarchar(50)" />
			<column name="NextTaskId" type="nvarchar(200)" />
			<column name="RecordType" type="nvarchar(50)" />
			<column name="WorkflowId" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet author="Vinay" id="24">
		<createTable tableName="FinTypeReceiptModes_Temp">
			<column name="FinType" type="nvarchar(8)">
			<constraints nullable="false" />
			</column>
			<column name="ReceiptMode" type="nvarchar(8)">
			<constraints nullable="false" />
			</column>
			<column name="Version" type="int" defaultValue="0" />
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="nvarchar(50)" />
			<column name="RoleCode" type="nvarchar(100)" />
			<column name="NextRoleCode" type="nvarchar(200)" />
			<column name="TaskId" type="nvarchar(50)" />
			<column name="NextTaskId" type="nvarchar(200)" />
			<column name="RecordType" type="nvarchar(50)" />
			<column name="WorkflowId" type="bigint" />
		</createTable>
	</changeSet>
	
	<changeSet id="25" author="Vinay">
		<createView viewName="FinTypeReceiptModes_AView" replaceIfExists="true">
			SELECT   FinType, ReceiptMode, Version, LastMntBy, LastMntOn, RecordStatus, RoleCode, NextRoleCode, TaskId,
       		 NextTaskId, RecordType, WorkflowId FROM   FinTypeReceiptModes T1 
		</createView>
	</changeSet>
	
	<changeSet id="26" author="Vinay">
		<createView viewName="FinTypeReceiptModes_View" replaceIfExists="true">
			SELECT   FinType, ReceiptMode, Version, LastMntBy, LastMntOn, RecordStatus, RoleCode, NextRoleCode, TaskId,
        NextTaskId, RecordType, WorkflowId FROM   FinTypeReceiptModes_Temp 
		UNION ALL
		SELECT   FinType, ReceiptMode, Version, LastMntBy, LastMntOn, RecordStatus, RoleCode, NextRoleCode, TaskId,
        NextTaskId, RecordType, WorkflowId FROM   FinTypeReceiptModes T1
        WHERE     NOT EXISTS   (SELECT     1  FROM          FinTypeReceiptModes_Temp WHERE    
			  FinType = T1.FinType AND ReceiptMode = T1.ReceiptMode)  
    
		</createView>
	</changeSet>
	
	<changeSet id="27" author="Vinay">
		<addColumn tableName="FinODPenaltyRates">
			<column name="ODMinCapAmount" type="decimal(18,0)" defaultValue="0"/>
		</addColumn>
	</changeSet>	

	<changeSet id="28" author="Vinay">
		<addColumn tableName="FinODPenaltyRates_Temp">
			<column name="ODMinCapAmount" type="decimal(18,0)" defaultValue="0"/>
		</addColumn>
	</changeSet>	

	<changeSet id="29" author="Vinay">
		<addColumn tableName="FinODDetails">
			<column name="ODMinCapAmount" type="decimal(18,0)" defaultValue="0"/>
		</addColumn>
	</changeSet>	

	<changeSet id="30.0" author="Vinay">
		<createView viewName="finodpenaltyrates_aview" replaceIfExists="true">
			SELECT finodpenaltyrates.finreference,
		    finodpenaltyrates.fineffectdate,
		    finodpenaltyrates.applyodpenalty,
		    finodpenaltyrates.odincgrcdays,
		    finodpenaltyrates.odchargetype,
		    finodpenaltyrates.odgracedays,
		    finodpenaltyrates.odchargecalon,
		    finodpenaltyrates.odchargeamtorperc,
		    finodpenaltyrates.odallowwaiver,
		    finodpenaltyrates.odmaxwaiverperc,
		    finodpenaltyrates.odrulecode,
		    finodpenaltyrates.ODMinCapAmount
		   FROM finodpenaltyrates
		</createView>
	</changeSet>
	
	<changeSet id="31.0" author="Vinay">
		<createView viewName="finodpenaltyrates_tview" replaceIfExists="true">
			SELECT finodpenaltyrates_temp.finreference,
		    finodpenaltyrates_temp.fineffectdate,
		    finodpenaltyrates_temp.applyodpenalty,
		    finodpenaltyrates_temp.odincgrcdays,
		    finodpenaltyrates_temp.odchargetype,
		    finodpenaltyrates_temp.odgracedays,
		    finodpenaltyrates_temp.odchargecalon,
		    finodpenaltyrates_temp.odchargeamtorperc,
		    finodpenaltyrates_temp.odallowwaiver,
		    finodpenaltyrates_temp.odmaxwaiverperc,
		    finodpenaltyrates_temp.odrulecode,
		    finodpenaltyrates_temp.ODMinCapAmount
		   FROM finodpenaltyrates_temp
		</createView>
	</changeSet>
	
	<changeSet id="32.0" author="Vinay">
		<createView viewName="finodpenaltyrates_view" replaceIfExists="true">
			SELECT finodpenaltyrates_temp.finreference,
		    finodpenaltyrates_temp.fineffectdate,
		    finodpenaltyrates_temp.applyodpenalty,
		    finodpenaltyrates_temp.odincgrcdays,
		    finodpenaltyrates_temp.odchargetype,
		    finodpenaltyrates_temp.odgracedays,
		    finodpenaltyrates_temp.odchargecalon,
		    finodpenaltyrates_temp.odchargeamtorperc,
		    finodpenaltyrates_temp.odallowwaiver,
		    finodpenaltyrates_temp.odmaxwaiverperc,
		    finodpenaltyrates_temp.odrulecode,
		    finodpenaltyrates_temp.ODMinCapAmount
		   FROM finodpenaltyrates_temp
		UNION
		 SELECT finodpenaltyrates.finreference,
		    finodpenaltyrates.fineffectdate,
		    finodpenaltyrates.applyodpenalty,
		    finodpenaltyrates.odincgrcdays,
		    finodpenaltyrates.odchargetype,
		    finodpenaltyrates.odgracedays,
		    finodpenaltyrates.odchargecalon,
		    finodpenaltyrates.odchargeamtorperc,
		    finodpenaltyrates.odallowwaiver,
		    finodpenaltyrates.odmaxwaiverperc,
		    finodpenaltyrates.odrulecode,
		    finodpenaltyrates.ODMinCapAmount
		   FROM finodpenaltyrates
		  WHERE NOT (EXISTS ( SELECT 1
		           FROM finodpenaltyrates_temp
		          WHERE finodpenaltyrates_temp.finreference = finodpenaltyrates.finreference))
		</createView>
	</changeSet>
	
	<changeSet id="33" author="Vinay">
		<sql>
			UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS);
			UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);
			
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'FinanceMainDialog_oDMinCapAmount','FinanceMainDialog',0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0; 
			
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='BFSD_ORIGINATION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_oDMinCapAmount'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='OD_ODMAINTENANCE_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_oDMinCapAmount'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_MAINTAINBASIC_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_oDMinCapAmount'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='CL_ORIGINATION_WRM') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_oDMinCapAmount'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='CL_ORIGINATION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_oDMinCapAmount'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			
			UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS);
			UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);
		</sql>
	</changeSet>
	
	<changeSet id="34" author="Vinay">
		<addColumn tableName="FinODPenaltyRates_Log">
			<column name="ODMinCapAmount" type="decimal(18,0)" defaultValue="0"/>
		</addColumn>
	</changeSet>	
	
	<changeSet id="35" author="Vinay">
		<addPrimaryKey tableName="FinTypeReceiptModes" columnNames="FinType,ReceiptMode" constraintName="PK_FnTypRcptMde_FNTYP_RECPTMOD"/>
	</changeSet>
	
	<changeSet id="36" author="Vinay">
		<sql>
			insert into fintypereceiptmodes
			Select fintype,'CHEQUE',1,1000,current_timestamp,'Approved',null,null,null,null,null,0 from rmtfinancetypes UNION ALL
			Select fintype,'CASH',1,1000,current_timestamp,'Approved',null,null,null,null,null,0 from rmtfinancetypes UNION ALL
			Select fintype,'DD',1,1000,current_timestamp,'Approved',null,null,null,null,null,0 from rmtfinancetypes UNION ALL
			Select fintype,'NEFT',1,1000,current_timestamp,'Approved',null,null,null,null,null,0 from rmtfinancetypes UNION ALL
			Select fintype,'RTGS',1,1000,current_timestamp,'Approved',null,null,null,null,null,0 from rmtfinancetypes UNION ALL
			Select fintype,'IMPS',1,1000,current_timestamp,'Approved',null,null,null,null,null,0 from rmtfinancetypes UNION ALL
			Select fintype,'EXCESS',1,1000,current_timestamp,'Approved',null,null,null,null,null,0 from rmtfinancetypes UNION ALL
			Select fintype,'ESCROW',1,1000,current_timestamp,'Approved',null,null,null,null,null,0 from rmtfinancetypes;
		</sql>
	</changeSet>
	
	<changeSet id="37_Pre" author="Jayant" dbms="postgresql">
		<sql>
			select deps_save_and_drop_dependencies('plf','fintaxuploadheader');
			select deps_save_and_drop_dependencies('plf','fintaxuploadheader_temp');
		</sql>
	</changeSet>
	<changeSet id="37" author="aditya">
	<comment>changing data type of batchreference from varchar to bigint</comment>
	<modifyDataType tableName="fintaxuploadheader" columnName="batchreference" newDataType="bigint"/>
	</changeSet>
	
	<changeSet id="38" author="aditya">
	<comment>changing data type of batchreference from varchar to bigint</comment>
	<modifyDataType tableName="fintaxuploadheader_temp" columnName="batchreference" newDataType="bigint"/>
	</changeSet>
		<changeSet id="37_Post" author="Jayant" dbms="postgresql">
		<sql>
			select deps_restore_dependencies('plf','fintaxuploadheader');
			select deps_restore_dependencies('plf','fintaxuploadheader_temp');
		</sql>
	</changeSet>
	
	<changeSet id="39" author="Vinay">
		<addColumn tableName="RejectFinODPenaltyRates">
			<column name="ODMinCapAmount" type="decimal(18,0)" defaultValue="0"/>
		</addColumn>
	</changeSet>
	
	<changeSet id="40" author="Irfan">
		<dropColumn tableName="RejectFinODPenaltyRates" columnName="ODRuleCode"/>
		<addColumn tableName="REJECTFINODPENALTYRATES">
		<column name="ODRuleCode" type="Varchar2(8)"/>
		</addColumn>
	</changeSet>
	<changeSet id="41" author="Siva">
		<sql>
		INSERT INTO templatefields(module, field, fielddesc, fieldformat) VALUES ('FIN', 'userBranchAddrLine1', 'User branch Address Line1', 'A');
		INSERT INTO templatefields(module, field, fielddesc, fieldformat) VALUES ('FIN', 'userBranchAddrLine2', 'User branch Address Line2', 'A');
		INSERT INTO templatefields(module, field, fielddesc, fieldformat) VALUES ('FIN', 'userBranchAddrHNbr', 'User branch Address House', 'A');
		INSERT INTO templatefields(module, field, fielddesc, fieldformat) VALUES ('FIN', 'userBranchAddrFlatNo', 'User branch Address Flat', 'A');
		INSERT INTO templatefields(module, field, fielddesc, fieldformat) VALUES ('FIN', 'userBranchAddrStreet', 'User branch Address Street', 'A');
		INSERT INTO templatefields(module, field, fielddesc, fieldformat) VALUES ('FIN', 'userBranchAddrCountry', 'User branch Address Country', 'A');
		INSERT INTO templatefields(module, field, fielddesc, fieldformat) VALUES ('FIN', 'userBranchAddrCity', 'User branch Address City', 'A');
		INSERT INTO templatefields(module, field, fielddesc, fieldformat) VALUES ('FIN', 'userBranchAddrProvince', 'User branch Address State', 'A');
		INSERT INTO templatefields(module, field, fielddesc, fieldformat) VALUES ('FIN', 'userBranchAddrDistrict', 'User branch Address District', 'A');
		INSERT INTO templatefields(module, field, fielddesc, fieldformat) VALUES ('FIN', 'userBranchAddrPincode', 'User branch Address Pincode', 'A');
		INSERT INTO templatefields(module, field, fielddesc, fieldformat) VALUES ('FIN', 'userBranchPhone', 'User branch Address Phone', 'A');
		
		INSERT INTO templatefields(module, field, fielddesc, fieldformat) VALUES ('FIN', 'finBranchAddrLine1', 'Loan branch Address Line1', 'A');
		INSERT INTO templatefields(module, field, fielddesc, fieldformat) VALUES ('FIN', 'finBranchAddrLine2', 'Loan branch Address Line2', 'A');
		INSERT INTO templatefields(module, field, fielddesc, fieldformat) VALUES ('FIN', 'finBranchAddrHNbr', 'Loan branch Address House', 'A');
		INSERT INTO templatefields(module, field, fielddesc, fieldformat) VALUES ('FIN', 'finBranchAddrFlatNo', 'Loan branch Address Flat', 'A');
		INSERT INTO templatefields(module, field, fielddesc, fieldformat) VALUES ('FIN', 'finBranchAddrStreet', 'Loan branch Address Street', 'A');
		INSERT INTO templatefields(module, field, fielddesc, fieldformat) VALUES ('FIN', 'finBranchAddrCountry', 'Loan branch Address Country', 'A');
		INSERT INTO templatefields(module, field, fielddesc, fieldformat) VALUES ('FIN', 'finBranchAddrCity', 'Loan branch Address City', 'A');
		INSERT INTO templatefields(module, field, fielddesc, fieldformat) VALUES ('FIN', 'finBranchAddrProvince', 'Loan branch Address State', 'A');
		INSERT INTO templatefields(module, field, fielddesc, fieldformat) VALUES ('FIN', 'finBranchAddrDistrict', 'Loan branch Address District', 'A');
		INSERT INTO templatefields(module, field, fielddesc, fieldformat) VALUES ('FIN', 'finBranchAddrPincode', 'Loan branch Address Pincode', 'A');
		INSERT INTO templatefields(module, field, fielddesc, fieldformat) VALUES ('FIN', 'finBranchPhone', 'Loan branch Address Phone', 'A');
		
		</sql>
	</changeSet>
	<changeSet id="42" author="Siva">
		<sql>
		DELETE FROM templatefields WHERE MODULE = 'FIN' AND field = 'finBranchContact';
		</sql>
	</changeSet>
	<changeSet id="43" author="Siva">
		<sql>
		UPDATE FinanceDeviations SET MODULE = 'ELIGIBILITY' WHERE MODULE = 'EILIBILITY';
		UPDATE DeviationHeader SET MODULE = 'ELIGIBILITY' WHERE MODULE = 'EILIBILITY';
		</sql>
	</changeSet>
	<changeSet id="44" author="Srinivasa Varma">
		<createTable tableName="GL_DownloadData">
			<column name="BatchId" type="varchar(10)" />
			<column name="Voucher" type="int" />
			<column name="TranOrder" type="int" />
			<column name="TranSource" type="varchar(8)" />
			<column name="TransDate" type="datetime" />
			<column name="ValueDate" type="datetime" />
			<column name="Account" type="varchar(50)" />
			<column name="HostAccount" type="varchar(50)" />
			<column name="Narration" type="varchar(50)" />
			<column name="DrCrType" type="varchar(6)" />
			<column name="Dr_Amount" type="decimal(18,0)" />
			<column name="Cr_Amount" type="decimal(18,0)" />
			<column name="Branch" type="varchar(12)" />
			<column name="BranchDesc" type="varchar(50)" />
			<column name="RefNumber" type="varchar(20)" />
			<column name="VoucherType" type="varchar(2)" />
			<column name="Product" type="varchar(8)" />
			<column name="GLType" type="varchar(4)" />
			<column name="RecorStatus" type="varchar(2)" />
		</createTable>
	</changeSet>
	
	<changeSet id="44" author="swami.v">
	<comment>Added Refundable of new column in Fee type Details</comment>
	<addColumn tableName="FeeTypes">
		<column name="Refundable" type="boolean" defaultValueBoolean="false" />
	</addColumn>
</changeSet>

<changeSet id="45" author="swami.v">
	<comment>Added Refundable of new column in Fee type Details</comment>
	<addColumn tableName="FeeTypes_temp">
		<column name="Refundable" type="boolean" defaultValueBoolean="false" />
	</addColumn>
</changeSet>


<changeSet id="46" author="swami.v">
	<comment>Added Refundable of new column in Fee type Details</comment>
 <sql>
        UPDATE FeeTypes SET Refundable = 0;
	UPDATE FeeTypes_TEMP SET Refundable = 0;
 </sql>
</changeSet>
	
	 
	 <changeSet id="47" author="swami.v">
<comment>Added Refundable of new column in Fee type Details</comment>
		<createView viewName="feetypes_view" replaceIfExists="true" > 

SELECT t1.feetypeid,
    t1.feetypecode,
    t1.feetypedesc,
    t1.manualadvice,
    t1.Refundable,
    t1.advisetype,
    t1.accountsetid,
    t1.hostfeetypecode,
    t1.taxapplicable,
    t1.taxcomponent,
    t1.active,
    t1.version,
    t1.lastmntby,
    t1.lastmnton,
    t1.recordstatus,
    t1.rolecode,
    t1.nextrolecode,
    t1.taskid,
    t1.nexttaskid,
    t1.recordtype,
    t1.workflowid,
    t2.accountsetcode,
    t2.accountsetcodename,
    t1.amortzreq
   FROM feetypes_temp t1
     LEFT JOIN rmtaccountingset t2 ON t1.accountsetid = t2.accountsetid
UNION ALL
 SELECT t1.feetypeid,
    t1.feetypecode,
    t1.feetypedesc,
    t1.manualadvice,
    t1.Refundable,
    t1.advisetype,
    t1.accountsetid,
    t1.hostfeetypecode,
    t1.taxapplicable,
    t1.taxcomponent,
    t1.active,
    t1.version,
    t1.lastmntby,
    t1.lastmnton,
    t1.recordstatus,
    t1.rolecode,
    t1.nextrolecode,
    t1.taskid,
    t1.nexttaskid,
    t1.recordtype,
    t1.workflowid,
    t2.accountsetcode,
    t2.accountsetcodename,
    t1.amortzreq
   FROM feetypes t1
     LEFT JOIN rmtaccountingset t2 ON t1.accountsetid = t2.accountsetid
  WHERE NOT (EXISTS ( SELECT 1
           FROM feetypes_temp
          WHERE feetypes_temp.feetypeid = t1.feetypeid))

</createView>
	</changeSet>





<changeSet id="48" author="swami.v">
<comment>Added Refundable of new column in Fee type Details</comment>
		<createView viewName="feetypes_aview" replaceIfExists="true" > 

SELECT t1.feetypeid,
    t1.feetypecode,
    t1.feetypedesc,
    t1.manualadvice,
    t1.Refundable,
    t1.advisetype,
    t1.accountsetid,
    t1.hostfeetypecode,
    t1.taxapplicable,
    t1.taxcomponent,
    t1.active,
    t1.version,
    t1.lastmntby,
    t1.lastmnton,
    t1.recordstatus,
    t1.rolecode,
    t1.nextrolecode,
    t1.taskid,
    t1.nexttaskid,
    t1.recordtype,
    t1.workflowid,
    t2.accountsetcode,
    t2.accountsetcodename,
    t1.amortzreq
   FROM feetypes t1
     LEFT JOIN rmtaccountingset t2 ON t1.accountsetid = t2.accountsetid

</createView>
	</changeSet>


<changeSet id="49" author="swami.v">
<comment>Added Refundable of new column in Fee type Details</comment>
		<createView viewName="feetypes_tview" replaceIfExists="true" > 


SELECT t1.feetypeid,
    t1.feetypecode,
    t1.feetypedesc,
    t1.manualadvice,
    t1.Refundable,
    t1.advisetype,
    t1.accountsetid,
    t1.hostfeetypecode,
    t1.taxapplicable,
    t1.taxcomponent,
    t1.active,
    t1.version,
    t1.lastmntby,
    t1.lastmnton,
    t1.recordstatus,
    t1.rolecode,
    t1.nextrolecode,
    t1.taskid,
    t1.nexttaskid,
    t1.recordtype,
    t1.workflowid,
    t2.accountsetcode,
    t2.accountsetcodename,
    t1.amortzreq
   FROM feetypes_temp t1
     LEFT JOIN rmtaccountingset t2 ON t1.accountsetid = t2.accountsetid

</createView>
	</changeSet>
	 

<changeSet id="50" author="swami.v">
<comment> Added SECRights,SECGROUPRIGHTS of new column of "Refundable" added</comment>
<sql>


UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS);
UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);
 
INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'FeeTypeDialog_RefundableFee','FeeTypeDialog',0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0; 
INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FEETYPE_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FeeTypeDialog_RefundableFee'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);

UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS);
UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);
</sql>
</changeSet>
	
<changeSet id="51" author="swami.v">
	<comment>Added new column of "Refundable" </comment>
	<addColumn tableName="finfeedetail">
		<column name="Refundable" type="boolean" defaultValueBoolean="false" />
	</addColumn>
</changeSet>


<changeSet id="52" author="swami.v">
	<comment>Added new column of "Refundable" </comment>
	<addColumn tableName="finfeedetail_temp">
		<column name="Refundable" type="boolean" defaultValueBoolean="false" />
	</addColumn>
</changeSet>


<changeSet id="53" author="swami.v">
	<comment>Added new column of "Refundable" </comment>
	<addColumn tableName="finfeedetail_pa">
		<column name="Refundable" type="boolean" defaultValueBoolean="false" />
	</addColumn>
</changeSet>

<changeSet id="54" author="swami.v">
	<comment>Added new column of "Refundable" </comment>
	<addColumn tableName="rejectfinfeedetail">
		<column name="Refundable" type="boolean" defaultValueBoolean="false" />
	</addColumn>
</changeSet>

<changeSet id="55" author="swami.v">
	<comment>Added new column of "Refundable" </comment>
	<addColumn tableName="WIFFINFEEDETAIL">
		<column name="Refundable" type="boolean" defaultValueBoolean="false" />
	</addColumn>
</changeSet>


<changeSet id="56" author="swami.v">
	<comment>Added new column of "Refundable" </comment>
	<addColumn tableName="WIFFINFEEDETAIL_TEMP">
		<column name="Refundable" type="boolean" defaultValueBoolean="false" />
	</addColumn>
</changeSet>




<changeSet id="57" author="swami.v">
	<comment>Added Refundable of new column </comment>
 <sql>

    UPDATE finfeedetail SET Refundable = 0;
	UPDATE finfeedetail_temp SET Refundable = 0;
    UPDATE finfeedetail_pa   SET Refundable = 0;
    UPDATE rejectfinfeedetail SET Refundable = 0;
    UPDATE WIFFINFEEDETAIL SET Refundable = 0;
    UPDATE WIFFINFEEDETAIL_TEMP SET Refundable = 0;
    
 </sql>
</changeSet>

<changeSet id="58" author="swami.v">
<comment>Added Refundable of new column </comment>
		<createView viewName="finfeedetail_aview" replaceIfExists="true" > 

SELECT t1.feeid,
    t1.finreference,
    t1.originationfee,
    t1.finevent,
    t1.feetypeid,
    t1.feeseq,
    t1.feeorder,
    t1.calculatedamount,
    t1.actualamount,
    t1.waivedamount,
    t1.paidamount,
    t1.feeschedulemethod,
    t1.terms,
    t1.remainingfee,
    t1.paymentref,
    t1.calculationtype,
    t1.rulecode,
    t1.fixedamount,
    t1.percentage,
    t1.calculateon,
    t1.alwdeviation,
    t1.maxwaiverperc,
    t1.alwmodifyfee,
    t1.alwmodifyfeeschdmthd,
    t1.vasreference,
    t1.status,
    t1.taxapplicable,
    t1.taxcomponent,
    t1.paidamountoriginal,
    t1.paidamountgst,
    t1.netamountoriginal,
    t1.netamountgst,
    t1.netamount,
    t1.remainingfeeoriginal,
    t1.remainingfeegst,
    t1.actualamountoriginal,
    t1.actualamountgst,
    t1.feeamz,
    t1.version,
    t1.lastmntby,
    t1.lastmnton,
    t1.recordstatus,
    t1.rolecode,
    t1.nextrolecode,
    t1.taskid,
    t1.nexttaskid,
    t1.recordtype,
    t1.workflowid,
    t2.feetypecode,
    t2.feetypedesc,
    t1.Refundable
   FROM finfeedetail t1
     LEFT JOIN feetypes t2 ON t1.feetypeid = t2.feetypeid

</createView>
	</changeSet>



<changeSet id="59" author="swami.v">
<comment>Added Refundable of new column </comment>
		<createView viewName="finfeedetail_tview" replaceIfExists="true" > 

SELECT t1.feeid,
    t1.finreference,
    t1.originationfee,
    t1.finevent,
    t1.feetypeid,
    t1.feeseq,
    t1.feeorder,
    t1.calculatedamount,
    t1.actualamount,
    t1.waivedamount,
    t1.paidamount,
    t1.feeschedulemethod,
    t1.terms,
    t1.remainingfee,
    t1.paymentref,
    t1.calculationtype,
    t1.rulecode,
    t1.fixedamount,
    t1.percentage,
    t1.calculateon,
    t1.alwdeviation,
    t1.maxwaiverperc,
    t1.alwmodifyfee,
    t1.alwmodifyfeeschdmthd,
    t1.vasreference,
    t1.status,
    t1.taxapplicable,
    t1.taxcomponent,
    t1.paidamountoriginal,
    t1.paidamountgst,
    t1.netamountoriginal,
    t1.netamountgst,
    t1.netamount,
    t1.remainingfeeoriginal,
    t1.remainingfeegst,
    t1.actualamountoriginal,
    t1.actualamountgst,
    t1.feeamz,
    t1.version,
    t1.lastmntby,
    t1.lastmnton,
    t1.recordstatus,
    t1.rolecode,
    t1.nextrolecode,
    t1.taskid,
    t1.nexttaskid,
    t1.recordtype,
    t1.workflowid,
    t2.feetypecode,
    t2.feetypedesc,  
    t1.Refundable
   FROM finfeedetail_temp t1
     LEFT JOIN feetypes t2 ON t1.feetypeid = t2.feetypeid

</createView>
	</changeSet>


<changeSet id="60" author="swami.v">
<comment>Added Refundable of new column </comment>
		<createView viewName="finfeedetail_view" replaceIfExists="true" > 

 SELECT t1.feeid,
    t1.finreference,
    t1.originationfee,
    t1.finevent,
    t1.feetypeid,
    t1.feeseq,
    t1.feeorder,
    t1.calculatedamount,
    t1.actualamount,
    t1.waivedamount,
    t1.paidamount,
    t1.feeschedulemethod,
    t1.terms,
    t1.remainingfee,
    t1.paymentref,
    t1.calculationtype,
    t1.rulecode,
    t1.fixedamount,
    t1.percentage,
    t1.calculateon,
    t1.alwdeviation,
    t1.maxwaiverperc,
    t1.alwmodifyfee,
    t1.alwmodifyfeeschdmthd,
    t1.vasreference,
    t1.status,
    t1.taxapplicable,
    t1.taxcomponent,
    t1.paidamountoriginal,
    t1.paidamountgst,
    t1.netamountoriginal,
    t1.netamountgst,
    t1.netamount,
    t1.remainingfeeoriginal,
    t1.remainingfeegst,
    t1.actualamountoriginal,
    t1.actualamountgst,
    t1.feeamz,
    t1.version,
    t1.lastmntby,
    t1.lastmnton,
    t1.recordstatus,
    t1.rolecode,
    t1.nextrolecode,
    t1.taskid,
    t1.nexttaskid,
    t1.recordtype,
    t1.transactionid,
    t1.workflowid,
    t2.feetypecode,
    t2.feetypedesc,
    t1.Refundable
   FROM finfeedetail_temp t1
     LEFT JOIN feetypes t2 ON t1.feetypeid = t2.feetypeid
UNION ALL
 SELECT t1.feeid,
    t1.finreference,
    t1.originationfee,
    t1.finevent,
    t1.feetypeid,
    t1.feeseq,
    t1.feeorder,
    t1.calculatedamount,
    t1.actualamount,
    t1.waivedamount,
    t1.paidamount,
    t1.feeschedulemethod,
    t1.terms,
    t1.remainingfee,
    t1.paymentref,
    t1.calculationtype,
    t1.rulecode,
    t1.fixedamount,
    t1.percentage,
    t1.calculateon,
    t1.alwdeviation,
    t1.maxwaiverperc,
    t1.alwmodifyfee,
    t1.alwmodifyfeeschdmthd,
    t1.vasreference,
    t1.status,
    t1.taxapplicable,
    t1.taxcomponent,
    t1.paidamountoriginal,
    t1.paidamountgst,
    t1.netamountoriginal,
    t1.netamountgst,
    t1.netamount,
    t1.remainingfeeoriginal,
    t1.remainingfeegst,
    t1.actualamountoriginal,
    t1.actualamountgst,
    t1.feeamz,
    t1.version,
    t1.lastmntby,
    t1.lastmnton,
    t1.recordstatus,
    t1.rolecode,
    t1.nextrolecode,
    t1.taskid,
    t1.nexttaskid,
    t1.recordtype,
    t1.transactionid,
    t1.workflowid,
    t2.feetypecode,
    t2.feetypedesc,
    t1.Refundable
   FROM finfeedetail t1
     LEFT JOIN feetypes t2 ON t1.feetypeid = t2.feetypeid
  WHERE NOT (EXISTS ( SELECT 1
           FROM finfeedetail_temp
          WHERE finfeedetail_temp.feeid = t1.feeid))

</createView>
	</changeSet>


<changeSet id="61" author="swami.v">
<comment>Added Refundable of new column </comment>
		<createView viewName="wiffinfeedetail_view" replaceIfExists="true" > 

SELECT t1.feeid,
    t1.finreference,
    t1.feeseq,
    t1.originationfee,
    t1.finevent,
    t1.feetypeid,
    t1.feeorder,
    t1.calculatedamount,
    t1.actualamount,
    t1.waivedamount,
    t1.paidamount,
    t1.feeschedulemethod,
    t1.terms,
    t1.remainingfee,
    t1.paymentref,
    t1.calculationtype,
    t1.rulecode,
    t1.fixedamount,
    t1.percentage,
    t1.calculateon,
    t1.alwdeviation,
    t1.maxwaiverperc,
    t1.alwmodifyfee,
    t1.alwmodifyfeeschdmthd,
    t1.vasreference,
    t1.status,
    t1.taxapplicable,
    t1.taxcomponent,
    t1.paidamountoriginal,
    t1.paidamountgst,
    t1.netamountoriginal,
    t1.netamountgst,
    t1.netamount,
    t1.remainingfeeoriginal,
    t1.remainingfeegst,
    t1.actualamountoriginal,
    t1.actualamountgst,
    t1.version,
    t1.lastmntby,
    t1.lastmnton,
    t1.recordstatus,
    t1.rolecode,
    t1.nextrolecode,
    t1.taskid,
    t1.nexttaskid,
    t1.recordtype,
    t1.workflowid,
    t2.feetypecode,
    t2.feetypedesc,
    t1.Refundable
   FROM wiffinfeedetail_temp t1
     LEFT JOIN feetypes t2 ON t1.feetypeid = t2.feetypeid
UNION ALL
 SELECT t1.feeid,
    t1.finreference,
    t1.feeseq,
    t1.originationfee,
    t1.finevent,
    t1.feetypeid,
    t1.feeorder,
    t1.calculatedamount,
    t1.actualamount,
    t1.waivedamount,
    t1.paidamount,
    t1.feeschedulemethod,
    t1.terms,
    t1.remainingfee,
    t1.paymentref,
    t1.calculationtype,
    t1.rulecode,
    t1.fixedamount,
    t1.percentage,
    t1.calculateon,
    t1.alwdeviation,
    t1.maxwaiverperc,
    t1.alwmodifyfee,
    t1.alwmodifyfeeschdmthd,
    t1.vasreference,
    t1.status,
    t1.taxapplicable,
    t1.taxcomponent,
    t1.paidamountoriginal,
    t1.paidamountgst,
    t1.netamountoriginal,
    t1.netamountgst,
    t1.netamount,
    t1.remainingfeeoriginal,
    t1.remainingfeegst,
    t1.actualamountoriginal,
    t1.actualamountgst,
    t1.version,
    t1.lastmntby,
    t1.lastmnton,
    t1.recordstatus,
    t1.rolecode,
    t1.nextrolecode,
    t1.taskid,
    t1.nexttaskid,
    t1.recordtype,
    t1.workflowid,
    t2.feetypecode,
    t2.feetypedesc,
    t1.Refundable
   FROM wiffinfeedetail t1
     LEFT JOIN feetypes t2 ON t1.feetypeid = t2.feetypeid
  WHERE NOT (EXISTS ( SELECT 1
           FROM wiffinfeedetail_temp
          WHERE wiffinfeedetail_temp.finreference = t1.finreference AND wiffinfeedetail_temp.originationfee = t1.originationfee AND wiffinfeedetail_temp.finevent = t1.finevent AND wiffinfeedetail_temp.feetypeid = t1.feetypeid))

</createView>
	</changeSet>

	<changeSet id="62" author="Siva">
		<sql>
			Insert into RBFieldDetails (rbmodule, rbevent, rbfldname ,rbflddesc , rbfldtype, rbfldlen , rbforcalflds,rbforbldflds, rbfldtablename , rbstflds, modulecode) values ('FEES','REPAY','receiptPurpose','Receipt Purpose','nvarchar','100','0','1','','static','');
			Insert into RBFieldDetails (rbmodule, rbevent, rbfldname ,rbflddesc , rbfldtype, rbfldlen , rbforcalflds,rbforbldflds, rbfldtablename , rbstflds, modulecode) values ('FEES','REPAY','receiptMode','Receipt	Mode','nvarchar','100','0','1','','static','');
			Insert into RBFieldDetails (rbmodule, rbevent, rbfldname ,rbflddesc , rbfldtype, rbfldlen , rbforcalflds,rbforbldflds, rbfldtablename , rbstflds, modulecode) values ('FEES','EARLYPAY','receiptPurpose','Receipt Purpose','nvarchar','100','0','1','','static','');
			Insert into RBFieldDetails (rbmodule, rbevent, rbfldname ,rbflddesc , rbfldtype, rbfldlen , rbforcalflds,rbforbldflds, rbfldtablename , rbstflds, modulecode) values ('FEES','EARLYPAY','receiptMode','Receipt	Mode','nvarchar','100','0','1','','static','');
			Insert into RBFieldDetails (rbmodule, rbevent, rbfldname ,rbflddesc , rbfldtype, rbfldlen , rbforcalflds,rbforbldflds, rbfldtablename , rbstflds, modulecode) values ('FEES','EARLYSTL','receiptPurpose','Receipt Purpose','nvarchar','100','0','1','','static','');
			Insert into RBFieldDetails (rbmodule, rbevent, rbfldname ,rbflddesc , rbfldtype, rbfldlen , rbforcalflds,rbforbldflds, rbfldtablename , rbstflds, modulecode) values ('FEES','EARLYSTL','receiptMode','Receipt	Mode','nvarchar','100','0','1','','static','');
		</sql>
	</changeSet>
	<changeSet id="63" author="Sai Krishna">
		<addColumn tableName="DeviationDetails">
			<column name="DelegatorGrade" type="bigint" defaultValueNumeric="0" />
		</addColumn>
		<addColumn tableName="DeviationDetails_Temp">
			<column name="DelegatorGrade" type="bigint" defaultValueNumeric="0" />
		</addColumn>
	</changeSet>
<changeSet id="63" author="Vinay">
	<createView viewName="rmtfinancetypes_orgview" replaceIfExists="true">
		SELECT t1.fintype,
    t1.fincategory,
    t1.fintypedesc,
    t1.finccy,
    t1.findayscaltype,
    t1.finactype,
    t1.fincontingentactype,
    t1.finisgenref,
    t1.finmaxamount,
    t1.finminamount,
    t1.finisopennewfinac,
    t1.finisalwmd,
    t1.finschdmthd,
    t1.finisalwgrace,
    t1.equalrepayment,
    t1.finratetype,
    t1.finbaserate,
    t1.finsplrate,
    t1.finintrate,
    t1.finminrate,
    t1.finmaxrate,
    t1.findftintfrq,
    t1.finisintcpz,
    t1.fincpzfrq,
    t1.finisrvwalw,
    t1.finrvwfrq,
    t1.fingrcratetype,
    t1.fingrcbaserate,
    t1.fingrcsplrate,
    t1.fingrcintrate,
    t1.fingrcminrate,
    t1.fingrcmaxrate,
    t1.fingrcdftintfrq,
    t1.fingrcisintcpz,
    t1.fingrccpzfrq,
    t1.fingrcisrvwalw,
    t1.fingrcrvwfrq,
    t1.finminterm,
    t1.finmaxterm,
    t1.findftterms,
    t1.finrpyfrq,
    t1.finrepaymethod,
    t1.finisalwdifferment,
    t1.finmaxdifferment,
    t1.finisactive,
    t1.stepfinance,
    t1.steppingmandatory,
    t1.alwmanualsteps,
    t1.alwdsteppolicies,
    t1.dftsteppolicy,
    t1.finisdwpayrequired,
    t1.finrvwrateapplfor,
    t1.finalwratechangeanydate,
    t1.finisintcpzatgrcend,
    t1.finschcalcodeonrvw,
    t1.alwplandeferment,
    t1.plandefercount,
    t1.pftpayactype,
    t1.finisopenpftpayacc,
    t1.finisalwgrcrepay,
    t1.fingrcschdmthd,
    t1.fingrcmargin,
    t1.finmargin,
    t1.fincommitmentreq,
    t1.fincollateralreq,
    t1.findepreciationreq,
    t1.findepreciationfrq,
    t1.finbankcontingentactype,
    t1.finprovisionactype,
    t1.allowriainvestment,
    t1.overridelimit,
    t1.limitrequired,
    t1.fincommitmentovrride,
    t1.fincollateralovrride,
    t1.finrepaypftonfrq,
    t1.finpftunchanged,
    t1.applyodpenalty,
    t1.odincgrcdays,
    t1.odchargetype,
    t1.odgracedays,
    t1.odchargecalon,
    t1.odchargeamtorperc,
    t1.odallowwaiver,
    t1.odmaxwaiverperc,
    t1.findivision,
    t3.divisioncodedesc AS lovdescfindivisionname,
    t1.finsuspactype,
    t1.product,
    t1.startdate,
    t1.enddate,
    t1.allowdownpaypgm,
    t1.fintypedesc AS lovdescpromofintypedesc,
    t1.remarks,
    t4.policydesc AS lovdescdftsteppolicyname,
    t1.pastduepftcalmthd,
    t1.pastduepftmargin,
    t1.alwadvancerent,
    t1.grcadvbaserate,
    t1.grcadvmargin,
    t1.grcadvpftrate,
    t1.rpyadvbaserate,
    t1.rpyadvmargin,
    t1.rpyadvpftrate,
    t1.rolloverfinance,
    t1.rolloverfrq,
    t1.downpayrule,
    t1.alwmultipartydisb,
    t1.collateraltype,
    t1.tdsapplicable,
    t5.rulecode AS downpayruledesc,
    t1.applygrcpricing,
    t1.applyrpypricing,
    t6.rulecode AS grcpricingmethoddesc,
    t7.rulecode AS rpypricingmethoddesc,
    t1.droplineod,
    t1.droppingmethod,
    t1.ratechganyday,
    t4.steptype AS dftsteppolicytype,
    t1.manualschedule,
    t1.alwbpi,
    t1.bpitreatment,
    t1.pftdueschon,
    t1.planemihalw,
    t1.planemihmethod,
    t1.planemihmaxperyear,
    t1.planemihmax,
    t1.planemihlockperiod,
    t1.planemicpz,
    t1.unplanemihlockperiod,
    t1.unplanemicpz,
    t1.reagecpz,
    t1.fddlockperiod,
    t1.alwdrpymethods,
    t1.maxunplannedemi,
    t1.maxreageholidays,
    t1.roundingmode,
    t1.roundingtarget,
    t1.frequencydays,
    t1.quickdisb,
    t1.alwreage,
    t1.alwunplanemiholiday,
    t1.alwmaxdisbcheckreq,
    t1.productcategory,
    t1.rpyhierarchy,
    t1.developerfinance,
    t3.entitycode AS lovdescentitycode,
    t8.entitydesc AS lovdescentitydesc,
    t1.costoffunds,
    t1.chequecapturereq,
    t1.finltvcheck,
    t1.partiallysecured,
    t1.alwadvemi,
    t1.advemiminterms,
    t1.advemimaxterms,
    t1.advemidftterms,
    t1.advemischdmthd,
    t1.bpipftdaysbasis,
    t1.eligibilitymethods,
    t1.alwhybridrate,
    t1.fixedratetenor,
    t1.odmincapamount,
    t1.odrulecode,
    t1.alwzerointacc,
    t1.finisalwpartialrpy
   FROM rmtfinancetypes t1
     JOIN smtdivisiondetail t3 ON t1.findivision = t3.divisioncode
     LEFT JOIN steppolicyheader t4 ON t1.dftsteppolicy = t4.policycode
     LEFT JOIN rules t5 ON t1.downpayrule = t5.ruleid
     LEFT JOIN rules t6 ON t1.grcpricingmethod = t6.ruleid
     LEFT JOIN rules t7 ON t1.rpypricingmethod = t7.ruleid
     LEFT JOIN entity t8 ON t3.entitycode = t8.entitycode
	</createView>
</changeSet>

<changeSet id="64.0" author="Durgaprasad G">
<comment>New Columns added for Direct Selling Agent </comment>
  <createView viewName="amtvehicledealer_aview" replaceIfExists="true" > 
	      SELECT 
			    t1.dealerid,
			    t1.dealertype,
			    t1.dealername,
			    t1.dealertelephone,
			    t1.dealerfax,
			    t1.dealeraddress1,
			    t1.dealeraddress2,
			    t1.dealeraddress3,
			    t1.dealeraddress4,
			    t1.dealercountry,
			    t5.countrydesc AS lovdesccountry,
			    t1.dealerprovince,
			    t4.cpprovincename AS lovdescprovince,
			    t1.dealercity,
			    t3.pccityname AS lovdesccity,
			    t1.email,
			    t1.pobox,
			    t1.zipcode,
			    t1.active,
			    t1.emirates,
			    t1.commisionpaidat,
			    t1.calculationrule,
			    t7.rulecodedesc AS calruledesc,
			    t1.paymentmode,
			    t1.accountnumber,
			    t1.accountingsetid,
			    t8.accountsetcode AS accountingsetcode,
			    t8.accountsetcodename AS accountingsetdesc,
			    t9.cpprovincename AS emiratesdescription,
			    t1.sellertype,
			    t1.PANNumber,
			    t1.UIDNumber,
			    t1.TaxNumber,
			    t1.AccountNo,
			    t1.AccountType,
			    t1.FromProvince,
				t10.cpprovincename as fromprovinceName,
			    t1.ToProvince,
				t11.cpprovincename as toprovinceName,
			    t1.BankBranchID,
			    t12.branchcode as bankBranchCode,
				t12.branchdesc as bankBranchCodeName,
				t12.IFSC as branchIFSCCode,
			    t12.MICR as branchMICRCode,
			    t12.city as branchCity,
			    t13.bankname as bankName,
			    t1.version,
			    t1.lastmntby,
			    t1.lastmnton,
			    t1.recordstatus,
			    t1.rolecode,
			    t1.nextrolecode,
			    t1.taskid,
			    t1.nexttaskid,
			    t1.recordtype,
			    t1.workflowid,
			    t1.code,
			     t1.productctg,
       			 t14.productctgdesc,
                  t1.shortcode
			   FROM amtvehicledealer t1
			     LEFT JOIN rmtprovincevscity t3 ON t1.dealercountry = t3.pccountry AND t1.dealerprovince = t3.pcprovince AND t1.dealercity = t3.pccity AND t1.dealercity = t3.pccity
			     LEFT JOIN rmtcountryvsprovince t4 ON t1.dealercountry = t4.cpcountry AND t1.dealerprovince = t4.cpprovince
			     LEFT JOIN bmtcountries t5 ON t1.dealercountry = t5.countrycode
			     LEFT JOIN rules t7 ON t1.calculationrule = t7.rulecode AND t7.ruleevent = 'ADDDBS'
			     LEFT JOIN rmtaccountingset t8 ON t1.accountingsetid = t8.accountsetid
			     LEFT JOIN rmtcountryvsprovince t9 ON t1.emirates = t9.cpprovince
			     LEFT JOIN rmtcountryvsprovince t10 ON t1.FromProvince = t10.cpprovince
			     LEFT JOIN rmtcountryvsprovince t11 ON t1.ToProvince = t11.cpprovince
			     LEFT JOIN BankBranches t12 ON t1.BankBranchID = t12.BankBranchID
			     LEFT JOIN BMTBankDetail t13 ON t12.bankcode = t13.bankcode
			     LEFT JOIN vasproductcategory t14 ON t1.productctg = t14.productctg
   </createView>
</changeSet>
	
<changeSet id="65.0" author="Durgaprasad G">
	<comment>New Columns added for Direct Selling Agent </comment>
		<createView viewName="amtvehicledealer_view" replaceIfExists="true" > 
			    Select t1.dealerid,
			    t1.dealertype,
			    t1.dealername,
			    t1.dealertelephone,
			    t1.dealerfax,
			    t1.dealeraddress1,
			    t1.dealeraddress2,
			    t1.dealeraddress3,
			    t1.dealeraddress4,
			    t1.dealercountry,
			    t5.countrydesc AS lovdesccountry,
			    t1.dealerprovince,
			    t4.cpprovincename AS lovdescprovince,
			    t1.dealercity,
			    t3.pccityname AS lovdesccity,
			    t1.email,
			    t1.pobox,
			    t1.zipcode,
			    t1.active,
			    t1.emirates,
			    t1.commisionpaidat,
			    t1.calculationrule,
			    t7.rulecodedesc AS calruledesc,
			    t1.paymentmode,
			    t1.accountnumber,
			    t1.accountingsetid,
			    t8.accountsetcode AS accountingsetcode,
			    t8.accountsetcodename AS accountingsetdesc,
			    t9.cpprovincename AS emiratesdescription,
			    t1.sellertype,
			    t1.PANNumber,
			    t1.UIDNumber,
			    t1.TaxNumber,
			    t1.AccountNo,
			    t1.AccountType,
			    t1.FromProvince,
				t10.cpprovincename as fromprovinceName,
			    t1.ToProvince,
				t11.cpprovincename as toprovinceName, 
			    t1.BankBranchID,
			    t12.branchcode as bankBranchCode,
				t12.branchdesc as bankBranchCodeName,
				t12.IFSC as branchIFSCCode,
			    t12.MICR as branchMICRCode,
			    t12.city as branchCity,
			    t13.bankname as bankName,
			    t1.version,
			    t1.lastmntby,
			    t1.lastmnton,
			    t1.recordstatus,
			    t1.rolecode,
			    t1.nextrolecode,
			    t1.taskid,
			    t1.nexttaskid,
			    t1.recordtype,
			    t1.workflowid,
			    t1.code,
			     t1.productctg,
       			 t14.productctgdesc,
                 t1.shortcode
			   FROM amtvehicledealer_temp t1
			     LEFT JOIN rmtprovincevscity t3 ON t1.dealercountry = t3.pccountry AND t1.dealerprovince = t3.pcprovince AND t1.dealercity = t3.pccity
			     LEFT JOIN rmtcountryvsprovince t4 ON t1.dealercountry = t4.cpcountry AND t1.dealerprovince = t4.cpprovince
			     LEFT JOIN bmtcountries t5 ON t1.dealercountry = t5.countrycode
			     LEFT JOIN rules t7 ON t1.calculationrule = t7.rulecode AND t7.ruleevent = 'ADDDBS'
			     LEFT JOIN rmtaccountingset t8 ON t1.accountingsetid = t8.accountsetid
			     LEFT JOIN rmtcountryvsprovince t9 ON t1.emirates = t9.cpprovince
			     LEFT JOIN rmtcountryvsprovince t10 ON t1.FromProvince = t10.cpprovince
			     LEFT JOIN rmtcountryvsprovince t11 ON t1.ToProvince = t11.cpprovince
			     LEFT JOIN BankBranches t12 ON t1.BankBranchID = t12.BankBranchID
			     LEFT JOIN BMTBankDetail t13 ON t12.bankcode = t13.bankcode
			      LEFT JOIN vasproductcategory t14 ON t1.productctg = t14.productctg
			     
			UNION ALL
			SELECT 
			    t1.dealerid,
			    t1.dealertype,
			    t1.dealername,
			    t1.dealertelephone,
			    t1.dealerfax,
			    t1.dealeraddress1,
			    t1.dealeraddress2,
			    t1.dealeraddress3,
			    t1.dealeraddress4,
			    t1.dealercountry,
			    t5.countrydesc AS lovdesccountry,
			    t1.dealerprovince,
			    t4.cpprovincename AS lovdescprovince,
			    t1.dealercity,
			    t3.pccityname AS lovdesccity,
			    t1.email,
			    t1.pobox,
			    t1.zipcode,
			    t1.active,
			    t1.emirates,
			    t1.commisionpaidat,
			    t1.calculationrule,
			    t7.rulecodedesc AS calruledesc,
			    t1.paymentmode,
			    t1.accountnumber,
			    t1.accountingsetid,
			    t8.accountsetcode AS accountingsetcode,
			    t8.accountsetcodename AS accountingsetdesc,
			    t9.cpprovincename AS emiratesdescription,
			    t1.sellertype,
			    t1.PANNumber,
			    t1.UIDNumber,
			    t1.TaxNumber,
			    t1.AccountNo,
			    t1.AccountType,
			    t1.FromProvince,
				t10.cpprovincename as fromprovinceName,
			    t1.ToProvince,
				t11.cpprovincename as toprovinceName,
			    t1.BankBranchID,
			    t12.branchcode as bankBranchCode,
				t12.branchdesc as bankBranchCodeName,
				t12.IFSC as branchIFSCCode,
			    t12.MICR as branchMICRCode,
			    t12.city as branchCity,
			    t13.bankname as bankName,
			    t1.version,
			    t1.lastmntby,
			    t1.lastmnton,
			    t1.recordstatus,
			    t1.rolecode,
			    t1.nextrolecode,
			    t1.taskid,
			    t1.nexttaskid,
			    t1.recordtype,
			    t1.workflowid,
			    t1.code,
			     t1.productctg,
       			 t14.productctgdesc,
                  t1.shortcode
			   FROM amtvehicledealer t1
			     LEFT JOIN rmtprovincevscity t3 ON t1.dealercountry = t3.pccountry AND t1.dealerprovince = t3.pcprovince AND t1.dealercity = t3.pccity AND t1.dealercity = t3.pccity
			     LEFT JOIN rmtcountryvsprovince t4 ON t1.dealercountry = t4.cpcountry AND t1.dealerprovince = t4.cpprovince
			     LEFT JOIN bmtcountries t5 ON t1.dealercountry = t5.countrycode
			     LEFT JOIN rules t7 ON t1.calculationrule = t7.rulecode AND t7.ruleevent = 'ADDDBS'
			     LEFT JOIN rmtaccountingset t8 ON t1.accountingsetid = t8.accountsetid
			     LEFT JOIN rmtcountryvsprovince t9 ON t1.emirates = t9.cpprovince
			     LEFT JOIN rmtcountryvsprovince t10 ON t1.FromProvince = t10.cpprovince
			     LEFT JOIN rmtcountryvsprovince t11 ON t1.ToProvince = t11.cpprovince
			     LEFT JOIN BankBranches t12 ON t1.BankBranchID = t12.BankBranchID
			     LEFT JOIN BMTBankDetail t13 ON t12.bankcode = t13.bankcode
			     LEFT JOIN vasproductcategory t14 ON t1.productctg = t14.productctg
			     
			 WHERE NOT (EXISTS ( SELECT 1
			           FROM amtvehicledealer_temp
			          WHERE amtvehicledealer_temp.dealerid = t1.dealerid))
			 </createView>
	</changeSet>

	<changeSet id="66" author="Siva">
		<sql>
			UPDATE SMTPARAMeTERS SET SYSPARMCODE = 'MAX_DAYS_FIN_AUTO_REJECT' WHERE SYSPARMCODE = 'CANCEL_LOAN_FOR_NODISB';
		</sql>
	</changeSet>

<changeSet id="67" author="Ganesh.p">
<comment>New column added in FinanceTypes for Auto Fin Rejection days</comment>
	<addColumn tableName="rmtfinancetypes">
			<column name="AutoRejectionDays" type="Number(3,0)" defaultValue="0"/>
	</addColumn>
	<addColumn tableName="rmtfinancetypes_temp">
			<column name="AutoRejectionDays" type="Number(3,0)" defaultValue="0"/>
	</addColumn>
</changeSet>
<changeSet id="68" author="Ganesh.p">
		<addColumn tableName="FinODDetails">
			<column name="AutoRejectionDays" type="Number(3,0)" defaultValue="0"/>
		</addColumn>
</changeSet>

<changeSet id="69_Pre" author="Ganesh.p" dbms="postgresql">
		<sql>
			select deps_save_and_drop_dependencies('plf','rmtfinancetypes_aview');
		</sql>
</changeSet>
	
<changeSet id="69" author="Ganesh.p">
	<createView viewName="rmtfinancetypes_aview" replaceIfExists="true">
 SELECT t1.fintype,
    t1.fincategory,
    t1.fintypedesc,
    t1.finccy,
    t1.findayscaltype,
    t1.finactype,
    t1.fincontingentactype,
    t1.finisgenref,
    t1.finmaxamount,
    t1.finminamount,
    t1.finisopennewfinac,
    t1.findftstmtfrq,
    t1.finisalwmd,
    t1.finschdmthd,
    t1.finisalwgrace,
    t1.finhistretension,
    t1.equalrepayment,
    t1.finratetype,
    t1.finbaserate,
    t1.finsplrate,
    t1.finintrate,
    t1.finminrate,
    t1.finmaxrate,
    t1.findftintfrq,
    t1.finisintcpz,
    t1.fincpzfrq,
    t1.finisrvwalw,
    t1.finrvwfrq,
    t1.fingrcratetype,
    t1.fingrcbaserate,
    t1.fingrcsplrate,
    t1.fingrcintrate,
    t1.fingrcminrate,
    t1.fingrcmaxrate,
    t1.fingrcdftintfrq,
    t1.fingrcisintcpz,
    t1.fingrccpzfrq,
    t1.fingrcisrvwalw,
    t1.fingrcrvwfrq,
    t1.finminterm,
    t1.finmaxterm,
    t1.findftterms,
    t1.finrpyfrq,
    t1.finrepaymethod,
    t1.finisalwpartialrpy,
    t1.finisalwdifferment,
    t1.finmaxdifferment,
    t1.finisalwearlyrpy,
    t1.finisalwearlysettle,
    t1.finodrpytries,
    t1.finearlypayrule,
    t1.finearlysettlerule,
    t1.findepositrestrictedto,
    t1.finaebuyorinception,
    t1.finaesellormaturity,
    t1.finisactive,
    t1.version,
    t1.lastmntby,
    t1.lastmnton,
    t1.recordstatus,
    t1.rolecode,
    t1.nextrolecode,
    t1.taskid,
    t1.nexttaskid,
    t1.recordtype,
    t1.workflowid,
    t1.stepfinance,
    t1.steppingmandatory,
    t1.alwmanualsteps,
    t1.alwdsteppolicies,
    t1.dftsteppolicy,
    t4.actypedesc AS lovdescfincontingentactypename,
    t5.actypedesc AS lovdescfinactypename,
    t1.finisdwpayrequired,
    t1.finrvwrateapplfor,
    t1.finalwratechangeanydate,
    t1.finisintcpzatgrcend,
    t1.finelgrulecode,
    t1.limitelgrulecode,
    t1.finschcalcodeonrvw,
    t1.alwplandeferment,
    t1.plandefercount,
    t1.finassettype,
    t1.pftpayactype,
    t1.finisopenpftpayacc,
    t31.actypedesc AS lovdescpftpayactypename,
    t1.finisalwgrcrepay,
    t1.fingrcschdmthd,
    t1.fingrcmargin,
    t1.finmargin,
    t1.finscheduleon,
    t1.fingrcscheduleon,
    t1.fincommitmentreq,
    t1.fincollateralreq,
    t1.findepreciationreq,
    t1.findepreciationfrq,
    t1.finbankcontingentactype,
    t1.finprovisionactype,
    t38.actypedesc AS lovdescfinbankcontactypename,
    t39.actypedesc AS lovdescfinprovisionactypename,
    t1.allowriainvestment,
    t1.overridelimit,
    t1.limitrequired,
    t1.fincommitmentovrride,
    t1.fincollateralovrride,
    t1.finpftunchanged,
    t1.applyodpenalty,
    t1.odincgrcdays,
    t1.odchargetype,
    t1.odgracedays,
    t1.odchargecalon,
    t1.odchargeamtorperc,
    t1.odallowwaiver,
    t1.odmaxwaiverperc,
    t1.findivision,
    t48.divisioncodedesc AS lovdescfindivisionname,
    t48.entitycode AS lovdescentitycode,
    t1.finsuspactype,
    t49.actypedesc AS lovdescfinsuspactypename,
    t1.product,
    t1.startdate,
    t1.enddate,
    t1.allowdownpaypgm,
    t1.remarks,
    t1.alwearlypaymethods,
    t1.pastduepftcalmthd,
    t1.pastduepftmargin,
    t1.alwadvancerent,
    t1.grcadvbaserate,
    t1.grcadvmargin,
    t1.grcadvpftrate,
    t1.rpyadvbaserate,
    t1.rpyadvmargin,
    t1.rpyadvpftrate,
    t1.rolloverfinance,
    t1.rolloverfrq,
    t1.downpayrule,
    t59.rulecode AS downpayruledesc,
    t1.finsusptrigger,
    t1.finsuspremarks,
    t1.alwmultipartydisb,
    t1.collateraltype,
    t1.tdsapplicable,
    t1.manualschedule,
    t1.applygrcpricing,
    t1.grcpricingmethod,
    t1.applyrpypricing,
    t1.rpypricingmethod,
    t1.rpyhierarchy,
    t67.rulecode AS grcpricingmethoddesc,
    t68.rulecode AS rpypricingmethoddesc,
    t1.droplineod,
    t1.droppingmethod,
    t1.ratechganyday,
    t1.finrepaypftonfrq,
    t1.alwbpi,
    t1.bpitreatment,
    t1.pftdueschon,
    t1.planemihalw,
    t1.planemihmethod,
    t1.planemihmaxperyear,
    t1.planemihmax,
    t1.planemihlockperiod,
    t1.planemicpz,
    t1.unplanemihlockperiod,
    t1.unplanemicpz,
    t1.reagecpz,
    t1.fddlockperiod,
    t1.alwdrpymethods,
    t1.maxunplannedemi,
    t1.maxreageholidays,
    t1.roundingmode,
    t1.roundingtarget,
    t1.frequencydays,
    t1.quickdisb,
    t1.alwreage,
    t1.alwunplanemiholiday,
    t1.alwmaxdisbcheckreq,
    t1.fintypedesc AS lovdescpromofintypedesc,
    t1.profitcenterid,
    t69.profitcentercode,
    t69.profitcenterdesc,
    t1.productcategory,
    t2.productdesc AS fincategorydesc,
    t1.developerfinance,
    t1.costoffunds,
    t1.chequecapturereq,
    t1.finltvcheck,
    t1.partiallysecured,
    t1.alwadvemi,
    t1.advemiminterms,
    t1.advemimaxterms,
    t1.advemidftterms,
    t1.advemischdmthd,
    t1.bpipftdaysbasis,
    t1.eligibilitymethods,
    t1.alwhybridrate,
    t1.fixedratetenor,
    t1.odmincapamount,
    t1.odrulecode,
    t1.alwzerointacc,
	t1.AutoRejectionDays
   FROM rmtfinancetypes t1
     LEFT JOIN bmtproduct t2 ON t1.fincategory = t2.productcode
     LEFT JOIN rmtaccounttypes t4 ON t1.fincontingentactype = t4.actype
     LEFT JOIN rmtaccounttypes t38 ON t1.finbankcontingentactype = t38.actype
     LEFT JOIN rmtaccounttypes t39 ON t1.finprovisionactype = t39.actype
     LEFT JOIN rmtaccounttypes t5 ON t1.finactype = t5.actype
     LEFT JOIN rmtaccounttypes t31 ON t1.pftpayactype = t31.actype
     LEFT JOIN smtdivisiondetail t48 ON t1.findivision = t48.divisioncode
     LEFT JOIN rmtaccounttypes t49 ON t1.finsuspactype = t49.actype
     LEFT JOIN rules t59 ON t1.downpayrule = t59.ruleid
     LEFT JOIN rules t67 ON t1.grcpricingmethod = t67.ruleid
     LEFT JOIN rules t68 ON t1.rpypricingmethod = t68.ruleid
     LEFT JOIN profitcenters t69 ON t69.profitcenterid = t1.profitcenterid
	</createView>
</changeSet>

<changeSet id="69_Post" author="Ganesh.p" dbms="postgresql">
		<sql>
			select deps_restore_dependencies('plf','rmtfinancetypes_aview');
		</sql>
</changeSet>

<changeSet id="70_Pre" author="Ganesh.p" dbms="postgresql">
		<sql>
			select deps_save_and_drop_dependencies('plf','rmtfinancetypes_orgview');
		</sql>
</changeSet>

<changeSet id="70" author="Ganesh.p">
	<createView viewName="rmtfinancetypes_orgview" replaceIfExists="true">
 SELECT t1.fintype,
    t1.fincategory,
    t1.fintypedesc,
    t1.finccy,
    t1.findayscaltype,
    t1.finactype,
    t1.fincontingentactype,
    t1.finisgenref,
    t1.finmaxamount,
    t1.finminamount,
    t1.finisopennewfinac,
    t1.finisalwmd,
    t1.finschdmthd,
    t1.finisalwgrace,
    t1.equalrepayment,
    t1.finratetype,
    t1.finbaserate,
    t1.finsplrate,
    t1.finintrate,
    t1.finminrate,
    t1.finmaxrate,
    t1.findftintfrq,
    t1.finisintcpz,
    t1.fincpzfrq,
    t1.finisrvwalw,
    t1.finrvwfrq,
    t1.fingrcratetype,
    t1.fingrcbaserate,
    t1.fingrcsplrate,
    t1.fingrcintrate,
    t1.fingrcminrate,
    t1.fingrcmaxrate,
    t1.fingrcdftintfrq,
    t1.fingrcisintcpz,
    t1.fingrccpzfrq,
    t1.fingrcisrvwalw,
    t1.fingrcrvwfrq,
    t1.finminterm,
    t1.finmaxterm,
    t1.findftterms,
    t1.finrpyfrq,
    t1.finrepaymethod,
    t1.finisalwdifferment,
    t1.finmaxdifferment,
    t1.finisactive,
    t1.stepfinance,
    t1.steppingmandatory,
    t1.alwmanualsteps,
    t1.alwdsteppolicies,
    t1.dftsteppolicy,
    t1.finisdwpayrequired,
    t1.finrvwrateapplfor,
    t1.finalwratechangeanydate,
    t1.finisintcpzatgrcend,
    t1.finschcalcodeonrvw,
    t1.alwplandeferment,
    t1.plandefercount,
    t1.pftpayactype,
    t1.finisopenpftpayacc,
    t1.finisalwgrcrepay,
    t1.fingrcschdmthd,
    t1.fingrcmargin,
    t1.finmargin,
    t1.fincommitmentreq,
    t1.fincollateralreq,
    t1.findepreciationreq,
    t1.findepreciationfrq,
    t1.finbankcontingentactype,
    t1.finprovisionactype,
    t1.allowriainvestment,
    t1.overridelimit,
    t1.limitrequired,
    t1.fincommitmentovrride,
    t1.fincollateralovrride,
    t1.finrepaypftonfrq,
    t1.finpftunchanged,
    t1.applyodpenalty,
    t1.odincgrcdays,
    t1.odchargetype,
    t1.odgracedays,
    t1.odchargecalon,
    t1.odchargeamtorperc,
    t1.odallowwaiver,
    t1.odmaxwaiverperc,
    t1.findivision,
    t3.divisioncodedesc AS lovdescfindivisionname,
    t1.finsuspactype,
    t1.product,
    t1.startdate,
    t1.enddate,
    t1.allowdownpaypgm,
    t1.fintypedesc AS lovdescpromofintypedesc,
    t1.remarks,
    t4.policydesc AS lovdescdftsteppolicyname,
    t1.pastduepftcalmthd,
    t1.pastduepftmargin,
    t1.alwadvancerent,
    t1.grcadvbaserate,
    t1.grcadvmargin,
    t1.grcadvpftrate,
    t1.rpyadvbaserate,
    t1.rpyadvmargin,
    t1.rpyadvpftrate,
    t1.rolloverfinance,
    t1.rolloverfrq,
    t1.downpayrule,
    t1.alwmultipartydisb,
    t1.collateraltype,
    t1.tdsapplicable,
    t5.rulecode AS downpayruledesc,
    t1.applygrcpricing,
    t1.applyrpypricing,
    t6.rulecode AS grcpricingmethoddesc,
    t7.rulecode AS rpypricingmethoddesc,
    t1.droplineod,
    t1.droppingmethod,
    t1.ratechganyday,
    t4.steptype AS dftsteppolicytype,
    t1.manualschedule,
    t1.alwbpi,
    t1.bpitreatment,
    t1.pftdueschon,
    t1.planemihalw,
    t1.planemihmethod,
    t1.planemihmaxperyear,
    t1.planemihmax,
    t1.planemihlockperiod,
    t1.planemicpz,
    t1.unplanemihlockperiod,
    t1.unplanemicpz,
    t1.reagecpz,
    t1.fddlockperiod,
    t1.alwdrpymethods,
    t1.maxunplannedemi,
    t1.maxreageholidays,
    t1.roundingmode,
    t1.roundingtarget,
    t1.frequencydays,
    t1.quickdisb,
    t1.alwreage,
    t1.alwunplanemiholiday,
    t1.alwmaxdisbcheckreq,
    t1.productcategory,
    t1.rpyhierarchy,
    t1.developerfinance,
    t3.entitycode AS lovdescentitycode,
    t8.entitydesc AS lovdescentitydesc,
    t1.costoffunds,
    t1.chequecapturereq,
    t1.finltvcheck,
    t1.partiallysecured,
    t1.alwadvemi,
    t1.advemiminterms,
    t1.advemimaxterms,
    t1.advemidftterms,
    t1.advemischdmthd,
    t1.bpipftdaysbasis,
    t1.eligibilitymethods,
    t1.alwhybridrate,
    t1.fixedratetenor,
    t1.odmincapamount,
    t1.odrulecode,
    t1.alwzerointacc,
    t1.finisalwpartialrpy,
	t1.AutoRejectionDays
   FROM rmtfinancetypes t1
     JOIN smtdivisiondetail t3 ON t1.findivision = t3.divisioncode
     LEFT JOIN steppolicyheader t4 ON t1.dftsteppolicy = t4.policycode
     LEFT JOIN rules t5 ON t1.downpayrule = t5.ruleid
     LEFT JOIN rules t6 ON t1.grcpricingmethod = t6.ruleid
     LEFT JOIN rules t7 ON t1.rpypricingmethod = t7.ruleid
     LEFT JOIN entity t8 ON t3.entitycode = t8.entitycode
	</createView>
</changeSet>

<changeSet id="70_Post" author="Ganesh.p" dbms="postgresql">
		<sql>
			select deps_restore_dependencies('plf','rmtfinancetypes_orgview');
		</sql>
</changeSet>

<changeSet id="71_Pre" author="Ganesh.p" dbms="postgresql">
		<sql>
			select deps_save_and_drop_dependencies('plf','rmtfinancetypes_view');
		</sql>
</changeSet>
				
<changeSet id="71" author="Ganesh.p">
	<createView viewName="rmtfinancetypes_view" replaceIfExists="true">
 SELECT t1.fintype,
    t1.fincategory,
    t1.fintypedesc,
    t1.finccy,
    t1.findayscaltype,
    t1.finactype,
    t1.fincontingentactype,
    t1.finisgenref,
    t1.finmaxamount,
    t1.finminamount,
    t1.finisopennewfinac,
    t1.findftstmtfrq,
    t1.finisalwmd,
    t1.finschdmthd,
    t1.finisalwgrace,
    t1.finhistretension,
    t1.equalrepayment,
    t1.finratetype,
    t1.finbaserate,
    t1.finsplrate,
    t1.finintrate,
    t1.finminrate,
    t1.finmaxrate,
    t1.findftintfrq,
    t1.finisintcpz,
    t1.fincpzfrq,
    t1.finisrvwalw,
    t1.finrvwfrq,
    t1.fingrcratetype,
    t1.fingrcbaserate,
    t1.fingrcsplrate,
    t1.fingrcintrate,
    t1.fingrcminrate,
    t1.fingrcmaxrate,
    t1.fingrcdftintfrq,
    t1.fingrcisintcpz,
    t1.fingrccpzfrq,
    t1.fingrcisrvwalw,
    t1.fingrcrvwfrq,
    t1.finminterm,
    t1.finmaxterm,
    t1.findftterms,
    t1.finrpyfrq,
    t1.finrepaymethod,
    t1.finisalwpartialrpy,
    t1.finisalwdifferment,
    t1.finmaxdifferment,
    t1.finisalwearlyrpy,
    t1.finisalwearlysettle,
    t1.finodrpytries,
    t1.finearlypayrule,
    t1.finearlysettlerule,
    t1.findepositrestrictedto,
    t1.finaebuyorinception,
    t1.finaesellormaturity,
    t1.finisactive,
    t1.version,
    t1.lastmntby,
    t1.lastmnton,
    t1.recordstatus,
    t1.rolecode,
    t1.nextrolecode,
    t1.taskid,
    t1.nexttaskid,
    t1.recordtype,
    t1.workflowid,
    t1.stepfinance,
    t1.steppingmandatory,
    t1.alwmanualsteps,
    t1.alwdsteppolicies,
    t1.dftsteppolicy,
    t4.actypedesc AS lovdescfincontingentactypename,
    t5.actypedesc AS lovdescfinactypename,
    t1.finisdwpayrequired,
    t1.finrvwrateapplfor,
    t1.finalwratechangeanydate,
    t1.finisintcpzatgrcend,
    t1.finelgrulecode,
    t1.limitelgrulecode,
    t1.finschcalcodeonrvw,
    t1.alwplandeferment,
    t1.plandefercount,
    t1.finassettype,
    t1.pftpayactype,
    t1.finisopenpftpayacc,
    t31.actypedesc AS lovdescpftpayactypename,
    t1.finisalwgrcrepay,
    t1.fingrcschdmthd,
    t1.fingrcmargin,
    t1.finmargin,
    t1.finscheduleon,
    t1.fingrcscheduleon,
    t1.fincommitmentreq,
    t1.fincollateralreq,
    t1.findepreciationreq,
    t1.findepreciationfrq,
    t1.finbankcontingentactype,
    t1.finprovisionactype,
    t38.actypedesc AS lovdescfinbankcontactypename,
    t39.actypedesc AS lovdescfinprovisionactypename,
    t1.allowriainvestment,
    t1.overridelimit,
    t1.limitrequired,
    t1.fincommitmentovrride,
    t1.fincollateralovrride,
    t1.finpftunchanged,
    t1.applyodpenalty,
    t1.odincgrcdays,
    t1.odchargetype,
    t1.odgracedays,
    t1.odchargecalon,
    t1.odchargeamtorperc,
    t1.odallowwaiver,
    t1.odmaxwaiverperc,
    t1.findivision,
    t48.divisioncodedesc AS lovdescfindivisionname,
    t48.entitycode AS lovdescentitycode,
    t1.finsuspactype,
    t49.actypedesc AS lovdescfinsuspactypename,
    t1.product,
    t1.startdate,
    t1.enddate,
    t1.allowdownpaypgm,
    t1.fintypedesc AS lovdescpromofintypedesc,
    t1.remarks,
    t1.alwearlypaymethods,
    t1.pastduepftcalmthd,
    t1.pastduepftmargin,
    t1.alwadvancerent,
    t1.grcadvbaserate,
    t1.grcadvmargin,
    t1.grcadvpftrate,
    t1.rpyadvbaserate,
    t1.rpyadvmargin,
    t1.rpyadvpftrate,
    t1.rolloverfinance,
    t1.rolloverfrq,
    t1.downpayrule,
    t59.rulecode AS downpayruledesc,
    t1.finsusptrigger,
    t1.finsuspremarks,
    t1.alwmultipartydisb,
    t1.collateraltype,
    t1.tdsapplicable,
    t1.manualschedule,
    t1.applygrcpricing,
    t1.grcpricingmethod,
    t1.applyrpypricing,
    t1.rpypricingmethod,
    t1.rpyhierarchy,
    t67.rulecode AS grcpricingmethoddesc,
    t68.rulecode AS rpypricingmethoddesc,
    t1.droplineod,
    t1.droppingmethod,
    t1.ratechganyday,
    t1.finrepaypftonfrq,
    t1.alwbpi,
    t1.bpitreatment,
    t1.pftdueschon,
    t1.planemihalw,
    t1.planemihmethod,
    t1.planemihmaxperyear,
    t1.planemihmax,
    t1.planemihlockperiod,
    t1.planemicpz,
    t1.unplanemihlockperiod,
    t1.unplanemicpz,
    t1.reagecpz,
    t1.fddlockperiod,
    t1.alwdrpymethods,
    t1.maxunplannedemi,
    t1.maxreageholidays,
    t1.roundingmode,
    t1.roundingtarget,
    t1.frequencydays,
    t1.quickdisb,
    t1.alwmaxdisbcheckreq,
    t1.alwreage,
    t1.alwunplanemiholiday,
    t1.profitcenterid,
    t69.profitcentercode,
    t69.profitcenterdesc,
    t1.productcategory,
    t2.productdesc AS fincategorydesc,
    t1.developerfinance,
    t1.costoffunds,
    t1.chequecapturereq,
    t1.finltvcheck,
    t1.partiallysecured,
    t1.alwadvemi,
    t1.advemiminterms,
    t1.advemimaxterms,
    t1.advemidftterms,
    t1.advemischdmthd,
    t1.bpipftdaysbasis,
    t1.eligibilitymethods,
    t1.alwhybridrate,
    t1.fixedratetenor,
    t1.odmincapamount,
    t1.odrulecode,
    t1.alwzerointacc,
	t1.AutoRejectionDays
   FROM rmtfinancetypes_temp t1
     LEFT JOIN bmtproduct t2 ON t1.fincategory = t2.productcode
     LEFT JOIN rmtaccounttypes t4 ON t1.fincontingentactype = t4.actype
     LEFT JOIN rmtaccounttypes t38 ON t1.finbankcontingentactype = t38.actype
     LEFT JOIN rmtaccounttypes t39 ON t1.finprovisionactype = t39.actype
     LEFT JOIN rmtaccounttypes t5 ON t1.finactype = t5.actype
     LEFT JOIN rmtaccounttypes t31 ON t1.pftpayactype = t31.actype
     LEFT JOIN smtdivisiondetail t48 ON t1.findivision = t48.divisioncode
     LEFT JOIN rmtaccounttypes t49 ON t1.finsuspactype = t49.actype
     LEFT JOIN rules t59 ON t1.downpayrule = t59.ruleid
     LEFT JOIN rules t67 ON t1.grcpricingmethod = t67.ruleid
     LEFT JOIN rules t68 ON t1.rpypricingmethod = t68.ruleid
     LEFT JOIN profitcenters t69 ON t69.profitcenterid = t1.profitcenterid
UNION ALL
 SELECT t1.fintype,
    t1.fincategory,
    t1.fintypedesc,
    t1.finccy,
    t1.findayscaltype,
    t1.finactype,
    t1.fincontingentactype,
    t1.finisgenref,
    t1.finmaxamount,
    t1.finminamount,
    t1.finisopennewfinac,
    t1.findftstmtfrq,
    t1.finisalwmd,
    t1.finschdmthd,
    t1.finisalwgrace,
    t1.finhistretension,
    t1.equalrepayment,
    t1.finratetype,
    t1.finbaserate,
    t1.finsplrate,
    t1.finintrate,
    t1.finminrate,
    t1.finmaxrate,
    t1.findftintfrq,
    t1.finisintcpz,
    t1.fincpzfrq,
    t1.finisrvwalw,
    t1.finrvwfrq,
    t1.fingrcratetype,
    t1.fingrcbaserate,
    t1.fingrcsplrate,
    t1.fingrcintrate,
    t1.fingrcminrate,
    t1.fingrcmaxrate,
    t1.fingrcdftintfrq,
    t1.fingrcisintcpz,
    t1.fingrccpzfrq,
    t1.fingrcisrvwalw,
    t1.fingrcrvwfrq,
    t1.finminterm,
    t1.finmaxterm,
    t1.findftterms,
    t1.finrpyfrq,
    t1.finrepaymethod,
    t1.finisalwpartialrpy,
    t1.finisalwdifferment,
    t1.finmaxdifferment,
    t1.finisalwearlyrpy,
    t1.finisalwearlysettle,
    t1.finodrpytries,
    t1.finearlypayrule,
    t1.finearlysettlerule,
    t1.findepositrestrictedto,
    t1.finaebuyorinception,
    t1.finaesellormaturity,
    t1.finisactive,
    t1.version,
    t1.lastmntby,
    t1.lastmnton,
    t1.recordstatus,
    t1.rolecode,
    t1.nextrolecode,
    t1.taskid,
    t1.nexttaskid,
    t1.recordtype,
    t1.workflowid,
    t1.stepfinance,
    t1.steppingmandatory,
    t1.alwmanualsteps,
    t1.alwdsteppolicies,
    t1.dftsteppolicy,
    t4.actypedesc AS lovdescfincontingentactypename,
    t5.actypedesc AS lovdescfinactypename,
    t1.finisdwpayrequired,
    t1.finrvwrateapplfor,
    t1.finalwratechangeanydate,
    t1.finisintcpzatgrcend,
    t1.finelgrulecode,
    t1.limitelgrulecode,
    t1.finschcalcodeonrvw,
    t1.alwplandeferment,
    t1.plandefercount,
    t1.finassettype,
    t1.pftpayactype,
    t1.finisopenpftpayacc,
    t31.actypedesc AS lovdescpftpayactypename,
    t1.finisalwgrcrepay,
    t1.fingrcschdmthd,
    t1.fingrcmargin,
    t1.finmargin,
    t1.finscheduleon,
    t1.fingrcscheduleon,
    t1.fincommitmentreq,
    t1.fincollateralreq,
    t1.findepreciationreq,
    t1.findepreciationfrq,
    t1.finbankcontingentactype,
    t1.finprovisionactype,
    t38.actypedesc AS lovdescfinbankcontactypename,
    t39.actypedesc AS lovdescfinprovisionactypename,
    t1.allowriainvestment,
    t1.overridelimit,
    t1.limitrequired,
    t1.fincommitmentovrride,
    t1.fincollateralovrride,
    t1.finpftunchanged,
    t1.applyodpenalty,
    t1.odincgrcdays,
    t1.odchargetype,
    t1.odgracedays,
    t1.odchargecalon,
    t1.odchargeamtorperc,
    t1.odallowwaiver,
    t1.odmaxwaiverperc,
    t1.findivision,
    t48.divisioncodedesc AS lovdescfindivisionname,
    t48.entitycode AS lovdescentitycode,
    t1.finsuspactype,
    t49.actypedesc AS lovdescfinsuspactypename,
    t1.product,
    t1.startdate,
    t1.enddate,
    t1.allowdownpaypgm,
    t1.fintypedesc AS lovdescpromofintypedesc,
    t1.remarks,
    t1.alwearlypaymethods,
    t1.pastduepftcalmthd,
    t1.pastduepftmargin,
    t1.alwadvancerent,
    t1.grcadvbaserate,
    t1.grcadvmargin,
    t1.grcadvpftrate,
    t1.rpyadvbaserate,
    t1.rpyadvmargin,
    t1.rpyadvpftrate,
    t1.rolloverfinance,
    t1.rolloverfrq,
    t1.downpayrule,
    t59.rulecode AS downpayruledesc,
    t1.finsusptrigger,
    t1.finsuspremarks,
    t1.alwmultipartydisb,
    t1.collateraltype,
    t1.tdsapplicable,
    t1.manualschedule,
    t1.applygrcpricing,
    t1.grcpricingmethod,
    t1.applyrpypricing,
    t1.rpypricingmethod,
    t1.rpyhierarchy,
    t67.rulecode AS grcpricingmethoddesc,
    t68.rulecode AS rpypricingmethoddesc,
    t1.droplineod,
    t1.droppingmethod,
    t1.ratechganyday,
    t1.finrepaypftonfrq,
    t1.alwbpi,
    t1.bpitreatment,
    t1.pftdueschon,
    t1.planemihalw,
    t1.planemihmethod,
    t1.planemihmaxperyear,
    t1.planemihmax,
    t1.planemihlockperiod,
    t1.planemicpz,
    t1.unplanemihlockperiod,
    t1.unplanemicpz,
    t1.reagecpz,
    t1.fddlockperiod,
    t1.alwdrpymethods,
    t1.maxunplannedemi,
    t1.maxreageholidays,
    t1.roundingmode,
    t1.roundingtarget,
    t1.frequencydays,
    t1.quickdisb,
    t1.alwmaxdisbcheckreq,
    t1.alwreage,
    t1.alwunplanemiholiday,
    t1.profitcenterid,
    t69.profitcentercode,
    t69.profitcenterdesc,
    t1.productcategory,
    t2.productdesc AS fincategorydesc,
    t1.developerfinance,
    t1.costoffunds,
    t1.chequecapturereq,
    t1.finltvcheck,
    t1.partiallysecured,
    t1.alwadvemi,
    t1.advemiminterms,
    t1.advemimaxterms,
    t1.advemidftterms,
    t1.advemischdmthd,
    t1.bpipftdaysbasis,
    t1.eligibilitymethods,
    t1.alwhybridrate,
    t1.fixedratetenor,
    t1.odmincapamount,
    t1.odrulecode,
    t1.alwzerointacc,
	t1.AutoRejectionDays	
   FROM rmtfinancetypes t1
     LEFT JOIN bmtproduct t2 ON t1.fincategory = t2.productcode
     LEFT JOIN rmtaccounttypes t4 ON t1.fincontingentactype = t4.actype
     LEFT JOIN rmtaccounttypes t38 ON t1.finbankcontingentactype = t38.actype
     LEFT JOIN rmtaccounttypes t39 ON t1.finprovisionactype = t39.actype
     LEFT JOIN rmtaccounttypes t5 ON t1.finactype = t5.actype
     LEFT JOIN rmtaccounttypes t31 ON t1.pftpayactype = t31.actype
     LEFT JOIN smtdivisiondetail t48 ON t1.findivision = t48.divisioncode
     LEFT JOIN rmtaccounttypes t49 ON t1.finsuspactype = t49.actype
     LEFT JOIN rules t59 ON t1.downpayrule = t59.ruleid
     LEFT JOIN rules t67 ON t1.grcpricingmethod = t67.ruleid
     LEFT JOIN rules t68 ON t1.rpypricingmethod = t68.ruleid
     LEFT JOIN profitcenters t69 ON t69.profitcenterid = t1.profitcenterid
  WHERE NOT (EXISTS ( SELECT 1 AS expr1
           FROM rmtfinancetypes_temp
          WHERE rmtfinancetypes_temp.fintype = t1.fintype))
	</createView>
</changeSet>	
<changeSet id="71_post" author="Ganesh.p" dbms="postgresql">
		<sql>
			select deps_restore_dependencies('plf','rmtfinancetypes_view');
		</sql>
</changeSet>

<changeSet id="72" author="aditya">
<comment>Inserted payment type values into rbfielddetails</comment>
<sql>
<![CDATA[
INSERT INTO rbfielddetails VALUES ('ELGRULE', 'ELGRULE', 'chequeOrDDAvailable', 'CHEQUE or DD Available', 'nchar', 1, 0, 1, '', 'static', '');
INSERT INTO rbfielddetails VALUES ('ELGRULE', 'ELGRULE', 'neftAvailable', 'NEFT or IMPS or RTGS Available', 'nchar', 1, 0, 1, '', 'static', '');

INSERT INTO rbfielddetails VALUES ('SCORES', 'RSCORE', 'chequeOrDDAvailable', 'CHEQUE or DD Available', 'nchar', 1, 0, 1, '', 'static', '');
INSERT INTO rbfielddetails VALUES ('SCORES', 'RSCORE', 'neftAvailable', 'NEFT or IMPS or RTGS Available', 'nchar', 1, 0, 1, '', 'static', '');

INSERT INTO rbfielddetails VALUES ('AGRRULE', 'AGRRULE', 'chequeOrDDAvailable', 'CHEQUE or DD Available', 'nchar', 1, 0, 1, '', 'static', '');
INSERT INTO rbfielddetails VALUES ('AGRRULE', 'AGRRULE', 'neftAvailable', 'NEFT or IMPS or RTGS Available', 'nchar', 0, 1, 1, '', 'static', '');

INSERT INTO rbfielddetails VALUES ('CLRULE', 'CLRULE', 'chequeOrDDAvailable', 'CHEQUE or DD Available', 'nchar', 1, 0, 1, '', 'static', '');
INSERT INTO rbfielddetails VALUES ('CLRULE', 'CLRULE', 'neftAvailable', 'NEFT or IMPS or RTGS Available', 'nchar', 1, 0, 1, '', 'static', '');
]]>
</sql>
</changeSet>

<changeSet id="73" author="GAnesh.p">
	<dropColumn columnName="AutoRejectionDays" tableName="FinODDetails" />
</changeSet>

<changeSet id="12" author="swami.v">
<comment>New Column of "reenterbeneficiaryaccno" added for Disbursements  tab</comment>
	<addColumn tableName="finadvancepayments">
			<column name="reenterbeneficiaryaccno" type="nvarchar(20)" />
           
  </addColumn>
</changeSet>

<changeSet id="13" author="swami.v">
<comment>New Column of "reenterbeneficiaryaccno" added for Disbursements  tab</comment>
	<addColumn tableName="finadvancepayments_temp">
			<column name="reenterbeneficiaryaccno" type="nvarchar(20)" />
           
  </addColumn>
</changeSet>


<changeSet id="14" author="swami.v">
<comment>New Column of "reenterbeneficiaryaccno" added for Disbursements  tab</comment>
	<addColumn tableName="finadvancepayments_pa">
			<column name="reenterbeneficiaryaccno" type="nvarchar(20)" />
           
  </addColumn>
</changeSet>

 
 <changeSet id="15" author="swami.v">
<comment>New Column of "reenterbeneficiaryaccno" added for Disbursements  tab </comment>
		<createView viewName="finadvancepayments_aview" replaceIfExists="true" > 

 SELECT t1.finreference,
    t1.paymentid,
    t1.paymentseq,
    t1.paymentdetail,
    t1.amttobereleased,
    t1.liabilityholdname,
    t1.transactionref,
    t1.beneficiaryname,
    t1.beneficiaryaccno,
    t1.reenterbeneficiaryaccno,
    t1.description,
    t1.paymenttype,
    t1.llreferenceno,
    t1.lldate,
    t1.custcontribution,
    t1.sellercontribution,
    t1.remarks,
    t1.disbdate,
    t1.disbseq,
    t1.version,
    t1.lastmntby,
    t1.lastmnton,
    t1.recordstatus,
    t1.rolecode,
    t1.nextrolecode,
    t1.taskid,
    t1.nexttaskid,
    t1.recordtype,
    t1.workflowid,
    t1.bankcode,
    t1.payableloc,
    t1.printingloc,
    t1.valuedate,
    t1.bankbranchid,
    t1.phonecountrycode,
    t1.phoneareacode,
    t1.phonenumber,
    t1.clearingdate,
    t1.status,
    t1.active,
    t1.inputdate,
    t1.disbccy,
    t1.poissued,
    t3.bankcode AS branchbankcode,
    t31.bankname AS branchbankname,
    t3.branchcode,
    t3.branchdesc,
    t3.ifsc,
    t3.city,
    t4.bankname,
    t1.partnerbankid,
    t5.partnerbankcode,
    t5.partnerbankname,
    t1.linkedtranid,
    t5.actype AS partnerbankactype,
    t5.accountno AS partnerbankac
   FROM finadvancepayments t1
     LEFT JOIN bankbranches t3 ON t1.bankbranchid = t3.bankbranchid
     LEFT JOIN bmtbankdetail t31 ON t31.bankcode = t3.bankcode
     LEFT JOIN bmtbankdetail t4 ON t1.bankcode = t4.bankcode
     LEFT JOIN partnerbanks t5 ON t5.partnerbankid = t1.partnerbankid
</createView>
	</changeSet>
	
	
	<changeSet id="16" author="swami.v">
<comment>New Column of "reenterbeneficiaryaccno" added for Disbursements  tab </comment>
		<createView viewName="finadvancepayments_tview" replaceIfExists="true" > 


 SELECT t1.finreference,
    t1.paymentid,
    t1.paymentseq,
    t1.paymentdetail,
    t1.amttobereleased,
    t1.liabilityholdname,
    t1.transactionref,
    t1.beneficiaryname,
    t1.beneficiaryaccno,
    t1.reenterbeneficiaryaccno,
    t1.description,
    t1.paymenttype,
    t1.llreferenceno,
    t1.lldate,
    t1.custcontribution,
    t1.sellercontribution,
    t1.remarks,
    t1.disbdate,
    t1.disbseq,
    t1.version,
    t1.lastmntby,
    t1.lastmnton,
    t1.recordstatus,
    t1.rolecode,
    t1.nextrolecode,
    t1.taskid,
    t1.nexttaskid,
    t1.recordtype,
    t1.workflowid,
    t1.bankcode,
    t1.payableloc,
    t1.printingloc,
    t1.valuedate,
    t1.bankbranchid,
    t1.phonecountrycode,
    t1.phoneareacode,
    t1.phonenumber,
    t1.clearingdate,
    t1.status,
    t1.active,
    t1.inputdate,
    t1.disbccy,
    t1.poissued,
    t3.bankcode AS branchbankcode,
    t31.bankname AS branchbankname,
    t3.branchcode,
    t3.branchdesc,
    t3.ifsc,
    t3.city,
    t4.bankname,
    t1.partnerbankid,
    t5.partnerbankcode,
    t5.partnerbankname,
    t1.linkedtranid,
    t5.actype AS partnerbankactype,
    t5.accountno AS partnerbankac
   FROM finadvancepayments_temp t1
     LEFT JOIN bankbranches t3 ON t1.bankbranchid = t3.bankbranchid
     LEFT JOIN bmtbankdetail t31 ON t31.bankcode = t3.bankcode
     LEFT JOIN bmtbankdetail t4 ON t1.bankcode = t4.bankcode
     LEFT JOIN partnerbanks t5 ON t5.partnerbankid = t1.partnerbankid

</createView>
	</changeSet>
	
	
	<changeSet id="17" author="swami.v">
<comment>New Column added of "reenterbeneficiaryaccno" for Disbursements  tab </comment>
		<createView viewName="finadvancepayments_view" replaceIfExists="true" > 

 SELECT t1.finreference,
    t1.paymentid,
    t1.paymentseq,
    t1.paymentdetail,
    t1.amttobereleased,
    t1.liabilityholdname,
    t1.transactionref,
    t1.beneficiaryname,
	t1.beneficiaryaccno,
    t1.reenterbeneficiaryaccno,
    t1.description,
    t1.paymenttype,
    t1.llreferenceno,
    t1.lldate,
    t1.custcontribution,
    t1.sellercontribution,
    t1.remarks,
    t1.disbdate,
    t1.disbseq,
    t1.version,
    t1.lastmntby,
    t1.lastmnton,
    t1.recordstatus,
    t1.rolecode,
    t1.nextrolecode,
    t1.taskid,
    t1.nexttaskid,
    t1.recordtype,
    t1.workflowid,
    t1.bankcode,
    t1.payableloc,
    t1.printingloc,
    t1.valuedate,
    t1.bankbranchid,
    t1.phonecountrycode,
    t1.phoneareacode,
    t1.phonenumber,
    t1.clearingdate,
    t1.status,
    t1.active,
    t1.inputdate,
    t1.disbccy,
    t1.poissued,
    t3.bankcode AS branchbankcode,
    t31.bankname AS branchbankname,
    t3.branchcode,
    t3.branchdesc,
    t3.ifsc,
    t3.city,
    t4.bankname,
    t1.partnerbankid,
    t5.partnerbankcode,
    t5.partnerbankname,
    t1.linkedtranid,
    t5.actype AS partnerbankactype,
    t5.accountno AS partnerbankac
   FROM finadvancepayments_temp t1
     LEFT JOIN bankbranches t3 ON t1.bankbranchid = t3.bankbranchid
     LEFT JOIN bmtbankdetail t31 ON t31.bankcode = t3.bankcode
     LEFT JOIN bmtbankdetail t4 ON t1.bankcode = t4.bankcode
     LEFT JOIN partnerbanks t5 ON t5.partnerbankid = t1.partnerbankid
UNION ALL
 SELECT t1.finreference,
    t1.paymentid,
    t1.paymentseq,
    t1.paymentdetail,
    t1.amttobereleased,
    t1.liabilityholdname,
    t1.transactionref,
    t1.beneficiaryname,
    t1.beneficiaryaccno,
    t1.reenterbeneficiaryaccno,
    t1.description,
    t1.paymenttype,
    t1.llreferenceno,
    t1.lldate,
    t1.custcontribution,
    t1.sellercontribution,
    t1.remarks,
    t1.disbdate,
    t1.disbseq,
    t1.version,
    t1.lastmntby,
    t1.lastmnton,
    t1.recordstatus,
    t1.rolecode,
    t1.nextrolecode,
    t1.taskid,
    t1.nexttaskid,
    t1.recordtype,
    t1.workflowid,
    t1.bankcode,
    t1.payableloc,
    t1.printingloc,
    t1.valuedate,
    t1.bankbranchid,
    t1.phonecountrycode,
    t1.phoneareacode,
    t1.phonenumber,
    t1.clearingdate,
    t1.status,
    t1.active,
    t1.inputdate,
    t1.disbccy,
    t1.poissued,
    t3.bankcode AS branchbankcode,
    t31.bankname AS branchbankname,
    t3.branchcode,
    t3.branchdesc,
    t3.ifsc,
    t3.city,
    t4.bankname,
    t1.partnerbankid,
    t5.partnerbankcode,
    t5.partnerbankname,
    t1.linkedtranid,
    t5.actype AS partnerbankactype,
    t5.accountno AS partnerbankac
   FROM finadvancepayments t1
     LEFT JOIN bankbranches t3 ON t1.bankbranchid = t3.bankbranchid
     LEFT JOIN bmtbankdetail t31 ON t31.bankcode = t3.bankcode
     LEFT JOIN bmtbankdetail t4 ON t1.bankcode = t4.bankcode
     LEFT JOIN partnerbanks t5 ON t5.partnerbankid = t1.partnerbankid
  WHERE NOT (EXISTS ( SELECT 1
           FROM finadvancepayments_temp
          WHERE finadvancepayments_temp.finreference = t1.finreference AND finadvancepayments_temp.paymentseq = t1.paymentseq))

</createView>
	</changeSet>
	
<changeSet id="23" author="ganesh.p">
	<comment> Setting default value </comment>
	<sql>
		update RMTFinanceTypes_temp set AutoRejectionDays=0 where AutoRejectionDays is null;
		update RMTFinanceTypes set AutoRejectionDays=0 where AutoRejectionDays is null;
	</sql>
</changeSet>

<changeSet id="30" author="swami.v">
<comment> Added SECRIGHTS,SECGROUPS,SECGROUPRIGHTS of new column of "reenterbeneficiaryaccno" added</comment>
<sql>


UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS);
UPDATE SEQSECGROUPS SET SEQNO= (SELECT MAX(GRPID) FROM SECGROUPS);
UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);

INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'FinAdvancePaymentsDialog_ReEnterBeneficiaryAccNo','FinAdvancePaymentsDialog',0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0; 
INSERT INTO SECGROUPS SELECT (SELECT MAX(GRPID)+1 FROM SECGROUPS), 'FinAdvancePayments_APPROVER', 'WF Approver for Advance Payments', 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0 FROM SEQSECGROUPS WHERE 0=0;
INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FinAdvancePayments_APPROVER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinAdvancePaymentsDialog_ReEnterBeneficiaryAccNo'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);

UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS);
UPDATE SEQSECGROUPS SET SEQNO= (SELECT MAX(GRPID) FROM SECGROUPS);
UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);
</sql>
</changeSet>	

</databaseChangeLog>