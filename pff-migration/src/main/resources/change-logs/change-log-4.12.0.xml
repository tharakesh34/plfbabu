<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

	<property name="add.schema" value="dbo." dbms="mssql" />
	<property name="add.schema" value="" dbms="oracle" />
	<property name="add.schema" value="" dbms="postgresql" />
	<property name="call.substr" value="substring" dbms="mssql" />
	<property name="call.substr" value="substr" dbms="oracle" />
	<property name="call.substr" value="substring" dbms="postgresql" />
	<property name="call.auditdb" value="PLFAVANSEQC.." dbms="mssql" />
	<property name="call.auditdb" value=" " dbms="oracle" />
	<property name="call.concatenate" value="+" dbms="mssql" />
	<property name="call.concatenate" value="||" dbms="oracle" />
	<property name="call.concatenate" value="||" dbms="postgresql" />
	<property name="call.collength" value="LEN" dbms="mssql" />
	<property name="call.collength" value="LENGTH" dbms="oracle" />
	<property name="call.collength" value="LENGTH" dbms="postgresql" />
	<property name="call.date" value="getdate()" dbms="mssql" />
	<property name="call.date" value="sysdate" dbms="oracle" />
	<property name="call.date" value="now()" dbms="postgresql" />


	<!--  <changeSet id="pre_run_for_pgp" author="Jayant" runAlways="true"
		dbms="postgresql">
		<sql>
			Set search_path = plf,public,pg_catalog;
		</sql>
	</changeSet>
	
	<changeSet id="2.1" author="somasekhar">
		<createView replaceIfExists="true" viewName="DE_FILE_CONTROL_VIEW">
	     SELECT DS.ID,
		 	DC.NAME,
		    DC.UPLOADPATH FILELOCATION,
		  	DS.FILENAME,
		  	DS.ENDTIME,
		  	DS.STATUS,
		  	DC.id AS CONFIGID,
		  	DC.POSTEVENT,
		  	DS.VALUEDATE,
            DS.USERID,
            TH.STARTDATE,
            TH.ENDDATE
		FROM DATA_ENGINE_CONFIG DC
		INNER JOIN DATA_ENGINE_STATUS DS ON DS.NAME = DC.NAME
        LEFT join TRIAL_BALANCE_HEADER TH on TH.FILENAME=DS.FILENAME
	 </createView>
</changeSet>
	
<changeSet id="3" author="somasekhar">
	 <sql>
	  delete from SMTPARAMETERS where SYSPARMCODE='FINANCIAL_YEAR_START_MONTH';
 
      Insert into SMTPARAMETERS (SYSPARMCODE,SYSPARMDESC,SYSPARMTYPE,SYSPARMMAINT,SYSPARMVALUE,SYSPARMLENGTH,SYSPARMDEC,SYSPARMLIST,SYSPARMVALDMOD,SYSPARMDESCRIPTION,VERSION,LASTMNTBY,LASTMNTON,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID) values ('FINANCIAL_YEAR_START_MONTH','Finance year Start month','String',1,'4',4,0,null,null,'Finance year Start month',1,1000,current_timestamp,'Approved',null,null,null,null,null,0);

      delete from SMTPARAMETERS where SYSPARMCODE='FINANCIAL_YEAR_END_MONTH';
 
      Insert into SMTPARAMETERS (SYSPARMCODE,SYSPARMDESC,SYSPARMTYPE,SYSPARMMAINT,SYSPARMVALUE,SYSPARMLENGTH,SYSPARMDEC,SYSPARMLIST,SYSPARMVALDMOD,SYSPARMDESCRIPTION,VERSION,LASTMNTBY,LASTMNTON,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID) values ('FINANCIAL_YEAR_END_MONTH','Finance year END month','String',1,'3',4,0,null,null,'Finance year END month',1,1000,current_timestamp,'Approved',null,null,null,null,null,0);
	 
	 </sql>
</changeSet>
	
<changeSet id="4" author="somasekhar">
	 <sql>
	 update DATA_ENGINE_CONFIG set header='Row:{, ${COMPANY_NAME}}Row:{, ${REPORT_NAME}}Row:{, ${TRANSACTION_DURATION}}Row:{Currency: ${CURRENCY}Row:{PARENT GROUP,PLF LEDGER, SAP GL,DESCRIPTION,OPENING BALANCE,CR/DR,DEBIT AMOUNT,CREDIT AMOUNT,CLOSING BALANCE,CR/DR,LOAN TYPE}' where name='TRIAL_BALANCE_EXPORT_CONSOLIDATE';
     update DATA_ENGINE_CONFIG set header='Row:{, ${COMPANY_NAME}}Row:{, ${REPORT_NAME}}Row:{, ${TRANSACTION_DURATION}}Row:{Currency: ${CURRENCY}Row:{STATE,PARENT GROUP,PLF LEDGER,SAP GL,DESCRIPTION,OPENING BALANCE,CR/DR,DEBIT AMOUNT,CREDIT AMOUNT,CLOSING BALANCE,CR/DR,LOAN TYPE}' where name='TRIAL_BALANCE_EXPORT_STATE';
	 
	 </sql>
</changeSet>

<changeSet id="7" author="swami.v">
<sql>
Insert into RBFieldDetails (rbmodule, rbevent,  rbfldname ,rbflddesc , rbfldtype, rbfldlen , rbforcalflds,rbforbldflds, rbfldtablename , rbstflds, modulecode) values ('PVR','PVR','vd_recordStatus','Record Status','nvarchar','100','1','1','','static','');

</sql>
</changeSet>
	<changeSet id="9" author="Dheerendra">
		<createTable tableName="collection_financedetails">
			<column name="id" type="int" autoIncrement="true">
				<constraints primaryKey="true" primaryKeyName="PK_CLCTN_FINDTL_ID" />
			</column>
			<column name="loanreference" type="varchar(20)">
				<constraints nullable="false" />
			</column>
			<column name="custcif" type="varchar(20)" />
			<column name="loantype" type="varchar(8)" />
			<column name="loantypedesc" type="varchar(50)">
				<constraints nullable="false" />
			</column>
			<column name="currency" type="varchar(3)" />
			<column name="productcode" type="varchar(8)" />
			<column name="productdesc" type="varchar(50)" />

			<column name="branchcode" type="varchar(9)">
				<constraints nullable="false" />
			</column>
			<column name="branchname" type="varchar(50)" />
			<column name="finstartdate" type="datetime" />
			<column name="maturitydate" type="datetime" />
			<column name="noinst" type="decimal(6,0)" />
			<column name="nopaidinst" type="decimal(6,0)" />
			<column name="firstrepaydate" type="datetime" />
			<column name="firstrepayamount" type="decimal(18,0)" />
			<column name="nschddate" type="datetime" />
			<column name="nschdpri" type="decimal(18,0)" />
			<column name="nschdpft" type="decimal(18,0)" />
			<column name="totoutstandingamt" type="decimal(18,0)" />
			<column name="overduedate" type="datetime" />
			<column name="noodinst" type="decimal(4,0)" />
			<column name="curoddays" type="decimal(6,0)" />
			<column name="actualoddays" type="decimal(6,0)" />
			<column name="odprincipal" type="decimal(18,0)" />
			<column name="odprofit" type="decimal(18,0)" />
			<column name="duebucket" type="decimal(4,0)" />
			<column name="penaltypaid" type="decimal(18,0)" />
			<column name="penaltydue" type="decimal(18,0)" />
			<column name="penaltywaived" type="decimal(18,0)" />
			<column name="bouncecharges" type="decimal(18,0)" />
			<column name="finstatus" type="varchar(8)" />
			<column name="finstsreason" type="varchar(1)" />
			<column name="finworststatus" type="varchar(8)" />
			<column name="finactive" type="boolean" />
			<column name="recordstatus" type="varchar(2)" />

		</createTable>
	</changeSet>
	
<changeSet id="5" author="aditya">
<comment>New column added for Loan Type Details(extended details)</comment>
	<addColumn tableName="rmtfinancetypes">
			<column name="odmincapamount" type="decimal(18,0)" defaultValueNumeric="0.00"/>
	</addColumn>
	<addColumn tableName="rmtfinancetypes_temp">
			<column name="odmincapamount" type="decimal(18,0)" defaultValueNumeric="0.00"/>
	</addColumn>
</changeSet>

<changeSet id="6.2" author="aditya">
	 <createView viewName="rmtfinancetypes_view" replaceIfExists="true">
		SELECT t1.fintype,
    t1.fincategory,
    t1.fintypedesc,
    t1.finccy,
    t1.findayscaltype,
    t1.finactype,
    t1.fincontingentactype,
    t1.finisgenref,
    t1.finmaxamount,
    t1.finminamount,
    t1.finisopennewfinac,
    t1.findftstmtfrq,
    t1.finisalwmd,
    t1.finschdmthd,
    t1.finisalwgrace,
    t1.finhistretension,
    t1.equalrepayment,
    t1.finratetype,
    t1.finbaserate,
    t1.finsplrate,
    t1.finintrate,
    t1.finminrate,
    t1.finmaxrate,
    t1.findftintfrq,
    t1.finisintcpz,
    t1.fincpzfrq,
    t1.finisrvwalw,
    t1.finrvwfrq,
    t1.fingrcratetype,
    t1.fingrcbaserate,
    t1.fingrcsplrate,
    t1.fingrcintrate,
    t1.fingrcminrate,
    t1.fingrcmaxrate,
    t1.fingrcdftintfrq,
    t1.fingrcisintcpz,
    t1.fingrccpzfrq,
    t1.fingrcisrvwalw,
    t1.fingrcrvwfrq,
    t1.finminterm,
    t1.finmaxterm,
    t1.findftterms,
    t1.finrpyfrq,
    t1.finrepaymethod,
    t1.finisalwpartialrpy,
    t1.finisalwdifferment,
    t1.finmaxdifferment,
    t1.finisalwearlyrpy,
    t1.finisalwearlysettle,
    t1.finodrpytries,
    t1.finearlypayrule,
    t1.finearlysettlerule,
    t1.findepositrestrictedto,
    t1.finaebuyorinception,
    t1.finaesellormaturity,
    t1.finisactive,
    t1.version,
    t1.lastmntby,
    t1.lastmnton,
    t1.recordstatus,
    t1.rolecode,
    t1.nextrolecode,
    t1.taskid,
    t1.nexttaskid,
    t1.recordtype,
    t1.workflowid,
    t1.stepfinance,
    t1.steppingmandatory,
    t1.alwmanualsteps,
    t1.alwdsteppolicies,
    t1.dftsteppolicy,
    t4.actypedesc AS lovdescfincontingentactypename,
    t5.actypedesc AS lovdescfinactypename,
    t1.finisdwpayrequired,
    t1.finrvwrateapplfor,
    t1.finalwratechangeanydate,
    t1.finisintcpzatgrcend,
    t1.finelgrulecode,
    t1.limitelgrulecode,
    t1.finschcalcodeonrvw,
    t1.alwplandeferment,
    t1.plandefercount,
    t1.finassettype,
    t1.pftpayactype,
    t1.finisopenpftpayacc,
    t31.actypedesc AS lovdescpftpayactypename,
    t1.finisalwgrcrepay,
    t1.fingrcschdmthd,
    t1.fingrcmargin,
    t1.finmargin,
    t1.finscheduleon,
    t1.fingrcscheduleon,
    t1.fincommitmentreq,
    t1.fincollateralreq,
    t1.findepreciationreq,
    t1.findepreciationfrq,
    t1.finbankcontingentactype,
    t1.finprovisionactype,
    t38.actypedesc AS lovdescfinbankcontactypename,
    t39.actypedesc AS lovdescfinprovisionactypename,
    t1.allowriainvestment,
    t1.overridelimit,
    t1.limitrequired,
    t1.fincommitmentovrride,
    t1.fincollateralovrride,
    t1.finpftunchanged,
    t1.applyodpenalty,
    t1.odincgrcdays,
    t1.odchargetype,
    t1.odgracedays,
    t1.odchargecalon,
    t1.odchargeamtorperc,
    t1.odallowwaiver,
    t1.odmaxwaiverperc,
    t1.findivision,
    t48.divisioncodedesc AS lovdescfindivisionname,
    t48.entitycode AS lovdescentitycode,
    t1.finsuspactype,
    t49.actypedesc AS lovdescfinsuspactypename,
    t1.product,
    t1.startdate,
    t1.enddate,
    t1.allowdownpaypgm,
    t1.fintypedesc AS lovdescpromofintypedesc,
    t1.remarks,
    t1.alwearlypaymethods,
    t1.pastduepftcalmthd,
    t1.pastduepftmargin,
    t1.alwadvancerent,
    t1.grcadvbaserate,
    t1.grcadvmargin,
    t1.grcadvpftrate,
    t1.rpyadvbaserate,
    t1.rpyadvmargin,
    t1.rpyadvpftrate,
    t1.rolloverfinance,
    t1.rolloverfrq,
    t1.downpayrule,
    t59.rulecode AS downpayruledesc,
    t1.finsusptrigger,
    t1.finsuspremarks,
    t1.alwmultipartydisb,
    t1.collateraltype,
    t1.tdsapplicable,
    t1.manualschedule,
    t1.applygrcpricing,
    t1.grcpricingmethod,
    t1.applyrpypricing,
    t1.rpypricingmethod,
    t1.rpyhierarchy,
    t67.rulecode AS grcpricingmethoddesc,
    t68.rulecode AS rpypricingmethoddesc,
    t1.droplineod,
    t1.droppingmethod,
    t1.ratechganyday,
    t1.finrepaypftonfrq,
    t1.alwbpi,
    t1.bpitreatment,
    t1.pftdueschon,
    t1.planemihalw,
    t1.planemihmethod,
    t1.planemihmaxperyear,
    t1.planemihmax,
    t1.planemihlockperiod,
    t1.planemicpz,
    t1.unplanemihlockperiod,
    t1.unplanemicpz,
    t1.reagecpz,
    t1.fddlockperiod,
    t1.alwdrpymethods,
    t1.maxunplannedemi,
    t1.maxreageholidays,
    t1.roundingmode,
    t1.roundingtarget,
    t1.frequencydays,
    t1.quickdisb,
    t1.alwmaxdisbcheckreq,
    t1.alwreage,
    t1.alwunplanemiholiday,
    t1.profitcenterid,
    t69.profitcentercode,
    t69.profitcenterdesc,
    t1.productcategory,
    t2.productdesc AS fincategorydesc,
    t1.developerfinance,
    t1.costoffunds,
    t1.chequecapturereq,
    t1.finltvcheck,
    t1.partiallysecured,
    t1.alwadvemi,
    t1.advemiminterms,
    t1.advemimaxterms,
    t1.advemidftterms,
    t1.advemischdmthd,
    t1.bpipftdaysbasis,
    t1.eligibilitymethods,
    t1.alwhybridrate,
    t1.fixedratetenor,
    t1.odmincapamount
   FROM rmtfinancetypes_temp t1
     LEFT JOIN bmtproduct t2 ON t1.fincategory = t2.productcode
     LEFT JOIN rmtaccounttypes t4 ON t1.fincontingentactype = t4.actype
     LEFT JOIN rmtaccounttypes t38 ON t1.finbankcontingentactype = t38.actype
     LEFT JOIN rmtaccounttypes t39 ON t1.finprovisionactype = t39.actype
     LEFT JOIN rmtaccounttypes t5 ON t1.finactype = t5.actype
     LEFT JOIN rmtaccounttypes t31 ON t1.pftpayactype = t31.actype
     LEFT JOIN smtdivisiondetail t48 ON t1.findivision = t48.divisioncode
     LEFT JOIN rmtaccounttypes t49 ON t1.finsuspactype = t49.actype
     LEFT JOIN rules t59 ON t1.downpayrule = t59.ruleid
     LEFT JOIN rules t67 ON t1.grcpricingmethod = t67.ruleid
     LEFT JOIN rules t68 ON t1.rpypricingmethod = t68.ruleid
     LEFT JOIN profitcenters t69 ON t69.profitcenterid = t1.profitcenterid
UNION ALL
 SELECT t1.fintype,
    t1.fincategory,
    t1.fintypedesc,
    t1.finccy,
    t1.findayscaltype,
    t1.finactype,
    t1.fincontingentactype,
    t1.finisgenref,
    t1.finmaxamount,
    t1.finminamount,
    t1.finisopennewfinac,
    t1.findftstmtfrq,
    t1.finisalwmd,
    t1.finschdmthd,
    t1.finisalwgrace,
    t1.finhistretension,
    t1.equalrepayment,
    t1.finratetype,
    t1.finbaserate,
    t1.finsplrate,
    t1.finintrate,
    t1.finminrate,
    t1.finmaxrate,
    t1.findftintfrq,
    t1.finisintcpz,
    t1.fincpzfrq,
    t1.finisrvwalw,
    t1.finrvwfrq,
    t1.fingrcratetype,
    t1.fingrcbaserate,
    t1.fingrcsplrate,
    t1.fingrcintrate,
    t1.fingrcminrate,
    t1.fingrcmaxrate,
    t1.fingrcdftintfrq,
    t1.fingrcisintcpz,
    t1.fingrccpzfrq,
    t1.fingrcisrvwalw,
    t1.fingrcrvwfrq,
    t1.finminterm,
    t1.finmaxterm,
    t1.findftterms,
    t1.finrpyfrq,
    t1.finrepaymethod,
    t1.finisalwpartialrpy,
    t1.finisalwdifferment,
    t1.finmaxdifferment,
    t1.finisalwearlyrpy,
    t1.finisalwearlysettle,
    t1.finodrpytries,
    t1.finearlypayrule,
    t1.finearlysettlerule,
    t1.findepositrestrictedto,
    t1.finaebuyorinception,
    t1.finaesellormaturity,
    t1.finisactive,
    t1.version,
    t1.lastmntby,
    t1.lastmnton,
    t1.recordstatus,
    t1.rolecode,
    t1.nextrolecode,
    t1.taskid,
    t1.nexttaskid,
    t1.recordtype,
    t1.workflowid,
    t1.stepfinance,
    t1.steppingmandatory,
    t1.alwmanualsteps,
    t1.alwdsteppolicies,
    t1.dftsteppolicy,
    t4.actypedesc AS lovdescfincontingentactypename,
    t5.actypedesc AS lovdescfinactypename,
    t1.finisdwpayrequired,
    t1.finrvwrateapplfor,
    t1.finalwratechangeanydate,
    t1.finisintcpzatgrcend,
    t1.finelgrulecode,
    t1.limitelgrulecode,
    t1.finschcalcodeonrvw,
    t1.alwplandeferment,
    t1.plandefercount,
    t1.finassettype,
    t1.pftpayactype,
    t1.finisopenpftpayacc,
    t31.actypedesc AS lovdescpftpayactypename,
    t1.finisalwgrcrepay,
    t1.fingrcschdmthd,
    t1.fingrcmargin,
    t1.finmargin,
    t1.finscheduleon,
    t1.fingrcscheduleon,
    t1.fincommitmentreq,
    t1.fincollateralreq,
    t1.findepreciationreq,
    t1.findepreciationfrq,
    t1.finbankcontingentactype,
    t1.finprovisionactype,
    t38.actypedesc AS lovdescfinbankcontactypename,
    t39.actypedesc AS lovdescfinprovisionactypename,
    t1.allowriainvestment,
    t1.overridelimit,
    t1.limitrequired,
    t1.fincommitmentovrride,
    t1.fincollateralovrride,
    t1.finpftunchanged,
    t1.applyodpenalty,
    t1.odincgrcdays,
    t1.odchargetype,
    t1.odgracedays,
    t1.odchargecalon,
    t1.odchargeamtorperc,
    t1.odallowwaiver,
    t1.odmaxwaiverperc,
    t1.findivision,
    t48.divisioncodedesc AS lovdescfindivisionname,
    t48.entitycode AS lovdescentitycode,
    t1.finsuspactype,
    t49.actypedesc AS lovdescfinsuspactypename,
    t1.product,
    t1.startdate,
    t1.enddate,
    t1.allowdownpaypgm,
    t1.fintypedesc AS lovdescpromofintypedesc,
    t1.remarks,
    t1.alwearlypaymethods,
    t1.pastduepftcalmthd,
    t1.pastduepftmargin,
    t1.alwadvancerent,
    t1.grcadvbaserate,
    t1.grcadvmargin,
    t1.grcadvpftrate,
    t1.rpyadvbaserate,
    t1.rpyadvmargin,
    t1.rpyadvpftrate,
    t1.rolloverfinance,
    t1.rolloverfrq,
    t1.downpayrule,
    t59.rulecode AS downpayruledesc,
    t1.finsusptrigger,
    t1.finsuspremarks,
    t1.alwmultipartydisb,
    t1.collateraltype,
    t1.tdsapplicable,
    t1.manualschedule,
    t1.applygrcpricing,
    t1.grcpricingmethod,
    t1.applyrpypricing,
    t1.rpypricingmethod,
    t1.rpyhierarchy,
    t67.rulecode AS grcpricingmethoddesc,
    t68.rulecode AS rpypricingmethoddesc,
    t1.droplineod,
    t1.droppingmethod,
    t1.ratechganyday,
    t1.finrepaypftonfrq,
    t1.alwbpi,
    t1.bpitreatment,
    t1.pftdueschon,
    t1.planemihalw,
    t1.planemihmethod,
    t1.planemihmaxperyear,
    t1.planemihmax,
    t1.planemihlockperiod,
    t1.planemicpz,
    t1.unplanemihlockperiod,
    t1.unplanemicpz,
    t1.reagecpz,
    t1.fddlockperiod,
    t1.alwdrpymethods,
    t1.maxunplannedemi,
    t1.maxreageholidays,
    t1.roundingmode,
    t1.roundingtarget,
    t1.frequencydays,
    t1.quickdisb,
    t1.alwmaxdisbcheckreq,
    t1.alwreage,
    t1.alwunplanemiholiday,
    t1.profitcenterid,
    t69.profitcentercode,
    t69.profitcenterdesc,
    t1.productcategory,
    t2.productdesc AS fincategorydesc,
    t1.developerfinance,
    t1.costoffunds,
    t1.chequecapturereq,
    t1.finltvcheck,
    t1.partiallysecured,
    t1.alwadvemi,
    t1.advemiminterms,
    t1.advemimaxterms,
    t1.advemidftterms,
    t1.advemischdmthd,
    t1.bpipftdaysbasis,
    t1.eligibilitymethods,
    t1.alwhybridrate,
    t1.fixedratetenor,
    t1.odmincapamount
   FROM rmtfinancetypes t1
     LEFT JOIN bmtproduct t2 ON t1.fincategory = t2.productcode
     LEFT JOIN rmtaccounttypes t4 ON t1.fincontingentactype = t4.actype
     LEFT JOIN rmtaccounttypes t38 ON t1.finbankcontingentactype = t38.actype
     LEFT JOIN rmtaccounttypes t39 ON t1.finprovisionactype = t39.actype
     LEFT JOIN rmtaccounttypes t5 ON t1.finactype = t5.actype
     LEFT JOIN rmtaccounttypes t31 ON t1.pftpayactype = t31.actype
     LEFT JOIN smtdivisiondetail t48 ON t1.findivision = t48.divisioncode
     LEFT JOIN rmtaccounttypes t49 ON t1.finsuspactype = t49.actype
     LEFT JOIN rules t59 ON t1.downpayrule = t59.ruleid
     LEFT JOIN rules t67 ON t1.grcpricingmethod = t67.ruleid
     LEFT JOIN rules t68 ON t1.rpypricingmethod = t68.ruleid
     LEFT JOIN profitcenters t69 ON t69.profitcenterid = t1.profitcenterid
  WHERE NOT (EXISTS ( SELECT 1 AS expr1
           FROM rmtfinancetypes_temp
          WHERE rmtfinancetypes_temp.fintype = t1.fintype))
</createView>
</changeSet>

<changeSet id="7_Pre.1" author="Aditya" dbms="postgresql">
	<sql>
		select deps_save_and_drop_dependencies('plf','rmtfinancetypes_aview');
	</sql>
</changeSet>
<changeSet id="7.2" author="aditya">
<createView viewName="rmtfinancetypes_aview" replaceIfExists="true">
SELECT t1.fintype,
    t1.fincategory,
    t1.fintypedesc,
    t1.finccy,
    t1.findayscaltype,
    t1.finactype,
    t1.fincontingentactype,
    t1.finisgenref,
    t1.finmaxamount,
    t1.finminamount,
    t1.finisopennewfinac,
    t1.findftstmtfrq,
    t1.finisalwmd,
    t1.finschdmthd,
    t1.finisalwgrace,
    t1.finhistretension,
    t1.equalrepayment,
    t1.finratetype,
    t1.finbaserate,
    t1.finsplrate,
    t1.finintrate,
    t1.finminrate,
    t1.finmaxrate,
    t1.findftintfrq,
    t1.finisintcpz,
    t1.fincpzfrq,
    t1.finisrvwalw,
    t1.finrvwfrq,
    t1.fingrcratetype,
    t1.fingrcbaserate,
    t1.fingrcsplrate,
    t1.fingrcintrate,
    t1.fingrcminrate,
    t1.fingrcmaxrate,
    t1.fingrcdftintfrq,
    t1.fingrcisintcpz,
    t1.fingrccpzfrq,
    t1.fingrcisrvwalw,
    t1.fingrcrvwfrq,
    t1.finminterm,
    t1.finmaxterm,
    t1.findftterms,
    t1.finrpyfrq,
    t1.finrepaymethod,
    t1.finisalwpartialrpy,
    t1.finisalwdifferment,
    t1.finmaxdifferment,
    t1.finisalwearlyrpy,
    t1.finisalwearlysettle,
    t1.finodrpytries,
    t1.finearlypayrule,
    t1.finearlysettlerule,
    t1.findepositrestrictedto,
    t1.finaebuyorinception,
    t1.finaesellormaturity,
    t1.finisactive,
    t1.version,
    t1.lastmntby,
    t1.lastmnton,
    t1.recordstatus,
    t1.rolecode,
    t1.nextrolecode,
    t1.taskid,
    t1.nexttaskid,
    t1.recordtype,
    t1.workflowid,
    t1.stepfinance,
    t1.steppingmandatory,
    t1.alwmanualsteps,
    t1.alwdsteppolicies,
    t1.dftsteppolicy,
    t4.actypedesc AS lovdescfincontingentactypename,
    t5.actypedesc AS lovdescfinactypename,
    t1.finisdwpayrequired,
    t1.finrvwrateapplfor,
    t1.finalwratechangeanydate,
    t1.finisintcpzatgrcend,
    t1.finelgrulecode,
    t1.limitelgrulecode,
    t1.finschcalcodeonrvw,
    t1.alwplandeferment,
    t1.plandefercount,
    t1.finassettype,
    t1.pftpayactype,
    t1.finisopenpftpayacc,
    t31.actypedesc AS lovdescpftpayactypename,
    t1.finisalwgrcrepay,
    t1.fingrcschdmthd,
    t1.fingrcmargin,
    t1.finmargin,
    t1.finscheduleon,
    t1.fingrcscheduleon,
    t1.fincommitmentreq,
    t1.fincollateralreq,
    t1.findepreciationreq,
    t1.findepreciationfrq,
    t1.finbankcontingentactype,
    t1.finprovisionactype,
    t38.actypedesc AS lovdescfinbankcontactypename,
    t39.actypedesc AS lovdescfinprovisionactypename,
    t1.allowriainvestment,
    t1.overridelimit,
    t1.limitrequired,
    t1.fincommitmentovrride,
    t1.fincollateralovrride,
    t1.finpftunchanged,
    t1.applyodpenalty,
    t1.odincgrcdays,
    t1.odchargetype,
    t1.odgracedays,
    t1.odchargecalon,
    t1.odchargeamtorperc,
    t1.odallowwaiver,
    t1.odmaxwaiverperc,
    t1.findivision,
    t48.divisioncodedesc AS lovdescfindivisionname,
    t48.entitycode AS lovdescentitycode,
    t1.finsuspactype,
    t49.actypedesc AS lovdescfinsuspactypename,
    t1.product,
    t1.startdate,
    t1.enddate,
    t1.allowdownpaypgm,
    t1.remarks,
    t1.alwearlypaymethods,
    t1.pastduepftcalmthd,
    t1.pastduepftmargin,
    t1.alwadvancerent,
    t1.grcadvbaserate,
    t1.grcadvmargin,
    t1.grcadvpftrate,
    t1.rpyadvbaserate,
    t1.rpyadvmargin,
    t1.rpyadvpftrate,
    t1.rolloverfinance,
    t1.rolloverfrq,
    t1.downpayrule,
    t59.rulecode AS downpayruledesc,
    t1.finsusptrigger,
    t1.finsuspremarks,
    t1.alwmultipartydisb,
    t1.collateraltype,
    t1.tdsapplicable,
    t1.manualschedule,
    t1.applygrcpricing,
    t1.grcpricingmethod,
    t1.applyrpypricing,
    t1.rpypricingmethod,
    t1.rpyhierarchy,
    t67.rulecode AS grcpricingmethoddesc,
    t68.rulecode AS rpypricingmethoddesc,
    t1.droplineod,
    t1.droppingmethod,
    t1.ratechganyday,
    t1.finrepaypftonfrq,
    t1.alwbpi,
    t1.bpitreatment,
    t1.pftdueschon,
    t1.planemihalw,
    t1.planemihmethod,
    t1.planemihmaxperyear,
    t1.planemihmax,
    t1.planemihlockperiod,
    t1.planemicpz,
    t1.unplanemihlockperiod,
    t1.unplanemicpz,
    t1.reagecpz,
    t1.fddlockperiod,
    t1.alwdrpymethods,
    t1.maxunplannedemi,
    t1.maxreageholidays,
    t1.roundingmode,
    t1.roundingtarget,
    t1.frequencydays,
    t1.quickdisb,
    t1.alwreage,
    t1.alwunplanemiholiday,
    t1.alwmaxdisbcheckreq,
    t1.fintypedesc AS lovdescpromofintypedesc,
    t1.profitcenterid,
    t69.profitcentercode,
    t69.profitcenterdesc,
    t1.productcategory,
    t2.productdesc AS fincategorydesc,
    t1.developerfinance,
    t1.costoffunds,
    t1.chequecapturereq,
    t1.finltvcheck,
    t1.partiallysecured,
    t1.alwadvemi,
    t1.advemiminterms,
    t1.advemimaxterms,
    t1.advemidftterms,
    t1.advemischdmthd,
    t1.bpipftdaysbasis,
    t1.eligibilitymethods,
    t1.alwhybridrate,
    t1.fixedratetenor,
    t1.odmincapamount
   FROM rmtfinancetypes t1
     LEFT JOIN bmtproduct t2 ON t1.fincategory = t2.productcode
     LEFT JOIN rmtaccounttypes t4 ON t1.fincontingentactype = t4.actype
     LEFT JOIN rmtaccounttypes t38 ON t1.finbankcontingentactype = t38.actype
     LEFT JOIN rmtaccounttypes t39 ON t1.finprovisionactype = t39.actype
     LEFT JOIN rmtaccounttypes t5 ON t1.finactype = t5.actype
     LEFT JOIN rmtaccounttypes t31 ON t1.pftpayactype = t31.actype
     LEFT JOIN smtdivisiondetail t48 ON t1.findivision = t48.divisioncode
     LEFT JOIN rmtaccounttypes t49 ON t1.finsuspactype = t49.actype
     LEFT JOIN rules t59 ON t1.downpayrule = t59.ruleid
     LEFT JOIN rules t67 ON t1.grcpricingmethod = t67.ruleid
     LEFT JOIN rules t68 ON t1.rpypricingmethod = t68.ruleid
     LEFT JOIN profitcenters t69 ON t69.profitcenterid = t1.profitcenterid
</createView>
</changeSet>
<changeSet id="7_Post.1" author="Aditya" dbms="postgresql">
	<sql>
		select deps_restore_dependencies('plf','rmtfinancetypes_aview');
	</sql>
</changeSet>

<changeSet id="8" author="swami.v">
<sql>
Insert into templatefields (module, field, fielddesc, fieldformat) values ('PVR','vd_dealerName','Name','A');
Insert into templatefields (module, field, fielddesc, fieldformat) values ('PVR','vd_email','e-Mail','A');
Insert into templatefields (module, field, fielddesc, fieldformat) values ('PVR','vd_dealerTelephone','Telephone','A');
Insert into templatefields (module, field, fielddesc, fieldformat)values ('PVR','vd_dealerFax','Fax','A');
Insert into templatefields (module, field, fielddesc, fieldformat) values ('PVR','vd_dealerAddress1','Address1','A');
Insert into templatefields (module, field, fielddesc, fieldformat) values ('PVR','vd_dealerAddress2','Address2','A');
Insert into templatefields (module, field, fielddesc, fieldformat) values ('PVR','vd_dealerAddress3','Address3','A');
Insert into templatefields (module, field, fielddesc, fieldformat) values ('PVR','vd_lovDescCountry','Country','A');
Insert into templatefields (module, field, fielddesc, fieldformat) values ('PVR','vd_lovDescProvince','Province/State','A');
Insert into templatefields (module, field, fielddesc, fieldformat) values ('PVR','vd_lovDescCity','City','A');
Insert into templatefields (module, field, fielddesc, fieldformat) values ('PVR','vd_pOBox','pOBox','A');
Insert into templatefields (module, field, fielddesc, fieldformat) values ('PVR','vd_zipCode','PIN/ZIP Code','A');
Insert into templatefields (module, field, fielddesc, fieldformat) values ('PVR','vd_active','Active','A');
Insert into templatefields (module, field, fielddesc, fieldformat) values ('PVR','vd_code','Code','A');
Insert into templatefields (module, field, fielddesc, fieldformat) values ('PVR','vd_panNumber','PAN Number','A');
Insert into templatefields (module, field, fielddesc, fieldformat) values ('PVR','vd_uidNumber','Aadhar Number','A');
Insert into templatefields (module, field, fielddesc, fieldformat) values ('PVR','vd_taxNumber','GST Number','A');
Insert into templatefields (module, field, fielddesc, fieldformat) values ('PVR','vd_fromprovinceName','From Province/Stater','A');
Insert into templatefields (module, field, fielddesc, fieldformat) values ('PVR','vd_toprovinceName','To Province/State','A');
Insert into templatefields (module, field, fielddesc, fieldformat) values ('PVR','vd_accountNo','Account Number','A');
Insert into templatefields (module, field, fielddesc, fieldformat) values ('PVR','vd_accountType','Account Type','A');
Insert into templatefields (module, field, fielddesc, fieldformat) values ('PVR','vd_bankBranchCodeName','Branch Name','A');
Insert into templatefields (module, field, fielddesc, fieldformat) values ('PVR','vd_bankName','Bank Name','A');
Insert into templatefields (module, field, fielddesc, fieldformat) values ('PVR','vd_branchIFSCCode','Branch IFSC Code','A');
Insert into templatefields (module, field, fielddesc, fieldformat) values ('PVR','vd_branchMICRCode','Branch MICR Code','A');
Insert into templatefields (module, field, fielddesc, fieldformat) values ('PVR','vd_branchCity','Branch City','A');
</sql>
</changeSet>

<changeSet id="9" author="Kranthi Kumar K">
<sql>
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'finAmount', 'Finance Amount', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'nextRepayDate', 'NextRepayDate', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'ct_custAddrCountry', 'custAddrCountry', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'numberOfTerms', 'numberOfTerms', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'repayProfitRate', 'repayProfitRate', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'finRepaymentAmount', 'finRepaymentAmount', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'repayFrq', 'RepayFrq', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'finStartDate', 'FinStartDate', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'ct_custRO1', 'Source', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'custAddrStreet', 'custAddrStreet', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'custAddrCity', 'custAddrCity', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'custAddrProvince', 'custAddrProvince', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'custAddrHNbr', 'custAddrHNbr', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'custAddrLine1', 'custAddrLine1', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'ct_repayProfitRate', 'RepayProfitRate', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'custAddrLine2', 'custAddrLine2', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'firstRepay', 'FirstRepay', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'curReducingRate', 'CurReducingRate', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'custAddrFlatNo', 'custAddrFlatNo', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'schd_calculatedRate', 'CalculatedRate', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'schd_repayAmount', 'RepayAmount', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'finReference', 'Loan Reference Number', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'finBranchContact', 'Branch Contact Number', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'valueDate', 'Receipt Value Date', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'amount', 'Receipt Amount', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'custCoreBank', 'Cust Core Bank ID', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'finCurrAssetValue', 'FinCurrent Asset Value', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'finAssetValue', 'Fin Asset Value', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'repaymentFrequency', 'Repayment Frequency', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'firstDueDate', 'First Due Date Frequency', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'maturityDate', 'Maturity Date', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'graceBaseRate', 'Grace BaseRate', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'graceSpecialRate', 'Grace SpecialRate', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'repayBaseRate', 'Repay BaseRate', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'repaySpecialRate', 'Repay SpecialRate', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'repayMargin', 'Repay Margin', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'finBranch', 'Fin Branch', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'finCcy', 'FinCcy', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'finDivision', 'FinDivision', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'accountsOfficerDesc', 'Accounts Officer Desc', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'dsaCode', 'DSA Code', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'dsaDesc', 'DSA Desc', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'DMACodeDesc', 'DMA CodeDesc', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'totalProfit', 'Total Profit', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'lastRepay', 'Last Repay', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'custAddrDistrict', 'custAddrDistrict', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'custAddrPincode', 'custAddrPincode', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'custMobileNumber', 'Customer Mobile Number', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'custEmailId', 'Customer Email Id', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'receiptAmount', 'Receipt Amount', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'custFlatNbr', 'CustFlatNbr', 'A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'custPOBox', 'CustPOBox','A');
INSERT INTO templatefields (module, field, fielddesc, fieldformat) VALUES ('FIN', 'ct_custShrtName', 'Customer Name','A');
</sql>
</changeSet>
	
<changeSet id="10" author="aditya">
<createView viewName="rmtfinancetypes_orgview" replaceIfExists="true">
 SELECT t1.fintype,
    t1.fincategory,
    t1.fintypedesc,
    t1.finccy,
    t1.findayscaltype,
    t1.finactype,
    t1.fincontingentactype,
    t1.finisgenref,
    t1.finmaxamount,
    t1.finminamount,
    t1.finisopennewfinac,
    t1.finisalwmd,
    t1.finschdmthd,
    t1.finisalwgrace,
    t1.equalrepayment,
    t1.finratetype,
    t1.finbaserate,
    t1.finsplrate,
    t1.finintrate,
    t1.finminrate,
    t1.finmaxrate,
    t1.findftintfrq,
    t1.finisintcpz,
    t1.fincpzfrq,
    t1.finisrvwalw,
    t1.finrvwfrq,
    t1.fingrcratetype,
    t1.fingrcbaserate,
    t1.fingrcsplrate,
    t1.fingrcintrate,
    t1.fingrcminrate,
    t1.fingrcmaxrate,
    t1.fingrcdftintfrq,
    t1.fingrcisintcpz,
    t1.fingrccpzfrq,
    t1.fingrcisrvwalw,
    t1.fingrcrvwfrq,
    t1.finminterm,
    t1.finmaxterm,
    t1.findftterms,
    t1.finrpyfrq,
    t1.finrepaymethod,
    t1.finisalwdifferment,
    t1.finmaxdifferment,
    t1.finisactive,
    t1.stepfinance,
    t1.steppingmandatory,
    t1.alwmanualsteps,
    t1.alwdsteppolicies,
    t1.dftsteppolicy,
    t1.finisdwpayrequired,
    t1.finrvwrateapplfor,
    t1.finalwratechangeanydate,
    t1.finisintcpzatgrcend,
    t1.finschcalcodeonrvw,
    t1.alwplandeferment,
    t1.plandefercount,
    t1.pftpayactype,
    t1.finisopenpftpayacc,
    t1.finisalwgrcrepay,
    t1.fingrcschdmthd,
    t1.fingrcmargin,
    t1.finmargin,
    t1.fincommitmentreq,
    t1.fincollateralreq,
    t1.findepreciationreq,
    t1.findepreciationfrq,
    t1.finbankcontingentactype,
    t1.finprovisionactype,
    t1.allowriainvestment,
    t1.overridelimit,
    t1.limitrequired,
    t1.fincommitmentovrride,
    t1.fincollateralovrride,
    t1.finrepaypftonfrq,
    t1.finpftunchanged,
    t1.applyodpenalty,
    t1.odincgrcdays,
    t1.odchargetype,
    t1.odgracedays,
    t1.odchargecalon,
    t1.odchargeamtorperc,
    t1.odallowwaiver,
    t1.odmaxwaiverperc,
    t1.findivision,
    t3.divisioncodedesc AS lovdescfindivisionname,
    t1.finsuspactype,
    t1.product,
    t1.startdate,
    t1.enddate,
    t1.allowdownpaypgm,
    t1.fintypedesc AS lovdescpromofintypedesc,
    t1.remarks,
    t4.policydesc AS lovdescdftsteppolicyname,
    t1.pastduepftcalmthd,
    t1.pastduepftmargin,
    t1.alwadvancerent,
    t1.grcadvbaserate,
    t1.grcadvmargin,
    t1.grcadvpftrate,
    t1.rpyadvbaserate,
    t1.rpyadvmargin,
    t1.rpyadvpftrate,
    t1.rolloverfinance,
    t1.rolloverfrq,
    t1.downpayrule,
    t1.alwmultipartydisb,
    t1.collateraltype,
    t1.tdsapplicable,
    t5.rulecode AS downpayruledesc,
    t1.applygrcpricing,
    t1.applyrpypricing,
    t6.rulecode AS grcpricingmethoddesc,
    t7.rulecode AS rpypricingmethoddesc,
    t1.droplineod,
    t1.droppingmethod,
    t1.ratechganyday,
    t4.steptype AS dftsteppolicytype,
    t1.manualschedule,
    t1.alwbpi,
    t1.bpitreatment,
    t1.pftdueschon,
    t1.planemihalw,
    t1.planemihmethod,
    t1.planemihmaxperyear,
    t1.planemihmax,
    t1.planemihlockperiod,
    t1.planemicpz,
    t1.unplanemihlockperiod,
    t1.unplanemicpz,
    t1.reagecpz,
    t1.fddlockperiod,
    t1.alwdrpymethods,
    t1.maxunplannedemi,
    t1.maxreageholidays,
    t1.roundingmode,
    t1.roundingtarget,
    t1.frequencydays,
    t1.quickdisb,
    t1.alwreage,
    t1.alwunplanemiholiday,
    t1.alwmaxdisbcheckreq,
    t1.productcategory,
    t1.rpyhierarchy,
    t1.developerfinance,
    t3.entitycode AS lovdescentitycode,
    t8.entitydesc AS lovdescentitydesc,
    t1.costoffunds,
    t1.chequecapturereq,
    t1.finltvcheck,
    t1.partiallysecured,
    t1.alwadvemi,
    t1.advemiminterms,
    t1.advemimaxterms,
    t1.advemidftterms,
    t1.advemischdmthd,
    t1.bpipftdaysbasis,
    t1.eligibilitymethods,
    t1.alwhybridrate,
    t1.fixedratetenor,
    t1.odmincapamount
   FROM rmtfinancetypes t1
     JOIN smtdivisiondetail t3 ON t1.findivision = t3.divisioncode
     LEFT JOIN steppolicyheader t4 ON t1.dftsteppolicy = t4.policycode
     LEFT JOIN rules t5 ON t1.downpayrule = t5.ruleid
     LEFT JOIN rules t6 ON t1.grcpricingmethod = t6.ruleid
     LEFT JOIN rules t7 ON t1.rpypricingmethod = t7.ruleid
     LEFT JOIN entity t8 ON t3.entitycode = t8.entitycode
</createView>
</changeSet>
<changeSet id="11" author="Dheerendra">
		<addColumn tableName="collection_financedetails">
			<column name="RepayMethod" type="varchar(8)" />
		</addColumn>
	</changeSet>
	
<changeSet id="11" author="Siva">
		<addColumn tableName="RejectDocumentDetails">
			<column name="DocOriginal" type="boolean" defaultValueBoolean="false"/>
		</addColumn>
</changeSet>
	
	<changeSet id="12" author="Kranthi Kumar.K">
	<sql>
	<![CDATA[
		delete from templatefields where field='ct_custShrtName';
		delete from templatefields where field='repayProfitRate';
		delete from templatefields where field='ct_repayProfitRate';
		delete from templatefields where field='schd_repayAmount';
		delete from templatefields where field='ct_custAddrCountry';
		delete from templatefields where field='ct_repayProfitRate';
		delete from templatefields where field='ct_custRO1';
		
		
		INSERT INTO templatefields(module, field, fielddesc, fieldformat) VALUES ('FIN', 'custShrtName', 'Customer Name', 'A');
		INSERT INTO templatefields(module, field, fielddesc, fieldformat) VALUES ('FIN', 'repayProfitRate', 'Repay ProfitRate', 'A');
		INSERT INTO templatefields(module, field, fielddesc, fieldformat) VALUES ('FIN', 'schd_repayAmount', 'Schd RepayAmount', 'A');
		INSERT INTO templatefields(module, field, fielddesc, fieldformat) VALUES ('FIN', 'custAddrCountry', 'custAddrCountry', 'A');
		INSERT INTO templatefields(module, field, fielddesc, fieldformat) VALUES ('FIN', 'custRO1', 'Source', 'A');
	]]>
	</sql>
</changeSet>
	
<changeSet id="13" author="Siva">
	<sql>
		UPDATE finscheduledetails SET RecalLock = 0 WHERE RecalLock IS NULL;
		UPDATE finscheduledetails_log SET RecalLock = 0 WHERE RecalLock IS NULL;
		UPDATE finscheduledetails_pa SET RecalLock = 0 WHERE RecalLock IS NULL;
		UPDATE finscheduledetails_temp SET RecalLock = 0 WHERE RecalLock IS NULL;
		UPDATE rejectfinscheduledetails SET RecalLock = 0 WHERE RecalLock IS NULL;
		UPDATE wiffinscheduledetails SET RecalLock = 0 WHERE RecalLock IS NULL;
		UPDATE wiffinscheduledetails_temp SET RecalLock = 0 WHERE RecalLock IS NULL;
	</sql>
</changeSet>
	
<changeSet id="14" author="aditya">
	<sql>
	   update reportlist set fieldtype='String,int,BigDecimal' where code='ChequeHeader';
	</sql>
</changeSet>
 -->
<changeSet  id="17" author="kranthikumar.k">
<sql>
<![CDATA[
		INSERT INTO templatefields(module, field, fielddesc, fieldformat) VALUES ('FIN', 'custShrtName', 'Customer Name', 'A');
		INSERT INTO templatefields(module, field, fielddesc, fieldformat) VALUES ('FIN', 'repayProfitRate', 'Repay ProfitRate', 'A');
		INSERT INTO templatefields(module, field, fielddesc, fieldformat) VALUES ('FIN', 'schd_repayAmount', 'Schd RepayAmount', 'A');
		INSERT INTO templatefields(module, field, fielddesc, fieldformat) VALUES ('FIN', 'custAddrCountry', 'custAddrCountry', 'A');
		INSERT INTO templatefields(module, field, fielddesc, fieldformat) VALUES ('FIN', 'custRO1', 'Source', 'A');
]]>
</sql>
</changeSet>
</databaseChangeLog>