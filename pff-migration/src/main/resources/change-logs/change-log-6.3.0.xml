<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

	<property name="add.schema" value="dbo." dbms="mssql" />
	<property name="add.schema" value="" dbms="oracle" />
	<property name="add.schema" value="" dbms="postgresql" />
	<property name="call.substr" value="substring" dbms="mssql" />
	<property name="call.substr" value="substr" dbms="oracle" />
	<property name="call.substr" value="substring" dbms="postgresql" />
	<property name="call.auditdb" value="PLFAVANSEQC.." dbms="mssql" />
	<property name="call.auditdb" value=" " dbms="oracle" />
	<property name="call.concatenate" value="+" dbms="mssql" />
	<property name="call.concatenate" value="||" dbms="oracle" />
	<property name="call.concatenate" value="||" dbms="postgresql" />
	<property name="call.collength" value="LEN" dbms="mssql" />
	<property name="call.collength" value="LENGTH" dbms="oracle" />
	<property name="call.collength" value="LENGTH" dbms="postgresql" />
	<property name="call.date" value="getdate()" dbms="mssql" />
	<property name="call.date" value="sysdate" dbms="oracle" />
	<property name="call.date" value="now()" dbms="postgresql" />

	<changeSet id="pre_run_for_pgp" author="Gopal.p" runAlways="true" dbms="postgresql">
		<sql>
			Set search_path = plf,public,pg_catalog;
		</sql>
	</changeSet>

	<changeSet id="ST#713.1" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes">
			<column name="ClosureThresholdLimit" type="decimal(18,0)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#713.1.1" author="Sravani.S">
		<sql>
			<![CDATA[	
				UPDATE RMTFINANCETYPES SET CLOSURETHRESHOLDLIMIT = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.1.2" author="Sravani.S">
		<addNotNullConstraint tableName="RMTFinanceTypes" columnName="ClosureThresholdLimit"
			columnDataType="boolean" />
	</changeSet>

	<changeSet id="ST#713.1.3" author="Sravani.S" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE RMTFINANCETYPES ADD CONSTRAINT DF_FT_CLOSURETHRESHOLDLIMIT DEFAULT 0 FOR CLOSURETHRESHOLDLIMIT;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.1.3" author="Sravani.S" dbms="postgresql, oracle">
		<addDefaultValue tableName="RMTFinanceTypes" columnName="ClosureThresholdLimit" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#713.2" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes">
			<column name="MaxFPPCalType" type="Varchar(8)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#713.3" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes">
			<column name="MaxFPPAmount" type="decimal(18,0)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#713.3.1" author="Sravani.S">
		<sql>
			<![CDATA[	
				UPDATE RMTFINANCETYPES SET MAXFPPAMOUNT = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.3.2" author="Sravani.S">
		<addNotNullConstraint tableName="RMTFinanceTypes" columnName="MaxFPPAmount"
			columnDataType="decimal(18,0)" />
	</changeSet>

	<changeSet id="ST#713.3.3" author="Sravani.S" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE RMTFINANCETYPES ADD CONSTRAINT DF_FT_MAXFPPAMOUNT DEFAULT 0 FOR MAXFPPAMOUNT;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.3.3" author="Sravani.S" dbms="postgresql, oracle">
		<addDefaultValue tableName="RMTFinanceTypes" columnName="MaxFPPAmount" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#713.4" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes">
			<column name="MaxFPPPer" type="decimal(5,2)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#713.4.1" author="Sravani.S">
		<sql>
			<![CDATA[	
				UPDATE RMTFINANCETYPES SET MAXFPPPER = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.4.2" author="Sravani.S">
		<addNotNullConstraint tableName="RMTFinanceTypes" columnName="MaxFPPPer"
			columnDataType="decimal(5,2)" />
	</changeSet>

	<changeSet id="ST#713.4.3" author="Sravani.S" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE RMTFINANCETYPES ADD CONSTRAINT DF_FT_MAXFPPPER DEFAULT 0 FOR MAXFPPPER;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.4.3" author="Sravani.S" dbms="postgresql, oracle">
		<addDefaultValue tableName="RMTFinanceTypes" columnName="MaxFPPAmount" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#713.5" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes">
			<column name="MaxFPPCalOn" type="Varchar(50)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#713.6" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes_Temp">
			<column name="ClosureThresholdLimit" type="decimal(18,0)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#713.6.1" author="Sravani.S">
		<sql>
			<![CDATA[	
				UPDATE RMTFINANCETYPES_TEMP SET CLOSURETHRESHOLDLIMIT = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.6.2" author="Sravani.S">
		<addNotNullConstraint tableName="RMTFinanceTypes_Temp" columnName="ClosureThresholdLimit"
			columnDataType="boolean" />
	</changeSet>

	<changeSet id="ST#713.6.3" author="Sravani.S" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE RMTFINANCETYPES_TEMP ADD CONSTRAINT DF_FT_T_CLOSURETHRESHOLDLIMIT DEFAULT 0 FOR CLOSURETHRESHOLDLIMIT;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.6.3" author="Sravani.S" dbms="postgresql, oracle">
		<addDefaultValue tableName="RMTFinanceTypes_Temp" columnName="ClosureThresholdLimit" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#713.7" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes_Temp">
			<column name="MaxFPPCalType" type="Varchar(8)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#713.8" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes_Temp">
			<column name="MaxFPPAmount" type="decimal(18,0)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#713.8.1" author="Sravani.S">
		<sql>
			<![CDATA[	
				UPDATE RMTFINANCETYPES_TEMP SET MAXFPPAMOUNT = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.8.2" author="Sravani.S">
		<addNotNullConstraint tableName="RMTFinanceTypes_Temp" columnName="MaxFPPAmount"
			columnDataType="decimal(18,0)" />
	</changeSet>

	<changeSet id="ST#713.8.3" author="Sravani.S" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE RMTFINANCETYPES_TEMP ADD CONSTRAINT DF_FT_MAXFPPAMOUNT DEFAULT 0 FOR MAXFPPAMOUNT;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.8.3" author="Sravani.S" dbms="postgresql, oracle">
		<addDefaultValue tableName="RMTFinanceTypes_Temp" columnName="MaxFPPAmount" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#713.9" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes_Temp">
			<column name="MaxFPPPer" type="decimal(5,2)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#713.9.1" author="Sravani.S">
		<sql>
			<![CDATA[	
				UPDATE RMTFINANCETYPES_TEMP SET MAXFPPPER = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.9.2" author="Sravani.S">
		<addNotNullConstraint tableName="RMTFinanceTypes_Temp" columnName="MaxFPPPer"
			columnDataType="decimal(5,2)" />
	</changeSet>

	<changeSet id="ST#713.9.3" author="Sravani.S" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE RMTFINANCETYPES_TEMP ADD CONSTRAINT DF_FT_MAXFPPPER DEFAULT 0 FOR MAXFPPPER;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.9.3" author="Sravani.S" dbms="postgresql, oracle">
		<addDefaultValue tableName="RMTFinanceTypes_Temp" columnName="MaxFPPAmount" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#713.10" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes_Temp">
			<column name="MaxFPPCalOn" type="Varchar(50)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#713.11" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes_Temp">
			<column name="PPLockinPeriod" type="int" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#713.11.1" author="Sravani.S">
		<sql>
			<![CDATA[	
				UPDATE RMTFinanceTypes_Temp SET PPLockinPeriod = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.12" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes_Temp">
			<column name="ESLockinPeriod" type="int" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#713.12.1" author="Sravani.S">
		<sql>
			<![CDATA[	
				UPDATE RMTFinanceTypes_Temp SET ESLockinPeriod = 0;
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#713.13" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes_Temp">
			<column name="MinPPCalType" type="VARCHAR(8)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#713.14" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes_Temp">
			<column name="MinPPAmount" type="decimal(18,0)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#713.14.1" author="Sravani.S">
		<sql>
			<![CDATA[	
				UPDATE RMTFINANCETYPES_TEMP SET MINPPAMOUNT = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.14.2" author="Sravani.S">
		<addNotNullConstraint tableName="RMTFinanceTypes_Temp" columnName="MinPPAmount"
			columnDataType="decimal(18,0)" />
	</changeSet>

	<changeSet id="ST#713.14.3" author="Sravani.S" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE RMTFINANCETYPES_TEMP ADD CONSTRAINT DF_FT_MINPPAMOUNT DEFAULT 0 FOR MINPPAMOUNT;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.14.3" author="Sravani.S" dbms="postgresql, oracle">
		<addDefaultValue tableName="RMTFinanceTypes_Temp" columnName="MinPPAmount" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#713.15" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes_Temp">
			<column name="MinPPPercentage" type="decimal(5,2)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#713.15.1" author="Sravani.S">
		<sql>
			<![CDATA[	
				UPDATE RMTFINANCETYPES_TEMP SET MINPPPERCENTAGE = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.15.2" author="Sravani.S">
		<addNotNullConstraint tableName="RMTFinanceTypes_Temp" columnName="MinPPPercentage"
			columnDataType="decimal(5,2)" />
	</changeSet>

	<changeSet id="ST#713.15.3" author="Sravani.S" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE RMTFINANCETYPES_TEMP ADD CONSTRAINT DF_FT_MINPPPERCENTAGE DEFAULT 0 FOR MINPPPERCENTAGE;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.15.3" author="Sravani.S" dbms="postgresql, oracle">
		<addDefaultValue tableName="RMTFinanceTypes_Temp" columnName="MinPPPercentage" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#713.16" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes_Temp">
			<column name="MinPPCalOn" type="VARCHAR(8)" />
		</addColumn>
	</changeSet>
	<changeSet id="ST#713.17" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes_Temp">
			<column name="MaxPPCalType" type="VARCHAR(8)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#713.18" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes_Temp">
			<column name="MaxPPAmount" type="decimal(18,0)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#713.18.1" author="Sravani.S">
		<sql>
			<![CDATA[	
				UPDATE RMTFINANCETYPES_TEMP SET MAXPPAMOUNT = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.18.2" author="Sravani.S">
		<addNotNullConstraint tableName="RMTFinanceTypes_Temp" columnName="MaxPPAmount"
			columnDataType="decimal(18,0)" />
	</changeSet>

	<changeSet id="ST#713.18.3" author="Sravani.S" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE RMTFINANCETYPES_TEMP ADD CONSTRAINT DF_FT_MAXPPAMOUNT DEFAULT 0 FOR MAXPPAMOUNT;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.18.3" author="Sravani.S" dbms="postgresql, oracle">
		<addDefaultValue tableName="RMTFinanceTypes_Temp" columnName="MaxPPAmount" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#713.19" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes_Temp">
			<column name="MaxPPPercentage" type="decimal(5,2)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#713.19.1" author="Sravani.S">
		<sql>
			<![CDATA[	
				UPDATE RMTFINANCETYPES_TEMP SET MAXPPPERCENTAGE = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.19.2" author="Sravani.S">
		<addNotNullConstraint tableName="RMTFinanceTypes_Temp" columnName="MaxPPPercentage"
			columnDataType="decimal(5,2)" />
	</changeSet>

	<changeSet id="ST#713.19.3" author="Sravani.S" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE RMTFINANCETYPES_TEMP ADD CONSTRAINT DF_FT_MAXPPPERCENTAGE DEFAULT 0 FOR MAXPPPERCENTAGE;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.19.3" author="Sravani.S" dbms="postgresql, oracle">
		<addDefaultValue tableName="RMTFinanceTypes_Temp" columnName="MaxPPPercentage" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#713.20" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes_Temp">
			<column name="MaxPPCalOn" type="VARCHAR(8)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#713.21" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes">
			<column name="PPLockinPeriod" type="int" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#713.21.1" author="Sravani.S">
		<sql>
			<![CDATA[	
				UPDATE RMTFinanceTypes SET PPLockinPeriod = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.22" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes">
			<column name="ESLockinPeriod" type="int" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#713.22.1" author="Sravani.S">
		<sql>
			<![CDATA[	
				UPDATE RMTFinanceTypes SET ESLockinPeriod = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.23" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes">
			<column name="MinPPCalType" type="VARCHAR(8)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#713.24" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes">
			<column name="MinPPAmount" type="decimal(18,0)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#713.24.1" author="Sravani.S">
		<sql>
			<![CDATA[	
				UPDATE RMTFINANCETYPES SET MINPPAMOUNT = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.24.2" author="Sravani.S">
		<addNotNullConstraint tableName="RMTFinanceTypes" columnName="MinPPAmount"
			columnDataType="decimal(18,0)" />
	</changeSet>

	<changeSet id="ST#713.24.3" author="Sravani.S" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE RMTFINANCETYPES ADD CONSTRAINT DF_FT_MINPPAMOUNT DEFAULT 0 FOR MINPPAMOUNT;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.24.3" author="Sravani.S" dbms="postgresql, oracle">
		<addDefaultValue tableName="RMTFinanceTypes" columnName="MinPPAmount" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#713.25" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes">
			<column name="MinPPPercentage" type="decimal(5,2)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#713.25.1" author="Sravani.S">
		<sql>
			<![CDATA[	
				UPDATE RMTFINANCETYPES SET MINPPPERCENTAGE = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.25.2" author="Sravani.S">
		<addNotNullConstraint tableName="RMTFinanceTypes" columnName="MinPPPercentage"
			columnDataType="decimal(5,2)" />
	</changeSet>

	<changeSet id="ST#713.25.3" author="Sravani.S" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE RMTFINANCETYPES ADD CONSTRAINT DF_FT_MINPPPERCENTAGE DEFAULT 0 FOR MINPPPERCENTAGE;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.25.3" author="Sravani.S" dbms="postgresql, oracle">
		<addDefaultValue tableName="RMTFinanceTypes" columnName="MinPPPercentage" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#713.26" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes">
			<column name="MinPPCalOn" type="VARCHAR(8)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#713.27" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes">
			<column name="MaxPPCalType" type="VARCHAR(8)" />
		</addColumn>
	</changeSet>


	<changeSet id="ST#713.28" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes">
			<column name="MaxPPAmount" type="decimal(18,0)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#713.28.1" author="Sravani.S">
		<sql>
			<![CDATA[	
				UPDATE RMTFINANCETYPES SET MAXPPAMOUNT = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.28.2" author="Sravani.S">
		<addNotNullConstraint tableName="RMTFinanceTypes" columnName="MaxPPAmount"
			columnDataType="decimal(18,0)" />
	</changeSet>

	<changeSet id="ST#713.28.3" author="Sravani.S" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE RMTFINANCETYPES ADD CONSTRAINT DF_FT_MAXPPAMOUNT DEFAULT 0 FOR MAXPPAMOUNT;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.28.3" author="Sravani.S" dbms="postgresql, oracle">
		<addDefaultValue tableName="RMTFinanceTypes" columnName="MaxPPAmount" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#713.29" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes">
			<column name="MaxPPPercentage" type="decimal(5,2)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#713.29.1" author="Sravani.S">
		<sql>
			<![CDATA[	
				UPDATE RMTFINANCETYPES SET MAXPPPERCENTAGE = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.29.2" author="Sravani.S">
		<addNotNullConstraint tableName="RMTFinanceTypes" columnName="MaxPPPercentage"
			columnDataType="decimal(5,2)" />
	</changeSet>

	<changeSet id="ST#713.29.3" author="Sravani.S" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE RMTFINANCETYPES ADD CONSTRAINT DF_FT_MAXPPPERCENTAGE DEFAULT 0 FOR MAXPPPERCENTAGE;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.29.3" author="Sravani.S" dbms="postgresql, oracle">
		<addDefaultValue tableName="RMTFinanceTypes" columnName="MaxPPPercentage" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#713.30" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes">
			<column name="MaxPPCalOn" type="VARCHAR(8)" />
		</addColumn>
	</changeSet>

	<changeSet id="TK#2509.1" author="Anilkumar.G">
		<addColumn tableName="RMTFINANCETYPES">
			<column name="AllowAutoRefund" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="TK#2509.1.1" author="Anilkumar.G">
		<sql>
			<![CDATA[  
				UPDATE RMTFINANCETYPES SET ALLOWAUTOREFUND = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="TK#2509.1.2" author="Anilkumar.G" dbms="postgresql, oracle">
		<addDefaultValue columnName="AllowAutoRefund" tableName="RMTFINANCETYPES" defaultValue="0" />
	</changeSet>

	<changeSet id="TK#2509.1.2" author="Anilkumar.G" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE RMTFINANCETYPES ADD CONSTRAINT DF_FT_ALWAUTOREF DEFAULT 0 FOR ALLOWAUTOREFUND;
			]]>
		</sql>
	</changeSet>

	<changeSet id="TK#2509.2" author="Anilkumar.G">
		<addColumn tableName="RMTFINANCETYPES">
			<column name="MaxAutoRefund" type="Decimal(18,0)" />
		</addColumn>
	</changeSet>

	<changeSet id="TK#2509.2.1" author="Anilkumar.G">
		<sql>
			<![CDATA[  
				UPDATE RMTFINANCETYPES SET MAXAUTOREFUND = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="TK#2509.2.2" author="Anilkumar.G" dbms="postgresql, oracle">
		<addDefaultValue columnName="MaxAutoRefund" tableName="RMTFINANCETYPES" defaultValue="0" />
	</changeSet>

	<changeSet id="TK#2509.2.2" author="Anilkumar.G" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE RMTFINANCETYPES ADD CONSTRAINT DF_FT_MAXAUTOREF DEFAULT 0 FOR MAXAUTOREFUND;
			]]>
		</sql>
	</changeSet>

	<changeSet id="TK#2509.3" author="Anilkumar.G">
		<addColumn tableName="RMTFINANCETYPES">
			<column name="MinAutoRefund" type="Decimal(18,0)" />
		</addColumn>
	</changeSet>

	<changeSet id="TK#2509.3.1" author="Anilkumar.G">
		<sql>
			<![CDATA[  
				UPDATE RMTFINANCETYPES SET MINAUTOREFUND = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="TK#2509.3.2" author="Anilkumar.G" dbms="postgresql, oracle">
		<addDefaultValue columnName="minAutoRefund" tableName="RMTFINANCETYPES" defaultValue="0" />
	</changeSet>

	<changeSet id="TK#2509.3.3" author="Anilkumar.G" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE RMTFINANCETYPES ADD CONSTRAINT DF_FT_MINAUTOREF DEFAULT 0 FOR MINAUTOREFUND;
			]]>
		</sql>
	</changeSet>

	<changeSet id="TK#2509.4" author="Anilkumar.G">
		<addColumn tableName="RMTFINANCETYPES_TEMP">
			<column name="AllowAutoRefund" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="TK#2509.4.1" author="Anilkumar.G">
		<sql>
			<![CDATA[  
				UPDATE RMTFINANCETYPES_TEMP SET ALLOWAUTOREFUND = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="TK#2509.4.2" author="Anilkumar.G" dbms="postgresql, oracle">
		<addDefaultValue columnName="AllowAutoRefund" tableName="RMTFINANCETYPES_TEMP" defaultValue="0" />
	</changeSet>

	<changeSet id="TK#2509.4.2" author="Anilkumar.G" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE RMTFINANCETYPES_TEMP ADD CONSTRAINT DF_FT_T_ALWAUTOREF DEFAULT 0 FOR ALLOWAUTOREFUND;
			]]>
		</sql>
	</changeSet>

	<changeSet id="TK#2509.5" author="Anilkumar.G">
		<addColumn tableName="RMTFINANCETYPES_TEMP">
			<column name="MaxAutoRefund" type="Decimal(18,0)" />
		</addColumn>
	</changeSet>

	<changeSet id="TK#2509.5.1" author="Anilkumar.G">
		<sql>
			<![CDATA[  
				UPDATE RMTFINANCETYPES_TEMP SET MAXAUTOREFUND = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="TK#2509.5.2" author="Anilkumar.G" dbms="postgresql, oracle">
		<addDefaultValue columnName="MaxAutoRefund" tableName="RMTFINANCETYPES_TEMP" defaultValue="0" />
	</changeSet>

	<changeSet id="TK#2509.5.2" author="Anilkumar.G" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE RMTFINANCETYPES_TEMP ADD CONSTRAINT DF_FT_T_MAXAUTOREF DEFAULT 0 FOR MAXAUTOREFUND;
			]]>
		</sql>
	</changeSet>

	<changeSet id="TK#2509.6" author="Anilkumar.G">
		<addColumn tableName="RMTFINANCETYPES_TEMP">
			<column name="MinAutoRefund" type="Decimal(18,0)" />
		</addColumn>
	</changeSet>

	<changeSet id="TK#2509.6.1" author="Anilkumar.G">
		<sql>
			<![CDATA[  
				UPDATE RMTFINANCETYPES_TEMP SET MINAUTOREFUND = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="TK#2509.6.2" author="Anilkumar.G" dbms="postgresql, oracle">
		<addDefaultValue columnName="minAutoRefund" tableName="RMTFINANCETYPES_TEMP" defaultValue="0" />
	</changeSet>

	<changeSet id="TK#2509.6.3" author="Anilkumar.G" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE RMTFINANCETYPES_TEMP ADD CONSTRAINT DF_FT_T_MINAUTOREF DEFAULT 0 FOR MINAUTOREFUND;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.35_pre" author="Sravani.S" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_aview'); 
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.35" author="Sravani.S">
		<createView viewName="RMTFINANCETYPES_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINTYPE,
				    T1.FINCATEGORY,
				    T1.FINTYPEDESC,
				    T1.FINCCY,
				    T1.FINDAYSCALTYPE,
				    T1.FINISGENREF,
				    T1.FINMAXAMOUNT,
				    T1.FINMINAMOUNT,
				    T1.FINDFTSTMTFRQ,
				    T1.FINISALWMD,
				    T1.FINSCHDMTHD,
				    T1.FINISALWGRACE,
				    T1.FINHISTRETENSION,
				    T1.EQUALREPAYMENT,
				    T1.FINRATETYPE,
				    T1.FINBASERATE,
				    T1.FINSPLRATE,
				    T1.FININTRATE,
				    T1.FINMINRATE,
				    T1.FINMAXRATE,
				    T1.FINDFTINTFRQ,
				    T1.FINISINTCPZ,
				    T1.FINCPZFRQ,
				    T1.FINISRVWALW,
				    T1.FINRVWFRQ,
				    T1.FINGRCRATETYPE,
				    T1.FINGRCBASERATE,
				    T1.FINGRCSPLRATE,
				    T1.FINGRCINTRATE,
				    T1.FINGRCMINRATE,
				    T1.FINGRCMAXRATE,
				    T1.FINGRCDFTINTFRQ,
				    T1.FINGRCISINTCPZ,
				    T1.FINGRCCPZFRQ,
				    T1.FINGRCISRVWALW,
				    T1.FINGRCRVWFRQ,
				    T1.FINMINTERM,
				    T1.FINMAXTERM,
				    T1.FINDFTTERMS,
				    T1.FINRPYFRQ,
				    T1.FINREPAYMETHOD,
				    T1.FINISALWPARTIALRPY,
				    T1.FINISALWDIFFERMENT,
				    T1.FINMAXDIFFERMENT,
				    T1.FINISALWEARLYRPY,
				    T1.FINISALWEARLYSETTLE,
				    T1.FINODRPYTRIES,
				    T1.FINEARLYPAYRULE,
				    T1.FINEARLYSETTLERULE,
				    T1.FINISACTIVE,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T1.STEPFINANCE,
				    T1.STEPPINGMANDATORY,
				    T1.ALWMANUALSTEPS,
				    T1.ALWDSTEPPOLICIES,
				    T1.DFTSTEPPOLICY,
				    T1.FINISDWPAYREQUIRED,
				    T1.FINRVWRATEAPPLFOR,
				    T1.FINALWRATECHANGEANYDATE,
				    T1.FINISINTCPZATGRCEND,
				    T1.FINELGRULECODE,
				    T1.LIMITELGRULECODE,
				    T1.FINSCHCALCODEONRVW,
				    T1.ALWPLANDEFERMENT,
				    T1.PLANDEFERCOUNT,
				    T1.FINASSETTYPE,
				    T1.FINISALWGRCREPAY,
				    T1.FINGRCSCHDMTHD,
				    T1.FINGRCMARGIN,
				    T1.FINMARGIN,
				    T1.FINSCHEDULEON,
				    T1.FINGRCSCHEDULEON,
				    T1.FINCOMMITMENTREQ,
				    T1.FINCOLLATERALREQ,
				    T1.OVERRIDELIMIT,
				    T1.LIMITREQUIRED,
				    T1.FINCOMMITMENTOVRRIDE,
				    T1.FINCOLLATERALOVRRIDE,
				    T1.FINPFTUNCHANGED,
				    T1.APPLYODPENALTY,
				    T1.ODINCGRCDAYS,
				    T1.ODCHARGETYPE,
				    T1.ODGRACEDAYS,
				    T1.ODCHARGECALON,
				    T1.ODCHARGEAMTORPERC,
				    T1.ODALLOWWAIVER,
				    T1.ODMAXWAIVERPERC,
				    T1.FINDIVISION,
				    T48.DIVISIONCODEDESC LOVDESCFINDIVISIONNAME,
				    T48.ENTITYCODE LOVDESCENTITYCODE,
				    T1.PRODUCT,
				    T1.STARTDATE,
				    T1.ENDDATE,
				    T1.REMARKS,
				    T1.ALWEARLYPAYMETHODS,
				    T1.PASTDUEPFTCALMTHD,
				    T1.PASTDUEPFTMARGIN,
				    T1.DOWNPAYRULE,
				    T59.RULECODE DOWNPAYRULECODE,
				    T59.RULECODEDESC DOWNPAYRULEDESC,
				    T1.FINSUSPTRIGGER,
				    T1.FINSUSPREMARKS,
				    T1.ALWMULTIPARTYDISB,
				    T1.COLLATERALTYPE,
				    T1.TDSAPPLICABLE,
				    T1.MANUALSCHEDULE,
				    T1.APPLYGRCPRICING,
				    T1.GRCPRICINGMETHOD,
				    T1.APPLYRPYPRICING,
				    T1.RPYPRICINGMETHOD,
				    T1.RPYHIERARCHY,
				    T67.RULECODE GRCPRICINGMETHODDESC,
				    T68.RULECODE RPYPRICINGMETHODDESC,
				    T1.DROPLINEOD,
				    T1.DROPPINGMETHOD,
				    T1.RATECHGANYDAY,
				    T1.FINREPAYPFTONFRQ,
				    T1.ALWBPI,
				    T1.BPITREATMENT,
				    T1.PFTDUESCHON,
				    T1.PLANEMIHALW,
				    T1.PLANEMIHMETHOD,
				    T1.PLANEMIHMAXPERYEAR,
				    T1.PLANEMIHMAX,
				    T1.PLANEMIHLOCKPERIOD,
				    T1.PLANEMICPZ,
				    T1.UNPLANEMIHLOCKPERIOD,
				    T1.UNPLANEMICPZ,
				    T1.REAGECPZ,
				    T1.FDDLOCKPERIOD,
				    T1.ALWDRPYMETHODS,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.ROUNDINGMODE,
				    T1.ROUNDINGTARGET,
				    T1.FREQUENCYDAYS,
				    T1.QUICKDISB,
				    T1.ALWREAGE,
				    T1.ALWUNPLANEMIHOLIDAY,
				    T1.ALWMAXDISBCHECKREQ,
				    T1.FINTYPEDESC LOVDESCPROMOFINTYPEDESC,
				    T1.PROFITCENTERID,
				    T69.PROFITCENTERCODE,
				    T69.PROFITCENTERDESC,
				    T1.PRODUCTCATEGORY,
				    T2.PRODUCTDESC FINCATEGORYDESC,
				    T1.DEVELOPERFINANCE,
				    T1.COSTOFFUNDS,
				    T1.CHEQUECAPTUREREQ,
				    T1.FINLTVCHECK,
				    T1.PARTIALLYSECURED,
				    T1.ALWADVEMI,
				    T1.ADVEMIMINTERMS,
				    T1.ADVEMIMAXTERMS,
				    T1.ADVEMIDFTTERMS,
				    T1.ADVEMISCHDMTHD,
				    T1.BPIPFTDAYSBASIS,
				    T1.ELIGIBILITYMETHODS,
				    T1.ALWHYBRIDRATE,
				    T1.FIXEDRATETENOR,
				    T1.ODMINCAPAMOUNT,
				    T1.ODRULECODE,
				    T1.ALWZEROINTACC,
				    T1.AUTOREJECTIONDAYS,
				    T1.TAXNOMAND,
				    T1.PUTCALLREQUIRED,
				    T1.GRCADVINTERSETREQ,
				    T1.GRCADVTYPE,
				    T1.GRCADVMINTERMS,
				    T1.GRCADVMAXTERMS,
				    T1.GRCADVDEFAULTTERMS,
				    T1.ADVINTERSETREQ,
				    T1.ADVTYPE,
				    T1.ADVMINTERMS,
				    T1.ADVMAXTERMS,
				    T1.ADVDEFAULTTERMS,
				    T1.ADVSTAGE,
				    T1.DSFREQ,
				    T1.CASHCOLLATERALREQ,
				    T1.TDSALLOWTOMODIFY,
				    T1.TDSAPPLICABLETO,
				    T1.ALWVAN,
				    T1.VANALLOCATIONMETHOD,
				    T1.ALLOWDRAWINGPOWER,
				    T1.ALLOWREVOLVING,
				    T1.ALWSANCTIONAMT,
				    T1.ALWSANCTIONAMTOVERRIDE,
				    T1.SANBSDSCHDLE,
				    T1.FINISRATERVWATGRCEND,
				    T1.SCHDONPMTCAL,
				    T1.AUTOAPPROVE,
				    T1.ALWPLANNEDEMIINGRC,
				    T1.OCRREQUIRED,
				    T1.ALLOWEDOCRS,
				    T1.DEFAULTOCR,
				    T1.ALLOWEDLOANPURPOSES,
				    T1.SPECIFICLOANPURPOSES,
				    T1.GRCADJREQ,
				    T1.GRCPERIODAFTRFULLDISB,
				    T1.AUTOINCRGRCENDDATE,
				    T1.GRCAUTOINCRMONTHS,
				    T1.MAXAUTOINCRALLOWED,
				    T1.THRLDTOMAINTAINGRCPRD,
				    T1.ALWLOANSPLIT,
				    T1.SPLITLOANTYPE,
				    T1.INSTBASEDSCHD,
				    T1.TDSTYPE,
				    T1.CALCOFSTEPS,
				    T1.STEPSAPPLIEDFOR,
				    T1.SUBVENTIONREQ,
					T1.OVERDRAFTTXNCHRGREQ,
					T1.OVERDRAFTTXNCHRGFEETYPE,
					T1.OVERDRAFTEXTGRACEDAYS,
					T1.OVERDRAFTCOLCHRGFEETYPE,
					T1.OVERDRAFTCOLAMT,
					T1.REGPROVRULE,
					T1.INTPROVRULE,
					T1.CLOSURETHRESHOLDLIMIT,
					T1.MAXFPPCALTYPE,
					T1.MAXFPPAMOUNT,
					T1.MAXFPPPER,
					T1.MAXFPPCALON,
					T1.PPLOCKINPERIOD,
					T1.ESLOCKINPERIOD,
					T1.MINPPCALTYPE,
					T1.MINPPAMOUNT,
					T1.MINPPPERCENTAGE,
					T1.MINPPCALON,
					T1.MAXPPCALTYPE,
					T1.MAXPPAMOUNT,
					T1.MAXPPPERCENTAGE,
					T1.MAXPPCALON,
					T1.ALLOWAUTOREFUND, 
					T1.MAXAUTOREFUND, 
					T1.MINAUTOREFUND
				FROM RMTFINANCETYPES T1
			    LEFT JOIN BMTPRODUCT T2 ON T1.FINCATEGORY = T2.PRODUCTCODE
			    LEFT JOIN SMTDIVISIONDETAIL T48 ON T1.FINDIVISION = T48.DIVISIONCODE
			    LEFT JOIN RULES T59 ON T1.DOWNPAYRULE = T59.RULEID
			    LEFT JOIN RULES T67 ON T1.GRCPRICINGMETHOD = T67.RULEID
			    LEFT JOIN RULES T68 ON T1.RPYPRICINGMETHOD = T68.RULEID
			    LEFT JOIN PROFITCENTERS T69 ON T69.PROFITCENTERID = T1.PROFITCENTERID
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#713.35_post" author="Sravani.S" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rmtfinancetypes_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.36_pre" author="Sravani.S" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_view'); 
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.36" author="Sravani.S">
		<createView viewName="RMTFINANCETYPES_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINTYPE,
				    T1.FINCATEGORY,
				    T1.FINTYPEDESC,
				    T1.FINCCY,
				    T1.FINDAYSCALTYPE,
				    T1.FINISGENREF,
				    T1.FINMAXAMOUNT,
				    T1.FINMINAMOUNT,
				    T1.FINDFTSTMTFRQ,
				    T1.FINISALWMD,
				    T1.FINSCHDMTHD,
				    T1.FINISALWGRACE,
				    T1.FINHISTRETENSION,
				    T1.EQUALREPAYMENT,
				    T1.FINRATETYPE,
				    T1.FINBASERATE,
				    T1.FINSPLRATE,
				    T1.FININTRATE,
				    T1.FINMINRATE,
				    T1.FINMAXRATE,
				    T1.FINDFTINTFRQ,
				    T1.FINISINTCPZ,
				    T1.FINCPZFRQ,
				    T1.FINISRVWALW,
				    T1.FINRVWFRQ,
				    T1.FINGRCRATETYPE,
				    T1.FINGRCBASERATE,
				    T1.FINGRCSPLRATE,
				    T1.FINGRCINTRATE,
				    T1.FINGRCMINRATE,
				    T1.FINGRCMAXRATE,
				    T1.FINGRCDFTINTFRQ,
				    T1.FINGRCISINTCPZ,
				    T1.FINGRCCPZFRQ,
				    T1.FINGRCISRVWALW,
				    T1.FINGRCRVWFRQ,
				    T1.FINMINTERM,
				    T1.FINMAXTERM,
				    T1.FINDFTTERMS,
				    T1.FINRPYFRQ,
				    T1.FINREPAYMETHOD,
				    T1.FINISALWPARTIALRPY,
				    T1.FINISALWDIFFERMENT,
				    T1.FINMAXDIFFERMENT,
				    T1.FINISALWEARLYRPY,
				    T1.FINISALWEARLYSETTLE,
				    T1.FINODRPYTRIES,
				    T1.FINEARLYPAYRULE,
				    T1.FINEARLYSETTLERULE,
				    T1.FINISACTIVE,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T1.STEPFINANCE,
				    T1.STEPPINGMANDATORY,
				    T1.ALWMANUALSTEPS,
				    T1.ALWDSTEPPOLICIES,
				    T1.DFTSTEPPOLICY,
				    T1.FINISDWPAYREQUIRED,
				    T1.FINRVWRATEAPPLFOR,
				    T1.FINALWRATECHANGEANYDATE,
				    T1.FINISINTCPZATGRCEND,
				    T1.FINELGRULECODE,
				    T1.LIMITELGRULECODE,
				    T1.FINSCHCALCODEONRVW,
				    T1.ALWPLANDEFERMENT,
				    T1.PLANDEFERCOUNT,
				    T1.FINASSETTYPE,
				    T1.FINISALWGRCREPAY,
				    T1.FINGRCSCHDMTHD,
				    T1.FINGRCMARGIN,
				    T1.FINMARGIN,
				    T1.FINSCHEDULEON,
				    T1.FINGRCSCHEDULEON,
				    T1.FINCOMMITMENTREQ,
				    T1.FINCOLLATERALREQ,
				    T1.OVERRIDELIMIT,
				    T1.LIMITREQUIRED,
				    T1.FINCOMMITMENTOVRRIDE,
				    T1.FINCOLLATERALOVRRIDE,
				    T1.FINPFTUNCHANGED,
				    T1.APPLYODPENALTY,
				    T1.ODINCGRCDAYS,
				    T1.ODCHARGETYPE,
				    T1.ODGRACEDAYS,
				    T1.ODCHARGECALON,
				    T1.ODCHARGEAMTORPERC,
				    T1.ODALLOWWAIVER,
				    T1.ODMAXWAIVERPERC,
				    T1.FINDIVISION,
				    T48.DIVISIONCODEDESC LOVDESCFINDIVISIONNAME,
				    T48.ENTITYCODE LOVDESCENTITYCODE,
				    T1.PRODUCT,
				    T1.STARTDATE,
				    T1.ENDDATE,
				    T1.FINTYPEDESC LOVDESCPROMOFINTYPEDESC,
				    T1.REMARKS,
				    T1.ALWEARLYPAYMETHODS,
				    T1.PASTDUEPFTCALMTHD,
				    T1.PASTDUEPFTMARGIN,
				    T1.DOWNPAYRULE,
				    T59.RULECODE DOWNPAYRULECODE,
				    T59.RULECODEDESC DOWNPAYRULEDESC,
				    T1.FINSUSPTRIGGER,
				    T1.FINSUSPREMARKS,
				    T1.ALWMULTIPARTYDISB,
				    T1.COLLATERALTYPE,
				    T1.TDSAPPLICABLE,
				    T1.MANUALSCHEDULE,
				    T1.APPLYGRCPRICING,
				    T1.GRCPRICINGMETHOD,
				    T1.APPLYRPYPRICING,
				    T1.RPYPRICINGMETHOD,
				    T1.RPYHIERARCHY,
				    T67.RULECODE GRCPRICINGMETHODDESC,
				    T68.RULECODE RPYPRICINGMETHODDESC,
				    T1.DROPLINEOD,
				    T1.DROPPINGMETHOD,
				    T1.RATECHGANYDAY,
				    T1.FINREPAYPFTONFRQ,
				    T1.ALWBPI,
				    T1.BPITREATMENT,
				    T1.PFTDUESCHON,
				    T1.PLANEMIHALW,
				    T1.PLANEMIHMETHOD,
				    T1.PLANEMIHMAXPERYEAR,
				    T1.PLANEMIHMAX,
				    T1.PLANEMIHLOCKPERIOD,
				    T1.PLANEMICPZ,
				    T1.UNPLANEMIHLOCKPERIOD,
				    T1.UNPLANEMICPZ,
				    T1.REAGECPZ,
				    T1.FDDLOCKPERIOD,
				    T1.ALWDRPYMETHODS,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.ROUNDINGMODE,
				    T1.ROUNDINGTARGET,
				    T1.FREQUENCYDAYS,
				    T1.QUICKDISB,
				    T1.ALWMAXDISBCHECKREQ,
				    T1.ALWREAGE,
				    T1.ALWUNPLANEMIHOLIDAY,
				    T1.PROFITCENTERID,
				    T69.PROFITCENTERCODE,
				    T69.PROFITCENTERDESC,
				    T1.PRODUCTCATEGORY,
				    T2.PRODUCTDESC FINCATEGORYDESC,
				    T1.DEVELOPERFINANCE,
				    T1.COSTOFFUNDS,
				    T1.CHEQUECAPTUREREQ,
				    T1.FINLTVCHECK,
				    T1.PARTIALLYSECURED,
				    T1.ALWADVEMI,
				    T1.ADVEMIMINTERMS,
				    T1.ADVEMIMAXTERMS,
				    T1.ADVEMIDFTTERMS,
				    T1.ADVEMISCHDMTHD,
				    T1.BPIPFTDAYSBASIS,
				    T1.ELIGIBILITYMETHODS,
				    T1.ALWHYBRIDRATE,
				    T1.FIXEDRATETENOR,
				    T1.ODMINCAPAMOUNT,
				    T1.ODRULECODE,
				    T1.ALWZEROINTACC,
				    T1.AUTOREJECTIONDAYS,
				    T1.TAXNOMAND,
				    T1.PUTCALLREQUIRED,
				    T1.GRCADVINTERSETREQ,
				    T1.GRCADVTYPE,
				    T1.GRCADVMINTERMS,
				    T1.GRCADVMAXTERMS,
				    T1.GRCADVDEFAULTTERMS,
				    T1.ADVINTERSETREQ,
				    T1.ADVTYPE,
				    T1.ADVMINTERMS,
				    T1.ADVMAXTERMS,
				    T1.ADVDEFAULTTERMS,
				    T1.ADVSTAGE,
				    T1.DSFREQ,
				    T1.CASHCOLLATERALREQ,
				    T1.TDSALLOWTOMODIFY,
				    T1.TDSAPPLICABLETO,
				    T1.ALWVAN,
				    T1.VANALLOCATIONMETHOD,
				    T1.ALLOWDRAWINGPOWER,
				    T1.ALLOWREVOLVING,
				    T1.ALWSANCTIONAMT,
				    T1.ALWSANCTIONAMTOVERRIDE,
				    T1.SANBSDSCHDLE,
				    T1.FINISRATERVWATGRCEND,
				    T1.SCHDONPMTCAL,
				    T1.AUTOAPPROVE,
				    T1.OCRREQUIRED,
				    T1.ALLOWEDOCRS,
				    T1.DEFAULTOCR,
				    T1.ALLOWEDLOANPURPOSES,
				    T1.SPECIFICLOANPURPOSES,
				    T1.ALWPLANNEDEMIINGRC,
				    T1.GRCADJREQ,
				    T1.GRCPERIODAFTRFULLDISB,
				    T1.AUTOINCRGRCENDDATE,
				    T1.GRCAUTOINCRMONTHS,
				    T1.MAXAUTOINCRALLOWED,
				    T1.THRLDTOMAINTAINGRCPRD,
				    T1.ALWLOANSPLIT,
				    T1.SPLITLOANTYPE,
				    T1.INSTBASEDSCHD,
				    T1.TDSTYPE,
				    T1.CALCOFSTEPS,
				    T1.STEPSAPPLIEDFOR,
				    T1.SUBVENTIONREQ,
					T1.OVERDRAFTTXNCHRGREQ,
					T1.OVERDRAFTTXNCHRGFEETYPE,
					T1.OVERDRAFTEXTGRACEDAYS,
					T1.OVERDRAFTCOLCHRGFEETYPE,
					T1.OVERDRAFTCOLAMT,
					T1.REGPROVRULE,
					T1.INTPROVRULE,
					T1.CLOSURETHRESHOLDLIMIT,
					T1.MAXFPPCALTYPE,
					T1.MAXFPPAMOUNT,
					T1.MAXFPPPER,
					T1.MAXFPPCALON,
					T1.PPLOCKINPERIOD,
					T1.ESLOCKINPERIOD,
					T1.MINPPCALTYPE,
					T1.MINPPAMOUNT,
					T1.MINPPPERCENTAGE,
					T1.MINPPCALON,
					T1.MAXPPCALTYPE,
					T1.MAXPPAMOUNT,
					T1.MAXPPPERCENTAGE,
					T1.MAXPPCALON,
					T1.ALLOWAUTOREFUND, 
					T1.MAXAUTOREFUND, 
					T1.MINAUTOREFUND
				FROM RMTFINANCETYPES_TEMP T1
				LEFT JOIN BMTPRODUCT T2 ON T1.FINCATEGORY = T2.PRODUCTCODE
				LEFT JOIN SMTDIVISIONDETAIL T48 ON T1.FINDIVISION = T48.DIVISIONCODE
				LEFT JOIN RULES T59 ON T1.DOWNPAYRULE = T59.RULEID
				LEFT JOIN RULES T67 ON T1.GRCPRICINGMETHOD = T67.RULEID
				LEFT JOIN RULES T68 ON T1.RPYPRICINGMETHOD = T68.RULEID
				LEFT JOIN PROFITCENTERS T69 ON T69.PROFITCENTERID = T1.PROFITCENTERID
				UNION ALL
				SELECT T1.FINTYPE,
				    T1.FINCATEGORY,
				    T1.FINTYPEDESC,
				    T1.FINCCY,
				    T1.FINDAYSCALTYPE,
				    T1.FINISGENREF,
				    T1.FINMAXAMOUNT,
				    T1.FINMINAMOUNT,
				    T1.FINDFTSTMTFRQ,
				    T1.FINISALWMD,
				    T1.FINSCHDMTHD,
				    T1.FINISALWGRACE,
				    T1.FINHISTRETENSION,
				    T1.EQUALREPAYMENT,
				    T1.FINRATETYPE,
				    T1.FINBASERATE,
				    T1.FINSPLRATE,
				    T1.FININTRATE,
				    T1.FINMINRATE,
				    T1.FINMAXRATE,
				    T1.FINDFTINTFRQ,
				    T1.FINISINTCPZ,
				    T1.FINCPZFRQ,
				    T1.FINISRVWALW,
				    T1.FINRVWFRQ,
				    T1.FINGRCRATETYPE,
				    T1.FINGRCBASERATE,
				    T1.FINGRCSPLRATE,
				    T1.FINGRCINTRATE,
				    T1.FINGRCMINRATE,
				    T1.FINGRCMAXRATE,
				    T1.FINGRCDFTINTFRQ,
				    T1.FINGRCISINTCPZ,
				    T1.FINGRCCPZFRQ,
				    T1.FINGRCISRVWALW,
				    T1.FINGRCRVWFRQ,
				    T1.FINMINTERM,
				    T1.FINMAXTERM,
				    T1.FINDFTTERMS,
				    T1.FINRPYFRQ,
				    T1.FINREPAYMETHOD,
				    T1.FINISALWPARTIALRPY,
				    T1.FINISALWDIFFERMENT,
				    T1.FINMAXDIFFERMENT,
				    T1.FINISALWEARLYRPY,
				    T1.FINISALWEARLYSETTLE,
				    T1.FINODRPYTRIES,
				    T1.FINEARLYPAYRULE,
				    T1.FINEARLYSETTLERULE,
				    T1.FINISACTIVE,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T1.STEPFINANCE,
				    T1.STEPPINGMANDATORY,
				    T1.ALWMANUALSTEPS,
				    T1.ALWDSTEPPOLICIES,
				    T1.DFTSTEPPOLICY,
				    T1.FINISDWPAYREQUIRED,
				    T1.FINRVWRATEAPPLFOR,
				    T1.FINALWRATECHANGEANYDATE,
				    T1.FINISINTCPZATGRCEND,
				    T1.FINELGRULECODE,
				    T1.LIMITELGRULECODE,
				    T1.FINSCHCALCODEONRVW,
				    T1.ALWPLANDEFERMENT,
				    T1.PLANDEFERCOUNT,
				    T1.FINASSETTYPE,
				    T1.FINISALWGRCREPAY,
				    T1.FINGRCSCHDMTHD,
				    T1.FINGRCMARGIN,
				    T1.FINMARGIN,
				    T1.FINSCHEDULEON,
				    T1.FINGRCSCHEDULEON,
				    T1.FINCOMMITMENTREQ,
				    T1.FINCOLLATERALREQ,
				    T1.OVERRIDELIMIT,
				    T1.LIMITREQUIRED,
				    T1.FINCOMMITMENTOVRRIDE,
				    T1.FINCOLLATERALOVRRIDE,
				    T1.FINPFTUNCHANGED,
				    T1.APPLYODPENALTY,
				    T1.ODINCGRCDAYS,
				    T1.ODCHARGETYPE,
				    T1.ODGRACEDAYS,
				    T1.ODCHARGECALON,
				    T1.ODCHARGEAMTORPERC,
				    T1.ODALLOWWAIVER,
				    T1.ODMAXWAIVERPERC,
				    T1.FINDIVISION,
				    T48.DIVISIONCODEDESC LOVDESCFINDIVISIONNAME,
				    T48.ENTITYCODE LOVDESCENTITYCODE,
				    T1.PRODUCT,
				    T1.STARTDATE,
				    T1.ENDDATE,
				    T1.FINTYPEDESC LOVDESCPROMOFINTYPEDESC,
				    T1.REMARKS,
				    T1.ALWEARLYPAYMETHODS,
				    T1.PASTDUEPFTCALMTHD,
				    T1.PASTDUEPFTMARGIN,
				    T1.DOWNPAYRULE,
				    T59.RULECODE DOWNPAYRULECODE,
				    T59.RULECODEDESC DOWNPAYRULEDESC,
				    T1.FINSUSPTRIGGER,
				    T1.FINSUSPREMARKS,
				    T1.ALWMULTIPARTYDISB,
				    T1.COLLATERALTYPE,
				    T1.TDSAPPLICABLE,
				    T1.MANUALSCHEDULE,
				    T1.APPLYGRCPRICING,
				    T1.GRCPRICINGMETHOD,
				    T1.APPLYRPYPRICING,
				    T1.RPYPRICINGMETHOD,
				    T1.RPYHIERARCHY,
				    T67.RULECODE GRCPRICINGMETHODDESC,
				    T68.RULECODE RPYPRICINGMETHODDESC,
				    T1.DROPLINEOD,
				    T1.DROPPINGMETHOD,
				    T1.RATECHGANYDAY,
				    T1.FINREPAYPFTONFRQ,
				    T1.ALWBPI,
				    T1.BPITREATMENT,
				    T1.PFTDUESCHON,
				    T1.PLANEMIHALW,
				    T1.PLANEMIHMETHOD,
				    T1.PLANEMIHMAXPERYEAR,
				    T1.PLANEMIHMAX,
				    T1.PLANEMIHLOCKPERIOD,
				    T1.PLANEMICPZ,
				    T1.UNPLANEMIHLOCKPERIOD,
				    T1.UNPLANEMICPZ,
				    T1.REAGECPZ,
				    T1.FDDLOCKPERIOD,
				    T1.ALWDRPYMETHODS,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.ROUNDINGMODE,
				    T1.ROUNDINGTARGET,
				    T1.FREQUENCYDAYS,
				    T1.QUICKDISB,
				    T1.ALWMAXDISBCHECKREQ,
				    T1.ALWREAGE,
				    T1.ALWUNPLANEMIHOLIDAY,
				    T1.PROFITCENTERID,
				    T69.PROFITCENTERCODE,
				    T69.PROFITCENTERDESC,
				    T1.PRODUCTCATEGORY,
				    T2.PRODUCTDESC FINCATEGORYDESC,
				    T1.DEVELOPERFINANCE,
				    T1.COSTOFFUNDS,
				    T1.CHEQUECAPTUREREQ,
				    T1.FINLTVCHECK,
				    T1.PARTIALLYSECURED,
				    T1.ALWADVEMI,
				    T1.ADVEMIMINTERMS,
				    T1.ADVEMIMAXTERMS,
				    T1.ADVEMIDFTTERMS,
				    T1.ADVEMISCHDMTHD,
				    T1.BPIPFTDAYSBASIS,
				    T1.ELIGIBILITYMETHODS,
				    T1.ALWHYBRIDRATE,
				    T1.FIXEDRATETENOR,
				    T1.ODMINCAPAMOUNT,
				    T1.ODRULECODE,
				    T1.ALWZEROINTACC,
				    T1.AUTOREJECTIONDAYS,
				    T1.TAXNOMAND,
				    T1.PUTCALLREQUIRED,
				    T1.GRCADVINTERSETREQ,
				    T1.GRCADVTYPE,
				    T1.GRCADVMINTERMS,
				    T1.GRCADVMAXTERMS,
				    T1.GRCADVDEFAULTTERMS,
				    T1.ADVINTERSETREQ,
				    T1.ADVTYPE,
				    T1.ADVMINTERMS,
				    T1.ADVMAXTERMS,
				    T1.ADVDEFAULTTERMS,
				    T1.ADVSTAGE,
				    T1.DSFREQ,
				    T1.CASHCOLLATERALREQ,
				    T1.TDSALLOWTOMODIFY,
				    T1.TDSAPPLICABLETO,
				    T1.ALWVAN,
				    T1.VANALLOCATIONMETHOD,
				    T1.ALLOWDRAWINGPOWER,
				    T1.ALLOWREVOLVING,
				    T1.ALWSANCTIONAMT,
				    T1.ALWSANCTIONAMTOVERRIDE,
				    T1.SANBSDSCHDLE,
				    T1.FINISRATERVWATGRCEND,
				    T1.SCHDONPMTCAL,
				    T1.AUTOAPPROVE,
				    T1.OCRREQUIRED,
				    T1.ALLOWEDOCRS,
				    T1.DEFAULTOCR,
				    T1.ALLOWEDLOANPURPOSES,
				    T1.SPECIFICLOANPURPOSES,
				    T1.ALWPLANNEDEMIINGRC,
				    T1.GRCADJREQ,
				    T1.GRCPERIODAFTRFULLDISB,
				    T1.AUTOINCRGRCENDDATE,
				    T1.GRCAUTOINCRMONTHS,
				    T1.MAXAUTOINCRALLOWED,
				    T1.THRLDTOMAINTAINGRCPRD,
				    T1.ALWLOANSPLIT,
				    T1.SPLITLOANTYPE,
				    T1.INSTBASEDSCHD,
				    T1.TDSTYPE,
				    T1.CALCOFSTEPS,
				    T1.STEPSAPPLIEDFOR,
				    T1.SUBVENTIONREQ,
					T1.OVERDRAFTTXNCHRGREQ,
					T1.OVERDRAFTTXNCHRGFEETYPE,
					T1.OVERDRAFTEXTGRACEDAYS,
					T1.OVERDRAFTCOLCHRGFEETYPE,
					T1.OVERDRAFTCOLAMT,
					T1.REGPROVRULE,
					T1.INTPROVRULE,
					T1.CLOSURETHRESHOLDLIMIT,
					T1.MAXFPPCALTYPE,
					T1.MAXFPPAMOUNT,
					T1.MAXFPPPER,
					T1.MAXFPPCALON,
					T1.PPLOCKINPERIOD,
					T1.ESLOCKINPERIOD,
					T1.MINPPCALTYPE,
					T1.MINPPAMOUNT,
					T1.MINPPPERCENTAGE,
					T1.MINPPCALON,
					T1.MAXPPCALTYPE,
					T1.MAXPPAMOUNT,
					T1.MAXPPPERCENTAGE,
					T1.MAXPPCALON,
					T1.ALLOWAUTOREFUND, 
					T1.MAXAUTOREFUND, 
					T1.MINAUTOREFUND
				FROM RMTFINANCETYPES T1
				LEFT JOIN BMTPRODUCT T2 ON T1.FINCATEGORY = T2.PRODUCTCODE
				LEFT JOIN SMTDIVISIONDETAIL T48 ON T1.FINDIVISION = T48.DIVISIONCODE
				LEFT JOIN RULES T59 ON T1.DOWNPAYRULE = T59.RULEID
				LEFT JOIN RULES T67 ON T1.GRCPRICINGMETHOD = T67.RULEID
				LEFT JOIN RULES T68 ON T1.RPYPRICINGMETHOD = T68.RULEID
				LEFT JOIN PROFITCENTERS T69 ON T69.PROFITCENTERID = T1.PROFITCENTERID
				WHERE NOT EXISTS (SELECT 1 FROM RMTFINANCETYPES_TEMP WHERE RMTFINANCETYPES_TEMP.FINTYPE = T1.FINTYPE)
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#713.36_post" author="Sravani.S" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rmtfinancetypes_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.37_pre" author="Sravani.S" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_orgview'); 	
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.37" author="Sravani.S">
		<createView viewName="RMTFINANCETYPES_ORGVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINTYPE,
				    T1.FINCATEGORY,
				    T1.FINTYPEDESC,
				    T1.FINCCY,
				    T1.FINDAYSCALTYPE,
				    T1.FINISGENREF,
				    T1.FINMAXAMOUNT,
				    T1.FINMINAMOUNT,
				    T1.FINISALWMD,
				    T1.FINSCHDMTHD,
				    T1.FINISALWGRACE,
				    T1.EQUALREPAYMENT,
				    T1.FINRATETYPE,
				    T1.FINBASERATE,
				    T1.FINSPLRATE,
				    T1.FININTRATE,
				    T1.FINMINRATE,
				    T1.FINMAXRATE,
				    T1.FINDFTINTFRQ,
				    T1.FINISINTCPZ,
				    T1.FINCPZFRQ,
				    T1.FINISRVWALW,
				    T1.FINRVWFRQ,
				    T1.FINGRCRATETYPE,
				    T1.FINGRCBASERATE,
				    T1.FINGRCSPLRATE,
				    T1.FINGRCINTRATE,
				    T1.FINGRCMINRATE,
				    T1.FINGRCMAXRATE,
				    T1.FINGRCDFTINTFRQ,
				    T1.FINGRCISINTCPZ,
				    T1.FINGRCCPZFRQ,
				    T1.FINGRCISRVWALW,
				    T1.FINGRCRVWFRQ,
				    T1.FINMINTERM,
				    T1.FINMAXTERM,
				    T1.FINDFTTERMS,
				    T1.FINRPYFRQ,
				    T1.FINREPAYMETHOD,
				    T1.FINISALWDIFFERMENT,
				    T1.FINMAXDIFFERMENT,
				    T1.FINISACTIVE,
				    T1.STEPFINANCE,
				    T1.STEPPINGMANDATORY,
				    T1.ALWMANUALSTEPS,
				    T1.ALWDSTEPPOLICIES,
				    T1.DFTSTEPPOLICY,
				    T1.FINISDWPAYREQUIRED,
				    T1.FINRVWRATEAPPLFOR,
				    T1.FINALWRATECHANGEANYDATE,
				    T1.FINISINTCPZATGRCEND,
				    T1.FINSCHCALCODEONRVW,
				    T1.ALWPLANDEFERMENT,
				    T1.PLANDEFERCOUNT,
				    T1.FINISALWGRCREPAY,
				    T1.FINGRCSCHDMTHD,
				    T1.FINGRCMARGIN,
				    T1.FINMARGIN,
				    T1.FINCOMMITMENTREQ,
				    T1.FINCOLLATERALREQ,
				    T1.OVERRIDELIMIT,
				    T1.LIMITREQUIRED,
				    T1.FINCOMMITMENTOVRRIDE,
				    T1.FINCOLLATERALOVRRIDE,
				    T1.FINREPAYPFTONFRQ,
				    T1.FINPFTUNCHANGED,
				    T1.APPLYODPENALTY,
				    T1.ODINCGRCDAYS,
				    T1.ODCHARGETYPE,
				    T1.ODGRACEDAYS,
				    T1.ODCHARGECALON,
				    T1.ODCHARGEAMTORPERC,
				    T1.ODALLOWWAIVER,
				    T1.ODMAXWAIVERPERC,
				    T1.FINDIVISION,
				    T3.DIVISIONCODEDESC LOVDESCFINDIVISIONNAME,
				    T1.PRODUCT,
				    T1.STARTDATE,
				    T1.ENDDATE,
				    T1.FINTYPEDESC LOVDESCPROMOFINTYPEDESC,
				    T1.REMARKS,
				    T4.POLICYDESC LOVDESCDFTSTEPPOLICYNAME,
				    T1.PASTDUEPFTCALMTHD,
				    T1.PASTDUEPFTMARGIN,
				    T1.DOWNPAYRULE,
				    T1.ALWMULTIPARTYDISB,
				    T1.COLLATERALTYPE,
				    T1.TDSAPPLICABLE,
				    T5.RULECODE DOWNPAYRULECODE,
				    T5.RULECODEDESC DOWNPAYRULEDESC,
				    T1.APPLYGRCPRICING,
				    T1.APPLYRPYPRICING,
				    T6.RULECODE GRCPRICINGMETHODDESC,
				    T7.RULECODE RPYPRICINGMETHODDESC,
				    T1.DROPLINEOD,
				    T1.DROPPINGMETHOD,
				    T1.RATECHGANYDAY,
				    T4.STEPTYPE DFTSTEPPOLICYTYPE,
				    T1.MANUALSCHEDULE,
				    T1.ALWBPI,
				    T1.BPITREATMENT,
				    T1.PFTDUESCHON,
				    T1.PLANEMIHALW,
				    T1.PLANEMIHMETHOD,
				    T1.PLANEMIHMAXPERYEAR,
				    T1.PLANEMIHMAX,
				    T1.PLANEMIHLOCKPERIOD,
				    T1.PLANEMICPZ,
				    T1.UNPLANEMIHLOCKPERIOD,
				    T1.UNPLANEMICPZ,
				    T1.REAGECPZ,
				    T1.FDDLOCKPERIOD,
				    T1.ALWDRPYMETHODS,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.ROUNDINGMODE,
				    T1.ROUNDINGTARGET,
				    T1.FREQUENCYDAYS,
				    T1.QUICKDISB,
				    T1.ALWREAGE,
				    T1.ALWUNPLANEMIHOLIDAY,
				    T1.ALWMAXDISBCHECKREQ,
				    T1.PRODUCTCATEGORY,
				    T1.RPYHIERARCHY,
				    T1.DEVELOPERFINANCE,
				    T3.ENTITYCODE LOVDESCENTITYCODE,
				    T8.ENTITYDESC LOVDESCENTITYDESC,
				    T1.COSTOFFUNDS,
				    T1.CHEQUECAPTUREREQ,
				    T1.FINLTVCHECK,
				    T1.PARTIALLYSECURED,
				    T1.ALWADVEMI,
				    T1.ADVEMIMINTERMS,
				    T1.ADVEMIMAXTERMS,
				    T1.ADVEMIDFTTERMS,
				    T1.ADVEMISCHDMTHD,
				    T1.BPIPFTDAYSBASIS,
				    T1.ELIGIBILITYMETHODS,
				    T1.ALWHYBRIDRATE,
				    T1.FIXEDRATETENOR,
				    T1.ODMINCAPAMOUNT,
				    T1.ODRULECODE,
				    T1.ALWZEROINTACC,
				    T1.FINISALWPARTIALRPY,
				    T1.AUTOREJECTIONDAYS,
				    T1.TAXNOMAND,
				    T1.PUTCALLREQUIRED,
				    T1.GRCADVINTERSETREQ,
				    T1.GRCADVTYPE,
				    T1.GRCADVMINTERMS,
				    T1.GRCADVMAXTERMS,
				    T1.GRCADVDEFAULTTERMS,
				    T1.ADVINTERSETREQ,
				    T1.ADVTYPE,
				    T1.ADVMINTERMS,
				    T1.ADVMAXTERMS,
				    T1.ADVDEFAULTTERMS,
				    T1.ADVSTAGE,
				    T1.DSFREQ,
				    T1.CASHCOLLATERALREQ,
				    T1.ALWEARLYPAYMETHODS,
				    T1.FINSCHEDULEON,
				    T1.TDSALLOWTOMODIFY,
				    T1.TDSAPPLICABLETO,
				    T1.ALWVAN,
				    T1.VANALLOCATIONMETHOD,
				    T1.ALLOWDRAWINGPOWER,
				    T1.ALLOWREVOLVING,
				    T1.ALWSANCTIONAMT,
				    T1.ALWSANCTIONAMTOVERRIDE,
				    T1.SANBSDSCHDLE,
				    T1.FINISRATERVWATGRCEND,
				    T1.SCHDONPMTCAL,
				    T1.AUTOAPPROVE,
				    T1.OCRREQUIRED,
				    T1.ALLOWEDOCRS,
				    T1.DEFAULTOCR,
				    T1.ALLOWEDLOANPURPOSES,
				    T1.SPECIFICLOANPURPOSES,
				    T1.ALWPLANNEDEMIINGRC,
				    T1.GRCADJREQ,
				    T1.GRCPERIODAFTRFULLDISB,
				    T1.AUTOINCRGRCENDDATE,
				    T1.GRCAUTOINCRMONTHS,
				    T1.MAXAUTOINCRALLOWED,
				    T1.THRLDTOMAINTAINGRCPRD,
				    T1.ALWLOANSPLIT,
				    T1.SPLITLOANTYPE,
				    T1.INSTBASEDSCHD,
				    T1.TDSTYPE,
				    T1.CALCOFSTEPS,
				    T1.STEPSAPPLIEDFOR,
				    T1.SUBVENTIONREQ,
					T1.OVERDRAFTTXNCHRGREQ,
					T1.OVERDRAFTTXNCHRGFEETYPE,
					T1.OVERDRAFTEXTGRACEDAYS,
					T1.OVERDRAFTCOLCHRGFEETYPE,
					T1.OVERDRAFTCOLAMT,
					T1.REGPROVRULE,
					T1.INTPROVRULE,
					T1.CLOSURETHRESHOLDLIMIT,
					T1.MAXFPPCALTYPE,
					T1.MAXFPPAMOUNT,
					T1.MAXFPPPER,
					T1.MAXFPPCALON,
					T1.PPLOCKINPERIOD,
					T1.ESLOCKINPERIOD,
					T1.MINPPCALTYPE,
					T1.MINPPAMOUNT,
					T1.MINPPPERCENTAGE,
					T1.MINPPCALON,
					T1.MAXPPCALTYPE,
					T1.MAXPPAMOUNT,
					T1.MAXPPPERCENTAGE,
					T1.MAXPPCALON,
					T1.ALLOWAUTOREFUND, 
					T1.MAXAUTOREFUND, 
					T1.MINAUTOREFUND
				FROM RMTFINANCETYPES T1
				INNER JOIN SMTDIVISIONDETAIL T3 ON T1.FINDIVISION = T3.DIVISIONCODE
				LEFT JOIN STEPPOLICYHEADER T4 ON T1.DFTSTEPPOLICY = T4.POLICYCODE
				LEFT JOIN RULES T5 ON T1.DOWNPAYRULE = T5.RULEID
				LEFT JOIN RULES T6 ON T1.GRCPRICINGMETHOD = T6.RULEID
				LEFT JOIN RULES T7 ON T1.RPYPRICINGMETHOD = T7.RULEID
				LEFT JOIN ENTITY T8 ON T3.ENTITYCODE = T8.ENTITYCODE
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#713.37_post" author="Sravani.S" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rmtfinancetypes_orgview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.38_pre" author="Sravani.S" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_aeview'); 
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.38" author="Sravani.S">
		<createView viewName="RMTFINANCETYPES_AEVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINTYPE,
				    '' FINDEFFREQ,
				    T1.FINCCY,
				    T1.FINCATEGORY,
				    T1.DEVELOPERFINANCE,
				    T1.PARTIALLYSECURED,
				    T1.INSTBASEDSCHD,
				    T1.TDSTYPE,
				    T1.SUBVENTIONREQ,
					T1.CLOSURETHRESHOLDLIMIT,
					T1.MAXFPPCALTYPE,
					T1.MAXFPPAMOUNT,
					T1.MAXFPPPER,
					T1.MAXFPPCALON,
					T1.PPLOCKINPERIOD,
					T1.ESLOCKINPERIOD,
					T1.MINPPCALTYPE,
					T1.MINPPAMOUNT,
					T1.MINPPPERCENTAGE,
					T1.MINPPCALON,
					T1.MAXPPCALTYPE,
					T1.MAXPPAMOUNT,
					T1.MAXPPPERCENTAGE,
					T1.MAXPPCALON,
					T1.ALLOWAUTOREFUND, 
					T1.MAXAUTOREFUND, 
					T1.MINAUTOREFUND
				FROM RMTFINANCETYPES T1	
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#713.38_post" author="Sravani.S" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rmtfinancetypes_aeview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#704.1" author="vijaya.a">
		<sql>
			<![CDATA[
				INSERT INTO SECGROUPS (GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'FINTYPEPARTNERBANK_MAPPING_MAKER', 'Fin Type Parnerbank Mapping Maker Group', 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPS (GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'FINTYPEPARTNERBANK_MAPPING_APPROVER', 'Fin Type Parnerbank Mapping Approver Group', 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
			
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_FinTypePartnerbankMapping', 'MENU', 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'FinTypePartnerBankMappingDialog_finType', 'FinTypePartnerBankMappingDialog', 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'FinTypePartnerBankMappingDialog_Purpose', 'FinTypePartnerBankMappingDialog', 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'FinTypePartnerBankMappingDialog_PaymentMode', 'FinTypePartnerBankMappingDialog', 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'FinTypePartnerBankMappingDialog_PartnerBankID', 'FinTypePartnerBankMappingDialog', 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'FinTypePartnerBankMappingDialog_branch', 'FinTypePartnerBankMappingDialog', 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'button_FinTypePartnerBankMappingDialog_btnNew', 'FinTypePartnerBankMappingDialog', 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'button_FinTypePartnerBankMappingDialog_btnEdit', 'FinTypePartnerBankMappingDialog', 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'button_FinTypePartnerBankMappingDialog_btnDelete', 'FinTypePartnerBankMappingDialog', 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'button_FinTypePartnerBankMappingDialog_btnSave', 'FinTypePartnerBankMappingDialog', 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
		
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FINTYPEPARTNERBANK_MAPPING_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_FinTypePartnerbankMapping'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FINTYPEPARTNERBANK_MAPPING_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'FinTypePartnerBankMappingDialog_finType'), 1, 1, 1000, CURRENT_TIMESTAMP,NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FINTYPEPARTNERBANK_MAPPING_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'FinTypePartnerBankMappingDialog_Purpose'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FINTYPEPARTNERBANK_MAPPING_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'FinTypePartnerBankMappingDialog_PaymentMode'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FINTYPEPARTNERBANK_MAPPING_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'FinTypePartnerBankMappingDialog_PartnerBankID'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FINTYPEPARTNERBANK_MAPPING_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'FinTypePartnerBankMappingDialog_branch'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FINTYPEPARTNERBANK_MAPPING_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_FinTypePartnerBankMappingDialog_btnNew'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FINTYPEPARTNERBANK_MAPPING_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_FinTypePartnerBankMappingDialog_btnEdit'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FINTYPEPARTNERBANK_MAPPING_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_FinTypePartnerBankMappingDialog_btnDelete'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FINTYPEPARTNERBANK_MAPPING_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_FinTypePartnerBankMappingDialog_btnSave'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FINTYPEPARTNERBANK_MAPPING_APPROVER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_FinTypePartnerbankMapping'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FINTYPEPARTNERBANK_MAPPING_APPROVER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_FinTypePartnerBankMappingDialog_btnSave'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#704.2" author="vijaya.a">
		<sql>
			<![CDATA[
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'FINTYPEPARTNERBANK_MAPPING_MAKER', 'Maker role from FinType Partner Bank Mapping', '', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0); 
		  		INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'FINTYPEPARTNERBANK_MAPPING_APPROVER', 'Approver role from FinType Partner Bank Mapping',	'', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		    
		    	INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FINTYPEPARTNERBANK_MAPPING_MAKER'),    (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'FINTYPEPARTNERBANK_MAPPING_MAKER'),    0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		    	INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FINTYPEPARTNERBANK_MAPPING_APPROVER'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'FINTYPEPARTNERBANK_MAPPING_APPROVER'), 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		    	
		    	UPDATE SECROLES SET ROLECD = 'FINTYPE_PARTNER_BANK_MAPPING_MAKER' WHERE ROLECD = 'FINTYPEPARTNERBANK_MAPPING_MAKER';
		    	UPDATE SECROLES SET ROLECD = 'FINTYPE_PARTNER_BANK_MAPPING_APPROVER' WHERE ROLECD = 'FINTYPEPARTNERBANK_MAPPING_APPROVER';
		    	
		    	UPDATE SECGROUPS SET GRPCODE = 'FINTYPE_PARTNER_BANK_MAPPING_MAKER' WHERE GRPCODE = 'FINTYPEPARTNERBANK_MAPPING_MAKER';
		    	UPDATE SECGROUPS SET GRPCODE = 'FINTYPE_PARTNER_BANK_MAPPING_APPROVER' WHERE GRPCODE = 'FINTYPEPARTNERBANK_MAPPING_APPROVER';
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#704.3" author="vijaya.a">
		<addColumn tableName="FINTYPEPARTNERBANKS_Temp">
			<column name="BRANCHCODE" type="VARCHAR(12)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#704.4" author="vijaya.a">
		<addColumn tableName="FINTYPEPARTNERBANKS">
			<column name="BRANCHCODE" type="VARCHAR(12)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#704.5" author="vijaya.a">
		<addColumn tableName="FINTYPEPARTNERBANKS_Temp">
			<column name="CLUSTERID" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#704.6" author="vijaya.a">
		<addColumn tableName="FINTYPEPARTNERBANKS">
			<column name="CLUSTERID" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#704.7_pre" author="vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'fintypepartnerbanks_view');
		 	]]>
		</sql>
	</changeSet>

	<changeSet id="ST#704.7" author="vijaya.a">
		<createView viewName="FINTYPEPARTNERBANKS_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ID,
					T1.FINTYPE,
					T5.FINTYPEDESC,
					T1.PURPOSE,
					T1.PAYMENTMODE,
					T1.PARTNERBANKID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.PARTNERBANKCODE,
					T2.PARTNERBANKNAME,
					T1.VANAPPLICABLE,
					T1.BRANCHCODE,
					T3.BRANCHDESC,
					T1.CLUSTERID,
					T4.CODE CLUSTERCODE,
					T4.NAME,
					T4.CLUSTERTYPE,
					T2.ACCOUNTNO SUSPENSEAC
				FROM FINTYPEPARTNERBANKS_TEMP T1
				INNER JOIN PARTNERBANKS T2 ON T1.PARTNERBANKID = T2.PARTNERBANKID
				INNER JOIN RMTFINANCETYPES T5 ON T1.FINTYPE = T5.FINTYPE
				INNER JOIN RMTBRANCHES T3 ON T1.BRANCHCODE = T3.BRANCHCODE
				INNER JOIN CLUSTERS T4 ON T1.CLUSTERID = T4.ID
				UNION ALL
				SELECT T1.ID,
					T1.FINTYPE,
					T5.FINTYPEDESC,
					T1.PURPOSE,
					T1.PAYMENTMODE,
					T1.PARTNERBANKID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.PARTNERBANKCODE,
					T2.PARTNERBANKNAME,
					T1.VANAPPLICABLE,
					T1.BRANCHCODE,
					T3.BRANCHDESC,
					T1.CLUSTERID,
					T4.CODE CLUSTERCODE,
					T4.NAME,
					T4.CLUSTERTYPE,
					T2.ACCOUNTNO SUSPENSEAC
				FROM FINTYPEPARTNERBANKS T1
				INNER JOIN RMTFINANCETYPES T5 ON T1.FINTYPE = T5.FINTYPE
				INNER JOIN PARTNERBANKS T2 ON T1.PARTNERBANKID = T2.PARTNERBANKID
				INNER JOIN RMTBRANCHES T3 ON T1.BRANCHCODE = T3.BRANCHCODE
				INNER JOIN CLUSTERS T4 ON T1.CLUSTERID = T4.ID
				WHERE NOT EXISTS (SELECT 1 FROM FINTYPEPARTNERBANKS_TEMP WHERE FINTYPEPARTNERBANKS_TEMP.ID = T1.ID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#704.7_post" author="vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'fintypepartnerbanks_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#704.8_pre" author="vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'fintypepartnerbanks_aview');
		 	]]>
		</sql>
	</changeSet>

	<changeSet id="ST#704.8" author="vijaya.a">
		<createView viewName="FINTYPEPARTNERBANKS_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ID,
					T1.FINTYPE,
					T3.FINTYPEDESC,
					T1.PURPOSE,
					T1.PAYMENTMODE,
					T1.PARTNERBANKID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.PARTNERBANKCODE,
					T2.PARTNERBANKNAME,
					T2.ACTIVE,
					T2.ACCOUNTNO,
					T2.ACTYPE AS ACCOUNTTYPE,
					T4.ENTITYCODE,
					T1.VANAPPLICABLE,
					T1.BRANCHCODE,
					T5.BRANCHDESC,
					T1.CLUSTERID,
					T6.CODE CLUSTERCODE,
					T6.NAME,
					T6.CLUSTERTYPE
				FROM FINTYPEPARTNERBANKS T1
				INNER JOIN PARTNERBANKS T2 ON T1.PARTNERBANKID = T2.PARTNERBANKID
				INNER JOIN RMTFINANCETYPES T3 ON T1.FINTYPE = T3.FINTYPE
				INNER JOIN SMTDIVISIONDETAIL T4 ON T3.FINDIVISION = T4.DIVISIONCODE
				INNER JOIN RMTBRANCHES T5 ON T1.BRANCHCODE = T5.BRANCHCODE
				INNER JOIN CLUSTERS T6 ON T1.CLUSTERID = T6.ID
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#704.8_post" author="vijaya.a" dbms="postgress">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'fintypepartnerbanks_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#704.9_pre" author="vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_fcview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#704.9" author="vijaya.a">
		<createView viewName="FINRECEIPTHEADER_FCVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.RECAGAINST,
					T2.FINID,
					T1.REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.RECEIPTMODESTATUS,
					T1.SUBRECEIPTMODE,
					T1.RECEIPTCHANNEL,
					T1.RECEIVEDFROM,
					T1.PANNUMBER,
					T1.COLLECTIONAGENTID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINTYPE,
					T2.FINBRANCH,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					T2.FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					T4.FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					T5.CCYDESC FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
					T2.SCHEDULEMETHOD,
					T2.PROFITDAYSBASIS PFTDAYSBASIS,
					T1.WAVIEDAMT,
					COALESCE(T3.CUSTID, 0) CUSTID,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T2.NEXTREPAYRVWDATE,
					T1.CASHIERBRANCH,
					T1.INITIATEDATE,
					T1.INSTRUCTIONUID,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.MODULE,
					T1.EXTREFERENCE,
					T13.CUSTCIF CUSTOMERCIF,
					T13.CUSTSHRTNAME CUSTOMERNAME,
					T1.ACTFINRECEIPT,
					T1.REASONCODE,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPEID,
	      			T14.CODE CLOSURETYPEDESC,
					T1.RECADJAMT,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE,
					PB.PARTNERBANKCODE
				FROM FINRECEIPTHEADER_TEMP T1
				LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.FINID = T2.FINID
				LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
				LEFT JOIN CLOSURE_TYPES	T14 ON T14.ID = T1.CLOSURETYPEID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				LEFT JOIN PARTNERBANKS PB ON PB.PARTNERBANKID = T1.PARTNERBANKID
				UNION ALL
				SELECT
					T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.RECAGAINST,
					T2.FINID,
					T1.REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.RECEIPTMODESTATUS,
					T1.SUBRECEIPTMODE,
					T1.RECEIPTCHANNEL,
					T1.RECEIVEDFROM,
					T1.PANNUMBER,
					T1.COLLECTIONAGENTID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINTYPE,
					T2.FINBRANCH,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					T2.FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					T4.FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					T5.CCYDESC FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
					T2.SCHEDULEMETHOD,
					T2.PROFITDAYSBASIS PFTDAYSBASIS,
					T1.WAVIEDAMT,
					COALESCE(T3.CUSTID, 0) CUSTID,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T2.NEXTREPAYRVWDATE,
					T1.CASHIERBRANCH,
					T1.INITIATEDATE,
					T1.INSTRUCTIONUID,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.MODULE,
					T1.EXTREFERENCE,
					T13.CUSTCIF CUSTOMERCIF,
					T13.CUSTSHRTNAME CUSTOMERNAME,
					T1.ACTFINRECEIPT,
					T1.REASONCODE,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPEID,
	      			T14.CODE CLOSURETYPEDESC,
					T1.RECADJAMT,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE,
					PB.PARTNERBANKCODE
				FROM FINRECEIPTHEADER T1
				LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.FINID = T2.FINID
				LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
				LEFT JOIN CLOSURE_TYPES	T14 ON T14.ID = T1.CLOSURETYPEID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				LEFT JOIN PARTNERBANKS PB ON PB.PARTNERBANKID = T1.PARTNERBANKID
				WHERE NOT EXISTS ( SELECT 1 FROM FINRECEIPTHEADER_TEMP WHERE RECEIPTID = T1.RECEIPTID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#704.9_post" author="vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader_fcview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#704.10_pre" author="vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_fview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#704.10" author="vijaya.a">
		<createView viewName="FINRECEIPTHEADER_FVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.ACTFINRECEIPT,
					T1.RECAGAINST,
					T2.FINID,
					T1.REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.RECEIPTMODESTATUS,
					T1.SUBRECEIPTMODE,
					T1.RECEIPTCHANNEL,
					T1.RECEIVEDFROM,
					T1.PANNUMBER,
					T1.COLLECTIONAGENTID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					COALESCE(T1.FINTYPE, T2.FINTYPE) FINTYPE,
					T2.FINBRANCH,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					COALESCE(T2.FINCCY, T15.FINCCY) FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					COALESCE(T4.FINTYPEDESC, T15.FINTYPEDESC) FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					COALESCE(T5.CCYDESC, T14.CCYDESC) FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
					T2.SCHEDULEMETHOD,
					T2.PROFITDAYSBASIS PFTDAYSBASIS,
					T1.WAVIEDAMT,
					COALESCE(T3.CUSTID, T10.CUSTID, 0) CUSTID,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T1.CASHIERBRANCH,
					T2.NEXTREPAYRVWDATE,
					T1.INITIATEDATE,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.MODULE,
					T1.INSTRUCTIONUID,
					T1.EXTREFERENCE,
					T10.CUSTCIF CUSTOMERCIF,
					T10.CUSTSHRTNAME CUSTOMERNAME,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T11.DIVISIONCODEDESC FINDIVISIONDESC,
					T12.BRANCHDESC POSTBRANCHDESC,
					T13.BRANCHDESC CASHIERBRANCHDESC,
					T11.ENTITYCODE,
					COALESCE(T3.CUSTBASECCY,T10.CUSTBASECCY)CUSTBASECCY,
					T1.REASONCODE,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T2.TDSAPPLICABLE FINTDSAPPLICABLE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPEID,
	      			T16.CODE CLOSURETYPEDESC,
				    T1.RECADJAMT,
				    T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE,
					PB.PARTNERBANKCODE
				FROM FINRECEIPTHEADER_TEMP T1
				LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.FINID = T2.FINID
				LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN Customers T10 ON CAST(T10.CustId AS VARCHAR(20)) = T1.REFERENCE
				LEFT JOIN SMTDIVISIONDETAIL T11 ON T1.FINDIVISION = T11.DIVISIONCODE
				LEFT JOIN RMTBranches T12 ON T1.PostBranch = T12.BranchCode
				LEFT JOIN RMTBranches T13 ON T1.CASHIERBRANCH = T13.BranchCode
				LEFT JOIN RMTFINANCETYPES T15 ON T1.FINTYPE = T15.FINTYPE
				LEFT JOIN RMTCURRENCIES T14 ON T14.CCYCODE= T3.CUSTBASECCY
				LEFT JOIN CLOSURE_TYPES	T16 ON T16.ID = T1.CLOSURETYPEID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				LEFT JOIN PARTNERBANKS PB ON PB.PARTNERBANKID = T1.PARTNERBANKID
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#704.10_post" author="vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader_fview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#704.11_pre" author="vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_feview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#704.11" author="vijaya.a">
		<createView viewName="FINRECEIPTHEADER_FEVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.RECAGAINST,
					T2.FINID,
					T1.REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.RECEIPTMODESTATUS,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINTYPE,
					T2.FINBRANCH,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					T2.FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					T4.FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					T5.CCYDESC FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
					T2.SCHEDULEMETHOD,
					T2.PROFITDAYSBASIS PFTDAYSBASIS,
					T1.WAVIEDAMT,
					COALESCE(T3.CUSTID, 0) CUSTID,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T2.NEXTREPAYRVWDATE,
					T1.CASHIERBRANCH,
					T1.INITIATEDATE,
					T4.FINDIVISION LOVDESCFINDIVISION,
					T2.BUSINESSVERTICAL,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.INSTRUCTIONUID,
					T1.MODULE,
					T1.EXTREFERENCE,
					T1.COLLECTIONAGENTID,
					T1.PANNUMBER,
					T1.RECEIVEDFROM,
					T1.RECEIPTCHANNEL,
					T1.SUBRECEIPTMODE,
					T13.CUSTCIF CUSTOMERCIF,
					T13.CUSTSHRTNAME CUSTOMERNAME,
					T1.ACTFINRECEIPT,
					T1.REASONCODE,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPEID,
	      			T14.CODE CLOSURETYPEDESC,
				    T1.RECADJAMT,
				    T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE,
					PB.PARTNERBANKCODE
				FROM FINRECEIPTHEADER_TEMP T1
				LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.FINID = T2.FINID
				LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
				LEFT JOIN CLOSURE_TYPES	T14 ON T14.ID = T1.CLOSURETYPEID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				LEFT JOIN PARTNERBANKS PB ON PB.PARTNERBANKID = T1.PARTNERBANKID
				UNION ALL
				SELECT T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.RECAGAINST,
					T2.FINID,
					T1.REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.RECEIPTMODESTATUS,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINTYPE,
					T2.FINBRANCH,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					T2.FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					T4.FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					T5.CCYDESC FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
					T2.SCHEDULEMETHOD,
					T2.PROFITDAYSBASIS PFTDAYSBASIS,
					T1.WAVIEDAMT,
					COALESCE(T3.CUSTID, 0) CUSTID,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T2.NEXTREPAYRVWDATE,
					T1.CASHIERBRANCH,
					T1.INITIATEDATE,
					T4.FINDIVISION LOVDESCFINDIVISION,
					T2.BUSINESSVERTICAL,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.INSTRUCTIONUID,
					T1.MODULE,
					T1.EXTREFERENCE,
					T1.COLLECTIONAGENTID,
					T1.PANNUMBER,
					T1.RECEIVEDFROM,
					T1.RECEIPTCHANNEL,
					T1.SUBRECEIPTMODE,
					T13.CUSTCIF CUSTOMERCIF,
					T13.CUSTSHRTNAME CUSTOMERNAME,
					T1.ACTFINRECEIPT,
					T1.REASONCODE,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPEID,
	      			T14.CODE CLOSURETYPEDESC,
				    T1.RECADJAMT,
				    T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE,
					PB.PARTNERBANKCODE
				FROM FINRECEIPTHEADER T1
				LEFT JOIN (SELECT FINID, FINREFERENCE, FINBRANCH, FINTYPE
							, FINCCY, SCHEDULEMETHOD, PROFITDAYSBASIS, FINISACTIVE
							, CUSTID, PRODUCTCATEGORY, PROMOTIONCODE, NEXTREPAYRVWDATE
							, BUSINESSVERTICAL
						FROM FINANCEMAIN_TEMP
						UNION
						SELECT FINID, FINREFERENCE, FINBRANCH, FINTYPE, FINCCY
							, SCHEDULEMETHOD, PROFITDAYSBASIS, FINISACTIVE
							, CUSTID, PRODUCTCATEGORY, PROMOTIONCODE, NEXTREPAYRVWDATE
							, BUSINESSVERTICAL
						FROM FINANCEMAIN ) T2 ON T1.FINID = T2.FINID
				LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
				LEFT JOIN CLOSURE_TYPES	T14 ON T14.ID = T1.CLOSURETYPEID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				LEFT JOIN PARTNERBANKS PB ON PB.PARTNERBANKID = T1.PARTNERBANKID
				WHERE NOT EXISTS (SELECT 1 FROM FINRECEIPTHEADER_TEMP WHERE RECEIPTID = T1.RECEIPTID )
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#704.11_post" author="vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader_feview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#710.1" author="saikiran.n">
		<addColumn tableName="FinanceMain_temp">
			<column name="SecurityMandateID" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#710.2" author="saikiran.n">
		<addColumn tableName="FinanceMain">
			<column name="SecurityMandateID" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#710.3" author="saikiran.n">
		<sql>
			<![CDATA[
				 UPDATE FINANCEMAIN SET SECURITYMANDATEID = (SELECT M.MANDATEID FROM MANDATES M WHERE FINANCEMAIN.FINREFERENCE = M.ORGREFERENCE AND M.SECURITYMANDATE = 1);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#710.4_pre" author="saikiran.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financeenquiry_view');
		 	]]>
		</sql>
	</changeSet>

	<changeSet id="ST#710.4" author="saikiran.n">
		<createView viewName="FINANCEENQUIRY_VIEW" replaceIfExists="true">
		  <![CDATA[
				SELECT FM.FINID,
					FM.FINREFERENCE,
					FM.FINBRANCH,
					FM.FINTYPE,
					FM.FINCCY,
					FM.SCHEDULEMETHOD,
					FM.PROFITDAYSBASIS,
					FM.FINSTARTDATE,
					FM.CALTERMS NUMBEROFTERMS,
					FM.CUSTID,
					FM.FINAMOUNT,
					FM.GRCPERIODENDDATE,
					FM.MATURITYDATE,
					FM.FINREPAYMENTAMOUNT,
					FM.FINISACTIVE,
					FM.ALLOWGRCPERIOD,
					FM.DOWNPAYMENT,
					FM.MIGRATEDFINANCE,
					FM.LASTREPAYDATE,
					FM.LASTREPAYPFTDATE,
					FM.FINCURRASSETVALUE,
					FM.BLACKLISTED,
					FM.FEECHARGEAMT,
					FM.CLOSINGSTATUS,
					FM.GRACETERMS,
					FM.ALWMULTIDISB,
					FM.DEFFERMENTS,
					FM.FINSTATUS ,
					FM.MANDATEID,
					FM.FINREPAYMETHOD,
					FM.FINASSETVALUE,
					FM.SANBSDSCHDLE,
					FM.PROMOTIONSEQID,
					FM.SVAMOUNT,
					FM.CBAMOUNT,
					(FM.FINCURRASSETVALUE+ FM.FEECHARGEAMT) FINANCINGAMOUNT,
					(FM.FINCURRASSETVALUE- FM.FINREPAYMENTAMOUNT+ FM.FEECHARGEAMT) CURFINAMOUNT,
					RF.FINTYPEDESC LOVDESCFINTYPENAME,
					RF.FINSCHEDULEON LOVDESCFINSCHEDULEON,
					RF.FINDIVISION LOVDESCFINDIVISION,
					RF.FINCATEGORY LOVDESCPRODUCTCODENAME,
					RF.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
					C.CUSTCIF LOVDESCCUSTCIF,
					C.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
					RB.BRANCHDESC LOVDESCFINBRANCHNAME,
					RC.CUSTTYPECTG,
					COALESCE(FP.NOINST,0) NOINST,
					FM.TOTALCPZ,
					FM.FINOCRREQUIRED,
					FM.ALWGRCADJ,
					FM.ENDGRCPERIODAFTRFULLDISB,
					FM.AUTOINCGRCENDDATE,
					FM.RECORDSTATUS,
					FM.WRITEOFFLOAN,
					FM.RESTRUCTURE,
					FM.SUBVENTIONFROM,
					FM.MANUFACTURERDEALERID,
					AV.DEALERNAME MANUFACTURERDEALERNAME,
					AV.CODE MANUFACTURERDEALERCODE,
					FM.ESCROW,
					FM.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					FM.SECURITYMANDATEID
				FROM FINANCEMAIN FM
				INNER JOIN RMTFINANCETYPES RF ON RF.FINTYPE = FM.FINTYPE
				INNER JOIN CUSTOMERS C ON C.CUSTID = FM.CUSTID
				INNER JOIN RMTBRANCHES RB ON RB.BRANCHCODE = FM.FINBRANCH
				INNER JOIN RMTCUSTTYPES RC ON RC.CUSTTYPECODE = C.CUSTTYPECODE 
				LEFT JOIN FINPFTDETAILS FP ON FP.FINID = FM.FINID
				LEFT JOIN AMTVEHICLEDEALER AV ON AV.DEALERID = FM.MANUFACTURERDEALERID 
				LEFT JOIN CUSTOMERBANKINFO CB ON CB.BANKID = FM.CUSTBANKID
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#710.4_post" author="saikiran.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financeenquiry_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#113_pre1" author="Gopal.p">
		<dropSequence sequenceName="SEQ_FILE_UPLOAD_HEADER" />
	</changeSet>
	
	<changeSet id="ST#113_pre2" author="Gopal.p">
		<dropView viewName="FILE_UPLOAD_HEADER_AVIEW" />
	</changeSet>

	<changeSet id="ST#113_pre3" author="Gopal.p">
		<dropView viewName="FILE_UPLOAD_HEADER_TVIEW" />
	</changeSet>

	<changeSet id="ST#113_pre4" author="Gopal.p">
		<dropView viewName="FILE_UPLOAD_HEADER_VIEW" />
	</changeSet>

	<changeSet id="ST#113_pre5" author="Gopal.p">
		<dropTable tableName="FILE_UPLOAD_HEADER_TEMP" />
	</changeSet>

	<changeSet id="ST#113_pre6" author="Gopal.p">
		<dropTable tableName="FILE_UPLOAD_HEADER" />
	</changeSet>
	
	<changeSet id="ST#113_pre7" author="Gopal.p">
		<dropTable tableName="REPRESENT_UPLOADS" />
	</changeSet> 

	<changeSet id="ST#113.1" author="Gopal.p">
		<createTable tableName="FILE_UPLOAD_HEADER">
			<column name="Id" type="bigint" autoIncrement="true">
				<constraints nullable="false" />
			</column>
			<column name="EntityCode" type="varchar(8)">
				<constraints nullable="false" />
			</column>
			<column name="Type" type="varchar(50)">
				<constraints nullable="false" />
			</column>
			<column name="FileName" type="varchar(100)">
				<constraints nullable="false" />
			</column>
			<column name="ExecutionID" type="bigint" />
			<column name="TotalRecords" type="int" />
			<column name="SuccessRecords" type="int" />
			<column name="FailureRecords" type="int" />
			<column name="Progress" type="int" />
			<column name="Remarks" type="varchar(2000)" />
			<column name="CreatedBy" type="bigint" />
			<column name="CreatedOn" type="datetime" />
			<column name="ApprovedBy" type="bigint" />
			<column name="ApprovedOn" type="datetime" />
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkflowId" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet id="ST#113.2" author="Gopal.p">
		<addPrimaryKey tableName="FILE_UPLOAD_HEADER" columnNames="Id" />
	</changeSet>

	<changeSet id="ST#113.3" author="Gireesh.G">
		<createTable tableName="REPRESENT_UPLOADS">
			<column name="Id" type="bigint" autoIncrement="true">
				<constraints nullable="false" />
			</column>
			<column name="HeaderId" type="bigint" />
			<column name="FinID" type="bigint" />
			<column name="FinReference" type="varchar(20)" />
			<column name="PresentmentID" type="bigint" />
			<column name="DueDate" type="datetime" />
			<column name="Progress" type="int" />
			<column name="Status" type="char(1)" />
			<column name="ErrorCode" type="varchar(20)" />
			<column name="ErrorDesc" type="varchar(2000)" />
		</createTable>
	</changeSet>

	<changeSet id="ST#113.4" author="Gireesh.G">
		<addPrimaryKey tableName="REPRESENT_UPLOADS" columnNames="Id" />
	</changeSet>
	
	<changeSet id="ST#113.5" author="Gopal.p">
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='RE_PRESENTMENT_UPLOAD');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='RE_PRESENTMENT_UPLOAD');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='RE_PRESENTMENT_UPLOAD';
 				
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RE_PRESENTMENT_UPLOAD'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RE_PRESENTMENT_UPLOAD');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'RE_PRESENTMENT_UPLOAD';

				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'RE_PRESENTMENT_UPLOAD', 'Representment Upload File.', 12, 'Representment', null, null, ',', 0, 1, null, 'ROW:{LOAN_NO, DUE_DATE}', null, 'C', '/opt/pff/hdfc/representment/upload', 'Representment_', '.xls', 0, CURRENT_TIMESTAMP, '${ddmm},.${SEQ_DATE_FILE}', null, 0, NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RE_PRESENTMENT_UPLOAD'), 'REPRESENT_UPLOADS', 1, 'HEADERID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 2, 0, 0);

				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'REPRESENT_UPLOADS' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RE_PRESENTMENT_UPLOAD')), 'HEADERID',     0, 'N', NULL, NULL, '${HEADER_ID}', NULL, '0', NULL, NULL, NULL, NULL, 'M');								
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'REPRESENT_UPLOADS' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RE_PRESENTMENT_UPLOAD')), 'FINREFERENCE',  0, 'N', NULL, NULL, NULL, NULL, '0', NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'REPRESENT_UPLOADS' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RE_PRESENTMENT_UPLOAD')), 'DUEDATE',       0, 'N', NULL, NULL, NULL, NULL, '1', NULL, NULL, NULL, 'dd-MMM-yyyy', 'M');
 			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#113.6" author="gopal.p">
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='RE_PRESENTMENT_TEMPLATE');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='RE_PRESENTMENT_TEMPLATE');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='RE_PRESENTMENT_TEMPLATE';
							
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RE_PRESENTMENT_TEMPLATE'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID IN (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RE_PRESENTMENT_TEMPLATE');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'RE_PRESENTMENT_TEMPLATE';
							
				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'RE_PRESENTMENT_TEMPLATE', 'Representement template download', 3, 'Representment', NULL, NULL, ',' , 0, 0, NULL, 'ROW:{LOAN_NO, DUE_DATE}',  '', 'A', '/opt/pff/hdfc/representment/template', 'Representment_', '.xls', 0, current_timestamp, '${ddMMYYYYHms}', NULL, 0, NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RE_PRESENTMENT_TEMPLATE'), 'REPRESENT_UPLOADS',  0, 'ID', 'HEADERID = 0', NULL, NULL, NULL, NULL, NULL, NULL, 2, 0, 0);
				
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'REPRESENT_UPLOADS' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RE_PRESENTMENT_TEMPLATE')), 'FINREFERENCE',  0,'N', NULL, NULL, NULL, NULL, '0', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'REPRESENT_UPLOADS' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RE_PRESENTMENT_TEMPLATE')), 'DUEDATE',	   0,'N', NULL, NULL, NULL, NULL, '0', NULL, NULL, NULL, 'dd-MMM-yyyy', 'O');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#113.7" author="gopal.p">
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='RE_PRESENTMENT_DOWNLOAD');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='RE_PRESENTMENT_DOWNLOAD');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='RE_PRESENTMENT_DOWNLOAD';
							
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RE_PRESENTMENT_DOWNLOAD'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID IN (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RE_PRESENTMENT_DOWNLOAD');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'RE_PRESENTMENT_DOWNLOAD';
							
				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'RE_PRESENTMENT_DOWNLOAD', 'Representement download', 3, 'Representment', NULL, NULL, ',' , 0, 0, NULL, 'ROW:{Loan No,Due Date,Presentment ID,Upload Date,Status,Error Code,ErrorDesc,Created By,Approved By}',  '', 'A', '/opt/pff/hdfc/representment/download', 'Representment_', '.xls', 0, current_timestamp, '${ddMMYYYYHms}', NULL, 0, NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RE_PRESENTMENT_DOWNLOAD'), 'REPRESENT_UPLOADS',  0, 'ID', 'HEADERID = :HEADERID', NULL, NULL, NULL, NULL, NULL, NULL, 9, 0, 0);
				
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'REPRESENT_UPLOADS' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RE_PRESENTMENT_DOWNLOAD')), 'FINREFERENCE',    0,'N', NULL, NULL, NULL, NULL, '0', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'REPRESENT_UPLOADS' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RE_PRESENTMENT_DOWNLOAD')), 'DUEDATE',	     0,'N', NULL, NULL, NULL, NULL, '0', NULL, NULL, NULL, 'dd-MMM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'REPRESENT_UPLOADS' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RE_PRESENTMENT_DOWNLOAD')), 'PRESENTMENTID',	 0,'N', NULL, NULL, NULL, NULL, '0', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'REPRESENT_UPLOADS' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RE_PRESENTMENT_DOWNLOAD')), 'CREATEDON',	     0,'N', NULL, NULL, NULL, NULL, '0', NULL, NULL, NULL, 'dd-MMM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'REPRESENT_UPLOADS' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RE_PRESENTMENT_DOWNLOAD')), 'STATUS',	         0,'N', NULL, NULL, NULL, NULL, '0', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'REPRESENT_UPLOADS' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RE_PRESENTMENT_DOWNLOAD')), 'ERRORCODE',	     0,'N', NULL, NULL, NULL, NULL, '0', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'REPRESENT_UPLOADS' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RE_PRESENTMENT_DOWNLOAD')), 'ERRORDESC',	     0,'N', NULL, NULL, NULL, NULL, '0', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'REPRESENT_UPLOADS' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RE_PRESENTMENT_DOWNLOAD')), 'CREATEDBY',	     0,'N', NULL, NULL, NULL, NULL, '0', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'REPRESENT_UPLOADS' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RE_PRESENTMENT_DOWNLOAD')), 'APPROVEDBY',	     0,'N', NULL, NULL, NULL, NULL, '0', NULL, NULL, NULL, NULL, 'O');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#707.1" author="HariTeja.B">
		<createTable tableName="MANDATES_UPLOAD">
			<column name="Id" 					type="bigint"		autoIncrement="true" />
			<column name="HeaderID"             type="bigint" />
			<column name="MandateID" 			type="bigint"/>
			<column name="CustID" 				type="bigint"/>
			<column name="CustCIF" 				type="varchar(20)"/>
			<column name="MandateRef" 			type="varchar(50)"/>
			<column name="MandateType" 			type="varchar(20)"/>
			<column name="BankBranchID" 		type="bigint"/>
			<column name="AccNumber"			type="varchar(50)"/>
			<column name="AccHolderName"		type="varchar(100)"/>
			<column name="JointAccHolderName"	type="varchar(100)"/>
			<column name="AccType"				type="varchar(20)"/>
			<column name="OpenMandate"			type="boolean"/>
			<column name="StartDate"			type="datetime"/>
			<column name="ExpiryDate"			type="datetime"/>
			<column name="MaxLimit"				type="number(15,2)"/>
			<column name="Periodicity"			type="varchar(20)"/>
			<column name="PhoneCountryCode"		type="varchar(5)"/>
			<column name="PhoneAreaCode"		type="varchar(8)"/>
			<column name="PhoneNumber"			type="varchar(12)"/>
			<column name="MandateStatus"		type="varchar(20)"/>
			<column name="ApprovalID"			type="varchar(50)"/>
			<column name="InputDate"			type="datetime"/>
			<column name="Active"				type="boolean"/>
			<column name="Reason"				type="varchar(500)"/>
			<column name="MandateCcy"			type="varchar(10)"/>
			<column name="OrgReference"			type="varchar(25)"/>
			<column name="ExternalRef"			type="varchar(2000)"/>
			<column name="DocumentName"			type="varchar(200)"/>
			<column name="DocumentRef"			type="number"/>
			<column name="BarCodeNumber"		type="varchar(10)"/>
			<column name="SwapIsActive"			type="boolean"/>
			<column name="PrimaryMandateID"		type="bigint"/>
			<column name="EntityCode"			type="varchar(8)"/>
			<column name="PartnerBankID"		type="bigint"/>
			<column name="DefaultMandate"		type="boolean"/>
			<column name="EmandateSource"		type="varchar(50)"/>
			<column name="EmandateReferenceNo"	type="varchar(50)"/>
			<column name="SwapEffectiveDate"	type="datetime"/>
			<column name="HoldReason"			type="varchar(50)"/>
			<column name="SecurityMandate"		type="boolean"/>
			<column name="EmployerID"			type="bigint"/>
			<column name="EmployeeNo"			type="varchar(50)"/>
			<column name="Ifsc" 				type="varchar(40)"  />
			<column name="Micr" 				type="bigint" />
			<column name="ExternalMandate" 		type="boolean" />
			<column name="Progress"             type="int" />
			<column name="Status"               type="char(1)" />
			<column name="ErrorCode"            type="varchar(20)" />
			<column name="ErrorDesc"            type="varchar(2000)" />
		</createTable>
	</changeSet>
	
	<changeSet id="ST#707.2" author="HariTeja.B">
		<addPrimaryKey constraintName="PK_MANDATES_UPLOAD_ID" tableName="MANDATES_UPLOAD" columnNames="id" />
	</changeSet>
	
	<changeSet id="ST#707.3" author="HariTeja.B" dbms="postgresql, oracle">
		<addDefaultValue columnName="SwapIsActive" 		tableName="MANDATES_UPLOAD" defaultValue="0" />
		<addDefaultValue columnName="PartnerBankID" 	tableName="MANDATES_UPLOAD" defaultValue="0" />
		<addDefaultValue columnName="DefaultMandate" 	tableName="MANDATES_UPLOAD" defaultValue="0" />
		<addDefaultValue columnName="SecurityMandate" 	tableName="MANDATES_UPLOAD" defaultValue="0" />
	</changeSet>
	
	<changeSet id="ST#707.3" author="HariTeja.B" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE MANDATES_UPLOAD ADD CONSTRAINT DF_MU_SWAPISACTIVE DEFAULT 0 FOR SWAPISACTIVE;
				ALTER TABLE MANDATES_UPLOAD ADD CONSTRAINT DF_MU_PARTNERBANKID DEFAULT 0 FOR PARTNERBANKID;
				ALTER TABLE MANDATES_UPLOAD ADD CONSTRAINT DF_MU_DEFAULTMANDATE DEFAULT 0 FOR DEFAULTMANDATE;
				ALTER TABLE MANDATES_UPLOAD ADD CONSTRAINT DF_MU_SECURITYMANDATE DEFAULT 0 FOR SECURITYMANDATE;
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#707.4" author="HariTeja.B">
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='MANDATES_UPLOAD');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='MANDATES_UPLOAD');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='MANDATES_UPLOAD';
 				
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD';

				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'MANDATES_UPLOAD', 'Mandates Upload File.', 12, 'MANDATE', null, null, ',', 1, 1, null, null, null, 'C', '/opt/pff/hdfc/mandate/upload', 'Mandate_', '.xls', 0, CURRENT_TIMESTAMP, '${ddmm},.${SEQ_DATE_FILE}', null, '0', NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD'), 'MANDATES_UPLOAD', 1, 'ID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 26, 0, 0);
								
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD')), 'ID',  					1, 'N', NULL, NULL, NULL, NULL, '0',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD')), 'HEADERID',     		0, 'N', NULL, NULL, '${HEADER_ID}', NULL, '0', NULL, NULL, NULL, NULL, 'M');								
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD')), 'MANDATEID',      		1, 'N', NULL, NULL, NULL, NULL, '0',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD')), 'CUSTCIF',       		0, 'N', NULL, NULL, NULL, NULL, '1',  NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD')), 'MANDATEREF',      		0, 'N', NULL, NULL, NULL, NULL, '16', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD')), 'MANDATETYPE',      	0, 'N', NULL, NULL, NULL, NULL, '3',  NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD')), 'BANKBRANCHID',    		1, 'N', NULL, NULL, NULL, NULL, '0',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD')), 'ACCNUMBER',       		0, 'N', NULL, NULL, NULL, NULL, '6',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD')), 'ACCHOLDERNAME',    	0, 'N', NULL, NULL, NULL, NULL, '7',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD')), 'JOINTACCHOLDERNAME',   0, 'N', NULL, NULL, NULL, NULL, '8',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD')), 'ACCTYPE',      		0, 'N', NULL, NULL, NULL, NULL, '9',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD')), 'OPENMANDATE',       	0, 'N', NULL, NULL, NULL, NULL, '12', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD')), 'STARTDATE',      		0, 'N', NULL, NULL, NULL, NULL, '13', NULL, NULL, NULL,'dd-MMM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD')), 'EXPIRYDATE',       	0, 'N', NULL, NULL, NULL, NULL, '14', NULL, NULL, NULL,'dd-MMM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD')), 'MAXLIMIT',       		0, 'N', NULL, NULL, NULL, NULL, '10', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD')), 'PERIODICITY',       	0, 'N', NULL, NULL, NULL, NULL, '11', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD')), 'MANDATESTATUS',       	0, 'N', NULL, NULL, NULL, NULL, '24', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD')), 'REASON',       		0, 'N', NULL, NULL, NULL, NULL, '25', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD')), 'ORGREFERENCE',      	0, 'N', NULL, NULL, NULL, NULL, '2',  NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD')), 'SWAPISACTIVE',      	0, 'N', NULL, NULL, NULL, NULL, '18', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD')), 'ENTITYCODE',      		0, 'N', NULL, NULL, NULL, NULL, '0',  NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD')), 'PARTNERBANKID',      	0, 'N', NULL, NULL, NULL, NULL, '15', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD')), 'EMANDATESOURCE',       0, 'N', NULL, NULL, NULL, NULL, '20', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD')), 'EMANDATEREFERENCENO',  0, 'N', NULL, NULL, NULL, NULL, '21', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD')), 'SWAPEFFECTIVEDATE',    0, 'N', NULL, NULL, NULL, NULL, '19', NULL, NULL, NULL,'dd-MMM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD')), 'EMPLOYERID',      		0, 'N', NULL, NULL, NULL, NULL, '22', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD')), 'EMPLOYEENO',       	0, 'N', NULL, NULL, NULL, NULL, '23', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD')), 'IFSC',       			0, 'N', NULL, NULL, NULL, NULL, '5' , NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD')), 'MICR',       			0, 'N', NULL, NULL, NULL, NULL, '4' , NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD')), 'EXTERNALMANDATE',      0, 'N', NULL, NULL, NULL, NULL, '17', NULL, NULL, NULL, NULL, 'O');
 			]]>
		</sql>
	</changeSet> 
	
	<changeSet id="ST#707.5" author="HariTeja.B">
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='MANDATES_TEMPLATE');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='MANDATES_TEMPLATE');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='MANDATES_TEMPLATE';
							
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID IN (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE';
							
				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'MANDATES_TEMPLATE', 'Mandate template download', 3, 'MANDATE', NULL, NULL, ',' , 0, 0, NULL, 'ROW:{Entity Code, Customer ID, Loan Reference, Mandate Type, MICR, IFSC Code, Account Number, Account Holder Name, Joint Account Holder Name, Account Type, Max Limit, Periodicity, Open Mandate, Start Date, Expiry Date, Partner Bank, UMRN number, External Mandate, Swap, Swap Effective Date,E-mandate Source, E-mandate Reference, EmployerID, Employee ID, Mandate Status, Rejection Reason}', NULL, 'A', '/opt/pff/hdfc/mandate/template', 'MANDATE_', '.xls', 0, current_timestamp, '${ddMMYYYYHms}', NULL, 0, NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE'), 'MANDATES_UPLOAD',  0, 'ID', 'HEADERID = :HEADERID', NULL, NULL, NULL, NULL, NULL, NULL, 26, 0, 0);
				
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE')), 'CUSTID',       			0, 'N', NULL, NULL, NULL, NULL, '1',  NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE')), 'MANDATEREF',      		0, 'N', NULL, NULL, NULL, NULL, '16', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE')), 'MANDATETYPE',      		0, 'N', NULL, NULL, NULL, NULL, '3',  NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE')), 'ACCNUMBER',       		0, 'N', NULL, NULL, NULL, NULL, '6',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE')), 'ACCHOLDERNAME',    		0, 'N', NULL, NULL, NULL, NULL, '7',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE')), 'JOINTACCHOLDERNAME',   	0, 'N', NULL, NULL, NULL, NULL, '8',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE')), 'ACCTYPE',      			0, 'N', NULL, NULL, NULL, NULL, '9',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE')), 'OPENMANDATE',       		0, 'N', NULL, NULL, NULL, NULL, '12', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE')), 'STARTDATE',      		0, 'N', NULL, NULL, NULL, NULL, '13', NULL, NULL, NULL,'dd-MMM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE')), 'EXPIRYDATE',       		0, 'N', NULL, NULL, NULL, NULL, '14', NULL, NULL, NULL,'dd-MMM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE')), 'MAXLIMIT',       		0, 'N', NULL, NULL, NULL, NULL, '10', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE')), 'PERIODICITY',       		0, 'N', NULL, NULL, NULL, NULL, '11', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE')), 'MANDATESTATUS',       	0, 'N', NULL, NULL, NULL, NULL, '24', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE')), 'REASON',       			0, 'N', NULL, NULL, NULL, NULL, '25', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE')), 'ORGREFERENCE',      		0, 'N', NULL, NULL, NULL, NULL, '2',  NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE')), 'SWAPISACTIVE',      		0, 'N', NULL, NULL, NULL, NULL, '18', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE')), 'ENTITYCODE',      		0, 'N', NULL, NULL, NULL, NULL, '0',  NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE')), 'PARTNERBANKID',      	0, 'N', NULL, NULL, NULL, NULL, '15', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE')), 'EMANDATESOURCE',       	0, 'N', NULL, NULL, NULL, NULL, '20', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE')), 'EMANDATEREFERENCENO',  	0, 'N', NULL, NULL, NULL, NULL, '21', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE')), 'SWAPEFFECTIVEDATE',    	0, 'N', NULL, NULL, NULL, NULL, '19', NULL, NULL, NULL,'dd-MMM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE')), 'EMPLOYERID',      		0, 'N', NULL, NULL, NULL, NULL, '22', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE')), 'EMPLOYEENO',       		0, 'N', NULL, NULL, NULL, NULL, '23', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE')), 'IFSC',       			0, 'N', NULL, NULL, NULL, NULL, '5' , NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE')), 'MICR',       			0, 'N', NULL, NULL, NULL, NULL, '4' , NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE')), 'EXTERNALMANDATE',      	0, 'N', NULL, NULL, NULL, NULL, '17', NULL, NULL, NULL, NULL, 'O');
			]]>
		</sql>
	</changeSet> 
	
    <changeSet id="ST#707.6" author="HariTeja.B">
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='MANDATES_DOWNLOAD');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='MANDATES_DOWNLOAD');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='MANDATES_DOWNLOAD';
							
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID IN (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD';
							
				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'MANDATES_DOWNLOAD', 'Mandate download', 3, 'MANDATE', NULL, NULL, ',' , 0, 0, NULL, 'ROW:{Entity Code, Customer ID, Loan Reference, Mandate Type, MICR, IFSC Code, Account Number, Account Holder Name, Joint Account Holder Name, Account Type, Max Limit, Periodicity, Open Mandate, Start Date, Expiry Date, Partner Bank, UMRN number, External Mandate, Swap, Swap Effective Date,E-mandate Source, E-mandate Reference, EmployerID, Employee ID, Mandate Status, Rejection Reason, UPLOADDATE, APPROVEDDATE, MAKER ID, CHECKERID, UPLOADSTATUS, ErrorCode, ErrorDesc}',  '', 'A', '/opt/pff/hdfc/mandate/download', 'Mandate_', '.xls', 0, current_timestamp, '${ddMMYYYYHms}', NULL, 0, NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD'), 'MANDATES_UPLOAD',  0, 'ID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 10, 0, 0);
				
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'ENTITYCODE',      		0, 'N', NULL, NULL, NULL, NULL, '0',  NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'CUSTID',       			0, 'N', NULL, NULL, NULL, NULL, '1',  NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'ORGREFERENCE',      		0, 'N', NULL, NULL, NULL, NULL, '2',  NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'MANDATETYPE',      		0, 'N', NULL, NULL, NULL, NULL, '3',  NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'MICR',       			0, 'N', NULL, NULL, NULL, NULL, '4' , NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'IFSC',       			0, 'N', NULL, NULL, NULL, NULL, '5' , NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'ACCNUMBER',       		0, 'N', NULL, NULL, NULL, NULL, '6',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'ACCHOLDERNAME',    		0, 'N', NULL, NULL, NULL, NULL, '7',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'JOINTACCHOLDERNAME',   	0, 'N', NULL, NULL, NULL, NULL, '8',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'ACCTYPE',      			0, 'N', NULL, NULL, NULL, NULL, '9',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'MAXLIMIT',       		0, 'N', NULL, NULL, NULL, NULL, '10', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'PERIODICITY',       		0, 'N', NULL, NULL, NULL, NULL, '11', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'OPENMANDATE',       		0, 'N', NULL, NULL, NULL, NULL, '12', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'STARTDATE',      		0, 'N', NULL, NULL, NULL, NULL, '13', NULL, NULL, NULL,'dd-MMM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'EXPIRYDATE',       		0, 'N', NULL, NULL, NULL, NULL, '14', NULL, NULL, NULL,'dd-MMM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'PARTNERBANKID',      	0, 'N', NULL, NULL, NULL, NULL, '15', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'MANDATEREF',      		0, 'N', NULL, NULL, NULL, NULL, '16', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'EXTERNALMANDATE',      	0, 'N', NULL, NULL, NULL, NULL, '17', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'SWAPISACTIVE',      		0, 'N', NULL, NULL, NULL, NULL, '18', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'SWAPEFFECTIVEDATE',    	0, 'N', NULL, NULL, NULL, NULL, '19', NULL, NULL, NULL,'dd-MMM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'EMANDATESOURCE',       	0, 'N', NULL, NULL, NULL, NULL, '20', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'EMANDATEREFERENCENO',  	0, 'N', NULL, NULL, NULL, NULL, '21', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'EMPLOYERID',      		0, 'N', NULL, NULL, NULL, NULL, '22', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'EMPLOYEENO',       		0, 'N', NULL, NULL, NULL, NULL, '23', NULL, NULL, NULL, NULL, 'O');				
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'MANDATESTATUS',       	0, 'N', NULL, NULL, NULL, NULL, '24', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'REASON',       			0, 'N', NULL, NULL, NULL, NULL, '25', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'CREATEDON',       		0, 'N', NULL, NULL, NULL, NULL, '26', NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'APPROVEDON',     		0, 'N', NULL, NULL, NULL, NULL, '27', NULL, NULL, NULL,'dd-MMM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'CREATEDBY',    	 		0, 'N', NULL, NULL, NULL, NULL, '28', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'APPROVEDBY',	      		0, 'N', NULL, NULL, NULL, NULL, '29', NULL, NULL, NULL, NULL,'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'STATUS',	                0, 'N', NULL, NULL, NULL, NULL, '32', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'ERRORCODE',	            0, 'N', NULL, NULL, NULL, NULL, '33', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'ERRORDESC',	            0, 'N', NULL, NULL, NULL, NULL, '34', NULL, NULL, NULL, NULL, 'O');
			]]>
		</sql>
	</changeSet> 
	
	<changeSet id="ST#707.7" author="HariTeja.B">
		<sql>
			<![CDATA[
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'MANDATE_UPLOAD_MAKER');
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'MANDATE_UPLOAD_APPROVER');

				DELETE FROM SECROLES WHERE ROLECD ='MANDATE_UPLOAD_MAKER';
				DELETE FROM SECROLES WHERE ROLECD ='MANDATE_UPLOAD_APPROVER';

				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'MANDATE_UPLOAD_MAKER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'MANDATE_UPLOAD_APPROVER');

				DELETE FROM SECGROUPS WHERE GRPCODE ='MANDATE_UPLOAD_MAKER';
				DELETE FROM SECGROUPS WHERE GRPCODE ='MANDATE_UPLOAD_APPROVER';

				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='menu_Item_MandateUpload_Maker';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='menu_Item_MandateUpload_Approver';

				INSERT INTO SECRIGHTS(RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_MandateUpload_Maker', 'MENU', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS(RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_MandateUpload_Approver', 'MENU', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'MANDATE_UPLOAD_MAKER', 'WF Maker for Mandate Upload', 0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'MANDATE_UPLOAD_APPROVER', 'WF Approver for Mandate Upload', 0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);

				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'MANDATE_UPLOAD_MAKER'),    (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_MandateUpload_Maker'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'MANDATE_UPLOAD_APPROVER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_MandateUpload_Approver'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);

				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'MANDATE_UPLOAD_MAKER', 'Maker role from Mandate Upload', '', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0); 
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'MANDATE_UPLOAD_APPROVER', 'Approver role from Mandate Upload',	'', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);

				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'MANDATE_UPLOAD_MAKER'),    (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'MANDATE_UPLOAD_MAKER'),    0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'MANDATE_UPLOAD_APPROVER'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'MANDATE_UPLOAD_APPROVER'), 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#711.1" author="bhaskara.k">
		<createTable tableName="PRESENTMENT_RESP_UPLOAD">
			<column name="Id" type="bigint" autoIncrement="true">
				<constraints nullable="false" />
			</column>
			<column name="Header_Id" type="bigint" />
			<column name="Presentment_Reference" type="varchar(50)" />
			<column name="FinReference" type="varchar(20)" />
			<column name="Host_Reference" type="varchar(20)" />
			<column name="Instalment_No" type="char(10)" />
			<column name="Amount_Cleared" type="varchar(14)" />
			<column name="Clearing_Date" type="datetime" />
			<column name="Clearing_Status" type="char(1)" />
			<column name="Bounce_Code" type="varchar(100)" />
			<column name="Bounce_Remarks" type="varchar(1000)" />
			<column name="Reason_Code" type="varchar(100)" />
			<column name="Bank_Code" type="varchar(8)" />
			<column name="Bank_Name" type="varchar(50)" />
			<column name="Branch_Code" type="varchar(8)" />
			<column name="Branch_Name" type="varchar(50)" />
			<column name="Partner_Bank_Code" type="varchar(50)" />
			<column name="Partner_Bank_Name" type="varchar(50)" />
			<column name="Bank_Address" type="varchar(50)" />
			<column name="Account_Number" type="varchar(50)" />
			<column name="Ifsc_Code" type="varchar(20)" />
			<column name="Umrn_No" type="varchar(20)" />
			<column name="Micr_Code" type="varchar(20)" />
			<column name="Cheque_Serial_No" type="varchar(20)" />
			<column name="Corporate_User_No" type="varchar(50)" />
			<column name="Corporate_User_Name" type="varchar(100)" />
			<column name="Dest_Acc_Holder" type="varchar(50)" />
			<column name="Debit_Credit_Flag" type="char(1)" />
			<column name="Process_Flag" type="bigint" />
			<column name="Thread_Id" type="bigint" />
			<column name="Utr_Number" type="varchar(50)" />
			<column name="FinId" type="bigint" />
			<column name="FateCorrection" type="CHAR(1)" >
				<constraints nullable="false" />
			</column>
			<column name="Error_Code" type="varchar(10)" />
			<column name="Error_Description" type="varchar(2000)" />
			<column name="Progress" type="int" />
			<column name="Status" type="char(1)" />
		</createTable>
	</changeSet>
	
	<changeSet id="ST#711.2" author="bhaskara.k">
		<addPrimaryKey constraintName="PK_PRE_RESPONCE_UPLOAD_Id" tableName="PRESENTMENT_RESP_UPLOAD" columnNames="Id" />
	</changeSet>
		
	<changeSet id="ST#711.3" author="bhaskara.k" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE PRESENTMENT_RESP_UPLOAD ADD CONSTRAINT DF_PRU_INSTALMENT_NO DEFAULT 0 FOR INSTALMENT_NO;
				ALTER TABLE PRESENTMENT_RESP_UPLOAD ADD CONSTRAINT DF_PRU_INSTALMENT_NO DEFAULT 0 FOR PROCESS_FLAG;
				ALTER TABLE PRESENTMENT_RESP_UPLOAD ADD CONSTRAINT DF_PRU_INSTALMENT_NO DEFAULT 0 FOR THREAD_ID;
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#711.3" author="bhaskara.k" dbms="postgresql, oracle">
		<addDefaultValue columnName="Instalment_No" tableName="PRESENTMENT_RESP_UPLOAD" defaultValue="0" />
		<addDefaultValue columnName="Process_Flag" tableName="PRESENTMENT_RESP_UPLOAD" defaultValue="0" />
		<addDefaultValue columnName="Thread_Id" tableName="PRESENTMENT_RESP_UPLOAD" defaultValue="0" />
	</changeSet>
	
	<changeSet id="ST#711.4" author="bhaskara.k">
		<sql>
			<![CDATA[	
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='FATE_CORRECTION_UPLOAD');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='FATE_CORRECTION_UPLOAD');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='FATE_CORRECTION_UPLOAD';
 				
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FATE_CORRECTION_UPLOAD'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FATE_CORRECTION_UPLOAD');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'FATE_CORRECTION_UPLOAD';
				
				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'FATE_CORRECTION_UPLOAD', 'FATE CORRECTION UPLOAD FILE.', 12, 'FATECORRECTION', null, null, ',', 1, 1, null, 'ROW:{FINREFERENCE, AMOUNT_CLEARED, CLEARING_DATE, UMRN_NO}', null, 'C', '/opt/pff/hdfc/fatecorrection/upload', 'FateCorrection_', '.xls', 0, CURRENT_TIMESTAMP, '${ddmm},.${SEQ_DATE_FILE}', NULL, '0', NULL, 1, 1);
		
				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FATE_CORRECTION_UPLOAD'), 'PRESENTMENT_RESP_UPLOAD', 1, 'ID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 6, 0, 0);
						
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'PRESENTMENT_RESP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FATE_CORRECTION_UPLOAD')), 'HEADER_ID',					0, 'N', NULL, NULL, '${HEADER_ID}', NULL, '0', NULL, NULL, NULL, NULL, 			'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'PRESENTMENT_RESP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FATE_CORRECTION_UPLOAD')), 'FINREFERENCE',  			0, 'N', NULL, NULL, NULL,			NULL, '0', NULL, NULL, NULL, NULL, 			'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'PRESENTMENT_RESP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FATE_CORRECTION_UPLOAD')), 'AMOUNT_CLEARED',  			0, 'N', NULL, NULL, NULL, 			NULL, '1', NULL, NULL, NULL, NULL, 			'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'PRESENTMENT_RESP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FATE_CORRECTION_UPLOAD')), 'CLEARING_DATE',  			0, 'N', NULL, NULL, NULL, 			NULL, '2', NULL, NULL, NULL, 'dd-MMM-yyyy', 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'PRESENTMENT_RESP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FATE_CORRECTION_UPLOAD')), 'UMRN_NO',  					0, 'N', NULL, NULL, NULL,			NULL, '3', NULL, NULL, NULL, NULL, 			'O');						
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'PRESENTMENT_RESP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FATE_CORRECTION_UPLOAD')), 'FATECORRECTION',  			0, 'N', NULL, 'Y',  NULL, 			NULL, '0', NULL, NULL, NULL, NULL,			'O');		
	 		]]>
		</sql>
	</changeSet>

	<changeSet id="ST#711.5" author="bhaskara.k">
		<sql>
			<![CDATA[	
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='FATE_CORRECTION_TEMPLATE');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='FATE_CORRECTION_TEMPLATE');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='FATE_CORRECTION_TEMPLATE';
							
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FATE_CORRECTION_TEMPLATE'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID IN (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FATE_CORRECTION_TEMPLATE');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'FATE_CORRECTION_TEMPLATE';
							
				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'FATE_CORRECTION_TEMPLATE', 'FATE CORRECTION TEMPLATE DOWNLOAD', 3, 'FATECORRECTION', NULL, NULL, ',' , 0, 0, NULL, 'ROW:{FINREFERENCE, AMOUNT_CLEARED, CLEARING_DATE, UMRN_NO}',  NULL, 'A', '/opt/pff/hdfc/fatecorrection/template', 'FateCorrection_', '.xls', 0, current_timestamp, '${ddMMYYYYHms}', NULL, 0, NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FATE_CORRECTION_TEMPLATE'), 'PRESENTMENT_RESP_UPLOAD',  1, 'ID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 4, 0, 0);
					
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'PRESENTMENT_RESP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FATE_CORRECTION_TEMPLATE')), 'FINREFERENCE',  			0, 'N', NULL, NULL, NULL, NULL, '0', NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'PRESENTMENT_RESP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FATE_CORRECTION_TEMPLATE')), 'AMOUNT_CLEARED',  		0, 'N', NULL, NULL, NULL, NULL, '1', NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'PRESENTMENT_RESP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FATE_CORRECTION_TEMPLATE')), 'CLEARING_DATE',  			0, 'N', NULL, NULL, NULL, NULL, '2', NULL, NULL, NULL, 'dd-MMM-yyyy', 'M');			
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'PRESENTMENT_RESP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FATE_CORRECTION_TEMPLATE')), 'UMRN_NO',  				0, 'N', NULL, NULL, NULL, NULL, '3', NULL, NULL, NULL, NULL, 'O');
				
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#711.6" author="bhaskara.k">
		<sql>
			<![CDATA[	
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='FATE_CORRECTION_DOWNLOAD');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='FATE_CORRECTION_DOWNLOAD');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='FATE_CORRECTION_DOWNLOAD';
							
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FATE_CORRECTION_DOWNLOAD'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID IN (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FATE_CORRECTION_DOWNLOAD');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'FATE_CORRECTION_DOWNLOAD';
							
				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'FATE_CORRECTION_DOWNLOAD', 'FATE CORRECTION DOWNLOAD', 3, 'FATECORRECTION', NULL, NULL, ',' , 0, 0, NULL, 'ROW:{FINREFERENCE, Presentment Reference, AMOUNT_CLEARED, CLEARING_DATE, Clearing Status, UMRN_NO, Fate Correction, Status, Error Code, Error Description, Created By, Approved By}', NULL, 'A', '/opt/pff/hdfc/fatecorrection/download', 'FateCorrection_', '.xls', 0, current_timestamp, '${ddMMYYYYHms}', NULL, 0, NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FATE_CORRECTION_DOWNLOAD'), 'PRESENTMENT_RESP_UPLOAD',  1, 'ID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 12, 0, 0);
				
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'PRESENTMENT_RESP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FATE_CORRECTION_DOWNLOAD')), 'FINREFERENCE',  			0, 'N', NULL, NULL, NULL, NULL, '0', NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'PRESENTMENT_RESP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FATE_CORRECTION_DOWNLOAD')), 'PRESENTMENT_REFERENCE',  	0, 'N', NULL, NULL, NULL, NULL, '1', NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'PRESENTMENT_RESP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FATE_CORRECTION_DOWNLOAD')), 'AMOUNT_CLEARED',  		0, 'N', NULL, NULL, NULL, NULL, '2', NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'PRESENTMENT_RESP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FATE_CORRECTION_DOWNLOAD')), 'CLEARING_DATE',  			0, 'N', NULL, NULL, NULL, NULL, '3', NULL, NULL, NULL, 'dd-MMM-yyyy', 'M');			
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'PRESENTMENT_RESP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FATE_CORRECTION_DOWNLOAD')), 'CLEARING_STATUS',  		0, 'N', NULL, NULL, NULL, NULL, '4', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'PRESENTMENT_RESP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FATE_CORRECTION_DOWNLOAD')), 'UMRN_NO',  				0, 'N', NULL, NULL, NULL, NULL, '5', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'PRESENTMENT_RESP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FATE_CORRECTION_DOWNLOAD')), 'FATECORRECTION',  		0, 'N', NULL, NULL, NULL, NULL, '6', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'PRESENTMENT_RESP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FATE_CORRECTION_DOWNLOAD')), 'STATUS',	                0, 'N', NULL, NULL, NULL, NULL, '7', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'PRESENTMENT_RESP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FATE_CORRECTION_DOWNLOAD')), 'ERROR_CODE',	            0, 'N', NULL, NULL, NULL, NULL, '8', NULL, NULL, NULL, NULL, 'O');		
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'PRESENTMENT_RESP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FATE_CORRECTION_DOWNLOAD')), 'ERROR_DESCRIPTION',	    0, 'N', NULL, NULL, NULL, NULL, '9', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'PRESENTMENT_RESP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FATE_CORRECTION_DOWNLOAD')), 'CREATEDBY',	     		0, 'N', NULL, NULL, NULL, NULL, '10', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'PRESENTMENT_RESP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FATE_CORRECTION_DOWNLOAD')), 'APPROVEDBY',	     		0, 'N', NULL, NULL, NULL, NULL, '11', NULL, NULL, NULL, NULL, 'O');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#711.7" author="bhaskara.k">
		<sql>
			<![CDATA[
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FATE_CORRECTION_UPLOAD_MAKER');
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FATE_CORRECTION_UPLOAD_APPROVER');

				DELETE FROM SECROLES WHERE ROLECD ='FATE_CORRECTION_UPLOAD_MAKER';
				DELETE FROM SECROLES WHERE ROLECD ='FATE_CORRECTION_UPLOAD_APPROVER';

				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FATE_CORRECTION_UPLOAD_MAKER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FATE_CORRECTION_UPLOAD_APPROVER');

				DELETE FROM SECGROUPS WHERE GRPCODE ='FATE_CORRECTION_UPLOAD_MAKER';
				DELETE FROM SECGROUPS WHERE GRPCODE ='FATE_CORRECTION_UPLOAD_APPROVER';

				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='menu_Item_FateCorrectionUpload_Maker';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='menu_Item_FateCorrectionUpload_Approver';

				INSERT INTO SECRIGHTS(RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_FateCorrectionUpload_Maker', 'MENU', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS(RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_FateCorrectionUpload_Approver', 'MENU', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'FATE_CORRECTION_UPLOAD_MAKER', 'WF Maker for FateCorrection Upload', 0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'FATE_CORRECTION_UPLOAD_APPROVER', 'WF Approver for FateCorrection Upload', 0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);

				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FATE_CORRECTION_UPLOAD_MAKER'),    (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_FateCorrectionUpload_Maker'),    1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FATE_CORRECTION_UPLOAD_APPROVER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_FateCorrectionUpload_Approver'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);

				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'FATE_CORRECTION_UPLOAD_MAKER', 'Maker role from FateCorrection Upload', '', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0); 
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'FATE_CORRECTION_UPLOAD_APPROVER', 'Approver role from FateCorrection Upload',	'', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);

				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FATE_CORRECTION_UPLOAD_MAKER'),    (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'FATE_CORRECTION_UPLOAD_MAKER'),    0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FATE_CORRECTION_UPLOAD_APPROVER'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'FATE_CORRECTION_UPLOAD_APPROVER'), 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#708.01" author="sainaveen.y">
		<createTable tableName="CHEQUES_UPLOAD">
			<column name="ID" type="bigint" autoIncrement="true" />
			<column name="HeaderId" type="bigint" />
			<column name="ChequeDetailsId" type="bigint" />
			<column name="ChequeHeaderId" type="bigint" />
			<column name="BankBranchId" type="bigint" />
			<column name="FinReference" type="varchar(20)" />
			<column name="FinID" type="bigint" />
			<column name="AccountNo" type="varchar(50)" />
			<column name="ChequeSerialNo" type="int" />
			<column name="ChequeDate" type="datetime" />
			<column name="EmiRefNo" type="int" />
			<column name="Amount" type="bigint" />
			<column name="ChequeCcy" type="varchar(3)" />
			<column name="Active" type="varchar(40)" />
			<column name="version" type="int" />
			<column name="lastmntby" type="bigint" />
			<column name="lastmnton" type="datetime" />
			<column name="recordstatus" type="varchar(50)" />
			<column name="rolecode" type="varchar(100)" />
			<column name="nextrolecode" type="varchar(200)" />
			<column name="taskid" type="varchar(50)" />
			<column name="nexttaskid" type="varchar(200)" />
			<column name="recordtype" type="varchar(50)" />
			<column name="workflowid" type="bigint" />
			<column name="DocumentName" type="varchar(200)" />
			<column name="DocumentRef" type="numeric(38,0)" />
			<column name="ChequeType" type="varchar(8)" />
			<column name="ChequeStatus" type="varchar(10)" />
			<column name="AccountType" type="varchar(20)" />
			<column name="AccHolderName" type="varchar(200)" />
			<column name="Action" type="varchar(10)" />
			<column name="IfscCode" type="varchar(20)" />
			<column name="Micr" type="varchar(20)" />
			<column name="Progress" type="int" />
			<column name="Status" type="char(1)" />
			<column name="ErrorCode" type="varchar(20)" />
			<column name="ErrorDesc" type="varchar(2000)" />
		</createTable>
	</changeSet>

	<changeSet id="ST#708.2" author="sainaveen.y">
		<addPrimaryKey constraintName="PK_CU_ID" tableName="CHEQUES_UPLOAD" columnNames="ID" />
	</changeSet>

	<changeSet id="ST#708.3" author="sainaveen.y">
		<addDefaultValue columnName="ChequeStatus" tableName="CHEQUES_UPLOAD" defaultValue="NEW" />
		<addDefaultValue columnName="Version" tableName="CHEQUES_UPLOAD" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#708.4" author="sainaveen.y">
		<sql>
			<![CDATA[
		        DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='CHEQUE_UPLOAD');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='CHEQUE_UPLOAD');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='CHEQUE_UPLOAD';
 				
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUE_UPLOAD'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUE_UPLOAD');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUE_UPLOAD';
				
				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'CHEQUE_UPLOAD', 'Cheque Upload File.', 12, 'Cheque', null, null, ',', 0, 1, null, 'ROW:{Action,Type Of Cheque,Loan Reference,Cheque No,Account Type,Account Holder Name,Account Number,IFSC Code,MICR,Amount}', null, 'C', '/opt/pff/hdfc/cheque/upload', 'Cheque_', '.xls', 0, CURRENT_TIMESTAMP, '${ddmm},.${SEQ_DATE_FILE}', null, '0', NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUE_UPLOAD'), 'CHEQUES_UPLOAD', 1, 'ID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 10, 0, 0);
		       
		        INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUE_UPLOAD')),  'HEADERID',          0, 'N', NULL, NULL, '${HEADER_ID}', NULL, '0',  NULL, NULL, NULL, NULL, 'M');
		        INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUE_UPLOAD')),  'ACTION',            0, 'N', NULL, NULL, NULL, NULL, '0',  NULL, NULL, NULL, NULL, 'M');
		        INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUE_UPLOAD')),  'CHEQUETYPE',        0, 'N', NULL, NULL, NULL, NULL, '1',  NULL, NULL, NULL, NULL, 'M');
		        INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUE_UPLOAD')),  'FINREFERENCE',      0, 'N', NULL, NULL, NULL, NULL, '2',  NULL, NULL, NULL, NULL, 'M');
		        INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUE_UPLOAD')),  'CHEQUESERIALNO',    0, 'N', NULL, NULL, NULL, NULL, '3',  NULL, NULL, NULL, NULL, 'M');
		        INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUE_UPLOAD')),  'ACCOUNTTYPE',       0, 'N', NULL, NULL, NULL, NULL, '4',  NULL, NULL, NULL, NULL, 'O');
		        INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUE_UPLOAD')),  'ACCHOLDERNAME',     0, 'N', NULL, NULL, NULL, NULL, '5',  NULL, NULL, NULL, NULL, 'M');
		        INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUE_UPLOAD')),  'ACCOUNTNO',         0, 'N', NULL, NULL, NULL, NULL, '6',  NULL, NULL, NULL, NULL, 'M');
                INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUE_UPLOAD')),  'IFSCCODE',          0, 'N', NULL, NULL, NULL, NULL, '7',  NULL, NULL, NULL, NULL, 'M');
                INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUE_UPLOAD')),  'MICR',              0, 'N', NULL, NULL, NULL, NULL, '8',  NULL, NULL, NULL, NULL, 'M');
                INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUE_UPLOAD')),  'AMOUNT',            0, 'N', NULL, NULL, NULL, NULL, '9',  NULL, NULL, NULL, NULL, 'O');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#708.5" author="sainaveen.y">
		<sql>
			<![CDATA[
	            DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='CHEQUE_TEMPLATE');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='CHEQUE_TEMPLATE');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='CHEQUE_TEMPLATE';
							
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUE_TEMPLATE'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID IN (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUE_TEMPLATE');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUE_TEMPLATE';
							
				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'CHEQUE_TEMPLATE', 'Cheque template download', 3, 'Cheque', NULL, NULL, ',' , 0, 0, NULL, 'ROW:{Action,Type Of Cheque,Loan Reference,Cheque No,Account Type,Account Holder Name,Account Number,IFSC Code,MICR,Amount}',  '', 'A', '/opt/pff/hdfc/cheque/template', 'Cheque_', '.xls', 0, current_timestamp, '${ddMMYYYYHms}', NULL, 0, NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUE_TEMPLATE'), 'CHEQUES_UPLOAD',  0, 'ID', 'HEADERID = 0', NULL, NULL, NULL, NULL, NULL, NULL, 10, 0, 0);
                	
                INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUE_TEMPLATE')),  'ACTION',            0, 'N', NULL, NULL, NULL, NULL, '0',  NULL, NULL, NULL, NULL, 'M');
                INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUE_TEMPLATE')),  'CHEQUETYPE',        0, 'N', NULL, NULL, NULL, NULL, '1',  NULL, NULL, NULL, NULL, 'M');
                INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUE_TEMPLATE')),  'FINREFERENCE',      0, 'N', NULL, NULL, NULL, NULL, '2',  NULL, NULL, NULL, NULL, 'M');
                INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUE_TEMPLATE')),  'CHEQUESERIALNO',    0, 'N', NULL, NULL, NULL, NULL, '3',  NULL, NULL, NULL, NULL, 'M');
                INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUE_TEMPLATE')),  'ACCOUNTTYPE',       0, 'N', NULL, NULL, NULL, NULL, '4',  NULL, NULL, NULL, NULL, 'O');
                INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUE_TEMPLATE')),  'ACCHOLDERNAME',     0, 'N', NULL, NULL, NULL, NULL, '5',  NULL, NULL, NULL, NULL, 'M');
                INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUE_TEMPLATE')),  'ACCOUNTNO',         0, 'N', NULL, NULL, NULL, NULL, '6',  NULL, NULL, NULL, NULL, 'M');
                INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUE_TEMPLATE')),  'IFSCCODE',          0, 'N', NULL, NULL, NULL, NULL, '7',  NULL, NULL, NULL, NULL, 'M');
                INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUE_TEMPLATE')),  'MICR',              0, 'N', NULL, NULL, NULL, NULL, '8',  NULL, NULL, NULL, NULL, 'M');
                INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUE_TEMPLATE')),  'AMOUNT',            0, 'N', NULL, NULL, NULL, NULL, '9',  NULL, NULL, NULL, NULL, 'O');
			]]>
		</sql>
	</changeSet> 

	<changeSet id="ST#708.6" author="sainaveen.y">
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='CHEQUE_DOWNLOAD');
				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='CHEQUE_DOWNLOAD');
				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='CHEQUE_DOWNLOAD';
						
			  	DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUE_DOWNLOAD'));
			  	DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID IN (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUE_DOWNLOAD');
			  	DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUE_DOWNLOAD';
						
			  	INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'CHEQUE_DOWNLOAD', 'post dated cheques download', 3, 'POST_DATED_CHEQUE', NULL, NULL, ',' , 0, 1, NULL, 'ROW:{ACTION,CHEQUETYPE,LOANREFERENCE,CHEQUESERIALNO,ACCOUNTTYPE,ACCHOLDERNAME,ACCOUNTNO,IFSCCODE,MICR,AMOUNT,UPLOADID,CHEQUEDETAILSID,APPROVEDON,CREATEDON,STATUS,ERRORCODE,ERRORDESC,CREATEDBY,APPROVEDBY}',  '', 'A', '/opt/pff/hdfc/pdc/download', 'PDC_', '.xls', 0, current_timestamp, '${ddMMYYYYHms}', NULL, 0, NULL, 1, 1);
			
			  	INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUE_DOWNLOAD'), 'CHEQUES_UPLOAD',  0, 'ID', 'HEADERID = :HEADERID', NULL, NULL, NULL, NULL, NULL, NULL, 19, 0, 0);
			 
			    INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUE_DOWNLOAD')),  'ACTION',                      0, 'N', NULL, NULL, NULL, NULL, '0',   NULL, NULL, NULL,   NULL,         'M');
                INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUE_DOWNLOAD')),  'CHEQUETYPE',                  0, 'N', NULL, NULL, NULL, NULL, '1',   NULL, NULL, NULL,   NULL,         'M');
                INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUE_DOWNLOAD')),  'FINREFERENCE',                0, 'N', NULL, NULL, NULL, NULL, '2',   NULL, NULL, NULL,   NULL,         'M');
                INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUE_DOWNLOAD')),  'CHEQUESERIALNO',              0, 'N', NULL, NULL, NULL, NULL, '3',   NULL, NULL, NULL,   NULL,         'M');
                INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUE_DOWNLOAD')),  'ACCOUNTTYPE',                 0, 'N', NULL, NULL, NULL, NULL, '4',   NULL, NULL, NULL,   NULL,         'O');
                INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUE_DOWNLOAD')),  'ACCHOLDERNAME',               0, 'N', NULL, NULL, NULL, NULL, '5',   NULL, NULL, NULL,   NULL,         'M');
                INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUE_DOWNLOAD')),  'ACCOUNTNO',                   0, 'N', NULL, NULL, NULL, NULL, '6',   NULL, NULL, NULL,   NULL,         'M');
                INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUE_DOWNLOAD')),  'IFSCCODE',                    0, 'N', NULL, NULL, NULL, NULL, '7',   NULL, NULL, NULL,   NULL,         'M');
                INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUE_DOWNLOAD')),  'MICR',                        0, 'N', NULL, NULL, NULL, NULL, '8',   NULL, NULL, NULL,   NULL,         'M');
                INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUE_DOWNLOAD')),  'AMOUNT',                      0, 'N', NULL, NULL, NULL, NULL, '9',   NULL, NULL, NULL,   NULL,         'O');
			    INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUE_DOWNLOAD')),  'ID',	                       0, 'N', NULL, NULL, NULL, NULL, '10',  NULL, NULL, NULL,   NULL,         'O');
			    INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUE_DOWNLOAD')),  'CHEQUEDETAILSID',	           0, 'N', NULL, NULL, NULL, NULL, '11',  NULL, NULL, NULL,   NULL,         'O');
			    INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUE_DOWNLOAD')),  'APPROVEDON',	               0, 'N', NULL, NULL, NULL, NULL, '12',  NULL, NULL, NULL,  'dd-MMM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUE_DOWNLOAD')),  'CREATEDON',	               0, 'N', NULL, NULL, NULL, NULL, '13',  NULL, NULL, NULL,  'dd-MMM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUE_DOWNLOAD')),  'STATUS',	                   0, 'N', NULL, NULL, NULL, NULL, '14',  NULL, NULL, NULL,   NULL,         'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUE_DOWNLOAD')),  'ERRORCODE',	               0, 'N', NULL, NULL, NULL, NULL, '15',  NULL, NULL, NULL,   NULL,         'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUE_DOWNLOAD')),  'ERRORDESC',	               0, 'N', NULL, NULL, NULL, NULL, '16',  NULL, NULL, NULL,   NULL,         'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUE_DOWNLOAD')),  'CREATEDBY',	               0, 'N', NULL, NULL, NULL, NULL, '17',  NULL, NULL, NULL,   NULL,         'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUE_DOWNLOAD')),  'APPROVEDBY',	               0, 'N', NULL, NULL, NULL, NULL, '18',  NULL, NULL, NULL,   NULL,         'O');
			]]>
		</sql>
	</changeSet> 
	
	<changeSet id="ST#708.7" author="sainaveen.y">
		<sql>
			<![CDATA[
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'CHEQUE_UPLOAD_MAKER');
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'CHEQUE_UPLOAD_APPROVER');

				DELETE FROM SECROLES WHERE ROLECD = 'CHEQUE_UPLOAD_MAKER';
				DELETE FROM SECROLES WHERE ROLECD = 'CHEQUE_UPLOAD_APPROVER';

				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'CHEQUE_UPLOAD_MAKER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'CHEQUE_UPLOAD_APPROVER');

				DELETE FROM SECGROUPS WHERE GRPCODE ='CHEQUE_UPLOAD_MAKER';
				DELETE FROM SECGROUPS WHERE GRPCODE ='CHEQUE_UPLOAD_APPROVER';

				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='menu_Item_ChequeUpload_Maker';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='menu_Item_ChequeUpload_Approver';

				INSERT INTO SECRIGHTS(RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_ChequeUpload_Maker', 'MENU', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS(RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_ChequeUpload_Approver', 'MENU', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'CHEQUE_UPLOAD_MAKER', 'WF Maker for Cheque Upload', 0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'CHEQUE_UPLOAD_APPROVER', 'WF Approver for Cheque Upload', 0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);

				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'CHEQUE_UPLOAD_MAKER'),    (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_ChequeUpload_Maker'),    1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'CHEQUE_UPLOAD_APPROVER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_ChequeUpload_Approver'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);

				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'CHEQUE_UPLOAD_MAKER', 'Maker role from Cheque Upload', '', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0); 
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'CHEQUE_UPLOAD_APPROVER', 'Approver role from Cheque Upload',	'', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);

				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'CHEQUE_UPLOAD_MAKER'),    (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'CHEQUE_UPLOAD_MAKER'),    0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'CHEQUE_UPLOAD_APPROVER'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'CHEQUE_UPLOAD_APPROVER'), 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#2649.1" author="Mounika.M">
		<addColumn tableName="FinExcessAmount">
			<column name="ReceiptId" type="bigint"/>
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#2649.2" author="Mounika.M">
		<addColumn tableName="FinExcessAmount">
			<column name="PostDate" type="datetime"/>
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#2649.3" author="Mounika.M">
		<addColumn tableName="FinExcessAmount">
			<column name="ValueDate" type="datetime"/>
		</addColumn>
	</changeSet>
	
	<changeSet id="TK#2644_pre" author="saikiran.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finexcessamount_lovview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="TK#2644" author="saikiran.n">
		<createView viewName="FINEXCESSAMOUNT_LOVVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT EXCESSID
					, FINID
					, FINREFERENCE
					, AMOUNTTYPE
					, cast(round(AMOUNT / 100,2) as numeric(36,2)) AMOUNT
					, cast(round(UTILISEDAMT / 100,2) as numeric(36,2)) UTILISEDAMT
					, cast(round(RESERVEDAMT / 100,2) as numeric(36,2)) RESERVEDAMT
					, cast(round(BALANCEAMT / 100,2) as numeric(36,2)) BALANCEAMT
					, RECEIPTID
					, VALUEDATE
				FROM FINEXCESSAMOUNT
			]]>
		</createView>
	</changeSet>
	
	<changeSet id="TK#2644__post" author="saikiran.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finexcessamount_lovview');
			]]>
		</sql>
	</changeSet>
	
</databaseChangeLog>