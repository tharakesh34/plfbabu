<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

	<property name="add.schema" value="dbo." dbms="mssql" />
	<property name="add.schema" value="" dbms="oracle" />
	<property name="add.schema" value="" dbms="postgresql" />
	<property name="call.substr" value="substring" dbms="mssql" />
	<property name="call.substr" value="substr" dbms="oracle" />
	<property name="call.substr" value="substring" dbms="postgresql" />
	<property name="call.auditdb" value="PLFAVANSEQC.." dbms="mssql" />
	<property name="call.auditdb" value=" " dbms="oracle" />
	<property name="call.concatenate" value="+" dbms="mssql" />
	<property name="call.concatenate" value="||" dbms="oracle" />
	<property name="call.concatenate" value="||" dbms="postgresql" />
	<property name="call.collength" value="LEN" dbms="mssql" />
	<property name="call.collength" value="LENGTH" dbms="oracle" />
	<property name="call.collength" value="LENGTH" dbms="postgresql" />
	<property name="call.date" value="getdate()" dbms="mssql" />
	<property name="call.date" value="sysdate" dbms="oracle" />
	<property name="call.date" value="now()" dbms="postgresql" />

	<changeSet id="pre_run_for_pgp" author="Gopal.p" runAlways="true" dbms="postgresql">
		<sql>
			Set search_path = plf,public,pg_catalog;
		</sql>
	</changeSet>

	<changeSet id="ST#713.1" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes">
			<column name="ClosureThresholdLimit" type="decimal(18,0)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#713.1.1" author="Sravani.S">
		<sql>
			<![CDATA[	
				UPDATE RMTFINANCETYPES SET CLOSURETHRESHOLDLIMIT = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.1.2" author="Sravani.S">
		<addNotNullConstraint tableName="RMTFinanceTypes" columnName="ClosureThresholdLimit"
			columnDataType="boolean" />
	</changeSet>

	<changeSet id="ST#713.1.3" author="Sravani.S" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE RMTFINANCETYPES ADD CONSTRAINT DF_FT_CLOSURETHRESHOLDLIMIT DEFAULT 0 FOR CLOSURETHRESHOLDLIMIT;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.1.3" author="Sravani.S" dbms="postgresql, oracle">
		<addDefaultValue tableName="RMTFinanceTypes" columnName="ClosureThresholdLimit" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#713.2" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes">
			<column name="MaxFPPCalType" type="Varchar(8)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#713.3" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes">
			<column name="MaxFPPAmount" type="decimal(18,0)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#713.3.1" author="Sravani.S">
		<sql>
			<![CDATA[	
				UPDATE RMTFINANCETYPES SET MAXFPPAMOUNT = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.3.2" author="Sravani.S">
		<addNotNullConstraint tableName="RMTFinanceTypes" columnName="MaxFPPAmount"
			columnDataType="decimal(18,0)" />
	</changeSet>

	<changeSet id="ST#713.3.3" author="Sravani.S" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE RMTFINANCETYPES ADD CONSTRAINT DF_FT_MAXFPPAMOUNT DEFAULT 0 FOR MAXFPPAMOUNT;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.3.3" author="Sravani.S" dbms="postgresql, oracle">
		<addDefaultValue tableName="RMTFinanceTypes" columnName="MaxFPPAmount" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#713.4" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes">
			<column name="MaxFPPPer" type="decimal(5,2)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#713.4.1" author="Sravani.S">
		<sql>
			<![CDATA[	
				UPDATE RMTFINANCETYPES SET MAXFPPPER = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.4.2" author="Sravani.S">
		<addNotNullConstraint tableName="RMTFinanceTypes" columnName="MaxFPPPer"
			columnDataType="decimal(5,2)" />
	</changeSet>

	<changeSet id="ST#713.4.3" author="Sravani.S" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE RMTFINANCETYPES ADD CONSTRAINT DF_FT_MAXFPPPER DEFAULT 0 FOR MAXFPPPER;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.4.3" author="Sravani.S" dbms="postgresql, oracle">
		<addDefaultValue tableName="RMTFinanceTypes" columnName="MaxFPPAmount" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#713.5" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes">
			<column name="MaxFPPCalOn" type="Varchar(50)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#713.6" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes_Temp">
			<column name="ClosureThresholdLimit" type="decimal(18,0)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#713.6.1" author="Sravani.S">
		<sql>
			<![CDATA[	
				UPDATE RMTFINANCETYPES_TEMP SET CLOSURETHRESHOLDLIMIT = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.6.2" author="Sravani.S">
		<addNotNullConstraint tableName="RMTFinanceTypes_Temp" columnName="ClosureThresholdLimit"
			columnDataType="boolean" />
	</changeSet>

	<changeSet id="ST#713.6.3" author="Sravani.S" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE RMTFINANCETYPES_TEMP ADD CONSTRAINT DF_FT_T_CLOSURETHRESHOLDLIMIT DEFAULT 0 FOR CLOSURETHRESHOLDLIMIT;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.6.3" author="Sravani.S" dbms="postgresql, oracle">
		<addDefaultValue tableName="RMTFinanceTypes_Temp" columnName="ClosureThresholdLimit" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#713.7" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes_Temp">
			<column name="MaxFPPCalType" type="Varchar(8)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#713.8" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes_Temp">
			<column name="MaxFPPAmount" type="decimal(18,0)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#713.8.1" author="Sravani.S">
		<sql>
			<![CDATA[	
				UPDATE RMTFINANCETYPES_TEMP SET MAXFPPAMOUNT = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.8.2" author="Sravani.S">
		<addNotNullConstraint tableName="RMTFinanceTypes_Temp" columnName="MaxFPPAmount"
			columnDataType="decimal(18,0)" />
	</changeSet>

	<changeSet id="ST#713.8.3" author="Sravani.S" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE RMTFINANCETYPES_TEMP ADD CONSTRAINT DF_FT_MAXFPPAMOUNT DEFAULT 0 FOR MAXFPPAMOUNT;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.8.3" author="Sravani.S" dbms="postgresql, oracle">
		<addDefaultValue tableName="RMTFinanceTypes_Temp" columnName="MaxFPPAmount" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#713.9" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes_Temp">
			<column name="MaxFPPPer" type="decimal(5,2)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#713.9.1" author="Sravani.S">
		<sql>
			<![CDATA[	
				UPDATE RMTFINANCETYPES_TEMP SET MAXFPPPER = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.9.2" author="Sravani.S">
		<addNotNullConstraint tableName="RMTFinanceTypes_Temp" columnName="MaxFPPPer"
			columnDataType="decimal(5,2)" />
	</changeSet>

	<changeSet id="ST#713.9.3" author="Sravani.S" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE RMTFINANCETYPES_TEMP ADD CONSTRAINT DF_FT_MAXFPPPER DEFAULT 0 FOR MAXFPPPER;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.9.3" author="Sravani.S" dbms="postgresql, oracle">
		<addDefaultValue tableName="RMTFinanceTypes_Temp" columnName="MaxFPPAmount" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#713.10" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes_Temp">
			<column name="MaxFPPCalOn" type="Varchar(50)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#713.11" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes_Temp">
			<column name="PPLockinPeriod" type="decimal(3, 0)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#713.12" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes_Temp">
			<column name="ESLockinPeriod" type="decimal(3, 0)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#713.13" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes_Temp">
			<column name="MinPPCalType" type="VARCHAR(8)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#713.14" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes_Temp">
			<column name="MinPPAmount" type="decimal(18,2)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#713.14.1" author="Sravani.S">
		<sql>
			<![CDATA[	
				UPDATE RMTFINANCETYPES_TEMP SET MINPPAMOUNT = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.14.2" author="Sravani.S">
		<addNotNullConstraint tableName="RMTFinanceTypes_Temp" columnName="MinPPAmount"
			columnDataType="decimal(18,2)" />
	</changeSet>

	<changeSet id="ST#713.14.3" author="Sravani.S" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE RMTFINANCETYPES_TEMP ADD CONSTRAINT DF_FT_MINPPAMOUNT DEFAULT 0 FOR MINPPAMOUNT;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.14.3" author="Sravani.S" dbms="postgresql, oracle">
		<addDefaultValue tableName="RMTFinanceTypes_Temp" columnName="MinPPAmount" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#713.15" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes_Temp">
			<column name="MinPPPercentage" type="decimal(5,2)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#713.15.1" author="Sravani.S">
		<sql>
			<![CDATA[	
				UPDATE RMTFINANCETYPES_TEMP SET MINPPPERCENTAGE = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.15.2" author="Sravani.S">
		<addNotNullConstraint tableName="RMTFinanceTypes_Temp" columnName="MinPPPercentage"
			columnDataType="decimal(5,2)" />
	</changeSet>

	<changeSet id="ST#713.15.3" author="Sravani.S" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE RMTFINANCETYPES_TEMP ADD CONSTRAINT DF_FT_MINPPPERCENTAGE DEFAULT 0 FOR MINPPPERCENTAGE;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.15.3" author="Sravani.S" dbms="postgresql, oracle">
		<addDefaultValue tableName="RMTFinanceTypes_Temp" columnName="MinPPPercentage" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#713.16" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes_Temp">
			<column name="MinPPCalOn" type="VARCHAR(8)" />
		</addColumn>
	</changeSet>
	<changeSet id="ST#713.17" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes_Temp">
			<column name="MaxPPCalType" type="VARCHAR(8)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#713.18" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes_Temp">
			<column name="MaxPPAmount" type="decimal(18,2)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#713.18.1" author="Sravani.S">
		<sql>
			<![CDATA[	
				UPDATE RMTFINANCETYPES_TEMP SET MAXPPAMOUNT = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.18.2" author="Sravani.S">
		<addNotNullConstraint tableName="RMTFinanceTypes_Temp" columnName="MaxPPAmount"
			columnDataType="decimal(18,2)" />
	</changeSet>

	<changeSet id="ST#713.18.3" author="Sravani.S" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE RMTFINANCETYPES_TEMP ADD CONSTRAINT DF_FT_MAXPPAMOUNT DEFAULT 0 FOR MAXPPAMOUNT;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.18.3" author="Sravani.S" dbms="postgresql, oracle">
		<addDefaultValue tableName="RMTFinanceTypes_Temp" columnName="MaxPPAmount" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#713.19" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes_Temp">
			<column name="MaxPPPercentage" type="decimal(5,2)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#713.19.1" author="Sravani.S">
		<sql>
			<![CDATA[	
				UPDATE RMTFINANCETYPES_TEMP SET MAXPPPERCENTAGE = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.19.2" author="Sravani.S">
		<addNotNullConstraint tableName="RMTFinanceTypes_Temp" columnName="MaxPPPercentage"
			columnDataType="decimal(5,2)" />
	</changeSet>

	<changeSet id="ST#713.19.3" author="Sravani.S" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE RMTFINANCETYPES_TEMP ADD CONSTRAINT DF_FT_MAXPPPERCENTAGE DEFAULT 0 FOR MAXPPPERCENTAGE;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.19.3" author="Sravani.S" dbms="postgresql, oracle">
		<addDefaultValue tableName="RMTFinanceTypes_Temp" columnName="MaxPPPercentage" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#713.20" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes_Temp">
			<column name="MaxPPCalOn" type="VARCHAR(8)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#713.21" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes">
			<column name="PPLockinPeriod" type="decimal(3, 0)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#713.22" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes">
			<column name="ESLockinPeriod" type="decimal(3, 0)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#713.23" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes">
			<column name="MinPPCalType" type="VARCHAR(8)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#713.24" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes">
			<column name="MinPPAmount" type="decimal(18,2)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#713.24.1" author="Sravani.S">
		<sql>
			<![CDATA[	
				UPDATE RMTFINANCETYPES SET MINPPAMOUNT = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.24.2" author="Sravani.S">
		<addNotNullConstraint tableName="RMTFinanceTypes" columnName="MinPPAmount"
			columnDataType="decimal(18,2)" />
	</changeSet>

	<changeSet id="ST#713.24.3" author="Sravani.S" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE RMTFINANCETYPES ADD CONSTRAINT DF_FT_MINPPAMOUNT DEFAULT 0 FOR MINPPAMOUNT;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.24.3" author="Sravani.S" dbms="postgresql, oracle">
		<addDefaultValue tableName="RMTFinanceTypes" columnName="MinPPAmount" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#713.25" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes">
			<column name="MinPPPercentage" type="decimal(5,2)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#713.25.1" author="Sravani.S">
		<sql>
			<![CDATA[	
				UPDATE RMTFINANCETYPES SET MINPPPERCENTAGE = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.25.2" author="Sravani.S">
		<addNotNullConstraint tableName="RMTFinanceTypes" columnName="MinPPPercentage"
			columnDataType="decimal(5,2)" />
	</changeSet>

	<changeSet id="ST#713.25.3" author="Sravani.S" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE RMTFINANCETYPES ADD CONSTRAINT DF_FT_MINPPPERCENTAGE DEFAULT 0 FOR MINPPPERCENTAGE;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.25.3" author="Sravani.S" dbms="postgresql, oracle">
		<addDefaultValue tableName="RMTFinanceTypes" columnName="MinPPPercentage" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#713.26" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes">
			<column name="MinPPCalOn" type="VARCHAR(8)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#713.27" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes">
			<column name="MaxPPCalType" type="VARCHAR(8)" />
		</addColumn>
	</changeSet>


	<changeSet id="ST#713.28" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes">
			<column name="MaxPPAmount" type="decimal(18,2)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#713.28.1" author="Sravani.S">
		<sql>
			<![CDATA[	
				UPDATE RMTFINANCETYPES SET MAXPPAMOUNT = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.28.2" author="Sravani.S">
		<addNotNullConstraint tableName="RMTFinanceTypes" columnName="MaxPPAmount"
			columnDataType="decimal(18,2)" />
	</changeSet>

	<changeSet id="ST#713.28.3" author="Sravani.S" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE RMTFINANCETYPES ADD CONSTRAINT DF_FT_MAXPPAMOUNT DEFAULT 0 FOR MAXPPAMOUNT;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.28.3" author="Sravani.S" dbms="postgresql, oracle">
		<addDefaultValue tableName="RMTFinanceTypes" columnName="MaxPPAmount" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#713.29" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes">
			<column name="MaxPPPercentage" type="decimal(5,2)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#713.29.1" author="Sravani.S">
		<sql>
			<![CDATA[	
				UPDATE RMTFINANCETYPES SET MAXPPPERCENTAGE = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.29.2" author="Sravani.S">
		<addNotNullConstraint tableName="RMTFinanceTypes" columnName="MaxPPPercentage"
			columnDataType="decimal(5,2)" />
	</changeSet>

	<changeSet id="ST#713.29.3" author="Sravani.S" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE RMTFINANCETYPES ADD CONSTRAINT DF_FT_MAXPPPERCENTAGE DEFAULT 0 FOR MAXPPPERCENTAGE;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.29.3" author="Sravani.S" dbms="postgresql, oracle">
		<addDefaultValue tableName="RMTFinanceTypes" columnName="MaxPPPercentage" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#713.30" author="Sravani.S">
		<addColumn tableName="RMTFinanceTypes">
			<column name="MaxPPCalOn" type="VARCHAR(8)" />
		</addColumn>
	</changeSet>

	<changeSet id="TK#2509.1" author="Anilkumar.G">
		<addColumn tableName="RMTFINANCETYPES">
			<column name="AllowAutoRefund" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="TK#2509.1.1" author="Anilkumar.G">
		<sql>
			<![CDATA[  
				UPDATE RMTFINANCETYPES SET ALLOWAUTOREFUND = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="TK#2509.1.2" author="Anilkumar.G" dbms="postgresql, oracle">
		<addDefaultValue columnName="AllowAutoRefund" tableName="RMTFINANCETYPES" defaultValue="0" />
	</changeSet>

	<changeSet id="TK#2509.1.2" author="Anilkumar.G" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE RMTFINANCETYPES ADD CONSTRAINT DF_FT_ALWAUTOREF DEFAULT 0 FOR ALLOWAUTOREFUND;
			]]>
		</sql>
	</changeSet>

	<changeSet id="TK#2509.2" author="Anilkumar.G">
		<addColumn tableName="RMTFINANCETYPES">
			<column name="MaxAutoRefund" type="Decimal(18,2)" />
		</addColumn>
	</changeSet>

	<changeSet id="TK#2509.2.1" author="Anilkumar.G">
		<sql>
			<![CDATA[  
				UPDATE RMTFINANCETYPES SET MAXAUTOREFUND = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="TK#2509.2.2" author="Anilkumar.G" dbms="postgresql, oracle">
		<addDefaultValue columnName="MaxAutoRefund" tableName="RMTFINANCETYPES" defaultValue="0" />
	</changeSet>

	<changeSet id="TK#2509.2.2" author="Anilkumar.G" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE RMTFINANCETYPES ADD CONSTRAINT DF_FT_MAXAUTOREF DEFAULT 0 FOR MAXAUTOREFUND;
			]]>
		</sql>
	</changeSet>

	<changeSet id="TK#2509.3" author="Anilkumar.G">
		<addColumn tableName="RMTFINANCETYPES">
			<column name="MinAutoRefund" type="Decimal(18,2)" />
		</addColumn>
	</changeSet>

	<changeSet id="TK#2509.3.1" author="Anilkumar.G">
		<sql>
			<![CDATA[  
				UPDATE RMTFINANCETYPES SET MINAUTOREFUND = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="TK#2509.3.2" author="Anilkumar.G" dbms="postgresql, oracle">
		<addDefaultValue columnName="minAutoRefund" tableName="RMTFINANCETYPES" defaultValue="0" />
	</changeSet>

	<changeSet id="TK#2509.3.3" author="Anilkumar.G" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE RMTFINANCETYPES ADD CONSTRAINT DF_FT_MINAUTOREF DEFAULT 0 FOR MINAUTOREFUND;
			]]>
		</sql>
	</changeSet>

	<changeSet id="TK#2509.4" author="Anilkumar.G">
		<addColumn tableName="RMTFINANCETYPES_TEMP">
			<column name="AllowAutoRefund" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="TK#2509.4.1" author="Anilkumar.G">
		<sql>
			<![CDATA[  
				UPDATE RMTFINANCETYPES_TEMP SET ALLOWAUTOREFUND = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="TK#2509.4.2" author="Anilkumar.G" dbms="postgresql, oracle">
		<addDefaultValue columnName="AllowAutoRefund" tableName="RMTFINANCETYPES_TEMP" defaultValue="0" />
	</changeSet>

	<changeSet id="TK#2509.4.2" author="Anilkumar.G" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE RMTFINANCETYPES_TEMP ADD CONSTRAINT DF_FT_T_ALWAUTOREF DEFAULT 0 FOR ALLOWAUTOREFUND;
			]]>
		</sql>
	</changeSet>

	<changeSet id="TK#2509.5" author="Anilkumar.G">
		<addColumn tableName="RMTFINANCETYPES_TEMP">
			<column name="MaxAutoRefund" type="Decimal(18,2)" />
		</addColumn>
	</changeSet>

	<changeSet id="TK#2509.5.1" author="Anilkumar.G">
		<sql>
			<![CDATA[  
				UPDATE RMTFINANCETYPES_TEMP SET MAXAUTOREFUND = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="TK#2509.5.2" author="Anilkumar.G" dbms="postgresql, oracle">
		<addDefaultValue columnName="MaxAutoRefund" tableName="RMTFINANCETYPES_TEMP" defaultValue="0" />
	</changeSet>

	<changeSet id="TK#2509.5.2" author="Anilkumar.G" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE RMTFINANCETYPES_TEMP ADD CONSTRAINT DF_FT_T_MAXAUTOREF DEFAULT 0 FOR MAXAUTOREFUND;
			]]>
		</sql>
	</changeSet>

	<changeSet id="TK#2509.6" author="Anilkumar.G">
		<addColumn tableName="RMTFINANCETYPES_TEMP">
			<column name="MinAutoRefund" type="Decimal(18,2)" />
		</addColumn>
	</changeSet>

	<changeSet id="TK#2509.6.1" author="Anilkumar.G">
		<sql>
			<![CDATA[  
				UPDATE RMTFINANCETYPES_TEMP SET MINAUTOREFUND = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="TK#2509.6.2" author="Anilkumar.G" dbms="postgresql, oracle">
		<addDefaultValue columnName="minAutoRefund" tableName="RMTFINANCETYPES_TEMP" defaultValue="0" />
	</changeSet>

	<changeSet id="TK#2509.6.3" author="Anilkumar.G" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE RMTFINANCETYPES_TEMP ADD CONSTRAINT DF_FT_T_MINAUTOREF DEFAULT 0 FOR MINAUTOREFUND;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.35_pre" author="Sravani.S" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_aview'); 
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.35" author="Sravani.S">
		<createView viewName="RMTFINANCETYPES_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINTYPE,
				    T1.FINCATEGORY,
				    T1.FINTYPEDESC,
				    T1.FINCCY,
				    T1.FINDAYSCALTYPE,
				    T1.FINISGENREF,
				    T1.FINMAXAMOUNT,
				    T1.FINMINAMOUNT,
				    T1.FINDFTSTMTFRQ,
				    T1.FINISALWMD,
				    T1.FINSCHDMTHD,
				    T1.FINISALWGRACE,
				    T1.FINHISTRETENSION,
				    T1.EQUALREPAYMENT,
				    T1.FINRATETYPE,
				    T1.FINBASERATE,
				    T1.FINSPLRATE,
				    T1.FININTRATE,
				    T1.FINMINRATE,
				    T1.FINMAXRATE,
				    T1.FINDFTINTFRQ,
				    T1.FINISINTCPZ,
				    T1.FINCPZFRQ,
				    T1.FINISRVWALW,
				    T1.FINRVWFRQ,
				    T1.FINGRCRATETYPE,
				    T1.FINGRCBASERATE,
				    T1.FINGRCSPLRATE,
				    T1.FINGRCINTRATE,
				    T1.FINGRCMINRATE,
				    T1.FINGRCMAXRATE,
				    T1.FINGRCDFTINTFRQ,
				    T1.FINGRCISINTCPZ,
				    T1.FINGRCCPZFRQ,
				    T1.FINGRCISRVWALW,
				    T1.FINGRCRVWFRQ,
				    T1.FINMINTERM,
				    T1.FINMAXTERM,
				    T1.FINDFTTERMS,
				    T1.FINRPYFRQ,
				    T1.FINREPAYMETHOD,
				    T1.FINISALWPARTIALRPY,
				    T1.FINISALWDIFFERMENT,
				    T1.FINMAXDIFFERMENT,
				    T1.FINISALWEARLYRPY,
				    T1.FINISALWEARLYSETTLE,
				    T1.FINODRPYTRIES,
				    T1.FINEARLYPAYRULE,
				    T1.FINEARLYSETTLERULE,
				    T1.FINISACTIVE,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T1.STEPFINANCE,
				    T1.STEPPINGMANDATORY,
				    T1.ALWMANUALSTEPS,
				    T1.ALWDSTEPPOLICIES,
				    T1.DFTSTEPPOLICY,
				    T1.FINISDWPAYREQUIRED,
				    T1.FINRVWRATEAPPLFOR,
				    T1.FINALWRATECHANGEANYDATE,
				    T1.FINISINTCPZATGRCEND,
				    T1.FINELGRULECODE,
				    T1.LIMITELGRULECODE,
				    T1.FINSCHCALCODEONRVW,
				    T1.ALWPLANDEFERMENT,
				    T1.PLANDEFERCOUNT,
				    T1.FINASSETTYPE,
				    T1.FINISALWGRCREPAY,
				    T1.FINGRCSCHDMTHD,
				    T1.FINGRCMARGIN,
				    T1.FINMARGIN,
				    T1.FINSCHEDULEON,
				    T1.FINGRCSCHEDULEON,
				    T1.FINCOMMITMENTREQ,
				    T1.FINCOLLATERALREQ,
				    T1.OVERRIDELIMIT,
				    T1.LIMITREQUIRED,
				    T1.FINCOMMITMENTOVRRIDE,
				    T1.FINCOLLATERALOVRRIDE,
				    T1.FINPFTUNCHANGED,
				    T1.APPLYODPENALTY,
				    T1.ODINCGRCDAYS,
				    T1.ODCHARGETYPE,
				    T1.ODGRACEDAYS,
				    T1.ODCHARGECALON,
				    T1.ODCHARGEAMTORPERC,
				    T1.ODALLOWWAIVER,
				    T1.ODMAXWAIVERPERC,
				    T1.FINDIVISION,
				    T48.DIVISIONCODEDESC LOVDESCFINDIVISIONNAME,
				    T48.ENTITYCODE LOVDESCENTITYCODE,
				    T1.PRODUCT,
				    T1.STARTDATE,
				    T1.ENDDATE,
				    T1.REMARKS,
				    T1.ALWEARLYPAYMETHODS,
				    T1.PASTDUEPFTCALMTHD,
				    T1.PASTDUEPFTMARGIN,
				    T1.DOWNPAYRULE,
				    T59.RULECODE DOWNPAYRULECODE,
				    T59.RULECODEDESC DOWNPAYRULEDESC,
				    T1.FINSUSPTRIGGER,
				    T1.FINSUSPREMARKS,
				    T1.ALWMULTIPARTYDISB,
				    T1.COLLATERALTYPE,
				    T1.TDSAPPLICABLE,
				    T1.MANUALSCHEDULE,
				    T1.APPLYGRCPRICING,
				    T1.GRCPRICINGMETHOD,
				    T1.APPLYRPYPRICING,
				    T1.RPYPRICINGMETHOD,
				    T1.RPYHIERARCHY,
				    T67.RULECODE GRCPRICINGMETHODDESC,
				    T68.RULECODE RPYPRICINGMETHODDESC,
				    T1.DROPLINEOD,
				    T1.DROPPINGMETHOD,
				    T1.RATECHGANYDAY,
				    T1.FINREPAYPFTONFRQ,
				    T1.ALWBPI,
				    T1.BPITREATMENT,
				    T1.PFTDUESCHON,
				    T1.PLANEMIHALW,
				    T1.PLANEMIHMETHOD,
				    T1.PLANEMIHMAXPERYEAR,
				    T1.PLANEMIHMAX,
				    T1.PLANEMIHLOCKPERIOD,
				    T1.PLANEMICPZ,
				    T1.UNPLANEMIHLOCKPERIOD,
				    T1.UNPLANEMICPZ,
				    T1.REAGECPZ,
				    T1.FDDLOCKPERIOD,
				    T1.ALWDRPYMETHODS,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.ROUNDINGMODE,
				    T1.ROUNDINGTARGET,
				    T1.FREQUENCYDAYS,
				    T1.QUICKDISB,
				    T1.ALWREAGE,
				    T1.ALWUNPLANEMIHOLIDAY,
				    T1.ALWMAXDISBCHECKREQ,
				    T1.FINTYPEDESC LOVDESCPROMOFINTYPEDESC,
				    T1.PROFITCENTERID,
				    T69.PROFITCENTERCODE,
				    T69.PROFITCENTERDESC,
				    T1.PRODUCTCATEGORY,
				    T2.PRODUCTDESC FINCATEGORYDESC,
				    T1.DEVELOPERFINANCE,
				    T1.COSTOFFUNDS,
				    T1.CHEQUECAPTUREREQ,
				    T1.FINLTVCHECK,
				    T1.PARTIALLYSECURED,
				    T1.ALWADVEMI,
				    T1.ADVEMIMINTERMS,
				    T1.ADVEMIMAXTERMS,
				    T1.ADVEMIDFTTERMS,
				    T1.ADVEMISCHDMTHD,
				    T1.BPIPFTDAYSBASIS,
				    T1.ELIGIBILITYMETHODS,
				    T1.ALWHYBRIDRATE,
				    T1.FIXEDRATETENOR,
				    T1.ODMINCAPAMOUNT,
				    T1.ODRULECODE,
				    T1.ALWZEROINTACC,
				    T1.AUTOREJECTIONDAYS,
				    T1.TAXNOMAND,
				    T1.PUTCALLREQUIRED,
				    T1.GRCADVINTERSETREQ,
				    T1.GRCADVTYPE,
				    T1.GRCADVMINTERMS,
				    T1.GRCADVMAXTERMS,
				    T1.GRCADVDEFAULTTERMS,
				    T1.ADVINTERSETREQ,
				    T1.ADVTYPE,
				    T1.ADVMINTERMS,
				    T1.ADVMAXTERMS,
				    T1.ADVDEFAULTTERMS,
				    T1.ADVSTAGE,
				    T1.DSFREQ,
				    T1.CASHCOLLATERALREQ,
				    T1.TDSALLOWTOMODIFY,
				    T1.TDSAPPLICABLETO,
				    T1.ALWVAN,
				    T1.VANALLOCATIONMETHOD,
				    T1.ALLOWDRAWINGPOWER,
				    T1.ALLOWREVOLVING,
				    T1.ALWSANCTIONAMT,
				    T1.ALWSANCTIONAMTOVERRIDE,
				    T1.SANBSDSCHDLE,
				    T1.FINISRATERVWATGRCEND,
				    T1.SCHDONPMTCAL,
				    T1.AUTOAPPROVE,
				    T1.ALWPLANNEDEMIINGRC,
				    T1.OCRREQUIRED,
				    T1.ALLOWEDOCRS,
				    T1.DEFAULTOCR,
				    T1.ALLOWEDLOANPURPOSES,
				    T1.SPECIFICLOANPURPOSES,
				    T1.GRCADJREQ,
				    T1.GRCPERIODAFTRFULLDISB,
				    T1.AUTOINCRGRCENDDATE,
				    T1.GRCAUTOINCRMONTHS,
				    T1.MAXAUTOINCRALLOWED,
				    T1.THRLDTOMAINTAINGRCPRD,
				    T1.ALWLOANSPLIT,
				    T1.SPLITLOANTYPE,
				    T1.INSTBASEDSCHD,
				    T1.TDSTYPE,
				    T1.CALCOFSTEPS,
				    T1.STEPSAPPLIEDFOR,
				    T1.SUBVENTIONREQ,
					T1.OVERDRAFTTXNCHRGREQ,
					T1.OVERDRAFTTXNCHRGFEETYPE,
					T1.OVERDRAFTEXTGRACEDAYS,
					T1.OVERDRAFTCOLCHRGFEETYPE,
					T1.OVERDRAFTCOLAMT,
					T1.REGPROVRULE,
					T1.INTPROVRULE,
					T1.CLOSURETHRESHOLDLIMIT,
					T1.MAXFPPCALTYPE,
					T1.MAXFPPAMOUNT,
					T1.MAXFPPPER,
					T1.MAXFPPCALON,
					T1.PPLOCKINPERIOD,
					T1.ESLOCKINPERIOD,
					T1.MINPPCALTYPE,
					T1.MINPPAMOUNT,
					T1.MINPPPERCENTAGE,
					T1.MINPPCALON,
					T1.MAXPPCALTYPE,
					T1.MAXPPAMOUNT,
					T1.MAXPPPERCENTAGE,
					T1.MAXPPCALON,
					T1.ALLOWAUTOREFUND, 
					T1.MAXAUTOREFUND, 
					T1.MINAUTOREFUND
				FROM RMTFINANCETYPES T1
			    LEFT JOIN BMTPRODUCT T2 ON T1.FINCATEGORY = T2.PRODUCTCODE
			    LEFT JOIN SMTDIVISIONDETAIL T48 ON T1.FINDIVISION = T48.DIVISIONCODE
			    LEFT JOIN RULES T59 ON T1.DOWNPAYRULE = T59.RULEID
			    LEFT JOIN RULES T67 ON T1.GRCPRICINGMETHOD = T67.RULEID
			    LEFT JOIN RULES T68 ON T1.RPYPRICINGMETHOD = T68.RULEID
			    LEFT JOIN PROFITCENTERS T69 ON T69.PROFITCENTERID = T1.PROFITCENTERID
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#713.35_post" author="Sravani.S" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rmtfinancetypes_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.36_pre" author="Sravani.S" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_view'); 
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.36" author="Sravani.S">
		<createView viewName="RMTFINANCETYPES_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINTYPE,
				    T1.FINCATEGORY,
				    T1.FINTYPEDESC,
				    T1.FINCCY,
				    T1.FINDAYSCALTYPE,
				    T1.FINISGENREF,
				    T1.FINMAXAMOUNT,
				    T1.FINMINAMOUNT,
				    T1.FINDFTSTMTFRQ,
				    T1.FINISALWMD,
				    T1.FINSCHDMTHD,
				    T1.FINISALWGRACE,
				    T1.FINHISTRETENSION,
				    T1.EQUALREPAYMENT,
				    T1.FINRATETYPE,
				    T1.FINBASERATE,
				    T1.FINSPLRATE,
				    T1.FININTRATE,
				    T1.FINMINRATE,
				    T1.FINMAXRATE,
				    T1.FINDFTINTFRQ,
				    T1.FINISINTCPZ,
				    T1.FINCPZFRQ,
				    T1.FINISRVWALW,
				    T1.FINRVWFRQ,
				    T1.FINGRCRATETYPE,
				    T1.FINGRCBASERATE,
				    T1.FINGRCSPLRATE,
				    T1.FINGRCINTRATE,
				    T1.FINGRCMINRATE,
				    T1.FINGRCMAXRATE,
				    T1.FINGRCDFTINTFRQ,
				    T1.FINGRCISINTCPZ,
				    T1.FINGRCCPZFRQ,
				    T1.FINGRCISRVWALW,
				    T1.FINGRCRVWFRQ,
				    T1.FINMINTERM,
				    T1.FINMAXTERM,
				    T1.FINDFTTERMS,
				    T1.FINRPYFRQ,
				    T1.FINREPAYMETHOD,
				    T1.FINISALWPARTIALRPY,
				    T1.FINISALWDIFFERMENT,
				    T1.FINMAXDIFFERMENT,
				    T1.FINISALWEARLYRPY,
				    T1.FINISALWEARLYSETTLE,
				    T1.FINODRPYTRIES,
				    T1.FINEARLYPAYRULE,
				    T1.FINEARLYSETTLERULE,
				    T1.FINISACTIVE,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T1.STEPFINANCE,
				    T1.STEPPINGMANDATORY,
				    T1.ALWMANUALSTEPS,
				    T1.ALWDSTEPPOLICIES,
				    T1.DFTSTEPPOLICY,
				    T1.FINISDWPAYREQUIRED,
				    T1.FINRVWRATEAPPLFOR,
				    T1.FINALWRATECHANGEANYDATE,
				    T1.FINISINTCPZATGRCEND,
				    T1.FINELGRULECODE,
				    T1.LIMITELGRULECODE,
				    T1.FINSCHCALCODEONRVW,
				    T1.ALWPLANDEFERMENT,
				    T1.PLANDEFERCOUNT,
				    T1.FINASSETTYPE,
				    T1.FINISALWGRCREPAY,
				    T1.FINGRCSCHDMTHD,
				    T1.FINGRCMARGIN,
				    T1.FINMARGIN,
				    T1.FINSCHEDULEON,
				    T1.FINGRCSCHEDULEON,
				    T1.FINCOMMITMENTREQ,
				    T1.FINCOLLATERALREQ,
				    T1.OVERRIDELIMIT,
				    T1.LIMITREQUIRED,
				    T1.FINCOMMITMENTOVRRIDE,
				    T1.FINCOLLATERALOVRRIDE,
				    T1.FINPFTUNCHANGED,
				    T1.APPLYODPENALTY,
				    T1.ODINCGRCDAYS,
				    T1.ODCHARGETYPE,
				    T1.ODGRACEDAYS,
				    T1.ODCHARGECALON,
				    T1.ODCHARGEAMTORPERC,
				    T1.ODALLOWWAIVER,
				    T1.ODMAXWAIVERPERC,
				    T1.FINDIVISION,
				    T48.DIVISIONCODEDESC LOVDESCFINDIVISIONNAME,
				    T48.ENTITYCODE LOVDESCENTITYCODE,
				    T1.PRODUCT,
				    T1.STARTDATE,
				    T1.ENDDATE,
				    T1.FINTYPEDESC LOVDESCPROMOFINTYPEDESC,
				    T1.REMARKS,
				    T1.ALWEARLYPAYMETHODS,
				    T1.PASTDUEPFTCALMTHD,
				    T1.PASTDUEPFTMARGIN,
				    T1.DOWNPAYRULE,
				    T59.RULECODE DOWNPAYRULECODE,
				    T59.RULECODEDESC DOWNPAYRULEDESC,
				    T1.FINSUSPTRIGGER,
				    T1.FINSUSPREMARKS,
				    T1.ALWMULTIPARTYDISB,
				    T1.COLLATERALTYPE,
				    T1.TDSAPPLICABLE,
				    T1.MANUALSCHEDULE,
				    T1.APPLYGRCPRICING,
				    T1.GRCPRICINGMETHOD,
				    T1.APPLYRPYPRICING,
				    T1.RPYPRICINGMETHOD,
				    T1.RPYHIERARCHY,
				    T67.RULECODE GRCPRICINGMETHODDESC,
				    T68.RULECODE RPYPRICINGMETHODDESC,
				    T1.DROPLINEOD,
				    T1.DROPPINGMETHOD,
				    T1.RATECHGANYDAY,
				    T1.FINREPAYPFTONFRQ,
				    T1.ALWBPI,
				    T1.BPITREATMENT,
				    T1.PFTDUESCHON,
				    T1.PLANEMIHALW,
				    T1.PLANEMIHMETHOD,
				    T1.PLANEMIHMAXPERYEAR,
				    T1.PLANEMIHMAX,
				    T1.PLANEMIHLOCKPERIOD,
				    T1.PLANEMICPZ,
				    T1.UNPLANEMIHLOCKPERIOD,
				    T1.UNPLANEMICPZ,
				    T1.REAGECPZ,
				    T1.FDDLOCKPERIOD,
				    T1.ALWDRPYMETHODS,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.ROUNDINGMODE,
				    T1.ROUNDINGTARGET,
				    T1.FREQUENCYDAYS,
				    T1.QUICKDISB,
				    T1.ALWMAXDISBCHECKREQ,
				    T1.ALWREAGE,
				    T1.ALWUNPLANEMIHOLIDAY,
				    T1.PROFITCENTERID,
				    T69.PROFITCENTERCODE,
				    T69.PROFITCENTERDESC,
				    T1.PRODUCTCATEGORY,
				    T2.PRODUCTDESC FINCATEGORYDESC,
				    T1.DEVELOPERFINANCE,
				    T1.COSTOFFUNDS,
				    T1.CHEQUECAPTUREREQ,
				    T1.FINLTVCHECK,
				    T1.PARTIALLYSECURED,
				    T1.ALWADVEMI,
				    T1.ADVEMIMINTERMS,
				    T1.ADVEMIMAXTERMS,
				    T1.ADVEMIDFTTERMS,
				    T1.ADVEMISCHDMTHD,
				    T1.BPIPFTDAYSBASIS,
				    T1.ELIGIBILITYMETHODS,
				    T1.ALWHYBRIDRATE,
				    T1.FIXEDRATETENOR,
				    T1.ODMINCAPAMOUNT,
				    T1.ODRULECODE,
				    T1.ALWZEROINTACC,
				    T1.AUTOREJECTIONDAYS,
				    T1.TAXNOMAND,
				    T1.PUTCALLREQUIRED,
				    T1.GRCADVINTERSETREQ,
				    T1.GRCADVTYPE,
				    T1.GRCADVMINTERMS,
				    T1.GRCADVMAXTERMS,
				    T1.GRCADVDEFAULTTERMS,
				    T1.ADVINTERSETREQ,
				    T1.ADVTYPE,
				    T1.ADVMINTERMS,
				    T1.ADVMAXTERMS,
				    T1.ADVDEFAULTTERMS,
				    T1.ADVSTAGE,
				    T1.DSFREQ,
				    T1.CASHCOLLATERALREQ,
				    T1.TDSALLOWTOMODIFY,
				    T1.TDSAPPLICABLETO,
				    T1.ALWVAN,
				    T1.VANALLOCATIONMETHOD,
				    T1.ALLOWDRAWINGPOWER,
				    T1.ALLOWREVOLVING,
				    T1.ALWSANCTIONAMT,
				    T1.ALWSANCTIONAMTOVERRIDE,
				    T1.SANBSDSCHDLE,
				    T1.FINISRATERVWATGRCEND,
				    T1.SCHDONPMTCAL,
				    T1.AUTOAPPROVE,
				    T1.OCRREQUIRED,
				    T1.ALLOWEDOCRS,
				    T1.DEFAULTOCR,
				    T1.ALLOWEDLOANPURPOSES,
				    T1.SPECIFICLOANPURPOSES,
				    T1.ALWPLANNEDEMIINGRC,
				    T1.GRCADJREQ,
				    T1.GRCPERIODAFTRFULLDISB,
				    T1.AUTOINCRGRCENDDATE,
				    T1.GRCAUTOINCRMONTHS,
				    T1.MAXAUTOINCRALLOWED,
				    T1.THRLDTOMAINTAINGRCPRD,
				    T1.ALWLOANSPLIT,
				    T1.SPLITLOANTYPE,
				    T1.INSTBASEDSCHD,
				    T1.TDSTYPE,
				    T1.CALCOFSTEPS,
				    T1.STEPSAPPLIEDFOR,
				    T1.SUBVENTIONREQ,
					T1.OVERDRAFTTXNCHRGREQ,
					T1.OVERDRAFTTXNCHRGFEETYPE,
					T1.OVERDRAFTEXTGRACEDAYS,
					T1.OVERDRAFTCOLCHRGFEETYPE,
					T1.OVERDRAFTCOLAMT,
					T1.REGPROVRULE,
					T1.INTPROVRULE,
					T1.CLOSURETHRESHOLDLIMIT,
					T1.MAXFPPCALTYPE,
					T1.MAXFPPAMOUNT,
					T1.MAXFPPPER,
					T1.MAXFPPCALON,
					T1.PPLOCKINPERIOD,
					T1.ESLOCKINPERIOD,
					T1.MINPPCALTYPE,
					T1.MINPPAMOUNT,
					T1.MINPPPERCENTAGE,
					T1.MINPPCALON,
					T1.MAXPPCALTYPE,
					T1.MAXPPAMOUNT,
					T1.MAXPPPERCENTAGE,
					T1.MAXPPCALON,
					T1.ALLOWAUTOREFUND, 
					T1.MAXAUTOREFUND, 
					T1.MINAUTOREFUND
				FROM RMTFINANCETYPES_TEMP T1
				LEFT JOIN BMTPRODUCT T2 ON T1.FINCATEGORY = T2.PRODUCTCODE
				LEFT JOIN SMTDIVISIONDETAIL T48 ON T1.FINDIVISION = T48.DIVISIONCODE
				LEFT JOIN RULES T59 ON T1.DOWNPAYRULE = T59.RULEID
				LEFT JOIN RULES T67 ON T1.GRCPRICINGMETHOD = T67.RULEID
				LEFT JOIN RULES T68 ON T1.RPYPRICINGMETHOD = T68.RULEID
				LEFT JOIN PROFITCENTERS T69 ON T69.PROFITCENTERID = T1.PROFITCENTERID
				UNION ALL
				SELECT T1.FINTYPE,
				    T1.FINCATEGORY,
				    T1.FINTYPEDESC,
				    T1.FINCCY,
				    T1.FINDAYSCALTYPE,
				    T1.FINISGENREF,
				    T1.FINMAXAMOUNT,
				    T1.FINMINAMOUNT,
				    T1.FINDFTSTMTFRQ,
				    T1.FINISALWMD,
				    T1.FINSCHDMTHD,
				    T1.FINISALWGRACE,
				    T1.FINHISTRETENSION,
				    T1.EQUALREPAYMENT,
				    T1.FINRATETYPE,
				    T1.FINBASERATE,
				    T1.FINSPLRATE,
				    T1.FININTRATE,
				    T1.FINMINRATE,
				    T1.FINMAXRATE,
				    T1.FINDFTINTFRQ,
				    T1.FINISINTCPZ,
				    T1.FINCPZFRQ,
				    T1.FINISRVWALW,
				    T1.FINRVWFRQ,
				    T1.FINGRCRATETYPE,
				    T1.FINGRCBASERATE,
				    T1.FINGRCSPLRATE,
				    T1.FINGRCINTRATE,
				    T1.FINGRCMINRATE,
				    T1.FINGRCMAXRATE,
				    T1.FINGRCDFTINTFRQ,
				    T1.FINGRCISINTCPZ,
				    T1.FINGRCCPZFRQ,
				    T1.FINGRCISRVWALW,
				    T1.FINGRCRVWFRQ,
				    T1.FINMINTERM,
				    T1.FINMAXTERM,
				    T1.FINDFTTERMS,
				    T1.FINRPYFRQ,
				    T1.FINREPAYMETHOD,
				    T1.FINISALWPARTIALRPY,
				    T1.FINISALWDIFFERMENT,
				    T1.FINMAXDIFFERMENT,
				    T1.FINISALWEARLYRPY,
				    T1.FINISALWEARLYSETTLE,
				    T1.FINODRPYTRIES,
				    T1.FINEARLYPAYRULE,
				    T1.FINEARLYSETTLERULE,
				    T1.FINISACTIVE,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T1.STEPFINANCE,
				    T1.STEPPINGMANDATORY,
				    T1.ALWMANUALSTEPS,
				    T1.ALWDSTEPPOLICIES,
				    T1.DFTSTEPPOLICY,
				    T1.FINISDWPAYREQUIRED,
				    T1.FINRVWRATEAPPLFOR,
				    T1.FINALWRATECHANGEANYDATE,
				    T1.FINISINTCPZATGRCEND,
				    T1.FINELGRULECODE,
				    T1.LIMITELGRULECODE,
				    T1.FINSCHCALCODEONRVW,
				    T1.ALWPLANDEFERMENT,
				    T1.PLANDEFERCOUNT,
				    T1.FINASSETTYPE,
				    T1.FINISALWGRCREPAY,
				    T1.FINGRCSCHDMTHD,
				    T1.FINGRCMARGIN,
				    T1.FINMARGIN,
				    T1.FINSCHEDULEON,
				    T1.FINGRCSCHEDULEON,
				    T1.FINCOMMITMENTREQ,
				    T1.FINCOLLATERALREQ,
				    T1.OVERRIDELIMIT,
				    T1.LIMITREQUIRED,
				    T1.FINCOMMITMENTOVRRIDE,
				    T1.FINCOLLATERALOVRRIDE,
				    T1.FINPFTUNCHANGED,
				    T1.APPLYODPENALTY,
				    T1.ODINCGRCDAYS,
				    T1.ODCHARGETYPE,
				    T1.ODGRACEDAYS,
				    T1.ODCHARGECALON,
				    T1.ODCHARGEAMTORPERC,
				    T1.ODALLOWWAIVER,
				    T1.ODMAXWAIVERPERC,
				    T1.FINDIVISION,
				    T48.DIVISIONCODEDESC LOVDESCFINDIVISIONNAME,
				    T48.ENTITYCODE LOVDESCENTITYCODE,
				    T1.PRODUCT,
				    T1.STARTDATE,
				    T1.ENDDATE,
				    T1.FINTYPEDESC LOVDESCPROMOFINTYPEDESC,
				    T1.REMARKS,
				    T1.ALWEARLYPAYMETHODS,
				    T1.PASTDUEPFTCALMTHD,
				    T1.PASTDUEPFTMARGIN,
				    T1.DOWNPAYRULE,
				    T59.RULECODE DOWNPAYRULECODE,
				    T59.RULECODEDESC DOWNPAYRULEDESC,
				    T1.FINSUSPTRIGGER,
				    T1.FINSUSPREMARKS,
				    T1.ALWMULTIPARTYDISB,
				    T1.COLLATERALTYPE,
				    T1.TDSAPPLICABLE,
				    T1.MANUALSCHEDULE,
				    T1.APPLYGRCPRICING,
				    T1.GRCPRICINGMETHOD,
				    T1.APPLYRPYPRICING,
				    T1.RPYPRICINGMETHOD,
				    T1.RPYHIERARCHY,
				    T67.RULECODE GRCPRICINGMETHODDESC,
				    T68.RULECODE RPYPRICINGMETHODDESC,
				    T1.DROPLINEOD,
				    T1.DROPPINGMETHOD,
				    T1.RATECHGANYDAY,
				    T1.FINREPAYPFTONFRQ,
				    T1.ALWBPI,
				    T1.BPITREATMENT,
				    T1.PFTDUESCHON,
				    T1.PLANEMIHALW,
				    T1.PLANEMIHMETHOD,
				    T1.PLANEMIHMAXPERYEAR,
				    T1.PLANEMIHMAX,
				    T1.PLANEMIHLOCKPERIOD,
				    T1.PLANEMICPZ,
				    T1.UNPLANEMIHLOCKPERIOD,
				    T1.UNPLANEMICPZ,
				    T1.REAGECPZ,
				    T1.FDDLOCKPERIOD,
				    T1.ALWDRPYMETHODS,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.ROUNDINGMODE,
				    T1.ROUNDINGTARGET,
				    T1.FREQUENCYDAYS,
				    T1.QUICKDISB,
				    T1.ALWMAXDISBCHECKREQ,
				    T1.ALWREAGE,
				    T1.ALWUNPLANEMIHOLIDAY,
				    T1.PROFITCENTERID,
				    T69.PROFITCENTERCODE,
				    T69.PROFITCENTERDESC,
				    T1.PRODUCTCATEGORY,
				    T2.PRODUCTDESC FINCATEGORYDESC,
				    T1.DEVELOPERFINANCE,
				    T1.COSTOFFUNDS,
				    T1.CHEQUECAPTUREREQ,
				    T1.FINLTVCHECK,
				    T1.PARTIALLYSECURED,
				    T1.ALWADVEMI,
				    T1.ADVEMIMINTERMS,
				    T1.ADVEMIMAXTERMS,
				    T1.ADVEMIDFTTERMS,
				    T1.ADVEMISCHDMTHD,
				    T1.BPIPFTDAYSBASIS,
				    T1.ELIGIBILITYMETHODS,
				    T1.ALWHYBRIDRATE,
				    T1.FIXEDRATETENOR,
				    T1.ODMINCAPAMOUNT,
				    T1.ODRULECODE,
				    T1.ALWZEROINTACC,
				    T1.AUTOREJECTIONDAYS,
				    T1.TAXNOMAND,
				    T1.PUTCALLREQUIRED,
				    T1.GRCADVINTERSETREQ,
				    T1.GRCADVTYPE,
				    T1.GRCADVMINTERMS,
				    T1.GRCADVMAXTERMS,
				    T1.GRCADVDEFAULTTERMS,
				    T1.ADVINTERSETREQ,
				    T1.ADVTYPE,
				    T1.ADVMINTERMS,
				    T1.ADVMAXTERMS,
				    T1.ADVDEFAULTTERMS,
				    T1.ADVSTAGE,
				    T1.DSFREQ,
				    T1.CASHCOLLATERALREQ,
				    T1.TDSALLOWTOMODIFY,
				    T1.TDSAPPLICABLETO,
				    T1.ALWVAN,
				    T1.VANALLOCATIONMETHOD,
				    T1.ALLOWDRAWINGPOWER,
				    T1.ALLOWREVOLVING,
				    T1.ALWSANCTIONAMT,
				    T1.ALWSANCTIONAMTOVERRIDE,
				    T1.SANBSDSCHDLE,
				    T1.FINISRATERVWATGRCEND,
				    T1.SCHDONPMTCAL,
				    T1.AUTOAPPROVE,
				    T1.OCRREQUIRED,
				    T1.ALLOWEDOCRS,
				    T1.DEFAULTOCR,
				    T1.ALLOWEDLOANPURPOSES,
				    T1.SPECIFICLOANPURPOSES,
				    T1.ALWPLANNEDEMIINGRC,
				    T1.GRCADJREQ,
				    T1.GRCPERIODAFTRFULLDISB,
				    T1.AUTOINCRGRCENDDATE,
				    T1.GRCAUTOINCRMONTHS,
				    T1.MAXAUTOINCRALLOWED,
				    T1.THRLDTOMAINTAINGRCPRD,
				    T1.ALWLOANSPLIT,
				    T1.SPLITLOANTYPE,
				    T1.INSTBASEDSCHD,
				    T1.TDSTYPE,
				    T1.CALCOFSTEPS,
				    T1.STEPSAPPLIEDFOR,
				    T1.SUBVENTIONREQ,
					T1.OVERDRAFTTXNCHRGREQ,
					T1.OVERDRAFTTXNCHRGFEETYPE,
					T1.OVERDRAFTEXTGRACEDAYS,
					T1.OVERDRAFTCOLCHRGFEETYPE,
					T1.OVERDRAFTCOLAMT,
					T1.REGPROVRULE,
					T1.INTPROVRULE,
					T1.CLOSURETHRESHOLDLIMIT,
					T1.MAXFPPCALTYPE,
					T1.MAXFPPAMOUNT,
					T1.MAXFPPPER,
					T1.MAXFPPCALON,
					T1.PPLOCKINPERIOD,
					T1.ESLOCKINPERIOD,
					T1.MINPPCALTYPE,
					T1.MINPPAMOUNT,
					T1.MINPPPERCENTAGE,
					T1.MINPPCALON,
					T1.MAXPPCALTYPE,
					T1.MAXPPAMOUNT,
					T1.MAXPPPERCENTAGE,
					T1.MAXPPCALON,
					T1.ALLOWAUTOREFUND, 
					T1.MAXAUTOREFUND, 
					T1.MINAUTOREFUND
				FROM RMTFINANCETYPES T1
				LEFT JOIN BMTPRODUCT T2 ON T1.FINCATEGORY = T2.PRODUCTCODE
				LEFT JOIN SMTDIVISIONDETAIL T48 ON T1.FINDIVISION = T48.DIVISIONCODE
				LEFT JOIN RULES T59 ON T1.DOWNPAYRULE = T59.RULEID
				LEFT JOIN RULES T67 ON T1.GRCPRICINGMETHOD = T67.RULEID
				LEFT JOIN RULES T68 ON T1.RPYPRICINGMETHOD = T68.RULEID
				LEFT JOIN PROFITCENTERS T69 ON T69.PROFITCENTERID = T1.PROFITCENTERID
				WHERE NOT EXISTS (SELECT 1 FROM RMTFINANCETYPES_TEMP WHERE RMTFINANCETYPES_TEMP.FINTYPE = T1.FINTYPE)
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#713.36_post" author="Sravani.S" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rmtfinancetypes_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.37_pre" author="Sravani.S" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_orgview'); 	
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.37" author="Sravani.S">
		<createView viewName="RMTFINANCETYPES_ORGVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINTYPE,
				    T1.FINCATEGORY,
				    T1.FINTYPEDESC,
				    T1.FINCCY,
				    T1.FINDAYSCALTYPE,
				    T1.FINISGENREF,
				    T1.FINMAXAMOUNT,
				    T1.FINMINAMOUNT,
				    T1.FINISALWMD,
				    T1.FINSCHDMTHD,
				    T1.FINISALWGRACE,
				    T1.EQUALREPAYMENT,
				    T1.FINRATETYPE,
				    T1.FINBASERATE,
				    T1.FINSPLRATE,
				    T1.FININTRATE,
				    T1.FINMINRATE,
				    T1.FINMAXRATE,
				    T1.FINDFTINTFRQ,
				    T1.FINISINTCPZ,
				    T1.FINCPZFRQ,
				    T1.FINISRVWALW,
				    T1.FINRVWFRQ,
				    T1.FINGRCRATETYPE,
				    T1.FINGRCBASERATE,
				    T1.FINGRCSPLRATE,
				    T1.FINGRCINTRATE,
				    T1.FINGRCMINRATE,
				    T1.FINGRCMAXRATE,
				    T1.FINGRCDFTINTFRQ,
				    T1.FINGRCISINTCPZ,
				    T1.FINGRCCPZFRQ,
				    T1.FINGRCISRVWALW,
				    T1.FINGRCRVWFRQ,
				    T1.FINMINTERM,
				    T1.FINMAXTERM,
				    T1.FINDFTTERMS,
				    T1.FINRPYFRQ,
				    T1.FINREPAYMETHOD,
				    T1.FINISALWDIFFERMENT,
				    T1.FINMAXDIFFERMENT,
				    T1.FINISACTIVE,
				    T1.STEPFINANCE,
				    T1.STEPPINGMANDATORY,
				    T1.ALWMANUALSTEPS,
				    T1.ALWDSTEPPOLICIES,
				    T1.DFTSTEPPOLICY,
				    T1.FINISDWPAYREQUIRED,
				    T1.FINRVWRATEAPPLFOR,
				    T1.FINALWRATECHANGEANYDATE,
				    T1.FINISINTCPZATGRCEND,
				    T1.FINSCHCALCODEONRVW,
				    T1.ALWPLANDEFERMENT,
				    T1.PLANDEFERCOUNT,
				    T1.FINISALWGRCREPAY,
				    T1.FINGRCSCHDMTHD,
				    T1.FINGRCMARGIN,
				    T1.FINMARGIN,
				    T1.FINCOMMITMENTREQ,
				    T1.FINCOLLATERALREQ,
				    T1.OVERRIDELIMIT,
				    T1.LIMITREQUIRED,
				    T1.FINCOMMITMENTOVRRIDE,
				    T1.FINCOLLATERALOVRRIDE,
				    T1.FINREPAYPFTONFRQ,
				    T1.FINPFTUNCHANGED,
				    T1.APPLYODPENALTY,
				    T1.ODINCGRCDAYS,
				    T1.ODCHARGETYPE,
				    T1.ODGRACEDAYS,
				    T1.ODCHARGECALON,
				    T1.ODCHARGEAMTORPERC,
				    T1.ODALLOWWAIVER,
				    T1.ODMAXWAIVERPERC,
				    T1.FINDIVISION,
				    T3.DIVISIONCODEDESC LOVDESCFINDIVISIONNAME,
				    T1.PRODUCT,
				    T1.STARTDATE,
				    T1.ENDDATE,
				    T1.FINTYPEDESC LOVDESCPROMOFINTYPEDESC,
				    T1.REMARKS,
				    T4.POLICYDESC LOVDESCDFTSTEPPOLICYNAME,
				    T1.PASTDUEPFTCALMTHD,
				    T1.PASTDUEPFTMARGIN,
				    T1.DOWNPAYRULE,
				    T1.ALWMULTIPARTYDISB,
				    T1.COLLATERALTYPE,
				    T1.TDSAPPLICABLE,
				    T5.RULECODE DOWNPAYRULECODE,
				    T5.RULECODEDESC DOWNPAYRULEDESC,
				    T1.APPLYGRCPRICING,
				    T1.APPLYRPYPRICING,
				    T6.RULECODE GRCPRICINGMETHODDESC,
				    T7.RULECODE RPYPRICINGMETHODDESC,
				    T1.DROPLINEOD,
				    T1.DROPPINGMETHOD,
				    T1.RATECHGANYDAY,
				    T4.STEPTYPE DFTSTEPPOLICYTYPE,
				    T1.MANUALSCHEDULE,
				    T1.ALWBPI,
				    T1.BPITREATMENT,
				    T1.PFTDUESCHON,
				    T1.PLANEMIHALW,
				    T1.PLANEMIHMETHOD,
				    T1.PLANEMIHMAXPERYEAR,
				    T1.PLANEMIHMAX,
				    T1.PLANEMIHLOCKPERIOD,
				    T1.PLANEMICPZ,
				    T1.UNPLANEMIHLOCKPERIOD,
				    T1.UNPLANEMICPZ,
				    T1.REAGECPZ,
				    T1.FDDLOCKPERIOD,
				    T1.ALWDRPYMETHODS,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.ROUNDINGMODE,
				    T1.ROUNDINGTARGET,
				    T1.FREQUENCYDAYS,
				    T1.QUICKDISB,
				    T1.ALWREAGE,
				    T1.ALWUNPLANEMIHOLIDAY,
				    T1.ALWMAXDISBCHECKREQ,
				    T1.PRODUCTCATEGORY,
				    T1.RPYHIERARCHY,
				    T1.DEVELOPERFINANCE,
				    T3.ENTITYCODE LOVDESCENTITYCODE,
				    T8.ENTITYDESC LOVDESCENTITYDESC,
				    T1.COSTOFFUNDS,
				    T1.CHEQUECAPTUREREQ,
				    T1.FINLTVCHECK,
				    T1.PARTIALLYSECURED,
				    T1.ALWADVEMI,
				    T1.ADVEMIMINTERMS,
				    T1.ADVEMIMAXTERMS,
				    T1.ADVEMIDFTTERMS,
				    T1.ADVEMISCHDMTHD,
				    T1.BPIPFTDAYSBASIS,
				    T1.ELIGIBILITYMETHODS,
				    T1.ALWHYBRIDRATE,
				    T1.FIXEDRATETENOR,
				    T1.ODMINCAPAMOUNT,
				    T1.ODRULECODE,
				    T1.ALWZEROINTACC,
				    T1.FINISALWPARTIALRPY,
				    T1.AUTOREJECTIONDAYS,
				    T1.TAXNOMAND,
				    T1.PUTCALLREQUIRED,
				    T1.GRCADVINTERSETREQ,
				    T1.GRCADVTYPE,
				    T1.GRCADVMINTERMS,
				    T1.GRCADVMAXTERMS,
				    T1.GRCADVDEFAULTTERMS,
				    T1.ADVINTERSETREQ,
				    T1.ADVTYPE,
				    T1.ADVMINTERMS,
				    T1.ADVMAXTERMS,
				    T1.ADVDEFAULTTERMS,
				    T1.ADVSTAGE,
				    T1.DSFREQ,
				    T1.CASHCOLLATERALREQ,
				    T1.ALWEARLYPAYMETHODS,
				    T1.FINSCHEDULEON,
				    T1.TDSALLOWTOMODIFY,
				    T1.TDSAPPLICABLETO,
				    T1.ALWVAN,
				    T1.VANALLOCATIONMETHOD,
				    T1.ALLOWDRAWINGPOWER,
				    T1.ALLOWREVOLVING,
				    T1.ALWSANCTIONAMT,
				    T1.ALWSANCTIONAMTOVERRIDE,
				    T1.SANBSDSCHDLE,
				    T1.FINISRATERVWATGRCEND,
				    T1.SCHDONPMTCAL,
				    T1.AUTOAPPROVE,
				    T1.OCRREQUIRED,
				    T1.ALLOWEDOCRS,
				    T1.DEFAULTOCR,
				    T1.ALLOWEDLOANPURPOSES,
				    T1.SPECIFICLOANPURPOSES,
				    T1.ALWPLANNEDEMIINGRC,
				    T1.GRCADJREQ,
				    T1.GRCPERIODAFTRFULLDISB,
				    T1.AUTOINCRGRCENDDATE,
				    T1.GRCAUTOINCRMONTHS,
				    T1.MAXAUTOINCRALLOWED,
				    T1.THRLDTOMAINTAINGRCPRD,
				    T1.ALWLOANSPLIT,
				    T1.SPLITLOANTYPE,
				    T1.INSTBASEDSCHD,
				    T1.TDSTYPE,
				    T1.CALCOFSTEPS,
				    T1.STEPSAPPLIEDFOR,
				    T1.SUBVENTIONREQ,
					T1.OVERDRAFTTXNCHRGREQ,
					T1.OVERDRAFTTXNCHRGFEETYPE,
					T1.OVERDRAFTEXTGRACEDAYS,
					T1.OVERDRAFTCOLCHRGFEETYPE,
					T1.OVERDRAFTCOLAMT,
					T1.REGPROVRULE,
					T1.INTPROVRULE,
					T1.CLOSURETHRESHOLDLIMIT,
					T1.MAXFPPCALTYPE,
					T1.MAXFPPAMOUNT,
					T1.MAXFPPPER,
					T1.MAXFPPCALON,
					T1.PPLOCKINPERIOD,
					T1.ESLOCKINPERIOD,
					T1.MINPPCALTYPE,
					T1.MINPPAMOUNT,
					T1.MINPPPERCENTAGE,
					T1.MINPPCALON,
					T1.MAXPPCALTYPE,
					T1.MAXPPAMOUNT,
					T1.MAXPPPERCENTAGE,
					T1.MAXPPCALON,
					T1.ALLOWAUTOREFUND, 
					T1.MAXAUTOREFUND, 
					T1.MINAUTOREFUND
				FROM RMTFINANCETYPES T1
				INNER JOIN SMTDIVISIONDETAIL T3 ON T1.FINDIVISION = T3.DIVISIONCODE
				LEFT JOIN STEPPOLICYHEADER T4 ON T1.DFTSTEPPOLICY = T4.POLICYCODE
				LEFT JOIN RULES T5 ON T1.DOWNPAYRULE = T5.RULEID
				LEFT JOIN RULES T6 ON T1.GRCPRICINGMETHOD = T6.RULEID
				LEFT JOIN RULES T7 ON T1.RPYPRICINGMETHOD = T7.RULEID
				LEFT JOIN ENTITY T8 ON T3.ENTITYCODE = T8.ENTITYCODE
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#713.37_post" author="Sravani.S" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rmtfinancetypes_orgview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.38_pre" author="Sravani.S" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_aeview'); 
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#713.38" author="Sravani.S">
		<createView viewName="RMTFINANCETYPES_AEVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINTYPE,
				    '' FINDEFFREQ,
				    T1.FINCCY,
				    T1.FINCATEGORY,
				    T1.DEVELOPERFINANCE,
				    T1.PARTIALLYSECURED,
				    T1.INSTBASEDSCHD,
				    T1.TDSTYPE,
				    T1.SUBVENTIONREQ,
					T1.CLOSURETHRESHOLDLIMIT,
					T1.MAXFPPCALTYPE,
					T1.MAXFPPAMOUNT,
					T1.MAXFPPPER,
					T1.MAXFPPCALON,
					T1.PPLOCKINPERIOD,
					T1.ESLOCKINPERIOD,
					T1.MINPPCALTYPE,
					T1.MINPPAMOUNT,
					T1.MINPPPERCENTAGE,
					T1.MINPPCALON,
					T1.MAXPPCALTYPE,
					T1.MAXPPAMOUNT,
					T1.MAXPPPERCENTAGE,
					T1.MAXPPCALON,
					T1.ALLOWAUTOREFUND, 
					T1.MAXAUTOREFUND, 
					T1.MINAUTOREFUND
				FROM RMTFINANCETYPES T1	
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#713.38_post" author="Sravani.S" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rmtfinancetypes_aeview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#704.1" author="vijaya.a">
		<sql>
			<![CDATA[
				INSERT INTO SECGROUPS (GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'FINTYPEPARTNERBANK_MAPPING_MAKER', 'Fin Type Parnerbank Mapping Maker Group', 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPS (GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'FINTYPEPARTNERBANK_MAPPING_APPROVER', 'Fin Type Parnerbank Mapping Approver Group', 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
			
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_FinTypePartnerbankMapping', 'MENU', 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'FinTypePartnerBankMappingDialog_finType', 'FinTypePartnerBankMappingDialog', 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'FinTypePartnerBankMappingDialog_Purpose', 'FinTypePartnerBankMappingDialog', 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'FinTypePartnerBankMappingDialog_PaymentMode', 'FinTypePartnerBankMappingDialog', 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'FinTypePartnerBankMappingDialog_PartnerBankID', 'FinTypePartnerBankMappingDialog', 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'FinTypePartnerBankMappingDialog_branch', 'FinTypePartnerBankMappingDialog', 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'button_FinTypePartnerBankMappingDialog_btnNew', 'FinTypePartnerBankMappingDialog', 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'button_FinTypePartnerBankMappingDialog_btnEdit', 'FinTypePartnerBankMappingDialog', 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'button_FinTypePartnerBankMappingDialog_btnDelete', 'FinTypePartnerBankMappingDialog', 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'button_FinTypePartnerBankMappingDialog_btnSave', 'FinTypePartnerBankMappingDialog', 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
		
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FINTYPEPARTNERBANK_MAPPING_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_FinTypePartnerbankMapping'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FINTYPEPARTNERBANK_MAPPING_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'FinTypePartnerBankMappingDialog_finType'), 1, 1, 1000, CURRENT_TIMESTAMP,NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FINTYPEPARTNERBANK_MAPPING_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'FinTypePartnerBankMappingDialog_Purpose'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FINTYPEPARTNERBANK_MAPPING_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'FinTypePartnerBankMappingDialog_PaymentMode'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FINTYPEPARTNERBANK_MAPPING_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'FinTypePartnerBankMappingDialog_PartnerBankID'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FINTYPEPARTNERBANK_MAPPING_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'FinTypePartnerBankMappingDialog_branch'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FINTYPEPARTNERBANK_MAPPING_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_FinTypePartnerBankMappingDialog_btnNew'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FINTYPEPARTNERBANK_MAPPING_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_FinTypePartnerBankMappingDialog_btnEdit'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FINTYPEPARTNERBANK_MAPPING_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_FinTypePartnerBankMappingDialog_btnDelete'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FINTYPEPARTNERBANK_MAPPING_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_FinTypePartnerBankMappingDialog_btnSave'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FINTYPEPARTNERBANK_MAPPING_APPROVER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_FinTypePartnerbankMapping'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FINTYPEPARTNERBANK_MAPPING_APPROVER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_FinTypePartnerBankMappingDialog_btnSave'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#704.2" author="vijaya.a">
		<sql>
			<![CDATA[
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'FINTYPEPARTNERBANK_MAPPING_MAKER', 'Maker role from FinType Partner Bank Mapping', '', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0); 
		  		INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'FINTYPEPARTNERBANK_MAPPING_APPROVER', 'Approver role from FinType Partner Bank Mapping',	'', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		    
		    	INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FINTYPEPARTNERBANK_MAPPING_MAKER'),    (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'FINTYPEPARTNERBANK_MAPPING_MAKER'),    0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		    	INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FINTYPEPARTNERBANK_MAPPING_APPROVER'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'FINTYPEPARTNERBANK_MAPPING_APPROVER'), 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		    	
		    	UPDATE SECROLES SET ROLECD = 'FINTYPE_PARTNER_BANK_MAPPING_MAKER' WHERE ROLECD = 'FINTYPEPARTNERBANK_MAPPING_MAKER';
		    	UPDATE SECROLES SET ROLECD = 'FINTYPE_PARTNER_BANK_MAPPING_APPROVER' WHERE ROLECD = 'FINTYPEPARTNERBANK_MAPPING_APPROVER';
		    	
		    	UPDATE SECGROUPS SET GRPCODE = 'FINTYPE_PARTNER_BANK_MAPPING_MAKER' WHERE GRPCODE = 'FINTYPEPARTNERBANK_MAPPING_MAKER';
		    	UPDATE SECGROUPS SET GRPCODE = 'FINTYPE_PARTNER_BANK_MAPPING_APPROVER' WHERE GRPCODE = 'FINTYPEPARTNERBANK_MAPPING_APPROVER';
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#704.3" author="vijaya.a">
		<addColumn tableName="FINTYPEPARTNERBANKS_Temp">
			<column name="BRANCHCODE" type="VARCHAR(12)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#704.4" author="vijaya.a">
		<addColumn tableName="FINTYPEPARTNERBANKS">
			<column name="BRANCHCODE" type="VARCHAR(12)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#704.5" author="vijaya.a">
		<addColumn tableName="FINTYPEPARTNERBANKS_Temp">
			<column name="CLUSTERID" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#704.6" author="vijaya.a">
		<addColumn tableName="FINTYPEPARTNERBANKS">
			<column name="CLUSTERID" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#704.7_pre" author="vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'fintypepartnerbanks_view');
		 	]]>
		</sql>
	</changeSet>

	<changeSet id="ST#704.7" author="vijaya.a">
		<createView viewName="FINTYPEPARTNERBANKS_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ID,
					T1.FINTYPE,
					T5.FINTYPEDESC,
					T1.PURPOSE,
					T1.PAYMENTMODE,
					T1.PARTNERBANKID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.PARTNERBANKCODE,
					T2.PARTNERBANKNAME,
					T1.VANAPPLICABLE,
					T1.BRANCHCODE,
					T3.BRANCHDESC,
					T1.CLUSTERID,
					T4.CODE CLUSTERCODE,
					T4.NAME,
					T4.CLUSTERTYPE,
					T2.ACCOUNTNO SUSPENSEAC
				FROM FINTYPEPARTNERBANKS_TEMP T1
				INNER JOIN PARTNERBANKS T2 ON T1.PARTNERBANKID = T2.PARTNERBANKID
				INNER JOIN RMTFINANCETYPES T5 ON T1.FINTYPE = T5.FINTYPE
				INNER JOIN RMTBRANCHES T3 ON T1.BRANCHCODE = T3.BRANCHCODE
				INNER JOIN CLUSTERS T4 ON T1.CLUSTERID = T4.ID
				UNION ALL
				SELECT T1.ID,
					T1.FINTYPE,
					T5.FINTYPEDESC,
					T1.PURPOSE,
					T1.PAYMENTMODE,
					T1.PARTNERBANKID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.PARTNERBANKCODE,
					T2.PARTNERBANKNAME,
					T1.VANAPPLICABLE,
					T1.BRANCHCODE,
					T3.BRANCHDESC,
					T1.CLUSTERID,
					T4.CODE CLUSTERCODE,
					T4.NAME,
					T4.CLUSTERTYPE,
					T2.ACCOUNTNO SUSPENSEAC
				FROM FINTYPEPARTNERBANKS T1
				INNER JOIN RMTFINANCETYPES T5 ON T1.FINTYPE = T5.FINTYPE
				INNER JOIN PARTNERBANKS T2 ON T1.PARTNERBANKID = T2.PARTNERBANKID
				INNER JOIN RMTBRANCHES T3 ON T1.BRANCHCODE = T3.BRANCHCODE
				INNER JOIN CLUSTERS T4 ON T1.CLUSTERID = T4.ID
				WHERE NOT EXISTS (SELECT 1 FROM FINTYPEPARTNERBANKS_TEMP WHERE FINTYPEPARTNERBANKS_TEMP.ID = T1.ID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#704.7_post" author="vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'fintypepartnerbanks_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#704.8_pre" author="vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'fintypepartnerbanks_aview');
		 	]]>
		</sql>
	</changeSet>

	<changeSet id="ST#704.8" author="vijaya.a">
		<createView viewName="FINTYPEPARTNERBANKS_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ID,
					T1.FINTYPE,
					T3.FINTYPEDESC,
					T1.PURPOSE,
					T1.PAYMENTMODE,
					T1.PARTNERBANKID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.PARTNERBANKCODE,
					T2.PARTNERBANKNAME,
					T2.ACTIVE,
					T2.ACCOUNTNO,
					T2.ACTYPE AS ACCOUNTTYPE,
					T4.ENTITYCODE,
					T1.VANAPPLICABLE,
					T1.BRANCHCODE,
					T5.BRANCHDESC,
					T1.CLUSTERID,
					T6.CODE CLUSTERCODE,
					T6.NAME,
					T6.CLUSTERTYPE
				FROM FINTYPEPARTNERBANKS T1
				INNER JOIN PARTNERBANKS T2 ON T1.PARTNERBANKID = T2.PARTNERBANKID
				INNER JOIN RMTFINANCETYPES T3 ON T1.FINTYPE = T3.FINTYPE
				INNER JOIN SMTDIVISIONDETAIL T4 ON T3.FINDIVISION = T4.DIVISIONCODE
				INNER JOIN RMTBRANCHES T5 ON T1.BRANCHCODE = T5.BRANCHCODE
				INNER JOIN CLUSTERS T6 ON T1.CLUSTERID = T6.ID
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#704.8_post" author="vijaya.a" dbms="postgress">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'fintypepartnerbanks_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#704.9_pre" author="vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_fcview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#704.9" author="vijaya.a">
		<createView viewName="FINRECEIPTHEADER_FCVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.RECAGAINST,
					T2.FINID,
					T1.REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.RECEIPTMODESTATUS,
					T1.SUBRECEIPTMODE,
					T1.RECEIPTCHANNEL,
					T1.RECEIVEDFROM,
					T1.PANNUMBER,
					T1.COLLECTIONAGENTID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINTYPE,
					T2.FINBRANCH,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					T2.FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					T4.FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					T5.CCYDESC FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
					T2.SCHEDULEMETHOD,
					T2.PROFITDAYSBASIS PFTDAYSBASIS,
					T1.WAVIEDAMT,
					COALESCE(T3.CUSTID, 0) CUSTID,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T2.NEXTREPAYRVWDATE,
					T1.CASHIERBRANCH,
					T1.INITIATEDATE,
					T1.INSTRUCTIONUID,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.MODULE,
					T1.EXTREFERENCE,
					T13.CUSTCIF CUSTOMERCIF,
					T13.CUSTSHRTNAME CUSTOMERNAME,
					T1.ACTFINRECEIPT,
					T1.REASONCODE,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPEID,
	      			T14.CODE CLOSURETYPEDESC,
					T1.RECADJAMT,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE,
					PB.PARTNERBANKCODE
				FROM FINRECEIPTHEADER_TEMP T1
				LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.FINID = T2.FINID
				LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
				LEFT JOIN CLOSURE_TYPES	T14 ON T14.ID = T1.CLOSURETYPEID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				LEFT JOIN PARTNERBANKS PB ON PB.PARTNERBANKID = T1.PARTNERBANKID
				UNION ALL
				SELECT
					T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.RECAGAINST,
					T2.FINID,
					T1.REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.RECEIPTMODESTATUS,
					T1.SUBRECEIPTMODE,
					T1.RECEIPTCHANNEL,
					T1.RECEIVEDFROM,
					T1.PANNUMBER,
					T1.COLLECTIONAGENTID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINTYPE,
					T2.FINBRANCH,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					T2.FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					T4.FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					T5.CCYDESC FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
					T2.SCHEDULEMETHOD,
					T2.PROFITDAYSBASIS PFTDAYSBASIS,
					T1.WAVIEDAMT,
					COALESCE(T3.CUSTID, 0) CUSTID,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T2.NEXTREPAYRVWDATE,
					T1.CASHIERBRANCH,
					T1.INITIATEDATE,
					T1.INSTRUCTIONUID,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.MODULE,
					T1.EXTREFERENCE,
					T13.CUSTCIF CUSTOMERCIF,
					T13.CUSTSHRTNAME CUSTOMERNAME,
					T1.ACTFINRECEIPT,
					T1.REASONCODE,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPEID,
	      			T14.CODE CLOSURETYPEDESC,
					T1.RECADJAMT,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE,
					PB.PARTNERBANKCODE
				FROM FINRECEIPTHEADER T1
				LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.FINID = T2.FINID
				LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
				LEFT JOIN CLOSURE_TYPES	T14 ON T14.ID = T1.CLOSURETYPEID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				LEFT JOIN PARTNERBANKS PB ON PB.PARTNERBANKID = T1.PARTNERBANKID
				WHERE NOT EXISTS ( SELECT 1 FROM FINRECEIPTHEADER_TEMP WHERE RECEIPTID = T1.RECEIPTID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#704.9_post" author="vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader_fcview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#704.10_pre" author="vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_fview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#704.10" author="vijaya.a">
		<createView viewName="FINRECEIPTHEADER_FVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.ACTFINRECEIPT,
					T1.RECAGAINST,
					T2.FINID,
					T1.REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.RECEIPTMODESTATUS,
					T1.SUBRECEIPTMODE,
					T1.RECEIPTCHANNEL,
					T1.RECEIVEDFROM,
					T1.PANNUMBER,
					T1.COLLECTIONAGENTID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					COALESCE(T1.FINTYPE, T2.FINTYPE) FINTYPE,
					T2.FINBRANCH,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					COALESCE(T2.FINCCY, T15.FINCCY) FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					COALESCE(T4.FINTYPEDESC, T15.FINTYPEDESC) FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					COALESCE(T5.CCYDESC, T14.CCYDESC) FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
					T2.SCHEDULEMETHOD,
					T2.PROFITDAYSBASIS PFTDAYSBASIS,
					T1.WAVIEDAMT,
					COALESCE(T3.CUSTID, T10.CUSTID, 0) CUSTID,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T1.CASHIERBRANCH,
					T2.NEXTREPAYRVWDATE,
					T1.INITIATEDATE,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.MODULE,
					T1.INSTRUCTIONUID,
					T1.EXTREFERENCE,
					T10.CUSTCIF CUSTOMERCIF,
					T10.CUSTSHRTNAME CUSTOMERNAME,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T11.DIVISIONCODEDESC FINDIVISIONDESC,
					T12.BRANCHDESC POSTBRANCHDESC,
					T13.BRANCHDESC CASHIERBRANCHDESC,
					T11.ENTITYCODE,
					COALESCE(T3.CUSTBASECCY,T10.CUSTBASECCY)CUSTBASECCY,
					T1.REASONCODE,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T2.TDSAPPLICABLE FINTDSAPPLICABLE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPEID,
	      			T16.CODE CLOSURETYPEDESC,
				    T1.RECADJAMT,
				    T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE,
					PB.PARTNERBANKCODE
				FROM FINRECEIPTHEADER_TEMP T1
				LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.FINID = T2.FINID
				LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN Customers T10 ON CAST(T10.CustId AS VARCHAR(20)) = T1.REFERENCE
				LEFT JOIN SMTDIVISIONDETAIL T11 ON T1.FINDIVISION = T11.DIVISIONCODE
				LEFT JOIN RMTBranches T12 ON T1.PostBranch = T12.BranchCode
				LEFT JOIN RMTBranches T13 ON T1.CASHIERBRANCH = T13.BranchCode
				LEFT JOIN RMTFINANCETYPES T15 ON T1.FINTYPE = T15.FINTYPE
				LEFT JOIN RMTCURRENCIES T14 ON T14.CCYCODE= T3.CUSTBASECCY
				LEFT JOIN CLOSURE_TYPES	T16 ON T16.ID = T1.CLOSURETYPEID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				LEFT JOIN PARTNERBANKS PB ON PB.PARTNERBANKID = T1.PARTNERBANKID
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#704.10_post" author="vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader_fview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#704.11_pre" author="vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_feview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#704.11" author="vijaya.a">
		<createView viewName="FINRECEIPTHEADER_FEVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.RECAGAINST,
					T2.FINID,
					T1.REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.RECEIPTMODESTATUS,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINTYPE,
					T2.FINBRANCH,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					T2.FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					T4.FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					T5.CCYDESC FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
					T2.SCHEDULEMETHOD,
					T2.PROFITDAYSBASIS PFTDAYSBASIS,
					T1.WAVIEDAMT,
					COALESCE(T3.CUSTID, 0) CUSTID,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T2.NEXTREPAYRVWDATE,
					T1.CASHIERBRANCH,
					T1.INITIATEDATE,
					T4.FINDIVISION LOVDESCFINDIVISION,
					T2.BUSINESSVERTICAL,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.INSTRUCTIONUID,
					T1.MODULE,
					T1.EXTREFERENCE,
					T1.COLLECTIONAGENTID,
					T1.PANNUMBER,
					T1.RECEIVEDFROM,
					T1.RECEIPTCHANNEL,
					T1.SUBRECEIPTMODE,
					T13.CUSTCIF CUSTOMERCIF,
					T13.CUSTSHRTNAME CUSTOMERNAME,
					T1.ACTFINRECEIPT,
					T1.REASONCODE,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPEID,
	      			T14.CODE CLOSURETYPEDESC,
				    T1.RECADJAMT,
				    T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE,
					PB.PARTNERBANKCODE
				FROM FINRECEIPTHEADER_TEMP T1
				LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.FINID = T2.FINID
				LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
				LEFT JOIN CLOSURE_TYPES	T14 ON T14.ID = T1.CLOSURETYPEID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				LEFT JOIN PARTNERBANKS PB ON PB.PARTNERBANKID = T1.PARTNERBANKID
				UNION ALL
				SELECT T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.RECAGAINST,
					T2.FINID,
					T1.REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.RECEIPTMODESTATUS,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINTYPE,
					T2.FINBRANCH,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					T2.FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					T4.FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					T5.CCYDESC FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
					T2.SCHEDULEMETHOD,
					T2.PROFITDAYSBASIS PFTDAYSBASIS,
					T1.WAVIEDAMT,
					COALESCE(T3.CUSTID, 0) CUSTID,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T2.NEXTREPAYRVWDATE,
					T1.CASHIERBRANCH,
					T1.INITIATEDATE,
					T4.FINDIVISION LOVDESCFINDIVISION,
					T2.BUSINESSVERTICAL,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.INSTRUCTIONUID,
					T1.MODULE,
					T1.EXTREFERENCE,
					T1.COLLECTIONAGENTID,
					T1.PANNUMBER,
					T1.RECEIVEDFROM,
					T1.RECEIPTCHANNEL,
					T1.SUBRECEIPTMODE,
					T13.CUSTCIF CUSTOMERCIF,
					T13.CUSTSHRTNAME CUSTOMERNAME,
					T1.ACTFINRECEIPT,
					T1.REASONCODE,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPEID,
	      			T14.CODE CLOSURETYPEDESC,
				    T1.RECADJAMT,
				    T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE,
					PB.PARTNERBANKCODE
				FROM FINRECEIPTHEADER T1
				LEFT JOIN (SELECT FINID, FINREFERENCE, FINBRANCH, FINTYPE
							, FINCCY, SCHEDULEMETHOD, PROFITDAYSBASIS, FINISACTIVE
							, CUSTID, PRODUCTCATEGORY, PROMOTIONCODE, NEXTREPAYRVWDATE
							, BUSINESSVERTICAL
						FROM FINANCEMAIN_TEMP
						UNION
						SELECT FINID, FINREFERENCE, FINBRANCH, FINTYPE, FINCCY
							, SCHEDULEMETHOD, PROFITDAYSBASIS, FINISACTIVE
							, CUSTID, PRODUCTCATEGORY, PROMOTIONCODE, NEXTREPAYRVWDATE
							, BUSINESSVERTICAL
						FROM FINANCEMAIN ) T2 ON T1.FINID = T2.FINID
				LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
				LEFT JOIN CLOSURE_TYPES	T14 ON T14.ID = T1.CLOSURETYPEID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				LEFT JOIN PARTNERBANKS PB ON PB.PARTNERBANKID = T1.PARTNERBANKID
				WHERE NOT EXISTS (SELECT 1 FROM FINRECEIPTHEADER_TEMP WHERE RECEIPTID = T1.RECEIPTID )
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#704.11_post" author="vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader_feview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#710.1" author="saikiran.n">
		<addColumn tableName="FinanceMain_temp">
			<column name="SecurityMandateID" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#710.2" author="saikiran.n">
		<addColumn tableName="FinanceMain">
			<column name="SecurityMandateID" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#710.3" author="saikiran.n">
		<sql>
			<![CDATA[
				 UPDATE FINANCEMAIN SET SECURITYMANDATEID = (SELECT M.MANDATEID FROM MANDATES M WHERE FINANCEMAIN.FINREFERENCE = M.ORGREFERENCE AND M.SECURITYMANDATE = 1);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#710.4_pre" author="saikiran.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financeenquiry_view');
		 	]]>
		</sql>
	</changeSet>

	<changeSet id="ST#710.4" author="saikiran.n">
		<createView viewName="FINANCEENQUIRY_VIEW" replaceIfExists="true">
		  <![CDATA[
				SELECT FM.FINID,
					FM.FINREFERENCE,
					FM.FINBRANCH,
					FM.FINTYPE,
					FM.FINCCY,
					FM.SCHEDULEMETHOD,
					FM.PROFITDAYSBASIS,
					FM.FINSTARTDATE,
					FM.CALTERMS NUMBEROFTERMS,
					FM.CUSTID,
					FM.FINAMOUNT,
					FM.GRCPERIODENDDATE,
					FM.MATURITYDATE,
					FM.FINREPAYMENTAMOUNT,
					FM.FINISACTIVE,
					FM.ALLOWGRCPERIOD,
					FM.DOWNPAYMENT,
					FM.MIGRATEDFINANCE,
					FM.LASTREPAYDATE,
					FM.LASTREPAYPFTDATE,
					FM.FINCURRASSETVALUE,
					FM.BLACKLISTED,
					FM.FEECHARGEAMT,
					FM.CLOSINGSTATUS,
					FM.GRACETERMS,
					FM.ALWMULTIDISB,
					FM.DEFFERMENTS,
					FM.FINSTATUS ,
					FM.MANDATEID,
					FM.FINREPAYMETHOD,
					FM.FINASSETVALUE,
					FM.SANBSDSCHDLE,
					FM.PROMOTIONSEQID,
					FM.SVAMOUNT,
					FM.CBAMOUNT,
					(FM.FINCURRASSETVALUE+ FM.FEECHARGEAMT) FINANCINGAMOUNT,
					(FM.FINCURRASSETVALUE- FM.FINREPAYMENTAMOUNT+ FM.FEECHARGEAMT) CURFINAMOUNT,
					RF.FINTYPEDESC LOVDESCFINTYPENAME,
					RF.FINSCHEDULEON LOVDESCFINSCHEDULEON,
					RF.FINDIVISION LOVDESCFINDIVISION,
					RF.FINCATEGORY LOVDESCPRODUCTCODENAME,
					RF.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
					C.CUSTCIF LOVDESCCUSTCIF,
					C.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
					RB.BRANCHDESC LOVDESCFINBRANCHNAME,
					RC.CUSTTYPECTG,
					COALESCE(FP.NOINST,0) NOINST,
					FM.TOTALCPZ,
					FM.FINOCRREQUIRED,
					FM.ALWGRCADJ,
					FM.ENDGRCPERIODAFTRFULLDISB,
					FM.AUTOINCGRCENDDATE,
					FM.RECORDSTATUS,
					FM.WRITEOFFLOAN,
					FM.RESTRUCTURE,
					FM.SUBVENTIONFROM,
					FM.MANUFACTURERDEALERID,
					AV.DEALERNAME MANUFACTURERDEALERNAME,
					AV.CODE MANUFACTURERDEALERCODE,
					FM.ESCROW,
					FM.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					FM.SECURITYMANDATEID
				FROM FINANCEMAIN FM
				INNER JOIN RMTFINANCETYPES RF ON RF.FINTYPE = FM.FINTYPE
				INNER JOIN CUSTOMERS C ON C.CUSTID = FM.CUSTID
				INNER JOIN RMTBRANCHES RB ON RB.BRANCHCODE = FM.FINBRANCH
				INNER JOIN RMTCUSTTYPES RC ON RC.CUSTTYPECODE = C.CUSTTYPECODE 
				LEFT JOIN FINPFTDETAILS FP ON FP.FINID = FM.FINID
				LEFT JOIN AMTVEHICLEDEALER AV ON AV.DEALERID = FM.MANUFACTURERDEALERID 
				LEFT JOIN CUSTOMERBANKINFO CB ON CB.BANKID = FM.CUSTBANKID
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#710.4_post" author="saikiran.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financeenquiry_view');
			]]>
		</sql>
	</changeSet>

</databaseChangeLog>