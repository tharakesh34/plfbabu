<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

	
	<changeSet id="00" author="pennant">
		<sql>
			<![CDATA[
				delete from secuseroperations where usrid in (select usrid from secusers where usrlogin in ('ADMIN_MAKER', 'ADMIN_APPROVER'));
				delete from secoperationroles where oprid = (select oprid from secoperations where oprcode='ADMIN_OFFICER') and roleid = (select roleid from secroles where rolecd='ADMIN_OFFICER');
				delete from secoperationroles where oprid = (select oprid from secoperations where oprcode='ADMIN_MANAGER') and roleid = (select roleid from secroles where rolecd='ADMIN_MANAGER');
				delete from secoperationroles where oprid = (select oprid from secoperations where oprcode='ADMIN_OFFICER') and roleid = (select roleid from secroles where rolecd='LICENSE_UPLOAD');
				delete from secoperationroles where oprid = (select oprid from secoperations where oprcode='ADMIN_MANAGER') and roleid = (select roleid from secroles where rolecd='LICENSE_UPLOAD');
				delete from secoperations where oprcode in ('ADMIN_OFFICER', 'ADMIN_MANAGER');
				delete from SecUsers;
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="01" author="pennant">
		<sql>
			<![CDATA[
				INSERT SecUsers (UsrID,  UsrLogin,  UsrPwd,  UserStaffID,  UsrFName,  UsrMName,  UsrLName,  UsrMobile,  UsrEmail,  UsrEnabled,  UsrCanSignonFrom,  UsrCanSignonTo,  UsrCanOverrideLimits,  UsrAcExp,  UsrAcExpDt,  UsrAcLocked,  UsrLanguage,  UsrDftAppId,  UsrDftAppCode,  UsrBranchCode,  UsrDeptCode,  UsrToken,  UsrIsMultiBranch,  UsrInvldLoginTries,  Version,  LastMntBy,  LastMntOn,  RecordStatus,  RoleCode,  NextRoleCode,  TaskId,  NextTaskId,  RecordType,  WorkflowId,  UsrDesg,  LastFailLoginOn,  LastLoginOn,  AuthType,  USERTYPE,  PwdExpDt,  businessvertical,  ACCESSTOALLBRANCHES,  AccountLockedOn,  AccountUnLockedOn,  LDAPDomainName) VALUES (1000,  'ADMIN',  			'$2a$10$6KGimuN2yKz/PsOSNjtY3ezf3ic.xlmXWEXjTiieDh3hONtWWyIGm',  'NA',  'Admin',  NULL,  'Administrator',  	NULL,  NULL,  1,  Null,  Null,  0,  0,  '2025-06-03 15:17:46.503',  0,  'EN',  1,  'PFF',  'IND',  'DEFAULT',  NULL,  0,  0,  1,  1000,  current_timestamp,  'Approved',  NULL,  NULL,  NULL,  NULL,  NULL,  0,  'ADMIN',  NULL,  current_timestamp,  'DAO',  'ADMIN',  NULL,  NULL,  0,  NULL,  NULL,  NULL);
				INSERT SecUsers (UsrID,  UsrLogin,  UsrPwd,  UserStaffID,  UsrFName,  UsrMName,  UsrLName,  UsrMobile,  UsrEmail,  UsrEnabled,  UsrCanSignonFrom,  UsrCanSignonTo,  UsrCanOverrideLimits,  UsrAcExp,  UsrAcExpDt,  UsrAcLocked,  UsrLanguage,  UsrDftAppId,  UsrDftAppCode,  UsrBranchCode,  UsrDeptCode,  UsrToken,  UsrIsMultiBranch,  UsrInvldLoginTries,  Version,  LastMntBy,  LastMntOn,  RecordStatus,  RoleCode,  NextRoleCode,  TaskId,  NextTaskId,  RecordType,  WorkflowId,  UsrDesg,  LastFailLoginOn,  LastLoginOn,  AuthType,  USERTYPE,  PwdExpDt,  businessvertical,  ACCESSTOALLBRANCHES,  AccountLockedOn,  AccountUnLockedOn,  LDAPDomainName) VALUES (1001,  'ADMIN_MAKER',  		'$2a$10$6KGimuN2yKz/PsOSNjtY3ezf3ic.xlmXWEXjTiieDh3hONtWWyIGm',  'NA',  'Admin',  NULL,  'Maker',  			NULL,  NULL,  1,  Null,  Null,  0,  0,  '2025-06-03 15:17:46.503',  0,  'EN',  1,  'PFF',  'IND',  'DEFAULT',  NULL,  0,  0,  1,  1000,  current_timestamp,  'Approved',  NULL,  NULL,  NULL,  NULL,  NULL,  0,  'ADMIN',  NULL,  current_timestamp,  'DAO',  'ADMIN',  NULL,  NULL,  0,  NULL,  NULL,  NULL);
				INSERT SecUsers (UsrID,  UsrLogin,  UsrPwd,  UserStaffID,  UsrFName,  UsrMName,  UsrLName,  UsrMobile,  UsrEmail,  UsrEnabled,  UsrCanSignonFrom,  UsrCanSignonTo,  UsrCanOverrideLimits,  UsrAcExp,  UsrAcExpDt,  UsrAcLocked,  UsrLanguage,  UsrDftAppId,  UsrDftAppCode,  UsrBranchCode,  UsrDeptCode,  UsrToken,  UsrIsMultiBranch,  UsrInvldLoginTries,  Version,  LastMntBy,  LastMntOn,  RecordStatus,  RoleCode,  NextRoleCode,  TaskId,  NextTaskId,  RecordType,  WorkflowId,  UsrDesg,  LastFailLoginOn,  LastLoginOn,  AuthType,  USERTYPE,  PwdExpDt,  businessvertical,  ACCESSTOALLBRANCHES,  AccountLockedOn,  AccountUnLockedOn,  LDAPDomainName) VALUES (1002,  'ADMIN_APPROVER',  	'$2a$10$6KGimuN2yKz/PsOSNjtY3ezf3ic.xlmXWEXjTiieDh3hONtWWyIGm',  'NA',  'Admin',  NULL,  'Approver',  		NULL,  NULL,  1,  Null,  Null,  0,  0,  '2025-06-03 15:17:46.503',  0,  'EN',  1,  'PFF',  'IND',  'DEFAULT',  NULL,  0,  0,  1,  1000,  current_timestamp,  'Approved',  NULL,  NULL,  NULL,  NULL,  NULL,  0,  'ADMIN',  NULL,  current_timestamp,  'DAO',  'ADMIN',  NULL,  NULL,  0,  NULL,  NULL,  NULL);
				
				insert into SeqSecUsers (SeqNo) values ((select max(UsrID) from SecUsers));
				
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="02" author="pennant">
		<sql>
			<![CDATA[
				update seqsecoperations set seqno=(select coalesce(max(oprid), 0) from secoperations);
				insert into secoperations values ((select coalesce(max(oprid), 0) + 1 from  secoperations), 'ADMIN_OFFICER', 'Operation to manage the admin officer operations',1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0 );
				Insert Into SecOperations Values ((SELECT coalesce(MAX(Oprid), 0) + 1 FROM  SecOperations), 'ADMIN_MANAGER', 'Operation to manage the admin manager operations',1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0 );
				update SeqSecOperations set SeqNo=(select MAX(Oprid) from SecOperations);
								
				update seqsecoperationroles set seqno=(select coalesce(max(oprroleid), 0) from secoperationroles);
				insert into secoperationroles values ((select coalesce(max(oprroleid), 0)+1 from secoperationroles), (select oprid from secoperations where oprcode='ADMIN_OFFICER'), (select roleid from secroles where rolecd='ADMIN_OFFICER'), 0,1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				insert into secoperationroles values ((select coalesce(max(oprroleid), 0)+1 from secoperationroles), (select oprid from secoperations where oprcode='ADMIN_MANAGER'), (select roleid from secroles where rolecd='ADMIN_MANAGER'), 0,1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				insert into secoperationroles values ((select coalesce(max(oprroleid), 0)+1 from secoperationroles), (select oprid from secoperations where oprcode='ADMIN_OFFICER'), (select roleid from secroles where rolecd='LICENSE_UPLOAD'), 0,1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				insert into secoperationroles values ((select coalesce(max(oprroleid), 0)+1 from secoperationroles), (select oprid from secoperations where oprcode='ADMIN_MANAGER'), (select roleid from secroles where rolecd='LICENSE_UPLOAD'), 0,1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				update SeqSecOperationRoles set SeqNo=(select MAX(OprRoleID) from SecOperationRoles);
								
								
				UPDATE SeqSecUserOperations set SEQNO = (SELECT MAX(usrOprId) FROM SecUserOperations);
				INSERT INTO SecUserOperations values((Select coalesce(MAX(usrOprId), 0)+1 From SecUserOperations),(Select usrId  From SecUsers Where usrLogin='ADMIN_MAKER'), (Select  OprId  From SecOperations Where OprCode='ADMIN_OFFICER'),0,1000, CURRENT_TIMESTAMP,'Approved', ' ', ' ', ' ', ' ',' ', 0); 
				INSERT INTO SecUserOperations values((Select coalesce(MAX(usrOprId), 0)+1 From SecUserOperations),(Select usrId  From SecUsers Where usrLogin='ADMIN_APPROVER'), (Select  OprId  From SecOperations Where OprCode='ADMIN_MANAGER'),0,1000, CURRENT_TIMESTAMP,'Approved', ' ', ' ', ' ', ' ', ' ', 0); 
				update seqsecuseroperations set seqno= (select max(usroprid) from secuseroperations);
			]]>
		</sql>
	</changeSet>

</databaseChangeLog>