<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

	<property name="add.schema" value="dbo." dbms="mssql" />
	<property name="add.schema" value="" dbms="oracle" />
	<property name="add.schema" value="" dbms="postgresql" />
	<property name="call.substr" value="substring" dbms="mssql" />
	<property name="call.substr" value="substr" dbms="oracle" />
	<property name="call.substr" value="substring" dbms="postgresql" />
	<property name="call.auditdb" value="PLFAVANSEQC.." dbms="mssql" />
	<property name="call.auditdb" value=" " dbms="oracle" />
	<property name="call.concatenate" value="+" dbms="mssql" />
	<property name="call.concatenate" value="||" dbms="oracle" />
	<property name="call.concatenate" value="||" dbms="postgresql" />
	<property name="call.collength" value="LEN" dbms="mssql" />
	<property name="call.collength" value="LENGTH" dbms="oracle" />
	<property name="call.collength" value="LENGTH" dbms="postgresql" />
	<property name="call.date" value="getdate()" dbms="mssql" />
	<property name="call.date" value="sysdate" dbms="oracle" />
	<property name="call.date" value="now()" dbms="postgresql" />

	<changeSet id="pre_run_for_pgp" author="Adarsh" runAlways="true" dbms="postgresql">
		<sql>
			Set search_path = plf,public,pg_catalog;
		</sql>
	</changeSet>

	<changeSet id="pre_run_for_pgp" author="Adarsh" runAlways="true" dbms="postgresql">
		<sql>
			Set search_path = plf,public,pg_catalog;
		</sql>
	</changeSet>

	<changeSet id="478" author="shinde.b">
		<addColumn tableName="RMTFinanceTypes">
			<column name="AutoApprove" type="boolean" defaultValueBoolean="0" />
		</addColumn>
	</changeSet>

	<changeSet id="479" author="Shinde.b">
		<addColumn tableName="RMTFinanceTypes_Temp">
			<column name="AutoApprove" type="boolean" defaultValueBoolean="0" />
		</addColumn>
	</changeSet>

	<changeSet id="480" author="Shinde.b">
		<sql>
			<![CDATA[
				Update RMTFinanceTypes set AutoApprove = 0;
				Update RMTFinanceTypes_Temp set AutoApprove = 0;
			]]>

		</sql>
	</changeSet>

	<changeSet id="481.1" author="Shinde.b">
		<createView viewName="RMTFINANCETYPES_VIEW" replaceIfExists="true">
		<![CDATA[
			SELECT t1.fintype,
			t1.fincategory,
			t1.fintypedesc,
			t1.finccy,
			t1.findayscaltype,
			t1.finactype,
			t1.fincontingentactype,
			t1.finisgenref,
			t1.finmaxamount,
			t1.finminamount,
			t1.finisopennewfinac,
			t1.findftstmtfrq,
			t1.finisalwmd,
			t1.finschdmthd,
			t1.finisalwgrace,
			t1.finhistretension,
			t1.equalrepayment,
			t1.finratetype,
			t1.finbaserate,
			t1.finsplrate,
			t1.finintrate,
			t1.finminrate,
			t1.finmaxrate,
			t1.findftintfrq,
			t1.finisintcpz,
			t1.fincpzfrq,
			t1.finisrvwalw,
			t1.finrvwfrq,
			t1.fingrcratetype,
			t1.fingrcbaserate,
			t1.fingrcsplrate,
			t1.fingrcintrate,
			t1.fingrcminrate,
			t1.fingrcmaxrate,
			t1.fingrcdftintfrq,
			t1.fingrcisintcpz,
			t1.fingrccpzfrq,
			t1.fingrcisrvwalw,
			t1.fingrcrvwfrq,
			t1.finminterm,
			t1.finmaxterm,
			t1.findftterms,
			t1.finrpyfrq,
			t1.finrepaymethod,
			t1.finisalwpartialrpy,
			t1.finisalwdifferment,
			t1.finmaxdifferment,
			t1.finisalwearlyrpy,
			t1.finisalwearlysettle,
			t1.finodrpytries,
			t1.finearlypayrule,
			t1.finearlysettlerule,
			t1.findepositrestrictedto,
			t1.finaebuyorinception,
			t1.finaesellormaturity,
			t1.finisactive,
			t1.version,
			t1.lastmntby,
			t1.lastmnton,
			t1.recordstatus,
			t1.rolecode,
			t1.nextrolecode,
			t1.taskid,
			t1.nexttaskid,
			t1.recordtype,
			t1.workflowid,
			t1.stepfinance,
			t1.steppingmandatory,
			t1.alwmanualsteps,
			t1.alwdsteppolicies,
			t1.dftsteppolicy,
			t4.actypedesc lovdescfincontingentactypename,
			t5.actypedesc lovdescfinactypename,
			t1.finisdwpayrequired,
			t1.finrvwrateapplfor,
			t1.finalwratechangeanydate,
			t1.finisintcpzatgrcend,
			t1.finelgrulecode,
			t1.limitelgrulecode,
			t1.finschcalcodeonrvw,
			t1.alwplandeferment,
			t1.plandefercount,
			t1.finassettype,
			t1.pftpayactype,
			t1.finisopenpftpayacc,
			t31.actypedesc lovdescpftpayactypename,
			t1.finisalwgrcrepay,
			t1.fingrcschdmthd,
			t1.fingrcmargin,
			t1.finmargin,
			t1.finscheduleon,
			t1.fingrcscheduleon,
			t1.fincommitmentreq,
			t1.fincollateralreq,
			t1.findepreciationreq,
			t1.findepreciationfrq,
			t1.finbankcontingentactype,
			t1.finprovisionactype,
			t38.actypedesc lovdescfinbankcontactypename,
			t39.actypedesc lovdescfinprovisionactypename,
			t1.allowriainvestment,
			t1.overridelimit,
			t1.limitrequired,
			t1.fincommitmentovrride,
			t1.fincollateralovrride,
			t1.finpftunchanged,
			t1.applyodpenalty,
			t1.odincgrcdays,
			t1.odchargetype,
			t1.odgracedays,
			t1.odchargecalon,
			t1.odchargeamtorperc,
			t1.odallowwaiver,
			t1.odmaxwaiverperc,
			t1.findivision,
			t48.divisioncodedesc lovdescfindivisionname,
			t48.entitycode lovdescentitycode,
			t1.finsuspactype,
			t49.actypedesc lovdescfinsuspactypename,
			t1.product,
			t1.startdate,
			t1.enddate,
			t1.allowdownpaypgm,
			t1.fintypedesc lovdescpromofintypedesc,
			t1.remarks,
			t1.alwearlypaymethods,
			t1.pastduepftcalmthd,
			t1.pastduepftmargin,
			t1.alwadvancerent,
			t1.grcadvbaserate,
			t1.grcadvmargin,
			t1.grcadvpftrate,
			t1.rpyadvbaserate,
			t1.rpyadvmargin,
			t1.rpyadvpftrate,
			t1.rolloverfinance,
			t1.rolloverfrq,
			t1.downpayrule,
			t59.rulecode downpayrulecode,
			t59.rulecodedesc downpayruledesc,
			t1.finsusptrigger,
			t1.finsuspremarks,
			t1.alwmultipartydisb,
			t1.collateraltype,
			t1.tdsapplicable,
			t1.manualschedule,
			t1.applygrcpricing,
			t1.grcpricingmethod,
			t1.applyrpypricing,
			t1.rpypricingmethod,
			t1.rpyhierarchy,
			t67.rulecode grcpricingmethoddesc,
			t68.rulecode rpypricingmethoddesc,
			t1.droplineod,
			t1.droppingmethod,
			t1.ratechganyday,
			t1.finrepaypftonfrq,
			t1.alwbpi,
			t1.bpitreatment,
			t1.pftdueschon,
			t1.planemihalw,
			t1.planemihmethod,
			t1.planemihmaxperyear,
			t1.planemihmax,
			t1.planemihlockperiod,
			t1.planemicpz,
			t1.unplanemihlockperiod,
			t1.unplanemicpz,
			t1.reagecpz,
			t1.fddlockperiod,
			t1.alwdrpymethods,
			t1.maxunplannedemi,
			t1.maxreageholidays,
			t1.roundingmode,
			t1.roundingtarget,
			t1.frequencydays,
			t1.quickdisb,
			t1.alwmaxdisbcheckreq,
			t1.alwreage,
			t1.alwunplanemiholiday,
			t1.profitcenterid,
			t69.profitcentercode,
			t69.profitcenterdesc,
			t1.productcategory,
			t2.productdesc fincategorydesc,
			t1.developerfinance,
			t1.costoffunds,
			t1.chequecapturereq,
			t1.finltvcheck,
			t1.partiallysecured,
			t1.alwadvemi,
			t1.advemiminterms,
			t1.advemimaxterms,
			t1.advemidftterms,
			t1.advemischdmthd,
			t1.bpipftdaysbasis,
			t1.eligibilitymethods,
			t1.alwhybridrate,
			t1.fixedratetenor,
			t1.odmincapamount,
			t1.odrulecode,
			t1.alwzerointacc,
			t1.autorejectiondays,
			t1.taxnomand,
			t1.putcallrequired,
			t1.grcadvintersetreq,
			t1.grcadvtype,
			t1.grcadvminterms,
			t1.grcadvmaxterms,
			t1.grcadvdefaultterms,
			t1.advintersetreq,
			t1.advtype,
			t1.advminterms,
			t1.advmaxterms,
			t1.advdefaultterms,
			t1.advstage,
			t1.dsfreq,
			t1.cashcollateralreq,
			t1.tdsallowtomodify,
			t1.tdsapplicableto,
			t1.alwvan,
			t1.vanallocationmethod,
			t1.allowdrawingpower,
			t1.allowrevolving,
			t1.alwsanctionamt,
			t1.alwsanctionamtoverride,
			t1.sanbsdschdle,
			t1.finisratervwatgrcend,
			t1.schdonpmtcal,
			t1.autoApprove
			FROM rmtfinancetypes_temp t1
			LEFT JOIN bmtproduct t2 ON t1.fincategory = t2.productcode
			LEFT JOIN rmtaccounttypes t4 ON t1.fincontingentactype = t4.actype
			LEFT JOIN rmtaccounttypes t38 ON t1.finbankcontingentactype = t38.actype
			LEFT JOIN rmtaccounttypes t39 ON t1.finprovisionactype = t39.actype
			LEFT JOIN rmtaccounttypes t5 ON t1.finactype = t5.actype
			LEFT JOIN rmtaccounttypes t31 ON t1.pftpayactype = t31.actype
			LEFT JOIN smtdivisiondetail t48 ON t1.findivision = t48.divisioncode
			LEFT JOIN rmtaccounttypes t49 ON t1.finsuspactype = t49.actype
			LEFT JOIN rules t59 ON t1.downpayrule = t59.ruleid
			LEFT JOIN rules t67 ON t1.grcpricingmethod = t67.ruleid
			LEFT JOIN rules t68 ON t1.rpypricingmethod = t68.ruleid
			LEFT JOIN profitcenters t69 ON t69.profitcenterid = t1.profitcenterid
			UNION ALL
			SELECT t1.fintype,
			t1.fincategory,
			t1.fintypedesc,
			t1.finccy,
			t1.findayscaltype,
			t1.finactype,
			t1.fincontingentactype,
			t1.finisgenref,
			t1.finmaxamount,
			t1.finminamount,
			t1.finisopennewfinac,
			t1.findftstmtfrq,
			t1.finisalwmd,
			t1.finschdmthd,
			t1.finisalwgrace,
			t1.finhistretension,
			t1.equalrepayment,
			t1.finratetype,
			t1.finbaserate,
			t1.finsplrate,
			t1.finintrate,
			t1.finminrate,
			t1.finmaxrate,
			t1.findftintfrq,
			t1.finisintcpz,
			t1.fincpzfrq,
			t1.finisrvwalw,
			t1.finrvwfrq,
			t1.fingrcratetype,
			t1.fingrcbaserate,
			t1.fingrcsplrate,
			t1.fingrcintrate,
			t1.fingrcminrate,
			t1.fingrcmaxrate,
			t1.fingrcdftintfrq,
			t1.fingrcisintcpz,
			t1.fingrccpzfrq,
			t1.fingrcisrvwalw,
			t1.fingrcrvwfrq,
			t1.finminterm,
			t1.finmaxterm,
			t1.findftterms,
			t1.finrpyfrq,
			t1.finrepaymethod,
			t1.finisalwpartialrpy,
			t1.finisalwdifferment,
			t1.finmaxdifferment,
			t1.finisalwearlyrpy,
			t1.finisalwearlysettle,
			t1.finodrpytries,
			t1.finearlypayrule,
			t1.finearlysettlerule,
			t1.findepositrestrictedto,
			t1.finaebuyorinception,
			t1.finaesellormaturity,
			t1.finisactive,
			t1.version,
			t1.lastmntby,
			t1.lastmnton,
			t1.recordstatus,
			t1.rolecode,
			t1.nextrolecode,
			t1.taskid,
			t1.nexttaskid,
			t1.recordtype,
			t1.workflowid,
			t1.stepfinance,
			t1.steppingmandatory,
			t1.alwmanualsteps,
			t1.alwdsteppolicies,
			t1.dftsteppolicy,
			t4.actypedesc lovdescfincontingentactypename,
			t5.actypedesc lovdescfinactypename,
			t1.finisdwpayrequired,
			t1.finrvwrateapplfor,
			t1.finalwratechangeanydate,
			t1.finisintcpzatgrcend,
			t1.finelgrulecode,
			t1.limitelgrulecode,
			t1.finschcalcodeonrvw,
			t1.alwplandeferment,
			t1.plandefercount,
			t1.finassettype,
			t1.pftpayactype,
			t1.finisopenpftpayacc,
			t31.actypedesc lovdescpftpayactypename,
			t1.finisalwgrcrepay,
			t1.fingrcschdmthd,
			t1.fingrcmargin,
			t1.finmargin,
			t1.finscheduleon,
			t1.fingrcscheduleon,
			t1.fincommitmentreq,
			t1.fincollateralreq,
			t1.findepreciationreq,
			t1.findepreciationfrq,
			t1.finbankcontingentactype,
			t1.finprovisionactype,
			t38.actypedesc lovdescfinbankcontactypename,
			t39.actypedesc lovdescfinprovisionactypename,
			t1.allowriainvestment,
			t1.overridelimit,
			t1.limitrequired,
			t1.fincommitmentovrride,
			t1.fincollateralovrride,
			t1.finpftunchanged,
			t1.applyodpenalty,
			t1.odincgrcdays,
			t1.odchargetype,
			t1.odgracedays,
			t1.odchargecalon,
			t1.odchargeamtorperc,
			t1.odallowwaiver,
			t1.odmaxwaiverperc,
			t1.findivision,
			t48.divisioncodedesc lovdescfindivisionname,
			t48.entitycode lovdescentitycode,
			t1.finsuspactype,
			t49.actypedesc lovdescfinsuspactypename,
			t1.product,
			t1.startdate,
			t1.enddate,
			t1.allowdownpaypgm,
			t1.fintypedesc lovdescpromofintypedesc,
			t1.remarks,
			t1.alwearlypaymethods,
			t1.pastduepftcalmthd,
			t1.pastduepftmargin,
			t1.alwadvancerent,
			t1.grcadvbaserate,
			t1.grcadvmargin,
			t1.grcadvpftrate,
			t1.rpyadvbaserate,
			t1.rpyadvmargin,
			t1.rpyadvpftrate,
			t1.rolloverfinance,
			t1.rolloverfrq,
			t1.downpayrule,
			t59.rulecode downpayrulecode,
			t59.rulecodedesc downpayruledesc,
			t1.finsusptrigger,
			t1.finsuspremarks,
			t1.alwmultipartydisb,
			t1.collateraltype,
			t1.tdsapplicable,
			t1.manualschedule,
			t1.applygrcpricing,
			t1.grcpricingmethod,
			t1.applyrpypricing,
			t1.rpypricingmethod,
			t1.rpyhierarchy,
			t67.rulecode grcpricingmethoddesc,
			t68.rulecode rpypricingmethoddesc,
			t1.droplineod,
			t1.droppingmethod,
			t1.ratechganyday,
			t1.finrepaypftonfrq,
			t1.alwbpi,
			t1.bpitreatment,
			t1.pftdueschon,
			t1.planemihalw,
			t1.planemihmethod,
			t1.planemihmaxperyear,
			t1.planemihmax,
			t1.planemihlockperiod,
			t1.planemicpz,
			t1.unplanemihlockperiod,
			t1.unplanemicpz,
			t1.reagecpz,
			t1.fddlockperiod,
			t1.alwdrpymethods,
			t1.maxunplannedemi,
			t1.maxreageholidays,
			t1.roundingmode,
			t1.roundingtarget,
			t1.frequencydays,
			t1.quickdisb,
			t1.alwmaxdisbcheckreq,
			t1.alwreage,
			t1.alwunplanemiholiday,
			t1.profitcenterid,
			t69.profitcentercode,
			t69.profitcenterdesc,
			t1.productcategory,
			t2.productdesc fincategorydesc,
			t1.developerfinance,
			t1.costoffunds,
			t1.chequecapturereq,
			t1.finltvcheck,
			t1.partiallysecured,
			t1.alwadvemi,
			t1.advemiminterms,
			t1.advemimaxterms,
			t1.advemidftterms,
			t1.advemischdmthd,
			t1.bpipftdaysbasis,
			t1.eligibilitymethods,
			t1.alwhybridrate,
			t1.fixedratetenor,
			t1.odmincapamount,
			t1.odrulecode,
			t1.alwzerointacc,
			t1.autorejectiondays,
			t1.taxnomand,
			t1.putcallrequired,
			t1.grcadvintersetreq,
			t1.grcadvtype,
			t1.grcadvminterms,
			t1.grcadvmaxterms,
			t1.grcadvdefaultterms,
			t1.advintersetreq,
			t1.advtype,
			t1.advminterms,
			t1.advmaxterms,
			t1.advdefaultterms,
			t1.advstage,
			t1.dsfreq,
			t1.cashcollateralreq,
			t1.tdsallowtomodify,
			t1.tdsapplicableto,
			t1.alwvan,
			t1.vanallocationmethod,
			t1.allowdrawingpower,
			t1.allowrevolving,
			t1.alwsanctionamt,
			t1.alwsanctionamtoverride,
			t1.sanbsdschdle,
			t1.finisratervwatgrcend,
			t1.schdonpmtcal,
			t1.autoApprove
			FROM rmtfinancetypes t1
			LEFT JOIN bmtproduct t2 ON t1.fincategory = t2.productcode
			LEFT JOIN rmtaccounttypes t4 ON t1.fincontingentactype = t4.actype
			LEFT JOIN rmtaccounttypes t38 ON t1.finbankcontingentactype = t38.actype
			LEFT JOIN rmtaccounttypes t39 ON t1.finprovisionactype = t39.actype
			LEFT JOIN rmtaccounttypes t5 ON t1.finactype = t5.actype
			LEFT JOIN rmtaccounttypes t31 ON t1.pftpayactype = t31.actype
			LEFT JOIN smtdivisiondetail t48 ON t1.findivision = t48.divisioncode
			LEFT JOIN rmtaccounttypes t49 ON t1.finsuspactype = t49.actype
			LEFT JOIN rules t59 ON t1.downpayrule = t59.ruleid
			LEFT JOIN rules t67 ON t1.grcpricingmethod = t67.ruleid
			LEFT JOIN rules t68 ON t1.rpypricingmethod = t68.ruleid
			LEFT JOIN profitcenters t69 ON t69.profitcenterid = t1.profitcenterid
			WHERE NOT (EXISTS ( SELECT 1 expr1
			FROM rmtfinancetypes_temp
			WHERE rmtfinancetypes_temp.fintype = t1.fintype ))
			]]>
		</createView>
	</changeSet>

	<changeSet id="481.1_pre" author="Shinde.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_aview');
		 	]]>
		</sql>
	</changeSet>


	<changeSet id="482.1" author="Shinde.b">
		<createView viewName="RMTFINANCETYPES_AVIEW" replaceIfExists="true">
		<![CDATA[
			SELECT t1.fintype,
			t1.fincategory,
			t1.fintypedesc,
			t1.finccy,
			t1.findayscaltype,
			t1.finactype,
			t1.fincontingentactype,
			t1.finisgenref,
			t1.finmaxamount,
			t1.finminamount,
			t1.finisopennewfinac,
			t1.findftstmtfrq,
			t1.finisalwmd,
			t1.finschdmthd,
			t1.finisalwgrace,
			t1.finhistretension,
			t1.equalrepayment,
			t1.finratetype,
			t1.finbaserate,
			t1.finsplrate,
			t1.finintrate,
			t1.finminrate,
			t1.finmaxrate,
			t1.findftintfrq,
			t1.finisintcpz,
			t1.fincpzfrq,
			t1.finisrvwalw,
			t1.finrvwfrq,
			t1.fingrcratetype,
			t1.fingrcbaserate,
			t1.fingrcsplrate,
			t1.fingrcintrate,
			t1.fingrcminrate,
			t1.fingrcmaxrate,
			t1.fingrcdftintfrq,
			t1.fingrcisintcpz,
			t1.fingrccpzfrq,
			t1.fingrcisrvwalw,
			t1.fingrcrvwfrq,
			t1.finminterm,
			t1.finmaxterm,
			t1.findftterms,
			t1.finrpyfrq,
			t1.finrepaymethod,
			t1.finisalwpartialrpy,
			t1.finisalwdifferment,
			t1.finmaxdifferment,
			t1.finisalwearlyrpy,
			t1.finisalwearlysettle,
			t1.finodrpytries,
			t1.finearlypayrule,
			t1.finearlysettlerule,
			t1.findepositrestrictedto,
			t1.finaebuyorinception,
			t1.finaesellormaturity,
			t1.finisactive,
			t1.version,
			t1.lastmntby,
			t1.lastmnton,
			t1.recordstatus,
			t1.rolecode,
			t1.nextrolecode,
			t1.taskid,
			t1.nexttaskid,
			t1.recordtype,
			t1.workflowid,
			t1.stepfinance,
			t1.steppingmandatory,
			t1.alwmanualsteps,
			t1.alwdsteppolicies,
			t1.dftsteppolicy,
			t4.actypedesc lovdescfincontingentactypename,
			t5.actypedesc lovdescfinactypename,
			t1.finisdwpayrequired,
			t1.finrvwrateapplfor,
			t1.finalwratechangeanydate,
			t1.finisintcpzatgrcend,
			t1.finelgrulecode,
			t1.limitelgrulecode,
			t1.finschcalcodeonrvw,
			t1.alwplandeferment,
			t1.plandefercount,
			t1.finassettype,
			t1.pftpayactype,
			t1.finisopenpftpayacc,
			t31.actypedesc lovdescpftpayactypename,
			t1.finisalwgrcrepay,
			t1.fingrcschdmthd,
			t1.fingrcmargin,
			t1.finmargin,
			t1.finscheduleon,
			t1.fingrcscheduleon,
			t1.fincommitmentreq,
			t1.fincollateralreq,
			t1.findepreciationreq,
			t1.findepreciationfrq,
			t1.finbankcontingentactype,
			t1.finprovisionactype,
			t38.actypedesc lovdescfinbankcontactypename,
			t39.actypedesc lovdescfinprovisionactypename,
			t1.allowriainvestment,
			t1.overridelimit,
			t1.limitrequired,
			t1.fincommitmentovrride,
			t1.fincollateralovrride,
			t1.finpftunchanged,
			t1.applyodpenalty,
			t1.odincgrcdays,
			t1.odchargetype,
			t1.odgracedays,
			t1.odchargecalon,
			t1.odchargeamtorperc,
			t1.odallowwaiver,
			t1.odmaxwaiverperc,
			t1.findivision,
			t48.divisioncodedesc lovdescfindivisionname,
			t48.entitycode lovdescentitycode,
			t1.finsuspactype,
			t49.actypedesc lovdescfinsuspactypename,
			t1.product,
			t1.startdate,
			t1.enddate,
			t1.allowdownpaypgm,
			t1.remarks,
			t1.alwearlypaymethods,
			t1.pastduepftcalmthd,
			t1.pastduepftmargin,
			t1.alwadvancerent,
			t1.grcadvbaserate,
			t1.grcadvmargin,
			t1.grcadvpftrate,
			t1.rpyadvbaserate,
			t1.rpyadvmargin,
			t1.rpyadvpftrate,
			t1.rolloverfinance,
			t1.rolloverfrq,
			t1.downpayrule,
			t59.rulecode downpayrulecode,
			t59.rulecodedesc downpayruledesc,
			t1.finsusptrigger,
			t1.finsuspremarks,
			t1.alwmultipartydisb,
			t1.collateraltype,
			t1.tdsapplicable,
			t1.manualschedule,
			t1.applygrcpricing,
			t1.grcpricingmethod,
			t1.applyrpypricing,
			t1.rpypricingmethod,
			t1.rpyhierarchy,
			t67.rulecode grcpricingmethoddesc,
			t68.rulecode rpypricingmethoddesc,
			t1.droplineod,
			t1.droppingmethod,
			t1.ratechganyday,
			t1.finrepaypftonfrq,
			t1.alwbpi,
			t1.bpitreatment,
			t1.pftdueschon,
			t1.planemihalw,
			t1.planemihmethod,
			t1.planemihmaxperyear,
			t1.planemihmax,
			t1.planemihlockperiod,
			t1.planemicpz,
			t1.unplanemihlockperiod,
			t1.unplanemicpz,
			t1.reagecpz,
			t1.fddlockperiod,
			t1.alwdrpymethods,
			t1.maxunplannedemi,
			t1.maxreageholidays,
			t1.roundingmode,
			t1.roundingtarget,
			t1.frequencydays,
			t1.quickdisb,
			t1.alwreage,
			t1.alwunplanemiholiday,
			t1.alwmaxdisbcheckreq,
			t1.fintypedesc lovdescpromofintypedesc,
			t1.profitcenterid,
			t69.profitcentercode,
			t69.profitcenterdesc,
			t1.productcategory,
			t2.productdesc fincategorydesc,
			t1.developerfinance,
			t1.costoffunds,
			t1.chequecapturereq,
			t1.finltvcheck,
			t1.partiallysecured,
			t1.alwadvemi,
			t1.advemiminterms,
			t1.advemimaxterms,
			t1.advemidftterms,
			t1.advemischdmthd,
			t1.bpipftdaysbasis,
			t1.eligibilitymethods,
			t1.alwhybridrate,
			t1.fixedratetenor,
			t1.odmincapamount,
			t1.odrulecode,
			t1.alwzerointacc,
			t1.autorejectiondays,
			t1.taxnomand,
			t1.putcallrequired,
			t1.grcadvintersetreq,
			t1.grcadvtype,
			t1.grcadvminterms,
			t1.grcadvmaxterms,
			t1.grcadvdefaultterms,
			t1.advintersetreq,
			t1.advtype,
			t1.advminterms,
			t1.advmaxterms,
			t1.advdefaultterms,
			t1.advstage,
			t1.dsfreq,
			t1.cashcollateralreq,
			t1.tdsallowtomodify,
			t1.tdsapplicableto,
			t1.alwvan,
			t1.vanallocationmethod,
			t1.allowdrawingpower,
			t1.allowrevolving,
			t1.alwsanctionamt,
			t1.alwsanctionamtoverride,
			t1.sanbsdschdle,
			t1.finisratervwatgrcend,
			t1.schdonpmtcal,
			t1.autoApprove
			FROM rmtfinancetypes t1
			LEFT JOIN bmtproduct t2 ON t1.fincategory = t2.productcode
			LEFT JOIN rmtaccounttypes t4 ON t1.fincontingentactype = t4.actype
			LEFT JOIN rmtaccounttypes t38 ON t1.finbankcontingentactype = t38.actype
			LEFT JOIN rmtaccounttypes t39 ON t1.finprovisionactype = t39.actype
			LEFT JOIN rmtaccounttypes t5 ON t1.finactype = t5.actype
			LEFT JOIN rmtaccounttypes t31 ON t1.pftpayactype = t31.actype
			LEFT JOIN smtdivisiondetail t48 ON t1.findivision = t48.divisioncode
			LEFT JOIN rmtaccounttypes t49 ON t1.finsuspactype = t49.actype
			LEFT JOIN rules t59 ON t1.downpayrule = t59.ruleid
			LEFT JOIN rules t67 ON t1.grcpricingmethod = t67.ruleid
			LEFT JOIN rules t68 ON t1.rpypricingmethod = t68.ruleid
			LEFT JOIN profitcenters t69 ON t69.profitcenterid = t1.profitcenterid
			]]>
		</createView>
	</changeSet>

	<changeSet id="484_post" author="Shinde.b" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_restore_dependencies ('plf', 'rmtfinancetypes_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="485.1" author="Shinde.b">
		<createView viewName="RMTFINANCETYPES_ORGVIEW" replaceIfExists="true">
		<![CDATA[
			SELECT t1.fintype,
			t1.fincategory,
			t1.fintypedesc,
			t1.finccy,
			t1.findayscaltype,
			t1.finactype,
			t1.fincontingentactype,
			t1.finisgenref,
			t1.finmaxamount,
			t1.finminamount,
			t1.finisopennewfinac,
			t1.finisalwmd,
			t1.finschdmthd,
			t1.finisalwgrace,
			t1.equalrepayment,
			t1.finratetype,
			t1.finbaserate,
			t1.finsplrate,
			t1.finintrate,
			t1.finminrate,
			t1.finmaxrate,
			t1.findftintfrq,
			t1.finisintcpz,
			t1.fincpzfrq,
			t1.finisrvwalw,
			t1.finrvwfrq,
			t1.fingrcratetype,
			t1.fingrcbaserate,
			t1.fingrcsplrate,
			t1.fingrcintrate,
			t1.fingrcminrate,
			t1.fingrcmaxrate,
			t1.fingrcdftintfrq,
			t1.fingrcisintcpz,
			t1.fingrccpzfrq,
			t1.fingrcisrvwalw,
			t1.fingrcrvwfrq,
			t1.finminterm,
			t1.finmaxterm,
			t1.findftterms,
			t1.finrpyfrq,
			t1.finrepaymethod,
			t1.finisalwdifferment,
			t1.finmaxdifferment,
			t1.finisactive,
			t1.stepfinance,
			t1.steppingmandatory,
			t1.alwmanualsteps,
			t1.alwdsteppolicies,
			t1.dftsteppolicy,
			t1.finisdwpayrequired,
			t1.finrvwrateapplfor,
			t1.finalwratechangeanydate,
			t1.finisintcpzatgrcend,
			t1.finschcalcodeonrvw,
			t1.alwplandeferment,
			t1.plandefercount,
			t1.pftpayactype,
			t1.finisopenpftpayacc,
			t1.finisalwgrcrepay,
			t1.fingrcschdmthd,
			t1.fingrcmargin,
			t1.finmargin,
			t1.fincommitmentreq,
			t1.fincollateralreq,
			t1.findepreciationreq,
			t1.findepreciationfrq,
			t1.finbankcontingentactype,
			t1.finprovisionactype,
			t1.allowriainvestment,
			t1.overridelimit,
			t1.limitrequired,
			t1.fincommitmentovrride,
			t1.fincollateralovrride,
			t1.finrepaypftonfrq,
			t1.finpftunchanged,
			t1.applyodpenalty,
			t1.odincgrcdays,
			t1.odchargetype,
			t1.odgracedays,
			t1.odchargecalon,
			t1.odchargeamtorperc,
			t1.odallowwaiver,
			t1.odmaxwaiverperc,
			t1.findivision,
			t3.divisioncodedesc lovdescfindivisionname,
			t1.finsuspactype,
			t1.product,
			t1.startdate,
			t1.enddate,
			t1.allowdownpaypgm,
			t1.fintypedesc lovdescpromofintypedesc,
			t1.remarks,
			t4.policydesc lovdescdftsteppolicyname,
			t1.pastduepftcalmthd,
			t1.pastduepftmargin,
			t1.alwadvancerent,
			t1.grcadvbaserate,
			t1.grcadvmargin,
			t1.grcadvpftrate,
			t1.rpyadvbaserate,
			t1.rpyadvmargin,
			t1.rpyadvpftrate,
			t1.rolloverfinance,
			t1.rolloverfrq,
			t1.downpayrule,
			t1.alwmultipartydisb,
			t1.collateraltype,
			t1.tdsapplicable,
			t5.rulecode downpayrulecode,
			t5.rulecodedesc downpayruledesc,
			t1.applygrcpricing,
			t1.applyrpypricing,
			t6.rulecode grcpricingmethoddesc,
			t7.rulecode rpypricingmethoddesc,
			t1.droplineod,
			t1.droppingmethod,
			t1.ratechganyday,
			t4.steptype dftsteppolicytype,
			t1.manualschedule,
			t1.alwbpi,
			t1.bpitreatment,
			t1.pftdueschon,
			t1.planemihalw,
			t1.planemihmethod,
			t1.planemihmaxperyear,
			t1.planemihmax,
			t1.planemihlockperiod,
			t1.planemicpz,
			t1.unplanemihlockperiod,
			t1.unplanemicpz,
			t1.reagecpz,
			t1.fddlockperiod,
			t1.alwdrpymethods,
			t1.maxunplannedemi,
			t1.maxreageholidays,
			t1.roundingmode,
			t1.roundingtarget,
			t1.frequencydays,
			t1.quickdisb,
			t1.alwreage,
			t1.alwunplanemiholiday,
			t1.alwmaxdisbcheckreq,
			t1.productcategory,
			t1.rpyhierarchy,
			t1.developerfinance,
			t3.entitycode lovdescentitycode,
			t8.entitydesc lovdescentitydesc,
			t1.costoffunds,
			t1.chequecapturereq,
			t1.finltvcheck,
			t1.partiallysecured,
			t1.alwadvemi,
			t1.advemiminterms,
			t1.advemimaxterms,
			t1.advemidftterms,
			t1.advemischdmthd,
			t1.bpipftdaysbasis,
			t1.eligibilitymethods,
			t1.alwhybridrate,
			t1.fixedratetenor,
			t1.odmincapamount,
			t1.odrulecode,
			t1.alwzerointacc,
			t1.finisalwpartialrpy,
			t1.autorejectiondays,
			t1.taxnomand,
			t1.putcallrequired,
			t1.grcadvintersetreq,
			t1.grcadvtype,
			t1.grcadvminterms,
			t1.grcadvmaxterms,
			t1.grcadvdefaultterms,
			t1.advintersetreq,
			t1.advtype,
			t1.advminterms,
			t1.advmaxterms,
			t1.advdefaultterms,
			t1.advstage,
			t1.dsfreq,
			t1.cashcollateralreq,
			t1.alwearlypaymethods,
			t1.tdsallowtomodify,
			t1.tdsapplicableto,
			t1.alwvan,
			t1.vanallocationmethod,
			t1.allowdrawingpower,
			t1.allowrevolving,
			t1.alwsanctionamt,
			t1.alwsanctionamtoverride,
			t1.sanbsdschdle,
			t1.finisratervwatgrcend,
			t1.schdonpmtcal,
			t1.autoApprove
			FROM rmtfinancetypes t1
			JOIN smtdivisiondetail t3 ON t1.findivision = t3.divisioncode
			LEFT JOIN steppolicyheader t4 ON t1.dftsteppolicy = t4.policycode
			LEFT JOIN rules t5 ON t1.downpayrule = t5.ruleid
			LEFT JOIN rules t6 ON t1.grcpricingmethod = t6.ruleid
			LEFT JOIN rules t7 ON t1.rpypricingmethod = t7.ruleid
			LEFT JOIN entity t8 ON t3.entitycode = t8.entitycode
			]]>
		</createView>
	</changeSet>

	<changeSet id="486" author="Shinde.b">
		<sql>
   			 <![CDATA[
        		Insert into SMTPARAMETERS (SYSPARMCODE,SYSPARMDESC,SYSPARMTYPE,SYSPARMMAINT,SYSPARMVALUE,SYSPARMLENGTH,SYSPARMDEC,SYSPARMLIST,SYSPARMVALDMOD,SYSPARMDESCRIPTION,VERSION,LASTMNTBY,LASTMNTON,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID) values ('ALLOW_QUICK_DISB','Allow Quick Disbursement ','String',1,'N',3,0,null,null,' Allow Quick Disbursement',1,1000,current_timestamp,'Approved',null,null,null,null,null,0);
     		]]>
		</sql>
	</changeSet>

	<changeSet id="487" author="Shinde.b">
		<sql>
		    <![CDATA[
		         Update SeqSecRights set SeqNo = (Select max(RightId)+1 from SecRights);
		         INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3,'FinanceTypeDialog_AllowAutoApprove','FinanceTypeDialog',0,1000,current_timestamp,'Approved','',' ',' ',' ',' ',0);
		         Update SeqSecRights set SeqNo = (Select max(RightId)+1  from SecRights);
		     ]]>
		</sql>
	</changeSet>

	<changeSet id="488" author="Shinde.b">
		<createTable tableName="QDPVALIDITYDAYS">
			<column name="DisbMode" type="varchar(8)">
				<constraints nullable="false" />
			</column>
			<column name="NoOfDays" type="smallint" />
		</createTable>
	</changeSet>

	<changeSet id="489" author="Shinde.b">
		<sql>
			 <![CDATA[
				Insert into QDPVALIDITYDAYS (DISBMODE,NOOFDAYS) values ('CHEQUE', 90);
				Insert into QDPVALIDITYDAYS (DISBMODE,NOOFDAYS) values ('NEFT', 30);
				Insert into QDPVALIDITYDAYS (DISBMODE,NOOFDAYS) values ('RTGS', 30); 
				Insert into QDPVALIDITYDAYS (DISBMODE,NOOFDAYS) values ('IMPS', 30);
				Insert into QDPVALIDITYDAYS (DISBMODE,NOOFDAYS) values ('DD', 30);
			 ]]>
		</sql>
	</changeSet>

	<changeSet id="490" author="Shinde.b">
		<addColumn tableName="Findisbursementdetails_Temp">
			<column name="QuickDisb" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="491" author="Shinde.b">
		<addColumn tableName="Findisbursementdetails">
			<column name="QuickDisb" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="492" author="Shinde.b">
		<createTable tableName="Batch_Process_Status">
			<column name="BatchName" type="varchar(30)">
				<constraints nullable="false" />
			</column>
			<column name="StartTime" type="datetime" />
			<column name="EndTime" type="datetime" />
			<column name="Status" type="Char(1)" />
			<column name="Remarks" type="varchar(500)" />
		</createTable>
	</changeSet>

	<changeSet id="493" author="Shinde.b">
		<addColumn tableName="Findisbursementdetails_log">
			<column name="QuickDisb" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="494" author="Shinde.b">
		<sql>
			<![CDATA[
				update Findisbursementdetails_log set quickdisb = 0;
				update Findisbursementdetails_Temp set quickdisb = 0;
				update Findisbursementdetails set quickdisb = 0;
			 ]]>
		</sql>
	</changeSet>

	<changeSet id="494_post" author="Saikiran.v" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE Findisbursementdetails_log ADD CONSTRAINT DF_Findisbursementdetails_log_quickdisb DEFAULT 0 FOR quickdisb;
				ALTER TABLE Findisbursementdetails_Temp ADD CONSTRAINT DF_Findisbursementdetails_Temp_quickdisb DEFAULT 0 FOR quickdisb;
				ALTER TABLE Findisbursementdetails ADD CONSTRAINT DF_Findisbursementdetails_quickdisb DEFAULT 0 FOR quickdisb;
			]]>
		</sql>
	</changeSet>

	<changeSet id="494_post" author="Saikiran.v" dbms="postgresql, oracle">
		<addDefaultValue columnName="quickdisb" tableName="Findisbursementdetails_log" defaultValue="0" />
		<addDefaultValue columnName="quickdisb" tableName="Findisbursementdetails_Temp" defaultValue="0" />
		<addDefaultValue columnName="quickdisb" tableName="Findisbursementdetails" defaultValue="0" />
	</changeSet>

	<changeSet id="495" author="Shinde.b">
		<addColumn tableName="finAdvancePayments">
			<column name="realizationdate" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="496" author="Shinde.b">
		<addColumn tableName="finAdvancePayments_temp">
			<column name="realizationdate" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="497.1" author="Shinde.b">
		<createView viewName="FINADVANCEPAYMENTS_TVIEW" replaceIfExists="true">
		<![CDATA[
			SELECT t1.finreference,
			t1.paymentid,
			t1.paymentseq,
			t1.paymentdetail,
			t1.amttobereleased,
			t1.liabilityholdname,
			t1.transactionref,
			t1.beneficiaryname,
			t1.beneficiaryaccno,
			t1.reenterbeneficiaryaccno,
			t1.description,
			t1.paymenttype,
			t1.llreferenceno,
			t1.lldate,
			t1.custcontribution,
			t1.sellercontribution,
			t1.remarks,
			t1.disbdate,
			t1.disbseq,
			t1.version,
			t1.lastmntby,
			t1.lastmnton,
			t1.recordstatus,
			t1.rolecode,
			t1.nextrolecode,
			t1.taskid,
			t1.nexttaskid,
			t1.recordtype,
			t1.workflowid,
			t1.bankcode,
			t1.payableloc,
			t1.printingloc,
			t1.valuedate,
			t1.bankbranchid,
			t1.phonecountrycode,
			t1.phoneareacode,
			t1.phonenumber,
			t1.clearingdate,
			t1.status,
			t1.active,
			t1.inputdate,
			t1.disbccy,
			t1.poissued,
			t3.bankcode branchbankcode,
			t31.bankname branchbankname,
			t3.branchcode,
			t3.branchdesc,
			t3.ifsc,
			t3.city,
			t4.bankname,
			t1.partnerbankid,
			t5.partnerbankcode,
			t5.partnerbankname,
			t1.linkedtranid,
			t5.actype partnerbankactype,
			t5.accountno partnerbankac,
			t6.branchdesc printinglocdesc,
			t1.rejectreason,
			t1.realizationdate
			FROM finadvancepayments_temp t1
			LEFT JOIN bankbranches t3 ON t1.bankbranchid = t3.bankbranchid
			LEFT JOIN bmtbankdetail t31 ON t31.bankcode = t3.bankcode
			LEFT JOIN bmtbankdetail t4 ON t1.bankcode = t4.bankcode
			LEFT JOIN partnerbanks t5 ON t5.partnerbankid = t1.partnerbankid
			LEFT JOIN bankbranches t6 ON t6.branchcode = t1.printingloc
			]]>
		</createView>
	</changeSet>

	<changeSet id="498.1" author="Shinde.b">
		<createView viewName="FINADVANCEPAYMENTS_AVIEW" replaceIfExists="true">
		<![CDATA[
			SELECT t1.finreference,
			t1.paymentid,
			t1.paymentseq,
			t1.paymentdetail,
			t1.amttobereleased,
			t1.liabilityholdname,
			t1.transactionref,
			t1.beneficiaryname,
			t1.beneficiaryaccno,
			t1.reenterbeneficiaryaccno,
			t1.description,
			t1.paymenttype,
			t1.llreferenceno,
			t1.lldate,
			t1.custcontribution,
			t1.sellercontribution,
			t1.remarks,
			t1.disbdate,
			t1.disbseq,
			t1.version,
			t1.lastmntby,
			t1.lastmnton,
			t1.recordstatus,
			t1.rolecode,
			t1.nextrolecode,
			t1.taskid,
			t1.nexttaskid,
			t1.recordtype,
			t1.workflowid,
			t1.bankcode,
			t1.payableloc,
			t1.printingloc,
			t1.valuedate,
			t1.bankbranchid,
			t1.phonecountrycode,
			t1.phoneareacode,
			t1.phonenumber,
			t1.clearingdate,
			t1.status,
			t1.active,
			t1.inputdate,
			t1.disbccy,
			t1.poissued,
			t3.bankcode branchbankcode,
			t31.bankname branchbankname,
			t3.branchcode,
			t3.branchdesc,
			t3.ifsc,
			t3.city,
			t4.bankname,
			t1.partnerbankid,
			t5.partnerbankcode,
			t5.partnerbankname,
			t1.linkedtranid,
			t5.actype partnerbankactype,
			t5.accountno partnerbankac,
			t6.branchdesc printinglocdesc,
			t1.rejectreason,
			t1.realizationdate
			FROM finadvancepayments t1
			LEFT JOIN bankbranches t3 ON t1.bankbranchid = t3.bankbranchid
			LEFT JOIN bmtbankdetail t31 ON t31.bankcode = t3.bankcode
			LEFT JOIN bmtbankdetail t4 ON t1.bankcode = t4.bankcode
			LEFT JOIN partnerbanks t5 ON t5.partnerbankid = t1.partnerbankid
			LEFT JOIN bankbranches t6 ON t6.branchcode = t1.printingloc
			]]>
		</createView>
	</changeSet>

	<changeSet id="499.1" author="Shinde.b">
		<createView viewName="FINADVANCEPAYMENTS_VIEW" replaceIfExists="true">
		<![CDATA[
			SELECT t1.finreference,
			t1.paymentid,
			t1.paymentseq,
			t1.paymentdetail,
			t1.amttobereleased,
			t1.liabilityholdname,
			t1.transactionref,
			t1.beneficiaryname,
			t1.beneficiaryaccno,
			t1.reenterbeneficiaryaccno,
			t1.description,
			t1.paymenttype,
			t1.llreferenceno,
			t1.lldate,
			t1.custcontribution,
			t1.sellercontribution,
			t1.remarks,
			t1.disbdate,
			t1.disbseq,
			t1.version,
			t1.lastmntby,
			t1.lastmnton,
			t1.recordstatus,
			t1.rolecode,
			t1.nextrolecode,
			t1.taskid,
			t1.nexttaskid,
			t1.recordtype,
			t1.workflowid,
			t1.bankcode,
			t1.payableloc,
			t1.printingloc,
			t1.valuedate,
			t1.bankbranchid,
			t1.phonecountrycode,
			t1.phoneareacode,
			t1.phonenumber,
			t1.clearingdate,
			t1.status,
			t1.active,
			t1.inputdate,
			t1.disbccy,
			t1.poissued,
			t3.bankcode branchbankcode,
			t31.bankname branchbankname,
			t3.branchcode,
			t3.branchdesc,
			t3.ifsc,
			t3.city,
			t4.bankname,
			t1.partnerbankid,
			t5.partnerbankcode,
			t5.partnerbankname,
			t1.linkedtranid,
			t5.actype partnerbankactype,
			t5.accountno partnerbankac,
			t6.branchdesc printinglocdesc,
			t1.rejectreason,
			t1.realizationdate
			FROM finadvancepayments_temp t1
			LEFT JOIN bankbranches t3 ON t1.bankbranchid = t3.bankbranchid
			LEFT JOIN bmtbankdetail t31 ON t31.bankcode = t3.bankcode
			LEFT JOIN bmtbankdetail t4 ON t1.bankcode = t4.bankcode
			LEFT JOIN partnerbanks t5 ON t5.partnerbankid = t1.partnerbankid
			LEFT JOIN bankbranches t6 ON t6.branchcode = t1.printingloc
			UNION ALL
			SELECT t1.finreference,
			t1.paymentid,
			t1.paymentseq,
			t1.paymentdetail,
			t1.amttobereleased,
			t1.liabilityholdname,
			t1.transactionref,
			t1.beneficiaryname,
			t1.beneficiaryaccno,
			t1.reenterbeneficiaryaccno,
			t1.description,
			t1.paymenttype,
			t1.llreferenceno,
			t1.lldate,
			t1.custcontribution,
			t1.sellercontribution,
			t1.remarks,
			t1.disbdate,
			t1.disbseq,
			t1.version,
			t1.lastmntby,
			t1.lastmnton,
			t1.recordstatus,
			t1.rolecode,
			t1.nextrolecode,
			t1.taskid,
			t1.nexttaskid,
			t1.recordtype,
			t1.workflowid,
			t1.bankcode,
			t1.payableloc,
			t1.printingloc,
			t1.valuedate,
			t1.bankbranchid,
			t1.phonecountrycode,
			t1.phoneareacode,
			t1.phonenumber,
			t1.clearingdate,
			t1.status,
			t1.active,
			t1.inputdate,
			t1.disbccy,
			t1.poissued,
			t3.bankcode branchbankcode,
			t31.bankname branchbankname,
			t3.branchcode,
			t3.branchdesc,
			t3.ifsc,
			t3.city,
			t4.bankname,
			t1.partnerbankid,
			t5.partnerbankcode,
			t5.partnerbankname,
			t1.linkedtranid,
			t5.actype partnerbankactype,
			t5.accountno partnerbankac,
			t6.branchdesc printinglocdesc,
			t1.rejectreason,
			t1.realizationdate
			FROM finadvancepayments t1
			LEFT JOIN bankbranches t3 ON t1.bankbranchid = t3.bankbranchid
			LEFT JOIN bmtbankdetail t31 ON t31.bankcode = t3.bankcode
			LEFT JOIN bmtbankdetail t4 ON t1.bankcode = t4.bankcode
			LEFT JOIN partnerbanks t5 ON t5.partnerbankid = t1.partnerbankid
			LEFT JOIN bankbranches t6 ON t6.branchcode = t1.printingloc
			WHERE NOT (EXISTS ( SELECT 1
			FROM finadvancepayments_temp
			WHERE finadvancepayments_temp.finreference = t1.finreference AND finadvancepayments_temp.paymentseq = t1.paymentseq))
			]]>
		</createView>
	</changeSet>

	<changeSet id="500_pre" author="Shinde.b" dbms='oracle'>
		<dropColumn tableName="Disbursement_Requests" columnName="REALIZATION_DATE" />
	</changeSet>

	<changeSet id="500" author="Shinde.b">
		<addColumn tableName="FINAUTOAPPROVALDETAILS">
			<column name="DOWNLOADED_ON" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="501" author="Shinde.b">
		<addColumn tableName="Disbursement_Requests">
			<column name="DOWNLOADED_ON" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="502" author="Shinde.b">
		<addColumn tableName="Disbursement_Requests">
			<column name="REALIZATION_DATE" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="503.1" author="Shinde.b">
		<createView viewName="FINDISBURSEMENTDETAILS_AVIEW" replaceIfExists="true">
		<![CDATA[
			SELECT t1.finreference,
			t1.disbdate,
			t1.disbseq,
			t1.disbdesc,
			t1.disbaccountid,
			t1.disbamount,
			t1.disbreqdate,
			t1.disbdisbursed,
			t1.disbisactive,
			t1.disbremarks,
			t1.lastmntby,
			t1.lastmnton,
			t1.recordstatus,
			t1.rolecode,
			t1.nextrolecode,
			t1.taskid,
			t1.nexttaskid,
			t1.recordtype,
			t1.workflowid,
			t1.feechargeamt,
			t1.version,
			t1.disbstatus,
			t1.disbtype,
			t1.disbclaim,
			t1.disbexptype,
			t1.disbretperc,
			t1.disbretamount,
			t1.autodisb,
			t1.netadvdue,
			t1.netretdue,
			t1.disbretpaid,
			t1.retpaiddate,
			t2.expencetypename lovdescdisbexptype,
			t1.consultfeefrq,
			t1.consultfeestartdate,
			t1.consultfeeenddate,
			t1.contractorid,
			t1.insuranceamt,
			t1.instructionuid,
			t1.quickdisb
			FROM findisbursementdetails t1
			LEFT JOIN amtexpensetype t2 ON t2.expencetypeid = t1.disbexptype
			]]>
		</createView>
	</changeSet>

	<changeSet id="504.1.1" author="Shinde.b">
		<createView viewName="FINDISBURSEMENTDETAILS_TVIEW" replaceIfExists="true">
		<![CDATA[
			SELECT t1.finreference,
			t1.disbdate,
			t1.disbseq,
			t1.disbdesc,
			t1.disbaccountid,
			t1.disbamount,
			t1.disbreqdate,
			t1.disbdisbursed,
			t1.disbisactive,
			t1.disbremarks,
			t1.version,
			t1.lastmntby,
			t1.lastmnton,
			t1.recordstatus,
			t1.rolecode,
			t1.nextrolecode,
			t1.taskid,
			t1.nexttaskid,
			t1.recordtype,
			t1.workflowid,
			t1.feechargeamt,
			t1.disbstatus,
			t1.disbtype,
			t1.disbclaim,
			t1.disbexptype,
			t1.disbretperc,
			t1.disbretamount,
			t1.autodisb,
			t1.netadvdue,
			t1.netretdue,
			t1.disbretpaid,
			t1.retpaiddate,
			t2.expencetypename lovdescdisbexptype,
			t1.consultfeefrq,
			t1.consultfeestartdate,
			t1.consultfeeenddate,
			t1.contractorid,
			t1.insuranceamt,
			t1.instructionuid,
			t1.quickdisb
			FROM findisbursementdetails_temp t1
			LEFT JOIN amtexpensetype t2 ON t2.expencetypeid = t1.disbexptype
			]]>
		</createView>
	</changeSet>

	<changeSet id="505.1" author="Shinde.b">
		<createView viewName="FINADVANCEPAYMENTS_VIEW" replaceIfExists="true">
		<![CDATA[
			SELECT t1.finreference,
			t1.paymentid,
			t1.paymentseq,
			t1.paymentdetail,
			t1.amttobereleased,
			t1.liabilityholdname,
			t1.transactionref,
			t1.beneficiaryname,
			t1.beneficiaryaccno,
			t1.reenterbeneficiaryaccno,
			t1.description,
			t1.paymenttype,
			t1.llreferenceno,
			t1.lldate,
			t1.custcontribution,
			t1.sellercontribution,
			t1.remarks,
			t1.disbdate,
			t1.disbseq,
			t1.version,
			t1.lastmntby,
			t1.lastmnton,
			t1.recordstatus,
			t1.rolecode,
			t1.nextrolecode,
			t1.taskid,
			t1.nexttaskid,
			t1.recordtype,
			t1.workflowid,
			t1.bankcode,
			t1.payableloc,
			t1.printingloc,
			t1.valuedate,
			t1.bankbranchid,
			t1.phonecountrycode,
			t1.phoneareacode,
			t1.phonenumber,
			t1.clearingdate,
			t1.status,
			t1.active,
			t1.inputdate,
			t1.disbccy,
			t1.poissued,
			t3.bankcode branchbankcode,
			t31.bankname branchbankname,
			t3.branchcode,
			t3.branchdesc,
			t3.ifsc,
			t3.city,
			t4.bankname,
			t1.partnerbankid,
			t5.partnerbankcode,
			t5.partnerbankname,
			t1.linkedtranid,
			t5.actype partnerbankactype,
			t5.accountno partnerbankac,
			t6.branchdesc printinglocdesc,
			t1.rejectreason,
			t1.realizationdate
			FROM finadvancepayments_temp t1
			LEFT JOIN bankbranches t3 ON t1.bankbranchid = t3.bankbranchid
			LEFT JOIN bmtbankdetail t31 ON t31.bankcode = t3.bankcode
			LEFT JOIN bmtbankdetail t4 ON t1.bankcode = t4.bankcode
			LEFT JOIN partnerbanks t5 ON t5.partnerbankid = t1.partnerbankid
			LEFT JOIN bankbranches t6 ON t6.branchcode = t1.printingloc
			UNION ALL
			SELECT t1.finreference,
			t1.paymentid,
			t1.paymentseq,
			t1.paymentdetail,
			t1.amttobereleased,
			t1.liabilityholdname,
			t1.transactionref,
			t1.beneficiaryname,
			t1.beneficiaryaccno,
			t1.reenterbeneficiaryaccno,
			t1.description,
			t1.paymenttype,
			t1.llreferenceno,
			t1.lldate,
			t1.custcontribution,
			t1.sellercontribution,
			t1.remarks,
			t1.disbdate,
			t1.disbseq,
			t1.version,
			t1.lastmntby,
			t1.lastmnton,
			t1.recordstatus,
			t1.rolecode,
			t1.nextrolecode,
			t1.taskid,
			t1.nexttaskid,
			t1.recordtype,
			t1.workflowid,
			t1.bankcode,
			t1.payableloc,
			t1.printingloc,
			t1.valuedate,
			t1.bankbranchid,
			t1.phonecountrycode,
			t1.phoneareacode,
			t1.phonenumber,
			t1.clearingdate,
			t1.status,
			t1.active,
			t1.inputdate,
			t1.disbccy,
			t1.poissued,
			t3.bankcode branchbankcode,
			t31.bankname branchbankname,
			t3.branchcode,
			t3.branchdesc,
			t3.ifsc,
			t3.city,
			t4.bankname,
			t1.partnerbankid,
			t5.partnerbankcode,
			t5.partnerbankname,
			t1.linkedtranid,
			t5.actype partnerbankactype,
			t5.accountno partnerbankac,
			t6.branchdesc printinglocdesc,
			t1.rejectreason,
			t1.realizationdate
			FROM finadvancepayments t1
			LEFT JOIN bankbranches t3 ON t1.bankbranchid = t3.bankbranchid
			LEFT JOIN bmtbankdetail t31 ON t31.bankcode = t3.bankcode
			LEFT JOIN bmtbankdetail t4 ON t1.bankcode = t4.bankcode
			LEFT JOIN partnerbanks t5 ON t5.partnerbankid = t1.partnerbankid
			LEFT JOIN bankbranches t6 ON t6.branchcode = t1.printingloc
			WHERE NOT (EXISTS ( SELECT 1
			FROM finadvancepayments_temp
			WHERE finadvancepayments_temp.finreference = t1.finreference AND finadvancepayments_temp.paymentseq = t1.paymentseq))
			]]>
		</createView>
	</changeSet>

	<changeSet id="506" author="nagaraju.s">
		<sql>
			UPDATE SeqWorkFlowDetails SET SEQNO= (SELECT MAX(WorkflowId)+1
			FROM workflowdetails);
			UPDATE WorkFlowDetails SET
			WorkFlowActive= 0
			where WorkFlowType='CHANGECUSTOMER';
		</sql>
		<insert tableName="WorkFlowDetails">
			<column name="WorkFlowId" valueComputed="(select max(WorkFlowId) + 1 from WorkFlowDetails)" />
			<column name="WorkFlowType">CHANGECUSTOMER</column>
			<column name="WorkFlowSubType">CHANGECUSTOMER</column>
			<column name="WorkFlowDesc">CHANGE CUSTOMER</column>
			<column name="JsonDesign" type="nclob"><![CDATA[NULL]]></column>
			<column name="SvgDesign" type="nclob"><![CDATA[NULL]]></column>
			<column name="WorkFlowXml" type="clob"><![CDATA[NULL]]></column>
			<column name="WorkFlowRoles">CHANGECUSTOMER_MAKER;CHANGECUSTOMER_APPROVER
			</column>
			<column name="FirstTaskOwner">CHANGECUSTOMER_MAKER</column>
			<column name="WorkFlowActive">1</column>
			<column name="Version">0</column>
			<column name="LastMntBy">2457</column>
			<column name="LastMntOn" valueDate="current_timestamp" />
			<column name="RecordStatus">Null</column>
			<column name="RoleCode">Null</column>
			<column name="NextRoleCode">Null</column>
			<column name="TaskId">Null</column>
			<column name="NextTaskId">Null</column>
			<column name="RecordType">NULL</column>
		</insert>
	</changeSet>

	<changeSet id="507" author="nagaraju.s">
		<update tableName="WORKFLOWDETAILS">
			<column name="JSONDESIGN" type="NCLOB"><![CDATA[{"resourceId":1085,"properties":{"process_id":"CHANGECUSTOMER","name":"CHANGECUSTOMER","documentation":"CHANGE CUSTOMER","category":"","listenerclass":"","listenerentitytype":""},"stencil":{"id":"BPMNDiagram"},"childShapes":[{"resourceId":"startEvent1","properties":{"overrideid":"","name":"Start"},"stencil":{"id":"StartNoneEvent"},"childShapes":[],"outgoing":[{"resourceId":"sid-6861496F-5A0F-4B4C-A75E-AD4B5A881F78"}],"bounds":{"lowerRight":{"x":150,"y":190},"upperLeft":{"x":120,"y":160}},"dockers":[]},{"resourceId":"sid-E35ADDDC-B7A9-4300-908C-A94BFAE71398","properties":{"overrideid":"","name":"Approved"},"stencil":{"id":"EndNoneEvent"},"childShapes":[],"outgoing":[],"bounds":{"lowerRight":{"x":1183,"y":178},"upperLeft":{"x":1155,"y":150}},"dockers":[]},{"resourceId":"sid-05AC47A5-3EC2-4AB2-869E-AF32807FDCF5","properties":{"overrideid":"","name":"Change Customer Maker","usertaskassignment":{"assignment":{"type":"idm","idm":{"type":"user","assignee":{"email":"CHANGECUSTOMER_MAKER","firstName":"CHANGECUSTOMER_MAKER","fullName":"CHANGECUSTOMER_MAKER","id":"CHANGECUSTOMER_MAKER","roledesc":"WF for Change customer Maker","$$hashKey":"object:1672"}}}},"additionalforms":"","formkeydefinition":"","prioritydefinition":"Role Queue","baseactor":"","duedatedefinition":"","multiinstance_type":"None","isforcompensation":"false","allowrevert":""},"stencil":{"id":"UserTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-B8860F35-7051-4AFE-8BE8-01A7EFCEC38F"},{"resourceId":"sid-BCCEC665-678F-44E9-8B02-9EAB6A03BA1A"}],"bounds":{"lowerRight":{"x":385,"y":215},"upperLeft":{"x":285,"y":135}},"dockers":[]},{"resourceId":"sid-E99D6642-DF22-456A-842A-F06CC628D5CD","properties":{"overrideid":"","name":"Change Customer Approver","usertaskassignment":{"assignment":{"type":"idm","idm":{"type":"user","assignee":{"email":"CHANGECUSTOMER_APPROVER","firstName":"CHANGECUSTOMER_APPROVER","fullName":"CHANGECUSTOMER_APPROVER","id":"CHANGECUSTOMER_APPROVER","roledesc":"WF for Change customer Approver","$$hashKey":"object:3307"}}}},"additionalforms":"","formkeydefinition":"","prioritydefinition":"Role Queue","baseactor":"","duedatedefinition":"","multiinstance_type":"None","isforcompensation":"false","allowrevert":""},"stencil":{"id":"UserTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-2BF37082-45D0-450F-BA50-0C9F3666BE07"}],"bounds":{"lowerRight":{"x":670,"y":215},"upperLeft":{"x":570,"y":135}},"dockers":[]},{"resourceId":"sid-8C13CB03-D507-4142-87C2-77E8C94DED41","properties":{"overrideid":"","name":"","sequencefloworder":""},"stencil":{"id":"ExclusiveGateway"},"childShapes":[],"outgoing":[{"resourceId":"sid-D21642F9-EC64-4A11-BF0A-71F5327FDFB1"},{"resourceId":"sid-9B85A363-E06F-4F33-9976-9A418248E9D0"},{"resourceId":"sid-64226129-3CA8-4DAD-A157-A2A381696626"}],"bounds":{"lowerRight":{"x":820,"y":195},"upperLeft":{"x":780,"y":155}},"dockers":[]},{"resourceId":"sid-D874E2CE-499D-4DE1-9277-748EFD8EC8C3","properties":{"overrideid":"","name":"Cancel Process","rerunnable":true,"servicetaskexpression":"doReject","isforcompensation":"false","multiinstance_type":"None","parameters":""},"stencil":{"id":"rejectTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-D0EFB4F7-5529-4966-B394-5AD3F51EC6AB"}],"bounds":{"lowerRight":{"x":850,"y":395},"upperLeft":{"x":750,"y":315}},"dockers":[]},{"resourceId":"sid-6861496F-5A0F-4B4C-A75E-AD4B5A881F78","properties":{"overrideid":"","name":"","repruseaction":"false","conditionsequenceflow":"","defaultflow":"false","action":"","state":"","mandatenotes":"false","capturereasons":"false","typeofreason":"","constraint":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-05AC47A5-3EC2-4AB2-869E-AF32807FDCF5"}],"bounds":{"lowerRight":{"x":284.78125,"y":175},"upperLeft":{"x":150.0625,"y":175}},"dockers":[{"x":15,"y":15},{"x":50,"y":40}],"target":{"resourceId":"sid-05AC47A5-3EC2-4AB2-869E-AF32807FDCF5"}},{"resourceId":"sid-2BF37082-45D0-450F-BA50-0C9F3666BE07","properties":{"overrideid":"","name":"","repruseaction":"false","conditionsequenceflow":"","defaultflow":"false","action":"","state":"","mandatenotes":"false","capturereasons":"false","typeofreason":"","constraint":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-8C13CB03-D507-4142-87C2-77E8C94DED41"}],"bounds":{"lowerRight":{"x":780.015625,"y":175},"upperLeft":{"x":670.21875,"y":175}},"dockers":[{"x":50,"y":40},{"x":20,"y":20}],"target":{"resourceId":"sid-8C13CB03-D507-4142-87C2-77E8C94DED41"}},{"resourceId":"sid-C574127E-95CB-44A1-AB6C-5F79CB175041","properties":{"overrideid":"","name":"Rejected"},"stencil":{"id":"EndNoneEvent"},"childShapes":[],"outgoing":[],"bounds":{"lowerRight":{"x":1033,"y":369},"upperLeft":{"x":1005,"y":341}},"dockers":[]},{"resourceId":"sid-FA1A65C8-A47E-4353-91F6-72B50F1AA7CC","properties":{"overrideid":"","name":"","repruseaction":"false","conditionsequenceflow":"","defaultflow":"false","action":"","state":"","mandatenotes":"false","capturereasons":"false","typeofreason":"","showdiamondmarker":false,"constraint":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-E35ADDDC-B7A9-4300-908C-A94BFAE71398"}],"bounds":{"lowerRight":{"x":1154.5234375,"y":175},"upperLeft":{"x":1040.27978515625,"y":164}},"dockers":[{"x":90,"y":48},{"x":1100,"y":175},{"x":1100,"y":164},{"x":14,"y":14}],"target":{"resourceId":"sid-E35ADDDC-B7A9-4300-908C-A94BFAE71398"}},{"resourceId":"sid-D0EFB4F7-5529-4966-B394-5AD3F51EC6AB","properties":{"overrideid":"","name":"","repruseaction":"false","conditionsequenceflow":"","defaultflow":"false","action":"","state":"","mandatenotes":"false","capturereasons":"false","typeofreason":"","constraint":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-C574127E-95CB-44A1-AB6C-5F79CB175041"}],"bounds":{"lowerRight":{"x":1004.3125,"y":355},"upperLeft":{"x":850.6171875,"y":355}},"dockers":[{"x":50,"y":40},{"x":14,"y":14}],"target":{"resourceId":"sid-C574127E-95CB-44A1-AB6C-5F79CB175041"}},{"resourceId":"sid-D21642F9-EC64-4A11-BF0A-71F5327FDFB1","properties":{"overrideid":"","name":"Approve","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus=='Approved'"}},"defaultflow":"false","action":"Approve","state":"Approved","mandatenotes":"false","capturereasons":"false","typeofreason":"","showdiamondmarker":false,"constraint":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-5B384569-ABCC-4EE9-ACF7-5B68A1646513"}],"bounds":{"lowerRight":{"x":938.585205078125,"y":175.5},"upperLeft":{"x":820.40478515625,"y":175.5}},"dockers":[{"x":20.5,"y":20.5},{"x":34,"y":48.5}],"target":{"resourceId":"sid-5B384569-ABCC-4EE9-ACF7-5B68A1646513"}},{"resourceId":"sid-5B384569-ABCC-4EE9-ACF7-5B68A1646513","properties":{"overrideid":"","name":"Complete Process","rerunnable":true,"servicetaskexpression":"doApprove","isforcompensation":"false","multiinstance_type":"None"},"stencil":{"id":"approveTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-FA1A65C8-A47E-4353-91F6-72B50F1AA7CC"}],"bounds":{"lowerRight":{"x":1039.34375,"y":207},"upperLeft":{"x":939.34375,"y":127}},"dockers":[]},{"resourceId":"sid-64226129-3CA8-4DAD-A157-A2A381696626","properties":{"overrideid":"","name":"Resubmit","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus=='Resubmitted'"}},"defaultflow":"false","action":"Resubmit","state":"Resubmitted","mandatenotes":true,"capturereasons":"false","typeofreason":"","showdiamondmarker":false},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-05AC47A5-3EC2-4AB2-869E-AF32807FDCF5"}],"bounds":{"lowerRight":{"x":801.34375,"y":155.00393648558688},"upperLeft":{"x":337.34375,"y":65}},"dockers":[{"x":20.5,"y":20.5},{"x":801.34375,"y":67},{"x":337.34375,"y":65},{"x":52.34375,"y":18.79313243813533}],"target":{"resourceId":"sid-05AC47A5-3EC2-4AB2-869E-AF32807FDCF5"}},{"resourceId":"sid-B8860F35-7051-4AFE-8BE8-01A7EFCEC38F","properties":{"overrideid":"","name":"Submit","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus=='Submitted'"}},"defaultflow":"false","action":"Submit","state":"Submitted","mandatenotes":"false","capturereasons":"false","typeofreason":"","constraint":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-E99D6642-DF22-456A-842A-F06CC628D5CD"}],"bounds":{"lowerRight":{"x":569.458984375,"y":175},"upperLeft":{"x":385.541015625,"y":175}},"dockers":[{"x":50,"y":40},{"x":50,"y":40}],"target":{"resourceId":"sid-E99D6642-DF22-456A-842A-F06CC628D5CD"}},{"resourceId":"sid-BCCEC665-678F-44E9-8B02-9EAB6A03BA1A","properties":{"overrideid":"","name":"Cancel","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Cancelled'"}},"defaultflow":"false","action":"Cancel","state":"Cancelled","mandatenotes":true,"capturereasons":"false","typeofreason":"","showdiamondmarker":false},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-D874E2CE-499D-4DE1-9277-748EFD8EC8C3"}],"bounds":{"lowerRight":{"x":749.0353813171387,"y":358},"upperLeft":{"x":335,"y":215.31640625}},"dockers":[{"x":50,"y":40},{"x":335,"y":358},{"x":27.70440673828125,"y":43}],"target":{"resourceId":"sid-D874E2CE-499D-4DE1-9277-748EFD8EC8C3"}},{"resourceId":"sid-9B85A363-E06F-4F33-9976-9A418248E9D0","properties":{"overrideid":"","name":"Reject","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus=='Rejected'"}},"defaultflow":"false","action":"Reject","state":"Rejected","mandatenotes":true,"capturereasons":"false","typeofreason":"","constraint":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-D874E2CE-499D-4DE1-9277-748EFD8EC8C3"}],"bounds":{"lowerRight":{"x":800.4444801204861,"y":314.73437887952525},"upperLeft":{"x":800.1121605045139,"y":195.43163674547478}},"dockers":[{"x":20.5,"y":20.5},{"x":50,"y":40}],"target":{"resourceId":"sid-D874E2CE-499D-4DE1-9277-748EFD8EC8C3"}}],"bounds":{"lowerRight":{"x":1283,"y":1050},"upperLeft":{"x":0,"y":0}},"stencilset":{"url":"stencilsets/bpmn2.0/bpmn2.0.json","namespace":"http://b3mn.org/stencilset/bpmn2.0#"},"ssextensions":[]}]]></column>
			<column name="WORKFLOWXML" type="CLOB"><![CDATA[<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:activiti="http://activiti.org/bpmn" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI" typeLanguage="http://www.w3.org/2001/XMLSchema" expressionLanguage="http://www.w3.org/1999/XPath" targetNamespace="http://activiti.org/test">
  <process id="CHANGECUSTOMER" name="CHANGECUSTOMER" isExecutable="true">
    <documentation>CHANGE CUSTOMER</documentation>
    <startEvent id="startEvent1" name="Start"/>
    <endEvent id="sid-E35ADDDC-B7A9-4300-908C-A94BFAE71398" name="Approved"/>
    <userTask id="sid-05AC47A5-3EC2-4AB2-869E-AF32807FDCF5" name="Change Customer Maker" activiti:actor="CHANGECUSTOMER_MAKER" activiti:assignmentLevel="Role Queue"/>
    <userTask id="sid-E99D6642-DF22-456A-842A-F06CC628D5CD" name="Change Customer Approver" activiti:actor="CHANGECUSTOMER_APPROVER" activiti:assignmentLevel="Role Queue"/>
    <exclusiveGateway id="sid-8C13CB03-D507-4142-87C2-77E8C94DED41"/>
    <serviceTask id="sid-D874E2CE-499D-4DE1-9277-748EFD8EC8C3" name="Cancel Process" activiti:operation="doReject" activiti:rerunnable="true"/>
    <sequenceFlow id="sid-6861496F-5A0F-4B4C-A75E-AD4B5A881F78" sourceRef="startEvent1" targetRef="sid-05AC47A5-3EC2-4AB2-869E-AF32807FDCF5" representsUserAction="false" mandateNotes="false" captureReasons="false"/>
    <sequenceFlow id="sid-2BF37082-45D0-450F-BA50-0C9F3666BE07" sourceRef="sid-E99D6642-DF22-456A-842A-F06CC628D5CD" targetRef="sid-8C13CB03-D507-4142-87C2-77E8C94DED41" representsUserAction="false" mandateNotes="false" captureReasons="false"/>
    <endEvent id="sid-C574127E-95CB-44A1-AB6C-5F79CB175041" name="Rejected"/>
    <sequenceFlow id="sid-FA1A65C8-A47E-4353-91F6-72B50F1AA7CC" sourceRef="sid-5B384569-ABCC-4EE9-ACF7-5B68A1646513" targetRef="sid-E35ADDDC-B7A9-4300-908C-A94BFAE71398" representsUserAction="false" mandateNotes="false" captureReasons="false"/>
    <sequenceFlow id="sid-D0EFB4F7-5529-4966-B394-5AD3F51EC6AB" sourceRef="sid-D874E2CE-499D-4DE1-9277-748EFD8EC8C3" targetRef="sid-C574127E-95CB-44A1-AB6C-5F79CB175041" representsUserAction="false" mandateNotes="false" captureReasons="false"/>
    <sequenceFlow id="sid-D21642F9-EC64-4A11-BF0A-71F5327FDFB1" name="Approve" sourceRef="sid-8C13CB03-D507-4142-87C2-77E8C94DED41" targetRef="sid-5B384569-ABCC-4EE9-ACF7-5B68A1646513" action="Approve" state="Approved" representsUserAction="true" mandateNotes="false" captureReasons="false">
      <conditionExpression xsi:type="tFormalExpression">vo.recordStatus=='Approved'></conditionExpression>
    </sequenceFlow>
    <serviceTask id="sid-5B384569-ABCC-4EE9-ACF7-5B68A1646513" name="Complete Process" activiti:operation="doApprove" activiti:rerunnable="true"/>
    <sequenceFlow id="sid-64226129-3CA8-4DAD-A157-A2A381696626" name="Resubmit" sourceRef="sid-8C13CB03-D507-4142-87C2-77E8C94DED41" targetRef="sid-05AC47A5-3EC2-4AB2-869E-AF32807FDCF5" action="Resubmit" state="Resubmitted" representsUserAction="true" mandateNotes="true" captureReasons="false">
      <conditionExpression xsi:type="tFormalExpression">vo.recordStatus=='Resubmitted'></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-B8860F35-7051-4AFE-8BE8-01A7EFCEC38F" name="Submit" sourceRef="sid-05AC47A5-3EC2-4AB2-869E-AF32807FDCF5" targetRef="sid-E99D6642-DF22-456A-842A-F06CC628D5CD" action="Submit" state="Submitted" representsUserAction="true" mandateNotes="false" captureReasons="false">
      <conditionExpression xsi:type="tFormalExpression">vo.recordStatus=='Submitted'></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-BCCEC665-678F-44E9-8B02-9EAB6A03BA1A" name="Cancel" sourceRef="sid-05AC47A5-3EC2-4AB2-869E-AF32807FDCF5" targetRef="sid-D874E2CE-499D-4DE1-9277-748EFD8EC8C3" action="Cancel" state="Cancelled" representsUserAction="true" mandateNotes="true" captureReasons="false">
      <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Cancelled'></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-9B85A363-E06F-4F33-9976-9A418248E9D0" name="Reject" sourceRef="sid-8C13CB03-D507-4142-87C2-77E8C94DED41" targetRef="sid-D874E2CE-499D-4DE1-9277-748EFD8EC8C3" action="Reject" state="Rejected" representsUserAction="true" mandateNotes="true" captureReasons="false">
      <conditionExpression xsi:type="tFormalExpression">vo.recordStatus=='Rejected'></conditionExpression>
    </sequenceFlow>
  </process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_CHANGECUSTOMER">
    <bpmndi:BPMNPlane bpmnElement="CHANGECUSTOMER" id="BPMNPlane_CHANGECUSTOMER">
      <bpmndi:BPMNShape bpmnElement="startEvent1" id="BPMNShape_startEvent1">
        <omgdc:Bounds height="30.0" width="30.0" x="120.0" y="160.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-E35ADDDC-B7A9-4300-908C-A94BFAE71398" id="BPMNShape_sid-E35ADDDC-B7A9-4300-908C-A94BFAE71398">
        <omgdc:Bounds height="28.0" width="28.0" x="1155.0" y="150.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-05AC47A5-3EC2-4AB2-869E-AF32807FDCF5" id="BPMNShape_sid-05AC47A5-3EC2-4AB2-869E-AF32807FDCF5">
        <omgdc:Bounds height="80.0" width="100.0" x="285.0" y="135.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-E99D6642-DF22-456A-842A-F06CC628D5CD" id="BPMNShape_sid-E99D6642-DF22-456A-842A-F06CC628D5CD">
        <omgdc:Bounds height="80.0" width="100.0" x="570.0" y="135.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-8C13CB03-D507-4142-87C2-77E8C94DED41" id="BPMNShape_sid-8C13CB03-D507-4142-87C2-77E8C94DED41">
        <omgdc:Bounds height="40.0" width="40.0" x="780.0" y="155.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-D874E2CE-499D-4DE1-9277-748EFD8EC8C3" id="BPMNShape_sid-D874E2CE-499D-4DE1-9277-748EFD8EC8C3">
        <omgdc:Bounds height="80.0" width="100.0" x="750.0" y="315.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-C574127E-95CB-44A1-AB6C-5F79CB175041" id="BPMNShape_sid-C574127E-95CB-44A1-AB6C-5F79CB175041">
        <omgdc:Bounds height="28.0" width="28.0" x="1005.0" y="341.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-5B384569-ABCC-4EE9-ACF7-5B68A1646513" id="BPMNShape_sid-5B384569-ABCC-4EE9-ACF7-5B68A1646513">
        <omgdc:Bounds height="80.0" width="100.0" x="939.34375" y="127.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge bpmnElement="sid-2BF37082-45D0-450F-BA50-0C9F3666BE07" id="BPMNEdge_sid-2BF37082-45D0-450F-BA50-0C9F3666BE07">
        <omgdi:waypoint x="670.0" y="175.0"/>
        <omgdi:waypoint x="780.0" y="175.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-64226129-3CA8-4DAD-A157-A2A381696626" id="BPMNEdge_sid-64226129-3CA8-4DAD-A157-A2A381696626">
        <omgdi:waypoint x="800.6543298085168" y="155.6543298085167"/>
        <omgdi:waypoint x="801.34375" y="67.0"/>
        <omgdi:waypoint x="337.34375" y="65.0"/>
        <omgdi:waypoint x="337.34375" y="135.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-6861496F-5A0F-4B4C-A75E-AD4B5A881F78" id="BPMNEdge_sid-6861496F-5A0F-4B4C-A75E-AD4B5A881F78">
        <omgdi:waypoint x="150.0" y="175.0"/>
        <omgdi:waypoint x="285.0" y="175.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-D0EFB4F7-5529-4966-B394-5AD3F51EC6AB" id="BPMNEdge_sid-D0EFB4F7-5529-4966-B394-5AD3F51EC6AB">
        <omgdi:waypoint x="850.0" y="355.0"/>
        <omgdi:waypoint x="1005.0" y="355.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-BCCEC665-678F-44E9-8B02-9EAB6A03BA1A" id="BPMNEdge_sid-BCCEC665-678F-44E9-8B02-9EAB6A03BA1A">
        <omgdi:waypoint x="335.0" y="215.0"/>
        <omgdi:waypoint x="335.0" y="358.0"/>
        <omgdi:waypoint x="750.0" y="358.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-FA1A65C8-A47E-4353-91F6-72B50F1AA7CC" id="BPMNEdge_sid-FA1A65C8-A47E-4353-91F6-72B50F1AA7CC">
        <omgdi:waypoint x="1039.34375" y="175.0"/>
        <omgdi:waypoint x="1100.0" y="175.0"/>
        <omgdi:waypoint x="1100.0" y="164.0"/>
        <omgdi:waypoint x="1155.0" y="164.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-9B85A363-E06F-4F33-9976-9A418248E9D0" id="BPMNEdge_sid-9B85A363-E06F-4F33-9976-9A418248E9D0">
        <omgdi:waypoint x="800.4469273743017" y="194.55307262569832"/>
        <omgdi:waypoint x="800.1114206128134" y="315.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-D21642F9-EC64-4A11-BF0A-71F5327FDFB1" id="BPMNEdge_sid-D21642F9-EC64-4A11-BF0A-71F5327FDFB1">
        <omgdi:waypoint x="819.5" y="175.5"/>
        <omgdi:waypoint x="939.34375" y="175.5"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-B8860F35-7051-4AFE-8BE8-01A7EFCEC38F" id="BPMNEdge_sid-B8860F35-7051-4AFE-8BE8-01A7EFCEC38F">
        <omgdi:waypoint x="385.0" y="175.0"/>
        <omgdi:waypoint x="570.0" y="175.0"/>
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</definitions>]]></column>
			<where>workflowtype='CHANGECUSTOMER' and workflowactive=1
			</where>
		</update>
		<sql>
			UPDATE SeqWorkFlowDetails SET SEQNO= (SELECT MAX(WorkflowId)+1
			FROM workflowdetails);
		</sql>
	</changeSet>

	<changeSet id="507" author="sudheer.t">
		<sql>
			<![CDATA[
				  delete from DedupFields where QueryModule='CORPBlackList' and fieldName ='CustFName';
				  delete from DedupFields where QueryModule='CORPBlackList' and fieldName ='CustLName';
				  
				  delete from DedupFields where QueryModule='SMEBlackList' and fieldName ='CustFName';
				  delete from DedupFields where QueryModule='SMEBlackList' and fieldName ='CustLName';
				                
	              delete from DedupFields where QueryModule='SMEBlackList' and fieldName ='CustShrtName';
	              delete from DedupFields where QueryModule='CORPBlackList' and fieldName ='CustShrtName';
	              
	              delete from DedupFields where QueryModule='SMEBlackList' and fieldName ='CustDOB';
	              delete from DedupFields where QueryModule='CORPBlackList' and fieldName ='CustDOB';
	              
	              delete from DedupFields where QueryModule='SMEBlackList' and fieldName ='MobileNumber';
	              delete from DedupFields where QueryModule='CORPBlackList' and fieldName ='MobileNumber';
	              
	              delete from DedupFields where QueryModule='SMEBlackList' and fieldName ='CustCRCPR';
	              delete from DedupFields where QueryModule='CORPBlackList' and fieldName ='CustCRCPR';
	                            
	              INSERT INTO DedupFields  (FieldName, FieldDesc, FieldControl, QueryModule, Version, LastMntBy, LastMntOn ,RecordStatus, RoleCode, NextRoleCode, TaskId, NextTaskId, RecordType, WorkflowId) VALUES ('CustShrtName', 'Company Name', 'varchar', 'SMEBlackList', 1, 1000,CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
	              INSERT INTO DedupFields  (FieldName, FieldDesc, FieldControl, QueryModule, Version, LastMntBy, LastMntOn ,RecordStatus, RoleCode, NextRoleCode, TaskId, NextTaskId, RecordType, WorkflowId) VALUES ('CustShrtName', 'Company Name', 'varchar', 'CORPBlackList', 1, 1000,CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
	              
	              INSERT INTO DedupFields  (FieldName, FieldDesc, FieldControl, QueryModule, Version, LastMntBy, LastMntOn ,RecordStatus, RoleCode, NextRoleCode, TaskId, NextTaskId, RecordType, WorkflowId) VALUES ('CustDOB', 'Date of Incorporation', 'varchar', 'SMEBlackList', 1, 1000,CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
	              INSERT INTO DedupFields  (FieldName, FieldDesc, FieldControl, QueryModule, Version, LastMntBy, LastMntOn ,RecordStatus, RoleCode, NextRoleCode, TaskId, NextTaskId, RecordType, WorkflowId) VALUES ('CustDOB', 'Date of Incorporation', 'varchar', 'CORPBlackList', 1, 1000,CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
	              
	              INSERT INTO DedupFields  (FieldName, FieldDesc, FieldControl, QueryModule, Version, LastMntBy, LastMntOn ,RecordStatus, RoleCode, NextRoleCode, TaskId, NextTaskId, RecordType, WorkflowId) VALUES ('MobileNumber', 'Phone Number', 'varchar', 'SMEBlackList', 1, 1000,CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
	              INSERT INTO DedupFields  (FieldName, FieldDesc, FieldControl, QueryModule, Version, LastMntBy, LastMntOn ,RecordStatus, RoleCode, NextRoleCode, TaskId, NextTaskId, RecordType, WorkflowId) VALUES ('MobileNumber', 'Phone Number', 'varchar', 'CORPBlackList', 1, 1000,CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
	              
	              INSERT INTO DedupFields  (FieldName, FieldDesc, FieldControl, QueryModule, Version, LastMntBy, LastMntOn ,RecordStatus, RoleCode, NextRoleCode, TaskId, NextTaskId, RecordType, WorkflowId) VALUES ('CustCRCPR', 'PAN Number', 'varchar', 'SMEBlackList', 1, 1000,CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
	              INSERT INTO DedupFields  (FieldName, FieldDesc, FieldControl, QueryModule, Version, LastMntBy, LastMntOn ,RecordStatus, RoleCode, NextRoleCode, TaskId, NextTaskId, RecordType, WorkflowId) VALUES ('CustCRCPR', 'PAN Number', 'varchar', 'CORPBlackList', 1, 1000,CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);                
			]]>
		</sql>
	</changeSet>
	<changeSet id="508" author="manoj.p">
		<addColumn tableName="CREDITREVIEWCONFIG">
			<column name="FieldKeys" type="blob" />
		</addColumn>
	</changeSet>

	<changeSet id="509" author="murthy">
		<sql>
            <![CDATA[
            	DELETE FROM RBFIELDDETAILS WHERE RBMODULE = 'FEES' AND RBEVENT = 'ADDDBSP' AND RBFLDNAME = 'fm_eligibilityMethod';
				INSERT INTO RBFieldDetails values  ('FEES', 'ADDDBSP', 'fm_eligibilityMethod', 'Eligibility Method [ADDDBSP]', 'bigint', 0, 1, 1, 'RMTLovFieldDetail', 'dbvalue', 'EligibilityMethod');
	  		 ]]>
		</sql>
	</changeSet>

	<changeSet id="510.1" author="vijaya.a">
		<createView viewName="VERIFICATION_FI_VIEW" replaceIfExists="true">
		<![CDATA[
			SELECT fi.verificationid,
			flv.finType,
			fi.agentcode,
			fi.agentname,
			fi.type,
			fi.verifieddate,
			fi.status,
			fi.reason,
			r1.code AS reasoncode,
			r1.description AS reasondesc,
			fi.summaryremarks,
			fi.version,
			fi.lastmntby,
			fi.lastmnton,
			fi.recordstatus,
			fi.rolecode,
			fi.nextrolecode,
			fi.taskid,
			fi.nexttaskid,
			fi.recordtype,
			fi.workflowid,
			fi.addresstype,
			c.custShrtName As name,
			fi.housenumber,
			fi.flatnumber,
			fi.street,
			fi.addressline1,
			fi.addressline2,
			fi.addressline3,
			fi.addressline4,
			fi.addressline5,
			fi.country,
			fi.province,
			fi.city,
			fi.contactnumber1,
			fi.contactnumber2,
			fi.pobox,
			fi.zipcode,
			fi.ownershipstatus,
			fi.yearsatpresentaddress,
			fi.personmet,
			fi.relationship,
			r2.prelationdesc AS lovrelationdesc,
			fi.contactnumber,
			fi.neighbourhoodfeedback,
			fi.livingstandard,
			fi.negativecheck,
			fi.noofattempts,
			fi.observationremarks,
			c.custcif AS cif,
			v.custid,
			v.keyreference,
			v.createdon,
			v.agency,
			v.verificationdate,
			a.dealername AS agencyname,
			v.reinitid,
			a.dealertype,
			r1.reasontypecode,
			country.countrydesc,
			p.cpprovincename as provinceDesc,
			city.pccityname as cityDesc
			FROM verification_fi_temp fi
			JOIN verifications v ON v.id = fi.verificationid
			left join amtvehicledealer a ON a.dealerid = v.agency
			JOIN bmtcountries country on country.countrycode = fi.country
			JOIN RMTCountryVsProvince p on p.cpprovince = fi.province
			JOIN RMTProvinceVsCity city on city.pccity = fi.city
			LEFT JOIN customers c ON c.custCif = v.Reference
			LEFT JOIN reasons_aview r1 ON r1.id = fi.reason
			LEFT JOIN bmtprelationcodes r2 ON r2.prelationcode = fi.relationship
			LEFT JOIN financemain_view flv ON flv.finreference = v.keyreference
			UNION ALL
			SELECT fi.verificationid,
			flv.finType,
			fi.agentcode,
			fi.agentname,
			fi.type,
			fi.verifieddate,
			fi.status,
			fi.reason,
			r1.code AS reasoncode,
			r1.description AS reasondesc,
			fi.summaryremarks,
			fi.version,
			fi.lastmntby,
			fi.lastmnton,
			fi.recordstatus,
			fi.rolecode,
			fi.nextrolecode,
			fi.taskid,
			fi.nexttaskid,
			fi.recordtype,
			fi.workflowid,
			fi.addresstype,
			c.custShrtName As name,
			fi.housenumber,
			fi.flatnumber,
			fi.street,
			fi.addressline1,
			fi.addressline2,
			fi.addressline3,
			fi.addressline4,
			fi.addressline5,
			fi.country,
			fi.province,
			fi.city,
			fi.contactnumber1,
			fi.contactnumber2,
			fi.pobox,
			fi.zipcode,
			fi.ownershipstatus,
			fi.yearsatpresentaddress,
			fi.personmet,
			fi.relationship,
			r2.prelationdesc AS lovrelationdesc,
			fi.contactnumber,
			fi.neighbourhoodfeedback,
			fi.livingstandard,
			fi.negativecheck,
			fi.noofattempts,
			fi.observationremarks,
			c.custcif AS cif,
			v.custid,
			v.keyreference,
			v.createdon,
			v.agency,
			v.verificationdate,
			a.dealername AS agencyname,
			v.reinitid,
			a.dealertype,
			r1.reasontypecode,
			country.countrydesc,
			p.cpprovincename as provinceDesc,
			city.pccityname as cityDesc
			FROM verification_fi fi
			JOIN verifications v ON v.id = fi.verificationid
			left join amtvehicledealer a ON a.dealerid = v.agency
			JOIN bmtcountries country on country.countrycode = fi.country
			JOIN RMTCountryVsProvince p on p.cpprovince = fi.province
			JOIN RMTProvinceVsCity city on city.pccity = fi.city
			LEFT JOIN customers c ON c.custCif = v.Reference
			LEFT JOIN reasons_aview r1 ON r1.id = fi.reason
			LEFT JOIN bmtprelationcodes r2 ON r2.prelationcode = fi.relationship
			LEFT JOIN financemain_view flv ON flv.finreference = v.keyreference
			WHERE NOT (EXISTS ( SELECT 1
			FROM verification_fi_temp
			WHERE verification_fi_temp.verificationid = fi.verificationid))
			]]>
		</createView>
	</changeSet>

	<changeSet id="511" author="saiteja.r" dbms="postgresql,mssql">
		<modifyDataType tableName="creditreviewconfig" columnName="fieldkeys" newDataType="clob" />
	</changeSet>

	<changeSet id="511.1_pre" author="saiteja.r" dbms="oracle">
		<sql>
			alter table creditreviewconfig drop column fieldkeys;
		</sql>
	</changeSet>


	<changeSet id="511.2" author="saiteja.r" dbms="oracle">
		<sql>
			alter table creditreviewconfig add fieldkeys clob;
		</sql>
	</changeSet>

	<changeSet id="512" author="Manoj.P">
		<sql>
			<![CDATA[
				delete from smtparameters where sysparmcode = 'CREDITREVIEW_TAB';
				INSERT INTO SMTparameters (SysParmCode, SysParmDesc, SysParmType, SysParmMaint, SysParmValue, SysParmLength, SysParmDec,SysParmList, SysParmValdMod, SysParmDescription, Version, LastMntBy, LastMntOn, RecordStatus, RoleCode, NextRoleCode, TaskId, NexttaskId, RecordType, WorkflowId) VALUES ('CREDITREVIEW_TAB', 'Credit Review Tab', 'String', '0', 'OLDCREDITREVIEWTAB', 50, 0, NULL, NULL, '', 1, 1000, CURRENT_TIMESTAMP,'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="513.1" author="vijaya.a">
		<createView viewName="FINRECEIPTHEADER_FCVIEW" replaceIfExists="true">
		<![CDATA[
			SELECT T1.RECEIPTID,
			T1.RECEIPTDATE,
			T1.RECEIPTTYPE,
			T1.RECAGAINST,
			T1.REFERENCE,
			T1.RECEIPTPURPOSE,
			T1.RECEIPTMODE,
			T1.EXCESSADJUSTTO,
			T1.ALLOCATIONTYPE,
			T1.RECEIPTAMOUNT,
			T1.EFFECTSCHDMETHOD,
			T1.RECEIPTMODESTATUS,
			T1.SUBRECEIPTMODE,
			T1.RECEIPTCHANNEL,
			T1.RECEIVEDFROM,
			T1.PANNUMBER,
			T1.COLLECTIONAGENTID,
			T1.VERSION,
			T1.LASTMNTBY,
			T1.LASTMNTON,
			T1.RECORDSTATUS,
			T1.ROLECODE,
			T1.NEXTROLECODE,
			T1.TASKID,
			T1.NEXTTASKID,
			T1.RECORDTYPE,
			T1.WORKFLOWID,
			T2.FINTYPE,
			T2.FINBRANCH,
			T3.CUSTCIF,
			T3.CUSTSHRTNAME,
			T2.FINCCY,
			T1.REALIZATIONDATE,
			T1.CANCELREASON,
			T4.FINTYPEDESC,
			T6.BRANCHDESC FINBRANCHDESC,
			T5.CCYDESC FINCCYDESC,
			T7.REJECTDESC CANCELREASONDESC,
			COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
			T2.SCHEDULEMETHOD,
			T2.PROFITDAYSBASIS PFTDAYSBASIS,
			T1.WAVIEDAMT,
			COALESCE(T3.CUSTID, 0) CUSTID,
			T1.TOTFEEAMOUNT,
			T1.BOUNCEDATE,
			T1.REMARKS,
			T1.RCDMAINTAINSTS,
			T1.DEPOSITPROCESS,
			T1.DEPOSITBRANCH,
			T1.LPIAMOUNT,
			T1.LPPAMOUNT,
			T1.GSTLPIAMOUNT,
			T1.GSTLPPAMOUNT,
			T1.GDRAVAILABLE,
			T1.RELEASETYPE,
			T1.THIRDPARTYNAME,
			T1.THIRDPARTYMOBILENUM,
			T2.PRODUCTCATEGORY,
			T2.PROMOTIONCODE,
			(
			CASE
			WHEN T8.PAYMENTTYPE IN ('CHEQUE', 'DD')
			THEN T8.FAVOURNUMBER
			ELSE T8.TRANSACTIONREF
			END ) TRANSACTIONREF,
			T2.NEXTREPAYRVWDATE,
			T1.CASHIERBRANCH,
			T1.INITIATEDATE,
			T1.INSTRUCTIONUID,
			T1.FINDIVISION,
			T1.POSTBRANCH,
			T10.DIVISIONCODEDESC FINDIVISIONDESC,
			T11.BRANCHDESC POSTBRANCHDESC,
			T12.BRANCHDESC CASHIERBRANCHDESC,
			T10.ENTITYCODE,
			T9.CODE COLLECTIONAGENTCODE,
			T9.DESCRIPTION COLLECTIONAGENTDESC,
			T1.MODULE,
			T1.EXTREFERENCE,
			T13.CUSTCIF CUSTOMERCIF,
			T13.CUSTSHRTNAME CUSTOMERNAME,
			T1.ACTFINRECEIPT,
			T1.EARLYSETTLEMENTREASON
			FROM FINRECEIPTHEADER_TEMP T1
			LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.REFERENCE = T2.FINREFERENCE
			LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
			LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
			LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
			LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
			LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
			LEFT JOIN FINRECEIPTDETAIL T8 ON T1.RECEIPTID = T8.RECEIPTID AND T1.RECEIPTMODE = T8.PAYMENTTYPE
			LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
			LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
			LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
			LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
			LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
			UNION ALL
			SELECT
			T1.RECEIPTID,
			T1.RECEIPTDATE,
			T1.RECEIPTTYPE,
			T1.RECAGAINST,
			T1.REFERENCE,
			T1.RECEIPTPURPOSE,
			T1.RECEIPTMODE,
			T1.EXCESSADJUSTTO,
			T1.ALLOCATIONTYPE,
			T1.RECEIPTAMOUNT,
			T1.EFFECTSCHDMETHOD,
			T1.RECEIPTMODESTATUS,
			T1.SUBRECEIPTMODE,
			T1.RECEIPTCHANNEL,
			T1.RECEIVEDFROM,
			T1.PANNUMBER,
			T1.COLLECTIONAGENTID,
			T1.VERSION,
			T1.LASTMNTBY,
			T1.LASTMNTON,
			T1.RECORDSTATUS,
			T1.ROLECODE,
			T1.NEXTROLECODE,
			T1.TASKID,
			T1.NEXTTASKID,
			T1.RECORDTYPE,
			T1.WORKFLOWID,
			T2.FINTYPE,
			T2.FINBRANCH,
			T3.CUSTCIF,
			T3.CUSTSHRTNAME,
			T2.FINCCY,
			T1.REALIZATIONDATE,
			T1.CANCELREASON,
			T4.FINTYPEDESC,
			T6.BRANCHDESC FINBRANCHDESC,
			T5.CCYDESC FINCCYDESC,
			T7.REJECTDESC CANCELREASONDESC,
			COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
			T2.SCHEDULEMETHOD,
			T2.PROFITDAYSBASIS PFTDAYSBASIS,
			T1.WAVIEDAMT,
			COALESCE(T3.CUSTID, 0) CUSTID,
			T1.TOTFEEAMOUNT,
			T1.BOUNCEDATE,
			T1.REMARKS,
			T1.RCDMAINTAINSTS,
			T1.DEPOSITPROCESS,
			T1.DEPOSITBRANCH,
			T1.LPIAMOUNT,
			T1.LPPAMOUNT,
			T1.GSTLPIAMOUNT,
			T1.GSTLPPAMOUNT,
			T1.GDRAVAILABLE,
			T1.RELEASETYPE,
			T1.THIRDPARTYNAME,
			T1.THIRDPARTYMOBILENUM,
			T2.PRODUCTCATEGORY,
			T2.PROMOTIONCODE,
			(
			CASE
			WHEN T8.PAYMENTTYPE IN ('CHEQUE', 'DD')
			THEN T8.FAVOURNUMBER
			ELSE T8.TRANSACTIONREF
			END) TRANSACTIONREF,
			T2.NEXTREPAYRVWDATE,
			T1.CASHIERBRANCH,
			T1.INITIATEDATE,
			T1.INSTRUCTIONUID,
			T1.FINDIVISION,
			T1.POSTBRANCH,
			T10.DIVISIONCODEDESC FINDIVISIONDESC,
			T11.BRANCHDESC POSTBRANCHDESC,
			T12.BRANCHDESC CASHIERBRANCHDESC,
			T10.ENTITYCODE,
			T9.CODE COLLECTIONAGENTCODE,
			T9.DESCRIPTION COLLECTIONAGENTDESC,
			T1.MODULE,
			T1.EXTREFERENCE,
			T13.CUSTCIF CUSTOMERCIF,
			T13.CUSTSHRTNAME CUSTOMERNAME,
			T1.ACTFINRECEIPT,
			T1.EARLYSETTLEMENTREASON
			FROM FINRECEIPTHEADER T1
			LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.REFERENCE = T2.FINREFERENCE
			LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
			LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
			LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
			LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
			LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
			LEFT JOIN FINRECEIPTDETAIL T8 ON T1.RECEIPTID = T8.RECEIPTID AND T1.RECEIPTMODE = T8.PAYMENTTYPE
			LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
			LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
			LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
			LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
			LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
			WHERE NOT EXISTS
			( SELECT 1 FROM FINRECEIPTHEADER_TEMP WHERE RECEIPTID = T1.RECEIPTID
			)
			]]>
		</createView>
	</changeSet>

	<changeSet id="514" author="Saikrishna.K">
		<createTable tableName="CUST_KYC_VALIDATION">
			<column name="ID" type="bigint" autoIncrement="true" />
			<column name="TYPE" type="varchar(250)" />
			<column name="DOCUMENT_NUMBER" type="varchar(250)" />
			<column name="DOCUMENT_NAME" type="varchar(250)" />
			<column name="ISSUED_COUNTRY" type="varchar(3)" />
			<column name="ISSUED_AUTHORITY" type="varchar(250)" />
			<column name="ISSUED_ON" type="datetime" />
			<column name="EXPIRY_DATE" type="datetime" />
			<column name="VERIFICATION_ON" type="datetime" />
			<column name="VERIFIED" type="boolean" />
			<column name="REMARKS" type="varchar(500)" />
		</createTable>
	</changeSet>

	<changeSet id="514.1.1_post" author="Saikrishna.K">
		<sql>
			<![CDATA[
				UPDATE CUST_KYC_VALIDATION set VERIFIED = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="514.1_post" author="Varaprasad.K" dbms="postgresql, oracle">
		<addDefaultValue columnName="VERIFIED" tableName="CUST_KYC_VALIDATION" defaultValue="0" />
	</changeSet>

	<changeSet id="514.1_post" author="Saikrishna.K" dbms="mssql">
		<sql>
			<![CDATA[	
				alter table CUST_KYC_VALIDATION add constraint DF_CUST_KYC_VALIDATION_VERIFED DEFAULT 0 for VERIFIED;
			]]>
		</sql>
	</changeSet>

	<changeSet id="515" author="Saikrishna.K">
		<addUniqueConstraint columnNames="ID,TYPE,VERIFIED" constraintName="CUST_KYC_VALIDATION_ID"
			tableName="CUST_KYC_VALIDATION" />
	</changeSet>

	<changeSet id="518_pre" author="vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="516" author="vijaya.a">
		<renameColumn tableName="FINRECEIPTHEADER" oldColumnName="EARLYSETTLEMENTREASON" newColumnName="REASONCODE" />
	</changeSet>

	<changeSet id="517" author="vijaya.a">
		<renameColumn tableName="FINRECEIPTHEADER_TEMP" oldColumnName="EARLYSETTLEMENTREASON" newColumnName="REASONCODE" />
	</changeSet>

	<changeSet id="518" author="vijaya.a">
		<createView viewName="FINRECEIPTHEADER_VIEW" replaceIfExists="true">
			<![CDATA[
			SELECT 
				T1.RECEIPTID,
			    T1.RECEIPTDATE,
			    T1.RECEIPTTYPE,
			    T1.RECAGAINST,
			    T1.REFERENCE,
			    T1.RECEIPTPURPOSE,
			    T1.RECEIPTMODE,
			    T1.EXCESSADJUSTTO,
			    T1.ALLOCATIONTYPE,
			    T1.RECEIPTAMOUNT,
			    T1.EFFECTSCHDMETHOD,
			    T1.EXTREFERENCE,
			    T1.MODULE,
			    T1.RECEIPTMODESTATUS,
			    T1.SUBRECEIPTMODE,
			    T1.RECEIPTCHANNEL,
			    T1.RECEIVEDFROM,
			    T1.PANNUMBER,
			    T1.COLLECTIONAGENTID,
			    T9.CODE COLLECTIONAGENTCODE,
			    T9.DESCRIPTION COLLECTIONAGENTDESC,
			    T1.VERSION,
			    T1.LASTMNTBY,
			    T1.LASTMNTON,
			    T1.RECORDSTATUS,
			    T1.ROLECODE,
			    T1.NEXTROLECODE,
			    T1.TASKID,
			    T1.NEXTTASKID,
			    T1.RECORDTYPE,
			    T1.WORKFLOWID,
			    T2.FINTYPE,
			    T2.FINBRANCH,
			    T3.CUSTCIF,
			    T3.CUSTSHRTNAME,
			    T2.FINCCY,
			    T1.REALIZATIONDATE,
			    T1.CANCELREASON,
			    T4.FINTYPEDESC,
			    T6.BRANCHDESC FINBRANCHDESC,
			    T5.CCYDESC FINCCYDESC,
			    T7.REJECTDESC CANCELREASONDESC,
			    T2.FINISACTIVE,
			    T1.WAVIEDAMT,
			    T1.TOTFEEAMOUNT,
			    T1.BOUNCEDATE,
			    T1.REMARKS,
			    T1.RCDMAINTAINSTS,
			    T1.GDRAVAILABLE,
			    T1.RELEASETYPE,
			    T1.THIRDPARTYNAME,
			    T1.THIRDPARTYMOBILENUM,
			    T1.DEPOSITPROCESS,
			    T1.DEPOSITBRANCH,
			    T1.LPIAMOUNT,
			    T1.LPPAMOUNT,
			    T1.GSTLPIAMOUNT,
			    T1.GSTLPPAMOUNT,
			        CASE
			            WHEN T8.PAYMENTTYPE in ('CHEQUE', 'DD') THEN T8.FAVOURNUMBER
			            ELSE T8.TRANSACTIONREF
			        END AS TRANSACTIONREF,
			    T2.PRODUCTCATEGORY,
			    T2.PROMOTIONCODE,
			    T2.NEXTREPAYRVWDATE,
			    T1.CASHIERBRANCH,
			    T1.INITIATEDATE,
			    T1.INSTRUCTIONUID,
			    T1.FINDIVISION,
			    T1.POSTBRANCH,
			    T10.DIVISIONCODEDESC FINDIVISIONDESC,
			    T11.BRANCHDESC POSTBRANCHDESC,
			    T12.BRANCHDESC CASHIERBRANCHDESC,
			    T10.ENTITYCODE,
			    T1.ACTFINRECEIPT,
				T1.REASONCODE
			   FROM FINRECEIPTHEADER_TEMP T1
			     JOIN FINANCEMAIN T2 ON T1.REFERENCE = T2.FINREFERENCE
			     JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
			     JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
			     JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
			     JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
			     LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
			     LEFT JOIN FINRECEIPTDETAIL T8 ON T1.RECEIPTID = T8.RECEIPTID AND T1.RECEIPTMODE = T8.PAYMENTTYPE
			     LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
			     LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
			     LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
			     LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
			UNION ALL
			 SELECT T1.RECEIPTID,
			    T1.RECEIPTDATE,
			    T1.RECEIPTTYPE,
			    T1.RECAGAINST,
			    T1.REFERENCE,
			    T1.RECEIPTPURPOSE,
			    T1.RECEIPTMODE,
			    T1.EXCESSADJUSTTO,
			    T1.ALLOCATIONTYPE,
			    T1.RECEIPTAMOUNT,
			    T1.EFFECTSCHDMETHOD,
			    T1.EXTREFERENCE,
			    T1.MODULE,
			    T1.RECEIPTMODESTATUS,
			    T1.SUBRECEIPTMODE,
			    T1.RECEIPTCHANNEL,
			    T1.RECEIVEDFROM,
			    T1.PANNUMBER,
			    T1.COLLECTIONAGENTID,
			    T9.CODE COLLECTIONAGENTCODE,
			    T9.DESCRIPTION COLLECTIONAGENTDESC,
			    T1.VERSION,
			    T1.LASTMNTBY,
			    T1.LASTMNTON,
			    T1.RECORDSTATUS,
			    T1.ROLECODE,
			    T1.NEXTROLECODE,
			    T1.TASKID,
			    T1.NEXTTASKID,
			    T1.RECORDTYPE,
			    T1.WORKFLOWID,
			    T2.FINTYPE,
			    T2.FINBRANCH,
			    T3.CUSTCIF,
			    T3.CUSTSHRTNAME,
			    T2.FINCCY,
			    T1.REALIZATIONDATE,
			    T1.CANCELREASON,
			    T4.FINTYPEDESC,
			    T6.BRANCHDESC FINBRANCHDESC,
			    T5.CCYDESC FINCCYDESC,
			    T7.REJECTDESC CANCELREASONDESC,
			    T2.FINISACTIVE,
			    T1.WAVIEDAMT,
			    T1.TOTFEEAMOUNT,
			    T1.BOUNCEDATE,
			    T1.REMARKS,
			    T1.RCDMAINTAINSTS,
			    T1.GDRAVAILABLE,
			    T1.RELEASETYPE,
			    T1.THIRDPARTYNAME,
			    T1.THIRDPARTYMOBILENUM,
			    T1.DEPOSITPROCESS,
			    T1.DEPOSITBRANCH,
			    T1.LPIAMOUNT,
			    T1.LPPAMOUNT,
			    T1.GSTLPIAMOUNT,
			    T1.GSTLPPAMOUNT,
			        CASE
			            WHEN T8.PAYMENTTYPE in ('CHEQUE', 'DD') THEN T8.FAVOURNUMBER
			            ELSE T8.TRANSACTIONREF
			        END AS TRANSACTIONREF,
			    T2.PRODUCTCATEGORY,
			    T2.PROMOTIONCODE,
			    T2.NEXTREPAYRVWDATE,
			    T1.CASHIERBRANCH,
			    T1.INITIATEDATE,
			    T1.INSTRUCTIONUID,
			    T1.FINDIVISION,
			    T1.POSTBRANCH,
			    T10.DIVISIONCODEDESC FINDIVISIONDESC,
			    T11.BRANCHDESC POSTBRANCHDESC,
			    T12.BRANCHDESC CASHIERBRANCHDESC,
			    T10.ENTITYCODE,
			    T1.ACTFINRECEIPT,
				T1.REASONCODE
			   FROM FINRECEIPTHEADER T1
			     JOIN FINANCEMAIN T2 ON T1.REFERENCE = T2.FINREFERENCE
			     JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
			     JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
			     JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
			     JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
			     LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
			     LEFT JOIN FINRECEIPTDETAIL T8 ON T1.RECEIPTID = T8.RECEIPTID AND T1.RECEIPTMODE = T8.PAYMENTTYPE
			     LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
			     LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
			     LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
			     LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
			  WHERE NOT (EXISTS ( SELECT 1
			           FROM FINRECEIPTHEADER_TEMP
			          WHERE FINRECEIPTHEADER_TEMP.RECEIPTID = T1.RECEIPTID))
			          ]]>
		</createView>
	</changeSet>

	<changeSet id="518_post" author="vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="519_pre" author="vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_fview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="519" author="vijaya.a">
		<createView viewName="FINRECEIPTHEADER_FVIEW" replaceIfExists="true">
			<![CDATA[
			  SELECT  T1.RECEIPTID,
					  T1.RECEIPTDATE,
					  T1.RECEIPTTYPE,
					  t1.actfinreceipt,
					  T1.RECAGAINST,
					  T1.REFERENCE,
					  T1.RECEIPTPURPOSE,
					  T1.RECEIPTMODE,
					  T1.EXCESSADJUSTTO,
					  T1.ALLOCATIONTYPE,
					  T1.RECEIPTAMOUNT,
					  T1.EFFECTSCHDMETHOD,
					  T1.RECEIPTMODESTATUS,
					  T1.SUBRECEIPTMODE,
					  T1.RECEIPTCHANNEL,
					  T1.RECEIVEDFROM,
					  T1.PANNUMBER,
					  T1.COLLECTIONAGENTID,
					  T1.VERSION,
					  T1.LASTMNTBY,
					  T1.LASTMNTON,
					  T1.RECORDSTATUS,
					  T1.ROLECODE,
					  T1.NEXTROLECODE,
					  T1.TASKID,
					  T1.NEXTTASKID,
					  T1.RECORDTYPE,
					  T1.WORKFLOWID,
					  T2.FINTYPE,
					  T2.FINBRANCH,
					  T3.CUSTCIF,
					  T3.CUSTSHRTNAME,
					  T2.FINCCY,
					  T1.REALIZATIONDATE,
					  T1.CANCELREASON,
					  T4.FINTYPEDESC,
					  T6.BRANCHDESC FINBRANCHDESC,
					  T5.CCYDESC FINCCYDESC,
					  T7.REJECTDESC CANCELREASONDESC,
					  COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
					  T2.SCHEDULEMETHOD,
					  T2.PROFITDAYSBASIS PFTDAYSBASIS,
					  T1.WAVIEDAMT,
					  COALESCE(T3.CUSTID, 0) CUSTID,
					  T1.TOTFEEAMOUNT,
					  T1.BOUNCEDATE,
					  T1.REMARKS,
					  T1.RCDMAINTAINSTS,
					  T1.DEPOSITPROCESS,
					  T1.DEPOSITBRANCH,
					  T1.LPIAMOUNT,
					  T1.LPPAMOUNT,
					  T1.GSTLPIAMOUNT,
					  T1.GSTLPPAMOUNT,
					  T1.GDRAVAILABLE,
					  T1.RELEASETYPE,
					  T1.THIRDPARTYNAME,
					  T1.THIRDPARTYMOBILENUM,
					  T2.PRODUCTCATEGORY,
					  T2.PROMOTIONCODE,
					  (
					  CASE
					    WHEN T8.PAYMENTTYPE IN ('CHEQUE', 'DD')
					    THEN T8.FAVOURNUMBER
					    ELSE T8.TRANSACTIONREF
					  END) TRANSACTIONREF,
					  T1.CASHIERBRANCH,
					  T2.NEXTREPAYRVWDATE,
					  T1.INITIATEDATE,
					  T9.CODE COLLECTIONAGENTCODE,
					  T9.DESCRIPTION COLLECTIONAGENTDESC,
					  T1.MODULE,
					  T1.INSTRUCTIONUID,
					  T1.EXTREFERENCE,
					  T10.CUSTCIF CustomerCif,
					  T10.CustShrtName CustomerName,
					  T1.FINDIVISION,
					  T1.PostBranch,
					  T11.DIVISIONCODEDesc FinDivisionDesc,
					  T12.BRANCHDESC PostBranchDesc,
					  T13.BRANCHDESC CashierBranchDesc,
					  T11.EntityCode,
					  T3.CustBaseCcy,
					  T1.REASONCODE
					FROM FINRECEIPTHEADER_TEMP T1
					LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.REFERENCE = T2.FINREFERENCE
					LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
					LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
					LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
					LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
					LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
					LEFT JOIN FINRECEIPTDETAIL T8 ON T1.RECEIPTID = T8.RECEIPTID AND T1.RECEIPTMODE = T8.PAYMENTTYPE 
					LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
					LEFT JOIN Customers T10 ON CAST(T10.CustId AS VARCHAR(20)) = T1.REFERENCE
					LEFT JOIN SMTDIVISIONDETAIL T11 ON T1.FINDIVISION = T11.DIVISIONCODE
					LEFT JOIN RMTBranches T12 ON T1.PostBranch = T12.BranchCode
					LEFT JOIN RMTBranches T13 ON T1.CASHIERBRANCH = T13.BranchCode
					LEFT JOIN RMTCURRENCIES T14 ON T14.CCYCODE= T3.CustBaseCcy
					]]>
		</createView>
	</changeSet>

	<changeSet id="519_post" author="vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader_fview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="520_pre" author="vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_feview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="520" author="vijaya.a">
		<createView viewName="FINRECEIPTHEADER_FEVIEW" replaceIfExists="true">
		<![CDATA[
			SELECT T1.RECEIPTID,
				T1.RECEIPTDATE,
				T1.RECEIPTTYPE,
				T1.RECAGAINST,
				T1.REFERENCE,
				T1.RECEIPTPURPOSE,
				T1.RECEIPTMODE,
				T1.EXCESSADJUSTTO,
				T1.ALLOCATIONTYPE,
				T1.RECEIPTAMOUNT,
				T1.EFFECTSCHDMETHOD,
				T1.RECEIPTMODESTATUS,
				T1.VERSION,
				T1.LASTMNTBY,
				T1.LASTMNTON,
				T1.RECORDSTATUS,
				T1.ROLECODE,
				T1.NEXTROLECODE,
				T1.TASKID,
				T1.NEXTTASKID,
				T1.RECORDTYPE,
				T1.WORKFLOWID,
				T2.FINTYPE,
				T2.FINBRANCH,
				T3.CUSTCIF,
				T3.CUSTSHRTNAME,
				T2.FINCCY,
				T1.REALIZATIONDATE,
				T1.CANCELREASON,
				T4.FINTYPEDESC,
				T6.BRANCHDESC FINBRANCHDESC,
				T5.CCYDESC FINCCYDESC,
				T7.REJECTDESC CANCELREASONDESC,
				COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
				T2.SCHEDULEMETHOD,
				T2.PROFITDAYSBASIS PFTDAYSBASIS,
				T1.WAVIEDAMT,
				COALESCE(T3.CUSTID, 0) CUSTID,
				T1.TOTFEEAMOUNT,
				T1.BOUNCEDATE,
				T1.REMARKS,
				T1.RCDMAINTAINSTS,
				T1.DEPOSITPROCESS,
				T1.DEPOSITBRANCH,
				T1.LPIAMOUNT,
				T1.LPPAMOUNT,
				T1.GSTLPIAMOUNT,
				T1.GSTLPPAMOUNT,
				T1.GDRAVAILABLE,
				T1.RELEASETYPE,
				T1.THIRDPARTYNAME,
				T1.THIRDPARTYMOBILENUM,
				T2.PRODUCTCATEGORY,
				T2.PROMOTIONCODE,
				T2.NEXTREPAYRVWDATE,
				(
				CASE
				WHEN T8.PAYMENTTYPE IN ('CHEQUE', 'DD')
				THEN T8.FAVOURNUMBER
				ELSE T8.TRANSACTIONREF
				END) TRANSACTIONREF,
				T1.CASHIERBRANCH,
				T1.INITIATEDATE,
				T4.FINDIVISION LOVDESCFINDIVISION,
				T2.BUSINESSVERTICAL,
				T1.FINDIVISION,
				T1.POSTBRANCH,
				T10.DIVISIONCODEDESC FINDIVISIONDESC,
				T11.BRANCHDESC POSTBRANCHDESC,
				T12.BRANCHDESC CASHIERBRANCHDESC,
				T10.ENTITYCODE,
				T9.CODE COLLECTIONAGENTCODE,
				T9.DESCRIPTION COLLECTIONAGENTDESC,
				T1.INSTRUCTIONUID,
				T1.MODULE,
				T1.EXTREFERENCE,
				T1.COLLECTIONAGENTID,
				T1.PANNUMBER,
				T1.RECEIVEDFROM,
				T1.RECEIPTCHANNEL,
				T1.SUBRECEIPTMODE,
				T13.CUSTCIF CUSTOMERCIF,
				T13.CUSTSHRTNAME CUSTOMERNAME,
				T1.ACTFINRECEIPT,
				T1.REASONCODE
				FROM FINRECEIPTHEADER_TEMP T1
				LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.REFERENCE = T2.FINREFERENCE
				LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN FINRECEIPTDETAIL T8 ON T1.RECEIPTID = T8.RECEIPTID AND T1.RECEIPTMODE = T8.PAYMENTTYPE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
				UNION ALL
				SELECT T1.RECEIPTID,
				T1.RECEIPTDATE,
				T1.RECEIPTTYPE,
				T1.RECAGAINST,
				T1.REFERENCE,
				T1.RECEIPTPURPOSE,
				T1.RECEIPTMODE,
				T1.EXCESSADJUSTTO,
				T1.ALLOCATIONTYPE,
				T1.RECEIPTAMOUNT,
				T1.EFFECTSCHDMETHOD,
				T1.RECEIPTMODESTATUS,
				T1.VERSION,
				T1.LASTMNTBY,
				T1.LASTMNTON,
				T1.RECORDSTATUS,
				T1.ROLECODE,
				T1.NEXTROLECODE,
				T1.TASKID,
				T1.NEXTTASKID,
				T1.RECORDTYPE,
				T1.WORKFLOWID,
				T2.FINTYPE,
				T2.FINBRANCH,
				T3.CUSTCIF,
				T3.CUSTSHRTNAME,
				T2.FINCCY,
				T1.REALIZATIONDATE,
				T1.CANCELREASON,
				T4.FINTYPEDESC,
				T6.BRANCHDESC FINBRANCHDESC,
				T5.CCYDESC FINCCYDESC,
				T7.REJECTDESC CANCELREASONDESC,
				COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
				T2.SCHEDULEMETHOD,
				T2.PROFITDAYSBASIS PFTDAYSBASIS,
				T1.WAVIEDAMT,
				COALESCE(T3.CUSTID, 0) CUSTID,
				T1.TOTFEEAMOUNT,
				T1.BOUNCEDATE,
				T1.REMARKS,
				T1.RCDMAINTAINSTS,
				T1.DEPOSITPROCESS,
				T1.DEPOSITBRANCH,
				T1.LPIAMOUNT,
				T1.LPPAMOUNT,
				T1.GSTLPIAMOUNT,
				T1.GSTLPPAMOUNT,
				T1.GDRAVAILABLE,
				T1.RELEASETYPE,
				T1.THIRDPARTYNAME,
				T1.THIRDPARTYMOBILENUM,
				T2.PRODUCTCATEGORY,
				T2.PROMOTIONCODE,
				T2.NEXTREPAYRVWDATE,
				(
				CASE
				WHEN T8.PAYMENTTYPE IN ('CHEQUE', 'DD')
				THEN T8.FAVOURNUMBER
				ELSE T8.TRANSACTIONREF
				END) TRANSACTIONREF,
				T1.CASHIERBRANCH,
				T1.INITIATEDATE,
				T4.FINDIVISION LOVDESCFINDIVISION,
				T2.BUSINESSVERTICAL,
				T1.FINDIVISION,
				T1.POSTBRANCH,
				T10.DIVISIONCODEDESC FINDIVISIONDESC,
				T11.BRANCHDESC POSTBRANCHDESC,
				T12.BRANCHDESC CASHIERBRANCHDESC,
				T10.ENTITYCODE,
				T9.CODE COLLECTIONAGENTCODE,
				T9.DESCRIPTION COLLECTIONAGENTDESC,
				T1.INSTRUCTIONUID,
				T1.MODULE,
				T1.EXTREFERENCE,
				T1.COLLECTIONAGENTID,
				T1.PANNUMBER,
				T1.RECEIVEDFROM,
				T1.RECEIPTCHANNEL,
				T1.SUBRECEIPTMODE,
				T13.CUSTCIF CUSTOMERCIF,
				T13.CUSTSHRTNAME CUSTOMERNAME,
				T1.ACTFINRECEIPT,
				T1.REASONCODE
				FROM FINRECEIPTHEADER T1
				LEFT JOIN
				(SELECT FINREFERENCE,
				FINBRANCH,
				FINTYPE,
				FINCCY,
				SCHEDULEMETHOD,
				PROFITDAYSBASIS,
				FINISACTIVE,
				CUSTID,
				PRODUCTCATEGORY,
				PROMOTIONCODE,
				NEXTREPAYRVWDATE,
				BUSINESSVERTICAL
				FROM FINANCEMAIN_TEMP
				UNION
				SELECT FINREFERENCE,
				FINBRANCH,
				FINTYPE,
				FINCCY,
				SCHEDULEMETHOD,
				PROFITDAYSBASIS,
				FINISACTIVE,
				CUSTID,
				PRODUCTCATEGORY,
				PROMOTIONCODE,
				NEXTREPAYRVWDATE,
				BUSINESSVERTICAL
				FROM FINANCEMAIN
				) T2 ON T1.REFERENCE = T2.FINREFERENCE
				LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN FINRECEIPTDETAIL T8 ON T1.RECEIPTID = T8.RECEIPTID AND T1.RECEIPTMODE = T8.PAYMENTTYPE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
				WHERE NOT EXISTS
				( SELECT 1 FROM FINRECEIPTHEADER_TEMP WHERE RECEIPTID = T1.RECEIPTID
				)
				]]>
		</createView>
	</changeSet>

	<changeSet id="520_post" author="vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader_feview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="521_pre" author="vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_fcview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="521" author="vijaya.a">
		<createView viewName="FINRECEIPTHEADER_FCVIEW" replaceIfExists="true">
			<![CDATA[
			SELECT T1.RECEIPTID,
			T1.RECEIPTDATE,
			T1.RECEIPTTYPE,
			T1.RECAGAINST,
			T1.REFERENCE,
			T1.RECEIPTPURPOSE,
			T1.RECEIPTMODE,
			T1.EXCESSADJUSTTO,
			T1.ALLOCATIONTYPE,
			T1.RECEIPTAMOUNT,
			T1.EFFECTSCHDMETHOD,
			T1.RECEIPTMODESTATUS,
			T1.SUBRECEIPTMODE,
			T1.RECEIPTCHANNEL,
			T1.RECEIVEDFROM,
			T1.PANNUMBER,
			T1.COLLECTIONAGENTID,
			T1.VERSION,
			T1.LASTMNTBY,
			T1.LASTMNTON,
			T1.RECORDSTATUS,
			T1.ROLECODE,
			T1.NEXTROLECODE,
			T1.TASKID,
			T1.NEXTTASKID,
			T1.RECORDTYPE,
			T1.WORKFLOWID,
			T2.FINTYPE,
			T2.FINBRANCH,
			T3.CUSTCIF,
			T3.CUSTSHRTNAME,
			T2.FINCCY,
			T1.REALIZATIONDATE,
			T1.CANCELREASON,
			T4.FINTYPEDESC,
			T6.BRANCHDESC FINBRANCHDESC,
			T5.CCYDESC FINCCYDESC,
			T7.REJECTDESC CANCELREASONDESC,
			COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
			T2.SCHEDULEMETHOD,
			T2.PROFITDAYSBASIS PFTDAYSBASIS,
			T1.WAVIEDAMT,
			COALESCE(T3.CUSTID, 0) CUSTID,
			T1.TOTFEEAMOUNT,
			T1.BOUNCEDATE,
			T1.REMARKS,
			T1.RCDMAINTAINSTS,
			T1.DEPOSITPROCESS,
			T1.DEPOSITBRANCH,
			T1.LPIAMOUNT,
			T1.LPPAMOUNT,
			T1.GSTLPIAMOUNT,
			T1.GSTLPPAMOUNT,
			T1.GDRAVAILABLE,
			T1.RELEASETYPE,
			T1.THIRDPARTYNAME,
			T1.THIRDPARTYMOBILENUM,
			T2.PRODUCTCATEGORY,
			T2.PROMOTIONCODE,
			(
			CASE
			WHEN T8.PAYMENTTYPE IN ('CHEQUE', 'DD')
			THEN T8.FAVOURNUMBER
			ELSE T8.TRANSACTIONREF
			END ) TRANSACTIONREF,
			T2.NEXTREPAYRVWDATE,
			T1.CASHIERBRANCH,
			T1.INITIATEDATE,
			T1.INSTRUCTIONUID,
			T1.FINDIVISION,
			T1.POSTBRANCH,
			T10.DIVISIONCODEDESC FINDIVISIONDESC,
			T11.BRANCHDESC POSTBRANCHDESC,
			T12.BRANCHDESC CASHIERBRANCHDESC,
			T10.ENTITYCODE,
			T9.CODE COLLECTIONAGENTCODE,
			T9.DESCRIPTION COLLECTIONAGENTDESC,
			T1.MODULE,
			T1.EXTREFERENCE,
			T13.CUSTCIF CUSTOMERCIF,
			T13.CUSTSHRTNAME CUSTOMERNAME,
			T1.ACTFINRECEIPT,
			T1.REASONCODE
			FROM FINRECEIPTHEADER_TEMP T1
			LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.REFERENCE = T2.FINREFERENCE
			LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
			LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
			LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
			LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
			LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
			LEFT JOIN FINRECEIPTDETAIL T8 ON T1.RECEIPTID = T8.RECEIPTID AND T1.RECEIPTMODE = T8.PAYMENTTYPE
			LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
			LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
			LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
			LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
			LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
			UNION ALL
			SELECT
			T1.RECEIPTID,
			T1.RECEIPTDATE,
			T1.RECEIPTTYPE,
			T1.RECAGAINST,
			T1.REFERENCE,
			T1.RECEIPTPURPOSE,
			T1.RECEIPTMODE,
			T1.EXCESSADJUSTTO,
			T1.ALLOCATIONTYPE,
			T1.RECEIPTAMOUNT,
			T1.EFFECTSCHDMETHOD,
			T1.RECEIPTMODESTATUS,
			T1.SUBRECEIPTMODE,
			T1.RECEIPTCHANNEL,
			T1.RECEIVEDFROM,
			T1.PANNUMBER,
			T1.COLLECTIONAGENTID,
			T1.VERSION,
			T1.LASTMNTBY,
			T1.LASTMNTON,
			T1.RECORDSTATUS,
			T1.ROLECODE,
			T1.NEXTROLECODE,
			T1.TASKID,
			T1.NEXTTASKID,
			T1.RECORDTYPE,
			T1.WORKFLOWID,
			T2.FINTYPE,
			T2.FINBRANCH,
			T3.CUSTCIF,
			T3.CUSTSHRTNAME,
			T2.FINCCY,
			T1.REALIZATIONDATE,
			T1.CANCELREASON,
			T4.FINTYPEDESC,
			T6.BRANCHDESC FINBRANCHDESC,
			T5.CCYDESC FINCCYDESC,
			T7.REJECTDESC CANCELREASONDESC,
			COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
			T2.SCHEDULEMETHOD,
			T2.PROFITDAYSBASIS PFTDAYSBASIS,
			T1.WAVIEDAMT,
			COALESCE(T3.CUSTID, 0) CUSTID,
			T1.TOTFEEAMOUNT,
			T1.BOUNCEDATE,
			T1.REMARKS,
			T1.RCDMAINTAINSTS,
			T1.DEPOSITPROCESS,
			T1.DEPOSITBRANCH,
			T1.LPIAMOUNT,
			T1.LPPAMOUNT,
			T1.GSTLPIAMOUNT,
			T1.GSTLPPAMOUNT,
			T1.GDRAVAILABLE,
			T1.RELEASETYPE,
			T1.THIRDPARTYNAME,
			T1.THIRDPARTYMOBILENUM,
			T2.PRODUCTCATEGORY,
			T2.PROMOTIONCODE,
			(
			CASE
			WHEN T8.PAYMENTTYPE IN ('CHEQUE', 'DD')
			THEN T8.FAVOURNUMBER
			ELSE T8.TRANSACTIONREF
			END) TRANSACTIONREF,
			T2.NEXTREPAYRVWDATE,
			T1.CASHIERBRANCH,
			T1.INITIATEDATE,
			T1.INSTRUCTIONUID,
			T1.FINDIVISION,
			T1.POSTBRANCH,
			T10.DIVISIONCODEDESC FINDIVISIONDESC,
			T11.BRANCHDESC POSTBRANCHDESC,
			T12.BRANCHDESC CASHIERBRANCHDESC,
			T10.ENTITYCODE,
			T9.CODE COLLECTIONAGENTCODE,
			T9.DESCRIPTION COLLECTIONAGENTDESC,
			T1.MODULE,
			T1.EXTREFERENCE,
			T13.CUSTCIF CUSTOMERCIF,
			T13.CUSTSHRTNAME CUSTOMERNAME,
			T1.ACTFINRECEIPT,
			T1.REASONCODE
			FROM FINRECEIPTHEADER T1
			LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.REFERENCE = T2.FINREFERENCE
			LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
			LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
			LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
			LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
			LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
			LEFT JOIN FINRECEIPTDETAIL T8 ON T1.RECEIPTID = T8.RECEIPTID AND T1.RECEIPTMODE = T8.PAYMENTTYPE
			LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
			LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
			LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
			LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
			LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
			WHERE NOT EXISTS
			( SELECT 1 FROM FINRECEIPTHEADER_TEMP WHERE RECEIPTID = T1.RECEIPTID
			)
			]]>
		</createView>
	</changeSet>

	<changeSet id="521_post" author="vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader_fcview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="522" author="vijaya.a">
		<sql>
			<![CDATA[
				DELETE FROM ReasonTypes where code='FC';
				INSERT INTO ReasonTypes (id, code, description,  Version , LastMntBy, LastMntOn, RecordStatus, RoleCode, NextRoleCode, TaskId,NextTaskId, RecordType, WorkflowId) values ((SELECT max(seqno+1) FROM SEQREASONTYPES), 'FCREASON', 'ForeClosure',  1 , 1000, current_timestamp,'Approved', '', '', '', '','', 0);
				UPDATE SEQREASONTYPES set SeqNo = (SELECT max(Id)+1 FROM REASONTYPES);
			]]>
		</sql>
	</changeSet>

	<changeSet id="523" author="vijaya.a">
		<sql>
			<![CDATA[
				DELETE FROM ReasonTypes where code='CLOSURE';
				INSERT INTO ReasonTypes (id, code, description,  Version , LastMntBy, LastMntOn, RecordStatus, RoleCode, NextRoleCode, TaskId,NextTaskId, RecordType, WorkflowId) values ((SELECT max(seqno+1) FROM SEQREASONTYPES), 'CLOSURE', 'Closure Reason',  1 , 1000, current_timestamp,'Approved', '', '', '', '','', 0);
				UPDATE SEQREASONTYPES set SeqNo = (SELECT max(Id)+1 FROM REASONTYPES);
			]]>
		</sql>
	</changeSet>

	<changeSet id="524_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'findisbursementdetails_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="524.0" author="satyanarayana.g">
		<createView viewName="FINDISBURSEMENTDETAILS_VIEW" replaceIfExists="true">
			<![CDATA[
				 SELECT T1.FINREFERENCE,
						    T1.DISBDATE,
						    T1.DISBSEQ,
						    T1.DISBDESC,
						    T1.DISBACCOUNTID,
						    T1.DISBAMOUNT,
						    T1.DISBREQDATE,
						    T1.DISBDISBURSED,
						    T1.DISBISACTIVE,
						    T1.DISBREMARKS,
						    T1.VERSION,
						    T1.LASTMNTBY,
						    T1.LASTMNTON,
						    T1.RECORDSTATUS,
						    T1.ROLECODE,
						    T1.NEXTROLECODE,
						    T1.TASKID,
						    T1.NEXTTASKID,
						    T1.RECORDTYPE,
						    T1.WORKFLOWID,
						    T1.FEECHARGEAMT,
						    T1.DISBSTATUS,
						    T1.DISBTYPE,
						    T1.DISBCLAIM,
						    T1.DISBEXPTYPE,
						    T1.DISBRETPERC,
						    T1.DISBRETAMOUNT,
						    T1.AUTODISB,
						    T1.NETADVDUE,
						    T1.NETRETDUE,
						    T1.DISBRETPAID,
						    T1.RETPAIDDATE,
						    T2.EXPENCETYPENAME AS LOVDESCDISBEXPTYPE,
						    T1.CONSULTFEEFRQ,
						    T1.CONSULTFEESTARTDATE,
						    T1.CONSULTFEEENDDATE,
						    T1.CONTRACTORID,
						    T1.INSURANCEAMT,
						    T1.INSTRUCTIONUID,
							T1.QUICKDISB
						   FROM FINDISBURSEMENTDETAILS_TEMP T1
						     LEFT JOIN AMTEXPENSETYPE T2 ON T2.EXPENCETYPEID = T1.DISBEXPTYPE
						UNION ALL
						 SELECT T1.FINREFERENCE,
						    T1.DISBDATE,
						    T1.DISBSEQ,
						    T1.DISBDESC,
						    T1.DISBACCOUNTID,
						    T1.DISBAMOUNT,
						    T1.DISBREQDATE,
						    T1.DISBDISBURSED,
						    T1.DISBISACTIVE,
						    T1.DISBREMARKS,
						    T1.VERSION,
						    T1.LASTMNTBY,
						    T1.LASTMNTON,
						    T1.RECORDSTATUS,
						    T1.ROLECODE,
						    T1.NEXTROLECODE,
						    T1.TASKID,
						    T1.NEXTTASKID,
						    T1.RECORDTYPE,
						    T1.WORKFLOWID,
						    T1.FEECHARGEAMT,
						    T1.DISBSTATUS,
						    T1.DISBTYPE,
						    T1.DISBCLAIM,
						    T1.DISBEXPTYPE,
						    T1.DISBRETPERC,
						    T1.DISBRETAMOUNT,
						    T1.AUTODISB,
						    T1.NETADVDUE,
						    T1.NETRETDUE,
						    T1.DISBRETPAID,
						    T1.RETPAIDDATE,
						    T2.EXPENCETYPENAME AS LOVDESCDISBEXPTYPE,
						    T1.CONSULTFEEFRQ,
						    T1.CONSULTFEESTARTDATE,
						    T1.CONSULTFEEENDDATE,
						    T1.CONTRACTORID,
						    T1.INSURANCEAMT,
						    T1.INSTRUCTIONUID,
							T1.QUICKDISB
						   FROM FINDISBURSEMENTDETAILS T1
						     LEFT JOIN AMTEXPENSETYPE T2 ON T2.EXPENCETYPEID = T1.DISBEXPTYPE
						  WHERE NOT (EXISTS ( SELECT 1
						   FROM FINDISBURSEMENTDETAILS_TEMP
						   WHERE FINDISBURSEMENTDETAILS_TEMP.FINREFERENCE = T1.FINREFERENCE))
				]]>
		</createView>
	</changeSet>

	<changeSet id="524_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'findisbursementdetails_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="525" author="Varaprasad.K">
		<addColumn tableName="external_liabilities">
			<column name="ImputedEmi" type="decimal(18,0)" defaultValue="0" />
		</addColumn>
	</changeSet>

	<changeSet id="526" author="Varaprasad.K">
		<addColumn tableName="external_liabilities">
			<column name="OwnerShip" type="varchar(50)" />
		</addColumn>
	</changeSet>

	<changeSet id="527" author="Varaprasad.K">
		<addColumn tableName="external_liabilities">
			<column name="lastTwentyFourMonths" type="boolean" defaultValue="0" />
		</addColumn>
	</changeSet>

	<changeSet id="528" author="Varaprasad.K">
		<addColumn tableName="external_liabilities">
			<column name="lastSixMonths" type="boolean" defaultValue="0" />
		</addColumn>
	</changeSet>

	<changeSet id="529" author="Varaprasad.K">
		<addColumn tableName="external_liabilities">
			<column name="lastThreeMonths" type="boolean" defaultValue="0" />
		</addColumn>
	</changeSet>

	<changeSet id="530" author="Varaprasad.K">
		<addColumn tableName="external_liabilities">
			<column name="CurrentOverDue" type="decimal(18,0)" defaultValue="0" />
		</addColumn>
	</changeSet>


	<changeSet id="531" author="Varaprasad.K">
		<addColumn tableName="external_liabilities_temp">
			<column name="ImputedEmi" type="decimal(18,0)" defaultValue="0" />
		</addColumn>
	</changeSet>

	<changeSet id="532" author="Varaprasad.K">
		<addColumn tableName="external_liabilities_temp">
			<column name="OwnerShip" type="varchar(50)" />
		</addColumn>
	</changeSet>

	<changeSet id="533" author="Varaprasad.K">
		<addColumn tableName="external_liabilities_temp">
			<column name="lastTwentyFourMonths" type="boolean" defaultValue="0" />
		</addColumn>
	</changeSet>

	<changeSet id="534" author="Varaprasad.K">
		<addColumn tableName="external_liabilities_temp">
			<column name="lastSixMonths" type="boolean" defaultValue="0" />
		</addColumn>
	</changeSet>

	<changeSet id="535" author="Varaprasad.K">
		<addColumn tableName="external_liabilities_temp">
			<column name="lastThreeMonths" type="boolean" defaultValue="0" />
		</addColumn>
	</changeSet>

	<changeSet id="536" author="Varaprasad.K">
		<addColumn tableName="external_liabilities_temp">
			<column name="CurrentOverDue" type="decimal(18,0)" defaultValue="0" />
		</addColumn>
	</changeSet>

	<changeSet id="537" author="Varaprasad.K">
		<sql>
			<![CDATA[
			    UPDATE external_liabilities 	 Set lastTwentyFourMonths = 0;
				UPDATE external_liabilities 	 Set lastSixMonths = 0;
				UPDATE external_liabilities 	 Set lastThreeMonths = 0;
				UPDATE external_liabilities_temp Set lastTwentyFourMonths = 0;
				UPDATE external_liabilities_temp Set lastSixMonths = 0;
				UPDATE external_liabilities_temp Set lastThreeMonths = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="540" author="Varaprasad.K">
		<addNotNullConstraint tableName="external_liabilities" columnName="lastTwentyFourMonths"
			columnDataType="boolean" />
		<addNotNullConstraint tableName="external_liabilities" columnName="lastSixMonths" columnDataType="boolean" />
		<addNotNullConstraint tableName="external_liabilities" columnName="lastThreeMonths"
			columnDataType="boolean" />
		<addNotNullConstraint tableName="external_liabilities_temp" columnName="lastTwentyFourMonths"
			columnDataType="boolean" />
		<addNotNullConstraint tableName="external_liabilities_temp" columnName="lastSixMonths"
			columnDataType="boolean" />
		<addNotNullConstraint tableName="external_liabilities_temp" columnName="lastThreeMonths"
			columnDataType="boolean" />
	</changeSet>

	<changeSet id="541" author="Varaprasad.K">
		<createView viewName="customer_ext_liabilities_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT 	el.id,
					    el.linkid,
					    el.seqno,
					    el.fintype,
					    el.findate,
					    el.loanbank,
					    el.rateofinterest,
					    el.tenure,
					    el.originalamount,
					    el.instalmentamount,
					    el.outstandingbalance,
					    el.balancetenure,
					    el.bounceinstalments,
					    el.principaloutstanding,
					    el.overdueamount,
					    el.finstatus,
					    el.foir,
					    el.source,
					    el.checkedby,
					    el.securitydetails,
					    el.loanpurpose,
					    el.repaybank,
					    el.version,
					    el.lastmntby,
					    el.lastmnton,
					    el.recordstatus,
					    el.rolecode,
					    el.nextrolecode,
					    el.taskid,
					    el.nexttaskid,
					    el.recordtype,
					    el.workflowid,
					    lb.bankname AS loanbankname,
					    ft.fintypedesc,
					    cs.custstsdescription,
					    rb.bankname AS repayfrombankname,
					    lp.loanpurposedesc,
					    el.otherfininstitute,
					    el.baltransfer,
					    cu.custid,
					    cu.custcif,
					    cu.custshrtname,
					    el.imputedEmi,
					    el.ownerShip,
					    el.lastTwentyFourMonths,
					    el.lastSixMonths,
					    el.lastThreeMonths,
					    el.currentOverDue
					   FROM external_liabilities_temp el
					     JOIN link_cust_liabilities cl ON cl.linkid = el.linkid
					     JOIN bmtbankdetail lb ON lb.bankcode = el.loanbank
					     JOIN otherbankfinancetype ft ON ft.fintype = el.fintype
					     LEFT JOIN loanpurposes lp ON lp.loanpurposecode = el.loanpurpose
					     LEFT JOIN bmtbankdetail rb ON rb.bankcode = el.repaybank
					     LEFT JOIN bmtcuststatuscodes cs ON cs.custstscode = el.finstatus
					     JOIN ( SELECT customers.custid,
					            customers.custcif,
					            customers.custshrtname
					            FROM customers
					        UNION
					           SELECT customers_temp.custid,
					            customers_temp.custcif,
					            customers_temp.custshrtname
					            FROM customers_temp) cu ON cu.custid = cl.custid
				UNION ALL
					 SELECT el.id,
					    el.linkid,
					    el.seqno,
					    el.fintype,
					    el.findate,
					    el.loanbank,
					    el.rateofinterest,
					    el.tenure,
					    el.originalamount,
					    el.instalmentamount,
					    el.outstandingbalance,
					    el.balancetenure,
					    el.bounceinstalments,
					    el.principaloutstanding,
					    el.overdueamount,
					    el.finstatus,
					    el.foir,
					    el.source,
					    el.checkedby,
					    el.securitydetails,
					    el.loanpurpose,
					    el.repaybank,
					    el.version,
					    el.lastmntby,
					    el.lastmnton,
					    el.recordstatus,
					    el.rolecode,
					    el.nextrolecode,
					    el.taskid,
					    el.nexttaskid,
					    el.recordtype,
					    el.workflowid,
					    lb.bankname AS loanbankname,
					    ft.fintypedesc,
					    cs.custstsdescription,
					    rb.bankname AS repayfrombankname,
					    lp.loanpurposedesc,
					    el.otherfininstitute,
					    el.baltransfer,
					    cu.custid,
					    cu.custcif,
					    cu.custshrtname,
					    el.imputedEmi,
					    el.ownerShip,
					    el.lastTwentyFourMonths,
					    el.lastSixMonths,
					    el.lastThreeMonths,
					    el.currentOverDue
					   FROM external_liabilities el
					     JOIN link_cust_liabilities cl ON cl.linkid = el.linkid
					     JOIN bmtbankdetail lb ON lb.bankcode = el.loanbank
					     JOIN otherbankfinancetype ft ON ft.fintype = el.fintype
					     LEFT JOIN loanpurposes lp ON lp.loanpurposecode = el.loanpurpose
					     LEFT JOIN bmtbankdetail rb ON rb.bankcode = el.repaybank
					     LEFT JOIN bmtcuststatuscodes cs ON cs.custstscode = el.finstatus
					     JOIN ( SELECT customers.custid,
					            customers.custcif,
					            customers.custshrtname
					           FROM customers
					        UNION
					         SELECT customers_temp.custid,
					            customers_temp.custcif,
					            customers_temp.custshrtname
					           FROM customers_temp) cu ON cu.custid = cl.custid
					  WHERE NOT (EXISTS ( SELECT 1
					           FROM external_liabilities_temp
					          WHERE external_liabilities_temp.id = el.id))
					          ]]>
		</createView>
	</changeSet>

	<changeSet id="542" author="Varaprasad.K">
		<createView viewName="customer_ext_liabilities_aview" replaceIfExists="true">
		<![CDATA[
				SELECT 	el.id,
					    el.linkid,
					    el.seqno,
					    el.fintype,
					    el.findate,
					    el.loanbank,
					    el.rateofinterest,
					    el.tenure,
					    el.originalamount,
					    el.instalmentamount,
					    el.outstandingbalance,
					    el.balancetenure,
					    el.bounceinstalments,
					    el.principaloutstanding,
					    el.overdueamount,
					    el.finstatus,
					    el.foir,
					    el.source,
					    el.checkedby,
					    el.securitydetails,
					    el.loanpurpose,
					    el.repaybank,
					    el.version,
					    el.lastmntby,
					    el.lastmnton,
					    el.recordstatus,
					    el.rolecode,
					    el.nextrolecode,
					    el.taskid,
					    el.nexttaskid,
					    el.recordtype,
					    el.workflowid,
					    lb.bankname AS loanbankname,
					    ft.fintypedesc,
					    cs.custstsdescription,
					    lb.bankname AS repayfrombankname,
					    lp.loanpurposedesc,
					    el.otherfininstitute,
					    el.baltransfer,
					    cl.custid,
					    cu.custcif,
					    cu.custshrtname,
					    el.imputedEmi,
					    el.ownerShip,
					    el.lastTwentyFourMonths,
					    el.lastSixMonths,
					    el.lastThreeMonths,
					    el.currentOverDue
					   FROM external_liabilities el
					     JOIN link_cust_liabilities cl ON cl.linkid = el.linkid
					     JOIN bmtbankdetail lb ON lb.bankcode = el.loanbank
					     JOIN otherbankfinancetype ft ON ft.fintype = el.fintype
					     LEFT JOIN loanpurposes lp ON lp.loanpurposecode = el.loanpurpose
					     LEFT JOIN bmtbankdetail rb ON rb.bankcode = el.repaybank
					     LEFT JOIN bmtcuststatuscodes cs ON cs.custstscode = el.finstatus
					     JOIN ( SELECT customers.custid,
					            customers.custcif,
					            customers.custshrtname
					           FROM customers
					        UNION
					         SELECT customers_temp.custid,
					            customers_temp.custcif,
					            customers_temp.custshrtname
					           FROM customers_temp) cu ON cu.custid = cl.custid
					           ]]>
		</createView>
	</changeSet>

	<changeSet id="543" author="Varaprasad.K">
		<sql>
		<![CDATA[
		        DELETE FROM SecRights where RightName='CustomerExtLiabilityDialog_ImputedEmi';
				DELETE FROM SecRights where RightName='CustomerExtLiabilityDialog_Ownership';
				DELETE FROM SecRights where RightName='CustomerExtLiabilityDialog_LastInTwentyFourMths';
				DELETE FROM SecRights where RightName='CustomerExtLiabilityDialog_LastInSixMths';
				DELETE FROM SecRights where RightName='CustomerExtLiabilityDialog_LastInThreeMths';
				DELETE FROM SecRights where RightName='CustomerExtLiabilityDialog_CurrentOverdue';
				
				DELETE FROM SECGROUPRIGHTS Where GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='BFSD_ORIGINATION_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='CustomerExtLiabilityDialog_ImputedEmi');
				DELETE FROM SECGROUPRIGHTS Where GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='BFSD_ORIGINATION_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='CustomerExtLiabilityDialog_Ownership');
				DELETE FROM SECGROUPRIGHTS Where GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='BFSD_ORIGINATION_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='CustomerExtLiabilityDialog_LastInTwentyFourMths');
				DELETE FROM SECGROUPRIGHTS Where GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='BFSD_ORIGINATION_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='CustomerExtLiabilityDialog_LastInSixMths');
				DELETE FROM SECGROUPRIGHTS Where GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='BFSD_ORIGINATION_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='CustomerExtLiabilityDialog_LastInThreeMths');
				DELETE FROM SECGROUPRIGHTS Where GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='BFSD_ORIGINATION_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='CustomerExtLiabilityDialog_CurrentOverdue');
				
				INSERT INTO SecRights values((SELECT max(RightId) + 1 from SecRights), 3,'CustomerExtLiabilityDialog_ImputedEmi','CustomerExtLiabilityDialog',0,1000,current_timestamp,'Approved','',' ',' ',' ',' ',0);
				INSERT INTO SecRights values((SELECT max(RightId) + 1 from SecRights), 3,'CustomerExtLiabilityDialog_Ownership','CustomerExtLiabilityDialog',0,1000,current_timestamp,'Approved','',' ',' ',' ',' ',0);
				INSERT INTO SecRights values((SELECT max(RightId) + 1 from SecRights), 3,'CustomerExtLiabilityDialog_LastInTwentyFourMths','CustomerExtLiabilityDialog',0,1000,current_timestamp,'Approved','',' ',' ',' ',' ',0);
				INSERT INTO SecRights values((SELECT max(RightId) + 1 from SecRights), 3,'CustomerExtLiabilityDialog_LastInSixMths','CustomerExtLiabilityDialog',0,1000,current_timestamp,'Approved','',' ',' ',' ',' ',0);
				INSERT INTO SecRights values((SELECT max(RightId) + 1 from SecRights), 3,'CustomerExtLiabilityDialog_LastInThreeMths','CustomerExtLiabilityDialog',0,1000,current_timestamp,'Approved','',' ',' ',' ',' ',0);
				INSERT INTO SecRights values((SELECT max(RightId) + 1 from SecRights), 3,'CustomerExtLiabilityDialog_CurrentOverdue','CustomerExtLiabilityDialog',0,1000,current_timestamp,'Approved','',' ',' ',' ',' ',0);
                
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='BFSD_ORIGINATION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='CustomerExtLiabilityDialog_ImputedEmi'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='BFSD_ORIGINATION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='CustomerExtLiabilityDialog_Ownership'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='BFSD_ORIGINATION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='CustomerExtLiabilityDialog_LastInTwentyFourMths'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='BFSD_ORIGINATION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='CustomerExtLiabilityDialog_LastInSixMths'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='BFSD_ORIGINATION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='CustomerExtLiabilityDialog_LastInThreeMths'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='BFSD_ORIGINATION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='CustomerExtLiabilityDialog_CurrentOverdue'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
                
				UPDATE SeqSecGroups SET SeqNo= (SELECT MAX(GRPID) FROM ( SELECT GRPID FROM SECGROUPS UNION SELECT GRPID FROM SECGROUPS_TEMP)t);
				UPDATE SeqSecRights SET SeqNo= (SELECT MAX(rightid) FROM SecRights );	
				UPDATE SeqSecGroupRights SET SeqNo= (SELECT MAX(GRPrightID) FROM (SELECT GRPrightID FROM SecGroupRights UNION SELECT GRPrightID FROM SecGroupRights_Temp)t);
		 ]]>
		</sql>
	</changeSet>

	<changeSet id="544" author="Varaprasad.K">
		<sql>
			<![CDATA[
			        DELETE FROM SecRights where RightName='button_financialSummaryDialog_btnDelphi';
					DELETE FROM SECGROUPRIGHTS Where GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='DELPHICHECKDETAILS') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_financialSummaryDialog_btnDelphi');
					DELETE FROM SECGROUPS Where Grpcode='DELPHICHECKDETAILS';
					
					INSERT INTO SECGROUPS values ((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'DELPHICHECKDETAILS','Insurance Calculation Button Visibility Group', 0,1000,CURRENT_TIMESTAMP,' ',' ',null,' ',' ',' ',0);
					INSERT INTO SecRights values ((select MAX(rightid+1) from SecRights),2,'button_financialSummaryDialog_btnDelphi','VASRecordingList',0,1000,'2017-01-03 12:41:37','Approved',' ',' ',' ',' ',' ',0);
					INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='DELPHICHECKDETAILS') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_financialSummaryDialog_btnDelphi'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
					
					UPDATE SeqSecGroups SET SeqNo= (SELECT MAX(GRPID) FROM ( SELECT GRPID FROM SECGROUPS UNION SELECT GRPID FROM SECGROUPS_TEMP)t);
					UPDATE SeqSecRights SET SeqNo= (SELECT MAX(rightid) FROM SecRights );	
					UPDATE SeqSecGroupRights SET SeqNo= (SELECT MAX(GRPrightID) FROM (SELECT GRPrightID FROM SecGroupRights UNION SELECT GRPrightID FROM SecGroupRights_Temp)t);
			]]>
		</sql>
	</changeSet>

	<changeSet id="546" author="Durga Prasad G">
		<sql>
		<![CDATA[
			 Delete from TemplateFields Where module = 'FIN' and field = 'pc_appDate';
			 INSERT INTO TemplateFields(module, field, fielddesc, fieldformat, event) VALUES ('FIN', 'pc_appDate', 'Application Date', 'A', 'Putcall');
		]]>
		</sql>
	</changeSet>

	<changeSet id="545" author="meena.a">
		<createView viewName="FINODPENALTYRATES_VIEW" replaceIfExists="true">
		 <![CDATA[
				 SELECT FINREFERENCE,
					FINEFFECTDATE,
					APPLYODPENALTY,
					ODINCGRCDAYS,
					ODCHARGETYPE,
					ODGRACEDAYS,
					ODCHARGECALON,
					ODCHARGEAMTORPERC,
					ODALLOWWAIVER,
					ODMAXWAIVERPERC,
					ODRULECODE,
					ODMINCAPAMOUNT
					FROM FINODPENALTYRATES_TEMP
					UNION
					SELECT FINREFERENCE,
					FINEFFECTDATE,
					APPLYODPENALTY,
					ODINCGRCDAYS,
					ODCHARGETYPE,
					ODGRACEDAYS,
					ODCHARGECALON,
					ODCHARGEAMTORPERC,
					ODALLOWWAIVER,
					ODMAXWAIVERPERC,
					ODRULECODE,
					ODMINCAPAMOUNT
					FROM FINODPENALTYRATES
					WHERE NOT (EXISTS
					(SELECT 1
					FROM FINODPENALTYRATES_TEMP
					WHERE FINREFERENCE = FINODPENALTYRATES.FINREFERENCE
					))
				]]>
		</createView>
	</changeSet>

	<changeSet id="547" author="meena.a" dbms="postgresql,oracle">
		<sql>
			 <![CDATA[
             	 UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS);
				 UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);	
				 
           		 DELETE FROM SECGROUPRIGHTS WHERE RIGHTID IN (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='menu_Item_ReceiptDetails');
			     DELETE FROM SECRIGHTS WHERE RIGHTNAME='menu_Item_ReceiptDetails';
			     
			     INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_ReceiptDetails','MENU',0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0 FROM SEQSECRIGHTS WHERE 0=0;
				 INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='REPORTS_ADMIN') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='menu_Item_ReceiptDetails'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				 
				 UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS);
				 UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);
						 
				 Insert into REPORTCONFIGURATION 
				 values ((select max(reportid)+1 from REPORTCONFIGURATION),'Excel:Receipt Details','Receipt Details',1,'ReceiptDetails','dataSource',1,'menu_Item_ReceiptDetails',1,1000,null,null,null,null,null,null,0,current_timestamp,0,1,0);
				
				
				 Insert into REPORTFILTERFIELDS 
				 values ((select reportid from REPORTCONFIGURATION where menuitemcode='menu_Item_ReceiptDetails'),1,'CustCIF','LOVSEARCH','Customer Number','c.custcif',null,'Customer','getCustCIF','getCustShrtName',0,0,0,0,1,0,' ',' ',' ',' ',250,0,'=',1,1000,'Approved',null,null,null,null,null,0,current_timestamp,null);
				
				 Insert into REPORTFILTERFIELDS 
				 values ((select reportid from REPORTCONFIGURATION where menuitemcode='menu_Item_ReceiptDetails'),2,'Receipt Mode Status','STATICLIST','Receipt Mode Status','t1.ReceiptModeStatus','getReceiptModeStatus',null,null,null,0,0,0,0,2,0,null,null,null,null,250,0,'=',3,1000,'Approved',null,null,null,null,null,0,current_timestamp,null);
				
				 Insert into REPORTFILTERFIELDS  
				 values ((select reportid from REPORTCONFIGURATION where menuitemcode='menu_Item_ReceiptDetails'),3,'FinReference','LOVSEARCH','Loan Reference','T1.Reference',null,'FinanceMain','getFinReference','getFinReference',0,0,0,0,3,0,' ',' ',' ',' ',150,0,'=',12,1000,'Approved',null,null,null,null,null,0,current_timestamp,null);
				
				 Insert into REPORTFILTERFIELDS 
				 values ((select reportid from REPORTCONFIGURATION where menuitemcode='menu_Item_ReceiptDetails'),4,'Receipt Mode','TXT','Receipt Mode','T2.PaymentType',null,null,null,null,0,20,0,0,4,0,null,null,null,null,250,1,'%',4,1000,'Approved',null,null,null,null,null,0,current_timestamp,null);
				
				 Insert into REPORTFILTERFIELDS 
				 values ((select reportid from REPORTCONFIGURATION where menuitemcode='menu_Item_ReceiptDetails'),5,'Receipt Purpose','TXT','Receipt Purpose','T1.RECEIPTPURPOSE',null,null,null,null,0,20,0,0,5,0,null,null,null,null,250,1,'%',4,1000,'Approved',null,null,null,null,null,0,current_timestamp,null);
				
				 Insert into REPORTFILTERFIELDS  
				 values ((select reportid from REPORTCONFIGURATION where menuitemcode='menu_Item_ReceiptDetails'),6,'Transaction Date','DATE','Transaction Date','T2.ReceivedDate',null,'---Select----',null,null,0,0,0,0,6,0,'No Empty',null,null,null,150,1,'=',2,1000,'Approved',null,null,null,null,null,0,to_date('20-DEC-2012 00:00:00','DD-MON-RRRR HH24:MI:SS'),null);
			]]>
		</sql>
	</changeSet>

	<changeSet id="547" author="meena.a" dbms="mssql">
		<sql>
			 <![CDATA[
             	 UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS);
				 UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);	
				 
           		 DELETE FROM SECGROUPRIGHTS WHERE RIGHTID IN (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='menu_Item_ReceiptDetails');
			     DELETE FROM SECRIGHTS WHERE RIGHTNAME='menu_Item_ReceiptDetails';
			     
			     INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_ReceiptDetails','MENU',0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0 FROM SEQSECRIGHTS WHERE 0=0;
				 INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='REPORTS_ADMIN') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='menu_Item_ReceiptDetails'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				 
				 UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS);
				 UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);
						 
				 Insert into REPORTCONFIGURATION 
				 values ((select max(reportid)+1 from REPORTCONFIGURATION),'Excel:Receipt Details','Receipt Details',1,'ReceiptDetails','dataSource',1,'menu_Item_ReceiptDetails',1,1000,null,null,null,null,null,null,0,current_timestamp,0,1,0);
				
				
				 Insert into REPORTFILTERFIELDS 
				 values ((select reportid from REPORTCONFIGURATION where menuitemcode='menu_Item_ReceiptDetails'),1,'CustCIF','LOVSEARCH','Customer Number','c.custcif',null,'Customer','getCustCIF','getCustShrtName',0,0,0,0,1,0,' ',' ',' ',' ',250,0,'=',1,1000,'Approved',null,null,null,null,null,0,current_timestamp,null);
				
				 Insert into REPORTFILTERFIELDS 
				 values ((select reportid from REPORTCONFIGURATION where menuitemcode='menu_Item_ReceiptDetails'),2,'Receipt Mode Status','STATICLIST','Receipt Mode Status','t1.ReceiptModeStatus','getReceiptModeStatus',null,null,null,0,0,0,0,2,0,null,null,null,null,250,0,'=',3,1000,'Approved',null,null,null,null,null,0,current_timestamp,null);
				
				 Insert into REPORTFILTERFIELDS  
				 values ((select reportid from REPORTCONFIGURATION where menuitemcode='menu_Item_ReceiptDetails'),3,'FinReference','LOVSEARCH','Loan Reference','T1.Reference',null,'FinanceMain','getFinReference','getFinReference',0,0,0,0,3,0,' ',' ',' ',' ',150,0,'=',12,1000,'Approved',null,null,null,null,null,0,current_timestamp,null);
				
				 Insert into REPORTFILTERFIELDS 
				 values ((select reportid from REPORTCONFIGURATION where menuitemcode='menu_Item_ReceiptDetails'),4,'Receipt Mode','TXT','Receipt Mode','T2.PaymentType',null,null,null,null,0,20,0,0,4,0,null,null,null,null,250,1,'%',4,1000,'Approved',null,null,null,null,null,0,current_timestamp,null);
				
				 Insert into REPORTFILTERFIELDS 
				 values ((select reportid from REPORTCONFIGURATION where menuitemcode='menu_Item_ReceiptDetails'),5,'Receipt Purpose','TXT','Receipt Purpose','T1.RECEIPTPURPOSE',null,null,null,null,0,20,0,0,5,0,null,null,null,null,250,1,'%',4,1000,'Approved',null,null,null,null,null,0,current_timestamp,null);
				
				 Insert into REPORTFILTERFIELDS  
				 values ((select reportid from REPORTCONFIGURATION where menuitemcode='menu_Item_ReceiptDetails'),6,'Transaction Date','DATE','Transaction Date','T2.ReceivedDate',null,'---Select----',null,null,0,0,0,0,6,0,'No Empty',null,null,null,150,1,'=',2,1000,'Approved',null,null,null,null,null,0,'2012-12-20',null);
			]]>
		</sql>
	</changeSet>

	<changeSet id="548" author="saikumar.b">
		<renameColumn tableName="CUST_KYC_VALIDATION" oldColumnName="VERIFICATION_ON" newColumnName="VERIFIED_ON" />
	</changeSet>

	<changeSet id="549.1" author="ayyappa.ch">
		<sql>
			<![CDATA[
				Delete from SMTparameters where SysParmCode = 'FINANCE_DEVIATION_CHECK';
				Insert into SMTPARAMETERS (SYSPARMCODE,SYSPARMDESC,SYSPARMTYPE,SYSPARMMAINT,SYSPARMVALUE,SYSPARMLENGTH,SYSPARMDEC,SYSPARMLIST,SYSPARMVALDMOD,SYSPARMDESCRIPTION,VERSION,LASTMNTBY,LASTMNTON,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID) values ('FINANCE_DEVIATION_CHECK','Fianance Deviation Check','String',1,'N',3,0,null,null,' Fianance Deviation Check',1,1000,current_timestamp,'Approved', null, null, null, null, null, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="550.0_pre" author="kranthi.k" dbms="postgresql">
		<sql>
			<![CDATA[
					truncate table deps_saved_ddl;
				]]>
		</sql>
	</changeSet>

	<changeSet id="550_pre" author="kranthi.k" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_save_and_drop_dependencies ('plf', 'mandates');
					select deps_save_and_drop_dependencies ('plf', 'mandates_temp');
			]]>
		</sql>
	</changeSet>

	<changeSet id="550" author="kranthi.k">
		<comment>accholdername length changed to 100 instead of 50</comment>
		<modifyDataType tableName="mandates" columnName="accholdername" newDataType="varchar(100)" />
	</changeSet>

	<changeSet id="551" author="kranthi.k">
		<comment>accholdername length changed to 100 instead of 50</comment>
		<modifyDataType tableName="mandates_temp" columnName="accholdername" newDataType="varchar(100)" />
	</changeSet>

	<changeSet id="550_post" author="kranthi.k" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_restore_dependencies ('plf', 'mandates');
					select deps_restore_dependencies ('plf', 'mandates_temp');
			]]>
		</sql>
	</changeSet>

	<changeSet id="552_pre" author="vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_save_and_drop_dependencies ('plf', 'vasprovideraccdetail');
					select deps_save_and_drop_dependencies ('plf', 'vasprovideraccdetail_temp');
			]]>
		</sql>
	</changeSet>

	<changeSet id="552" author="vijaya.a">
		<modifyDataType tableName="VASPROVIDERACCDETAIL" columnName="ReconciliationAmount" newDataType="decimal(18,0)" />
	</changeSet>

	<changeSet id="553" author="vijaya.a">
		<modifyDataType tableName="VASPROVIDERACCDETAIL_TEMP" columnName="ReconciliationAmount" newDataType="decimal(18,0)" />
	</changeSet>

	<changeSet id="552_post" author="vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_restore_dependencies ('plf', 'vasprovideraccdetail');
					select deps_restore_dependencies ('plf', 'vasprovideraccdetail_temp');
			]]>
		</sql>
	</changeSet>

	<changeSet id="554" author="Varaprasad.K">
		<addColumn tableName="BankInfoDetail_Temp">
			<column name="PeakUtilizationLevel" type="decimal(18,0)" />
		</addColumn>
	</changeSet>

	<changeSet id="555" author="Varaprasad.K">
		<addColumn tableName="BankInfoDetail">
			<column name="PeakUtilizationLevel" type="decimal(18,0)" />
		</addColumn>
	</changeSet>

	<changeSet id="556" author="Varaprasad.K">
		<addColumn tableName="CustomerBankInfo">
			<column name="AddToBenficiary" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="557" author="Varaprasad.K">
		<addColumn tableName="CustomerBankInfo">
			<column name="BankBranchID" type="bigint" defaultValue="0" />
		</addColumn>
	</changeSet>

	<changeSet id="558" author="Varaprasad.K">
		<addColumn tableName="CustomerBankInfo">
			<column name="AccountHolderName" type="VARCHAR2(100)" />
		</addColumn>
	</changeSet>

	<changeSet id="559" author="Varaprasad.K">
		<addColumn tableName="CustomerBankInfo_Temp">
			<column name="AddToBenficiary" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="560" author="Varaprasad.K">
		<addColumn tableName="CustomerBankInfo_Temp">
			<column name="BankBranchID" type="bigint" defaultValue="0" />
		</addColumn>
	</changeSet>

	<changeSet id="561" author="Varaprasad.K">
		<addColumn tableName="CustomerBankInfo_Temp">
			<column name="AccountHolderName" type="VARCHAR2(100)" />
		</addColumn>
	</changeSet>

	<changeSet id="562" author="Varaprasad.K">
		<sql>
			<![CDATA[
				UPDATE CustomerBankInfo Set AddToBenficiary = 0;
				UPDATE CustomerBankInfo_Temp Set AddToBenficiary = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="563" author="Varaprasad.K" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE CustomerBankInfo ADD CONSTRAINT DF_CustomerBankInfo_AddToBenficiary DEFAULT 0 FOR AddToBenficiary;
				ALTER TABLE CustomerBankInfo_Temp ADD CONSTRAINT DF_CustomerBankInfo_Temp_AddToBenficiary DEFAULT 0 FOR AddToBenficiary;
			]]>
		</sql>
	</changeSet>

	<changeSet id="564" author="Varaprasad.K" dbms="postgresql, oracle">
		<addDefaultValue columnName="AddToBenficiary" tableName="CustomerBankInfo" defaultValue="0" />
		<addDefaultValue columnName="AddToBenficiary" tableName="CustomerBankInfo_Temp" defaultValue="0" />
	</changeSet>

	<changeSet id="565.1" author="Varaprasad.K">
		<createView viewName="Bankinfodetail_Aview" replaceIfExists="true">
			<![CDATA[
				SELECT t1.bankid,
				    t1.monthyear,
				    t1.balance,
				    t1.debitno,
				    t1.debitamt,
				    t1.creditno,
				    t1.creditamt,
				    t1.bouncein,
				    t1.bounceout,
				    t1.closingbal,
				    t1.sanctionlimit,
				    t1.avgutilization,
					t1.peakUtilizationLevel,
				    t1.odcclimit,
				    t1.version,
				    t1.lastmntby,
				    t1.lastmnton,
				    t1.recordstatus,
				    t1.rolecode,
				    t1.nextrolecode,
				    t1.taskid,
				    t1.nexttaskid,
				    t1.recordtype,
				    t1.workflowid
				   FROM bankinfodetail t1
				  ]]>
		</createView>
	</changeSet>

	<changeSet id="566.1" author="Varaprasad.K">
		<createView viewName="Bankinfodetail_view" replaceIfExists="true">
			<![CDATA[
				SELECT t1.bankid,
				    t1.monthyear,
				    t1.balance,
				    t1.debitno,
				    t1.debitamt,
				    t1.creditno,
				    t1.creditamt,
				    t1.bouncein,
				    t1.bounceout,
				    t1.closingbal,
				    t1.sanctionlimit,
				    t1.avgutilization,
					t1.peakUtilizationLevel,
				    t1.odcclimit,
				    t1.version,
				    t1.lastmntby,
				    t1.lastmnton,
				    t1.recordstatus,
				    t1.rolecode,
				    t1.nextrolecode,
				    t1.taskid,
				    t1.nexttaskid,
				    t1.recordtype,
				    t1.workflowid
				   FROM bankinfodetail_temp t1
				UNION ALL
				 SELECT t1.bankid,
				    t1.monthyear,
				    t1.balance,
				    t1.debitno,
				    t1.debitamt,
				    t1.creditno,
				    t1.creditamt,
				    t1.bouncein,
				    t1.bounceout,
				    t1.closingbal,
				    t1.sanctionlimit,
				    t1.avgutilization,
					t1.peakUtilizationLevel,
				    t1.odcclimit,
				    t1.version,
				    t1.lastmntby,
				    t1.lastmnton,
				    t1.recordstatus,
				    t1.rolecode,
				    t1.nextrolecode,
				    t1.taskid,
				    t1.nexttaskid,
				    t1.recordtype,
				    t1.workflowid
				   FROM bankinfodetail t1
				  WHERE (NOT (EXISTS ( SELECT 1 AS expr1
				           FROM bankinfodetail_temp
				          WHERE ((bankinfodetail_temp.bankid = t1.bankid) AND (bankinfodetail_temp.monthyear = t1.monthyear)))))
				   ]]>
		</createView>
	</changeSet>

	<changeSet id="567.1" author="Varaprasad.K">
		<createView viewName="customerbankinfo_aview" replaceIfExists="true">
			<![CDATA[
				SELECT t1.bankid,
					    t1.custid,
					    t1.bankname,
					    t1.accountnumber,
					    t1.accounttype,
					    t1.salaryaccount,
					    t1.version,
					    t1.lastmntby,
					    t1.lastmnton,
					    t1.recordstatus,
					    t1.rolecode,
					    t1.nextrolecode,
					    t1.taskid,
					    t1.nexttaskid,
					    t1.recordtype,
					    t1.workflowid,
					    t3.bankname AS lovdescbankname,
					    t4.valuedesc AS lovdescaccounttype,
					    t1.credittranno,
					    t1.credittranamt,
					    t1.credittranavg,
					    t1.debittranno,
					    t1.debittranamt,
					    t1.cashdepositno,
					    t1.cashdepositamt,
					    t1.cashwithdrawalno,
					    t1.cashwithdrawalamt,
					    t1.chqdepositno,
					    t1.chqdepositamt,
					    t1.chqissueno,
					    t1.chqissueamt,
					    t1.inwardchqbounceno,
					    t1.outwardchqbounceno,
					    t1.eodbalmin,
					    t1.eodbalmax,
					    t1.eodbalavg,
					    t1.bankbranch,
					    t1.fromdate,
					    t1.todate,
					    t1.repaymentfrom,
					    t1.noofmonthsbanking,
					    t1.lwowratio,
					    t1.cclimit,
					    t1.typeofbanks,
					    t1.accountopeningdate,
						t1.addToBenficiary,
						t1.bankBranchID,
						t5.ifsc,
						t1.accountHolderName
					   FROM ((customerbankinfo t1
					     INNER JOIN bmtbankdetail t3 ON (((t3.bankcode) = (t1.bankname))))
					     INNER JOIN rmtlovfielddetail t4 ON ((((t4.fieldcodevalue) = (t1.accounttype)) AND ((t4.fieldcode) = 'ACC_TYPE')))
					     LEFT JOIN bankbranches t5 ON t1.bankbranchid = t5.bankbranchid)
			]]>
		</createView>
	</changeSet>

	<changeSet id="568.1" author="Varaprasad.K">
		<createView viewName="customerbankinfo_view" replaceIfExists="true">
			<![CDATA[
				SELECT t1.bankid,
				    t1.custid,
				    t1.bankname,
				    t1.accountnumber,
				    t1.accounttype,
				    t1.salaryaccount,
				    t1.version,
				    t1.lastmntby,
				    t1.lastmnton,
				    t1.recordstatus,
				    t1.rolecode,
				    t1.nextrolecode,
				    t1.taskid,
				    t1.nexttaskid,
				    t1.recordtype,
				    t1.workflowid,
				    t3.bankname AS lovdescbankname,
				    t4.valuedesc AS lovdescaccounttype,
				    t1.credittranno,
				    t1.credittranamt,
				    t1.credittranavg,
				    t1.debittranno,
				    t1.debittranamt,
				    t1.cashdepositno,
				    t1.cashdepositamt,
				    t1.cashwithdrawalno,
				    t1.cashwithdrawalamt,
				    t1.chqdepositno,
				    t1.chqdepositamt,
				    t1.chqissueno,
				    t1.chqissueamt,
				    t1.inwardchqbounceno,
				    t1.outwardchqbounceno,
				    t1.eodbalmin,
				    t1.eodbalmax,
				    t1.eodbalavg,
				    t1.bankbranch,
				    t1.fromdate,
				    t1.todate,
				    t1.repaymentfrom,
				    t1.noofmonthsbanking,
				    t1.lwowratio,
				    t1.cclimit,
				    t1.typeofbanks,
				    t1.accountopeningdate,
					t1.addToBenficiary,
					t1.bankBranchID,
					t5.ifsc,
					t1.accountHolderName
				   FROM ((customerbankinfo_Temp t1
				     INNER JOIN bmtbankdetail t3 ON (((t3.bankcode) = (t1.bankname))))
				     INNER JOIN rmtlovfielddetail t4 ON ((((t4.fieldcodevalue) = (t1.accounttype)) AND ((t4.fieldcode) = 'ACC_TYPE')))
				     LEFT JOIN bankbranches t5 ON t1.bankbranchid = t5.bankbranchid)
				UNION ALL
				 SELECT t1.bankid,
				    t1.custid,
				    t1.bankname,
				    t1.accountnumber,
				    t1.accounttype,
				    t1.salaryaccount,
				    t1.version,
				    t1.lastmntby,
				    t1.lastmnton,
				    t1.recordstatus,
				    t1.rolecode,
				    t1.nextrolecode,
				    t1.taskid,
				    t1.nexttaskid,
				    t1.recordtype,
				    t1.workflowid,
				    t3.bankname AS lovdescbankname,
				    t4.valuedesc AS lovdescaccounttype,
				    t1.credittranno,
				    t1.credittranamt,
				    t1.credittranavg,
				    t1.debittranno,
				    t1.debittranamt,
				    t1.cashdepositno,
				    t1.cashdepositamt,
				    t1.cashwithdrawalno,
				    t1.cashwithdrawalamt,
				    t1.chqdepositno,
				    t1.chqdepositamt,
				    t1.chqissueno,
				    t1.chqissueamt,
				    t1.inwardchqbounceno,
				    t1.outwardchqbounceno,
				    t1.eodbalmin,
				    t1.eodbalmax,
				    t1.eodbalavg,
				    t1.bankbranch,
				    t1.fromdate,
				    t1.todate,
				    t1.repaymentfrom,
				    t1.noofmonthsbanking,
				    t1.lwowratio,
				    t1.cclimit,
				    t1.typeofbanks,
				    t1.accountopeningdate,
					t1.addToBenficiary,
					t1.bankBranchID,
					t5.ifsc,
					t1.accountHolderName
				   FROM ((customerbankinfo t1
				     INNER JOIN bmtbankdetail t3 ON (((t3.bankcode) = (t1.bankname))))
				     INNER JOIN rmtlovfielddetail t4 ON ((((t4.fieldcodevalue) = (t1.accounttype)) AND ((t4.fieldcode) = 'ACC_TYPE')))
				     LEFT JOIN bankbranches t5 ON t1.bankbranchid = t5.bankbranchid)
				  WHERE (NOT (EXISTS ( SELECT 1
				           FROM customerbankinfo_temp
				          WHERE (customerbankinfo_temp.bankid = t1.bankid))))
			]]>
		</createView>
	</changeSet>

	<changeSet id="569" author="satyanarayana.g">
		<sql>
			<![CDATA[
				update reportfilterfields set fieldname='Loan Reference',fieldlabel='Loan Reference',fielddbname='T.finreference',MULTISELECTSEARCH=0,modulename='FinanceMain',lovhiddenfieldmethod='getFinReference',lovtextfieldmethod='getFinReference' where reportid in (select reportid from reportconfiguration where menuitemcode='menu_Item_WelcomeLetter');
			]]>
		</sql>
	</changeSet>

	<changeSet id="570" author="vijaya.a" dbms="postgresql,oracle">
		<createView viewName="INT_DISBURSEMENT_REQUEST_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FA.PAYMENTID,
				FA.FINREFERENCE,
				'D' CHANNEL,
				0 PROVIDERID,
				CASE
				WHEN FA.PAYMENTTYPE = 'NEFT'
				THEN 'N'
				WHEN FA.PAYMENTTYPE = 'RTGS'
				THEN 'R'
				WHEN
				FA.PAYMENTTYPE = 'DD'
				THEN 'D'
				WHEN FA.PAYMENTTYPE = 'CHEQUE'
				THEN 'C'
				ELSE FA.PAYMENTTYPE
				END DISBURSEMENT_TYPE,
				FA.AMTTOBERELEASED,
				FA.DISBDATE,
				FA.LLDATE,
				FA.PAYABLELOC,
				FA.PRINTINGLOC,
				CU.CUSTCIF,
				CU.CUSTSHRTNAME,
				'' CUSTOMER_MOBILE,
				CE.CUSTEMAIL CUSTOMER_EMAIL,
				CS.CPPROVINCENAME CUSTOMER_STATE,
				CC.PCCITYNAME CUSTOMER_CITY,
				'' CUSTOMER_ADDRESS1,
				'' CUSTOMER_ADDRESS2,
				'' CUSTOMER_ADDRESS3,
				'' CUSTOMER_ADDRESS4,
				'' CUSTOMER_ADDRESS5,
				BD.BANKNAME,
				BB.BRANCHCODE,
				BB.BRANCHDESC,
				PBD.CPPROVINCENAME BENFICIARY_BRANCH_STATE,
				PBD.PCCITYNAME BENFICIARY_BRANCH_CITY,
				BB.MICR MICR_CODE,
				BB.IFSC IFSC_CODE,
				FA.BENEFICIARYACCNO,
				CASE
				WHEN FA.PAYMENTTYPE = 'CHEQUE'
				OR FA.PAYMENTTYPE = 'DD'
				THEN
				FA.LIABILITYHOLDNAME
				ELSE FA.BENEFICIARYNAME
				END BENEFICIARYNAME,
				(FA.PHONECOUNTRYCODE || FA.PHONEAREACODE) || FA.PHONENUMBER BENEFICIARY_MOBILE,
				BCE.CUSTEMAIL BENFICIRY_EMAIL,
				BRS.CPPROVINCENAME BENFICIARY_STATE,
				BRC.PCCITYNAME BENFICIARY_CITY,
				BRCA.CustAddrHNbr ||','|| BRCA.CustAddrStreet ||','|| BRC.PCCITYNAME ||','|| BRS.CPPROVINCENAME  BENFICIARY_ADDRESS1,
				'' BENFICIARY_ADDRESS2,
				'' BENFICIARY_ADDRESS3,
				'' BENFICIARY_ADDRESS4,
				'' BENFICIARY_ADDRESS5,
				'' PAYMENT_DETAIL1,
				'' PAYMENT_DETAIL2,
				'' PAYMENT_DETAIL3,
				'' PAYMENT_DETAIL4,
				'' PAYMENT_DETAIL5,
				'' PAYMENT_DETAIL6,
				'' PAYMENT_DETAIL7,
				FA.STATUS,
				FA.DESCRIPTION REMARKS,
				FA.PAYMENTTYPE,
				FM.FINTYPE,
				PB.PARTNERBANKID
				PARTNERBANK_ID,
				PB.PARTNERBANKCODE PARTNERBANK_CODE,
				FA.INPUTDATE,
				PB.ALWFILEDOWNLOAD,
				PB.FILENAME,
				FM.FINISACTIVE,
				SMD.ENTITYCODE,
				PB.ACCOUNTNO PARTNERBANK_ACCOUNT
				FROM FINADVANCEPAYMENTS FA
				JOIN
				(SELECT FINANCEMAIN_TEMP.CUSTID,
				FINANCEMAIN_TEMP.FINREFERENCE,
				FINANCEMAIN_TEMP.FINTYPE,
				FINANCEMAIN_TEMP.FINISACTIVE
				FROM FINANCEMAIN_TEMP
				UNION ALL
				SELECT T2.CUSTID,
				T2.FINREFERENCE,
				T2.FINTYPE,
				T2.FINISACTIVE
				FROM FINANCEMAIN T2
				WHERE NOT (EXISTS
				( SELECT 1 FROM
				FINANCEMAIN_TEMP T3 WHERE T3.FINREFERENCE = T2.FINREFERENCE))) FM
				ON FM.FINREFERENCE = FA.FINREFERENCE
				JOIN CUSTOMERS CU ON CU.CUSTID = FM.CUSTID	
				JOIN RMTCURRENCIES CCY ON CCY.CCYCODE	= FA.DISBCCY
				JOIN PARTNERBANKS PB ON PB.PARTNERBANKID = FA.PARTNERBANKID
				LEFT JOIN CUSTOMEREMAILS CE	ON CE.CUSTID = CU.CUSTID AND CE.CUSTEMAILPRIORITY = 5
				LEFT JOIN CUSTOMERADDRESSES CA ON CA.CUSTID = CE.CUSTID	AND CA.CUSTADDRPRIORITY = 5
				LEFT JOIN RMTPROVINCEVSCITY CC ON CC.PCCITY = CA.CUSTADDRCITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE CS ON CS.CPPROVINCE = CC.PCPROVINCE
				LEFT JOIN BANKBRANCHES BB ON BB.BANKBRANCHID = FA.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL BD ON BD.BANKCODE =	BB.BANKCODE
				LEFT JOIN ( SELECT PB_1.PARTNERBANKID,	
				PBD_1.BANKNAME,
				PBB.BRANCHDESC,
				PBBRC.PCCITYNAME,
				PBBRS.CPPROVINCENAME FROM PARTNERBANKS PB_1
				JOIN BANKBRANCHES PBB ON PBB.BRANCHCODE = PB_1.BANKBRANCHCODE
				JOIN BMTBANKDETAIL PBD_1 ON PBD_1.BANKCODE = PBB.BANKCODE
				LEFT JOIN RMTPROVINCEVSCITY PBBRC ON PBBRC.PCCITY = PBB.CITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE PBBRS ON PBBRS.CPPROVINCE = PBBRC.PCPROVINCE
				) PBD ON PBD.PARTNERBANKID = PB.PARTNERBANKID
				LEFT JOIN BENEFICIARY BR ON BR.BANKBRANCHID = FA.BANKBRANCHID AND
				BR.ACCNUMBER = FA.BENEFICIARYACCNO AND BR.CUSTID = FM.CUSTID
				LEFT JOIN CUSTOMERS BC ON BC.CUSTID = BR.CUSTID
				LEFT JOIN CUSTOMEREMAILS BCE ON BCE.CUSTID = CU.CUSTID
				AND BCE.CUSTEMAILPRIORITY = 5
				LEFT JOIN CUSTOMERADDRESSES	BRCA ON	BRCA.CUSTID = BR.CUSTID
				AND BRCA.CUSTADDRPRIORITY = 5
				LEFT JOIN RMTPROVINCEVSCITY BRC	ON BRC.PCCITY =	BRCA.CUSTADDRCITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE BRS ON BRS.CPPROVINCE = BRC.PCPROVINCE
				LEFT JOIN RMTFINANCETYPES RFT ON FM.FINTYPE = RFT.FINTYPE
				LEFT JOIN SMTDIVISIONDETAIL SMD	ON RFT.FINDIVISION = SMD.DIVISIONCODE
				WHERE FA.STATUS = 'APPROVED' AND NOT (FA.PAYMENTID IN ( 
				SELECT DISBURSEMENT_REQUESTS.DISBURSEMENT_ID FROM DISBURSEMENT_REQUESTS))
				AND NOT	(FA.PAYMENTID IN ( SELECT FINADVANCEPAYMENTS_TEMP.PAYMENTID FROM FINADVANCEPAYMENTS_TEMP))
				UNION ALL
				SELECT
				PI.PAYMENTINSTRUCTIONID PAYMENTID,
				PH.FINREFERENCE,
				PH.PAYMENTTYPE CHANNEL,
				0 PROVIDERID,
				CASE
				WHEN PI.PAYMENTTYPE =
				'NEFT'
				THEN 'N'
				WHEN PI.PAYMENTTYPE = 'RTGS'
				THEN 'R'
				WHEN PI.PAYMENTTYPE = 'DD'
				THEN 'D'
				WHEN PI.PAYMENTTYPE = 'CHEQUE'
				THEN 'C'
				ELSE PI.PAYMENTTYPE
				END DISBURSEMENT_TYPE,
				PI.PAYMENTAMOUNT / CCY.CCYMINORCCYUNITS AMTTOBERELEASED,
				PI.POSTDATE
				DISBDATE,
				PI.POSTDATE LLDATE,
				PI.PAYABLELOC,
				PI.PRINTINGLOC,
				CU.CUSTCIF,
				CU.CUSTSHRTNAME,
				'' CUSTOMER_MOBILE,
				CE.CUSTEMAIL
				CUSTOMER_EMAIL,
				CS.CPPROVINCENAME CUSTOMER_STATE,
				CC.PCCITYNAME CUSTOMER_CITY,
				'' CUSTOMER_ADDRESS1,
				'' CUSTOMER_ADDRESS2,
				'' CUSTOMER_ADDRESS3,
				'' CUSTOMER_ADDRESS4,
				'' CUSTOMER_ADDRESS5,
				BD.BANKNAME,
				BB.BRANCHCODE,
				BB.BRANCHDESC,
				BBRS.CPPROVINCENAME BENFICIARY_BRANCH_STATE,
				BBRC.PCCITYNAME BENFICIARY_BRANCH_CITY,
				BB.MICR MICR_CODE,
				BB.IFSC IFSC_CODE,
				PI.ACCOUNTNO BENEFICIARYACCNO,
				CASE
				WHEN PI.PAYMENTTYPE = 'CHEQUE'
				OR PI.PAYMENTTYPE = 'DD'
				THEN
				PI.FAVOURNAME
				ELSE PI.ACCTHOLDERNAME
				END BENEFICIARYNAME,
				PI.PHONECOUNTRYCODE || PI.PHONENUMBER BENEFICIARY_MOBILE,
				BCE.CUSTEMAIL BENFICIRY_EMAIL,
				BRS.CPPROVINCENAME BENFICIARY_STATE,
				BRC.PCCITYNAME BENFICIARY_CITY,
				'' BENFICIARY_ADDRESS1,
				'' BENFICIARY_ADDRESS2,
				'' BENFICIARY_ADDRESS3,
				'' BENFICIARY_ADDRESS4,
				'' BENFICIARY_ADDRESS5,
				'' PAYMENT_DETAIL1,
				'' PAYMENT_DETAIL2,
				'' PAYMENT_DETAIL3,
				'' PAYMENT_DETAIL4,
				'' PAYMENT_DETAIL5,
				'' PAYMENT_DETAIL6,
				'' PAYMENT_DETAIL7,
				PI.STATUS,
				PI.REMARKS,
				PI.PAYMENTTYPE,
				FM.FINTYPE,
				PB.PARTNERBANKID PARTNERBANK_ID,
				PB.PARTNERBANKCODE
				PARTNERBANK_CODE,
				PI.POSTDATE INPUTDATE,
				PB.ALWFILEDOWNLOAD,
				PB.FILENAME,
				FM.FINISACTIVE,
				SMD.ENTITYCODE,
				PB.ACCOUNTNO
				PARTNERBANK_ACCOUNTNO
				FROM PAYMENTINSTRUCTIONS PI
				JOIN PAYMENTHEADER PH ON PH.PAYMENTID = PI.PAYMENTID
				JOIN (SELECT
				FINANCEMAIN.CUSTID,
				FINANCEMAIN.FINREFERENCE,
				FINANCEMAIN.FINTYPE,
				FINANCEMAIN.FINISACTIVE
				FROM FINANCEMAIN
				UNION ALL
				SELECT T2.CUSTID,
				T2.FINREFERENCE,
				T2.FINTYPE,
				T2.FINISACTIVE
				FROM FINANCEMAIN_TEMP T2
				WHERE NOT (EXISTS
				( SELECT 1 FROM
				FINANCEMAIN_TEMP T3 WHERE T3.FINREFERENCE = T2.FINREFERENCE))) FM ON FM.FINREFERENCE = PH.FINREFERENCE
				JOIN CUSTOMERS CU ON CU.CUSTID = FM.CUSTID
				JOIN RMTCURRENCIES CCY ON CCY.CCYCODE = PI.PAYMENTCCY
				JOIN PARTNERBANKS PB ON PB.PARTNERBANKID = PI.PARTNERBANKID
				LEFT JOIN CUSTOMEREMAILS CE ON CE.CUSTID = CU.CUSTID AND CE.CUSTEMAILPRIORITY = 5
				LEFT JOIN CUSTOMERADDRESSES CA ON CA.CUSTID = CE.CUSTID AND CA.CUSTADDRPRIORITY = 5
				LEFT JOIN RMTPROVINCEVSCITY CC ON CC.PCCITY = CA.CUSTADDRCITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE CS ON CS.CPPROVINCE = CC.PCPROVINCE
				LEFT JOIN CUSTOMERPHONENUMBERS CM ON CM.PHONECUSTID = CU.CUSTID
				AND CM.PHONETYPECODE = 'MOBILE1' AND CM.PHONETYPEPRIORITY = 5
				LEFT JOIN BANKBRANCHES BB ON BB.BANKBRANCHID = PI.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL BD ON BD.BANKCODE = BB.BANKCODE
				LEFT JOIN RMTPROVINCEVSCITY	BBRC ON BBRC.PCCITY = BB.CITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE BBRS	ON BBRS.CPPROVINCE = BBRC.PCPROVINCE
				LEFT JOIN BENEFICIARY BR ON BR.BANKBRANCHID = PI.BANKBRANCHID
				AND BR.ACCNUMBER = PI.ACCOUNTNO	AND BR.CUSTID = FM.CUSTID
				LEFT JOIN CUSTOMERS BC ON BC.CUSTID = BR.CUSTID
				LEFT JOIN CUSTOMEREMAILS BCE ON	BCE.CUSTID = CU.CUSTID AND BCE.CUSTEMAILPRIORITY = 5
				LEFT JOIN CUSTOMERADDRESSES BRCA ON BRCA.CUSTID = BR.CUSTID	AND	BRCA.CUSTADDRPRIORITY = 5
				LEFT JOIN RMTPROVINCEVSCITY BRC	ON BRC.PCCITY = BRCA.CUSTADDRCITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE BRS ON BRS.CPPROVINCE = BRC.PCPROVINCE
				LEFT JOIN RMTFINANCETYPES RFT ON FM.FINTYPE = RFT.FINTYPE
				LEFT JOIN SMTDIVISIONDETAIL SMD	ON RFT.FINDIVISION = SMD.DIVISIONCODE
				WHERE PI.STATUS = 'APPROVED'
				AND NOT
				(PI.PAYMENTINSTRUCTIONID IN
				( SELECT DISBURSEMENT_REQUESTS.DISBURSEMENT_ID FROM
				DISBURSEMENT_REQUESTS
				))
				UNION ALL
				SELECT PI.ID PAYMENTID,
				'' FINREFERENCE,
				'I' CHANNEL,
				PI.PROVIDERID,
				CASE
				WHEN
				PI.PAYMENTTYPE = 'NEFT'
				THEN 'N'
				WHEN PI.PAYMENTTYPE = 'RTGS'
				THEN 'R'
				WHEN PI.PAYMENTTYPE = 'DD'
				THEN 'D'
				WHEN
				PI.PAYMENTTYPE = 'CHEQUE'
				THEN 'C'
				ELSE PI.PAYMENTTYPE
				END DISBURSEMENT_TYPE,
				PI.PAYMENTAMOUNT / CCY.CCYMINORCCYUNITS
				AMTTOBERELEASED,
				PI.PAYMENTDATE DISBDATE,
				PI.PAYMENTDATE LLDATE,
				'' PAYABLELOC,
				'' PRINTINGLOC,
				'' CUSTCIF,
				'' CUSTSHRTNAME,
				'' CUSTOMER_MOBILE,
				'' CUSTOMER_EMAIL,
				'' CUSTOMER_STATE,
				'' CUSTOMER_CITY,
				'' CUSTOMER_ADDRESS1,
				'' CUSTOMER_ADDRESS2,
				'' CUSTOMER_ADDRESS3,
				'' CUSTOMER_ADDRESS4,
				'' CUSTOMER_ADDRESS5,
				BD.BANKNAME,
				BB.BRANCHCODE,
				BB.BRANCHDESC,
				BBRS.CPPROVINCENAME BENFICIARY_BRANCH_STATE,
				BBRC.PCCITYNAME BENFICIARY_BRANCH_CITY,
				BB.MICR MICR_CODE,
				BB.IFSC IFSC_CODE,
				VPA.ACCOUNTNUMBER BENEFICIARYACCNO,
				AVD.DEALERNAME BENEFICIARYNAME,
				AVD.DEALERTELEPHONE
				BENEFICIARY_MOBILE,
				AVD.EMAIL BENFICIRY_EMAIL,
				BRS.CPPROVINCENAME BENFICIARY_STATE,
				BRC.PCCITYNAME BENFICIARY_CITY,
				AVD.DEALERADDRESS1 BENFICIARY_ADDRESS1,
				AVD.DEALERADDRESS2 BENFICIARY_ADDRESS2,
				AVD.DEALERADDRESS3 BENFICIARY_ADDRESS3,
				'' BENFICIARY_ADDRESS4,
				'' BENFICIARY_ADDRESS5,
				'' PAYMENT_DETAIL1,
				'' PAYMENT_DETAIL2,
				'' PAYMENT_DETAIL3,
				'' PAYMENT_DETAIL4,
				'' PAYMENT_DETAIL5,
				'' PAYMENT_DETAIL6,
				'' PAYMENT_DETAIL7,
				PI.STATUS,
				PI.REMARKS,
				PI.PAYMENTTYPE,
				'' FINTYPE,
				PB.PARTNERBANKID PARTNERBANK_ID,
				PB.PARTNERBANKCODE PARTNERBANK_CODE,
				PI.PAYMENTDATE INPUTDATE,
				PB.ALWFILEDOWNLOAD,
				PB.FILENAME,
				1 FINISACTIVE,
				PI.ENTITYCODE,
				PB.ACCOUNTNO PARTNERBANK_ACCOUNT
				FROM INSURANCEPAYMENTINSTRUCTIONS PI
				JOIN RMTCURRENCIES CCY ON CCY.CCYCODE = PI.PAYMENTCCY
				JOIN PARTNERBANKS PB ON	PB.PARTNERBANKID = PI.PARTNERBANKID
				JOIN VASPROVIDERACCDETAIL VPA ON VPA.PROVIDERID = PI.PROVIDERID
				JOIN AMTVEHICLEDEALER AVD ON AVD.DEALERID = VPA.PROVIDERID
				LEFT JOIN BANKBRANCHES BB ON BB.BANKBRANCHID = VPA.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL BD ON BD.BANKCODE = BB.BANKCODE
				LEFT JOIN RMTPROVINCEVSCITY BBRC ON BBRC.PCCITY	= BB.CITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE BBRS	ON BBRS.CPPROVINCE = BBRC.PCPROVINCE
				LEFT JOIN RMTPROVINCEVSCITY BRC	ON BRC.PCCITY =	AVD.DEALERCITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE BRS ON BRS.CPPROVINCE = BRC.PCPROVINCE
				WHERE PI.STATUS = 'APPROVED' AND PI.PAYMENTAMOUNT > 0
				AND NOT (PI.ID IN( SELECT DISBURSEMENT_REQUESTS.DISBURSEMENT_ID FROM DISBURSEMENT_REQUESTS))
			]]>
		</createView>
	</changeSet>

	<changeSet id="570.1" author="vijaya.a" dbms="mssql">
		<createView viewName="INT_DISBURSEMENT_REQUEST_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FA.PAYMENTID,
				FA.FINREFERENCE,
				'D' CHANNEL,
				0 PROVIDERID,
				CASE
				WHEN FA.PAYMENTTYPE = 'NEFT'
				THEN 'N'
				WHEN FA.PAYMENTTYPE = 'RTGS'
				THEN 'R'
				WHEN
				FA.PAYMENTTYPE = 'DD'
				THEN 'D'
				WHEN FA.PAYMENTTYPE = 'CHEQUE'
				THEN 'C'
				ELSE FA.PAYMENTTYPE
				END DISBURSEMENT_TYPE,
				FA.AMTTOBERELEASED,
				FA.DISBDATE,
				FA.LLDATE,
				FA.PAYABLELOC,
				FA.PRINTINGLOC,
				CU.CUSTCIF,
				CU.CUSTSHRTNAME,
				'' CUSTOMER_MOBILE,
				CE.CUSTEMAIL CUSTOMER_EMAIL,
				CS.CPPROVINCENAME CUSTOMER_STATE,
				CC.PCCITYNAME CUSTOMER_CITY,
				'' CUSTOMER_ADDRESS1,
				'' CUSTOMER_ADDRESS2,
				'' CUSTOMER_ADDRESS3,
				'' CUSTOMER_ADDRESS4,
				'' CUSTOMER_ADDRESS5,
				BD.BANKNAME,
				BB.BRANCHCODE,
				BB.BRANCHDESC,
				PBD.CPPROVINCENAME BENFICIARY_BRANCH_STATE,
				PBD.PCCITYNAME BENFICIARY_BRANCH_CITY,
				BB.MICR MICR_CODE,
				BB.IFSC IFSC_CODE,
				FA.BENEFICIARYACCNO,
				CASE
				WHEN FA.PAYMENTTYPE = 'CHEQUE'
				OR FA.PAYMENTTYPE = 'DD'
				THEN
				FA.LIABILITYHOLDNAME
				ELSE FA.BENEFICIARYNAME
				END BENEFICIARYNAME,
				(FA.PHONECOUNTRYCODE + FA.PHONEAREACODE) + FA.PHONENUMBER BENEFICIARY_MOBILE,
				BCE.CUSTEMAIL BENFICIRY_EMAIL,
				BRS.CPPROVINCENAME BENFICIARY_STATE,
				BRC.PCCITYNAME BENFICIARY_CITY,
				BRCA.CustAddrHNbr +','+ BRCA.CustAddrStreet +','+ BRC.PCCITYNAME +','+ BRS.CPPROVINCENAME  BENFICIARY_ADDRESS1,
				'' BENFICIARY_ADDRESS2,
				'' BENFICIARY_ADDRESS3,
				'' BENFICIARY_ADDRESS4,
				'' BENFICIARY_ADDRESS5,
				'' PAYMENT_DETAIL1,
				'' PAYMENT_DETAIL2,
				'' PAYMENT_DETAIL3,
				'' PAYMENT_DETAIL4,
				'' PAYMENT_DETAIL5,
				'' PAYMENT_DETAIL6,
				'' PAYMENT_DETAIL7,
				FA.STATUS,
				FA.DESCRIPTION REMARKS,
				FA.PAYMENTTYPE,
				FM.FINTYPE,
				PB.PARTNERBANKID
				PARTNERBANK_ID,
				PB.PARTNERBANKCODE PARTNERBANK_CODE,
				FA.INPUTDATE,
				PB.ALWFILEDOWNLOAD,
				PB.FILENAME,
				FM.FINISACTIVE,
				SMD.ENTITYCODE,
				PB.ACCOUNTNO PARTNERBANK_ACCOUNT
				FROM FINADVANCEPAYMENTS FA
				JOIN
				(SELECT FINANCEMAIN_TEMP.CUSTID,
				FINANCEMAIN_TEMP.FINREFERENCE,
				FINANCEMAIN_TEMP.FINTYPE,
				FINANCEMAIN_TEMP.FINISACTIVE
				FROM FINANCEMAIN_TEMP
				UNION ALL
				SELECT T2.CUSTID,
				T2.FINREFERENCE,
				T2.FINTYPE,
				T2.FINISACTIVE
				FROM FINANCEMAIN T2
				WHERE NOT (EXISTS
				( SELECT 1 FROM
				FINANCEMAIN_TEMP T3 WHERE T3.FINREFERENCE = T2.FINREFERENCE))) FM
				ON FM.FINREFERENCE = FA.FINREFERENCE
				JOIN CUSTOMERS CU ON CU.CUSTID = FM.CUSTID	
				JOIN RMTCURRENCIES CCY ON CCY.CCYCODE	= FA.DISBCCY
				JOIN PARTNERBANKS PB ON PB.PARTNERBANKID = FA.PARTNERBANKID
				LEFT JOIN CUSTOMEREMAILS CE	ON CE.CUSTID = CU.CUSTID AND CE.CUSTEMAILPRIORITY = 5
				LEFT JOIN CUSTOMERADDRESSES CA ON CA.CUSTID = CE.CUSTID	AND CA.CUSTADDRPRIORITY = 5
				LEFT JOIN RMTPROVINCEVSCITY CC ON CC.PCCITY = CA.CUSTADDRCITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE CS ON CS.CPPROVINCE = CC.PCPROVINCE
				LEFT JOIN BANKBRANCHES BB ON BB.BANKBRANCHID = FA.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL BD ON BD.BANKCODE =	BB.BANKCODE
				LEFT JOIN ( SELECT PB_1.PARTNERBANKID,	
				PBD_1.BANKNAME,
				PBB.BRANCHDESC,
				PBBRC.PCCITYNAME,
				PBBRS.CPPROVINCENAME FROM PARTNERBANKS PB_1
				JOIN BANKBRANCHES PBB ON PBB.BRANCHCODE = PB_1.BANKBRANCHCODE
				JOIN BMTBANKDETAIL PBD_1 ON PBD_1.BANKCODE = PBB.BANKCODE
				LEFT JOIN RMTPROVINCEVSCITY PBBRC ON PBBRC.PCCITY = PBB.CITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE PBBRS ON PBBRS.CPPROVINCE = PBBRC.PCPROVINCE
				) PBD ON PBD.PARTNERBANKID = PB.PARTNERBANKID
				LEFT JOIN BENEFICIARY BR ON BR.BANKBRANCHID = FA.BANKBRANCHID AND
				BR.ACCNUMBER = FA.BENEFICIARYACCNO AND BR.CUSTID = FM.CUSTID
				LEFT JOIN CUSTOMERS BC ON BC.CUSTID = BR.CUSTID
				LEFT JOIN CUSTOMEREMAILS BCE ON BCE.CUSTID = CU.CUSTID
				AND BCE.CUSTEMAILPRIORITY = 5
				LEFT JOIN CUSTOMERADDRESSES	BRCA ON	BRCA.CUSTID = BR.CUSTID
				AND BRCA.CUSTADDRPRIORITY = 5
				LEFT JOIN RMTPROVINCEVSCITY BRC	ON BRC.PCCITY =	BRCA.CUSTADDRCITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE BRS ON BRS.CPPROVINCE = BRC.PCPROVINCE
				LEFT JOIN RMTFINANCETYPES RFT ON FM.FINTYPE = RFT.FINTYPE
				LEFT JOIN SMTDIVISIONDETAIL SMD	ON RFT.FINDIVISION = SMD.DIVISIONCODE
				WHERE FA.STATUS = 'APPROVED' AND NOT (FA.PAYMENTID IN ( 
				SELECT DISBURSEMENT_REQUESTS.DISBURSEMENT_ID FROM DISBURSEMENT_REQUESTS))
				AND NOT	(FA.PAYMENTID IN ( SELECT FINADVANCEPAYMENTS_TEMP.PAYMENTID FROM FINADVANCEPAYMENTS_TEMP))
				UNION ALL
				SELECT
				PI.PAYMENTINSTRUCTIONID PAYMENTID,
				PH.FINREFERENCE,
				PH.PAYMENTTYPE CHANNEL,
				0 PROVIDERID,
				CASE
				WHEN PI.PAYMENTTYPE =
				'NEFT'
				THEN 'N'
				WHEN PI.PAYMENTTYPE = 'RTGS'
				THEN 'R'
				WHEN PI.PAYMENTTYPE = 'DD'
				THEN 'D'
				WHEN PI.PAYMENTTYPE = 'CHEQUE'
				THEN 'C'
				ELSE PI.PAYMENTTYPE
				END DISBURSEMENT_TYPE,
				PI.PAYMENTAMOUNT / CCY.CCYMINORCCYUNITS AMTTOBERELEASED,
				PI.POSTDATE
				DISBDATE,
				PI.POSTDATE LLDATE,
				PI.PAYABLELOC,
				PI.PRINTINGLOC,
				CU.CUSTCIF,
				CU.CUSTSHRTNAME,
				'' CUSTOMER_MOBILE,
				CE.CUSTEMAIL
				CUSTOMER_EMAIL,
				CS.CPPROVINCENAME CUSTOMER_STATE,
				CC.PCCITYNAME CUSTOMER_CITY,
				'' CUSTOMER_ADDRESS1,
				'' CUSTOMER_ADDRESS2,
				'' CUSTOMER_ADDRESS3,
				'' CUSTOMER_ADDRESS4,
				'' CUSTOMER_ADDRESS5,
				BD.BANKNAME,
				BB.BRANCHCODE,
				BB.BRANCHDESC,
				BBRS.CPPROVINCENAME BENFICIARY_BRANCH_STATE,
				BBRC.PCCITYNAME BENFICIARY_BRANCH_CITY,
				BB.MICR MICR_CODE,
				BB.IFSC IFSC_CODE,
				PI.ACCOUNTNO BENEFICIARYACCNO,
				CASE
				WHEN PI.PAYMENTTYPE = 'CHEQUE'
				OR PI.PAYMENTTYPE = 'DD'
				THEN
				PI.FAVOURNAME
				ELSE PI.ACCTHOLDERNAME
				END BENEFICIARYNAME,
				PI.PHONECOUNTRYCODE + PI.PHONENUMBER BENEFICIARY_MOBILE,
				BCE.CUSTEMAIL BENFICIRY_EMAIL,
				BRS.CPPROVINCENAME BENFICIARY_STATE,
				BRC.PCCITYNAME BENFICIARY_CITY,
				'' BENFICIARY_ADDRESS1,
				'' BENFICIARY_ADDRESS2,
				'' BENFICIARY_ADDRESS3,
				'' BENFICIARY_ADDRESS4,
				'' BENFICIARY_ADDRESS5,
				'' PAYMENT_DETAIL1,
				'' PAYMENT_DETAIL2,
				'' PAYMENT_DETAIL3,
				'' PAYMENT_DETAIL4,
				'' PAYMENT_DETAIL5,
				'' PAYMENT_DETAIL6,
				'' PAYMENT_DETAIL7,
				PI.STATUS,
				PI.REMARKS,
				PI.PAYMENTTYPE,
				FM.FINTYPE,
				PB.PARTNERBANKID PARTNERBANK_ID,
				PB.PARTNERBANKCODE
				PARTNERBANK_CODE,
				PI.POSTDATE INPUTDATE,
				PB.ALWFILEDOWNLOAD,
				PB.FILENAME,
				FM.FINISACTIVE,
				SMD.ENTITYCODE,
				PB.ACCOUNTNO
				PARTNERBANK_ACCOUNTNO
				FROM PAYMENTINSTRUCTIONS PI
				JOIN PAYMENTHEADER PH ON PH.PAYMENTID = PI.PAYMENTID
				JOIN (SELECT
				FINANCEMAIN.CUSTID,
				FINANCEMAIN.FINREFERENCE,
				FINANCEMAIN.FINTYPE,
				FINANCEMAIN.FINISACTIVE
				FROM FINANCEMAIN
				UNION ALL
				SELECT T2.CUSTID,
				T2.FINREFERENCE,
				T2.FINTYPE,
				T2.FINISACTIVE
				FROM FINANCEMAIN_TEMP T2
				WHERE NOT (EXISTS
				( SELECT 1 FROM
				FINANCEMAIN_TEMP T3 WHERE T3.FINREFERENCE = T2.FINREFERENCE))) FM ON FM.FINREFERENCE = PH.FINREFERENCE
				JOIN CUSTOMERS CU ON CU.CUSTID = FM.CUSTID
				JOIN RMTCURRENCIES CCY ON CCY.CCYCODE = PI.PAYMENTCCY
				JOIN PARTNERBANKS PB ON PB.PARTNERBANKID = PI.PARTNERBANKID
				LEFT JOIN CUSTOMEREMAILS CE ON CE.CUSTID = CU.CUSTID AND CE.CUSTEMAILPRIORITY = 5
				LEFT JOIN CUSTOMERADDRESSES CA ON CA.CUSTID = CE.CUSTID AND CA.CUSTADDRPRIORITY = 5
				LEFT JOIN RMTPROVINCEVSCITY CC ON CC.PCCITY = CA.CUSTADDRCITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE CS ON CS.CPPROVINCE = CC.PCPROVINCE
				LEFT JOIN CUSTOMERPHONENUMBERS CM ON CM.PHONECUSTID = CU.CUSTID
				AND CM.PHONETYPECODE = 'MOBILE1' AND CM.PHONETYPEPRIORITY = 5
				LEFT JOIN BANKBRANCHES BB ON BB.BANKBRANCHID = PI.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL BD ON BD.BANKCODE = BB.BANKCODE
				LEFT JOIN RMTPROVINCEVSCITY	BBRC ON BBRC.PCCITY = BB.CITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE BBRS	ON BBRS.CPPROVINCE = BBRC.PCPROVINCE
				LEFT JOIN BENEFICIARY BR ON BR.BANKBRANCHID = PI.BANKBRANCHID
				AND BR.ACCNUMBER = PI.ACCOUNTNO	AND BR.CUSTID = FM.CUSTID
				LEFT JOIN CUSTOMERS BC ON BC.CUSTID = BR.CUSTID
				LEFT JOIN CUSTOMEREMAILS BCE ON	BCE.CUSTID = CU.CUSTID AND BCE.CUSTEMAILPRIORITY = 5
				LEFT JOIN CUSTOMERADDRESSES BRCA ON BRCA.CUSTID = BR.CUSTID	AND	BRCA.CUSTADDRPRIORITY = 5
				LEFT JOIN RMTPROVINCEVSCITY BRC	ON BRC.PCCITY = BRCA.CUSTADDRCITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE BRS ON BRS.CPPROVINCE = BRC.PCPROVINCE
				LEFT JOIN RMTFINANCETYPES RFT ON FM.FINTYPE = RFT.FINTYPE
				LEFT JOIN SMTDIVISIONDETAIL SMD	ON RFT.FINDIVISION = SMD.DIVISIONCODE
				WHERE PI.STATUS = 'APPROVED'
				AND NOT
				(PI.PAYMENTINSTRUCTIONID IN
				( SELECT DISBURSEMENT_REQUESTS.DISBURSEMENT_ID FROM
				DISBURSEMENT_REQUESTS
				))
				UNION ALL
				SELECT PI.ID PAYMENTID,
				'' FINREFERENCE,
				'I' CHANNEL,
				PI.PROVIDERID,
				CASE
				WHEN
				PI.PAYMENTTYPE = 'NEFT'
				THEN 'N'
				WHEN PI.PAYMENTTYPE = 'RTGS'
				THEN 'R'
				WHEN PI.PAYMENTTYPE = 'DD'
				THEN 'D'
				WHEN
				PI.PAYMENTTYPE = 'CHEQUE'
				THEN 'C'
				ELSE PI.PAYMENTTYPE
				END DISBURSEMENT_TYPE,
				PI.PAYMENTAMOUNT / CCY.CCYMINORCCYUNITS
				AMTTOBERELEASED,
				PI.PAYMENTDATE DISBDATE,
				PI.PAYMENTDATE LLDATE,
				'' PAYABLELOC,
				'' PRINTINGLOC,
				'' CUSTCIF,
				'' CUSTSHRTNAME,
				'' CUSTOMER_MOBILE,
				'' CUSTOMER_EMAIL,
				'' CUSTOMER_STATE,
				'' CUSTOMER_CITY,
				'' CUSTOMER_ADDRESS1,
				'' CUSTOMER_ADDRESS2,
				'' CUSTOMER_ADDRESS3,
				'' CUSTOMER_ADDRESS4,
				'' CUSTOMER_ADDRESS5,
				BD.BANKNAME,
				BB.BRANCHCODE,
				BB.BRANCHDESC,
				BBRS.CPPROVINCENAME BENFICIARY_BRANCH_STATE,
				BBRC.PCCITYNAME BENFICIARY_BRANCH_CITY,
				BB.MICR MICR_CODE,
				BB.IFSC IFSC_CODE,
				VPA.ACCOUNTNUMBER BENEFICIARYACCNO,
				AVD.DEALERNAME BENEFICIARYNAME,
				AVD.DEALERTELEPHONE
				BENEFICIARY_MOBILE,
				AVD.EMAIL BENFICIRY_EMAIL,
				BRS.CPPROVINCENAME BENFICIARY_STATE,
				BRC.PCCITYNAME BENFICIARY_CITY,
				AVD.DEALERADDRESS1 BENFICIARY_ADDRESS1,
				AVD.DEALERADDRESS2 BENFICIARY_ADDRESS2,
				AVD.DEALERADDRESS3 BENFICIARY_ADDRESS3,
				'' BENFICIARY_ADDRESS4,
				'' BENFICIARY_ADDRESS5,
				'' PAYMENT_DETAIL1,
				'' PAYMENT_DETAIL2,
				'' PAYMENT_DETAIL3,
				'' PAYMENT_DETAIL4,
				'' PAYMENT_DETAIL5,
				'' PAYMENT_DETAIL6,
				'' PAYMENT_DETAIL7,
				PI.STATUS,
				PI.REMARKS,
				PI.PAYMENTTYPE,
				'' FINTYPE,
				PB.PARTNERBANKID PARTNERBANK_ID,
				PB.PARTNERBANKCODE PARTNERBANK_CODE,
				PI.PAYMENTDATE INPUTDATE,
				PB.ALWFILEDOWNLOAD,
				PB.FILENAME,
				1 FINISACTIVE,
				PI.ENTITYCODE,
				PB.ACCOUNTNO PARTNERBANK_ACCOUNT
				FROM INSURANCEPAYMENTINSTRUCTIONS PI
				JOIN RMTCURRENCIES CCY ON CCY.CCYCODE = PI.PAYMENTCCY
				JOIN PARTNERBANKS PB ON	PB.PARTNERBANKID = PI.PARTNERBANKID
				JOIN VASPROVIDERACCDETAIL VPA ON VPA.PROVIDERID = PI.PROVIDERID
				JOIN AMTVEHICLEDEALER AVD ON AVD.DEALERID = VPA.PROVIDERID
				LEFT JOIN BANKBRANCHES BB ON BB.BANKBRANCHID = VPA.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL BD ON BD.BANKCODE = BB.BANKCODE
				LEFT JOIN RMTPROVINCEVSCITY BBRC ON BBRC.PCCITY	= BB.CITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE BBRS	ON BBRS.CPPROVINCE = BBRC.PCPROVINCE
				LEFT JOIN RMTPROVINCEVSCITY BRC	ON BRC.PCCITY =	AVD.DEALERCITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE BRS ON BRS.CPPROVINCE = BRC.PCPROVINCE
				WHERE PI.STATUS = 'APPROVED' AND PI.PAYMENTAMOUNT > 0
				AND NOT (PI.ID IN( SELECT DISBURSEMENT_REQUESTS.DISBURSEMENT_ID FROM DISBURSEMENT_REQUESTS))
			]]>
		</createView>
	</changeSet>
	<changeSet id="571" author="saikrishna.k">
		<sql>
			<![CDATA[
				DELETE from ErrorDetails WHERE code='90355';
				INSERT INTO ErrorDetails VALUES('90355','EN','E','User actions are not availble with finreference {0}','','Approved','','','','','',0,CURRENT_TIMESTAMP,1000,0);
			]]>
		</sql>
	</changeSet>
	<changeSet id="572" author="Varaprasad.K">
		<addColumn tableName="CustomerBankInfo_Temp">
			<column name="PhoneNumber" type="VARCHAR2(20)" />
		</addColumn>
	</changeSet>
	<changeSet id="573" author="Varaprasad.K">
		<addColumn tableName="CustomerBankInfo">
			<column name="PhoneNumber" type="VARCHAR2(20)" />
		</addColumn>
	</changeSet>
	<changeSet id="574" author="Varaprasad  K">
		<createView viewName="customerbankinfo_aview" replaceIfExists="true">
		  <![CDATA[
			SELECT t1.bankid,
				    t1.custid,
				    t1.bankname,
				    t1.accountnumber,
				    t1.accounttype,
				    t1.salaryaccount,
				    t1.version,
				    t1.lastmntby,
				    t1.lastmnton,
				    t1.recordstatus,
				    t1.rolecode,
				    t1.nextrolecode,
				    t1.taskid,
				    t1.nexttaskid,
				    t1.recordtype,
				    t1.workflowid,
				    t3.bankname AS lovdescbankname,
				    t4.valuedesc AS lovdescaccounttype,
				    t1.credittranno,
				    t1.credittranamt,
				    t1.credittranavg,
				    t1.debittranno,
				    t1.debittranamt,
				    t1.cashdepositno,
				    t1.cashdepositamt,
				    t1.cashwithdrawalno,
				    t1.cashwithdrawalamt,
				    t1.chqdepositno,
				    t1.chqdepositamt,
				    t1.chqissueno,
				    t1.chqissueamt,
				    t1.inwardchqbounceno,
				    t1.outwardchqbounceno,
				    t1.eodbalmin,
				    t1.eodbalmax,
				    t1.eodbalavg,
				    t1.bankbranch,
				    t1.fromdate,
				    t1.todate,
				    t1.repaymentfrom,
				    t1.noofmonthsbanking,
				    t1.lwowratio,
				    t1.cclimit,
				    t1.typeofbanks,
				    t1.accountopeningdate,
					t1.addToBenficiary,
					t1.bankBranchID,
					t5.ifsc,
					t1.accountHolderName,
					t1.phoneNumber
				   FROM ((customerbankinfo t1
				     JOIN bmtbankdetail t3 ON (((t3.bankcode) = (t1.bankname))))
				     JOIN rmtlovfielddetail t4 ON ((((t4.fieldcodevalue) = (t1.accounttype)) AND ((t4.fieldcode) = 'ACC_TYPE')))
				     LEFT JOIN bankbranches t5 ON t1.bankbranchid = t5.bankbranchid)
				 ]]>
		</createView>
	</changeSet>
	<changeSet id="575" author="Varaprasad   K">
		<createView viewName="customerbankinfo_view" replaceIfExists="true">
		    <![CDATA[
				SELECT t1.bankid,
				    t1.custid,
				    t1.bankname,
				    t1.accountnumber,
				    t1.accounttype,
				    t1.salaryaccount,
				    t1.version,
				    t1.lastmntby,
				    t1.lastmnton,
				    t1.recordstatus,
				    t1.rolecode,
				    t1.nextrolecode,
				    t1.taskid,
				    t1.nexttaskid,
				    t1.recordtype,
				    t1.workflowid,
				    t3.bankname lovdescbankname,
				    t4.valuedesc lovdescaccounttype,
				    t1.credittranno,
				    t1.credittranamt,
				    t1.credittranavg,
				    t1.debittranno,
				    t1.debittranamt,
				    t1.cashdepositno,
				    t1.cashdepositamt,
				    t1.cashwithdrawalno,
				    t1.cashwithdrawalamt,
				    t1.chqdepositno,
				    t1.chqdepositamt,
				    t1.chqissueno,
				    t1.chqissueamt,
				    t1.inwardchqbounceno,
				    t1.outwardchqbounceno,
				    t1.eodbalmin,
				    t1.eodbalmax,
				    t1.eodbalavg,
				    t1.bankbranch,
				    t1.fromdate,
				    t1.todate,
				    t1.repaymentfrom,
				    t1.noofmonthsbanking,
				    t1.lwowratio,
				    t1.cclimit,
				    t1.typeofbanks,
				    t1.accountopeningdate,
					t1.addToBenficiary,
					t1.bankBranchID,
					t5.ifsc,
					t1.accountHolderName,
					t1.phoneNumber
				   FROM ((customerbankinfo_Temp t1
				     JOIN bmtbankdetail t3 ON (((t3.bankcode) = (t1.bankname))))
				     JOIN rmtlovfielddetail t4 ON ((((t4.fieldcodevalue) = (t1.accounttype)) AND ((t4.fieldcode) = 'ACC_TYPE')))
				     LEFT JOIN bankbranches t5 ON t1.bankbranchid = t5.bankbranchid)
				UNION ALL
				 SELECT t1.bankid,
				    t1.custid,
				    t1.bankname,
				    t1.accountnumber,
				    t1.accounttype,
				    t1.salaryaccount,
				    t1.version,
				    t1.lastmntby,
				    t1.lastmnton,
				    t1.recordstatus,
				    t1.rolecode,
				    t1.nextrolecode,
				    t1.taskid,
				    t1.nexttaskid,
				    t1.recordtype,
				    t1.workflowid,
				    t3.bankname lovdescbankname,
				    t4.valuedesc lovdescaccounttype,
				    t1.credittranno,
				    t1.credittranamt,
				    t1.credittranavg,
				    t1.debittranno,
				    t1.debittranamt,
				    t1.cashdepositno,
				    t1.cashdepositamt,
				    t1.cashwithdrawalno,
				    t1.cashwithdrawalamt,
				    t1.chqdepositno,
				    t1.chqdepositamt,
				    t1.chqissueno,
				    t1.chqissueamt,
				    t1.inwardchqbounceno,
				    t1.outwardchqbounceno,
				    t1.eodbalmin,
				    t1.eodbalmax,
				    t1.eodbalavg,
				    t1.bankbranch,
				    t1.fromdate,
				    t1.todate,
				    t1.repaymentfrom,
				    t1.noofmonthsbanking,
				    t1.lwowratio,
				    t1.cclimit,
				    t1.typeofbanks,
				    t1.accountopeningdate,
					t1.addToBenficiary,
					t1.bankBranchID,
					t5.ifsc,
					t1.accountHolderName,
					t1.phoneNumber
				   FROM ((customerbankinfo t1
				     JOIN bmtbankdetail t3 ON (((t3.bankcode) = (t1.bankname))))
				     JOIN rmtlovfielddetail t4 ON ((((t4.fieldcodevalue) = (t1.accounttype)) AND ((t4.fieldcode) = 'ACC_TYPE')))
				     LEFT JOIN bankbranches t5 ON t1.bankbranchid = t5.bankbranchid)
				  WHERE (NOT (EXISTS ( SELECT 1
				           FROM customerbankinfo_temp
				          WHERE (customerbankinfo_temp.bankid = t1.bankid))))
				]]>
		</createView>
	</changeSet>

	<changeSet id="576" author="lakshmi.n">
		<comment>COVENANT document category</comment>
		<sql>
			<![CDATA[
				delete from DocumentCategory where Code ='COVENANT';
				insert into DocumentCategory values((select max(id)+1 from DocumentCategory), 'COVENANT', 'Covenant Documents');
			]]>
		</sql>
	</changeSet>

	<changeSet id="577" author="Varaprasad.K">
		<sql>
			<![CDATA[
			        DELETE FROM SecRights where RightName='button_VASRecordingDialog_btnInsurance';
					DELETE FROM SECGROUPRIGHTS Where GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='InsuranceCalculation') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_VASRecordingDialog_btnInsurance');
					
					INSERT INTO SecRights values ((select MAX(rightid+1) from SecRights),2,'button_VASRecordingDialog_btnInsurance','VASRecordingDialog',0,1000,'2017-01-03 12:41:37','Approved',' ',' ',' ',' ',' ',0);
					INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='InsuranceCalculation') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_VASRecordingDialog_btnInsurance'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
					
					UPDATE SeqSecGroups SET SeqNo= (SELECT MAX(GRPID) FROM ( SELECT GRPID FROM SECGROUPS UNION SELECT GRPID FROM SECGROUPS_TEMP)t);
					UPDATE SeqSecRights SET SeqNo= (SELECT MAX(rightid) FROM SecRights );	
					UPDATE SeqSecGroupRights SET SeqNo= (SELECT MAX(GRPrightID) FROM (SELECT GRPrightID FROM SecGroupRights UNION SELECT GRPrightID FROM SecGroupRights_Temp)t);
			]]>
		</sql>
	</changeSet>

	<changeSet id="578" author="satyanarayana.g">
		<addColumn tableName="WIFFINANCEMAIN">
			<column name="CBAmount" type="Decimal(18,2)" />
			<column name="SvAmount" type="Decimal(18,2)" />
			<column name="SanBsdSchdle" type="boolean" />
			<column name="PromotionSeqID" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="579" author="satyanarayana.g">
		<addColumn tableName="WIFFINANCEMAIN_TEMP">
			<column name="CBAmount" type="Decimal(18,2)" />
			<column name="SvAmount" type="Decimal(18,2)" />
			<column name="SanBsdSchdle" type="boolean" />
			<column name="PromotionSeqID" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="580" author="satyanarayana.g">
		<sql>
			<![CDATA[
				UPDATE WIFFINANCEMAIN Set CBAmount = 0  where CBAmount is null;
				UPDATE WIFFINANCEMAIN Set SvAmount = 0 where SvAmount is null;
				UPDATE WIFFINANCEMAIN Set SanBsdSchdle = 0 where SanBsdSchdle is null;
				UPDATE WIFFINANCEMAIN Set PromotionSeqID = 0 where PromotionSeqID is null;
				UPDATE WIFFINANCEMAIN_TEMP Set CBAmount = 0 where CBAmount is null;
				UPDATE WIFFINANCEMAIN_TEMP Set SvAmount = 0 where SvAmount is null;
				UPDATE WIFFINANCEMAIN_TEMP Set SanBsdSchdle = 0 where SanBsdSchdle is null;
				UPDATE WIFFINANCEMAIN_TEMP Set PromotionSeqID = 0 where PromotionSeqID is null;
			]]>
		</sql>
	</changeSet>

	<changeSet id="581" author="satyanarayana.g" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE WIFFINANCEMAIN ADD CONSTRAINT DF_WIFFINANCEMAIN_CBAMT DEFAULT 0 FOR CBAmount;
				ALTER TABLE WIFFINANCEMAIN ADD CONSTRAINT DF_WIFFINANCEMAIN_SVAMT DEFAULT 0 FOR SvAmount;
				ALTER TABLE WIFFINANCEMAIN ADD CONSTRAINT DF_WIFFINANCEMAIN_SNBS DEFAULT 0 FOR SanBsdSchdle;
				ALTER TABLE WIFFINANCEMAIN ADD CONSTRAINT DF_WIFFINANCEMAIN_PRSQ DEFAULT 0 FOR PromotionSeqID;
				ALTER TABLE WIFFINANCEMAIN_TEMP ADD CONSTRAINT DF_WIFFINANCEMAIN_TEMP_CBAMT DEFAULT 0 FOR CBAmount;
				ALTER TABLE WIFFINANCEMAIN_TEMP ADD CONSTRAINT DF_WIFFINANCEMAIN_TEMP_SVAMT DEFAULT 0 FOR SvAmount;
				ALTER TABLE WIFFINANCEMAIN_TEMP ADD CONSTRAINT DF_WIFFINANCEMAIN_TEMP_SNBS DEFAULT 0 FOR SanBsdSchdle;
				ALTER TABLE WIFFINANCEMAIN_TEMP ADD CONSTRAINT DF_WIFFINANCEMAIN_TEMP_PRSQ DEFAULT 0 FOR PromotionSeqID;
			]]>
		</sql>
	</changeSet>

	<changeSet id="582" author="satyanarayana.g" dbms="postgresql, oracle">
		<addDefaultValue columnName="CBAmount" tableName="WIFFINANCEMAIN" defaultValue="0" />
		<addDefaultValue columnName="SvAmount" tableName="WIFFINANCEMAIN" defaultValue="0" />
		<addDefaultValue columnName="SanBsdSchdle" tableName="WIFFINANCEMAIN" defaultValue="0" />
		<addDefaultValue columnName="PromotionSeqID" tableName="WIFFINANCEMAIN" defaultValue="0" />
		<addDefaultValue columnName="CBAmount" tableName="WIFFINANCEMAIN_TEMP" defaultValue="0" />
		<addDefaultValue columnName="SvAmount" tableName="WIFFINANCEMAIN_TEMP" defaultValue="0" />
		<addDefaultValue columnName="SanBsdSchdle" tableName="WIFFINANCEMAIN_TEMP" defaultValue="0" />
		<addDefaultValue columnName="PromotionSeqID" tableName="WIFFINANCEMAIN_TEMP" defaultValue="0" />
	</changeSet>

	<changeSet id="583_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'wiffinancemain_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="583" author="satyanarayana.g">
		<createView viewName="WIFFINANCEMAIN_VIEW" replaceIfExists="true">
			<![CDATA[
			SELECT T1.FINREFERENCE,
					T1.NUMBEROFTERMS,
					T1.GRCPERIODENDDATE,
					T1.ALLOWGRCPERIOD,
					T1.GRACEBASERATE,
					T1.GRACESPECIALRATE,
					T1.GRCPFTRATE,
					T1.GRCPFTFRQ,
					T1.NEXTGRCPFTDATE,
					T1.ALLOWGRCPFTRVW,
					T1.GRCPFTRVWFRQ,
					T1.NEXTGRCPFTRVWDATE,
					T1.ALLOWGRCCPZ,
					T1.GRCCPZFRQ,
					T1.NEXTGRCCPZDATE,
					T1.REPAYBASERATE,
					T1.REPAYSPECIALRATE,
					T1.REPAYPROFITRATE,
					T1.REPAYFRQ,
					T1.NEXTREPAYDATE,
					T1.REPAYPFTFRQ,
					T1.NEXTREPAYPFTDATE,
					T1.ALLOWREPAYRVW,
					T1.REPAYRVWFRQ,
					T1.NEXTREPAYRVWDATE,
					T1.ALLOWREPAYCPZ,
					T1.REPAYCPZFRQ,
					T1.NEXTREPAYCPZDATE,
					T1.MATURITYDATE,
					T1.CPZATGRACEEND,
					T1.DOWNPAYMENT,
					T1.GRACEFLATAMOUNT,
					T1.REQREPAYAMOUNT,
					T1.TOTALPROFIT,
					T1.TOTALCPZ,
					T1.TOTALGROSSPFT,
					T1.TOTALGRACEPFT,
					T1.TOTALGRACECPZ,
					T1.GRCRATEBASIS,
					T1.REPAYRATEBASIS,
					T1.FINTYPE,
					T1.FINREMARKS,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.REQMATURITY,
					T1.CALTERMS,
					T1.CALMATURITY,
					T1.FIRSTREPAY,
					T1.LASTREPAY,
					T1.FINSTARTDATE,
					T1.FINAMOUNT,
					T1.FINREPAYMENTAMOUNT,
					T1.CUSTID,
					T1.DEFFERMENTS,
					T1.PLANDEFERCOUNT,
					T1.FINISACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T15.CUSTCIF  LOVDESCCUSTCIF,
					T7.FINTYPEDESC  LOVDESCFINTYPENAME,
					T1.FINBRANCH,
					T1.FINSOURCEID,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.ALLOWEDDEFFRQCHANGE,
					T1.AVAILEDDEFFRQCHANGE,
					T7.FINMAXAMOUNT  LOVDESCFINMAXAMT,
					T7.FINMINAMOUNT  LOVDESCFINMINAMOUNT,
					T7.FINISALWDIFFERMENT  LOVDESCFINALWDEFERMENT,
					T1.MINDOWNPAYPERC,
					T7.FINISDWPAYREQUIRED  LOVDESCDWNPAYREQ,
					T1.RECALTYPE,
					T1.FINASSETVALUE,
					T7.FINMAXDIFFERMENT  LOVDESCFINMAXDIFFERMENT,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.LASTREPAYRVWDATE,
					T1.LASTREPAYCPZDATE,
					T1.DISBACCOUNTID,
					T1.REPAYACCOUNTID,
					T1.ALLOWGRCREPAY,
					T1.GRCSCHDMTHD,
					T1.REPAYMARGIN,
					T1.GRCMARGIN,
					T1.DEPRECIATIONFRQ,
					T1.FINCOMMITMENTREF,
					T1.FINCURRASSETVALUE,
					T1.FINCONTRACTDATE,
					T1.NEXTDEPDATE,
					T1.LASTDEPDATE,
					T1.FINACCOUNT,
					T1.FINCUSTPFTACCOUNT,
					T7.FINRVWRATEAPPLFOR,
					T1.TOTALREPAYAMT,
					T1.CLOSINGSTATUS,
					T1.FINAPPROVEDDATE,
					T1.FINREPAYPFTONFRQ,
					T1.ANUALIZEDPERCRATE,
					T1.EFFECTIVERATEOFRETURN,
					T1.DOWNPAYBANK,
					T1.DOWNPAYSUPL,
					T7.FINDIVISION  LOVDESCFINDIVISIONNAME,
					T1.GRACETERMS,
					T14.FACILITYTYPE,
					T15.CUSTSHRTNAME  LOVDESCCUSTSHRTNAME,
					T16.BRANCHDESC  LOVDESCFINBRANCHNAME,
					T1.TOTALGROSSGRCPFT,
					T1.GRCPROFITDAYSBASIS,
					T1.STEPFINANCE,
					T1.STEPTYPE,
					T1.STEPPOLICY,
					T1.ALWMANUALSTEPS,
					T1.NOOFSTEPS,
					T1.LINKEDFINREF,
					T7.PRODUCT  LOVDESCFINPRODUCT,
					T1.GRCMINRATE,
					T1.GRCMAXRATE,
					T1.RPYMINRATE,
					T1.RPYMAXRATE,
					T1.MANUALSCHEDULE,
					T1.TAKEOVERFINANCE,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.SUPPLEMENTRENT,
					T1.INCREASEDCOST,
					T1.FEEACCOUNTID,
					T1.TDSAPPLICABLE,
					T1.INSURANCEAMT,
					T1.DEDUCTINSDISB,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.CALROUNDINGMODE,
					T1.ALWMULTIDISB,
					T1.BPIAMOUNT,
					T1.DEDUCTFEEDISB,
					T1.FEECHARGEAMT,
					T1.RVWRATEAPPLFOR,
					T1.SCHCALONRVW,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.FINCATEGORY,
					T1.PRODUCTCATEGORY,
					T1.ROUNDINGTARGET,
					T1.GRCMAXAMOUNT,
					T1.ADVANCEEMI,
					T1.ADVEMITERMS,
					T1.BPIPFTDAYSBASIS,
					T1.FIXEDTENORRATE,
					T1.FIXEDRATETENOR,
					T1.GRCADVTYPE,
					T1.GRCADVTERMS,
					T1.ADVTYPE,
					T1.ADVTERMS,
					T1.ADVSTAGE,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING,
					T1.APPLIEDLOANAMT,
					T1.FINISRATERVWATGRCEND,
					T1.CBAMOUNT,
					T1.SVAMOUNT,
					T1.SANBSDSCHDLE,
					T1.PROMOTIONSEQID
					FROM WIFFINANCEMAIN_TEMP T1
					LEFT JOIN WIFINDICATIVETERMDETAIL_TEMP T14 ON T14.FINREFERENCE = T1.FINREFERENCE
					LEFT JOIN CUSTOMERS T15 ON T15.CUSTID = T1.CUSTID
					JOIN RMTFINANCETYPES T7 ON T1.FINTYPE = T7.FINTYPE
					LEFT JOIN RMTBRANCHES T16 ON T1.FINBRANCH = T16.BRANCHCODE
					UNION ALL
					SELECT T1.FINREFERENCE,
					T1.NUMBEROFTERMS,
					T1.GRCPERIODENDDATE,
					T1.ALLOWGRCPERIOD,
					T1.GRACEBASERATE,
					T1.GRACESPECIALRATE,
					T1.GRCPFTRATE,
					T1.GRCPFTFRQ,
					T1.NEXTGRCPFTDATE,
					T1.ALLOWGRCPFTRVW,
					T1.GRCPFTRVWFRQ,
					T1.NEXTGRCPFTRVWDATE,
					T1.ALLOWGRCCPZ,
					T1.GRCCPZFRQ,
					T1.NEXTGRCCPZDATE,
					T1.REPAYBASERATE,
					T1.REPAYSPECIALRATE,
					T1.REPAYPROFITRATE,
					T1.REPAYFRQ,
					T1.NEXTREPAYDATE,
					T1.REPAYPFTFRQ,
					T1.NEXTREPAYPFTDATE,
					T1.ALLOWREPAYRVW,
					T1.REPAYRVWFRQ,
					T1.NEXTREPAYRVWDATE,
					T1.ALLOWREPAYCPZ,
					T1.REPAYCPZFRQ,
					T1.NEXTREPAYCPZDATE,
					T1.MATURITYDATE,
					T1.CPZATGRACEEND,
					T1.DOWNPAYMENT,
					T1.GRACEFLATAMOUNT,
					T1.REQREPAYAMOUNT,
					T1.TOTALPROFIT,
					T1.TOTALCPZ,
					T1.TOTALGROSSPFT,
					T1.TOTALGRACEPFT,
					T1.TOTALGRACECPZ,
					T1.GRCRATEBASIS,
					T1.REPAYRATEBASIS,
					T1.FINTYPE,
					T1.FINREMARKS,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.REQMATURITY,
					T1.CALTERMS,
					T1.CALMATURITY,
					T1.FIRSTREPAY,
					T1.LASTREPAY,
					T1.FINSTARTDATE,
					T1.FINAMOUNT,
					T1.FINREPAYMENTAMOUNT,
					T1.CUSTID,
					T1.DEFFERMENTS,
					T1.PLANDEFERCOUNT,
					T1.FINISACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T15.CUSTCIF  LOVDESCCUSTCIF,
					T7.FINTYPEDESC  LOVDESCFINTYPENAME,
					T1.FINBRANCH,
					T1.FINSOURCEID,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.ALLOWEDDEFFRQCHANGE,
					T1.AVAILEDDEFFRQCHANGE,
					T7.FINMAXAMOUNT  LOVDESCFINMAXAMT,
					T7.FINMINAMOUNT  LOVDESCFINMINAMOUNT,
					T7.FINISALWDIFFERMENT  LOVDESCFINALWDEFERMENT,
					T1.MINDOWNPAYPERC,
					T7.FINISDWPAYREQUIRED  LOVDESCDWNPAYREQ,
					T1.RECALTYPE,
					T1.FINASSETVALUE,
					T7.FINMAXDIFFERMENT  LOVDESCFINMAXDIFFERMENT,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.LASTREPAYRVWDATE,
					T1.LASTREPAYCPZDATE,
					T1.DISBACCOUNTID,
					T1.REPAYACCOUNTID,
					T1.ALLOWGRCREPAY,
					T1.GRCSCHDMTHD,
					T1.REPAYMARGIN,
					T1.GRCMARGIN,
					T1.DEPRECIATIONFRQ,
					T1.FINCOMMITMENTREF,
					T1.FINCURRASSETVALUE,
					T1.FINCONTRACTDATE,
					T1.NEXTDEPDATE,
					T1.LASTDEPDATE,
					T1.FINACCOUNT,
					T1.FINCUSTPFTACCOUNT,
					T7.FINRVWRATEAPPLFOR,
					T1.TOTALREPAYAMT,
					T1.CLOSINGSTATUS,
					T1.FINAPPROVEDDATE,
					T1.FINREPAYPFTONFRQ,
					T1.ANUALIZEDPERCRATE,
					T1.EFFECTIVERATEOFRETURN,
					T1.DOWNPAYBANK,
					T1.DOWNPAYSUPL,
					T7.FINDIVISION  LOVDESCFINDIVISIONNAME,
					T1.GRACETERMS,
					T14.FACILITYTYPE,
					T15.CUSTSHRTNAME  LOVDESCCUSTSHRTNAME,
					T16.BRANCHDESC  LOVDESCFINBRANCHNAME,
					T1.TOTALGROSSGRCPFT,
					T1.GRCPROFITDAYSBASIS,
					T1.STEPFINANCE,
					T1.STEPTYPE,
					T1.STEPPOLICY,
					T1.ALWMANUALSTEPS,
					T1.NOOFSTEPS,
					T1.LINKEDFINREF,
					T7.PRODUCT  LOVDESCFINPRODUCT,
					T1.GRCMINRATE,
					T1.GRCMAXRATE,
					T1.RPYMINRATE,
					T1.RPYMAXRATE,
					T1.MANUALSCHEDULE,
					T1.TAKEOVERFINANCE,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.SUPPLEMENTRENT,
					T1.INCREASEDCOST,
					T1.FEEACCOUNTID,
					T1.TDSAPPLICABLE,
					T1.INSURANCEAMT,
					T1.DEDUCTINSDISB,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.CALROUNDINGMODE,
					T1.ALWMULTIDISB,
					T1.BPIAMOUNT,
					T1.DEDUCTFEEDISB,
					T1.FEECHARGEAMT,
					T1.RVWRATEAPPLFOR,
					T1.SCHCALONRVW,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.FINCATEGORY,
					T1.PRODUCTCATEGORY,
					T1.ROUNDINGTARGET,
					T1.GRCMAXAMOUNT,
					T1.ADVANCEEMI,
					T1.ADVEMITERMS,
					T1.BPIPFTDAYSBASIS,
					T1.FIXEDTENORRATE,
					T1.FIXEDRATETENOR,
					T1.GRCADVTYPE,
					T1.GRCADVTERMS,
					T1.ADVTYPE,
					T1.ADVTERMS,
					T1.ADVSTAGE,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING,
					T1.APPLIEDLOANAMT,
					T1.FINISRATERVWATGRCEND,
					T1.CBAMOUNT,
					T1.SVAMOUNT,
					T1.SANBSDSCHDLE,
					T1.PROMOTIONSEQID
					FROM WIFFINANCEMAIN T1
					LEFT JOIN WIFINDICATIVETERMDETAIL_TEMP T14 ON T14.FINREFERENCE = T1.FINREFERENCE
					LEFT JOIN CUSTOMERS T15 ON T15.CUSTID = T1.CUSTID
					JOIN RMTFINANCETYPES T7 ON T1.FINTYPE = T7.FINTYPE
					LEFT JOIN RMTBRANCHES T16 ON T1.FINBRANCH = T16.BRANCHCODE
					WHERE NOT (EXISTS ( SELECT 1
					FROM WIFFINANCEMAIN_TEMP
					WHERE WIFFINANCEMAIN_TEMP.FINREFERENCE = T1.FINREFERENCE))
					]]>
		</createView>
	</changeSet>

	<changeSet id="583_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'wiffinancemain_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="584_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'wiffinancemain_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="584" author="satyanarayana.g">
		<createView viewName="WIFFINANCEMAIN_AVIEW" replaceIfExists="true">
			<![CDATA[
			SELECT T1.FINREFERENCE,
					T1.NUMBEROFTERMS,
					T1.GRCPERIODENDDATE,
					T1.ALLOWGRCPERIOD,
					T1.GRACEBASERATE,
					T1.GRACESPECIALRATE,
					T1.GRCPFTRATE,
					T1.GRCPFTFRQ,
					T1.NEXTGRCPFTDATE,
					T1.ALLOWGRCPFTRVW,
					T1.GRCPFTRVWFRQ,
					T1.NEXTGRCPFTRVWDATE,
					T1.ALLOWGRCCPZ,
					T1.GRCCPZFRQ,
					T1.NEXTGRCCPZDATE,
					T1.REPAYBASERATE,
					T1.REPAYSPECIALRATE,
					T1.REPAYPROFITRATE,
					T1.REPAYFRQ,
					T1.NEXTREPAYDATE,
					T1.REPAYPFTFRQ,
					T1.NEXTREPAYPFTDATE,
					T1.ALLOWREPAYRVW,
					T1.REPAYRVWFRQ,
					T1.NEXTREPAYRVWDATE,
					T1.ALLOWREPAYCPZ,
					T1.REPAYCPZFRQ,
					T1.NEXTREPAYCPZDATE,
					T1.MATURITYDATE,
					T1.CPZATGRACEEND,
					T1.DOWNPAYMENT,
					T1.GRACEFLATAMOUNT,
					T1.REQREPAYAMOUNT,
					T1.TOTALPROFIT,
					T1.TOTALCPZ,
					T1.TOTALGROSSPFT,
					T1.TOTALGRACEPFT,
					T1.TOTALGRACECPZ,
					T1.GRCRATEBASIS,
					T1.REPAYRATEBASIS,
					T1.FINTYPE,
					T1.FINREMARKS,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.REQMATURITY,
					T1.CALTERMS,
					T1.CALMATURITY,
					T1.FIRSTREPAY,
					T1.LASTREPAY,
					T1.FINSTARTDATE,
					T1.FINAMOUNT,
					T1.FINREPAYMENTAMOUNT,
					T1.CUSTID,
					T1.DEFFERMENTS,
					T1.PLANDEFERCOUNT,
					T1.FINISACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T15.CUSTCIF  LOVDESCCUSTCIF,
					T7.FINTYPEDESC  LOVDESCFINTYPENAME,
					T1.FINBRANCH,
					T1.FINSOURCEID,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.ALLOWEDDEFFRQCHANGE,
					T1.AVAILEDDEFFRQCHANGE,
					T7.FINMAXAMOUNT  LOVDESCFINMAXAMT,
					T7.FINMINAMOUNT  LOVDESCFINMINAMOUNT,
					T7.FINISALWDIFFERMENT  LOVDESCFINALWDEFERMENT,
					T1.MINDOWNPAYPERC,
					T7.FINISDWPAYREQUIRED  LOVDESCDWNPAYREQ,
					T1.RECALTYPE,
					T1.FINASSETVALUE,
					T7.FINMAXDIFFERMENT  LOVDESCFINMAXDIFFERMENT,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.LASTREPAYRVWDATE,
					T1.LASTREPAYCPZDATE,
					T1.DISBACCOUNTID,
					T1.REPAYACCOUNTID,
					T1.ALLOWGRCREPAY,
					T1.GRCSCHDMTHD,
					T1.REPAYMARGIN,
					T1.GRCMARGIN,
					T1.DEPRECIATIONFRQ,
					T1.FINCOMMITMENTREF,
					T1.FINCURRASSETVALUE,
					T1.FINCONTRACTDATE,
					T1.NEXTDEPDATE,
					T1.LASTDEPDATE,
					T1.FINACCOUNT,
					T1.FINCUSTPFTACCOUNT,
					T7.FINRVWRATEAPPLFOR,
					T1.TOTALREPAYAMT,
					T1.CLOSINGSTATUS,
					T1.FINAPPROVEDDATE,
					T1.FINREPAYPFTONFRQ,
					T1.ANUALIZEDPERCRATE,
					T1.EFFECTIVERATEOFRETURN,
					T1.DOWNPAYBANK,
					T1.DOWNPAYSUPL,
					T7.FINDIVISION  LOVDESCFINDIVISIONNAME,
					T1.GRACETERMS,
					T14.FACILITYTYPE,
					T15.CUSTSHRTNAME  LOVDESCCUSTSHRTNAME,
					T16.BRANCHDESC  LOVDESCFINBRANCHNAME,
					T1.TOTALGROSSGRCPFT,
					T1.GRCPROFITDAYSBASIS,
					T1.STEPFINANCE,
					T1.STEPTYPE,
					T1.STEPPOLICY,
					T1.ALWMANUALSTEPS,
					T1.NOOFSTEPS,
					T1.LINKEDFINREF,
					T7.PRODUCT  LOVDESCFINPRODUCT,
					T1.GRCMINRATE,
					T1.GRCMAXRATE,
					T1.RPYMINRATE,
					T1.RPYMAXRATE,
					T1.MANUALSCHEDULE,
					T1.TAKEOVERFINANCE,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.SUPPLEMENTRENT,
					T1.INCREASEDCOST,
					T1.FEEACCOUNTID,
					T1.TDSAPPLICABLE,
					T1.INSURANCEAMT,
					T1.DEDUCTINSDISB,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.CALROUNDINGMODE,
					T1.ALWMULTIDISB,
					T1.BPIAMOUNT,
					T1.DEDUCTFEEDISB,
					T1.FEECHARGEAMT,
					T1.RVWRATEAPPLFOR,
					T1.SCHCALONRVW,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.ROUNDINGTARGET,
					T1.GRCMAXAMOUNT,
					T1.ADVANCEEMI,
					T1.ADVEMITERMS,
					T1.BPIPFTDAYSBASIS  BPIRATEBASIS,
					T1.GRCADVTYPE,
					T1.GRCADVTERMS,
					T1.ADVTYPE,
					T1.ADVTERMS,
					T1.ADVSTAGE,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING,
					T1.APPLIEDLOANAMT,
					T1.FINISRATERVWATGRCEND,
					T1.CBAMOUNT,
					T1.SVAMOUNT,
					T1.SANBSDSCHDLE,
					T1.PROMOTIONSEQID
					FROM WIFFINANCEMAIN T1
					LEFT JOIN WIFINDICATIVETERMDETAIL_TEMP T14 ON T14.FINREFERENCE = T1.FINREFERENCE
					LEFT JOIN CUSTOMERS T15 ON T15.CUSTID = T1.CUSTID
					JOIN RMTFINANCETYPES T7 ON T1.FINTYPE = T7.FINTYPE
					LEFT JOIN RMTBRANCHES T16 ON T1.FINBRANCH = T16.BRANCHCODE
					]]>
		</createView>
	</changeSet>

	<changeSet id="584_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'wiffinancemain_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="585" author="Manoj.P">
		<sql>
			<![CDATA[
				Delete from SMTPARAMETERS where SYSPARMCODE = 'QUERY_NOTIFICATION_REQ';
				Insert into SMTPARAMETERS (SYSPARMCODE,SYSPARMDESC,SYSPARMTYPE,SYSPARMMAINT,SYSPARMVALUE,SYSPARMLENGTH,SYSPARMDEC,SYSPARMLIST,SYSPARMVALDMOD,SYSPARMDESCRIPTION,VERSION,LASTMNTBY,LASTMNTON,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID) values ('QUERY_NOTIFICATION_REQ','Query Notification Required or not','String',1,'N',3,0,null,null,'Query Notification Required or not',1,1000,current_timestamp,'Approved',null,null,null,null,null,0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="586" author="vijaya.a" dbms="postgresql,oracle">
		<createView viewName="INT_DISBURSEMENT_REQUEST_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FA.PAYMENTID,
				FA.FINREFERENCE,
				'D' CHANNEL,
				0 PROVIDERID,
				CASE
				WHEN FA.PAYMENTTYPE = 'NEFT'
				THEN 'N'
				WHEN FA.PAYMENTTYPE = 'RTGS'
				THEN 'R'
				WHEN
				FA.PAYMENTTYPE = 'DD'
				THEN 'D'
				WHEN FA.PAYMENTTYPE = 'CHEQUE'
				THEN 'C'
				ELSE FA.PAYMENTTYPE
				END DISBURSEMENT_TYPE,
				FA.AMTTOBERELEASED,
				FA.DISBDATE,
				FA.LLDATE,
				FA.PAYABLELOC,
				FA.PRINTINGLOC,
				CU.CUSTCIF,
				CU.CUSTSHRTNAME,
				'' CUSTOMER_MOBILE,
				CE.CUSTEMAIL CUSTOMER_EMAIL,
				CS.CPPROVINCENAME CUSTOMER_STATE,
				CC.PCCITYNAME CUSTOMER_CITY,
				'' CUSTOMER_ADDRESS1,
				'' CUSTOMER_ADDRESS2,
				'' CUSTOMER_ADDRESS3,
				'' CUSTOMER_ADDRESS4,
				'' CUSTOMER_ADDRESS5,
				BD.BANKNAME,
				BB.BRANCHCODE,
				BB.BRANCHDESC,
				PBD.CPPROVINCENAME BENFICIARY_BRANCH_STATE,
				PBD.PCCITYNAME BENFICIARY_BRANCH_CITY,
				BB.MICR MICR_CODE,
				BB.IFSC IFSC_CODE,
				FA.BENEFICIARYACCNO,
				CASE
				WHEN FA.PAYMENTTYPE = 'CHEQUE'
				OR FA.PAYMENTTYPE = 'DD'
				THEN
				FA.LIABILITYHOLDNAME
				ELSE FA.BENEFICIARYNAME
				END BENEFICIARYNAME,
				(FA.PHONECOUNTRYCODE || FA.PHONEAREACODE) || FA.PHONENUMBER BENEFICIARY_MOBILE,
				BCE.CUSTEMAIL BENFICIRY_EMAIL,
				BRS.CPPROVINCENAME BENFICIARY_STATE,
				BRC.PCCITYNAME BENFICIARY_CITY,
				BRCA.CustAddrHNbr ||','|| BRCA.CustAddrStreet ||','|| BRC.PCCITYNAME ||','|| BRS.CPPROVINCENAME  BENFICIARY_ADDRESS1,
				'' BENFICIARY_ADDRESS2,
				'' BENFICIARY_ADDRESS3,
				'' BENFICIARY_ADDRESS4,
				'' BENFICIARY_ADDRESS5,
				'' PAYMENT_DETAIL1,
				'' PAYMENT_DETAIL2,
				'' PAYMENT_DETAIL3,
				'' PAYMENT_DETAIL4,
				'' PAYMENT_DETAIL5,
				'' PAYMENT_DETAIL6,
				'' PAYMENT_DETAIL7,
				FA.STATUS,
				FA.DESCRIPTION REMARKS,
				FA.PAYMENTTYPE,
				FM.FINTYPE,
				PB.PARTNERBANKID
				PARTNERBANK_ID,
				PB.PARTNERBANKCODE PARTNERBANK_CODE,
				FA.INPUTDATE,
				PB.ALWFILEDOWNLOAD,
				PB.FILENAME,
				FM.FINISACTIVE,
				SMD.ENTITYCODE,
				PB.ACCOUNTNO PARTNERBANK_ACCOUNT
				FROM FINADVANCEPAYMENTS FA
				JOIN
				(SELECT FINANCEMAIN_TEMP.CUSTID,
				FINANCEMAIN_TEMP.FINREFERENCE,
				FINANCEMAIN_TEMP.FINTYPE,
				FINANCEMAIN_TEMP.FINISACTIVE
				FROM FINANCEMAIN_TEMP
				UNION ALL
				SELECT T2.CUSTID,
				T2.FINREFERENCE,
				T2.FINTYPE,
				T2.FINISACTIVE
				FROM FINANCEMAIN T2
				WHERE NOT (EXISTS
				( SELECT 1 FROM
				FINANCEMAIN_TEMP T3 WHERE T3.FINREFERENCE = T2.FINREFERENCE))) FM
				ON FM.FINREFERENCE = FA.FINREFERENCE
				JOIN CUSTOMERS CU ON CU.CUSTID = FM.CUSTID	
				JOIN RMTCURRENCIES CCY ON CCY.CCYCODE	= FA.DISBCCY
				JOIN PARTNERBANKS PB ON PB.PARTNERBANKID = FA.PARTNERBANKID
				LEFT JOIN CUSTOMEREMAILS CE	ON CE.CUSTID = CU.CUSTID AND CE.CUSTEMAILPRIORITY = 5
				LEFT JOIN CUSTOMERADDRESSES CA ON CA.CUSTID = CE.CUSTID	AND CA.CUSTADDRPRIORITY = 5
				LEFT JOIN RMTPROVINCEVSCITY CC ON CC.PCCITY = CA.CUSTADDRCITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE CS ON CS.CPPROVINCE = CC.PCPROVINCE
				LEFT JOIN BANKBRANCHES BB ON BB.BANKBRANCHID = FA.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL BD ON BD.BANKCODE =	BB.BANKCODE
				LEFT JOIN ( SELECT PB_1.PARTNERBANKID,	
				PBD_1.BANKNAME,
				PBB.BRANCHDESC,
				PBBRC.PCCITYNAME,
				PBBRS.CPPROVINCENAME FROM PARTNERBANKS PB_1
				JOIN BANKBRANCHES PBB ON PBB.BRANCHCODE = PB_1.BANKBRANCHCODE
				JOIN BMTBANKDETAIL PBD_1 ON PBD_1.BANKCODE = PBB.BANKCODE
				LEFT JOIN RMTPROVINCEVSCITY PBBRC ON PBBRC.PCCITY = PBB.CITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE PBBRS ON PBBRS.CPPROVINCE = PBBRC.PCPROVINCE
				) PBD ON PBD.PARTNERBANKID = PB.PARTNERBANKID
				LEFT JOIN BENEFICIARY BR ON BR.BANKBRANCHID = FA.BANKBRANCHID AND
				BR.ACCNUMBER = FA.BENEFICIARYACCNO AND BR.CUSTID = FM.CUSTID
				LEFT JOIN CUSTOMERS BC ON BC.CUSTID = BR.CUSTID
				LEFT JOIN CUSTOMEREMAILS BCE ON BCE.CUSTID = CU.CUSTID
				AND BCE.CUSTEMAILPRIORITY = 5
				LEFT JOIN CUSTOMERADDRESSES	BRCA ON	BRCA.CUSTID = BR.CUSTID
				AND BRCA.CUSTADDRPRIORITY = 5
				LEFT JOIN RMTPROVINCEVSCITY BRC	ON BRC.PCCITY =	BRCA.CUSTADDRCITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE BRS ON BRS.CPPROVINCE = BRC.PCPROVINCE
				LEFT JOIN RMTFINANCETYPES RFT ON FM.FINTYPE = RFT.FINTYPE
				LEFT JOIN SMTDIVISIONDETAIL SMD	ON RFT.FINDIVISION = SMD.DIVISIONCODE
				WHERE FA.STATUS = 'APPROVED' AND NOT (FA.PAYMENTID IN ( 
				SELECT DISBURSEMENT_REQUESTS.DISBURSEMENT_ID FROM DISBURSEMENT_REQUESTS))
				AND NOT	(FA.PAYMENTID IN ( SELECT FINADVANCEPAYMENTS_TEMP.PAYMENTID FROM FINADVANCEPAYMENTS_TEMP))
				UNION ALL
				SELECT
				PI.PAYMENTINSTRUCTIONID PAYMENTID,
				PH.FINREFERENCE,
				PH.PAYMENTTYPE CHANNEL,
				0 PROVIDERID,
				CASE
				WHEN PI.PAYMENTTYPE =
				'NEFT'
				THEN 'N'
				WHEN PI.PAYMENTTYPE = 'RTGS'
				THEN 'R'
				WHEN PI.PAYMENTTYPE = 'DD'
				THEN 'D'
				WHEN PI.PAYMENTTYPE = 'CHEQUE'
				THEN 'C'
				ELSE PI.PAYMENTTYPE
				END DISBURSEMENT_TYPE,
				PI.PAYMENTAMOUNT / CCY.CCYMINORCCYUNITS AMTTOBERELEASED,
				PI.POSTDATE
				DISBDATE,
				PI.POSTDATE LLDATE,
				PI.PAYABLELOC,
				PI.PRINTINGLOC,
				CU.CUSTCIF,
				CU.CUSTSHRTNAME,
				'' CUSTOMER_MOBILE,
				CE.CUSTEMAIL
				CUSTOMER_EMAIL,
				CS.CPPROVINCENAME CUSTOMER_STATE,
				CC.PCCITYNAME CUSTOMER_CITY,
				'' CUSTOMER_ADDRESS1,
				'' CUSTOMER_ADDRESS2,
				'' CUSTOMER_ADDRESS3,
				'' CUSTOMER_ADDRESS4,
				'' CUSTOMER_ADDRESS5,
				BD.BANKNAME,
				BB.BRANCHCODE,
				BB.BRANCHDESC,
				BBRS.CPPROVINCENAME BENFICIARY_BRANCH_STATE,
				BBRC.PCCITYNAME BENFICIARY_BRANCH_CITY,
				BB.MICR MICR_CODE,
				BB.IFSC IFSC_CODE,
				PI.ACCOUNTNO BENEFICIARYACCNO,
				CASE
				WHEN PI.PAYMENTTYPE = 'CHEQUE'
				OR PI.PAYMENTTYPE = 'DD'
				THEN
				PI.FAVOURNAME
				ELSE PI.ACCTHOLDERNAME
				END BENEFICIARYNAME,
				PI.PHONECOUNTRYCODE || PI.PHONENUMBER BENEFICIARY_MOBILE,
				BCE.CUSTEMAIL BENFICIRY_EMAIL,
				BRS.CPPROVINCENAME BENFICIARY_STATE,
				BRC.PCCITYNAME BENFICIARY_CITY,
				'' BENFICIARY_ADDRESS1,
				'' BENFICIARY_ADDRESS2,
				'' BENFICIARY_ADDRESS3,
				'' BENFICIARY_ADDRESS4,
				'' BENFICIARY_ADDRESS5,
				'' PAYMENT_DETAIL1,
				'' PAYMENT_DETAIL2,
				'' PAYMENT_DETAIL3,
				'' PAYMENT_DETAIL4,
				'' PAYMENT_DETAIL5,
				'' PAYMENT_DETAIL6,
				'' PAYMENT_DETAIL7,
				PI.STATUS,
				PI.REMARKS,
				PI.PAYMENTTYPE,
				FM.FINTYPE,
				PB.PARTNERBANKID PARTNERBANK_ID,
				PB.PARTNERBANKCODE
				PARTNERBANK_CODE,
				PI.POSTDATE INPUTDATE,
				PB.ALWFILEDOWNLOAD,
				PB.FILENAME,
				FM.FINISACTIVE,
				SMD.ENTITYCODE,
				PB.ACCOUNTNO
				PARTNERBANK_ACCOUNTNO
				FROM PAYMENTINSTRUCTIONS PI
				JOIN PAYMENTHEADER PH ON PH.PAYMENTID = PI.PAYMENTID
				JOIN (SELECT
				FINANCEMAIN.CUSTID,
				FINANCEMAIN.FINREFERENCE,
				FINANCEMAIN.FINTYPE,
				FINANCEMAIN.FINISACTIVE
				FROM FINANCEMAIN
				UNION ALL
				SELECT T2.CUSTID,
				T2.FINREFERENCE,
				T2.FINTYPE,
				T2.FINISACTIVE
				FROM FINANCEMAIN_TEMP T2
				WHERE NOT (EXISTS
				( SELECT 1 FROM
				FINANCEMAIN_TEMP T3 WHERE T3.FINREFERENCE = T2.FINREFERENCE))) FM ON FM.FINREFERENCE = PH.FINREFERENCE
				JOIN CUSTOMERS CU ON CU.CUSTID = FM.CUSTID
				JOIN RMTCURRENCIES CCY ON CCY.CCYCODE = PI.PAYMENTCCY
				JOIN PARTNERBANKS PB ON PB.PARTNERBANKID = PI.PARTNERBANKID
				LEFT JOIN CUSTOMEREMAILS CE ON CE.CUSTID = CU.CUSTID AND CE.CUSTEMAILPRIORITY = 5
				LEFT JOIN CUSTOMERADDRESSES CA ON CA.CUSTID = CE.CUSTID AND CA.CUSTADDRPRIORITY = 5
				LEFT JOIN RMTPROVINCEVSCITY CC ON CC.PCCITY = CA.CUSTADDRCITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE CS ON CS.CPPROVINCE = CC.PCPROVINCE
				LEFT JOIN CUSTOMERPHONENUMBERS CM ON CM.PHONECUSTID = CU.CUSTID
				AND CM.PHONETYPECODE = 'MOBILE1' AND CM.PHONETYPEPRIORITY = 5
				LEFT JOIN BANKBRANCHES BB ON BB.BANKBRANCHID = PI.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL BD ON BD.BANKCODE = BB.BANKCODE
				LEFT JOIN RMTPROVINCEVSCITY	BBRC ON BBRC.PCCITY = BB.CITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE BBRS	ON BBRS.CPPROVINCE = BBRC.PCPROVINCE
				LEFT JOIN BENEFICIARY BR ON BR.BANKBRANCHID = PI.BANKBRANCHID
				AND BR.ACCNUMBER = PI.ACCOUNTNO	AND BR.CUSTID = FM.CUSTID
				LEFT JOIN CUSTOMERS BC ON BC.CUSTID = BR.CUSTID
				LEFT JOIN CUSTOMEREMAILS BCE ON	BCE.CUSTID = CU.CUSTID AND BCE.CUSTEMAILPRIORITY = 5
				LEFT JOIN CUSTOMERADDRESSES BRCA ON BRCA.CUSTID = BR.CUSTID	AND	BRCA.CUSTADDRPRIORITY = 5
				LEFT JOIN RMTPROVINCEVSCITY BRC	ON BRC.PCCITY = BRCA.CUSTADDRCITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE BRS ON BRS.CPPROVINCE = BRC.PCPROVINCE
				LEFT JOIN RMTFINANCETYPES RFT ON FM.FINTYPE = RFT.FINTYPE
				LEFT JOIN SMTDIVISIONDETAIL SMD	ON RFT.FINDIVISION = SMD.DIVISIONCODE
				WHERE PI.STATUS = 'APPROVED'
				AND NOT
				(PI.PAYMENTINSTRUCTIONID IN
				( SELECT DISBURSEMENT_REQUESTS.DISBURSEMENT_ID FROM
				DISBURSEMENT_REQUESTS
				))
				UNION ALL
				SELECT PI.ID PAYMENTID,
				VR.PRIMARYLINKREF FINREFERENCE,
				'I' CHANNEL,
				PI.PROVIDERID,
				CASE
				WHEN
				PI.PAYMENTTYPE = 'NEFT'
				THEN 'N'
				WHEN PI.PAYMENTTYPE = 'RTGS'
				THEN 'R'
				WHEN PI.PAYMENTTYPE = 'DD'
				THEN 'D'
				WHEN
				PI.PAYMENTTYPE = 'CHEQUE'
				THEN 'C'
				ELSE PI.PAYMENTTYPE
				END DISBURSEMENT_TYPE,
				PI.PAYMENTAMOUNT / CCY.CCYMINORCCYUNITS
				AMTTOBERELEASED,
				PI.PAYMENTDATE DISBDATE,
				PI.PAYMENTDATE LLDATE,
				'' PAYABLELOC,
				'' PRINTINGLOC,
				'' CUSTCIF,
				'' CUSTSHRTNAME,
				'' CUSTOMER_MOBILE,
				'' CUSTOMER_EMAIL,
				'' CUSTOMER_STATE,
				'' CUSTOMER_CITY,
				'' CUSTOMER_ADDRESS1,
				'' CUSTOMER_ADDRESS2,
				'' CUSTOMER_ADDRESS3,
				'' CUSTOMER_ADDRESS4,
				'' CUSTOMER_ADDRESS5,
				BD.BANKNAME,
				BB.BRANCHCODE,
				BB.BRANCHDESC,
				BBRS.CPPROVINCENAME BENFICIARY_BRANCH_STATE,
				BBRC.PCCITYNAME BENFICIARY_BRANCH_CITY,
				BB.MICR MICR_CODE,
				BB.IFSC IFSC_CODE,
				VPA.ACCOUNTNUMBER BENEFICIARYACCNO,
				AVD.DEALERNAME BENEFICIARYNAME,
				AVD.DEALERTELEPHONE
				BENEFICIARY_MOBILE,
				AVD.EMAIL BENFICIRY_EMAIL,
				BRS.CPPROVINCENAME BENFICIARY_STATE,
				BRC.PCCITYNAME BENFICIARY_CITY,
				AVD.DEALERADDRESS1 BENFICIARY_ADDRESS1,
				AVD.DEALERADDRESS2 BENFICIARY_ADDRESS2,
				AVD.DEALERADDRESS3 BENFICIARY_ADDRESS3,
				'' BENFICIARY_ADDRESS4,
				'' BENFICIARY_ADDRESS5,
				'' PAYMENT_DETAIL1,
				'' PAYMENT_DETAIL2,
				'' PAYMENT_DETAIL3,
				'' PAYMENT_DETAIL4,
				'' PAYMENT_DETAIL5,
				'' PAYMENT_DETAIL6,
				'' PAYMENT_DETAIL7,
				PI.STATUS,
				PI.REMARKS,
				PI.PAYMENTTYPE,
				'' FINTYPE,
				PB.PARTNERBANKID PARTNERBANK_ID,
				PB.PARTNERBANKCODE PARTNERBANK_CODE,
				PI.PAYMENTDATE INPUTDATE,
				PB.ALWFILEDOWNLOAD,
				PB.FILENAME,
				1 FINISACTIVE,
				PI.ENTITYCODE,
				PB.ACCOUNTNO PARTNERBANK_ACCOUNT
				FROM INSURANCEPAYMENTINSTRUCTIONS PI
				JOIN RMTCURRENCIES CCY ON CCY.CCYCODE = PI.PAYMENTCCY
				JOIN PARTNERBANKS PB ON	PB.PARTNERBANKID = PI.PARTNERBANKID
				JOIN VASPROVIDERACCDETAIL VPA ON VPA.PROVIDERID = PI.PROVIDERID
				JOIN AMTVEHICLEDEALER AVD ON AVD.DEALERID = VPA.PROVIDERID
				JOIN VASRECORDING VR ON VR.PAYMENTINSID = PI.ID
				LEFT JOIN BANKBRANCHES BB ON BB.BANKBRANCHID = VPA.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL BD ON BD.BANKCODE = BB.BANKCODE
				LEFT JOIN RMTPROVINCEVSCITY BBRC ON BBRC.PCCITY	= BB.CITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE BBRS	ON BBRS.CPPROVINCE = BBRC.PCPROVINCE
				LEFT JOIN RMTPROVINCEVSCITY BRC	ON BRC.PCCITY =	AVD.DEALERCITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE BRS ON BRS.CPPROVINCE = BRC.PCPROVINCE
				WHERE PI.STATUS = 'APPROVED' AND PI.PAYMENTAMOUNT > 0
				AND NOT (PI.ID IN( SELECT DISBURSEMENT_REQUESTS.DISBURSEMENT_ID FROM DISBURSEMENT_REQUESTS))
			]]>
		</createView>
	</changeSet>

	<changeSet id="586.1" author="vijaya.a" dbms="mssql">
		<createView viewName="INT_DISBURSEMENT_REQUEST_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FA.PAYMENTID,
				FA.FINREFERENCE,
				'D' CHANNEL,
				0 PROVIDERID,
				CASE
				WHEN FA.PAYMENTTYPE = 'NEFT'
				THEN 'N'
				WHEN FA.PAYMENTTYPE = 'RTGS'
				THEN 'R'
				WHEN
				FA.PAYMENTTYPE = 'DD'
				THEN 'D'
				WHEN FA.PAYMENTTYPE = 'CHEQUE'
				THEN 'C'
				ELSE FA.PAYMENTTYPE
				END DISBURSEMENT_TYPE,
				FA.AMTTOBERELEASED,
				FA.DISBDATE,
				FA.LLDATE,
				FA.PAYABLELOC,
				FA.PRINTINGLOC,
				CU.CUSTCIF,
				CU.CUSTSHRTNAME,
				'' CUSTOMER_MOBILE,
				CE.CUSTEMAIL CUSTOMER_EMAIL,
				CS.CPPROVINCENAME CUSTOMER_STATE,
				CC.PCCITYNAME CUSTOMER_CITY,
				'' CUSTOMER_ADDRESS1,
				'' CUSTOMER_ADDRESS2,
				'' CUSTOMER_ADDRESS3,
				'' CUSTOMER_ADDRESS4,
				'' CUSTOMER_ADDRESS5,
				BD.BANKNAME,
				BB.BRANCHCODE,
				BB.BRANCHDESC,
				PBD.CPPROVINCENAME BENFICIARY_BRANCH_STATE,
				PBD.PCCITYNAME BENFICIARY_BRANCH_CITY,
				BB.MICR MICR_CODE,
				BB.IFSC IFSC_CODE,
				FA.BENEFICIARYACCNO,
				CASE
				WHEN FA.PAYMENTTYPE = 'CHEQUE'
				OR FA.PAYMENTTYPE = 'DD'
				THEN
				FA.LIABILITYHOLDNAME
				ELSE FA.BENEFICIARYNAME
				END BENEFICIARYNAME,
				(FA.PHONECOUNTRYCODE + FA.PHONEAREACODE) + FA.PHONENUMBER BENEFICIARY_MOBILE,
				BCE.CUSTEMAIL BENFICIRY_EMAIL,
				BRS.CPPROVINCENAME BENFICIARY_STATE,
				BRC.PCCITYNAME BENFICIARY_CITY,
				BRCA.CustAddrHNbr +','+ BRCA.CustAddrStreet +','+ BRC.PCCITYNAME +','+ BRS.CPPROVINCENAME  BENFICIARY_ADDRESS1,
				'' BENFICIARY_ADDRESS2,
				'' BENFICIARY_ADDRESS3,
				'' BENFICIARY_ADDRESS4,
				'' BENFICIARY_ADDRESS5,
				'' PAYMENT_DETAIL1,
				'' PAYMENT_DETAIL2,
				'' PAYMENT_DETAIL3,
				'' PAYMENT_DETAIL4,
				'' PAYMENT_DETAIL5,
				'' PAYMENT_DETAIL6,
				'' PAYMENT_DETAIL7,
				FA.STATUS,
				FA.DESCRIPTION REMARKS,
				FA.PAYMENTTYPE,
				FM.FINTYPE,
				PB.PARTNERBANKID
				PARTNERBANK_ID,
				PB.PARTNERBANKCODE PARTNERBANK_CODE,
				FA.INPUTDATE,
				PB.ALWFILEDOWNLOAD,
				PB.FILENAME,
				FM.FINISACTIVE,
				SMD.ENTITYCODE,
				PB.ACCOUNTNO PARTNERBANK_ACCOUNT
				FROM FINADVANCEPAYMENTS FA
				JOIN
				(SELECT FINANCEMAIN_TEMP.CUSTID,
				FINANCEMAIN_TEMP.FINREFERENCE,
				FINANCEMAIN_TEMP.FINTYPE,
				FINANCEMAIN_TEMP.FINISACTIVE
				FROM FINANCEMAIN_TEMP
				UNION ALL
				SELECT T2.CUSTID,
				T2.FINREFERENCE,
				T2.FINTYPE,
				T2.FINISACTIVE
				FROM FINANCEMAIN T2
				WHERE NOT (EXISTS
				( SELECT 1 FROM
				FINANCEMAIN_TEMP T3 WHERE T3.FINREFERENCE = T2.FINREFERENCE))) FM
				ON FM.FINREFERENCE = FA.FINREFERENCE
				JOIN CUSTOMERS CU ON CU.CUSTID = FM.CUSTID	
				JOIN RMTCURRENCIES CCY ON CCY.CCYCODE	= FA.DISBCCY
				JOIN PARTNERBANKS PB ON PB.PARTNERBANKID = FA.PARTNERBANKID
				LEFT JOIN CUSTOMEREMAILS CE	ON CE.CUSTID = CU.CUSTID AND CE.CUSTEMAILPRIORITY = 5
				LEFT JOIN CUSTOMERADDRESSES CA ON CA.CUSTID = CE.CUSTID	AND CA.CUSTADDRPRIORITY = 5
				LEFT JOIN RMTPROVINCEVSCITY CC ON CC.PCCITY = CA.CUSTADDRCITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE CS ON CS.CPPROVINCE = CC.PCPROVINCE
				LEFT JOIN BANKBRANCHES BB ON BB.BANKBRANCHID = FA.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL BD ON BD.BANKCODE =	BB.BANKCODE
				LEFT JOIN ( SELECT PB_1.PARTNERBANKID,	
				PBD_1.BANKNAME,
				PBB.BRANCHDESC,
				PBBRC.PCCITYNAME,
				PBBRS.CPPROVINCENAME FROM PARTNERBANKS PB_1
				JOIN BANKBRANCHES PBB ON PBB.BRANCHCODE = PB_1.BANKBRANCHCODE
				JOIN BMTBANKDETAIL PBD_1 ON PBD_1.BANKCODE = PBB.BANKCODE
				LEFT JOIN RMTPROVINCEVSCITY PBBRC ON PBBRC.PCCITY = PBB.CITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE PBBRS ON PBBRS.CPPROVINCE = PBBRC.PCPROVINCE
				) PBD ON PBD.PARTNERBANKID = PB.PARTNERBANKID
				LEFT JOIN BENEFICIARY BR ON BR.BANKBRANCHID = FA.BANKBRANCHID AND
				BR.ACCNUMBER = FA.BENEFICIARYACCNO AND BR.CUSTID = FM.CUSTID
				LEFT JOIN CUSTOMERS BC ON BC.CUSTID = BR.CUSTID
				LEFT JOIN CUSTOMEREMAILS BCE ON BCE.CUSTID = CU.CUSTID
				AND BCE.CUSTEMAILPRIORITY = 5
				LEFT JOIN CUSTOMERADDRESSES	BRCA ON	BRCA.CUSTID = BR.CUSTID
				AND BRCA.CUSTADDRPRIORITY = 5
				LEFT JOIN RMTPROVINCEVSCITY BRC	ON BRC.PCCITY =	BRCA.CUSTADDRCITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE BRS ON BRS.CPPROVINCE = BRC.PCPROVINCE
				LEFT JOIN RMTFINANCETYPES RFT ON FM.FINTYPE = RFT.FINTYPE
				LEFT JOIN SMTDIVISIONDETAIL SMD	ON RFT.FINDIVISION = SMD.DIVISIONCODE
				WHERE FA.STATUS = 'APPROVED' AND NOT (FA.PAYMENTID IN ( 
				SELECT DISBURSEMENT_REQUESTS.DISBURSEMENT_ID FROM DISBURSEMENT_REQUESTS))
				AND NOT	(FA.PAYMENTID IN ( SELECT FINADVANCEPAYMENTS_TEMP.PAYMENTID FROM FINADVANCEPAYMENTS_TEMP))
				UNION ALL
				SELECT
				PI.PAYMENTINSTRUCTIONID PAYMENTID,
				PH.FINREFERENCE,
				PH.PAYMENTTYPE CHANNEL,
				0 PROVIDERID,
				CASE
				WHEN PI.PAYMENTTYPE =
				'NEFT'
				THEN 'N'
				WHEN PI.PAYMENTTYPE = 'RTGS'
				THEN 'R'
				WHEN PI.PAYMENTTYPE = 'DD'
				THEN 'D'
				WHEN PI.PAYMENTTYPE = 'CHEQUE'
				THEN 'C'
				ELSE PI.PAYMENTTYPE
				END DISBURSEMENT_TYPE,
				PI.PAYMENTAMOUNT / CCY.CCYMINORCCYUNITS AMTTOBERELEASED,
				PI.POSTDATE
				DISBDATE,
				PI.POSTDATE LLDATE,
				PI.PAYABLELOC,
				PI.PRINTINGLOC,
				CU.CUSTCIF,
				CU.CUSTSHRTNAME,
				'' CUSTOMER_MOBILE,
				CE.CUSTEMAIL
				CUSTOMER_EMAIL,
				CS.CPPROVINCENAME CUSTOMER_STATE,
				CC.PCCITYNAME CUSTOMER_CITY,
				'' CUSTOMER_ADDRESS1,
				'' CUSTOMER_ADDRESS2,
				'' CUSTOMER_ADDRESS3,
				'' CUSTOMER_ADDRESS4,
				'' CUSTOMER_ADDRESS5,
				BD.BANKNAME,
				BB.BRANCHCODE,
				BB.BRANCHDESC,
				BBRS.CPPROVINCENAME BENFICIARY_BRANCH_STATE,
				BBRC.PCCITYNAME BENFICIARY_BRANCH_CITY,
				BB.MICR MICR_CODE,
				BB.IFSC IFSC_CODE,
				PI.ACCOUNTNO BENEFICIARYACCNO,
				CASE
				WHEN PI.PAYMENTTYPE = 'CHEQUE'
				OR PI.PAYMENTTYPE = 'DD'
				THEN
				PI.FAVOURNAME
				ELSE PI.ACCTHOLDERNAME
				END BENEFICIARYNAME,
				PI.PHONECOUNTRYCODE + PI.PHONENUMBER BENEFICIARY_MOBILE,
				BCE.CUSTEMAIL BENFICIRY_EMAIL,
				BRS.CPPROVINCENAME BENFICIARY_STATE,
				BRC.PCCITYNAME BENFICIARY_CITY,
				'' BENFICIARY_ADDRESS1,
				'' BENFICIARY_ADDRESS2,
				'' BENFICIARY_ADDRESS3,
				'' BENFICIARY_ADDRESS4,
				'' BENFICIARY_ADDRESS5,
				'' PAYMENT_DETAIL1,
				'' PAYMENT_DETAIL2,
				'' PAYMENT_DETAIL3,
				'' PAYMENT_DETAIL4,
				'' PAYMENT_DETAIL5,
				'' PAYMENT_DETAIL6,
				'' PAYMENT_DETAIL7,
				PI.STATUS,
				PI.REMARKS,
				PI.PAYMENTTYPE,
				FM.FINTYPE,
				PB.PARTNERBANKID PARTNERBANK_ID,
				PB.PARTNERBANKCODE
				PARTNERBANK_CODE,
				PI.POSTDATE INPUTDATE,
				PB.ALWFILEDOWNLOAD,
				PB.FILENAME,
				FM.FINISACTIVE,
				SMD.ENTITYCODE,
				PB.ACCOUNTNO
				PARTNERBANK_ACCOUNTNO
				FROM PAYMENTINSTRUCTIONS PI
				JOIN PAYMENTHEADER PH ON PH.PAYMENTID = PI.PAYMENTID
				JOIN (SELECT
				FINANCEMAIN.CUSTID,
				FINANCEMAIN.FINREFERENCE,
				FINANCEMAIN.FINTYPE,
				FINANCEMAIN.FINISACTIVE
				FROM FINANCEMAIN
				UNION ALL
				SELECT T2.CUSTID,
				T2.FINREFERENCE,
				T2.FINTYPE,
				T2.FINISACTIVE
				FROM FINANCEMAIN_TEMP T2
				WHERE NOT (EXISTS
				( SELECT 1 FROM
				FINANCEMAIN_TEMP T3 WHERE T3.FINREFERENCE = T2.FINREFERENCE))) FM ON FM.FINREFERENCE = PH.FINREFERENCE
				JOIN CUSTOMERS CU ON CU.CUSTID = FM.CUSTID
				JOIN RMTCURRENCIES CCY ON CCY.CCYCODE = PI.PAYMENTCCY
				JOIN PARTNERBANKS PB ON PB.PARTNERBANKID = PI.PARTNERBANKID
				LEFT JOIN CUSTOMEREMAILS CE ON CE.CUSTID = CU.CUSTID AND CE.CUSTEMAILPRIORITY = 5
				LEFT JOIN CUSTOMERADDRESSES CA ON CA.CUSTID = CE.CUSTID AND CA.CUSTADDRPRIORITY = 5
				LEFT JOIN RMTPROVINCEVSCITY CC ON CC.PCCITY = CA.CUSTADDRCITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE CS ON CS.CPPROVINCE = CC.PCPROVINCE
				LEFT JOIN CUSTOMERPHONENUMBERS CM ON CM.PHONECUSTID = CU.CUSTID
				AND CM.PHONETYPECODE = 'MOBILE1' AND CM.PHONETYPEPRIORITY = 5
				LEFT JOIN BANKBRANCHES BB ON BB.BANKBRANCHID = PI.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL BD ON BD.BANKCODE = BB.BANKCODE
				LEFT JOIN RMTPROVINCEVSCITY	BBRC ON BBRC.PCCITY = BB.CITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE BBRS	ON BBRS.CPPROVINCE = BBRC.PCPROVINCE
				LEFT JOIN BENEFICIARY BR ON BR.BANKBRANCHID = PI.BANKBRANCHID
				AND BR.ACCNUMBER = PI.ACCOUNTNO	AND BR.CUSTID = FM.CUSTID
				LEFT JOIN CUSTOMERS BC ON BC.CUSTID = BR.CUSTID
				LEFT JOIN CUSTOMEREMAILS BCE ON	BCE.CUSTID = CU.CUSTID AND BCE.CUSTEMAILPRIORITY = 5
				LEFT JOIN CUSTOMERADDRESSES BRCA ON BRCA.CUSTID = BR.CUSTID	AND	BRCA.CUSTADDRPRIORITY = 5
				LEFT JOIN RMTPROVINCEVSCITY BRC	ON BRC.PCCITY = BRCA.CUSTADDRCITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE BRS ON BRS.CPPROVINCE = BRC.PCPROVINCE
				LEFT JOIN RMTFINANCETYPES RFT ON FM.FINTYPE = RFT.FINTYPE
				LEFT JOIN SMTDIVISIONDETAIL SMD	ON RFT.FINDIVISION = SMD.DIVISIONCODE
				WHERE PI.STATUS = 'APPROVED'
				AND NOT
				(PI.PAYMENTINSTRUCTIONID IN
				( SELECT DISBURSEMENT_REQUESTS.DISBURSEMENT_ID FROM
				DISBURSEMENT_REQUESTS
				))
				UNION ALL
				SELECT PI.ID PAYMENTID,
				VR.PRIMARYLINKREF FINREFERENCE,
				'I' CHANNEL,
				PI.PROVIDERID,
				CASE
				WHEN
				PI.PAYMENTTYPE = 'NEFT'
				THEN 'N'
				WHEN PI.PAYMENTTYPE = 'RTGS'
				THEN 'R'
				WHEN PI.PAYMENTTYPE = 'DD'
				THEN 'D'
				WHEN
				PI.PAYMENTTYPE = 'CHEQUE'
				THEN 'C'
				ELSE PI.PAYMENTTYPE
				END DISBURSEMENT_TYPE,
				PI.PAYMENTAMOUNT / CCY.CCYMINORCCYUNITS
				AMTTOBERELEASED,
				PI.PAYMENTDATE DISBDATE,
				PI.PAYMENTDATE LLDATE,
				'' PAYABLELOC,
				'' PRINTINGLOC,
				'' CUSTCIF,
				'' CUSTSHRTNAME,
				'' CUSTOMER_MOBILE,
				'' CUSTOMER_EMAIL,
				'' CUSTOMER_STATE,
				'' CUSTOMER_CITY,
				'' CUSTOMER_ADDRESS1,
				'' CUSTOMER_ADDRESS2,
				'' CUSTOMER_ADDRESS3,
				'' CUSTOMER_ADDRESS4,
				'' CUSTOMER_ADDRESS5,
				BD.BANKNAME,
				BB.BRANCHCODE,
				BB.BRANCHDESC,
				BBRS.CPPROVINCENAME BENFICIARY_BRANCH_STATE,
				BBRC.PCCITYNAME BENFICIARY_BRANCH_CITY,
				BB.MICR MICR_CODE,
				BB.IFSC IFSC_CODE,
				VPA.ACCOUNTNUMBER BENEFICIARYACCNO,
				AVD.DEALERNAME BENEFICIARYNAME,
				AVD.DEALERTELEPHONE
				BENEFICIARY_MOBILE,
				AVD.EMAIL BENFICIRY_EMAIL,
				BRS.CPPROVINCENAME BENFICIARY_STATE,
				BRC.PCCITYNAME BENFICIARY_CITY,
				AVD.DEALERADDRESS1 BENFICIARY_ADDRESS1,
				AVD.DEALERADDRESS2 BENFICIARY_ADDRESS2,
				AVD.DEALERADDRESS3 BENFICIARY_ADDRESS3,
				'' BENFICIARY_ADDRESS4,
				'' BENFICIARY_ADDRESS5,
				'' PAYMENT_DETAIL1,
				'' PAYMENT_DETAIL2,
				'' PAYMENT_DETAIL3,
				'' PAYMENT_DETAIL4,
				'' PAYMENT_DETAIL5,
				'' PAYMENT_DETAIL6,
				'' PAYMENT_DETAIL7,
				PI.STATUS,
				PI.REMARKS,
				PI.PAYMENTTYPE,
				'' FINTYPE,
				PB.PARTNERBANKID PARTNERBANK_ID,
				PB.PARTNERBANKCODE PARTNERBANK_CODE,
				PI.PAYMENTDATE INPUTDATE,
				PB.ALWFILEDOWNLOAD,
				PB.FILENAME,
				1 FINISACTIVE,
				PI.ENTITYCODE,
				PB.ACCOUNTNO PARTNERBANK_ACCOUNT
				FROM INSURANCEPAYMENTINSTRUCTIONS PI
				JOIN RMTCURRENCIES CCY ON CCY.CCYCODE = PI.PAYMENTCCY
				JOIN PARTNERBANKS PB ON	PB.PARTNERBANKID = PI.PARTNERBANKID
				JOIN VASPROVIDERACCDETAIL VPA ON VPA.PROVIDERID = PI.PROVIDERID
				JOIN AMTVEHICLEDEALER AVD ON AVD.DEALERID = VPA.PROVIDERID
				JOIN VASRECORDING VR ON VR.PAYMENTINSID = PI.ID
				LEFT JOIN BANKBRANCHES BB ON BB.BANKBRANCHID = VPA.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL BD ON BD.BANKCODE = BB.BANKCODE
				LEFT JOIN RMTPROVINCEVSCITY BBRC ON BBRC.PCCITY	= BB.CITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE BBRS	ON BBRS.CPPROVINCE = BBRC.PCPROVINCE
				LEFT JOIN RMTPROVINCEVSCITY BRC	ON BRC.PCCITY =	AVD.DEALERCITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE BRS ON BRS.CPPROVINCE = BRC.PCPROVINCE
				WHERE PI.STATUS = 'APPROVED' AND PI.PAYMENTAMOUNT > 0
				AND NOT (PI.ID IN( SELECT DISBURSEMENT_REQUESTS.DISBURSEMENT_ID FROM DISBURSEMENT_REQUESTS))
			]]>
		</createView>
	</changeSet>

	<changeSet id="587" author="vijaya.a">
		<sql>
			<![CDATA[
				Delete from ErrorDetails Where code = 'RU0050';
				INSERT INTO ErrorDetails VALUES('RU0050','EN','E','Received Date should be greater than first disbursement date:{0}','','Approved','','','','','',0,current_timestamp,1000,0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="588" author="kranthi.k">
		<sql>
				<![CDATA[
					Insert into SMTPARAMETERS (SYSPARMCODE, SYSPARMDESC, SYSPARMTYPE, SYSPARMMAINT, SYSPARMVALUE, SYSPARMLENGTH, SYSPARMDEC, SYSPARMLIST, SYSPARMVALDMOD, SYSPARMDESCRIPTION, VERSION,LASTMNTBY,LASTMNTON,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID) values ('GST_DEFAULT_FROM_STATE',' GST Default From State ','String',1,'N',1,0,null,null,'GST Default From State',1,1000,current_timestamp,'Approved',null,null,null,null,null,0);
				]]>
		</sql>
	</changeSet>

	<changeSet id="589" author="kranthi.k">
		<sql>
				<![CDATA[
					Insert into SMTPARAMETERS (SYSPARMCODE, SYSPARMDESC, SYSPARMTYPE, SYSPARMMAINT, SYSPARMVALUE, SYSPARMLENGTH, SYSPARMDEC, SYSPARMLIST, SYSPARMVALDMOD, SYSPARMDESCRIPTION, VERSION,LASTMNTBY,LASTMNTON,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID) values ('GST_DEFAULT_STATE_CODE','GST Default State Code','String',1,null,10,0,null,null,'GST Default State Code',1,1000,current_timestamp,'Approved',null,null,null,null,null,0);
				]]>
		</sql>
	</changeSet>

	<changeSet id="590" author="kranthi.k">
		<sql>
				<![CDATA[
					Insert into SMTPARAMETERS (SYSPARMCODE, SYSPARMDESC, SYSPARMTYPE, SYSPARMMAINT, SYSPARMVALUE, SYSPARMLENGTH, SYSPARMDEC, SYSPARMLIST, SYSPARMVALDMOD, SYSPARMDESCRIPTION, VERSION,LASTMNTBY,LASTMNTON,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID) values ('ALW_SCH_RECAL_LOCK',' Allow Schedule Recal Lock ','String',1,'N',1,0,null,null,'Allow Schedule Recal Lock',1,1000,current_timestamp,'Approved',null,null,null,null,null,0);
				]]>
		</sql>
	</changeSet>

	<changeSet id="591_pre" author="Pruthviraj.g" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_save_and_drop_dependencies ('plf', 'rpt_delinquentbyproducts');
					select deps_save_and_drop_dependencies ('plf', 'RPT_PortfolioBehaviorSmry_View');
			]]>
		</sql>
	</changeSet>

	<changeSet id="591" author="Pruthviraj.g">
		<createView viewName="RPT_DelinquentByProducts" replaceIfExists="true">
		<![CDATA[
		SELECT FinDivision,
			  T2.FinType,
			  T3.FinTypeDesc,
			  '<=30' DPD,
			  'Performing' Classifications,
			  SUM(${add.schema}UDF_ConvertCurrency(FinCurODPri+FinCurODPft,T2.FinCcy,'INR'))DelinquencyOutstandingBHD,
			  SUM(${add.schema}UDF_ConvertCurrency(FinCurODPri+FinCurODPft,T2.FinCcy,'USD')) DelinquencyOutstandingUSD,
			  COUNT(DISTINCT T2.FinReference)NoofAccounts
			  FROM FInODDetails T1
			  INNER JOIN FinPftDetails T2 ON T1.FinReference =T2.FinReference
			  INNER JOIN RMTFinanceTypes T3 ON T2.FinType          =T3.FinType
			  WHERE FinCurODAmt  !=0
			  AND curoddays         <=30
			  AND (T2.ClosingStatus !='C'
			  OR T2.ClosingStatus   IS NULL)
			  GROUP BY T2.FinType,
			  T3.FinTypeDesc,
			  FinDivision
			UNION
			SELECT FinDivision,
			  T2.FinType,
			  T3.FinTypeDesc,
			  '30> <=60' DPD,
			  'Average Risk' Classifications,
			  SUM(${add.schema}UDF_ConvertCurrency(FinCurODPri+FinCurODPft,T2.FinCcy,'INR'))DelinquencyOutstandingBHD,
			  SUM(${add.schema}UDF_ConvertCurrency(FinCurODPri+FinCurODPft,T2.FinCcy,'USD')) DelinquencyOutstandingUSD,
			  COUNT(DISTINCT T2.FinReference)NoofAccounts
			  FROM FInODDetails T1
			  INNER JOIN FinPftDetails T2 ON T1.FinReference =T2.FinReference
			  INNER JOIN RMTFinanceTypes T3 ON T2.FinType          =T3.FinType
			  WHERE FinCurODAmt !=0
			  AND curoddays          >30
			  AND curoddays         <=60
			  AND (T2.ClosingStatus !='C'
			  OR T2.ClosingStatus   IS NULL)
			  GROUP BY T2.FinType,
			    T3.FinTypeDesc,
			    FinDivision
			UNION
			SELECT FinDivision,
			  T2.FinType,
			  T3.FinTypeDesc,
			  '60> <=90' DPD,
			  'Watch List' Classifications,
			  SUM(${add.schema}UDF_ConvertCurrency(FinCurODPri+FinCurODPft,T2.FinCcy,'INR'))DelinquencyOutstandingBHD,
			  SUM(${add.schema}UDF_ConvertCurrency(FinCurODPri+FinCurODPft,T2.FinCcy,'USD')) DelinquencyOutstandingUSD,
			  COUNT(DISTINCT T2.FinReference)NoofAccounts
			  FROM FInODDetails T1
			  INNER JOIN FinPftDetails T2 ON T1.FinReference =T2.FinReference
			  INNER JOIN RMTFinanceTypes T3 ON T2.FinType          =T3.FinType
			  WHERE FinCurODAmt    !=0
			  AND curoddays          >60
			  AND curoddays         <=90
			  AND (T2.ClosingStatus !='C'
			  OR T2.ClosingStatus   IS NULL)
			  GROUP BY T2.FinType,
			  T3.FinTypeDesc,
			  FinDivision
			UNION
			SELECT FinDivision,
			  T2.FinType,
			  T3.FinTypeDesc,
			  '90>' DPD,
			  'Non-Performing' Classifications,
			  SUM(${add.schema}UDF_ConvertCurrency(FinCurODPri+FinCurODPft,T2.FinCcy,'INR'))DelinquencyOutstandingBHD,
			  SUM(${add.schema}UDF_ConvertCurrency(FinCurODPri+FinCurODPft,T2.FinCcy,'USD')) DelinquencyOutstandingUSD,
			  COUNT(DISTINCT T2.FinReference)NoofAccounts
			  FROM FInODDetails T1
			  INNER JOIN FinPftDetails T2 ON T1.FinReference =T2.FinReference
			  INNER JOIN RMTFinanceTypes T3 ON T2.FinType          =T3.FinType
			  WHERE FinCurODAmt   !=0
			  AND curoddays          >90
			  AND (T2.ClosingStatus !='C'
			  OR T2.ClosingStatus   IS NULL)
			  GROUP BY T2.FinType,
			  T3.FinTypeDesc,
			  FinDivision
	 
	 	]]>
		</createView>
	</changeSet>

	<changeSet id="592" author="Pruthviraj.g">
		<createView viewName="RPT_PortfolioBehaviorSmry_View" replaceIfExists="true">
		<![CDATA[
		   SELECT T1.*,
			  T.PortfolioExposureBHD,
			  T.PortfolioExposureUSD,
			  T.TotalCustomers,
			  T2.NoofRecords,
			  FinDivOrder,
			  DivisionCodeDesc
			FROM
			  (SELECT FinDivision,
				T1.FinType,
				(
				CASE
				  WHEN FinDivision='BFSD'
				  THEN 1
				  WHEN FinDivision='CL'
				  THEN 2
				END)FinDivOrder,
				SUM(${add.schema}UDF_ConvertCurrency(T1.TotalPriBal +T1.TotalPftBal,T1.FinCCY,'INR'))PortfolioExposureBHD,
				SUM(${add.schema}UDF_ConvertCurrency((T1.TotalPriBal+T1.TotalPftBal),T1.FinCCY,'USD'))PortfolioExposureUSD,
				COUNT(DISTINCT T1.custcif)TotalCustomers
			  FROM Finpftdetails T1
			  INNER JOIN RMTFinanceTypes T2 ON T1.FinType=T2.FinType
			  GROUP BY T1.FinType,
				FinDivision
			  )T
			INNER JOIN RPT_PortfolioBehavior T1 ON T.FinType =T1.FinType AND T.FinDivision=T1.FinDivision
			INNER JOIN SMTDivisionDetail ON DivisionCode=T.FinDivision
			INNER JOIN
			  (SELECT FinDivision,
				FinType,
				COUNT(*) NoofRecords
			  FROM RPT_PortfolioBehavior
			  GROUP BY FinType,
				FinDivision
			  )T2
			ON T.FinType     =T2.FinType
			AND T.FinDivision=T2.FinDivision
	 	]]>
		</createView>
	</changeSet>

	<changeSet id="591_post" author="Pruthviraj.g" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_restore_dependencies ('plf', 'rpt_portfoliobehaviorsmry_view');
					select deps_restore_dependencies ('plf', 'rpt_delinquentbyproducts');
			]]>
		</sql>
	</changeSet>

	<changeSet id="592_pre" author="Vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_save_and_drop_dependencies ('plf', 'covenant_types_temp');
					select deps_save_and_drop_dependencies ('plf', 'covenant_types');
			]]>
		</sql>
	</changeSet>

	<changeSet id="592" author="Vijaya.a" dbms="postgresql,oracle">
		<modifyDataType tableName="COVENANT_TYPES_TEMP" columnName="covenanttype" newDataType="VARCHAR(20)" />
		<modifyDataType tableName="COVENANT_TYPES" columnName="covenanttype" newDataType="VARCHAR(20)" />
	</changeSet>

	<changeSet id="592_post" author="Vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_restore_dependencies ('plf', 'covenant_types_temp');
					select deps_restore_dependencies ('plf', 'covenant_types');
			]]>
		</sql>
	</changeSet>

	<changeSet id="593" author="Vijaya.a" dbms="mssql">
		<sql>
			<![CDATA[
				alter table COVENANT_TYPES_TEMP alter column covenanttype VARCHAR(20);
				alter table COVENANT_TYPES alter column covenanttype VARCHAR(20);
			]]>
		</sql>
	</changeSet>

	<changeSet id="594" author="siva.m">
		<sql>
			<![CDATA[
				Delete 	from BMTAEEVENTS where aeeventcode='LPPAMZ'; 
				Delete 	from BMTAEEVENTS where aeeventcode='LPIAMZ';
 
				INSERT INTO BMTAEEVENTS(aeeventcode, aeeventcodedesc, version, lastmntby, lastmnton, recordstatus, rolecode, nextrolecode, taskid, nexttaskid, recordtype, workflowid, active) VALUES ('LPPAMZ', 'LatePay penalty Accruals', 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0, 1);
				INSERT INTO BMTAEEVENTS(aeeventcode, aeeventcodedesc, version, lastmntby, lastmnton, recordstatus, rolecode, nextrolecode, taskid, nexttaskid, recordtype, workflowid, active) VALUES ('LPIAMZ', 'LatePay penalty Accruals', 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0, 1);
				
				Delete 	from BMTAMOUNTCODES where ALLOWEDEVENT='LPPAMZ';
				Delete 	from BMTAMOUNTCODES where ALLOWEDEVENT='LPIAMZ';
							
				Insert into BMTAMOUNTCODES (ALLOWEDEVENT,ALLOWEDRIA,AMOUNTCODE,AMOUNTCODEDESC,AMOUNTCODEISACTIVE,VERSION,LASTMNTBY,LASTMNTON,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID) values ('LPPAMZ',0,'ae_dAmz','Amortized Interest From previous Amz Date',1,1,1005,CURRENT_TIMESTAMP,'Approved',null,null,null,null,null,0);
				Insert into BMTAMOUNTCODES (ALLOWEDEVENT,ALLOWEDRIA,AMOUNTCODE,AMOUNTCODEDESC,AMOUNTCODEISACTIVE,VERSION,LASTMNTBY,LASTMNTON,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID) values ('LPPAMZ',0,'ae_dLPPAmz','Amortized Late Payment Penalty',1,1,1005,CURRENT_TIMESTAMP,'Approved',null,null,null,null,null,0);
				Insert into BMTAMOUNTCODES (ALLOWEDEVENT,ALLOWEDRIA,AMOUNTCODE,AMOUNTCODEDESC,AMOUNTCODEISACTIVE,VERSION,LASTMNTBY,LASTMNTON,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID) values ('LPPAMZ',0,'LPP_CGST_R','Amortized Late Payment Penalty CGST',1,1,1005,CURRENT_TIMESTAMP,'Approved',null,null,null,null,null,0);
				Insert into BMTAMOUNTCODES (ALLOWEDEVENT,ALLOWEDRIA,AMOUNTCODE,AMOUNTCODEDESC,AMOUNTCODEISACTIVE,VERSION,LASTMNTBY,LASTMNTON,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID) values ('LPPAMZ',0,'LPP_SGST_R','Amortized Late Payment Penalty SGST',1,1,1005,CURRENT_TIMESTAMP,'Approved',null,null,null,null,null,0);
				Insert into BMTAMOUNTCODES (ALLOWEDEVENT,ALLOWEDRIA,AMOUNTCODE,AMOUNTCODEDESC,AMOUNTCODEISACTIVE,VERSION,LASTMNTBY,LASTMNTON,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID) values ('LPPAMZ',0,'LPP_UGST_R','Amortized Late Payment Penalty UGST',1,1,1005,CURRENT_TIMESTAMP,'Approved',null,null,null,null,null,0);
				Insert into BMTAMOUNTCODES (ALLOWEDEVENT,ALLOWEDRIA,AMOUNTCODE,AMOUNTCODEDESC,AMOUNTCODEISACTIVE,VERSION,LASTMNTBY,LASTMNTON,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID) values ('LPPAMZ',0,'LPP_IGST_R','Amortized Late Payment Penalty IGST',1,1,1005,CURRENT_TIMESTAMP,'Approved',null,null,null,null,null,0);
				
				Insert into BMTAMOUNTCODES (ALLOWEDEVENT,ALLOWEDRIA,AMOUNTCODE,AMOUNTCODEDESC,AMOUNTCODEISACTIVE,VERSION,LASTMNTBY,LASTMNTON,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID) values ('LPIAMZ',0,'ae_dLPIAmz','Amortized Late Payment Interest',1,1,1005,CURRENT_TIMESTAMP,'Approved',null,null,null,null,null,0);
				Insert into BMTAMOUNTCODES (ALLOWEDEVENT,ALLOWEDRIA,AMOUNTCODE,AMOUNTCODEDESC,AMOUNTCODEISACTIVE,VERSION,LASTMNTBY,LASTMNTON,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID) values ('LPIAMZ',0,'LPI_CGST_R','Amortized Late Payment Interest CGST',1,1,1005,CURRENT_TIMESTAMP,'Approved',null,null,null,null,null,0);	
				Insert into BMTAMOUNTCODES (ALLOWEDEVENT,ALLOWEDRIA,AMOUNTCODE,AMOUNTCODEDESC,AMOUNTCODEISACTIVE,VERSION,LASTMNTBY,LASTMNTON,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID) values ('LPIAMZ',0,'LPI_SGST_R','Amortized Late Payment Interest SGST',1,1,1005,CURRENT_TIMESTAMP,'Approved',null,null,null,null,null,0);	
				Insert into BMTAMOUNTCODES (ALLOWEDEVENT,ALLOWEDRIA,AMOUNTCODE,AMOUNTCODEDESC,AMOUNTCODEISACTIVE,VERSION,LASTMNTBY,LASTMNTON,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID) values ('LPIAMZ',0,'LPI_UGST_R','Amortized Late Payment Interest UGST',1,1,1005,CURRENT_TIMESTAMP,'Approved',null,null,null,null,null,0);	
				Insert into BMTAMOUNTCODES (ALLOWEDEVENT,ALLOWEDRIA,AMOUNTCODE,AMOUNTCODEDESC,AMOUNTCODEISACTIVE,VERSION,LASTMNTBY,LASTMNTON,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID) values ('LPIAMZ',0,'LPI_IGST_R','Amortized Late Payment Interest IGST',1,1,1005,CURRENT_TIMESTAMP,'Approved',null,null,null,null,null,0);			
			]]>
		</sql>
	</changeSet>

	<changeSet id="595" author="murthy.y">
		<sql>
			<![CDATA[
				delete from BMTAMOUNTCODES where ALLOWEDEVENT = 'AMZ' and AMOUNTCODE = 'ae_intAdv';
				delete from BMTAMOUNTCODES where ALLOWEDEVENT = 'INSTDATE' and AMOUNTCODE = 'ae_intAdv';
				INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)  values ('AMZ', 0, 'ae_intAdv', 'Advance Interest?', 1, 1, 1005, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)  values ('INSTDATE', 0, 'ae_intAdv', 'Advance Interest?',1, 1, 1005, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);			
			]]>
		</sql>
	</changeSet>
	<changeSet id="596_pre" author="vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_save_and_drop_dependencies ('plf', 'bmtdocumenttypes_temp');			
			]]>
		</sql>
	</changeSet>

	<changeSet id="596" author="vijaya.a">
		<modifyDataType tableName="BMTDOCUMENTTYPES_TEMP" columnName="DocTypeDesc" newDataType="VARCHAR(500)" />
	</changeSet>

	<changeSet id="596_post" author="vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_restore_dependencies ('plf', 'bmtdocumenttypes_temp');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="597" author="satyanarayana.g">
		<sql>
			<![CDATA[
				UPDATE REPORTCONFIGURATION SET REPORTNAME='Payments Due Report',REPORTHEADING='Payments Due Report'
				WHERE MENUITEMCODE='menu_Item_ManualPaymentsDue';			
			]]>
		</sql>
	</changeSet>

	<changeSet id="598" author="satyanarayana.g">
		<sql>
			<![CDATA[
				UPDATE REPORTCONFIGURATION SET REPORTHEADING='Fully Partial Disbursement',reportname='Fully Partial Disbursement'
				WHERE MENUITEMCODE='menu_Item_FullyPartialDisbursment';			
			]]>
		</sql>
	</changeSet>

	<changeSet id="599" author="satyanarayana.g">
		<sql>
			<![CDATA[
				DELETE FROM REPORTFILTERFIELDS WHERE REPORTID IN (SELECT REPORTID FROM REPORTCONFIGURATION WHERE MENUITEMCODE='menu_Item_DailyPastdue') AND FIELDID=3;		
			]]>
		</sql>
	</changeSet>

	<changeSet id="600" author="meena.a">
		<addColumn tableName="FEETYPES">
			<column name="DueAccReq" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="600.1" author="meena.a">
		<addColumn tableName="FEETYPES">
			<column name="DueAccSet" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="601" author="meena.a">
		<addColumn tableName="FEETYPES_TEMP">
			<column name="DueAccReq" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="601.1" author="meena.a">
		<addColumn tableName="FEETYPES_TEMP">
			<column name="DueAccSet" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="602" author="meena.a">
		<sql>
			<![CDATA[
				UPDATE FeeTypes Set DueAccReq = 0  where DueAccReq is null;
				UPDATE FeeTypes Set DueAccSet = 0 where DueAccSet is null;
				UPDATE FeeTypes_Temp Set DueAccReq = 0 where DueAccReq is null;
				UPDATE FeeTypes_Temp Set DueAccSet = 0 where DueAccSet is null;
			]]>
		</sql>
	</changeSet>

	<changeSet id="603" author="meena.a" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE FeeTypes ADD CONSTRAINT DF_FeeTypes_DACR DEFAULT 0 FOR DueAccReq;
				ALTER TABLE FeeTypes ADD CONSTRAINT DF_FeeTypes_DACS DEFAULT 0 FOR DueAccSet;
				ALTER TABLE FeeTypes_Temp ADD CONSTRAINT DF_FeeTypes_TEMP_DACR DEFAULT 0 FOR DueAccReq;
				ALTER TABLE FeeTypes_Temp ADD CONSTRAINT DF_FeeTypes_TEMP_DACS DEFAULT 0 FOR DueAccSet;
			]]>
		</sql>
	</changeSet>

	<changeSet id="604" author="meena.a" dbms="postgresql, oracle">
		<addDefaultValue columnName="DueAccReq" tableName="FeeTypes" defaultValue="0" />
		<addDefaultValue columnName="DueAccSet" tableName="FeeTypes" defaultValue="0" />
		<addDefaultValue columnName="DueAccReq" tableName="FeeTypes_Temp" defaultValue="0" />
		<addDefaultValue columnName="DueAccSet" tableName="FeeTypes_Temp" defaultValue="0" />
	</changeSet>

	<changeSet id="605" author="meena.a">
		<createView viewName="FEETYPES_VIEW" replaceIfExists="true">
		<![CDATA[
			 SELECT T1.FEETYPEID,
					T1.FEETYPECODE,
					T1.FEETYPEDESC,
					T1.MANUALADVICE,
					T1.REFUNDABLE,
					T1.ADVISETYPE,
					T1.ACCOUNTSETID,
					T1.HOSTFEETYPECODE,
					T1.TAXAPPLICABLE,
					T1.TAXCOMPONENT,
					T1.ACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.ACCOUNTSETCODE,
					T2.ACCOUNTSETCODENAME,
					T1.AMORTZREQ,
					T1.DUEACCREQ,
					T1.DUEACCSET,
         			T3.ACCOUNTSETCODE DUEACCTSETCODE,
					T3.ACCOUNTSETCODENAME DUEACCTSETCODENAME
					FROM FEETYPES_TEMP T1
					LEFT JOIN RMTACCOUNTINGSET T2 ON T1.ACCOUNTSETID = T2.ACCOUNTSETID
          			LEFT JOIN RMTACCOUNTINGSET T3 ON T1.DUEACCSET = T3.ACCOUNTSETID
					UNION ALL
					SELECT T1.FEETYPEID,
					T1.FEETYPECODE,
					T1.FEETYPEDESC,
					T1.MANUALADVICE,
					T1.REFUNDABLE,
					T1.ADVISETYPE,
					T1.ACCOUNTSETID,
					T1.HOSTFEETYPECODE,
					T1.TAXAPPLICABLE,
					T1.TAXCOMPONENT,
					T1.ACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.ACCOUNTSETCODE,
					T2.ACCOUNTSETCODENAME,
					T1.AMORTZREQ,
					T1.DUEACCREQ,
					T1.DUEACCSET,
          			T3.ACCOUNTSETCODE DUEACCTSETCODE,
					T3.ACCOUNTSETCODENAME DUEACCTSETCODENAME
					FROM FEETYPES T1
					LEFT JOIN RMTACCOUNTINGSET T2 ON T1.ACCOUNTSETID = T2.ACCOUNTSETID
          			LEFT JOIN RMTACCOUNTINGSET T3 ON T1.DUEACCSET = T3.ACCOUNTSETID
					WHERE NOT (EXISTS ( SELECT 1
					FROM FEETYPES_TEMP
					WHERE FEETYPES_TEMP.FEETYPEID = T1.FEETYPEID))
					]]>
    </createView>
	</changeSet>

	<changeSet id="606" author="meena.a">
		<createView viewName="FEETYPES_AVIEW" replaceIfExists="true">
		<![CDATA[
					SELECT T1.FEETYPEID,
					T1.FEETYPECODE,
					T1.FEETYPEDESC,
					T1.MANUALADVICE,
					T1.REFUNDABLE,
					T1.ADVISETYPE,
					T1.ACCOUNTSETID,
					T1.HOSTFEETYPECODE,
					T1.TAXAPPLICABLE,
					T1.TAXCOMPONENT,
					T1.ACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.ACCOUNTSETCODE,
					T2.ACCOUNTSETCODENAME,
					T1.AMORTZREQ,
					T1.DUEACCREQ,
					T1.DUEACCSET,
         			 T3.ACCOUNTSETCODE DUEACCTSETCODE,
					T3.ACCOUNTSETCODENAME DUEACCTSETCODENAME
					FROM FEETYPES T1
					LEFT JOIN RMTACCOUNTINGSET T2 ON T1.ACCOUNTSETID = T2.ACCOUNTSETID
          			LEFT JOIN RMTACCOUNTINGSET T3 ON T1.DUEACCSET = T3.ACCOUNTSETID
					]]>
	 </createView>
	</changeSet>

	<changeSet id="607" author="meena.a">
		<createView viewName="FEETYPES_TVIEW" replaceIfExists="true">
		<![CDATA[
					SELECT  T1.FEETYPEID,
					T1.FEETYPECODE,
					T1.FEETYPEDESC,
					T1.MANUALADVICE,
					T1.REFUNDABLE,
					T1.ADVISETYPE,
					T1.ACCOUNTSETID,
					T1.HOSTFEETYPECODE,
					T1.TAXAPPLICABLE,
					T1.TAXCOMPONENT,
					T1.ACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.ACCOUNTSETCODE,
					T2.ACCOUNTSETCODENAME,
					T1.AMORTZREQ,
					T1.DUEACCREQ,
					T1.DUEACCSET,
           			T3.ACCOUNTSETCODE DUEACCTSETCODE,
					T3.ACCOUNTSETCODENAME DUEACCTSETCODENAME
					FROM FEETYPES_TEMP T1
					LEFT JOIN RMTACCOUNTINGSET T2 ON T1.ACCOUNTSETID = T2.ACCOUNTSETID
           			LEFT JOIN RMTACCOUNTINGSET T3 ON T1.DUEACCSET = T3.ACCOUNTSETID
					]]>
	    </createView>
	</changeSet>

	<changeSet id="608" author="meena.a">
		<addColumn tableName="MANUALADVISE">
			<column name="DueCreation" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="608.1" author="meena.a">
		<addColumn tableName="MANUALADVISE">
			<column name="LinkedTranId" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="609" author="meena.a">
		<addColumn tableName="MANUALADVISE_Temp">
			<column name="DueCreation" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="609.1" author="meena.a">
		<addColumn tableName="MANUALADVISE_Temp">
			<column name="LinkedTranId" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="610" author="meena.a">
		<addColumn tableName="MANUALADVISE_CANCEL">
			<column name="DueCreation" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="610.1" author="meena.a">
		<addColumn tableName="MANUALADVISE_CANCEL">
			<column name="LinkedTranId" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="611" author="meena.a">
		<sql>
			<![CDATA[
				UPDATE MANUALADVISE Set DueCreation = 0  where DueCreation is null;
				UPDATE MANUALADVISE Set LinkedTranId = 0 where LinkedTranId is null;
				UPDATE MANUALADVISE_Temp Set DueCreation = 0 where DueCreation is null;
				UPDATE MANUALADVISE_Temp Set LinkedTranId = 0 where LinkedTranId is null;
			]]>
		</sql>
	</changeSet>

	<changeSet id="612" author="meena.a" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE MANUALADVISE ADD CONSTRAINT DF_MANUALADVISE_DUCR DEFAULT 0 FOR DueCreation;
				ALTER TABLE MANUALADVISE ADD CONSTRAINT DF_MANUALADVISE_LNTR DEFAULT 0 FOR LinkedTranId;
				ALTER TABLE MANUALADVISE_TEMP ADD CONSTRAINT DF_MANUALADVISE_TEMP_DUCR DEFAULT 0 FOR DueCreation;
				ALTER TABLE MANUALADVISE_TEMP ADD CONSTRAINT DF_MANUALADVISE_TEMP_LNTR DEFAULT 0 FOR LinkedTranId;
			]]>
		</sql>
	</changeSet>

	<changeSet id="613" author="meena.a" dbms="postgresql, oracle">
		<addDefaultValue columnName="DueCreation" tableName="MANUALADVISE" defaultValue="0" />
		<addDefaultValue columnName="LinkedTranId" tableName="MANUALADVISE" defaultValue="0" />
		<addDefaultValue columnName="DueCreation" tableName="MANUALADVISE_Temp" defaultValue="0" />
		<addDefaultValue columnName="LinkedTranId" tableName="MANUALADVISE_Temp" defaultValue="0" />
	</changeSet>

	<changeSet id="614" author="meena.a">
		<createView viewName="MANUALADVISE_VIEW" replaceIfExists="true">
		<![CDATA[ 
		SELECT  T1.ADVISEID,T1.ADVISETYPE,T1.FINREFERENCE,T1.FEETYPEID,T1.SEQUENCE,T1.ADVISEAMOUNT,T1.PAIDAMOUNT,T1.WAIVEDAMOUNT,
				 T1.REMARKS,T1.VALUEDATE,T1.POSTDATE,T1.VERSION,T1.LASTMNTBY,T1.LASTMNTON,T1.RECORDSTATUS,T1.ROLECODE,T1.NEXTROLECODE,T1.TASKID,T1.NEXTTASKID,
				 T1.RECORDTYPE,T1.WORKFLOWID,T2.FEETYPEDESC,T2.FEETYPECODE,T1.BOUNCEID,T1.RECEIPTID,T3.BOUNCECODE,T1.RESERVEDAMT,T1.BALANCEAMT,T3.REASON AS BOUNCECODEDESC,
				 COALESCE(T2.TAXAPPLICABLE, 0) AS TAXAPPLICABLE,T2.TAXCOMPONENT,T1.PAIDCGST,T1.PAIDSGST,T1.PAIDIGST,T1.PAIDUGST,T1.WAIVEDCGST,T1.WAIVEDSGST,
				 T1.WAIVEDUGST,T1.WAIVEDIGST,T1.WAIVEDCESS,T1.PAIDCESS,T1.DUECREATION,T1.LINKEDTRANID
				 FROM MANUALADVISE_TEMP T1
				 LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID 
				 LEFT JOIN BOUNCEREASONS T3 ON T1.BOUNCEID = T3.BOUNCEID
				 UNION ALL
				 SELECT T1.ADVISEID,T1.ADVISETYPE,T1.FINREFERENCE,T1.FEETYPEID,T1.SEQUENCE,T1.ADVISEAMOUNT,T1.PAIDAMOUNT,T1.WAIVEDAMOUNT,T1.REMARKS,T1.VALUEDATE,
				 T1.POSTDATE,T1.VERSION,T1.LASTMNTBY,T1.LASTMNTON,T1.RECORDSTATUS,T1.ROLECODE,T1.NEXTROLECODE,T1.TASKID,T1.NEXTTASKID,T1.RECORDTYPE,T1.WORKFLOWID,
				 T2.FEETYPEDESC,T2.FEETYPECODE,T1.BOUNCEID,T1.RECEIPTID,T3.BOUNCECODE,T1.RESERVEDAMT,T1.BALANCEAMT,T3.REASON AS BOUNCECODEDESC,
				 COALESCE(T2.TAXAPPLICABLE, 0) AS TAXAPPLICABLE,T2.TAXCOMPONENT,T1.PAIDCGST,T1.PAIDSGST,T1.PAIDIGST,T1.PAIDUGST,T1.WAIVEDCGST,
				 T1.WAIVEDSGST,T1.WAIVEDUGST,T1.WAIVEDIGST,T1.WAIVEDCESS,T1.PAIDCESS,T1.DUECREATION,T1.LINKEDTRANID
				 FROM MANUALADVISE T1 
				 LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID 
				 LEFT JOIN BOUNCEREASONS T3 ON T1.BOUNCEID = T3.BOUNCEID
				 WHERE NOT (EXISTS ( SELECT 1 FROM MANUALADVISE_TEMP WHERE MANUALADVISE_TEMP.ADVISEID = T1.ADVISEID))
				 ]]>
		</createView>
	</changeSet>

	<changeSet id="615" author="meena.a">
		<createView viewName="MANUALADVISE_TVIEW" replaceIfExists="true">
		<![CDATA[ 
			 SELECT	T1.ADVISEID,
				    T1.ADVISETYPE,
				    T1.FINREFERENCE,
				    T1.FEETYPEID,
				    T1.SEQUENCE,
				    T1.ADVISEAMOUNT,
				    T1.PAIDAMOUNT,
				    T1.WAIVEDAMOUNT,
				    T1.REMARKS,
				    T1.VALUEDATE,
				    T1.POSTDATE,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T2.FEETYPEDESC,
				    T2.FEETYPECODE,
				    T1.BOUNCEID,
				    T1.RECEIPTID,
				    T3.BOUNCECODE,
				    T1.RESERVEDAMT,
				    T1.BALANCEAMT,
				    T3.REASON AS BOUNCECODEDESC,
				    COALESCE(T2.TAXAPPLICABLE, 0) AS TAXAPPLICABLE,
				    T2.TAXCOMPONENT,
				    T1.PAIDCGST,
				    T1.PAIDSGST,
				    T1.PAIDIGST,
				    T1.PAIDUGST,
				    T1.WAIVEDCGST,
				    T1.WAIVEDSGST,
				    T1.WAIVEDUGST,
				    T1.WAIVEDIGST,
				    T1.WAIVEDCESS,
				    T1.PAIDCESS,
					T1.FINSOURCE,
					T1.DUECREATION,
					T1.LINKEDTRANID
				    FROM MANUALADVISE_TEMP T1
				     LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
				     LEFT JOIN BOUNCEREASONS T3 ON T1.BOUNCEID = T3.BOUNCEID
					 ]]>
	</createView>
	</changeSet>

	<changeSet id="616" author="meena.a">
		<createView viewName="MANUALADVISE_LVIEW" replaceIfExists="true">
	<![CDATA[ 
		 	SELECT 	T1.ADVISEID,
		    T1.ADVISETYPE,
		    T1.FINREFERENCE,
		    T1.FEETYPEID,
		    T1.SEQUENCE,
		    T1.ADVISEAMOUNT,
		    T1.PAIDAMOUNT,
		    T1.WAIVEDAMOUNT,
		    T1.REMARKS,
		    T1.VALUEDATE,
		    T1.POSTDATE,
		    T1.VERSION,
		    T1.LASTMNTBY,
		    T1.LASTMNTON,
		    T1.RECORDSTATUS,
		    T1.ROLECODE,
		    T1.NEXTROLECODE,
		    T1.TASKID,
		    T1.NEXTTASKID,
		    T1.RECORDTYPE,
		    T1.WORKFLOWID,
		    T2.FEETYPEDESC,
		    T2.FEETYPECODE,
		    T1.BOUNCEID,
		    T1.RECEIPTID,
		    T3.BOUNCECODE,
		    T1.RESERVEDAMT,
		    T1.BALANCEAMT,
		    T3.REASON AS BOUNCECODEDESC,
		    COALESCE(T2.TAXAPPLICABLE, 0) AS TAXAPPLICABLE,
		    T2.TAXCOMPONENT,
		    T1.PAIDCGST,
		    T1.PAIDSGST,
		    T1.PAIDIGST,
		    T1.PAIDUGST,
		    T1.WAIVEDCGST,
		    T1.WAIVEDSGST,
		    T1.WAIVEDUGST,
		    T1.WAIVEDIGST,
			T1.FINSOURCE,
			T1.DUECREATION,
			T1.LINKEDTRANID
		   FROM MANUALADVISE T1
		     LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
		     LEFT JOIN BOUNCEREASONS T3 ON T1.BOUNCEID = T3.BOUNCEID
			]]>
	</createView>
	</changeSet>

	<changeSet id="617_pre" author="meena.a" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'manualadvise_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="617" author="meena.a">
		<createView viewName="MANUALADVISE_AVIEW" replaceIfExists="true">
	<![CDATA[ 
	 SELECT T1.ADVISEID,
		    T1.ADVISETYPE,
		    T1.FINREFERENCE,
		    T1.FEETYPEID,
		    T1.SEQUENCE,
		    T1.ADVISEAMOUNT,
		    T1.PAIDAMOUNT,
		    T1.WAIVEDAMOUNT,
		    T1.REMARKS,
		    T1.VALUEDATE,
		    T1.POSTDATE,
		    T1.VERSION,
		    T1.LASTMNTBY,
		    T1.LASTMNTON,
		    T1.RECORDSTATUS,
		    T1.ROLECODE,
		    T1.NEXTROLECODE,
		    T1.TASKID,
		    T1.NEXTTASKID,
		    T1.RECORDTYPE,
		    T1.WORKFLOWID,
		    T2.FEETYPEDESC,
		    T2.FEETYPECODE,
		    T1.BOUNCEID,
		    T1.RECEIPTID,
		    T3.BOUNCECODE,
		    T1.RESERVEDAMT,
		    T1.BALANCEAMT,
		    T3.REASON AS BOUNCECODEDESC,
		    COALESCE(T2.TAXAPPLICABLE, 0) AS TAXAPPLICABLE,
		    T2.TAXCOMPONENT,
		    T1.PAIDCGST,
		    T1.PAIDSGST,
		    T1.PAIDIGST,
		    T1.PAIDUGST,
		    T1.WAIVEDCGST,
		    T1.WAIVEDSGST,
		    T1.WAIVEDUGST,
		    T1.WAIVEDIGST,
		    T1.WAIVEDCESS,
		    T1.PAIDCESS,
			T1.FINSOURCE,
			T1.DUECREATION,
			T1.LINKEDTRANID
		   FROM MANUALADVISE T1
		     LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
		     LEFT JOIN BOUNCEREASONS T3 ON T1.BOUNCEID = T3.BOUNCEID
			 ]]>
	</createView>
	</changeSet>

	<changeSet id="617_post" author="meena.a" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'manualadvise_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="618" author="Durga Prasad G">
		<sql>
		<![CDATA[   
				Delete 	from BMTAEEVENTS where aeeventcode='ADVDUE'; 
				 
				INSERT INTO BMTAEEVENTS(aeeventcode, aeeventcodedesc, version, lastmntby, lastmnton, recordstatus, rolecode, nextrolecode, taskid, nexttaskid, recordtype, workflowid, active)
				VALUES ('ADVDUE', 'Manual advice payble and receivables.', 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0, 1);
					
				
				Delete 	from BMTAMOUNTCODES where ALLOWEDEVENT='ADVDUE';
							
				Insert into BMTAMOUNTCODES (ALLOWEDEVENT,ALLOWEDRIA,AMOUNTCODE,AMOUNTCODEDESC,AMOUNTCODEISACTIVE,VERSION,LASTMNTBY,LASTMNTON,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID) values 
				('ADVDUE',0,'ae_feeAmount','Mnaual advice Payble or receivable amount.',1,1,1005,CURRENT_TIMESTAMP,'Approved',null,null,null,null,null,0);
				

				Insert into BMTAMOUNTCODES (ALLOWEDEVENT,ALLOWEDRIA,AMOUNTCODE,AMOUNTCODEDESC,AMOUNTCODEISACTIVE,VERSION,LASTMNTBY,LASTMNTON,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID) values 
				('ADVDUE',0,'ae_feeCGST','Manual advice Payble or receivable CGST',1,1,1005,CURRENT_TIMESTAMP,'Approved',null,null,null,null,null,0);
				
				Insert into BMTAMOUNTCODES (ALLOWEDEVENT,ALLOWEDRIA,AMOUNTCODE,AMOUNTCODEDESC,AMOUNTCODEISACTIVE,VERSION,LASTMNTBY,LASTMNTON,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID) values 
				('ADVDUE',0,'ae_feeSGST','Manual advice Payble or receivable SGST',1,1,1005,CURRENT_TIMESTAMP,'Approved',null,null,null,null,null,0);
				
				Insert into BMTAMOUNTCODES (ALLOWEDEVENT,ALLOWEDRIA,AMOUNTCODE,AMOUNTCODEDESC,AMOUNTCODEISACTIVE,VERSION,LASTMNTBY,LASTMNTON,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID) values 
				('ADVDUE',0,'ae_feeUGST','Manual advice Payble or receivable UGST',1,1,1005,CURRENT_TIMESTAMP,'Approved',null,null,null,null,null,0);
				
				Insert into BMTAMOUNTCODES (ALLOWEDEVENT,ALLOWEDRIA,AMOUNTCODE,AMOUNTCODEDESC,AMOUNTCODEISACTIVE,VERSION,LASTMNTBY,LASTMNTON,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID) values 
				('ADVDUE',0,'ae_feeIGST','Manual advice Payble or receivable IGST',1,1,1005,CURRENT_TIMESTAMP,'Approved',null,null,null,null,null,0);
				
				Insert into BMTAMOUNTCODES (ALLOWEDEVENT,ALLOWEDRIA,AMOUNTCODE,AMOUNTCODEDESC,AMOUNTCODEISACTIVE,VERSION,LASTMNTBY,LASTMNTON,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID) values 
				('ADVDUE',0,'ae_feeCESS','Manual advice Payble or receivable CESS',1,1,1005,CURRENT_TIMESTAMP,'Approved',null,null,null,null,null,0);
				
				Insert into BMTAMOUNTCODES (ALLOWEDEVENT,ALLOWEDRIA,AMOUNTCODE,AMOUNTCODEDESC,AMOUNTCODEISACTIVE,VERSION,LASTMNTBY,LASTMNTON,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID) values 
				('ADVDUE',0,'ae_feeGST_TOT','Manual advice Payble or receivable Total GST',1,1,1005,CURRENT_TIMESTAMP,'Approved',null,null,null,null,null,0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="619" author="DurgaPrasad.G">
		<sql>
			<![CDATA[
				DELETE FROM SMTPARAMETERS WHERE SYSPARMCODE='ALLOW_MANUAL_ADV_DUE_CREATION';
				INSERT INTO SMTPARAMETERS VALUES ('ALLOW_MANUAL_ADV_DUE_CREATION', 'Allow manual advice due creation  Y/N', 'String', 1, 'N', 1, 0, NULL, NULL,'Allow manual advice due creation  Y/N', 1, 1000, CURRENT_TIMESTAMP,'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="620" author="DurgaPrasad.G">
		<createTable tableName="AdviseDueTaxDetail">
			<column name="AdviseID" type="bigint" />
			<column name="TaxType" type="CHAR(1)" />
			<column name="Amount" type="decimal(18,0)" defaultValue="0" />
			<column name="CGST" type="decimal(18,0)" defaultValue="0" />
			<column name="SGST" type="decimal(18,0)" defaultValue="0" />
			<column name="UGST" type="decimal(18,0)" defaultValue="0" />
			<column name="IGST" type="decimal(18,0)" defaultValue="0" />
			<column name="CESS" type="decimal(18,0)" defaultValue="0" />
			<column name="TotalGST" type="decimal(18,0)" defaultValue="0" />
		</createTable>
	</changeSet>

	<changeSet id="620_post" author="DurgaPrasad.G" dbms="mssql">
		<addNotNullConstraint tableName="AdviseDueTaxDetail" columnName="AdviseID" columnDataType="bigint" />
	</changeSet>

	<changeSet id="621" author="DurgaPrasad.G">
		<addPrimaryKey tableName="AdviseDueTaxDetail" columnNames="AdviseID" constraintName="PK_ADVDUETXDT_ADVID" />
	</changeSet>

	<changeSet id="622" author="DurgaPrasad.G">
		<sql>
			<![CDATA[
				DELETE FROM SMTPARAMETERS WHERE SYSPARMCODE='DISPLAY_COMPOUND_SCHD_REQ';
				INSERT INTO SMTPARAMETERS VALUES ('DISPLAY_COMPOUND_SCHD_REQ', 'Display compound based schedule entry in schedule detials. Y/N', 'String', 1, 'Y', 1, 0, NULL, NULL,'Display compound based schedule entry in schedule detials. Y/N', 1, 1000, CURRENT_TIMESTAMP,'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="623" author="DurgaPrasad.G">
		<sql>
			<![CDATA[
				DELETE FROM SMTPARAMETERS WHERE SYSPARMCODE='ACCRUAL_REVERSAL_REQ';
				INSERT INTO SMTPARAMETERS VALUES ('ACCRUAL_REVERSAL_REQ', 'Accrual Reversal Required or not(Y/N)', 'String', 1, 'N', 1, 0, NULL, NULL,'Accrual Reversal Required or not(Y/N)', 1, 1000, CURRENT_TIMESTAMP,'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="624" author="DurgaPrasad.G">
		<sql>
			<![CDATA[
				DELETE FROM SMTPARAMETERS WHERE SYSPARMCODE='ACCREV_EFF_POSTDATE';
				INSERT INTO SMTPARAMETERS VALUES ('ACCREV_EFF_POSTDATE', 'Accrual Reversal PostDate.', 'String', 1, 'N', 1, 0, NULL, NULL,'Accrual Reversal PostDate.', 1, 1000, CURRENT_TIMESTAMP,'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="625" author="saikumar.b">
		<createView viewName="customerbankinfo_aview" replaceIfExists="true">
				<![CDATA[
					SELECT t1.bankid,
				    t1.custid,
				    t1.bankname,
				    t1.accountnumber,
				    t1.accounttype,
				    t1.salaryaccount,
				    t1.version,
				    t1.lastmntby,
				    t1.lastmnton,
				    t1.recordstatus,
				    t1.rolecode,
				    t1.nextrolecode,
				    t1.taskid,
				    t1.nexttaskid,
				    t1.recordtype,
				    t1.workflowid,
				    t3.bankname AS lovdescbankname,
				    t4.valuedesc AS lovdescaccounttype,
				    t1.credittranno,
					t1.credittranamt,
				    t1.credittranavg,
				    t1.debittranno,
				    t1.debittranamt,
				    t1.cashdepositno,
				    t1.cashdepositamt,
				    t1.cashwithdrawalno,
				    t1.cashwithdrawalamt,
				    t1.chqdepositno,
				    t1.chqdepositamt,
				    t1.chqissueno,
				    t1.chqissueamt,
				    t1.inwardchqbounceno,
				    t1.outwardchqbounceno,
				    t1.eodbalmin,
				    t1.eodbalmax,
				    t1.eodbalavg,
				    t1.bankbranch,
				    t1.fromdate,
				    t1.todate,
				    t1.repaymentfrom,
				    t1.noofmonthsbanking,
				    t1.lwowratio,
				    t1.cclimit,
				    t1.typeofbanks,
				    t1.accountopeningdate,
					t1.addToBenficiary,
					t1.bankBranchID,
					t5.ifsc,
					t5.city,
					t1.accountHolderName,
					t1.phoneNumber
					FROM ((customerbankinfo t1
				    JOIN bmtbankdetail t3 ON (((t3.bankcode) = (t1.bankname))))
				    JOIN rmtlovfielddetail t4 ON ((((t4.fieldcodevalue) = (t1.accounttype)) AND ((t4.fieldcode) = 'ACC_TYPE')))
				    LEFT JOIN bankbranches t5 ON t1.bankbranchid = t5.bankbranchid)
				]]>
			</createView>
	</changeSet>

	<changeSet id="626" author="saikumar.b">
		<sql>
			<![CDATA[
				Delete from SMTPARAMETERS where SYSPARMCODE = 'ALLOW_MANDATE_ACCT_DET_READONLY';
				INSERT INTO SMTparameters  VALUES ('ALLOW_MANDATE_ACCT_DET_READONLY', 'Allow Mandate Acct Det Readonly', 'String', '1', 'N', 5, 0, NULL, NULL, 'Allow Mandate Acct Det Readonly', 1, 1000, CURRENT_TIMESTAMP,'Approved', '', '', '', '', '', 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="627" author="vijaya.a">
		<sql>
			<![CDATA[
				Delete from ErrorDetails WHERE code='WFEE11';
				INSERT INTO ErrorDetails VALUES('WFEE11','EN','W','{0} Loan reference not in active state. Do you want to proceed?','','Approved','','','','','',0,CURRENT_TIMESTAMP,1000,0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="628" author="satyanarayana.g">
		<sql>
			<![CDATA[
				DELETE FROM REPORTFILTERFIELDS WHERE REPORTID IN (SELECT REPORTID FROM REPORTCONFIGURATION WHERE MENUITEMCODE='menu_Item_CovenantRegisterReport') AND FIELDID=3;
				INSERT INTO REPORTFILTERFIELDS VALUES ((SELECT REPORTID FROM REPORTCONFIGURATION WHERE MENUITEMCODE='menu_Item_CovenantRegisterReport'),3,'FinType','LOVSEARCH','Loan Type','fm.FinType',null,
				'FinanceType','getFinType','getFinTypeDesc',1,0,0,0,3,0,' ',' ',' ',' ',250,0,'=',1,1000,'Approved',null,null,null,null,null,0,CURRENT_TIMESTAMP,null);
			]]>
		</sql>
	</changeSet>

	<changeSet id="629" author="satyanarayana.g">
		<sql>
			<![CDATA[
				UPDATE REPORTFILTERFIELDS SET MANDATORY=0 WHERE REPORTID in (SELECT REPORTID FROM REPORTCONFIGURATION WHERE menuitemcode='menu_Item_CovenantRegisterReport');
			]]>
		</sql>
	</changeSet>

	<changeSet id="630" author="DurgaPrasad G">
		<createView viewName="MANUALADVISE_VIEW" replaceIfExists="true">
		<![CDATA[ 
		SELECT  T1.ADVISEID,T1.ADVISETYPE,T1.FINREFERENCE,T1.FEETYPEID,T1.SEQUENCE,T1.ADVISEAMOUNT,T1.PAIDAMOUNT,T1.WAIVEDAMOUNT,
				 T1.REMARKS,T1.VALUEDATE,T1.POSTDATE,T1.VERSION,T1.LASTMNTBY,T1.LASTMNTON,T1.RECORDSTATUS,T1.ROLECODE,T1.NEXTROLECODE,T1.TASKID,T1.NEXTTASKID,
				 T1.RECORDTYPE,T1.WORKFLOWID,T2.FEETYPEDESC,T2.FEETYPECODE,T1.BOUNCEID,T1.RECEIPTID,T3.BOUNCECODE,T1.RESERVEDAMT,T1.BALANCEAMT,T3.REASON AS BOUNCECODEDESC,
				 COALESCE(T2.TAXAPPLICABLE, 0) AS TAXAPPLICABLE,T2.TAXCOMPONENT,T1.PAIDCGST,T1.PAIDSGST,T1.PAIDIGST,T1.PAIDUGST,T1.WAIVEDCGST,T1.WAIVEDSGST,
				 T1.WAIVEDUGST,T1.WAIVEDIGST,T1.WAIVEDCESS,T1.PAIDCESS,T1.DUECREATION,T1.LINKEDTRANID, T1.FINSOURCE
				 FROM MANUALADVISE_TEMP T1
				 LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID 
				 LEFT JOIN BOUNCEREASONS T3 ON T1.BOUNCEID = T3.BOUNCEID
				 UNION ALL
				 SELECT T1.ADVISEID,T1.ADVISETYPE,T1.FINREFERENCE,T1.FEETYPEID,T1.SEQUENCE,T1.ADVISEAMOUNT,T1.PAIDAMOUNT,T1.WAIVEDAMOUNT,T1.REMARKS,T1.VALUEDATE,
				 T1.POSTDATE,T1.VERSION,T1.LASTMNTBY,T1.LASTMNTON,T1.RECORDSTATUS,T1.ROLECODE,T1.NEXTROLECODE,T1.TASKID,T1.NEXTTASKID,T1.RECORDTYPE,T1.WORKFLOWID,
				 T2.FEETYPEDESC,T2.FEETYPECODE,T1.BOUNCEID,T1.RECEIPTID,T3.BOUNCECODE,T1.RESERVEDAMT,T1.BALANCEAMT,T3.REASON AS BOUNCECODEDESC,
				 COALESCE(T2.TAXAPPLICABLE, 0) AS TAXAPPLICABLE,T2.TAXCOMPONENT,T1.PAIDCGST,T1.PAIDSGST,T1.PAIDIGST,T1.PAIDUGST,T1.WAIVEDCGST,
				 T1.WAIVEDSGST,T1.WAIVEDUGST,T1.WAIVEDIGST,T1.WAIVEDCESS,T1.PAIDCESS,T1.DUECREATION,T1.LINKEDTRANID, T1.FINSOURCE
				 FROM MANUALADVISE T1 
				 LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID 
				 LEFT JOIN BOUNCEREASONS T3 ON T1.BOUNCEID = T3.BOUNCEID
				 WHERE NOT (EXISTS ( SELECT 1 FROM MANUALADVISE_TEMP WHERE MANUALADVISE_TEMP.ADVISEID = T1.ADVISEID))				 ]]>
		</createView>
	</changeSet>

	<changeSet id="630_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'manualadvise_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="630" author="satyanarayana.g">
		<createView viewName="MANUALADVISE_AVIEW" replaceIfExists="true">
			<![CDATA[
				 SELECT T1.ADVISEID,
				    T1.ADVISETYPE,
				    T1.FINREFERENCE,
				    T1.FEETYPEID,
				    T1.SEQUENCE,
				    T1.ADVISEAMOUNT,
				    T1.PAIDAMOUNT,
				    T1.WAIVEDAMOUNT,
				    T1.REMARKS,
				    T1.VALUEDATE,
				    T1.POSTDATE,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T2.FEETYPEDESC,
				    T2.FEETYPECODE,
				    T1.BOUNCEID,
				    T1.RECEIPTID,
				    T3.BOUNCECODE,
				    T1.RESERVEDAMT,
				    T1.BALANCEAMT,
				    T3.REASON AS BOUNCECODEDESC,
				    COALESCE(T2.TAXAPPLICABLE, 0) AS TAXAPPLICABLE,
				    T2.TAXCOMPONENT,
				    T1.PAIDCGST,
				    T1.PAIDSGST,
				    T1.PAIDIGST,
				    T1.PAIDUGST,
				    T1.WAIVEDCGST,
				    T1.WAIVEDSGST,
				    T1.WAIVEDUGST,
				    T1.WAIVEDIGST,
				    T1.WAIVEDCESS,
				    T1.PAIDCESS,
					T1.FINSOURCE,
					T1.DUECREATION,
					T1.LINKEDTRANID
				   FROM MANUALADVISE T1
				     LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
				     LEFT JOIN BOUNCEREASONS T3 ON T1.BOUNCEID = T3.BOUNCEID
		    		 ]]>
			</createView>
	</changeSet>

	<changeSet id="630_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'manualadvise_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="631_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'manualadvise_lview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="631" author="satyanarayana.g">
		<createView viewName="MANUALADVISE_LVIEW" replaceIfExists="true">
			<![CDATA[
			    SELECT T1.ADVISEID,
				    T1.ADVISETYPE,
				    T1.FINREFERENCE,
				    T1.FEETYPEID,
				    T1.SEQUENCE,
				    T1.ADVISEAMOUNT,
				    T1.PAIDAMOUNT,
				    T1.WAIVEDAMOUNT,
				    T1.REMARKS,
				    T1.VALUEDATE,
				    T1.POSTDATE,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T2.FEETYPEDESC,
				    T2.FEETYPECODE,
				    T1.BOUNCEID,
				    T1.RECEIPTID,
				    T3.BOUNCECODE,
				    T1.RESERVEDAMT,
				    T1.BALANCEAMT,
				    T3.REASON AS BOUNCECODEDESC,
				    COALESCE(T2.TAXAPPLICABLE, 0) AS TAXAPPLICABLE,
				    T2.TAXCOMPONENT,
				    T1.PAIDCGST,
				    T1.PAIDSGST,
				    T1.PAIDIGST,
				    T1.PAIDUGST,
				    T1.WAIVEDCGST,
				    T1.WAIVEDSGST,
				    T1.WAIVEDUGST,
				    T1.WAIVEDIGST,
					T1.FINSOURCE,
					T1.DUECREATION,
					T1.LINKEDTRANID
				   FROM MANUALADVISE T1
				     LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
				     LEFT JOIN BOUNCEREASONS T3 ON T1.BOUNCEID = T3.BOUNCEID
		     			]]>
			</createView>
	</changeSet>

	<changeSet id="631_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'manualadvise_lview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="632_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'manualadvise_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="632" author="satyanarayana.g">
		<createView viewName="MANUALADVISE_TVIEW" replaceIfExists="true">
			<![CDATA[
			    SELECT T1.ADVISEID,
				    T1.ADVISETYPE,
				    T1.FINREFERENCE,
				    T1.FEETYPEID,
				    T1.SEQUENCE,
				    T1.ADVISEAMOUNT,
				    T1.PAIDAMOUNT,
				    T1.WAIVEDAMOUNT,
				    T1.REMARKS,
				    T1.VALUEDATE,
				    T1.POSTDATE,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T2.FEETYPEDESC,
				    T2.FEETYPECODE,
				    T1.BOUNCEID,
				    T1.RECEIPTID,
				    T3.BOUNCECODE,
				    T1.RESERVEDAMT,
				    T1.BALANCEAMT,
				    T3.REASON AS BOUNCECODEDESC,
				    COALESCE(T2.TAXAPPLICABLE, 0) AS TAXAPPLICABLE,
				    T2.TAXCOMPONENT,
				    T1.PAIDCGST,
				    T1.PAIDSGST,
				    T1.PAIDIGST,
				    T1.PAIDUGST,
				    T1.WAIVEDCGST,
				    T1.WAIVEDSGST,
				    T1.WAIVEDUGST,
				    T1.WAIVEDIGST,
				    T1.WAIVEDCESS,
				    T1.PAIDCESS,
					T1.FINSOURCE,
					T1.DUECREATION,
					T1.LINKEDTRANID
				   FROM MANUALADVISE_TEMP T1
				     LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
				     LEFT JOIN BOUNCEREASONS T3 ON T1.BOUNCEID = T3.BOUNCEID
		    		 ]]>
			</createView>
	</changeSet>

	<changeSet id="632_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'manualadvise_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="633_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'manualadvise_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="633" author="satyanarayana.g">
		<createView viewName="MANUALADVISE_VIEW" replaceIfExists="true">
			<![CDATA[
			    SELECT T1.ADVISEID,
				    T1.ADVISETYPE,
				    T1.FINREFERENCE,
				    T1.FEETYPEID,
				    T1.SEQUENCE,
				    T1.ADVISEAMOUNT,
				    T1.PAIDAMOUNT,
				    T1.WAIVEDAMOUNT,
				    T1.REMARKS,
				    T1.VALUEDATE,
				    T1.POSTDATE,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T2.FEETYPEDESC,
				    T2.FEETYPECODE,
				    T1.BOUNCEID,
				    T1.RECEIPTID,
				    T3.BOUNCECODE,
				    T1.RESERVEDAMT,
				    T1.BALANCEAMT,
				    T3.REASON AS BOUNCECODEDESC,
				    COALESCE(T2.TAXAPPLICABLE, 0) AS TAXAPPLICABLE,
				    T2.TAXCOMPONENT,
				    T1.PAIDCGST,
				    T1.PAIDSGST,
				    T1.PAIDIGST,
				    T1.PAIDUGST,
				    T1.WAIVEDCGST,
				    T1.WAIVEDSGST,
				    T1.WAIVEDUGST,
				    T1.WAIVEDIGST,
				    T1.WAIVEDCESS,
				    T1.PAIDCESS,
					T1.FINSOURCE,
					T1.DUECREATION,
					T1.LINKEDTRANID
				   FROM MANUALADVISE_TEMP T1
				     LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
				     LEFT JOIN BOUNCEREASONS T3 ON T1.BOUNCEID = T3.BOUNCEID
				UNION ALL
				 SELECT T1.ADVISEID,
				    T1.ADVISETYPE,
				    T1.FINREFERENCE,
				    T1.FEETYPEID,
				    T1.SEQUENCE,
				    T1.ADVISEAMOUNT,
				    T1.PAIDAMOUNT,
				    T1.WAIVEDAMOUNT,
				    T1.REMARKS,
				    T1.VALUEDATE,
				    T1.POSTDATE,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T2.FEETYPEDESC,
				    T2.FEETYPECODE,
				    T1.BOUNCEID,
				    T1.RECEIPTID,
				    T3.BOUNCECODE,
				    T1.RESERVEDAMT,
				    T1.BALANCEAMT,
				    T3.REASON AS BOUNCECODEDESC,
				    COALESCE(T2.TAXAPPLICABLE, 0) AS TAXAPPLICABLE,
				    T2.TAXCOMPONENT,
				    T1.PAIDCGST,
				    T1.PAIDSGST,
				    T1.PAIDIGST,
				    T1.PAIDUGST,
				    T1.WAIVEDCGST,
				    T1.WAIVEDSGST,
				    T1.WAIVEDUGST,
				    T1.WAIVEDIGST,
				    T1.WAIVEDCESS,
				    T1.PAIDCESS,
					T1.FINSOURCE,
					T1.DUECREATION,
					T1.LINKEDTRANID
				   FROM MANUALADVISE T1
				     LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
				     LEFT JOIN BOUNCEREASONS T3 ON T1.BOUNCEID = T3.BOUNCEID
				  WHERE NOT (EXISTS ( SELECT 1
				  FROM MANUALADVISE_TEMP
				  WHERE MANUALADVISE_TEMP.ADVISEID = T1.ADVISEID))
		          ]]>
		</createView>
	</changeSet>

	<changeSet id="633_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'manualadvise_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="634" author="meena.a">
		<sql>
			<![CDATA[
				delete from SMTPARAMETERS where sysparmcode='ALLOW_FEE_CALC_ADJU_PRINCIPAL';
			   	INSERT INTO SMTPARAMETERS VALUES ('ALLOW_FEE_CALC_ADJU_PRINCIPAL','Allow Fee calculatedon on adjustedprincipal', 'String',1,'N',1,0,null,null,'Allow Fee calculatedon on adjustedprincipal',3,1000,current_Timestamp,'Approved',null,null,null,null,null,0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="635" author="saikumar.b">
		<comment>ScheduleData Added In Welcome Report</comment>
		<sql>
			<![CDATA[
				UPDATE REPORTCONFIGURATION set scheduleReq=1 where menuitemcode='menu_Item_WelcomeLetter';
				UPDATE reportfilterfields set fieldname='Loan Reference' where reportid in (select reportid from REPORTCONFIGURATION where menuitemcode='menu_Item_WelcomeLetter');
			]]>
		</sql>
	</changeSet>

	<changeSet id="636.1" author="kranthi.k">
		<sql>
				<![CDATA[
					delete from SMTPARAMETERS where sysparmcode='CUST_LASTNAME_MANDATORY';
					Insert into SMTPARAMETERS (SYSPARMCODE, SYSPARMDESC, SYSPARMTYPE, SYSPARMMAINT, SYSPARMVALUE, SYSPARMLENGTH, SYSPARMDEC, SYSPARMLIST, SYSPARMVALDMOD, SYSPARMDESCRIPTION, VERSION,LASTMNTBY,LASTMNTON,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID) values ('CUST_LASTNAME_MANDATORY',' Customer Last Name Non-Mandatory ','String',1,'Y',1,0,null,null,'Customer Last Name Mandatory',1,1000,current_timestamp,'Approved',null,null,null,null,null,0);
				]]>
		</sql>
	</changeSet>
	<changeSet id="637" author="murthy.y">
		<sql>
			<![CDATA[
				delete from BMTAMOUNTCODES where ALLOWEDEVENT = 'EARLYSTL' and AMOUNTCODE = 'ae_dueTds';
				delete from BMTAMOUNTCODES where ALLOWEDEVENT = 'REPAY' and AMOUNTCODE = 'ae_dueTds';
				INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)  values ('EARLYSTL', 0, 'ae_dueTds', 'TDS on Early Settlement', 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)  values ('REPAY', 0, 'ae_dueTds', 'TDS on Repayment',1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);			
			]]>
		</sql>
	</changeSet>

	<changeSet id="638" author="vijaya.a">
		<sql>
			<![CDATA[
				Delete from ErrorDetails WHERE code='WFEE12';
				INSERT INTO ErrorDetails VALUES('WFEE12','EN','W','Paid amount {0} should be less than or equal to receipt amount {1}','','Approved','','','','','',0,CURRENT_TIMESTAMP,1000,0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="639" author="satyanarayana.g">
		<sql>
			<![CDATA[
				DELETE FROM REPORTFILTERFIELDS WHERE REPORTID IN (SELECT REPORTID FROM REPORTCONFIGURATION WHERE MENUITEMCODE='menu_Item_putcallreport');
				DELETE FROM REPORTCONFIGURATION WHERE MENUITEMCODE='menu_Item_putcallreport';

				INSERT INTO REPORTCONFIGURATION VALUES ((select max(reportid)+1 from REPORTCONFIGURATION),'Excel:Put Call Report','Put Call Report', 1,'PutCall','dataSource', 1,'menu_Item_putcallreport', 1, 1000, NULL, NULL, NULL, NULL, NULL, NULL, 0, current_timestamp, 0, 1, 0);
				INSERT INTO REPORTFILTERFIELDS  VALUES ((select reportid from REPORTCONFIGURATION where menuitemcode='menu_Item_putcallreport'), 1,'FinReference','LOVSEARCH','Loan Reference','fp.FinReference','','FinOptionReport','getFinReference','getFinReference', 1, 0, 0, 0, 1, 1,'','','','', 250, 0,'=', 1, 1000,'Approved','','','','','', 0, current_timestamp,'');
				INSERT INTO REPORTFILTERFIELDS  VALUES ((select reportid from REPORTCONFIGURATION where menuitemcode='menu_Item_putcallreport'), 2,'CustCIF','LOVSEARCH','Customer Number','C.CustCIF','','Customer','getCustCIF','getCustShrtName', 1, 0, 0, 0, 2, 0,'','','','', 250, 0,'=', 1, 1000,'Approved','','','','','', 0, current_timestamp,'');
			]]>
		</sql>
	</changeSet>
	<changeSet id="640" author="Varaprasad.k">
		<sql>
			<![CDATA[
				DELETE from ErrorDetails WHERE code='RU0051';
				INSERT INTO ErrorDetails VALUES('RU0051','EN','E','Receipt Amount should greater than or equal to Receipt Dues.','','Approved','','','','','',0,CURRENT_TIMESTAMP,1000,0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="641" author="vijaya.a">
		<addColumn tableName="FinRepayHeader">
			<column name="PartialPaidAmount" type="decimal(18, 0)" />
			<column name="FutPriAmount" type="decimal(18, 0)" />
			<column name="FutPftAmount" type="decimal(18, 0)" />
		</addColumn>
	</changeSet>

	<changeSet id="642" author="vijaya.a">
		<addColumn tableName="FinRepayHeader_Temp">
			<column name="PartialPaidAmount" type="decimal(18, 0)" />
			<column name="FutPriAmount" type="decimal(18, 0)" />
			<column name="FutPftAmount" type="decimal(18, 0)" />
		</addColumn>
	</changeSet>

	<changeSet id="643" author="kranthi.k">
		<sql>
			<![CDATA[
				update presentmentdetails set manualAdviseId = 0 where manualAdviseId is null;
			]]>
		</sql>
	</changeSet>

	<changeSet id="644" author="kranthi.k" dbms="postgresql">
		<addDefaultValue columnName="manualAdviseId" tableName="presentmentdetails" defaultValue="0" />
	</changeSet>

	<changeSet id="645" author="kranthi.k" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE  presentmentdetails ADD CONSTRAINT df_manualAdviseId DEFAULT 0 FOR manualAdviseId;
			]]>
		</sql>
	</changeSet>

	<changeSet id="646" author="kranthi.k" dbms="oracle">
		<addDefaultValue columnName="manualAdviseId" tableName="presentmentdetails" defaultValue="0" />
	</changeSet>

	<changeSet id="647" author="narendra.m">
		<addColumn tableName="LimitDetails">
			<column name="OSPriBal" type="decimal(18, 0)" />
		</addColumn>
	</changeSet>

	<changeSet id="647.1" author="narendra.m">
		<addColumn tableName="LimitDetails_Temp">
			<column name="OSPriBal" type="decimal(18, 0)" />
		</addColumn>
	</changeSet>

	<changeSet id="647.2" author="narendra.m">
		<sql>
			<![CDATA[
				update LimitDetails set OsPriBal = 0;
				update LimitDetails_Temp set OsPriBal = 0;
			 ]]>
		</sql>
	</changeSet>

	<changeSet id="647.3" author="narendra.m" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE LIMITDETAILS ADD CONSTRAINT DF_LIMITDETAILS_OSPRIBAL DEFAULT 0 FOR OSPRIBAL;
				ALTER TABLE LIMITDETAILS_TEMP ADD CONSTRAINT DF_LIMITDETAILS_T_OSPRIBAL DEFAULT 0 FOR OSPRIBAL;
			]]>
		</sql>
	</changeSet>

	<changeSet id="647.3" author="narendra.m" dbms="postgresql, oracle">
		<addDefaultValue columnName="OSPriBal" tableName="LimitDetails" defaultValue="0" />
		<addDefaultValue columnName="OSPriBal" tableName="LimitDetails_Temp" defaultValue="0" />
	</changeSet>

	<changeSet id="647.4_pre" author="Vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_save_and_drop_dependencies ('plf', 'limitdetails_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="647.4" author="narendra.m">
		<createView viewName="LimitDetails_View" replaceIfExists="true">
		<![CDATA[
					SELECT T1.DETAILID,
					T1.LIMITHEADERID,
					T1.LIMITSTRUCTUREDETAILSID,
					T5.GROUPCODE,
					T3.GROUPNAME,
					T5.LIMITLINE,
					T4.RULECODEDESC LIMITLINEDESC,
					COALESCE(T1.REVOLVING,0) REVOLVING,
					COALESCE(T4.REVOLVING,0) LIMITSTRUCTUREREVOLVING ,
					T1.EXPIRYDATE,
					T1.LIMITSANCTIONED,
					T1.RESERVEDLIMIT,
					T1.UTILISEDLIMIT,
					T1.LIMITCHECK,
					T1.LIMITCHKMETHOD,
					T5.ITEMSEQ,
					T5.ITEMPRIORITY,
					T5.ITEMLEVEL,
					T5.EDITABLE,
					T5.DISPLAYSTYLE,
					T1.VERSION,
					T1.CREATEDBY,
					T1.CREATEDON,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T2.USRLOGIN,
					T2.USRFNAME,
					T2.USRMNAME,
					T2.USRLNAME,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.NONRVLUTILISED,
					T1.BANKINGARRANGEMENT,
					T1.LIMITCONDITION,
					T1.EXTERNALREF,
					T1.TENOR,
					T1.EXTERNALREF1,
					T1.OSPRIBAL
					FROM LIMITDETAILS_TEMP T1
					INNER JOIN SECUSERS T2 ON T1.LASTMNTBY = T2.USRID
					INNER JOIN LIMITSTRUCTUREDETAILS T5 ON T1.LIMITSTRUCTUREDETAILSID = T5.LIMITSTRUCTUREDETAILSID
					LEFT OUTER JOIN LIMITGROUP T3 ON T5.GROUPCODE = T3.GROUPCODE
					LEFT OUTER JOIN RULES T4 ON T5.LIMITLINE = T4.RULECODE
					AND RULEMODULE  ='LMTLINE'
					UNION ALL
					SELECT T1.DETAILID,
					T1.LIMITHEADERID,
					T1.LIMITSTRUCTUREDETAILSID,
					T5.GROUPCODE,
					T3.GROUPNAME,
					T5.LIMITLINE,
					T4.RULECODEDESC LIMITLINEDESC,
					COALESCE(T1.REVOLVING,0)REVOLVING,
					COALESCE(T4.REVOLVING,0) LIMITSTRUCTUREREVOLVING,
					T1.EXPIRYDATE,
					T1.LIMITSANCTIONED,
					T1.RESERVEDLIMIT,
					T1.UTILISEDLIMIT,
					T1.LIMITCHECK,
					T1.LIMITCHKMETHOD,
					T5.ITEMSEQ,
					T5.ITEMPRIORITY,
					T5.ITEMLEVEL,
					T5.EDITABLE,
					T5.DISPLAYSTYLE,
					T1.VERSION,
					T1.CREATEDBY,
					T1.CREATEDON,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T2.USRLOGIN,
					T2.USRFNAME,
					T2.USRMNAME,
					T2.USRLNAME,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.NONRVLUTILISED,
					T1.BANKINGARRANGEMENT,
					T1.LIMITCONDITION,
					T1.EXTERNALREF,
					T1.TENOR,
					T1.EXTERNALREF1,
					T1.OSPRIBAL
					FROM LIMITDETAILS T1
					INNER JOIN SECUSERS T2 ON T1.LASTMNTBY = T2.USRID
					INNER JOIN LIMITSTRUCTUREDETAILS T5 ON T1.LIMITSTRUCTUREDETAILSID = T5.LIMITSTRUCTUREDETAILSID
					LEFT OUTER JOIN LIMITGROUP T3 ON T5.GROUPCODE = T3.GROUPCODE
					LEFT OUTER JOIN RULES T4 ON T5.LIMITLINE = T4.RULECODE AND RULEMODULE  ='LMTLINE'
					WHERE NOT EXISTS (SELECT 1 FROM LIMITDETAILS_TEMP WHERE DETAILID = T1.DETAILID)
					]]>
		</createView>
	</changeSet>

	<changeSet id="647.4_post" author="Vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_restore_dependencies ('plf', 'limitdetails_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="647.5_pre" author="Vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_save_and_drop_dependencies ('plf', 'limitdetails_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="647.5" author="narendra.m">
		<createView viewName="LimitDetails_AView" replaceIfExists="true">
		<![CDATA[
				 SELECT T1.DETAILID,
					T1.LIMITHEADERID,
					T1.LIMITSTRUCTUREDETAILSID,
					T5.GROUPCODE,
					T3.GROUPNAME,
					T5.LIMITLINE,
					T4.RULECODEDESC LIMITLINEDESC,
					COALESCE(T1.REVOLVING,0)REVOLVING,
					COALESCE(T4.REVOLVING,0) LIMITSTRUCTUREREVOLVING,
					T1.EXPIRYDATE,
					T1.LIMITSANCTIONED,
					T1.RESERVEDLIMIT,
					T1.UTILISEDLIMIT,
					T1.LIMITCHECK,
					T1.LIMITCHKMETHOD,
					T5.ITEMSEQ,
					T5.ITEMPRIORITY,
					T5.ITEMLEVEL,
					T5.EDITABLE,
					T5.DISPLAYSTYLE,
					T1.VERSION,
					T1.CREATEDBY,
					T1.CREATEDON,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T2.USRLOGIN,
					T2.USRFNAME,
					T2.USRMNAME,
					T2.USRLNAME,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.NONRVLUTILISED,
					T1.BANKINGARRANGEMENT,
					T1.LIMITCONDITION,
					T1.EXTERNALREF,
					T1.TENOR,
					T1.EXTERNALREF1,
					T1.OSPRIBAL
					FROM LIMITDETAILS T1
					INNER JOIN SECUSERS T2 ON T1.LASTMNTBY = T2.USRID
					INNER JOIN LIMITSTRUCTUREDETAILS T5 ON T1.LIMITSTRUCTUREDETAILSID = T5.LIMITSTRUCTUREDETAILSID
					LEFT OUTER JOIN LIMITGROUP T3 ON T5.GROUPCODE = T3.GROUPCODE
					LEFT OUTER JOIN RULES T4 ON T5.LIMITLINE = T4.RULECODE AND RULEMODULE  ='LMTLINE'
					]]>
		</createView>
	</changeSet>

	<changeSet id="647.5_post" author="Vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_restore_dependencies ('plf', 'limitdetails_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="648" author="vijaya.a">
		<sql>
			<![CDATA[
				Delete from SMTPARAMETERS Where SYSPARMCODE = 'ISVERIFICATION_CATEGORY_REQUIRED';
				Insert into SMTPARAMETERS (SYSPARMCODE,SYSPARMDESC,SYSPARMTYPE,SYSPARMMAINT,SYSPARMVALUE,SYSPARMLENGTH,SYSPARMDEC,SYSPARMLIST,SYSPARMVALDMOD,SYSPARMDESCRIPTION,VERSION,LASTMNTBY,LASTMNTON,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID) values ('ISVERIFICATION_CATEGORY_REQUIRED','Is verification category required','String',1,'Y',3,0,null,null,'Is verification category required',1,1000,current_timestamp,'Approved',null,null,null,null,null,0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="649" author="vijaya.a">
		<sql>
			<![CDATA[
				Delete from SMTPARAMETERS Where SYSPARMCODE = 'ISVERIFICATION_CATEGORY_REQUIRED';
				Delete from SMTPARAMETERS Where SYSPARMCODE = 'VERIFICATION_CATEGORY_REQUIRED';
				Insert into SMTPARAMETERS (SYSPARMCODE,SYSPARMDESC,SYSPARMTYPE,SYSPARMMAINT,SYSPARMVALUE,SYSPARMLENGTH,SYSPARMDEC,SYSPARMLIST,SYSPARMVALDMOD,SYSPARMDESCRIPTION,VERSION,LASTMNTBY,LASTMNTON,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID) values ('VERIFICATION_CATEGORY_REQUIRED','Is verification category required','String',1,'Y',3,0,null,null,'Is verification category required',1,1000,current_timestamp,'Approved',null,null,null,null,null,0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="650" author="satyanarayana.g">
		<sql>
			<![CDATA[
				UPDATE FINREPAYHEADER SET PARTIALPAIDAMOUNT = 0 WHERE PARTIALPAIDAMOUNT IS NULL;
				UPDATE FINREPAYHEADER SET FUTPRIAMOUNT = 0 WHERE FUTPRIAMOUNT IS NULL;
				UPDATE FINREPAYHEADER SET FUTPFTAMOUNT = 0 WHERE FUTPFTAMOUNT IS NULL;
				UPDATE FINREPAYHEADER_TEMP SET PARTIALPAIDAMOUNT = 0 WHERE PARTIALPAIDAMOUNT IS NULL;
				UPDATE FINREPAYHEADER_TEMP SET FUTPRIAMOUNT = 0 WHERE FUTPRIAMOUNT IS NULL;
				UPDATE FINREPAYHEADER_TEMP SET FUTPFTAMOUNT = 0 WHERE FUTPFTAMOUNT IS NULL;
			 ]]>
		</sql>
	</changeSet>

	<changeSet id="650.1" author="satyanarayana.g" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE FINREPAYHEADER ADD CONSTRAINT DF_FINREPAYHEADER_PRPDAMT DEFAULT 0 FOR PARTIALPAIDAMOUNT;
				ALTER TABLE FINREPAYHEADER ADD CONSTRAINT DF_FINREPAYHEADER_FTPRAMT DEFAULT 0 FOR FUTPRIAMOUNT;
				ALTER TABLE FINREPAYHEADER ADD CONSTRAINT DF_FINREPAYHEADER_FTPFAMT DEFAULT 0 FOR FUTPFTAMOUNT;
				ALTER TABLE FINREPAYHEADER_TEMP ADD CONSTRAINT DF_FINREPAYHEADER_TMP_PRPDAMT DEFAULT 0 FOR PARTIALPAIDAMOUNT;
				ALTER TABLE FINREPAYHEADER_TEMP ADD CONSTRAINT DF_FINREPAYHEADER_TMP_FTPRAMT DEFAULT 0 FOR FUTPRIAMOUNT;
				ALTER TABLE FINREPAYHEADER_TEMP ADD CONSTRAINT DF_FINREPAYHEADER_TMP_FTPFAMT DEFAULT 0 FOR FUTPFTAMOUNT;
			]]>
		</sql>
	</changeSet>

	<changeSet id="650.2" author="satyanarayana.g" dbms="postgresql, oracle">
		<addDefaultValue columnName="PartialPaidAmount" tableName="FinRepayHeader" defaultValue="0" />
		<addDefaultValue columnName="FutPriAmount" tableName="FinRepayHeader" defaultValue="0" />
		<addDefaultValue columnName="FutPftAmount" tableName="FinRepayHeader" defaultValue="0" />
		<addDefaultValue columnName="PartialPaidAmount" tableName="FinRepayHeader_Temp" defaultValue="0" />
		<addDefaultValue columnName="FutPriAmount" tableName="FinRepayHeader_Temp" defaultValue="0" />
		<addDefaultValue columnName="FutPftAmount" tableName="FinRepayHeader_Temp" defaultValue="0" />
	</changeSet>


	<changeSet id="651" author="DurgaPrasad.G">
		<sql>
			<![CDATA[
				DELETE FROM SMTPARAMETERS WHERE SYSPARMCODE='CPZ_POS_INTACT';
				INSERT INTO SMTPARAMETERS VALUES ('CPZ_POS_INTACT', 'Capitalize amount will not be capitalized to POS amount is req or not', 'String', 1, 'N', 1, 0, NULL, NULL,'Capitalize amount will not be capitalized to POS amount is req or not', 1, 1000, CURRENT_TIMESTAMP,'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="652" author="murthy.y">
		<sql>
			<![CDATA[
				delete from REPORTFILTERFIELDS where reportid in (select reportid from reportconfiguration where menuitemcode='menu_Item_InstitutionLimits');
				delete from reportconfiguration where menuitemcode='menu_Item_InstitutionLimits';

				insert into reportconfiguration values((select max(reportid)+1 from reportconfiguration),'Excel:Institution Limits', 'Institution Limits',1,'InstitutionLimits', 'dataSource',1,'menu_Item_InstitutionLimits',1,1000,' ',' ',' ',' ',' ',' ',0,current_timestamp,0,1,0);
				insert into REPORTFILTERFIELDS values ((select reportid from reportconfiguration where menuitemcode='menu_Item_InstitutionLimits'),1,'Structure','LOVSEARCH','Structure','ls.StructureCode','','InstLimitStructure','getStructureCode','getStructureName',1,0,0,0,1,0,' ',' ',' ',' ',250,0,'=',1,1000,'Approved',' ',' ',' ',' ',' ',0,current_timestamp,'');
			]]>
		</sql>
	</changeSet>

	<changeSet id="653" author="satyanarayana.g">
		<addColumn tableName="FEETYPES">
			<column name="TdsReq" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="654" author="satyanarayana.g">
		<addColumn tableName="FEETYPES_TEMP">
			<column name="TdsReq" type="boolean" />
		</addColumn>
	</changeSet>
	<changeSet id="655" author="satyanarayana.g">
		<sql>
			<![CDATA[
				UPDATE FeeTypes Set TdsReq = 0  where TdsReq is null;
				UPDATE FeeTypes_Temp Set TDSReq = 0 where TDSReq is null;
			]]>
		</sql>
	</changeSet>

	<changeSet id="656" author="satyanarayana.g" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE FeeTypes ADD CONSTRAINT DF_FeeTypes_TDS DEFAULT 0 FOR TdsReq;
				ALTER TABLE FeeTypes_Temp ADD CONSTRAINT DF_FeeTypes_TEMP_TDS DEFAULT 0 FOR TdsReq;
			]]>
		</sql>
	</changeSet>

	<changeSet id="657" author="satyanarayana.g" dbms="postgresql, oracle">
		<addDefaultValue columnName="TdsReq" tableName="FeeTypes" defaultValue="0" />
		<addDefaultValue columnName="TdsReq" tableName="FeeTypes_Temp" defaultValue="0" />
	</changeSet>

	<changeSet id="658_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'feetypes_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="658" author="satyanarayana.g">
		<createView viewName="FEETYPES_VIEW" replaceIfExists="true">
			<![CDATA[
			 SELECT T1.FEETYPEID,
					T1.FEETYPECODE,
					T1.FEETYPEDESC,
					T1.MANUALADVICE,
					T1.REFUNDABLE,
					T1.ADVISETYPE,
					T1.ACCOUNTSETID,
					T1.HOSTFEETYPECODE,
					T1.TAXAPPLICABLE,
					T1.TAXCOMPONENT,
					T1.ACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.ACCOUNTSETCODE,
					T2.ACCOUNTSETCODENAME,
					T1.AMORTZREQ,
					T1.DUEACCREQ,
					T1.DUEACCSET,
         			T3.ACCOUNTSETCODE DUEACCTSETCODE,
					T3.ACCOUNTSETCODENAME DUEACCTSETCODENAME,
					T1.TDSREQ
					FROM FEETYPES_TEMP T1
					LEFT JOIN RMTACCOUNTINGSET T2 ON T1.ACCOUNTSETID = T2.ACCOUNTSETID
          			LEFT JOIN RMTACCOUNTINGSET T3 ON T1.DUEACCSET = T3.ACCOUNTSETID
					UNION ALL
					SELECT T1.FEETYPEID,
					T1.FEETYPECODE,
					T1.FEETYPEDESC,
					T1.MANUALADVICE,
					T1.REFUNDABLE,
					T1.ADVISETYPE,
					T1.ACCOUNTSETID,
					T1.HOSTFEETYPECODE,
					T1.TAXAPPLICABLE,
					T1.TAXCOMPONENT,
					T1.ACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.ACCOUNTSETCODE,
					T2.ACCOUNTSETCODENAME,
					T1.AMORTZREQ,
					T1.DUEACCREQ,
					T1.DUEACCSET,
          			T3.ACCOUNTSETCODE DUEACCTSETCODE,
					T3.ACCOUNTSETCODENAME DUEACCTSETCODENAME,
					T1.TDSREQ
					FROM FEETYPES T1
					LEFT JOIN RMTACCOUNTINGSET T2 ON T1.ACCOUNTSETID = T2.ACCOUNTSETID
          			LEFT JOIN RMTACCOUNTINGSET T3 ON T1.DUEACCSET = T3.ACCOUNTSETID
					WHERE NOT (EXISTS ( SELECT 1
					FROM FEETYPES_TEMP
					WHERE FEETYPES_TEMP.FEETYPEID = T1.FEETYPEID))
					]]>
    	</createView>
	</changeSet>

	<changeSet id="658_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'feetypes_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="659_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'feetypes_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="659" author="satyanarayana.g">
		<createView viewName="FEETYPES_AVIEW" replaceIfExists="true">
				<![CDATA[
					SELECT T1.FEETYPEID,
					T1.FEETYPECODE,
					T1.FEETYPEDESC,
					T1.MANUALADVICE,
					T1.REFUNDABLE,
					T1.ADVISETYPE,
					T1.ACCOUNTSETID,
					T1.HOSTFEETYPECODE,
					T1.TAXAPPLICABLE,
					T1.TAXCOMPONENT,
					T1.ACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.ACCOUNTSETCODE,
					T2.ACCOUNTSETCODENAME,
					T1.AMORTZREQ,
					T1.DUEACCREQ,
					T1.DUEACCSET,
         			T3.ACCOUNTSETCODE DUEACCTSETCODE,
					T3.ACCOUNTSETCODENAME DUEACCTSETCODENAME,
					T1.TDSREQ
					FROM FEETYPES T1
					LEFT JOIN RMTACCOUNTINGSET T2 ON T1.ACCOUNTSETID = T2.ACCOUNTSETID
          			LEFT JOIN RMTACCOUNTINGSET T3 ON T1.DUEACCSET = T3.ACCOUNTSETID
					]]>
	 	</createView>
	</changeSet>

	<changeSet id="659_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'feetypes_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="660_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'feetypes_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="660" author="meena.a">
		<createView viewName="FEETYPES_TVIEW" replaceIfExists="true">
				<![CDATA[
					SELECT  T1.FEETYPEID,
					T1.FEETYPECODE,
					T1.FEETYPEDESC,
					T1.MANUALADVICE,
					T1.REFUNDABLE,
					T1.ADVISETYPE,
					T1.ACCOUNTSETID,
					T1.HOSTFEETYPECODE,
					T1.TAXAPPLICABLE,
					T1.TAXCOMPONENT,
					T1.ACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.ACCOUNTSETCODE,
					T2.ACCOUNTSETCODENAME,
					T1.AMORTZREQ,
					T1.DUEACCREQ,
					T1.DUEACCSET,
           			T3.ACCOUNTSETCODE DUEACCTSETCODE,
					T3.ACCOUNTSETCODENAME DUEACCTSETCODENAME,
					T1.TDSREQ
					FROM FEETYPES_TEMP T1
					LEFT JOIN RMTACCOUNTINGSET T2 ON T1.ACCOUNTSETID = T2.ACCOUNTSETID
           			LEFT JOIN RMTACCOUNTINGSET T3 ON T1.DUEACCSET = T3.ACCOUNTSETID
					]]>
	    </createView>
	</changeSet>

	<changeSet id="660_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'feetypes_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="661" author="satyanarayana.g">
		<addColumn tableName="FINANCEMAIN">
			<column name="odTDSApplicable" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="662" author="satyanarayana.g">
		<addColumn tableName="FINANCEMAIN_TEMP">
			<column name="odTDSApplicable" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="663" author="satyanarayana.g">
		<sql>
			<![CDATA[
				UPDATE FINANCEMAIN SET ODTDSAPPLICABLE = 0 WHERE ODTDSAPPLICABLE IS NULL;
				UPDATE FINANCEMAIN_TEMP SET ODTDSAPPLICABLE = 0 WHERE ODTDSAPPLICABLE IS NULL;
			]]>
		</sql>
	</changeSet>

	<changeSet id="664" author="satyanarayana.g" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE FINANCEMAIN ADD CONSTRAINT DF_FINANCEMAIN_ODTDSAPLB DEFAULT 0 FOR ODTDSAPPLICABLE;
				ALTER TABLE FINANCEMAIN_TEMP ADD CONSTRAINT DF_FINANCEMAIN_TEMP_ODTDSAPLB DEFAULT 0 FOR ODTDSAPPLICABLE;
			]]>
		</sql>
	</changeSet>

	<changeSet id="665" author="satyanarayana.g" dbms="postgresql, oracle">
		<addDefaultValue columnName="odTDSApplicable" tableName="FINANCEMAIN" defaultValue="0" />
		<addDefaultValue columnName="odTDSApplicable" tableName="FINANCEMAIN_Temp" defaultValue="0" />
	</changeSet>

	<changeSet id="666" author="satyanarayana.g">
		<addColumn tableName="FINANCEMAIN_PA">
			<column name="odTDSApplicable" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="667" author="satyanarayana.g">
		<sql>
			<![CDATA[
				UPDATE FINANCEMAIN_PA SET ODTDSAPPLICABLE = 0 WHERE ODTDSAPPLICABLE IS NULL;
			]]>
		</sql>
	</changeSet>

	<changeSet id="668" author="satyanarayana.g" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE FINANCEMAIN_PA ADD CONSTRAINT DF_FINANCEMAIN_ODTDSAPLBL DEFAULT 0 FOR ODTDSAPPLICABLE;
			]]>
		</sql>
	</changeSet>

	<changeSet id="669" author="satyanarayana.g" dbms="postgresql, oracle">
		<addDefaultValue columnName="odTDSApplicable" tableName="FINANCEMAIN_PA" defaultValue="0" />
	</changeSet>

	<changeSet id="670" author="satyanarayana.g">
		<addColumn tableName="REJECTFINANCEMAIN">
			<column name="odTDSApplicable" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="671" author="satyanarayana.g">
		<sql>
			<![CDATA[
				UPDATE REJECTFINANCEMAIN Set odTDSApplicable = 0  WHERE ODTDSAPPLICABLE IS NULL;
			]]>
		</sql>
	</changeSet>

	<changeSet id="672" author="satyanarayana.g" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE REJECTFINANCEMAIN ADD CONSTRAINT DF_REJECTFINANCEMAIN_ODTDSAPL DEFAULT 0 FOR ODTDSAPPLICABLE;
			]]>
		</sql>
	</changeSet>

	<changeSet id="673" author="satyanarayana.g" dbms="postgresql, oracle">
		<addDefaultValue columnName="odTDSApplicable" tableName="REJECTFINANCEMAIN" defaultValue="0" />
	</changeSet>

	<changeSet id="674" author="satyanarayana.g">
		<addColumn tableName="WIFFINANCEMAIN">
			<column name="odTDSApplicable" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="675" author="satyanarayana.g">
		<addColumn tableName="WIFFINANCEMAIN_TEMP">
			<column name="odTDSApplicable" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="676" author="satyanarayana.g">
		<sql>
			<![CDATA[
				UPDATE WIFFINANCEMAIN Set odTDSApplicable = 0  where odTDSApplicable is null;
				UPDATE WIFFINANCEMAIN_TEMP Set odTDSApplicable = 0 where odTDSApplicable is null;
			]]>
		</sql>
	</changeSet>

	<changeSet id="677" author="satyanarayana.g" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE WIFFINANCEMAIN ADD CONSTRAINT DF_WIFFINANCEMAIN_ODTDA DEFAULT 0 FOR odTDSApplicable;
				ALTER TABLE WIFFINANCEMAIN_TEMP ADD CONSTRAINT DF_WIFFINANCEMAIN_TEMP_ODTDA DEFAULT 0 FOR odTDSApplicable;
			]]>
		</sql>
	</changeSet>

	<changeSet id="678" author="satyanarayana.g" dbms="postgresql, oracle">
		<addDefaultValue columnName="odTDSApplicable" tableName="WIFFINANCEMAIN" defaultValue="0" />
		<addDefaultValue columnName="odTDSApplicable" tableName="WIFFINANCEMAIN_TEMP" defaultValue="0" />
	</changeSet>

	<changeSet id="679_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemain_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="679" author="satyanarayana.g">
		<createView viewName="financemain_view" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINREFERENCE,
				    T1.INVESTMENTREF,
				    T1.NUMBEROFTERMS,
				    T1.GRCPERIODENDDATE,
				    T1.ALLOWGRCPERIOD,
				    T1.GRACEBASERATE,
				    T1.GRACESPECIALRATE,
				    T1.GRCPFTRATE,
				    T1.GRCPFTFRQ,
				    T1.NEXTGRCPFTDATE,
				    T1.ALLOWGRCPFTRVW,
				    T1.GRCPFTRVWFRQ,
				    T1.NEXTGRCPFTRVWDATE,
				    T1.ALLOWGRCCPZ,
				    T1.GRCCPZFRQ,
				    T1.NEXTGRCCPZDATE,
				    T1.REPAYBASERATE,
				    T1.REPAYSPECIALRATE,
				    T1.REPAYPROFITRATE,
				    T1.REPAYFRQ,
				    T1.NEXTREPAYDATE,
				    T1.REPAYPFTFRQ,
				    T1.NEXTREPAYPFTDATE,
				    T1.ALLOWREPAYRVW,
				    T1.REPAYRVWFRQ,
				    T1.NEXTREPAYRVWDATE,
				    T1.ALLOWREPAYCPZ,
				    T1.REPAYCPZFRQ,
				    T1.NEXTREPAYCPZDATE,
				    T1.MATURITYDATE,
				    T1.CPZATGRACEEND,
				    T1.DOWNPAYMENT,
				    T1.GRACEFLATAMOUNT,
				    T1.REQREPAYAMOUNT,
				    T1.TOTALPROFIT,
				    T1.TOTALCPZ,
				    T1.TOTALGROSSPFT,
				    T1.TOTALGROSSGRCPFT,
				    T1.TOTALGRACEPFT,
				    T1.TOTALGRACECPZ,
				    T1.GRCRATEBASIS,
				    T1.REPAYRATEBASIS,
				    T1.FINTYPE,
				    T1.FINREMARKS,
				    T1.FINCCY,
				    T1.SCHEDULEMETHOD,
				    T1.PROFITDAYSBASIS,
				    T1.REQMATURITY,
				    T1.CALTERMS,
				    T1.CALMATURITY,
				    T1.FIRSTREPAY,
				    T1.LASTREPAY,
				    T1.FINSTARTDATE,
				    T1.FINAMOUNT,
				    T1.FINAMOUNT + T1.FEECHARGEAMT - T1.DOWNPAYMENT  LOVDESCFINANCINGAMOUNT,
				    T1.FINREPAYMENTAMOUNT,
				    T1.CUSTID,
				    T1.DEFFERMENTS,
				    T1.PLANDEFERCOUNT,
				    T1.FINBRANCH,
				    T1.FINSOURCEID,
				    T1.ALLOWEDDEFRPYCHANGE,
				    T1.AVAILEDDEFRPYCHANGE,
				    T1.ALLOWEDDEFFRQCHANGE,
				    T1.AVAILEDDEFFRQCHANGE,
				    T1.RECALTYPE,
				    T1.FINASSETVALUE,
				    T1.DISBACCOUNTID,
				    T1.REPAYACCOUNTID,
				    T1.FINISACTIVE,
				    T1.LIMITVALID,
				    T1.OVERRIDELIMIT,
				    T1.SECURITYDEPOSIT,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T7.FINTYPEDESC  LOVDESCFINTYPENAME,
				    T7.FINMAXAMOUNT  LOVDESCFINMAXAMT,
				    T7.FINMINAMOUNT  LOVDESCFINMINAMOUNT,
				    T1.MINDOWNPAYPERC,
				    T7.FINISALWDIFFERMENT  LOVDESCFINALWDEFERMENT,
				    T7.FINISDWPAYREQUIRED  LOVDESCDWNPAYREQ,
				    T7.FINMAXDIFFERMENT  LOVDESCFINMAXDIFFERMENT,
				    T12.BRANCHDESC  LOVDESCFINBRANCHNAME,
				    T12.BRANCHPROVINCE  FINBRANCHPROVINCECODE,
				    T1.LASTREPAYDATE,
				    T1.LASTREPAYPFTDATE,
				    T1.LASTREPAYRVWDATE,
				    T1.LASTREPAYCPZDATE,
				    T1.ALLOWGRCREPAY,
				    T1.GRCSCHDMTHD,
				    T1.GRCMARGIN,
				    T1.REPAYMARGIN,
				    T1.FINCURRASSETVALUE,
				    T1.FINCOMMITMENTREF,
				    T1.FINLIMITREF,
				    T1.DEPRECIATIONFRQ,
				    T1.FINCONTRACTDATE,
				    T1.NEXTDEPDATE,
				    T1.LASTDEPDATE,
				    T1.FINACCOUNT,
				    T1.FINCUSTPFTACCOUNT,
				    T17.ACRTILLLBD  LOVDESCACCRUEDTILLLBD,
				    T7.FINRVWRATEAPPLFOR,
				    T1.TOTALREPAYAMT,
				    T1.CLOSINGSTATUS,
				    T1.FINAPPROVEDDATE,
				    T1.FEECHARGEAMT,
				    T1.BLACKLISTED,
				    T1.FINREPAYPFTONFRQ,
				    T1.ANUALIZEDPERCRATE,
				    T1.EFFECTIVERATEOFRETURN,
				    T1.MIGRATEDFINANCE,
				    T1.SCHEDULEMAINTAINED,
				    T1.SCHEDULEREGENERATED,
				    T1.FINPURPOSE,
				    T39.LOANPURPOSEDESC  LOVDESCFINPURPOSENAME,
				    T1.FINSTATUS,
				    T1.FINSTSREASON,
				    T1.INITIATEUSER,
				    T1.BANKNAME,
				    T1.IBAN,
				    T1.ACCOUNTTYPE,
				    T1.DDAREFERENCENO,
				    T7.FINSCHEDULEON  LOVDESCFINSCHEDULEON,
				    T1.CUSTDSR,
				    T1.JOINTACCOUNT,
				    T1.JOINTCUSTID,
				    T1.DOWNPAYBANK,
				    T1.DOWNPAYSUPL,
				    T1.DOWNPAYACCOUNT,
				    T1.SECURITYCOLLATERAL,
				    T1.APPROVED,
				    T1.DISCREPANCY,
				    T1.LIMITAPPROVED,
				    T1.GRACETERMS,
				    T7.FINDIVISION  LOVDESCFINDIVISION,
				    T1.RCDMAINTAINSTS,
				    T1.FINREPAYMETHOD,
				    T1.GRCPROFITDAYSBASIS,
				    T1.STEPFINANCE,
				    T1.STEPTYPE,
				    T1.STEPPOLICY,
				    T1.ALWMANUALSTEPS,
				    T1.NOOFSTEPS,
				    T1.LINKEDFINREF,
				    T1.NEXTUSERID,
				    T1.PRIORITY,
				    T24.POLICYDESC  LOVDESCSTEPPOLICYNAME,
				    T1.GRCMINRATE,
				    T1.GRCMAXRATE,
				    T1.RPYMINRATE,
				    T1.RPYMAXRATE,
				    T1.DEVIATIONAPPROVAL,
				    T1.MANUALSCHEDULE,
				    T1.TAKEOVERFINANCE,
				    T1.GRCADVBASERATE,
				    T1.GRCADVMARGIN,
				    T1.GRCADVPFTRATE,
				    T1.RPYADVBASERATE,
				    T1.RPYADVMARGIN,
				    T1.RPYADVPFTRATE,
				    T1.SUPPLEMENTRENT,
				    T1.INCREASEDCOST,
				    T1.CREDITINSAMT,
				    T1.ROLLOVERFRQ,
				    T1.NEXTROLLOVERDATE,
				    T27.CUSTSTSDESCRIPTION,
				    T1.SHARIASTATUS,
				    T1.INITIATEDATE,
				    T1.FINPREAPPROVEDREF,
				    T1.MMAID,
				    T1.ACCOUNTSOFFICER,
				    T1.FEEACCOUNTID,
				    T1.FINCANCELAC,
				    T28.DEALERNAME  LOVDESCACCOUNTSOFFICER,
				    T28.DEALERCITY  LOVDESCSOURCECITY,
				    T1.DSACODE,
				    T30.ROFFICERDESC  DSACODEDESC,
				    T1.TDSAPPLICABLE,
				    T1.MANDATEID,
				    T1.DROPLINEFRQ,
				    T1.FIRSTDROPLINEDATE,
				    T1.PFTSERVICINGODLIMIT,
				    T1.INSURANCEAMT,
				    T1.DEDUCTINSDISB,
				    T1.ALWBPI,
				    T1.BPITREATMENT,
				    T1.PLANEMIHALW,
				    T1.PLANEMIHMETHOD,
				    T1.PLANEMIHMAXPERYEAR,
				    T1.PLANEMIHMAX,
				    T1.PLANEMIHLOCKPERIOD,
				    T1.PLANEMICPZ,
				    T1.CALROUNDINGMODE,
				    T1.ALWMULTIDISB,
				    T1.APPLICATIONNO,
				    T1.REFERRALID,
				    T33.ROFFICERDESC  REFERRALIDDESC,
				    T1.DMACODE,
				    T34.ROFFICERDESC  DMACODEDESC,
				    T1.SALESDEPARTMENT,
				    T35.DEPTDESC  SALESDEPARTMENTDESC,
				    T1.QUICKDISB,
				    T1.WIFREFERENCE,
				    T1.UNPLANEMIHLOCKPERIOD,
				    T1.UNPLANEMICPZ,
				    T1.REAGECPZ,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.AVAILEDUNPLANEMI,
				    T1.AVAILEDREAGEH,
				    T1.BPIAMOUNT,
				    T1.DEDUCTFEEDISB,
				    T1.RVWRATEAPPLFOR,
				    T1.SCHCALONRVW,
				    T1.PASTDUEPFTCALMTHD,
				    T1.PASTDUEPFTMARGIN,
				    T1.DROPPINGMETHOD,
				    T1.RATECHGANYDAY,
				    T1.PROMOTIONCODE,
				    T1.RESTRUCTURELOAN,
				    T1.OLDFINREFERENCE,
				    T1.REAGEBUCKET,
				    T1.FINCATEGORY,
				    T1.PRODUCTCATEGORY,
				    T1.ROUNDINGTARGET,
				    T36.ENTITYCODE  LOVDESCENTITYCODE,
				    T1.ELIGIBILITYMETHOD,
				    T38.FIELDCODEVALUE  LOVELIGIBILITYMETHOD,
				    T38.VALUEDESC  LOVDESCELIGIBILITYMETHOD,
				    T1.EMPLOYEENAME,
				    T37.ROFFICERDESC  EMPLOYEENAMEDESC,
				    T1.SAMPLINGREQUIRED,
				    T1.LEGALREQUIRED,
				    T1.GRCMAXAMOUNT,
				    T1.CONNECTOR,
				    T40.DEALERNAME  CONNECTORCODE,
				    T40.DEALERCITY  CONNECTORDESC,
				    T1.ADVANCEEMI,
				    T1.ADVEMITERMS,
				    T1.BPIPFTDAYSBASIS,
				    T1.FIXEDRATETENOR,
				    T1.FIXEDTENORRATE,
				    T12.BRANCHTEL  FINBRANCHCONTACT,
				    T1.PROCESSATTRIBUTES,
				    T1.BUSINESSVERTICAL,
				    BV.CODE  BUSINESSVERTICALCODE,
				    BV.DESCRIPTION  BUSINESSVERTICALDESC,
				    T1.GRCADVTYPE,
				    T1.GRCADVTERMS,
				    T1.ADVTYPE,
				    T1.ADVTERMS,
				    T1.ADVSTAGE,
				    T1.TDSPERCENTAGE,
				    T1.TDSSTARTDATE,
				    T1.TDSENDDATE,
				    T1.TDSLIMITAMT,
				    T1.VANREQ,
				    T1.VANCODE,
				    T1.ALLOWDRAWINGPOWER,
				    T1.ALLOWREVOLVING,
				    T1.SANBSDSCHDLE,
				    T1.PROMOTIONSEQID,
				    T1.SVAMOUNT,
				    T1.CBAMOUNT,
				    T1.APPLIEDLOANAMT,
				    T1.FINISRATERVWATGRCEND,
					T1.ODTDSAPPLICABLE
				   FROM FINANCEMAIN_TEMP T1
				     JOIN RMTFINANCETYPES T7 ON T1.FINTYPE = T7.FINTYPE
				     LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH = T12.BRANCHCODE
				     LEFT JOIN FINPFTDETAILS T17 ON T17.FINREFERENCE = T1.FINREFERENCE
				     LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY = T24.POLICYCODE
				     LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS = T27.CUSTSTSCODE
				     LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
				     LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE = T30.ROFFICERCODE
				     LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID = T33.ROFFICERCODE
				     LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE = T34.ROFFICERCODE
				     LEFT JOIN BMTDEPARTMENTS T35 ON T1.SALESDEPARTMENT = T35.DEPTCODE
				     LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION = T36.DIVISIONCODE
				     LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME = T37.ROFFICERCODE
				     LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE = 'ELGMETHOD'
				     LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE = T39.LOANPURPOSECODE
				     LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
				     LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
				UNION ALL
				 SELECT T1.FINREFERENCE,
				    T1.INVESTMENTREF,
				    T1.NUMBEROFTERMS,
				    T1.GRCPERIODENDDATE,
				    T1.ALLOWGRCPERIOD,
				    T1.GRACEBASERATE,
				    T1.GRACESPECIALRATE,
				    T1.GRCPFTRATE,
				    T1.GRCPFTFRQ,
				    T1.NEXTGRCPFTDATE,
				    T1.ALLOWGRCPFTRVW,
				    T1.GRCPFTRVWFRQ,
				    T1.NEXTGRCPFTRVWDATE,
				    T1.ALLOWGRCCPZ,
				    T1.GRCCPZFRQ,
				    T1.NEXTGRCCPZDATE,
				    T1.REPAYBASERATE,
				    T1.REPAYSPECIALRATE,
				    T1.REPAYPROFITRATE,
				    T1.REPAYFRQ,
				    T1.NEXTREPAYDATE,
				    T1.REPAYPFTFRQ,
				    T1.NEXTREPAYPFTDATE,
				    T1.ALLOWREPAYRVW,
				    T1.REPAYRVWFRQ,
				    T1.NEXTREPAYRVWDATE,
				    T1.ALLOWREPAYCPZ,
				    T1.REPAYCPZFRQ,
				    T1.NEXTREPAYCPZDATE,
				    T1.MATURITYDATE,
				    T1.CPZATGRACEEND,
				    T1.DOWNPAYMENT,
				    T1.GRACEFLATAMOUNT,
				    T1.REQREPAYAMOUNT,
				    T1.TOTALPROFIT,
				    T1.TOTALCPZ,
				    T1.TOTALGROSSPFT,
				    T1.TOTALGROSSGRCPFT,
				    T1.TOTALGRACEPFT,
				    T1.TOTALGRACECPZ,
				    T1.GRCRATEBASIS,
				    T1.REPAYRATEBASIS,
				    T1.FINTYPE,
				    T1.FINREMARKS,
				    T1.FINCCY,
				    T1.SCHEDULEMETHOD,
				    T1.PROFITDAYSBASIS,
				    T1.REQMATURITY,
				    T1.CALTERMS,
				    T1.CALMATURITY,
				    T1.FIRSTREPAY,
				    T1.LASTREPAY,
				    T1.FINSTARTDATE,
				    T1.FINAMOUNT,
				    T1.FINAMOUNT + T1.FEECHARGEAMT - T1.DOWNPAYMENT AS LOVDESCFINANCINGAMOUNT,
				    T1.FINREPAYMENTAMOUNT,
				    T1.CUSTID,
				    T1.DEFFERMENTS,
				    T1.PLANDEFERCOUNT,
				    T1.FINBRANCH,
				    T1.FINSOURCEID,
				    T1.ALLOWEDDEFRPYCHANGE,
				    T1.AVAILEDDEFRPYCHANGE,
				    T1.ALLOWEDDEFFRQCHANGE,
				    T1.AVAILEDDEFFRQCHANGE,
				    T1.RECALTYPE,
				    T1.FINASSETVALUE,
				    T1.DISBACCOUNTID,
				    T1.REPAYACCOUNTID,
				    T1.FINISACTIVE,
				    T1.LIMITVALID,
				    T1.OVERRIDELIMIT,
				    T1.SECURITYDEPOSIT,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T7.FINTYPEDESC  LOVDESCFINTYPENAME,
				    T7.FINMAXAMOUNT  LOVDESCFINMAXAMT,
				    T7.FINMINAMOUNT  LOVDESCFINMINAMOUNT,
				    T1.MINDOWNPAYPERC,
				    T7.FINISALWDIFFERMENT  LOVDESCFINALWDEFERMENT,
				    T7.FINISDWPAYREQUIRED  LOVDESCDWNPAYREQ,
				    T7.FINMAXDIFFERMENT  LOVDESCFINMAXDIFFERMENT,
				    T12.BRANCHDESC  LOVDESCFINBRANCHNAME,
				    T12.BRANCHPROVINCE  FINBRANCHPROVINCECODE,
				    T1.LASTREPAYDATE,
				    T1.LASTREPAYPFTDATE,
				    T1.LASTREPAYRVWDATE,
				    T1.LASTREPAYCPZDATE,
				    T1.ALLOWGRCREPAY,
				    T1.GRCSCHDMTHD,
				    T1.GRCMARGIN,
				    T1.REPAYMARGIN,
				    T1.FINCURRASSETVALUE,
				    T1.FINCOMMITMENTREF,
				    T1.FINLIMITREF,
				    T1.DEPRECIATIONFRQ,
				    T1.FINCONTRACTDATE,
				    T1.NEXTDEPDATE,
				    T1.LASTDEPDATE,
				    T1.FINACCOUNT,
				    T1.FINCUSTPFTACCOUNT,
				    T17.ACRTILLLBD  LOVDESCACCRUEDTILLLBD,
				    T7.FINRVWRATEAPPLFOR,
				    T1.TOTALREPAYAMT,
				    T1.CLOSINGSTATUS,
				    T1.FINAPPROVEDDATE,
				    T1.FEECHARGEAMT,
				    T1.BLACKLISTED,
				    T1.FINREPAYPFTONFRQ,
				    T1.ANUALIZEDPERCRATE,
				    T1.EFFECTIVERATEOFRETURN,
				    T1.MIGRATEDFINANCE,
				    T1.SCHEDULEMAINTAINED,
				    T1.SCHEDULEREGENERATED,
				    T1.FINPURPOSE,
				    T39.LOANPURPOSEDESC  LOVDESCFINPURPOSENAME,
				    T1.FINSTATUS,
				    T1.FINSTSREASON,
				    T1.INITIATEUSER,
				    T1.BANKNAME,
				    T1.IBAN,
				    T1.ACCOUNTTYPE,
				    T1.DDAREFERENCENO,
				    T7.FINSCHEDULEON  LOVDESCFINSCHEDULEON,
				    T1.CUSTDSR,
				    T1.JOINTACCOUNT,
				    T1.JOINTCUSTID,
				    T1.DOWNPAYBANK,
				    T1.DOWNPAYSUPL,
				    T1.DOWNPAYACCOUNT,
				    T1.SECURITYCOLLATERAL,
				    T1.APPROVED,
				    T1.DISCREPANCY,
				    T1.LIMITAPPROVED,
				    T1.GRACETERMS,
				    T7.FINDIVISION  LOVDESCFINDIVISION,
				    T1.RCDMAINTAINSTS,
				    T1.FINREPAYMETHOD,
				    T1.GRCPROFITDAYSBASIS,
				    T1.STEPFINANCE,
				    T1.STEPTYPE,
				    T1.STEPPOLICY,
				    T1.ALWMANUALSTEPS,
				    T1.NOOFSTEPS,
				    T1.LINKEDFINREF,
				    T1.NEXTUSERID,
				    T1.PRIORITY,
				    T24.POLICYDESC  LOVDESCSTEPPOLICYNAME,
				    T1.GRCMINRATE,
				    T1.GRCMAXRATE,
				    T1.RPYMINRATE,
				    T1.RPYMAXRATE,
				    T1.DEVIATIONAPPROVAL,
				    T1.MANUALSCHEDULE,
				    T1.TAKEOVERFINANCE,
				    T1.GRCADVBASERATE,
				    T1.GRCADVMARGIN,
				    T1.GRCADVPFTRATE,
				    T1.RPYADVBASERATE,
				    T1.RPYADVMARGIN,
				    T1.RPYADVPFTRATE,
				    T1.SUPPLEMENTRENT,
				    T1.INCREASEDCOST,
				    T1.CREDITINSAMT,
				    T1.ROLLOVERFRQ,
				    T1.NEXTROLLOVERDATE,
				    T27.CUSTSTSDESCRIPTION,
				    T1.SHARIASTATUS,
				    T1.INITIATEDATE,
				    T1.FINPREAPPROVEDREF,
				    T1.MMAID,
				    T1.ACCOUNTSOFFICER,
				    T1.FEEACCOUNTID,
				    T1.FINCANCELAC,
				    T28.DEALERNAME  LOVDESCACCOUNTSOFFICER,
				    T28.DEALERCITY  LOVDESCSOURCECITY,
				    T1.DSACODE,
				    T30.ROFFICERDESC  DSACODEDESC,
				    T1.TDSAPPLICABLE,
				    T1.MANDATEID,
				    T1.DROPLINEFRQ,
				    T1.FIRSTDROPLINEDATE,
				    T1.PFTSERVICINGODLIMIT,
				    T1.INSURANCEAMT,
				    T1.DEDUCTINSDISB,
				    T1.ALWBPI,
				    T1.BPITREATMENT,
				    T1.PLANEMIHALW,
				    T1.PLANEMIHMETHOD,
				    T1.PLANEMIHMAXPERYEAR,
				    T1.PLANEMIHMAX,
				    T1.PLANEMIHLOCKPERIOD,
				    T1.PLANEMICPZ,
				    T1.CALROUNDINGMODE,
				    T1.ALWMULTIDISB,
				    T1.APPLICATIONNO,
				    T1.REFERRALID,
				    T33.ROFFICERDESC  REFERRALIDDESC,
				    T1.DMACODE,
				    T34.ROFFICERDESC  DMACODEDESC,
				    T1.SALESDEPARTMENT,
				    T35.DEPTDESC  SALESDEPARTMENTDESC,
				    T1.QUICKDISB,
				    T1.WIFREFERENCE,
				    T1.UNPLANEMIHLOCKPERIOD,
				    T1.UNPLANEMICPZ,
				    T1.REAGECPZ,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.AVAILEDUNPLANEMI,
				    T1.AVAILEDREAGEH,
				    T1.BPIAMOUNT,
				    T1.DEDUCTFEEDISB,
				    T1.RVWRATEAPPLFOR,
				    T1.SCHCALONRVW,
				    T1.PASTDUEPFTCALMTHD,
				    T1.PASTDUEPFTMARGIN,
				    T1.DROPPINGMETHOD,
				    T1.RATECHGANYDAY,
				    T1.PROMOTIONCODE,
				    T1.RESTRUCTURELOAN,
				    T1.OLDFINREFERENCE,
				    T1.REAGEBUCKET,
				    T1.FINCATEGORY,
				    T1.PRODUCTCATEGORY,
				    T1.ROUNDINGTARGET,
				    T36.ENTITYCODE  LOVDESCENTITYCODE,
				    T1.ELIGIBILITYMETHOD,
				    T38.FIELDCODEVALUE  LOVELIGIBILITYMETHOD,
				    T38.VALUEDESC  LOVDESCELIGIBILITYMETHOD,
				    T1.EMPLOYEENAME,
				    T37.ROFFICERDESC  EMPLOYEENAMEDESC,
				    T1.SAMPLINGREQUIRED,
				    T1.LEGALREQUIRED,
				    T1.GRCMAXAMOUNT,
				    T1.CONNECTOR,
				    T40.DEALERNAME  CONNECTORCODE,
				    T40.DEALERCITY  CONNECTORDESC,
				    T1.ADVANCEEMI,
				    T1.ADVEMITERMS,
				    T1.BPIPFTDAYSBASIS,
				    T1.FIXEDRATETENOR,
				    T1.FIXEDTENORRATE,
				    T12.BRANCHTEL  FINBRANCHCONTACT,
				    T1.PROCESSATTRIBUTES,
				    T1.BUSINESSVERTICAL,
				    BV.CODE  BUSINESSVERTICALCODE,
				    BV.DESCRIPTION  BUSINESSVERTICALDESC,
				    T1.GRCADVTYPE,
				    T1.GRCADVTERMS,
				    T1.ADVTYPE,
				    T1.ADVTERMS,
				    T1.ADVSTAGE,
				    T1.TDSPERCENTAGE,
				    T1.TDSSTARTDATE,
				    T1.TDSENDDATE,
				    T1.TDSLIMITAMT,
				    T1.VANREQ,
				    T1.VANCODE,
				    T1.ALLOWDRAWINGPOWER,
				    T1.ALLOWREVOLVING,
				    T1.SANBSDSCHDLE,
				    T1.PROMOTIONSEQID,
				    T1.SVAMOUNT,
				    T1.CBAMOUNT,
				    T1.APPLIEDLOANAMT,
				    T1.FINISRATERVWATGRCEND,
					T1.ODTDSAPPLICABLE
				   FROM FINANCEMAIN T1
				     JOIN RMTFINANCETYPES T7 ON T1.FINTYPE = T7.FINTYPE
				     LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH = T12.BRANCHCODE
				     LEFT JOIN FINPFTDETAILS T17 ON T17.FINREFERENCE = T1.FINREFERENCE
				     LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY = T24.POLICYCODE
				     LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS = T27.CUSTSTSCODE
				     LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
				     LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE = T30.ROFFICERCODE
				     LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID = T33.ROFFICERCODE
				     LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE = T34.ROFFICERCODE
				     LEFT JOIN BMTDEPARTMENTS T35 ON T1.SALESDEPARTMENT = T35.DEPTCODE
				     LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION = T36.DIVISIONCODE
				     LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME = T37.ROFFICERCODE
				     LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE = 'ELGMETHOD'
				     LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE = T39.LOANPURPOSECODE
				     LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
				     LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
				  WHERE NOT (EXISTS ( SELECT 1  FROM FINANCEMAIN_TEMP
				  WHERE FINANCEMAIN_TEMP.FINREFERENCE = T1.FINREFERENCE))
				  ]]>
		</createView>
	</changeSet>

	<changeSet id="679_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_view');
			]]>
		</sql>
	</changeSet>


	<changeSet id="680_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemain_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="680" author="satyanarayana.g">
		<createView viewName="financemain_aview" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINREFERENCE,
				    T1.INVESTMENTREF,
				    T1.NUMBEROFTERMS,
				    T1.GRCPERIODENDDATE,
				    T1.ALLOWGRCPERIOD,
				    T1.GRACEBASERATE,
				    T1.GRACESPECIALRATE,
				    T1.GRCPFTRATE,
				    T1.GRCPFTFRQ,
				    T1.NEXTGRCPFTDATE,
				    T1.ALLOWGRCPFTRVW,
				    T1.GRCPFTRVWFRQ,
				    T1.NEXTGRCPFTRVWDATE,
				    T1.ALLOWGRCCPZ,
				    T1.GRCCPZFRQ,
				    T1.NEXTGRCCPZDATE,
				    T1.REPAYBASERATE,
				    T1.REPAYSPECIALRATE,
				    T1.REPAYPROFITRATE,
				    T1.REPAYFRQ,
				    T1.NEXTREPAYDATE,
				    T1.REPAYPFTFRQ,
				    T1.NEXTREPAYPFTDATE,
				    T1.ALLOWREPAYRVW,
				    T1.REPAYRVWFRQ,
				    T1.NEXTREPAYRVWDATE,
				    T1.ALLOWREPAYCPZ,
				    T1.REPAYCPZFRQ,
				    T1.NEXTREPAYCPZDATE,
				    T1.MATURITYDATE,
				    T1.CPZATGRACEEND,
				    T1.DOWNPAYMENT,
				    T1.GRACEFLATAMOUNT,
				    T1.REQREPAYAMOUNT,
				    T1.TOTALPROFIT,
				    T1.TOTALCPZ,
				    T1.TOTALGROSSPFT,
				    T1.TOTALGROSSGRCPFT,
				    T1.TOTALGRACEPFT,
				    T1.TOTALGRACECPZ,
				    T1.GRCRATEBASIS,
				    T1.REPAYRATEBASIS,
				    T1.FINTYPE,
				    T1.FINREMARKS,
				    T1.FINCCY,
				    T1.SCHEDULEMETHOD,
				    T1.PROFITDAYSBASIS,
				    T1.REQMATURITY,
				    T1.CALTERMS,
				    T1.CALMATURITY,
				    T1.FIRSTREPAY,
				    T1.LASTREPAY,
				    T1.FINSTARTDATE,
				    T1.FINAMOUNT,
				    T1.FINAMOUNT + T1.FEECHARGEAMT - T1.DOWNPAYMENT AS LOVDESCFINANCINGAMOUNT,
				    T1.FINREPAYMENTAMOUNT,
				    T1.CUSTID,
				    T1.DEFFERMENTS,
				    T1.PLANDEFERCOUNT,
				    T1.FINBRANCH,
				    T1.FINSOURCEID,
				    T1.ALLOWEDDEFRPYCHANGE,
				    T1.AVAILEDDEFRPYCHANGE,
				    T1.ALLOWEDDEFFRQCHANGE,
				    T1.AVAILEDDEFFRQCHANGE,
				    T1.RECALTYPE,
				    T1.FINASSETVALUE,
				    T1.DISBACCOUNTID,
				    T1.REPAYACCOUNTID,
				    T1.FINISACTIVE,
				    T1.LIMITVALID,
				    T1.OVERRIDELIMIT,
				    T1.SECURITYDEPOSIT,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T7.FINTYPEDESC AS LOVDESCFINTYPENAME,
				    T7.FINMAXAMOUNT AS LOVDESCFINMAXAMT,
				    T7.FINMINAMOUNT AS LOVDESCFINMINAMOUNT,
				    T1.MINDOWNPAYPERC,
				    T7.FINISALWDIFFERMENT AS LOVDESCFINALWDEFERMENT,
				    T7.FINISDWPAYREQUIRED AS LOVDESCDWNPAYREQ,
				    T7.FINMAXDIFFERMENT AS LOVDESCFINMAXDIFFERMENT,
				    T12.BRANCHDESC AS LOVDESCFINBRANCHNAME,
				    T12.BRANCHPROVINCE AS FINBRANCHPROVINCECODE,
				    T1.LASTREPAYDATE,
				    T1.LASTREPAYPFTDATE,
				    T1.LASTREPAYRVWDATE,
				    T1.LASTREPAYCPZDATE,
				    T1.ALLOWGRCREPAY,
				    T1.GRCSCHDMTHD,
				    T1.GRCMARGIN,
				    T1.REPAYMARGIN,
				    T1.FINCURRASSETVALUE,
				    T1.FINCOMMITMENTREF,
				    T1.FINLIMITREF,
				    T1.DEPRECIATIONFRQ,
				    T1.FINCONTRACTDATE,
				    T1.NEXTDEPDATE,
				    T1.LASTDEPDATE,
				    T1.FINACCOUNT,
				    T1.FINCUSTPFTACCOUNT,
				    T17.ACRTILLLBD AS LOVDESCACCRUEDTILLLBD,
				    T7.FINRVWRATEAPPLFOR,
				    T1.TOTALREPAYAMT,
				    T1.CLOSINGSTATUS,
				    T1.FINAPPROVEDDATE,
				    T1.FEECHARGEAMT,
				    T1.BLACKLISTED,
				    T1.FINREPAYPFTONFRQ,
				    T1.ANUALIZEDPERCRATE,
				    T1.EFFECTIVERATEOFRETURN,
				    T1.MIGRATEDFINANCE,
				    T1.SCHEDULEMAINTAINED,
				    T1.SCHEDULEREGENERATED,
				    T1.FINPURPOSE,
				    T39.LOANPURPOSEDESC AS LOVDESCFINPURPOSENAME,
				    T1.FINSTATUS,
				    T1.FINSTSREASON,
				    T1.INITIATEUSER,
				    T1.BANKNAME,
				    T1.IBAN,
				    T1.ACCOUNTTYPE,
				    T1.DDAREFERENCENO,
				    T7.FINSCHEDULEON AS LOVDESCFINSCHEDULEON,
				    T1.CUSTDSR,
				    T1.JOINTACCOUNT,
				    T1.JOINTCUSTID,
				    T1.DOWNPAYBANK,
				    T1.DOWNPAYSUPL,
				    T1.DOWNPAYACCOUNT,
				    T1.SECURITYCOLLATERAL,
				    T1.APPROVED,
				    T1.DISCREPANCY,
				    T1.LIMITAPPROVED,
				    T1.GRACETERMS,
				    T7.FINDIVISION AS LOVDESCFINDIVISION,
				    T1.RCDMAINTAINSTS,
				    T1.FINREPAYMETHOD,
				    T1.GRCPROFITDAYSBASIS,
				    T1.STEPFINANCE,
				    T1.STEPTYPE,
				    T1.STEPPOLICY,
				    T1.ALWMANUALSTEPS,
				    T1.NOOFSTEPS,
				    T1.LINKEDFINREF,
				    T1.NEXTUSERID,
				    T1.PRIORITY,
				    T24.POLICYDESC AS LOVDESCSTEPPOLICYNAME,
				    T1.GRCMINRATE,
				    T1.GRCMAXRATE,
				    T1.RPYMINRATE,
				    T1.RPYMAXRATE,
				    T1.DEVIATIONAPPROVAL,
				    T1.MANUALSCHEDULE,
				    T1.TAKEOVERFINANCE,
				    T1.GRCADVBASERATE,
				    T1.GRCADVMARGIN,
				    T1.GRCADVPFTRATE,
				    T1.RPYADVBASERATE,
				    T1.RPYADVMARGIN,
				    T1.RPYADVPFTRATE,
				    T1.SUPPLEMENTRENT,
				    T1.INCREASEDCOST,
				    T1.CREDITINSAMT,
				    T1.ROLLOVERFRQ,
				    T1.NEXTROLLOVERDATE,
				    T27.CUSTSTSDESCRIPTION,
				    T1.SHARIASTATUS,
				    T1.INITIATEDATE,
				    T1.FINPREAPPROVEDREF,
				    T1.MMAID,
				    T1.ACCOUNTSOFFICER,
				    T1.FEEACCOUNTID,
				    T1.FINCANCELAC,
				    T28.DEALERNAME AS LOVDESCACCOUNTSOFFICER,
				    T28.DEALERCITY AS LOVDESCSOURCECITY,
				    T1.DSACODE,
				    T30.ROFFICERDESC AS DSACODEDESC,
				    T1.TDSAPPLICABLE,
				    T1.MANDATEID,
				    T1.DROPLINEFRQ,
				    T1.FIRSTDROPLINEDATE,
				    T1.PFTSERVICINGODLIMIT,
				    T1.INSURANCEAMT,
				    T1.DEDUCTINSDISB,
				    T1.ALWBPI,
				    T1.BPITREATMENT,
				    T1.PLANEMIHALW,
				    T1.PLANEMIHMETHOD,
				    T1.PLANEMIHMAXPERYEAR,
				    T1.PLANEMIHMAX,
				    T1.PLANEMIHLOCKPERIOD,
				    T1.PLANEMICPZ,
				    T1.CALROUNDINGMODE,
				    T1.ALWMULTIDISB,
				    T1.APPLICATIONNO,
				    T1.REFERRALID,
				    T33.ROFFICERDESC AS REFERRALIDDESC,
				    T1.DMACODE,
				    T34.ROFFICERDESC AS DMACODEDESC,
				    T1.SALESDEPARTMENT,
				    T35.DEPTDESC AS SALESDEPARTMENTDESC,
				    T1.QUICKDISB,
				    T1.WIFREFERENCE,
				    T1.UNPLANEMIHLOCKPERIOD,
				    T1.UNPLANEMICPZ,
				    T1.REAGECPZ,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.AVAILEDUNPLANEMI,
				    T1.AVAILEDREAGEH,
				    T1.BPIAMOUNT,
				    T1.DEDUCTFEEDISB,
				    T1.RVWRATEAPPLFOR,
				    T1.SCHCALONRVW,
				    T1.PASTDUEPFTCALMTHD,
				    T1.PASTDUEPFTMARGIN,
				    T1.DROPPINGMETHOD,
				    T1.RATECHGANYDAY,
				    T1.PROMOTIONCODE,
				    T1.RESTRUCTURELOAN,
				    T1.OLDFINREFERENCE,
				    T1.REAGEBUCKET,
				    T1.FINCATEGORY,
				    T1.PRODUCTCATEGORY,
				    T1.ROUNDINGTARGET,
				    T36.ENTITYCODE AS LOVDESCENTITYCODE,
				    T1.ELIGIBILITYMETHOD,
				    T38.FIELDCODEVALUE AS LOVELIGIBILITYMETHOD,
				    T38.VALUEDESC AS LOVDESCELIGIBILITYMETHOD,
				    T1.EMPLOYEENAME,
				    T37.ROFFICERDESC AS EMPLOYEENAMEDESC,
				    T1.SAMPLINGREQUIRED,
				    T1.LEGALREQUIRED,
				    T1.GRCMAXAMOUNT,
				    T1.CONNECTOR,
				    T40.DEALERNAME AS CONNECTORCODE,
				    T40.DEALERCITY AS CONNECTORDESC,
				    T1.ADVANCEEMI,
				    T1.ADVEMITERMS,
				    T1.BPIPFTDAYSBASIS,
				    T1.FIXEDRATETENOR,
				    T1.FIXEDTENORRATE,
				    T12.BRANCHTEL AS FINBRANCHCONTACT,
				    T1.PROCESSATTRIBUTES,
				    T1.BUSINESSVERTICAL,
				    BV.CODE AS BUSINESSVERTICALCODE,
				    BV.DESCRIPTION AS BUSINESSVERTICALDESC,
				    T1.GRCADVTYPE,
				    T1.GRCADVTERMS,
				    T1.ADVTYPE,
				    T1.ADVTERMS,
				    T1.ADVSTAGE,
				    T1.TDSPERCENTAGE,
				    T1.TDSSTARTDATE,
				    T1.TDSENDDATE,
				    T1.TDSLIMITAMT,
				    T1.VANREQ,
				    T1.VANCODE,
				    T1.ALLOWDRAWINGPOWER,
				    T1.ALLOWREVOLVING,
				    T1.SANBSDSCHDLE,
				    T1.PROMOTIONSEQID,
				    T1.SVAMOUNT,
				    T1.CBAMOUNT,
				    T1.APPLIEDLOANAMT,
				    T1.FINISRATERVWATGRCEND,
					T1.ODTDSAPPLICABLE
				   FROM FINANCEMAIN T1
				     JOIN RMTFINANCETYPES T7 ON T1.FINTYPE = T7.FINTYPE
				     LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH = T12.BRANCHCODE
				     LEFT JOIN FINPFTDETAILS T17 ON T17.FINREFERENCE = T1.FINREFERENCE
				     LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY = T24.POLICYCODE
				     LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS = T27.CUSTSTSCODE
				     LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
				     LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE = T30.ROFFICERCODE
				     LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID = T33.ROFFICERCODE
				     LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE = T34.ROFFICERCODE
				     LEFT JOIN BMTDEPARTMENTS T35 ON T1.SALESDEPARTMENT = T35.DEPTCODE
				     LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION = T36.DIVISIONCODE
				     LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME = T37.ROFFICERCODE
				     LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE = 'ELGMETHOD'
				     LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE = T39.LOANPURPOSECODE
				     LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
				     LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
				    ]]> 
		</createView>
	</changeSet>

	<changeSet id="680_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="681_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemain_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="681" author="satyanarayana.g">
		<createView viewName="financemain_tview" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINREFERENCE,
				    T1.INVESTMENTREF,
				    T1.NUMBEROFTERMS,
				    T1.GRCPERIODENDDATE,
				    T1.ALLOWGRCPERIOD,
				    T1.GRACEBASERATE,
				    T1.GRACESPECIALRATE,
				    T1.GRCPFTRATE,
				    T1.GRCPFTFRQ,
				    T1.NEXTGRCPFTDATE,
				    T1.ALLOWGRCPFTRVW,
				    T1.GRCPFTRVWFRQ,
				    T1.NEXTGRCPFTRVWDATE,
				    T1.ALLOWGRCCPZ,
				    T1.GRCCPZFRQ,
				    T1.NEXTGRCCPZDATE,
				    T1.REPAYBASERATE,
				    T1.REPAYSPECIALRATE,
				    T1.REPAYPROFITRATE,
				    T1.REPAYFRQ,
				    T1.NEXTREPAYDATE,
				    T1.REPAYPFTFRQ,
				    T1.NEXTREPAYPFTDATE,
				    T1.ALLOWREPAYRVW,
				    T1.REPAYRVWFRQ,
				    T1.NEXTREPAYRVWDATE,
				    T1.ALLOWREPAYCPZ,
				    T1.REPAYCPZFRQ,
				    T1.NEXTREPAYCPZDATE,
				    T1.MATURITYDATE,
				    T1.CPZATGRACEEND,
				    T1.DOWNPAYMENT,
				    T1.GRACEFLATAMOUNT,
				    T1.REQREPAYAMOUNT,
				    T1.TOTALPROFIT,
				    T1.TOTALCPZ,
				    T1.TOTALGROSSPFT,
				    T1.TOTALGROSSGRCPFT,
				    T1.TOTALGRACEPFT,
				    T1.TOTALGRACECPZ,
				    T1.GRCRATEBASIS,
				    T1.REPAYRATEBASIS,
				    T1.FINTYPE,
				    T1.FINREMARKS,
				    T1.FINCCY,
				    T1.SCHEDULEMETHOD,
				    T1.PROFITDAYSBASIS,
				    T1.REQMATURITY,
				    T1.CALTERMS,
				    T1.CALMATURITY,
				    T1.FIRSTREPAY,
				    T1.LASTREPAY,
				    T1.FINSTARTDATE,
				    T1.FINAMOUNT,
				    T1.FINAMOUNT + T1.FEECHARGEAMT - T1.DOWNPAYMENT  LOVDESCFINANCINGAMOUNT,
				    T1.FINREPAYMENTAMOUNT,
				    T1.CUSTID,
				    T1.DEFFERMENTS,
				    T1.PLANDEFERCOUNT,
				    T1.FINBRANCH,
				    T1.FINSOURCEID,
				    T1.ALLOWEDDEFRPYCHANGE,
				    T1.AVAILEDDEFRPYCHANGE,
				    T1.ALLOWEDDEFFRQCHANGE,
				    T1.AVAILEDDEFFRQCHANGE,
				    T1.RECALTYPE,
				    T1.FINASSETVALUE,
				    T1.DISBACCOUNTID,
				    T1.REPAYACCOUNTID,
				    T1.FINISACTIVE,
				    T1.LIMITVALID,
				    T1.OVERRIDELIMIT,
				    T1.SECURITYDEPOSIT,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T7.FINTYPEDESC  LOVDESCFINTYPENAME,
				    T7.FINMAXAMOUNT  LOVDESCFINMAXAMT,
				    T7.FINMINAMOUNT  LOVDESCFINMINAMOUNT,
				    T1.MINDOWNPAYPERC,
				    T7.FINISALWDIFFERMENT  LOVDESCFINALWDEFERMENT,
				    T7.FINISDWPAYREQUIRED  LOVDESCDWNPAYREQ,
				    T7.FINMAXDIFFERMENT  LOVDESCFINMAXDIFFERMENT,
				    T12.BRANCHDESC  LOVDESCFINBRANCHNAME,
				    T12.BRANCHPROVINCE  FINBRANCHPROVINCECODE,
				    T1.LASTREPAYDATE,
				    T1.LASTREPAYPFTDATE,
				    T1.LASTREPAYRVWDATE,
				    T1.LASTREPAYCPZDATE,
				    T1.ALLOWGRCREPAY,
				    T1.GRCSCHDMTHD,
				    T1.GRCMARGIN,
				    T1.REPAYMARGIN,
				    T1.FINCURRASSETVALUE,
				    T1.FINCOMMITMENTREF,
				    T1.FINLIMITREF,
				    T1.DEPRECIATIONFRQ,
				    T1.FINCONTRACTDATE,
				    T1.NEXTDEPDATE,
				    T1.LASTDEPDATE,
				    T1.FINACCOUNT,
				    T1.FINCUSTPFTACCOUNT,
				    T17.ACRTILLLBD  LOVDESCACCRUEDTILLLBD,
				    T7.FINRVWRATEAPPLFOR,
				    T1.TOTALREPAYAMT,
				    T1.CLOSINGSTATUS,
				    T1.FINAPPROVEDDATE,
				    T1.FEECHARGEAMT,
				    T1.BLACKLISTED,
				    T1.FINREPAYPFTONFRQ,
				    T1.ANUALIZEDPERCRATE,
				    T1.EFFECTIVERATEOFRETURN,
				    T1.MIGRATEDFINANCE,
				    T1.SCHEDULEMAINTAINED,
				    T1.SCHEDULEREGENERATED,
				    T1.FINPURPOSE,
				    T39.LOANPURPOSEDESC  LOVDESCFINPURPOSENAME,
				    T1.FINSTATUS,
				    T1.FINSTSREASON,
				    T1.INITIATEUSER,
				    T1.BANKNAME,
				    T1.IBAN,
				    T1.ACCOUNTTYPE,
				    T1.DDAREFERENCENO,
				    T7.FINSCHEDULEON  LOVDESCFINSCHEDULEON,
				    T1.CUSTDSR,
				    T1.JOINTACCOUNT,
				    T1.JOINTCUSTID,
				    T1.DOWNPAYBANK,
				    T1.DOWNPAYSUPL,
				    T1.DOWNPAYACCOUNT,
				    T1.SECURITYCOLLATERAL,
				    T1.APPROVED,
				    T1.DISCREPANCY,
				    T1.LIMITAPPROVED,
				    T1.GRACETERMS,
				    T7.FINDIVISION  LOVDESCFINDIVISION,
				    T1.RCDMAINTAINSTS,
				    T1.FINREPAYMETHOD,
				    T1.GRCPROFITDAYSBASIS,
				    T1.STEPFINANCE,
				    T1.STEPTYPE,
				    T1.STEPPOLICY,
				    T1.ALWMANUALSTEPS,
				    T1.NOOFSTEPS,
				    T1.LINKEDFINREF,
				    T1.NEXTUSERID,
				    T1.PRIORITY,
				    T24.POLICYDESC  LOVDESCSTEPPOLICYNAME,
				    T1.GRCMINRATE,
				    T1.GRCMAXRATE,
				    T1.RPYMINRATE,
				    T1.RPYMAXRATE,
				    T1.DEVIATIONAPPROVAL,
				    T1.MANUALSCHEDULE,
				    T1.TAKEOVERFINANCE,
				    T1.GRCADVBASERATE,
				    T1.GRCADVMARGIN,
				    T1.GRCADVPFTRATE,
				    T1.RPYADVBASERATE,
				    T1.RPYADVMARGIN,
				    T1.RPYADVPFTRATE,
				    T1.SUPPLEMENTRENT,
				    T1.INCREASEDCOST,
				    T1.CREDITINSAMT,
				    T1.ROLLOVERFRQ,
				    T1.NEXTROLLOVERDATE,
				    T27.CUSTSTSDESCRIPTION,
				    T1.SHARIASTATUS,
				    T1.INITIATEDATE,
				    T1.FINPREAPPROVEDREF,
				    T1.MMAID,
				    T1.ACCOUNTSOFFICER,
				    T1.FEEACCOUNTID,
				    T1.FINCANCELAC,
				    T28.DEALERNAME  LOVDESCACCOUNTSOFFICER,
				    T28.DEALERCITY  LOVDESCSOURCECITY,
				    T1.DSACODE,
				    T30.ROFFICERDESC  DSACODEDESC,
				    T1.TDSAPPLICABLE,
				    T1.MANDATEID,
				    T1.DROPLINEFRQ,
				    T1.FIRSTDROPLINEDATE,
				    T1.PFTSERVICINGODLIMIT,
				    T1.INSURANCEAMT,
				    T1.DEDUCTINSDISB,
				    T1.ALWBPI,
				    T1.BPITREATMENT,
				    T1.PLANEMIHALW,
				    T1.PLANEMIHMETHOD,
				    T1.PLANEMIHMAXPERYEAR,
				    T1.PLANEMIHMAX,
				    T1.PLANEMIHLOCKPERIOD,
				    T1.PLANEMICPZ,
				    T1.CALROUNDINGMODE,
				    T1.ALWMULTIDISB,
				    T1.APPLICATIONNO,
				    T1.REFERRALID,
				    T33.ROFFICERDESC  REFERRALIDDESC,
				    T1.DMACODE,
				    T34.ROFFICERDESC  DMACODEDESC,
				    T1.SALESDEPARTMENT,
				    T35.DEPTDESC  SALESDEPARTMENTDESC,
				    T1.QUICKDISB,
				    T1.WIFREFERENCE,
				    T1.UNPLANEMIHLOCKPERIOD,
				    T1.UNPLANEMICPZ,
				    T1.REAGECPZ,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.AVAILEDUNPLANEMI,
				    T1.AVAILEDREAGEH,
				    T1.BPIAMOUNT,
				    T1.DEDUCTFEEDISB,
				    T1.RVWRATEAPPLFOR,
				    T1.SCHCALONRVW,
				    T1.PASTDUEPFTCALMTHD,
				    T1.PASTDUEPFTMARGIN,
				    T1.DROPPINGMETHOD,
				    T1.RATECHGANYDAY,
				    T1.PROMOTIONCODE,
				    T1.RESTRUCTURELOAN,
				    T1.OLDFINREFERENCE,
				    T1.REAGEBUCKET,
				    T1.FINCATEGORY,
				    T1.PRODUCTCATEGORY,
				    T1.ROUNDINGTARGET,
				    T36.ENTITYCODE  LOVDESCENTITYCODE,
				    T1.ELIGIBILITYMETHOD,
				    T38.FIELDCODEVALUE  LOVELIGIBILITYMETHOD,
				    T38.VALUEDESC  LOVDESCELIGIBILITYMETHOD,
				    T1.EMPLOYEENAME,
				    T37.ROFFICERDESC  EMPLOYEENAMEDESC,
				    T1.SAMPLINGREQUIRED,
				    T1.LEGALREQUIRED,
				    T1.GRCMAXAMOUNT,
				    T1.CONNECTOR,
				    T40.DEALERNAME  CONNECTORCODE,
				    T40.DEALERCITY  CONNECTORDESC,
				    T1.ADVANCEEMI,
				    T1.ADVEMITERMS,
				    T1.BPIPFTDAYSBASIS,
				    T1.FIXEDRATETENOR,
				    T1.FIXEDTENORRATE,
				    T12.BRANCHTEL  FINBRANCHCONTACT,
				    T1.PROCESSATTRIBUTES,
				    T1.BUSINESSVERTICAL,
				    BV.CODE  BUSINESSVERTICALCODE,
				    BV.DESCRIPTION  BUSINESSVERTICALDESC,
				    T1.GRCADVTYPE,
				    T1.GRCADVTERMS,
				    T1.ADVTYPE,
				    T1.ADVTERMS,
				    T1.ADVSTAGE,
				    T1.TDSPERCENTAGE,
				    T1.TDSSTARTDATE,
				    T1.TDSENDDATE,
				    T1.TDSLIMITAMT,
				    T1.VANREQ,
				    T1.VANCODE,
				    T1.ALLOWDRAWINGPOWER,
				    T1.ALLOWREVOLVING,
				    T1.SANBSDSCHDLE,
				    T1.PROMOTIONSEQID,
				    T1.SVAMOUNT,
				    T1.CBAMOUNT,
				    T1.APPLIEDLOANAMT,
				    T1.FINISRATERVWATGRCEND,
					T1.ODTDSAPPLICABLE
				   FROM FINANCEMAIN_TEMP T1
				     JOIN RMTFINANCETYPES T7 ON T1.FINTYPE = T7.FINTYPE
				     LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH = T12.BRANCHCODE
				     LEFT JOIN FINPFTDETAILS T17 ON T17.FINREFERENCE = T1.FINREFERENCE
				     LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY = T24.POLICYCODE
				     LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS = T27.CUSTSTSCODE
				     LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
				     LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE = T30.ROFFICERCODE
				     LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID = T33.ROFFICERCODE
				     LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE = T34.ROFFICERCODE
				     LEFT JOIN BMTDEPARTMENTS T35 ON T1.SALESDEPARTMENT = T35.DEPTCODE
				     LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION = T36.DIVISIONCODE
				     LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME = T37.ROFFICERCODE
				     LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE = 'ELGMETHOD'
				     LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE = T39.LOANPURPOSECODE
				     LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
				     LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
				     ]]>
		</createView>
	</changeSet>

	<changeSet id="681_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="682_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rejectfinancemain_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="682" author="satyanarayana.g">
		<createView viewName="rejectfinancemain_view" replaceIfExists="true">
			<![CDATA[
				SELECT F.FINREFERENCE,
				    T.FINCATEGORY AS LOVDESCPRODUCTCODENAME,
				    F.FINTYPE,
				    F.FINBRANCH,
				    F.FINSTARTDATE,
				    F.MATURITYDATE,
				    F.NUMBEROFTERMS,
				    F.FINCCY,
				    F.FINAMOUNT,
				    F.FINAMOUNT - F.DOWNPAYMENT + F.FEECHARGEAMT + F.INSURANCEAMT AS FINANCINGAMOUNT,
				    F.FEECHARGEAMT,
				    F.INSURANCEAMT,
				    F.FINAMOUNT - F.DOWNPAYMENT + F.FEECHARGEAMT + F.INSURANCEAMT - F.FINREPAYMENTAMOUNT AS CURFINAMOUNT,
				    F.DOWNPAYMENT,
				    F.FINCURRASSETVALUE,
				    F.FINASSETVALUE,
				    F.ALLOWDRAWINGPOWER,
				    F.PROMOTIONSEQID,
				    F.SANBSDSCHDLE,
				    C.CUSTCIF AS LOVDESCCUSTCIF,
				    F.SVAMOUNT,
				    F.CBAMOUNT,
				    F.FINISRATERVWATGRCEND,
					F.ODTDSAPPLICABLE
				   FROM REJECTFINANCEMAIN F
				     LEFT JOIN CUSTOMERS C ON F.CUSTID = C.CUSTID
				     LEFT JOIN RMTFINANCETYPES T ON F.FINTYPE = T.FINTYPE
				     ]]>
		</createView>
	</changeSet>

	<changeSet id="682_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rejectfinancemain_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="683_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'wiffinancemain_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="683" author="satyanarayana.g">
		<createView viewName="WIFFINANCEMAIN_VIEW" replaceIfExists="true">
			<![CDATA[
			SELECT T1.FINREFERENCE,
					T1.NUMBEROFTERMS,
					T1.GRCPERIODENDDATE,
					T1.ALLOWGRCPERIOD,
					T1.GRACEBASERATE,
					T1.GRACESPECIALRATE,
					T1.GRCPFTRATE,
					T1.GRCPFTFRQ,
					T1.NEXTGRCPFTDATE,
					T1.ALLOWGRCPFTRVW,
					T1.GRCPFTRVWFRQ,
					T1.NEXTGRCPFTRVWDATE,
					T1.ALLOWGRCCPZ,
					T1.GRCCPZFRQ,
					T1.NEXTGRCCPZDATE,
					T1.REPAYBASERATE,
					T1.REPAYSPECIALRATE,
					T1.REPAYPROFITRATE,
					T1.REPAYFRQ,
					T1.NEXTREPAYDATE,
					T1.REPAYPFTFRQ,
					T1.NEXTREPAYPFTDATE,
					T1.ALLOWREPAYRVW,
					T1.REPAYRVWFRQ,
					T1.NEXTREPAYRVWDATE,
					T1.ALLOWREPAYCPZ,
					T1.REPAYCPZFRQ,
					T1.NEXTREPAYCPZDATE,
					T1.MATURITYDATE,
					T1.CPZATGRACEEND,
					T1.DOWNPAYMENT,
					T1.GRACEFLATAMOUNT,
					T1.REQREPAYAMOUNT,
					T1.TOTALPROFIT,
					T1.TOTALCPZ,
					T1.TOTALGROSSPFT,
					T1.TOTALGRACEPFT,
					T1.TOTALGRACECPZ,
					T1.GRCRATEBASIS,
					T1.REPAYRATEBASIS,
					T1.FINTYPE,
					T1.FINREMARKS,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.REQMATURITY,
					T1.CALTERMS,
					T1.CALMATURITY,
					T1.FIRSTREPAY,
					T1.LASTREPAY,
					T1.FINSTARTDATE,
					T1.FINAMOUNT,
					T1.FINREPAYMENTAMOUNT,
					T1.CUSTID,
					T1.DEFFERMENTS,
					T1.PLANDEFERCOUNT,
					T1.FINISACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T15.CUSTCIF  LOVDESCCUSTCIF,
					T7.FINTYPEDESC  LOVDESCFINTYPENAME,
					T1.FINBRANCH,
					T1.FINSOURCEID,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.ALLOWEDDEFFRQCHANGE,
					T1.AVAILEDDEFFRQCHANGE,
					T7.FINMAXAMOUNT  LOVDESCFINMAXAMT,
					T7.FINMINAMOUNT  LOVDESCFINMINAMOUNT,
					T7.FINISALWDIFFERMENT  LOVDESCFINALWDEFERMENT,
					T1.MINDOWNPAYPERC,
					T7.FINISDWPAYREQUIRED  LOVDESCDWNPAYREQ,
					T1.RECALTYPE,
					T1.FINASSETVALUE,
					T7.FINMAXDIFFERMENT  LOVDESCFINMAXDIFFERMENT,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.LASTREPAYRVWDATE,
					T1.LASTREPAYCPZDATE,
					T1.DISBACCOUNTID,
					T1.REPAYACCOUNTID,
					T1.ALLOWGRCREPAY,
					T1.GRCSCHDMTHD,
					T1.REPAYMARGIN,
					T1.GRCMARGIN,
					T1.DEPRECIATIONFRQ,
					T1.FINCOMMITMENTREF,
					T1.FINCURRASSETVALUE,
					T1.FINCONTRACTDATE,
					T1.NEXTDEPDATE,
					T1.LASTDEPDATE,
					T1.FINACCOUNT,
					T1.FINCUSTPFTACCOUNT,
					T7.FINRVWRATEAPPLFOR,
					T1.TOTALREPAYAMT,
					T1.CLOSINGSTATUS,
					T1.FINAPPROVEDDATE,
					T1.FINREPAYPFTONFRQ,
					T1.ANUALIZEDPERCRATE,
					T1.EFFECTIVERATEOFRETURN,
					T1.DOWNPAYBANK,
					T1.DOWNPAYSUPL,
					T7.FINDIVISION  LOVDESCFINDIVISIONNAME,
					T1.GRACETERMS,
					T14.FACILITYTYPE,
					T15.CUSTSHRTNAME  LOVDESCCUSTSHRTNAME,
					T16.BRANCHDESC  LOVDESCFINBRANCHNAME,
					T1.TOTALGROSSGRCPFT,
					T1.GRCPROFITDAYSBASIS,
					T1.STEPFINANCE,
					T1.STEPTYPE,
					T1.STEPPOLICY,
					T1.ALWMANUALSTEPS,
					T1.NOOFSTEPS,
					T1.LINKEDFINREF,
					T7.PRODUCT  LOVDESCFINPRODUCT,
					T1.GRCMINRATE,
					T1.GRCMAXRATE,
					T1.RPYMINRATE,
					T1.RPYMAXRATE,
					T1.MANUALSCHEDULE,
					T1.TAKEOVERFINANCE,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.SUPPLEMENTRENT,
					T1.INCREASEDCOST,
					T1.FEEACCOUNTID,
					T1.TDSAPPLICABLE,
					T1.INSURANCEAMT,
					T1.DEDUCTINSDISB,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.CALROUNDINGMODE,
					T1.ALWMULTIDISB,
					T1.BPIAMOUNT,
					T1.DEDUCTFEEDISB,
					T1.FEECHARGEAMT,
					T1.RVWRATEAPPLFOR,
					T1.SCHCALONRVW,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.FINCATEGORY,
					T1.PRODUCTCATEGORY,
					T1.ROUNDINGTARGET,
					T1.GRCMAXAMOUNT,
					T1.ADVANCEEMI,
					T1.ADVEMITERMS,
					T1.BPIPFTDAYSBASIS,
					T1.FIXEDTENORRATE,
					T1.FIXEDRATETENOR,
					T1.GRCADVTYPE,
					T1.GRCADVTERMS,
					T1.ADVTYPE,
					T1.ADVTERMS,
					T1.ADVSTAGE,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING,
					T1.APPLIEDLOANAMT,
					T1.FINISRATERVWATGRCEND,
					T1.CBAMOUNT,
					T1.SVAMOUNT,
					T1.SANBSDSCHDLE,
					T1.PROMOTIONSEQID,
					T1.ODTDSAPPLICABLE
					FROM WIFFINANCEMAIN_TEMP T1
					LEFT JOIN WIFINDICATIVETERMDETAIL_TEMP T14 ON T14.FINREFERENCE = T1.FINREFERENCE
					LEFT JOIN CUSTOMERS T15 ON T15.CUSTID = T1.CUSTID
					JOIN RMTFINANCETYPES T7 ON T1.FINTYPE = T7.FINTYPE
					LEFT JOIN RMTBRANCHES T16 ON T1.FINBRANCH = T16.BRANCHCODE
					UNION ALL
					SELECT T1.FINREFERENCE,
					T1.NUMBEROFTERMS,
					T1.GRCPERIODENDDATE,
					T1.ALLOWGRCPERIOD,
					T1.GRACEBASERATE,
					T1.GRACESPECIALRATE,
					T1.GRCPFTRATE,
					T1.GRCPFTFRQ,
					T1.NEXTGRCPFTDATE,
					T1.ALLOWGRCPFTRVW,
					T1.GRCPFTRVWFRQ,
					T1.NEXTGRCPFTRVWDATE,
					T1.ALLOWGRCCPZ,
					T1.GRCCPZFRQ,
					T1.NEXTGRCCPZDATE,
					T1.REPAYBASERATE,
					T1.REPAYSPECIALRATE,
					T1.REPAYPROFITRATE,
					T1.REPAYFRQ,
					T1.NEXTREPAYDATE,
					T1.REPAYPFTFRQ,
					T1.NEXTREPAYPFTDATE,
					T1.ALLOWREPAYRVW,
					T1.REPAYRVWFRQ,
					T1.NEXTREPAYRVWDATE,
					T1.ALLOWREPAYCPZ,
					T1.REPAYCPZFRQ,
					T1.NEXTREPAYCPZDATE,
					T1.MATURITYDATE,
					T1.CPZATGRACEEND,
					T1.DOWNPAYMENT,
					T1.GRACEFLATAMOUNT,
					T1.REQREPAYAMOUNT,
					T1.TOTALPROFIT,
					T1.TOTALCPZ,
					T1.TOTALGROSSPFT,
					T1.TOTALGRACEPFT,
					T1.TOTALGRACECPZ,
					T1.GRCRATEBASIS,
					T1.REPAYRATEBASIS,
					T1.FINTYPE,
					T1.FINREMARKS,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.REQMATURITY,
					T1.CALTERMS,
					T1.CALMATURITY,
					T1.FIRSTREPAY,
					T1.LASTREPAY,
					T1.FINSTARTDATE,
					T1.FINAMOUNT,
					T1.FINREPAYMENTAMOUNT,
					T1.CUSTID,
					T1.DEFFERMENTS,
					T1.PLANDEFERCOUNT,
					T1.FINISACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T15.CUSTCIF  LOVDESCCUSTCIF,
					T7.FINTYPEDESC  LOVDESCFINTYPENAME,
					T1.FINBRANCH,
					T1.FINSOURCEID,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.ALLOWEDDEFFRQCHANGE,
					T1.AVAILEDDEFFRQCHANGE,
					T7.FINMAXAMOUNT  LOVDESCFINMAXAMT,
					T7.FINMINAMOUNT  LOVDESCFINMINAMOUNT,
					T7.FINISALWDIFFERMENT  LOVDESCFINALWDEFERMENT,
					T1.MINDOWNPAYPERC,
					T7.FINISDWPAYREQUIRED  LOVDESCDWNPAYREQ,
					T1.RECALTYPE,
					T1.FINASSETVALUE,
					T7.FINMAXDIFFERMENT  LOVDESCFINMAXDIFFERMENT,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.LASTREPAYRVWDATE,
					T1.LASTREPAYCPZDATE,
					T1.DISBACCOUNTID,
					T1.REPAYACCOUNTID,
					T1.ALLOWGRCREPAY,
					T1.GRCSCHDMTHD,
					T1.REPAYMARGIN,
					T1.GRCMARGIN,
					T1.DEPRECIATIONFRQ,
					T1.FINCOMMITMENTREF,
					T1.FINCURRASSETVALUE,
					T1.FINCONTRACTDATE,
					T1.NEXTDEPDATE,
					T1.LASTDEPDATE,
					T1.FINACCOUNT,
					T1.FINCUSTPFTACCOUNT,
					T7.FINRVWRATEAPPLFOR,
					T1.TOTALREPAYAMT,
					T1.CLOSINGSTATUS,
					T1.FINAPPROVEDDATE,
					T1.FINREPAYPFTONFRQ,
					T1.ANUALIZEDPERCRATE,
					T1.EFFECTIVERATEOFRETURN,
					T1.DOWNPAYBANK,
					T1.DOWNPAYSUPL,
					T7.FINDIVISION  LOVDESCFINDIVISIONNAME,
					T1.GRACETERMS,
					T14.FACILITYTYPE,
					T15.CUSTSHRTNAME  LOVDESCCUSTSHRTNAME,
					T16.BRANCHDESC  LOVDESCFINBRANCHNAME,
					T1.TOTALGROSSGRCPFT,
					T1.GRCPROFITDAYSBASIS,
					T1.STEPFINANCE,
					T1.STEPTYPE,
					T1.STEPPOLICY,
					T1.ALWMANUALSTEPS,
					T1.NOOFSTEPS,
					T1.LINKEDFINREF,
					T7.PRODUCT  LOVDESCFINPRODUCT,
					T1.GRCMINRATE,
					T1.GRCMAXRATE,
					T1.RPYMINRATE,
					T1.RPYMAXRATE,
					T1.MANUALSCHEDULE,
					T1.TAKEOVERFINANCE,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.SUPPLEMENTRENT,
					T1.INCREASEDCOST,
					T1.FEEACCOUNTID,
					T1.TDSAPPLICABLE,
					T1.INSURANCEAMT,
					T1.DEDUCTINSDISB,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.CALROUNDINGMODE,
					T1.ALWMULTIDISB,
					T1.BPIAMOUNT,
					T1.DEDUCTFEEDISB,
					T1.FEECHARGEAMT,
					T1.RVWRATEAPPLFOR,
					T1.SCHCALONRVW,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.FINCATEGORY,
					T1.PRODUCTCATEGORY,
					T1.ROUNDINGTARGET,
					T1.GRCMAXAMOUNT,
					T1.ADVANCEEMI,
					T1.ADVEMITERMS,
					T1.BPIPFTDAYSBASIS,
					T1.FIXEDTENORRATE,
					T1.FIXEDRATETENOR,
					T1.GRCADVTYPE,
					T1.GRCADVTERMS,
					T1.ADVTYPE,
					T1.ADVTERMS,
					T1.ADVSTAGE,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING,
					T1.APPLIEDLOANAMT,
					T1.FINISRATERVWATGRCEND,
					T1.CBAMOUNT,
					T1.SVAMOUNT,
					T1.SANBSDSCHDLE,
					T1.PROMOTIONSEQID,
					T1.ODTDSAPPLICABLE
					FROM WIFFINANCEMAIN T1
					LEFT JOIN WIFINDICATIVETERMDETAIL_TEMP T14 ON T14.FINREFERENCE = T1.FINREFERENCE
					LEFT JOIN CUSTOMERS T15 ON T15.CUSTID = T1.CUSTID
					JOIN RMTFINANCETYPES T7 ON T1.FINTYPE = T7.FINTYPE
					LEFT JOIN RMTBRANCHES T16 ON T1.FINBRANCH = T16.BRANCHCODE
					WHERE NOT (EXISTS ( SELECT 1
					FROM WIFFINANCEMAIN_TEMP
					WHERE WIFFINANCEMAIN_TEMP.FINREFERENCE = T1.FINREFERENCE))
					]]>
		</createView>
	</changeSet>

	<changeSet id="683_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_restore_dependencies ('plf', 'wiffinancemain_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="684_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'wiffinancemain_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="684" author="satyanarayana.g">
		<createView viewName="WIFFINANCEMAIN_AVIEW" replaceIfExists="true">
			<![CDATA[
			SELECT T1.FINREFERENCE,
					T1.NUMBEROFTERMS,
					T1.GRCPERIODENDDATE,
					T1.ALLOWGRCPERIOD,
					T1.GRACEBASERATE,
					T1.GRACESPECIALRATE,
					T1.GRCPFTRATE,
					T1.GRCPFTFRQ,
					T1.NEXTGRCPFTDATE,
					T1.ALLOWGRCPFTRVW,
					T1.GRCPFTRVWFRQ,
					T1.NEXTGRCPFTRVWDATE,
					T1.ALLOWGRCCPZ,
					T1.GRCCPZFRQ,
					T1.NEXTGRCCPZDATE,
					T1.REPAYBASERATE,
					T1.REPAYSPECIALRATE,
					T1.REPAYPROFITRATE,
					T1.REPAYFRQ,
					T1.NEXTREPAYDATE,
					T1.REPAYPFTFRQ,
					T1.NEXTREPAYPFTDATE,
					T1.ALLOWREPAYRVW,
					T1.REPAYRVWFRQ,
					T1.NEXTREPAYRVWDATE,
					T1.ALLOWREPAYCPZ,
					T1.REPAYCPZFRQ,
					T1.NEXTREPAYCPZDATE,
					T1.MATURITYDATE,
					T1.CPZATGRACEEND,
					T1.DOWNPAYMENT,
					T1.GRACEFLATAMOUNT,
					T1.REQREPAYAMOUNT,
					T1.TOTALPROFIT,
					T1.TOTALCPZ,
					T1.TOTALGROSSPFT,
					T1.TOTALGRACEPFT,
					T1.TOTALGRACECPZ,
					T1.GRCRATEBASIS,
					T1.REPAYRATEBASIS,
					T1.FINTYPE,
					T1.FINREMARKS,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.REQMATURITY,
					T1.CALTERMS,
					T1.CALMATURITY,
					T1.FIRSTREPAY,
					T1.LASTREPAY,
					T1.FINSTARTDATE,
					T1.FINAMOUNT,
					T1.FINREPAYMENTAMOUNT,
					T1.CUSTID,
					T1.DEFFERMENTS,
					T1.PLANDEFERCOUNT,
					T1.FINISACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T15.CUSTCIF  LOVDESCCUSTCIF,
					T7.FINTYPEDESC  LOVDESCFINTYPENAME,
					T1.FINBRANCH,
					T1.FINSOURCEID,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.ALLOWEDDEFFRQCHANGE,
					T1.AVAILEDDEFFRQCHANGE,
					T7.FINMAXAMOUNT  LOVDESCFINMAXAMT,
					T7.FINMINAMOUNT  LOVDESCFINMINAMOUNT,
					T7.FINISALWDIFFERMENT  LOVDESCFINALWDEFERMENT,
					T1.MINDOWNPAYPERC,
					T7.FINISDWPAYREQUIRED  LOVDESCDWNPAYREQ,
					T1.RECALTYPE,
					T1.FINASSETVALUE,
					T7.FINMAXDIFFERMENT  LOVDESCFINMAXDIFFERMENT,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.LASTREPAYRVWDATE,
					T1.LASTREPAYCPZDATE,
					T1.DISBACCOUNTID,
					T1.REPAYACCOUNTID,
					T1.ALLOWGRCREPAY,
					T1.GRCSCHDMTHD,
					T1.REPAYMARGIN,
					T1.GRCMARGIN,
					T1.DEPRECIATIONFRQ,
					T1.FINCOMMITMENTREF,
					T1.FINCURRASSETVALUE,
					T1.FINCONTRACTDATE,
					T1.NEXTDEPDATE,
					T1.LASTDEPDATE,
					T1.FINACCOUNT,
					T1.FINCUSTPFTACCOUNT,
					T7.FINRVWRATEAPPLFOR,
					T1.TOTALREPAYAMT,
					T1.CLOSINGSTATUS,
					T1.FINAPPROVEDDATE,
					T1.FINREPAYPFTONFRQ,
					T1.ANUALIZEDPERCRATE,
					T1.EFFECTIVERATEOFRETURN,
					T1.DOWNPAYBANK,
					T1.DOWNPAYSUPL,
					T7.FINDIVISION  LOVDESCFINDIVISIONNAME,
					T1.GRACETERMS,
					T14.FACILITYTYPE,
					T15.CUSTSHRTNAME  LOVDESCCUSTSHRTNAME,
					T16.BRANCHDESC  LOVDESCFINBRANCHNAME,
					T1.TOTALGROSSGRCPFT,
					T1.GRCPROFITDAYSBASIS,
					T1.STEPFINANCE,
					T1.STEPTYPE,
					T1.STEPPOLICY,
					T1.ALWMANUALSTEPS,
					T1.NOOFSTEPS,
					T1.LINKEDFINREF,
					T7.PRODUCT  LOVDESCFINPRODUCT,
					T1.GRCMINRATE,
					T1.GRCMAXRATE,
					T1.RPYMINRATE,
					T1.RPYMAXRATE,
					T1.MANUALSCHEDULE,
					T1.TAKEOVERFINANCE,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.SUPPLEMENTRENT,
					T1.INCREASEDCOST,
					T1.FEEACCOUNTID,
					T1.TDSAPPLICABLE,
					T1.INSURANCEAMT,
					T1.DEDUCTINSDISB,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.CALROUNDINGMODE,
					T1.ALWMULTIDISB,
					T1.BPIAMOUNT,
					T1.DEDUCTFEEDISB,
					T1.FEECHARGEAMT,
					T1.RVWRATEAPPLFOR,
					T1.SCHCALONRVW,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.ROUNDINGTARGET,
					T1.GRCMAXAMOUNT,
					T1.ADVANCEEMI,
					T1.ADVEMITERMS,
					T1.BPIPFTDAYSBASIS  BPIRATEBASIS,
					T1.GRCADVTYPE,
					T1.GRCADVTERMS,
					T1.ADVTYPE,
					T1.ADVTERMS,
					T1.ADVSTAGE,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING,
					T1.APPLIEDLOANAMT,
					T1.FINISRATERVWATGRCEND,
					T1.CBAMOUNT,
					T1.SVAMOUNT,
					T1.SANBSDSCHDLE,
					T1.PROMOTIONSEQID,
					T1.ODTDSAPPLICABLE
					FROM WIFFINANCEMAIN T1
					LEFT JOIN WIFINDICATIVETERMDETAIL_TEMP T14 ON T14.FINREFERENCE = T1.FINREFERENCE
					LEFT JOIN CUSTOMERS T15 ON T15.CUSTID = T1.CUSTID
					JOIN RMTFINANCETYPES T7 ON T1.FINTYPE = T7.FINTYPE
					LEFT JOIN RMTBRANCHES T16 ON T1.FINBRANCH = T16.BRANCHCODE
					]]>
		</createView>
	</changeSet>

	<changeSet id="684_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'wiffinancemain_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="685" author="DurgaPrasad.G">
		<sql>
			<![CDATA[
				DELETE FROM SMTPARAMETERS WHERE SYSPARMCODE='ALLOW_OD_TAX_DED_REQ';
				INSERT INTO SMTPARAMETERS VALUES ('ALLOW_OD_TAX_DED_REQ', 'Allow over due details TDS rfeq Or Not.', 'String', 1, 'N', 1, 0, NULL, NULL,'Allow over due details TDS rfeq Or Not.', 1, 1000, CURRENT_TIMESTAMP,'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="686_pre" author="ayyappa.ch" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'int_disbursement_request_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="686" author="ayyappa.ch" dbms="postgresql,oracle">
		<createView viewName="INT_DISBURSEMENT_REQUEST_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FA.PAYMENTID,
				FA.FINREFERENCE,
				'D' CHANNEL,
				0 PROVIDERID,
				CASE
				WHEN FA.PAYMENTTYPE = 'NEFT'
				THEN 'N'
				WHEN FA.PAYMENTTYPE = 'RTGS'
				THEN 'R'
				WHEN
				FA.PAYMENTTYPE = 'DD'
				THEN 'D'
				WHEN FA.PAYMENTTYPE = 'CHEQUE'
				THEN 'C'
				ELSE FA.PAYMENTTYPE
				END DISBURSEMENT_TYPE,
				FA.AMTTOBERELEASED,
				FA.DISBDATE,
				FA.LLDATE,
				FA.PAYABLELOC,
				FA.PRINTINGLOC,
				CU.CUSTCIF,
				CU.CUSTSHRTNAME,
				'' CUSTOMER_MOBILE,
				CE.CUSTEMAIL CUSTOMER_EMAIL,
				CS.CPPROVINCENAME CUSTOMER_STATE,
				CC.PCCITYNAME CUSTOMER_CITY,
				'' CUSTOMER_ADDRESS1,
				'' CUSTOMER_ADDRESS2,
				'' CUSTOMER_ADDRESS3,
				'' CUSTOMER_ADDRESS4,
				'' CUSTOMER_ADDRESS5,
				BD.BANKNAME,
				BB.BRANCHCODE,
				BB.BRANCHDESC,
				PBD.CPPROVINCENAME BENFICIARY_BRANCH_STATE,
				PBD.PCCITYNAME BENFICIARY_BRANCH_CITY,
				BB.MICR MICR_CODE,
				BB.IFSC IFSC_CODE,
				FA.BENEFICIARYACCNO,
				CASE
				WHEN FA.PAYMENTTYPE = 'CHEQUE'
				OR FA.PAYMENTTYPE = 'DD'
				THEN
				FA.LIABILITYHOLDNAME
				ELSE FA.BENEFICIARYNAME
				END BENEFICIARYNAME,
				(FA.PHONECOUNTRYCODE || FA.PHONEAREACODE) || FA.PHONENUMBER BENEFICIARY_MOBILE,
				BCE.CUSTEMAIL BENFICIRY_EMAIL,
				BRS.CPPROVINCENAME BENFICIARY_STATE,
				BRC.PCCITYNAME BENFICIARY_CITY,
				BRCA.CustAddrHNbr ||','|| BRCA.CustAddrStreet ||','|| BRC.PCCITYNAME ||','|| BRS.CPPROVINCENAME  BENFICIARY_ADDRESS1,
				'' BENFICIARY_ADDRESS2,
				'' BENFICIARY_ADDRESS3,
				'' BENFICIARY_ADDRESS4,
				'' BENFICIARY_ADDRESS5,
				'' PAYMENT_DETAIL1,
				'' PAYMENT_DETAIL2,
				'' PAYMENT_DETAIL3,
				'' PAYMENT_DETAIL4,
				'' PAYMENT_DETAIL5,
				'' PAYMENT_DETAIL6,
				'' PAYMENT_DETAIL7,
				FA.STATUS,
				FA.DESCRIPTION REMARKS,
				FA.PAYMENTTYPE,
				FM.FINTYPE,
				PB.PARTNERBANKID
				PARTNERBANK_ID,
				PB.PARTNERBANKCODE PARTNERBANK_CODE,
				FA.INPUTDATE,
				PB.ALWFILEDOWNLOAD,
				PB.FILENAME,
				FM.FINISACTIVE,
				SMD.ENTITYCODE,
				PB.ACCOUNTNO PARTNERBANK_ACCOUNT
				FROM FINADVANCEPAYMENTS FA
				JOIN
				(SELECT FINANCEMAIN_TEMP.CUSTID,
				FINANCEMAIN_TEMP.FINREFERENCE,
				FINANCEMAIN_TEMP.FINTYPE,
				FINANCEMAIN_TEMP.FINISACTIVE
				FROM FINANCEMAIN_TEMP
				UNION ALL
				SELECT T2.CUSTID,
				T2.FINREFERENCE,
				T2.FINTYPE,
				T2.FINISACTIVE
				FROM FINANCEMAIN T2
				WHERE NOT (EXISTS
				( SELECT 1 FROM
				FINANCEMAIN_TEMP T3 WHERE T3.FINREFERENCE = T2.FINREFERENCE))) FM
				ON FM.FINREFERENCE = FA.FINREFERENCE
				JOIN CUSTOMERS CU ON CU.CUSTID = FM.CUSTID	
				JOIN RMTCURRENCIES CCY ON CCY.CCYCODE	= FA.DISBCCY
				JOIN PARTNERBANKS PB ON PB.PARTNERBANKID = FA.PARTNERBANKID
				LEFT JOIN CUSTOMEREMAILS CE	ON CE.CUSTID = CU.CUSTID AND CE.CUSTEMAILPRIORITY = 5
				LEFT JOIN CUSTOMERADDRESSES CA ON CA.CUSTID = CE.CUSTID	AND CA.CUSTADDRPRIORITY = 5
				LEFT JOIN RMTPROVINCEVSCITY CC ON CC.PCCITY = CA.CUSTADDRCITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE CS ON CS.CPPROVINCE = CC.PCPROVINCE
				LEFT JOIN BANKBRANCHES BB ON BB.BANKBRANCHID = FA.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL BD ON BD.BANKCODE =	BB.BANKCODE
				LEFT JOIN ( SELECT PB_1.PARTNERBANKID,	
				PBD_1.BANKNAME,
				PBB.BRANCHDESC,
				PBBRC.PCCITYNAME,
				PBBRS.CPPROVINCENAME FROM PARTNERBANKS PB_1
				JOIN BANKBRANCHES PBB ON PBB.BRANCHCODE = PB_1.BANKBRANCHCODE
				JOIN BMTBANKDETAIL PBD_1 ON PBD_1.BANKCODE = PBB.BANKCODE
				LEFT JOIN RMTPROVINCEVSCITY PBBRC ON PBBRC.PCCITY = PBB.CITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE PBBRS ON PBBRS.CPPROVINCE = PBBRC.PCPROVINCE
				) PBD ON PBD.PARTNERBANKID = PB.PARTNERBANKID
				LEFT JOIN BENEFICIARY BR ON BR.BANKBRANCHID = FA.BANKBRANCHID AND
				BR.ACCNUMBER = FA.BENEFICIARYACCNO AND BR.CUSTID = FM.CUSTID
				LEFT JOIN CUSTOMERS BC ON BC.CUSTID = BR.CUSTID
				LEFT JOIN CUSTOMEREMAILS BCE ON BCE.CUSTID = CU.CUSTID
				AND BCE.CUSTEMAILPRIORITY = 5
				LEFT JOIN CUSTOMERADDRESSES	BRCA ON	BRCA.CUSTID = BR.CUSTID
				AND BRCA.CUSTADDRPRIORITY = 5
				LEFT JOIN RMTPROVINCEVSCITY BRC	ON BRC.PCCITY =	BRCA.CUSTADDRCITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE BRS ON BRS.CPPROVINCE = BRC.PCPROVINCE
				LEFT JOIN RMTFINANCETYPES RFT ON FM.FINTYPE = RFT.FINTYPE
				LEFT JOIN SMTDIVISIONDETAIL SMD	ON RFT.FINDIVISION = SMD.DIVISIONCODE
				WHERE FA.STATUS = 'APPROVED' AND NOT (FA.PAYMENTID IN ( 
				SELECT DISBURSEMENT_REQUESTS.DISBURSEMENT_ID FROM DISBURSEMENT_REQUESTS))
				AND NOT	(FA.PAYMENTID IN ( SELECT FINADVANCEPAYMENTS_TEMP.PAYMENTID FROM FINADVANCEPAYMENTS_TEMP))
				UNION ALL
				SELECT
				PI.PAYMENTINSTRUCTIONID PAYMENTID,
				PH.FINREFERENCE,
				PH.PAYMENTTYPE CHANNEL,
				0 PROVIDERID,
				CASE
				WHEN PI.PAYMENTTYPE =
				'NEFT'
				THEN 'N'
				WHEN PI.PAYMENTTYPE = 'RTGS'
				THEN 'R'
				WHEN PI.PAYMENTTYPE = 'DD'
				THEN 'D'
				WHEN PI.PAYMENTTYPE = 'CHEQUE'
				THEN 'C'
				ELSE PI.PAYMENTTYPE
				END DISBURSEMENT_TYPE,
				PI.PAYMENTAMOUNT  AMTTOBERELEASED,
				PI.POSTDATE
				DISBDATE,
				PI.POSTDATE LLDATE,
				PI.PAYABLELOC,
				PI.PRINTINGLOC,
				CU.CUSTCIF,
				CU.CUSTSHRTNAME,
				'' CUSTOMER_MOBILE,
				CE.CUSTEMAIL
				CUSTOMER_EMAIL,
				CS.CPPROVINCENAME CUSTOMER_STATE,
				CC.PCCITYNAME CUSTOMER_CITY,
				'' CUSTOMER_ADDRESS1,
				'' CUSTOMER_ADDRESS2,
				'' CUSTOMER_ADDRESS3,
				'' CUSTOMER_ADDRESS4,
				'' CUSTOMER_ADDRESS5,
				BD.BANKNAME,
				BB.BRANCHCODE,
				BB.BRANCHDESC,
				BBRS.CPPROVINCENAME BENFICIARY_BRANCH_STATE,
				BBRC.PCCITYNAME BENFICIARY_BRANCH_CITY,
				BB.MICR MICR_CODE,
				BB.IFSC IFSC_CODE,
				PI.ACCOUNTNO BENEFICIARYACCNO,
				CASE
				WHEN PI.PAYMENTTYPE = 'CHEQUE'
				OR PI.PAYMENTTYPE = 'DD'
				THEN
				PI.FAVOURNAME
				ELSE PI.ACCTHOLDERNAME
				END BENEFICIARYNAME,
				PI.PHONECOUNTRYCODE || PI.PHONENUMBER BENEFICIARY_MOBILE,
				BCE.CUSTEMAIL BENFICIRY_EMAIL,
				BRS.CPPROVINCENAME BENFICIARY_STATE,
				BRC.PCCITYNAME BENFICIARY_CITY,
				'' BENFICIARY_ADDRESS1,
				'' BENFICIARY_ADDRESS2,
				'' BENFICIARY_ADDRESS3,
				'' BENFICIARY_ADDRESS4,
				'' BENFICIARY_ADDRESS5,
				'' PAYMENT_DETAIL1,
				'' PAYMENT_DETAIL2,
				'' PAYMENT_DETAIL3,
				'' PAYMENT_DETAIL4,
				'' PAYMENT_DETAIL5,
				'' PAYMENT_DETAIL6,
				'' PAYMENT_DETAIL7,
				PI.STATUS,
				PI.REMARKS,
				PI.PAYMENTTYPE,
				FM.FINTYPE,
				PB.PARTNERBANKID PARTNERBANK_ID,
				PB.PARTNERBANKCODE
				PARTNERBANK_CODE,
				PI.POSTDATE INPUTDATE,
				PB.ALWFILEDOWNLOAD,
				PB.FILENAME,
				FM.FINISACTIVE,
				SMD.ENTITYCODE,
				PB.ACCOUNTNO
				PARTNERBANK_ACCOUNTNO
				FROM PAYMENTINSTRUCTIONS PI
				JOIN PAYMENTHEADER PH ON PH.PAYMENTID = PI.PAYMENTID
				JOIN (SELECT
				FINANCEMAIN.CUSTID,
				FINANCEMAIN.FINREFERENCE,
				FINANCEMAIN.FINTYPE,
				FINANCEMAIN.FINISACTIVE
				FROM FINANCEMAIN
				UNION ALL
				SELECT T2.CUSTID,
				T2.FINREFERENCE,
				T2.FINTYPE,
				T2.FINISACTIVE
				FROM FINANCEMAIN_TEMP T2
				WHERE NOT (EXISTS
				( SELECT 1 FROM
				FINANCEMAIN_TEMP T3 WHERE T3.FINREFERENCE = T2.FINREFERENCE))) FM ON FM.FINREFERENCE = PH.FINREFERENCE
				JOIN CUSTOMERS CU ON CU.CUSTID = FM.CUSTID
				JOIN RMTCURRENCIES CCY ON CCY.CCYCODE = PI.PAYMENTCCY
				JOIN PARTNERBANKS PB ON PB.PARTNERBANKID = PI.PARTNERBANKID
				LEFT JOIN CUSTOMEREMAILS CE ON CE.CUSTID = CU.CUSTID AND CE.CUSTEMAILPRIORITY = 5
				LEFT JOIN CUSTOMERADDRESSES CA ON CA.CUSTID = CE.CUSTID AND CA.CUSTADDRPRIORITY = 5
				LEFT JOIN RMTPROVINCEVSCITY CC ON CC.PCCITY = CA.CUSTADDRCITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE CS ON CS.CPPROVINCE = CC.PCPROVINCE
				LEFT JOIN CUSTOMERPHONENUMBERS CM ON CM.PHONECUSTID = CU.CUSTID
				AND CM.PHONETYPECODE = 'MOBILE1' AND CM.PHONETYPEPRIORITY = 5
				LEFT JOIN BANKBRANCHES BB ON BB.BANKBRANCHID = PI.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL BD ON BD.BANKCODE = BB.BANKCODE
				LEFT JOIN RMTPROVINCEVSCITY	BBRC ON BBRC.PCCITY = BB.CITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE BBRS	ON BBRS.CPPROVINCE = BBRC.PCPROVINCE
				LEFT JOIN BENEFICIARY BR ON BR.BANKBRANCHID = PI.BANKBRANCHID
				AND BR.ACCNUMBER = PI.ACCOUNTNO	AND BR.CUSTID = FM.CUSTID
				LEFT JOIN CUSTOMERS BC ON BC.CUSTID = BR.CUSTID
				LEFT JOIN CUSTOMEREMAILS BCE ON	BCE.CUSTID = CU.CUSTID AND BCE.CUSTEMAILPRIORITY = 5
				LEFT JOIN CUSTOMERADDRESSES BRCA ON BRCA.CUSTID = BR.CUSTID	AND	BRCA.CUSTADDRPRIORITY = 5
				LEFT JOIN RMTPROVINCEVSCITY BRC	ON BRC.PCCITY = BRCA.CUSTADDRCITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE BRS ON BRS.CPPROVINCE = BRC.PCPROVINCE
				LEFT JOIN RMTFINANCETYPES RFT ON FM.FINTYPE = RFT.FINTYPE
				LEFT JOIN SMTDIVISIONDETAIL SMD	ON RFT.FINDIVISION = SMD.DIVISIONCODE
				WHERE PI.STATUS = 'APPROVED'
				AND NOT
				(PI.PAYMENTINSTRUCTIONID IN
				( SELECT DISBURSEMENT_REQUESTS.DISBURSEMENT_ID FROM
				DISBURSEMENT_REQUESTS
				))
				UNION ALL
				SELECT PI.ID PAYMENTID,
				VR.PRIMARYLINKREF FINREFERENCE,
				'I' CHANNEL,
				PI.PROVIDERID,
				CASE
				WHEN
				PI.PAYMENTTYPE = 'NEFT'
				THEN 'N'
				WHEN PI.PAYMENTTYPE = 'RTGS'
				THEN 'R'
				WHEN PI.PAYMENTTYPE = 'DD'
				THEN 'D'
				WHEN
				PI.PAYMENTTYPE = 'CHEQUE'
				THEN 'C'
				ELSE PI.PAYMENTTYPE
				END DISBURSEMENT_TYPE,
				PI.PAYMENTAMOUNT  AMTTOBERELEASED,
				PI.PAYMENTDATE DISBDATE,
				PI.PAYMENTDATE LLDATE,
				'' PAYABLELOC,
				'' PRINTINGLOC,
				'' CUSTCIF,
				'' CUSTSHRTNAME,
				'' CUSTOMER_MOBILE,
				'' CUSTOMER_EMAIL,
				'' CUSTOMER_STATE,
				'' CUSTOMER_CITY,
				'' CUSTOMER_ADDRESS1,
				'' CUSTOMER_ADDRESS2,
				'' CUSTOMER_ADDRESS3,
				'' CUSTOMER_ADDRESS4,
				'' CUSTOMER_ADDRESS5,
				BD.BANKNAME,
				BB.BRANCHCODE,
				BB.BRANCHDESC,
				BBRS.CPPROVINCENAME BENFICIARY_BRANCH_STATE,
				BBRC.PCCITYNAME BENFICIARY_BRANCH_CITY,
				BB.MICR MICR_CODE,
				BB.IFSC IFSC_CODE,
				VPA.ACCOUNTNUMBER BENEFICIARYACCNO,
				AVD.DEALERNAME BENEFICIARYNAME,
				AVD.DEALERTELEPHONE
				BENEFICIARY_MOBILE,
				AVD.EMAIL BENFICIRY_EMAIL,
				BRS.CPPROVINCENAME BENFICIARY_STATE,
				BRC.PCCITYNAME BENFICIARY_CITY,
				AVD.DEALERADDRESS1 BENFICIARY_ADDRESS1,
				AVD.DEALERADDRESS2 BENFICIARY_ADDRESS2,
				AVD.DEALERADDRESS3 BENFICIARY_ADDRESS3,
				'' BENFICIARY_ADDRESS4,
				'' BENFICIARY_ADDRESS5,
				'' PAYMENT_DETAIL1,
				'' PAYMENT_DETAIL2,
				'' PAYMENT_DETAIL3,
				'' PAYMENT_DETAIL4,
				'' PAYMENT_DETAIL5,
				'' PAYMENT_DETAIL6,
				'' PAYMENT_DETAIL7,
				PI.STATUS,
				PI.REMARKS,
				PI.PAYMENTTYPE,
				'' FINTYPE,
				PB.PARTNERBANKID PARTNERBANK_ID,
				PB.PARTNERBANKCODE PARTNERBANK_CODE,
				PI.PAYMENTDATE INPUTDATE,
				PB.ALWFILEDOWNLOAD,
				PB.FILENAME,
				1 FINISACTIVE,
				PI.ENTITYCODE,
				PB.ACCOUNTNO PARTNERBANK_ACCOUNT
				FROM INSURANCEPAYMENTINSTRUCTIONS PI
				JOIN RMTCURRENCIES CCY ON CCY.CCYCODE = PI.PAYMENTCCY
				JOIN PARTNERBANKS PB ON	PB.PARTNERBANKID = PI.PARTNERBANKID
				JOIN VASPROVIDERACCDETAIL VPA ON VPA.PROVIDERID = PI.PROVIDERID
				JOIN AMTVEHICLEDEALER AVD ON AVD.DEALERID = VPA.PROVIDERID
				JOIN VASRECORDING VR ON VR.PAYMENTINSID = PI.ID
				LEFT JOIN BANKBRANCHES BB ON BB.BANKBRANCHID = VPA.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL BD ON BD.BANKCODE = BB.BANKCODE
				LEFT JOIN RMTPROVINCEVSCITY BBRC ON BBRC.PCCITY	= BB.CITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE BBRS	ON BBRS.CPPROVINCE = BBRC.PCPROVINCE
				LEFT JOIN RMTPROVINCEVSCITY BRC	ON BRC.PCCITY =	AVD.DEALERCITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE BRS ON BRS.CPPROVINCE = BRC.PCPROVINCE
				WHERE PI.STATUS = 'APPROVED' AND PI.PAYMENTAMOUNT > 0
				AND NOT (PI.ID IN( SELECT DISBURSEMENT_REQUESTS.DISBURSEMENT_ID FROM DISBURSEMENT_REQUESTS))
					]]>
		</createView>
	</changeSet>

	<changeSet id="686_post" author="ayyappa.ch" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'int_disbursement_request_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="686" author="ayyappa.ch" dbms="mssql">
		<createView viewName="INT_DISBURSEMENT_REQUEST_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FA.PAYMENTID,
				FA.FINREFERENCE,
				'D' CHANNEL,
				0 PROVIDERID,
				CASE
				WHEN FA.PAYMENTTYPE = 'NEFT'
				THEN 'N'
				WHEN FA.PAYMENTTYPE = 'RTGS'
				THEN 'R'
				WHEN
				FA.PAYMENTTYPE = 'DD'
				THEN 'D'
				WHEN FA.PAYMENTTYPE = 'CHEQUE'
				THEN 'C'
				ELSE FA.PAYMENTTYPE
				END DISBURSEMENT_TYPE,
				FA.AMTTOBERELEASED,
				FA.DISBDATE,
				FA.LLDATE,
				FA.PAYABLELOC,
				FA.PRINTINGLOC,
				CU.CUSTCIF,
				CU.CUSTSHRTNAME,
				'' CUSTOMER_MOBILE,
				CE.CUSTEMAIL CUSTOMER_EMAIL,
				CS.CPPROVINCENAME CUSTOMER_STATE,
				CC.PCCITYNAME CUSTOMER_CITY,
				'' CUSTOMER_ADDRESS1,
				'' CUSTOMER_ADDRESS2,
				'' CUSTOMER_ADDRESS3,
				'' CUSTOMER_ADDRESS4,
				'' CUSTOMER_ADDRESS5,
				BD.BANKNAME,
				BB.BRANCHCODE,
				BB.BRANCHDESC,
				PBD.CPPROVINCENAME BENFICIARY_BRANCH_STATE,
				PBD.PCCITYNAME BENFICIARY_BRANCH_CITY,
				BB.MICR MICR_CODE,
				BB.IFSC IFSC_CODE,
				FA.BENEFICIARYACCNO,
				CASE
				WHEN FA.PAYMENTTYPE = 'CHEQUE'
				OR FA.PAYMENTTYPE = 'DD'
				THEN
				FA.LIABILITYHOLDNAME
				ELSE FA.BENEFICIARYNAME
				END BENEFICIARYNAME,
				(FA.PHONECOUNTRYCODE + FA.PHONEAREACODE) + FA.PHONENUMBER BENEFICIARY_MOBILE,
				BCE.CUSTEMAIL BENFICIRY_EMAIL,
				BRS.CPPROVINCENAME BENFICIARY_STATE,
				BRC.PCCITYNAME BENFICIARY_CITY,
				BRCA.CustAddrHNbr +','+ BRCA.CustAddrStreet +','+ BRC.PCCITYNAME +','+ BRS.CPPROVINCENAME  BENFICIARY_ADDRESS1,
				'' BENFICIARY_ADDRESS2,
				'' BENFICIARY_ADDRESS3,
				'' BENFICIARY_ADDRESS4,
				'' BENFICIARY_ADDRESS5,
				'' PAYMENT_DETAIL1,
				'' PAYMENT_DETAIL2,
				'' PAYMENT_DETAIL3,
				'' PAYMENT_DETAIL4,
				'' PAYMENT_DETAIL5,
				'' PAYMENT_DETAIL6,
				'' PAYMENT_DETAIL7,
				FA.STATUS,
				FA.DESCRIPTION REMARKS,
				FA.PAYMENTTYPE,
				FM.FINTYPE,
				PB.PARTNERBANKID
				PARTNERBANK_ID,
				PB.PARTNERBANKCODE PARTNERBANK_CODE,
				FA.INPUTDATE,
				PB.ALWFILEDOWNLOAD,
				PB.FILENAME,
				FM.FINISACTIVE,
				SMD.ENTITYCODE,
				PB.ACCOUNTNO PARTNERBANK_ACCOUNT
				FROM FINADVANCEPAYMENTS FA
				JOIN
				(SELECT FINANCEMAIN_TEMP.CUSTID,
				FINANCEMAIN_TEMP.FINREFERENCE,
				FINANCEMAIN_TEMP.FINTYPE,
				FINANCEMAIN_TEMP.FINISACTIVE
				FROM FINANCEMAIN_TEMP
				UNION ALL
				SELECT T2.CUSTID,
				T2.FINREFERENCE,
				T2.FINTYPE,
				T2.FINISACTIVE
				FROM FINANCEMAIN T2
				WHERE NOT (EXISTS
				( SELECT 1 FROM
				FINANCEMAIN_TEMP T3 WHERE T3.FINREFERENCE = T2.FINREFERENCE))) FM
				ON FM.FINREFERENCE = FA.FINREFERENCE
				JOIN CUSTOMERS CU ON CU.CUSTID = FM.CUSTID	
				JOIN RMTCURRENCIES CCY ON CCY.CCYCODE	= FA.DISBCCY
				JOIN PARTNERBANKS PB ON PB.PARTNERBANKID = FA.PARTNERBANKID
				LEFT JOIN CUSTOMEREMAILS CE	ON CE.CUSTID = CU.CUSTID AND CE.CUSTEMAILPRIORITY = 5
				LEFT JOIN CUSTOMERADDRESSES CA ON CA.CUSTID = CE.CUSTID	AND CA.CUSTADDRPRIORITY = 5
				LEFT JOIN RMTPROVINCEVSCITY CC ON CC.PCCITY = CA.CUSTADDRCITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE CS ON CS.CPPROVINCE = CC.PCPROVINCE
				LEFT JOIN BANKBRANCHES BB ON BB.BANKBRANCHID = FA.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL BD ON BD.BANKCODE =	BB.BANKCODE
				LEFT JOIN ( SELECT PB_1.PARTNERBANKID,	
				PBD_1.BANKNAME,
				PBB.BRANCHDESC,
				PBBRC.PCCITYNAME,
				PBBRS.CPPROVINCENAME FROM PARTNERBANKS PB_1
				JOIN BANKBRANCHES PBB ON PBB.BRANCHCODE = PB_1.BANKBRANCHCODE
				JOIN BMTBANKDETAIL PBD_1 ON PBD_1.BANKCODE = PBB.BANKCODE
				LEFT JOIN RMTPROVINCEVSCITY PBBRC ON PBBRC.PCCITY = PBB.CITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE PBBRS ON PBBRS.CPPROVINCE = PBBRC.PCPROVINCE
				) PBD ON PBD.PARTNERBANKID = PB.PARTNERBANKID
				LEFT JOIN BENEFICIARY BR ON BR.BANKBRANCHID = FA.BANKBRANCHID AND
				BR.ACCNUMBER = FA.BENEFICIARYACCNO AND BR.CUSTID = FM.CUSTID
				LEFT JOIN CUSTOMERS BC ON BC.CUSTID = BR.CUSTID
				LEFT JOIN CUSTOMEREMAILS BCE ON BCE.CUSTID = CU.CUSTID
				AND BCE.CUSTEMAILPRIORITY = 5
				LEFT JOIN CUSTOMERADDRESSES	BRCA ON	BRCA.CUSTID = BR.CUSTID
				AND BRCA.CUSTADDRPRIORITY = 5
				LEFT JOIN RMTPROVINCEVSCITY BRC	ON BRC.PCCITY =	BRCA.CUSTADDRCITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE BRS ON BRS.CPPROVINCE = BRC.PCPROVINCE
				LEFT JOIN RMTFINANCETYPES RFT ON FM.FINTYPE = RFT.FINTYPE
				LEFT JOIN SMTDIVISIONDETAIL SMD	ON RFT.FINDIVISION = SMD.DIVISIONCODE
				WHERE FA.STATUS = 'APPROVED' AND NOT (FA.PAYMENTID IN ( 
				SELECT DISBURSEMENT_REQUESTS.DISBURSEMENT_ID FROM DISBURSEMENT_REQUESTS))
				AND NOT	(FA.PAYMENTID IN ( SELECT FINADVANCEPAYMENTS_TEMP.PAYMENTID FROM FINADVANCEPAYMENTS_TEMP))
				UNION ALL
				SELECT
				PI.PAYMENTINSTRUCTIONID PAYMENTID,
				PH.FINREFERENCE,
				PH.PAYMENTTYPE CHANNEL,
				0 PROVIDERID,
				CASE
				WHEN PI.PAYMENTTYPE =
				'NEFT'
				THEN 'N'
				WHEN PI.PAYMENTTYPE = 'RTGS'
				THEN 'R'
				WHEN PI.PAYMENTTYPE = 'DD'
				THEN 'D'
				WHEN PI.PAYMENTTYPE = 'CHEQUE'
				THEN 'C'
				ELSE PI.PAYMENTTYPE
				END DISBURSEMENT_TYPE,
				PI.PAYMENTAMOUNT  AMTTOBERELEASED,
				PI.POSTDATE
				DISBDATE,
				PI.POSTDATE LLDATE,
				PI.PAYABLELOC,
				PI.PRINTINGLOC,
				CU.CUSTCIF,
				CU.CUSTSHRTNAME,
				'' CUSTOMER_MOBILE,
				CE.CUSTEMAIL
				CUSTOMER_EMAIL,
				CS.CPPROVINCENAME CUSTOMER_STATE,
				CC.PCCITYNAME CUSTOMER_CITY,
				'' CUSTOMER_ADDRESS1,
				'' CUSTOMER_ADDRESS2,
				'' CUSTOMER_ADDRESS3,
				'' CUSTOMER_ADDRESS4,
				'' CUSTOMER_ADDRESS5,
				BD.BANKNAME,
				BB.BRANCHCODE,
				BB.BRANCHDESC,
				BBRS.CPPROVINCENAME BENFICIARY_BRANCH_STATE,
				BBRC.PCCITYNAME BENFICIARY_BRANCH_CITY,
				BB.MICR MICR_CODE,
				BB.IFSC IFSC_CODE,
				PI.ACCOUNTNO BENEFICIARYACCNO,
				CASE
				WHEN PI.PAYMENTTYPE = 'CHEQUE'
				OR PI.PAYMENTTYPE = 'DD'
				THEN
				PI.FAVOURNAME
				ELSE PI.ACCTHOLDERNAME
				END BENEFICIARYNAME,
				PI.PHONECOUNTRYCODE + PI.PHONENUMBER BENEFICIARY_MOBILE,
				BCE.CUSTEMAIL BENFICIRY_EMAIL,
				BRS.CPPROVINCENAME BENFICIARY_STATE,
				BRC.PCCITYNAME BENFICIARY_CITY,
				'' BENFICIARY_ADDRESS1,
				'' BENFICIARY_ADDRESS2,
				'' BENFICIARY_ADDRESS3,
				'' BENFICIARY_ADDRESS4,
				'' BENFICIARY_ADDRESS5,
				'' PAYMENT_DETAIL1,
				'' PAYMENT_DETAIL2,
				'' PAYMENT_DETAIL3,
				'' PAYMENT_DETAIL4,
				'' PAYMENT_DETAIL5,
				'' PAYMENT_DETAIL6,
				'' PAYMENT_DETAIL7,
				PI.STATUS,
				PI.REMARKS,
				PI.PAYMENTTYPE,
				FM.FINTYPE,
				PB.PARTNERBANKID PARTNERBANK_ID,
				PB.PARTNERBANKCODE
				PARTNERBANK_CODE,
				PI.POSTDATE INPUTDATE,
				PB.ALWFILEDOWNLOAD,
				PB.FILENAME,
				FM.FINISACTIVE,
				SMD.ENTITYCODE,
				PB.ACCOUNTNO
				PARTNERBANK_ACCOUNTNO
				FROM PAYMENTINSTRUCTIONS PI
				JOIN PAYMENTHEADER PH ON PH.PAYMENTID = PI.PAYMENTID
				JOIN (SELECT
				FINANCEMAIN.CUSTID,
				FINANCEMAIN.FINREFERENCE,
				FINANCEMAIN.FINTYPE,
				FINANCEMAIN.FINISACTIVE
				FROM FINANCEMAIN
				UNION ALL
				SELECT T2.CUSTID,
				T2.FINREFERENCE,
				T2.FINTYPE,
				T2.FINISACTIVE
				FROM FINANCEMAIN_TEMP T2
				WHERE NOT (EXISTS
				( SELECT 1 FROM
				FINANCEMAIN_TEMP T3 WHERE T3.FINREFERENCE = T2.FINREFERENCE))) FM ON FM.FINREFERENCE = PH.FINREFERENCE
				JOIN CUSTOMERS CU ON CU.CUSTID = FM.CUSTID
				JOIN RMTCURRENCIES CCY ON CCY.CCYCODE = PI.PAYMENTCCY
				JOIN PARTNERBANKS PB ON PB.PARTNERBANKID = PI.PARTNERBANKID
				LEFT JOIN CUSTOMEREMAILS CE ON CE.CUSTID = CU.CUSTID AND CE.CUSTEMAILPRIORITY = 5
				LEFT JOIN CUSTOMERADDRESSES CA ON CA.CUSTID = CE.CUSTID AND CA.CUSTADDRPRIORITY = 5
				LEFT JOIN RMTPROVINCEVSCITY CC ON CC.PCCITY = CA.CUSTADDRCITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE CS ON CS.CPPROVINCE = CC.PCPROVINCE
				LEFT JOIN CUSTOMERPHONENUMBERS CM ON CM.PHONECUSTID = CU.CUSTID
				AND CM.PHONETYPECODE = 'MOBILE1' AND CM.PHONETYPEPRIORITY = 5
				LEFT JOIN BANKBRANCHES BB ON BB.BANKBRANCHID = PI.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL BD ON BD.BANKCODE = BB.BANKCODE
				LEFT JOIN RMTPROVINCEVSCITY	BBRC ON BBRC.PCCITY = BB.CITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE BBRS	ON BBRS.CPPROVINCE = BBRC.PCPROVINCE
				LEFT JOIN BENEFICIARY BR ON BR.BANKBRANCHID = PI.BANKBRANCHID
				AND BR.ACCNUMBER = PI.ACCOUNTNO	AND BR.CUSTID = FM.CUSTID
				LEFT JOIN CUSTOMERS BC ON BC.CUSTID = BR.CUSTID
				LEFT JOIN CUSTOMEREMAILS BCE ON	BCE.CUSTID = CU.CUSTID AND BCE.CUSTEMAILPRIORITY = 5
				LEFT JOIN CUSTOMERADDRESSES BRCA ON BRCA.CUSTID = BR.CUSTID	AND	BRCA.CUSTADDRPRIORITY = 5
				LEFT JOIN RMTPROVINCEVSCITY BRC	ON BRC.PCCITY = BRCA.CUSTADDRCITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE BRS ON BRS.CPPROVINCE = BRC.PCPROVINCE
				LEFT JOIN RMTFINANCETYPES RFT ON FM.FINTYPE = RFT.FINTYPE
				LEFT JOIN SMTDIVISIONDETAIL SMD	ON RFT.FINDIVISION = SMD.DIVISIONCODE
				WHERE PI.STATUS = 'APPROVED'
				AND NOT
				(PI.PAYMENTINSTRUCTIONID IN
				( SELECT DISBURSEMENT_REQUESTS.DISBURSEMENT_ID FROM
				DISBURSEMENT_REQUESTS
				))
				UNION ALL
				SELECT PI.ID PAYMENTID,
				VR.PRIMARYLINKREF FINREFERENCE,
				'I' CHANNEL,
				PI.PROVIDERID,
				CASE
				WHEN
				PI.PAYMENTTYPE = 'NEFT'
				THEN 'N'
				WHEN PI.PAYMENTTYPE = 'RTGS'
				THEN 'R'
				WHEN PI.PAYMENTTYPE = 'DD'
				THEN 'D'
				WHEN
				PI.PAYMENTTYPE = 'CHEQUE'
				THEN 'C'
				ELSE PI.PAYMENTTYPE
				END DISBURSEMENT_TYPE,
				PI.PAYMENTAMOUNT  AMTTOBERELEASED,
				PI.PAYMENTDATE DISBDATE,
				PI.PAYMENTDATE LLDATE,
				'' PAYABLELOC,
				'' PRINTINGLOC,
				'' CUSTCIF,
				'' CUSTSHRTNAME,
				'' CUSTOMER_MOBILE,
				'' CUSTOMER_EMAIL,
				'' CUSTOMER_STATE,
				'' CUSTOMER_CITY,
				'' CUSTOMER_ADDRESS1,
				'' CUSTOMER_ADDRESS2,
				'' CUSTOMER_ADDRESS3,
				'' CUSTOMER_ADDRESS4,
				'' CUSTOMER_ADDRESS5,
				BD.BANKNAME,
				BB.BRANCHCODE,
				BB.BRANCHDESC,
				BBRS.CPPROVINCENAME BENFICIARY_BRANCH_STATE,
				BBRC.PCCITYNAME BENFICIARY_BRANCH_CITY,
				BB.MICR MICR_CODE,
				BB.IFSC IFSC_CODE,
				VPA.ACCOUNTNUMBER BENEFICIARYACCNO,
				AVD.DEALERNAME BENEFICIARYNAME,
				AVD.DEALERTELEPHONE
				BENEFICIARY_MOBILE,
				AVD.EMAIL BENFICIRY_EMAIL,
				BRS.CPPROVINCENAME BENFICIARY_STATE,
				BRC.PCCITYNAME BENFICIARY_CITY,
				AVD.DEALERADDRESS1 BENFICIARY_ADDRESS1,
				AVD.DEALERADDRESS2 BENFICIARY_ADDRESS2,
				AVD.DEALERADDRESS3 BENFICIARY_ADDRESS3,
				'' BENFICIARY_ADDRESS4,
				'' BENFICIARY_ADDRESS5,
				'' PAYMENT_DETAIL1,
				'' PAYMENT_DETAIL2,
				'' PAYMENT_DETAIL3,
				'' PAYMENT_DETAIL4,
				'' PAYMENT_DETAIL5,
				'' PAYMENT_DETAIL6,
				'' PAYMENT_DETAIL7,
				PI.STATUS,
				PI.REMARKS,
				PI.PAYMENTTYPE,
				'' FINTYPE,
				PB.PARTNERBANKID PARTNERBANK_ID,
				PB.PARTNERBANKCODE PARTNERBANK_CODE,
				PI.PAYMENTDATE INPUTDATE,
				PB.ALWFILEDOWNLOAD,
				PB.FILENAME,
				1 FINISACTIVE,
				PI.ENTITYCODE,
				PB.ACCOUNTNO PARTNERBANK_ACCOUNT
				FROM INSURANCEPAYMENTINSTRUCTIONS PI
				JOIN RMTCURRENCIES CCY ON CCY.CCYCODE = PI.PAYMENTCCY
				JOIN PARTNERBANKS PB ON	PB.PARTNERBANKID = PI.PARTNERBANKID
				JOIN VASPROVIDERACCDETAIL VPA ON VPA.PROVIDERID = PI.PROVIDERID
				JOIN AMTVEHICLEDEALER AVD ON AVD.DEALERID = VPA.PROVIDERID
				JOIN VASRECORDING VR ON VR.PAYMENTINSID = PI.ID
				LEFT JOIN BANKBRANCHES BB ON BB.BANKBRANCHID = VPA.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL BD ON BD.BANKCODE = BB.BANKCODE
				LEFT JOIN RMTPROVINCEVSCITY BBRC ON BBRC.PCCITY	= BB.CITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE BBRS	ON BBRS.CPPROVINCE = BBRC.PCPROVINCE
				LEFT JOIN RMTPROVINCEVSCITY BRC	ON BRC.PCCITY =	AVD.DEALERCITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE BRS ON BRS.CPPROVINCE = BRC.PCPROVINCE
				WHERE PI.STATUS = 'APPROVED' AND PI.PAYMENTAMOUNT > 0
				AND NOT (PI.ID IN( SELECT DISBURSEMENT_REQUESTS.DISBURSEMENT_ID FROM DISBURSEMENT_REQUESTS))
					]]>
		</createView>
	</changeSet>

	<changeSet id="687_pre" author="ayyappa.ch" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'int_mandate_request_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="687" author="ayyappa.ch">
		<createView viewName="INT_MANDATE_REQUEST_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT
			M.MANDATEID,
			BD.BANKSHORTCODE
			BANKCODE,
			BD.BANKNAME,
			case when LB.BRANCHCODE IS NULL THEN CB.BRANCHCODE ELSE LB.BRANCHCODE END BRANCHCODE,
			case when
			LB.BRANCHDESC IS NULL THEN CB.BRANCHDESC ELSE LB.BRANCHDESC END BRANCHDESC,
			CUST.CUSTCIF,
			CUST.CUSTSHRTNAME,
			CUST.CustCoreBank,
			FT.FINTYPEDESC FINTYPE ,
			FIN.FINREFERENCE ,
			COALESCE((SELECT SUM(TotalAmount) from (Select
			MAX(FSD.REPAYAMOUNT+FSD.FEESCHD) TotalAmount
			FROM FINSCHEDULEDETAILS FSD
			INNER JOIN FINANCEMAIN FM ON FM.FINREFERENCE
			=FSD.FINREFERENCE AND FM.CUSTID = M.CUSTID
			GROUP BY FM.FINREFERENCE)T)/CCYMINORCCYUNITS, 0) CUST_EMI,
			COALESCE((SELECT
			SUM(TotalAmount) from (Select MAX(FSD.REPAYAMOUNT+FSD.FEESCHD) TotalAmount FROM FINSCHEDULEDETAILS FSD WHERE
			(REPAYONSCHDATE = 1 OR PFTONSCHDATE = 1) AND FINREFERENCE IN (SELECT FINREFERENCE FROM FINANCEMAIN WHERE MANDATEID =
			M.MANDATEID) GROUP BY FINREFERENCE)T)/CCYMINORCCYUNITS, 0) EMI,
			CASE M.OPENMANDATE WHEN 1 THEN 'New Open ECS' ELSE 'No
			Open ECS' END OPENMANDATE,
			M.ACCNUMBER,
			CASE WHEN M.ACCTYPE = '10' then 'Savings Account' WHEN M.ACCTYPE = '11' then
			'Current Account' WHEN M.ACCTYPE = '11' then
			'Cash Credit Account' ELSE M.ACCTYPE END ACCTYPE,
			M.ACCHOLDERNAME,
			BB.MICR,
			BB.IFSC,
			BB.ADDOFBRANCH,
			(select MIN(FIRSTREPAYDATE) from FINPFTDETAILS where FINREFERENCE IN (SELECT
			FINREFERENCE FROM FINANCEMAIN WHERE
			MANDATEID=M.MANDATEID)) FIRSTDUEDATE,
			(select MAX(SCHDATE) from FINSCHEDULEDETAILS
			where (REPAYONSCHDATE = 1 OR PFTONSCHDATE = 1) and FINREFERENCE IN (SELECT
			FINREFERENCE FROM FINANCEMAIN WHERE
			MANDATEID=M.MANDATEID)) EMIENDDATE,
			COALESCE (M.MAXLIMIT, 0) MAXLIMIT,
			COALESCE((SELECT
			SUM(MANDATEDEBITAMOUNT) from (Select MAX(REPAYAMOUNT+FEESCHD) MANDATEDEBITAMOUNT FROM FINSCHEDULEDETAILS WHERE
			(REPAYONSCHDATE = 1 OR PFTONSCHDATE = 1) AND FINREFERENCE IN (SELECT FINREFERENCE FROM FINANCEMAIN WHERE
			MANDATEID=M.MANDATEID)
			GROUP BY FINREFERENCE)T), 0)/CCYMINORCCYUNITS DEBITAMOUNT,
			FIN.NumberOfTerms,
			M.periodicity,
			M.STARTDATE,
			M.EXPIRYDATE,
			FIN.APPLICATIONNO,
			M.MANDATETYPE,
			M.STATUS,
			M.INPUTDATE,
			M.RECORDSTATUS,
			M.RECORDTYPE,
			M.MANDATECCY,
			COALESCE (CCY.CCYMINORCCYUNITS, 100) CCYMINORCCYUNITS,
			M.EntityCode,
			CP.PHONENUMBER,
			CE.CUSTEMAIL,
			PB.PARTNERBANKNAME,
			M.LASTMNTON,
			BB.BranchDesc BANK_BRANCH_NAME
			FROM MANDATES M
			INNER JOIN BANKBRANCHES BB ON
			BB.BANKBRANCHID = M.BANKBRANCHID
			INNER JOIN BMTBANKDETAIL BD ON BD.BANKCODE=BB.BANKCODE
			INNER JOIN CUSTOMERS CUST ON
			CUST.CUSTID = M.CUSTID
			INNER JOIN RMTBRANCHES CB ON CB.BRANCHCODE = CUST.CUSTDFTBRANCH
			LEFT JOIN PARTNERBANKS PB ON
			PB.PARTNERBANKID = M.PARTNERBANKID
			LEFT JOIN CUSTOMEREMAILS CE ON CE.CUSTID = CUST.CUSTID AND CE.CUSTEMAILPRIORITY = 5
			LEFT JOIN CUSTOMERPHONENUMBERS CP ON CP.PHONECUSTID = CUST.CUSTID AND CP.PHONETYPEPRIORITY = 5
			LEFT OUTER JOIN
			RMTCURRENCIES CCY ON CCY.CCYCODE = M.MANDATECCY
			LEFT OUTER JOIN FINANCEMAIN FIN ON M.ORGREFERENCE=FIN.FINREFERENCE
			LEFT JOIN RMTBRANCHES LB ON LB.BRANCHCODE = FIN.FINBRANCH
			LEFT OUTER JOIN RMTFINANCETYPES FT ON FIN.FINTYPE
			=FT.FINTYPE
			WHERE M.STATUS = 'NEW' AND M.MANDATEID NOT IN (select MANDATEID FROM MANDATE_REQUESTS where (status = 'AC'
			OR status =
			'NEW'))	]]>
		</createView>
	</changeSet>

	<changeSet id="687_post" author="ayyappa.ch" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'int_mandate_request_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="686" author="Suraj.r">
		<addColumn tableName="FinFeeDetail">
			<column name="PaidTDS" type="decimal(18,0)" />
		</addColumn>
	</changeSet>

	<changeSet id="687" author="Suraj.r">
		<addColumn tableName="FinFeeDetail">
			<column name="RemTDS" type="decimal(18,0)" />
		</addColumn>
	</changeSet>

	<changeSet id="688" author="Suraj.r">
		<addColumn tableName="FinFeeDetail">
			<column name="NetTDS" type="decimal(18,0)" />
		</addColumn>
	</changeSet>

	<changeSet id="689" author="Suraj.r">
		<addColumn tableName="FinFeeDetail_TEMP">
			<column name="PaidTDS" type="decimal(18,0) " />
		</addColumn>
	</changeSet>

	<changeSet id="690" author="Suraj.r">
		<addColumn tableName="FinFeeDetail_TEMP">
			<column name="RemTDS" type="decimal(18,0)" />
		</addColumn>
	</changeSet>

	<changeSet id="691" author="Suraj.r">
		<addColumn tableName="FinFeeDetail_TEMP">
			<column name="NetTDS" type="decimal(18,0)" />
		</addColumn>
	</changeSet>

	<changeSet id="692" author="suraj.r">
		<sql>
			<![CDATA[
				UPDATE FinFeeDetail Set PaidTDS = 0 where PaidTDS is null;
				UPDATE FinFeeDetail Set RemTDS = 0 where RemTDS is null;
				UPDATE FinFeeDetail Set NetTDS = 0 where NetTDS is null;
				
				UPDATE FinFeeDetail_TEMP Set PaidTDS = 0 where PaidTDS is null;
				UPDATE FinFeeDetail_TEMP Set RemTDS = 0 where RemTDS is null;
				UPDATE FinFeeDetail_TEMP Set NetTDS = 0 where NetTDS is null;
			]]>
		</sql>
	</changeSet>

	<changeSet id="693" author="meena.a" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE FinFeeDetail ADD CONSTRAINT DF_FinFeeDetail_PDS DEFAULT 0 FOR PaidTDS;
				ALTER TABLE FinFeeDetail ADD CONSTRAINT DF_FinFeeDetail_RTD DEFAULT 0 FOR RemTDS;
				ALTER TABLE FinFeeDetail ADD CONSTRAINT DF_FinFeeDetail_NTD DEFAULT 0 FOR NetTDS;
				
				ALTER TABLE FinFeeDetail_TEMP ADD CONSTRAINT DF_FinFeeDetail_TEMP_PDS DEFAULT 0 FOR PaidTDS;
				ALTER TABLE FinFeeDetail_TEMP ADD CONSTRAINT DF_FinFeeDetail_TEMP_RTD DEFAULT 0 FOR RemTDS;
				ALTER TABLE FinFeeDetail_TEMP ADD CONSTRAINT DF_FinFeeDetail_TEMP_NTD DEFAULT 0 FOR NetTDS;
			]]>
		</sql>
	</changeSet>

	<changeSet id="694" author="suraj.r" dbms="postgresql, oracle">
		<addDefaultValue columnName="PaidTDS" tableName="FinFeeDetail" defaultValue="0" />
		<addDefaultValue columnName="RemTDS" tableName="FinFeeDetail" defaultValue="0" />
		<addDefaultValue columnName="NetTDS" tableName="FinFeeDetail" defaultValue="0" />
		<addDefaultValue columnName="PaidTDS" tableName="FinFeeDetail_Temp" defaultValue="0" />
		<addDefaultValue columnName="RemTDS" tableName="FinFeeDetail_Temp" defaultValue="0" />
		<addDefaultValue columnName="NetTDS" tableName="FinFeeDetail_Temp" defaultValue="0" />
	</changeSet>

	<changeSet id="695_pre" author="suraj.r" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finfeedetail_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="695" author="suraj.r">
		<createView viewName="FINFEEDETAIL_VIEW" replaceIfExists="true">
			<![CDATA[
				 SELECT T1.FEEID,
						  T1.FINREFERENCE,
						  T1.ORIGINATIONFEE,
						  T1.FINEVENT,
						  T1.FEETYPEID,
						  T1.FEESEQ,
						  T1.FEEORDER,
						  T1.CALCULATEDAMOUNT,
						  T1.ACTUALAMOUNT,
						  T1.WAIVEDAMOUNT,
						  T1.PAIDAMOUNT,
						  T1.FEESCHEDULEMETHOD,
						  T1.TERMS,
						  T1.REMAININGFEE,
						  T1.PAYMENTREF,
						  T1.CALCULATIONTYPE,
						  T1.RULECODE,
						  T1.FIXEDAMOUNT,
						  T1.PERCENTAGE,
						  T1.CALCULATEON,
						  T1.ALWDEVIATION,
						  T1.MAXWAIVERPERC,
						  T1.ALWMODIFYFEE,
						  T1.ALWMODIFYFEESCHDMTHD,
						  T1.VASREFERENCE,
						  T1.STATUS,
						  T1.TAXAPPLICABLE,
						  T1.TAXCOMPONENT,
						  T1.PAIDAMOUNTORIGINAL,
						  T1.PAIDAMOUNTGST,
						  T1.NETAMOUNTORIGINAL,
						  T1.NETAMOUNTGST,
						  T1.NETAMOUNT,
						  T1.REMAININGFEEORIGINAL,
						  T1.REMAININGFEEGST,
						  T1.ACTUALAMOUNTORIGINAL,
						  T1.ACTUALAMOUNTGST,
						  T1.FEEAMZ,
						  T1.VERSION,
						  T1.LASTMNTBY,
						  T1.LASTMNTON,
						  T1.RECORDSTATUS,
						  T1.ROLECODE,
						  T1.NEXTROLECODE,
						  T1.TASKID,
						  T1.NEXTTASKID,
						  T1.RECORDTYPE,
						  T1.TRANSACTIONID,
						  T1.WORKFLOWID,
						  T2.FEETYPECODE,
						  T2.FEETYPEDESC,
						  T1.REFUNDABLE,
						  T1.INSTRUCTIONUID,
						  T1.ACTPERCENTAGE,
						  T1.WAIVEDGST,
						  T1.REFERENCEID,
						  T1.TAXHEADERID,
						  T1.PAIDTDS,
						  T1.REMTDS,
						  T1.NETTDS
						FROM FINFEEDETAIL_TEMP T1
						LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
						UNION ALL
						SELECT T1.FEEID,
						  T1.FINREFERENCE,
						  T1.ORIGINATIONFEE,
						  T1.FINEVENT,
						  T1.FEETYPEID,
						  T1.FEESEQ,
						  T1.FEEORDER,
						  T1.CALCULATEDAMOUNT,
						  T1.ACTUALAMOUNT,
						  T1.WAIVEDAMOUNT,
						  T1.PAIDAMOUNT,
						  T1.FEESCHEDULEMETHOD,
						  T1.TERMS,
						  T1.REMAININGFEE,
						  T1.PAYMENTREF,
						  T1.CALCULATIONTYPE,
						  T1.RULECODE,
						  T1.FIXEDAMOUNT,
						  T1.PERCENTAGE,
						  T1.CALCULATEON,
						  T1.ALWDEVIATION,
						  T1.MAXWAIVERPERC,
						  T1.ALWMODIFYFEE,
						  T1.ALWMODIFYFEESCHDMTHD,
						  T1.VASREFERENCE,
						  T1.STATUS,
						  T1.TAXAPPLICABLE,
						  T1.TAXCOMPONENT,
						  T1.PAIDAMOUNTORIGINAL,
						  T1.PAIDAMOUNTGST,
						  T1.NETAMOUNTORIGINAL,
						  T1.NETAMOUNTGST,
						  T1.NETAMOUNT,
						  T1.REMAININGFEEORIGINAL,
						  T1.REMAININGFEEGST,
						  T1.ACTUALAMOUNTORIGINAL,
						  T1.ACTUALAMOUNTGST,
						  T1.FEEAMZ,
						  T1.VERSION,
						  T1.LASTMNTBY,
						  T1.LASTMNTON,
						  T1.RECORDSTATUS,
						  T1.ROLECODE,
						  T1.NEXTROLECODE,
						  T1.TASKID,
						  T1.NEXTTASKID,
						  T1.RECORDTYPE,
						  T1.TRANSACTIONID,
						  T1.WORKFLOWID,
						  T2.FEETYPECODE,
						  T2.FEETYPEDESC,
						  T1.REFUNDABLE,
						  T1.INSTRUCTIONUID,
						  T1.ACTPERCENTAGE,
						  T1.WAIVEDGST,
						  T1.REFERENCEID,
						  T1.TAXHEADERID,
						  T1.PAIDTDS,
						  T1.REMTDS,
						  T1.NETTDS
						FROM FINFEEDETAIL T1
						LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID 
						WHERE NOT (EXISTS  ( SELECT 1 FROM FINFEEDETAIL_TEMP WHERE FINFEEDETAIL_TEMP.FEEID = T1.FEEID))
		    		 ]]>
			</createView>
	</changeSet>

	<changeSet id="695_post" author="suraj.r" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finfeedetail_view');
			]]>
		</sql>
	</changeSet>


	<changeSet id="696_pre" author="suraj.r" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finfeedetail_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="696" author="suraj.r">
		<createView viewName="FINFEEDETAIL_AVIEW" replaceIfExists="true">
			<![CDATA[
				 SELECT T1.FEEID,
						T1.FINREFERENCE,
						T1.ORIGINATIONFEE,
						T1.FINEVENT,
						T1.FEETYPEID,
						T1.FEESEQ,
						T1.FEEORDER,
						T1.CALCULATEDAMOUNT,
						T1.ACTUALAMOUNT,
						T1.WAIVEDAMOUNT,
						T1.PAIDAMOUNT,
						T1.FEESCHEDULEMETHOD,
						T1.TERMS,
						T1.REMAININGFEE,
						T1.PAYMENTREF,
						T1.CALCULATIONTYPE,
						T1.RULECODE,
						T1.FIXEDAMOUNT,
						T1.PERCENTAGE,
						T1.CALCULATEON,
						T1.ALWDEVIATION,
						T1.MAXWAIVERPERC,
						T1.ALWMODIFYFEE,
						T1.ALWMODIFYFEESCHDMTHD,
						T1.VASREFERENCE,
						T1.TAXAPPLICABLE,
						T1.TAXCOMPONENT,
						T1.PAIDAMOUNTORIGINAL,
						T1.PAIDAMOUNTGST,
						T1.NETAMOUNTORIGINAL,
						T1.NETAMOUNTGST,
						T1.NETAMOUNT,
						T1.REMAININGFEEORIGINAL,
						T1.REMAININGFEEGST,
						T1.ACTUALAMOUNTORIGINAL,
						T1.ACTUALAMOUNTGST,
						T1.FEEAMZ,
						T1.VERSION,
						T1.LASTMNTBY,
						T1.LASTMNTON,
						T1.RECORDSTATUS,
						T1.ROLECODE,
						T1.NEXTROLECODE,
						T1.TASKID,
						T1.NEXTTASKID,
						T1.RECORDTYPE,
						T1.TRANSACTIONID,
						T1.WORKFLOWID,
						T2.FEETYPECODE,
						T2.FEETYPEDESC,
						T1.STATUS,
						T1.REFUNDABLE,
						T1.INSTRUCTIONUID,
						T1.ACTPERCENTAGE,
						T1.WAIVEDGST,
						T1.REFERENCEID,
						T1.TAXHEADERID,
						T1.PAIDTDS,
						T1.REMTDS,
						T1.NETTDS
						FROM FINFEEDETAIL T1
						LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
		    		 ]]>
			</createView>
	</changeSet>

	<changeSet id="696_post" author="suraj.r" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finfeedetail_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="697_pre" author="suraj.r" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finfeedetail_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="697" author="suraj.r">
		<createView viewName="FINFEEDETAIL_TVIEW" replaceIfExists="true">
			<![CDATA[
				 SELECT T1.FEEID,
						  T1.FINREFERENCE,
						  T1.ORIGINATIONFEE,
						  T1.FINEVENT,
						  T1.FEETYPEID,
						  T1.FEESEQ,
						  T1.FEEORDER,
						  T1.CALCULATEDAMOUNT,
						  T1.ACTUALAMOUNT,
						  T1.WAIVEDAMOUNT,
						  T1.PAIDAMOUNT,
						  T1.FEESCHEDULEMETHOD,
						  T1.TERMS,
						  T1.REMAININGFEE,
						  T1.PAYMENTREF,
						  T1.CALCULATIONTYPE,
						  T1.RULECODE,
						  T1.FIXEDAMOUNT,
						  T1.PERCENTAGE,
						  T1.CALCULATEON,
						  T1.ALWDEVIATION,
						  T1.MAXWAIVERPERC,
						  T1.ALWMODIFYFEE,
						  T1.ALWMODIFYFEESCHDMTHD,
						  T1.VASREFERENCE,
						  T1.STATUS,
						  T1.TAXAPPLICABLE,
						  T1.TAXCOMPONENT,
						  T1.PAIDAMOUNTORIGINAL,
						  T1.PAIDAMOUNTGST,
						  T1.NETAMOUNTORIGINAL,
						  T1.NETAMOUNTGST,
						  T1.NETAMOUNT,
						  T1.REMAININGFEEORIGINAL,
						  T1.REMAININGFEEGST,
						  T1.ACTUALAMOUNTORIGINAL,
						  T1.ACTUALAMOUNTGST,
						  T1.FEEAMZ,
						  T1.VERSION,
						  T1.LASTMNTBY,
						  T1.LASTMNTON,
						  T1.RECORDSTATUS,
						  T1.ROLECODE,
						  T1.NEXTROLECODE,
						  T1.TASKID,
						  T1.NEXTTASKID,
						  T1.RECORDTYPE,
						  T1.TRANSACTIONID,
						  T1.WORKFLOWID,
						  T2.FEETYPECODE,
						  T2.FEETYPEDESC,
						  T1.REFUNDABLE,
						  T1.INSTRUCTIONUID,
						  T1.ACTPERCENTAGE,
						  T1.WAIVEDGST,
						  T1.REFERENCEID,
						  T1.TAXHEADERID,
						  T1.PAIDTDS,
						  T1.REMTDS,
						  T1.NETTDS
						FROM FINFEEDETAIL_TEMP T1
						LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
		    		 ]]>
			</createView>
	</changeSet>

	<changeSet id="697_post" author="suraj.r" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finfeedetail_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="698" author="Pruthvi.G">
		<sql>
			<![CDATA[
				update reportconfiguration set wherecondition=0 where menuitemcode='menu_Item_FinTypeInvestment';
			]]>
		</sql>
	</changeSet>

	<changeSet id="699" author="sudheer.t">
		<createView viewName="FinanceDeviations_view" replaceIfExists="true">
			<![CDATA[
		   SELECT t1.deviationid,
				    t1.finreference,
				    t1.module,
				    t1.deviationcode,
				    t1.deviationtype,
				    t1.userrole,
				    t1.deviationvalue,
				    t1.delegationrole,
				    t1.approvalstatus,
				    t1.deviationcategory,
				    t1.remarks,
				    t1.deviationdesc,
				    t1.markdeleted,
				    t1.deviationdate,
				    t1.deviationuserid,
				    t1.delegateduserid,
				    t1.raiseduser
				   FROM financedeviations_temp t1
				UNION ALL
				 SELECT t1.deviationid,
				    t1.finreference,
				    t1.module,
				    t1.deviationcode,
				    t1.deviationtype,
				    t1.userrole,
				    t1.deviationvalue,
				    t1.delegationrole,
				    t1.approvalstatus,
				    t1.deviationcategory,
				    t1.remarks,
				    t1.deviationdesc,
				    t1.markdeleted,
				    t1.deviationdate,
				    t1.deviationuserid,
				    t1.delegateduserid,
				    t1.raiseduser
				   FROM financedeviations t1
				  WHERE NOT (EXISTS ( SELECT 1
				           FROM financedeviations_temp
				          WHERE financedeviations_temp.deviationid = t1.deviationid))
			 ]]>
		</createView>
	</changeSet>

	<changeSet id="700" author="DurgaPrasad.G">
		<sql>
			<![CDATA[
				DELETE FROM SMTPARAMETERS WHERE SYSPARMCODE='DISPLAY_TDS_REV_SOA';
				INSERT INTO SMTPARAMETERS VALUES ('DISPLAY_TDS_REV_SOA', 'Dispaly TDS reversals in SOA required or not', 'String', 1, 'Y', 1, 0, NULL, NULL,'Dispaly TDS reversals in SOA required or not', 1, 1000, CURRENT_TIMESTAMP,'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="701" author="Gopal.p">
		<sql>
			<![CDATA[
			
				UPDATE SEQSECRIGHTS SET SEQNO = (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS);
	
				INSERT INTO SECRIGHTS values ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),0,'menuItem_SystemMaster_SourcingVendor',			'MENU',				  0,1000,CURRENT_TIMESTAMP,'','','','','','',0);
				INSERT INTO SECRIGHTS values ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'VehicleDealerDialog_SVDM_dealerName',     		'VehicleDealerDialog',0,1000,CURRENT_TIMESTAMP,'','','','','','',0);
				INSERT INTO SECRIGHTS values ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'VehicleDealerDialog_SVDM_dealerFax',      		'VehicleDealerDialog',0,1000,CURRENT_TIMESTAMP,'','','','','','',0);
				INSERT INTO SECRIGHTS values ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'VehicleDealerDialog_SVDM_dealerAddress1', 		'VehicleDealerDialog',0,1000,CURRENT_TIMESTAMP,'','','','','','',0);
				INSERT INTO SECRIGHTS values ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'VehicleDealerDialog_SVDM_dealerAddress2', 		'VehicleDealerDialog',0,1000,CURRENT_TIMESTAMP,'','','','','','',0);
				INSERT INTO SECRIGHTS values ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'VehicleDealerDialog_SVDM_dealerAddress3', 		'VehicleDealerDialog',0,1000,CURRENT_TIMESTAMP,'','','','','','',0);
				INSERT INTO SECRIGHTS values ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'VehicleDealerDialog_SVDM_dealerAddress4', 		'VehicleDealerDialog',0,1000,CURRENT_TIMESTAMP,'','','','','','',0);
				INSERT INTO SECRIGHTS values ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'VehicleDealerDialog_SVDM_dealerCountry',  		'VehicleDealerDialog',0,1000,CURRENT_TIMESTAMP,'','','','','','',0);
				INSERT INTO SECRIGHTS values ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'VehicleDealerDialog_SVDM_dealerCity',     		'VehicleDealerDialog',0,1000,CURRENT_TIMESTAMP,'','','','','','',0);
				INSERT INTO SECRIGHTS values ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'VehicleDealerDialog_SVDM_dealerProvince', 		'VehicleDealerDialog',0,1000,CURRENT_TIMESTAMP,'','','','','','',0);
				INSERT INTO SECRIGHTS values ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'VehicleDealerDialog_SVDM_PaymentMode',    		'VehicleDealerDialog',0,1000,CURRENT_TIMESTAMP,'','','','','','',0);
				INSERT INTO SECRIGHTS values ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'VehicleDealerDialog_SVDM_Emirates',       		'VehicleDealerDialog',0,1000,CURRENT_TIMESTAMP,'','','','','','',0);
				INSERT INTO SECRIGHTS values ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'VehicleDealerDialog_SVDM_Email',          		'VehicleDealerDialog',0,1000,CURRENT_TIMESTAMP,'','','','','','',0);
				INSERT INTO SECRIGHTS values ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'VehicleDealerDialog_SVDM_AccountingTreatment',  'VehicleDealerDialog',0,1000,CURRENT_TIMESTAMP,'','','','','','',0);
				INSERT INTO SECRIGHTS values ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'VehicleDealerDialog_SVDM_CommisionPaidAt',      'VehicleDealerDialog',0,1000,CURRENT_TIMESTAMP,'','','','','','',0);
				INSERT INTO SECRIGHTS values ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'VehicleDealerDialog_SVDM_CalculationRule',		'VehicleDealerDialog',0,1000,CURRENT_TIMESTAMP,'','','','','','',0);
				INSERT INTO SECRIGHTS values ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'VehicleDealerDialog_SVDM_PoBox',				'VehicleDealerDialog',0,1000,CURRENT_TIMESTAMP,'','','','','','',0);
				INSERT INTO SECRIGHTS values ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'VehicleDealerDialog_SVDM_SellerType',			'VehicleDealerDialog',0,1000,CURRENT_TIMESTAMP,'','','','','','',0);
				INSERT INTO SECRIGHTS values ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'VehicleDealerDialog_SVDM_ZipCode',				'VehicleDealerDialog',0,1000,CURRENT_TIMESTAMP,'','','','','','',0);
				INSERT INTO SECRIGHTS values ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'VehicleDealerDialog_SVDM_TaxNumber',			'VehicleDealerDialog',0,1000,CURRENT_TIMESTAMP,'','','','','','',0);
				
				INSERT INTO SECRIGHTS values ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'VehicleDealerDialog_SVDM_Active',				'VehicleDealerDialog',0,1000,CURRENT_TIMESTAMP,'','','','','','',0);
				INSERT INTO SECRIGHTS values ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'VehicleDealerDialog_SVDM_code',					'VehicleDealerDialog',0,1000,CURRENT_TIMESTAMP,'','','','','','',0);
				INSERT INTO SECRIGHTS values ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'VehicleDealerDialog_SVDM_PanNumber',			'VehicleDealerDialog',0,1000,CURRENT_TIMESTAMP,'','','','','','',0);
				INSERT INTO SECRIGHTS values ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'VehicleDealerDialog_SVDM_UidNumber',			'VehicleDealerDialog',0,1000,CURRENT_TIMESTAMP,'','','','','','',0);
				INSERT INTO SECRIGHTS values ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'VehicleDealerDialog_SVDM_FromProvince',			'VehicleDealerDialog',0,1000,CURRENT_TIMESTAMP,'','','','','','',0);
				INSERT INTO SECRIGHTS values ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'VehicleDealerDialog_SVDM_ToProvince',			'VehicleDealerDialog',0,1000,CURRENT_TIMESTAMP,'','','','','','',0);
				INSERT INTO SECRIGHTS values ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'VehicleDealerDialog_SVDM_AccountNo',			'VehicleDealerDialog',0,1000,CURRENT_TIMESTAMP,'','','','','','',0);
				INSERT INTO SECRIGHTS values ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'VehicleDealerDialog_SVDM_AccountType',			'VehicleDealerDialog',0,1000,CURRENT_TIMESTAMP,'','','','','','',0);
				INSERT INTO SECRIGHTS values ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'VehicleDealerDialog_SVDM_BankBranchId',			'VehicleDealerDialog',0,1000,CURRENT_TIMESTAMP,'','','','','','',0);
	
				UPDATE SEQSECRIGHTS SET SEQNO = (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS);
	
	
				UPDATE SEQSECGROUPS SET SEQNO = (SELECT MAX(GRPID) FROM ( SELECT GRPID FROM SECGROUPS UNION SELECT GRPID FROM SECGROUPS_TEMP)t);
	
				INSERT INTO SECGROUPS values ((SELECT MAX(GRPID)+1 FROM SECGROUPS),'SOURCING_VENDOR_MAKER','Sourcing Vendor Maker Group',0,1000,CURRENT_TIMESTAMP,' ',' ',null,' ',' ',' ',0);
	
				UPDATE SEQSECGROUPS SET SEQNO = (SELECT MAX(GRPID) FROM ( SELECT GRPID FROM SECGROUPS UNION SELECT GRPID FROM SECGROUPS_TEMP)t);
	
				UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPrightID) FROM (SELECT GRPrightID FROM SecGroupRights UNION SELECT GRPrightID FROM SecGroupRights_Temp)t);
	
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='SOURCING_VENDOR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='menuItem_SystemMaster_SourcingVendor'),     		1,0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='SOURCING_VENDOR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_SVDM_dealerName'),      		1,0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='SOURCING_VENDOR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_SVDM_dealerFax'),       		1,0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='SOURCING_VENDOR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_SVDM_dealerAddress1'),  		1,0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='SOURCING_VENDOR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_SVDM_dealerAddress2'),  		1,0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='SOURCING_VENDOR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_SVDM_dealerAddress3'),  		1,0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='SOURCING_VENDOR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_SVDM_dealerAddress4'),  		1,0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='SOURCING_VENDOR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_SVDM_dealerCountry'),   		1,0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='SOURCING_VENDOR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_SVDM_dealerCity'),      		1,0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='SOURCING_VENDOR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_SVDM_dealerProvince'),      	1,0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='SOURCING_VENDOR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_SVDM_PaymentMode'),     		1,0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='SOURCING_VENDOR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_SVDM_Emirates'),        		1,0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='SOURCING_VENDOR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_SVDM_Email'),           		1,0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='SOURCING_VENDOR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_SVDM_AccountingTreatment'),  1,0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='SOURCING_VENDOR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_SVDM_CommisionPaidAt'),      1,0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='SOURCING_VENDOR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_SVDM_CalculationRule'),      1,0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='SOURCING_VENDOR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_SVDM_PoBox'),                1,0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='SOURCING_VENDOR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_SVDM_SellerType'),           1,0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='SOURCING_VENDOR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_SVDM_ZipCode'),              1,0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='SOURCING_VENDOR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_SVDM_TaxNumber'),            1,0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='SOURCING_VENDOR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_SVDM_Active'),               1,0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='SOURCING_VENDOR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_SVDM_code'),                 1,0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='SOURCING_VENDOR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_SVDM_PanNumber'),            1,0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='SOURCING_VENDOR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_SVDM_UidNumber'),            1,0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='SOURCING_VENDOR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_SVDM_FromProvince'),         1,0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='SOURCING_VENDOR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_SVDM_ToProvince'),           1,0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='SOURCING_VENDOR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_SVDM_AccountNo'),            1,0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);			
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='SOURCING_VENDOR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_SVDM_AccountType'),          1,0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='SOURCING_VENDOR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_SVDM_BankBranchId'),         1,0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);;
			
				UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPrightID) FROM (SELECT GRPrightID FROM SecGroupRights UNION SELECT GRPrightID FROM SecGroupRights_Temp)t);
	
				Update SEQSECROLEGROUPS SET SEQNO = (Select MAX(ROLEGRPID) from SECROLEGROUPS);
	
				INSERT INTO SECROLEGROUPS values((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS),(SELECT GRPID FROM SECGROUPS WHERE GRPCODE='SOURCING_VENDOR_MAKER'),(SELECT ROLEID FROM SECROLES WHERE ROLECD='MSTGRP1_MAKER'),0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
	
				Update SEQSECROLEGROUPS SET SEQNO = (Select MAX(ROLEGRPID) from SECROLEGROUPS);
			]]>
		</sql>
	</changeSet>

	<changeSet id="702" author="Manoj.P">
		<sql>
			<![CDATA[
				Delete from SMTparameters where SysParmCode = 'ALLOW_FEE_WAIVER_IN_FORECLOSURE_ENQ';
				Insert into SMTPARAMETERS (SYSPARMCODE,SYSPARMDESC,SYSPARMTYPE,SYSPARMMAINT,SYSPARMVALUE,SYSPARMLENGTH,SYSPARMDEC,SYSPARMLIST,SYSPARMVALDMOD,SYSPARMDESCRIPTION,VERSION,LASTMNTBY,LASTMNTON,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID) values ('ALLOW_FEE_WAIVER_IN_FORECLOSURE_ENQ','Fee Waivers in ForeClosure Enquiry','String',1,'Y',3,0,null,null,' Fee Waivers in ForeClosure Enquiry',1,1000,current_timestamp,'Approved', null, null, null, null, null, 0);
			]]>
		</sql>
	</changeSet>


	<changeSet id="703" author="Manoj.P">
		<sql>
			<![CDATA[
				Delete from SMTparameters where SysParmCode = 'RPYHCY_ON_DPD_BUCKET';
				Insert into SMTPARAMETERS (SYSPARMCODE,SYSPARMDESC,SYSPARMTYPE,SYSPARMMAINT,SYSPARMVALUE,SYSPARMLENGTH,SYSPARMDEC,SYSPARMLIST,SYSPARMVALDMOD,SYSPARMDESCRIPTION,VERSION,LASTMNTBY,LASTMNTON,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID) values ('RPYHCY_ON_DPD_BUCKET','No of DPD buckets for Repay Hierarchy change','String',1,'3',3,0,null,null,' No of DPD buckets for Repay Hierarchy change',1,1000,current_timestamp,'Approved', null, null, null, null, null, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="704" author="pruthivi">
		<createView viewName="Rpt_ManualPaymentsDue_View" replaceIfExists="true">
			<![CDATA[
			select branchdesc FinBranch,
					FinBranch BranchCode,
		            T1.CustCIF,
		            T4.CustShrtName,
					T.FinReference, 
					T1.FinCcy,
					DefSchdDate,
					CcyEditField,
					T1.FinIsActive,
					T5.FinDivision,
					CCYISRECEPROCAL,
					CCYSPOTRATE,
					CCYMINORCCYUNITS,
					(select CcySpotRate TargetCcySpotRate from
					RMTCurrencies where CcyCode in
					(Select SysParmValue from SMTparameters where
					SysParmcode='APP_DFT_CURR'))TARGETCCYSPOTRATE,
					ProfitSchd,
					SchdPftPaid,
					PrincipalSchd,
					SchdPriPaid,
					(select
					cast(SysParmValue as date) from SMTparameters where SysParmCode = 'APP_NEXT_BUS_DATE')BussDate
					from FinScheduleDetails T
					INNER JOIN FinPftDetails T1 ON T.FinReference = T1.FinReference
					inner join RMTCurrencies C on C.ccyCode=T1.FinCcy
					INNER JOIN RMTBranches T2 ON T2.BranchCode=FinBranch 
					INNER JOIN Customers T4 ON T4.CustId = T1.CustId
					Inner jOin RMTFinanceTypes T5 ON T5.FinType = T1.FinType
					where T1.FinReference like '%0016%' and
					DefSchdDate < (select
					cast(SysParmValue as date) from SMTparameters where SysParmCode = 'APP_NEXT_BUS_DATE')
					AND RepayOnSchDate = 1 AND
					((ProfitSchd - SchdPftPaid) > 0 OR (PrincipalSchd - SchdPriPaid) > 0 )
					AND (T1.ClosingStatus !='C' or T1.ClosingStatus
					is null)
		 ]]>
		</createView>
	</changeSet>

	<changeSet id="705" author="Durga Prasad G">
		<sql>
			<![CDATA[
			    UPDATE SMTPARAMETERS SET SYSPARMMAINT=0 WHERE SYSPARMCODE='ALLOW_MANUAL_ADV_DUE_CREATION';
			]]>
		</sql>
	</changeSet>

	<changeSet id="707" author="Gopal.p">
		<sql>
			<![CDATA[
				Delete from SMTparameters where SysParmCode = 'CHECK_USER_ACCESS_AUTHORITY';
				Insert into SMTPARAMETERS (SYSPARMCODE, SYSPARMDESC, SYSPARMTYPE, SYSPARMMAINT, SYSPARMVALUE, SYSPARMLENGTH, SYSPARMDEC, SYSPARMLIST, SYSPARMVALDMOD, SYSPARMDESCRIPTION, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ('CHECK_USER_ACCESS_AUTHORITY','Check whether User access allowed or not?', 'String', 1, 'N', 1, 0, null, null, 'Check whether User access allowed or not?', 1, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="708.1" author="yelladas.n">
		<createView viewName="CollateralCoOwners_View" replaceIfExists="true">
			<![CDATA[
				SELECT	T1.CollateralRef, 
			            T1.CoOwnerId,
			            T1.CustomerId, 
			            T1.BankCustomer, 
			            T1.CoOwnerIDType, 
			            T1.CoOwnerIDNumber, 		
			            T1.CoOwnerCIFName, 
			            T1.CoOwnerPercentage, 
			            T1.MobileNo, 
			            T1.EmailId, 
			            T1.CoOwnerProofName, 
			            T1.Remarks, 				
		            	T1.Version, 
			            T1.LastMntBy, 
			            T1.LastMntOn, 
			            T1.RecordStatus, 
			            T1.RoleCode, 
			            T1.NextRoleCode, 
			            T1.TaskId, 				
			            T1.NextTaskId,
			            T1.RecordType, 
			            T1.WorkflowId, 
			            T1.AddrHNbr, 
			            T1.FlatNbr, 
			            T1.AddrStreet, 
			            T1.AddrLine1, 			
		             	T1.AddrLine2, 
		             	T1.POBox, 
		             	T1.AddrCity, 
		             	T1.AddrProvince, 
		             	T1.AddrCountry, 
		             	T1.AddrZIP, 
		             	T1.CoOwnerProof,
			            T2.CustCIF as CoOwnerCIF 
			            FROM  CollateralCoOwners_Temp T1
			            INNER JOIN CUSTOMERS T2 ON T2.CUSTID = T1.CustomerId
			            UNION ALL
			     SELECT	T1.CollateralRef, 
			            T1.CoOwnerId,
			            T1.CustomerId, 
			            T1.BankCustomer, 
			            T1.CoOwnerIDType, 
			            T1.CoOwnerIDNumber, 		
						T1.CoOwnerCIFName, 
						T1.CoOwnerPercentage, 
						T1.MobileNo, 
						T1.EmailId, 
						T1.CoOwnerProofName, 
						T1.Remarks, 				
						T1.Version, 
						T1.LastMntBy, 
						T1.LastMntOn, 
						T1.RecordStatus, 
						T1.RoleCode, 
						T1.NextRoleCode, 
						T1.TaskId, 				
						T1.NextTaskId, 
						T1.RecordType, 
						T1.WorkflowId, 
						T1.AddrHNbr, 
						T1.FlatNbr, 
						T1.AddrStreet, 
						T1.AddrLine1, 			
						T1.AddrLine2, 
						T1.POBox, 
						T1.AddrCity,
					    T1.AddrProvince, 
					    T1.AddrCountry, 
					    T1.AddrZIP, 
					    T1.CoOwnerProof,
						T2.CustCIF as CoOwnerCIF  
			            FROM  CollateralCoOwners T1
			            INNER JOIN CUSTOMERS T2 ON T2.CUSTID = T1.CustomerId
			            WHERE  NOT EXISTS (SELECT 1 FROM CollateralCoOwners_Temp WHERE CoOwnerId = T1.CoOwnerId AND CollateralRef = T1.CollateralRef)
			            ]]>
		</createView>
	</changeSet>

	<changeSet id="709.1" author="yelladas.n">
		<createView viewName="CollateralCoOwners_AView" replaceIfExists="true">
			<![CDATA[
			SELECT	T1.CollateralRef, 
		            T1.CoOwnerId,
		            T1.CustomerId, 
		            T1.BankCustomer, 
		            T1.CoOwnerIDType, 
		            T1.CoOwnerIDNumber, 		
					T1.CoOwnerCIFName, 
					T1.CoOwnerPercentage, 
					T1.MobileNo, 
					T1.EmailId, 
					T1.CoOwnerProofName, 
					T1.Remarks, 				
					T1.Version, 
					T1.LastMntBy, 
					T1.LastMntOn, 
					T1.RecordStatus, 
					T1.RoleCode, 
					T1.NextRoleCode, 
					T1.TaskId, 				
					T1.NextTaskId, 
					T1.RecordType, 
					T1.WorkflowId, 
					T1.AddrHNbr, 
					T1.FlatNbr, 
					T1.AddrStreet, 
					T1.AddrLine1, 			
					T1.AddrLine2, 
					T1.POBox, 
					T1.AddrCity, 
					T1.AddrProvince, 
					T1.AddrCountry, 
					T1.AddrZIP, 
					T1.CoOwnerProof,
					T2.CustCIF as CoOwnerCIF  
		            FROM   CollateralCoOwners T1
		            INNER JOIN CUSTOMERS T2 ON T2.CUSTID = T1.CustomerId
		            ]]>
		</createView>
	</changeSet>
	<changeSet id="710" author="narebdra.m">
		<sql>
			<![CDATA[
                Delete from smtparameters where sysparmcode = 'LMS_SERVICE_LOG_ALERTS_SCHD_TIME';
                Insert into SMTPARAMETERS (SYSPARMCODE, SYSPARMDESC, SYSPARMTYPE, SYSPARMMAINT, SYSPARMVALUE, SYSPARMLENGTH, SYSPARMDEC, SYSPARMLIST, SYSPARMVALDMOD, SYSPARMDESCRIPTION, VERSION,LASTMNTBY,LASTMNTON,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID) values ('LMS_SERVICE_LOG_ALERTS_SCHD_TIME',' LMS Service LogAlert Scedule Time ','String',1,'0 0/59 * 1/1 * ? *',1,0,null,null,'LMS Service LogAlert Scedule Time',1,1000,current_timestamp,'Approved',null,null,null,null,null,0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="711_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'collateralcoowners_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="711" author="satyanarayana.g">
		<createView viewName="CollateralCoOwners_AView" replaceIfExists="true">
			<![CDATA[
			     SELECT T1.CollateralRef, 
			            T1.CoOwnerId,
			            T1.CustomerId, 
			            T1.BankCustomer, 
			            T1.CoOwnerIDType, 
			            T1.CoOwnerIDNumber, 		
						T1.CoOwnerCIFName, 
						T1.CoOwnerPercentage, 
						T1.MobileNo, 
						T1.EmailId, 
						T1.CoOwnerProofName, 
						T1.Remarks, 				
						T1.Version, 
						T1.LastMntBy, 
						T1.LastMntOn, 
						T1.RecordStatus, 
						T1.RoleCode, 
						T1.NextRoleCode, 
						T1.TaskId, 				
						T1.NextTaskId, 
						T1.RecordType, 
						T1.WorkflowId, 
						T1.AddrHNbr, 
						T1.FlatNbr, 
						T1.AddrStreet, 
						T1.AddrLine1, 			
						T1.AddrLine2, 
						T1.POBox, 
						T1.AddrCity, 
						T1.AddrProvince, 
						T1.AddrCountry, 
						T1.AddrZIP, 
						T1.CoOwnerProof,
						T2.CustCIF as CoOwnerCIF
			            FROM   CollateralCoOwners T1
			            LEFT JOIN CUSTOMERS T2 ON T2.CUSTID = T1.CustomerId
					]]>
		</createView>
	</changeSet>

	<changeSet id="711_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'collateralcoowners_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="712_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'collateralcoowners_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="712" author="satyanarayana.g">
		<createView viewName="CollateralCoOwners_View" replaceIfExists="true">
			<![CDATA[
			     SELECT	T1.CollateralRef, 
			            T1.CoOwnerId,
			            T1.CustomerId, 
			            T1.BankCustomer, 
			            T1.CoOwnerIDType, 
			            T1.CoOwnerIDNumber, 		
			            T1.CoOwnerCIFName, 
			            T1.CoOwnerPercentage, 
			            T1.MobileNo, 
			            T1.EmailId, 
			            T1.CoOwnerProofName, 
			            T1.Remarks, 				
		            	T1.Version, 
			            T1.LastMntBy, 
			            T1.LastMntOn, 
			            T1.RecordStatus, 
			            T1.RoleCode, 
			            T1.NextRoleCode, 
			            T1.TaskId, 				
			            T1.NextTaskId,
			            T1.RecordType, 
			            T1.WorkflowId, 
			            T1.AddrHNbr, 
			            T1.FlatNbr, 
			            T1.AddrStreet, 
			            T1.AddrLine1, 			
		             	T1.AddrLine2, 
		             	T1.POBox, 
		             	T1.AddrCity, 
		             	T1.AddrProvince, 
		             	T1.AddrCountry, 
		             	T1.AddrZIP, 
		             	T1.CoOwnerProof,
			            T2.CustCIF as CoOwnerCIF 
			            FROM  CollateralCoOwners_Temp T1
			            LEFT JOIN CUSTOMERS T2 ON T2.CUSTID = T1.CustomerId
			            UNION ALL
			     SELECT	T1.CollateralRef, 
			            T1.CoOwnerId,
			            T1.CustomerId, 
			            T1.BankCustomer, 
			            T1.CoOwnerIDType, 
			            T1.CoOwnerIDNumber, 		
						T1.CoOwnerCIFName, 
						T1.CoOwnerPercentage, 
						T1.MobileNo, 
						T1.EmailId, 
						T1.CoOwnerProofName, 
						T1.Remarks, 				
						T1.Version, 
						T1.LastMntBy, 
						T1.LastMntOn, 
						T1.RecordStatus, 
						T1.RoleCode, 
						T1.NextRoleCode, 
						T1.TaskId, 				
						T1.NextTaskId, 
						T1.RecordType, 
						T1.WorkflowId, 
						T1.AddrHNbr, 
						T1.FlatNbr, 
						T1.AddrStreet, 
						T1.AddrLine1, 			
						T1.AddrLine2, 
						T1.POBox, 
						T1.AddrCity,
					    T1.AddrProvince, 
					    T1.AddrCountry, 
					    T1.AddrZIP, 
					    T1.CoOwnerProof,
						T2.CustCIF as CoOwnerCIF  
			            FROM  CollateralCoOwners T1
			            LEFT JOIN CUSTOMERS T2 ON T2.CUSTID = T1.CustomerId
			            WHERE  NOT EXISTS (SELECT 1 FROM CollateralCoOwners_Temp WHERE CoOwnerId = T1.CoOwnerId AND CollateralRef = T1.CollateralRef)
					]]>
		</createView>
	</changeSet>

	<changeSet id="712_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'collateralcoowners_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="713" author="satyanarayana.g">
		<sql>
			<![CDATA[
			    UPDATE SMTPARAMETERS SET SYSPARMMAINT= 0 WHERE SYSPARMCODE='CHECK_USER_ACCESS_AUTHORITY';
			]]>
		</sql>
	</changeSet>

	<changeSet id="714_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemain_lview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="714" author="satyanarayana.g">
		<createView viewName="FINANCEMAIN_LVIEW" replaceIfExists="true">
			<![CDATA[
			    SELECT T1.FINREFERENCE,
				    T1.INVESTMENTREF,
				    T1.FINTYPE,
				    T1.FINCCY,
				    T1.FINAMOUNT,
				    T1.DOWNPAYMENT,
				    T1.FEECHARGEAMT,
				    T1.SCHEDULEMETHOD,
				    T1.NUMBEROFTERMS,
				    T1.RECORDSTATUS,
				    T1.RECORDTYPE,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.FINBRANCH,
				    T1.FINCONTRACTDATE,
				    T1.LINKEDFINREF,
				    T1.NEXTUSERID,
				    T1.PRIORITY,
				    T1.WORKFLOWID,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.FINPREAPPROVEDREF,
				    T1.RCDMAINTAINSTS,
				    T1.INSURANCEAMT,
				    T1.FINCURRASSETVALUE,
				    T1.CALTERMS,
				    T1.DEVIATIONAPPROVAL,
				    T1.FINPURPOSE,
				    T1.INITIATEDATE,
				    T1.FINASSETVALUE,
				    T2.CUSTCIF AS LOVDESCCUSTCIF,
				    T2.CUSTSHRTNAME AS LOVDESCCUSTSHRTNAME,
				    T2.CUSTPASSPORTNO AS LOVDESCCUSTPASSPORTNO,
				    T2.CUSTDOB AS LOVDESCCUSTDOB,
				    T2.CUSTCRCPR AS LOVDESCCUSTCRCPR,
				    T2.PHONENUMBER,
				    T3.FINCATEGORY AS LOVDESCPRODUCTCODENAME,
				    T3.FINDIVISION AS LOVDESCFINDIVISION,
				    T3.PRODUCT AS LOVDESCFINPRODUCT,
				    T3.FINTYPEDESC AS LOVDESCFINTYPENAME,
				    COALESCE(T4.ROLEDESC, ${add.schema}FN_GET_ROLEDESC(T1.NEXTROLECODE)) AS LOVDESCREQUESTSTAGE,
				    T1.SAMPLINGREQUIRED,
				    T1.ADVANCEEMI,
				    T1.ADVEMITERMS,
				    T1.BPIPFTDAYSBASIS,
				    T1.GRACETERMS,
				    T1.PRODUCTCATEGORY,
				    T1.VERSION
				    FROM FINANCEMAIN_TEMP T1
				    JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
				    JOIN RMTFINANCETYPES T3 ON T3.FINTYPE = T1.FINTYPE
				    LEFT JOIN SECROLES T4 ON T1.NEXTROLECODE = T4.ROLECD
					]]>
		</createView>
	</changeSet>

	<changeSet id="714_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_lview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="715" author="satyanarayana.g">
		<sql>
			<![CDATA[
			    UPDATE SMTPARAMETERS SET SYSPARMMAINT= 1 WHERE SYSPARMCODE='CHECK_USER_ACCESS_AUTHORITY';
			]]>
		</sql>
	</changeSet>

	<changeSet id="716_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemaintenance_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="716" author="satyanarayana.g" dbms="oracle,postgresql">
		<createView viewName="FINANCEMAINTENANCE_VIEW" replaceIfExists="true">
			<![CDATA[
			   SELECT T1.FINREFERENCE,
						T1.FINBRANCH,
						T1.FINTYPE,
						T1.FINCCY,
						T1.SCHEDULEMETHOD,
						T1.PROFITDAYSBASIS,
						T1.FINSTARTDATE,
						T1.NUMBEROFTERMS,
						T1.CUSTID,
						T1.FINAMOUNT,
						T1.MATURITYDATE,
						T1.FINREPAYMENTAMOUNT,
						T1.FINISACTIVE,
						T1.BLACKLISTED,
						T1.FEECHARGEAMT,
						T1.INSURANCEAMT,
						T1.GRACETERMS,
						T1.ALLOWGRCPERIOD,
						T1.GRCPERIODENDDATE,
						T1.ALWMULTIDISB,
						T1.DEFFERMENTS,
						T1.NEXTROLECODE,
						T1.RECORDSTATUS,
						T1.RECORDTYPE,
						T1.ALLOWGRCPFTRVW,
						T1.ALLOWREPAYRVW,
						T1.LASTREPAYDATE,
						T1.LASTREPAYPFTDATE,
						T1.ALLOWEDDEFRPYCHANGE,
						T1.AVAILEDDEFRPYCHANGE,
						T1.RCDMAINTAINSTS,
						T1.MIGRATEDFINANCE,
						T1.CLOSINGSTATUS,
						T1.REPAYRATEBASIS,
						T1.MANUALSCHEDULE,
						T1.FINCURRASSETVALUE,
						T1.TAKEOVERFINANCE,
						T1.NEXTROLLOVERDATE,
						T1.AVAILEDUNPLANEMI,
						T1.AVAILEDREAGEH,
						T1.MAXUNPLANNEDEMI,
						T1.MAXREAGEHOLIDAYS,
						T1.DOWNPAYMENT,
						T1.PLANEMIHALW,
						T1.CALTERMS,
						T1.RATECHGANYDAY,
						T1.FINASSETVALUE,
						T2.CUSTCIF AS LOVDESCCUSTCIF,
						T3.FINISALWDIFFERMENT AS LOVDESCFINALWDEFERMENT,
						T3.FINDIVISION AS LOVDESCFINDIVISION,
						T3.FINCATEGORY AS LOVDESCPRODUCTCODENAME,
						T4.PRODUCTCATEGORY,
						COALESCE(T5.ROLEDESC, FN_GET_ROLEDESC(T1.NEXTROLECODE)) AS LOVDESCREQUESTSTAGE,
						COALESCE(T9.NOINST, 0) AS NOINST,
						T1.SAMPLINGREQUIRED,
						T1.ADVEMITERMS,
						T1.SANBSDSCHDLE,
						T1.PROMOTIONSEQID,
						T1.SVAMOUNT,
						T1.CBAMOUNT,
						T1.REPAYPFTFRQ,
						T1.VERSION
						FROM FINANCEMAIN_TEMP T1
						JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
						JOIN RMTFINANCETYPES T3 ON T1.FINTYPE = T3.FINTYPE
						LEFT JOIN SECROLES T5 ON T1.NEXTROLECODE = T5.ROLECD
						JOIN BMTPRODUCT T4 ON T3.FINCATEGORY = T4.PRODUCTCODE
						LEFT JOIN FINPFTDETAILS T9 ON T1.FINREFERENCE = T9.FINREFERENCE
						UNION ALL
						SELECT T1.FINREFERENCE,
						T1.FINBRANCH,
						T1.FINTYPE,
						T1.FINCCY,
						T1.SCHEDULEMETHOD,
						T1.PROFITDAYSBASIS,
						T1.FINSTARTDATE,
						T1.NUMBEROFTERMS,
						T1.CUSTID,
						T1.FINAMOUNT,
						T1.MATURITYDATE,
						T1.FINREPAYMENTAMOUNT,
						T1.FINISACTIVE,
						T1.BLACKLISTED,
						T1.FEECHARGEAMT,
						T1.INSURANCEAMT,
						T1.GRACETERMS,
						T1.ALLOWGRCPERIOD,
						T1.GRCPERIODENDDATE,
						T1.ALWMULTIDISB,
						T1.DEFFERMENTS,
						T1.NEXTROLECODE,
						T1.RECORDSTATUS,
						T1.RECORDTYPE,
						T1.ALLOWGRCPFTRVW,
						T1.ALLOWREPAYRVW,
						T1.LASTREPAYDATE,
						T1.LASTREPAYPFTDATE,
						T1.ALLOWEDDEFRPYCHANGE,
						T1.AVAILEDDEFRPYCHANGE,
						T1.RCDMAINTAINSTS,
						T1.MIGRATEDFINANCE,
						T1.CLOSINGSTATUS,
						T1.REPAYRATEBASIS,
						T1.MANUALSCHEDULE,
						T1.FINCURRASSETVALUE,
						T1.TAKEOVERFINANCE,
						T1.NEXTROLLOVERDATE,
						T1.AVAILEDUNPLANEMI,
						T1.AVAILEDREAGEH,
						T1.MAXUNPLANNEDEMI,
						T1.MAXREAGEHOLIDAYS,
						T1.DOWNPAYMENT,
						T1.PLANEMIHALW,
						T1.CALTERMS,
						T1.RATECHGANYDAY,
						T1.FINASSETVALUE,
						T2.CUSTCIF AS LOVDESCCUSTCIF,
						T3.FINISALWDIFFERMENT AS LOVDESCFINALWDEFERMENT,
						T3.FINDIVISION AS LOVDESCFINDIVISION,
						T3.FINCATEGORY AS LOVDESCPRODUCTCODENAME,
						T4.PRODUCTCATEGORY,
						COALESCE(T5.ROLEDESC, FN_GET_ROLEDESC(T1.NEXTROLECODE)) AS LOVDESCREQUESTSTAGE,
						COALESCE(T9.NOINST, 0) AS NOINST,
						T1.SAMPLINGREQUIRED,
						T1.ADVEMITERMS,
						T1.SANBSDSCHDLE,
						T1.PROMOTIONSEQID,
						T1.SVAMOUNT,
						T1.CBAMOUNT,
						T1.REPAYPFTFRQ,
						T1.VERSION
						FROM FINANCEMAIN T1
						JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
						JOIN RMTFINANCETYPES T3 ON T1.FINTYPE = T3.FINTYPE
						LEFT JOIN SECROLES T5 ON T1.NEXTROLECODE = T5.ROLECD
						JOIN BMTPRODUCT T4 ON T3.FINCATEGORY = T4.PRODUCTCODE
						LEFT JOIN FINPFTDETAILS T9 ON T1.FINREFERENCE = T9.FINREFERENCE
						WHERE NOT (EXISTS ( SELECT 1 AS EXPR1
						FROM FINANCEMAIN_TEMP
						WHERE FINANCEMAIN_TEMP.FINREFERENCE = T1.FINREFERENCE))
					]]>
		</createView>
	</changeSet>

	<changeSet id="716_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemaintenance_view');
			]]>
		</sql>
	</changeSet>


	<changeSet id="717_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'feewaivers_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="717" author="satyanarayana.g" dbms="oracle,postgresql">
		<createView viewName="FEEWAIVERS_VIEW" replaceIfExists="true">
			<![CDATA[
			  SELECT DISTINCT T1.FINREFERENCE,
								T1.FINBRANCH,
								T1.FINTYPE,
								T1.FINCCY,
								T1.SCHEDULEMETHOD,
								T1.PROFITDAYSBASIS,
								T1.FINSTARTDATE,
								T1.NUMBEROFTERMS,
								T1.CUSTID,
								T1.FINAMOUNT,
								T1.MATURITYDATE,
								T1.FINREPAYMENTAMOUNT,
								T1.FINISACTIVE,
								T1.BLACKLISTED,
								T1.FEECHARGEAMT,
								T1.INSURANCEAMT,
								T1.GRACETERMS,
								T1.ALLOWGRCPERIOD,
								T1.GRCPERIODENDDATE,
								T1.ALWMULTIDISB,
								T1.DEFFERMENTS,
								T1.ALLOWGRCPFTRVW,
								T1.ALLOWREPAYRVW,
								T1.LASTREPAYDATE,
								T1.LASTREPAYPFTDATE,
								T1.ALLOWEDDEFRPYCHANGE,
								T1.AVAILEDDEFRPYCHANGE,
								T1.MIGRATEDFINANCE,
								T1.CLOSINGSTATUS,
								T1.REPAYRATEBASIS,
								T1.MANUALSCHEDULE,
								T1.FINCURRASSETVALUE,
								T1.TAKEOVERFINANCE,
								T1.NEXTROLLOVERDATE,
								T1.AVAILEDUNPLANEMI,
								T1.AVAILEDREAGEH,
								T1.MAXUNPLANNEDEMI,
								T1.MAXREAGEHOLIDAYS,
								T1.DOWNPAYMENT,
								T1.PLANEMIHALW,
								T1.CALTERMS,
								T1.RATECHGANYDAY,
								T1.FINASSETVALUE,
								T2.CUSTCIF AS LOVDESCCUSTCIF,
								T3.FINISALWDIFFERMENT AS LOVDESCFINALWDEFERMENT,
								T3.FINDIVISION AS LOVDESCFINDIVISION,
								T3.FINCATEGORY AS LOVDESCPRODUCTCODENAME,
								T4.PRODUCTCATEGORY,
								COALESCE(T9.NOINST, 0) AS NOINST,
								COALESCE(T5.ROLEDESC, (T10.NEXTROLECODE)) AS LOVDESCREQUESTSTAGE,
								T10.WAIVERID,
								T10.EVENT AS RCDMAINTAINSTS,
								T10.NEXTROLECODE,
								T10.RECORDSTATUS,
								T10.RECORDTYPE,
								T1.VERSION
								FROM FEEWAIVERHEADER_TEMP T10
								JOIN FINANCEMAIN T1 ON T1.FINREFERENCE = T10.FINREFERENCE
								JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
								JOIN RMTFINANCETYPES T3 ON T1.FINTYPE = T3.FINTYPE
								LEFT JOIN SECROLES T5 ON T10.NEXTROLECODE = T5.ROLECD
								JOIN BMTPRODUCT T4 ON T3.FINCATEGORY = T4.PRODUCTCODE
								LEFT JOIN FINPFTDETAILS T9 ON T1.FINREFERENCE = T9.FINREFERENCE
								JOIN (( SELECT MANUALADVISE.FINREFERENCE
								FROM MANUALADVISE
								WHERE MANUALADVISE.ADVISETYPE = 1 AND (MANUALADVISE.ADVISEAMOUNT - MANUALADVISE.PAIDAMOUNT - MANUALADVISE.WAIVEDAMOUNT) > 0)
								UNION ALL
								(SELECT FINODDETAILS.FINREFERENCE
								FROM FINODDETAILS
								WHERE FINODDETAILS.TOTPENALTYBAL > 0 OR FINODDETAILS.LPIBAL > 0)) T ON T.FINREFERENCE = T1.FINREFERENCE
								WHERE T10.EVENT = 'FEEWAIVERS'
								UNION ALL
								SELECT DISTINCT T1.FINREFERENCE,
								T1.FINBRANCH,
								T1.FINTYPE,
								T1.FINCCY,
								T1.SCHEDULEMETHOD,
								T1.PROFITDAYSBASIS,
								T1.FINSTARTDATE,
								T1.NUMBEROFTERMS,
								T1.CUSTID,
								T1.FINAMOUNT,
								T1.MATURITYDATE,
								T1.FINREPAYMENTAMOUNT,
								T1.FINISACTIVE,
								T1.BLACKLISTED,
								T1.FEECHARGEAMT,
								T1.INSURANCEAMT,
								T1.GRACETERMS,
								T1.ALLOWGRCPERIOD,
								T1.GRCPERIODENDDATE,
								T1.ALWMULTIDISB,
								T1.DEFFERMENTS,
								T1.ALLOWGRCPFTRVW,
								T1.ALLOWREPAYRVW,
								T1.LASTREPAYDATE,
								T1.LASTREPAYPFTDATE,
								T1.ALLOWEDDEFRPYCHANGE,
								T1.AVAILEDDEFRPYCHANGE,
								T1.MIGRATEDFINANCE,
								T1.CLOSINGSTATUS,
								T1.REPAYRATEBASIS,
								T1.MANUALSCHEDULE,
								T1.FINCURRASSETVALUE,
								T1.TAKEOVERFINANCE,
								T1.NEXTROLLOVERDATE,
								T1.AVAILEDUNPLANEMI,
								T1.AVAILEDREAGEH,
								T1.MAXUNPLANNEDEMI,
								T1.MAXREAGEHOLIDAYS,
								T1.DOWNPAYMENT,
								T1.PLANEMIHALW,
								T1.CALTERMS,
								T1.RATECHGANYDAY,
								T1.FINASSETVALUE,
								T2.CUSTCIF AS LOVDESCCUSTCIF,
								T3.FINISALWDIFFERMENT AS LOVDESCFINALWDEFERMENT,
								T3.FINDIVISION AS LOVDESCFINDIVISION,
								T3.FINCATEGORY AS LOVDESCPRODUCTCODENAME,
								T4.PRODUCTCATEGORY,
								COALESCE(T9.NOINST, 0) AS NOINST,
								NULL AS LOVDESCREQUESTSTAGE,
								0  AS WAIVERID,
								NULL AS RCDMAINTAINSTS,
								NULL AS NEXTROLECODE,
								NULL AS RECORDSTATUS,
								NULL AS RECORDTYPE,
								T1.VERSION
								FROM FINANCEMAIN T1
								JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
								JOIN RMTFINANCETYPES T3 ON T1.FINTYPE = T3.FINTYPE
								LEFT JOIN SECROLES T5 ON T1.NEXTROLECODE = T5.ROLECD
								JOIN BMTPRODUCT T4 ON T3.FINCATEGORY = T4.PRODUCTCODE
								LEFT JOIN FINPFTDETAILS T9 ON T1.FINREFERENCE = T9.FINREFERENCE
								JOIN (( SELECT MANUALADVISE.FINREFERENCE
								FROM MANUALADVISE
								WHERE MANUALADVISE.ADVISETYPE = 1 AND (MANUALADVISE.ADVISEAMOUNT - MANUALADVISE.PAIDAMOUNT - MANUALADVISE.WAIVEDAMOUNT) > 0)
								UNION ALL
								(SELECT FINODDETAILS.FINREFERENCE
								FROM FINODDETAILS
								WHERE FINODDETAILS.TOTPENALTYBAL > 0 OR FINODDETAILS.LPIBAL > 0)) T ON T.FINREFERENCE = T1.FINREFERENCE
								WHERE NOT (EXISTS ( SELECT 1 AS EXPR1
								FROM FEEWAIVERHEADER_TEMP
								WHERE FEEWAIVERHEADER_TEMP.FINREFERENCE = T1.FINREFERENCE))
						]]>
			</createView>
	</changeSet>

	<changeSet id="717_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'feewaivers_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="718_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'covenantsmaintenance_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="718" author="satyanarayana.g" dbms="oracle,postgresql">
		<createView viewName="COVENANTSMAINTENANCE_VIEW" replaceIfExists="true">
			<![CDATA[
			   SELECT T1.FINREFERENCE,
						T1.FINBRANCH,
						T1.FINTYPE,
						T1.FINCCY,
						T1.SCHEDULEMETHOD,
						T1.PROFITDAYSBASIS,
						T1.FINSTARTDATE,
						T1.NUMBEROFTERMS,
						T1.CUSTID,
						T1.FINAMOUNT,
						T1.MATURITYDATE,
						T1.FINREPAYMENTAMOUNT,
						T1.FINISACTIVE,
						T1.BLACKLISTED,
						T1.FEECHARGEAMT,
						T1.INSURANCEAMT,
						T1.GRACETERMS,
						T1.ALLOWGRCPERIOD,
						T1.GRCPERIODENDDATE,
						T1.ALWMULTIDISB,
						T1.DEFFERMENTS,
						T1.ALLOWGRCPFTRVW,
						T1.ALLOWREPAYRVW,
						T1.LASTREPAYDATE,
						T1.LASTREPAYPFTDATE,
						T1.ALLOWEDDEFRPYCHANGE,
						T1.AVAILEDDEFRPYCHANGE,
						T1.MIGRATEDFINANCE,
						T1.CLOSINGSTATUS,
						T1.REPAYRATEBASIS,
						T1.MANUALSCHEDULE,
						T1.FINCURRASSETVALUE,
						T1.TAKEOVERFINANCE ,
						T1.NEXTROLLOVERDATE,
						T1.AVAILEDUNPLANEMI,
						T1.AVAILEDREAGEH,
						T1.MAXUNPLANNEDEMI,
						T1.MAXREAGEHOLIDAYS,
						T1.DOWNPAYMENT,
						T1.PLANEMIHALW,
						T1.CALTERMS,
						T1.RATECHGANYDAY,
						T1.FINASSETVALUE,
						T2.CUSTCIF LOVDESCCUSTCIF,
						T3.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
						T3.FINDIVISION LOVDESCFINDIVISION,
						T3.FINCATEGORY LOVDESCPRODUCTCODENAME,
						T4.PRODUCTCATEGORY,
						COALESCE(T9.NOINST,0) NOINST,
						COALESCE(T5.ROLEDESC, FN_GET_ROLEDESC(T10.NEXTROLECODE)) LOVDESCREQUESTSTAGE,
						T10.FINMAINTAINID,
						T10.EVENT RCDMAINTAINSTS,
						T10.NEXTROLECODE,
						T10.RECORDSTATUS,
						T10.RECORDTYPE,
						T1.VERSION
						FROM FINMAINTAININSTRUCTIONS_TEMP T10
						INNER JOIN FINANCEMAIN T1 ON T1.FINREFERENCE = T10.FINREFERENCE
						INNER JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
						INNER JOIN RMTFINANCETYPES T3 ON T1.FINTYPE = T3.FINTYPE
						LEFT OUTER JOIN SECROLES T5 ON T10.NEXTROLECODE = T5.ROLECD
						INNER JOIN BMTPRODUCT T4 ON T3.FINCATEGORY = T4.PRODUCTCODE
						LEFT JOIN FINPFTDETAILS T9 ON T1.FINREFERENCE = T9.FINREFERENCE
						WHERE T10.EVENT    = 'COVENANTS'
						UNION ALL
						SELECT T1.FINREFERENCE,
						T1.FINBRANCH,
						T1.FINTYPE,
						T1.FINCCY,
						T1.SCHEDULEMETHOD,
						T1.PROFITDAYSBASIS,
						T1.FINSTARTDATE,
						T1.NUMBEROFTERMS,
						T1.CUSTID,
						T1.FINAMOUNT,
						T1.MATURITYDATE,
						T1.FINREPAYMENTAMOUNT,
						T1.FINISACTIVE,
						T1.BLACKLISTED,
						T1.FEECHARGEAMT,
						T1.INSURANCEAMT,
						T1.GRACETERMS,
						T1.ALLOWGRCPERIOD,
						T1.GRCPERIODENDDATE,
						T1.ALWMULTIDISB,
						T1.DEFFERMENTS,
						T1.ALLOWGRCPFTRVW,
						T1.ALLOWREPAYRVW,
						T1.LASTREPAYDATE,
						T1.LASTREPAYPFTDATE,
						T1.ALLOWEDDEFRPYCHANGE,
						T1.AVAILEDDEFRPYCHANGE,
						T1.MIGRATEDFINANCE,
						T1.CLOSINGSTATUS,
						T1.REPAYRATEBASIS,
						T1.MANUALSCHEDULE,
						T1.FINCURRASSETVALUE,
						T1.TAKEOVERFINANCE ,
						T1.NEXTROLLOVERDATE,
						T1.AVAILEDUNPLANEMI,
						T1.AVAILEDREAGEH,
						T1.MAXUNPLANNEDEMI,
						T1.MAXREAGEHOLIDAYS,
						T1.DOWNPAYMENT,
						T1.PLANEMIHALW,
						T1.CALTERMS,
						T1.RATECHGANYDAY,
						T1.FINASSETVALUE,
						T2.CUSTCIF LOVDESCCUSTCIF,
						T3.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
						T3.FINDIVISION LOVDESCFINDIVISION,
						T3.FINCATEGORY LOVDESCPRODUCTCODENAME,
						T4.PRODUCTCATEGORY,
						COALESCE(T9.NOINST,0) NOINST,
						NULL LOVDESCREQUESTSTAGE,
						NULL FINMAINTAINID,
						NULL RCDMAINTAINSTS,
						NULL NEXTROLECODE,
						NULL RECORDSTATUS,
						NULL RECORDTYPE,
						T1.VERSION
						FROM FINANCEMAIN T1
						INNER JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
						INNER JOIN RMTFINANCETYPES T3 ON T1.FINTYPE = T3.FINTYPE
						LEFT OUTER JOIN SECROLES T5 ON T1.NEXTROLECODE = T5.ROLECD
						INNER JOIN BMTPRODUCT T4 ON T3.FINCATEGORY = T4.PRODUCTCODE
						LEFT JOIN FINPFTDETAILS T9 ON T1.FINREFERENCE = T9.FINREFERENCE
						WHERE (NOT EXISTS
						(SELECT 1 EXPR1
						FROM FINMAINTAININSTRUCTIONS_TEMP
						WHERE (FINREFERENCE = T1.FINREFERENCE)
						))
					]]>
		</createView>
	</changeSet>

	<changeSet id="718_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'covenantsmaintenance_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="719_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finoptionsmaintenance_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="719" author="satyanarayana.g" dbms="oracle,postgresql">
		<createView viewName="finoptionsmaintenance_view" replaceIfExists="true">
			<![CDATA[
			   SELECT T1.FINREFERENCE,
						T1.FINBRANCH,
						T1.FINTYPE,
						T1.FINCCY,
						T1.SCHEDULEMETHOD,
						T1.PROFITDAYSBASIS,
						T1.FINSTARTDATE,
						T1.NUMBEROFTERMS,
						T1.CUSTID,
						T1.FINAMOUNT,
						T1.MATURITYDATE,
						T1.FINREPAYMENTAMOUNT,
						T1.FINISACTIVE,
						T1.BLACKLISTED,
						T1.FEECHARGEAMT,
						T1.INSURANCEAMT,
						T1.GRACETERMS,
						T1.ALLOWGRCPERIOD,
						T1.GRCPERIODENDDATE,
						T1.ALWMULTIDISB,
						T1.DEFFERMENTS,
						T1.ALLOWGRCPFTRVW,
						T1.ALLOWREPAYRVW,
						T1.LASTREPAYDATE,
						T1.LASTREPAYPFTDATE,
						T1.ALLOWEDDEFRPYCHANGE,
						T1.AVAILEDDEFRPYCHANGE,
						T1.MIGRATEDFINANCE,
						T1.CLOSINGSTATUS,
						T1.REPAYRATEBASIS,
						T1.MANUALSCHEDULE,
						T1.FINCURRASSETVALUE,
						T1.TAKEOVERFINANCE ,
						T1.NEXTROLLOVERDATE,
						T1.AVAILEDUNPLANEMI,
						T1.AVAILEDREAGEH,
						T1.MAXUNPLANNEDEMI,
						T1.MAXREAGEHOLIDAYS,
						T1.DOWNPAYMENT,
						T1.PLANEMIHALW,
						T1.CALTERMS,
						T1.RATECHGANYDAY,
						T1.FINASSETVALUE,
						T2.CUSTCIF LOVDESCCUSTCIF,
						T3.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
						T3.FINDIVISION LOVDESCFINDIVISION,
						T3.FINCATEGORY LOVDESCPRODUCTCODENAME,
						T4.PRODUCTCATEGORY,
						COALESCE(T9.NOINST,0) NOINST,
						COALESCE(T5.ROLEDESC, FN_GET_ROLEDESC(T10.NEXTROLECODE)) LOVDESCREQUESTSTAGE,
						T10.FINMAINTAINID,
						T10.EVENT RCDMAINTAINSTS,
						T10.NEXTROLECODE,
						T10.RECORDSTATUS,
						T10.RECORDTYPE,
						T1.VERSION
						FROM FINMAINTAININSTRUCTIONS_TEMP T10
						INNER JOIN FINANCEMAIN T1 ON T1.FINREFERENCE = T10.FINREFERENCE
						INNER JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
						INNER JOIN RMTFINANCETYPES T3 ON T1.FINTYPE = T3.FINTYPE
						LEFT OUTER JOIN SECROLES T5 ON T10.NEXTROLECODE = T5.ROLECD
						INNER JOIN BMTPRODUCT T4 ON T3.FINCATEGORY = T4.PRODUCTCODE
						LEFT JOIN FINPFTDETAILS T9 ON T1.FINREFERENCE = T9.FINREFERENCE
						WHERE T10.EVENT    = 'FINOPTIONS'
						UNION ALL
						SELECT T1.FINREFERENCE,
						T1.FINBRANCH,
						T1.FINTYPE,
						T1.FINCCY,
						T1.SCHEDULEMETHOD,
						T1.PROFITDAYSBASIS,
						T1.FINSTARTDATE,
						T1.NUMBEROFTERMS,
						T1.CUSTID,
						T1.FINAMOUNT,
						T1.MATURITYDATE,
						T1.FINREPAYMENTAMOUNT,
						T1.FINISACTIVE,
						T1.BLACKLISTED,
						T1.FEECHARGEAMT,
						T1.INSURANCEAMT,
						T1.GRACETERMS,
						T1.ALLOWGRCPERIOD,
						T1.GRCPERIODENDDATE,
						T1.ALWMULTIDISB,
						T1.DEFFERMENTS,
						T1.ALLOWGRCPFTRVW,
						T1.ALLOWREPAYRVW,
						T1.LASTREPAYDATE,
						T1.LASTREPAYPFTDATE,
						T1.ALLOWEDDEFRPYCHANGE,
						T1.AVAILEDDEFRPYCHANGE,
						T1.MIGRATEDFINANCE,
						T1.CLOSINGSTATUS,
						T1.REPAYRATEBASIS,
						T1.MANUALSCHEDULE,
						T1.FINCURRASSETVALUE,
						T1.TAKEOVERFINANCE ,
						T1.NEXTROLLOVERDATE,
						T1.AVAILEDUNPLANEMI,
						T1.AVAILEDREAGEH,
						T1.MAXUNPLANNEDEMI,
						T1.MAXREAGEHOLIDAYS,
						T1.DOWNPAYMENT,
						T1.PLANEMIHALW,
						T1.CALTERMS,
						T1.RATECHGANYDAY,
						T1.FINASSETVALUE,
						T2.CUSTCIF LOVDESCCUSTCIF,
						T3.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
						T3.FINDIVISION LOVDESCFINDIVISION,
						T3.FINCATEGORY LOVDESCPRODUCTCODENAME,
						T4.PRODUCTCATEGORY,
						COALESCE(T9.NOINST,0) NOINST,
						NULL LOVDESCREQUESTSTAGE,
						NULL FINMAINTAINID,
						NULL RCDMAINTAINSTS,
						NULL NEXTROLECODE,
						NULL RECORDSTATUS,
						NULL RECORDTYPE,
						T1.VERSION
						FROM FINANCEMAIN T1
						INNER JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
						INNER JOIN RMTFINANCETYPES T3 ON T1.FINTYPE = T3.FINTYPE
						LEFT OUTER JOIN SECROLES T5 ON T1.NEXTROLECODE = T5.ROLECD
						INNER JOIN BMTPRODUCT T4 ON T3.FINCATEGORY = T4.PRODUCTCODE
						LEFT JOIN FINPFTDETAILS T9 ON T1.FINREFERENCE = T9.FINREFERENCE
						WHERE (NOT EXISTS (SELECT 1 EXPR1 FROM FINMAINTAININSTRUCTIONS_TEMP WHERE (FINREFERENCE = T1.FINREFERENCE)
						))
					]]>
		</createView>
	</changeSet>

	<changeSet id="719_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finoptionsmaintenance_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="716" author="satyanarayana.g" dbms="mssql">
		<createView viewName="FINANCEMAINTENANCE_VIEW" replaceIfExists="true">
			<![CDATA[
			   SELECT T1.FINREFERENCE,
						T1.FINBRANCH,
						T1.FINTYPE,
						T1.FINCCY,
						T1.SCHEDULEMETHOD,
						T1.PROFITDAYSBASIS,
						T1.FINSTARTDATE,
						T1.NUMBEROFTERMS,
						T1.CUSTID,
						T1.FINAMOUNT,
						T1.MATURITYDATE,
						T1.FINREPAYMENTAMOUNT,
						T1.FINISACTIVE,
						T1.BLACKLISTED,
						T1.FEECHARGEAMT,
						T1.INSURANCEAMT,
						T1.GRACETERMS,
						T1.ALLOWGRCPERIOD,
						T1.GRCPERIODENDDATE,
						T1.ALWMULTIDISB,
						T1.DEFFERMENTS,
						T1.NEXTROLECODE,
						T1.RECORDSTATUS,
						T1.RECORDTYPE,
						T1.ALLOWGRCPFTRVW,
						T1.ALLOWREPAYRVW,
						T1.LASTREPAYDATE,
						T1.LASTREPAYPFTDATE,
						T1.ALLOWEDDEFRPYCHANGE,
						T1.AVAILEDDEFRPYCHANGE,
						T1.RCDMAINTAINSTS,
						T1.MIGRATEDFINANCE,
						T1.CLOSINGSTATUS,
						T1.REPAYRATEBASIS,
						T1.MANUALSCHEDULE,
						T1.FINCURRASSETVALUE,
						T1.TAKEOVERFINANCE,
						T1.NEXTROLLOVERDATE,
						T1.AVAILEDUNPLANEMI,
						T1.AVAILEDREAGEH,
						T1.MAXUNPLANNEDEMI,
						T1.MAXREAGEHOLIDAYS,
						T1.DOWNPAYMENT,
						T1.PLANEMIHALW,
						T1.CALTERMS,
						T1.RATECHGANYDAY,
						T1.FINASSETVALUE,
						T2.CUSTCIF AS LOVDESCCUSTCIF,
						T3.FINISALWDIFFERMENT AS LOVDESCFINALWDEFERMENT,
						T3.FINDIVISION AS LOVDESCFINDIVISION,
						T3.FINCATEGORY AS LOVDESCPRODUCTCODENAME,
						T4.PRODUCTCATEGORY,
						COALESCE(T5.ROLEDESC, dbo.FN_GET_ROLEDESC(T1.NEXTROLECODE)) AS LOVDESCREQUESTSTAGE,
						COALESCE(T9.NOINST, 0) AS NOINST,
						T1.SAMPLINGREQUIRED,
						T1.ADVEMITERMS,
						T1.SANBSDSCHDLE,
						T1.PROMOTIONSEQID,
						T1.SVAMOUNT,
						T1.CBAMOUNT,
						T1.REPAYPFTFRQ,
						T1.VERSION
						FROM FINANCEMAIN_TEMP T1
						JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
						JOIN RMTFINANCETYPES T3 ON T1.FINTYPE = T3.FINTYPE
						LEFT JOIN SECROLES T5 ON T1.NEXTROLECODE = T5.ROLECD
						JOIN BMTPRODUCT T4 ON T3.FINCATEGORY = T4.PRODUCTCODE
						LEFT JOIN FINPFTDETAILS T9 ON T1.FINREFERENCE = T9.FINREFERENCE
						UNION ALL
						SELECT T1.FINREFERENCE,
						T1.FINBRANCH,
						T1.FINTYPE,
						T1.FINCCY,
						T1.SCHEDULEMETHOD,
						T1.PROFITDAYSBASIS,
						T1.FINSTARTDATE,
						T1.NUMBEROFTERMS,
						T1.CUSTID,
						T1.FINAMOUNT,
						T1.MATURITYDATE,
						T1.FINREPAYMENTAMOUNT,
						T1.FINISACTIVE,
						T1.BLACKLISTED,
						T1.FEECHARGEAMT,
						T1.INSURANCEAMT,
						T1.GRACETERMS,
						T1.ALLOWGRCPERIOD,
						T1.GRCPERIODENDDATE,
						T1.ALWMULTIDISB,
						T1.DEFFERMENTS,
						T1.NEXTROLECODE,
						T1.RECORDSTATUS,
						T1.RECORDTYPE,
						T1.ALLOWGRCPFTRVW,
						T1.ALLOWREPAYRVW,
						T1.LASTREPAYDATE,
						T1.LASTREPAYPFTDATE,
						T1.ALLOWEDDEFRPYCHANGE,
						T1.AVAILEDDEFRPYCHANGE,
						T1.RCDMAINTAINSTS,
						T1.MIGRATEDFINANCE,
						T1.CLOSINGSTATUS,
						T1.REPAYRATEBASIS,
						T1.MANUALSCHEDULE,
						T1.FINCURRASSETVALUE,
						T1.TAKEOVERFINANCE,
						T1.NEXTROLLOVERDATE,
						T1.AVAILEDUNPLANEMI,
						T1.AVAILEDREAGEH,
						T1.MAXUNPLANNEDEMI,
						T1.MAXREAGEHOLIDAYS,
						T1.DOWNPAYMENT,
						T1.PLANEMIHALW,
						T1.CALTERMS,
						T1.RATECHGANYDAY,
						T1.FINASSETVALUE,
						T2.CUSTCIF AS LOVDESCCUSTCIF,
						T3.FINISALWDIFFERMENT AS LOVDESCFINALWDEFERMENT,
						T3.FINDIVISION AS LOVDESCFINDIVISION,
						T3.FINCATEGORY AS LOVDESCPRODUCTCODENAME,
						T4.PRODUCTCATEGORY,
						COALESCE(T5.ROLEDESC, dbo.FN_GET_ROLEDESC(T1.NEXTROLECODE)) AS LOVDESCREQUESTSTAGE,
						COALESCE(T9.NOINST, 0) AS NOINST,
						T1.SAMPLINGREQUIRED,
						T1.ADVEMITERMS,
						T1.SANBSDSCHDLE,
						T1.PROMOTIONSEQID,
						T1.SVAMOUNT,
						T1.CBAMOUNT,
						T1.REPAYPFTFRQ,
						T1.VERSION
						FROM FINANCEMAIN T1
						JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
						JOIN RMTFINANCETYPES T3 ON T1.FINTYPE = T3.FINTYPE
						LEFT JOIN SECROLES T5 ON T1.NEXTROLECODE = T5.ROLECD
						JOIN BMTPRODUCT T4 ON T3.FINCATEGORY = T4.PRODUCTCODE
						LEFT JOIN FINPFTDETAILS T9 ON T1.FINREFERENCE = T9.FINREFERENCE
						WHERE NOT (EXISTS ( SELECT 1 AS EXPR1
						FROM FINANCEMAIN_TEMP
						WHERE FINANCEMAIN_TEMP.FINREFERENCE = T1.FINREFERENCE))
					]]>
		</createView>
	</changeSet>

	<changeSet id="717" author="satyanarayana.g" dbms="mssql">
		<createView viewName="FEEWAIVERS_VIEW" replaceIfExists="true">
			<![CDATA[
			  SELECT DISTINCT T1.FINREFERENCE,
								T1.FINBRANCH,
								T1.FINTYPE,
								T1.FINCCY,
								T1.SCHEDULEMETHOD,
								T1.PROFITDAYSBASIS,
								T1.FINSTARTDATE,
								T1.NUMBEROFTERMS,
								T1.CUSTID,
								T1.FINAMOUNT,
								T1.MATURITYDATE,
								T1.FINREPAYMENTAMOUNT,
								T1.FINISACTIVE,
								T1.BLACKLISTED,
								T1.FEECHARGEAMT,
								T1.INSURANCEAMT,
								T1.GRACETERMS,
								T1.ALLOWGRCPERIOD,
								T1.GRCPERIODENDDATE,
								T1.ALWMULTIDISB,
								T1.DEFFERMENTS,
								T1.ALLOWGRCPFTRVW,
								T1.ALLOWREPAYRVW,
								T1.LASTREPAYDATE,
								T1.LASTREPAYPFTDATE,
								T1.ALLOWEDDEFRPYCHANGE,
								T1.AVAILEDDEFRPYCHANGE,
								T1.MIGRATEDFINANCE,
								T1.CLOSINGSTATUS,
								T1.REPAYRATEBASIS,
								T1.MANUALSCHEDULE,
								T1.FINCURRASSETVALUE,
								T1.TAKEOVERFINANCE,
								T1.NEXTROLLOVERDATE,
								T1.AVAILEDUNPLANEMI,
								T1.AVAILEDREAGEH,
								T1.MAXUNPLANNEDEMI,
								T1.MAXREAGEHOLIDAYS,
								T1.DOWNPAYMENT,
								T1.PLANEMIHALW,
								T1.CALTERMS,
								T1.RATECHGANYDAY,
								T1.FINASSETVALUE,
								T2.CUSTCIF AS LOVDESCCUSTCIF,
								T3.FINISALWDIFFERMENT AS LOVDESCFINALWDEFERMENT,
								T3.FINDIVISION AS LOVDESCFINDIVISION,
								T3.FINCATEGORY AS LOVDESCPRODUCTCODENAME,
								T4.PRODUCTCATEGORY,
								COALESCE(T9.NOINST, 0) AS NOINST,
								COALESCE(T5.ROLEDESC, (T10.NEXTROLECODE)) AS LOVDESCREQUESTSTAGE,
								T10.WAIVERID,
								T10.EVENT AS RCDMAINTAINSTS,
								T10.NEXTROLECODE,
								T10.RECORDSTATUS,
								T10.RECORDTYPE,
								T1.VERSION
								FROM FEEWAIVERHEADER_TEMP T10
								JOIN FINANCEMAIN T1 ON T1.FINREFERENCE = T10.FINREFERENCE
								JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
								JOIN RMTFINANCETYPES T3 ON T1.FINTYPE = T3.FINTYPE
								LEFT JOIN SECROLES T5 ON T10.NEXTROLECODE = T5.ROLECD
								JOIN BMTPRODUCT T4 ON T3.FINCATEGORY = T4.PRODUCTCODE
								LEFT JOIN FINPFTDETAILS T9 ON T1.FINREFERENCE = T9.FINREFERENCE
								JOIN (( SELECT MANUALADVISE.FINREFERENCE
								FROM MANUALADVISE
								WHERE MANUALADVISE.ADVISETYPE = 1 AND (MANUALADVISE.ADVISEAMOUNT - MANUALADVISE.PAIDAMOUNT - MANUALADVISE.WAIVEDAMOUNT) > 0)
								UNION ALL
								(SELECT FINODDETAILS.FINREFERENCE
								FROM FINODDETAILS
								WHERE FINODDETAILS.TOTPENALTYBAL > 0 OR FINODDETAILS.LPIBAL > 0)) T ON T.FINREFERENCE = T1.FINREFERENCE
								WHERE T10.EVENT = 'FEEWAIVERS'
								UNION ALL
								SELECT DISTINCT T1.FINREFERENCE,
								T1.FINBRANCH,
								T1.FINTYPE,
								T1.FINCCY,
								T1.SCHEDULEMETHOD,
								T1.PROFITDAYSBASIS,
								T1.FINSTARTDATE,
								T1.NUMBEROFTERMS,
								T1.CUSTID,
								T1.FINAMOUNT,
								T1.MATURITYDATE,
								T1.FINREPAYMENTAMOUNT,
								T1.FINISACTIVE,
								T1.BLACKLISTED,
								T1.FEECHARGEAMT,
								T1.INSURANCEAMT,
								T1.GRACETERMS,
								T1.ALLOWGRCPERIOD,
								T1.GRCPERIODENDDATE,
								T1.ALWMULTIDISB,
								T1.DEFFERMENTS,
								T1.ALLOWGRCPFTRVW,
								T1.ALLOWREPAYRVW,
								T1.LASTREPAYDATE,
								T1.LASTREPAYPFTDATE,
								T1.ALLOWEDDEFRPYCHANGE,
								T1.AVAILEDDEFRPYCHANGE,
								T1.MIGRATEDFINANCE,
								T1.CLOSINGSTATUS,
								T1.REPAYRATEBASIS,
								T1.MANUALSCHEDULE,
								T1.FINCURRASSETVALUE,
								T1.TAKEOVERFINANCE,
								T1.NEXTROLLOVERDATE,
								T1.AVAILEDUNPLANEMI,
								T1.AVAILEDREAGEH,
								T1.MAXUNPLANNEDEMI,
								T1.MAXREAGEHOLIDAYS,
								T1.DOWNPAYMENT,
								T1.PLANEMIHALW,
								T1.CALTERMS,
								T1.RATECHGANYDAY,
								T1.FINASSETVALUE,
								T2.CUSTCIF AS LOVDESCCUSTCIF,
								T3.FINISALWDIFFERMENT AS LOVDESCFINALWDEFERMENT,
								T3.FINDIVISION AS LOVDESCFINDIVISION,
								T3.FINCATEGORY AS LOVDESCPRODUCTCODENAME,
								T4.PRODUCTCATEGORY,
								COALESCE(T9.NOINST, 0) AS NOINST,
								NULL AS LOVDESCREQUESTSTAGE,
								0  AS WAIVERID,
								NULL AS RCDMAINTAINSTS,
								NULL AS NEXTROLECODE,
								NULL AS RECORDSTATUS,
								NULL AS RECORDTYPE,
								T1.VERSION
								FROM FINANCEMAIN T1
								JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
								JOIN RMTFINANCETYPES T3 ON T1.FINTYPE = T3.FINTYPE
								LEFT JOIN SECROLES T5 ON T1.NEXTROLECODE = T5.ROLECD
								JOIN BMTPRODUCT T4 ON T3.FINCATEGORY = T4.PRODUCTCODE
								LEFT JOIN FINPFTDETAILS T9 ON T1.FINREFERENCE = T9.FINREFERENCE
								JOIN (( SELECT MANUALADVISE.FINREFERENCE
								FROM MANUALADVISE
								WHERE MANUALADVISE.ADVISETYPE = 1 AND (MANUALADVISE.ADVISEAMOUNT - MANUALADVISE.PAIDAMOUNT - MANUALADVISE.WAIVEDAMOUNT) > 0)
								UNION ALL
								(SELECT FINODDETAILS.FINREFERENCE
								FROM FINODDETAILS
								WHERE FINODDETAILS.TOTPENALTYBAL > 0 OR FINODDETAILS.LPIBAL > 0)) T ON T.FINREFERENCE = T1.FINREFERENCE
								WHERE NOT (EXISTS ( SELECT 1 AS EXPR1
								FROM FEEWAIVERHEADER_TEMP
								WHERE FEEWAIVERHEADER_TEMP.FINREFERENCE = T1.FINREFERENCE))
						]]>
			</createView>
	</changeSet>

	<changeSet id="718" author="satyanarayana.g" dbms="mssql">
		<createView viewName="COVENANTSMAINTENANCE_VIEW" replaceIfExists="true">
			<![CDATA[
			   SELECT T1.FINREFERENCE,
						T1.FINBRANCH,
						T1.FINTYPE,
						T1.FINCCY,
						T1.SCHEDULEMETHOD,
						T1.PROFITDAYSBASIS,
						T1.FINSTARTDATE,
						T1.NUMBEROFTERMS,
						T1.CUSTID,
						T1.FINAMOUNT,
						T1.MATURITYDATE,
						T1.FINREPAYMENTAMOUNT,
						T1.FINISACTIVE,
						T1.BLACKLISTED,
						T1.FEECHARGEAMT,
						T1.INSURANCEAMT,
						T1.GRACETERMS,
						T1.ALLOWGRCPERIOD,
						T1.GRCPERIODENDDATE,
						T1.ALWMULTIDISB,
						T1.DEFFERMENTS,
						T1.ALLOWGRCPFTRVW,
						T1.ALLOWREPAYRVW,
						T1.LASTREPAYDATE,
						T1.LASTREPAYPFTDATE,
						T1.ALLOWEDDEFRPYCHANGE,
						T1.AVAILEDDEFRPYCHANGE,
						T1.MIGRATEDFINANCE,
						T1.CLOSINGSTATUS,
						T1.REPAYRATEBASIS,
						T1.MANUALSCHEDULE,
						T1.FINCURRASSETVALUE,
						T1.TAKEOVERFINANCE ,
						T1.NEXTROLLOVERDATE,
						T1.AVAILEDUNPLANEMI,
						T1.AVAILEDREAGEH,
						T1.MAXUNPLANNEDEMI,
						T1.MAXREAGEHOLIDAYS,
						T1.DOWNPAYMENT,
						T1.PLANEMIHALW,
						T1.CALTERMS,
						T1.RATECHGANYDAY,
						T1.FINASSETVALUE,
						T2.CUSTCIF LOVDESCCUSTCIF,
						T3.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
						T3.FINDIVISION LOVDESCFINDIVISION,
						T3.FINCATEGORY LOVDESCPRODUCTCODENAME,
						T4.PRODUCTCATEGORY,
						COALESCE(T9.NOINST,0) NOINST,
						COALESCE(T5.ROLEDESC, dbo.FN_GET_ROLEDESC(T10.NEXTROLECODE)) LOVDESCREQUESTSTAGE,
						T10.FINMAINTAINID,
						T10.EVENT RCDMAINTAINSTS,
						T10.NEXTROLECODE,
						T10.RECORDSTATUS,
						T10.RECORDTYPE,
						T1.VERSION
						FROM FINMAINTAININSTRUCTIONS_TEMP T10
						INNER JOIN FINANCEMAIN T1 ON T1.FINREFERENCE = T10.FINREFERENCE
						INNER JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
						INNER JOIN RMTFINANCETYPES T3 ON T1.FINTYPE = T3.FINTYPE
						LEFT OUTER JOIN SECROLES T5 ON T10.NEXTROLECODE = T5.ROLECD
						INNER JOIN BMTPRODUCT T4 ON T3.FINCATEGORY = T4.PRODUCTCODE
						LEFT JOIN FINPFTDETAILS T9 ON T1.FINREFERENCE = T9.FINREFERENCE
						WHERE T10.EVENT    = 'COVENANTS'
						UNION ALL
						SELECT T1.FINREFERENCE,
						T1.FINBRANCH,
						T1.FINTYPE,
						T1.FINCCY,
						T1.SCHEDULEMETHOD,
						T1.PROFITDAYSBASIS,
						T1.FINSTARTDATE,
						T1.NUMBEROFTERMS,
						T1.CUSTID,
						T1.FINAMOUNT,
						T1.MATURITYDATE,
						T1.FINREPAYMENTAMOUNT,
						T1.FINISACTIVE,
						T1.BLACKLISTED,
						T1.FEECHARGEAMT,
						T1.INSURANCEAMT,
						T1.GRACETERMS,
						T1.ALLOWGRCPERIOD,
						T1.GRCPERIODENDDATE,
						T1.ALWMULTIDISB,
						T1.DEFFERMENTS,
						T1.ALLOWGRCPFTRVW,
						T1.ALLOWREPAYRVW,
						T1.LASTREPAYDATE,
						T1.LASTREPAYPFTDATE,
						T1.ALLOWEDDEFRPYCHANGE,
						T1.AVAILEDDEFRPYCHANGE,
						T1.MIGRATEDFINANCE,
						T1.CLOSINGSTATUS,
						T1.REPAYRATEBASIS,
						T1.MANUALSCHEDULE,
						T1.FINCURRASSETVALUE,
						T1.TAKEOVERFINANCE ,
						T1.NEXTROLLOVERDATE,
						T1.AVAILEDUNPLANEMI,
						T1.AVAILEDREAGEH,
						T1.MAXUNPLANNEDEMI,
						T1.MAXREAGEHOLIDAYS,
						T1.DOWNPAYMENT,
						T1.PLANEMIHALW,
						T1.CALTERMS,
						T1.RATECHGANYDAY,
						T1.FINASSETVALUE,
						T2.CUSTCIF LOVDESCCUSTCIF,
						T3.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
						T3.FINDIVISION LOVDESCFINDIVISION,
						T3.FINCATEGORY LOVDESCPRODUCTCODENAME,
						T4.PRODUCTCATEGORY,
						COALESCE(T9.NOINST,0) NOINST,
						NULL LOVDESCREQUESTSTAGE,
						NULL FINMAINTAINID,
						NULL RCDMAINTAINSTS,
						NULL NEXTROLECODE,
						NULL RECORDSTATUS,
						NULL RECORDTYPE,
						T1.VERSION
						FROM FINANCEMAIN T1
						INNER JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
						INNER JOIN RMTFINANCETYPES T3 ON T1.FINTYPE = T3.FINTYPE
						LEFT OUTER JOIN SECROLES T5 ON T1.NEXTROLECODE = T5.ROLECD
						INNER JOIN BMTPRODUCT T4 ON T3.FINCATEGORY = T4.PRODUCTCODE
						LEFT JOIN FINPFTDETAILS T9 ON T1.FINREFERENCE = T9.FINREFERENCE
						WHERE (NOT EXISTS
						(SELECT 1 EXPR1
						FROM FINMAINTAININSTRUCTIONS_TEMP
						WHERE (FINREFERENCE = T1.FINREFERENCE)
						))
					]]>
		</createView>
	</changeSet>

	<changeSet id="719" author="satyanarayana.g" dbms="mssql">
		<createView viewName="finoptionsmaintenance_view" replaceIfExists="true">
			<![CDATA[
			   SELECT T1.FINREFERENCE,
						T1.FINBRANCH,
						T1.FINTYPE,
						T1.FINCCY,
						T1.SCHEDULEMETHOD,
						T1.PROFITDAYSBASIS,
						T1.FINSTARTDATE,
						T1.NUMBEROFTERMS,
						T1.CUSTID,
						T1.FINAMOUNT,
						T1.MATURITYDATE,
						T1.FINREPAYMENTAMOUNT,
						T1.FINISACTIVE,
						T1.BLACKLISTED,
						T1.FEECHARGEAMT,
						T1.INSURANCEAMT,
						T1.GRACETERMS,
						T1.ALLOWGRCPERIOD,
						T1.GRCPERIODENDDATE,
						T1.ALWMULTIDISB,
						T1.DEFFERMENTS,
						T1.ALLOWGRCPFTRVW,
						T1.ALLOWREPAYRVW,
						T1.LASTREPAYDATE,
						T1.LASTREPAYPFTDATE,
						T1.ALLOWEDDEFRPYCHANGE,
						T1.AVAILEDDEFRPYCHANGE,
						T1.MIGRATEDFINANCE,
						T1.CLOSINGSTATUS,
						T1.REPAYRATEBASIS,
						T1.MANUALSCHEDULE,
						T1.FINCURRASSETVALUE,
						T1.TAKEOVERFINANCE ,
						T1.NEXTROLLOVERDATE,
						T1.AVAILEDUNPLANEMI,
						T1.AVAILEDREAGEH,
						T1.MAXUNPLANNEDEMI,
						T1.MAXREAGEHOLIDAYS,
						T1.DOWNPAYMENT,
						T1.PLANEMIHALW,
						T1.CALTERMS,
						T1.RATECHGANYDAY,
						T1.FINASSETVALUE,
						T2.CUSTCIF LOVDESCCUSTCIF,
						T3.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
						T3.FINDIVISION LOVDESCFINDIVISION,
						T3.FINCATEGORY LOVDESCPRODUCTCODENAME,
						T4.PRODUCTCATEGORY,
						COALESCE(T9.NOINST,0) NOINST,
						COALESCE(T5.ROLEDESC, dbo.FN_GET_ROLEDESC(T10.NEXTROLECODE)) LOVDESCREQUESTSTAGE,
						T10.FINMAINTAINID,
						T10.EVENT RCDMAINTAINSTS,
						T10.NEXTROLECODE,
						T10.RECORDSTATUS,
						T10.RECORDTYPE,
						T1.VERSION
						FROM FINMAINTAININSTRUCTIONS_TEMP T10
						INNER JOIN FINANCEMAIN T1 ON T1.FINREFERENCE = T10.FINREFERENCE
						INNER JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
						INNER JOIN RMTFINANCETYPES T3 ON T1.FINTYPE = T3.FINTYPE
						LEFT OUTER JOIN SECROLES T5 ON T10.NEXTROLECODE = T5.ROLECD
						INNER JOIN BMTPRODUCT T4 ON T3.FINCATEGORY = T4.PRODUCTCODE
						LEFT JOIN FINPFTDETAILS T9 ON T1.FINREFERENCE = T9.FINREFERENCE
						WHERE T10.EVENT    = 'FINOPTIONS'
						UNION ALL
						SELECT T1.FINREFERENCE,
						T1.FINBRANCH,
						T1.FINTYPE,
						T1.FINCCY,
						T1.SCHEDULEMETHOD,
						T1.PROFITDAYSBASIS,
						T1.FINSTARTDATE,
						T1.NUMBEROFTERMS,
						T1.CUSTID,
						T1.FINAMOUNT,
						T1.MATURITYDATE,
						T1.FINREPAYMENTAMOUNT,
						T1.FINISACTIVE,
						T1.BLACKLISTED,
						T1.FEECHARGEAMT,
						T1.INSURANCEAMT,
						T1.GRACETERMS,
						T1.ALLOWGRCPERIOD,
						T1.GRCPERIODENDDATE,
						T1.ALWMULTIDISB,
						T1.DEFFERMENTS,
						T1.ALLOWGRCPFTRVW,
						T1.ALLOWREPAYRVW,
						T1.LASTREPAYDATE,
						T1.LASTREPAYPFTDATE,
						T1.ALLOWEDDEFRPYCHANGE,
						T1.AVAILEDDEFRPYCHANGE,
						T1.MIGRATEDFINANCE,
						T1.CLOSINGSTATUS,
						T1.REPAYRATEBASIS,
						T1.MANUALSCHEDULE,
						T1.FINCURRASSETVALUE,
						T1.TAKEOVERFINANCE ,
						T1.NEXTROLLOVERDATE,
						T1.AVAILEDUNPLANEMI,
						T1.AVAILEDREAGEH,
						T1.MAXUNPLANNEDEMI,
						T1.MAXREAGEHOLIDAYS,
						T1.DOWNPAYMENT,
						T1.PLANEMIHALW,
						T1.CALTERMS,
						T1.RATECHGANYDAY,
						T1.FINASSETVALUE,
						T2.CUSTCIF LOVDESCCUSTCIF,
						T3.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
						T3.FINDIVISION LOVDESCFINDIVISION,
						T3.FINCATEGORY LOVDESCPRODUCTCODENAME,
						T4.PRODUCTCATEGORY,
						COALESCE(T9.NOINST,0) NOINST,
						NULL LOVDESCREQUESTSTAGE,
						NULL FINMAINTAINID,
						NULL RCDMAINTAINSTS,
						NULL NEXTROLECODE,
						NULL RECORDSTATUS,
						NULL RECORDTYPE,
						T1.VERSION
						FROM FINANCEMAIN T1
						INNER JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
						INNER JOIN RMTFINANCETYPES T3 ON T1.FINTYPE = T3.FINTYPE
						LEFT OUTER JOIN SECROLES T5 ON T1.NEXTROLECODE = T5.ROLECD
						INNER JOIN BMTPRODUCT T4 ON T3.FINCATEGORY = T4.PRODUCTCODE
						LEFT JOIN FINPFTDETAILS T9 ON T1.FINREFERENCE = T9.FINREFERENCE
						WHERE (NOT EXISTS (SELECT 1 EXPR1 FROM FINMAINTAININSTRUCTIONS_TEMP WHERE (FINREFERENCE = T1.FINREFERENCE)
						))
					]]>
		</createView>
	</changeSet>

	<changeSet id="720" author="gopal.p">
		<addColumn tableName="SecUsers_Temp">
			<column name="LDAPDomainName" type="varchar(50)" />
		</addColumn>
	</changeSet>

	<changeSet id="721" author="gopal.p">
		<addColumn tableName="SecUsers">
			<column name="LDAPDomainName" type="varchar(50)" />
		</addColumn>
	</changeSet>

	<changeSet id="722" author="gopal.p">
		<addColumn tableName="SecUsers_rtemp">
			<column name="LDAPDomainName" type="varchar(50)" />
		</addColumn>
	</changeSet>

	<changeSet id="723_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'secusers_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="723.1" author="gopal.p">
		<createView viewName="SECUSERS_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.USRID,
					T1.USRLOGIN,
					T1.USRPWD,
					T1.USERSTAFFID,
					T1.USRFNAME,
					T1.USRMNAME,
					T1.USRLNAME,
					T1.USRMOBILE,
					T1.USREMAIL,
					T1.USRENABLED,
					T1.USRCANSIGNONFROM,
					T1.USRCANSIGNONTO,
					T1.USRCANOVERRIDELIMITS,
					T1.USRACEXP,
					T1.USRACEXPDT,
					T1.PWDEXPDT,
					T1.USRACLOCKED,
					T1.USRLANGUAGE,
					T5.LNGDESC LOVDESCUSRLANGUAGE,
					T1.USRDFTAPPID,
					T2.APPCODE LOVDESCUSRDFTAPPCODE,
					T2.APPDESCRIPTION LOVDESCUSRDFTAPPCODENAME,
					T1.USRBRANCHCODE,
					T4.BRANCHDESC LOVDESCUSRBRANCHCODENAME,
					T1.USRDEPTCODE,
					T3.DEPTDESC LOVDESCUSRDEPTCODENAME,
					T1.USRTOKEN,
					T1.USRISMULTIBRANCH,
					T1.USRINVLDLOGINTRIES,
					T1.USRDESG,
					T6.DESGDESC LOVDESCUSRDESG,
					T1.BUSINESSVERTICAL,
					T7.CODE BUSINESSVERTICALCODE,
					T7.DESCRIPTION BUSINESSVERTICALDESC,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.USRDFTAPPCODE,
					T1.AUTHTYPE,
					T1.USERTYPE,
					T1.ACCESSTOALLBRANCHES,
					T1.LDAPDOMAINNAME
				    FROM SECUSERS T1
				    LEFT JOIN PTAPPLICATIONDETAILS T2 ON T1.USRDFTAPPID = T2.APPID
				    LEFT JOIN BMTDEPARTMENTS T3 ON T1.USRDEPTCODE = T3.DEPTCODE
				    LEFT JOIN RMTBRANCHES T4 ON T1.USRBRANCHCODE = T4.BRANCHCODE
				    LEFT JOIN BMTLANGUAGE T5 ON T1.USRLANGUAGE = T5.LNGCODE
				    LEFT JOIN BMTDESIGNATIONS T6 ON T1.USRDESG = T6.DESGCODE
				    LEFT JOIN BUSINESS_VERTICAL T7 ON T7.ID = T1.BUSINESSVERTICAL
			    ]]>
		</createView>
	</changeSet>

	<changeSet id="723_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'secusers_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="724_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'secusers_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="724" author="gopal.p">
		<createView viewName="secusers_view" replaceIfExists="true">
		<![CDATA[
			SELECT T1.USRID,
				T1.USRLOGIN,
				T1.USRPWD,
				T1.USERSTAFFID,
				T1.USRFNAME,
				T1.USRMNAME,
				T1.USRLNAME,
				T1.USRMOBILE,
				T1.USREMAIL,
				T1.USRENABLED,
				T1.USRCANSIGNONFROM,
				T1.USRCANSIGNONTO,
				T1.USRCANOVERRIDELIMITS,
				T1.USRACEXP,
				T1.USRACEXPDT,
				T1.PWDEXPDT,
				T1.USRACLOCKED,
				T1.USRLANGUAGE,
				T5.LNGDESC LOVDESCUSRLANGUAGE,
				T1.USRDFTAPPID,
				T2.APPCODE LOVDESCUSRDFTAPPCODE,
				T2.APPDESCRIPTION LOVDESCUSRDFTAPPCODENAME,
				T1.USRBRANCHCODE,
				T4.BRANCHDESC LOVDESCUSRBRANCHCODENAME,
				T1.USRDEPTCODE,
				T3.DEPTDESC LOVDESCUSRDEPTCODENAME,
				T1.USRTOKEN,
				T1.USRISMULTIBRANCH,
				T1.USRINVLDLOGINTRIES,
				T1.USRDESG,
				T6.DESGDESC LOVDESCUSRDESG,
				T1.BUSINESSVERTICAL,
			    T7.CODE BUSINESSVERTICALCODE,
			    T7.DESCRIPTION BUSINESSVERTICALDESC,
				T1.VERSION,
				T1.LASTMNTBY,
				T1.LASTMNTON,
				T1.RECORDSTATUS,
				T1.ROLECODE,
				T1.NEXTROLECODE,
				T1.TASKID,
				T1.NEXTTASKID,
				T1.RECORDTYPE,
				T1.WORKFLOWID,
				T1.USRDFTAPPCODE,
				T1.AUTHTYPE,
				T1.USERTYPE,
				T1.ACCESSTOALLBRANCHES,
				T1.LDAPDOMAINNAME
			    FROM SECUSERS_TEMP T1
			    LEFT JOIN PTAPPLICATIONDETAILS T2 ON T1.USRDFTAPPID = T2.APPID
			    LEFT JOIN BMTDEPARTMENTS T3 ON T1.USRDEPTCODE = T3.DEPTCODE
			    LEFT JOIN RMTBRANCHES T4 ON T1.USRBRANCHCODE = T4.BRANCHCODE
			    LEFT JOIN BMTLANGUAGE T5 ON T1.USRLANGUAGE = T5.LNGCODE
			    LEFT JOIN BMTDESIGNATIONS T6 ON T1.USRDESG = T6.DESGCODE
			    LEFT JOIN BUSINESS_VERTICAL T7 ON T7.ID = T1.BUSINESSVERTICAL
			  UNION ALL
			SELECT T1.USRID,
				T1.USRLOGIN,
				T1.USRPWD,
				T1.USERSTAFFID,
				T1.USRFNAME,
				T1.USRMNAME,
				T1.USRLNAME,
				T1.USRMOBILE,
				T1.USREMAIL,
				T1.USRENABLED,
				T1.USRCANSIGNONFROM,
				T1.USRCANSIGNONTO,
				T1.USRCANOVERRIDELIMITS,
				T1.USRACEXP,
				T1.USRACEXPDT,
				T1.PWDEXPDT,
				T1.USRACLOCKED,
				T1.USRLANGUAGE,
				T5.LNGDESC LOVDESCUSRLANGUAGE,
				T1.USRDFTAPPID,
				T2.APPCODE LOVDESCUSRDFTAPPCODE,
				T2.APPDESCRIPTION LOVDESCUSRDFTAPPCODENAME,
				T1.USRBRANCHCODE,
				T4.BRANCHDESC LOVDESCUSRBRANCHCODENAME,
				T1.USRDEPTCODE,
				T3.DEPTDESC LOVDESCUSRDEPTCODENAME,
				T1.USRTOKEN,
				T1.USRISMULTIBRANCH,
				T1.USRINVLDLOGINTRIES,
				T1.USRDESG,
				T6.DESGDESC LOVDESCUSRDESG,
				T1.BUSINESSVERTICAL,
				T7.CODE BUSINESSVERTICALCODE,
				T7.DESCRIPTION BUSINESSVERTICALDESC,
				T1.VERSION,
				T1.LASTMNTBY,
				T1.LASTMNTON,
				T1.RECORDSTATUS,
				T1.ROLECODE,
				T1.NEXTROLECODE,
				T1.TASKID,
				T1.NEXTTASKID,
				T1.RECORDTYPE,
				T1.WORKFLOWID,
				T1.USRDFTAPPCODE,
				T1.AUTHTYPE,
				T1.USERTYPE,
				T1.ACCESSTOALLBRANCHES,
				T1.LDAPDOMAINNAME
			    FROM SECUSERS T1
			    LEFT JOIN PTAPPLICATIONDETAILS T2 ON T1.USRDFTAPPID = T2.APPID
			    LEFT JOIN BMTDEPARTMENTS T3 ON T1.USRDEPTCODE = T3.DEPTCODE
			    LEFT JOIN RMTBRANCHES T4 ON T1.USRBRANCHCODE = T4.BRANCHCODE
			    LEFT JOIN BMTLANGUAGE T5 ON T1.USRLANGUAGE = T5.LNGCODE
			    LEFT JOIN BMTDESIGNATIONS T6 ON T1.USRDESG = T6.DESGCODE
			    LEFT JOIN BUSINESS_VERTICAL T7 ON T7.ID = T1.BUSINESSVERTICAL
			    WHERE NOT (EXISTS ( SELECT 1  FROM SECUSERS_TEMP WHERE SECUSERS_TEMP.USRID = T1.USRID))
				]]>
		</createView>
	</changeSet>

	<changeSet id="724_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'secusers_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="725_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'secusers_rview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="725.1" author="gopal.p">
		<createView viewName="secusers_rview" replaceIfExists="true">
			<![CDATA[
				SELECT T1.USRID,
				    T1.USRLOGIN,
				    T1.USRPWD,
				    T1.USERSTAFFID,
				    T1.USRFNAME,
				    T1.USRMNAME,
				    T1.USRLNAME,
				    T1.USRMOBILE,
				    T1.USREMAIL,
				    T1.USRENABLED,
				    T1.USRCANSIGNONFROM,
				    T1.USRCANSIGNONTO,
				    T1.USRCANOVERRIDELIMITS,
				    T1.USRACEXP,
				    T1.USRACEXPDT,
				    T1.PWDEXPDT,
				    T1.USRACLOCKED,
				    T1.USRLANGUAGE,
				    T5.LNGDESC AS LOVDESCUSRLANGUAGE,
				    T1.USRDFTAPPID,
				    T2.APPCODE AS LOVDESCUSRDFTAPPCODE,
				    T2.APPDESCRIPTION AS LOVDESCUSRDFTAPPCODENAME,
				    T1.USRBRANCHCODE,
				    T4.BRANCHDESC AS LOVDESCUSRBRANCHCODENAME,
				    T1.USRDEPTCODE,
				    T3.DEPTDESC AS LOVDESCUSRDEPTCODENAME,
				    T1.USRTOKEN,
				    T1.USRISMULTIBRANCH,
				    T1.USRINVLDLOGINTRIES,
				    T1.USRDESG,
				    T6.DESGDESC AS LOVDESCUSRDESG,
				    T1.BUSINESSVERTICAL,
				    T7.CODE AS BUSINESSVERTICALCODE,
				    T7.DESCRIPTION AS BUSINESSVERTICALDESC,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T1.USRDFTAPPCODE,
				    T1.AUTHTYPE,
				    T1.USERTYPE,
				    T1.LDAPDOMAINNAME
			        FROM SECUSERS_RTEMP T1
			        JOIN PTAPPLICATIONDETAILS T2 ON T1.USRDFTAPPID = T2.APPID
			        JOIN BMTDEPARTMENTS T3 ON T1.USRDEPTCODE = T3.DEPTCODE
			        JOIN RMTBRANCHES T4 ON T1.USRBRANCHCODE = T4.BRANCHCODE
			        JOIN BMTLANGUAGE T5 ON T1.USRLANGUAGE = T5.LNGCODE
			        JOIN BMTDESIGNATIONS T6 ON T1.USRDESG = T6.DESGCODE
			        LEFT JOIN BUSINESS_VERTICAL T7 ON T7.ID = T1.BUSINESSVERTICAL
				  UNION ALL
				SELECT T1.USRID,
				    T1.USRLOGIN,
				    T1.USRPWD,
				    T1.USERSTAFFID,
				    T1.USRFNAME,
				    T1.USRMNAME,
				    T1.USRLNAME,
				    T1.USRMOBILE,
				    T1.USREMAIL,
				    T1.USRENABLED,
				    T1.USRCANSIGNONFROM,
				    T1.USRCANSIGNONTO,
				    T1.USRCANOVERRIDELIMITS,
				    T1.USRACEXP,
				    T1.USRACEXPDT,
				    T1.PWDEXPDT,
				    T1.USRACLOCKED,
				    T1.USRLANGUAGE,
				    T5.LNGDESC AS LOVDESCUSRLANGUAGE,
				    T1.USRDFTAPPID,
				    T2.APPCODE AS LOVDESCUSRDFTAPPCODE,
				    T2.APPDESCRIPTION AS LOVDESCUSRDFTAPPCODENAME,
				    T1.USRBRANCHCODE,
				    T4.BRANCHDESC AS LOVDESCUSRBRANCHCODENAME,
				    T1.USRDEPTCODE,
				    T3.DEPTDESC AS LOVDESCUSRDEPTCODENAME,
				    T1.USRTOKEN,
				    T1.USRISMULTIBRANCH,
				    T1.USRINVLDLOGINTRIES,
				    T1.USRDESG,
				    T6.DESGDESC AS LOVDESCUSRDESG,
				    T1.BUSINESSVERTICAL,
				    T7.CODE AS BUSINESSVERTICALCODE,
				    T7.DESCRIPTION AS BUSINESSVERTICALDESC,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T1.USRDFTAPPCODE,
				    T1.AUTHTYPE,
				    T1.USERTYPE,
				    T1.LDAPDOMAINNAME
				   	FROM SECUSERS T1
				    JOIN PTAPPLICATIONDETAILS T2 ON T1.USRDFTAPPID = T2.APPID
				    JOIN BMTDEPARTMENTS T3 ON T1.USRDEPTCODE = T3.DEPTCODE
				    JOIN RMTBRANCHES T4 ON T1.USRBRANCHCODE = T4.BRANCHCODE
				    JOIN BMTLANGUAGE T5 ON T1.USRLANGUAGE = T5.LNGCODE
			        JOIN BMTDESIGNATIONS T6 ON T1.USRDESG = T6.DESGCODE
			        LEFT JOIN BUSINESS_VERTICAL T7 ON T7.ID = T1.BUSINESSVERTICAL
				    WHERE NOT (EXISTS ( SELECT 1 FROM SECUSERS_RTEMP  WHERE SECUSERS_RTEMP.USRID = T1.USRID))
			    ]]>
		</createView>
	</changeSet>

	<changeSet id="725_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'secusers_rview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="726" author="gopal.p">
		<sql>
			<![CDATA[		
				UPDATE SECUSERS SET LDAPDomainName='ldap.domain.name' WHERE authtype='LDAP';
				UPDATE SECUSERS_TEMP SET LDAPDomainName='ldap.domain.name' WHERE authtype='LDAP';
			]]>
		</sql>
	</changeSet>

	<changeSet id="727" author="sudheer.t">
		<sql>
			<![CDATA[
				DELETE from ErrorDetails WHERE code='90403';
				INSERT INTO ErrorDetails VALUES('90403','EN','E','No Objection Certificate is only applicable for Matured and closed(Fully Paid) loans.','','Approved','','','','','',0,CURRENT_TIMESTAMP,1000,0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="728" author="keerthi.P">
		<addColumn tableName="Mandates">
			<column name="defaultmandate" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="729" author="keerthi.P">
		<addColumn tableName="Mandates_temp">
			<column name="defaultmandate" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="730" author="keerthi.P">
		<sql>
			<![CDATA[
				UPDATE Mandates Set defaultmandate = 0  where defaultmandate is null;
				UPDATE Mandates_temp Set defaultmandate = 0 where defaultmandate is null;
			]]>
		</sql>
	</changeSet>

	<changeSet id="731" author="keerthi.P" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE Mandates ADD CONSTRAINT DF_Mandates_DEFMND DEFAULT 0 FOR defaultmandate;
				ALTER TABLE Mandates_temp ADD CONSTRAINT DF_Mandates_temp_DEFMND DEFAULT 0 FOR defaultmandate;
			]]>
		</sql>
	</changeSet>

	<changeSet id="732" author="keerthi.P" dbms="postgresql, oracle">
		<addDefaultValue columnName="defaultmandate" tableName="Mandates" defaultValue="0" />
		<addDefaultValue columnName="defaultmandate" tableName="Mandates_temp" defaultValue="0" />
	</changeSet>

	<changeSet id="733_pre" author="keerthi.P" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'mandates_view');
			]]>
		</sql>
	</changeSet>


	<changeSet id="733" author="keerthi.P">
		<createView replaceIfExists="true" viewName="Mandates_View">
            SELECT T1.MANDATEID,
		    T1.CUSTID,
		    T1.MANDATEREF,
		    T1.MANDATETYPE,
		    T1.BANKBRANCHID,
		    T1.ACCNUMBER,
		    T1.ACCHOLDERNAME,
		    T1.JOINTACCHOLDERNAME,
		    T1.ACCTYPE,
		    T1.OPENMANDATE,
		    T1.STARTDATE,
		    T1.EXPIRYDATE,
		    T1.MAXLIMIT,
		    T1.PERIODICITY,
		    T1.PHONECOUNTRYCODE,
		    T1.PHONEAREACODE,
		    T1.PHONENUMBER,
		    T1.STATUS,
		    T1.APPROVALID,
		    T1.VERSION,
		    T1.LASTMNTBY,
		    T1.LASTMNTON,
		    T1.RECORDSTATUS,
		    T1.ROLECODE,
		    T1.NEXTROLECODE,
		    T1.TASKID,
		    T1.NEXTTASKID,
		    T1.RECORDTYPE,
		    T1.WORKFLOWID,
		    T1.REASON,
		    T1.MANDATECCY,
		    T2.CUSTCIF,
		    T2.CUSTSHRTNAME,
		    T3.BANKCODE,
		    T3.BRANCHCODE,
		    T3.BRANCHDESC,
		    T3.MICR,
		    T3.IFSC,
		    T3.CITY,
		    T4.BANKNAME,
		    T1.INPUTDATE,
		    T1.ACTIVE,
			T1.DEFAULTMANDATE,
		    0 AS USEEXISTING,
		    T1.ORGREFERENCE,
		    T5.PCCITYNAME,
		    T1.DOCUMENTNAME,
		    T1.DOCUMENTREF,
		    T1.EXTERNALREF,
		    T1.ENTITYCODE,
		    T6.ENTITYDESC,
		    T1.PRIMARYMANDATEID,
		    T1.SWAPISACTIVE,
		    T1.BARCODENUMBER,
			T7.PARTNERBANKCODE,
			T7.PARTNERBANKNAME,
			T1.PARTNERBANKID
		FROM MANDATES_TEMP T1
		     JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
		     LEFT JOIN BANKBRANCHES T3 ON T1.BANKBRANCHID = T3.BANKBRANCHID
		     LEFT JOIN BMTBANKDETAIL T4 ON T3.BANKCODE = T4.BANKCODE
		     LEFT JOIN RMTPROVINCEVSCITY T5 ON T3.CITY = T5.PCCITY
		     LEFT JOIN ENTITY T6 ON T1.ENTITYCODE = T6.ENTITYCODE
			 LEFT JOIN PARTNERBANKS T7 ON T1.PARTNERBANKID = T7.PARTNERBANKID
		UNION ALL
		SELECT T1.MANDATEID,
		    T1.CUSTID,
		    T1.MANDATEREF,
		    T1.MANDATETYPE,
		    T1.BANKBRANCHID,
		    T1.ACCNUMBER,
		    T1.ACCHOLDERNAME,
		    T1.JOINTACCHOLDERNAME,
		    T1.ACCTYPE,
		    T1.OPENMANDATE,
		    T1.STARTDATE,
		    T1.EXPIRYDATE,
		    T1.MAXLIMIT,
		    T1.PERIODICITY,
		    T1.PHONECOUNTRYCODE,
		    T1.PHONEAREACODE,
		    T1.PHONENUMBER,
		    T1.STATUS,
		    T1.APPROVALID,
		    T1.VERSION,
		    T1.LASTMNTBY,
		    T1.LASTMNTON,
		    T1.RECORDSTATUS,
		    T1.ROLECODE,
		    T1.NEXTROLECODE,
		    T1.TASKID,
		    T1.NEXTTASKID,
		    T1.RECORDTYPE,
		    T1.WORKFLOWID,
		    T1.REASON,
		    T1.MANDATECCY,
		    T2.CUSTCIF,
		    T2.CUSTSHRTNAME,
		    T3.BANKCODE,
		    T3.BRANCHCODE,
		    T3.BRANCHDESC,
		    T3.MICR,
		    T3.IFSC,
		    T3.CITY,
		    T4.BANKNAME,
		    T1.INPUTDATE,
		    T1.ACTIVE,
			T1.DEFAULTMANDATE,
		    1 AS USEEXISTING,
		    T1.ORGREFERENCE,
		    T5.PCCITYNAME,
		    T1.DOCUMENTNAME,
		    T1.DOCUMENTREF,
		    T1.EXTERNALREF,
		    T1.ENTITYCODE,
		    T6.ENTITYDESC,
		    T1.PRIMARYMANDATEID,
		    T1.SWAPISACTIVE,
		    T1.BARCODENUMBER,
			T7.PARTNERBANKCODE,
			T7.PARTNERBANKNAME,
			T1.PARTNERBANKID
			FROM MANDATES T1
		    JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
		    LEFT JOIN BANKBRANCHES T3 ON T1.BANKBRANCHID = T3.BANKBRANCHID
		    LEFT JOIN BMTBANKDETAIL T4 ON T3.BANKCODE = T4.BANKCODE
		    LEFT JOIN RMTPROVINCEVSCITY T5 ON T3.CITY = T5.PCCITY
		    LEFT JOIN ENTITY T6 ON T1.ENTITYCODE = T6.ENTITYCODE
			LEFT JOIN PARTNERBANKS T7 ON T1.PARTNERBANKID = T7.PARTNERBANKID
			WHERE NOT (EXISTS ( SELECT 1 FROM MANDATES_TEMP
		    WHERE MANDATES_TEMP.MANDATEID = T1.MANDATEID))
		</createView>
	</changeSet>

	<changeSet id="733_post" author="keerthi.P" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'mandates_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="734_pre" author="keerthi.P" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'mandates_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="734" author="keerthi.P">
		<createView replaceIfExists="true" viewName="MANDATES_TVIEW">
           SELECT T1.MANDATEID,
		    T1.CUSTID,
		    T1.MANDATEREF,
		    T1.MANDATETYPE,
		    T1.BANKBRANCHID,
		    T1.ACCNUMBER,
		    T1.ACCHOLDERNAME,
		    T1.JOINTACCHOLDERNAME,
		    T1.ACCTYPE,
		    T1.OPENMANDATE,
		    T1.STARTDATE,
		    T1.EXPIRYDATE,
		    T1.MAXLIMIT,
		    T1.PERIODICITY,
		    T1.PHONECOUNTRYCODE,
		    T1.PHONEAREACODE,
		    T1.PHONENUMBER,
		    T1.STATUS,
		    T1.APPROVALID,
		    T1.VERSION,
		    T1.LASTMNTBY,
		    T1.LASTMNTON,
		    T1.RECORDSTATUS,
		    T1.ROLECODE,
		    T1.NEXTROLECODE,
		    T1.TASKID,
		    T1.NEXTTASKID,
		    T1.RECORDTYPE,
		    T1.WORKFLOWID,
		    T1.REASON,
		    T1.MANDATECCY,
		    T2.CUSTCIF,
		    T2.CUSTSHRTNAME,
		    T3.BANKCODE,
		    T3.BRANCHCODE,
		    T3.BRANCHDESC,
		    T3.MICR,
		    T3.IFSC,
		    T3.CITY,
		    T4.BANKNAME,
		    T1.INPUTDATE,
		    T1.ACTIVE,
			T1.DEFAULTMANDATE,
		    0 AS USEEXISTING,
		    T1.ORGREFERENCE,
		    T5.PCCITYNAME,
		    T1.DOCUMENTNAME,
		    T1.DOCUMENTREF,
		    T1.EXTERNALREF,
		    T1.ENTITYCODE,
		    T6.ENTITYDESC,
		    T1.PRIMARYMANDATEID,
		    T1.SWAPISACTIVE,
		    T1.BARCODENUMBER,
			T7.PARTNERBANKCODE,
			T7.PARTNERBANKNAME,
			T1.PARTNERBANKID
			FROM MANDATES_TEMP T1
			JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
			LEFT JOIN BANKBRANCHES T3 ON T1.BANKBRANCHID = T3.BANKBRANCHID
		    LEFT JOIN BMTBANKDETAIL T4 ON T3.BANKCODE = T4.BANKCODE
			LEFT JOIN RMTPROVINCEVSCITY T5 ON T3.CITY = T5.PCCITY
			LEFT JOIN ENTITY T6 ON T1.ENTITYCODE = T6.ENTITYCODE
			LEFT JOIN PARTNERBANKS T7 ON T1.PARTNERBANKID = T7.PARTNERBANKID
		</createView>
	</changeSet>

	<changeSet id="734_post" author="keerthi.P" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'mandates_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="735_pre" author="keerthi.P" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'mandates_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="735" author="keerthi.P">
		<createView replaceIfExists="true" viewName="MANDATES_AVIEW">
	        SELECT T1.MANDATEID,
	        T1.CUSTID,
	        T1.MANDATEREF,
	        T1.MANDATETYPE,
	        T1.BANKBRANCHID,
	        T1.ACCNUMBER,
	        T1.ACCHOLDERNAME,
	        T1.JOINTACCHOLDERNAME,
	        T1.ACCTYPE,
	        T1.OPENMANDATE,
	        T1.STARTDATE,
	        T1.EXPIRYDATE,
	        T1.MAXLIMIT,
	        T1.PERIODICITY,
	        T1.PHONECOUNTRYCODE,
	        T1.PHONEAREACODE,
	        T1.PHONENUMBER,
	        T1.STATUS,
	        T1.APPROVALID,
	        T1.VERSION,
	        T1.LASTMNTBY,
	        T1.LASTMNTON,
	        T1.RECORDSTATUS,
	        T1.ROLECODE,
	        T1.NEXTROLECODE,
	        T1.TASKID,
	        T1.NEXTTASKID,
	        T1.RECORDTYPE,
	        T1.WORKFLOWID,
	        T1.REASON,
	        T1.MANDATECCY,
	        T2.CUSTCIF,
	        T2.CUSTSHRTNAME,
	        T3.BANKCODE,
	        T3.BRANCHCODE,
	        T3.BRANCHDESC,
	        T3.MICR,
	        T3.IFSC,
	        T3.CITY,
	        T4.BANKNAME,
	        T1.INPUTDATE,
	        T1.INPUTDATE AS FROMDATE,
	        T1.INPUTDATE AS TODATE,
	        T1.ACTIVE,
			T1.DEFAULTMANDATE,
	        1 AS USEEXISTING,
	        T1.ORGREFERENCE,
	        T5.PCCITYNAME,
	        T1.DOCUMENTNAME,
	        T1.DOCUMENTREF,
	        T1.EXTERNALREF,
	        T1.ENTITYCODE,
	        T6.ENTITYDESC,
	        T1.PRIMARYMANDATEID,
	        T1.SWAPISACTIVE,
	        T1.BARCODENUMBER,
	        T7.PARTNERBANKCODE,
	        T7.PARTNERBANKNAME,
	        T1.PARTNERBANKID
	        FROM MANDATES T1
	        JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
	        LEFT JOIN BANKBRANCHES T3 ON T1.BANKBRANCHID = T3.BANKBRANCHID
	        LEFT JOIN BMTBANKDETAIL T4 ON T3.BANKCODE = T4.BANKCODE
	        LEFT JOIN RMTPROVINCEVSCITY T5 ON T3.CITY = T5.PCCITY
	        LEFT JOIN ENTITY T6 ON T1.ENTITYCODE = T6.ENTITYCODE
	        LEFT JOIN PARTNERBANKS T7 ON T1.PARTNERBANKID = T7.PARTNERBANKID
		</createView>
	</changeSet>

	<changeSet id="735_post" author="keerthi.P" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'mandates_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="736" author="keerthi.P">
		<sql>
			<![CDATA[
				UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS);
			 	UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);
			 	
			    DELETE FROM SecRights where RightName='MandateDialog_DefaultMandate';
				DELETE FROM SECGROUPRIGHTS Where GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='MANDATE_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='MandateDialog_DefaultMandate');
				DELETE FROM SECGROUPRIGHTS Where GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='CL_ORIGINATION_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='MandateDialog_DefaultMandate');
				DELETE FROM SECGROUPRIGHTS Where GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='CL_ORIGINATION_WRM') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='MandateDialog_DefaultMandate');
				DELETE FROM SECGROUPRIGHTS Where GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='BFSD_ORIGINATION_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='MandateDialog_DefaultMandate');
				DELETE FROM SECGROUPRIGHTS Where GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='MANDATES_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='MandateDialog_DefaultMandate');
					
			    INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3,'MandateDialog_DefaultMandate','MandateDialog',0,1000,current_timestamp,'Approved','',' ',' ',' ',' ',0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='MANDATE_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='MandateDialog_DefaultMandate'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='CL_ORIGINATION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='MandateDialog_DefaultMandate'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='CL_ORIGINATION_WRM') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='MandateDialog_DefaultMandate'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='BFSD_ORIGINATION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='MandateDialog_DefaultMandate'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='MANDATES_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='MandateDialog_DefaultMandate'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
				
				UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS);
			 	UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);
				
			]]>
		</sql>
	</changeSet>

	<changeSet id="737" author="keerthi.P">
		<sql>
			<![CDATA[
				DELETE FROM SMTPARAMETERS WHERE SYSPARMCODE = 'ALLOW_DEFAULT_MANDATE_REQ';
				INSERT INTO SMTparameters VALUES('ALLOW_DEFAULT_MANDATE_REQ','Default Mandate required or not','String',1,'N',1,0,null,null,'Default Mandate required or not',1,1000,current_timestamp,'Approved',null,null,null,null,null,0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="738" author="satyanarayana.g">
		<sql>
			<![CDATA[
				Delete from SMTparameters where SysParmCode = 'ON_LOAD_SEARCH_REQUIRED';
				Insert into SMTPARAMETERS (SYSPARMCODE, SYSPARMDESC, SYSPARMTYPE, SYSPARMMAINT, SYSPARMVALUE, SYSPARMLENGTH, SYSPARMDEC, SYSPARMLIST, SYSPARMVALDMOD, SYSPARMDESCRIPTION, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ('ON_LOAD_SEARCH_REQUIRED','ON load search required or not?', 'String', 1, 'N', 1, 0, null, null, 'ON load search required or not?', 1, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="739" author="satyanarayana.g">
		<sql>
			<![CDATA[
				DELETE FROM SMTPARAMETERS WHERE SYSPARMCODE = 'ON_LOAD_SEARCH_REQUIRED';
				DELETE FROM SMTPARAMETERS WHERE SYSPARMCODE = 'LIST_RENDER_ON_LOAD';
				INSERT INTO SMTPARAMETERS (SYSPARMCODE, SYSPARMDESC, SYSPARMTYPE, SYSPARMMAINT, SYSPARMVALUE, SYSPARMLENGTH, SYSPARMDEC, SYSPARMLIST, SYSPARMVALDMOD, SYSPARMDESCRIPTION, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ('LIST_RENDER_ON_LOAD','List Render on load required or not?', 'String', 1, 'Y', 1, 0, null, null, 'List Render on load required or not?', 1, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="740" author="murthy.y">
		<sql>
			<![CDATA[
				DELETE FROM SMTPARAMETERS WHERE SYSPARMCODE = 'USER_NOTIFICATION_PULISH';
				INSERT INTO SMTPARAMETERS (SYSPARMCODE, SYSPARMDESC, SYSPARMTYPE, SYSPARMMAINT, SYSPARMVALUE, SYSPARMLENGTH, SYSPARMDEC, SYSPARMLIST, SYSPARMVALDMOD, SYSPARMDESCRIPTION, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ('USER_NOTIFICATION_PULISH','Show user notification or not?', 'String', 1, 'Y', 1, 0, null, null, 'System will shoul the notification to the user when the specified flag is true?', 1, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="741" author="Gopal.p">
		<createView viewName="receiptallocationdetail_aview" replaceIfExists="true">
			 SELECT t1.receiptallocationid,
				    t1.receiptid,
				    t1.allocationid,
				    t1.allocationtype,
				    t1.allocationto,
				    t1.paidamount,
				    t1.waivedamount,
				    COALESCE(t3.feetypedesc, t5.feetypedesc) AS typedesc,
				    t1.PaidGST,
					t1.waivedreqamount,
					t1.waiveraccepted,
					t1.totaldue,
					t1.waivedgst,
					t1.taxheaderid
			FROM 	receiptallocationdetail t1
				    LEFT JOIN finfeedetail t2 ON t1.allocationto = t2.feeid AND t1.allocationtype = 'FEE'
				    LEFT JOIN feetypes t3 ON t2.feetypeid = t3.feetypeid
				    LEFT JOIN manualadvise t4 ON t1.allocationto = t4.adviseid AND t1.allocationtype = 'MANADV'
				    LEFT JOIN feetypes t5 ON t4.feetypeid = t5.feetypeid
		</createView>
	</changeSet>

	<changeSet id="742" author="satyanarayana.g">
		<addColumn tableName="WIFFinFeeDetail">
			<column name="PaidTDS" type="decimal(18,0)" />
		</addColumn>
	</changeSet>

	<changeSet id="743" author="satyanarayana.g">
		<addColumn tableName="WIFFinFeeDetail">
			<column name="RemTDS" type="decimal(18,0)" />
		</addColumn>
	</changeSet>

	<changeSet id="744" author="satyanarayana.g">
		<addColumn tableName="WIFFinFeeDetail">
			<column name="NetTDS" type="decimal(18,0)" />
		</addColumn>
	</changeSet>

	<changeSet id="745" author="satyanarayana.g">
		<addColumn tableName="WIFFinFeeDetail_TEMP">
			<column name="PaidTDS" type="decimal(18,0) " />
		</addColumn>
	</changeSet>

	<changeSet id="746" author="satyanarayana.g">
		<addColumn tableName="WIFFinFeeDetail_TEMP">
			<column name="RemTDS" type="decimal(18,0)" />
		</addColumn>
	</changeSet>

	<changeSet id="747" author="satyanarayana.g">
		<addColumn tableName="WIFFinFeeDetail_TEMP">
			<column name="NetTDS" type="decimal(18,0)" />
		</addColumn>
	</changeSet>

	<changeSet id="748" author="satyanarayana.g">
		<sql>
			<![CDATA[
				UPDATE WIFFinFeeDetail Set PaidTDS = 0 where PaidTDS is null;
				UPDATE WIFFinFeeDetail Set RemTDS = 0 where RemTDS is null;
				UPDATE WIFFinFeeDetail Set NetTDS = 0 where NetTDS is null;
				
				UPDATE WIFFinFeeDetail_TEMP Set PaidTDS = 0 where PaidTDS is null;
				UPDATE WIFFinFeeDetail_TEMP Set RemTDS = 0 where RemTDS is null;
				UPDATE WIFFinFeeDetail_TEMP Set NetTDS = 0 where NetTDS is null;
			]]>
		</sql>
	</changeSet>

	<changeSet id="749" author="satyanarayana.g" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE WIFFinFeeDetail ADD CONSTRAINT DF_WIFFinFeeDetail_PDS DEFAULT 0 FOR PaidTDS;
				ALTER TABLE WIFFinFeeDetail ADD CONSTRAINT DF_WIFFinFeeDetail_RTD DEFAULT 0 FOR RemTDS;
				ALTER TABLE WIFFinFeeDetail ADD CONSTRAINT DF_WIFFinFeeDetail_NTD DEFAULT 0 FOR NetTDS;
				
				ALTER TABLE WIFFinFeeDetail_Temp ADD CONSTRAINT DF_WIFFinFeeDetail_TEMP_PDS DEFAULT 0 FOR PaidTDS;
				ALTER TABLE WIFFinFeeDetail_Temp ADD CONSTRAINT DF_WIFFinFeeDetail_TEMP_RTD DEFAULT 0 FOR RemTDS;
				ALTER TABLE WIFFinFeeDetail_Temp ADD CONSTRAINT DF_WIFFinFeeDetail_TEMP_NTD DEFAULT 0 FOR NetTDS;
			]]>
		</sql>
	</changeSet>

	<changeSet id="750" author="satyanarayana.g" dbms="postgresql, oracle">
		<addDefaultValue columnName="PaidTDS" tableName="WIFFinFeeDetail" defaultValue="0" />
		<addDefaultValue columnName="RemTDS" tableName="WIFFinFeeDetail" defaultValue="0" />
		<addDefaultValue columnName="NetTDS" tableName="WIFFinFeeDetail" defaultValue="0" />
		<addDefaultValue columnName="PaidTDS" tableName="WIFFinFeeDetail_Temp" defaultValue="0" />
		<addDefaultValue columnName="RemTDS" tableName="WIFFinFeeDetail_Temp" defaultValue="0" />
		<addDefaultValue columnName="NetTDS" tableName="WIFFinFeeDetail_Temp" defaultValue="0" />
	</changeSet>

	<changeSet id="751_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'wiffinfeedetail_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="751" author="satyanarayana.g">
		<createView viewName="WIFFINFEEDETAIL_VIEW" replaceIfExists="true">
			<![CDATA[
				 SELECT T1.FEEID,
					  T1.FINREFERENCE,
					  T1.FEESEQ,
					  T1.ORIGINATIONFEE,
					  T1.FINEVENT,
					  T1.FEETYPEID,
					  T1.FEEORDER,
					  T1.CALCULATEDAMOUNT,
					  T1.ACTUALAMOUNT,
					  T1.WAIVEDAMOUNT,
					  T1.PAIDAMOUNT,
					  T1.FEESCHEDULEMETHOD,
					  T1.TERMS,
					  T1.REMAININGFEE,
					  T1.PAYMENTREF,
					  T1.CALCULATIONTYPE,
					  T1.RULECODE,
					  T1.FIXEDAMOUNT,
					  T1.PERCENTAGE,
					  T1.CALCULATEON,
					  T1.ALWDEVIATION,
					  T1.MAXWAIVERPERC,
					  T1.ALWMODIFYFEE,
					  T1.ALWMODIFYFEESCHDMTHD,
					  T1.VASREFERENCE,
					  T1.STATUS,
					  T1.TAXAPPLICABLE,
					  T1.TAXCOMPONENT,
					  T1.PAIDAMOUNTORIGINAL,
					  T1.PAIDAMOUNTGST,
					  T1.NETAMOUNTORIGINAL,
					  T1.NETAMOUNTGST,
					  T1.NETAMOUNT,
					  T1.REMAININGFEEORIGINAL,
					  T1.REMAININGFEEGST,
					  T1.ACTUALAMOUNTORIGINAL,
					  T1.ACTUALAMOUNTGST,
					  T1.VERSION,
					  T1.LASTMNTBY,
					  T1.LASTMNTON,
					  T1.RECORDSTATUS,
					  T1.ROLECODE,
					  T1.NEXTROLECODE,
					  T1.TASKID,
					  T1.NEXTTASKID,
					  T1.RECORDTYPE,
					  T1.WORKFLOWID,
					  T2.FEETYPECODE,
					  T2.FEETYPEDESC,
					  T1.REFUNDABLE,
					  T1.INSTRUCTIONUID,
					  T1.WAIVEDGST,
					  T1.REFERENCEID,
					  T1.TAXHEADERID,
					  T1.PAIDTDS,
					  T1.REMTDS,
					  T1.NETTDS
					FROM WIFFINFEEDETAIL_TEMP T1
					LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
					UNION ALL
					SELECT T1.FEEID,
					  T1.FINREFERENCE,
					  T1.FEESEQ,
					  T1.ORIGINATIONFEE,
					  T1.FINEVENT,
					  T1.FEETYPEID,
					  T1.FEEORDER,
					  T1.CALCULATEDAMOUNT,
					  T1.ACTUALAMOUNT,
					  T1.WAIVEDAMOUNT,
					  T1.PAIDAMOUNT,
					  T1.FEESCHEDULEMETHOD,
					  T1.TERMS,
					  T1.REMAININGFEE,
					  T1.PAYMENTREF,
					  T1.CALCULATIONTYPE,
					  T1.RULECODE,
					  T1.FIXEDAMOUNT,
					  T1.PERCENTAGE,
					  T1.CALCULATEON,
					  T1.ALWDEVIATION,
					  T1.MAXWAIVERPERC,
					  T1.ALWMODIFYFEE,
					  T1.ALWMODIFYFEESCHDMTHD,
					  T1.VASREFERENCE,
					  T1.STATUS,
					  T1.TAXAPPLICABLE,
					  T1.TAXCOMPONENT,
					  T1.PAIDAMOUNTORIGINAL,
					  T1.PAIDAMOUNTGST,
					  T1.NETAMOUNTORIGINAL,
					  T1.NETAMOUNTGST,
					  T1.NETAMOUNT,
					  T1.REMAININGFEEORIGINAL,
					  T1.REMAININGFEEGST,
					  T1.ACTUALAMOUNTORIGINAL,
					  T1.ACTUALAMOUNTGST,
					  T1.VERSION,
					  T1.LASTMNTBY,
					  T1.LASTMNTON,
					  T1.RECORDSTATUS,
					  T1.ROLECODE,
					  T1.NEXTROLECODE,
					  T1.TASKID,
					  T1.NEXTTASKID,
					  T1.RECORDTYPE,
					  T1.WORKFLOWID,
					  T2.FEETYPECODE,
					  T2.FEETYPEDESC,
					  T1.REFUNDABLE,
					  T1.INSTRUCTIONUID,
					  T1.WAIVEDGST,
					  T1.REFERENCEID,
					  T1.TAXHEADERID,
					  T1.PAIDTDS,
					  T1.REMTDS,
					  T1.NETTDS
					FROM WIFFINFEEDETAIL T1
					LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
					WHERE NOT (EXISTS (SELECT 1 FROM WIFFINFEEDETAIL_TEMP WHERE WIFFINFEEDETAIL_TEMP.FINREFERENCE = T1.FINREFERENCE
					AND WIFFINFEEDETAIL_TEMP.ORIGINATIONFEE = T1.ORIGINATIONFEE AND WIFFINFEEDETAIL_TEMP.FINEVENT = T1.FINEVENT
					AND WIFFINFEEDETAIL_TEMP.FEETYPEID = T1.FEETYPEID ))
				     ]]>
		</createView>
	</changeSet>

	<changeSet id="751_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'wiffinfeedetail_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="752" author="Siva">
		<sql>
   			 <![CDATA[
        		Insert into SMTPARAMETERS (SYSPARMCODE,SYSPARMDESC,SYSPARMTYPE,SYSPARMMAINT,SYSPARMVALUE,SYSPARMLENGTH,SYSPARMDEC,SYSPARMLIST,SYSPARMVALDMOD,SYSPARMDESCRIPTION,VERSION,LASTMNTBY,LASTMNTON,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID) values ('DPD_CALC_INCLUDE_EXCESS','DPD Calculation Including Excess Amount','String',1,'N',1,0,null,null,' DPD Calculation Including Excess Amount',1,1000,current_timestamp,'Approved',null,null,null,null,null,0);
     		]]>
		</sql>
	</changeSet>


	<changeSet id="753" author="meena.a">
		<sql>
			<![CDATA[
				delete from SMTPARAMETERS where sysparmcode='ALLOW_GST_RETAIL_CUSTOMER';
			   	INSERT INTO SMTPARAMETERS VALUES ('ALLOW_GST_RETAIL_CUSTOMER','Allow Fee calculatedon on adjustedprincipal', 'String',1,'Y',1,0,null,null,'Allow Gst Tab on Retail Customer' ,3,1000,current_Timestamp,'Approved',null,null,null,null,null,0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="754.1_pre" author="durgaprasad.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'manualadvise_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="754" author="durgaprasad.g">
		<createView viewName="MANUALADVISE_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ADVISEID,
				    T1.ADVISETYPE,
				    T1.FINREFERENCE,
				    T1.FEETYPEID,
				    T1.SEQUENCE,
				    T1.ADVISEAMOUNT,
				    T1.PAIDAMOUNT,
				    T1.WAIVEDAMOUNT,
				    T1.REMARKS,
				    T1.VALUEDATE,
				    T1.POSTDATE,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T2.FEETYPEDESC,
				    T2.FEETYPECODE,
				    T1.BOUNCEID,
				    T1.RECEIPTID,
				    T3.BOUNCECODE,
				    T1.RESERVEDAMT,
				    T1.BALANCEAMT,
				    T3.REASON AS BOUNCECODEDESC,
				    COALESCE(T2.TAXAPPLICABLE, 0) AS TAXAPPLICABLE,
				    T2.TAXCOMPONENT,
           			COALESCE(T2.TDSREQ, 0) AS TDSREQ,
				    T1.PAIDCGST,
				    T1.PAIDSGST,
				    T1.PAIDIGST,
				    T1.PAIDUGST,
				    T1.WAIVEDCGST,
				    T1.WAIVEDSGST,
				    T1.WAIVEDUGST,
				    T1.WAIVEDIGST,
				    T1.WAIVEDCESS,
				    T1.PAIDCESS,
					T1.FINSOURCE,
					T1.DUECREATION,
					T1.LINKEDTRANID
				   FROM MANUALADVISE_TEMP T1
				     LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
				     LEFT JOIN BOUNCEREASONS T3 ON T1.BOUNCEID = T3.BOUNCEID
				UNION ALL
				 SELECT T1.ADVISEID,
				    T1.ADVISETYPE,
				    T1.FINREFERENCE,
				    T1.FEETYPEID,
				    T1.SEQUENCE,
				    T1.ADVISEAMOUNT,
				    T1.PAIDAMOUNT,
				    T1.WAIVEDAMOUNT,
				    T1.REMARKS,
				    T1.VALUEDATE,
				    T1.POSTDATE,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T2.FEETYPEDESC,
				    T2.FEETYPECODE,
				    T1.BOUNCEID,
				    T1.RECEIPTID,
				    T3.BOUNCECODE,
				    T1.RESERVEDAMT,
				    T1.BALANCEAMT,
				    T3.REASON AS BOUNCECODEDESC,
				    COALESCE(T2.TAXAPPLICABLE, 0) AS TAXAPPLICABLE,
            		T2.TAXCOMPONENT,
            		COALESCE(T2.TDSREQ, 0) AS TDSREQ,
				    T1.PAIDCGST,
				    T1.PAIDSGST,
				    T1.PAIDIGST,
				    T1.PAIDUGST,
				    T1.WAIVEDCGST,
				    T1.WAIVEDSGST,
				    T1.WAIVEDUGST,
				    T1.WAIVEDIGST,
				    T1.WAIVEDCESS,
				    T1.PAIDCESS,
					T1.FINSOURCE,
					T1.DUECREATION,
					T1.LINKEDTRANID
				   FROM MANUALADVISE T1
				     LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
				     LEFT JOIN BOUNCEREASONS T3 ON T1.BOUNCEID = T3.BOUNCEID
				  WHERE NOT (EXISTS ( SELECT 1
				  FROM MANUALADVISE_TEMP
				  WHERE MANUALADVISE_TEMP.ADVISEID = T1.ADVISEID))
			]]>
		</createView>
	</changeSet>

	<changeSet id="754.1_post" author="durgaprasad.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'manualadvise_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="755.1_pre" author="durgaprasad.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'manualadvise_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="755" author="durgaprasad.g">
		<createView viewName="MANUALADVISE_AVIEW" replaceIfExists="true">
			<![CDATA[
				 SELECT T1.ADVISEID,
				    T1.ADVISETYPE,
				    T1.FINREFERENCE,
				    T1.FEETYPEID,
				    T1.SEQUENCE,
				    T1.ADVISEAMOUNT,
				    T1.PAIDAMOUNT,
				    T1.WAIVEDAMOUNT,
				    T1.REMARKS,
				    T1.VALUEDATE,
				    T1.POSTDATE,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T2.FEETYPEDESC,
				    T2.FEETYPECODE,
				    T1.BOUNCEID,
				    T1.RECEIPTID,
				    T3.BOUNCECODE,
				    T1.RESERVEDAMT,
				    T1.BALANCEAMT,
				    T3.REASON AS BOUNCECODEDESC,
				    COALESCE(T2.TAXAPPLICABLE, 0) AS TAXAPPLICABLE,
           			COALESCE(T2.TDSREQ, 0) AS TDSREQ,
				    T2.TAXCOMPONENT,
				    T1.PAIDCGST,
				    T1.PAIDSGST,
				    T1.PAIDIGST,
				    T1.PAIDUGST,
				    T1.WAIVEDCGST,
				    T1.WAIVEDSGST,
				    T1.WAIVEDUGST,
				    T1.WAIVEDIGST,
				    T1.WAIVEDCESS,
				    T1.PAIDCESS,
					T1.FINSOURCE,
					T1.DUECREATION,
					T1.LINKEDTRANID
				   FROM MANUALADVISE T1
				     LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
				     LEFT JOIN BOUNCEREASONS T3 ON T1.BOUNCEID = T3.BOUNCEID
			]]>
		</createView>
	</changeSet>

	<changeSet id="755_post" author="durgaprasad.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'manualadvise_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="756_pre" author="durgaprasad.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'manualadvise_lview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="756" author="durgaprasad.g">
		<createView viewName="MANUALADVISE_LVIEW" replaceIfExists="true">
			<![CDATA[
				 SELECT T1.ADVISEID,
				    T1.ADVISETYPE,
				    T1.FINREFERENCE,
				    T1.FEETYPEID,
				    T1.SEQUENCE,
				    T1.ADVISEAMOUNT,
				    T1.PAIDAMOUNT,
				    T1.WAIVEDAMOUNT,
				    T1.REMARKS,
				    T1.VALUEDATE,
				    T1.POSTDATE,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T2.FEETYPEDESC,
				    T2.FEETYPECODE,
				    T1.BOUNCEID,
				    T1.RECEIPTID,
				    T3.BOUNCECODE,
				    T1.RESERVEDAMT,
				    T1.BALANCEAMT,
				    T3.REASON AS BOUNCECODEDESC,
				    COALESCE(T2.TAXAPPLICABLE, 0) AS TAXAPPLICABLE,
            		COALESCE(T2.TDSREQ, 0) AS TDSREQ,
				    T2.TAXCOMPONENT,
				    T1.PAIDCGST,
				    T1.PAIDSGST,
				    T1.PAIDIGST,
				    T1.PAIDUGST,
				    T1.WAIVEDCGST,
				    T1.WAIVEDSGST,
				    T1.WAIVEDUGST,
				    T1.WAIVEDIGST,
					T1.FINSOURCE,
					T1.DUECREATION,
					T1.LINKEDTRANID
				    FROM MANUALADVISE T1
				    LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
				    LEFT JOIN BOUNCEREASONS T3 ON T1.BOUNCEID = T3.BOUNCEID
			]]>
		</createView>
	</changeSet>

	<changeSet id="756_post" author="durgaprasad.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'manualadvise_lview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="757_pre" author="durgaprasad.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'manualadvise_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="757" author="durgaprasad.g">
		<createView viewName="MANUALADVISE_TVIEW" replaceIfExists="true">
			<![CDATA[
				 SELECT T1.ADVISEID,
				    T1.ADVISETYPE,
				    T1.FINREFERENCE,
				    T1.FEETYPEID,
				    T1.SEQUENCE,
				    T1.ADVISEAMOUNT,
				    T1.PAIDAMOUNT,
				    T1.WAIVEDAMOUNT,
				    T1.REMARKS,
				    T1.VALUEDATE,
				    T1.POSTDATE,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T2.FEETYPEDESC,
				    T2.FEETYPECODE,
				    T1.BOUNCEID,
				    T1.RECEIPTID,
				    T3.BOUNCECODE,
				    T1.RESERVEDAMT,
				    T1.BALANCEAMT,
				    T3.REASON AS BOUNCECODEDESC,
				    COALESCE(T2.TAXAPPLICABLE, 0) AS TAXAPPLICABLE,
            		COALESCE(T2.TDSREQ, 0) AS TDSREQ,
				    T2.TAXCOMPONENT,
				    T1.PAIDCGST,
				    T1.PAIDSGST,
				    T1.PAIDIGST,
				    T1.PAIDUGST,
				    T1.WAIVEDCGST,
				    T1.WAIVEDSGST,
				    T1.WAIVEDUGST,
				    T1.WAIVEDIGST,
				    T1.WAIVEDCESS,
				    T1.PAIDCESS,
					T1.FINSOURCE,
					T1.DUECREATION,
					T1.LINKEDTRANID
				    FROM MANUALADVISE_TEMP T1
				    LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
				    LEFT JOIN BOUNCEREASONS T3 ON T1.BOUNCEID = T3.BOUNCEID
			]]>
		</createView>
	</changeSet>

	<changeSet id="757_post" author="durgaprasad.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'manualadvise_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="758_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemain_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="758" author="satyanarayana.g">
		<createView viewName="financemain_view" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINREFERENCE,
				    T1.INVESTMENTREF,
				    T1.NUMBEROFTERMS,
				    T1.GRCPERIODENDDATE,
				    T1.ALLOWGRCPERIOD,
				    T1.GRACEBASERATE,
				    T1.GRACESPECIALRATE,
				    T1.GRCPFTRATE,
				    T1.GRCPFTFRQ,
				    T1.NEXTGRCPFTDATE,
				    T1.ALLOWGRCPFTRVW,
				    T1.GRCPFTRVWFRQ,
				    T1.NEXTGRCPFTRVWDATE,
				    T1.ALLOWGRCCPZ,
				    T1.GRCCPZFRQ,
				    T1.NEXTGRCCPZDATE,
				    T1.REPAYBASERATE,
				    T1.REPAYSPECIALRATE,
				    T1.REPAYPROFITRATE,
				    T1.REPAYFRQ,
				    T1.NEXTREPAYDATE,
				    T1.REPAYPFTFRQ,
				    T1.NEXTREPAYPFTDATE,
				    T1.ALLOWREPAYRVW,
				    T1.REPAYRVWFRQ,
				    T1.NEXTREPAYRVWDATE,
				    T1.ALLOWREPAYCPZ,
				    T1.REPAYCPZFRQ,
				    T1.NEXTREPAYCPZDATE,
				    T1.MATURITYDATE,
				    T1.CPZATGRACEEND,
				    T1.DOWNPAYMENT,
				    T1.GRACEFLATAMOUNT,
				    T1.REQREPAYAMOUNT,
				    T1.TOTALPROFIT,
				    T1.TOTALCPZ,
				    T1.TOTALGROSSPFT,
				    T1.TOTALGROSSGRCPFT,
				    T1.TOTALGRACEPFT,
				    T1.TOTALGRACECPZ,
				    T1.GRCRATEBASIS,
				    T1.REPAYRATEBASIS,
				    T1.FINTYPE,
				    T1.FINREMARKS,
				    T1.FINCCY,
				    T1.SCHEDULEMETHOD,
				    T1.PROFITDAYSBASIS,
				    T1.REQMATURITY,
				    T1.CALTERMS,
				    T1.CALMATURITY,
				    T1.FIRSTREPAY,
				    T1.LASTREPAY,
				    T1.FINSTARTDATE,
				    T1.FINAMOUNT,
				    T1.FINAMOUNT + T1.FEECHARGEAMT - T1.DOWNPAYMENT  LOVDESCFINANCINGAMOUNT,
				    T1.FINREPAYMENTAMOUNT,
				    T1.CUSTID,
				    T1.DEFFERMENTS,
				    T1.PLANDEFERCOUNT,
				    T1.FINBRANCH,
				    T1.FINSOURCEID,
				    T1.ALLOWEDDEFRPYCHANGE,
				    T1.AVAILEDDEFRPYCHANGE,
				    T1.ALLOWEDDEFFRQCHANGE,
				    T1.AVAILEDDEFFRQCHANGE,
				    T1.RECALTYPE,
				    T1.FINASSETVALUE,
				    T1.DISBACCOUNTID,
				    T1.REPAYACCOUNTID,
				    T1.FINISACTIVE,
				    T1.LIMITVALID,
				    T1.OVERRIDELIMIT,
				    T1.SECURITYDEPOSIT,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T7.FINTYPEDESC  LOVDESCFINTYPENAME,
				    T7.FINMAXAMOUNT  LOVDESCFINMAXAMT,
				    T7.FINMINAMOUNT  LOVDESCFINMINAMOUNT,
				    T1.MINDOWNPAYPERC,
				    T7.FINISALWDIFFERMENT  LOVDESCFINALWDEFERMENT,
				    T7.FINISDWPAYREQUIRED  LOVDESCDWNPAYREQ,
				    T7.FINMAXDIFFERMENT  LOVDESCFINMAXDIFFERMENT,
				    T12.BRANCHDESC  LOVDESCFINBRANCHNAME,
				    T12.BRANCHPROVINCE  FINBRANCHPROVINCECODE,
				    T1.LASTREPAYDATE,
				    T1.LASTREPAYPFTDATE,
				    T1.LASTREPAYRVWDATE,
				    T1.LASTREPAYCPZDATE,
				    T1.ALLOWGRCREPAY,
				    T1.GRCSCHDMTHD,
				    T1.GRCMARGIN,
				    T1.REPAYMARGIN,
				    T1.FINCURRASSETVALUE,
				    T1.FINCOMMITMENTREF,
				    T1.FINLIMITREF,
				    T1.DEPRECIATIONFRQ,
				    T1.FINCONTRACTDATE,
				    T1.NEXTDEPDATE,
				    T1.LASTDEPDATE,
				    T1.FINACCOUNT,
				    T1.FINCUSTPFTACCOUNT,
				    T17.ACRTILLLBD  LOVDESCACCRUEDTILLLBD,
				    T7.FINRVWRATEAPPLFOR,
				    T1.TOTALREPAYAMT,
				    T1.CLOSINGSTATUS,
				    T1.FINAPPROVEDDATE,
				    T1.FEECHARGEAMT,
				    T1.BLACKLISTED,
				    T1.FINREPAYPFTONFRQ,
				    T1.ANUALIZEDPERCRATE,
				    T1.EFFECTIVERATEOFRETURN,
				    T1.MIGRATEDFINANCE,
				    T1.SCHEDULEMAINTAINED,
				    T1.SCHEDULEREGENERATED,
				    T1.FINPURPOSE,
				    T39.LOANPURPOSEDESC  LOVDESCFINPURPOSENAME,
				    T1.FINSTATUS,
				    T1.FINSTSREASON,
				    T1.INITIATEUSER,
				    T1.BANKNAME,
				    T1.IBAN,
				    T1.ACCOUNTTYPE,
				    T1.DDAREFERENCENO,
				    T7.FINSCHEDULEON  LOVDESCFINSCHEDULEON,
				    T1.CUSTDSR,
				    T1.JOINTACCOUNT,
				    T1.JOINTCUSTID,
				    T1.DOWNPAYBANK,
				    T1.DOWNPAYSUPL,
				    T1.DOWNPAYACCOUNT,
				    T1.SECURITYCOLLATERAL,
				    T1.APPROVED,
				    T1.DISCREPANCY,
				    T1.LIMITAPPROVED,
				    T1.GRACETERMS,
				    T7.FINDIVISION  LOVDESCFINDIVISION,
				    T1.RCDMAINTAINSTS,
				    T1.FINREPAYMETHOD,
				    T1.GRCPROFITDAYSBASIS,
				    T1.STEPFINANCE,
				    T1.STEPTYPE,
				    T1.STEPPOLICY,
				    T1.ALWMANUALSTEPS,
				    T1.NOOFSTEPS,
				    T1.LINKEDFINREF,
				    T1.NEXTUSERID,
				    T1.PRIORITY,
				    T24.POLICYDESC  LOVDESCSTEPPOLICYNAME,
				    T1.GRCMINRATE,
				    T1.GRCMAXRATE,
				    T1.RPYMINRATE,
				    T1.RPYMAXRATE,
				    T1.DEVIATIONAPPROVAL,
				    T1.MANUALSCHEDULE,
				    T1.TAKEOVERFINANCE,
				    T1.GRCADVBASERATE,
				    T1.GRCADVMARGIN,
				    T1.GRCADVPFTRATE,
				    T1.RPYADVBASERATE,
				    T1.RPYADVMARGIN,
				    T1.RPYADVPFTRATE,
				    T1.SUPPLEMENTRENT,
				    T1.INCREASEDCOST,
				    T1.CREDITINSAMT,
				    T1.ROLLOVERFRQ,
				    T1.NEXTROLLOVERDATE,
				    T27.CUSTSTSDESCRIPTION,
				    T1.SHARIASTATUS,
				    T1.INITIATEDATE,
				    T1.FINPREAPPROVEDREF,
				    T1.MMAID,
				    T1.ACCOUNTSOFFICER,
				    T1.FEEACCOUNTID,
				    T1.FINCANCELAC,
				    T28.DEALERNAME  LOVDESCACCOUNTSOFFICER,
				    T28.DEALERCITY  LOVDESCSOURCECITY,
				    T1.DSACODE,
				    T30.ROFFICERDESC  DSACODEDESC,
				    T1.TDSAPPLICABLE,
				    T1.MANDATEID,
				    T1.DROPLINEFRQ,
				    T1.FIRSTDROPLINEDATE,
				    T1.PFTSERVICINGODLIMIT,
				    T1.INSURANCEAMT,
				    T1.DEDUCTINSDISB,
				    T1.ALWBPI,
				    T1.BPITREATMENT,
				    T1.PLANEMIHALW,
				    T1.PLANEMIHMETHOD,
				    T1.PLANEMIHMAXPERYEAR,
				    T1.PLANEMIHMAX,
				    T1.PLANEMIHLOCKPERIOD,
				    T1.PLANEMICPZ,
				    T1.CALROUNDINGMODE,
				    T1.ALWMULTIDISB,
				    T1.APPLICATIONNO,
				    T1.REFERRALID,
				    T33.ROFFICERDESC  REFERRALIDDESC,
				    T1.DMACODE,
				    T34.ROFFICERDESC  DMACODEDESC,
				    T1.SALESDEPARTMENT,
				    T35.DEPTDESC  SALESDEPARTMENTDESC,
				    T1.QUICKDISB,
				    T1.WIFREFERENCE,
				    T1.UNPLANEMIHLOCKPERIOD,
				    T1.UNPLANEMICPZ,
				    T1.REAGECPZ,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.AVAILEDUNPLANEMI,
				    T1.AVAILEDREAGEH,
				    T1.BPIAMOUNT,
				    T1.DEDUCTFEEDISB,
				    T1.RVWRATEAPPLFOR,
				    T1.SCHCALONRVW,
				    T1.PASTDUEPFTCALMTHD,
				    T1.PASTDUEPFTMARGIN,
				    T1.DROPPINGMETHOD,
				    T1.RATECHGANYDAY,
				    T1.PROMOTIONCODE,
				    T1.RESTRUCTURELOAN,
				    T1.OLDFINREFERENCE,
				    T1.REAGEBUCKET,
				    T1.FINCATEGORY,
				    T1.PRODUCTCATEGORY,
				    T1.ROUNDINGTARGET,
				    T36.ENTITYCODE  LOVDESCENTITYCODE,
				    T1.ELIGIBILITYMETHOD,
				    T38.FIELDCODEVALUE  LOVELIGIBILITYMETHOD,
				    T38.VALUEDESC  LOVDESCELIGIBILITYMETHOD,
				    T1.EMPLOYEENAME,
				    T37.ROFFICERDESC  EMPLOYEENAMEDESC,
				    T1.SAMPLINGREQUIRED,
				    T1.LEGALREQUIRED,
				    T1.GRCMAXAMOUNT,
				    T1.CONNECTOR,
				    T40.DEALERNAME  CONNECTORCODE,
				    T40.DEALERCITY  CONNECTORDESC,
				    T1.ADVANCEEMI,
				    T1.ADVEMITERMS,
				    T1.BPIPFTDAYSBASIS,
				    T1.FIXEDRATETENOR,
				    T1.FIXEDTENORRATE,
				    T12.BRANCHTEL  FINBRANCHCONTACT,
				    T1.PROCESSATTRIBUTES,
				    T1.BUSINESSVERTICAL,
				    BV.CODE  BUSINESSVERTICALCODE,
				    BV.DESCRIPTION  BUSINESSVERTICALDESC,
				    T1.GRCADVTYPE,
				    T1.GRCADVTERMS,
				    T1.ADVTYPE,
				    T1.ADVTERMS,
				    T1.ADVSTAGE,
				    T1.TDSPERCENTAGE,
				    T1.TDSSTARTDATE,
				    T1.TDSENDDATE,
				    T1.TDSLIMITAMT,
				    T1.VANREQ,
				    T1.VANCODE,
				    T1.ALLOWDRAWINGPOWER,
				    T1.ALLOWREVOLVING,
				    T1.SANBSDSCHDLE,
				    T1.PROMOTIONSEQID,
				    T1.SVAMOUNT,
				    T1.CBAMOUNT,
				    T1.APPLIEDLOANAMT,
				    T1.FINISRATERVWATGRCEND
				   FROM FINANCEMAIN_TEMP T1
				     JOIN RMTFINANCETYPES T7 ON T1.FINTYPE = T7.FINTYPE
				     LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH = T12.BRANCHCODE
				     LEFT JOIN FINPFTDETAILS T17 ON T17.FINREFERENCE = T1.FINREFERENCE
				     LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY = T24.POLICYCODE
				     LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS = T27.CUSTSTSCODE
				     LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
				     LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE = T30.ROFFICERCODE
				     LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID = T33.ROFFICERCODE
				     LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE = T34.ROFFICERCODE
				     LEFT JOIN BMTDEPARTMENTS T35 ON T1.SALESDEPARTMENT = T35.DEPTCODE
				     LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION = T36.DIVISIONCODE
				     LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME = T37.ROFFICERCODE
				     LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE = 'ELGMETHOD'
				     LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE = T39.LOANPURPOSECODE
				     LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
				     LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
				UNION ALL
				 SELECT T1.FINREFERENCE,
				    T1.INVESTMENTREF,
				    T1.NUMBEROFTERMS,
				    T1.GRCPERIODENDDATE,
				    T1.ALLOWGRCPERIOD,
				    T1.GRACEBASERATE,
				    T1.GRACESPECIALRATE,
				    T1.GRCPFTRATE,
				    T1.GRCPFTFRQ,
				    T1.NEXTGRCPFTDATE,
				    T1.ALLOWGRCPFTRVW,
				    T1.GRCPFTRVWFRQ,
				    T1.NEXTGRCPFTRVWDATE,
				    T1.ALLOWGRCCPZ,
				    T1.GRCCPZFRQ,
				    T1.NEXTGRCCPZDATE,
				    T1.REPAYBASERATE,
				    T1.REPAYSPECIALRATE,
				    T1.REPAYPROFITRATE,
				    T1.REPAYFRQ,
				    T1.NEXTREPAYDATE,
				    T1.REPAYPFTFRQ,
				    T1.NEXTREPAYPFTDATE,
				    T1.ALLOWREPAYRVW,
				    T1.REPAYRVWFRQ,
				    T1.NEXTREPAYRVWDATE,
				    T1.ALLOWREPAYCPZ,
				    T1.REPAYCPZFRQ,
				    T1.NEXTREPAYCPZDATE,
				    T1.MATURITYDATE,
				    T1.CPZATGRACEEND,
				    T1.DOWNPAYMENT,
				    T1.GRACEFLATAMOUNT,
				    T1.REQREPAYAMOUNT,
				    T1.TOTALPROFIT,
				    T1.TOTALCPZ,
				    T1.TOTALGROSSPFT,
				    T1.TOTALGROSSGRCPFT,
				    T1.TOTALGRACEPFT,
				    T1.TOTALGRACECPZ,
				    T1.GRCRATEBASIS,
				    T1.REPAYRATEBASIS,
				    T1.FINTYPE,
				    T1.FINREMARKS,
				    T1.FINCCY,
				    T1.SCHEDULEMETHOD,
				    T1.PROFITDAYSBASIS,
				    T1.REQMATURITY,
				    T1.CALTERMS,
				    T1.CALMATURITY,
				    T1.FIRSTREPAY,
				    T1.LASTREPAY,
				    T1.FINSTARTDATE,
				    T1.FINAMOUNT,
				    T1.FINAMOUNT + T1.FEECHARGEAMT - T1.DOWNPAYMENT AS LOVDESCFINANCINGAMOUNT,
				    T1.FINREPAYMENTAMOUNT,
				    T1.CUSTID,
				    T1.DEFFERMENTS,
				    T1.PLANDEFERCOUNT,
				    T1.FINBRANCH,
				    T1.FINSOURCEID,
				    T1.ALLOWEDDEFRPYCHANGE,
				    T1.AVAILEDDEFRPYCHANGE,
				    T1.ALLOWEDDEFFRQCHANGE,
				    T1.AVAILEDDEFFRQCHANGE,
				    T1.RECALTYPE,
				    T1.FINASSETVALUE,
				    T1.DISBACCOUNTID,
				    T1.REPAYACCOUNTID,
				    T1.FINISACTIVE,
				    T1.LIMITVALID,
				    T1.OVERRIDELIMIT,
				    T1.SECURITYDEPOSIT,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T7.FINTYPEDESC  LOVDESCFINTYPENAME,
				    T7.FINMAXAMOUNT  LOVDESCFINMAXAMT,
				    T7.FINMINAMOUNT  LOVDESCFINMINAMOUNT,
				    T1.MINDOWNPAYPERC,
				    T7.FINISALWDIFFERMENT  LOVDESCFINALWDEFERMENT,
				    T7.FINISDWPAYREQUIRED  LOVDESCDWNPAYREQ,
				    T7.FINMAXDIFFERMENT  LOVDESCFINMAXDIFFERMENT,
				    T12.BRANCHDESC  LOVDESCFINBRANCHNAME,
				    T12.BRANCHPROVINCE  FINBRANCHPROVINCECODE,
				    T1.LASTREPAYDATE,
				    T1.LASTREPAYPFTDATE,
				    T1.LASTREPAYRVWDATE,
				    T1.LASTREPAYCPZDATE,
				    T1.ALLOWGRCREPAY,
				    T1.GRCSCHDMTHD,
				    T1.GRCMARGIN,
				    T1.REPAYMARGIN,
				    T1.FINCURRASSETVALUE,
				    T1.FINCOMMITMENTREF,
				    T1.FINLIMITREF,
				    T1.DEPRECIATIONFRQ,
				    T1.FINCONTRACTDATE,
				    T1.NEXTDEPDATE,
				    T1.LASTDEPDATE,
				    T1.FINACCOUNT,
				    T1.FINCUSTPFTACCOUNT,
				    T17.ACRTILLLBD  LOVDESCACCRUEDTILLLBD,
				    T7.FINRVWRATEAPPLFOR,
				    T1.TOTALREPAYAMT,
				    T1.CLOSINGSTATUS,
				    T1.FINAPPROVEDDATE,
				    T1.FEECHARGEAMT,
				    T1.BLACKLISTED,
				    T1.FINREPAYPFTONFRQ,
				    T1.ANUALIZEDPERCRATE,
				    T1.EFFECTIVERATEOFRETURN,
				    T1.MIGRATEDFINANCE,
				    T1.SCHEDULEMAINTAINED,
				    T1.SCHEDULEREGENERATED,
				    T1.FINPURPOSE,
				    T39.LOANPURPOSEDESC  LOVDESCFINPURPOSENAME,
				    T1.FINSTATUS,
				    T1.FINSTSREASON,
				    T1.INITIATEUSER,
				    T1.BANKNAME,
				    T1.IBAN,
				    T1.ACCOUNTTYPE,
				    T1.DDAREFERENCENO,
				    T7.FINSCHEDULEON  LOVDESCFINSCHEDULEON,
				    T1.CUSTDSR,
				    T1.JOINTACCOUNT,
				    T1.JOINTCUSTID,
				    T1.DOWNPAYBANK,
				    T1.DOWNPAYSUPL,
				    T1.DOWNPAYACCOUNT,
				    T1.SECURITYCOLLATERAL,
				    T1.APPROVED,
				    T1.DISCREPANCY,
				    T1.LIMITAPPROVED,
				    T1.GRACETERMS,
				    T7.FINDIVISION  LOVDESCFINDIVISION,
				    T1.RCDMAINTAINSTS,
				    T1.FINREPAYMETHOD,
				    T1.GRCPROFITDAYSBASIS,
				    T1.STEPFINANCE,
				    T1.STEPTYPE,
				    T1.STEPPOLICY,
				    T1.ALWMANUALSTEPS,
				    T1.NOOFSTEPS,
				    T1.LINKEDFINREF,
				    T1.NEXTUSERID,
				    T1.PRIORITY,
				    T24.POLICYDESC  LOVDESCSTEPPOLICYNAME,
				    T1.GRCMINRATE,
				    T1.GRCMAXRATE,
				    T1.RPYMINRATE,
				    T1.RPYMAXRATE,
				    T1.DEVIATIONAPPROVAL,
				    T1.MANUALSCHEDULE,
				    T1.TAKEOVERFINANCE,
				    T1.GRCADVBASERATE,
				    T1.GRCADVMARGIN,
				    T1.GRCADVPFTRATE,
				    T1.RPYADVBASERATE,
				    T1.RPYADVMARGIN,
				    T1.RPYADVPFTRATE,
				    T1.SUPPLEMENTRENT,
				    T1.INCREASEDCOST,
				    T1.CREDITINSAMT,
				    T1.ROLLOVERFRQ,
				    T1.NEXTROLLOVERDATE,
				    T27.CUSTSTSDESCRIPTION,
				    T1.SHARIASTATUS,
				    T1.INITIATEDATE,
				    T1.FINPREAPPROVEDREF,
				    T1.MMAID,
				    T1.ACCOUNTSOFFICER,
				    T1.FEEACCOUNTID,
				    T1.FINCANCELAC,
				    T28.DEALERNAME  LOVDESCACCOUNTSOFFICER,
				    T28.DEALERCITY  LOVDESCSOURCECITY,
				    T1.DSACODE,
				    T30.ROFFICERDESC  DSACODEDESC,
				    T1.TDSAPPLICABLE,
				    T1.MANDATEID,
				    T1.DROPLINEFRQ,
				    T1.FIRSTDROPLINEDATE,
				    T1.PFTSERVICINGODLIMIT,
				    T1.INSURANCEAMT,
				    T1.DEDUCTINSDISB,
				    T1.ALWBPI,
				    T1.BPITREATMENT,
				    T1.PLANEMIHALW,
				    T1.PLANEMIHMETHOD,
				    T1.PLANEMIHMAXPERYEAR,
				    T1.PLANEMIHMAX,
				    T1.PLANEMIHLOCKPERIOD,
				    T1.PLANEMICPZ,
				    T1.CALROUNDINGMODE,
				    T1.ALWMULTIDISB,
				    T1.APPLICATIONNO,
				    T1.REFERRALID,
				    T33.ROFFICERDESC  REFERRALIDDESC,
				    T1.DMACODE,
				    T34.ROFFICERDESC  DMACODEDESC,
				    T1.SALESDEPARTMENT,
				    T35.DEPTDESC  SALESDEPARTMENTDESC,
				    T1.QUICKDISB,
				    T1.WIFREFERENCE,
				    T1.UNPLANEMIHLOCKPERIOD,
				    T1.UNPLANEMICPZ,
				    T1.REAGECPZ,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.AVAILEDUNPLANEMI,
				    T1.AVAILEDREAGEH,
				    T1.BPIAMOUNT,
				    T1.DEDUCTFEEDISB,
				    T1.RVWRATEAPPLFOR,
				    T1.SCHCALONRVW,
				    T1.PASTDUEPFTCALMTHD,
				    T1.PASTDUEPFTMARGIN,
				    T1.DROPPINGMETHOD,
				    T1.RATECHGANYDAY,
				    T1.PROMOTIONCODE,
				    T1.RESTRUCTURELOAN,
				    T1.OLDFINREFERENCE,
				    T1.REAGEBUCKET,
				    T1.FINCATEGORY,
				    T1.PRODUCTCATEGORY,
				    T1.ROUNDINGTARGET,
				    T36.ENTITYCODE  LOVDESCENTITYCODE,
				    T1.ELIGIBILITYMETHOD,
				    T38.FIELDCODEVALUE  LOVELIGIBILITYMETHOD,
				    T38.VALUEDESC  LOVDESCELIGIBILITYMETHOD,
				    T1.EMPLOYEENAME,
				    T37.ROFFICERDESC  EMPLOYEENAMEDESC,
				    T1.SAMPLINGREQUIRED,
				    T1.LEGALREQUIRED,
				    T1.GRCMAXAMOUNT,
				    T1.CONNECTOR,
				    T40.DEALERNAME  CONNECTORCODE,
				    T40.DEALERCITY  CONNECTORDESC,
				    T1.ADVANCEEMI,
				    T1.ADVEMITERMS,
				    T1.BPIPFTDAYSBASIS,
				    T1.FIXEDRATETENOR,
				    T1.FIXEDTENORRATE,
				    T12.BRANCHTEL  FINBRANCHCONTACT,
				    T1.PROCESSATTRIBUTES,
				    T1.BUSINESSVERTICAL,
				    BV.CODE  BUSINESSVERTICALCODE,
				    BV.DESCRIPTION  BUSINESSVERTICALDESC,
				    T1.GRCADVTYPE,
				    T1.GRCADVTERMS,
				    T1.ADVTYPE,
				    T1.ADVTERMS,
				    T1.ADVSTAGE,
				    T1.TDSPERCENTAGE,
				    T1.TDSSTARTDATE,
				    T1.TDSENDDATE,
				    T1.TDSLIMITAMT,
				    T1.VANREQ,
				    T1.VANCODE,
				    T1.ALLOWDRAWINGPOWER,
				    T1.ALLOWREVOLVING,
				    T1.SANBSDSCHDLE,
				    T1.PROMOTIONSEQID,
				    T1.SVAMOUNT,
				    T1.CBAMOUNT,
				    T1.APPLIEDLOANAMT,
				    T1.FINISRATERVWATGRCEND
				   FROM FINANCEMAIN T1
				     JOIN RMTFINANCETYPES T7 ON T1.FINTYPE = T7.FINTYPE
				     LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH = T12.BRANCHCODE
				     LEFT JOIN FINPFTDETAILS T17 ON T17.FINREFERENCE = T1.FINREFERENCE
				     LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY = T24.POLICYCODE
				     LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS = T27.CUSTSTSCODE
				     LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
				     LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE = T30.ROFFICERCODE
				     LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID = T33.ROFFICERCODE
				     LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE = T34.ROFFICERCODE
				     LEFT JOIN BMTDEPARTMENTS T35 ON T1.SALESDEPARTMENT = T35.DEPTCODE
				     LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION = T36.DIVISIONCODE
				     LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME = T37.ROFFICERCODE
				     LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE = 'ELGMETHOD'
				     LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE = T39.LOANPURPOSECODE
				     LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
				     LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
				  WHERE NOT (EXISTS ( SELECT 1  FROM FINANCEMAIN_TEMP
				  WHERE FINANCEMAIN_TEMP.FINREFERENCE = T1.FINREFERENCE))
				  ]]>
		</createView>
	</changeSet>

	<changeSet id="758_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_view');
			]]>
		</sql>
	</changeSet>


	<changeSet id="759_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemain_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="759" author="satyanarayana.g">
		<createView viewName="financemain_aview" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINREFERENCE,
				    T1.INVESTMENTREF,
				    T1.NUMBEROFTERMS,
				    T1.GRCPERIODENDDATE,
				    T1.ALLOWGRCPERIOD,
				    T1.GRACEBASERATE,
				    T1.GRACESPECIALRATE,
				    T1.GRCPFTRATE,
				    T1.GRCPFTFRQ,
				    T1.NEXTGRCPFTDATE,
				    T1.ALLOWGRCPFTRVW,
				    T1.GRCPFTRVWFRQ,
				    T1.NEXTGRCPFTRVWDATE,
				    T1.ALLOWGRCCPZ,
				    T1.GRCCPZFRQ,
				    T1.NEXTGRCCPZDATE,
				    T1.REPAYBASERATE,
				    T1.REPAYSPECIALRATE,
				    T1.REPAYPROFITRATE,
				    T1.REPAYFRQ,
				    T1.NEXTREPAYDATE,
				    T1.REPAYPFTFRQ,
				    T1.NEXTREPAYPFTDATE,
				    T1.ALLOWREPAYRVW,
				    T1.REPAYRVWFRQ,
				    T1.NEXTREPAYRVWDATE,
				    T1.ALLOWREPAYCPZ,
				    T1.REPAYCPZFRQ,
				    T1.NEXTREPAYCPZDATE,
				    T1.MATURITYDATE,
				    T1.CPZATGRACEEND,
				    T1.DOWNPAYMENT,
				    T1.GRACEFLATAMOUNT,
				    T1.REQREPAYAMOUNT,
				    T1.TOTALPROFIT,
				    T1.TOTALCPZ,
				    T1.TOTALGROSSPFT,
				    T1.TOTALGROSSGRCPFT,
				    T1.TOTALGRACEPFT,
				    T1.TOTALGRACECPZ,
				    T1.GRCRATEBASIS,
				    T1.REPAYRATEBASIS,
				    T1.FINTYPE,
				    T1.FINREMARKS,
				    T1.FINCCY,
				    T1.SCHEDULEMETHOD,
				    T1.PROFITDAYSBASIS,
				    T1.REQMATURITY,
				    T1.CALTERMS,
				    T1.CALMATURITY,
				    T1.FIRSTREPAY,
				    T1.LASTREPAY,
				    T1.FINSTARTDATE,
				    T1.FINAMOUNT,
				    T1.FINAMOUNT + T1.FEECHARGEAMT - T1.DOWNPAYMENT AS LOVDESCFINANCINGAMOUNT,
				    T1.FINREPAYMENTAMOUNT,
				    T1.CUSTID,
				    T1.DEFFERMENTS,
				    T1.PLANDEFERCOUNT,
				    T1.FINBRANCH,
				    T1.FINSOURCEID,
				    T1.ALLOWEDDEFRPYCHANGE,
				    T1.AVAILEDDEFRPYCHANGE,
				    T1.ALLOWEDDEFFRQCHANGE,
				    T1.AVAILEDDEFFRQCHANGE,
				    T1.RECALTYPE,
				    T1.FINASSETVALUE,
				    T1.DISBACCOUNTID,
				    T1.REPAYACCOUNTID,
				    T1.FINISACTIVE,
				    T1.LIMITVALID,
				    T1.OVERRIDELIMIT,
				    T1.SECURITYDEPOSIT,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T7.FINTYPEDESC AS LOVDESCFINTYPENAME,
				    T7.FINMAXAMOUNT AS LOVDESCFINMAXAMT,
				    T7.FINMINAMOUNT AS LOVDESCFINMINAMOUNT,
				    T1.MINDOWNPAYPERC,
				    T7.FINISALWDIFFERMENT AS LOVDESCFINALWDEFERMENT,
				    T7.FINISDWPAYREQUIRED AS LOVDESCDWNPAYREQ,
				    T7.FINMAXDIFFERMENT AS LOVDESCFINMAXDIFFERMENT,
				    T12.BRANCHDESC AS LOVDESCFINBRANCHNAME,
				    T12.BRANCHPROVINCE AS FINBRANCHPROVINCECODE,
				    T1.LASTREPAYDATE,
				    T1.LASTREPAYPFTDATE,
				    T1.LASTREPAYRVWDATE,
				    T1.LASTREPAYCPZDATE,
				    T1.ALLOWGRCREPAY,
				    T1.GRCSCHDMTHD,
				    T1.GRCMARGIN,
				    T1.REPAYMARGIN,
				    T1.FINCURRASSETVALUE,
				    T1.FINCOMMITMENTREF,
				    T1.FINLIMITREF,
				    T1.DEPRECIATIONFRQ,
				    T1.FINCONTRACTDATE,
				    T1.NEXTDEPDATE,
				    T1.LASTDEPDATE,
				    T1.FINACCOUNT,
				    T1.FINCUSTPFTACCOUNT,
				    T17.ACRTILLLBD AS LOVDESCACCRUEDTILLLBD,
				    T7.FINRVWRATEAPPLFOR,
				    T1.TOTALREPAYAMT,
				    T1.CLOSINGSTATUS,
				    T1.FINAPPROVEDDATE,
				    T1.FEECHARGEAMT,
				    T1.BLACKLISTED,
				    T1.FINREPAYPFTONFRQ,
				    T1.ANUALIZEDPERCRATE,
				    T1.EFFECTIVERATEOFRETURN,
				    T1.MIGRATEDFINANCE,
				    T1.SCHEDULEMAINTAINED,
				    T1.SCHEDULEREGENERATED,
				    T1.FINPURPOSE,
				    T39.LOANPURPOSEDESC AS LOVDESCFINPURPOSENAME,
				    T1.FINSTATUS,
				    T1.FINSTSREASON,
				    T1.INITIATEUSER,
				    T1.BANKNAME,
				    T1.IBAN,
				    T1.ACCOUNTTYPE,
				    T1.DDAREFERENCENO,
				    T7.FINSCHEDULEON AS LOVDESCFINSCHEDULEON,
				    T1.CUSTDSR,
				    T1.JOINTACCOUNT,
				    T1.JOINTCUSTID,
				    T1.DOWNPAYBANK,
				    T1.DOWNPAYSUPL,
				    T1.DOWNPAYACCOUNT,
				    T1.SECURITYCOLLATERAL,
				    T1.APPROVED,
				    T1.DISCREPANCY,
				    T1.LIMITAPPROVED,
				    T1.GRACETERMS,
				    T7.FINDIVISION AS LOVDESCFINDIVISION,
				    T1.RCDMAINTAINSTS,
				    T1.FINREPAYMETHOD,
				    T1.GRCPROFITDAYSBASIS,
				    T1.STEPFINANCE,
				    T1.STEPTYPE,
				    T1.STEPPOLICY,
				    T1.ALWMANUALSTEPS,
				    T1.NOOFSTEPS,
				    T1.LINKEDFINREF,
				    T1.NEXTUSERID,
				    T1.PRIORITY,
				    T24.POLICYDESC AS LOVDESCSTEPPOLICYNAME,
				    T1.GRCMINRATE,
				    T1.GRCMAXRATE,
				    T1.RPYMINRATE,
				    T1.RPYMAXRATE,
				    T1.DEVIATIONAPPROVAL,
				    T1.MANUALSCHEDULE,
				    T1.TAKEOVERFINANCE,
				    T1.GRCADVBASERATE,
				    T1.GRCADVMARGIN,
				    T1.GRCADVPFTRATE,
				    T1.RPYADVBASERATE,
				    T1.RPYADVMARGIN,
				    T1.RPYADVPFTRATE,
				    T1.SUPPLEMENTRENT,
				    T1.INCREASEDCOST,
				    T1.CREDITINSAMT,
				    T1.ROLLOVERFRQ,
				    T1.NEXTROLLOVERDATE,
				    T27.CUSTSTSDESCRIPTION,
				    T1.SHARIASTATUS,
				    T1.INITIATEDATE,
				    T1.FINPREAPPROVEDREF,
				    T1.MMAID,
				    T1.ACCOUNTSOFFICER,
				    T1.FEEACCOUNTID,
				    T1.FINCANCELAC,
				    T28.DEALERNAME AS LOVDESCACCOUNTSOFFICER,
				    T28.DEALERCITY AS LOVDESCSOURCECITY,
				    T1.DSACODE,
				    T30.ROFFICERDESC AS DSACODEDESC,
				    T1.TDSAPPLICABLE,
				    T1.MANDATEID,
				    T1.DROPLINEFRQ,
				    T1.FIRSTDROPLINEDATE,
				    T1.PFTSERVICINGODLIMIT,
				    T1.INSURANCEAMT,
				    T1.DEDUCTINSDISB,
				    T1.ALWBPI,
				    T1.BPITREATMENT,
				    T1.PLANEMIHALW,
				    T1.PLANEMIHMETHOD,
				    T1.PLANEMIHMAXPERYEAR,
				    T1.PLANEMIHMAX,
				    T1.PLANEMIHLOCKPERIOD,
				    T1.PLANEMICPZ,
				    T1.CALROUNDINGMODE,
				    T1.ALWMULTIDISB,
				    T1.APPLICATIONNO,
				    T1.REFERRALID,
				    T33.ROFFICERDESC AS REFERRALIDDESC,
				    T1.DMACODE,
				    T34.ROFFICERDESC AS DMACODEDESC,
				    T1.SALESDEPARTMENT,
				    T35.DEPTDESC AS SALESDEPARTMENTDESC,
				    T1.QUICKDISB,
				    T1.WIFREFERENCE,
				    T1.UNPLANEMIHLOCKPERIOD,
				    T1.UNPLANEMICPZ,
				    T1.REAGECPZ,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.AVAILEDUNPLANEMI,
				    T1.AVAILEDREAGEH,
				    T1.BPIAMOUNT,
				    T1.DEDUCTFEEDISB,
				    T1.RVWRATEAPPLFOR,
				    T1.SCHCALONRVW,
				    T1.PASTDUEPFTCALMTHD,
				    T1.PASTDUEPFTMARGIN,
				    T1.DROPPINGMETHOD,
				    T1.RATECHGANYDAY,
				    T1.PROMOTIONCODE,
				    T1.RESTRUCTURELOAN,
				    T1.OLDFINREFERENCE,
				    T1.REAGEBUCKET,
				    T1.FINCATEGORY,
				    T1.PRODUCTCATEGORY,
				    T1.ROUNDINGTARGET,
				    T36.ENTITYCODE AS LOVDESCENTITYCODE,
				    T1.ELIGIBILITYMETHOD,
				    T38.FIELDCODEVALUE AS LOVELIGIBILITYMETHOD,
				    T38.VALUEDESC AS LOVDESCELIGIBILITYMETHOD,
				    T1.EMPLOYEENAME,
				    T37.ROFFICERDESC AS EMPLOYEENAMEDESC,
				    T1.SAMPLINGREQUIRED,
				    T1.LEGALREQUIRED,
				    T1.GRCMAXAMOUNT,
				    T1.CONNECTOR,
				    T40.DEALERNAME AS CONNECTORCODE,
				    T40.DEALERCITY AS CONNECTORDESC,
				    T1.ADVANCEEMI,
				    T1.ADVEMITERMS,
				    T1.BPIPFTDAYSBASIS,
				    T1.FIXEDRATETENOR,
				    T1.FIXEDTENORRATE,
				    T12.BRANCHTEL AS FINBRANCHCONTACT,
				    T1.PROCESSATTRIBUTES,
				    T1.BUSINESSVERTICAL,
				    BV.CODE AS BUSINESSVERTICALCODE,
				    BV.DESCRIPTION AS BUSINESSVERTICALDESC,
				    T1.GRCADVTYPE,
				    T1.GRCADVTERMS,
				    T1.ADVTYPE,
				    T1.ADVTERMS,
				    T1.ADVSTAGE,
				    T1.TDSPERCENTAGE,
				    T1.TDSSTARTDATE,
				    T1.TDSENDDATE,
				    T1.TDSLIMITAMT,
				    T1.VANREQ,
				    T1.VANCODE,
				    T1.ALLOWDRAWINGPOWER,
				    T1.ALLOWREVOLVING,
				    T1.SANBSDSCHDLE,
				    T1.PROMOTIONSEQID,
				    T1.SVAMOUNT,
				    T1.CBAMOUNT,
				    T1.APPLIEDLOANAMT,
				    T1.FINISRATERVWATGRCEND
				   FROM FINANCEMAIN T1
				     JOIN RMTFINANCETYPES T7 ON T1.FINTYPE = T7.FINTYPE
				     LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH = T12.BRANCHCODE
				     LEFT JOIN FINPFTDETAILS T17 ON T17.FINREFERENCE = T1.FINREFERENCE
				     LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY = T24.POLICYCODE
				     LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS = T27.CUSTSTSCODE
				     LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
				     LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE = T30.ROFFICERCODE
				     LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID = T33.ROFFICERCODE
				     LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE = T34.ROFFICERCODE
				     LEFT JOIN BMTDEPARTMENTS T35 ON T1.SALESDEPARTMENT = T35.DEPTCODE
				     LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION = T36.DIVISIONCODE
				     LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME = T37.ROFFICERCODE
				     LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE = 'ELGMETHOD'
				     LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE = T39.LOANPURPOSECODE
				     LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
				     LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
				    ]]> 
		</createView>
	</changeSet>

	<changeSet id="759_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="760_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemain_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="760" author="satyanarayana.g">
		<createView viewName="financemain_tview" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINREFERENCE,
				    T1.INVESTMENTREF,
				    T1.NUMBEROFTERMS,
				    T1.GRCPERIODENDDATE,
				    T1.ALLOWGRCPERIOD,
				    T1.GRACEBASERATE,
				    T1.GRACESPECIALRATE,
				    T1.GRCPFTRATE,
				    T1.GRCPFTFRQ,
				    T1.NEXTGRCPFTDATE,
				    T1.ALLOWGRCPFTRVW,
				    T1.GRCPFTRVWFRQ,
				    T1.NEXTGRCPFTRVWDATE,
				    T1.ALLOWGRCCPZ,
				    T1.GRCCPZFRQ,
				    T1.NEXTGRCCPZDATE,
				    T1.REPAYBASERATE,
				    T1.REPAYSPECIALRATE,
				    T1.REPAYPROFITRATE,
				    T1.REPAYFRQ,
				    T1.NEXTREPAYDATE,
				    T1.REPAYPFTFRQ,
				    T1.NEXTREPAYPFTDATE,
				    T1.ALLOWREPAYRVW,
				    T1.REPAYRVWFRQ,
				    T1.NEXTREPAYRVWDATE,
				    T1.ALLOWREPAYCPZ,
				    T1.REPAYCPZFRQ,
				    T1.NEXTREPAYCPZDATE,
				    T1.MATURITYDATE,
				    T1.CPZATGRACEEND,
				    T1.DOWNPAYMENT,
				    T1.GRACEFLATAMOUNT,
				    T1.REQREPAYAMOUNT,
				    T1.TOTALPROFIT,
				    T1.TOTALCPZ,
				    T1.TOTALGROSSPFT,
				    T1.TOTALGROSSGRCPFT,
				    T1.TOTALGRACEPFT,
				    T1.TOTALGRACECPZ,
				    T1.GRCRATEBASIS,
				    T1.REPAYRATEBASIS,
				    T1.FINTYPE,
				    T1.FINREMARKS,
				    T1.FINCCY,
				    T1.SCHEDULEMETHOD,
				    T1.PROFITDAYSBASIS,
				    T1.REQMATURITY,
				    T1.CALTERMS,
				    T1.CALMATURITY,
				    T1.FIRSTREPAY,
				    T1.LASTREPAY,
				    T1.FINSTARTDATE,
				    T1.FINAMOUNT,
				    T1.FINAMOUNT + T1.FEECHARGEAMT - T1.DOWNPAYMENT  LOVDESCFINANCINGAMOUNT,
				    T1.FINREPAYMENTAMOUNT,
				    T1.CUSTID,
				    T1.DEFFERMENTS,
				    T1.PLANDEFERCOUNT,
				    T1.FINBRANCH,
				    T1.FINSOURCEID,
				    T1.ALLOWEDDEFRPYCHANGE,
				    T1.AVAILEDDEFRPYCHANGE,
				    T1.ALLOWEDDEFFRQCHANGE,
				    T1.AVAILEDDEFFRQCHANGE,
				    T1.RECALTYPE,
				    T1.FINASSETVALUE,
				    T1.DISBACCOUNTID,
				    T1.REPAYACCOUNTID,
				    T1.FINISACTIVE,
				    T1.LIMITVALID,
				    T1.OVERRIDELIMIT,
				    T1.SECURITYDEPOSIT,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T7.FINTYPEDESC  LOVDESCFINTYPENAME,
				    T7.FINMAXAMOUNT  LOVDESCFINMAXAMT,
				    T7.FINMINAMOUNT  LOVDESCFINMINAMOUNT,
				    T1.MINDOWNPAYPERC,
				    T7.FINISALWDIFFERMENT  LOVDESCFINALWDEFERMENT,
				    T7.FINISDWPAYREQUIRED  LOVDESCDWNPAYREQ,
				    T7.FINMAXDIFFERMENT  LOVDESCFINMAXDIFFERMENT,
				    T12.BRANCHDESC  LOVDESCFINBRANCHNAME,
				    T12.BRANCHPROVINCE  FINBRANCHPROVINCECODE,
				    T1.LASTREPAYDATE,
				    T1.LASTREPAYPFTDATE,
				    T1.LASTREPAYRVWDATE,
				    T1.LASTREPAYCPZDATE,
				    T1.ALLOWGRCREPAY,
				    T1.GRCSCHDMTHD,
				    T1.GRCMARGIN,
				    T1.REPAYMARGIN,
				    T1.FINCURRASSETVALUE,
				    T1.FINCOMMITMENTREF,
				    T1.FINLIMITREF,
				    T1.DEPRECIATIONFRQ,
				    T1.FINCONTRACTDATE,
				    T1.NEXTDEPDATE,
				    T1.LASTDEPDATE,
				    T1.FINACCOUNT,
				    T1.FINCUSTPFTACCOUNT,
				    T17.ACRTILLLBD  LOVDESCACCRUEDTILLLBD,
				    T7.FINRVWRATEAPPLFOR,
				    T1.TOTALREPAYAMT,
				    T1.CLOSINGSTATUS,
				    T1.FINAPPROVEDDATE,
				    T1.FEECHARGEAMT,
				    T1.BLACKLISTED,
				    T1.FINREPAYPFTONFRQ,
				    T1.ANUALIZEDPERCRATE,
				    T1.EFFECTIVERATEOFRETURN,
				    T1.MIGRATEDFINANCE,
				    T1.SCHEDULEMAINTAINED,
				    T1.SCHEDULEREGENERATED,
				    T1.FINPURPOSE,
				    T39.LOANPURPOSEDESC  LOVDESCFINPURPOSENAME,
				    T1.FINSTATUS,
				    T1.FINSTSREASON,
				    T1.INITIATEUSER,
				    T1.BANKNAME,
				    T1.IBAN,
				    T1.ACCOUNTTYPE,
				    T1.DDAREFERENCENO,
				    T7.FINSCHEDULEON  LOVDESCFINSCHEDULEON,
				    T1.CUSTDSR,
				    T1.JOINTACCOUNT,
				    T1.JOINTCUSTID,
				    T1.DOWNPAYBANK,
				    T1.DOWNPAYSUPL,
				    T1.DOWNPAYACCOUNT,
				    T1.SECURITYCOLLATERAL,
				    T1.APPROVED,
				    T1.DISCREPANCY,
				    T1.LIMITAPPROVED,
				    T1.GRACETERMS,
				    T7.FINDIVISION  LOVDESCFINDIVISION,
				    T1.RCDMAINTAINSTS,
				    T1.FINREPAYMETHOD,
				    T1.GRCPROFITDAYSBASIS,
				    T1.STEPFINANCE,
				    T1.STEPTYPE,
				    T1.STEPPOLICY,
				    T1.ALWMANUALSTEPS,
				    T1.NOOFSTEPS,
				    T1.LINKEDFINREF,
				    T1.NEXTUSERID,
				    T1.PRIORITY,
				    T24.POLICYDESC  LOVDESCSTEPPOLICYNAME,
				    T1.GRCMINRATE,
				    T1.GRCMAXRATE,
				    T1.RPYMINRATE,
				    T1.RPYMAXRATE,
				    T1.DEVIATIONAPPROVAL,
				    T1.MANUALSCHEDULE,
				    T1.TAKEOVERFINANCE,
				    T1.GRCADVBASERATE,
				    T1.GRCADVMARGIN,
				    T1.GRCADVPFTRATE,
				    T1.RPYADVBASERATE,
				    T1.RPYADVMARGIN,
				    T1.RPYADVPFTRATE,
				    T1.SUPPLEMENTRENT,
				    T1.INCREASEDCOST,
				    T1.CREDITINSAMT,
				    T1.ROLLOVERFRQ,
				    T1.NEXTROLLOVERDATE,
				    T27.CUSTSTSDESCRIPTION,
				    T1.SHARIASTATUS,
				    T1.INITIATEDATE,
				    T1.FINPREAPPROVEDREF,
				    T1.MMAID,
				    T1.ACCOUNTSOFFICER,
				    T1.FEEACCOUNTID,
				    T1.FINCANCELAC,
				    T28.DEALERNAME  LOVDESCACCOUNTSOFFICER,
				    T28.DEALERCITY  LOVDESCSOURCECITY,
				    T1.DSACODE,
				    T30.ROFFICERDESC  DSACODEDESC,
				    T1.TDSAPPLICABLE,
				    T1.MANDATEID,
				    T1.DROPLINEFRQ,
				    T1.FIRSTDROPLINEDATE,
				    T1.PFTSERVICINGODLIMIT,
				    T1.INSURANCEAMT,
				    T1.DEDUCTINSDISB,
				    T1.ALWBPI,
				    T1.BPITREATMENT,
				    T1.PLANEMIHALW,
				    T1.PLANEMIHMETHOD,
				    T1.PLANEMIHMAXPERYEAR,
				    T1.PLANEMIHMAX,
				    T1.PLANEMIHLOCKPERIOD,
				    T1.PLANEMICPZ,
				    T1.CALROUNDINGMODE,
				    T1.ALWMULTIDISB,
				    T1.APPLICATIONNO,
				    T1.REFERRALID,
				    T33.ROFFICERDESC  REFERRALIDDESC,
				    T1.DMACODE,
				    T34.ROFFICERDESC  DMACODEDESC,
				    T1.SALESDEPARTMENT,
				    T35.DEPTDESC  SALESDEPARTMENTDESC,
				    T1.QUICKDISB,
				    T1.WIFREFERENCE,
				    T1.UNPLANEMIHLOCKPERIOD,
				    T1.UNPLANEMICPZ,
				    T1.REAGECPZ,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.AVAILEDUNPLANEMI,
				    T1.AVAILEDREAGEH,
				    T1.BPIAMOUNT,
				    T1.DEDUCTFEEDISB,
				    T1.RVWRATEAPPLFOR,
				    T1.SCHCALONRVW,
				    T1.PASTDUEPFTCALMTHD,
				    T1.PASTDUEPFTMARGIN,
				    T1.DROPPINGMETHOD,
				    T1.RATECHGANYDAY,
				    T1.PROMOTIONCODE,
				    T1.RESTRUCTURELOAN,
				    T1.OLDFINREFERENCE,
				    T1.REAGEBUCKET,
				    T1.FINCATEGORY,
				    T1.PRODUCTCATEGORY,
				    T1.ROUNDINGTARGET,
				    T36.ENTITYCODE  LOVDESCENTITYCODE,
				    T1.ELIGIBILITYMETHOD,
				    T38.FIELDCODEVALUE  LOVELIGIBILITYMETHOD,
				    T38.VALUEDESC  LOVDESCELIGIBILITYMETHOD,
				    T1.EMPLOYEENAME,
				    T37.ROFFICERDESC  EMPLOYEENAMEDESC,
				    T1.SAMPLINGREQUIRED,
				    T1.LEGALREQUIRED,
				    T1.GRCMAXAMOUNT,
				    T1.CONNECTOR,
				    T40.DEALERNAME  CONNECTORCODE,
				    T40.DEALERCITY  CONNECTORDESC,
				    T1.ADVANCEEMI,
				    T1.ADVEMITERMS,
				    T1.BPIPFTDAYSBASIS,
				    T1.FIXEDRATETENOR,
				    T1.FIXEDTENORRATE,
				    T12.BRANCHTEL  FINBRANCHCONTACT,
				    T1.PROCESSATTRIBUTES,
				    T1.BUSINESSVERTICAL,
				    BV.CODE  BUSINESSVERTICALCODE,
				    BV.DESCRIPTION  BUSINESSVERTICALDESC,
				    T1.GRCADVTYPE,
				    T1.GRCADVTERMS,
				    T1.ADVTYPE,
				    T1.ADVTERMS,
				    T1.ADVSTAGE,
				    T1.TDSPERCENTAGE,
				    T1.TDSSTARTDATE,
				    T1.TDSENDDATE,
				    T1.TDSLIMITAMT,
				    T1.VANREQ,
				    T1.VANCODE,
				    T1.ALLOWDRAWINGPOWER,
				    T1.ALLOWREVOLVING,
				    T1.SANBSDSCHDLE,
				    T1.PROMOTIONSEQID,
				    T1.SVAMOUNT,
				    T1.CBAMOUNT,
				    T1.APPLIEDLOANAMT,
				    T1.FINISRATERVWATGRCEND
				   FROM FINANCEMAIN_TEMP T1
				     JOIN RMTFINANCETYPES T7 ON T1.FINTYPE = T7.FINTYPE
				     LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH = T12.BRANCHCODE
				     LEFT JOIN FINPFTDETAILS T17 ON T17.FINREFERENCE = T1.FINREFERENCE
				     LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY = T24.POLICYCODE
				     LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS = T27.CUSTSTSCODE
				     LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
				     LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE = T30.ROFFICERCODE
				     LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID = T33.ROFFICERCODE
				     LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE = T34.ROFFICERCODE
				     LEFT JOIN BMTDEPARTMENTS T35 ON T1.SALESDEPARTMENT = T35.DEPTCODE
				     LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION = T36.DIVISIONCODE
				     LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME = T37.ROFFICERCODE
				     LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE = 'ELGMETHOD'
				     LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE = T39.LOANPURPOSECODE
				     LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
				     LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
				     ]]>
		</createView>
	</changeSet>

	<changeSet id="760_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="761_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rejectfinancemain_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="761" author="satyanarayana.g">
		<createView viewName="rejectfinancemain_view" replaceIfExists="true">
			<![CDATA[
				SELECT F.FINREFERENCE,
				    T.FINCATEGORY AS LOVDESCPRODUCTCODENAME,
				    F.FINTYPE,
				    F.FINBRANCH,
				    F.FINSTARTDATE,
				    F.MATURITYDATE,
				    F.NUMBEROFTERMS,
				    F.FINCCY,
				    F.FINAMOUNT,
				    F.FINAMOUNT - F.DOWNPAYMENT + F.FEECHARGEAMT + F.INSURANCEAMT AS FINANCINGAMOUNT,
				    F.FEECHARGEAMT,
				    F.INSURANCEAMT,
				    F.FINAMOUNT - F.DOWNPAYMENT + F.FEECHARGEAMT + F.INSURANCEAMT - F.FINREPAYMENTAMOUNT AS CURFINAMOUNT,
				    F.DOWNPAYMENT,
				    F.FINCURRASSETVALUE,
				    F.FINASSETVALUE,
				    F.ALLOWDRAWINGPOWER,
				    F.PROMOTIONSEQID,
				    F.SANBSDSCHDLE,
				    C.CUSTCIF AS LOVDESCCUSTCIF,
				    F.SVAMOUNT,
				    F.CBAMOUNT,
				    F.FINISRATERVWATGRCEND
				   FROM REJECTFINANCEMAIN F
				     LEFT JOIN CUSTOMERS C ON F.CUSTID = C.CUSTID
				     LEFT JOIN RMTFINANCETYPES T ON F.FINTYPE = T.FINTYPE
				     ]]>
		</createView>
	</changeSet>

	<changeSet id="761_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rejectfinancemain_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="762_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'wiffinancemain_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="762" author="satyanarayana.g">
		<createView viewName="WIFFINANCEMAIN_VIEW" replaceIfExists="true">
			<![CDATA[
			SELECT T1.FINREFERENCE,
					T1.NUMBEROFTERMS,
					T1.GRCPERIODENDDATE,
					T1.ALLOWGRCPERIOD,
					T1.GRACEBASERATE,
					T1.GRACESPECIALRATE,
					T1.GRCPFTRATE,
					T1.GRCPFTFRQ,
					T1.NEXTGRCPFTDATE,
					T1.ALLOWGRCPFTRVW,
					T1.GRCPFTRVWFRQ,
					T1.NEXTGRCPFTRVWDATE,
					T1.ALLOWGRCCPZ,
					T1.GRCCPZFRQ,
					T1.NEXTGRCCPZDATE,
					T1.REPAYBASERATE,
					T1.REPAYSPECIALRATE,
					T1.REPAYPROFITRATE,
					T1.REPAYFRQ,
					T1.NEXTREPAYDATE,
					T1.REPAYPFTFRQ,
					T1.NEXTREPAYPFTDATE,
					T1.ALLOWREPAYRVW,
					T1.REPAYRVWFRQ,
					T1.NEXTREPAYRVWDATE,
					T1.ALLOWREPAYCPZ,
					T1.REPAYCPZFRQ,
					T1.NEXTREPAYCPZDATE,
					T1.MATURITYDATE,
					T1.CPZATGRACEEND,
					T1.DOWNPAYMENT,
					T1.GRACEFLATAMOUNT,
					T1.REQREPAYAMOUNT,
					T1.TOTALPROFIT,
					T1.TOTALCPZ,
					T1.TOTALGROSSPFT,
					T1.TOTALGRACEPFT,
					T1.TOTALGRACECPZ,
					T1.GRCRATEBASIS,
					T1.REPAYRATEBASIS,
					T1.FINTYPE,
					T1.FINREMARKS,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.REQMATURITY,
					T1.CALTERMS,
					T1.CALMATURITY,
					T1.FIRSTREPAY,
					T1.LASTREPAY,
					T1.FINSTARTDATE,
					T1.FINAMOUNT,
					T1.FINREPAYMENTAMOUNT,
					T1.CUSTID,
					T1.DEFFERMENTS,
					T1.PLANDEFERCOUNT,
					T1.FINISACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T15.CUSTCIF  LOVDESCCUSTCIF,
					T7.FINTYPEDESC  LOVDESCFINTYPENAME,
					T1.FINBRANCH,
					T1.FINSOURCEID,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.ALLOWEDDEFFRQCHANGE,
					T1.AVAILEDDEFFRQCHANGE,
					T7.FINMAXAMOUNT  LOVDESCFINMAXAMT,
					T7.FINMINAMOUNT  LOVDESCFINMINAMOUNT,
					T7.FINISALWDIFFERMENT  LOVDESCFINALWDEFERMENT,
					T1.MINDOWNPAYPERC,
					T7.FINISDWPAYREQUIRED  LOVDESCDWNPAYREQ,
					T1.RECALTYPE,
					T1.FINASSETVALUE,
					T7.FINMAXDIFFERMENT  LOVDESCFINMAXDIFFERMENT,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.LASTREPAYRVWDATE,
					T1.LASTREPAYCPZDATE,
					T1.DISBACCOUNTID,
					T1.REPAYACCOUNTID,
					T1.ALLOWGRCREPAY,
					T1.GRCSCHDMTHD,
					T1.REPAYMARGIN,
					T1.GRCMARGIN,
					T1.DEPRECIATIONFRQ,
					T1.FINCOMMITMENTREF,
					T1.FINCURRASSETVALUE,
					T1.FINCONTRACTDATE,
					T1.NEXTDEPDATE,
					T1.LASTDEPDATE,
					T1.FINACCOUNT,
					T1.FINCUSTPFTACCOUNT,
					T7.FINRVWRATEAPPLFOR,
					T1.TOTALREPAYAMT,
					T1.CLOSINGSTATUS,
					T1.FINAPPROVEDDATE,
					T1.FINREPAYPFTONFRQ,
					T1.ANUALIZEDPERCRATE,
					T1.EFFECTIVERATEOFRETURN,
					T1.DOWNPAYBANK,
					T1.DOWNPAYSUPL,
					T7.FINDIVISION  LOVDESCFINDIVISIONNAME,
					T1.GRACETERMS,
					T14.FACILITYTYPE,
					T15.CUSTSHRTNAME  LOVDESCCUSTSHRTNAME,
					T16.BRANCHDESC  LOVDESCFINBRANCHNAME,
					T1.TOTALGROSSGRCPFT,
					T1.GRCPROFITDAYSBASIS,
					T1.STEPFINANCE,
					T1.STEPTYPE,
					T1.STEPPOLICY,
					T1.ALWMANUALSTEPS,
					T1.NOOFSTEPS,
					T1.LINKEDFINREF,
					T7.PRODUCT  LOVDESCFINPRODUCT,
					T1.GRCMINRATE,
					T1.GRCMAXRATE,
					T1.RPYMINRATE,
					T1.RPYMAXRATE,
					T1.MANUALSCHEDULE,
					T1.TAKEOVERFINANCE,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.SUPPLEMENTRENT,
					T1.INCREASEDCOST,
					T1.FEEACCOUNTID,
					T1.TDSAPPLICABLE,
					T1.INSURANCEAMT,
					T1.DEDUCTINSDISB,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.CALROUNDINGMODE,
					T1.ALWMULTIDISB,
					T1.BPIAMOUNT,
					T1.DEDUCTFEEDISB,
					T1.FEECHARGEAMT,
					T1.RVWRATEAPPLFOR,
					T1.SCHCALONRVW,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.FINCATEGORY,
					T1.PRODUCTCATEGORY,
					T1.ROUNDINGTARGET,
					T1.GRCMAXAMOUNT,
					T1.ADVANCEEMI,
					T1.ADVEMITERMS,
					T1.BPIPFTDAYSBASIS,
					T1.FIXEDTENORRATE,
					T1.FIXEDRATETENOR,
					T1.GRCADVTYPE,
					T1.GRCADVTERMS,
					T1.ADVTYPE,
					T1.ADVTERMS,
					T1.ADVSTAGE,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING,
					T1.APPLIEDLOANAMT,
					T1.FINISRATERVWATGRCEND,
					T1.CBAMOUNT,
					T1.SVAMOUNT,
					T1.SANBSDSCHDLE,
					T1.PROMOTIONSEQID
					FROM WIFFINANCEMAIN_TEMP T1
					LEFT JOIN WIFINDICATIVETERMDETAIL_TEMP T14 ON T14.FINREFERENCE = T1.FINREFERENCE
					LEFT JOIN CUSTOMERS T15 ON T15.CUSTID = T1.CUSTID
					JOIN RMTFINANCETYPES T7 ON T1.FINTYPE = T7.FINTYPE
					LEFT JOIN RMTBRANCHES T16 ON T1.FINBRANCH = T16.BRANCHCODE
					UNION ALL
					SELECT T1.FINREFERENCE,
					T1.NUMBEROFTERMS,
					T1.GRCPERIODENDDATE,
					T1.ALLOWGRCPERIOD,
					T1.GRACEBASERATE,
					T1.GRACESPECIALRATE,
					T1.GRCPFTRATE,
					T1.GRCPFTFRQ,
					T1.NEXTGRCPFTDATE,
					T1.ALLOWGRCPFTRVW,
					T1.GRCPFTRVWFRQ,
					T1.NEXTGRCPFTRVWDATE,
					T1.ALLOWGRCCPZ,
					T1.GRCCPZFRQ,
					T1.NEXTGRCCPZDATE,
					T1.REPAYBASERATE,
					T1.REPAYSPECIALRATE,
					T1.REPAYPROFITRATE,
					T1.REPAYFRQ,
					T1.NEXTREPAYDATE,
					T1.REPAYPFTFRQ,
					T1.NEXTREPAYPFTDATE,
					T1.ALLOWREPAYRVW,
					T1.REPAYRVWFRQ,
					T1.NEXTREPAYRVWDATE,
					T1.ALLOWREPAYCPZ,
					T1.REPAYCPZFRQ,
					T1.NEXTREPAYCPZDATE,
					T1.MATURITYDATE,
					T1.CPZATGRACEEND,
					T1.DOWNPAYMENT,
					T1.GRACEFLATAMOUNT,
					T1.REQREPAYAMOUNT,
					T1.TOTALPROFIT,
					T1.TOTALCPZ,
					T1.TOTALGROSSPFT,
					T1.TOTALGRACEPFT,
					T1.TOTALGRACECPZ,
					T1.GRCRATEBASIS,
					T1.REPAYRATEBASIS,
					T1.FINTYPE,
					T1.FINREMARKS,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.REQMATURITY,
					T1.CALTERMS,
					T1.CALMATURITY,
					T1.FIRSTREPAY,
					T1.LASTREPAY,
					T1.FINSTARTDATE,
					T1.FINAMOUNT,
					T1.FINREPAYMENTAMOUNT,
					T1.CUSTID,
					T1.DEFFERMENTS,
					T1.PLANDEFERCOUNT,
					T1.FINISACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T15.CUSTCIF  LOVDESCCUSTCIF,
					T7.FINTYPEDESC  LOVDESCFINTYPENAME,
					T1.FINBRANCH,
					T1.FINSOURCEID,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.ALLOWEDDEFFRQCHANGE,
					T1.AVAILEDDEFFRQCHANGE,
					T7.FINMAXAMOUNT  LOVDESCFINMAXAMT,
					T7.FINMINAMOUNT  LOVDESCFINMINAMOUNT,
					T7.FINISALWDIFFERMENT  LOVDESCFINALWDEFERMENT,
					T1.MINDOWNPAYPERC,
					T7.FINISDWPAYREQUIRED  LOVDESCDWNPAYREQ,
					T1.RECALTYPE,
					T1.FINASSETVALUE,
					T7.FINMAXDIFFERMENT  LOVDESCFINMAXDIFFERMENT,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.LASTREPAYRVWDATE,
					T1.LASTREPAYCPZDATE,
					T1.DISBACCOUNTID,
					T1.REPAYACCOUNTID,
					T1.ALLOWGRCREPAY,
					T1.GRCSCHDMTHD,
					T1.REPAYMARGIN,
					T1.GRCMARGIN,
					T1.DEPRECIATIONFRQ,
					T1.FINCOMMITMENTREF,
					T1.FINCURRASSETVALUE,
					T1.FINCONTRACTDATE,
					T1.NEXTDEPDATE,
					T1.LASTDEPDATE,
					T1.FINACCOUNT,
					T1.FINCUSTPFTACCOUNT,
					T7.FINRVWRATEAPPLFOR,
					T1.TOTALREPAYAMT,
					T1.CLOSINGSTATUS,
					T1.FINAPPROVEDDATE,
					T1.FINREPAYPFTONFRQ,
					T1.ANUALIZEDPERCRATE,
					T1.EFFECTIVERATEOFRETURN,
					T1.DOWNPAYBANK,
					T1.DOWNPAYSUPL,
					T7.FINDIVISION  LOVDESCFINDIVISIONNAME,
					T1.GRACETERMS,
					T14.FACILITYTYPE,
					T15.CUSTSHRTNAME  LOVDESCCUSTSHRTNAME,
					T16.BRANCHDESC  LOVDESCFINBRANCHNAME,
					T1.TOTALGROSSGRCPFT,
					T1.GRCPROFITDAYSBASIS,
					T1.STEPFINANCE,
					T1.STEPTYPE,
					T1.STEPPOLICY,
					T1.ALWMANUALSTEPS,
					T1.NOOFSTEPS,
					T1.LINKEDFINREF,
					T7.PRODUCT  LOVDESCFINPRODUCT,
					T1.GRCMINRATE,
					T1.GRCMAXRATE,
					T1.RPYMINRATE,
					T1.RPYMAXRATE,
					T1.MANUALSCHEDULE,
					T1.TAKEOVERFINANCE,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.SUPPLEMENTRENT,
					T1.INCREASEDCOST,
					T1.FEEACCOUNTID,
					T1.TDSAPPLICABLE,
					T1.INSURANCEAMT,
					T1.DEDUCTINSDISB,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.CALROUNDINGMODE,
					T1.ALWMULTIDISB,
					T1.BPIAMOUNT,
					T1.DEDUCTFEEDISB,
					T1.FEECHARGEAMT,
					T1.RVWRATEAPPLFOR,
					T1.SCHCALONRVW,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.FINCATEGORY,
					T1.PRODUCTCATEGORY,
					T1.ROUNDINGTARGET,
					T1.GRCMAXAMOUNT,
					T1.ADVANCEEMI,
					T1.ADVEMITERMS,
					T1.BPIPFTDAYSBASIS,
					T1.FIXEDTENORRATE,
					T1.FIXEDRATETENOR,
					T1.GRCADVTYPE,
					T1.GRCADVTERMS,
					T1.ADVTYPE,
					T1.ADVTERMS,
					T1.ADVSTAGE,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING,
					T1.APPLIEDLOANAMT,
					T1.FINISRATERVWATGRCEND,
					T1.CBAMOUNT,
					T1.SVAMOUNT,
					T1.SANBSDSCHDLE,
					T1.PROMOTIONSEQID
					FROM WIFFINANCEMAIN T1
					LEFT JOIN WIFINDICATIVETERMDETAIL_TEMP T14 ON T14.FINREFERENCE = T1.FINREFERENCE
					LEFT JOIN CUSTOMERS T15 ON T15.CUSTID = T1.CUSTID
					JOIN RMTFINANCETYPES T7 ON T1.FINTYPE = T7.FINTYPE
					LEFT JOIN RMTBRANCHES T16 ON T1.FINBRANCH = T16.BRANCHCODE
					WHERE NOT (EXISTS ( SELECT 1
					FROM WIFFINANCEMAIN_TEMP
					WHERE WIFFINANCEMAIN_TEMP.FINREFERENCE = T1.FINREFERENCE))
					]]>
		</createView>
	</changeSet>

	<changeSet id="762_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_restore_dependencies ('plf', 'wiffinancemain_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="763_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'wiffinancemain_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="763" author="satyanarayana.g">
		<createView viewName="WIFFINANCEMAIN_AVIEW" replaceIfExists="true">
			<![CDATA[
			SELECT T1.FINREFERENCE,
					T1.NUMBEROFTERMS,
					T1.GRCPERIODENDDATE,
					T1.ALLOWGRCPERIOD,
					T1.GRACEBASERATE,
					T1.GRACESPECIALRATE,
					T1.GRCPFTRATE,
					T1.GRCPFTFRQ,
					T1.NEXTGRCPFTDATE,
					T1.ALLOWGRCPFTRVW,
					T1.GRCPFTRVWFRQ,
					T1.NEXTGRCPFTRVWDATE,
					T1.ALLOWGRCCPZ,
					T1.GRCCPZFRQ,
					T1.NEXTGRCCPZDATE,
					T1.REPAYBASERATE,
					T1.REPAYSPECIALRATE,
					T1.REPAYPROFITRATE,
					T1.REPAYFRQ,
					T1.NEXTREPAYDATE,
					T1.REPAYPFTFRQ,
					T1.NEXTREPAYPFTDATE,
					T1.ALLOWREPAYRVW,
					T1.REPAYRVWFRQ,
					T1.NEXTREPAYRVWDATE,
					T1.ALLOWREPAYCPZ,
					T1.REPAYCPZFRQ,
					T1.NEXTREPAYCPZDATE,
					T1.MATURITYDATE,
					T1.CPZATGRACEEND,
					T1.DOWNPAYMENT,
					T1.GRACEFLATAMOUNT,
					T1.REQREPAYAMOUNT,
					T1.TOTALPROFIT,
					T1.TOTALCPZ,
					T1.TOTALGROSSPFT,
					T1.TOTALGRACEPFT,
					T1.TOTALGRACECPZ,
					T1.GRCRATEBASIS,
					T1.REPAYRATEBASIS,
					T1.FINTYPE,
					T1.FINREMARKS,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.REQMATURITY,
					T1.CALTERMS,
					T1.CALMATURITY,
					T1.FIRSTREPAY,
					T1.LASTREPAY,
					T1.FINSTARTDATE,
					T1.FINAMOUNT,
					T1.FINREPAYMENTAMOUNT,
					T1.CUSTID,
					T1.DEFFERMENTS,
					T1.PLANDEFERCOUNT,
					T1.FINISACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T15.CUSTCIF  LOVDESCCUSTCIF,
					T7.FINTYPEDESC  LOVDESCFINTYPENAME,
					T1.FINBRANCH,
					T1.FINSOURCEID,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.ALLOWEDDEFFRQCHANGE,
					T1.AVAILEDDEFFRQCHANGE,
					T7.FINMAXAMOUNT  LOVDESCFINMAXAMT,
					T7.FINMINAMOUNT  LOVDESCFINMINAMOUNT,
					T7.FINISALWDIFFERMENT  LOVDESCFINALWDEFERMENT,
					T1.MINDOWNPAYPERC,
					T7.FINISDWPAYREQUIRED  LOVDESCDWNPAYREQ,
					T1.RECALTYPE,
					T1.FINASSETVALUE,
					T7.FINMAXDIFFERMENT  LOVDESCFINMAXDIFFERMENT,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.LASTREPAYRVWDATE,
					T1.LASTREPAYCPZDATE,
					T1.DISBACCOUNTID,
					T1.REPAYACCOUNTID,
					T1.ALLOWGRCREPAY,
					T1.GRCSCHDMTHD,
					T1.REPAYMARGIN,
					T1.GRCMARGIN,
					T1.DEPRECIATIONFRQ,
					T1.FINCOMMITMENTREF,
					T1.FINCURRASSETVALUE,
					T1.FINCONTRACTDATE,
					T1.NEXTDEPDATE,
					T1.LASTDEPDATE,
					T1.FINACCOUNT,
					T1.FINCUSTPFTACCOUNT,
					T7.FINRVWRATEAPPLFOR,
					T1.TOTALREPAYAMT,
					T1.CLOSINGSTATUS,
					T1.FINAPPROVEDDATE,
					T1.FINREPAYPFTONFRQ,
					T1.ANUALIZEDPERCRATE,
					T1.EFFECTIVERATEOFRETURN,
					T1.DOWNPAYBANK,
					T1.DOWNPAYSUPL,
					T7.FINDIVISION  LOVDESCFINDIVISIONNAME,
					T1.GRACETERMS,
					T14.FACILITYTYPE,
					T15.CUSTSHRTNAME  LOVDESCCUSTSHRTNAME,
					T16.BRANCHDESC  LOVDESCFINBRANCHNAME,
					T1.TOTALGROSSGRCPFT,
					T1.GRCPROFITDAYSBASIS,
					T1.STEPFINANCE,
					T1.STEPTYPE,
					T1.STEPPOLICY,
					T1.ALWMANUALSTEPS,
					T1.NOOFSTEPS,
					T1.LINKEDFINREF,
					T7.PRODUCT  LOVDESCFINPRODUCT,
					T1.GRCMINRATE,
					T1.GRCMAXRATE,
					T1.RPYMINRATE,
					T1.RPYMAXRATE,
					T1.MANUALSCHEDULE,
					T1.TAKEOVERFINANCE,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.SUPPLEMENTRENT,
					T1.INCREASEDCOST,
					T1.FEEACCOUNTID,
					T1.TDSAPPLICABLE,
					T1.INSURANCEAMT,
					T1.DEDUCTINSDISB,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.CALROUNDINGMODE,
					T1.ALWMULTIDISB,
					T1.BPIAMOUNT,
					T1.DEDUCTFEEDISB,
					T1.FEECHARGEAMT,
					T1.RVWRATEAPPLFOR,
					T1.SCHCALONRVW,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.ROUNDINGTARGET,
					T1.GRCMAXAMOUNT,
					T1.ADVANCEEMI,
					T1.ADVEMITERMS,
					T1.BPIPFTDAYSBASIS  BPIRATEBASIS,
					T1.GRCADVTYPE,
					T1.GRCADVTERMS,
					T1.ADVTYPE,
					T1.ADVTERMS,
					T1.ADVSTAGE,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING,
					T1.APPLIEDLOANAMT,
					T1.FINISRATERVWATGRCEND,
					T1.CBAMOUNT,
					T1.SVAMOUNT,
					T1.SANBSDSCHDLE,
					T1.PROMOTIONSEQID
					FROM WIFFINANCEMAIN T1
					LEFT JOIN WIFINDICATIVETERMDETAIL_TEMP T14 ON T14.FINREFERENCE = T1.FINREFERENCE
					LEFT JOIN CUSTOMERS T15 ON T15.CUSTID = T1.CUSTID
					JOIN RMTFINANCETYPES T7 ON T1.FINTYPE = T7.FINTYPE
					LEFT JOIN RMTBRANCHES T16 ON T1.FINBRANCH = T16.BRANCHCODE
					]]>
		</createView>
	</changeSet>

	<changeSet id="763_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'wiffinancemain_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="764_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
			   select deps_save_and_drop_dependencies ('plf', 'financemain_temp');
			   select deps_save_and_drop_dependencies ('plf', 'financemain');
			]]>
		</sql>
	</changeSet>

	<changeSet id="764.1_pre" author="satyanarayana.g" dbms="mssql">
		<sql>
			<![CDATA[
				alter table FINANCEMAIN drop constraint  DF_FINANCEMAIN_ODTDSAPLB;
				alter table FINANCEMAIN_TEMP drop constraint  DF_FINANCEMAIN_TEMP_ODTDSAPLB ;
			]]>
		</sql>
	</changeSet>

	<changeSet id="764" author="satyanarayana.g">
		<dropColumn tableName="FINANCEMAIN_TEMP" columnName="odTDSApplicable" />
		<dropColumn tableName="FINANCEMAIN" columnName="odTDSApplicable" />
	</changeSet>

	<changeSet id="764_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
			   select deps_restore_dependencies ('plf', 'financemain_temp');
			   select deps_restore_dependencies ('plf', 'financemain');
			]]>
		</sql>
	</changeSet>

	<changeSet id="765.1_pre" author="satyanarayana.g" dbms="mssql">
		<sql>
			<![CDATA[
				alter table FINANCEMAIN_PA drop constraint  DF_FINANCEMAIN_ODTDSAPLBL;
			]]>
		</sql>
	</changeSet>

	<changeSet id="765_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
			   select deps_save_and_drop_dependencies ('plf', 'financemain_pa');
			]]>
		</sql>
	</changeSet>

	<changeSet id="765" author="satyanarayana.g">
		<dropColumn tableName="FINANCEMAIN_PA" columnName="odTDSApplicable" />
	</changeSet>

	<changeSet id="765_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
			   select deps_restore_dependencies ('plf', 'financemain_pa');
			]]>
		</sql>
	</changeSet>

	<changeSet id="766_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
			   select deps_save_and_drop_dependencies ('plf', 'wiffinancemain');
			   select deps_save_and_drop_dependencies ('plf', 'wiffinancemain_temp');
			]]>
		</sql>
	</changeSet>

	<changeSet id="766.1_pre" author="satyanarayana.g" dbms="mssql">
		<sql>
			<![CDATA[
				alter table WIFFINANCEMAIN drop constraint  DF_WIFFINANCEMAIN_ODTDA;
				alter table WIFFINANCEMAIN_TEMP drop constraint  DF_WIFFINANCEMAIN_TEMP_ODTDA ;
			]]>
		</sql>
	</changeSet>

	<changeSet id="766" author="satyanarayana.g">
		<dropColumn tableName="WIFFINANCEMAIN_TEMP" columnName="odTDSApplicable" />
		<dropColumn tableName="WIFFINANCEMAIN" columnName="odTDSApplicable" />
	</changeSet>

	<changeSet id="766_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
			   select deps_restore_dependencies ('plf', 'wiffinancemain_temp');
			   select deps_restore_dependencies ('plf', 'wiffinancemain');
			]]>
		</sql>
	</changeSet>
	<changeSet id="767.1_pre" author="satyanarayana.g" dbms="mssql">
		<sql>
			<![CDATA[
				alter table REJECTFINANCEMAIN drop constraint  DF_REJECTFINANCEMAIN_ODTDSAPL;
			]]>
		</sql>
	</changeSet>

	<changeSet id="767_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rejectfinancemain');
			]]>
		</sql>
	</changeSet>

	<changeSet id="767" author="satyanarayana.g">
		<dropColumn tableName="REJECTFINANCEMAIN" columnName="odTDSApplicable" />
	</changeSet>

	<changeSet id="767_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
			   select deps_restore_dependencies ('plf', 'rejectfinancemain');
			]]>
		</sql>
	</changeSet>

	<changeSet id="768" author="satyanarayana.g">
		<addColumn tableName="FINODPENALTYRATES">
			<column name="odTDSReq" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="769" author="satyanarayana.g">
		<addColumn tableName="FINODPENALTYRATES_TEMP">
			<column name="odTDSReq" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="770" author="satyanarayana.g">
		<addColumn tableName="FINODPENALTYRATES_LOG">
			<column name="odTDSReq" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="771" author="satyanarayana.g">
		<sql>
			<![CDATA[
				UPDATE FINODPENALTYRATES Set odTDSReq = 0  where odTDSReq is null;
				UPDATE FINODPENALTYRATES_TEMP Set odTDSReq = 0 where odTDSReq is null;
				UPDATE FINODPENALTYRATES_LOG Set odTDSReq = 0 where odTDSReq is null;
			]]>
		</sql>
	</changeSet>

	<changeSet id="772" author="satyanarayana.g" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE FINODPENALTYRATES ADD CONSTRAINT DF_FINODPENALTYRATES_ODTR DEFAULT 0 FOR odTDSReq;
				ALTER TABLE FINODPENALTYRATES_TEMP ADD CONSTRAINT DF_FINODPENALTYRATES_TMP_ODTR DEFAULT 0 FOR odTDSReq;
				ALTER TABLE FINODPENALTYRATES_LOG ADD CONSTRAINT DF_FINODPENALTYRATES_LOG_ODTR DEFAULT 0 FOR odTDSReq;
			]]>
		</sql>
	</changeSet>

	<changeSet id="773" author="satyanarayana.g" dbms="postgresql, oracle">
		<addDefaultValue columnName="odTDSReq" tableName="FINODPENALTYRATES" defaultValue="0" />
		<addDefaultValue columnName="odTDSReq" tableName="FINODPENALTYRATES_TEMP" defaultValue="0" />
		<addDefaultValue columnName="odTDSReq" tableName="FINODPENALTYRATES_LOG" defaultValue="0" />
	</changeSet>

	<changeSet id="774" author="satyanarayana.g">
		<addColumn tableName="MANUALADVISE">
			<column name="TDSPaid" type="Decimal(18,0)" />
		</addColumn>
	</changeSet>

	<changeSet id="775" author="satyanarayana.g">
		<addColumn tableName="MANUALADVISE_TEMP">
			<column name="TDSPaid" type="Decimal(18,0)" />
		</addColumn>
	</changeSet>

	<changeSet id="776" author="satyanarayana.g">
		<addColumn tableName="MANUALADVISE_CANCEL">
			<column name="TDSPaid" type="Decimal(18,0)" />
		</addColumn>
	</changeSet>

	<changeSet id="777" author="satyanarayana.g">
		<sql>
			<![CDATA[
				UPDATE MANUALADVISE Set TDSPaid = 0  where TDSPaid is null;
				UPDATE MANUALADVISE_TEMP Set TDSPaid = 0 where TDSPaid is null;
				UPDATE MANUALADVISE_CANCEL Set TDSPaid = 0 where TDSPaid is null;
			]]>
		</sql>
	</changeSet>

	<changeSet id="778" author="satyanarayana.g" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE MANUALADVISE ADD CONSTRAINT DF_MANUALADVISE_TDP DEFAULT 0 FOR TDSPaid;
				ALTER TABLE MANUALADVISE_TEMP ADD CONSTRAINT DF_MANUALADVISE_TEMP_TDP DEFAULT 0 FOR TDSPaid;
				ALTER TABLE MANUALADVISE_CANCEL ADD CONSTRAINT DF_MANUALADVISE_CANCEL_TDP DEFAULT 0 FOR TDSPaid;
			]]>
		</sql>
	</changeSet>

	<changeSet id="779" author="satyanarayana.g" dbms="postgresql, oracle">
		<addDefaultValue columnName="TDSPaid" tableName="MANUALADVISE" defaultValue="0" />
		<addDefaultValue columnName="TDSPaid" tableName="MANUALADVISE_TEMP" defaultValue="0" />
		<addDefaultValue columnName="TDSPaid" tableName="MANUALADVISE_CANCEL" defaultValue="0" />
	</changeSet>

	<changeSet id="784" author="satyanarayana.g">
		<addColumn tableName="FINODDETAILS">
			<column name="LppTDSPaid" type="Decimal(18,0)" />
		</addColumn>
	</changeSet>

	<changeSet id="785" author="satyanarayana.g">
		<sql>
			<![CDATA[
				UPDATE FINODDETAILS Set LppTDSPaid = 0  where LppTDSPaid is null;
			]]>
		</sql>
	</changeSet>

	<changeSet id="786" author="satyanarayana.g" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE FINODDETAILS ADD CONSTRAINT DF_FINODDETAILS_LPTP DEFAULT 0 FOR LppTDSPaid;
				
			]]>
		</sql>
	</changeSet>

	<changeSet id="787" author="satyanarayana.g" dbms="postgresql, oracle">
		<addDefaultValue columnName="LppTDSPaid" tableName="FINODDETAILS" defaultValue="0" />
	</changeSet>


	<changeSet id="788_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finoddetails_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="788" author="satyanarayana.g">
		<createView viewName="FINODDETAILS_VIEW" replaceIfExists="true">
			<![CDATA[
				 SELECT OD.FINREFERENCE,
					    OD.FINODSCHDDATE,
					    OD.FINODFOR,
					    OD.FINBRANCH,
					    OD.FINTYPE,
					    OD.CUSTID,
					    OD.FINODTILLDATE,
					    OD.FINCURODAMT,
					    OD.FINCURODPRI,
					    OD.FINCURODPFT,
					    OD.FINMAXODAMT,
					    OD.FINMAXODPRI,
					    OD.FINMAXODPFT,
					    OD.GRACEDAYS,
					    OD.INCGRACEDAYS,
					    OD.FINCURODDAYS,
					    OD.TOTPENALTYAMT,
					    OD.TOTWAIVED,
					    OD.TOTPENALTYPAID,
					    OD.LPIAMT,
					    OD.LPIPAID,
					    OD.LPIBAL,
					    OD.TOTPENALTYBAL,
					    OD.FINLMDFDATE,
					    COALESCE(PR.APPLYODPENALTY, 0) AS APPLYODPENALTY,
					    COALESCE(PR.ODINCGRCDAYS, 0) AS ODINCGRCDAYS,
					    COALESCE(PR.ODCHARGETYPE, '') AS ODCHARGETYPE,
					    COALESCE(PR.ODGRACEDAYS, 0) AS ODGRACEDAYS,
					    COALESCE(PR.ODCHARGECALON, '') AS ODCHARGECALON,
					    COALESCE(PR.ODCHARGEAMTORPERC, 0) AS ODCHARGEAMTORPERC,
					    COALESCE(PR.ODALLOWWAIVER, 0) AS ODALLOWWAIVER,
					    COALESCE(PR.ODMAXWAIVERPERC, 0) AS ODMAXWAIVERPERC,
					    COALESCE(PR.ODRULECODE, '') AS ODRULECODE,
					    OD.LOCKODRECALCAL,
					    OD.LPPTDSPAID
					   FROM FINODDETAILS OD
					     LEFT JOIN FINODPENALTY_LATEST_RATES_VIEW PR ON OD.FINREFERENCE = PR.FINREFERENCE
				     ]]>
		</createView>
	</changeSet>

	<changeSet id="788_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finoddetails_view');
			]]>
		</sql>
	</changeSet>


	<changeSet id="789_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finodpenaltyrates_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="789" author="satyanarayana.g">
		<createView viewName="FINODPENALTYRATES_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FINREFERENCE,
					  FINEFFECTDATE,
					  APPLYODPENALTY,
					  ODINCGRCDAYS,
					  ODCHARGETYPE,
					  ODGRACEDAYS,
					  ODCHARGECALON,
					  ODCHARGEAMTORPERC,
					  ODALLOWWAIVER,
					  ODMAXWAIVERPERC,
					  ODRULECODE,
					  ODMINCAPAMOUNT,
		        	  ODTDSREQ
					FROM FINODPENALTYRATES_TEMP
				     ]]>
		</createView>
	</changeSet>

	<changeSet id="789_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finodpenaltyrates_tview');
			]]>
		</sql>
	</changeSet>


	<changeSet id="790_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finodpenaltyrates_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="790" author="satyanarayana.g">
		<createView viewName="FINODPENALTYRATES_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FINREFERENCE,
					  FINEFFECTDATE,
					  APPLYODPENALTY,
					  ODINCGRCDAYS,
					  ODCHARGETYPE,
					  ODGRACEDAYS,
					  ODCHARGECALON,
					  ODCHARGEAMTORPERC,
					  ODALLOWWAIVER,
					  ODMAXWAIVERPERC,
					  ODRULECODE,
					  ODMINCAPAMOUNT,
		              ODTDSREQ
				FROM FINODPENALTYRATES
				     ]]>
		</createView>
	</changeSet>

	<changeSet id="790_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finodpenaltyrates_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="791_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finodpenaltyrates_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="791" author="satyanarayana.g">
		<createView viewName="FINODPENALTYRATES_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FINREFERENCE,
						FINEFFECTDATE,
						APPLYODPENALTY,
						ODINCGRCDAYS,
						ODCHARGETYPE,
						ODGRACEDAYS,
						ODCHARGECALON,
						ODCHARGEAMTORPERC,
						ODALLOWWAIVER,
						ODMAXWAIVERPERC,
						ODRULECODE,
						ODMINCAPAMOUNT,
						ODTDSREQ
						FROM FINODPENALTYRATES_TEMP
						UNION
						SELECT FINREFERENCE,
						FINEFFECTDATE,
						APPLYODPENALTY,
						ODINCGRCDAYS,
						ODCHARGETYPE,
						ODGRACEDAYS,
						ODCHARGECALON,
						ODCHARGEAMTORPERC,
						ODALLOWWAIVER,
						ODMAXWAIVERPERC,
						ODRULECODE,
						ODMINCAPAMOUNT,
						ODTDSREQ
						FROM FINODPENALTYRATES
						WHERE NOT (EXISTS (SELECT 1 FROM FINODPENALTYRATES_TEMP
						WHERE FINREFERENCE = FINODPENALTYRATES.FINREFERENCE))
				     ]]>
		</createView>
	</changeSet>

	<changeSet id="791_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finodpenaltyrates_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="792" author="meena.a">
		<sql>
			<![CDATA[
				delete from SMTPARAMETERS where sysparmcode='ALLOW_GST_RETAIL_CUSTOMER';
			   	INSERT INTO SMTPARAMETERS VALUES ('ALLOW_GST_RETAIL_CUSTOMER','Allow Fee calculatedon on adjustedprincipal', 'String',1,'N',1,0,null,null,'Allow Gst Tab on Retail Customer' ,3,1000,current_Timestamp,'Approved',null,null,null,null,null,0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="793_pre" author="anil.c" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_save_and_drop_dependencies ('plf', 'beneficiary');
					select deps_save_and_drop_dependencies ('plf', 'beneficiary_temp');
			]]>
		</sql>
	</changeSet>

	<changeSet id="793" author="anil.c">
		<comment>Alter Scripts for benefciary table account holder name update length changed to 50 instead of 100</comment>
		<modifyDataType tableName="beneficiary" columnName="accholdername" newDataType="varchar(100)" />
	</changeSet>

	<changeSet id="794" author="anil.c">
		<comment>Alter Scripts for benefciary table account holder name update length changed to 50 instead of 100</comment>
		<modifyDataType tableName="beneficiary_temp" columnName="accholdername" newDataType="varchar(100)" />
	</changeSet>

	<changeSet id="793_post" author="anil.c" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_restore_dependencies ('plf', 'beneficiary');
					select deps_restore_dependencies ('plf', 'beneficiary_temp');
			]]>
		</sql>
	</changeSet>

	<changeSet id="794.1_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'manualadvise_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="794" author="satyanarayana.g">
		<createView viewName="MANUALADVISE_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ADVISEID,
				    T1.ADVISETYPE,
				    T1.FINREFERENCE,
				    T1.FEETYPEID,
				    T1.SEQUENCE,
				    T1.ADVISEAMOUNT,
				    T1.PAIDAMOUNT,
				    T1.WAIVEDAMOUNT,
				    T1.REMARKS,
				    T1.VALUEDATE,
				    T1.POSTDATE,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T2.FEETYPEDESC,
				    T2.FEETYPECODE,
				    T1.BOUNCEID,
				    T1.RECEIPTID,
				    T3.BOUNCECODE,
				    T1.RESERVEDAMT,
				    T1.BALANCEAMT,
				    T3.REASON AS BOUNCECODEDESC,
				    COALESCE(T2.TAXAPPLICABLE, 0) AS TAXAPPLICABLE,
				    T2.TAXCOMPONENT,
           			COALESCE(T2.TDSREQ, 0) AS TDSREQ,
				    T1.PAIDCGST,
				    T1.PAIDSGST,
				    T1.PAIDIGST,
				    T1.PAIDUGST,
				    T1.WAIVEDCGST,
				    T1.WAIVEDSGST,
				    T1.WAIVEDUGST,
				    T1.WAIVEDIGST,
				    T1.WAIVEDCESS,
				    T1.PAIDCESS,
					T1.FINSOURCE,
					T1.DUECREATION,
					T1.LINKEDTRANID,
					T1.TDSPAID
				   FROM MANUALADVISE_TEMP T1
				     LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
				     LEFT JOIN BOUNCEREASONS T3 ON T1.BOUNCEID = T3.BOUNCEID
				UNION ALL
				 SELECT T1.ADVISEID,
				    T1.ADVISETYPE,
				    T1.FINREFERENCE,
				    T1.FEETYPEID,
				    T1.SEQUENCE,
				    T1.ADVISEAMOUNT,
				    T1.PAIDAMOUNT,
				    T1.WAIVEDAMOUNT,
				    T1.REMARKS,
				    T1.VALUEDATE,
				    T1.POSTDATE,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T2.FEETYPEDESC,
				    T2.FEETYPECODE,
				    T1.BOUNCEID,
				    T1.RECEIPTID,
				    T3.BOUNCECODE,
				    T1.RESERVEDAMT,
				    T1.BALANCEAMT,
				    T3.REASON AS BOUNCECODEDESC,
				    COALESCE(T2.TAXAPPLICABLE, 0) AS TAXAPPLICABLE,
            		T2.TAXCOMPONENT,
            		COALESCE(T2.TDSREQ, 0) AS TDSREQ,
				    T1.PAIDCGST,
				    T1.PAIDSGST,
				    T1.PAIDIGST,
				    T1.PAIDUGST,
				    T1.WAIVEDCGST,
				    T1.WAIVEDSGST,
				    T1.WAIVEDUGST,
				    T1.WAIVEDIGST,
				    T1.WAIVEDCESS,
				    T1.PAIDCESS,
					T1.FINSOURCE,
					T1.DUECREATION,
					T1.LINKEDTRANID,
					T1.TDSPAID
				   FROM MANUALADVISE T1
				     LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
				     LEFT JOIN BOUNCEREASONS T3 ON T1.BOUNCEID = T3.BOUNCEID
				  WHERE NOT (EXISTS ( SELECT 1
				  FROM MANUALADVISE_TEMP
				  WHERE MANUALADVISE_TEMP.ADVISEID = T1.ADVISEID))
					]]>
		</createView>
	</changeSet>

	<changeSet id="794.1_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'manualadvise_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="795.1_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'manualadvise_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="795" author="satyanarayana.g">
		<createView viewName="MANUALADVISE_AVIEW" replaceIfExists="true">
			<![CDATA[
				 SELECT T1.ADVISEID,
				    T1.ADVISETYPE,
				    T1.FINREFERENCE,
				    T1.FEETYPEID,
				    T1.SEQUENCE,
				    T1.ADVISEAMOUNT,
				    T1.PAIDAMOUNT,
				    T1.WAIVEDAMOUNT,
				    T1.REMARKS,
				    T1.VALUEDATE,
				    T1.POSTDATE,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T2.FEETYPEDESC,
				    T2.FEETYPECODE,
				    T1.BOUNCEID,
				    T1.RECEIPTID,
				    T3.BOUNCECODE,
				    T1.RESERVEDAMT,
				    T1.BALANCEAMT,
				    T3.REASON AS BOUNCECODEDESC,
				    COALESCE(T2.TAXAPPLICABLE, 0) AS TAXAPPLICABLE,
           			COALESCE(T2.TDSREQ, 0) AS TDSREQ,
				    T2.TAXCOMPONENT,
				    T1.PAIDCGST,
				    T1.PAIDSGST,
				    T1.PAIDIGST,
				    T1.PAIDUGST,
				    T1.WAIVEDCGST,
				    T1.WAIVEDSGST,
				    T1.WAIVEDUGST,
				    T1.WAIVEDIGST,
				    T1.WAIVEDCESS,
				    T1.PAIDCESS,
					T1.FINSOURCE,
					T1.DUECREATION,
					T1.LINKEDTRANID,
					T1.TDSPAID
				   FROM MANUALADVISE T1
				     LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
				     LEFT JOIN BOUNCEREASONS T3 ON T1.BOUNCEID = T3.BOUNCEID
					]]>
		</createView>
	</changeSet>

	<changeSet id="795_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'manualadvise_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="796_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'manualadvise_lview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="796" author="satyanarayana.g">
		<createView viewName="MANUALADVISE_LVIEW" replaceIfExists="true">
			<![CDATA[
				 SELECT T1.ADVISEID,
				    T1.ADVISETYPE,
				    T1.FINREFERENCE,
				    T1.FEETYPEID,
				    T1.SEQUENCE,
				    T1.ADVISEAMOUNT,
				    T1.PAIDAMOUNT,
				    T1.WAIVEDAMOUNT,
				    T1.REMARKS,
				    T1.VALUEDATE,
				    T1.POSTDATE,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T2.FEETYPEDESC,
				    T2.FEETYPECODE,
				    T1.BOUNCEID,
				    T1.RECEIPTID,
				    T3.BOUNCECODE,
				    T1.RESERVEDAMT,
				    T1.BALANCEAMT,
				    T3.REASON AS BOUNCECODEDESC,
				    COALESCE(T2.TAXAPPLICABLE, 0) AS TAXAPPLICABLE,
            		COALESCE(T2.TDSREQ, 0) AS TDSREQ,
				    T2.TAXCOMPONENT,
				    T1.PAIDCGST,
				    T1.PAIDSGST,
				    T1.PAIDIGST,
				    T1.PAIDUGST,
				    T1.WAIVEDCGST,
				    T1.WAIVEDSGST,
				    T1.WAIVEDUGST,
				    T1.WAIVEDIGST,
					T1.FINSOURCE,
					T1.DUECREATION,
					T1.LINKEDTRANID,
					T1.TDSPAID
				    FROM MANUALADVISE T1
				    LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
				    LEFT JOIN BOUNCEREASONS T3 ON T1.BOUNCEID = T3.BOUNCEID
					]]>
		</createView>
	</changeSet>

	<changeSet id="796_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'manualadvise_lview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="797_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'manualadvise_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="797" author="satyanarayana.g">
		<createView viewName="MANUALADVISE_TVIEW" replaceIfExists="true">
			<![CDATA[
				 SELECT T1.ADVISEID,
				    T1.ADVISETYPE,
				    T1.FINREFERENCE,
				    T1.FEETYPEID,
				    T1.SEQUENCE,
				    T1.ADVISEAMOUNT,
				    T1.PAIDAMOUNT,
				    T1.WAIVEDAMOUNT,
				    T1.REMARKS,
				    T1.VALUEDATE,
				    T1.POSTDATE,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T2.FEETYPEDESC,
				    T2.FEETYPECODE,
				    T1.BOUNCEID,
				    T1.RECEIPTID,
				    T3.BOUNCECODE,
				    T1.RESERVEDAMT,
				    T1.BALANCEAMT,
				    T3.REASON AS BOUNCECODEDESC,
				    COALESCE(T2.TAXAPPLICABLE, 0) AS TAXAPPLICABLE,
            		COALESCE(T2.TDSREQ, 0) AS TDSREQ,
				    T2.TAXCOMPONENT,
				    T1.PAIDCGST,
				    T1.PAIDSGST,
				    T1.PAIDIGST,
				    T1.PAIDUGST,
				    T1.WAIVEDCGST,
				    T1.WAIVEDSGST,
				    T1.WAIVEDUGST,
				    T1.WAIVEDIGST,
				    T1.WAIVEDCESS,
				    T1.PAIDCESS,
					T1.FINSOURCE,
					T1.DUECREATION,
					T1.LINKEDTRANID,
					T1.TDSPAID
				    FROM MANUALADVISE_TEMP T1
				    LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
				    LEFT JOIN BOUNCEREASONS T3 ON T1.BOUNCEID = T3.BOUNCEID
					]]>
		</createView>
	</changeSet>

	<changeSet id="797_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'manualadvise_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="798" author="saiteja.r">
		<createTable tableName="MANDATE_SOURCES_TEMP">
			<column name="Code" type="varchar(3)">
				<constraints nullable="false" />
			</column>
			<column name="Description" type="varchar(50)" />
			<column name="Active" type="smallint" defaultValue="0" />
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkFlowId" type="bigint">
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>

	<changeSet id="799" author="saiteja.r">
		<createTable tableName="MANDATE_SOURCES">
			<column name="Code" type="varchar(3)">
				<constraints nullable="false" />
			</column>
			<column name="Description" type="varchar(50)" />
			<column name="Active" type="smallint" defaultValue="0" />
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkFlowId" type="bigint">
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>

	<changeSet id="800" author="saiteja.r">
		<addPrimaryKey constraintName="PK_MANDATE_SOURCES_TEMP" tableName="MANDATE_SOURCES_TEMP" columnNames="Code" />
		<addPrimaryKey constraintName="PK_MANDATE_SOURCES" tableName="MANDATE_SOURCES" columnNames="Code" />
	</changeSet>

	<changeSet id="801" author="saiteja.r">
		<sql>
			<![CDATA[
				INSERT INTO MANDATE_SOURCES(Code, Description, Active, Version, LastMntBy, LastMntOn, RecordStatus, WorkFlowId) VALUES ('ND', 'Net banking/ Debit Card', 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', 0);
				INSERT INTO MANDATE_SOURCES(Code, Description, Active, Version, LastMntBy, LastMntOn, RecordStatus, WorkFlowId) VALUES ('OT', 'Banks OTP',1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', 0);
				INSERT INTO MANDATE_SOURCES(Code, Description, Active, Version, LastMntBy, LastMntOn, RecordStatus, WorkFlowId) VALUES ('TA', 'TPSL Aadhaar E-Sign',1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', 0);
				INSERT INTO MANDATE_SOURCES(Code, Description, Active, Version, LastMntBy, LastMntOn, RecordStatus, WorkFlowId) VALUES ('NN', 'NPCI API E-Mandate',1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', 0);
				INSERT INTO MANDATE_SOURCES(Code, Description, Active, Version, LastMntBy, LastMntOn, RecordStatus, WorkFlowId) VALUES ('DA', 'Digio Aadhar E-sign',1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', 0);
				INSERT INTO MANDATE_SOURCES(Code, Description, Active, Version, LastMntBy, LastMntOn, RecordStatus, WorkFlowId) values ('RZ', 'Razorpay', 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', 0);
				INSERT INTO MANDATE_SOURCES(Code, Description, Active, Version, LastMntBy, LastMntOn, RecordStatus, WorkFlowId) values ('BD', 'Bill Desk', 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="802" author="saiteja.r">
		<sql>
			<![CDATA[
			
				UPDATE SEQSECRIGHTS SET SEQNO = (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS);
				UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);
				
				INSERT INTO SECRIGHTS values ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'BankBranchDialog_AllowedSources','BankBranchDialog',0,1000,CURRENT_TIMESTAMP,null,null,null,null,null,null,0);
				INSERT INTO SECRIGHTS values ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'BankBranchDialog_Emandate','BankBranchDialog',0,1000,CURRENT_TIMESTAMP,null,null,null,null,null,null,0);
				INSERT INTO SECRIGHTS values ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2, 'button_BankBranchDialog_btnMultiSource','BankBranchDialog',0,1000,CURRENT_TIMESTAMP,null,null,null,null,null,null,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='BANKBRANCH_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='BankBranchDialog_AllowedSources'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='BANKBRANCH_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='BankBranchDialog_Emandate'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='BANKBRANCH_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_BankBranchDialog_btnMultiSource'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
				
				UPDATE SEQSECRIGHTS SET SEQNO = (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS);
				UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);
			]]>
		</sql>
	</changeSet>

	<changeSet id="803" author="saiteja.r">
		<sql>
			<![CDATA[
				DELETE FROM SMTPARAMETERS WHERE SYSPARMCODE='MANDATE_EMANDATE_REQUIRED';
				INSERT INTO SMTPARAMETERS VALUES('MANDATE_EMANDATE_REQUIRED','E-Mandate required or not','String',1,'N',1,0,null,null,'E-Mandate required or not',1,1000,current_timestamp,'Approved',null,null,null,null,null,0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="804" author="saiteja.r">
		<addColumn tableName="BANKBRANCHES">
			<column name="Emandate" type="smallint" defaultValue="0" />
		</addColumn>
		<addColumn tableName="BANKBRANCHES">
			<column name="AllowedSources" type="varchar(50)" />
		</addColumn>
		<addColumn tableName="BANKBRANCHES_TEMP">
			<column name="Emandate" type="smallint" defaultValue="0" />
		</addColumn>
		<addColumn tableName="BANKBRANCHES_TEMP">
			<column name="AllowedSources" type="varchar(50)" />
		</addColumn>
	</changeSet>

	<changeSet id="805" author="saiteja.r">
		<sql>
			<![CDATA[
				Update BANKBRANCHES set Emandate = 0;
				Update BANKBRANCHES_TEMP set Emandate = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="808.1" author="saiteja.r">
		<createView viewName="BANKBRANCHES_TVIEW" replaceIfExists="true">
			<![CDATA[
	 			SELECT t1.bankbranchid,
	   					t1.bankcode,
					    t1.branchcode,
					    t1.branchdesc,
					    t1.city,
					    t1.micr,
					    t1.ifsc,
					    t2.bankname,
					    t1.ecs,
					    t1.dda,
					    t1.nach,
					    t1.dd,
					    t1.addofbranch,
					    t1.cheque,
					    t1.active,
					    t1.version,
					    t1.lastmntby,
					    t1.lastmnton,
					    t1.recordstatus,
					    t1.rolecode,
					    t1.nextrolecode,
					    t1.taskid,
					    t1.nexttaskid,
					    t1.recordtype,
					    t1.workflowid,
					    t2.accnolength,
					    t1.parentbranch,
					    t1.parentbranchdesc,
					    t1.emandate,
					    t1.allowedsources
					   FROM bankbranches_temp t1
					   JOIN bmtbankdetail t2 ON t1.bankcode = t2.bankcode
				]]>
	 		</createView>
	</changeSet>
	<changeSet id="809.1" author="saiteja.r">
		<createView viewName="BANKBRANCHES_AVIEW" replaceIfExists="true">
				<![CDATA[
		 			SELECT t1.bankbranchid,
						    t1.bankcode,
						    t1.branchcode,
						    t1.branchdesc,
						    t1.city,
						    t3.pccityname,
						    t1.micr,
						    t1.ifsc,
						    t2.bankname,
						    t1.ecs,
						    t1.dda,
						    t1.nach,
						    t1.dd,
						    t1.addofbranch,
						    t1.cheque,
						    t1.active,
						    t1.version,
						    t1.lastmntby,
						    t1.lastmnton,
						    t1.recordstatus,
						    t1.rolecode,
						    t1.nextrolecode,
						    t1.taskid,
						    t1.nexttaskid,
						    t1.recordtype,
						    t1.workflowid,
						    t2.accnolength,
						    t1.parentbranch,
						    t1.parentbranchdesc,
						    t1.EMANDATE,
						    t1.allowedsources
		   			FROM bankbranches t1
		     		JOIN bmtbankdetail t2 ON t1.bankcode = t2.bankcode
		    		LEFT JOIN rmtprovincevscity t3 ON t3.pccity = t1.city
    		]]>
		</createView>
	</changeSet>
	<changeSet id="810.1" author="saiteja.r">
		<createView viewName="BANKBRANCHES_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT t1.bankbranchid,
					    t1.bankcode,
					    t1.branchcode,
					    t1.branchdesc,
					    t1.city,
					    t3.pccityname,
					    t1.micr,
					    t1.ifsc,
					    t2.bankname,
					    t1.ecs,
					    t1.dda,
					    t1.nach,
					    t1.dd,
					    t1.addofbranch,
					    t1.cheque,
					    t1.active,
					    t1.version,
					    t1.lastmntby,
					    t1.lastmnton,
					    t1.recordstatus,
					    t1.rolecode,
					    t1.nextrolecode,
					    t1.taskid,
					    t1.nexttaskid,
					    t1.recordtype,
					    t1.workflowid,
					    t2.accnolength,
					    t1.parentbranch,
					    t1.parentbranchdesc,
					    t1.emandate,
					    t1.allowedsources
			   FROM bankbranches_temp t1
			     JOIN bmtbankdetail t2 ON t1.bankcode = t2.bankcode
			     LEFT JOIN rmtprovincevscity t3 ON t3.pccity = t1.city
				UNION ALL
 				SELECT t1.bankbranchid,
					    t1.bankcode,
					    t1.branchcode,
					    t1.branchdesc,
					    t1.city,
					    t3.pccityname,
					    t1.micr,
					    t1.ifsc,
					    t2.bankname,
					    t1.ecs,
					    t1.dda,
					    t1.nach,
					    t1.dd,
					    t1.addofbranch,
					    t1.cheque,
					    t1.active,
					    t1.version,
					    t1.lastmntby,
					    t1.lastmnton,
					    t1.recordstatus,
					    t1.rolecode,
					    t1.nextrolecode,
					    t1.taskid,
					    t1.nexttaskid,
					    t1.recordtype,
					    t1.workflowid,
					    t2.accnolength,
					    t1.parentbranch,
					    t1.parentbranchdesc,
					    t1.emandate,
					    t1.allowedsources
		   FROM bankbranches t1
		     JOIN bmtbankdetail t2 ON t1.bankcode = t2.bankcode
		     LEFT JOIN rmtprovincevscity t3 ON t3.pccity = t1.city
			  WHERE NOT (EXISTS ( SELECT 1
			           FROM bankbranches_temp
			          WHERE bankbranches_temp.bankbranchid = t1.bankbranchid))
			]]>
	</createView>
	</changeSet>
	<changeSet id="811" author="yelladas.n">
		<addColumn tableName="MANDATES">
			<column name="EMandateSource" type="varchar(50)" />
		</addColumn>
		<addColumn tableName="MANDATES">
			<column name="EMandateReferenceNo" type="varchar(50)" />
		</addColumn>
	</changeSet>
	<changeSet id="812" author="yelladas.n">
		<addColumn tableName="MANDATES_TEMP">
			<column name="EMandateSource" type="varchar(50)" />
		</addColumn>
		<addColumn tableName="MANDATES_TEMP">
			<column name="EMandateReferenceNo" type="varchar(50)" />
		</addColumn>
	</changeSet>

	<changeSet id="813.1" author="yelladas.n">
		<createView viewName="MANDATES_AVIEW" replaceIfExists="true">
			<![CDATA[
                  SELECT t1.mandateid,
					t1.custid,
					t1.mandateref,
					t1.mandatetype,
					t1.bankbranchid,
					t1.accnumber,
					t1.accholdername,
					t1.jointaccholdername,
					t1.acctype,
					t1.openmandate,
					t1.startdate,
					t1.expirydate,
					t1.maxlimit,
					t1.periodicity,
					t1.phonecountrycode,
					t1.phoneareacode,
					t1.phonenumber,
					t1.status,
					t1.approvalid,
					t1.version,
					t1.lastmntby,
					t1.lastmnton,
					t1.recordstatus,
					t1.rolecode,
					t1.nextrolecode,
					t1.taskid,
					t1.nexttaskid,
					t1.recordtype,
					t1.workflowid,
					t1.reason,
					t1.mandateccy,
					t2.custcif,
					t2.custshrtname,
					t3.bankcode,
					t3.branchcode,
					t3.branchdesc,
					t3.micr,
					t3.ifsc,
					t3.city,
					t4.bankname,
					t1.inputdate,
					t1.active,
					0  useexisting,
					t1.orgreference,
					t5.pccityname,
					t1.documentname,
					t1.documentref,
					t1.externalref,
					t1.entitycode,
					t6.entitydesc,
					t1.primarymandateid,
					t1.swapisactive,
					t1.barcodenumber,
					t7.partnerbankcode,
					t7.partnerbankname,
					t1.partnerbankid,
					t1.eMandateSource,
					t1.eMandateReferenceNo
					FROM mandates t1
					JOIN customers t2 ON t1.custid = t2.custid
					LEFT JOIN bankbranches t3 ON t1.bankbranchid = t3.bankbranchid
					LEFT JOIN bmtbankdetail t4 ON t3.bankcode = t4.bankcode
					LEFT JOIN rmtprovincevscity t5 ON t3.city = t5.pccity
					LEFT JOIN entity t6 ON t1.entitycode = t6.entitycode
					LEFT JOIN partnerbanks t7 ON t1.partnerbankid = t7.partnerbankid
					]]>
	       </createView>
	</changeSet>

	<changeSet id="814.1" author="yelladas.n">
		<createView viewName="MANDATES_TVIEW" replaceIfExists="true">
			<![CDATA[
	              SELECT t1.mandateid,
					t1.custid,
					t1.mandateref,
					t1.mandatetype,
					t1.bankbranchid,
					t1.accnumber,
					t1.accholdername,
					t1.jointaccholdername,
					t1.acctype,
					t1.openmandate,
					t1.startdate,
					t1.expirydate,
					t1.maxlimit,
					t1.periodicity,
					t1.phonecountrycode,
					t1.phoneareacode,
					t1.phonenumber,
					t1.status,
					t1.approvalid,
					t1.version,
					t1.lastmntby,
					t1.lastmnton,
					t1.recordstatus,
					t1.rolecode,
					t1.nextrolecode,
					t1.taskid,
					t1.nexttaskid,
					t1.recordtype,
					t1.workflowid,
					t1.reason,
					t1.mandateccy,
					t2.custcif,
					t2.custshrtname,
					t3.bankcode,
					t3.branchcode,
					t3.branchdesc,
					t3.micr,
					t3.ifsc,
					t3.city,
					t4.bankname,
					t1.inputdate,
					t1.active,
					0 useexisting,
					t1.orgreference,
					t5.pccityname,
					t1.documentname,
					t1.documentref,
					t1.externalref,
					t1.entitycode,
					t6.entitydesc,
					t1.primarymandateid,
					t1.swapisactive,
					t1.barcodenumber,
					t7.partnerbankcode,
					t7.partnerbankname,
					t1.partnerbankid,
					t1.eMandateSource,
					t1.eMandateReferenceNo
					FROM mandates_temp t1
					JOIN customers t2 ON t1.custid = t2.custid
					LEFT JOIN bankbranches t3 ON t1.bankbranchid = t3.bankbranchid
					LEFT JOIN bmtbankdetail t4 ON t3.bankcode = t4.bankcode
					LEFT JOIN rmtprovincevscity t5 ON t3.city = t5.pccity
					LEFT JOIN entity t6 ON t1.entitycode = t6.entitycode
					LEFT JOIN partnerbanks t7 ON t1.partnerbankid = t7.partnerbankid
				]]>
	       </createView>
	</changeSet>

	<changeSet id="815.1" author="yelladas.n">
		<createView viewName="MANDATES_VIEW" replaceIfExists="true">
			<![CDATA[
	        	SELECT t1.mandateid,
					t1.custid,
					t1.mandateref,
					t1.mandatetype,
					t1.bankbranchid,
					t1.accnumber,
					t1.accholdername,
					t1.jointaccholdername,
					t1.acctype,
					t1.openmandate,
					t1.startdate,
					t1.expirydate,
					t1.maxlimit,
					t1.periodicity,
					t1.phonecountrycode,
					t1.phoneareacode,
					t1.phonenumber,
					t1.status,
					t1.approvalid,
					t1.version,
					t1.lastmntby,
					t1.lastmnton,
					t1.recordstatus,
					t1.rolecode,
					t1.nextrolecode,
					t1.taskid,
					t1.nexttaskid,
					t1.recordtype,
					t1.workflowid,
					t1.reason,
					t1.mandateccy,
					t2.custcif,
					t2.custshrtname,
					t3.bankcode,
					t3.branchcode,
					t3.branchdesc,
					t3.micr,
					t3.ifsc,
					t3.city,
					t4.bankname,
					t1.inputdate,
					t1.active,
					0 useexisting,
					t1.orgreference,
					t5.pccityname,
					t1.documentname,
					t1.documentref,
					t1.externalref,
					t1.entitycode,
					t6.entitydesc,
					t1.primarymandateid,
					t1.swapisactive,
					t1.barcodenumber,
					t7.partnerbankcode,
					t7.partnerbankname,
					t1.partnerbankid,
					t1.eMandateSource,
					t1.eMandateReferenceNo
					FROM mandates_temp t1
					JOIN customers t2 ON t1.custid = t2.custid
					LEFT JOIN bankbranches t3 ON t1.bankbranchid = t3.bankbranchid
					LEFT JOIN bmtbankdetail t4 ON t3.bankcode = t4.bankcode
					LEFT JOIN rmtprovincevscity t5 ON t3.city = t5.pccity
					LEFT JOIN entity t6 ON t1.entitycode = t6.entitycode
					LEFT JOIN partnerbanks t7 ON t1.partnerbankid = t7.partnerbankid
                    UNION ALL
					SELECT t1.mandateid,
					t1.custid,
					t1.mandateref,
					t1.mandatetype,
					t1.bankbranchid,
					t1.accnumber,
					t1.accholdername,
					t1.jointaccholdername,
					t1.acctype,
					t1.openmandate,
					t1.startdate,
					t1.expirydate,
					t1.maxlimit,
					t1.periodicity,
					t1.phonecountrycode,
					t1.phoneareacode,
					t1.phonenumber,
					t1.status,
					t1.approvalid,
					t1.version,
					t1.lastmntby,
					t1.lastmnton,
					t1.recordstatus,
					t1.rolecode,
					t1.nextrolecode,
					t1.taskid,
					t1.nexttaskid,
					t1.recordtype,
					t1.workflowid,
					t1.reason,
					t1.mandateccy,
					t2.custcif,
					t2.custshrtname,
					t3.bankcode,
					t3.branchcode,
					t3.branchdesc,
					t3.micr,
					t3.ifsc,
					t3.city,
					t4.bankname,
					t1.inputdate,
					t1.active,
					1 useexisting,
					t1.orgreference,
					t5.pccityname,
					t1.documentname,
					t1.documentref,
					t1.externalref,
					t1.entitycode,
					t6.entitydesc,
					t1.primarymandateid,
					t1.swapisactive,
					t1.barcodenumber,
					t7.partnerbankcode,
					t7.partnerbankname,
					t1.partnerbankid,
					t1.eMandateSource,
					t1.eMandateReferenceNo
                    FROM mandates t1
					JOIN customers t2 ON t1.custid = t2.custid
					LEFT JOIN bankbranches t3 ON t1.bankbranchid = t3.bankbranchid
					LEFT JOIN bmtbankdetail t4 ON t3.bankcode = t4.bankcode
					LEFT JOIN rmtprovincevscity t5 ON t3.city = t5.pccity
					LEFT JOIN entity t6 ON t1.entitycode = t6.entitycode
					LEFT JOIN partnerbanks t7 ON t1.partnerbankid = t7.partnerbankid
					WHERE NOT (EXISTS ( SELECT 1
							FROM mandates_temp
							WHERE mandates_temp.mandateid = t1.mandateid))
			]]>
 		</createView>
	</changeSet>
	<changeSet id="816" author="yelladas.n">
		<sql>
			<![CDATA[
					
					 UPDATE SEQSECRIGHTS SET SEQNO = (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS);
					 UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);
					
					 INSERT INTO SECRIGHTS Values ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS_VIEW), 3, 'MandateDialog_eMandateSource', 'MandateDialog', 1, 1000, current_timestamp, 'Approved',null,null,null,null,null,0);
					 INSERT INTO SECRIGHTS Values ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS_VIEW), 3, 'MandateDialog_eMandateReferenceNo', 'MandateDialog', 1, 1000, current_timestamp, 'Approved',null,null,null,null,null,0);
				 
				     INSERT INTO SECGROUPRIGHTS Values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS_VIEW),(SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='MANDATE_MAKER'),(select RightID from SecRights WHERE RightName='MandateDialog_eMandateSource'),1,0,10000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
			         INSERT INTO SECGROUPRIGHTS values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS_VIEW),(SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='MANDATE_MAKER'),(select RightID from SecRights WHERE RightName='MandateDialog_eMandateReferenceNo'),1,0,10000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
			 
			         UPDATE SEQSECRIGHTS SET SEQNO = (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS);
					 UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);
			]]>
		</sql>
	</changeSet>
	<changeSet id="817" author="naga.g">
		<addColumn tableName="PRESENTMENTHEADER">
			<column name="EMandateSource" type="varchar(50)" />
		</addColumn>
	</changeSet>
	<changeSet id="818" author="naga.g">
		<addColumn tableName="PRESENTMENTHEADER_TEMP">
			<column name="EMandateSource" type="varchar(50)" />
		</addColumn>
	</changeSet>
	<changeSet id="819.1" author="naga.g">
		<createView viewName="PRESENTMENTHEADER_VIEW" replaceIfExists="true">
			<![CDATA[
				  SELECT t1.id,
		    		   t1.reference,
		    		   t1.presentmentdate,
		   			   t1.partnerbankid,
		    		   t1.fromdate,
		    		   t1.todate,
		    		   t1.status,
		    		   t1.mandatetype,
		    		   t1.emandatesource,
		    		   t1.loantype,
		    		   t1.finbranch,
		    		   t1.schdate,
		    		   t1.bankcode,
		    		   t1.version,
		    		   t1.lastmntby,
		    		   t1.lastmnton,
		    		   t1.recordstatus,
		    		   t1.rolecode,
		    		   t1.nextrolecode,
		    		   t1.taskid,
		    		   t1.nexttaskid,
		    		   t1.recordtype,
		    		   t1.workflowid,
		    		   t1.dbstatusid,
		    		   t2.partnerbankname,
		    		   t2.partnerbankcode,
		    		   t2.accountno AS partneracctnumber,
		    		   t2.actype AS partneraccttype,
		    		   t1.importstatusid,
		    		   t1.totalrecords,
		    		   t1.processedrecords,
		    		   t1.successrecords,
		    		   t1.failedrecords,
		    		   t3.bankname,
		    		   t1.entitycode,
		    		   t1.presentmenttype
		   			FROM presentmentheader_temp t1
		     		LEFT JOIN partnerbanks t2 ON t1.partnerbankid = t2.partnerbankid
		    		LEFT JOIN bmtbankdetail t3 ON t3.bankcode = t1.bankcode
					UNION ALL
				    SELECT t1.id,
		               t1.reference,
		               t1.presentmentdate,
		               t1.partnerbankid,
		               t1.fromdate,
		               t1.todate,
		               t1.status,
		               t1.mandatetype,
		               t1.emandatesource,
		               t1.loantype,
		               t1.finbranch,
		               t1.schdate,
		               t1.bankcode,
		               t1.version,
		               t1.lastmntby,
		               t1.lastmnton,
		               t1.recordstatus,
		               t1.rolecode,
		               t1.nextrolecode,
		               t1.taskid,
		               t1.nexttaskid,
		               t1.recordtype,
		               t1.workflowid,
		               t1.dbstatusid,
		               t2.partnerbankname,
		               t2.partnerbankcode,
		               t2.accountno AS partneracctnumber,
		               t2.actype AS partneraccttype,
		               t1.importstatusid,
		               t1.totalrecords,
		               t1.processedrecords,
		               t1.successrecords,
		               t1.failedrecords,
		               t3.bankname,
		               t1.entitycode,
		               t1.presentmenttype
		               FROM presentmentheader t1
		         LEFT JOIN partnerbanks t2 ON t1.partnerbankid = t2.partnerbankid
		         LEFT JOIN bmtbankdetail t3 ON t3.bankcode = t1.bankcode
		         WHERE NOT (EXISTS ( SELECT 1 FROM presentmentheader_temp WHERE presentmentheader_temp.id = t1.id))
         	]]>
		</createView>
	</changeSet>
	<changeSet id="820.1" author="naga.g">
		<createView viewName="PRESENTMENTHEADER_AVIEW" replaceIfExists="true">
			<![CDATA[
					SELECT t1.id,
				   t1.reference,
				   t1.presentmentdate,
				   t1.partnerbankid,
				   t1.fromdate,
				   t1.todate,
				   t1.status,
				   t1.mandatetype,
				   t1.emandatesource,
				   t1.loantype,
				   t1.finbranch,
				   t1.schdate,
				   t1.bankcode,
				   t1.version,
				   t1.lastmntby,
				   t1.lastmnton,
				   t1.recordstatus,
				   t1.rolecode,
				   t1.nextrolecode,
				   t1.taskid,
				   t1.nexttaskid,
				   t1.recordtype,
				   t1.workflowid,
				   t1.dbstatusid,
				   t2.partnerbankname,
				   t2.partnerbankcode,
				   t2.accountno AS partneracctnumber,
				   t2.actype AS partneraccttype,
				   t1.importstatusid,
				   t1.totalrecords,
				   t1.processedrecords,
				   t1.successrecords,
				   t1.failedrecords,
				   t3.bankname,
				   t1.entitycode,
				   t1.presentmenttype
				   FROM presentmentheader t1
	        LEFT JOIN partnerbanks t2 ON t1.partnerbankid = t2.partnerbankid
	        LEFT JOIN bmtbankdetail t3 ON t3.bankcode = t1.bankcode
        ]]>
		</createView>
	</changeSet>
	<changeSet id="821" author="naga.g">
		<addColumn tableName="PRESENTMENT_REQ_DETAILS">
			<column name="EMandateSource" type="varchar(50)" />
		</addColumn>
	</changeSet>
	<changeSet id="822" author="naga.g">
		<addColumn tableName="PRESENTMENT_REQ_DETAILS_TEMP">
			<column name="EMandateSource" type="varchar(50)" />
		</addColumn>
	</changeSet>
	<changeSet id="823" author="naga.g">
		<sql>
			<![CDATA[
	             DELETE FROM DATA_ENGINE_LOG WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='PRESENTMENT_REQUEST_EMNDT_BD');
	             DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='PRESENTMENT_REQUEST_EMNDT_BD');
	             DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='PRESENTMENT_REQUEST_EMNDT_BD';
	             
	             DELETE FROM DATA_ENGINE_COLUMN where TABLEID IN (select ID from DATA_ENGINE_TABLE WHERE CONFIGID = (select ID from DATA_ENGINE_CONFIG where Name = 'PRESENTMENT_REQUEST_EMNDT_BD'));
	             DELETE FROM DATA_ENGINE_TABLE where CONFIGID IN (select ID from DATA_ENGINE_CONFIG where Name = 'PRESENTMENT_REQUEST_EMNDT_BD');
	             DELETE FROM DATA_ENGINE_CONFIG where Name = 'PRESENTMENT_REQUEST_EMNDT_BD';
	             
	             INSERT INTO DATA_ENGINE_CONFIG VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'PRESENTMENT_REQUEST_EMNDT_BD', 'Presentment Request Emandate BillDesk.', 2, NULL, NULL, NULL, NULL , 0, 0, NULL, 'Debti Reference Nu, LAN No, Customer ID, Debit Amount, Debit Date', '', 'A', '/opt/MMFL/PFF/GSF/presentment', 'PRESENTREQ', '.csv', 0, NULL, '${SEQ_FILE},_${yyyyMMddHHmmss}', NULL, 0, NULL, 1, 1); 
	             INSERT INTO DATA_ENGINE_TABLE  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'PRESENTMENT_REQUEST_EMNDT_BD'), 'PRESENTMENT_REQ_DETAILS_View',  0, 'JOB_ID', 'JOB_ID = :JOB_ID', NULL, NULL, NULL, NULL, NULL, NULL, 0, 0, 0);
	             
	             INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'PRESENTMENT_REQ_DETAILS_View' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'PRESENTMENT_REQUEST_EMNDT_BD')), 'BATCHID', 0, 'N', NULL, NULL, NULL, NULL, 0, NULL, NULL, NULL, NULL, 'M');
	             INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'PRESENTMENT_REQ_DETAILS_View' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'PRESENTMENT_REQUEST_EMNDT_BD')), 'AGREEMENTNO', 0, 'N', NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, NULL, 'M');
	             INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'PRESENTMENT_REQ_DETAILS_View' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'PRESENTMENT_REQUEST_EMNDT_BD')), 'CUSTOMERID', 0, 'N', NULL, NULL, NULL, NULL, 2, NULL, NULL, NULL, NULL, 'M');	
	             INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'PRESENTMENT_REQ_DETAILS_View' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'PRESENTMENT_REQUEST_EMNDT_BD')), 'CHEQUEAMOUNT', 0, 'N', NULL, NULL, NULL, NULL, 3, NULL, NULL, NULL, NULL, 'M');
	             INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'PRESENTMENT_REQ_DETAILS_View' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'PRESENTMENT_REQUEST_EMNDT_BD')), 'CYCLEDATE', 0, 'N', NULL, NULL, NULL, NULL, 4, NULL, NULL, NULL, 'DATE:yyyyMMdd', 'O');
	             
	             UPDATE SEQ_DATA_ENGINE_CONFIG SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_CONFIG);
	             UPDATE SEQ_DATA_ENGINE_TABLE  SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_TABLE);
	             UPDATE SEQ_DATA_ENGINE_COLUMN SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_COLUMN);
			]]>
		</sql>
	</changeSet>

	<changeSet id="824" author="naga.g">
		<sql>
			<![CDATA[

               DELETE FROM DATA_ENGINE_LOG WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='PRESENTMENT_RESPONSE_EMNDT_BD');
               DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='PRESENTMENT_RESPONSE_EMNDT_BD');
               DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='PRESENTMENT_RESPONSE_EMNDT_BD';
               
               DELETE FROM DATA_ENGINE_COLUMN where TABLEID IN (select ID from DATA_ENGINE_TABLE WHERE CONFIGID = (select ID from DATA_ENGINE_CONFIG where Name = 'PRESENTMENT_RESPONSE_EMNDT_BD'));
               DELETE FROM DATA_ENGINE_TABLE where CONFIGID IN (select ID from DATA_ENGINE_CONFIG where Name = 'PRESENTMENT_RESPONSE_EMNDT_BD');
               DELETE FROM DATA_ENGINE_CONFIG where Name = 'PRESENTMENT_RESPONSE_EMNDT_BD';
               
               INSERT INTO DATA_ENGINE_CONFIG VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'PRESENTMENT_RESPONSE_EMNDT_BD', 'Presentment Emandate Bill Desk Response file.', 1, 'Presentment', NULL, NULL, NULL , 0, 1, NULL, 'Corporate User No, Corporate Name, UMRN, Customer to be debited, Customer IFSC, Customer Debit AC, Transaction ID/REF, Amount (Rs), Date of Txn, File No, Status Description, Reason Description', '', 'C', '/opt/MMFL/PFF/presentment/response', 'Presentment_', '.csv', 0, current_timestamp, NULL, NULL, 0, NULL, 1, 1); 
               INSERT INTO DATA_ENGINE_TABLE  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'PRESENTMENT_RESPONSE_EMNDT_BD'), 'PRESENTMENT_FILEIMPORT',  0, 'BatchId', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 12, 0, 0);
               
               INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'PRESENTMENT_FILEIMPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'PRESENTMENT_RESPONSE_EMNDT_BD')), 'BATCHID', 0, 'N', NULL, NULL, NULL, NULL, 0, NULL, NULL, NULL, NULL, 'M');	
               INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'PRESENTMENT_FILEIMPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'PRESENTMENT_RESPONSE_EMNDT_BD')), 'AGREEMENTNO', 0, 'N', NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, NULL, 'M');	
               INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'PRESENTMENT_FILEIMPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'PRESENTMENT_RESPONSE_EMNDT_BD')), 'CUSTOMERID', 0, 'N', NULL, NULL, NULL, NULL, 2, NULL, NULL, NULL, NULL, 'M');
               INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'PRESENTMENT_FILEIMPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'PRESENTMENT_RESPONSE_EMNDT_BD')), 'CHEQUEAMOUNT', 0, 'N', NULL, NULL, NULL, NULL, 3, NULL, NULL, NULL, NULL, 'M');
               INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'PRESENTMENT_FILEIMPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'PRESENTMENT_RESPONSE_EMNDT_BD')), 'CYCLEDATE', 0, 'N', NULL, NULL, NULL, NULL, 4, NULL, NULL, NULL, 'yyyyMMdd', 'M');
               INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'PRESENTMENT_FILEIMPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'PRESENTMENT_RESPONSE_EMNDT_BD')), 'STATUS', 0, 'N', NULL, NULL, NULL, NULL, 5, NULL, 'if((STATUS == ''PAID'')){Result = ''S'';  return;} else if((STATUS == ''FAILED'')) {Result = ''F'';  return;} ', NULL, NULL, 'M');
               INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'PRESENTMENT_FILEIMPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'PRESENTMENT_RESPONSE_EMNDT_BD')), 'REASONCODE', 0, 'N', NULL, NULL, NULL, NULL, 6, NULL, NULL, NULL, NULL, 'O');
               INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'PRESENTMENT_FILEIMPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'PRESENTMENT_RESPONSE_EMNDT_BD')), 'BillDeskTransactionId', 1, 'N', NULL, '', NULL, NULL, 7, NULL, NULL, NULL, NULL, 'O');
               

               UPDATE SEQ_DATA_ENGINE_CONFIG SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_CONFIG);
               UPDATE SEQ_DATA_ENGINE_TABLE  SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_TABLE);
               UPDATE SEQ_DATA_ENGINE_COLUMN SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_COLUMN);
             
			]]>
		</sql>
	</changeSet>
	<changeSet id="825_pre" author="keerthi.P" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'mandates_view');
			]]>
		</sql>
	</changeSet>


	<changeSet id="825.1" author="keerthi.P">
		<createView replaceIfExists="true" viewName="Mandates_View">
			<![CDATA[
	            SELECT T1.MANDATEID,
			    T1.CUSTID,
			    T1.MANDATEREF,
			    T1.MANDATETYPE,
			    T1.BANKBRANCHID,
			    T1.ACCNUMBER,
			    T1.ACCHOLDERNAME,
			    T1.JOINTACCHOLDERNAME,
			    T1.ACCTYPE,
			    T1.OPENMANDATE,
			    T1.STARTDATE,
			    T1.EXPIRYDATE,
			    T1.MAXLIMIT,
			    T1.PERIODICITY,
			    T1.PHONECOUNTRYCODE,
			    T1.PHONEAREACODE,
			    T1.PHONENUMBER,
			    T1.STATUS,
			    T1.APPROVALID,
			    T1.VERSION,
			    T1.LASTMNTBY,
			    T1.LASTMNTON,
			    T1.RECORDSTATUS,
			    T1.ROLECODE,
			    T1.NEXTROLECODE,
			    T1.TASKID,
			    T1.NEXTTASKID,
			    T1.RECORDTYPE,
			    T1.WORKFLOWID,
			    T1.REASON,
			    T1.MANDATECCY,
			    T2.CUSTCIF,
			    T2.CUSTSHRTNAME,
			    T3.BANKCODE,
			    T3.BRANCHCODE,
			    T3.BRANCHDESC,
			    T3.MICR,
			    T3.IFSC,
			    T3.CITY,
			    T4.BANKNAME,
			    T1.INPUTDATE,
			    T1.ACTIVE,
				T1.DEFAULTMANDATE,
			    0 USEEXISTING,
			    T1.ORGREFERENCE,
			    T5.PCCITYNAME,
			    T1.DOCUMENTNAME,
			    T1.DOCUMENTREF,
			    T1.EXTERNALREF,
			    T1.ENTITYCODE,
			    T6.ENTITYDESC,
			    T1.PRIMARYMANDATEID,
			    T1.SWAPISACTIVE,
			    T1.BARCODENUMBER,
				T7.PARTNERBANKCODE,
				T7.PARTNERBANKNAME,
				T1.PARTNERBANKID,
				T1.EMANDATESOURCE,
				T1.EMANDATEREFERENCENO
			FROM MANDATES_TEMP T1
			     JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
			     LEFT JOIN BANKBRANCHES T3 ON T1.BANKBRANCHID = T3.BANKBRANCHID
			     LEFT JOIN BMTBANKDETAIL T4 ON T3.BANKCODE = T4.BANKCODE
			     LEFT JOIN RMTPROVINCEVSCITY T5 ON T3.CITY = T5.PCCITY
			     LEFT JOIN ENTITY T6 ON T1.ENTITYCODE = T6.ENTITYCODE
				 LEFT JOIN PARTNERBANKS T7 ON T1.PARTNERBANKID = T7.PARTNERBANKID
			UNION ALL
			SELECT T1.MANDATEID,
			    T1.CUSTID,
			    T1.MANDATEREF,
			    T1.MANDATETYPE,
			    T1.BANKBRANCHID,
			    T1.ACCNUMBER,
			    T1.ACCHOLDERNAME,
			    T1.JOINTACCHOLDERNAME,
			    T1.ACCTYPE,
			    T1.OPENMANDATE,
			    T1.STARTDATE,
			    T1.EXPIRYDATE,
			    T1.MAXLIMIT,
			    T1.PERIODICITY,
			    T1.PHONECOUNTRYCODE,
			    T1.PHONEAREACODE,
			    T1.PHONENUMBER,
			    T1.STATUS,
			    T1.APPROVALID,
			    T1.VERSION,
			    T1.LASTMNTBY,
			    T1.LASTMNTON,
			    T1.RECORDSTATUS,
			    T1.ROLECODE,
			    T1.NEXTROLECODE,
			    T1.TASKID,
			    T1.NEXTTASKID,
			    T1.RECORDTYPE,
			    T1.WORKFLOWID,
			    T1.REASON,
			    T1.MANDATECCY,
			    T2.CUSTCIF,
			    T2.CUSTSHRTNAME,
			    T3.BANKCODE,
			    T3.BRANCHCODE,
			    T3.BRANCHDESC,
			    T3.MICR,
			    T3.IFSC,
			    T3.CITY,
			    T4.BANKNAME,
			    T1.INPUTDATE,
			    T1.ACTIVE,
				T1.DEFAULTMANDATE,
			    1 USEEXISTING,
			    T1.ORGREFERENCE,
			    T5.PCCITYNAME,
			    T1.DOCUMENTNAME,
			    T1.DOCUMENTREF,
			    T1.EXTERNALREF,
			    T1.ENTITYCODE,
			    T6.ENTITYDESC,
			    T1.PRIMARYMANDATEID,
			    T1.SWAPISACTIVE,
			    T1.BARCODENUMBER,
				T7.PARTNERBANKCODE,
				T7.PARTNERBANKNAME,
				T1.PARTNERBANKID,
				T1.EMANDATESOURCE,
				T1.EMANDATEREFERENCENO
				FROM MANDATES T1
			    JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
			    LEFT JOIN BANKBRANCHES T3 ON T1.BANKBRANCHID = T3.BANKBRANCHID
			    LEFT JOIN BMTBANKDETAIL T4 ON T3.BANKCODE = T4.BANKCODE
			    LEFT JOIN RMTPROVINCEVSCITY T5 ON T3.CITY = T5.PCCITY
			    LEFT JOIN ENTITY T6 ON T1.ENTITYCODE = T6.ENTITYCODE
				LEFT JOIN PARTNERBANKS T7 ON T1.PARTNERBANKID = T7.PARTNERBANKID
				WHERE NOT (EXISTS ( SELECT 1 FROM MANDATES_TEMP
			    WHERE MANDATES_TEMP.MANDATEID = T1.MANDATEID))
		    ]]>
		</createView>
	</changeSet>

	<changeSet id="825_post" author="keerthi.P" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'mandates_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="826_pre" author="keerthi.P" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'mandates_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="826.1" author="keerthi.P">
		<createView replaceIfExists="true" viewName="MANDATES_TVIEW">
			<![CDATA[
	           	SELECT T1.MANDATEID,
			    T1.CUSTID,
			    T1.MANDATEREF,
			    T1.MANDATETYPE,
			    T1.BANKBRANCHID,
			    T1.ACCNUMBER,
			    T1.ACCHOLDERNAME,
			    T1.JOINTACCHOLDERNAME,
			    T1.ACCTYPE,
			    T1.OPENMANDATE,
			    T1.STARTDATE,
			    T1.EXPIRYDATE,
			    T1.MAXLIMIT,
			    T1.PERIODICITY,
			    T1.PHONECOUNTRYCODE,
			    T1.PHONEAREACODE,
			    T1.PHONENUMBER,
			    T1.STATUS,
			    T1.APPROVALID,
			    T1.VERSION,
			    T1.LASTMNTBY,
			    T1.LASTMNTON,
			    T1.RECORDSTATUS,
			    T1.ROLECODE,
			    T1.NEXTROLECODE,
			    T1.TASKID,
			    T1.NEXTTASKID,
			    T1.RECORDTYPE,
			    T1.WORKFLOWID,
			    T1.REASON,
			    T1.MANDATECCY,
			    T2.CUSTCIF,
			    T2.CUSTSHRTNAME,
			    T3.BANKCODE,
			    T3.BRANCHCODE,
			    T3.BRANCHDESC,
			    T3.MICR,
			    T3.IFSC,
			    T3.CITY,
			    T4.BANKNAME,
			    T1.INPUTDATE,
			    T1.ACTIVE,
				T1.DEFAULTMANDATE,
			    0 USEEXISTING,
			    T1.ORGREFERENCE,
			    T5.PCCITYNAME,
			    T1.DOCUMENTNAME,
			    T1.DOCUMENTREF,
			    T1.EXTERNALREF,
			    T1.ENTITYCODE,
			    T6.ENTITYDESC,
			    T1.PRIMARYMANDATEID,
			    T1.SWAPISACTIVE,
			    T1.BARCODENUMBER,
				T7.PARTNERBANKCODE,
				T7.PARTNERBANKNAME,
				T1.PARTNERBANKID,
				T1.EMANDATESOURCE,
				T1.EMANDATEREFERENCENO
				FROM MANDATES_TEMP T1
				JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
				LEFT JOIN BANKBRANCHES T3 ON T1.BANKBRANCHID = T3.BANKBRANCHID
			    LEFT JOIN BMTBANKDETAIL T4 ON T3.BANKCODE = T4.BANKCODE
				LEFT JOIN RMTPROVINCEVSCITY T5 ON T3.CITY = T5.PCCITY
				LEFT JOIN ENTITY T6 ON T1.ENTITYCODE = T6.ENTITYCODE
				LEFT JOIN PARTNERBANKS T7 ON T1.PARTNERBANKID = T7.PARTNERBANKID
			]]>
		</createView>
	</changeSet>

	<changeSet id="826_post" author="keerthi.P" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'mandates_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="827_pre" author="keerthi.P" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'mandates_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="827.1" author="keerthi.P">
		<createView replaceIfExists="true" viewName="MANDATES_AVIEW">
			<![CDATA[
		        SELECT T1.MANDATEID,
		        T1.CUSTID,
		        T1.MANDATEREF,
		        T1.MANDATETYPE,
		        T1.BANKBRANCHID,
		        T1.ACCNUMBER,
		        T1.ACCHOLDERNAME,
		        T1.JOINTACCHOLDERNAME,
		        T1.ACCTYPE,
		        T1.OPENMANDATE,
		        T1.STARTDATE,
		        T1.EXPIRYDATE,
		        T1.MAXLIMIT,
		        T1.PERIODICITY,
		        T1.PHONECOUNTRYCODE,
		        T1.PHONEAREACODE,
		        T1.PHONENUMBER,
		        T1.STATUS,
		        T1.APPROVALID,
		        T1.VERSION,
		        T1.LASTMNTBY,
		        T1.LASTMNTON,
		        T1.RECORDSTATUS,
		        T1.ROLECODE,
		        T1.NEXTROLECODE,
		        T1.TASKID,
		        T1.NEXTTASKID,
		        T1.RECORDTYPE,
		        T1.WORKFLOWID,
		        T1.REASON,
		        T1.MANDATECCY,
		        T2.CUSTCIF,
		        T2.CUSTSHRTNAME,
		        T3.BANKCODE,
		        T3.BRANCHCODE,
		        T3.BRANCHDESC,
		        T3.MICR,
		        T3.IFSC,
		        T3.CITY,
		        T4.BANKNAME,
		        T1.INPUTDATE,
		        T1.INPUTDATE AS FROMDATE,
		        T1.INPUTDATE AS TODATE,
		        T1.ACTIVE,
				T1.DEFAULTMANDATE,
		        1 USEEXISTING,
		        T1.ORGREFERENCE,
		        T5.PCCITYNAME,
		        T1.DOCUMENTNAME,
		        T1.DOCUMENTREF,
		        T1.EXTERNALREF,
		        T1.ENTITYCODE,
		        T6.ENTITYDESC,
		        T1.PRIMARYMANDATEID,
		        T1.SWAPISACTIVE,
		        T1.BARCODENUMBER,
		        T7.PARTNERBANKCODE,
		        T7.PARTNERBANKNAME,
		        T1.PARTNERBANKID,
				T1.EMANDATESOURCE,
				T1.EMANDATEREFERENCENO
		        FROM MANDATES T1
		        JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
		        LEFT JOIN BANKBRANCHES T3 ON T1.BANKBRANCHID = T3.BANKBRANCHID
		        LEFT JOIN BMTBANKDETAIL T4 ON T3.BANKCODE = T4.BANKCODE
		        LEFT JOIN RMTPROVINCEVSCITY T5 ON T3.CITY = T5.PCCITY
		        LEFT JOIN ENTITY T6 ON T1.ENTITYCODE = T6.ENTITYCODE
		        LEFT JOIN PARTNERBANKS T7 ON T1.PARTNERBANKID = T7.PARTNERBANKID
	        ]]>
		</createView>
	</changeSet>

	<changeSet id="827_post" author="keerthi.P" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'mandates_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="828" author="yelladas.n">
		<addColumn tableName="Promotions">
			<column name="cbFrmMnf" type="number(19,0)" />
			<column name="mnfCbToCust" type="number(19,0)" />
			<column name="dlrCbToCust" type="number(19,0)" />
			<column name="cbPyt" type="varchar(60)" />
			<column name="dbd" type="boolean" />
			<column name="mbd" type="boolean" />
			<column name="dbdPerc " type="decimal(18,0)" />
			<column name="dbdPercCal" type="varchar(60)" />
			<column name="dbdRtnd" type="boolean" />
			<column name="mbdRtnd" type="boolean" />
			<column name="knckOffDueAmt" type="boolean" />
			<column name="dbdFeeTypId" type="number(19,0)" />
			<column name="mbdFeeTypId" type="number(19,0)" />
			<column name="dbdAndMbdFeeTypId" type="number(19,0)" />
		</addColumn>
	</changeSet>

	<changeSet id="829" author="yelladas.n">
		<addColumn tableName="Promotions_Temp">
			<column name="cbFrmMnf" type="number(19,0)" />
			<column name="mnfCbToCust" type="number(19,0)" />
			<column name="dlrCbToCust" type="number(19,0)" />
			<column name="cbPyt" type="varchar(60)" />
			<column name="dbd" type="boolean" />
			<column name="mbd" type="boolean" />
			<column name="dbdPerc " type="decimal(18,0)" />
			<column name="dbdPercCal" type="varchar(60)" />
			<column name="dbdRtnd" type="boolean" />
			<column name="mbdRtnd" type="boolean" />
			<column name="knckOffDueAmt" type="boolean" />
			<column name="dbdFeeTypId" type="number(19,0)" />
			<column name="mbdFeeTypId" type="number(19,0)" />
			<column name="dbdAndMbdFeeTypId" type="number(19,0)" />
		</addColumn>
	</changeSet>

	<changeSet id="830" author="yelladas.n">
		<sql>
			<![CDATA[
				UPDATE Promotions Set cbFrmMnf = 0  where cbFrmMnf is null;
				UPDATE Promotions Set mnfCbToCust = 0 where mnfCbToCust is null;
				UPDATE Promotions Set dlrCbToCust = 0 where dlrCbToCust is null;
				UPDATE Promotions Set dbd = 0 where dbd is null;
				UPDATE Promotions Set mbd = 0 where mbd is null;
				UPDATE Promotions Set dbdPerc = 0 where dbdPerc is null;
				UPDATE Promotions Set dbdRtnd = 0 where dbdRtnd is null;
				UPDATE Promotions Set mbdRtnd = 0 where mbdRtnd is null;
				UPDATE Promotions Set knckOffDueAmt = 0 where knckOffDueAmt is null;
				UPDATE Promotions Set dbdFeeTypId = 0 where dbdFeeTypId is null;
				UPDATE Promotions Set mbdFeeTypId = 0 where mbdFeeTypId is null;
				UPDATE Promotions Set dbdAndMbdFeeTypId = 0 where dbdAndMbdFeeTypId is null;
				UPDATE Promotions_Temp Set cbFrmMnf = 0  where cbFrmMnf is null;
				UPDATE Promotions_Temp Set mnfCbToCust = 0 where mnfCbToCust is null;
				UPDATE Promotions_Temp Set dlrCbToCust = 0 where dlrCbToCust is null;
				UPDATE Promotions_Temp Set dbd = 0 where dbd is null;
				UPDATE Promotions_Temp Set mbd = 0 where mbd is null;
				UPDATE Promotions_Temp Set dbdPerc = 0 where dbdPerc is null;
				UPDATE Promotions_Temp Set dbdRtnd = 0 where dbdRtnd is null;
				UPDATE Promotions_Temp Set mbdRtnd = 0 where mbdRtnd is null;
				UPDATE Promotions_Temp Set knckOffDueAmt = 0 where knckOffDueAmt is null;
				UPDATE Promotions_Temp Set dbdFeeTypId = 0 where dbdFeeTypId is null;
				UPDATE Promotions_Temp Set mbdFeeTypId = 0 where mbdFeeTypId is null;
				UPDATE Promotions_Temp Set dbdAndMbdFeeTypId = 0 where dbdAndMbdFeeTypId is null;
			]]>
		</sql>
	</changeSet>

	<changeSet id="831" author="yelladas.n" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE Promotions ADD CONSTRAINT DF_Promotions_CFRMF DEFAULT 0 FOR cbFrmMnf;
				ALTER TABLE Promotions ADD CONSTRAINT DF_Promotions_MFBTC DEFAULT 0 FOR mnfCbToCust;
				ALTER TABLE Promotions ADD CONSTRAINT DF_Promotions_DCTCT DEFAULT 0 FOR dlrCbToCust;
				ALTER TABLE Promotions ADD CONSTRAINT DF_Promotions_DBD DEFAULT 0 FOR dbd;
				ALTER TABLE Promotions ADD CONSTRAINT DF_Promotions_MBD DEFAULT 0 FOR mbd;
				ALTER TABLE Promotions ADD CONSTRAINT DF_Promotions_DBRTD DEFAULT 0 FOR dbdRtnd;
				ALTER TABLE Promotions ADD CONSTRAINT DF_Promotions_MBRTD DEFAULT 0 FOR mbdRtnd;
				ALTER TABLE Promotions ADD CONSTRAINT DF_Promotions_PRSQ DEFAULT 0 FOR knckOffDueAmt;
				ALTER TABLE Promotions ADD CONSTRAINT DF_Promotions_DBFTID DEFAULT 0 FOR dbdFeeTypId;
				ALTER TABLE Promotions ADD CONSTRAINT DF_Promotions_MBFTID DEFAULT 0 FOR mbdFeeTypId;
				ALTER TABLE Promotions ADD CONSTRAINT DF_Promotions_DBMFTID DEFAULT 0 FOR dbdAndMbdFeeTypId;
				ALTER TABLE Promotions_Temp ADD CONSTRAINT DF_Promotions_Temp_CFRMF DEFAULT 0 FOR cbFrmMnf;
				ALTER TABLE Promotions_Temp ADD CONSTRAINT DF_Promotions_Temp_MFBTC DEFAULT 0 FOR mnfCbToCust;
				ALTER TABLE Promotions_Temp ADD CONSTRAINT DF_Promotions_Temp_DCTCT DEFAULT 0 FOR dlrCbToCust;
				ALTER TABLE Promotions_Temp ADD CONSTRAINT DF_Promotions_Temp_DBD DEFAULT 0 FOR dbd;
				ALTER TABLE Promotions_Temp ADD CONSTRAINT DF_Promotions_Temp_MBD DEFAULT 0 FOR mbd;
				ALTER TABLE Promotions_Temp ADD CONSTRAINT DF_Promotions_Temp_DBRTD DEFAULT 0 FOR dbdRtnd;
				ALTER TABLE Promotions_Temp ADD CONSTRAINT DF_Promotions_Temp_MBRTD DEFAULT 0 FOR mbdRtnd;
				ALTER TABLE Promotions_Temp ADD CONSTRAINT DF_Promotions_Temp_PRSQ DEFAULT 0 FOR knckOffDueAmt;
				ALTER TABLE Promotions_Temp ADD CONSTRAINT DF_Promotions_Temp_DBFTID DEFAULT 0 FOR dbdFeeTypId;
				ALTER TABLE Promotions_Temp ADD CONSTRAINT DF_Promotions_Temp_MBFTID DEFAULT 0 FOR mbdFeeTypId;
				ALTER TABLE Promotions_Temp ADD CONSTRAINT DF_Promotions_Temp_DBMFTID DEFAULT 0 FOR dbdAndMbdFeeTypId;
			]]>
		</sql>
	</changeSet>

	<changeSet id="832" author="yelladas.n" dbms="postgresql, oracle">
		<addDefaultValue columnName="cbFrmMnf" tableName="Promotions" defaultValue="0" />
		<addDefaultValue columnName="mnfCbToCust" tableName="Promotions" defaultValue="0" />
		<addDefaultValue columnName="dlrCbToCust" tableName="Promotions" defaultValue="0" />
		<addDefaultValue columnName="dbd" tableName="Promotions" defaultValue="0" />
		<addDefaultValue columnName="mbd" tableName="Promotions" defaultValue="0" />
		<addDefaultValue columnName="dbdRtnd" tableName="Promotions" defaultValue="0" />
		<addDefaultValue columnName="mbdRtnd" tableName="Promotions" defaultValue="0" />
		<addDefaultValue columnName="knckOffDueAmt" tableName="Promotions" defaultValue="0" />
		<addDefaultValue columnName="dbdFeeTypId" tableName="Promotions" defaultValue="0" />
		<addDefaultValue columnName="mbdFeeTypId" tableName="Promotions" defaultValue="0" />
		<addDefaultValue columnName="dbdAndMbdFeeTypId" tableName="Promotions" defaultValue="0" />
		<addDefaultValue columnName="cbFrmMnf" tableName="Promotions_Temp" defaultValue="0" />
		<addDefaultValue columnName="mnfCbToCust" tableName="Promotions_Temp" defaultValue="0" />
		<addDefaultValue columnName="dlrCbToCust" tableName="Promotions_Temp" defaultValue="0" />
		<addDefaultValue columnName="dbd" tableName="Promotions_Temp" defaultValue="0" />
		<addDefaultValue columnName="mbd" tableName="Promotions_Temp" defaultValue="0" />
		<addDefaultValue columnName="dbdRtnd" tableName="Promotions_Temp" defaultValue="0" />
		<addDefaultValue columnName="mbdRtnd" tableName="Promotions_Temp" defaultValue="0" />
		<addDefaultValue columnName="knckOffDueAmt" tableName="Promotions_Temp" defaultValue="0" />
		<addDefaultValue columnName="dbdFeeTypId" tableName="Promotions_Temp" defaultValue="0" />
		<addDefaultValue columnName="mbdFeeTypId" tableName="Promotions_Temp" defaultValue="0" />
		<addDefaultValue columnName="dbdAndMbdFeeTypId" tableName="Promotions_Temp" defaultValue="0" />
	</changeSet>

	<changeSet id="833_pre" author="yelladas.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'promotions_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="833" author="yelladas.n">
		<createView viewName="PROMOTIONS_AVIEW" replaceIfExists="true">
			<![CDATA[
              	SELECT T1.PROMOTIONID,
					    T1.PROMOTIONCODE,
					    T1.PROMOTIONDESC,
					    T1.FINTYPE,
					    T1.STARTDATE,
					    T1.ENDDATE,
					    T1.FINISDWPAYREQUIRED,
					    T1.DOWNPAYRULE,
					    T1.ACTUALINTERESTRATE,
					    T1.FINBASERATE,
					    T1.FINSPLRATE,
					    T1.FINMARGIN,
					    T1.APPLYRPYPRICING,
					    T1.RPYPRICINGMETHOD,
					    T1.FINMINTERM,
					    T1.FINMAXTERM,
					    T1.FINMINAMOUNT,
					    T1.FINMAXAMOUNT,
					    T1.FINMINRATE,
					    T1.FINMAXRATE,
					    T1.ACTIVE,
					    T1.VERSION,
					    T1.LASTMNTBY,
					    T1.LASTMNTON,
					    T1.RECORDSTATUS,
					    T1.ROLECODE,
					    T1.NEXTROLECODE,
					    T1.TASKID,
					    T1.NEXTTASKID,
					    T1.RECORDTYPE,
					    T1.WORKFLOWID,
					    T2.FINCCY,
					    T2.FINCATEGORY,
					    T2.FINTYPEDESC,
					    T3.RULECODE AS DOWNPAYRULECODE,
					    T3.RULECODEDESC AS DOWNPAYRULEDESC,
					    T4.RULECODE AS RPYPRICINGCODE,
					    T4.RULECODEDESC AS RPYPRICINGDESC,
					    T1.REFERENCEID,   
						T1.OPENBALONPV, 
						T1.TENOR, 
						T1.ADVEMITERMS, 
						T1.PFTDAYSBASIS, 
						T1.SUBVENTIONRATE,
					    T1.TAXAPPLICABLE, 
						T1.CASHBACKFROMDEALER, 
						T1.CASHBACKTOCUSTOMER, 
						T2.PRODUCTCATEGORY, 
						T1.SPECIALSCHEME,
						T1.REMARKS,
				        T1.MNFCBTOCUST,
						T1.DLRCBTOCUST,
						T1.CBPYT,
						T1.DBD,
						T1.MBD,
						T1.DBDPERC,
						T1.DBDPERCCAL,
						T1.DBDRTND,
						T1.MBDRTND,
						T1.KNCKOFFDUEAMT,
						T1.DBDFEETYPID,
						T1.MBDFEETYPID,
						T1.DBDANDMBDFEETYPID
					   FROM PROMOTIONS T1
					     JOIN RMTFINANCETYPES T2 ON T1.FINTYPE = T2.FINTYPE
					     LEFT JOIN RULES T3 ON T1.DOWNPAYRULE = T3.RULEID
					     LEFT JOIN RULES T4 ON T1.RPYPRICINGMETHOD = T4.RULEID
        				]]>
			</createView>
	</changeSet>

	<changeSet id="833_post" author="yelladas.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'promotions_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="834_pre" author="yelladas.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'promotions_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="834" author="yelladas.n">
		<createView viewName="PROMOTIONS_TVIEW" replaceIfExists="true">
				<![CDATA[
		            SELECT T1.PROMOTIONID,
						    T1.PROMOTIONCODE,
						    T1.PROMOTIONDESC,
						    T1.FINTYPE,
						    T1.STARTDATE,
						    T1.ENDDATE,
						    T1.FINISDWPAYREQUIRED,
						    T1.DOWNPAYRULE,
						    T1.ACTUALINTERESTRATE,
						    T1.FINBASERATE,
						    T1.FINSPLRATE,
						    T1.FINMARGIN,
						    T1.APPLYRPYPRICING,
						    T1.RPYPRICINGMETHOD,
						    T1.FINMINTERM,
						    T1.FINMAXTERM,
						    T1.FINMINAMOUNT,
						    T1.FINMAXAMOUNT,
						    T1.FINMINRATE,
						    T1.FINMAXRATE,
						    T1.ACTIVE,
						    T1.VERSION,
						    T1.LASTMNTBY,
						    T1.LASTMNTON,
						    T1.RECORDSTATUS,
						    T1.ROLECODE,
						    T1.NEXTROLECODE,
						    T1.TASKID,
						    T1.NEXTTASKID,
						    T1.RECORDTYPE,
						    T1.WORKFLOWID,
						    T2.FINCCY,
						    T2.FINCATEGORY,
						    T2.FINTYPEDESC,
						    T3.RULECODE AS DOWNPAYRULECODE,
						    T3.RULECODEDESC AS DOWNPAYRULEDESC,
						    T4.RULECODE AS RPYPRICINGCODE,
						    T4.RULECODEDESC AS RPYPRICINGDESC,
						    T1.REFERENCEID, 
							T1.OPENBALONPV, 
							T1.TENOR,
							T1.ADVEMITERMS,
							T1.PFTDAYSBASIS, 
							T1.SUBVENTIONRATE,
						    T1.TAXAPPLICABLE,
							T1.CASHBACKFROMDEALER, 
							T1.CASHBACKTOCUSTOMER, 
							T2.PRODUCTCATEGORY,
							T1.SPECIALSCHEME,
							T1.REMARKS,
				            T1.MNFCBTOCUST,
							T1.DLRCBTOCUST,
							T1.CBPYT,
							T1.DBD,
							T1.MBD,
							T1.DBDPERC,
							T1.DBDPERCCAL,
							T1.DBDRTND,
							T1.MBDRTND,
							T1.KNCKOFFDUEAMT,
							T1.DBDFEETYPID,
							T1.MBDFEETYPID,
							T1.DBDANDMBDFEETYPID
						   FROM PROMOTIONS_TEMP T1
						     JOIN RMTFINANCETYPES T2 ON T1.FINTYPE = T2.FINTYPE
						     LEFT JOIN RULES T3 ON T1.DOWNPAYRULE = T3.RULEID
						     LEFT JOIN RULES T4 ON T1.RPYPRICINGMETHOD = T4.RULEID
        				]]>
			</createView>
	</changeSet>

	<changeSet id="834_post" author="yelladas.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'promotions_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="835_pre" author="yelladas.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'promotions_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="835" author="yelladas.n">
		<createView viewName="Promotions_VIEW" replaceIfExists="true">
			<![CDATA[
			    SELECT T1.PROMOTIONID,
					    T1.PROMOTIONCODE,
					    T1.PROMOTIONDESC,
					    T1.FINTYPE,
					    T1.STARTDATE,
					    T1.ENDDATE,
					    T1.FINISDWPAYREQUIRED,
					    T1.DOWNPAYRULE,
					    T1.ACTUALINTERESTRATE,
					    T1.FINBASERATE,
					    T1.FINSPLRATE,
					    T1.FINMARGIN,
					    T1.APPLYRPYPRICING,
					    T1.RPYPRICINGMETHOD,
					    T1.FINMINTERM,
					    T1.FINMAXTERM,
					    T1.FINMINAMOUNT,
					    T1.FINMAXAMOUNT,
					    T1.FINMINRATE,
					    T1.FINMAXRATE,
					    T1.ACTIVE,
					    T1.VERSION,
					    T1.LASTMNTBY,
					    T1.LASTMNTON,
					    T1.RECORDSTATUS,
					    T1.ROLECODE,
					    T1.NEXTROLECODE,
					    T1.TASKID,
					    T1.NEXTTASKID,
					    T1.RECORDTYPE,
					    T1.WORKFLOWID,
					    T2.FINCCY,
					    T2.FINCATEGORY,
					    T2.FINTYPEDESC,
					    T3.RULECODE AS DOWNPAYRULECODE,
					    T3.RULECODEDESC AS DOWNPAYRULEDESC,
					    T4.RULECODE AS RPYPRICINGCODE,
					    T4.RULECODEDESC AS RPYPRICINGDESC,
					    T1.REFERENCEID, 
						T1.OPENBALONPV, 
						T1.TENOR, 
						T1.ADVEMITERMS, 
						T1.PFTDAYSBASIS, 
						T1.SUBVENTIONRATE,
					    T1.TAXAPPLICABLE, 
						T1.CASHBACKFROMDEALER, 
						T1.CASHBACKTOCUSTOMER, 
						T2.PRODUCTCATEGORY,
						T1.SPECIALSCHEME,
						T1.REMARKS,
		                T1.MNFCBTOCUST,
						T1.DLRCBTOCUST,
						T1.CBPYT,
						T1.DBD,
						T1.MBD,
						T1.DBDPERC,
						T1.DBDPERCCAL,
						T1.DBDRTND,
						T1.MBDRTND,
						T1.KNCKOFFDUEAMT,
						T1.DBDFEETYPID,
						T1.MBDFEETYPID,
						T1.DBDANDMBDFEETYPID
					   FROM PROMOTIONS_TEMP T1
					     JOIN RMTFINANCETYPES T2 ON T1.FINTYPE = T2.FINTYPE
					     LEFT JOIN RULES T3 ON T1.DOWNPAYRULE = T3.RULEID
					     LEFT JOIN RULES T4 ON T1.RPYPRICINGMETHOD = T4.RULEID
					UNION ALL
					 SELECT T1.PROMOTIONID,
					    T1.PROMOTIONCODE,
					    T1.PROMOTIONDESC,
					    T1.FINTYPE,
					    T1.STARTDATE,
					    T1.ENDDATE,
					    T1.FINISDWPAYREQUIRED,
					    T1.DOWNPAYRULE,
					    T1.ACTUALINTERESTRATE,
					    T1.FINBASERATE,
					    T1.FINSPLRATE,
					    T1.FINMARGIN,
					    T1.APPLYRPYPRICING,
					    T1.RPYPRICINGMETHOD,
					    T1.FINMINTERM,
					    T1.FINMAXTERM,
					    T1.FINMINAMOUNT,
					    T1.FINMAXAMOUNT,
					    T1.FINMINRATE,
					    T1.FINMAXRATE,
					    T1.ACTIVE,
					    T1.VERSION,
					    T1.LASTMNTBY,
					    T1.LASTMNTON,
					    T1.RECORDSTATUS,
					    T1.ROLECODE,
					    T1.NEXTROLECODE,
					    T1.TASKID,
					    T1.NEXTTASKID,
					    T1.RECORDTYPE,
					    T1.WORKFLOWID,
					    T2.FINCCY,
					    T2.FINCATEGORY,
					    T2.FINTYPEDESC,
					    T3.RULECODE AS DOWNPAYRULECODE,
					    T3.RULECODEDESC AS DOWNPAYRULEDESC,
					    T4.RULECODE AS RPYPRICINGCODE,
					    T4.RULECODEDESC AS RPYPRICINGDESC,
					    T1.REFERENCEID,
						T1.OPENBALONPV, 
						T1.TENOR, 
						T1.ADVEMITERMS, 
						T1.PFTDAYSBASIS, 
						T1.SUBVENTIONRATE,
					    T1.TAXAPPLICABLE, 
						T1.CASHBACKFROMDEALER, 
						T1.CASHBACKTOCUSTOMER, 
						T2.PRODUCTCATEGORY,
						T1.SPECIALSCHEME,
						T1.REMARKS,
		                T1.MNFCBTOCUST,
						T1.DLRCBTOCUST,
						T1.CBPYT,
						T1.DBD,
						T1.MBD,
						T1.DBDPERC,
						T1.DBDPERCCAL,
						T1.DBDRTND,
						T1.MBDRTND,
						T1.KNCKOFFDUEAMT,
						T1.DBDFEETYPID,
						T1.MBDFEETYPID,
						T1.DBDANDMBDFEETYPID
					   FROM PROMOTIONS T1
					   JOIN RMTFINANCETYPES T2 ON T1.FINTYPE = T2.FINTYPE
					   LEFT JOIN RULES T3 ON T1.DOWNPAYRULE = T3.RULEID
					   LEFT JOIN RULES T4 ON T1.RPYPRICINGMETHOD = T4.RULEID
					  WHERE NOT (EXISTS ( SELECT 1 FROM PROMOTIONS_TEMP
					  WHERE PROMOTIONS_TEMP.PROMOTIONCODE = T1.PROMOTIONCODE AND PROMOTIONS_TEMP.PROMOTIONID = T1.PROMOTIONID))
        			]]>
    	 </createView>
	</changeSet>

	<changeSet id="835_post" author="yelladas.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'promotions_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="836" author="yelladas.n">
		<sql>
			<![CDATA[
			     UPDATE SEQSECRIGHTS SET SEQNO = (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS);
				 UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);
			       					
				 INSERT INTO SECRIGHTS values ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'PromotionDialog_CashBackFromTheManufacturer','PromotionDialog',0,1000,CURRENT_TIMESTAMP,null,null,null,null,null,null,0);
			     INSERT INTO SECRIGHTS values ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'PromotionDialog_ManufacturerCashbackToTheCustomer','PromotionDialog',0,1000,CURRENT_TIMESTAMP,null,null,null,null,null,null,0);
			     INSERT INTO SECRIGHTS values ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2, 'PromotionDialog_DealerCashBackToTheCustomer','PromotionDialog',0,1000,CURRENT_TIMESTAMP,null,null,null,null,null,null,0);
			     INSERT INTO SECRIGHTS values ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2, 'PromotionDialog_CashBackPayoutOptions','PromotionDialog',0,1000,CURRENT_TIMESTAMP,null,null,null,null,null,null,0);
				 INSERT INTO SECRIGHTS values ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2, 'PromotionDialog_DBD','PromotionDialog',0,1000,CURRENT_TIMESTAMP,null,null,null,null,null,null,0);
				 INSERT INTO SECRIGHTS values ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2, 'PromotionDialog_MBD','PromotionDialog',0,1000,CURRENT_TIMESTAMP,null,null,null,null,null,null,0);
				 INSERT INTO SECRIGHTS values ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2, 'PromotionDialog_DBDPercentage','PromotionDialog',0,1000,CURRENT_TIMESTAMP,null,null,null,null,null,null,0);
				 INSERT INTO SECRIGHTS values ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2, 'PromotionDialog_DBDPercentageCalculationOn','PromotionDialog',0,1000,CURRENT_TIMESTAMP,null,null,null,null,null,null,0);
				 INSERT INTO SECRIGHTS values ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2, 'PromotionDialog_DBDRetained','PromotionDialog',0,1000,CURRENT_TIMESTAMP,null,null,null,null,null,null,0);
				 INSERT INTO SECRIGHTS values ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2, 'PromotionDialog_MBDRetained','PromotionDialog',0,1000,CURRENT_TIMESTAMP,null,null,null,null,null,null,0);
				 INSERT INTO SECRIGHTS values ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2, 'PromotionDialog_KnockoffOverDueAmountWithCashbackAmount','PromotionDialog',0,1000,CURRENT_TIMESTAMP,null,null,null,null,null,null,0);
				 INSERT INTO SECRIGHTS values ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2, 'PromotionDialog_DBDFeeType','PromotionDialog',0,1000,CURRENT_TIMESTAMP,null,null,null,null,null,null,0);
				 INSERT INTO SECRIGHTS values ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2, 'PromotionDialog_MBDFeeType','PromotionDialog',0,1000,CURRENT_TIMESTAMP,null,null,null,null,null,null,0);
				 INSERT INTO SECRIGHTS values ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2, 'PromotionDialog_DBDAndMBDFeeType','PromotionDialog',0,1000,CURRENT_TIMESTAMP,null,null,null,null,null,null,0);
				
				 INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='PROMOTION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='PromotionDialog_CashBackFromTheManufacturer'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			     INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='PROMOTION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='PromotionDialog_ManufacturerCashbackToTheCustomer'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			     INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='PROMOTION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='PromotionDialog_DealerCashBackToTheCustomer'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			     INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='PROMOTION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='PromotionDialog_CashBackPayoutOptions'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			     INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='PROMOTION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='PromotionDialog_DBD'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			     INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='PROMOTION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='PromotionDialog_MBD'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			     INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='PROMOTION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='PromotionDialog_DBDPercentage'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			     INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='PROMOTION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='PromotionDialog_DBDPercentageCalculationOn'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			     INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='PROMOTION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='PromotionDialog_DBDRetained'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			     INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='PROMOTION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='PromotionDialog_MBDRetained'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			     INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='PROMOTION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='PromotionDialog_KnockoffOverDueAmountWithCashbackAmount'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			     INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='PROMOTION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='PromotionDialog_DBDFeeType'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			     INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='PROMOTION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='PromotionDialog_MBDFeeType'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			     INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='PROMOTION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='PromotionDialog_DBDAndMBDFeeType'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			   
			     UPDATE SEQSECRIGHTS SET SEQNO = (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS);
			     UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);
			   ]]>
		</sql>
	</changeSet>

	<changeSet id="837_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'promotions');
				select deps_save_and_drop_dependencies ('plf', 'promotions_temp');
			]]>
		</sql>
	</changeSet>

	<changeSet id="837" author="vijaya.a">
		<modifyDataType tableName="PROMOTIONS_TEMP" columnName="dbdperc" newDataType="decimal(13,9)" />
		<modifyDataType tableName="PROMOTIONS" columnName="dbdperc" newDataType="decimal(13,9)" />
	</changeSet>

	<changeSet id="837_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'promotions');
				select deps_restore_dependencies ('plf', 'promotions_temp');
			]]>
		</sql>
	</changeSet>

	<changeSet id="837.1" author="vijaya.a">
		<addDefaultValue columnName="dbdperc" tableName="PROMOTIONS_TEMP" defaultValue="0" />
		<addDefaultValue columnName="dbdperc" tableName="PROMOTIONS" defaultValue="0" />
	</changeSet>

	<changeSet id="838" author="vijaya.a">
		<createView viewName="PROMOTIONS_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT t1.promotionid,
				    t1.promotioncode,
				    t1.promotiondesc,
				    t1.fintype,
				    t1.startdate,
				    t1.enddate,
				    t1.finisdwpayrequired,
				    t1.downpayrule,
				    t1.actualinterestrate,
				    t1.finbaserate,
				    t1.finsplrate,
				    t1.finmargin,
				    t1.applyrpypricing,
				    t1.rpypricingmethod,
				    t1.finminterm,
				    t1.finmaxterm,
				    t1.finminamount,
				    t1.finmaxamount,
				    t1.finminrate,
				    t1.finmaxrate,
				    t1.active,
				    t1.version,
				    t1.lastmntby,
				    t1.lastmnton,
				    t1.recordstatus,
				    t1.rolecode,
				    t1.nextrolecode,
				    t1.taskid,
				    t1.nexttaskid,
				    t1.recordtype,
				    t1.workflowid,
				    t2.finccy,
				    t2.fincategory,
				    t2.fintypedesc,
				    t3.rulecode AS downpayrulecode,
				    t3.rulecodedesc AS downpayruledesc,
				    t4.rulecode AS rpypricingcode,
				    t4.rulecodedesc AS rpypricingdesc,
				    t1.ReferenceID,   
					t1.OpenBalOnPV, 
					t1.Tenor, 
					t1.AdvEMITerms, 
					t1.PftDaysBasis, 
					t1.SubventionRate,
				    t1.TaxApplicable, 
					t1.cashBackFromDealer, 
					t1.cashBackToCustomer, 
					t2.ProductCategory, 
					t1.specialScheme,
					t1.remarks,
					t1.cbFrmMnf,
	                t1.mnfCbToCust,
					t1.dlrCbToCust,
					t1.cbPyt,
					t1.dbd,
					t1.mbd,
					t1.dbdPerc,
					t1.dbdPercCal,
					t1.dbdRtnd,
					t1.mbdRtnd,
					t1.knckOffDueAmt,
					t1.dbdFeeTypId,
					t1.mbdFeeTypId,
					t1.dbdAndMbdFeeTypId
			   FROM promotions t1
			     JOIN rmtfinancetypes t2 ON t1.fintype = t2.fintype
			     LEFT JOIN rules t3 ON t1.downpayrule = t3.ruleid
			     LEFT JOIN rules t4 ON t1.rpypricingmethod = t4.ruleid
			]]>
		</createView>
	</changeSet>

	<changeSet id="839" author="vijaya.a">
		<createView viewName="PROMOTIONS_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT t1.promotionid,
				    t1.promotioncode,
				    t1.promotiondesc,
				    t1.fintype,
				    t1.startdate,
				    t1.enddate,
				    t1.finisdwpayrequired,
				    t1.downpayrule,
				    t1.actualinterestrate,
				    t1.finbaserate,
				    t1.finsplrate,
				    t1.finmargin,
				    t1.applyrpypricing,
				    t1.rpypricingmethod,
				    t1.finminterm,
				    t1.finmaxterm,
				    t1.finminamount,
				    t1.finmaxamount,
				    t1.finminrate,
				    t1.finmaxrate,
				    t1.active,
				    t1.version,
				    t1.lastmntby,
				    t1.lastmnton,
				    t1.recordstatus,
				    t1.rolecode,
				    t1.nextrolecode,
				    t1.taskid,
				    t1.nexttaskid,
				    t1.recordtype,
				    t1.workflowid,
				    t2.finccy,
				    t2.fincategory,
				    t2.fintypedesc,
				    t3.rulecode AS downpayrulecode,
				    t3.rulecodedesc AS downpayruledesc,
				    t4.rulecode AS rpypricingcode,
				    t4.rulecodedesc AS rpypricingdesc,
				    t1.ReferenceID, 
					t1.OpenBalOnPV, 
					t1.Tenor,
					t1.AdvEMITerms,
					t1.PftDaysBasis, 
					t1.SubventionRate,
				    t1.TaxApplicable,
					t1.cashBackFromDealer, 
					t1.cashBackToCustomer, 
					t2.ProductCategory,
					t1.specialScheme,
					t1.remarks,
					t1.cbFrmMnf,
	                t1.mnfCbToCust,
					t1.dlrCbToCust,
					t1.cbPyt,
					t1.dbd,
					t1.mbd,
					t1.dbdPerc,
					t1.dbdPercCal,
					t1.dbdRtnd,
					t1.mbdRtnd,
					t1.knckOffDueAmt,
					t1.dbdFeeTypId,
					t1.mbdFeeTypId,
					t1.dbdAndMbdFeeTypId
			   FROM promotions_temp t1
			     JOIN rmtfinancetypes t2 ON t1.fintype = t2.fintype
			     LEFT JOIN rules t3 ON t1.downpayrule = t3.ruleid
			     LEFT JOIN rules t4 ON t1.rpypricingmethod = t4.ruleid
			]]>
		</createView>
	</changeSet>

	<changeSet id="840" author="vijaya.a">
		<createView viewName="Promotions_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT t1.promotionid,
				    t1.promotioncode,
				    t1.promotiondesc,
				    t1.fintype,
				    t1.startdate,
				    t1.enddate,
				    t1.finisdwpayrequired,
				    t1.downpayrule,
				    t1.actualinterestrate,
				    t1.finbaserate,
				    t1.finsplrate,
				    t1.finmargin,
				    t1.applyrpypricing,
				    t1.rpypricingmethod,
				    t1.finminterm,
				    t1.finmaxterm,
				    t1.finminamount,
				    t1.finmaxamount,
				    t1.finminrate,
				    t1.finmaxrate,
				    t1.active,
				    t1.version,
				    t1.lastmntby,
				    t1.lastmnton,
				    t1.recordstatus,
				    t1.rolecode,
				    t1.nextrolecode,
				    t1.taskid,
				    t1.nexttaskid,
				    t1.recordtype,
				    t1.workflowid,
				    t2.finccy,
				    t2.fincategory,
				    t2.fintypedesc,
				    t3.rulecode AS downpayrulecode,
				    t3.rulecodedesc AS downpayruledesc,
				    t4.rulecode AS rpypricingcode,
				    t4.rulecodedesc AS rpypricingdesc,
				    t1.ReferenceID, 
					t1.OpenBalOnPV, 
					t1.Tenor, 
					t1.AdvEMITerms, 
					t1.PftDaysBasis, 
					t1.SubventionRate,
				    t1.TaxApplicable, 
					t1.cashBackFromDealer, 
					t1.cashBackToCustomer, 
					t2.ProductCategory,
					t1.specialScheme,
					t1.remarks,
					t1.cbFrmMnf,
	                t1.mnfCbToCust,
					t1.dlrCbToCust,
					t1.cbPyt,
					t1.dbd,
					t1.mbd,
					t1.dbdPerc,
					t1.dbdPercCal,
					t1.dbdRtnd,
					t1.mbdRtnd,
					t1.knckOffDueAmt,
					t1.dbdFeeTypId,
					t1.mbdFeeTypId,
					t1.dbdAndMbdFeeTypId
			   	FROM promotions_temp t1
			    JOIN rmtfinancetypes t2 ON t1.fintype = t2.fintype
			    LEFT JOIN rules t3 ON t1.downpayrule = t3.ruleid
			    LEFT JOIN rules t4 ON t1.rpypricingmethod = t4.ruleid
			UNION ALL
			 	SELECT t1.promotionid,
				    t1.promotioncode,
				    t1.promotiondesc,
				    t1.fintype,
				    t1.startdate,
				    t1.enddate,
				    t1.finisdwpayrequired,
				    t1.downpayrule,
				    t1.actualinterestrate,
				    t1.finbaserate,
				    t1.finsplrate,
				    t1.finmargin,
				    t1.applyrpypricing,
				    t1.rpypricingmethod,
				    t1.finminterm,
				    t1.finmaxterm,
				    t1.finminamount,
				    t1.finmaxamount,
				    t1.finminrate,
				    t1.finmaxrate,
				    t1.active,
				    t1.version,
				    t1.lastmntby,
				    t1.lastmnton,
				    t1.recordstatus,
				    t1.rolecode,
				    t1.nextrolecode,
				    t1.taskid,
				    t1.nexttaskid,
				    t1.recordtype,
				    t1.workflowid,
				    t2.finccy,
				    t2.fincategory,
				    t2.fintypedesc,
				    t3.rulecode AS downpayrulecode,
				    t3.rulecodedesc AS downpayruledesc,
				    t4.rulecode AS rpypricingcode,
				    t4.rulecodedesc AS rpypricingdesc,
				    t1.ReferenceID,
					t1.OpenBalOnPV, 
					t1.Tenor, 
					t1.AdvEMITerms, 
					t1.PftDaysBasis, 
					t1.SubventionRate,
				    t1.TaxApplicable, 
					t1.cashBackFromDealer, 
					t1.cashBackToCustomer, 
					t2.ProductCategory,
					t1.specialScheme,
					t1.remarks,
					t1.cbFrmMnf,
	                t1.mnfCbToCust,
					t1.dlrCbToCust,
					t1.cbPyt,
					t1.dbd,
					t1.mbd,
					t1.dbdPerc,
					t1.dbdPercCal,
					t1.dbdRtnd,
					t1.mbdRtnd,
					t1.knckOffDueAmt,
					t1.dbdFeeTypId,
					t1.mbdFeeTypId,
					t1.dbdAndMbdFeeTypId
			   FROM promotions t1
			     JOIN rmtfinancetypes t2 ON t1.fintype = t2.fintype
			     LEFT JOIN rules t3 ON t1.downpayrule = t3.ruleid
			     LEFT JOIN rules t4 ON t1.rpypricingmethod = t4.ruleid
			  WHERE NOT (EXISTS ( SELECT 1
			   FROM promotions_temp
			  WHERE promotions_temp.promotioncode = t1.promotioncode AND promotions_temp.promotionid = t1.promotionid))
			]]>
		</createView>
	</changeSet>

	<changeSet id="sys-uc-828" author="sys">
		<addColumn tableName="WIFFinInsurances_temp">
			<column name="PolicyCode" type="varchar(8)" />
		</addColumn>
	</changeSet>

	<!-- PLease use the change set ID from 842 only 841 already reserved for AUto upload and download changes. -->
</databaseChangeLog>