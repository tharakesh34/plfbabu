<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

	<property name="add.schema" value="dbo." dbms="mssql" />
	<property name="add.schema" value="" dbms="oracle" />
	<property name="add.schema" value="" dbms="postgresql" />
	<property name="call.substr" value="substring" dbms="mssql" />
	<property name="call.substr" value="substr" dbms="oracle" />
	<property name="call.substr" value="substring" dbms="postgresql" />
	<property name="call.auditdb" value="PLFAVANSEQC.." dbms="mssql" />
	<property name="call.auditdb" value=" " dbms="oracle" />
	<property name="call.concatenate" value="+" dbms="mssql" />
	<property name="call.concatenate" value="||" dbms="oracle" />
	<property name="call.concatenate" value="||" dbms="postgresql" />
	<property name="call.collength" value="LEN" dbms="mssql" />
	<property name="call.collength" value="LENGTH" dbms="oracle" />
	<property name="call.collength" value="LENGTH" dbms="postgresql" />
	<property name="call.date" value="getdate()" dbms="mssql" />
	<property name="call.date" value="sysdate" dbms="oracle" />
	<property name="call.date" value="now()" dbms="postgresql" />

	<changeSet id="pre_run_for_pgp" author="Adarsh" runAlways="true" dbms="postgresql">
		<sql>
			Set search_path = plf,public,pg_catalog;
		</sql>
	</changeSet>

	<changeSet id="pre_run_for_pgp" author="Adarsh" runAlways="true" dbms="postgresql">
		<sql>
			Set search_path = plf,public,pg_catalog;
		</sql>
	</changeSet>

	<changeSet id="478" author="shinde.b">
		<addColumn tableName="RMTFinanceTypes">
			<column name="AutoApprove" type="boolean" defaultValueBoolean="0" />
		</addColumn>
	</changeSet>

	<changeSet id="479" author="Shinde.b">
		<addColumn tableName="RMTFinanceTypes_Temp">
			<column name="AutoApprove" type="boolean" defaultValueBoolean="0" />
		</addColumn>
	</changeSet>

	<changeSet id="480" author="Shinde.b">
		<sql>
			<![CDATA[
				Update RMTFinanceTypes set AutoApprove = 0;
				Update RMTFinanceTypes_Temp set AutoApprove = 0;
			]]>

		</sql>
	</changeSet>

	<changeSet id="481.1" author="Shinde.b">
		<createView viewName="RMTFINANCETYPES_VIEW" replaceIfExists="true">
		<![CDATA[
			SELECT t1.fintype,
			t1.fincategory,
			t1.fintypedesc,
			t1.finccy,
			t1.findayscaltype,
			t1.finactype,
			t1.fincontingentactype,
			t1.finisgenref,
			t1.finmaxamount,
			t1.finminamount,
			t1.finisopennewfinac,
			t1.findftstmtfrq,
			t1.finisalwmd,
			t1.finschdmthd,
			t1.finisalwgrace,
			t1.finhistretension,
			t1.equalrepayment,
			t1.finratetype,
			t1.finbaserate,
			t1.finsplrate,
			t1.finintrate,
			t1.finminrate,
			t1.finmaxrate,
			t1.findftintfrq,
			t1.finisintcpz,
			t1.fincpzfrq,
			t1.finisrvwalw,
			t1.finrvwfrq,
			t1.fingrcratetype,
			t1.fingrcbaserate,
			t1.fingrcsplrate,
			t1.fingrcintrate,
			t1.fingrcminrate,
			t1.fingrcmaxrate,
			t1.fingrcdftintfrq,
			t1.fingrcisintcpz,
			t1.fingrccpzfrq,
			t1.fingrcisrvwalw,
			t1.fingrcrvwfrq,
			t1.finminterm,
			t1.finmaxterm,
			t1.findftterms,
			t1.finrpyfrq,
			t1.finrepaymethod,
			t1.finisalwpartialrpy,
			t1.finisalwdifferment,
			t1.finmaxdifferment,
			t1.finisalwearlyrpy,
			t1.finisalwearlysettle,
			t1.finodrpytries,
			t1.finearlypayrule,
			t1.finearlysettlerule,
			t1.findepositrestrictedto,
			t1.finaebuyorinception,
			t1.finaesellormaturity,
			t1.finisactive,
			t1.version,
			t1.lastmntby,
			t1.lastmnton,
			t1.recordstatus,
			t1.rolecode,
			t1.nextrolecode,
			t1.taskid,
			t1.nexttaskid,
			t1.recordtype,
			t1.workflowid,
			t1.stepfinance,
			t1.steppingmandatory,
			t1.alwmanualsteps,
			t1.alwdsteppolicies,
			t1.dftsteppolicy,
			t4.actypedesc lovdescfincontingentactypename,
			t5.actypedesc lovdescfinactypename,
			t1.finisdwpayrequired,
			t1.finrvwrateapplfor,
			t1.finalwratechangeanydate,
			t1.finisintcpzatgrcend,
			t1.finelgrulecode,
			t1.limitelgrulecode,
			t1.finschcalcodeonrvw,
			t1.alwplandeferment,
			t1.plandefercount,
			t1.finassettype,
			t1.pftpayactype,
			t1.finisopenpftpayacc,
			t31.actypedesc lovdescpftpayactypename,
			t1.finisalwgrcrepay,
			t1.fingrcschdmthd,
			t1.fingrcmargin,
			t1.finmargin,
			t1.finscheduleon,
			t1.fingrcscheduleon,
			t1.fincommitmentreq,
			t1.fincollateralreq,
			t1.findepreciationreq,
			t1.findepreciationfrq,
			t1.finbankcontingentactype,
			t1.finprovisionactype,
			t38.actypedesc lovdescfinbankcontactypename,
			t39.actypedesc lovdescfinprovisionactypename,
			t1.allowriainvestment,
			t1.overridelimit,
			t1.limitrequired,
			t1.fincommitmentovrride,
			t1.fincollateralovrride,
			t1.finpftunchanged,
			t1.applyodpenalty,
			t1.odincgrcdays,
			t1.odchargetype,
			t1.odgracedays,
			t1.odchargecalon,
			t1.odchargeamtorperc,
			t1.odallowwaiver,
			t1.odmaxwaiverperc,
			t1.findivision,
			t48.divisioncodedesc lovdescfindivisionname,
			t48.entitycode lovdescentitycode,
			t1.finsuspactype,
			t49.actypedesc lovdescfinsuspactypename,
			t1.product,
			t1.startdate,
			t1.enddate,
			t1.allowdownpaypgm,
			t1.fintypedesc lovdescpromofintypedesc,
			t1.remarks,
			t1.alwearlypaymethods,
			t1.pastduepftcalmthd,
			t1.pastduepftmargin,
			t1.alwadvancerent,
			t1.grcadvbaserate,
			t1.grcadvmargin,
			t1.grcadvpftrate,
			t1.rpyadvbaserate,
			t1.rpyadvmargin,
			t1.rpyadvpftrate,
			t1.rolloverfinance,
			t1.rolloverfrq,
			t1.downpayrule,
			t59.rulecode downpayrulecode,
			t59.rulecodedesc downpayruledesc,
			t1.finsusptrigger,
			t1.finsuspremarks,
			t1.alwmultipartydisb,
			t1.collateraltype,
			t1.tdsapplicable,
			t1.manualschedule,
			t1.applygrcpricing,
			t1.grcpricingmethod,
			t1.applyrpypricing,
			t1.rpypricingmethod,
			t1.rpyhierarchy,
			t67.rulecode grcpricingmethoddesc,
			t68.rulecode rpypricingmethoddesc,
			t1.droplineod,
			t1.droppingmethod,
			t1.ratechganyday,
			t1.finrepaypftonfrq,
			t1.alwbpi,
			t1.bpitreatment,
			t1.pftdueschon,
			t1.planemihalw,
			t1.planemihmethod,
			t1.planemihmaxperyear,
			t1.planemihmax,
			t1.planemihlockperiod,
			t1.planemicpz,
			t1.unplanemihlockperiod,
			t1.unplanemicpz,
			t1.reagecpz,
			t1.fddlockperiod,
			t1.alwdrpymethods,
			t1.maxunplannedemi,
			t1.maxreageholidays,
			t1.roundingmode,
			t1.roundingtarget,
			t1.frequencydays,
			t1.quickdisb,
			t1.alwmaxdisbcheckreq,
			t1.alwreage,
			t1.alwunplanemiholiday,
			t1.profitcenterid,
			t69.profitcentercode,
			t69.profitcenterdesc,
			t1.productcategory,
			t2.productdesc fincategorydesc,
			t1.developerfinance,
			t1.costoffunds,
			t1.chequecapturereq,
			t1.finltvcheck,
			t1.partiallysecured,
			t1.alwadvemi,
			t1.advemiminterms,
			t1.advemimaxterms,
			t1.advemidftterms,
			t1.advemischdmthd,
			t1.bpipftdaysbasis,
			t1.eligibilitymethods,
			t1.alwhybridrate,
			t1.fixedratetenor,
			t1.odmincapamount,
			t1.odrulecode,
			t1.alwzerointacc,
			t1.autorejectiondays,
			t1.taxnomand,
			t1.putcallrequired,
			t1.grcadvintersetreq,
			t1.grcadvtype,
			t1.grcadvminterms,
			t1.grcadvmaxterms,
			t1.grcadvdefaultterms,
			t1.advintersetreq,
			t1.advtype,
			t1.advminterms,
			t1.advmaxterms,
			t1.advdefaultterms,
			t1.advstage,
			t1.dsfreq,
			t1.cashcollateralreq,
			t1.tdsallowtomodify,
			t1.tdsapplicableto,
			t1.alwvan,
			t1.vanallocationmethod,
			t1.allowdrawingpower,
			t1.allowrevolving,
			t1.alwsanctionamt,
			t1.alwsanctionamtoverride,
			t1.sanbsdschdle,
			t1.finisratervwatgrcend,
			t1.schdonpmtcal,
			t1.autoApprove
			FROM rmtfinancetypes_temp t1
			LEFT JOIN bmtproduct t2 ON t1.fincategory = t2.productcode
			LEFT JOIN rmtaccounttypes t4 ON t1.fincontingentactype = t4.actype
			LEFT JOIN rmtaccounttypes t38 ON t1.finbankcontingentactype = t38.actype
			LEFT JOIN rmtaccounttypes t39 ON t1.finprovisionactype = t39.actype
			LEFT JOIN rmtaccounttypes t5 ON t1.finactype = t5.actype
			LEFT JOIN rmtaccounttypes t31 ON t1.pftpayactype = t31.actype
			LEFT JOIN smtdivisiondetail t48 ON t1.findivision = t48.divisioncode
			LEFT JOIN rmtaccounttypes t49 ON t1.finsuspactype = t49.actype
			LEFT JOIN rules t59 ON t1.downpayrule = t59.ruleid
			LEFT JOIN rules t67 ON t1.grcpricingmethod = t67.ruleid
			LEFT JOIN rules t68 ON t1.rpypricingmethod = t68.ruleid
			LEFT JOIN profitcenters t69 ON t69.profitcenterid = t1.profitcenterid
			UNION ALL
			SELECT t1.fintype,
			t1.fincategory,
			t1.fintypedesc,
			t1.finccy,
			t1.findayscaltype,
			t1.finactype,
			t1.fincontingentactype,
			t1.finisgenref,
			t1.finmaxamount,
			t1.finminamount,
			t1.finisopennewfinac,
			t1.findftstmtfrq,
			t1.finisalwmd,
			t1.finschdmthd,
			t1.finisalwgrace,
			t1.finhistretension,
			t1.equalrepayment,
			t1.finratetype,
			t1.finbaserate,
			t1.finsplrate,
			t1.finintrate,
			t1.finminrate,
			t1.finmaxrate,
			t1.findftintfrq,
			t1.finisintcpz,
			t1.fincpzfrq,
			t1.finisrvwalw,
			t1.finrvwfrq,
			t1.fingrcratetype,
			t1.fingrcbaserate,
			t1.fingrcsplrate,
			t1.fingrcintrate,
			t1.fingrcminrate,
			t1.fingrcmaxrate,
			t1.fingrcdftintfrq,
			t1.fingrcisintcpz,
			t1.fingrccpzfrq,
			t1.fingrcisrvwalw,
			t1.fingrcrvwfrq,
			t1.finminterm,
			t1.finmaxterm,
			t1.findftterms,
			t1.finrpyfrq,
			t1.finrepaymethod,
			t1.finisalwpartialrpy,
			t1.finisalwdifferment,
			t1.finmaxdifferment,
			t1.finisalwearlyrpy,
			t1.finisalwearlysettle,
			t1.finodrpytries,
			t1.finearlypayrule,
			t1.finearlysettlerule,
			t1.findepositrestrictedto,
			t1.finaebuyorinception,
			t1.finaesellormaturity,
			t1.finisactive,
			t1.version,
			t1.lastmntby,
			t1.lastmnton,
			t1.recordstatus,
			t1.rolecode,
			t1.nextrolecode,
			t1.taskid,
			t1.nexttaskid,
			t1.recordtype,
			t1.workflowid,
			t1.stepfinance,
			t1.steppingmandatory,
			t1.alwmanualsteps,
			t1.alwdsteppolicies,
			t1.dftsteppolicy,
			t4.actypedesc lovdescfincontingentactypename,
			t5.actypedesc lovdescfinactypename,
			t1.finisdwpayrequired,
			t1.finrvwrateapplfor,
			t1.finalwratechangeanydate,
			t1.finisintcpzatgrcend,
			t1.finelgrulecode,
			t1.limitelgrulecode,
			t1.finschcalcodeonrvw,
			t1.alwplandeferment,
			t1.plandefercount,
			t1.finassettype,
			t1.pftpayactype,
			t1.finisopenpftpayacc,
			t31.actypedesc lovdescpftpayactypename,
			t1.finisalwgrcrepay,
			t1.fingrcschdmthd,
			t1.fingrcmargin,
			t1.finmargin,
			t1.finscheduleon,
			t1.fingrcscheduleon,
			t1.fincommitmentreq,
			t1.fincollateralreq,
			t1.findepreciationreq,
			t1.findepreciationfrq,
			t1.finbankcontingentactype,
			t1.finprovisionactype,
			t38.actypedesc lovdescfinbankcontactypename,
			t39.actypedesc lovdescfinprovisionactypename,
			t1.allowriainvestment,
			t1.overridelimit,
			t1.limitrequired,
			t1.fincommitmentovrride,
			t1.fincollateralovrride,
			t1.finpftunchanged,
			t1.applyodpenalty,
			t1.odincgrcdays,
			t1.odchargetype,
			t1.odgracedays,
			t1.odchargecalon,
			t1.odchargeamtorperc,
			t1.odallowwaiver,
			t1.odmaxwaiverperc,
			t1.findivision,
			t48.divisioncodedesc lovdescfindivisionname,
			t48.entitycode lovdescentitycode,
			t1.finsuspactype,
			t49.actypedesc lovdescfinsuspactypename,
			t1.product,
			t1.startdate,
			t1.enddate,
			t1.allowdownpaypgm,
			t1.fintypedesc lovdescpromofintypedesc,
			t1.remarks,
			t1.alwearlypaymethods,
			t1.pastduepftcalmthd,
			t1.pastduepftmargin,
			t1.alwadvancerent,
			t1.grcadvbaserate,
			t1.grcadvmargin,
			t1.grcadvpftrate,
			t1.rpyadvbaserate,
			t1.rpyadvmargin,
			t1.rpyadvpftrate,
			t1.rolloverfinance,
			t1.rolloverfrq,
			t1.downpayrule,
			t59.rulecode downpayrulecode,
			t59.rulecodedesc downpayruledesc,
			t1.finsusptrigger,
			t1.finsuspremarks,
			t1.alwmultipartydisb,
			t1.collateraltype,
			t1.tdsapplicable,
			t1.manualschedule,
			t1.applygrcpricing,
			t1.grcpricingmethod,
			t1.applyrpypricing,
			t1.rpypricingmethod,
			t1.rpyhierarchy,
			t67.rulecode grcpricingmethoddesc,
			t68.rulecode rpypricingmethoddesc,
			t1.droplineod,
			t1.droppingmethod,
			t1.ratechganyday,
			t1.finrepaypftonfrq,
			t1.alwbpi,
			t1.bpitreatment,
			t1.pftdueschon,
			t1.planemihalw,
			t1.planemihmethod,
			t1.planemihmaxperyear,
			t1.planemihmax,
			t1.planemihlockperiod,
			t1.planemicpz,
			t1.unplanemihlockperiod,
			t1.unplanemicpz,
			t1.reagecpz,
			t1.fddlockperiod,
			t1.alwdrpymethods,
			t1.maxunplannedemi,
			t1.maxreageholidays,
			t1.roundingmode,
			t1.roundingtarget,
			t1.frequencydays,
			t1.quickdisb,
			t1.alwmaxdisbcheckreq,
			t1.alwreage,
			t1.alwunplanemiholiday,
			t1.profitcenterid,
			t69.profitcentercode,
			t69.profitcenterdesc,
			t1.productcategory,
			t2.productdesc fincategorydesc,
			t1.developerfinance,
			t1.costoffunds,
			t1.chequecapturereq,
			t1.finltvcheck,
			t1.partiallysecured,
			t1.alwadvemi,
			t1.advemiminterms,
			t1.advemimaxterms,
			t1.advemidftterms,
			t1.advemischdmthd,
			t1.bpipftdaysbasis,
			t1.eligibilitymethods,
			t1.alwhybridrate,
			t1.fixedratetenor,
			t1.odmincapamount,
			t1.odrulecode,
			t1.alwzerointacc,
			t1.autorejectiondays,
			t1.taxnomand,
			t1.putcallrequired,
			t1.grcadvintersetreq,
			t1.grcadvtype,
			t1.grcadvminterms,
			t1.grcadvmaxterms,
			t1.grcadvdefaultterms,
			t1.advintersetreq,
			t1.advtype,
			t1.advminterms,
			t1.advmaxterms,
			t1.advdefaultterms,
			t1.advstage,
			t1.dsfreq,
			t1.cashcollateralreq,
			t1.tdsallowtomodify,
			t1.tdsapplicableto,
			t1.alwvan,
			t1.vanallocationmethod,
			t1.allowdrawingpower,
			t1.allowrevolving,
			t1.alwsanctionamt,
			t1.alwsanctionamtoverride,
			t1.sanbsdschdle,
			t1.finisratervwatgrcend,
			t1.schdonpmtcal,
			t1.autoApprove
			FROM rmtfinancetypes t1
			LEFT JOIN bmtproduct t2 ON t1.fincategory = t2.productcode
			LEFT JOIN rmtaccounttypes t4 ON t1.fincontingentactype = t4.actype
			LEFT JOIN rmtaccounttypes t38 ON t1.finbankcontingentactype = t38.actype
			LEFT JOIN rmtaccounttypes t39 ON t1.finprovisionactype = t39.actype
			LEFT JOIN rmtaccounttypes t5 ON t1.finactype = t5.actype
			LEFT JOIN rmtaccounttypes t31 ON t1.pftpayactype = t31.actype
			LEFT JOIN smtdivisiondetail t48 ON t1.findivision = t48.divisioncode
			LEFT JOIN rmtaccounttypes t49 ON t1.finsuspactype = t49.actype
			LEFT JOIN rules t59 ON t1.downpayrule = t59.ruleid
			LEFT JOIN rules t67 ON t1.grcpricingmethod = t67.ruleid
			LEFT JOIN rules t68 ON t1.rpypricingmethod = t68.ruleid
			LEFT JOIN profitcenters t69 ON t69.profitcenterid = t1.profitcenterid
			WHERE NOT (EXISTS ( SELECT 1 expr1
			FROM rmtfinancetypes_temp
			WHERE rmtfinancetypes_temp.fintype = t1.fintype ))
			]]>
		</createView>
	</changeSet>

	<changeSet id="481.1_pre" author="Shinde.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_aview');
		 	]]>
		</sql>
	</changeSet>


	<changeSet id="482.1" author="Shinde.b">
		<createView viewName="RMTFINANCETYPES_AVIEW" replaceIfExists="true">
		<![CDATA[
			SELECT t1.fintype,
			t1.fincategory,
			t1.fintypedesc,
			t1.finccy,
			t1.findayscaltype,
			t1.finactype,
			t1.fincontingentactype,
			t1.finisgenref,
			t1.finmaxamount,
			t1.finminamount,
			t1.finisopennewfinac,
			t1.findftstmtfrq,
			t1.finisalwmd,
			t1.finschdmthd,
			t1.finisalwgrace,
			t1.finhistretension,
			t1.equalrepayment,
			t1.finratetype,
			t1.finbaserate,
			t1.finsplrate,
			t1.finintrate,
			t1.finminrate,
			t1.finmaxrate,
			t1.findftintfrq,
			t1.finisintcpz,
			t1.fincpzfrq,
			t1.finisrvwalw,
			t1.finrvwfrq,
			t1.fingrcratetype,
			t1.fingrcbaserate,
			t1.fingrcsplrate,
			t1.fingrcintrate,
			t1.fingrcminrate,
			t1.fingrcmaxrate,
			t1.fingrcdftintfrq,
			t1.fingrcisintcpz,
			t1.fingrccpzfrq,
			t1.fingrcisrvwalw,
			t1.fingrcrvwfrq,
			t1.finminterm,
			t1.finmaxterm,
			t1.findftterms,
			t1.finrpyfrq,
			t1.finrepaymethod,
			t1.finisalwpartialrpy,
			t1.finisalwdifferment,
			t1.finmaxdifferment,
			t1.finisalwearlyrpy,
			t1.finisalwearlysettle,
			t1.finodrpytries,
			t1.finearlypayrule,
			t1.finearlysettlerule,
			t1.findepositrestrictedto,
			t1.finaebuyorinception,
			t1.finaesellormaturity,
			t1.finisactive,
			t1.version,
			t1.lastmntby,
			t1.lastmnton,
			t1.recordstatus,
			t1.rolecode,
			t1.nextrolecode,
			t1.taskid,
			t1.nexttaskid,
			t1.recordtype,
			t1.workflowid,
			t1.stepfinance,
			t1.steppingmandatory,
			t1.alwmanualsteps,
			t1.alwdsteppolicies,
			t1.dftsteppolicy,
			t4.actypedesc lovdescfincontingentactypename,
			t5.actypedesc lovdescfinactypename,
			t1.finisdwpayrequired,
			t1.finrvwrateapplfor,
			t1.finalwratechangeanydate,
			t1.finisintcpzatgrcend,
			t1.finelgrulecode,
			t1.limitelgrulecode,
			t1.finschcalcodeonrvw,
			t1.alwplandeferment,
			t1.plandefercount,
			t1.finassettype,
			t1.pftpayactype,
			t1.finisopenpftpayacc,
			t31.actypedesc lovdescpftpayactypename,
			t1.finisalwgrcrepay,
			t1.fingrcschdmthd,
			t1.fingrcmargin,
			t1.finmargin,
			t1.finscheduleon,
			t1.fingrcscheduleon,
			t1.fincommitmentreq,
			t1.fincollateralreq,
			t1.findepreciationreq,
			t1.findepreciationfrq,
			t1.finbankcontingentactype,
			t1.finprovisionactype,
			t38.actypedesc lovdescfinbankcontactypename,
			t39.actypedesc lovdescfinprovisionactypename,
			t1.allowriainvestment,
			t1.overridelimit,
			t1.limitrequired,
			t1.fincommitmentovrride,
			t1.fincollateralovrride,
			t1.finpftunchanged,
			t1.applyodpenalty,
			t1.odincgrcdays,
			t1.odchargetype,
			t1.odgracedays,
			t1.odchargecalon,
			t1.odchargeamtorperc,
			t1.odallowwaiver,
			t1.odmaxwaiverperc,
			t1.findivision,
			t48.divisioncodedesc lovdescfindivisionname,
			t48.entitycode lovdescentitycode,
			t1.finsuspactype,
			t49.actypedesc lovdescfinsuspactypename,
			t1.product,
			t1.startdate,
			t1.enddate,
			t1.allowdownpaypgm,
			t1.remarks,
			t1.alwearlypaymethods,
			t1.pastduepftcalmthd,
			t1.pastduepftmargin,
			t1.alwadvancerent,
			t1.grcadvbaserate,
			t1.grcadvmargin,
			t1.grcadvpftrate,
			t1.rpyadvbaserate,
			t1.rpyadvmargin,
			t1.rpyadvpftrate,
			t1.rolloverfinance,
			t1.rolloverfrq,
			t1.downpayrule,
			t59.rulecode downpayrulecode,
			t59.rulecodedesc downpayruledesc,
			t1.finsusptrigger,
			t1.finsuspremarks,
			t1.alwmultipartydisb,
			t1.collateraltype,
			t1.tdsapplicable,
			t1.manualschedule,
			t1.applygrcpricing,
			t1.grcpricingmethod,
			t1.applyrpypricing,
			t1.rpypricingmethod,
			t1.rpyhierarchy,
			t67.rulecode grcpricingmethoddesc,
			t68.rulecode rpypricingmethoddesc,
			t1.droplineod,
			t1.droppingmethod,
			t1.ratechganyday,
			t1.finrepaypftonfrq,
			t1.alwbpi,
			t1.bpitreatment,
			t1.pftdueschon,
			t1.planemihalw,
			t1.planemihmethod,
			t1.planemihmaxperyear,
			t1.planemihmax,
			t1.planemihlockperiod,
			t1.planemicpz,
			t1.unplanemihlockperiod,
			t1.unplanemicpz,
			t1.reagecpz,
			t1.fddlockperiod,
			t1.alwdrpymethods,
			t1.maxunplannedemi,
			t1.maxreageholidays,
			t1.roundingmode,
			t1.roundingtarget,
			t1.frequencydays,
			t1.quickdisb,
			t1.alwreage,
			t1.alwunplanemiholiday,
			t1.alwmaxdisbcheckreq,
			t1.fintypedesc lovdescpromofintypedesc,
			t1.profitcenterid,
			t69.profitcentercode,
			t69.profitcenterdesc,
			t1.productcategory,
			t2.productdesc fincategorydesc,
			t1.developerfinance,
			t1.costoffunds,
			t1.chequecapturereq,
			t1.finltvcheck,
			t1.partiallysecured,
			t1.alwadvemi,
			t1.advemiminterms,
			t1.advemimaxterms,
			t1.advemidftterms,
			t1.advemischdmthd,
			t1.bpipftdaysbasis,
			t1.eligibilitymethods,
			t1.alwhybridrate,
			t1.fixedratetenor,
			t1.odmincapamount,
			t1.odrulecode,
			t1.alwzerointacc,
			t1.autorejectiondays,
			t1.taxnomand,
			t1.putcallrequired,
			t1.grcadvintersetreq,
			t1.grcadvtype,
			t1.grcadvminterms,
			t1.grcadvmaxterms,
			t1.grcadvdefaultterms,
			t1.advintersetreq,
			t1.advtype,
			t1.advminterms,
			t1.advmaxterms,
			t1.advdefaultterms,
			t1.advstage,
			t1.dsfreq,
			t1.cashcollateralreq,
			t1.tdsallowtomodify,
			t1.tdsapplicableto,
			t1.alwvan,
			t1.vanallocationmethod,
			t1.allowdrawingpower,
			t1.allowrevolving,
			t1.alwsanctionamt,
			t1.alwsanctionamtoverride,
			t1.sanbsdschdle,
			t1.finisratervwatgrcend,
			t1.schdonpmtcal,
			t1.autoApprove
			FROM rmtfinancetypes t1
			LEFT JOIN bmtproduct t2 ON t1.fincategory = t2.productcode
			LEFT JOIN rmtaccounttypes t4 ON t1.fincontingentactype = t4.actype
			LEFT JOIN rmtaccounttypes t38 ON t1.finbankcontingentactype = t38.actype
			LEFT JOIN rmtaccounttypes t39 ON t1.finprovisionactype = t39.actype
			LEFT JOIN rmtaccounttypes t5 ON t1.finactype = t5.actype
			LEFT JOIN rmtaccounttypes t31 ON t1.pftpayactype = t31.actype
			LEFT JOIN smtdivisiondetail t48 ON t1.findivision = t48.divisioncode
			LEFT JOIN rmtaccounttypes t49 ON t1.finsuspactype = t49.actype
			LEFT JOIN rules t59 ON t1.downpayrule = t59.ruleid
			LEFT JOIN rules t67 ON t1.grcpricingmethod = t67.ruleid
			LEFT JOIN rules t68 ON t1.rpypricingmethod = t68.ruleid
			LEFT JOIN profitcenters t69 ON t69.profitcenterid = t1.profitcenterid
			]]>
		</createView>
	</changeSet>

	<changeSet id="484_post" author="Shinde.b" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_restore_dependencies ('plf', 'rmtfinancetypes_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="485.1" author="Shinde.b">
		<createView viewName="RMTFINANCETYPES_ORGVIEW" replaceIfExists="true">
		<![CDATA[
			SELECT t1.fintype,
			t1.fincategory,
			t1.fintypedesc,
			t1.finccy,
			t1.findayscaltype,
			t1.finactype,
			t1.fincontingentactype,
			t1.finisgenref,
			t1.finmaxamount,
			t1.finminamount,
			t1.finisopennewfinac,
			t1.finisalwmd,
			t1.finschdmthd,
			t1.finisalwgrace,
			t1.equalrepayment,
			t1.finratetype,
			t1.finbaserate,
			t1.finsplrate,
			t1.finintrate,
			t1.finminrate,
			t1.finmaxrate,
			t1.findftintfrq,
			t1.finisintcpz,
			t1.fincpzfrq,
			t1.finisrvwalw,
			t1.finrvwfrq,
			t1.fingrcratetype,
			t1.fingrcbaserate,
			t1.fingrcsplrate,
			t1.fingrcintrate,
			t1.fingrcminrate,
			t1.fingrcmaxrate,
			t1.fingrcdftintfrq,
			t1.fingrcisintcpz,
			t1.fingrccpzfrq,
			t1.fingrcisrvwalw,
			t1.fingrcrvwfrq,
			t1.finminterm,
			t1.finmaxterm,
			t1.findftterms,
			t1.finrpyfrq,
			t1.finrepaymethod,
			t1.finisalwdifferment,
			t1.finmaxdifferment,
			t1.finisactive,
			t1.stepfinance,
			t1.steppingmandatory,
			t1.alwmanualsteps,
			t1.alwdsteppolicies,
			t1.dftsteppolicy,
			t1.finisdwpayrequired,
			t1.finrvwrateapplfor,
			t1.finalwratechangeanydate,
			t1.finisintcpzatgrcend,
			t1.finschcalcodeonrvw,
			t1.alwplandeferment,
			t1.plandefercount,
			t1.pftpayactype,
			t1.finisopenpftpayacc,
			t1.finisalwgrcrepay,
			t1.fingrcschdmthd,
			t1.fingrcmargin,
			t1.finmargin,
			t1.fincommitmentreq,
			t1.fincollateralreq,
			t1.findepreciationreq,
			t1.findepreciationfrq,
			t1.finbankcontingentactype,
			t1.finprovisionactype,
			t1.allowriainvestment,
			t1.overridelimit,
			t1.limitrequired,
			t1.fincommitmentovrride,
			t1.fincollateralovrride,
			t1.finrepaypftonfrq,
			t1.finpftunchanged,
			t1.applyodpenalty,
			t1.odincgrcdays,
			t1.odchargetype,
			t1.odgracedays,
			t1.odchargecalon,
			t1.odchargeamtorperc,
			t1.odallowwaiver,
			t1.odmaxwaiverperc,
			t1.findivision,
			t3.divisioncodedesc lovdescfindivisionname,
			t1.finsuspactype,
			t1.product,
			t1.startdate,
			t1.enddate,
			t1.allowdownpaypgm,
			t1.fintypedesc lovdescpromofintypedesc,
			t1.remarks,
			t4.policydesc lovdescdftsteppolicyname,
			t1.pastduepftcalmthd,
			t1.pastduepftmargin,
			t1.alwadvancerent,
			t1.grcadvbaserate,
			t1.grcadvmargin,
			t1.grcadvpftrate,
			t1.rpyadvbaserate,
			t1.rpyadvmargin,
			t1.rpyadvpftrate,
			t1.rolloverfinance,
			t1.rolloverfrq,
			t1.downpayrule,
			t1.alwmultipartydisb,
			t1.collateraltype,
			t1.tdsapplicable,
			t5.rulecode downpayrulecode,
			t5.rulecodedesc downpayruledesc,
			t1.applygrcpricing,
			t1.applyrpypricing,
			t6.rulecode grcpricingmethoddesc,
			t7.rulecode rpypricingmethoddesc,
			t1.droplineod,
			t1.droppingmethod,
			t1.ratechganyday,
			t4.steptype dftsteppolicytype,
			t1.manualschedule,
			t1.alwbpi,
			t1.bpitreatment,
			t1.pftdueschon,
			t1.planemihalw,
			t1.planemihmethod,
			t1.planemihmaxperyear,
			t1.planemihmax,
			t1.planemihlockperiod,
			t1.planemicpz,
			t1.unplanemihlockperiod,
			t1.unplanemicpz,
			t1.reagecpz,
			t1.fddlockperiod,
			t1.alwdrpymethods,
			t1.maxunplannedemi,
			t1.maxreageholidays,
			t1.roundingmode,
			t1.roundingtarget,
			t1.frequencydays,
			t1.quickdisb,
			t1.alwreage,
			t1.alwunplanemiholiday,
			t1.alwmaxdisbcheckreq,
			t1.productcategory,
			t1.rpyhierarchy,
			t1.developerfinance,
			t3.entitycode lovdescentitycode,
			t8.entitydesc lovdescentitydesc,
			t1.costoffunds,
			t1.chequecapturereq,
			t1.finltvcheck,
			t1.partiallysecured,
			t1.alwadvemi,
			t1.advemiminterms,
			t1.advemimaxterms,
			t1.advemidftterms,
			t1.advemischdmthd,
			t1.bpipftdaysbasis,
			t1.eligibilitymethods,
			t1.alwhybridrate,
			t1.fixedratetenor,
			t1.odmincapamount,
			t1.odrulecode,
			t1.alwzerointacc,
			t1.finisalwpartialrpy,
			t1.autorejectiondays,
			t1.taxnomand,
			t1.putcallrequired,
			t1.grcadvintersetreq,
			t1.grcadvtype,
			t1.grcadvminterms,
			t1.grcadvmaxterms,
			t1.grcadvdefaultterms,
			t1.advintersetreq,
			t1.advtype,
			t1.advminterms,
			t1.advmaxterms,
			t1.advdefaultterms,
			t1.advstage,
			t1.dsfreq,
			t1.cashcollateralreq,
			t1.alwearlypaymethods,
			t1.tdsallowtomodify,
			t1.tdsapplicableto,
			t1.alwvan,
			t1.vanallocationmethod,
			t1.allowdrawingpower,
			t1.allowrevolving,
			t1.alwsanctionamt,
			t1.alwsanctionamtoverride,
			t1.sanbsdschdle,
			t1.finisratervwatgrcend,
			t1.schdonpmtcal,
			t1.autoApprove
			FROM rmtfinancetypes t1
			JOIN smtdivisiondetail t3 ON t1.findivision = t3.divisioncode
			LEFT JOIN steppolicyheader t4 ON t1.dftsteppolicy = t4.policycode
			LEFT JOIN rules t5 ON t1.downpayrule = t5.ruleid
			LEFT JOIN rules t6 ON t1.grcpricingmethod = t6.ruleid
			LEFT JOIN rules t7 ON t1.rpypricingmethod = t7.ruleid
			LEFT JOIN entity t8 ON t3.entitycode = t8.entitycode
			]]>
		</createView>
	</changeSet>

	<changeSet id="486" author="Shinde.b">
		<sql>
   			 <![CDATA[
        		Insert into SMTPARAMETERS (SYSPARMCODE,SYSPARMDESC,SYSPARMTYPE,SYSPARMMAINT,SYSPARMVALUE,SYSPARMLENGTH,SYSPARMDEC,SYSPARMLIST,SYSPARMVALDMOD,SYSPARMDESCRIPTION,VERSION,LASTMNTBY,LASTMNTON,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID) values ('ALLOW_QUICK_DISB','Allow Quick Disbursement ','String',1,'N',3,0,null,null,' Allow Quick Disbursement',1,1000,current_timestamp,'Approved',null,null,null,null,null,0);
     		]]>
		</sql>
	</changeSet>

	<changeSet id="487" author="Shinde.b">
		<sql>
		    <![CDATA[
		         Update SeqSecRights set SeqNo = (Select max(RightId)+1 from SecRights);
		         INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3,'FinanceTypeDialog_AllowAutoApprove','FinanceTypeDialog',0,1000,current_timestamp,'Approved','',' ',' ',' ',' ',0);
		         Update SeqSecRights set SeqNo = (Select max(RightId)+1  from SecRights);
		     ]]>
		</sql>
	</changeSet>

	<changeSet id="488" author="Shinde.b">
		<createTable tableName="QDPVALIDITYDAYS">
			<column name="DisbMode" type="varchar(8)">
				<constraints nullable="false" />
			</column>
			<column name="NoOfDays" type="smallint" />
		</createTable>
	</changeSet>

	<changeSet id="489" author="Shinde.b">
		<sql>
			 <![CDATA[
				Insert into QDPVALIDITYDAYS (DISBMODE,NOOFDAYS) values ('CHEQUE', 90);
				Insert into QDPVALIDITYDAYS (DISBMODE,NOOFDAYS) values ('NEFT', 30);
				Insert into QDPVALIDITYDAYS (DISBMODE,NOOFDAYS) values ('RTGS', 30); 
				Insert into QDPVALIDITYDAYS (DISBMODE,NOOFDAYS) values ('IMPS', 30);
				Insert into QDPVALIDITYDAYS (DISBMODE,NOOFDAYS) values ('DD', 30);
			 ]]>
		</sql>
	</changeSet>

	<changeSet id="490" author="Shinde.b">
		<addColumn tableName="Findisbursementdetails_Temp">
			<column name="QuickDisb" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="491" author="Shinde.b">
		<addColumn tableName="Findisbursementdetails">
			<column name="QuickDisb" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="492" author="Shinde.b">
		<createTable tableName="Batch_Process_Status">
			<column name="BatchName" type="varchar(30)">
				<constraints nullable="false" />
			</column>
			<column name="StartTime" type="datetime" />
			<column name="EndTime" type="datetime" />
			<column name="Status" type="Char(1)" />
			<column name="Remarks" type="varchar(500)" />
		</createTable>
	</changeSet>

	<changeSet id="493" author="Shinde.b">
		<addColumn tableName="Findisbursementdetails_log">
			<column name="QuickDisb" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="494" author="Shinde.b">
		<sql>
			<![CDATA[
				update Findisbursementdetails_log set quickdisb = 0;
				update Findisbursementdetails_Temp set quickdisb = 0;
				update Findisbursementdetails set quickdisb = 0;
			 ]]>
		</sql>
	</changeSet>

	<changeSet id="494_post" author="Saikiran.v" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE Findisbursementdetails_log ADD CONSTRAINT DF_Findisbursementdetails_log_quickdisb DEFAULT 0 FOR quickdisb;
				ALTER TABLE Findisbursementdetails_Temp ADD CONSTRAINT DF_Findisbursementdetails_Temp_quickdisb DEFAULT 0 FOR quickdisb;
				ALTER TABLE Findisbursementdetails ADD CONSTRAINT DF_Findisbursementdetails_quickdisb DEFAULT 0 FOR quickdisb;
			]]>
		</sql>
	</changeSet>

	<changeSet id="494_post" author="Saikiran.v" dbms="postgresql, oracle">
		<addDefaultValue columnName="quickdisb" tableName="Findisbursementdetails_log" defaultValue="0" />
		<addDefaultValue columnName="quickdisb" tableName="Findisbursementdetails_Temp" defaultValue="0" />
		<addDefaultValue columnName="quickdisb" tableName="Findisbursementdetails" defaultValue="0" />
	</changeSet>

	<changeSet id="495" author="Shinde.b">
		<addColumn tableName="finAdvancePayments">
			<column name="realizationdate" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="496" author="Shinde.b">
		<addColumn tableName="finAdvancePayments_temp">
			<column name="realizationdate" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="497.1" author="Shinde.b">
		<createView viewName="FINADVANCEPAYMENTS_TVIEW" replaceIfExists="true">
		<![CDATA[
			SELECT t1.finreference,
			t1.paymentid,
			t1.paymentseq,
			t1.paymentdetail,
			t1.amttobereleased,
			t1.liabilityholdname,
			t1.transactionref,
			t1.beneficiaryname,
			t1.beneficiaryaccno,
			t1.reenterbeneficiaryaccno,
			t1.description,
			t1.paymenttype,
			t1.llreferenceno,
			t1.lldate,
			t1.custcontribution,
			t1.sellercontribution,
			t1.remarks,
			t1.disbdate,
			t1.disbseq,
			t1.version,
			t1.lastmntby,
			t1.lastmnton,
			t1.recordstatus,
			t1.rolecode,
			t1.nextrolecode,
			t1.taskid,
			t1.nexttaskid,
			t1.recordtype,
			t1.workflowid,
			t1.bankcode,
			t1.payableloc,
			t1.printingloc,
			t1.valuedate,
			t1.bankbranchid,
			t1.phonecountrycode,
			t1.phoneareacode,
			t1.phonenumber,
			t1.clearingdate,
			t1.status,
			t1.active,
			t1.inputdate,
			t1.disbccy,
			t1.poissued,
			t3.bankcode branchbankcode,
			t31.bankname branchbankname,
			t3.branchcode,
			t3.branchdesc,
			t3.ifsc,
			t3.city,
			t4.bankname,
			t1.partnerbankid,
			t5.partnerbankcode,
			t5.partnerbankname,
			t1.linkedtranid,
			t5.actype partnerbankactype,
			t5.accountno partnerbankac,
			t6.branchdesc printinglocdesc,
			t1.rejectreason,
			t1.realizationdate
			FROM finadvancepayments_temp t1
			LEFT JOIN bankbranches t3 ON t1.bankbranchid = t3.bankbranchid
			LEFT JOIN bmtbankdetail t31 ON t31.bankcode = t3.bankcode
			LEFT JOIN bmtbankdetail t4 ON t1.bankcode = t4.bankcode
			LEFT JOIN partnerbanks t5 ON t5.partnerbankid = t1.partnerbankid
			LEFT JOIN bankbranches t6 ON t6.branchcode = t1.printingloc
			]]>
		</createView>
	</changeSet>

	<changeSet id="498.1" author="Shinde.b">
		<createView viewName="FINADVANCEPAYMENTS_AVIEW" replaceIfExists="true">
		<![CDATA[
			SELECT t1.finreference,
			t1.paymentid,
			t1.paymentseq,
			t1.paymentdetail,
			t1.amttobereleased,
			t1.liabilityholdname,
			t1.transactionref,
			t1.beneficiaryname,
			t1.beneficiaryaccno,
			t1.reenterbeneficiaryaccno,
			t1.description,
			t1.paymenttype,
			t1.llreferenceno,
			t1.lldate,
			t1.custcontribution,
			t1.sellercontribution,
			t1.remarks,
			t1.disbdate,
			t1.disbseq,
			t1.version,
			t1.lastmntby,
			t1.lastmnton,
			t1.recordstatus,
			t1.rolecode,
			t1.nextrolecode,
			t1.taskid,
			t1.nexttaskid,
			t1.recordtype,
			t1.workflowid,
			t1.bankcode,
			t1.payableloc,
			t1.printingloc,
			t1.valuedate,
			t1.bankbranchid,
			t1.phonecountrycode,
			t1.phoneareacode,
			t1.phonenumber,
			t1.clearingdate,
			t1.status,
			t1.active,
			t1.inputdate,
			t1.disbccy,
			t1.poissued,
			t3.bankcode branchbankcode,
			t31.bankname branchbankname,
			t3.branchcode,
			t3.branchdesc,
			t3.ifsc,
			t3.city,
			t4.bankname,
			t1.partnerbankid,
			t5.partnerbankcode,
			t5.partnerbankname,
			t1.linkedtranid,
			t5.actype partnerbankactype,
			t5.accountno partnerbankac,
			t6.branchdesc printinglocdesc,
			t1.rejectreason,
			t1.realizationdate
			FROM finadvancepayments t1
			LEFT JOIN bankbranches t3 ON t1.bankbranchid = t3.bankbranchid
			LEFT JOIN bmtbankdetail t31 ON t31.bankcode = t3.bankcode
			LEFT JOIN bmtbankdetail t4 ON t1.bankcode = t4.bankcode
			LEFT JOIN partnerbanks t5 ON t5.partnerbankid = t1.partnerbankid
			LEFT JOIN bankbranches t6 ON t6.branchcode = t1.printingloc
			]]>
		</createView>
	</changeSet>

	<changeSet id="499.1" author="Shinde.b">
		<createView viewName="FINADVANCEPAYMENTS_VIEW" replaceIfExists="true">
		<![CDATA[
			SELECT t1.finreference,
			t1.paymentid,
			t1.paymentseq,
			t1.paymentdetail,
			t1.amttobereleased,
			t1.liabilityholdname,
			t1.transactionref,
			t1.beneficiaryname,
			t1.beneficiaryaccno,
			t1.reenterbeneficiaryaccno,
			t1.description,
			t1.paymenttype,
			t1.llreferenceno,
			t1.lldate,
			t1.custcontribution,
			t1.sellercontribution,
			t1.remarks,
			t1.disbdate,
			t1.disbseq,
			t1.version,
			t1.lastmntby,
			t1.lastmnton,
			t1.recordstatus,
			t1.rolecode,
			t1.nextrolecode,
			t1.taskid,
			t1.nexttaskid,
			t1.recordtype,
			t1.workflowid,
			t1.bankcode,
			t1.payableloc,
			t1.printingloc,
			t1.valuedate,
			t1.bankbranchid,
			t1.phonecountrycode,
			t1.phoneareacode,
			t1.phonenumber,
			t1.clearingdate,
			t1.status,
			t1.active,
			t1.inputdate,
			t1.disbccy,
			t1.poissued,
			t3.bankcode branchbankcode,
			t31.bankname branchbankname,
			t3.branchcode,
			t3.branchdesc,
			t3.ifsc,
			t3.city,
			t4.bankname,
			t1.partnerbankid,
			t5.partnerbankcode,
			t5.partnerbankname,
			t1.linkedtranid,
			t5.actype partnerbankactype,
			t5.accountno partnerbankac,
			t6.branchdesc printinglocdesc,
			t1.rejectreason,
			t1.realizationdate
			FROM finadvancepayments_temp t1
			LEFT JOIN bankbranches t3 ON t1.bankbranchid = t3.bankbranchid
			LEFT JOIN bmtbankdetail t31 ON t31.bankcode = t3.bankcode
			LEFT JOIN bmtbankdetail t4 ON t1.bankcode = t4.bankcode
			LEFT JOIN partnerbanks t5 ON t5.partnerbankid = t1.partnerbankid
			LEFT JOIN bankbranches t6 ON t6.branchcode = t1.printingloc
			UNION ALL
			SELECT t1.finreference,
			t1.paymentid,
			t1.paymentseq,
			t1.paymentdetail,
			t1.amttobereleased,
			t1.liabilityholdname,
			t1.transactionref,
			t1.beneficiaryname,
			t1.beneficiaryaccno,
			t1.reenterbeneficiaryaccno,
			t1.description,
			t1.paymenttype,
			t1.llreferenceno,
			t1.lldate,
			t1.custcontribution,
			t1.sellercontribution,
			t1.remarks,
			t1.disbdate,
			t1.disbseq,
			t1.version,
			t1.lastmntby,
			t1.lastmnton,
			t1.recordstatus,
			t1.rolecode,
			t1.nextrolecode,
			t1.taskid,
			t1.nexttaskid,
			t1.recordtype,
			t1.workflowid,
			t1.bankcode,
			t1.payableloc,
			t1.printingloc,
			t1.valuedate,
			t1.bankbranchid,
			t1.phonecountrycode,
			t1.phoneareacode,
			t1.phonenumber,
			t1.clearingdate,
			t1.status,
			t1.active,
			t1.inputdate,
			t1.disbccy,
			t1.poissued,
			t3.bankcode branchbankcode,
			t31.bankname branchbankname,
			t3.branchcode,
			t3.branchdesc,
			t3.ifsc,
			t3.city,
			t4.bankname,
			t1.partnerbankid,
			t5.partnerbankcode,
			t5.partnerbankname,
			t1.linkedtranid,
			t5.actype partnerbankactype,
			t5.accountno partnerbankac,
			t6.branchdesc printinglocdesc,
			t1.rejectreason,
			t1.realizationdate
			FROM finadvancepayments t1
			LEFT JOIN bankbranches t3 ON t1.bankbranchid = t3.bankbranchid
			LEFT JOIN bmtbankdetail t31 ON t31.bankcode = t3.bankcode
			LEFT JOIN bmtbankdetail t4 ON t1.bankcode = t4.bankcode
			LEFT JOIN partnerbanks t5 ON t5.partnerbankid = t1.partnerbankid
			LEFT JOIN bankbranches t6 ON t6.branchcode = t1.printingloc
			WHERE NOT (EXISTS ( SELECT 1
			FROM finadvancepayments_temp
			WHERE finadvancepayments_temp.finreference = t1.finreference AND finadvancepayments_temp.paymentseq = t1.paymentseq))
			]]>
		</createView>
	</changeSet>

	<changeSet id="500_pre" author="Shinde.b" dbms='oracle'>
		<dropColumn tableName="Disbursement_Requests" columnName="REALIZATION_DATE" />
	</changeSet>

	<changeSet id="500" author="Shinde.b">
		<addColumn tableName="FINAUTOAPPROVALDETAILS">
			<column name="DOWNLOADED_ON" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="501" author="Shinde.b">
		<addColumn tableName="Disbursement_Requests">
			<column name="DOWNLOADED_ON" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="502" author="Shinde.b">
		<addColumn tableName="Disbursement_Requests">
			<column name="REALIZATION_DATE" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="503.1" author="Shinde.b">
		<createView viewName="FINDISBURSEMENTDETAILS_AVIEW" replaceIfExists="true">
		<![CDATA[
			SELECT t1.finreference,
			t1.disbdate,
			t1.disbseq,
			t1.disbdesc,
			t1.disbaccountid,
			t1.disbamount,
			t1.disbreqdate,
			t1.disbdisbursed,
			t1.disbisactive,
			t1.disbremarks,
			t1.lastmntby,
			t1.lastmnton,
			t1.recordstatus,
			t1.rolecode,
			t1.nextrolecode,
			t1.taskid,
			t1.nexttaskid,
			t1.recordtype,
			t1.workflowid,
			t1.feechargeamt,
			t1.version,
			t1.disbstatus,
			t1.disbtype,
			t1.disbclaim,
			t1.disbexptype,
			t1.disbretperc,
			t1.disbretamount,
			t1.autodisb,
			t1.netadvdue,
			t1.netretdue,
			t1.disbretpaid,
			t1.retpaiddate,
			t2.expencetypename lovdescdisbexptype,
			t1.consultfeefrq,
			t1.consultfeestartdate,
			t1.consultfeeenddate,
			t1.contractorid,
			t1.insuranceamt,
			t1.instructionuid,
			t1.quickdisb
			FROM findisbursementdetails t1
			LEFT JOIN amtexpensetype t2 ON t2.expencetypeid = t1.disbexptype
			]]>
		</createView>
	</changeSet>

	<changeSet id="504.1.1" author="Shinde.b">
		<createView viewName="FINDISBURSEMENTDETAILS_TVIEW" replaceIfExists="true">
		<![CDATA[
			SELECT t1.finreference,
			t1.disbdate,
			t1.disbseq,
			t1.disbdesc,
			t1.disbaccountid,
			t1.disbamount,
			t1.disbreqdate,
			t1.disbdisbursed,
			t1.disbisactive,
			t1.disbremarks,
			t1.version,
			t1.lastmntby,
			t1.lastmnton,
			t1.recordstatus,
			t1.rolecode,
			t1.nextrolecode,
			t1.taskid,
			t1.nexttaskid,
			t1.recordtype,
			t1.workflowid,
			t1.feechargeamt,
			t1.disbstatus,
			t1.disbtype,
			t1.disbclaim,
			t1.disbexptype,
			t1.disbretperc,
			t1.disbretamount,
			t1.autodisb,
			t1.netadvdue,
			t1.netretdue,
			t1.disbretpaid,
			t1.retpaiddate,
			t2.expencetypename lovdescdisbexptype,
			t1.consultfeefrq,
			t1.consultfeestartdate,
			t1.consultfeeenddate,
			t1.contractorid,
			t1.insuranceamt,
			t1.instructionuid,
			t1.quickdisb
			FROM findisbursementdetails_temp t1
			LEFT JOIN amtexpensetype t2 ON t2.expencetypeid = t1.disbexptype
			]]>
		</createView>
	</changeSet>

	<changeSet id="505.1" author="Shinde.b">
		<createView viewName="FINADVANCEPAYMENTS_VIEW" replaceIfExists="true">
		<![CDATA[
			SELECT t1.finreference,
			t1.paymentid,
			t1.paymentseq,
			t1.paymentdetail,
			t1.amttobereleased,
			t1.liabilityholdname,
			t1.transactionref,
			t1.beneficiaryname,
			t1.beneficiaryaccno,
			t1.reenterbeneficiaryaccno,
			t1.description,
			t1.paymenttype,
			t1.llreferenceno,
			t1.lldate,
			t1.custcontribution,
			t1.sellercontribution,
			t1.remarks,
			t1.disbdate,
			t1.disbseq,
			t1.version,
			t1.lastmntby,
			t1.lastmnton,
			t1.recordstatus,
			t1.rolecode,
			t1.nextrolecode,
			t1.taskid,
			t1.nexttaskid,
			t1.recordtype,
			t1.workflowid,
			t1.bankcode,
			t1.payableloc,
			t1.printingloc,
			t1.valuedate,
			t1.bankbranchid,
			t1.phonecountrycode,
			t1.phoneareacode,
			t1.phonenumber,
			t1.clearingdate,
			t1.status,
			t1.active,
			t1.inputdate,
			t1.disbccy,
			t1.poissued,
			t3.bankcode branchbankcode,
			t31.bankname branchbankname,
			t3.branchcode,
			t3.branchdesc,
			t3.ifsc,
			t3.city,
			t4.bankname,
			t1.partnerbankid,
			t5.partnerbankcode,
			t5.partnerbankname,
			t1.linkedtranid,
			t5.actype partnerbankactype,
			t5.accountno partnerbankac,
			t6.branchdesc printinglocdesc,
			t1.rejectreason,
			t1.realizationdate
			FROM finadvancepayments_temp t1
			LEFT JOIN bankbranches t3 ON t1.bankbranchid = t3.bankbranchid
			LEFT JOIN bmtbankdetail t31 ON t31.bankcode = t3.bankcode
			LEFT JOIN bmtbankdetail t4 ON t1.bankcode = t4.bankcode
			LEFT JOIN partnerbanks t5 ON t5.partnerbankid = t1.partnerbankid
			LEFT JOIN bankbranches t6 ON t6.branchcode = t1.printingloc
			UNION ALL
			SELECT t1.finreference,
			t1.paymentid,
			t1.paymentseq,
			t1.paymentdetail,
			t1.amttobereleased,
			t1.liabilityholdname,
			t1.transactionref,
			t1.beneficiaryname,
			t1.beneficiaryaccno,
			t1.reenterbeneficiaryaccno,
			t1.description,
			t1.paymenttype,
			t1.llreferenceno,
			t1.lldate,
			t1.custcontribution,
			t1.sellercontribution,
			t1.remarks,
			t1.disbdate,
			t1.disbseq,
			t1.version,
			t1.lastmntby,
			t1.lastmnton,
			t1.recordstatus,
			t1.rolecode,
			t1.nextrolecode,
			t1.taskid,
			t1.nexttaskid,
			t1.recordtype,
			t1.workflowid,
			t1.bankcode,
			t1.payableloc,
			t1.printingloc,
			t1.valuedate,
			t1.bankbranchid,
			t1.phonecountrycode,
			t1.phoneareacode,
			t1.phonenumber,
			t1.clearingdate,
			t1.status,
			t1.active,
			t1.inputdate,
			t1.disbccy,
			t1.poissued,
			t3.bankcode branchbankcode,
			t31.bankname branchbankname,
			t3.branchcode,
			t3.branchdesc,
			t3.ifsc,
			t3.city,
			t4.bankname,
			t1.partnerbankid,
			t5.partnerbankcode,
			t5.partnerbankname,
			t1.linkedtranid,
			t5.actype partnerbankactype,
			t5.accountno partnerbankac,
			t6.branchdesc printinglocdesc,
			t1.rejectreason,
			t1.realizationdate
			FROM finadvancepayments t1
			LEFT JOIN bankbranches t3 ON t1.bankbranchid = t3.bankbranchid
			LEFT JOIN bmtbankdetail t31 ON t31.bankcode = t3.bankcode
			LEFT JOIN bmtbankdetail t4 ON t1.bankcode = t4.bankcode
			LEFT JOIN partnerbanks t5 ON t5.partnerbankid = t1.partnerbankid
			LEFT JOIN bankbranches t6 ON t6.branchcode = t1.printingloc
			WHERE NOT (EXISTS ( SELECT 1
			FROM finadvancepayments_temp
			WHERE finadvancepayments_temp.finreference = t1.finreference AND finadvancepayments_temp.paymentseq = t1.paymentseq))
			]]>
		</createView>
	</changeSet>

	<changeSet id="506" author="nagaraju.s">
		<sql>
			UPDATE SeqWorkFlowDetails SET SEQNO= (SELECT MAX(WorkflowId)+1
			FROM workflowdetails);
			UPDATE WorkFlowDetails SET
			WorkFlowActive= 0
			where WorkFlowType='CHANGECUSTOMER';
		</sql>
		<insert tableName="WorkFlowDetails">
			<column name="WorkFlowId" valueComputed="(select max(WorkFlowId) + 1 from WorkFlowDetails)" />
			<column name="WorkFlowType">CHANGECUSTOMER</column>
			<column name="WorkFlowSubType">CHANGECUSTOMER</column>
			<column name="WorkFlowDesc">CHANGE CUSTOMER</column>
			<column name="JsonDesign" type="nclob"><![CDATA[NULL]]></column>
			<column name="SvgDesign" type="nclob"><![CDATA[NULL]]></column>
			<column name="WorkFlowXml" type="clob"><![CDATA[NULL]]></column>
			<column name="WorkFlowRoles">CHANGECUSTOMER_MAKER;CHANGECUSTOMER_APPROVER
			</column>
			<column name="FirstTaskOwner">CHANGECUSTOMER_MAKER</column>
			<column name="WorkFlowActive">1</column>
			<column name="Version">0</column>
			<column name="LastMntBy">2457</column>
			<column name="LastMntOn" valueDate="current_timestamp" />
			<column name="RecordStatus">Null</column>
			<column name="RoleCode">Null</column>
			<column name="NextRoleCode">Null</column>
			<column name="TaskId">Null</column>
			<column name="NextTaskId">Null</column>
			<column name="RecordType">NULL</column>
		</insert>
	</changeSet>

	<changeSet id="507" author="nagaraju.s">
		<update tableName="WORKFLOWDETAILS">
			<column name="JSONDESIGN" type="NCLOB"><![CDATA[{"resourceId":1085,"properties":{"process_id":"CHANGECUSTOMER","name":"CHANGECUSTOMER","documentation":"CHANGE CUSTOMER","category":"","listenerclass":"","listenerentitytype":""},"stencil":{"id":"BPMNDiagram"},"childShapes":[{"resourceId":"startEvent1","properties":{"overrideid":"","name":"Start"},"stencil":{"id":"StartNoneEvent"},"childShapes":[],"outgoing":[{"resourceId":"sid-6861496F-5A0F-4B4C-A75E-AD4B5A881F78"}],"bounds":{"lowerRight":{"x":150,"y":190},"upperLeft":{"x":120,"y":160}},"dockers":[]},{"resourceId":"sid-E35ADDDC-B7A9-4300-908C-A94BFAE71398","properties":{"overrideid":"","name":"Approved"},"stencil":{"id":"EndNoneEvent"},"childShapes":[],"outgoing":[],"bounds":{"lowerRight":{"x":1183,"y":178},"upperLeft":{"x":1155,"y":150}},"dockers":[]},{"resourceId":"sid-05AC47A5-3EC2-4AB2-869E-AF32807FDCF5","properties":{"overrideid":"","name":"Change Customer Maker","usertaskassignment":{"assignment":{"type":"idm","idm":{"type":"user","assignee":{"email":"CHANGECUSTOMER_MAKER","firstName":"CHANGECUSTOMER_MAKER","fullName":"CHANGECUSTOMER_MAKER","id":"CHANGECUSTOMER_MAKER","roledesc":"WF for Change customer Maker","$$hashKey":"object:1672"}}}},"additionalforms":"","formkeydefinition":"","prioritydefinition":"Role Queue","baseactor":"","duedatedefinition":"","multiinstance_type":"None","isforcompensation":"false","allowrevert":""},"stencil":{"id":"UserTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-B8860F35-7051-4AFE-8BE8-01A7EFCEC38F"},{"resourceId":"sid-BCCEC665-678F-44E9-8B02-9EAB6A03BA1A"}],"bounds":{"lowerRight":{"x":385,"y":215},"upperLeft":{"x":285,"y":135}},"dockers":[]},{"resourceId":"sid-E99D6642-DF22-456A-842A-F06CC628D5CD","properties":{"overrideid":"","name":"Change Customer Approver","usertaskassignment":{"assignment":{"type":"idm","idm":{"type":"user","assignee":{"email":"CHANGECUSTOMER_APPROVER","firstName":"CHANGECUSTOMER_APPROVER","fullName":"CHANGECUSTOMER_APPROVER","id":"CHANGECUSTOMER_APPROVER","roledesc":"WF for Change customer Approver","$$hashKey":"object:3307"}}}},"additionalforms":"","formkeydefinition":"","prioritydefinition":"Role Queue","baseactor":"","duedatedefinition":"","multiinstance_type":"None","isforcompensation":"false","allowrevert":""},"stencil":{"id":"UserTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-2BF37082-45D0-450F-BA50-0C9F3666BE07"}],"bounds":{"lowerRight":{"x":670,"y":215},"upperLeft":{"x":570,"y":135}},"dockers":[]},{"resourceId":"sid-8C13CB03-D507-4142-87C2-77E8C94DED41","properties":{"overrideid":"","name":"","sequencefloworder":""},"stencil":{"id":"ExclusiveGateway"},"childShapes":[],"outgoing":[{"resourceId":"sid-D21642F9-EC64-4A11-BF0A-71F5327FDFB1"},{"resourceId":"sid-9B85A363-E06F-4F33-9976-9A418248E9D0"},{"resourceId":"sid-64226129-3CA8-4DAD-A157-A2A381696626"}],"bounds":{"lowerRight":{"x":820,"y":195},"upperLeft":{"x":780,"y":155}},"dockers":[]},{"resourceId":"sid-D874E2CE-499D-4DE1-9277-748EFD8EC8C3","properties":{"overrideid":"","name":"Cancel Process","rerunnable":true,"servicetaskexpression":"doReject","isforcompensation":"false","multiinstance_type":"None","parameters":""},"stencil":{"id":"rejectTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-D0EFB4F7-5529-4966-B394-5AD3F51EC6AB"}],"bounds":{"lowerRight":{"x":850,"y":395},"upperLeft":{"x":750,"y":315}},"dockers":[]},{"resourceId":"sid-6861496F-5A0F-4B4C-A75E-AD4B5A881F78","properties":{"overrideid":"","name":"","repruseaction":"false","conditionsequenceflow":"","defaultflow":"false","action":"","state":"","mandatenotes":"false","capturereasons":"false","typeofreason":"","constraint":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-05AC47A5-3EC2-4AB2-869E-AF32807FDCF5"}],"bounds":{"lowerRight":{"x":284.78125,"y":175},"upperLeft":{"x":150.0625,"y":175}},"dockers":[{"x":15,"y":15},{"x":50,"y":40}],"target":{"resourceId":"sid-05AC47A5-3EC2-4AB2-869E-AF32807FDCF5"}},{"resourceId":"sid-2BF37082-45D0-450F-BA50-0C9F3666BE07","properties":{"overrideid":"","name":"","repruseaction":"false","conditionsequenceflow":"","defaultflow":"false","action":"","state":"","mandatenotes":"false","capturereasons":"false","typeofreason":"","constraint":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-8C13CB03-D507-4142-87C2-77E8C94DED41"}],"bounds":{"lowerRight":{"x":780.015625,"y":175},"upperLeft":{"x":670.21875,"y":175}},"dockers":[{"x":50,"y":40},{"x":20,"y":20}],"target":{"resourceId":"sid-8C13CB03-D507-4142-87C2-77E8C94DED41"}},{"resourceId":"sid-C574127E-95CB-44A1-AB6C-5F79CB175041","properties":{"overrideid":"","name":"Rejected"},"stencil":{"id":"EndNoneEvent"},"childShapes":[],"outgoing":[],"bounds":{"lowerRight":{"x":1033,"y":369},"upperLeft":{"x":1005,"y":341}},"dockers":[]},{"resourceId":"sid-FA1A65C8-A47E-4353-91F6-72B50F1AA7CC","properties":{"overrideid":"","name":"","repruseaction":"false","conditionsequenceflow":"","defaultflow":"false","action":"","state":"","mandatenotes":"false","capturereasons":"false","typeofreason":"","showdiamondmarker":false,"constraint":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-E35ADDDC-B7A9-4300-908C-A94BFAE71398"}],"bounds":{"lowerRight":{"x":1154.5234375,"y":175},"upperLeft":{"x":1040.27978515625,"y":164}},"dockers":[{"x":90,"y":48},{"x":1100,"y":175},{"x":1100,"y":164},{"x":14,"y":14}],"target":{"resourceId":"sid-E35ADDDC-B7A9-4300-908C-A94BFAE71398"}},{"resourceId":"sid-D0EFB4F7-5529-4966-B394-5AD3F51EC6AB","properties":{"overrideid":"","name":"","repruseaction":"false","conditionsequenceflow":"","defaultflow":"false","action":"","state":"","mandatenotes":"false","capturereasons":"false","typeofreason":"","constraint":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-C574127E-95CB-44A1-AB6C-5F79CB175041"}],"bounds":{"lowerRight":{"x":1004.3125,"y":355},"upperLeft":{"x":850.6171875,"y":355}},"dockers":[{"x":50,"y":40},{"x":14,"y":14}],"target":{"resourceId":"sid-C574127E-95CB-44A1-AB6C-5F79CB175041"}},{"resourceId":"sid-D21642F9-EC64-4A11-BF0A-71F5327FDFB1","properties":{"overrideid":"","name":"Approve","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus=='Approved'"}},"defaultflow":"false","action":"Approve","state":"Approved","mandatenotes":"false","capturereasons":"false","typeofreason":"","showdiamondmarker":false,"constraint":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-5B384569-ABCC-4EE9-ACF7-5B68A1646513"}],"bounds":{"lowerRight":{"x":938.585205078125,"y":175.5},"upperLeft":{"x":820.40478515625,"y":175.5}},"dockers":[{"x":20.5,"y":20.5},{"x":34,"y":48.5}],"target":{"resourceId":"sid-5B384569-ABCC-4EE9-ACF7-5B68A1646513"}},{"resourceId":"sid-5B384569-ABCC-4EE9-ACF7-5B68A1646513","properties":{"overrideid":"","name":"Complete Process","rerunnable":true,"servicetaskexpression":"doApprove","isforcompensation":"false","multiinstance_type":"None"},"stencil":{"id":"approveTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-FA1A65C8-A47E-4353-91F6-72B50F1AA7CC"}],"bounds":{"lowerRight":{"x":1039.34375,"y":207},"upperLeft":{"x":939.34375,"y":127}},"dockers":[]},{"resourceId":"sid-64226129-3CA8-4DAD-A157-A2A381696626","properties":{"overrideid":"","name":"Resubmit","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus=='Resubmitted'"}},"defaultflow":"false","action":"Resubmit","state":"Resubmitted","mandatenotes":true,"capturereasons":"false","typeofreason":"","showdiamondmarker":false},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-05AC47A5-3EC2-4AB2-869E-AF32807FDCF5"}],"bounds":{"lowerRight":{"x":801.34375,"y":155.00393648558688},"upperLeft":{"x":337.34375,"y":65}},"dockers":[{"x":20.5,"y":20.5},{"x":801.34375,"y":67},{"x":337.34375,"y":65},{"x":52.34375,"y":18.79313243813533}],"target":{"resourceId":"sid-05AC47A5-3EC2-4AB2-869E-AF32807FDCF5"}},{"resourceId":"sid-B8860F35-7051-4AFE-8BE8-01A7EFCEC38F","properties":{"overrideid":"","name":"Submit","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus=='Submitted'"}},"defaultflow":"false","action":"Submit","state":"Submitted","mandatenotes":"false","capturereasons":"false","typeofreason":"","constraint":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-E99D6642-DF22-456A-842A-F06CC628D5CD"}],"bounds":{"lowerRight":{"x":569.458984375,"y":175},"upperLeft":{"x":385.541015625,"y":175}},"dockers":[{"x":50,"y":40},{"x":50,"y":40}],"target":{"resourceId":"sid-E99D6642-DF22-456A-842A-F06CC628D5CD"}},{"resourceId":"sid-BCCEC665-678F-44E9-8B02-9EAB6A03BA1A","properties":{"overrideid":"","name":"Cancel","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Cancelled'"}},"defaultflow":"false","action":"Cancel","state":"Cancelled","mandatenotes":true,"capturereasons":"false","typeofreason":"","showdiamondmarker":false},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-D874E2CE-499D-4DE1-9277-748EFD8EC8C3"}],"bounds":{"lowerRight":{"x":749.0353813171387,"y":358},"upperLeft":{"x":335,"y":215.31640625}},"dockers":[{"x":50,"y":40},{"x":335,"y":358},{"x":27.70440673828125,"y":43}],"target":{"resourceId":"sid-D874E2CE-499D-4DE1-9277-748EFD8EC8C3"}},{"resourceId":"sid-9B85A363-E06F-4F33-9976-9A418248E9D0","properties":{"overrideid":"","name":"Reject","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus=='Rejected'"}},"defaultflow":"false","action":"Reject","state":"Rejected","mandatenotes":true,"capturereasons":"false","typeofreason":"","constraint":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-D874E2CE-499D-4DE1-9277-748EFD8EC8C3"}],"bounds":{"lowerRight":{"x":800.4444801204861,"y":314.73437887952525},"upperLeft":{"x":800.1121605045139,"y":195.43163674547478}},"dockers":[{"x":20.5,"y":20.5},{"x":50,"y":40}],"target":{"resourceId":"sid-D874E2CE-499D-4DE1-9277-748EFD8EC8C3"}}],"bounds":{"lowerRight":{"x":1283,"y":1050},"upperLeft":{"x":0,"y":0}},"stencilset":{"url":"stencilsets/bpmn2.0/bpmn2.0.json","namespace":"http://b3mn.org/stencilset/bpmn2.0#"},"ssextensions":[]}]]></column>
			<column name="WORKFLOWXML" type="CLOB"><![CDATA[<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:activiti="http://activiti.org/bpmn" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI" typeLanguage="http://www.w3.org/2001/XMLSchema" expressionLanguage="http://www.w3.org/1999/XPath" targetNamespace="http://activiti.org/test">
  <process id="CHANGECUSTOMER" name="CHANGECUSTOMER" isExecutable="true">
    <documentation>CHANGE CUSTOMER</documentation>
    <startEvent id="startEvent1" name="Start"/>
    <endEvent id="sid-E35ADDDC-B7A9-4300-908C-A94BFAE71398" name="Approved"/>
    <userTask id="sid-05AC47A5-3EC2-4AB2-869E-AF32807FDCF5" name="Change Customer Maker" activiti:actor="CHANGECUSTOMER_MAKER" activiti:assignmentLevel="Role Queue"/>
    <userTask id="sid-E99D6642-DF22-456A-842A-F06CC628D5CD" name="Change Customer Approver" activiti:actor="CHANGECUSTOMER_APPROVER" activiti:assignmentLevel="Role Queue"/>
    <exclusiveGateway id="sid-8C13CB03-D507-4142-87C2-77E8C94DED41"/>
    <serviceTask id="sid-D874E2CE-499D-4DE1-9277-748EFD8EC8C3" name="Cancel Process" activiti:operation="doReject" activiti:rerunnable="true"/>
    <sequenceFlow id="sid-6861496F-5A0F-4B4C-A75E-AD4B5A881F78" sourceRef="startEvent1" targetRef="sid-05AC47A5-3EC2-4AB2-869E-AF32807FDCF5" representsUserAction="false" mandateNotes="false" captureReasons="false"/>
    <sequenceFlow id="sid-2BF37082-45D0-450F-BA50-0C9F3666BE07" sourceRef="sid-E99D6642-DF22-456A-842A-F06CC628D5CD" targetRef="sid-8C13CB03-D507-4142-87C2-77E8C94DED41" representsUserAction="false" mandateNotes="false" captureReasons="false"/>
    <endEvent id="sid-C574127E-95CB-44A1-AB6C-5F79CB175041" name="Rejected"/>
    <sequenceFlow id="sid-FA1A65C8-A47E-4353-91F6-72B50F1AA7CC" sourceRef="sid-5B384569-ABCC-4EE9-ACF7-5B68A1646513" targetRef="sid-E35ADDDC-B7A9-4300-908C-A94BFAE71398" representsUserAction="false" mandateNotes="false" captureReasons="false"/>
    <sequenceFlow id="sid-D0EFB4F7-5529-4966-B394-5AD3F51EC6AB" sourceRef="sid-D874E2CE-499D-4DE1-9277-748EFD8EC8C3" targetRef="sid-C574127E-95CB-44A1-AB6C-5F79CB175041" representsUserAction="false" mandateNotes="false" captureReasons="false"/>
    <sequenceFlow id="sid-D21642F9-EC64-4A11-BF0A-71F5327FDFB1" name="Approve" sourceRef="sid-8C13CB03-D507-4142-87C2-77E8C94DED41" targetRef="sid-5B384569-ABCC-4EE9-ACF7-5B68A1646513" action="Approve" state="Approved" representsUserAction="true" mandateNotes="false" captureReasons="false">
      <conditionExpression xsi:type="tFormalExpression">vo.recordStatus=='Approved'></conditionExpression>
    </sequenceFlow>
    <serviceTask id="sid-5B384569-ABCC-4EE9-ACF7-5B68A1646513" name="Complete Process" activiti:operation="doApprove" activiti:rerunnable="true"/>
    <sequenceFlow id="sid-64226129-3CA8-4DAD-A157-A2A381696626" name="Resubmit" sourceRef="sid-8C13CB03-D507-4142-87C2-77E8C94DED41" targetRef="sid-05AC47A5-3EC2-4AB2-869E-AF32807FDCF5" action="Resubmit" state="Resubmitted" representsUserAction="true" mandateNotes="true" captureReasons="false">
      <conditionExpression xsi:type="tFormalExpression">vo.recordStatus=='Resubmitted'></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-B8860F35-7051-4AFE-8BE8-01A7EFCEC38F" name="Submit" sourceRef="sid-05AC47A5-3EC2-4AB2-869E-AF32807FDCF5" targetRef="sid-E99D6642-DF22-456A-842A-F06CC628D5CD" action="Submit" state="Submitted" representsUserAction="true" mandateNotes="false" captureReasons="false">
      <conditionExpression xsi:type="tFormalExpression">vo.recordStatus=='Submitted'></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-BCCEC665-678F-44E9-8B02-9EAB6A03BA1A" name="Cancel" sourceRef="sid-05AC47A5-3EC2-4AB2-869E-AF32807FDCF5" targetRef="sid-D874E2CE-499D-4DE1-9277-748EFD8EC8C3" action="Cancel" state="Cancelled" representsUserAction="true" mandateNotes="true" captureReasons="false">
      <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Cancelled'></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-9B85A363-E06F-4F33-9976-9A418248E9D0" name="Reject" sourceRef="sid-8C13CB03-D507-4142-87C2-77E8C94DED41" targetRef="sid-D874E2CE-499D-4DE1-9277-748EFD8EC8C3" action="Reject" state="Rejected" representsUserAction="true" mandateNotes="true" captureReasons="false">
      <conditionExpression xsi:type="tFormalExpression">vo.recordStatus=='Rejected'></conditionExpression>
    </sequenceFlow>
  </process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_CHANGECUSTOMER">
    <bpmndi:BPMNPlane bpmnElement="CHANGECUSTOMER" id="BPMNPlane_CHANGECUSTOMER">
      <bpmndi:BPMNShape bpmnElement="startEvent1" id="BPMNShape_startEvent1">
        <omgdc:Bounds height="30.0" width="30.0" x="120.0" y="160.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-E35ADDDC-B7A9-4300-908C-A94BFAE71398" id="BPMNShape_sid-E35ADDDC-B7A9-4300-908C-A94BFAE71398">
        <omgdc:Bounds height="28.0" width="28.0" x="1155.0" y="150.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-05AC47A5-3EC2-4AB2-869E-AF32807FDCF5" id="BPMNShape_sid-05AC47A5-3EC2-4AB2-869E-AF32807FDCF5">
        <omgdc:Bounds height="80.0" width="100.0" x="285.0" y="135.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-E99D6642-DF22-456A-842A-F06CC628D5CD" id="BPMNShape_sid-E99D6642-DF22-456A-842A-F06CC628D5CD">
        <omgdc:Bounds height="80.0" width="100.0" x="570.0" y="135.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-8C13CB03-D507-4142-87C2-77E8C94DED41" id="BPMNShape_sid-8C13CB03-D507-4142-87C2-77E8C94DED41">
        <omgdc:Bounds height="40.0" width="40.0" x="780.0" y="155.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-D874E2CE-499D-4DE1-9277-748EFD8EC8C3" id="BPMNShape_sid-D874E2CE-499D-4DE1-9277-748EFD8EC8C3">
        <omgdc:Bounds height="80.0" width="100.0" x="750.0" y="315.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-C574127E-95CB-44A1-AB6C-5F79CB175041" id="BPMNShape_sid-C574127E-95CB-44A1-AB6C-5F79CB175041">
        <omgdc:Bounds height="28.0" width="28.0" x="1005.0" y="341.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-5B384569-ABCC-4EE9-ACF7-5B68A1646513" id="BPMNShape_sid-5B384569-ABCC-4EE9-ACF7-5B68A1646513">
        <omgdc:Bounds height="80.0" width="100.0" x="939.34375" y="127.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge bpmnElement="sid-2BF37082-45D0-450F-BA50-0C9F3666BE07" id="BPMNEdge_sid-2BF37082-45D0-450F-BA50-0C9F3666BE07">
        <omgdi:waypoint x="670.0" y="175.0"/>
        <omgdi:waypoint x="780.0" y="175.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-64226129-3CA8-4DAD-A157-A2A381696626" id="BPMNEdge_sid-64226129-3CA8-4DAD-A157-A2A381696626">
        <omgdi:waypoint x="800.6543298085168" y="155.6543298085167"/>
        <omgdi:waypoint x="801.34375" y="67.0"/>
        <omgdi:waypoint x="337.34375" y="65.0"/>
        <omgdi:waypoint x="337.34375" y="135.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-6861496F-5A0F-4B4C-A75E-AD4B5A881F78" id="BPMNEdge_sid-6861496F-5A0F-4B4C-A75E-AD4B5A881F78">
        <omgdi:waypoint x="150.0" y="175.0"/>
        <omgdi:waypoint x="285.0" y="175.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-D0EFB4F7-5529-4966-B394-5AD3F51EC6AB" id="BPMNEdge_sid-D0EFB4F7-5529-4966-B394-5AD3F51EC6AB">
        <omgdi:waypoint x="850.0" y="355.0"/>
        <omgdi:waypoint x="1005.0" y="355.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-BCCEC665-678F-44E9-8B02-9EAB6A03BA1A" id="BPMNEdge_sid-BCCEC665-678F-44E9-8B02-9EAB6A03BA1A">
        <omgdi:waypoint x="335.0" y="215.0"/>
        <omgdi:waypoint x="335.0" y="358.0"/>
        <omgdi:waypoint x="750.0" y="358.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-FA1A65C8-A47E-4353-91F6-72B50F1AA7CC" id="BPMNEdge_sid-FA1A65C8-A47E-4353-91F6-72B50F1AA7CC">
        <omgdi:waypoint x="1039.34375" y="175.0"/>
        <omgdi:waypoint x="1100.0" y="175.0"/>
        <omgdi:waypoint x="1100.0" y="164.0"/>
        <omgdi:waypoint x="1155.0" y="164.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-9B85A363-E06F-4F33-9976-9A418248E9D0" id="BPMNEdge_sid-9B85A363-E06F-4F33-9976-9A418248E9D0">
        <omgdi:waypoint x="800.4469273743017" y="194.55307262569832"/>
        <omgdi:waypoint x="800.1114206128134" y="315.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-D21642F9-EC64-4A11-BF0A-71F5327FDFB1" id="BPMNEdge_sid-D21642F9-EC64-4A11-BF0A-71F5327FDFB1">
        <omgdi:waypoint x="819.5" y="175.5"/>
        <omgdi:waypoint x="939.34375" y="175.5"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-B8860F35-7051-4AFE-8BE8-01A7EFCEC38F" id="BPMNEdge_sid-B8860F35-7051-4AFE-8BE8-01A7EFCEC38F">
        <omgdi:waypoint x="385.0" y="175.0"/>
        <omgdi:waypoint x="570.0" y="175.0"/>
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</definitions>]]></column>
			<where>workflowtype='CHANGECUSTOMER' and workflowactive=1
			</where>
		</update>
		<sql>
			UPDATE SeqWorkFlowDetails SET SEQNO= (SELECT MAX(WorkflowId)+1
			FROM workflowdetails);
		</sql>
	</changeSet>

	<changeSet id="507" author="sudheer.t">
		<sql>
			<![CDATA[
				  delete from DedupFields where QueryModule='CORPBlackList' and fieldName ='CustFName';
				  delete from DedupFields where QueryModule='CORPBlackList' and fieldName ='CustLName';
				  
				  delete from DedupFields where QueryModule='SMEBlackList' and fieldName ='CustFName';
				  delete from DedupFields where QueryModule='SMEBlackList' and fieldName ='CustLName';
				                
	              delete from DedupFields where QueryModule='SMEBlackList' and fieldName ='CustShrtName';
	              delete from DedupFields where QueryModule='CORPBlackList' and fieldName ='CustShrtName';
	              
	              delete from DedupFields where QueryModule='SMEBlackList' and fieldName ='CustDOB';
	              delete from DedupFields where QueryModule='CORPBlackList' and fieldName ='CustDOB';
	              
	              delete from DedupFields where QueryModule='SMEBlackList' and fieldName ='MobileNumber';
	              delete from DedupFields where QueryModule='CORPBlackList' and fieldName ='MobileNumber';
	              
	              delete from DedupFields where QueryModule='SMEBlackList' and fieldName ='CustCRCPR';
	              delete from DedupFields where QueryModule='CORPBlackList' and fieldName ='CustCRCPR';
	                            
	              INSERT INTO DedupFields  (FieldName, FieldDesc, FieldControl, QueryModule, Version, LastMntBy, LastMntOn ,RecordStatus, RoleCode, NextRoleCode, TaskId, NextTaskId, RecordType, WorkflowId) VALUES ('CustShrtName', 'Company Name', 'varchar', 'SMEBlackList', 1, 1000,CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
	              INSERT INTO DedupFields  (FieldName, FieldDesc, FieldControl, QueryModule, Version, LastMntBy, LastMntOn ,RecordStatus, RoleCode, NextRoleCode, TaskId, NextTaskId, RecordType, WorkflowId) VALUES ('CustShrtName', 'Company Name', 'varchar', 'CORPBlackList', 1, 1000,CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
	              
	              INSERT INTO DedupFields  (FieldName, FieldDesc, FieldControl, QueryModule, Version, LastMntBy, LastMntOn ,RecordStatus, RoleCode, NextRoleCode, TaskId, NextTaskId, RecordType, WorkflowId) VALUES ('CustDOB', 'Date of Incorporation', 'varchar', 'SMEBlackList', 1, 1000,CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
	              INSERT INTO DedupFields  (FieldName, FieldDesc, FieldControl, QueryModule, Version, LastMntBy, LastMntOn ,RecordStatus, RoleCode, NextRoleCode, TaskId, NextTaskId, RecordType, WorkflowId) VALUES ('CustDOB', 'Date of Incorporation', 'varchar', 'CORPBlackList', 1, 1000,CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
	              
	              INSERT INTO DedupFields  (FieldName, FieldDesc, FieldControl, QueryModule, Version, LastMntBy, LastMntOn ,RecordStatus, RoleCode, NextRoleCode, TaskId, NextTaskId, RecordType, WorkflowId) VALUES ('MobileNumber', 'Phone Number', 'varchar', 'SMEBlackList', 1, 1000,CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
	              INSERT INTO DedupFields  (FieldName, FieldDesc, FieldControl, QueryModule, Version, LastMntBy, LastMntOn ,RecordStatus, RoleCode, NextRoleCode, TaskId, NextTaskId, RecordType, WorkflowId) VALUES ('MobileNumber', 'Phone Number', 'varchar', 'CORPBlackList', 1, 1000,CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
	              
	              INSERT INTO DedupFields  (FieldName, FieldDesc, FieldControl, QueryModule, Version, LastMntBy, LastMntOn ,RecordStatus, RoleCode, NextRoleCode, TaskId, NextTaskId, RecordType, WorkflowId) VALUES ('CustCRCPR', 'PAN Number', 'varchar', 'SMEBlackList', 1, 1000,CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
	              INSERT INTO DedupFields  (FieldName, FieldDesc, FieldControl, QueryModule, Version, LastMntBy, LastMntOn ,RecordStatus, RoleCode, NextRoleCode, TaskId, NextTaskId, RecordType, WorkflowId) VALUES ('CustCRCPR', 'PAN Number', 'varchar', 'CORPBlackList', 1, 1000,CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);                
			]]>
		</sql>
	</changeSet>
	<changeSet id="508" author="manoj.p">
		<addColumn tableName="CREDITREVIEWCONFIG">
			<column name="FieldKeys" type="blob" />
		</addColumn>
	</changeSet>

	<changeSet id="509" author="murthy">
		<sql>
            <![CDATA[
            	DELETE FROM RBFIELDDETAILS WHERE RBMODULE = 'FEES' AND RBEVENT = 'ADDDBSP' AND RBFLDNAME = 'fm_eligibilityMethod';
				INSERT INTO RBFieldDetails values  ('FEES', 'ADDDBSP', 'fm_eligibilityMethod', 'Eligibility Method [ADDDBSP]', 'bigint', 0, 1, 1, 'RMTLovFieldDetail', 'dbvalue', 'EligibilityMethod');
	  		 ]]>
		</sql>
	</changeSet>

	<changeSet id="510.1" author="vijaya.a">
		<createView viewName="VERIFICATION_FI_VIEW" replaceIfExists="true">
		<![CDATA[
			SELECT fi.verificationid,
			flv.finType,
			fi.agentcode,
			fi.agentname,
			fi.type,
			fi.verifieddate,
			fi.status,
			fi.reason,
			r1.code AS reasoncode,
			r1.description AS reasondesc,
			fi.summaryremarks,
			fi.version,
			fi.lastmntby,
			fi.lastmnton,
			fi.recordstatus,
			fi.rolecode,
			fi.nextrolecode,
			fi.taskid,
			fi.nexttaskid,
			fi.recordtype,
			fi.workflowid,
			fi.addresstype,
			c.custShrtName As name,
			fi.housenumber,
			fi.flatnumber,
			fi.street,
			fi.addressline1,
			fi.addressline2,
			fi.addressline3,
			fi.addressline4,
			fi.addressline5,
			fi.country,
			fi.province,
			fi.city,
			fi.contactnumber1,
			fi.contactnumber2,
			fi.pobox,
			fi.zipcode,
			fi.ownershipstatus,
			fi.yearsatpresentaddress,
			fi.personmet,
			fi.relationship,
			r2.prelationdesc AS lovrelationdesc,
			fi.contactnumber,
			fi.neighbourhoodfeedback,
			fi.livingstandard,
			fi.negativecheck,
			fi.noofattempts,
			fi.observationremarks,
			c.custcif AS cif,
			v.custid,
			v.keyreference,
			v.createdon,
			v.agency,
			v.verificationdate,
			a.dealername AS agencyname,
			v.reinitid,
			a.dealertype,
			r1.reasontypecode,
			country.countrydesc,
			p.cpprovincename as provinceDesc,
			city.pccityname as cityDesc
			FROM verification_fi_temp fi
			JOIN verifications v ON v.id = fi.verificationid
			left join amtvehicledealer a ON a.dealerid = v.agency
			JOIN bmtcountries country on country.countrycode = fi.country
			JOIN RMTCountryVsProvince p on p.cpprovince = fi.province
			JOIN RMTProvinceVsCity city on city.pccity = fi.city
			LEFT JOIN customers c ON c.custCif = v.Reference
			LEFT JOIN reasons_aview r1 ON r1.id = fi.reason
			LEFT JOIN bmtprelationcodes r2 ON r2.prelationcode = fi.relationship
			LEFT JOIN financemain_view flv ON flv.finreference = v.keyreference
			UNION ALL
			SELECT fi.verificationid,
			flv.finType,
			fi.agentcode,
			fi.agentname,
			fi.type,
			fi.verifieddate,
			fi.status,
			fi.reason,
			r1.code AS reasoncode,
			r1.description AS reasondesc,
			fi.summaryremarks,
			fi.version,
			fi.lastmntby,
			fi.lastmnton,
			fi.recordstatus,
			fi.rolecode,
			fi.nextrolecode,
			fi.taskid,
			fi.nexttaskid,
			fi.recordtype,
			fi.workflowid,
			fi.addresstype,
			c.custShrtName As name,
			fi.housenumber,
			fi.flatnumber,
			fi.street,
			fi.addressline1,
			fi.addressline2,
			fi.addressline3,
			fi.addressline4,
			fi.addressline5,
			fi.country,
			fi.province,
			fi.city,
			fi.contactnumber1,
			fi.contactnumber2,
			fi.pobox,
			fi.zipcode,
			fi.ownershipstatus,
			fi.yearsatpresentaddress,
			fi.personmet,
			fi.relationship,
			r2.prelationdesc AS lovrelationdesc,
			fi.contactnumber,
			fi.neighbourhoodfeedback,
			fi.livingstandard,
			fi.negativecheck,
			fi.noofattempts,
			fi.observationremarks,
			c.custcif AS cif,
			v.custid,
			v.keyreference,
			v.createdon,
			v.agency,
			v.verificationdate,
			a.dealername AS agencyname,
			v.reinitid,
			a.dealertype,
			r1.reasontypecode,
			country.countrydesc,
			p.cpprovincename as provinceDesc,
			city.pccityname as cityDesc
			FROM verification_fi fi
			JOIN verifications v ON v.id = fi.verificationid
			left join amtvehicledealer a ON a.dealerid = v.agency
			JOIN bmtcountries country on country.countrycode = fi.country
			JOIN RMTCountryVsProvince p on p.cpprovince = fi.province
			JOIN RMTProvinceVsCity city on city.pccity = fi.city
			LEFT JOIN customers c ON c.custCif = v.Reference
			LEFT JOIN reasons_aview r1 ON r1.id = fi.reason
			LEFT JOIN bmtprelationcodes r2 ON r2.prelationcode = fi.relationship
			LEFT JOIN financemain_view flv ON flv.finreference = v.keyreference
			WHERE NOT (EXISTS ( SELECT 1
			FROM verification_fi_temp
			WHERE verification_fi_temp.verificationid = fi.verificationid))
			]]>
		</createView>
	</changeSet>

	<changeSet id="511" author="saiteja.r" dbms="postgresql,mssql">
		<modifyDataType tableName="creditreviewconfig" columnName="fieldkeys" newDataType="clob" />
	</changeSet>

	<changeSet id="511.1_pre" author="saiteja.r" dbms="oracle">
		<sql>
			alter table creditreviewconfig drop column fieldkeys;
		</sql>
	</changeSet>


	<changeSet id="511.2" author="saiteja.r" dbms="oracle">
		<sql>
			alter table creditreviewconfig add fieldkeys clob;
		</sql>
	</changeSet>

	<changeSet id="512" author="Manoj.P">
		<sql>
			<![CDATA[
				delete from smtparameters where sysparmcode = 'CREDITREVIEW_TAB';
				INSERT INTO SMTparameters (SysParmCode, SysParmDesc, SysParmType, SysParmMaint, SysParmValue, SysParmLength, SysParmDec,SysParmList, SysParmValdMod, SysParmDescription, Version, LastMntBy, LastMntOn, RecordStatus, RoleCode, NextRoleCode, TaskId, NexttaskId, RecordType, WorkflowId) VALUES ('CREDITREVIEW_TAB', 'Credit Review Tab', 'String', '0', 'OLDCREDITREVIEWTAB', 50, 0, NULL, NULL, '', 1, 1000, CURRENT_TIMESTAMP,'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="513.1" author="vijaya.a">
		<createView viewName="FINRECEIPTHEADER_FCVIEW" replaceIfExists="true">
		<![CDATA[
			SELECT T1.RECEIPTID,
			T1.RECEIPTDATE,
			T1.RECEIPTTYPE,
			T1.RECAGAINST,
			T1.REFERENCE,
			T1.RECEIPTPURPOSE,
			T1.RECEIPTMODE,
			T1.EXCESSADJUSTTO,
			T1.ALLOCATIONTYPE,
			T1.RECEIPTAMOUNT,
			T1.EFFECTSCHDMETHOD,
			T1.RECEIPTMODESTATUS,
			T1.SUBRECEIPTMODE,
			T1.RECEIPTCHANNEL,
			T1.RECEIVEDFROM,
			T1.PANNUMBER,
			T1.COLLECTIONAGENTID,
			T1.VERSION,
			T1.LASTMNTBY,
			T1.LASTMNTON,
			T1.RECORDSTATUS,
			T1.ROLECODE,
			T1.NEXTROLECODE,
			T1.TASKID,
			T1.NEXTTASKID,
			T1.RECORDTYPE,
			T1.WORKFLOWID,
			T2.FINTYPE,
			T2.FINBRANCH,
			T3.CUSTCIF,
			T3.CUSTSHRTNAME,
			T2.FINCCY,
			T1.REALIZATIONDATE,
			T1.CANCELREASON,
			T4.FINTYPEDESC,
			T6.BRANCHDESC FINBRANCHDESC,
			T5.CCYDESC FINCCYDESC,
			T7.REJECTDESC CANCELREASONDESC,
			COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
			T2.SCHEDULEMETHOD,
			T2.PROFITDAYSBASIS PFTDAYSBASIS,
			T1.WAVIEDAMT,
			COALESCE(T3.CUSTID, 0) CUSTID,
			T1.TOTFEEAMOUNT,
			T1.BOUNCEDATE,
			T1.REMARKS,
			T1.RCDMAINTAINSTS,
			T1.DEPOSITPROCESS,
			T1.DEPOSITBRANCH,
			T1.LPIAMOUNT,
			T1.LPPAMOUNT,
			T1.GSTLPIAMOUNT,
			T1.GSTLPPAMOUNT,
			T1.GDRAVAILABLE,
			T1.RELEASETYPE,
			T1.THIRDPARTYNAME,
			T1.THIRDPARTYMOBILENUM,
			T2.PRODUCTCATEGORY,
			T2.PROMOTIONCODE,
			(
			CASE
			WHEN T8.PAYMENTTYPE IN ('CHEQUE', 'DD')
			THEN T8.FAVOURNUMBER
			ELSE T8.TRANSACTIONREF
			END ) TRANSACTIONREF,
			T2.NEXTREPAYRVWDATE,
			T1.CASHIERBRANCH,
			T1.INITIATEDATE,
			T1.INSTRUCTIONUID,
			T1.FINDIVISION,
			T1.POSTBRANCH,
			T10.DIVISIONCODEDESC FINDIVISIONDESC,
			T11.BRANCHDESC POSTBRANCHDESC,
			T12.BRANCHDESC CASHIERBRANCHDESC,
			T10.ENTITYCODE,
			T9.CODE COLLECTIONAGENTCODE,
			T9.DESCRIPTION COLLECTIONAGENTDESC,
			T1.MODULE,
			T1.EXTREFERENCE,
			T13.CUSTCIF CUSTOMERCIF,
			T13.CUSTSHRTNAME CUSTOMERNAME,
			T1.ACTFINRECEIPT,
			T1.EARLYSETTLEMENTREASON
			FROM FINRECEIPTHEADER_TEMP T1
			LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.REFERENCE = T2.FINREFERENCE
			LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
			LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
			LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
			LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
			LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
			LEFT JOIN FINRECEIPTDETAIL T8 ON T1.RECEIPTID = T8.RECEIPTID AND T1.RECEIPTMODE = T8.PAYMENTTYPE
			LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
			LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
			LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
			LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
			LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
			UNION ALL
			SELECT
			T1.RECEIPTID,
			T1.RECEIPTDATE,
			T1.RECEIPTTYPE,
			T1.RECAGAINST,
			T1.REFERENCE,
			T1.RECEIPTPURPOSE,
			T1.RECEIPTMODE,
			T1.EXCESSADJUSTTO,
			T1.ALLOCATIONTYPE,
			T1.RECEIPTAMOUNT,
			T1.EFFECTSCHDMETHOD,
			T1.RECEIPTMODESTATUS,
			T1.SUBRECEIPTMODE,
			T1.RECEIPTCHANNEL,
			T1.RECEIVEDFROM,
			T1.PANNUMBER,
			T1.COLLECTIONAGENTID,
			T1.VERSION,
			T1.LASTMNTBY,
			T1.LASTMNTON,
			T1.RECORDSTATUS,
			T1.ROLECODE,
			T1.NEXTROLECODE,
			T1.TASKID,
			T1.NEXTTASKID,
			T1.RECORDTYPE,
			T1.WORKFLOWID,
			T2.FINTYPE,
			T2.FINBRANCH,
			T3.CUSTCIF,
			T3.CUSTSHRTNAME,
			T2.FINCCY,
			T1.REALIZATIONDATE,
			T1.CANCELREASON,
			T4.FINTYPEDESC,
			T6.BRANCHDESC FINBRANCHDESC,
			T5.CCYDESC FINCCYDESC,
			T7.REJECTDESC CANCELREASONDESC,
			COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
			T2.SCHEDULEMETHOD,
			T2.PROFITDAYSBASIS PFTDAYSBASIS,
			T1.WAVIEDAMT,
			COALESCE(T3.CUSTID, 0) CUSTID,
			T1.TOTFEEAMOUNT,
			T1.BOUNCEDATE,
			T1.REMARKS,
			T1.RCDMAINTAINSTS,
			T1.DEPOSITPROCESS,
			T1.DEPOSITBRANCH,
			T1.LPIAMOUNT,
			T1.LPPAMOUNT,
			T1.GSTLPIAMOUNT,
			T1.GSTLPPAMOUNT,
			T1.GDRAVAILABLE,
			T1.RELEASETYPE,
			T1.THIRDPARTYNAME,
			T1.THIRDPARTYMOBILENUM,
			T2.PRODUCTCATEGORY,
			T2.PROMOTIONCODE,
			(
			CASE
			WHEN T8.PAYMENTTYPE IN ('CHEQUE', 'DD')
			THEN T8.FAVOURNUMBER
			ELSE T8.TRANSACTIONREF
			END) TRANSACTIONREF,
			T2.NEXTREPAYRVWDATE,
			T1.CASHIERBRANCH,
			T1.INITIATEDATE,
			T1.INSTRUCTIONUID,
			T1.FINDIVISION,
			T1.POSTBRANCH,
			T10.DIVISIONCODEDESC FINDIVISIONDESC,
			T11.BRANCHDESC POSTBRANCHDESC,
			T12.BRANCHDESC CASHIERBRANCHDESC,
			T10.ENTITYCODE,
			T9.CODE COLLECTIONAGENTCODE,
			T9.DESCRIPTION COLLECTIONAGENTDESC,
			T1.MODULE,
			T1.EXTREFERENCE,
			T13.CUSTCIF CUSTOMERCIF,
			T13.CUSTSHRTNAME CUSTOMERNAME,
			T1.ACTFINRECEIPT,
			T1.EARLYSETTLEMENTREASON
			FROM FINRECEIPTHEADER T1
			LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.REFERENCE = T2.FINREFERENCE
			LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
			LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
			LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
			LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
			LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
			LEFT JOIN FINRECEIPTDETAIL T8 ON T1.RECEIPTID = T8.RECEIPTID AND T1.RECEIPTMODE = T8.PAYMENTTYPE
			LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
			LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
			LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
			LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
			LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
			WHERE NOT EXISTS
			( SELECT 1 FROM FINRECEIPTHEADER_TEMP WHERE RECEIPTID = T1.RECEIPTID
			)
			]]>
		</createView>
	</changeSet>

	<changeSet id="514" author="Saikrishna.K">
		<createTable tableName="CUST_KYC_VALIDATION">
			<column name="ID" type="bigint" autoIncrement="true" />
			<column name="TYPE" type="varchar(250)" />
			<column name="DOCUMENT_NUMBER" type="varchar(250)" />
			<column name="DOCUMENT_NAME" type="varchar(250)" />
			<column name="ISSUED_COUNTRY" type="varchar(3)" />
			<column name="ISSUED_AUTHORITY" type="varchar(250)" />
			<column name="ISSUED_ON" type="datetime" />
			<column name="EXPIRY_DATE" type="datetime" />
			<column name="VERIFICATION_ON" type="datetime" />
			<column name="VERIFIED" type="boolean" />
			<column name="REMARKS" type="varchar(500)" />
		</createTable>
	</changeSet>

	<changeSet id="514.1.1_post" author="Saikrishna.K">
		<sql>
			<![CDATA[
				UPDATE CUST_KYC_VALIDATION set VERIFIED = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="514.1_post" author="Varaprasad.K" dbms="postgresql, oracle">
		<addDefaultValue columnName="VERIFIED" tableName="CUST_KYC_VALIDATION" defaultValue="0" />
	</changeSet>

	<changeSet id="514.1_post" author="Saikrishna.K" dbms="mssql">
		<sql>
			<![CDATA[	
				alter table CUST_KYC_VALIDATION add constraint DF_CUST_KYC_VALIDATION_VERIFED DEFAULT 0 for VERIFIED;
			]]>
		</sql>
	</changeSet>

	<changeSet id="515" author="Saikrishna.K">
		<addUniqueConstraint columnNames="ID,TYPE,VERIFIED" constraintName="CUST_KYC_VALIDATION_ID"
			tableName="CUST_KYC_VALIDATION" />
	</changeSet>

	<changeSet id="518_pre" author="vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="516" author="vijaya.a">
		<renameColumn tableName="FINRECEIPTHEADER" oldColumnName="EARLYSETTLEMENTREASON" newColumnName="REASONCODE" />
	</changeSet>

	<changeSet id="517" author="vijaya.a">
		<renameColumn tableName="FINRECEIPTHEADER_TEMP" oldColumnName="EARLYSETTLEMENTREASON" newColumnName="REASONCODE" />
	</changeSet>

	<changeSet id="518" author="vijaya.a">
		<createView viewName="FINRECEIPTHEADER_VIEW" replaceIfExists="true">
			<![CDATA[
			SELECT 
				T1.RECEIPTID,
			    T1.RECEIPTDATE,
			    T1.RECEIPTTYPE,
			    T1.RECAGAINST,
			    T1.REFERENCE,
			    T1.RECEIPTPURPOSE,
			    T1.RECEIPTMODE,
			    T1.EXCESSADJUSTTO,
			    T1.ALLOCATIONTYPE,
			    T1.RECEIPTAMOUNT,
			    T1.EFFECTSCHDMETHOD,
			    T1.EXTREFERENCE,
			    T1.MODULE,
			    T1.RECEIPTMODESTATUS,
			    T1.SUBRECEIPTMODE,
			    T1.RECEIPTCHANNEL,
			    T1.RECEIVEDFROM,
			    T1.PANNUMBER,
			    T1.COLLECTIONAGENTID,
			    T9.CODE COLLECTIONAGENTCODE,
			    T9.DESCRIPTION COLLECTIONAGENTDESC,
			    T1.VERSION,
			    T1.LASTMNTBY,
			    T1.LASTMNTON,
			    T1.RECORDSTATUS,
			    T1.ROLECODE,
			    T1.NEXTROLECODE,
			    T1.TASKID,
			    T1.NEXTTASKID,
			    T1.RECORDTYPE,
			    T1.WORKFLOWID,
			    T2.FINTYPE,
			    T2.FINBRANCH,
			    T3.CUSTCIF,
			    T3.CUSTSHRTNAME,
			    T2.FINCCY,
			    T1.REALIZATIONDATE,
			    T1.CANCELREASON,
			    T4.FINTYPEDESC,
			    T6.BRANCHDESC FINBRANCHDESC,
			    T5.CCYDESC FINCCYDESC,
			    T7.REJECTDESC CANCELREASONDESC,
			    T2.FINISACTIVE,
			    T1.WAVIEDAMT,
			    T1.TOTFEEAMOUNT,
			    T1.BOUNCEDATE,
			    T1.REMARKS,
			    T1.RCDMAINTAINSTS,
			    T1.GDRAVAILABLE,
			    T1.RELEASETYPE,
			    T1.THIRDPARTYNAME,
			    T1.THIRDPARTYMOBILENUM,
			    T1.DEPOSITPROCESS,
			    T1.DEPOSITBRANCH,
			    T1.LPIAMOUNT,
			    T1.LPPAMOUNT,
			    T1.GSTLPIAMOUNT,
			    T1.GSTLPPAMOUNT,
			        CASE
			            WHEN T8.PAYMENTTYPE in ('CHEQUE', 'DD') THEN T8.FAVOURNUMBER
			            ELSE T8.TRANSACTIONREF
			        END AS TRANSACTIONREF,
			    T2.PRODUCTCATEGORY,
			    T2.PROMOTIONCODE,
			    T2.NEXTREPAYRVWDATE,
			    T1.CASHIERBRANCH,
			    T1.INITIATEDATE,
			    T1.INSTRUCTIONUID,
			    T1.FINDIVISION,
			    T1.POSTBRANCH,
			    T10.DIVISIONCODEDESC FINDIVISIONDESC,
			    T11.BRANCHDESC POSTBRANCHDESC,
			    T12.BRANCHDESC CASHIERBRANCHDESC,
			    T10.ENTITYCODE,
			    T1.ACTFINRECEIPT,
				T1.REASONCODE
			   FROM FINRECEIPTHEADER_TEMP T1
			     JOIN FINANCEMAIN T2 ON T1.REFERENCE = T2.FINREFERENCE
			     JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
			     JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
			     JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
			     JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
			     LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
			     LEFT JOIN FINRECEIPTDETAIL T8 ON T1.RECEIPTID = T8.RECEIPTID AND T1.RECEIPTMODE = T8.PAYMENTTYPE
			     LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
			     LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
			     LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
			     LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
			UNION ALL
			 SELECT T1.RECEIPTID,
			    T1.RECEIPTDATE,
			    T1.RECEIPTTYPE,
			    T1.RECAGAINST,
			    T1.REFERENCE,
			    T1.RECEIPTPURPOSE,
			    T1.RECEIPTMODE,
			    T1.EXCESSADJUSTTO,
			    T1.ALLOCATIONTYPE,
			    T1.RECEIPTAMOUNT,
			    T1.EFFECTSCHDMETHOD,
			    T1.EXTREFERENCE,
			    T1.MODULE,
			    T1.RECEIPTMODESTATUS,
			    T1.SUBRECEIPTMODE,
			    T1.RECEIPTCHANNEL,
			    T1.RECEIVEDFROM,
			    T1.PANNUMBER,
			    T1.COLLECTIONAGENTID,
			    T9.CODE COLLECTIONAGENTCODE,
			    T9.DESCRIPTION COLLECTIONAGENTDESC,
			    T1.VERSION,
			    T1.LASTMNTBY,
			    T1.LASTMNTON,
			    T1.RECORDSTATUS,
			    T1.ROLECODE,
			    T1.NEXTROLECODE,
			    T1.TASKID,
			    T1.NEXTTASKID,
			    T1.RECORDTYPE,
			    T1.WORKFLOWID,
			    T2.FINTYPE,
			    T2.FINBRANCH,
			    T3.CUSTCIF,
			    T3.CUSTSHRTNAME,
			    T2.FINCCY,
			    T1.REALIZATIONDATE,
			    T1.CANCELREASON,
			    T4.FINTYPEDESC,
			    T6.BRANCHDESC FINBRANCHDESC,
			    T5.CCYDESC FINCCYDESC,
			    T7.REJECTDESC CANCELREASONDESC,
			    T2.FINISACTIVE,
			    T1.WAVIEDAMT,
			    T1.TOTFEEAMOUNT,
			    T1.BOUNCEDATE,
			    T1.REMARKS,
			    T1.RCDMAINTAINSTS,
			    T1.GDRAVAILABLE,
			    T1.RELEASETYPE,
			    T1.THIRDPARTYNAME,
			    T1.THIRDPARTYMOBILENUM,
			    T1.DEPOSITPROCESS,
			    T1.DEPOSITBRANCH,
			    T1.LPIAMOUNT,
			    T1.LPPAMOUNT,
			    T1.GSTLPIAMOUNT,
			    T1.GSTLPPAMOUNT,
			        CASE
			            WHEN T8.PAYMENTTYPE in ('CHEQUE', 'DD') THEN T8.FAVOURNUMBER
			            ELSE T8.TRANSACTIONREF
			        END AS TRANSACTIONREF,
			    T2.PRODUCTCATEGORY,
			    T2.PROMOTIONCODE,
			    T2.NEXTREPAYRVWDATE,
			    T1.CASHIERBRANCH,
			    T1.INITIATEDATE,
			    T1.INSTRUCTIONUID,
			    T1.FINDIVISION,
			    T1.POSTBRANCH,
			    T10.DIVISIONCODEDESC FINDIVISIONDESC,
			    T11.BRANCHDESC POSTBRANCHDESC,
			    T12.BRANCHDESC CASHIERBRANCHDESC,
			    T10.ENTITYCODE,
			    T1.ACTFINRECEIPT,
				T1.REASONCODE
			   FROM FINRECEIPTHEADER T1
			     JOIN FINANCEMAIN T2 ON T1.REFERENCE = T2.FINREFERENCE
			     JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
			     JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
			     JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
			     JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
			     LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
			     LEFT JOIN FINRECEIPTDETAIL T8 ON T1.RECEIPTID = T8.RECEIPTID AND T1.RECEIPTMODE = T8.PAYMENTTYPE
			     LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
			     LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
			     LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
			     LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
			  WHERE NOT (EXISTS ( SELECT 1
			           FROM FINRECEIPTHEADER_TEMP
			          WHERE FINRECEIPTHEADER_TEMP.RECEIPTID = T1.RECEIPTID))
			          ]]>
		</createView>
	</changeSet>

	<changeSet id="518_post" author="vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="519_pre" author="vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_fview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="519" author="vijaya.a">
		<createView viewName="FINRECEIPTHEADER_FVIEW" replaceIfExists="true">
			<![CDATA[
			  SELECT  T1.RECEIPTID,
					  T1.RECEIPTDATE,
					  T1.RECEIPTTYPE,
					  t1.actfinreceipt,
					  T1.RECAGAINST,
					  T1.REFERENCE,
					  T1.RECEIPTPURPOSE,
					  T1.RECEIPTMODE,
					  T1.EXCESSADJUSTTO,
					  T1.ALLOCATIONTYPE,
					  T1.RECEIPTAMOUNT,
					  T1.EFFECTSCHDMETHOD,
					  T1.RECEIPTMODESTATUS,
					  T1.SUBRECEIPTMODE,
					  T1.RECEIPTCHANNEL,
					  T1.RECEIVEDFROM,
					  T1.PANNUMBER,
					  T1.COLLECTIONAGENTID,
					  T1.VERSION,
					  T1.LASTMNTBY,
					  T1.LASTMNTON,
					  T1.RECORDSTATUS,
					  T1.ROLECODE,
					  T1.NEXTROLECODE,
					  T1.TASKID,
					  T1.NEXTTASKID,
					  T1.RECORDTYPE,
					  T1.WORKFLOWID,
					  T2.FINTYPE,
					  T2.FINBRANCH,
					  T3.CUSTCIF,
					  T3.CUSTSHRTNAME,
					  T2.FINCCY,
					  T1.REALIZATIONDATE,
					  T1.CANCELREASON,
					  T4.FINTYPEDESC,
					  T6.BRANCHDESC FINBRANCHDESC,
					  T5.CCYDESC FINCCYDESC,
					  T7.REJECTDESC CANCELREASONDESC,
					  COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
					  T2.SCHEDULEMETHOD,
					  T2.PROFITDAYSBASIS PFTDAYSBASIS,
					  T1.WAVIEDAMT,
					  COALESCE(T3.CUSTID, 0) CUSTID,
					  T1.TOTFEEAMOUNT,
					  T1.BOUNCEDATE,
					  T1.REMARKS,
					  T1.RCDMAINTAINSTS,
					  T1.DEPOSITPROCESS,
					  T1.DEPOSITBRANCH,
					  T1.LPIAMOUNT,
					  T1.LPPAMOUNT,
					  T1.GSTLPIAMOUNT,
					  T1.GSTLPPAMOUNT,
					  T1.GDRAVAILABLE,
					  T1.RELEASETYPE,
					  T1.THIRDPARTYNAME,
					  T1.THIRDPARTYMOBILENUM,
					  T2.PRODUCTCATEGORY,
					  T2.PROMOTIONCODE,
					  (
					  CASE
					    WHEN T8.PAYMENTTYPE IN ('CHEQUE', 'DD')
					    THEN T8.FAVOURNUMBER
					    ELSE T8.TRANSACTIONREF
					  END) TRANSACTIONREF,
					  T1.CASHIERBRANCH,
					  T2.NEXTREPAYRVWDATE,
					  T1.INITIATEDATE,
					  T9.CODE COLLECTIONAGENTCODE,
					  T9.DESCRIPTION COLLECTIONAGENTDESC,
					  T1.MODULE,
					  T1.INSTRUCTIONUID,
					  T1.EXTREFERENCE,
					  T10.CUSTCIF CustomerCif,
					  T10.CustShrtName CustomerName,
					  T1.FINDIVISION,
					  T1.PostBranch,
					  T11.DIVISIONCODEDesc FinDivisionDesc,
					  T12.BRANCHDESC PostBranchDesc,
					  T13.BRANCHDESC CashierBranchDesc,
					  T11.EntityCode,
					  T3.CustBaseCcy,
					  T1.REASONCODE
					FROM FINRECEIPTHEADER_TEMP T1
					LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.REFERENCE = T2.FINREFERENCE
					LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
					LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
					LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
					LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
					LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
					LEFT JOIN FINRECEIPTDETAIL T8 ON T1.RECEIPTID = T8.RECEIPTID AND T1.RECEIPTMODE = T8.PAYMENTTYPE 
					LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
					LEFT JOIN Customers T10 ON CAST(T10.CustId AS VARCHAR(20)) = T1.REFERENCE
					LEFT JOIN SMTDIVISIONDETAIL T11 ON T1.FINDIVISION = T11.DIVISIONCODE
					LEFT JOIN RMTBranches T12 ON T1.PostBranch = T12.BranchCode
					LEFT JOIN RMTBranches T13 ON T1.CASHIERBRANCH = T13.BranchCode
					LEFT JOIN RMTCURRENCIES T14 ON T14.CCYCODE= T3.CustBaseCcy
					]]>
		</createView>
	</changeSet>

	<changeSet id="519_post" author="vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader_fview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="520_pre" author="vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_feview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="520" author="vijaya.a">
		<createView viewName="FINRECEIPTHEADER_FEVIEW" replaceIfExists="true">
		<![CDATA[
			SELECT T1.RECEIPTID,
				T1.RECEIPTDATE,
				T1.RECEIPTTYPE,
				T1.RECAGAINST,
				T1.REFERENCE,
				T1.RECEIPTPURPOSE,
				T1.RECEIPTMODE,
				T1.EXCESSADJUSTTO,
				T1.ALLOCATIONTYPE,
				T1.RECEIPTAMOUNT,
				T1.EFFECTSCHDMETHOD,
				T1.RECEIPTMODESTATUS,
				T1.VERSION,
				T1.LASTMNTBY,
				T1.LASTMNTON,
				T1.RECORDSTATUS,
				T1.ROLECODE,
				T1.NEXTROLECODE,
				T1.TASKID,
				T1.NEXTTASKID,
				T1.RECORDTYPE,
				T1.WORKFLOWID,
				T2.FINTYPE,
				T2.FINBRANCH,
				T3.CUSTCIF,
				T3.CUSTSHRTNAME,
				T2.FINCCY,
				T1.REALIZATIONDATE,
				T1.CANCELREASON,
				T4.FINTYPEDESC,
				T6.BRANCHDESC FINBRANCHDESC,
				T5.CCYDESC FINCCYDESC,
				T7.REJECTDESC CANCELREASONDESC,
				COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
				T2.SCHEDULEMETHOD,
				T2.PROFITDAYSBASIS PFTDAYSBASIS,
				T1.WAVIEDAMT,
				COALESCE(T3.CUSTID, 0) CUSTID,
				T1.TOTFEEAMOUNT,
				T1.BOUNCEDATE,
				T1.REMARKS,
				T1.RCDMAINTAINSTS,
				T1.DEPOSITPROCESS,
				T1.DEPOSITBRANCH,
				T1.LPIAMOUNT,
				T1.LPPAMOUNT,
				T1.GSTLPIAMOUNT,
				T1.GSTLPPAMOUNT,
				T1.GDRAVAILABLE,
				T1.RELEASETYPE,
				T1.THIRDPARTYNAME,
				T1.THIRDPARTYMOBILENUM,
				T2.PRODUCTCATEGORY,
				T2.PROMOTIONCODE,
				T2.NEXTREPAYRVWDATE,
				(
				CASE
				WHEN T8.PAYMENTTYPE IN ('CHEQUE', 'DD')
				THEN T8.FAVOURNUMBER
				ELSE T8.TRANSACTIONREF
				END) TRANSACTIONREF,
				T1.CASHIERBRANCH,
				T1.INITIATEDATE,
				T4.FINDIVISION LOVDESCFINDIVISION,
				T2.BUSINESSVERTICAL,
				T1.FINDIVISION,
				T1.POSTBRANCH,
				T10.DIVISIONCODEDESC FINDIVISIONDESC,
				T11.BRANCHDESC POSTBRANCHDESC,
				T12.BRANCHDESC CASHIERBRANCHDESC,
				T10.ENTITYCODE,
				T9.CODE COLLECTIONAGENTCODE,
				T9.DESCRIPTION COLLECTIONAGENTDESC,
				T1.INSTRUCTIONUID,
				T1.MODULE,
				T1.EXTREFERENCE,
				T1.COLLECTIONAGENTID,
				T1.PANNUMBER,
				T1.RECEIVEDFROM,
				T1.RECEIPTCHANNEL,
				T1.SUBRECEIPTMODE,
				T13.CUSTCIF CUSTOMERCIF,
				T13.CUSTSHRTNAME CUSTOMERNAME,
				T1.ACTFINRECEIPT,
				T1.REASONCODE
				FROM FINRECEIPTHEADER_TEMP T1
				LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.REFERENCE = T2.FINREFERENCE
				LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN FINRECEIPTDETAIL T8 ON T1.RECEIPTID = T8.RECEIPTID AND T1.RECEIPTMODE = T8.PAYMENTTYPE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
				UNION ALL
				SELECT T1.RECEIPTID,
				T1.RECEIPTDATE,
				T1.RECEIPTTYPE,
				T1.RECAGAINST,
				T1.REFERENCE,
				T1.RECEIPTPURPOSE,
				T1.RECEIPTMODE,
				T1.EXCESSADJUSTTO,
				T1.ALLOCATIONTYPE,
				T1.RECEIPTAMOUNT,
				T1.EFFECTSCHDMETHOD,
				T1.RECEIPTMODESTATUS,
				T1.VERSION,
				T1.LASTMNTBY,
				T1.LASTMNTON,
				T1.RECORDSTATUS,
				T1.ROLECODE,
				T1.NEXTROLECODE,
				T1.TASKID,
				T1.NEXTTASKID,
				T1.RECORDTYPE,
				T1.WORKFLOWID,
				T2.FINTYPE,
				T2.FINBRANCH,
				T3.CUSTCIF,
				T3.CUSTSHRTNAME,
				T2.FINCCY,
				T1.REALIZATIONDATE,
				T1.CANCELREASON,
				T4.FINTYPEDESC,
				T6.BRANCHDESC FINBRANCHDESC,
				T5.CCYDESC FINCCYDESC,
				T7.REJECTDESC CANCELREASONDESC,
				COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
				T2.SCHEDULEMETHOD,
				T2.PROFITDAYSBASIS PFTDAYSBASIS,
				T1.WAVIEDAMT,
				COALESCE(T3.CUSTID, 0) CUSTID,
				T1.TOTFEEAMOUNT,
				T1.BOUNCEDATE,
				T1.REMARKS,
				T1.RCDMAINTAINSTS,
				T1.DEPOSITPROCESS,
				T1.DEPOSITBRANCH,
				T1.LPIAMOUNT,
				T1.LPPAMOUNT,
				T1.GSTLPIAMOUNT,
				T1.GSTLPPAMOUNT,
				T1.GDRAVAILABLE,
				T1.RELEASETYPE,
				T1.THIRDPARTYNAME,
				T1.THIRDPARTYMOBILENUM,
				T2.PRODUCTCATEGORY,
				T2.PROMOTIONCODE,
				T2.NEXTREPAYRVWDATE,
				(
				CASE
				WHEN T8.PAYMENTTYPE IN ('CHEQUE', 'DD')
				THEN T8.FAVOURNUMBER
				ELSE T8.TRANSACTIONREF
				END) TRANSACTIONREF,
				T1.CASHIERBRANCH,
				T1.INITIATEDATE,
				T4.FINDIVISION LOVDESCFINDIVISION,
				T2.BUSINESSVERTICAL,
				T1.FINDIVISION,
				T1.POSTBRANCH,
				T10.DIVISIONCODEDESC FINDIVISIONDESC,
				T11.BRANCHDESC POSTBRANCHDESC,
				T12.BRANCHDESC CASHIERBRANCHDESC,
				T10.ENTITYCODE,
				T9.CODE COLLECTIONAGENTCODE,
				T9.DESCRIPTION COLLECTIONAGENTDESC,
				T1.INSTRUCTIONUID,
				T1.MODULE,
				T1.EXTREFERENCE,
				T1.COLLECTIONAGENTID,
				T1.PANNUMBER,
				T1.RECEIVEDFROM,
				T1.RECEIPTCHANNEL,
				T1.SUBRECEIPTMODE,
				T13.CUSTCIF CUSTOMERCIF,
				T13.CUSTSHRTNAME CUSTOMERNAME,
				T1.ACTFINRECEIPT,
				T1.REASONCODE
				FROM FINRECEIPTHEADER T1
				LEFT JOIN
				(SELECT FINREFERENCE,
				FINBRANCH,
				FINTYPE,
				FINCCY,
				SCHEDULEMETHOD,
				PROFITDAYSBASIS,
				FINISACTIVE,
				CUSTID,
				PRODUCTCATEGORY,
				PROMOTIONCODE,
				NEXTREPAYRVWDATE,
				BUSINESSVERTICAL
				FROM FINANCEMAIN_TEMP
				UNION
				SELECT FINREFERENCE,
				FINBRANCH,
				FINTYPE,
				FINCCY,
				SCHEDULEMETHOD,
				PROFITDAYSBASIS,
				FINISACTIVE,
				CUSTID,
				PRODUCTCATEGORY,
				PROMOTIONCODE,
				NEXTREPAYRVWDATE,
				BUSINESSVERTICAL
				FROM FINANCEMAIN
				) T2 ON T1.REFERENCE = T2.FINREFERENCE
				LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN FINRECEIPTDETAIL T8 ON T1.RECEIPTID = T8.RECEIPTID AND T1.RECEIPTMODE = T8.PAYMENTTYPE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
				WHERE NOT EXISTS
				( SELECT 1 FROM FINRECEIPTHEADER_TEMP WHERE RECEIPTID = T1.RECEIPTID
				)
				]]>
		</createView>
	</changeSet>

	<changeSet id="520_post" author="vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader_feview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="521_pre" author="vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_fcview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="521" author="vijaya.a">
		<createView viewName="FINRECEIPTHEADER_FCVIEW" replaceIfExists="true">
			<![CDATA[
			SELECT T1.RECEIPTID,
			T1.RECEIPTDATE,
			T1.RECEIPTTYPE,
			T1.RECAGAINST,
			T1.REFERENCE,
			T1.RECEIPTPURPOSE,
			T1.RECEIPTMODE,
			T1.EXCESSADJUSTTO,
			T1.ALLOCATIONTYPE,
			T1.RECEIPTAMOUNT,
			T1.EFFECTSCHDMETHOD,
			T1.RECEIPTMODESTATUS,
			T1.SUBRECEIPTMODE,
			T1.RECEIPTCHANNEL,
			T1.RECEIVEDFROM,
			T1.PANNUMBER,
			T1.COLLECTIONAGENTID,
			T1.VERSION,
			T1.LASTMNTBY,
			T1.LASTMNTON,
			T1.RECORDSTATUS,
			T1.ROLECODE,
			T1.NEXTROLECODE,
			T1.TASKID,
			T1.NEXTTASKID,
			T1.RECORDTYPE,
			T1.WORKFLOWID,
			T2.FINTYPE,
			T2.FINBRANCH,
			T3.CUSTCIF,
			T3.CUSTSHRTNAME,
			T2.FINCCY,
			T1.REALIZATIONDATE,
			T1.CANCELREASON,
			T4.FINTYPEDESC,
			T6.BRANCHDESC FINBRANCHDESC,
			T5.CCYDESC FINCCYDESC,
			T7.REJECTDESC CANCELREASONDESC,
			COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
			T2.SCHEDULEMETHOD,
			T2.PROFITDAYSBASIS PFTDAYSBASIS,
			T1.WAVIEDAMT,
			COALESCE(T3.CUSTID, 0) CUSTID,
			T1.TOTFEEAMOUNT,
			T1.BOUNCEDATE,
			T1.REMARKS,
			T1.RCDMAINTAINSTS,
			T1.DEPOSITPROCESS,
			T1.DEPOSITBRANCH,
			T1.LPIAMOUNT,
			T1.LPPAMOUNT,
			T1.GSTLPIAMOUNT,
			T1.GSTLPPAMOUNT,
			T1.GDRAVAILABLE,
			T1.RELEASETYPE,
			T1.THIRDPARTYNAME,
			T1.THIRDPARTYMOBILENUM,
			T2.PRODUCTCATEGORY,
			T2.PROMOTIONCODE,
			(
			CASE
			WHEN T8.PAYMENTTYPE IN ('CHEQUE', 'DD')
			THEN T8.FAVOURNUMBER
			ELSE T8.TRANSACTIONREF
			END ) TRANSACTIONREF,
			T2.NEXTREPAYRVWDATE,
			T1.CASHIERBRANCH,
			T1.INITIATEDATE,
			T1.INSTRUCTIONUID,
			T1.FINDIVISION,
			T1.POSTBRANCH,
			T10.DIVISIONCODEDESC FINDIVISIONDESC,
			T11.BRANCHDESC POSTBRANCHDESC,
			T12.BRANCHDESC CASHIERBRANCHDESC,
			T10.ENTITYCODE,
			T9.CODE COLLECTIONAGENTCODE,
			T9.DESCRIPTION COLLECTIONAGENTDESC,
			T1.MODULE,
			T1.EXTREFERENCE,
			T13.CUSTCIF CUSTOMERCIF,
			T13.CUSTSHRTNAME CUSTOMERNAME,
			T1.ACTFINRECEIPT,
			T1.REASONCODE
			FROM FINRECEIPTHEADER_TEMP T1
			LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.REFERENCE = T2.FINREFERENCE
			LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
			LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
			LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
			LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
			LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
			LEFT JOIN FINRECEIPTDETAIL T8 ON T1.RECEIPTID = T8.RECEIPTID AND T1.RECEIPTMODE = T8.PAYMENTTYPE
			LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
			LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
			LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
			LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
			LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
			UNION ALL
			SELECT
			T1.RECEIPTID,
			T1.RECEIPTDATE,
			T1.RECEIPTTYPE,
			T1.RECAGAINST,
			T1.REFERENCE,
			T1.RECEIPTPURPOSE,
			T1.RECEIPTMODE,
			T1.EXCESSADJUSTTO,
			T1.ALLOCATIONTYPE,
			T1.RECEIPTAMOUNT,
			T1.EFFECTSCHDMETHOD,
			T1.RECEIPTMODESTATUS,
			T1.SUBRECEIPTMODE,
			T1.RECEIPTCHANNEL,
			T1.RECEIVEDFROM,
			T1.PANNUMBER,
			T1.COLLECTIONAGENTID,
			T1.VERSION,
			T1.LASTMNTBY,
			T1.LASTMNTON,
			T1.RECORDSTATUS,
			T1.ROLECODE,
			T1.NEXTROLECODE,
			T1.TASKID,
			T1.NEXTTASKID,
			T1.RECORDTYPE,
			T1.WORKFLOWID,
			T2.FINTYPE,
			T2.FINBRANCH,
			T3.CUSTCIF,
			T3.CUSTSHRTNAME,
			T2.FINCCY,
			T1.REALIZATIONDATE,
			T1.CANCELREASON,
			T4.FINTYPEDESC,
			T6.BRANCHDESC FINBRANCHDESC,
			T5.CCYDESC FINCCYDESC,
			T7.REJECTDESC CANCELREASONDESC,
			COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
			T2.SCHEDULEMETHOD,
			T2.PROFITDAYSBASIS PFTDAYSBASIS,
			T1.WAVIEDAMT,
			COALESCE(T3.CUSTID, 0) CUSTID,
			T1.TOTFEEAMOUNT,
			T1.BOUNCEDATE,
			T1.REMARKS,
			T1.RCDMAINTAINSTS,
			T1.DEPOSITPROCESS,
			T1.DEPOSITBRANCH,
			T1.LPIAMOUNT,
			T1.LPPAMOUNT,
			T1.GSTLPIAMOUNT,
			T1.GSTLPPAMOUNT,
			T1.GDRAVAILABLE,
			T1.RELEASETYPE,
			T1.THIRDPARTYNAME,
			T1.THIRDPARTYMOBILENUM,
			T2.PRODUCTCATEGORY,
			T2.PROMOTIONCODE,
			(
			CASE
			WHEN T8.PAYMENTTYPE IN ('CHEQUE', 'DD')
			THEN T8.FAVOURNUMBER
			ELSE T8.TRANSACTIONREF
			END) TRANSACTIONREF,
			T2.NEXTREPAYRVWDATE,
			T1.CASHIERBRANCH,
			T1.INITIATEDATE,
			T1.INSTRUCTIONUID,
			T1.FINDIVISION,
			T1.POSTBRANCH,
			T10.DIVISIONCODEDESC FINDIVISIONDESC,
			T11.BRANCHDESC POSTBRANCHDESC,
			T12.BRANCHDESC CASHIERBRANCHDESC,
			T10.ENTITYCODE,
			T9.CODE COLLECTIONAGENTCODE,
			T9.DESCRIPTION COLLECTIONAGENTDESC,
			T1.MODULE,
			T1.EXTREFERENCE,
			T13.CUSTCIF CUSTOMERCIF,
			T13.CUSTSHRTNAME CUSTOMERNAME,
			T1.ACTFINRECEIPT,
			T1.REASONCODE
			FROM FINRECEIPTHEADER T1
			LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.REFERENCE = T2.FINREFERENCE
			LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
			LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
			LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
			LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
			LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
			LEFT JOIN FINRECEIPTDETAIL T8 ON T1.RECEIPTID = T8.RECEIPTID AND T1.RECEIPTMODE = T8.PAYMENTTYPE
			LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
			LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
			LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
			LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
			LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
			WHERE NOT EXISTS
			( SELECT 1 FROM FINRECEIPTHEADER_TEMP WHERE RECEIPTID = T1.RECEIPTID
			)
			]]>
		</createView>
	</changeSet>

	<changeSet id="521_post" author="vijaya.a" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader_fcview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="522" author="vijaya.a">
		<sql>
			<![CDATA[
				DELETE FROM ReasonTypes where code='FC';
				INSERT INTO ReasonTypes (id, code, description,  Version , LastMntBy, LastMntOn, RecordStatus, RoleCode, NextRoleCode, TaskId,NextTaskId, RecordType, WorkflowId) values ((SELECT max(seqno+1) FROM SEQREASONTYPES), 'FCREASON', 'ForeClosure',  1 , 1000, current_timestamp,'Approved', '', '', '', '','', 0);
				UPDATE SEQREASONTYPES set SeqNo = (SELECT max(Id)+1 FROM REASONTYPES);
			]]>
		</sql>
	</changeSet>

	<changeSet id="523" author="vijaya.a">
		<sql>
			<![CDATA[
				DELETE FROM ReasonTypes where code='CLOSURE';
				INSERT INTO ReasonTypes (id, code, description,  Version , LastMntBy, LastMntOn, RecordStatus, RoleCode, NextRoleCode, TaskId,NextTaskId, RecordType, WorkflowId) values ((SELECT max(seqno+1) FROM SEQREASONTYPES), 'CLOSURE', 'Closure Reason',  1 , 1000, current_timestamp,'Approved', '', '', '', '','', 0);
				UPDATE SEQREASONTYPES set SeqNo = (SELECT max(Id)+1 FROM REASONTYPES);
			]]>
		</sql>
	</changeSet>

	<changeSet id="524_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'findisbursementdetails_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="524.0" author="satyanarayana.g">
		<createView viewName="FINDISBURSEMENTDETAILS_VIEW" replaceIfExists="true">
			<![CDATA[
				 SELECT T1.FINREFERENCE,
						    T1.DISBDATE,
						    T1.DISBSEQ,
						    T1.DISBDESC,
						    T1.DISBACCOUNTID,
						    T1.DISBAMOUNT,
						    T1.DISBREQDATE,
						    T1.DISBDISBURSED,
						    T1.DISBISACTIVE,
						    T1.DISBREMARKS,
						    T1.VERSION,
						    T1.LASTMNTBY,
						    T1.LASTMNTON,
						    T1.RECORDSTATUS,
						    T1.ROLECODE,
						    T1.NEXTROLECODE,
						    T1.TASKID,
						    T1.NEXTTASKID,
						    T1.RECORDTYPE,
						    T1.WORKFLOWID,
						    T1.FEECHARGEAMT,
						    T1.DISBSTATUS,
						    T1.DISBTYPE,
						    T1.DISBCLAIM,
						    T1.DISBEXPTYPE,
						    T1.DISBRETPERC,
						    T1.DISBRETAMOUNT,
						    T1.AUTODISB,
						    T1.NETADVDUE,
						    T1.NETRETDUE,
						    T1.DISBRETPAID,
						    T1.RETPAIDDATE,
						    T2.EXPENCETYPENAME AS LOVDESCDISBEXPTYPE,
						    T1.CONSULTFEEFRQ,
						    T1.CONSULTFEESTARTDATE,
						    T1.CONSULTFEEENDDATE,
						    T1.CONTRACTORID,
						    T1.INSURANCEAMT,
						    T1.INSTRUCTIONUID,
							T1.QUICKDISB
						   FROM FINDISBURSEMENTDETAILS_TEMP T1
						     LEFT JOIN AMTEXPENSETYPE T2 ON T2.EXPENCETYPEID = T1.DISBEXPTYPE
						UNION ALL
						 SELECT T1.FINREFERENCE,
						    T1.DISBDATE,
						    T1.DISBSEQ,
						    T1.DISBDESC,
						    T1.DISBACCOUNTID,
						    T1.DISBAMOUNT,
						    T1.DISBREQDATE,
						    T1.DISBDISBURSED,
						    T1.DISBISACTIVE,
						    T1.DISBREMARKS,
						    T1.VERSION,
						    T1.LASTMNTBY,
						    T1.LASTMNTON,
						    T1.RECORDSTATUS,
						    T1.ROLECODE,
						    T1.NEXTROLECODE,
						    T1.TASKID,
						    T1.NEXTTASKID,
						    T1.RECORDTYPE,
						    T1.WORKFLOWID,
						    T1.FEECHARGEAMT,
						    T1.DISBSTATUS,
						    T1.DISBTYPE,
						    T1.DISBCLAIM,
						    T1.DISBEXPTYPE,
						    T1.DISBRETPERC,
						    T1.DISBRETAMOUNT,
						    T1.AUTODISB,
						    T1.NETADVDUE,
						    T1.NETRETDUE,
						    T1.DISBRETPAID,
						    T1.RETPAIDDATE,
						    T2.EXPENCETYPENAME AS LOVDESCDISBEXPTYPE,
						    T1.CONSULTFEEFRQ,
						    T1.CONSULTFEESTARTDATE,
						    T1.CONSULTFEEENDDATE,
						    T1.CONTRACTORID,
						    T1.INSURANCEAMT,
						    T1.INSTRUCTIONUID,
							T1.QUICKDISB
						   FROM FINDISBURSEMENTDETAILS T1
						     LEFT JOIN AMTEXPENSETYPE T2 ON T2.EXPENCETYPEID = T1.DISBEXPTYPE
						  WHERE NOT (EXISTS ( SELECT 1
						   FROM FINDISBURSEMENTDETAILS_TEMP
						   WHERE FINDISBURSEMENTDETAILS_TEMP.FINREFERENCE = T1.FINREFERENCE))
				]]>
        	</createView>
	</changeSet>

	<changeSet id="524_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'findisbursementdetails_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="525" author="Varaprasad.K">
		<addColumn tableName="external_liabilities">
			<column name="ImputedEmi" type="decimal(18,0)" defaultValue="0" />
			<column name="OwnerShip" type="varchar(50)" />
			<column name="lastTwentyFourMonths" type="boolean" defaultValue="0" />
			<column name="lastSixMonths" type="boolean" defaultValue="0" />
			<column name="lastThreeMonths" type="boolean" defaultValue="0" />
			<column name="CurrentOverDue" type="decimal(18,0)" defaultValue="0" />
		</addColumn>
	</changeSet>
	
	<changeSet id="526" author="Varaprasad.K">
		<addColumn tableName="external_liabilities_temp">
			<column name="ImputedEmi" type="decimal(18,0)" defaultValue="0" />
			<column name="OwnerShip" type="varchar(50)" />
			<column name="lastTwentyFourMonths" type="boolean" defaultValue="0" />
			<column name="lastSixMonths" type="boolean" defaultValue="0" />
			<column name="lastThreeMonths" type="boolean" defaultValue="0" />
			<column name="CurrentOverDue" type="decimal(18,0)" defaultValue="0" />
		</addColumn>
	</changeSet>
	
	<changeSet id="527" author="Varaprasad.K">
		<createView viewName="customer_ext_liabilities_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT 	el.id,
					    el.linkid,
					    el.seqno,
					    el.fintype,
					    el.findate,
					    el.loanbank,
					    el.rateofinterest,
					    el.tenure,
					    el.originalamount,
					    el.instalmentamount,
					    el.outstandingbalance,
					    el.balancetenure,
					    el.bounceinstalments,
					    el.principaloutstanding,
					    el.overdueamount,
					    el.finstatus,
					    el.foir,
					    el.source,
					    el.checkedby,
					    el.securitydetails,
					    el.loanpurpose,
					    el.repaybank,
					    el.version,
					    el.lastmntby,
					    el.lastmnton,
					    el.recordstatus,
					    el.rolecode,
					    el.nextrolecode,
					    el.taskid,
					    el.nexttaskid,
					    el.recordtype,
					    el.workflowid,
					    lb.bankname AS loanbankname,
					    ft.fintypedesc,
					    cs.custstsdescription,
					    rb.bankname AS repayfrombankname,
					    lp.loanpurposedesc,
					    el.otherfininstitute,
					    el.baltransfer,
					    cu.custid,
					    cu.custcif,
					    cu.custshrtname,
					    el.imputedEmi,
					    el.ownerShip,
					    el.lastTwentyFourMonths,
					    el.lastSixMonths,
					    el.lastThreeMonths,
					    el.currentOverDue
					   FROM external_liabilities_temp el
					     JOIN link_cust_liabilities cl ON cl.linkid = el.linkid
					     JOIN bmtbankdetail lb ON lb.bankcode::text = el.loanbank::text
					     JOIN otherbankfinancetype ft ON ft.fintype::text = el.fintype::text
					     LEFT JOIN loanpurposes lp ON lp.loanpurposecode::text = el.loanpurpose::text
					     LEFT JOIN bmtbankdetail rb ON rb.bankcode::text = el.repaybank::text
					     LEFT JOIN bmtcuststatuscodes cs ON cs.custstscode::text = el.finstatus::text
					     JOIN ( SELECT customers.custid,
					            customers.custcif,
					            customers.custshrtname
					           FROM customers
					        UNION
					         SELECT customers_temp.custid,
					            customers_temp.custcif,
					            customers_temp.custshrtname
					           FROM customers_temp) cu ON cu.custid = cl.custid
				UNION ALL
					 SELECT el.id,
					    el.linkid,
					    el.seqno,
					    el.fintype,
					    el.findate,
					    el.loanbank,
					    el.rateofinterest,
					    el.tenure,
					    el.originalamount,
					    el.instalmentamount,
					    el.outstandingbalance,
					    el.balancetenure,
					    el.bounceinstalments,
					    el.principaloutstanding,
					    el.overdueamount,
					    el.finstatus,
					    el.foir,
					    el.source,
					    el.checkedby,
					    el.securitydetails,
					    el.loanpurpose,
					    el.repaybank,
					    el.version,
					    el.lastmntby,
					    el.lastmnton,
					    el.recordstatus,
					    el.rolecode,
					    el.nextrolecode,
					    el.taskid,
					    el.nexttaskid,
					    el.recordtype,
					    el.workflowid,
					    lb.bankname AS loanbankname,
					    ft.fintypedesc,
					    cs.custstsdescription,
					    rb.bankname AS repayfrombankname,
					    lp.loanpurposedesc,
					    el.otherfininstitute,
					    el.baltransfer,
					    cu.custid,
					    cu.custcif,
					    cu.custshrtname,
					    el.imputedEmi,
					    el.ownerShip,
					    el.lastTwentyFourMonths,
					    el.lastSixMonths,
					    el.lastThreeMonths,
					    el.currentOverDue
					   FROM external_liabilities el
					     JOIN link_cust_liabilities cl ON cl.linkid = el.linkid
					     JOIN bmtbankdetail lb ON lb.bankcode::text = el.loanbank::text
					     JOIN otherbankfinancetype ft ON ft.fintype::text = el.fintype::text
					     LEFT JOIN loanpurposes lp ON lp.loanpurposecode::text = el.loanpurpose::text
					     LEFT JOIN bmtbankdetail rb ON rb.bankcode::text = el.repaybank::text
					     LEFT JOIN bmtcuststatuscodes cs ON cs.custstscode::text = el.finstatus::text
					     JOIN ( SELECT customers.custid,
					            customers.custcif,
					            customers.custshrtname
					           FROM customers
					        UNION
					         SELECT customers_temp.custid,
					            customers_temp.custcif,
					            customers_temp.custshrtname
					           FROM customers_temp) cu ON cu.custid = cl.custid
					  WHERE NOT (EXISTS ( SELECT 1
					           FROM external_liabilities_temp
					          WHERE external_liabilities_temp.id = el.id))
					          ]]>
		</createView>
</changeSet>

	<changeSet id="528" author="Varaprasad.K">
		<createView viewName="customer_ext_liabilities_aview" replaceIfExists="true">
		<![CDATA[
				SELECT 	el.id,
					    el.linkid,
					    el.seqno,
					    el.fintype,
					    el.findate,
					    el.loanbank,
					    el.rateofinterest,
					    el.tenure,
					    el.originalamount,
					    el.instalmentamount,
					    el.outstandingbalance,
					    el.balancetenure,
					    el.bounceinstalments,
					    el.principaloutstanding,
					    el.overdueamount,
					    el.finstatus,
					    el.foir,
					    el.source,
					    el.checkedby,
					    el.securitydetails,
					    el.loanpurpose,
					    el.repaybank,
					    el.version,
					    el.lastmntby,
					    el.lastmnton,
					    el.recordstatus,
					    el.rolecode,
					    el.nextrolecode,
					    el.taskid,
					    el.nexttaskid,
					    el.recordtype,
					    el.workflowid,
					    lb.bankname AS loanbankname,
					    ft.fintypedesc,
					    cs.custstsdescription,
					    lb.bankname AS repayfrombankname,
					    lp.loanpurposedesc,
					    el.otherfininstitute,
					    el.baltransfer,
					    cl.custid,
					    cu.custcif,
					    cu.custshrtname,
					    el.imputedEmi,
					    el.ownerShip,
					    el.lastTwentyFourMonths,
					    el.lastSixMonths,
					    el.lastThreeMonths,
					    el.currentOverDue
					   FROM external_liabilities el
					     JOIN link_cust_liabilities cl ON cl.linkid = el.linkid
					     JOIN bmtbankdetail lb ON lb.bankcode::text = el.loanbank::text
					     JOIN otherbankfinancetype ft ON ft.fintype::text = el.fintype::text
					     LEFT JOIN loanpurposes lp ON lp.loanpurposecode::text = el.loanpurpose::text
					     LEFT JOIN bmtbankdetail rb ON rb.bankcode::text = el.repaybank::text
					     LEFT JOIN bmtcuststatuscodes cs ON cs.custstscode::text = el.finstatus::text
					     JOIN ( SELECT customers.custid,
					            customers.custcif,
					            customers.custshrtname
					           FROM customers
					        UNION
					         SELECT customers_temp.custid,
					            customers_temp.custcif,
					            customers_temp.custshrtname
					           FROM customers_temp) cu ON cu.custid = cl.custid
					           ]]>
		</createView>
	</changeSet>
	
	<changeSet id="529" author="Varaprasad.K">
		<sql>
		<![CDATA[
		        DELETE FROM SecRights where RightName='CustomerExtLiabilityDialog_ImputedEmi';
				DELETE FROM SecRights where RightName='CustomerExtLiabilityDialog_Ownership';
				DELETE FROM SecRights where RightName='CustomerExtLiabilityDialog_LastInTwentyFourMths';
				DELETE FROM SecRights where RightName='CustomerExtLiabilityDialog_LastInSixMths';
				DELETE FROM SecRights where RightName='CustomerExtLiabilityDialog_LastInThreeMths';
				DELETE FROM SecRights where RightName='CustomerExtLiabilityDialog_CurrentOverdue';
				
				DELETE FROM SECGROUPRIGHTS Where GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='BFSD_ORIGINATION_MAKER'') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='CustomerExtLiabilityDialog_ImputedEmi');
				DELETE FROM SECGROUPRIGHTS Where GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='BFSD_ORIGINATION_MAKER'') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='CustomerExtLiabilityDialog_Ownership');
				DELETE FROM SECGROUPRIGHTS Where GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='BFSD_ORIGINATION_MAKER'') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='CustomerExtLiabilityDialog_LastInTwentyFourMths');
				DELETE FROM SECGROUPRIGHTS Where GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='BFSD_ORIGINATION_MAKER'') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='CustomerExtLiabilityDialog_LastInSixMths');
				DELETE FROM SECGROUPRIGHTS Where GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='BFSD_ORIGINATION_MAKER'') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='CustomerExtLiabilityDialog_LastInThreeMths');
				DELETE FROM SECGROUPRIGHTS Where GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='BFSD_ORIGINATION_MAKER'') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='CustomerExtLiabilityDialog_CurrentOverdue');
				
				INSERT INTO SecRights values((SELECT max(RightId) + 1 from SecRights), 3,'CustomerExtLiabilityDialog_ImputedEmi','CustomerExtLiabilityDialog',0,1000,current_timestamp,'Approved','',' ',' ',' ',' ',0);
				INSERT INTO SecRights values((SELECT max(RightId) + 1 from SecRights), 3,'CustomerExtLiabilityDialog_Ownership','CustomerExtLiabilityDialog',0,1000,current_timestamp,'Approved','',' ',' ',' ',' ',0);
				INSERT INTO SecRights values((SELECT max(RightId) + 1 from SecRights), 3,'CustomerExtLiabilityDialog_LastInTwentyFourMths','CustomerExtLiabilityDialog',0,1000,current_timestamp,'Approved','',' ',' ',' ',' ',0);
				INSERT INTO SecRights values((SELECT max(RightId) + 1 from SecRights), 3,'CustomerExtLiabilityDialog_LastInSixMths','CustomerExtLiabilityDialog',0,1000,current_timestamp,'Approved','',' ',' ',' ',' ',0);
				INSERT INTO SecRights values((SELECT max(RightId) + 1 from SecRights), 3,'CustomerExtLiabilityDialog_LastInThreeMths','CustomerExtLiabilityDialog',0,1000,current_timestamp,'Approved','',' ',' ',' ',' ',0);
				INSERT INTO SecRights values((SELECT max(RightId) + 1 from SecRights), 3,'CustomerExtLiabilityDialog_CurrentOverdue','CustomerExtLiabilityDialog',0,1000,current_timestamp,'Approved','',' ',' ',' ',' ',0);
                
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='BFSD_ORIGINATION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='CustomerExtLiabilityDialog_ImputedEmi'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='BFSD_ORIGINATION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='CustomerExtLiabilityDialog_Ownership'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='BFSD_ORIGINATION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='CustomerExtLiabilityDialog_LastInTwentyFourMths'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='BFSD_ORIGINATION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='CustomerExtLiabilityDialog_LastInSixMths'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='BFSD_ORIGINATION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='CustomerExtLiabilityDialog_LastInThreeMths'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='BFSD_ORIGINATION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='CustomerExtLiabilityDialog_CurrentOverdue'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
                
				UPDATE SeqSecGroups SET SeqNo= (SELECT MAX(GRPID) FROM ( SELECT GRPID FROM SECGROUPS UNION SELECT GRPID FROM SECGROUPS_TEMP)t);
				UPDATE SeqSecRights SET SeqNo= (SELECT MAX(rightid) FROM SecRights );	
				UPDATE SeqSecGroupRights SET SeqNo= (SELECT MAX(GRPrightID) FROM (SELECT GRPrightID FROM SecGroupRights UNION SELECT GRPrightID FROM SecGroupRights_Temp)t);
		 ]]>
		</sql>
	</changeSet>
	
	<changeSet id="530" author="Varaprasad.K">
		<sql>
			<![CDATA[
			        DELETE FROM SecRights where RightName='button_financialSummaryDialog_btnDelphi';
					DELETE FROM SECGROUPRIGHTS Where GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='DelphiCheckDetails') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_financialSummaryDialog_btnDelphi');
					DELETE FROM SECGROUPS Where Grpcode='DelphiCheckDetails';
					
					INSERT INTO SECGROUPS values ((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'DelphiCheckDetails','Insurance Calculation Button Visibility Group', 0,1000,CURRENT_TIMESTAMP,' ',' ',null,' ',' ',' ',0);
					INSERT INTO SecRights values ((select MAX(rightid+1) from SecRights),2,'button_financialSummaryDialog_btnDelphi','VASRecordingList',0,1000,'2017-01-03 12:41:37','Approved',' ',' ',' ',' ',' ',0);
					INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='DelphiCheckDetails') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_financialSummaryDialog_btnDelphi'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
					
					UPDATE SeqSecGroups SET SeqNo= (SELECT MAX(GRPID) FROM ( SELECT GRPID FROM SECGROUPS UNION SELECT GRPID FROM SECGROUPS_TEMP)t);
					UPDATE SeqSecRights SET SeqNo= (SELECT MAX(rightid) FROM SecRights );	
					UPDATE SeqSecGroupRights SET SeqNo= (SELECT MAX(GRPrightID) FROM (SELECT GRPrightID FROM SecGroupRights UNION SELECT GRPrightID FROM SecGroupRights_Temp)t);
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="531" author="Durga Prasad G">
		<sql>
		<![CDATA[
			 Delete from TemplateFields Where module = 'FIN' and field = 'pc_appDate';
			 INSERT INTO TemplateFields(module, field, fielddesc, fieldformat, event) VALUES ('FIN', 'pc_appDate', 'Application Date', 'A', 'Putcall');
		]]>
		</sql>
	</changeSet>
	
</databaseChangeLog>


