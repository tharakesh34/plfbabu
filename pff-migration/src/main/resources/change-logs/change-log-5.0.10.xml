<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

	<property name="add.schema" value="dbo." dbms="mssql" />
	<property name="add.schema" value="" dbms="oracle" />
	<property name="add.schema" value="" dbms="postgresql" />
	<property name="call.substr" value="substring" dbms="mssql" />
	<property name="call.substr" value="substr" dbms="oracle" />
	<property name="call.substr" value="substring" dbms="postgresql" />
	<property name="call.auditdb" value="PLFAVANSEQC.." dbms="mssql" />
	<property name="call.auditdb" value=" " dbms="oracle" />
	<property name="call.concatenate" value="+" dbms="mssql" />
	<property name="call.concatenate" value="||" dbms="oracle" />
	<property name="call.concatenate" value="||" dbms="postgresql" />
	<property name="call.collength" value="LEN" dbms="mssql" />
	<property name="call.collength" value="LENGTH" dbms="oracle" />
	<property name="call.collength" value="LENGTH" dbms="postgresql" />
	<property name="call.date" value="getdate()" dbms="mssql" />
	<property name="call.date" value="sysdate" dbms="oracle" />
	<property name="call.date" value="now()" dbms="postgresql" />

	<changeSet id="pre_run_for_pgp" author="Adarsh" runAlways="true" dbms="postgresql">
		<sql>
			Set search_path = plf,public,pg_catalog;
		</sql>
	</changeSet>

<changeSet id="pre_run_for_pgp" author="Adarsh" runAlways="true" dbms="postgresql">
		<sql>
			Set search_path = plf,public,pg_catalog;
		</sql>
	</changeSet>

	<changeSet id="478" author="shinde.b">
		<addColumn tableName="RMTFinanceTypes">
			<column name="AutoApprove" type="boolean" defaultValueBoolean="0" />
		</addColumn>
	</changeSet>

	<changeSet id="479" author="Shinde.b">
		<addColumn tableName="RMTFinanceTypes_Temp">
			<column name="AutoApprove" type="boolean" defaultValueBoolean="0" />
		</addColumn>
	</changeSet>

	<changeSet id="480" author="Shinde.b">
		<sql>
			<![CDATA[
				Update RMTFinanceTypes set AutoApprove = 0;
				Update RMTFinanceTypes_Temp set AutoApprove = 0;
			]]>

		</sql>
	</changeSet>

	<changeSet id="481" author="Shinde.b">
		<createView viewName="RMTFINANCETYPES_VIEW" replaceIfExists="true">
				   SELECT t1.fintype,
					    t1.fincategory,
					    t1.fintypedesc,
					    t1.finccy,
					    t1.findayscaltype,
					    t1.finactype,
					    t1.fincontingentactype,
					    t1.finisgenref,
					    t1.finmaxamount,
					    t1.finminamount,
					    t1.finisopennewfinac,
					    t1.findftstmtfrq,
					    t1.finisalwmd,
					    t1.finschdmthd,
					    t1.finisalwgrace,
					    t1.finhistretension,
					    t1.equalrepayment,
					    t1.finratetype,
					    t1.finbaserate,
					    t1.finsplrate,
					    t1.finintrate,
					    t1.finminrate,
					    t1.finmaxrate,
					    t1.findftintfrq,
					    t1.finisintcpz,
					    t1.fincpzfrq,
					    t1.finisrvwalw,
					    t1.finrvwfrq,
					    t1.fingrcratetype,
					    t1.fingrcbaserate,
					    t1.fingrcsplrate,
					    t1.fingrcintrate,
					    t1.fingrcminrate,
					    t1.fingrcmaxrate,
					    t1.fingrcdftintfrq,
					    t1.fingrcisintcpz,
					    t1.fingrccpzfrq,
					    t1.fingrcisrvwalw,
					    t1.fingrcrvwfrq,
					    t1.finminterm,
					    t1.finmaxterm,
					    t1.findftterms,
					    t1.finrpyfrq,
					    t1.finrepaymethod,
					    t1.finisalwpartialrpy,
					    t1.finisalwdifferment,
					    t1.finmaxdifferment,
					    t1.finisalwearlyrpy,
					    t1.finisalwearlysettle,
					    t1.finodrpytries,
					    t1.finearlypayrule,
					    t1.finearlysettlerule,
					    t1.findepositrestrictedto,
					    t1.finaebuyorinception,
					    t1.finaesellormaturity,
					    t1.finisactive,
					    t1.version,
					    t1.lastmntby,
					    t1.lastmnton,
					    t1.recordstatus,
					    t1.rolecode,
					    t1.nextrolecode,
					    t1.taskid,
					    t1.nexttaskid,
					    t1.recordtype,
					    t1.workflowid,
					    t1.stepfinance,
					    t1.steppingmandatory,
					    t1.alwmanualsteps,
					    t1.alwdsteppolicies,
					    t1.dftsteppolicy,
					    t4.actypedesc lovdescfincontingentactypename,
					    t5.actypedesc lovdescfinactypename,
					    t1.finisdwpayrequired,
					    t1.finrvwrateapplfor,
					    t1.finalwratechangeanydate,
					    t1.finisintcpzatgrcend,
					    t1.finelgrulecode,
					    t1.limitelgrulecode,
					    t1.finschcalcodeonrvw,
					    t1.alwplandeferment,
					    t1.plandefercount,
					    t1.finassettype,
					    t1.pftpayactype,
					    t1.finisopenpftpayacc,
					    t31.actypedesc lovdescpftpayactypename,
					    t1.finisalwgrcrepay,
					    t1.fingrcschdmthd,
					    t1.fingrcmargin,
					    t1.finmargin,
					    t1.finscheduleon,
					    t1.fingrcscheduleon,
					    t1.fincommitmentreq,
					    t1.fincollateralreq,
					    t1.findepreciationreq,
					    t1.findepreciationfrq,
					    t1.finbankcontingentactype,
					    t1.finprovisionactype,
					    t38.actypedesc lovdescfinbankcontactypename,
					    t39.actypedesc lovdescfinprovisionactypename,
					    t1.allowriainvestment,
					    t1.overridelimit,
					    t1.limitrequired,
					    t1.fincommitmentovrride,
					    t1.fincollateralovrride,
					    t1.finpftunchanged,
					    t1.applyodpenalty,
					    t1.odincgrcdays,
					    t1.odchargetype,
					    t1.odgracedays,
					    t1.odchargecalon,
					    t1.odchargeamtorperc,
					    t1.odallowwaiver,
					    t1.odmaxwaiverperc,
					    t1.findivision,
					    t48.divisioncodedesc lovdescfindivisionname,
					    t48.entitycode lovdescentitycode,
					    t1.finsuspactype,
					    t49.actypedesc lovdescfinsuspactypename,
					    t1.product,
					    t1.startdate,
					    t1.enddate,
					    t1.allowdownpaypgm,
					    t1.fintypedesc lovdescpromofintypedesc,
					    t1.remarks,
					    t1.alwearlypaymethods,
					    t1.pastduepftcalmthd,
					    t1.pastduepftmargin,
					    t1.alwadvancerent,
					    t1.grcadvbaserate,
					    t1.grcadvmargin,
					    t1.grcadvpftrate,
					    t1.rpyadvbaserate,
					    t1.rpyadvmargin,
					    t1.rpyadvpftrate,
					    t1.rolloverfinance,
					    t1.rolloverfrq,
					    t1.downpayrule,
					    t59.rulecode downpayrulecode,
					    t59.rulecodedesc  downpayruledesc,
					    t1.finsusptrigger,
					    t1.finsuspremarks,
					    t1.alwmultipartydisb,
					    t1.collateraltype,
					    t1.tdsapplicable,
					    t1.manualschedule,
					    t1.applygrcpricing,
					    t1.grcpricingmethod,
					    t1.applyrpypricing,
					    t1.rpypricingmethod,
					    t1.rpyhierarchy,
					    t67.rulecode grcpricingmethoddesc,
					    t68.rulecode rpypricingmethoddesc,
					    t1.droplineod,
					    t1.droppingmethod,
					    t1.ratechganyday,
					    t1.finrepaypftonfrq,
					    t1.alwbpi,
					    t1.bpitreatment,
					    t1.pftdueschon,
					    t1.planemihalw,
					    t1.planemihmethod,
					    t1.planemihmaxperyear,
					    t1.planemihmax,
					    t1.planemihlockperiod,
					    t1.planemicpz,
					    t1.unplanemihlockperiod,
					    t1.unplanemicpz,
					    t1.reagecpz,
					    t1.fddlockperiod,
					    t1.alwdrpymethods,
					    t1.maxunplannedemi,
					    t1.maxreageholidays,
					    t1.roundingmode,
					    t1.roundingtarget,
					    t1.frequencydays,
					    t1.quickdisb,
					    t1.alwmaxdisbcheckreq,
					    t1.alwreage,
					    t1.alwunplanemiholiday,
					    t1.profitcenterid,
					    t69.profitcentercode,
					    t69.profitcenterdesc,
					    t1.productcategory,
					    t2.productdesc fincategorydesc,
					    t1.developerfinance,
					    t1.costoffunds,
					    t1.chequecapturereq,
					    t1.finltvcheck,
					    t1.partiallysecured,
					    t1.alwadvemi,
					    t1.advemiminterms,
					    t1.advemimaxterms,
					    t1.advemidftterms,
					    t1.advemischdmthd,
					    t1.bpipftdaysbasis,
					    t1.eligibilitymethods,
					    t1.alwhybridrate,
					    t1.fixedratetenor,
					    t1.odmincapamount,
					    t1.odrulecode,
					    t1.alwzerointacc,
					    t1.autorejectiondays,
					    t1.taxnomand,
					    t1.putcallrequired,
					    t1.grcadvintersetreq,
					    t1.grcadvtype,
					    t1.grcadvminterms,
					    t1.grcadvmaxterms,
					    t1.grcadvdefaultterms,
					    t1.advintersetreq,
					    t1.advtype,
					    t1.advminterms,
					    t1.advmaxterms,
					    t1.advdefaultterms,
					    t1.advstage,
					    t1.dsfreq,
					    t1.cashcollateralreq,
					    t1.tdsallowtomodify,
					    t1.tdsapplicableto,
					    t1.alwvan,
					    t1.vanallocationmethod,
					    t1.allowdrawingpower,
					    t1.allowrevolving,
					    t1.alwsanctionamt,
					    t1.alwsanctionamtoverride,
					    t1.sanbsdschdle,
					    t1.finisratervwatgrcend,
					    t1.schdonpmtcal,
						t1.autoApprove
			     FROM rmtfinancetypes_temp t1
			     LEFT JOIN bmtproduct t2 ON t1.fincategory  = t2.productcode 
			     LEFT JOIN rmtaccounttypes t4 ON t1.fincontingentactype  = t4.actype 
			     LEFT JOIN rmtaccounttypes t38 ON t1.finbankcontingentactype  = t38.actype 
			     LEFT JOIN rmtaccounttypes t39 ON t1.finprovisionactype  = t39.actype 
			     LEFT JOIN rmtaccounttypes t5 ON t1.finactype  = t5.actype 
			     LEFT JOIN rmtaccounttypes t31 ON t1.pftpayactype  = t31.actype 
			     LEFT JOIN smtdivisiondetail t48 ON t1.findivision  = t48.divisioncode 
			     LEFT JOIN rmtaccounttypes t49 ON t1.finsuspactype  = t49.actype 
			     LEFT JOIN rules t59 ON t1.downpayrule = t59.ruleid
			     LEFT JOIN rules t67 ON t1.grcpricingmethod = t67.ruleid
			     LEFT JOIN rules t68 ON t1.rpypricingmethod = t68.ruleid
			     LEFT JOIN profitcenters t69 ON t69.profitcenterid = t1.profitcenterid
					 UNION ALL
					 SELECT t1.fintype,
					    t1.fincategory,
					    t1.fintypedesc,
					    t1.finccy,
					    t1.findayscaltype,
					    t1.finactype,
					    t1.fincontingentactype,
					    t1.finisgenref,
					    t1.finmaxamount,
					    t1.finminamount,
					    t1.finisopennewfinac,
					    t1.findftstmtfrq,
					    t1.finisalwmd,
					    t1.finschdmthd,
					    t1.finisalwgrace,
					    t1.finhistretension,
					    t1.equalrepayment,
					    t1.finratetype,
					    t1.finbaserate,
					    t1.finsplrate,
					    t1.finintrate,
					    t1.finminrate,
					    t1.finmaxrate,
					    t1.findftintfrq,
					    t1.finisintcpz,
					    t1.fincpzfrq,
					    t1.finisrvwalw,
					    t1.finrvwfrq,
					    t1.fingrcratetype,
					    t1.fingrcbaserate,
					    t1.fingrcsplrate,
					    t1.fingrcintrate,
					    t1.fingrcminrate,
					    t1.fingrcmaxrate,
					    t1.fingrcdftintfrq,
					    t1.fingrcisintcpz,
					    t1.fingrccpzfrq,
					    t1.fingrcisrvwalw,
					    t1.fingrcrvwfrq,
					    t1.finminterm,
					    t1.finmaxterm,
					    t1.findftterms,
					    t1.finrpyfrq,
					    t1.finrepaymethod,
					    t1.finisalwpartialrpy,
					    t1.finisalwdifferment,
					    t1.finmaxdifferment,
					    t1.finisalwearlyrpy,
					    t1.finisalwearlysettle,
					    t1.finodrpytries,
					    t1.finearlypayrule,
					    t1.finearlysettlerule,
					    t1.findepositrestrictedto,
					    t1.finaebuyorinception,
					    t1.finaesellormaturity,
					    t1.finisactive,
					    t1.version,
					    t1.lastmntby,
					    t1.lastmnton,
					    t1.recordstatus,
					    t1.rolecode,
					    t1.nextrolecode,
					    t1.taskid,
					    t1.nexttaskid,
					    t1.recordtype,
					    t1.workflowid,
					    t1.stepfinance,
					    t1.steppingmandatory,
					    t1.alwmanualsteps,
					    t1.alwdsteppolicies,
					    t1.dftsteppolicy,
					    t4.actypedesc lovdescfincontingentactypename,
					    t5.actypedesc lovdescfinactypename,
					    t1.finisdwpayrequired,
					    t1.finrvwrateapplfor,
					    t1.finalwratechangeanydate,
					    t1.finisintcpzatgrcend,
					    t1.finelgrulecode,
					    t1.limitelgrulecode,
					    t1.finschcalcodeonrvw,
					    t1.alwplandeferment,
					    t1.plandefercount,
					    t1.finassettype,
					    t1.pftpayactype,
					    t1.finisopenpftpayacc,
					    t31.actypedesc lovdescpftpayactypename,
					    t1.finisalwgrcrepay,
					    t1.fingrcschdmthd,
					    t1.fingrcmargin,
					    t1.finmargin,
					    t1.finscheduleon,
					    t1.fingrcscheduleon,
					    t1.fincommitmentreq,
					    t1.fincollateralreq,
					    t1.findepreciationreq,
					    t1.findepreciationfrq,
					    t1.finbankcontingentactype,
					    t1.finprovisionactype,
					    t38.actypedesc lovdescfinbankcontactypename,
					    t39.actypedesc lovdescfinprovisionactypename,
					    t1.allowriainvestment,
					    t1.overridelimit,
					    t1.limitrequired,
					    t1.fincommitmentovrride,
					    t1.fincollateralovrride,
					    t1.finpftunchanged,
					    t1.applyodpenalty,
					    t1.odincgrcdays,
					    t1.odchargetype,
					    t1.odgracedays,
					    t1.odchargecalon,
					    t1.odchargeamtorperc,
					    t1.odallowwaiver,
					    t1.odmaxwaiverperc,
					    t1.findivision,
					    t48.divisioncodedesc lovdescfindivisionname,
					    t48.entitycode lovdescentitycode,
					    t1.finsuspactype,
					    t49.actypedesc lovdescfinsuspactypename,
					    t1.product,
					    t1.startdate,
					    t1.enddate,
					    t1.allowdownpaypgm,
					    t1.fintypedesc lovdescpromofintypedesc,
					    t1.remarks,
					    t1.alwearlypaymethods,
					    t1.pastduepftcalmthd,
					    t1.pastduepftmargin,
					    t1.alwadvancerent,
					    t1.grcadvbaserate,
					    t1.grcadvmargin,
					    t1.grcadvpftrate,
					    t1.rpyadvbaserate,
					    t1.rpyadvmargin,
					    t1.rpyadvpftrate,
					    t1.rolloverfinance,
					    t1.rolloverfrq,
					    t1.downpayrule,
					    t59.rulecode downpayrulecode,
					    t59.rulecodedesc downpayruledesc,
					    t1.finsusptrigger,
					    t1.finsuspremarks,
					    t1.alwmultipartydisb,
					    t1.collateraltype,
					    t1.tdsapplicable,
					    t1.manualschedule,
					    t1.applygrcpricing,
					    t1.grcpricingmethod,
					    t1.applyrpypricing,
					    t1.rpypricingmethod,
					    t1.rpyhierarchy,
					    t67.rulecode grcpricingmethoddesc,
					    t68.rulecode rpypricingmethoddesc,
					    t1.droplineod,
					    t1.droppingmethod,
					    t1.ratechganyday,
					    t1.finrepaypftonfrq,
					    t1.alwbpi,
					    t1.bpitreatment,
					    t1.pftdueschon,
					    t1.planemihalw,
					    t1.planemihmethod,
					    t1.planemihmaxperyear,
					    t1.planemihmax,
					    t1.planemihlockperiod,
					    t1.planemicpz,
					    t1.unplanemihlockperiod,
					    t1.unplanemicpz,
					    t1.reagecpz,
					    t1.fddlockperiod,
					    t1.alwdrpymethods,
					    t1.maxunplannedemi,
					    t1.maxreageholidays,
					    t1.roundingmode,
					    t1.roundingtarget,
					    t1.frequencydays,
					    t1.quickdisb,
					    t1.alwmaxdisbcheckreq,
					    t1.alwreage,
					    t1.alwunplanemiholiday,
					    t1.profitcenterid,
					    t69.profitcentercode,
					    t69.profitcenterdesc,
					    t1.productcategory,
					    t2.productdesc fincategorydesc,
					    t1.developerfinance,
					    t1.costoffunds,
					    t1.chequecapturereq,
					    t1.finltvcheck,
					    t1.partiallysecured,
					    t1.alwadvemi,
					    t1.advemiminterms,
					    t1.advemimaxterms,
					    t1.advemidftterms,
					    t1.advemischdmthd,
					    t1.bpipftdaysbasis,
					    t1.eligibilitymethods,
					    t1.alwhybridrate,
					    t1.fixedratetenor,
					    t1.odmincapamount,
					    t1.odrulecode,
					    t1.alwzerointacc,
					    t1.autorejectiondays,
					    t1.taxnomand,
					    t1.putcallrequired,
					    t1.grcadvintersetreq,
					    t1.grcadvtype,
					    t1.grcadvminterms,
					    t1.grcadvmaxterms,
					    t1.grcadvdefaultterms,
					    t1.advintersetreq,
					    t1.advtype,
					    t1.advminterms,
					    t1.advmaxterms,
					    t1.advdefaultterms,
					    t1.advstage,
					    t1.dsfreq,
					    t1.cashcollateralreq,
					    t1.tdsallowtomodify,
					    t1.tdsapplicableto,
					    t1.alwvan,
					    t1.vanallocationmethod,
					    t1.allowdrawingpower,
					    t1.allowrevolving,
					    t1.alwsanctionamt,
					    t1.alwsanctionamtoverride,
					    t1.sanbsdschdle,
					    t1.finisratervwatgrcend,
					    t1.schdonpmtcal,
						t1.autoApprove
					   FROM rmtfinancetypes t1
					     LEFT JOIN bmtproduct t2 ON t1.fincategory  = t2.productcode 
					     LEFT JOIN rmtaccounttypes t4 ON t1.fincontingentactype  = t4.actype 
					     LEFT JOIN rmtaccounttypes t38 ON t1.finbankcontingentactype  = t38.actype 
					     LEFT JOIN rmtaccounttypes t39 ON t1.finprovisionactype  = t39.actype 
					     LEFT JOIN rmtaccounttypes t5 ON t1.finactype  = t5.actype 
					     LEFT JOIN rmtaccounttypes t31 ON t1.pftpayactype  = t31.actype 
					     LEFT JOIN smtdivisiondetail t48 ON t1.findivision  = t48.divisioncode 
					     LEFT JOIN rmtaccounttypes t49 ON t1.finsuspactype  = t49.actype 
					     LEFT JOIN rules t59 ON t1.downpayrule = t59.ruleid
					     LEFT JOIN rules t67 ON t1.grcpricingmethod = t67.ruleid
					     LEFT JOIN rules t68 ON t1.rpypricingmethod = t68.ruleid
					     LEFT JOIN profitcenters t69 ON t69.profitcenterid = t1.profitcenterid
					  WHERE NOT (EXISTS ( SELECT 1 expr1
					     FROM rmtfinancetypes_temp
					     WHERE rmtfinancetypes_temp.fintype  = t1.fintype ))
			   </createView>
	</changeSet>

	<changeSet id="481.1" author="Shinde.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_aview');
		 	]]>
		</sql>
	</changeSet>
	
	
	<changeSet id="482" author="Shinde.b">
		<createView viewName="RMTFINANCETYPES_AVIEW" replaceIfExists="true">
			 SELECT t1.fintype,
				    t1.fincategory,
				    t1.fintypedesc,
				    t1.finccy,
				    t1.findayscaltype,
				    t1.finactype,
				    t1.fincontingentactype,
				    t1.finisgenref,
				    t1.finmaxamount,
				    t1.finminamount,
				    t1.finisopennewfinac,
				    t1.findftstmtfrq,
				    t1.finisalwmd,
				    t1.finschdmthd,
				    t1.finisalwgrace,
				    t1.finhistretension,
				    t1.equalrepayment,
				    t1.finratetype,
				    t1.finbaserate,
				    t1.finsplrate,
				    t1.finintrate,
				    t1.finminrate,
				    t1.finmaxrate,
				    t1.findftintfrq,
				    t1.finisintcpz,
				    t1.fincpzfrq,
				    t1.finisrvwalw,
				    t1.finrvwfrq,
				    t1.fingrcratetype,
				    t1.fingrcbaserate,
				    t1.fingrcsplrate,
				    t1.fingrcintrate,
				    t1.fingrcminrate,
				    t1.fingrcmaxrate,
				    t1.fingrcdftintfrq,
				    t1.fingrcisintcpz,
				    t1.fingrccpzfrq,
				    t1.fingrcisrvwalw,
				    t1.fingrcrvwfrq,
				    t1.finminterm,
				    t1.finmaxterm,
				    t1.findftterms,
				    t1.finrpyfrq,
				    t1.finrepaymethod,
				    t1.finisalwpartialrpy,
				    t1.finisalwdifferment,
				    t1.finmaxdifferment,
				    t1.finisalwearlyrpy,
				    t1.finisalwearlysettle,
				    t1.finodrpytries,
				    t1.finearlypayrule,
				    t1.finearlysettlerule,
				    t1.findepositrestrictedto,
				    t1.finaebuyorinception,
				    t1.finaesellormaturity,
				    t1.finisactive,
				    t1.version,
				    t1.lastmntby,
				    t1.lastmnton,
				    t1.recordstatus,
				    t1.rolecode,
				    t1.nextrolecode,
				    t1.taskid,
				    t1.nexttaskid,
				    t1.recordtype,
				    t1.workflowid,
				    t1.stepfinance,
				    t1.steppingmandatory,
				    t1.alwmanualsteps,
				    t1.alwdsteppolicies,
				    t1.dftsteppolicy,
				    t4.actypedesc lovdescfincontingentactypename,
				    t5.actypedesc lovdescfinactypename,
				    t1.finisdwpayrequired,
				    t1.finrvwrateapplfor,
				    t1.finalwratechangeanydate,
				    t1.finisintcpzatgrcend,
				    t1.finelgrulecode,
				    t1.limitelgrulecode,
				    t1.finschcalcodeonrvw,
				    t1.alwplandeferment,
				    t1.plandefercount,
				    t1.finassettype,
				    t1.pftpayactype,
				    t1.finisopenpftpayacc,
				    t31.actypedesc lovdescpftpayactypename,
				    t1.finisalwgrcrepay,
				    t1.fingrcschdmthd,
				    t1.fingrcmargin,
				    t1.finmargin,
				    t1.finscheduleon,
				    t1.fingrcscheduleon,
				    t1.fincommitmentreq,
				    t1.fincollateralreq,
				    t1.findepreciationreq,
				    t1.findepreciationfrq,
				    t1.finbankcontingentactype,
				    t1.finprovisionactype,
				    t38.actypedesc lovdescfinbankcontactypename,
				    t39.actypedesc lovdescfinprovisionactypename,
				    t1.allowriainvestment,
				    t1.overridelimit,
				    t1.limitrequired,
				    t1.fincommitmentovrride,
				    t1.fincollateralovrride,
				    t1.finpftunchanged,
				    t1.applyodpenalty,
				    t1.odincgrcdays,
				    t1.odchargetype,
				    t1.odgracedays,
				    t1.odchargecalon,
				    t1.odchargeamtorperc,
				    t1.odallowwaiver,
				    t1.odmaxwaiverperc,
				    t1.findivision,
				    t48.divisioncodedesc lovdescfindivisionname,
				    t48.entitycode lovdescentitycode,
				    t1.finsuspactype,
				    t49.actypedesc lovdescfinsuspactypename,
				    t1.product,
				    t1.startdate,
				    t1.enddate,
				    t1.allowdownpaypgm,
				    t1.remarks,
				    t1.alwearlypaymethods,
				    t1.pastduepftcalmthd,
				    t1.pastduepftmargin,
				    t1.alwadvancerent,
				    t1.grcadvbaserate,
				    t1.grcadvmargin,
				    t1.grcadvpftrate,
				    t1.rpyadvbaserate,
				    t1.rpyadvmargin,
				    t1.rpyadvpftrate,
				    t1.rolloverfinance,
				    t1.rolloverfrq,
				    t1.downpayrule,
				    t59.rulecode downpayrulecode,
				    t59.rulecodedesc downpayruledesc,
				    t1.finsusptrigger,
				    t1.finsuspremarks,
				    t1.alwmultipartydisb,
				    t1.collateraltype,
				    t1.tdsapplicable,
				    t1.manualschedule,
				    t1.applygrcpricing,
				    t1.grcpricingmethod,
				    t1.applyrpypricing,
				    t1.rpypricingmethod,
				    t1.rpyhierarchy,
				    t67.rulecode grcpricingmethoddesc,
				    t68.rulecode rpypricingmethoddesc,
				    t1.droplineod,
				    t1.droppingmethod,
				    t1.ratechganyday,
				    t1.finrepaypftonfrq,
				    t1.alwbpi,
				    t1.bpitreatment,
				    t1.pftdueschon,
				    t1.planemihalw,
				    t1.planemihmethod,
				    t1.planemihmaxperyear,
				    t1.planemihmax,
				    t1.planemihlockperiod,
				    t1.planemicpz,
				    t1.unplanemihlockperiod,
				    t1.unplanemicpz,
				    t1.reagecpz,
				    t1.fddlockperiod,
				    t1.alwdrpymethods,
				    t1.maxunplannedemi,
				    t1.maxreageholidays,
				    t1.roundingmode,
				    t1.roundingtarget,
				    t1.frequencydays,
				    t1.quickdisb,
				    t1.alwreage,
				    t1.alwunplanemiholiday,
				    t1.alwmaxdisbcheckreq,
				    t1.fintypedesc lovdescpromofintypedesc,
				    t1.profitcenterid,
				    t69.profitcentercode,
				    t69.profitcenterdesc,
				    t1.productcategory,
				    t2.productdesc fincategorydesc,
				    t1.developerfinance,
				    t1.costoffunds,
				    t1.chequecapturereq,
				    t1.finltvcheck,
				    t1.partiallysecured,
				    t1.alwadvemi,
				    t1.advemiminterms,
				    t1.advemimaxterms,
				    t1.advemidftterms,
				    t1.advemischdmthd,
				    t1.bpipftdaysbasis,
				    t1.eligibilitymethods,
				    t1.alwhybridrate,
				    t1.fixedratetenor,
				    t1.odmincapamount,
				    t1.odrulecode,
				    t1.alwzerointacc,
				    t1.autorejectiondays,
				    t1.taxnomand,
				    t1.putcallrequired,
				    t1.grcadvintersetreq,
				    t1.grcadvtype,
				    t1.grcadvminterms,
				    t1.grcadvmaxterms,
				    t1.grcadvdefaultterms,
				    t1.advintersetreq,
				    t1.advtype,
				    t1.advminterms,
				    t1.advmaxterms,
				    t1.advdefaultterms,
				    t1.advstage,
				    t1.dsfreq,
				    t1.cashcollateralreq,
				    t1.tdsallowtomodify,
				    t1.tdsapplicableto,
				    t1.alwvan,
				    t1.vanallocationmethod,
				    t1.allowdrawingpower,
				    t1.allowrevolving,
				    t1.alwsanctionamt,
				    t1.alwsanctionamtoverride,
				    t1.sanbsdschdle,
				    t1.finisratervwatgrcend,
				    t1.schdonpmtcal,
				   t1.autoApprove
				   FROM rmtfinancetypes t1
				     LEFT JOIN bmtproduct t2 ON t1.fincategory  = t2.productcode 
				     LEFT JOIN rmtaccounttypes t4 ON t1.fincontingentactype  = t4.actype 
				     LEFT JOIN rmtaccounttypes t38 ON t1.finbankcontingentactype  = t38.actype 
				     LEFT JOIN rmtaccounttypes t39 ON t1.finprovisionactype  = t39.actype 
				     LEFT JOIN rmtaccounttypes t5 ON t1.finactype  = t5.actype 
				     LEFT JOIN rmtaccounttypes t31 ON t1.pftpayactype  = t31.actype 
				     LEFT JOIN smtdivisiondetail t48 ON t1.findivision  = t48.divisioncode 
				     LEFT JOIN rmtaccounttypes t49 ON t1.finsuspactype  = t49.actype 
				     LEFT JOIN rules t59 ON t1.downpayrule = t59.ruleid
				     LEFT JOIN rules t67 ON t1.grcpricingmethod = t67.ruleid
				     LEFT JOIN rules t68 ON t1.rpypricingmethod = t68.ruleid
				     LEFT JOIN profitcenters t69 ON t69.profitcenterid = t1.profitcenterid
	     </createView>
	</changeSet> 

	<changeSet id="484" author="Shinde.b" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_restore_dependencies ('plf', 'rmtfinancetypes_aview');
			]]>
		</sql>
	</changeSet>
 
	<changeSet id="485" author="Shinde.b">
		<createView viewName="RMTFINANCETYPES_ORGVIEW" replaceIfExists="true">
			 SELECT t1.fintype,
			    t1.fincategory,
			    t1.fintypedesc,
			    t1.finccy,
			    t1.findayscaltype,
			    t1.finactype,
			    t1.fincontingentactype,
			    t1.finisgenref,
			    t1.finmaxamount,
			    t1.finminamount,
			    t1.finisopennewfinac,
			    t1.finisalwmd,
			    t1.finschdmthd,
			    t1.finisalwgrace,
			    t1.equalrepayment,
			    t1.finratetype,
			    t1.finbaserate,
			    t1.finsplrate,
			    t1.finintrate,
			    t1.finminrate,
			    t1.finmaxrate,
			    t1.findftintfrq,
			    t1.finisintcpz,
			    t1.fincpzfrq,
			    t1.finisrvwalw,
			    t1.finrvwfrq,
			    t1.fingrcratetype,
			    t1.fingrcbaserate,
			    t1.fingrcsplrate,
			    t1.fingrcintrate,
			    t1.fingrcminrate,
			    t1.fingrcmaxrate,
			    t1.fingrcdftintfrq,
			    t1.fingrcisintcpz,
			    t1.fingrccpzfrq,
			    t1.fingrcisrvwalw,
			    t1.fingrcrvwfrq,
			    t1.finminterm,
			    t1.finmaxterm,
			    t1.findftterms,
			    t1.finrpyfrq,
			    t1.finrepaymethod,
			    t1.finisalwdifferment,
			    t1.finmaxdifferment,
			    t1.finisactive,
			    t1.stepfinance,
			    t1.steppingmandatory,
			    t1.alwmanualsteps,
			    t1.alwdsteppolicies,
			    t1.dftsteppolicy,
			    t1.finisdwpayrequired,
			    t1.finrvwrateapplfor,
			    t1.finalwratechangeanydate,
			    t1.finisintcpzatgrcend,
			    t1.finschcalcodeonrvw,
			    t1.alwplandeferment,
			    t1.plandefercount,
			    t1.pftpayactype,
			    t1.finisopenpftpayacc,
			    t1.finisalwgrcrepay,
			    t1.fingrcschdmthd,
			    t1.fingrcmargin,
			    t1.finmargin,
			    t1.fincommitmentreq,
			    t1.fincollateralreq,
			    t1.findepreciationreq,
			    t1.findepreciationfrq,
			    t1.finbankcontingentactype,
			    t1.finprovisionactype,
			    t1.allowriainvestment,
			    t1.overridelimit,
			    t1.limitrequired,
			    t1.fincommitmentovrride,
			    t1.fincollateralovrride,
			    t1.finrepaypftonfrq,
			    t1.finpftunchanged,
			    t1.applyodpenalty,
			    t1.odincgrcdays,
			    t1.odchargetype,
			    t1.odgracedays,
			    t1.odchargecalon,
			    t1.odchargeamtorperc,
			    t1.odallowwaiver,
			    t1.odmaxwaiverperc,
			    t1.findivision,
			    t3.divisioncodedesc lovdescfindivisionname,
			    t1.finsuspactype,
			    t1.product,
			    t1.startdate,
			    t1.enddate,
			    t1.allowdownpaypgm,
			    t1.fintypedesc lovdescpromofintypedesc,
			    t1.remarks,
			    t4.policydesc lovdescdftsteppolicyname,
			    t1.pastduepftcalmthd,
			    t1.pastduepftmargin,
			    t1.alwadvancerent,
			    t1.grcadvbaserate,
			    t1.grcadvmargin,
			    t1.grcadvpftrate,
			    t1.rpyadvbaserate,
			    t1.rpyadvmargin,
			    t1.rpyadvpftrate,
			    t1.rolloverfinance,
			    t1.rolloverfrq,
			    t1.downpayrule,
			    t1.alwmultipartydisb,
			    t1.collateraltype,
			    t1.tdsapplicable,
			    t5.rulecode downpayrulecode,
			    t5.rulecodedesc downpayruledesc,
			    t1.applygrcpricing,
			    t1.applyrpypricing,
			    t6.rulecode grcpricingmethoddesc,
			    t7.rulecode rpypricingmethoddesc,
			    t1.droplineod,
			    t1.droppingmethod,
			    t1.ratechganyday,
			    t4.steptype dftsteppolicytype,
			    t1.manualschedule,
			    t1.alwbpi,
			    t1.bpitreatment,
			    t1.pftdueschon,
			    t1.planemihalw,
			    t1.planemihmethod,
			    t1.planemihmaxperyear,
			    t1.planemihmax,
			    t1.planemihlockperiod,
			    t1.planemicpz,
			    t1.unplanemihlockperiod,
			    t1.unplanemicpz,
			    t1.reagecpz,
			    t1.fddlockperiod,
			    t1.alwdrpymethods,
			    t1.maxunplannedemi,
			    t1.maxreageholidays,
			    t1.roundingmode,
			    t1.roundingtarget,
			    t1.frequencydays,
			    t1.quickdisb,
			    t1.alwreage,
			    t1.alwunplanemiholiday,
			    t1.alwmaxdisbcheckreq,
			    t1.productcategory,
			    t1.rpyhierarchy,
			    t1.developerfinance,
			    t3.entitycode lovdescentitycode,
			    t8.entitydesc lovdescentitydesc,
			    t1.costoffunds,
			    t1.chequecapturereq,
			    t1.finltvcheck,
			    t1.partiallysecured,
			    t1.alwadvemi,
			    t1.advemiminterms,
			    t1.advemimaxterms,
			    t1.advemidftterms,
			    t1.advemischdmthd,
			    t1.bpipftdaysbasis,
			    t1.eligibilitymethods,
			    t1.alwhybridrate,
			    t1.fixedratetenor,
			    t1.odmincapamount,
			    t1.odrulecode,
			    t1.alwzerointacc,
			    t1.finisalwpartialrpy,
			    t1.autorejectiondays,
			    t1.taxnomand,
			    t1.putcallrequired,
			    t1.grcadvintersetreq,
			    t1.grcadvtype,
			    t1.grcadvminterms,
			    t1.grcadvmaxterms,
			    t1.grcadvdefaultterms,
			    t1.advintersetreq,
			    t1.advtype,
			    t1.advminterms,
			    t1.advmaxterms,
			    t1.advdefaultterms,
			    t1.advstage,
			    t1.dsfreq,
			    t1.cashcollateralreq,
			    t1.alwearlypaymethods,
			    t1.tdsallowtomodify,
			    t1.tdsapplicableto,
			    t1.alwvan,
			    t1.vanallocationmethod,
			    t1.allowdrawingpower,
			    t1.allowrevolving,
			    t1.alwsanctionamt,
			    t1.alwsanctionamtoverride,
			    t1.sanbsdschdle,
			    t1.finisratervwatgrcend,
			    t1.schdonpmtcal,
				t1.autoApprove
			   FROM rmtfinancetypes t1
	     JOIN smtdivisiondetail t3 ON t1.findivision  = t3.divisioncode 
	     LEFT JOIN steppolicyheader t4 ON t1.dftsteppolicy  = t4.policycode 
	     LEFT JOIN rules t5 ON t1.downpayrule = t5.ruleid
	     LEFT JOIN rules t6 ON t1.grcpricingmethod = t6.ruleid
	     LEFT JOIN rules t7 ON t1.rpypricingmethod = t7.ruleid
	     LEFT JOIN entity t8 ON t3.entitycode  = t8.entitycode 
	</createView>
	</changeSet>

	<changeSet id="486" author="Shinde.b">
		<sql>
   			 <![CDATA[
        		Insert into SMTPARAMETERS (SYSPARMCODE,SYSPARMDESC,SYSPARMTYPE,SYSPARMMAINT,SYSPARMVALUE,SYSPARMLENGTH,SYSPARMDEC,SYSPARMLIST,SYSPARMVALDMOD,SYSPARMDESCRIPTION,VERSION,LASTMNTBY,LASTMNTON,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID) values ('ALLOW_QUICK_DISB','Allow Quick Disbursement ','String',1,'N',3,0,null,null,' Allow Quick Disbursement',1,1000,current_timestamp,'Approved',null,null,null,null,null,0);
     		]]>
		</sql>
	</changeSet>

	<changeSet id="487" author="Shinde.b">
		<sql>
		    <![CDATA[
		         Update SeqSecRights set SeqNo = (Select max(RightId)+1 from SecRights);
		         INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),3,'FinanceTypeDialog_AllowAutoApprove','FinanceTypeDialog',0,1000,current_timestamp,'Approved','',' ',' ',' ',' ',0);
		         Update SeqSecRights set SeqNo = (Select max(RightId)+1  from SecRights);
		     ]]>
		</sql>
	</changeSet>

	<changeSet id="488" author="Shinde.b">
		<createTable tableName="QDPVALIDITYDAYS">
			<column name="DisbMode" type="varchar(8)">
				<constraints nullable="false" />
			</column>
			<column name="NoOfDays" type="smallint" />
		</createTable>
	</changeSet>

	<changeSet id="489" author="Shinde.b">
		<sql>
			 <![CDATA[
				Insert into QDPVALIDITYDAYS (DISBMODE,NOOFDAYS) values ('CHEQUE', 90);
				Insert into QDPVALIDITYDAYS (DISBMODE,NOOFDAYS) values ('NEFT', 30);
				Insert into QDPVALIDITYDAYS (DISBMODE,NOOFDAYS) values ('RTGS', 30); 
				Insert into QDPVALIDITYDAYS (DISBMODE,NOOFDAYS) values ('IMPS', 30);
				Insert into QDPVALIDITYDAYS (DISBMODE,NOOFDAYS) values ('DD', 30);
			 ]]>
		</sql>
	</changeSet>

	<changeSet id="490" author="Shinde.b">
		<addColumn tableName="Findisbursementdetails_Temp">
			<column name="QuickDisb" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="491" author="Shinde.b">
		<addColumn tableName="Findisbursementdetails">
			<column name="QuickDisb" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="492" author="Shinde.b">
		<createTable tableName="Batch_Process_Status">
			<column name="BatchName" type="varchar(30)">
				<constraints nullable="false" />
			</column>
			<column name="StartTime" type="datetime" />
			<column name="EndTime" type="datetime" />
			<column name="Status" type="Char(1)" />
			<column name="Remarks" type="varchar(500)" />
		</createTable>
	</changeSet>

	<changeSet id="493" author="Shinde.b">
		<addColumn tableName="Findisbursementdetails_log">
			<column name="QuickDisb" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="494" author="Shinde.b">
		<sql>
			<![CDATA[
				update Findisbursementdetails_log set quickdisb = 0;
				update Findisbursementdetails_Temp set quickdisb = 0;
				update Findisbursementdetails set quickdisb = 0;
			 ]]>
		</sql>
	</changeSet>

	<changeSet id="495" author="Shinde.b">
		<addColumn tableName="finAdvancePayments">
			<column name="realizationdate" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="496" author="Shinde.b">
		<addColumn tableName="finAdvancePayments_temp">
			<column name="realizationdate" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="497" author="Shinde.b">
		<createView viewName="FINADVANCEPAYMENTS_TVIEW" replaceIfExists="true">
		 SELECT t1.finreference,
		    t1.paymentid,
		    t1.paymentseq,
		    t1.paymentdetail,
		    t1.amttobereleased,
		    t1.liabilityholdname,
		    t1.transactionref,
		    t1.beneficiaryname,
		    t1.beneficiaryaccno,
		    t1.reenterbeneficiaryaccno,
		    t1.description,
		    t1.paymenttype,
		    t1.llreferenceno,
		    t1.lldate,
		    t1.custcontribution,
		    t1.sellercontribution,
		    t1.remarks,
		    t1.disbdate,
		    t1.disbseq,
		    t1.version,
		    t1.lastmntby,
		    t1.lastmnton,
		    t1.recordstatus,
		    t1.rolecode,
		    t1.nextrolecode,
		    t1.taskid,
		    t1.nexttaskid,
		    t1.recordtype,
		    t1.workflowid,
		    t1.bankcode,
		    t1.payableloc,
		    t1.printingloc,
		    t1.valuedate,
		    t1.bankbranchid,
		    t1.phonecountrycode,
		    t1.phoneareacode,
		    t1.phonenumber,
		    t1.clearingdate,
		    t1.status,
		    t1.active,
		    t1.inputdate,
		    t1.disbccy,
		    t1.poissued,
		    t3.bankcode branchbankcode,
		    t31.bankname branchbankname,
		    t3.branchcode,
		    t3.branchdesc,
		    t3.ifsc,
		    t3.city,
		    t4.bankname,
		    t1.partnerbankid,
		    t5.partnerbankcode,
		    t5.partnerbankname,
		    t1.linkedtranid,
		    t5.actype partnerbankactype,
		    t5.accountno partnerbankac,
		    t6.branchdesc printinglocdesc,
		    t1.rejectreason,
			t1.realizationdate
		   FROM finadvancepayments_temp t1
		     LEFT JOIN bankbranches t3 ON t1.bankbranchid = t3.bankbranchid
		     LEFT JOIN bmtbankdetail t31 ON t31.bankcode  = t3.bankcode 
		     LEFT JOIN bmtbankdetail t4 ON t1.bankcode  = t4.bankcode 
		     LEFT JOIN partnerbanks t5 ON t5.partnerbankid = t1.partnerbankid
		     LEFT JOIN bankbranches t6 ON t6.branchcode  = t1.printingloc 
    </createView>
	</changeSet>

	<changeSet id="498" author="Shinde.b">
		<createView viewName="FINADVANCEPAYMENTS_AVIEW" replaceIfExists="true">
			SELECT t1.finreference,
			   t1.paymentid,
			   t1.paymentseq,
			   t1.paymentdetail,
			   t1.amttobereleased,
			   t1.liabilityholdname,
			   t1.transactionref,
			   t1.beneficiaryname,
			   t1.beneficiaryaccno,
			   t1.reenterbeneficiaryaccno,
			   t1.description,
			   t1.paymenttype,
			   t1.llreferenceno,
			   t1.lldate,
			   t1.custcontribution,
			   t1.sellercontribution,
			   t1.remarks,
			   t1.disbdate,
			   t1.disbseq,
			   t1.version,
			   t1.lastmntby,
			   t1.lastmnton,
			   t1.recordstatus,
			   t1.rolecode,
			   t1.nextrolecode,
			   t1.taskid,
			   t1.nexttaskid,
			   t1.recordtype,
			   t1.workflowid,
			   t1.bankcode,
			   t1.payableloc,
			   t1.printingloc,
			   t1.valuedate,
			   t1.bankbranchid,
			   t1.phonecountrycode,
			   t1.phoneareacode,
			   t1.phonenumber,
			   t1.clearingdate,
			   t1.status,
			   t1.active,
			   t1.inputdate,
			   t1.disbccy,
			   t1.poissued,
			   t3.bankcode branchbankcode,
			   t31.bankname branchbankname,
			   t3.branchcode,
			   t3.branchdesc,
			   t3.ifsc,
			   t3.city,
			   t4.bankname,
			   t1.partnerbankid,
			   t5.partnerbankcode,
			   t5.partnerbankname,
			   t1.linkedtranid,
			   t5.actype partnerbankactype,
			   t5.accountno partnerbankac,
			   t6.branchdesc printinglocdesc,
			   t1.rejectreason,
			  t1.realizationdate
			  FROM finadvancepayments t1
			    LEFT JOIN bankbranches t3 ON t1.bankbranchid = t3.bankbranchid
			    LEFT JOIN bmtbankdetail t31 ON t31.bankcode  = t3.bankcode 
			    LEFT JOIN bmtbankdetail t4 ON t1.bankcode  = t4.bankcode 
			    LEFT JOIN partnerbanks t5 ON t5.partnerbankid = t1.partnerbankid
			    LEFT JOIN bankbranches t6 ON t6.branchcode  = t1.printingloc 
     </createView>
	</changeSet>

	<changeSet id="499" author="Shinde.b">
		<createView viewName="FINADVANCEPAYMENTS_VIEW" replaceIfExists="true">
			 SELECT t1.finreference,
			    t1.paymentid,
			    t1.paymentseq,
			    t1.paymentdetail,
			    t1.amttobereleased,
			    t1.liabilityholdname,
			    t1.transactionref,
			    t1.beneficiaryname,
			    t1.beneficiaryaccno,
			    t1.reenterbeneficiaryaccno,
			    t1.description,
			    t1.paymenttype,
			    t1.llreferenceno,
			    t1.lldate,
			    t1.custcontribution,
			    t1.sellercontribution,
			    t1.remarks,
			    t1.disbdate,
			    t1.disbseq,
			    t1.version,
			    t1.lastmntby,
			    t1.lastmnton,
			    t1.recordstatus,
			    t1.rolecode,
			    t1.nextrolecode,
			    t1.taskid,
			    t1.nexttaskid,
			    t1.recordtype,
			    t1.workflowid,
			    t1.bankcode,
			    t1.payableloc,
			    t1.printingloc,
			    t1.valuedate,
			    t1.bankbranchid,
			    t1.phonecountrycode,
			    t1.phoneareacode,
			    t1.phonenumber,
			    t1.clearingdate,
			    t1.status,
			    t1.active,
			    t1.inputdate,
			    t1.disbccy,
			    t1.poissued,
			    t3.bankcode branchbankcode,
			    t31.bankname branchbankname,
			    t3.branchcode,
			    t3.branchdesc,
			    t3.ifsc,
			    t3.city,
			    t4.bankname,
			    t1.partnerbankid,
			    t5.partnerbankcode,
			    t5.partnerbankname,
			    t1.linkedtranid,
			    t5.actype partnerbankactype,
			    t5.accountno partnerbankac,
			    t6.branchdesc printinglocdesc,
			    t1.rejectreason,
				t1.realizationdate
			   FROM finadvancepayments_temp t1
			     LEFT JOIN bankbranches t3 ON t1.bankbranchid = t3.bankbranchid
			     LEFT JOIN bmtbankdetail t31 ON t31.bankcode  = t3.bankcode 
			     LEFT JOIN bmtbankdetail t4 ON t1.bankcode  = t4.bankcode 
			     LEFT JOIN partnerbanks t5 ON t5.partnerbankid = t1.partnerbankid
			     LEFT JOIN bankbranches t6 ON t6.branchcode  = t1.printingloc 
			UNION ALL
			 SELECT t1.finreference,
			    t1.paymentid,
			    t1.paymentseq,
			    t1.paymentdetail,
			    t1.amttobereleased,
			    t1.liabilityholdname,
			    t1.transactionref,
			    t1.beneficiaryname,
			    t1.beneficiaryaccno,
			    t1.reenterbeneficiaryaccno,
			    t1.description,
			    t1.paymenttype,
			    t1.llreferenceno,
			    t1.lldate,
			    t1.custcontribution,
			    t1.sellercontribution,
			    t1.remarks,
			    t1.disbdate,
			    t1.disbseq,
			    t1.version,
			    t1.lastmntby,
			    t1.lastmnton,
			    t1.recordstatus,
			    t1.rolecode,
			    t1.nextrolecode,
			    t1.taskid,
			    t1.nexttaskid,
			    t1.recordtype,
			    t1.workflowid,
			    t1.bankcode,
			    t1.payableloc,
			    t1.printingloc,
			    t1.valuedate,
			    t1.bankbranchid,
			    t1.phonecountrycode,
			    t1.phoneareacode,
			    t1.phonenumber,
			    t1.clearingdate,
			    t1.status,
			    t1.active,
			    t1.inputdate,
			    t1.disbccy,
			    t1.poissued,
			    t3.bankcode branchbankcode,
			    t31.bankname branchbankname,
			    t3.branchcode,
			    t3.branchdesc,
			    t3.ifsc,
			    t3.city,
			    t4.bankname,
			    t1.partnerbankid,
			    t5.partnerbankcode,
			    t5.partnerbankname,
			    t1.linkedtranid,
			    t5.actype partnerbankactype,
			    t5.accountno partnerbankac,
			    t6.branchdesc printinglocdesc,
			    t1.rejectreason,
				t1.realizationdate
			   FROM finadvancepayments t1
			     LEFT JOIN bankbranches t3 ON t1.bankbranchid = t3.bankbranchid
			     LEFT JOIN bmtbankdetail t31 ON t31.bankcode  = t3.bankcode 
			     LEFT JOIN bmtbankdetail t4 ON t1.bankcode  = t4.bankcode 
			     LEFT JOIN partnerbanks t5 ON t5.partnerbankid = t1.partnerbankid
			     LEFT JOIN bankbranches t6 ON t6.branchcode  = t1.printingloc 
			  WHERE NOT (EXISTS ( SELECT 1
			   FROM finadvancepayments_temp
			  WHERE finadvancepayments_temp.finreference  = t1.finreference  AND finadvancepayments_temp.paymentseq = t1.paymentseq))
	  </createView>
	</changeSet> 
	
	<changeSet id="500_pre" author="Shinde.b" dbms='oracle'>
		<dropColumn tableName="Disbursement_Requests" columnName="REALIZATION_DATE" />
	</changeSet>
	
	<changeSet id="500" author="Shinde.b">
		<addColumn tableName="FINAUTOAPPROVALDETAILS">
			<column name="DOWNLOADED_ON" type="datetime" />
		</addColumn>
	</changeSet>
	
	 <changeSet id="501" author="Shinde.b">
		<addColumn tableName="Disbursement_Requests">
			<column name="DOWNLOADED_ON" type="datetime" />
		</addColumn>
	</changeSet> 
	
	 <changeSet id="502" author="Shinde.b">
		<addColumn tableName="Disbursement_Requests">
			<column name="REALIZATION_DATE" type="datetime" />
		</addColumn>
	</changeSet> 

	<changeSet id="503" author="Shinde.b">
		<createView viewName="FINDISBURSEMENTDETAILS_AVIEW" replaceIfExists="true">
			SELECT t1.finreference,
			    t1.disbdate,
			    t1.disbseq,
			    t1.disbdesc,
			    t1.disbaccountid,
			    t1.disbamount,
			    t1.disbreqdate,
			    t1.disbdisbursed,
			    t1.disbisactive,
			    t1.disbremarks,
			    t1.lastmntby,
			    t1.lastmnton,
			    t1.recordstatus,
			    t1.rolecode,
			    t1.nextrolecode,
			    t1.taskid,
			    t1.nexttaskid,
			    t1.recordtype,
			    t1.workflowid,
			    t1.feechargeamt,
			    t1.version,
			    t1.disbstatus,
			    t1.disbtype,
			    t1.disbclaim,
			    t1.disbexptype,
			    t1.disbretperc,
			    t1.disbretamount,
			    t1.autodisb,
			    t1.netadvdue,
			    t1.netretdue,
			    t1.disbretpaid,
			    t1.retpaiddate,
			    t2.expencetypename lovdescdisbexptype,
			    t1.consultfeefrq,
			    t1.consultfeestartdate,
			    t1.consultfeeenddate,
			    t1.contractorid,
			    t1.insuranceamt,
			    t1.instructionuid,
				t1.quickdisb
			   FROM findisbursementdetails t1
			     LEFT JOIN amtexpensetype t2 ON t2.expencetypeid = t1.disbexptype
	  </createView>
	</changeSet>

	<changeSet id="504" author="Shinde.b">
		<createView viewName="FINDISBURSEMENTDETAILS_TVIEW" replaceIfExists="true">
			 SELECT t1.finreference,
				    t1.disbdate,
				    t1.disbseq,
				    t1.disbdesc,
				    t1.disbaccountid,
				    t1.disbamount,
				    t1.disbreqdate,
				    t1.disbdisbursed,
				    t1.disbisactive,
				    t1.disbremarks,
				    t1.version,
				    t1.lastmntby,
				    t1.lastmnton,
				    t1.recordstatus,
				    t1.rolecode,
				    t1.nextrolecode,
				    t1.taskid,
				    t1.nexttaskid,
				    t1.recordtype,
				    t1.workflowid,
				    t1.feechargeamt,
				    t1.disbstatus,
				    t1.disbtype,
				    t1.disbclaim,
				    t1.disbexptype,
				    t1.disbretperc,
				    t1.disbretamount,
				    t1.autodisb,
				    t1.netadvdue,
				    t1.netretdue,
				    t1.disbretpaid,
				    t1.retpaiddate,
				    t2.expencetypename lovdescdisbexptype,
				    t1.consultfeefrq,
				    t1.consultfeestartdate,
				    t1.consultfeeenddate,
				    t1.contractorid,
				    t1.insuranceamt,
				    t1.instructionuid,
					t1.quickdisb
				   FROM findisbursementdetails_temp t1
				     LEFT JOIN amtexpensetype t2 ON t2.expencetypeid = t1.disbexptype
      	</createView>
	</changeSet>

	<changeSet id="505" author="Shinde.b">
		<createView viewName="FINADVANCEPAYMENTS_VIEW" replaceIfExists="true">
			SELECT t1.finreference,
				    t1.paymentid,
				    t1.paymentseq,
				    t1.paymentdetail,
				    t1.amttobereleased,
				    t1.liabilityholdname,
				    t1.transactionref,
				    t1.beneficiaryname,
				    t1.beneficiaryaccno,
				    t1.reenterbeneficiaryaccno,
				    t1.description,
				    t1.paymenttype,
				    t1.llreferenceno,
				    t1.lldate,
				    t1.custcontribution,
				    t1.sellercontribution,
				    t1.remarks,
				    t1.disbdate,
				    t1.disbseq,
				    t1.version,
				    t1.lastmntby,
				    t1.lastmnton,
				    t1.recordstatus,
				    t1.rolecode,
				    t1.nextrolecode,
				    t1.taskid,
				    t1.nexttaskid,
				    t1.recordtype,
				    t1.workflowid,
				    t1.bankcode,
				    t1.payableloc,
				    t1.printingloc,
				    t1.valuedate,
				    t1.bankbranchid,
				    t1.phonecountrycode,
				    t1.phoneareacode,
				    t1.phonenumber,
				    t1.clearingdate,
				    t1.status,
				    t1.active,
				    t1.inputdate,
				    t1.disbccy,
				    t1.poissued,
				    t3.bankcode branchbankcode,
				    t31.bankname branchbankname,
				    t3.branchcode,
				    t3.branchdesc,
				    t3.ifsc,
				    t3.city,
				    t4.bankname,
				    t1.partnerbankid,
				    t5.partnerbankcode,
				    t5.partnerbankname,
				    t1.linkedtranid,
				    t5.actype partnerbankactype,
				    t5.accountno partnerbankac,
				    t6.branchdesc printinglocdesc,
				    t1.rejectreason,
					t1.realizationdate
				   FROM finadvancepayments_temp t1
				     LEFT JOIN bankbranches t3 ON t1.bankbranchid = t3.bankbranchid
				     LEFT JOIN bmtbankdetail t31 ON t31.bankcode  = t3.bankcode 
				     LEFT JOIN bmtbankdetail t4 ON t1.bankcode  = t4.bankcode 
				     LEFT JOIN partnerbanks t5 ON t5.partnerbankid = t1.partnerbankid
				     LEFT JOIN bankbranches t6 ON t6.branchcode  = t1.printingloc 
				UNION ALL
				 SELECT t1.finreference,
				    t1.paymentid,
				    t1.paymentseq,
				    t1.paymentdetail,
				    t1.amttobereleased,
				    t1.liabilityholdname,
				    t1.transactionref,
				    t1.beneficiaryname,
				    t1.beneficiaryaccno,
				    t1.reenterbeneficiaryaccno,
				    t1.description,
				    t1.paymenttype,
				    t1.llreferenceno,
				    t1.lldate,
				    t1.custcontribution,
				    t1.sellercontribution,
				    t1.remarks,
				    t1.disbdate,
				    t1.disbseq,
				    t1.version,
				    t1.lastmntby,
				    t1.lastmnton,
				    t1.recordstatus,
				    t1.rolecode,
				    t1.nextrolecode,
				    t1.taskid,
				    t1.nexttaskid,
				    t1.recordtype,
				    t1.workflowid,
				    t1.bankcode,
				    t1.payableloc,
				    t1.printingloc,
				    t1.valuedate,
				    t1.bankbranchid,
				    t1.phonecountrycode,
				    t1.phoneareacode,
				    t1.phonenumber,
				    t1.clearingdate,
				    t1.status,
				    t1.active,
				    t1.inputdate,
				    t1.disbccy,
				    t1.poissued,
				    t3.bankcode branchbankcode,
				    t31.bankname branchbankname,
				    t3.branchcode,
				    t3.branchdesc,
				    t3.ifsc,
				    t3.city,
				    t4.bankname,
				    t1.partnerbankid,
				    t5.partnerbankcode,
				    t5.partnerbankname,
				    t1.linkedtranid,
				    t5.actype partnerbankactype,
				    t5.accountno partnerbankac,
				    t6.branchdesc printinglocdesc,
				    t1.rejectreason,
					t1.realizationdate
				   FROM finadvancepayments t1
				     LEFT JOIN bankbranches t3 ON t1.bankbranchid = t3.bankbranchid
				     LEFT JOIN bmtbankdetail t31 ON t31.bankcode  = t3.bankcode 
				     LEFT JOIN bmtbankdetail t4 ON t1.bankcode  = t4.bankcode 
				     LEFT JOIN partnerbanks t5 ON t5.partnerbankid = t1.partnerbankid
				     LEFT JOIN bankbranches t6 ON t6.branchcode  = t1.printingloc 
				  WHERE NOT (EXISTS ( SELECT 1
				     FROM finadvancepayments_temp
				    WHERE finadvancepayments_temp.finreference  = t1.finreference  AND finadvancepayments_temp.paymentseq = t1.paymentseq))
      	</createView>
	</changeSet>
  
</databaseChangeLog>
	