<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

	<property name="add.schema" value="dbo." dbms="mssql" />
	<property name="add.schema" value="" dbms="oracle" />
	<property name="add.schema" value="" dbms="postgresql" />
	<property name="call.substr" value="substring" dbms="mssql" />
	<property name="call.substr" value="substr" dbms="oracle" />
	<property name="call.substr" value="substring" dbms="postgresql" />
	<property name="call.auditdb" value="PLFAVANSEQC.." dbms="mssql" />
	<property name="call.auditdb" value=" " dbms="oracle" />
	<property name="call.concatenate" value="+" dbms="mssql" />
	<property name="call.concatenate" value="||" dbms="oracle" />
	<property name="call.concatenate" value="||" dbms="postgresql" />
	<property name="call.collength" value="LEN" dbms="mssql" />
	<property name="call.collength" value="LENGTH" dbms="oracle" />
	<property name="call.collength" value="LENGTH" dbms="postgresql" />
	<property name="call.date" value="getdate()" dbms="mssql" />
	<property name="call.date" value="sysdate" dbms="oracle" />
	<property name="call.date" value="now()" dbms="postgresql" />

	<changeSet id="pre_run_for_pgp1" author="Gopal.p" runAlways="true" dbms="postgresql">
		<sql>
			Set search_path = plf,plfaudit,public,pg_catalog;
		</sql>
	</changeSet>

	<changeSet id="ST#1472.1" author="saikiran.n">
		<createTable tableName="Customer_KYC_Details_Upload">
			<column name="Id" type="bigint" autoIncrement="true">
				<constraints nullable="false" />
			</column>
			<column name="HeaderId" type="bigint" />
			<column name="RecordSeq" type="bigint" />
			<column name="CustId" type="bigint" />
			<column name="CustCIF" type="varchar(13)" />
			<column name="FinId" type="bigint" />
			<column name="FinReference" type="varchar(20)" />
			<column name="CustAddrType" type="varchar(8)" />
			<column name="CustAddrPriority" type="int" />
			<column name="CustAddrLine3" type="varchar(50)" />
			<column name="CustAddrHnbr" type="varchar(50)" />
			<column name="CustFlatNbr" type="varchar(50)" />
			<column name="CustAddrStreet" type="varchar(50)" />
			<column name="CustAddrLine1" type="varchar(50)" />
			<column name="CustAddrLine2" type="varchar(50)" />
			<column name="CustAddrCity" type="varchar(50)" />
			<column name="CustAddrLine4" type="varchar(50)" />
			<column name="CustDistrict" type="varchar(50)" />
			<column name="CustAddrProvince" type="varchar(50)" />
			<column name="CustAddrCountry" type="char(2)" />
			<column name="CustAddrZip" type="varchar(50)" />
			<column name="PhoneTypeCode" type="varchar(8)" />
			<column name="PhoneNumber" type="varchar(20)" />
			<column name="PhoneTypePriority" type="int" />
			<column name="CustEmailTypeCode" type="varchar(8)" />
			<column name="CustEmail" type="varchar(100)" />
			<column name="CustEmailPriority" type="int" />
			<column name="Progress" type="int" />
			<column name="Status" type="char(1)" />
			<column name="ErrorCode" type="varchar(20)" />
			<column name="ErrorDesc" type="varchar(2000)" />
		</createTable>
	</changeSet>

	<changeSet id="ST#1472.2" author="saikiran.n">
		<addPrimaryKey constraintName="PK_CUSTOMER_KYC_DTLS_UPLD_ID" tableName="Customer_KYC_Details_Upload"
			columnNames="Id" />
	</changeSet>

	<changeSet id="ST#1472.4.1" author="saikiran.n">
		<sql>
			<![CDATA[	
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='CUSTOMER_KYC_DETAILS_DOWNLOAD');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='CUSTOMER_KYC_DETAILS_DOWNLOAD');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='CUSTOMER_KYC_DETAILS_DOWNLOAD';
 										
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_DOWNLOAD'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID IN (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_DOWNLOAD');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_DOWNLOAD';
							
				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'CUSTOMER_KYC_DETAILS_DOWNLOAD', 'CUSTOMER KYC DETAILS DOWNLOAD FILE.', 3, 'CUSTOMERDETAILS', null, null, ',', 0, 0, null, 'ROW:{CustCif, FinReference, AddressType Code, Priority, Care Of, House/Building No, Flat Number, Street, Landmark, Locality, City, Sub District, District, State Code, Country Code, Pin Code, PhoneType Code, Phone Number, Priority, EmailType Code, Email, Priority, Status, Progress, Error Code, Error Desc, Created By, Created On, Approved By, Approved On}', '', 'A', '/opt/pff/hdfc/BulkAddressUpload/download', 'Bulk_Cust_dtls_', '.xlsx', 0, CURRENT_TIMESTAMP, '${ddMMYYYYHms}', NULL, '0', NULL, 1, 1);
		
				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_DOWNLOAD'), 'CUSTOMER_KYC_DETAILS_UPLOAD', 0, 'ID', 'HEADERID = :HEADERID', NULL, NULL, NULL, NULL, NULL, NULL, 30, 0, 0);
				
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_DOWNLOAD')), 'CUSTCIF',	       0, 'N', NULL, NULL, NULL, NULL, '0', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_DOWNLOAD')), 'FINREFERENCE',      0, 'N', NULL, NULL, NULL, NULL, '1', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_DOWNLOAD')), 'CUSTADDRTYPE',      0, 'N', NULL, NULL, NULL, NULL, '2', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_DOWNLOAD')), 'CUSTADDRPRIORITY',  0, 'N', NULL, NULL, NULL, NULL, '3', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_DOWNLOAD')), 'CUSTADDRLINE3',     0, 'N', NULL, NULL, NULL, NULL, '4', NULL, NULL, NULL, NULL, 'O');						
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_DOWNLOAD')), 'CUSTADDRHNBR',      0, 'N', NULL, NULL, NULL, NULL, '5', NULL, NULL, NULL, NULL, 'O');	
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_DOWNLOAD')), 'CUSTFLATNBR',       0, 'N', NULL, NULL, NULL, NULL, '6', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_DOWNLOAD')), 'CUSTADDRSTREET',    0, 'N', NULL, NULL, NULL, NULL, '7', NULL, NULL, NULL, NULL,'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_DOWNLOAD')), 'CUSTADDRLINE1',     0, 'N', NULL, NULL, NULL, NULL, '8', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_DOWNLOAD')), 'CUSTADDRLINE2',     0, 'N', NULL, NULL, NULL, NULL, '9', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_DOWNLOAD')), 'CUSTADDRCITY',      0, 'N', NULL, NULL, NULL, NULL, '10', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_DOWNLOAD')), 'CUSTADDRLINE4',     0, 'N', NULL, NULL, NULL, NULL, '11', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_DOWNLOAD')), 'CUSTDISTRICT',      0, 'N', NULL, NULL, NULL, NULL, '12', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_DOWNLOAD')), 'CUSTADDRPROVINCE',  0, 'N', NULL, NULL, NULL, NULL, '13', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_DOWNLOAD')), 'CUSTADDRCOUNTRY',   0, 'N', NULL, NULL, NULL, NULL, '14', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_DOWNLOAD')), 'CUSTADDRZIP',       0, 'N', NULL, NULL, NULL, NULL, '15', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_DOWNLOAD')), 'PHONETYPECODE',     0, 'N', NULL, NULL, NULL, NULL, '16', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_DOWNLOAD')), 'PHONENUMBER',       0, 'N', NULL, NULL, NULL, NULL, '17', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_DOWNLOAD')), 'PHONETYPEPRIORITY', 0, 'N', NULL, NULL, NULL, NULL, '18', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_DOWNLOAD')), 'CUSTEMAILTYPECODE', 0, 'N', NULL, NULL, NULL, NULL, '19', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_DOWNLOAD')), 'CUSTEMAIL',         0, 'N', NULL, NULL, NULL, NULL, '20', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_DOWNLOAD')), 'CUSTEMAILPRIORITY', 0, 'N', NULL, NULL, NULL, NULL, '21', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_DOWNLOAD')), 'STATUS',            0, 'N', NULL, NULL, NULL, NULL, '22', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_DOWNLOAD')), 'PROGRESS',          0, 'N', NULL, NULL, NULL, NULL, '23', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_DOWNLOAD')), 'ERRORCODE',         0, 'N', NULL, NULL, NULL, NULL, '24', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_DOWNLOAD')), 'ERRORDESC',         0, 'N', NULL, NULL, NULL, NULL, '25', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_DOWNLOAD')), 'CREATEDNAME',       0, 'N', NULL, NULL, NULL, NULL, '26', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_DOWNLOAD')), 'CREATEDON',         0, 'N', NULL, NULL, NULL, NULL, '27', NULL, NULL, NULL, 'dd-MMM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_DOWNLOAD')), 'APPROVEDNAME',	   0, 'N', NULL, NULL, NULL, NULL, '28', NULL, NULL, NULL, NULL,'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_DOWNLOAD')), 'APPROVEDON',        0, 'N', NULL, NULL, NULL, NULL, '29', NULL, NULL, NULL,'dd-MMM-yyyy', 'O');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1472.5.1" author="saikiran.n">
		<sql>
			<![CDATA[	
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='CUSTOMER_KYC_DETAILS_TEMPLATE');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='CUSTOMER_KYC_DETAILS_TEMPLATE');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='CUSTOMER_KYC_DETAILS_TEMPLATE';
							
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_TEMPLATE'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID IN (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_TEMPLATE');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_TEMPLATE';
							
				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'CUSTOMER_KYC_DETAILS_TEMPLATE', 'BULK CUSTOMER DETAILS TEMPLATE FILE.', 3, 'CUSTOMERDETAILS', null, null, ',', 0, 0, null, 'ROW:{CustCif, FinReference, AddressType Code, Priority, Care Of, House/Building No, Flat Number, Street, Landmark, Locality, City, Sub District, District, State Code, Country Code, Pin Code, PhoneType Code, Phone Number, Priority, EmailType Code, Email, Priority}', null, 'A', '/opt/pff/hdfc/BulkAddressUpload/Template', 'Bulk_Cust_dtls_', '.xlsx', 0, CURRENT_TIMESTAMP, '${ddMMYYYYHms}', NULL, '0', NULL, 1, 1);
		
				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_TEMPLATE'), 'CUSTOMER_KYC_DETAILS_UPLOAD', 0, 'ID', 'HEADERID = :HEADERID', NULL, NULL, NULL, NULL, NULL, NULL, 22, 0, 0);
				
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_TEMPLATE')), 'CUSTCIF',	   	   0, 'N', NULL, NULL, NULL, NULL, '0', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_TEMPLATE')), 'FINREFERENCE',  	   0, 'N', NULL, NULL, NULL, NULL, '1', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_TEMPLATE')), 'CUSTADDRTYPE', 	   0, 'N', NULL, NULL, NULL, NULL, '2', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_TEMPLATE')), 'CUSTADDRPRIORITY',  0, 'N', NULL, NULL, NULL, NULL, '3', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_TEMPLATE')), 'CUSTADDRLINE3',     0, 'N', NULL, NULL, NULL, NULL, '4', NULL, NULL, NULL, NULL, 'O');						
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_TEMPLATE')), 'CUSTADDRHNBR',      0, 'N', NULL, NULL, NULL, NULL, '5', NULL, NULL, NULL, NULL, 'O');	
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_TEMPLATE')), 'CUSTFLATNBR',       0, 'N', NULL, NULL, NULL, NULL, '6', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_TEMPLATE')), 'CUSTADDRSTREET',    0, 'N', NULL, NULL, NULL, NULL, '7', NULL, NULL, NULL, NULL,'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_TEMPLATE')), 'CUSTADDRLINE1',     0, 'N', NULL, NULL, NULL, NULL, '8', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_TEMPLATE')), 'CUSTADDRLINE2',     0, 'N', NULL, NULL, NULL, NULL, '9', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_TEMPLATE')), 'CUSTADDRCITY',      0, 'N', NULL, NULL, NULL, NULL, '10', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_TEMPLATE')), 'CUSTADDRLINE4',     0, 'N', NULL, NULL, NULL, NULL, '11', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_TEMPLATE')), 'CUSTDISTRICT',      0, 'N', NULL, NULL, NULL, NULL, '12', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_TEMPLATE')), 'CUSTADDRPROVINCE',  0, 'N', NULL, NULL, NULL, NULL, '13', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_TEMPLATE')), 'CUSTADDRCOUNTRY',   0, 'N', NULL, NULL, NULL, NULL, '14', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_TEMPLATE')), 'CUSTADDRZIP',       0, 'N', NULL, NULL, NULL, NULL, '15', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_TEMPLATE')), 'PHONETYPECODE',     0, 'N', NULL, NULL, NULL, NULL, '16', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_TEMPLATE')), 'PHONENUMBER',       0, 'N', NULL, NULL, NULL, NULL, '17', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_TEMPLATE')), 'PHONETYPEPRIORITY', 0, 'N', NULL, NULL, NULL, NULL, '18', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_TEMPLATE')), 'CUSTEMAILTYPECODE', 0, 'N', NULL, NULL, NULL, NULL, '19', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_TEMPLATE')), 'CUSTEMAIL',         0, 'N', NULL, NULL, NULL, NULL, '20', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_TEMPLATE')), 'CUSTEMAILPRIORITY', 0, 'N', NULL, NULL, NULL, NULL, '21', NULL, NULL, NULL, NULL, 'O');
			
				]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1472.6" author="saikiran.n">
		<sql>
			<![CDATA[
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'CUSTOMER_KYC_DETAILS_UPLOAD_MAKER');
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'CUSTOMER_KYC_DETAILS_UPLOAD_APPROVER');
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'CUSTOMER_KYC_DETAILS_UPLOAD_VIEW');

				DELETE FROM SECROLES WHERE ROLECD ='CUSTOMER_KYC_DETAILS_UPLOAD_MAKER';
				DELETE FROM SECROLES WHERE ROLECD ='CUSTOMER_KYC_DETAILS_UPLOAD_APPROVER';
				DELETE FROM SECROLES WHERE ROLECD ='CUSTOMER_KYC_DETAILS_UPLOAD_VIEW';

				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'CUSTOMER_KYC_DETAILS_UPLOAD_MAKER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'CUSTOMER_KYC_DETAILS_UPLOAD_APPROVER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'CUSTOMER_KYC_DETAILS_UPLOAD_VIEW');

				DELETE FROM SECGROUPS WHERE GRPCODE ='CUSTOMER_KYC_DETAILS_UPLOAD_MAKER';
				DELETE FROM SECGROUPS WHERE GRPCODE ='CUSTOMER_KYC_DETAILS_UPLOAD_APPROVER';
				DELETE FROM SECGROUPS WHERE GRPCODE ='CUSTOMER_KYC_DETAILS_UPLOAD_VIEW';

				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='menu_Item_Cust_kyc_Dtls_Upload_Maker';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='menu_Item_Cust_kyc_Dtls_Upload_Approver';

				INSERT INTO SECRIGHTS(RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_Cust_kyc_Dtls_Upload_Maker', 'MENU', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS(RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_Cust_kyc_Dtls_Upload_Approver', 'MENU', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'CUSTOMER_KYC_DETAILS_UPLOAD_MAKER', 'WF Maker for Cust kyc Dtls Upload', 0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'CUSTOMER_KYC_DETAILS_UPLOAD_APPROVER', 'WF Approver for  Cust kyc Dtls Upload', 0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'CUSTOMER_KYC_DETAILS_UPLOAD_VIEW', '', 0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
				
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'CUSTOMER_KYC_DETAILS_UPLOAD_MAKER'),    (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_Cust_kyc_Dtls_Upload_Maker'),    1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'CUSTOMER_KYC_DETAILS_UPLOAD_APPROVER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_Cust_kyc_Dtls_Upload_Approver'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'CUSTOMER_KYC_DETAILS_UPLOAD_VIEW'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_Cust_kyc_Dtls_Upload_Maker'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'CUSTOMER_KYC_DETAILS_UPLOAD_VIEW'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_Cust_kyc_Dtls_Upload_Approver'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);

				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'CUSTOMER_KYC_DETAILS_UPLOAD_MAKER', 'Maker role from Cust kyc Dtls Upload', '', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0); 
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'CUSTOMER_KYC_DETAILS_UPLOAD_APPROVER', 'Approver role from Cust kyc Dtls Upload', '', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'CUSTOMER_KYC_DETAILS_UPLOAD_VIEW', 'Menu role from Cust kyc Dtls Upload', '', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);

				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'CUSTOMER_KYC_DETAILS_UPLOAD_MAKER'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'CUSTOMER_KYC_DETAILS_UPLOAD_MAKER'), 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'CUSTOMER_KYC_DETAILS_UPLOAD_APPROVER'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'CUSTOMER_KYC_DETAILS_UPLOAD_APPROVER'), 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'CUSTOMER_KYC_DETAILS_UPLOAD_VIEW'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'CUSTOMER_KYC_DETAILS_UPLOAD_VIEW'), 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'CUSTOMER_KYC_DETAILS_UPLOAD_MAKER'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'CUSTOMER_KYC_DETAILS_UPLOAD_VIEW'), 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'CUSTOMER_KYC_DETAILS_UPLOAD_APPROVER'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'CUSTOMER_KYC_DETAILS_UPLOAD_VIEW'), 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#707.5.1" author="HariTeja.B">
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='MANDATES_TEMPLATE');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='MANDATES_TEMPLATE');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='MANDATES_TEMPLATE';
							
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID IN (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE';
							
				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'MANDATES_TEMPLATE', 'Mandate template download', 3, 'MANDATE', NULL, NULL, ',' , 0, 0, NULL, 'ROW:{Entity Code, Customer ID, Loan Reference, Mandate Type, MICR, IFSC Code, Account Number, Account Holder Name, Joint Account Holder Name, Account Type, Max Limit, Periodicity, Open Mandate, Start Date, Expiry Date, Partner Bank, UMRN number, External Mandate, Swap, Swap Effective Date,E-mandate Source, E-mandate Reference, EmployerID, Employee ID, Mandate Status, Rejection Reason, Security Mandate}', NULL, 'A', '/opt/pff/hdfc/mandate/template', 'MANDATE_', '.xls', 0, current_timestamp, '${ddMMYYYYHms}', NULL, 0, NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE'), 'MANDATES_UPLOAD',  0, 'ID', 'HEADERID = :HEADERID', NULL, NULL, NULL, NULL, NULL, NULL, 26, 0, 0);
				
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE')), 'CUSTID',       			0, 'N', NULL, NULL, NULL, NULL, '1',  NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE')), 'MANDATEREF',      		0, 'N', NULL, NULL, NULL, NULL, '16', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE')), 'MANDATETYPE',      		0, 'N', NULL, NULL, NULL, NULL, '3',  NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE')), 'ACCNUMBER',       		0, 'N', NULL, NULL, NULL, NULL, '6',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE')), 'ACCHOLDERNAME',    		0, 'N', NULL, NULL, NULL, NULL, '7',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE')), 'JOINTACCHOLDERNAME',   	0, 'N', NULL, NULL, NULL, NULL, '8',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE')), 'ACCTYPE',      			0, 'N', NULL, NULL, NULL, NULL, '9',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE')), 'OPENMANDATE',       		0, 'N', NULL, NULL, NULL, NULL, '12', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE')), 'STARTDATE',      		0, 'N', NULL, NULL, NULL, NULL, '13', NULL, NULL, NULL,'dd-MMM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE')), 'EXPIRYDATE',       		0, 'N', NULL, NULL, NULL, NULL, '14', NULL, NULL, NULL,'dd-MMM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE')), 'MAXLIMIT',       		0, 'N', NULL, NULL, NULL, NULL, '10', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE')), 'PERIODICITY',       		0, 'N', NULL, NULL, NULL, NULL, '11', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE')), 'MANDATESTATUS',       	0, 'N', NULL, NULL, NULL, NULL, '24', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE')), 'REASON',       			0, 'N', NULL, NULL, NULL, NULL, '25', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE')), 'ORGREFERENCE',      		0, 'N', NULL, NULL, NULL, NULL, '2',  NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE')), 'SWAPISACTIVE',      		0, 'N', NULL, NULL, NULL, NULL, '18', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE')), 'ENTITYCODE',      		0, 'N', NULL, NULL, NULL, NULL, '0',  NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE')), 'PARTNERBANKID',      	0, 'N', NULL, NULL, NULL, NULL, '15', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE')), 'EMANDATESOURCE',       	0, 'N', NULL, NULL, NULL, NULL, '20', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE')), 'EMANDATEREFERENCENO',  	0, 'N', NULL, NULL, NULL, NULL, '21', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE')), 'SWAPEFFECTIVEDATE',    	0, 'N', NULL, NULL, NULL, NULL, '19', NULL, NULL, NULL,'dd-MMM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE')), 'EMPLOYERID',      		0, 'N', NULL, NULL, NULL, NULL, '22', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE')), 'EMPLOYEENO',       		0, 'N', NULL, NULL, NULL, NULL, '23', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE')), 'IFSC',       			0, 'N', NULL, NULL, NULL, NULL, '5' , NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE')), 'MICR',       			0, 'N', NULL, NULL, NULL, NULL, '4' , NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE')), 'EXTERNALMANDATE',      	0, 'N', NULL, NULL, NULL, NULL, '17', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_TEMPLATE')), 'SECURITYMANDATE',      	0, 'N', NULL, NULL, NULL, NULL, '26', NULL, NULL, NULL, NULL, 'O');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#707.6.1" author="HariTeja.B">
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='MANDATES_DOWNLOAD');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='MANDATES_DOWNLOAD');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='MANDATES_DOWNLOAD';
							
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID IN (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD';
							
				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'MANDATES_DOWNLOAD', 'Mandate download', 3, 'MANDATE', NULL, NULL, ',' , 0, 0, NULL, 'ROW:{Entity Code, Customer ID, Loan Reference, Mandate Type, MICR, IFSC Code, Account Number, Account Holder Name, Joint Account Holder Name, Account Type, Max Limit, Periodicity, Open Mandate, Start Date, Expiry Date, Partner Bank, UMRN number, External Mandate, Swap, Swap Effective Date,E-mandate Source, E-mandate Reference, EmployerID, Employee ID, Mandate Status, Rejection Reason, Security Mandate, UPLOADDATE, APPROVEDDATE, MAKER ID, CHECKERID, UPLOADSTATUS, ErrorCode, ErrorDesc}',  '', 'A', '/opt/pff/hdfc/mandate/download', 'Mandate_', '.xls', 0, current_timestamp, '${ddMMYYYYHms}', NULL, 0, NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD'), 'MANDATES_UPLOAD',  0, 'ID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 10, 0, 0);
				
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'ENTITYCODE',      		0, 'N', NULL, NULL, NULL, NULL, '0',  NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'CUSTCIF',       			0, 'N', NULL, NULL, NULL, NULL, '1',  NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'ORGREFERENCE',      		0, 'N', NULL, NULL, NULL, NULL, '2',  NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'MANDATETYPE',      		0, 'N', NULL, NULL, NULL, NULL, '3',  NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'MICR',       			0, 'N', NULL, NULL, NULL, NULL, '4' , NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'IFSC',       			0, 'N', NULL, NULL, NULL, NULL, '5' , NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'ACCNUMBER',       		0, 'N', NULL, NULL, NULL, NULL, '6',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'ACCHOLDERNAME',    		0, 'N', NULL, NULL, NULL, NULL, '7',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'JOINTACCHOLDERNAME',   	0, 'N', NULL, NULL, NULL, NULL, '8',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'ACCTYPE',      			0, 'N', NULL, NULL, NULL, NULL, '9',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'MAXLIMIT',       		0, 'N', NULL, NULL, NULL, NULL, '10', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'PERIODICITY',       		0, 'N', NULL, NULL, NULL, NULL, '11', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'OPENMANDATE',       		0, 'N', NULL, NULL, NULL, NULL, '12', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'STARTDATE',      		0, 'N', NULL, NULL, NULL, NULL, '13', NULL, NULL, NULL,'dd-MMM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'EXPIRYDATE',       		0, 'N', NULL, NULL, NULL, NULL, '14', NULL, NULL, NULL,'dd-MMM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'PARTNERBANKID',      	0, 'N', NULL, NULL, NULL, NULL, '15', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'MANDATEREF',      		0, 'N', NULL, NULL, NULL, NULL, '16', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'EXTERNALMANDATE',      	0, 'N', NULL, NULL, NULL, NULL, '17', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'SWAPISACTIVE',      		0, 'N', NULL, NULL, NULL, NULL, '18', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'SWAPEFFECTIVEDATE',    	0, 'N', NULL, NULL, NULL, NULL, '19', NULL, NULL, NULL,'dd-MMM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'EMANDATESOURCE',       	0, 'N', NULL, NULL, NULL, NULL, '20', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'EMANDATEREFERENCENO',  	0, 'N', NULL, NULL, NULL, NULL, '21', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'EMPLOYERID',      		0, 'N', NULL, NULL, NULL, NULL, '22', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'EMPLOYEENO',       		0, 'N', NULL, NULL, NULL, NULL, '23', NULL, NULL, NULL, NULL, 'O');				
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'MANDATESTATUS',       	0, 'N', NULL, NULL, NULL, NULL, '24', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'REASON',       			0, 'N', NULL, NULL, NULL, NULL, '25', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'SECURITYMANDATE',       	0, 'N', NULL, NULL, NULL, NULL, '26', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'CREATEDON',       		0, 'N', NULL, NULL, NULL, NULL, '27', NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'APPROVEDON',     		0, 'N', NULL, NULL, NULL, NULL, '28', NULL, NULL, NULL,'dd-MMM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'CREATEDNAME',    	 	0, 'N', NULL, NULL, NULL, NULL, '29', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'APPROVEDNAME',	      	0, 'N', NULL, NULL, NULL, NULL, '30', NULL, NULL, NULL, NULL,'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'STATUS',	                0, 'N', NULL, NULL, NULL, NULL, '31', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'ERRORCODE',	            0, 'N', NULL, NULL, NULL, NULL, '32', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_DOWNLOAD')), 'ERRORDESC',	            0, 'N', NULL, NULL, NULL, NULL, '33', NULL, NULL, NULL, NULL, 'O');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1471.1" author="Mounika.M">
		<sql>
		    <![CDATA[
				INSERT INTO SMTPARAMETERS (SYSPARMCODE, SYSPARMDESC, SYSPARMTYPE, SYSPARMMAINT, SYSPARMVALUE, SYSPARMLENGTH, SYSPARMDEC, SYSPARMLIST, SYSPARMVALDMOD, SYSPARMDESCRIPTION, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('DPD_STRING_CALCULATION_ON', 'DPD String Calculation Type', 'int', 1, 1, 1, 0, NULL, NULL, 'DPD String Calculation Type', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SMTPARAMETERS (SYSPARMCODE, SYSPARMDESC, SYSPARMTYPE, SYSPARMMAINT, SYSPARMVALUE, SYSPARMLENGTH, SYSPARMDEC, SYSPARMLIST, SYSPARMVALDMOD, SYSPARMDESCRIPTION, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('DPD_STRING_LENGTH', 		'DPD String Length', 		   'int', 1, 5, 4, 0, NULL, NULL, 'DPD String Length', 			 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1471.2" author="Mounika.M">
		<addColumn tableName="FINPFTDETAILS">
			<column name="CurDPDString" type="varchar(2400)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1471.3" author="Mounika.M" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE FINPFTDETAILS ADD CONSTRAINT DF_FT_DPD_STRING DEFAULT NULL FOR CURDPDSTRING;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1471.4" author="Mounika.M" dbms="postgresql, oracle">
		<addDefaultValue tableName="FINPFTDETAILS" columnName="CurDPDString" defaultValue="null" />
	</changeSet>

	<changeSet id="ST#1469.1" author="NagaVamsi.P">
		<addColumn tableName="ASSET_CLASS_SETUP_HEADER_TEMP">
			<column name="Code" type="varchar(10)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1469.1.1" author="NagaVamsi.P">
		<addColumn tableName="ASSET_CLASS_SETUP_HEADER_TEMP">
			<column name="Description" type="varchar(50)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1469.1.2" author="NagaVamsi.P">
		<sql>
			<![CDATA[	
				UPDATE ASSET_CLASS_SETUP_HEADER_TEMP SET Code = 'DEFAULT';
				UPDATE ASSET_CLASS_SETUP_HEADER_TEMP SET Description = 'DEFAULT';
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1469.1.3" author="NagaVamsi.P">
		<addNotNullConstraint tableName="ASSET_CLASS_SETUP_HEADER_TEMP" columnName="Code"
			columnDataType="varchar(10)" />
		<addNotNullConstraint tableName="ASSET_CLASS_SETUP_HEADER_TEMP" columnName="Description"
			columnDataType="varchar(50)" />
	</changeSet>

	<changeSet id="ST#1469.1.4" author="NagaVamsi.P">
		<createIndex tableName="ASSET_CLASS_SETUP_HEADER_TEMP" indexName="IDX_ACSH_T_CODE_ENTITY">
			<column name="Code" type="varchar(8)" />
			<column name="EntityCode" type="varchar(10)" />
		</createIndex>
	</changeSet>

	<changeSet id="ST#1469.2" author="NagaVamsi.P">
		<addColumn tableName="ASSET_CLASS_SETUP_HEADER">
			<column name="Code" type="varchar(10)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1469.2.1" author="NagaVamsi.P">
		<addColumn tableName="ASSET_CLASS_SETUP_HEADER">
			<column name="Description" type="varchar(50)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1469.2.2" author="NagaVamsi.P">
		<sql>
			<![CDATA[	
				UPDATE ASSET_CLASS_SETUP_HEADER SET Code = 'DEFAULT';
				UPDATE ASSET_CLASS_SETUP_HEADER SET Description = 'DEFAULT';
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1469.2.3" author="NagaVamsi.P">
		<addNotNullConstraint tableName="ASSET_CLASS_SETUP_HEADER" columnName="Code"
			columnDataType="varchar(10)" />
		<addNotNullConstraint tableName="ASSET_CLASS_SETUP_HEADER" columnName="Description"
			columnDataType="varchar(50)" />
	</changeSet>

	<changeSet id="ST#1469.2.4" author="NagaVamsi.P">
		<createIndex tableName="ASSET_CLASS_SETUP_HEADER" indexName="IDX_ACSH_CODE_ENTITY">
			<column name="Code" type="varchar(10)" />
			<column name="EntityCode" type="varchar(8)" />
		</createIndex>
	</changeSet>

	<changeSet id="ST#1469.3_pre" author="nagavamsi.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'asset_class_setup_header_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1469.3" author="nagavamsi.p">
		<createView replaceIfExists="true" viewName="ASSET_CLASS_SETUP_HEADER_VIEW">
			<![CDATA[
                 SELECT T1.ID,
					T1.EntityCode,
					T2.ENTITYDESC,
					T1.ACTIVE,
					T1.CODE,
					T1.DESCRIPTION,
					T1.VERSION,
				    T1.CREATEDBY,
				    T1.CREATEDON,
				    T1.APPROVEDBY,
					T1.APPROVEDON, 
					T1.LASTMNTBY, 
					T1.LASTMNTON, 
					T1.RECORDSTATUS, 
					T1.ROLECODE, 
					T1.NEXTROLECODE, 
					T1.TASKID, 
					T1.NEXTTASKID, 
					T1.RECORDTYPE, 
					T1.WORKFLOWID
				FROM ASSET_CLASS_SETUP_HEADER_TEMP T1
				INNER JOIN ENTITY T2 ON T2.ENTITYCODE = T1.ENTITYCODE
				UNION ALL
				SELECT T1.ID,
					T1.EntityCode,
					T2.ENTITYDESC,
					T1.ACTIVE,
					T1.CODE,
					T1.DESCRIPTION,
					T1.VERSION,
				    T1.CREATEDBY,
				    T1.CREATEDON,
				    T1.APPROVEDBY,
					T1.APPROVEDON, 
					T1.LASTMNTBY, 
					T1.LASTMNTON, 
					T1.RECORDSTATUS, 
					T1.ROLECODE, 
					T1.NEXTROLECODE, 
					T1.TASKID, 
					T1.NEXTTASKID, 
					T1.RECORDTYPE, 
					T1.WORKFLOWID
				FROM ASSET_CLASS_SETUP_HEADER T1
				INNER JOIN ENTITY T2 ON T2.ENTITYCODE = T1.ENTITYCODE
        	 	WHERE NOT EXISTS (SELECT 1 FROM ASSET_CLASS_SETUP_HEADER_TEMP WHERE ID = T1.ID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#1469.3_post" author="nagavamsi.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'asset_class_setup_header_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1469.4_pre" author="nagavamsi.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'asset_class_setup_header_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1469.4" author="nagavamsi.p">
		<createView replaceIfExists="true" viewName="ASSET_CLASS_SETUP_HEADER_AVIEW">
			<![CDATA[
                 SELECT T1.ID,
					T1.ENTITYCODE,
					T2.ENTITYDESC,
					T1.ACTIVE,
					T1.CODE,
					T1.DESCRIPTION,
					T1.VERSION,
				    T1.CREATEDBY,
				    T1.CREATEDON,
					T1.APPROVEDBY,
					T1.APPROVEDON, 
					T1.LASTMNTBY, 
					T1.LASTMNTON, 
					T1.RECORDSTATUS, 
					T1.ROLECODE, 
					T1.NEXTROLECODE, 
					T1.TASKID, 
					T1.NEXTTASKID, 
					T1.RECORDTYPE, 
					T1.WORKFLOWID
				FROM ASSET_CLASS_SETUP_HEADER T1
				INNER JOIN ENTITY T2 ON T2.ENTITYCODE = T1.ENTITYCODE
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#1469.4_post" author="nagavamsi.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'asset_class_setup_header_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1469.5" author="NagaVamsi.P">
		<addColumn tableName="RMTFINANCETYPES_TEMP">
			<column name="ASSETCLASSSETUP" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1469.6_01" author="NagaVamsi.P" dbms="postgresql">
		<sql>
			<![CDATA[
					Update RMTFINANCETYPES_TEMP RFT SET ASSETCLASSSETUP =t2.ID from 
					(Select t1.ID,t2.DivisionCode, t1.Active From ASSET_CLASS_SETUP_HEADER t1
					inner join 	SmtDivisionDetail t2 on t1.ENTITYCODE = t2.EntityCode	
					Where t1.Code = 'DEFAULT' and t1.Active = 1) t2
					where RFT.FinDivision = t2.DivisionCode;	
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1469.6_01" author="NagaVamsi.P" dbms="mssql">
		<sql>
			<![CDATA[
					UPDATE RH set  RH.ASSETCLASSSETUP = t2.ID
						From RMTFINANCETYPES_TEMP RH 
					INNER JOIN (Select ACSH.ID ID,sdd.DivisionCode DivisionCode, ACSH.Active From ASSET_CLASS_SETUP_HEADER ACSH
								inner join SmtDivisionDetail sdd on   sdd.EntityCode=ACSH.ENTITYCODE 
								Where ACSH.Code = 'DEFAULT' and ACSH.Active = 1) t2 on  t2.DivisionCode=RH.FinDivision  ;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1469.6_01" author="NagaVamsi.P" dbms="oracle">
		<sql>
			<![CDATA[
				MERGE INTO RMTFINANCETYPES_TEMP FT 
				USING (
				SELECT ID, DivisionCode, HDR.Active From ASSET_CLASS_SETUP_HEADER HDR 
				Inner Join SmtDivisionDetail sd on sd.EntityCode = HDR.EntityCode and HDR.Code = 'DEFAULT' and HDR.Active = 1
				) H on (H.DivisionCode = FT.FinDivision)
				 WHEN MATCHED THEN UPDATE SET 
			 	FT.ASSETCLASSSETUP = H.ID;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1469.7" author="NagaVamsi.P">
		<createIndex tableName="RMTFINANCETYPES_TEMP" indexName="IDX_RMTF_T_ACSUP">
			<column name="ASSETCLASSSETUP" type="bigint" />
		</createIndex>
	</changeSet>

	<changeSet id="ST#1469.8" author="NagaVamsi.P">
		<addColumn tableName="RMTFINANCETYPES">
			<column name="ASSETCLASSSETUP" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1469.9_01" author="NagaVamsi.P" dbms="postgresql">
		<sql>
			<![CDATA[
					Update RMTFINANCETYPES RFT SET ASSETCLASSSETUP = t2.ID from 
					(Select t1.ID,t2.DivisionCode, t1.Active From ASSET_CLASS_SETUP_HEADER t1
					inner join 	SmtDivisionDetail t2 on t1.ENTITYCODE = t2.EntityCode	
					Where t1.Code = 'DEFAULT' and t1.Active = 1) t2
					where RFT.FinDivision = t2.DivisionCode;	
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1469.9_01" author="NagaVamsi.P" dbms="mssql">
		<sql>
			<![CDATA[
					UPDATE RH set  RH.ASSETCLASSSETUP = t2.ID
						From RMTFINANCETYPES RH 
					INNER JOIN (Select ACSH.ID ID,sdd.DivisionCode DivisionCode, ACSH.Active From ASSET_CLASS_SETUP_HEADER ACSH
								inner join SmtDivisionDetail sdd on sdd.EntityCode=ACSH.ENTITYCODE 
								Where ACSH.Code = 'DEFAULT' and ACSH.Active = 1) t2 on t2.DivisionCode=RH.FinDivision;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1469.9_01" author="NagaVamsi.P" dbms="oracle">
		<sql>
			<![CDATA[
				MERGE INTO RMTFINANCETYPES FT 
				USING (
				SELECT ID, DivisionCode, HDR.Active From ASSET_CLASS_SETUP_HEADER HDR 
				Inner Join SmtDivisionDetail sd on sd.EntityCode = HDR.EntityCode and HDR.Code = 'DEFAULT' and HDR.Active = 1
				) H on (H.DivisionCode = FT.FinDivision)
				WHEN MATCHED THEN UPDATE SET 
				FT.ASSETCLASSSETUP = H.ID;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1469.10" author="NagaVamsi.P">
		<createIndex tableName="RMTFINANCETYPES" indexName="IDX_RMTF_ACSUP">
			<column name="ASSETCLASSSETUP" type="bigint" />
		</createIndex>
	</changeSet>

	<changeSet id="ST#1469.14" author="NagaVamsi.P">
		<addColumn tableName="FINANCEMAIN">
			<column name="UnderNpa" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1469.15" author="NagaVamsi.P">
		<addColumn tableName="FINANCEMAIN_TEMP">
			<column name="UnderNpa" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1469.16" author="NagaVamsi.P">
		<sql>
			<![CDATA[
				UPDATE FINANCEMAIN_TEMP SET UNDERNPA = (SELECT np.EFFNPASTAGE FROM NPA_LOAN_INFO np where FINANCEMAIN_TEMP.FinID = np.FinID) WHERE UNDERNPA IS NULL;
				UPDATE FINANCEMAIN SET UNDERNPA = (SELECT np.EFFNPASTAGE FROM NPA_LOAN_INFO np where FINANCEMAIN.FinID = np.FinID) WHERE UNDERNPA IS NULL;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1469.16.1" author="NagaVamsi.P">
		<sql>
			<![CDATA[
				UPDATE FINANCEMAIN_TEMP SET UNDERNPA = 0 WHERE UNDERNPA IS NULL;
				UPDATE FINANCEMAIN SET UNDERNPA = 0 WHERE UNDERNPA IS NULL;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1469.17" author="NagaVamsi.P" dbms="postgresql, oracle">
		<addDefaultValue columnName="UnderNpa" tableName="FINANCEMAIN_TEMP" defaultValue="0" />
		<addDefaultValue columnName="UnderNpa" tableName="FINANCEMAIN" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#1469.17" author="NagaVamsi.P" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE FINANCEMAIN_TEMP ADD CONSTRAINT DF_F_T_UNDERNPA DEFAULT 0 FOR UNDERNPA;
				ALTER TABLE FINANCEMAIN ADD CONSTRAINT DF_F_UNDERNPA DEFAULT 0 FOR UNDERNPA;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1469.18_pre" author="NagaVamsi.P" dbms="postgresql">
		<sql> 
			<![CDATA[ 
				select deps_save_and_drop_dependencies ('plf', 'financemain_lview'); 
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1469.18" author="NagaVamsi.P">
		<createView viewName="FINANCEMAIN_LVIEW" replaceIfExists="true">
			<![CDATA[
		 		SELECT T1.FINID
		 			, T1.FINREFERENCE
					, T1.INVESTMENTREF
					, T1.FINTYPE
					, T1.FINCCY
					, T1.FINAMOUNT
					, T1.DOWNPAYMENT
					, T1.FEECHARGEAMT
					, T1.SCHEDULEMETHOD
					, T1.NUMBEROFTERMS
					, T1.RECORDSTATUS
					, T1.RECORDTYPE
					, T1.ROLECODE
					, T1.NEXTROLECODE
					, T1.FINBRANCH
					, T1.FINCONTRACTDATE
					, T1.LINKEDFINREF
					, T1.NEXTUSERID
					, T1.PRIORITY
					, T1.WORKFLOWID
					, T1.TASKID
					, T1.NEXTTASKID
					, T1.FINPREAPPROVEDREF
					, T1.RCDMAINTAINSTS
					, T1.FINCURRASSETVALUE
					, T1.CALTERMS
					, T1.DEVIATIONAPPROVAL
					, T1.FINPURPOSE
					, T1.INITIATEDATE
					, T1.FINASSETVALUE
					, T2.CUSTCIF LOVDESCCUSTCIF
					, T2.CUSTSHRTNAME LOVDESCCUSTSHRTNAME
					, T2.CUSTPASSPORTNO LOVDESCCUSTPASSPORTNO
					, T2.CUSTDOB LOVDESCCUSTDOB
					, T2.CUSTCRCPR LOVDESCCUSTCRCPR
					, T2.PHONENUMBER
					, T3.FINCATEGORY LOVDESCPRODUCTCODENAME
					, T3.FINDIVISION LOVDESCFINDIVISION
					, T3.PRODUCT LOVDESCFINPRODUCT
					, T3.FINTYPEDESC LOVDESCFINTYPENAME
					, COALESCE(T4.ROLEDESC, ${add.schema}FN_GET_ROLEDESC(T1.NEXTROLECODE)) LOVDESCREQUESTSTAGE
					, T1.SAMPLINGREQUIRED
					, T1.ADVANCEEMI
					, T1.ADVEMITERMS
					, T1.BPIPFTDAYSBASIS
					, T1.GRACETERMS
					, T1.PRODUCTCATEGORY
					, T1.REQLOANAMT
					, T1.REQLOANTENOR
					, T1.FINOCRREQUIRED
					, T1.OFFERPRODUCT
					, T1.OFFERAMOUNT
					, T1.CUSTSEGMENTATION
					, T1.BASEPRODUCT
					, T1.PROCESSTYPE
					, T1.BUREAUTIMESERIES
					, T1.CAMPAIGNNAME
					, T1.EXISTINGLANREFNO
					, T1.LEADSOURCE
					, T1.POSOURCE
					, T1.RSA
					, T1.VERIFICATION
					, T1.SOURCINGBRANCH
					, T1.SOURCHANNELCATEGORY
					, T1.ASMNAME
					, T1.OFFERID
					, T1.APPLICATIONNO
					, T1.LASTMNTON
					, T1.VERSION
					, T1.TDSAPPLICABLE
					, T2.CUSTID
					, T1.INSTBASEDSCHD
					, T1.ALLOWSUBVENTION
					, T1.TDSTYPE
					, T1.WRITEOFFLOAN
					, T1.RESTRUCTURE
					, T1.CALCOFSTEPS
					, T1.STEPSAPPLIEDFOR
					, T1.NOOFGRCSTEPS
					, T1.SCHDVERSION
					, T1.SUBVENTIONFROM
					, T1.MANUFACTURERDEALERID
					, T5.DEALERNAME MANUFACTURERDEALERNAME
					, T5.CODE MANUFACTURERDEALERCODE
					, T1.ESCROW
					, T1.CUSTBANKID
					, CB.ACCOUNTNUMBER CUSTACCTNUMBER
					, CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME
					, T1.MANUALSCHDTYPE
					, T1.ISRA
					, T1.SANCTIONEDDATE
					, T1.OVERDRAFTTXNCHRGREQ
					, T1.OVERDRAFTCALCCHRG
					, T1.OVERDRAFTCHRGAMTORPERC
					, T1.OVERDRAFTCHRCALON
					, T1.UNDERSETTLEMENT
					, T1.UNDERNPA
				FROM FINANCEMAIN_TEMP T1
				INNER JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
				INNER JOIN RMTFINANCETYPES T3 ON T3.FINTYPE = T1.FINTYPE
				LEFT JOIN SECROLES T4 ON T1.NEXTROLECODE= T4.ROLECD
				LEFT JOIN AMTVEHICLEDEALER T5 ON T1.MANUFACTURERDEALERID = T5.DEALERID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#1469.18_post" author="NagaVamsi.P" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_lview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1469.19_pre" author="NagaVamsi.P" dbms="postgresql">
		<sql> 
			<![CDATA[ 
				select deps_save_and_drop_dependencies ('plf', 'financemain_aview'); 
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1469.19" author="NagaVamsi.P">
		<createView viewName="FINANCEMAIN_AVIEW" replaceIfExists="true">
			 <![CDATA[ 
				SELECT T1.FINID
					, T1.FINREFERENCE
			    	, T1.INVESTMENTREF
			    	, T1.NUMBEROFTERMS
			    	, T1.GRCPERIODENDDATE
			    	, T1.ALLOWGRCPERIOD
			    	, T1.GRACEBASERATE
			    	, T1.GRACESPECIALRATE
			    	, T1.GRCPFTRATE
			    	, T1.GRCPFTFRQ
			    	, T1.NEXTGRCPFTDATE
			    	, T1.ALLOWGRCPFTRVW
			    	, T1.GRCPFTRVWFRQ
			    	, T1.NEXTGRCPFTRVWDATE
			    	, T1.ALLOWGRCCPZ
			    	, T1.GRCCPZFRQ
			    	, T1.NEXTGRCCPZDATE
			    	, T1.REPAYBASERATE
			    	, T1.REPAYSPECIALRATE
			    	, T1.REPAYPROFITRATE
			    	, T1.REPAYFRQ
			    	, T1.NEXTREPAYDATE
			    	, T1.REPAYPFTFRQ
			    	, T1.NEXTREPAYPFTDATE
			    	, T1.ALLOWREPAYRVW
			    	, T1.REPAYRVWFRQ
			    	, T1.NEXTREPAYRVWDATE
			    	, T1.ALLOWREPAYCPZ
			    	, T1.REPAYCPZFRQ
			    	, T1.NEXTREPAYCPZDATE
			    	, T1.MATURITYDATE
			    	, T1.CPZATGRACEEND
			    	, T1.DOWNPAYMENT
			    	, T1.GRACEFLATAMOUNT
			    	, T1.REQREPAYAMOUNT
			    	, T1.TOTALPROFIT
			    	, T1.TOTALCPZ
			    	, T1.TOTALGROSSPFT
			    	, T1.TOTALGROSSGRCPFT
			    	, T1.TOTALGRACEPFT
			    	, T1.TOTALGRACECPZ
			    	, T1.GRCRATEBASIS
			    	, T1.REPAYRATEBASIS
			    	, T1.FINTYPE
			    	, T1.FINREMARKS
			    	, T1.FINCCY
			    	, T1.SCHEDULEMETHOD
			    	, T1.PROFITDAYSBASIS
			    	, T1.REQMATURITY
			    	, T1.CALTERMS
			    	, T1.CALMATURITY
			    	, T1.FIRSTREPAY
			    	, T1.LASTREPAY
			    	, T1.FINSTARTDATE
			    	, T1.FINAMOUNT
					, T1.FINAMOUNT + T1.FEECHARGEAMT - T1.DOWNPAYMENT LOVDESCFINANCINGAMOUNT
			    	, T1.FINREPAYMENTAMOUNT
			    	, T1.CUSTID
			   		, T1.DEFFERMENTS
			    	, T1.PLANDEFERCOUNT
			    	, T1.FINBRANCH
			    	, T1.FINSOURCEID
			    	, T1.ALLOWEDDEFRPYCHANGE
			    	, T1.AVAILEDDEFRPYCHANGE
			    	, T1.ALLOWEDDEFFRQCHANGE
			    	, T1.AVAILEDDEFFRQCHANGE
			    	, T1.RECALTYPE
			    	, T1.FINASSETVALUE
			    	, T1.FINISACTIVE
			    	, T1.LIMITVALID
			    	, T1.OVERRIDELIMIT
			    	, T1.VERSION
			    	, T1.LASTMNTBY
			    	, T1.LASTMNTON
			    	, T1.RECORDSTATUS
			    	, T1.ROLECODE
			    	, T1.NEXTROLECODE
			    	, T1.TASKID
			    	, T1.NEXTTASKID
			    	, T1.RECORDTYPE
			    	, T1.WORKFLOWID
					, T7.FINTYPEDESC LOVDESCFINTYPENAME
					, T7.FINMAXAMOUNT LOVDESCFINMAXAMT
					, T7.FINMINAMOUNT LOVDESCFINMINAMOUNT
			    	, T1.MINDOWNPAYPERC
					, T7.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT
					, T7.FINISDWPAYREQUIRED LOVDESCDWNPAYREQ
					, T7.FINMAXDIFFERMENT LOVDESCFINMAXDIFFERMENT
					, T12.BRANCHDESC LOVDESCFINBRANCHNAME
					, T12.BRANCHPROVINCE FINBRANCHPROVINCECODE
			    	, T1.LASTREPAYDATE
			    	, T1.LASTREPAYPFTDATE
			    	, T1.LASTREPAYRVWDATE
			    	, T1.LASTREPAYCPZDATE
			    	, T1.ALLOWGRCREPAY
			    	, T1.GRCSCHDMTHD
			    	, T1.GRCMARGIN
			    	, T1.REPAYMARGIN
			    	, T1.FINCURRASSETVALUE
			    	, T1.FINCOMMITMENTREF
			    	, T1.FINLIMITREF
			    	, T1.FINCONTRACTDATE
					, T17.ACRTILLLBD LOVDESCACCRUEDTILLLBD
			    	, T7.FINRVWRATEAPPLFOR
			    	, T1.TOTALREPAYAMT
			    	, T1.CLOSINGSTATUS
			    	, T1.FINAPPROVEDDATE
			    	, T1.FEECHARGEAMT
			    	, T1.BLACKLISTED
			    	, T1.FINREPAYPFTONFRQ
			    	, T1.ANUALIZEDPERCRATE
			    	, T1.EFFECTIVERATEOFRETURN
			    	, T1.MIGRATEDFINANCE
			    	, T1.SCHEDULEMAINTAINED
			    	, T1.SCHEDULEREGENERATED
			    	, T1.FINPURPOSE
					, T39.LOANPURPOSEDESC LOVDESCFINPURPOSENAME
			    	, T1.FINSTATUS
			    	, T1.FINSTSREASON
			    	, T1.INITIATEUSER
					, T7.FINSCHEDULEON LOVDESCFINSCHEDULEON
			    	, T1.CUSTDSR
			    	, T1.JOINTACCOUNT
			    	, T1.JOINTCUSTID
			    	, T1.DOWNPAYBANK
			    	, T1.DOWNPAYSUPL
			    	, T1.SECURITYCOLLATERAL
			    	, T1.APPROVED
			    	, T1.DISCREPANCY
			    	, T1.LIMITAPPROVED
			    	, T1.GRACETERMS
					, T7.FINDIVISION LOVDESCFINDIVISION
			    	, T1.RCDMAINTAINSTS
			    	, T1.FINREPAYMETHOD
			    	, T1.GRCPROFITDAYSBASIS
			    	, T1.STEPFINANCE
			    	, T1.STEPTYPE
				    , T1.STEPPOLICY
				    , T1.ALWMANUALSTEPS
				    , T1.NOOFSTEPS
				    , T1.LINKEDFINREF
				    , T1.NEXTUSERID
				    , T1.PRIORITY
					, T24.POLICYDESC LOVDESCSTEPPOLICYNAME
				    , T1.GRCMINRATE
				    , T1.GRCMAXRATE
				    , T1.RPYMINRATE
				    , T1.RPYMAXRATE
				    , T1.DEVIATIONAPPROVAL
				    , T1.MANUALSCHEDULE
				    , T1.CREDITINSAMT
				    , T27.CUSTSTSDESCRIPTION
				    , T1.INITIATEDATE
				    , T1.FINPREAPPROVEDREF
				    , T1.ACCOUNTSOFFICER
					, T28.DEALERNAME LOVDESCACCOUNTSOFFICER
					, T28.DEALERCITY LOVDESCSOURCECITY
				    , T1.DSACODE
					, T30.ROFFICERDESC DSACODEDESC
				    , T1.TDSAPPLICABLE
				    , T1.MANDATEID
				    , T1.SECURITYMANDATEID
				    , T1.DROPLINEFRQ
				    , T1.FIRSTDROPLINEDATE
				    , T1.PFTSERVICINGODLIMIT
				    , T1.ALWBPI
				    , T1.BPITREATMENT
				    , T1.PLANEMIHALW
				    , T1.PLANEMIHMETHOD
				    , T1.PLANEMIHMAXPERYEAR
				    , T1.PLANEMIHMAX
				    , T1.PLANEMIHLOCKPERIOD
				    , T1.PLANEMICPZ
				    , T1.CALROUNDINGMODE
				    , T1.ALWMULTIDISB
				    , T1.APPLICATIONNO
				    , T1.REFERRALID
					, T33.ROFFICERDESC REFERRALIDDESC
				    , T1.DMACODE
					, T34.ROFFICERDESC DMACODEDESC
				    , T1.SALESDEPARTMENT
					, T35.DEPTDESC SALESDEPARTMENTDESC
				    , T1.QUICKDISB
				    , T1.WIFREFERENCE
				    , T1.UNPLANEMIHLOCKPERIOD
				    , T1.UNPLANEMICPZ
				    , T1.REAGECPZ
				    , T1.MAXUNPLANNEDEMI
				    , T1.MAXREAGEHOLIDAYS
				    , T1.AVAILEDUNPLANEMI
				    , T1.AVAILEDREAGEH
				    , T1.BPIAMOUNT
				    , T1.DEDUCTFEEDISB
				    , T1.RVWRATEAPPLFOR
				    , T1.SCHCALONRVW
				    , T1.PASTDUEPFTCALMTHD
				    , T1.PASTDUEPFTMARGIN
				    , T1.DROPPINGMETHOD
				    , T1.RATECHGANYDAY
				    , T1.PROMOTIONCODE
				    , T1.RESTRUCTURELOAN
				    , T1.OLDFINREFERENCE
				    , T1.REAGEBUCKET
				    , T1.FINCATEGORY
				    , T1.PRODUCTCATEGORY
				    , T1.ROUNDINGTARGET
					, T36.ENTITYCODE LOVDESCENTITYCODE
				    , T1.ELIGIBILITYMETHOD
					, T38.FIELDCODEVALUE LOVELIGIBILITYMETHOD
					, T38.VALUEDESC LOVDESCELIGIBILITYMETHOD
				    , T1.EMPLOYEENAME
					, T37.ROFFICERDESC EMPLOYEENAMEDESC
				    , T1.SAMPLINGREQUIRED
				    , T1.LEGALREQUIRED
				    , T1.GRCMAXAMOUNT
				    , T1.CONNECTOR
					, T40.DEALERNAME CONNECTORCODE
					, T40.DEALERCITY CONNECTORDESC
				    , T1.ADVANCEEMI
				    , T1.ADVEMITERMS
				    , T1.BPIPFTDAYSBASIS
				    , T1.FIXEDRATETENOR
				    , T1.FIXEDTENORRATE
					, T12.BRANCHTEL FINBRANCHCONTACT
				    , T1.PROCESSATTRIBUTES
				    , T1.BUSINESSVERTICAL
					, BV.CODE BUSINESSVERTICALCODE
					, BV.DESCRIPTION BUSINESSVERTICALDESC
				    , T1.GRCADVTYPE
				    , T1.GRCADVTERMS
				    , T1.ADVTYPE
				    , T1.ADVTERMS
				    , T1.ADVSTAGE
				    , T1.TDSPERCENTAGE
				    , T1.TDSSTARTDATE
				    , T1.TDSENDDATE
				    , T1.TDSLIMITAMT
				    , T1.VANREQ
				    , T1.VANCODE
				    , T1.ALLOWDRAWINGPOWER
				    , T1.ALLOWREVOLVING
				    , T1.SANBSDSCHDLE
				    , T1.PROMOTIONSEQID
				    , T1.SVAMOUNT
				    , T1.CBAMOUNT
				    , T1.APPLIEDLOANAMT
				    , T1.FINISRATERVWATGRCEND
				    , T1.PLANEMIHALWINGRACE
					, T1.REQLOANAMT
					, T1.REQLOANTENOR
					, T1.FINOCRREQUIRED
					, T1.OFFERPRODUCT
					, T1.OFFERAMOUNT
					, T1.CUSTSEGMENTATION
					, T1.BASEPRODUCT
					, T1.PROCESSTYPE
					, T1.BUREAUTIMESERIES
					, T1.CAMPAIGNNAME
					, T1.EXISTINGLANREFNO
					, T1.LEADSOURCE
					, T1.POSOURCE
					, T1.RSA
					, T1.VERIFICATION
					, T1.SOURCINGBRANCH
					, T1.SOURCHANNELCATEGORY
					, T1.ASMNAME
					, T13.BRANCHDESC LOVDESCSOURCINGBRANCH
					, T1.ENDGRCPERIODAFTRFULLDISB
					, T1.AUTOINCGRCENDDATE
					, T1.ALWGRCADJ
					, T1.PMAY
					, T1.OFFERID
					, T1.ALWLOANSPLIT
					, T1.PARENTREF
					, T1.LOANSPLITTED
					, T1.INSTBASEDSCHD
					, C.CUSTCIF LOVDESCCUSTCIF
					, T1.ALLOWSUBVENTION
					, T1.TDSTYPE
					, T1.WRITEOFFLOAN
					, T1.RESTRUCTURE
					, T1.CALCOFSTEPS
					, T1.STEPSAPPLIEDFOR
					, T1.NOOFGRCSTEPS
					, T1.SCHDVERSION
					, T1.SUBVENTIONFROM
					, T1.MANUFACTURERDEALERID
					, T41.DEALERNAME MANUFACTURERDEALERNAME
					, T41.CODE MANUFACTURERDEALERCODE
					, T1.ESCROW
					, T1.CUSTBANKID
					, CB.ACCOUNTNUMBER CUSTACCTNUMBER
					, CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME
					, T1.MANUALSCHDTYPE
					, T1.ISRA
					, T1.SANCTIONEDDATE
					, T1.OVERDRAFTTXNCHRGREQ
					, T1.OVERDRAFTCALCCHRG
					, T1.OVERDRAFTCHRGAMTORPERC
					, T1.OVERDRAFTCHRCALON
					, T17.NOINST
					, T1.UNDERSETTLEMENT
					, T1.UNDERNPA
				FROM FINANCEMAIN T1
				JOIN RMTFINANCETYPES T7 ON T1.FINTYPE = T7.FINTYPE 
				LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH  = T12.BRANCHCODE 
				LEFT JOIN RMTBRANCHES T13 ON T1.SOURCINGBRANCH = T13.BRANCHCODE
				LEFT JOIN FINPFTDETAILS T17 ON T17.FINID  = T1.FINID 
				LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY  = T24.POLICYCODE 
				LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS  = T27.CUSTSTSCODE 
				LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
				LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE  = T30.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID  = T33.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE  = T34.ROFFICERCODE 
				LEFT JOIN BMTDEPARTMENTS T35 ON T1.SALESDEPARTMENT  = T35.DEPTCODE 
				LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION  = T36.DIVISIONCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME  = T37.ROFFICERCODE 
				LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE  = 'ELGMETHOD' 
				LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE  = T39.LOANPURPOSECODE 
				LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
				LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
				INNER JOIN CUSTOMERS C ON C.CUSTID = T1.CUSTID
				LEFT JOIN AMTVEHICLEDEALER T41 ON T1.MANUFACTURERDEALERID = T41.DEALERID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
			]]>
		</createView>
	</changeSet>


	<changeSet id="ST#1469.19_post" author="NagaVamsi.P" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_aview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1469.20_pre" author="NagaVamsi.P" dbms="postgresql">
		<sql> 
		<![CDATA[ 
			select deps_save_and_drop_dependencies ('plf', 'financemain_view'); 
		]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1469.20" author="NagaVamsi.P">
		<createView viewName="FINANCEMAIN_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINID
					, T1.FINREFERENCE
				    , T1.INVESTMENTREF
				    , T1.NUMBEROFTERMS
				    , T1.GRCPERIODENDDATE
				    , T1.ALLOWGRCPERIOD
				    , T1.GRACEBASERATE
				    , T1.GRACESPECIALRATE
				    , T1.GRCPFTRATE
				    , T1.GRCPFTFRQ
				    , T1.NEXTGRCPFTDATE
				    , T1.ALLOWGRCPFTRVW
				    , T1.GRCPFTRVWFRQ
				    , T1.NEXTGRCPFTRVWDATE
				    , T1.ALLOWGRCCPZ
				    , T1.GRCCPZFRQ
				    , T1.NEXTGRCCPZDATE
				    , T1.REPAYBASERATE
				    , T1.REPAYSPECIALRATE
				    , T1.REPAYPROFITRATE
				    , T1.REPAYFRQ
				    , T1.NEXTREPAYDATE
				    , T1.REPAYPFTFRQ
				    , T1.NEXTREPAYPFTDATE
				    , T1.ALLOWREPAYRVW
				    , T1.REPAYRVWFRQ
				    , T1.NEXTREPAYRVWDATE
				    , T1.ALLOWREPAYCPZ
				    , T1.REPAYCPZFRQ
				    , T1.NEXTREPAYCPZDATE
				    , T1.MATURITYDATE
				    , T1.CPZATGRACEEND
				    , T1.DOWNPAYMENT
				    , T1.GRACEFLATAMOUNT
				    , T1.REQREPAYAMOUNT
				    , T1.TOTALPROFIT
				    , T1.TOTALCPZ
				    , T1.TOTALGROSSPFT
				    , T1.TOTALGROSSGRCPFT
				    , T1.TOTALGRACEPFT
				    , T1.TOTALGRACECPZ
				    , T1.GRCRATEBASIS
				    , T1.REPAYRATEBASIS
				    , T1.FINTYPE
				    , T1.FINREMARKS
				    , T1.FINCCY
				    , T1.SCHEDULEMETHOD
				    , T1.PROFITDAYSBASIS
				    , T1.REQMATURITY
				    , T1.CALTERMS
				    , T1.CALMATURITY
				    , T1.FIRSTREPAY
				    , T1.LASTREPAY
				    , T1.FINSTARTDATE
				    , T1.FINAMOUNT
					, ((T1.FINAMOUNT + T1.FEECHARGEAMT) - T1.DOWNPAYMENT) LOVDESCFINANCINGAMOUNT
				    , T1.FINREPAYMENTAMOUNT
				    , T1.CUSTID
				    , T1.DEFFERMENTS
				    , T1.PLANDEFERCOUNT
				    , T1.FINBRANCH
				    , T1.FINSOURCEID
				    , T1.ALLOWEDDEFRPYCHANGE
				    , T1.AVAILEDDEFRPYCHANGE
				    , T1.ALLOWEDDEFFRQCHANGE
				    , T1.AVAILEDDEFFRQCHANGE
				    , T1.RECALTYPE
				    , T1.FINASSETVALUE
				    , T1.FINISACTIVE
				    , T1.LIMITVALID
				    , T1.OVERRIDELIMIT
				    , T1.VERSION
				    , T1.LASTMNTBY
				    , T1.LASTMNTON
				    , T1.RECORDSTATUS
				    , T1.ROLECODE
				    , T1.NEXTROLECODE
				    , T1.TASKID
				    , T1.NEXTTASKID
				    , T1.RECORDTYPE
				    , T1.WORKFLOWID
				    , T7.FINTYPEDESC LOVDESCFINTYPENAME
				    , T7.FINMAXAMOUNT LOVDESCFINMAXAMT
				    , T7.FINMINAMOUNT LOVDESCFINMINAMOUNT
				    , T1.MINDOWNPAYPERC
				    , T7.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT
				    , T7.FINISDWPAYREQUIRED LOVDESCDWNPAYREQ
				    , T7.FINMAXDIFFERMENT LOVDESCFINMAXDIFFERMENT
				    , T12.BRANCHDESC LOVDESCFINBRANCHNAME
				    , T12.BRANCHPROVINCE FINBRANCHPROVINCECODE
				    , T1.LASTREPAYDATE
				    , T1.LASTREPAYPFTDATE
				    , T1.LASTREPAYRVWDATE
				    , T1.LASTREPAYCPZDATE
				    , T1.ALLOWGRCREPAY
				    , T1.GRCSCHDMTHD
				    , T1.GRCMARGIN
				    , T1.REPAYMARGIN
				    , T1.FINCURRASSETVALUE
				    , T1.FINCOMMITMENTREF
				    , T1.FINLIMITREF
				    , T1.FINCONTRACTDATE
				    , T17.ACRTILLLBD LOVDESCACCRUEDTILLLBD
				    , T7.FINRVWRATEAPPLFOR
				    , T1.TOTALREPAYAMT
				    , T1.CLOSINGSTATUS
				    , T1.FINAPPROVEDDATE
				    , T1.FEECHARGEAMT
				    , T1.BLACKLISTED
				    , T1.FINREPAYPFTONFRQ
				    , T1.ANUALIZEDPERCRATE
				    , T1.EFFECTIVERATEOFRETURN
				    , T1.MIGRATEDFINANCE
				    , T1.SCHEDULEMAINTAINED
				    , T1.SCHEDULEREGENERATED
				    , T1.FINPURPOSE
				    , T39.LOANPURPOSEDESC LOVDESCFINPURPOSENAME
				    , T1.FINSTATUS
				    , T1.FINSTSREASON
				    , T1.INITIATEUSER
				    , T7.FINSCHEDULEON LOVDESCFINSCHEDULEON
				    , T1.CUSTDSR
				    , T1.JOINTACCOUNT
				    , T1.JOINTCUSTID
				    , T1.DOWNPAYBANK
				    , T1.DOWNPAYSUPL
				    , T1.SECURITYCOLLATERAL
				    , T1.APPROVED
				    , T1.DISCREPANCY
				    , T1.LIMITAPPROVED
				    , T1.GRACETERMS
				    , T7.FINDIVISION LOVDESCFINDIVISION
				    , T1.RCDMAINTAINSTS
				    , T1.FINREPAYMETHOD
				    , T1.GRCPROFITDAYSBASIS
				    , T1.STEPFINANCE
				    , T1.STEPTYPE
				    , T1.STEPPOLICY
				    , T1.ALWMANUALSTEPS
				    , T1.NOOFSTEPS
				    , T1.LINKEDFINREF
				    , T1.NEXTUSERID
				    , T1.PRIORITY
				    , T24.POLICYDESC LOVDESCSTEPPOLICYNAME
				    , T1.GRCMINRATE
				    , T1.GRCMAXRATE
				    , T1.RPYMINRATE
				    , T1.RPYMAXRATE
				    , T1.DEVIATIONAPPROVAL
				    , T1.MANUALSCHEDULE
				    , T1.CREDITINSAMT
				    , T27.CUSTSTSDESCRIPTION
				    , T1.INITIATEDATE
				    , T1.FINPREAPPROVEDREF
				    , T1.ACCOUNTSOFFICER
				    , T28.DEALERNAME LOVDESCACCOUNTSOFFICER
				    , T28.DEALERCITY LOVDESCSOURCECITY
				    , T1.DSACODE
				    , T30.ROFFICERDESC DSACODEDESC
				    , T1.TDSAPPLICABLE
				    , T1.MANDATEID
				    , T1.SECURITYMANDATEID
				    , T1.DROPLINEFRQ
				    , T1.FIRSTDROPLINEDATE
				    , T1.PFTSERVICINGODLIMIT
				    , T1.ALWBPI
				    , T1.BPITREATMENT
				    , T1.PLANEMIHALW
				    , T1.PLANEMIHMETHOD
				    , T1.PLANEMIHMAXPERYEAR
				    , T1.PLANEMIHMAX
				    , T1.PLANEMIHLOCKPERIOD
				    , T1.PLANEMICPZ
				    , T1.CALROUNDINGMODE
				    , T1.ALWMULTIDISB
				    , T1.APPLICATIONNO
				    , T1.REFERRALID
				    , T33.ROFFICERDESC REFERRALIDDESC
				    , T1.DMACODE
				    , T34.ROFFICERDESC DMACODEDESC
				    , T1.SALESDEPARTMENT
				    , T35.DEPTDESC SALESDEPARTMENTDESC
				    , T1.QUICKDISB
				    , T1.WIFREFERENCE
				    , T1.UNPLANEMIHLOCKPERIOD
				    , T1.UNPLANEMICPZ
				    , T1.REAGECPZ
				    , T1.MAXUNPLANNEDEMI
				    , T1.MAXREAGEHOLIDAYS
				    , T1.AVAILEDUNPLANEMI
				    , T1.AVAILEDREAGEH
				    , T1.BPIAMOUNT
				    , T1.DEDUCTFEEDISB
				    , T1.RVWRATEAPPLFOR
				    , T1.SCHCALONRVW
				    , T1.PASTDUEPFTCALMTHD
				    , T1.PASTDUEPFTMARGIN
				    , T1.DROPPINGMETHOD
				    , T1.RATECHGANYDAY
				    , T1.PROMOTIONCODE
				    , T1.RESTRUCTURELOAN
				    , T1.OLDFINREFERENCE
				    , T1.REAGEBUCKET
				    , T1.FINCATEGORY
				    , T1.PRODUCTCATEGORY
				    , T1.ROUNDINGTARGET
				    , T36.ENTITYCODE LOVDESCENTITYCODE
				    , T1.ELIGIBILITYMETHOD
				    , T38.FIELDCODEVALUE LOVELIGIBILITYMETHOD
				    , T38.VALUEDESC LOVDESCELIGIBILITYMETHOD
				    , T1.EMPLOYEENAME
				    , T37.ROFFICERDESC EMPLOYEENAMEDESC
				    , T1.SAMPLINGREQUIRED
				    , T1.LEGALREQUIRED
				    , T1.GRCMAXAMOUNT
				    , T1.CONNECTOR
				    , T40.DEALERNAME CONNECTORCODE
				    , T40.DEALERCITY CONNECTORDESC
				    , T1.ADVANCEEMI
				    , T1.ADVEMITERMS
				    , T1.BPIPFTDAYSBASIS
				    , T1.FIXEDRATETENOR
				    , T1.FIXEDTENORRATE
				    , T12.BRANCHTEL FINBRANCHCONTACT
				    , T1.PROCESSATTRIBUTES
				    , T1.BUSINESSVERTICAL
				    , BV.CODE BUSINESSVERTICALCODE
				    , BV.DESCRIPTION BUSINESSVERTICALDESC
				    , T1.GRCADVTYPE
				    , T1.GRCADVTERMS
				    , T1.ADVTYPE
				    , T1.ADVTERMS
				    , T1.ADVSTAGE
				    , T1.TDSPERCENTAGE
				    , T1.TDSSTARTDATE
				    , T1.TDSENDDATE
				    , T1.TDSLIMITAMT
				    , T1.VANREQ
				    , T1.VANCODE
				    , T1.ALLOWDRAWINGPOWER
				    , T1.ALLOWREVOLVING
				    , T1.SANBSDSCHDLE
				    , T1.PROMOTIONSEQID
				    , T1.SVAMOUNT
				    , T1.CBAMOUNT
				    , T1.APPLIEDLOANAMT
				    , T1.FINISRATERVWATGRCEND
					, T1.REQLOANAMT
					, T1.REQLOANTENOR
					, T1.FINOCRREQUIRED
					, T1.OFFERPRODUCT
					, T1.OFFERAMOUNT
					, T1.CUSTSEGMENTATION
					, T1.BASEPRODUCT
					, T1.PROCESSTYPE
					, T1.BUREAUTIMESERIES
					, T1.CAMPAIGNNAME
					, T1.EXISTINGLANREFNO
					, T1.LEADSOURCE
					, T1.POSOURCE
					, T1.RSA
					, T1.VERIFICATION
					, T1.SOURCINGBRANCH
					, T1.SOURCHANNELCATEGORY
					, T1.ASMNAME
					, T13.BRANCHDESC LOVDESCSOURCINGBRANCH
					, T1.OFFERID
					, T1.ALWGRCADJ
					, T1.ENDGRCPERIODAFTRFULLDISB
					, T1.AUTOINCGRCENDDATE
					, T1.PMAY
					, T1.ALWLOANSPLIT
					, T1.PARENTREF
					, T1.LOANSPLITTED
					, T1.INSTBASEDSCHD
					, T1.PLANEMIHALWINGRACE
					, T1.ALLOWSUBVENTION
					, T1.TDSTYPE
					, T1.WRITEOFFLOAN
					, T1.RESTRUCTURE
					, T1.CALCOFSTEPS
					, T1.STEPSAPPLIEDFOR
					, T1.NOOFGRCSTEPS
					, T1.SCHDVERSION
					, T1.SUBVENTIONFROM
					, T1.MANUFACTURERDEALERID
					, T41.DEALERNAME MANUFACTURERDEALERNAME
					, T41.CODE MANUFACTURERDEALERCODE
					, T1.ESCROW
					, T1.CUSTBANKID
					, CB.ACCOUNTNUMBER CUSTACCTNUMBER
					, CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME
					, T1.MANUALSCHDTYPE
					, T1.ISRA
					, T1.SANCTIONEDDATE
					, T1.OVERDRAFTTXNCHRGREQ
					, T1.OVERDRAFTCALCCHRG
					, T1.OVERDRAFTCHRGAMTORPERC
					, T1.OVERDRAFTCHRCALON
					, T1.UNDERSETTLEMENT
					, T1.UNDERNPA
				FROM FINANCEMAIN_TEMP T1
				JOIN RMTFINANCETYPES T7 ON T1.FINTYPE  = T7.FINTYPE 
				LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH  = T12.BRANCHCODE 
				LEFT JOIN RMTBRANCHES T13 ON T1.SOURCINGBRANCH = T13.BRANCHCODE
				LEFT JOIN FINPFTDETAILS T17 ON T17.FINID  = T1.FINID 
				LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY  = T24.POLICYCODE 
				LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS  = T27.CUSTSTSCODE 
				LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
				LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE  = T30.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID  = T33.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE  = T34.ROFFICERCODE 
				LEFT JOIN BMTDEPARTMENTS T35 ON T1.SALESDEPARTMENT  = T35.DEPTCODE 
				LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION  = T36.DIVISIONCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME  = T37.ROFFICERCODE 
				LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE  = 'ELGMETHOD' 
				LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE  = T39.LOANPURPOSECODE 
				LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
				LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
				LEFT JOIN AMTVEHICLEDEALER T41 ON T1.MANUFACTURERDEALERID = T41.DEALERID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				UNION ALL
				SELECT T1.FINID
					, T1.FINREFERENCE
				    , T1.INVESTMENTREF
				    , T1.NUMBEROFTERMS
				    , T1.GRCPERIODENDDATE
				    , T1.ALLOWGRCPERIOD
				    , T1.GRACEBASERATE
				    , T1.GRACESPECIALRATE
				    , T1.GRCPFTRATE
				    , T1.GRCPFTFRQ
				    , T1.NEXTGRCPFTDATE
				    , T1.ALLOWGRCPFTRVW
				    , T1.GRCPFTRVWFRQ
				    , T1.NEXTGRCPFTRVWDATE
				    , T1.ALLOWGRCCPZ
				    , T1.GRCCPZFRQ
				    , T1.NEXTGRCCPZDATE
				    , T1.REPAYBASERATE
				    , T1.REPAYSPECIALRATE
				    , T1.REPAYPROFITRATE
				    , T1.REPAYFRQ
				    , T1.NEXTREPAYDATE
				    , T1.REPAYPFTFRQ
				    , T1.NEXTREPAYPFTDATE
				    , T1.ALLOWREPAYRVW
				    , T1.REPAYRVWFRQ
				    , T1.NEXTREPAYRVWDATE
				    , T1.ALLOWREPAYCPZ
				    , T1.REPAYCPZFRQ
				    , T1.NEXTREPAYCPZDATE
				    , T1.MATURITYDATE
				    , T1.CPZATGRACEEND
				    , T1.DOWNPAYMENT
				    , T1.GRACEFLATAMOUNT
				    , T1.REQREPAYAMOUNT
				    , T1.TOTALPROFIT
				    , T1.TOTALCPZ
				    , T1.TOTALGROSSPFT
				    , T1.TOTALGROSSGRCPFT
				    , T1.TOTALGRACEPFT
				    , T1.TOTALGRACECPZ
				    , T1.GRCRATEBASIS
				    , T1.REPAYRATEBASIS
				    , T1.FINTYPE
				    , T1.FINREMARKS
				    , T1.FINCCY
				    , T1.SCHEDULEMETHOD
				    , T1.PROFITDAYSBASIS
				    , T1.REQMATURITY
				    , T1.CALTERMS
				    , T1.CALMATURITY
				    , T1.FIRSTREPAY
				    , T1.LASTREPAY
				    , T1.FINSTARTDATE
				    , T1.FINAMOUNT
					, ((T1.FINAMOUNT + T1.FEECHARGEAMT) - T1.DOWNPAYMENT) LOVDESCFINANCINGAMOUNT
				    , T1.FINREPAYMENTAMOUNT
				    , T1.CUSTID
				    , T1.DEFFERMENTS
				    , T1.PLANDEFERCOUNT
				    , T1.FINBRANCH
				    , T1.FINSOURCEID
				    , T1.ALLOWEDDEFRPYCHANGE
				    , T1.AVAILEDDEFRPYCHANGE
				    , T1.ALLOWEDDEFFRQCHANGE
				    , T1.AVAILEDDEFFRQCHANGE
				    , T1.RECALTYPE
				    , T1.FINASSETVALUE
				    , T1.FINISACTIVE
				    , T1.LIMITVALID
				    , T1.OVERRIDELIMIT
				    , T1.VERSION
				    , T1.LASTMNTBY
				    , T1.LASTMNTON
				    , T1.RECORDSTATUS
				    , T1.ROLECODE
				    , T1.NEXTROLECODE
				    , T1.TASKID
				    , T1.NEXTTASKID
				    , T1.RECORDTYPE
				    , T1.WORKFLOWID
				    , T7.FINTYPEDESC LOVDESCFINTYPENAME
				    , T7.FINMAXAMOUNT LOVDESCFINMAXAMT
				    , T7.FINMINAMOUNT LOVDESCFINMINAMOUNT
				    , T1.MINDOWNPAYPERC
				    , T7.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT
				    , T7.FINISDWPAYREQUIRED LOVDESCDWNPAYREQ
				    , T7.FINMAXDIFFERMENT LOVDESCFINMAXDIFFERMENT
				    , T12.BRANCHDESC LOVDESCFINBRANCHNAME
				    , T12.BRANCHPROVINCE FINBRANCHPROVINCECODE
				    , T1.LASTREPAYDATE
				    , T1.LASTREPAYPFTDATE
				    , T1.LASTREPAYRVWDATE
				    , T1.LASTREPAYCPZDATE
				    , T1.ALLOWGRCREPAY
				    , T1.GRCSCHDMTHD
				    , T1.GRCMARGIN
				    , T1.REPAYMARGIN
				    , T1.FINCURRASSETVALUE
				    , T1.FINCOMMITMENTREF
				    , T1.FINLIMITREF
				    , T1.FINCONTRACTDATE
				    , T17.ACRTILLLBD LOVDESCACCRUEDTILLLBD
				    , T7.FINRVWRATEAPPLFOR
				    , T1.TOTALREPAYAMT
				    , T1.CLOSINGSTATUS
				    , T1.FINAPPROVEDDATE
				    , T1.FEECHARGEAMT
				    , T1.BLACKLISTED
				    , T1.FINREPAYPFTONFRQ
				    , T1.ANUALIZEDPERCRATE
				    , T1.EFFECTIVERATEOFRETURN
				    , T1.MIGRATEDFINANCE
				    , T1.SCHEDULEMAINTAINED
				    , T1.SCHEDULEREGENERATED
				    , T1.FINPURPOSE
				    , T39.LOANPURPOSEDESC LOVDESCFINPURPOSENAME
				    , T1.FINSTATUS
				    , T1.FINSTSREASON
				    , T1.INITIATEUSER
				    , T7.FINSCHEDULEON LOVDESCFINSCHEDULEON
				    , T1.CUSTDSR
				    , T1.JOINTACCOUNT
				    , T1.JOINTCUSTID
				    , T1.DOWNPAYBANK
				    , T1.DOWNPAYSUPL
				    , T1.SECURITYCOLLATERAL
				    , T1.APPROVED
				    , T1.DISCREPANCY
				    , T1.LIMITAPPROVED
				    , T1.GRACETERMS
				    , T7.FINDIVISION LOVDESCFINDIVISION
				    , T1.RCDMAINTAINSTS
				    , T1.FINREPAYMETHOD
				    , T1.GRCPROFITDAYSBASIS
				    , T1.STEPFINANCE
				    , T1.STEPTYPE
				    , T1.STEPPOLICY
				    , T1.ALWMANUALSTEPS
				    , T1.NOOFSTEPS
				    , T1.LINKEDFINREF
				    , T1.NEXTUSERID
				    , T1.PRIORITY
				    , T24.POLICYDESC LOVDESCSTEPPOLICYNAME
				    , T1.GRCMINRATE
				    , T1.GRCMAXRATE
				    , T1.RPYMINRATE
				    , T1.RPYMAXRATE
				    , T1.DEVIATIONAPPROVAL
				    , T1.MANUALSCHEDULE
				    , T1.CREDITINSAMT
				    , T27.CUSTSTSDESCRIPTION
				    , T1.INITIATEDATE
				    , T1.FINPREAPPROVEDREF
				    , T1.ACCOUNTSOFFICER
				    , T28.DEALERNAME LOVDESCACCOUNTSOFFICER
				    , T28.DEALERCITY LOVDESCSOURCECITY
				    , T1.DSACODE
				    , T30.ROFFICERDESC DSACODEDESC
				    , T1.TDSAPPLICABLE
				    , T1.MANDATEID
				    , T1.SECURITYMANDATEID
				    , T1.DROPLINEFRQ
				    , T1.FIRSTDROPLINEDATE
				    , T1.PFTSERVICINGODLIMIT
				    , T1.ALWBPI
				    , T1.BPITREATMENT
				    , T1.PLANEMIHALW
				    , T1.PLANEMIHMETHOD
				    , T1.PLANEMIHMAXPERYEAR
				    , T1.PLANEMIHMAX
				    , T1.PLANEMIHLOCKPERIOD
				    , T1.PLANEMICPZ
				    , T1.CALROUNDINGMODE
				    , T1.ALWMULTIDISB
				    , T1.APPLICATIONNO
				    , T1.REFERRALID
				    , T33.ROFFICERDESC REFERRALIDDESC
				    , T1.DMACODE
				    , T34.ROFFICERDESC DMACODEDESC
				    , T1.SALESDEPARTMENT
				    , T35.DEPTDESC SALESDEPARTMENTDESC
				    , T1.QUICKDISB
				    , T1.WIFREFERENCE
				    , T1.UNPLANEMIHLOCKPERIOD
				    , T1.UNPLANEMICPZ
				    , T1.REAGECPZ
				    , T1.MAXUNPLANNEDEMI
				    , T1.MAXREAGEHOLIDAYS
				    , T1.AVAILEDUNPLANEMI
				    , T1.AVAILEDREAGEH
				    , T1.BPIAMOUNT
				    , T1.DEDUCTFEEDISB
				    , T1.RVWRATEAPPLFOR
				    , T1.SCHCALONRVW
				    , T1.PASTDUEPFTCALMTHD
				    , T1.PASTDUEPFTMARGIN
				    , T1.DROPPINGMETHOD
				    , T1.RATECHGANYDAY
				    , T1.PROMOTIONCODE
				    , T1.RESTRUCTURELOAN
				    , T1.OLDFINREFERENCE
				    , T1.REAGEBUCKET
				    , T1.FINCATEGORY
				    , T1.PRODUCTCATEGORY
				    , T1.ROUNDINGTARGET
				    , T36.ENTITYCODE LOVDESCENTITYCODE
				    , T1.ELIGIBILITYMETHOD
				    , T38.FIELDCODEVALUE LOVELIGIBILITYMETHOD
				    , T38.VALUEDESC LOVDESCELIGIBILITYMETHOD
				    , T1.EMPLOYEENAME
				    , T37.ROFFICERDESC EMPLOYEENAMEDESC
				    , T1.SAMPLINGREQUIRED
				    , T1.LEGALREQUIRED
				    , T1.GRCMAXAMOUNT
				    , T1.CONNECTOR
				    , T40.DEALERNAME CONNECTORCODE
				    , T40.DEALERCITY CONNECTORDESC
				    , T1.ADVANCEEMI
				    , T1.ADVEMITERMS
				    , T1.BPIPFTDAYSBASIS
				    , T1.FIXEDRATETENOR
				    , T1.FIXEDTENORRATE
				    , T12.BRANCHTEL FINBRANCHCONTACT
				    , T1.PROCESSATTRIBUTES
				    , T1.BUSINESSVERTICAL
				    , BV.CODE BUSINESSVERTICALCODE
				    , BV.DESCRIPTION BUSINESSVERTICALDESC
				    , T1.GRCADVTYPE
				    , T1.GRCADVTERMS
				    , T1.ADVTYPE
				    , T1.ADVTERMS
				    , T1.ADVSTAGE
				    , T1.TDSPERCENTAGE
				    , T1.TDSSTARTDATE
				    , T1.TDSENDDATE
				    , T1.TDSLIMITAMT
				    , T1.VANREQ
				    , T1.VANCODE
				    , T1.ALLOWDRAWINGPOWER
				    , T1.ALLOWREVOLVING
				    , T1.SANBSDSCHDLE
				    , T1.PROMOTIONSEQID
				    , T1.SVAMOUNT
				    , T1.CBAMOUNT
				    , T1.APPLIEDLOANAMT
				    , T1.FINISRATERVWATGRCEND
					, T1.REQLOANAMT
					, T1.REQLOANTENOR
					, T1.FINOCRREQUIRED
					, T1.OFFERPRODUCT
					, T1.OFFERAMOUNT
					, T1.CUSTSEGMENTATION
					, T1.BASEPRODUCT
					, T1.PROCESSTYPE
					, T1.BUREAUTIMESERIES
					, T1.CAMPAIGNNAME
					, T1.EXISTINGLANREFNO
					, T1.LEADSOURCE
					, T1.POSOURCE
					, T1.RSA
					, T1.VERIFICATION
					, T1.SOURCINGBRANCH
					, T1.SOURCHANNELCATEGORY
					, T1.ASMNAME
					, T13.BRANCHDESC LOVDESCSOURCINGBRANCH
					, T1.OFFERID
					, T1.ALWGRCADJ
					, T1.ENDGRCPERIODAFTRFULLDISB
					, T1.AUTOINCGRCENDDATE
					, T1.PMAY
					, T1.ALWLOANSPLIT
					, T1.PARENTREF
					, T1.LOANSPLITTED
					, T1.INSTBASEDSCHD
					, T1.PLANEMIHALWINGRACE
					, T1.ALLOWSUBVENTION
					, T1.TDSTYPE
					, T1.WRITEOFFLOAN
					, T1.RESTRUCTURE
					, T1.CALCOFSTEPS
					, T1.STEPSAPPLIEDFOR
					, T1.NOOFGRCSTEPS
					, T1.SCHDVERSION
					, T1.SUBVENTIONFROM
					, T1.MANUFACTURERDEALERID
					, T41.DEALERNAME MANUFACTURERDEALERNAME
					, T41.CODE MANUFACTURERDEALERCODE
					, T1.ESCROW
					, T1.CUSTBANKID
					, CB.ACCOUNTNUMBER CUSTACCTNUMBER
					, CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME
					, T1.MANUALSCHDTYPE
					, T1.ISRA
					, T1.SANCTIONEDDATE
					, T1.OVERDRAFTTXNCHRGREQ
					, T1.OVERDRAFTCALCCHRG
					, T1.OVERDRAFTCHRGAMTORPERC
					, T1.OVERDRAFTCHRCALON
					, T1.UNDERSETTLEMENT
					, T1.UNDERNPA
				FROM FINANCEMAIN T1
				JOIN RMTFINANCETYPES T7 ON T1.FINTYPE  = T7.FINTYPE 
				LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH  = T12.BRANCHCODE 
				LEFT JOIN RMTBRANCHES T13 ON T1.SOURCINGBRANCH = T13.BRANCHCODE
				LEFT JOIN FINPFTDETAILS T17 ON T17.FINID  = T1.FINID 
				LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY  = T24.POLICYCODE 
				LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS  = T27.CUSTSTSCODE 
				LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
				LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE  = T30.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID  = T33.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE  = T34.ROFFICERCODE 
				LEFT JOIN BMTDEPARTMENTS T35 ON T1.SALESDEPARTMENT  = T35.DEPTCODE 
				LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION  = T36.DIVISIONCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME  = T37.ROFFICERCODE 
				LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE  = 'ELGMETHOD' 
				LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE  = T39.LOANPURPOSECODE 
				LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
				LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
				LEFT JOIN AMTVEHICLEDEALER T41 ON T1.MANUFACTURERDEALERID = T41.DEALERID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				WHERE NOT EXISTS (SELECT 1 FROM FINANCEMAIN_TEMP WHERE FINANCEMAIN_TEMP.FINID = T1.FINID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#1469.20_post" author="NagaVamsi.P" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_view');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1469.21_pre" author="NagaVamsi.P" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemain_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1469.21" author="NagaVamsi.P">
		<createView viewName="FINANCEMAIN_TVIEW" replaceIfExists="true">
		    <![CDATA[
				SELECT T1.FINID
					, T1.FINREFERENCE
					, T1.INVESTMENTREF
					, T1.NUMBEROFTERMS
					, T1.GRCPERIODENDDATE
					, T1.ALLOWGRCPERIOD
					, T1.GRACEBASERATE
					, T1.GRACESPECIALRATE
					, T1.GRCPFTRATE
					, T1.GRCPFTFRQ
					, T1.NEXTGRCPFTDATE
					, T1.ALLOWGRCPFTRVW
					, T1.GRCPFTRVWFRQ
					, T1.NEXTGRCPFTRVWDATE
					, T1.ALLOWGRCCPZ
					, T1.GRCCPZFRQ
					, T1.NEXTGRCCPZDATE
					, T1.REPAYBASERATE
					, T1.REPAYSPECIALRATE
					, T1.REPAYPROFITRATE
					, T1.REPAYFRQ
					, T1.NEXTREPAYDATE
					, T1.REPAYPFTFRQ
					, T1.NEXTREPAYPFTDATE
					, T1.ALLOWREPAYRVW
					, T1.REPAYRVWFRQ
					, T1.NEXTREPAYRVWDATE
					, T1.ALLOWREPAYCPZ
					, T1.REPAYCPZFRQ
					, T1.NEXTREPAYCPZDATE
					, T1.MATURITYDATE
					, T1.CPZATGRACEEND
					, T1.DOWNPAYMENT
					, T1.GRACEFLATAMOUNT
					, T1.REQREPAYAMOUNT
					, T1.TOTALPROFIT
					, T1.TOTALCPZ
					, T1.TOTALGROSSPFT
					, T1.TOTALGROSSGRCPFT
					, T1.TOTALGRACEPFT
					, T1.TOTALGRACECPZ
					, T1.GRCRATEBASIS
					, T1.REPAYRATEBASIS
					, T1.FINTYPE
					, T1.FINREMARKS
					, T1.FINCCY
					, T1.SCHEDULEMETHOD
					, T1.PROFITDAYSBASIS
					, T1.REQMATURITY
					, T1.CALTERMS
					, T1.CALMATURITY
					, T1.FIRSTREPAY
					, T1.LASTREPAY
					, T1.FINSTARTDATE
					, T1.FINAMOUNT
					, T1.FINAMOUNT + T1.FEECHARGEAMT - T1.DOWNPAYMENT LOVDESCFINANCINGAMOUNT
					, T1.FINREPAYMENTAMOUNT
					, T1.CUSTID
					, T1.DEFFERMENTS
					, T1.PLANDEFERCOUNT
					, T1.FINBRANCH
					, T1.FINSOURCEID
					, T1.ALLOWEDDEFRPYCHANGE
					, T1.AVAILEDDEFRPYCHANGE
					, T1.ALLOWEDDEFFRQCHANGE
					, T1.AVAILEDDEFFRQCHANGE
					, T1.RECALTYPE
					, T1.FINASSETVALUE
					, T1.FINISACTIVE
					, T1.LIMITVALID
					, T1.OVERRIDELIMIT
					, T1.VERSION
					, T1.LASTMNTBY
					, T1.LASTMNTON
					, T1.RECORDSTATUS
					, T1.ROLECODE
					, T1.NEXTROLECODE
					, T1.TASKID
					, T1.NEXTTASKID
					, T1.RECORDTYPE
					, T1.WORKFLOWID
					, T7.FINTYPEDESC LOVDESCFINTYPENAME
					, T7.FINMAXAMOUNT LOVDESCFINMAXAMT
					, T7.FINMINAMOUNT LOVDESCFINMINAMOUNT
					, T1.MINDOWNPAYPERC
					, T7.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT
					, T7.FINISDWPAYREQUIRED LOVDESCDWNPAYREQ
					, T7.FINMAXDIFFERMENT LOVDESCFINMAXDIFFERMENT
					, T12.BRANCHDESC LOVDESCFINBRANCHNAME
					, T12.BRANCHPROVINCE FINBRANCHPROVINCECODE
					, T1.LASTREPAYDATE
					, T1.LASTREPAYPFTDATE
					, T1.LASTREPAYRVWDATE
					, T1.LASTREPAYCPZDATE
					, T1.ALLOWGRCREPAY
					, T1.GRCSCHDMTHD
					, T1.GRCMARGIN
					, T1.REPAYMARGIN
					, T1.FINCURRASSETVALUE
					, T1.FINCOMMITMENTREF
					, T1.FINLIMITREF
					, T1.FINCONTRACTDATE
					, T17.ACRTILLLBD LOVDESCACCRUEDTILLLBD
					, T7.FINRVWRATEAPPLFOR
					, T1.TOTALREPAYAMT
					, T1.CLOSINGSTATUS
					, T1.FINAPPROVEDDATE
					, T1.FEECHARGEAMT
					, T1.BLACKLISTED
					, T1.FINREPAYPFTONFRQ
					, T1.ANUALIZEDPERCRATE
					, T1.EFFECTIVERATEOFRETURN
					, T1.MIGRATEDFINANCE
					, T1.SCHEDULEMAINTAINED
					, T1.SCHEDULEREGENERATED
					, T1.FINPURPOSE
					, T39.LOANPURPOSEDESC LOVDESCFINPURPOSENAME
					, T1.FINSTATUS
					, T1.FINSTSREASON
					, T1.INITIATEUSER
					, T7.FINSCHEDULEON LOVDESCFINSCHEDULEON
					, T1.CUSTDSR
					, T1.JOINTACCOUNT
					, T1.JOINTCUSTID
					, T1.DOWNPAYBANK
					, T1.DOWNPAYSUPL
					, T1.SECURITYCOLLATERAL
					, T1.APPROVED
					, T1.DISCREPANCY
					, T1.LIMITAPPROVED
					, T1.GRACETERMS
					, T7.FINDIVISION LOVDESCFINDIVISION
					, T1.RCDMAINTAINSTS
					, T1.FINREPAYMETHOD
					, T1.GRCPROFITDAYSBASIS
					, T1.STEPFINANCE
					, T1.STEPTYPE
					, T1.STEPPOLICY
					, T1.ALWMANUALSTEPS
					, T1.NOOFSTEPS
					, T1.LINKEDFINREF
					, T1.NEXTUSERID
					, T1.PRIORITY
					, T24.POLICYDESC LOVDESCSTEPPOLICYNAME
					, T1.GRCMINRATE
					, T1.GRCMAXRATE
					, T1.RPYMINRATE
					, T1.RPYMAXRATE
					, T1.DEVIATIONAPPROVAL
					, T1.MANUALSCHEDULE
					, T1.CREDITINSAMT
					, T27.CUSTSTSDESCRIPTION
					, T1.INITIATEDATE
					, T1.FINPREAPPROVEDREF
					, T1.ACCOUNTSOFFICER
					, T28.DEALERNAME LOVDESCACCOUNTSOFFICER
					, T28.DEALERCITY LOVDESCSOURCECITY
					, T1.DSACODE
					, T30.ROFFICERDESC DSACODEDESC
					, T1.TDSAPPLICABLE
					, T1.MANDATEID
					, T1.SECURITYMANDATEID
					, T1.DROPLINEFRQ
					, T1.FIRSTDROPLINEDATE
					, T1.PFTSERVICINGODLIMIT
					, T1.ALWBPI
					, T1.BPITREATMENT
					, T1.PLANEMIHALW
					, T1.PLANEMIHMETHOD
					, T1.PLANEMIHMAXPERYEAR
					, T1.PLANEMIHMAX
					, T1.PLANEMIHLOCKPERIOD
					, T1.PLANEMICPZ
					, T1.CALROUNDINGMODE
					, T1.ALWMULTIDISB
					, T1.APPLICATIONNO
					, T1.REFERRALID
					, T33.ROFFICERDESC REFERRALIDDESC
					, T1.DMACODE
					, T34.ROFFICERDESC DMACODEDESC
					, T1.SALESDEPARTMENT
					, T35.DEPTDESC SALESDEPARTMENTDESC
					, T1.QUICKDISB
					, T1.WIFREFERENCE
					, T1.UNPLANEMIHLOCKPERIOD
					, T1.UNPLANEMICPZ
					, T1.REAGECPZ
					, T1.MAXUNPLANNEDEMI
					, T1.MAXREAGEHOLIDAYS
					, T1.AVAILEDUNPLANEMI
					, T1.AVAILEDREAGEH
					, T1.BPIAMOUNT
					, T1.DEDUCTFEEDISB
					, T1.RVWRATEAPPLFOR
					, T1.SCHCALONRVW
					, T1.PASTDUEPFTCALMTHD
					, T1.PASTDUEPFTMARGIN
					, T1.DROPPINGMETHOD
					, T1.RATECHGANYDAY
					, T1.PROMOTIONCODE
					, T1.RESTRUCTURELOAN
					, T1.OLDFINREFERENCE
					, T1.REAGEBUCKET
					, T1.FINCATEGORY
					, T1.PRODUCTCATEGORY
					, T1.ROUNDINGTARGET
					, T36.ENTITYCODE LOVDESCENTITYCODE
					, T1.ELIGIBILITYMETHOD
					, T38.FIELDCODEVALUE LOVELIGIBILITYMETHOD
					, T38.VALUEDESC LOVDESCELIGIBILITYMETHOD
					, T1.EMPLOYEENAME
					, T37.ROFFICERDESC EMPLOYEENAMEDESC
					, T1.SAMPLINGREQUIRED
					, T1.LEGALREQUIRED
					, T1.GRCMAXAMOUNT
					, T1.CONNECTOR
					, T40.DEALERNAME CONNECTORCODE
					, T40.DEALERCITY CONNECTORDESC
					, T1.ADVANCEEMI
					, T1.ADVEMITERMS
					, T1.BPIPFTDAYSBASIS
					, T1.FIXEDRATETENOR
					, T1.FIXEDTENORRATE
					, T12.BRANCHTEL FINBRANCHCONTACT
					, T1.PROCESSATTRIBUTES
					, T1.BUSINESSVERTICAL
					, BV.CODE BUSINESSVERTICALCODE
					, BV.DESCRIPTION BUSINESSVERTICALDESC
					, T1.GRCADVTYPE
					, T1.GRCADVTERMS
					, T1.ADVTYPE
					, T1.ADVTERMS
					, T1.ADVSTAGE
					, T1.TDSPERCENTAGE
					, T1.TDSSTARTDATE
					, T1.TDSENDDATE
					, T1.TDSLIMITAMT
					, T1.VANREQ
					, T1.VANCODE
					, T1.ALLOWDRAWINGPOWER
					, T1.ALLOWREVOLVING
					, T1.SANBSDSCHDLE
					, T1.PROMOTIONSEQID
					, T1.SVAMOUNT
					, T1.CBAMOUNT
					, T1.APPLIEDLOANAMT
					, T1.FINISRATERVWATGRCEND
					, T1.REQLOANAMT
					, T1.REQLOANTENOR
					, T1.FINOCRREQUIRED
					, T1.OFFERPRODUCT
					, T1.OFFERAMOUNT
					, T1.CUSTSEGMENTATION
					, T1.BASEPRODUCT
					, T1.PROCESSTYPE
					, T1.BUREAUTIMESERIES
					, T1.CAMPAIGNNAME
					, T1.EXISTINGLANREFNO
					, T1.LEADSOURCE
					, T1.POSOURCE
					, T1.RSA
					, T1.VERIFICATION
					, T1.SOURCINGBRANCH
					, T1.SOURCHANNELCATEGORY
					, T1.ASMNAME
					, T13.BRANCHDESC LOVDESCSOURCINGBRANCH
					, T1.OFFERID
					, T1.ENDGRCPERIODAFTRFULLDISB
					, T1.AUTOINCGRCENDDATE
					, T1.ALWGRCADJ
					, T1.PMAY
					, T1.ALWLOANSPLIT
					, T1.PARENTREF
					, T1.LOANSPLITTED
					, T1.INSTBASEDSCHD
					, T1.PLANEMIHALWINGRACE
					, T1.ALLOWSUBVENTION
					, T1.TDSTYPE
					, T1.WRITEOFFLOAN
					, T1.RESTRUCTURE
					, T1.CALCOFSTEPS
					, T1.STEPSAPPLIEDFOR
					, T1.NOOFGRCSTEPS
					, T1.SCHDVERSION
					, T1.SUBVENTIONFROM
					, T1.MANUFACTURERDEALERID
					, T41.DEALERNAME MANUFACTURERDEALERNAME
					, T41.CODE MANUFACTURERDEALERCODE
					, T1.ESCROW
					, T1.CUSTBANKID
					, CB.ACCOUNTNUMBER CUSTACCTNUMBER
					, CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME
					, T1.MANUALSCHDTYPE
					, T1.ISRA
					, T1.SANCTIONEDDATE
					, T1.OVERDRAFTTXNCHRGREQ
					, T1.OVERDRAFTCALCCHRG
					, T1.OVERDRAFTCHRGAMTORPERC
					, T1.OVERDRAFTCHRCALON
					, T1.UNDERSETTLEMENT
					, T1.UNDERNPA
				FROM FINANCEMAIN_TEMP T1
				JOIN RMTFINANCETYPES T7 ON T1.FINTYPE  = T7.FINTYPE 
				LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH  = T12.BRANCHCODE 
				LEFT JOIN RMTBRANCHES T13 ON T1.SOURCINGBRANCH = T13.BRANCHCODE
				LEFT JOIN FINPFTDETAILS T17 ON T17.FINID  = T1.FINID 
				LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY  = T24.POLICYCODE 
				LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS  = T27.CUSTSTSCODE 
				LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
				LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE  = T30.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID  = T33.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE  = T34.ROFFICERCODE 
				LEFT JOIN BMTDEPARTMENTS T35 ON T1.SALESDEPARTMENT  = T35.DEPTCODE 
				LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION  = T36.DIVISIONCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME  = T37.ROFFICERCODE 
				LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE  = 'ELGMETHOD' 
				LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE  = T39.LOANPURPOSECODE 
				LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
				LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
				LEFT JOIN AMTVEHICLEDEALER T41 ON T1.MANUFACTURERDEALERID = T41.DEALERID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#1469.21_post" author="NagaVamsi.P" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1472.7" author="Poojitha.M">
		<sql>
			<![CDATA[
				UPDATE ERRORDETAILS SET MESSAGE = 'Invalid Customer Phone Priority {0}.' WHERE CODE = '90115';
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1470.2_pre" author="saikrihna.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'bmtaeevents');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1470.1" author="saikrihna.b" dbms="oracle">
		<dropIndex tableName="BMTAEEVENTS" indexName="IX_BMTAEEVT_AEEVTCD" />
	</changeSet>

	<changeSet id="ST#1470.2.0" author="saikrihna.b">
		<dropPrimaryKey constraintName="PK_BMTAEEvents" tableName="BMTAEEVENTS" />
	</changeSet>

	<changeSet id="ST#1470.2" author="saikrihna.b">
		<modifyDataType tableName="BMTAEEVENTS" columnName="AEEVENTCODE" newDataType="varchar(10)" />
	</changeSet>

	<changeSet id="ST#1470.2.1" author="saikrihna.b" dbms="mssql,postgresql">
		<addNotNullConstraint tableName="BMTAEEVENTS" columnName="AEEventCode"
			columnDataType="varchar(10)" />
	</changeSet>

	<changeSet id="ST#1470.2.2" author="saikrihna.b">
		<addPrimaryKey tableName="BMTAEEVENTS" columnNames="AEEventCode" constraintName="PK_BMTAEEvents" />
	</changeSet>

	<changeSet id="ST#1470.3" author="saikrihna.b" dbms="postgresql">
		<sql>
			<![CDATA[
				create index IX_BMTAEEVT_AEEVTCD on BMTAEEVENTS(lower(aeeventcode));
   			 ]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1470.3" author="saikrihna.b" dbms="oracle">
		<sql>
			<![CDATA[
				create index IX_BMTAEEVT_AEEVTCD on BMTAEEVENTS(NLSSORT(aeeventcode,'nls_sort=''BINARY_CI'''));
		    ]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1470.3" author="saikrihna.b" dbms="mssql">
		<sql>
			<![CDATA[
				create nonclustered index  IX_BMTAEEVT_AEEVTCD on BMTAEEVENTS(aeeventcode);
		    ]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1470.2_post" author="saikrihna.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'feewaiverheader');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1470.5_pre" author="saikrihna.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'bmtaeevents_temp');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1470.4" author="saikrihna.b" dbms="oracle">
		<dropIndex tableName="BMTAEEVENTS_TEMP" indexName="IX_BMTAEEVT_T_AEEVTCD" />
	</changeSet>

	<changeSet id="ST#1470.5.0" author="saikrihna.b">
		<dropPrimaryKey constraintName="PK_BMTAEEVENTS_TEMP" tableName="BMTAEEVENTS_TEMP" />
	</changeSet>

	<changeSet id="ST#1470.5" author="saikrihna.b">
		<modifyDataType tableName="BMTAEEVENTS_TEMP" columnName="AEEVENTCODE" newDataType="varchar(10)" />
	</changeSet>

	<changeSet id="ST#1470.5.1" author="saikrihna.b" dbms="mssql,postgresql">
		<addNotNullConstraint tableName="BMTAEEVENTS_TEMP" columnName="AEEventCode"
			columnDataType="varchar(10)" />
	</changeSet>

	<changeSet id="ST#1470.5.2" author="saikrihna.b">
		<addPrimaryKey tableName="BMTAEEVENTS_TEMP" columnNames="AEEventCode"
			constraintName="PK_BMTAEEVENTS_TEMP" />
	</changeSet>

	<changeSet id="ST#1470.6" author="saikrihna.b" dbms="postgresql">
		<sql>
			<![CDATA[
				create index ix_bmtaeevt_t_aeevtcd on BMTAEEVENTS_TEMP(lower(aeeventcode));
   			 ]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1470.6" author="saikrihna.b" dbms="oracle">
		<sql>
			<![CDATA[
				create index ix_bmtaeevt_t_aeevtcd on BMTAEEVENTS_TEMP(NLSSORT(aeeventcode,'nls_sort=''BINARY_CI'''));
		    ]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1470.6" author="saikrihna.b" dbms="mssql">
		<sql>
			<![CDATA[
				create nonclustered index  ix_bmtaeevt_t_aeevtcd on BMTAEEVENTS_TEMP(aeeventcode);
		    ]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1470.5_post" author="saikrihna.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'bmtaeevents_temp');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1470.7" author="saikrihna.b">
		<sql>
			<![CDATA[
				INSERT INTO BMTAEEVENTS (AEEVENTCODE, AEEVENTCODEDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, ACTIVE) VALUES ('AMZ_S', 		'Accruals For Settlement', 				1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0, 1);
				INSERT INTO BMTAEEVENTS (AEEVENTCODE, AEEVENTCODEDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, ACTIVE) VALUES ('AMZ_N', 		'Accruals For NPA', 					1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0, 1);
				INSERT INTO BMTAEEVENTS (AEEVENTCODE, AEEVENTCODEDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, ACTIVE) VALUES ('AMZ_W', 		'Accruals For Write-Off', 				1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0, 1);

				INSERT INTO BMTAEEVENTS (AEEVENTCODE, AEEVENTCODEDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, ACTIVE) VALUES ('EARLYPAY_S', 	'Partial Payment For Settlement', 		1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0, 1);
				INSERT INTO BMTAEEVENTS (AEEVENTCODE, AEEVENTCODEDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, ACTIVE) VALUES ('EARLYPAY_N', 	'Partial Payment For NPA', 				1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0, 1);
				INSERT INTO BMTAEEVENTS (AEEVENTCODE, AEEVENTCODEDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, ACTIVE) VALUES ('EARLYPAY_W', 	'Partial Payment For Write-Off', 		1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0, 1);

				INSERT INTO BMTAEEVENTS (AEEVENTCODE, AEEVENTCODEDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, ACTIVE) VALUES ('EARLYSTL_S', 	'Early settlement For Settlement', 		1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0, 1);
				INSERT INTO BMTAEEVENTS (AEEVENTCODE, AEEVENTCODEDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, ACTIVE) VALUES ('EARLYSTL_N',	'Early settlement For NPA', 			1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0, 1);
				INSERT INTO BMTAEEVENTS (AEEVENTCODE, AEEVENTCODEDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, ACTIVE) VALUES ('EARLYSTL_W', 	'Early settlement For Write-Off', 		1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0, 1);

				INSERT INTO BMTAEEVENTS (AEEVENTCODE, AEEVENTCODEDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, ACTIVE) VALUES ('EMIDAY_S', 	'EMI Holiday For Settlement', 			1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0, 1);
				INSERT INTO BMTAEEVENTS (AEEVENTCODE, AEEVENTCODEDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, ACTIVE) VALUES ('EMIDAY_N', 	'EMI Holiday For NPA', 					1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0, 1);
				INSERT INTO BMTAEEVENTS (AEEVENTCODE, AEEVENTCODEDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, ACTIVE) VALUES ('EMIDAY_W', 	'EMI Holiday For Write-Off', 			1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0, 1);

				INSERT INTO BMTAEEVENTS (AEEVENTCODE, AEEVENTCODEDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, ACTIVE) VALUES ('INSTDATE_S', 	'Installment Date For Settlement', 		1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0, 1);
				INSERT INTO BMTAEEVENTS (AEEVENTCODE, AEEVENTCODEDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, ACTIVE) VALUES ('INSTDATE_N', 	'Installment Date For NPA', 			1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0, 1);
				INSERT INTO BMTAEEVENTS (AEEVENTCODE, AEEVENTCODEDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, ACTIVE) VALUES ('INSTDATE_W', 	'Installment Date For Write-Off', 		1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0, 1);

				INSERT INTO BMTAEEVENTS (AEEVENTCODE, AEEVENTCODEDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, ACTIVE) VALUES ('LATEPAY_S', 	'Overdue Payment For Settlement', 		1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0, 1);
				INSERT INTO BMTAEEVENTS (AEEVENTCODE, AEEVENTCODEDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, ACTIVE) VALUES ('LATEPAY_N', 	'Overdue Payment For NPA', 				1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0, 1);
				INSERT INTO BMTAEEVENTS (AEEVENTCODE, AEEVENTCODEDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, ACTIVE) VALUES ('LATEPAY_W', 	'Overdue Payment For Write-Off', 		1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0, 1);

				INSERT INTO BMTAEEVENTS (AEEVENTCODE, AEEVENTCODEDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, ACTIVE) VALUES ('REPAY_S', 		'Installment Repayment For Settlement', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0, 1);
				INSERT INTO BMTAEEVENTS (AEEVENTCODE, AEEVENTCODEDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, ACTIVE) VALUES ('REPAY_N', 		'Installment Repayment For NPA', 		1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0, 1);
				INSERT INTO BMTAEEVENTS (AEEVENTCODE, AEEVENTCODEDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, ACTIVE) VALUES ('REPAY_W', 		'Installment Repayment For Write-Off', 	1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0, 1);
				
				INSERT INTO BMTAEEVENTS (AEEVENTCODE, AEEVENTCODEDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, ACTIVE) VALUES ('WRITEOFF_S', 	'Write off For Settlement', 			1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0, 1);
				INSERT INTO BMTAEEVENTS (AEEVENTCODE, AEEVENTCODEDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, ACTIVE) VALUES ('WRITEOFF_N', 	'Write off For NPA', 					1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0, 1);
			
				INSERT INTO BMTAEEVENTS (AEEVENTCODE, AEEVENTCODEDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, ACTIVE) VALUES ('NPACHNG_S',  	'NPA For Settlement', 					1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0, 1);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1470.8_pre" author="saikrihna.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'categorywiseevents');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1470.8.0" author="saikrihna.b">
		<dropPrimaryKey constraintName="PK_CATEGORYWISEEVENTS" tableName="CATEGORYWISEEVENTS" />
	</changeSet>

	<changeSet id="ST#1470.8" author="saikrihna.b">
		<modifyDataType tableName="CATEGORYWISEEVENTS" columnName="AEEVENTCODE" newDataType="varchar(10)" />
	</changeSet>

	<changeSet id="ST#1470.8.1" author="saikrihna.b" dbms="mssql,postgresql">
		<addNotNullConstraint tableName="CATEGORYWISEEVENTS" columnName="AEEventCode"
			columnDataType="varchar(10)" />
	</changeSet>

	<changeSet id="ST#1470.8.2" author="saikrihna.b">
		<addPrimaryKey tableName="CATEGORYWISEEVENTS" columnNames="AEEventCode,CategoryCode"
			constraintName="PK_CATEGORYWISEEVENTS" />
	</changeSet>

	<changeSet id="ST#1470.8_post" author="saikrihna.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'categorywiseevents');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1470.9_pre" author="saikrihna.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmtaccountingset');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1470.9" author="saikrihna.b">
		<modifyDataType tableName="RMTACCOUNTINGSET" columnName="EVENTCODE" newDataType="varchar(10)" />
	</changeSet>

	<changeSet id="ST#1470.9_post" author="saikrihna.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rmtaccountingset');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1470.10_pre" author="saikrihna.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmtaccountingset_temp');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1470.10" author="saikrihna.b">
		<modifyDataType tableName="RMTACCOUNTINGSET_TEMP" columnName="EVENTCODE" newDataType="varchar(10)" />
	</changeSet>

	<changeSet id="ST#1470.10_post" author="saikrihna.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rmtaccountingset_temp');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1470.13_pre" author="saikrihna.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'fintypeaccounting');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1470.11" author="saikrihna.b" dbms="oracle">
		<dropIndex tableName="FINTYPEACCOUNTING" indexName="IX_FINTYPACCG_TYP_EVT" />
	</changeSet>

	<changeSet id="ST#1470.12" author="saikrihna.b">
		<dropIndex tableName="FINTYPEACCOUNTING" indexName="IX_FINTYPACCG_TYP_EVT_MDID" />
	</changeSet>

	<changeSet id="ST#1470.13.0" author="saikrihna.b">
		<dropPrimaryKey constraintName="PK_FINTYPEACCOUNTING" tableName="FINTYPEACCOUNTING" />
	</changeSet>

	<changeSet id="ST#1470.13" author="saikrihna.b">
		<modifyDataType tableName="FINTYPEACCOUNTING" columnName="EVENT" newDataType="varchar(10)" />
	</changeSet>

	<changeSet id="ST#1470.13.1" author="saikrihna.b" dbms="mssql,postgresql">
		<addNotNullConstraint tableName="FINTYPEACCOUNTING" columnName="EVENT"
			columnDataType="varchar(10)" />
	</changeSet>

	<changeSet id="ST#1470.13.2" author="saikrihna.b">
		<addPrimaryKey tableName="FINTYPEACCOUNTING" columnNames="FinType, Event, ModuleId"
			constraintName="PK_FINTYPEACCOUNTING" />
	</changeSet>

	<changeSet id="ST#1470.14" author="saikrihna.b" dbms="postgresql">
		<sql>
			<![CDATA[
				create index IX_FINTYPACCG_TYP_EVT on FINTYPEACCOUNTING(lower(event));
				create index ix_fintypaccg_typ_evt_mdid on FINTYPEACCOUNTING(lower(event),MODULEID);
   			 ]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1470.14" author="saikrihna.b" dbms="oracle">
		<sql>
			<![CDATA[
				CREATE INDEX IX_FINTYPACCG_TYP_EVT ON FINTYPEACCOUNTING  (NLSSORT(EVENT,'nls_sort=''BINARY_CI'''));
				CREATE INDEX IX_FINTYPACCG_TYP_EVT_MDID ON FINTYPEACCOUNTING ( NLSSORT(EVENT,'nls_sort=''BINARY_CI'''), MODULEID) ;
 
		    ]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1470.14" author="saikrihna.b" dbms="mssql">
		<sql>
			<![CDATA[
				create nonclustered index  IX_FINTYPACCG_TYP_EVT on FINTYPEACCOUNTING(event);
				create nonclustered index  ix_fintypaccg_typ_evt_mdid on FINTYPEACCOUNTING(event,MODULEID);
		    ]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1470.13_post" author="saikrihna.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'fintypeaccounting');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1470.18_pre" author="saikrihna.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'fintypeaccounting_temp');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1470.16" author="saikrihna.b" dbms="oracle">
		<dropIndex tableName="FINTYPEACCOUNTING_TEMP" indexName="IX_FINTYPACCG_T_TYP_EVT" />
	</changeSet>

	<changeSet id="ST#1470.17" author="saikrihna.b">
		<dropPrimaryKey constraintName="PK_FINTYPEACCOUNTING_TEMP" tableName="FINTYPEACCOUNTING_TEMP" />
	</changeSet>

	<changeSet id="ST#1470.18" author="saikrihna.b">
		<modifyDataType tableName="FINTYPEACCOUNTING_TEMP" columnName="EVENT" newDataType="varchar(10)" />
	</changeSet>

	<changeSet id="ST#1470.18.1" author="saikrihna.b" dbms="mssql,postgresql">
		<addNotNullConstraint tableName="FINTYPEACCOUNTING_TEMP" columnName="EVENT"
			columnDataType="varchar(10)" />
	</changeSet>

	<changeSet id="ST#1470.19" author="saikrihna.b">
		<addPrimaryKey tableName="FINTYPEACCOUNTING_TEMP" columnNames="FINTYPE, EVENT, MODULEID"
			constraintName="PK_FINTYPEACCOUNTING_TEMP" />
	</changeSet>

	<changeSet id="ST#1470.20" author="saikrihna.b" dbms="postgresql">
		<sql>
			<![CDATA[
				create index ix_fintypaccg_t_typ_evt on fintypeaccounting_temp(lower(event));
   			 ]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1470.20" author="saikrihna.b" dbms="oracle">
		<sql>
			<![CDATA[
				create index ix_fintypaccg_t_typ_evt on fintypeaccounting_temp(NLSSORT(event,'nls_sort=''BINARY_CI'''));
		    ]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1470.20" author="saikrihna.b" dbms="mssql">
		<sql>
			<![CDATA[
				create nonclustered index  ix_fintypaccg_t_typ_evt on fintypeaccounting_temp(event);
		    ]]>
		</sql>
	</changeSet>


	<changeSet id="ST#1470.18_post" author="saikrihna.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'fintypeaccounting_temp');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#840.1" author="sainaveen.y">
		<createTable tableName="HOST_GL_UPLOAD">
			<column name="Id" type="bigint" autoIncrement="true">
				<constraints nullable="false" />
			</column>
			<column name="HeaderID" type="bigint" />
			<column name="RecordSeq" type="bigint" />
			<column name="HostGLCode" type="varchar(20)" />
			<column name="AccountType" type="varchar(15)" />
			<column name="LoanType" type="varchar(8)" />
			<column name="CostCentreCode" type="varchar(20)" />
			<column name="ProfitCentreCode" type="varchar(20)" />
			<column name="OpenedDate" type="datetime" />
			<column name="AllowManualEntries" type="char(1)" />
			<column name="GLDescription" type="varchar(50)" />
			<column name="Progress" type="int" />
			<column name="Status" type="char(1)" />
			<column name="ErrorCode" type="varchar(20)" />
			<column name="ErrorDesc" type="varchar(2000)" />
		</createTable>
	</changeSet>

	<changeSet id="ST#840.2" author="sainaveen.y">
		<addPrimaryKey constraintName="PK_HOST_GL_UPLOAD_ID" tableName="HOST_GL_UPLOAD" columnNames="id" />
	</changeSet>

	<changeSet id="ST#840.4.1" author="sainaveen.y">
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='HOST_GL_TEMPLATE');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='HOST_GL_TEMPLATE');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='HOST_GL_TEMPLATE';
 				
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOST_GL_TEMPLATE'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOST_GL_TEMPLATE');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOST_GL_TEMPLATE';

				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'HOST_GL_TEMPLATE', 'Host GL Template Download', 3, 'HOSTGL', NULL, NULL, ',' , 0, 0, NULL, 'ROW:{Host GL Code, Account Type, Loan Type, Cost Centre, Profit Centre, Opened Date, Allow Manual Entries, GL Description}',  '', 'A', '/opt/PFF/BASE/hdfc/HostGL/template', 'HostGL_', '.xlsx', 0, current_timestamp, '${ddMMYYYYHms}', NULL, 0, NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOST_GL_TEMPLATE'), 'HOST_GL_UPLOAD',  0, 'ID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 8, 0, 0);
								
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'HOST_GL_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOST_GL_TEMPLATE')),  'ID',  				    1, 'N', NULL, NULL, NULL, NULL, '0',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'HOST_GL_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOST_GL_TEMPLATE')),  'HEADERID',     		    0, 'N', NULL, NULL, '${HEADER_ID}',   NULL, '0', NULL, NULL, NULL, NULL, 'M');								
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'HOST_GL_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOST_GL_TEMPLATE')),  'HOSTGLCODE',      		0, 'N', NULL, NULL, NULL, NULL, '0',  NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'HOST_GL_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOST_GL_TEMPLATE')),  'ACCOUNTTYPE',             0, 'N', NULL, NULL, NULL, NULL, '1',  NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'HOST_GL_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOST_GL_TEMPLATE')),  'LOANTYPE',      		    0, 'N', NULL, NULL, NULL, NULL, '2',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'HOST_GL_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOST_GL_TEMPLATE')),  'COSTCENTRECODE',      	0, 'N', NULL, NULL, NULL, NULL, '3',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'HOST_GL_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOST_GL_TEMPLATE')),  'PROFITCENTRECODE',       	0, 'N', NULL, NULL, NULL, NULL, '4',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'HOST_GL_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOST_GL_TEMPLATE')),  'OPENEDDATE',      		0, 'N', NULL, NULL, NULL, NULL, '5',  NULL, NULL, NULL, 'dd-MMM-yyyy', 'M');
			    INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'HOST_GL_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOST_GL_TEMPLATE')),  'ALLOWMANUALENTRIES',      0, 'N', NULL, NULL, NULL, NULL, '6',  NULL, NULL, NULL, NULL, 'M');
			    INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'HOST_GL_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOST_GL_TEMPLATE')),  'GLDESCRIPTION',           0, 'N', NULL, NULL, NULL, NULL, '7',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'HOST_GL_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOST_GL_TEMPLATE')),  'STATUS',                  0, 'N', NULL, 'S', NULL, NULL,  '8',  NULL, NULL, NULL, NULL, 'O');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#840.5" author="sainaveen.y">
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='HOST_GL_DOWNLOAD');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='HOST_GL_DOWNLOAD');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='HOST_GL_DOWNLOAD';
 				
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOST_GL_DOWNLOAD'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOST_GL_DOWNLOAD');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOST_GL_DOWNLOAD';

				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'HOST_GL_DOWNLOAD', 'Host GL  Download', 3, 'HOSTGL', NULL, NULL, ',' , 0, 0, NULL, 'ROW:{Host GL Code,Account Type,Loan Type,Cost Centre,Profit Centre,Opened Date,Allow Manual Entries,GL Description, Upload Status, ErrorCode, ErrorDesc, Created On, Created By, Approved On, Approved By}',  '', 'A', '/opt/PFF/BASE/hdfc/HostGL/download', 'HostGL_', '.xlsx', 0, current_timestamp, '${ddMMYYYYHms}', NULL, 0, NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOST_GL_DOWNLOAD'), 'HOST_GL_UPLOAD',  0, 'ID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 15, 0, 0);
								
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'HOST_GL_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOST_GL_DOWNLOAD')),  'HOSTGLCODE',      		0, 'N', NULL, NULL, NULL, NULL, '0',  NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'HOST_GL_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOST_GL_DOWNLOAD')),  'ACCOUNTTYPE',             0, 'N', NULL, NULL, NULL, NULL, '1',  NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'HOST_GL_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOST_GL_DOWNLOAD')),  'LOANTYPE',      		    0, 'N', NULL, NULL, NULL, NULL, '2',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'HOST_GL_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOST_GL_DOWNLOAD')),  'COSTCENTRECODE',      	0, 'N', NULL, NULL, NULL, NULL, '3',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'HOST_GL_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOST_GL_DOWNLOAD')),  'PROFITCENTRECODE',       	0, 'N', NULL, NULL, NULL, NULL, '4',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'HOST_GL_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOST_GL_DOWNLOAD')),  'OPENEDDATE',      	    0, 'N', NULL, NULL, NULL, NULL, '5',  NULL, NULL, NULL, 'dd-MMM-yyyy', 'M');
			    INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'HOST_GL_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOST_GL_DOWNLOAD')),  'ALLOWMANUALENTRIES',      0, 'N', NULL, NULL, NULL, NULL, '6',  NULL, NULL, NULL, NULL, 'M');
			    INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'HOST_GL_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOST_GL_DOWNLOAD')),  'GLDESCRIPTION',           0, 'N', NULL, NULL, NULL, NULL, '7',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'HOST_GL_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOST_GL_DOWNLOAD')),  'STATUS',                  0, 'N', NULL, NULL, NULL, NULL,  '8',  NULL, NULL, NULL, NULL, 'O');
			    INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'HOST_GL_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOST_GL_DOWNLOAD')),  'ERRORCODE',	            0, 'N', NULL, NULL, NULL, NULL, '9', NULL, NULL, NULL,  NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'HOST_GL_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOST_GL_DOWNLOAD')),  'ERRORDESC',	            0, 'N', NULL, NULL, NULL, NULL, '10', NULL, NULL, NULL,  NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'HOST_GL_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOST_GL_DOWNLOAD')),  'CREATEDON',	            0, 'N', NULL, NULL, NULL, NULL, '11', NULL, NULL, NULL,  'dd-MMM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'HOST_GL_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOST_GL_DOWNLOAD')),  'CREATEDNAME',	            0, 'N', NULL, NULL, NULL, NULL, '12', NULL, NULL, NULL,  NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'HOST_GL_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOST_GL_DOWNLOAD')),  'APPROVEDON',	            0, 'N', NULL, NULL, NULL, NULL, '13', NULL, NULL, NULL,  'dd-MMM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'HOST_GL_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOST_GL_DOWNLOAD')),  'APPROVEDNAME',	        0, 'N', NULL, NULL, NULL, NULL, '14', NULL, NULL, NULL,  NULL, 'O');
		 	]]>
		</sql>
	</changeSet>

	<changeSet id="ST#840.6" author="sainaveen.y">
		<sql>
			<![CDATA[
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'HOST_GL_UPLOAD_MAKER');
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'HOST_GL_UPLOAD_APPROVER');
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'HOST_GL_UPLOAD_VIEW');

				DELETE FROM SECROLES WHERE ROLECD ='HOST_GL_UPLOAD_MAKER';
				DELETE FROM SECROLES WHERE ROLECD ='HOST_GL_UPLOAD_APPROVER';
				DELETE FROM SECROLES WHERE ROLECD ='HOST_GL_UPLOAD_VIEW';

				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'HOST_GL_UPLOAD_MAKER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'HOST_GL_UPLOAD_APPROVER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'HOST_GL_UPLOAD_VIEW');

				DELETE FROM SECGROUPS WHERE GRPCODE ='HOST_GL_UPLOAD_MAKER';
				DELETE FROM SECGROUPS WHERE GRPCODE ='HOST_GL_UPLOAD_APPROVER';
				DELETE FROM SECGROUPS WHERE GRPCODE ='HOST_GL_UPLOAD_VIEW';

				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='menu_Item_BulkHostGLUpload_Maker';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='menu_Item_BulkHostGLUpload_Approver';

				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_BulkHostGLUpload_Maker', 	'MENU', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_BulkHostGLUpload_Approver',  'MENU',  1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SECGROUPS (GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'HOST_GL_UPLOAD_MAKER', 		'WF Maker for Host GL Upload', 		0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPS (GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'HOST_GL_UPLOAD_APPROVER', 	'WF Approver for Host GL Upload', 	0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPS (GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'HOST_GL_UPLOAD_VIEW', 		'WF View for Host GL Upload', 		0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);

				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'HOST_GL_UPLOAD_MAKER'),    (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_BulkHostGLUpload_Maker'), 		1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'HOST_GL_UPLOAD_APPROVER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_BulkHostGLUpload_Approver'), 	1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'HOST_GL_UPLOAD_VIEW'),     (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_BulkHostGLUpload_Maker'), 		1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'HOST_GL_UPLOAD_VIEW'), 	 (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_BulkHostGLUpload_Approver'), 	1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);

				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'HOST_GL_UPLOAD_MAKER', 	'Maker role from Host GL Upload', 		'', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0); 
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'HOST_GL_UPLOAD_APPROVER',  'Approver role from Host GL Upload',	'', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'HOST_GL_UPLOAD_VIEW', 		'View role from Host GL Upload',		'', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);

				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'HOST_GL_UPLOAD_MAKER'),    (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'HOST_GL_UPLOAD_MAKER'),    0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'HOST_GL_UPLOAD_APPROVER'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'HOST_GL_UPLOAD_APPROVER'), 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'HOST_GL_UPLOAD_VIEW'), 	(SELECT ROLEID FROM SECROLES WHERE ROLECD = 'HOST_GL_UPLOAD_VIEW'), 	0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#840.7" author="sainaveen.y">
		<addColumn tableName="AccountMapping">
			<column name="GLDescription" type="varchar(50)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#840.8" author="sainaveen.y">
		<addColumn tableName="AccountMapping_Temp">
			<column name="GLDescription" type="varchar(50)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#840.12" author="sainaveen.y">
		<addColumn tableName="AccountMapping">
			<column name="AccountTypeGroup" type="varchar(50)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#840.13" author="sainaveen.y">
		<addColumn tableName="AccountMapping_Temp">
			<column name="AccountTypeGroup" type="varchar(50)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#840.9.1_pre" author="sainaveen.y" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'accountmapping_view');
 			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#840.9.1" author="sainaveen.y">
		<createView replaceIfExists="true" viewName="ACCOUNTMAPPING_VIEW">
			<![CDATA[
				SELECT AM.ACCOUNT
					, AM.HOSTACCOUNT
					, AM.PROFITCENTERID
					, AM.COSTCENTERID
					, AM.FINTYPE
					, AM.ACCOUNTTYPE 
                    , PC.PROFITCENTERCODE
                    , PC.PROFITCENTERDESC	
                    , CC.COSTCENTERCODE	
                    , CC.COSTCENTERDESC	
                    , RAT.ACTYPEDESC ACCOUNTTYPEDESC	
                    , RFT.FINTYPEDESC
                    , AM.OPENEDDATE
                    , AM.CLOSEDDATE					
					, AM.STATUS 
					, AM.ALLOWEDMANUALENTRY
					, AM.VERSION
					, AM.CREATEDBY
					, AM.CREATEDON                                                                           
					, AM.APPROVEDBY
					, AM.APPROVEDON 
					, AM.LASTMNTBY 
					, AM.LASTMNTON 
					, AM.RECORDSTATUS 
					, AM.ROLECODE 
					, AM.NEXTROLECODE 
					, AM.TASKID 
					, AM.NEXTTASKID 
					, AM.RECORDTYPE 
					, AM.WORKFLOWID
					, AM.GLDESCRIPTION
					, AM.ACCOUNTTYPEGROUP
				FROM ACCOUNTMAPPING_TEMP AM
				LEFT JOIN PROFITCENTERS PC ON PC.PROFITCENTERID = AM.PROFITCENTERID
				LEFT JOIN COSTCENTERS CC ON CC.COSTCENTERID = AM.COSTCENTERID
				LEFT JOIN RMTACCOUNTTYPES RAT ON RAT.ACTYPE = AM.ACCOUNTTYPE
				LEFT JOIN RMTFINANCETYPES RFT ON RFT.FINTYPE = AM.FINTYPE
				UNION ALL
				SELECT AM.ACCOUNT
					, AM.HOSTACCOUNT
					, AM.PROFITCENTERID
					, AM.COSTCENTERID
					, AM.FINTYPE
					, AM.ACCOUNTTYPE 
                    , PC.PROFITCENTERCODE
                    , PC.PROFITCENTERDESC	
                    , CC.COSTCENTERCODE	
                    , CC.COSTCENTERDESC	
                    , RAT.ACTYPEDESC ACCOUNTTYPEDESC	
                    , RFT.FINTYPEDESC
                    , AM.OPENEDDATE
                    , AM.CLOSEDDATE					
					, AM.STATUS 
					, AM.ALLOWEDMANUALENTRY
					, AM.VERSION
					, AM.CREATEDBY
					, AM.CREATEDON                                                                           
					, AM.APPROVEDBY
					, AM.APPROVEDON 
					, AM.LASTMNTBY 
					, AM.LASTMNTON 
					, AM.RECORDSTATUS 
					, AM.ROLECODE 
					, AM.NEXTROLECODE 
					, AM.TASKID 
					, AM.NEXTTASKID 
					, AM.RECORDTYPE 
					, AM.WORKFLOWID
					, AM.GLDESCRIPTION
					, AM.ACCOUNTTYPEGROUP
				FROM ACCOUNTMAPPING AM
				LEFT JOIN PROFITCENTERS PC ON PC.PROFITCENTERID = AM.PROFITCENTERID   
				LEFT JOIN COSTCENTERS CC ON CC.COSTCENTERID = AM.COSTCENTERID 
				LEFT JOIN RMTACCOUNTTYPES RAT ON RAT.ACTYPE = AM.ACCOUNTTYPE  
				LEFT JOIN RMTFINANCETYPES RFT ON RFT.FINTYPE = AM.FINTYPE
        	 	WHERE NOT EXISTS (SELECT 1 FROM ACCOUNTMAPPING_TEMP WHERE ACCOUNT = AM.ACCOUNT)
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#840.9.1_post" author="sainaveen.y" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'accountmapping_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#840.10.1_pre" author="sainaveen.y" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'accountmapping_aview');
			 ]]>
		</sql>
	</changeSet>

	<changeSet id="ST#840.10.1" author="sainaveen.y">
		<createView replaceIfExists="true" viewName="ACCOUNTMAPPING_AVIEW">
			<![CDATA[
				SELECT AM.ACCOUNT
					, AM.HOSTACCOUNT
					, AM.PROFITCENTERID
					, AM.COSTCENTERID
					, AM.FINTYPE
					, AM.ACCOUNTTYPE 
                    , PC.PROFITCENTERCODE
                    , PC.PROFITCENTERDESC	
                    , CC.COSTCENTERCODE	
                    , CC.COSTCENTERDESC	
                    , RAT.ACTYPEDESC ACCOUNTTYPEDESC	
                    , RFT.FINTYPEDESC
                    , AM.OPENEDDATE
                    , AM.CLOSEDDATE					
					, AM.STATUS 
					, AM.ALLOWEDMANUALENTRY
					, AM.VERSION
					, AM.CREATEDBY
					, AM.CREATEDON                                                                           
					, AM.APPROVEDBY
					, AM.APPROVEDON 
					, AM.LASTMNTBY 
					, AM.LASTMNTON 
					, AM.RECORDSTATUS 
					, AM.ROLECODE 
					, AM.NEXTROLECODE 
					, AM.TASKID 
					, AM.NEXTTASKID 
					, AM.RECORDTYPE 
					, AM.WORKFLOWID
					, AM.GLDESCRIPTION
					, AM.ACCOUNTTYPEGROUP
				FROM ACCOUNTMAPPING AM   
				LEFT JOIN PROFITCENTERS PC ON  PC.PROFITCENTERID = AM.PROFITCENTERID   
				LEFT JOIN COSTCENTERS CC ON  CC.COSTCENTERID = AM.COSTCENTERID 
				LEFT JOIN RMTACCOUNTTYPES RAT ON  RAT.ACTYPE = AM.ACCOUNTTYPE  
				LEFT JOIN RMTFINANCETYPES RFT ON RFT.FINTYPE = AM.FINTYPE
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#840.10.1_post" author="sainaveen.y" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'accountmapping_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#840.11.1" author="sainaveen.y">
		<sql>
			<![CDATA[
			    DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'AccountMappingDialog_GLDescription');
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'AccountMappingDialog_GLDescription';
			    DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'AccountMappingDialog_AccountTypeGroup');
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'AccountMappingDialog_AccountTypeGroup';
				
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'AccountMappingDialog_GLDescription', 'AccountMappingDialog', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'ACCOUNTMAPPING_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'AccountMappingDialog_GLDescription'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'AccountMappingDialog_AccountTypeGroup', 'AccountMappingDialog', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'ACCOUNTMAPPING_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'AccountMappingDialog_AccountTypeGroup'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
			]]>
		</sql>
	</changeSet>



	<changeSet id="ST#1469.21.1" author="NagaVamsi.P">
		<addColumn tableName="NPA_PROVISION_STAGE">
			<column name="CustCoreBank" type="varchar(50)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1469.21.2" author="NagaVamsi.P">
		<sql>
			<![CDATA[	
				UPDATE NPA_PROVISION_STAGE SET CustCoreBank = (SELECT C.CUSTCOREBANK FROM CUSTOMERS C WHERE NPA_PROVISION_STAGE.CUSTID = C.CUSTID); 
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1469.21.3" author="NagaVamsi.P">
		<addNotNullConstraint tableName="NPA_PROVISION_STAGE" columnName="CustCoreBank"
			columnDataType="varchar(50)" />
	</changeSet>

	<changeSet id="ST#1469.22" author="NagaVamsi.P">
		<addColumn tableName="NPA_LOAN_INFO">
			<column name="CustCoreBank" type="varchar(50)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1469.22.1" author="NagaVamsi.P">
		<sql>
			<![CDATA[	
				UPDATE NPA_LOAN_INFO SET CUSTCOREBANK = (SELECT C.CUSTCOREBANK FROM CUSTOMERS C WHERE NPA_LOAN_INFO.CUSTID = C.CUSTID); 
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1469.22.2" author="NagaVamsi.P">
		<addNotNullConstraint tableName="NPA_LOAN_INFO" columnName="CustCoreBank"
			columnDataType="varchar(50)" />
	</changeSet>

	<changeSet id="ST#1469.23.1" author="NagaVamsi.P">
		<addColumn tableName="NPA_LOAN_INFO">
			<column name="FinType" type="varchar(8)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1469.23.2" author="NagaVamsi.P">
		<sql>
			<![CDATA[	
				UPDATE NPA_LOAN_INFO SET FINTYPE = (SELECT FM.FINTYPE FROM FINANCEMAIN FM WHERE NPA_LOAN_INFO.FINREFERENCE = FM.FINREFERENCE); 
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1469.23.3" author="NagaVamsi.P">
		<addNotNullConstraint tableName="NPA_LOAN_INFO" columnName="FinType" columnDataType="varchar(8)" />
	</changeSet>

	<changeSet id="ST#1469.23.4" author="NagaVamsi.P">
		<addColumn tableName="NPA_LOAN_INFO_SNAPSHOT">
			<column name="CustCoreBank" type="varchar(50)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1469.23.5" author="NagaVamsi.P">
		<sql>
			<![CDATA[	
				UPDATE NPA_LOAN_INFO_SNAPSHOT SET CUSTCOREBANK = (SELECT C.CUSTCOREBANK FROM CUSTOMERS C WHERE NPA_LOAN_INFO_SNAPSHOT.CUSTID = C.CUSTID); 
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1469.23.6" author="NagaVamsi.P">
		<addNotNullConstraint tableName="NPA_LOAN_INFO_SNAPSHOT" columnName="CustCoreBank"
			columnDataType="varchar(50)" />
	</changeSet>

	<changeSet id="ST#1469.23.7" author="NagaVamsi.P">
		<addColumn tableName="NPA_LOAN_INFO_SNAPSHOT">
			<column name="FinType" type="varchar(8)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1469.23.8" author="NagaVamsi.P">
		<sql>
			<![CDATA[	
				UPDATE NPA_LOAN_INFO_SNAPSHOT SET FINTYPE = (SELECT FM.FINTYPE FROM FINANCEMAIN FM WHERE NPA_LOAN_INFO_SNAPSHOT.FINREFERENCE = FM.FINREFERENCE); 
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1469.23.9" author="NagaVamsi.P">
		<addNotNullConstraint tableName="NPA_LOAN_INFO_SNAPSHOT" columnName="FinType"
			columnDataType="varchar(8)" />
	</changeSet>

	<changeSet id="ST#1469.24" author="NagaVamsi.P">
		<addColumn tableName="NPA_Loan_Movements">
			<column name="CustCoreBank" type="varchar(50)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1469.24.1" author="NagaVamsi.P">
		<sql>
			<![CDATA[	
				UPDATE NPA_LOAN_MOVEMENTS SET CUSTCOREBANK = (SELECT C.CUSTCOREBANK FROM CUSTOMERS C WHERE NPA_LOAN_MOVEMENTS.CUSTID = C.CUSTID); 
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1469.24.2" author="NagaVamsi.P">
		<addNotNullConstraint tableName="NPA_Loan_Movements" columnName="CustCoreBank"
			columnDataType="varchar(50)" />
	</changeSet>

	<changeSet id="ST#1469.25" author="NagaVamsi.P">
		<addColumn tableName="NPA_Loan_Movement_Tagging">
			<column name="CustCoreBank" type="varchar(50)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1469.25.1" author="NagaVamsi.P">
		<sql>
			<![CDATA[	
				UPDATE NPA_LOAN_MOVEMENT_TAGGING SET CUSTCOREBANK = (SELECT C.CUSTCOREBANK FROM CUSTOMERS C WHERE NPA_LOAN_MOVEMENT_TAGGING.CUSTID = C.CUSTID); 
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1469.25.2" author="NagaVamsi.P">
		<addNotNullConstraint tableName="NPA_Loan_Movement_Tagging" columnName="CustCoreBank"
			columnDataType="varchar(50)" />
	</changeSet>

	<changeSet id="ST#1495.1.1" author="ramya.v">
		<addColumn tableName="RMTFINANCETYPES">
			<column name="ODMinAmount" type="decimal(18, 0)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1495.1.2" author="ramya.v">
		<addColumn tableName="RMTFINANCETYPES_TEMP">
			<column name="ODMinAmount" type="decimal(18, 0)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1495.1.3" author="ramya.v">
		<sql>
			<![CDATA[	
				UPDATE RMTFINANCETYPES_TEMP SET ODMINAMOUNT = 0;
				UPDATE RMTFINANCETYPES SET ODMINAMOUNT = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1495.1.4" author="ramya.v" dbms="postgresql, oracle">
		<addDefaultValue columnName="odMinAmount" tableName="RMTFINANCETYPES" defaultValue="0" />
		<addDefaultValue columnName="odMinAmount" tableName="RMTFINANCETYPES_TEMP" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#1495.1.4" author="ramya.v" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE RMTFINANCETYPES ADD CONSTRAINT DF_FT_ODMINAMOUNT DEFAULT 0 FOR ODMINAMOUNT;
				ALTER TABLE RMTFINANCETYPES_TEMP ADD CONSTRAINT DF_FTT_ODMINAMOUNT DEFAULT 0 FOR ODMINAMOUNT;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1495.2.1" author="ramya.v">
		<addColumn tableName="FINODPENALTYRATES">
			<column name="ODMinAmount" type="decimal(18, 0)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1495.2.2" author="ramya.v">
		<addColumn tableName="FINODPENALTYRATES_TEMP">
			<column name="ODMinAmount" type="decimal(18, 0)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1495.2.3" author="ramya.v">
		<sql>
			<![CDATA[	
				UPDATE FINODPENALTYRATES SET ODMINAMOUNT = 0;
				UPDATE FINODPENALTYRATES_TEMP SET ODMINAMOUNT = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1495.2.4" author="ramya.v" dbms="postgresql, oracle">
		<addDefaultValue columnName="odMinAmount" tableName="FINODPENALTYRATES" defaultValue="0" />
		<addDefaultValue columnName="odMinAmount" tableName="FINODPENALTYRATES_TEMP" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#1495.2.4" author="ramya.v" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE FINODPENALTYRATES ADD CONSTRAINT DF_FOPR_MINAMOUNT DEFAULT 0 FOR ODMINAMOUNT;
				ALTER TABLE FINODPENALTYRATES_TEMP ADD CONSTRAINT DF_FOPRT_MINAMOUNT DEFAULT 0 FOR ODMINAMOUNT;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1495.3.1_pre" author="ramya.v" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finodpenaltyrates_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1495.3.1" author="ramya.v">
		<createView viewName="FINODPENALTYRATES_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FINID,
					FINREFERENCE,
					FINEFFECTDATE,
					APPLYODPENALTY,
					ODINCGRCDAYS,
					ODCHARGETYPE,
					ODGRACEDAYS,
					ODCHARGECALON,
					ODCHARGEAMTORPERC,
					ODALLOWWAIVER,
					ODMAXWAIVERPERC,
					ODRULECODE,
					ODMINCAPAMOUNT,
					ODTDSREQ,
					OVERDRAFTEXTGRACEDAYS,
					OVERDRAFTCOLCHRGFEETYPE,
					OVERDRAFTCOLAMT,
					ODMINAMOUNT
				FROM FINODPENALTYRATES
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#1495.3.1_post" author="ramya.v" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finodpenaltyrates_aview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1495.3.2_pre" author="ramya.v" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finodpenaltyrates_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1495.3.2" author="ramya.v">
		<createView viewName="FINODPENALTYRATES_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FINID,
					FINREFERENCE,
					FINEFFECTDATE,
					APPLYODPENALTY,
					ODINCGRCDAYS,
					ODCHARGETYPE,
					ODGRACEDAYS,
					ODCHARGECALON,
					ODCHARGEAMTORPERC,
					ODALLOWWAIVER,
					ODMAXWAIVERPERC,
					ODRULECODE,
					ODMINCAPAMOUNT,
					ODTDSREQ,
					OVERDRAFTEXTGRACEDAYS,
					OVERDRAFTCOLCHRGFEETYPE,
					OVERDRAFTCOLAMT,
					ODMINAMOUNT
				FROM FINODPENALTYRATES_TEMP
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#1495.3.2_post" author="ramya.v" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finodpenaltyrates_tview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1495.3.3_pre" author="ramya.v" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finodpenaltyrates_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1495.3.3" author="ramya.v">
		<createView viewName="FINODPENALTYRATES_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FINID,
					FINREFERENCE,
					FINEFFECTDATE,
					APPLYODPENALTY,
					ODINCGRCDAYS,
					ODCHARGETYPE,
					ODGRACEDAYS,
					ODCHARGECALON,
					ODCHARGEAMTORPERC,
					ODALLOWWAIVER,
					ODMAXWAIVERPERC,
					ODRULECODE,
					ODMINCAPAMOUNT,
					ODTDSREQ,
					OVERDRAFTEXTGRACEDAYS,
					OVERDRAFTCOLCHRGFEETYPE,
					OVERDRAFTCOLAMT,
					ODMINAMOUNT
				FROM FINODPENALTYRATES_TEMP
				UNION ALL
				SELECT FINID,
					FINREFERENCE,
					FINEFFECTDATE,
					APPLYODPENALTY,
					ODINCGRCDAYS,
					ODCHARGETYPE,
					ODGRACEDAYS,
					ODCHARGECALON,
					ODCHARGEAMTORPERC,
					ODALLOWWAIVER,
					ODMAXWAIVERPERC,
					ODRULECODE,
					ODMINCAPAMOUNT,
					ODTDSREQ,
					OVERDRAFTEXTGRACEDAYS,
					OVERDRAFTCOLCHRGFEETYPE,
					OVERDRAFTCOLAMT,
					ODMINAMOUNT
				FROM FINODPENALTYRATES
				WHERE NOT EXISTS (SELECT 1 FROM FINODPENALTYRATES_TEMP WHERE FINID = FINODPENALTYRATES.FINID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#1495.3.3_post" author="ramya.v" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finodpenaltyrates_view');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1495.4.1" author="ramya.v">
		<addColumn tableName="FINODDETAILS">
			<column name="ODMinAmount" type="decimal(18, 0)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1495.4.2" author="ramya.v">
		<sql>
			<![CDATA[	
				UPDATE FINODDETAILS SET ODMINAMOUNT = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1495.4.3" author="ramya.v" dbms="postgresql, oracle">
		<addDefaultValue columnName="odMinAmount" tableName="FINODDETAILS" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#1495.4.3" author="ramya.v" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE FINODDETAILS ADD CONSTRAINT DF_FOD_MINAMOUNT DEFAULT 0 FOR ODMINAMOUNT;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1495.5.1_pre" author="ramya.v" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finodpenalty_latest_rates_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1495.5.1" author="ramya.v">
		<createView viewName="FINODPENALTY_LATEST_RATES_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FM.FINID, 
					FM.FINREFERENCE,
				    ODPR.FINEFFECTDATE,
				    ODPR.APPLYODPENALTY,
				    ODPR.ODINCGRCDAYS,
				   	ODPR.ODCHARGETYPE,
				    ODPR.ODGRACEDAYS,
				    ODPR.ODCHARGECALON,
				    ODPR.ODCHARGEAMTORPERC,
				    ODPR.ODALLOWWAIVER,
				    ODPR.ODMAXWAIVERPERC,
				    ODPR.ODRULECODE,
				    ODPR.ODMINAMOUNT
				FROM FINODPENALTYRATES ODPR 
				INNER JOIN FINANCEMAIN FM ON FM.FINID = ODPR.FINID
				WHERE ODPR.FINEFFECTDATE = ((SELECT MAX(FINODPENALTYRATES.FINEFFECTDATE) EXPR1 FROM FINODPENALTYRATES WHERE FINODPENALTYRATES.FINID = ODPR.FINID))
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#1495.5.1_post" author="ramya.v" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finodpenalty_latest_rates_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1495.6.1_pre" author="ramya.v" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finoddetails_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1495.6.1" author="ramya.v">
		<createView viewName="FINODDETAILS_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FM.FINID,
					FM.FINREFERENCE,
					OD.FINODSCHDDATE,
					OD.FINODFOR,
					OD.FINBRANCH,
					OD.FINTYPE,
					OD.CUSTID,
					OD.FINODTILLDATE,
					OD.FINCURODAMT,
					OD.FINCURODPRI,
					OD.FINCURODPFT,
					OD.FINMAXODAMT,
					OD.FINMAXODPRI,
					OD.FINMAXODPFT,
					OD.GRACEDAYS,
					OD.INCGRACEDAYS,
					OD.FINCURODDAYS,
					OD.TOTPENALTYAMT,
					OD.TOTWAIVED,
					OD.TOTPENALTYPAID,
					OD.LPIAMT,
					OD.LPIPAID,
					OD.LPIBAL,
					OD.TOTPENALTYBAL,
					OD.FINLMDFDATE,
					COALESCE(PR.APPLYODPENALTY, 0)  APPLYODPENALTY,
					COALESCE(PR.ODINCGRCDAYS, 0)  ODINCGRCDAYS,
					COALESCE(PR.ODCHARGETYPE, '')  ODCHARGETYPE,
					COALESCE(PR.ODGRACEDAYS, 0)  ODGRACEDAYS,
					COALESCE(PR.ODCHARGECALON, '')  ODCHARGECALON,
					COALESCE(PR.ODCHARGEAMTORPERC, 0)  ODCHARGEAMTORPERC,
					COALESCE(PR.ODALLOWWAIVER, 0)  ODALLOWWAIVER,
					COALESCE(PR.ODMAXWAIVERPERC, 0)  ODMAXWAIVERPERC,
					COALESCE(PR.ODRULECODE, '')  ODRULECODE,
                    COALESCE(PR.ODMINAMOUNT, 0)  ODMINAMOUNT,
					OD.LOCKODRECALCAL,
					OD.LPPTDSPAID,
					OD.LPCPZ,
					OD.LPCPZAMOUNT,
					OD.LPCURCPZBAL,
					OD.PRESENTMENTID,
					OD.CUROVERDRAFTTXNCHRG,
					OD.MAXOVERDRAFTTXNCHRG
				FROM FINODDETAILS OD
				INNER JOIN FINANCEMAIN FM ON FM.FINID = OD.FINID
				LEFT JOIN FINODPENALTY_LATEST_RATES_VIEW PR ON FM.FINID = PR.FINID
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#1495.6.1_post" author="ramya.v" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finoddetails_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1470.21_pre" author="saikrishna.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmtaccountingset');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1470.21" author="saikrishna.b">
		<modifyDataType tableName="RMTACCOUNTINGSET" columnName="ACCOUNTSETCODE" newDataType="varchar(10)" />
	</changeSet>

	<changeSet id="ST#1470.21_post" author="saikrishna.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rmtaccountingset');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1470.22_pre" author="saikrishna.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmtaccountingset_temp');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1470.22" author="saikrishna.b">
		<modifyDataType tableName="RMTACCOUNTINGSET_TEMP" columnName="ACCOUNTSETCODE" newDataType="varchar(10)" />
	</changeSet>

	<changeSet id="ST#1470.22_post" author="saikrishna.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rmtaccountingset_temp');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#724.1" author="Sravanthi.g">
		<dropColumn tableName="MANUAL_KNOCKOFF_UPLOAD" columnName="AdviseID" />
	</changeSet>

	<changeSet id="ST#724.2" author="Sravanthi.g">
		<addColumn tableName="MANUAL_KNOCKOFF_UPLOAD">
			<column name="FeeTypeCode" type="varchar(10)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#724.3" author="Sravanthi.g">
		<dropColumn tableName="CROSS_LOAN_KNOCKOFF_UPLOAD" columnName="AdviseID" />
	</changeSet>

	<changeSet id="ST#724.4" author="Sravanthi.g">
		<addColumn tableName="CROSS_LOAN_KNOCKOFF_UPLOAD">
			<column name="FeeTypeCode" type="varchar(10)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#724.6" author="Sravanthi.g">
		<sql>
			<![CDATA[	
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='CROSS_LOAN_KNOCKOFF_TEMPLATE');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='CROSS_LOAN_KNOCKOFF_TEMPLATE');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='CROSS_LOAN_KNOCKOFF_TEMPLATE';
							
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CROSS_LOAN_KNOCKOFF_TEMPLATE'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID IN (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CROSS_LOAN_KNOCKOFF_TEMPLATE');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'CROSS_LOAN_KNOCKOFF_TEMPLATE';
							
				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'CROSS_LOAN_KNOCKOFF_TEMPLATE', 'CROSSLOAN KNOCKOFF TEMPLATE DOWNLOAD', 3, 'CROSSLOANKNOCKOFF', NULL, NULL, ',' , 0, 0, NULL, 'ROW:{FROMFINREFERENCE, TOFINREFERENCE, EXCESSTYPE, EXCESSAMOUNT, ALLOCATIONTYPE, FEETYPECODE, PRI, PFT,EMI, ODC, BOUNCE, FEETYPE1}',  NULL, 'A', '/opt/pff/hdfc/cross_loan_knockoff/template', 'CROSSLOANKNOCKOFF_', '.xlsx', 0, current_timestamp, '${ddMMYYYYHms}', NULL, 0, NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CROSS_LOAN_KNOCKOFF_TEMPLATE'), 'CROSS_LOAN_KNOCKOFF_UPLOAD',  1, 'ID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 10, 0, 0);
					
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CROSS_LOAN_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CROSS_LOAN_KNOCKOFF_TEMPLATE')), 'HEADERID',					0, 'N', NULL, NULL, '${HEADER_ID}', NULL, '0', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CROSS_LOAN_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CROSS_LOAN_KNOCKOFF_TEMPLATE')), 'FROMFINREFERENCE',  		0, 'N', NULL, NULL, NULL, NULL, '0', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CROSS_LOAN_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CROSS_LOAN_KNOCKOFF_TEMPLATE')), 'TOFINREFERENCE',  			0, 'N', NULL, NULL, NULL, NULL, '1', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CROSS_LOAN_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CROSS_LOAN_KNOCKOFF_TEMPLATE')), 'EXCESSTYPE',  				0, 'N', NULL, NULL, NULL, NULL, '2', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CROSS_LOAN_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CROSS_LOAN_KNOCKOFF_TEMPLATE')), 'EXCESSAMOUNT',  			0, 'N', NULL, NULL, NULL, NULL, '3', NULL, NULL, NULL, 'AMOUNT_MINOR:0.00', 'O');						
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CROSS_LOAN_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CROSS_LOAN_KNOCKOFF_TEMPLATE')), 'ALLOCATIONTYPE',  			0, 'N', NULL, NULL, NULL, NULL, '4', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CROSS_LOAN_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CROSS_LOAN_KNOCKOFF_TEMPLATE')), 'FEETYPECODE',  			0, 'N', NULL, NULL, NULL, NULL, '5', NULL, NULL, NULL, NULL, 'O');		
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CROSS_LOAN_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CROSS_LOAN_KNOCKOFF_TEMPLATE')), 'PRI',  					0, 'N', NULL, NULL, NULL, NULL, '6', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CROSS_LOAN_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CROSS_LOAN_KNOCKOFF_TEMPLATE')), 'INT',  					0, 'N', NULL, NULL, NULL, NULL, '7', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CROSS_LOAN_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CROSS_LOAN_KNOCKOFF_TEMPLATE')), 'EMI',  					0, 'N', NULL, NULL, NULL, NULL, '8', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CROSS_LOAN_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CROSS_LOAN_KNOCKOFF_TEMPLATE')), 'LPP',  					0, 'N', NULL, NULL, NULL, NULL, '9', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CROSS_LOAN_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CROSS_LOAN_KNOCKOFF_TEMPLATE')), 'BOUNCE',  					0, 'N', NULL, NULL, NULL, NULL, '10', NULL, NULL, NULL, NULL, 'O');						
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CROSS_LOAN_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CROSS_LOAN_KNOCKOFF_TEMPLATE')), 'FEETYPE',  				0, 'N', NULL, NULL, NULL, NULL, '11', NULL, NULL, NULL, NULL, 'O');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#724.7" author="Sravanthi.g">
		<sql>
			<![CDATA[	
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='CROSS_LOAN_KNOCKOFF_DOWNLOAD');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='CROSS_LOAN_KNOCKOFF_DOWNLOAD');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='CROSS_LOAN_KNOCKOFF_DOWNLOAD';
							
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CROSS_LOAN_KNOCKOFF_DOWNLOAD'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID IN (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CROSS_LOAN_KNOCKOFF_DOWNLOAD');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'CROSS_LOAN_KNOCKOFF_DOWNLOAD';
							
				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'CROSS_LOAN_KNOCKOFF_DOWNLOAD', 'CROSSLOAN KNOCKOFF FILE DOWNLOAD', 3, 'CROSSLOANKNOCKOFF', NULL, NULL, ',' , 0, 0, NULL, 'ROW:{FROMFINREFERENCE, TOFINREFERENCE, EXCESSTYPE, EXCESSAMOUNT, ALLOCATIONTYPE, FEETYPECODE, UPLOADDATE, APPROVEDDATE, CREATED NAME, APPROVER NAME, UPLOADSTATUS, ERRORCODE, ERRORDESC}',  NULL, 'A', '/opt/pff/hdfc/cross_loan_knockoff/template', 'CROSSLOANKNOCKOFF_', '.xlsx', 0, current_timestamp, '${ddMMYYYYHms}', NULL, 0, NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CROSS_LOAN_KNOCKOFF_DOWNLOAD'), 'CROSS_LOAN_KNOCKOFF_UPLOAD',  1, 'ID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 10, 0, 0);
				
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CROSS_LOAN_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CROSS_LOAN_KNOCKOFF_DOWNLOAD')), 'FROMFINREFERENCE',  		0, 'N', NULL, NULL, NULL, NULL, '0', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CROSS_LOAN_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CROSS_LOAN_KNOCKOFF_DOWNLOAD')), 'TOFINREFERENCE',  			0, 'N', NULL, NULL, NULL, NULL, '1', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CROSS_LOAN_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CROSS_LOAN_KNOCKOFF_DOWNLOAD')), 'EXCESSTYPE',  				0, 'N', NULL, NULL, NULL, NULL, '2', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CROSS_LOAN_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CROSS_LOAN_KNOCKOFF_DOWNLOAD')), 'EXCESSAMOUNT',  			0, 'N', NULL, NULL, NULL, NULL, '3', NULL, NULL, NULL, 'AMOUNT:.00', 'O');						
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CROSS_LOAN_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CROSS_LOAN_KNOCKOFF_DOWNLOAD')), 'ALLOCATIONTYPE',  			0, 'N', NULL, NULL, NULL, NULL, '4', NULL, NULL, NULL, NULL, 'O');	
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CROSS_LOAN_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CROSS_LOAN_KNOCKOFF_DOWNLOAD')), 'FEETYPECODE',  			0, 'N', NULL, NULL, NULL, NULL, '5', NULL, NULL, NULL, NULL, 'O');	
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CROSS_LOAN_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CROSS_LOAN_KNOCKOFF_DOWNLOAD')), 'CREATEDON',       			0, 'N', NULL, NULL, NULL, NULL, '11', NULL, NULL, NULL,'dd-MMM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CROSS_LOAN_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CROSS_LOAN_KNOCKOFF_DOWNLOAD')), 'APPROVEDON',     			0, 'N', NULL, NULL, NULL, NULL, '12', NULL, NULL, NULL,'dd-MMM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CROSS_LOAN_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CROSS_LOAN_KNOCKOFF_DOWNLOAD')), 'CREATEDNAME',    	 		0, 'N', NULL, NULL, NULL, NULL, '13', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CROSS_LOAN_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CROSS_LOAN_KNOCKOFF_DOWNLOAD')), 'APPROVERNAME',	      		0, 'N', NULL, NULL, NULL, NULL, '14', NULL, NULL, NULL, NULL,'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CROSS_LOAN_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CROSS_LOAN_KNOCKOFF_DOWNLOAD')), 'STATUS',	                0, 'N', NULL, NULL, NULL, NULL, '15', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CROSS_LOAN_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CROSS_LOAN_KNOCKOFF_DOWNLOAD')), 'ERRORCODE',	            0, 'N', NULL, NULL, NULL, NULL, '16', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CROSS_LOAN_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CROSS_LOAN_KNOCKOFF_DOWNLOAD')), 'ERRORDESC',	            0, 'N', NULL, NULL, NULL, NULL, '17', NULL, NULL, NULL, NULL, 'O');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#724.9" author="Sravanthi.g">
		<sql>
			<![CDATA[	
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='MANUAL_KNOCKOFF_TEMPLATE');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='MANUAL_KNOCKOFF_TEMPLATE');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='MANUAL_KNOCKOFF_TEMPLATE';
							
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANUAL_KNOCKOFF_TEMPLATE'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID IN (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANUAL_KNOCKOFF_TEMPLATE');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANUAL_KNOCKOFF_TEMPLATE';
							
				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'MANUAL_KNOCKOFF_TEMPLATE', 'MANUAL KNOCKOFF TEMPLATE DOWNLOAD', 3, 'MANUALKNOCKOFF', NULL, NULL, ',' , 0, 0, NULL, 'ROW:{LoanReference, ExcessType, AllocationType, ReceiptAmount, FeeTypeCode, PRI, PFT, EMI, ODC, Bounce, FEETYP1, FEETYP2}',  NULL, 'A', '/opt/pff/hdfc/ManualKnockOff/template', 'ManualKnockOff_', '.xlsx', 0, current_timestamp, '${ddMMYYYYHms}', NULL, 0, NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANUAL_KNOCKOFF_TEMPLATE'), 'MANUAL_KNOCKOFF_UPLOAD',  1, 'ID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 11, 0, 0);
				
				
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANUAL_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANUAL_KNOCKOFF_TEMPLATE')), 'FINREFERENCE',  	0, 'N', NULL, NULL, NULL, NULL, '0', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANUAL_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANUAL_KNOCKOFF_TEMPLATE')), 'EXCESSTYPE',  		0, 'N', NULL, NULL, NULL, NULL, '1', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANUAL_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANUAL_KNOCKOFF_TEMPLATE')), 'ALLOCATIONTYPE',  	0, 'N', NULL, NULL, NULL, NULL, '2', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANUAL_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANUAL_KNOCKOFF_TEMPLATE')), 'RECEIPTAMOUNT',  	0, 'N', NULL, NULL, NULL, NULL, '3', NULL, NULL, NULL, 'AMOUNT_MINOR:0.00', 'O');						
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANUAL_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANUAL_KNOCKOFF_TEMPLATE')), 'FEETYPECODE',  	0, 'N', NULL, NULL, NULL, NULL, '4', NULL, NULL, NULL, NULL, 'O');	
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANUAL_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANUAL_KNOCKOFF_TEMPLATE')), 'PRI',  		    0, 'N', NULL, NULL, NULL, NULL, '5', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANUAL_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANUAL_KNOCKOFF_TEMPLATE')), 'INT',  		    0, 'N', NULL, NULL, NULL, NULL, '6', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANUAL_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANUAL_KNOCKOFF_TEMPLATE')), 'EMI',  		    0, 'N', NULL, NULL, NULL, NULL, '7', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANUAL_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANUAL_KNOCKOFF_TEMPLATE')), 'ODC',  			0, 'N', NULL, NULL, NULL, NULL, '8', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANUAL_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANUAL_KNOCKOFF_TEMPLATE')), 'BOUNCE',  			0, 'N', NULL, NULL, NULL, NULL, '9', NULL, NULL, NULL, NULL, 'O');						
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANUAL_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANUAL_KNOCKOFF_TEMPLATE')), 'FEETYP1',  		0, 'N', NULL, NULL, NULL, NULL, '10', NULL, NULL, NULL, NULL, 'O');	
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANUAL_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANUAL_KNOCKOFF_TEMPLATE')), 'FEETYP2',  		0, 'N', NULL, NULL, NULL, NULL, '11', NULL, NULL, NULL, NULL, 'O');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#724.10" author="bhaskara.k">
		<sql>
			<![CDATA[	
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='MANUAL_KNOCKOFF_DOWNLOAD');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='MANUAL_KNOCKOFF_DOWNLOAD');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='MANUAL_KNOCKOFF_DOWNLOAD';
							
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANUAL_KNOCKOFF_DOWNLOAD'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID IN (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANUAL_KNOCKOFF_DOWNLOAD');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANUAL_KNOCKOFF_DOWNLOAD';
							
				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'MANUAL_KNOCKOFF_DOWNLOAD', 'MANUAL KNOCKOFF DOWNLOAD', 3, 'MANUALKNOCKOFF', NULL, NULL, ',' , 0, 0, NULL, 'ROW:{LoanReference, ExcessType, AllocationType, ReceiptAmount, FeeTypeCode, CreatedOn, Status, ErrorCode, ErrorDesc, CreatedName, ApprovedName}', NULL, 'A', '/opt/pff/hdfc/ManualKnockOff/download', 'ManualKnockOff_', '.xlsx', 0, current_timestamp, '${ddMMYYYYHms}', NULL, 0, NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANUAL_KNOCKOFF_DOWNLOAD'), 'MANUAL_KNOCKOFF_UPLOAD',  1, 'ID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 17, 0, 0);
				
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANUAL_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANUAL_KNOCKOFF_DOWNLOAD')), 'FINREFERENCE',  	0, 'N', NULL, NULL, NULL, NULL, '0', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANUAL_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANUAL_KNOCKOFF_DOWNLOAD')), 'EXCESSTYPE',  		0, 'N', NULL, NULL, NULL, NULL, '1', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANUAL_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANUAL_KNOCKOFF_DOWNLOAD')), 'ALLOCATIONTYPE',  	0, 'N', NULL, NULL, NULL, NULL, '2', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANUAL_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANUAL_KNOCKOFF_DOWNLOAD')), 'RECEIPTAMOUNT',  	0, 'N', NULL, NULL, NULL, NULL, '3', NULL, NULL, NULL, 'AMOUNT:.00', 'O');						
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANUAL_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANUAL_KNOCKOFF_DOWNLOAD')), 'FEETYPECODE',  		0, 'N', NULL, NULL, NULL, NULL, '4', NULL, NULL, NULL, NULL, 'O');	
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANUAL_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANUAL_KNOCKOFF_DOWNLOAD')), 'CREATEDON',	    0, 'N', NULL, NULL, NULL, NULL, '11', NULL, NULL, NULL, 'dd-MMM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANUAL_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANUAL_KNOCKOFF_DOWNLOAD')), 'STATUS',	        0, 'N', NULL, NULL, NULL, NULL, '12', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANUAL_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANUAL_KNOCKOFF_DOWNLOAD')), 'ERRORCODE',	    0, 'N', NULL, NULL, NULL, NULL, '13', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANUAL_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANUAL_KNOCKOFF_DOWNLOAD')), 'ERRORDESC',	    0, 'N', NULL, NULL, NULL, NULL, '14', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANUAL_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANUAL_KNOCKOFF_DOWNLOAD')), 'CREATEDNAME',	    0, 'N', NULL, NULL, NULL, NULL, '15', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANUAL_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANUAL_KNOCKOFF_DOWNLOAD')), 'APPROVEDNAME',	    0, 'N', NULL, NULL, NULL, NULL, '16', NULL, NULL, NULL, NULL, 'O');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1495.01" author="Ramya.v">
		<addColumn tableName="LPP_UPLOAD">
			<column name="ODMinAmount" type="decimal(18,0)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1495.02" author="ramya.v">
		<sql>
			<![CDATA[	
				UPDATE LPP_UPLOAD SET ODMINAMOUNT = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1495.03" author="Ramya.v" dbms="postgresql,oracle">
		<addDefaultValue columnName="ODMinAmount" tableName="LPP_UPLOAD" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#1495.03" author="Ramya.v" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE LPP_UPLOAD ADD CONSTRAINT DF_LU_ODMINAMOUNT DEFAULT 0 FOR ODMINAMOUNT;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1495.2.13" author="ramya.v">
		<addColumn tableName="FINODPENALTYRATES_LOG">
			<column name="ODMinAmount" type="decimal(18, 0)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1495.2.131" author="ramya.v">
		<sql>
			<![CDATA[
			    DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'FinanceMainDialog_ODMinAmount');
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'FinanceMainDialog_ODMinAmount';
				
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'FinanceMainDialog_ODMinAmount', 'FinanceMainDialog', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FINANCETYPE_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'FinanceMainDialog_ODMinAmount'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1534" author="Mounika.M">
		<sql>
			<![CDATA[
				DELETE FROM ERRORDETAILS WHERE CODE = 'CANMA10';
				INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION) VALUES ('CANMA10', 'EN', 'E', 'This Manual Advise is already Utilized and cannot be canceled', '', 'Approved', null, null, null, null, null, 0, CURRENT_TIMESTAMP, 1000, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1537.1" author="sainaveen.y">
		<createTable tableName="MISCELLANEOUS_POSTING_UPLOAD">
			<column name="Id" type="bigint" autoIncrement="true">
				<constraints nullable="false" />
			</column>
			<column name="HeaderID" type="bigint" />
			<column name="RecordSeq" type="bigint" />
			<column name="FinID" type="bigint" />
			<column name="BatchReference" type="bigint" />
			<column name="BatchName " type="varchar(5)" />
			<column name="BatchPurpose" type="varchar(200)" />
			<column name="Reference" type="varchar(20)" />
			<column name="DebitGL " type="varchar(20)" />
			<column name="CreditGL " type="varchar(20)" />
			<column name="TxnAmount" type="decimal(18,0)" />
			<column name="ValueDate" type="datetime" />
			<column name="NarrLine1" type="varchar(100)" />
			<column name="NarrLine2" type="varchar(100)" />
			<column name="NarrLine3" type="varchar(100)" />
			<column name="NarrLine4" type="varchar(100)" />
			<column name="Progress" type="int" />
			<column name="Status" type="char(1)" />
			<column name="ErrorCode" type="varchar(20)" />
			<column name="ErrorDesc" type="varchar(2000)" />
		</createTable>
	</changeSet>

	<changeSet id="ST#1537.2" author="sainaveen.y">
		<addPrimaryKey constraintName="PK_MISCELL_POSTING_UPLOAD_ID" tableName="MISCELLANEOUS_POSTING_UPLOAD"
			columnNames="id" />
	</changeSet>

	<changeSet id="ST#1537.4.1" author="sainaveen.y">
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='MISCELLANEOUS_POSTING_TEMPLATE');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='MISCELLANEOUS_POSTING_TEMPLATE');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='MISCELLANEOUS_POSTING_TEMPLATE';
 				
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MISCELLANEOUS_POSTING_TEMPLATE'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MISCELLANEOUS_POSTING_TEMPLATE');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'MISCELLANEOUS_POSTING_TEMPLATE';

				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'MISCELLANEOUS_POSTING_TEMPLATE', 'Miscellaneous Posting Upload File.', 3, 'MiscellaneousPosting', null, null, ',', 0, 1, null, 'ROW:{Batch Name, Batch Purpose, Reference, Debit GL, Credit GL, Txnamount, Value Date, Narr1, Narr2, Narr3, Narr4}', '', 'C', '/opt/PFF/BASE/hdfc/MiscellaneousPosting/template', 'Miscellaneous_Posting_', '.xlsx', 0, CURRENT_TIMESTAMP, '${ddmm},.${SEQ_DATE_FILE}', null, '0', NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MISCELLANEOUS_POSTING_TEMPLATE'), 'MISCELLANEOUS_POSTING_UPLOAD', 1, 'ID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 11, 0, 0);
								
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MISCELLANEOUS_POSTING_TEMPLATE')),  'HEADERID',     	  0, 'N', NULL,  NULL,  '${HEADER_ID}',     NULL,  '0',   NULL, NULL, NULL,   NULL,             		'M');								
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MISCELLANEOUS_POSTING_TEMPLATE')),  'BATCHNAME',      	  0, 'N', NULL,  NULL,   NULL,              NULL,  '0',   NULL, NULL, NULL,   NULL,             		'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MISCELLANEOUS_POSTING_TEMPLATE')),  'BATCHPURPOSE',      0, 'N', NULL,  NULL,   NULL,              NULL,  '1',   NULL, NULL, NULL,   NULL,             		'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MISCELLANEOUS_POSTING_TEMPLATE')),  'REFERENCE',         0, 'N', NULL,  NULL,   NULL,              NULL,  '2',   NULL, NULL, NULL,   NULL,             		'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MISCELLANEOUS_POSTING_TEMPLATE')),  'DEBITGL',      	  0, 'N', NULL,  NULL,   NULL,              NULL,  '3',   NULL, NULL, NULL,   NULL,            			'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MISCELLANEOUS_POSTING_TEMPLATE')),  'CREDITGL',          0, 'N', NULL,  NULL,   NULL,              NULL,  '4',   NULL, NULL, NULL,   NULL,             		'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MISCELLANEOUS_POSTING_TEMPLATE')),  'TXNAMOUNT',         0, 'N', NULL,  NULL,   NULL,              NULL,  '5',   NULL, NULL, NULL,   'AMOUNT_MINOR:0.00',      'M');
			    INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MISCELLANEOUS_POSTING_TEMPLATE')),  'VALUEDATE',         0, 'N', NULL,  NULL,   NULL,              NULL,  '6',   NULL, NULL, NULL,   'dd-MMM-yyyy',    		'M');
			    INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MISCELLANEOUS_POSTING_TEMPLATE')),  'NARRLINE1',         0, 'N', NULL,  NULL,   NULL,              NULL,  '7',   NULL, NULL, NULL,   NULL,            		 	'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MISCELLANEOUS_POSTING_TEMPLATE')),  'NARRLINE2',         0, 'N', NULL,  NULL,   NULL,              NULL,  '8',   NULL, NULL, NULL,   NULL,             		'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MISCELLANEOUS_POSTING_TEMPLATE')),  'NARRLINE3',         0, 'N', NULL,  NULL,   NULL,              NULL,  '9',   NULL, NULL, NULL,   NULL,             		'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MISCELLANEOUS_POSTING_TEMPLATE')),  'NARRLINE4',         0, 'N', NULL,  NULL,   NULL,              NULL,  '10',  NULL, NULL, NULL,   NULL,             		'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MISCELLANEOUS_POSTING_TEMPLATE')),  'STATUS',            0, 'N', NULL,  'S',    NULL,              NULL,  '11',  NULL, NULL, NULL,   NULL,             		'O');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1537.5.1" author="sainaveen.y">
		<sql>
			<![CDATA[
			    DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='MISCELLANEOUS_POSTING_DOWNLOAD');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='MISCELLANEOUS_POSTING_DOWNLOAD');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='MISCELLANEOUS_POSTING_DOWNLOAD';
 				
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MISCELLANEOUS_POSTING_DOWNLOAD'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MISCELLANEOUS_POSTING_DOWNLOAD');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'MISCELLANEOUS_POSTING_DOWNLOAD';

				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'MISCELLANEOUS_POSTING_DOWNLOAD', 'Miscellaneous Posting Download File.', 3, 'MiscellaneousPosting', NULL, NULL, ',', 0, 0, null, 'ROW:{Batch Name, Batch Purpose, Reference, Debit GL, Credit GL, Txnamount, Value Date, Narr1, Narr2, Narr3, Narr4,Unique Reference, Upload Status, ErrorCode, ErrorDesc, Created On, Created By, Approved On, Approved By}', '', 'A', '/opt/PFF/BASE/hdfc/MiscellaneousPosting/download', 'Miscellaneous_Posting_', '.xlsx', 0, CURRENT_TIMESTAMP, '${ddmm},.${SEQ_DATE_FILE}', NULL, '0', NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MISCELLANEOUS_POSTING_DOWNLOAD'), 'MISCELLANEOUS_POSTING_UPLOAD', 0, 'ID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 19, 0, 0);
								
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MISCELLANEOUS_POSTING_DOWNLOAD')),  'BATCHNAME',              0, 'N', NULL,  NULL,   NULL,  NULL,  '0',   NULL, NULL, NULL,  NULL,           'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MISCELLANEOUS_POSTING_DOWNLOAD')),  'BATCHPURPOSE',           0, 'N', NULL,  NULL,   NULL,  NULL,  '1',   NULL, NULL, NULL,  NULL,           'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MISCELLANEOUS_POSTING_DOWNLOAD')),  'REFERENCE',              0, 'N', NULL,  NULL,   NULL,  NULL,  '2',   NULL, NULL, NULL,  NULL,           'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MISCELLANEOUS_POSTING_DOWNLOAD')),  'DEBITGL',      	       0, 'N', NULL,  NULL,   NULL,  NULL,  '3',   NULL, NULL, NULL,  NULL,           'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MISCELLANEOUS_POSTING_DOWNLOAD')),  'CREDITGL',               0, 'N', NULL,  NULL,   NULL,  NULL,  '4',   NULL, NULL, NULL,  NULL,           'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MISCELLANEOUS_POSTING_DOWNLOAD')),  'TXNAMOUNT',              0, 'N', NULL,  NULL,   NULL,  NULL,  '5',   NULL, NULL, NULL, 'AMOUNT:.00',    'M');
			    INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MISCELLANEOUS_POSTING_DOWNLOAD')),  'VALUEDATE',              0, 'N', NULL,  NULL,   NULL,  NULL,  '6',   NULL, NULL, NULL, 'dd-MMM-yyyy',   'M');
			    INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MISCELLANEOUS_POSTING_DOWNLOAD')),  'NARRLINE1',              0, 'N', NULL,  NULL,   NULL,  NULL,  '7',   NULL, NULL, NULL,  NULL,           'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MISCELLANEOUS_POSTING_DOWNLOAD')),  'NARRLINE2',              0, 'N', NULL,  NULL,   NULL,  NULL,  '8',   NULL, NULL, NULL,  NULL,           'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MISCELLANEOUS_POSTING_DOWNLOAD')),  'NARRLINE3',              0, 'N', NULL,  NULL,   NULL,  NULL,  '9',   NULL, NULL, NULL,  NULL,           'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MISCELLANEOUS_POSTING_DOWNLOAD')),  'NARRLINE4',              0, 'N', NULL,  NULL,   NULL,  NULL,  '10',  NULL, NULL, NULL,  NULL,           'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MISCELLANEOUS_POSTING_DOWNLOAD')),  'BATCHREFERENCE',         0, 'N', NULL,  NULL,   NULL,  NULL,  '11',  NULL, NULL, NULL,  NULL,           'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MISCELLANEOUS_POSTING_DOWNLOAD')),  'STATUS',                 0, 'N', NULL, 'S',     NULL,  NULL,  '12',  NULL, NULL, NULL,  NULL,           'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MISCELLANEOUS_POSTING_DOWNLOAD')),  'ERRORCODE',              0, 'N', NULL,  NULL,   NULL,  NULL,  '13',  NULL, NULL, NULL,  NULL,           'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MISCELLANEOUS_POSTING_DOWNLOAD')),  'ERRORDESC',              0, 'N', NULL,  NULL,   NULL,  NULL,  '14',  NULL, NULL, NULL,  NULL,           'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MISCELLANEOUS_POSTING_DOWNLOAD')),  'CREATEDON',              0, 'N', NULL,  NULL,   NULL,  NULL,  '15',  NULL, NULL, NULL,  'dd-MMM-yyyy',  'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MISCELLANEOUS_POSTING_DOWNLOAD')),  'CREATEDNAME',            0, 'N', NULL,  NULL,   NULL,  NULL,  '16',  NULL, NULL, NULL,  NULL,           'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MISCELLANEOUS_POSTING_DOWNLOAD')),  'APPROVEDON',             0, 'N', NULL,  NULL,   NULL,  NULL,  '17',  NULL, NULL, NULL,  'dd-MMM-yyyy',  'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MISCELLANEOUS_POSTING_DOWNLOAD')),  'APPROVEDNAME',           0, 'N', NULL,  NULL,   NULL,  NULL,  '18',  NULL, NULL, NULL,  NULL,           'O');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1537.6" author="sainaveen.y">
		<sql>
			<![CDATA[
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'MISCELLANEOUS_POSTING_MAKER');
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'MISCELLANEOUS_POSTING_APPROVER');
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'MISCELLANEOUS_POSTING_VIEW');

				DELETE FROM SECROLES WHERE ROLECD ='MISCELLANEOUS_POSTING_MAKER';
				DELETE FROM SECROLES WHERE ROLECD ='MISCELLANEOUS_POSTING_APPROVER';
				DELETE FROM SECROLES WHERE ROLECD ='MISCELLANEOUS_POSTING_VIEW';

				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'MISCELLANEOUS_POSTING_MAKER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'MISCELLANEOUS_POSTING_APPROVER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'MISCELLANEOUS_POSTING_VIEW');

				DELETE FROM SECGROUPS WHERE GRPCODE ='MISCELLANEOUS_POSTING_MAKER';
				DELETE FROM SECGROUPS WHERE GRPCODE ='MISCELLANEOUS_POSTING_APPROVER';
				DELETE FROM SECGROUPS WHERE GRPCODE ='MISCELLANEOUS_POSTING_VIEW';

				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='menu_Item_MiscellaneousPostingUpload_Maker';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='menu_Item_MiscellaneousPostingUpload_Approver';

				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_MiscellaneousPostingUpload_Maker',    'MENU', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_MiscellaneousPostingUpload_Approver', 'MENU', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SECGROUPS (GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'MISCELLANEOUS_POSTING_MAKER',        'WF Maker for Miscellaneous Posting Upload',    0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPS (GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'MISCELLANEOUS_POSTING_APPROVER',     'WF Approver for Miscellaneous Posting Upload', 0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPS (GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'MISCELLANEOUS_POSTING_VIEW', 		'WF View for Miscellaneous Posting Upload', 	0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);

				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'MISCELLANEOUS_POSTING_MAKER'),     (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_MiscellaneousPostingUpload_Maker'),     1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'MISCELLANEOUS_POSTING_APPROVER'),  (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_MiscellaneousPostingUpload_Approver'),  1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
                INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'MISCELLANEOUS_POSTING_VIEW'),      (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_BulkHostGLUpload_Maker'), 		         1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'MISCELLANEOUS_POSTING_VIEW'), 	 (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_BulkHostGLUpload_Approver'), 	         1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);


				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'MISCELLANEOUS_POSTING_MAKER',      'Maker role from Miscellaneous Posting Upload',       '', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0); 
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'MISCELLANEOUS_POSTING_APPROVER',   'Approver role from Miscellaneous Posting Upload',	  '', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
                INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'MISCELLANEOUS_POSTING_VIEW', 		'View role from Host GL Upload',		              '', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);

				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'MISCELLANEOUS_POSTING_MAKER'),    (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'MISCELLANEOUS_POSTING_MAKER'),     0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'MISCELLANEOUS_POSTING_APPROVER'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'MISCELLANEOUS_POSTING_APPROVER'),  0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'MISCELLANEOUS_POSTING_VIEW'), 	   (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'MISCELLANEOUS_POSTING_VIEW'),  	   0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);			
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1469.25.3.1" author="NagaVamsi.P">
		<addColumn tableName="NPA_LOAN_INFO_TEMP">
			<column name="CustCoreBank" type="varchar(50)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1469.25.3.2" author="NagaVamsi.P">
		<sql>
			<![CDATA[	
				UPDATE NPA_LOAN_INFO_TEMP SET CUSTCOREBANK = (SELECT C.CUSTCOREBANK FROM CUSTOMERS C WHERE NPA_LOAN_INFO_TEMP.CUSTID = C.CUSTID); 
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1469.25.3.3" author="NagaVamsi.P">
		<addNotNullConstraint tableName="NPA_LOAN_INFO_TEMP" columnName="CustCoreBank"
			columnDataType="varchar(50)" />
	</changeSet>

	<changeSet id="ST#1469.25.3.4" author="NagaVamsi.P">
		<addColumn tableName="NPA_LOAN_INFO">
			<column name="SecondaryNpaStage" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1469.25.3.5" author="nagaVamsi.P">
		<sql>
			<![CDATA[	
				UPDATE NPA_LOAN_INFO SET SECONDARYNPASTAGE = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1469.25.3.6" author="nagaVamsi.P" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE NPA_LOAN_INFO ADD CONSTRAINT DF_NLF_SecondaryNpaStage DEFAULT 0 FOR SecondaryNpaStage;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1469.25.3.6" author="nagavamsi.p" dbms="postgresql, oracle">
		<addDefaultValue columnName="SecondaryNpaStage" tableName="NPA_LOAN_INFO" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#1469.25.3.7" author="NagaVamsi.P">
		<addColumn tableName="NPA_LOAN_INFO">
			<column name="SecondaryNpaDate" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1469.25.3.8" author="NagaVamsi.P">
		<addColumn tableName="NPA_LOAN_INFO">
			<column name="SecondaryNpaModifiedDate" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1469.25.3.9" author="NagaVamsi.P">
		<addColumn tableName="NPA_LOAN_INFO">
			<column name="SecondaryNpaClassId" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1469.25.4" author="NagaVamsi.P">
		<addColumn tableName="NPA_LOAN_INFO_SNAPSHOT">
			<column name="SecondaryNpaStage" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1469.25.4.1" author="nagaVamsi.P">
		<sql>
			<![CDATA[	
				UPDATE NPA_LOAN_INFO_SNAPSHOT SET SECONDARYNPASTAGE = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1469.25.4.2" author="nagaVamsi.P" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE NPA_LOAN_INFO_SNAPSHOT ADD CONSTRAINT DF_NLF_SNAPSHOT_SNPASTG DEFAULT 0 FOR SECONDARYNPASTAGE;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1469.25.4.3" author="nagavamsi.p" dbms="postgresql, oracle">
		<addDefaultValue columnName="SecondaryNpaStage" tableName="NPA_LOAN_INFO_SNAPSHOT" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#1469.25.4.4" author="NagaVamsi.P">
		<addColumn tableName="NPA_LOAN_INFO_SNAPSHOT">
			<column name="SecondaryNpaDate" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1469.25.4.5" author="NagaVamsi.P">
		<addColumn tableName="NPA_LOAN_INFO_SNAPSHOT">
			<column name="SecondaryNpaModifiedDate" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1469.25.4.6" author="NagaVamsi.P">
		<addColumn tableName="NPA_LOAN_INFO_SNAPSHOT">
			<column name="SecondaryNpaClassId" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1469.25.4.7" author="NagaVamsi.P">
		<addColumn tableName="NPA_LOAN_INFO_Temp">
			<column name="SecondaryNpaStage" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1469.25.4.8" author="nagaVamsi.P">
		<sql>
			<![CDATA[	
				UPDATE  NPA_LOAN_INFO_TEMP SET SECONDARYNPASTAGE = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1469.25.4.9" author="nagaVamsi.P" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE NPA_LOAN_INFO_TEMP ADD CONSTRAINT DF_NLF_T_SNPTG DEFAULT 0 FOR SECONDARYNPASTAGE;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1469.25.4.9" author="nagavamsi.p" dbms="postgresql, oracle">
		<addDefaultValue columnName="SecondaryNpaStage" tableName="NPA_LOAN_INFO" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#1469.25.5" author="NagaVamsi.P">
		<addColumn tableName="NPA_LOAN_INFO_Temp">
			<column name="SecondaryNpaDate" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1469.25.6" author="NagaVamsi.P">
		<addColumn tableName="NPA_LOAN_INFO_Temp">
			<column name="SecondaryNpaModifiedDate" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1469.25.7" author="NagaVamsi.P">
		<addColumn tableName="NPA_LOAN_INFO_Temp">
			<column name="SecondaryNpaClassId" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1469.25.8" author="NagaVamsi.P">
		<addColumn tableName="NPA_PROVISION_STAGE">
			<column name="WriteOffLoan" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1469.25.9" author="NagaVamsi.P">
		<sql>
			<![CDATA[
				UPDATE NPA_PROVISION_STAGE SET WRITEOFFLOAN = (SELECT FM.WRITEOFFLOAN FROM FINANCEMAIN FM WHERE NPA_PROVISION_STAGE.FINID = FM.FINID) WHERE WRITEOFFLOAN IS NULL;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1469.25.10" author="NagaVamsi.P" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE NPA_PROVISION_STAGE ADD CONSTRAINT DF_NPA_S_WRITEOFFLOAN DEFAULT 0 FOR WRITEOFFLOAN;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1469.25.10" author="NagaVamsi.P" dbms="postgresql, oracle">
		<addDefaultValue columnName="WriteOffLoan" tableName="NPA_PROVISION_STAGE" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#1469.25.11" author="NagaVamsi.P">
		<addColumn tableName="NPA_PROVISION_STAGE">
			<column name="UnderSettlement" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1469.25.12" author="NagaVamsi.P">
		<sql>
			<![CDATA[
				UPDATE NPA_PROVISION_STAGE SET UNDERSETTLEMENT = (SELECT FM.UNDERSETTLEMENT FROM FINANCEMAIN FM WHERE NPA_PROVISION_STAGE.FINID = FM.FINID) WHERE UNDERSETTLEMENT IS NULL;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1469.25.13" author="NagaVamsi.P" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE NPA_PROVISION_STAGE ADD CONSTRAINT DF_NPA_S_UNDERSETTLEMENT DEFAULT 0 FOR UNDERSETTLEMENT;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1469.25.13" author="NagaVamsi.P" dbms="postgresql, oracle">
		<addDefaultValue columnName="UnderSettlement" tableName="NPA_PROVISION_STAGE" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#726.1" author="saisandeep.b">
		<createTable tableName="LOAN_CANCEL_UPLOADS">
			<column name="Id" type="bigint" autoIncrement="true">
				<constraints nullable="false" />
			</column>
			<column name="HeaderId" type="bigint" />
			<column name="FinId" type="bigInt" />
			<column name="FinReference" type="varchar(20)" />
			<column name="CancelType" type="char(2)" />
			<column name="Reason" type="varchar(8)" />
			<column name="Remarks" type="varchar(1000)" />
			<column name="Progress" type="int" />
			<column name="Status" type="char(1)" />
			<column name="ErrorCode" type="varchar(20)" />
			<column name="ErrorDesc" type="varchar(2000)" />
		</createTable>
	</changeSet>

	<changeSet id="ST#726.2" author="saisandeep.b">
		<addPrimaryKey tableName="LOAN_CANCEL_UPLOADS" columnNames="Id"
			constraintName="pk_loan_cancel_uploads_id" />
	</changeSet>

	<changeSet id="ST#726.3" author="saisandeep.b">
		<addColumn tableName="RMTFINANCETYPES">
			<column name="AllowCancelFin" type="smallint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#726.4" author="saisandeep.b">
		<addColumn tableName="RMTFINANCETYPES_TEMP">
			<column name="AllowCancelFin" type="smallint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#726.3.1" author="saisandeep.b">
		<sql>
			<![CDATA[
				UPDATE RMTFINANCETYPES SET ALLOWCANCELFIN = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#726.4.1" author="saisandeep.b">
		<sql>
			<![CDATA[
				UPDATE RMTFINANCETYPES_TEMP SET ALLOWCANCELFIN = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#726.10" author="saisandeep.b">
		<addColumn tableName="ReasonHeader">
			<column name="CancelType" type="varchar(10)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#726.10.1" author="saisandeep.b">
		<sql>
			<![CDATA[
				UPDATE REASONHEADER SET CANCELTYPE = 'C' WHERE ACTIVITY = 'Cancled';
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#726.11.1_pre" author="saisandeep.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemaintenance_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#726.11.1" author="saisandeep.b">
		<createView replaceIfExists="true" viewName="FINANCEMAINTENANCE_VIEW">
		 	<![CDATA[
		 		SELECT T1.FINID,
					T1.FINREFERENCE,
					T1.FINBRANCH,
					T1.FINTYPE,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.FINSTARTDATE,
					T1.NUMBEROFTERMS,
					T1.CUSTID,
					T1.FINAMOUNT,
					T1.MATURITYDATE,
					T1.FINREPAYMENTAMOUNT,
					T1.FINISACTIVE,
					T1.BLACKLISTED,
					T1.FEECHARGEAMT,
					T1.GRACETERMS,
					T1.ALLOWGRCPERIOD,
					T1.GRCPERIODENDDATE,
					T1.ALWMULTIDISB,
					T1.DEFFERMENTS,
					T1.NEXTROLECODE,
					T1.RECORDSTATUS,
					T1.RECORDTYPE,
					T1.ALLOWGRCPFTRVW,
					T1.ALLOWREPAYRVW,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.RCDMAINTAINSTS,
					T1.MIGRATEDFINANCE,
					T1.CLOSINGSTATUS,
					T1.REPAYRATEBASIS,
					T1.MANUALSCHEDULE,
					T1.FINCURRASSETVALUE,
					T1.AVAILEDUNPLANEMI,
					T1.AVAILEDREAGEH,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.DOWNPAYMENT,
					T1.PLANEMIHALW,
					T1.CALTERMS,
					T1.RATECHGANYDAY,
					T1.FINASSETVALUE,
					T2.CUSTCIF LOVDESCCUSTCIF,
					T2.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
					T3.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
					T3.FINDIVISION LOVDESCFINDIVISION,
					T3.FINCATEGORY LOVDESCPRODUCTCODENAME,
					T4.PRODUCTCATEGORY,
					COALESCE(T5.ROLEDESC,  ${add.schema}FN_GET_ROLEDESC(T1.NEXTROLECODE)) LOVDESCREQUESTSTAGE,
					COALESCE(T9.NOINST, 0) NOINST,
					T1.SAMPLINGREQUIRED,
					T1.ADVEMITERMS,
					T1.SANBSDSCHDLE,
					T1.PROMOTIONSEQID,
					T1.SVAMOUNT,
					T1.CBAMOUNT,
					T1.REPAYPFTFRQ,
					T1.VERSION,
					T1.TOTALCPZ,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.MANUALSCHDTYPE,
					T1.ISRA,
					T1.SANCTIONEDDATE,
					T1.OVERDRAFTTXNCHRGREQ,
					T1.OVERDRAFTCALCCHRG,
					T1.OVERDRAFTCHRGAMTORPERC,
					T1.OVERDRAFTCHRCALON,
					T1.STEPFINANCE,
					T1.CALCOFSTEPS,
         			T3.ALLOWCANCELFIN
				FROM FINANCEMAIN_TEMP T1
				INNER JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
				INNER JOIN RMTFINANCETYPES T3 ON T1.FINTYPE = T3.FINTYPE
				LEFT JOIN SECROLES T5 ON T1.NEXTROLECODE = T5.ROLECD
				INNER JOIN BMTPRODUCT T4 ON T3.FINCATEGORY = T4.PRODUCTCODE
				LEFT JOIN FINPFTDETAILS T9 ON T1.FINREFERENCE = T9.FINREFERENCE
				UNION ALL
				SELECT T1.FINID,
					T1.FINREFERENCE,
					T1.FINBRANCH,
					T1.FINTYPE,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.FINSTARTDATE,
					T1.NUMBEROFTERMS,
					T1.CUSTID,
					T1.FINAMOUNT,
					T1.MATURITYDATE,
					T1.FINREPAYMENTAMOUNT,
					T1.FINISACTIVE,
					T1.BLACKLISTED,
					T1.FEECHARGEAMT,
					T1.GRACETERMS,
					T1.ALLOWGRCPERIOD,
					T1.GRCPERIODENDDATE,
					T1.ALWMULTIDISB,
					T1.DEFFERMENTS,
					T1.NEXTROLECODE,
					T1.RECORDSTATUS,
					T1.RECORDTYPE,
					T1.ALLOWGRCPFTRVW,
					T1.ALLOWREPAYRVW,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.RCDMAINTAINSTS,
					T1.MIGRATEDFINANCE,
					T1.CLOSINGSTATUS,
					T1.REPAYRATEBASIS,
					T1.MANUALSCHEDULE,
					T1.FINCURRASSETVALUE,
					T1.AVAILEDUNPLANEMI,
					T1.AVAILEDREAGEH,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.DOWNPAYMENT,
					T1.PLANEMIHALW,
					T1.CALTERMS,
					T1.RATECHGANYDAY,
					T1.FINASSETVALUE,
					T2.CUSTCIF LOVDESCCUSTCIF,
					T2.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
					T3.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
					T3.FINDIVISION LOVDESCFINDIVISION,
					T3.FINCATEGORY LOVDESCPRODUCTCODENAME,
					T4.PRODUCTCATEGORY,
					COALESCE(T5.ROLEDESC,  ${add.schema} FN_GET_ROLEDESC(T1.NEXTROLECODE)) LOVDESCREQUESTSTAGE,
					COALESCE(T9.NOINST, 0) NOINST,
					T1.SAMPLINGREQUIRED,
					T1.ADVEMITERMS,
					T1.SANBSDSCHDLE,
					T1.PROMOTIONSEQID,
					T1.SVAMOUNT,
					T1.CBAMOUNT,
					T1.REPAYPFTFRQ,
					T1.VERSION,
					T1.TOTALCPZ,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.MANUALSCHDTYPE,
					T1.ISRA,
					T1.SANCTIONEDDATE,
					T1.OVERDRAFTTXNCHRGREQ,
					T1.OVERDRAFTCALCCHRG,
					T1.OVERDRAFTCHRGAMTORPERC,
					T1.OVERDRAFTCHRCALON,
					T1.STEPFINANCE,
					T1.CALCOFSTEPS,
         			T3.ALLOWCANCELFIN
				FROM FINANCEMAIN T1
				INNER JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
				INNER JOIN RMTFINANCETYPES T3 ON T1.FINTYPE = T3.FINTYPE
				LEFT JOIN SECROLES T5 ON T1.NEXTROLECODE = T5.ROLECD
				INNER JOIN BMTPRODUCT T4 ON T3.FINCATEGORY = T4.PRODUCTCODE
				LEFT JOIN FINPFTDETAILS T9 ON T1.FINID = T9.FINID
				WHERE NOT EXISTS (SELECT 1 FROM FINANCEMAIN_TEMP WHERE FINANCEMAIN_TEMP.FINID = T1.FINID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#726.11.1_post" author="saisandeep.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemaintenance_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#726.13" author="saisandeep.b">
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='LOAN_CANCEL_TEMPLATE');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='LOAN_CANCEL_TEMPLATE');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='LOAN_CANCEL_TEMPLATE';
							
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_CANCEL_TEMPLATE'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID IN (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_CANCEL_TEMPLATE');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_CANCEL_TEMPLATE';
							
				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'LOAN_CANCEL_TEMPLATE', 'Loan Cancellation template download', 3, 'LoanCancel', NULL, NULL, ',' , 0, 0, NULL, 'ROW:{LAN,Type,Reason,Remarks}',  '', 'A', '/opt/pff/hdfc/loancancel/template', 'LoanCancel_', '.xlsx', 0, current_timestamp, '${ddMMYYYYHms}', NULL, 0, NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_CANCEL_TEMPLATE'), 'LOAN_CANCEL_UPLOADS',  0, 'ID', 'HEADERID = :HEADERID', NULL, NULL, NULL, NULL, NULL, NULL, 4, 0, 0);
				
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LOAN_CANCEL_UPLOADS' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_CANCEL_TEMPLATE')), 'FINREFERENCE',0, 'N', NULL, NULL, NULL, NULL, '0', NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LOAN_CANCEL_UPLOADS' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_CANCEL_TEMPLATE')), 'CANCELTYPE',0, 'N', NULL, NULL, NULL, NULL, '1', NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LOAN_CANCEL_UPLOADS' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_CANCEL_TEMPLATE')), 'REASON',0, 'N', NULL, NULL, NULL, NULL, '2', NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LOAN_CANCEL_UPLOADS' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_CANCEL_TEMPLATE')), 'REMARKS',0, 'N', NULL, NULL, NULL, NULL, '3', NULL, NULL, NULL, NULL, 'M');

			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#726.14" author="saisandeep.b">
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='LOAN_CANCEL_DOWNLOAD');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='LOAN_CANCEL_DOWNLOAD');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='LOAN_CANCEL_DOWNLOAD';
							
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_CANCEL_DOWNLOAD'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID IN (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_CANCEL_DOWNLOAD');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_CANCEL_DOWNLOAD';
							
				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'LOAN_CANCEL_DOWNLOAD', 'Loan Cancel download', 3, 'LoanCancel', NULL, NULL, ',' , 0, 0, NULL, 'ROW:{LAN,Type,Reason,Remarks,Upload Status,Reject Reason,Maker Id,Checker Id,Upload Date,Approval Date}',  '', 'A', '/opt/pff/hdfc/loancancel/download', 'LoanCancel_', '.xlsx', 0, current_timestamp, '${ddMMYYYYHms}', NULL, 0, NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_CANCEL_DOWNLOAD'), 'LOAN_CANCEL_UPLOADS',  0, 'ID', 'HEADERID = :HEADERID', NULL, NULL, NULL, NULL, NULL, NULL, 10, 0, 0);
				
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LOAN_CANCEL_UPLOADS' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_CANCEL_DOWNLOAD')), 'FINREFERENCE',0, 'N', NULL, NULL, NULL, NULL, '0', NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LOAN_CANCEL_UPLOADS' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_CANCEL_DOWNLOAD')), 'CANCELTYPE',0, 'N', NULL, NULL, NULL, NULL, '1', NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LOAN_CANCEL_UPLOADS' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_CANCEL_DOWNLOAD')), 'REASON',0, 'N', NULL, NULL, NULL, NULL, '2', NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LOAN_CANCEL_UPLOADS' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_CANCEL_DOWNLOAD')), 'REMARKS',0, 'N', NULL, NULL, NULL, NULL, '3', NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LOAN_CANCEL_UPLOADS' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_CANCEL_DOWNLOAD')), 'STATUS',0, 'N', NULL, NULL, NULL, NULL, '4', NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LOAN_CANCEL_UPLOADS' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_CANCEL_DOWNLOAD')), 'ErrorDesc',0, 'N', NULL, NULL, NULL, NULL, '5', NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LOAN_CANCEL_UPLOADS' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_CANCEL_DOWNLOAD')), 'CreatedBy',0, 'N', NULL, NULL, NULL, NULL, '6', NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LOAN_CANCEL_UPLOADS' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_CANCEL_DOWNLOAD')), 'ApprovedBy',0, 'N', NULL, NULL, NULL, NULL, '7', NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LOAN_CANCEL_UPLOADS' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_CANCEL_DOWNLOAD')), 'CreatedOn',0, 'N', NULL, NULL, NULL, NULL, '8', NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LOAN_CANCEL_UPLOADS' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_CANCEL_DOWNLOAD')), 'ApprovedOn',0, 'N', NULL, NULL, NULL, NULL, '9', NULL, NULL, NULL, NULL, 'M');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#726.15.1" author="saisandeep.b">
		<sql>
			<![CDATA[
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_CANCEL_UPLOAD_MAKER');
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_CANCEL_UPLOAD_APPROVER');
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_CANCEL_UPLOAD_VIEW');

				DELETE FROM SECROLES WHERE ROLECD = 'LOAN_CANCEL_UPLOAD_MAKER';
				DELETE FROM SECROLES WHERE ROLECD = 'LOAN_CANCEL_UPLOAD_APPROVER';
				DELETE FROM SECROLES WHERE ROLECD ='LOAN_CANCEL_UPLOAD_VIEW';

				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_CANCEL_UPLOAD_MAKER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_CANCEL_UPLOAD_APPROVER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_CANCEL_UPLOAD_VIEW');

				DELETE FROM SECGROUPS WHERE GRPCODE ='LOAN_CANCEL_UPLOAD_MAKER';
				DELETE FROM SECGROUPS WHERE GRPCODE ='LOAN_CANCEL_UPLOAD_APPROVER';
				DELETE FROM SECGROUPS WHERE GRPCODE ='LOAN_CANCEL_UPLOAD_VIEW';

				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='menu_Item_LoanCancelUpload_Maker';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='menu_Item_LoanCancelUpload_Approver';

				INSERT INTO SECRIGHTS(RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_LoanCancelUpload_Maker', 'MENU', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS(RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_LoanCancelUpload_Approver', 'MENU', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'LOAN_CANCEL_UPLOAD_MAKER', 'WF Maker for Loan Cancel Upload', 0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'LOAN_CANCEL_UPLOAD_APPROVER', 'WF Approver for Loan Cancel Upload', 0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'LOAN_CANCEL_UPLOAD_VIEW', 		'Menu group for Loan Cancel Upload', 	0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);

				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_CANCEL_UPLOAD_MAKER'),    (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_LoanCancelUpload_Maker'),    1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_CANCEL_UPLOAD_APPROVER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_LoanCancelUpload_Approver'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_CANCEL_UPLOAD_VIEW'), 	(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_LoanCancelUpload_Maker'), 	  1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_CANCEL_UPLOAD_VIEW'), 	(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_LoanCancelUpload_Approver'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'LOAN_CANCEL_UPLOAD_MAKER', 'Maker role from Loan Cancel Upload', '', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0); 
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'LOAN_CANCEL_UPLOAD_APPROVER', 'Approver role from Loan Cancel Upload',	'', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'LOAN_CANCEL_UPLOAD_VIEW', 		'Menu role for Loan Cancel Upload',		'', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);

				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_CANCEL_UPLOAD_MAKER'),     (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'LOAN_CANCEL_UPLOAD_MAKER'),       0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_CANCEL_UPLOAD_APPROVER'),  (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'LOAN_CANCEL_UPLOAD_APPROVER'),    0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_CANCEL_UPLOAD_VIEW'), 	 (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'LOAN_CANCEL_UPLOAD_VIEW'), 		0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_CANCEL_UPLOAD_MAKER'), 	 (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'LOAN_CANCEL_UPLOAD_VIEW'), 		0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_CANCEL_UPLOAD_APPROVER'),  (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'LOAN_CANCEL_UPLOAD_VIEW'), 		0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="1001.01_pre" author="Poojitha.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'fintypepartnerbanks_view');
		 	]]>
		</sql>
	</changeSet>

	<changeSet id="1001.01" author="Poojitha.M">
		<createView viewName="FINTYPEPARTNERBANKS_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ID,
					T1.FINTYPE,
					T5.FINTYPEDESC,
					T1.PURPOSE,
					T1.PAYMENTMODE,
					T1.PARTNERBANKID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.PARTNERBANKCODE,
					T2.PARTNERBANKNAME,
					T1.VANAPPLICABLE,
					T1.BRANCHCODE,
					T3.BRANCHDESC,
					T1.CLUSTERID,
					T4.CODE CLUSTERCODE,
					T4.NAME,
					T4.CLUSTERTYPE,
					T2.ACCOUNTNO SUSPENSEAC,
					T5.FINDIVISION
				FROM FINTYPEPARTNERBANKS_TEMP T1
				INNER JOIN PARTNERBANKS T2 ON T1.PARTNERBANKID = T2.PARTNERBANKID
				INNER JOIN RMTFINANCETYPES T5 ON T1.FINTYPE = T5.FINTYPE
				LEFT JOIN RMTBRANCHES T3 ON T1.BRANCHCODE = T3.BRANCHCODE
				LEFT JOIN CLUSTERS T4 ON T1.CLUSTERID = T4.ID
				UNION ALL
				SELECT T1.ID,
					T1.FINTYPE,
					T5.FINTYPEDESC,
					T1.PURPOSE,
					T1.PAYMENTMODE,
					T1.PARTNERBANKID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.PARTNERBANKCODE,
					T2.PARTNERBANKNAME,
					T1.VANAPPLICABLE,
					T1.BRANCHCODE,
					T3.BRANCHDESC,
					T1.CLUSTERID,
					T4.CODE CLUSTERCODE,
					T4.NAME,
					T4.CLUSTERTYPE,
					T2.ACCOUNTNO SUSPENSEAC,
					T5.FINDIVISION
				FROM FINTYPEPARTNERBANKS T1
				INNER JOIN RMTFINANCETYPES T5 ON T1.FINTYPE = T5.FINTYPE
				INNER JOIN PARTNERBANKS T2 ON T1.PARTNERBANKID = T2.PARTNERBANKID
				LEFT JOIN RMTBRANCHES T3 ON T1.BRANCHCODE = T3.BRANCHCODE
				LEFT JOIN CLUSTERS T4 ON T1.CLUSTERID = T4.ID
				WHERE NOT EXISTS (SELECT 1 FROM FINTYPEPARTNERBANKS_TEMP WHERE FINTYPEPARTNERBANKS_TEMP.ID = T1.ID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="1001.01_post" author="Poojitha.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'fintypepartnerbanks_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="10020.02_pre" author="Poojitha.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'fintypepartnerbanks_aview');
		 	]]>
		</sql>
	</changeSet>

	<changeSet id="1002.02" author="Poojitha.M">
		<createView viewName="FINTYPEPARTNERBANKS_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ID,
					T1.FINTYPE,
					T3.FINTYPEDESC,
					T1.PURPOSE,
					T1.PAYMENTMODE,
					T1.PARTNERBANKID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.PARTNERBANKCODE,
					T2.PARTNERBANKNAME,
					T2.ACTIVE,
					T2.ACCOUNTNO,
					T2.ACTYPE AS ACCOUNTTYPE,
					T4.ENTITYCODE,
					T1.VANAPPLICABLE,
					T1.BRANCHCODE,
					T5.BRANCHDESC,
					T1.CLUSTERID,
					T6.CODE CLUSTERCODE,
					T6.NAME,
					T6.CLUSTERTYPE,
					T3.FINDIVISION
				FROM FINTYPEPARTNERBANKS T1
				INNER JOIN PARTNERBANKS T2 ON T1.PARTNERBANKID = T2.PARTNERBANKID
				INNER JOIN RMTFINANCETYPES T3 ON T1.FINTYPE = T3.FINTYPE
				INNER JOIN SMTDIVISIONDETAIL T4 ON T3.FINDIVISION = T4.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T5 ON T1.BRANCHCODE = T5.BRANCHCODE
				LEFT JOIN CLUSTERS T6 ON T1.CLUSTERID = T6.ID
			]]>
		</createView>
	</changeSet>

	<changeSet id="1002.02_post" author="Poojitha.M" dbms="postgress">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'fintypepartnerbanks_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1552.1" author="VinayKumar.K">
		<createTable tableName="FEE_WAIVER_UPLOAD">
			<column name="Id" type="bigint" autoIncrement="true">
				<constraints nullable="false" />
			</column>
			<column name="HeaderId" type="bigint" />
			<column name="RecordSeq" type="bigint" />
			<column name="FinID" type="bigint" />
			<column name="FinReference" type="Varchar(20)" />
			<column name="FeeTypeCode" type="Varchar(10)" />
			<column name="WaivedAmount" type="decimal(18,0)" />
			<column name="Remarks" type="Varchar(200)" />
			<column name="Status" type="char(1)" />
			<column name="Progress" type="int" />
			<column name="ErrorCode" type="Varchar(20)" />
			<column name="ErrorDesc" type="Varchar(2000)" />
		</createTable>
	</changeSet>

	<changeSet id="ST#1552.01" author="VinayKumar.K">
		<addPrimaryKey constraintName="PK_FEE_WAIVER_UPLOAD_ID" tableName="FEE_WAIVER_UPLOAD" columnNames="ID" />
	</changeSet>

	<changeSet id="ST#1552.3" author="VinayKumar.K">
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='FEE_WAIVER_TEMPLATE');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='FEE_WAIVER_TEMPLATE');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='FEE_WAIVER_TEMPLATE';
							
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FEE_WAIVER_TEMPLATE'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID IN (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FEE_WAIVER_TEMPLATE');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'FEE_WAIVER_TEMPLATE';
							
				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'FEE_WAIVER_TEMPLATE', 'BulkFeeWaivers template download', 3, 'BULKFEEWAIVERS', NULL, NULL, ',' , 0, 0, NULL, 'ROW:{Loan Reference, Charge Code, Waived Amount, Remarks}', NULL, 'A', '/opt/pff/hdfc/bulkFeeWaivers/template', 'BULKFEEWAIVERS_', '.xls', 0, current_timestamp, '${ddMMYYYYHms}', NULL, 0, NULL, 1, 1);
				
				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FEE_WAIVER_TEMPLATE'), 'FEE_WAIVER_UPLOAD',  0, 'ID', 'HEADERID = :HEADERID', NULL, NULL, NULL, NULL, NULL, NULL, 10, 0, 0);
			
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'FEE_WAIVER_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FEE_WAIVER_TEMPLATE')), 'FINREFERENCE',    0, 'N', NULL, NULL, NULL, NULL, '0',  NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'FEE_WAIVER_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FEE_WAIVER_TEMPLATE')), 'FEETYPECODE',     0, 'N', NULL, NULL, NULL, NULL, '1',  NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'FEE_WAIVER_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FEE_WAIVER_TEMPLATE')), 'WAIVEDAMOUNT',    0, 'N', NULL, NULL, NULL, NULL, '2',  NULL, NULL, NULL, 'AMOUNT_MINOR:0.00', 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'FEE_WAIVER_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FEE_WAIVER_TEMPLATE')), 'REMARKS',         0, 'N', NULL, NULL, NULL, NULL, '3',  NULL, NULL, NULL, NULL, 'O');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1552.4" author="VinayKumar.K">
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='FEE_WAIVER_DOWNLOAD');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='FEE_WAIVER_DOWNLOAD');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='FEE_WAIVER_DOWNLOAD';
							
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FEE_WAIVER_DOWNLOAD'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID IN (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FEE_WAIVER_DOWNLOAD');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'FEE_WAIVER_DOWNLOAD';
							
				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'FEE_WAIVER_DOWNLOAD', 'BulkFeeWaivers download', 3, 'BULKFEEWAIVERS', NULL, NULL, ',' , 0, 0, NULL, 'ROW:{Loan Referenece, Charge Code, Wavied Amount, Remarks, Status, ErrorCode, ErrorDesc}',  '', 'A', '/opt/pff/hdfc/bulkFeeWaivers/download', 'BulkFeewaivers_', '.xls', 0, current_timestamp, '${ddMMYYYYHms}', NULL, 0, NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FEE_WAIVER_DOWNLOAD'), 'FEE_WAIVER_UPLOAD',  0, 'ID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 10, 0, 0);
				
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'FEE_WAIVER_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FEE_WAIVER_DOWNLOAD')), 'FINREFERENCE',   0, 'N', NULL, NULL, NULL, NULL, '0', NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'FEE_WAIVER_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FEE_WAIVER_DOWNLOAD')), 'FEETYPECODE',    0, 'N', NULL, NULL, NULL, NULL, '1', NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'FEE_WAIVER_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FEE_WAIVER_DOWNLOAD')), 'WAIVEDAMOUNT',   0, 'N', NULL, NULL, NULL, NULL, '2', NULL, NULL, NULL, 'AMOUNT:.00', 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'FEE_WAIVER_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FEE_WAIVER_DOWNLOAD')), 'REMARKS',	    0, 'N', NULL, NULL, NULL, NULL, '3', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'FEE_WAIVER_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FEE_WAIVER_DOWNLOAD')), 'STATUS',	        0, 'N', NULL, NULL, NULL, NULL, '4', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'FEE_WAIVER_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FEE_WAIVER_DOWNLOAD')), 'ERRORCODE',	    0, 'N', NULL, NULL, NULL, NULL, '5', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'FEE_WAIVER_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FEE_WAIVER_DOWNLOAD')), 'ERRORDESC',	    0, 'N', NULL, NULL, NULL, NULL, '6', NULL, NULL, NULL, NULL, 'O');
				
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1552.5" author="VinayKumar.K">
		<sql>
			<![CDATA[
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FEE_WAIVER_UPLOAD_MAKER');
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FEE_WAIVER_UPLOAD_APPROVER');
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FEE_WAIVER_UPLOAD_VIEW');

				DELETE FROM SECROLES WHERE ROLECD ='FEE_WAIVER_UPLOAD_MAKER';
				DELETE FROM SECROLES WHERE ROLECD ='FEE_WAIVER_UPLOAD_APPROVER';
				DELETE FROM SECROLES WHERE ROLECD ='FEE_WAIVER_UPLOAD_VIEW';

				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FEE_WAIVER_UPLOAD_MAKER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FEE_WAIVER_UPLOAD_APPROVER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FEE_WAIVER_UPLOAD_VIEW');

				DELETE FROM SECGROUPS WHERE GRPCODE ='FEE_WAIVER_UPLOAD_MAKER';
				DELETE FROM SECGROUPS WHERE GRPCODE ='FEE_WAIVER_UPLOAD_APPROVER';
				DELETE FROM SECGROUPS WHERE GRPCODE ='FEE_WAIVER_UPLOAD_VIEW';

				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='menu_Item_Fee_Waiver_Upload_Maker';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='menu_Item_Fee_Waiver_Upload_Approver';

				INSERT INTO SECRIGHTS(RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_Fee_Waiver_Upload_Maker',    'MENU', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS(RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_Fee_Waiver_Upload_Approver', 'MENU', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'FEE_WAIVER_UPLOAD_VIEW', 		'Menu group for FeeWaiver Upload', 	0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
				
				INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'FEE_WAIVER_UPLOAD_MAKER',    'WF Maker for FeeWaiver Upload', 0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'FEE_WAIVER_UPLOAD_APPROVER', 'WF Approver for FeeWaiver Upload', 0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);

				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FEE_WAIVER_UPLOAD_MAKER'),    (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_Fee_Waiver_Upload_Maker'),    1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FEE_WAIVER_UPLOAD_APPROVER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_Fee_Waiver_Upload_Approver'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FEE_WAIVER_UPLOAD_VIEW'), 	(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_Fee_Waiver_Upload_Maker'), 	  1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FEE_WAIVER_UPLOAD_VIEW'), 	(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_Fee_Waiver_Upload_Approver'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);

				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'FEE_WAIVER_UPLOAD_MAKER',    'Maker role from FeeWaiver Upload',       '', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0); 
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'FEE_WAIVER_UPLOAD_APPROVER', 'Approver role from FeeWaiver Upload',	'', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'FEE_WAIVER_UPLOAD_VIEW', 		'Menu role for FeeWaiver Upload',		'', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);

				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FEE_WAIVER_UPLOAD_MAKER'),    (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'FEE_WAIVER_UPLOAD_MAKER'),    0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FEE_WAIVER_UPLOAD_APPROVER'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'FEE_WAIVER_UPLOAD_APPROVER'), 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FEE_WAIVER_UPLOAD_VIEW'), 		(SELECT ROLEID FROM SECROLES WHERE ROLECD = 'FEE_WAIVER_UPLOAD_VIEW'), 		0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FEE_WAIVER_UPLOAD_MAKER'), 	(SELECT ROLEID FROM SECROLES WHERE ROLECD = 'FEE_WAIVER_UPLOAD_VIEW'), 		0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FEE_WAIVER_UPLOAD_APPROVER'),  (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'FEE_WAIVER_UPLOAD_VIEW'), 		0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#0.0011.1" author="Sandeepkuamr.m">
		<createSequence sequenceName="SEQ_LIEN_HEADER_LIEN_ID" startValue="1001" maxValue="9223372036854775807"
			incrementBy="1" />
	</changeSet>

	<changeSet id="ST#0.0012.2" author="Sandeepkuamr.m">
		<createSequence sequenceName="SEQ_LIEN_HEADER_LIEN_REF" startValue="1" maxValue="9223372036854775807"
			incrementBy="1" />
	</changeSet>

	<changeSet id="ST#0.0013.3" author="Sandeepkuamr.m">
		<createSequence sequenceName="SEQ_LIEN_HEADER_ID" startValue="1" maxValue="9223372036854775807"
			incrementBy="1" />
	</changeSet>


	<changeSet id="ST#0.0014.4" author="Sandeepkuamr.m">
		<createTable tableName="LIEN_HEADER">
			<column name="ID" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="LienID" type="bigint" />
			<column name="AccNumber" type="Varchar(50)">
				<constraints nullable="false" />
			</column>
			<column name="LienStatus" type="boolean">
				<constraints nullable="false" />
			</column>
			<column name="InterfaceStatus" type="Varchar(10)">
				<constraints nullable="false" />
			</column>
			<column name="Reference" type="Varchar(20)">
				<constraints nullable="false" />
			</column>
			<column name="Marking" type="Varchar(8)" />
			<column name="MarkingDate" type="datetime" />
			<column name="DeMarking" type="Varchar(8)" />
			<column name="DeMarkingDate" type="datetime" />
			<column name="LienReference" type="Varchar(20)" />
		</createTable>
	</changeSet>

	<changeSet id="ST#0.0015.5" author="Sandeepkumar.m">
		<addPrimaryKey constraintName="PK_LH_ID" tableName="LIEN_HEADER" columnNames="ID" />
	</changeSet>

	<changeSet id="ST#0.0016.6" author="Sandeepkuamr.m">
		<createTable tableName="LIEN_DETAILS">
			<column name="ID" type="bigint" autoIncrement="true">
				<constraints nullable="false" />
			</column>
			<column name="HeaderID" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="LienID" type="bigint" />
			<column name="Reference" type="Varchar(20)">
				<constraints nullable="false" />
			</column>
			<column name="Marking" type="Varchar(8)" />
			<column name="MarkingDate" type="datetime" />
			<column name="MarkingReason" type="Varchar(200)" />
			<column name="DeMarking" type="Varchar(8)" />
			<column name="DeMarkingDate" type="datetime" />
			<column name="DeMarkingReason" type="Varchar(200)" />
			<column name="LienReference" type="Varchar(20)" />
			<column name="LienStatus" type="boolean">
				<constraints nullable="false" />
			</column>
			<column name="Source" type="Varchar(10)">
				<constraints nullable="false" />
			</column>
			<column name="Version" type="int" />
			<column name="CreatedBy" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="CreatedOn" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="ApprovedBy" type="bigint" />
			<column name="ApprovedOn" type="datetime" />
			<column name="LastMntBy" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="LastMnton" type="datetime">
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>

	<changeSet id="ST#0.0017.7" author="Sandeepkumar.m">
		<addPrimaryKey constraintName="PK_LD_ID" tableName="LIEN_DETAILS" columnNames="ID" />
	</changeSet>

	<changeSet id="ST#0.0018.8" author="Sandeepkumar.m">
		<addUniqueConstraint tableName="LIEN_HEADER" columnNames="LienID"
			constraintName="uk_LienHeader_LienId" />
	</changeSet>

	<changeSet id="ST#0.0019.9" author="Sandeepkumar.m">
		<createIndex tableName="LIEN_DETAILS" indexName="idx_src_ref">
			<column name="Source" type="varchar(10)" />
			<column name="Reference" type="varchar(20)" />
		</createIndex>
	</changeSet>

	<changeSet id="ST#0.0020.0" author="Sandeepkumar.m">
		<createIndex tableName="LIEN_HEADER" indexName="idx_ref_accno">
			<column name="Reference" type="varchar(20)" />
			<column name="AccNumber" type="varchar(50)" />
		</createIndex>
	</changeSet>


	<changeSet id="ST#0.0021.1" author="Sandeepkumar.m">
		<createTable tableName="LIEN_UPLOAD">
			<column name="ID" type="bigint" autoIncrement="true">
				<constraints nullable="false" />
			</column>
			<column name="HeaderId" type="bigint" />
			<column name="RecordSeq" type="bigint" />
			<column name="LienID" type="bigint" />
			<column name="Source" type="Varchar(10)">
				<constraints nullable="false" />
			</column>
			<column name="Reference" type="Varchar(20)">
				<constraints nullable="false" />
			</column>
			<column name="AccNumber" type="Varchar(50)">
				<constraints nullable="false" />
			</column>
			<column name="Marking" type="Varchar(8)" />
			<column name="MarkingDate" type="datetime" />
			<column name="MarkingReason" type="Varchar(200)" />
			<column name="DeMarking" type="Varchar(8)" />
			<column name="DeMarkingDate" type="datetime" />
			<column name="DeMarkingReason" type="Varchar(200)" />
			<column name="LienReference" type="Varchar(20)" />
			<column name="LienStatus" type="Varchar(10)" />
			<column name="InterfaceStatus" type="Varchar(10)" />
			<column name="Action" type="char(1)">
				<constraints nullable="false" />
			</column>
			<column name="Remarks" type="Varchar(50)" />
			<column name="Progress" type="int" />
			<column name="Status" type="char(1)" />
			<column name="ErrorCode" type="varchar(20)" />
			<column name="ErrorDesc" type="varchar(2000)" />
		</createTable>

	</changeSet>

	<changeSet id="ST0.0022.2" author="Sandeepkumar.m">
		<addPrimaryKey constraintName="PK_LU_ID" tableName="LIEN_UPLOAD" columnNames="ID" />
	</changeSet>

	<changeSet id="TK#0.0023.3" author="Sandeepkumar.m">
		<addForeignKeyConstraint constraintName="fk_lien_upload_headerid"
			referencedTableName="FILE_UPLOAD_HEADER" baseColumnNames="HeaderID" baseTableName="LIEN_UPLOAD"
			referencedColumnNames="ID" />
	</changeSet>

	<changeSet id="ST#0.0021" author="Sandeepkumar.m">
		<sql>
			<![CDATA[
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LIEN_UPLOAD_MAKER');
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LIEN_UPLOAD_APPROVER');
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LIEN_UPLOAD_VIEW');

				DELETE FROM SECROLES WHERE ROLECD = 'LIEN_UPLOAD_MAKER';
				DELETE FROM SECROLES WHERE ROLECD = 'LIEN_UPLOAD_APPROVER';
				DELETE FROM SECROLES WHERE ROLECD ='LIEN_UPLOAD_VIEW';

				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LIEN_UPLOAD_MAKER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LIEN_UPLOAD_APPROVER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LIEN_UPLOAD_VIEW');

				DELETE FROM SECGROUPS WHERE GRPCODE = 'LIEN_UPLOAD_MAKER';	
				DELETE FROM SECGROUPS WHERE GRPCODE = 'LIEN_UPLOAD_APPROVER';
				DELETE FROM SECGROUPS WHERE GRPCODE ='LIEN_UPLOAD_VIEW';

				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_LienUpload_Maker';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_LienUpload_Approver';

				INSERT INTO SECRIGHTS(RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_LienUpload_Maker', 'MENU', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS(RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_LienUpload_Approver', 'MENU', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'LIEN_UPLOAD_MAKER', 'WF Maker for Lien Upload', 0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'LIEN_UPLOAD_APPROVER', 'WF Approver for Lien Upload', 0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'LIEN_UPLOAD_VIEW', 		'Menu group for Lien Upload', 	0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);

				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LIEN_UPLOAD_MAKER'),    (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_LienUpload_Maker'),    1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LIEN_UPLOAD_APPROVER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_LienUpload_Approver'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LIEN_UPLOAD_VIEW'), 	(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_LienUpload_Maker'), 	  1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LIEN_UPLOAD_VIEW'), 	(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_LienUpload_Approver'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);

				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'LIEN_UPLOAD_MAKER', 	'Maker role from Lien Upload',      '', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0); 
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'LIEN_UPLOAD_APPROVER', 'Approver role from Lien Upload',	'', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'LIEN_UPLOAD_VIEW', 	'Menu role for Lien Upload',		'', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LIEN_UPLOAD_MAKER'),    	(SELECT ROLEID FROM SECROLES WHERE ROLECD = 'LIEN_UPLOAD_MAKER'),    0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LIEN_UPLOAD_APPROVER'), 	(SELECT ROLEID FROM SECROLES WHERE ROLECD = 'LIEN_UPLOAD_APPROVER'), 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LIEN_UPLOAD_VIEW'), 		(SELECT ROLEID FROM SECROLES WHERE ROLECD = 'LIEN_UPLOAD_VIEW'), 		0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LIEN_UPLOAD_MAKER'), 		(SELECT ROLEID FROM SECROLES WHERE ROLECD = 'LIEN_UPLOAD_VIEW'), 		0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LIEN_UPLOAD_APPROVER'),  	(SELECT ROLEID FROM SECROLES WHERE ROLECD = 'LIEN_UPLOAD_VIEW'), 		0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#0.0025" author="Sandeepkumar.m">
		<sql>
			<![CDATA[	
	            DELETE FROM SECROLEGROUPS WHERE ROLEID IN (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'LIEN_ENQUIRY');
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LIEN_ENQUIRY');
								
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LIEN_ENQUIRY');
					
				DELETE FROM SECROLES WHERE ROLECD = 'LIEN_ENQUIRY';
				DELETE FROM SECGROUPS WHERE GRPCODE = 'LIEN_ENQUIRY';
					
                INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_Lien_Enquiry', 	 'MENU', 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SECGROUPS (GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'LIEN_ENQUIRY', 'Lien Enquiry', 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'LIEN_ENQUIRY',   'Enquiry role for Lien',	 '', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LIEN_ENQUIRY'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_Lien_Enquiry'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LIEN_ENQUIRY'),  (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'LIEN_ENQUIRY'),  0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1553.1" author="saikiran.n">
		<createTable tableName="CROSS_LOAN_KNOCKOFF_STAGE">
			<column name="Id" type="bigint" autoIncrement="true">
				<constraints nullable="false" />
			</column>
			<column name="CustId" type="bigint" />
			<column name="CoreBankId" type="varchar(50)" />
			<column name="FinId" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="ReferenceID" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="AmountType" type="varchar(8)">
				<constraints nullable="false" />
			</column>
			<column name="BalanceAmt" type="Decimal(18,0)">
				<constraints nullable="false" />
			</column>
			<column name="ExecutionDay" type="char(2)" />
			<column name="ThresholdValue" type="varchar(1000)" />
			<column name="UtilizedAmount" type="decimal(18,0)" />
			<column name="ValueDate" type="datetime">
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>

	<changeSet id="ST#1553.2" author="saikiran.n">
		<addPrimaryKey tableName="Cross_Loan_KnockOff_Stage" columnNames="ID"
			constraintName="PK_CROSS_LOAN_KNOCKOFF_STAGE" />
	</changeSet>

	<changeSet id="ST#1553.3" author="saikiran.n">
		<addColumn tableName="Auto_knockoff_Excess">
			<column name="FromFinId" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1553.4" author="saikiran.n">
		<addColumn tableName="Auto_knockoff_Excess">
			<column name="KnockOfftype" type="Char(1)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1553.5" author="saikiran.n">
		<addColumn tableName="Auto_knockoff_Excess_Stage">
			<column name="FromFinId" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1553.6" author="saikiran.n">
		<addColumn tableName="Auto_knockoff_Excess_Stage">
			<column name="KnockOfftype" type="Char(1)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1553.7" author="saikiran.n">
		<createTable tableName="Cross_Loan_KnockOff_Queue">
			<column name="ID" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="CustID" type="bigint" />
			<column name="CoreBankId" type="varchar(50)" />
			<column name="FinID" type="bigint" />
			<column name="FinReference" type="varchar(20)" />
			<column name="ThreadID" type="int">
				<constraints nullable="false" />
			</column>
			<column name="StartTime" type="datetime" />
			<column name="EndTime" type="datetime" />
			<column name="Progress" type="int">
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>

	<changeSet id="ST#1553.8" author="saikiran.n">
		<addPrimaryKey tableName="Cross_Loan_KnockOff_Queue" columnNames="Id"
			constraintName="PK_Cross_Loan_KnoOff_Queue_Id" />
	</changeSet>

	<changeSet id="ST#1553.9" author="saikiran.n" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE CROSS_LOAN_KNOCKOFF_QUEUE ADD CONSTRAINT DF_CRLOAN_KNKOFF_QUE_TID DEFAULT 0 FOR ThreadID;
				ALTER TABLE CROSS_LOAN_KNOCKOFF_QUEUE ADD CONSTRAINT DF_CRLOAN_KNKOFF_QUE_PRO DEFAULT 0 FOR Progress;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1553.9" author="saikiran.n" dbms="postgresql, oracle">
		<addDefaultValue columnName="ThreadID" tableName="CROSS_LOAN_KNOCKOFF_QUEUE" defaultValue="0" />
		<addDefaultValue columnName="Progress" tableName="CROSS_LOAN_KNOCKOFF_QUEUE" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#1553.10" author="saikiran.n">
		<createIndex tableName="CROSS_LOAN_KNOCKOFF_QUEUE" indexName="idx_crsln_knkof_qu_tid">
			<column name="ThreadID" type="int" />
		</createIndex>
	</changeSet>
	<changeSet id="ST#1553.11" author="saikiran.n">
		<createIndex tableName="CROSS_LOAN_KNOCKOFF_QUEUE" indexName="idx_crsln_knkof_qu_id_progress">
			<column name="ID" type="bigint" />
			<column name="Progress" type="int" />
		</createIndex>
	</changeSet>
	<changeSet id="ST#1553.12" author="saikiran.n">
		<createIndex tableName="CROSS_LOAN_KNOCKOFF_QUEUE" indexName="idx_crsln_knkof_qu_cid_progre">
			<column name="CustID" type="bigint" />
			<column name="Progress" type="int" />
		</createIndex>
	</changeSet>

	<changeSet id="ST#1553.13" author="saikiran.n">
		<createIndex tableName="CROSS_LOAN_KNOCKOFF_QUEUE" indexName="idx_crsln_knkof_qu_progress">
			<column name="Progress" type="int" />
		</createIndex>
	</changeSet>

	<changeSet id="ST#1553.14" author="saikiran.n">
		<comment>Staging table for cross loan Knock Off excess processing</comment>
		<createTable tableName="CROSS_LOAN_KNOCKOFF_DTL_STAGE">
			<column name="ID" type="bigint" autoIncrement="true">
				<constraints nullable="false" />
			</column>
			<column name="ExcessID" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="KnockOffId" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="FinType" type="varchar(8)">
				<constraints nullable="false" />
			</column>
			<column name="Code" type="varchar(8)">
				<constraints nullable="false" />
			</column>
			<column name="ExecutionDays" type="varchar(100)">
				<constraints nullable="false" />
			</column>
			<column name="FeeTypeCode" type="varchar(100)">
				<constraints nullable="false" />
			</column>
			<column name="KnockOffOrder" type="int">
				<constraints nullable="false" />
			</column>
			<column name="FeeOrder" type="int">
				<constraints nullable="false" />
			</column>
			<column name="UtilizedAmnt" type="decimal(18,2)" />
			<column name="ReceiptId" type="bigint" />
			<column name="Reason" type="varchar(1000)" />
			<column name="FinCcy" type="varchar(10)" />
			<column name="Status" type="char(1)" />
		</createTable>
	</changeSet>

	<changeSet id="ST#1553.15" author="saikiran.n">
		<addPrimaryKey tableName="CROSS_LOAN_KNOCKOFF_DTL_STAGE" columnNames="ID"
			constraintName="PK_CS_LN_KNFEDS_ID" />
	</changeSet>

	<changeSet id="ST#1553.17" author="saikiran.n">
		<createIndex tableName="CROSS_LOAN_KNOCKOFF_DTL_STAGE" indexName="IDX_CSLN_KNOCKOFF_EXD_STG_EID">
			<column name="ExcessID" type="bigint" />
		</createIndex>
	</changeSet>

	<changeSet id="ST#1554.1" author="sainaveen.y">
		<addColumn tableName="FINRECEIPTHEADER">
			<column name="CLOSURETYPE" type="Varchar(20)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1554.2" author="sainaveen.y">
		<addColumn tableName="FINRECEIPTHEADER_TEMP">
			<column name="CLOSURETYPE" type="Varchar(20)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1554.3" author="sainaveen.y">
		<sql>
			<![CDATA[
				UPDATE FINRECEIPTHEADER SET CLOSURETYPE = (SELECT M.CODE FROM CLOSURE_TYPES M WHERE FINRECEIPTHEADER.CLOSURETYPEID = M.ID);
				UPDATE FINRECEIPTHEADER_TEMP SET CLOSURETYPE = (SELECT M.CODE FROM CLOSURE_TYPES M WHERE FINRECEIPTHEADER_TEMP.CLOSURETYPEID = M.ID);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1554.6.1_pre" author="sainaveen.y" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1554.6.1" author="sainaveen.y">
		<createView viewName="FINRECEIPTHEADER_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.RECAGAINST,
					T2.FINID,
					T1.REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.EXTREFERENCE,
					T1.MODULE,
					T1.RECEIPTMODESTATUS,
					T1.SUBRECEIPTMODE,
					T1.RECEIPTCHANNEL,
					T1.RECEIVEDFROM,
					T1.PANNUMBER,
					T1.COLLECTIONAGENTID,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINTYPE,
					T2.FINBRANCH,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					T2.FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					T4.FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					T5.CCYDESC FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					T2.FINISACTIVE,
					T1.WAVIEDAMT,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T2.NEXTREPAYRVWDATE,
					T1.CASHIERBRANCH,
					T1.INITIATEDATE,
					T1.INSTRUCTIONUID,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T1.ACTFINRECEIPT,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE, 
					T1.TRANSACTIONREF,               
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPE,
					T1.RECADJAMT,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE
				FROM FINRECEIPTHEADER T1
				INNER JOIN FINANCEMAIN T2 ON T1.FINID = T2.FINID
				INNER JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				INNER JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				INNER JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				INNER JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#1554.6.1_post" author="sainaveen.y" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1554.7.1_pre" author="sainaveen.y" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_dview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1554.7.1" author="sainaveen.y">
		<createView viewName="FINRECEIPTHEADER_DVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.RECEIPTID,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.REMARKS,
					T1.DEPOSITBRANCH,
					T1.RECEIPTAMOUNT AMOUNT,
					T3.FINID,
					T3.FINREFERENCE,
					T4.CUSTSHRTNAME,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID FUNDINGAC,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPE,
					T1.RECADJAMT,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE
				FROM FINRECEIPTHEADER_TEMP T1
				INNER JOIN FINANCEMAIN T3 ON T1.FINID = T3.FINID
				INNER JOIN CUSTOMERS T4 ON T3.CUSTID = T4.CUSTID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH   = T12.BRANCHCODE
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				WHERE T1.RECEIPTMODE IN ('CHEQUE', 'DD') AND T1.DEPOSITPROCESS = 1
					AND T1.RECEIPTID NOT IN (SELECT RECEIPTID FROM DEPOSITCHEQUES_TEMP )
				UNION ALL
				SELECT T1.RECEIPTID,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.REMARKS,
					T1.DEPOSITBRANCH,
					T1.RECEIPTAMOUNT AMOUNT,
					T3.FINID,
					T3.FINREFERENCE,
					T4.CUSTSHRTNAME,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID FUNDINGAC,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPE,
					T1.RECADJAMT,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE
				FROM FINRECEIPTHEADER T1
				INNER JOIN FINANCEMAIN T3 ON T1.FINID = T3.FINID
				INNER JOIN CUSTOMERS T4 ON T3.CUSTID = T4.CUSTID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				WHERE NOT EXISTS (SELECT 1 FROM FINRECEIPTHEADER_TEMP 
					WHERE RECEIPTID = T1.RECEIPTID ) AND T1.RECEIPTMODE   IN ('CHEQUE', 'DD')
					AND T1.DEPOSITPROCESS = 1 AND T1.RECEIPTID NOT IN
					(SELECT RECEIPTID FROM DEPOSITCHEQUES_TEMP)
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#1554.7.1_post" author="sainaveen.y" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader_dview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1554.8.1_pre" author="sainaveen.y" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_fcdview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1554.8.1" author="sainaveen.y">
		<createView viewName="FINRECEIPTHEADER_FCDVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.RECAGAINST,
					T2.FINID,
					(CASE WHEN T1.RECAGAINST ='C' THEN T13.CUSTCIF
						ELSE T1.REFERENCE END) REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.RECEIPTMODESTATUS,
					T1.SUBRECEIPTMODE,
					T1.RECEIPTCHANNEL,
					T1.RECEIVEDFROM,
					T1.PANNUMBER,
					T1.COLLECTIONAGENTID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINTYPE,
					T2.FINBRANCH,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					T2.FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					T4.FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					T5.CCYDESC FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
					T2.SCHEDULEMETHOD,
					T2.PROFITDAYSBASIS PFTDAYSBASIS,
					T1.WAVIEDAMT,
					COALESCE(T3.CUSTID, 0) CUSTID,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T2.NEXTREPAYRVWDATE,
					T1.CASHIERBRANCH,
					T1.INITIATEDATE,
					T1.INSTRUCTIONUID,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.MODULE,
					T1.EXTREFERENCE,
					T13.CUSTCIF CUSTOMERCIF,
					T13.CUSTSHRTNAME CUSTOMERNAME,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPE,
					T1.RECADJAMT,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE
				FROM FINRECEIPTHEADER_TEMP T1
				LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.FINID = T2.FINID
				LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				UNION ALL
				SELECT T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.RECAGAINST,
					T2.FINID,
					( CASE WHEN T1.RECAGAINST ='C' THEN T13.CUSTCIF
						ELSE T1.REFERENCE END) REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.RECEIPTMODESTATUS,
					T1.SUBRECEIPTMODE,
					T1.RECEIPTCHANNEL,
					T1.RECEIVEDFROM,
					T1.PANNUMBER,
					T1.COLLECTIONAGENTID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINTYPE,
					T2.FINBRANCH,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					T2.FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					T4.FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					T5.CCYDESC FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
					T2.SCHEDULEMETHOD,
					T2.PROFITDAYSBASIS PFTDAYSBASIS,
					T1.WAVIEDAMT,
					COALESCE(T3.CUSTID, 0) CUSTID,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T2.NEXTREPAYRVWDATE,
					T1.CASHIERBRANCH,
					T1.INITIATEDATE,
					T1.INSTRUCTIONUID,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.MODULE,
					T1.EXTREFERENCE,
					T13.CUSTCIF CUSTOMERCIF,
					T13.CUSTSHRTNAME CUSTOMERNAME,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPE,
					T1.RECADJAMT,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE
				FROM FINRECEIPTHEADER T1
				LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.FINID = T2.FINID
				LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				WHERE NOT EXISTS ( SELECT 1 FROM FINRECEIPTHEADER_TEMP WHERE RECEIPTID = T1.RECEIPTID )
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#1554.8.1_post" author="sainaveen.y" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader_fcdview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1554.9.1_pre" author="sainaveen.y" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_fdview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1554.9.1" author="sainaveen.y">
		<createView viewName="FINRECEIPTHEADER_FDVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.RECAGAINST,
					T2.FINID,
					CASE WHEN T1.RECAGAINST = 'C' THEN T10.CUSTCIF
						ELSE T1.REFERENCE END REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.RECEIPTMODESTATUS,
					T1.SUBRECEIPTMODE,
					T1.RECEIPTCHANNEL,
					T1.RECEIVEDFROM,
					T1.PANNUMBER,
					T1.COLLECTIONAGENTID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					COALESCE(T2.FINTYPE,T1.FINTYPE) FINTYPE,
					T2.FINBRANCH,
					COALESCE(T3.CUSTCIF,T10.CUSTCIF) CUSTCIF,
					COALESCE(T3.CUSTSHRTNAME,T10.CUSTSHRTNAME) CUSTSHRTNAME,
					COALESCE(T2.FINCCY,T14.FINCCY) FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					COALESCE(T4.FINTYPEDESC,T14.FINTYPEDESC) FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					COALESCE(T5.CCYDESC,T15.CCYDESC) FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
					T2.SCHEDULEMETHOD,
					T2.PROFITDAYSBASIS PFTDAYSBASIS,
					T1.WAVIEDAMT,
					COALESCE(T3.CUSTID, T10.CUSTID) CUSTID,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T1.CASHIERBRANCH,
					T2.NEXTREPAYRVWDATE,
					T1.INITIATEDATE,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.MODULE,
					T1.EXTREFERENCE,
					T10.CUSTCIF CUSTOMERCIF,
					T10.CUSTSHRTNAME CUSTOMERNAME,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T11.DIVISIONCODEDESC FINDIVISIONDESC,
					T12.BRANCHDESC POSTBRANCHDESC,
					T13.BRANCHDESC CASHIERBRANCHDESC,
					T11.ENTITYCODE,
					T1.INSTRUCTIONUID,
					T1.ACTFINRECEIPT,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPE,
					T1.RECADJAMT,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE
				FROM FINRECEIPTHEADER_TEMP T1
				LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.FINID = T2.FINID
				LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN CUSTOMERS T10 ON CAST(T10.CUSTID AS VARCHAR(20)) = T1.REFERENCE
				LEFT JOIN SMTDIVISIONDETAIL T11 ON T1.FINDIVISION = T11.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.POSTBRANCH = T12.BRANCHCODE
				LEFT JOIN RMTBRANCHES T13 ON T1.CASHIERBRANCH = T13.BRANCHCODE
				LEFT JOIN RMTFINANCETYPES T14 ON T1.FINTYPE = T14.FINTYPE
				LEFT JOIN RMTCURRENCIES T15 ON T14.FINCCY= T15.CCYCODE
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#1554.9.1_post" author="sainaveen.y" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader_fdview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1554.10.1_pre" author="sainaveen.y" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_fedview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1554.10.1" author="sainaveen.y">
		<createView viewName="FINRECEIPTHEADER_FEDVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.RECAGAINST,
					T2.FINID,
					CASE WHEN T1.RECAGAINST ='C' THEN T13.CUSTCIF
						ELSE T1.REFERENCE END REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.RECEIPTMODESTATUS,
					T1.SUBRECEIPTMODE,
					T1.RECEIPTCHANNEL,
					T1.RECEIVEDFROM,
					T1.PANNUMBER,
					T1.COLLECTIONAGENTID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINBRANCH,
					COALESCE(T3.CUSTCIF, T13.CUSTCIF) CUSTCIF,
					COALESCE(T3.CUSTSHRTNAME,T13.CUSTSHRTNAME) CUSTSHRTNAME,
					T2.FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					COALESCE(T2.FINTYPE, T1.FINTYPE) FINTYPE,
					COALESCE(T4.FINTYPEDESC, T14.FINTYPEDESC) FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					T5.CCYDESC FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
					T2.SCHEDULEMETHOD,
					T2.PROFITDAYSBASIS PFTDAYSBASIS,
					T1.WAVIEDAMT,
					COALESCE(T3.CUSTID, 0) CUSTID,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T2.NEXTREPAYRVWDATE,
					T1.CASHIERBRANCH,
					T1.INITIATEDATE,
					T1.INSTRUCTIONUID,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.MODULE,
					T1.EXTREFERENCE,
					T13.CUSTCIF CUSTOMERCIF,
					T13.CUSTSHRTNAME CUSTOMERNAME,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPE,
					T1.RECADJAMT,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE
				FROM FINRECEIPTHEADER_TEMP T1
				LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.FINID = T2.FINID
				LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
				LEFT JOIN RMTFINANCETYPES T14 ON T1.FINTYPE = T14.FINTYPE
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				UNION ALL
				SELECT T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.RECAGAINST,
					T2.FINID,
					(CASE WHEN T1.RECAGAINST ='C' THEN T13.CUSTCIF
						ELSE T1.REFERENCE END) REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.RECEIPTMODESTATUS,
					T1.SUBRECEIPTMODE,
					T1.RECEIPTCHANNEL,
					T1.RECEIVEDFROM,
					T1.PANNUMBER,
					T1.COLLECTIONAGENTID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINBRANCH,
					COALESCE(T3.CUSTCIF,T13.CUSTCIF) CUSTCIF,
					COALESCE(T3.CUSTSHRTNAME,T13.CUSTSHRTNAME) CUSTSHRTNAME,
					T2.FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					COALESCE(T2.FINTYPE, T1.FINTYPE) FINTYPE,
					COALESCE(T4.FINTYPEDESC, T14.FINTYPEDESC) FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					T5.CCYDESC FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
					T2.SCHEDULEMETHOD,
					T2.PROFITDAYSBASIS PFTDAYSBASIS,
					T1.WAVIEDAMT,
					COALESCE(T3.CUSTID, 0) CUSTID,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T2.NEXTREPAYRVWDATE,
					T1.CASHIERBRANCH,
					T1.INITIATEDATE,
					T1.INSTRUCTIONUID,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.MODULE,
					T1.EXTREFERENCE,
					T13.CUSTCIF CUSTOMERCIF,
					T13.CUSTSHRTNAME CUSTOMERNAME,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPE,
					T1.RECADJAMT,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE
				FROM FINRECEIPTHEADER T1
				LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.FINID = T2.FINID
				LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
				LEFT JOIN RMTFINANCETYPES T14 ON T1.FINTYPE = T14.FINTYPE
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				WHERE NOT EXISTS ( SELECT 1 FROM FINRECEIPTHEADER_TEMP WHERE RECEIPTID = T1.RECEIPTID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#1554.10.1_post" author="sainaveen.y" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader_fedview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1554.11.1_pre" author="sainaveen.y" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1554.11.1" author="sainaveen.y">
		<createView viewName="FINRECEIPTHEADER_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.RECAGAINST,
					T2.FINID,
					T1.REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.EXTREFERENCE,
					T1.MODULE,
					T1.RECEIPTMODESTATUS,
					T1.SUBRECEIPTMODE,
					T1.RECEIPTCHANNEL,
					T1.RECEIVEDFROM,
					T1.PANNUMBER,
					T1.COLLECTIONAGENTID,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINTYPE,
					T2.FINBRANCH,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					T2.FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					T4.FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					T5.CCYDESC FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					T2.FINISACTIVE,
					T1.WAVIEDAMT,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T2.NEXTREPAYRVWDATE,
					T1.CASHIERBRANCH,
					T1.INITIATEDATE,
					T1.INSTRUCTIONUID,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T1.ACTFINRECEIPT,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPE,
				    T1.RECADJAMT,
				    T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE
				FROM FINRECEIPTHEADER_TEMP T1
				INNER JOIN FINANCEMAIN T2 ON T1.FINID = T2.FINID
				INNER JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				INNER JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				INNER JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				INNER JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#1554.11.1_post" author="sainaveen.y" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1554.12.1_pre" author="sainaveen.y" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1554.12.1" author="sainaveen.y">
		<createView viewName="FINRECEIPTHEADER_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.RECEIPTID,
				    T1.RECEIPTDATE,
				    T1.RECEIPTTYPE,
				    T1.RECAGAINST,
					T2.FINID,
				    T1.REFERENCE,
				    T1.RECEIPTPURPOSE,
				    T1.RECEIPTMODE,
				    T1.EXCESSADJUSTTO,
				    T1.ALLOCATIONTYPE,
				    T1.RECEIPTAMOUNT,
				    T1.EFFECTSCHDMETHOD,
				    T1.EXTREFERENCE,
				    T1.MODULE,
				    T1.RECEIPTMODESTATUS,
				    T1.SUBRECEIPTMODE,
				    T1.RECEIPTCHANNEL,
				    T1.RECEIVEDFROM,
				    T1.PANNUMBER,
				    T1.COLLECTIONAGENTID,
				    T9.CODE COLLECTIONAGENTCODE,
				    T9.DESCRIPTION COLLECTIONAGENTDESC,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T2.FINTYPE,
				    T2.FINBRANCH,
				    T3.CUSTCIF,
				    T3.CUSTSHRTNAME,
				    T2.FINCCY,
				    T1.REALIZATIONDATE,
				    T1.CANCELREASON,
				    T4.FINTYPEDESC,
				    T6.BRANCHDESC FINBRANCHDESC,
				    T5.CCYDESC FINCCYDESC,
				    T7.REJECTDESC CANCELREASONDESC,
				    T2.FINISACTIVE,
				    T1.WAVIEDAMT,
				    T1.TOTFEEAMOUNT,
				    T1.BOUNCEDATE,
				    T1.REMARKS,
				    T1.RCDMAINTAINSTS,
				    T1.GDRAVAILABLE,
				    T1.RELEASETYPE,
				    T1.THIRDPARTYNAME,
				    T1.THIRDPARTYMOBILENUM,
				    T1.DEPOSITPROCESS,
				    T1.DEPOSITBRANCH,
				    T1.LPIAMOUNT,
				    T1.LPPAMOUNT,
				    T1.GSTLPIAMOUNT,
				    T1.GSTLPPAMOUNT,
				    T2.PRODUCTCATEGORY,
				    T2.PROMOTIONCODE,
				    T2.NEXTREPAYRVWDATE,
				    T1.CASHIERBRANCH,
				    T1.INITIATEDATE,
				    T1.INSTRUCTIONUID,
				    T1.FINDIVISION,
				    T1.POSTBRANCH,
				    T10.DIVISIONCODEDESC FINDIVISIONDESC,
				    T11.BRANCHDESC POSTBRANCHDESC,
				    T12.BRANCHDESC CASHIERBRANCHDESC,
				    T10.ENTITYCODE,
				    T1.ACTFINRECEIPT,
					T1.REASONCODE,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPE,
				    T1.RECADJAMT,
				    T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE,
					T2.SCHEDULEMETHOD,
                    T2.PROFITDAYSBASIS  PFTDAYSBASIS
				FROM FINRECEIPTHEADER_TEMP T1
				JOIN FINANCEMAIN T2 ON T1.FINID = T2.FINID
				JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				UNION ALL
				SELECT T1.RECEIPTID,
				    T1.RECEIPTDATE,
				    T1.RECEIPTTYPE,
				    T1.RECAGAINST,
					T2.FINID,
				    T1.REFERENCE,
				    T1.RECEIPTPURPOSE,
				    T1.RECEIPTMODE,
				    T1.EXCESSADJUSTTO,
				    T1.ALLOCATIONTYPE,
				    T1.RECEIPTAMOUNT,
				    T1.EFFECTSCHDMETHOD,
				    T1.EXTREFERENCE,
				    T1.MODULE,
				    T1.RECEIPTMODESTATUS,
				    T1.SUBRECEIPTMODE,
				    T1.RECEIPTCHANNEL,
				    T1.RECEIVEDFROM,
				    T1.PANNUMBER,
				    T1.COLLECTIONAGENTID,
				    T9.CODE COLLECTIONAGENTCODE,
				    T9.DESCRIPTION COLLECTIONAGENTDESC,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T2.FINTYPE,
				    T2.FINBRANCH,
				    T3.CUSTCIF,
				    T3.CUSTSHRTNAME,
				    T2.FINCCY,
				    T1.REALIZATIONDATE,
				    T1.CANCELREASON,
				    T4.FINTYPEDESC,
				    T6.BRANCHDESC FINBRANCHDESC,
				    T5.CCYDESC FINCCYDESC,
				    T7.REJECTDESC CANCELREASONDESC,
				    T2.FINISACTIVE,
				    T1.WAVIEDAMT,
				    T1.TOTFEEAMOUNT,
				    T1.BOUNCEDATE,
				    T1.REMARKS,
				    T1.RCDMAINTAINSTS,
				    T1.GDRAVAILABLE,
				    T1.RELEASETYPE,
				    T1.THIRDPARTYNAME,
				    T1.THIRDPARTYMOBILENUM,
				    T1.DEPOSITPROCESS,
				    T1.DEPOSITBRANCH,
				    T1.LPIAMOUNT,
				    T1.LPPAMOUNT,
				    T1.GSTLPIAMOUNT,
				    T1.GSTLPPAMOUNT,
				    T2.PRODUCTCATEGORY,
				    T2.PROMOTIONCODE,
				    T2.NEXTREPAYRVWDATE,
				    T1.CASHIERBRANCH,
				    T1.INITIATEDATE,
				    T1.INSTRUCTIONUID,
				    T1.FINDIVISION,
				    T1.POSTBRANCH,
				    T10.DIVISIONCODEDESC FINDIVISIONDESC,
				    T11.BRANCHDESC POSTBRANCHDESC,
				    T12.BRANCHDESC CASHIERBRANCHDESC,
				    T10.ENTITYCODE,
				    T1.ACTFINRECEIPT,
					T1.REASONCODE,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPE,
				    T1.RECADJAMT,
				    T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE,
					T2.SCHEDULEMETHOD,
                    T2.PROFITDAYSBASIS  PFTDAYSBASIS
				FROM FINRECEIPTHEADER T1
				JOIN FINANCEMAIN T2 ON T1.FINID = T2.FINID
				JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				WHERE NOT (EXISTS ( SELECT 1 FROM FINRECEIPTHEADER_TEMP WHERE FINRECEIPTHEADER_TEMP.RECEIPTID = T1.RECEIPTID))
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#1554.12.1_post" author="sainaveen.y" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1554.13.1_pre" author="sainaveen.y" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_fcview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1554.13.1" author="sainaveen.y">
		<createView viewName="FINRECEIPTHEADER_FCVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.RECAGAINST,
					T2.FINID,
					T1.REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.RECEIPTMODESTATUS,
					T1.SUBRECEIPTMODE,
					T1.RECEIPTCHANNEL,
					T1.RECEIVEDFROM,
					T1.PANNUMBER,
					T1.COLLECTIONAGENTID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINTYPE,
					T2.FINBRANCH,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					T2.FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					T4.FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					T5.CCYDESC FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
					T2.SCHEDULEMETHOD,
					T2.PROFITDAYSBASIS PFTDAYSBASIS,
					T1.WAVIEDAMT,
					COALESCE(T3.CUSTID, 0) CUSTID,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T2.NEXTREPAYRVWDATE,
					T1.CASHIERBRANCH,
					T1.INITIATEDATE,
					T1.INSTRUCTIONUID,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.MODULE,
					T1.EXTREFERENCE,
					T13.CUSTCIF CUSTOMERCIF,
					T13.CUSTSHRTNAME CUSTOMERNAME,
					T1.ACTFINRECEIPT,
					T1.REASONCODE,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPE,
					T1.RECADJAMT,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE,
					PB.PARTNERBANKCODE
				FROM FINRECEIPTHEADER_TEMP T1
				LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.FINID = T2.FINID
				LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				LEFT JOIN PARTNERBANKS PB ON PB.PARTNERBANKID = T1.PARTNERBANKID
				UNION ALL
				SELECT
					T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.RECAGAINST,
					T2.FINID,
					T1.REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.RECEIPTMODESTATUS,
					T1.SUBRECEIPTMODE,
					T1.RECEIPTCHANNEL,
					T1.RECEIVEDFROM,
					T1.PANNUMBER,
					T1.COLLECTIONAGENTID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINTYPE,
					T2.FINBRANCH,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					T2.FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					T4.FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					T5.CCYDESC FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
					T2.SCHEDULEMETHOD,
					T2.PROFITDAYSBASIS PFTDAYSBASIS,
					T1.WAVIEDAMT,
					COALESCE(T3.CUSTID, 0) CUSTID,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T2.NEXTREPAYRVWDATE,
					T1.CASHIERBRANCH,
					T1.INITIATEDATE,
					T1.INSTRUCTIONUID,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.MODULE,
					T1.EXTREFERENCE,
					T13.CUSTCIF CUSTOMERCIF,
					T13.CUSTSHRTNAME CUSTOMERNAME,
					T1.ACTFINRECEIPT,
					T1.REASONCODE,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPE,
					T1.RECADJAMT,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE,
					PB.PARTNERBANKCODE
				FROM FINRECEIPTHEADER T1
				LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.FINID = T2.FINID
				LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				LEFT JOIN PARTNERBANKS PB ON PB.PARTNERBANKID = T1.PARTNERBANKID
				WHERE NOT EXISTS ( SELECT 1 FROM FINRECEIPTHEADER_TEMP WHERE RECEIPTID = T1.RECEIPTID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#1554.13.1_post" author="sainaveen.y" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader_fcview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1554.14.1_pre" author="sainaveen.y" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_fview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1554.14.1" author="sainaveen.y">
		<createView viewName="FINRECEIPTHEADER_FVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.ACTFINRECEIPT,
					T1.RECAGAINST,
					T2.FINID,
					T1.REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.RECEIPTMODESTATUS,
					T1.SUBRECEIPTMODE,
					T1.RECEIPTCHANNEL,
					T1.RECEIVEDFROM,
					T1.PANNUMBER,
					T1.COLLECTIONAGENTID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					COALESCE(T1.FINTYPE, T2.FINTYPE) FINTYPE,
					T2.FINBRANCH,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					COALESCE(T2.FINCCY, T15.FINCCY) FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					COALESCE(T4.FINTYPEDESC, T15.FINTYPEDESC) FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					COALESCE(T5.CCYDESC, T14.CCYDESC) FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
					T2.SCHEDULEMETHOD,
					T2.PROFITDAYSBASIS PFTDAYSBASIS,
					T1.WAVIEDAMT,
					COALESCE(T3.CUSTID, T10.CUSTID, 0) CUSTID,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T1.CASHIERBRANCH,
					T2.NEXTREPAYRVWDATE,
					T1.INITIATEDATE,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.MODULE,
					T1.INSTRUCTIONUID,
					T1.EXTREFERENCE,
					T10.CUSTCIF CUSTOMERCIF,
					T10.CUSTSHRTNAME CUSTOMERNAME,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T11.DIVISIONCODEDESC FINDIVISIONDESC,
					T12.BRANCHDESC POSTBRANCHDESC,
					T13.BRANCHDESC CASHIERBRANCHDESC,
					T11.ENTITYCODE,
					COALESCE(T3.CUSTBASECCY,T10.CUSTBASECCY)CUSTBASECCY,
					T1.REASONCODE,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T2.TDSAPPLICABLE FINTDSAPPLICABLE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPE,
				    T1.RECADJAMT,
				    T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE,
					PB.PARTNERBANKCODE
				FROM FINRECEIPTHEADER_TEMP T1
				LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.FINID = T2.FINID
				LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN Customers T10 ON CAST(T10.CustId AS VARCHAR(20)) = T1.REFERENCE
				LEFT JOIN SMTDIVISIONDETAIL T11 ON T1.FINDIVISION = T11.DIVISIONCODE
				LEFT JOIN RMTBranches T12 ON T1.PostBranch = T12.BranchCode
				LEFT JOIN RMTBranches T13 ON T1.CASHIERBRANCH = T13.BranchCode
				LEFT JOIN RMTFINANCETYPES T15 ON T1.FINTYPE = T15.FINTYPE
				LEFT JOIN RMTCURRENCIES T14 ON T14.CCYCODE= T3.CUSTBASECCY
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				LEFT JOIN PARTNERBANKS PB ON PB.PARTNERBANKID = T1.PARTNERBANKID
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#1554.14.1_post" author="sainaveen.y" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader_fview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1554.15.1_pre" author="sainaveen.y" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_feview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1554.15.1" author="sainaveen.y">
		<createView viewName="FINRECEIPTHEADER_FEVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.RECAGAINST,
					T2.FINID,
					T1.REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.RECEIPTMODESTATUS,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINTYPE,
					T2.FINBRANCH,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					T2.FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					T4.FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					T5.CCYDESC FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
					T2.SCHEDULEMETHOD,
					T2.PROFITDAYSBASIS PFTDAYSBASIS,
					T1.WAVIEDAMT,
					COALESCE(T3.CUSTID, 0) CUSTID,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T2.NEXTREPAYRVWDATE,
					T1.CASHIERBRANCH,
					T1.INITIATEDATE,
					T4.FINDIVISION LOVDESCFINDIVISION,
					T2.BUSINESSVERTICAL,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.INSTRUCTIONUID,
					T1.MODULE,
					T1.EXTREFERENCE,
					T1.COLLECTIONAGENTID,
					T1.PANNUMBER,
					T1.RECEIVEDFROM,
					T1.RECEIPTCHANNEL,
					T1.SUBRECEIPTMODE,
					T13.CUSTCIF CUSTOMERCIF,
					T13.CUSTSHRTNAME CUSTOMERNAME,
					T1.ACTFINRECEIPT,
					T1.REASONCODE,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPE,
				    T1.RECADJAMT,
				    T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE,
					PB.PARTNERBANKCODE
				FROM FINRECEIPTHEADER_TEMP T1
				LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.FINID = T2.FINID
				LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				LEFT JOIN PARTNERBANKS PB ON PB.PARTNERBANKID = T1.PARTNERBANKID
				UNION ALL
				SELECT T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.RECAGAINST,
					T2.FINID,
					T1.REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.RECEIPTMODESTATUS,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINTYPE,
					T2.FINBRANCH,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					T2.FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					T4.FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					T5.CCYDESC FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
					T2.SCHEDULEMETHOD,
					T2.PROFITDAYSBASIS PFTDAYSBASIS,
					T1.WAVIEDAMT,
					COALESCE(T3.CUSTID, 0) CUSTID,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T2.NEXTREPAYRVWDATE,
					T1.CASHIERBRANCH,
					T1.INITIATEDATE,
					T4.FINDIVISION LOVDESCFINDIVISION,
					T2.BUSINESSVERTICAL,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.INSTRUCTIONUID,
					T1.MODULE,
					T1.EXTREFERENCE,
					T1.COLLECTIONAGENTID,
					T1.PANNUMBER,
					T1.RECEIVEDFROM,
					T1.RECEIPTCHANNEL,
					T1.SUBRECEIPTMODE,
					T13.CUSTCIF CUSTOMERCIF,
					T13.CUSTSHRTNAME CUSTOMERNAME,
					T1.ACTFINRECEIPT,
					T1.REASONCODE,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPE,
				    T1.RECADJAMT,
				    T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE,
					PB.PARTNERBANKCODE
				FROM FINRECEIPTHEADER T1
				LEFT JOIN (SELECT FINID, FINREFERENCE, FINBRANCH, FINTYPE
							, FINCCY, SCHEDULEMETHOD, PROFITDAYSBASIS, FINISACTIVE
							, CUSTID, PRODUCTCATEGORY, PROMOTIONCODE, NEXTREPAYRVWDATE
							, BUSINESSVERTICAL
						FROM FINANCEMAIN_TEMP
						UNION
						SELECT FINID, FINREFERENCE, FINBRANCH, FINTYPE, FINCCY
							, SCHEDULEMETHOD, PROFITDAYSBASIS, FINISACTIVE
							, CUSTID, PRODUCTCATEGORY, PROMOTIONCODE, NEXTREPAYRVWDATE
							, BUSINESSVERTICAL
						FROM FINANCEMAIN ) T2 ON T1.FINID = T2.FINID
				LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				LEFT JOIN PARTNERBANKS PB ON PB.PARTNERBANKID = T1.PARTNERBANKID
				WHERE NOT EXISTS (SELECT 1 FROM FINRECEIPTHEADER_TEMP WHERE RECEIPTID = T1.RECEIPTID )
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#1554.15.1_post" author="sainaveen.y" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader_feview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1554.4.1" author="sainaveen.y">
		<dropIndex tableName="FINRECEIPTHEADER" indexName="IDX_FINRCPHDR_CLSRTYPID" />
	</changeSet>

	<changeSet id="ST#1554.4.0" author="sainaveen.y">
		<dropForeignKeyConstraint baseTableName="FINRECEIPTHEADER"
			constraintName="FK_FinReceiptHeader_ClsrTypId" />
	</changeSet>

	<changeSet id="ST#1554.4_pre" author="sainaveen.y" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1554.4" author="sainaveen.y">
		<dropColumn tableName="FINRECEIPTHEADER" columnName="CLOSURETYPEID" />
	</changeSet>

	<changeSet id="ST#1554.4_post" author="sainaveen.y" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1554.5.1" author="sainaveen.y">
		<dropIndex tableName="FINRECEIPTHEADER_TEMP" indexName="IDX_FINRCPHDR_T_CLSRTYPID" />
	</changeSet>

	<changeSet id="ST#1554.5.0" author="sainaveen.y">
		<dropForeignKeyConstraint baseTableName="FINRECEIPTHEADER_TEMP"
			constraintName="FK_FRH_Temp_ClsrTypId" />
	</changeSet>

	<changeSet id="ST#1554.5_pre" author="sainaveen.y" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_temp');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1554.5" author="sainaveen.y">
		<dropColumn tableName="FINRECEIPTHEADER_TEMP" columnName="CLOSURETYPEID" />
	</changeSet>

	<changeSet id="ST#1554.5_post" author="sainaveen.y" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader_temp');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1554.6_pre" author="sainaveen.y" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1554.6" author="sainaveen.y">
		<createView viewName="FINRECEIPTHEADER_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.RECAGAINST,
					T2.FINID,
					T1.REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.EXTREFERENCE,
					T1.MODULE,
					T1.RECEIPTMODESTATUS,
					T1.SUBRECEIPTMODE,
					T1.RECEIPTCHANNEL,
					T1.RECEIVEDFROM,
					T1.PANNUMBER,
					T1.COLLECTIONAGENTID,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINTYPE,
					T2.FINBRANCH,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					T2.FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					T4.FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					T5.CCYDESC FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					T2.FINISACTIVE,
					T1.WAVIEDAMT,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T2.NEXTREPAYRVWDATE,
					T1.CASHIERBRANCH,
					T1.INITIATEDATE,
					T1.INSTRUCTIONUID,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T1.ACTFINRECEIPT,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE, 
					T1.TRANSACTIONREF,               
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPE,
					T1.RECADJAMT,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE
				FROM FINRECEIPTHEADER T1
				INNER JOIN FINANCEMAIN T2 ON T1.FINID = T2.FINID
				INNER JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				INNER JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				INNER JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				INNER JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#1554.6_post" author="sainaveen.y" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1554.7_pre" author="sainaveen.y" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_dview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1554.7" author="sainaveen.y">
		<createView viewName="FINRECEIPTHEADER_DVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.RECEIPTID,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.REMARKS,
					T1.DEPOSITBRANCH,
					T1.RECEIPTAMOUNT AMOUNT,
					T3.FINID,
					T3.FINREFERENCE,
					T4.CUSTSHRTNAME,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID FUNDINGAC,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPE,
					T1.RECADJAMT,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE
				FROM FINRECEIPTHEADER_TEMP T1
				INNER JOIN FINANCEMAIN T3 ON T1.FINID = T3.FINID
				INNER JOIN CUSTOMERS T4 ON T3.CUSTID = T4.CUSTID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH   = T12.BRANCHCODE
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				WHERE T1.RECEIPTMODE IN ('CHEQUE', 'DD') AND T1.DEPOSITPROCESS = 1
					AND T1.RECEIPTID NOT IN (SELECT RECEIPTID FROM DEPOSITCHEQUES_TEMP )
				UNION ALL
				SELECT T1.RECEIPTID,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.REMARKS,
					T1.DEPOSITBRANCH,
					T1.RECEIPTAMOUNT AMOUNT,
					T3.FINID,
					T3.FINREFERENCE,
					T4.CUSTSHRTNAME,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID FUNDINGAC,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPE,
					T1.RECADJAMT,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE
				FROM FINRECEIPTHEADER T1
				INNER JOIN FINANCEMAIN T3 ON T1.FINID = T3.FINID
				INNER JOIN CUSTOMERS T4 ON T3.CUSTID = T4.CUSTID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				WHERE NOT EXISTS (SELECT 1 FROM FINRECEIPTHEADER_TEMP 
					WHERE RECEIPTID = T1.RECEIPTID ) AND T1.RECEIPTMODE   IN ('CHEQUE', 'DD')
					AND T1.DEPOSITPROCESS = 1 AND T1.RECEIPTID NOT IN
					(SELECT RECEIPTID FROM DEPOSITCHEQUES_TEMP)
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#1554.7_post" author="sainaveen.y" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader_dview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1554.8_pre" author="sainaveen.y" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_fcdview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1554.8" author="sainaveen.y">
		<createView viewName="FINRECEIPTHEADER_FCDVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.RECAGAINST,
					T2.FINID,
					(CASE WHEN T1.RECAGAINST ='C' THEN T13.CUSTCIF
						ELSE T1.REFERENCE END) REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.RECEIPTMODESTATUS,
					T1.SUBRECEIPTMODE,
					T1.RECEIPTCHANNEL,
					T1.RECEIVEDFROM,
					T1.PANNUMBER,
					T1.COLLECTIONAGENTID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINTYPE,
					T2.FINBRANCH,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					T2.FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					T4.FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					T5.CCYDESC FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
					T2.SCHEDULEMETHOD,
					T2.PROFITDAYSBASIS PFTDAYSBASIS,
					T1.WAVIEDAMT,
					COALESCE(T3.CUSTID, 0) CUSTID,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T2.NEXTREPAYRVWDATE,
					T1.CASHIERBRANCH,
					T1.INITIATEDATE,
					T1.INSTRUCTIONUID,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.MODULE,
					T1.EXTREFERENCE,
					T13.CUSTCIF CUSTOMERCIF,
					T13.CUSTSHRTNAME CUSTOMERNAME,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPE,
					T1.RECADJAMT,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE
				FROM FINRECEIPTHEADER_TEMP T1
				LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.FINID = T2.FINID
				LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				UNION ALL
				SELECT T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.RECAGAINST,
					T2.FINID,
					( CASE WHEN T1.RECAGAINST ='C' THEN T13.CUSTCIF
						ELSE T1.REFERENCE END) REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.RECEIPTMODESTATUS,
					T1.SUBRECEIPTMODE,
					T1.RECEIPTCHANNEL,
					T1.RECEIVEDFROM,
					T1.PANNUMBER,
					T1.COLLECTIONAGENTID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINTYPE,
					T2.FINBRANCH,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					T2.FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					T4.FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					T5.CCYDESC FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
					T2.SCHEDULEMETHOD,
					T2.PROFITDAYSBASIS PFTDAYSBASIS,
					T1.WAVIEDAMT,
					COALESCE(T3.CUSTID, 0) CUSTID,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T2.NEXTREPAYRVWDATE,
					T1.CASHIERBRANCH,
					T1.INITIATEDATE,
					T1.INSTRUCTIONUID,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.MODULE,
					T1.EXTREFERENCE,
					T13.CUSTCIF CUSTOMERCIF,
					T13.CUSTSHRTNAME CUSTOMERNAME,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPE,
					T1.RECADJAMT,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE
				FROM FINRECEIPTHEADER T1
				LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.FINID = T2.FINID
				LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				WHERE NOT EXISTS ( SELECT 1 FROM FINRECEIPTHEADER_TEMP WHERE RECEIPTID = T1.RECEIPTID )
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#1554.8_post" author="sainaveen.y" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader_fcdview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1554.9_pre" author="sainaveen.y" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_fdview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1554.9" author="sainaveen.y">
		<createView viewName="FINRECEIPTHEADER_FDVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.RECAGAINST,
					T2.FINID,
					CASE WHEN T1.RECAGAINST = 'C' THEN T10.CUSTCIF
						ELSE T1.REFERENCE END REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.RECEIPTMODESTATUS,
					T1.SUBRECEIPTMODE,
					T1.RECEIPTCHANNEL,
					T1.RECEIVEDFROM,
					T1.PANNUMBER,
					T1.COLLECTIONAGENTID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					COALESCE(T2.FINTYPE,T1.FINTYPE) FINTYPE,
					T2.FINBRANCH,
					COALESCE(T3.CUSTCIF,T10.CUSTCIF) CUSTCIF,
					COALESCE(T3.CUSTSHRTNAME,T10.CUSTSHRTNAME) CUSTSHRTNAME,
					COALESCE(T2.FINCCY,T14.FINCCY) FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					COALESCE(T4.FINTYPEDESC,T14.FINTYPEDESC) FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					COALESCE(T5.CCYDESC,T15.CCYDESC) FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
					T2.SCHEDULEMETHOD,
					T2.PROFITDAYSBASIS PFTDAYSBASIS,
					T1.WAVIEDAMT,
					COALESCE(T3.CUSTID, T10.CUSTID) CUSTID,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T1.CASHIERBRANCH,
					T2.NEXTREPAYRVWDATE,
					T1.INITIATEDATE,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.MODULE,
					T1.EXTREFERENCE,
					T10.CUSTCIF CUSTOMERCIF,
					T10.CUSTSHRTNAME CUSTOMERNAME,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T11.DIVISIONCODEDESC FINDIVISIONDESC,
					T12.BRANCHDESC POSTBRANCHDESC,
					T13.BRANCHDESC CASHIERBRANCHDESC,
					T11.ENTITYCODE,
					T1.INSTRUCTIONUID,
					T1.ACTFINRECEIPT,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPE,
					T1.RECADJAMT,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE
				FROM FINRECEIPTHEADER_TEMP T1
				LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.FINID = T2.FINID
				LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN CUSTOMERS T10 ON CAST(T10.CUSTID AS VARCHAR(20)) = T1.REFERENCE
				LEFT JOIN SMTDIVISIONDETAIL T11 ON T1.FINDIVISION = T11.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.POSTBRANCH = T12.BRANCHCODE
				LEFT JOIN RMTBRANCHES T13 ON T1.CASHIERBRANCH = T13.BRANCHCODE
				LEFT JOIN RMTFINANCETYPES T14 ON T1.FINTYPE = T14.FINTYPE
				LEFT JOIN RMTCURRENCIES T15 ON T14.FINCCY= T15.CCYCODE
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#1554.9_post" author="sainaveen.y" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader_fdview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1554.10_pre" author="sainaveen.y" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_fedview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1554.10" author="sainaveen.y">
		<createView viewName="FINRECEIPTHEADER_FEDVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.RECAGAINST,
					T2.FINID,
					CASE WHEN T1.RECAGAINST ='C' THEN T13.CUSTCIF
						ELSE T1.REFERENCE END REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.RECEIPTMODESTATUS,
					T1.SUBRECEIPTMODE,
					T1.RECEIPTCHANNEL,
					T1.RECEIVEDFROM,
					T1.PANNUMBER,
					T1.COLLECTIONAGENTID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINBRANCH,
					COALESCE(T3.CUSTCIF, T13.CUSTCIF) CUSTCIF,
					COALESCE(T3.CUSTSHRTNAME,T13.CUSTSHRTNAME) CUSTSHRTNAME,
					T2.FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					COALESCE(T2.FINTYPE, T1.FINTYPE) FINTYPE,
					COALESCE(T4.FINTYPEDESC, T14.FINTYPEDESC) FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					T5.CCYDESC FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
					T2.SCHEDULEMETHOD,
					T2.PROFITDAYSBASIS PFTDAYSBASIS,
					T1.WAVIEDAMT,
					COALESCE(T3.CUSTID, 0) CUSTID,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T2.NEXTREPAYRVWDATE,
					T1.CASHIERBRANCH,
					T1.INITIATEDATE,
					T1.INSTRUCTIONUID,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.MODULE,
					T1.EXTREFERENCE,
					T13.CUSTCIF CUSTOMERCIF,
					T13.CUSTSHRTNAME CUSTOMERNAME,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPE,
					T1.RECADJAMT,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE
				FROM FINRECEIPTHEADER_TEMP T1
				LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.FINID = T2.FINID
				LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
				LEFT JOIN RMTFINANCETYPES T14 ON T1.FINTYPE = T14.FINTYPE
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				UNION ALL
				SELECT T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.RECAGAINST,
					T2.FINID,
					(CASE WHEN T1.RECAGAINST ='C' THEN T13.CUSTCIF
						ELSE T1.REFERENCE END) REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.RECEIPTMODESTATUS,
					T1.SUBRECEIPTMODE,
					T1.RECEIPTCHANNEL,
					T1.RECEIVEDFROM,
					T1.PANNUMBER,
					T1.COLLECTIONAGENTID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINBRANCH,
					COALESCE(T3.CUSTCIF,T13.CUSTCIF) CUSTCIF,
					COALESCE(T3.CUSTSHRTNAME,T13.CUSTSHRTNAME) CUSTSHRTNAME,
					T2.FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					COALESCE(T2.FINTYPE, T1.FINTYPE) FINTYPE,
					COALESCE(T4.FINTYPEDESC, T14.FINTYPEDESC) FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					T5.CCYDESC FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
					T2.SCHEDULEMETHOD,
					T2.PROFITDAYSBASIS PFTDAYSBASIS,
					T1.WAVIEDAMT,
					COALESCE(T3.CUSTID, 0) CUSTID,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T2.NEXTREPAYRVWDATE,
					T1.CASHIERBRANCH,
					T1.INITIATEDATE,
					T1.INSTRUCTIONUID,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.MODULE,
					T1.EXTREFERENCE,
					T13.CUSTCIF CUSTOMERCIF,
					T13.CUSTSHRTNAME CUSTOMERNAME,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPE,
					T1.RECADJAMT,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE
				FROM FINRECEIPTHEADER T1
				LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.FINID = T2.FINID
				LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
				LEFT JOIN RMTFINANCETYPES T14 ON T1.FINTYPE = T14.FINTYPE
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				WHERE NOT EXISTS ( SELECT 1 FROM FINRECEIPTHEADER_TEMP WHERE RECEIPTID = T1.RECEIPTID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#1554.10_post" author="sainaveen.y" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader_fedview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1554.11_pre" author="sainaveen.y" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1554.11" author="sainaveen.y">
		<createView viewName="FINRECEIPTHEADER_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.RECAGAINST,
					T2.FINID,
					T1.REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.EXTREFERENCE,
					T1.MODULE,
					T1.RECEIPTMODESTATUS,
					T1.SUBRECEIPTMODE,
					T1.RECEIPTCHANNEL,
					T1.RECEIVEDFROM,
					T1.PANNUMBER,
					T1.COLLECTIONAGENTID,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINTYPE,
					T2.FINBRANCH,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					T2.FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					T4.FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					T5.CCYDESC FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					T2.FINISACTIVE,
					T1.WAVIEDAMT,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T2.NEXTREPAYRVWDATE,
					T1.CASHIERBRANCH,
					T1.INITIATEDATE,
					T1.INSTRUCTIONUID,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T1.ACTFINRECEIPT,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPE,
				    T1.RECADJAMT,
				    T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE
				FROM FINRECEIPTHEADER_TEMP T1
				INNER JOIN FINANCEMAIN T2 ON T1.FINID = T2.FINID
				INNER JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				INNER JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				INNER JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				INNER JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#1554.11_post" author="sainaveen.y" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1554.12_pre" author="sainaveen.y" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1554.12" author="sainaveen.y">
		<createView viewName="FINRECEIPTHEADER_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.RECEIPTID,
				    T1.RECEIPTDATE,
				    T1.RECEIPTTYPE,
				    T1.RECAGAINST,
					T2.FINID,
				    T1.REFERENCE,
				    T1.RECEIPTPURPOSE,
				    T1.RECEIPTMODE,
				    T1.EXCESSADJUSTTO,
				    T1.ALLOCATIONTYPE,
				    T1.RECEIPTAMOUNT,
				    T1.EFFECTSCHDMETHOD,
				    T1.EXTREFERENCE,
				    T1.MODULE,
				    T1.RECEIPTMODESTATUS,
				    T1.SUBRECEIPTMODE,
				    T1.RECEIPTCHANNEL,
				    T1.RECEIVEDFROM,
				    T1.PANNUMBER,
				    T1.COLLECTIONAGENTID,
				    T9.CODE COLLECTIONAGENTCODE,
				    T9.DESCRIPTION COLLECTIONAGENTDESC,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T2.FINTYPE,
				    T2.FINBRANCH,
				    T3.CUSTCIF,
				    T3.CUSTSHRTNAME,
				    T2.FINCCY,
				    T1.REALIZATIONDATE,
				    T1.CANCELREASON,
				    T4.FINTYPEDESC,
				    T6.BRANCHDESC FINBRANCHDESC,
				    T5.CCYDESC FINCCYDESC,
				    T7.REJECTDESC CANCELREASONDESC,
				    T2.FINISACTIVE,
				    T1.WAVIEDAMT,
				    T1.TOTFEEAMOUNT,
				    T1.BOUNCEDATE,
				    T1.REMARKS,
				    T1.RCDMAINTAINSTS,
				    T1.GDRAVAILABLE,
				    T1.RELEASETYPE,
				    T1.THIRDPARTYNAME,
				    T1.THIRDPARTYMOBILENUM,
				    T1.DEPOSITPROCESS,
				    T1.DEPOSITBRANCH,
				    T1.LPIAMOUNT,
				    T1.LPPAMOUNT,
				    T1.GSTLPIAMOUNT,
				    T1.GSTLPPAMOUNT,
				    T2.PRODUCTCATEGORY,
				    T2.PROMOTIONCODE,
				    T2.NEXTREPAYRVWDATE,
				    T1.CASHIERBRANCH,
				    T1.INITIATEDATE,
				    T1.INSTRUCTIONUID,
				    T1.FINDIVISION,
				    T1.POSTBRANCH,
				    T10.DIVISIONCODEDESC FINDIVISIONDESC,
				    T11.BRANCHDESC POSTBRANCHDESC,
				    T12.BRANCHDESC CASHIERBRANCHDESC,
				    T10.ENTITYCODE,
				    T1.ACTFINRECEIPT,
					T1.REASONCODE,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPE,
				    T1.RECADJAMT,
				    T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE,
					T2.SCHEDULEMETHOD,
                    T2.PROFITDAYSBASIS  PFTDAYSBASIS
				FROM FINRECEIPTHEADER_TEMP T1
				JOIN FINANCEMAIN T2 ON T1.FINID = T2.FINID
				JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				UNION ALL
				SELECT T1.RECEIPTID,
				    T1.RECEIPTDATE,
				    T1.RECEIPTTYPE,
				    T1.RECAGAINST,
					T2.FINID,
				    T1.REFERENCE,
				    T1.RECEIPTPURPOSE,
				    T1.RECEIPTMODE,
				    T1.EXCESSADJUSTTO,
				    T1.ALLOCATIONTYPE,
				    T1.RECEIPTAMOUNT,
				    T1.EFFECTSCHDMETHOD,
				    T1.EXTREFERENCE,
				    T1.MODULE,
				    T1.RECEIPTMODESTATUS,
				    T1.SUBRECEIPTMODE,
				    T1.RECEIPTCHANNEL,
				    T1.RECEIVEDFROM,
				    T1.PANNUMBER,
				    T1.COLLECTIONAGENTID,
				    T9.CODE COLLECTIONAGENTCODE,
				    T9.DESCRIPTION COLLECTIONAGENTDESC,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T2.FINTYPE,
				    T2.FINBRANCH,
				    T3.CUSTCIF,
				    T3.CUSTSHRTNAME,
				    T2.FINCCY,
				    T1.REALIZATIONDATE,
				    T1.CANCELREASON,
				    T4.FINTYPEDESC,
				    T6.BRANCHDESC FINBRANCHDESC,
				    T5.CCYDESC FINCCYDESC,
				    T7.REJECTDESC CANCELREASONDESC,
				    T2.FINISACTIVE,
				    T1.WAVIEDAMT,
				    T1.TOTFEEAMOUNT,
				    T1.BOUNCEDATE,
				    T1.REMARKS,
				    T1.RCDMAINTAINSTS,
				    T1.GDRAVAILABLE,
				    T1.RELEASETYPE,
				    T1.THIRDPARTYNAME,
				    T1.THIRDPARTYMOBILENUM,
				    T1.DEPOSITPROCESS,
				    T1.DEPOSITBRANCH,
				    T1.LPIAMOUNT,
				    T1.LPPAMOUNT,
				    T1.GSTLPIAMOUNT,
				    T1.GSTLPPAMOUNT,
				    T2.PRODUCTCATEGORY,
				    T2.PROMOTIONCODE,
				    T2.NEXTREPAYRVWDATE,
				    T1.CASHIERBRANCH,
				    T1.INITIATEDATE,
				    T1.INSTRUCTIONUID,
				    T1.FINDIVISION,
				    T1.POSTBRANCH,
				    T10.DIVISIONCODEDESC FINDIVISIONDESC,
				    T11.BRANCHDESC POSTBRANCHDESC,
				    T12.BRANCHDESC CASHIERBRANCHDESC,
				    T10.ENTITYCODE,
				    T1.ACTFINRECEIPT,
					T1.REASONCODE,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPE,
				    T1.RECADJAMT,
				    T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE,
					T2.SCHEDULEMETHOD,
                    T2.PROFITDAYSBASIS  PFTDAYSBASIS
				FROM FINRECEIPTHEADER T1
				JOIN FINANCEMAIN T2 ON T1.FINID = T2.FINID
				JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				WHERE NOT (EXISTS ( SELECT 1 FROM FINRECEIPTHEADER_TEMP WHERE FINRECEIPTHEADER_TEMP.RECEIPTID = T1.RECEIPTID))
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#1554.12_post" author="sainaveen.y" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1554.13_pre" author="sainaveen.y" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_fcview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1554.13" author="sainaveen.y">
		<createView viewName="FINRECEIPTHEADER_FCVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.RECAGAINST,
					T2.FINID,
					T1.REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.RECEIPTMODESTATUS,
					T1.SUBRECEIPTMODE,
					T1.RECEIPTCHANNEL,
					T1.RECEIVEDFROM,
					T1.PANNUMBER,
					T1.COLLECTIONAGENTID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINTYPE,
					T2.FINBRANCH,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					T2.FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					T4.FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					T5.CCYDESC FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
					T2.SCHEDULEMETHOD,
					T2.PROFITDAYSBASIS PFTDAYSBASIS,
					T1.WAVIEDAMT,
					COALESCE(T3.CUSTID, 0) CUSTID,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T2.NEXTREPAYRVWDATE,
					T1.CASHIERBRANCH,
					T1.INITIATEDATE,
					T1.INSTRUCTIONUID,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.MODULE,
					T1.EXTREFERENCE,
					T13.CUSTCIF CUSTOMERCIF,
					T13.CUSTSHRTNAME CUSTOMERNAME,
					T1.ACTFINRECEIPT,
					T1.REASONCODE,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPE,
					T1.RECADJAMT,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE,
					PB.PARTNERBANKCODE
				FROM FINRECEIPTHEADER_TEMP T1
				LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.FINID = T2.FINID
				LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				LEFT JOIN PARTNERBANKS PB ON PB.PARTNERBANKID = T1.PARTNERBANKID
				UNION ALL
				SELECT
					T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.RECAGAINST,
					T2.FINID,
					T1.REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.RECEIPTMODESTATUS,
					T1.SUBRECEIPTMODE,
					T1.RECEIPTCHANNEL,
					T1.RECEIVEDFROM,
					T1.PANNUMBER,
					T1.COLLECTIONAGENTID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINTYPE,
					T2.FINBRANCH,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					T2.FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					T4.FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					T5.CCYDESC FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
					T2.SCHEDULEMETHOD,
					T2.PROFITDAYSBASIS PFTDAYSBASIS,
					T1.WAVIEDAMT,
					COALESCE(T3.CUSTID, 0) CUSTID,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T2.NEXTREPAYRVWDATE,
					T1.CASHIERBRANCH,
					T1.INITIATEDATE,
					T1.INSTRUCTIONUID,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.MODULE,
					T1.EXTREFERENCE,
					T13.CUSTCIF CUSTOMERCIF,
					T13.CUSTSHRTNAME CUSTOMERNAME,
					T1.ACTFINRECEIPT,
					T1.REASONCODE,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPE,
					T1.RECADJAMT,
					T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE,
					PB.PARTNERBANKCODE
				FROM FINRECEIPTHEADER T1
				LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.FINID = T2.FINID
				LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				LEFT JOIN PARTNERBANKS PB ON PB.PARTNERBANKID = T1.PARTNERBANKID
				WHERE NOT EXISTS ( SELECT 1 FROM FINRECEIPTHEADER_TEMP WHERE RECEIPTID = T1.RECEIPTID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#1554.13_post" author="sainaveen.y" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader_fcview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1554.14_pre" author="sainaveen.y" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_fview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1554.14" author="sainaveen.y">
		<createView viewName="FINRECEIPTHEADER_FVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.ACTFINRECEIPT,
					T1.RECAGAINST,
					T2.FINID,
					T1.REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.RECEIPTMODESTATUS,
					T1.SUBRECEIPTMODE,
					T1.RECEIPTCHANNEL,
					T1.RECEIVEDFROM,
					T1.PANNUMBER,
					T1.COLLECTIONAGENTID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					COALESCE(T1.FINTYPE, T2.FINTYPE) FINTYPE,
					T2.FINBRANCH,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					COALESCE(T2.FINCCY, T15.FINCCY) FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					COALESCE(T4.FINTYPEDESC, T15.FINTYPEDESC) FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					COALESCE(T5.CCYDESC, T14.CCYDESC) FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
					T2.SCHEDULEMETHOD,
					T2.PROFITDAYSBASIS PFTDAYSBASIS,
					T1.WAVIEDAMT,
					COALESCE(T3.CUSTID, T10.CUSTID, 0) CUSTID,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T1.CASHIERBRANCH,
					T2.NEXTREPAYRVWDATE,
					T1.INITIATEDATE,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.MODULE,
					T1.INSTRUCTIONUID,
					T1.EXTREFERENCE,
					T10.CUSTCIF CUSTOMERCIF,
					T10.CUSTSHRTNAME CUSTOMERNAME,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T11.DIVISIONCODEDESC FINDIVISIONDESC,
					T12.BRANCHDESC POSTBRANCHDESC,
					T13.BRANCHDESC CASHIERBRANCHDESC,
					T11.ENTITYCODE,
					COALESCE(T3.CUSTBASECCY,T10.CUSTBASECCY)CUSTBASECCY,
					T1.REASONCODE,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T2.TDSAPPLICABLE FINTDSAPPLICABLE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPE,
				    T1.RECADJAMT,
				    T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE,
					PB.PARTNERBANKCODE
				FROM FINRECEIPTHEADER_TEMP T1
				LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.FINID = T2.FINID
				LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN Customers T10 ON CAST(T10.CustId AS VARCHAR(20)) = T1.REFERENCE
				LEFT JOIN SMTDIVISIONDETAIL T11 ON T1.FINDIVISION = T11.DIVISIONCODE
				LEFT JOIN RMTBranches T12 ON T1.PostBranch = T12.BranchCode
				LEFT JOIN RMTBranches T13 ON T1.CASHIERBRANCH = T13.BranchCode
				LEFT JOIN RMTFINANCETYPES T15 ON T1.FINTYPE = T15.FINTYPE
				LEFT JOIN RMTCURRENCIES T14 ON T14.CCYCODE= T3.CUSTBASECCY
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				LEFT JOIN PARTNERBANKS PB ON PB.PARTNERBANKID = T1.PARTNERBANKID
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#1554.14_post" author="sainaveen.y" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader_fview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1554.15_pre" author="sainaveen.y" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_feview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1554.15" author="sainaveen.y">
		<createView viewName="FINRECEIPTHEADER_FEVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.RECAGAINST,
					T2.FINID,
					T1.REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.RECEIPTMODESTATUS,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINTYPE,
					T2.FINBRANCH,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					T2.FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					T4.FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					T5.CCYDESC FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
					T2.SCHEDULEMETHOD,
					T2.PROFITDAYSBASIS PFTDAYSBASIS,
					T1.WAVIEDAMT,
					COALESCE(T3.CUSTID, 0) CUSTID,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T2.NEXTREPAYRVWDATE,
					T1.CASHIERBRANCH,
					T1.INITIATEDATE,
					T4.FINDIVISION LOVDESCFINDIVISION,
					T2.BUSINESSVERTICAL,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.INSTRUCTIONUID,
					T1.MODULE,
					T1.EXTREFERENCE,
					T1.COLLECTIONAGENTID,
					T1.PANNUMBER,
					T1.RECEIVEDFROM,
					T1.RECEIPTCHANNEL,
					T1.SUBRECEIPTMODE,
					T13.CUSTCIF CUSTOMERCIF,
					T13.CUSTSHRTNAME CUSTOMERNAME,
					T1.ACTFINRECEIPT,
					T1.REASONCODE,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPE,
				    T1.RECADJAMT,
				    T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE,
					PB.PARTNERBANKCODE
				FROM FINRECEIPTHEADER_TEMP T1
				LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.FINID = T2.FINID
				LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				LEFT JOIN PARTNERBANKS PB ON PB.PARTNERBANKID = T1.PARTNERBANKID
				UNION ALL
				SELECT T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.RECAGAINST,
					T2.FINID,
					T1.REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.RECEIPTMODESTATUS,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINTYPE,
					T2.FINBRANCH,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					T2.FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					T4.FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					T5.CCYDESC FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
					T2.SCHEDULEMETHOD,
					T2.PROFITDAYSBASIS PFTDAYSBASIS,
					T1.WAVIEDAMT,
					COALESCE(T3.CUSTID, 0) CUSTID,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					T2.NEXTREPAYRVWDATE,
					T1.CASHIERBRANCH,
					T1.INITIATEDATE,
					T4.FINDIVISION LOVDESCFINDIVISION,
					T2.BUSINESSVERTICAL,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.INSTRUCTIONUID,
					T1.MODULE,
					T1.EXTREFERENCE,
					T1.COLLECTIONAGENTID,
					T1.PANNUMBER,
					T1.RECEIVEDFROM,
					T1.RECEIPTCHANNEL,
					T1.SUBRECEIPTMODE,
					T13.CUSTCIF CUSTOMERCIF,
					T13.CUSTSHRTNAME CUSTOMERNAME,
					T1.ACTFINRECEIPT,
					T1.REASONCODE,
					T1.CANCELREMARKS,
					T1.REFWAIVERAMT,        
					T1.SOURCE,             
					T1.VALUEDATE,           
					T1.TRANSACTIONREF,      
					T1.DEPOSITDATE,         
					T1.PARTNERBANKID,       
					T1.PRVRECEIPTPURPOSE,   
					T1.RECEIPTSOURCE,       
					T1.RECAPPDATE,          
					T1.RECEIVEDDATE,
					T1.KNOCKOFFTYPE,
					T1.SOURCEOFFUND,
					T1.TDSAMOUNT,
					T1.CLOSURETYPE,
				    T1.RECADJAMT,
				    T1.CUSTBANKID,
					CB.ACCOUNTNUMBER CUSTACCTNUMBER,
					CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME,
					T1.MODULETYPE,
					PB.PARTNERBANKCODE
				FROM FINRECEIPTHEADER T1
				LEFT JOIN (SELECT FINID, FINREFERENCE, FINBRANCH, FINTYPE
							, FINCCY, SCHEDULEMETHOD, PROFITDAYSBASIS, FINISACTIVE
							, CUSTID, PRODUCTCATEGORY, PROMOTIONCODE, NEXTREPAYRVWDATE
							, BUSINESSVERTICAL
						FROM FINANCEMAIN_TEMP
						UNION
						SELECT FINID, FINREFERENCE, FINBRANCH, FINTYPE, FINCCY
							, SCHEDULEMETHOD, PROFITDAYSBASIS, FINISACTIVE
							, CUSTID, PRODUCTCATEGORY, PROMOTIONCODE, NEXTREPAYRVWDATE
							, BUSINESSVERTICAL
						FROM FINANCEMAIN ) T2 ON T1.FINID = T2.FINID
				LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				LEFT JOIN PARTNERBANKS PB ON PB.PARTNERBANKID = T1.PARTNERBANKID
				WHERE NOT EXISTS (SELECT 1 FROM FINRECEIPTHEADER_TEMP WHERE RECEIPTID = T1.RECEIPTID )
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#1554.15_post" author="sainaveen.y" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader_feview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1554.16" author="Gopal.p">
		<createTable tableName="CREATE_RECEIPT_UPLOAD">
			<column name="Id" type="bigint" autoIncrement="true">
				<constraints nullable="false" />
			</column>
			<column name="HeaderID" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="RecordSeq" type="bigint" />
			<column name="FinID" type="bigint" />
			<column name="Reference" type="varchar(20)">
				<constraints nullable="false" />
			</column>
			<column name="ReceiptPurpose" type="varchar(20)">
				<constraints nullable="false" />
			</column>
			<column name="ExcessAdjustTo" type="varchar(8)">
				<constraints nullable="false" />
			</column>
			<column name="AllocationType" type="char(1)">
				<constraints nullable="false" />
			</column>
			<column name="ReceiptAmount" type="decimal(18,0)">
				<constraints nullable="false" />
			</column>
			<column name="ValueDate" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="ReceiptMode" type="varchar(10)">
				<constraints nullable="false" />
			</column>
			<column name="SubReceiptMode" type="varchar(20)" />
			<column name="ReceiptChannel" type="varchar(20)" />
			<column name="EffectSchdMethod" type="varchar(10)" />
			<column name="ClosureType" type="varchar(500)" />
			<column name="Reason" type="varchar(500)" />
			<column name="Remarks" type="varchar(500)" />
			<column name="ReceiptID" type="bigint" />
			<column name="ChequeNumber" type="varchar(6)" />
			<column name="ReceiptModeStatus" type="char(1)" />
			<column name="BankCode" type="varchar(8)" />
			<column name="ChequeAccountNumber" type="varchar(25)" />
			<column name="PaymentRef" type="varchar(20)" />
			<column name="DepositDate" type="datetime" />
			<column name="RealizationDate" type="datetime" />
			<column name="TransactionRef" type="varchar(50)" />
			<column name="InstrumentDate" type="datetime" />
			<column name="PanNumber" type="varchar(20)" />
			<column name="ReceivedFrom" type="varchar(20)" />
			<column name="BounceDate" type="datetime" />
			<column name="BounceReason" type="varchar(1000)" />
			<column name="BounceRemarks" type="varchar(1000)" />
			<column name="PartnerBankCode" type="varchar(8)" />
			<column name="Progress" type="int" />
			<column name="Status" type="char(1)" />
			<column name="ErrorCode" type="varchar(20)" />
			<column name="ErrorDesc" type="varchar(2000)" />
			<column name="ExternalRef" type="varchar(20)" />
		</createTable>
	</changeSet>

	<changeSet id="ST#1554.17" author="Gopal.p">
		<addPrimaryKey tableName="CREATE_RECEIPT_UPLOAD" columnNames="Id"
			constraintName="pk_create_receipt_upload_Id" />
	</changeSet>

	<changeSet id="ST#1554.19.11_1" author="Gopal.p">
		<sql>
			<![CDATA[		
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='CREATE_RECEIPT_TEMPLATE');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='CREATE_RECEIPT_TEMPLATE');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='CREATE_RECEIPT_TEMPLATE';
 				
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_TEMPLATE'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_TEMPLATE');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_TEMPLATE';
				
				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'CREATE_RECEIPT_TEMPLATE', 'Template configuration for create receipt upload.', 3, 'CREATE_RECEIPT_UPLOAD', null, null, ',', 1, 1, null, 'ROW:{REFERENCE, RECEIPTPURPOSE, EXCESSADJUSTTO, ALLOCATIONTYPE, RECEIPTAMOUNT, VALUEDATE, RECEIPTMODE, SUBRECEIPTMODE, RECEIPTCHANNEL, EFFECTSCHDMETHOD, CLOSURETYPE, REASON, REMARKS, RECEIPTNUMBER, CHEQUENUMBER, STATUS, BANKCODE, CHEQUEACNO, PAYMENTREF, DEPOSITDATE, REALIZATIONDATE, TRANSACTIONREF, PANNUMBER, RECEIVEDFROM, BOUNCEDATE, BOUNCEREASON, BOUNCEREMARKS, PARTNERBANK, PRINCIPLE, INTEREST, ODC, BOUNCE, FEETYPE1, FEETYPE2, FEETYPE3}', null, 'A', '/opt/pff/BASE/hdfc/receipts/upload', 'Receipts_Upload_', '.xlsx', 0, CURRENT_TIMESTAMP, '${ddmm},.${SEQ_DATE_FILE}', NULL, '0', NULL, 1, 1);
		
				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_TEMPLATE'), 'CREATE_RECEIPT_UPLOAD', 1, 'ID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 37, 0, 0);
						
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_TEMPLATE')), 'REFERENCE', 	          0, 'N', NULL, NULL, NULL, NULL, '0',  NULL, NULL, NULL, NULL,               'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_TEMPLATE')), 'RECEIPTPURPOSE',   	  0, 'N', NULL, NULL, NULL, NULL, '1',  NULL, NULL, NULL, NULL,               'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_TEMPLATE')), 'EXCESSADJUSTTO',       0, 'N', NULL, NULL, NULL, NULL, '2',  NULL, NULL, NULL, NULL,               'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_TEMPLATE')), 'ALLOCATIONTYPE',       0, 'N', NULL, NULL, NULL, NULL, '3',  NULL, NULL, NULL, NULL,               'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_TEMPLATE')), 'RECEIPTAMOUNT',        0, 'N', NULL, NULL, NULL, NULL, '4',  NULL, NULL, NULL, 'AMOUNT_MINOR:0.00','O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_TEMPLATE')), 'VALUEDATE',  		  0, 'N', NULL, NULL, NULL, NULL, '5',  NULL, NULL, NULL, 'dd-MMM-yyyy',      'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_TEMPLATE')), 'RECEIPTMODE',  		  0, 'N', NULL, NULL, NULL, NULL, '6',  NULL, NULL, NULL, NULL,               'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_TEMPLATE')), 'SUBRECEIPTMODE',  	  0, 'N', NULL, NULL, NULL, NULL, '7',  NULL, NULL, NULL, NULL,               'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_TEMPLATE')), 'RECEIPTCHANNEL',  	  0, 'N', NULL, NULL, NULL, NULL, '8', NULL, NULL, NULL, NULL,                'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_TEMPLATE')), 'EFFECTSCHDMETHOD',     0, 'N', NULL, NULL, NULL, NULL, '9',  NULL, NULL, NULL, NULL,               'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_TEMPLATE')), 'CLOSURETYPE',     	  0, 'N', NULL, NULL, NULL, NULL, '10',  NULL, NULL, NULL, NULL,              'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_TEMPLATE')), 'REASON',    			  0, 'N', NULL, NULL, NULL, NULL, '11',  NULL, NULL, NULL, NULL,              'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_TEMPLATE')), 'REMARKS',  			  0, 'N', NULL, NULL, NULL, NULL, '12',  NULL, NULL, NULL, NULL,              'O');				
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_TEMPLATE')), 'RECEIPTID',  	      0, 'N', NULL, NULL, NULL, NULL, '13',  NULL, NULL, NULL, NULL,              'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_TEMPLATE')), 'CHEQUENUMBER',  		  0, 'N', NULL, NULL, NULL, NULL, '14', NULL, NULL, NULL, NULL,               'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_TEMPLATE')), 'RECEIPTMODESTATUS',    0, 'N', NULL, NULL, NULL, NULL, '15', NULL, NULL, NULL, NULL,               'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_TEMPLATE')), 'BANKCODE',  			  0, 'N', NULL, NULL, NULL, NULL, '16', NULL, NULL, NULL, NULL,               'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_TEMPLATE')), 'CHEQUEACCOUNTNUMBER',  0, 'N', NULL, NULL, NULL, NULL, '17', NULL, NULL, NULL, NULL,               'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_TEMPLATE')), 'PAYMENTREF',  		  0, 'N', NULL, NULL, NULL, NULL, '18', NULL, NULL, NULL, NULL,               'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_TEMPLATE')), 'DEPOSITDATE',  		  0, 'N', NULL, NULL, NULL, NULL, '19', NULL, NULL, NULL, 'dd-MMM-yyyy',      'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_TEMPLATE')), 'REALIZATIONDATE',  	  0, 'N', NULL, NULL, NULL, NULL, '20', NULL, NULL, NULL, 'dd-MMM-yyyy',      'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_TEMPLATE')), 'TRANSACTIONREF',  	  0, 'N', NULL, NULL, NULL, NULL, '21', NULL, NULL, NULL, NULL,               'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_TEMPLATE')), 'PANNUMBER',  		  0, 'N', NULL, NULL, NULL, NULL, '22', NULL, NULL, NULL, NULL,               'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_TEMPLATE')), 'RECEIVEDFROM',  		  0, 'N', NULL, NULL, NULL, NULL, '23', NULL, NULL, NULL, NULL,               'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_TEMPLATE')), 'BOUNCEDATE',  		  0, 'N', NULL, NULL, NULL, NULL, '24', NULL, NULL, NULL, 'dd-MMM-yyyy',      'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_TEMPLATE')), 'BOUNCEREASON',  		  0, 'N', NULL, NULL, NULL, NULL, '25', NULL, NULL, NULL, NULL,               'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_TEMPLATE')), 'BOUNCEREMARKS',  	  0, 'N', NULL, NULL, NULL, NULL, '26', NULL, NULL, NULL, NULL,               'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_TEMPLATE')), 'PARTNERBANKCODE',  	  0, 'N', NULL, NULL, NULL, NULL, '27', NULL, NULL, NULL, NULL,               'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_TEMPLATE')), 'PRI',  				  0, 'N', NULL, NULL, NULL, NULL, '28', NULL, NULL, NULL, NULL, 			  'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_TEMPLATE')), 'PFT',  				  0, 'N', NULL, NULL, NULL, NULL, '29', NULL, NULL, NULL, NULL, 			  'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_TEMPLATE')), 'ODC',  				  0, 'N', NULL, NULL, NULL, NULL, '30', NULL, NULL, NULL, NULL, 			  'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_TEMPLATE')), 'BOUNCE',  			  0, 'N', NULL, NULL, NULL, NULL, '31', NULL, NULL, NULL, NULL, 			   'O');						
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_TEMPLATE')), 'FEETYPE1',  			  0, 'N', NULL, NULL, NULL, NULL, '32', NULL, NULL, NULL, NULL, 			   'O');	
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_TEMPLATE')), 'FEETYPE2',  			  0, 'N', NULL, NULL, NULL, NULL, '33', NULL, NULL, NULL, NULL, 			   'O');	
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_TEMPLATE')), 'FEETYPE3',  			  0, 'N', NULL, NULL, NULL, NULL, '34', NULL, NULL, NULL, NULL, 			   'O');	
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_TEMPLATE')), 'PRI_W',  			  0, 'N', NULL, NULL, NULL, NULL, '35', NULL, NULL, NULL, NULL, 			  'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_TEMPLATE')), 'BOUNCE_W',  			  0, 'N', NULL, NULL, NULL, NULL, '36', NULL, NULL, NULL, NULL, 			   'O');						
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1554.20.1" author="Gopal.p">
		<sql>
			<![CDATA[		
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='CREATE_RECEIPT_DOWNLOAD');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='CREATE_RECEIPT_DOWNLOAD');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='CREATE_RECEIPT_DOWNLOAD';
 				
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_DOWNLOAD'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_DOWNLOAD');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_DOWNLOAD';
				
				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'CREATE_RECEIPT_DOWNLOAD', 'DOWNLOAD configuration for create receipt upload.', 3, 'CREATE_RECEIPT_UPLOAD', null, null, ',', 1, 1, null, 'ROW:{REFERENCE, RECEIPTPURPOSE, EXCESSADJUSTTO, ALLOCATIONTYPE, RECEIPTAMOUNT, VALUEDATE, RECEIPTMODE, SUBRECEIPTMODE, RECEIPTCHANNEL, EFFECTSCHDMETHOD, CLOSURETYPE, REASON, REMARKS, RECEIPTNUMBER, CHEQUENUMBER, STATUS, BANKCODE, CHEQUEACNO, PAYMENTREF, DEPOSITDATE, REALIZATIONDATE, TRANSACTIONREF, PANNUMBER, RECEIVEDFROM, BOUNCEDATE, BOUNCEREASON, BOUNCEREMARKS, PARTNERBANKC, UPLOAD STATUS, ERRORCODE, ERRORDESC, CREATED ON, CREATED BY, APPROVED ON, APPROVED BY}', null, 'A', '/opt/pff/BASE/hdfc/receipts/download', 'Receipts_Upload_', '.xlsx', 0, CURRENT_TIMESTAMP, '${ddmm},.${SEQ_DATE_FILE}', NULL, '0', NULL, 1, 1);
		
				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_DOWNLOAD'), 'CREATE_RECEIPT_UPLOAD', 1, 'ID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 35, 0, 0);
						
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_DOWNLOAD')), 'REFERENCE', 	          0, 'N', NULL, NULL, NULL, NULL, '0',  NULL, NULL, NULL, NULL,               'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_DOWNLOAD')), 'RECEIPTPURPOSE',       0, 'N', NULL, NULL, NULL, NULL, '1',  NULL, NULL, NULL, NULL,               'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_DOWNLOAD')), 'EXCESSADJUSTTO',       0, 'N', NULL, NULL, NULL, NULL, '2',  NULL, NULL, NULL, NULL,               'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_DOWNLOAD')), 'ALLOCATIONTYPE',       0, 'N', NULL, NULL, NULL, NULL, '3',  NULL, NULL, NULL, NULL,               'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_DOWNLOAD')), 'RECEIPTAMOUNT',        0, 'N', NULL, NULL, NULL, NULL, '4',  NULL, NULL, NULL, 'AMOUNT:.00',       'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_DOWNLOAD')), 'VALUEDATE',  		  0, 'N', NULL, NULL, NULL, NULL, '5',  NULL, NULL, NULL, 'dd-MMM-yyyy',      'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_DOWNLOAD')), 'RECEIPTMODE',  		  0, 'N', NULL, NULL, NULL, NULL, '6',  NULL, NULL, NULL, NULL,               'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_DOWNLOAD')), 'SUBRECEIPTMODE',  	  0, 'N', NULL, NULL, NULL, NULL, '7',  NULL, NULL, NULL, NULL,               'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_DOWNLOAD')), 'RECEIPTCHANNEL',  	  0, 'N', NULL, NULL, NULL, NULL, '8',  NULL, NULL, NULL, NULL,               'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_DOWNLOAD')), 'EFFECTSCHDMETHOD',     0, 'N', NULL, NULL, NULL, NULL, '9',  NULL, NULL, NULL, NULL,               'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_DOWNLOAD')), 'CLOSURETYPE',     	  0, 'N', NULL, NULL, NULL, NULL, '10', NULL, NULL, NULL, NULL,               'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_DOWNLOAD')), 'REASON',    			  0, 'N', NULL, NULL, NULL, NULL, '11', NULL, NULL, NULL, NULL,               'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_DOWNLOAD')), 'REMARKS',  			  0, 'N', NULL, NULL, NULL, NULL, '12', NULL, NULL, NULL, NULL,               'O');				
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_DOWNLOAD')), 'RECEIPTID',  	      0, 'N', NULL, NULL, NULL, NULL, '13', NULL, NULL, NULL, NULL,               'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_DOWNLOAD')), 'CHEQUENUMBER',  		  0, 'N', NULL, NULL, NULL, NULL, '14', NULL, NULL, NULL, NULL,               'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_DOWNLOAD')), 'RECEIPTMODESTATUS',    0, 'N', NULL, NULL, NULL, NULL, '15', NULL, NULL, NULL, NULL,               'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_DOWNLOAD')), 'BANKCODE',  			  0, 'N', NULL, NULL, NULL, NULL, '16', NULL, NULL, NULL, NULL,               'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_DOWNLOAD')), 'CHEQUEACCOUNTNUMBER',  0, 'N', NULL, NULL, NULL, NULL, '17', NULL, NULL, NULL, NULL,               'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_DOWNLOAD')), 'PAYMENTREF',  		  0, 'N', NULL, NULL, NULL, NULL, '18', NULL, NULL, NULL, NULL,               'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_DOWNLOAD')), 'DEPOSITDATE',  		  0, 'N', NULL, NULL, NULL, NULL, '19', NULL, NULL, NULL, 'dd-MMM-yyyy',      'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_DOWNLOAD')), 'REALIZATIONDATE',  	  0, 'N', NULL, NULL, NULL, NULL, '20', NULL, NULL, NULL, 'dd-MMM-yyyy',      'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_DOWNLOAD')), 'TRANSACTIONREF',  	  0, 'N', NULL, NULL, NULL, NULL, '21', NULL, NULL, NULL, NULL,               'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_DOWNLOAD')), 'PANNUMBER',  		  0, 'N', NULL, NULL, NULL, NULL, '22', NULL, NULL, NULL, NULL,               'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_DOWNLOAD')), 'RECEIVEDFROM',  		  0, 'N', NULL, NULL, NULL, NULL, '23', NULL, NULL, NULL, NULL,               'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_DOWNLOAD')), 'BOUNCEDATE',  		  0, 'N', NULL, NULL, NULL, NULL, '24', NULL, NULL, NULL, 'dd-MMM-yyyy',      'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_DOWNLOAD')), 'BOUNCEREASON',  		  0, 'N', NULL, NULL, NULL, NULL, '25', NULL, NULL, NULL, NULL,               'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_DOWNLOAD')), 'BOUNCEREMARKS',  	  0, 'N', NULL, NULL, NULL, NULL, '26', NULL, NULL, NULL, NULL,               'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_DOWNLOAD')), 'PARTNERBANKCODE',  	  0, 'N', NULL, NULL, NULL, NULL, '27', NULL, NULL, NULL, NULL,               'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_DOWNLOAD')), 'STATUS',	              0,'N', NULL, NULL, NULL,  NULL, '28', NULL, NULL, NULL,  NULL, 			  'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_DOWNLOAD')), 'ERRORCODE',	          0,'N', NULL, NULL, NULL,  NULL, '29', NULL, NULL, NULL,  NULL, 			  'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_DOWNLOAD')), 'ERRORDESC',	          0,'N', NULL, NULL, NULL,  NULL, '30', NULL, NULL, NULL,  NULL, 			  'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_DOWNLOAD')), 'CREATEDON',	          0,'N', NULL, NULL, NULL, NULL, '31', NULL, NULL, NULL,  'dd-MMM-yyyy',	  'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_DOWNLOAD')), 'CREATEDNAME',	      0,'N', NULL, NULL, NULL, NULL, '32', NULL, NULL, NULL,  NULL, 			  'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_DOWNLOAD')), 'APPROVEDON',	          0,'N', NULL, NULL, NULL, NULL, '33', NULL, NULL, NULL,  'dd-MMM-yyyy', 	  'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_DOWNLOAD')), 'APPROVEDNAME',	      0,'N', NULL, NULL, NULL, NULL, '34', NULL, NULL, NULL,  NULL, 			  'O');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1554.21" author="Gopal.p">
		<sql>
			<![CDATA[
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'CREATE_RECEIPT_UPLOAD_MAKER');
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'CREATE_RECEIPT_UPLOAD_APPROVER');
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'CREATE_RECEIPT_UPLOAD_VIEW');

				DELETE FROM SECROLES WHERE ROLECD ='CREATE_RECEIPT_UPLOAD_MAKER';
				DELETE FROM SECROLES WHERE ROLECD ='CREATE_RECEIPT_UPLOAD_APPROVER';
				DELETE FROM SECROLES WHERE ROLECD ='CREATE_RECEIPT_UPLOAD_VIEW';

				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'CREATE_RECEIPT_UPLOAD_MAKER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'CREATE_RECEIPT_UPLOAD_APPROVER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'CREATE_RECEIPT_UPLOAD_VIEW');

				DELETE FROM SECGROUPS WHERE GRPCODE ='CREATE_RECEIPT_UPLOAD_MAKER';
				DELETE FROM SECGROUPS WHERE GRPCODE ='CREATE_RECEIPT_UPLOAD_APPROVER';
				DELETE FROM SECGROUPS WHERE GRPCODE ='CREATE_RECEIPT_UPLOAD_VIEW';

				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='menu_Item_Create_Receipt_Upload_Maker';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='menu_Item_Create_Receipt_Upload_Approver';

				INSERT INTO SECRIGHTS(RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_Create_Receipt_Upload_Maker', 'MENU', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS(RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_Create_Receipt_Upload_Approver', 'MENU', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'CREATE_RECEIPT_UPLOAD_MAKER', 	'Maker group for Create Receipt Upload', 	0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'CREATE_RECEIPT_UPLOAD_APPROVER',  'Approver group for Create Receipt Upload', 0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'CREATE_RECEIPT_UPLOAD_VIEW', 		'Menu group for Create Receipt Upload', 	0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
				
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'CREATE_RECEIPT_UPLOAD_MAKER'),    (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_Create_Receipt_Upload_Maker'),    1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'CREATE_RECEIPT_UPLOAD_APPROVER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_Create_Receipt_Upload_Approver'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'CREATE_RECEIPT_UPLOAD_VIEW'), 	(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_Create_Receipt_Upload_Maker'), 	  1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'CREATE_RECEIPT_UPLOAD_VIEW'), 	(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_Create_Receipt_Upload_Approver'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);

				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'CREATE_RECEIPT_UPLOAD_MAKER', 		'Maker role for Create Receipt Upload',		'', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0); 
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'CREATE_RECEIPT_UPLOAD_APPROVER',   'Approver role for Create Receipt Upload',  '', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'CREATE_RECEIPT_UPLOAD_VIEW', 		'Menu role for Create Receipt Upload',		'', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);

				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'CREATE_RECEIPT_UPLOAD_MAKER'), 	(SELECT ROLEID FROM SECROLES WHERE ROLECD = 'CREATE_RECEIPT_UPLOAD_MAKER'), 	0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'CREATE_RECEIPT_UPLOAD_APPROVER'),  (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'CREATE_RECEIPT_UPLOAD_APPROVER'),  0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'CREATE_RECEIPT_UPLOAD_VIEW'), 		(SELECT ROLEID FROM SECROLES WHERE ROLECD = 'CREATE_RECEIPT_UPLOAD_VIEW'), 		0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'CREATE_RECEIPT_UPLOAD_MAKER'), 	(SELECT ROLEID FROM SECROLES WHERE ROLECD = 'CREATE_RECEIPT_UPLOAD_VIEW'), 		0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'CREATE_RECEIPT_UPLOAD_APPROVER'),  (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'CREATE_RECEIPT_UPLOAD_VIEW'), 		0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1554.22" author="ramya.v">
		<createTable tableName="RECEIPT_STATUS_UPLOAD">
			<column name="Id" type="bigint" autoIncrement="true">
				<constraints nullable="false" />
			</column>
			<column name="HeaderId" type="bigint" />
			<column name="RecordSeq" type="bigint" />
			<column name="FinID" type="bigint" />
			<column name="ReceiptId" type="bigint" />
			<column name="StatusRM" type="varchar(50)" />
			<column name="RealizationDate" type="datetime" />
			<column name="BounceDate" type="datetime" />
			<column name="BorCReason" type="varchar(200)" />
			<column name="BorCRemarks" type="varchar(200)" />
			<column name="Progress" type="int" />
			<column name="Status" type="char(1)" />
			<column name="ErrorCode" type="varchar(20)" />
			<column name="ErrorDesc" type="varchar(2000)" />
		</createTable>
	</changeSet>

	<changeSet id="ST#1554.23" author="ramya.v">
		<addPrimaryKey tableName="RECEIPT_STATUS_UPLOAD" columnNames="Id"
			constraintName="PK_RECEIPT_STATUS_UPLOAD_ID" />
	</changeSet>

	<changeSet id="ST#1554.24" author="ramya.v">
		<sql>
			<![CDATA[
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'RECEIPT_STATUS_UPLOAD_MAKER');
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'RECEIPT_STATUS_UPLOAD_APPROVER');
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'RECEIPT_STATUS_UPLOAD_VIEW');

				DELETE FROM SECROLES WHERE ROLECD ='RECEIPT_STATUS_UPLOAD_MAKER';
				DELETE FROM SECROLES WHERE ROLECD ='RECEIPT_STATUS_UPLOAD_APPROVER';
				DELETE FROM SECROLES WHERE ROLECD ='RECEIPT_STATUS_UPLOAD_VIEW';

				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'RECEIPT_STATUS_UPLOAD_MAKER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'RECEIPT_STATUS_UPLOAD_APPROVER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'RECEIPT_STATUS_UPLOAD_VIEW');

				DELETE FROM SECGROUPS WHERE GRPCODE ='RECEIPT_STATUS_UPLOAD_MAKER';
				DELETE FROM SECGROUPS WHERE GRPCODE ='RECEIPT_STATUS_UPLOAD_APPROVER';
				DELETE FROM SECGROUPS WHERE GRPCODE ='RECEIPT_STATUS_UPLOAD_VIEW';

				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='menu_Item_Receipt_Status_Upload_Maker';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='menu_Item_Receipt_Status_Upload_Approver';

				INSERT INTO SECRIGHTS(RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_Receipt_Status_Upload_Maker',		 'MENU', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS(RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_Receipt_Status_Upload_Approver', 	 'MENU', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'RECEIPT_STATUS_UPLOAD_MAKER', 'WF Maker for Receipt Status Upload', 0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'RECEIPT_STATUS_UPLOAD_APPROVER', 'WF Approver for Receipt Status Upload', 0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'RECEIPT_STATUS_UPLOAD_VIEW', 		'Menu group for Receipt Status Upload', 0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
				
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'RECEIPT_STATUS_UPLOAD_MAKER'),    (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_Receipt_Status_Upload_Maker'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'RECEIPT_STATUS_UPLOAD_APPROVER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_Receipt_Status_Upload_Approver'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'RECEIPT_STATUS_UPLOAD_VIEW'), 	(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_Create_Receipt_Upload_Maker'), 	  1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'RECEIPT_STATUS_UPLOAD_VIEW'), 	(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_Create_Receipt_Upload_Approver'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);

				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'RECEIPT_STATUS_UPLOAD_MAKER', 'Maker role from ReceiptStatus Upload', '', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0); 
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'RECEIPT_STATUS_UPLOAD_APPROVER', 'Approver role from ReceipTStatus Upload',	'', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'RECEIPT_STATUS_UPLOAD_VIEW', 		'Menu role for Create Receipt Upload',		'', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'RECEIPT_STATUS_UPLOAD_MAKER'),     (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'RECEIPT_STATUS_UPLOAD_MAKER'),    0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'RECEIPT_STATUS_UPLOAD_APPROVER'),  (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'RECEIPT_STATUS_UPLOAD_APPROVER'), 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'RECEIPT_STATUS_UPLOAD_VIEW'), 		(SELECT ROLEID FROM SECROLES WHERE ROLECD = 'RECEIPT_STATUS_UPLOAD_VIEW'), 		0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'RECEIPT_STATUS_UPLOAD_MAKER'), 	(SELECT ROLEID FROM SECROLES WHERE ROLECD = 'RECEIPT_STATUS_UPLOAD_VIEW'), 		0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'RECEIPT_STATUS_UPLOAD_APPROVER'),  (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'RECEIPT_STATUS_UPLOAD_VIEW'), 		0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1554.26" author="ramya.v">
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='RECEIPT_STATUS_TEMPLATE');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='RECEIPT_STATUS_TEMPLATE');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='RECEIPT_STATUS_TEMPLATE';
							
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RECEIPT_STATUS_TEMPLATE'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID IN (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RECEIPT_STATUS_TEMPLATE');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'RECEIPT_STATUS_TEMPLATE';
							
				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'RECEIPT_STATUS_TEMPLATE', 'ReceiptStatus template download', 3, 'RECEIPTSTATUS', NULL, NULL, ',' , 0, 0, NULL, 'ROW:{ReceiptID, Status, Realization Date, Bounce Date, Bounce/Cancel Reason, Bounce/Cancel Remarks}',  '', 'A', '/opt/PFF/BASE/hdfc/ReceiptStatusUpload/template', 'ReceiptStatus_', '.xlsx', 0, current_timestamp, '${ddMMYYYYHms}', NULL, 0, NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RECEIPT_STATUS_TEMPLATE'), 'RECEIPT_STATUS_UPLOAD',  0, 'ID', 'HEADERID = :HEADERID', NULL, NULL, NULL, NULL, NULL, NULL, 6, 0, 0);
				
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'RECEIPT_STATUS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RECEIPT_STATUS_TEMPLATE')), 'RECEIPTID',            		 0, 'N', NULL, NULL, NULL, NULL, '0',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'RECEIPT_STATUS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RECEIPT_STATUS_TEMPLATE')), 'STATUSRM',               		 0, 'N', NULL, NULL, NULL, NULL, '1',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'RECEIPT_STATUS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RECEIPT_STATUS_TEMPLATE')), 'REALIZATIONDATE',  		     0, 'N', NULL, NULL, NULL, NULL, '2',  NULL, NULL, NULL, 'dd-MMM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'RECEIPT_STATUS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RECEIPT_STATUS_TEMPLATE')), 'BOUNCEDATE',           		 0, 'N', NULL, NULL, NULL, NULL, '3',  NULL, NULL, NULL, 'dd-MMM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'RECEIPT_STATUS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RECEIPT_STATUS_TEMPLATE')), 'BORCREASON',           		 0, 'N', NULL, NULL, NULL, NULL, '4',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'RECEIPT_STATUS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RECEIPT_STATUS_TEMPLATE')), 'BORCREMARKS',      			 0, 'N', NULL, NULL, NULL, NULL, '5',  NULL, NULL, NULL, NULL, 'O');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1554.27" author="ramya.v">
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='RECEIPT_STATUS_DOWNLOAD');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='RECEIPT_STATUS_DOWNLOAD');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='RECEIPT_STATUS_DOWNLOAD';
							
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RECEIPT_STATUS_DOWNLOAD'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID IN (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RECEIPT_STATUS_DOWNLOAD');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'RECEIPT_STATUS_DOWNLOAD';
							
				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'RECEIPT_STATUS_DOWNLOAD', 'ReceiptStatus download', 3, 'RECEIPTSTATUS', NULL, NULL, ',' , 0, 0, NULL, 'ROW:{ReceiptID, Status, Realization Date, Bounce Date, Bounce/Cancel Reason, Bounce/Cancel Remarks, Upload Status, ErrorCode, ErrorDesc, Created On, Created By, Approved On, Approved By}',  '', 'A', '/opt/PFF/BASE/hdfc/ReceiptStatusUpload/download', 'ReceiptStatus_', '.xlsx', 0, current_timestamp, '${ddMMYYYYHms}', NULL, 0, NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RECEIPT_STATUS_DOWNLOAD'), 'RECEIPT_STATUS_UPLOAD',  1, 'ID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 13, 0, 0);
				
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'RECEIPT_STATUS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RECEIPT_STATUS_DOWNLOAD')), 'RECEIPTID',     	   	      	  0,'N', NULL, NULL, NULL, NULL, '0',  NULL, NULL, NULL,  NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'RECEIPT_STATUS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RECEIPT_STATUS_DOWNLOAD')), 'STATUSRM',      			      0,'N', NULL, NULL, NULL, NULL, '1',  NULL, NULL, NULL,  NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'RECEIPT_STATUS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RECEIPT_STATUS_DOWNLOAD')), 'REALIZATIONDATE',    	      	  0,'N', NULL, NULL, NULL, NULL, '2',  NULL, NULL, NULL,  'dd-MMM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'RECEIPT_STATUS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RECEIPT_STATUS_DOWNLOAD')), 'BOUNCEDATE',     		      	  0,'N', NULL, NULL, NULL, NULL, '3',  NULL, NULL, NULL,  'dd-MMM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'RECEIPT_STATUS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RECEIPT_STATUS_DOWNLOAD')), 'BORCREASON',     	  			  0,'N', NULL, NULL, NULL, NULL, '4',  NULL, NULL, NULL,  NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'RECEIPT_STATUS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RECEIPT_STATUS_DOWNLOAD')), 'BORCREMARKS',       		      0,'N', NULL, NULL, NULL, NULL, '5',  NULL, NULL, NULL,  NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'RECEIPT_STATUS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RECEIPT_STATUS_DOWNLOAD')), 'STATUS',	                      0,'N', NULL, NULL, NULL, NULL, '6', NULL, NULL, NULL,  NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'RECEIPT_STATUS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RECEIPT_STATUS_DOWNLOAD')), 'ERRORCODE',	                  0,'N', NULL, NULL, NULL, NULL, '7', NULL, NULL, NULL,  NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'RECEIPT_STATUS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RECEIPT_STATUS_DOWNLOAD')), 'ERRORDESC',	                  0,'N', NULL, NULL, NULL, NULL, '8', NULL, NULL, NULL,  NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'RECEIPT_STATUS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RECEIPT_STATUS_DOWNLOAD')), 'CREATEDON',	                  0,'N', NULL, NULL, NULL, NULL, '9', NULL, NULL, NULL,  'dd-MMM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'RECEIPT_STATUS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RECEIPT_STATUS_DOWNLOAD')), 'CREATEDNAME',	                  0,'N', NULL, NULL, NULL, NULL, '10', NULL, NULL, NULL,  NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'RECEIPT_STATUS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RECEIPT_STATUS_DOWNLOAD')), 'APPROVEDON',	                  0,'N', NULL, NULL, NULL, NULL, '11', NULL, NULL, NULL,  'dd-MMM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'RECEIPT_STATUS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RECEIPT_STATUS_DOWNLOAD')), 'APPROVEDNAME',	                  0,'N', NULL, NULL, NULL, NULL, '12', NULL, NULL, NULL,  NULL, 'O');
             ]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1471.20" author="Mounika.M">
		<sql>
		    <![CDATA[
		    	DELETE FROM SMTPARAMETERS WHERE SYSPARMCODE = 'DPD_STRING_LENGTH';
		    ]]>
		</sql>
	</changeSet>

	<changeSet id="ST#730:TK#2762:01" author="Divya.A">
		<addColumn tableName="RMTFinanceTypes">
			<column name="WriteOffRepayHry" type="varchar(50)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#730:TK#2762:03" author="Divya.A">
		<addColumn tableName="RMTFinanceTypes">
			<column name="MatureRepayHry" type="varchar(50)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#730:TK#2762:04" author="Divya.A">
		<addColumn tableName="RMTFinanceTypes">
			<column name="PresentmentRepayHry" type="varchar(50)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#730:TK#2762:06" author="Divya.A">
		<addColumn tableName="RMTFinanceTypes_Temp">
			<column name="WriteOffRepayHry" type="varchar(50)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#730:TK#2762:08" author="Divya.A">
		<addColumn tableName="RMTFinanceTypes_Temp">
			<column name="MatureRepayHry" type="varchar(50)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#730:TK#2762:09" author="Divya.A">
		<addColumn tableName="RMTFinanceTypes_Temp">
			<column name="PresentmentRepayHry" type="varchar(50)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#730:TK#2762:10" author="Divya.A">
		<sql>
			<![CDATA[	
				UPDATE RMTFINANCETYPES SET WRITEOFFREPAYHRY = RPYHIERARCHY, MATUREREPAYHRY = RPYHIERARCHY, PRESENTMENTREPAYHRY = RPYHIERARCHY;
				UPDATE RMTFINANCETYPES_TEMP SET WRITEOFFREPAYHRY = RPYHIERARCHY, MATUREREPAYHRY = RPYHIERARCHY, PRESENTMENTREPAYHRY = RPYHIERARCHY;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#730TK#4755.01" author="Vijayakumar.k">
		<createSequence sequenceName="SEQAUTO_WRITE_OFF_LOAN_TYPE" />
	</changeSet>

	<changeSet id="ST#730TK#4755.02" author="Vijayakumar.k">
		<comment>New Table: AUTO_WRITE_OFF_LOANTYPES_TEMP</comment>
		<createTable tableName="AUTO_WRITE_OFF_LOAN_TYPE_TEMP">
			<column name="ID" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="PSLCODE" type="varchar(8)">
				<constraints nullable="false" />
			</column>
			<column name="LoanType" type="varchar(8)">
				<constraints nullable="false" />
			</column>
			<column name="DPDDAYS" type="int">
				<constraints nullable="false" />
			</column>
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="CreatedBy" type="bigint" />
			<column name="CreatedOn" type="datetime" />
			<column name="ApprovedBy" type="bigint" />
			<column name="ApprovedOn" type="datetime" />
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkflowId" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet id="ST#730TK#4755.03" author="Vijayakumar.k">
		<addPrimaryKey tableName="AUTO_WRITE_OFF_LOAN_TYPE_TEMP" columnNames="ID"
			constraintName="PK_AUTO_WRITEOF_TEMP_ID" />
	</changeSet>

	<changeSet id="ST#730TK#4755.04" author="Vijayakumar.k">
		<addForeignKeyConstraint constraintName="FK_AUTO_WRITE_TEMP_LT"
			referencedTableName="RMTFINANCETYPES" referencedColumnNames="FINTYPE" baseTableName="AUTO_WRITE_OFF_LOAN_TYPE_TEMP"
			baseColumnNames="LoanType" />
	</changeSet>

	<changeSet id="ST#730TK#4755.05" author="Vijayakumar.k">
		<addUniqueConstraint tableName="AUTO_WRITE_OFF_LOAN_TYPE_TEMP" columnNames="LoanType, PSLCODE"
			constraintName="UK_AUTO_WRITE_TEMP_LT_PSL" />
	</changeSet>

	<changeSet id="ST#730TK#4755.06" author="Vijayakumar.k">
		<comment>New Table: AUTO_WRITE_OFF_LOAN_TYPE</comment>
		<createTable tableName="AUTO_WRITE_OFF_LOAN_TYPE">
			<column name="ID" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="PSLCODE" type="varchar(8)">
				<constraints nullable="false" />
			</column>
			<column name="LoanType" type="varchar(8)">
				<constraints nullable="false" />
			</column>
			<column name="DPDDAYS" type="int">
				<constraints nullable="false" />
			</column>
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="CreatedBy" type="bigint" />
			<column name="CreatedOn" type="datetime" />
			<column name="ApprovedBy" type="bigint" />
			<column name="ApprovedOn" type="datetime" />
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkflowId" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet id="ST#730TK#4755.07" author="Vijayakumar.k">
		<addPrimaryKey tableName="AUTO_WRITE_OFF_LOAN_TYPE" columnNames="ID" constraintName="PK_AUTO_WRITE_ID" />
	</changeSet>

	<changeSet id="ST#730TK#4755.08" author="Vijayakumar.k">
		<addForeignKeyConstraint constraintName="FK_AUTO_WRITE_PSLCODE_LT"
			referencedTableName="RMTFINANCETYPES" referencedColumnNames="FINTYPE" baseTableName="AUTO_WRITE_OFF_LOAN_TYPE"
			baseColumnNames="LoanType" />
	</changeSet>
	<changeSet id="ST#730TK#4755.09" author="Vijayakumar.k">
		<addUniqueConstraint tableName="AUTO_WRITE_OFF_LOAN_TYPE" columnNames="LoanType,PSLCODE"
			constraintName="UK_FK_AUTO_WRITE_PSLCODE_LT" />
	</changeSet>

	<changeSet id="ST#730TK#4755.10_pre" author="Vijayakumar.k" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'auto_write_off_loan_type_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#730TK#4755.10" author="Vijayakumar.k">
		<createView viewName="AUTO_WRITE_OFF_LOAN_TYPE_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ID,
					T1.LOANTYPE,
					T1.PSLCODE,
					T1.DPDDAYS,
					T2.FINCATEGORY,
					T2.FINTYPEDESC,
					T3.DESCRIPTION PSLCODEDESC,
					T1.VERSION,
					T1.CREATEDBY,
					T1.CREATEDON,
					T1.APPROVEDBY,
					T1.APPROVEDON,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID, 
	      			T1.RECORDTYPE,
	      			T1.WORKFLOWID
		  		FROM AUTO_WRITE_OFF_LOAN_TYPE_TEMP T1
		  		INNER JOIN RMTFINANCETYPES T2 ON T2.FINTYPE = T1.LOANTYPE
				INNER JOIN PSLCATEGORY T3 ON T3.CODE = T1.PSLCODE
		  		UNION ALL
		  		SELECT T1.ID,
					T1.LOANTYPE,
					T1.PSLCODE,
					T1.DPDDAYS,
					T2.FINCATEGORY,
					T2.FINTYPEDESC,
					T3.DESCRIPTION PSLCODEDESC,
					T1.VERSION,
					T1.CREATEDBY,
					T1.CREATEDON,
					T1.APPROVEDBY,
					T1.APPROVEDON,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID, 
	      			T1.RECORDTYPE,
	      			T1.WORKFLOWID
		  		FROM AUTO_WRITE_OFF_LOAN_TYPE T1
		  		INNER JOIN RMTFINANCETYPES T2 ON T2.FINTYPE = T1.LOANTYPE
				INNER JOIN PSLCATEGORY T3 ON T3.CODE = T1.PSLCODE
		  		WHERE NOT EXISTS (SELECT 1 FROM AUTO_WRITE_OFF_LOAN_TYPE_TEMP WHERE ID = T1.ID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#730TK#4755.10_post" author="Vijayakumar.k" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'auto_write_off_loan_type_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#730TK#4755.11_pre" author="Vijayakumar.k" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'auto_write_off_loan_type_lview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#730TK#4755.11" author="Vijayakumar.k">
		<createView viewName="AUTO_WRITE_OFF_LOAN_TYPE_LVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ID,
					T1.LOANTYPE,
					T1.PSLCODE,
					T1.DPDDAYS,
					T1.VERSION,
					T1.CREATEDBY,
					T1.CREATEDON,
					T1.APPROVEDBY,
					T1.APPROVEDON,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID, 
	      			T1.RECORDTYPE,
	      			T1.WORKFLOWID
	      		FROM AUTO_WRITE_OFF_LOAN_TYPE_TEMP T1
		  		WHERE T1.ID IN (SELECT MAX(ID) FROM AUTO_WRITE_OFF_LOAN_TYPE_TEMP GROUP BY LOANTYPE)
		  		UNION ALL
		  		SELECT T1.ID,
					T1.LOANTYPE,
					T1.PSLCODE,
					T1.DPDDAYS,
					T1.VERSION,
					T1.CREATEDBY,
					T1.CREATEDON,
					T1.APPROVEDBY,
					T1.APPROVEDON,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID, 
	      			T1.RECORDTYPE,
	      			T1.WORKFLOWID
		  		FROM AUTO_WRITE_OFF_LOAN_TYPE T1
		  		WHERE T1.ID IN (SELECT MAX(ID) FROM AUTO_WRITE_OFF_LOAN_TYPE GROUP BY LOANTYPE)
				AND NOT EXISTS (SELECT 1 FROM AUTO_WRITE_OFF_LOAN_TYPE_TEMP 
				WHERE ID IN (SELECT MAX(ID) FROM AUTO_WRITE_OFF_LOAN_TYPE_TEMP GROUP BY LOANTYPE) AND LOANTYPE = T1.LOANTYPE)
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#730TK#4755.11_post" author="Vijayakumar.k" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'auto_write_off_loan_type_lview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#730TK#4755.12_pre" author="Vijayakumar.k" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'auto_write_off_loan_type_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#730TK#4755.12" author="Vijayakumar.k">
		<createView viewName="AUTO_WRITE_OFF_LOAN_TYPE_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ID,
					T1.LOANTYPE,
					T1.PSLCODE,
					T1.DPDDAYS,
					T2.FINCATEGORY,
					T2.FINTYPEDESC,
					T3.DESCRIPTION PSLCODEDESC,
					T1.VERSION,
					T1.CREATEDBY,
					T1.CREATEDON,
					T1.APPROVEDBY,
					T1.APPROVEDON,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID, 
	      			T1.RECORDTYPE,
	      			T1.WORKFLOWID
				FROM AUTO_WRITE_OFF_LOAN_TYPE T1
		  		INNER JOIN RMTFINANCETYPES T2 ON T2.FINTYPE = T1.LOANTYPE	
				INNER JOIN PSLCATEGORY T3 ON T3.CODE = T1.PSLCODE
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#730TK#4755.12_post" author="Vijayakumar.k" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'auto_write_off_loan_type_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#730TK#4755.13" author="Vijayakumar.k">
		<sql>
			<![CDATA[
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'LOAN_TYPE_AUTO_WRITE_OFF_MAKER', 		'Role for auto WRITEOFF maker',		NULL, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'LOAN_TYPE_AUTO_WRITE_OFF_APPROVER', 	'Role for auto WRITEOFF approver',	NULL, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'LOAN_TYPE_AUTO_WRITE_OFF_VIEW', 		'Role for auto WRITEOFF view',		NULL, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SECGROUPS (GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPID)+1 FROM SECGROUPS_VIEW), 'LOAN_TYPE_AUTO_WRITE_OFF_MAKER', 'WF Maker Group',  1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPS (GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPID)+1 FROM SECGROUPS_VIEW), 'LOAN_TYPE_AUTO_WRITE_OFF_APPROVER', 'WF Approver Group',  1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPS (GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPID)+1 FROM SECGROUPS_VIEW), 'LOAN_TYPE_AUTO_WRITE_OFF_VIEW', 'WF menu Group',  1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS_VIEW), 0, 'menu_Item_LoanTypeWriteOff',					'MENU',						0,	1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS_VIEW), 2, 'button_LoanTypeWriteOffDialog_btnNew',		'LoanTypeWriteOffDialog',	0,	1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS_VIEW), 2, 'button_LoanTypeWriteOffDialog_btnEdit',		'LoanTypeWriteOffDialog',	0,	1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS_VIEW), 2, 'button_LoanTypeWriteOffDialog_btnDelete',		'LoanTypeWriteOffDialog',	0,	1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS_VIEW), 2, 'button_LoanTypeWriteOffDialog_btnSave',		'LoanTypeWriteOffDialog',	0,	1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS_VIEW), 2, 'button_LoanTypeWriteOffDialog_btnPSLCode',	'LoanTypeWriteOffDialog',	0,	1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS_VIEW), 3, 'LoanTypeWriteOffDialog_LoanType',				'LoanTypeWriteOffDialog',	0,	1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS_VIEW), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_TYPE_AUTO_WRITE_OFF_MAKER'),(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'LoanTypeWriteOffDialog_LoanType'),1,0,1000,CURRENT_TIMESTAMP,'Approved',null,null,null,null,null,0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS_VIEW), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_TYPE_AUTO_WRITE_OFF_MAKER'),(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_LoanTypeWriteOffDialog_btnNew'),1,0,1000,CURRENT_TIMESTAMP,'Approved',null,null,null,null,null,0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS_VIEW), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_TYPE_AUTO_WRITE_OFF_MAKER'),(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_LoanTypeWriteOffDialog_btnEdit'),1,0,1000,CURRENT_TIMESTAMP,'Approved',null,null,null,null,null,0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS_VIEW), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_TYPE_AUTO_WRITE_OFF_MAKER'),(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_LoanTypeWriteOffDialog_btnDelete'),1,0,1000,CURRENT_TIMESTAMP,'Approved',null,null,null,null,null,0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS_VIEW), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_TYPE_AUTO_WRITE_OFF_MAKER'),(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_LoanTypeWriteOffDialog_btnSave'),1,0,1000,CURRENT_TIMESTAMP,'Approved',null,null,null,null,null,0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS_VIEW), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_TYPE_AUTO_WRITE_OFF_MAKER'),(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_LoanTypeWriteOff'),1,0,1000,CURRENT_TIMESTAMP,'Approved',null,null,null,null,null,0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS_VIEW), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_TYPE_AUTO_WRITE_OFF_MAKER'),(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_LoanTypeWriteOffDialog_btnPSLCode'),1,0,1000,CURRENT_TIMESTAMP,'Approved',null,null,null,null,null,0);
				
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS_VIEW), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_TYPE_AUTO_WRITE_OFF_VIEW'),(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_LoanTypeWriteOff'),1,0,1000,CURRENT_TIMESTAMP,'Approved',null,null,null,null,null,0);
			
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS_VIEW), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_TYPE_AUTO_WRITE_OFF_APPROVER'),(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_LoanTypeWriteOFFDialog_btnSave'),1,0,1000,CURRENT_TIMESTAMP,'Approved',null,null,null,null,null,0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS_VIEW), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_TYPE_AUTO_WRITE_OFF_APPROVER'),(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_LoanTypeWriteOff'),1,0,1000,CURRENT_TIMESTAMP,'Approved',null,null,null,null,null,0);
				
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_TYPE_AUTO_WRITE_OFF_MAKER'),    (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'MSTGRP1_MAKER'),    0, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_TYPE_AUTO_WRITE_OFF_APPROVER'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'MSTGRP1_APPROVER'), 0, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_TYPE_AUTO_WRITE_OFF_VIEW'),    (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'MSTGRP1_MAKER'),    0, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_TYPE_AUTO_WRITE_OFF_VIEW'), 	  (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'MSTGRP1_APPROVER'), 0, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#730TK#475516.14" author="Vijayakumar.k">
		<createTable tableName="AUTO_WRITE_OFF_CALC_QUEUE">
			<column name="ID" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="FinID" type="bigint" />
			<column name="ThreadID" type="int">
				<constraints nullable="false" />
			</column>
			<column name="StartTime" type="datetime" />
			<column name="EndTime" type="datetime" />
			<column name="Progress" type="int">
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>

	<changeSet id="ST#730TK#475516.15" author="Vijayakumar.k" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE AUTO_WRITE_OFF_CALC_QUEUE ADD CONSTRAINT DF_AUTO_WRI_OFF_CAL_Q_THREADID DEFAULT 0 FOR THREADID;
				ALTER TABLE AUTO_WRITE_OFF_CALC_QUEUE ADD CONSTRAINT DF_AUTO_WRI_OFF_CAL_Q_PROGRESS DEFAULT 0 FOR PROGRESS;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#730TK#475516.16" author="Vijayakumar.k" dbms="postgresql, oracle">
		<addDefaultValue columnName="ThreadID" tableName="AUTO_WRITE_OFF_CALC_QUEUE" defaultValue="0" />
		<addDefaultValue columnName="Progress" tableName="AUTO_WRITE_OFF_CALC_QUEUE" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#730TK#475516.17" author="Vijayakumar.k">
		<addPrimaryKey tableName="AUTO_WRITE_OFF_CALC_QUEUE" columnNames="Id"
			constraintName="PK_auto_write_off_calc_queue" />
	</changeSet>

	<changeSet id="ST#730TK#475516.18" author="Vijayakumar.k">
		<createIndex tableName="AUTO_WRITE_OFF_CALC_QUEUE" indexName="idx_aw_queue_tid">
			<column name="ThreadID" type="int" />
		</createIndex>
	</changeSet>
	<changeSet id="ST#730TK#475516.19" author="Vijayakumar.k">
		<createIndex tableName="AUTO_WRITE_OFF_CALC_QUEUE" indexName="idx_aw_queue_id_progress">
			<column name="ID" type="bigint" />
			<column name="Progress" type="int" />
		</createIndex>
	</changeSet>

	<changeSet id="ST#730TK#475516.20" author="Vijayakumar.k">
		<createIndex tableName="AUTO_WRITE_OFF_CALC_QUEUE" indexName="idx_aw_queue_fid_progress">
			<column name="FinID" type="bigint" />
			<column name="Progress" type="int" />
		</createIndex>
	</changeSet>
	<changeSet id="ST#730TK#475516.21" author="Vijayakumar.k">
		<createIndex tableName="AUTO_WRITE_OFF_CALC_QUEUE" indexName="idx_aw_queue_progress">
			<column name="Progress" type="int" />
		</createIndex>
	</changeSet>
	<changeSet id="ST#730TK#475516.22" author="Vijayakumar.k">
		<createIndex tableName="AUTO_WRITE_OFF_CALC_QUEUE" indexName="idx_aw_queue_id_threadid">
			<column name="ID" type="bigint" />
			<column name="ThreadID" type="int" />
		</createIndex>
	</changeSet>
	<changeSet id="ST#730TK#475516.23" author="Vijayakumar.k">
		<createIndex tableName="AUTO_WRITE_OFF_CALC_QUEUE" indexName="idx_aw_queue_fid">
			<column name="FinId" type="bigint" />
		</createIndex>
	</changeSet>

	<changeSet id="ST#730TK#475516.24" author="Vijayakumar.k">
		<createTable tableName="AUTO_WRITE_OFF_LOANS_LOG">
			<column name="ID" type="bigint" autoIncrement="true" />
			<column name="FinId" type="bigint" />
			<column name="FinReference" type="varchar(20)" />
			<column name="Code" type="varchar(10)" />
			<column name="errorMsg" type="varchar(2000)" />
			<column name="executionDate" type="datetime" />
			<column name="status" type="varchar(2)" />
		</createTable>
	</changeSet>

	<changeSet id="ST#730TK#475516.24.1" author="Vijayakumar.k">
		<addPrimaryKey tableName="AUTO_WRITE_OFF_LOANS_LOG" columnNames="Id"
			constraintName="PK_auto_wri_off_loans_log_ID" />
	</changeSet>

	<changeSet id="ST#730TK#475516.25" author="Vijayakumar.K">
		<sql>
			<![CDATA[
				DELETE FROM ERRORDETAILS WHERE CODE='AWL_000';
				DELETE FROM ERRORDETAILS WHERE CODE = 'AWL_001';
				DELETE FROM ERRORDETAILS WHERE CODE='AWL_002';
				DELETE FROM ERRORDETAILS WHERE CODE='AWL_003';
				DELETE FROM ERRORDETAILS WHERE CODE='AWL_004';
				
				INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION) VALUES ('AWL_000', 'EN', 'E', 'Loan has writeoffed.', 																	'', 'Approved', NULL, NULL, NULL, NULL, NULL, 0, CURRENT_TIMESTAMP, 1000, 0);
				INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION) VALUES('AWL_001',  'EN', 'E', 'ThereLoan has does not the PSL category', 												'', 'Approved', NULL, NULL, NULL, NULL, NULL, 0, CURRENT_TIMESTAMP, 1000, 0);
				INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION) VALUES ('AWL_002', 'EN', 'E', 'Loan type PSL Categories not available in the Loan type Write off Master.', 				'', 'Approved', NULL, NULL, NULL, NULL, NULL, 0, CURRENT_TIMESTAMP, 1000, 0);
				INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION) VALUES ('AWL_003', 'EN', 'E', 'Loan type PSL Categories or DPD Days are not match with the Loan type Write off Master.', '', 'Approved', NULL, NULL, NULL, NULL, NULL, 0, CURRENT_TIMESTAMP, 1000, 0);
				INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION) VALUES ('AWL_004', 'EN', 'E', 'Loan dues are adjusted against Excess or Payables.', 										'', 'Approved', NULL, NULL, NULL, NULL, NULL, 0, CURRENT_TIMESTAMP, 1000, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="TK#4750.1" author="sampath.d">
		<createTable tableName="WRITE_OFF_UPLOAD">
			<column name="Id" type="bigint" autoIncrement="true">
				<constraints nullable="false" />
			</column>
			<column name="HeaderId" type="bigint" />
			<column name="RecordSeq" type="bigint" />
			<column name="FinID" type="bigint" />
			<column name="FinReference" type="varchar(20)" />
			<column name="Remarks" type="varchar(50)" />
			<column name="Progress" type="int" />
			<column name="Status" type="char(1)" />
			<column name="ErrorCode" type="varchar(20)" />
			<column name="ErrorDesc" type="varchar(2000)" />
		</createTable>
	</changeSet>

	<changeSet id="TK#4750.2" author="sampath.d">
		<addPrimaryKey tableName="WRITE_OFF_UPLOAD" columnNames="Id" constraintName="PK_WRITEOFF_UPLOAD_ID" />
	</changeSet>

	<changeSet id="TK#4750.6_1" author="sampath.d">
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='WRITE_OFF_TEMPLATE');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='WRITE_OFF_TEMPLATE');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='WRITE_OFF_TEMPLATE';
							
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'WRITE_OFF_TEMPLATE'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID IN (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'WRITE_OFF_TEMPLATE');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'WRITE_OFF_TEMPLATE';
							
				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'WRITE_OFF_TEMPLATE', 'WriteOff template download', 3, 'WriteOffUpload', NULL, NULL, ',' , 0, 0, NULL, 'ROW:{Loan Reference No,Remarks}',  '', 'A', '/opt/pff/hdfc/writeoff/template', 'WriteOffUpload_', '.xlsx', 0, current_timestamp, '${ddMMYYYYHms}', NULL, 0, NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'WRITE_OFF_TEMPLATE'), 'WRITE_OFF_UPLOAD',  0, 'ID', 'HEADERID = :HEADERID', NULL, NULL, NULL, NULL, NULL, NULL, 2, 0, 0);
				
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'WRITE_OFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'WRITE_OFF_TEMPLATE')), 'FINREFERENCE',0, 'N', NULL, NULL, NULL, NULL, '0', NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'WRITE_OFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'WRITE_OFF_TEMPLATE')), 'REMARKS',0, 'N', NULL, NULL, NULL, NULL, '1', NULL, NULL, NULL, NULL, 'O');
			]]>
		</sql>
	</changeSet>

	<changeSet id="TK#4750.7_1" author="sampath.d">
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='WRITE_OFF_DOWNLOAD');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='WRITE_OFF_DOWNLOAD');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='WRITE_OFF_DOWNLOAD';
							
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'WRITE_OFF_DOWNLOAD'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID IN (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'WRITE_OFF_DOWNLOAD');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'WRITE_OFF_DOWNLOAD';
							
				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'WRITE_OFF_DOWNLOAD', 'write off download', 3, 'WriteOffUpload', NULL, NULL, ',' , 0, 0, NULL, 'ROW:{Loan Reference No,Remarks,Upload Status,Failure Reason,Maker ID,Approver ID,Upload Date,Approver Date}',  '', 'A', '/opt/pff/hdfc/writeoff/download', 'WriteOffUpload_', '.xlsx', 0, current_timestamp, '${ddMMYYYYHms}', NULL, 0, NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'WRITE_OFF_DOWNLOAD'), 'WRITE_OFF_UPLOAD',  0, 'ID', 'HEADERID = :HEADERID', NULL, NULL, NULL, NULL, NULL, NULL, 10, 0, 0);
				
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'WRITE_OFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'WRITE_OFF_DOWNLOAD')), 'FINREFERENCE',0,'N', NULL, NULL, NULL, NULL, '0', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'WRITE_OFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'WRITE_OFF_DOWNLOAD')), 'REMARKS',0,'N', NULL, NULL, NULL, NULL, '4', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'WRITE_OFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'WRITE_OFF_DOWNLOAD')), 'STATUS',0,'N', NULL, NULL, NULL, NULL, '6', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'WRITE_OFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'WRITE_OFF_DOWNLOAD')), 'ErrorDesc',0,'N', NULL, NULL, NULL, NULL, '7', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'WRITE_OFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'WRITE_OFF_DOWNLOAD')), 'CREATEDBY',	     0,'N', NULL, NULL, NULL, NULL, '0', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'WRITE_OFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'WRITE_OFF_DOWNLOAD')), 'APPROVEDBY',	     0,'N', NULL, NULL, NULL, NULL, '0', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'WRITE_OFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'WRITE_OFF_DOWNLOAD')), 'CREATEDON',	     0,'N', NULL, NULL, NULL, NULL, '0', NULL, NULL, NULL, 'dd-MMM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'WRITE_OFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'WRITE_OFF_DOWNLOAD')), 'APPROVEDON',0,'N', NULL, NULL, NULL, NULL, '0', NULL, NULL, NULL, 'dd-MMM-yyyy', 'O');
			]]>
		</sql>
	</changeSet>

	<changeSet id="TK#4750.8" author="sampath.d">
		<sql>
			<![CDATA[
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'WRITEOFF_UPLOAD_MAKER');
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'WRITEOFF_UPLOAD_APPROVER');
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'WRITEOFF_UPLOAD_VIEW');

				DELETE FROM SECROLES WHERE ROLECD = 'WRITEOFF_UPLOAD_MAKER';
				DELETE FROM SECROLES WHERE ROLECD = 'WRITEOFF_UPLOAD_APPROVER';
				DELETE FROM SECROLES WHERE ROLECD = 'WRITEOFF_UPLOAD_VIEW';

				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'WRITEOFF_UPLOAD_MAKER');
 				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'WRITEOFF_UPLOAD_APPROVER');
 				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'WRITEOFF_UPLOAD_VIEW');

				DELETE FROM SECGROUPS WHERE GRPCODE ='WRITEOFF_UPLOAD_MAKER';
				DELETE FROM SECGROUPS WHERE GRPCODE ='WRITEOFF_UPLOAD_APPROVER';
				DELETE FROM SECGROUPS WHERE GRPCODE ='WRITEOFF_UPLOAD_VIEW';

				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='menu_Item_WriteOffUpload_Maker';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='menu_Item_WriteOffUpload_Approver';

				INSERT INTO SECRIGHTS(RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_WriteOffUpload_Maker', 'MENU', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS(RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_WriteOffUpload_Approver', 'MENU', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'WRITEOFF_UPLOAD_MAKER', 'WF Maker for Write Off Upload', 0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'WRITEOFF_UPLOAD_APPROVER', 'WF Approver for Write Off Upload', 0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'WRITEOFF_UPLOAD_VIEW', 'WF menu for Write Off Upload', 0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);

				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'WRITEOFF_UPLOAD_MAKER'),    (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_WriteOffUpload_Maker'),    1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'WRITEOFF_UPLOAD_APPROVER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_WriteOffUpload_Approver'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'WRITEOFF_UPLOAD_VIEW'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_WriteOffUpload_Maker'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'WRITEOFF_UPLOAD_VIEW'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_WriteOffUpload_Approver'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);

				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'WRITEOFF_UPLOAD_MAKER', 'Maker role from Write Off Upload', '', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0); 
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'WRITEOFF_UPLOAD_APPROVER', 'Approver role from Write Off Upload',	'', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'WRITEOFF_UPLOAD_VIEW', 'men8 role from Write Off Upload',	'', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);

				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'WRITEOFF_UPLOAD_MAKER'),    (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'WRITEOFF_UPLOAD_MAKER'),    0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'WRITEOFF_UPLOAD_APPROVER'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'WRITEOFF_UPLOAD_APPROVER'), 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'WRITEOFF_UPLOAD_VIEW'),    (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'WRITEOFF_UPLOAD_VIEW'),    0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="TK#4753.1" author="sampath.d">
		<createTable tableName="REV_WRITE_OFF_UPLOAD">
			<column name="Id" type="bigint" autoIncrement="true">
				<constraints nullable="false" />
			</column>
			<column name="HeaderId" type="bigint" />
			<column name="RecordSeq" type="bigint" />
			<column name="FinID" type="bigint" />
			<column name="FinReference" type="varchar(20)" />
			<column name="Remarks" type="varchar(50)" />
			<column name="Progress" type="int" />
			<column name="Status" type="char(1)" />
			<column name="ErrorCode" type="varchar(20)" />
			<column name="ErrorDesc" type="varchar(2000)" />
		</createTable>
	</changeSet>

	<changeSet id="TK#4753.2" author="sampath.d">
		<addPrimaryKey tableName="REV_WRITE_OFF_UPLOAD" columnNames="Id"
			constraintName="PK_REV_WRITE_OFF_UPLOAD_ID" />
	</changeSet>
	
	<changeSet id="TK#4753.6" author="sampath.d">
		<sql>
			<![CDATA[
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'REV_WRITE_OFF_UPLOAD_MAKER');
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'REV_WRITE_OFF_UPLOAD_APPROVER');
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'REV_WRITE_OFF_UPLOAD_VIEW');

				DELETE FROM SECROLES WHERE ROLECD = 'REV_WRITE_OFF_UPLOAD_MAKER';
				DELETE FROM SECROLES WHERE ROLECD = 'REV_WRITE_OFF_UPLOAD_APPROVER';
				DELETE FROM SECROLES WHERE ROLECD = 'REV_WRITE_OFF_UPLOAD_VIEW';

				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'REV_WRITE_OFF_UPLOAD_MAKER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'REV_WRITE_OFF_UPLOAD_APPROVER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'REV_WRITE_OFF_UPLOAD_VIEW');

				DELETE FROM SECGROUPS WHERE GRPCODE ='REV_WRITE_OFF_UPLOAD_MAKER';
				DELETE FROM SECGROUPS WHERE GRPCODE ='REV_WRITE_OFF_UPLOAD_APPROVER';
				DELETE FROM SECGROUPS WHERE GRPCODE ='REV_WRITE_OFF_UPLOAD_VIEW';

				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='menu_Item_RevWriteOffUpload_Maker';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='menu_Item_RevWriteOffUpload_Approver';

				INSERT INTO SECRIGHTS(RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_RevWriteOffUpload_Maker', 'MENU', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS(RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_RevWriteOffUpload_Approver', 'MENU', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'REV_WRITE_OFF_UPLOAD_MAKER', 'WF Maker for Write Off Upload', 0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'REV_WRITE_OFF_UPLOAD_APPROVER', 'WF Approver for Write Off Upload', 0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'REV_WRITE_OFF_UPLOAD_VIEW', 'WF menu for Write Off Upload', 0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);

				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'REV_WRITE_OFF_UPLOAD_MAKER'),    (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_RevWriteOffUpload_Maker'),    1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'REV_WRITE_OFF_UPLOAD_APPROVER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_RevWriteOffUpload_Approver'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'REV_WRITE_OFF_UPLOAD_VIEW'),     (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_RevWriteOffUpload_Maker'),    1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'REV_WRITE_OFF_UPLOAD_VIEW'), 	   (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_RevWriteOffUpload_Approver'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);

				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'REV_WRITE_OFF_UPLOAD_MAKER', 'Maker role from Write Off Upload', '', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0); 
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'REV_WRITE_OFF_UPLOAD_APPROVER', 'Approver role from Write Off Upload',	'', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'REV_WRITE_OFF_UPLOAD_VIEW', 'Menu role from Write Off Upload',	'', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);

				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'REV_WRITE_OFF_UPLOAD_MAKER'),    (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'REV_WRITE_OFF_UPLOAD_MAKER'),    0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'REV_WRITE_OFF_UPLOAD_APPROVER'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'WRITEOFF_UPLOAD_APPROVER'), 		0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'REV_WRITE_OFF_UPLOAD_VIEW'), 	  (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'REV_WRITE_OFF_UPLOAD_VIEW'), 	0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="TK#4753.7" author="sampath.d">
		<createTable tableName="FIN_WRITE_OFF_DETAIL_LOG">
			<column name="Id" type="bigint" autoIncrement="true">
				<constraints nullable="false" />
			</column>
			<column name="FinId" type="bigint" />
			<column name="FinReference" type="varchar(20)" />
			<column name="WriteOffDate" type="datetime" />
			<column name="SeqNo" type="decimal(10,0)" />
			<column name="WrittenOffPri" type="decimal(18,0)" />
			<column name="WrittenOffPft" type="decimal(18,0)" />
			<column name="CurOdPri" type="decimal(18,0)" />
			<column name="CurOdPft" type="decimal(18,0)" />
			<column name="UnPaidSchdPri" type="decimal(18,0)" />
			<column name="UnPaidSchdPft" type="decimal(18,0)" />
			<column name="PenaltyAmount" type="decimal(18,0)" />
			<column name="ProvisionedAmount" type="decimal(18,0)" />
			<column name="WriteOffPrincipal" type="decimal(18,0)" />
			<column name="WriteOffProfit" type="decimal(18,0)" />
			<column name="AdjAmount" type="decimal(18,0)" />
			<column name="Remarks" type="varchar(200)" />
			<column name="WrittenOffAcc" type="varchar(50)" />
			<column name="WrittenOffSchFee" type="decimal(18,0)" />
			<column name="UnPaidSchFee" type="decimal(18,0)" />
			<column name="WriteOffSchFee" type="decimal(18,0)" />
		</createTable>
	</changeSet>

	<changeSet id="TK#4753.8" author="sampath.d">
		<addPrimaryKey tableName="FIN_WRITE_OFF_DETAIL_LOG" columnNames="Id"
			constraintName="PK_FINWRITEOFFDETAIL_LOG_ID" />
	</changeSet>

	<changeSet id="TK#4750.3" author="sampath.d">
		<createTable tableName="WRITE_OFF_UPLOAD_LOG">
			<column name="Id" type="bigint" autoIncrement="true">
				<constraints nullable="false" />
			</column>
			<column name="FinID" type="bigint" />
			<column name="FinReference" type="varchar(20)" />
			<column name="Remarks" type="varchar(50)" />
			<column name="CreatedBy" type="bigint" />
			<column name="CreatedOn" type="datetime" />
			<column name="ApprovedBy" type="bigint" />
			<column name="ApprovedOn" type="datetime" />
			<column name="Event" type="varchar(20)" />
			<column name="ReceiptId" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet id="TK#4750.4" author="sampath.d">
		<addPrimaryKey tableName="WRITE_OFF_UPLOAD_LOG" columnNames="Id"
			constraintName="PK_HWRITEOFF_UPLOAD_LOG_ID" />
	</changeSet>

	<changeSet id="TK#4753.9" author="sampath.d">
		<sql>
			<![CDATA[
				DELETE FROM BMTAEEVENTS WHERE AEEVENTCODE = 'REVWRITE';
				
				DELETE FROM BMTAMOUNTCODES WHERE ALLOWEDEVENT = 'REVWRITE';
				
				DELETE FROM CATEGORYWISEEVENTS WHERE AEEVENTCODE= 'REVWRITE' AND CATEGORYCODE= 'C';
				DELETE FROM CATEGORYWISEEVENTS WHERE AEEVENTCODE= 'REVWRITE' AND CATEGORYCODE= 'F';
				
				INSERT INTO BMTAEEVENTS(AEEVENTCODE, AEEVENTCODEDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, ACTIVE) VALUES ('REVWRITE', 'Reverse WriteOff accounting', 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0, 1);
	
				INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_accrue',      		'Accrued Interest',											1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
	            INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_accrueS',				'Accrued Interest in suspense', 							1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
	            INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_accrueTsfd',			'Accrued Amount Transferred', 								1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
	            INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_amz',					'Amortized interest', 										1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
	            INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_amzNRM',				'Amortized interest in normal period', 						1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
	            INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_amzPD',				'Amortized interest in pastdue period', 					1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
	            INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_amzS',				'Amortized interest in suspended period', 					1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
	            INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_cpzChg',				'Capitalization Changed now', 								1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
	            INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_cpzCur',				'Capitalization amount in current period', 					1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
	            INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_cpzNxt',				'Capitalzie on next schedule date', 						1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
	            INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_cpzPrv',				'Capitalzie on previous schedule date', 					1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
	            INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_cpzTot',				'Total Capitalization amount', 								1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
	            INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_dAccrue',				'Accrued Interest From previous Accrual Date', 				1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
	            INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_dAccrueS',			'Accrued Interest in Suspense From previous Accrual Date',  1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
	            INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_dAmz',				'Amortized Interest From previous Amz Date', 				1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
	            INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_dAmzNRM',				'Amortized Interest in Normal From previous Amz Date', 		1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
	            INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_dAmzPD',				'Amortized Interest in PD From previous Amz Date', 			1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
	            INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_dAmzS',				'Amortized Interest in Suspense From previous Amz Date', 	1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
	            INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_emiInAdvance',		'EMI in advance amount for payment/receipt', 				1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
	            INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_excessAmt',			'Excess amount for payment/receipt', 						1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
	            INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_FeeChargeAmt',		'Total Fee and Charges paid/scheduled now', 				1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
	            INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_incrCostPay', 		'Increased Cost Paid', 										1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
	            INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_InsPay',				'Insurance amount paid', 									1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
	            INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_insRefund',			'Insurance amount refunded', 								1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
	            INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_InsuranceAmt',		'Insurance amount scheduled', 								1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
                INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_payableAdvise',		'Payable advise amount for payment/receipt', 				1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
                INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_penalty',				'Penalty Amount', 											1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
                INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_penaltyDue',			'Penalty Due', 												1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
                INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_penaltyPaid',			'Penalty Paid', 											1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
                INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_penaltyWaived',		'Penalty Waived', 											1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
                INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_pft',					'Total Interest', 											1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
                INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_pftAB',				'Total Interest Due for the loan', 							1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
                INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_pftAP',				'Total Interest Paid for the loan', 						1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
                INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_pri',					'Total Principal', 											1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
                INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_priAB',				'Total Principal Due for the loan', 						1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
                INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_priAP',				'Total Principal Paid for the loan', 						1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
                INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_provAmt',				'Calculated/Derived Provision Amount', 						1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
                INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_provDue',				'Provision Due Amount', 									1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
                INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_prvAccrueTsfd',		'Accrue Transferred as of previous month', 					1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
                INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_rebate',				'Rebate Amount', 											1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
                INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_refund',				'Refund Amount', 											1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
                INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_rpPft',				'Total Repay Interest now (P)', 							1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
                INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_rpPri',				'Total Repay Principal now (P)', 							1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
                INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_rpTot',				'Total Repay now (P+I)', 									1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
                INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_suplRentPay',			'Suplementary Rent', 										1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
                INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_suspNow',				'Interest Suspended Now',		 							1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
                INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_suspRls',				'Interest Released from Suspense Now', 						1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
                INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_waiver',				'Waiver Amount', 											1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
                INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_totalREVWRITE',		'Total Wriiten-Off Amount', 								1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
                INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_dLPIAmz',				'Amortized Late Payment Interest', 							1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
                INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_dLPPAmz',				'Amortized Late Payment Penalty', 							1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
                INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_dGSTLPIAmz',			'Amortized Late Payment Interest GST', 						1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
                INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_dGSTLPPAmz',			'Amortized Late Payment Penalty GST', 						1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
                INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_pftS',				'Total Interest as per schedule till today',				1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
                INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_pftSB',				'Total Interest due as per schedule till today',			1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
                INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_priSB',				'Total Principal due as per schedule till today',			1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
                INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_odPri',				'OverDue Principal',										1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
                INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_odPft',				'OverDue Profit',											1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
                INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_prvMntAmz',			'Previous Month Amortized interest',						1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
                INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_priPaidWO',			'Total Principal Paid during Write Off Stage',				1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
                INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'ae_pftPaidWO',			'Total Interest Collected during Write Off Stage',			1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'bounceChargePaid',		'Bounce charges Paid', 										1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
                INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'bounceChargeWaived',		'Bounce charges Waived', 									1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
                INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'bounceCharge_CESS_AF',	'Bounce charge CESS AF Waived', 							1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
                INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'bounceCharge_CESS_N', 	'Bounce charge CESS NET Waived', 							1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
                INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'bounceCharge_CESS_P', 	'Bounce charge CESS PAID Waived', 							1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
                INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'bounceCharge_CESS_SCH',	'Bounce charge CESS SCHEDULE Waived', 						1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
                INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'bounceCharge_CESS_W',	'Bounce charge CESS WAIVER Waived', 						1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
                INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'bounceCharge_CGST_P',	'Bounce charge CGST paid', 									1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
                INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'bounceCharge_IGST_P',	'Bounce charge IGST paid', 									1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
                INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'bounceCharge_SGST_P',	'Bounce charge SGST paid', 									1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
                INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'bounceCharge_UGST_P',	'Bounce charge UGST paid', 									1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
                INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'bounceCharge_UGST_W',	'Bounce charge UGST Waived', 								1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
                INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'bounceCharge_CGST_W',	'Bounce charge CGST Waived', 								1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
                INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'bounceCharge_IGST_W',	'Bounce charge IGST Waived', 								1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
                INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('REVWRITE', 0, 'bounceCharge_SGST_W',	'Bounce charge SGST Waived', 								1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);

				INSERT INTO CATEGORYWISEEVENTS (AEEVENTCODE, CATEGORYCODE, ACTIVE, MANDATORY, SEQORDER) VALUES ('REVWRITE', 'C', 1, 0, (SELECT MAX(SEQORDER)+1 FROM CATEGORYWISEEVENTS WHERE CATEGORYCODE = 'C'));
				INSERT INTO CATEGORYWISEEVENTS (AEEVENTCODE, CATEGORYCODE, ACTIVE, MANDATORY, SEQORDER) VALUES ('REVWRITE', 'F', 1, 0, (SELECT MAX(SEQORDER)+1 FROM CATEGORYWISEEVENTS WHERE CATEGORYCODE = 'F'));
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1471.21" author="Mounika.M">
		<sql>
		    <![CDATA[
		    	DELETE FROM SMTPARAMETERS WHERE SYSPARMCODE = 'DPD_STRING_CALCULATION_ON';
		    ]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1468.1" author="sainaveen.y">
		<createTable tableName="BRANCH_CHANGE_UPLOAD">
			<column name="Id" type="bigint" autoIncrement="true">
				<constraints nullable="false" />
			</column>
			<column name="RecordSeq" type="bigint" />
			<column name="HeaderID" type="bigint" />
			<column name="FinID" type="bigint" />
			<column name="FinReference" type="varchar(20)" />
			<column name="BranchCode" type="varchar(12)" />
			<column name="Remarks" type="varchar(50)" />
			<column name="Progress" type="int" />
			<column name="Status" type="char(1)" />
			<column name="ErrorCode" type="varchar(20)" />
			<column name="ErrorDesc" type="varchar(2000)" />
		</createTable>
	</changeSet>

	<changeSet id="ST#1468.2" author="sainaveen.y">
		<addPrimaryKey constraintName="PK_BRANCH_CHANGE_UPLOAD_ID" tableName="BRANCH_CHANGE_UPLOAD"
			columnNames="id" />
	</changeSet>

	<changeSet id="ST#1468.4" author="sainaveen.y">
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='BRANCH_CHANGE_TEMPLATE');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='BRANCH_CHANGE_TEMPLATE');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='BRANCH_CHANGE_TEMPLATE';
							
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'BRANCH_CHANGE_TEMPLATE'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID IN (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'BRANCH_CHANGE_TEMPLATE');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'BRANCH_CHANGE_TEMPLATE';
							
				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'BRANCH_CHANGE_TEMPLATE', 'Branch Change Template Download', 3, 'BRANCHCHANGE', NULL, NULL, ',' , 0, 0, NULL, 'ROW:{LAN Reference,Branch Code,Remarks}',  '', 'A', '/opt/PFF/BASE/hdfc/branch/template', 'BranchChange_', '.xlsx', 0, current_timestamp, '${ddMMYYYYHms}', NULL, 0, NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'BRANCH_CHANGE_TEMPLATE'), 'BRANCH_CHANGE_UPLOAD',  0, 'ID', 'HEADERID = :HEADERID', NULL, NULL, NULL, NULL, NULL, NULL, 4, 0, 0);
				
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'BRANCH_CHANGE_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'BRANCH_CHANGE_TEMPLATE')),  'HEADERID',                1, 'N', NULL, NULL, NULL, NULL, '0',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'BRANCH_CHANGE_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'BRANCH_CHANGE_TEMPLATE')),  'FINREFERENCE',            0, 'N', NULL, NULL, NULL, NULL, '0',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'BRANCH_CHANGE_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'BRANCH_CHANGE_TEMPLATE')),  'BRANCHCODE',              0, 'N', NULL, NULL, NULL, NULL, '1',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'BRANCH_CHANGE_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'BRANCH_CHANGE_TEMPLATE')),  'REMARKS',                 0, 'N', NULL, NULL, NULL, NULL, '2',  NULL, NULL, NULL, NULL, 'O');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1468.5" author="sainaveen.y">
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='BRANCH_CHANGE_DOWNLOAD');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='BRANCH_CHANGE_DOWNLOAD');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='BRANCH_CHANGE_DOWNLOAD';
							
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'BRANCH_CHANGE_DOWNLOAD'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID IN (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'BRANCH_CHANGE_DOWNLOAD');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'BRANCH_CHANGE_DOWNLOAD';
							
				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'BRANCH_CHANGE_DOWNLOAD', 'Branch Change Download', 3, 'BRANCHCHANGE', NULL, NULL, ',' , 0, 0, NULL, 'ROW:{LAN Reference,Branch Code,Remarks, Upload Status, ErrorCode, ErrorDesc, Created On, Created By, Approved On, Approved By}',  '', 'A', '/opt/PFF/BASE/hdfc/branch/download', 'BranchChange_', '.xlsx', 0, current_timestamp, '${ddMMYYYYHms}', NULL, 0, NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'BRANCH_CHANGE_DOWNLOAD'), 'BRANCH_CHANGE_UPLOAD',  0, 'ID', 'HEADERID = :HEADERID', NULL, NULL, NULL, NULL, NULL, NULL, 10, 0, 0);
				
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'BRANCH_CHANGE_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'BRANCH_CHANGE_DOWNLOAD')),  'FINREFERENCE',            0, 'N', NULL, NULL, NULL, NULL, '0',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'BRANCH_CHANGE_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'BRANCH_CHANGE_DOWNLOAD')),  'BRANCHCODE',              0, 'N', NULL, NULL, NULL, NULL, '1',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'BRANCH_CHANGE_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'BRANCH_CHANGE_DOWNLOAD')),  'REMARKS',                 0, 'N', NULL, NULL, NULL, NULL, '2',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'BRANCH_CHANGE_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'BRANCH_CHANGE_DOWNLOAD')),  'STATUS',	                0, 'N', NULL, NULL, NULL, NULL, '3', NULL, NULL, NULL,  NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'BRANCH_CHANGE_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'BRANCH_CHANGE_DOWNLOAD')),  'ERRORCODE',	            0, 'N', NULL, NULL, NULL, NULL, '4', NULL, NULL, NULL,  NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'BRANCH_CHANGE_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'BRANCH_CHANGE_DOWNLOAD')),  'ERRORDESC',	            0, 'N', NULL, NULL, NULL, NULL, '5', NULL, NULL, NULL,  NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'BRANCH_CHANGE_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'BRANCH_CHANGE_DOWNLOAD')),  'CREATEDON',	            0, 'N', NULL, NULL, NULL, NULL, '6', NULL, NULL, NULL,  'dd-MMM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'BRANCH_CHANGE_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'BRANCH_CHANGE_DOWNLOAD')),  'CREATEDNAME',	            0, 'N', NULL, NULL, NULL, NULL, '7', NULL, NULL, NULL,  NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'BRANCH_CHANGE_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'BRANCH_CHANGE_DOWNLOAD')),  'APPROVEDON',	            0, 'N', NULL, NULL, NULL, NULL, '8', NULL, NULL, NULL,  'dd-MMM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'BRANCH_CHANGE_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'BRANCH_CHANGE_DOWNLOAD')),  'APPROVEDNAME',	        0, 'N', NULL, NULL, NULL, NULL, '9', NULL, NULL, NULL,  NULL, 'O');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1468.6" author="sainaveen.y">
		<sql>
			<![CDATA[
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'BRANCH_CHANGE_UPLOAD_MAKER');
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'BRANCH_CHANGE_UPLOAD_APPROVER');
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'BRANCH_CHANGE_UPLOAD_VIEW');

				DELETE FROM SECROLES WHERE ROLECD ='BRANCH_CHANGE_UPLOAD_MAKER';
				DELETE FROM SECROLES WHERE ROLECD ='BRANCH_CHANGE_UPLOAD_APPROVER';
				DELETE FROM SECROLES WHERE ROLECD ='BRANCH_CHANGE_UPLOAD_VIEW';

				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'BRANCH_CHANGE_UPLOAD_MAKER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'BRANCH_CHANGE_UPLOAD_APPROVER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'BRANCH_CHANGE_UPLOAD_VIEW');

				DELETE FROM SECGROUPS WHERE GRPCODE ='BRANCH_CHANGE_UPLOAD_MAKER';
				DELETE FROM SECGROUPS WHERE GRPCODE ='BRANCH_CHANGE_UPLOAD_APPROVER';
				DELETE FROM SECGROUPS WHERE GRPCODE ='BRANCH_CHANGE_UPLOAD_VIEW';

				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='menu_Item_BulkBranchChangeUpload_Maker';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='menu_Item_BulkBranchChangeUpload_Approver';

				INSERT INTO SECRIGHTS(RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_BulkBranchChangeUpload_Maker', 'MENU', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS(RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_BulkBranchChangeUpload_Approver', 'MENU', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'BRANCH_CHANGE_UPLOAD_MAKER', 'WF Maker for Branch Change Upload', 0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'BRANCH_CHANGE_UPLOAD_APPROVER', 'WF Approver for Branch Change Upload', 0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'BRANCH_CHANGE_UPLOAD_VIEW', 'WF Menu for Branch Change Upload', 0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);

				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'BRANCH_CHANGE_UPLOAD_MAKER'),    (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_BulkBranchChangeUpload_Maker'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'BRANCH_CHANGE_UPLOAD_APPROVER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_BulkBranchChangeUpload_Approver'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'BRANCH_CHANGE_UPLOAD_VIEW'),    (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_BulkBranchChangeUpload_Maker'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'BRANCH_CHANGE_UPLOAD_VIEW'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_BulkBranchChangeUpload_Approver'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);

				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'BRANCH_CHANGE_UPLOAD_MAKER', 'Maker role from Branch Change Upload', '', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0); 
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'BRANCH_CHANGE_UPLOAD_APPROVER', 'Approver role from Branch Change Upload',	'', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'BRANCH_CHANGE_UPLOAD_VIEW', 'Menu role from Branch Change Upload',	'', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);

				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'BRANCH_CHANGE_UPLOAD_MAKER'),    (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'BRANCH_CHANGE_UPLOAD_MAKER'),    0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'BRANCH_CHANGE_UPLOAD_APPROVER'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'BRANCH_CHANGE_UPLOAD_APPROVER'), 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'BRANCH_CHANGE_UPLOAD_VIEW'), 	  (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'BRANCH_CHANGE_UPLOAD_VIEW'),     0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1468.7" author="sainaveen.y">
		<createTable tableName="BRANCH_CHANGE_UPLOAD_LOG">
			<column name="Id" type="bigint" autoIncrement="true">
				<constraints nullable="false" />
			</column>
			<column name="FinID" type="bigint" />
			<column name="FinReference" type="varchar(20)" />
			<column name="OldBranch" type="varchar(12)" />
			<column name="NewBranch" type="varchar(12)" />
			<column name="CreatedBy" type="bigint" />
			<column name="CreatedOn" type="datetime" />
			<column name="ApprovedBy" type="bigint" />
			<column name="ApprovedOn" type="datetime" />
		</createTable>
	</changeSet>

	<changeSet id="ST#1468.8" author="sainaveen.y">
		<addPrimaryKey constraintName="PK_BRANCH_CHANGE_UPLOAD_LOG_ID" tableName="BRANCH_CHANGE_UPLOAD_LOG"
			columnNames="id" />
	</changeSet>

	<changeSet id="ST#1468.9" author="saikrihna.b">
		<sql>
			<![CDATA[
				INSERT INTO BMTAEEVENTS (AEEVENTCODE, AEEVENTCODEDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, ACTIVE) VALUES ('BRNCHG', 	'Accounting For Branch Change', 	1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0, 1);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1495.1.5_2_pre" author="ramya.v" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_view'); 
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1495.1.5_2" author="ramya.v">
		<createView viewName="RMTFINANCETYPES_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINTYPE,
				    T1.FINCATEGORY,
				    T1.FINTYPEDESC,
				    T1.FINCCY,
				    T1.FINDAYSCALTYPE,
				    T1.FINISGENREF,
				    T1.FINMAXAMOUNT,
				    T1.FINMINAMOUNT,
				    T1.FINDFTSTMTFRQ,
				    T1.FINISALWMD,
				    T1.FINSCHDMTHD,
				    T1.FINISALWGRACE,
				    T1.FINHISTRETENSION,
				    T1.EQUALREPAYMENT,
				    T1.FINRATETYPE,
				    T1.FINBASERATE,
				    T1.FINSPLRATE,
				    T1.FININTRATE,
				    T1.FINMINRATE,
				    T1.FINMAXRATE,
				    T1.FINDFTINTFRQ,
				    T1.FINISINTCPZ,
				    T1.FINCPZFRQ,
				    T1.FINISRVWALW,
				    T1.FINRVWFRQ,
				    T1.FINGRCRATETYPE,
				    T1.FINGRCBASERATE,
				    T1.FINGRCSPLRATE,
				    T1.FINGRCINTRATE,
				    T1.FINGRCMINRATE,
				    T1.FINGRCMAXRATE,
				    T1.FINGRCDFTINTFRQ,
				    T1.FINGRCISINTCPZ,
				    T1.FINGRCCPZFRQ,
				    T1.FINGRCISRVWALW,
				    T1.FINGRCRVWFRQ,
				    T1.FINMINTERM,
				    T1.FINMAXTERM,
				    T1.FINDFTTERMS,
				    T1.FINRPYFRQ,
				    T1.FINREPAYMETHOD,
				    T1.FINISALWPARTIALRPY,
				    T1.FINISALWDIFFERMENT,
				    T1.FINMAXDIFFERMENT,
				    T1.FINISALWEARLYRPY,
				    T1.FINISALWEARLYSETTLE,
				    T1.FINODRPYTRIES,
				    T1.FINEARLYPAYRULE,
				    T1.FINEARLYSETTLERULE,
				    T1.FINISACTIVE,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T1.STEPFINANCE,
				    T1.STEPPINGMANDATORY,
				    T1.ALWMANUALSTEPS,
				    T1.ALWDSTEPPOLICIES,
				    T1.DFTSTEPPOLICY,
				    T1.FINISDWPAYREQUIRED,
				    T1.FINRVWRATEAPPLFOR,
				    T1.FINALWRATECHANGEANYDATE,
				    T1.FINISINTCPZATGRCEND,
				    T1.FINELGRULECODE,
				    T1.LIMITELGRULECODE,
				    T1.FINSCHCALCODEONRVW,
				    T1.ALWPLANDEFERMENT,
				    T1.PLANDEFERCOUNT,
				    T1.FINASSETTYPE,
				    T1.FINISALWGRCREPAY,
				    T1.FINGRCSCHDMTHD,
				    T1.FINGRCMARGIN,
				    T1.FINMARGIN,
				    T1.FINSCHEDULEON,
				    T1.FINGRCSCHEDULEON,
				    T1.FINCOMMITMENTREQ,
				    T1.FINCOLLATERALREQ,
				    T1.OVERRIDELIMIT,
				    T1.LIMITREQUIRED,
				    T1.FINCOMMITMENTOVRRIDE,
				    T1.FINCOLLATERALOVRRIDE,
				    T1.FINPFTUNCHANGED,
				    T1.APPLYODPENALTY,
				    T1.ODINCGRCDAYS,
				    T1.ODCHARGETYPE,
				    T1.ODGRACEDAYS,
				    T1.ODCHARGECALON,
				    T1.ODCHARGEAMTORPERC,
				    T1.ODALLOWWAIVER,
				    T1.ODMAXWAIVERPERC,
				    T1.FINDIVISION,
				    T48.DIVISIONCODEDESC LOVDESCFINDIVISIONNAME,
				    T48.ENTITYCODE LOVDESCENTITYCODE,
				    T1.PRODUCT,
				    T1.STARTDATE,
				    T1.ENDDATE,
				    T1.FINTYPEDESC LOVDESCPROMOFINTYPEDESC,
				    T1.REMARKS,
				    T1.ALWEARLYPAYMETHODS,
				    T1.PASTDUEPFTCALMTHD,
				    T1.PASTDUEPFTMARGIN,
				    T1.DOWNPAYRULE,
				    T59.RULECODE DOWNPAYRULECODE,
				    T59.RULECODEDESC DOWNPAYRULEDESC,
				    T1.FINSUSPTRIGGER,
				    T1.FINSUSPREMARKS,
				    T1.ALWMULTIPARTYDISB,
				    T1.COLLATERALTYPE,
				    T1.TDSAPPLICABLE,
				    T1.MANUALSCHEDULE,
				    T1.APPLYGRCPRICING,
				    T1.GRCPRICINGMETHOD,
				    T1.APPLYRPYPRICING,
				    T1.RPYPRICINGMETHOD,
				    T1.RPYHIERARCHY,
				    T67.RULECODE GRCPRICINGMETHODDESC,
				    T68.RULECODE RPYPRICINGMETHODDESC,
				    T1.DROPLINEOD,
				    T1.DROPPINGMETHOD,
				    T1.RATECHGANYDAY,
				    T1.FINREPAYPFTONFRQ,
				    T1.ALWBPI,
				    T1.BPITREATMENT,
				    T1.PFTDUESCHON,
				    T1.PLANEMIHALW,
				    T1.PLANEMIHMETHOD,
				    T1.PLANEMIHMAXPERYEAR,
				    T1.PLANEMIHMAX,
				    T1.PLANEMIHLOCKPERIOD,
				    T1.PLANEMICPZ,
				    T1.UNPLANEMIHLOCKPERIOD,
				    T1.UNPLANEMICPZ,
				    T1.REAGECPZ,
				    T1.FDDLOCKPERIOD,
				    T1.ALWDRPYMETHODS,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.ROUNDINGMODE,
				    T1.ROUNDINGTARGET,
				    T1.FREQUENCYDAYS,
				    T1.QUICKDISB,
				    T1.ALWMAXDISBCHECKREQ,
				    T1.ALWREAGE,
				    T1.ALWUNPLANEMIHOLIDAY,
				    T1.PROFITCENTERID,
				    T69.PROFITCENTERCODE,
				    T69.PROFITCENTERDESC,
				    T1.PRODUCTCATEGORY,
				    T2.PRODUCTDESC FINCATEGORYDESC,
				    T1.DEVELOPERFINANCE,
				    T1.COSTOFFUNDS,
				    T1.CHEQUECAPTUREREQ,
				    T1.FINLTVCHECK,
				    T1.PARTIALLYSECURED,
				    T1.ALWADVEMI,
				    T1.ADVEMIMINTERMS,
				    T1.ADVEMIMAXTERMS,
				    T1.ADVEMIDFTTERMS,
				    T1.ADVEMISCHDMTHD,
				    T1.BPIPFTDAYSBASIS,
				    T1.ELIGIBILITYMETHODS,
				    T1.ALWHYBRIDRATE,
				    T1.FIXEDRATETENOR,
				    T1.ODMINCAPAMOUNT,
				    T1.ODRULECODE,
				    T1.ALWZEROINTACC,
				    T1.AUTOREJECTIONDAYS,
				    T1.TAXNOMAND,
				    T1.PUTCALLREQUIRED,
				    T1.GRCADVINTERSETREQ,
				    T1.GRCADVTYPE,
				    T1.GRCADVMINTERMS,
				    T1.GRCADVMAXTERMS,
				    T1.GRCADVDEFAULTTERMS,
				    T1.ADVINTERSETREQ,
				    T1.ADVTYPE,
				    T1.ADVMINTERMS,
				    T1.ADVMAXTERMS,
				    T1.ADVDEFAULTTERMS,
				    T1.ADVSTAGE,
				    T1.DSFREQ,
				    T1.CASHCOLLATERALREQ,
				    T1.TDSALLOWTOMODIFY,
				    T1.TDSAPPLICABLETO,
				    T1.ALWVAN,
				    T1.VANALLOCATIONMETHOD,
				    T1.ALLOWDRAWINGPOWER,
				    T1.ALLOWREVOLVING,
				    T1.ALWSANCTIONAMT,
				    T1.ALWSANCTIONAMTOVERRIDE,
				    T1.SANBSDSCHDLE,
				    T1.FINISRATERVWATGRCEND,
				    T1.SCHDONPMTCAL,
				    T1.AUTOAPPROVE,
				    T1.OCRREQUIRED,
				    T1.ALLOWEDOCRS,
				    T1.DEFAULTOCR,
				    T1.ALLOWEDLOANPURPOSES,
				    T1.SPECIFICLOANPURPOSES,
				    T1.ALWPLANNEDEMIINGRC,
				    T1.GRCADJREQ,
				    T1.GRCPERIODAFTRFULLDISB,
				    T1.AUTOINCRGRCENDDATE,
				    T1.GRCAUTOINCRMONTHS,
				    T1.MAXAUTOINCRALLOWED,
				    T1.THRLDTOMAINTAINGRCPRD,
				    T1.ALWLOANSPLIT,
				    T1.SPLITLOANTYPE,
				    T1.INSTBASEDSCHD,
				    T1.TDSTYPE,
				    T1.CALCOFSTEPS,
				    T1.STEPSAPPLIEDFOR,
				    T1.SUBVENTIONREQ,
					T1.OVERDRAFTTXNCHRGREQ,
					T1.OVERDRAFTTXNCHRGFEETYPE,
					T1.OVERDRAFTEXTGRACEDAYS,
					T1.OVERDRAFTCOLCHRGFEETYPE,
					T1.OVERDRAFTCOLAMT,
					T1.REGPROVRULE,
					T1.INTPROVRULE,
					T1.CLOSURETHRESHOLDLIMIT,
					T1.MAXFPPCALTYPE,
					T1.MAXFPPAMOUNT,
					T1.MAXFPPPER,
					T1.MAXFPPCALON,
					T1.PPLOCKINPERIOD,
					T1.ESLOCKINPERIOD,
					T1.MINPPCALTYPE,
					T1.MINPPAMOUNT,
					T1.MINPPPERCENTAGE,
					T1.MINPPCALON,
					T1.MAXPPCALTYPE,
					T1.MAXPPAMOUNT,
					T1.MAXPPPERCENTAGE,
					T1.MAXPPCALON,
					T1.ALLOWAUTOREFUND, 
					T1.MAXAUTOREFUND, 
					T1.MINAUTOREFUND,
					T1.NPARPYHIERARCHY,
					T1.ASSETCLASSSETUP,
					ASCH.CODE ASSETCLASSSETUPCODE,
					ASCH.DESCRIPTION ASSETCLASSSETUPDESC,
					T1.ODMINAMOUNT,
					T1.ALLOWCANCELFIN,
					T1.WRITEOFFREPAYHRY, 
					T1.MATUREREPAYHRY, 
					T1.PRESENTMENTREPAYHRY			 
				FROM RMTFINANCETYPES_TEMP T1
				LEFT JOIN BMTPRODUCT T2 ON T1.FINCATEGORY = T2.PRODUCTCODE
				LEFT JOIN SMTDIVISIONDETAIL T48 ON T1.FINDIVISION = T48.DIVISIONCODE
				LEFT JOIN RULES T59 ON T1.DOWNPAYRULE = T59.RULEID
				LEFT JOIN RULES T67 ON T1.GRCPRICINGMETHOD = T67.RULEID
				LEFT JOIN RULES T68 ON T1.RPYPRICINGMETHOD = T68.RULEID
				LEFT JOIN PROFITCENTERS T69 ON T69.PROFITCENTERID = T1.PROFITCENTERID
				LEFT JOIN ASSET_CLASS_SETUP_HEADER ASCH ON ASCH.ID = T1.ASSETCLASSSETUP
				UNION ALL
				SELECT T1.FINTYPE,
				    T1.FINCATEGORY,
				    T1.FINTYPEDESC,
				    T1.FINCCY,
				    T1.FINDAYSCALTYPE,
				    T1.FINISGENREF,
				    T1.FINMAXAMOUNT,
				    T1.FINMINAMOUNT,
				    T1.FINDFTSTMTFRQ,
				    T1.FINISALWMD,
				    T1.FINSCHDMTHD,
				    T1.FINISALWGRACE,
				    T1.FINHISTRETENSION,
				    T1.EQUALREPAYMENT,
				    T1.FINRATETYPE,
				    T1.FINBASERATE,
				    T1.FINSPLRATE,
				    T1.FININTRATE,
				    T1.FINMINRATE,
				    T1.FINMAXRATE,
				    T1.FINDFTINTFRQ,
				    T1.FINISINTCPZ,
				    T1.FINCPZFRQ,
				    T1.FINISRVWALW,
				    T1.FINRVWFRQ,
				    T1.FINGRCRATETYPE,
				    T1.FINGRCBASERATE,
				    T1.FINGRCSPLRATE,
				    T1.FINGRCINTRATE,
				    T1.FINGRCMINRATE,
				    T1.FINGRCMAXRATE,
				    T1.FINGRCDFTINTFRQ,
				    T1.FINGRCISINTCPZ,
				    T1.FINGRCCPZFRQ,
				    T1.FINGRCISRVWALW,
				    T1.FINGRCRVWFRQ,
				    T1.FINMINTERM,
				    T1.FINMAXTERM,
				    T1.FINDFTTERMS,
				    T1.FINRPYFRQ,
				    T1.FINREPAYMETHOD,
				    T1.FINISALWPARTIALRPY,
				    T1.FINISALWDIFFERMENT,
				    T1.FINMAXDIFFERMENT,
				    T1.FINISALWEARLYRPY,
				    T1.FINISALWEARLYSETTLE,
				    T1.FINODRPYTRIES,
				    T1.FINEARLYPAYRULE,
				    T1.FINEARLYSETTLERULE,
				    T1.FINISACTIVE,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T1.STEPFINANCE,
				    T1.STEPPINGMANDATORY,
				    T1.ALWMANUALSTEPS,
				    T1.ALWDSTEPPOLICIES,
				    T1.DFTSTEPPOLICY,
				    T1.FINISDWPAYREQUIRED,
				    T1.FINRVWRATEAPPLFOR,
				    T1.FINALWRATECHANGEANYDATE,
				    T1.FINISINTCPZATGRCEND,
				    T1.FINELGRULECODE,
				    T1.LIMITELGRULECODE,
				    T1.FINSCHCALCODEONRVW,
				    T1.ALWPLANDEFERMENT,
				    T1.PLANDEFERCOUNT,
				    T1.FINASSETTYPE,
				    T1.FINISALWGRCREPAY,
				    T1.FINGRCSCHDMTHD,
				    T1.FINGRCMARGIN,
				    T1.FINMARGIN,
				    T1.FINSCHEDULEON,
				    T1.FINGRCSCHEDULEON,
				    T1.FINCOMMITMENTREQ,
				    T1.FINCOLLATERALREQ,
				    T1.OVERRIDELIMIT,
				    T1.LIMITREQUIRED,
				    T1.FINCOMMITMENTOVRRIDE,
				    T1.FINCOLLATERALOVRRIDE,
				    T1.FINPFTUNCHANGED,
				    T1.APPLYODPENALTY,
				    T1.ODINCGRCDAYS,
				    T1.ODCHARGETYPE,
				    T1.ODGRACEDAYS,
				    T1.ODCHARGECALON,
				    T1.ODCHARGEAMTORPERC,
				    T1.ODALLOWWAIVER,
				    T1.ODMAXWAIVERPERC,
				    T1.FINDIVISION,
				    T48.DIVISIONCODEDESC LOVDESCFINDIVISIONNAME,
				    T48.ENTITYCODE LOVDESCENTITYCODE,
				    T1.PRODUCT,
				    T1.STARTDATE,
				    T1.ENDDATE,
				    T1.FINTYPEDESC LOVDESCPROMOFINTYPEDESC,
				    T1.REMARKS,
				    T1.ALWEARLYPAYMETHODS,
				    T1.PASTDUEPFTCALMTHD,
				    T1.PASTDUEPFTMARGIN,
				    T1.DOWNPAYRULE,
				    T59.RULECODE DOWNPAYRULECODE,
				    T59.RULECODEDESC DOWNPAYRULEDESC,
				    T1.FINSUSPTRIGGER,
				    T1.FINSUSPREMARKS,
				    T1.ALWMULTIPARTYDISB,
				    T1.COLLATERALTYPE,
				    T1.TDSAPPLICABLE,
				    T1.MANUALSCHEDULE,
				    T1.APPLYGRCPRICING,
				    T1.GRCPRICINGMETHOD,
				    T1.APPLYRPYPRICING,
				    T1.RPYPRICINGMETHOD,
				    T1.RPYHIERARCHY,
				    T67.RULECODE GRCPRICINGMETHODDESC,
				    T68.RULECODE RPYPRICINGMETHODDESC,
				    T1.DROPLINEOD,
				    T1.DROPPINGMETHOD,
				    T1.RATECHGANYDAY,
				    T1.FINREPAYPFTONFRQ,
				    T1.ALWBPI,
				    T1.BPITREATMENT,
				    T1.PFTDUESCHON,
				    T1.PLANEMIHALW,
				    T1.PLANEMIHMETHOD,
				    T1.PLANEMIHMAXPERYEAR,
				    T1.PLANEMIHMAX,
				    T1.PLANEMIHLOCKPERIOD,
				    T1.PLANEMICPZ,
				    T1.UNPLANEMIHLOCKPERIOD,
				    T1.UNPLANEMICPZ,
				    T1.REAGECPZ,
				    T1.FDDLOCKPERIOD,
				    T1.ALWDRPYMETHODS,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.ROUNDINGMODE,
				    T1.ROUNDINGTARGET,
				    T1.FREQUENCYDAYS,
				    T1.QUICKDISB,
				    T1.ALWMAXDISBCHECKREQ,
				    T1.ALWREAGE,
				    T1.ALWUNPLANEMIHOLIDAY,
				    T1.PROFITCENTERID,
				    T69.PROFITCENTERCODE,
				    T69.PROFITCENTERDESC,
				    T1.PRODUCTCATEGORY,
				    T2.PRODUCTDESC FINCATEGORYDESC,
				    T1.DEVELOPERFINANCE,
				    T1.COSTOFFUNDS,
				    T1.CHEQUECAPTUREREQ,
				    T1.FINLTVCHECK,
				    T1.PARTIALLYSECURED,
				    T1.ALWADVEMI,
				    T1.ADVEMIMINTERMS,
				    T1.ADVEMIMAXTERMS,
				    T1.ADVEMIDFTTERMS,
				    T1.ADVEMISCHDMTHD,
				    T1.BPIPFTDAYSBASIS,
				    T1.ELIGIBILITYMETHODS,
				    T1.ALWHYBRIDRATE,
				    T1.FIXEDRATETENOR,
				    T1.ODMINCAPAMOUNT,
				    T1.ODRULECODE,
				    T1.ALWZEROINTACC,
				    T1.AUTOREJECTIONDAYS,
				    T1.TAXNOMAND,
				    T1.PUTCALLREQUIRED,
				    T1.GRCADVINTERSETREQ,
				    T1.GRCADVTYPE,
				    T1.GRCADVMINTERMS,
				    T1.GRCADVMAXTERMS,
				    T1.GRCADVDEFAULTTERMS,
				    T1.ADVINTERSETREQ,
				    T1.ADVTYPE,
				    T1.ADVMINTERMS,
				    T1.ADVMAXTERMS,
				    T1.ADVDEFAULTTERMS,
				    T1.ADVSTAGE,
				    T1.DSFREQ,
				    T1.CASHCOLLATERALREQ,
				    T1.TDSALLOWTOMODIFY,
				    T1.TDSAPPLICABLETO,
				    T1.ALWVAN,
				    T1.VANALLOCATIONMETHOD,
				    T1.ALLOWDRAWINGPOWER,
				    T1.ALLOWREVOLVING,
				    T1.ALWSANCTIONAMT,
				    T1.ALWSANCTIONAMTOVERRIDE,
				    T1.SANBSDSCHDLE,
				    T1.FINISRATERVWATGRCEND,
				    T1.SCHDONPMTCAL,
				    T1.AUTOAPPROVE,
				    T1.OCRREQUIRED,
				    T1.ALLOWEDOCRS,
				    T1.DEFAULTOCR,
				    T1.ALLOWEDLOANPURPOSES,
				    T1.SPECIFICLOANPURPOSES,
				    T1.ALWPLANNEDEMIINGRC,
				    T1.GRCADJREQ,
				    T1.GRCPERIODAFTRFULLDISB,
				    T1.AUTOINCRGRCENDDATE,
				    T1.GRCAUTOINCRMONTHS,
				    T1.MAXAUTOINCRALLOWED,
				    T1.THRLDTOMAINTAINGRCPRD,
				    T1.ALWLOANSPLIT,
				    T1.SPLITLOANTYPE,
				    T1.INSTBASEDSCHD,
				    T1.TDSTYPE,
				    T1.CALCOFSTEPS,
				    T1.STEPSAPPLIEDFOR,
				    T1.SUBVENTIONREQ,
					T1.OVERDRAFTTXNCHRGREQ,
					T1.OVERDRAFTTXNCHRGFEETYPE,
					T1.OVERDRAFTEXTGRACEDAYS,
					T1.OVERDRAFTCOLCHRGFEETYPE,
					T1.OVERDRAFTCOLAMT,
					T1.REGPROVRULE,
					T1.INTPROVRULE,
					T1.CLOSURETHRESHOLDLIMIT,
					T1.MAXFPPCALTYPE,
					T1.MAXFPPAMOUNT,
					T1.MAXFPPPER,
					T1.MAXFPPCALON,
					T1.PPLOCKINPERIOD,
					T1.ESLOCKINPERIOD,
					T1.MINPPCALTYPE,
					T1.MINPPAMOUNT,
					T1.MINPPPERCENTAGE,
					T1.MINPPCALON,
					T1.MAXPPCALTYPE,
					T1.MAXPPAMOUNT,
					T1.MAXPPPERCENTAGE,
					T1.MAXPPCALON,
					T1.ALLOWAUTOREFUND, 
					T1.MAXAUTOREFUND, 
					T1.MINAUTOREFUND,
					T1.NPARPYHIERARCHY,
					T1.ASSETCLASSSETUP,
					ASCH.CODE ASSETCLASSSETUPCODE,
					ASCH.DESCRIPTION ASSETCLASSSETUPDESC,
					T1.ODMINAMOUNT,
					T1.ALLOWCANCELFIN,
					T1.WRITEOFFREPAYHRY, 
					T1.MATUREREPAYHRY, 
					T1.PRESENTMENTREPAYHRY
				FROM RMTFINANCETYPES T1
				LEFT JOIN BMTPRODUCT T2 ON T1.FINCATEGORY = T2.PRODUCTCODE
				LEFT JOIN SMTDIVISIONDETAIL T48 ON T1.FINDIVISION = T48.DIVISIONCODE
				LEFT JOIN RULES T59 ON T1.DOWNPAYRULE = T59.RULEID
				LEFT JOIN RULES T67 ON T1.GRCPRICINGMETHOD = T67.RULEID
				LEFT JOIN RULES T68 ON T1.RPYPRICINGMETHOD = T68.RULEID
				LEFT JOIN PROFITCENTERS T69 ON T69.PROFITCENTERID = T1.PROFITCENTERID
				LEFT JOIN ASSET_CLASS_SETUP_HEADER ASCH ON ASCH.ID = T1.ASSETCLASSSETUP
				WHERE NOT EXISTS (SELECT 1 FROM RMTFINANCETYPES_TEMP WHERE RMTFINANCETYPES_TEMP.FINTYPE = T1.FINTYPE)
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#1495.1.5_2_post" author="ramya.v" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rmtfinancetypes_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1495.1.6_2_pre" author="ramya.v" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_orgview'); 	
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1495.1.6_2" author="ramya.v">
		<createView viewName="RMTFINANCETYPES_ORGVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINTYPE,
				    T1.FINCATEGORY,
				    T1.FINTYPEDESC,
				    T1.FINCCY,
				    T1.FINDAYSCALTYPE,
				    T1.FINISGENREF,
				    T1.FINMAXAMOUNT,
				    T1.FINMINAMOUNT,
				    T1.FINISALWMD,
				    T1.FINSCHDMTHD,
				    T1.FINISALWGRACE,
				    T1.EQUALREPAYMENT,
				    T1.FINRATETYPE,
				    T1.FINBASERATE,
				    T1.FINSPLRATE,
				    T1.FININTRATE,
				    T1.FINMINRATE,
				    T1.FINMAXRATE,
				    T1.FINDFTINTFRQ,
				    T1.FINISINTCPZ,
				    T1.FINCPZFRQ,
				    T1.FINISRVWALW,
				    T1.FINRVWFRQ,
				    T1.FINGRCRATETYPE,
				    T1.FINGRCBASERATE,
				    T1.FINGRCSPLRATE,
				    T1.FINGRCINTRATE,
				    T1.FINGRCMINRATE,
				    T1.FINGRCMAXRATE,
				    T1.FINGRCDFTINTFRQ,
				    T1.FINGRCISINTCPZ,
				    T1.FINGRCCPZFRQ,
				    T1.FINGRCISRVWALW,
				    T1.FINGRCRVWFRQ,
				    T1.FINMINTERM,
				    T1.FINMAXTERM,
				    T1.FINDFTTERMS,
				    T1.FINRPYFRQ,
				    T1.FINREPAYMETHOD,
				    T1.FINISALWDIFFERMENT,
				    T1.FINMAXDIFFERMENT,
				    T1.FINISACTIVE,
				    T1.STEPFINANCE,
				    T1.STEPPINGMANDATORY,
				    T1.ALWMANUALSTEPS,
				    T1.ALWDSTEPPOLICIES,
				    T1.DFTSTEPPOLICY,
				    T1.FINISDWPAYREQUIRED,
				    T1.FINRVWRATEAPPLFOR,
				    T1.FINALWRATECHANGEANYDATE,
				    T1.FINISINTCPZATGRCEND,
				    T1.FINSCHCALCODEONRVW,
				    T1.ALWPLANDEFERMENT,
				    T1.PLANDEFERCOUNT,
				    T1.FINISALWGRCREPAY,
				    T1.FINGRCSCHDMTHD,
				    T1.FINGRCMARGIN,
				    T1.FINMARGIN,
				    T1.FINCOMMITMENTREQ,
				    T1.FINCOLLATERALREQ,
				    T1.OVERRIDELIMIT,
				    T1.LIMITREQUIRED,
				    T1.FINCOMMITMENTOVRRIDE,
				    T1.FINCOLLATERALOVRRIDE,
				    T1.FINREPAYPFTONFRQ,
				    T1.FINPFTUNCHANGED,
				    T1.APPLYODPENALTY,
				    T1.ODINCGRCDAYS,
				    T1.ODCHARGETYPE,
				    T1.ODGRACEDAYS,
				    T1.ODCHARGECALON,
				    T1.ODCHARGEAMTORPERC,
				    T1.ODALLOWWAIVER,
				    T1.ODMAXWAIVERPERC,
				    T1.FINDIVISION,
				    T3.DIVISIONCODEDESC LOVDESCFINDIVISIONNAME,
				    T1.PRODUCT,
				    T1.STARTDATE,
				    T1.ENDDATE,
				    T1.FINTYPEDESC LOVDESCPROMOFINTYPEDESC,
				    T1.REMARKS,
				    T4.POLICYDESC LOVDESCDFTSTEPPOLICYNAME,
				    T1.PASTDUEPFTCALMTHD,
				    T1.PASTDUEPFTMARGIN,
				    T1.DOWNPAYRULE,
				    T1.ALWMULTIPARTYDISB,
				    T1.COLLATERALTYPE,
				    T1.TDSAPPLICABLE,
				    T5.RULECODE DOWNPAYRULECODE,
				    T5.RULECODEDESC DOWNPAYRULEDESC,
				    T1.APPLYGRCPRICING,
				    T1.APPLYRPYPRICING,
				    T6.RULECODE GRCPRICINGMETHODDESC,
				    T7.RULECODE RPYPRICINGMETHODDESC,
				    T1.DROPLINEOD,
				    T1.DROPPINGMETHOD,
				    T1.RATECHGANYDAY,
				    T4.STEPTYPE DFTSTEPPOLICYTYPE,
				    T1.MANUALSCHEDULE,
				    T1.ALWBPI,
				    T1.BPITREATMENT,
				    T1.PFTDUESCHON,
				    T1.PLANEMIHALW,
				    T1.PLANEMIHMETHOD,
				    T1.PLANEMIHMAXPERYEAR,
				    T1.PLANEMIHMAX,
				    T1.PLANEMIHLOCKPERIOD,
				    T1.PLANEMICPZ,
				    T1.UNPLANEMIHLOCKPERIOD,
				    T1.UNPLANEMICPZ,
				    T1.REAGECPZ,
				    T1.FDDLOCKPERIOD,
				    T1.ALWDRPYMETHODS,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.ROUNDINGMODE,
				    T1.ROUNDINGTARGET,
				    T1.FREQUENCYDAYS,
				    T1.QUICKDISB,
				    T1.ALWREAGE,
				    T1.ALWUNPLANEMIHOLIDAY,
				    T1.ALWMAXDISBCHECKREQ,
				    T1.PRODUCTCATEGORY,
				    T1.RPYHIERARCHY,
				    T1.DEVELOPERFINANCE,
				    T3.ENTITYCODE LOVDESCENTITYCODE,
				    T8.ENTITYDESC LOVDESCENTITYDESC,
				    T1.COSTOFFUNDS,
				    T1.CHEQUECAPTUREREQ,
				    T1.FINLTVCHECK,
				    T1.PARTIALLYSECURED,
				    T1.ALWADVEMI,
				    T1.ADVEMIMINTERMS,
				    T1.ADVEMIMAXTERMS,
				    T1.ADVEMIDFTTERMS,
				    T1.ADVEMISCHDMTHD,
				    T1.BPIPFTDAYSBASIS,
				    T1.ELIGIBILITYMETHODS,
				    T1.ALWHYBRIDRATE,
				    T1.FIXEDRATETENOR,
				    T1.ODMINCAPAMOUNT,
				    T1.ODRULECODE,
				    T1.ALWZEROINTACC,
				    T1.FINISALWPARTIALRPY,
				    T1.AUTOREJECTIONDAYS,
				    T1.TAXNOMAND,
				    T1.PUTCALLREQUIRED,
				    T1.GRCADVINTERSETREQ,
				    T1.GRCADVTYPE,
				    T1.GRCADVMINTERMS,
				    T1.GRCADVMAXTERMS,
				    T1.GRCADVDEFAULTTERMS,
				    T1.ADVINTERSETREQ,
				    T1.ADVTYPE,
				    T1.ADVMINTERMS,
				    T1.ADVMAXTERMS,
				    T1.ADVDEFAULTTERMS,
				    T1.ADVSTAGE,
				    T1.DSFREQ,
				    T1.CASHCOLLATERALREQ,
				    T1.ALWEARLYPAYMETHODS,
				    T1.FINSCHEDULEON,
				    T1.TDSALLOWTOMODIFY,
				    T1.TDSAPPLICABLETO,
				    T1.ALWVAN,
				    T1.VANALLOCATIONMETHOD,
				    T1.ALLOWDRAWINGPOWER,
				    T1.ALLOWREVOLVING,
				    T1.ALWSANCTIONAMT,
				    T1.ALWSANCTIONAMTOVERRIDE,
				    T1.SANBSDSCHDLE,
				    T1.FINISRATERVWATGRCEND,
				    T1.SCHDONPMTCAL,
				    T1.AUTOAPPROVE,
				    T1.OCRREQUIRED,
				    T1.ALLOWEDOCRS,
				    T1.DEFAULTOCR,
				    T1.ALLOWEDLOANPURPOSES,
				    T1.SPECIFICLOANPURPOSES,
				    T1.ALWPLANNEDEMIINGRC,
				    T1.GRCADJREQ,
				    T1.GRCPERIODAFTRFULLDISB,
				    T1.AUTOINCRGRCENDDATE,
				    T1.GRCAUTOINCRMONTHS,
				    T1.MAXAUTOINCRALLOWED,
				    T1.THRLDTOMAINTAINGRCPRD,
				    T1.ALWLOANSPLIT,
				    T1.SPLITLOANTYPE,
				    T1.INSTBASEDSCHD,
				    T1.TDSTYPE,
				    T1.CALCOFSTEPS,
				    T1.STEPSAPPLIEDFOR,
				    T1.SUBVENTIONREQ,
					T1.OVERDRAFTTXNCHRGREQ,
					T1.OVERDRAFTTXNCHRGFEETYPE,
					T1.OVERDRAFTEXTGRACEDAYS,
					T1.OVERDRAFTCOLCHRGFEETYPE,
					T1.OVERDRAFTCOLAMT,
					T1.REGPROVRULE,
					T1.INTPROVRULE,
					T1.CLOSURETHRESHOLDLIMIT,
					T1.MAXFPPCALTYPE,
					T1.MAXFPPAMOUNT,
					T1.MAXFPPPER,
					T1.MAXFPPCALON,
					T1.PPLOCKINPERIOD,
					T1.ESLOCKINPERIOD,
					T1.MINPPCALTYPE,
					T1.MINPPAMOUNT,
					T1.MINPPPERCENTAGE,
					T1.MINPPCALON,
					T1.MAXPPCALTYPE,
					T1.MAXPPAMOUNT,
					T1.MAXPPPERCENTAGE,
					T1.MAXPPCALON,
					T1.ALLOWAUTOREFUND, 
					T1.MAXAUTOREFUND, 
					T1.MINAUTOREFUND,
					T1.NPARPYHIERARCHY,
					T1.ASSETCLASSSETUP,
					ASCH.CODE ASSETCLASSSETUPCODE,
					ASCH.DESCRIPTION ASSETCLASSSETUPDESC,
					T1.ODMINAMOUNT,
					T1.ALLOWCANCELFIN,
					T1.WRITEOFFREPAYHRY, 
					T1.MATUREREPAYHRY, 
					T1.PRESENTMENTREPAYHRY	
				FROM RMTFINANCETYPES T1
				INNER JOIN SMTDIVISIONDETAIL T3 ON T1.FINDIVISION = T3.DIVISIONCODE
				LEFT JOIN STEPPOLICYHEADER T4 ON T1.DFTSTEPPOLICY = T4.POLICYCODE
				LEFT JOIN RULES T5 ON T1.DOWNPAYRULE = T5.RULEID
				LEFT JOIN RULES T6 ON T1.GRCPRICINGMETHOD = T6.RULEID
				LEFT JOIN RULES T7 ON T1.RPYPRICINGMETHOD = T7.RULEID
				LEFT JOIN ENTITY T8 ON T3.ENTITYCODE = T8.ENTITYCODE
				LEFT JOIN ASSET_CLASS_SETUP_HEADER ASCH ON ASCH.ID = T1.ASSETCLASSSETUP
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#1495.1.6_2_post" author="ramya.v" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rmtfinancetypes_orgview');
			]]>
		</sql>
	</changeSet>


	<changeSet id="ST#1495.1.7_2_pre" author="ramya.v" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_aview'); 
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1495.1.7_2" author="ramya.v">
		<createView viewName="RMTFINANCETYPES_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINTYPE,
				    T1.FINCATEGORY,
				    T1.FINTYPEDESC,
				    T1.FINCCY,
				    T1.FINDAYSCALTYPE,
				    T1.FINISGENREF,
				    T1.FINMAXAMOUNT,
				    T1.FINMINAMOUNT,
				    T1.FINDFTSTMTFRQ,
				    T1.FINISALWMD,
				    T1.FINSCHDMTHD,
				    T1.FINISALWGRACE,
				    T1.FINHISTRETENSION,
				    T1.EQUALREPAYMENT,
				    T1.FINRATETYPE,
				    T1.FINBASERATE,
				    T1.FINSPLRATE,
				    T1.FININTRATE,
				    T1.FINMINRATE,
				    T1.FINMAXRATE,
				    T1.FINDFTINTFRQ,
				    T1.FINISINTCPZ,
				    T1.FINCPZFRQ,
				    T1.FINISRVWALW,
				    T1.FINRVWFRQ,
				    T1.FINGRCRATETYPE,
				    T1.FINGRCBASERATE,
				    T1.FINGRCSPLRATE,
				    T1.FINGRCINTRATE,
				    T1.FINGRCMINRATE,
				    T1.FINGRCMAXRATE,
				    T1.FINGRCDFTINTFRQ,
				    T1.FINGRCISINTCPZ,
				    T1.FINGRCCPZFRQ,
				    T1.FINGRCISRVWALW,
				    T1.FINGRCRVWFRQ,
				    T1.FINMINTERM,
				    T1.FINMAXTERM,
				    T1.FINDFTTERMS,
				    T1.FINRPYFRQ,
				    T1.FINREPAYMETHOD,
				    T1.FINISALWPARTIALRPY,
				    T1.FINISALWDIFFERMENT,
				    T1.FINMAXDIFFERMENT,
				    T1.FINISALWEARLYRPY,
				    T1.FINISALWEARLYSETTLE,
				    T1.FINODRPYTRIES,
				    T1.FINEARLYPAYRULE,
				    T1.FINEARLYSETTLERULE,
				    T1.FINISACTIVE,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T1.STEPFINANCE,
				    T1.STEPPINGMANDATORY,
				    T1.ALWMANUALSTEPS,
				    T1.ALWDSTEPPOLICIES,
				    T1.DFTSTEPPOLICY,
				    T1.FINISDWPAYREQUIRED,
				    T1.FINRVWRATEAPPLFOR,
				    T1.FINALWRATECHANGEANYDATE,
				    T1.FINISINTCPZATGRCEND,
				    T1.FINELGRULECODE,
				    T1.LIMITELGRULECODE,
				    T1.FINSCHCALCODEONRVW,
				    T1.ALWPLANDEFERMENT,
				    T1.PLANDEFERCOUNT,
				    T1.FINASSETTYPE,
				    T1.FINISALWGRCREPAY,
				    T1.FINGRCSCHDMTHD,
				    T1.FINGRCMARGIN,
				    T1.FINMARGIN,
				    T1.FINSCHEDULEON,
				    T1.FINGRCSCHEDULEON,
				    T1.FINCOMMITMENTREQ,
				    T1.FINCOLLATERALREQ,
				    T1.OVERRIDELIMIT,
				    T1.LIMITREQUIRED,
				    T1.FINCOMMITMENTOVRRIDE,
				    T1.FINCOLLATERALOVRRIDE,
				    T1.FINPFTUNCHANGED,
				    T1.APPLYODPENALTY,
				    T1.ODINCGRCDAYS,
				    T1.ODCHARGETYPE,
				    T1.ODGRACEDAYS,
				    T1.ODCHARGECALON,
				    T1.ODCHARGEAMTORPERC,
				    T1.ODALLOWWAIVER,
				    T1.ODMAXWAIVERPERC,
				    T1.FINDIVISION,
				    T48.DIVISIONCODEDESC LOVDESCFINDIVISIONNAME,
				    T48.ENTITYCODE LOVDESCENTITYCODE,
				    T1.PRODUCT,
				    T1.STARTDATE,
				    T1.ENDDATE,
				    T1.REMARKS,
				    T1.ALWEARLYPAYMETHODS,
				    T1.PASTDUEPFTCALMTHD,
				    T1.PASTDUEPFTMARGIN,
				    T1.DOWNPAYRULE,
				    T59.RULECODE DOWNPAYRULECODE,
				    T59.RULECODEDESC DOWNPAYRULEDESC,
				    T1.FINSUSPTRIGGER,
				    T1.FINSUSPREMARKS,
				    T1.ALWMULTIPARTYDISB,
				    T1.COLLATERALTYPE,
				    T1.TDSAPPLICABLE,
				    T1.MANUALSCHEDULE,
				    T1.APPLYGRCPRICING,
				    T1.GRCPRICINGMETHOD,
				    T1.APPLYRPYPRICING,
				    T1.RPYPRICINGMETHOD,
				    T1.RPYHIERARCHY,
				    T67.RULECODE GRCPRICINGMETHODDESC,
				    T68.RULECODE RPYPRICINGMETHODDESC,
				    T1.DROPLINEOD,
				    T1.DROPPINGMETHOD,
				    T1.RATECHGANYDAY,
				    T1.FINREPAYPFTONFRQ,
				    T1.ALWBPI,
				    T1.BPITREATMENT,
				    T1.PFTDUESCHON,
				    T1.PLANEMIHALW,
				    T1.PLANEMIHMETHOD,
				    T1.PLANEMIHMAXPERYEAR,
				    T1.PLANEMIHMAX,
				    T1.PLANEMIHLOCKPERIOD,
				    T1.PLANEMICPZ,
				    T1.UNPLANEMIHLOCKPERIOD,
				    T1.UNPLANEMICPZ,
				    T1.REAGECPZ,
				    T1.FDDLOCKPERIOD,
				    T1.ALWDRPYMETHODS,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.ROUNDINGMODE,
				    T1.ROUNDINGTARGET,
				    T1.FREQUENCYDAYS,
				    T1.QUICKDISB,
				    T1.ALWREAGE,
				    T1.ALWUNPLANEMIHOLIDAY,
				    T1.ALWMAXDISBCHECKREQ,
				    T1.FINTYPEDESC LOVDESCPROMOFINTYPEDESC,
				    T1.PROFITCENTERID,
				    T69.PROFITCENTERCODE,
				    T69.PROFITCENTERDESC,
				    T1.PRODUCTCATEGORY,
				    T2.PRODUCTDESC FINCATEGORYDESC,
				    T1.DEVELOPERFINANCE,
				    T1.COSTOFFUNDS,
				    T1.CHEQUECAPTUREREQ,
				    T1.FINLTVCHECK,
				    T1.PARTIALLYSECURED,
				    T1.ALWADVEMI,
				    T1.ADVEMIMINTERMS,
				    T1.ADVEMIMAXTERMS,
				    T1.ADVEMIDFTTERMS,
				    T1.ADVEMISCHDMTHD,
				    T1.BPIPFTDAYSBASIS,
				    T1.ELIGIBILITYMETHODS,
				    T1.ALWHYBRIDRATE,
				    T1.FIXEDRATETENOR,
				    T1.ODMINCAPAMOUNT,
				    T1.ODRULECODE,
				    T1.ALWZEROINTACC,
				    T1.AUTOREJECTIONDAYS,
				    T1.TAXNOMAND,
				    T1.PUTCALLREQUIRED,
				    T1.GRCADVINTERSETREQ,
				    T1.GRCADVTYPE,
				    T1.GRCADVMINTERMS,
				    T1.GRCADVMAXTERMS,
				    T1.GRCADVDEFAULTTERMS,
				    T1.ADVINTERSETREQ,
				    T1.ADVTYPE,
				    T1.ADVMINTERMS,
				    T1.ADVMAXTERMS,
				    T1.ADVDEFAULTTERMS,
				    T1.ADVSTAGE,
				    T1.DSFREQ,
				    T1.CASHCOLLATERALREQ,
				    T1.TDSALLOWTOMODIFY,
				    T1.TDSAPPLICABLETO,
				    T1.ALWVAN,
				    T1.VANALLOCATIONMETHOD,
				    T1.ALLOWDRAWINGPOWER,
				    T1.ALLOWREVOLVING,
				    T1.ALWSANCTIONAMT,
				    T1.ALWSANCTIONAMTOVERRIDE,
				    T1.SANBSDSCHDLE,
				    T1.FINISRATERVWATGRCEND,
				    T1.SCHDONPMTCAL,
				    T1.AUTOAPPROVE,
				    T1.ALWPLANNEDEMIINGRC,
				    T1.OCRREQUIRED,
				    T1.ALLOWEDOCRS,
				    T1.DEFAULTOCR,
				    T1.ALLOWEDLOANPURPOSES,
				    T1.SPECIFICLOANPURPOSES,
				    T1.GRCADJREQ,
				    T1.GRCPERIODAFTRFULLDISB,
				    T1.AUTOINCRGRCENDDATE,
				    T1.GRCAUTOINCRMONTHS,
				    T1.MAXAUTOINCRALLOWED,
				    T1.THRLDTOMAINTAINGRCPRD,
				    T1.ALWLOANSPLIT,
				    T1.SPLITLOANTYPE,
				    T1.INSTBASEDSCHD,
				    T1.TDSTYPE,
				    T1.CALCOFSTEPS,
				    T1.STEPSAPPLIEDFOR,
				    T1.SUBVENTIONREQ,
					T1.OVERDRAFTTXNCHRGREQ,
					T1.OVERDRAFTTXNCHRGFEETYPE,
					T1.OVERDRAFTEXTGRACEDAYS,
					T1.OVERDRAFTCOLCHRGFEETYPE,
					T1.OVERDRAFTCOLAMT,
					T1.REGPROVRULE,
					T1.INTPROVRULE,
					T1.CLOSURETHRESHOLDLIMIT,
					T1.MAXFPPCALTYPE,
					T1.MAXFPPAMOUNT,
					T1.MAXFPPPER,
					T1.MAXFPPCALON,
					T1.PPLOCKINPERIOD,
					T1.ESLOCKINPERIOD,
					T1.MINPPCALTYPE,
					T1.MINPPAMOUNT,
					T1.MINPPPERCENTAGE,
					T1.MINPPCALON,
					T1.MAXPPCALTYPE,
					T1.MAXPPAMOUNT,
					T1.MAXPPPERCENTAGE,
					T1.MAXPPCALON,
					T1.ALLOWAUTOREFUND, 
					T1.MAXAUTOREFUND, 
					T1.MINAUTOREFUND,
					T1.NPARPYHIERARCHY,
					T1.ASSETCLASSSETUP,
					ASCH.CODE ASSETCLASSSETUPCODE,
					ASCH.DESCRIPTION ASSETCLASSSETUPDESC,
					T1.ODMINAMOUNT,
					T1.ALLOWCANCELFIN,
					T1.WRITEOFFREPAYHRY, 
					T1.MATUREREPAYHRY, 
					T1.PRESENTMENTREPAYHRY
				FROM RMTFINANCETYPES T1
			    LEFT JOIN BMTPRODUCT T2 ON T1.FINCATEGORY = T2.PRODUCTCODE
			    LEFT JOIN SMTDIVISIONDETAIL T48 ON T1.FINDIVISION = T48.DIVISIONCODE
			    LEFT JOIN RULES T59 ON T1.DOWNPAYRULE = T59.RULEID
			    LEFT JOIN RULES T67 ON T1.GRCPRICINGMETHOD = T67.RULEID
			    LEFT JOIN RULES T68 ON T1.RPYPRICINGMETHOD = T68.RULEID
			    LEFT JOIN PROFITCENTERS T69 ON T69.PROFITCENTERID = T1.PROFITCENTERID
			    LEFT JOIN ASSET_CLASS_SETUP_HEADER ASCH ON ASCH.ID = T1.ASSETCLASSSETUP
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#1495.1.7_2_post" author="ramya.v" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rmtfinancetypes_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1495.1.8_2_pre" author="ramya.v" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_aeview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1495.1.8_2" author="ramya.v">
		<createView replaceIfExists="true" viewName="RMTFINANCETYPES_AEVIEW">
		 	<![CDATA[
				 SELECT T1.FINTYPE,
				    '' FINDEFFREQ,
				    T1.FINCCY,
				    T1.FINCATEGORY,
				    T1.DEVELOPERFINANCE,
				    T1.PARTIALLYSECURED,
				    T1.INSTBASEDSCHD,
				    T1.TDSTYPE,
				    T1.SUBVENTIONREQ,
					T1.CLOSURETHRESHOLDLIMIT,
					T1.MAXFPPCALTYPE,
					T1.MAXFPPAMOUNT,
					T1.MAXFPPPER,
					T1.MAXFPPCALON,
					T1.PPLOCKINPERIOD,
					T1.ESLOCKINPERIOD,
					T1.MINPPCALTYPE,
					T1.MINPPAMOUNT,
					T1.MINPPPERCENTAGE,
					T1.MINPPCALON,
					T1.MAXPPCALTYPE,
					T1.MAXPPAMOUNT,
					T1.MAXPPPERCENTAGE,
					T1.MAXPPCALON,
					T1.ALLOWAUTOREFUND, 
					T1.MAXAUTOREFUND, 
					T1.MINAUTOREFUND,
					T1.NPARPYHIERARCHY,
					T1.ASSETCLASSSETUP,
					ASCH.CODE ASSETCLASSSETUPCODE,
					ASCH.DESCRIPTION ASSETCLASSSETUPDESC,
					T1.ODMINAMOUNT,
					T1.ALLOWCANCELFIN,
					T1.WRITEOFFREPAYHRY, 
					T1.MATUREREPAYHRY, 
					T1.PRESENTMENTREPAYHRY
				FROM RMTFINANCETYPES T1
				LEFT JOIN ASSET_CLASS_SETUP_HEADER ASCH ON ASCH.ID = T1.ASSETCLASSSETUP
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#1495.1.8_2_post" author="saisandeep.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rmtfinancetypes_aeview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1553.18" author="saikiran.n" dbms="oracle">
		<sql>
			<![CDATA[	
				CREATE INDEX IX_CRSLN_QUE_CRBID ON CROSS_LOAN_KNOCKOFF_QUEUE(NLSSORT("COREBANKID",'nls_sort=''BINARY_CI'''));
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1553.18" author="saikiran.n" dbms="postgresql">
		<sql>
			<![CDATA[	
				CREATE INDEX IX_CRSLN_QUE_CRBID ON CROSS_LOAN_KNOCKOFF_QUEUE(lower(COREBANKID));
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1553.18" author="saikiran.n" dbms="mssql">
		<sql>
			<![CDATA[	
				CREATE INDEX IX_CRSLN_QUE_CRBID ON CROSS_LOAN_KNOCKOFF_QUEUE(COREBANKID);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1468.10" author="saikrishna.b">
		<sql>
			<![CDATA[	
				INSERT INTO ACCOUNT_UPDATER (FROMID, TOID, PROCESSFLAG) VALUES(0, 0, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1553.19" author="saikiran.n" dbms="postgresql">
		<sql>
			<![CDATA[
				CREATE INDEX IDX_FOC_FID_SHD_CT ON FIN_OVERDUE_CHARGES(FINID,SCHDATE,lower(CHARGETYPE));
   			 ]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1553.19" author="saikiran.n" dbms="oracle">
		<sql>
			<![CDATA[	
				CREATE INDEX IDX_FOC_FID_SHD_CT ON FIN_OVERDUE_CHARGES(FINID,SCHDATE,NLSSORT("CHARGETYPE",'nls_sort=''BINARY_CI'''));
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1553.19" author="saikiran.n" dbms="mssql">
		<sql>
			<![CDATA[	
				CREATE INDEX IDX_FOC_FID_SHD_CT ON FIN_OVERDUE_CHARGES(FINID,SCHDATE,CHARGETYPE);
			]]>
		</sql>
	</changeSet>

	<changeSet id="PSD#225034" author="Gireesh.G">
		<sql>
			<![CDATA[
				DELETE FROM ERRORDETAILS WHERE CODE = 'ADVEMI01';
				INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION) VALUES ('ADVEMI01', 'EN', 'E', '{0} should greater than/equal to {1} and less than/equal to {2}', '', 'Approved', null, null, null, null, null, 0, CURRENT_TIMESTAMP, 1000, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#58_pre" author="rahul.r" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'sanction_conditions');
				select deps_save_and_drop_dependencies ('plf', 'sanction_conditions_temp');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#58.1" author="rahul.r">
		<addColumn tableName="sanction_conditions">
			<column name="remarks" type="varchar(50)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#58.2" author="rahul.r">
		<addColumn tableName="sanction_conditions_temp">
			<column name="remarks" type="varchar(50)" />
		</addColumn>
	</changeSet>


	<changeSet id="ST#58.3" author="rahul.r">
		<sql>
			<![CDATA[
				UPDATE SANCTION_CONDITIONS  SET REMARKS =(SELECT C.STATUS FROM SANCTION_CONDITIONS C  WHERE SANCTION_CONDITIONS.ID=C.ID);
				UPDATE SANCTION_CONDITIONS_TEMP  SET REMARKS =(SELECT C.STATUS FROM SANCTION_CONDITIONS_TEMP C  WHERE SANCTION_CONDITIONS_TEMP.ID=C.ID);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#58.4" author="rahul.r">
		<sql>
			<![CDATA[
				UPDATE SANCTION_CONDITIONS  SET STATUS = null;
				UPDATE SANCTION_CONDITIONS_TEMP  SET STATUS = null;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#58.5" author="rahul.r">
		<modifyDataType tableName="sanction_conditions" columnName="status" newDataType="varchar(20)" />
	</changeSet>

	<changeSet id="ST#58.6" author="rahul.r">
		<modifyDataType tableName="sanction_conditions_temp" columnName="status" newDataType="varchar(20)" />
	</changeSet>

	<changeSet id="ST#58_post" author="rahul.r" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'sanction_conditions');
				select deps_restore_dependencies ('plf', 'sanction_conditions_temp');
			]]>
		</sql>
	</changeSet>
	<changeSet id="TK#4750.3_pre" author="Sravanthi.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'write_off_upload');
			]]>
		</sql>
	</changeSet>

	<changeSet id="TK#4750.3" author="Sravanthi.g">
		<modifyDataType tableName="WRITE_OFF_UPLOAD" columnName="Remarks" newDataType="varchar(100)" />
	</changeSet>

	<changeSet id="TK#4750.3_post" author="Sravanthi.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'write_off_upload');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1554.23.1" author="ramya.v">
		<renameColumn tableName="RECEIPT_STATUS_UPLOAD" oldColumnName="BorCReason" newColumnName="BounceReason" />
	</changeSet>

	<changeSet id="ST#1554.23.2" author="ramya.v">
		<renameColumn tableName="RECEIPT_STATUS_UPLOAD" oldColumnName="BorCRemarks" newColumnName="BounceRemarks" />
	</changeSet>


	<changeSet id="ST#1528.0" author="Sravani.S">
		<renameTable newTableName="FILE_UPLOAD_HEADER_BKP" oldTableName="FILE_UPLOAD_HEADER" />
	</changeSet>

	<changeSet id="ST#1528.1" author="Sravani.S">
		<createTable tableName="FILE_UPLOAD_HEADER">
			<column name="Id" type="bigint" autoIncrement="true">
				<constraints nullable="false" />
			</column>
			<column name="EntityCode" type="varchar(8)">
				<constraints nullable="false" />
			</column>
			<column name="Type" type="varchar(50)">
				<constraints nullable="false" />
			</column>
			<column name="FileName" type="varchar(100)">
				<constraints nullable="false" />
			</column>
			<column name="UploadPath" type="varchar(250)" />
			<column name="TotalRecords" type="int" />
			<column name="SuccessRecords" type="int" />
			<column name="FailureRecords" type="int" />
			<column name="Progress" type="int" />
			<column name="Remarks" type="varchar(2000)" />
			<column name="CreatedBy" type="bigint" />
			<column name="CreatedOn" type="datetime" />
			<column name="ApprovedBy" type="bigint" />
			<column name="ApprovedOn" type="datetime" />
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkflowId" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet id="ST#1528.2" author="Sravani.S">
		<addPrimaryKey tableName="FILE_UPLOAD_HEADER" columnNames="Id" constraintName="PK_FILE_UPLOAD_HEADER_ID" />
	</changeSet>

	<changeSet id="ST#1528.3" author="Sravani.S">
		<addUniqueConstraint tableName="FILE_UPLOAD_HEADER" columnNames="Type,FileName"
			constraintName="UK_FUH_TYPE_FN" />
	</changeSet>

	<changeSet id="ST#1528.3.1" author="Sravani.S">
		<sql> 
			<![CDATA[ 
				INSERT INTO FILE_UPLOAD_HEADER (ENTITYCODE, TYPE, FILENAME, TOTALRECORDS, SUCCESSRECORDS, FAILURERECORDS, PROGRESS, REMARKS, CREATEDBY, CREATEDON, APPROVEDBY, APPROVEDON, LASTMNTBY, LASTMNTON, VERSION, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) SELECT ENTITYCODE, TYPE, FILENAME, TOTALRECORDS, SUCCESSRECORDS, FAILURERECORDS, PROGRESS, REMARKS, CREATEDBY, CREATEDON, APPROVEDBY, APPROVEDON, LASTMNTBY, LASTMNTON, VERSION, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID FROM FILE_UPLOAD_HEADER_BKP;
		 	]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1528.3.0" author="Sravani.S">
		<dropForeignKeyConstraint baseTableName="LIEN_UPLOAD"
			constraintName="fk_lien_upload_headerid" />
	</changeSet>

	<changeSet id="ST#1528.3.2" author="Sravani.S">
		<dropTable tableName="FILE_UPLOAD_HEADER_BKP" />
	</changeSet>
	
	<changeSet id="ST#1528.4" author="Sravani.S">
		<addColumn tableName="DATA_ENGINE_CONFIG">
			<column name="MaxRecords" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1528.4.1" author="Sravani.S">
		<sql> 
			<![CDATA[ 
				UPDATE DATA_ENGINE_CONFIG SET MAXRECORDS = 0;
		 	]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1528.4.2" author="Sravani.S">
		<addNotNullConstraint tableName="DATA_ENGINE_CONFIG" columnName="MaxRecords"
			columnDataType="bigint" />
	</changeSet>

	<changeSet id="ST#1528.4.3" author="Sravani.S" dbms="mssql">
		<sql> 
			<![CDATA[ 
				ALTER TABLE DATA_ENGINE_CONFIG ADD CONSTRAINT DF_DE_CONFIG_MAXRECORDS DEFAULT 0 FOR MAXRECORDS;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1528.4.3" author="Sravani.S" dbms="postgresql, oracle">
		<addDefaultValue tableName="DATA_ENGINE_CONFIG" columnName="MaxRecords" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#1528.5" author="Sravani.S">
		<addColumn tableName="EXCESS_TRANSFER_DETAILS_UPLOAD">
			<column name="RecordSeq" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1528.5.1" author="Sravani.S">
		<sql> 
			<![CDATA[ 
				UPDATE EXCESS_TRANSFER_DETAILS_UPLOAD SET RECORDSEQ = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1528.5.2" author="Sravani.S">
		<addNotNullConstraint tableName="EXCESS_TRANSFER_DETAILS_UPLOAD" columnName="RecordSeq"
			columnDataType="bigint" />
	</changeSet>

	<changeSet id="ST#1528.5.3" author="Sravani.S" dbms="mssql">
		<sql> 
			<![CDATA[ 
				ALTER TABLE EXCESS_TRANSFER_DETAILS_UPLOAD ADD CONSTRAINT DF_ET_DU_RECORDSEQ DEFAULT 0 FOR RECORDSEQ;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1528.5.3" author="Sravani.S" dbms="postgresql, oracle">
		<addDefaultValue tableName="EXCESS_TRANSFER_DETAILS_UPLOAD" columnName="RecordSeq" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#1528.6.1" author="Sravani.S">
		<sql>
			<![CDATA[ 
			 	DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='EXCESS_TRANSFER_UPLOAD');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='EXCESS_TRANSFER_UPLOAD');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='EXCESS_TRANSFER_UPLOAD';
 				
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'EXCESS_TRANSFER_UPLOAD'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'EXCESS_TRANSFER_UPLOAD');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'EXCESS_TRANSFER_UPLOAD';

				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'EXCESS_TRANSFER_UPLOAD', 'Excess Transfer UPLOAD File.', 12, 'EXCESSTRANSFER', null, null, ',', 1, 1, null, 'ROW:{LAN, TransferFromType, TransferToType, TransferAmount}', null, 'C', '/opt/pff/hdfc/excesstransfer/UPLOAD', 'ExcessTransfer_', '.xlsx', 0, CURRENT_TIMESTAMP, '${ddmm},.${SEQ_DATE_FILE}', null, '0', NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'EXCESS_TRANSFER_UPLOAD'), 'EXCESS_TRANSFER_DETAILS_UPLOAD', 1, 'ID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 4, 0, 0);
								
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'EXCESS_TRANSFER_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'EXCESS_TRANSFER_UPLOAD')), 'finReference',       0, 'N', NULL, NULL, NULL, 			NULL, '0',  NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'EXCESS_TRANSFER_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'EXCESS_TRANSFER_UPLOAD')), 'transferFromType',   0, 'N', NULL, NULL, NULL, 			NULL, '1',  NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'EXCESS_TRANSFER_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'EXCESS_TRANSFER_UPLOAD')), 'transferToType',    	0, 'N', NULL, NULL, NULL, 			NULL, '2',  NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'EXCESS_TRANSFER_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'EXCESS_TRANSFER_UPLOAD')), 'transferAmount',    	0, 'N', NULL, NULL, NULL, 			NULL, '3',  NULL, NULL, NULL, 'AMOUNT_MINOR:0.00', 'M');
			 ]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1528.7.1" author="Sravani.S">
		<sql> 
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='HOLD_REFUND_UPLOAD');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='HOLD_REFUND_UPLOAD');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='HOLD_REFUND_UPLOAD';
 				
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOLD_REFUND_UPLOAD'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOLD_REFUND_UPLOAD');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOLD_REFUND_UPLOAD';

				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'HOLD_REFUND_UPLOAD', 'Hold Refund Upload File.', 12, 'HoldRefund', null, null, ',', 0, 1, null, 'ROW:{LOAN_REFERENCE_NO, STATUS, REASON, REMARKS}', null, 'C', '/opt/PFF/BASE/hdfc/holdrefund/upload', 'HoldRefund_', '.xlsx', 0, CURRENT_TIMESTAMP, '${ddmm},.${SEQ_DATE_FILE}', null, 0, NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOLD_REFUND_UPLOAD'), 'HOLD_REFUND_UPLOAD', 1, 'HEADERID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 4, 0, 0);

				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'HOLD_REFUND_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOLD_REFUND_UPLOAD')), 	'finReference', 0, 'N', NULL, NULL,  NULL, 			 NULL, '0', NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'HOLD_REFUND_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOLD_REFUND_UPLOAD')), 	'holdStatus',   0, 'N', NULL, NULL,  NULL, 			 NULL, '1', NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'HOLD_REFUND_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOLD_REFUND_UPLOAD')), 	'reason',       0, 'N', NULL, NULL,  NULL, 			 NULL, '2', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'HOLD_REFUND_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOLD_REFUND_UPLOAD')), 	'remarks',      0, 'N', NULL, NULL,  NULL, 			 NULL, '3', NULL, NULL, NULL, NULL, 'O'); 	
		 	]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1528.8.1" author="Sravani.S">
		<sql> 
			<![CDATA[ 
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='RE_PRESENTMENT_UPLOAD');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='RE_PRESENTMENT_UPLOAD');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='RE_PRESENTMENT_UPLOAD';
 				
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RE_PRESENTMENT_UPLOAD'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RE_PRESENTMENT_UPLOAD');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'RE_PRESENTMENT_UPLOAD';

				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'RE_PRESENTMENT_UPLOAD', 'Representment Upload File.', 12, 'Representment', null, null, ',', 0, 1, null, 'ROW:{LOAN_NO, DUE_DATE}', null, 'C', '/opt/pff/hdfc/representment/upload', 'Representment_', '.xls', 0, CURRENT_TIMESTAMP, '${ddmm},.${SEQ_DATE_FILE}', null, 0, NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RE_PRESENTMENT_UPLOAD'), 'REPRESENT_UPLOADS', 1, 'HEADERID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 2, 0, 0);

				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'REPRESENT_UPLOADS' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RE_PRESENTMENT_UPLOAD')), 'finReference',  0, 'N', NULL, NULL, NULL, NULL, '0', NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'REPRESENT_UPLOADS' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RE_PRESENTMENT_UPLOAD')), 'dueDate',       0, 'N', NULL, NULL, NULL, NULL, '1', NULL, NULL, NULL, 'dd-MMM-yyyy', 'M');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1528.12.1" author="Sravani.S">
		<sql> 
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='MANDATES_UPLOAD');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='MANDATES_UPLOAD');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='MANDATES_UPLOAD';
 				
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD';

				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'MANDATES_UPLOAD', 'Mandates Upload File.', 12, 'MANDATE', null, null, ',', 1, 1, null, 'ROW:{Entity Code, Customer ID, Loan Reference, Mandate Type, MICR, IFSC Code, Account Number, Account Holder Name, Joint Account Holder Name, Account Type, Max Limit, Periodicity, Open Mandate, Start Date, Expiry Date, Partner Bank, UMRN number, External Mandate, Swap, Swap Effective Date,E-mandate Source, E-mandate Reference, EmployerID, Employee ID, Mandate Status, Rejection Reason, Security Mandate}', null, 'C', '/opt/pff/hdfc/mandate/upload', 'Mandate_', '.xls', 0, CURRENT_TIMESTAMP, '${ddmm},.${SEQ_DATE_FILE}', null, '0', NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD'), 'MANDATES_UPLOAD', 1, 'ID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 26, 0, 0);
				
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD')), 'entityCode',      		0, 'N', NULL, NULL, NULL, NULL, '0',  NULL, NULL, NULL, NULL, 'M');				
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD')), 'custCIF',       		0, 'N', NULL, NULL, NULL, NULL, '1',  NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD')), 'orgReference',      	0, 'N', NULL, NULL, NULL, NULL, '2',  NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD')), 'mandateType',      	0, 'N', NULL, NULL, NULL, NULL, '3',  NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD')), 'mICR',       			0, 'N', NULL, NULL, NULL, NULL, '4' , NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD')), 'iFSC',       			0, 'N', NULL, NULL, NULL, NULL, '5' , NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD')), 'accNumber',       		0, 'N', NULL, NULL, NULL, NULL, '6',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD')), 'accHolderName',    	0, 'N', NULL, NULL, NULL, NULL, '7',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD')), 'jointAccHolderName',   0, 'N', NULL, NULL, NULL, NULL, '8',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD')), 'accType',      		0, 'N', NULL, NULL, NULL, NULL, '9',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD')), 'maxLimit',       		0, 'N', NULL, NULL, NULL, NULL, '10', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD')), 'periodicity',       	0, 'N', NULL, NULL, NULL, NULL, '11', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD')), 'openMandate',       	0, 'N', NULL, NULL, NULL, NULL, '12', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD')), 'startDate',      		0, 'N', NULL, NULL, NULL, NULL, '13', NULL, NULL, NULL,'dd-MMM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD')), 'expiryDate',       	0, 'N', NULL, NULL, NULL, NULL, '14', NULL, NULL, NULL,'dd-MMM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD')), 'partnerBankId',      	0, 'N', NULL, NULL, NULL, NULL, '15', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD')), 'mandateRef',      		0, 'N', NULL, NULL, NULL, NULL, '16', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD')), 'externalMandate',      0, 'N', NULL, NULL, NULL, NULL, '17', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD')), 'swapIsActive',      	0, 'N', NULL, NULL, NULL, NULL, '18', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD')), 'swapEffectiveDate',    0, 'N', NULL, NULL, NULL, NULL, '19', NULL, NULL, NULL,'dd-MMM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD')), 'eMandateSource',       0, 'N', NULL, NULL, NULL, NULL, '20', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD')), 'eMandateReferenceNo',  0, 'N', NULL, NULL, NULL, NULL, '21', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD')), 'employerID',      		0, 'N', NULL, NULL, NULL, NULL, '22', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD')), 'employeeNo',       	0, 'N', NULL, NULL, NULL, NULL, '23', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD')), 'mandateStatus',       	0, 'N', NULL, NULL, NULL, NULL, '24', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD')), 'reason',       		0, 'N', NULL, NULL, NULL, NULL, '25', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANDATES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_UPLOAD')), 'securityMandate',  	0, 'N', NULL, NULL, NULL, NULL, '26', NULL, NULL, NULL, NULL, 'O');
		 	]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1528.13_3" author="Sravani.S">
		<sql> 
			<![CDATA[ 
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='CROSS_LOAN_KNOCKOFF_UPLOAD');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='CROSS_LOAN_KNOCKOFF_UPLOAD');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='CROSS_LOAN_KNOCKOFF_UPLOAD';
 				
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CROSS_LOAN_KNOCKOFF_UPLOAD'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CROSS_LOAN_KNOCKOFF_UPLOAD');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'CROSS_LOAN_KNOCKOFF_UPLOAD';
				
				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'CROSS_LOAN_KNOCKOFF_UPLOAD', 'CROSS_LOAN_KNOCKOFF_UPLOAD FILE', 12, 'CROSSLOANKNOCKOFF', null, null, ',', 1, 1, null, 'ROW:{FromFinreference, ToFinreference, ExcessType, ExcessAmount, AllocationType, Adviseid, PRI, PFT, ODC, Bounce, FEETYPE1}', null, 'C', '/opt/pff/hdfc/cross_loan_knockoff/upload', 'CROSSLOANKNOCKOFF_', '.xlsx', 0, CURRENT_TIMESTAMP, '${ddmm},.${SEQ_DATE_FILE}', null, '0', NULL, 1, 1);
		
				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CROSS_LOAN_KNOCKOFF_UPLOAD'), 'CROSS_LOAN_KNOCKOFF_UPLOAD', 1, 'ID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 0, 0, 0);
						
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CROSS_LOAN_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CROSS_LOAN_KNOCKOFF_UPLOAD')), 'fromFinReference',  		0, 'N', NULL, NULL, NULL, NULL, '0', NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CROSS_LOAN_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CROSS_LOAN_KNOCKOFF_UPLOAD')), 'toFinReference',  		0, 'N', NULL, NULL, NULL, NULL, '1', NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CROSS_LOAN_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CROSS_LOAN_KNOCKOFF_UPLOAD')), 'excessType',  			0, 'N', NULL, NULL, NULL, NULL, '2', NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CROSS_LOAN_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CROSS_LOAN_KNOCKOFF_UPLOAD')), 'excessAmount',  			0, 'N', NULL, NULL, NULL, NULL, '3', NULL, NULL, NULL, 'AMOUNT_MINOR:0.00', 'M');						
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CROSS_LOAN_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CROSS_LOAN_KNOCKOFF_UPLOAD')), 'allocationType',  		0, 'N', NULL, NULL, NULL, NULL, '4', NULL, NULL, NULL, NULL, 'O');	
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CROSS_LOAN_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CROSS_LOAN_KNOCKOFF_UPLOAD')), 'feeTypeCode',  			0, 'N', NULL, NULL, NULL, NULL, '5', NULL, NULL, NULL, NULL, 'O');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1528.15_2" author="Sravani.S">
		<sql>
			 <![CDATA[
			  	DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='MANUAL_KNOCKOFF_UPLOAD');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='MANUAL_KNOCKOFF_UPLOAD');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='MANUAL_KNOCKOFF_UPLOAD';
 				
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANUAL_KNOCKOFF_UPLOAD'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANUAL_KNOCKOFF_UPLOAD');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANUAL_KNOCKOFF_UPLOAD';
				
				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'MANUAL_KNOCKOFF_UPLOAD', 'MANUAL KNOCKOFF UPLOAD FILE.', 12, 'MANUALKNOCKOFF', null, null, ',', 1, 1, null, 'ROW:{LoanReference, ExcessType, AllocationType, ReceiptAmount, FeeTypeCode, PRI, PFT, ODC, Bounce, FEETYP1, FEETYP2}', null, 'C', '/opt/pff/hdfc/ManualKnockOff/upload', 'ManualKnockOff_', '.xlsx', 0, CURRENT_TIMESTAMP, '${ddmm},.${SEQ_DATE_FILE}', NULL, '0', NULL, 1, 1);
		
				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANUAL_KNOCKOFF_UPLOAD'), 'MANUAL_KNOCKOFF_UPLOAD', 1, 'ID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 0, 0, 0);
						
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANUAL_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANUAL_KNOCKOFF_UPLOAD')), 'finReference',  		0, 'N', NULL, NULL, NULL, NULL, '0', NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANUAL_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANUAL_KNOCKOFF_UPLOAD')), 'excessType',  		0, 'N', NULL, NULL, NULL, NULL, '1', NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANUAL_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANUAL_KNOCKOFF_UPLOAD')), 'allocationType',  	0, 'N', NULL, NULL, NULL, NULL, '2', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANUAL_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANUAL_KNOCKOFF_UPLOAD')), 'receiptAmount',  	0, 'N', NULL, NULL, NULL, NULL, '3', NULL, NULL, NULL, 'AMOUNT_MINOR:0.00', 'M');						
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MANUAL_KNOCKOFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANUAL_KNOCKOFF_UPLOAD')), 'feeTypeCode',  		0, 'N', NULL, NULL, NULL, NULL, '4', NULL, NULL, NULL, NULL, 'O');	
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#1528.19" author="Sravani.S">
		<addColumn tableName="HOLD_REFUND_UPLOAD">
			<column name="RecordSeq" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1528.19.1" author="Sravani.S">
		<sql>
			<![CDATA[	
				UPDATE HOLD_REFUND_UPLOAD SET RECORDSEQ = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1528.19.2" author="Sravani.S">
		<addNotNullConstraint tableName="HOLD_REFUND_UPLOAD" columnName="RecordSeq"
			columnDataType="bigint" />
	</changeSet>

	<changeSet id="ST#1528.19.3" author="Sravani.S" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE HOLD_REFUND_UPLOAD ADD CONSTRAINT DF_HR_UP_RECORDSEQ DEFAULT 0 FOR RECORDSEQ;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1528.19.3" author="Sravani.S" dbms="postgresql, oracle">
		<addDefaultValue tableName="HOLD_REFUND_UPLOAD" columnName="RecordSeq" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#1528.20" author="Sravani.S">
		<addColumn tableName="REPRESENT_UPLOADS">
			<column name="RecordSeq" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1528.20.1" author="Sravani.S">
		<sql>
			<![CDATA[ 
			 	UPDATE REPRESENT_UPLOADS SET RECORDSEQ = 0; 
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1528.20.2" author="Sravani.S">
		<addNotNullConstraint tableName="REPRESENT_UPLOADS" columnName="RecordSeq"
			columnDataType="bigint" />
	</changeSet>

	<changeSet id="ST#1528.20.3" author="Sravani.S" dbms="mssql">
		<sql> 
			<![CDATA[ 
				ALTER TABLE REPRESENT_UPLOADS ADD CONSTRAINT DF_RE_PU_RECORDSEQ DEFAULT 0 FOR RECORDSEQ;
			 ]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1528.20.3" author="Sravani.S" dbms="postgresql, oracle">
		<addDefaultValue tableName="REPRESENT_UPLOADS" columnName="RecordSeq" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#1528.21" author="Sravani.S">
		<addColumn tableName="PAYMINS_UPLOADS">
			<column name="RecordSeq" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1528.21.1" author="Sravani.S">
		<sql>
			<![CDATA[	
				UPDATE PAYMINS_UPLOADS SET RECORDSEQ = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1528.21.2" author="Sravani.S">
		<addNotNullConstraint tableName="PAYMINS_UPLOADS" columnName="RecordSeq" columnDataType="bigint" />
	</changeSet>

	<changeSet id="ST#1528.21.3" author="Sravani.S" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE PAYMINS_UPLOADS ADD CONSTRAINT DF_PU_RECORDSEQ DEFAULT 0 FOR RECORDSEQ;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1528.21.3" author="Sravani.S" dbms="postgresql, oracle">
		<addDefaultValue tableName="PAYMINS_UPLOADS" columnName="RecordSeq" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#1528.22" author="Sravani.S">
		<addColumn tableName="PRESENTMENT_RESP_UPLOAD">
			<column name="RecordSeq" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1528.22.1" author="Sravani.S">
		<sql>
			<![CDATA[	
				UPDATE PRESENTMENT_RESP_UPLOAD SET RECORDSEQ = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1528.22.2" author="Sravani.S">
		<addNotNullConstraint tableName="PRESENTMENT_RESP_UPLOAD" columnName="RecordSeq"
			columnDataType="bigint" />
	</changeSet>

	<changeSet id="ST#1528.22.3" author="Sravani.S" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE PRESENTMENT_RESP_UPLOAD ADD CONSTRAINT DF_PR_U_RECORDSEQ DEFAULT 0 FOR RECORDSEQ;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1528.22.3" author="Sravani.S" dbms="postgresql, oracle">
		<addDefaultValue tableName="PRESENTMENT_RESP_UPLOAD" columnName="RecordSeq" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#1528.23" author="Sravani.S">
		<addColumn tableName="LPP_UPLOAD">
			<column name="RecordSeq" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1528.23.1" author="Sravani.S">
		<sql>
			<![CDATA[	
				UPDATE LPP_UPLOAD SET RECORDSEQ = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1528.23.2" author="Sravani.S">
		<addNotNullConstraint tableName="LPP_UPLOAD" columnName="RecordSeq" columnDataType="bigint" />
	</changeSet>

	<changeSet id="ST#1528.23.3" author="Sravani.S" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE LPP_UPLOAD ADD CONSTRAINT DF_LP_PU_RECORDSEQ DEFAULT 0 FOR RECORDSEQ;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1528.23.3" author="Sravani.S" dbms="postgresql, oracle">
		<addDefaultValue tableName="LPP_UPLOAD" columnName="RecordSeq" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#1528.24" author="Sravani.S">
		<addColumn tableName="MANDATES_UPLOAD">
			<column name="RecordSeq" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1528.24.1" author="Sravani.S">
		<sql>
			<![CDATA[	
				UPDATE MANDATES_UPLOAD SET RECORDSEQ = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1528.24.2" author="Sravani.S">
		<addNotNullConstraint tableName="MANDATES_UPLOAD" columnName="RecordSeq" columnDataType="bigint" />
	</changeSet>

	<changeSet id="ST#1528.24.3" author="Sravani.S" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE MANDATES_UPLOAD ADD CONSTRAINT DF_MU_RECORDSEQ DEFAULT 0 FOR RECORDSEQ;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1528.24.3" author="Sravani.S" dbms="postgresql, oracle">
		<addDefaultValue tableName="MANDATES_UPLOAD" columnName="RecordSeq" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#1528.25" author="Sravani.S">
		<addColumn tableName="CROSS_LOAN_KNOCKOFF">
			<column name="RecordSeq" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1528.25.1" author="Sravani.S">
		<sql>
			<![CDATA[	
				UPDATE CROSS_LOAN_KNOCKOFF SET RECORDSEQ = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1528.25.2" author="Sravani.S">
		<addNotNullConstraint tableName="CROSS_LOAN_KNOCKOFF" columnName="RecordSeq"
			columnDataType="bigint" />
	</changeSet>

	<changeSet id="ST#1528.25.3" author="Sravani.S" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE CROSS_LOAN_KNOCKOFF ADD CONSTRAINT DF_CK_KO_RECORDSEQ DEFAULT 0 FOR RECORDSEQ;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1528.25.3" author="Sravani.S" dbms="postgresql, oracle">
		<addDefaultValue tableName="CROSS_LOAN_KNOCKOFF" columnName="RecordSeq" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#1528.26" author="Sravani.S">
		<addColumn tableName="CHEQUES_UPLOAD">
			<column name="RecordSeq" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1528.26.1" author="Sravani.S">
		<sql>
			<![CDATA[	
				UPDATE CHEQUES_UPLOAD SET RECORDSEQ = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1528.26.2" author="Sravani.S">
		<addNotNullConstraint tableName="CHEQUES_UPLOAD" columnName="RecordSeq" columnDataType="bigint" />
	</changeSet>

	<changeSet id="ST#1528.26.3" author="Sravani.S" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE CHEQUES_UPLOAD ADD CONSTRAINT DF_CP_RECORDSEQ DEFAULT 0 FOR RECORDSEQ;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1528.26.3" author="Sravani.S" dbms="postgresql, oracle">
		<addDefaultValue tableName="CHEQUES_UPLOAD" columnName="RecordSeq" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#1528.27" author="Sravani.S">
		<addColumn tableName="MANUAL_KNOCKOFF_UPLOAD">
			<column name="RecordSeq" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1528.27.1" author="Sravani.S">
		<sql>
			<![CDATA[	
				UPDATE MANUAL_KNOCKOFF_UPLOAD SET RECORDSEQ = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1528.27.2" author="Sravani.S">
		<addNotNullConstraint tableName="MANUAL_KNOCKOFF_UPLOAD" columnName="RecordSeq"
			columnDataType="bigint" />
	</changeSet>

	<changeSet id="ST#1528.27.3" author="Sravani.S" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE MANUAL_KNOCKOFF_UPLOAD ADD CONSTRAINT DF_MK_OU_RECORDSEQ DEFAULT 0 FOR RECORDSEQ;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1528.27.3" author="Sravani.S" dbms="postgresql, oracle">
		<addDefaultValue tableName="MANUAL_KNOCKOFF_UPLOAD" columnName="RecordSeq" defaultValue="0" />
	</changeSet>
	<changeSet id="ST#1528.28_3" author="Sravani.S">
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='BRANCH_CHANGE_UPLOAD');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='BRANCH_CHANGE_UPLOAD');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='BRANCH_CHANGE_UPLOAD';
 				
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'BRANCH_CHANGE_UPLOAD'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'BRANCH_CHANGE_UPLOAD');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'BRANCH_CHANGE_UPLOAD';

				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'BRANCH_CHANGE_UPLOAD', 'Branch Change Upload File.', 12, 'BRANCHCHANGE', null, null, ',', 1, 1, null, 'ROW:{LAN Reference,Branch Code,Remarks}', null, 'C', '/opt/PFF/BASE/hdfc/branch/upload', 'BranchChange_', '.xlsx', 0, CURRENT_TIMESTAMP, '${ddmm},.${SEQ_DATE_FILE}', null, '0', NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'BRANCH_CHANGE_UPLOAD'), 'BRANCH_CHANGE_UPLOAD', 1, 'ID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 3, 0, 0);
								
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'BRANCH_CHANGE_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'BRANCH_CHANGE_UPLOAD')),  'finReference',      	0, 'N', NULL, NULL, NULL, NULL, '0',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'BRANCH_CHANGE_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'BRANCH_CHANGE_UPLOAD')),  'branchCode',       		0, 'N', NULL, NULL, NULL, NULL, '1',  NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'BRANCH_CHANGE_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'BRANCH_CHANGE_UPLOAD')),  'remarks',      		    0, 'N', NULL, NULL, NULL, NULL, '2', NULL, NULL, NULL, NULL, 'O');
			]]>
		</sql>
	</changeSet>
	<changeSet id="ST#1528.29_2" author="Sravani.S">
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='FEE_WAIVER_UPLOAD');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='FEE_WAIVER_UPLOAD');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='FEE_WAIVER_UPLOAD';
 				
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FEE_WAIVER_UPLOAD'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FEE_WAIVER_UPLOAD');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'FEE_WAIVER_UPLOAD';

				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'FEE_WAIVER_UPLOAD', 'Bulk FeeWaivers Upload File.', 12, 'BULKFEEWAIVERS', null, null, ',', 1, 1, null, 'ROW:{Loan Reference, Charge Code, Waived Amount, Remarks}', null, 'C', '/opt/pff/hdfc/bulkFeeWaivers/upload', 'BulkFeeWaivers_', '.xls', 0, CURRENT_TIMESTAMP, '${ddmm},.${SEQ_DATE_FILE}', null, '0', NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FEE_WAIVER_UPLOAD'), 'FEE_WAIVER_UPLOAD', 1, 'ID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 4, 0, 0);
								
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'FEE_WAIVER_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FEE_WAIVER_UPLOAD')), 'finReference',   0, 'N', NULL, NULL, NULL, NULL, '0',  NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'FEE_WAIVER_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FEE_WAIVER_UPLOAD')), 'feeTypeCode',    0, 'N', NULL, NULL, NULL, NULL, '1',  NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'FEE_WAIVER_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FEE_WAIVER_UPLOAD')), 'waivedAmount',   0, 'N', NULL, NULL, NULL, NULL, '2' , NULL, NULL, NULL, 'AMOUNT_MINOR:0.00', 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'FEE_WAIVER_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FEE_WAIVER_UPLOAD')), 'remarks',        0, 'N', NULL, NULL, NULL, NULL, '3' , NULL, NULL, NULL, NULL, 'O');
	 		]]>
		</sql>
	</changeSet>
	<changeSet id="ST#1528.31.1" author="Sravani.S">
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='HOST_GL_UPLOAD');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='HOST_GL_UPLOAD');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='HOST_GL_UPLOAD';
 				
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOST_GL_UPLOAD'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOST_GL_UPLOAD');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOST_GL_UPLOAD';

				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'HOST_GL_UPLOAD', 'Host GL Upload File.', 12, 'HOSTGL', null, null, ',', 0, 1, null, 'ROW:{Host GL Code, Account Type, Loan Type, Cost Centre, Profit Centre, Opened Date, Allow Manual Entries, GL Description}', null, 'C', '/opt/PFF/BASE/hdfc/HostGL/upload', 'HostGL_', '.xlsx', 0, CURRENT_TIMESTAMP, '${ddmm},.${SEQ_DATE_FILE}', null, '0', NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOST_GL_UPLOAD'), 'HOST_GL_UPLOAD', 1, 'ID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 8, 0, 0);
								
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'HOST_GL_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOST_GL_UPLOAD')),  'hostGLCode',      		0, 'N', NULL, NULL, NULL, NULL, '0',  NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'HOST_GL_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOST_GL_UPLOAD')),  'accountType',           0, 'N', NULL, NULL, NULL, NULL, '1',  NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'HOST_GL_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOST_GL_UPLOAD')),  'loanType',      		0, 'N', NULL, NULL, NULL, NULL, '2',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'HOST_GL_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOST_GL_UPLOAD')),  'costCentreCode',      	0, 'N', NULL, NULL, NULL, NULL, '3',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'HOST_GL_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOST_GL_UPLOAD')),  'profitCentreCode',      0, 'N', NULL, NULL, NULL, NULL, '4',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'HOST_GL_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOST_GL_UPLOAD')),  'openedDate',      		0, 'N', NULL, NULL, NULL, NULL, '5',  NULL, NULL, NULL, 'dd-MMM-yyyy', 'M');
			    INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'HOST_GL_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOST_GL_UPLOAD')),  'allowManualEntries',    0, 'N', NULL, NULL, NULL, NULL, '6',  NULL, NULL, NULL, NULL, 'M');
			    INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'HOST_GL_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOST_GL_UPLOAD')),  'gLDescription',         0, 'N', NULL, NULL, NULL, NULL, '7',  NULL, NULL, NULL, NULL, 'O');
			]]>
		</sql>
	</changeSet>
	<changeSet id="ST#1528.33.1" author="Sravani.S">
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='MISCELLANEOUS_POSTING_UPLOAD');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='MISCELLANEOUS_POSTING_UPLOAD');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='MISCELLANEOUS_POSTING_UPLOAD';
 				
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD';

				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'MISCELLANEOUS_POSTING_UPLOAD', 'Miscellaneous Posting Upload File.', 12, 'MiscellaneousPosting', null, null, ',', 0, 1, null, 'ROW:{Batch Name, Batch Purpose, Reference, Debit GL, Credit GL, Txnamount, Value Date, Narr1, Narr2, Narr3, Narr4}', null, 'C', '/opt/PFF/BASE/hdfc/MiscellaneousPosting/upload', 'Miscellaneous_Posting_', '.xlsx', 0, CURRENT_TIMESTAMP, '${ddmm},.${SEQ_DATE_FILE}', null, '0', NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD'), 'MISCELLANEOUS_POSTING_UPLOAD', 1, 'ID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 11, 0, 0);
								
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD')),  'batchName',      	0, 'N', NULL, NULL, NULL,             NULL, '0',  NULL, NULL, NULL, NULL, 					'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD')),  'batchPurpose',      0, 'N', NULL, NULL, NULL,             NULL, '1',  NULL, NULL, NULL, NULL, 					'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD')),  'reference',      	0, 'N', NULL, NULL, NULL,             NULL, '2',  NULL, NULL, NULL, NULL, 					'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD')),  'debitGL',      		0, 'N', NULL, NULL, NULL,             NULL, '3',  NULL, NULL, NULL, NULL, 					'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD')),  'creditGL',          0, 'N', NULL, NULL, NULL,             NULL, '4',  NULL, NULL, NULL, NULL, 					'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD')),  'txnAmount',         0, 'N', NULL, NULL, NULL,             NULL, '5',  NULL, NULL, NULL, 'AMOUNT_MINOR:0.00', 	'M');
			    INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD')),  'valueDate',         0, 'N', NULL, NULL, NULL,             NULL, '6',  NULL, NULL, NULL, 'dd-MMM-yyyy', 			'M');
			    INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD')),  'narrLine1',         0, 'N', NULL, NULL, NULL,             NULL, '7',  NULL, NULL, NULL, NULL, 					'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD')),  'narrLine2',         0, 'N', NULL, NULL, NULL,             NULL, '8',  NULL, NULL, NULL, NULL, 					'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD')),  'narrLine3',         0, 'N', NULL, NULL, NULL,             NULL, '9',  NULL, NULL, NULL, NULL, 					'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MISCELLANEOUS_POSTING_UPLOAD')),  'narrLine4',         0, 'N', NULL, NULL, NULL,             NULL, '10', NULL, NULL, NULL, NULL, 					'O');
			]]>
		</sql>
	</changeSet>
	<changeSet id="ST#1528.34" author="Sravani.S">
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='RECEIPT_STATUS_UPLOAD');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='RECEIPT_STATUS_UPLOAD');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='RECEIPT_STATUS_UPLOAD';
 				
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RECEIPT_STATUS_UPLOAD'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RECEIPT_STATUS_UPLOAD');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'RECEIPT_STATUS_UPLOAD';

                INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'RECEIPT_STATUS_UPLOAD', 'ReceiptStatus Upload File.', 12, 'RECEIPTSTATUS', null, null, ',', 0, 1, null, 'ROW:{ReceiptID, Status, Realization Date, Bounce Date, Bounce/Cancel Reason, Bounce/Cancel Remarks}', null, 'C', '/opt/PFF/BASE/hdfc/ReceiptStatusUpload/upload', 'ReceiptStatus_', '.xlsx', 0, CURRENT_TIMESTAMP, '${ddmm},.${SEQ_DATE_FILE}', null, 0, NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RECEIPT_STATUS_UPLOAD'), 'RECEIPT_STATUS_UPLOAD', 1, 'HEADERID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 6, 0, 0);

				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'RECEIPT_STATUS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RECEIPT_STATUS_UPLOAD')), 'receiptId',         			 0, 'N', NULL, NULL, NULL, NULL, '0',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'RECEIPT_STATUS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RECEIPT_STATUS_UPLOAD')), 'statusRM',              		 0, 'N', NULL, NULL, NULL, NULL, '1',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'RECEIPT_STATUS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RECEIPT_STATUS_UPLOAD')), 'realizationDate', 			 	 0, 'N', NULL, NULL, NULL, NULL, '2',  NULL, NULL, NULL, 'dd-MMM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'RECEIPT_STATUS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RECEIPT_STATUS_UPLOAD')), 'bounceDate', 		   		 	 0, 'N', NULL, NULL, NULL, NULL, '3',  NULL, NULL, NULL, 'dd-MMM-yyyy', 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'RECEIPT_STATUS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RECEIPT_STATUS_UPLOAD')), 'bounceReason',  				 0, 'N', NULL, NULL, NULL, NULL, '4',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'RECEIPT_STATUS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'RECEIPT_STATUS_UPLOAD')), 'bounceRemarks',	    		 0, 'N', NULL, NULL, NULL, NULL, '5',  NULL, NULL, NULL, NULL, 'O');
			 ]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1528.35" author="Sravani.S">
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='REV_WRITE_OFF_UPLOAD');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='REV_WRITE_OFF_UPLOAD');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='REV_WRITE_OFF_UPLOAD';
 				
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'REV_WRITE_OFF_UPLOAD'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'REV_WRITE_OFF_UPLOAD');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'REV_WRITE_OFF_UPLOAD';

				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'REV_WRITE_OFF_UPLOAD', 'Reverse Write Off Upload File.', 12, 'RevWriteOffUpload', null, null, ',', 0, 1, null, 'ROW:{Loan Reference No,Remarks}', null, 'C', '/opt/pff/hdfc/revwriteoff/upload', 'RevWriteOffUpload_', '.xlsx', 0, CURRENT_TIMESTAMP, '${ddmm},.${SEQ_DATE_FILE}', null, 0, NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'REV_WRITE_OFF_UPLOAD'), 'REV_WRITE_OFF_UPLOAD', 1, 'HEADERID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 2, 0, 0);

				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'REV_WRITE_OFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'REV_WRITE_OFF_UPLOAD')), 'finReference', 0, 'N', NULL, NULL, NULL, 		  NULL, '0', NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'REV_WRITE_OFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'REV_WRITE_OFF_UPLOAD')), 'remarks',      0, 'N', NULL, NULL, NULL, 		  NULL, '1', NULL, NULL, NULL, NULL, 'O');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1528.36" author="Sravani.S">
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='WRITE_OFF_UPLOAD');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='WRITE_OFF_UPLOAD');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='WRITE_OFF_UPLOAD';
 				
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'WRITE_OFF_UPLOAD'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'WRITE_OFF_UPLOAD');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'WRITE_OFF_UPLOAD';

				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'WRITE_OFF_UPLOAD', 'Write Off Upload File.', 12, 'WriteOffUpload', null, null, ',', 0, 1, null, 'ROW:{Loan Reference No,Remarks}', null, 'C', '/opt/pff/hdfc/writeoff/upload', 'WriteOffUpload_', '.xlsx', 0, CURRENT_TIMESTAMP, '${ddmm},.${SEQ_DATE_FILE}', null, 0, NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'WRITE_OFF_UPLOAD'), 'WRITE_OFF_UPLOAD', 1, 'HEADERID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 2, 0, 0);

				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'WRITE_OFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'WRITE_OFF_UPLOAD')), 'finReference', 0, 'N', NULL, NULL, NULL, NULL, '0', NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'WRITE_OFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'WRITE_OFF_UPLOAD')), 'remarks',	  0, 'N', NULL, NULL, NULL, NULL, '1', NULL, NULL, NULL, NULL, 'O');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1528.37" author="Sravani.S">
		<sql>
		 	<![CDATA[ 
		 		INSERT INTO JOB_DETAILS (ID, JOBKEY, DESCRIPTION, JOBTRIGGER, CRON_EXPRESSION, JOBMODE, STATUS, ENABLED, FAILURE_NOTIFICATION_REQ, HOST_NAME, PORT, JMX_PORT, SMTP_SERVER, NOTIFY_EMAILS, EXECUTION_LOG_REQ, EXECUTION_RETENTION_DAYS, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, MONITORING_REQ) VALUES ((SELECT MAX(ID)+1 FROM JOB_DETAILS), 'EXCESS_TRANSFER_JOB', 		'EXCESS TRANSFER JOB',	 		'EXCESS_TRANSFER_JOB_TRIGGER', 			'0 0/10 * 1/1 * ? *', 1, 0, 1, 0, NULL, NULL, 0, NULL, NULL, 1, 0, 0, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1); 
				INSERT INTO JOB_DETAILS (ID, JOBKEY, DESCRIPTION, JOBTRIGGER, CRON_EXPRESSION, JOBMODE, STATUS, ENABLED, FAILURE_NOTIFICATION_REQ, HOST_NAME, PORT, JMX_PORT, SMTP_SERVER, NOTIFY_EMAILS, EXECUTION_LOG_REQ, EXECUTION_RETENTION_DAYS, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, MONITORING_REQ) VALUES ((SELECT MAX(ID)+1 FROM JOB_DETAILS), 'HOLD_REFUND_JOB', 			'HOLD_REFUND_JOB', 				'HOLD_REFUND_JOB_TRIGGER', 				'0 0/10 * 1/1 * ? *', 1, 0, 1, 0, NULL, NULL, 0, NULL, NULL, 1, 0, 0, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1); 
				INSERT INTO JOB_DETAILS (ID, JOBKEY, DESCRIPTION, JOBTRIGGER, CRON_EXPRESSION, JOBMODE, STATUS, ENABLED, FAILURE_NOTIFICATION_REQ, HOST_NAME, PORT, JMX_PORT, SMTP_SERVER, NOTIFY_EMAILS, EXECUTION_LOG_REQ, EXECUTION_RETENTION_DAYS, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, MONITORING_REQ) VALUES ((SELECT MAX(ID)+1 FROM JOB_DETAILS), 'REPRESENTMENT_JOB', 			'REPRESENTMENT_JOB', 			'REPRESENTMENT_JOB_TRIGGER', 			'0 0/10 * 1/1 * ? *', 1, 0, 1, 0, NULL, NULL, 0, NULL, NULL, 1, 0, 0, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1);
				INSERT INTO JOB_DETAILS (ID, JOBKEY, DESCRIPTION, JOBTRIGGER, CRON_EXPRESSION, JOBMODE, STATUS, ENABLED, FAILURE_NOTIFICATION_REQ, HOST_NAME, PORT, JMX_PORT, SMTP_SERVER, NOTIFY_EMAILS, EXECUTION_LOG_REQ, EXECUTION_RETENTION_DAYS, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, MONITORING_REQ) VALUES ((SELECT MAX(ID)+1 FROM JOB_DETAILS), 'MANDATE_JOB', 				'MANDATE_JOB', 					'MANDATE_JOB_TRIGGER', 					'0 0/10 * 1/1 * ? *', 1, 0, 1, 0, NULL, NULL, 0, NULL, NULL, 1, 0, 0, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1); 
				INSERT INTO JOB_DETAILS (ID, JOBKEY, DESCRIPTION, JOBTRIGGER, CRON_EXPRESSION, JOBMODE, STATUS, ENABLED, FAILURE_NOTIFICATION_REQ, HOST_NAME, PORT, JMX_PORT, SMTP_SERVER, NOTIFY_EMAILS, EXECUTION_LOG_REQ, EXECUTION_RETENTION_DAYS, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, MONITORING_REQ) VALUES ((SELECT MAX(ID)+1 FROM JOB_DETAILS), 'FATE_CORRECTION_JOB', 		'FATE_CORRECTION_JOB', 			'FATE_CORRECTION_JOB_TRIGGER', 			'0 0/10 * 1/1 * ? *', 1, 0, 1, 0, NULL, NULL, 0, NULL, NULL, 1, 0, 0, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1); 
				INSERT INTO JOB_DETAILS (ID, JOBKEY, DESCRIPTION, JOBTRIGGER, CRON_EXPRESSION, JOBMODE, STATUS, ENABLED, FAILURE_NOTIFICATION_REQ, HOST_NAME, PORT, JMX_PORT, SMTP_SERVER, NOTIFY_EMAILS, EXECUTION_LOG_REQ, EXECUTION_RETENTION_DAYS, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, MONITORING_REQ) VALUES ((SELECT MAX(ID)+1 FROM JOB_DETAILS), 'PAY_INS_JOB', 				'PAY_INS_JOB', 					'PAY_INS_JOB_TRIGGER', 					'0 0/10 * 1/1 * ? *', 1, 0, 1, 0, NULL, NULL, 0, NULL, NULL, 1, 0, 0, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1); 
				INSERT INTO JOB_DETAILS (ID, JOBKEY, DESCRIPTION, JOBTRIGGER, CRON_EXPRESSION, JOBMODE, STATUS, ENABLED, FAILURE_NOTIFICATION_REQ, HOST_NAME, PORT, JMX_PORT, SMTP_SERVER, NOTIFY_EMAILS, EXECUTION_LOG_REQ, EXECUTION_RETENTION_DAYS, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, MONITORING_REQ) VALUES ((SELECT MAX(ID)+1 FROM JOB_DETAILS), 'LPP_JOB', 					'LPP_JOB', 						'LPP_JOB_TRIGGER', 						'0 0/10 * 1/1 * ? *', 1, 0, 1, 0, NULL, NULL, 0, NULL, NULL, 1, 0, 0, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1);
		 		INSERT INTO JOB_DETAILS (ID, JOBKEY, DESCRIPTION, JOBTRIGGER, CRON_EXPRESSION, JOBMODE, STATUS, ENABLED, FAILURE_NOTIFICATION_REQ, HOST_NAME, PORT, JMX_PORT, SMTP_SERVER, NOTIFY_EMAILS, EXECUTION_LOG_REQ, EXECUTION_RETENTION_DAYS, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, MONITORING_REQ) VALUES ((SELECT MAX(ID)+1 FROM JOB_DETAILS), 'CROSSLOAN_KNOCKOFF_JOB', 		'CROSSLOAN_KNOCKOFF_JOB', 		'CROSSLOAN_KNOCKOFF_JOB_TRIGGER', 		'0 0/10 * 1/1 * ? *', 1, 0, 1, 0, NULL, NULL, 0, NULL, NULL, 1, 0, 0, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1); 
				INSERT INTO JOB_DETAILS (ID, JOBKEY, DESCRIPTION, JOBTRIGGER, CRON_EXPRESSION, JOBMODE, STATUS, ENABLED, FAILURE_NOTIFICATION_REQ, HOST_NAME, PORT, JMX_PORT, SMTP_SERVER, NOTIFY_EMAILS, EXECUTION_LOG_REQ, EXECUTION_RETENTION_DAYS, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, MONITORING_REQ) VALUES ((SELECT MAX(ID)+1 FROM JOB_DETAILS), 'MANUAL_KNOCKOFF_JOB', 		'MANUAL_KNOCKOFF_JOB', 			'MANUAL_KNOCKOFF_JOB_TRIGGER', 			'0 0/10 * 1/1 * ? *', 1, 0, 1, 0, NULL, NULL, 0, NULL, NULL, 1, 0, 0, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1); 
				INSERT INTO JOB_DETAILS (ID, JOBKEY, DESCRIPTION, JOBTRIGGER, CRON_EXPRESSION, JOBMODE, STATUS, ENABLED, FAILURE_NOTIFICATION_REQ, HOST_NAME, PORT, JMX_PORT, SMTP_SERVER, NOTIFY_EMAILS, EXECUTION_LOG_REQ, EXECUTION_RETENTION_DAYS, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, MONITORING_REQ) VALUES ((SELECT MAX(ID)+1 FROM JOB_DETAILS), 'CHEQUE_JOB', 					'CHEQUE_JOB', 					'CHEQUE_JOB_TRIGGER', 					'0 0/10 * 1/1 * ? *', 1, 0, 1, 0, NULL, NULL, 0, NULL, NULL, 1, 0, 0, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1);
 				INSERT INTO JOB_DETAILS (ID, JOBKEY, DESCRIPTION, JOBTRIGGER, CRON_EXPRESSION, JOBMODE, STATUS, ENABLED, FAILURE_NOTIFICATION_REQ, HOST_NAME, PORT, JMX_PORT, SMTP_SERVER, NOTIFY_EMAILS, EXECUTION_LOG_REQ, EXECUTION_RETENTION_DAYS, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, MONITORING_REQ) VALUES ((SELECT MAX(ID)+1 FROM JOB_DETAILS), 'KYC_DETAILS_JOB', 			'KYC_DETAILS_JOB', 				'KYC_DETAILS_JOB_TRIGGER', 				'0 0/10 * 1/1 * ? *', 1, 0, 1, 0, NULL, NULL, 0, NULL, NULL, 1, 0, 0, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1);
 				INSERT INTO JOB_DETAILS (ID, JOBKEY, DESCRIPTION, JOBTRIGGER, CRON_EXPRESSION, JOBMODE, STATUS, ENABLED, FAILURE_NOTIFICATION_REQ, HOST_NAME, PORT, JMX_PORT, SMTP_SERVER, NOTIFY_EMAILS, EXECUTION_LOG_REQ, EXECUTION_RETENTION_DAYS, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, MONITORING_REQ) VALUES ((SELECT MAX(ID)+1 FROM JOB_DETAILS), 'HOST_GL_DETAILS_JOB', 		'HOST_GL_DETAILS_JOB', 			'HOST_GL_DETAILS_JOB_TRIGGER', 			'0 0/10 * 1/1 * ? *', 1, 0, 1, 0, NULL, NULL, 0, NULL, NULL, 1, 0, 0, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1); 
 				INSERT INTO JOB_DETAILS (ID, JOBKEY, DESCRIPTION, JOBTRIGGER, CRON_EXPRESSION, JOBMODE, STATUS, ENABLED, FAILURE_NOTIFICATION_REQ, HOST_NAME, PORT, JMX_PORT, SMTP_SERVER, NOTIFY_EMAILS, EXECUTION_LOG_REQ, EXECUTION_RETENTION_DAYS, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, MONITORING_REQ) VALUES ((SELECT MAX(ID)+1 FROM JOB_DETAILS), 'MIS_POST_DETAILS_JOB', 		'MIS_POST_DETAILS_JOB', 		'MIS_POST_DETAILS_JOB_TRIGGER', 		'0 0/10 * 1/1 * ? *', 1, 0, 1, 0, NULL, NULL, 0, NULL, NULL, 1, 0, 0, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1); 
				INSERT INTO JOB_DETAILS (ID, JOBKEY, DESCRIPTION, JOBTRIGGER, CRON_EXPRESSION, JOBMODE, STATUS, ENABLED, FAILURE_NOTIFICATION_REQ, HOST_NAME, PORT, JMX_PORT, SMTP_SERVER, NOTIFY_EMAILS, EXECUTION_LOG_REQ, EXECUTION_RETENTION_DAYS, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, MONITORING_REQ) VALUES ((SELECT MAX(ID)+1 FROM JOB_DETAILS), 'FIN_CAN_DETAILS_JOB', 		'FIN_CAN_DETAILS_JOB', 			'FIN_CAN_DETAILS_JOB_TRIGGER', 			'0 0/10 * 1/1 * ? *', 1, 0, 1, 0, NULL, NULL, 0, NULL, NULL, 1, 0, 0, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1);
				INSERT INTO JOB_DETAILS (ID, JOBKEY, DESCRIPTION, JOBTRIGGER, CRON_EXPRESSION, JOBMODE, STATUS, ENABLED, FAILURE_NOTIFICATION_REQ, HOST_NAME, PORT, JMX_PORT, SMTP_SERVER, NOTIFY_EMAILS, EXECUTION_LOG_REQ, EXECUTION_RETENTION_DAYS, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, MONITORING_REQ) VALUES ((SELECT MAX(ID)+1 FROM JOB_DETAILS), 'WAIVER_DETAILS_JOB', 			'WAIVER_DETAILS_JOB', 			'WAIVER_DETAILS_JOB_TRIGGER', 			'0 0/10 * 1/1 * ? *', 1, 0, 1, 0, NULL, NULL, 0, NULL, NULL, 1, 0, 0, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1); 
				INSERT INTO JOB_DETAILS (ID, JOBKEY, DESCRIPTION, JOBTRIGGER, CRON_EXPRESSION, JOBMODE, STATUS, ENABLED, FAILURE_NOTIFICATION_REQ, HOST_NAME, PORT, JMX_PORT, SMTP_SERVER, NOTIFY_EMAILS, EXECUTION_LOG_REQ, EXECUTION_RETENTION_DAYS, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, MONITORING_REQ) VALUES ((SELECT MAX(ID)+1 FROM JOB_DETAILS), 'LIEN_DETAILS_JOB', 			'LIEN_DETAILS_JOB', 			'LIEN_DETAILS_JOB_TRIGGER', 			'0 0/10 * 1/1 * ? *', 1, 0, 1, 0, NULL, NULL, 0, NULL, NULL, 1, 0, 0, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1); 
				INSERT INTO JOB_DETAILS (ID, JOBKEY, DESCRIPTION, JOBTRIGGER, CRON_EXPRESSION, JOBMODE, STATUS, ENABLED, FAILURE_NOTIFICATION_REQ, HOST_NAME, PORT, JMX_PORT, SMTP_SERVER, NOTIFY_EMAILS, EXECUTION_LOG_REQ, EXECUTION_RETENTION_DAYS, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, MONITORING_REQ) VALUES ((SELECT MAX(ID)+1 FROM JOB_DETAILS), 'CREATE_RECEIPT_DETAILS_JOB', 	'CREATE_RECEIPT_DETAILS_JOB',	'CREATE_RECEIPT_DETAILS_JOB_TRIGGER', 	'0 0/10 * 1/1 * ? *', 1, 0, 1, 0, NULL, NULL, 0, NULL, NULL, 1, 0, 0, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1); 
				INSERT INTO JOB_DETAILS (ID, JOBKEY, DESCRIPTION, JOBTRIGGER, CRON_EXPRESSION, JOBMODE, STATUS, ENABLED, FAILURE_NOTIFICATION_REQ, HOST_NAME, PORT, JMX_PORT, SMTP_SERVER, NOTIFY_EMAILS, EXECUTION_LOG_REQ, EXECUTION_RETENTION_DAYS, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, MONITORING_REQ) VALUES ((SELECT MAX(ID)+1 FROM JOB_DETAILS), 'RECEIPT_STATUS_DETAILS_JOB',	'RECEIPT_STATUS_DETAILS_JOB',	'RECEIPT_STATUS_DETAILS_JOB_TRIGGER', 	'0 0/10 * 1/1 * ? *', 1, 0, 1, 0, NULL, NULL, 0, NULL, NULL, 1, 0, 0, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1);
		 		INSERT INTO JOB_DETAILS (ID, JOBKEY, DESCRIPTION, JOBTRIGGER, CRON_EXPRESSION, JOBMODE, STATUS, ENABLED, FAILURE_NOTIFICATION_REQ, HOST_NAME, PORT, JMX_PORT, SMTP_SERVER, NOTIFY_EMAILS, EXECUTION_LOG_REQ, EXECUTION_RETENTION_DAYS, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, MONITORING_REQ) VALUES ((SELECT MAX(ID)+1 FROM JOB_DETAILS), 'WRITE_OFF_DETAILS_JOB', 		'WRITE_OFF_DETAILS_JOB', 		'WRITE_OFF_DETAILS_JOB_TRIGGER', 		'0 0/10 * 1/1 * ? *', 1, 0, 1, 0, NULL, NULL, 0, NULL, NULL, 1, 0, 0, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1); 
				INSERT INTO JOB_DETAILS (ID, JOBKEY, DESCRIPTION, JOBTRIGGER, CRON_EXPRESSION, JOBMODE, STATUS, ENABLED, FAILURE_NOTIFICATION_REQ, HOST_NAME, PORT, JMX_PORT, SMTP_SERVER, NOTIFY_EMAILS, EXECUTION_LOG_REQ, EXECUTION_RETENTION_DAYS, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, MONITORING_REQ) VALUES ((SELECT MAX(ID)+1 FROM JOB_DETAILS), 'RE_WRITE_OFF_DETAILS_JOB', 	'RE_WRITE_OFF_DETAILS_JOB', 	'RE_WRITE_OFF_DETAILS_JOB_TRIGGER', 	'0 0/10 * 1/1 * ? *', 1, 0, 1, 0, NULL, NULL, 0, NULL, NULL, 1, 0, 0, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1);
 				INSERT INTO JOB_DETAILS (ID, JOBKEY, DESCRIPTION, JOBTRIGGER, CRON_EXPRESSION, JOBMODE, STATUS, ENABLED, FAILURE_NOTIFICATION_REQ, HOST_NAME, PORT, JMX_PORT, SMTP_SERVER, NOTIFY_EMAILS, EXECUTION_LOG_REQ, EXECUTION_RETENTION_DAYS, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, MONITORING_REQ) VALUES ((SELECT MAX(ID)+1 FROM JOB_DETAILS), 'BRANCH_DETAILS_JOB', 			'BRANCH_DETAILS_JOB', 			'BRANCH_DETAILS_JOB_TRIGGER', 		 	'0 0/10 * 1/1 * ? *', 1, 0, 1, 0, NULL, NULL, 0, NULL, NULL, 1, 0, 0, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1);
 			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1528.38" author="Sravani.S">
		<sql>
		 	<![CDATA[
		 		UPDATE DATA_ENGINE_CONFIG SET MAXRECORDS = 10000 WHERE NAME = 'LIEN_UPLOAD';
		 	]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1528.39.1" author="Sravani.S">
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='LOAN_CANCEL_UPLOAD');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='LOAN_CANCEL_UPLOAD');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='LOAN_CANCEL_UPLOAD';
 				
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_CANCEL_UPLOAD'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_CANCEL_UPLOAD');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_CANCEL_UPLOAD';

				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'LOAN_CANCEL_UPLOAD', 'Loan Cancellation Upload File.', 12, 'LoanCancel', null, null, ',', 0, 1, null, 'ROW:{LAN,Type,Reason,Remarks}', null, 'C', '/opt/pff/hdfc/loancancel/upload', 'LoanCancel_', '.xlsx', 0, CURRENT_TIMESTAMP, '${ddmm},.${SEQ_DATE_FILE}', null, 0, NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_CANCEL_UPLOAD'), 'LOAN_CANCEL_UPLOADS', 1, 'HEADERID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 0, 0, 0);

				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LOAN_CANCEL_UPLOADS' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_CANCEL_UPLOAD')), 'finReference',  0, 'N', NULL, NULL, NULL, NULL, '0', NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LOAN_CANCEL_UPLOADS' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_CANCEL_UPLOAD')), 'cancelType',       0, 'N', NULL, NULL, NULL, NULL, '1', NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LOAN_CANCEL_UPLOADS' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_CANCEL_UPLOAD')), 'reason',       0, 'N', NULL, NULL, NULL, NULL, '2', NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LOAN_CANCEL_UPLOADS' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_CANCEL_UPLOAD')), 'remarks',       0, 'N', NULL, NULL, NULL, NULL, '3', NULL, NULL, NULL, NULL, 'M');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1528.40.1" author="Sravani.S">
		<sql>
			<![CDATA[	
				UPDATE BRANCH_CHANGE_UPLOAD SET RECORDSEQ = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1528.40.2" author="Sravani.S">
		<addNotNullConstraint tableName="BRANCH_CHANGE_UPLOAD" columnName="RecordSeq"
			columnDataType="bigint" />
	</changeSet>

	<changeSet id="ST#1528.40.3" author="Sravani.S" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE BRANCH_CHANGE_UPLOAD ADD CONSTRAINT DF_BC_U_RECORDSEQ DEFAULT 0 FOR RECORDSEQ;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1528.40.3" author="Sravani.S" dbms="postgresql, oracle">
		<addDefaultValue tableName="BRANCH_CHANGE_UPLOAD" columnName="RecordSeq" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#1528.41.1" author="Sravani.S">
		<sql>
			<![CDATA[	
				UPDATE CREATE_RECEIPT_UPLOAD SET RECORDSEQ = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1528.41.2" author="Sravani.S">
		<addNotNullConstraint tableName="CREATE_RECEIPT_UPLOAD" columnName="RecordSeq"
			columnDataType="bigint" />
	</changeSet>

	<changeSet id="ST#1528.41.3" author="Sravani.S" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE CREATE_RECEIPT_UPLOAD ADD CONSTRAINT DF_CR_U_RECORDSEQ DEFAULT 0 FOR RECORDSEQ;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1528.41.3" author="Sravani.S" dbms="postgresql, oracle">
		<addDefaultValue tableName="CREATE_RECEIPT_UPLOAD" columnName="RecordSeq" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#1528.42" author="Sravani.S">
		<addColumn tableName="LOAN_CANCEL_UPLOADS">
			<column name="RecordSeq" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1528.42.1" author="Sravani.S">
		<sql>
			<![CDATA[	
				UPDATE LOAN_CANCEL_UPLOADS SET RECORDSEQ = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1528.42.2" author="Sravani.S">
		<addNotNullConstraint tableName="LOAN_CANCEL_UPLOADS" columnName="RecordSeq"
			columnDataType="bigint" />
	</changeSet>

	<changeSet id="ST#1528.42.3" author="Sravani.S" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE LOAN_CANCEL_UPLOADS ADD CONSTRAINT DF_LC_U_RECORDSEQ DEFAULT 0 FOR RECORDSEQ;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1528.42.3" author="Sravani.S" dbms="postgresql, oracle">
		<addDefaultValue tableName="LOAN_CANCEL_UPLOADS" columnName="RecordSeq" defaultValue="0" />
	</changeSet>


	<changeSet id="ST#4875.1" author="Poojitha.m">
		<addColumn tableName="FinanceMain">
			<column name="CreatedBy" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#4875.2" author="Poojitha.m">
		<addColumn tableName="FinanceMain">
			<column name="CreatedOn" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#4875.3" author="Poojitha.m">
		<addColumn tableName="FinanceMain">
			<column name="ApprovedBy" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#4875.4" author="Poojitha.m">
		<addColumn tableName="FinanceMain">
			<column name="ApprovedOn" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#4875.5" author="Poojitha.m">
		<addColumn tableName="FinanceMain_Temp">
			<column name="CreatedBy" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#4875.6" author="Poojitha.m">
		<addColumn tableName="FinanceMain_Temp">
			<column name="CreatedOn" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#4875.7" author="Poojitha.m">
		<addColumn tableName="FinanceMain_Temp">
			<column name="ApprovedBy" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#4875.8" author="Poojitha.m">
		<addColumn tableName="FinanceMain_Temp">
			<column name="ApprovedOn" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#4875.9" author="Poojitha.m">
		<addColumn tableName="WifFinanceMain">
			<column name="CreatedBy" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#4875.10" author="Poojitha.m">
		<addColumn tableName="WifFinanceMain">
			<column name="CreatedOn" type="datetime" />
		</addColumn>
	</changeSet>
	<changeSet id="ST#4875.11" author="Poojitha.m">
		<addColumn tableName="WifFinanceMain">
			<column name="ApprovedBy" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#4875.12" author="Poojitha.m">
		<addColumn tableName="WifFinanceMain">
			<column name="ApprovedOn" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#4875.13" author="Poojitha.m">
		<addColumn tableName="WifFinanceMain_Temp">
			<column name="CreatedBy" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#4875.14" author="Poojitha.m">
		<addColumn tableName="WifFinanceMain_Temp">
			<column name="CreatedOn" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#4875.15" author="Poojitha.m">
		<addColumn tableName="WifFinanceMain_Temp">
			<column name="ApprovedBy" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#4875.16" author="Poojitha.m">
		<addColumn tableName="WifFinanceMain_Temp">
			<column name="ApprovedOn" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#4875.17" author="Poojitha.m">
		<addColumn tableName="RejectFinanceMain">
			<column name="CreatedBy" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#4875.18" author="Poojitha.m">
		<addColumn tableName="RejectFinanceMain">
			<column name="CreatedOn" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#4875.19" author="Poojitha.m">
		<addColumn tableName="RejectFinanceMain">
			<column name="ApprovedBy" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#4875.20" author="Poojitha.m">
		<addColumn tableName="RejectFinanceMain">
			<column name="ApprovedOn" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#4876.1" author="Poojitha.m">
		<addColumn tableName="Customers">
			<column name="CreatedBy" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#4876.2" author="Poojitha.m">
		<addColumn tableName="Customers">
			<column name="CreatedOn" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#4876.3" author="Poojitha.m">
		<addColumn tableName="Customers">
			<column name="ApprovedBy" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#4876.4" author="Poojitha.m">
		<addColumn tableName="Customers">
			<column name="ApprovedOn" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#4876.5" author="Poojitha.m">
		<addColumn tableName="Customers_temp">
			<column name="CreatedBy" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#4876.6" author="Poojitha.m">
		<addColumn tableName="Customers_temp">
			<column name="CreatedOn" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#4876.7" author="Poojitha.m">
		<addColumn tableName="Customers_temp">
			<column name="ApprovedBy" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#4876.8" author="Poojitha.m">
		<addColumn tableName="Customers_temp">
			<column name="ApprovedOn" type="datetime" />
		</addColumn>
	</changeSet>


	<changeSet id="ST#4876.9" author="Poojitha.m">
		<addColumn tableName="WifCustomers">
			<column name="CreatedBy" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#4876.10" author="Poojitha.m">
		<addColumn tableName="WifCustomers">
			<column name="CreatedOn" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#4876.11" author="Poojitha.m">
		<addColumn tableName="WifCustomers">
			<column name="ApprovedBy" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#4876.12" author="Poojitha.m">
		<addColumn tableName="WifCustomers">
			<column name="ApprovedOn" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#4875.1999_1_pre" author="Poojitha.M" dbms="postgresql">
		<sql> 
			<![CDATA[ 
				select deps_save_and_drop_dependencies ('plf', 'financemain_aview'); 
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#4875.1999_1" author="Poojitha.M">
		<createView viewName="FINANCEMAIN_AVIEW" replaceIfExists="true">
			 <![CDATA[ 
				SELECT T1.FINID
					, T1.FINREFERENCE
			    	, T1.INVESTMENTREF
			    	, T1.NUMBEROFTERMS
			    	, T1.GRCPERIODENDDATE
			    	, T1.ALLOWGRCPERIOD
			    	, T1.GRACEBASERATE
			    	, T1.GRACESPECIALRATE
			    	, T1.GRCPFTRATE
			    	, T1.GRCPFTFRQ
			    	, T1.NEXTGRCPFTDATE
			    	, T1.ALLOWGRCPFTRVW
			    	, T1.GRCPFTRVWFRQ
			    	, T1.NEXTGRCPFTRVWDATE
			    	, T1.ALLOWGRCCPZ
			    	, T1.GRCCPZFRQ
			    	, T1.NEXTGRCCPZDATE
			    	, T1.REPAYBASERATE
			    	, T1.REPAYSPECIALRATE
			    	, T1.REPAYPROFITRATE
			    	, T1.REPAYFRQ
			    	, T1.NEXTREPAYDATE
			    	, T1.REPAYPFTFRQ
			    	, T1.NEXTREPAYPFTDATE
			    	, T1.ALLOWREPAYRVW
			    	, T1.REPAYRVWFRQ
			    	, T1.NEXTREPAYRVWDATE
			    	, T1.ALLOWREPAYCPZ
			    	, T1.REPAYCPZFRQ
			    	, T1.NEXTREPAYCPZDATE
			    	, T1.MATURITYDATE
			    	, T1.CPZATGRACEEND
			    	, T1.DOWNPAYMENT
			    	, T1.GRACEFLATAMOUNT
			    	, T1.REQREPAYAMOUNT
			    	, T1.TOTALPROFIT
			    	, T1.TOTALCPZ
			    	, T1.TOTALGROSSPFT
			    	, T1.TOTALGROSSGRCPFT
			    	, T1.TOTALGRACEPFT
			    	, T1.TOTALGRACECPZ
			    	, T1.GRCRATEBASIS
			    	, T1.REPAYRATEBASIS
			    	, T1.FINTYPE
			    	, T1.FINREMARKS
			    	, T1.FINCCY
			    	, T1.SCHEDULEMETHOD
			    	, T1.PROFITDAYSBASIS
			    	, T1.REQMATURITY
			    	, T1.CALTERMS
			    	, T1.CALMATURITY
			    	, T1.FIRSTREPAY
			    	, T1.LASTREPAY
			    	, T1.FINSTARTDATE
			    	, T1.FINAMOUNT
					, T1.FINAMOUNT + T1.FEECHARGEAMT - T1.DOWNPAYMENT LOVDESCFINANCINGAMOUNT
			    	, T1.FINREPAYMENTAMOUNT
			    	, T1.CUSTID
			   		, T1.DEFFERMENTS
			    	, T1.PLANDEFERCOUNT
			    	, T1.FINBRANCH
			    	, T1.FINSOURCEID
			    	, T1.ALLOWEDDEFRPYCHANGE
			    	, T1.AVAILEDDEFRPYCHANGE
			    	, T1.ALLOWEDDEFFRQCHANGE
			    	, T1.AVAILEDDEFFRQCHANGE
			    	, T1.RECALTYPE
			    	, T1.FINASSETVALUE
			    	, T1.FINISACTIVE
			    	, T1.LIMITVALID
			    	, T1.OVERRIDELIMIT
			    	, T1.VERSION
			    	, T1.LASTMNTBY
			    	, T1.LASTMNTON
			    	, T1.RECORDSTATUS
			    	, T1.ROLECODE
			    	, T1.NEXTROLECODE
			    	, T1.TASKID
			    	, T1.NEXTTASKID
			    	, T1.RECORDTYPE
			    	, T1.WORKFLOWID
					, T7.FINTYPEDESC LOVDESCFINTYPENAME
					, T7.FINMAXAMOUNT LOVDESCFINMAXAMT
					, T7.FINMINAMOUNT LOVDESCFINMINAMOUNT
			    	, T1.MINDOWNPAYPERC
					, T7.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT
					, T7.FINISDWPAYREQUIRED LOVDESCDWNPAYREQ
					, T7.FINMAXDIFFERMENT LOVDESCFINMAXDIFFERMENT
					, T12.BRANCHDESC LOVDESCFINBRANCHNAME
					, T12.BRANCHPROVINCE FINBRANCHPROVINCECODE
			    	, T1.LASTREPAYDATE
			    	, T1.LASTREPAYPFTDATE
			    	, T1.LASTREPAYRVWDATE
			    	, T1.LASTREPAYCPZDATE
			    	, T1.ALLOWGRCREPAY
			    	, T1.GRCSCHDMTHD
			    	, T1.GRCMARGIN
			    	, T1.REPAYMARGIN
			    	, T1.FINCURRASSETVALUE
			    	, T1.FINCOMMITMENTREF
			    	, T1.FINLIMITREF
			    	, T1.FINCONTRACTDATE
					, T17.ACRTILLLBD LOVDESCACCRUEDTILLLBD
			    	, T7.FINRVWRATEAPPLFOR
			    	, T1.TOTALREPAYAMT
			    	, T1.CLOSINGSTATUS
			    	, T1.FINAPPROVEDDATE
			    	, T1.FEECHARGEAMT
			    	, T1.BLACKLISTED
			    	, T1.FINREPAYPFTONFRQ
			    	, T1.ANUALIZEDPERCRATE
			    	, T1.EFFECTIVERATEOFRETURN
			    	, T1.MIGRATEDFINANCE
			    	, T1.SCHEDULEMAINTAINED
			    	, T1.SCHEDULEREGENERATED
			    	, T1.FINPURPOSE
					, T39.LOANPURPOSEDESC LOVDESCFINPURPOSENAME
			    	, T1.FINSTATUS
			    	, T1.FINSTSREASON
			    	, T1.INITIATEUSER
					, T7.FINSCHEDULEON LOVDESCFINSCHEDULEON
			    	, T1.CUSTDSR
			    	, T1.JOINTACCOUNT
			    	, T1.JOINTCUSTID
			    	, T1.DOWNPAYBANK
			    	, T1.DOWNPAYSUPL
			    	, T1.SECURITYCOLLATERAL
			    	, T1.APPROVED
			    	, T1.DISCREPANCY
			    	, T1.LIMITAPPROVED
			    	, T1.GRACETERMS
					, T7.FINDIVISION LOVDESCFINDIVISION
			    	, T1.RCDMAINTAINSTS
			    	, T1.FINREPAYMETHOD
			    	, T1.GRCPROFITDAYSBASIS
			    	, T1.STEPFINANCE
			    	, T1.STEPTYPE
				    , T1.STEPPOLICY
				    , T1.ALWMANUALSTEPS
				    , T1.NOOFSTEPS
				    , T1.LINKEDFINREF
				    , T1.NEXTUSERID
				    , T1.PRIORITY
					, T24.POLICYDESC LOVDESCSTEPPOLICYNAME
				    , T1.GRCMINRATE
				    , T1.GRCMAXRATE
				    , T1.RPYMINRATE
				    , T1.RPYMAXRATE
				    , T1.DEVIATIONAPPROVAL
				    , T1.MANUALSCHEDULE
				    , T1.CREDITINSAMT
				    , T27.CUSTSTSDESCRIPTION
				    , T1.INITIATEDATE
				    , T1.FINPREAPPROVEDREF
				    , T1.ACCOUNTSOFFICER
					, T28.DEALERNAME LOVDESCACCOUNTSOFFICER
					, T28.DEALERCITY LOVDESCSOURCECITY
				    , T1.DSACODE
					, T30.ROFFICERDESC DSACODEDESC
				    , T1.TDSAPPLICABLE
				    , T1.MANDATEID
				    , T1.SECURITYMANDATEID
				    , T1.DROPLINEFRQ
				    , T1.FIRSTDROPLINEDATE
				    , T1.PFTSERVICINGODLIMIT
				    , T1.ALWBPI
				    , T1.BPITREATMENT
				    , T1.PLANEMIHALW
				    , T1.PLANEMIHMETHOD
				    , T1.PLANEMIHMAXPERYEAR
				    , T1.PLANEMIHMAX
				    , T1.PLANEMIHLOCKPERIOD
				    , T1.PLANEMICPZ
				    , T1.CALROUNDINGMODE
				    , T1.ALWMULTIDISB
				    , T1.APPLICATIONNO
				    , T1.REFERRALID
					, T33.ROFFICERDESC REFERRALIDDESC
				    , T1.DMACODE
					, T34.ROFFICERDESC DMACODEDESC
				    , T1.SALESDEPARTMENT
					, T35.DEPTDESC SALESDEPARTMENTDESC
				    , T1.QUICKDISB
				    , T1.WIFREFERENCE
				    , T1.UNPLANEMIHLOCKPERIOD
				    , T1.UNPLANEMICPZ
				    , T1.REAGECPZ
				    , T1.MAXUNPLANNEDEMI
				    , T1.MAXREAGEHOLIDAYS
				    , T1.AVAILEDUNPLANEMI
				    , T1.AVAILEDREAGEH
				    , T1.BPIAMOUNT
				    , T1.DEDUCTFEEDISB
				    , T1.RVWRATEAPPLFOR
				    , T1.SCHCALONRVW
				    , T1.PASTDUEPFTCALMTHD
				    , T1.PASTDUEPFTMARGIN
				    , T1.DROPPINGMETHOD
				    , T1.RATECHGANYDAY
				    , T1.PROMOTIONCODE
				    , T1.RESTRUCTURELOAN
				    , T1.OLDFINREFERENCE
				    , T1.REAGEBUCKET
				    , T1.FINCATEGORY
				    , T1.PRODUCTCATEGORY
				    , T1.ROUNDINGTARGET
					, T36.ENTITYCODE LOVDESCENTITYCODE
				    , T1.ELIGIBILITYMETHOD
					, T38.FIELDCODEVALUE LOVELIGIBILITYMETHOD
					, T38.VALUEDESC LOVDESCELIGIBILITYMETHOD
				    , T1.EMPLOYEENAME
					, T37.ROFFICERDESC EMPLOYEENAMEDESC
				    , T1.SAMPLINGREQUIRED
				    , T1.LEGALREQUIRED
				    , T1.GRCMAXAMOUNT
				    , T1.CONNECTOR
					, T40.DEALERNAME CONNECTORCODE
					, T40.DEALERCITY CONNECTORDESC
				    , T1.ADVANCEEMI
				    , T1.ADVEMITERMS
				    , T1.BPIPFTDAYSBASIS
				    , T1.FIXEDRATETENOR
				    , T1.FIXEDTENORRATE
					, T12.BRANCHTEL FINBRANCHCONTACT
				    , T1.PROCESSATTRIBUTES
				    , T1.BUSINESSVERTICAL
					, BV.CODE BUSINESSVERTICALCODE
					, BV.DESCRIPTION BUSINESSVERTICALDESC
				    , T1.GRCADVTYPE
				    , T1.GRCADVTERMS
				    , T1.ADVTYPE
				    , T1.ADVTERMS
				    , T1.ADVSTAGE
				    , T1.TDSPERCENTAGE
				    , T1.TDSSTARTDATE
				    , T1.TDSENDDATE
				    , T1.TDSLIMITAMT
				    , T1.VANREQ
				    , T1.VANCODE
				    , T1.ALLOWDRAWINGPOWER
				    , T1.ALLOWREVOLVING
				    , T1.SANBSDSCHDLE
				    , T1.PROMOTIONSEQID
				    , T1.SVAMOUNT
				    , T1.CBAMOUNT
				    , T1.APPLIEDLOANAMT
				    , T1.FINISRATERVWATGRCEND
				    , T1.PLANEMIHALWINGRACE
					, T1.REQLOANAMT
					, T1.REQLOANTENOR
					, T1.FINOCRREQUIRED
					, T1.OFFERPRODUCT
					, T1.OFFERAMOUNT
					, T1.CUSTSEGMENTATION
					, T1.BASEPRODUCT
					, T1.PROCESSTYPE
					, T1.BUREAUTIMESERIES
					, T1.CAMPAIGNNAME
					, T1.EXISTINGLANREFNO
					, T1.LEADSOURCE
					, T1.POSOURCE
					, T1.RSA
					, T1.VERIFICATION
					, T1.SOURCINGBRANCH
					, T1.SOURCHANNELCATEGORY
					, T1.ASMNAME
					, T13.BRANCHDESC LOVDESCSOURCINGBRANCH
					, T1.ENDGRCPERIODAFTRFULLDISB
					, T1.AUTOINCGRCENDDATE
					, T1.ALWGRCADJ
					, T1.PMAY
					, T1.OFFERID
					, T1.ALWLOANSPLIT
					, T1.PARENTREF
					, T1.LOANSPLITTED
					, T1.INSTBASEDSCHD
					, C.CUSTCIF LOVDESCCUSTCIF
					, T1.ALLOWSUBVENTION
					, T1.TDSTYPE
					, T1.WRITEOFFLOAN
					, T1.RESTRUCTURE
					, T1.CALCOFSTEPS
					, T1.STEPSAPPLIEDFOR
					, T1.NOOFGRCSTEPS
					, T1.SCHDVERSION
					, T1.SUBVENTIONFROM
					, T1.MANUFACTURERDEALERID
					, T41.DEALERNAME MANUFACTURERDEALERNAME
					, T41.CODE MANUFACTURERDEALERCODE
					, T1.ESCROW
					, T1.CUSTBANKID
					, CB.ACCOUNTNUMBER CUSTACCTNUMBER
					, CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME
					, T1.MANUALSCHDTYPE
					, T1.ISRA
					, T1.SANCTIONEDDATE
					, T1.OVERDRAFTTXNCHRGREQ
					, T1.OVERDRAFTCALCCHRG
					, T1.OVERDRAFTCHRGAMTORPERC
					, T1.OVERDRAFTCHRCALON
					, T17.NOINST
					, T1.UNDERSETTLEMENT
					, T1.UNDERNPA
					, T1.CREATEDBY
					, T1.CREATEDON
					, T1.APPROVEDBY
					, T1.APPROVEDON
					, T7.ALLOWCANCELFIN
				FROM FINANCEMAIN T1
				JOIN RMTFINANCETYPES T7 ON T1.FINTYPE = T7.FINTYPE 
				LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH  = T12.BRANCHCODE 
				LEFT JOIN RMTBRANCHES T13 ON T1.SOURCINGBRANCH = T13.BRANCHCODE
				LEFT JOIN FINPFTDETAILS T17 ON T17.FINID  = T1.FINID 
				LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY  = T24.POLICYCODE 
				LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS  = T27.CUSTSTSCODE 
				LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
				LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE  = T30.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID  = T33.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE  = T34.ROFFICERCODE 
				LEFT JOIN BMTDEPARTMENTS T35 ON T1.SALESDEPARTMENT  = T35.DEPTCODE 
				LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION  = T36.DIVISIONCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME  = T37.ROFFICERCODE 
				LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE  = 'ELGMETHOD' 
				LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE  = T39.LOANPURPOSECODE 
				LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
				LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
				INNER JOIN CUSTOMERS C ON C.CUSTID = T1.CUSTID
				LEFT JOIN AMTVEHICLEDEALER T41 ON T1.MANUFACTURERDEALERID = T41.DEALERID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
			]]>
		</createView>
	</changeSet>


	<changeSet id="ST#4875.1999_1_post" author="Poojitha.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_aview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#4875.2000_pre" author="Poojitha.M" dbms="postgresql">
		<sql> 
		<![CDATA[ 
			select deps_save_and_drop_dependencies ('plf', 'financemain_view'); 
		]]>
		</sql>
	</changeSet>

	<changeSet id="ST#4875.2000" author="Poojitha.M">
		<createView viewName="FINANCEMAIN_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINID
					, T1.FINREFERENCE
				    , T1.INVESTMENTREF
				    , T1.NUMBEROFTERMS
				    , T1.GRCPERIODENDDATE
				    , T1.ALLOWGRCPERIOD
				    , T1.GRACEBASERATE
				    , T1.GRACESPECIALRATE
				    , T1.GRCPFTRATE
				    , T1.GRCPFTFRQ
				    , T1.NEXTGRCPFTDATE
				    , T1.ALLOWGRCPFTRVW
				    , T1.GRCPFTRVWFRQ
				    , T1.NEXTGRCPFTRVWDATE
				    , T1.ALLOWGRCCPZ
				    , T1.GRCCPZFRQ
				    , T1.NEXTGRCCPZDATE
				    , T1.REPAYBASERATE
				    , T1.REPAYSPECIALRATE
				    , T1.REPAYPROFITRATE
				    , T1.REPAYFRQ
				    , T1.NEXTREPAYDATE
				    , T1.REPAYPFTFRQ
				    , T1.NEXTREPAYPFTDATE
				    , T1.ALLOWREPAYRVW
				    , T1.REPAYRVWFRQ
				    , T1.NEXTREPAYRVWDATE
				    , T1.ALLOWREPAYCPZ
				    , T1.REPAYCPZFRQ
				    , T1.NEXTREPAYCPZDATE
				    , T1.MATURITYDATE
				    , T1.CPZATGRACEEND
				    , T1.DOWNPAYMENT
				    , T1.GRACEFLATAMOUNT
				    , T1.REQREPAYAMOUNT
				    , T1.TOTALPROFIT
				    , T1.TOTALCPZ
				    , T1.TOTALGROSSPFT
				    , T1.TOTALGROSSGRCPFT
				    , T1.TOTALGRACEPFT
				    , T1.TOTALGRACECPZ
				    , T1.GRCRATEBASIS
				    , T1.REPAYRATEBASIS
				    , T1.FINTYPE
				    , T1.FINREMARKS
				    , T1.FINCCY
				    , T1.SCHEDULEMETHOD
				    , T1.PROFITDAYSBASIS
				    , T1.REQMATURITY
				    , T1.CALTERMS
				    , T1.CALMATURITY
				    , T1.FIRSTREPAY
				    , T1.LASTREPAY
				    , T1.FINSTARTDATE
				    , T1.FINAMOUNT
					, ((T1.FINAMOUNT + T1.FEECHARGEAMT) - T1.DOWNPAYMENT) LOVDESCFINANCINGAMOUNT
				    , T1.FINREPAYMENTAMOUNT
				    , T1.CUSTID
				    , T1.DEFFERMENTS
				    , T1.PLANDEFERCOUNT
				    , T1.FINBRANCH
				    , T1.FINSOURCEID
				    , T1.ALLOWEDDEFRPYCHANGE
				    , T1.AVAILEDDEFRPYCHANGE
				    , T1.ALLOWEDDEFFRQCHANGE
				    , T1.AVAILEDDEFFRQCHANGE
				    , T1.RECALTYPE
				    , T1.FINASSETVALUE
				    , T1.FINISACTIVE
				    , T1.LIMITVALID
				    , T1.OVERRIDELIMIT
				    , T1.VERSION
				    , T1.LASTMNTBY
				    , T1.LASTMNTON
				    , T1.RECORDSTATUS
				    , T1.ROLECODE
				    , T1.NEXTROLECODE
				    , T1.TASKID
				    , T1.NEXTTASKID
				    , T1.RECORDTYPE
				    , T1.WORKFLOWID
				    , T7.FINTYPEDESC LOVDESCFINTYPENAME
				    , T7.FINMAXAMOUNT LOVDESCFINMAXAMT
				    , T7.FINMINAMOUNT LOVDESCFINMINAMOUNT
				    , T1.MINDOWNPAYPERC
				    , T7.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT
				    , T7.FINISDWPAYREQUIRED LOVDESCDWNPAYREQ
				    , T7.FINMAXDIFFERMENT LOVDESCFINMAXDIFFERMENT
				    , T12.BRANCHDESC LOVDESCFINBRANCHNAME
				    , T12.BRANCHPROVINCE FINBRANCHPROVINCECODE
				    , T1.LASTREPAYDATE
				    , T1.LASTREPAYPFTDATE
				    , T1.LASTREPAYRVWDATE
				    , T1.LASTREPAYCPZDATE
				    , T1.ALLOWGRCREPAY
				    , T1.GRCSCHDMTHD
				    , T1.GRCMARGIN
				    , T1.REPAYMARGIN
				    , T1.FINCURRASSETVALUE
				    , T1.FINCOMMITMENTREF
				    , T1.FINLIMITREF
				    , T1.FINCONTRACTDATE
				    , T17.ACRTILLLBD LOVDESCACCRUEDTILLLBD
				    , T7.FINRVWRATEAPPLFOR
				    , T1.TOTALREPAYAMT
				    , T1.CLOSINGSTATUS
				    , T1.FINAPPROVEDDATE
				    , T1.FEECHARGEAMT
				    , T1.BLACKLISTED
				    , T1.FINREPAYPFTONFRQ
				    , T1.ANUALIZEDPERCRATE
				    , T1.EFFECTIVERATEOFRETURN
				    , T1.MIGRATEDFINANCE
				    , T1.SCHEDULEMAINTAINED
				    , T1.SCHEDULEREGENERATED
				    , T1.FINPURPOSE
				    , T39.LOANPURPOSEDESC LOVDESCFINPURPOSENAME
				    , T1.FINSTATUS
				    , T1.FINSTSREASON
				    , T1.INITIATEUSER
				    , T7.FINSCHEDULEON LOVDESCFINSCHEDULEON
				    , T1.CUSTDSR
				    , T1.JOINTACCOUNT
				    , T1.JOINTCUSTID
				    , T1.DOWNPAYBANK
				    , T1.DOWNPAYSUPL
				    , T1.SECURITYCOLLATERAL
				    , T1.APPROVED
				    , T1.DISCREPANCY
				    , T1.LIMITAPPROVED
				    , T1.GRACETERMS
				    , T7.FINDIVISION LOVDESCFINDIVISION
				    , T1.RCDMAINTAINSTS
				    , T1.FINREPAYMETHOD
				    , T1.GRCPROFITDAYSBASIS
				    , T1.STEPFINANCE
				    , T1.STEPTYPE
				    , T1.STEPPOLICY
				    , T1.ALWMANUALSTEPS
				    , T1.NOOFSTEPS
				    , T1.LINKEDFINREF
				    , T1.NEXTUSERID
				    , T1.PRIORITY
				    , T24.POLICYDESC LOVDESCSTEPPOLICYNAME
				    , T1.GRCMINRATE
				    , T1.GRCMAXRATE
				    , T1.RPYMINRATE
				    , T1.RPYMAXRATE
				    , T1.DEVIATIONAPPROVAL
				    , T1.MANUALSCHEDULE
				    , T1.CREDITINSAMT
				    , T27.CUSTSTSDESCRIPTION
				    , T1.INITIATEDATE
				    , T1.FINPREAPPROVEDREF
				    , T1.ACCOUNTSOFFICER
				    , T28.DEALERNAME LOVDESCACCOUNTSOFFICER
				    , T28.DEALERCITY LOVDESCSOURCECITY
				    , T1.DSACODE
				    , T30.ROFFICERDESC DSACODEDESC
				    , T1.TDSAPPLICABLE
				    , T1.MANDATEID
				    , T1.SECURITYMANDATEID
				    , T1.DROPLINEFRQ
				    , T1.FIRSTDROPLINEDATE
				    , T1.PFTSERVICINGODLIMIT
				    , T1.ALWBPI
				    , T1.BPITREATMENT
				    , T1.PLANEMIHALW
				    , T1.PLANEMIHMETHOD
				    , T1.PLANEMIHMAXPERYEAR
				    , T1.PLANEMIHMAX
				    , T1.PLANEMIHLOCKPERIOD
				    , T1.PLANEMICPZ
				    , T1.CALROUNDINGMODE
				    , T1.ALWMULTIDISB
				    , T1.APPLICATIONNO
				    , T1.REFERRALID
				    , T33.ROFFICERDESC REFERRALIDDESC
				    , T1.DMACODE
				    , T34.ROFFICERDESC DMACODEDESC
				    , T1.SALESDEPARTMENT
				    , T35.DEPTDESC SALESDEPARTMENTDESC
				    , T1.QUICKDISB
				    , T1.WIFREFERENCE
				    , T1.UNPLANEMIHLOCKPERIOD
				    , T1.UNPLANEMICPZ
				    , T1.REAGECPZ
				    , T1.MAXUNPLANNEDEMI
				    , T1.MAXREAGEHOLIDAYS
				    , T1.AVAILEDUNPLANEMI
				    , T1.AVAILEDREAGEH
				    , T1.BPIAMOUNT
				    , T1.DEDUCTFEEDISB
				    , T1.RVWRATEAPPLFOR
				    , T1.SCHCALONRVW
				    , T1.PASTDUEPFTCALMTHD
				    , T1.PASTDUEPFTMARGIN
				    , T1.DROPPINGMETHOD
				    , T1.RATECHGANYDAY
				    , T1.PROMOTIONCODE
				    , T1.RESTRUCTURELOAN
				    , T1.OLDFINREFERENCE
				    , T1.REAGEBUCKET
				    , T1.FINCATEGORY
				    , T1.PRODUCTCATEGORY
				    , T1.ROUNDINGTARGET
				    , T36.ENTITYCODE LOVDESCENTITYCODE
				    , T1.ELIGIBILITYMETHOD
				    , T38.FIELDCODEVALUE LOVELIGIBILITYMETHOD
				    , T38.VALUEDESC LOVDESCELIGIBILITYMETHOD
				    , T1.EMPLOYEENAME
				    , T37.ROFFICERDESC EMPLOYEENAMEDESC
				    , T1.SAMPLINGREQUIRED
				    , T1.LEGALREQUIRED
				    , T1.GRCMAXAMOUNT
				    , T1.CONNECTOR
				    , T40.DEALERNAME CONNECTORCODE
				    , T40.DEALERCITY CONNECTORDESC
				    , T1.ADVANCEEMI
				    , T1.ADVEMITERMS
				    , T1.BPIPFTDAYSBASIS
				    , T1.FIXEDRATETENOR
				    , T1.FIXEDTENORRATE
				    , T12.BRANCHTEL FINBRANCHCONTACT
				    , T1.PROCESSATTRIBUTES
				    , T1.BUSINESSVERTICAL
				    , BV.CODE BUSINESSVERTICALCODE
				    , BV.DESCRIPTION BUSINESSVERTICALDESC
				    , T1.GRCADVTYPE
				    , T1.GRCADVTERMS
				    , T1.ADVTYPE
				    , T1.ADVTERMS
				    , T1.ADVSTAGE
				    , T1.TDSPERCENTAGE
				    , T1.TDSSTARTDATE
				    , T1.TDSENDDATE
				    , T1.TDSLIMITAMT
				    , T1.VANREQ
				    , T1.VANCODE
				    , T1.ALLOWDRAWINGPOWER
				    , T1.ALLOWREVOLVING
				    , T1.SANBSDSCHDLE
				    , T1.PROMOTIONSEQID
				    , T1.SVAMOUNT
				    , T1.CBAMOUNT
				    , T1.APPLIEDLOANAMT
				    , T1.FINISRATERVWATGRCEND
					, T1.REQLOANAMT
					, T1.REQLOANTENOR
					, T1.FINOCRREQUIRED
					, T1.OFFERPRODUCT
					, T1.OFFERAMOUNT
					, T1.CUSTSEGMENTATION
					, T1.BASEPRODUCT
					, T1.PROCESSTYPE
					, T1.BUREAUTIMESERIES
					, T1.CAMPAIGNNAME
					, T1.EXISTINGLANREFNO
					, T1.LEADSOURCE
					, T1.POSOURCE
					, T1.RSA
					, T1.VERIFICATION
					, T1.SOURCINGBRANCH
					, T1.SOURCHANNELCATEGORY
					, T1.ASMNAME
					, T13.BRANCHDESC LOVDESCSOURCINGBRANCH
					, T1.OFFERID
					, T1.ALWGRCADJ
					, T1.ENDGRCPERIODAFTRFULLDISB
					, T1.AUTOINCGRCENDDATE
					, T1.PMAY
					, T1.ALWLOANSPLIT
					, T1.PARENTREF
					, T1.LOANSPLITTED
					, T1.INSTBASEDSCHD
					, T1.PLANEMIHALWINGRACE
					, T1.ALLOWSUBVENTION
					, T1.TDSTYPE
					, T1.WRITEOFFLOAN
					, T1.RESTRUCTURE
					, T1.CALCOFSTEPS
					, T1.STEPSAPPLIEDFOR
					, T1.NOOFGRCSTEPS
					, T1.SCHDVERSION
					, T1.SUBVENTIONFROM
					, T1.MANUFACTURERDEALERID
					, T41.DEALERNAME MANUFACTURERDEALERNAME
					, T41.CODE MANUFACTURERDEALERCODE
					, T1.ESCROW
					, T1.CUSTBANKID
					, CB.ACCOUNTNUMBER CUSTACCTNUMBER
					, CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME
					, T1.MANUALSCHDTYPE
					, T1.ISRA
					, T1.SANCTIONEDDATE
					, T1.OVERDRAFTTXNCHRGREQ
					, T1.OVERDRAFTCALCCHRG
					, T1.OVERDRAFTCHRGAMTORPERC
					, T1.OVERDRAFTCHRCALON
					, T1.UNDERSETTLEMENT
					, T1.UNDERNPA
					, T1.CREATEDBY
					, T1.CREATEDON
					, T1.APPROVEDBY
					, T1.APPROVEDON
				FROM FINANCEMAIN_TEMP T1
				JOIN RMTFINANCETYPES T7 ON T1.FINTYPE  = T7.FINTYPE 
				LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH  = T12.BRANCHCODE 
				LEFT JOIN RMTBRANCHES T13 ON T1.SOURCINGBRANCH = T13.BRANCHCODE
				LEFT JOIN FINPFTDETAILS T17 ON T17.FINID  = T1.FINID 
				LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY  = T24.POLICYCODE 
				LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS  = T27.CUSTSTSCODE 
				LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
				LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE  = T30.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID  = T33.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE  = T34.ROFFICERCODE 
				LEFT JOIN BMTDEPARTMENTS T35 ON T1.SALESDEPARTMENT  = T35.DEPTCODE 
				LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION  = T36.DIVISIONCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME  = T37.ROFFICERCODE 
				LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE  = 'ELGMETHOD' 
				LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE  = T39.LOANPURPOSECODE 
				LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
				LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
				LEFT JOIN AMTVEHICLEDEALER T41 ON T1.MANUFACTURERDEALERID = T41.DEALERID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				UNION ALL
				SELECT T1.FINID
					, T1.FINREFERENCE
				    , T1.INVESTMENTREF
				    , T1.NUMBEROFTERMS
				    , T1.GRCPERIODENDDATE
				    , T1.ALLOWGRCPERIOD
				    , T1.GRACEBASERATE
				    , T1.GRACESPECIALRATE
				    , T1.GRCPFTRATE
				    , T1.GRCPFTFRQ
				    , T1.NEXTGRCPFTDATE
				    , T1.ALLOWGRCPFTRVW
				    , T1.GRCPFTRVWFRQ
				    , T1.NEXTGRCPFTRVWDATE
				    , T1.ALLOWGRCCPZ
				    , T1.GRCCPZFRQ
				    , T1.NEXTGRCCPZDATE
				    , T1.REPAYBASERATE
				    , T1.REPAYSPECIALRATE
				    , T1.REPAYPROFITRATE
				    , T1.REPAYFRQ
				    , T1.NEXTREPAYDATE
				    , T1.REPAYPFTFRQ
				    , T1.NEXTREPAYPFTDATE
				    , T1.ALLOWREPAYRVW
				    , T1.REPAYRVWFRQ
				    , T1.NEXTREPAYRVWDATE
				    , T1.ALLOWREPAYCPZ
				    , T1.REPAYCPZFRQ
				    , T1.NEXTREPAYCPZDATE
				    , T1.MATURITYDATE
				    , T1.CPZATGRACEEND
				    , T1.DOWNPAYMENT
				    , T1.GRACEFLATAMOUNT
				    , T1.REQREPAYAMOUNT
				    , T1.TOTALPROFIT
				    , T1.TOTALCPZ
				    , T1.TOTALGROSSPFT
				    , T1.TOTALGROSSGRCPFT
				    , T1.TOTALGRACEPFT
				    , T1.TOTALGRACECPZ
				    , T1.GRCRATEBASIS
				    , T1.REPAYRATEBASIS
				    , T1.FINTYPE
				    , T1.FINREMARKS
				    , T1.FINCCY
				    , T1.SCHEDULEMETHOD
				    , T1.PROFITDAYSBASIS
				    , T1.REQMATURITY
				    , T1.CALTERMS
				    , T1.CALMATURITY
				    , T1.FIRSTREPAY
				    , T1.LASTREPAY
				    , T1.FINSTARTDATE
				    , T1.FINAMOUNT
					, ((T1.FINAMOUNT + T1.FEECHARGEAMT) - T1.DOWNPAYMENT) LOVDESCFINANCINGAMOUNT
				    , T1.FINREPAYMENTAMOUNT
				    , T1.CUSTID
				    , T1.DEFFERMENTS
				    , T1.PLANDEFERCOUNT
				    , T1.FINBRANCH
				    , T1.FINSOURCEID
				    , T1.ALLOWEDDEFRPYCHANGE
				    , T1.AVAILEDDEFRPYCHANGE
				    , T1.ALLOWEDDEFFRQCHANGE
				    , T1.AVAILEDDEFFRQCHANGE
				    , T1.RECALTYPE
				    , T1.FINASSETVALUE
				    , T1.FINISACTIVE
				    , T1.LIMITVALID
				    , T1.OVERRIDELIMIT
				    , T1.VERSION
				    , T1.LASTMNTBY
				    , T1.LASTMNTON
				    , T1.RECORDSTATUS
				    , T1.ROLECODE
				    , T1.NEXTROLECODE
				    , T1.TASKID
				    , T1.NEXTTASKID
				    , T1.RECORDTYPE
				    , T1.WORKFLOWID
				    , T7.FINTYPEDESC LOVDESCFINTYPENAME
				    , T7.FINMAXAMOUNT LOVDESCFINMAXAMT
				    , T7.FINMINAMOUNT LOVDESCFINMINAMOUNT
				    , T1.MINDOWNPAYPERC
				    , T7.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT
				    , T7.FINISDWPAYREQUIRED LOVDESCDWNPAYREQ
				    , T7.FINMAXDIFFERMENT LOVDESCFINMAXDIFFERMENT
				    , T12.BRANCHDESC LOVDESCFINBRANCHNAME
				    , T12.BRANCHPROVINCE FINBRANCHPROVINCECODE
				    , T1.LASTREPAYDATE
				    , T1.LASTREPAYPFTDATE
				    , T1.LASTREPAYRVWDATE
				    , T1.LASTREPAYCPZDATE
				    , T1.ALLOWGRCREPAY
				    , T1.GRCSCHDMTHD
				    , T1.GRCMARGIN
				    , T1.REPAYMARGIN
				    , T1.FINCURRASSETVALUE
				    , T1.FINCOMMITMENTREF
				    , T1.FINLIMITREF
				    , T1.FINCONTRACTDATE
				    , T17.ACRTILLLBD LOVDESCACCRUEDTILLLBD
				    , T7.FINRVWRATEAPPLFOR
				    , T1.TOTALREPAYAMT
				    , T1.CLOSINGSTATUS
				    , T1.FINAPPROVEDDATE
				    , T1.FEECHARGEAMT
				    , T1.BLACKLISTED
				    , T1.FINREPAYPFTONFRQ
				    , T1.ANUALIZEDPERCRATE
				    , T1.EFFECTIVERATEOFRETURN
				    , T1.MIGRATEDFINANCE
				    , T1.SCHEDULEMAINTAINED
				    , T1.SCHEDULEREGENERATED
				    , T1.FINPURPOSE
				    , T39.LOANPURPOSEDESC LOVDESCFINPURPOSENAME
				    , T1.FINSTATUS
				    , T1.FINSTSREASON
				    , T1.INITIATEUSER
				    , T7.FINSCHEDULEON LOVDESCFINSCHEDULEON
				    , T1.CUSTDSR
				    , T1.JOINTACCOUNT
				    , T1.JOINTCUSTID
				    , T1.DOWNPAYBANK
				    , T1.DOWNPAYSUPL
				    , T1.SECURITYCOLLATERAL
				    , T1.APPROVED
				    , T1.DISCREPANCY
				    , T1.LIMITAPPROVED
				    , T1.GRACETERMS
				    , T7.FINDIVISION LOVDESCFINDIVISION
				    , T1.RCDMAINTAINSTS
				    , T1.FINREPAYMETHOD
				    , T1.GRCPROFITDAYSBASIS
				    , T1.STEPFINANCE
				    , T1.STEPTYPE
				    , T1.STEPPOLICY
				    , T1.ALWMANUALSTEPS
				    , T1.NOOFSTEPS
				    , T1.LINKEDFINREF
				    , T1.NEXTUSERID
				    , T1.PRIORITY
				    , T24.POLICYDESC LOVDESCSTEPPOLICYNAME
				    , T1.GRCMINRATE
				    , T1.GRCMAXRATE
				    , T1.RPYMINRATE
				    , T1.RPYMAXRATE
				    , T1.DEVIATIONAPPROVAL
				    , T1.MANUALSCHEDULE
				    , T1.CREDITINSAMT
				    , T27.CUSTSTSDESCRIPTION
				    , T1.INITIATEDATE
				    , T1.FINPREAPPROVEDREF
				    , T1.ACCOUNTSOFFICER
				    , T28.DEALERNAME LOVDESCACCOUNTSOFFICER
				    , T28.DEALERCITY LOVDESCSOURCECITY
				    , T1.DSACODE
				    , T30.ROFFICERDESC DSACODEDESC
				    , T1.TDSAPPLICABLE
				    , T1.MANDATEID
				    , T1.SECURITYMANDATEID
				    , T1.DROPLINEFRQ
				    , T1.FIRSTDROPLINEDATE
				    , T1.PFTSERVICINGODLIMIT
				    , T1.ALWBPI
				    , T1.BPITREATMENT
				    , T1.PLANEMIHALW
				    , T1.PLANEMIHMETHOD
				    , T1.PLANEMIHMAXPERYEAR
				    , T1.PLANEMIHMAX
				    , T1.PLANEMIHLOCKPERIOD
				    , T1.PLANEMICPZ
				    , T1.CALROUNDINGMODE
				    , T1.ALWMULTIDISB
				    , T1.APPLICATIONNO
				    , T1.REFERRALID
				    , T33.ROFFICERDESC REFERRALIDDESC
				    , T1.DMACODE
				    , T34.ROFFICERDESC DMACODEDESC
				    , T1.SALESDEPARTMENT
				    , T35.DEPTDESC SALESDEPARTMENTDESC
				    , T1.QUICKDISB
				    , T1.WIFREFERENCE
				    , T1.UNPLANEMIHLOCKPERIOD
				    , T1.UNPLANEMICPZ
				    , T1.REAGECPZ
				    , T1.MAXUNPLANNEDEMI
				    , T1.MAXREAGEHOLIDAYS
				    , T1.AVAILEDUNPLANEMI
				    , T1.AVAILEDREAGEH
				    , T1.BPIAMOUNT
				    , T1.DEDUCTFEEDISB
				    , T1.RVWRATEAPPLFOR
				    , T1.SCHCALONRVW
				    , T1.PASTDUEPFTCALMTHD
				    , T1.PASTDUEPFTMARGIN
				    , T1.DROPPINGMETHOD
				    , T1.RATECHGANYDAY
				    , T1.PROMOTIONCODE
				    , T1.RESTRUCTURELOAN
				    , T1.OLDFINREFERENCE
				    , T1.REAGEBUCKET
				    , T1.FINCATEGORY
				    , T1.PRODUCTCATEGORY
				    , T1.ROUNDINGTARGET
				    , T36.ENTITYCODE LOVDESCENTITYCODE
				    , T1.ELIGIBILITYMETHOD
				    , T38.FIELDCODEVALUE LOVELIGIBILITYMETHOD
				    , T38.VALUEDESC LOVDESCELIGIBILITYMETHOD
				    , T1.EMPLOYEENAME
				    , T37.ROFFICERDESC EMPLOYEENAMEDESC
				    , T1.SAMPLINGREQUIRED
				    , T1.LEGALREQUIRED
				    , T1.GRCMAXAMOUNT
				    , T1.CONNECTOR
				    , T40.DEALERNAME CONNECTORCODE
				    , T40.DEALERCITY CONNECTORDESC
				    , T1.ADVANCEEMI
				    , T1.ADVEMITERMS
				    , T1.BPIPFTDAYSBASIS
				    , T1.FIXEDRATETENOR
				    , T1.FIXEDTENORRATE
				    , T12.BRANCHTEL FINBRANCHCONTACT
				    , T1.PROCESSATTRIBUTES
				    , T1.BUSINESSVERTICAL
				    , BV.CODE BUSINESSVERTICALCODE
				    , BV.DESCRIPTION BUSINESSVERTICALDESC
				    , T1.GRCADVTYPE
				    , T1.GRCADVTERMS
				    , T1.ADVTYPE
				    , T1.ADVTERMS
				    , T1.ADVSTAGE
				    , T1.TDSPERCENTAGE
				    , T1.TDSSTARTDATE
				    , T1.TDSENDDATE
				    , T1.TDSLIMITAMT
				    , T1.VANREQ
				    , T1.VANCODE
				    , T1.ALLOWDRAWINGPOWER
				    , T1.ALLOWREVOLVING
				    , T1.SANBSDSCHDLE
				    , T1.PROMOTIONSEQID
				    , T1.SVAMOUNT
				    , T1.CBAMOUNT
				    , T1.APPLIEDLOANAMT
				    , T1.FINISRATERVWATGRCEND
					, T1.REQLOANAMT
					, T1.REQLOANTENOR
					, T1.FINOCRREQUIRED
					, T1.OFFERPRODUCT
					, T1.OFFERAMOUNT
					, T1.CUSTSEGMENTATION
					, T1.BASEPRODUCT
					, T1.PROCESSTYPE
					, T1.BUREAUTIMESERIES
					, T1.CAMPAIGNNAME
					, T1.EXISTINGLANREFNO
					, T1.LEADSOURCE
					, T1.POSOURCE
					, T1.RSA
					, T1.VERIFICATION
					, T1.SOURCINGBRANCH
					, T1.SOURCHANNELCATEGORY
					, T1.ASMNAME
					, T13.BRANCHDESC LOVDESCSOURCINGBRANCH
					, T1.OFFERID
					, T1.ALWGRCADJ
					, T1.ENDGRCPERIODAFTRFULLDISB
					, T1.AUTOINCGRCENDDATE
					, T1.PMAY
					, T1.ALWLOANSPLIT
					, T1.PARENTREF
					, T1.LOANSPLITTED
					, T1.INSTBASEDSCHD
					, T1.PLANEMIHALWINGRACE
					, T1.ALLOWSUBVENTION
					, T1.TDSTYPE
					, T1.WRITEOFFLOAN
					, T1.RESTRUCTURE
					, T1.CALCOFSTEPS
					, T1.STEPSAPPLIEDFOR
					, T1.NOOFGRCSTEPS
					, T1.SCHDVERSION
					, T1.SUBVENTIONFROM
					, T1.MANUFACTURERDEALERID
					, T41.DEALERNAME MANUFACTURERDEALERNAME
					, T41.CODE MANUFACTURERDEALERCODE
					, T1.ESCROW
					, T1.CUSTBANKID
					, CB.ACCOUNTNUMBER CUSTACCTNUMBER
					, CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME
					, T1.MANUALSCHDTYPE
					, T1.ISRA
					, T1.SANCTIONEDDATE
					, T1.OVERDRAFTTXNCHRGREQ
					, T1.OVERDRAFTCALCCHRG
					, T1.OVERDRAFTCHRGAMTORPERC
					, T1.OVERDRAFTCHRCALON
					, T1.UNDERSETTLEMENT
					, T1.UNDERNPA
					, T1.CREATEDBY
					, T1.CREATEDON
					, T1.APPROVEDBY
					, T1.APPROVEDON
				FROM FINANCEMAIN T1
				JOIN RMTFINANCETYPES T7 ON T1.FINTYPE  = T7.FINTYPE 
				LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH  = T12.BRANCHCODE 
				LEFT JOIN RMTBRANCHES T13 ON T1.SOURCINGBRANCH = T13.BRANCHCODE
				LEFT JOIN FINPFTDETAILS T17 ON T17.FINID  = T1.FINID 
				LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY  = T24.POLICYCODE 
				LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS  = T27.CUSTSTSCODE 
				LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
				LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE  = T30.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID  = T33.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE  = T34.ROFFICERCODE 
				LEFT JOIN BMTDEPARTMENTS T35 ON T1.SALESDEPARTMENT  = T35.DEPTCODE 
				LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION  = T36.DIVISIONCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME  = T37.ROFFICERCODE 
				LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE  = 'ELGMETHOD' 
				LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE  = T39.LOANPURPOSECODE 
				LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
				LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
				LEFT JOIN AMTVEHICLEDEALER T41 ON T1.MANUFACTURERDEALERID = T41.DEALERID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
				WHERE NOT EXISTS (SELECT 1 FROM FINANCEMAIN_TEMP WHERE FINANCEMAIN_TEMP.FINID = T1.FINID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#4875.2000_post" author="Poojitha.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_view');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#4875.2001_pre" author="Poojitha.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemain_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#4875.2001" author="Poojitha.M">
		<createView viewName="FINANCEMAIN_TVIEW" replaceIfExists="true">
		    <![CDATA[
				SELECT T1.FINID
					, T1.FINREFERENCE
					, T1.INVESTMENTREF
					, T1.NUMBEROFTERMS
					, T1.GRCPERIODENDDATE
					, T1.ALLOWGRCPERIOD
					, T1.GRACEBASERATE
					, T1.GRACESPECIALRATE
					, T1.GRCPFTRATE
					, T1.GRCPFTFRQ
					, T1.NEXTGRCPFTDATE
					, T1.ALLOWGRCPFTRVW
					, T1.GRCPFTRVWFRQ
					, T1.NEXTGRCPFTRVWDATE
					, T1.ALLOWGRCCPZ
					, T1.GRCCPZFRQ
					, T1.NEXTGRCCPZDATE
					, T1.REPAYBASERATE
					, T1.REPAYSPECIALRATE
					, T1.REPAYPROFITRATE
					, T1.REPAYFRQ
					, T1.NEXTREPAYDATE
					, T1.REPAYPFTFRQ
					, T1.NEXTREPAYPFTDATE
					, T1.ALLOWREPAYRVW
					, T1.REPAYRVWFRQ
					, T1.NEXTREPAYRVWDATE
					, T1.ALLOWREPAYCPZ
					, T1.REPAYCPZFRQ
					, T1.NEXTREPAYCPZDATE
					, T1.MATURITYDATE
					, T1.CPZATGRACEEND
					, T1.DOWNPAYMENT
					, T1.GRACEFLATAMOUNT
					, T1.REQREPAYAMOUNT
					, T1.TOTALPROFIT
					, T1.TOTALCPZ
					, T1.TOTALGROSSPFT
					, T1.TOTALGROSSGRCPFT
					, T1.TOTALGRACEPFT
					, T1.TOTALGRACECPZ
					, T1.GRCRATEBASIS
					, T1.REPAYRATEBASIS
					, T1.FINTYPE
					, T1.FINREMARKS
					, T1.FINCCY
					, T1.SCHEDULEMETHOD
					, T1.PROFITDAYSBASIS
					, T1.REQMATURITY
					, T1.CALTERMS
					, T1.CALMATURITY
					, T1.FIRSTREPAY
					, T1.LASTREPAY
					, T1.FINSTARTDATE
					, T1.FINAMOUNT
					, T1.FINAMOUNT + T1.FEECHARGEAMT - T1.DOWNPAYMENT LOVDESCFINANCINGAMOUNT
					, T1.FINREPAYMENTAMOUNT
					, T1.CUSTID
					, T1.DEFFERMENTS
					, T1.PLANDEFERCOUNT
					, T1.FINBRANCH
					, T1.FINSOURCEID
					, T1.ALLOWEDDEFRPYCHANGE
					, T1.AVAILEDDEFRPYCHANGE
					, T1.ALLOWEDDEFFRQCHANGE
					, T1.AVAILEDDEFFRQCHANGE
					, T1.RECALTYPE
					, T1.FINASSETVALUE
					, T1.FINISACTIVE
					, T1.LIMITVALID
					, T1.OVERRIDELIMIT
					, T1.VERSION
					, T1.LASTMNTBY
					, T1.LASTMNTON
					, T1.RECORDSTATUS
					, T1.ROLECODE
					, T1.NEXTROLECODE
					, T1.TASKID
					, T1.NEXTTASKID
					, T1.RECORDTYPE
					, T1.WORKFLOWID
					, T7.FINTYPEDESC LOVDESCFINTYPENAME
					, T7.FINMAXAMOUNT LOVDESCFINMAXAMT
					, T7.FINMINAMOUNT LOVDESCFINMINAMOUNT
					, T1.MINDOWNPAYPERC
					, T7.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT
					, T7.FINISDWPAYREQUIRED LOVDESCDWNPAYREQ
					, T7.FINMAXDIFFERMENT LOVDESCFINMAXDIFFERMENT
					, T12.BRANCHDESC LOVDESCFINBRANCHNAME
					, T12.BRANCHPROVINCE FINBRANCHPROVINCECODE
					, T1.LASTREPAYDATE
					, T1.LASTREPAYPFTDATE
					, T1.LASTREPAYRVWDATE
					, T1.LASTREPAYCPZDATE
					, T1.ALLOWGRCREPAY
					, T1.GRCSCHDMTHD
					, T1.GRCMARGIN
					, T1.REPAYMARGIN
					, T1.FINCURRASSETVALUE
					, T1.FINCOMMITMENTREF
					, T1.FINLIMITREF
					, T1.FINCONTRACTDATE
					, T17.ACRTILLLBD LOVDESCACCRUEDTILLLBD
					, T7.FINRVWRATEAPPLFOR
					, T1.TOTALREPAYAMT
					, T1.CLOSINGSTATUS
					, T1.FINAPPROVEDDATE
					, T1.FEECHARGEAMT
					, T1.BLACKLISTED
					, T1.FINREPAYPFTONFRQ
					, T1.ANUALIZEDPERCRATE
					, T1.EFFECTIVERATEOFRETURN
					, T1.MIGRATEDFINANCE
					, T1.SCHEDULEMAINTAINED
					, T1.SCHEDULEREGENERATED
					, T1.FINPURPOSE
					, T39.LOANPURPOSEDESC LOVDESCFINPURPOSENAME
					, T1.FINSTATUS
					, T1.FINSTSREASON
					, T1.INITIATEUSER
					, T7.FINSCHEDULEON LOVDESCFINSCHEDULEON
					, T1.CUSTDSR
					, T1.JOINTACCOUNT
					, T1.JOINTCUSTID
					, T1.DOWNPAYBANK
					, T1.DOWNPAYSUPL
					, T1.SECURITYCOLLATERAL
					, T1.APPROVED
					, T1.DISCREPANCY
					, T1.LIMITAPPROVED
					, T1.GRACETERMS
					, T7.FINDIVISION LOVDESCFINDIVISION
					, T1.RCDMAINTAINSTS
					, T1.FINREPAYMETHOD
					, T1.GRCPROFITDAYSBASIS
					, T1.STEPFINANCE
					, T1.STEPTYPE
					, T1.STEPPOLICY
					, T1.ALWMANUALSTEPS
					, T1.NOOFSTEPS
					, T1.LINKEDFINREF
					, T1.NEXTUSERID
					, T1.PRIORITY
					, T24.POLICYDESC LOVDESCSTEPPOLICYNAME
					, T1.GRCMINRATE
					, T1.GRCMAXRATE
					, T1.RPYMINRATE
					, T1.RPYMAXRATE
					, T1.DEVIATIONAPPROVAL
					, T1.MANUALSCHEDULE
					, T1.CREDITINSAMT
					, T27.CUSTSTSDESCRIPTION
					, T1.INITIATEDATE
					, T1.FINPREAPPROVEDREF
					, T1.ACCOUNTSOFFICER
					, T28.DEALERNAME LOVDESCACCOUNTSOFFICER
					, T28.DEALERCITY LOVDESCSOURCECITY
					, T1.DSACODE
					, T30.ROFFICERDESC DSACODEDESC
					, T1.TDSAPPLICABLE
					, T1.MANDATEID
					, T1.SECURITYMANDATEID
					, T1.DROPLINEFRQ
					, T1.FIRSTDROPLINEDATE
					, T1.PFTSERVICINGODLIMIT
					, T1.ALWBPI
					, T1.BPITREATMENT
					, T1.PLANEMIHALW
					, T1.PLANEMIHMETHOD
					, T1.PLANEMIHMAXPERYEAR
					, T1.PLANEMIHMAX
					, T1.PLANEMIHLOCKPERIOD
					, T1.PLANEMICPZ
					, T1.CALROUNDINGMODE
					, T1.ALWMULTIDISB
					, T1.APPLICATIONNO
					, T1.REFERRALID
					, T33.ROFFICERDESC REFERRALIDDESC
					, T1.DMACODE
					, T34.ROFFICERDESC DMACODEDESC
					, T1.SALESDEPARTMENT
					, T35.DEPTDESC SALESDEPARTMENTDESC
					, T1.QUICKDISB
					, T1.WIFREFERENCE
					, T1.UNPLANEMIHLOCKPERIOD
					, T1.UNPLANEMICPZ
					, T1.REAGECPZ
					, T1.MAXUNPLANNEDEMI
					, T1.MAXREAGEHOLIDAYS
					, T1.AVAILEDUNPLANEMI
					, T1.AVAILEDREAGEH
					, T1.BPIAMOUNT
					, T1.DEDUCTFEEDISB
					, T1.RVWRATEAPPLFOR
					, T1.SCHCALONRVW
					, T1.PASTDUEPFTCALMTHD
					, T1.PASTDUEPFTMARGIN
					, T1.DROPPINGMETHOD
					, T1.RATECHGANYDAY
					, T1.PROMOTIONCODE
					, T1.RESTRUCTURELOAN
					, T1.OLDFINREFERENCE
					, T1.REAGEBUCKET
					, T1.FINCATEGORY
					, T1.PRODUCTCATEGORY
					, T1.ROUNDINGTARGET
					, T36.ENTITYCODE LOVDESCENTITYCODE
					, T1.ELIGIBILITYMETHOD
					, T38.FIELDCODEVALUE LOVELIGIBILITYMETHOD
					, T38.VALUEDESC LOVDESCELIGIBILITYMETHOD
					, T1.EMPLOYEENAME
					, T37.ROFFICERDESC EMPLOYEENAMEDESC
					, T1.SAMPLINGREQUIRED
					, T1.LEGALREQUIRED
					, T1.GRCMAXAMOUNT
					, T1.CONNECTOR
					, T40.DEALERNAME CONNECTORCODE
					, T40.DEALERCITY CONNECTORDESC
					, T1.ADVANCEEMI
					, T1.ADVEMITERMS
					, T1.BPIPFTDAYSBASIS
					, T1.FIXEDRATETENOR
					, T1.FIXEDTENORRATE
					, T12.BRANCHTEL FINBRANCHCONTACT
					, T1.PROCESSATTRIBUTES
					, T1.BUSINESSVERTICAL
					, BV.CODE BUSINESSVERTICALCODE
					, BV.DESCRIPTION BUSINESSVERTICALDESC
					, T1.GRCADVTYPE
					, T1.GRCADVTERMS
					, T1.ADVTYPE
					, T1.ADVTERMS
					, T1.ADVSTAGE
					, T1.TDSPERCENTAGE
					, T1.TDSSTARTDATE
					, T1.TDSENDDATE
					, T1.TDSLIMITAMT
					, T1.VANREQ
					, T1.VANCODE
					, T1.ALLOWDRAWINGPOWER
					, T1.ALLOWREVOLVING
					, T1.SANBSDSCHDLE
					, T1.PROMOTIONSEQID
					, T1.SVAMOUNT
					, T1.CBAMOUNT
					, T1.APPLIEDLOANAMT
					, T1.FINISRATERVWATGRCEND
					, T1.REQLOANAMT
					, T1.REQLOANTENOR
					, T1.FINOCRREQUIRED
					, T1.OFFERPRODUCT
					, T1.OFFERAMOUNT
					, T1.CUSTSEGMENTATION
					, T1.BASEPRODUCT
					, T1.PROCESSTYPE
					, T1.BUREAUTIMESERIES
					, T1.CAMPAIGNNAME
					, T1.EXISTINGLANREFNO
					, T1.LEADSOURCE
					, T1.POSOURCE
					, T1.RSA
					, T1.VERIFICATION
					, T1.SOURCINGBRANCH
					, T1.SOURCHANNELCATEGORY
					, T1.ASMNAME
					, T13.BRANCHDESC LOVDESCSOURCINGBRANCH
					, T1.OFFERID
					, T1.ENDGRCPERIODAFTRFULLDISB
					, T1.AUTOINCGRCENDDATE
					, T1.ALWGRCADJ
					, T1.PMAY
					, T1.ALWLOANSPLIT
					, T1.PARENTREF
					, T1.LOANSPLITTED
					, T1.INSTBASEDSCHD
					, T1.PLANEMIHALWINGRACE
					, T1.ALLOWSUBVENTION
					, T1.TDSTYPE
					, T1.WRITEOFFLOAN
					, T1.RESTRUCTURE
					, T1.CALCOFSTEPS
					, T1.STEPSAPPLIEDFOR
					, T1.NOOFGRCSTEPS
					, T1.SCHDVERSION
					, T1.SUBVENTIONFROM
					, T1.MANUFACTURERDEALERID
					, T41.DEALERNAME MANUFACTURERDEALERNAME
					, T41.CODE MANUFACTURERDEALERCODE
					, T1.ESCROW
					, T1.CUSTBANKID
					, CB.ACCOUNTNUMBER CUSTACCTNUMBER
					, CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME
					, T1.MANUALSCHDTYPE
					, T1.ISRA
					, T1.SANCTIONEDDATE
					, T1.OVERDRAFTTXNCHRGREQ
					, T1.OVERDRAFTCALCCHRG
					, T1.OVERDRAFTCHRGAMTORPERC
					, T1.OVERDRAFTCHRCALON
					, T1.UNDERSETTLEMENT
					, T1.UNDERNPA
					, T1.CREATEDBY
					, T1.CREATEDON
					, T1.APPROVEDBY
					, T1.APPROVEDON
				FROM FINANCEMAIN_TEMP T1
				JOIN RMTFINANCETYPES T7 ON T1.FINTYPE  = T7.FINTYPE 
				LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH  = T12.BRANCHCODE 
				LEFT JOIN RMTBRANCHES T13 ON T1.SOURCINGBRANCH = T13.BRANCHCODE
				LEFT JOIN FINPFTDETAILS T17 ON T17.FINID  = T1.FINID 
				LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY  = T24.POLICYCODE 
				LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS  = T27.CUSTSTSCODE 
				LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
				LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE  = T30.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID  = T33.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE  = T34.ROFFICERCODE 
				LEFT JOIN BMTDEPARTMENTS T35 ON T1.SALESDEPARTMENT  = T35.DEPTCODE 
				LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION  = T36.DIVISIONCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME  = T37.ROFFICERCODE 
				LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE  = 'ELGMETHOD' 
				LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE  = T39.LOANPURPOSECODE 
				LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
				LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
				LEFT JOIN AMTVEHICLEDEALER T41 ON T1.MANUFACTURERDEALERID = T41.DEALERID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#4875.2001_post" author="Poojitha.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_tview');
			]]>
		</sql>
	</changeSet>


	<changeSet id="ST#4875.2002_pre" author="Poojitha.m" dbms="postgresql">
		<sql> 
			<![CDATA[ 
				select deps_save_and_drop_dependencies ('plf', 'financemain_lview'); 
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#4875.2002" author="Poojitha.m">
		<createView viewName="FINANCEMAIN_LVIEW" replaceIfExists="true">
			<![CDATA[
		 		SELECT T1.FINID
		 			, T1.FINREFERENCE
					, T1.INVESTMENTREF
					, T1.FINTYPE
					, T1.FINCCY
					, T1.FINAMOUNT
					, T1.DOWNPAYMENT
					, T1.FEECHARGEAMT
					, T1.SCHEDULEMETHOD
					, T1.NUMBEROFTERMS
					, T1.RECORDSTATUS
					, T1.RECORDTYPE
					, T1.ROLECODE
					, T1.NEXTROLECODE
					, T1.FINBRANCH
					, T1.FINCONTRACTDATE
					, T1.LINKEDFINREF
					, T1.NEXTUSERID
					, T1.PRIORITY
					, T1.WORKFLOWID
					, T1.TASKID
					, T1.NEXTTASKID
					, T1.FINPREAPPROVEDREF
					, T1.RCDMAINTAINSTS
					, T1.FINCURRASSETVALUE
					, T1.CALTERMS
					, T1.DEVIATIONAPPROVAL
					, T1.FINPURPOSE
					, T1.INITIATEDATE
					, T1.FINASSETVALUE
					, T2.CUSTCIF LOVDESCCUSTCIF
					, T2.CUSTSHRTNAME LOVDESCCUSTSHRTNAME
					, T2.CUSTPASSPORTNO LOVDESCCUSTPASSPORTNO
					, T2.CUSTDOB LOVDESCCUSTDOB
					, T2.CUSTCRCPR LOVDESCCUSTCRCPR
					, T2.PHONENUMBER
					, T3.FINCATEGORY LOVDESCPRODUCTCODENAME
					, T3.FINDIVISION LOVDESCFINDIVISION
					, T3.PRODUCT LOVDESCFINPRODUCT
					, T3.FINTYPEDESC LOVDESCFINTYPENAME
					, COALESCE(T4.ROLEDESC, ${add.schema}FN_GET_ROLEDESC(T1.NEXTROLECODE)) LOVDESCREQUESTSTAGE
					, T1.SAMPLINGREQUIRED
					, T1.ADVANCEEMI
					, T1.ADVEMITERMS
					, T1.BPIPFTDAYSBASIS
					, T1.GRACETERMS
					, T1.PRODUCTCATEGORY
					, T1.REQLOANAMT
					, T1.REQLOANTENOR
					, T1.FINOCRREQUIRED
					, T1.OFFERPRODUCT
					, T1.OFFERAMOUNT
					, T1.CUSTSEGMENTATION
					, T1.BASEPRODUCT
					, T1.PROCESSTYPE
					, T1.BUREAUTIMESERIES
					, T1.CAMPAIGNNAME
					, T1.EXISTINGLANREFNO
					, T1.LEADSOURCE
					, T1.POSOURCE
					, T1.RSA
					, T1.VERIFICATION
					, T1.SOURCINGBRANCH
					, T1.SOURCHANNELCATEGORY
					, T1.ASMNAME
					, T1.OFFERID
					, T1.APPLICATIONNO
					, T1.LASTMNTON
					, T1.VERSION
					, T1.TDSAPPLICABLE
					, T2.CUSTID
					, T1.INSTBASEDSCHD
					, T1.ALLOWSUBVENTION
					, T1.TDSTYPE
					, T1.WRITEOFFLOAN
					, T1.RESTRUCTURE
					, T1.CALCOFSTEPS
					, T1.STEPSAPPLIEDFOR
					, T1.NOOFGRCSTEPS
					, T1.SCHDVERSION
					, T1.SUBVENTIONFROM
					, T1.MANUFACTURERDEALERID
					, T5.DEALERNAME MANUFACTURERDEALERNAME
					, T5.CODE MANUFACTURERDEALERCODE
					, T1.ESCROW
					, T1.CUSTBANKID
					, CB.ACCOUNTNUMBER CUSTACCTNUMBER
					, CB.ACCOUNTHOLDERNAME CUSTACCTHOLDERNAME
					, T1.MANUALSCHDTYPE
					, T1.ISRA
					, T1.SANCTIONEDDATE
					, T1.OVERDRAFTTXNCHRGREQ
					, T1.OVERDRAFTCALCCHRG
					, T1.OVERDRAFTCHRGAMTORPERC
					, T1.OVERDRAFTCHRCALON
					, T1.UNDERSETTLEMENT
					, T1.UNDERNPA
					, T1.CREATEDBY
					, T1.CREATEDON
					, T1.APPROVEDBY
					, T1.APPROVEDON
				FROM FINANCEMAIN_TEMP T1
				INNER JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
				INNER JOIN RMTFINANCETYPES T3 ON T3.FINTYPE = T1.FINTYPE
				LEFT JOIN SECROLES T4 ON T1.NEXTROLECODE= T4.ROLECD
				LEFT JOIN AMTVEHICLEDEALER T5 ON T1.MANUFACTURERDEALERID = T5.DEALERID
				LEFT JOIN CUSTOMERBANKINFO CB ON T1.CUSTBANKID = CB.BANKID
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#4875.2002_post" author="Poojitha.m" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_lview');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#4876.500_pre" author="Poojitha.m" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies('plf','customers_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#4876.500" author="Poojitha.m">
		<createView viewName="CUSTOMERS_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.CUSTID,
					T1.CUSTCIF,
					T1.CUSTCOREBANK,
					T1.CUSTCTGCODE,
					T1.CUSTTYPECODE,
					T1.CUSTSALUTATIONCODE,
					T1.CUSTFNAME,
					T1.CUSTMNAME,
					T1.CUSTLNAME,
					T1.CUSTSHRTNAME,
					T1.CUSTFNAMELCLLNG,
					T1.CUSTMNAMELCLLNG,
					T1.CUSTLNAMELCLLNG,
					T1.CUSTSHRTNAMELCLLNG,
					T1.CUSTDFTBRANCH,
					T1.CUSTGENDERCODE,
					T1.CUSTDOB,
					T1.CUSTPOB,
					T1.CUSTCOB,
					T1.CUSTPASSPORTNO,
					T1.CUSTMOTHERMAIDEN,
					T1.CUSTISMINOR,
					T1.CUSTREFEREDBY,
					T1.CUSTDSA,
					T1.CUSTDSADEPT,
					T1.CUSTRO1,
					T1.CUSTRO2,
					T1.CUSTGROUPID,
					T1.CUSTSTS,
					T1.CUSTSTSCHGDATE,
					T1.CUSTGROUPSTS,
					T1.CUSTISBLOCKED,
					T1.CUSTISACTIVE,
					T1.CUSTISCLOSED,
					T1.CUSTINACTIVEREASON,
					T1.CUSTISDECEASE,
					T1.CUSTISDORMANT,
					T1.CUSTISDELINQUENT,
					T1.CUSTISTRADEFINCUST,
					T1.CUSTTRADELICENCENUM,
					T1.CUSTTRADELICENCEEXPIRY,
					T1.CUSTPASSPORTEXPIRY,
					T1.CUSTVISANUM,
					T1.CUSTVISAEXPIRY,
					T1.CUSTISSTAFF,
					T1.CUSTSTAFFID,
					T1.CUSTINDUSTRY,
					T1.CUSTSECTOR,
					T1.CUSTSUBSECTOR,
					T1.CUSTPROFESSION,
					T1.CUSTTOTALINCOME,
					T1.CUSTMARITALSTS,
					T1.CUSTEMPSTS,
					T1.CUSTSEGMENT,
					T1.CUSTSUBSEGMENT,
					T1.CUSTISBLACKLISTED,
					T1.CUSTBLRSNCODE,
					T1.CUSTISREJECTED,
					T1.CUSTREJECTEDRSN,
					T1.CUSTBASECCY,
					T1.CUSTLNG,
					T1.CUSTPARENTCOUNTRY,
					T1.CUSTRESDCOUNTRY,
					T1.CUSTRISKCOUNTRY,
					T1.CUSTNATIONALITY,
					T1.CUSTCLOSEDON,
					T1.CUSTSTMTFRQ,
					T1.CUSTISSTMTCOMBINED,
					T1.CUSTSTMTLASTDATE,
					T1.CUSTSTMTNEXTDATE,
					T1.CUSTSTMTDISPATCHMODE,
					T1.CUSTFIRSTBUSINESSDATE,
					T1.CUSTADDLVAR81,
					T1.CUSTADDLVAR82,
					T1.CUSTADDLVAR83,
					T1.CUSTADDLVAR84,
					T1.CUSTADDLVAR85,
					T1.CUSTADDLVAR86,
					T1.CUSTADDLVAR87,
					T1.CUSTADDLVAR88,
					T1.CUSTADDLVAR89,
					T1.CUSTADDLDATE1,
					T1.CUSTADDLDATE2,
					T1.CUSTADDLDATE3,
					T1.CUSTADDLDATE4,
					T1.CUSTADDLDATE5,
					T1.CUSTADDLVAR1,
					T1.CUSTADDLVAR2,
					T1.CUSTADDLVAR3,
					T1.CUSTADDLVAR4,
					T1.CUSTADDLVAR5,
					T1.CUSTADDLVAR6,
					T1.CUSTADDLVAR7,
					T1.CUSTADDLVAR8,
					T1.CUSTADDLVAR9,
					T1.CUSTADDLVAR10,
					T1.CUSTADDLVAR11,
					T1.CUSTADDLDEC1,
					T1.CUSTADDLDEC2,
					T1.CUSTADDLDEC3,
					T1.CUSTADDLDEC4,
					T1.CUSTADDLDEC5,
					T1.CUSTADDLINT1,
					T1.CUSTADDLINT2,
					T1.CUSTADDLINT3,
					T1.CUSTADDLINT4,
					T1.CUSTADDLINT5,
					T1.CUSTSOURCEID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.CUSTTYPEDESC LOVDESCCUSTTYPECODENAME,
					T3.MARITALSTSDESC LOVDESCCUSTMARITALSTSNAME,
					T4.EMPSTSDESC LOVDESCCUSTEMPSTSNAME,
					T6.CUSTSTSDESCRIPTION LOVDESCCUSTSTSNAME,
					T7.INDUSTRYDESC LOVDESCCUSTINDUSTRYNAME,
					T8.SECTORDESC LOVDESCCUSTSECTORNAME,
					T9.SUBSECTORDESC LOVDESCCUSTSUBSECTORNAME,
					T10.PROFESSIONDESC LOVDESCCUSTPROFESSIONNAME,
					T11.COUNTRYDESC LOVDESCCUSTCOBNAME,
					T20.SEGMENTDESC LOVDESCCUSTSEGMENTNAME,
					T12.NATIONALITYDESC LOVDESCCUSTNATIONALITYNAME,
					T13.GENDERDESC LOVDESCCUSTGENDERCODENAME,
					T14.DEPTDESC LOVDESCCUSTDSADEPTNAME,
					T15.DEALERNAME LOVDESCCUSTRO1NAME,
					T15.DEALERCITY LOVDESCCUSTRO1CITY,
					T16.GRPSTSDESCRIPTION LOVDESCCUSTGROUPSTSNAME,
					T17.BRANCHDESC LOVDESCCUSTDFTBRANCHNAME,
					T17.BANKREFNO BRANCHREFNO,
					T17.BRANCHSWIFTBRNCDE CUSTSWIFTBRNCODE,
					T18.CUSTCTGDESC LOVDESCCUSTCTGCODENAME,
					T2.CUSTTYPECTG LOVDESCCUSTCTGTYPE,
					T19.SALUATIONDESC LOVDESCCUSTSALUTATIONCODENAME,
					T21.COUNTRYDESC LOVDESCCUSTPARENTCOUNTRYNAME,
					T22.COUNTRYDESC LOVDESCCUSTRESDCOUNTRYNAME,
					T23.COUNTRYDESC LOVDESCCUSTRISKCOUNTRYNAME,
					T24.ROFFICERDESC LOVDESCCUSTRO2NAME,
					T25.BLRSNDESC LOVDESCCUSTBLRSNCODENAME,
					T26.REJECTDESC LOVDESCCUSTREJECTEDRSNNAME,
					T27.CUSTGRPDESC LOVDESCCUSTGROUPIDNAME,
					T28.SUBSEGMENTDESC LOVDESCCUSTSUBSEGMENTNAME,
					T29.LNGDESC LOVDESCCUSTLNGNAME,
					T30.DISPATCHMODEDESC LOVDESCDISPATCHMODEDESCNAME,
					T1.DEDUPFOUND,
					T1.SKIPDEDUP,
					T1.CUSTTOTALEXPENSE,
					T1.CUSTBLACKLISTDATE,
					T1.NOOFDEPENDENTS,
					T1.CUSTCRCPR,
					T1.JOINTCUST,
					T1.JOINTCUSTNAME,
					T1.JOINTCUSTDOB,
					T27.CUSTGRPCODE LOVDESCCUSTGROUPCODE,
					T1.CUSTRELATION,
					T1.CONTACTPERSONNAME,
					T1.PHONENUMBER,
					T1.EMAILID,
					T1.SALARIEDCUSTOMER,
					T31.TARGETDESC LOVDESCTARGETNAME,
					T1.CUSTSUSPSTS,
					T1.CUSTSUSPDATE,
					T1.CUSTSUSPTRIGGER,
					T1.SUBCATEGORY,
					T1.CASTEID,
					T1.RELIGIONID,
					T32.CASTECODE,
					T32.CASTEDESC,
					T33.RELIGIONCODE,
					T33.RELIGIONDESC,
					COALESCE(T34.ROLEDESC, ${ADD.SCHEMA}FN_GET_ROLEDESC(T1.NEXTROLECODE)) LOVDESCREQUESTSTAGE,
					T1.MARGINDEVIATION,
					T1.APPLICATIONNO,
					T17.BRANCHPROVINCE,
					T1.DND,
					T1.RESIDENTIALSTATUS,
					T1.OTHERCASTE,
					T1.OTHERRELIGION,
					T1.NATUREOFBUSINESS,
					T1.ENTITYTYPE,
					T1.CUSTRESIDENTIALSTS,
					T1.QUALIFICATION,
					T1.CUSTFLAG,
					T1.VIP,
					T35.DESCRIPTION LOVDESCQUALIFICATION,
					T1.CREATEDBY,
					T1.CREATEDON,
					T1.APPROVEDBY,
					T1.APPROVEDON
				FROM CUSTOMERS_TEMP T1
			    LEFT JOIN RMTCUSTTYPES T2 ON T1.CUSTTYPECODE = T2.CUSTTYPECODE
			    LEFT JOIN BMTMARITALSTATUSCODES T3 ON T1.CUSTMARITALSTS = T3.MARITALSTSCODE
			    LEFT JOIN BMTEMPSTSCODES T4 ON T1.CUSTEMPSTS = T4.EMPSTSCODE
			    LEFT JOIN BMTCUSTSTATUSCODES T6 ON T1.CUSTSTS = T6.CUSTSTSCODE
			    LEFT JOIN BMTINDUSTRIES T7 ON T1.CUSTINDUSTRY = T7.INDUSTRYCODE
			    LEFT JOIN BMTSECTORS T8 ON T1.CUSTSECTOR = T8.SECTORCODE
			    LEFT JOIN BMTSUBSECTORS T9 ON T1.CUSTSECTOR = T9.SECTORCODE AND T1.CUSTSUBSECTOR = T9.SUBSECTORCODE
			    LEFT JOIN BMTPROFESSIONS T10 ON T1.CUSTPROFESSION = T10.PROFESSIONCODE
			    LEFT JOIN BMTCOUNTRIES T11 ON T1.CUSTCOB = T11.COUNTRYCODE
			    LEFT JOIN BMTNATIONALITYCODES T12 ON T1.CUSTNATIONALITY = T12.NATIONALITYCODE
			    LEFT JOIN BMTGENDERS T13 ON T1.CUSTGENDERCODE = T13.GENDERCODE
			    LEFT JOIN BMTDEPARTMENTS T14 ON T1.CUSTDSADEPT = T14.DEPTCODE
			    LEFT JOIN AMTVEHICLEDEALER T15 ON T1.CUSTRO1 = T15.DEALERID
			    LEFT JOIN BMTGRPSTATUSCODES T16 ON T1.CUSTGROUPSTS = T16.GRPSTSCODE
			    LEFT JOIN RMTBRANCHES T17 ON T1.CUSTDFTBRANCH = T17.BRANCHCODE
			    LEFT JOIN BMTCUSTCATEGORIES T18 ON T1.CUSTCTGCODE = T18.CUSTCTGCODE
			    LEFT JOIN BMTSALUTATIONS T19 ON T1.CUSTSALUTATIONCODE = T19.SALUTATIONCODE
			    LEFT JOIN BMTSEGMENTS T20 ON T1.CUSTSEGMENT = T20.SEGMENTCODE
			    LEFT JOIN BMTCOUNTRIES T21 ON T1.CUSTPARENTCOUNTRY = T21.COUNTRYCODE
			    LEFT JOIN BMTCOUNTRIES T22 ON T1.CUSTRESDCOUNTRY = T22.COUNTRYCODE
			    LEFT JOIN BMTCOUNTRIES T23 ON T1.CUSTRISKCOUNTRY = T23.COUNTRYCODE
			    LEFT JOIN RELATIONSHIPOFFICERS T24 ON T1.CUSTRO2 = T24.ROFFICERCODE
			    LEFT JOIN BMTBLACKLISTRSNCODES T25 ON T1.CUSTBLRSNCODE = T25.BLRSNCODE
			    LEFT JOIN BMTREJECTCODES T26 ON T1.CUSTREJECTEDRSN = T26.REJECTCODE
			    LEFT JOIN CUSTOMERGROUPS T27 ON T1.CUSTGROUPID = T27.CUSTGRPID
			    LEFT JOIN BMTSUBSEGMENTS T28 ON T1.CUSTSUBSEGMENT = T28.SUBSEGMENTCODE
			    LEFT JOIN BMTLANGUAGE T29 ON T1.CUSTLNG = T29.LNGCODE
			    LEFT JOIN BMTDISPATCHMODES T30 ON T1.CUSTSTMTDISPATCHMODE = T30.DISPATCHMODECODE
			    LEFT JOIN TARGETDETAILS T31 ON T1.CUSTADDLVAR82 = T31.TARGETCODE
			    LEFT JOIN SECROLES T34 ON T1.NEXTROLECODE = T34.ROLECD
			    LEFT JOIN CASTE T32 ON T1.CASTEID = T32.CASTEID
			    LEFT JOIN RELIGION T33 ON T1.RELIGIONID = T33.RELIGIONID
			    LEFT JOIN QUALIFICATION T35 ON T1.QUALIFICATION= T35.CODE
				UNION ALL
				SELECT T1.CUSTID,
				    T1.CUSTCIF,
				    T1.CUSTCOREBANK,
				    T1.CUSTCTGCODE,
				    T1.CUSTTYPECODE,
				    T1.CUSTSALUTATIONCODE,
				    T1.CUSTFNAME,
				    T1.CUSTMNAME,
				    T1.CUSTLNAME,
				    T1.CUSTSHRTNAME,
				    T1.CUSTFNAMELCLLNG,
				    T1.CUSTMNAMELCLLNG,
				    T1.CUSTLNAMELCLLNG,
				    T1.CUSTSHRTNAMELCLLNG,
				    T1.CUSTDFTBRANCH,
				    T1.CUSTGENDERCODE,
				    T1.CUSTDOB,
				    T1.CUSTPOB,
				    T1.CUSTCOB,
				    T1.CUSTPASSPORTNO,
				    T1.CUSTMOTHERMAIDEN,
				    T1.CUSTISMINOR,
				    T1.CUSTREFEREDBY,
				    T1.CUSTDSA,
				    T1.CUSTDSADEPT,
				    T1.CUSTRO1,
				    T1.CUSTRO2,
				    T1.CUSTGROUPID,
				    T1.CUSTSTS,
				    T1.CUSTSTSCHGDATE,
				    T1.CUSTGROUPSTS,
				    T1.CUSTISBLOCKED,
				    T1.CUSTISACTIVE,
				    T1.CUSTISCLOSED,
				    T1.CUSTINACTIVEREASON,
				    T1.CUSTISDECEASE,
				    T1.CUSTISDORMANT,
				    T1.CUSTISDELINQUENT,
				    T1.CUSTISTRADEFINCUST,
				    T1.CUSTTRADELICENCENUM,
				    T1.CUSTTRADELICENCEEXPIRY,
				    T1.CUSTPASSPORTEXPIRY,
				    T1.CUSTVISANUM,
				    T1.CUSTVISAEXPIRY,
				    T1.CUSTISSTAFF,
				    T1.CUSTSTAFFID,
				    T1.CUSTINDUSTRY,
				    T1.CUSTSECTOR,
				    T1.CUSTSUBSECTOR,
				    T1.CUSTPROFESSION,
				    T1.CUSTTOTALINCOME,
				    T1.CUSTMARITALSTS,
				    T1.CUSTEMPSTS,
				    T1.CUSTSEGMENT,
				    T1.CUSTSUBSEGMENT,
				    T1.CUSTISBLACKLISTED,
				    T1.CUSTBLRSNCODE,
				    T1.CUSTISREJECTED,
				    T1.CUSTREJECTEDRSN,
				    T1.CUSTBASECCY,
				    T1.CUSTLNG,
				    T1.CUSTPARENTCOUNTRY,
				    T1.CUSTRESDCOUNTRY,
				    T1.CUSTRISKCOUNTRY,
				    T1.CUSTNATIONALITY,
				    T1.CUSTCLOSEDON,
				    T1.CUSTSTMTFRQ,
				    T1.CUSTISSTMTCOMBINED,
				    T1.CUSTSTMTLASTDATE,
				    T1.CUSTSTMTNEXTDATE,
				    T1.CUSTSTMTDISPATCHMODE,
				    T1.CUSTFIRSTBUSINESSDATE,
				    T1.CUSTADDLVAR81,
				    T1.CUSTADDLVAR82,
				    T1.CUSTADDLVAR83,
				    T1.CUSTADDLVAR84,
				    T1.CUSTADDLVAR85,
				    T1.CUSTADDLVAR86,
				    T1.CUSTADDLVAR87,
				    T1.CUSTADDLVAR88,
				    T1.CUSTADDLVAR89,
				    T1.CUSTADDLDATE1,
				    T1.CUSTADDLDATE2,
				    T1.CUSTADDLDATE3,
				    T1.CUSTADDLDATE4,
				    T1.CUSTADDLDATE5,
				    T1.CUSTADDLVAR1,
				    T1.CUSTADDLVAR2,
				    T1.CUSTADDLVAR3,
				    T1.CUSTADDLVAR4,
				    T1.CUSTADDLVAR5,
				    T1.CUSTADDLVAR6,
				    T1.CUSTADDLVAR7,
				    T1.CUSTADDLVAR8,
				    T1.CUSTADDLVAR9,
				    T1.CUSTADDLVAR10,
				    T1.CUSTADDLVAR11,
				    T1.CUSTADDLDEC1,
				    T1.CUSTADDLDEC2,
				    T1.CUSTADDLDEC3,
				    T1.CUSTADDLDEC4,
				    T1.CUSTADDLDEC5,
				    T1.CUSTADDLINT1,
				    T1.CUSTADDLINT2,
				    T1.CUSTADDLINT3,
				    T1.CUSTADDLINT4,
				    T1.CUSTADDLINT5,
				    T1.CUSTSOURCEID,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T2.CUSTTYPEDESC LOVDESCCUSTTYPECODENAME,
				    T3.MARITALSTSDESC LOVDESCCUSTMARITALSTSNAME,
				    T4.EMPSTSDESC LOVDESCCUSTEMPSTSNAME,
				    T6.CUSTSTSDESCRIPTION LOVDESCCUSTSTSNAME,
				    T7.INDUSTRYDESC LOVDESCCUSTINDUSTRYNAME,
				    T8.SECTORDESC LOVDESCCUSTSECTORNAME,
				    T9.SUBSECTORDESC LOVDESCCUSTSUBSECTORNAME,
				    T10.PROFESSIONDESC LOVDESCCUSTPROFESSIONNAME,
				    T11.COUNTRYDESC LOVDESCCUSTCOBNAME,
				    T20.SEGMENTDESC LOVDESCCUSTSEGMENTNAME,
				    T12.NATIONALITYDESC LOVDESCCUSTNATIONALITYNAME,
				    T13.GENDERDESC LOVDESCCUSTGENDERCODENAME,
				    T14.DEPTDESC LOVDESCCUSTDSADEPTNAME,
				    T15.DEALERNAME LOVDESCCUSTRO1NAME,
				    T15.DEALERCITY LOVDESCCUSTRO1CITY,
				    T16.GRPSTSDESCRIPTION LOVDESCCUSTGROUPSTSNAME,
				    T17.BRANCHDESC LOVDESCCUSTDFTBRANCHNAME,
				    T17.BANKREFNO BRANCHREFNO,
				    T17.BRANCHSWIFTBRNCDE CUSTSWIFTBRNCODE,
				    T18.CUSTCTGDESC LOVDESCCUSTCTGCODENAME,
				    T2.CUSTTYPECTG LOVDESCCUSTCTGTYPE,
				    T19.SALUATIONDESC LOVDESCCUSTSALUTATIONCODENAME,
				    T21.COUNTRYDESC LOVDESCCUSTPARENTCOUNTRYNAME,
				    T22.COUNTRYDESC LOVDESCCUSTRESDCOUNTRYNAME,
				    T23.COUNTRYDESC LOVDESCCUSTRISKCOUNTRYNAME,
				    T24.ROFFICERDESC LOVDESCCUSTRO2NAME,
				    T25.BLRSNDESC LOVDESCCUSTBLRSNCODENAME,
				    T26.REJECTDESC LOVDESCCUSTREJECTEDRSNNAME,
				    T27.CUSTGRPDESC LOVDESCCUSTGROUPIDNAME,
				    T28.SUBSEGMENTDESC LOVDESCCUSTSUBSEGMENTNAME,
				    T29.LNGDESC LOVDESCCUSTLNGNAME,
				    T30.DISPATCHMODEDESC LOVDESCDISPATCHMODEDESCNAME,
				    T1.DEDUPFOUND,
				    T1.SKIPDEDUP,
				    T1.CUSTTOTALEXPENSE,
				    T1.CUSTBLACKLISTDATE,
				    T1.NOOFDEPENDENTS,
				    T1.CUSTCRCPR,
				    T1.JOINTCUST,
				    T1.JOINTCUSTNAME,
				    T1.JOINTCUSTDOB,
				    T27.CUSTGRPCODE LOVDESCCUSTGROUPCODE,
				    T1.CUSTRELATION,
				    T1.CONTACTPERSONNAME,
				    T1.PHONENUMBER,
				    T1.EMAILID,
				    T1.SALARIEDCUSTOMER,
				    T31.TARGETDESC LOVDESCTARGETNAME,
				    T1.CUSTSUSPSTS,
				    T1.CUSTSUSPDATE,
				    T1.CUSTSUSPTRIGGER,
				    T1.SUBCATEGORY,
				    T1.CASTEID,
				    T1.RELIGIONID,
				    T32.CASTECODE,
				    T32.CASTEDESC,
				    T33.RELIGIONCODE,
				    T33.RELIGIONDESC,
				    COALESCE(T34.ROLEDESC, ${ADD.SCHEMA}FN_GET_ROLEDESC(T1.NEXTROLECODE)) LOVDESCREQUESTSTAGE,
				    T1.MARGINDEVIATION,
				    T1.APPLICATIONNO,
				    T17.BRANCHPROVINCE,
				    T1.DND,
				    T1.RESIDENTIALSTATUS,
				    T1.OTHERCASTE,
					T1.OTHERRELIGION,
					T1.NATUREOFBUSINESS,
					T1.ENTITYTYPE,
					T1.CUSTRESIDENTIALSTS,
					T1.QUALIFICATION,
					T1.CUSTFLAG,
					T1.VIP,
					T35.DESCRIPTION LOVDESCQUALIFICATION,
					T1.CREATEDBY,
					T1.CREATEDON,
					T1.APPROVEDBY,
					T1.APPROVEDON
				FROM CUSTOMERS T1
				LEFT JOIN RMTCUSTTYPES T2 ON T1.CUSTTYPECODE = T2.CUSTTYPECODE
				LEFT JOIN BMTMARITALSTATUSCODES T3 ON T1.CUSTMARITALSTS = T3.MARITALSTSCODE
				LEFT JOIN BMTEMPSTSCODES T4 ON T1.CUSTEMPSTS = T4.EMPSTSCODE
				LEFT JOIN BMTCUSTSTATUSCODES T6 ON T1.CUSTSTS = T6.CUSTSTSCODE
				LEFT JOIN BMTINDUSTRIES T7 ON T1.CUSTINDUSTRY = T7.INDUSTRYCODE
				LEFT JOIN BMTSECTORS T8 ON T1.CUSTSECTOR = T8.SECTORCODE
				LEFT JOIN BMTSUBSECTORS T9 ON T1.CUSTSECTOR = T9.SECTORCODE AND T1.CUSTSUBSECTOR = T9.SUBSECTORCODE
				LEFT JOIN BMTPROFESSIONS T10 ON T1.CUSTPROFESSION = T10.PROFESSIONCODE
				LEFT JOIN BMTCOUNTRIES T11 ON T1.CUSTCOB = T11.COUNTRYCODE
				LEFT JOIN BMTNATIONALITYCODES T12 ON T1.CUSTNATIONALITY = T12.NATIONALITYCODE
				LEFT JOIN BMTGENDERS T13 ON T1.CUSTGENDERCODE = T13.GENDERCODE
				LEFT JOIN BMTDEPARTMENTS T14 ON T1.CUSTDSADEPT = T14.DEPTCODE
				LEFT JOIN AMTVEHICLEDEALER T15 ON T1.CUSTRO1 = T15.DEALERID
				LEFT JOIN BMTGRPSTATUSCODES T16 ON T1.CUSTGROUPSTS = T16.GRPSTSCODE
				LEFT JOIN RMTBRANCHES T17 ON T1.CUSTDFTBRANCH = T17.BRANCHCODE
				LEFT JOIN BMTCUSTCATEGORIES T18 ON T1.CUSTCTGCODE = T18.CUSTCTGCODE
				LEFT JOIN BMTSALUTATIONS T19 ON T1.CUSTSALUTATIONCODE = T19.SALUTATIONCODE
				LEFT JOIN BMTSEGMENTS T20 ON T1.CUSTSEGMENT = T20.SEGMENTCODE
				LEFT JOIN BMTCOUNTRIES T21 ON T1.CUSTPARENTCOUNTRY = T21.COUNTRYCODE
				LEFT JOIN BMTCOUNTRIES T22 ON T1.CUSTRESDCOUNTRY = T22.COUNTRYCODE
				LEFT JOIN BMTCOUNTRIES T23 ON T1.CUSTRISKCOUNTRY = T23.COUNTRYCODE
				LEFT JOIN RELATIONSHIPOFFICERS T24 ON T1.CUSTRO2 = T24.ROFFICERCODE
				LEFT JOIN BMTBLACKLISTRSNCODES T25 ON T1.CUSTBLRSNCODE = T25.BLRSNCODE
				LEFT JOIN BMTREJECTCODES T26 ON T1.CUSTREJECTEDRSN = T26.REJECTCODE
				LEFT JOIN CUSTOMERGROUPS T27 ON T1.CUSTGROUPID = T27.CUSTGRPID
				LEFT JOIN BMTSUBSEGMENTS T28 ON T1.CUSTSUBSEGMENT = T28.SUBSEGMENTCODE
				LEFT JOIN BMTLANGUAGE T29 ON T1.CUSTLNG = T29.LNGCODE
				LEFT JOIN BMTDISPATCHMODES T30 ON T1.CUSTSTMTDISPATCHMODE = T30.DISPATCHMODECODE
				LEFT JOIN TARGETDETAILS T31 ON T1.CUSTADDLVAR82 = T31.TARGETCODE
				LEFT JOIN SECROLES T34 ON T1.NEXTROLECODE = T34.ROLECD
				LEFT JOIN CASTE T32 ON T1.CASTEID = T32.CASTEID
				LEFT JOIN RELIGION T33 ON T1.RELIGIONID = T33.RELIGIONID
				LEFT JOIN QUALIFICATION T35 ON T1.QUALIFICATION= T35.CODE
				WHERE NOT EXISTS (SELECT 1 FROM CUSTOMERS_TEMP WHERE CUSTOMERS_TEMP.CUSTID = T1.CUSTID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#4876.500_post" author="Poojitha.m" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies('plf','customers_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#4876.501_pre" author="Poojitha.m" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies('plf','customers_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#4876.501" author="Poojitha.m">
		<createView viewName="CUSTOMERS_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.CUSTID,
					T1.CUSTCIF,
					T1.CUSTCOREBANK,
					T1.CUSTCTGCODE,
					T1.CUSTTYPECODE,
					T1.CUSTSALUTATIONCODE,
					T1.CUSTFNAME,
					T1.CUSTMNAME,
					T1.CUSTLNAME,
					T1.CUSTSHRTNAME,
					T1.CUSTFNAMELCLLNG,
					T1.CUSTMNAMELCLLNG,
					T1.CUSTLNAMELCLLNG,
					T1.CUSTSHRTNAMELCLLNG,
					T1.CUSTDFTBRANCH,
					T1.CUSTGENDERCODE,
					T1.CUSTDOB,
					T1.CUSTPOB,
					T1.CUSTCOB,
					T1.CUSTPASSPORTNO,
					T1.CUSTMOTHERMAIDEN,
					T1.CUSTISMINOR,
					T1.CUSTREFEREDBY,
					T1.CUSTDSA,
					T1.CUSTDSADEPT,
					T1.CUSTRO1,
					T1.CUSTRO2,
					T1.CUSTGROUPID,
					T1.CUSTSTS,
					T1.CUSTSTSCHGDATE,
					T1.CUSTGROUPSTS,
					T1.CUSTISBLOCKED,
					T1.CUSTISACTIVE,
					T1.CUSTISCLOSED,
					T1.CUSTINACTIVEREASON,
					T1.CUSTISDECEASE,
					T1.CUSTISDORMANT,
					T1.CUSTISDELINQUENT,
					T1.CUSTISTRADEFINCUST,
					T1.CUSTTRADELICENCENUM,
					T1.CUSTTRADELICENCEEXPIRY,
					T1.CUSTPASSPORTEXPIRY,
					T1.CUSTVISANUM,
					T1.CUSTVISAEXPIRY,
					T1.CUSTISSTAFF,
					T1.CUSTSTAFFID,
					T1.CUSTINDUSTRY,
					T1.CUSTSECTOR,
					T1.CUSTSUBSECTOR,
					T1.CUSTPROFESSION,
					T1.CUSTTOTALINCOME,
					T1.CUSTMARITALSTS,
					T1.CUSTEMPSTS,
					T1.CUSTSEGMENT,
					T1.CUSTSUBSEGMENT,
					T1.CUSTISBLACKLISTED,
					T1.CUSTBLRSNCODE,
					T1.CUSTISREJECTED,
					T1.CUSTREJECTEDRSN,
					T1.CUSTBASECCY,
					T1.CUSTLNG,
					T1.CUSTPARENTCOUNTRY,
					T1.CUSTRESDCOUNTRY,
					T1.CUSTRISKCOUNTRY,
					T1.CUSTNATIONALITY,
					T1.CUSTCLOSEDON,
					T1.CUSTSTMTFRQ,
					T1.CUSTISSTMTCOMBINED,
					T1.CUSTSTMTLASTDATE,
					T1.CUSTSTMTNEXTDATE,
					T1.CUSTSTMTDISPATCHMODE,
					T1.CUSTFIRSTBUSINESSDATE,
					T1.CUSTADDLVAR81,
					T1.CUSTADDLVAR82,
					T1.CUSTADDLVAR83,
					T1.CUSTADDLVAR84,
					T1.CUSTADDLVAR85,
					T1.CUSTADDLVAR86,
					T1.CUSTADDLVAR87,
					T1.CUSTADDLVAR88,
					T1.CUSTADDLVAR89,
					T1.CUSTADDLDATE1,
					T1.CUSTADDLDATE2,
					T1.CUSTADDLDATE3,
					T1.CUSTADDLDATE4,
					T1.CUSTADDLDATE5,
					T1.CUSTADDLVAR1,
					T1.CUSTADDLVAR2,
					T1.CUSTADDLVAR3,
					T1.CUSTADDLVAR4,
					T1.CUSTADDLVAR5,
					T1.CUSTADDLVAR6,
					T1.CUSTADDLVAR7,
					T1.CUSTADDLVAR8,
					T1.CUSTADDLVAR9,
					T1.CUSTADDLVAR10,
					T1.CUSTADDLVAR11,
					T1.CUSTADDLDEC1,
					T1.CUSTADDLDEC2,
					T1.CUSTADDLDEC3,
					T1.CUSTADDLDEC4,
					T1.CUSTADDLDEC5,
					T1.CUSTADDLINT1,
					T1.CUSTADDLINT2,
					T1.CUSTADDLINT3,
					T1.CUSTADDLINT4,
					T1.CUSTADDLINT5,
					T1.CUSTSOURCEID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.CUSTTYPEDESC LOVDESCCUSTTYPECODENAME,
					T3.MARITALSTSDESC LOVDESCCUSTMARITALSTSNAME,
					T4.EMPSTSDESC LOVDESCCUSTEMPSTSNAME,
					T6.CUSTSTSDESCRIPTION LOVDESCCUSTSTSNAME,
					T7.INDUSTRYDESC LOVDESCCUSTINDUSTRYNAME,
					T8.SECTORDESC LOVDESCCUSTSECTORNAME,
					T9.SUBSECTORDESC LOVDESCCUSTSUBSECTORNAME,
					T10.PROFESSIONDESC LOVDESCCUSTPROFESSIONNAME,
					T11.COUNTRYDESC LOVDESCCUSTCOBNAME,
					T20.SEGMENTDESC LOVDESCCUSTSEGMENTNAME,
					T12.NATIONALITYDESC LOVDESCCUSTNATIONALITYNAME,
					T13.GENDERDESC LOVDESCCUSTGENDERCODENAME,
					T14.DEPTDESC LOVDESCCUSTDSADEPTNAME,
					T15.DEALERNAME LOVDESCCUSTRO1NAME,
					T15.DEALERCITY LOVDESCCUSTRO1CITY,
					T16.GRPSTSDESCRIPTION LOVDESCCUSTGROUPSTSNAME,
					T17.BRANCHDESC LOVDESCCUSTDFTBRANCHNAME,
					T17.BANKREFNO BRANCHREFNO,
					T17.BRANCHSWIFTBRNCDE CUSTSWIFTBRNCODE,
					T18.CUSTCTGDESC LOVDESCCUSTCTGCODENAME,
					T2.CUSTTYPECTG LOVDESCCUSTCTGTYPE,
					T19.SALUATIONDESC LOVDESCCUSTSALUTATIONCODENAME,
					T21.COUNTRYDESC LOVDESCCUSTPARENTCOUNTRYNAME,
					T22.COUNTRYDESC LOVDESCCUSTRESDCOUNTRYNAME,
					T23.COUNTRYDESC LOVDESCCUSTRISKCOUNTRYNAME,
					T24.ROFFICERDESC LOVDESCCUSTRO2NAME,
					T25.BLRSNDESC LOVDESCCUSTBLRSNCODENAME,
					T26.REJECTDESC LOVDESCCUSTREJECTEDRSNNAME,
					T27.CUSTGRPDESC LOVDESCCUSTGROUPIDNAME,
					T28.SUBSEGMENTDESC LOVDESCCUSTSUBSEGMENTNAME,
					T29.LNGDESC LOVDESCCUSTLNGNAME,
					T30.DISPATCHMODEDESC LOVDESCDISPATCHMODEDESCNAME,
					T1.DEDUPFOUND,
					T1.SKIPDEDUP,
					T1.CUSTTOTALEXPENSE,
					T1.CUSTBLACKLISTDATE,
					T1.NOOFDEPENDENTS,
					T1.CUSTCRCPR,
					T1.JOINTCUST,
					T1.JOINTCUSTNAME,
					T1.JOINTCUSTDOB,
					T27.CUSTGRPCODE LOVDESCCUSTGROUPCODE,
					T1.CONTACTPERSONNAME,
					T1.PHONENUMBER,
					T1.EMAILID,
					T1.SALARIEDCUSTOMER,
					T31.TARGETDESC LOVDESCTARGETNAME,
					T1.CUSTRELATION,
					T1.CUSTSUSPSTS,
					T1.CUSTSUSPDATE,
					T1.CUSTSUSPTRIGGER,
					T1.SUBCATEGORY,
					T1.CASTEID,
					T1.RELIGIONID,
					T32.CASTECODE,
					T32.CASTEDESC,
					T33.RELIGIONCODE,
					T33.RELIGIONDESC,
					COALESCE(T34.ROLEDESC, ${ADD.SCHEMA}FN_GET_ROLEDESC(T1.NEXTROLECODE)) LOVDESCREQUESTSTAGE,
					T1.MARGINDEVIATION,
					T1.APPLICATIONNO,
					T17.BRANCHPROVINCE,
					T1.DND,
					T1.RESIDENTIALSTATUS,
					T1.OTHERCASTE,
					T1.OTHERRELIGION,
					T1.NATUREOFBUSINESS,
					T1.ENTITYTYPE,
					T1.CUSTRESIDENTIALSTS,
					T1.QUALIFICATION,
					T1.CUSTFLAG,
					T1.VIP,
					T37.DESCRIPTION LOVDESCQUALIFICATION,
					T1.CREATEDBY,
					T1.CREATEDON,
					T1.APPROVEDBY,
					T1.APPROVEDON
			    FROM CUSTOMERS_TEMP T1
			    LEFT JOIN RMTCUSTTYPES T2 ON T1.CUSTTYPECODE = T2.CUSTTYPECODE
			    LEFT JOIN BMTMARITALSTATUSCODES T3 ON T1.CUSTMARITALSTS = T3.MARITALSTSCODE
			    LEFT JOIN BMTEMPSTSCODES T4 ON T1.CUSTEMPSTS = T4.EMPSTSCODE
			    LEFT JOIN BMTCUSTSTATUSCODES T6 ON T1.CUSTSTS = T6.CUSTSTSCODE
			    LEFT JOIN BMTINDUSTRIES T7 ON T1.CUSTINDUSTRY = T7.INDUSTRYCODE
			    LEFT JOIN BMTSECTORS T8 ON T1.CUSTSECTOR = T8.SECTORCODE
			    LEFT JOIN BMTSUBSECTORS T9 ON T1.CUSTSECTOR = T9.SECTORCODE AND T1.CUSTSUBSECTOR = T9.SUBSECTORCODE
			    LEFT JOIN BMTPROFESSIONS T10 ON T1.CUSTPROFESSION = T10.PROFESSIONCODE
			    LEFT JOIN BMTCOUNTRIES T11 ON T1.CUSTCOB = T11.COUNTRYCODE
			    LEFT JOIN BMTNATIONALITYCODES T12 ON T1.CUSTNATIONALITY = T12.NATIONALITYCODE
			    LEFT JOIN BMTGENDERS T13 ON T1.CUSTGENDERCODE = T13.GENDERCODE
			    LEFT JOIN BMTDEPARTMENTS T14 ON T1.CUSTDSADEPT = T14.DEPTCODE
			    LEFT JOIN AMTVEHICLEDEALER T15 ON T1.CUSTRO1 = T15.DEALERID
			    LEFT JOIN BMTGRPSTATUSCODES T16 ON T1.CUSTGROUPSTS = T16.GRPSTSCODE
			    LEFT JOIN RMTBRANCHES T17 ON T1.CUSTDFTBRANCH = T17.BRANCHCODE
			    LEFT JOIN BMTCUSTCATEGORIES T18 ON T1.CUSTCTGCODE = T18.CUSTCTGCODE
			    LEFT JOIN BMTSALUTATIONS T19 ON T1.CUSTSALUTATIONCODE = T19.SALUTATIONCODE
			    LEFT JOIN BMTSEGMENTS T20 ON T1.CUSTSEGMENT = T20.SEGMENTCODE
			    LEFT JOIN BMTCOUNTRIES T21 ON T1.CUSTPARENTCOUNTRY = T21.COUNTRYCODE
			    LEFT JOIN BMTCOUNTRIES T22 ON T1.CUSTRESDCOUNTRY = T22.COUNTRYCODE
			    LEFT JOIN BMTCOUNTRIES T23 ON T1.CUSTRISKCOUNTRY = T23.COUNTRYCODE
			    LEFT JOIN RELATIONSHIPOFFICERS T24 ON T1.CUSTRO2 = T24.ROFFICERCODE
			    LEFT JOIN BMTBLACKLISTRSNCODES T25 ON T1.CUSTBLRSNCODE = T25.BLRSNCODE
			    LEFT JOIN BMTREJECTCODES T26 ON T1.CUSTREJECTEDRSN = T26.REJECTCODE
			    LEFT JOIN CUSTOMERGROUPS T27 ON T1.CUSTGROUPID = T27.CUSTGRPID
			    LEFT JOIN BMTSUBSEGMENTS T28 ON T1.CUSTSUBSEGMENT = T28.SUBSEGMENTCODE
			    LEFT JOIN BMTLANGUAGE T29 ON T1.CUSTLNG = T29.LNGCODE
			    LEFT JOIN BMTDISPATCHMODES T30 ON T1.CUSTSTMTDISPATCHMODE = T30.DISPATCHMODECODE
			    LEFT JOIN TARGETDETAILS T31 ON T1.CUSTADDLVAR82 = T31.TARGETCODE
			    LEFT JOIN CASTE T32 ON T1.CASTEID = T32.CASTEID
			    LEFT JOIN RELIGION T33 ON T1.RELIGIONID = T33.RELIGIONID
			    LEFT JOIN SECROLES T34 ON T1.NEXTROLECODE = T34.ROLECD
			    LEFT JOIN QUALIFICATION T37 ON T1.QUALIFICATION = T37.CODE
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#4876.501_post" author="Poojitha.m" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies('plf','customers_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#4876.502_pre" author="Poojitha.m" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies('plf','customers_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#4876.502" author="Poojitha.m">
		<createView viewName="CUSTOMERS_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.CUSTID,
					T1.CUSTCIF,
					T1.CUSTCOREBANK,
					T1.CUSTCTGCODE,
					T1.CUSTTYPECODE,
					T1.CUSTSALUTATIONCODE,
					T1.CUSTFNAME,
					T1.CUSTMNAME,
					T1.CUSTLNAME,
					T1.CUSTSHRTNAME,
					T1.CUSTFNAMELCLLNG,
					T1.CUSTMNAMELCLLNG,
					T1.CUSTLNAMELCLLNG,
					T1.CUSTSHRTNAMELCLLNG,
					T1.CUSTDFTBRANCH,
					T1.CUSTGENDERCODE,
					T1.CUSTDOB,
					T1.CUSTPOB,
					T1.CUSTCOB,
					T1.CUSTPASSPORTNO,
					T1.CUSTMOTHERMAIDEN,
					T1.CUSTISMINOR,
					T1.CUSTREFEREDBY,
					T1.CUSTDSA,
					T1.CUSTDSADEPT,
					T1.CUSTRO1,
					T1.CUSTRO2,
					T1.CUSTGROUPID,
					T1.CUSTSTS,
					T1.CUSTSTSCHGDATE,
					T1.CUSTGROUPSTS,
					T1.CUSTISBLOCKED,
					T1.CUSTISACTIVE,
					T1.CUSTISCLOSED,
					T1.CUSTINACTIVEREASON,
					T1.CUSTISDECEASE,
					T1.CUSTISDORMANT,
					T1.CUSTISDELINQUENT,
					T1.CUSTISTRADEFINCUST,
					T1.CUSTTRADELICENCENUM,
					T1.CUSTTRADELICENCEEXPIRY,
					T1.CUSTPASSPORTEXPIRY,
					T1.CUSTVISANUM,
					T1.CUSTVISAEXPIRY,
					T1.CUSTISSTAFF,
					T1.CUSTSTAFFID,
					T1.CUSTINDUSTRY,
					T1.CUSTSECTOR,
					T1.CUSTSUBSECTOR,
					T1.CUSTPROFESSION,
					T1.CUSTTOTALINCOME,
					T1.CUSTMARITALSTS,
					T1.CUSTEMPSTS,
					T1.CUSTSEGMENT,
					T1.CUSTSUBSEGMENT,
					T1.CUSTISBLACKLISTED,
					T1.CUSTBLRSNCODE,
					T1.CUSTISREJECTED,
					T1.CUSTREJECTEDRSN,
					T1.CUSTBASECCY,
					T1.CUSTLNG,
					T1.CUSTPARENTCOUNTRY,
					T1.CUSTRESDCOUNTRY,
					T1.CUSTRISKCOUNTRY,
					T1.CUSTNATIONALITY,
					T1.CUSTCLOSEDON,
					T1.CUSTSTMTFRQ,
					T1.CUSTISSTMTCOMBINED,
					T1.CUSTSTMTLASTDATE,
					T1.CUSTSTMTNEXTDATE,
					T1.CUSTSTMTDISPATCHMODE,
					T1.CUSTFIRSTBUSINESSDATE,
					T1.CUSTADDLVAR81,
					T1.CUSTADDLVAR82,
					T1.CUSTADDLVAR83,
					T1.CUSTADDLVAR84,
					T1.CUSTADDLVAR85,
					T1.CUSTADDLVAR86,
					T1.CUSTADDLVAR87,
					T1.CUSTADDLVAR88,
					T1.CUSTADDLVAR89,
					T1.CUSTADDLDATE1,
					T1.CUSTADDLDATE2,
					T1.CUSTADDLDATE3,
					T1.CUSTADDLDATE4,
					T1.CUSTADDLDATE5,
					T1.CUSTADDLVAR1,
					T1.CUSTADDLVAR2,
					T1.CUSTADDLVAR3,
					T1.CUSTADDLVAR4,
					T1.CUSTADDLVAR5,
					T1.CUSTADDLVAR6,
					T1.CUSTADDLVAR7,
					T1.CUSTADDLVAR8,
					T1.CUSTADDLVAR9,
					T1.CUSTADDLVAR10,
					T1.CUSTADDLVAR11,
					T1.CUSTADDLDEC1,
					T1.CUSTADDLDEC2,
					T1.CUSTADDLDEC3,
					T1.CUSTADDLDEC4,
					T1.CUSTADDLDEC5,
					T1.CUSTADDLINT1,
					T1.CUSTADDLINT2,
					T1.CUSTADDLINT3,
					T1.CUSTADDLINT4,
					T1.CUSTADDLINT5,
					T1.VERSION,
					T1.CUSTSOURCEID,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.CUSTTYPEDESC LOVDESCCUSTTYPECODENAME,
					T3.MARITALSTSDESC LOVDESCCUSTMARITALSTSNAME,
					T4.EMPSTSDESC LOVDESCCUSTEMPSTSNAME,
					T6.CUSTSTSDESCRIPTION LOVDESCCUSTSTSNAME,
					T7.INDUSTRYDESC LOVDESCCUSTINDUSTRYNAME,
					T8.SECTORDESC LOVDESCCUSTSECTORNAME,
					T9.SUBSECTORDESC LOVDESCCUSTSUBSECTORNAME,
					T10.PROFESSIONDESC LOVDESCCUSTPROFESSIONNAME,
					T11.COUNTRYDESC LOVDESCCUSTCOBNAME,
					T20.SEGMENTDESC LOVDESCCUSTSEGMENTNAME,
					T12.NATIONALITYDESC LOVDESCCUSTNATIONALITYNAME,
					T13.GENDERDESC LOVDESCCUSTGENDERCODENAME,
					T14.DEPTDESC LOVDESCCUSTDSADEPTNAME,
					T15.DEALERNAME LOVDESCCUSTRO1NAME,
					T15.DEALERCITY LOVDESCCUSTRO1CITY,
					T16.GRPSTSDESCRIPTION LOVDESCCUSTGROUPSTSNAME,
					T17.BRANCHDESC LOVDESCCUSTDFTBRANCHNAME,
					T17.BANKREFNO BRANCHREFNO,
					T17.BRANCHSWIFTBRNCDE CUSTSWIFTBRNCODE,
					T18.CUSTCTGDESC LOVDESCCUSTCTGCODENAME,
					T2.CUSTTYPECTG LOVDESCCUSTCTGTYPE,
					T19.SALUATIONDESC LOVDESCCUSTSALUTATIONCODENAME,
					T21.COUNTRYDESC LOVDESCCUSTPARENTCOUNTRYNAME,
					T22.COUNTRYDESC LOVDESCCUSTRESDCOUNTRYNAME,
					T23.COUNTRYDESC LOVDESCCUSTRISKCOUNTRYNAME,
					T24.ROFFICERDESC LOVDESCCUSTRO2NAME,
					T25.BLRSNDESC LOVDESCCUSTBLRSNCODENAME,
					T26.REJECTDESC LOVDESCCUSTREJECTEDRSNNAME,
					T27.CUSTGRPDESC LOVDESCCUSTGROUPIDNAME,
					T28.SUBSEGMENTDESC LOVDESCCUSTSUBSEGMENTNAME,
					T29.LNGDESC LOVDESCCUSTLNGNAME,
					T30.DISPATCHMODEDESC LOVDESCDISPATCHMODEDESCNAME,
					T1.DEDUPFOUND,
					T1.SKIPDEDUP,
					T1.CUSTTOTALEXPENSE,
					T1.CUSTBLACKLISTDATE,
					T1.NOOFDEPENDENTS,
					T1.CUSTCRCPR,
					T1.JOINTCUST,
					T1.JOINTCUSTNAME,
					T1.JOINTCUSTDOB,
					T27.CUSTGRPCODE LOVDESCCUSTGROUPCODE,
					T1.CUSTRELATION,
					T1.CONTACTPERSONNAME,
					T1.PHONENUMBER,
					T1.EMAILID,
					T1.SALARIEDCUSTOMER,
					T31.TARGETDESC LOVDESCTARGETNAME,
					T1.CUSTSUSPSTS,
					T1.CUSTSUSPDATE,
					T1.CUSTSUSPTRIGGER,
					T1.SUBCATEGORY,
					T1.CASTEID,
					T1.RELIGIONID,
					T32.CASTECODE,
					T32.CASTEDESC,
					T33.RELIGIONCODE,
					T33.RELIGIONDESC,
					COALESCE(T34.ROLEDESC, ${ADD.SCHEMA}FN_GET_ROLEDESC(T1.NEXTROLECODE)) LOVDESCREQUESTSTAGE,
					T1.MARGINDEVIATION,
					T1.APPLICATIONNO,
					T17.BRANCHPROVINCE,
					T1.DND,
					T1.RESIDENTIALSTATUS,
					T35.PHONEAREACODE,
					T35.PHONECOUNTRYCODE,
					T1.OTHERCASTE,
					T1.OTHERRELIGION,
					T1.NATUREOFBUSINESS,
					T1.ENTITYTYPE,
					T1.CUSTRESIDENTIALSTS,
					T1.QUALIFICATION,
					T1.CUSTFLAG,
					T1.VIP,
					T37.DESCRIPTION LOVDESCQUALIFICATION,
					T1.CREATEDBY,
					T1.CREATEDON,
					T1.APPROVEDBY,
					T1.APPROVEDON
			    FROM CUSTOMERS T1
			    LEFT JOIN RMTCUSTTYPES T2 ON T1.CUSTTYPECODE = T2.CUSTTYPECODE
			    LEFT JOIN BMTMARITALSTATUSCODES T3 ON T1.CUSTMARITALSTS = T3.MARITALSTSCODE
			    LEFT JOIN BMTEMPSTSCODES T4 ON T1.CUSTEMPSTS = T4.EMPSTSCODE
			    LEFT JOIN BMTCUSTSTATUSCODES T6 ON T1.CUSTSTS = T6.CUSTSTSCODE
			    LEFT JOIN BMTINDUSTRIES T7 ON T1.CUSTINDUSTRY = T7.INDUSTRYCODE
			    LEFT JOIN BMTSECTORS T8 ON T1.CUSTSECTOR = T8.SECTORCODE
			    LEFT JOIN BMTSUBSECTORS T9 ON T1.CUSTSECTOR = T9.SECTORCODE AND T1.CUSTSUBSECTOR = T9.SUBSECTORCODE
			    LEFT JOIN BMTPROFESSIONS T10 ON T1.CUSTPROFESSION = T10.PROFESSIONCODE
			    LEFT JOIN BMTCOUNTRIES T11 ON T1.CUSTCOB = T11.COUNTRYCODE
			    LEFT JOIN BMTNATIONALITYCODES T12 ON T1.CUSTNATIONALITY = T12.NATIONALITYCODE
			    LEFT JOIN BMTGENDERS T13 ON T1.CUSTGENDERCODE = T13.GENDERCODE
			    LEFT JOIN BMTDEPARTMENTS T14 ON T1.CUSTDSADEPT = T14.DEPTCODE
			    LEFT JOIN AMTVEHICLEDEALER T15 ON T1.CUSTRO1 = T15.DEALERID
			    LEFT JOIN BMTGRPSTATUSCODES T16 ON T1.CUSTGROUPSTS = T16.GRPSTSCODE
			    LEFT JOIN RMTBRANCHES T17 ON T1.CUSTDFTBRANCH = T17.BRANCHCODE
			    LEFT JOIN BMTCUSTCATEGORIES T18 ON T1.CUSTCTGCODE = T18.CUSTCTGCODE
			    LEFT JOIN BMTSALUTATIONS T19 ON T1.CUSTSALUTATIONCODE = T19.SALUTATIONCODE
			    LEFT JOIN BMTSEGMENTS T20 ON T1.CUSTSEGMENT = T20.SEGMENTCODE
			    LEFT JOIN BMTCOUNTRIES T21 ON T1.CUSTPARENTCOUNTRY = T21.COUNTRYCODE
			    LEFT JOIN BMTCOUNTRIES T22 ON T1.CUSTRESDCOUNTRY = T22.COUNTRYCODE
			    LEFT JOIN BMTCOUNTRIES T23 ON T1.CUSTRISKCOUNTRY = T23.COUNTRYCODE
			    LEFT JOIN RELATIONSHIPOFFICERS T24 ON T1.CUSTRO2 = T24.ROFFICERCODE
			    LEFT JOIN BMTBLACKLISTRSNCODES T25 ON T1.CUSTBLRSNCODE = T25.BLRSNCODE
			    LEFT JOIN BMTREJECTCODES T26 ON T1.CUSTREJECTEDRSN = T26.REJECTCODE
			    LEFT JOIN CUSTOMERGROUPS T27 ON T1.CUSTGROUPID = T27.CUSTGRPID
			    LEFT JOIN BMTSUBSEGMENTS T28 ON T1.CUSTSUBSEGMENT = T28.SUBSEGMENTCODE
			    LEFT JOIN BMTLANGUAGE T29 ON T1.CUSTLNG = T29.LNGCODE
			    LEFT JOIN BMTDISPATCHMODES T30 ON T1.CUSTSTMTDISPATCHMODE = T30.DISPATCHMODECODE
			    LEFT JOIN TARGETDETAILS T31 ON T1.CUSTADDLVAR82 = T31.TARGETCODE
			    LEFT JOIN CASTE T32 ON T1.CASTEID = T32.CASTEID
			    LEFT JOIN RELIGION T33 ON T1.RELIGIONID = T33.RELIGIONID
			    LEFT JOIN SECROLES T34 ON T1.NEXTROLECODE = T34.ROLECD
			 	LEFT JOIN CUSTOMERPHONENUMBERS T35 ON T1.CUSTID = T35.PHONECUSTID AND T35.PHONETYPEPRIORITY = 5
				LEFT JOIN CUSTOMEREMAILS T36 ON T1.CUSTID = T36.CUSTID AND T36.CUSTEMAILTYPECODE = 'OFFICE'
				LEFT JOIN QUALIFICATION T37 ON T1.QUALIFICATION = T37.CODE 
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#4876.502_post" author="Poojitha.m" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies('plf','customers_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#61.1" author="rahul.r">
		<sql>
			<![CDATA[
				DELETE FROM REPORTFILTERFIELDS WHERE REPORTID IN (SELECT REPORTID FROM REPORTCONFIGURATION WHERE MENUITEMCODE='menu_Item_SanctionConditionsReport');
				DELETE FROM REPORTCONFIGURATION WHERE MENUITEMCODE='menu_Item_SanctionConditionsReport';

				INSERT INTO REPORTCONFIGURATION (REPORTID,REPORTNAME,REPORTHEADING,PROMPTREQUIRED,REPORTJASPERNAME,DATASOURCENAME,SHOWTEMPLIBRARY,MENUITEMCODE,VERSION,LASTMNTBY,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID,LASTMNTON,ALWMULTIFORMAT,WHERECONDITION,SCHEDULEREQ) VALUES ((SELECT MAX(REPORTID)+1 from REPORTCONFIGURATION),'Excel:Sanction Conditions Report','Sanction Conditions Report',1,'SanctionConditionsReport','dataSource',1,'menu_Item_SanctionConditionsReport',1,1008,null,null,null,null,null,null,0,current_timestamp,0,1,0);
				INSERT INTO REPORTFILTERFIELDS (REPORTID,FIELDID,FIELDNAME,FIELDTYPE,FIELDLABEL,FIELDDBNAME,APPUTILMETHODNAME,MODULENAME,LOVHIDDENFIELDMETHOD,LOVTEXTFIELDMETHOD,MULTISELECTSEARCH,FIELDLENGTH,FIELDMAXVALUE,FIELDMINVALUE,SEQORDER,MANDATORY,FIELDCONSTRAINT,FIELDERRORMESSAGE,WHERECONDITION,STATICVALUE,FIELDWIDTH,FILTERREQUIRED,DEFAULTFILTER,VERSION,LASTMNTBY,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID,LASTMNTON,FILTERFILEDS) values ((select reportid from REPORTCONFIGURATION where menuitemcode='menu_Item_SanctionConditionsReport'),2,'FinReference','LOVSEARCH','Loan Reference','fm.finreference',null,'FinanceMainView','getFinReference','getFinReference',1,0,0,0,2,0,' ',' ',' ',' ',250,0,'=',1,1000,'Approved',null,null,null,null,null,0,current_timestamp,null);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#61.2" author="rahul.r">
		<sql>
			<![CDATA[
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_SanctionConditionsReport');
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_SanctionConditionsReport';
				
				INSERT INTO SECRIGHTS VALUES((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_SanctionConditionsReport','MENU',0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1528.43" author="Sravani.s">
		<sql>
			<![CDATA[
				UPDATE JOB_DETAILS SET CRON_EXPRESSION = '0 0/2 * 1/1 * ? *', EXECUTION_RETENTION_DAYS = 1 WHERE JOBKEY = 'EXCESS_TRANSFER_JOB';
				UPDATE JOB_DETAILS SET CRON_EXPRESSION = '0 0/2 * 1/1 * ? *', EXECUTION_RETENTION_DAYS = 1 WHERE JOBKEY = 'HOLD_REFUND_JOB';
				UPDATE JOB_DETAILS SET CRON_EXPRESSION = '0 0/2 * 1/1 * ? *', EXECUTION_RETENTION_DAYS = 1 WHERE JOBKEY = 'REPRESENTMENT_JOB';
				UPDATE JOB_DETAILS SET CRON_EXPRESSION = '0 0/2 * 1/1 * ? *', EXECUTION_RETENTION_DAYS = 1 WHERE JOBKEY = 'MANDATE_JOB';
				UPDATE JOB_DETAILS SET CRON_EXPRESSION = '0 0/2 * 1/1 * ? *', EXECUTION_RETENTION_DAYS = 1 WHERE JOBKEY = 'FATE_CORRECTION_JOB';
				UPDATE JOB_DETAILS SET CRON_EXPRESSION = '0 0/2 * 1/1 * ? *', EXECUTION_RETENTION_DAYS = 1 WHERE JOBKEY = 'PAY_INS_JOB';
				UPDATE JOB_DETAILS SET CRON_EXPRESSION = '0 0/2 * 1/1 * ? *', EXECUTION_RETENTION_DAYS = 1 WHERE JOBKEY = 'LPP_JOB';
				UPDATE JOB_DETAILS SET CRON_EXPRESSION = '0 0/2 * 1/1 * ? *', EXECUTION_RETENTION_DAYS = 1 WHERE JOBKEY = 'CHEQUE_JOB';
				UPDATE JOB_DETAILS SET CRON_EXPRESSION = '0 0/2 * 1/1 * ? *', EXECUTION_RETENTION_DAYS = 1 WHERE JOBKEY = 'CROSSLOAN_KNOCKOFF_JOB';
				UPDATE JOB_DETAILS SET CRON_EXPRESSION = '0 0/2 * 1/1 * ? *', EXECUTION_RETENTION_DAYS = 1 WHERE JOBKEY = 'MANUAL_KNOCKOFF_JOB';
				UPDATE JOB_DETAILS SET CRON_EXPRESSION = '0 0/2 * 1/1 * ? *', EXECUTION_RETENTION_DAYS = 1 WHERE JOBKEY = 'KYC_DETAILS_JOB';
				UPDATE JOB_DETAILS SET CRON_EXPRESSION = '0 0/2 * 1/1 * ? *', EXECUTION_RETENTION_DAYS = 1 WHERE JOBKEY = 'HOST_GL_DETAILS_JOB';
				UPDATE JOB_DETAILS SET CRON_EXPRESSION = '0 0/2 * 1/1 * ? *', EXECUTION_RETENTION_DAYS = 1 WHERE JOBKEY = 'MIS_POST_DETAILS_JOB';
				UPDATE JOB_DETAILS SET CRON_EXPRESSION = '0 0/2 * 1/1 * ? *', EXECUTION_RETENTION_DAYS = 1 WHERE JOBKEY = 'FIN_CAN_DETAILS_JOB';
				UPDATE JOB_DETAILS SET CRON_EXPRESSION = '0 0/2 * 1/1 * ? *', EXECUTION_RETENTION_DAYS = 1 WHERE JOBKEY = 'WAIVER_DETAILS_JOB';
				UPDATE JOB_DETAILS SET CRON_EXPRESSION = '0 0/2 * 1/1 * ? *', EXECUTION_RETENTION_DAYS = 1 WHERE JOBKEY = 'LIEN_DETAILS_JOB';
				UPDATE JOB_DETAILS SET CRON_EXPRESSION = '0 0/2 * 1/1 * ? *', EXECUTION_RETENTION_DAYS = 1 WHERE JOBKEY = 'CREATE_RECEIPT_DETAILS_JOB';
				UPDATE JOB_DETAILS SET CRON_EXPRESSION = '0 0/2 * 1/1 * ? *', EXECUTION_RETENTION_DAYS = 1 WHERE JOBKEY = 'RECEIPT_STATUS_DETAILS_JOB';
				UPDATE JOB_DETAILS SET CRON_EXPRESSION = '0 0/2 * 1/1 * ? *', EXECUTION_RETENTION_DAYS = 1 WHERE JOBKEY = 'WRITE_OFF_DETAILS_JOB';
				UPDATE JOB_DETAILS SET CRON_EXPRESSION = '0 0/2 * 1/1 * ? *', EXECUTION_RETENTION_DAYS = 1 WHERE JOBKEY = 'RE_WRITE_OFF_DETAILS_JOB';
				UPDATE JOB_DETAILS SET CRON_EXPRESSION = '0 0/2 * 1/1 * ? *', EXECUTION_RETENTION_DAYS = 1 WHERE JOBKEY = 'BRANCH_DETAILS_JOB';
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1471.10" author="Mounika.M">
		<addColumn tableName="FINPFTDETAILS_SNAPSHOT">
			<column name="CurDPDString" type="varchar(2400)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1471.11" author="Mounika.M" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE FINPFTDETAILS_SNAPSHOT ADD CONSTRAINT DF_FT_SNAPSHOT_DPD_STRING DEFAULT NULL FOR CURDPDSTRING;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1471.12" author="Mounika.M" dbms="postgresql, oracle">
		<addDefaultValue tableName="FINPFTDETAILS_SNAPSHOT" columnName="CurDPDString" defaultValue="null" />
	</changeSet>

	<changeSet id="ST#1471.13" author="Mounika.M">
		<sql>
			<![CDATA[
				Update FinanceMain set FinStatus = '0' Where FinStatus = 'S';
				Update FinanceMain_Temp set FinStatus = '0' Where FinStatus = 'S';
				
				Update FinPftDetails set FinStatus = '0' Where FinStatus = 'S';
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#4876.20_01" author="Gopal.P" dbms="oracle">
		<sql>
			<![CDATA[
				MERGE INTO FINANCEMAIN  T1
				USING(SELECT FINID, LASTMNTBY, LASTMNTON FROM (
				SELECT FINID, LASTMNTBY, LASTMNTON, row_number() over(partition by FINID ORDER BY LASTMNTBY) CNT FROM ADTFINANCEMAIN)
				WHERE CNT = 1)T2
				ON (T1.FINID = T2.FINID)
				WHEN MATCHED THEN UPDATE SET T1.CREATEDBY = T2.LASTMNTBY, T1.CREATEDON = T2.LASTMNTON;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#4876.20_02" author="Gopal.P" dbms="oracle">
		<sql>
			<![CDATA[
				MERGE INTO FINANCEMAIN  T1
				USING(SELECT FINID, LASTMNTBY, LASTMNTON FROM (
				SELECT FINID, LASTMNTBY, LASTMNTON, row_number() over(partition by FINID ORDER BY LASTMNTBY) CNT FROM ADTFINANCEMAIN WHERE  RECORDSTATUS = 'Approved')
				WHERE CNT = 1)T2 ON (T1.FINID = T2.FINID)
				WHEN MATCHED THEN UPDATE SET T1.APPROVEDBY = T2.LASTMNTBY, T1.APPROVEDON = T2.LASTMNTON;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#4876.20_03" author="Gopal.P" dbms="oracle">
		<sql>
			<![CDATA[
				MERGE INTO FINANCEMAIN_TEMP  T1
				USING (SELECT FINID, LASTMNTBY, LASTMNTON FROM (
				SELECT FINID, LASTMNTBY, LASTMNTON, row_number() over(partition by FINID ORDER BY LASTMNTBY) CNT FROM ADTFINANCEMAIN)
				WHERE CNT = 1)T2 ON (T1.FINID = T2.FINID)
				WHEN MATCHED THEN UPDATE SET T1.CREATEDBY = T2.LASTMNTBY, T1.CREATEDON = T2.LASTMNTON;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#4876.20_01" author="Gopal.P" dbms="postgresql">
		<sql>
			<![CDATA[
				UPDATE FINANCEMAIN T1 SET CREATEDBY = T2.LASTMNTBY,
					CREATEDON = T2.LASTMNTON 
				FROM (SELECT T3.FINID, T3.LASTMNTBY, T3.LASTMNTON FROM (
				SELECT FINID, LASTMNTBY, LASTMNTON,row_number() over(partition by FINID ORDER BY LASTMNTBY) CNT FROM ADTFINANCEMAIN) T3
				WHERE T3.CNT = 1) T2 WHERE T1.FINID = T2.FINID;	
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#4876.20_02" author="Gopal.P" dbms="postgresql">
		<sql>
			<![CDATA[
				UPDATE FINANCEMAIN T1 SET APPROVEDBY = T2.LASTMNTBY,
					APPROVEDON = T2.LASTMNTON 
					FROM (SELECT T3.FINID, T3.LASTMNTBY, T3.LASTMNTON FROM (
				SELECT FINID, LASTMNTBY, LASTMNTON, row_number() over(partition by FINID ORDER BY LASTMNTBY) CNT FROM ADTFINANCEMAIN WHERE  RECORDSTATUS = 'Approved') T3
				WHERE T3.CNT = 1) T2 WHERE T1.FINID = T2.FINID;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#4876.20_03" author="Gopal.P" dbms="postgresql">
		<sql>
			<![CDATA[
				UPDATE FINANCEMAIN_TEMP T1 SET CREATEDBY = T2.LASTMNTBY,
					CREATEDON = T2.LASTMNTON 
					FROM (SELECT T3.FINID, T3.LASTMNTBY, T3.LASTMNTON FROM (
				SELECT FINID, LASTMNTBY, LASTMNTON, row_number() over(partition by FINID ORDER BY LASTMNTBY) CNT FROM ADTFINANCEMAIN) T3
				WHERE T3.CNT = 1) T2 WHERE T1.FINID = T2.FINID;	
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#4876.20_01" author="Gopal.P" dbms="mssql">
		<sql>
			<![CDATA[
				UPDATE T1 SET T1.CREATEDBY = T3.LASTMNTBY,
					T1.CREATEDON = T3.LASTMNTON 
				FROM FINANCEMAIN T1 
				INNER JOIN (SELECT FINID, LASTMNTBY, LASTMNTON FROM (
				SELECT FINID, LASTMNTBY, LASTMNTON, row_number() over(partition by FINID ORDER BY LASTMNTBY) CNT FROM ADTFINANCEMAIN) T2
				WHERE CNT = 1) T3 ON  T1.FINID = T3.FINID;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#4876.20_02" author="Gopal.P" dbms="mssql">
		<sql>
			<![CDATA[
				UPDATE T1 SET T1.APPROVEDBY = T3.LASTMNTBY,
					T1.APPROVEDON = T3.LASTMNTON 
				FROM FINANCEMAIN T1 
				INNER JOIN (SELECT FINID, LASTMNTBY, LASTMNTON FROM (
				SELECT FINID, LASTMNTBY, LASTMNTON, row_number() over(partition BY FINID ORDER BY LASTMNTBY) CNT FROM ADTFINANCEMAIN WHERE  RECORDSTATUS = 'Approved') T2
				WHERE CNT = 1) T3 ON  T1.FINID = T3.FINID;				
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#4876.20_03" author="Gopal.P" dbms="mssql">
		<sql>
			<![CDATA[				
				UPDATE T1 SET T1.CREATEDBY = T3.LASTMNTBY,
					T1.CREATEDON = T3.LASTMNTON 
				FROM FINANCEMAIN_TEMP T1 
				INNER JOIN (SELECT FINID, LASTMNTBY, LASTMNTON FROM (
				SELECT FINID, LASTMNTBY, LASTMNTON, row_number() over(partition by FINID ORDER BY LASTMNTBY) CNT FROM ADTFINANCEMAIN) T2
				WHERE CNT = 1) T3 ON  T1.FINID = T3.FINID;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#4876.21_01" author="Gopal.P" dbms="oracle">
		<sql>
			<![CDATA[
				MERGE INTO CUSTOMERS  T1
				USING(SELECT CUSTID, LASTMNTBY, LASTMNTON FROM (
				SELECT CUSTID, LASTMNTBY, LASTMNTON, row_number() over(partition by CUSTID ORDER BY LASTMNTBY) CNT FROM ADTCUSTOMERS)
				WHERE CNT = 1) T2
				ON (T1.CUSTID = T2.CUSTID)
				WHEN MATCHED THEN UPDATE SET T1.CREATEDBY = T2.LASTMNTBY, T1.CREATEDON = T2.LASTMNTON;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#4876.21_02" author="Gopal.P" dbms="oracle">
		<sql>
			<![CDATA[
				MERGE INTO CUSTOMERS T1
				USING(SELECT CUSTID, LASTMNTBY, LASTMNTON FROM (
				SELECT CUSTID, LASTMNTBY, LASTMNTON, row_number() over(partition by CUSTID ORDER BY LASTMNTBY) CNT FROM ADTCUSTOMERS WHERE  RECORDSTATUS = 'Approved')
				WHERE CNT = 1) T2
				ON (T1.CUSTID = T2.CUSTID)
				WHEN MATCHED THEN UPDATE SET T1.APPROVEDBY = T2.LASTMNTBY, T1.APPROVEDON = T2.LASTMNTON;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#4876.21_03" author="Gopal.P" dbms="oracle">
		<sql>
			<![CDATA[
				MERGE INTO CUSTOMERS_TEMP  T1
				USING(SELECT CUSTID, LASTMNTBY, LASTMNTON FROM (
				SELECT CUSTID, LASTMNTBY, LASTMNTON, row_number() over(partition by CUSTID ORDER BY LASTMNTBY) CNT FROM ADTCUSTOMERS)
				WHERE CNT = 1)T2
				ON (T1.CUSTID = T2.CUSTID)
				WHEN MATCHED THEN UPDATE SET T1.CREATEDBY = T2.LASTMNTBY, T1.CREATEDON = T2.LASTMNTON;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#4876.21_01" author="Gopal.P" dbms="postgresql">
		<sql>
			<![CDATA[
				UPDATE CUSTOMERS T1 SET CREATEDBY = T2.LASTMNTBY,
					CREATEDON = T2.LASTMNTON 
				FROM (SELECT T3.CUSTID, T3.LASTMNTBY, T3.LASTMNTON FROM (
				SELECT CUSTID, LASTMNTBY, LASTMNTON, row_number() over(partition by CUSTID ORDER BY LASTMNTBY) CNT FROM ADTCUSTOMERS) T3
				WHERE T3.CNT = 1) T2 WHERE T1.CUSTID = T2.CUSTID;	
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#4876.21_02" author="Gopal.P" dbms="postgresql">
		<sql>
			<![CDATA[
				UPDATE CUSTOMERS T1 SET APPROVEDBY = T2.LASTMNTBY,
					APPROVEDON = T2.LASTMNTON 
				FROM (SELECT T3.CUSTID, T3.LASTMNTBY, T3.LASTMNTON FROM (
				SELECT CUSTID, LASTMNTBY, LASTMNTON, row_number() over(partition by CUSTID ORDER BY LASTMNTBY) CNT FROM ADTCUSTOMERS WHERE  RECORDSTATUS = 'Approved') T3 
				WHERE T3.CNT = 1) T2 WHERE T1.CUSTID = T2.CUSTID;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#4876.21_03" author="Gopal.P" dbms="postgresql">
		<sql>
			<![CDATA[
				UPDATE CUSTOMERS_TEMP T1 SET CREATEDBY = T2.LASTMNTBY,
					CREATEDON = T2.LASTMNTON 
				FROM (SELECT T3.CUSTID, T3.LASTMNTBY, T3.LASTMNTON FROM (
				SELECT CUSTID, LASTMNTBY, LASTMNTON, row_number() over(partition BY CUSTID ORDER BY LASTMNTBY) CNT FROM ADTCUSTOMERS) T3
				WHERE T3.CNT = 1) T2 WHERE T1.CUSTID = T2.CUSTID;	
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#4876.21_01" author="Gopal.P" dbms="mssql">
		<sql>
			<![CDATA[
				UPDATE T1 SET T1.CREATEDBY = T3.LASTMNTBY,
					T1.CREATEDON = T3.LASTMNTON 
				FROM CUSTOMERS T1 
				INNER JOIN (SELECT CUSTID, LASTMNTBY, LASTMNTON FROM (
				SELECT CUSTID, LASTMNTBY, LASTMNTON, row_number() over(partition by CUSTID ORDER BY LASTMNTBY) CNT FROM ADTCUSTOMERS) T2
				WHERE CNT = 1) T3 ON  T1.CUSTID = T3.CUSTID;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#4876.21_02" author="Gopal.P" dbms="mssql">
		<sql>
			<![CDATA[
				UPDATE T1 SET T1.APPROVEDBY = T3.LASTMNTBY,
					T1.APPROVEDON = T3.LASTMNTON 
				FROM CUSTOMERS T1 
				INNER JOIN (SELECT CUSTID, LASTMNTBY, LASTMNTON FROM (
				SELECT CUSTID, LASTMNTBY, LASTMNTON, row_number() over(partition by CUSTID ORDER BY LASTMNTBY) CNT FROM ADTCUSTOMERS WHERE  RECORDSTATUS = 'Approved') T2
				WHERE CNT = 1) T3 ON T1.CUSTID = T3.CUSTID;				
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#4876.21_03" author="Gopal.P" dbms="mssql">
		<sql>
			<![CDATA[	
				UPDATE T1 SET T1.CREATEDBY = T3.LASTMNTBY,
					T1.CREATEDON = T3.LASTMNTON 
				FROM CUSTOMERS_TEMP T1 
				INNER JOIN (SELECT CUSTID, LASTMNTBY, LASTMNTON FROM (
				SELECT CUSTID, LASTMNTBY, LASTMNTON, row_number() over(partition by CUSTID ORDER BY LASTMNTBY) CNT FROM ADTCUSTOMERS) T2
				WHERE CNT = 1) T3 ON  T1.CUSTID = T3.CUSTID;
			]]>
		</sql>
	</changeSet>

	<changeSet id="PSD#223989" author="sailkrishna.b">
		<sql>
			 <![CDATA[
	       			DELETE  FROM CategoryWiseEvents where AeEventCode='ADVDUE' and CategoryCode ='C';
					DELETE  FROM CategoryWiseEvents where AeEventCode='ADVDUE' and CategoryCode ='F';
					DELETE  FROM CategoryWiseEvents where AeEventCode='ADVDUE' and CategoryCode ='O';
					DELETE  FROM CategoryWiseEvents where AeEventCode='ADVDUE' and CategoryCode ='S';
			    
					INSERT INTO CategoryWiseEvents (AEEventCode, CategoryCode, Active, Mandatory, SeqOrder) VALUES ('ADVDUE', 'C', 1, 0, (select max(SeqOrder)+1 from CategoryWiseEvents));
					INSERT INTO CategoryWiseEvents (AEEventCode, CategoryCode, Active, Mandatory, SeqOrder) VALUES ('ADVDUE', 'F', 1, 0, (select max(SeqOrder)+2 from CategoryWiseEvents));
					INSERT INTO CategoryWiseEvents (AEEventCode, CategoryCode, Active, Mandatory, SeqOrder) VALUES ('ADVDUE', 'O', 1, 0, (select max(SeqOrder)+3 from CategoryWiseEvents));
					INSERT INTO CategoryWiseEvents (AEEventCode, CategoryCode, Active, Mandatory, SeqOrder) VALUES ('ADVDUE', 'S', 1, 0, (select max(SeqOrder)+4 from CategoryWiseEvents));
			    ]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1528.44" author="Sravani.S">
		<addColumn tableName="CROSS_LOAN_KNOCKOFF_UPLOAD">
			<column name="RecordSeq" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1528.44.1" author="Sravani.S">
		<sql>
			<![CDATA[	
				UPDATE CROSS_LOAN_KNOCKOFF_UPLOAD SET RECORDSEQ = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1528.44.2" author="Sravani.S">
		<addNotNullConstraint tableName="CROSS_LOAN_KNOCKOFF_UPLOAD" columnName="RecordSeq"
			columnDataType="bigint" />
	</changeSet>

	<changeSet id="ST#1528.44.3" author="Sravani.S" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE CROSS_LOAN_KNOCKOFF_UPLOAD ADD CONSTRAINT DF_CK_KO_UPLOAD_RECORDSEQ DEFAULT 0 FOR RECORDSEQ;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1528.44.3" author="Sravani.S" dbms="postgresql, oracle">
		<addDefaultValue tableName="CROSS_LOAN_KNOCKOFF_UPLOAD" columnName="RecordSeq" defaultValue="0" />
	</changeSet>
	
	<changeSet id="ST#1528.45.1" author="Sravani.S" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE CROSS_LOAN_KNOCKOFF DROP constraint DF_CK_KO_RECORDSEQ  ;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1528.45" author="Sravani.S">
		<dropColumn tableName="CROSS_LOAN_KNOCKOFF" columnName="RecordSeq" />
	</changeSet>

	<changeSet id="ST#1528.46" author="gopal.p">
		<comment>UPLOAD PATH value need to change as per client configuration</comment>
		<sql>
			<![CDATA[
				UPDATE DATA_ENGINE_CONFIG SET UPLOADPATH = '\\pennantsrv02\File_Sharing\Projects\CORE\Uploads' WHERE NAME in (
					  'RE_PRESENTMENT_UPLOAD'
					, 'HOLD_REFUND_UPLOAD'
					, 'PAYINS_REFUND_UPLOAD'
					, 'MANDATES_UPLOAD'
					, 'FATE_CORRECTION_UPLOAD'
					, 'CHEQUE_UPLOAD'
					, 'LPP_UPLOAD'
					, 'EXCESS_TRANSFER_UPLOAD'
					, 'MANUAL_KNOCKOFF_UPLOAD'
					, 'CROSS_LOAN_KNOCKOFF_UPLOAD'
					, 'CUSTOMER_KYC_DETAILS_UPLOAD'
					, 'HOST_GL_UPLOAD'
					, 'MISCELLANEOUS_POSTING_UPLOAD'
					, 'LOAN_CANCEL_UPLOAD'
					, 'FEE_WAIVER_UPLOAD'
					, 'LIEN_UPLOAD'
					, 'CREATE_RECEIPT_UPLOAD'
					, 'RECEIPT_STATUS_UPLOAD'
					, 'WRITE_OFF_UPLOAD'
					, 'REV_WRITE_OFF_UPLOAD'
					, 'BRANCH_CHANGE_UPLOAD'
					);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1469.25.14" author="nagavamsi.p">
		<addColumn tableName="Loan_Provisions">
			<column name="EffManualAssetClass" type="varchar(8)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1469.25.15" author="nagavamsi.p">
		<addColumn tableName="Loan_Provisions_Temp">
			<column name="EffManualAssetClass" type="varchar(8)" />
		</addColumn>
	</changeSet>


	<changeSet id="ST#1469.25.16" author="nagavamsi.p">
		<addColumn tableName="Loan_Provisions">
			<column name="NewRegProvisionPer" type="decimal(5,2)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1469.25.17" author="nagavamsi.p">
		<addColumn tableName="Loan_Provisions">
			<column name="NewRegProvisionAmt" type="decimal(18,0)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1469.25.18" author="nagavamsi.p">
		<addColumn tableName="Loan_Provisions">
			<column name="NewIntProvisionPer" type="decimal(5,2)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1469.25.19" author="nagavamsi.p">
		<addColumn tableName="Loan_Provisions">
			<column name="NewIntProvisionAmt" type="decimal(18,0)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1469.25.20" author="nagavamsi.p">
		<addColumn tableName="Loan_Provisions_Temp">
			<column name="NewRegProvisionPer" type="decimal(5,2)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1469.25.21" author="nagavamsi.p">
		<addColumn tableName="Loan_Provisions_Temp">
			<column name="NewRegProvisionAmt" type="decimal(18,0)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1469.25.22" author="nagavamsi.p">
		<addColumn tableName="Loan_Provisions_Temp">
			<column name="NewIntProvisionPer" type="decimal(5,2)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1469.25.23" author="nagavamsi.p">
		<addColumn tableName="Loan_Provisions_Temp">
			<column name="NewIntProvisionAmt" type="decimal(18,0)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1469.25.24" author="nagavamsi.p">
		<addColumn tableName="Loan_Provisions">
			<column name="OverRideProvision" type="smallint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1469.25.25" author="nagavamsi.p">
		<addColumn tableName="Loan_Provisions_Temp">
			<column name="OverRideProvision" type="smallint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1469.25.26" author="nagavamsi.p">
		<sql>
			<![CDATA[
				UPDATE Loan_Provisions SET OverRideProvision = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1469.25.27" author="nagavamsi.p">
		<sql>
			<![CDATA[
				UPDATE Loan_Provisions_Temp SET OverRideProvision = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1469.25.28" author="nagavamsi.p">
		<addColumn tableName="Loan_Provisions">
			<column name="EffManualAssetSubClass" type="varchar(8)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1469.25.29" author="nagavamsi.p">
		<addColumn tableName="Loan_Provisions_Temp">
			<column name="EffManualAssetSubClass" type="varchar(8)" />
		</addColumn>
	</changeSet>
	
	<changeSet id="PSD#225974_pre" author="Gireesh.G" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'wiffinancemain_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="PSD#225974" author="Gireesh.G">
		<createView viewName="WIFFINANCEMAIN_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINID,
					T1.FINREFERENCE,
					T1.NUMBEROFTERMS,
					T1.GRCPERIODENDDATE,
					T1.ALLOWGRCPERIOD,
					T1.GRACEBASERATE,
					T1.GRACESPECIALRATE,
					T1.GRCPFTRATE,
					T1.GRCPFTFRQ,
					T1.NEXTGRCPFTDATE,
					T1.ALLOWGRCPFTRVW,
					T1.GRCPFTRVWFRQ,
					T1.NEXTGRCPFTRVWDATE,
					T1.ALLOWGRCCPZ,
					T1.GRCCPZFRQ,
					T1.NEXTGRCCPZDATE,
					T1.REPAYBASERATE,
					T1.REPAYSPECIALRATE,
					T1.REPAYPROFITRATE,
					T1.REPAYFRQ,
					T1.NEXTREPAYDATE,
					T1.REPAYPFTFRQ,
					T1.NEXTREPAYPFTDATE,
					T1.ALLOWREPAYRVW,
					T1.REPAYRVWFRQ,
					T1.NEXTREPAYRVWDATE,
					T1.ALLOWREPAYCPZ,
					T1.REPAYCPZFRQ,
					T1.NEXTREPAYCPZDATE,
					T1.MATURITYDATE,
					T1.CPZATGRACEEND,
					T1.DOWNPAYMENT,
					T1.GRACEFLATAMOUNT,
					T1.REQREPAYAMOUNT,
					T1.TOTALPROFIT,
					T1.TOTALCPZ,
					T1.TOTALGROSSPFT,
					T1.TOTALGRACEPFT,
					T1.TOTALGRACECPZ,
					T1.GRCRATEBASIS,
					T1.REPAYRATEBASIS,
					T1.FINTYPE,
					T1.FINREMARKS,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.REQMATURITY,
					T1.CALTERMS,
					T1.CALMATURITY,
					T1.FIRSTREPAY,
					T1.LASTREPAY,
					T1.FINSTARTDATE,
					T1.FINAMOUNT,
					T1.FINREPAYMENTAMOUNT,
					T1.CUSTID,
					T1.DEFFERMENTS,
					T1.PLANDEFERCOUNT,
					T1.FINISACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T15.CUSTCIF LOVDESCCUSTCIF,
					T7.FINTYPEDESC LOVDESCFINTYPENAME,
					T1.FINBRANCH,
					T1.FINSOURCEID,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.ALLOWEDDEFFRQCHANGE,
					T1.AVAILEDDEFFRQCHANGE,
					T7.FINMAXAMOUNT LOVDESCFINMAXAMT,
					T7.FINMINAMOUNT LOVDESCFINMINAMOUNT,
					T7.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
					T1.MINDOWNPAYPERC,
					T7.FINISDWPAYREQUIRED LOVDESCDWNPAYREQ,
					T1.RECALTYPE,
					T1.FINASSETVALUE,
					T7.FINMAXDIFFERMENT LOVDESCFINMAXDIFFERMENT,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.LASTREPAYRVWDATE,
					T1.LASTREPAYCPZDATE,
					T1.ALLOWGRCREPAY,
					T1.GRCSCHDMTHD,
					T1.REPAYMARGIN,
					T1.GRCMARGIN,
					T1.FINCOMMITMENTREF,
					T1.FINCURRASSETVALUE,
					T1.FINCONTRACTDATE,
					T7.FINRVWRATEAPPLFOR,
					T1.TOTALREPAYAMT,
					T1.CLOSINGSTATUS,
					T1.FINAPPROVEDDATE,
					T1.FINREPAYPFTONFRQ,
					T1.ANUALIZEDPERCRATE,
					T1.EFFECTIVERATEOFRETURN,
					T1.DOWNPAYBANK,
					T1.DOWNPAYSUPL,
					T7.FINDIVISION LOVDESCFINDIVISIONNAME,
					T1.GRACETERMS,
					T14.FACILITYTYPE,
					T15.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
					T16.BRANCHDESC LOVDESCFINBRANCHNAME,
					T1.TOTALGROSSGRCPFT,
					T1.GRCPROFITDAYSBASIS,
					T1.STEPFINANCE,
					T1.STEPTYPE,
					T1.STEPPOLICY,
					T1.ALWMANUALSTEPS,
					T1.NOOFSTEPS,
					T1.LINKEDFINREF,
					T7.PRODUCT LOVDESCFINPRODUCT,
					T1.GRCMINRATE,
					T1.GRCMAXRATE,
					T1.RPYMINRATE,
					T1.RPYMAXRATE,
					T1.MANUALSCHEDULE,
					T1.TDSAPPLICABLE,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.CALROUNDINGMODE,
					T1.ALWMULTIDISB,
					T1.BPIAMOUNT,
					T1.DEDUCTFEEDISB,
					T1.FEECHARGEAMT,
					T1.RVWRATEAPPLFOR,
					T1.SCHCALONRVW,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.FINCATEGORY,
					T1.PRODUCTCATEGORY,
					T1.ROUNDINGTARGET,
					T1.GRCMAXAMOUNT,
					T1.ADVANCEEMI,
					T1.ADVEMITERMS,
					T1.BPIPFTDAYSBASIS,
					T1.FIXEDTENORRATE,
					T1.FIXEDRATETENOR,
					T1.GRCADVTYPE,
					T1.GRCADVTERMS,
					T1.ADVTYPE,
					T1.ADVTERMS,
					T1.ADVSTAGE,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING,
					T1.APPLIEDLOANAMT,
					T1.FINISRATERVWATGRCEND,
					T1.CBAMOUNT,
					T1.SVAMOUNT,
					T1.SANBSDSCHDLE,
					T1.PROMOTIONSEQID,
					T1.ALWGRCADJ,
					T1.PLANEMIHALWINGRACE,
					T1.ENDGRCPERIODAFTRFULLDISB,
					T1.AUTOINCGRCENDDATE,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS,
					T1.MANUALSCHDTYPE,
					T1.ISRA,
					T1.OVERDRAFTTXNCHRGREQ,
					T1.OVERDRAFTCALCCHRG,
					T1.OVERDRAFTCHRGAMTORPERC,
					T1.OVERDRAFTCHRCALON,
					T1.CREATEDBY,
				    T1.CREATEDON,
				    T1.APPROVEDBY,
					T1.APPROVEDON
				FROM WIFFINANCEMAIN_TEMP T1
				LEFT JOIN WIFINDICATIVETERMDETAIL_TEMP T14 ON T14.FINREFERENCE = T1.FINREFERENCE
				LEFT JOIN CUSTOMERS T15 ON T15.CUSTID = T1.CUSTID
				JOIN RMTFINANCETYPES T7 ON T1.FINTYPE = T7.FINTYPE
				LEFT JOIN RMTBRANCHES T16 ON T1.FINBRANCH = T16.BRANCHCODE
				UNION ALL
				SELECT T1.FINID,
					T1.FINREFERENCE,
					T1.NUMBEROFTERMS,
					T1.GRCPERIODENDDATE,
					T1.ALLOWGRCPERIOD,
					T1.GRACEBASERATE,
					T1.GRACESPECIALRATE,
					T1.GRCPFTRATE,
					T1.GRCPFTFRQ,
					T1.NEXTGRCPFTDATE,
					T1.ALLOWGRCPFTRVW,
					T1.GRCPFTRVWFRQ,
					T1.NEXTGRCPFTRVWDATE,
					T1.ALLOWGRCCPZ,
					T1.GRCCPZFRQ,
					T1.NEXTGRCCPZDATE,
					T1.REPAYBASERATE,
					T1.REPAYSPECIALRATE,
					T1.REPAYPROFITRATE,
					T1.REPAYFRQ,
					T1.NEXTREPAYDATE,
					T1.REPAYPFTFRQ,
					T1.NEXTREPAYPFTDATE,
					T1.ALLOWREPAYRVW,
					T1.REPAYRVWFRQ,
					T1.NEXTREPAYRVWDATE,
					T1.ALLOWREPAYCPZ,
					T1.REPAYCPZFRQ,
					T1.NEXTREPAYCPZDATE,
					T1.MATURITYDATE,
					T1.CPZATGRACEEND,
					T1.DOWNPAYMENT,
					T1.GRACEFLATAMOUNT,
					T1.REQREPAYAMOUNT,
					T1.TOTALPROFIT,
					T1.TOTALCPZ,
					T1.TOTALGROSSPFT,
					T1.TOTALGRACEPFT,
					T1.TOTALGRACECPZ,
					T1.GRCRATEBASIS,
					T1.REPAYRATEBASIS,
					T1.FINTYPE,
					T1.FINREMARKS,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.REQMATURITY,
					T1.CALTERMS,
					T1.CALMATURITY,
					T1.FIRSTREPAY,
					T1.LASTREPAY,
					T1.FINSTARTDATE,
					T1.FINAMOUNT,
					T1.FINREPAYMENTAMOUNT,
					T1.CUSTID,
					T1.DEFFERMENTS,
					T1.PLANDEFERCOUNT,
					T1.FINISACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T15.CUSTCIF LOVDESCCUSTCIF,
					T7.FINTYPEDESC LOVDESCFINTYPENAME,
					T1.FINBRANCH,
					T1.FINSOURCEID,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.ALLOWEDDEFFRQCHANGE,
					T1.AVAILEDDEFFRQCHANGE,
					T7.FINMAXAMOUNT LOVDESCFINMAXAMT,
					T7.FINMINAMOUNT LOVDESCFINMINAMOUNT,
					T7.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
					T1.MINDOWNPAYPERC,
					T7.FINISDWPAYREQUIRED LOVDESCDWNPAYREQ,
					T1.RECALTYPE,
					T1.FINASSETVALUE,
					T7.FINMAXDIFFERMENT LOVDESCFINMAXDIFFERMENT,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.LASTREPAYRVWDATE,
					T1.LASTREPAYCPZDATE,
					T1.ALLOWGRCREPAY,
					T1.GRCSCHDMTHD,
					T1.REPAYMARGIN,
					T1.GRCMARGIN,
					T1.FINCOMMITMENTREF,
					T1.FINCURRASSETVALUE,
					T1.FINCONTRACTDATE,
					T7.FINRVWRATEAPPLFOR,
					T1.TOTALREPAYAMT,
					T1.CLOSINGSTATUS,
					T1.FINAPPROVEDDATE,
					T1.FINREPAYPFTONFRQ,
					T1.ANUALIZEDPERCRATE,
					T1.EFFECTIVERATEOFRETURN,
					T1.DOWNPAYBANK,
					T1.DOWNPAYSUPL,
					T7.FINDIVISION LOVDESCFINDIVISIONNAME,
					T1.GRACETERMS,
					T14.FACILITYTYPE,
					T15.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
					T16.BRANCHDESC LOVDESCFINBRANCHNAME,
					T1.TOTALGROSSGRCPFT,
					T1.GRCPROFITDAYSBASIS,
					T1.STEPFINANCE,
					T1.STEPTYPE,
					T1.STEPPOLICY,
					T1.ALWMANUALSTEPS,
					T1.NOOFSTEPS,
					T1.LINKEDFINREF,
					T7.PRODUCT LOVDESCFINPRODUCT,
					T1.GRCMINRATE,
					T1.GRCMAXRATE,
					T1.RPYMINRATE,
					T1.RPYMAXRATE,
					T1.MANUALSCHEDULE,
					T1.TDSAPPLICABLE,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.CALROUNDINGMODE,
					T1.ALWMULTIDISB,
					T1.BPIAMOUNT,
					T1.DEDUCTFEEDISB,
					T1.FEECHARGEAMT,
					T1.RVWRATEAPPLFOR,
					T1.SCHCALONRVW,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.FINCATEGORY,
					T1.PRODUCTCATEGORY,
					T1.ROUNDINGTARGET,
					T1.GRCMAXAMOUNT,
					T1.ADVANCEEMI,
					T1.ADVEMITERMS,
					T1.BPIPFTDAYSBASIS,
					T1.FIXEDTENORRATE,
					T1.FIXEDRATETENOR,
					T1.GRCADVTYPE,
					T1.GRCADVTERMS,
					T1.ADVTYPE,
					T1.ADVTERMS,
					T1.ADVSTAGE,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING,
					T1.APPLIEDLOANAMT,
					T1.FINISRATERVWATGRCEND,
					T1.CBAMOUNT,
					T1.SVAMOUNT,
					T1.SANBSDSCHDLE,
					T1.PROMOTIONSEQID,
					T1.ALWGRCADJ,
					T1.PLANEMIHALWINGRACE,
					T1.ENDGRCPERIODAFTRFULLDISB,
					T1.AUTOINCGRCENDDATE,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS,
					T1.MANUALSCHDTYPE,
					T1.ISRA,
					T1.OVERDRAFTTXNCHRGREQ,
					T1.OVERDRAFTCALCCHRG,
					T1.OVERDRAFTCHRGAMTORPERC,
					T1.OVERDRAFTCHRCALON,
					T1.CREATEDBY,
				    T1.CREATEDON,
				    T1.APPROVEDBY,
					T1.APPROVEDON
				FROM WIFFINANCEMAIN T1
				LEFT JOIN WIFINDICATIVETERMDETAIL_TEMP T14 ON T14.FINREFERENCE = T1.FINREFERENCE
				LEFT JOIN CUSTOMERS T15 ON T15.CUSTID = T1.CUSTID
				JOIN RMTFINANCETYPES T7 ON T1.FINTYPE = T7.FINTYPE
				LEFT JOIN RMTBRANCHES T16 ON T1.FINBRANCH = T16.BRANCHCODE
				WHERE NOT EXISTS (SELECT 1 FROM WIFFINANCEMAIN_TEMP WHERE WIFFINANCEMAIN_TEMP.FINREFERENCE = T1.FINREFERENCE)
			]]>
		</createView>
	</changeSet>

	<changeSet id="PSD#225974_post" author="Gireesh.G" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'wiffinancemain_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="PSD#225974.1_pre" author="Gireesh.G" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'wiffinancemain_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="PSD#225974.1" author="Gireesh.G">
		<createView viewName="WIFFINANCEMAIN_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINID,
					T1.FINREFERENCE,
					T1.NUMBEROFTERMS,
					T1.GRCPERIODENDDATE,
					T1.ALLOWGRCPERIOD,
					T1.GRACEBASERATE,
					T1.GRACESPECIALRATE,
					T1.GRCPFTRATE,
					T1.GRCPFTFRQ,
					T1.NEXTGRCPFTDATE,
					T1.ALLOWGRCPFTRVW,
					T1.GRCPFTRVWFRQ,
					T1.NEXTGRCPFTRVWDATE,
					T1.ALLOWGRCCPZ,
					T1.GRCCPZFRQ,
					T1.NEXTGRCCPZDATE,
					T1.REPAYBASERATE,
					T1.REPAYSPECIALRATE,
					T1.REPAYPROFITRATE,
					T1.REPAYFRQ,
					T1.NEXTREPAYDATE,
					T1.REPAYPFTFRQ,
					T1.NEXTREPAYPFTDATE,
					T1.ALLOWREPAYRVW,
					T1.REPAYRVWFRQ,
					T1.NEXTREPAYRVWDATE,
					T1.ALLOWREPAYCPZ,
					T1.REPAYCPZFRQ,
					T1.NEXTREPAYCPZDATE,
					T1.MATURITYDATE,
					T1.CPZATGRACEEND,
					T1.DOWNPAYMENT,
					T1.GRACEFLATAMOUNT,
					T1.REQREPAYAMOUNT,
					T1.TOTALPROFIT,
					T1.TOTALCPZ,
					T1.TOTALGROSSPFT,
					T1.TOTALGRACEPFT,
					T1.TOTALGRACECPZ,
					T1.GRCRATEBASIS,
					T1.REPAYRATEBASIS,
					T1.FINTYPE,
					T1.FINREMARKS,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.REQMATURITY,
					T1.CALTERMS,
					T1.CALMATURITY,
					T1.FIRSTREPAY,
					T1.LASTREPAY,
					T1.FINSTARTDATE,
					T1.FINAMOUNT,
					T1.FINREPAYMENTAMOUNT,
					T1.CUSTID,
					T1.DEFFERMENTS,
					T1.PLANDEFERCOUNT,
					T1.FINISACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T15.CUSTCIF LOVDESCCUSTCIF,
					T7.FINTYPEDESC LOVDESCFINTYPENAME,
					T1.FINBRANCH,
					T1.FINSOURCEID,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.ALLOWEDDEFFRQCHANGE,
					T1.AVAILEDDEFFRQCHANGE,
					T7.FINMAXAMOUNT LOVDESCFINMAXAMT,
					T7.FINMINAMOUNT LOVDESCFINMINAMOUNT,
					T7.FINISALWDIFFERMENT  LOVDESCFINALWDEFERMENT,
					T1.MINDOWNPAYPERC,
					T7.FINISDWPAYREQUIRED LOVDESCDWNPAYREQ,
					T1.RECALTYPE,
					T1.FINASSETVALUE,
					T7.FINMAXDIFFERMENT LOVDESCFINMAXDIFFERMENT,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.LASTREPAYRVWDATE,
					T1.LASTREPAYCPZDATE,
					T1.ALLOWGRCREPAY,
					T1.GRCSCHDMTHD,
					T1.REPAYMARGIN,
					T1.GRCMARGIN,
					T1.FINCOMMITMENTREF,
					T1.FINCURRASSETVALUE,
					T1.FINCONTRACTDATE,
					T7.FINRVWRATEAPPLFOR,
					T1.TOTALREPAYAMT,
					T1.CLOSINGSTATUS,
					T1.FINAPPROVEDDATE,
					T1.FINREPAYPFTONFRQ,
					T1.ANUALIZEDPERCRATE,
					T1.EFFECTIVERATEOFRETURN,
					T1.DOWNPAYBANK,
					T1.DOWNPAYSUPL,
					T7.FINDIVISION LOVDESCFINDIVISIONNAME,
					T1.GRACETERMS,
					T14.FACILITYTYPE,
					T15.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
					T16.BRANCHDESC LOVDESCFINBRANCHNAME,
					T1.TOTALGROSSGRCPFT,
					T1.GRCPROFITDAYSBASIS,
					T1.STEPFINANCE,
					T1.STEPTYPE,
					T1.STEPPOLICY,
					T1.ALWMANUALSTEPS,
					T1.NOOFSTEPS,
					T1.LINKEDFINREF,
					T7.PRODUCT LOVDESCFINPRODUCT,
					T1.GRCMINRATE,
					T1.GRCMAXRATE,
					T1.RPYMINRATE,
					T1.RPYMAXRATE,
					T1.MANUALSCHEDULE,
					T1.TDSAPPLICABLE,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.CALROUNDINGMODE,
					T1.ALWMULTIDISB,
					T1.BPIAMOUNT,
					T1.DEDUCTFEEDISB,
					T1.FEECHARGEAMT,
					T1.RVWRATEAPPLFOR,
					T1.SCHCALONRVW,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.ROUNDINGTARGET,
					T1.GRCMAXAMOUNT,
					T1.ADVANCEEMI,
					T1.ADVEMITERMS,
					T1.BPIPFTDAYSBASIS BPIRATEBASIS,
					T1.GRCADVTYPE,
					T1.GRCADVTERMS,
					T1.ADVTYPE,
					T1.ADVTERMS,
					T1.ADVSTAGE,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING,
					T1.APPLIEDLOANAMT,
					T1.FINISRATERVWATGRCEND,
					T1.CBAMOUNT,
					T1.SVAMOUNT,
					T1.SANBSDSCHDLE,
					T1.PROMOTIONSEQID,
					T1.ALWGRCADJ,
					T1.PLANEMIHALWINGRACE,
					T1.ENDGRCPERIODAFTRFULLDISB,
					T1.AUTOINCGRCENDDATE,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS,
					T1.MANUALSCHDTYPE,
					T1.ISRA,
					T1.OVERDRAFTTXNCHRGREQ,
					T1.OVERDRAFTCALCCHRG,
					T1.OVERDRAFTCHRGAMTORPERC,
					T1.OVERDRAFTCHRCALON,
					T1.CREATEDBY,
				    T1.CREATEDON,
				    T1.APPROVEDBY,
					T1.APPROVEDON
				FROM WIFFINANCEMAIN T1
				LEFT JOIN WIFINDICATIVETERMDETAIL_TEMP T14 ON T14.FINREFERENCE = T1.FINREFERENCE
				LEFT JOIN CUSTOMERS T15 ON T15.CUSTID = T1.CUSTID
				INNER JOIN RMTFINANCETYPES T7 ON T1.FINTYPE = T7.FINTYPE
				LEFT JOIN RMTBRANCHES T16 ON T1.FINBRANCH = T16.BRANCHCODE
			]]>
		</createView>
	</changeSet>

	<changeSet id="PSD#225974.1_post" author="Gireesh.G" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'wiffinancemain_aview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="FWV_1.1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'feewaivers_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="FWV_1.1" author="Gopal.p">
		<createView viewName="FEEWAIVERS_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT DISTINCT T1.FINID,
					T1.FINREFERENCE,
					T1.FINBRANCH,
					T1.FINTYPE,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.FINSTARTDATE,
					T1.NUMBEROFTERMS,
					T1.CUSTID,
					T1.FINAMOUNT,
					T1.MATURITYDATE,
					T1.FINREPAYMENTAMOUNT,
					T1.FINISACTIVE,
					T1.BLACKLISTED,
					T1.FEECHARGEAMT,
					T1.GRACETERMS,
					T1.ALLOWGRCPERIOD,
					T1.GRCPERIODENDDATE,
					T1.ALWMULTIDISB,
					T1.DEFFERMENTS,
					T1.ALLOWGRCPFTRVW,
					T1.ALLOWREPAYRVW,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.MIGRATEDFINANCE,
					T1.CLOSINGSTATUS,
					T1.REPAYRATEBASIS,
					T1.MANUALSCHEDULE,
					T1.FINCURRASSETVALUE,
					T1.AVAILEDUNPLANEMI,
					T1.AVAILEDREAGEH,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.DOWNPAYMENT,
					T1.PLANEMIHALW,
					T1.CALTERMS,
					T1.RATECHGANYDAY,
					T1.FINASSETVALUE,
					T2.CUSTCIF LOVDESCCUSTCIF,
					T3.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
					T3.FINDIVISION LOVDESCFINDIVISION,
					T3.FINCATEGORY LOVDESCPRODUCTCODENAME,
					T4.PRODUCTCATEGORY,
					COALESCE(T9.NOINST, 0) NOINST,
					COALESCE(T5.ROLEDESC, T10.NEXTROLECODE) LOVDESCREQUESTSTAGE,
					T10.WAIVERID,
					T10.EVENT RCDMAINTAINSTS,
					T10.NEXTROLECODE,
					T10.RECORDSTATUS,
					T10.RECORDTYPE,
					T1.VERSION,
					T1.FINCATEGORY
				FROM FEEWAIVERHEADER_TEMP T10
				JOIN FINANCEMAIN T1 ON T1.FINID = T10.FINID
				JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
				JOIN RMTFINANCETYPES T3 ON T1.FINTYPE = T3.FINTYPE
				LEFT JOIN SECROLES T5 ON T10.NEXTROLECODE = T5.ROLECD
				JOIN BMTPRODUCT T4 ON T3.FINCATEGORY = T4.PRODUCTCODE
				LEFT JOIN FINPFTDETAILS T9 ON T9.FINID = T1.FINID
				JOIN (SELECT FINID FROM MANUALADVISE WHERE ADVISETYPE = 1 AND BALANCEAMT > 0
					UNION ALL
					SELECT FINID FROM FINODDETAILS WHERE TOTPENALTYBAL > 0 OR LPIBAL > 0) T ON T.FINID = T1.FINID
					WHERE T10.EVENT = 'FEEWAIVERS'
				UNION ALL
				SELECT DISTINCT T1.FINID,
					T1.FINREFERENCE,
					T1.FINBRANCH,
					T1.FINTYPE,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.FINSTARTDATE,
					T1.NUMBEROFTERMS,
					T1.CUSTID,
					T1.FINAMOUNT,
					T1.MATURITYDATE,
					T1.FINREPAYMENTAMOUNT,
					T1.FINISACTIVE,
					T1.BLACKLISTED,
					T1.FEECHARGEAMT,
					T1.GRACETERMS,
					T1.ALLOWGRCPERIOD,
					T1.GRCPERIODENDDATE,
					T1.ALWMULTIDISB,
					T1.DEFFERMENTS,
					T1.ALLOWGRCPFTRVW,
					T1.ALLOWREPAYRVW,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.MIGRATEDFINANCE,
					T1.CLOSINGSTATUS,
					T1.REPAYRATEBASIS,
					T1.MANUALSCHEDULE,
					T1.FINCURRASSETVALUE,
					T1.AVAILEDUNPLANEMI,
					T1.AVAILEDREAGEH,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.DOWNPAYMENT,
					T1.PLANEMIHALW,
					T1.CALTERMS,
					T1.RATECHGANYDAY,
					T1.FINASSETVALUE,
					T2.CUSTCIF LOVDESCCUSTCIF,
					T3.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
					T3.FINDIVISION LOVDESCFINDIVISION,
					T3.FINCATEGORY LOVDESCPRODUCTCODENAME,
					T4.PRODUCTCATEGORY,
					COALESCE(T9.NOINST, 0) NOINST,
					NULL LOVDESCREQUESTSTAGE,
					0 WAIVERID,
					NULL RCDMAINTAINSTS,
					NULL NEXTROLECODE,
					NULL RECORDSTATUS,
					NULL RECORDTYPE,
					T1.VERSION,
					T1.FINCATEGORY
				FROM FINANCEMAIN T1
				JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
				JOIN RMTFINANCETYPES T3 ON T1.FINTYPE = T3.FINTYPE
				LEFT JOIN SECROLES T5 ON T1.NEXTROLECODE = T5.ROLECD
				JOIN BMTPRODUCT T4 ON T3.FINCATEGORY = T4.PRODUCTCODE
				LEFT JOIN FINPFTDETAILS T9 ON T1.FINID = T9.FINID
				JOIN (SELECT FINID FROM MANUALADVISE WHERE ADVISETYPE = 1 AND BALANCEAMT > 0
					UNION ALL
					SELECT FINID FROM FINODDETAILS WHERE TOTPENALTYBAL > 0 OR LPIBAL > 0) T ON T.FINID = T1.FINID
				WHERE NOT EXISTS (SELECT 1 FROM FEEWAIVERHEADER_TEMP
					WHERE FEEWAIVERHEADER_TEMP.FINID = T1.FINID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="FWV_1.1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'feewaivers_view');	
			]]>
		</sql>
	</changeSet>
	
	
	<changeSet id="ST#1561.1" author="Mounika.M">
		<createSequence sequenceName="SEQ_Service_Branches" minValue="1" maxValue="9223372036854775807"
			incrementBy="1" startValue="1" />
	</changeSet>
	
	<changeSet id="ST#1561.2" author="Mounika.M">
		<createTable tableName="Service_Branches">
			<column name="Id" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="Code" type="varchar(6)">
				<constraints nullable="false" />
			</column>
			<column name="Description" type="varchar(50)">
				<constraints nullable="false" />
			</column>
			<column name="OfcOrHouseNum" type="varchar(50)">
				<constraints nullable="false" />
			</column>
			<column name="FlatNum" type="varchar(50)" />
			<column name="Street" type="varchar(50)" />
			<column name="AddrLine1" type="varchar(50)"/>
			<column name="AddrLine2" type="varchar(50)" />
			<column name="PoBox" type="varchar(50)" />
			<column name="Country" type="varchar(2)">
				<constraints nullable="false" />
			</column>
			<column name="City" type="varchar(8)">
				<constraints nullable="false" />
			</column>
			<column name="CpProvince" type="varchar(8)">
				<constraints nullable="false" />
			</column>
			<column name="PinCodeId" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="PinCode" type="varchar(10)" />
			<column name="FolderPath" type="varchar(500)" />
			<column name="Active" type="boolean" />
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="CreatedBy" type="bigint" />
			<column name="CreatedOn" type="datetime" />
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="ApprovedBy" type="bigint" />
			<column name="ApprovedOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkFlowId" type="bigint">
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>

	<changeSet id="ST#1561.3" author="Mounika.M">
		<addPrimaryKey tableName="Service_Branches" columnNames="Id" constraintName="pk_SerBrank_ID" />
	</changeSet>

	<changeSet id="ST#1561.4" author="Mounika.M">
		<addUniqueConstraint tableName="Service_Branches" columnNames="Code"
			constraintName="UK_servBranch_code" />
	</changeSet>

	<changeSet id="ST#1561.5" author="Mounika.M">
		<addForeignKeyConstraint constraintName="fk_SB_pincodeid" referencedTableName="Pincodes"
			baseColumnNames="PincodeId" baseTableName="Service_Branches" referencedColumnNames="PincodeId" />
	</changeSet>

	<changeSet id="ST#1561.6" author="Mounika.M">
		<addForeignKeyConstraint constraintName="fk_SB_City"
			referencedTableName="RMTProvinceVSCity" baseColumnNames="City" baseTableName="Service_Branches"
			referencedColumnNames="PCCITY" />
	</changeSet>

	<changeSet id="ST#1561.7" author="Mounika.M">
		<createTable tableName="Service_Branches_Temp">
			<column name="Id" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="Code" type="varchar(6)">
				<constraints nullable="false" />
			</column>
			<column name="Description" type="varchar(50)">
				<constraints nullable="false" />
			</column>
			<column name="OfcOrHouseNum" type="varchar(50)">
				<constraints nullable="false" />
			</column>
			<column name="FlatNum" type="varchar(50)" />
			<column name="Street" type="varchar(50)" />
			<column name="AddrLine1" type="varchar(50)" />
			<column name="AddrLine2" type="varchar(50)" />
			<column name="PoBox" type="varchar(50)" />
			<column name="Country" type="varchar(2)">
				<constraints nullable="false" />
			</column>
			<column name="City" type="varchar(8)">
				<constraints nullable="false" />
			</column>
			<column name="CpProvince" type="varchar(8)">
				<constraints nullable="false" />
			</column>
			<column name="PinCodeId" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="PinCode" type="varchar(10)" />
			<column name="FolderPath" type="varchar(500)" />
			<column name="Active" type="boolean" />
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="CreatedBy" type="bigint" />
			<column name="CreatedOn" type="datetime" />
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="ApprovedBy" type="bigint" />
			<column name="ApprovedOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkFlowId" type="bigint">
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>

	<changeSet id="ST#1561.8" author="Mounika.M">
		<addPrimaryKey tableName="Service_Branches_Temp" columnNames="Id" constraintName="pk_SerBrank_Temp_ID" />
	</changeSet>

	<changeSet id="ST#1561.9" author="Mounika.M">
		<addUniqueConstraint tableName="Service_Branches_Temp" columnNames="Code"
			constraintName="UK_code_servBranch_Temp" />
	</changeSet>

	<changeSet id="ST#1561.10" author="Mounika.M">
		<addForeignKeyConstraint constraintName="fk_SBT_pincodeid" referencedTableName="Pincodes"
			baseColumnNames="PincodeId" baseTableName="Service_Branches_Temp" referencedColumnNames="PincodeId" />
	</changeSet>

	<changeSet id="ST#1561.11" author="Mounika.M">
		<addForeignKeyConstraint constraintName="fk_SBT_City"
			referencedTableName="RMTProvinceVSCity" baseColumnNames="City" baseTableName="Service_Branches_Temp"
			referencedColumnNames="PCCITY" />
	</changeSet>
	
	<changeSet id="ST#1561.12" author="Mounika.M">
		<createSequence sequenceName="SEQ_Service_Branches_LoanType" minValue="1"
			maxValue="9223372036854775807" incrementBy="1" startValue="1" />
	</changeSet>

	<changeSet id="ST#1561.13" author="Mounika.M">
		<createTable tableName="Service_Branches_LoanType">
			<column name="Id" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="HeaderId" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="FinType" type="varchar(8)">
				<constraints nullable="false" />
			</column>
			<column name="Branch" type="varchar(12)">
				<constraints nullable="false" />
			</column>
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="CreatedBy" type="bigint" />
			<column name="CreatedOn" type="datetime" />
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="ApprovedBy" type="bigint" />
			<column name="ApprovedOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkFlowId" type="bigint">
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>

	<changeSet id="ST#1561.14" author="Mounika.M">
		<addPrimaryKey tableName="Service_Branches_LoanType" columnNames="Id"
			constraintName="PK_id_servBranchLT" />
	</changeSet>

	<changeSet id="ST#1561.15" author="Mounika.M">
		<addForeignKeyConstraint constraintName="fk_SBT_id_SerBranch"
			referencedTableName="Service_Branches" baseColumnNames="HeaderId" baseTableName="Service_Branches_LoanType"
			referencedColumnNames="Id" />
	</changeSet>

	<changeSet id="ST#1561.16" author="Mounika.M">
		<addUniqueConstraint tableName="Service_Branches_LoanType" columnNames="HeaderId,FinType,Branch"
			constraintName="uk_sbt_hdrid_ft_br" />
	</changeSet>

	<changeSet id="ST#1561.17" author="Mounika.M">
		<addForeignKeyConstraint constraintName="fk_SBT_RMTBranch" referencedTableName="RMTBranches"
			baseColumnNames="Branch" baseTableName="Service_Branches_LoanType" referencedColumnNames="BranchCode" />
	</changeSet>

	<changeSet id="ST#1561.18" author="Mounika.M">
		<addForeignKeyConstraint constraintName="fk_SBT_RMTFinanceType"
			referencedTableName="RMTFinanceTypes" baseColumnNames="FinType" baseTableName="Service_Branches_LoanType"
			referencedColumnNames="FinType" />
	</changeSet>

	<changeSet id="ST#1561.19" author="Mounika.M">
		<createTable tableName="Service_Branches_LoanType_Temp">
			<column name="Id" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="HeaderId" type="bigint" />
			<column name="FinType" type="varchar(8)">
				<constraints nullable="false" />
			</column>
			<column name="Branch" type="varchar(12)">
				<constraints nullable="false" />
			</column>
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="CreatedBy" type="bigint" />
			<column name="CreatedOn" type="datetime" />
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="ApprovedBy" type="bigint" />
			<column name="ApprovedOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkFlowId" type="bigint">
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>

	<changeSet id="ST#1561.20" author="Mounika.M">
		<addPrimaryKey tableName="Service_Branches_LoanType_Temp" columnNames="Id"
			constraintName="PK_servBranchLTT_Id" />
	</changeSet>

	<changeSet id="ST#1561.21" author="Mounika.M">
		<addForeignKeyConstraint constraintName="fk_SBTT_id_SerBranchT"
			referencedTableName="Service_Branches_Temp" baseColumnNames="HeaderId" baseTableName="Service_Branches_LoanType_Temp"
			referencedColumnNames="Id" />
	</changeSet>

	<changeSet id="ST#1561.22" author="Mounika.M">
		<addUniqueConstraint tableName="Service_Branches_LoanType_Temp"
			columnNames="HeaderId,FinType,Branch" constraintName="fk_sbtt_header_id_br" />
	</changeSet>

	<changeSet id="ST#1561.23" author="Mounika.M">
		<addForeignKeyConstraint constraintName="fk_SBTT_RMTBranch" referencedTableName="RMTBranches"
			baseColumnNames="Branch" baseTableName="Service_Branches_LoanType_Temp" referencedColumnNames="BranchCode" />
	</changeSet>

	<changeSet id="ST#1561.24" author="Mounika.M">
		<addForeignKeyConstraint constraintName="fk_SBTT_RMTFinanceType"
			referencedTableName="RMTFinanceTypes" baseColumnNames="FinType" baseTableName="Service_Branches_LoanType_Temp"
			referencedColumnNames="FinType" />
	</changeSet>

	<changeSet id="ST#1561.25" author="Mounika.M">
		<comment>Rights for Customer Service Branch</comment>
		<sql>
			<![CDATA[
				DELETE FROM SECROLEGROUPS WHERE ROLEID = (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'SERVICE_BRANCH_MAKER');
				DELETE FROM SECROLEGROUPS WHERE ROLEID = (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'SERVICE_BRANCH_APPROVER');
				DELETE FROM SECROLEGROUPS WHERE ROLEID = (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'SERVICE_BRANCH_VIEW');
				
				DELETE FROM SECROLEGROUPS WHERE ROLEID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'SERVICE_BRANCH_MAKER');
				DELETE FROM SECROLEGROUPS WHERE ROLEID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'SERVICE_BRANCH_APPROVER');
				DELETE FROM SECROLEGROUPS WHERE ROLEID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'SERVICE_BRANCH_VIEW');
				
				DELETE FROM SECROLES WHERE ROLECD = 'SERVICE_BRANCH_MAKER';
				DELETE FROM SECROLES WHERE ROLECD = 'SERVICE_BRANCH_APPROVER';
				DELETE FROM SECROLES WHERE ROLECD = 'SERVICE_BRANCH_VIEW';
				
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'SERVICE_BRANCH_MAKER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'SERVICE_BRANCH_APPROVER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'SERVICE_BRANCH_VIEW');
				
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'SERVICE_BRANCH_MAKER');
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'SERVICE_BRANCH_APPROVER');
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'SERVICE_BRANCH_VIEW');
				
				DELETE FROM SECGROUPS WHERE GRPCODE = 'SERVICE_BRANCH_MAKER';
				DELETE FROM SECGROUPS WHERE GRPCODE = 'SERVICE_BRANCH_APPROVER';
				DELETE FROM SECGROUPS WHERE GRPCODE = 'SERVICE_BRANCH_VIEW';
				
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RightName = 'menuItem_Customer_Service_Branch');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RightName = 'button_CustomerServiceBranch_btnNew');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RightName = 'button_CustomerServiceBranch_SearchDialog');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RightName = 'button_CustomerServiceBranchDialog_btnEdit');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RightName = 'button_CustomerServiceBranchDialog_btnSave');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RightName = 'button_CustomerServiceBranchDialog_btnDelete');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RightName = 'CustomerServiceBranchDialog_Code');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RightName = 'CustomerServiceBranchDialog_Description');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RightName = 'CustomerServiceBranchDialog_OfcOrHouseNum');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RightName = 'CustomerServiceBranchDialog_FlatNum');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RightName = 'CustomerServiceBranchDialog_Street');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RightName = 'CustomerServiceBranchDialog_AddrLine1');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RightName = 'CustomerServiceBranchDialog_AddrLine2');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RightName = 'CustomerServiceBranchDialog_PoBox');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RightName = 'CustomerServiceBranchDialog_City');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RightName = 'CustomerServiceBranchDialog_Country');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RightName = 'CustomerServiceBranchDialog_CpProvince');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RightName = 'CustomerServiceBranchDialog_PinCode');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RightName = 'CustomerServiceBranchDialog_FolderPath');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RightName = 'CustomerServiceBranchDialog_Active');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RightName = 'CustomerServiceBranchLoanTypeDialog_Branch');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RightName = 'CustomerServiceBranchLoanTypeDialog_FinType');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RightName = 'CustomerServiceBranchLoanTypeDialog_btnNew');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RightName = 'CustomerServiceBranchLoanTypeDialog_btnRemove');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RightName = 'CustomerServiceBranchLoanTypeDialog_btnUpload');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RightName = 'CustomerServiceBranchLoanTypeDialog_btnImport');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RightName = 'CustomerServiceBranchLoanTypeDialog_File');
				
				DELETE FROM SECRIGHTS WHERE RightName = 'menuItem_Customer_Service_Branch';
				DELETE FROM SECRIGHTS WHERE RightName = 'button_CustomerServiceBranch_btnNew';
				DELETE FROM SECRIGHTS WHERE RightName = 'button_CustomerServiceBranch_SearchDialog';
				DELETE FROM SECRIGHTS WHERE RightName = 'button_CustomerServiceBranchDialog_btnEdit';
				DELETE FROM SECRIGHTS WHERE RightName = 'button_CustomerServiceBranchDialog_btnSave';
				DELETE FROM SECRIGHTS WHERE RightName = 'button_CustomerServiceBranchDialog_btnDelete';
				DELETE FROM SECRIGHTS WHERE RightName = 'CustomerServiceBranchDialog_Code';
				DELETE FROM SECRIGHTS WHERE RightName = 'CustomerServiceBranchDialog_Description';
				DELETE FROM SECRIGHTS WHERE RightName = 'CustomerServiceBranchDialog_OfcOrHouseNum';
				DELETE FROM SECRIGHTS WHERE RightName = 'CustomerServiceBranchDialog_FlatNum';
				DELETE FROM SECRIGHTS WHERE RightName = 'CustomerServiceBranchDialog_Street';
				DELETE FROM SECRIGHTS WHERE RightName = 'CustomerServiceBranchDialog_AddrLine1';
				DELETE FROM SECRIGHTS WHERE RightName = 'CustomerServiceBranchDialog_AddrLine2';
				DELETE FROM SECRIGHTS WHERE RightName = 'CustomerServiceBranchDialog_PoBox';
				DELETE FROM SECRIGHTS WHERE RightName = 'CustomerServiceBranchDialog_City';
				DELETE FROM SECRIGHTS WHERE RightName = 'CustomerServiceBranchDialog_Country';
				DELETE FROM SECRIGHTS WHERE RightName = 'CustomerServiceBranchDialog_CpProvince';
				DELETE FROM SECRIGHTS WHERE RightName = 'CustomerServiceBranchDialog_PinCode';
				DELETE FROM SECRIGHTS WHERE RightName = 'CustomerServiceBranchDialog_FolderPath';
				DELETE FROM SECRIGHTS WHERE RightName = 'CustomerServiceBranchDialog_Active';
				DELETE FROM SECRIGHTS WHERE RightName = 'CustomerServiceBranchLoanTypeDialog_Branch';
				DELETE FROM SECRIGHTS WHERE RightName = 'CustomerServiceBranchLoanTypeDialog_FinType';
				DELETE FROM SECRIGHTS WHERE RightName = 'CustomerServiceBranchLoanTypeDialog_btnNew';
				DELETE FROM SECRIGHTS WHERE RightName = 'CustomerServiceBranchLoanTypeDialog_btnRemove';
				DELETE FROM SECRIGHTS WHERE RightName = 'CustomerServiceBranchLoanTypeDialog_btnUpload';
				DELETE FROM SECRIGHTS WHERE RightName = 'CustomerServiceBranchLoanTypeDialog_btnImport';
				DELETE FROM SECRIGHTS WHERE RightName = 'CustomerServiceBranchLoanTypeDialog_File';
				
				
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menuItem_Customer_Service_Branch', 			'MENU', 						0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2, 'button_CustomerServiceBranch_btnNew',			'ServiceBranchList',    0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2, 'button_CustomerServiceBranch_SearchDialog',	'ServiceBranchList',    0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2, 'button_CustomerServiceBranchDialog_btnEdit',	'ServiceBranchDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2, 'button_CustomerServiceBranchDialog_btnSave',	'ServiceBranchDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2, 'button_CustomerServiceBranchDialog_btnDelete',	'ServiceBranchDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'CustomerServiceBranchDialog_Code',				'ServiceBranchDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'CustomerServiceBranchDialog_Description',		'ServiceBranchDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'CustomerServiceBranchDialog_OfcOrHouseNum',	'ServiceBranchDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'CustomerServiceBranchDialog_FlatNum',			'ServiceBranchDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'CustomerServiceBranchDialog_Street',			'ServiceBranchDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'CustomerServiceBranchDialog_AddrLine1',		'ServiceBranchDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'CustomerServiceBranchDialog_AddrLine2',		'ServiceBranchDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'CustomerServiceBranchDialog_PoBox',			'ServiceBranchDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'CustomerServiceBranchDialog_City',				'ServiceBranchDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'CustomerServiceBranchDialog_Country',		    'ServiceBranchDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'CustomerServiceBranchDialog_CpProvince',		'ServiceBranchDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'CustomerServiceBranchDialog_PinCode',			'ServiceBranchDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'CustomerServiceBranchDialog_FolderPath',		'ServiceBranchDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'CustomerServiceBranchDialog_Active',			'ServiceBranchDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'CustomerServiceBranchLoanTypeDialog_FinType',	'ServiceBranchDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2, 'CustomerServiceBranchLoanTypeDialog_btnNew',	'ServiceBranchDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2, 'CustomerServiceBranchLoanTypeDialog_btnRemove','ServiceBranchDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2, 'CustomerServiceBranchLoanTypeDialog_btnUpload','ServiceBranchDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2, 'CustomerServiceBranchLoanTypeDialog_btnImport','ServiceBranchDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'CustomerServiceBranchLoanTypeDialog_File',		'ServiceBranchDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);

				INSERT INTO SECGROUPS (GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'SERVICE_BRANCH_MAKER', 		'CUSTOMER SERVICE BRANCH MAKER',  	1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPS (GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'SERVICE_BRANCH_APPROVER', 	'CUSTOMER SERVICE BRANCH APPROVER', 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPS (GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'SERVICE_BRANCH_VIEW', 		'CUSTOMER SERVICE BRANCH VIEW',  	1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'SERVICE_BRANCH_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menuItem_Customer_Service_Branch'), 			 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'SERVICE_BRANCH_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_CustomerServiceBranch_btnNew'), 			 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'SERVICE_BRANCH_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_CustomerServiceBranch_SearchDialog'), 	 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'SERVICE_BRANCH_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_CustomerServiceBranchDialog_btnEdit'), 	 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'SERVICE_BRANCH_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_CustomerServiceBranchDialog_btnSave'), 	 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'SERVICE_BRANCH_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_CustomerServiceBranchDialog_btnDelete'),  1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'SERVICE_BRANCH_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'CustomerServiceBranchDialog_Code'), 			 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'SERVICE_BRANCH_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'CustomerServiceBranchDialog_Description'), 		 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'SERVICE_BRANCH_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'CustomerServiceBranchDialog_FlatNum'), 			 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'SERVICE_BRANCH_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'CustomerServiceBranchDialog_Street'), 			 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'SERVICE_BRANCH_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'CustomerServiceBranchDialog_OfcOrHouseNum'), 	 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'SERVICE_BRANCH_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'CustomerServiceBranchDialog_AddrLine1'), 		 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'SERVICE_BRANCH_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'CustomerServiceBranchDialog_AddrLine2'), 		 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'SERVICE_BRANCH_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'CustomerServiceBranchDialog_PoBox'), 			 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'SERVICE_BRANCH_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'CustomerServiceBranchDialog_City'), 			 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'SERVICE_BRANCH_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'CustomerServiceBranchDialog_Country'), 			 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'SERVICE_BRANCH_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'CustomerServiceBranchDialog_CpProvince'), 		 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'SERVICE_BRANCH_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'CustomerServiceBranchDialog_PinCode'), 			 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'SERVICE_BRANCH_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'CustomerServiceBranchDialog_FolderPath'), 		 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'SERVICE_BRANCH_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'CustomerServiceBranchDialog_Active'), 			 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'SERVICE_BRANCH_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'CustomerServiceBranchLoanTypeDialog_FinType'), 	 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'SERVICE_BRANCH_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'CustomerServiceBranchLoanTypeDialog_btnNew'), 	 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'SERVICE_BRANCH_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'CustomerServiceBranchLoanTypeDialog_btnRemove'), 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'SERVICE_BRANCH_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'CustomerServiceBranchLoanTypeDialog_btnUpload'), 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'SERVICE_BRANCH_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'CustomerServiceBranchLoanTypeDialog_btnImport'), 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'SERVICE_BRANCH_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'CustomerServiceBranchLoanTypeDialog_File'), 	 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'SERVICE_BRANCH_APPROVER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menuItem_Customer_Service_Branch'), 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'SERVICE_BRANCH_APPROVER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_CustomerServiceBranchDialog_btnSave'), 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'SERVICE_BRANCH_VIEW'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menuItem_Customer_Service_Branch'), 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'SERVICE_BRANCH_MAKER', 'Maker role for Customer Service Branch', '', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0); 
		  		INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'SERVICE_BRANCH_APPROVER', 'Approver role for Customer Service Branch',	'', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		  		INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'SERVICE_BRANCH_VIEW', 'View role for Customer Service Branch',	'', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		  		
		  		INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'SERVICE_BRANCH_MAKER'),    (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'SERVICE_BRANCH_MAKER'),    0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		    	INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'SERVICE_BRANCH_APPROVER'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'SERVICE_BRANCH_APPROVER'), 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		    	INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'SERVICE_BRANCH_VIEW'), 	(SELECT ROLEID FROM SECROLES WHERE ROLECD = 'SERVICE_BRANCH_VIEW'), 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		    	
		    	INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'SERVICE_BRANCH_MAKER'),    (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'MSTGRP1_MAKER'), 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		    	INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'SERVICE_BRANCH_APPROVER'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'MSTGRP1_APPROVER'), 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		    	
		    	INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'SERVICE_BRANCH_VIEW'),    (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'MSTGRP1_MAKER'), 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		    	INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'SERVICE_BRANCH_VIEW'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'MSTGRP1_APPROVER'), 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#1561.26" author="sainaveen.y">
		<sql>
			 <![CDATA[
			 	 DELETE FROM BMTAEEVENTS WHERE AEEVENTCODE IN ('NOCLTR', 'CANCLLTR', 'CLOSELTR');
			 	 
	       		 INSERT INTO BMTAEEVENTS (AEEVENTCODE, AEEVENTCODEDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, ACTIVE) VALUES ('NOCLTR',   'Generate NOC Letter',           1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0, 1);
                 INSERT INTO BMTAEEVENTS (AEEVENTCODE, AEEVENTCODEDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, ACTIVE) VALUES ('CANCLLTR', 'Generate Cancellation Letter',  1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0, 1);
                 INSERT INTO BMTAEEVENTS (AEEVENTCODE, AEEVENTCODEDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, ACTIVE) VALUES ('CLOSELTR', 'Generate Closure Letter',                1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0, 1);
             ]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#1561.27.1" author="vasudevarao.S">
		<sql>
            <![CDATA[
              	DELETE FROM RBFIELDDETAILS WHERE  RBMODULE= 'FEES' and RBEVENT = 'NOCLTR';

				INSERT INTO RBFIELDDETAILS (RBMODULE, RBEVENT, RBFLDNAME, RBFLDDESC, RBFLDTYPE, RBFLDLEN, RBFORCALFLDS, RBFORBLDFLDS, RBFLDTABLENAME, RBSTFLDS, MODULECODE) VALUES ('FEES', 'NOCLTR', 'CustCtgCode',     				'Customer Category',                					'nvarchar',  	12,  '0', '1', 'CustomerCategory',    		'static,global,dbvalue', ''			  );
				INSERT INTO RBFIELDDETAILS (RBMODULE, RBEVENT, RBFLDNAME, RBFLDDESC, RBFLDTYPE, RBFLDLEN, RBFORCALFLDS, RBFORBLDFLDS, RBFLDTABLENAME, RBSTFLDS, MODULECODE) VALUES ('FEES', 'NOCLTR', 'CustTypeCode',    				'Customer Type',                    					'nvarchar',  	12,  '0', '1', 'CustomerType',        		'static,global,dbvalue', ''			  );
				INSERT INTO RBFIELDDETAILS (RBMODULE, RBEVENT, RBFLDNAME, RBFLDDESC, RBFLDTYPE, RBFLDLEN, RBFORCALFLDS, RBFORBLDFLDS, RBFLDTABLENAME, RBSTFLDS, MODULECODE) VALUES ('FEES', 'NOCLTR', 'CustomerGenderCode',     		'Customer Gender Code',                  				'nvarchar',  	12,  '0', '1', 'CustomerGenderCode',  		'static,global,dbvalue', ''			  );
				INSERT INTO RBFIELDDETAILS (RBMODULE, RBEVENT, RBFLDNAME, RBFLDDESC, RBFLDTYPE, RBFLDLEN, RBFORCALFLDS, RBFORBLDFLDS, RBFLDTABLENAME, RBSTFLDS, MODULECODE) VALUES ('FEES', 'NOCLTR', 'LoanClosureAge',         		'Days between Closure date and Application Date',       'bigint',       8,   '0', '1', 'LoanClosureAge',      		'static,global,dbvalue', ''			  );
				INSERT INTO RBFIELDDETAILS (RBMODULE, RBEVENT, RBFLDNAME, RBFLDDESC, RBFLDTYPE, RBFLDLEN, RBFORCALFLDS, RBFORBLDFLDS, RBFLDTABLENAME, RBSTFLDS, MODULECODE) VALUES ('FEES', 'NOCLTR', 'LoanCancellationAge',    		'Days between Cancellation Date and Application Date',  'bigint',       8,   '0', '1', 'LoanCancellationAge',       'static,global,dbvalue', ''			  );
				INSERT INTO RBFIELDDETAILS (RBMODULE, RBEVENT, RBFLDNAME, RBFLDDESC, RBFLDTYPE, RBFLDLEN, RBFORCALFLDS, RBFORBLDFLDS, RBFLDTABLENAME, RBSTFLDS, MODULECODE) VALUES ('FEES', 'NOCLTR', 'ClosureType',     				'ClosureType',                							'nvarchar',  	12,  '0', '1', 'Closure_Types',    			'static,global,dbvalue', 'ClosureType');
				INSERT INTO RBFIELDDETAILS (RBMODULE, RBEVENT, RBFLDNAME, RBFLDDESC, RBFLDTYPE, RBFLDLEN, RBFORCALFLDS, RBFORBLDFLDS, RBFLDTABLENAME, RBSTFLDS, MODULECODE) VALUES ('FEES', 'NOCLTR', 'SequenceNo',    				    'same letter type is being issued for the same loan ',  'bigint',		8,   '0', '1', 'Sequence No',        		'static,global,dbvalue', ''   		  );
				INSERT INTO RBFIELDDETAILS (RBMODULE, RBEVENT, RBFLDNAME, RBFLDDESC, RBFLDTYPE, RBFLDLEN, RBFORCALFLDS, RBFORBLDFLDS, RBFLDTABLENAME, RBSTFLDS, MODULECODE) VALUES ('FEES', 'NOCLTR', 'StatusOfpreviousletters',        'Status of previous letters',                 			'nvarchar',  	12,  '0', '1', 'Closure_Types',  			'static,global,dbvalue', 'ClosureType');
            ]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1561.28.1" author="vasudevarao.S">
		<sql>
            <![CDATA[
              	DELETE FROM RBFIELDDETAILS WHERE  RBMODULE= 'FEES' and RBEVENT = 'CANCLLTR';

				INSERT INTO RBFIELDDETAILS (RBMODULE, RBEVENT, RBFLDNAME, RBFLDDESC, RBFLDTYPE, RBFLDLEN, RBFORCALFLDS, RBFORBLDFLDS, RBFLDTABLENAME, RBSTFLDS, MODULECODE) VALUES ('FEES', 'CANCLLTR', 'CustCtgCode',     			      'Customer Category',                		 				 'nvarchar',    	12, '0', '1', 'CustomerCategory',      'static,global,dbvalue', ''			 );
				INSERT INTO RBFIELDDETAILS (RBMODULE, RBEVENT, RBFLDNAME, RBFLDDESC, RBFLDTYPE, RBFLDLEN, RBFORCALFLDS, RBFORBLDFLDS, RBFLDTABLENAME, RBSTFLDS, MODULECODE) VALUES ('FEES', 'CANCLLTR', 'CustTypeCode',    			      'Customer Type',                    				         'nvarchar',    	12, '0', '1', 'CustomerType',          'static,global,dbvalue', '' 			 );
				INSERT INTO RBFIELDDETAILS (RBMODULE, RBEVENT, RBFLDNAME, RBFLDDESC, RBFLDTYPE, RBFLDLEN, RBFORCALFLDS, RBFORBLDFLDS, RBFLDTABLENAME, RBSTFLDS, MODULECODE) VALUES ('FEES', 'CANCLLTR', 'CustomerGenderCode',             'Customer Gender Code',                				     'nvarchar',    	12, '0', '1', 'CustomerGenderCode',    'static,global,dbvalue', ''			 );
				INSERT INTO RBFIELDDETAILS (RBMODULE, RBEVENT, RBFLDNAME, RBFLDDESC, RBFLDTYPE, RBFLDLEN, RBFORCALFLDS, RBFORBLDFLDS, RBFLDTABLENAME, RBSTFLDS, MODULECODE) VALUES ('FEES', 'CANCLLTR', 'LoanClosureAge',         	      'Days between Closure date and Application Date',          'bigint',         	8,  '0', '1', 'LoanClosureAge',        'static,global,dbvalue', ''			 );
				INSERT INTO RBFIELDDETAILS (RBMODULE, RBEVENT, RBFLDNAME, RBFLDDESC, RBFLDTYPE, RBFLDLEN, RBFORCALFLDS, RBFORBLDFLDS, RBFLDTABLENAME, RBSTFLDS, MODULECODE) VALUES ('FEES', 'CANCLLTR', 'LoanCancellationAge',   		  'Days between Cancellation Date and Application Date',     'bigint',        	8,  '0', '1', 'LoanCancellationAge',   'static,global,dbvalue', ''			 );
				INSERT INTO RBFIELDDETAILS (RBMODULE, RBEVENT, RBFLDNAME, RBFLDDESC, RBFLDTYPE, RBFLDLEN, RBFORCALFLDS, RBFORBLDFLDS, RBFLDTABLENAME, RBSTFLDS, MODULECODE) VALUES ('FEES', 'CANCLLTR', 'ClosureType',     				  'ClosureType',                							 'nvarchar',    	12, '0', '1', 'Closure_Types',         'static,global,dbvalue', 'ClosureType');
				INSERT INTO RBFIELDDETAILS (RBMODULE, RBEVENT, RBFLDNAME, RBFLDDESC, RBFLDTYPE, RBFLDLEN, RBFORCALFLDS, RBFORBLDFLDS, RBFLDTABLENAME, RBSTFLDS, MODULECODE) VALUES ('FEES', 'CANCLLTR', 'SequenceNo',    				  'same letter type is being issued for the same loan ',     'bigint', 			8,  '0', '1', 'Sequence No',           'static,global,dbvalue', ''			 );
				INSERT INTO RBFIELDDETAILS (RBMODULE, RBEVENT, RBFLDNAME, RBFLDDESC, RBFLDTYPE, RBFLDLEN, RBFORCALFLDS, RBFORBLDFLDS, RBFLDTABLENAME, RBSTFLDS, MODULECODE) VALUES ('FEES', 'CANCLLTR', 'StatusOfpreviousletters',        'Status of previous letters',               				 'nvarchar',    	12, '0', '1', 'Closure_Types',         'static,global,dbvalue', 'ClosureType');
            ]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#1561.29.1" author="vasudevarao.S">
		<sql>
            <![CDATA[
              	DELETE FROM RBFIELDDETAILS WHERE  RBMODULE = 'FEES' and RBEVENT = 'CLOSELTR';

				INSERT INTO RBFIELDDETAILS (RBMODULE, RBEVENT, RBFLDNAME, RBFLDDESC, RBFLDTYPE, RBFLDLEN, RBFORCALFLDS, RBFORBLDFLDS, RBFLDTABLENAME, RBSTFLDS, MODULECODE) VALUES ('FEES', 'CLOSELTR', 'CustCtgCode',     			      'Customer Category',                						'nvarchar',  12,  '0', '1', 'CustomerCategory',    		'static,global,dbvalue', ''			  );
				INSERT INTO RBFIELDDETAILS (RBMODULE, RBEVENT, RBFLDNAME, RBFLDDESC, RBFLDTYPE, RBFLDLEN, RBFORCALFLDS, RBFORBLDFLDS, RBFLDTABLENAME, RBSTFLDS, MODULECODE) VALUES ('FEES', 'CLOSELTR', 'CustTypeCode',    				  'Customer Type',                    						'nvarchar',  12,  '0', '1', 'CustomerType',        		'static,global,dbvalue', ''			  );
				INSERT INTO RBFIELDDETAILS (RBMODULE, RBEVENT, RBFLDNAME, RBFLDDESC, RBFLDTYPE, RBFLDLEN, RBFORCALFLDS, RBFORBLDFLDS, RBFLDTABLENAME, RBSTFLDS, MODULECODE) VALUES ('FEES', 'CLOSELTR', 'CustomerGenderCode',       	  'Customer Gender Code',                 					'nvarchar',  12,  '0', '1', 'CustomerGenderCode',  		'static,global,dbvalue', ''			  );
				INSERT INTO RBFIELDDETAILS (RBMODULE, RBEVENT, RBFLDNAME, RBFLDDESC, RBFLDTYPE, RBFLDLEN, RBFORCALFLDS, RBFORBLDFLDS, RBFLDTABLENAME, RBSTFLDS, MODULECODE) VALUES ('FEES', 'CLOSELTR', 'LoanClosureAge',          		  'Days between Closure date and Application Date',         'bigint',    8,   '0', '1', 'LoanClosureAge',      		'static,global,dbvalue', ''			  );
				INSERT INTO RBFIELDDETAILS (RBMODULE, RBEVENT, RBFLDNAME, RBFLDDESC, RBFLDTYPE, RBFLDLEN, RBFORCALFLDS, RBFORBLDFLDS, RBFLDTABLENAME, RBSTFLDS, MODULECODE) VALUES ('FEES', 'CLOSELTR', 'LoanCancellationAge',      	  'Days between Cancellation Date and Application Date',    'bigint',    8,   '0', '1', 'LoanCancellationAge',      'static,global,dbvalue', ''			  );
				INSERT INTO RBFIELDDETAILS (RBMODULE, RBEVENT, RBFLDNAME, RBFLDDESC, RBFLDTYPE, RBFLDLEN, RBFORCALFLDS, RBFORBLDFLDS, RBFLDTABLENAME, RBSTFLDS, MODULECODE) VALUES ('FEES', 'CLOSELTR', 'ClosureType',     				  'ClosureType',                							'nvarchar',  12,  '0', '1', 'Closure_Types',    		'static,global,dbvalue', 'ClosureType');
				INSERT INTO RBFIELDDETAILS (RBMODULE, RBEVENT, RBFLDNAME, RBFLDDESC, RBFLDTYPE, RBFLDLEN, RBFORCALFLDS, RBFORBLDFLDS, RBFLDTABLENAME, RBSTFLDS, MODULECODE) VALUES ('FEES', 'CLOSELTR', 'SequenceNo',    				  'same letter type is being issued for the same loan ',    'bigint', 	 8,   '0', '1', 'Sequence No',        		'static,global,dbvalue', ''			  );
				INSERT INTO RBFIELDDETAILS (RBMODULE, RBEVENT, RBFLDNAME, RBFLDDESC, RBFLDTYPE, RBFLDLEN, RBFORCALFLDS, RBFORBLDFLDS, RBFLDTABLENAME, RBSTFLDS, MODULECODE) VALUES ('FEES', 'CLOSELTR', 'StatusOfpreviousletters',        'Status of previous letters',                 			'nvarchar',  12,  '0', '1', 'Closure_Types',  			'static,global,dbvalue', 'ClosureType');
            ]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#1561.30" author="vasudevarao.S">
		<sql>
			<![CDATA[
				INSERT INTO TEMPLATEFIELDS (MODULE, FIELD, FIELDDESC, FIELDFORMAT, EVENT) VALUES ('FIN', 'Closure Date', 			'Closure Date of Loan', 													'A', 'NOCLTR');
				INSERT INTO TEMPLATEFIELDS (MODULE, FIELD, FIELDDESC, FIELDFORMAT, EVENT) VALUES ('FIN', 'Loan Cancellation Date',  'Cancellation Date of Loan', 												'A', 'NOCLTR');
                INSERT INTO TEMPLATEFIELDS (MODULE, FIELD, FIELDDESC, FIELDFORMAT, EVENT) VALUES ('FIN', 'Closure Type', 			'Closure Type selected while Closing the Loan', 							'A', 'NOCLTR');
                INSERT INTO TEMPLATEFIELDS (MODULE, FIELD, FIELDDESC, FIELDFORMAT, EVENT) VALUES ('FIN', 'Sequence No', 			'No of time the letter of same letter type is being issued for the Loan', 	'A', 'NOCLTR');
                INSERT INTO TEMPLATEFIELDS (MODULE, FIELD, FIELDDESC, FIELDFORMAT, EVENT) VALUES ('FIN', 'CSD Branch Description', 	'CSD Branch of the loan mapped basis CSD Loan Type Branch Mapping', 		'A', 'NOCLTR');
                INSERT INTO TEMPLATEFIELDS (MODULE, FIELD, FIELDDESC, FIELDFORMAT, EVENT) VALUES ('FIN', 'File Name', 				'File name of Letter Generated', 											'A', 'NOCLTR');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#1561.31" author="vasudevarao.S">
		<sql>
			<![CDATA[
				INSERT INTO TEMPLATEFIELDS (MODULE, FIELD, FIELDDESC, FIELDFORMAT, EVENT) VALUES ('FIN', 'Closure Date', 			'Closure Date of Loan', 													'A', 'CANCLLTR');
				INSERT INTO TEMPLATEFIELDS (MODULE, FIELD, FIELDDESC, FIELDFORMAT, EVENT) VALUES ('FIN', 'Loan Cancellation Date',  'Cancellation Date of Loan', 												'A', 'CANCLLTR');
                INSERT INTO TEMPLATEFIELDS (MODULE, FIELD, FIELDDESC, FIELDFORMAT, EVENT) VALUES ('FIN', 'Closure Type', 			'Closure Type selected while Closing the Loan', 							'A', 'CANCLLTR');
                INSERT INTO TEMPLATEFIELDS (MODULE, FIELD, FIELDDESC, FIELDFORMAT, EVENT) VALUES ('FIN', 'Sequence No', 			'No of time the letter of same letter type is being issued for the Loan', 	'A', 'CANCLLTR');
                INSERT INTO TEMPLATEFIELDS (MODULE, FIELD, FIELDDESC, FIELDFORMAT, EVENT) VALUES ('FIN', 'CSD Branch Description', 	'CSD Branch of the loan mapped basis CSD Loan Type Branch Mapping', 		'A', 'CANCLLTR');
                INSERT INTO TEMPLATEFIELDS (MODULE, FIELD, FIELDDESC, FIELDFORMAT, EVENT) VALUES ('FIN', 'File Name', 				'File name of Letter Generated', 											'A', 'CANCLLTR');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#1561.32" author="vasudevarao.S">
		<sql>
			<![CDATA[
				INSERT INTO TEMPLATEFIELDS (MODULE, FIELD, FIELDDESC, FIELDFORMAT, EVENT) VALUES ('FIN', 'Closure Date', 			'Closure Date of Loan', 													'A', 'CLOSELTR');
				INSERT INTO TEMPLATEFIELDS (MODULE, FIELD, FIELDDESC, FIELDFORMAT, EVENT) VALUES ('FIN', 'Loan Cancellation Date',  'Cancellation Date of Loan', 												'A', 'CLOSELTR');
                INSERT INTO TEMPLATEFIELDS (MODULE, FIELD, FIELDDESC, FIELDFORMAT, EVENT) VALUES ('FIN', 'Closure Type', 			'Closure Type selected while Closing the Loan', 							'A', 'CLOSELTR');
                INSERT INTO TEMPLATEFIELDS (MODULE, FIELD, FIELDDESC, FIELDFORMAT, EVENT) VALUES ('FIN', 'Sequence No', 			'No of time the letter of same letter type is being issued for the Loan', 	'A', 'CLOSELTR');
                INSERT INTO TEMPLATEFIELDS (MODULE, FIELD, FIELDDESC, FIELDFORMAT, EVENT) VALUES ('FIN', 'CSD Branch Description', 	'CSD Branch of the loan mapped basis CSD Loan Type Branch Mapping', 		'A', 'CLOSELTR');
                INSERT INTO TEMPLATEFIELDS (MODULE, FIELD, FIELDDESC, FIELDFORMAT, EVENT) VALUES ('FIN', 'File Name', 				'File name of Letter Generated', 											'A', 'CLOSELTR');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#1561.33" author="saikrishna.b">
		<createSequence sequenceName="SEQ_LOANTYPE_LETTER_MAPPING" incrementBy="1" startValue="1" minValue="1"
			maxValue="999999999999999999" />
	</changeSet>
	
	<changeSet id="ST#1561.34" author="saikrishna.b">
		<createTable tableName="LOANTYPE_LETTER_MAPPING">
			<column name="Id" type="bigint" >
				<constraints nullable="false" />
			</column>
			<column name="FinType" type="varchar(20)" />
			<column name="LetterType" type="varchar(20)" />
			<column name="AutoGeneration" type="boolean" />
			<column name="LetterMode" type="varchar(15)" />
			<column name="EmailTemplateId" type="bigint" />
			<column name="AgreementCodeId" type="bigint" />
			<column name="Version" type="int" />
			<column name="CreatedBy" type="bigint" />
			<column name="CreatedOn" type="datetime" />
			<column name="ApprovedBy" type="bigint" />
			<column name="ApprovedOn" type="datetime" />
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkFlowId" type="bigint" />
		</createTable>
	 </changeSet>
	
	<changeSet id="ST#1561.35" author="saikrishna.b">
		<addPrimaryKey constraintName="PK_LOANTYPE_LETTER_MAPPING_ID" tableName="LOANTYPE_LETTER_MAPPING" columnNames="Id" />
	</changeSet>
	
	<changeSet id="ST#1561.36" author="saikrishna.b">
		<createTable tableName="LOANTYPE_LETTER_MAPPING_TEMP">
			<column name="Id" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="FinType" type="varchar(20)" />
			<column name="LetterType" type="varchar(20)" />
			<column name="AutoGeneration" type="boolean" />
			<column name="LetterMode" type="varchar(15)" />
			<column name="EmailTemplateId" type="bigint" />
			<column name="AgreementCodeId" type="bigint" />
			<column name="Version" type="int" />
			<column name="CreatedBy" type="bigint" />
			<column name="CreatedOn" type="datetime" />
			<column name="ApprovedBy" type="bigint" />
			<column name="ApprovedOn" type="datetime" />
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkFlowId" type="bigint" />
		</createTable>
	</changeSet>
	
    <changeSet id="ST#1561.37" author="saikrishna.b">
		<addPrimaryKey constraintName="PK_LOANTYPE_LETTER_MAPPING_TID" tableName="LOANTYPE_LETTER_MAPPING_TEMP" columnNames="Id" />
	</changeSet>
	
	<changeSet id="ST#1561.38" author="saikrishna.b">
		<sql>
			<![CDATA[
				DELETE FROM SECROLES WHERE ROLECD ='LOANTYPE_LETTER_MAPPING_MAKER';
				DELETE FROM SECROLES WHERE ROLECD ='LOANTYPE_LETTER_MAPPING_APPROVER';
				DELETE FROM SECROLES WHERE ROLECD ='LOANTYPE_LETTER_MAPPING_VIEW';
				
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)  VALUES ((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'LOANTYPE_LETTER_MAPPING_MAKER', 		'Role for loantype letter mapping maker',	    NULL, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)  VALUES ((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'LOANTYPE_LETTER_MAPPING_APPROVER', 	'Role for loantype letter mapping approver',	NULL, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)  VALUES ((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'LOANTYPE_LETTER_MAPPING_VIEW', 	    'Role for loantype letter mapping view',	    NULL, 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
				DELETE FROM SECGROUPS WHERE GRPCODE ='LOANTYPE_LETTER_MAPPING_MAKER';
				DELETE FROM SECGROUPS WHERE GRPCODE ='LOANTYPE_LETTER_MAPPING_APPROVER';
				DELETE FROM SECGROUPS WHERE GRPCODE ='LOANTYPE_LETTER_MAPPING_VIEW';
				
				INSERT INTO SECGROUPS (GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPID)+1 FROM SECGROUPS_VIEW), 'LOANTYPE_LETTER_MAPPING_MAKER',    'WF Maker Group',     1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPS (GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPID)+1 FROM SECGROUPS_VIEW), 'LOANTYPE_LETTER_MAPPING_APPROVER', 'WF Approver Group',  1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPS (GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPID)+1 FROM SECGROUPS_VIEW), 'LOANTYPE_LETTER_MAPPING_VIEW',     'WF View Group',      1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
				
				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='menu_Item_LoanTypeLetterMapping';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='button_LoanTypeLetterMappingDialog_btnNew';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='button_LoanTypeLetterMappingDialog_btnEdit';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='button_LoanTypeLetterMappingDialog_btnDelete';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='button_LoanTypeLetterMappingDialog_btnSave';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='button_LoanTypeLetterMappingDialog_NewLetterMapping';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='LoanTypeLetterMappingDialog_FinType';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='LoanTypeLetterMappingDialog_LetterType';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='LoanTypeLetterMappingDialog_AutoGeneration';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='LoanTypeLetterMappingDialog_LetterMode';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='LoanTypeLetterMappingDialog_EmailTemplateId';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='LoanTypeLetterMappingDialog_AgreementCodeId';
				
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS_VIEW), 0, 'menu_Item_LoanTypeLetterMapping',                		'MENU',                         0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS_VIEW), 2, 'button_LoanTypeLetterMappingDialog_btnNew',      		'LoanTypeLetterMappingDialog',   0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS_VIEW), 2, 'button_LoanTypeLetterMappingDialog_btnEdit',     		'LoanTypeLetterMappingDialog',   0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS_VIEW), 2, 'button_LoanTypeLetterMappingDialog_btnDelete',   		'LoanTypeLetterMappingDialog',   0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS_VIEW), 2, 'button_LoanTypeLetterMappingDialog_btnSave',     		'LoanTypeLetterMappingDialog',   0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS_VIEW), 2, 'button_LoanTypeLetterMappingDialog_NewLetterMapping', 'LoanTypeLetterMappingDialog',   0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS_VIEW), 3, 'LoanTypeLetterMappingDialog_FinType',            		'LoanTypeLetterMappingDialog',   0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS_VIEW), 3, 'LoanTypeLetterMappingDialog_LetterType',        		'LoanTypeLetterMappingDialog',   0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS_VIEW), 3, 'LoanTypeLetterMappingDialog_AutoGeneration',     		'LoanTypeLetterMappingDialog',   0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS_VIEW), 3, 'LoanTypeLetterMappingDialog_LetterMode',        		'LoanTypeLetterMappingDialog',   0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS_VIEW), 3, 'LoanTypeLetterMappingDialog_EmailTemplateId',    		'LoanTypeLetterMappingDialog',   0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS_VIEW), 3, 'LoanTypeLetterMappingDialog_AgreementCodeId',    		'LoanTypeLetterMappingDialog',   0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			
			    INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)  VALUES  ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS_VIEW), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOANTYPE_LETTER_MAPPING_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_LoanTypeLetterMapping'),               		1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)  VALUES  ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS_VIEW), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOANTYPE_LETTER_MAPPING_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_LoanTypeLetterMappingDialog_btnNew'),     		1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)  VALUES  ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS_VIEW), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOANTYPE_LETTER_MAPPING_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_LoanTypeLetterMappingDialog_btnDelete'),  		1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)  VALUES  ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS_VIEW), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOANTYPE_LETTER_MAPPING_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_LoanTypeLetterMappingDialog_btnSave'),    		1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)  VALUES  ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS_VIEW), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOANTYPE_LETTER_MAPPING_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_LoanTypeLetterMappingDialog_NewLetterMapping'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)  VALUES  ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS_VIEW), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOANTYPE_LETTER_MAPPING_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'LoanTypeLetterMappingDialog_FinType'),           		1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)  VALUES  ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS_VIEW), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOANTYPE_LETTER_MAPPING_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'LoanTypeLetterMappingDialog_LetterType'),        		1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)  VALUES  ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS_VIEW), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOANTYPE_LETTER_MAPPING_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'LoanTypeLetterMappingDialog_AutoGeneration'),    		1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)  VALUES  ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS_VIEW), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOANTYPE_LETTER_MAPPING_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'LoanTypeLetterMappingDialog_LetterMode'),        		1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)  VALUES  ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS_VIEW), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOANTYPE_LETTER_MAPPING_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'LoanTypeLetterMappingDialog_EmailTemplateId'),   		1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)  VALUES  ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS_VIEW), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOANTYPE_LETTER_MAPPING_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'LoanTypeLetterMappingDialog_AgreementCodeId'),   		1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)  VALUES  ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS_VIEW), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOANTYPE_LETTER_MAPPING_APPROVER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_LoanTypeLetterMappingDialog_btnSave'),  1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)  VALUES  ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS_VIEW), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOANTYPE_LETTER_MAPPING_APPROVER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_LoanTypeLetterMapping'),             1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)  VALUES  ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS_VIEW), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOANTYPE_LETTER_MAPPING_MAKER'),    (SELECT ROLEID FROM SECROLES  WHERE ROLECD = 'LOANTYPE_LETTER_MAPPING_MAKER'),     0, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)  VALUES  ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS_VIEW), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOANTYPE_LETTER_MAPPING_APPROVER'), (SELECT ROLEID FROM SECROLES  WHERE ROLECD = 'LOANTYPE_LETTER_MAPPING_APPROVER'),  0, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#1561.39" author="ramya.v">
		<createTable tableName="LOAN_LETTER_UPLOAD">
			<column name="Id" type="bigint" autoIncrement="true">
				<constraints nullable="false" />
			</column>
			<column name="HeaderId" type="bigint" />
			<column name="RecordSeq" type="bigint" />
			<column name="FinID" type="bigint" />
			<column name="FinReference" type="varchar(20)" />
			<column name="LetterType" type="varchar(50)" />
			<column name="ModeOfTransfer" type="varchar(50)" />
			<column name="WaiverCharges" type="varchar(50)" />
			<column name="Progress" type="int" />
			<column name="Status" type="char(1)" />
			<column name="ErrorCode" type="varchar(20)" />
			<column name="ErrorDesc" type="varchar(2000)" />
		</createTable>
	</changeSet>
	
	<changeSet id="ST#1561.40" author="ramya.v">
		<addPrimaryKey constraintName="PK_LOAN_LETTER_UPLOAD_ID" tableName="LOAN_LETTER_UPLOAD" columnNames="id" />
	</changeSet>
	
	<changeSet id="ST#1561.41" author="ramya.v">
		<sql>
			<![CDATA[
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_LETTER_UPLOAD_MAKER');
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_LETTER_UPLOAD_APPROVER');
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_LETTER_UPLOAD_VIEW');

				DELETE FROM SECROLES WHERE ROLECD ='LOAN_LETTER_UPLOAD_MAKER';
				DELETE FROM SECROLES WHERE ROLECD ='LOAN_LETTER_UPLOAD_APPROVER';
				DELETE FROM SECROLES WHERE ROLECD ='LOAN_LETTER_UPLOAD_VIEW';

				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_LETTER_UPLOAD_MAKER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_LETTER_UPLOAD_APPROVER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_LETTER_UPLOAD_VIEW');

				DELETE FROM SECGROUPS WHERE GRPCODE ='LOAN_LETTER_UPLOAD_MAKER';
				DELETE FROM SECGROUPS WHERE GRPCODE ='LOAN_LETTER_UPLOAD_APPROVER';
				DELETE FROM SECGROUPS WHERE GRPCODE ='LOAN_LETTER_UPLOAD_VIEW';

				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='menu_Item_loan_letter_upload_Maker';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='menu_Item_loan_letter_upload_Approver';

				INSERT INTO SECRIGHTS(RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_loan_letter_upload_Maker', 'MENU', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS(RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_loan_letter_upload_Approver', 'MENU', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'LOAN_LETTER_UPLOAD_MAKER', 	'WF Maker for NOC Loan Letter Upload', 		0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'LOAN_LETTER_UPLOAD_APPROVER', 'WF Approver for NOC Loan Letter Upload', 	0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'LOAN_LETTER_UPLOAD_VIEW', 	'WF View for NOC Loan Letter Upload', 		0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
				
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_LETTER_UPLOAD_MAKER'),    (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_loan_letter_upload_Maker'),    1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_LETTER_UPLOAD_APPROVER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_loan_letter_upload_Approver'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_LETTER_UPLOAD_VIEW'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_loan_letter_upload_Maker'), 		1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_LETTER_UPLOAD_VIEW'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_loan_letter_upload_Approver'), 	1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);

				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'LOAN_LETTER_UPLOAD_MAKER', 'Maker role from  NOC Loan Letter Upload', 		 '', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0); 
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'LOAN_LETTER_UPLOAD_APPROVER', 'Approver role from  NOC Loan Letter Upload', '', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'LOAN_LETTER_UPLOAD_VIEW', 'Menu role from  NOC Loan Letter Upload', 		 '', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);

				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_LETTER_UPLOAD_MAKER'), 	(SELECT ROLEID FROM SECROLES WHERE ROLECD = 'LOAN_LETTER_UPLOAD_MAKER'), 	0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_LETTER_UPLOAD_APPROVER'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'LOAN_LETTER_UPLOAD_APPROVER'), 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_LETTER_UPLOAD_VIEW'), 	(SELECT ROLEID FROM SECROLES WHERE ROLECD = 'LOAN_LETTER_UPLOAD_VIEW'), 	0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_LETTER_UPLOAD_MAKER'), 	(SELECT ROLEID FROM SECROLES WHERE ROLECD = 'LOAN_LETTER_UPLOAD_VIEW'), 	0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_LETTER_UPLOAD_APPROVER'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'LOAN_LETTER_UPLOAD_VIEW'), 	0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#1561.44" author="VinayKumar.K">
		<createTable tableName="COURIER_DETAILS_UPLOAD">
			<column name="Id" type="bigint" autoIncrement="true">
				<constraints nullable="false" />
			</column>
			<column name="HeaderId" type="bigint" />
			<column name="RecordSeq" type="bigint" />
			<column name="FinID" type="bigint" />
			<column name="FinReference" type="Varchar(20)" />
			<column name="LetterType" type="Varchar(30)" />
			<column name="LetterDate" type="datetime" />
			<column name="DispatchDate" type="datetime" />
			<column name="CourierAgency" type="Varchar(50)" />
			<column name="Deliverystatus" type="char(1)" />
			<column name="DeliveryDate" type="datetime" />
			<column name="Status" type="char(1)" />
			<column name="Progress" type="int" />
			<column name="ErrorCode" type="Varchar(20)" />
			<column name="ErrorDesc" type="Varchar(2000)" />
		</createTable>
	</changeSet>

	<changeSet id="ST#1561.45" author="VinayKumar.K">
		<addPrimaryKey constraintName="PK_COURIER_DETAILS_UPLOAD_ID" tableName="COURIER_DETAILS_UPLOAD" columnNames="ID" />
	</changeSet>

	<changeSet id="ST#1561.46" author="VinayKumar.K">
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='COURIER_DETAILS_UPLOAD');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='COURIER_DETAILS_UPLOAD');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='COURIER_DETAILS_UPLOAD';
 				
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'COURIER_DETAILS_UPLOAD'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'COURIER_DETAILS_UPLOAD');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'COURIER_DETAILS_UPLOAD';

				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE, MAXRECORDS) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'COURIER_DETAILS_UPLOAD', 'Bulk CourierDetail Upload File.', 12, 'COURIERDETAILS', null, null, ',', 1, 1, null, 'ROW:{Loan Reference, Letter Type, Letter Date, Dispatch Date, Courier Agency, Delivery Status, Delivery Date}', null, 'C', '/opt/pff/hdfc/bulkCourierDetails/upload', 'bulkCourierDetails_', '.xlsx', 0, CURRENT_TIMESTAMP, '${ddmm},.${SEQ_DATE_FILE}', null, '0', NULL, 1, 1, 10000);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'COURIER_DETAILS_UPLOAD'), 'COURIER_DETAILS_UPLOAD', 1, 'ID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 7, 0, 0);
								
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'COURIER_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'COURIER_DETAILS_UPLOAD')), 'finReference',  		 0, 'N', NULL, NULL, NULL,             NULL, '0',  NULL, NULL, NULL,  NULL,         	'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'COURIER_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'COURIER_DETAILS_UPLOAD')), 'letterType',    		 0, 'N', NULL, NULL, NULL,             NULL, '1',  NULL, NULL, NULL,  NULL,         	'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'COURIER_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'COURIER_DETAILS_UPLOAD')), 'letterDate',    		 0, 'N', NULL, NULL, NULL,             NULL, '2' , NULL, NULL, NULL, 'dd-MMM-yyyy', 	'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'COURIER_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'COURIER_DETAILS_UPLOAD')), 'dispatchDate',  		 0, 'N', NULL, NULL, NULL,             NULL, '3' , NULL, NULL, NULL, 'dd-MMM-yyyy', 	'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'COURIER_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'COURIER_DETAILS_UPLOAD')), 'courierAgency', 		 0, 'N', NULL, NULL, NULL,             NULL, '4' , NULL, NULL, NULL,  NULL, 			'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'COURIER_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'COURIER_DETAILS_UPLOAD')), 'deliveryStatus', 	 0, 'N', NULL, NULL, NULL,             NULL, '5' , NULL, NULL, NULL,  NULL, 			'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'COURIER_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'COURIER_DETAILS_UPLOAD')), 'deliveryDate',     	 0, 'N', NULL, NULL, NULL,             NULL, '6' , NULL, NULL, NULL, 'dd-MMM-yyyy', 	'O');
	 		]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1561.47" author="VinayKumar.K">
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='COURIER_DETAILS_TEMPLATE');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='COURIER_DETAILS_TEMPLATE');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='COURIER_DETAILS_TEMPLATE';
							
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'COURIER_DETAILS_TEMPLATE'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID IN (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'COURIER_DETAILS_TEMPLATE');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'COURIER_DETAILS_TEMPLATE';
							
				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'COURIER_DETAILS_TEMPLATE', 'Bulk CourierDetail template download', 3, 'COURIERDETAILS', NULL, NULL, ',' , 0, 0, NULL, 'ROW:{Loan Reference, Letter Type, Letter Date, Dispatch Date, Courier Agency, Delivery Status, Delivery Date}', NULL, 'A', '/opt/pff/hdfc/bulkCourierDetails/template', 'bulkCourierDetails_', '.xlsx', 0, current_timestamp, '${ddMMYYYYHms}', NULL, 0, NULL, 1, 1);
				
				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'COURIER_DETAILS_TEMPLATE'), 'COURIER_DETAILS_UPLOAD',  0, 'ID', 'HEADERID = :HEADERID', NULL, NULL, NULL, NULL, NULL, NULL, 7, 0, 0);
				
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'COURIER_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'COURIER_DETAILS_TEMPLATE')),  'FINREFERENCE',     0, 'N', NULL, NULL, NULL, NULL, '0',  NULL, NULL, NULL,  NULL,'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'COURIER_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'COURIER_DETAILS_TEMPLATE')),  'LETTERTYPE',       0, 'N', NULL, NULL, NULL, NULL, '1',  NULL, NULL, NULL,  NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'COURIER_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'COURIER_DETAILS_TEMPLATE')),  'LETTERDATE',   	 0, 'N', NULL, NULL, NULL, NULL, '2' , NULL, NULL, NULL, 'dd-MMM-yyyy','M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'COURIER_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'COURIER_DETAILS_TEMPLATE')),  'DISPATCHDATE',     0, 'N', NULL, NULL, NULL, NULL, '3' , NULL, NULL, NULL, 'dd-MMM-yyyy','M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'COURIER_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'COURIER_DETAILS_TEMPLATE')),  'COURIERAGENCY',    0, 'N', NULL, NULL, NULL, NULL, '4' , NULL, NULL, NULL,  NULL,'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'COURIER_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'COURIER_DETAILS_TEMPLATE')),  'DELIVERYSTATUS',   0, 'N', NULL, NULL, NULL, NULL, '5' , NULL, NULL, NULL,  NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'COURIER_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'COURIER_DETAILS_TEMPLATE')),  'DELIVERYDATE',     0, 'N', NULL, NULL, NULL, NULL, '6' , NULL, NULL, NULL, 'dd-MMM-yyyy','O');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1561.48" author="VinayKumar.K">
		<sql>
			<![CDATA[
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'COURIER_DETAILS_UPLOAD_MAKER');
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'COURIER_DETAILS_UPLOAD_APPROVER');
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'COURIER_DETAILS_UPLOAD_VIEW');

				DELETE FROM SECROLES WHERE ROLECD ='COURIER_DETAILS_UPLOAD_MAKER';
				DELETE FROM SECROLES WHERE ROLECD ='COURIER_DETAILS_UPLOAD_APPROVER';
				DELETE FROM SECROLES WHERE ROLECD ='COURIER_DETAILS_UPLOAD_VIEW';

				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'COURIER_DETAILS_UPLOAD_MAKER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'COURIER_DETAILS_UPLOAD_APPROVER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'COURIER_DETAILS_UPLOAD_VIEW');

				DELETE FROM SECGROUPS WHERE GRPCODE ='COURIER_DETAILS_UPLOAD_MAKER';
				DELETE FROM SECGROUPS WHERE GRPCODE ='COURIER_DETAILS_UPLOAD_APPROVER';
				DELETE FROM SECGROUPS WHERE GRPCODE ='COURIER_DETAILS_UPLOAD_VIEW';

				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='menu_Item_courier_details_upload_Maker';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='menu_Item_courier_details_upload_Approver';

				INSERT INTO SECRIGHTS(RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_courier_details_upload_Maker',    'MENU', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS(RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_courier_details_upload_Approver', 'MENU', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'COURIER_DETAILS_UPLOAD_VIEW', 	   'Menu group for LetterCourierDetail Upload',  0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
				
				INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'COURIER_DETAILS_UPLOAD_MAKER',    'WF Maker for LetterCourierDetail Upload',    0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'COURIER_DETAILS_UPLOAD_APPROVER',  'WF Approver for LetterCourierDetail Upload', 0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);

				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'COURIER_DETAILS_UPLOAD_MAKER'),     (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_courier_details_upload_Maker'),       1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'COURIER_DETAILS_UPLOAD_APPROVER'),  (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_courier_details_upload_Approver'),    1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'COURIER_DETAILS_UPLOAD_VIEW'), 	 (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_courier_details_upload_Maker'), 	  1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'COURIER_DETAILS_UPLOAD_VIEW'), 	 (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_courier_details_upload_Approver'),    1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);

				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'COURIER_DETAILS_UPLOAD_MAKER',    'Maker role from LetterCourierDetail Upload',      '',  0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0); 
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'COURIER_DETAILS_UPLOAD_APPROVER', 'Approver role from LetterCourierDetail Upload',	 '',  0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'COURIER_DETAILS_UPLOAD_VIEW', 	 'Menu role for LetterCourierDetail Upload',		 '',  0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);

				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'COURIER_DETAILS_UPLOAD_MAKER'),    (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'COURIER_DETAILS_UPLOAD_MAKER'),     0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'COURIER_DETAILS_UPLOAD_APPROVER'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'COURIER_DETAILS_UPLOAD_APPROVER'),  0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'COURIER_DETAILS_UPLOAD_VIEW'), 	   (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'COURIER_DETAILS_UPLOAD_VIEW'), 	   0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'COURIER_DETAILS_UPLOAD_MAKER'),    (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'COURIER_DETAILS_UPLOAD_VIEW'), 	   0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'COURIER_DETAILS_UPLOAD_APPROVER'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'COURIER_DETAILS_UPLOAD_VIEW'), 	   0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#1561.49" author="sainaveen.y">
		<createTable tableName="BLOCK_AUTO_GEN_LTR_UPLOAD">
			<column name="Id" type="bigint" autoIncrement="true">
				<constraints nullable="false" />
			</column>
			<column name="HeaderId" type="bigint" />
			<column name="RecordSeq" type="bigint" />
			<column name="FinID" type="bigint" />
			<column name="FinReference" type="varchar(20)" />
			<column name="Action" type="char(1)" />
			<column name="Remarks" type="varchar(100)" />
			<column name="Progress" type="int" />
			<column name="Status" type="char(1)" />
			<column name="ErrorCode" type="varchar(20)" />
			<column name="ErrorDesc" type="varchar(2000)" />
		</createTable>
	</changeSet>

	<changeSet id="ST#1561.50" author="sainaveen.y">
		<addPrimaryKey tableName="BLOCK_AUTO_GEN_LTR_UPLOAD" columnNames="Id" constraintName="PK_BCK_AUTO_GEN_LTR_UPLOAD_ID" />
	</changeSet>
	
	<changeSet id="ST#1561.51" author="sainaveen.y">
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='BLOCK_AUTO_GEN_LTR_UPLOAD');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='BLOCK_AUTO_GEN_LTR_UPLOAD');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='BLOCK_AUTO_GEN_LTR_UPLOAD';
 				
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'BLOCK_AUTO_GEN_LTR_UPLOAD'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'BLOCK_AUTO_GEN_LTR_UPLOAD');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'BLOCK_AUTO_GEN_LTR_UPLOAD';

                INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE, MAXRECORDS) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'BLOCK_AUTO_GEN_LTR_UPLOAD', 'Block Auto Letter Generate Upload Upload File.', 12, 'BLOCK_AUTO_LETTER_GENERATE', null, null, ',', 0, 1, null, 'ROW:{Loan Reference, Action, Remarks}', null, 'C', '/opt/PFF/BASE/hdfc/BlockAutoLetterGenerateUpload/upload', 'BLOCK_AUTO_LETTER_GENERATE_', '.xlsx', 0, CURRENT_TIMESTAMP, '${ddmm},.${SEQ_DATE_FILE}', NULL, 0, NULL, 1, 1, 10000);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'BLOCK_AUTO_GEN_LTR_UPLOAD'), 'BLOCK_AUTO_GEN_LTR_UPLOAD', 1, 'HEADERID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 3, 0, 0);

				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'BLOCK_AUTO_GEN_LTR_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'BLOCK_AUTO_GEN_LTR_UPLOAD')), 'finReference',  0, 'N', NULL, NULL,  NULL,            NULL, '0',  NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'BLOCK_AUTO_GEN_LTR_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'BLOCK_AUTO_GEN_LTR_UPLOAD')), 'action',        0, 'N', NULL, NULL,  NULL,            NULL, '1',  NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'BLOCK_AUTO_GEN_LTR_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'BLOCK_AUTO_GEN_LTR_UPLOAD')), 'remarks', 	     0, 'N', NULL, NULL,  NULL,            NULL, '2',  NULL, NULL, NULL, NULL, 'O');
			 ]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1561.52" author="sainaveen.y">
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='BLOCK_AUTO_GEN_LTR_TEMPLATE');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='BLOCK_AUTO_GEN_LTR_TEMPLATE');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='BLOCK_AUTO_GEN_LTR_TEMPLATE';
							
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'BLOCK_AUTO_GEN_LTR_TEMPLATE'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID IN (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'BLOCK_AUTO_GEN_LTR_TEMPLATE');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'BLOCK_AUTO_GEN_LTR_TEMPLATE';
							
				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'BLOCK_AUTO_GEN_LTR_TEMPLATE', 'Block Auto Letter Generate template download', 3, 'BLOCK_AUTO_LETTER_GENERATE', NULL, NULL, ',' , 0, 0, NULL, 'ROW:{Loan Reference, Action, Remarks}',  '', 'A', '/opt/PFF/BASE/hdfc/BlockAutoLetterGenerateUpload/template', 'BLOCK_AUTO_LETTER_GENERATE_', '.xlsx', 0, current_timestamp, '${ddMMYYYYHms}', NULL, 0, NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'BLOCK_AUTO_GEN_LTR_TEMPLATE'), 'BLOCK_AUTO_GEN_LTR_UPLOAD',  0, 'ID', 'HEADERID = :HEADERID', NULL, NULL, NULL, NULL, NULL, NULL, 3, 0, 0);
				
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'BLOCK_AUTO_GEN_LTR_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'BLOCK_AUTO_GEN_LTR_TEMPLATE')), 'FINREFERENCE', 0, 'N', NULL, NULL, NULL, NULL, '0',  NULL, NULL, NULL, NULL,  'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'BLOCK_AUTO_GEN_LTR_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'BLOCK_AUTO_GEN_LTR_TEMPLATE')), 'ACTION',       0, 'N', NULL, NULL, NULL, NULL, '1',  NULL, NULL, NULL, NULL,  'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'BLOCK_AUTO_GEN_LTR_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'BLOCK_AUTO_GEN_LTR_TEMPLATE')), 'REMARKS',      0, 'N', NULL, NULL, NULL, NULL, '2',  NULL, NULL, NULL, NULL,  'O');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1561.53" author="sainaveen.y">
		<sql>
			<![CDATA[
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'BLOCK_AUTO_GEN_LTR_UPLOAD_MAKER');
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'BLOCK_AUTO_GEN_LTR_UPLOAD_APPROVER');
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'BLOCK_AUTO_GEN_LTR_UPLOAD_VIEW');

				DELETE FROM SECROLES WHERE ROLECD ='BLOCK_AUTO_GEN_LTR_UPLOAD_MAKER';
				DELETE FROM SECROLES WHERE ROLECD ='BLOCK_AUTO_GEN_LTR_UPLOAD_APPROVER';
				DELETE FROM SECROLES WHERE ROLECD ='BLOCK_AUTO_GEN_LTR_UPLOAD_VIEW';

				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'BLOCK_AUTO_GEN_LTR_UPLOAD_MAKER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'BLOCK_AUTO_GEN_LTR_UPLOAD_APPROVER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'BLOCK_AUTO_GEN_LTR_UPLOAD_VIEW');

				DELETE FROM SECGROUPS WHERE GRPCODE ='BLOCK_AUTO_GEN_LTR_UPLOAD_MAKER';
				DELETE FROM SECGROUPS WHERE GRPCODE ='BLOCK_AUTO_GEN_LTR_UPLOAD_APPROVER';
				DELETE FROM SECGROUPS WHERE GRPCODE ='BLOCK_AUTO_GEN_LTR_UPLOAD_VIEW';

				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='menu_Item_BlockAutoGenerateLetterUpload_Maker';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='menu_Item_BlockAutoGenerateLetterUpload_Approver';

				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_BlockAutoGenerateLetterUpload_Maker',    'MENU', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_BlockAutoGenerateLetterUpload_Approver', 'MENU', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SECGROUPS (GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'BLOCK_AUTO_GEN_LTR_UPLOAD_MAKER',    'WF Maker for Block Auto Letter Generate Upload',       0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPS (GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'BLOCK_AUTO_GEN_LTR_UPLOAD_APPROVER', 'WF Approver for Block Auto Letter Generate Upload',    0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
                INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS),  'BLOCK_AUTO_GEN_LTR_UPLOAD_VIEW', 	'Menu group for Block Auto Letter Generate Upload',     0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);

				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'BLOCK_AUTO_GEN_LTR_UPLOAD_MAKER'),    (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_BlockAutoGenerateLetterUpload_Maker'),      1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'BLOCK_AUTO_GEN_LTR_UPLOAD_APPROVER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_BlockAutoGenerateLetterUpload_Approver'),   1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'BLOCK_AUTO_GEN_LTR_UPLOAD_VIEW'),     (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_BlockAutoGenerateLetterUpload_Maker'), 		1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'BLOCK_AUTO_GEN_LTR_UPLOAD_VIEW'), 	(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_BlockAutoGenerateLetterUpload_Approver'), 	1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);

				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'BLOCK_AUTO_GEN_LTR_UPLOAD_MAKER',    'Maker role from Block Auto Letter Generate Upload',     '', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0); 
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'BLOCK_AUTO_GEN_LTR_UPLOAD_APPROVER', 'Approver role from Block Auto Letter Generate Upload',  '', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'BLOCK_AUTO_GEN_LTR_UPLOAD_VIEW',     'Menu role for Block Auto Letter Generate Upload',       '', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);

				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'BLOCK_AUTO_GEN_LTR_UPLOAD_MAKER'),    (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'BLOCK_AUTO_GEN_LTR_UPLOAD_MAKER'),    0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'BLOCK_AUTO_GEN_LTR_UPLOAD_APPROVER'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'BLOCK_AUTO_GEN_LTR_UPLOAD_APPROVER'), 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'BLOCK_AUTO_GEN_LTR_UPLOAD_VIEW'), 	   (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'BLOCK_AUTO_GEN_LTR_UPLOAD_VIEW'), 	  0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#1561.54" author="sainaveen.y">
		<createTable tableName="BLOCK_AUTO_GEN_LTR_LOG">
			<column name="Id" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="HeaderId" type="bigint" />
			<column name="FinID" type="bigint" />
			<column name="FinReference" type="varchar(20)" />
			<column name="Action" type="char(1)" />
			<column name="Remarks" type="varchar(100)" />
			<column name="Progress" type="int" />
			<column name="Status" type="char(1)" />
			<column name="ErrorCode" type="varchar(20)" />
			<column name="ErrorDesc" type="varchar(2000)" />
			<column name="CreatedOn" type="datetime" />
			<column name="CreatedBy" type="bigint" />
			<column name="ApprovedOn" type="datetime" />
			<column name="ApprovedBy" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet id="ST#1561.55" author="sainaveen.y">
		<addPrimaryKey tableName="BLOCK_AUTO_GEN_LTR_LOG" columnNames="Id" constraintName="PK_BLOCK_AUTO_GEN_LTR_LOG_ID" />
	</changeSet>
	
	<changeSet id="ST#1561.56" author="sainaveen.y">
		<sql>
			<![CDATA[
				DELETE FROM JOB_DETAILS WHERE JOBKEY = 'COURIER_DETAILS_JOB';
				DELETE FROM JOB_DETAILS WHERE JOBKEY = 'LOAN_LETTER_JOB';
				DELETE FROM JOB_DETAILS WHERE JOBKEY = 'BLOCK_AUTO_GEN_LETTER_JOB';

				INSERT INTO JOB_DETAILS (ID, JOBKEY, DESCRIPTION, JOBTRIGGER, CRON_EXPRESSION, JOBMODE, STATUS, ENABLED, FAILURE_NOTIFICATION_REQ, HOST_NAME, PORT, JMX_PORT, SMTP_SERVER, NOTIFY_EMAILS, EXECUTION_LOG_REQ, EXECUTION_RETENTION_DAYS, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, MONITORING_REQ) VALUES ((SELECT MAX(ID)+1 FROM JOB_DETAILS), 'COURIER_DETAILS_JOB', 		'COURIER DETAILS JOB',	 		'COURIER_DETAILS_JOB_TRIGGER', 			'0 0/10 * 1/1 * ? *', 1, 0, 1, 0, NULL, NULL, 0, NULL, NULL, 1, 0, 0, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1); 
				INSERT INTO JOB_DETAILS (ID, JOBKEY, DESCRIPTION, JOBTRIGGER, CRON_EXPRESSION, JOBMODE, STATUS, ENABLED, FAILURE_NOTIFICATION_REQ, HOST_NAME, PORT, JMX_PORT, SMTP_SERVER, NOTIFY_EMAILS, EXECUTION_LOG_REQ, EXECUTION_RETENTION_DAYS, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, MONITORING_REQ) VALUES ((SELECT MAX(ID)+1 FROM JOB_DETAILS), 'LOAN_LETTER_JOB', 			'LOAN LETTER JOB', 				'LOAN_LETTER_JOB_TRIGGER', 				'0 0/10 * 1/1 * ? *', 1, 0, 1, 0, NULL, NULL, 0, NULL, NULL, 1, 0, 0, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1); 
				INSERT INTO JOB_DETAILS (ID, JOBKEY, DESCRIPTION, JOBTRIGGER, CRON_EXPRESSION, JOBMODE, STATUS, ENABLED, FAILURE_NOTIFICATION_REQ, HOST_NAME, PORT, JMX_PORT, SMTP_SERVER, NOTIFY_EMAILS, EXECUTION_LOG_REQ, EXECUTION_RETENTION_DAYS, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, MONITORING_REQ) VALUES ((SELECT MAX(ID)+1 FROM JOB_DETAILS), 'BLOCK_AUTO_GEN_LETTER_JOB', 			'BLOCK AUTO GEN LETTER JOB', 			'BLOCK_AUTO_GEN_LETTER_JOB_TRIGGER', 			'0 0/10 * 1/1 * ? *', 1, 0, 1, 0, NULL, NULL, 0, NULL, NULL, 1, 0, 0, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1);
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#1561.57" author="saikrishna.b" >
		<sql>
			<![CDATA[
				DELETE FROM REPORTLIST WHERE CODE = 'ServiceBranch';
				
				INSERT INTO REPORTLIST (CODE, MODULE, FIELDLABELS, FIELDVALUES, FIELDTYPE, ADDFIELDS, REPORTFILENAME, REPORTHEADING, MODULETYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, FORMATREQ) VALUES ('ServiceBranch', 'ServiceBranch', 'listheaderServiceBranch_Code.label,listheaderServiceBranch_Description.label,listheaderServiceBranch_PinCode.label,listheaderServiceBranch_CityName.label', 'code,description,pinCode,city', 'String,String,String,String', '', 'ReportList04', 'Service Branch Enquiry', 'Application Masters', 1, 1001, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0, 0);
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#1561.58" author="saikrishna.b">
		<sql>
			<![CDATA[
				DELETE FROM REPORTLIST WHERE CODE = 'LoanTypeLetterMapping';
				
				INSERT INTO REPORTLIST (CODE, MODULE, FIELDLABELS, FIELDVALUES, FIELDTYPE, ADDFIELDS, REPORTFILENAME, REPORTHEADING, MODULETYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, FORMATREQ) VALUES ('LoanTypeLetterMapping', 'LoanTypeLetterMapping', 'listheaderFinType.label', 'finType', 'String', '', 'ReportList01', 'Letter Mapping Enquiry', 'Application Masters', 1, 1001, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0, 0);
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#1684.1" author="saikiran.n">
		<createTable tableName="Loan_Closure_Upload">
			<column name="Id" type="bigint" autoIncrement="true">
				<constraints nullable="false" />
			</column>
			<column name="HeaderId" type="bigint" />
			<column name="RecordSeq" type="bigint" />
			<column name="FinId" type="bigint" />
			<column name="FinReference" type="varchar(20)" />
			<column name="Remarks" type="varchar(500)" />
			<column name="ReasonCode" type="varchar(20)" />
			<column name="Closuretype" type="varchar(20)" />
			<column name="AllocationType" type="varchar(30)" />
			<column name="Progress" type="int" />
			<column name="Status" type="char(1)" />
			<column name="ErrorCode" type="varchar(20)" />
			<column name="ErrorDesc" type="varchar(2000)" />
		</createTable>
	</changeSet>

	<changeSet id="ST#1684.2" author="saikiran.n">
		<addPrimaryKey constraintName="PK_LOAN_CLOSURE_UPLD_ID" tableName="Loan_Closure_Upload"
			columnNames="Id" />
	</changeSet>
 
	<changeSet id="ST#1684.3" author="saikiran.n">
		<sql>
			<![CDATA[		
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='LOAN_CLOSURE_UPLOAD');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='LOAN_CLOSURE_UPLOAD');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='LOAN_CLOSURE_UPLOAD';
 				
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_CLOSURE_UPLOAD'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_CLOSURE_UPLOAD');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_CLOSURE_UPLOAD';
				
				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE, MAXRECORDS) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'LOAN_CLOSURE_UPLOAD', ' LOAN CLOSURE DETAILS UPLOAD FILE.', 12, 'LOANCLOSUREDETAILS', null, null, ',', 1, 1, null, 'ROW:{Loan Reference, Closure Type, Remarks, Reason, Principal_W, Interest_W, FeeType1_W}', null, 'C', '/opt/pff/hdfc/LoanClosureUpload/upload', 'Loan_Closure_dtls_', '.xlsx', 0, CURRENT_TIMESTAMP, '${ddmm},.${SEQ_DATE_FILE}', NULL, '0', NULL, 1, 1, 10000);
		
				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_CLOSURE_UPLOAD'), 'LOAN_CLOSURE_UPLOAD', 1, 'ID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 0, 0, 0);
				
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LOAN_CLOSURE_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_CLOSURE_UPLOAD')), 'finReference', 	0, 'N', NULL, NULL, NULL, NULL, '0', NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LOAN_CLOSURE_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_CLOSURE_UPLOAD')), 'closureType',  	0, 'N', NULL, NULL, NULL, NULL, '1', NULL, NULL, NULL, NULL, 'O');	
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LOAN_CLOSURE_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_CLOSURE_UPLOAD')), 'remarks',     		0, 'N', NULL, NULL, NULL, NULL, '2', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LOAN_CLOSURE_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_CLOSURE_UPLOAD')), 'reasonCode',   	0, 'N', NULL, NULL, NULL, NULL, '3', NULL, NULL, NULL, NULL, 'O');		
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LOAN_CLOSURE_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_CLOSURE_UPLOAD')), 'allocationType',  	0, 'N', NULL, NULL, NULL, NULL, '4', NULL, NULL, NULL, NULL, 'O');	
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1684.4" author="saikiran.n">
		<sql>
			<![CDATA[	
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='LOAN_CLOSURE_TEMPLATE');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='LOAN_CLOSURE_TEMPLATE');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='LOAN_CLOSURE_TEMPLATE';
							
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_CLOSURE_TEMPLATE'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID IN (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_CLOSURE_TEMPLATE');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_CLOSURE_TEMPLATE';
							
				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'LOAN_CLOSURE_TEMPLATE', 'LOAN CLOSURE TEMPLATE FILE.', 3, 'LOANCLOSUREDETAILS', null, null, ',', 0, 0, null, 'ROW:{Loan Reference, Closure Type, Remarks, Reason, Principal_W, Interest_W, FeeType1_W}', null, 'A', '/opt/pff/hdfc/LoanClosureUpload/Template', 'Loan_Closure_dtls_', '.xlsx', 0, CURRENT_TIMESTAMP, '${ddMMYYYYHms}', NULL, '0', NULL, 1, 1);
		
				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_CLOSURE_TEMPLATE'), 'LOAN_CLOSURE_UPLOAD', 0, 'ID', 'HEADERID = :HEADERID', NULL, NULL, NULL, NULL, NULL, NULL, 0, 0, 0);
				
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LOAN_CLOSURE_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_CLOSURE_TEMPLATE')), 'finReference',	0, 'N', NULL, NULL, NULL, NULL, '0', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LOAN_CLOSURE_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_CLOSURE_TEMPLATE')), 'remarks',  	   	0, 'N', NULL, NULL, NULL, NULL, '1', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LOAN_CLOSURE_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_CLOSURE_TEMPLATE')), 'reasonCode', 	0, 'N', NULL, NULL, NULL, NULL, '2', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LOAN_CLOSURE_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_CLOSURE_TEMPLATE')), 'closureType', 	0, 'N', NULL, NULL, NULL, NULL, '3', NULL, NULL, NULL, NULL, 'O');	
			]]>
		</sql>
	</changeSet>

 	<changeSet id="ST#1684.5" author="saikiran.n">
		<sql>
			<![CDATA[
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_CLOSURE_UPLOAD_MAKER');
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_CLOSURE_UPLOAD_APPROVER');
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_CLOSURE_UPLOAD_VIEW');

				DELETE FROM SECROLES WHERE ROLECD ='LOAN_CLOSURE_UPLOAD_MAKER';
				DELETE FROM SECROLES WHERE ROLECD ='LOAN_CLOSURE_UPLOAD_APPROVER';
				DELETE FROM SECROLES WHERE ROLECD ='LOAN_CLOSURE_UPLOAD_VIEW';

				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_CLOSURE_UPLOAD_MAKER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_CLOSURE_UPLOAD_APPROVER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_CLOSURE_UPLOAD_VIEW');

				DELETE FROM SECGROUPS WHERE GRPCODE ='LOAN_CLOSURE_UPLOAD_MAKER';
				DELETE FROM SECGROUPS WHERE GRPCODE ='LOAN_CLOSURE_UPLOAD_APPROVER';
				DELETE FROM SECGROUPS WHERE GRPCODE ='LOAN_CLOSURE_UPLOAD_VIEW';

				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='menu_Item_Loan_Closure_Upload_Maker';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='menu_Item_Loan_Closure_Upload_Approver';

				INSERT INTO SECRIGHTS(RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_Loan_Closure_Upload_Maker', 'MENU', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS(RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_Loan_Closure_Upload_Approver', 'MENU', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'LOAN_CLOSURE_UPLOAD_MAKER', 'WF Maker for Cust kyc Dtls Upload', 0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'LOAN_CLOSURE_UPLOAD_APPROVER', 'WF Approver for  Cust kyc Dtls Upload', 0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'LOAN_CLOSURE_UPLOAD_VIEW', '', 0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
				
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_CLOSURE_UPLOAD_MAKER'),    (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_Loan_Closure_Upload_Maker'),    1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_CLOSURE_UPLOAD_APPROVER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_Loan_Closure_Upload_Approver'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_CLOSURE_UPLOAD_VIEW'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_Loan_Closure_Upload_Maker'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_CLOSURE_UPLOAD_VIEW'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_Loan_Closure_Upload_Approver'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);

				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'LOAN_CLOSURE_UPLOAD_MAKER', 'Maker role from Loan Closure Dtls Upload', '', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0); 
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'LOAN_CLOSURE_UPLOAD_APPROVER', 'Approver role from Loan Closure Dtls Upload', '', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'LOAN_CLOSURE_UPLOAD_VIEW', 'Menu role from Loan Closure Dtls Upload', '', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);

				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_CLOSURE_UPLOAD_MAKER'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'LOAN_CLOSURE_UPLOAD_MAKER'), 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_CLOSURE_UPLOAD_APPROVER'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'LOAN_CLOSURE_UPLOAD_APPROVER'), 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_CLOSURE_UPLOAD_VIEW'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'LOAN_CLOSURE_UPLOAD_VIEW'), 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_CLOSURE_UPLOAD_MAKER'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'LOAN_CLOSURE_UPLOAD_VIEW'), 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LOAN_CLOSURE_UPLOAD_APPROVER'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'LOAN_CLOSURE_UPLOAD_VIEW'), 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1684.7" author="saikiran.n">
		<sql>
		 	<![CDATA[ 
		 		INSERT INTO JOB_DETAILS (ID, JOBKEY, DESCRIPTION, JOBTRIGGER, CRON_EXPRESSION, JOBMODE, STATUS, ENABLED, FAILURE_NOTIFICATION_REQ, HOST_NAME, PORT, JMX_PORT, SMTP_SERVER, NOTIFY_EMAILS, EXECUTION_LOG_REQ, EXECUTION_RETENTION_DAYS, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, MONITORING_REQ) VALUES ((SELECT MAX(ID)+1 FROM JOB_DETAILS), 'LOAN_CLOSURE_JOB', 'LOAN_CLOSURE_JOB', 'LOAN_CLOSURE_JOB_TRIGGER', '0 0/10 * 1/1 * ? *', 1, 0, 1, 0, NULL, NULL, 0, NULL, NULL, 1, 0, 0, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1);
 			]]>
		</sql>
	</changeSet>
	
	<changeSet id="PSD#225109_pre" author="saikrishna.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'write_off_upload_log');
			]]>
		</sql>
	</changeSet>

	<changeSet id="PSD#225109" author="saikrishna.b">
		<modifyDataType tableName="WRITE_OFF_UPLOAD_LOG" columnName="Remarks" newDataType="varchar(100)" />
	</changeSet>

	<changeSet id="PSD#225109_post" author="saikrishna.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'write_off_upload_log');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#1469.25.14_1" author="nagavamsi.p">
		<addColumn tableName="Loan_Provisions">
			<column name="ManualAssetClassID" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1469.25.15_1" author="nagavamsi.p">
		<addColumn tableName="Loan_Provisions_Temp">
			<column name="ManualAssetClassID" type="bigint" />
		</addColumn>
	</changeSet>
	<changeSet id="ST#1469.25.28_1" author="nagavamsi.p">
		<addColumn tableName="Loan_Provisions">
			<column name="ManualAssetSubClassID" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1469.25.29_1" author="nagavamsi.p">
		<addColumn tableName="Loan_Provisions_Temp">
			<column name="ManualAssetSubClassID" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1469.25.16" author="nagavamsi.p">
		<addColumn tableName="Loan_Provisions">
			<column name="NewRegProvisionPer" type="decimal(5,2)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1469.25.17" author="nagavamsi.p">
		<addColumn tableName="Loan_Provisions">
			<column name="NewRegProvisionAmt" type="decimal(18,0)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1469.25.18" author="nagavamsi.p">
		<addColumn tableName="Loan_Provisions">
			<column name="NewIntProvisionPer" type="decimal(5,2)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1469.25.19" author="nagavamsi.p">
		<addColumn tableName="Loan_Provisions">
			<column name="NewIntProvisionAmt" type="decimal(18,0)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1469.25.20" author="nagavamsi.p">
		<addColumn tableName="Loan_Provisions_Temp">
			<column name="NewRegProvisionPer" type="decimal(5,2)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1469.25.21" author="nagavamsi.p">
		<addColumn tableName="Loan_Provisions_Temp">
			<column name="NewRegProvisionAmt" type="decimal(18,0)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1469.25.22" author="nagavamsi.p">
		<addColumn tableName="Loan_Provisions_Temp">
			<column name="NewIntProvisionPer" type="decimal(5,2)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1469.25.23" author="nagavamsi.p">
		<addColumn tableName="Loan_Provisions_Temp">
			<column name="NewIntProvisionAmt" type="decimal(18,0)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1469.25.24" author="nagavamsi.p">
		<addColumn tableName="Loan_Provisions">
			<column name="OverRideProvision" type="smallint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1469.25.25" author="nagavamsi.p">
		<addColumn tableName="Loan_Provisions_Temp">
			<column name="OverRideProvision" type="smallint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1469.25.26" author="nagavamsi.p">
		<sql>
			<![CDATA[
				UPDATE Loan_Provisions SET OverRideProvision = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1469.25.27" author="nagavamsi.p">
		<sql>
			<![CDATA[
				UPDATE Loan_Provisions_Temp SET OverRideProvision = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="01" author="sainaveen.y">
		<createTable tableName="PROVISION_UPLOAD">
			<column name="Id" type="bigint" autoIncrement="true">
				<constraints nullable="false" />
			</column>
			<column name="HeaderID" type="bigint" />
			<column name="RecordSeq" type="bigint" />
			<column name="FinID" type="bigint" />
			<column name="FinReference" type="varchar(20)" />
			<column name="AssetClassCode" type="varchar(10)" />
			<column name="AssetSubClassCode" type="varchar(10)" />
			<column name="OverrideProvision" type="char(1)" />
			<column name="ProvisionPercentage" type="decimal(18, 0)" />
			<column name="Progress" type="int" />
			<column name="Status" type="char(1)" />
			<column name="ErrorCode" type="varchar(20)" />
			<column name="ErrorDesc" type="varchar(2000)" />
		</createTable>
	</changeSet>

	<changeSet id="02" author="sainaveen.y">
		<addPrimaryKey constraintName="PK_PROVISION_UPLOAD_ID" tableName="PROVISION_UPLOAD" columnNames="id" />
	</changeSet>

	<changeSet id="03.1" author="sainaveen.y">
		<dropTable tableName="PROVISION_UPLOAD"/>
	</changeSet>
	
	<changeSet id="04.1" author="sainaveen.y">
		<createTable tableName="PROVISION_UPLOAD">
			<column name="Id" type="bigint" autoIncrement="true">
				<constraints nullable="false" />
			</column>
			<column name="HeaderID" type="bigint" />
			<column name="RecordSeq" type="bigint" />
			<column name="FinID" type="bigint" />
			<column name="FinReference" type="varchar(20)" />
			<column name="AssetClassCode" type="varchar(10)" />
			<column name="AssetSubClassCode" type="varchar(10)" />
			<column name="OverrideProvision" type="char(1)" />
			<column name="ProvisionPercentage" type="decimal(5,2)" />
			<column name="Progress" type="int" />
			<column name="Status" type="char(1)" />
			<column name="ErrorCode" type="varchar(20)" />
			<column name="ErrorDesc" type="varchar(2000)" />
		</createTable>
	</changeSet>

	<changeSet id="06.1" author="sainaveen.y">
		<addPrimaryKey constraintName="PK_PROVISION_UPLD_ID" tableName="PROVISION_UPLOAD" columnNames="id" />
	</changeSet>
	
	<changeSet id="07.1" author="sainaveen.y">
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='PROVISION_UPLOAD');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='PROVISION_UPLOAD');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='PROVISION_UPLOAD';
 				
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'PROVISION_UPLOAD'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'PROVISION_UPLOAD');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'PROVISION_UPLOAD';

				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'PROVISION_UPLOAD', 'Provision Upload File.', 12, 'PROVISION', null, null, ',', 0, 1, null, 'ROW:{FinReference, Manual Asset Classification, Manual Asset Sub-Classification, Override Provision, Manual Provision%}', null, 'C', '/opt/PFF/BASE/Uploads', 'PROVISION_', '.xlsx', 0, CURRENT_TIMESTAMP, '${ddmm},.${SEQ_DATE_FILE}', null, '0', NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'PROVISION_UPLOAD'), 'PROVISION_UPLOAD', 1, 'ID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 5, 0, 0);
								
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'PROVISION_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'PROVISION_UPLOAD')),  'finReference',      	0, 'N', NULL, NULL, NULL, NULL, '0',  NULL, NULL, NULL,  NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'PROVISION_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'PROVISION_UPLOAD')),  'assetClassCode',      	0, 'N', NULL, NULL, NULL, NULL, '1',  NULL, NULL, NULL,  NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'PROVISION_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'PROVISION_UPLOAD')),  'assetSubClassCode',   	0, 'N', NULL, NULL, NULL, NULL, '2',  NULL, NULL, NULL,  NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'PROVISION_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'PROVISION_UPLOAD')),  'overrideProvision',     0, 'N', NULL, NULL, NULL, NULL, '3',  NULL, NULL, NULL, 'AMOUNT_MINOR:0.00', 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'PROVISION_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'PROVISION_UPLOAD')),  'provisionPercentage',   0, 'N', NULL, NULL, NULL, NULL, '4',  NULL, NULL, NULL,  NULL, 'O');
			]]>
		</sql>
	</changeSet>

	<changeSet id="08.1" author="sainaveen.y">
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='PROVISION_TEMPLATE');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='PROVISION_TEMPLATE');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='PROVISION_TEMPLATE';
 				
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'PROVISION_TEMPLATE'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'PROVISION_TEMPLATE');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'PROVISION_TEMPLATE';

				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'PROVISION_TEMPLATE', 'Provision Template Download', 3, 'PROVISION', NULL, NULL, ',' , 0, 0, NULL, 'ROW:{FinReference, Manual Asset Classification, Manual Asset Sub-Classification, Override Provision, Manual Provision%}',  '', 'A', '/opt/PFF/BASE/hdfc/ManualProvisioning/template', 'PROVISION_', '.xlsx', 0, current_timestamp, '${ddMMYYYYHms}', NULL, 0, NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'PROVISION_TEMPLATE'), 'PROVISION_UPLOAD',  0, 'ID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 5, 0, 0);
								
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'PROVISION_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'PROVISION_TEMPLATE')),  'finReference',      	   	 	0, 'N', NULL, NULL, NULL, NULL, '0',  NULL, NULL, NULL,  NULL,               'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'PROVISION_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'PROVISION_TEMPLATE')),  'AssetClassCode',      		0, 'N', NULL, NULL, NULL, NULL, '1',  NULL, NULL, NULL,  NULL,               'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'PROVISION_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'PROVISION_TEMPLATE')),  'AssetSubClassCode',   		0, 'N', NULL, NULL, NULL, NULL, '2',  NULL, NULL, NULL,  NULL,               'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'PROVISION_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'PROVISION_TEMPLATE')),  'overrideProvision',        	0, 'N', NULL, NULL, NULL, NULL, '3',  NULL, NULL, NULL, 'AMOUNT_MINOR:0.00','O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'PROVISION_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'PROVISION_TEMPLATE')),  'provisionPercentage',      	0, 'N', NULL, NULL, NULL, NULL, '4',  NULL, NULL, NULL,  NULL,               'O');
			]]>
		</sql>
	</changeSet>

	<changeSet id="05" author="sainaveen.y">
		<sql>
			<![CDATA[
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'PROVISION_UPLOAD_MAKER');
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'PROVISION_UPLOAD_APPROVER');
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'PROVISION_UPLOAD_VIEW');

				DELETE FROM SECROLES WHERE ROLECD ='PROVISION_UPLOAD_MAKER';
				DELETE FROM SECROLES WHERE ROLECD ='PROVISION_UPLOAD_APPROVER';
				DELETE FROM SECROLES WHERE ROLECD ='PROVISION_UPLOAD_VIEW';

				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'PROVISION_UPLOAD_MAKER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'PROVISION_UPLOAD_APPROVER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'PROVISION_UPLOAD_VIEW');

				DELETE FROM SECGROUPS WHERE GRPCODE ='PROVISION_UPLOAD_MAKER';
				DELETE FROM SECGROUPS WHERE GRPCODE ='PROVISION_UPLOAD_APPROVER';
				DELETE FROM SECGROUPS WHERE GRPCODE ='PROVISION_UPLOAD_VIEW';

				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='menu_Item_Provision_Upload_Maker';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='menu_Item_Provision_Upload_Approver';

				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_Provision_Upload_Maker', 	'MENU',  1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_Provision_Upload_Approver',  'MENU',  1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SECGROUPS (GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'PROVISION_UPLOAD_MAKER', 	'WF Maker for Provision Upload', 		0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPS (GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'PROVISION_UPLOAD_APPROVER', 	'WF Approver for Provision Upload', 	0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPS (GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'PROVISION_UPLOAD_VIEW', 		'WF View for Provision Upload', 		0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);

				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'PROVISION_UPLOAD_MAKER'),    (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_Provision_Upload_Maker'), 		1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'PROVISION_UPLOAD_APPROVER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_Provision_Upload_Approver'), 	1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'PROVISION_UPLOAD_VIEW'),     (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_Provision_Upload_Maker'), 		1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'PROVISION_UPLOAD_VIEW'), 	   (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_Provision_Upload_Approver'), 	1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);

				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'PROVISION_UPLOAD_MAKER', 		'Maker role from Provision Upload', 	'', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0); 
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'PROVISION_UPLOAD_APPROVER',  	'Approver role from Provision Upload',	'', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'PROVISION_UPLOAD_VIEW', 		'View role from Provision Upload',		'', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);

				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'PROVISION_UPLOAD_MAKER'),    (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'PROVISION_UPLOAD_MAKER'),    0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'PROVISION_UPLOAD_APPROVER'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'PROVISION_UPLOAD_APPROVER'), 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'PROVISION_UPLOAD_VIEW'), 	  (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'PROVISION_UPLOAD_VIEW'), 	0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#1528.39_2" author="Sravani.S">
		<sql>
		<![CDATA[
		    DELETE FROM JOB_EXECUTIONS WHERE JOB_ID IN (SELECT ID FROM JOB_DETAILS WHERE JOBKEY in ('EXCESS_TRANSFER_JOB',
                  'HOLD_REFUND_JOB',
                  'REPRESENTMENT_JOB',
                  'MANDATE_JOB',
                  'FATE_CORRECTION_JOB',
                  'PAY_INS_JOB',
                  'LPP_JOB',
                  'CHEQUE_JOB',
                  'CROSSLOAN_KNOCKOFF_JOB',
                  'MANUAL_KNOCKOFF_JOB',
                  'KYC_DETAILS_JOB',
                  'HOST_GL_DETAILS_JOB',
                  'MIS_POST_DETAILS_JOB',
                  'FIN_CAN_DETAILS_JOB',
                  'WAIVER_DETAILS_JOB',
                  'LIEN_DETAILS_JOB',
                  'CREATE_RECEIPT_DETAILS_JOB',
                  'RECEIPT_STATUS_DETAILS_JOB',
                  'WRITE_OFF_DETAILS_JOB',
                  'RE_WRITE_OFF_DETAILS_JOB',
                  'BRANCH_DETAILS_JOB'));
			  ]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1528.39_1" author="Sravani.S">
		<sql>
		 	<![CDATA[ 
		 		DELETE FROM JOB_DETAILS WHERE JOBKEY = 'EXCESS_TRANSFER_JOB';
				DELETE FROM JOB_DETAILS WHERE JOBKEY = 'HOLD_REFUND_JOB';
				DELETE FROM JOB_DETAILS WHERE JOBKEY = 'REPRESENTMENT_JOB';
				DELETE FROM JOB_DETAILS WHERE JOBKEY = 'MANDATE_JOB';
				DELETE FROM JOB_DETAILS WHERE JOBKEY = 'FATE_CORRECTION_JOB';
				DELETE FROM JOB_DETAILS WHERE JOBKEY = 'PAY_INS_JOB';
				DELETE FROM JOB_DETAILS WHERE JOBKEY = 'LPP_JOB';
				DELETE FROM JOB_DETAILS WHERE JOBKEY = 'CHEQUE_JOB';
				DELETE FROM JOB_DETAILS WHERE JOBKEY = 'CROSSLOAN_KNOCKOFF_JOB';
				DELETE FROM JOB_DETAILS WHERE JOBKEY = 'MANUAL_KNOCKOFF_JOB';
				DELETE FROM JOB_DETAILS WHERE JOBKEY = 'KYC_DETAILS_JOB';
				DELETE FROM JOB_DETAILS WHERE JOBKEY = 'HOST_GL_DETAILS_JOB';
				DELETE FROM JOB_DETAILS WHERE JOBKEY = 'MIS_POST_DETAILS_JOB';
				DELETE FROM JOB_DETAILS WHERE JOBKEY = 'FIN_CAN_DETAILS_JOB';
				DELETE FROM JOB_DETAILS WHERE JOBKEY = 'WAIVER_DETAILS_JOB';
				DELETE FROM JOB_DETAILS WHERE JOBKEY = 'LIEN_DETAILS_JOB';
				DELETE FROM JOB_DETAILS WHERE JOBKEY = 'CREATE_RECEIPT_DETAILS_JOB';
				DELETE FROM JOB_DETAILS WHERE JOBKEY = 'RECEIPT_STATUS_DETAILS_JOB';
				DELETE FROM JOB_DETAILS WHERE JOBKEY = 'WRITE_OFF_DETAILS_JOB';
				DELETE FROM JOB_DETAILS WHERE JOBKEY = 'RE_WRITE_OFF_DETAILS_JOB';
				DELETE FROM JOB_DETAILS WHERE JOBKEY = 'BRANCH_DETAILS_JOB';
				DELETE FROM JOB_DETAILS WHERE JOBKEY = 'PROVISION_JOB';

		 		INSERT INTO JOB_DETAILS (ID, JOBKEY, DESCRIPTION, JOBTRIGGER, CRON_EXPRESSION, JOBMODE, STATUS, ENABLED, FAILURE_NOTIFICATION_REQ, HOST_NAME, PORT, JMX_PORT, SMTP_SERVER, NOTIFY_EMAILS, EXECUTION_LOG_REQ, EXECUTION_RETENTION_DAYS, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, MONITORING_REQ) VALUES ((SELECT MAX(ID)+1 FROM JOB_DETAILS), 'EXCESS_TRANSFER_JOB', 		'EXCESS TRANSFER JOB',	 		'EXCESS_TRANSFER_JOB_TRIGGER', 			'0 0/10 * 1/1 * ? *', 1, 0, 1, 0, NULL, NULL, 0, NULL, NULL, 1, 1, 0, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1); 
				INSERT INTO JOB_DETAILS (ID, JOBKEY, DESCRIPTION, JOBTRIGGER, CRON_EXPRESSION, JOBMODE, STATUS, ENABLED, FAILURE_NOTIFICATION_REQ, HOST_NAME, PORT, JMX_PORT, SMTP_SERVER, NOTIFY_EMAILS, EXECUTION_LOG_REQ, EXECUTION_RETENTION_DAYS, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, MONITORING_REQ) VALUES ((SELECT MAX(ID)+1 FROM JOB_DETAILS), 'HOLD_REFUND_JOB', 			'HOLD_REFUND_JOB', 				'HOLD_REFUND_JOB_TRIGGER', 				'0 0/10 * 1/1 * ? *', 1, 0, 1, 0, NULL, NULL, 0, NULL, NULL, 1, 1, 0, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1); 
				INSERT INTO JOB_DETAILS (ID, JOBKEY, DESCRIPTION, JOBTRIGGER, CRON_EXPRESSION, JOBMODE, STATUS, ENABLED, FAILURE_NOTIFICATION_REQ, HOST_NAME, PORT, JMX_PORT, SMTP_SERVER, NOTIFY_EMAILS, EXECUTION_LOG_REQ, EXECUTION_RETENTION_DAYS, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, MONITORING_REQ) VALUES ((SELECT MAX(ID)+1 FROM JOB_DETAILS), 'REPRESENTMENT_JOB', 			'REPRESENTMENT_JOB', 			'REPRESENTMENT_JOB_TRIGGER', 			'0 0/10 * 1/1 * ? *', 1, 0, 1, 0, NULL, NULL, 0, NULL, NULL, 1, 1, 0, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1);
				INSERT INTO JOB_DETAILS (ID, JOBKEY, DESCRIPTION, JOBTRIGGER, CRON_EXPRESSION, JOBMODE, STATUS, ENABLED, FAILURE_NOTIFICATION_REQ, HOST_NAME, PORT, JMX_PORT, SMTP_SERVER, NOTIFY_EMAILS, EXECUTION_LOG_REQ, EXECUTION_RETENTION_DAYS, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, MONITORING_REQ) VALUES ((SELECT MAX(ID)+1 FROM JOB_DETAILS), 'MANDATE_JOB', 				'MANDATE_JOB', 					'MANDATE_JOB_TRIGGER', 					'0 0/10 * 1/1 * ? *', 1, 0, 1, 0, NULL, NULL, 0, NULL, NULL, 1, 1, 0, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1); 
				INSERT INTO JOB_DETAILS (ID, JOBKEY, DESCRIPTION, JOBTRIGGER, CRON_EXPRESSION, JOBMODE, STATUS, ENABLED, FAILURE_NOTIFICATION_REQ, HOST_NAME, PORT, JMX_PORT, SMTP_SERVER, NOTIFY_EMAILS, EXECUTION_LOG_REQ, EXECUTION_RETENTION_DAYS, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, MONITORING_REQ) VALUES ((SELECT MAX(ID)+1 FROM JOB_DETAILS), 'FATE_CORRECTION_JOB', 		'FATE_CORRECTION_JOB', 			'FATE_CORRECTION_JOB_TRIGGER', 			'0 0/10 * 1/1 * ? *', 1, 0, 1, 0, NULL, NULL, 0, NULL, NULL, 1, 1, 0, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1); 
				INSERT INTO JOB_DETAILS (ID, JOBKEY, DESCRIPTION, JOBTRIGGER, CRON_EXPRESSION, JOBMODE, STATUS, ENABLED, FAILURE_NOTIFICATION_REQ, HOST_NAME, PORT, JMX_PORT, SMTP_SERVER, NOTIFY_EMAILS, EXECUTION_LOG_REQ, EXECUTION_RETENTION_DAYS, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, MONITORING_REQ) VALUES ((SELECT MAX(ID)+1 FROM JOB_DETAILS), 'PAY_INS_JOB', 				'PAY_INS_JOB', 					'PAY_INS_JOB_TRIGGER', 					'0 0/10 * 1/1 * ? *', 1, 0, 1, 0, NULL, NULL, 0, NULL, NULL, 1, 1, 0, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1); 
				INSERT INTO JOB_DETAILS (ID, JOBKEY, DESCRIPTION, JOBTRIGGER, CRON_EXPRESSION, JOBMODE, STATUS, ENABLED, FAILURE_NOTIFICATION_REQ, HOST_NAME, PORT, JMX_PORT, SMTP_SERVER, NOTIFY_EMAILS, EXECUTION_LOG_REQ, EXECUTION_RETENTION_DAYS, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, MONITORING_REQ) VALUES ((SELECT MAX(ID)+1 FROM JOB_DETAILS), 'LPP_JOB', 					'LPP_JOB', 						'LPP_JOB_TRIGGER', 						'0 0/10 * 1/1 * ? *', 1, 0, 1, 0, NULL, NULL, 0, NULL, NULL, 1, 1, 0, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1);
		 		INSERT INTO JOB_DETAILS (ID, JOBKEY, DESCRIPTION, JOBTRIGGER, CRON_EXPRESSION, JOBMODE, STATUS, ENABLED, FAILURE_NOTIFICATION_REQ, HOST_NAME, PORT, JMX_PORT, SMTP_SERVER, NOTIFY_EMAILS, EXECUTION_LOG_REQ, EXECUTION_RETENTION_DAYS, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, MONITORING_REQ) VALUES ((SELECT MAX(ID)+1 FROM JOB_DETAILS), 'CROSSLOAN_KNOCKOFF_JOB', 		'CROSSLOAN_KNOCKOFF_JOB', 		'CROSSLOAN_KNOCKOFF_JOB_TRIGGER', 		'0 0/10 * 1/1 * ? *', 1, 0, 1, 0, NULL, NULL, 0, NULL, NULL, 1, 1, 0, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1); 
				INSERT INTO JOB_DETAILS (ID, JOBKEY, DESCRIPTION, JOBTRIGGER, CRON_EXPRESSION, JOBMODE, STATUS, ENABLED, FAILURE_NOTIFICATION_REQ, HOST_NAME, PORT, JMX_PORT, SMTP_SERVER, NOTIFY_EMAILS, EXECUTION_LOG_REQ, EXECUTION_RETENTION_DAYS, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, MONITORING_REQ) VALUES ((SELECT MAX(ID)+1 FROM JOB_DETAILS), 'MANUAL_KNOCKOFF_JOB', 		'MANUAL_KNOCKOFF_JOB', 			'MANUAL_KNOCKOFF_JOB_TRIGGER', 			'0 0/10 * 1/1 * ? *', 1, 0, 1, 0, NULL, NULL, 0, NULL, NULL, 1, 1, 0, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1); 
				INSERT INTO JOB_DETAILS (ID, JOBKEY, DESCRIPTION, JOBTRIGGER, CRON_EXPRESSION, JOBMODE, STATUS, ENABLED, FAILURE_NOTIFICATION_REQ, HOST_NAME, PORT, JMX_PORT, SMTP_SERVER, NOTIFY_EMAILS, EXECUTION_LOG_REQ, EXECUTION_RETENTION_DAYS, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, MONITORING_REQ) VALUES ((SELECT MAX(ID)+1 FROM JOB_DETAILS), 'CHEQUE_JOB', 					'CHEQUE_JOB', 					'CHEQUE_JOB_TRIGGER', 					'0 0/10 * 1/1 * ? *', 1, 0, 1, 0, NULL, NULL, 0, NULL, NULL, 1, 1, 0, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1);
 				INSERT INTO JOB_DETAILS (ID, JOBKEY, DESCRIPTION, JOBTRIGGER, CRON_EXPRESSION, JOBMODE, STATUS, ENABLED, FAILURE_NOTIFICATION_REQ, HOST_NAME, PORT, JMX_PORT, SMTP_SERVER, NOTIFY_EMAILS, EXECUTION_LOG_REQ, EXECUTION_RETENTION_DAYS, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, MONITORING_REQ) VALUES ((SELECT MAX(ID)+1 FROM JOB_DETAILS), 'KYC_DETAILS_JOB', 			'KYC_DETAILS_JOB', 				'KYC_DETAILS_JOB_TRIGGER', 				'0 0/10 * 1/1 * ? *', 1, 0, 1, 0, NULL, NULL, 0, NULL, NULL, 1, 1, 0, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1);
 				INSERT INTO JOB_DETAILS (ID, JOBKEY, DESCRIPTION, JOBTRIGGER, CRON_EXPRESSION, JOBMODE, STATUS, ENABLED, FAILURE_NOTIFICATION_REQ, HOST_NAME, PORT, JMX_PORT, SMTP_SERVER, NOTIFY_EMAILS, EXECUTION_LOG_REQ, EXECUTION_RETENTION_DAYS, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, MONITORING_REQ) VALUES ((SELECT MAX(ID)+1 FROM JOB_DETAILS), 'HOST_GL_DETAILS_JOB', 		'HOST_GL_DETAILS_JOB', 			'HOST_GL_DETAILS_JOB_TRIGGER', 			'0 0/10 * 1/1 * ? *', 1, 0, 1, 0, NULL, NULL, 0, NULL, NULL, 1, 1, 0, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1); 
 				INSERT INTO JOB_DETAILS (ID, JOBKEY, DESCRIPTION, JOBTRIGGER, CRON_EXPRESSION, JOBMODE, STATUS, ENABLED, FAILURE_NOTIFICATION_REQ, HOST_NAME, PORT, JMX_PORT, SMTP_SERVER, NOTIFY_EMAILS, EXECUTION_LOG_REQ, EXECUTION_RETENTION_DAYS, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, MONITORING_REQ) VALUES ((SELECT MAX(ID)+1 FROM JOB_DETAILS), 'MIS_POST_DETAILS_JOB', 		'MIS_POST_DETAILS_JOB', 		'MIS_POST_DETAILS_JOB_TRIGGER', 		'0 0/10 * 1/1 * ? *', 1, 0, 1, 0, NULL, NULL, 0, NULL, NULL, 1, 1, 0, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1); 
				INSERT INTO JOB_DETAILS (ID, JOBKEY, DESCRIPTION, JOBTRIGGER, CRON_EXPRESSION, JOBMODE, STATUS, ENABLED, FAILURE_NOTIFICATION_REQ, HOST_NAME, PORT, JMX_PORT, SMTP_SERVER, NOTIFY_EMAILS, EXECUTION_LOG_REQ, EXECUTION_RETENTION_DAYS, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, MONITORING_REQ) VALUES ((SELECT MAX(ID)+1 FROM JOB_DETAILS), 'FIN_CAN_DETAILS_JOB', 		'FIN_CAN_DETAILS_JOB', 			'FIN_CAN_DETAILS_JOB_TRIGGER', 			'0 0/10 * 1/1 * ? *', 1, 0, 1, 0, NULL, NULL, 0, NULL, NULL, 1, 1, 0, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1);
				INSERT INTO JOB_DETAILS (ID, JOBKEY, DESCRIPTION, JOBTRIGGER, CRON_EXPRESSION, JOBMODE, STATUS, ENABLED, FAILURE_NOTIFICATION_REQ, HOST_NAME, PORT, JMX_PORT, SMTP_SERVER, NOTIFY_EMAILS, EXECUTION_LOG_REQ, EXECUTION_RETENTION_DAYS, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, MONITORING_REQ) VALUES ((SELECT MAX(ID)+1 FROM JOB_DETAILS), 'WAIVER_DETAILS_JOB', 			'WAIVER_DETAILS_JOB', 			'WAIVER_DETAILS_JOB_TRIGGER', 			'0 0/10 * 1/1 * ? *', 1, 0, 1, 0, NULL, NULL, 0, NULL, NULL, 1, 1, 0, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1); 
				INSERT INTO JOB_DETAILS (ID, JOBKEY, DESCRIPTION, JOBTRIGGER, CRON_EXPRESSION, JOBMODE, STATUS, ENABLED, FAILURE_NOTIFICATION_REQ, HOST_NAME, PORT, JMX_PORT, SMTP_SERVER, NOTIFY_EMAILS, EXECUTION_LOG_REQ, EXECUTION_RETENTION_DAYS, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, MONITORING_REQ) VALUES ((SELECT MAX(ID)+1 FROM JOB_DETAILS), 'LIEN_DETAILS_JOB', 			'LIEN_DETAILS_JOB', 			'LIEN_DETAILS_JOB_TRIGGER', 			'0 0/10 * 1/1 * ? *', 1, 0, 1, 0, NULL, NULL, 0, NULL, NULL, 1, 1, 0, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1); 
				INSERT INTO JOB_DETAILS (ID, JOBKEY, DESCRIPTION, JOBTRIGGER, CRON_EXPRESSION, JOBMODE, STATUS, ENABLED, FAILURE_NOTIFICATION_REQ, HOST_NAME, PORT, JMX_PORT, SMTP_SERVER, NOTIFY_EMAILS, EXECUTION_LOG_REQ, EXECUTION_RETENTION_DAYS, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, MONITORING_REQ) VALUES ((SELECT MAX(ID)+1 FROM JOB_DETAILS), 'CREATE_RECEIPT_DETAILS_JOB', 	'CREATE_RECEIPT_DETAILS_JOB',	'CREATE_RECEIPT_DETAILS_JOB_TRIGGER', 	'0 0/10 * 1/1 * ? *', 1, 0, 1, 0, NULL, NULL, 0, NULL, NULL, 1, 1, 0, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1); 
				INSERT INTO JOB_DETAILS (ID, JOBKEY, DESCRIPTION, JOBTRIGGER, CRON_EXPRESSION, JOBMODE, STATUS, ENABLED, FAILURE_NOTIFICATION_REQ, HOST_NAME, PORT, JMX_PORT, SMTP_SERVER, NOTIFY_EMAILS, EXECUTION_LOG_REQ, EXECUTION_RETENTION_DAYS, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, MONITORING_REQ) VALUES ((SELECT MAX(ID)+1 FROM JOB_DETAILS), 'RECEIPT_STATUS_DETAILS_JOB',	'RECEIPT_STATUS_DETAILS_JOB',	'RECEIPT_STATUS_DETAILS_JOB_TRIGGER', 	'0 0/10 * 1/1 * ? *', 1, 0, 1, 0, NULL, NULL, 0, NULL, NULL, 1, 1, 0, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1);
		 		INSERT INTO JOB_DETAILS (ID, JOBKEY, DESCRIPTION, JOBTRIGGER, CRON_EXPRESSION, JOBMODE, STATUS, ENABLED, FAILURE_NOTIFICATION_REQ, HOST_NAME, PORT, JMX_PORT, SMTP_SERVER, NOTIFY_EMAILS, EXECUTION_LOG_REQ, EXECUTION_RETENTION_DAYS, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, MONITORING_REQ) VALUES ((SELECT MAX(ID)+1 FROM JOB_DETAILS), 'WRITE_OFF_DETAILS_JOB', 		'WRITE_OFF_DETAILS_JOB', 		'WRITE_OFF_DETAILS_JOB_TRIGGER', 		'0 0/10 * 1/1 * ? *', 1, 0, 1, 0, NULL, NULL, 0, NULL, NULL, 1, 1, 0, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1); 
				INSERT INTO JOB_DETAILS (ID, JOBKEY, DESCRIPTION, JOBTRIGGER, CRON_EXPRESSION, JOBMODE, STATUS, ENABLED, FAILURE_NOTIFICATION_REQ, HOST_NAME, PORT, JMX_PORT, SMTP_SERVER, NOTIFY_EMAILS, EXECUTION_LOG_REQ, EXECUTION_RETENTION_DAYS, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, MONITORING_REQ) VALUES ((SELECT MAX(ID)+1 FROM JOB_DETAILS), 'RE_WRITE_OFF_DETAILS_JOB', 	'RE_WRITE_OFF_DETAILS_JOB', 	'RE_WRITE_OFF_DETAILS_JOB_TRIGGER', 	'0 0/10 * 1/1 * ? *', 1, 0, 1, 0, NULL, NULL, 0, NULL, NULL, 1, 1, 0, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1);
 				INSERT INTO JOB_DETAILS (ID, JOBKEY, DESCRIPTION, JOBTRIGGER, CRON_EXPRESSION, JOBMODE, STATUS, ENABLED, FAILURE_NOTIFICATION_REQ, HOST_NAME, PORT, JMX_PORT, SMTP_SERVER, NOTIFY_EMAILS, EXECUTION_LOG_REQ, EXECUTION_RETENTION_DAYS, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, MONITORING_REQ) VALUES ((SELECT MAX(ID)+1 FROM JOB_DETAILS), 'BRANCH_DETAILS_JOB', 			'BRANCH_DETAILS_JOB', 			'BRANCH_DETAILS_JOB_TRIGGER', 		 	'0 0/10 * 1/1 * ? *', 1, 0, 1, 0, NULL, NULL, 0, NULL, NULL, 1, 1, 0, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1);
 				INSERT INTO JOB_DETAILS (ID, JOBKEY, DESCRIPTION, JOBTRIGGER, CRON_EXPRESSION, JOBMODE, STATUS, ENABLED, FAILURE_NOTIFICATION_REQ, HOST_NAME, PORT, JMX_PORT, SMTP_SERVER, NOTIFY_EMAILS, EXECUTION_LOG_REQ, EXECUTION_RETENTION_DAYS, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, MONITORING_REQ) VALUES ((SELECT MAX(ID)+1 FROM JOB_DETAILS), 'PROVISION_JOB', 				'PROVISION_JOB', 				'PROVISION_JOB_TRIGGER', 		 		'0 0/10 * 1/1 * ? *', 1, 0, 1, 0, NULL, NULL, 0, NULL, NULL, 1, 1, 0, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1);
 			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1528.47" author="Sravani.s">
		<sql>
			<![CDATA[
	            DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='CHEQUES_TEMPLATE');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='CHEQUES_TEMPLATE');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='CHEQUES_TEMPLATE';
							
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUES_TEMPLATE'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID IN (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUES_TEMPLATE');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUES_TEMPLATE';
							
				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'CHEQUES_TEMPLATE', 'Cheque template download', 3, 'Cheque', NULL, NULL, ',' , 0, 0, NULL, 'ROW:{Action,Type Of Cheque,Loan Reference,Cheque No,Account Type,Account Holder Name,Account Number,IFSC Code,MICR,Amount,ChequeDate}',  '', 'A', '\\pennantsrv02\File_Sharing\Projects\CORE\Uploads', 'Cheque_', '.xlsx', 0, current_timestamp, '${ddMMYYYYHms}', NULL, 0, NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUES_TEMPLATE'), 'CHEQUES_UPLOAD',  0, 'ID', 'HEADERID = 0', NULL, NULL, NULL, NULL, NULL, NULL, 11, 0, 0);
                	
                INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUES_TEMPLATE')),  'ACTION',            0, 'N', NULL, NULL, NULL, NULL, '0',  NULL, NULL, NULL, NULL, 'M');
                INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUES_TEMPLATE')),  'CHEQUETYPE',        0, 'N', NULL, NULL, NULL, NULL, '1',  NULL, NULL, NULL, NULL, 'M');
                INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUES_TEMPLATE')),  'FINREFERENCE',      0, 'N', NULL, NULL, NULL, NULL, '2',  NULL, NULL, NULL, NULL, 'M');
                INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUES_TEMPLATE')),  'CHEQUESERIALNO',    0, 'N', NULL, NULL, NULL, NULL, '3',  NULL, NULL, NULL, NULL, 'M');
                INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUES_TEMPLATE')),  'ACCOUNTTYPE',       0, 'N', NULL, NULL, NULL, NULL, '4',  NULL, NULL, NULL, NULL, 'O');
                INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUES_TEMPLATE')),  'ACCHOLDERNAME',     0, 'N', NULL, NULL, NULL, NULL, '5',  NULL, NULL, NULL, NULL, 'M');
                INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUES_TEMPLATE')),  'ACCOUNTNO',         0, 'N', NULL, NULL, NULL, NULL, '6',  NULL, NULL, NULL, NULL, 'M');
                INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUES_TEMPLATE')),  'IFSCCODE',          0, 'N', NULL, NULL, NULL, NULL, '7',  NULL, NULL, NULL, NULL, 'M');
                INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUES_TEMPLATE')),  'MICR',              0, 'N', NULL, NULL, NULL, NULL, '8',  NULL, NULL, NULL, NULL, 'M');
                INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUES_TEMPLATE')),  'AMOUNT',            0, 'N', NULL, NULL, NULL, NULL, '9',  NULL, NULL, NULL, 'AMOUNT_MINOR:0.00', 'O');
                INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUES_TEMPLATE')),  'CHEQUEDATE',            0, 'N', NULL, NULL, NULL, NULL, '10',  NULL, NULL, NULL, 'dd-MMM-yyyy', 'O');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1528.47_1" author="Sravani.s">
		<renameColumn tableName="CHEQUES_UPLOAD" oldColumnName="IfscCode" newColumnName="Ifsc" />
	</changeSet>

	<changeSet id="ST#1528.10_3" author="Sravani.S">
		<sql> 
			<![CDATA[ 
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='FATE_CORRECTION_UPLOAD');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='FATE_CORRECTION_UPLOAD');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='FATE_CORRECTION_UPLOAD';
 				
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FATE_CORRECTION_UPLOAD'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FATE_CORRECTION_UPLOAD');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'FATE_CORRECTION_UPLOAD';
				
				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'FATE_CORRECTION_UPLOAD', 'FATE CORRECTION UPLOAD FILE.', 12, 'FATECORRECTION', null, null, ',', 1, 1, null, 'ROW:{FINREFERENCE, AMOUNT_CLEARED, CLEARING_DATE, UMRN_NO, CLEARING_STATUS, BOUNCE_CODE, BOUNCE_REMARKS}', null, 'C', '\\pennantsrv02\File_Sharing\Projects\CORE\Uploads', 'FateCorrection_', '.xls', 0, CURRENT_TIMESTAMP, '${ddmm},.${SEQ_DATE_FILE}', NULL, '0', NULL, 1, 1);
		
				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FATE_CORRECTION_UPLOAD'), 'PRESENTMENT_RESP_UPLOAD', 1, 'ID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 0, 0, 0);
						
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'PRESENTMENT_RESP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FATE_CORRECTION_UPLOAD')), 'finReference',  			0, 'N', NULL, NULL, NULL,			NULL, '0', NULL, NULL, NULL, NULL, 				  'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'PRESENTMENT_RESP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FATE_CORRECTION_UPLOAD')), 'AMOUNT_CLEARED',  			0, 'N', NULL, NULL, NULL, 			NULL, '1', NULL, NULL, NULL, 'AMOUNT_MINOR:0.00', 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'PRESENTMENT_RESP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FATE_CORRECTION_UPLOAD')), 'CLEARING_DATE',  			0, 'N', NULL, NULL, NULL, 			NULL, '2', NULL, NULL, NULL, 'dd-MMM-yyyy', 	  'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'PRESENTMENT_RESP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FATE_CORRECTION_UPLOAD')), 'UMRN_NO',  					0, 'N', NULL, NULL, NULL,			NULL, '3', NULL, NULL, NULL, NULL, 				  'O');						
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'PRESENTMENT_RESP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FATE_CORRECTION_UPLOAD')), 'fateCorrection',  			0, 'N', NULL, 'Y',  NULL, 			NULL, '0', NULL, NULL, NULL, NULL,			      'O');	
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'PRESENTMENT_RESP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FATE_CORRECTION_UPLOAD')), 'CLEARING_STATUS',  			0, 'N', NULL, NULL, NULL,			NULL, '4', NULL, NULL, NULL, NULL, 			      'CHECK: B,S');						
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'PRESENTMENT_RESP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FATE_CORRECTION_UPLOAD')), 'BOUNCE_CODE',  				0, 'N', NULL, NULL, NULL, 			NULL, '5', NULL, NULL, NULL, NULL,			      'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'PRESENTMENT_RESP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'FATE_CORRECTION_UPLOAD')), 'BOUNCE_REMARKS',  			0, 'N', NULL, NULL, NULL,			NULL, '6', NULL, NULL, NULL, NULL, 			      'O');	
  			]]>
		</sql>
	</changeSet>


	<changeSet id="ST#1526.1" author="sandeepkumar.m">
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='LIEN_TEMPLATE');
				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='LIEN_TEMPLATE');
				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='LIEN_TEMPLATE';
											
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LIEN_TEMPLATE'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID IN (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LIEN_TEMPLATE');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'LIEN_TEMPLATE';
											
				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'LIEN_TEMPLATE', 'LIEN UPLOAD TEMPLATE DOWNLOAD', 3, 'LIENUPLOAD', NULL, NULL, ',' , 0, 0, NULL, 'ROW:{Source, Reference, AccountNumber, Action, Remarks}',  NULL, 'A', '/opt/pff/hdfc/Lien/template', 'LienUpload_', '.xlsx', 0, current_timestamp, '${ddMMYYYYHms}', NULL, 0, NULL, 1, 1);
				
				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LIEN_TEMPLATE'), 'LIEN_UPLOAD',  1, 'ID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 4, 0, 0);
								
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LIEN_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LIEN_TEMPLATE')), 'Source',  	                0, 'N', NULL, NULL, NULL, NULL, '0', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LIEN_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LIEN_TEMPLATE')), 'Reference',  	            0, 'N', NULL, NULL, NULL, NULL, '1', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LIEN_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LIEN_TEMPLATE')), 'AccNumber',               	0, 'N', NULL, NULL, NULL, NULL, '2', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LIEN_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LIEN_TEMPLATE')), 'Action',  	                0, 'N', NULL, NULL, NULL, NULL, '3', NULL, NULL, NULL, NULL, 'CHECK:Y,N');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LIEN_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LIEN_TEMPLATE')), 'remarks',                    0, 'N', NULL, NULL, NULL, NULL, '4', NULL, NULL, NULL, NULL, 'O');
			]]>
		</sql>
	</changeSet>


	<changeSet id="ST#1526.2" author="sandeepkumar.m" >
		<sql>
			<![CDATA[			
	              DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='LIEN_UPLOAD');
			      DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='LIEN_UPLOAD');
			      DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='LIEN_UPLOAD';
			 				
			      DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LIEN_UPLOAD'));
			      DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LIEN_UPLOAD');
			      DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'LIEN_UPLOAD';
							
			      INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'LIEN_UPLOAD', 'LIEN UPLOAD FILE.', 12, 'LIENUPLOAD', null, null, ',', 1, 1, null, 'ROW:{Source, Reference, AccountNumber, Action, Remarks}', null, 'C', '\\pennantsrv02\File_Sharing\Projects\HDFC\Uploads', 'LienUpload_', '.xlsx', 0, CURRENT_TIMESTAMP, '${ddmm},.${SEQ_DATE_FILE}', NULL, '0', NULL, 1, 1);
					
			      INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LIEN_UPLOAD'), 'LIEN_UPLOAD', 1, 'ID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 5, 0, 0);
							
			     INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LIEN_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LIEN_UPLOAD')), 'source',        0, 'N', NULL, NULL, NULL, NULL, '0', NULL, NULL, NULL, NULL, 'M');
			     INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LIEN_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LIEN_UPLOAD')), 'reference',     0, 'N', NULL, NULL, NULL, NULL, '1', NULL, NULL, NULL, NULL, 'M');
			     INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LIEN_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LIEN_UPLOAD')), 'accNumber',     0, 'N', NULL, NULL, NULL, NULL, '2', NULL, NULL, NULL, NULL, 'O');
			     INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LIEN_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LIEN_UPLOAD')), 'action',        0, 'N', NULL, NULL, NULL, NULL, '3', NULL, NULL, NULL, NULL, 'CHECK:Y,N');
			     INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LIEN_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LIEN_UPLOAD')), 'remarks',       0, 'N', NULL, NULL, NULL, NULL, '4', NULL, NULL, NULL, NULL, 'O');					
          	]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#1526.3_pre" author="sandeepkumar.m" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'lien_upload');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1526.3" author="sandeepkumar.m">
		<modifyDataType tableName="LIEN_UPLOAD" columnName="REMARKS" newDataType="varchar(1000)"/>
	</changeSet>
	
	<changeSet id="ST#1526.3_post" author="sandeepkumar.m" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'lien_upload');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1528.16_1" author="Sravani.S">
		<sql>
			<![CDATA[		
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='CUSTOMER_KYC_DETAILS_UPLOAD');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='CUSTOMER_KYC_DETAILS_UPLOAD');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='CUSTOMER_KYC_DETAILS_UPLOAD';
 				
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD';
				
				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE, MAXRECORDS) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'CUSTOMER_KYC_DETAILS_UPLOAD', ' CUSTOMER KYC DETAILS UPLOAD FILE.', 12, 'CUSTOMERDETAILS', null, null, ',', 1, 1, null, 'ROW:{CustCif, FinReference, AddressType Code, Priority, Care Of, House/Building No, Flat Number, Street, Landmark, Locality, City, Sub District, District, State Code, Country Code, Pin Code, PhoneType Code, Phone Number, Priority, EmailType Code, Email, Priority}', null, 'C', '\\pennantsrv02\File_Sharing\Projects\HDFC\Uploads', 'Bulk_Cust_dtls_', '.xlsx', 0, CURRENT_TIMESTAMP, '${ddmm},.${SEQ_DATE_FILE}', NULL, '0', NULL, 1, 1, 10000);
		
				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD'), 'CUSTOMER_KYC_DETAILS_UPLOAD', 1, 'ID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 22, 0, 0);
						
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD')), 'custCif',           0, 'N', NULL, NULL, NULL, NULL, '0', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD')), 'finReference',      0, 'N', NULL, NULL, NULL, NULL, '1', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD')), 'custAddrType',      0, 'N', NULL, NULL, NULL, NULL, '2', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD')), 'custAddrPriority',  0, 'N', NULL, NULL, NULL, NULL, '3', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD')), 'custAddrLine3',     0, 'N', NULL, NULL, NULL, NULL, '4', NULL, NULL, NULL, NULL, 'O');						
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD')), 'custAddrHNbr',      0, 'N', NULL, NULL, NULL, NULL, '5', NULL, NULL, NULL, NULL, 'O');	
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD')), 'custFlatNbr',       0, 'N', NULL, NULL, NULL, NULL, '6', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD')), 'custAddrStreet',    0, 'N', NULL, NULL, NULL, NULL, '7', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD')), 'custAddrLine1',     0, 'N', NULL, NULL, NULL, NULL, '8', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD')), 'custAddrLine2',     0, 'N', NULL, NULL, NULL, NULL, '9', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD')), 'custAddrCity',      0, 'N', NULL, NULL, NULL, NULL, '10',NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD')), 'custAddrLine4',     0, 'N', NULL, NULL, NULL, NULL, '11', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD')), 'custDistrict',      0, 'N', NULL, NULL, NULL, NULL, '12', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD')), 'custAddrProvince',  0, 'N', NULL, NULL, NULL, NULL, '13', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD')), 'custAddrCountry',   0, 'N', NULL, NULL, NULL, NULL, '14', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD')), 'custAddrZIP',       0, 'N', NULL, NULL, NULL, NULL, '15', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD')), 'phoneTypeCode',     0, 'N', NULL, NULL, NULL, NULL, '16', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD')), 'phoneNumber',       0, 'N', NULL, NULL, NULL, NULL, '17', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD')), 'phoneTypePriority', 0, 'N', NULL, NULL, NULL, NULL, '18', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD')), 'custEMailTypeCode', 0, 'N', NULL, NULL, NULL, NULL, '19', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD')), 'custEMail',         0, 'N', NULL, NULL, NULL, NULL, '20', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CUSTOMER_KYC_DETAILS_UPLOAD')), 'custEMailPriority', 0, 'N', NULL, NULL, NULL, NULL, '21', NULL, NULL, NULL, NULL, 'O');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#1528.48" author="Sravani.S">
		<renameTable newTableName="PAYMINS_UPLOAD" oldTableName="PAYMINS_UPLOADS"/>
	</changeSet>
	
	<changeSet id="ST#1528.100_1" author="Sravani.S">
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='PAYMINS_TEMPLATE');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='PAYMINS_TEMPLATE');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='PAYMINS_TEMPLATE';
							
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'PAYMINS_TEMPLATE'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID IN (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'PAYMINS_TEMPLATE');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'PAYMINS_TEMPLATE';
							
				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'PAYMINS_TEMPLATE', 'PaymentInstruction template download', 3, 'PaymentInstruction', NULL, NULL, ',' , 0, 0, NULL, 'ROW:{Reference No,Type of Excess,Fee Type,Pay Amount,Remarks,Override Overdue}',  '', 'A', '/opt/pff/hdfc/paymentinstruction/template', 'PaymentInstruction_', '.xlsx', 0, current_timestamp, '${ddMMYYYYHms}', NULL, 0, NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'PAYMINS_TEMPLATE'), 'PAYMINS_UPLOAD',  0, 'ID', 'HEADERID = :HEADERID', NULL, NULL, NULL, NULL, NULL, NULL, 2, 0, 0);
				
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'PAYMINS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'PAYMINS_TEMPLATE')), 'FINREFERENCE',0, 'N', NULL, NULL, NULL, NULL, '0', NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'PAYMINS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'PAYMINS_TEMPLATE')), 'EXCESSTYPE',0, 'N', NULL, NULL, NULL, NULL, '1', NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'PAYMINS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'PAYMINS_TEMPLATE')), 'FEETYPE',0, 'N', NULL, NULL, NULL, NULL, '2', NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'PAYMINS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'PAYMINS_TEMPLATE')), 'PAYAMOUNT',0, 'N', NULL, NULL, NULL, NULL, '3', NULL, NULL, NULL, 'AMOUNT_MINOR:0.00', 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'PAYMINS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'PAYMINS_TEMPLATE')), 'REMARKS',0, 'N', NULL, NULL, NULL, NULL, '4', NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'PAYMINS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'PAYMINS_TEMPLATE')), 'OVERRIDEOVERDUE',0, 'N', NULL, NULL, NULL, NULL, '5', NULL, NULL, NULL, NULL, 'M');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#1470.23" author="saikrihna.b">
		<sql>
			<![CDATA[
				DELETE FROM BMTAEEVENTS WHERE AEEVENTCODE in ('REVWRITE_S', 'REVWRITE_N');
			
				INSERT INTO BMTAEEVENTS (AEEVENTCODE, AEEVENTCODEDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, ACTIVE) VALUES  ('REVWRITE_S', 	'Reverse WriteOff accounting For Settlement', 	1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0, 1);
				INSERT INTO BMTAEEVENTS (AEEVENTCODE, AEEVENTCODEDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, ACTIVE) VALUES  ('REVWRITE_N', 	'Reverse WriteOff accounting For NPA', 			1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0, 1);
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#1528.14.101_1" author="Gopal.p">
		<sql>
		 	<![CDATA[ 
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='CHEQUES_UPLOAD');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='CHEQUES_UPLOAD');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='CHEQUES_UPLOAD';
 				
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUES_UPLOAD'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUES_UPLOAD');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUES_UPLOAD';
				
				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'CHEQUES_UPLOAD', 'Cheque Upload File.', 12, 'Cheque', null, null, ',', 0, 1, null, 'ROW:{Action,Type Of Cheque,Loan Reference,Cheque No,Account Type,Account Holder Name,Account Number,IFSC Code,MICR,Amount,ChequeDate}', null, 'C', '/opt/pff/hdfc/cheque/upload', 'Cheque_', '.xlsx', 0, CURRENT_TIMESTAMP, '${ddmm},.${SEQ_DATE_FILE}', null, '0', NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUES_UPLOAD'), 'CHEQUES_UPLOAD', 1, 'ID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 0, 0, 0);
		       
		        INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUES_UPLOAD')),  'action',                0, 'N', NULL, NULL, NULL, NULL, '0',  NULL, NULL, NULL, NULL, 'M');
		        INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUES_UPLOAD')),  'chequeType',            0, 'N', NULL, NULL, NULL, NULL, '1',  NULL, NULL, NULL, NULL, 'M');
		        INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUES_UPLOAD')),  'finReference',          0, 'N', NULL, NULL, NULL, NULL, '2',  NULL, NULL, NULL, NULL, 'M');
		        INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUES_UPLOAD')),  'chequeSerialNo',        0, 'N', NULL, NULL, NULL, NULL, '3',  NULL, NULL, NULL, NULL, 'M');
		        INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUES_UPLOAD')),  'accountType',           0, 'N', NULL, NULL, NULL, NULL, '4',  NULL, NULL, NULL, NULL, 'O');
		        INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUES_UPLOAD')),  'accHolderName',         0, 'N', NULL, NULL, NULL, NULL, '5',  NULL, NULL, NULL, NULL, 'M');
		        INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUES_UPLOAD')),  'accountNo',             0, 'N', NULL, NULL, NULL, NULL, '6',  NULL, NULL, NULL, NULL, 'M');
                INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUES_UPLOAD')),  'ifsc',              	0, 'N', NULL, NULL, NULL, NULL, '7',  NULL, NULL, NULL, NULL, 'M');
                INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUES_UPLOAD')),  'micr',                  0, 'N', NULL, NULL, NULL, NULL, '8',  NULL, NULL, NULL, NULL, 'M');
                INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUES_UPLOAD')),  'amount',                0, 'N', NULL, NULL, NULL, NULL, '9',  NULL, NULL, NULL, 'AMOUNT_MINOR:0.00', 'O');
                INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CHEQUES_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CHEQUES_UPLOAD')),  'chequeDate',            0, 'N', NULL, NULL, NULL, NULL, '10',  NULL, NULL, NULL, 'dd-MMM-yyyy', 'O');	
		  	]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#4876.22_01" author="Gopal.P" dbms="oracle">
		<sql>
			<![CDATA[
				MERGE INTO REJECTFINANCEMAIN  T1
					USING(SELECT FINID, CREATEDBY, CREATEDON FROM FINANCEMAIN_TEMP) T2
					ON (T1.FINID = T2.FINID)
					WHEN MATCHED THEN UPDATE SET T1.CREATEDBY = T2.CREATEDBY, T1.CREATEDON = T2.CREATEDON;
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#4876.22_01" author="Gopal.P" dbms="postgresql">
		<sql>
			<![CDATA[
				UPDATE REJECTFINANCEMAIN T1 SET CREATEDBY = T2.CREATEDBY, CREATEDON = T2.CREATEDON 
				FROM (SELECT T3.FINID, T3.CREATEDBY, T3.CREATEDON FROM FINANCEMAIN_TEMP T3
				WHERE T3.CNT = 1) T2 WHERE T1.FINID = T2.FINID;	
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#4876.22_01" author="Gopal.P" dbms="mssql">
		<sql>
			<![CDATA[
				UPDATE T1 SET T1.CREATEDBY = T3.CREATEDBY, T1.CREATEDON = T3.CREATEDON 
				FROM REJECTFINANCEMAIN T1 
				INNER JOIN (SELECT FINID, CREATEDBY, CREATEDON FROM FINANCEMAIN_TEMP T2
				WHERE CNT = 1) T3 ON T1.FINID = T3.FINID;
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#1528.9_3" author="Sravani.S">
		<sql>
		 	<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='PAYMINS_UPLOAD');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='PAYMINS_UPLOAD');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='PAYMINS_UPLOAD';
 				
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'PAYMINS_UPLOAD'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'PAYMINS_UPLOAD');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'PAYMINS_UPLOAD';

				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'PAYMINS_UPLOAD', 'payment Instruction Upload File.', 12, 'PaymentInstruction', null, null, ',', 0, 1, null, 'ROW:{Reference No,Type of Excess,Fee Type,Pay Amount,Remarks,Override Overdue}', null, 'C', '/opt/PFF/BASE/Uploads', 'PaymentInstruction_', '.xlsx', 0, CURRENT_TIMESTAMP, '${ddmm},.${SEQ_DATE_FILE}', null, 0, NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'PAYMINS_UPLOAD'), 'PAYMINS_UPLOAD', 1, 'HEADERID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 6, 0, 0);

				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'PAYMINS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'PAYMINS_UPLOAD')), 'finReference',  0, 'N', NULL, NULL, NULL, NULL, '0', NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'PAYMINS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'PAYMINS_UPLOAD')), 'excessType',    0, 'N', NULL, NULL, NULL, NULL, '1', NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'PAYMINS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'PAYMINS_UPLOAD')), 'feeType',       0, 'N', NULL, NULL, NULL, NULL, '2', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'PAYMINS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'PAYMINS_UPLOAD')), 'payAmount',     0, 'N', NULL, NULL, NULL, NULL, '3', NULL, NULL, NULL, 'AMOUNT_MINOR:0.00', 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'PAYMINS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'PAYMINS_UPLOAD')), 'remarks',       0, 'N', NULL, NULL, NULL, NULL, '4', NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'PAYMINS_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'PAYMINS_UPLOAD')), 'overRideOverDue',      0, 'N', NULL, NULL, NULL, NULL, '5', NULL, NULL, NULL, NULL, 'M');
		 	]]>
		</sql>
	</changeSet>
	
	<changeSet id="TK#4753.5.1" author="sampath.d">
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='REV_WRITE_OFF_TEMPLATE');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='REV_WRITE_OFF_TEMPLATE');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='REV_WRITE_OFF_TEMPLATE';
							
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'REV_WRITE_OFF_TEMPLATE'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID IN (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'REV_WRITE_OFF_TEMPLATE');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'REV_WRITE_OFF_TEMPLATE';
							
				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'REV_WRITE_OFF_TEMPLATE', 'Reverse WriteOff template download', 3, 'RevWriteOffUpload', NULL, NULL, ',' , 0, 0, NULL, 'ROW:{Loan Reference No,Remarks}',  '', 'A', '/opt/pff/hdfc/revwriteoff/template', 'RevWriteOffUpload_', '.xlsx', 0, current_timestamp, '${ddMMYYYYHms}', NULL, 0, NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'REV_WRITE_OFF_TEMPLATE'), 'REV_WRITE_OFF_UPLOAD',  0, 'ID', 'HEADERID = :HEADERID', NULL, NULL, NULL, NULL, NULL, NULL, 2, 0, 0);
				
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'REV_WRITE_OFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'REV_WRITE_OFF_TEMPLATE')), 'FINREFERENCE',0, 'N', NULL, NULL, NULL, NULL, '0', NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'REV_WRITE_OFF_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'REV_WRITE_OFF_TEMPLATE')), 'REMARKS',0, 'N', NULL, NULL, NULL, NULL, '1', NULL, NULL, NULL, NULL, 'O');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#1528.11.3" author="Sravani.S">
		<sql> 
			<![CDATA[ 
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='LPP_UPLOAD');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='LPP_UPLOAD');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='LPP_UPLOAD';
 				
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_UPLOAD'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_UPLOAD');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_UPLOAD';

                INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'LPP_UPLOAD', 'LPP Upload File.', 12, 'LPP', null, null, ',', 0, 1, null, 'ROW:{Loan Reference, Loan Type, Apply to Existing Loans, Apply Overdue Penalty, Penalty Type, Include Grace Days, Grace Days,  Calculated On, Amount\Percentage, Allow Waivers, Max Waiver, Minimum Amount}', null, 'C', '/opt/PFF/BASE/Uploads', 'LPP_', '.xlsx', 0, CURRENT_TIMESTAMP, '${ddmm},.${SEQ_DATE_FILE}', null, 0, NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_UPLOAD'), 'LPP_UPLOAD', 1, 'HEADERID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 12, 0, 0);

				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_UPLOAD')), 'finReference',         	 0, 'N', NULL, NULL, NULL, NULL, '0',  NULL, NULL, NULL, NULL,                'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_UPLOAD')), 'loanType',              	 0, 'N', NULL, NULL, NULL, NULL, '1',  NULL, NULL, NULL, NULL,                'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_UPLOAD')), 'applyToExistingLoans', 	 0, 'N', NULL, NULL, NULL, NULL, '2',  NULL, NULL, NULL, NULL,                'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_UPLOAD')), 'applyOverDue', 		     0, 'N', NULL, NULL, NULL, NULL, '3',  NULL, NULL, NULL, NULL,                'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_UPLOAD')), 'penaltyType',  			 0, 'N', NULL, NULL, NULL, NULL, '4',  NULL, NULL, NULL, NULL,                'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_UPLOAD')), 'includeGraceDays',	     0, 'N', NULL, NULL, NULL, NULL, '5',  NULL, NULL, NULL, NULL,                'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_UPLOAD')), 'graceDays',               0, 'N', NULL, NULL, NULL, NULL, '6',  NULL, NULL, NULL, NULL,                'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_UPLOAD')), 'calculatedOn',            0, 'N', NULL, NULL, NULL, NULL, '7',  NULL, NULL, NULL, NULL,                'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_UPLOAD')), 'amountOrPercent',         0, 'N', NULL, NULL, NULL, NULL, '8',  NULL, NULL, NULL, 'AMOUNT_MINOR:0.00', 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_UPLOAD')), 'allowWaiver',             0, 'N', NULL, NULL, NULL, NULL, '9',  NULL, NULL, NULL, NULL,                'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_UPLOAD')), 'maxWaiver',               0, 'N', NULL, NULL, NULL, NULL, '10', NULL, NULL, NULL, 'AMOUNT_MINOR:0.00', 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_UPLOAD')), 'oDMinAmount',             0, 'N', NULL, NULL, NULL, NULL, '11', NULL, NULL, NULL, 'AMOUNT_MINOR:0.00', 'O');
		 	]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#1495.05.1" author="Ramya.v">
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='LPP_TEMPLATE');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='LPP_TEMPLATE');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='LPP_TEMPLATE';
							
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_TEMPLATE'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID IN (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_TEMPLATE');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_TEMPLATE';
							
				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'LPP_TEMPLATE', 'LPP template download', 3, 'LPP', NULL, NULL, ',' , 0, 0, NULL, 'ROW:{Loan Reference, Loan Type, Apply to Existing Loans, Apply Overdue Penalty, Penalty Type, Include Grace Days, Grace Days,  Calculated On, Amount\Percentage, Allow Waivers, Max Waiver, Minimum Amount}',  '', 'A', '/opt/PFF/BASE/hdfc/LPPUpload/template', 'LPP_', '.xlsx', 0, current_timestamp, '${ddMMYYYYHms}', NULL, 0, NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_TEMPLATE'), 'LPP_UPLOAD',  0, 'ID', 'HEADERID = :HEADERID', NULL, NULL, NULL, NULL, NULL, NULL, 12, 0, 0);
				
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_TEMPLATE')), 'HEADERID',                1, 'N', NULL, NULL, NULL, NULL, '0',  NULL, NULL, NULL, NULL,                 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_TEMPLATE')), 'FINREFERENCE',            0, 'N', NULL, NULL, NULL, NULL, '0',  NULL, NULL, NULL, NULL,                 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_TEMPLATE')), 'LOANTYPE',                0, 'N', NULL, NULL, NULL, NULL, '1',  NULL, NULL, NULL, NULL,                 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_TEMPLATE')), 'APPLYTOEXISTINGLOANS',    0, 'N', NULL, NULL, NULL, NULL, '2',  NULL, NULL, NULL, NULL,                 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_TEMPLATE')), 'APPLYOVERDUE',            0, 'N', NULL, NULL, NULL, NULL, '3',  NULL, NULL, NULL, NULL,                 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_TEMPLATE')), 'PENALTYTYPE',             0, 'N', NULL, NULL, NULL, NULL, '4',  NULL, NULL, NULL, NULL,                 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_TEMPLATE')), 'INCLUDEGRACEDAYS',        0, 'N', NULL, NULL, NULL, NULL, '5',  NULL, NULL, NULL, NULL,                 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_TEMPLATE')), 'GRACEDAYS',               0, 'N', NULL, NULL, NULL, NULL, '6',  NULL, NULL, NULL, NULL,                 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_TEMPLATE')), 'CALCULATEDON',            0, 'N', NULL, NULL, NULL, NULL, '7',  NULL, NULL, NULL, NULL,                 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_TEMPLATE')), 'AMOUNTORPERCENT',         0, 'N', NULL, NULL, NULL, NULL, '8',  NULL, NULL, NULL, 'AMOUNT_MINOR:0.00',  'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_TEMPLATE')), 'ALLOWWAIVER',             0, 'N', NULL, NULL, NULL, NULL, '9',  NULL, NULL, NULL, NULL,                 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_TEMPLATE')), 'MAXWAIVER',               0, 'N', NULL, NULL, NULL, NULL, '10', NULL, NULL, NULL, 'AMOUNT_MINOR:0.00',  'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_TEMPLATE')), 'ODMINAMOUNT',             0, 'N', NULL, NULL, NULL, NULL, '11', NULL, NULL, NULL, 'AMOUNT_MINOR:0.00',  'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_TEMPLATE')), 'STATUS',                  0, 'N', NULL, 'S',  NULL, NULL, '12', NULL, NULL, NULL,  NULL,                'O');
				
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1528.3.3" author="Sravani.S" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE FILE_UPLOAD_HEADER ADD CONSTRAINT DF_FUH_SUCCESSRECORDS DEFAULT 0 FOR SUCCESSRECORDS;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1528.3.3" author="Sravani.S" dbms="postgresql, oracle">
		<addDefaultValue tableName="FILE_UPLOAD_HEADER" columnName="SuccessRecords" defaultValue="0" />
	</changeSet>
	
	<changeSet id="ST#1528.3.4" author="Sravani.S" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE FILE_UPLOAD_HEADER ADD CONSTRAINT DF_FUH_FAILURERECORDS DEFAULT 0 FOR FAILURERECORDS;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1528.3.4" author="Sravani.S" dbms="postgresql, oracle">
		<addDefaultValue tableName="FILE_UPLOAD_HEADER" columnName="FailureRecords" defaultValue="0" />
	</changeSet>
	
	<changeSet id="ST#1526.4" author="Sandeepkumar.M">
		<addColumn tableName="LIEN_HEADER">
			<column name="Reject_Reason" type="varchar(256)" />
		</addColumn>
	</changeSet>
		<changeSet id="ST#1528.30_2" author="Sravani.S">
		<sql>
			<![CDATA[		
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='CREATE_RECEIPT_UPLOAD');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='CREATE_RECEIPT_UPLOAD');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='CREATE_RECEIPT_UPLOAD';
 				
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_UPLOAD'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_UPLOAD');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_UPLOAD';
				
				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'CREATE_RECEIPT_UPLOAD', 'Configuration for create receipt upload.', 12, 'CREATE_RECEIPT_UPLOAD', null, null, ',', 1, 1, null, 'ROW:{REFERENCE, RECEIPTPURPOSE, EXCESSADJUSTTO, ALLOCATIONTYPE, RECEIPTAMOUNT, VALUEDATE, RECEIPTMODE, SUBRECEIPTMODE, RECEIPTCHANNEL, EFFECTSCHDMETHOD, CLOSURETYPE, REASON, REMARKS, RECEIPTNUMBER, CHEQUENUMBER, STATUS, BANKCODE, CHEQUEACNO, PAYMENTREF, DEPOSITDATE, REALIZATIONDATE, TRANSACTIONREF, PANNUMBER, RECEIVEDFROM, BOUNCEDATE, BOUNCEREASON, BOUNCEREMARKS, PARTNERBANK}', null, 'C', '/opt/pff/BASE/hdfc/receipts/upload', 'Receipts_Upload_', '.xlsx', 0, CURRENT_TIMESTAMP, '${ddmm},.${SEQ_DATE_FILE}', NULL, '0', NULL, 1, 1);
		
				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_UPLOAD'), 'CREATE_RECEIPT_UPLOAD', 1, 'ID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 0, 0, 0);
						
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_UPLOAD')), 'reference', 	        0, 'N', NULL, NULL, NULL, 			NULL, '0',  NULL, NULL, NULL, NULL,               'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_UPLOAD')), 'receiptPurpose',       0, 'N', NULL, NULL, NULL, 			NULL, '1',  NULL, NULL, NULL, NULL,               'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_UPLOAD')), 'excessAdjustTo',       0, 'N', NULL, NULL, NULL, 			NULL, '2',  NULL, NULL, NULL, NULL,               'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_UPLOAD')), 'allocationType',       0, 'N', NULL, NULL, NULL, 			NULL, '3',  NULL, NULL, NULL, NULL,               'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_UPLOAD')), 'receiptAmount',        0, 'N', NULL, NULL, NULL, 			NULL, '4',  NULL, NULL, NULL, 'AMOUNT_MINOR:0.00','M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_UPLOAD')), 'valueDate',  		  	0, 'N', NULL, NULL, NULL, 			NULL, '5',  NULL, NULL, NULL, 'dd-MMM-yyyy',      'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_UPLOAD')), 'receiptMode',  		0, 'N', NULL, NULL, NULL, 			NULL, '6',  NULL, NULL, NULL, NULL,               'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_UPLOAD')), 'subReceiptMode',  	  	0, 'N', NULL, NULL, NULL, 			NULL, '7',  NULL, NULL, NULL, NULL,               'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_UPLOAD')), 'receiptChannel',  	  	0, 'N', NULL, NULL, NULL, 			NULL, '8', NULL, NULL, NULL, NULL,                'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_UPLOAD')), 'effectSchdMethod',     0, 'N', NULL, NULL, NULL, 			NULL, '9',  NULL, NULL, NULL, NULL,               'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_UPLOAD')), 'closureType',     		0, 'N', NULL, NULL, NULL, 			NULL, '10',  NULL, NULL, NULL, NULL,              'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_UPLOAD')), 'reason',    			0, 'N', NULL, NULL, NULL, 			NULL, '11',  NULL, NULL, NULL, NULL,              'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_UPLOAD')), 'remarks',  			0, 'N', NULL, NULL, NULL, 			NULL, '12',  NULL, NULL, NULL, NULL,              'O');				
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_UPLOAD')), 'receiptID',  		    0, 'N', NULL, NULL, NULL, 			NULL, '13',  NULL, NULL, NULL, NULL,              'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_UPLOAD')), 'chequeNumber',  		0, 'N', NULL, NULL, NULL, 			NULL, '14', NULL, NULL, NULL, NULL,               'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_UPLOAD')), 'receiptModeStatus',    0, 'N', NULL, NULL, NULL, 			NULL, '15', NULL, NULL, NULL, NULL,               'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_UPLOAD')), 'bankCode',  			0, 'N', NULL, NULL, NULL, 			NULL, '16', NULL, NULL, NULL, NULL,               'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_UPLOAD')), 'chequeAccountNumber',  0, 'N', NULL, NULL, NULL, 			NULL, '17', NULL, NULL, NULL, NULL,               'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_UPLOAD')), 'paymentRef',  			0, 'N', NULL, NULL, NULL, 			NULL, '18', NULL, NULL, NULL, NULL,               'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_UPLOAD')), 'depositDate',  		0, 'N', NULL, NULL, NULL, 			NULL, '19', NULL, NULL, NULL, 'dd-MMM-yyyy',      'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_UPLOAD')), 'realizationDate',  	0, 'N', NULL, NULL, NULL, 			NULL, '20', NULL, NULL, NULL, 'dd-MMM-yyyy',      'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_UPLOAD')), 'transactionRef',  	  	0, 'N', NULL, NULL, NULL, 			NULL, '21', NULL, NULL, NULL, NULL,               'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_UPLOAD')), 'panNumber',  		  	0, 'N', NULL, NULL, NULL, 			NULL, '22', NULL, NULL, NULL, NULL,               'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_UPLOAD')), 'receivedFrom',  		0, 'N', NULL, NULL, NULL, 			NULL, '23', NULL, NULL, NULL, NULL,               'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_UPLOAD')), 'bounceDate',  		  	0, 'N', NULL, NULL, NULL, 			NULL, '24', NULL, NULL, NULL, 'dd-MMM-yyyy',      'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_UPLOAD')), 'bounceReason',  		0, 'N', NULL, NULL, NULL, 			NULL, '25', NULL, NULL, NULL, NULL,               'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_UPLOAD')), 'bounceRemarks',  	  	0, 'N', NULL, NULL, NULL, 			NULL, '26', NULL, NULL, NULL, NULL,               'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'CREATE_RECEIPT_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'CREATE_RECEIPT_UPLOAD')), 'partnerBankCode',  	0, 'N', NULL, NULL, NULL, 			NULL, '27', NULL, NULL, NULL, NULL,               'O');
			]]>
		</sql>
	</changeSet>
	
	
	<changeSet id="ST#1495.10.1" author="Mounika.M">
		<addColumn tableName="FinODDetails">
			<column name="PayableAmount" type="decimal(18, 0)" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#1495.10.2" author="ramya.v">
		<sql>
			<![CDATA[	
				UPDATE FINODDETAILS SET PAYABLEAMOUNT = 0;
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#1495.10.3" author="ramya.v" dbms="postgresql, oracle">
		<addDefaultValue columnName="PayableAmount" tableName="FINODDETAILS" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#1495.10.3" author="ramya.v" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE FINODDETAILS ADD CONSTRAINT DF_FOD_PAYABLEAMOUNT DEFAULT 0 FOR PAYABLEAMOUNT;
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#1495.10.4_pre" author="ramya.v" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finoddetails_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1495.10.4" author="ramya.v">
		<createView viewName="FINODDETAILS_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FM.FINID,
					FM.FINREFERENCE,
					OD.FINODSCHDDATE,
					OD.FINODFOR,
					OD.FINBRANCH,
					OD.FINTYPE,
					OD.CUSTID,
					OD.FINODTILLDATE,
					OD.FINCURODAMT,
					OD.FINCURODPRI,
					OD.FINCURODPFT,
					OD.FINMAXODAMT,
					OD.FINMAXODPRI,
					OD.FINMAXODPFT,
					OD.GRACEDAYS,
					OD.INCGRACEDAYS,
					OD.FINCURODDAYS,
					OD.TOTPENALTYAMT,
					OD.TOTWAIVED,
					OD.TOTPENALTYPAID,
					OD.LPIAMT,
					OD.LPIPAID,
					OD.LPIBAL,
					OD.TOTPENALTYBAL,
					OD.FINLMDFDATE,
					COALESCE(PR.APPLYODPENALTY, 0)  APPLYODPENALTY,
					COALESCE(PR.ODINCGRCDAYS, 0)  ODINCGRCDAYS,
					COALESCE(PR.ODCHARGETYPE, '')  ODCHARGETYPE,
					COALESCE(PR.ODGRACEDAYS, 0)  ODGRACEDAYS,
					COALESCE(PR.ODCHARGECALON, '')  ODCHARGECALON,
					COALESCE(PR.ODCHARGEAMTORPERC, 0)  ODCHARGEAMTORPERC,
					COALESCE(PR.ODALLOWWAIVER, 0)  ODALLOWWAIVER,
					COALESCE(PR.ODMAXWAIVERPERC, 0)  ODMAXWAIVERPERC,
					COALESCE(PR.ODRULECODE, '')  ODRULECODE,
                    COALESCE(PR.ODMINAMOUNT, 0)  ODMINAMOUNT,
					OD.LOCKODRECALCAL,
					OD.LPPTDSPAID,
					OD.LPCPZ,
					OD.LPCPZAMOUNT,
					OD.LPCURCPZBAL,
					OD.PRESENTMENTID,
					OD.CUROVERDRAFTTXNCHRG,
					OD.MAXOVERDRAFTTXNCHRG,
					OD.PAYABLEAMOUNT
				FROM FINODDETAILS OD
				INNER JOIN FINANCEMAIN FM ON FM.FINID = OD.FINID
				LEFT JOIN FINODPENALTY_LATEST_RATES_VIEW PR ON FM.FINID = PR.FINID
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#1495.10.4_post" author="ramya.v" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finoddetails_view');
			]]>
		</sql>
	</changeSet>
	
	 <changeSet id="ST#1561.59" author="sainaveen.y">
	  <createTable tableName="LETTER_BLOCKING">
		 <column name="Id" type="bigint" autoIncrement="true">
			<constraints nullable="false" />
		</column>
		<column name="FinID" type="bigint" />
		<column name="CreatedOn" type="datetime" />
	 </createTable>
  </changeSet>
  
  <changeSet id="ST#1561.60" author="sainaveen.y">
		<addPrimaryKey constraintName="PK_LETTER_BLOCKING_ID" tableName="LETTER_BLOCKING"
			columnNames="id" />
	</changeSet>
	
	<changeSet id="ST#1561.61" author="sainaveen.y">
		<addUniqueConstraint tableName="LETTER_BLOCKING" columnNames="FinID"
			constraintName="UK_LETTER_BLOCKINGR_FINID" />
	</changeSet>
  
   <changeSet id="ST#1561.62" author="sainaveen.y">
	  <createTable tableName="Letter_Blocking_Log">
		 <column name="Id" type="bigint" autoIncrement="true">
			<constraints nullable="false" />
		</column>
		<column name="FinID" type="bigint" />
		<column name="BlockType" type="char(1)" />
		<column name="UpdatedOn" type="datetime" />
	 </createTable>
  </changeSet>
  
  <changeSet id="ST#1561.63" author="sainaveen.y">
		<addPrimaryKey constraintName="PK_LETTER_BLOCKING_LOG_ID" tableName="LETTER_BLOCKING_LOG"
			columnNames="id" />
	</changeSet>
	
	<changeSet id="PSD#226779.1_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="PSD#226779.1" author="Gopal.p">
		<modifyDataType tableName="FinReceiptHeader" columnName="KnockOffType" newDataType="varchar(2)"/>
	</changeSet>
	
	<changeSet id="PSD#226779.1_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="PSD#226779.2_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_temp');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="PSD#226779.2" author="Gopal.p">
		<modifyDataType tableName="FinReceiptHeader_Temp" columnName="KnockOffType" newDataType="varchar(2)"/>
	</changeSet>
	
	
		<changeSet id="PSD#226779.2_post" author="sainaveen.y" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader_temp');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="PSD#225911" author="Gopal.p">
		<sql>
			<![CDATA[
				UPDATE RMTFINANCETYPES SET FINRVWFRQ = '#' WHERE FINRVWFRQ IS NULL;
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#713.001" author="sainaveen.y">
		<sql> 
			<![CDATA[ 
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='LPP_LOAN_UPLOAD');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='LPP_LOAN_UPLOAD');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='LPP_LOAN_UPLOAD';
 				
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_UPLOAD'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_UPLOAD');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_UPLOAD';

                INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'LPP_LOAN_UPLOAD', 'LPP Loan Upload File.', 12, 'LPP_LOAN', null, null, ',', 0, 1, null, 'ROW:{Loan Reference, Apply Overdue Penalty, Penalty Type, Include Grace Days, Grace Days,  Calculated On, Amount\Percentage, Allow Waivers, Max Waiver, Minimum Amount}', null, 'C', '/opt/PFF/BASE/Uploads', 'LPP_LOAN_', '.xlsx', 0, CURRENT_TIMESTAMP, '${ddmm},.${SEQ_DATE_FILE}', null, 0, NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_UPLOAD'), 'LPP_UPLOAD', 1, 'HEADERID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 10, 0, 0);

				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_UPLOAD')), 'finReference',         	 0, 'N', NULL, NULL, NULL, NULL, '0',  NULL, NULL, NULL, NULL,                'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_UPLOAD')), 'applyOverDue', 		     0, 'N', NULL, NULL, NULL, NULL, '1',  NULL, NULL, NULL, NULL,                'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_UPLOAD')), 'penaltyType',  			 0, 'N', NULL, NULL, NULL, NULL, '2',  NULL, NULL, NULL, NULL,                'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_UPLOAD')), 'includeGraceDays',	     0, 'N', NULL, NULL, NULL, NULL, '3',  NULL, NULL, NULL, NULL,                'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_UPLOAD')), 'graceDays',              0, 'N', NULL, NULL, NULL, NULL, '4',  NULL, NULL, NULL, NULL,                'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_UPLOAD')), 'calculatedOn',           0, 'N', NULL, NULL, NULL, NULL, '5',  NULL, NULL, NULL, NULL,                'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_UPLOAD')), 'amountOrPercent',        0, 'N', NULL, NULL, NULL, NULL, '6',  NULL, NULL, NULL, 'AMOUNT_MINOR:0.00', 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_UPLOAD')), 'allowWaiver',            0, 'N', NULL, NULL, NULL, NULL, '7',  NULL, NULL, NULL, NULL,                'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_UPLOAD')), 'maxWaiver',              0, 'N', NULL, NULL, NULL, NULL, '8', NULL,  NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_UPLOAD')), 'oDMinAmount',            0, 'N', NULL, NULL, NULL, NULL, '9', NULL,  NULL, NULL, 'AMOUNT_MINOR:0.00', 'O');
		 	]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#713.002" author="sainaveen.y">
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='LPP_LOAN_TEMPLATE');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='LPP_LOAN_TEMPLATE');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='LPP_LOAN_TEMPLATE';
							
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_TEMPLATE'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID IN (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_TEMPLATE');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_TEMPLATE';
							
				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'LPP_LOAN_TEMPLATE', 'LPP Loan template download', 3, 'LPP_LOAN', NULL, NULL, ',' , 0, 0, NULL, 'ROW:{Loan Reference, Apply Overdue Penalty, Penalty Type, Include Grace Days, Grace Days,  Calculated On, Amount\Percentage, Allow Waivers, Max Waiver, Minimum Amount}',  '', 'A', '/opt/PFF/BASE/hdfc/LPPLoanUpload/template', 'LPP_LOAN_', '.xlsx', 0, current_timestamp, '${ddMMYYYYHms}', NULL, 0, NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_TEMPLATE'), 'LPP_UPLOAD',  0, 'ID', 'HEADERID = :HEADERID', NULL, NULL, NULL, NULL, NULL, NULL, 10, 0, 0);
				
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_TEMPLATE')), 'HEADERID',                1, 'N', NULL, NULL, NULL, NULL, '0',  NULL, NULL, NULL, NULL,                 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_TEMPLATE')), 'FINREFERENCE',            0, 'N', NULL, NULL, NULL, NULL, '0',  NULL, NULL, NULL, NULL,                 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_TEMPLATE')), 'APPLYOVERDUE',            0, 'N', NULL, NULL, NULL, NULL, '1',  NULL, NULL, NULL, NULL,                 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_TEMPLATE')), 'PENALTYTYPE',             0, 'N', NULL, NULL, NULL, NULL, '2',  NULL, NULL, NULL, NULL,                 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_TEMPLATE')), 'INCLUDEGRACEDAYS',        0, 'N', NULL, NULL, NULL, NULL, '3',  NULL, NULL, NULL, NULL,                 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_TEMPLATE')), 'GRACEDAYS',               0, 'N', NULL, NULL, NULL, NULL, '4',  NULL, NULL, NULL, NULL,                 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_TEMPLATE')), 'CALCULATEDON',            0, 'N', NULL, NULL, NULL, NULL, '5',  NULL, NULL, NULL, NULL,                 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_TEMPLATE')), 'AMOUNTORPERCENT',         0, 'N', NULL, NULL, NULL, NULL, '6',  NULL, NULL, NULL, 'AMOUNT_MINOR:0.00',  'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_TEMPLATE')), 'ALLOWWAIVER',             0, 'N', NULL, NULL, NULL, NULL, '7',  NULL, NULL, NULL, NULL,                 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_TEMPLATE')), 'MAXWAIVER',               0, 'N', NULL, NULL, NULL, NULL, '8',  NULL, NULL, NULL, NULL,  'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_TEMPLATE')), 'ODMINAMOUNT',             0, 'N', NULL, NULL, NULL, NULL, '9',  NULL, NULL, NULL, 'AMOUNT_MINOR:0.00',  'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_TEMPLATE')), 'STATUS',                  0, 'N', NULL, 'S',  NULL, NULL, '10', NULL, NULL, NULL,  NULL,                'O');
				
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#713.003" author="sainaveen.y">
		<sql> 
			<![CDATA[ 
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='LPP_LOAN_TYPE_UPLOAD');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='LPP_LOAN_TYPE_UPLOAD');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='LPP_LOAN_TYPE_UPLOAD';
 				
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_TYPE_UPLOAD'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_TYPE_UPLOAD');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_TYPE_UPLOAD';

                INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'LPP_LOAN_TYPE_UPLOAD', 'LPP Loan Type Upload File.', 12, 'LPP_LOAN_TYPE', NULL, NULL, ',', 0, 1, null, 'ROW:{Loan Type, Apply to Existing Loans, Apply Overdue Penalty, Penalty Type, Include Grace Days, Grace Days,  Calculated On, Amount\Percentage, Allow Waivers, Max Waiver, Minimum Amount}', null, 'C', '/opt/PFF/BASE/Uploads', 'LPP_LOAN_TYPE_', '.xlsx', 0, CURRENT_TIMESTAMP, '${ddmm},.${SEQ_DATE_FILE}', NULL, 0, NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_TYPE_UPLOAD'), 'LPP_UPLOAD', 1, 'HEADERID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 11, 0, 0);

				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_TYPE_UPLOAD')), 'loanType',               0, 'N', NULL, NULL, NULL, NULL, '0',  NULL, NULL, NULL, NULL,                'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_TYPE_UPLOAD')), 'applyToExistingLoans',   0, 'N', NULL, NULL, NULL, NULL, '1',  NULL, NULL, NULL, NULL,                'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_TYPE_UPLOAD')), 'applyOverDue', 		  0, 'N', NULL, NULL, NULL, NULL, '2',  NULL, NULL, NULL, NULL,                'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_TYPE_UPLOAD')), 'penaltyType',  		  0, 'N', NULL, NULL, NULL, NULL, '3',  NULL, NULL, NULL, NULL,                'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_TYPE_UPLOAD')), 'includeGraceDays',	      0, 'N', NULL, NULL, NULL, NULL, '4',  NULL, NULL, NULL, NULL,                'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_TYPE_UPLOAD')), 'graceDays',              0, 'N', NULL, NULL, NULL, NULL, '5',  NULL, NULL, NULL, NULL,                'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_TYPE_UPLOAD')), 'calculatedOn',           0, 'N', NULL, NULL, NULL, NULL, '6',  NULL, NULL, NULL, NULL,                'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_TYPE_UPLOAD')), 'amountOrPercent',        0, 'N', NULL, NULL, NULL, NULL, '7',  NULL, NULL, NULL, 'AMOUNT_MINOR:0.00', 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_TYPE_UPLOAD')), 'allowWaiver',            0, 'N', NULL, NULL, NULL, NULL, '8',  NULL, NULL, NULL, NULL,                'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_TYPE_UPLOAD')), 'maxWaiver',              0, 'N', NULL, NULL, NULL, NULL, '9',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_TYPE_UPLOAD')), 'oDMinAmount',            0, 'N', NULL, NULL, NULL, NULL, '10', NULL, NULL, NULL, 'AMOUNT_MINOR:0.00', 'O');
		 	]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#713.004" author="sainaveen.y">
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='LPP_LOAN_TYPE_TEMPLATE');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='LPP_LOAN_TYPE_TEMPLATE');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='LPP_LOAN_TYPE_TEMPLATE';
							
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_TYPE_TEMPLATE'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID IN (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_TYPE_TEMPLATE');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_TYPE_TEMPLATE';
							
				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'LPP_LOAN_TYPE_TEMPLATE', 'LPP Loan Type template download', 3, 'LPP_LOAN_TYPE', NULL, NULL, ',' , 0, 0, NULL, 'ROW:{Loan Type, Apply to Existing Loans, Apply Overdue Penalty, Penalty Type, Include Grace Days, Grace Days,  Calculated On, Amount\Percentage, Allow Waivers, Max Waiver, Minimum Amount}',  '', 'A', '/opt/PFF/BASE/hdfc/LPPLoanTypeUpload/template', 'LPP_LOAN_TYPE_', '.xlsx', 0, current_timestamp, '${ddMMYYYYHms}', NULL, 0, NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_TYPE_TEMPLATE'), 'LPP_UPLOAD',  0, 'ID', 'HEADERID = :HEADERID', NULL, NULL, NULL, NULL, NULL, NULL, 11, 0, 0);
				
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_TYPE_TEMPLATE')), 'HEADERID',                1, 'N', NULL, NULL, NULL, NULL, '0',  NULL, NULL, NULL, NULL,                 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_TYPE_TEMPLATE')), 'LOANTYPE',                0, 'N', NULL, NULL, NULL, NULL, '0',  NULL, NULL, NULL, NULL,                 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_TYPE_TEMPLATE')), 'APPLYTOEXISTINGLOANS',    0, 'N', NULL, NULL, NULL, NULL, '1',  NULL, NULL, NULL, NULL,                 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_TYPE_TEMPLATE')), 'APPLYOVERDUE',            0, 'N', NULL, NULL, NULL, NULL, '2',  NULL, NULL, NULL, NULL,                 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_TYPE_TEMPLATE')), 'PENALTYTYPE',             0, 'N', NULL, NULL, NULL, NULL, '3',  NULL, NULL, NULL, NULL,                 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_TYPE_TEMPLATE')), 'INCLUDEGRACEDAYS',        0, 'N', NULL, NULL, NULL, NULL, '4',  NULL, NULL, NULL, NULL,                 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_TYPE_TEMPLATE')), 'GRACEDAYS',               0, 'N', NULL, NULL, NULL, NULL, '5',  NULL, NULL, NULL, NULL,                 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_TYPE_TEMPLATE')), 'CALCULATEDON',            0, 'N', NULL, NULL, NULL, NULL, '6',  NULL, NULL, NULL, NULL,                 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_TYPE_TEMPLATE')), 'AMOUNTORPERCENT',         0, 'N', NULL, NULL, NULL, NULL, '7',  NULL, NULL, NULL, 'AMOUNT_MINOR:0.00',  'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_TYPE_TEMPLATE')), 'ALLOWWAIVER',             0, 'N', NULL, NULL, NULL, NULL, '8',  NULL, NULL, NULL, NULL,                 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_TYPE_TEMPLATE')), 'MAXWAIVER',               0, 'N', NULL, NULL, NULL, NULL, '9',  NULL, NULL, NULL, NULL,                 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_TYPE_TEMPLATE')), 'ODMINAMOUNT',             0, 'N', NULL, NULL, NULL, NULL, '10', NULL, NULL, NULL, 'AMOUNT_MINOR:0.00',  'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LPP_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LPP_LOAN_TYPE_TEMPLATE')), 'STATUS',                  0, 'N', NULL, 'S',  NULL, NULL, '11', NULL, NULL, NULL,  NULL,                'O');
				
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#713.005" author="sainaveen.y">
		<sql>
			<![CDATA[
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LPP_LOAN_UPLOAD_MAKER');
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LPP_LOAN_UPLOAD_APPROVER');
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LPP_LOAN_UPLOAD_VIEW');

				DELETE FROM SECROLES WHERE ROLECD ='LPP_LOAN_UPLOAD_MAKER';
				DELETE FROM SECROLES WHERE ROLECD ='LPP_LOAN_UPLOAD_APPROVER';
				DELETE FROM SECROLES WHERE ROLECD ='LPP_LOAN_UPLOAD_VIEW';

				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LPP_LOAN_UPLOAD_MAKER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LPP_LOAN_UPLOAD_APPROVER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LPP_LOAN_UPLOAD_VIEW');

				DELETE FROM SECGROUPS WHERE GRPCODE ='LPP_LOAN_UPLOAD_MAKER';
				DELETE FROM SECGROUPS WHERE GRPCODE ='LPP_LOAN_UPLOAD_APPROVER';
				DELETE FROM SECGROUPS WHERE GRPCODE ='LPP_LOAN_UPLOAD_VIEW';

				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='menu_Item_BulkLoanOverduePenaltyDetailsUpload_Maker';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='menu_Item_BulkLoanOverduePenaltyDetailsUpload_Approver';

				INSERT INTO SECRIGHTS(RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_BulkLoanOverduePenaltyDetailsUpload_Maker',    'MENU', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS(RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_BulkLoanOverduePenaltyDetailsUpload_Approver', 'MENU', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'LPP_LOAN_UPLOAD_MAKER',    'WF Maker for LPP Loan Upload',    0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'LPP_LOAN_UPLOAD_APPROVER', 'WF Approver for LPP Loan Upload', 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'LPP_LOAN_UPLOAD_VIEW',     'WF View for LPP Loan Upload',     0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);

				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LPP_LOAN_UPLOAD_MAKER'),    (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_BulkLoanOverduePenaltyDetailsUpload_Maker'),    1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LPP_LOAN_UPLOAD_APPROVER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_BulkLoanOverduePenaltyDetailsUpload_Approver'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LPP_LOAN_UPLOAD_VIEW'),     (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_BulkLoanOverduePenaltyDetailsUpload_Maker'),    1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LPP_LOAN_UPLOAD_VIEW'),     (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_BulkLoanOverduePenaltyDetailsUpload_Approver'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);

				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'LPP_LOAN_UPLOAD_MAKER',    'Maker role from LPP Loan Upload',      '', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0); 
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'LPP_LOAN_UPLOAD_APPROVER', 'Approver role from LPP Loan Upload',	'', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'LPP_LOAN_UPLOAD_VIEW',     'View role from LPP Loan Upload',	    '', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);

				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LPP_LOAN_UPLOAD_MAKER'),    (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'LPP_LOAN_UPLOAD_MAKER'),    0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LPP_LOAN_UPLOAD_APPROVER'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'LPP_LOAN_UPLOAD_APPROVER'), 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LPP_LOAN_UPLOAD_VIEW'),     (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'LPP_LOAN_UPLOAD_VIEW'),     0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#713.006" author="sainaveen.y">
		<sql>
			<![CDATA[
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LPP_LOAN_TYPE_UPLOAD_MAKER');
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LPP_LOAN_TYPE_UPLOAD_APPROVER');
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LPP_LOAN_TYPE_UPLOAD_VIEW');

				DELETE FROM SECROLES WHERE ROLECD ='LPP_LOAN_TYPE_UPLOAD_MAKER';
				DELETE FROM SECROLES WHERE ROLECD ='LPP_LOAN_TYPE_UPLOAD_APPROVER';
				DELETE FROM SECROLES WHERE ROLECD ='LPP_LOAN_TYPE_UPLOAD_VIEW';

				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LPP_LOAN_TYPE_UPLOAD_MAKER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LPP_LOAN_TYPE_UPLOAD_APPROVER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LPP_LOAN_TYPE_UPLOAD_VIEW');

				DELETE FROM SECGROUPS WHERE GRPCODE ='LPP_LOAN_TYPE_UPLOAD_MAKER';
				DELETE FROM SECGROUPS WHERE GRPCODE ='LPP_LOAN_TYPE_UPLOAD_APPROVER';
				DELETE FROM SECGROUPS WHERE GRPCODE ='LPP_LOAN_TYPE_UPLOAD_VIEW';

				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='menu_Item_BulkLoanTypeOverduePenaltyDetailsUpload_Maker';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='menu_Item_BulkLoanTypeOverduePenaltyDetailsUpload_Approver';

				INSERT INTO SECRIGHTS(RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_BulkLoanTypeOverduePenaltyDetailsUpload_Maker',    'MENU', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS(RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_BulkLoanTypeOverduePenaltyDetailsUpload_Approver', 'MENU', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'LPP_LOAN_TYPE_UPLOAD_MAKER',    'WF Maker for LPP Loan Type Upload',    0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'LPP_LOAN_TYPE_UPLOAD_APPROVER', 'WF Approver for LPP Loan Type Upload', 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPS(GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'LPP_LOAN_TYPE_UPLOAD_VIEW',     'WF View for LPP Loan Type Upload',     0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);

				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LPP_LOAN_TYPE_UPLOAD_MAKER'),    (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_BulkLoanTypeOverduePenaltyDetailsUpload_Maker'),    1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LPP_LOAN_TYPE_UPLOAD_APPROVER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_BulkLoanTypeOverduePenaltyDetailsUpload_Approver'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LPP_LOAN_TYPE_UPLOAD_VIEW'),     (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_BulkLoanTypeOverduePenaltyDetailsUpload_Maker'),    1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LPP_LOAN_TYPE_UPLOAD_VIEW'),     (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_BulkLoanTypeOverduePenaltyDetailsUpload_Approver'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);

				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'LPP_LOAN_TYPE_UPLOAD_MAKER',    'Maker role from LPP Loan Type Upload',      '', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0); 
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'LPP_LOAN_TYPE_UPLOAD_APPROVER', 'Approver role from LPP Loan Type  Upload',  '', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'LPP_LOAN_TYPE_UPLOAD_VIEW',     'View role from LPP Loan Type  Upload',	  '', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);

				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LPP_LOAN_TYPE_UPLOAD_MAKER'),    (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'LPP_LOAN_TYPE_UPLOAD_MAKER'),    0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LPP_LOAN_TYPE_UPLOAD_APPROVER'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'LPP_LOAN_TYPE_UPLOAD_APPROVER'), 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'LPP_LOAN_TYPE_UPLOAD_VIEW'),     (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'LPP_LOAN_TYPE_UPLOAD_VIEW'),     0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#713.007" author="sainaveen.y">
		<sql>
		 	<![CDATA[ 
		 	     DELETE FROM JOB_DETAILS WHERE JOBKEY = 'LPP_LOAN_JOB';
		 	     DELETE FROM JOB_DETAILS WHERE JOBKEY = 'LPP_LOAN_TYPE_JOB';
		 	
		 	     INSERT INTO JOB_DETAILS (ID, JOBKEY, DESCRIPTION, JOBTRIGGER, CRON_EXPRESSION, JOBMODE, STATUS, ENABLED, FAILURE_NOTIFICATION_REQ, HOST_NAME, PORT, JMX_PORT, SMTP_SERVER, NOTIFY_EMAILS, EXECUTION_LOG_REQ, EXECUTION_RETENTION_DAYS, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, MONITORING_REQ) VALUES ((SELECT MAX(ID)+1 FROM JOB_DETAILS), 'LPP_LOAN_JOB', 	  'LPP Loan Job', 	    'LPP_LOAN_JOB_TRIGGER', 	   '0 0/10 * 1/1 * ? *', 1, 0, 1, 0, NULL, NULL, 0, NULL, NULL, 1, 1, 0, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1);
		 	     INSERT INTO JOB_DETAILS (ID, JOBKEY, DESCRIPTION, JOBTRIGGER, CRON_EXPRESSION, JOBMODE, STATUS, ENABLED, FAILURE_NOTIFICATION_REQ, HOST_NAME, PORT, JMX_PORT, SMTP_SERVER, NOTIFY_EMAILS, EXECUTION_LOG_REQ, EXECUTION_RETENTION_DAYS, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, MONITORING_REQ) VALUES ((SELECT MAX(ID)+1 FROM JOB_DETAILS), 'LPP_LOAN_TYPE_JOB', 'LPP Loan Type Job',  'LPP_LOAN_TYPE_JOB_TRIGGER',   '0 0/10 * 1/1 * ? *', 1, 0, 1, 0, NULL, NULL, 0, NULL, NULL, 1, 1, 0, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1);
	           ]]>
		 </sql>
	</changeSet>
	
	<changeSet id="PSD#227143.1" author="Poojitha.M">
		<sql>
			<![CDATA[ 
				DELETE FROM ERRORDETAILS WHERE CODE = 'RU0053';
				INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION) VALUES('RU0053','EN','E','Value Date:{0} should not be before Loan Start Date:{1}.','','Approved',null,null,null,null,null,0,CURRENT_TIMESTAMP,1000,0);
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#1561.42.1_02" author="ramya.v">
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='LOAN_LETTER_UPLOAD');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='LOAN_LETTER_UPLOAD');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='LOAN_LETTER_UPLOAD';
 				
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_LETTER_UPLOAD'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_LETTER_UPLOAD');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_LETTER_UPLOAD';

                INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE, MAXRECORDS) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'LOAN_LETTER_UPLOAD', 'NOC Generate Letter Upload File.', 12, 'GENERATE_LETTER', null, null, ',', 0, 1, null, 'ROW:{Loan Reference, Letter Type, Mode, Waiver Charges}', null, 'C', '/opt/PFF/BASE/Uploads', 'GenerateLetter_', '.xlsx', 0, CURRENT_TIMESTAMP, '${ddmm},.${SEQ_DATE_FILE}', null, 0, NULL, 1, 1, 10000);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_LETTER_UPLOAD'), 'LOAN_LETTER_UPLOAD', 1, 'HEADERID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 4, 0, 0);

				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LOAN_LETTER_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_LETTER_UPLOAD')), 'finReference',         			 0, 'N', NULL, NULL, NULL, NULL, '0',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LOAN_LETTER_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_LETTER_UPLOAD')), 'letterType',              		 0, 'N', NULL, NULL, NULL, NULL, '1',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LOAN_LETTER_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_LETTER_UPLOAD')), 'modeOfTransfer', 			 	 0, 'N', NULL, NULL, NULL, NULL, '2',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LOAN_LETTER_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_LETTER_UPLOAD')), 'waiverCharges', 		   		 	 0, 'N', NULL, NULL, NULL, NULL, '3',  NULL, NULL, NULL, NULL, 'O');
			 ]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#1561.43_02" author="ramya.v">
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='LOAN_LETTER_TEMPLATE');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='LOAN_LETTER_TEMPLATE');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='LOAN_LETTER_TEMPLATE';
							
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_LETTER_TEMPLATE'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID IN (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_LETTER_TEMPLATE');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_LETTER_TEMPLATE';
							
				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'LOAN_LETTER_TEMPLATE', 'NOC Generate Letter Template Download', 3, 'GENERATE_LETTER', NULL, NULL, ',' , 0, 0, NULL, 'ROW:{Loan Reference, Letter Type, Mode, Waiver Charges}',  '', 'A', '/opt/PFF/BASE/Uploads/Template', 'GenerateLetter_', '.xlsx', 0, current_timestamp, '${ddMMYYYYHms}', NULL, 0, NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_LETTER_TEMPLATE'), 'LOAN_LETTER_UPLOAD',  0, 'ID', 'HEADERID = :HEADERID', NULL, NULL, NULL, NULL, NULL, NULL, 4, 0, 0);
				
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LOAN_LETTER_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_LETTER_TEMPLATE')),  'FINREFERENCE',            0, 'N', NULL, NULL, NULL, NULL, '0',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LOAN_LETTER_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_LETTER_TEMPLATE')),  'LETTERTYPE',              0, 'N', NULL, NULL, NULL, NULL, '1',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LOAN_LETTER_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_LETTER_TEMPLATE')),  'MODEOFTRANSFER', 			0, 'N', NULL, NULL, NULL, NULL, '2',  NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'LOAN_LETTER_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'LOAN_LETTER_TEMPLATE')),  'WAIVERCHARGES', 		   	0, 'N', NULL, NULL, NULL, NULL, '3',  NULL, NULL, NULL, NULL, 'O');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#1561.64" author="sainaveen.y">
		<addColumn tableName="Letter_Blocking">
			<column name="Remarks" type="varchar(100)" />
		</addColumn>
	</changeSet>
	
	<changeSet id="PSD#227320" author="sainaveen.y">
		<sql>
            <![CDATA[
              	DELETE FROM RBFIELDDETAILS WHERE  RBMODULE= 'FEES' and RBEVENT = 'EARLYSTL' and RBFLDNAME = 'ClosureType';
              	
              	INSERT INTO RBFIELDDETAILS (RBMODULE, RBEVENT, RBFLDNAME, RBFLDDESC, RBFLDTYPE, RBFLDLEN, RBFORCALFLDS, RBFORBLDFLDS, RBFLDTABLENAME, RBSTFLDS, MODULECODE) VALUES ('FEES', 'EARLYSTL', 'ClosureType', 'ClosureType', 'nvarchar',  12,  '0', '1', 'Closure_Types', 'static,global,dbvalue', 'ClosureType');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="PSD#227176_pre" author="Poojitha.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'loan_cancel_uploads');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="PSD#227176" author="Poojitha.M">
		<modifyDataType tableName="LOAN_CANCEL_UPLOADS" columnName="CancelType" newDataType="varchar(2)"/>
	</changeSet>
	
	<changeSet id="PSD#227176_post" author="Poojitha.M" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'loan_cancel_uploads');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#1468.11" author="saikrishna.b">
		<sql>
		 	<![CDATA[
		 		UPDATE DATA_ENGINE_CONFIG SET MAXRECORDS = 10000 WHERE NAME = 'BRANCH_CHANGE_UPLOAD';
		 	]]>
		</sql>
	</changeSet>
	
	<changeSet id="PSD#227404_pre" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rev_write_off_upload');
			]]>
		</sql>
	</changeSet>

	<changeSet id="PSD#227404" author="Gopal.p">
		<modifyDataType tableName="REV_WRITE_OFF_UPLOAD" columnName="Remarks" newDataType="varchar(100)" />
	</changeSet>

	<changeSet id="PSD#227404_post" author="Gopal.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rev_write_off_upload');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#110.1" author="saikiran.n">
		<createTable tableName="AUTO_REFUND_QUEUE">
			<column name="ID" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="FinID" type="bigint" />
			<column name="ThreadId" type="int">
				<constraints nullable="false" />
			</column>
			<column name="StartTime" type="datetime" />
			<column name="EndTime" type="datetime" />
			<column name="Progress" type="int">
				<constraints nullable="false" />
			</column>
			<column name="ErrorLog" type="varchar(2000)" />
			<column name="ResetCounterId" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="PickUpFlag" type="boolean">
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>

	<changeSet id="ST#110.2" author="saikiran.n" dbms="oracle">
		<createSequence sequenceName="SEQ_AUTO_REFUND_QUEUE" minValue="1" maxValue="9223372036854775807"
			incrementBy="1" startValue="1" ordered="true" />
	</changeSet>

	<changeSet id="ST#110.3" author="saikiran.n">
		<addPrimaryKey tableName="AUTO_REFUND_QUEUE" columnNames="ID" constraintName="pk_auto_refund_queue" />
	</changeSet>

	<changeSet id="ST#110.4" author="saikiran.n" dbms="postgresql,mssql">
		<createSequence sequenceName="SEQ_AUTO_REFUND_QUEUE" minValue="1" maxValue="9223372036854775807"
			incrementBy="1" startValue="1" />
	</changeSet>

	<changeSet id="ST#110.5" author="saikiran.n" dbms="postgresql, oracle">
		<addDefaultValue columnName="ThreadId" tableName="AUTO_REFUND_QUEUE" defaultValue="0" />
		<addDefaultValue columnName="Progress" tableName="AUTO_REFUND_QUEUE" defaultValue="0" />
		<addDefaultValue columnName="ResetCounterId" tableName="AUTO_REFUND_QUEUE" defaultValue="0" />
		<addDefaultValue columnName="PickUpFlag" tableName="AUTO_REFUND_QUEUE" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#110.5" author="saikiran.n" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE EOD_CUSTOMER_QUEUE ADD CONSTRAINT DF_AUTO_REFUND_QUEUE_THREADID DEFAULT 0 FOR THREADID;
				ALTER TABLE EOD_CUSTOMER_QUEUE ADD CONSTRAINT DF_AUTO_REFUND_QUEUE_PROGRESS DEFAULT 0 FOR PROGRESS;
				ALTER TABLE EOD_CUSTOMER_QUEUE ADD CONSTRAINT DF_AUTO_REFUND_QUEUE_RCID DEFAULT 0 FOR RESETCOUNTERID;
				ALTER TABLE EOD_CUSTOMER_QUEUE ADD CONSTRAINT DF_AUTO_REFUND_QUEUE_PCPF DEFAULT 0 FOR PICKUPFLAG;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#110.6" author="saikiran.n">
		<sql>
		    <![CDATA[
		        DELETE FROM SMTPARAMETERS WHERE SYSPARMCODE = 'AUTO_REFUND_PROCESS_THREAD_COUNT';
                INSERT INTO SMTPARAMETERS (SYSPARMCODE, SYSPARMDESC, SYSPARMTYPE, SYSPARMMAINT, SYSPARMVALUE, SYSPARMLENGTH, SYSPARMDEC, SYSPARMLIST, SYSPARMVALDMOD, SYSPARMDESCRIPTION, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('AUTO_REFUND_PROCESS_THREAD_COUNT', 'AUTO REFUND PROCESS THREAD COUNT', 'string', 0, '10', 3, 0, NULL, NULL, 'Auto Refund Thread Count', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		     ]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#110.7" author="saikiran.n">
		<sql>
			<![CDATA[
				DELETE FROM ERRORDETAILS WHERE CODE='REFUND_012';
				INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, RECORDSTATUS, WORKFLOWID, LASTMNTBY, VERSION) VALUES ('REFUND_012', 'EN', 'E', 'Auto refund not allowed, loan closed days {0} less than configred hold refund days {1} for closed loans.', 'Approved', 0, 1000, 1);
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="01.1" author="saikrishna.b">
		<createTable tableName="HOLD_MARKING_UPLOAD">
			<column name="Id" type="bigint" autoIncrement="true">
				<constraints nullable="false" />
			</column>
			<column name="HeaderId" type="bigint" />
			<column name="RecordSeq" type="bigint" />
			<column name="FinID" type="bigint" />
			<column name="Type" type="varchar(10)" />
			<column name="AccountNumber" type="varchar(20)" />
			<column name="Amount" type="decimal(18,0)" />
			<column name="Reference" type="varchar(20)" />
			<column name="Remarks" type="varchar(500)" />
			<column name="Progress" type="int" />
			<column name="Status" type="char(1)" />
			<column name="ErrorCode" type="varchar(20)" />
			<column name="ErrorDesc" type="varchar(2000)" />
		</createTable>
	</changeSet>
	
	<changeSet id="02.1" author="saikrishna.b">
		<addPrimaryKey tableName="HOLD_MARKING_UPLOAD" columnNames="Id" constraintName="PK_HOLD_MARKING_UPLOAD_ID" />
	</changeSet> 
	
	
	 <changeSet id="03" author="saikrishna.b">
		<createTable tableName="HOLD_MARKING_UPLOAD_LOG">
			<column name="Id" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="HeaderId" type="bigint" />
			<column name="FinID" type="bigint" />
			<column name="Type" type="varchar(10)" />
			<column name="AccountNumber" type="varchar(20)" />
			<column name="Amount" type="decimal(18,0)" />
			<column name="Reference" type="varchar(20)" />
			<column name="Remarks" type="varchar(500)" />
			<column name="Progress" type="int" />
			<column name="Status" type="char(1)" />
			<column name="ErrorCode" type="varchar(20)" />
			<column name="ErrorDesc" type="varchar(2000)" />
			<column name="CreatedOn" type="datetime" />
			<column name="CreatedBy" type="bigint" />
			<column name="ApprovedOn" type="datetime" />
			<column name="ApprovedBy" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet id="04" author="saikrishna.b">
		<addPrimaryKey tableName="HOLD_MARKING_UPLOAD_LOG" columnNames="Id" constraintName="PK_HOLD_MARKING_UPLOAD_LOG_ID" />
	</changeSet>
	
	<changeSet id="05" author="saikrishna.b">
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='HOLD_MARKING_UPLOAD');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='HOLD_MARKING_UPLOAD');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='HOLD_MARKING_UPLOAD';
 				
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOLD_MARKING_UPLOAD'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOLD_MARKING_UPLOAD');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOLD_MARKING_UPLOAD';

                INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE, MAXRECORDS) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'HOLD_MARKING_UPLOAD', 'Hold Marking Upload File.', 12, 'HOLD_MARKING', null, null, ',', 0, 1, null, 'ROW:{Type, Account Number, Amount, Reference, Remarks}', null, 'C', '/opt/PFF/BASE/hdfc/HoldMarkingUpload/upload', 'HOLD_MARKING_', '.xlsx', 0, CURRENT_TIMESTAMP, '${ddmm},.${SEQ_DATE_FILE}', NULL, 0, NULL, 1, 1, 10000);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOLD_MARKING_UPLOAD'), 'HOLD_MARKING_UPLOAD', 1, 'HEADERID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 5, 0, 0);

				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'HOLD_MARKING_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOLD_MARKING_UPLOAD')), 'type',  			0, 'N', NULL, NULL,  NULL,            NULL, '0',  NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'HOLD_MARKING_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOLD_MARKING_UPLOAD')), 'accountNumber',    0, 'N', NULL, NULL,  NULL,            NULL, '1',  NULL, NULL, NULL, NULL, 'M');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'HOLD_MARKING_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOLD_MARKING_UPLOAD')), 'amount', 	     	0, 'N', NULL, NULL,  NULL,            NULL, '2',  NULL, NULL, NULL, NULL, 'M');
			 	INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'HOLD_MARKING_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOLD_MARKING_UPLOAD')), 'reference', 	    0, 'N', NULL, NULL,  NULL,            NULL, '3',  NULL, NULL, NULL, NULL, 'M');
			 	INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'HOLD_MARKING_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOLD_MARKING_UPLOAD')), 'remarks', 	     	0, 'N', NULL, NULL,  NULL,            NULL, '4',  NULL, NULL, NULL, NULL, 'O');
			 ]]>
		</sql>
	</changeSet>
	
	<changeSet id="06.1" author="saikrishna.b">
		<sql>
			<![CDATA[
				DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='HOLD_MARKING_TEMPLATE');
 				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='HOLD_MARKING_TEMPLATE');
 				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='HOLD_MARKING_TEMPLATE';
							
				DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT ID FROM DATA_ENGINE_TABLE WHERE CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOLD_MARKING_TEMPLATE'));
				DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID IN (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOLD_MARKING_TEMPLATE');
				DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOLD_MARKING_TEMPLATE';
							
				INSERT INTO DATA_ENGINE_CONFIG (ID, NAME, DESCRIPTION, PARSER, WORKSHEET, TEXTQUALIFIER, ROWDELIMITER, COLUMNDELIMITER, STARTINGROW, SKIPHEADERROW, FIELDNAMES, HEADER, TRAILER, UPLOADLOCATION, UPLOADPATH, FILEPREFIXNAME, FILEEXTENSION, FILESEQUENCENO, LASTPROCESSEDON, FILENAMEFORMAT, CRONEXPRESSION, NOTIFICATIONSTATUSEMAIL, POSTEVENT, BACKUPFILE, ACTIVE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'HOLD_MARKING_TEMPLATE', 'Hold Marking template download', 3, 'HOLD_MARKING', NULL, NULL, ',' , 0, 0, NULL, 'ROW:{Type, Account Number, Amount, Reference, Remarks}',  '', 'A', '/opt/PFF/BASE/hdfc/HoldMarkingUpload/template', 'HOLD_MARKING_', '.xlsx', 0, current_timestamp, '${ddMMYYYYHms}', NULL, 0, NULL, 1, 1);

				INSERT INTO DATA_ENGINE_TABLE (ID, CONFIGID, NAME, OPERATION, KEYFIELDS, FILTER, STATUSUPDATE, SKIPROWS, IDENTIFIER, DESCRIPTION, STARTINDEX, ENDINDEX, RECORDLENGTH, MULTIROW, HEADERTABLE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOLD_MARKING_TEMPLATE'), 'HOLD_MARKING_UPLOAD',  0, 'ID', 'HEADERID = :HEADERID', NULL, NULL, NULL, NULL, NULL, NULL, 5, 0, 0);
				
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'HOLD_MARKING_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOLD_MARKING_TEMPLATE')), 'TYPE', 			0, 'N', NULL, NULL, NULL, NULL, '0',  NULL, NULL, NULL, NULL,  'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'HOLD_MARKING_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOLD_MARKING_TEMPLATE')), 'ACCOUNTNUMBER',  0, 'N', NULL, NULL, NULL, NULL, '1',  NULL, NULL, NULL, NULL,  'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'HOLD_MARKING_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOLD_MARKING_TEMPLATE')), 'AMOUNT',      	0, 'N', NULL, NULL, NULL, NULL, '2',  NULL, NULL, NULL, NULL,  'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'HOLD_MARKING_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOLD_MARKING_TEMPLATE')), 'REFERENCE',      0, 'N', NULL, NULL, NULL, NULL, '3',  NULL, NULL, NULL, NULL,  'O');
				INSERT INTO DATA_ENGINE_COLUMN (ID, TABLEID, NAME, SKIP, SEQTYPE, SEQOBJECT, DEFAULTVALUE, DERIVEDFROM, REFERENCECOLUMN, STARTINDEX, ENDINDEX, RULEFORVALUE, QUERYFORVALUE, FORMAT, CONSTRAINTTYPE) VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (SELECT ID FROM DATA_ENGINE_TABLE WHERE NAME = 'HOLD_MARKING_UPLOAD' AND CONFIGID = (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'HOLD_MARKING_TEMPLATE')), 'REMARKS',      	0, 'N', NULL, NULL, NULL, NULL, '4',  NULL, NULL, NULL, NULL,  'O');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="07" author="saikrishna.b">
		<sql>
			<![CDATA[
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'HOLD_MARKING_UPLOAD_MAKER');
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'HOLD_MARKING_UPLOAD_APPROVER');
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'HOLD_MARKING_UPLOAD_VIEW');

				DELETE FROM SECROLES WHERE ROLECD ='HOLD_MARKING_UPLOAD_MAKER';
				DELETE FROM SECROLES WHERE ROLECD ='HOLD_MARKING_UPLOAD_APPROVER';
				DELETE FROM SECROLES WHERE ROLECD ='HOLD_MARKING_UPLOAD_VIEW';

				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'HOLD_MARKING_UPLOAD_MAKER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'HOLD_MARKING_UPLOAD_APPROVER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'HOLD_MARKING_UPLOAD_VIEW');

				DELETE FROM SECGROUPS WHERE GRPCODE ='HOLD_MARKING_UPLOAD_MAKER';
				DELETE FROM SECGROUPS WHERE GRPCODE ='HOLD_MARKING_UPLOAD_APPROVER';
				DELETE FROM SECGROUPS WHERE GRPCODE ='HOLD_MARKING_UPLOAD_VIEW';

				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='menu_Item_HoldMarkingUpload_Maker';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME ='menu_Item_HoldMarkingUpload_Approver';

				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_HoldMarkingUpload_Maker',    'MENU', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_HoldMarkingUpload_Approver', 'MENU', 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SECGROUPS (GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS),  'HOLD_MARKING_UPLOAD_MAKER',    'WF Maker for Hold Marking Upload',       0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPS (GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS),  'HOLD_MARKING_UPLOAD_APPROVER', 'WF Approver for Hold Marking Upload',    0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
                INSERT INTO SECGROUPS (GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS),  'HOLD_MARKING_UPLOAD_VIEW', 	   'Menu group for Hold Marking Upload',     0, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);

				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'HOLD_MARKING_UPLOAD_MAKER'),    (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_HoldMarkingUpload_Maker'),        1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'HOLD_MARKING_UPLOAD_APPROVER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_HoldMarkingUpload_Approver'),     1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'HOLD_MARKING_UPLOAD_VIEW'),     (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_HoldMarkingUpload_Maker'), 		1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'HOLD_MARKING_UPLOAD_VIEW'), 	  (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_HoldMarkingUpload_Approver'), 	1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);

				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'HOLD_MARKING_UPLOAD_MAKER',    'Maker role from Hold Marking Upload',     '', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0); 
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'HOLD_MARKING_UPLOAD_APPROVER', 'Approver role from Hold Marking Upload',  '', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'HOLD_MARKING_UPLOAD_VIEW',     'Menu role for Hold Marking Upload',       '', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);

				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'HOLD_MARKING_UPLOAD_MAKER'),    (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'HOLD_MARKING_UPLOAD_MAKER'),    0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'HOLD_MARKING_UPLOAD_APPROVER'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'HOLD_MARKING_UPLOAD_APPROVER'), 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'HOLD_MARKING_UPLOAD_VIEW'), 	 (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'HOLD_MARKING_UPLOAD_VIEW'), 	  0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="08.1" author="saikrishna.b">
		<createSequence sequenceName="SEQ_HOLD_MARKING_HEADER_HOLDID" startValue="1001" maxValue="9223372036854775807"
			incrementBy="1" />
	</changeSet>

	<changeSet id="09.1" author="saikrishna.b">
		<createSequence sequenceName="SEQ_HOLD_MARKING_HEADER_ID" startValue="1" maxValue="9223372036854775807"
			incrementBy="1" />
	</changeSet> 
	
	<changeSet id="10.1" author="saikrishna.b">
		<createTable tableName="HOLD_MARKING_HEADER">
			<column name="ID" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="HoldID" type="bigint" />
			<column name="FinID" type="bigint" />
			<column name="FinReference" type="Varchar(20)">
				<constraints nullable="false" />
			</column>
			<column name="HoldReference" type="bigint" />
			<column name="AccountNumber" type="varchar(20)" />
			<column name="HoldAmount" type="decimal(18,0)" />
			<column name="ReleaseAmount" type="decimal(18,0)" />
			<column name="Balance" type="decimal(18,0)" />
		</createTable>
	</changeSet>
	
	<changeSet id="11.1" author="saikrishna.b">
		<addPrimaryKey constraintName="PK_HMH_ID" tableName="HOLD_MARKING_HEADER" columnNames="ID" />
	</changeSet>
	
	<changeSet id="12.1" author="saikrishna.b">
		<addUniqueConstraint tableName="HOLD_MARKING_HEADER" columnNames="HoldID"
			constraintName="uk_Hold_Marking_Header_HoldId" />
	</changeSet>
	
	 <changeSet id="13" author="saikrishna.b">
		<createTable tableName="HOLD_MARKING_DETAILS">
			<column name="ID" type="bigint"  autoIncrement="true">
				<constraints nullable="false" />
			</column>
			<column name="HeaderID" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="HoldID" type="bigint" />
			<column name="FinID" type="bigint" />
			<column name="FinReference" type="Varchar(20)">
				<constraints nullable="false" />
			</column>
			<column name="HoldType" type="varchar(10)" />
			<column name="Marking" type="Varchar(8)" />
			<column name="MovementDate" type="datetime" />
			<column name="Status" type="varchar(30)" />
			<column name="Amount" type="decimal(18,0)" />
			<column name="LogID" type="bigint" />
			<column name="HoldReleaseReason" type="Varchar(500)" />
			<column name="Version" type="int" />
			<column name="CreatedBy" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="CreatedOn" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="ApprovedBy" type="bigint" />
			<column name="ApprovedOn" type="datetime" />
			<column name="LastMntBy" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="LastMnton" type="datetime">
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>
	
	<changeSet id="14" author="saikrishna.b">
		<addPrimaryKey constraintName="PK_HMD_ID" tableName="HOLD_MARKING_DETAILS" columnNames="ID" />
	</changeSet>
	
	<changeSet id="PSD#227428" author="Gopal.p">
		<renameColumn tableName="PRESENTMENT_RESP_UPLOAD" oldColumnName="HEADER_ID" newColumnName="HeaderID"/>
	</changeSet>
	
	<changeSet id="ST#1561.71" author="Mounika.M">
		<createTable tableName="LETTER_GENERATION">
			<column name="ID" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="FinID" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="RequestType" type="char(1)">
				<constraints nullable="false" />
			</column>
			<column name="LetterType" type="varchar(20)">
				<constraints nullable="false" />
			</column>
			<column name="AgreementTemplate" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="FeeTypeId" type="bigint" />
			<column name="ModeOfTransfer" type="varchar(8)">
				<constraints nullable="false" />
			</column>
			<column name="CreatedDate" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="CreatedOn" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="EmailTemplate" type="bigint" />
			<column name="Generated" type="boolean">
				<constraints nullable="false" />
			</column>
			<column name="GeneratedDate" type="datetime" />
			<column name="GeneratedOn" type="datetime" />
			<column name="GeneratedBy" type="bigint" />
			<column name="AdviseID" type="bigint" />
			<column name="TrackingID" type="bigint" />
			<column name="Status" type="char(1)" />
			<column name="Remarks" type="varchar(1000)" />
		</createTable>
	</changeSet>

	<changeSet id="ST#1561.72" author="Mounika.M">
		<addPrimaryKey tableName="LETTER_GENERATION" columnNames="ID" constraintName="PK_LETTER_GENERATION_ID" />
	</changeSet>

	<changeSet id="ST#1561.73" author="Mounika.M">
		<addForeignKeyConstraint constraintName="FK_LG_FM_FinID" referencedTableName="FinanceMain"
			baseColumnNames="FinID" baseTableName="Letter_Generation" referencedColumnNames="FinID" />
	</changeSet>

	<changeSet id="ST#1561.74" author="Mounika.M">
		<addForeignKeyConstraint constraintName="FK_LG_BMTAD_AgreeTemp"
			referencedTableName="BMTAggrementDef" baseColumnNames="AgreementTemplate" baseTableName="Letter_Generation"
			referencedColumnNames="AggId" />
	</changeSet>

	<changeSet id="ST#1561.76" author="Mounika.M">
		<addForeignKeyConstraint constraintName="FK_LG_Template_ET" referencedTableName="Templates"
			baseColumnNames="EmailTemplate" baseTableName="Letter_Generation" referencedColumnNames="TemplateID" />
	</changeSet>

	<changeSet id="ST#1561.77" author="Mounika.M">
		<addForeignKeyConstraint constraintName="FK_LG_MA_AdviseID" referencedTableName="ManualAdvise"
			baseColumnNames="AdviseID" baseTableName="Letter_Generation" referencedColumnNames="AdviseID" />
	</changeSet>

	<changeSet id="ST#1561.78" author="Mounika.M">
		<createIndex tableName="LETTER_GENERATION" indexName="idx_Ltr_Gen_finid">
			<column name="FinID"></column>
		</createIndex>
	</changeSet>

	<changeSet id="ST#1561.79" author="Mounika.M" dbms="postgresql, oracle">
		<addDefaultValue columnName="Generated" tableName="Letter_Generation" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#1561.79" author="Mounika.M" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE LETTER_GENERATION ADD CONSTRAINT DF_LG_GENERATED DEFAULT 0 FOR GENERATED;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1561.80" author="Mounika.M">
		<createTable tableName="LETTER_GENERATION_STAGE">
			<column name="ID" type="bigint" autoIncrement="true">
				<constraints nullable="false" />
			</column>
			<column name="FinID" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="RequestType" type="char(1)">
				<constraints nullable="false" />
			</column>
			<column name="LetterType" type="varchar(20)">
				<constraints nullable="false" />
			</column>
			<column name="AgreementTemplate" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="FeeTypeId" type="bigint" />
			<column name="ModeOfTransfer" type="varchar(8)">
				<constraints nullable="false" />
			</column>
			<column name="CreatedDate" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="CreatedOn" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="EmailTemplate" type="bigint" />
			<column name="Generated" type="boolean">
				<constraints nullable="false" />
			</column>
			<column name="GeneratedDate" type="datetime" />
			<column name="GeneratedOn" type="datetime" />
			<column name="GeneratedBy" type="bigint" />
			<column name="AdviseID" type="bigint" />
			<column name="TrackingID" type="bigint" />
			<column name="Status" type="char(1)" />
			<column name="Remarks" type="varchar(1000)" />
		</createTable>
	</changeSet>

	<changeSet id="ST#1561.81" author="Mounika.M">
		<addPrimaryKey tableName="LETTER_GENERATION_STAGE" columnNames="ID"
			constraintName="PK_LETTER_GENERATION_STAGE_ID" />
	</changeSet>

	<changeSet id="ST#1561.82" author="Mounika.M">
		<addForeignKeyConstraint constraintName="FK_LGS_FM_FinID" referencedTableName="FinanceMain"
			baseColumnNames="FinID" baseTableName="LETTER_GENERATION_STAGE" referencedColumnNames="FinID" />
	</changeSet>

	<changeSet id="ST#1561.83" author="Mounika.M">
		<addForeignKeyConstraint constraintName="FK_LGS_AT_AGT" referencedTableName="BMTAggrementDef"
			baseColumnNames="AgreementTemplate" baseTableName="LETTER_GENERATION_STAGE" referencedColumnNames="AggId" />
	</changeSet>

	<changeSet id="ST#1561.84" author="Mounika.M">
		<addForeignKeyConstraint constraintName="FK_LGS_TEMPLATE_ET" referencedTableName="Templates"
			baseColumnNames="EmailTemplate" baseTableName="LETTER_GENERATION_STAGE" referencedColumnNames="TemplateID" />
	</changeSet>

	<changeSet id="ST#1561.85" author="Mounika.M">
		<addForeignKeyConstraint constraintName="FK_MA_AdviseID" referencedTableName="ManualAdvise"
			baseColumnNames="AdviseID" baseTableName="LETTER_GENERATION_STAGE" referencedColumnNames="AdviseID" />
	</changeSet>

	<changeSet id="ST#1561.86" author="Mounika.M">
		<createIndex tableName="LETTER_GENERATION_STAGE" indexName="idx_LGS_finid">
			<column name="FinID"></column>
		</createIndex>
	</changeSet>

	<changeSet id="ST#1561.87" author="Mounika.M" dbms="postgresql, oracle">
		<addDefaultValue columnName="Generated" tableName="LETTER_GENERATION_STAGE" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#1561.87" author="Mounika.M" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE LETTER_GENERATION_STAGE ADD CONSTRAINT DF_LG_GENERATED DEFAULT 0 FOR GENERATED;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#15956.88" author="Mounika.M">
		<sql>
			<![CDATA[
				DELETE FROM SECROLEGROUPS WHERE ROLEID = (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'GENERATE_LETTER_MAKER');
				DELETE FROM SECROLEGROUPS WHERE ROLEID = (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'GENERATE_LETTER_APPROVER');
				DELETE FROM SECROLEGROUPS WHERE ROLEID = (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'GENERATE_LETTER_VIEW');
				
				DELETE FROM SECROLEGROUPS WHERE ROLEID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_MAKER');
				DELETE FROM SECROLEGROUPS WHERE ROLEID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_APPROVER');
				DELETE FROM SECROLEGROUPS WHERE ROLEID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_VIEW');
				
				DELETE FROM SECROLES WHERE ROLECD = 'GENERATE_LETTER_MAKER';
				DELETE FROM SECROLES WHERE ROLECD = 'GENERATE_LETTER_APPROVER';
				DELETE FROM SECROLES WHERE ROLECD = 'GENERATE_LETTER_VIEW';
				
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_MAKER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_APPROVER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_VIEW');
				
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_MAKER');
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_APPROVER');
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_VIEW');
				
				DELETE FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_MAKER';
				DELETE FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_APPROVER';
				DELETE FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_VIEW';
				
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RightName = 'menuItem_Generate_Letter');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RightName = 'button_GenerateLetter_btnNew');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RightName = 'button_GenerateLetter_SearchDialog');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RightName = 'button_GenerateLetter_btnEdit');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RightName = 'button_GenerateLetter_btnSave');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RightName = 'button_GenerateLetter_btnDelete');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RightName = 'button_GenerateLetter_btnProceed');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RightName = 'button_GenerateLetter_btnDownLoad');
			
				
				DELETE FROM SECRIGHTS WHERE RightName = 'menuItem_Generate_Letter';            
				DELETE FROM SECRIGHTS WHERE RightName = 'button_GenerateLetter_btnNew';        
				DELETE FROM SECRIGHTS WHERE RightName = 'button_GenerateLetter_SearchDialog';  
				DELETE FROM SECRIGHTS WHERE RightName = 'button_GenerateLetter_btnEdit';       
				DELETE FROM SECRIGHTS WHERE RightName = 'button_GenerateLetter_btnSave';       
				DELETE FROM SECRIGHTS WHERE RightName = 'button_GenerateLetter_btnDelete';     
				DELETE FROM SECRIGHTS WHERE RightName = 'button_GenerateLetter_btnProceed';    
				DELETE FROM SECRIGHTS WHERE RightName = 'button_GenerateLetter_btnDownLoad';   
				
				
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menuItem_Generate_Letter',              'MENU', 						0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2, 'button_GenerateLetter_btnNew',          'GenerateLetterList',    0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2, 'button_GenerateLetter_SearchDialog',      'GenerateLetterList',    0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2, 'button_GenerateLetter_btnEdit',         'GenerateLetterDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2, 'button_GenerateLetter_btnSave',         'GenerateLetterDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2, 'button_GenerateLetter_btnDelete',       'GenerateLetterDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2, 'button_GenerateLetter_btnProceed',      'GenerateLetterDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2, 'button_GenerateLetter_btnDownLoad',     'GenerateLetterDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				

				INSERT INTO SECGROUPS (GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'GENERATE_LETTER_MAKER',     'GENERATE LETTER MAKER',  	1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPS (GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'GENERATE_LETTER_APPROVER', 	'GENERATE LETTER  APPROVER', 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPS (GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'GENERATE_LETTER_VIEW', 		'GENERATE LETTER  VIEW',  	1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menuItem_Generate_Letter'),           	   1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_GenerateLetter_btnNew'),       	   1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_GenerateLetter_SearchDialog'),     1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_GenerateLetter_btnEdit'),      	   1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_GenerateLetter_btnSave'),      	   1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_GenerateLetter_btnDelete'),        1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_GenerateLetter_btnProceed'),       1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_GenerateLetter_btnDownLoad'),  	   1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				
				
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_APPROVER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menuItem_Generate_Letter'),      1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_APPROVER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_GenerateLetter_btnSave'), 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_VIEW'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menuItem_Generate_Letter'), 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'GENERATE_LETTER_MAKER',    'Maker role for Genarate Letter',    '', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0); 
		  		INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'GENERATE_LETTER_APPROVER', 'Approver role for Genarate Letter', '', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		  		INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'GENERATE_LETTER_VIEW',     'View role for Genarate Letter',	 '', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		  		
		  		INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_MAKER'),    (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'GENERATE_LETTER_MAKER'),    0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		    	INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_APPROVER'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'GENERATE_LETTER_APPROVER'), 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		    	INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_VIEW'), 	 (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'GENERATE_LETTER_VIEW'),     0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		    	
		    	INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_MAKER'),    (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'MSTGRP1_MAKER'),    0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		    	INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_APPROVER'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'MSTGRP1_APPROVER'), 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		    	
		    	INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_VIEW'),    (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'MSTGRP1_MAKER'),    0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		    	INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_VIEW'),    (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'MSTGRP1_APPROVER'), 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#15956.89" author="Mounika.M">
		<createSequence sequenceName="SEQ_Letter_Generate_Manual" minValue="1" maxValue="9223372036854775807"
			incrementBy="1" startValue="1" />
	</changeSet>

	<changeSet id="ST#15956.90" author="Mounika.M">
		<createTable tableName="LETTER_GENERATE_MANUAL">
			<column name="Id" type="bigint" autoIncrement="true"></column>
			<column name="LetterType" type="varchar(20)">
				<constraints nullable="false" />
			</column>
			<column name="FinID" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="CreatedBy" type="bigint" />
			<column name="CreatedOn" type="datetime" />
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="ApprovedBy" type="bigint" />
			<column name="ApprovedOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkFlowId" type="bigint">
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>

	<changeSet id="ST#15956.91" author="Mounika.M">
		<addPrimaryKey tableName="LETTER_GENERATE_MANUAL" columnNames="ID"
			constraintName="PK_LETTER_GENERATE_MANUAL_ID" />
	</changeSet>

	<changeSet id="ST#15956.92" author="Mounika.M">
		<createTable tableName="LETTER_GENERATE_MANUAL_TEMP">
			<column name="Id" type="bigint" autoIncrement="true"></column>
			<column name="LetterType" type="varchar(20)">
				<constraints nullable="false" />
			</column>
			<column name="FinID" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="CreatedBy" type="bigint" />
			<column name="CreatedOn" type="datetime" />
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="ApprovedBy" type="bigint" />
			<column name="ApprovedOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkFlowId" type="bigint">
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>

	<changeSet id="ST#15956.93" author="Mounika.M">
		<addPrimaryKey tableName="LETTER_GENERATE_MANUAL_TEMP" columnNames="ID"
			constraintName="PK_LETTER_GEN_MANU_TEMP_ID" />
	</changeSet>

	<changeSet id="ST#15956.94" author="Mounika.M">
		<insert tableName="WorkFlowDetails">
			<column name="WorkFlowId" valueComputed="(select max(WorkFlowId) + 1 from WorkFlowDetails)" />
			<column name="WorkFlowType">GENERATE_LETTER</column>
			<column name="WorkFlowSubType">Generate Letter</column>
			<column name="WorkFlowDesc">Generate Letter Workflow Process</column>
			<column name="JsonDesign" type="nclob"><![CDATA[NULL]]></column>
			<column name="SvgDesign" type="nclob"><![CDATA[NULL]]></column>
			<column name="WorkFlowXml" type="clob"><![CDATA[NULL]]></column>
			<column name="WorkFlowRoles">GENERATE_LETTER_MAKER;GENERATE_LETTER_APPROVER;GENERATE_LETTER_DOWNLOAD</column>
			<column name="FirstTaskOwner">GENERATE_LETTER_MAKER</column>
			<column name="WorkFlowActive">1</column>
			<column name="Version">0</column>
			<column name="LastMntBy">1000</column>
			<column name="LastMntOn" valueDate="current_timestamp" />
			<column name="RecordStatus">Null</column>
			<column name="RoleCode">Null</column>
			<column name="NextRoleCode">Null</column>
			<column name="TaskId">Null</column>
			<column name="NextTaskId">Null</column>
			<column name="RecordType">NULL</column>
		</insert>
	</changeSet>

	<changeSet id="ST#15956.95" author="Mounika.M">
		<update tableName="WORKFLOWDETAILS">
			<column name="JSONDESIGN" type="NCLOB"><![CDATA[{"resourceId":968,"properties":{"process_id":"GENERATE_LETTER","name":"Generate Letter Process","documentation":"Maker/Checker WorkFlow","category":"","listenerclass":"","listenerentitytype":""},"stencil":{"id":"BPMNDiagram"},"childShapes":[{"resourceId":"startEvent1","properties":{"overrideid":"","name":"Start"},"stencil":{"id":"StartNoneEvent"},"childShapes":[],"outgoing":[{"resourceId":"sid-CB1DEE00-A9A1-4162-BD4A-CC3D4B6E7CC1"}],"bounds":{"lowerRight":{"x":130,"y":193},"upperLeft":{"x":100,"y":163}},"dockers":[]},{"resourceId":"sid-38272C15-118D-4D4F-80E0-DD3A3FEC8897","properties":{"overrideid":"","name":"Maker","usertaskassignment":{"assignment":{"type":"idm","idm":{"type":"user","assignee":{"email":"GENERATE_LETTER_MAKER","firstName":"GENERATE_LETTER_MAKER","fullName":"GENERATE_LETTER_MAKER","id":"GENERATE_LETTER_MAKER","roledesc":"Workflow Maker","$$hashKey":"object:575"}}}},"additionalforms":"","formkeydefinition":"","prioritydefinition":"Role Queue","baseactor":"","duedatedefinition":"","multiinstance_type":"None","isforcompensation":"false"},"stencil":{"id":"UserTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-F8AD09C4-9AD3-4E9F-9432-0B753ACDBFF3"},{"resourceId":"sid-751124CB-1CC1-40AF-B5DB-360706ED6035"}],"bounds":{"lowerRight":{"x":275,"y":218},"upperLeft":{"x":175,"y":138}},"dockers":[]},{"resourceId":"sid-CB1DEE00-A9A1-4162-BD4A-CC3D4B6E7CC1","properties":{"overrideid":"","name":"","repruseaction":"false","conditionsequenceflow":"","defaultflow":"false","action":"","state":"","mandatenotes":"false"},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-38272C15-118D-4D4F-80E0-DD3A3FEC8897"}],"bounds":{"lowerRight":{"x":174.15625,"y":178},"upperLeft":{"x":130.609375,"y":178}},"dockers":[{"x":15,"y":15},{"x":50,"y":40}],"target":{"resourceId":"sid-38272C15-118D-4D4F-80E0-DD3A3FEC8897"}},{"resourceId":"sid-0E4577E1-11E1-450D-A2B6-DBE242378F08","properties":{"overrideid":"","name":"Approver","usertaskassignment":{"assignment":{"type":"idm","idm":{"type":"user","assignee":{"email":"GENERATE_LETTER_APPROVER","firstName":"GENERATE_LETTER_APPROVER","fullName":"GENERATE_LETTER_APPROVER","id":"GENERATE_LETTER_APPROVER","roledesc":"Workflow Approver","$$hashKey":"object:965"}}}},"additionalforms":"","formkeydefinition":"","prioritydefinition":"Role Queue","baseactor":"","duedatedefinition":"","multiinstance_type":"None","isforcompensation":"false"},"stencil":{"id":"UserTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-E75E07AC-22E7-4F1C-B6E9-733C5C1A3E22"}],"bounds":{"lowerRight":{"x":490,"y":218},"upperLeft":{"x":390,"y":138}},"dockers":[]},{"resourceId":"sid-6D2A3EE4-19BA-44FF-93AB-717BFF16FC01","properties":{"overrideid":"","name":"","sequencefloworder":""},"stencil":{"id":"ExclusiveGateway"},"childShapes":[],"outgoing":[{"resourceId":"sid-90A1D39E-E70D-4EB1-BB50-DF5F8F43359D"},{"resourceId":"sid-79F17746-BC9F-45F8-A31F-CA3969C76736"},{"resourceId":"sid-4A389521-29A1-4967-8A99-23A3D1BA8CDE"}],"bounds":{"lowerRight":{"x":575,"y":198},"upperLeft":{"x":535,"y":158}},"dockers":[]},{"resourceId":"sid-22D15E29-D37A-4505-A48C-7A329DF13429","properties":{"overrideid":"","name":"Complete Process","servicetaskexpression":"doApprove","isforcompensation":"false","multiinstance_type":"None"},"stencil":{"id":"approveTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-5AABA17A-E718-463D-95FA-7B0E9E938247"}],"bounds":{"lowerRight":{"x":760,"y":218},"upperLeft":{"x":660,"y":138}},"dockers":[]},{"resourceId":"sid-5FF3A069-112E-49C0-9A73-07B73600334B","properties":{"overrideid":"","name":"Approved"},"stencil":{"id":"EndNoneEvent"},"childShapes":[],"outgoing":[],"bounds":{"lowerRight":{"x":833,"y":192},"upperLeft":{"x":805,"y":164}},"dockers":[]},{"resourceId":"sid-5AABA17A-E718-463D-95FA-7B0E9E938247","properties":{"overrideid":"","name":"","repruseaction":"false","conditionsequenceflow":"","defaultflow":"false","action":"","state":"","mandatenotes":"false"},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-5FF3A069-112E-49C0-9A73-07B73600334B"}],"bounds":{"lowerRight":{"x":804.375,"y":178},"upperLeft":{"x":760.390625,"y":178}},"dockers":[{"x":50,"y":40},{"x":14,"y":14}],"target":{"resourceId":"sid-5FF3A069-112E-49C0-9A73-07B73600334B"}},{"resourceId":"sid-0AD002F0-2C5A-4D9F-B0D2-7A03A8025FEB","properties":{"overrideid":"","name":"Cancel Process","servicetaskexpression":"doReject","isforcompensation":"false","multiinstance_type":"None"},"stencil":{"id":"rejectTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-9E25CBF1-5C3D-444E-B619-F8DF70F8710B"}],"bounds":{"lowerRight":{"x":605,"y":369},"upperLeft":{"x":505,"y":289}},"dockers":[]},{"resourceId":"sid-B8114559-3D1A-4A63-A65F-B62B0D0812CA","properties":{"overrideid":"","name":"Rejected"},"stencil":{"id":"EndNoneEvent"},"childShapes":[],"outgoing":[],"bounds":{"lowerRight":{"x":678,"y":343},"upperLeft":{"x":650,"y":315}},"dockers":[]},{"resourceId":"sid-9E25CBF1-5C3D-444E-B619-F8DF70F8710B","properties":{"overrideid":"","name":"","repruseaction":"false","conditionsequenceflow":"","defaultflow":"false","action":"","state":"","mandatenotes":"false"},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-B8114559-3D1A-4A63-A65F-B62B0D0812CA"}],"bounds":{"lowerRight":{"x":649.375,"y":329},"upperLeft":{"x":605.390625,"y":329}},"dockers":[{"x":50,"y":40},{"x":14,"y":14}],"target":{"resourceId":"sid-B8114559-3D1A-4A63-A65F-B62B0D0812CA"}},{"resourceId":"sid-E75E07AC-22E7-4F1C-B6E9-733C5C1A3E22","properties":{"overrideid":"","name":"","repruseaction":"false","conditionsequenceflow":"","defaultflow":"false","action":"","state":"","mandatenotes":"false"},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-6D2A3EE4-19BA-44FF-93AB-717BFF16FC01"}],"bounds":{"lowerRight":{"x":534.6484468700075,"y":178.4097335362338},"upperLeft":{"x":490.62889687999245,"y":178.2191727137662}},"dockers":[{"x":50,"y":40},{"x":20.5,"y":20.5}],"target":{"resourceId":"sid-6D2A3EE4-19BA-44FF-93AB-717BFF16FC01"}},{"resourceId":"sid-79F17746-BC9F-45F8-A31F-CA3969C76736","properties":{"overrideid":"","name":"Approve","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Approved'"}},"defaultflow":"false","action":"Approve","state":"Approved","mandatenotes":"false"},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-22D15E29-D37A-4505-A48C-7A329DF13429"}],"bounds":{"lowerRight":{"x":659.5117239866028,"y":178.43426377099223},"upperLeft":{"x":575.8124947633972,"y":178.16339247900777}},"dockers":[{"x":20.5,"y":20.5},{"x":50,"y":40}],"target":{"resourceId":"sid-22D15E29-D37A-4505-A48C-7A329DF13429"}},{"resourceId":"sid-751124CB-1CC1-40AF-B5DB-360706ED6035","properties":{"overrideid":"","name":"Cancel","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Cancelled'"}},"defaultflow":"false","action":"Cancel","state":"Cancelled","mandatenotes":true},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-0AD002F0-2C5A-4D9F-B0D2-7A03A8025FEB"}],"bounds":{"lowerRight":{"x":504.37109375,"y":329},"upperLeft":{"x":225,"y":218.51953125}},"dockers":[{"x":50,"y":40},{"x":225,"y":329},{"x":50,"y":40}],"target":{"resourceId":"sid-0AD002F0-2C5A-4D9F-B0D2-7A03A8025FEB"}},{"resourceId":"sid-4A389521-29A1-4967-8A99-23A3D1BA8CDE","properties":{"overrideid":"","name":"Reject","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Rejected'"}},"defaultflow":"false","action":"Reject","state":"Rejected","mandatenotes":true},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-0AD002F0-2C5A-4D9F-B0D2-7A03A8025FEB"}],"bounds":{"lowerRight":{"x":555.4341777591982,"y":288.0234430186572},"upperLeft":{"x":555.1361347408018,"y":198.3124944813428}},"dockers":[{"x":20.5,"y":20.5},{"x":50,"y":40}],"target":{"resourceId":"sid-0AD002F0-2C5A-4D9F-B0D2-7A03A8025FEB"}},{"resourceId":"sid-90A1D39E-E70D-4EB1-BB50-DF5F8F43359D","properties":{"overrideid":"","name":"Resubmit","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Resubmitted'"}},"defaultflow":"false","action":"Resubmit","state":"Resubmitted","mandatenotes":true},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-38272C15-118D-4D4F-80E0-DD3A3FEC8897"}],"bounds":{"lowerRight":{"x":555.5,"y":157.48046875},"upperLeft":{"x":225,"y":76}},"dockers":[{"x":20.5,"y":20.5},{"x":555.5,"y":76},{"x":225,"y":76},{"x":50,"y":40}],"target":{"resourceId":"sid-38272C15-118D-4D4F-80E0-DD3A3FEC8897"}},{"resourceId":"sid-F8AD09C4-9AD3-4E9F-9432-0B753ACDBFF3","properties":{"overrideid":"","name":"Submit","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Submitted'"}},"defaultflow":"false","action":"Submit","state":"Submitted","mandatenotes":false},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-0E4577E1-11E1-450D-A2B6-DBE242378F08"}],"bounds":{"lowerRight":{"x":389.44921875,"y":178},"upperLeft":{"x":275.55078125,"y":178}},"dockers":[{"x":50,"y":40},{"x":50,"y":40}],"target":{"resourceId":"sid-0E4577E1-11E1-450D-A2B6-DBE242378F08"}}],"bounds":{"lowerRight":{"x":1200,"y":1050},"upperLeft":{"x":0,"y":0}},"stencilset":{"url":"stencilsets/bpmn2.0/bpmn2.0.json","namespace":"http://b3mn.org/stencilset/bpmn2.0#"},"ssextensions":[]}]]></column>
			<column name="WORKFLOWXML" type="CLOB"><![CDATA[<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:activiti="http://activiti.org/bpmn" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI" typeLanguage="http://www.w3.org/2001/XMLSchema" expressionLanguage="http://www.w3.org/1999/XPath" targetNamespace="http://activiti.org/test"> <process id="GENERATE_LETTER" name="Generate Letter Workflow Process" isExecutable="true"> <documentation>Maker/Checker WorkFlow</documentation> <startEvent id="startEvent1" name="Start" /> <userTask id="sid-38272C15-118D-4D4F-80E0-DD3A3FEC8897" name="Maker" activiti:actor="GENERATE_LETTER_MAKER" activiti:assignmentLevel="Role Queue" /> <sequenceFlow id="sid-CB1DEE00-A9A1-4162-BD4A-CC3D4B6E7CC1" sourceRef="startEvent1" targetRef="sid-38272C15-118D-4D4F-80E0-DD3A3FEC8897" representsUserAction="false" mandateNotes="false" /> <userTask id="sid-0E4577E1-11E1-450D-A2B6-DBE242378F08" name="Approver" activiti:actor="GENERATE_LETTER_APPROVER" activiti:assignmentLevel="Role Queue" /> <exclusiveGateway id="sid-6D2A3EE4-19BA-44FF-93AB-717BFF16FC01" /> <serviceTask id="sid-22D15E29-D37A-4505-A48C-7A329DF13429" name="Complete Process" activiti:operation="doApprove" /> <endEvent id="sid-5FF3A069-112E-49C0-9A73-07B73600334B" name="Approved" /> <sequenceFlow id="sid-5AABA17A-E718-463D-95FA-7B0E9E938247" sourceRef="sid-22D15E29-D37A-4505-A48C-7A329DF13429" targetRef="sid-5FF3A069-112E-49C0-9A73-07B73600334B" representsUserAction="false" mandateNotes="false" /> <serviceTask id="sid-0AD002F0-2C5A-4D9F-B0D2-7A03A8025FEB" name="Cancel Process" activiti:operation="doReject" /> <endEvent id="sid-B8114559-3D1A-4A63-A65F-B62B0D0812CA" name="Rejected" /> <sequenceFlow id="sid-9E25CBF1-5C3D-444E-B619-F8DF70F8710B" sourceRef="sid-0AD002F0-2C5A-4D9F-B0D2-7A03A8025FEB" targetRef="sid-B8114559-3D1A-4A63-A65F-B62B0D0812CA" representsUserAction="false" mandateNotes="false" /> <sequenceFlow id="sid-E75E07AC-22E7-4F1C-B6E9-733C5C1A3E22" sourceRef="sid-0E4577E1-11E1-450D-A2B6-DBE242378F08" targetRef="sid-6D2A3EE4-19BA-44FF-93AB-717BFF16FC01" representsUserAction="false" mandateNotes="false" /> <sequenceFlow id="sid-79F17746-BC9F-45F8-A31F-CA3969C76736" name="Approve" sourceRef="sid-6D2A3EE4-19BA-44FF-93AB-717BFF16FC01" targetRef="sid-22D15E29-D37A-4505-A48C-7A329DF13429" action="Approve" state="Approved" representsUserAction="true" mandateNotes="false"> <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Approved'</conditionExpression> </sequenceFlow> <sequenceFlow id="sid-751124CB-1CC1-40AF-B5DB-360706ED6035" name="Cancel" sourceRef="sid-38272C15-118D-4D4F-80E0-DD3A3FEC8897" targetRef="sid-0AD002F0-2C5A-4D9F-B0D2-7A03A8025FEB" action="Cancel" state="Cancelled" representsUserAction="true" mandateNotes="true"> <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Cancelled'</conditionExpression> </sequenceFlow> <sequenceFlow id="sid-4A389521-29A1-4967-8A99-23A3D1BA8CDE" name="Reject" sourceRef="sid-6D2A3EE4-19BA-44FF-93AB-717BFF16FC01" targetRef="sid-0AD002F0-2C5A-4D9F-B0D2-7A03A8025FEB" action="Reject" state="Rejected" representsUserAction="true" mandateNotes="true"> <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Rejected'</conditionExpression> </sequenceFlow> <sequenceFlow id="sid-90A1D39E-E70D-4EB1-BB50-DF5F8F43359D" name="Resubmit" sourceRef="sid-6D2A3EE4-19BA-44FF-93AB-717BFF16FC01" targetRef="sid-38272C15-118D-4D4F-80E0-DD3A3FEC8897" action="Resubmit" state="Resubmitted" representsUserAction="true" mandateNotes="true"> <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Resubmitted'</conditionExpression> </sequenceFlow> <sequenceFlow id="sid-F8AD09C4-9AD3-4E9F-9432-0B753ACDBFF3" name="Submit" sourceRef="sid-38272C15-118D-4D4F-80E0-DD3A3FEC8897" targetRef="sid-0E4577E1-11E1-450D-A2B6-DBE242378F08" action="Submit" state="Submitted" representsUserAction="true" mandateNotes="false"> <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Submitted'</conditionExpression> </sequenceFlow> </process> <bpmndi:BPMNDiagram id="BPMNDiagram_GENERATE_LETTER"> <bpmndi:BPMNPlane bpmnElement="GENERATE_LETTER" id="BPMNPlane_GENERATE_LETTER"> <bpmndi:BPMNShape bpmnElement="startEvent1" id="BPMNShape_startEvent1"> <omgdc:Bounds height="30.0" width="30.0" x="100.0" y="163.0" /> </bpmndi:BPMNShape> <bpmndi:BPMNShape bpmnElement="sid-38272C15-118D-4D4F-80E0-DD3A3FEC8897" id="BPMNShape_sid-38272C15-118D-4D4F-80E0-DD3A3FEC8897"> <omgdc:Bounds height="80.0" width="100.0" x="175.0" y="138.0" /> </bpmndi:BPMNShape> <bpmndi:BPMNShape bpmnElement="sid-0E4577E1-11E1-450D-A2B6-DBE242378F08" id="BPMNShape_sid-0E4577E1-11E1-450D-A2B6-DBE242378F08"> <omgdc:Bounds height="80.0" width="100.0" x="390.0" y="138.0" /> </bpmndi:BPMNShape> <bpmndi:BPMNShape bpmnElement="sid-6D2A3EE4-19BA-44FF-93AB-717BFF16FC01" id="BPMNShape_sid-6D2A3EE4-19BA-44FF-93AB-717BFF16FC01"> <omgdc:Bounds height="40.0" width="40.0" x="535.0" y="158.0" /> </bpmndi:BPMNShape> <bpmndi:BPMNShape bpmnElement="sid-22D15E29-D37A-4505-A48C-7A329DF13429" id="BPMNShape_sid-22D15E29-D37A-4505-A48C-7A329DF13429"> <omgdc:Bounds height="80.0" width="100.0" x="660.0" y="138.0" /> </bpmndi:BPMNShape> <bpmndi:BPMNShape bpmnElement="sid-5FF3A069-112E-49C0-9A73-07B73600334B" id="BPMNShape_sid-5FF3A069-112E-49C0-9A73-07B73600334B"> <omgdc:Bounds height="28.0" width="28.0" x="805.0" y="164.0" /> </bpmndi:BPMNShape> <bpmndi:BPMNShape bpmnElement="sid-0AD002F0-2C5A-4D9F-B0D2-7A03A8025FEB" id="BPMNShape_sid-0AD002F0-2C5A-4D9F-B0D2-7A03A8025FEB"> <omgdc:Bounds height="80.0" width="100.0" x="505.0" y="289.0" /> </bpmndi:BPMNShape> <bpmndi:BPMNShape bpmnElement="sid-B8114559-3D1A-4A63-A65F-B62B0D0812CA" id="BPMNShape_sid-B8114559-3D1A-4A63-A65F-B62B0D0812CA"> <omgdc:Bounds height="28.0" width="28.0" x="650.0" y="315.0" /> </bpmndi:BPMNShape> <bpmndi:BPMNEdge bpmnElement="sid-F8AD09C4-9AD3-4E9F-9432-0B753ACDBFF3" id="BPMNEdge_sid-F8AD09C4-9AD3-4E9F-9432-0B753ACDBFF3"> <omgdi:waypoint x="275.0" y="178.0" /> <omgdi:waypoint x="390.0" y="178.0" /> </bpmndi:BPMNEdge> <bpmndi:BPMNEdge bpmnElement="sid-90A1D39E-E70D-4EB1-BB50-DF5F8F43359D" id="BPMNEdge_sid-90A1D39E-E70D-4EB1-BB50-DF5F8F43359D"> <omgdi:waypoint x="555.5" y="158.5" /> <omgdi:waypoint x="555.5" y="76.0" /> <omgdi:waypoint x="225.0" y="76.0" /> <omgdi:waypoint x="225.0" y="138.0" /> </bpmndi:BPMNEdge> <bpmndi:BPMNEdge bpmnElement="sid-79F17746-BC9F-45F8-A31F-CA3969C76736" id="BPMNEdge_sid-79F17746-BC9F-45F8-A31F-CA3969C76736"> <omgdi:waypoint x="574.5616883116883" y="178.4383116883117" /> <omgdi:waypoint x="660.0" y="178.16181229773463" /> </bpmndi:BPMNEdge> <bpmndi:BPMNEdge bpmnElement="sid-5AABA17A-E718-463D-95FA-7B0E9E938247" id="BPMNEdge_sid-5AABA17A-E718-463D-95FA-7B0E9E938247"> <omgdi:waypoint x="760.0" y="178.0" /> <omgdi:waypoint x="805.0" y="178.0" /> </bpmndi:BPMNEdge> <bpmndi:BPMNEdge bpmnElement="sid-CB1DEE00-A9A1-4162-BD4A-CC3D4B6E7CC1" id="BPMNEdge_sid-CB1DEE00-A9A1-4162-BD4A-CC3D4B6E7CC1"> <omgdi:waypoint x="130.0" y="178.0" /> <omgdi:waypoint x="175.0" y="178.0" /> </bpmndi:BPMNEdge> <bpmndi:BPMNEdge bpmnElement="sid-751124CB-1CC1-40AF-B5DB-360706ED6035" id="BPMNEdge_sid-751124CB-1CC1-40AF-B5DB-360706ED6035"> <omgdi:waypoint x="225.0" y="218.0" /> <omgdi:waypoint x="225.0" y="329.0" /> <omgdi:waypoint x="505.0" y="329.0" /> </bpmndi:BPMNEdge> <bpmndi:BPMNEdge bpmnElement="sid-4A389521-29A1-4967-8A99-23A3D1BA8CDE" id="BPMNEdge_sid-4A389521-29A1-4967-8A99-23A3D1BA8CDE"> <omgdi:waypoint x="555.4366666666667" y="197.56333333333333" /> <omgdi:waypoint x="555.1328903654485" y="289.0" /> </bpmndi:BPMNEdge> <bpmndi:BPMNEdge bpmnElement="sid-9E25CBF1-5C3D-444E-B619-F8DF70F8710B" id="BPMNEdge_sid-9E25CBF1-5C3D-444E-B619-F8DF70F8710B"> <omgdi:waypoint x="605.0" y="329.0" /> <omgdi:waypoint x="650.0" y="329.0" /> </bpmndi:BPMNEdge> <bpmndi:BPMNEdge bpmnElement="sid-E75E07AC-22E7-4F1C-B6E9-733C5C1A3E22" id="BPMNEdge_sid-E75E07AC-22E7-4F1C-B6E9-733C5C1A3E22"> <omgdi:waypoint x="490.0" y="178.2164502164502" /> <omgdi:waypoint x="535.4130434782609" y="178.41304347826087" /> </bpmndi:BPMNEdge> </bpmndi:BPMNPlane> </bpmndi:BPMNDiagram> </definitions>]]></column>
			<where>workflowtype='GENERATE_LETTER'</where>
		</update>
	</changeSet>

	<changeSet id="ST#15956.96" author="nagavamsi.p" dbms="oracle">
		<createSequence sequenceName="SEQ_LETTER_GENERATION_QUEUE" minValue="1" maxValue="9223372036854775807"
			incrementBy="1" startValue="1" ordered="true" />
	</changeSet>

	<changeSet id="ST#15956.96" author="nagavamsi.p" dbms="postgresql,mssql">
		<createSequence sequenceName="SEQ_LETTER_GENERATION_QUEUE" minValue="1" maxValue="9223372036854775807"
			incrementBy="1" startValue="1" />
	</changeSet>

	<changeSet id="ST#15956.97" author="nagavamsi.p">
		<createTable tableName="LETTER_GENERATION_QUEUE">
			<column name="ID" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="LetterID" type="bigint" />
			<column name="ThreadId" type="int" />
			<column name="StartTime" type="datetime" />
			<column name="EndTime" type="datetime" />
			<column name="Progress" type="int" />
			<column name="ErrorLog" type="varchar(2000)" />
			<column name="ResetCounterId" type="bigint" />
			<column name="PickUpFlag" type="boolean">
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>

	<changeSet id="ST#15956.98" author="nagavamsi.p" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE LETTER_GENERATION_QUEUE ADD CONSTRAINT DF_L_G_Q_THREADID 		DEFAULT 0 FOR THREADID;
				ALTER TABLE LETTER_GENERATION_QUEUE ADD CONSTRAINT DF_L_G_Q_PROGRESS 		DEFAULT 0 FOR PROGRESS;
				ALTER TABLE LETTER_GENERATION_QUEUE ADD CONSTRAINT DF_L_G_Q_RESETCOUNTERID	DEFAULT 0 FOR RESETCOUNTERID;
				ALTER TABLE LETTER_GENERATION_QUEUE ADD CONSTRAINT DF_L_G_Q_PICKUPFLAG 		DEFAULT 0 FOR PICKUPFLAG;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#15956.99" author="nagavamsi.p" dbms="postgresql, oracle">
		<addDefaultValue columnName="THREADID" tableName="LETTER_GENERATION_QUEUE" defaultValue="0" />
		<addDefaultValue columnName="PROGRESS" tableName="LETTER_GENERATION_QUEUE" defaultValue="0" />
		<addDefaultValue columnName="RESETCOUNTERID" tableName="LETTER_GENERATION_QUEUE" defaultValue="0" />
		<addDefaultValue columnName="PICKUPFLAG" tableName="LETTER_GENERATION_QUEUE" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#15956.100" author="nagavamsi.p">
		<addPrimaryKey tableName="LETTER_GENERATION_QUEUE" columnNames="ID"
			constraintName="PK_LG_GENERATION_QUEUE" />
	</changeSet>

	<changeSet id="ST#15956.101" author="nagavamsi.p">
		<createIndex tableName="LETTER_GENERATION_QUEUE" indexName="IDX_L_G_Q_LETTERID">
			<column name="LetterID" type="bigint" />
		</createIndex>
	</changeSet>
	
	<changeSet id="ST#15956.102" author="nagavamsi.p">
		<sql>
			<![CDATA[	
				DELETE FROM SMTPARAMETERS WHERE SYSPARMCODE = 'LETTER_GENERATION_THREAD_COUNT';
				INSERT INTO SMTPARAMETERS (SYSPARMCODE, SYSPARMDESC, SYSPARMTYPE, SYSPARMMAINT, SYSPARMVALUE, SYSPARMLENGTH, SYSPARMDEC, SYSPARMLIST, SYSPARMVALDMOD, SYSPARMDESCRIPTION, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ('LETTER_GENERATION_THREAD_COUNT',          'LETTER GENERATION THREAD COUNT',                       'int',   '1','1', 2, 0, NULL, NULL, '',                                                                    1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#15956.103" author="nagavamsi.p">
		<sql>
			<![CDATA[	
				DELETE FROM DATA_ENGINE_CONFIG where Name = 'CSD_STORAGE';
				INSERT INTO DATA_ENGINE_CONFIG  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG),'CSD_STORAGE', 'Loan Letters Storage', 5, NULL, NULL, NULL, NULL, 0, 1, NULL, NULL,NULL, 'A', NULL, 'CSD_STORAGE', NULL, 0, current_timestamp, NULL, NULL, '0', NULL, 1, 1, 0);
				INSERT INTO DATA_ENGINE_EVENT_PROPERTIES (CONFIG_ID, STORAGE_TYPE, BUCKET_NAME, ACCESS_KEY, SECRET_KEY, HOST_NAME,PORT, ID) VALUES ((SELECT ID from DATA_ENGINE_CONFIG WHERE NAME='CSD_STORAGE'), 'SFTP', '/sftpuser/PLF/HDFC/QC', 'sftpuser', 'Zxcvbn$@123','sftpserver','22',(SELECT MAX(ID)+1 FROM DATA_ENGINE_EVENT_PROPERTIES));
				
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="PSD#227320.1" author="sainaveen.y">
		<sql>
            <![CDATA[
              	DELETE FROM RBFIELDDETAILS WHERE  RBMODULE= 'FEEPERC' and RBEVENT = 'EARLYSTL' and RBFLDNAME = 'ClosureType';
              	
              	INSERT INTO RBFIELDDETAILS (RBMODULE, RBEVENT, RBFLDNAME, RBFLDDESC, RBFLDTYPE, RBFLDLEN, RBFORCALFLDS, RBFORBLDFLDS, RBFLDTABLENAME, RBSTFLDS, MODULECODE) VALUES ('FEEPERC', 'EARLYSTL', 'ClosureType', 'ClosureType', 'nvarchar',  12,  '0', '1', 'Closure_Types', 'static,global,dbvalue', 'ClosureType');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1561.88" author="saikrishna.b">
		<sql>
            <![CDATA[
              	DELETE FROM RBFIELDDETAILS WHERE  RBMODULE= 'FEES' and RBEVENT = 'NOCLTR';
              	
				INSERT INTO RBFIELDDETAILS (RBMODULE, RBEVENT, RBFLDNAME, RBFLDDESC, RBFLDTYPE, RBFLDLEN, RBFORCALFLDS, RBFORBLDFLDS, RBFLDTABLENAME, RBSTFLDS, MODULECODE) VALUES ('FEES', 'NOCLTR', 'CustCtgCode',						'Customer Category Code', 													'nvarchar',  8, 	'0', '1', 'CustomerCategory', 	'dbvalue', 				'CustomerCategory');
				INSERT INTO RBFIELDDETAILS (RBMODULE, RBEVENT, RBFLDNAME, RBFLDDESC, RBFLDTYPE, RBFLDLEN, RBFORCALFLDS, RBFORBLDFLDS, RBFLDTABLENAME, RBSTFLDS, MODULECODE) VALUES ('FEES', 'NOCLTR', 'CustTypeCode', 						'Customer Type', 															'nvarchar',  8, 	'0', '1', 'CustomerType', 		'dbvalue', 				'CustomerType');
				INSERT INTO RBFIELDDETAILS (RBMODULE, RBEVENT, RBFLDNAME, RBFLDDESC, RBFLDTYPE, RBFLDLEN, RBFORCALFLDS, RBFORBLDFLDS, RBFLDTABLENAME, RBSTFLDS, MODULECODE) VALUES ('FEES', 'NOCLTR', 'custGenderCode', 					'Customer Gender', 															'nvarchar',  8, 	'0', '1', 'Gender', 			'dbvalue', 				'Gender');
				INSERT INTO RBFIELDDETAILS (RBMODULE, RBEVENT, RBFLDNAME, RBFLDDESC, RBFLDTYPE, RBFLDLEN, RBFORCALFLDS, RBFORBLDFLDS, RBFLDTABLENAME, RBSTFLDS, MODULECODE) VALUES ('FEES', 'NOCLTR', 'LoanClosureAge',  					'No of Days between Closure date and Application Date', 					'int', 		 10,  	'0', '1', '', 					'static,global,dbvalue', '');
				INSERT INTO RBFIELDDETAILS (RBMODULE, RBEVENT, RBFLDNAME, RBFLDDESC, RBFLDTYPE, RBFLDLEN, RBFORCALFLDS, RBFORBLDFLDS, RBFLDTABLENAME, RBSTFLDS, MODULECODE) VALUES ('FEES', 'NOCLTR', 'LoanCancellationAge', 				'No of Days between Cancellation Date and Application Date', 				'int', 		 10, 	'0', '1', '',   				'static,global,dbvalue', '');
				INSERT INTO RBFIELDDETAILS (RBMODULE, RBEVENT, RBFLDNAME, RBFLDDESC, RBFLDTYPE, RBFLDLEN, RBFORCALFLDS, RBFORBLDFLDS, RBFLDTABLENAME, RBSTFLDS, MODULECODE) VALUES ('FEES', 'NOCLTR', 'ClosureType',						'Closure Type', 															'nvarchar',  8, 	'0', '1', '', 					'static', 				 '');
				INSERT INTO RBFIELDDETAILS (RBMODULE, RBEVENT, RBFLDNAME, RBFLDDESC, RBFLDTYPE, RBFLDLEN, RBFORCALFLDS, RBFORBLDFLDS, RBFLDTABLENAME, RBSTFLDS, MODULECODE) VALUES ('FEES', 'NOCLTR', 'SequenceNo', 						'No of time same letter type is being issued for the same loan', 			'int', 		 10,    '0', '1', '', 					'static', 				 '');
				INSERT INTO RBFIELDDETAILS (RBMODULE, RBEVENT, RBFLDNAME, RBFLDDESC, RBFLDTYPE, RBFLDLEN, RBFORCALFLDS, RBFORBLDFLDS, RBFLDTABLENAME, RBSTFLDS, MODULECODE) VALUES ('FEES', 'NOCLTR', 'PrvLetterCourierDeliveryStatus',		'Status of previous letters courier status if shared through courier', 	'nvarchar',  8,     '0', '1', '',           		'static', 				 '');    
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1561.89" author="saikrishna.b">
		<sql>
            <![CDATA[
              	DELETE FROM RBFIELDDETAILS WHERE  RBMODULE= 'FEES' and RBEVENT = 'CANCLLTR';

				INSERT INTO RBFIELDDETAILS (RBMODULE, RBEVENT, RBFLDNAME, RBFLDDESC, RBFLDTYPE, RBFLDLEN, RBFORCALFLDS, RBFORBLDFLDS, RBFLDTABLENAME, RBSTFLDS, MODULECODE) VALUES ('FEES', 'CANCLLTR', 'CustCtgCode',						'Customer Category Code', 													'nvarchar',  8, 	'0', '1', 'CustomerCategory', 	'dbvalue', 				'CustomerCategory');
				INSERT INTO RBFIELDDETAILS (RBMODULE, RBEVENT, RBFLDNAME, RBFLDDESC, RBFLDTYPE, RBFLDLEN, RBFORCALFLDS, RBFORBLDFLDS, RBFLDTABLENAME, RBSTFLDS, MODULECODE) VALUES ('FEES', 'CANCLLTR', 'CustTypeCode', 					'Customer Type', 															'nvarchar',  8, 	'0', '1', 'CustomerType', 		'dbvalue', 				'CustomerType');
				INSERT INTO RBFIELDDETAILS (RBMODULE, RBEVENT, RBFLDNAME, RBFLDDESC, RBFLDTYPE, RBFLDLEN, RBFORCALFLDS, RBFORBLDFLDS, RBFLDTABLENAME, RBSTFLDS, MODULECODE) VALUES ('FEES', 'CANCLLTR', 'custGenderCode', 					'Customer Gender', 															'nvarchar',  8, 	'0', '1', 'Gender', 			'dbvalue', 				'Gender');
				INSERT INTO RBFIELDDETAILS (RBMODULE, RBEVENT, RBFLDNAME, RBFLDDESC, RBFLDTYPE, RBFLDLEN, RBFORCALFLDS, RBFORBLDFLDS, RBFLDTABLENAME, RBSTFLDS, MODULECODE) VALUES ('FEES', 'CANCLLTR', 'LoanClosureAge',  					'No of Days between Closure date and Application Date', 					'int', 		 10,  	'0', '1', '', 					'static,global,dbvalue', '');
				INSERT INTO RBFIELDDETAILS (RBMODULE, RBEVENT, RBFLDNAME, RBFLDDESC, RBFLDTYPE, RBFLDLEN, RBFORCALFLDS, RBFORBLDFLDS, RBFLDTABLENAME, RBSTFLDS, MODULECODE) VALUES ('FEES', 'CANCLLTR', 'LoanCancellationAge', 				'No of Days between Cancellation Date and Application Date', 				'int', 		 10, 	'0', '1', '',   				'static,global,dbvalue', '');
				INSERT INTO RBFIELDDETAILS (RBMODULE, RBEVENT, RBFLDNAME, RBFLDDESC, RBFLDTYPE, RBFLDLEN, RBFORCALFLDS, RBFORBLDFLDS, RBFLDTABLENAME, RBSTFLDS, MODULECODE) VALUES ('FEES', 'CANCLLTR', 'ClosureType',						'Closure Type', 															'nvarchar',  8, 	'0', '1', '', 					'static', 				 '');
				INSERT INTO RBFIELDDETAILS (RBMODULE, RBEVENT, RBFLDNAME, RBFLDDESC, RBFLDTYPE, RBFLDLEN, RBFORCALFLDS, RBFORBLDFLDS, RBFLDTABLENAME, RBSTFLDS, MODULECODE) VALUES ('FEES', 'CANCLLTR', 'SequenceNo', 						'No of time same letter type is being issued for the same loan', 			'int', 		 10,    '0', '1', '', 					'static', 				 '');
				INSERT INTO RBFIELDDETAILS (RBMODULE, RBEVENT, RBFLDNAME, RBFLDDESC, RBFLDTYPE, RBFLDLEN, RBFORCALFLDS, RBFORBLDFLDS, RBFLDTABLENAME, RBSTFLDS, MODULECODE) VALUES ('FEES', 'CANCLLTR', 'PrvLetterCourierDeliveryStatus',	'Status of previous letters courier status if shared through courier', 	'nvarchar',  8,     '0', '1', '',           		'static', 				 '');    
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#1561.90" author="saikrishna.b">
		<sql>
            <![CDATA[
              	DELETE FROM RBFIELDDETAILS WHERE  RBMODULE = 'FEES' and RBEVENT = 'CLOSELTR';

				INSERT INTO RBFIELDDETAILS (RBMODULE, RBEVENT, RBFLDNAME, RBFLDDESC, RBFLDTYPE, RBFLDLEN, RBFORCALFLDS, RBFORBLDFLDS, RBFLDTABLENAME, RBSTFLDS, MODULECODE) VALUES ('FEES', 'CLOSELTR', 'CustCtgCode',						'Customer Category Code', 													'nvarchar',  8, 	'0', '1', 'CustomerCategory', 	'dbvalue', 				'CustomerCategory');
				INSERT INTO RBFIELDDETAILS (RBMODULE, RBEVENT, RBFLDNAME, RBFLDDESC, RBFLDTYPE, RBFLDLEN, RBFORCALFLDS, RBFORBLDFLDS, RBFLDTABLENAME, RBSTFLDS, MODULECODE) VALUES ('FEES', 'CLOSELTR', 'CustTypeCode', 					'Customer Type', 															'nvarchar',  8, 	'0', '1', 'CustomerType', 		'dbvalue', 				'CustomerType');
				INSERT INTO RBFIELDDETAILS (RBMODULE, RBEVENT, RBFLDNAME, RBFLDDESC, RBFLDTYPE, RBFLDLEN, RBFORCALFLDS, RBFORBLDFLDS, RBFLDTABLENAME, RBSTFLDS, MODULECODE) VALUES ('FEES', 'CLOSELTR', 'custGenderCode', 					'Customer Gender', 															'nvarchar',  8, 	'0', '1', 'Gender', 			'dbvalue', 				'Gender');
				INSERT INTO RBFIELDDETAILS (RBMODULE, RBEVENT, RBFLDNAME, RBFLDDESC, RBFLDTYPE, RBFLDLEN, RBFORCALFLDS, RBFORBLDFLDS, RBFLDTABLENAME, RBSTFLDS, MODULECODE) VALUES ('FEES', 'CLOSELTR', 'LoanClosureAge',  					'No of Days between Closure date and Application Date', 					'int', 		 10,  	'0', '1', '', 					'static,global,dbvalue', '');
				INSERT INTO RBFIELDDETAILS (RBMODULE, RBEVENT, RBFLDNAME, RBFLDDESC, RBFLDTYPE, RBFLDLEN, RBFORCALFLDS, RBFORBLDFLDS, RBFLDTABLENAME, RBSTFLDS, MODULECODE) VALUES ('FEES', 'CLOSELTR', 'LoanCancellationAge', 				'No of Days between Cancellation Date and Application Date', 				'int', 		 10, 	'0', '1', '',   				'static,global,dbvalue', '');
				INSERT INTO RBFIELDDETAILS (RBMODULE, RBEVENT, RBFLDNAME, RBFLDDESC, RBFLDTYPE, RBFLDLEN, RBFORCALFLDS, RBFORBLDFLDS, RBFLDTABLENAME, RBSTFLDS, MODULECODE) VALUES ('FEES', 'CLOSELTR', 'ClosureType',						'Closure Type', 															'nvarchar',  8, 	'0', '1', '', 					'static', 				 '');
				INSERT INTO RBFIELDDETAILS (RBMODULE, RBEVENT, RBFLDNAME, RBFLDDESC, RBFLDTYPE, RBFLDLEN, RBFORCALFLDS, RBFORBLDFLDS, RBFLDTABLENAME, RBSTFLDS, MODULECODE) VALUES ('FEES', 'CLOSELTR', 'SequenceNo', 						'No of time same letter type is being issued for the same loan', 			'int', 		 10,    '0', '1', '', 					'static', 				 '');
				INSERT INTO RBFIELDDETAILS (RBMODULE, RBEVENT, RBFLDNAME, RBFLDDESC, RBFLDTYPE, RBFLDLEN, RBFORCALFLDS, RBFORBLDFLDS, RBFLDTABLENAME, RBSTFLDS, MODULECODE) VALUES ('FEES', 'CLOSELTR', 'PrvLetterCourierDeliveryStatus',	'Status of previous letters courier status if shared through courier', 	'nvarchar',  8,     '0', '1', '',           		'static', 				 '');    
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="15" author="saikrishna.b">
		<sql>
		 	<![CDATA[ 
		 	     DELETE FROM JOB_DETAILS WHERE JOBKEY = 'HOLD_MARKING_JOB';
		 	
		 	     INSERT INTO JOB_DETAILS (ID, JOBKEY, DESCRIPTION, JOBTRIGGER, CRON_EXPRESSION, JOBMODE, STATUS, ENABLED, FAILURE_NOTIFICATION_REQ, HOST_NAME, PORT, JMX_PORT, SMTP_SERVER, NOTIFY_EMAILS, EXECUTION_LOG_REQ, EXECUTION_RETENTION_DAYS, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, MONITORING_REQ) VALUES ((SELECT MAX(ID)+1 FROM JOB_DETAILS), 'HOLD_MARKING_JOB', 'HOLD MARKING JOB',  'HOLD_MARKING_JOB_TRIGGER',   '0 0/2 * 1/1 * ? *', 1, 0, 1, 0, NULL, NULL, 0, NULL, NULL, 1, 1, 0, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 1);
	           ]]>
		</sql>
	</changeSet>
	
</databaseChangeLog> 