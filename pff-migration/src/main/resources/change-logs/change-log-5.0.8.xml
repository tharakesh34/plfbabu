<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

	<property name="add.schema" value="dbo." dbms="mssql" />
	<property name="add.schema" value="" dbms="oracle" />
	<property name="add.schema" value="" dbms="postgresql" />
	<property name="call.substr" value="substring" dbms="mssql" />
	<property name="call.substr" value="substr" dbms="oracle" />
	<property name="call.substr" value="substring" dbms="postgresql" />
	<property name="call.auditdb" value="PLFAVANSEQC.." dbms="mssql" />
	<property name="call.auditdb" value=" " dbms="oracle" />
	<property name="call.concatenate" value="+" dbms="mssql" />
	<property name="call.concatenate" value="||" dbms="oracle" />
	<property name="call.concatenate" value="||" dbms="postgresql" />
	<property name="call.collength" value="LEN" dbms="mssql" />
	<property name="call.collength" value="LENGTH" dbms="oracle" />
	<property name="call.collength" value="LENGTH" dbms="postgresql" />
	<property name="call.date" value="getdate()" dbms="mssql" />
	<property name="call.date" value="sysdate" dbms="oracle" />
	<property name="call.date" value="now()" dbms="postgresql" />

	<changeSet id="pre_run_for_pgp" author="Adarsh" runAlways="true" dbms="postgresql">
		<sql>
			Set search_path = plf,public,pg_catalog;
		</sql>
	</changeSet>

	<changeSet id="01" author="satyanarayana.g">
		<addColumn tableName="RMTFinanceTypes">
			<column name="AllowRevolving" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="02" author="satyanarayana.g">
		<addColumn tableName="RMTFinanceTypes_temp">
			<column name="AllowRevolving" type="boolean" />
		</addColumn>
	</changeSet>
	<changeSet id="03" author="satyanarayana.g">
		<sql>
			<![CDATA[
				UPDATE RMTFinanceTypes Set AllowRevolving = 0;
				UPDATE RMTFinanceTypes_Temp Set AllowRevolving = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="04" author="satyanarayana.g" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE RMTFINANCETYPES ADD CONSTRAINT DF_RMTFINANCETYPES_ALWRG DEFAULT 0 FOR ALLOWREVOLVING;
				ALTER TABLE RMTFINANCETYPES_TEMP ADD CONSTRAINT DF_RMTFINANCETYPES_TEMP_ALWRG DEFAULT 0 FOR ALLOWREVOLVING;
			]]>
		</sql>
	</changeSet>

	<changeSet id="05" author="satyanarayana.g" dbms="postgresql, oracle">
		<addDefaultValue columnName="AllowRevolving" tableName="RMTFinanceTypes" defaultValue="0" />
		<addDefaultValue columnName="AllowRevolving" tableName="RMTFinanceTypes_Temp" defaultValue="0" />
	</changeSet>

	<changeSet id="06_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_aview');
					
			]]>
		</sql>
	</changeSet>

	<changeSet id="07" author="satyanarayana.g">
		<createView viewName="RMTFINANCETYPES_AVIEW" replaceIfExists="true">
			SELECT T1.FINTYPE,
					T1.FINCATEGORY,
					T1.FINTYPEDESC,
					T1.FINCCY,
					T1.FINDAYSCALTYPE,
					T1.FINACTYPE,
					T1.FINCONTINGENTACTYPE,
					T1.FINISGENREF,
					T1.FINMAXAMOUNT,
					T1.FINMINAMOUNT,
					T1.FINISOPENNEWFINAC,
					T1.FINDFTSTMTFRQ,
					T1.FINISALWMD,
					T1.FINSCHDMTHD,
					T1.FINISALWGRACE,
					T1.FINHISTRETENSION,
					T1.EQUALREPAYMENT,
					T1.FINRATETYPE,
					T1.FINBASERATE,
					T1.FINSPLRATE,
					T1.FININTRATE,
					T1.FINMINRATE,
					T1.FINMAXRATE,
					T1.FINDFTINTFRQ,
					T1.FINISINTCPZ,
					T1.FINCPZFRQ,
					T1.FINISRVWALW,
					T1.FINRVWFRQ,
					T1.FINGRCRATETYPE,
					T1.FINGRCBASERATE,
					T1.FINGRCSPLRATE,
					T1.FINGRCINTRATE,
					T1.FINGRCMINRATE,
					T1.FINGRCMAXRATE,
					T1.FINGRCDFTINTFRQ,
					T1.FINGRCISINTCPZ,
					T1.FINGRCCPZFRQ,
					T1.FINGRCISRVWALW,
					T1.FINGRCRVWFRQ,
					T1.FINMINTERM,
					T1.FINMAXTERM,
					T1.FINDFTTERMS,
					T1.FINRPYFRQ,
					T1.FINREPAYMETHOD,
					T1.FINISALWPARTIALRPY,
					T1.FINISALWDIFFERMENT,
					T1.FINMAXDIFFERMENT,
					T1.FINISALWEARLYRPY,
					T1.FINISALWEARLYSETTLE,
					T1.FINODRPYTRIES,
					T1.FINEARLYPAYRULE,
					T1.FINEARLYSETTLERULE,
					T1.FINDEPOSITRESTRICTEDTO,
					T1.FINAEBUYORINCEPTION,
					T1.FINAESELLORMATURITY,
					T1.FINISACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.STEPFINANCE,
					T1.STEPPINGMANDATORY,
					T1.ALWMANUALSTEPS,
					T1.ALWDSTEPPOLICIES,
					T1.DFTSTEPPOLICY,
					T4.ACTYPEDESC LOVDESCFINCONTINGENTACTYPENAME,
					T5.ACTYPEDESC LOVDESCFINACTYPENAME,
					T1.FINISDWPAYREQUIRED,
					T1.FINRVWRATEAPPLFOR,
					T1.FINALWRATECHANGEANYDATE,
					T1.FINISINTCPZATGRCEND,
					T1.FINELGRULECODE,
					T1.LIMITELGRULECODE,
					T1.FINSCHCALCODEONRVW,
					T1.ALWPLANDEFERMENT,
					T1.PLANDEFERCOUNT,
					T1.FINASSETTYPE,
					T1.PFTPAYACTYPE,
					T1.FINISOPENPFTPAYACC,
					T31.ACTYPEDESC LOVDESCPFTPAYACTYPENAME,
					T1.FINISALWGRCREPAY,
					T1.FINGRCSCHDMTHD,
					T1.FINGRCMARGIN,
					T1.FINMARGIN,
					T1.FINSCHEDULEON,
					T1.FINGRCSCHEDULEON,
					T1.FINCOMMITMENTREQ,
					T1.FINCOLLATERALREQ,
					T1.FINDEPRECIATIONREQ,
					T1.FINDEPRECIATIONFRQ,
					T1.FINBANKCONTINGENTACTYPE,
					T1.FINPROVISIONACTYPE,
					T38.ACTYPEDESC LOVDESCFINBANKCONTACTYPENAME,
					T39.ACTYPEDESC LOVDESCFINPROVISIONACTYPENAME,
					T1.ALLOWRIAINVESTMENT,
					T1.OVERRIDELIMIT,
					T1.LIMITREQUIRED,
					T1.FINCOMMITMENTOVRRIDE,
					T1.FINCOLLATERALOVRRIDE,
					T1.FINPFTUNCHANGED,
					T1.APPLYODPENALTY,
					T1.ODINCGRCDAYS,
					T1.ODCHARGETYPE,
					T1.ODGRACEDAYS,
					T1.ODCHARGECALON,
					T1.ODCHARGEAMTORPERC,
					T1.ODALLOWWAIVER,
					T1.ODMAXWAIVERPERC,
					T1.FINDIVISION,
					T48.DIVISIONCODEDESC LOVDESCFINDIVISIONNAME,
					T48.ENTITYCODE LOVDESCENTITYCODE,
					T1.FINSUSPACTYPE,
					T49.ACTYPEDESC LOVDESCFINSUSPACTYPENAME,
					T1.PRODUCT,
					T1.STARTDATE,
					T1.ENDDATE,
					T1.ALLOWDOWNPAYPGM,
					T1.REMARKS,
					T1.ALWEARLYPAYMETHODS,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.ALWADVANCERENT,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.ROLLOVERFINANCE,
					T1.ROLLOVERFRQ,
					T1.DOWNPAYRULE,
					T59.RULECODE DOWNPAYRULECODE,
					T59.RULECODEDESC DOWNPAYRULEDESC,
					T1.FINSUSPTRIGGER,
					T1.FINSUSPREMARKS,
					T1.ALWMULTIPARTYDISB,
					T1.COLLATERALTYPE,
					T1.TDSAPPLICABLE,
					T1.MANUALSCHEDULE,
					T1.APPLYGRCPRICING,
					T1.GRCPRICINGMETHOD,
					T1.APPLYRPYPRICING,
					T1.RPYPRICINGMETHOD,
					T1.RPYHIERARCHY,
					T67.RULECODE GRCPRICINGMETHODDESC,
					T68.RULECODE RPYPRICINGMETHODDESC,
					T1.DROPLINEOD,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.FINREPAYPFTONFRQ,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PFTDUESCHON,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.UNPLANEMIHLOCKPERIOD,
					T1.UNPLANEMICPZ,
					T1.REAGECPZ,
					T1.FDDLOCKPERIOD,
					T1.ALWDRPYMETHODS,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.ROUNDINGMODE,
					T1.ROUNDINGTARGET,
					T1.FREQUENCYDAYS,
					T1.QUICKDISB,
					T1.ALWREAGE,
					T1.ALWUNPLANEMIHOLIDAY,
					T1.ALWMAXDISBCHECKREQ,
					T1.FINTYPEDESC LOVDESCPROMOFINTYPEDESC,
					T1.PROFITCENTERID,
					T69.PROFITCENTERCODE,
					T69.PROFITCENTERDESC,
					T1.PRODUCTCATEGORY,
					T2.PRODUCTDESC FINCATEGORYDESC,
					T1.DEVELOPERFINANCE,
					T1.COSTOFFUNDS,
					T1.CHEQUECAPTUREREQ,
					T1.FINLTVCHECK,
					T1.PARTIALLYSECURED,
					T1.ALWADVEMI,
					T1.ADVEMIMINTERMS,
					T1.ADVEMIMAXTERMS,
					T1.ADVEMIDFTTERMS,
					T1.ADVEMISCHDMTHD,
					T1.BPIPFTDAYSBASIS,
					T1.ELIGIBILITYMETHODS,
					T1.ALWHYBRIDRATE,
					T1.FIXEDRATETENOR,
					T1.ODMINCAPAMOUNT,
					T1.ODRULECODE,
					T1.ALWZEROINTACC,
					T1.AUTOREJECTIONDAYS,
					T1.TAXNOMAND,
					T1.PUTCALLREQUIRED,
					T1.GRCADVINTERSETREQ,
					T1.GRCADVTYPE,
					T1.GRCADVMINTERMS,
					T1.GRCADVMAXTERMS,
					T1.GRCADVDEFAULTTERMS,
					T1.ADVINTERSETREQ,
					T1.ADVTYPE,
					T1.ADVMINTERMS,
					T1.ADVMAXTERMS,
					T1.ADVDEFAULTTERMS,
					T1.ADVSTAGE,
					T1.DSFREQ,
					T1.CASHCOLLATERALREQ,
					T1.TDSALLOWTOMODIFY,
					T1.TDSAPPLICABLETO,
					T1.ALWVAN,
					T1.VANALLOCATIONMETHOD,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING
					FROM RMTFINANCETYPES T1
					LEFT JOIN BMTPRODUCT T2 ON T1.FINCATEGORY = T2.PRODUCTCODE
					LEFT JOIN RMTACCOUNTTYPES T4 ON T1.FINCONTINGENTACTYPE = T4.ACTYPE
					LEFT JOIN RMTACCOUNTTYPES T38 ON T1.FINBANKCONTINGENTACTYPE = T38.ACTYPE
					LEFT JOIN RMTACCOUNTTYPES T39 ON T1.FINPROVISIONACTYPE = T39.ACTYPE
					LEFT JOIN RMTACCOUNTTYPES T5 ON T1.FINACTYPE = T5.ACTYPE
					LEFT JOIN RMTACCOUNTTYPES T31 ON T1.PFTPAYACTYPE = T31.ACTYPE
					LEFT JOIN SMTDIVISIONDETAIL T48 ON T1.FINDIVISION = T48.DIVISIONCODE
					LEFT JOIN RMTACCOUNTTYPES T49 ON T1.FINSUSPACTYPE = T49.ACTYPE
					LEFT JOIN RULES T59 ON T1.DOWNPAYRULE = T59.RULEID LEFT JOIN RULES T67 ON T1.GRCPRICINGMETHOD = T67.RULEID
					LEFT JOIN RULES T68 ON T1.RPYPRICINGMETHOD = T68.RULEID
					LEFT JOIN PROFITCENTERS T69 ON T69.PROFITCENTERID = T1.PROFITCENTERID
	</createView>
	</changeSet>


	<changeSet id="8_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_restore_dependencies ('plf', 'rmtfinancetypes_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="9_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_orgview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="10" author="satyanarayana.g">
		<createView viewName="RMTFINANCETYPES_ORGVIEW " replaceIfExists="true">	 
			SELECT T1.FINTYPE,
					T1.FINCATEGORY,
					T1.FINTYPEDESC,
					T1.FINCCY,
					T1.FINDAYSCALTYPE,
					T1.FINACTYPE,
					T1.FINCONTINGENTACTYPE,
					T1.FINISGENREF,
					T1.FINMAXAMOUNT,
					T1.FINMINAMOUNT,
					T1.FINISOPENNEWFINAC,
					T1.FINISALWMD,
					T1.FINSCHDMTHD,
					T1.FINISALWGRACE,
					T1.EQUALREPAYMENT,
					T1.FINRATETYPE,
					T1.FINBASERATE,
					T1.FINSPLRATE,
					T1.FININTRATE,
					T1.FINMINRATE,
					T1.FINMAXRATE,
					T1.FINDFTINTFRQ,
					T1.FINISINTCPZ,
					T1.FINCPZFRQ,
					T1.FINISRVWALW,
					T1.FINRVWFRQ,
					T1.FINGRCRATETYPE,
					T1.FINGRCBASERATE,
					T1.FINGRCSPLRATE,
					T1.FINGRCINTRATE,
					T1.FINGRCMINRATE,
					T1.FINGRCMAXRATE,
					T1.FINGRCDFTINTFRQ,
					T1.FINGRCISINTCPZ,
					T1.FINGRCCPZFRQ,
					T1.FINGRCISRVWALW,
					T1.FINGRCRVWFRQ,
					T1.FINMINTERM,
					T1.FINMAXTERM,
					T1.FINDFTTERMS,
					T1.FINRPYFRQ,
					T1.FINREPAYMETHOD,
					T1.FINISALWDIFFERMENT,
					T1.FINMAXDIFFERMENT,
					T1.FINISACTIVE,
					T1.STEPFINANCE,
					T1.STEPPINGMANDATORY,
					T1.ALWMANUALSTEPS,
					T1.ALWDSTEPPOLICIES,
					T1.DFTSTEPPOLICY,
					T1.FINISDWPAYREQUIRED,
					T1.FINRVWRATEAPPLFOR,
					T1.FINALWRATECHANGEANYDATE,
					T1.FINISINTCPZATGRCEND,
					T1.FINSCHCALCODEONRVW,
					T1.ALWPLANDEFERMENT,
					T1.PLANDEFERCOUNT,
					T1.PFTPAYACTYPE,
					T1.FINISOPENPFTPAYACC,
					T1.FINISALWGRCREPAY,
					T1.FINGRCSCHDMTHD,
					T1.FINGRCMARGIN,
					T1.FINMARGIN,
					T1.FINCOMMITMENTREQ,
					T1.FINCOLLATERALREQ,
					T1.FINDEPRECIATIONREQ,
					T1.FINDEPRECIATIONFRQ,
					T1.FINBANKCONTINGENTACTYPE,
					T1.FINPROVISIONACTYPE,
					T1.ALLOWRIAINVESTMENT,
					T1.OVERRIDELIMIT,
					T1.LIMITREQUIRED,
					T1.FINCOMMITMENTOVRRIDE,
					T1.FINCOLLATERALOVRRIDE,
					T1.FINREPAYPFTONFRQ,
					T1.FINPFTUNCHANGED,
					T1.APPLYODPENALTY,
					T1.ODINCGRCDAYS,
					T1.ODCHARGETYPE,
					T1.ODGRACEDAYS,
					T1.ODCHARGECALON,
					T1.ODCHARGEAMTORPERC,
					T1.ODALLOWWAIVER,
					T1.ODMAXWAIVERPERC,
					T1.FINDIVISION,
					T3.DIVISIONCODEDESC LOVDESCFINDIVISIONNAME,
					T1.FINSUSPACTYPE,
					T1.PRODUCT,
					T1.STARTDATE,
					T1.ENDDATE,
					T1.ALLOWDOWNPAYPGM,
					T1.FINTYPEDESC LOVDESCPROMOFINTYPEDESC,
					T1.REMARKS,
					T4.POLICYDESC LOVDESCDFTSTEPPOLICYNAME,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.ALWADVANCERENT,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.ROLLOVERFINANCE,
					T1.ROLLOVERFRQ,
					T1.DOWNPAYRULE,
					T1.ALWMULTIPARTYDISB,
					T1.COLLATERALTYPE,
					T1.TDSAPPLICABLE,
					T5.RULECODE DOWNPAYRULECODE,
					T5.RULECODEDESC DOWNPAYRULEDESC,
					T1.APPLYGRCPRICING,
					T1.APPLYRPYPRICING,
					T6.RULECODE GRCPRICINGMETHODDESC,
					T7.RULECODE RPYPRICINGMETHODDESC,
					T1.DROPLINEOD,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T4.STEPTYPE DFTSTEPPOLICYTYPE,
					T1.MANUALSCHEDULE,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PFTDUESCHON,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.UNPLANEMIHLOCKPERIOD,
					T1.UNPLANEMICPZ,
					T1.REAGECPZ,
					T1.FDDLOCKPERIOD,
					T1.ALWDRPYMETHODS,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.ROUNDINGMODE,
					T1.ROUNDINGTARGET,
					T1.FREQUENCYDAYS,
					T1.QUICKDISB,
					T1.ALWREAGE,
					T1.ALWUNPLANEMIHOLIDAY,
					T1.ALWMAXDISBCHECKREQ,
					T1.PRODUCTCATEGORY,
					T1.RPYHIERARCHY,
					T1.DEVELOPERFINANCE,
					T3.ENTITYCODE LOVDESCENTITYCODE,
					T8.ENTITYDESC LOVDESCENTITYDESC,
					T1.COSTOFFUNDS,
					T1.CHEQUECAPTUREREQ,
					T1.FINLTVCHECK,
					T1.PARTIALLYSECURED,
					T1.ALWADVEMI,
					T1.ADVEMIMINTERMS,
					T1.ADVEMIMAXTERMS,
					T1.ADVEMIDFTTERMS,
					T1.ADVEMISCHDMTHD,
					T1.BPIPFTDAYSBASIS,
					T1.ELIGIBILITYMETHODS,
					T1.ALWHYBRIDRATE,
					T1.FIXEDRATETENOR,
					T1.ODMINCAPAMOUNT,
					T1.ODRULECODE,
					T1.ALWZEROINTACC,
					T1.FINISALWPARTIALRPY,
					T1.AUTOREJECTIONDAYS,
					T1.TAXNOMAND,
					T1.PUTCALLREQUIRED,
					T1.GRCADVINTERSETREQ,
					T1.GRCADVTYPE,
					T1.GRCADVMINTERMS,
					T1.GRCADVMAXTERMS,
					T1.GRCADVDEFAULTTERMS,
					T1.ADVINTERSETREQ,
					T1.ADVTYPE,
					T1.ADVMINTERMS,
					T1.ADVMAXTERMS,
					T1.ADVDEFAULTTERMS,
					T1.ADVSTAGE,
					T1.DSFREQ,
					T1.CASHCOLLATERALREQ,
					T1.ALWEARLYPAYMETHODS,
					T1.TDSALLOWTOMODIFY,
					T1.TDSAPPLICABLETO,
					T1.ALWVAN,
					T1.VANALLOCATIONMETHOD,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING
					FROM RMTFINANCETYPES T1
					JOIN SMTDIVISIONDETAIL T3 ON T1.FINDIVISION = T3.DIVISIONCODE
					LEFT JOIN STEPPOLICYHEADER T4 ON T1.DFTSTEPPOLICY = T4.POLICYCODE
					LEFT JOIN RULES T5 ON T1.DOWNPAYRULE = T5.RULEID
					LEFT JOIN RULES T6 ON T1.GRCPRICINGMETHOD = T6.RULEID
					LEFT JOIN RULES T7 ON T1.RPYPRICINGMETHOD = T7.RULEID
					LEFT JOIN ENTITY T8 ON T3.ENTITYCODE = T8.ENTITYCODE	 
	</createView>
	</changeSet>

	<changeSet id="60_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_restore_dependencies ('plf', 'rmtfinancetypes_orgview');
					
			]]>
		</sql>
	</changeSet>

	<changeSet id="11_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="11" author="satyanarayana.g">
		<createView viewName="RMTFINANCETYPES_VIEW " replaceIfExists="true">	 	 
	
			SELECT T1.FINTYPE,
				  T1.FINCATEGORY,
				  T1.FINTYPEDESC,
				  T1.FINCCY,
				  T1.FINDAYSCALTYPE,
				  T1.FINACTYPE,
				  T1.FINCONTINGENTACTYPE,
				  T1.FINISGENREF,
				  T1.FINMAXAMOUNT,
				  T1.FINMINAMOUNT,
				  T1.FINISOPENNEWFINAC,
				  T1.FINDFTSTMTFRQ,
				  T1.FINISALWMD,
				  T1.FINSCHDMTHD,
				  T1.FINISALWGRACE,
				  T1.FINHISTRETENSION,
				  T1.EQUALREPAYMENT,
				  T1.FINRATETYPE,
				  T1.FINBASERATE,
				  T1.FINSPLRATE,
				  T1.FININTRATE,
				  T1.FINMINRATE,
				  T1.FINMAXRATE,
				  T1.FINDFTINTFRQ,
				  T1.FINISINTCPZ,
				  T1.FINCPZFRQ,
				  T1.FINISRVWALW,
				  T1.FINRVWFRQ,
				  T1.FINGRCRATETYPE,
				  T1.FINGRCBASERATE,
				  T1.FINGRCSPLRATE,
				  T1.FINGRCINTRATE,
				  T1.FINGRCMINRATE,
				  T1.FINGRCMAXRATE,
				  T1.FINGRCDFTINTFRQ,
				  T1.FINGRCISINTCPZ,
				  T1.FINGRCCPZFRQ,
				  T1.FINGRCISRVWALW,
				  T1.FINGRCRVWFRQ,
				  T1.FINMINTERM,
				  T1.FINMAXTERM,
				  T1.FINDFTTERMS,
				  T1.FINRPYFRQ,
				  T1.FINREPAYMETHOD,
				  T1.FINISALWPARTIALRPY,
				  T1.FINISALWDIFFERMENT,
				  T1.FINMAXDIFFERMENT,
				  T1.FINISALWEARLYRPY,
				  T1.FINISALWEARLYSETTLE,
				  T1.FINODRPYTRIES,
				  T1.FINEARLYPAYRULE,
				  T1.FINEARLYSETTLERULE,
				  T1.FINDEPOSITRESTRICTEDTO,
				  T1.FINAEBUYORINCEPTION,
				  T1.FINAESELLORMATURITY,
				  T1.FINISACTIVE,
				  T1.VERSION,
				  T1.LASTMNTBY,
				  T1.LASTMNTON,
				  T1.RECORDSTATUS,
				  T1.ROLECODE,
				  T1.NEXTROLECODE,
				  T1.TASKID,
				  T1.NEXTTASKID,
				  T1.RECORDTYPE,
				  T1.WORKFLOWID,
				  T1.STEPFINANCE,
				  T1.STEPPINGMANDATORY,
				  T1.ALWMANUALSTEPS,
				  T1.ALWDSTEPPOLICIES,
				  T1.DFTSTEPPOLICY,
				  T4.ACTYPEDESC LOVDESCFINCONTINGENTACTYPENAME,
				  T5.ACTYPEDESC LOVDESCFINACTYPENAME,
				  T1.FINISDWPAYREQUIRED,
				  T1.FINRVWRATEAPPLFOR,
				  T1.FINALWRATECHANGEANYDATE,
				  T1.FINISINTCPZATGRCEND,
				  T1.FINELGRULECODE,
				  T1.LIMITELGRULECODE,
				  T1.FINSCHCALCODEONRVW,
				  T1.ALWPLANDEFERMENT,
				  T1.PLANDEFERCOUNT,
				  T1.FINASSETTYPE,
				  T1.PFTPAYACTYPE,
				  T1.FINISOPENPFTPAYACC,
				  T31.ACTYPEDESC LOVDESCPFTPAYACTYPENAME,
				  T1.FINISALWGRCREPAY,
				  T1.FINGRCSCHDMTHD,
				  T1.FINGRCMARGIN,
				  T1.FINMARGIN,
				  T1.FINSCHEDULEON,
				  T1.FINGRCSCHEDULEON,
				  T1.FINCOMMITMENTREQ,
				  T1.FINCOLLATERALREQ,
				  T1.FINDEPRECIATIONREQ,
				  T1.FINDEPRECIATIONFRQ,
				  T1.FINBANKCONTINGENTACTYPE,
				  T1.FINPROVISIONACTYPE,
				  T38.ACTYPEDESC LOVDESCFINBANKCONTACTYPENAME,
				  T39.ACTYPEDESC LOVDESCFINPROVISIONACTYPENAME,
				  T1.ALLOWRIAINVESTMENT,
				  T1.OVERRIDELIMIT,
				  T1.LIMITREQUIRED,
				  T1.FINCOMMITMENTOVRRIDE,
				  T1.FINCOLLATERALOVRRIDE,
				  T1.FINPFTUNCHANGED,
				  T1.APPLYODPENALTY,
				  T1.ODINCGRCDAYS,
				  T1.ODCHARGETYPE,
				  T1.ODGRACEDAYS,
				  T1.ODCHARGECALON,
				  T1.ODCHARGEAMTORPERC,
				  T1.ODALLOWWAIVER,
				  T1.ODMAXWAIVERPERC,
				  T1.FINDIVISION,
				  T48.DIVISIONCODEDESC LOVDESCFINDIVISIONNAME,
				  T48.ENTITYCODE LOVDESCENTITYCODE,
				  T1.FINSUSPACTYPE,
				  T49.ACTYPEDESC LOVDESCFINSUSPACTYPENAME,
				  T1.PRODUCT,
				  T1.STARTDATE,
				  T1.ENDDATE,
				  T1.ALLOWDOWNPAYPGM,
				  T1.FINTYPEDESC LOVDESCPROMOFINTYPEDESC,
				  T1.REMARKS,
				  T1.ALWEARLYPAYMETHODS,
				  T1.PASTDUEPFTCALMTHD,
				  T1.PASTDUEPFTMARGIN,
				  T1.ALWADVANCERENT,
				  T1.GRCADVBASERATE,
				  T1.GRCADVMARGIN,
				  T1.GRCADVPFTRATE,
				  T1.RPYADVBASERATE,
				  T1.RPYADVMARGIN,
				  T1.RPYADVPFTRATE,
				  T1.ROLLOVERFINANCE,
				  T1.ROLLOVERFRQ,
				  T1.DOWNPAYRULE,
				  T59.RULECODE DOWNPAYRULECODE,
				  T59.RULECODEDESC DOWNPAYRULEDESC,
				  T1.FINSUSPTRIGGER,
				  T1.FINSUSPREMARKS,
				  T1.ALWMULTIPARTYDISB,
				  T1.COLLATERALTYPE,
				  T1.TDSAPPLICABLE,
				  T1.MANUALSCHEDULE,
				  T1.APPLYGRCPRICING,
				  T1.GRCPRICINGMETHOD,
				  T1.APPLYRPYPRICING,
				  T1.RPYPRICINGMETHOD,
				  T1.RPYHIERARCHY,
				  T67.RULECODE GRCPRICINGMETHODDESC,
				  T68.RULECODE RPYPRICINGMETHODDESC,
				  T1.DROPLINEOD,
				  T1.DROPPINGMETHOD,
				  T1.RATECHGANYDAY,
				  T1.FINREPAYPFTONFRQ,
				  T1.ALWBPI,
				  T1.BPITREATMENT,
				  T1.PFTDUESCHON,
				  T1.PLANEMIHALW,
				  T1.PLANEMIHMETHOD,
				  T1.PLANEMIHMAXPERYEAR,
				  T1.PLANEMIHMAX,
				  T1.PLANEMIHLOCKPERIOD,
				  T1.PLANEMICPZ,
				  T1.UNPLANEMIHLOCKPERIOD,
				  T1.UNPLANEMICPZ,
				  T1.REAGECPZ,
				  T1.FDDLOCKPERIOD,
				  T1.ALWDRPYMETHODS,
				  T1.MAXUNPLANNEDEMI,
				  T1.MAXREAGEHOLIDAYS,
				  T1.ROUNDINGMODE,
				  T1.ROUNDINGTARGET,
				  T1.FREQUENCYDAYS,
				  T1.QUICKDISB,
				  T1.ALWMAXDISBCHECKREQ,
				  T1.ALWREAGE,
				  T1.ALWUNPLANEMIHOLIDAY,
				  T1.PROFITCENTERID,
				  T69.PROFITCENTERCODE,
				  T69.PROFITCENTERDESC,
				  T1.PRODUCTCATEGORY,
				  T2.PRODUCTDESC FINCATEGORYDESC,
				  T1.DEVELOPERFINANCE,
				  T1.COSTOFFUNDS,
				  T1.CHEQUECAPTUREREQ,
				  T1.FINLTVCHECK,
				  T1.PARTIALLYSECURED,
				  T1.ALWADVEMI,
				  T1.ADVEMIMINTERMS,
				  T1.ADVEMIMAXTERMS,
				  T1.ADVEMIDFTTERMS,
				  T1.ADVEMISCHDMTHD,
				  T1.BPIPFTDAYSBASIS,
				  T1.ELIGIBILITYMETHODS,
				  T1.ALWHYBRIDRATE,
				  T1.FIXEDRATETENOR,
				  T1.ODMINCAPAMOUNT,
				  T1.ODRULECODE,
				  T1.ALWZEROINTACC,
				  T1.AUTOREJECTIONDAYS,
				  T1.TAXNOMAND,
				  T1.PUTCALLREQUIRED,
				  T1.GRCADVINTERSETREQ,
				  T1.GRCADVTYPE,
				  T1.GRCADVMINTERMS,
				  T1.GRCADVMAXTERMS,
				  T1.GRCADVDEFAULTTERMS,
				  T1.ADVINTERSETREQ,
				  T1.ADVTYPE,
				  T1.ADVMINTERMS,
				  T1.ADVMAXTERMS,
				  T1.ADVDEFAULTTERMS,
				  T1.ADVSTAGE,
				  T1.DSFREQ,
				  T1.CASHCOLLATERALREQ,
				  T1.TDSALLOWTOMODIFY,
				  T1.TDSAPPLICABLETO,
				  T1.ALWVAN,
				  T1.VANALLOCATIONMETHOD,
				  T1.ALLOWDRAWINGPOWER,
				  T1.ALLOWREVOLVING
				FROM RMTFINANCETYPES_TEMP T1
				LEFT JOIN BMTPRODUCT T2 ON T1.FINCATEGORY = T2.PRODUCTCODE
				LEFT JOIN RMTACCOUNTTYPES T4 ON T1.FINCONTINGENTACTYPE = T4.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T38 ON T1.FINBANKCONTINGENTACTYPE = T38.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T39 ON T1.FINPROVISIONACTYPE = T39.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T5 ON T1.FINACTYPE = T5.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T31 ON T1.PFTPAYACTYPE = T31.ACTYPE
				LEFT JOIN SMTDIVISIONDETAIL T48 ON T1.FINDIVISION = T48.DIVISIONCODE
				LEFT JOIN RMTACCOUNTTYPES T49 ON T1.FINSUSPACTYPE = T49.ACTYPE
				LEFT JOIN RULES T59 ON T1.DOWNPAYRULE = T59.RULEID
				LEFT JOIN RULES T67 ON T1.GRCPRICINGMETHOD = T67.RULEID
				LEFT JOIN RULES T68 ON T1.RPYPRICINGMETHOD = T68.RULEID
				LEFT JOIN PROFITCENTERS T69 ON T69.PROFITCENTERID = T1.PROFITCENTERID
				UNION ALL
				SELECT T1.FINTYPE,
				  T1.FINCATEGORY,
				  T1.FINTYPEDESC,
				  T1.FINCCY,
				  T1.FINDAYSCALTYPE,
				  T1.FINACTYPE,
				  T1.FINCONTINGENTACTYPE,
				  T1.FINISGENREF,
				  T1.FINMAXAMOUNT,
				  T1.FINMINAMOUNT,
				  T1.FINISOPENNEWFINAC,
				  T1.FINDFTSTMTFRQ,
				  T1.FINISALWMD,
				  T1.FINSCHDMTHD,
				  T1.FINISALWGRACE,
				  T1.FINHISTRETENSION,
				  T1.EQUALREPAYMENT,
				  T1.FINRATETYPE,
				  T1.FINBASERATE,
				  T1.FINSPLRATE,
				  T1.FININTRATE,
				  T1.FINMINRATE,
				  T1.FINMAXRATE,
				  T1.FINDFTINTFRQ,
				  T1.FINISINTCPZ,
				  T1.FINCPZFRQ,
				  T1.FINISRVWALW,
				  T1.FINRVWFRQ,
				  T1.FINGRCRATETYPE,
				  T1.FINGRCBASERATE,
				  T1.FINGRCSPLRATE,
				  T1.FINGRCINTRATE,
				  T1.FINGRCMINRATE,
				  T1.FINGRCMAXRATE,
				  T1.FINGRCDFTINTFRQ,
				  T1.FINGRCISINTCPZ,
				  T1.FINGRCCPZFRQ,
				  T1.FINGRCISRVWALW,
				  T1.FINGRCRVWFRQ,
				  T1.FINMINTERM,
				  T1.FINMAXTERM,
				  T1.FINDFTTERMS,
				  T1.FINRPYFRQ,
				  T1.FINREPAYMETHOD,
				  T1.FINISALWPARTIALRPY,
				  T1.FINISALWDIFFERMENT,
				  T1.FINMAXDIFFERMENT,
				  T1.FINISALWEARLYRPY,
				  T1.FINISALWEARLYSETTLE,
				  T1.FINODRPYTRIES,
				  T1.FINEARLYPAYRULE,
				  T1.FINEARLYSETTLERULE,
				  T1.FINDEPOSITRESTRICTEDTO,
				  T1.FINAEBUYORINCEPTION,
				  T1.FINAESELLORMATURITY,
				  T1.FINISACTIVE,
				  T1.VERSION,
				  T1.LASTMNTBY,
				  T1.LASTMNTON,
				  T1.RECORDSTATUS,
				  T1.ROLECODE,
				  T1.NEXTROLECODE,
				  T1.TASKID,
				  T1.NEXTTASKID,
				  T1.RECORDTYPE,
				  T1.WORKFLOWID,
				  T1.STEPFINANCE,
				  T1.STEPPINGMANDATORY,
				  T1.ALWMANUALSTEPS,
				  T1.ALWDSTEPPOLICIES,
				  T1.DFTSTEPPOLICY,
				  T4.ACTYPEDESC LOVDESCFINCONTINGENTACTYPENAME,
				  T5.ACTYPEDESC LOVDESCFINACTYPENAME,
				  T1.FINISDWPAYREQUIRED,
				  T1.FINRVWRATEAPPLFOR,
				  T1.FINALWRATECHANGEANYDATE,
				  T1.FINISINTCPZATGRCEND,
				  T1.FINELGRULECODE,
				  T1.LIMITELGRULECODE,
				  T1.FINSCHCALCODEONRVW,
				  T1.ALWPLANDEFERMENT,
				  T1.PLANDEFERCOUNT,
				  T1.FINASSETTYPE,
				  T1.PFTPAYACTYPE,
				  T1.FINISOPENPFTPAYACC,
				  T31.ACTYPEDESC LOVDESCPFTPAYACTYPENAME,
				  T1.FINISALWGRCREPAY,
				  T1.FINGRCSCHDMTHD,
				  T1.FINGRCMARGIN,
				  T1.FINMARGIN,
				  T1.FINSCHEDULEON,
				  T1.FINGRCSCHEDULEON,
				  T1.FINCOMMITMENTREQ,
				  T1.FINCOLLATERALREQ,
				  T1.FINDEPRECIATIONREQ,
				  T1.FINDEPRECIATIONFRQ,
				  T1.FINBANKCONTINGENTACTYPE,
				  T1.FINPROVISIONACTYPE,
				  T38.ACTYPEDESC LOVDESCFINBANKCONTACTYPENAME,
				  T39.ACTYPEDESC LOVDESCFINPROVISIONACTYPENAME,
				  T1.ALLOWRIAINVESTMENT,
				  T1.OVERRIDELIMIT,
				  T1.LIMITREQUIRED,
				  T1.FINCOMMITMENTOVRRIDE,
				  T1.FINCOLLATERALOVRRIDE,
				  T1.FINPFTUNCHANGED,
				  T1.APPLYODPENALTY,
				  T1.ODINCGRCDAYS,
				  T1.ODCHARGETYPE,
				  T1.ODGRACEDAYS,
				  T1.ODCHARGECALON,
				  T1.ODCHARGEAMTORPERC,
				  T1.ODALLOWWAIVER,
				  T1.ODMAXWAIVERPERC,
				  T1.FINDIVISION,
				  T48.DIVISIONCODEDESC LOVDESCFINDIVISIONNAME,
				  T48.ENTITYCODE LOVDESCENTITYCODE,
				  T1.FINSUSPACTYPE,
				  T49.ACTYPEDESC LOVDESCFINSUSPACTYPENAME,
				  T1.PRODUCT,
				  T1.STARTDATE,
				  T1.ENDDATE,
				  T1.ALLOWDOWNPAYPGM,
				  T1.FINTYPEDESC LOVDESCPROMOFINTYPEDESC,
				  T1.REMARKS,
				  T1.ALWEARLYPAYMETHODS,
				  T1.PASTDUEPFTCALMTHD,
				  T1.PASTDUEPFTMARGIN,
				  T1.ALWADVANCERENT,
				  T1.GRCADVBASERATE,
				  T1.GRCADVMARGIN,
				  T1.GRCADVPFTRATE,
				  T1.RPYADVBASERATE,
				  T1.RPYADVMARGIN,
				  T1.RPYADVPFTRATE,
				  T1.ROLLOVERFINANCE,
				  T1.ROLLOVERFRQ,
				  T1.DOWNPAYRULE,
				  T59.RULECODE DOWNPAYRULECODE,
				  T59.RULECODEDESC DOWNPAYRULEDESC,
				  T1.FINSUSPTRIGGER,
				  T1.FINSUSPREMARKS,
				  T1.ALWMULTIPARTYDISB,
				  T1.COLLATERALTYPE,
				  T1.TDSAPPLICABLE,
				  T1.MANUALSCHEDULE,
				  T1.APPLYGRCPRICING,
				  T1.GRCPRICINGMETHOD,
				  T1.APPLYRPYPRICING,
				  T1.RPYPRICINGMETHOD,
				  T1.RPYHIERARCHY,
				  T67.RULECODE GRCPRICINGMETHODDESC,
				  T68.RULECODE RPYPRICINGMETHODDESC,
				  T1.DROPLINEOD,
				  T1.DROPPINGMETHOD,
				  T1.RATECHGANYDAY,
				  T1.FINREPAYPFTONFRQ,
				  T1.ALWBPI,
				  T1.BPITREATMENT,
				  T1.PFTDUESCHON,
				  T1.PLANEMIHALW,
				  T1.PLANEMIHMETHOD,
				  T1.PLANEMIHMAXPERYEAR,
				  T1.PLANEMIHMAX,
				  T1.PLANEMIHLOCKPERIOD,
				  T1.PLANEMICPZ,
				  T1.UNPLANEMIHLOCKPERIOD,
				  T1.UNPLANEMICPZ,
				  T1.REAGECPZ,
				  T1.FDDLOCKPERIOD,
				  T1.ALWDRPYMETHODS,
				  T1.MAXUNPLANNEDEMI,
				  T1.MAXREAGEHOLIDAYS,
				  T1.ROUNDINGMODE,
				  T1.ROUNDINGTARGET,
				  T1.FREQUENCYDAYS,
				  T1.QUICKDISB,
				  T1.ALWMAXDISBCHECKREQ,
				  T1.ALWREAGE,
				  T1.ALWUNPLANEMIHOLIDAY,
				  T1.PROFITCENTERID,
				  T69.PROFITCENTERCODE,
				  T69.PROFITCENTERDESC,
				  T1.PRODUCTCATEGORY,
				  T2.PRODUCTDESC FINCATEGORYDESC,
				  T1.DEVELOPERFINANCE,
				  T1.COSTOFFUNDS,
				  T1.CHEQUECAPTUREREQ,
				  T1.FINLTVCHECK,
				  T1.PARTIALLYSECURED,
				  T1.ALWADVEMI,
				  T1.ADVEMIMINTERMS,
				  T1.ADVEMIMAXTERMS,
				  T1.ADVEMIDFTTERMS,
				  T1.ADVEMISCHDMTHD,
				  T1.BPIPFTDAYSBASIS,
				  T1.ELIGIBILITYMETHODS,
				  T1.ALWHYBRIDRATE,
				  T1.FIXEDRATETENOR,
				  T1.ODMINCAPAMOUNT,
				  T1.ODRULECODE,
				  T1.ALWZEROINTACC,
				  T1.AUTOREJECTIONDAYS,
				  T1.TAXNOMAND,
				  T1.PUTCALLREQUIRED,
				  T1.GRCADVINTERSETREQ,
				  T1.GRCADVTYPE,
				  T1.GRCADVMINTERMS,
				  T1.GRCADVMAXTERMS,
				  T1.GRCADVDEFAULTTERMS,
				  T1.ADVINTERSETREQ,
				  T1.ADVTYPE,
				  T1.ADVMINTERMS,
				  T1.ADVMAXTERMS,
				  T1.ADVDEFAULTTERMS,
				  T1.ADVSTAGE,
				  T1.DSFREQ,
				  T1.CASHCOLLATERALREQ,
				  T1.TDSALLOWTOMODIFY,
				  T1.TDSAPPLICABLETO,
				  T1.ALWVAN,
				  T1.VANALLOCATIONMETHOD,
				  T1.ALLOWDRAWINGPOWER,
				  T1.ALLOWREVOLVING
				FROM RMTFINANCETYPES T1
				LEFT JOIN BMTPRODUCT T2 ON T1.FINCATEGORY = T2.PRODUCTCODE
				LEFT JOIN RMTACCOUNTTYPES T4 ON T1.FINCONTINGENTACTYPE = T4.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T38 ON T1.FINBANKCONTINGENTACTYPE = T38.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T39 ON T1.FINPROVISIONACTYPE = T39.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T5 ON T1.FINACTYPE = T5.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T31 ON T1.PFTPAYACTYPE = T31.ACTYPE
				LEFT JOIN SMTDIVISIONDETAIL T48 ON T1.FINDIVISION = T48.DIVISIONCODE
				LEFT JOIN RMTACCOUNTTYPES T49 ON T1.FINSUSPACTYPE = T49.ACTYPE
				LEFT JOIN RULES T59 ON T1.DOWNPAYRULE = T59.RULEID
				LEFT JOIN RULES T67 ON T1.GRCPRICINGMETHOD = T67.RULEID
				LEFT JOIN RULES T68 ON T1.RPYPRICINGMETHOD = T68.RULEID
				LEFT JOIN PROFITCENTERS T69 ON T69.PROFITCENTERID = T1.PROFITCENTERID
				WHERE NOT (EXISTS (SELECT 1 EXPR1 FROM RMTFINANCETYPES_TEMP WHERE RMTFINANCETYPES_TEMP.FINTYPE = T1.FINTYPE))			  
		  </createView>
	</changeSet>

	<changeSet id="11_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_restore_dependencies ('plf', 'rmtfinancetypes_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="12" author="satyanarayana.g">
		<addColumn tableName="FINANCEMAIN">
			<column name="AllowDrawingPower" type="boolean" />
			<column name="AllowRevolving" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="13" author="satyanarayana.g">
		<addColumn tableName="FINANCEMAIN_TEMP">
			<column name="AllowDrawingPower" type="boolean" />
			<column name="AllowRevolving" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="14" author="satyanarayana.g">
		<sql>
			<![CDATA[
				UPDATE FINANCEMAIN Set AllowDrawingPower = 0;
				UPDATE FINANCEMAIN Set AllowRevolving = 0;
				UPDATE FINANCEMAIN_Temp Set AllowDrawingPower = 0;
				UPDATE FINANCEMAIN_Temp Set AllowRevolving = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="15" author="satyanarayana.g" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE FINANCEMAIN ADD CONSTRAINT DF_FINANCEMAIN_ALWDP DEFAULT 0 FOR ALLOWDRAWINGPOWER;
				ALTER TABLE FINANCEMAIN ADD CONSTRAINT DF_FINANCEMAIN_ALWRVLVING DEFAULT 0 FOR ALLOWREVOLVING;
				ALTER TABLE FINANCEMAIN_TEMP ADD CONSTRAINT DF_FINANCEMAIN_TEMP_ALWDP DEFAULT 0 FOR ALLOWDRAWINGPOWER;
				ALTER TABLE FINANCEMAIN_TEMP ADD CONSTRAINT DF_FINANCEMAIN_TEMP_ALWRVLING DEFAULT 0 FOR ALLOWREVOLVING;
			]]>
		</sql>
	</changeSet>

	<changeSet id="16" author="satyanarayana.g" dbms="postgresql, oracle">
		<addDefaultValue columnName="AllowDrawingPower" tableName="FINANCEMAIN" defaultValue="0" />
		<addDefaultValue columnName="AllowRevolving" tableName="FINANCEMAIN" defaultValue="0" />
		<addDefaultValue columnName="AllowDrawingPower" tableName="FINANCEMAIN_Temp" defaultValue="0" />
		<addDefaultValue columnName="AllowRevolving" tableName="FINANCEMAIN_Temp" defaultValue="0" />
	</changeSet>

	<changeSet id="17" author="satyanarayana.g">
		<addColumn tableName="FINANCEMAIN_PA">
			<column name="AllowDrawingPower" type="boolean" />
			<column name="AllowRevolving" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="18" author="satyanarayana.g">
		<sql>
			<![CDATA[
				UPDATE FINANCEMAIN_PA Set AllowDrawingPower = 0;
				UPDATE FINANCEMAIN_PA Set AllowRevolving = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="19" author="satyanarayana.g" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE FINANCEMAIN_PA ADD CONSTRAINT DF_FINANCEMAIN_ALWDP DEFAULT 0 FOR ALLOWDRAWINGPOWER;
				ALTER TABLE FINANCEMAIN_PA ADD CONSTRAINT DF_FINANCEMAIN_ALWRVLVING DEFAULT 0 FOR ALLOWREVOLVING;
			]]>
		</sql>
	</changeSet>

	<changeSet id="20" author="satyanarayana.g" dbms="postgresql, oracle">
		<addDefaultValue columnName="AllowDrawingPower" tableName="FINANCEMAIN_PA" defaultValue="0" />
		<addDefaultValue columnName="AllowRevolving" tableName="FINANCEMAIN_PA" defaultValue="0" />
	</changeSet>

	<changeSet id="21" author="satyanarayana.g">
		<addColumn tableName="REJECTFINANCEMAIN">
			<column name="AllowDrawingPower" type="boolean" />
			<column name="AllowRevolving" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="22" author="satyanarayana.g">
		<sql>
			<![CDATA[
				UPDATE REJECTFINANCEMAIN Set AllowDrawingPower = 0;
				UPDATE REJECTFINANCEMAIN Set AllowRevolving = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="23" author="satyanarayana.g" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE REJECTFINANCEMAIN ADD CONSTRAINT DF_REJECTFINANCEMAIN_ALWDP DEFAULT 0 FOR ALLOWDRAWINGPOWER;
				ALTER TABLE REJECTFINANCEMAIN ADD CONSTRAINT DF_REJECTFINANCEMAIN_ALWRVLNG DEFAULT 0 FOR ALLOWREVOLVING;
			]]>
		</sql>
	</changeSet>

	<changeSet id="24" author="satyanarayana.g" dbms="postgresql, oracle">
		<addDefaultValue columnName="AllowDrawingPower" tableName="REJECTFINANCEMAIN" defaultValue="0" />
		<addDefaultValue columnName="AllowRevolving" tableName="REJECTFINANCEMAIN" defaultValue="0" />
	</changeSet>

	<changeSet id="25_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_save_and_drop_dependencies ('plf', 'financemain_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="25" author="satyanarayana.g">
		<createView viewName="FINANCEMAIN_VIEW" replaceIfExists="true">
			SELECT T1.FINREFERENCE,
					T1.INVESTMENTREF,
					T1.NUMBEROFTERMS,
					T1.GRCPERIODENDDATE,
					T1.ALLOWGRCPERIOD,
					T1.GRACEBASERATE,
					T1.GRACESPECIALRATE,
					T1.GRCPFTRATE,
					T1.GRCPFTFRQ,
					T1.NEXTGRCPFTDATE,
					T1.ALLOWGRCPFTRVW,
					T1.GRCPFTRVWFRQ,
					T1.NEXTGRCPFTRVWDATE,
					T1.ALLOWGRCCPZ,
					T1.GRCCPZFRQ,
					T1.NEXTGRCCPZDATE,
					T1.REPAYBASERATE,
					T1.REPAYSPECIALRATE,
					T1.REPAYPROFITRATE,
					T1.REPAYFRQ,
					T1.NEXTREPAYDATE,
					T1.REPAYPFTFRQ,
					T1.NEXTREPAYPFTDATE,
					T1.ALLOWREPAYRVW,
					T1.REPAYRVWFRQ,
					T1.NEXTREPAYRVWDATE,
					T1.ALLOWREPAYCPZ,
					T1.REPAYCPZFRQ,
					T1.NEXTREPAYCPZDATE,
					T1.MATURITYDATE,
					T1.CPZATGRACEEND,
					T1.DOWNPAYMENT,
					T1.GRACEFLATAMOUNT,
					T1.REQREPAYAMOUNT,
					T1.TOTALPROFIT,
					T1.TOTALCPZ,
					T1.TOTALGROSSPFT,
					T1.TOTALGROSSGRCPFT,
					T1.TOTALGRACEPFT,
					T1.TOTALGRACECPZ,
					T1.GRCRATEBASIS,
					T1.REPAYRATEBASIS,
					T1.FINTYPE,
					T1.FINREMARKS,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.REQMATURITY,
					T1.CALTERMS,
					T1.CALMATURITY,
					T1.FIRSTREPAY,
					T1.LASTREPAY,
					T1.FINSTARTDATE,
					T1.FINAMOUNT,
					T1.FINAMOUNT + T1.FEECHARGEAMT - T1.DOWNPAYMENT AS LOVDESCFINANCINGAMOUNT,
					T1.FINREPAYMENTAMOUNT,
					T1.CUSTID,
					T1.DEFFERMENTS,
					T1.PLANDEFERCOUNT,
					T1.FINBRANCH,
					T1.FINSOURCEID,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.ALLOWEDDEFFRQCHANGE,
					T1.AVAILEDDEFFRQCHANGE,
					T1.RECALTYPE,
					T1.FINASSETVALUE,
					T1.DISBACCOUNTID,
					T1.REPAYACCOUNTID,
					T1.FINISACTIVE,
					T1.LIMITVALID,
					T1.OVERRIDELIMIT,
					T1.SECURITYDEPOSIT,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T7.FINTYPEDESC   LOVDESCFINTYPENAME,
					T7.FINMAXAMOUNT  LOVDESCFINMAXAMT,
					T7.FINMINAMOUNT  LOVDESCFINMINAMOUNT,
					T1.MINDOWNPAYPERC,
					T7.FINISALWDIFFERMENT  LOVDESCFINALWDEFERMENT,
					T7.FINISDWPAYREQUIRED  LOVDESCDWNPAYREQ,
					T7.FINMAXDIFFERMENT   LOVDESCFINMAXDIFFERMENT,
					T12.BRANCHDESC        LOVDESCFINBRANCHNAME,
					T12.BRANCHPROVINCE    FINBRANCHPROVINCECODE,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.LASTREPAYRVWDATE,
					T1.LASTREPAYCPZDATE,
					T1.ALLOWGRCREPAY,
					T1.GRCSCHDMTHD,
					T1.GRCMARGIN,
					T1.REPAYMARGIN,
					T1.FINCURRASSETVALUE,
					T1.FINCOMMITMENTREF,
					T1.FINLIMITREF,
					T1.DEPRECIATIONFRQ,
					T1.FINCONTRACTDATE,
					T1.NEXTDEPDATE,
					T1.LASTDEPDATE,
					T1.FINACCOUNT,
					T1.FINCUSTPFTACCOUNT,
					T17.ACRTILLLBD  LOVDESCACCRUEDTILLLBD,
					T7.FINRVWRATEAPPLFOR,
					T1.TOTALREPAYAMT,
					T1.CLOSINGSTATUS,
					T1.FINAPPROVEDDATE,
					T1.FEECHARGEAMT,
					T1.BLACKLISTED,
					T1.FINREPAYPFTONFRQ,
					T1.ANUALIZEDPERCRATE,
					T1.EFFECTIVERATEOFRETURN,
					T1.MIGRATEDFINANCE,
					T1.SCHEDULEMAINTAINED,
					T1.SCHEDULEREGENERATED,
					T1.FINPURPOSE,
					T39.LOANPURPOSEDESC  LOVDESCFINPURPOSENAME,
					T1.FINSTATUS,
					T1.FINSTSREASON,
					T1.INITIATEUSER,
					T1.BANKNAME,
					T1.IBAN,
					T1.ACCOUNTTYPE,
					T1.DDAREFERENCENO,
					T7.FINSCHEDULEON  LOVDESCFINSCHEDULEON,
					T1.CUSTDSR,
					T1.JOINTACCOUNT,
					T1.JOINTCUSTID,
					T1.DOWNPAYBANK,
					T1.DOWNPAYSUPL,
					T1.DOWNPAYACCOUNT,
					T1.SECURITYCOLLATERAL,
					T1.APPROVED,
					T1.DISCREPANCY,
					T1.LIMITAPPROVED,
					T1.GRACETERMS,
					T7.FINDIVISION  LOVDESCFINDIVISION,
					T1.RCDMAINTAINSTS,
					T1.FINREPAYMETHOD,
					T1.GRCPROFITDAYSBASIS,
					T1.STEPFINANCE,
					T1.STEPTYPE,
					T1.STEPPOLICY,
					T1.ALWMANUALSTEPS,
					T1.NOOFSTEPS,
					T1.LINKEDFINREF,
					T1.NEXTUSERID,
					T1.PRIORITY,
					T24.POLICYDESC  LOVDESCSTEPPOLICYNAME,
					T1.GRCMINRATE,
					T1.GRCMAXRATE,
					T1.RPYMINRATE,
					T1.RPYMAXRATE,
					T1.DEVIATIONAPPROVAL,
					T1.MANUALSCHEDULE,
					T1.TAKEOVERFINANCE,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.SUPPLEMENTRENT,
					T1.INCREASEDCOST,
					T1.CREDITINSAMT,
					T1.ROLLOVERFRQ,
					T1.NEXTROLLOVERDATE,
					T27.CUSTSTSDESCRIPTION,
					T1.SHARIASTATUS,
					T1.INITIATEDATE,
					T1.FINPREAPPROVEDREF,
					T1.MMAID,
					T1.ACCOUNTSOFFICER,
					T1.FEEACCOUNTID,
					T1.FINCANCELAC,
					T28.DEALERNAME  LOVDESCACCOUNTSOFFICER,
					T28.DEALERCITY  LOVDESCSOURCECITY,
					T1.DSACODE,
					T30.ROFFICERDESC  DSACODEDESC,
					T1.TDSAPPLICABLE,
					T1.MANDATEID,
					T1.DROPLINEFRQ,
					T1.FIRSTDROPLINEDATE,
					T1.PFTSERVICINGODLIMIT,
					T1.INSURANCEAMT,
					T1.DEDUCTINSDISB,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.CALROUNDINGMODE,
					T1.ALWMULTIDISB,
					T1.APPLICATIONNO,
					T1.REFERRALID,
					T33.ROFFICERDESC  REFERRALIDDESC,
					T1.DMACODE,
					T34.ROFFICERDESC  DMACODEDESC,
					T1.SALESDEPARTMENT,
					T35.GENDEPTDESC  SALESDEPARTMENTDESC,
					T1.QUICKDISB,
					T1.WIFREFERENCE,
					T1.UNPLANEMIHLOCKPERIOD,
					T1.UNPLANEMICPZ,
					T1.REAGECPZ,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.AVAILEDUNPLANEMI,
					T1.AVAILEDREAGEH,
					T1.BPIAMOUNT,
					T1.DEDUCTFEEDISB,
					T1.RVWRATEAPPLFOR,
					T1.SCHCALONRVW,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.PROMOTIONCODE,
					T1.RESTRUCTURELOAN,
					T1.OLDFINREFERENCE,
					T1.REAGEBUCKET,
					T1.FINCATEGORY,
					T1.PRODUCTCATEGORY,
					T1.ROUNDINGTARGET,
					T36.ENTITYCODE  LOVDESCENTITYCODE,
					T1.ELIGIBILITYMETHOD,
					T38.FIELDCODEVALUE  LOVELIGIBILITYMETHOD,
					T38.VALUEDESC       LOVDESCELIGIBILITYMETHOD,
					T1.EMPLOYEENAME,
					T37.ROFFICERDESC  EMPLOYEENAMEDESC,
					T1.SAMPLINGREQUIRED,
					T1.LEGALREQUIRED,
					T1.GRCMAXAMOUNT,
					T1.CONNECTOR,
					T40.DEALERNAME  CONNECTORCODE,
					T40.DEALERCITY  CONNECTORDESC,
					T1.ADVANCEEMI,
					T1.ADVEMITERMS,
					T1.BPIPFTDAYSBASIS,
					T1.FIXEDRATETENOR,
					T1.FIXEDTENORRATE,
					T12.BRANCHTEL  FINBRANCHCONTACT,
					T1.PROCESSATTRIBUTES,
					T1.BUSINESSVERTICAL,
					BV.CODE         BUSINESSVERTICALCODE,
					BV.DESCRIPTION  BUSINESSVERTICALDESC,
					T1.GRCADVTYPE,
					T1.GRCADVTERMS,
					T1.ADVTYPE,
					T1.ADVTERMS,
					T1.ADVSTAGE,
					T1.TDSPERCENTAGE,
					T1.TDSSTARTDATE,
					T1.TDSENDDATE,
					T1.TDSLIMITAMT,
					T1.VANREQ,
					T1.VANCODE,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING
					FROM FINANCEMAIN_TEMP T1
					JOIN RMTFINANCETYPES T7 ON T1.FINTYPE = T7.FINTYPE
					LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH = T12.BRANCHCODE
					LEFT JOIN FINPFTDETAILS T17 ON T17.FINREFERENCE = T1.FINREFERENCE
					LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY = T24.POLICYCODE
					LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS = T27.CUSTSTSCODE
					LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
					LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE = T30.ROFFICERCODE
					LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID = T33.ROFFICERCODE
					LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE = T34.ROFFICERCODE
					LEFT JOIN RMTGENDEPARTMENTS T35 ON T1.SALESDEPARTMENT = T35.GENDEPARTMENT
					LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION = T36.DIVISIONCODE
					LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME = T37.ROFFICERCODE
					LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE = 'ELGMETHOD'
					LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE = T39.LOANPURPOSECODE
					LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
					LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
					UNION ALL
					SELECT T1.FINREFERENCE,
					T1.INVESTMENTREF,
					T1.NUMBEROFTERMS,
					T1.GRCPERIODENDDATE,
					T1.ALLOWGRCPERIOD,
					T1.GRACEBASERATE,
					T1.GRACESPECIALRATE,
					T1.GRCPFTRATE,
					T1.GRCPFTFRQ,
					T1.NEXTGRCPFTDATE,
					T1.ALLOWGRCPFTRVW,
					T1.GRCPFTRVWFRQ,
					T1.NEXTGRCPFTRVWDATE,
					T1.ALLOWGRCCPZ,
					T1.GRCCPZFRQ,
					T1.NEXTGRCCPZDATE,
					T1.REPAYBASERATE,
					T1.REPAYSPECIALRATE,
					T1.REPAYPROFITRATE,
					T1.REPAYFRQ,
					T1.NEXTREPAYDATE,
					T1.REPAYPFTFRQ,
					T1.NEXTREPAYPFTDATE,
					T1.ALLOWREPAYRVW,
					T1.REPAYRVWFRQ,
					T1.NEXTREPAYRVWDATE,
					T1.ALLOWREPAYCPZ,
					T1.REPAYCPZFRQ,
					T1.NEXTREPAYCPZDATE,
					T1.MATURITYDATE,
					T1.CPZATGRACEEND,
					T1.DOWNPAYMENT,
					T1.GRACEFLATAMOUNT,
					T1.REQREPAYAMOUNT,
					T1.TOTALPROFIT,
					T1.TOTALCPZ,
					T1.TOTALGROSSPFT,
					T1.TOTALGROSSGRCPFT,
					T1.TOTALGRACEPFT,
					T1.TOTALGRACECPZ,
					T1.GRCRATEBASIS,
					T1.REPAYRATEBASIS,
					T1.FINTYPE,
					T1.FINREMARKS,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.REQMATURITY,
					T1.CALTERMS,
					T1.CALMATURITY,
					T1.FIRSTREPAY,
					T1.LASTREPAY,
					T1.FINSTARTDATE,
					T1.FINAMOUNT,
					T1.FINAMOUNT + T1.FEECHARGEAMT - T1.DOWNPAYMENT  LOVDESCFINANCINGAMOUNT,
					T1.FINREPAYMENTAMOUNT,
					T1.CUSTID,
					T1.DEFFERMENTS,
					T1.PLANDEFERCOUNT,
					T1.FINBRANCH,
					T1.FINSOURCEID,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.ALLOWEDDEFFRQCHANGE,
					T1.AVAILEDDEFFRQCHANGE,
					T1.RECALTYPE,
					T1.FINASSETVALUE,
					T1.DISBACCOUNTID,
					T1.REPAYACCOUNTID,
					T1.FINISACTIVE,
					T1.LIMITVALID,
					T1.OVERRIDELIMIT,
					T1.SECURITYDEPOSIT,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T7.FINTYPEDESC   LOVDESCFINTYPENAME,
					T7.FINMAXAMOUNT  LOVDESCFINMAXAMT,
					T7.FINMINAMOUNT  LOVDESCFINMINAMOUNT,
					T1.MINDOWNPAYPERC,
					T7.FINISALWDIFFERMENT  LOVDESCFINALWDEFERMENT,
					T7.FINISDWPAYREQUIRED  LOVDESCDWNPAYREQ,
					T7.FINMAXDIFFERMENT   LOVDESCFINMAXDIFFERMENT,
					T12.BRANCHDESC     LOVDESCFINBRANCHNAME,
					T12.BRANCHPROVINCE   FINBRANCHPROVINCECODE,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.LASTREPAYRVWDATE,
					T1.LASTREPAYCPZDATE,
					T1.ALLOWGRCREPAY,
					T1.GRCSCHDMTHD,
					T1.GRCMARGIN,
					T1.REPAYMARGIN,
					T1.FINCURRASSETVALUE,
					T1.FINCOMMITMENTREF,
					T1.FINLIMITREF,
					T1.DEPRECIATIONFRQ,
					T1.FINCONTRACTDATE,
					T1.NEXTDEPDATE,
					T1.LASTDEPDATE,
					T1.FINACCOUNT,
					T1.FINCUSTPFTACCOUNT,
					T17.ACRTILLLBD  LOVDESCACCRUEDTILLLBD,
					T7.FINRVWRATEAPPLFOR,
					T1.TOTALREPAYAMT,
					T1.CLOSINGSTATUS,
					T1.FINAPPROVEDDATE,
					T1.FEECHARGEAMT,
					T1.BLACKLISTED,
					T1.FINREPAYPFTONFRQ,
					T1.ANUALIZEDPERCRATE,
					T1.EFFECTIVERATEOFRETURN,
					T1.MIGRATEDFINANCE,
					T1.SCHEDULEMAINTAINED,
					T1.SCHEDULEREGENERATED,
					T1.FINPURPOSE,
					T39.LOANPURPOSEDESC  LOVDESCFINPURPOSENAME,
					T1.FINSTATUS,
					T1.FINSTSREASON,
					T1.INITIATEUSER,
					T1.BANKNAME,
					T1.IBAN,
					T1.ACCOUNTTYPE,
					T1.DDAREFERENCENO,
					T7.FINSCHEDULEON  LOVDESCFINSCHEDULEON,
					T1.CUSTDSR,
					T1.JOINTACCOUNT,
					T1.JOINTCUSTID,
					T1.DOWNPAYBANK,
					T1.DOWNPAYSUPL,
					T1.DOWNPAYACCOUNT,
					T1.SECURITYCOLLATERAL,
					T1.APPROVED,
					T1.DISCREPANCY,
					T1.LIMITAPPROVED,
					T1.GRACETERMS,
					T7.FINDIVISION  LOVDESCFINDIVISION,
					T1.RCDMAINTAINSTS,
					T1.FINREPAYMETHOD,
					T1.GRCPROFITDAYSBASIS,
					T1.STEPFINANCE,
					T1.STEPTYPE,
					T1.STEPPOLICY,
					T1.ALWMANUALSTEPS,
					T1.NOOFSTEPS,
					T1.LINKEDFINREF,
					T1.NEXTUSERID,
					T1.PRIORITY,
					T24.POLICYDESC  LOVDESCSTEPPOLICYNAME,
					T1.GRCMINRATE,
					T1.GRCMAXRATE,
					T1.RPYMINRATE,
					T1.RPYMAXRATE,
					T1.DEVIATIONAPPROVAL,
					T1.MANUALSCHEDULE,
					T1.TAKEOVERFINANCE,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.SUPPLEMENTRENT,
					T1.INCREASEDCOST,
					T1.CREDITINSAMT,
					T1.ROLLOVERFRQ,
					T1.NEXTROLLOVERDATE,
					T27.CUSTSTSDESCRIPTION,
					T1.SHARIASTATUS,
					T1.INITIATEDATE,
					T1.FINPREAPPROVEDREF,
					T1.MMAID,
					T1.ACCOUNTSOFFICER,
					T1.FEEACCOUNTID,
					T1.FINCANCELAC,
					T28.DEALERNAME  LOVDESCACCOUNTSOFFICER,
					T28.DEALERCITY  LOVDESCSOURCECITY,
					T1.DSACODE,
					T30.ROFFICERDESC  DSACODEDESC,
					T1.TDSAPPLICABLE,
					T1.MANDATEID,
					T1.DROPLINEFRQ,
					T1.FIRSTDROPLINEDATE,
					T1.PFTSERVICINGODLIMIT,
					T1.INSURANCEAMT,
					T1.DEDUCTINSDISB,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.CALROUNDINGMODE,
					T1.ALWMULTIDISB,
					T1.APPLICATIONNO,
					T1.REFERRALID,
					T33.ROFFICERDESC  REFERRALIDDESC,
					T1.DMACODE,
					T34.ROFFICERDESC  DMACODEDESC,
					T1.SALESDEPARTMENT,
					T35.GENDEPTDESC  SALESDEPARTMENTDESC,
					T1.QUICKDISB,
					T1.WIFREFERENCE,
					T1.UNPLANEMIHLOCKPERIOD,
					T1.UNPLANEMICPZ,
					T1.REAGECPZ,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.AVAILEDUNPLANEMI,
					T1.AVAILEDREAGEH,
					T1.BPIAMOUNT,
					T1.DEDUCTFEEDISB,
					T1.RVWRATEAPPLFOR,
					T1.SCHCALONRVW,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.PROMOTIONCODE,
					T1.RESTRUCTURELOAN,
					T1.OLDFINREFERENCE,
					T1.REAGEBUCKET,
					T1.FINCATEGORY,
					T1.PRODUCTCATEGORY,
					T1.ROUNDINGTARGET,
					T36.ENTITYCODE  LOVDESCENTITYCODE,
					T1.ELIGIBILITYMETHOD,
					T38.FIELDCODEVALUE  LOVELIGIBILITYMETHOD,
					T38.VALUEDESC       LOVDESCELIGIBILITYMETHOD,
					T1.EMPLOYEENAME,
					T37.ROFFICERDESC  EMPLOYEENAMEDESC,
					T1.SAMPLINGREQUIRED,
					T1.LEGALREQUIRED,
					T1.GRCMAXAMOUNT,
					T1.CONNECTOR,
					T40.DEALERNAME  CONNECTORCODE,
					T40.DEALERCITY  CONNECTORDESC,
					T1.ADVANCEEMI,
					T1.ADVEMITERMS,
					T1.BPIPFTDAYSBASIS,
					T1.FIXEDRATETENOR,
					T1.FIXEDTENORRATE,
					T12.BRANCHTEL  FINBRANCHCONTACT,
					T1.PROCESSATTRIBUTES,
					T1.BUSINESSVERTICAL,
					BV.CODE         BUSINESSVERTICALCODE,
					BV.DESCRIPTION  BUSINESSVERTICALDESC,
					T1.GRCADVTYPE,
					T1.GRCADVTERMS,
					T1.ADVTYPE,
					T1.ADVTERMS,
					T1.ADVSTAGE,
					T1.TDSPERCENTAGE,
					T1.TDSSTARTDATE,
					T1.TDSENDDATE,
					T1.TDSLIMITAMT,
					T1.VANREQ,
					T1.VANCODE,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING
					FROM FINANCEMAIN T1
					JOIN RMTFINANCETYPES T7 ON T1.FINTYPE = T7.FINTYPE
					LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH = T12.BRANCHCODE
					LEFT JOIN FINPFTDETAILS T17 ON T17.FINREFERENCE = T1.FINREFERENCE
					LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY = T24.POLICYCODE
					LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS = T27.CUSTSTSCODE
					LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
					LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE = T30.ROFFICERCODE
					LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID = T33.ROFFICERCODE
					LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE = T34.ROFFICERCODE
					LEFT JOIN RMTGENDEPARTMENTS T35 ON T1.SALESDEPARTMENT = T35.GENDEPARTMENT
					LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION = T36.DIVISIONCODE
					LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME = T37.ROFFICERCODE
					LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE = 'ELGMETHOD'
					LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE = T39.LOANPURPOSECODE
					LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
					LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
					WHERE NOT (EXISTS (SELECT 1 FROM FINANCEMAIN_TEMP WHERE FINANCEMAIN_TEMP.FINREFERENCE = T1.FINREFERENCE ))
	</createView>
	</changeSet>

	<changeSet id="25_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_restore_dependencies ('plf', 'financemain_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="26_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_save_and_drop_dependencies ('plf', 'financemain_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="26" author="satyanarayana.g">
		<createView viewName="FINANCEMAIN_TVIEW" replaceIfExists="true">
			SELECT T1.FINREFERENCE,
					T1.INVESTMENTREF,
					T1.NUMBEROFTERMS,
					T1.GRCPERIODENDDATE,
					T1.ALLOWGRCPERIOD,
					T1.GRACEBASERATE,
					T1.GRACESPECIALRATE,
					T1.GRCPFTRATE,
					T1.GRCPFTFRQ,
					T1.NEXTGRCPFTDATE,
					T1.ALLOWGRCPFTRVW,
					T1.GRCPFTRVWFRQ,
					T1.NEXTGRCPFTRVWDATE,
					T1.ALLOWGRCCPZ,
					T1.GRCCPZFRQ,
					T1.NEXTGRCCPZDATE,
					T1.REPAYBASERATE,
					T1.REPAYSPECIALRATE,
					T1.REPAYPROFITRATE,
					T1.REPAYFRQ,
					T1.NEXTREPAYDATE,
					T1.REPAYPFTFRQ,
					T1.NEXTREPAYPFTDATE,
					T1.ALLOWREPAYRVW,
					T1.REPAYRVWFRQ,
					T1.NEXTREPAYRVWDATE,
					T1.ALLOWREPAYCPZ,
					T1.REPAYCPZFRQ,
					T1.NEXTREPAYCPZDATE,
					T1.MATURITYDATE,
					T1.CPZATGRACEEND,
					T1.DOWNPAYMENT,
					T1.GRACEFLATAMOUNT,
					T1.REQREPAYAMOUNT,
					T1.TOTALPROFIT,
					T1.TOTALCPZ,
					T1.TOTALGROSSPFT,
					T1.TOTALGROSSGRCPFT,
					T1.TOTALGRACEPFT,
					T1.TOTALGRACECPZ,
					T1.GRCRATEBASIS,
					T1.REPAYRATEBASIS,
					T1.FINTYPE,
					T1.FINREMARKS,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.REQMATURITY,
					T1.CALTERMS,
					T1.CALMATURITY,
					T1.FIRSTREPAY,
					T1.LASTREPAY,
					T1.FINSTARTDATE,
					T1.FINAMOUNT,
					T1.FINAMOUNT + T1.FEECHARGEAMT - T1.DOWNPAYMENT  LOVDESCFINANCINGAMOUNT,
					T1.FINREPAYMENTAMOUNT,
					T1.CUSTID,
					T1.DEFFERMENTS,
					T1.PLANDEFERCOUNT,
					T1.FINBRANCH,
					T1.FINSOURCEID,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.ALLOWEDDEFFRQCHANGE,
					T1.AVAILEDDEFFRQCHANGE,
					T1.RECALTYPE,
					T1.FINASSETVALUE,
					T1.DISBACCOUNTID,
					T1.REPAYACCOUNTID,
					T1.FINISACTIVE,
					T1.LIMITVALID,
					T1.OVERRIDELIMIT,
					T1.SECURITYDEPOSIT,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T7.FINTYPEDESC   LOVDESCFINTYPENAME,
					T7.FINMAXAMOUNT  LOVDESCFINMAXAMT,
					T7.FINMINAMOUNT  LOVDESCFINMINAMOUNT,
					T1.MINDOWNPAYPERC,
					T7.FINISALWDIFFERMENT  LOVDESCFINALWDEFERMENT,
					T7.FINISDWPAYREQUIRED  LOVDESCDWNPAYREQ,
					T7.FINMAXDIFFERMENT   LOVDESCFINMAXDIFFERMENT,
					T12.BRANCHDESC        LOVDESCFINBRANCHNAME,
					T12.BRANCHPROVINCE    FINBRANCHPROVINCECODE,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.LASTREPAYRVWDATE,
					T1.LASTREPAYCPZDATE,
					T1.ALLOWGRCREPAY,
					T1.GRCSCHDMTHD,
					T1.GRCMARGIN,
					T1.REPAYMARGIN,
					T1.FINCURRASSETVALUE,
					T1.FINCOMMITMENTREF,
					T1.FINLIMITREF,
					T1.DEPRECIATIONFRQ,
					T1.FINCONTRACTDATE,
					T1.NEXTDEPDATE,
					T1.LASTDEPDATE,
					T1.FINACCOUNT,
					T1.FINCUSTPFTACCOUNT,
					T17.ACRTILLLBD  LOVDESCACCRUEDTILLLBD,
					T7.FINRVWRATEAPPLFOR,
					T1.TOTALREPAYAMT,
					T1.CLOSINGSTATUS,
					T1.FINAPPROVEDDATE,
					T1.FEECHARGEAMT,
					T1.BLACKLISTED,
					T1.FINREPAYPFTONFRQ,
					T1.ANUALIZEDPERCRATE,
					T1.EFFECTIVERATEOFRETURN,
					T1.MIGRATEDFINANCE,
					T1.SCHEDULEMAINTAINED,
					T1.SCHEDULEREGENERATED,
					T1.FINPURPOSE,
					T39.LOANPURPOSEDESC  LOVDESCFINPURPOSENAME,
					T1.FINSTATUS,
					T1.FINSTSREASON,
					T1.INITIATEUSER,
					T1.BANKNAME,
					T1.IBAN,
					T1.ACCOUNTTYPE,
					T1.DDAREFERENCENO,
					T7.FINSCHEDULEON  LOVDESCFINSCHEDULEON,
					T1.CUSTDSR,
					T1.JOINTACCOUNT,
					T1.JOINTCUSTID,
					T1.DOWNPAYBANK,
					T1.DOWNPAYSUPL,
					T1.DOWNPAYACCOUNT,
					T1.SECURITYCOLLATERAL,
					T1.APPROVED,
					T1.DISCREPANCY,
					T1.LIMITAPPROVED,
					T1.GRACETERMS,
					T7.FINDIVISION  LOVDESCFINDIVISION,
					T1.RCDMAINTAINSTS,
					T1.FINREPAYMETHOD,
					T1.GRCPROFITDAYSBASIS,
					T1.STEPFINANCE,
					T1.STEPTYPE,
					T1.STEPPOLICY,
					T1.ALWMANUALSTEPS,
					T1.NOOFSTEPS,
					T1.LINKEDFINREF,
					T1.NEXTUSERID,
					T1.PRIORITY,
					T24.POLICYDESC  LOVDESCSTEPPOLICYNAME,
					T1.GRCMINRATE,
					T1.GRCMAXRATE,
					T1.RPYMINRATE,
					T1.RPYMAXRATE,
					T1.DEVIATIONAPPROVAL,
					T1.MANUALSCHEDULE,
					T1.TAKEOVERFINANCE,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.SUPPLEMENTRENT,
					T1.INCREASEDCOST,
					T1.CREDITINSAMT,
					T1.ROLLOVERFRQ,
					T1.NEXTROLLOVERDATE,
					T27.CUSTSTSDESCRIPTION,
					T1.SHARIASTATUS,
					T1.INITIATEDATE,
					T1.FINPREAPPROVEDREF,
					T1.MMAID,
					T1.ACCOUNTSOFFICER,
					T1.FEEACCOUNTID,
					T1.FINCANCELAC,
					T28.DEALERNAME  LOVDESCACCOUNTSOFFICER,
					T28.DEALERCITY  LOVDESCSOURCECITY,
					T1.DSACODE,
					T30.ROFFICERDESC  DSACODEDESC,
					T1.TDSAPPLICABLE,
					T1.MANDATEID,
					T1.DROPLINEFRQ,
					T1.FIRSTDROPLINEDATE,
					T1.PFTSERVICINGODLIMIT,
					T1.INSURANCEAMT,
					T1.DEDUCTINSDISB,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.CALROUNDINGMODE,
					T1.ALWMULTIDISB,
					T1.APPLICATIONNO,
					T1.REFERRALID,
					T33.ROFFICERDESC  REFERRALIDDESC,
					T1.DMACODE,
					T34.ROFFICERDESC  DMACODEDESC,
					T1.SALESDEPARTMENT,
					T35.GENDEPTDESC  SALESDEPARTMENTDESC,
					T1.QUICKDISB,
					T1.WIFREFERENCE,
					T1.UNPLANEMIHLOCKPERIOD,
					T1.UNPLANEMICPZ,
					T1.REAGECPZ,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.AVAILEDUNPLANEMI,
					T1.AVAILEDREAGEH,
					T1.BPIAMOUNT,
					T1.DEDUCTFEEDISB,
					T1.RVWRATEAPPLFOR,
					T1.SCHCALONRVW,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.PROMOTIONCODE,
					T1.RESTRUCTURELOAN,
					T1.OLDFINREFERENCE,
					T1.REAGEBUCKET,
					T1.FINCATEGORY,
					T1.PRODUCTCATEGORY,
					T1.ROUNDINGTARGET,
					T36.ENTITYCODE  LOVDESCENTITYCODE,
					T1.ELIGIBILITYMETHOD,
					T38.FIELDCODEVALUE  LOVELIGIBILITYMETHOD,
					T38.VALUEDESC       LOVDESCELIGIBILITYMETHOD,
					T1.EMPLOYEENAME,
					T37.ROFFICERDESC  EMPLOYEENAMEDESC,
					T1.SAMPLINGREQUIRED,
					T1.LEGALREQUIRED,
					T1.GRCMAXAMOUNT,
					T1.CONNECTOR,
					T40.DEALERNAME  CONNECTORCODE,
					T40.DEALERCITY  CONNECTORDESC,
					T1.ADVANCEEMI,
					T1.ADVEMITERMS,
					T1.BPIPFTDAYSBASIS,
					T1.FIXEDRATETENOR,
					T1.FIXEDTENORRATE,
					T12.BRANCHTEL  FINBRANCHCONTACT,
					T1.PROCESSATTRIBUTES,
					T1.BUSINESSVERTICAL,
					BV.CODE         BUSINESSVERTICALCODE,
					BV.DESCRIPTION  BUSINESSVERTICALDESC,
					T1.GRCADVTYPE,
					T1.GRCADVTERMS,
					T1.ADVTYPE,
					T1.ADVTERMS,
					T1.ADVSTAGE,
					T1.TDSPERCENTAGE,
					T1.TDSSTARTDATE,
					T1.TDSENDDATE,
					T1.TDSLIMITAMT,
					T1.VANREQ,
					T1.VANCODE,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING
					FROM FINANCEMAIN_TEMP T1
					JOIN RMTFINANCETYPES T7 ON T1.FINTYPE = T7.FINTYPE
					LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH = T12.BRANCHCODE
					LEFT JOIN FINPFTDETAILS T17 ON T17.FINREFERENCE = T1.FINREFERENCE
					LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY = T24.POLICYCODE
					LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS = T27.CUSTSTSCODE
					LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
					LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE = T30.ROFFICERCODE
					LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID = T33.ROFFICERCODE
					LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE = T34.ROFFICERCODE
					LEFT JOIN RMTGENDEPARTMENTS T35 ON T1.SALESDEPARTMENT = T35.GENDEPARTMENT
					LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION = T36.DIVISIONCODE
					LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME = T37.ROFFICERCODE
					LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE = 'ELGMETHOD'
					LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE = T39.LOANPURPOSECODE
					LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
					LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
	</createView>
	</changeSet>

	<changeSet id="26_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_restore_dependencies ('plf', 'financemain_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="27_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_save_and_drop_dependencies ('plf', 'financemain_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="27" author="satyanarayana.g">
		<createView viewName="FINANCEMAIN_AVIEW" replaceIfExists="true">
			SELECT T1.FINREFERENCE,
					T1.INVESTMENTREF,
					T1.NUMBEROFTERMS,
					T1.GRCPERIODENDDATE,
					T1.ALLOWGRCPERIOD,
					T1.GRACEBASERATE,
					T1.GRACESPECIALRATE,
					T1.GRCPFTRATE,
					T1.GRCPFTFRQ,
					T1.NEXTGRCPFTDATE,
					T1.ALLOWGRCPFTRVW,
					T1.GRCPFTRVWFRQ,
					T1.NEXTGRCPFTRVWDATE,
					T1.ALLOWGRCCPZ,
					T1.GRCCPZFRQ,
					T1.NEXTGRCCPZDATE,
					T1.REPAYBASERATE,
					T1.REPAYSPECIALRATE,
					T1.REPAYPROFITRATE,
					T1.REPAYFRQ,
					T1.NEXTREPAYDATE,
					T1.REPAYPFTFRQ,
					T1.NEXTREPAYPFTDATE,
					T1.ALLOWREPAYRVW,
					T1.REPAYRVWFRQ,
					T1.NEXTREPAYRVWDATE,
					T1.ALLOWREPAYCPZ,
					T1.REPAYCPZFRQ,
					T1.NEXTREPAYCPZDATE,
					T1.MATURITYDATE,
					T1.CPZATGRACEEND,
					T1.DOWNPAYMENT,
					T1.GRACEFLATAMOUNT,
					T1.REQREPAYAMOUNT,
					T1.TOTALPROFIT,
					T1.TOTALCPZ,
					T1.TOTALGROSSPFT,
					T1.TOTALGROSSGRCPFT,
					T1.TOTALGRACEPFT,
					T1.TOTALGRACECPZ,
					T1.GRCRATEBASIS,
					T1.REPAYRATEBASIS,
					T1.FINTYPE,
					T1.FINREMARKS,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.REQMATURITY,
					T1.CALTERMS,
					T1.CALMATURITY,
					T1.FIRSTREPAY,
					T1.LASTREPAY,
					T1.FINSTARTDATE,
					T1.FINAMOUNT,
					T1.FINAMOUNT + T1.FEECHARGEAMT - T1.DOWNPAYMENT  LOVDESCFINANCINGAMOUNT,
					T1.FINREPAYMENTAMOUNT,
					T1.CUSTID,
					T1.DEFFERMENTS,
					T1.PLANDEFERCOUNT,
					T1.FINBRANCH,
					T1.FINSOURCEID,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.ALLOWEDDEFFRQCHANGE,
					T1.AVAILEDDEFFRQCHANGE,
					T1.RECALTYPE,
					T1.FINASSETVALUE,
					T1.DISBACCOUNTID,
					T1.REPAYACCOUNTID,
					T1.FINISACTIVE,
					T1.LIMITVALID,
					T1.OVERRIDELIMIT,
					T1.SECURITYDEPOSIT,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T7.FINTYPEDESC   LOVDESCFINTYPENAME,
					T7.FINMAXAMOUNT  LOVDESCFINMAXAMT,
					T7.FINMINAMOUNT  LOVDESCFINMINAMOUNT,
					T1.MINDOWNPAYPERC,
					T7.FINISALWDIFFERMENT  LOVDESCFINALWDEFERMENT,
					T7.FINISDWPAYREQUIRED  LOVDESCDWNPAYREQ,
					T7.FINMAXDIFFERMENT    LOVDESCFINMAXDIFFERMENT,
					T12.BRANCHDESC         LOVDESCFINBRANCHNAME,
					T12.BRANCHPROVINCE     FINBRANCHPROVINCECODE,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.LASTREPAYRVWDATE,
					T1.LASTREPAYCPZDATE,
					T1.ALLOWGRCREPAY,
					T1.GRCSCHDMTHD,
					T1.GRCMARGIN,
					T1.REPAYMARGIN,
					T1.FINCURRASSETVALUE,
					T1.FINCOMMITMENTREF,
					T1.FINLIMITREF,
					T1.DEPRECIATIONFRQ,
					T1.FINCONTRACTDATE,
					T1.NEXTDEPDATE,
					T1.LASTDEPDATE,
					T1.FINACCOUNT,
					T1.FINCUSTPFTACCOUNT,
					T17.ACRTILLLBD  LOVDESCACCRUEDTILLLBD,
					T7.FINRVWRATEAPPLFOR,
					T1.TOTALREPAYAMT,
					T1.CLOSINGSTATUS,
					T1.FINAPPROVEDDATE,
					T1.FEECHARGEAMT,
					T1.BLACKLISTED,
					T1.FINREPAYPFTONFRQ,
					T1.ANUALIZEDPERCRATE,
					T1.EFFECTIVERATEOFRETURN,
					T1.MIGRATEDFINANCE,
					T1.SCHEDULEMAINTAINED,
					T1.SCHEDULEREGENERATED,
					T1.FINPURPOSE,
					T39.LOANPURPOSEDESC  LOVDESCFINPURPOSENAME,
					T1.FINSTATUS,
					T1.FINSTSREASON,
					T1.INITIATEUSER,
					T1.BANKNAME,
					T1.IBAN,
					T1.ACCOUNTTYPE,
					T1.DDAREFERENCENO,
					T7.FINSCHEDULEON  LOVDESCFINSCHEDULEON,
					T1.CUSTDSR,
					T1.JOINTACCOUNT,
					T1.JOINTCUSTID,
					T1.DOWNPAYBANK,
					T1.DOWNPAYSUPL,
					T1.DOWNPAYACCOUNT,
					T1.SECURITYCOLLATERAL,
					T1.APPROVED,
					T1.DISCREPANCY,
					T1.LIMITAPPROVED,
					T1.GRACETERMS,
					T7.FINDIVISION  LOVDESCFINDIVISION,
					T1.RCDMAINTAINSTS,
					T1.FINREPAYMETHOD,
					T1.GRCPROFITDAYSBASIS,
					T1.STEPFINANCE,
					T1.STEPTYPE,
					T1.STEPPOLICY,
					T1.ALWMANUALSTEPS,
					T1.NOOFSTEPS,
					T1.LINKEDFINREF,
					T1.NEXTUSERID,
					T1.PRIORITY,
					T24.POLICYDESC  LOVDESCSTEPPOLICYNAME,
					T1.GRCMINRATE,
					T1.GRCMAXRATE,
					T1.RPYMINRATE,
					T1.RPYMAXRATE,
					T1.DEVIATIONAPPROVAL,
					T1.MANUALSCHEDULE,
					T1.TAKEOVERFINANCE,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.SUPPLEMENTRENT,
					T1.INCREASEDCOST,
					T1.CREDITINSAMT,
					T1.ROLLOVERFRQ,
					T1.NEXTROLLOVERDATE,
					T27.CUSTSTSDESCRIPTION,
					T1.SHARIASTATUS,
					T1.INITIATEDATE,
					T1.FINPREAPPROVEDREF,
					T1.MMAID,
					T1.ACCOUNTSOFFICER,
					T1.FEEACCOUNTID,
					T1.FINCANCELAC,
					T28.DEALERNAME  LOVDESCACCOUNTSOFFICER,
					T28.DEALERCITY  LOVDESCSOURCECITY,
					T1.DSACODE,
					T30.ROFFICERDESC  DSACODEDESC,
					T1.TDSAPPLICABLE,
					T1.MANDATEID,
					T1.DROPLINEFRQ,
					T1.FIRSTDROPLINEDATE,
					T1.PFTSERVICINGODLIMIT,
					T1.INSURANCEAMT,
					T1.DEDUCTINSDISB,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.CALROUNDINGMODE,
					T1.ALWMULTIDISB,
					T1.APPLICATIONNO,
					T1.REFERRALID,
					T33.ROFFICERDESC  REFERRALIDDESC,
					T1.DMACODE,
					T34.ROFFICERDESC  DMACODEDESC,
					T1.SALESDEPARTMENT,
					T35.GENDEPTDESC  SALESDEPARTMENTDESC,
					T1.QUICKDISB,
					T1.WIFREFERENCE,
					T1.UNPLANEMIHLOCKPERIOD,
					T1.UNPLANEMICPZ,
					T1.REAGECPZ,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.AVAILEDUNPLANEMI,
					T1.AVAILEDREAGEH,
					T1.BPIAMOUNT,
					T1.DEDUCTFEEDISB,
					T1.RVWRATEAPPLFOR,
					T1.SCHCALONRVW,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.PROMOTIONCODE,
					T1.RESTRUCTURELOAN,
					T1.OLDFINREFERENCE,
					T1.REAGEBUCKET,
					T1.FINCATEGORY,
					T1.PRODUCTCATEGORY,
					T1.ROUNDINGTARGET,
					T36.ENTITYCODE  LOVDESCENTITYCODE,
					T1.ELIGIBILITYMETHOD,
					T38.FIELDCODEVALUE  LOVELIGIBILITYMETHOD,
					T38.VALUEDESC       LOVDESCELIGIBILITYMETHOD,
					T1.EMPLOYEENAME,
					T37.ROFFICERDESC  EMPLOYEENAMEDESC,
					T1.SAMPLINGREQUIRED,
					T1.LEGALREQUIRED,
					T1.GRCMAXAMOUNT,
					T1.CONNECTOR,
					T40.DEALERNAME  CONNECTORCODE,
					T40.DEALERCITY  CONNECTORDESC,
					T1.ADVANCEEMI,
					T1.ADVEMITERMS,
					T1.BPIPFTDAYSBASIS,
					T1.FIXEDRATETENOR,
					T1.FIXEDTENORRATE,
					T12.BRANCHTEL  FINBRANCHCONTACT,
					T1.PROCESSATTRIBUTES,
					T1.BUSINESSVERTICAL,
					BV.CODE         BUSINESSVERTICALCODE,
					BV.DESCRIPTION  BUSINESSVERTICALDESC,
					T1.GRCADVTYPE,
					T1.GRCADVTERMS,
					T1.ADVTYPE,
					T1.ADVTERMS,
					T1.ADVSTAGE,
					T1.TDSPERCENTAGE,
					T1.TDSSTARTDATE,
					T1.TDSENDDATE,
					T1.TDSLIMITAMT,
					T1.VANREQ,
					T1.VANCODE,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING
					FROM FINANCEMAIN T1
					JOIN RMTFINANCETYPES T7 ON T1.FINTYPE = T7.FINTYPE
					LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH = T12.BRANCHCODE
					LEFT JOIN FINPFTDETAILS T17 ON T17.FINREFERENCE = T1.FINREFERENCE
					LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY = T24.POLICYCODE
					LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS = T27.CUSTSTSCODE
					LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
					LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE = T30.ROFFICERCODE
					LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID = T33.ROFFICERCODE
					LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE = T34.ROFFICERCODE
					LEFT JOIN RMTGENDEPARTMENTS T35 ON T1.SALESDEPARTMENT = T35.GENDEPARTMENT
					LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION = T36.DIVISIONCODE
					LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME = T37.ROFFICERCODE
					LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE = 'ELGMETHOD'
					LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE = T39.LOANPURPOSECODE
					LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
					LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
	</createView>
	</changeSet>

	<changeSet id="27_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_restore_dependencies ('plf', 'financemain_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="28_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_save_and_drop_dependencies ('plf', 'rejectfinancemain_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="28" author="satyanarayana.g">
		<createView viewName="REJECTFINANCEMAIN_VIEW" replaceIfExists="true">
			SELECT F.FINREFERENCE,
					T.FINCATEGORY  LOVDESCPRODUCTCODENAME,
					F.FINTYPE,
					F.FINBRANCH,
					F.FINSTARTDATE,
					F.MATURITYDATE,
					F.NUMBEROFTERMS,
					F.FINCCY,
					F.FINAMOUNT,
					F.FINAMOUNT - F.DOWNPAYMENT + F.FEECHARGEAMT + F.INSURANCEAMT  FINANCINGAMOUNT,
					F.FEECHARGEAMT,
					F.INSURANCEAMT,
					F.FINAMOUNT - F.DOWNPAYMENT + F.FEECHARGEAMT + F.INSURANCEAMT - F.FINREPAYMENTAMOUNT  CURFINAMOUNT,
					F.DOWNPAYMENT,
					F.FINCURRASSETVALUE,
					F.FINASSETVALUE,
					F.ALLOWDRAWINGPOWER,
					F.ALLOWREVOLVING,
					C.CUSTCIF  LOVDESCCUSTCIF
					FROM REJECTFINANCEMAIN F
					LEFT JOIN CUSTOMERS C ON F.CUSTID = C.CUSTID
					LEFT JOIN RMTFINANCETYPES T ON F.FINTYPE = T.FINTYPE
	</createView>
	</changeSet>

	<changeSet id="28_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_restore_dependencies ('plf', 'rejectfinancemain_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="29" author="Saikiran.v">
		<createTable tableName="Taxtype">
			<column name="id" type="bigint">
				<constraints primaryKey="true" nullable="false" />
			</column>
			<column name="name" type="varchar(20)" />
			<column name="description" type="varchar(50)" />
			<column name="active" type="boolean" />
		</createTable>
	</changeSet>

	<changeSet id="30" author="Saikiran.v">
		<sql>
			<![CDATA[
				UPDATE Taxtype Set active = 0;		
			]]>
		</sql>
	</changeSet>

	<changeSet id="31" author="Saikiran.v" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE Taxtype ADD CONSTRAINT DF_Taxtype_active DEFAULT 0 FOR active;
			]]>
		</sql>
	</changeSet>

	<changeSet id="32" author="Saikiran.v" dbms="postgresql, oracle">
		<addDefaultValue columnName="active" tableName="Taxtype" defaultValue="0" />
	</changeSet>

	<changeSet id="33" author="Saikiran.v">
		<createIndex tableName="Taxtype" indexName="IX_Taxtype_Name" unique="true">
			<column name="Name" />
		</createIndex>
	</changeSet>

	<changeSet id="34" author="Saikiran.v">
		<sql>
			<![CDATA[
				INSERT INTO TAXTYPE VALUES(1,'CGST','CGST',1);
				INSERT INTO TAXTYPE VALUES(2,'SGST','SGST',1);
				INSERT INTO TAXTYPE VALUES(3,'IGST','IGST',1);
				INSERT INTO TAXTYPE VALUES(4,'UGST','UGST',1);
				INSERT INTO TAXTYPE VALUES(5,'CESS','CESS',1);
			]]>
		</sql>
	</changeSet>

	<changeSet id="35" author="Saikiran.v">
		<sql>
			<![CDATA[
				INSERT INTO ErrorDetails VALUES('65039','EN','E','To Calculate CESS on {0}, {1}, {2} and {3} combination Must be Exist.','','Approved','','','','','',0,current_timestamp,1000,0);
			]]>
		</sql>
	</changeSet>
</databaseChangeLog>