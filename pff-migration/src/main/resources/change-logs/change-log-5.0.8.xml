<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

	<property name="add.schema" value="dbo." dbms="mssql" />
	<property name="add.schema" value="" dbms="oracle" />
	<property name="add.schema" value="" dbms="postgresql" />
	<property name="call.substr" value="substring" dbms="mssql" />
	<property name="call.substr" value="substr" dbms="oracle" />
	<property name="call.substr" value="substring" dbms="postgresql" />
	<property name="call.auditdb" value="PLFAVANSEQC.." dbms="mssql" />
	<property name="call.auditdb" value=" " dbms="oracle" />
	<property name="call.concatenate" value="+" dbms="mssql" />
	<property name="call.concatenate" value="||" dbms="oracle" />
	<property name="call.concatenate" value="||" dbms="postgresql" />
	<property name="call.collength" value="LEN" dbms="mssql" />
	<property name="call.collength" value="LENGTH" dbms="oracle" />
	<property name="call.collength" value="LENGTH" dbms="postgresql" />
	<property name="call.date" value="getdate()" dbms="mssql" />
	<property name="call.date" value="sysdate" dbms="oracle" />
	<property name="call.date" value="now()" dbms="postgresql" />

	<changeSet id="pre_run_for_pgp" author="Adarsh" runAlways="true" dbms="postgresql">
		<sql>
			Set search_path = plf,public,pg_catalog;
		</sql>
	</changeSet>

	<changeSet id="01" author="satyanarayana.g">
		<addColumn tableName="RMTFinanceTypes">
			<column name="AllowRevolving" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="02" author="satyanarayana.g">
		<addColumn tableName="RMTFinanceTypes_temp">
			<column name="AllowRevolving" type="boolean" />
		</addColumn>
	</changeSet>
	<changeSet id="03" author="satyanarayana.g">
		<sql>
			<![CDATA[
				UPDATE RMTFinanceTypes Set AllowRevolving = 0;
				UPDATE RMTFinanceTypes_Temp Set AllowRevolving = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="04" author="satyanarayana.g" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE RMTFINANCETYPES ADD CONSTRAINT DF_RMTFINANCETYPES_ALWRG DEFAULT 0 FOR ALLOWREVOLVING;
				ALTER TABLE RMTFINANCETYPES_TEMP ADD CONSTRAINT DF_RMTFINANCETYPES_TEMP_ALWRG DEFAULT 0 FOR ALLOWREVOLVING;
			]]>
		</sql>
	</changeSet>

	<changeSet id="05" author="satyanarayana.g" dbms="postgresql, oracle">
		<addDefaultValue columnName="AllowRevolving" tableName="RMTFinanceTypes" defaultValue="0" />
		<addDefaultValue columnName="AllowRevolving" tableName="RMTFinanceTypes_Temp" defaultValue="0" />
	</changeSet>

	<changeSet id="06_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="06" author="satyanarayana.g">
		<createView viewName="RMTFINANCETYPES_AVIEW" replaceIfExists="true">
			SELECT T1.FINTYPE,
					T1.FINCATEGORY,
					T1.FINTYPEDESC,
					T1.FINCCY,
					T1.FINDAYSCALTYPE,
					T1.FINACTYPE,
					T1.FINCONTINGENTACTYPE,
					T1.FINISGENREF,
					T1.FINMAXAMOUNT,
					T1.FINMINAMOUNT,
					T1.FINISOPENNEWFINAC,
					T1.FINDFTSTMTFRQ,
					T1.FINISALWMD,
					T1.FINSCHDMTHD,
					T1.FINISALWGRACE,
					T1.FINHISTRETENSION,
					T1.EQUALREPAYMENT,
					T1.FINRATETYPE,
					T1.FINBASERATE,
					T1.FINSPLRATE,
					T1.FININTRATE,
					T1.FINMINRATE,
					T1.FINMAXRATE,
					T1.FINDFTINTFRQ,
					T1.FINISINTCPZ,
					T1.FINCPZFRQ,
					T1.FINISRVWALW,
					T1.FINRVWFRQ,
					T1.FINGRCRATETYPE,
					T1.FINGRCBASERATE,
					T1.FINGRCSPLRATE,
					T1.FINGRCINTRATE,
					T1.FINGRCMINRATE,
					T1.FINGRCMAXRATE,
					T1.FINGRCDFTINTFRQ,
					T1.FINGRCISINTCPZ,
					T1.FINGRCCPZFRQ,
					T1.FINGRCISRVWALW,
					T1.FINGRCRVWFRQ,
					T1.FINMINTERM,
					T1.FINMAXTERM,
					T1.FINDFTTERMS,
					T1.FINRPYFRQ,
					T1.FINREPAYMETHOD,
					T1.FINISALWPARTIALRPY,
					T1.FINISALWDIFFERMENT,
					T1.FINMAXDIFFERMENT,
					T1.FINISALWEARLYRPY,
					T1.FINISALWEARLYSETTLE,
					T1.FINODRPYTRIES,
					T1.FINEARLYPAYRULE,
					T1.FINEARLYSETTLERULE,
					T1.FINDEPOSITRESTRICTEDTO,
					T1.FINAEBUYORINCEPTION,
					T1.FINAESELLORMATURITY,
					T1.FINISACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.STEPFINANCE,
					T1.STEPPINGMANDATORY,
					T1.ALWMANUALSTEPS,
					T1.ALWDSTEPPOLICIES,
					T1.DFTSTEPPOLICY,
					T4.ACTYPEDESC LOVDESCFINCONTINGENTACTYPENAME,
					T5.ACTYPEDESC LOVDESCFINACTYPENAME,
					T1.FINISDWPAYREQUIRED,
					T1.FINRVWRATEAPPLFOR,
					T1.FINALWRATECHANGEANYDATE,
					T1.FINISINTCPZATGRCEND,
					T1.FINELGRULECODE,
					T1.LIMITELGRULECODE,
					T1.FINSCHCALCODEONRVW,
					T1.ALWPLANDEFERMENT,
					T1.PLANDEFERCOUNT,
					T1.FINASSETTYPE,
					T1.PFTPAYACTYPE,
					T1.FINISOPENPFTPAYACC,
					T31.ACTYPEDESC LOVDESCPFTPAYACTYPENAME,
					T1.FINISALWGRCREPAY,
					T1.FINGRCSCHDMTHD,
					T1.FINGRCMARGIN,
					T1.FINMARGIN,
					T1.FINSCHEDULEON,
					T1.FINGRCSCHEDULEON,
					T1.FINCOMMITMENTREQ,
					T1.FINCOLLATERALREQ,
					T1.FINDEPRECIATIONREQ,
					T1.FINDEPRECIATIONFRQ,
					T1.FINBANKCONTINGENTACTYPE,
					T1.FINPROVISIONACTYPE,
					T38.ACTYPEDESC LOVDESCFINBANKCONTACTYPENAME,
					T39.ACTYPEDESC LOVDESCFINPROVISIONACTYPENAME,
					T1.ALLOWRIAINVESTMENT,
					T1.OVERRIDELIMIT,
					T1.LIMITREQUIRED,
					T1.FINCOMMITMENTOVRRIDE,
					T1.FINCOLLATERALOVRRIDE,
					T1.FINPFTUNCHANGED,
					T1.APPLYODPENALTY,
					T1.ODINCGRCDAYS,
					T1.ODCHARGETYPE,
					T1.ODGRACEDAYS,
					T1.ODCHARGECALON,
					T1.ODCHARGEAMTORPERC,
					T1.ODALLOWWAIVER,
					T1.ODMAXWAIVERPERC,
					T1.FINDIVISION,
					T48.DIVISIONCODEDESC LOVDESCFINDIVISIONNAME,
					T48.ENTITYCODE LOVDESCENTITYCODE,
					T1.FINSUSPACTYPE,
					T49.ACTYPEDESC LOVDESCFINSUSPACTYPENAME,
					T1.PRODUCT,
					T1.STARTDATE,
					T1.ENDDATE,
					T1.ALLOWDOWNPAYPGM,
					T1.REMARKS,
					T1.ALWEARLYPAYMETHODS,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.ALWADVANCERENT,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.ROLLOVERFINANCE,
					T1.ROLLOVERFRQ,
					T1.DOWNPAYRULE,
					T59.RULECODE DOWNPAYRULECODE,
					T59.RULECODEDESC DOWNPAYRULEDESC,
					T1.FINSUSPTRIGGER,
					T1.FINSUSPREMARKS,
					T1.ALWMULTIPARTYDISB,
					T1.COLLATERALTYPE,
					T1.TDSAPPLICABLE,
					T1.MANUALSCHEDULE,
					T1.APPLYGRCPRICING,
					T1.GRCPRICINGMETHOD,
					T1.APPLYRPYPRICING,
					T1.RPYPRICINGMETHOD,
					T1.RPYHIERARCHY,
					T67.RULECODE GRCPRICINGMETHODDESC,
					T68.RULECODE RPYPRICINGMETHODDESC,
					T1.DROPLINEOD,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.FINREPAYPFTONFRQ,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PFTDUESCHON,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.UNPLANEMIHLOCKPERIOD,
					T1.UNPLANEMICPZ,
					T1.REAGECPZ,
					T1.FDDLOCKPERIOD,
					T1.ALWDRPYMETHODS,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.ROUNDINGMODE,
					T1.ROUNDINGTARGET,
					T1.FREQUENCYDAYS,
					T1.QUICKDISB,
					T1.ALWREAGE,
					T1.ALWUNPLANEMIHOLIDAY,
					T1.ALWMAXDISBCHECKREQ,
					T1.FINTYPEDESC LOVDESCPROMOFINTYPEDESC,
					T1.PROFITCENTERID,
					T69.PROFITCENTERCODE,
					T69.PROFITCENTERDESC,
					T1.PRODUCTCATEGORY,
					T2.PRODUCTDESC FINCATEGORYDESC,
					T1.DEVELOPERFINANCE,
					T1.COSTOFFUNDS,
					T1.CHEQUECAPTUREREQ,
					T1.FINLTVCHECK,
					T1.PARTIALLYSECURED,
					T1.ALWADVEMI,
					T1.ADVEMIMINTERMS,
					T1.ADVEMIMAXTERMS,
					T1.ADVEMIDFTTERMS,
					T1.ADVEMISCHDMTHD,
					T1.BPIPFTDAYSBASIS,
					T1.ELIGIBILITYMETHODS,
					T1.ALWHYBRIDRATE,
					T1.FIXEDRATETENOR,
					T1.ODMINCAPAMOUNT,
					T1.ODRULECODE,
					T1.ALWZEROINTACC,
					T1.AUTOREJECTIONDAYS,
					T1.TAXNOMAND,
					T1.PUTCALLREQUIRED,
					T1.GRCADVINTERSETREQ,
					T1.GRCADVTYPE,
					T1.GRCADVMINTERMS,
					T1.GRCADVMAXTERMS,
					T1.GRCADVDEFAULTTERMS,
					T1.ADVINTERSETREQ,
					T1.ADVTYPE,
					T1.ADVMINTERMS,
					T1.ADVMAXTERMS,
					T1.ADVDEFAULTTERMS,
					T1.ADVSTAGE,
					T1.DSFREQ,
					T1.CASHCOLLATERALREQ,
					T1.TDSALLOWTOMODIFY,
					T1.TDSAPPLICABLETO,
					T1.ALWVAN,
					T1.VANALLOCATIONMETHOD,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING
					FROM RMTFINANCETYPES T1
					LEFT JOIN BMTPRODUCT T2 ON T1.FINCATEGORY = T2.PRODUCTCODE
					LEFT JOIN RMTACCOUNTTYPES T4 ON T1.FINCONTINGENTACTYPE = T4.ACTYPE
					LEFT JOIN RMTACCOUNTTYPES T38 ON T1.FINBANKCONTINGENTACTYPE = T38.ACTYPE
					LEFT JOIN RMTACCOUNTTYPES T39 ON T1.FINPROVISIONACTYPE = T39.ACTYPE
					LEFT JOIN RMTACCOUNTTYPES T5 ON T1.FINACTYPE = T5.ACTYPE
					LEFT JOIN RMTACCOUNTTYPES T31 ON T1.PFTPAYACTYPE = T31.ACTYPE
					LEFT JOIN SMTDIVISIONDETAIL T48 ON T1.FINDIVISION = T48.DIVISIONCODE
					LEFT JOIN RMTACCOUNTTYPES T49 ON T1.FINSUSPACTYPE = T49.ACTYPE
					LEFT JOIN RULES T59 ON T1.DOWNPAYRULE = T59.RULEID LEFT JOIN RULES T67 ON T1.GRCPRICINGMETHOD = T67.RULEID
					LEFT JOIN RULES T68 ON T1.RPYPRICINGMETHOD = T68.RULEID
					LEFT JOIN PROFITCENTERS T69 ON T69.PROFITCENTERID = T1.PROFITCENTERID
	</createView>
	</changeSet>

	<changeSet id="6_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_restore_dependencies ('plf', 'rmtfinancetypes_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="7_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_orgview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="7" author="satyanarayana.g">
		<createView viewName="RMTFINANCETYPES_ORGVIEW " replaceIfExists="true">	 
			SELECT T1.FINTYPE,
					T1.FINCATEGORY,
					T1.FINTYPEDESC,
					T1.FINCCY,
					T1.FINDAYSCALTYPE,
					T1.FINACTYPE,
					T1.FINCONTINGENTACTYPE,
					T1.FINISGENREF,
					T1.FINMAXAMOUNT,
					T1.FINMINAMOUNT,
					T1.FINISOPENNEWFINAC,
					T1.FINISALWMD,
					T1.FINSCHDMTHD,
					T1.FINISALWGRACE,
					T1.EQUALREPAYMENT,
					T1.FINRATETYPE,
					T1.FINBASERATE,
					T1.FINSPLRATE,
					T1.FININTRATE,
					T1.FINMINRATE,
					T1.FINMAXRATE,
					T1.FINDFTINTFRQ,
					T1.FINISINTCPZ,
					T1.FINCPZFRQ,
					T1.FINISRVWALW,
					T1.FINRVWFRQ,
					T1.FINGRCRATETYPE,
					T1.FINGRCBASERATE,
					T1.FINGRCSPLRATE,
					T1.FINGRCINTRATE,
					T1.FINGRCMINRATE,
					T1.FINGRCMAXRATE,
					T1.FINGRCDFTINTFRQ,
					T1.FINGRCISINTCPZ,
					T1.FINGRCCPZFRQ,
					T1.FINGRCISRVWALW,
					T1.FINGRCRVWFRQ,
					T1.FINMINTERM,
					T1.FINMAXTERM,
					T1.FINDFTTERMS,
					T1.FINRPYFRQ,
					T1.FINREPAYMETHOD,
					T1.FINISALWDIFFERMENT,
					T1.FINMAXDIFFERMENT,
					T1.FINISACTIVE,
					T1.STEPFINANCE,
					T1.STEPPINGMANDATORY,
					T1.ALWMANUALSTEPS,
					T1.ALWDSTEPPOLICIES,
					T1.DFTSTEPPOLICY,
					T1.FINISDWPAYREQUIRED,
					T1.FINRVWRATEAPPLFOR,
					T1.FINALWRATECHANGEANYDATE,
					T1.FINISINTCPZATGRCEND,
					T1.FINSCHCALCODEONRVW,
					T1.ALWPLANDEFERMENT,
					T1.PLANDEFERCOUNT,
					T1.PFTPAYACTYPE,
					T1.FINISOPENPFTPAYACC,
					T1.FINISALWGRCREPAY,
					T1.FINGRCSCHDMTHD,
					T1.FINGRCMARGIN,
					T1.FINMARGIN,
					T1.FINCOMMITMENTREQ,
					T1.FINCOLLATERALREQ,
					T1.FINDEPRECIATIONREQ,
					T1.FINDEPRECIATIONFRQ,
					T1.FINBANKCONTINGENTACTYPE,
					T1.FINPROVISIONACTYPE,
					T1.ALLOWRIAINVESTMENT,
					T1.OVERRIDELIMIT,
					T1.LIMITREQUIRED,
					T1.FINCOMMITMENTOVRRIDE,
					T1.FINCOLLATERALOVRRIDE,
					T1.FINREPAYPFTONFRQ,
					T1.FINPFTUNCHANGED,
					T1.APPLYODPENALTY,
					T1.ODINCGRCDAYS,
					T1.ODCHARGETYPE,
					T1.ODGRACEDAYS,
					T1.ODCHARGECALON,
					T1.ODCHARGEAMTORPERC,
					T1.ODALLOWWAIVER,
					T1.ODMAXWAIVERPERC,
					T1.FINDIVISION,
					T3.DIVISIONCODEDESC LOVDESCFINDIVISIONNAME,
					T1.FINSUSPACTYPE,
					T1.PRODUCT,
					T1.STARTDATE,
					T1.ENDDATE,
					T1.ALLOWDOWNPAYPGM,
					T1.FINTYPEDESC LOVDESCPROMOFINTYPEDESC,
					T1.REMARKS,
					T4.POLICYDESC LOVDESCDFTSTEPPOLICYNAME,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.ALWADVANCERENT,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.ROLLOVERFINANCE,
					T1.ROLLOVERFRQ,
					T1.DOWNPAYRULE,
					T1.ALWMULTIPARTYDISB,
					T1.COLLATERALTYPE,
					T1.TDSAPPLICABLE,
					T5.RULECODE DOWNPAYRULECODE,
					T5.RULECODEDESC DOWNPAYRULEDESC,
					T1.APPLYGRCPRICING,
					T1.APPLYRPYPRICING,
					T6.RULECODE GRCPRICINGMETHODDESC,
					T7.RULECODE RPYPRICINGMETHODDESC,
					T1.DROPLINEOD,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T4.STEPTYPE DFTSTEPPOLICYTYPE,
					T1.MANUALSCHEDULE,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PFTDUESCHON,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.UNPLANEMIHLOCKPERIOD,
					T1.UNPLANEMICPZ,
					T1.REAGECPZ,
					T1.FDDLOCKPERIOD,
					T1.ALWDRPYMETHODS,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.ROUNDINGMODE,
					T1.ROUNDINGTARGET,
					T1.FREQUENCYDAYS,
					T1.QUICKDISB,
					T1.ALWREAGE,
					T1.ALWUNPLANEMIHOLIDAY,
					T1.ALWMAXDISBCHECKREQ,
					T1.PRODUCTCATEGORY,
					T1.RPYHIERARCHY,
					T1.DEVELOPERFINANCE,
					T3.ENTITYCODE LOVDESCENTITYCODE,
					T8.ENTITYDESC LOVDESCENTITYDESC,
					T1.COSTOFFUNDS,
					T1.CHEQUECAPTUREREQ,
					T1.FINLTVCHECK,
					T1.PARTIALLYSECURED,
					T1.ALWADVEMI,
					T1.ADVEMIMINTERMS,
					T1.ADVEMIMAXTERMS,
					T1.ADVEMIDFTTERMS,
					T1.ADVEMISCHDMTHD,
					T1.BPIPFTDAYSBASIS,
					T1.ELIGIBILITYMETHODS,
					T1.ALWHYBRIDRATE,
					T1.FIXEDRATETENOR,
					T1.ODMINCAPAMOUNT,
					T1.ODRULECODE,
					T1.ALWZEROINTACC,
					T1.FINISALWPARTIALRPY,
					T1.AUTOREJECTIONDAYS,
					T1.TAXNOMAND,
					T1.PUTCALLREQUIRED,
					T1.GRCADVINTERSETREQ,
					T1.GRCADVTYPE,
					T1.GRCADVMINTERMS,
					T1.GRCADVMAXTERMS,
					T1.GRCADVDEFAULTTERMS,
					T1.ADVINTERSETREQ,
					T1.ADVTYPE,
					T1.ADVMINTERMS,
					T1.ADVMAXTERMS,
					T1.ADVDEFAULTTERMS,
					T1.ADVSTAGE,
					T1.DSFREQ,
					T1.CASHCOLLATERALREQ,
					T1.ALWEARLYPAYMETHODS,
					T1.TDSALLOWTOMODIFY,
					T1.TDSAPPLICABLETO,
					T1.ALWVAN,
					T1.VANALLOCATIONMETHOD,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING
					FROM RMTFINANCETYPES T1
					JOIN SMTDIVISIONDETAIL T3 ON T1.FINDIVISION = T3.DIVISIONCODE
					LEFT JOIN STEPPOLICYHEADER T4 ON T1.DFTSTEPPOLICY = T4.POLICYCODE
					LEFT JOIN RULES T5 ON T1.DOWNPAYRULE = T5.RULEID
					LEFT JOIN RULES T6 ON T1.GRCPRICINGMETHOD = T6.RULEID
					LEFT JOIN RULES T7 ON T1.RPYPRICINGMETHOD = T7.RULEID
					LEFT JOIN ENTITY T8 ON T3.ENTITYCODE = T8.ENTITYCODE	 
		</createView>
	</changeSet>

	<changeSet id="7_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_restore_dependencies ('plf', 'rmtfinancetypes_orgview');
					
			]]>
		</sql>
	</changeSet>

	<changeSet id="8_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="8" author="satyanarayana.g">
		<createView viewName="RMTFINANCETYPES_VIEW " replaceIfExists="true">	 	 
	
			SELECT T1.FINTYPE,
				  T1.FINCATEGORY,
				  T1.FINTYPEDESC,
				  T1.FINCCY,
				  T1.FINDAYSCALTYPE,
				  T1.FINACTYPE,
				  T1.FINCONTINGENTACTYPE,
				  T1.FINISGENREF,
				  T1.FINMAXAMOUNT,
				  T1.FINMINAMOUNT,
				  T1.FINISOPENNEWFINAC,
				  T1.FINDFTSTMTFRQ,
				  T1.FINISALWMD,
				  T1.FINSCHDMTHD,
				  T1.FINISALWGRACE,
				  T1.FINHISTRETENSION,
				  T1.EQUALREPAYMENT,
				  T1.FINRATETYPE,
				  T1.FINBASERATE,
				  T1.FINSPLRATE,
				  T1.FININTRATE,
				  T1.FINMINRATE,
				  T1.FINMAXRATE,
				  T1.FINDFTINTFRQ,
				  T1.FINISINTCPZ,
				  T1.FINCPZFRQ,
				  T1.FINISRVWALW,
				  T1.FINRVWFRQ,
				  T1.FINGRCRATETYPE,
				  T1.FINGRCBASERATE,
				  T1.FINGRCSPLRATE,
				  T1.FINGRCINTRATE,
				  T1.FINGRCMINRATE,
				  T1.FINGRCMAXRATE,
				  T1.FINGRCDFTINTFRQ,
				  T1.FINGRCISINTCPZ,
				  T1.FINGRCCPZFRQ,
				  T1.FINGRCISRVWALW,
				  T1.FINGRCRVWFRQ,
				  T1.FINMINTERM,
				  T1.FINMAXTERM,
				  T1.FINDFTTERMS,
				  T1.FINRPYFRQ,
				  T1.FINREPAYMETHOD,
				  T1.FINISALWPARTIALRPY,
				  T1.FINISALWDIFFERMENT,
				  T1.FINMAXDIFFERMENT,
				  T1.FINISALWEARLYRPY,
				  T1.FINISALWEARLYSETTLE,
				  T1.FINODRPYTRIES,
				  T1.FINEARLYPAYRULE,
				  T1.FINEARLYSETTLERULE,
				  T1.FINDEPOSITRESTRICTEDTO,
				  T1.FINAEBUYORINCEPTION,
				  T1.FINAESELLORMATURITY,
				  T1.FINISACTIVE,
				  T1.VERSION,
				  T1.LASTMNTBY,
				  T1.LASTMNTON,
				  T1.RECORDSTATUS,
				  T1.ROLECODE,
				  T1.NEXTROLECODE,
				  T1.TASKID,
				  T1.NEXTTASKID,
				  T1.RECORDTYPE,
				  T1.WORKFLOWID,
				  T1.STEPFINANCE,
				  T1.STEPPINGMANDATORY,
				  T1.ALWMANUALSTEPS,
				  T1.ALWDSTEPPOLICIES,
				  T1.DFTSTEPPOLICY,
				  T4.ACTYPEDESC LOVDESCFINCONTINGENTACTYPENAME,
				  T5.ACTYPEDESC LOVDESCFINACTYPENAME,
				  T1.FINISDWPAYREQUIRED,
				  T1.FINRVWRATEAPPLFOR,
				  T1.FINALWRATECHANGEANYDATE,
				  T1.FINISINTCPZATGRCEND,
				  T1.FINELGRULECODE,
				  T1.LIMITELGRULECODE,
				  T1.FINSCHCALCODEONRVW,
				  T1.ALWPLANDEFERMENT,
				  T1.PLANDEFERCOUNT,
				  T1.FINASSETTYPE,
				  T1.PFTPAYACTYPE,
				  T1.FINISOPENPFTPAYACC,
				  T31.ACTYPEDESC LOVDESCPFTPAYACTYPENAME,
				  T1.FINISALWGRCREPAY,
				  T1.FINGRCSCHDMTHD,
				  T1.FINGRCMARGIN,
				  T1.FINMARGIN,
				  T1.FINSCHEDULEON,
				  T1.FINGRCSCHEDULEON,
				  T1.FINCOMMITMENTREQ,
				  T1.FINCOLLATERALREQ,
				  T1.FINDEPRECIATIONREQ,
				  T1.FINDEPRECIATIONFRQ,
				  T1.FINBANKCONTINGENTACTYPE,
				  T1.FINPROVISIONACTYPE,
				  T38.ACTYPEDESC LOVDESCFINBANKCONTACTYPENAME,
				  T39.ACTYPEDESC LOVDESCFINPROVISIONACTYPENAME,
				  T1.ALLOWRIAINVESTMENT,
				  T1.OVERRIDELIMIT,
				  T1.LIMITREQUIRED,
				  T1.FINCOMMITMENTOVRRIDE,
				  T1.FINCOLLATERALOVRRIDE,
				  T1.FINPFTUNCHANGED,
				  T1.APPLYODPENALTY,
				  T1.ODINCGRCDAYS,
				  T1.ODCHARGETYPE,
				  T1.ODGRACEDAYS,
				  T1.ODCHARGECALON,
				  T1.ODCHARGEAMTORPERC,
				  T1.ODALLOWWAIVER,
				  T1.ODMAXWAIVERPERC,
				  T1.FINDIVISION,
				  T48.DIVISIONCODEDESC LOVDESCFINDIVISIONNAME,
				  T48.ENTITYCODE LOVDESCENTITYCODE,
				  T1.FINSUSPACTYPE,
				  T49.ACTYPEDESC LOVDESCFINSUSPACTYPENAME,
				  T1.PRODUCT,
				  T1.STARTDATE,
				  T1.ENDDATE,
				  T1.ALLOWDOWNPAYPGM,
				  T1.FINTYPEDESC LOVDESCPROMOFINTYPEDESC,
				  T1.REMARKS,
				  T1.ALWEARLYPAYMETHODS,
				  T1.PASTDUEPFTCALMTHD,
				  T1.PASTDUEPFTMARGIN,
				  T1.ALWADVANCERENT,
				  T1.GRCADVBASERATE,
				  T1.GRCADVMARGIN,
				  T1.GRCADVPFTRATE,
				  T1.RPYADVBASERATE,
				  T1.RPYADVMARGIN,
				  T1.RPYADVPFTRATE,
				  T1.ROLLOVERFINANCE,
				  T1.ROLLOVERFRQ,
				  T1.DOWNPAYRULE,
				  T59.RULECODE DOWNPAYRULECODE,
				  T59.RULECODEDESC DOWNPAYRULEDESC,
				  T1.FINSUSPTRIGGER,
				  T1.FINSUSPREMARKS,
				  T1.ALWMULTIPARTYDISB,
				  T1.COLLATERALTYPE,
				  T1.TDSAPPLICABLE,
				  T1.MANUALSCHEDULE,
				  T1.APPLYGRCPRICING,
				  T1.GRCPRICINGMETHOD,
				  T1.APPLYRPYPRICING,
				  T1.RPYPRICINGMETHOD,
				  T1.RPYHIERARCHY,
				  T67.RULECODE GRCPRICINGMETHODDESC,
				  T68.RULECODE RPYPRICINGMETHODDESC,
				  T1.DROPLINEOD,
				  T1.DROPPINGMETHOD,
				  T1.RATECHGANYDAY,
				  T1.FINREPAYPFTONFRQ,
				  T1.ALWBPI,
				  T1.BPITREATMENT,
				  T1.PFTDUESCHON,
				  T1.PLANEMIHALW,
				  T1.PLANEMIHMETHOD,
				  T1.PLANEMIHMAXPERYEAR,
				  T1.PLANEMIHMAX,
				  T1.PLANEMIHLOCKPERIOD,
				  T1.PLANEMICPZ,
				  T1.UNPLANEMIHLOCKPERIOD,
				  T1.UNPLANEMICPZ,
				  T1.REAGECPZ,
				  T1.FDDLOCKPERIOD,
				  T1.ALWDRPYMETHODS,
				  T1.MAXUNPLANNEDEMI,
				  T1.MAXREAGEHOLIDAYS,
				  T1.ROUNDINGMODE,
				  T1.ROUNDINGTARGET,
				  T1.FREQUENCYDAYS,
				  T1.QUICKDISB,
				  T1.ALWMAXDISBCHECKREQ,
				  T1.ALWREAGE,
				  T1.ALWUNPLANEMIHOLIDAY,
				  T1.PROFITCENTERID,
				  T69.PROFITCENTERCODE,
				  T69.PROFITCENTERDESC,
				  T1.PRODUCTCATEGORY,
				  T2.PRODUCTDESC FINCATEGORYDESC,
				  T1.DEVELOPERFINANCE,
				  T1.COSTOFFUNDS,
				  T1.CHEQUECAPTUREREQ,
				  T1.FINLTVCHECK,
				  T1.PARTIALLYSECURED,
				  T1.ALWADVEMI,
				  T1.ADVEMIMINTERMS,
				  T1.ADVEMIMAXTERMS,
				  T1.ADVEMIDFTTERMS,
				  T1.ADVEMISCHDMTHD,
				  T1.BPIPFTDAYSBASIS,
				  T1.ELIGIBILITYMETHODS,
				  T1.ALWHYBRIDRATE,
				  T1.FIXEDRATETENOR,
				  T1.ODMINCAPAMOUNT,
				  T1.ODRULECODE,
				  T1.ALWZEROINTACC,
				  T1.AUTOREJECTIONDAYS,
				  T1.TAXNOMAND,
				  T1.PUTCALLREQUIRED,
				  T1.GRCADVINTERSETREQ,
				  T1.GRCADVTYPE,
				  T1.GRCADVMINTERMS,
				  T1.GRCADVMAXTERMS,
				  T1.GRCADVDEFAULTTERMS,
				  T1.ADVINTERSETREQ,
				  T1.ADVTYPE,
				  T1.ADVMINTERMS,
				  T1.ADVMAXTERMS,
				  T1.ADVDEFAULTTERMS,
				  T1.ADVSTAGE,
				  T1.DSFREQ,
				  T1.CASHCOLLATERALREQ,
				  T1.TDSALLOWTOMODIFY,
				  T1.TDSAPPLICABLETO,
				  T1.ALWVAN,
				  T1.VANALLOCATIONMETHOD,
				  T1.ALLOWDRAWINGPOWER,
				  T1.ALLOWREVOLVING
				FROM RMTFINANCETYPES_TEMP T1
				LEFT JOIN BMTPRODUCT T2 ON T1.FINCATEGORY = T2.PRODUCTCODE
				LEFT JOIN RMTACCOUNTTYPES T4 ON T1.FINCONTINGENTACTYPE = T4.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T38 ON T1.FINBANKCONTINGENTACTYPE = T38.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T39 ON T1.FINPROVISIONACTYPE = T39.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T5 ON T1.FINACTYPE = T5.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T31 ON T1.PFTPAYACTYPE = T31.ACTYPE
				LEFT JOIN SMTDIVISIONDETAIL T48 ON T1.FINDIVISION = T48.DIVISIONCODE
				LEFT JOIN RMTACCOUNTTYPES T49 ON T1.FINSUSPACTYPE = T49.ACTYPE
				LEFT JOIN RULES T59 ON T1.DOWNPAYRULE = T59.RULEID
				LEFT JOIN RULES T67 ON T1.GRCPRICINGMETHOD = T67.RULEID
				LEFT JOIN RULES T68 ON T1.RPYPRICINGMETHOD = T68.RULEID
				LEFT JOIN PROFITCENTERS T69 ON T69.PROFITCENTERID = T1.PROFITCENTERID
				UNION ALL
				SELECT T1.FINTYPE,
				  T1.FINCATEGORY,
				  T1.FINTYPEDESC,
				  T1.FINCCY,
				  T1.FINDAYSCALTYPE,
				  T1.FINACTYPE,
				  T1.FINCONTINGENTACTYPE,
				  T1.FINISGENREF,
				  T1.FINMAXAMOUNT,
				  T1.FINMINAMOUNT,
				  T1.FINISOPENNEWFINAC,
				  T1.FINDFTSTMTFRQ,
				  T1.FINISALWMD,
				  T1.FINSCHDMTHD,
				  T1.FINISALWGRACE,
				  T1.FINHISTRETENSION,
				  T1.EQUALREPAYMENT,
				  T1.FINRATETYPE,
				  T1.FINBASERATE,
				  T1.FINSPLRATE,
				  T1.FININTRATE,
				  T1.FINMINRATE,
				  T1.FINMAXRATE,
				  T1.FINDFTINTFRQ,
				  T1.FINISINTCPZ,
				  T1.FINCPZFRQ,
				  T1.FINISRVWALW,
				  T1.FINRVWFRQ,
				  T1.FINGRCRATETYPE,
				  T1.FINGRCBASERATE,
				  T1.FINGRCSPLRATE,
				  T1.FINGRCINTRATE,
				  T1.FINGRCMINRATE,
				  T1.FINGRCMAXRATE,
				  T1.FINGRCDFTINTFRQ,
				  T1.FINGRCISINTCPZ,
				  T1.FINGRCCPZFRQ,
				  T1.FINGRCISRVWALW,
				  T1.FINGRCRVWFRQ,
				  T1.FINMINTERM,
				  T1.FINMAXTERM,
				  T1.FINDFTTERMS,
				  T1.FINRPYFRQ,
				  T1.FINREPAYMETHOD,
				  T1.FINISALWPARTIALRPY,
				  T1.FINISALWDIFFERMENT,
				  T1.FINMAXDIFFERMENT,
				  T1.FINISALWEARLYRPY,
				  T1.FINISALWEARLYSETTLE,
				  T1.FINODRPYTRIES,
				  T1.FINEARLYPAYRULE,
				  T1.FINEARLYSETTLERULE,
				  T1.FINDEPOSITRESTRICTEDTO,
				  T1.FINAEBUYORINCEPTION,
				  T1.FINAESELLORMATURITY,
				  T1.FINISACTIVE,
				  T1.VERSION,
				  T1.LASTMNTBY,
				  T1.LASTMNTON,
				  T1.RECORDSTATUS,
				  T1.ROLECODE,
				  T1.NEXTROLECODE,
				  T1.TASKID,
				  T1.NEXTTASKID,
				  T1.RECORDTYPE,
				  T1.WORKFLOWID,
				  T1.STEPFINANCE,
				  T1.STEPPINGMANDATORY,
				  T1.ALWMANUALSTEPS,
				  T1.ALWDSTEPPOLICIES,
				  T1.DFTSTEPPOLICY,
				  T4.ACTYPEDESC LOVDESCFINCONTINGENTACTYPENAME,
				  T5.ACTYPEDESC LOVDESCFINACTYPENAME,
				  T1.FINISDWPAYREQUIRED,
				  T1.FINRVWRATEAPPLFOR,
				  T1.FINALWRATECHANGEANYDATE,
				  T1.FINISINTCPZATGRCEND,
				  T1.FINELGRULECODE,
				  T1.LIMITELGRULECODE,
				  T1.FINSCHCALCODEONRVW,
				  T1.ALWPLANDEFERMENT,
				  T1.PLANDEFERCOUNT,
				  T1.FINASSETTYPE,
				  T1.PFTPAYACTYPE,
				  T1.FINISOPENPFTPAYACC,
				  T31.ACTYPEDESC LOVDESCPFTPAYACTYPENAME,
				  T1.FINISALWGRCREPAY,
				  T1.FINGRCSCHDMTHD,
				  T1.FINGRCMARGIN,
				  T1.FINMARGIN,
				  T1.FINSCHEDULEON,
				  T1.FINGRCSCHEDULEON,
				  T1.FINCOMMITMENTREQ,
				  T1.FINCOLLATERALREQ,
				  T1.FINDEPRECIATIONREQ,
				  T1.FINDEPRECIATIONFRQ,
				  T1.FINBANKCONTINGENTACTYPE,
				  T1.FINPROVISIONACTYPE,
				  T38.ACTYPEDESC LOVDESCFINBANKCONTACTYPENAME,
				  T39.ACTYPEDESC LOVDESCFINPROVISIONACTYPENAME,
				  T1.ALLOWRIAINVESTMENT,
				  T1.OVERRIDELIMIT,
				  T1.LIMITREQUIRED,
				  T1.FINCOMMITMENTOVRRIDE,
				  T1.FINCOLLATERALOVRRIDE,
				  T1.FINPFTUNCHANGED,
				  T1.APPLYODPENALTY,
				  T1.ODINCGRCDAYS,
				  T1.ODCHARGETYPE,
				  T1.ODGRACEDAYS,
				  T1.ODCHARGECALON,
				  T1.ODCHARGEAMTORPERC,
				  T1.ODALLOWWAIVER,
				  T1.ODMAXWAIVERPERC,
				  T1.FINDIVISION,
				  T48.DIVISIONCODEDESC LOVDESCFINDIVISIONNAME,
				  T48.ENTITYCODE LOVDESCENTITYCODE,
				  T1.FINSUSPACTYPE,
				  T49.ACTYPEDESC LOVDESCFINSUSPACTYPENAME,
				  T1.PRODUCT,
				  T1.STARTDATE,
				  T1.ENDDATE,
				  T1.ALLOWDOWNPAYPGM,
				  T1.FINTYPEDESC LOVDESCPROMOFINTYPEDESC,
				  T1.REMARKS,
				  T1.ALWEARLYPAYMETHODS,
				  T1.PASTDUEPFTCALMTHD,
				  T1.PASTDUEPFTMARGIN,
				  T1.ALWADVANCERENT,
				  T1.GRCADVBASERATE,
				  T1.GRCADVMARGIN,
				  T1.GRCADVPFTRATE,
				  T1.RPYADVBASERATE,
				  T1.RPYADVMARGIN,
				  T1.RPYADVPFTRATE,
				  T1.ROLLOVERFINANCE,
				  T1.ROLLOVERFRQ,
				  T1.DOWNPAYRULE,
				  T59.RULECODE DOWNPAYRULECODE,
				  T59.RULECODEDESC DOWNPAYRULEDESC,
				  T1.FINSUSPTRIGGER,
				  T1.FINSUSPREMARKS,
				  T1.ALWMULTIPARTYDISB,
				  T1.COLLATERALTYPE,
				  T1.TDSAPPLICABLE,
				  T1.MANUALSCHEDULE,
				  T1.APPLYGRCPRICING,
				  T1.GRCPRICINGMETHOD,
				  T1.APPLYRPYPRICING,
				  T1.RPYPRICINGMETHOD,
				  T1.RPYHIERARCHY,
				  T67.RULECODE GRCPRICINGMETHODDESC,
				  T68.RULECODE RPYPRICINGMETHODDESC,
				  T1.DROPLINEOD,
				  T1.DROPPINGMETHOD,
				  T1.RATECHGANYDAY,
				  T1.FINREPAYPFTONFRQ,
				  T1.ALWBPI,
				  T1.BPITREATMENT,
				  T1.PFTDUESCHON,
				  T1.PLANEMIHALW,
				  T1.PLANEMIHMETHOD,
				  T1.PLANEMIHMAXPERYEAR,
				  T1.PLANEMIHMAX,
				  T1.PLANEMIHLOCKPERIOD,
				  T1.PLANEMICPZ,
				  T1.UNPLANEMIHLOCKPERIOD,
				  T1.UNPLANEMICPZ,
				  T1.REAGECPZ,
				  T1.FDDLOCKPERIOD,
				  T1.ALWDRPYMETHODS,
				  T1.MAXUNPLANNEDEMI,
				  T1.MAXREAGEHOLIDAYS,
				  T1.ROUNDINGMODE,
				  T1.ROUNDINGTARGET,
				  T1.FREQUENCYDAYS,
				  T1.QUICKDISB,
				  T1.ALWMAXDISBCHECKREQ,
				  T1.ALWREAGE,
				  T1.ALWUNPLANEMIHOLIDAY,
				  T1.PROFITCENTERID,
				  T69.PROFITCENTERCODE,
				  T69.PROFITCENTERDESC,
				  T1.PRODUCTCATEGORY,
				  T2.PRODUCTDESC FINCATEGORYDESC,
				  T1.DEVELOPERFINANCE,
				  T1.COSTOFFUNDS,
				  T1.CHEQUECAPTUREREQ,
				  T1.FINLTVCHECK,
				  T1.PARTIALLYSECURED,
				  T1.ALWADVEMI,
				  T1.ADVEMIMINTERMS,
				  T1.ADVEMIMAXTERMS,
				  T1.ADVEMIDFTTERMS,
				  T1.ADVEMISCHDMTHD,
				  T1.BPIPFTDAYSBASIS,
				  T1.ELIGIBILITYMETHODS,
				  T1.ALWHYBRIDRATE,
				  T1.FIXEDRATETENOR,
				  T1.ODMINCAPAMOUNT,
				  T1.ODRULECODE,
				  T1.ALWZEROINTACC,
				  T1.AUTOREJECTIONDAYS,
				  T1.TAXNOMAND,
				  T1.PUTCALLREQUIRED,
				  T1.GRCADVINTERSETREQ,
				  T1.GRCADVTYPE,
				  T1.GRCADVMINTERMS,
				  T1.GRCADVMAXTERMS,
				  T1.GRCADVDEFAULTTERMS,
				  T1.ADVINTERSETREQ,
				  T1.ADVTYPE,
				  T1.ADVMINTERMS,
				  T1.ADVMAXTERMS,
				  T1.ADVDEFAULTTERMS,
				  T1.ADVSTAGE,
				  T1.DSFREQ,
				  T1.CASHCOLLATERALREQ,
				  T1.TDSALLOWTOMODIFY,
				  T1.TDSAPPLICABLETO,
				  T1.ALWVAN,
				  T1.VANALLOCATIONMETHOD,
				  T1.ALLOWDRAWINGPOWER,
				  T1.ALLOWREVOLVING
				FROM RMTFINANCETYPES T1
				LEFT JOIN BMTPRODUCT T2 ON T1.FINCATEGORY = T2.PRODUCTCODE
				LEFT JOIN RMTACCOUNTTYPES T4 ON T1.FINCONTINGENTACTYPE = T4.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T38 ON T1.FINBANKCONTINGENTACTYPE = T38.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T39 ON T1.FINPROVISIONACTYPE = T39.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T5 ON T1.FINACTYPE = T5.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T31 ON T1.PFTPAYACTYPE = T31.ACTYPE
				LEFT JOIN SMTDIVISIONDETAIL T48 ON T1.FINDIVISION = T48.DIVISIONCODE
				LEFT JOIN RMTACCOUNTTYPES T49 ON T1.FINSUSPACTYPE = T49.ACTYPE
				LEFT JOIN RULES T59 ON T1.DOWNPAYRULE = T59.RULEID
				LEFT JOIN RULES T67 ON T1.GRCPRICINGMETHOD = T67.RULEID
				LEFT JOIN RULES T68 ON T1.RPYPRICINGMETHOD = T68.RULEID
				LEFT JOIN PROFITCENTERS T69 ON T69.PROFITCENTERID = T1.PROFITCENTERID
				WHERE NOT (EXISTS (SELECT 1 EXPR1 FROM RMTFINANCETYPES_TEMP WHERE RMTFINANCETYPES_TEMP.FINTYPE = T1.FINTYPE))			  
		  </createView>
	</changeSet>

	<changeSet id="8_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_restore_dependencies ('plf', 'rmtfinancetypes_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="10" author="satyanarayana.g">
		<addColumn tableName="FINANCEMAIN">
			<column name="AllowRevolving" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="12" author="satyanarayana.g">
		<addColumn tableName="FINANCEMAIN_TEMP">
			<column name="AllowRevolving" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="13" author="satyanarayana.g">
		<sql>
			<![CDATA[
				UPDATE FINANCEMAIN Set AllowRevolving = 0;
				UPDATE FINANCEMAIN_Temp Set AllowRevolving = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="14" author="satyanarayana.g" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE FINANCEMAIN ADD CONSTRAINT DF_FINANCEMAIN_ALWRVLVING DEFAULT 0 FOR ALLOWREVOLVING;
				ALTER TABLE FINANCEMAIN_TEMP ADD CONSTRAINT DF_FINANCEMAIN_TEMP_ALWRVLING DEFAULT 0 FOR ALLOWREVOLVING;
			]]>
		</sql>
	</changeSet>

	<changeSet id="15" author="satyanarayana.g" dbms="postgresql, oracle">
		<addDefaultValue columnName="AllowRevolving" tableName="FINANCEMAIN" defaultValue="0" />
		<addDefaultValue columnName="AllowRevolving" tableName="FINANCEMAIN_Temp" defaultValue="0" />
	</changeSet>

	<changeSet id="17" author="satyanarayana.g">
		<addColumn tableName="FINANCEMAIN_PA">
			<column name="AllowRevolving" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="18" author="satyanarayana.g">
		<sql>
			<![CDATA[
				UPDATE FINANCEMAIN_PA Set AllowRevolving = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="19" author="satyanarayana.g" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE FINANCEMAIN_PA ADD CONSTRAINT DF_FINANCEMAIN_ALLOWREVOLVING DEFAULT 0 FOR ALLOWREVOLVING;
			]]>
		</sql>
	</changeSet>

	<changeSet id="20" author="satyanarayana.g" dbms="postgresql, oracle">
		<addDefaultValue columnName="AllowRevolving" tableName="FINANCEMAIN_PA" defaultValue="0" />
	</changeSet>

	<changeSet id="22" author="satyanarayana.g">
		<addColumn tableName="REJECTFINANCEMAIN">
			<column name="AllowRevolving" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="23" author="satyanarayana.g">
		<sql>
			<![CDATA[
				UPDATE REJECTFINANCEMAIN Set AllowRevolving = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="24" author="satyanarayana.g" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE REJECTFINANCEMAIN ADD CONSTRAINT DF_REJECTFINANCEMAIN_ALWRVLNG DEFAULT 0 FOR ALLOWREVOLVING;
			]]>
		</sql>
	</changeSet>

	<changeSet id="25" author="satyanarayana.g" dbms="postgresql, oracle">
		<addDefaultValue columnName="AllowRevolving" tableName="REJECTFINANCEMAIN" defaultValue="0" />
	</changeSet>

	<changeSet id="26_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_save_and_drop_dependencies ('plf', 'financemain_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="26" author="satyanarayana.g">
		<createView viewName="FINANCEMAIN_VIEW" replaceIfExists="true">
			SELECT T1.FINREFERENCE,
					T1.INVESTMENTREF,
					T1.NUMBEROFTERMS,
					T1.GRCPERIODENDDATE,
					T1.ALLOWGRCPERIOD,
					T1.GRACEBASERATE,
					T1.GRACESPECIALRATE,
					T1.GRCPFTRATE,
					T1.GRCPFTFRQ,
					T1.NEXTGRCPFTDATE,
					T1.ALLOWGRCPFTRVW,
					T1.GRCPFTRVWFRQ,
					T1.NEXTGRCPFTRVWDATE,
					T1.ALLOWGRCCPZ,
					T1.GRCCPZFRQ,
					T1.NEXTGRCCPZDATE,
					T1.REPAYBASERATE,
					T1.REPAYSPECIALRATE,
					T1.REPAYPROFITRATE,
					T1.REPAYFRQ,
					T1.NEXTREPAYDATE,
					T1.REPAYPFTFRQ,
					T1.NEXTREPAYPFTDATE,
					T1.ALLOWREPAYRVW,
					T1.REPAYRVWFRQ,
					T1.NEXTREPAYRVWDATE,
					T1.ALLOWREPAYCPZ,
					T1.REPAYCPZFRQ,
					T1.NEXTREPAYCPZDATE,
					T1.MATURITYDATE,
					T1.CPZATGRACEEND,
					T1.DOWNPAYMENT,
					T1.GRACEFLATAMOUNT,
					T1.REQREPAYAMOUNT,
					T1.TOTALPROFIT,
					T1.TOTALCPZ,
					T1.TOTALGROSSPFT,
					T1.TOTALGROSSGRCPFT,
					T1.TOTALGRACEPFT,
					T1.TOTALGRACECPZ,
					T1.GRCRATEBASIS,
					T1.REPAYRATEBASIS,
					T1.FINTYPE,
					T1.FINREMARKS,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.REQMATURITY,
					T1.CALTERMS,
					T1.CALMATURITY,
					T1.FIRSTREPAY,
					T1.LASTREPAY,
					T1.FINSTARTDATE,
					T1.FINAMOUNT,
					T1.FINAMOUNT + T1.FEECHARGEAMT - T1.DOWNPAYMENT AS LOVDESCFINANCINGAMOUNT,
					T1.FINREPAYMENTAMOUNT,
					T1.CUSTID,
					T1.DEFFERMENTS,
					T1.PLANDEFERCOUNT,
					T1.FINBRANCH,
					T1.FINSOURCEID,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.ALLOWEDDEFFRQCHANGE,
					T1.AVAILEDDEFFRQCHANGE,
					T1.RECALTYPE,
					T1.FINASSETVALUE,
					T1.DISBACCOUNTID,
					T1.REPAYACCOUNTID,
					T1.FINISACTIVE,
					T1.LIMITVALID,
					T1.OVERRIDELIMIT,
					T1.SECURITYDEPOSIT,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T7.FINTYPEDESC   LOVDESCFINTYPENAME,
					T7.FINMAXAMOUNT  LOVDESCFINMAXAMT,
					T7.FINMINAMOUNT  LOVDESCFINMINAMOUNT,
					T1.MINDOWNPAYPERC,
					T7.FINISALWDIFFERMENT  LOVDESCFINALWDEFERMENT,
					T7.FINISDWPAYREQUIRED  LOVDESCDWNPAYREQ,
					T7.FINMAXDIFFERMENT   LOVDESCFINMAXDIFFERMENT,
					T12.BRANCHDESC        LOVDESCFINBRANCHNAME,
					T12.BRANCHPROVINCE    FINBRANCHPROVINCECODE,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.LASTREPAYRVWDATE,
					T1.LASTREPAYCPZDATE,
					T1.ALLOWGRCREPAY,
					T1.GRCSCHDMTHD,
					T1.GRCMARGIN,
					T1.REPAYMARGIN,
					T1.FINCURRASSETVALUE,
					T1.FINCOMMITMENTREF,
					T1.FINLIMITREF,
					T1.DEPRECIATIONFRQ,
					T1.FINCONTRACTDATE,
					T1.NEXTDEPDATE,
					T1.LASTDEPDATE,
					T1.FINACCOUNT,
					T1.FINCUSTPFTACCOUNT,
					T17.ACRTILLLBD  LOVDESCACCRUEDTILLLBD,
					T7.FINRVWRATEAPPLFOR,
					T1.TOTALREPAYAMT,
					T1.CLOSINGSTATUS,
					T1.FINAPPROVEDDATE,
					T1.FEECHARGEAMT,
					T1.BLACKLISTED,
					T1.FINREPAYPFTONFRQ,
					T1.ANUALIZEDPERCRATE,
					T1.EFFECTIVERATEOFRETURN,
					T1.MIGRATEDFINANCE,
					T1.SCHEDULEMAINTAINED,
					T1.SCHEDULEREGENERATED,
					T1.FINPURPOSE,
					T39.LOANPURPOSEDESC  LOVDESCFINPURPOSENAME,
					T1.FINSTATUS,
					T1.FINSTSREASON,
					T1.INITIATEUSER,
					T1.BANKNAME,
					T1.IBAN,
					T1.ACCOUNTTYPE,
					T1.DDAREFERENCENO,
					T7.FINSCHEDULEON  LOVDESCFINSCHEDULEON,
					T1.CUSTDSR,
					T1.JOINTACCOUNT,
					T1.JOINTCUSTID,
					T1.DOWNPAYBANK,
					T1.DOWNPAYSUPL,
					T1.DOWNPAYACCOUNT,
					T1.SECURITYCOLLATERAL,
					T1.APPROVED,
					T1.DISCREPANCY,
					T1.LIMITAPPROVED,
					T1.GRACETERMS,
					T7.FINDIVISION  LOVDESCFINDIVISION,
					T1.RCDMAINTAINSTS,
					T1.FINREPAYMETHOD,
					T1.GRCPROFITDAYSBASIS,
					T1.STEPFINANCE,
					T1.STEPTYPE,
					T1.STEPPOLICY,
					T1.ALWMANUALSTEPS,
					T1.NOOFSTEPS,
					T1.LINKEDFINREF,
					T1.NEXTUSERID,
					T1.PRIORITY,
					T24.POLICYDESC  LOVDESCSTEPPOLICYNAME,
					T1.GRCMINRATE,
					T1.GRCMAXRATE,
					T1.RPYMINRATE,
					T1.RPYMAXRATE,
					T1.DEVIATIONAPPROVAL,
					T1.MANUALSCHEDULE,
					T1.TAKEOVERFINANCE,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.SUPPLEMENTRENT,
					T1.INCREASEDCOST,
					T1.CREDITINSAMT,
					T1.ROLLOVERFRQ,
					T1.NEXTROLLOVERDATE,
					T27.CUSTSTSDESCRIPTION,
					T1.SHARIASTATUS,
					T1.INITIATEDATE,
					T1.FINPREAPPROVEDREF,
					T1.MMAID,
					T1.ACCOUNTSOFFICER,
					T1.FEEACCOUNTID,
					T1.FINCANCELAC,
					T28.DEALERNAME  LOVDESCACCOUNTSOFFICER,
					T28.DEALERCITY  LOVDESCSOURCECITY,
					T1.DSACODE,
					T30.ROFFICERDESC  DSACODEDESC,
					T1.TDSAPPLICABLE,
					T1.MANDATEID,
					T1.DROPLINEFRQ,
					T1.FIRSTDROPLINEDATE,
					T1.PFTSERVICINGODLIMIT,
					T1.INSURANCEAMT,
					T1.DEDUCTINSDISB,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.CALROUNDINGMODE,
					T1.ALWMULTIDISB,
					T1.APPLICATIONNO,
					T1.REFERRALID,
					T33.ROFFICERDESC  REFERRALIDDESC,
					T1.DMACODE,
					T34.ROFFICERDESC  DMACODEDESC,
					T1.SALESDEPARTMENT,
					T35.GENDEPTDESC  SALESDEPARTMENTDESC,
					T1.QUICKDISB,
					T1.WIFREFERENCE,
					T1.UNPLANEMIHLOCKPERIOD,
					T1.UNPLANEMICPZ,
					T1.REAGECPZ,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.AVAILEDUNPLANEMI,
					T1.AVAILEDREAGEH,
					T1.BPIAMOUNT,
					T1.DEDUCTFEEDISB,
					T1.RVWRATEAPPLFOR,
					T1.SCHCALONRVW,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.PROMOTIONCODE,
					T1.RESTRUCTURELOAN,
					T1.OLDFINREFERENCE,
					T1.REAGEBUCKET,
					T1.FINCATEGORY,
					T1.PRODUCTCATEGORY,
					T1.ROUNDINGTARGET,
					T36.ENTITYCODE  LOVDESCENTITYCODE,
					T1.ELIGIBILITYMETHOD,
					T38.FIELDCODEVALUE  LOVELIGIBILITYMETHOD,
					T38.VALUEDESC       LOVDESCELIGIBILITYMETHOD,
					T1.EMPLOYEENAME,
					T37.ROFFICERDESC  EMPLOYEENAMEDESC,
					T1.SAMPLINGREQUIRED,
					T1.LEGALREQUIRED,
					T1.GRCMAXAMOUNT,
					T1.CONNECTOR,
					T40.DEALERNAME  CONNECTORCODE,
					T40.DEALERCITY  CONNECTORDESC,
					T1.ADVANCEEMI,
					T1.ADVEMITERMS,
					T1.BPIPFTDAYSBASIS,
					T1.FIXEDRATETENOR,
					T1.FIXEDTENORRATE,
					T12.BRANCHTEL  FINBRANCHCONTACT,
					T1.PROCESSATTRIBUTES,
					T1.BUSINESSVERTICAL,
					BV.CODE         BUSINESSVERTICALCODE,
					BV.DESCRIPTION  BUSINESSVERTICALDESC,
					T1.GRCADVTYPE,
					T1.GRCADVTERMS,
					T1.ADVTYPE,
					T1.ADVTERMS,
					T1.ADVSTAGE,
					T1.TDSPERCENTAGE,
					T1.TDSSTARTDATE,
					T1.TDSENDDATE,
					T1.TDSLIMITAMT,
					T1.VANREQ,
					T1.VANCODE,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING
					FROM FINANCEMAIN_TEMP T1
					JOIN RMTFINANCETYPES T7 ON T1.FINTYPE = T7.FINTYPE
					LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH = T12.BRANCHCODE
					LEFT JOIN FINPFTDETAILS T17 ON T17.FINREFERENCE = T1.FINREFERENCE
					LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY = T24.POLICYCODE
					LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS = T27.CUSTSTSCODE
					LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
					LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE = T30.ROFFICERCODE
					LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID = T33.ROFFICERCODE
					LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE = T34.ROFFICERCODE
					LEFT JOIN RMTGENDEPARTMENTS T35 ON T1.SALESDEPARTMENT = T35.GENDEPARTMENT
					LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION = T36.DIVISIONCODE
					LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME = T37.ROFFICERCODE
					LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE = 'ELGMETHOD'
					LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE = T39.LOANPURPOSECODE
					LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
					LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
					UNION ALL
					SELECT T1.FINREFERENCE,
					T1.INVESTMENTREF,
					T1.NUMBEROFTERMS,
					T1.GRCPERIODENDDATE,
					T1.ALLOWGRCPERIOD,
					T1.GRACEBASERATE,
					T1.GRACESPECIALRATE,
					T1.GRCPFTRATE,
					T1.GRCPFTFRQ,
					T1.NEXTGRCPFTDATE,
					T1.ALLOWGRCPFTRVW,
					T1.GRCPFTRVWFRQ,
					T1.NEXTGRCPFTRVWDATE,
					T1.ALLOWGRCCPZ,
					T1.GRCCPZFRQ,
					T1.NEXTGRCCPZDATE,
					T1.REPAYBASERATE,
					T1.REPAYSPECIALRATE,
					T1.REPAYPROFITRATE,
					T1.REPAYFRQ,
					T1.NEXTREPAYDATE,
					T1.REPAYPFTFRQ,
					T1.NEXTREPAYPFTDATE,
					T1.ALLOWREPAYRVW,
					T1.REPAYRVWFRQ,
					T1.NEXTREPAYRVWDATE,
					T1.ALLOWREPAYCPZ,
					T1.REPAYCPZFRQ,
					T1.NEXTREPAYCPZDATE,
					T1.MATURITYDATE,
					T1.CPZATGRACEEND,
					T1.DOWNPAYMENT,
					T1.GRACEFLATAMOUNT,
					T1.REQREPAYAMOUNT,
					T1.TOTALPROFIT,
					T1.TOTALCPZ,
					T1.TOTALGROSSPFT,
					T1.TOTALGROSSGRCPFT,
					T1.TOTALGRACEPFT,
					T1.TOTALGRACECPZ,
					T1.GRCRATEBASIS,
					T1.REPAYRATEBASIS,
					T1.FINTYPE,
					T1.FINREMARKS,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.REQMATURITY,
					T1.CALTERMS,
					T1.CALMATURITY,
					T1.FIRSTREPAY,
					T1.LASTREPAY,
					T1.FINSTARTDATE,
					T1.FINAMOUNT,
					T1.FINAMOUNT + T1.FEECHARGEAMT - T1.DOWNPAYMENT  LOVDESCFINANCINGAMOUNT,
					T1.FINREPAYMENTAMOUNT,
					T1.CUSTID,
					T1.DEFFERMENTS,
					T1.PLANDEFERCOUNT,
					T1.FINBRANCH,
					T1.FINSOURCEID,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.ALLOWEDDEFFRQCHANGE,
					T1.AVAILEDDEFFRQCHANGE,
					T1.RECALTYPE,
					T1.FINASSETVALUE,
					T1.DISBACCOUNTID,
					T1.REPAYACCOUNTID,
					T1.FINISACTIVE,
					T1.LIMITVALID,
					T1.OVERRIDELIMIT,
					T1.SECURITYDEPOSIT,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T7.FINTYPEDESC   LOVDESCFINTYPENAME,
					T7.FINMAXAMOUNT  LOVDESCFINMAXAMT,
					T7.FINMINAMOUNT  LOVDESCFINMINAMOUNT,
					T1.MINDOWNPAYPERC,
					T7.FINISALWDIFFERMENT  LOVDESCFINALWDEFERMENT,
					T7.FINISDWPAYREQUIRED  LOVDESCDWNPAYREQ,
					T7.FINMAXDIFFERMENT   LOVDESCFINMAXDIFFERMENT,
					T12.BRANCHDESC     LOVDESCFINBRANCHNAME,
					T12.BRANCHPROVINCE   FINBRANCHPROVINCECODE,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.LASTREPAYRVWDATE,
					T1.LASTREPAYCPZDATE,
					T1.ALLOWGRCREPAY,
					T1.GRCSCHDMTHD,
					T1.GRCMARGIN,
					T1.REPAYMARGIN,
					T1.FINCURRASSETVALUE,
					T1.FINCOMMITMENTREF,
					T1.FINLIMITREF,
					T1.DEPRECIATIONFRQ,
					T1.FINCONTRACTDATE,
					T1.NEXTDEPDATE,
					T1.LASTDEPDATE,
					T1.FINACCOUNT,
					T1.FINCUSTPFTACCOUNT,
					T17.ACRTILLLBD  LOVDESCACCRUEDTILLLBD,
					T7.FINRVWRATEAPPLFOR,
					T1.TOTALREPAYAMT,
					T1.CLOSINGSTATUS,
					T1.FINAPPROVEDDATE,
					T1.FEECHARGEAMT,
					T1.BLACKLISTED,
					T1.FINREPAYPFTONFRQ,
					T1.ANUALIZEDPERCRATE,
					T1.EFFECTIVERATEOFRETURN,
					T1.MIGRATEDFINANCE,
					T1.SCHEDULEMAINTAINED,
					T1.SCHEDULEREGENERATED,
					T1.FINPURPOSE,
					T39.LOANPURPOSEDESC  LOVDESCFINPURPOSENAME,
					T1.FINSTATUS,
					T1.FINSTSREASON,
					T1.INITIATEUSER,
					T1.BANKNAME,
					T1.IBAN,
					T1.ACCOUNTTYPE,
					T1.DDAREFERENCENO,
					T7.FINSCHEDULEON  LOVDESCFINSCHEDULEON,
					T1.CUSTDSR,
					T1.JOINTACCOUNT,
					T1.JOINTCUSTID,
					T1.DOWNPAYBANK,
					T1.DOWNPAYSUPL,
					T1.DOWNPAYACCOUNT,
					T1.SECURITYCOLLATERAL,
					T1.APPROVED,
					T1.DISCREPANCY,
					T1.LIMITAPPROVED,
					T1.GRACETERMS,
					T7.FINDIVISION  LOVDESCFINDIVISION,
					T1.RCDMAINTAINSTS,
					T1.FINREPAYMETHOD,
					T1.GRCPROFITDAYSBASIS,
					T1.STEPFINANCE,
					T1.STEPTYPE,
					T1.STEPPOLICY,
					T1.ALWMANUALSTEPS,
					T1.NOOFSTEPS,
					T1.LINKEDFINREF,
					T1.NEXTUSERID,
					T1.PRIORITY,
					T24.POLICYDESC  LOVDESCSTEPPOLICYNAME,
					T1.GRCMINRATE,
					T1.GRCMAXRATE,
					T1.RPYMINRATE,
					T1.RPYMAXRATE,
					T1.DEVIATIONAPPROVAL,
					T1.MANUALSCHEDULE,
					T1.TAKEOVERFINANCE,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.SUPPLEMENTRENT,
					T1.INCREASEDCOST,
					T1.CREDITINSAMT,
					T1.ROLLOVERFRQ,
					T1.NEXTROLLOVERDATE,
					T27.CUSTSTSDESCRIPTION,
					T1.SHARIASTATUS,
					T1.INITIATEDATE,
					T1.FINPREAPPROVEDREF,
					T1.MMAID,
					T1.ACCOUNTSOFFICER,
					T1.FEEACCOUNTID,
					T1.FINCANCELAC,
					T28.DEALERNAME  LOVDESCACCOUNTSOFFICER,
					T28.DEALERCITY  LOVDESCSOURCECITY,
					T1.DSACODE,
					T30.ROFFICERDESC  DSACODEDESC,
					T1.TDSAPPLICABLE,
					T1.MANDATEID,
					T1.DROPLINEFRQ,
					T1.FIRSTDROPLINEDATE,
					T1.PFTSERVICINGODLIMIT,
					T1.INSURANCEAMT,
					T1.DEDUCTINSDISB,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.CALROUNDINGMODE,
					T1.ALWMULTIDISB,
					T1.APPLICATIONNO,
					T1.REFERRALID,
					T33.ROFFICERDESC  REFERRALIDDESC,
					T1.DMACODE,
					T34.ROFFICERDESC  DMACODEDESC,
					T1.SALESDEPARTMENT,
					T35.GENDEPTDESC  SALESDEPARTMENTDESC,
					T1.QUICKDISB,
					T1.WIFREFERENCE,
					T1.UNPLANEMIHLOCKPERIOD,
					T1.UNPLANEMICPZ,
					T1.REAGECPZ,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.AVAILEDUNPLANEMI,
					T1.AVAILEDREAGEH,
					T1.BPIAMOUNT,
					T1.DEDUCTFEEDISB,
					T1.RVWRATEAPPLFOR,
					T1.SCHCALONRVW,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.PROMOTIONCODE,
					T1.RESTRUCTURELOAN,
					T1.OLDFINREFERENCE,
					T1.REAGEBUCKET,
					T1.FINCATEGORY,
					T1.PRODUCTCATEGORY,
					T1.ROUNDINGTARGET,
					T36.ENTITYCODE  LOVDESCENTITYCODE,
					T1.ELIGIBILITYMETHOD,
					T38.FIELDCODEVALUE  LOVELIGIBILITYMETHOD,
					T38.VALUEDESC       LOVDESCELIGIBILITYMETHOD,
					T1.EMPLOYEENAME,
					T37.ROFFICERDESC  EMPLOYEENAMEDESC,
					T1.SAMPLINGREQUIRED,
					T1.LEGALREQUIRED,
					T1.GRCMAXAMOUNT,
					T1.CONNECTOR,
					T40.DEALERNAME  CONNECTORCODE,
					T40.DEALERCITY  CONNECTORDESC,
					T1.ADVANCEEMI,
					T1.ADVEMITERMS,
					T1.BPIPFTDAYSBASIS,
					T1.FIXEDRATETENOR,
					T1.FIXEDTENORRATE,
					T12.BRANCHTEL  FINBRANCHCONTACT,
					T1.PROCESSATTRIBUTES,
					T1.BUSINESSVERTICAL,
					BV.CODE         BUSINESSVERTICALCODE,
					BV.DESCRIPTION  BUSINESSVERTICALDESC,
					T1.GRCADVTYPE,
					T1.GRCADVTERMS,
					T1.ADVTYPE,
					T1.ADVTERMS,
					T1.ADVSTAGE,
					T1.TDSPERCENTAGE,
					T1.TDSSTARTDATE,
					T1.TDSENDDATE,
					T1.TDSLIMITAMT,
					T1.VANREQ,
					T1.VANCODE,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING
					FROM FINANCEMAIN T1
					JOIN RMTFINANCETYPES T7 ON T1.FINTYPE = T7.FINTYPE
					LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH = T12.BRANCHCODE
					LEFT JOIN FINPFTDETAILS T17 ON T17.FINREFERENCE = T1.FINREFERENCE
					LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY = T24.POLICYCODE
					LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS = T27.CUSTSTSCODE
					LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
					LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE = T30.ROFFICERCODE
					LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID = T33.ROFFICERCODE
					LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE = T34.ROFFICERCODE
					LEFT JOIN RMTGENDEPARTMENTS T35 ON T1.SALESDEPARTMENT = T35.GENDEPARTMENT
					LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION = T36.DIVISIONCODE
					LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME = T37.ROFFICERCODE
					LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE = 'ELGMETHOD'
					LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE = T39.LOANPURPOSECODE
					LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
					LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
					WHERE NOT (EXISTS (SELECT 1 FROM FINANCEMAIN_TEMP WHERE FINANCEMAIN_TEMP.FINREFERENCE = T1.FINREFERENCE ))
		</createView>
	</changeSet>

	<changeSet id="26_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="27_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemain_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="27" author="satyanarayana.g">
		<createView viewName="FINANCEMAIN_TVIEW" replaceIfExists="true">
			SELECT T1.FINREFERENCE,
					T1.INVESTMENTREF,
					T1.NUMBEROFTERMS,
					T1.GRCPERIODENDDATE,
					T1.ALLOWGRCPERIOD,
					T1.GRACEBASERATE,
					T1.GRACESPECIALRATE,
					T1.GRCPFTRATE,
					T1.GRCPFTFRQ,
					T1.NEXTGRCPFTDATE,
					T1.ALLOWGRCPFTRVW,
					T1.GRCPFTRVWFRQ,
					T1.NEXTGRCPFTRVWDATE,
					T1.ALLOWGRCCPZ,
					T1.GRCCPZFRQ,
					T1.NEXTGRCCPZDATE,
					T1.REPAYBASERATE,
					T1.REPAYSPECIALRATE,
					T1.REPAYPROFITRATE,
					T1.REPAYFRQ,
					T1.NEXTREPAYDATE,
					T1.REPAYPFTFRQ,
					T1.NEXTREPAYPFTDATE,
					T1.ALLOWREPAYRVW,
					T1.REPAYRVWFRQ,
					T1.NEXTREPAYRVWDATE,
					T1.ALLOWREPAYCPZ,
					T1.REPAYCPZFRQ,
					T1.NEXTREPAYCPZDATE,
					T1.MATURITYDATE,
					T1.CPZATGRACEEND,
					T1.DOWNPAYMENT,
					T1.GRACEFLATAMOUNT,
					T1.REQREPAYAMOUNT,
					T1.TOTALPROFIT,
					T1.TOTALCPZ,
					T1.TOTALGROSSPFT,
					T1.TOTALGROSSGRCPFT,
					T1.TOTALGRACEPFT,
					T1.TOTALGRACECPZ,
					T1.GRCRATEBASIS,
					T1.REPAYRATEBASIS,
					T1.FINTYPE,
					T1.FINREMARKS,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.REQMATURITY,
					T1.CALTERMS,
					T1.CALMATURITY,
					T1.FIRSTREPAY,
					T1.LASTREPAY,
					T1.FINSTARTDATE,
					T1.FINAMOUNT,
					T1.FINAMOUNT + T1.FEECHARGEAMT - T1.DOWNPAYMENT  LOVDESCFINANCINGAMOUNT,
					T1.FINREPAYMENTAMOUNT,
					T1.CUSTID,
					T1.DEFFERMENTS,
					T1.PLANDEFERCOUNT,
					T1.FINBRANCH,
					T1.FINSOURCEID,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.ALLOWEDDEFFRQCHANGE,
					T1.AVAILEDDEFFRQCHANGE,
					T1.RECALTYPE,
					T1.FINASSETVALUE,
					T1.DISBACCOUNTID,
					T1.REPAYACCOUNTID,
					T1.FINISACTIVE,
					T1.LIMITVALID,
					T1.OVERRIDELIMIT,
					T1.SECURITYDEPOSIT,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T7.FINTYPEDESC   LOVDESCFINTYPENAME,
					T7.FINMAXAMOUNT  LOVDESCFINMAXAMT,
					T7.FINMINAMOUNT  LOVDESCFINMINAMOUNT,
					T1.MINDOWNPAYPERC,
					T7.FINISALWDIFFERMENT  LOVDESCFINALWDEFERMENT,
					T7.FINISDWPAYREQUIRED  LOVDESCDWNPAYREQ,
					T7.FINMAXDIFFERMENT   LOVDESCFINMAXDIFFERMENT,
					T12.BRANCHDESC        LOVDESCFINBRANCHNAME,
					T12.BRANCHPROVINCE    FINBRANCHPROVINCECODE,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.LASTREPAYRVWDATE,
					T1.LASTREPAYCPZDATE,
					T1.ALLOWGRCREPAY,
					T1.GRCSCHDMTHD,
					T1.GRCMARGIN,
					T1.REPAYMARGIN,
					T1.FINCURRASSETVALUE,
					T1.FINCOMMITMENTREF,
					T1.FINLIMITREF,
					T1.DEPRECIATIONFRQ,
					T1.FINCONTRACTDATE,
					T1.NEXTDEPDATE,
					T1.LASTDEPDATE,
					T1.FINACCOUNT,
					T1.FINCUSTPFTACCOUNT,
					T17.ACRTILLLBD  LOVDESCACCRUEDTILLLBD,
					T7.FINRVWRATEAPPLFOR,
					T1.TOTALREPAYAMT,
					T1.CLOSINGSTATUS,
					T1.FINAPPROVEDDATE,
					T1.FEECHARGEAMT,
					T1.BLACKLISTED,
					T1.FINREPAYPFTONFRQ,
					T1.ANUALIZEDPERCRATE,
					T1.EFFECTIVERATEOFRETURN,
					T1.MIGRATEDFINANCE,
					T1.SCHEDULEMAINTAINED,
					T1.SCHEDULEREGENERATED,
					T1.FINPURPOSE,
					T39.LOANPURPOSEDESC  LOVDESCFINPURPOSENAME,
					T1.FINSTATUS,
					T1.FINSTSREASON,
					T1.INITIATEUSER,
					T1.BANKNAME,
					T1.IBAN,
					T1.ACCOUNTTYPE,
					T1.DDAREFERENCENO,
					T7.FINSCHEDULEON  LOVDESCFINSCHEDULEON,
					T1.CUSTDSR,
					T1.JOINTACCOUNT,
					T1.JOINTCUSTID,
					T1.DOWNPAYBANK,
					T1.DOWNPAYSUPL,
					T1.DOWNPAYACCOUNT,
					T1.SECURITYCOLLATERAL,
					T1.APPROVED,
					T1.DISCREPANCY,
					T1.LIMITAPPROVED,
					T1.GRACETERMS,
					T7.FINDIVISION  LOVDESCFINDIVISION,
					T1.RCDMAINTAINSTS,
					T1.FINREPAYMETHOD,
					T1.GRCPROFITDAYSBASIS,
					T1.STEPFINANCE,
					T1.STEPTYPE,
					T1.STEPPOLICY,
					T1.ALWMANUALSTEPS,
					T1.NOOFSTEPS,
					T1.LINKEDFINREF,
					T1.NEXTUSERID,
					T1.PRIORITY,
					T24.POLICYDESC  LOVDESCSTEPPOLICYNAME,
					T1.GRCMINRATE,
					T1.GRCMAXRATE,
					T1.RPYMINRATE,
					T1.RPYMAXRATE,
					T1.DEVIATIONAPPROVAL,
					T1.MANUALSCHEDULE,
					T1.TAKEOVERFINANCE,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.SUPPLEMENTRENT,
					T1.INCREASEDCOST,
					T1.CREDITINSAMT,
					T1.ROLLOVERFRQ,
					T1.NEXTROLLOVERDATE,
					T27.CUSTSTSDESCRIPTION,
					T1.SHARIASTATUS,
					T1.INITIATEDATE,
					T1.FINPREAPPROVEDREF,
					T1.MMAID,
					T1.ACCOUNTSOFFICER,
					T1.FEEACCOUNTID,
					T1.FINCANCELAC,
					T28.DEALERNAME  LOVDESCACCOUNTSOFFICER,
					T28.DEALERCITY  LOVDESCSOURCECITY,
					T1.DSACODE,
					T30.ROFFICERDESC  DSACODEDESC,
					T1.TDSAPPLICABLE,
					T1.MANDATEID,
					T1.DROPLINEFRQ,
					T1.FIRSTDROPLINEDATE,
					T1.PFTSERVICINGODLIMIT,
					T1.INSURANCEAMT,
					T1.DEDUCTINSDISB,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.CALROUNDINGMODE,
					T1.ALWMULTIDISB,
					T1.APPLICATIONNO,
					T1.REFERRALID,
					T33.ROFFICERDESC  REFERRALIDDESC,
					T1.DMACODE,
					T34.ROFFICERDESC  DMACODEDESC,
					T1.SALESDEPARTMENT,
					T35.GENDEPTDESC  SALESDEPARTMENTDESC,
					T1.QUICKDISB,
					T1.WIFREFERENCE,
					T1.UNPLANEMIHLOCKPERIOD,
					T1.UNPLANEMICPZ,
					T1.REAGECPZ,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.AVAILEDUNPLANEMI,
					T1.AVAILEDREAGEH,
					T1.BPIAMOUNT,
					T1.DEDUCTFEEDISB,
					T1.RVWRATEAPPLFOR,
					T1.SCHCALONRVW,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.PROMOTIONCODE,
					T1.RESTRUCTURELOAN,
					T1.OLDFINREFERENCE,
					T1.REAGEBUCKET,
					T1.FINCATEGORY,
					T1.PRODUCTCATEGORY,
					T1.ROUNDINGTARGET,
					T36.ENTITYCODE  LOVDESCENTITYCODE,
					T1.ELIGIBILITYMETHOD,
					T38.FIELDCODEVALUE  LOVELIGIBILITYMETHOD,
					T38.VALUEDESC       LOVDESCELIGIBILITYMETHOD,
					T1.EMPLOYEENAME,
					T37.ROFFICERDESC  EMPLOYEENAMEDESC,
					T1.SAMPLINGREQUIRED,
					T1.LEGALREQUIRED,
					T1.GRCMAXAMOUNT,
					T1.CONNECTOR,
					T40.DEALERNAME  CONNECTORCODE,
					T40.DEALERCITY  CONNECTORDESC,
					T1.ADVANCEEMI,
					T1.ADVEMITERMS,
					T1.BPIPFTDAYSBASIS,
					T1.FIXEDRATETENOR,
					T1.FIXEDTENORRATE,
					T12.BRANCHTEL  FINBRANCHCONTACT,
					T1.PROCESSATTRIBUTES,
					T1.BUSINESSVERTICAL,
					BV.CODE         BUSINESSVERTICALCODE,
					BV.DESCRIPTION  BUSINESSVERTICALDESC,
					T1.GRCADVTYPE,
					T1.GRCADVTERMS,
					T1.ADVTYPE,
					T1.ADVTERMS,
					T1.ADVSTAGE,
					T1.TDSPERCENTAGE,
					T1.TDSSTARTDATE,
					T1.TDSENDDATE,
					T1.TDSLIMITAMT,
					T1.VANREQ,
					T1.VANCODE,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING
					FROM FINANCEMAIN_TEMP T1
					JOIN RMTFINANCETYPES T7 ON T1.FINTYPE = T7.FINTYPE
					LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH = T12.BRANCHCODE
					LEFT JOIN FINPFTDETAILS T17 ON T17.FINREFERENCE = T1.FINREFERENCE
					LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY = T24.POLICYCODE
					LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS = T27.CUSTSTSCODE
					LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
					LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE = T30.ROFFICERCODE
					LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID = T33.ROFFICERCODE
					LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE = T34.ROFFICERCODE
					LEFT JOIN RMTGENDEPARTMENTS T35 ON T1.SALESDEPARTMENT = T35.GENDEPARTMENT
					LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION = T36.DIVISIONCODE
					LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME = T37.ROFFICERCODE
					LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE = 'ELGMETHOD'
					LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE = T39.LOANPURPOSECODE
					LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
					LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
		</createView>
	</changeSet>

	<changeSet id="27_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="28_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemain_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="28" author="satyanarayana.g">
		<createView viewName="FINANCEMAIN_AVIEW" replaceIfExists="true">
			SELECT T1.FINREFERENCE,
					T1.INVESTMENTREF,
					T1.NUMBEROFTERMS,
					T1.GRCPERIODENDDATE,
					T1.ALLOWGRCPERIOD,
					T1.GRACEBASERATE,
					T1.GRACESPECIALRATE,
					T1.GRCPFTRATE,
					T1.GRCPFTFRQ,
					T1.NEXTGRCPFTDATE,
					T1.ALLOWGRCPFTRVW,
					T1.GRCPFTRVWFRQ,
					T1.NEXTGRCPFTRVWDATE,
					T1.ALLOWGRCCPZ,
					T1.GRCCPZFRQ,
					T1.NEXTGRCCPZDATE,
					T1.REPAYBASERATE,
					T1.REPAYSPECIALRATE,
					T1.REPAYPROFITRATE,
					T1.REPAYFRQ,
					T1.NEXTREPAYDATE,
					T1.REPAYPFTFRQ,
					T1.NEXTREPAYPFTDATE,
					T1.ALLOWREPAYRVW,
					T1.REPAYRVWFRQ,
					T1.NEXTREPAYRVWDATE,
					T1.ALLOWREPAYCPZ,
					T1.REPAYCPZFRQ,
					T1.NEXTREPAYCPZDATE,
					T1.MATURITYDATE,
					T1.CPZATGRACEEND,
					T1.DOWNPAYMENT,
					T1.GRACEFLATAMOUNT,
					T1.REQREPAYAMOUNT,
					T1.TOTALPROFIT,
					T1.TOTALCPZ,
					T1.TOTALGROSSPFT,
					T1.TOTALGROSSGRCPFT,
					T1.TOTALGRACEPFT,
					T1.TOTALGRACECPZ,
					T1.GRCRATEBASIS,
					T1.REPAYRATEBASIS,
					T1.FINTYPE,
					T1.FINREMARKS,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.REQMATURITY,
					T1.CALTERMS,
					T1.CALMATURITY,
					T1.FIRSTREPAY,
					T1.LASTREPAY,
					T1.FINSTARTDATE,
					T1.FINAMOUNT,
					T1.FINAMOUNT + T1.FEECHARGEAMT - T1.DOWNPAYMENT  LOVDESCFINANCINGAMOUNT,
					T1.FINREPAYMENTAMOUNT,
					T1.CUSTID,
					T1.DEFFERMENTS,
					T1.PLANDEFERCOUNT,
					T1.FINBRANCH,
					T1.FINSOURCEID,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.ALLOWEDDEFFRQCHANGE,
					T1.AVAILEDDEFFRQCHANGE,
					T1.RECALTYPE,
					T1.FINASSETVALUE,
					T1.DISBACCOUNTID,
					T1.REPAYACCOUNTID,
					T1.FINISACTIVE,
					T1.LIMITVALID,
					T1.OVERRIDELIMIT,
					T1.SECURITYDEPOSIT,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T7.FINTYPEDESC   LOVDESCFINTYPENAME,
					T7.FINMAXAMOUNT  LOVDESCFINMAXAMT,
					T7.FINMINAMOUNT  LOVDESCFINMINAMOUNT,
					T1.MINDOWNPAYPERC,
					T7.FINISALWDIFFERMENT  LOVDESCFINALWDEFERMENT,
					T7.FINISDWPAYREQUIRED  LOVDESCDWNPAYREQ,
					T7.FINMAXDIFFERMENT    LOVDESCFINMAXDIFFERMENT,
					T12.BRANCHDESC         LOVDESCFINBRANCHNAME,
					T12.BRANCHPROVINCE     FINBRANCHPROVINCECODE,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.LASTREPAYRVWDATE,
					T1.LASTREPAYCPZDATE,
					T1.ALLOWGRCREPAY,
					T1.GRCSCHDMTHD,
					T1.GRCMARGIN,
					T1.REPAYMARGIN,
					T1.FINCURRASSETVALUE,
					T1.FINCOMMITMENTREF,
					T1.FINLIMITREF,
					T1.DEPRECIATIONFRQ,
					T1.FINCONTRACTDATE,
					T1.NEXTDEPDATE,
					T1.LASTDEPDATE,
					T1.FINACCOUNT,
					T1.FINCUSTPFTACCOUNT,
					T17.ACRTILLLBD  LOVDESCACCRUEDTILLLBD,
					T7.FINRVWRATEAPPLFOR,
					T1.TOTALREPAYAMT,
					T1.CLOSINGSTATUS,
					T1.FINAPPROVEDDATE,
					T1.FEECHARGEAMT,
					T1.BLACKLISTED,
					T1.FINREPAYPFTONFRQ,
					T1.ANUALIZEDPERCRATE,
					T1.EFFECTIVERATEOFRETURN,
					T1.MIGRATEDFINANCE,
					T1.SCHEDULEMAINTAINED,
					T1.SCHEDULEREGENERATED,
					T1.FINPURPOSE,
					T39.LOANPURPOSEDESC  LOVDESCFINPURPOSENAME,
					T1.FINSTATUS,
					T1.FINSTSREASON,
					T1.INITIATEUSER,
					T1.BANKNAME,
					T1.IBAN,
					T1.ACCOUNTTYPE,
					T1.DDAREFERENCENO,
					T7.FINSCHEDULEON  LOVDESCFINSCHEDULEON,
					T1.CUSTDSR,
					T1.JOINTACCOUNT,
					T1.JOINTCUSTID,
					T1.DOWNPAYBANK,
					T1.DOWNPAYSUPL,
					T1.DOWNPAYACCOUNT,
					T1.SECURITYCOLLATERAL,
					T1.APPROVED,
					T1.DISCREPANCY,
					T1.LIMITAPPROVED,
					T1.GRACETERMS,
					T7.FINDIVISION  LOVDESCFINDIVISION,
					T1.RCDMAINTAINSTS,
					T1.FINREPAYMETHOD,
					T1.GRCPROFITDAYSBASIS,
					T1.STEPFINANCE,
					T1.STEPTYPE,
					T1.STEPPOLICY,
					T1.ALWMANUALSTEPS,
					T1.NOOFSTEPS,
					T1.LINKEDFINREF,
					T1.NEXTUSERID,
					T1.PRIORITY,
					T24.POLICYDESC  LOVDESCSTEPPOLICYNAME,
					T1.GRCMINRATE,
					T1.GRCMAXRATE,
					T1.RPYMINRATE,
					T1.RPYMAXRATE,
					T1.DEVIATIONAPPROVAL,
					T1.MANUALSCHEDULE,
					T1.TAKEOVERFINANCE,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.SUPPLEMENTRENT,
					T1.INCREASEDCOST,
					T1.CREDITINSAMT,
					T1.ROLLOVERFRQ,
					T1.NEXTROLLOVERDATE,
					T27.CUSTSTSDESCRIPTION,
					T1.SHARIASTATUS,
					T1.INITIATEDATE,
					T1.FINPREAPPROVEDREF,
					T1.MMAID,
					T1.ACCOUNTSOFFICER,
					T1.FEEACCOUNTID,
					T1.FINCANCELAC,
					T28.DEALERNAME  LOVDESCACCOUNTSOFFICER,
					T28.DEALERCITY  LOVDESCSOURCECITY,
					T1.DSACODE,
					T30.ROFFICERDESC  DSACODEDESC,
					T1.TDSAPPLICABLE,
					T1.MANDATEID,
					T1.DROPLINEFRQ,
					T1.FIRSTDROPLINEDATE,
					T1.PFTSERVICINGODLIMIT,
					T1.INSURANCEAMT,
					T1.DEDUCTINSDISB,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.CALROUNDINGMODE,
					T1.ALWMULTIDISB,
					T1.APPLICATIONNO,
					T1.REFERRALID,
					T33.ROFFICERDESC  REFERRALIDDESC,
					T1.DMACODE,
					T34.ROFFICERDESC  DMACODEDESC,
					T1.SALESDEPARTMENT,
					T35.GENDEPTDESC  SALESDEPARTMENTDESC,
					T1.QUICKDISB,
					T1.WIFREFERENCE,
					T1.UNPLANEMIHLOCKPERIOD,
					T1.UNPLANEMICPZ,
					T1.REAGECPZ,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.AVAILEDUNPLANEMI,
					T1.AVAILEDREAGEH,
					T1.BPIAMOUNT,
					T1.DEDUCTFEEDISB,
					T1.RVWRATEAPPLFOR,
					T1.SCHCALONRVW,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.PROMOTIONCODE,
					T1.RESTRUCTURELOAN,
					T1.OLDFINREFERENCE,
					T1.REAGEBUCKET,
					T1.FINCATEGORY,
					T1.PRODUCTCATEGORY,
					T1.ROUNDINGTARGET,
					T36.ENTITYCODE  LOVDESCENTITYCODE,
					T1.ELIGIBILITYMETHOD,
					T38.FIELDCODEVALUE  LOVELIGIBILITYMETHOD,
					T38.VALUEDESC       LOVDESCELIGIBILITYMETHOD,
					T1.EMPLOYEENAME,
					T37.ROFFICERDESC  EMPLOYEENAMEDESC,
					T1.SAMPLINGREQUIRED,
					T1.LEGALREQUIRED,
					T1.GRCMAXAMOUNT,
					T1.CONNECTOR,
					T40.DEALERNAME  CONNECTORCODE,
					T40.DEALERCITY  CONNECTORDESC,
					T1.ADVANCEEMI,
					T1.ADVEMITERMS,
					T1.BPIPFTDAYSBASIS,
					T1.FIXEDRATETENOR,
					T1.FIXEDTENORRATE,
					T12.BRANCHTEL  FINBRANCHCONTACT,
					T1.PROCESSATTRIBUTES,
					T1.BUSINESSVERTICAL,
					BV.CODE         BUSINESSVERTICALCODE,
					BV.DESCRIPTION  BUSINESSVERTICALDESC,
					T1.GRCADVTYPE,
					T1.GRCADVTERMS,
					T1.ADVTYPE,
					T1.ADVTERMS,
					T1.ADVSTAGE,
					T1.TDSPERCENTAGE,
					T1.TDSSTARTDATE,
					T1.TDSENDDATE,
					T1.TDSLIMITAMT,
					T1.VANREQ,
					T1.VANCODE,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING
					FROM FINANCEMAIN T1
					JOIN RMTFINANCETYPES T7 ON T1.FINTYPE = T7.FINTYPE
					LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH = T12.BRANCHCODE
					LEFT JOIN FINPFTDETAILS T17 ON T17.FINREFERENCE = T1.FINREFERENCE
					LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY = T24.POLICYCODE
					LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS = T27.CUSTSTSCODE
					LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
					LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE = T30.ROFFICERCODE
					LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID = T33.ROFFICERCODE
					LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE = T34.ROFFICERCODE
					LEFT JOIN RMTGENDEPARTMENTS T35 ON T1.SALESDEPARTMENT = T35.GENDEPARTMENT
					LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION = T36.DIVISIONCODE
					LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME = T37.ROFFICERCODE
					LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE = 'ELGMETHOD'
					LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE = T39.LOANPURPOSECODE
					LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
					LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
		</createView>
	</changeSet>

	<changeSet id="28_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="29_pre" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rejectfinancemain_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="29" author="satyanarayana.g">
		<createView viewName="REJECTFINANCEMAIN_VIEW" replaceIfExists="true">
			SELECT F.FINREFERENCE,
					T.FINCATEGORY  LOVDESCPRODUCTCODENAME,
					F.FINTYPE,
					F.FINBRANCH,
					F.FINSTARTDATE,
					F.MATURITYDATE,
					F.NUMBEROFTERMS,
					F.FINCCY,
					F.FINAMOUNT,
					F.FINAMOUNT - F.DOWNPAYMENT + F.FEECHARGEAMT + F.INSURANCEAMT  FINANCINGAMOUNT,
					F.FEECHARGEAMT,
					F.INSURANCEAMT,
					F.FINAMOUNT - F.DOWNPAYMENT + F.FEECHARGEAMT + F.INSURANCEAMT - F.FINREPAYMENTAMOUNT  CURFINAMOUNT,
					F.DOWNPAYMENT,
					F.FINCURRASSETVALUE,
					F.FINASSETVALUE,
					F.ALLOWDRAWINGPOWER,
					F.ALLOWREVOLVING,
					C.CUSTCIF  LOVDESCCUSTCIF
					FROM REJECTFINANCEMAIN F
					LEFT JOIN CUSTOMERS C ON F.CUSTID = C.CUSTID
					LEFT JOIN RMTFINANCETYPES T ON F.FINTYPE = T.FINTYPE
	</createView>
	</changeSet>

	<changeSet id="29_post" author="satyanarayana.g" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_restore_dependencies ('plf', 'rejectfinancemain_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="30" author="Saikiran.v">
		<createTable tableName="TaxType">
			<column name="Id" type="bigint">
				<constraints primaryKey="true" nullable="false" />
			</column>
			<column name="Name" type="varchar(20)" />
			<column name="Description" type="varchar(50)" />
			<column name="Active" type="boolean" />
		</createTable>
	</changeSet>

	<changeSet id="31" author="Saikiran.v">
		<sql>
			<![CDATA[
				UPDATE TaxType Set active = 0;		
			]]>
		</sql>
	</changeSet>

	<changeSet id="32" author="Saikiran.v" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE TaxType ADD CONSTRAINT DF_TaxType_active DEFAULT 0 FOR active;
			]]>
		</sql>
	</changeSet>

	<changeSet id="33" author="Saikiran.v" dbms="postgresql, oracle">
		<addDefaultValue columnName="active" tableName="TaxType" defaultValue="0" />
	</changeSet>

	<changeSet id="34" author="Saikiran.v">
		<createIndex tableName="TaxType" indexName="IX_TaxType_Name" unique="true">
			<column name="Name" />
		</createIndex>
	</changeSet>

	<changeSet id="35" author="Saikiran.v">
		<sql>
			<![CDATA[
				INSERT INTO TAXTYPE VALUES(1,'CGST','CGST',1);
				INSERT INTO TAXTYPE VALUES(2,'SGST','SGST',1);
				INSERT INTO TAXTYPE VALUES(3,'IGST','IGST',1);
				INSERT INTO TAXTYPE VALUES(4,'UGST','UGST',1);
				INSERT INTO TAXTYPE VALUES(5,'CESS','CESS',1);
			]]>
		</sql>
	</changeSet>

	<changeSet id="36" author="Saikiran.v">
		<sql>
			<![CDATA[
				INSERT INTO ErrorDetails VALUES('65039','EN','E','To Calculate CESS on {0}, {1}, {2} and {3} combination Must be Exist.','','Approved','','','','','',0,current_timestamp,1000,0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="37" author="Saikiran.v">
		<sql>
			<![CDATA[
				 UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS);
			 	 UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);
			 	 
			 	 DELETE FROM SECGROUPRIGHTS Where GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='BFSD_ORIGINATION_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_AllowDrawingPower');
			 	 DELETE FROM SECRIGHTS Where RightName = 'FinanceMainDialog_AllowDrawingPower';
			 	 
				 INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3,'FinanceMainDialog_AllowDrawingPower','FinanceMainDialog', 0, 1000,CURRENT_TIMESTAMP,'',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0; 
 				 INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),(SELECT GRPID FROM SECGROUPS WHERE GRPCODE='BFSD_ORIGINATION_MAKER'),(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_AllowDrawingPower'), 1, 0, 1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0); 
			 
				 UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS);
			     UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);
			]]>
		</sql>
	</changeSet>

	<changeSet id="38" author="Prasadraju.B">
		<comment> Update statement for pincodes table "Prasadraju.B" </comment>
		<sql>
			<![CDATA[
			    UPDATE pincodes SET serviceable=1 WHERE serviceable is null;
			]]>
		</sql>
	</changeSet>

	<changeSet id="39" author="Prasadraju.B" dbms="mssql">
		<comment> Adding default constraint for serviceble column to 1 "Prasadraju.B" </comment>
		<sql>
			<![CDATA[
				ALTER TABLE pincodes ADD CONSTRAINT DF_PINCODES_SERVICEABLE default 1 for serviceable;	
			]]>
		</sql>
	</changeSet>

	<changeSet id="40" author="Prasadraju.B" dbms="postgresql, oracle">
		<comment> Adding default constraint for serviceble column to 1 "Prasadraju.B" </comment>
		<addDefaultValue columnName="serviceable" tableName="pincodes" defaultValue="1" />
	</changeSet>

	<changeSet id="41" author="vijaya.a">
		<createTable tableName="FINANCEMAIN_EXTENSION">
			<column name="Id" type="bigint" autoIncrement="true" />
			<column name="FinId" type="bigint" />
			<column name="FINREFERENCE" type="VARCHAR(20)" />
			<column name="HOSTREFERENCE" type="VARCHAR(20)" />
			<column name="OLDHOSTREFERENCE" type="VARCHAR(20)" />
		</createTable>
	</changeSet>

	<changeSet author="Kesav" id="42">
		<comment>data type modified from varchar(150) to varchar(200)</comment>
		<modifyDataType tableName="GST_Invoice_Txn" columnName="CustomerName" newDataType="varchar(200)" />
	</changeSet>



	<changeSet author="saikiran.v" id="51">
		<addColumn tableName="FinFeeDetail">
			<column name="taxHeaderId" type="bigint" defaultValue="0">
				<constraints nullable="false" />
			</column>
		</addColumn>
	</changeSet>

	<changeSet author="saikiran.v" id="52">
		<addColumn tableName="FinFeeDetail_Temp">
			<column name="taxHeaderId" type="bigint" defaultValue="0">
				<constraints nullable="false" />
			</column>
		</addColumn>
	</changeSet>

	<changeSet id="53" author="saikiran.v">
		<createView viewName="finfeedetail_aview" replaceIfExists="true">
				 SELECT t1.feeid,t1.finreference,t1.originationfee,t1.finevent,t1.feetypeid,t1.feeseq,t1.feeorder,t1.calculatedamount,
				 t1.actualamount,t1.waivedamount,t1.paidamount,t1.feeschedulemethod,t1.terms,t1.remainingfee,t1.paymentref,t1.calculationtype,
				 t1.rulecode,t1.fixedamount,t1.percentage,t1.calculateon,t1.alwdeviation,t1.maxwaiverperc,t1.alwmodifyfee,t1.alwmodifyfeeschdmthd,
				 t1.vasreference,t1.taxapplicable,t1.taxcomponent,t1.paidamountoriginal,t1.paidamountgst,t1.netamountoriginal,t1.netamountgst,
				 t1.netamount,t1.remainingfeeoriginal,t1.remainingfeegst,t1.actualamountoriginal,t1.actualamountgst,t1.feeamz,t1.version,
				 t1.lastmntby,t1.lastmnton,t1.recordstatus,t1.rolecode,t1.nextrolecode,t1.taskid,t1.nexttaskid,t1.recordtype,t1.transactionid,
				 t1.workflowid,t2.feetypecode,t2.feetypedesc,t1.status,t1.refundable,t1.instructionuid,t1.actpercentage,t1.waivedgst,t1.referenceid,t1.taxheaderid
  				 FROM finfeedetail t1 LEFT JOIN feetypes t2 ON t1.feetypeid = t2.feetypeid
		</createView>
	</changeSet>

	<changeSet id="54" author="saikiran.v">
		<createView viewName="finfeedetail_tview" replaceIfExists="true">
				SELECT t1.feeid,t1.finreference,t1.originationfee,t1.finevent,t1.feetypeid,t1.feeseq,t1.feeorder,t1.calculatedamount,
				t1.actualamount,t1.waivedamount,t1.paidamount,t1.feeschedulemethod,t1.terms,t1.remainingfee,t1.paymentref,t1.calculationtype,
				t1.rulecode,t1.fixedamount,t1.percentage,t1.calculateon,t1.alwdeviation,t1.maxwaiverperc,t1.alwmodifyfee,t1.alwmodifyfeeschdmthd,
				t1.vasreference,t1.status,t1.taxapplicable,t1.taxcomponent,t1.paidamountoriginal,t1.paidamountgst,t1.netamountoriginal,
				t1.netamountgst,t1.netamount,t1.remainingfeeoriginal,t1.remainingfeegst,t1.actualamountoriginal,t1.actualamountgst,t1.feeamz,
				t1.version,t1.lastmntby,t1.lastmnton,t1.recordstatus,t1.rolecode,t1.nextrolecode,t1.taskid,t1.nexttaskid,t1.recordtype,
				t1.transactionid,t1.workflowid,t2.feetypecode,t2.feetypedesc,t1.refundable,t1.instructionuid,t1.actpercentage,
				t1.waivedgst,t1.referenceid,t1.taxheaderid
   				FROM finfeedetail_temp t1 LEFT JOIN feetypes t2 ON t1.feetypeid = t2.feetypeid
		</createView>
	</changeSet>

	<changeSet id="55" author="saikiran.v">
		<createView viewName="finfeedetail_view" replaceIfExists="true">
				SELECT t1.feeid,t1.finreference,t1.originationfee,t1.finevent,t1.feetypeid,t1.feeseq,t1.feeorder,t1.calculatedamount,t1.actualamount,
				t1.waivedamount,t1.paidamount,t1.feeschedulemethod,t1.terms,t1.remainingfee,t1.paymentref,t1.calculationtype,t1.rulecode,t1.fixedamount,
				t1.percentage,t1.calculateon,t1.alwdeviation,t1.maxwaiverperc,t1.alwmodifyfee,t1.alwmodifyfeeschdmthd,t1.vasreference,t1.status,
				t1.taxapplicable,t1.taxcomponent,t1.paidamountoriginal,t1.paidamountgst,t1.netamountoriginal,t1.netamountgst,t1.netamount,t1.remainingfeeoriginal,
				t1.remainingfeegst,t1.actualamountoriginal,t1.actualamountgst,t1.feeamz,t1.version,t1.lastmntby,t1.lastmnton,t1.recordstatus,t1.rolecode,
				t1.nextrolecode,t1.taskid,t1.nexttaskid,t1.recordtype,t1.transactionid,t1.workflowid,t2.feetypecode,t2.feetypedesc,t1.refundable,t1.instructionuid,
				t1.actpercentage,t1.waivedgst,t1.referenceid,t1.taxheaderid
   				FROM finfeedetail_temp t1 LEFT JOIN feetypes t2 ON t1.feetypeid = t2.feetypeid
				UNION ALL
 				SELECT t1.feeid,t1.finreference,t1.originationfee,t1.finevent,t1.feetypeid,t1.feeseq,t1.feeorder,t1.calculatedamount,t1.actualamount,t1.waivedamount,
				t1.paidamount,t1.feeschedulemethod,t1.terms,t1.remainingfee,t1.paymentref,t1.calculationtype,t1.rulecode,t1.fixedamount,t1.percentage,t1.calculateon,
 				t1.alwdeviation,t1.maxwaiverperc,t1.alwmodifyfee,t1.alwmodifyfeeschdmthd,t1.vasreference,t1.status,t1.taxapplicable,t1.taxcomponent,t1.paidamountoriginal,
 				t1.paidamountgst,t1.netamountoriginal,t1.netamountgst,t1.netamount,t1.remainingfeeoriginal,t1.remainingfeegst,t1.actualamountoriginal,
 				t1.actualamountgst,t1.feeamz,t1.version,t1.lastmntby,t1.lastmnton,t1.recordstatus,t1.rolecode,t1.nextrolecode,t1.taskid,t1.nexttaskid,t1.recordtype,
 				t1.transactionid,t1.workflowid,t2.feetypecode,t2.feetypedesc,t1.refundable,t1.instructionuid,t1.actpercentage,t1.waivedgst,t1.referenceid,t1.taxheaderid
   				FROM finfeedetail t1 LEFT JOIN feetypes t2 ON t1.feetypeid = t2.feetypeid
 				WHERE NOT (EXISTS ( SELECT 1       FROM finfeedetail_temp      WHERE finfeedetail_temp.feeid = t1.feeid))
		</createView>
	</changeSet>

	<changeSet author="saikiran.v" id="56">
		<addColumn tableName="wiffinfeedetail">
			<column name="taxHeaderId" type="bigint" defaultValue="0">
				<constraints nullable="false" />
			</column>
		</addColumn>
	</changeSet>

	<changeSet author="saikiran.v" id="57">
		<addColumn tableName="wiffinfeedetail_temp">
			<column name="taxHeaderId" type="bigint" defaultValue="0">
				<constraints nullable="false" />
			</column>
		</addColumn>
	</changeSet>

	<changeSet id="58" author="saikiran.v">
		<createView viewName="wiffinfeedetail_view" replaceIfExists="true">
			SELECT t1.feeid,t1.finreference,t1.feeseq,t1.originationfee,t1.finevent,t1.feetypeid,t1.feeorder,t1.calculatedamount,t1.actualamount,t1.waivedamount,
			t1.paidamount,t1.feeschedulemethod,t1.terms,t1.remainingfee,t1.paymentref,t1.calculationtype,t1.rulecode,t1.fixedamount,t1.percentage,t1.calculateon,
			t1.alwdeviation,t1.maxwaiverperc,t1.alwmodifyfee,t1.alwmodifyfeeschdmthd,t1.vasreference,t1.status,t1.taxapplicable,t1.taxcomponent,t1.paidamountoriginal,
			t1.paidamountgst,t1.netamountoriginal,t1.netamountgst,t1.netamount,t1.remainingfeeoriginal,t1.remainingfeegst,t1.actualamountoriginal,t1.actualamountgst,
			t1.version,t1.lastmntby,t1.lastmnton,t1.recordstatus,t1.rolecode,t1.nextrolecode,t1.taskid,t1.nexttaskid,t1.recordtype,t1.workflowid,t2.feetypecode,
			t2.feetypedesc,t1.refundable,t1.instructionuid,t1.waivedgst,t1.referenceid,t1.taxheaderid
  			FROM wiffinfeedetail_temp t1 LEFT JOIN feetypes t2 ON t1.feetypeid = t2.feetypeid
			UNION ALL
 			SELECT t1.feeid,t1.finreference,t1.feeseq,t1.originationfee,t1.finevent,t1.feetypeid,t1.feeorder,t1.calculatedamount,t1.actualamount,t1.waivedamount,
 			t1.paidamount,t1.feeschedulemethod,t1.terms,t1.remainingfee,t1.paymentref,t1.calculationtype,t1.rulecode,t1.fixedamount,t1.percentage,t1.calculateon,
 			t1.alwdeviation,t1.maxwaiverperc,t1.alwmodifyfee,t1.alwmodifyfeeschdmthd,t1.vasreference,t1.status,t1.taxapplicable,t1.taxcomponent,t1.paidamountoriginal,
 			t1.paidamountgst,t1.netamountoriginal,t1.netamountgst,t1.netamount,t1.remainingfeeoriginal,t1.remainingfeegst,t1.actualamountoriginal,t1.actualamountgst,
 			t1.version,t1.lastmntby,t1.lastmnton,t1.recordstatus,t1.rolecode,t1.nextrolecode,t1.taskid,t1.nexttaskid,t1.recordtype,t1.workflowid,t2.feetypecode,
 			t2.feetypedesc,t1.refundable,t1.instructionuid,t1.waivedgst,t1.referenceid,t1.taxheaderid
   			FROM wiffinfeedetail t1 LEFT JOIN feetypes t2 ON t1.feetypeid = t2.feetypeid
  			WHERE NOT (EXISTS
  			 ( SELECT 1       FROM wiffinfeedetail_temp      WHERE wiffinfeedetail_temp.finreference = t1.finreference AND 
  			 wiffinfeedetail_temp.originationfee = t1.originationfee AND wiffinfeedetail_temp.finevent = t1.finevent AND wiffinfeedetail_temp.feetypeid = t1.feetypeid))
		</createView>
	</changeSet>

	<changeSet author="saikiran.v" id="59">
		<addColumn tableName="ReceiptAllocationDetail">
			<column name="taxHeaderId" type="bigint" defaultValue="0">
				<constraints nullable="false" />
			</column>
		</addColumn>
	</changeSet>

	<changeSet author="saikiran.v" id="60">
		<addColumn tableName="ReceiptAllocationDetail_temp">
			<column name="taxHeaderId" type="bigint" defaultValue="0">
				<constraints nullable="false" />
			</column>
		</addColumn>
	</changeSet>

	<changeSet id="61" author="saikiran.v">
		<createView viewName="receiptallocationdetail_aview" replaceIfExists="true">
			SELECT t1.receiptallocationid,t1.receiptid,t1.allocationid,t1.allocationtype,t1.allocationto,t1.paidamount,t1.waivedamount,
			COALESCE(t3.feetypedesc, t5.feetypedesc) AS typedesc,t1.paidgst,t1.waivedgst,t1.taxheaderid
   			FROM receiptallocationdetail t1
   			LEFT JOIN finfeedetail t2 ON t1.allocationto = t2.feeid AND t1.allocationtype = 'FEE' 
   			LEFT JOIN feetypes t3 ON t2.feetypeid = t3.feetypeid 
   			LEFT JOIN manualadvise t4 ON t1.allocationto = t4.adviseid AND t1.allocationtype = 'MANADV' 
   			LEFT JOIN feetypes t5 ON t4.feetypeid = t5.feetypeid
		</createView>
	</changeSet>

	<changeSet id="62" author="saikiran.v">
		<createView viewName="receiptallocationdetail_view" replaceIfExists="true">
			SELECT t1.receiptallocationid,t1.receiptid,t1.allocationid,t1.allocationtype,t1.allocationto,t1.paidamount,t1.waivedamount,
			COALESCE(t3.feetypedesc, t5.feetypedesc) AS typedesc,t1.paidgst,t1.waivedreqamount,t1.waiveraccepted,t1.totaldue,t1.waivedgst,t1.taxheaderid
   			FROM receiptallocationdetail_temp t1 
   			LEFT JOIN finfeedetail_temp t2 ON t1.allocationto = t2.feeid AND t1.allocationtype = 'FEE'
   			LEFT JOIN feetypes t3 ON t2.feetypeid = t3.feetypeid 
   			LEFT JOIN manualadvise t4 ON t1.allocationto = t4.adviseid AND t1.allocationtype = 'MANADV' 
   			LEFT JOIN feetypes t5 ON t4.feetypeid = t5.feetypeid
			UNION ALL
 			SELECT t1.receiptallocationid,t1.receiptid,t1.allocationid,t1.allocationtype,t1.allocationto,t1.paidamount,t1.waivedamount,
 			COALESCE(t3.feetypedesc, t5.feetypedesc) AS typedesc,t1.paidgst,t1.waivedreqamount,t1.waiveraccepted,t1.totaldue,t1.waivedgst,t1.taxheaderid
   			FROM receiptallocationdetail t1
   			LEFT JOIN finfeedetail t2 ON t1.allocationto = t2.feeid AND t1.allocationtype = 'FEE' 
   			LEFT JOIN feetypes t3 ON t2.feetypeid = t3.feetypeid 
   			LEFT JOIN manualadvise t4 ON t1.allocationto = t4.adviseid AND t1.allocationtype = 'MANADV'
   			 LEFT JOIN feetypes t5 ON t4.feetypeid = t5.feetypeid
  			WHERE NOT (EXISTS ( SELECT 1 FROM receiptallocationdetail_temp WHERE receiptallocationdetail_temp.receiptid = t1.receiptid))
		</createView>
	</changeSet>

	<changeSet author="saikiran.v" id="67">
		<addColumn tableName="ManualAdvise">
			<column name="WaivedCess" type="decimal(18,0)" defaultValue="0" />
			<column name="paidCess" type="decimal(18,0)" defaultValue="0" />
		</addColumn>
	</changeSet>

	<changeSet author="saikiran.v" id="68">
		<addColumn tableName="ManualAdvise_Temp">
			<column name="WaivedCess" type="decimal(18,0)" defaultValue="0" />
			<column name="paidCess" type="decimal(18,0)" defaultValue="0" />
		</addColumn>
	</changeSet>

	<changeSet id="69_pre" author="saikiran.v" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_save_and_drop_dependencies ('plf', 'manualadvise_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="69" author="saikiran.v">
		<createView viewName="Manualadvise_Aview" replaceIfExists="true">
	 	  SELECT t1.adviseid,t1.advisetype,t1.finreference,t1.feetypeid,t1.sequence,t1.adviseamount,t1.paidamount,
	 	  t1.waivedamount,t1.remarks,t1.valuedate,t1.postdate,t1.version,t1.lastmntby,t1.lastmnton,t1.recordstatus,
	 	  t1.rolecode,t1.nextrolecode,t1.taskid,t1.nexttaskid,t1.recordtype,t1.workflowid,t2.feetypedesc,t2.feetypecode,t1.bounceid,
	 	  t1.receiptid,t3.bouncecode,t1.reservedamt,t1.balanceamt,t3.reason AS bouncecodedesc,COALESCE(t2.taxapplicable, 0) AS 
	 	  taxapplicable,t2.taxcomponent,t1.paidcgst,t1.paidsgst,t1.paidigst,t1.paidugst,t1.waivedcgst,t1.waivedsgst,t1.waivedugst,t1.waivedigst,t1.waivedcess,t1.paidcess
  		  FROM manualadvise t1
  		  LEFT JOIN feetypes t2 ON t1.feetypeid = t2.feetypeid
  		  LEFT JOIN bouncereasons t3 ON t1.bounceid = t3.bounceid
	 </createView>
	</changeSet>

	<changeSet id="69_post" author="saikiran.v" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_restore_dependencies ('plf', 'manualadvise_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="70" author="saikiran.v">
		<createView viewName="Manualadvise_Tview" replaceIfExists="true">
	 	  SELECT t1.adviseid,t1.advisetype,t1.finreference,t1.feetypeid,t1.sequence,t1.adviseamount,t1.paidamount,t1.waivedamount,t1.remarks,
	 	  t1.valuedate,t1.postdate,t1.version,t1.lastmntby,t1.lastmnton,t1.recordstatus,t1.rolecode,t1.nextrolecode,t1.taskid,t1.nexttaskid,t1.recordtype,
	 	  t1.workflowid,t2.feetypedesc,t2.feetypecode,t1.bounceid,t1.receiptid,t3.bouncecode,t1.reservedamt,t1.balanceamt,t3.reason AS bouncecodedesc,
	 	  COALESCE(t2.taxapplicable, 0) AS taxapplicable,t2.taxcomponent,t1.paidcgst,t1.paidsgst,t1.paidigst,t1.paidugst,t1.waivedcgst,t1.waivedsgst,
	 	  t1.waivedugst,t1.waivedigst,t1.waivedcess,t1.paidcess
  		  FROM manualadvise_temp t1 
  		  LEFT JOIN feetypes t2 ON t1.feetypeid = t2.feetypeid
  		  LEFT JOIN bouncereasons t3 ON t1.bounceid = t3.bounceid
	 </createView>
	</changeSet>

	<changeSet id="71" author="saikiran.v">
		<createView viewName="Manualadvise_lview" replaceIfExists="true">
	 	  SELECT t1.adviseid,t1.advisetype,t1.finreference,t1.feetypeid,t1.sequence,t1.adviseamount,t1.paidamount,t1.waivedamount,t1.remarks,t1.valuedate,t1.postdate,
	 	  t1.version,t1.lastmntby,t1.lastmnton,t1.recordstatus,t1.rolecode,t1.nextrolecode,t1.taskid,t1.nexttaskid,t1.recordtype,t1.workflowid,t2.feetypedesc,t2.feetypecode,
	 	  t1.bounceid,t1.receiptid,t3.bouncecode,t1.reservedamt,t1.balanceamt,t3.reason AS bouncecodedesc,COALESCE(t2.taxapplicable, 0) AS taxapplicable,t2.taxcomponent,
	 	  t1.paidcgst,t1.paidsgst,t1.paidigst,t1.paidugst,t1.waivedcgst,t1.waivedsgst,t1.waivedugst,t1.waivedigst
  		  FROM manualadvise t1 LEFT JOIN feetypes t2 ON t1.feetypeid = t2.feetypeid LEFT JOIN bouncereasons t3 ON t1.bounceid = t3.bounceid
	 </createView>
	</changeSet>

	<changeSet id="72" author="saikiran.v">
		<createView viewName="Manualadvise_view" replaceIfExists="true">
	 	 SELECT t1.adviseid,t1.advisetype,t1.finreference,t1.feetypeid,t1.sequence,t1.adviseamount,t1.paidamount,t1.waivedamount,
	 	 t1.remarks,t1.valuedate,t1.postdate,t1.version,t1.lastmntby,t1.lastmnton,t1.recordstatus,t1.rolecode,t1.nextrolecode,t1.taskid,t1.nexttaskid,
	 	 t1.recordtype,t1.workflowid,t2.feetypedesc,t2.feetypecode,t1.bounceid,t1.receiptid,t3.bouncecode,t1.reservedamt,t1.balanceamt,t3.reason AS bouncecodedesc,
	 	 COALESCE(t2.taxapplicable, 0) AS taxapplicable,t2.taxcomponent,t1.paidcgst,t1.paidsgst,t1.paidigst,t1.paidugst,t1.waivedcgst,t1.waivedsgst,
	 	 t1.waivedugst,t1.waivedigst,t1.waivedcess,t1.paidcess
  		 FROM manualadvise_temp t1
  		 LEFT JOIN feetypes t2 ON t1.feetypeid = t2.feetypeid 
  		 LEFT JOIN bouncereasons t3 ON t1.bounceid = t3.bounceid
		 UNION ALL
		 SELECT t1.adviseid,t1.advisetype,t1.finreference,t1.feetypeid,t1.sequence,t1.adviseamount,t1.paidamount,t1.waivedamount,t1.remarks,t1.valuedate,
		 t1.postdate,t1.version,t1.lastmntby,t1.lastmnton,t1.recordstatus,t1.rolecode,t1.nextrolecode,t1.taskid,t1.nexttaskid,t1.recordtype,t1.workflowid,
		 t2.feetypedesc,t2.feetypecode,t1.bounceid,t1.receiptid,t3.bouncecode,t1.reservedamt,t1.balanceamt,t3.reason AS bouncecodedesc,
		 COALESCE(t2.taxapplicable, 0) AS taxapplicable,t2.taxcomponent,t1.paidcgst,t1.paidsgst,t1.paidigst,t1.paidugst,t1.waivedcgst,
		 t1.waivedsgst,t1.waivedugst,t1.waivedigst,t1.waivedcess,t1.paidcess
   		 FROM manualadvise t1 
   		 LEFT JOIN feetypes t2 ON t1.feetypeid = t2.feetypeid 
   		 LEFT JOIN bouncereasons t3 ON t1.bounceid = t3.bounceid
 		 WHERE NOT (EXISTS ( SELECT 1 FROM manualadvise_temp WHERE manualadvise_temp.adviseid = t1.adviseid))
	 </createView>
	</changeSet>

	<changeSet author="saikiran.v" id="73">
		<addColumn tableName="FinRepayScheduleDetail">
			<column name="taxHeaderId" type="bigint" defaultValue="0">
				<constraints nullable="false" />
			</column>
		</addColumn>
	</changeSet>

	<changeSet author="saikiran.v" id="74">
		<addColumn tableName="FinRepayScheduleDetail_temp">
			<column name="taxHeaderId" type="bigint" defaultValue="0">
				<constraints nullable="false" />
			</column>
		</addColumn>
	</changeSet>

	<changeSet author="saikiran.v" id="73_pre">
		<sql>
		<![CDATA[
			update FinRepayScheduleDetail set taxHeaderId=0 where taxHeaderId is null;
			update FinRepayScheduleDetail_temp set taxHeaderId=0 where taxHeaderId is null;
			update ManualAdviseMovements set taxHeaderId=0 where taxHeaderId is null;
			update ManualAdviseMovements_temp set taxHeaderId=0 where taxHeaderId is null;
			update ReceiptAllocationDetail set taxHeaderId=0 where taxHeaderId is null;
			update ReceiptAllocationDetail_temp set taxHeaderId=0 where taxHeaderId is null;
			update wiffinfeedetail set taxHeaderId=0 where taxHeaderId is null;
			update wiffinfeedetail_temp set taxHeaderId=0 where taxHeaderId is null;
			update finfeedetail set taxHeaderId=0 where taxHeaderId is null;
			update finfeedetail_temp set taxHeaderId=0 where taxHeaderId is null;
			]]>
		</sql>
	</changeSet>

	<changeSet id="44" author="vijaya.a">
		<comment>Clix Installment clearence changes</comment>
		<createTable tableName="EXTERNAL_LIABILITIES_PD">
			<column name="Id" type="bigint" autoIncrement="true">
				<constraints nullable="false" />
			</column>
			<column name="LiabilityId" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="EmiType" type="varchar(50)">
				<constraints nullable="false" />
			</column>
			<column name="InstallmentCleared" type="boolean">
				<constraints nullable="false" />
			</column>
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkflowId" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet id="45" author="vijaya.a">
		<comment>Clix Installment clearence changes</comment>
		<createTable tableName="EXTERNAL_LIABILITIES_PD_TEMP">
			<column name="Id" type="bigint" autoIncrement="true">
				<constraints nullable="false" />
			</column>
			<column name="LiabilityId" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="EmiType" type="varchar(50)">
				<constraints nullable="false" />
			</column>
			<column name="InstallmentCleared" type="boolean">
				<constraints nullable="false" />
			</column>
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkflowId" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet id="47" author="vijaya.a">
		<comment>Clix Installment clearence changes</comment>
		<createView viewName="EXTERNAL_LIABILITIES_PD_VIEW" replaceIfExists="true">
			SELECT t1.id,
    			t1.LiabilityId,
    			t1.EmiType,
			    t1.InstallmentCleared,
			    t1.version,
			    t1.lastmntby,
			    t1.lastmnton,
			    t1.recordstatus,
			    t1.rolecode,
			    t1.nextrolecode,
			    t1.taskid,
			    t1.nexttaskid,
			    t1.recordtype,
			    t1.workflowid
   		    FROM EXTERNAL_LIABILITIES_PD_temp t1
			UNION ALL
 			SELECT t1.id,
    			t1.LiabilityId,
    			t1.EmiType,
			    t1.InstallmentCleared,
			    t1.version,
			    t1.lastmntby,
			    t1.lastmnton,
			    t1.recordstatus,
			    t1.rolecode,
			    t1.nextrolecode,
			    t1.taskid,
			    t1.nexttaskid,
			    t1.recordtype,
			    t1.workflowid
   			FROM EXTERNAL_LIABILITIES_PD t1
		</createView>
	</changeSet>

	<changeSet id="48" author="satyanarayana.g">
		<comment>MaxAmtPerInstruction column added in InstrumentwiseLimit for IMPS Splitting</comment>
		<addColumn tableName="INSTRUMENTWISELIMIT_TEMP">
			<column name="MAXAMTPERINSTRUCTION" type="decimal(18,0)" />
		</addColumn>
	</changeSet>

	<changeSet id="49" author="satyanarayana.g">
		<comment>MaxAmtPerInstruction column added in InstrumentwiseLimit for IMPS Splitting</comment>
		<addColumn tableName="INSTRUMENTWISELIMIT">
			<column name="MAXAMTPERINSTRUCTION" type="decimal(18,0)" />
		</addColumn>
	</changeSet>

	<changeSet id="50" author="satyanarayana.g" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE INSTRUMENTWISELIMIT ADD CONSTRAINT DF_INWSLT_MAXAMTPERINSTION DEFAULT 0 FOR MAXAMTPERINSTRUCTION;
				ALTER TABLE INSTRUMENTWISELIMIT_TEMP ADD CONSTRAINT DF_INWSLT_TMP_MAXAMTPERINSTION DEFAULT 0 FOR MAXAMTPERINSTRUCTION;
			]]>
		</sql>
	</changeSet>

	<changeSet id="50" author="satyanarayana.g" dbms="postgresql, oracle">
		<addDefaultValue columnName="MAXAMTPERINSTRUCTION" tableName="INSTRUMENTWISELIMIT" defaultValue="0" />
		<addDefaultValue columnName="MAXAMTPERINSTRUCTION" tableName="INSTRUMENTWISELIMIT_TEMP" defaultValue="0" />
	</changeSet>

	<changeSet id="51" author="satyanarayana.g">
		<sql>
			<![CDATA[
				UPDATE INSTRUMENTWISELIMIT set MAXAMTPERINSTRUCTION = 0 where MAXAMTPERINSTRUCTION is null;
				UPDATE INSTRUMENTWISELIMIT_TEMP set MAXAMTPERINSTRUCTION = 0 where MAXAMTPERINSTRUCTION is null;
			]]>
		</sql>
	</changeSet>

	<changeSet id="52" author="satyanarayana.g">
		<addNotNullConstraint tableName="INSTRUMENTWISELIMIT" columnName="MAXAMTPERINSTRUCTION"
			columnDataType="decimal(18,0)" />
		<addNotNullConstraint tableName="INSTRUMENTWISELIMIT_TEMP" columnName="MAXAMTPERINSTRUCTION"
			columnDataType="decimal(18,0)" />
	</changeSet>

	<changeSet id="53" author="satyanarayana.g">
		<comment>MaxAmtPerInstruction column added in InstrumentwiseLimit for IMPS Splitting</comment>
		<createView viewName="INSTRUMENTWISELIMIT_VIEW" replaceIfExists="true">
			SELECT T1.ID,
					T1.INSTRUMENTMODE,
					T1.PAYMENTMINAMTPERTRANS,
					T1.PAYMENTMAXAMTPERTRAN,
					T1.PAYMENTMAXAMTPERDAY,
					T1.RECEIPTMINAMTPERTRAN,
					T1.RECEIPTMAXAMTPERTRAN,
					T1.RECEIPTMAXAMTPERDAY,
					T1.MAXAMTPERINSTRUCTION,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
					FROM INSTRUMENTWISELIMIT_TEMP T1
					UNION ALL
					SELECT T1.ID,
					T1.INSTRUMENTMODE,
					T1.PAYMENTMINAMTPERTRANS,
					T1.PAYMENTMAXAMTPERTRAN,
					T1.PAYMENTMAXAMTPERDAY,
					T1.RECEIPTMINAMTPERTRAN,
					T1.RECEIPTMAXAMTPERTRAN,
					T1.RECEIPTMAXAMTPERDAY,
					T1.MAXAMTPERINSTRUCTION,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID
					FROM INSTRUMENTWISELIMIT T1
					WHERE NOT EXISTS
					(SELECT 1 FROM INSTRUMENTWISELIMIT_TEMP WHERE ID = T1.ID
					) 		
			</createView>
	</changeSet>

	<changeSet id="54" author="satyanarayana.g">
		<comment>MaxAmtPerInstruction column added in InstrumentwiseLimit for IMPS Splitting</comment>
		<createView viewName="INSTRUMENTWISELIMIT_AVIEW" replaceIfExists="true">
			   SELECT T1.ID,
					  T1.INSTRUMENTMODE,
					  T1.PAYMENTMINAMTPERTRANS,
					  T1.PAYMENTMAXAMTPERTRAN,
					  T1.PAYMENTMAXAMTPERDAY,
					  T1.RECEIPTMINAMTPERTRAN,
					  T1.RECEIPTMAXAMTPERTRAN,
					  T1.RECEIPTMAXAMTPERDAY,
					  T1.MAXAMTPERINSTRUCTION,
					  T1.VERSION ,
					  T1.LASTMNTBY,
					  T1.LASTMNTON,
					  T1.RECORDSTATUS,
					  T1.ROLECODE,
					  T1.NEXTROLECODE,
					  T1.TASKID,
					  T1.NEXTTASKID,
					  T1.RECORDTYPE,
					  T1.WORKFLOWID
					FROM INSTRUMENTWISELIMIT T1  		
		</createView>
	</changeSet>

	<changeSet id="55" author="vijaya.a">
		<comment>Clix Installment clearence changes</comment>
		<createView viewName="EXTERNAL_LIABILITIES_PD_VIEW" replaceIfExists="true">
			SELECT t1.id,
    			t1.LiabilityId,
    			t1.EmiType,
			    t1.InstallmentCleared,
			    t1.version,
			    t1.lastmntby,
			    t1.lastmnton,
			    t1.recordstatus,
			    t1.rolecode,
			    t1.nextrolecode,
			    t1.taskid,
			    t1.nexttaskid,
			    t1.recordtype,
			    t1.workflowid
   		    FROM EXTERNAL_LIABILITIES_PD_temp t1
			UNION ALL
 			SELECT t1.id,
    			t1.LiabilityId,
    			t1.EmiType,
			    t1.InstallmentCleared,
			    t1.version,
			    t1.lastmntby,
			    t1.lastmnton,
			    t1.recordstatus,
			    t1.rolecode,
			    t1.nextrolecode,
			    t1.taskid,
			    t1.nexttaskid,
			    t1.recordtype,
			    t1.workflowid
   			FROM EXTERNAL_LIABILITIES_PD t1
   			WHERE NOT (EXISTS (SELECT 1 FROM EXTERNAL_LIABILITIES_PD_temp WHERE EXTERNAL_LIABILITIES_PD_temp.LiabilityId = T1.LiabilityId))	
		</createView>
	</changeSet>



	<!-- Fee Waiver Changes END -->

	<changeSet id="99" author="Saikiran.V">
		<sql>
			<![CDATA[
			Update SeqSecRights set SeqNo = (Select max(RightId) from SecRights);
			Update SeqSecGroups set SeqNo = (Select max(GrpId)  from SecGroups);
			Update SeqSecRoles set SeqNo = (Select max(RoleId)  from SecRoles);
			Update SeqSecGroupRights set SeqNo = (Select max(GrpRightId) from SecGroupRights);
			Update SeqSecRoleGroups set SeqNo = (Select max(RoleGrpId) from SecRoleGroups);

			INSERT INTO SECRIGHTS values ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menuItem_CustomerMasters_CustomerDownload','MENU',0,1000,CURRENT_TIMESTAMP,'Approved',null,' ',null,null,' ',0);

			INSERT INTO SECGROUPS values((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'CUSTOMER_DOWNLOAD', 'Customer Download Group', 0,1000,CURRENT_TIMESTAMP,'Approved','',null,'','','',0);

			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='CUSTOMER_DOWNLOAD') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='menuItem_CustomerMasters_CustomerDownload'), 1, 0,1000,CURRENT_TIMESTAMP,'Approved',null,' ',null,null,' ',0);

			INSERT INTO SecRoles  VALUES ((select max(roleid)+1 from secroles),1,'CUSTOMER_DOWNLOAD','Role for Customer Download','',1,1000,CURRENT_TIMESTAMP,'Approved',' ',' ',' ',' ',' ',0) ;

			INSERT INTO SecRoleGroups values((Select MAX(RoleGrpID)+1 From SecRoleGroups),(Select GrpId  From SecGroups Where GrpCode='CUSTOMER_DOWNLOAD'), (Select  RoleID  From SecRoles Where RoleCd='CUSTOMER_DOWNLOAD'),0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			
			Update SeqSecRights set SeqNo = (Select max(RightId) from SecRights);
			Update SeqSecGroups set SeqNo = (Select max(GrpId)  from SecGroups);
			Update SeqSecRoles set SeqNo = (Select max(RoleId)  from SecRoles);
			Update SeqSecGroupRights set SeqNo = (Select max(GrpRightId) from SecGroupRights);
			Update SeqSecRoleGroups set SeqNo = (Select max(RoleGrpId) from SecRoleGroups);
			]]>
		</sql>
	</changeSet>

	<changeSet id="100" author="Saikiran.v">
		<addColumn tableName="RMTFinanceTypes">
			<column name="alwSanctionAmt" type="boolean" />
		</addColumn>
	</changeSet>
	<changeSet id="101" author="Saikiran.v">
		<addColumn tableName="RMTFinanceTypes_temp">
			<column name="alwSanctionAmt" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="102" author="Saikiran.v">
		<addColumn tableName="RMTFinanceTypes">
			<column name="alwSanctionAmtOverride" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="103" author="Saikiran.v">
		<addColumn tableName="RMTFinanceTypes_temp">
			<column name="alwSanctionAmtOverride" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="104" author="Saikiran.v">
		<sql>
			<![CDATA[
				UPDATE RMTFinanceTypes Set alwSanctionAmt = 0;
				UPDATE RMTFinanceTypes_Temp Set alwSanctionAmt = 0;
			
			]]>
		</sql>
	</changeSet>

	<changeSet id="105" author="Saikiran.v" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE RMTFINANCETYPES ADD CONSTRAINT DF_RMTFINANCETYPES_alwSanctionAmt DEFAULT 0 FOR alwSanctionAmt;
				ALTER TABLE RMTFINANCETYPES_TEMP ADD CONSTRAINT DF_RMTFINANCETYPES_TEMP_alwSanctionAm DEFAULT 0 FOR alwSanctionAmt;
			]]>
		</sql>
	</changeSet>

	<changeSet id="106" author="Saikiran.v" dbms="postgresql, oracle">
		<addDefaultValue columnName="alwSanctionAmt" tableName="RMTFinanceTypes" defaultValue="0" />
		<addDefaultValue columnName="alwSanctionAmt" tableName="RMTFinanceTypes_Temp" defaultValue="0" />
	</changeSet>

	<changeSet id="107" author="Saikiran.v">
		<sql>
			<![CDATA[
				UPDATE RMTFinanceTypes Set alwSanctionAmtOverride = 0;
				UPDATE RMTFinanceTypes_Temp Set alwSanctionAmtOverride = 0;
			
			]]>
		</sql>
	</changeSet>

	<changeSet id="108" author="Saikiran.v" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE RMTFINANCETYPES ADD CONSTRAINT DF_RMTFINANCETYPES_alwSanctionAmtOverride DEFAULT 0 FOR alwSanctionAmtOverride;
				ALTER TABLE RMTFINANCETYPES_TEMP ADD CONSTRAINT DF_RMTFINANCETYPES_TEMP_alwSanctionAmtOverride DEFAULT 0 FOR alwSanctionAmtOverride;
			]]>
		</sql>
	</changeSet>

	<changeSet id="109" author="Saikiran.v" dbms="postgresql, oracle">
		<addDefaultValue columnName="alwSanctionAmtOverride" tableName="RMTFinanceTypes" defaultValue="0" />
		<addDefaultValue columnName="alwSanctionAmtOverride" tableName="RMTFinanceTypes_Temp" defaultValue="0" />
	</changeSet>

	<changeSet id="110_pre" author="Saikiran.v" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_aview');
					select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_orgview');
					select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="110" author="Saikiran.v">
		<createView viewName="rmtfinancetypes_aview" replaceIfExists="true">
			SELECT t1.fintype,
    t1.fincategory,
    t1.fintypedesc,
    t1.finccy,
    t1.findayscaltype,
    t1.finactype,
    t1.fincontingentactype,
    t1.finisgenref,
    t1.finmaxamount,
    t1.finminamount,
    t1.finisopennewfinac,
    t1.findftstmtfrq,
    t1.finisalwmd,
    t1.finschdmthd,
    t1.finisalwgrace,
    t1.finhistretension,
    t1.equalrepayment,
    t1.finratetype,
    t1.finbaserate,
    t1.finsplrate,
    t1.finintrate,
    t1.finminrate,
    t1.finmaxrate,
    t1.findftintfrq,
    t1.finisintcpz,
    t1.fincpzfrq,
    t1.finisrvwalw,
    t1.finrvwfrq,
    t1.fingrcratetype,
    t1.fingrcbaserate,
    t1.fingrcsplrate,
    t1.fingrcintrate,
    t1.fingrcminrate,
    t1.fingrcmaxrate,
    t1.fingrcdftintfrq,
    t1.fingrcisintcpz,
    t1.fingrccpzfrq,
    t1.fingrcisrvwalw,
    t1.fingrcrvwfrq,
    t1.finminterm,
    t1.finmaxterm,
    t1.findftterms,
    t1.finrpyfrq,
    t1.finrepaymethod,
    t1.finisalwpartialrpy,
    t1.finisalwdifferment,
    t1.finmaxdifferment,
    t1.finisalwearlyrpy,
    t1.finisalwearlysettle,
    t1.finodrpytries,
    t1.finearlypayrule,
    t1.finearlysettlerule,
    t1.findepositrestrictedto,
    t1.finaebuyorinception,
    t1.finaesellormaturity,
    t1.finisactive,
    t1.version,
    t1.lastmntby,
    t1.lastmnton,
    t1.recordstatus,
    t1.rolecode,
    t1.nextrolecode,
    t1.taskid,
    t1.nexttaskid,
    t1.recordtype,
    t1.workflowid,
    t1.stepfinance,
    t1.steppingmandatory,
    t1.alwmanualsteps,
    t1.alwdsteppolicies,
    t1.dftsteppolicy,
    t4.actypedesc AS lovdescfincontingentactypename,
    t5.actypedesc AS lovdescfinactypename,
    t1.finisdwpayrequired,
    t1.finrvwrateapplfor,
    t1.finalwratechangeanydate,
    t1.finisintcpzatgrcend,
    t1.finelgrulecode,
    t1.limitelgrulecode,
    t1.finschcalcodeonrvw,
    t1.alwplandeferment,
    t1.plandefercount,
    t1.finassettype,
    t1.pftpayactype,
    t1.finisopenpftpayacc,
    t31.actypedesc AS lovdescpftpayactypename,
    t1.finisalwgrcrepay,
    t1.fingrcschdmthd,
    t1.fingrcmargin,
    t1.finmargin,
    t1.finscheduleon,
    t1.fingrcscheduleon,
    t1.fincommitmentreq,
    t1.fincollateralreq,
    t1.findepreciationreq,
    t1.findepreciationfrq,
    t1.finbankcontingentactype,
    t1.finprovisionactype,
    t38.actypedesc AS lovdescfinbankcontactypename,
    t39.actypedesc AS lovdescfinprovisionactypename,
    t1.allowriainvestment,
    t1.overridelimit,
    t1.limitrequired,
    t1.fincommitmentovrride,
    t1.fincollateralovrride,
    t1.finpftunchanged,
    t1.applyodpenalty,
    t1.odincgrcdays,
    t1.odchargetype,
    t1.odgracedays,
    t1.odchargecalon,
    t1.odchargeamtorperc,
    t1.odallowwaiver,
    t1.odmaxwaiverperc,
    t1.findivision,
    t48.divisioncodedesc AS lovdescfindivisionname,
    t48.entitycode AS lovdescentitycode,
    t1.finsuspactype,
    t49.actypedesc AS lovdescfinsuspactypename,
    t1.product,
    t1.startdate,
    t1.enddate,
    t1.allowdownpaypgm,
    t1.remarks,
    t1.alwearlypaymethods,
    t1.pastduepftcalmthd,
    t1.pastduepftmargin,
    t1.alwadvancerent,
    t1.grcadvbaserate,
    t1.grcadvmargin,
    t1.grcadvpftrate,
    t1.rpyadvbaserate,
    t1.rpyadvmargin,
    t1.rpyadvpftrate,
    t1.rolloverfinance,
    t1.rolloverfrq,
    t1.downpayrule,
    t59.rulecode AS downpayrulecode,
    t59.rulecodedesc AS downpayruledesc,
    t1.finsusptrigger,
    t1.finsuspremarks,
    t1.alwmultipartydisb,
    t1.collateraltype,
    t1.tdsapplicable,
    t1.manualschedule,
    t1.applygrcpricing,
    t1.grcpricingmethod,
    t1.applyrpypricing,
    t1.rpypricingmethod,
    t1.rpyhierarchy,
    t67.rulecode AS grcpricingmethoddesc,
    t68.rulecode AS rpypricingmethoddesc,
    t1.droplineod,
    t1.droppingmethod,
    t1.ratechganyday,
    t1.finrepaypftonfrq,
    t1.alwbpi,
    t1.bpitreatment,
    t1.pftdueschon,
    t1.planemihalw,
    t1.planemihmethod,
    t1.planemihmaxperyear,
    t1.planemihmax,
    t1.planemihlockperiod,
    t1.planemicpz,
    t1.unplanemihlockperiod,
    t1.unplanemicpz,
    t1.reagecpz,
    t1.fddlockperiod,
    t1.alwdrpymethods,
    t1.maxunplannedemi,
    t1.maxreageholidays,
    t1.roundingmode,
    t1.roundingtarget,
    t1.frequencydays,
    t1.quickdisb,
    t1.alwreage,
    t1.alwunplanemiholiday,
    t1.alwmaxdisbcheckreq,
    t1.fintypedesc AS lovdescpromofintypedesc,
    t1.profitcenterid,
    t69.profitcentercode,
    t69.profitcenterdesc,
    t1.productcategory,
    t2.productdesc AS fincategorydesc,
    t1.developerfinance,
    t1.costoffunds,
    t1.chequecapturereq,
    t1.finltvcheck,
    t1.partiallysecured,
    t1.alwadvemi,
    t1.advemiminterms,
    t1.advemimaxterms,
    t1.advemidftterms,
    t1.advemischdmthd,
    t1.bpipftdaysbasis,
    t1.eligibilitymethods,
    t1.alwhybridrate,
    t1.fixedratetenor,
    t1.odmincapamount,
    t1.odrulecode,
    t1.alwzerointacc,
    t1.autorejectiondays,
    t1.taxnomand,
    t1.putcallrequired,
    t1.grcadvintersetreq,
    t1.grcadvtype,
    t1.grcadvminterms,
    t1.grcadvmaxterms,
    t1.grcadvdefaultterms,
    t1.advintersetreq,
    t1.advtype,
    t1.advminterms,
    t1.advmaxterms,
    t1.advdefaultterms,
    t1.advstage,
    t1.dsfreq,
    t1.cashcollateralreq,
    t1.tdsallowtomodify,
    t1.tdsapplicableto,
    t1.alwvan,
    t1.vanallocationmethod,
    t1.allowdrawingpower,
    t1.allowrevolving,
	t1.alwSanctionAmt,
	t1.alwSanctionAmtOverride
   FROM rmtfinancetypes t1
     LEFT JOIN bmtproduct t2 ON t1.fincategory = t2.productcode
     LEFT JOIN rmtaccounttypes t4 ON t1.fincontingentactype = t4.actype
     LEFT JOIN rmtaccounttypes t38 ON t1.finbankcontingentactype = t38.actype
     LEFT JOIN rmtaccounttypes t39 ON t1.finprovisionactype = t39.actype
     LEFT JOIN rmtaccounttypes t5 ON t1.finactype = t5.actype
     LEFT JOIN rmtaccounttypes t31 ON t1.pftpayactype = t31.actype
     LEFT JOIN smtdivisiondetail t48 ON t1.findivision = t48.divisioncode
     LEFT JOIN rmtaccounttypes t49 ON t1.finsuspactype = t49.actype
     LEFT JOIN rules t59 ON t1.downpayrule = t59.ruleid
     LEFT JOIN rules t67 ON t1.grcpricingmethod = t67.ruleid
     LEFT JOIN rules t68 ON t1.rpypricingmethod = t68.ruleid
     LEFT JOIN profitcenters t69 ON t69.profitcenterid = t1.profitcenterid
		</createView>
	</changeSet>



	<changeSet id="111" author="Saikiran.v">
		<createView viewName="rmtfinancetypes_orgview" replaceIfExists="true">
			SELECT t1.fintype,
    t1.fincategory,
    t1.fintypedesc,
    t1.finccy,
    t1.findayscaltype,
    t1.finactype,
    t1.fincontingentactype,
    t1.finisgenref,
    t1.finmaxamount,
    t1.finminamount,
    t1.finisopennewfinac,
    t1.finisalwmd,
    t1.finschdmthd,
    t1.finisalwgrace,
    t1.equalrepayment,
    t1.finratetype,
    t1.finbaserate,
    t1.finsplrate,
    t1.finintrate,
    t1.finminrate,
    t1.finmaxrate,
    t1.findftintfrq,
    t1.finisintcpz,
    t1.fincpzfrq,
    t1.finisrvwalw,
    t1.finrvwfrq,
    t1.fingrcratetype,
    t1.fingrcbaserate,
    t1.fingrcsplrate,
    t1.fingrcintrate,
    t1.fingrcminrate,
    t1.fingrcmaxrate,
    t1.fingrcdftintfrq,
    t1.fingrcisintcpz,
    t1.fingrccpzfrq,
    t1.fingrcisrvwalw,
    t1.fingrcrvwfrq,
    t1.finminterm,
    t1.finmaxterm,
    t1.findftterms,
    t1.finrpyfrq,
    t1.finrepaymethod,
    t1.finisalwdifferment,
    t1.finmaxdifferment,
    t1.finisactive,
    t1.stepfinance,
    t1.steppingmandatory,
    t1.alwmanualsteps,
    t1.alwdsteppolicies,
    t1.dftsteppolicy,
    t1.finisdwpayrequired,
    t1.finrvwrateapplfor,
    t1.finalwratechangeanydate,
    t1.finisintcpzatgrcend,
    t1.finschcalcodeonrvw,
    t1.alwplandeferment,
    t1.plandefercount,
    t1.pftpayactype,
    t1.finisopenpftpayacc,
    t1.finisalwgrcrepay,
    t1.fingrcschdmthd,
    t1.fingrcmargin,
    t1.finmargin,
    t1.fincommitmentreq,
    t1.fincollateralreq,
    t1.findepreciationreq,
    t1.findepreciationfrq,
    t1.finbankcontingentactype,
    t1.finprovisionactype,
    t1.allowriainvestment,
    t1.overridelimit,
    t1.limitrequired,
    t1.fincommitmentovrride,
    t1.fincollateralovrride,
    t1.finrepaypftonfrq,
    t1.finpftunchanged,
    t1.applyodpenalty,
    t1.odincgrcdays,
    t1.odchargetype,
    t1.odgracedays,
    t1.odchargecalon,
    t1.odchargeamtorperc,
    t1.odallowwaiver,
    t1.odmaxwaiverperc,
    t1.findivision,
    t3.divisioncodedesc AS lovdescfindivisionname,
    t1.finsuspactype,
    t1.product,
    t1.startdate,
    t1.enddate,
    t1.allowdownpaypgm,
    t1.fintypedesc AS lovdescpromofintypedesc,
    t1.remarks,
    t4.policydesc AS lovdescdftsteppolicyname,
    t1.pastduepftcalmthd,
    t1.pastduepftmargin,
    t1.alwadvancerent,
    t1.grcadvbaserate,
    t1.grcadvmargin,
    t1.grcadvpftrate,
    t1.rpyadvbaserate,
    t1.rpyadvmargin,
    t1.rpyadvpftrate,
    t1.rolloverfinance,
    t1.rolloverfrq,
    t1.downpayrule,
    t1.alwmultipartydisb,
    t1.collateraltype,
    t1.tdsapplicable,
    t5.rulecode AS downpayrulecode,
    t5.rulecodedesc AS downpayruledesc,
    t1.applygrcpricing,
    t1.applyrpypricing,
    t6.rulecode AS grcpricingmethoddesc,
    t7.rulecode AS rpypricingmethoddesc,
    t1.droplineod,
    t1.droppingmethod,
    t1.ratechganyday,
    t4.steptype AS dftsteppolicytype,
    t1.manualschedule,
    t1.alwbpi,
    t1.bpitreatment,
    t1.pftdueschon,
    t1.planemihalw,
    t1.planemihmethod,
    t1.planemihmaxperyear,
    t1.planemihmax,
    t1.planemihlockperiod,
    t1.planemicpz,
    t1.unplanemihlockperiod,
    t1.unplanemicpz,
    t1.reagecpz,
    t1.fddlockperiod,
    t1.alwdrpymethods,
    t1.maxunplannedemi,
    t1.maxreageholidays,
    t1.roundingmode,
    t1.roundingtarget,
    t1.frequencydays,
    t1.quickdisb,
    t1.alwreage,
    t1.alwunplanemiholiday,
    t1.alwmaxdisbcheckreq,
    t1.productcategory,
    t1.rpyhierarchy,
    t1.developerfinance,
    t3.entitycode AS lovdescentitycode,
    t8.entitydesc AS lovdescentitydesc,
    t1.costoffunds,
    t1.chequecapturereq,
    t1.finltvcheck,
    t1.partiallysecured,
    t1.alwadvemi,
    t1.advemiminterms,
    t1.advemimaxterms,
    t1.advemidftterms,
    t1.advemischdmthd,
    t1.bpipftdaysbasis,
    t1.eligibilitymethods,
    t1.alwhybridrate,
    t1.fixedratetenor,
    t1.odmincapamount,
    t1.odrulecode,
    t1.alwzerointacc,
    t1.finisalwpartialrpy,
    t1.autorejectiondays,
    t1.taxnomand,
    t1.putcallrequired,
    t1.grcadvintersetreq,
    t1.grcadvtype,
    t1.grcadvminterms,
    t1.grcadvmaxterms,
    t1.grcadvdefaultterms,
    t1.advintersetreq,
    t1.advtype,
    t1.advminterms,
    t1.advmaxterms,
    t1.advdefaultterms,
    t1.advstage,
    t1.dsfreq,
    t1.cashcollateralreq,
    t1.alwearlypaymethods,
    t1.tdsallowtomodify,
    t1.tdsapplicableto,
    t1.alwvan,
    t1.vanallocationmethod,
    t1.allowdrawingpower,
    t1.allowrevolving,
	t1.alwSanctionAmt,
	t1.alwSanctionAmtOverride
   FROM rmtfinancetypes t1
     JOIN smtdivisiondetail t3 ON t1.findivision = t3.divisioncode
     LEFT JOIN steppolicyheader t4 ON t1.dftsteppolicy = t4.policycode
     LEFT JOIN rules t5 ON t1.downpayrule = t5.ruleid
     LEFT JOIN rules t6 ON t1.grcpricingmethod = t6.ruleid
     LEFT JOIN rules t7 ON t1.rpypricingmethod = t7.ruleid
     LEFT JOIN entity t8 ON t3.entitycode = t8.entitycode
		</createView>
	</changeSet>

	<changeSet id="112" author="Saikiran.v">
		<createView viewName="rmtfinancetypes_view" replaceIfExists="true">
			SELECT t1.fintype,
    t1.fincategory,
    t1.fintypedesc,
    t1.finccy,
    t1.findayscaltype,
    t1.finactype,
    t1.fincontingentactype,
    t1.finisgenref,
    t1.finmaxamount,
    t1.finminamount,
    t1.finisopennewfinac,
    t1.findftstmtfrq,
    t1.finisalwmd,
    t1.finschdmthd,
    t1.finisalwgrace,
    t1.finhistretension,
    t1.equalrepayment,
    t1.finratetype,
    t1.finbaserate,
    t1.finsplrate,
    t1.finintrate,
    t1.finminrate,
    t1.finmaxrate,
    t1.findftintfrq,
    t1.finisintcpz,
    t1.fincpzfrq,
    t1.finisrvwalw,
    t1.finrvwfrq,
    t1.fingrcratetype,
    t1.fingrcbaserate,
    t1.fingrcsplrate,
    t1.fingrcintrate,
    t1.fingrcminrate,
    t1.fingrcmaxrate,
    t1.fingrcdftintfrq,
    t1.fingrcisintcpz,
    t1.fingrccpzfrq,
    t1.fingrcisrvwalw,
    t1.fingrcrvwfrq,
    t1.finminterm,
    t1.finmaxterm,
    t1.findftterms,
    t1.finrpyfrq,
    t1.finrepaymethod,
    t1.finisalwpartialrpy,
    t1.finisalwdifferment,
    t1.finmaxdifferment,
    t1.finisalwearlyrpy,
    t1.finisalwearlysettle,
    t1.finodrpytries,
    t1.finearlypayrule,
    t1.finearlysettlerule,
    t1.findepositrestrictedto,
    t1.finaebuyorinception,
    t1.finaesellormaturity,
    t1.finisactive,
    t1.version,
    t1.lastmntby,
    t1.lastmnton,
    t1.recordstatus,
    t1.rolecode,
    t1.nextrolecode,
    t1.taskid,
    t1.nexttaskid,
    t1.recordtype,
    t1.workflowid,
    t1.stepfinance,
    t1.steppingmandatory,
    t1.alwmanualsteps,
    t1.alwdsteppolicies,
    t1.dftsteppolicy,
    t4.actypedesc AS lovdescfincontingentactypename,
    t5.actypedesc AS lovdescfinactypename,
    t1.finisdwpayrequired,
    t1.finrvwrateapplfor,
    t1.finalwratechangeanydate,
    t1.finisintcpzatgrcend,
    t1.finelgrulecode,
    t1.limitelgrulecode,
    t1.finschcalcodeonrvw,
    t1.alwplandeferment,
    t1.plandefercount,
    t1.finassettype,
    t1.pftpayactype,
    t1.finisopenpftpayacc,
    t31.actypedesc AS lovdescpftpayactypename,
    t1.finisalwgrcrepay,
    t1.fingrcschdmthd,
    t1.fingrcmargin,
    t1.finmargin,
    t1.finscheduleon,
    t1.fingrcscheduleon,
    t1.fincommitmentreq,
    t1.fincollateralreq,
    t1.findepreciationreq,
    t1.findepreciationfrq,
    t1.finbankcontingentactype,
    t1.finprovisionactype,
    t38.actypedesc AS lovdescfinbankcontactypename,
    t39.actypedesc AS lovdescfinprovisionactypename,
    t1.allowriainvestment,
    t1.overridelimit,
    t1.limitrequired,
    t1.fincommitmentovrride,
    t1.fincollateralovrride,
    t1.finpftunchanged,
    t1.applyodpenalty,
    t1.odincgrcdays,
    t1.odchargetype,
    t1.odgracedays,
    t1.odchargecalon,
    t1.odchargeamtorperc,
    t1.odallowwaiver,
    t1.odmaxwaiverperc,
    t1.findivision,
    t48.divisioncodedesc AS lovdescfindivisionname,
    t48.entitycode AS lovdescentitycode,
    t1.finsuspactype,
    t49.actypedesc AS lovdescfinsuspactypename,
    t1.product,
    t1.startdate,
    t1.enddate,
    t1.allowdownpaypgm,
    t1.fintypedesc AS lovdescpromofintypedesc,
    t1.remarks,
    t1.alwearlypaymethods,
    t1.pastduepftcalmthd,
    t1.pastduepftmargin,
    t1.alwadvancerent,
    t1.grcadvbaserate,
    t1.grcadvmargin,
    t1.grcadvpftrate,
    t1.rpyadvbaserate,
    t1.rpyadvmargin,
    t1.rpyadvpftrate,
    t1.rolloverfinance,
    t1.rolloverfrq,
    t1.downpayrule,
    t59.rulecode AS downpayrulecode,
    t59.rulecodedesc AS downpayruledesc,
    t1.finsusptrigger,
    t1.finsuspremarks,
    t1.alwmultipartydisb,
    t1.collateraltype,
    t1.tdsapplicable,
    t1.manualschedule,
    t1.applygrcpricing,
    t1.grcpricingmethod,
    t1.applyrpypricing,
    t1.rpypricingmethod,
    t1.rpyhierarchy,
    t67.rulecode AS grcpricingmethoddesc,
    t68.rulecode AS rpypricingmethoddesc,
    t1.droplineod,
    t1.droppingmethod,
    t1.ratechganyday,
    t1.finrepaypftonfrq,
    t1.alwbpi,
    t1.bpitreatment,
    t1.pftdueschon,
    t1.planemihalw,
    t1.planemihmethod,
    t1.planemihmaxperyear,
    t1.planemihmax,
    t1.planemihlockperiod,
    t1.planemicpz,
    t1.unplanemihlockperiod,
    t1.unplanemicpz,
    t1.reagecpz,
    t1.fddlockperiod,
    t1.alwdrpymethods,
    t1.maxunplannedemi,
    t1.maxreageholidays,
    t1.roundingmode,
    t1.roundingtarget,
    t1.frequencydays,
    t1.quickdisb,
    t1.alwmaxdisbcheckreq,
    t1.alwreage,
    t1.alwunplanemiholiday,
    t1.profitcenterid,
    t69.profitcentercode,
    t69.profitcenterdesc,
    t1.productcategory,
    t2.productdesc AS fincategorydesc,
    t1.developerfinance,
    t1.costoffunds,
    t1.chequecapturereq,
    t1.finltvcheck,
    t1.partiallysecured,
    t1.alwadvemi,
    t1.advemiminterms,
    t1.advemimaxterms,
    t1.advemidftterms,
    t1.advemischdmthd,
    t1.bpipftdaysbasis,
    t1.eligibilitymethods,
    t1.alwhybridrate,
    t1.fixedratetenor,
    t1.odmincapamount,
    t1.odrulecode,
    t1.alwzerointacc,
    t1.autorejectiondays,
    t1.taxnomand,
    t1.putcallrequired,
    t1.grcadvintersetreq,
    t1.grcadvtype,
    t1.grcadvminterms,
    t1.grcadvmaxterms,
    t1.grcadvdefaultterms,
    t1.advintersetreq,
    t1.advtype,
    t1.advminterms,
    t1.advmaxterms,
    t1.advdefaultterms,
    t1.advstage,
    t1.dsfreq,
    t1.cashcollateralreq,
    t1.tdsallowtomodify,
    t1.tdsapplicableto,
    t1.alwvan,
    t1.vanallocationmethod,
    t1.allowdrawingpower,
    t1.allowrevolving,
	t1.alwSanctionAmt,
	t1.alwSanctionAmtOverride
   FROM rmtfinancetypes_temp t1
     LEFT JOIN bmtproduct t2 ON t1.fincategory = t2.productcode
     LEFT JOIN rmtaccounttypes t4 ON t1.fincontingentactype = t4.actype
     LEFT JOIN rmtaccounttypes t38 ON t1.finbankcontingentactype = t38.actype
     LEFT JOIN rmtaccounttypes t39 ON t1.finprovisionactype = t39.actype
     LEFT JOIN rmtaccounttypes t5 ON t1.finactype = t5.actype
     LEFT JOIN rmtaccounttypes t31 ON t1.pftpayactype = t31.actype
     LEFT JOIN smtdivisiondetail t48 ON t1.findivision = t48.divisioncode
     LEFT JOIN rmtaccounttypes t49 ON t1.finsuspactype = t49.actype
     LEFT JOIN rules t59 ON t1.downpayrule = t59.ruleid
     LEFT JOIN rules t67 ON t1.grcpricingmethod = t67.ruleid
     LEFT JOIN rules t68 ON t1.rpypricingmethod = t68.ruleid
     LEFT JOIN profitcenters t69 ON t69.profitcenterid = t1.profitcenterid
UNION ALL
 SELECT t1.fintype,
    t1.fincategory,
    t1.fintypedesc,
    t1.finccy,
    t1.findayscaltype,
    t1.finactype,
    t1.fincontingentactype,
    t1.finisgenref,
    t1.finmaxamount,
    t1.finminamount,
    t1.finisopennewfinac,
    t1.findftstmtfrq,
    t1.finisalwmd,
    t1.finschdmthd,
    t1.finisalwgrace,
    t1.finhistretension,
    t1.equalrepayment,
    t1.finratetype,
    t1.finbaserate,
    t1.finsplrate,
    t1.finintrate,
    t1.finminrate,
    t1.finmaxrate,
    t1.findftintfrq,
    t1.finisintcpz,
    t1.fincpzfrq,
    t1.finisrvwalw,
    t1.finrvwfrq,
    t1.fingrcratetype,
    t1.fingrcbaserate,
    t1.fingrcsplrate,
    t1.fingrcintrate,
    t1.fingrcminrate,
    t1.fingrcmaxrate,
    t1.fingrcdftintfrq,
    t1.fingrcisintcpz,
    t1.fingrccpzfrq,
    t1.fingrcisrvwalw,
    t1.fingrcrvwfrq,
    t1.finminterm,
    t1.finmaxterm,
    t1.findftterms,
    t1.finrpyfrq,
    t1.finrepaymethod,
    t1.finisalwpartialrpy,
    t1.finisalwdifferment,
    t1.finmaxdifferment,
    t1.finisalwearlyrpy,
    t1.finisalwearlysettle,
    t1.finodrpytries,
    t1.finearlypayrule,
    t1.finearlysettlerule,
    t1.findepositrestrictedto,
    t1.finaebuyorinception,
    t1.finaesellormaturity,
    t1.finisactive,
    t1.version,
    t1.lastmntby,
    t1.lastmnton,
    t1.recordstatus,
    t1.rolecode,
    t1.nextrolecode,
    t1.taskid,
    t1.nexttaskid,
    t1.recordtype,
    t1.workflowid,
    t1.stepfinance,
    t1.steppingmandatory,
    t1.alwmanualsteps,
    t1.alwdsteppolicies,
    t1.dftsteppolicy,
    t4.actypedesc AS lovdescfincontingentactypename,
    t5.actypedesc AS lovdescfinactypename,
    t1.finisdwpayrequired,
    t1.finrvwrateapplfor,
    t1.finalwratechangeanydate,
    t1.finisintcpzatgrcend,
    t1.finelgrulecode,
    t1.limitelgrulecode,
    t1.finschcalcodeonrvw,
    t1.alwplandeferment,
    t1.plandefercount,
    t1.finassettype,
    t1.pftpayactype,
    t1.finisopenpftpayacc,
    t31.actypedesc AS lovdescpftpayactypename,
    t1.finisalwgrcrepay,
    t1.fingrcschdmthd,
    t1.fingrcmargin,
    t1.finmargin,
    t1.finscheduleon,
    t1.fingrcscheduleon,
    t1.fincommitmentreq,
    t1.fincollateralreq,
    t1.findepreciationreq,
    t1.findepreciationfrq,
    t1.finbankcontingentactype,
    t1.finprovisionactype,
    t38.actypedesc AS lovdescfinbankcontactypename,
    t39.actypedesc AS lovdescfinprovisionactypename,
    t1.allowriainvestment,
    t1.overridelimit,
    t1.limitrequired,
    t1.fincommitmentovrride,
    t1.fincollateralovrride,
    t1.finpftunchanged,
    t1.applyodpenalty,
    t1.odincgrcdays,
    t1.odchargetype,
    t1.odgracedays,
    t1.odchargecalon,
    t1.odchargeamtorperc,
    t1.odallowwaiver,
    t1.odmaxwaiverperc,
    t1.findivision,
    t48.divisioncodedesc AS lovdescfindivisionname,
    t48.entitycode AS lovdescentitycode,
    t1.finsuspactype,
    t49.actypedesc AS lovdescfinsuspactypename,
    t1.product,
    t1.startdate,
    t1.enddate,
    t1.allowdownpaypgm,
    t1.fintypedesc AS lovdescpromofintypedesc,
    t1.remarks,
    t1.alwearlypaymethods,
    t1.pastduepftcalmthd,
    t1.pastduepftmargin,
    t1.alwadvancerent,
    t1.grcadvbaserate,
    t1.grcadvmargin,
    t1.grcadvpftrate,
    t1.rpyadvbaserate,
    t1.rpyadvmargin,
    t1.rpyadvpftrate,
    t1.rolloverfinance,
    t1.rolloverfrq,
    t1.downpayrule,
    t59.rulecode AS downpayrulecode,
    t59.rulecodedesc AS downpayruledesc,
    t1.finsusptrigger,
    t1.finsuspremarks,
    t1.alwmultipartydisb,
    t1.collateraltype,
    t1.tdsapplicable,
    t1.manualschedule,
    t1.applygrcpricing,
    t1.grcpricingmethod,
    t1.applyrpypricing,
    t1.rpypricingmethod,
    t1.rpyhierarchy,
    t67.rulecode AS grcpricingmethoddesc,
    t68.rulecode AS rpypricingmethoddesc,
    t1.droplineod,
    t1.droppingmethod,
    t1.ratechganyday,
    t1.finrepaypftonfrq,
    t1.alwbpi,
    t1.bpitreatment,
    t1.pftdueschon,
    t1.planemihalw,
    t1.planemihmethod,
    t1.planemihmaxperyear,
    t1.planemihmax,
    t1.planemihlockperiod,
    t1.planemicpz,
    t1.unplanemihlockperiod,
    t1.unplanemicpz,
    t1.reagecpz,
    t1.fddlockperiod,
    t1.alwdrpymethods,
    t1.maxunplannedemi,
    t1.maxreageholidays,
    t1.roundingmode,
    t1.roundingtarget,
    t1.frequencydays,
    t1.quickdisb,
    t1.alwmaxdisbcheckreq,
    t1.alwreage,
    t1.alwunplanemiholiday,
    t1.profitcenterid,
    t69.profitcentercode,
    t69.profitcenterdesc,
    t1.productcategory,
    t2.productdesc AS fincategorydesc,
    t1.developerfinance,
    t1.costoffunds,
    t1.chequecapturereq,
    t1.finltvcheck,
    t1.partiallysecured,
    t1.alwadvemi,
    t1.advemiminterms,
    t1.advemimaxterms,
    t1.advemidftterms,
    t1.advemischdmthd,
    t1.bpipftdaysbasis,
    t1.eligibilitymethods,
    t1.alwhybridrate,
    t1.fixedratetenor,
    t1.odmincapamount,
    t1.odrulecode,
    t1.alwzerointacc,
    t1.autorejectiondays,
    t1.taxnomand,
    t1.putcallrequired,
    t1.grcadvintersetreq,
    t1.grcadvtype,
    t1.grcadvminterms,
    t1.grcadvmaxterms,
    t1.grcadvdefaultterms,
    t1.advintersetreq,
    t1.advtype,
    t1.advminterms,
    t1.advmaxterms,
    t1.advdefaultterms,
    t1.advstage,
    t1.dsfreq,
    t1.cashcollateralreq,
    t1.tdsallowtomodify,
    t1.tdsapplicableto,
    t1.alwvan,
    t1.vanallocationmethod,
    t1.allowdrawingpower,
    t1.allowrevolving,
	t1.alwSanctionAmt,
	t1.alwSanctionAmtOverride
   FROM rmtfinancetypes t1
     LEFT JOIN bmtproduct t2 ON t1.fincategory = t2.productcode
     LEFT JOIN rmtaccounttypes t4 ON t1.fincontingentactype = t4.actype
     LEFT JOIN rmtaccounttypes t38 ON t1.finbankcontingentactype = t38.actype
     LEFT JOIN rmtaccounttypes t39 ON t1.finprovisionactype = t39.actype
     LEFT JOIN rmtaccounttypes t5 ON t1.finactype = t5.actype
     LEFT JOIN rmtaccounttypes t31 ON t1.pftpayactype = t31.actype
     LEFT JOIN smtdivisiondetail t48 ON t1.findivision = t48.divisioncode
     LEFT JOIN rmtaccounttypes t49 ON t1.finsuspactype = t49.actype
     LEFT JOIN rules t59 ON t1.downpayrule = t59.ruleid
     LEFT JOIN rules t67 ON t1.grcpricingmethod = t67.ruleid
     LEFT JOIN rules t68 ON t1.rpypricingmethod = t68.ruleid
     LEFT JOIN profitcenters t69 ON t69.profitcenterid = t1.profitcenterid
  WHERE NOT (EXISTS ( SELECT 1 AS expr1
           FROM rmtfinancetypes_temp
          WHERE rmtfinancetypes_temp.fintype = t1.fintype))
		</createView>
	</changeSet>

	<changeSet id="110_post" author="Saikiran.v" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_restore_dependencies ('plf', 'rmtfinancetypes_aview');
					select deps_restore_dependencies ('plf', 'rmtfinancetypes_orgview');
					select deps_restore_dependencies ('plf', 'rmtfinancetypes_view');
			]]>
		</sql>
	</changeSet>
	<changeSet id="113" author="Saikiran.V">
		<sql>
			<![CDATA[
			delete from SMTPARAMETERS WHERE SYSPARMCODE='CALCULATE_GST_ON_GSTRATE_MASTER'; 
			Insert into SMTPARAMETERS (SYSPARMCODE,SYSPARMDESC,SYSPARMTYPE,SYSPARMMAINT,SYSPARMVALUE,SYSPARMLENGTH,SYSPARMDEC,SYSPARMLIST,SYSPARMVALDMOD,SYSPARMDESCRIPTION,VERSION,LASTMNTBY,LASTMNTON,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID) values ('CALCULATE_GST_ON_GSTRATE_MASTER','Allow GST to calculate on Gst Rate Master','String',0,'N',1,0,null,null,'Allow GST to calculate on Gst Rate Master',1,1000,to_date('30-07-19','DD-MM-RR'),'Approved',null,null,null,null,null,0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="114" author="Durgaprasad G">
		<sql>
			UPDATE SEQSECGROUPS SET SEQNO= (SELECT MAX(GRPID) FROM SECGROUPS);
			UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT
			MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);
			UPDATE SEQSECROLEGROUPS SET SEQNO= (SELECT MAX(ROLEGRPID) FROM SECROLEGROUPS);
			UPDATE SEQSECOPERATIONROLES SET SEQNO=
			(SELECT MAX(OPRROLEID) FROM SECOPERATIONROLES);
			UPDATE SEQSECROLES SET SEQNO= (SELECT MAX(ROLEID) FROM SecRoles);

			INSERT INTO SecRoles VALUES ((select max(roleid)+1 from secroles),1,'GSTDETAILS_MAKER','GST details maintaince maker
			role.','',1,1000,CURRENT_TIMESTAMP,'Approved',' ',' ',' ',' ',' ',0) ;
			INSERT INTO SecRoles VALUES ((select
			max(roleid)+1 from secroles),1,'GSTDETAILS_APPROVER','GST details maintaince approver
			role.','',1,1000,CURRENT_TIMESTAMP,'Approved',' ',' ',' ',' ',' ',0) ;

			INSERT INTO SECGROUPS SELECT (SELECT MAX(GRPID)+1 FROM SECGROUPS), 'GSTMAINTENANCE_MAKER', 'GSTMAINTENANCE_MAKER',
			0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0 FROM SEQSECGROUPS WHERE 0=0;
			INSERT INTO SECGROUPS SELECT (SELECT
			MAX(GRPID)+1 FROM SECGROUPS), 'GSTMAINTENANCE_APPROVER', 'GSTMAINTENANCE_APPROVER', 0,1000,CURRENT_TIMESTAMP,' ','
			',' ',' ',' ',' ',0 FROM SEQSECGROUPS WHERE 0=0;

			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE
			GRPCODE='GSTMAINTENANCE_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE
			RIGHTNAME='menuItem_FinanceManagement_FinanceTaxDetail'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE
			GRPCODE='GSTMAINTENANCE_APPROVER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE
			RIGHTNAME='menuItem_FinanceManagement_FinanceTaxDetail'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);

			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE
			GRPCODE='GSTMAINTENANCE_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE
			RIGHTNAME='button_FinanceTaxDetailList_PrintList'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT
			INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE
			GRPCODE='GSTMAINTENANCE_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE
			RIGHTNAME='button_FinanceTaxDetailList_NewFinanceTaxDetail'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE
			GRPCODE='GSTMAINTENANCE_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE
			RIGHTNAME='button_FinanceTaxDetailDialog_btnEdit'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT
			INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE
			GRPCODE='GSTMAINTENANCE_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE
			RIGHTNAME='button_FinanceTaxDetailDialog_btnNew'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO
			SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE
			GRPCODE='GSTMAINTENANCE_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE
			RIGHTNAME='button_FinanceTaxDetailDialog_btnDelete'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT
			INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE
			GRPCODE='GSTMAINTENANCE_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE
			RIGHTNAME='button_FinanceTaxDetailDialog_btnSave'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT
			INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE
			GRPCODE='GSTMAINTENANCE_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE
			RIGHTNAME='FinanceTaxDetailDialog_FinReference'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO
			SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE
			GRPCODE='GSTMAINTENANCE_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE
			RIGHTNAME='FinanceTaxDetailDialog_ApplicableFor'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO
			SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE
			GRPCODE='GSTMAINTENANCE_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE
			RIGHTNAME='FinanceTaxDetailDialog_TaxExempted'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO
			SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE
			GRPCODE='GSTMAINTENANCE_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceTaxDetailDialog_TaxNumber'),
			1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1
			FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='GSTMAINTENANCE_MAKER') ,(SELECT RIGHTID FROM
			SECRIGHTS WHERE RIGHTNAME='FinanceTaxDetailDialog_AddrLine1'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ','
			',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS
			WHERE GRPCODE='GSTMAINTENANCE_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE
			RIGHTNAME='FinanceTaxDetailDialog_AddrLine2'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO
			SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE
			GRPCODE='GSTMAINTENANCE_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceTaxDetailDialog_AddrLine3'),
			1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1
			FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='GSTMAINTENANCE_MAKER') ,(SELECT RIGHTID FROM
			SECRIGHTS WHERE RIGHTNAME='FinanceTaxDetailDialog_AddrLine4'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ','
			',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS
			WHERE GRPCODE='GSTMAINTENANCE_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE
			RIGHTNAME='FinanceTaxDetailDialog_Country'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO
			SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE
			GRPCODE='GSTMAINTENANCE_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceTaxDetailDialog_Province'),
			1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1
			FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='GSTMAINTENANCE_MAKER') ,(SELECT RIGHTID FROM
			SECRIGHTS WHERE RIGHTNAME='FinanceTaxDetailDialog_City'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE
			GRPCODE='GSTMAINTENANCE_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceTaxDetailDialog_PinCode'), 1,
			0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);

			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE
			GRPCODE='GSTMAINTENANCE_APPROVER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE
			RIGHTNAME='button_FinanceTaxDetailDialog_btnSave'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);

			INSERT INTO SecRoleGroups values((Select MAX(RoleGrpID)+1 From SecRoleGroups),(Select GrpId From SecGroups Where
			GrpCode='GSTMAINTENANCE_MAKER'), (Select RoleID From SecRoles Where
			RoleCd='GSTDETAILS_MAKER'),0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SecRoleGroups values((Select MAX(RoleGrpID)+1 From SecRoleGroups),(Select GrpId From SecGroups Where
			GrpCode='GSTMAINTENANCE_APPROVER'), (Select RoleID From SecRoles Where
			RoleCd='GSTDETAILS_APPROVER'),0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);

			UPDATE SEQSECGROUPS SET SEQNO= (SELECT MAX(GRPID) FROM SECGROUPS);
			UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT
			MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);
			UPDATE SEQSECROLEGROUPS SET SEQNO= (SELECT MAX(ROLEGRPID) FROM SECROLEGROUPS);
			UPDATE SEQSECOPERATIONROLES SET SEQNO=
			(SELECT MAX(OPRROLEID) FROM SECOPERATIONROLES);
			UPDATE SEQSECROLES SET SEQNO= (SELECT MAX(ROLEID) FROM SecRoles);

		</sql>
	</changeSet>

	<changeSet id="115" author="Durgaprasad G">
		<sql>
		<![CDATA[
			Insert into BMTSCHDMETHOD 
			(SCHDMETHOD,SCHDMETHODDESC,VERSION,LASTMNTBY,LASTMNTON,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID) values
			 ('PFTCPZ','Cal. and Capitalize Interest from Last Schedule',1,1000,CURRENT_TIMESTAMP,'Approved',null,null,null,null,null,0);
		]]>
		</sql>
	</changeSet>


	<changeSet id="116" author="Durgaprasad G">
		<addColumn tableName="FINODDETAILS">
			<column name="LpCpz" type="boolean" defaultValue="0" />
		</addColumn>
	</changeSet>

	<changeSet id="117" author="Durgaprasad G">
		<addColumn tableName="FINODDETAILS">
			<column name="LpCpzAmount" type="decimal(18,0)" defaultValue="0" />
		</addColumn>
	</changeSet>

	<changeSet id="118" author="Durgaprasad G">
		<addColumn tableName="FINODDETAILS">
			<column name="LpCurCpzBal" type="decimal(18,0)" defaultValue="0" />
		</addColumn>
	</changeSet>

	<changeSet id="119" author="Durgaprasad G">
		<sql>
			<![CDATA[
				Update FINODDETAILS Set LpCpz = 0, LpCpzAmount = 0, LpCurCpzBal = 0;
			]]>
		</sql>
	</changeSet>
	<changeSet id="120" author="Durgaprasad G">
		<addColumn tableName="FinODDetails_PD">
			<column name="LpCpz" type="boolean" defaultValue="0" />
		</addColumn>
	</changeSet>

	<changeSet id="121" author="Durgaprasad G">
		<addColumn tableName="FinODDetails_PD">
			<column name="LpCpzAmount" type="decimal(18,0)" defaultValue="0" />
		</addColumn>
	</changeSet>

	<changeSet id="122" author="Durgaprasad G">
		<addColumn tableName="FinODDetails_PD">
			<column name="LpCurCpzBal" type="decimal(18,0)" defaultValue="0" />
		</addColumn>
	</changeSet>

	<changeSet id="123" author="Durgaprasad G">
		<sql>
			<![CDATA[
				Update FinODDetails_PD Set LpCpz = 0, LpCpzAmount = 0, LpCurCpzBal = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="124" author="naga.g">
		<createTable tableName="CustomerGST">
			<column name="Id" type="bigint">
				<constraints primaryKey="true" primaryKeyName="CustomerGST_pk" nullable="false" />
			</column>
			<column name="CustId" type="bigint"></column>
			<column name="GstNumber" type="varchar(15)" />
			<column name="FrequencyType" type="varchar(15)"></column>
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkflowId" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet id="125" author="naga.g">
		<createTable tableName="CustomerGST_Temp">
			<column name="Id" type="bigint">
				<constraints primaryKey="true" primaryKeyName="CustomerGST_Temp_pk" nullable="false" />
			</column>
			<column name="CustId" type="bigint"></column>
			<column name="GstNumber" type="varchar(15)" />
			<column name="FrequencyType" type="varchar(15)" />
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkflowId" type="bigint" />
		</createTable>
	</changeSet>
	
	<changeSet id="126" author="naga.g">
		<createView viewName="CustomerGST_view" replaceIfExists="true">
				SELECT t1.id,
			    t1.custid,
			    t1.gstnumber,
			    t1.frequencytype,
			    t1.version,
			    t1.lastmnton,
			    t1.lastmntby,
			    t1.recordstatus,
			    t1.rolecode,
			    t1.nextrolecode,
			    t1.taskid,
			    t1.nexttaskid,
			    t1.recordtype,
			    t1.workflowid
			  	FROM customergst_temp t1
				UNION
				SELECT t1.id,
			    t1.custid,
			    t1.gstnumber,
			    t1.frequencytype,
			    t1.version,
			    t1.lastmnton,
			    t1.lastmntby,
			    t1.recordstatus,
			    t1.rolecode,
			    t1.nextrolecode,
			    t1.taskid,
			    t1.nexttaskid,
			    t1.recordtype,
			    t1.workflowid
			   FROM customergst t1
			  WHERE NOT (EXISTS ( SELECT 1
			           FROM customergst_temp
			          WHERE customergst_temp.id = t1.id))
		</createView>
	</changeSet>
	
	<changeSet id="127" author="naga.g">
		<createView viewName="CustomerGST_aview" replaceIfExists="true">
			SELECT t1.id,
			    t1.custid,
			    t1.gstnumber,
			    t1.frequencytype,
			    t1.version,
			    t1.lastmnton,
			    t1.lastmntby,
			    t1.recordstatus,
			    t1.rolecode,
			    t1.nextrolecode,
			    t1.taskid,
			    t1.nexttaskid,
			    t1.recordtype,
			    t1.workflowid
			   FROM customergst t1
		</createView>
	</changeSet>
	
	<changeSet id="128" author="naga.g">
		<createTable tableName="CustomerGSTdetails">
			<column name="Id" type="bigint">
				<constraints primaryKey="true" primaryKeyName="customergstdetails_id_pk" nullable="false" />
			</column>
			<column name="headerId" type="bigint" />
			<column name="Frequancy" type="varchar(15)"></column>
			<column name="SalAmount" type="bigint" defaultValue="0" />
			<column name="financialyear" type="varchar(4)"></column>

			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkflowId" type="bigint" />
		</createTable>
	</changeSet>

	<changeSet id="129" author="naga.g">
		<createTable tableName="CustomerGSTdetails_temp">
			<column name="Id" type="bigint">
				<constraints primaryKey="true" primaryKeyName="customergstdetails_temp_id_pkey" nullable="false" />
			</column>
			<column name="headerId" type="bigint">
				<constraints foreignKeyName="customergstdetails_temp_headerId_fkey" references="plf.customergst"
					nullable="false" />
			</column>
			<column name="Frequancy" type="varchar(15)"></column>
			<column name="SalAmount" type="bigint" defaultValue="0" />
			<column name="financialyear" type="varchar(4)"></column>
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkflowId" type="bigint" />
		</createTable>
	</changeSet>
	
	<changeSet id="130" author="naga.g">
		<createSequence sequenceName="SEQGSTHEADERDETAILS" />
	</changeSet>
	
	<changeSet id="131" author="naga.g">
		<createSequence sequenceName="SEQGSTDETAILS" />
	</changeSet>
	
	<changeSet id="132" author="naga.g">
		<createView viewName="CustomerGSTdetails_view" replaceIfExists="true">
				SELECT t1.id,
			    t1.headerid,
			    t1.frequancy,
			    t1.financialyear,
			    t1.salamount,
			    t1.version,
			    t1.lastmnton,
			    t1.lastmntby,
			    t1.recordstatus,
			    t1.rolecode,
			    t1.nextrolecode,
			    t1.taskid,
			    t1.nexttaskid,
			    t1.recordtype,
			    t1.workflowid
			   FROM customergstdetails_temp t1
				UNION
				 SELECT t1.id,
			    t1.headerid,
			    t1.frequancy,
			    t1.financialyear,
			    t1.salamount,
			    t1.version,
			    t1.lastmnton,
			    t1.lastmntby,
			    t1.recordstatus,
			    t1.rolecode,
			    t1.nextrolecode,
			    t1.taskid,
			    t1.nexttaskid,
			    t1.recordtype,
			    t1.workflowid
			   FROM customergstdetails t1
			  WHERE NOT (EXISTS ( SELECT 1
			           FROM customergstdetails_temp
			          WHERE customergstdetails_temp.id = t1.id))
		</createView>
	</changeSet>
	
	<changeSet id="133" author="naga.g">
		<createView viewName="CustomerGSTdetails_aview" replaceIfExists="true">
				 SELECT t1.id,
			    t1.headerid,
			    t1.frequancy,
			    t1.financialyear,
			    t1.salamount,
			    t1.version,
			    t1.lastmnton,
			    t1.lastmntby,
			    t1.recordstatus,
			    t1.rolecode,
			    t1.nextrolecode,
			    t1.taskid,
			    t1.nexttaskid,
			    t1.recordtype,
			    t1.workflowid
			   FROM customergstdetails t1
		</createView>
	</changeSet>

	<changeSet id="134" author="naga.g">
		<sql>
		 <![CDATA[
		  UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS); 
		  UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS);
		 
		  insert into SecGroups Values((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'CustomerGSTDetails_MAKER', 'CustomerGST Process Maker', 0,1000,current_timestamp,'Approved',null,null,null,null,null,0 );
		  insert into SecGroups Values((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'CustomerGSTDetails_APPROVER', 'CustomerGST Process Approver', 0,1000,current_timestamp,'Approved',null,null,null,null,null,0 );
		 
		  insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'CustomerGstDetailsDialogCtrl_gstNumber','CustomerGstDetailsDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
 		  insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='CustomerGSTDetails_MAKER'), (select RightID from SecRights WHERE RightName='CustomerGstDetailsDialogCtrl_gstNumber'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );
 		  INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='BFSD_ORIGINATION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='CustomerGstDetailsDialogCtrl_gstNumber'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
		  INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='CL_ORIGINATION_WRM') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='CustomerGstDetailsDialogCtrl_gstNumber'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
		  
 		  insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'CustomerGstDetailsDialogCtrl_frequencyType','CustomerGstDetailsDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
 		  insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='CustomerGSTDetails_MAKER'), (select RightID from SecRights WHERE RightName='CustomerGstDetailsDialogCtrl_frequencyType'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );
 		  INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='BFSD_ORIGINATION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='CustomerGstDetailsDialogCtrl_frequencyType'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
		  INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='CL_ORIGINATION_WRM') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='CustomerGstDetailsDialogCtrl_frequencyType'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
		  
 		  insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'button_CustomerGstDetailsDialog_btnNew','CustomerGstDetailsDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
 		  insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='CustomerGSTDetails_MAKER'), (select RightID from SecRights WHERE RightName='button_CustomerGstDetailsDialog_btnNew'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );
 		  INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='BFSD_ORIGINATION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_CustomerGstDetailsDialog_btnNew'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
		  INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='CL_ORIGINATION_WRM') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_CustomerGstDetailsDialog_btnNew'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
		  
 		  insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'button_CustomerGstDetailsDialog_btnSave','CustomerGstDetailsDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
 		  insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='CustomerGSTDetails_MAKER'), (select RightID from SecRights WHERE RightName='button_CustomerGstDetailsDialog_btnSave'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );
 		  INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='BFSD_ORIGINATION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_CustomerGstDetailsDialog_btnSave'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
		  INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='CL_ORIGINATION_WRM') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_CustomerGstDetailsDialog_btnSave'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
 		  
 		  insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'CustomerGSTDetails_Gstdetails','CustomerGstDetailsDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
 		  insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='CustomerGSTDetails_MAKER'), (select RightID from SecRights WHERE RightName='CustomerGSTDetails_Gstdetails'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );
 		  INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='BFSD_ORIGINATION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='CustomerGSTDetails_Gstdetails'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
		  INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='CL_ORIGINATION_WRM') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='CustomerGSTDetails_Gstdetails'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
 		  
 		  UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS); 
		  UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS);
		 ]]>
		</sql>
	</changeSet>

</databaseChangeLog>
