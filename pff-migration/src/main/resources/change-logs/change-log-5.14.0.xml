<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

	<property name="add.schema" value="dbo." dbms="mssql" />
	<property name="add.schema" value="" dbms="oracle" />
	<property name="add.schema" value="" dbms="postgresql" />
	<property name="call.substr" value="substring" dbms="mssql" />
	<property name="call.substr" value="substr" dbms="oracle" />
	<property name="call.substr" value="substring" dbms="postgresql" />
	<property name="call.auditdb" value="PLFAVANSEQC.." dbms="mssql" />
	<property name="call.auditdb" value=" " dbms="oracle" />
	<property name="call.concatenate" value="+" dbms="mssql" />
	<property name="call.concatenate" value="||" dbms="oracle" />
	<property name="call.concatenate" value="||" dbms="postgresql" />
	<property name="call.collength" value="LEN" dbms="mssql" />
	<property name="call.collength" value="LENGTH" dbms="oracle" />
	<property name="call.collength" value="LENGTH" dbms="postgresql" />
	<property name="call.date" value="getdate()" dbms="mssql" />
	<property name="call.date" value="sysdate" dbms="oracle" />
	<property name="call.date" value="now()" dbms="postgresql" />

	<changeSet id="pre_run_for_pgp" author="Adarsh" runAlways="true" dbms="postgresql">
		<sql>
			Set search_path = plf,public,pg_catalog;
		</sql>
	</changeSet>

	<!-- post 5.13.0 sign off - Bug fixes from client level started -->

	<changeSet id="DE#59.1" author="GopalaSwamy.m">
		<sql>
			<![CDATA[
				DELETE FROM CategoryWiseEvents Where AEEventCode = 'AMZPD'	 	and CategoryCode = 'O';
				DELETE FROM CategoryWiseEvents Where AEEventCode = 'AMZSUSP' 	and CategoryCode = 'O';
				DELETE FROM CategoryWiseEvents Where AEEventCode = 'CANFIN'	 	and CategoryCode = 'O';
				DELETE FROM CategoryWiseEvents Where AEEventCode = 'CMTDISB'	and CategoryCode = 'O';
				DELETE FROM CategoryWiseEvents Where AEEventCode = 'NORM_PD' 	and CategoryCode = 'O';
				DELETE FROM CategoryWiseEvents Where AEEventCode = 'NORM_PIS'	and CategoryCode = 'O';
				DELETE FROM CategoryWiseEvents Where AEEventCode = 'PD_NORM' 	and CategoryCode = 'O';
				DELETE FROM CategoryWiseEvents Where AEEventCode = 'PD_PIS' 	and CategoryCode = 'O';
				DELETE FROM CategoryWiseEvents Where AEEventCode = 'PIS_NORM' 	and CategoryCode = 'O';
				DELETE FROM CategoryWiseEvents Where AEEventCode = 'PIS_PD' 	and CategoryCode = 'O';
				DELETE FROM CategoryWiseEvents Where AEEventCode = 'PROVSN' 	and CategoryCode = 'O';
				DELETE FROM CategoryWiseEvents Where AEEventCode = 'WRITEBK' 	and CategoryCode = 'O';
				
				DELETE FROM CategoryWiseEvents Where AEEventCode = 'DISBINS' 	and CategoryCode = 'O';
				DELETE FROM CategoryWiseEvents Where AEEventCode = 'EARLYPAY' 	and CategoryCode = 'O';
				DELETE FROM CategoryWiseEvents Where AEEventCode = 'INSTDATE' 	and CategoryCode = 'O';
				DELETE FROM CategoryWiseEvents Where AEEventCode = 'LPPAMZ' 	and CategoryCode = 'O';
				   
				INSERT INTO CategoryWiseEvents (AEEventCode, CategoryCode, Active, Mandatory, SeqOrder) VALUES ('DISBINS', 'O', 1, 1, (select max(SeqOrder)+1 from CategoryWiseEvents));
				INSERT INTO CategoryWiseEvents (AEEventCode, CategoryCode, Active, Mandatory, SeqOrder) VALUES ('EARLYPAY', 'O', 1, 1, (select max(SeqOrder)+1 from CategoryWiseEvents));
				INSERT INTO CategoryWiseEvents (AEEventCode, CategoryCode, Active, Mandatory, SeqOrder) VALUES ('INSTDATE', 'O', 1, 0, (select max(SeqOrder)+1 from CategoryWiseEvents));
				INSERT INTO CategoryWiseEvents (AEEventCode, CategoryCode, Active, Mandatory, SeqOrder) VALUES ('LPPAMZ', 'O', 1, 1, (select max(SeqOrder)+1 from CategoryWiseEvents));
			]]>
		</sql>
	</changeSet>

	<changeSet id="PSD#165813" author="GopalaSwamy.m">
		<sql>
			<![CDATA[
				DELETE FROM BMTSCHDMETHOD WHERE SCHDMETHOD = 'POSINT';
				INSERT INTO BMTSCHDMETHOD (SCHDMETHOD, SCHDMETHODDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES('POSINT', 'POS and Calculate Profit', 1, 1000, current_timestamp, 'Approved', null, null, null, null, null, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="PSD#168870.2_pre" author="sivasai.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'customers_aeview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="PSD#168870.2" author="sivasai.p">
		<comment>Nationality Description is added in Customer Shareholder details</comment>
		<createView viewName="CUSTOMERS_AEVIEW" replaceIfExists="true">
			<![CDATA[
			 	SELECT T1.CUSTID,
					T1.CUSTCIF,
					T1.CUSTCOREBANK,
					T1.CUSTCTGCODE,
					T1.CUSTTYPECODE,
					T1.CUSTSHRTNAME,
					T1.CUSTFNAME,
					T1.CUSTLNAME,
					T1.CUSTDOB,
					T1.CUSTNATIONALITY,
					T1.CUSTSECTOR,
					T1.CUSTSUBSECTOR,
					T2.PHONENUMBER,
					T2.PHONEAREACODE,
					T2.PHONECOUNTRYCODE,
					T1.CUSTCRCPR,
					T1.CUSTPASSPORTNO,
					T3.CUSTEMAIL EMAILID,
					T1.CUSTADDLVAR82,
					T4.CUSTTYPEDESC LOVDESCCUSTTYPECODENAME,
					T1.CUSTBASECCY,
					T4.CUSTTYPECTG LOVDESCCUSTCTGTYPE,
					T5.CUSTCTGDESC LOVDESCCUSTCTGCODENAME,
					T6.CUSTSTSDESCRIPTION LOVDESCCUSTSTSNAME,
					T1.CUSTDFTBRANCH,
					T7.BRANCHDESC LOVDESCCUSTDFTBRANCHNAME,
					T1.SUBCATEGORY,
					T1.CASTEID,
					T1.RELIGIONID,
					T8.CASTECODE,
					T8.CASTEDESC,
					T9.RELIGIONCODE,
					T9.RELIGIONDESC,
					COALESCE(T32.ROLEDESC, ${add.schema}FN_GET_ROLEDESC(T1.NEXTROLECODE)) LOVDESCREQUESTSTAGE,
					T1.MARGINDEVIATION,
					T12.NATIONALITYDESC LOVDESCCUSTNATIONALITYNAME
				FROM CUSTOMERS T1
				LEFT JOIN CUSTOMERPHONENUMBERS T2 ON T1.CUSTID = T2.PHONECUSTID AND T2.PHONETYPEPRIORITY = 5
				LEFT JOIN CUSTOMEREMAILS T3 ON T1.CUSTID = T3.CUSTID AND T3.CUSTEMAILTYPECODE = 'OFFICE'
				LEFT JOIN RMTCUSTTYPES T4 ON T1.CUSTTYPECODE = T4.CUSTTYPECODE
				LEFT JOIN BMTCUSTCATEGORIES T5 ON T1.CUSTCTGCODE = T5.CUSTCTGCODE
				LEFT JOIN BMTCUSTSTATUSCODES T6 ON T1.CUSTSTS = T6.CUSTSTSCODE
				LEFT JOIN RMTBRANCHES T7 ON T1.CUSTDFTBRANCH = T7.BRANCHCODE
				LEFT JOIN CASTE T8 ON T1.CASTEID = T8.CASTEID
				LEFT JOIN RELIGION T9 ON T1.RELIGIONID = T9.RELIGIONID
				LEFT JOIN SECROLES T32 ON T1.NEXTROLECODE = T32.ROLECD
				LEFT JOIN BMTNATIONALITYCODES T12 ON T1.CUSTNATIONALITY = T12.NATIONALITYCODE
			]]>
		</createView>
	</changeSet>

	<changeSet id="PSD#168870.2_post" author="sivasai.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'customers_aeview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="DE#288.1" author="narendra.m">
		<sql>
			<![CDATA[
			 	UPDATE BMTDOCUMENTTYPES_TEMP SET PDFMAPPINGREF = 0 WHERE PDFMAPPINGREF is null;
			 	UPDATE BMTDOCUMENTTYPES SET PDFMAPPINGREF = 0 WHERE PDFMAPPINGREF is null;
			]]>
		</sql>
	</changeSet>

	<changeSet id="DE#296.1" author="narendra.m">
		<sql>
			<![CDATA[
			 	UPDATE CUSTOMERDOCUMENTS_TEMP SET DOCREFID = 0 WHERE DOCREFID is null;
			 	UPDATE CUSTOMERDOCUMENTS SET DOCREFID = 0 WHERE DOCREFID is null;
			]]>
		</sql>
	</changeSet>

	<!-- post 5.13.0 sign off - Bug fixes from client level end -->

	<!-- ST#2031 - Step Loans based on Installment amount changes start -->

	<changeSet id="ST#2031.1" author="savitri.n">
		<addColumn tableName="RMTFINANCETYPES">
			<column name="CalcOfSteps" type="varchar(8)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#2031.2" author="savitri.n">
		<addColumn tableName="RMTFINANCETYPES">
			<column name="StepsAppliedFor" type="varchar(8)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#2031.3" author="savitri.n">
		<addColumn tableName="RMTFINANCETYPES_TEMP">
			<column name="CalcOfSteps" type="varchar(8)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#2031.4" author="savitri.n">
		<addColumn tableName="RMTFINANCETYPES_TEMP">
			<column name="StepsAppliedFor" type="varchar(8)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#2031.5" author="savitri.n">
		<addColumn tableName="FINANCEMAIN">
			<column name="CalcOfSteps" type="varchar(8)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#2031.6" author="savitri.n">
		<addColumn tableName="FINANCEMAIN">
			<column name="StepsAppliedFor" type="varchar(8)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#2031.7" author="savitri.n">
		<addColumn tableName="FINANCEMAIN">
			<column name="NoOfGrcSteps" type="int" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#2031.8" author="savitri.n">
		<sql>
			<![CDATA[
				UPDATE FINANCEMAIN Set NoOfGrcSteps = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2031.9" author="savitri.n" dbms="postgresql, oracle">
		<addDefaultValue columnName="NoOfGrcSteps" tableName="FINANCEMAIN" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#2031.9" author="savitri.n" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE FINANCEMAIN ADD CONSTRAINT DF_FM_NoOfGrcSteps DEFAULT 0 FOR NoOfGrcSteps;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2031.10" author="savitri.n">
		<addColumn tableName="FINANCEMAIN_TEMP">
			<column name="CalcOfSteps" type="varchar(8)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#2031.11" author="savitri.n">
		<addColumn tableName="FINANCEMAIN_TEMP">
			<column name="StepsAppliedFor" type="varchar(8)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#2031.12" author="savitri.n">
		<addColumn tableName="FINANCEMAIN_TEMP">
			<column name="NoOfGrcSteps" type="int" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#2031.13" author="savitri.n">
		<sql>
			<![CDATA[
				UPDATE FINANCEMAIN_TEMP Set NoOfGrcSteps = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2031.14" author="savitri.n" dbms="postgresql, oracle">
		<addDefaultValue columnName="NoOfGrcSteps" tableName="FINANCEMAIN_TEMP" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#2031.14" author="savitri.n" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE FINANCEMAIN_TEMP ADD CONSTRAINT DF_FM_T_NoOfGrcSteps DEFAULT 0 FOR NoOfGrcSteps;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2031.15" author="savitri.n">
		<addColumn tableName="WIFFINANCEMAIN">
			<column name="CalcOfSteps" type="varchar(8)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#2031.16" author="savitri.n">
		<addColumn tableName="WIFFINANCEMAIN">
			<column name="StepsAppliedFor" type="varchar(8)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#2031.17" author="savitri.n">
		<addColumn tableName="WIFFINANCEMAIN">
			<column name="NoOfGrcSteps" type="int" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#2031.18" author="savitri.n">
		<sql>
			<![CDATA[
				UPDATE WIFFINANCEMAIN Set NoOfGrcSteps = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2031.19" author="savitri.n" dbms="postgresql, oracle">
		<addDefaultValue columnName="NoOfGrcSteps" tableName="WIFFINANCEMAIN" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#2031.19" author="savitri.n" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE WIFFINANCEMAIN ADD CONSTRAINT DF_WIFFM_NoOfGrcSteps DEFAULT 0 FOR NoOfGrcSteps;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2031.20" author="savitri.n">
		<addColumn tableName="WIFFINANCEMAIN_TEMP">
			<column name="CalcOfSteps" type="varchar(8)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#2031.21" author="savitri.n">
		<addColumn tableName="WIFFINANCEMAIN_TEMP">
			<column name="StepsAppliedFor" type="varchar(8)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#2031.22" author="savitri.n">
		<addColumn tableName="WIFFINANCEMAIN_TEMP">
			<column name="NoOfGrcSteps" type="int" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#2031.23" author="savitri.n">
		<sql>
			<![CDATA[
				UPDATE WIFFINANCEMAIN_TEMP Set NoOfGrcSteps = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2031.24" author="savitri.n" dbms="postgresql, oracle">
		<addDefaultValue columnName="NoOfGrcSteps" tableName="WIFFINANCEMAIN_TEMP" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#2031.24" author="savitri.n" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE WIFFINANCEMAIN_TEMP ADD CONSTRAINT DF_WIFFMT_NoOfGrcSteps DEFAULT 0 FOR NoOfGrcSteps;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2031.25" author="savitri.n">
		<addColumn tableName="REJECTFINANCEMAIN">
			<column name="CalcOfSteps" type="varchar(8)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#2031.26" author="savitri.n">
		<addColumn tableName="REJECTFINANCEMAIN">
			<column name="StepsAppliedFor" type="varchar(8)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#2031.27" author="savitri.n">
		<addColumn tableName="REJECTFINANCEMAIN">
			<column name="NoOfGrcSteps" type="int" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#2031.28" author="savitri.n">
		<sql>
			<![CDATA[
				UPDATE REJECTFINANCEMAIN Set NoOfGrcSteps = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2031.29" author="savitri.n" dbms="postgresql, oracle">
		<addDefaultValue columnName="NoOfGrcSteps" tableName="REJECTFINANCEMAIN" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#2031.29" author="savitri.n" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE REJECTFINANCEMAIN ADD CONSTRAINT DF_RFM_NoOfGrcSteps DEFAULT 0 FOR NoOfGrcSteps;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2031.30" author="savitri.n">
		<addColumn tableName="FINSTEPPOLICYDETAIL">
			<column name="StepSpecifier" type="varchar(5)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#2031.31" author="savitri.n">
		<addColumn tableName="FINSTEPPOLICYDETAIL">
			<column name="StepStart" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#2031.32" author="savitri.n">
		<addColumn tableName="FINSTEPPOLICYDETAIL">
			<column name="StepEnd" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#2031.33" author="savitri.n">
		<addColumn tableName="FINSTEPPOLICYDETAIL">
			<column name="AutoCal" type="smallint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#2031.34" author="savitri.n">
		<sql>
			<![CDATA[
				UPDATE FINSTEPPOLICYDETAIL Set StepSpecifier = 'R';
				UPDATE FINSTEPPOLICYDETAIL Set AutoCal = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2031.35" author="savitri.n" dbms="postgresql, oracle">
		<addDefaultValue columnName="StepSpecifier" tableName="FINSTEPPOLICYDETAIL" defaultValue="R" />
		<addDefaultValue columnName="AutoCal" tableName="FINSTEPPOLICYDETAIL" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#2031.35" author="savitri.n" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE FINSTEPPOLICYDETAIL ADD CONSTRAINT DF_FSPD_StepSpecifier DEFAULT 'R' FOR StepSpecifier;
				ALTER TABLE FINSTEPPOLICYDETAIL ADD CONSTRAINT DF_FSPD_AutoCal DEFAULT 0 FOR AutoCal;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2031.36" author="savitri.n">
		<addColumn tableName="FINSTEPPOLICYDETAIL_TEMP">
			<column name="StepSpecifier" type="varchar(5)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#2031.37" author="savitri.n">
		<addColumn tableName="FINSTEPPOLICYDETAIL_TEMP">
			<column name="StepStart" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#2031.38" author="savitri.n">
		<addColumn tableName="FINSTEPPOLICYDETAIL_TEMP">
			<column name="StepEnd" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#2031.39" author="savitri.n">
		<addColumn tableName="FINSTEPPOLICYDETAIL_TEMP">
			<column name="AutoCal" type="smallint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#2031.40" author="savitri.n">
		<sql>
			<![CDATA[
				UPDATE FINSTEPPOLICYDETAIL_TEMP Set StepSpecifier = 'R';
				UPDATE FINSTEPPOLICYDETAIL_TEMP Set AutoCal = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2031.41" author="savitri.n" dbms="postgresql, oracle">
		<addDefaultValue columnName="StepSpecifier" tableName="FINSTEPPOLICYDETAIL_TEMP" defaultValue="R" />
		<addDefaultValue columnName="AutoCal" tableName="FINSTEPPOLICYDETAIL_TEMP" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#2031.41" author="savitri.n" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE FINSTEPPOLICYDETAIL_TEMP ADD CONSTRAINT DF_FSPD_T_StepSpecifier DEFAULT 'R' FOR StepSpecifier;
				ALTER TABLE FINSTEPPOLICYDETAIL_TEMP ADD CONSTRAINT DF_FSPD_T_AutoCal DEFAULT 0 FOR AutoCal;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2031.42" author="savitri.n">
		<addColumn tableName="WIFFINSTEPPOLICYDETAIL">
			<column name="StepSpecifier" type="varchar(5)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#2031.43" author="savitri.n">
		<addColumn tableName="WIFFINSTEPPOLICYDETAIL">
			<column name="StepStart" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#2031.44" author="savitri.n">
		<addColumn tableName="WIFFINSTEPPOLICYDETAIL">
			<column name="StepEnd" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#2031.45" author="savitri.n">
		<addColumn tableName="WIFFINSTEPPOLICYDETAIL">
			<column name="AutoCal" type="smallint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#2031.46" author="savitri.n">
		<sql>
			<![CDATA[
				UPDATE WIFFINSTEPPOLICYDETAIL Set StepSpecifier = 'R';
				UPDATE WIFFINSTEPPOLICYDETAIL Set AutoCal = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2031.47" author="savitri.n" dbms="postgresql, oracle">
		<addDefaultValue columnName="StepSpecifier" tableName="WIFFINSTEPPOLICYDETAIL" defaultValue="R" />
		<addDefaultValue columnName="AutoCal" tableName="WIFFINSTEPPOLICYDETAIL" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#2031.47" author="savitri.n" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE WIFFinStepPolicyDetail ADD CONSTRAINT DF_WIFFSPD_StepSpecifier DEFAULT 'R' FOR StepSpecifier;
				ALTER TABLE WIFFinStepPolicyDetail ADD CONSTRAINT DF_WIFFSPD_AutoCal DEFAULT 0 FOR AutoCal;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2031.48" author="savitri.n">
		<addColumn tableName="WIFFINSTEPPOLICYDETAIL_TEMP">
			<column name="StepSpecifier" type="varchar(5)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#2031.49" author="savitri.n">
		<addColumn tableName="WIFFINSTEPPOLICYDETAIL_TEMP">
			<column name="StepStart" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#2031.50" author="savitri.n">
		<addColumn tableName="WIFFINSTEPPOLICYDETAIL_TEMP">
			<column name="StepEnd" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#2031.51" author="savitri.n">
		<addColumn tableName="WIFFINSTEPPOLICYDETAIL_TEMP">
			<column name="AutoCal" type="smallint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#2031.52" author="savitri.n">
		<sql>
			<![CDATA[
				UPDATE WIFFinStepPolicyDetail_temp Set StepSpecifier = 'R';
				UPDATE WIFFinStepPolicyDetail_temp Set AutoCal = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2031.53" author="savitri.n" dbms="postgresql, oracle">
		<addDefaultValue columnName="StepSpecifier" tableName="WIFFINSTEPPOLICYDETAIL_TEMP" defaultValue="R" />
		<addDefaultValue columnName="AutoCal" tableName="WIFFINSTEPPOLICYDETAIL_TEMP" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#2031.53" author="savitri.n" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE WIFFINSTEPPOLICYDETAIL_TEMP ADD CONSTRAINT DF_WIFFSPD_T_StepSpecifier DEFAULT 'R' FOR StepSpecifier;
				ALTER TABLE WIFFINSTEPPOLICYDETAIL_TEMP ADD CONSTRAINT DF_WIFFSPD_T_AutoCal DEFAULT 0 FOR AutoCal;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2031.54" author="savitri.n">
		<dropPrimaryKey constraintName="pk_financesteppolicydetail" tableName="FINSTEPPOLICYDETAIL" />
	</changeSet>

	<changeSet id="ST#2031.55_Pre" author="savitri.n">
		<addNotNullConstraint tableName="FINSTEPPOLICYDETAIL" columnName="StepSpecifier" columnDataType="varchar(5)" />
	</changeSet>

	<changeSet id="ST#2031.55" author="savitri.n">
		<addPrimaryKey columnNames="StepSpecifier,FinReference,StepNo" constraintName="pk_financesteppolicydetail"
			tableName="FINSTEPPOLICYDETAIL" />
	</changeSet>

	<changeSet id="ST#2031.56" author="savitri.n">
		<dropPrimaryKey constraintName="pk_finsteppolicydetail_temp" tableName="FINSTEPPOLICYDETAIL_TEMP" />
	</changeSet>

	<changeSet id="ST#2031.57_Pre" author="savitri.n">
		<addNotNullConstraint tableName="FINSTEPPOLICYDETAIL_TEMP" columnName="StepSpecifier"
			columnDataType="varchar(5)" />
	</changeSet>

	<changeSet id="ST#2031.57" author="savitri.n">
		<addPrimaryKey columnNames="StepSpecifier,FinReference,StepNo" constraintName="pk_finsteppolicydetail_temp"
			tableName="FINSTEPPOLICYDETAIL_TEMP" />
	</changeSet>

	<changeSet id="ST#2031.58" author="savitri.n">
		<dropPrimaryKey constraintName="pk_wiffinancesteppolicydetail" tableName="WIFFINSTEPPOLICYDETAIL" />
	</changeSet>

	<changeSet id="ST#2031.59_Pre" author="savitri.n">
		<addNotNullConstraint tableName="WIFFINSTEPPOLICYDETAIL" columnName="StepSpecifier"
			columnDataType="varchar(5)" />
	</changeSet>

	<changeSet id="ST#2031.59" author="savitri.n">
		<addPrimaryKey columnNames="StepSpecifier,FinReference,StepNo" constraintName="pk_wiffinancesteppolicydetail"
			tableName="WIFFINSTEPPOLICYDETAIL" />
	</changeSet>

	<changeSet id="ST#2031.60" author="savitri.n">
		<dropPrimaryKey constraintName="pk_wiffinsteppolicydetail_temp" tableName="WIFFINSTEPPOLICYDETAIL_TEMP" />
	</changeSet>

	<changeSet id="ST#2031.61_Pre" author="savitri.n">
		<addNotNullConstraint tableName="WIFFINSTEPPOLICYDETAIL_TEMP" columnName="StepSpecifier"
			columnDataType="varchar(5)" />
	</changeSet>

	<changeSet id="ST#2031.61" author="savitri.n">
		<addPrimaryKey columnNames="StepSpecifier,FinReference,StepNo" constraintName="pk_wiffinsteppolicydetail_temp"
			tableName="WIFFINSTEPPOLICYDETAIL_TEMP" />
	</changeSet>

	<changeSet id="ST#2031.62" author="savitri.n">
		<sql>
			<![CDATA[
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'FinStepPolicyDetailDialog_AutoCal';
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ((SELECT max(RIGHTID)+1 FROM SECRIGHTS), 3, 'FinStepPolicyDetailDialog_AutoCal', 'FinStepPolicyDetailDialog', 0, 1000, current_timestamp, 'Approved', '', '', '', '', '', 0);
				
			    INSERT INTO	SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE =	'BFSD_ORIGINATION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE	RIGHTNAME = 'FinStepPolicyDetailDialog_AutoCal'), 1, 1, 1000,	CURRENT_TIMESTAMP, 'Approved', '', '', '', '', '', 0);
				]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2031.63" author="savitri.n">
		<sql>
			<![CDATA[
				DELETE FROM ERRORDETAILS WHERE CODE = 'STP001';
				DELETE FROM ERRORDETAILS WHERE CODE = 'STP002';
				DELETE FROM ERRORDETAILS WHERE CODE = 'STP003';
				DELETE FROM ERRORDETAILS WHERE CODE = 'STP004';
				DELETE FROM ERRORDETAILS WHERE CODE = 'STP005';
				
				INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION) VALUES('STP001', 'EN', 'I', 'Grace schedule method will be overridden by repay schedule method as it is a graded schedule even in grace period', '', 'Approved', '', '', '', '', '', 0, CURRENT_TIMESTAMP, 1000, 0);
				INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION) VALUES('STP002', 'EN', 'W', 'Sum of Total Capitalized Interest during tenor and  Total Disbursed Amount is more than the sanction amount', '', 'Approved', '', '', '', '', '', 0, CURRENT_TIMESTAMP, 1000, 0);
				INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION) VALUES('STP003', 'EN', 'E', 'EMI is less than the interest amount for the given step. Increase the EMI amount for the given Step', '', 'Approved', '', '', '', '', '', 0, CURRENT_TIMESTAMP, 1000, 0);
				INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION) VALUES('STP004', 'EN', 'E', 'Auto calculate for {0} should be false', '', 'Approved', '', '', '', '', '', 0, CURRENT_TIMESTAMP, 1000, 0);
				INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION) VALUES('STP005', 'EN', 'E', 'Number of Repay Steps must be equal to entered Number of Repay Steps', '', 'Approved', '', '', '', '', '', 0, CURRENT_TIMESTAMP, 1000, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2031.64_pre" author="savitri.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_view');
		 	]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2031.64" author="savitri.n">
		<createView viewName="RMTFINANCETYPES_VIEW" replaceIfExists="true">
		   <![CDATA[
				SELECT T1.FINTYPE,
					T1.FINCATEGORY,
					T1.FINTYPEDESC,
					T1.FINCCY,
					T1.FINDAYSCALTYPE,
					T1.FINACTYPE,
					T1.FINCONTINGENTACTYPE,
					T1.FINISGENREF,
					T1.FINMAXAMOUNT,
					T1.FINMINAMOUNT,
					T1.FINISOPENNEWFINAC,
					T1.FINDFTSTMTFRQ,
					T1.FINISALWMD,
					T1.FINSCHDMTHD,
					T1.FINISALWGRACE,
					T1.FINHISTRETENSION,
					T1.EQUALREPAYMENT,
					T1.FINRATETYPE,
					T1.FINBASERATE,
					T1.FINSPLRATE,
					T1.FININTRATE,
					T1.FINMINRATE,
					T1.FINMAXRATE,
					T1.FINDFTINTFRQ,
					T1.FINISINTCPZ,
					T1.FINCPZFRQ,
					T1.FINISRVWALW,
					T1.FINRVWFRQ,
					T1.FINGRCRATETYPE,
					T1.FINGRCBASERATE,
					T1.FINGRCSPLRATE,
					T1.FINGRCINTRATE,
					T1.FINGRCMINRATE,
					T1.FINGRCMAXRATE,
					T1.FINGRCDFTINTFRQ,
					T1.FINGRCISINTCPZ,
					T1.FINGRCCPZFRQ,
					T1.FINGRCISRVWALW,
					T1.FINGRCRVWFRQ,
					T1.FINMINTERM,
					T1.FINMAXTERM,
					T1.FINDFTTERMS,
					T1.FINRPYFRQ,
					T1.FINREPAYMETHOD,
					T1.FINISALWPARTIALRPY,
					T1.FINISALWDIFFERMENT,
					T1.FINMAXDIFFERMENT,
					T1.FINISALWEARLYRPY,
					T1.FINISALWEARLYSETTLE,
					T1.FINODRPYTRIES,
					T1.FINEARLYPAYRULE,
					T1.FINEARLYSETTLERULE,
					T1.FINDEPOSITRESTRICTEDTO,
					T1.FINAEBUYORINCEPTION,
					T1.FINAESELLORMATURITY,
					T1.FINISACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.STEPFINANCE,
					T1.STEPPINGMANDATORY,
					T1.ALWMANUALSTEPS,
					T1.ALWDSTEPPOLICIES,
					T1.DFTSTEPPOLICY,
					T4.ACTYPEDESC LOVDESCFINCONTINGENTACTYPENAME,
					T5.ACTYPEDESC LOVDESCFINACTYPENAME,
					T1.FINISDWPAYREQUIRED,
					T1.FINRVWRATEAPPLFOR,
					T1.FINALWRATECHANGEANYDATE,
					T1.FINISINTCPZATGRCEND,
					T1.FINELGRULECODE,
					T1.LIMITELGRULECODE,
					T1.FINSCHCALCODEONRVW,
					T1.ALWPLANDEFERMENT,
					T1.PLANDEFERCOUNT,
					T1.FINASSETTYPE,
					T1.PFTPAYACTYPE,
					T1.FINISOPENPFTPAYACC,
					T31.ACTYPEDESC LOVDESCPFTPAYACTYPENAME,
					T1.FINISALWGRCREPAY,
					T1.FINGRCSCHDMTHD,
					T1.FINGRCMARGIN,
					T1.FINMARGIN,
					T1.FINSCHEDULEON,
					T1.FINGRCSCHEDULEON,
					T1.FINCOMMITMENTREQ,
					T1.FINCOLLATERALREQ,
					T1.FINDEPRECIATIONREQ,
					T1.FINDEPRECIATIONFRQ,
					T1.FINBANKCONTINGENTACTYPE,
					T1.FINPROVISIONACTYPE,
					T38.ACTYPEDESC LOVDESCFINBANKCONTACTYPENAME,
					T39.ACTYPEDESC LOVDESCFINPROVISIONACTYPENAME,
					T1.ALLOWRIAINVESTMENT,
					T1.OVERRIDELIMIT,
					T1.LIMITREQUIRED,
					T1.FINCOMMITMENTOVRRIDE,
					T1.FINCOLLATERALOVRRIDE,
					T1.FINPFTUNCHANGED,
					T1.APPLYODPENALTY,
					T1.ODINCGRCDAYS,
					T1.ODCHARGETYPE,
					T1.ODGRACEDAYS,
					T1.ODCHARGECALON,
					T1.ODCHARGEAMTORPERC,
					T1.ODALLOWWAIVER,
					T1.ODMAXWAIVERPERC,
					T1.FINDIVISION,
					T48.DIVISIONCODEDESC LOVDESCFINDIVISIONNAME,
					T48.ENTITYCODE LOVDESCENTITYCODE,
					T1.FINSUSPACTYPE,
					T49.ACTYPEDESC LOVDESCFINSUSPACTYPENAME,
					T1.PRODUCT,
					T1.STARTDATE,
					T1.ENDDATE,
					T1.ALLOWDOWNPAYPGM,
					T1.FINTYPEDESC LOVDESCPROMOFINTYPEDESC,
					T1.REMARKS,
					T1.ALWEARLYPAYMETHODS,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.ALWADVANCERENT,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.ROLLOVERFINANCE,
					T1.ROLLOVERFRQ,
					T1.DOWNPAYRULE,
					T59.RULECODE DOWNPAYRULECODE,
					T59.RULECODEDESC DOWNPAYRULEDESC,
					T1.FINSUSPTRIGGER,
					T1.FINSUSPREMARKS,
					T1.ALWMULTIPARTYDISB,
					T1.COLLATERALTYPE,
					T1.TDSAPPLICABLE,
					T1.MANUALSCHEDULE,
					T1.APPLYGRCPRICING,
					T1.GRCPRICINGMETHOD,
					T1.APPLYRPYPRICING,
					T1.RPYPRICINGMETHOD,
					T1.RPYHIERARCHY,
					T67.RULECODE GRCPRICINGMETHODDESC,
					T68.RULECODE RPYPRICINGMETHODDESC,
					T1.DROPLINEOD,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.FINREPAYPFTONFRQ,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PFTDUESCHON,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.UNPLANEMIHLOCKPERIOD,
					T1.UNPLANEMICPZ,
					T1.REAGECPZ,
					T1.FDDLOCKPERIOD,
					T1.ALWDRPYMETHODS,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.ROUNDINGMODE,
					T1.ROUNDINGTARGET,
					T1.FREQUENCYDAYS,
					T1.QUICKDISB,
					T1.ALWMAXDISBCHECKREQ,
					T1.ALWREAGE,
					T1.ALWUNPLANEMIHOLIDAY,
					T1.PROFITCENTERID,
					T69.PROFITCENTERCODE,
					T69.PROFITCENTERDESC,
					T1.PRODUCTCATEGORY,
					T2.PRODUCTDESC FINCATEGORYDESC,
					T1.DEVELOPERFINANCE,
					T1.COSTOFFUNDS,
					T1.CHEQUECAPTUREREQ,
					T1.FINLTVCHECK,
					T1.PARTIALLYSECURED,
					T1.ALWADVEMI,
					T1.ADVEMIMINTERMS,
					T1.ADVEMIMAXTERMS,
					T1.ADVEMIDFTTERMS,
					T1.ADVEMISCHDMTHD,
					T1.BPIPFTDAYSBASIS,
					T1.ELIGIBILITYMETHODS,
					T1.ALWHYBRIDRATE,
					T1.FIXEDRATETENOR,
					T1.ODMINCAPAMOUNT,
					T1.ODRULECODE,
					T1.ALWZEROINTACC,
					T1.AUTOREJECTIONDAYS,
					T1.TAXNOMAND,
					T1.PUTCALLREQUIRED,
					T1.GRCADVINTERSETREQ,
					T1.GRCADVTYPE,
					T1.GRCADVMINTERMS,
					T1.GRCADVMAXTERMS,
					T1.GRCADVDEFAULTTERMS,
					T1.ADVINTERSETREQ,
					T1.ADVTYPE,
					T1.ADVMINTERMS,
					T1.ADVMAXTERMS,
					T1.ADVDEFAULTTERMS,
					T1.ADVSTAGE,
					T1.DSFREQ,
					T1.CASHCOLLATERALREQ,
					T1.TDSALLOWTOMODIFY,
					T1.TDSAPPLICABLETO,
					T1.ALWVAN,
					T1.VANALLOCATIONMETHOD,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING,
					T1.ALWSANCTIONAMT,
					T1.ALWSANCTIONAMTOVERRIDE,
					T1.SANBSDSCHDLE,
					T1.FINISRATERVWATGRCEND,
					T1.SCHDONPMTCAL,
					T1.AUTOAPPROVE,
					T1.ALWPLANNEDEMIINGRC,
					T1.GRCADJREQ,
					T1.GRCPERIODAFTRFULLDISB,
					T1.AUTOINCRGRCENDDATE,
					T1.GRCAUTOINCRMONTHS,
					T1.MAXAUTOINCRALLOWED,
					T1.THRLDTOMAINTAINGRCPRD,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR
				FROM RMTFINANCETYPES_TEMP T1
				LEFT JOIN BMTPRODUCT T2 ON T1.FINCATEGORY = T2.PRODUCTCODE
				LEFT JOIN RMTACCOUNTTYPES T4 ON T1.FINCONTINGENTACTYPE = T4.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T38 ON T1.FINBANKCONTINGENTACTYPE = T38.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T39 ON T1.FINPROVISIONACTYPE = T39.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T5 ON T1.FINACTYPE = T5.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T31 ON T1.PFTPAYACTYPE = T31.ACTYPE
				LEFT JOIN SMTDIVISIONDETAIL T48 ON T1.FINDIVISION = T48.DIVISIONCODE
				LEFT JOIN RMTACCOUNTTYPES T49 ON T1.FINSUSPACTYPE = T49.ACTYPE
				LEFT JOIN RULES T59 ON T1.DOWNPAYRULE = T59.RULEID
				LEFT JOIN RULES T67 ON T1.GRCPRICINGMETHOD = T67.RULEID
				LEFT JOIN RULES T68 ON T1.RPYPRICINGMETHOD = T68.RULEID
				LEFT JOIN PROFITCENTERS T69 ON T69.PROFITCENTERID = T1.PROFITCENTERID
				UNION ALL
				SELECT T1.FINTYPE,
					T1.FINCATEGORY,
					T1.FINTYPEDESC,
					T1.FINCCY,
					T1.FINDAYSCALTYPE,
					T1.FINACTYPE,
					T1.FINCONTINGENTACTYPE,
					T1.FINISGENREF,
					T1.FINMAXAMOUNT,
					T1.FINMINAMOUNT,
					T1.FINISOPENNEWFINAC,
					T1.FINDFTSTMTFRQ,
					T1.FINISALWMD,
					T1.FINSCHDMTHD,
					T1.FINISALWGRACE,
					T1.FINHISTRETENSION,
					T1.EQUALREPAYMENT,
					T1.FINRATETYPE,
					T1.FINBASERATE,
					T1.FINSPLRATE,
					T1.FININTRATE,
					T1.FINMINRATE,
					T1.FINMAXRATE,
					T1.FINDFTINTFRQ,
					T1.FINISINTCPZ,
					T1.FINCPZFRQ,
					T1.FINISRVWALW,
					T1.FINRVWFRQ,
					T1.FINGRCRATETYPE,
					T1.FINGRCBASERATE,
					T1.FINGRCSPLRATE,
					T1.FINGRCINTRATE,
					T1.FINGRCMINRATE,
					T1.FINGRCMAXRATE,
					T1.FINGRCDFTINTFRQ,
					T1.FINGRCISINTCPZ,
					T1.FINGRCCPZFRQ,
					T1.FINGRCISRVWALW,
					T1.FINGRCRVWFRQ,
					T1.FINMINTERM,
					T1.FINMAXTERM,
					T1.FINDFTTERMS,
					T1.FINRPYFRQ,
					T1.FINREPAYMETHOD,
					T1.FINISALWPARTIALRPY,
					T1.FINISALWDIFFERMENT,
					T1.FINMAXDIFFERMENT,
					T1.FINISALWEARLYRPY,
					T1.FINISALWEARLYSETTLE,
					T1.FINODRPYTRIES,
					T1.FINEARLYPAYRULE,
					T1.FINEARLYSETTLERULE,
					T1.FINDEPOSITRESTRICTEDTO,
					T1.FINAEBUYORINCEPTION,
					T1.FINAESELLORMATURITY,
					T1.FINISACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.STEPFINANCE,
					T1.STEPPINGMANDATORY,
					T1.ALWMANUALSTEPS,
					T1.ALWDSTEPPOLICIES,
					T1.DFTSTEPPOLICY,
					T4.ACTYPEDESC LOVDESCFINCONTINGENTACTYPENAME,
					T5.ACTYPEDESC LOVDESCFINACTYPENAME,
					T1.FINISDWPAYREQUIRED,
					T1.FINRVWRATEAPPLFOR,
					T1.FINALWRATECHANGEANYDATE,
					T1.FINISINTCPZATGRCEND,
					T1.FINELGRULECODE,
					T1.LIMITELGRULECODE,
					T1.FINSCHCALCODEONRVW,
					T1.ALWPLANDEFERMENT,
					T1.PLANDEFERCOUNT,
					T1.FINASSETTYPE,
					T1.PFTPAYACTYPE,
					T1.FINISOPENPFTPAYACC,
					T31.ACTYPEDESC LOVDESCPFTPAYACTYPENAME,
					T1.FINISALWGRCREPAY,
					T1.FINGRCSCHDMTHD,
					T1.FINGRCMARGIN,
					T1.FINMARGIN,
					T1.FINSCHEDULEON,
					T1.FINGRCSCHEDULEON,
					T1.FINCOMMITMENTREQ,
					T1.FINCOLLATERALREQ,
					T1.FINDEPRECIATIONREQ,
					T1.FINDEPRECIATIONFRQ,
					T1.FINBANKCONTINGENTACTYPE,
					T1.FINPROVISIONACTYPE,
					T38.ACTYPEDESC LOVDESCFINBANKCONTACTYPENAME,
					T39.ACTYPEDESC LOVDESCFINPROVISIONACTYPENAME,
					T1.ALLOWRIAINVESTMENT,
					T1.OVERRIDELIMIT,
					T1.LIMITREQUIRED,
					T1.FINCOMMITMENTOVRRIDE,
					T1.FINCOLLATERALOVRRIDE,
					T1.FINPFTUNCHANGED,
					T1.APPLYODPENALTY,
					T1.ODINCGRCDAYS,
					T1.ODCHARGETYPE,
					T1.ODGRACEDAYS,
					T1.ODCHARGECALON,
					T1.ODCHARGEAMTORPERC,
					T1.ODALLOWWAIVER,
					T1.ODMAXWAIVERPERC,
					T1.FINDIVISION,
					T48.DIVISIONCODEDESC LOVDESCFINDIVISIONNAME,
					T48.ENTITYCODE LOVDESCENTITYCODE,
					T1.FINSUSPACTYPE,
					T49.ACTYPEDESC LOVDESCFINSUSPACTYPENAME,
					T1.PRODUCT,
					T1.STARTDATE,
					T1.ENDDATE,
					T1.ALLOWDOWNPAYPGM,
					T1.FINTYPEDESC LOVDESCPROMOFINTYPEDESC,
					T1.REMARKS,
					T1.ALWEARLYPAYMETHODS,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.ALWADVANCERENT,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.ROLLOVERFINANCE,
					T1.ROLLOVERFRQ,
					T1.DOWNPAYRULE,
					T59.RULECODE DOWNPAYRULECODE,
					T59.RULECODEDESC DOWNPAYRULEDESC,
					T1.FINSUSPTRIGGER,
					T1.FINSUSPREMARKS,
					T1.ALWMULTIPARTYDISB,
					T1.COLLATERALTYPE,
					T1.TDSAPPLICABLE,
					T1.MANUALSCHEDULE,
					T1.APPLYGRCPRICING,
					T1.GRCPRICINGMETHOD,
					T1.APPLYRPYPRICING,
					T1.RPYPRICINGMETHOD,
					T1.RPYHIERARCHY,
					T67.RULECODE GRCPRICINGMETHODDESC,
					T68.RULECODE RPYPRICINGMETHODDESC,
					T1.DROPLINEOD,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.FINREPAYPFTONFRQ,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PFTDUESCHON,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.UNPLANEMIHLOCKPERIOD,
					T1.UNPLANEMICPZ,
					T1.REAGECPZ,
					T1.FDDLOCKPERIOD,
					T1.ALWDRPYMETHODS,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.ROUNDINGMODE,
					T1.ROUNDINGTARGET,
					T1.FREQUENCYDAYS,
					T1.QUICKDISB,
					T1.ALWMAXDISBCHECKREQ,
					T1.ALWREAGE,
					T1.ALWUNPLANEMIHOLIDAY,
					T1.PROFITCENTERID,
					T69.PROFITCENTERCODE,
					T69.PROFITCENTERDESC,
					T1.PRODUCTCATEGORY,
					T2.PRODUCTDESC FINCATEGORYDESC,
					T1.DEVELOPERFINANCE,
					T1.COSTOFFUNDS,
					T1.CHEQUECAPTUREREQ,
					T1.FINLTVCHECK,
					T1.PARTIALLYSECURED,
					T1.ALWADVEMI,
					T1.ADVEMIMINTERMS,
					T1.ADVEMIMAXTERMS,
					T1.ADVEMIDFTTERMS,
					T1.ADVEMISCHDMTHD,
					T1.BPIPFTDAYSBASIS,
					T1.ELIGIBILITYMETHODS,
					T1.ALWHYBRIDRATE,
					T1.FIXEDRATETENOR,
					T1.ODMINCAPAMOUNT,
					T1.ODRULECODE,
					T1.ALWZEROINTACC,
					T1.AUTOREJECTIONDAYS,
					T1.TAXNOMAND,
					T1.PUTCALLREQUIRED,
					T1.GRCADVINTERSETREQ,
					T1.GRCADVTYPE,
					T1.GRCADVMINTERMS,
					T1.GRCADVMAXTERMS,
					T1.GRCADVDEFAULTTERMS,
					T1.ADVINTERSETREQ,
					T1.ADVTYPE,
					T1.ADVMINTERMS,
					T1.ADVMAXTERMS,
					T1.ADVDEFAULTTERMS,
					T1.ADVSTAGE,
					T1.DSFREQ,
					T1.CASHCOLLATERALREQ,
					T1.TDSALLOWTOMODIFY,
					T1.TDSAPPLICABLETO,
					T1.ALWVAN,
					T1.VANALLOCATIONMETHOD,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING,
					T1.ALWSANCTIONAMT,
					T1.ALWSANCTIONAMTOVERRIDE,
					T1.SANBSDSCHDLE,
					T1.FINISRATERVWATGRCEND,
					T1.SCHDONPMTCAL,
					T1.AUTOAPPROVE,
					T1.ALWPLANNEDEMIINGRC,
					T1.GRCADJREQ,
					T1.GRCPERIODAFTRFULLDISB,
					T1.AUTOINCRGRCENDDATE,
					T1.GRCAUTOINCRMONTHS,
					T1.MAXAUTOINCRALLOWED,
					T1.THRLDTOMAINTAINGRCPRD,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR
				FROM RMTFINANCETYPES T1
				LEFT JOIN BMTPRODUCT T2 ON T1.FINCATEGORY = T2.PRODUCTCODE
				LEFT JOIN RMTACCOUNTTYPES T4 ON T1.FINCONTINGENTACTYPE = T4.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T38 ON T1.FINBANKCONTINGENTACTYPE = T38.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T39 ON T1.FINPROVISIONACTYPE = T39.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T5 ON T1.FINACTYPE = T5.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T31 ON T1.PFTPAYACTYPE = T31.ACTYPE
				LEFT JOIN SMTDIVISIONDETAIL T48 ON T1.FINDIVISION = T48.DIVISIONCODE
				LEFT JOIN RMTACCOUNTTYPES T49 ON T1.FINSUSPACTYPE = T49.ACTYPE
				LEFT JOIN RULES T59 ON T1.DOWNPAYRULE = T59.RULEID
				LEFT JOIN RULES T67 ON T1.GRCPRICINGMETHOD = T67.RULEID
				LEFT JOIN RULES T68 ON T1.RPYPRICINGMETHOD = T68.RULEID
				LEFT JOIN PROFITCENTERS T69 ON T69.PROFITCENTERID = T1.PROFITCENTERID
				WHERE NOT (EXISTS ( SELECT 1 AS EXPR1 FROM RMTFINANCETYPES_TEMP
					WHERE RMTFINANCETYPES_TEMP.FINTYPE = T1.FINTYPE))
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2031.64_post" author="savitri.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rmtfinancetypes_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2031.65_pre" author="savitri.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_orgview');
		 	]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2031.65" author="savitri.n">
		<createView viewName="RMTFINANCETYPES_ORGVIEW" replaceIfExists="true">
		   <![CDATA[
				SELECT T1.FINTYPE,
					T1.FINCATEGORY,
					T1.FINTYPEDESC,
					T1.FINCCY,
					T1.FINDAYSCALTYPE,
					T1.FINACTYPE,
					T1.FINCONTINGENTACTYPE,
					T1.FINISGENREF,
					T1.FINMAXAMOUNT,
					T1.FINMINAMOUNT,
					T1.FINISOPENNEWFINAC,
					T1.FINISALWMD,
					T1.FINSCHDMTHD,
					T1.FINISALWGRACE,
					T1.EQUALREPAYMENT,
					T1.FINRATETYPE,
					T1.FINBASERATE,
					T1.FINSPLRATE,
					T1.FININTRATE,
					T1.FINMINRATE,
					T1.FINMAXRATE,
					T1.FINDFTINTFRQ,
					T1.FINISINTCPZ,
					T1.FINCPZFRQ,
					T1.FINISRVWALW,
					T1.FINRVWFRQ,
					T1.FINGRCRATETYPE,
					T1.FINGRCBASERATE,
					T1.FINGRCSPLRATE,
					T1.FINGRCINTRATE,
					T1.FINGRCMINRATE,
					T1.FINGRCMAXRATE,
					T1.FINGRCDFTINTFRQ,
					T1.FINGRCISINTCPZ,
					T1.FINGRCCPZFRQ,
					T1.FINGRCISRVWALW,
					T1.FINGRCRVWFRQ,
					T1.FINMINTERM,
					T1.FINMAXTERM,
					T1.FINDFTTERMS,
					T1.FINRPYFRQ,
					T1.FINREPAYMETHOD,
					T1.FINISALWDIFFERMENT,
					T1.FINMAXDIFFERMENT,
					T1.FINISACTIVE,
					T1.STEPFINANCE,
					T1.STEPPINGMANDATORY,
					T1.ALWMANUALSTEPS,
					T1.ALWDSTEPPOLICIES,
					T1.DFTSTEPPOLICY,
					T1.FINISDWPAYREQUIRED,
					T1.FINRVWRATEAPPLFOR,
					T1.FINALWRATECHANGEANYDATE,
					T1.FINISINTCPZATGRCEND,
					T1.FINSCHCALCODEONRVW,
					T1.ALWPLANDEFERMENT,
					T1.PLANDEFERCOUNT,
					T1.PFTPAYACTYPE,
					T1.FINISOPENPFTPAYACC,
					T1.FINISALWGRCREPAY,
					T1.FINGRCSCHDMTHD,
					T1.FINGRCMARGIN,
					T1.FINMARGIN,
					T1.FINCOMMITMENTREQ,
					T1.FINCOLLATERALREQ,
					T1.FINDEPRECIATIONREQ,
					T1.FINDEPRECIATIONFRQ,
					T1.FINBANKCONTINGENTACTYPE,
					T1.FINPROVISIONACTYPE,
					T1.ALLOWRIAINVESTMENT,
					T1.OVERRIDELIMIT,
					T1.LIMITREQUIRED,
					T1.FINCOMMITMENTOVRRIDE,
					T1.FINCOLLATERALOVRRIDE,
					T1.FINREPAYPFTONFRQ,
					T1.FINPFTUNCHANGED,
					T1.APPLYODPENALTY,
					T1.ODINCGRCDAYS,
					T1.ODCHARGETYPE,
					T1.ODGRACEDAYS,
					T1.ODCHARGECALON,
					T1.ODCHARGEAMTORPERC,
					T1.ODALLOWWAIVER,
					T1.ODMAXWAIVERPERC,
					T1.FINDIVISION,
					T3.DIVISIONCODEDESC LOVDESCFINDIVISIONNAME,
					T1.FINSUSPACTYPE,
					T1.PRODUCT,
					T1.STARTDATE,
					T1.ENDDATE,
					T1.ALLOWDOWNPAYPGM,
					T1.FINTYPEDESC LOVDESCPROMOFINTYPEDESC,
					T1.REMARKS,
					T4.POLICYDESC LOVDESCDFTSTEPPOLICYNAME,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.ALWADVANCERENT,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.ROLLOVERFINANCE,
					T1.ROLLOVERFRQ,
					T1.DOWNPAYRULE,
					T1.ALWMULTIPARTYDISB,
					T1.COLLATERALTYPE,
					T1.TDSAPPLICABLE,
					T5.RULECODE DOWNPAYRULECODE,
					T5.RULECODEDESC DOWNPAYRULEDESC,
					T1.APPLYGRCPRICING,
					T1.APPLYRPYPRICING,
					T6.RULECODE GRCPRICINGMETHODDESC,
					T7.RULECODE RPYPRICINGMETHODDESC,
					T1.DROPLINEOD,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T4.STEPTYPE DFTSTEPPOLICYTYPE,
					T1.MANUALSCHEDULE,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PFTDUESCHON,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.UNPLANEMIHLOCKPERIOD,
					T1.UNPLANEMICPZ,
					T1.REAGECPZ,
					T1.FDDLOCKPERIOD,
					T1.ALWDRPYMETHODS,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.ROUNDINGMODE,
					T1.ROUNDINGTARGET,
					T1.FREQUENCYDAYS,
					T1.QUICKDISB,
					T1.ALWREAGE,
					T1.ALWUNPLANEMIHOLIDAY,
					T1.ALWMAXDISBCHECKREQ,
					T1.PRODUCTCATEGORY,
					T1.RPYHIERARCHY,
					T1.DEVELOPERFINANCE,
					T3.ENTITYCODE LOVDESCENTITYCODE,
					T8.ENTITYDESC LOVDESCENTITYDESC,
					T1.COSTOFFUNDS,
					T1.CHEQUECAPTUREREQ,
					T1.FINLTVCHECK,
					T1.PARTIALLYSECURED,
					T1.ALWADVEMI,
					T1.ADVEMIMINTERMS,
					T1.ADVEMIMAXTERMS,
					T1.ADVEMIDFTTERMS,
					T1.ADVEMISCHDMTHD,
					T1.BPIPFTDAYSBASIS,
					T1.ELIGIBILITYMETHODS,
					T1.ALWHYBRIDRATE,
					T1.FIXEDRATETENOR,
					T1.ODMINCAPAMOUNT,
					T1.ODRULECODE,
					T1.ALWZEROINTACC,
					T1.FINISALWPARTIALRPY,
					T1.AUTOREJECTIONDAYS,
					T1.TAXNOMAND,
					T1.PUTCALLREQUIRED,
					T1.GRCADVINTERSETREQ,
					T1.GRCADVTYPE,
					T1.GRCADVMINTERMS,
					T1.GRCADVMAXTERMS,
					T1.GRCADVDEFAULTTERMS,
					T1.ADVINTERSETREQ,
					T1.ADVTYPE,
					T1.ADVMINTERMS,
					T1.ADVMAXTERMS,
					T1.ADVDEFAULTTERMS,
					T1.ADVSTAGE,
					T1.DSFREQ,
					T1.CASHCOLLATERALREQ,
					T1.ALWEARLYPAYMETHODS,
					T1.TDSALLOWTOMODIFY,
					T1.TDSAPPLICABLETO,
					T1.ALWVAN,
					T1.VANALLOCATIONMETHOD,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING,
					T1.ALWSANCTIONAMT,
					T1.ALWSANCTIONAMTOVERRIDE,
					T1.SANBSDSCHDLE,
					T1.FINISRATERVWATGRCEND,
					T1.SCHDONPMTCAL,
					T1.AUTOAPPROVE,
					T1.ALWPLANNEDEMIINGRC,
					T1.GRCADJREQ,
					T1.GRCPERIODAFTRFULLDISB,
					T1.AUTOINCRGRCENDDATE,
					T1.GRCAUTOINCRMONTHS,
					T1.MAXAUTOINCRALLOWED,
					T1.THRLDTOMAINTAINGRCPRD,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR
				FROM RMTFINANCETYPES T1
				JOIN SMTDIVISIONDETAIL T3 ON T1.FINDIVISION = T3.DIVISIONCODE
				LEFT JOIN STEPPOLICYHEADER T4 ON T1.DFTSTEPPOLICY = T4.POLICYCODE
				LEFT JOIN RULES T5 ON T1.DOWNPAYRULE = T5.RULEID
				LEFT JOIN RULES T6 ON T1.GRCPRICINGMETHOD = T6.RULEID
				LEFT JOIN RULES T7 ON T1.RPYPRICINGMETHOD = T7.RULEID
				LEFT JOIN ENTITY T8 ON T3.ENTITYCODE = T8.ENTITYCODE
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2031.65_post" author="savitri.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rmtfinancetypes_orgview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2031.66_pre" author="savitri.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_aview');
		 	]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2031.66" author="savitri.n">
		<createView viewName="RMTFINANCETYPES_AVIEW" replaceIfExists="true">
		   <![CDATA[
				SELECT T1.FINTYPE,
					T1.FINCATEGORY,
					T1.FINTYPEDESC,
					T1.FINCCY,
					T1.FINDAYSCALTYPE,
					T1.FINACTYPE,
					T1.FINCONTINGENTACTYPE,
					T1.FINISGENREF,
					T1.FINMAXAMOUNT,
					T1.FINMINAMOUNT,
					T1.FINISOPENNEWFINAC,
					T1.FINDFTSTMTFRQ,
					T1.FINISALWMD,
					T1.FINSCHDMTHD,
					T1.FINISALWGRACE,
					T1.FINHISTRETENSION,
					T1.EQUALREPAYMENT,
					T1.FINRATETYPE,
					T1.FINBASERATE,
					T1.FINSPLRATE,
					T1.FININTRATE,
					T1.FINMINRATE,
					T1.FINMAXRATE,
					T1.FINDFTINTFRQ,
					T1.FINISINTCPZ,
					T1.FINCPZFRQ,
					T1.FINISRVWALW,
					T1.FINRVWFRQ,
					T1.FINGRCRATETYPE,
					T1.FINGRCBASERATE,
					T1.FINGRCSPLRATE,
					T1.FINGRCINTRATE,
					T1.FINGRCMINRATE,
					T1.FINGRCMAXRATE,
					T1.FINGRCDFTINTFRQ,
					T1.FINGRCISINTCPZ,
					T1.FINGRCCPZFRQ,
					T1.FINGRCISRVWALW,
					T1.FINGRCRVWFRQ,
					T1.FINMINTERM,
					T1.FINMAXTERM,
					T1.FINDFTTERMS,
					T1.FINRPYFRQ,
					T1.FINREPAYMETHOD,
					T1.FINISALWPARTIALRPY,
					T1.FINISALWDIFFERMENT,
					T1.FINMAXDIFFERMENT,
					T1.FINISALWEARLYRPY,
					T1.FINISALWEARLYSETTLE,
					T1.FINODRPYTRIES,
					T1.FINEARLYPAYRULE,
					T1.FINEARLYSETTLERULE,
					T1.FINDEPOSITRESTRICTEDTO,
					T1.FINAEBUYORINCEPTION,
					T1.FINAESELLORMATURITY,
					T1.FINISACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.STEPFINANCE,
					T1.STEPPINGMANDATORY,
					T1.ALWMANUALSTEPS,
					T1.ALWDSTEPPOLICIES,
					T1.DFTSTEPPOLICY,
					T4.ACTYPEDESC LOVDESCFINCONTINGENTACTYPENAME,
					T5.ACTYPEDESC LOVDESCFINACTYPENAME,
					T1.FINISDWPAYREQUIRED,
					T1.FINRVWRATEAPPLFOR,
					T1.FINALWRATECHANGEANYDATE,
					T1.FINISINTCPZATGRCEND,
					T1.FINELGRULECODE,
					T1.LIMITELGRULECODE,
					T1.FINSCHCALCODEONRVW,
					T1.ALWPLANDEFERMENT,
					T1.PLANDEFERCOUNT,
					T1.FINASSETTYPE,
					T1.PFTPAYACTYPE,
					T1.FINISOPENPFTPAYACC,
					T31.ACTYPEDESC LOVDESCPFTPAYACTYPENAME,
					T1.FINISALWGRCREPAY,
					T1.FINGRCSCHDMTHD,
					T1.FINGRCMARGIN,
					T1.FINMARGIN,
					T1.FINSCHEDULEON,
					T1.FINGRCSCHEDULEON,
					T1.FINCOMMITMENTREQ,
					T1.FINCOLLATERALREQ,
					T1.FINDEPRECIATIONREQ,
					T1.FINDEPRECIATIONFRQ,
					T1.FINBANKCONTINGENTACTYPE,
					T1.FINPROVISIONACTYPE,
					T38.ACTYPEDESC LOVDESCFINBANKCONTACTYPENAME,
					T39.ACTYPEDESC LOVDESCFINPROVISIONACTYPENAME,
					T1.ALLOWRIAINVESTMENT,
					T1.OVERRIDELIMIT,
					T1.LIMITREQUIRED,
					T1.FINCOMMITMENTOVRRIDE,
					T1.FINCOLLATERALOVRRIDE,
					T1.FINPFTUNCHANGED,
					T1.APPLYODPENALTY,
					T1.ODINCGRCDAYS,
					T1.ODCHARGETYPE,
					T1.ODGRACEDAYS,
					T1.ODCHARGECALON,
					T1.ODCHARGEAMTORPERC,
					T1.ODALLOWWAIVER,
					T1.ODMAXWAIVERPERC,
					T1.FINDIVISION,
					T48.DIVISIONCODEDESC LOVDESCFINDIVISIONNAME,
					T48.ENTITYCODE LOVDESCENTITYCODE,
					T1.FINSUSPACTYPE,
					T49.ACTYPEDESC LOVDESCFINSUSPACTYPENAME,
					T1.PRODUCT,
					T1.STARTDATE,
					T1.ENDDATE,
					T1.ALLOWDOWNPAYPGM,
					T1.REMARKS,
					T1.ALWEARLYPAYMETHODS,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.ALWADVANCERENT,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.ROLLOVERFINANCE,
					T1.ROLLOVERFRQ,
					T1.DOWNPAYRULE,
					T59.RULECODE DOWNPAYRULECODE,
					T59.RULECODEDESC DOWNPAYRULEDESC,
					T1.FINSUSPTRIGGER,
					T1.FINSUSPREMARKS,
					T1.ALWMULTIPARTYDISB,
					T1.COLLATERALTYPE,
					T1.TDSAPPLICABLE,
					T1.MANUALSCHEDULE,
					T1.APPLYGRCPRICING,
					T1.GRCPRICINGMETHOD,
					T1.APPLYRPYPRICING,
					T1.RPYPRICINGMETHOD,
					T1.RPYHIERARCHY,
					T67.RULECODE GRCPRICINGMETHODDESC,
					T68.RULECODE RPYPRICINGMETHODDESC,
					T1.DROPLINEOD,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.FINREPAYPFTONFRQ,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PFTDUESCHON,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.UNPLANEMIHLOCKPERIOD,
					T1.UNPLANEMICPZ,
					T1.REAGECPZ,
					T1.FDDLOCKPERIOD,
					T1.ALWDRPYMETHODS,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.ROUNDINGMODE,
					T1.ROUNDINGTARGET,
					T1.FREQUENCYDAYS,
					T1.QUICKDISB,
					T1.ALWREAGE,
					T1.ALWUNPLANEMIHOLIDAY,
					T1.ALWMAXDISBCHECKREQ,
					T1.FINTYPEDESC LOVDESCPROMOFINTYPEDESC,
					T1.PROFITCENTERID,
					T69.PROFITCENTERCODE,
					T69.PROFITCENTERDESC,
					T1.PRODUCTCATEGORY,
					T2.PRODUCTDESC FINCATEGORYDESC,
					T1.DEVELOPERFINANCE,
					T1.COSTOFFUNDS,
					T1.CHEQUECAPTUREREQ,
					T1.FINLTVCHECK,
					T1.PARTIALLYSECURED,
					T1.ALWADVEMI,
					T1.ADVEMIMINTERMS,
					T1.ADVEMIMAXTERMS,
					T1.ADVEMIDFTTERMS,
					T1.ADVEMISCHDMTHD,
					T1.BPIPFTDAYSBASIS,
					T1.ELIGIBILITYMETHODS,
					T1.ALWHYBRIDRATE,
					T1.FIXEDRATETENOR,
					T1.ODMINCAPAMOUNT,
					T1.ODRULECODE,
					T1.ALWZEROINTACC,
					T1.AUTOREJECTIONDAYS,
					T1.TAXNOMAND,
					T1.PUTCALLREQUIRED,
					T1.GRCADVINTERSETREQ,
					T1.GRCADVTYPE,
					T1.GRCADVMINTERMS,
					T1.GRCADVMAXTERMS,
					T1.GRCADVDEFAULTTERMS,
					T1.ADVINTERSETREQ,
					T1.ADVTYPE,
					T1.ADVMINTERMS,
					T1.ADVMAXTERMS,
					T1.ADVDEFAULTTERMS,
					T1.ADVSTAGE,
					T1.DSFREQ,
					T1.CASHCOLLATERALREQ,
					T1.TDSALLOWTOMODIFY,
					T1.TDSAPPLICABLETO,
					T1.ALWVAN,
					T1.VANALLOCATIONMETHOD,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING,
					T1.ALWSANCTIONAMT,
					T1.ALWSANCTIONAMTOVERRIDE,
					T1.SANBSDSCHDLE,
					T1.FINISRATERVWATGRCEND,
					T1.SCHDONPMTCAL,
					T1.AUTOAPPROVE,
					T1.ALWPLANNEDEMIINGRC,
					T1.GRCADJREQ,
					T1.GRCPERIODAFTRFULLDISB,
					T1.AUTOINCRGRCENDDATE,
					T1.GRCAUTOINCRMONTHS,
					T1.MAXAUTOINCRALLOWED,
					T1.THRLDTOMAINTAINGRCPRD,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR
				FROM RMTFINANCETYPES T1
				LEFT JOIN BMTPRODUCT T2 ON T1.FINCATEGORY = T2.PRODUCTCODE
				LEFT JOIN RMTACCOUNTTYPES T4 ON T1.FINCONTINGENTACTYPE = T4.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T38 ON T1.FINBANKCONTINGENTACTYPE = T38.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T39 ON T1.FINPROVISIONACTYPE = T39.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T5 ON T1.FINACTYPE = T5.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T31 ON T1.PFTPAYACTYPE = T31.ACTYPE
				LEFT JOIN SMTDIVISIONDETAIL T48 ON T1.FINDIVISION = T48.DIVISIONCODE
				LEFT JOIN RMTACCOUNTTYPES T49 ON T1.FINSUSPACTYPE = T49.ACTYPE
				LEFT JOIN RULES T59 ON T1.DOWNPAYRULE = T59.RULEID
				LEFT JOIN RULES T67 ON T1.GRCPRICINGMETHOD = T67.RULEID
				LEFT JOIN RULES T68 ON T1.RPYPRICINGMETHOD = T68.RULEID
				LEFT JOIN PROFITCENTERS T69 ON T69.PROFITCENTERID = T1.PROFITCENTERID
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2031.66_post" author="savitri.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rmtfinancetypes_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2031.67_pre" author="savitri.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rejectfinancemain_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2031.67" author="savitri.n">
		<createView viewName="REJECTFINANCEMAIN_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT F.FINREFERENCE,
				    T.FINCATEGORY LOVDESCPRODUCTCODENAME,
				    F.FINTYPE,
				    F.FINBRANCH,
				    F.FINSTARTDATE,
				    F.MATURITYDATE,
				    F.NUMBEROFTERMS,
				    F.FINCCY,
				    F.FINAMOUNT,
				    F.FINAMOUNT - F.DOWNPAYMENT + F.FEECHARGEAMT + F.INSURANCEAMT FINANCINGAMOUNT,
				    F.FEECHARGEAMT,
				    F.INSURANCEAMT,
				    F.FINAMOUNT - F.DOWNPAYMENT + F.FEECHARGEAMT + F.INSURANCEAMT - F.FINREPAYMENTAMOUNT CURFINAMOUNT,
				    F.DOWNPAYMENT,
				    F.FINCURRASSETVALUE,
				    F.FINASSETVALUE,
				    F.ALLOWDRAWINGPOWER,
				    F.PROMOTIONSEQID,
				    F.SANBSDSCHDLE,
				    C.CUSTCIF LOVDESCCUSTCIF,
				    F.SVAMOUNT,
				    F.CBAMOUNT,
				    F.FINISRATERVWATGRCEND,
				    F.ALWGRCADJ,
				    F.ENDGRCPERIODAFTRFULLDISB,
				    F.AUTOINCGRCENDDATE,
				    F.WRITEOFFLOAN,
					F.RESTRUCTURE,
					F.CALCOFSTEPS,
					F.STEPSAPPLIEDFOR,
					F.NOOFGRCSTEPS
				FROM REJECTFINANCEMAIN F
				LEFT JOIN CUSTOMERS C ON F.CUSTID = C.CUSTID
				LEFT JOIN RMTFINANCETYPES T ON F.FINTYPE = T.FINTYPE
			 ]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2031.67_post" author="savitri.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rejectfinancemain_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2031.68_pre" author="savitri.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'wiffinancemain_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2031.68" author="savitri.n">
		<createView viewName="WIFFINANCEMAIN_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINREFERENCE,
					T1.NUMBEROFTERMS,
					T1.GRCPERIODENDDATE,
					T1.ALLOWGRCPERIOD,
					T1.GRACEBASERATE,
					T1.GRACESPECIALRATE,
					T1.GRCPFTRATE,
					T1.GRCPFTFRQ,
					T1.NEXTGRCPFTDATE,
					T1.ALLOWGRCPFTRVW,
					T1.GRCPFTRVWFRQ,
					T1.NEXTGRCPFTRVWDATE,
					T1.ALLOWGRCCPZ,
					T1.GRCCPZFRQ,
					T1.NEXTGRCCPZDATE,
					T1.REPAYBASERATE,
					T1.REPAYSPECIALRATE,
					T1.REPAYPROFITRATE,
					T1.REPAYFRQ,
					T1.NEXTREPAYDATE,
					T1.REPAYPFTFRQ,
					T1.NEXTREPAYPFTDATE,
					T1.ALLOWREPAYRVW,
					T1.REPAYRVWFRQ,
					T1.NEXTREPAYRVWDATE,
					T1.ALLOWREPAYCPZ,
					T1.REPAYCPZFRQ,
					T1.NEXTREPAYCPZDATE,
					T1.MATURITYDATE,
					T1.CPZATGRACEEND,
					T1.DOWNPAYMENT,
					T1.GRACEFLATAMOUNT,
					T1.REQREPAYAMOUNT,
					T1.TOTALPROFIT,
					T1.TOTALCPZ,
					T1.TOTALGROSSPFT,
					T1.TOTALGRACEPFT,
					T1.TOTALGRACECPZ,
					T1.GRCRATEBASIS,
					T1.REPAYRATEBASIS,
					T1.FINTYPE,
					T1.FINREMARKS,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.REQMATURITY,
					T1.CALTERMS,
					T1.CALMATURITY,
					T1.FIRSTREPAY,
					T1.LASTREPAY,
					T1.FINSTARTDATE,
					T1.FINAMOUNT,
					T1.FINREPAYMENTAMOUNT,
					T1.CUSTID,
					T1.DEFFERMENTS,
					T1.PLANDEFERCOUNT,
					T1.FINISACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T15.CUSTCIF LOVDESCCUSTCIF,
					T7.FINTYPEDESC LOVDESCFINTYPENAME,
					T1.FINBRANCH,
					T1.FINSOURCEID,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.ALLOWEDDEFFRQCHANGE,
					T1.AVAILEDDEFFRQCHANGE,
					T7.FINMAXAMOUNT LOVDESCFINMAXAMT,
					T7.FINMINAMOUNT LOVDESCFINMINAMOUNT,
					T7.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
					T1.MINDOWNPAYPERC,
					T7.FINISDWPAYREQUIRED LOVDESCDWNPAYREQ,
					T1.RECALTYPE,
					T1.FINASSETVALUE,
					T7.FINMAXDIFFERMENT LOVDESCFINMAXDIFFERMENT,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.LASTREPAYRVWDATE,
					T1.LASTREPAYCPZDATE,
					T1.DISBACCOUNTID,
					T1.REPAYACCOUNTID,
					T1.ALLOWGRCREPAY,
					T1.GRCSCHDMTHD,
					T1.REPAYMARGIN,
					T1.GRCMARGIN,
					T1.DEPRECIATIONFRQ,
					T1.FINCOMMITMENTREF,
					T1.FINCURRASSETVALUE,
					T1.FINCONTRACTDATE,
					T1.NEXTDEPDATE,
					T1.LASTDEPDATE,
					T1.FINACCOUNT,
					T1.FINCUSTPFTACCOUNT,
					T7.FINRVWRATEAPPLFOR,
					T1.TOTALREPAYAMT,
					T1.CLOSINGSTATUS,
					T1.FINAPPROVEDDATE,
					T1.FINREPAYPFTONFRQ,
					T1.ANUALIZEDPERCRATE,
					T1.EFFECTIVERATEOFRETURN,
					T1.DOWNPAYBANK,
					T1.DOWNPAYSUPL,
					T7.FINDIVISION LOVDESCFINDIVISIONNAME,
					T1.GRACETERMS,
					T14.FACILITYTYPE,
					T15.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
					T16.BRANCHDESC LOVDESCFINBRANCHNAME,
					T1.TOTALGROSSGRCPFT,
					T1.GRCPROFITDAYSBASIS,
					T1.STEPFINANCE,
					T1.STEPTYPE,
					T1.STEPPOLICY,
					T1.ALWMANUALSTEPS,
					T1.NOOFSTEPS,
					T1.LINKEDFINREF,
					T7.PRODUCT LOVDESCFINPRODUCT,
					T1.GRCMINRATE,
					T1.GRCMAXRATE,
					T1.RPYMINRATE,
					T1.RPYMAXRATE,
					T1.MANUALSCHEDULE,
					T1.TAKEOVERFINANCE,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.SUPPLEMENTRENT,
					T1.INCREASEDCOST,
					T1.FEEACCOUNTID,
					T1.TDSAPPLICABLE,
					T1.INSURANCEAMT,
					T1.DEDUCTINSDISB,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.CALROUNDINGMODE,
					T1.ALWMULTIDISB,
					T1.BPIAMOUNT,
					T1.DEDUCTFEEDISB,
					T1.FEECHARGEAMT,
					T1.RVWRATEAPPLFOR,
					T1.SCHCALONRVW,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.FINCATEGORY,
					T1.PRODUCTCATEGORY,
					T1.ROUNDINGTARGET,
					T1.GRCMAXAMOUNT,
					T1.ADVANCEEMI,
					T1.ADVEMITERMS,
					T1.BPIPFTDAYSBASIS,
					T1.FIXEDTENORRATE,
					T1.FIXEDRATETENOR,
					T1.GRCADVTYPE,
					T1.GRCADVTERMS,
					T1.ADVTYPE,
					T1.ADVTERMS,
					T1.ADVSTAGE,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING,
					T1.APPLIEDLOANAMT,
					T1.FINISRATERVWATGRCEND,
					T1.CBAMOUNT,
					T1.SVAMOUNT,
					T1.SANBSDSCHDLE,
					T1.PROMOTIONSEQID,
					T1.ALWGRCADJ,
					T1.ENDGRCPERIODAFTRFULLDISB,
					T1.AUTOINCGRCENDDATE,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS
				FROM WIFFINANCEMAIN_TEMP T1
				LEFT JOIN WIFINDICATIVETERMDETAIL_TEMP T14 ON T14.FINREFERENCE = T1.FINREFERENCE
				LEFT JOIN CUSTOMERS T15 ON T15.CUSTID = T1.CUSTID
				JOIN RMTFINANCETYPES T7 ON T1.FINTYPE = T7.FINTYPE
				LEFT JOIN RMTBRANCHES T16 ON T1.FINBRANCH = T16.BRANCHCODE
				UNION ALL
				SELECT T1.FINREFERENCE,
					T1.NUMBEROFTERMS,
					T1.GRCPERIODENDDATE,
					T1.ALLOWGRCPERIOD,
					T1.GRACEBASERATE,
					T1.GRACESPECIALRATE,
					T1.GRCPFTRATE,
					T1.GRCPFTFRQ,
					T1.NEXTGRCPFTDATE,
					T1.ALLOWGRCPFTRVW,
					T1.GRCPFTRVWFRQ,
					T1.NEXTGRCPFTRVWDATE,
					T1.ALLOWGRCCPZ,
					T1.GRCCPZFRQ,
					T1.NEXTGRCCPZDATE,
					T1.REPAYBASERATE,
					T1.REPAYSPECIALRATE,
					T1.REPAYPROFITRATE,
					T1.REPAYFRQ,
					T1.NEXTREPAYDATE,
					T1.REPAYPFTFRQ,
					T1.NEXTREPAYPFTDATE,
					T1.ALLOWREPAYRVW,
					T1.REPAYRVWFRQ,
					T1.NEXTREPAYRVWDATE,
					T1.ALLOWREPAYCPZ,
					T1.REPAYCPZFRQ,
					T1.NEXTREPAYCPZDATE,
					T1.MATURITYDATE,
					T1.CPZATGRACEEND,
					T1.DOWNPAYMENT,
					T1.GRACEFLATAMOUNT,
					T1.REQREPAYAMOUNT,
					T1.TOTALPROFIT,
					T1.TOTALCPZ,
					T1.TOTALGROSSPFT,
					T1.TOTALGRACEPFT,
					T1.TOTALGRACECPZ,
					T1.GRCRATEBASIS,
					T1.REPAYRATEBASIS,
					T1.FINTYPE,
					T1.FINREMARKS,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.REQMATURITY,
					T1.CALTERMS,
					T1.CALMATURITY,
					T1.FIRSTREPAY,
					T1.LASTREPAY,
					T1.FINSTARTDATE,
					T1.FINAMOUNT,
					T1.FINREPAYMENTAMOUNT,
					T1.CUSTID,
					T1.DEFFERMENTS,
					T1.PLANDEFERCOUNT,
					T1.FINISACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T15.CUSTCIF LOVDESCCUSTCIF,
					T7.FINTYPEDESC LOVDESCFINTYPENAME,
					T1.FINBRANCH,
					T1.FINSOURCEID,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.ALLOWEDDEFFRQCHANGE,
					T1.AVAILEDDEFFRQCHANGE,
					T7.FINMAXAMOUNT LOVDESCFINMAXAMT,
					T7.FINMINAMOUNT LOVDESCFINMINAMOUNT,
					T7.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
					T1.MINDOWNPAYPERC,
					T7.FINISDWPAYREQUIRED LOVDESCDWNPAYREQ,
					T1.RECALTYPE,
					T1.FINASSETVALUE,
					T7.FINMAXDIFFERMENT LOVDESCFINMAXDIFFERMENT,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.LASTREPAYRVWDATE,
					T1.LASTREPAYCPZDATE,
					T1.DISBACCOUNTID,
					T1.REPAYACCOUNTID,
					T1.ALLOWGRCREPAY,
					T1.GRCSCHDMTHD,
					T1.REPAYMARGIN,
					T1.GRCMARGIN,
					T1.DEPRECIATIONFRQ,
					T1.FINCOMMITMENTREF,
					T1.FINCURRASSETVALUE,
					T1.FINCONTRACTDATE,
					T1.NEXTDEPDATE,
					T1.LASTDEPDATE,
					T1.FINACCOUNT,
					T1.FINCUSTPFTACCOUNT,
					T7.FINRVWRATEAPPLFOR,
					T1.TOTALREPAYAMT,
					T1.CLOSINGSTATUS,
					T1.FINAPPROVEDDATE,
					T1.FINREPAYPFTONFRQ,
					T1.ANUALIZEDPERCRATE,
					T1.EFFECTIVERATEOFRETURN,
					T1.DOWNPAYBANK,
					T1.DOWNPAYSUPL,
					T7.FINDIVISION LOVDESCFINDIVISIONNAME,
					T1.GRACETERMS,
					T14.FACILITYTYPE,
					T15.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
					T16.BRANCHDESC  LOVDESCFINBRANCHNAME,
					T1.TOTALGROSSGRCPFT,
					T1.GRCPROFITDAYSBASIS,
					T1.STEPFINANCE,
					T1.STEPTYPE,
					T1.STEPPOLICY,
					T1.ALWMANUALSTEPS,
					T1.NOOFSTEPS,
					T1.LINKEDFINREF,
					T7.PRODUCT LOVDESCFINPRODUCT,
					T1.GRCMINRATE,
					T1.GRCMAXRATE,
					T1.RPYMINRATE,
					T1.RPYMAXRATE,
					T1.MANUALSCHEDULE,
					T1.TAKEOVERFINANCE,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.SUPPLEMENTRENT,
					T1.INCREASEDCOST,
					T1.FEEACCOUNTID,
					T1.TDSAPPLICABLE,
					T1.INSURANCEAMT,
					T1.DEDUCTINSDISB,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.CALROUNDINGMODE,
					T1.ALWMULTIDISB,
					T1.BPIAMOUNT,
					T1.DEDUCTFEEDISB,
					T1.FEECHARGEAMT,
					T1.RVWRATEAPPLFOR,
					T1.SCHCALONRVW,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.FINCATEGORY,
					T1.PRODUCTCATEGORY,
					T1.ROUNDINGTARGET,
					T1.GRCMAXAMOUNT,
					T1.ADVANCEEMI,
					T1.ADVEMITERMS,
					T1.BPIPFTDAYSBASIS,
					T1.FIXEDTENORRATE,
					T1.FIXEDRATETENOR,
					T1.GRCADVTYPE,
					T1.GRCADVTERMS,
					T1.ADVTYPE,
					T1.ADVTERMS,
					T1.ADVSTAGE,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING,
					T1.APPLIEDLOANAMT,
					T1.FINISRATERVWATGRCEND,
					T1.CBAMOUNT,
					T1.SVAMOUNT,
					T1.SANBSDSCHDLE,
					T1.PROMOTIONSEQID,
					T1.ALWGRCADJ,
					T1.ENDGRCPERIODAFTRFULLDISB,
					T1.AUTOINCGRCENDDATE,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS
				FROM WIFFINANCEMAIN T1
				LEFT JOIN WIFINDICATIVETERMDETAIL_TEMP T14 ON T14.FINREFERENCE = T1.FINREFERENCE
				LEFT JOIN CUSTOMERS T15 ON T15.CUSTID = T1.CUSTID
				JOIN RMTFINANCETYPES T7 ON T1.FINTYPE = T7.FINTYPE
				LEFT JOIN RMTBRANCHES T16 ON T1.FINBRANCH = T16.BRANCHCODE
				WHERE NOT (EXISTS ( SELECT 1
				FROM WIFFINANCEMAIN_TEMP
				WHERE WIFFINANCEMAIN_TEMP.FINREFERENCE = T1.FINREFERENCE))
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2031.68_post" author="savitri.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'wiffinancemain_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2031.69_pre" author="savitri.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'wiffinancemain_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2031.69" author="savitri.n">
		<createView viewName="WIFFINANCEMAIN_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINREFERENCE,
					T1.NUMBEROFTERMS,
					T1.GRCPERIODENDDATE,
					T1.ALLOWGRCPERIOD,
					T1.GRACEBASERATE,
					T1.GRACESPECIALRATE,
					T1.GRCPFTRATE,
					T1.GRCPFTFRQ,
					T1.NEXTGRCPFTDATE,
					T1.ALLOWGRCPFTRVW,
					T1.GRCPFTRVWFRQ,
					T1.NEXTGRCPFTRVWDATE,
					T1.ALLOWGRCCPZ,
					T1.GRCCPZFRQ,
					T1.NEXTGRCCPZDATE,
					T1.REPAYBASERATE,
					T1.REPAYSPECIALRATE,
					T1.REPAYPROFITRATE,
					T1.REPAYFRQ,
					T1.NEXTREPAYDATE,
					T1.REPAYPFTFRQ,
					T1.NEXTREPAYPFTDATE,
					T1.ALLOWREPAYRVW,
					T1.REPAYRVWFRQ,
					T1.NEXTREPAYRVWDATE,
					T1.ALLOWREPAYCPZ,
					T1.REPAYCPZFRQ,
					T1.NEXTREPAYCPZDATE,
					T1.MATURITYDATE,
					T1.CPZATGRACEEND,
					T1.DOWNPAYMENT,
					T1.GRACEFLATAMOUNT,
					T1.REQREPAYAMOUNT,
					T1.TOTALPROFIT,
					T1.TOTALCPZ,
					T1.TOTALGROSSPFT,
					T1.TOTALGRACEPFT,
					T1.TOTALGRACECPZ,
					T1.GRCRATEBASIS,
					T1.REPAYRATEBASIS,
					T1.FINTYPE,
					T1.FINREMARKS,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.REQMATURITY,
					T1.CALTERMS,
					T1.CALMATURITY,
					T1.FIRSTREPAY,
					T1.LASTREPAY,
					T1.FINSTARTDATE,
					T1.FINAMOUNT,
					T1.FINREPAYMENTAMOUNT,
					T1.CUSTID,
					T1.DEFFERMENTS,
					T1.PLANDEFERCOUNT,
					T1.FINISACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T15.CUSTCIF LOVDESCCUSTCIF,
					T7.FINTYPEDESC LOVDESCFINTYPENAME,
					T1.FINBRANCH,
					T1.FINSOURCEID,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.ALLOWEDDEFFRQCHANGE,
					T1.AVAILEDDEFFRQCHANGE,
					T7.FINMAXAMOUNT LOVDESCFINMAXAMT,
					T7.FINMINAMOUNT LOVDESCFINMINAMOUNT,
					T7.FINISALWDIFFERMENT  LOVDESCFINALWDEFERMENT,
					T1.MINDOWNPAYPERC,
					T7.FINISDWPAYREQUIRED LOVDESCDWNPAYREQ,
					T1.RECALTYPE,
					T1.FINASSETVALUE,
					T7.FINMAXDIFFERMENT LOVDESCFINMAXDIFFERMENT,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.LASTREPAYRVWDATE,
					T1.LASTREPAYCPZDATE,
					T1.DISBACCOUNTID,
					T1.REPAYACCOUNTID,
					T1.ALLOWGRCREPAY,
					T1.GRCSCHDMTHD,
					T1.REPAYMARGIN,
					T1.GRCMARGIN,
					T1.DEPRECIATIONFRQ,
					T1.FINCOMMITMENTREF,
					T1.FINCURRASSETVALUE,
					T1.FINCONTRACTDATE,
					T1.NEXTDEPDATE,
					T1.LASTDEPDATE,
					T1.FINACCOUNT,
					T1.FINCUSTPFTACCOUNT,
					T7.FINRVWRATEAPPLFOR,
					T1.TOTALREPAYAMT,
					T1.CLOSINGSTATUS,
					T1.FINAPPROVEDDATE,
					T1.FINREPAYPFTONFRQ,
					T1.ANUALIZEDPERCRATE,
					T1.EFFECTIVERATEOFRETURN,
					T1.DOWNPAYBANK,
					T1.DOWNPAYSUPL,
					T7.FINDIVISION LOVDESCFINDIVISIONNAME,
					T1.GRACETERMS,
					T14.FACILITYTYPE,
					T15.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
					T16.BRANCHDESC LOVDESCFINBRANCHNAME,
					T1.TOTALGROSSGRCPFT,
					T1.GRCPROFITDAYSBASIS,
					T1.STEPFINANCE,
					T1.STEPTYPE,
					T1.STEPPOLICY,
					T1.ALWMANUALSTEPS,
					T1.NOOFSTEPS,
					T1.LINKEDFINREF,
					T7.PRODUCT LOVDESCFINPRODUCT,
					T1.GRCMINRATE,
					T1.GRCMAXRATE,
					T1.RPYMINRATE,
					T1.RPYMAXRATE,
					T1.MANUALSCHEDULE,
					T1.TAKEOVERFINANCE,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.SUPPLEMENTRENT,
					T1.INCREASEDCOST,
					T1.FEEACCOUNTID,
					T1.TDSAPPLICABLE,
					T1.INSURANCEAMT,
					T1.DEDUCTINSDISB,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.CALROUNDINGMODE,
					T1.ALWMULTIDISB,
					T1.BPIAMOUNT,
					T1.DEDUCTFEEDISB,
					T1.FEECHARGEAMT,
					T1.RVWRATEAPPLFOR,
					T1.SCHCALONRVW,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.ROUNDINGTARGET,
					T1.GRCMAXAMOUNT,
					T1.ADVANCEEMI,
					T1.ADVEMITERMS,
					T1.BPIPFTDAYSBASIS BPIRATEBASIS,
					T1.GRCADVTYPE,
					T1.GRCADVTERMS,
					T1.ADVTYPE,
					T1.ADVTERMS,
					T1.ADVSTAGE,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING,
					T1.APPLIEDLOANAMT,
					T1.FINISRATERVWATGRCEND,
					T1.CBAMOUNT,
					T1.SVAMOUNT,
					T1.SANBSDSCHDLE,
					T1.PROMOTIONSEQID,
					T1.ALWGRCADJ,
					T1.ENDGRCPERIODAFTRFULLDISB,
					T1.AUTOINCGRCENDDATE,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS
				FROM WIFFINANCEMAIN T1
				LEFT JOIN WIFINDICATIVETERMDETAIL_TEMP T14 ON T14.FINREFERENCE = T1.FINREFERENCE
				LEFT JOIN CUSTOMERS T15 ON T15.CUSTID = T1.CUSTID
				JOIN RMTFINANCETYPES T7 ON T1.FINTYPE = T7.FINTYPE
				LEFT JOIN RMTBRANCHES T16 ON T1.FINBRANCH = T16.BRANCHCODE
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2031.69_post" author="savitri.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'wiffinancemain_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2031.70_pre" author="savitri.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finsteppolicydetail_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2031.70" author="savitri.n">
		<createView viewName="FINSTEPPOLICYDETAIL_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINREFERENCE,
					T1.STEPNO,
					T1.TENORSPLITPERC,
					T1.INSTALLMENTS,
					T1.RATEMARGIN,
					T1.EMISPLITPERC,
					T1.STEPPEDEMI,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.STEPSPECIFIER,
					T1.STEPSTART,
					T1.STEPEND,
					T1.AUTOCAL
				FROM FINSTEPPOLICYDETAIL T1
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2031.70_post" author="savitri.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finsteppolicydetail_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2031.71_pre" author="savitri.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finsteppolicydetail_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2031.71" author="savitri.n">
		<createView viewName="FINSTEPPOLICYDETAIL_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINREFERENCE,
					T1.STEPNO,
					T1.TENORSPLITPERC,
					T1.INSTALLMENTS,
					T1.RATEMARGIN,
					T1.EMISPLITPERC,
					T1.STEPPEDEMI,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.STEPSPECIFIER,
					T1.STEPSTART,
					T1.STEPEND,
					T1.AUTOCAL
				FROM FINSTEPPOLICYDETAIL_TEMP T1
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2031.71_post" author="savitri.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finsteppolicydetail_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2031.72_pre" author="savitri.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finsteppolicydetail_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2031.72" author="savitri.n">
		<createView viewName="FINSTEPPOLICYDETAIL_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINREFERENCE,
					T1.STEPNO,
					T1.TENORSPLITPERC,
					T1.INSTALLMENTS,
					T1.RATEMARGIN,
					T1.EMISPLITPERC,
					T1.STEPPEDEMI,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.STEPSPECIFIER,
					T1.STEPSTART,
					T1.STEPEND,
					T1.AUTOCAL
				FROM FINSTEPPOLICYDETAIL_TEMP T1
				UNION ALL
				SELECT T1.FINREFERENCE,
					T1.STEPNO,
					T1.TENORSPLITPERC,
					T1.INSTALLMENTS,
					T1.RATEMARGIN,
					T1.EMISPLITPERC,
					T1.STEPPEDEMI,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.STEPSPECIFIER,
					T1.STEPSTART,
					T1.STEPEND,
					T1.AUTOCAL
				FROM FINSTEPPOLICYDETAIL T1
				WHERE NOT (EXISTS ( SELECT 1 FROM FINSTEPPOLICYDETAIL_TEMP
					WHERE FINSTEPPOLICYDETAIL_TEMP.FINREFERENCE = T1.FINREFERENCE AND FINSTEPPOLICYDETAIL_TEMP.STEPNO = T1.STEPNO))
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2031.72_post" author="savitri.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finsteppolicydetail_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2031.73_pre" author="savitri.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'wiffinsteppolicydetail_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2031.73" author="savitri.n">
		<createView viewName="WIFFINSTEPPOLICYDETAIL_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINREFERENCE,
					T1.STEPNO,
					T1.TENORSPLITPERC,
					T1.INSTALLMENTS,
					T1.RATEMARGIN,
					T1.EMISPLITPERC,
					T1.STEPPEDEMI,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.STEPSPECIFIER,
					T1.STEPSTART,
					T1.STEPEND,
					T1.AUTOCAL
				FROM WIFFINSTEPPOLICYDETAIL_TEMP T1
				UNION ALL
				SELECT T1.FINREFERENCE,
					T1.STEPNO,
					T1.TENORSPLITPERC,
					T1.INSTALLMENTS,
					T1.RATEMARGIN,
					T1.EMISPLITPERC,
					T1.STEPPEDEMI,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.STEPSPECIFIER,
					T1.STEPSTART,
					T1.STEPEND,
					T1.AUTOCAL
				FROM WIFFINSTEPPOLICYDETAIL T1
				WHERE NOT (EXISTS ( SELECT 1 FROM WIFFINSTEPPOLICYDETAIL_TEMP
					WHERE WIFFINSTEPPOLICYDETAIL_TEMP.FINREFERENCE = T1.FINREFERENCE AND WIFFINSTEPPOLICYDETAIL_TEMP.STEPNO = T1.STEPNO))
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2031.73_post" author="savitri.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'wiffinsteppolicydetail_view');
			]]>
		</sql>
	</changeSet>

	<!-- ST#2031 - Step Loans based on Installment amount changes end -->

	<!--ST#2145 - Schedule version changes in LMS changes start -->

	<changeSet id="ST#2145.1" author="naveenkumar.a">
		<addColumn tableName="FINANCEMAIN">
			<column name="SchdVersion" type="int" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#2145.2" author="naveenkumar.a">
		<addColumn tableName="FINANCEMAIN_TEMP">
			<column name="SchdVersion" type="int" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#2145.3" author="naveenkumar.a">
		<addColumn tableName="REJECTFINANCEMAIN">
			<column name="SchdVersion" type="int" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#2145.4" author="naveenkumar.a">
		<sql>
			<![CDATA[
				UPDATE FINANCEMAIN Set SchdVersion = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2145.5" author="naveenkumar.a" dbms="postgresql, oracle">
		<addDefaultValue columnName="SchdVersion" tableName="FINANCEMAIN" defaultValue="0" />
		<addDefaultValue columnName="SchdVersion" tableName="FINANCEMAIN_TEMP" defaultValue="0" />
		<addDefaultValue columnName="SchdVersion" tableName="REJECTFINANCEMAIN" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#2145.5" author="naveenkumar.a" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE FINANCEMAIN ADD CONSTRAINT DF_FM_SchdVersion DEFAULT 0 FOR SchdVersion;
				ALTER TABLE FINANCEMAIN_TEMP ADD CONSTRAINT DF_FM_T_SchdVersion DEFAULT 0 FOR SchdVersion;
				ALTER TABLE REJECTFINANCEMAIN ADD CONSTRAINT DF_RFM_SchdVersion DEFAULT 0 FOR SchdVersion;
			 ]]>
		</sql>
	</changeSet>

	<!--ST#2145 - Schedule version changes in LMS changes end -->

	<!--ST#2145, ST#2031 - Finance main related views are handle in single place start -->

	<changeSet id="ST#2031.74_pre" author="savitri.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemain_tview');
		 	]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2031.74" author="savitri.n">
		<createView viewName="FINANCEMAIN_TVIEW" replaceIfExists="true">
		   <![CDATA[
				SELECT T1.FINREFERENCE,
					T1.INVESTMENTREF,
					T1.NUMBEROFTERMS,
					T1.GRCPERIODENDDATE,
					T1.ALLOWGRCPERIOD,
					T1.GRACEBASERATE,
					T1.GRACESPECIALRATE,
					T1.GRCPFTRATE,
					T1.GRCPFTFRQ,
					T1.NEXTGRCPFTDATE,
					T1.ALLOWGRCPFTRVW,
					T1.GRCPFTRVWFRQ,
					T1.NEXTGRCPFTRVWDATE,
					T1.ALLOWGRCCPZ,
					T1.GRCCPZFRQ,
					T1.NEXTGRCCPZDATE,
					T1.REPAYBASERATE,
					T1.REPAYSPECIALRATE,
					T1.REPAYPROFITRATE,
					T1.REPAYFRQ,
					T1.NEXTREPAYDATE,
					T1.REPAYPFTFRQ,
					T1.NEXTREPAYPFTDATE,
					T1.ALLOWREPAYRVW,
					T1.REPAYRVWFRQ,
					T1.NEXTREPAYRVWDATE,
					T1.ALLOWREPAYCPZ,
					T1.REPAYCPZFRQ,
					T1.NEXTREPAYCPZDATE,
					T1.MATURITYDATE,
					T1.CPZATGRACEEND,
					T1.DOWNPAYMENT,
					T1.GRACEFLATAMOUNT,
					T1.REQREPAYAMOUNT,
					T1.TOTALPROFIT,
					T1.TOTALCPZ,
					T1.TOTALGROSSPFT,
					T1.TOTALGROSSGRCPFT,
					T1.TOTALGRACEPFT,
					T1.TOTALGRACECPZ,
					T1.GRCRATEBASIS,
					T1.REPAYRATEBASIS,
					T1.FINTYPE,
					T1.FINREMARKS,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.REQMATURITY,
					T1.CALTERMS,
					T1.CALMATURITY,
					T1.FIRSTREPAY,
					T1.LASTREPAY,
					T1.FINSTARTDATE,
					T1.FINAMOUNT,
					T1.FINAMOUNT + T1.FEECHARGEAMT - T1.DOWNPAYMENT LOVDESCFINANCINGAMOUNT,
					T1.FINREPAYMENTAMOUNT,
					T1.CUSTID,
					T1.DEFFERMENTS,
					T1.PLANDEFERCOUNT,
					T1.FINBRANCH,
					T1.FINSOURCEID,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.ALLOWEDDEFFRQCHANGE,
					T1.AVAILEDDEFFRQCHANGE,
					T1.RECALTYPE,
					T1.FINASSETVALUE,
					T1.DISBACCOUNTID,
					T1.REPAYACCOUNTID,
					T1.FINISACTIVE,
					T1.LIMITVALID,
					T1.OVERRIDELIMIT,
					T1.SECURITYDEPOSIT,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T7.FINTYPEDESC LOVDESCFINTYPENAME,
					T7.FINMAXAMOUNT LOVDESCFINMAXAMT,
					T7.FINMINAMOUNT LOVDESCFINMINAMOUNT,
					T1.MINDOWNPAYPERC,
					T7.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
					T7.FINISDWPAYREQUIRED LOVDESCDWNPAYREQ,
					T7.FINMAXDIFFERMENT LOVDESCFINMAXDIFFERMENT,
					T12.BRANCHDESC LOVDESCFINBRANCHNAME,
					T12.BRANCHPROVINCE FINBRANCHPROVINCECODE,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.LASTREPAYRVWDATE,
					T1.LASTREPAYCPZDATE,
					T1.ALLOWGRCREPAY,
					T1.GRCSCHDMTHD,
					T1.GRCMARGIN,
					T1.REPAYMARGIN,
					T1.FINCURRASSETVALUE,
					T1.FINCOMMITMENTREF,
					T1.FINLIMITREF,
					T1.DEPRECIATIONFRQ,
					T1.FINCONTRACTDATE,
					T1.NEXTDEPDATE,
					T1.LASTDEPDATE,
					T1.FINACCOUNT,
					T1.FINCUSTPFTACCOUNT,
					T17.ACRTILLLBD LOVDESCACCRUEDTILLLBD,
					T7.FINRVWRATEAPPLFOR,
					T1.TOTALREPAYAMT,
					T1.CLOSINGSTATUS,
					T1.FINAPPROVEDDATE,
					T1.FEECHARGEAMT,
					T1.BLACKLISTED,
					T1.FINREPAYPFTONFRQ,
					T1.ANUALIZEDPERCRATE,
					T1.EFFECTIVERATEOFRETURN,
					T1.MIGRATEDFINANCE,
					T1.SCHEDULEMAINTAINED,
					T1.SCHEDULEREGENERATED,
					T1.FINPURPOSE,
					T39.LOANPURPOSEDESC LOVDESCFINPURPOSENAME,
					T1.FINSTATUS,
					T1.FINSTSREASON,
					T1.INITIATEUSER,
					T1.BANKNAME,
					T1.IBAN,
					T1.ACCOUNTTYPE,
					T1.DDAREFERENCENO,
					T7.FINSCHEDULEON LOVDESCFINSCHEDULEON,
					T1.CUSTDSR,
					T1.JOINTACCOUNT,
					T1.JOINTCUSTID,
					T1.DOWNPAYBANK,
					T1.DOWNPAYSUPL,
					T1.DOWNPAYACCOUNT,
					T1.SECURITYCOLLATERAL,
					T1.APPROVED,
					T1.DISCREPANCY,
					T1.LIMITAPPROVED,
					T1.GRACETERMS,
					T7.FINDIVISION LOVDESCFINDIVISION,
					T1.RCDMAINTAINSTS,
					T1.FINREPAYMETHOD,
					T1.GRCPROFITDAYSBASIS,
					T1.STEPFINANCE,
					T1.STEPTYPE,
					T1.STEPPOLICY,
					T1.ALWMANUALSTEPS,
					T1.NOOFSTEPS,
					T1.LINKEDFINREF,
					T1.NEXTUSERID,
					T1.PRIORITY,
					T24.POLICYDESC LOVDESCSTEPPOLICYNAME,
					T1.GRCMINRATE,
					T1.GRCMAXRATE,
					T1.RPYMINRATE,
					T1.RPYMAXRATE,
					T1.DEVIATIONAPPROVAL,
					T1.MANUALSCHEDULE,
					T1.TAKEOVERFINANCE,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.SUPPLEMENTRENT,
					T1.INCREASEDCOST,
					T1.CREDITINSAMT,
					T1.ROLLOVERFRQ,
					T1.NEXTROLLOVERDATE,
					T27.CUSTSTSDESCRIPTION,
					T1.SHARIASTATUS,
					T1.INITIATEDATE,
					T1.FINPREAPPROVEDREF,
					T1.MMAID,
					T1.ACCOUNTSOFFICER,
					T1.FEEACCOUNTID,
					T1.FINCANCELAC,
					T28.DEALERNAME LOVDESCACCOUNTSOFFICER,
					T28.DEALERCITY LOVDESCSOURCECITY,
					T1.DSACODE,
					T30.ROFFICERDESC DSACODEDESC,
					T1.TDSAPPLICABLE,
					T1.MANDATEID,
					T1.DROPLINEFRQ,
					T1.FIRSTDROPLINEDATE,
					T1.PFTSERVICINGODLIMIT,
					T1.INSURANCEAMT,
					T1.DEDUCTINSDISB,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.CALROUNDINGMODE,
					T1.ALWMULTIDISB,
					T1.APPLICATIONNO,
					T1.REFERRALID,
					T33.ROFFICERDESC REFERRALIDDESC,
					T1.DMACODE,
					T34.ROFFICERDESC DMACODEDESC,
					T1.SALESDEPARTMENT,
					T35.DEPTDESC SALESDEPARTMENTDESC,
					T1.QUICKDISB,
					T1.WIFREFERENCE,
					T1.UNPLANEMIHLOCKPERIOD,
					T1.UNPLANEMICPZ,
					T1.REAGECPZ,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.AVAILEDUNPLANEMI,
					T1.AVAILEDREAGEH,
					T1.BPIAMOUNT,
					T1.DEDUCTFEEDISB,
					T1.RVWRATEAPPLFOR,
					T1.SCHCALONRVW,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.PROMOTIONCODE,
					T1.RESTRUCTURELOAN,
					T1.OLDFINREFERENCE,
					T1.REAGEBUCKET,
					T1.FINCATEGORY,
					T1.PRODUCTCATEGORY,
					T1.ROUNDINGTARGET,
					T36.ENTITYCODE LOVDESCENTITYCODE,
					T1.ELIGIBILITYMETHOD,
					T38.FIELDCODEVALUE LOVELIGIBILITYMETHOD,
					T38.VALUEDESC LOVDESCELIGIBILITYMETHOD,
					T1.EMPLOYEENAME,
					T37.ROFFICERDESC EMPLOYEENAMEDESC,
					T1.SAMPLINGREQUIRED,
					T1.LEGALREQUIRED,
					T1.GRCMAXAMOUNT,
					T1.CONNECTOR,
					T40.DEALERNAME CONNECTORCODE,
					T40.DEALERCITY CONNECTORDESC,
					T1.ADVANCEEMI,
					T1.ADVEMITERMS,
					T1.BPIPFTDAYSBASIS,
					T1.FIXEDRATETENOR,
					T1.FIXEDTENORRATE,
					T12.BRANCHTEL FINBRANCHCONTACT,
					T1.PROCESSATTRIBUTES,
					T1.BUSINESSVERTICAL,
					BV.CODE BUSINESSVERTICALCODE,
					BV.DESCRIPTION BUSINESSVERTICALDESC,
					T1.GRCADVTYPE,
					T1.GRCADVTERMS,
					T1.ADVTYPE,
					T1.ADVTERMS,
					T1.ADVSTAGE,
					T1.TDSPERCENTAGE,
					T1.TDSSTARTDATE,
					T1.TDSENDDATE,
					T1.TDSLIMITAMT,
					T1.VANREQ,
					T1.VANCODE,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING,
					T1.SANBSDSCHDLE,
					T1.PROMOTIONSEQID,
					T1.SVAMOUNT,
					T1.CBAMOUNT,
					T1.APPLIEDLOANAMT,
					T1.FINISRATERVWATGRCEND,
					T1.PLANEMIHALWINGRACE,
					T1.ALWGRCADJ,
					T1.ENDGRCPERIODAFTRFULLDISB,
					T1.AUTOINCGRCENDDATE,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS,
					T1.SCHDVERSION
				FROM FINANCEMAIN_TEMP T1
				JOIN RMTFINANCETYPES T7 ON T1.FINTYPE  = T7.FINTYPE 
				LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH  = T12.BRANCHCODE 
				LEFT JOIN FINPFTDETAILS T17 ON T17.FINREFERENCE  = T1.FINREFERENCE 
				LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY  = T24.POLICYCODE 
				LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS  = T27.CUSTSTSCODE 
				LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
				LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE  = T30.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID  = T33.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE  = T34.ROFFICERCODE 
				LEFT JOIN BMTDEPARTMENTS T35 ON T1.SALESDEPARTMENT  = T35.DEPTCODE 
				LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION  = T36.DIVISIONCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME  = T37.ROFFICERCODE 
				LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE  = 'ELGMETHOD' 
				LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE  = T39.LOANPURPOSECODE 
				LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
				LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2031.74_post" author="savitri.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemain_tview');
		 	]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2031.75_pre" author="savitri.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemain_aview');
		 	]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2031.75" author="savitri.n">
		<createView viewName="FINANCEMAIN_AVIEW" replaceIfExists="true">
			<![CDATA[ 
				SELECT T1.FINREFERENCE,
					T1.INVESTMENTREF,
					T1.NUMBEROFTERMS,
					T1.GRCPERIODENDDATE,
					T1.ALLOWGRCPERIOD,
					T1.GRACEBASERATE,
					T1.GRACESPECIALRATE,
					T1.GRCPFTRATE,
					T1.GRCPFTFRQ,
					T1.NEXTGRCPFTDATE,
					T1.ALLOWGRCPFTRVW,
					T1.GRCPFTRVWFRQ,
					T1.NEXTGRCPFTRVWDATE,
					T1.ALLOWGRCCPZ,
					T1.GRCCPZFRQ,
					T1.NEXTGRCCPZDATE,
					T1.REPAYBASERATE,
					T1.REPAYSPECIALRATE,
					T1.REPAYPROFITRATE,
					T1.REPAYFRQ,
					T1.NEXTREPAYDATE,
					T1.REPAYPFTFRQ,
					T1.NEXTREPAYPFTDATE,
					T1.ALLOWREPAYRVW,
					T1.REPAYRVWFRQ,
					T1.NEXTREPAYRVWDATE,
					T1.ALLOWREPAYCPZ,
					T1.REPAYCPZFRQ,
					T1.NEXTREPAYCPZDATE,
					T1.MATURITYDATE,
					T1.CPZATGRACEEND,
					T1.DOWNPAYMENT,
					T1.GRACEFLATAMOUNT,
					T1.REQREPAYAMOUNT,
					T1.TOTALPROFIT,
					T1.TOTALCPZ,
					T1.TOTALGROSSPFT,
					T1.TOTALGROSSGRCPFT,
					T1.TOTALGRACEPFT,
					T1.TOTALGRACECPZ,
					T1.GRCRATEBASIS,
					T1.REPAYRATEBASIS,
					T1.FINTYPE,
					T1.FINREMARKS,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.REQMATURITY,
					T1.CALTERMS,
					T1.CALMATURITY,
					T1.FIRSTREPAY,
					T1.LASTREPAY,
					T1.FINSTARTDATE,
					T1.FINAMOUNT,
					T1.FINAMOUNT + T1.FEECHARGEAMT - T1.DOWNPAYMENT LOVDESCFINANCINGAMOUNT,
					T1.FINREPAYMENTAMOUNT,
					T1.CUSTID,
					T1.DEFFERMENTS,
					T1.PLANDEFERCOUNT,
					T1.FINBRANCH,
					T1.FINSOURCEID,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.ALLOWEDDEFFRQCHANGE,
					T1.AVAILEDDEFFRQCHANGE,
					T1.RECALTYPE,
					T1.FINASSETVALUE,
					T1.DISBACCOUNTID,
					T1.REPAYACCOUNTID,
					T1.FINISACTIVE,
					T1.LIMITVALID,
					T1.OVERRIDELIMIT,
					T1.SECURITYDEPOSIT,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T7.FINTYPEDESC LOVDESCFINTYPENAME,
					T7.FINMAXAMOUNT LOVDESCFINMAXAMT,
					T7.FINMINAMOUNT LOVDESCFINMINAMOUNT,
					T1.MINDOWNPAYPERC,
					T7.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
					T7.FINISDWPAYREQUIRED LOVDESCDWNPAYREQ,
					T7.FINMAXDIFFERMENT LOVDESCFINMAXDIFFERMENT,
					T12.BRANCHDESC LOVDESCFINBRANCHNAME,
					T12.BRANCHPROVINCE FINBRANCHPROVINCECODE,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.LASTREPAYRVWDATE,
					T1.LASTREPAYCPZDATE,
					T1.ALLOWGRCREPAY,
					T1.GRCSCHDMTHD,
					T1.GRCMARGIN,
					T1.REPAYMARGIN,
					T1.FINCURRASSETVALUE,
					T1.FINCOMMITMENTREF,
					T1.FINLIMITREF,
					T1.DEPRECIATIONFRQ,
					T1.FINCONTRACTDATE,
					T1.NEXTDEPDATE,
					T1.LASTDEPDATE,
					T1.FINACCOUNT,
					T1.FINCUSTPFTACCOUNT,
					T17.ACRTILLLBD LOVDESCACCRUEDTILLLBD,
					T7.FINRVWRATEAPPLFOR,
					T1.TOTALREPAYAMT,
					T1.CLOSINGSTATUS,
					T1.FINAPPROVEDDATE,
					T1.FEECHARGEAMT,
					T1.BLACKLISTED,
					T1.FINREPAYPFTONFRQ,
					T1.ANUALIZEDPERCRATE,
					T1.EFFECTIVERATEOFRETURN,
					T1.MIGRATEDFINANCE,
					T1.SCHEDULEMAINTAINED,
					T1.SCHEDULEREGENERATED,
					T1.FINPURPOSE,
					T39.LOANPURPOSEDESC LOVDESCFINPURPOSENAME,
					T1.FINSTATUS,
					T1.FINSTSREASON,
					T1.INITIATEUSER,
					T1.BANKNAME,
					T1.IBAN,
					T1.ACCOUNTTYPE,
					T1.DDAREFERENCENO,
					T7.FINSCHEDULEON LOVDESCFINSCHEDULEON,
					T1.CUSTDSR,
					T1.JOINTACCOUNT,
					T1.JOINTCUSTID,
					T1.DOWNPAYBANK,
					T1.DOWNPAYSUPL,
					T1.DOWNPAYACCOUNT,
					T1.SECURITYCOLLATERAL,
					T1.APPROVED,
					T1.DISCREPANCY,
					T1.LIMITAPPROVED,
					T1.GRACETERMS,
					T7.FINDIVISION LOVDESCFINDIVISION,
					T1.RCDMAINTAINSTS,
					T1.FINREPAYMETHOD,
					T1.GRCPROFITDAYSBASIS,
					T1.STEPFINANCE,
					T1.STEPTYPE,
					T1.STEPPOLICY,
					T1.ALWMANUALSTEPS,
					T1.NOOFSTEPS,
					T1.LINKEDFINREF,
					T1.NEXTUSERID,
					T1.PRIORITY,
					T24.POLICYDESC LOVDESCSTEPPOLICYNAME,
					T1.GRCMINRATE,
					T1.GRCMAXRATE,
					T1.RPYMINRATE,
					T1.RPYMAXRATE,
					T1.DEVIATIONAPPROVAL,
					T1.MANUALSCHEDULE,
					T1.TAKEOVERFINANCE,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.SUPPLEMENTRENT,
					T1.INCREASEDCOST,
					T1.CREDITINSAMT,
					T1.ROLLOVERFRQ,
					T1.NEXTROLLOVERDATE,
					T27.CUSTSTSDESCRIPTION,
					T1.SHARIASTATUS,
					T1.INITIATEDATE,
					T1.FINPREAPPROVEDREF,
					T1.MMAID,
					T1.ACCOUNTSOFFICER,
					T1.FEEACCOUNTID,
					T1.FINCANCELAC,
					T28.DEALERNAME LOVDESCACCOUNTSOFFICER,
					T28.DEALERCITY LOVDESCSOURCECITY,
					T1.DSACODE,
					T30.ROFFICERDESC DSACODEDESC,
					T1.TDSAPPLICABLE,
					T1.MANDATEID,
					T1.DROPLINEFRQ,
					T1.FIRSTDROPLINEDATE,
					T1.PFTSERVICINGODLIMIT,
					T1.INSURANCEAMT,
					T1.DEDUCTINSDISB,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.CALROUNDINGMODE,
					T1.ALWMULTIDISB,
					T1.APPLICATIONNO,
					T1.REFERRALID,
					T33.ROFFICERDESC REFERRALIDDESC,
					T1.DMACODE,
					T34.ROFFICERDESC DMACODEDESC,
					T1.SALESDEPARTMENT,
					T35.DEPTDESC SALESDEPARTMENTDESC,
					T1.QUICKDISB,
					T1.WIFREFERENCE,
					T1.UNPLANEMIHLOCKPERIOD,
					T1.UNPLANEMICPZ,
					T1.REAGECPZ,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.AVAILEDUNPLANEMI,
					T1.AVAILEDREAGEH,
					T1.BPIAMOUNT,
					T1.DEDUCTFEEDISB,
					T1.RVWRATEAPPLFOR,
					T1.SCHCALONRVW,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.PROMOTIONCODE,
					T1.RESTRUCTURELOAN,
					T1.OLDFINREFERENCE,
					T1.REAGEBUCKET,
					T1.FINCATEGORY,
					T1.PRODUCTCATEGORY,
					T1.ROUNDINGTARGET,
					T36.ENTITYCODE LOVDESCENTITYCODE,
					T1.ELIGIBILITYMETHOD,
					T38.FIELDCODEVALUE LOVELIGIBILITYMETHOD,
					T38.VALUEDESC LOVDESCELIGIBILITYMETHOD,
					T1.EMPLOYEENAME,
					T37.ROFFICERDESC EMPLOYEENAMEDESC,
					T1.SAMPLINGREQUIRED,
					T1.LEGALREQUIRED,
					T1.GRCMAXAMOUNT,
					T1.CONNECTOR,
					T40.DEALERNAME CONNECTORCODE,
					T40.DEALERCITY CONNECTORDESC,
					T1.ADVANCEEMI,
					T1.ADVEMITERMS,
					T1.BPIPFTDAYSBASIS,
					T1.FIXEDRATETENOR,
					T1.FIXEDTENORRATE,
					T12.BRANCHTEL FINBRANCHCONTACT,
					T1.PROCESSATTRIBUTES,
					T1.BUSINESSVERTICAL,
					BV.CODE BUSINESSVERTICALCODE,
					BV.DESCRIPTION BUSINESSVERTICALDESC,
					T1.GRCADVTYPE,
					T1.GRCADVTERMS,
					T1.ADVTYPE,
					T1.ADVTERMS,
					T1.ADVSTAGE,
					T1.TDSPERCENTAGE,
					T1.TDSSTARTDATE,
					T1.TDSENDDATE,
					T1.TDSLIMITAMT,
					T1.VANREQ,
					T1.VANCODE,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING,
					T1.SANBSDSCHDLE,
					T1.PROMOTIONSEQID,
					T1.SVAMOUNT,
					T1.CBAMOUNT,
					T1.APPLIEDLOANAMT,
					T1.FINISRATERVWATGRCEND,
					T1.PLANEMIHALWINGRACE,
					T1.ALWGRCADJ,
					T1.ENDGRCPERIODAFTRFULLDISB,
					T1.AUTOINCGRCENDDATE,
					C.CUSTCIF LOVDESCCUSTCIF,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS,
					T1.SCHDVERSION						
				FROM FINANCEMAIN T1
				JOIN RMTFINANCETYPES T7 ON T1.FINTYPE = T7.FINTYPE 
				LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH  = T12.BRANCHCODE 
				LEFT JOIN FINPFTDETAILS T17 ON T17.FINREFERENCE  = T1.FINREFERENCE 
				LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY  = T24.POLICYCODE 
				LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS  = T27.CUSTSTSCODE 
				LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
				LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE  = T30.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID  = T33.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE  = T34.ROFFICERCODE 
				LEFT JOIN BMTDEPARTMENTS T35 ON T1.SALESDEPARTMENT  = T35.DEPTCODE 
				LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION  = T36.DIVISIONCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME  = T37.ROFFICERCODE 
				LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE  = 'ELGMETHOD' 
				LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE  = T39.LOANPURPOSECODE 
				LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
				LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
				INNER JOIN CUSTOMERS C ON C.CUSTID = t1.CUSTID
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2031.75_post" author="savitri.n" dbms="postgresql">
		<sql>	
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2031.76_pre" author="savitri.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemain_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2031.76" author="savitri.n">
		<createView viewName="FINANCEMAIN_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINREFERENCE,
				    T1.INVESTMENTREF,
				    T1.NUMBEROFTERMS,
				    T1.GRCPERIODENDDATE,
				    T1.ALLOWGRCPERIOD,
				    T1.GRACEBASERATE,
				    T1.GRACESPECIALRATE,
				    T1.GRCPFTRATE,
				    T1.GRCPFTFRQ,
				    T1.NEXTGRCPFTDATE,
				    T1.ALLOWGRCPFTRVW,
				    T1.GRCPFTRVWFRQ,
				    T1.NEXTGRCPFTRVWDATE,
				    T1.ALLOWGRCCPZ,
				    T1.GRCCPZFRQ,
				    T1.NEXTGRCCPZDATE,
				    T1.REPAYBASERATE,
				    T1.REPAYSPECIALRATE,
				    T1.REPAYPROFITRATE,
				    T1.REPAYFRQ,
				    T1.NEXTREPAYDATE,
				    T1.REPAYPFTFRQ,
				    T1.NEXTREPAYPFTDATE,
				    T1.ALLOWREPAYRVW,
				    T1.REPAYRVWFRQ,
				    T1.NEXTREPAYRVWDATE,
				    T1.ALLOWREPAYCPZ,
				    T1.REPAYCPZFRQ,
				    T1.NEXTREPAYCPZDATE,
				    T1.MATURITYDATE,
				    T1.CPZATGRACEEND,
				    T1.DOWNPAYMENT,
				    T1.GRACEFLATAMOUNT,
				    T1.REQREPAYAMOUNT,
				    T1.TOTALPROFIT,
				    T1.TOTALCPZ,
				    T1.TOTALGROSSPFT,
				    T1.TOTALGROSSGRCPFT,
				    T1.TOTALGRACEPFT,
				    T1.TOTALGRACECPZ,
				    T1.GRCRATEBASIS,
				    T1.REPAYRATEBASIS,
				    T1.FINTYPE,
				    T1.FINREMARKS,
				    T1.FINCCY,
				    T1.SCHEDULEMETHOD,
				    T1.PROFITDAYSBASIS,
				    T1.REQMATURITY,
				    T1.CALTERMS,
				    T1.CALMATURITY,
				    T1.FIRSTREPAY,
				    T1.LASTREPAY,
				    T1.FINSTARTDATE,
				    T1.FINAMOUNT,
				    T1.FINAMOUNT + T1.FEECHARGEAMT - T1.DOWNPAYMENT LOVDESCFINANCINGAMOUNT,
				    T1.FINREPAYMENTAMOUNT,
				    T1.CUSTID,
				    T1.DEFFERMENTS,
				    T1.PLANDEFERCOUNT,
				    T1.FINBRANCH,
				    T1.FINSOURCEID,
				    T1.ALLOWEDDEFRPYCHANGE,
				    T1.AVAILEDDEFRPYCHANGE,
				    T1.ALLOWEDDEFFRQCHANGE,
				    T1.AVAILEDDEFFRQCHANGE,
				    T1.RECALTYPE,
				    T1.FINASSETVALUE,
				    T1.DISBACCOUNTID,
				    T1.REPAYACCOUNTID,
				    T1.FINISACTIVE,
				    T1.LIMITVALID,
				    T1.OVERRIDELIMIT,
				    T1.SECURITYDEPOSIT,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T7.FINTYPEDESC LOVDESCFINTYPENAME,
				    T7.FINMAXAMOUNT LOVDESCFINMAXAMT,
				    T7.FINMINAMOUNT LOVDESCFINMINAMOUNT,
				    T1.MINDOWNPAYPERC,
				    T7.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
				    T7.FINISDWPAYREQUIRED LOVDESCDWNPAYREQ,
				    T7.FINMAXDIFFERMENT LOVDESCFINMAXDIFFERMENT,
				    T12.BRANCHDESC LOVDESCFINBRANCHNAME,
				    T12.BRANCHPROVINCE FINBRANCHPROVINCECODE,
				    T1.LASTREPAYDATE,
				    T1.LASTREPAYPFTDATE,
				    T1.LASTREPAYRVWDATE,
				    T1.LASTREPAYCPZDATE,
				    T1.ALLOWGRCREPAY,
				    T1.GRCSCHDMTHD,
				    T1.GRCMARGIN,
				    T1.REPAYMARGIN,
				    T1.FINCURRASSETVALUE,
				    T1.FINCOMMITMENTREF,
				    T1.FINLIMITREF,
				    T1.DEPRECIATIONFRQ,
				    T1.FINCONTRACTDATE,
				    T1.NEXTDEPDATE,
				    T1.LASTDEPDATE,
				    T1.FINACCOUNT,
				    T1.FINCUSTPFTACCOUNT,
				    T17.ACRTILLLBD LOVDESCACCRUEDTILLLBD,
				    T7.FINRVWRATEAPPLFOR,
				    T1.TOTALREPAYAMT,
				    T1.CLOSINGSTATUS,
				    T1.FINAPPROVEDDATE,
				    T1.FEECHARGEAMT,
				    T1.BLACKLISTED,
				    T1.FINREPAYPFTONFRQ,
				    T1.ANUALIZEDPERCRATE,
				    T1.EFFECTIVERATEOFRETURN,
				    T1.MIGRATEDFINANCE,
				    T1.SCHEDULEMAINTAINED,
				    T1.SCHEDULEREGENERATED,
				    T1.FINPURPOSE,
				    T39.LOANPURPOSEDESC LOVDESCFINPURPOSENAME,
				    T1.FINSTATUS,
				    T1.FINSTSREASON,
				    T1.INITIATEUSER,
				    T1.BANKNAME,
				    T1.IBAN,
				    T1.ACCOUNTTYPE,
				    T1.DDAREFERENCENO,
				    T7.FINSCHEDULEON LOVDESCFINSCHEDULEON,
				    T1.CUSTDSR,
				    T1.JOINTACCOUNT,
				    T1.JOINTCUSTID,
				    T1.DOWNPAYBANK,
				    T1.DOWNPAYSUPL,
				    T1.DOWNPAYACCOUNT,
				    T1.SECURITYCOLLATERAL,
				    T1.APPROVED,
				    T1.DISCREPANCY,
				    T1.LIMITAPPROVED,
				    T1.GRACETERMS,
				    T7.FINDIVISION LOVDESCFINDIVISION,
				    T1.RCDMAINTAINSTS,
				    T1.FINREPAYMETHOD,
				    T1.GRCPROFITDAYSBASIS,
				    T1.STEPFINANCE,
				    T1.STEPTYPE,
				    T1.STEPPOLICY,
				    T1.ALWMANUALSTEPS,
				    T1.NOOFSTEPS,
				    T1.LINKEDFINREF,
				    T1.NEXTUSERID,
				    T1.PRIORITY,
				    T24.POLICYDESC LOVDESCSTEPPOLICYNAME,
				    T1.GRCMINRATE,
				    T1.GRCMAXRATE,
				    T1.RPYMINRATE,
				    T1.RPYMAXRATE,
				    T1.DEVIATIONAPPROVAL,
				    T1.MANUALSCHEDULE,
				    T1.TAKEOVERFINANCE,
				    T1.GRCADVBASERATE,
				    T1.GRCADVMARGIN,
				    T1.GRCADVPFTRATE,
				    T1.RPYADVBASERATE,
				    T1.RPYADVMARGIN,
				    T1.RPYADVPFTRATE,
				    T1.SUPPLEMENTRENT,
				    T1.INCREASEDCOST,
				    T1.CREDITINSAMT,
				    T1.ROLLOVERFRQ,
				    T1.NEXTROLLOVERDATE,
				    T27.CUSTSTSDESCRIPTION,
				    T1.SHARIASTATUS,
				    T1.INITIATEDATE,
				    T1.FINPREAPPROVEDREF,
				    T1.MMAID,
				    T1.ACCOUNTSOFFICER,
				    T1.FEEACCOUNTID,
				    T1.FINCANCELAC,
				    T28.DEALERNAME LOVDESCACCOUNTSOFFICER,
				    T28.DEALERCITY LOVDESCSOURCECITY,
				    T1.DSACODE,
				    T30.ROFFICERDESC DSACODEDESC,
				    T1.TDSAPPLICABLE,
				    T1.MANDATEID,
				    T1.DROPLINEFRQ,
				    T1.FIRSTDROPLINEDATE,
				    T1.PFTSERVICINGODLIMIT,
				    T1.INSURANCEAMT,
				    T1.DEDUCTINSDISB,
				    T1.ALWBPI,
				    T1.BPITREATMENT,
				    T1.PLANEMIHALW,
				    T1.PLANEMIHMETHOD,
				    T1.PLANEMIHMAXPERYEAR,
				    T1.PLANEMIHMAX,
				    T1.PLANEMIHLOCKPERIOD,
				    T1.PLANEMICPZ,
				    T1.CALROUNDINGMODE,
				    T1.ALWMULTIDISB,
				    T1.APPLICATIONNO,
				    T1.REFERRALID,
				    T33.ROFFICERDESC REFERRALIDDESC,
				    T1.DMACODE,
				    T34.ROFFICERDESC DMACODEDESC,
				    T1.SALESDEPARTMENT,
				    T35.DEPTDESC SALESDEPARTMENTDESC,
				    T1.QUICKDISB,
				    T1.WIFREFERENCE,
				    T1.UNPLANEMIHLOCKPERIOD,
				    T1.UNPLANEMICPZ,
				    T1.REAGECPZ,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.AVAILEDUNPLANEMI,
				    T1.AVAILEDREAGEH,
				    T1.BPIAMOUNT,
				    T1.DEDUCTFEEDISB,
				    T1.RVWRATEAPPLFOR,
				    T1.SCHCALONRVW,
				    T1.PASTDUEPFTCALMTHD,
				    T1.PASTDUEPFTMARGIN,
				    T1.DROPPINGMETHOD,
				    T1.RATECHGANYDAY,
				    T1.PROMOTIONCODE,
				    T1.RESTRUCTURELOAN,
				    T1.OLDFINREFERENCE,
				    T1.REAGEBUCKET,
				    T1.FINCATEGORY,
				    T1.PRODUCTCATEGORY,
				    T1.ROUNDINGTARGET,
				    T36.ENTITYCODE LOVDESCENTITYCODE,
				    T1.ELIGIBILITYMETHOD,
				    T38.FIELDCODEVALUE LOVELIGIBILITYMETHOD,
				    T38.VALUEDESC LOVDESCELIGIBILITYMETHOD,
				    T1.EMPLOYEENAME,
				    T37.ROFFICERDESC EMPLOYEENAMEDESC,
				    T1.SAMPLINGREQUIRED,
				    T1.LEGALREQUIRED,
				    T1.GRCMAXAMOUNT,
				    T1.CONNECTOR,
				    T40.DEALERNAME CONNECTORCODE,
				    T40.DEALERCITY CONNECTORDESC,
				    T1.ADVANCEEMI,
				    T1.ADVEMITERMS,
				    T1.BPIPFTDAYSBASIS,
				    T1.FIXEDRATETENOR,
				    T1.FIXEDTENORRATE,
				    T12.BRANCHTEL FINBRANCHCONTACT,
				    T1.PROCESSATTRIBUTES,
				    T1.BUSINESSVERTICAL,
				    BV.CODE BUSINESSVERTICALCODE,
				    BV.DESCRIPTION BUSINESSVERTICALDESC,
				    T1.GRCADVTYPE,
				    T1.GRCADVTERMS,
				    T1.ADVTYPE,
				    T1.ADVTERMS,
				    T1.ADVSTAGE,
				    T1.TDSPERCENTAGE,
				    T1.TDSSTARTDATE,
				    T1.TDSENDDATE,
				    T1.TDSLIMITAMT,
				    T1.VANREQ,
				    T1.VANCODE,
				    T1.ALLOWDRAWINGPOWER,
				    T1.ALLOWREVOLVING,
				    T1.SANBSDSCHDLE,
				    T1.PROMOTIONSEQID,
				    T1.SVAMOUNT,
				    T1.CBAMOUNT,
				    T1.APPLIEDLOANAMT,
				    T1.FINISRATERVWATGRCEND,
					T1.PLANEMIHALWINGRACE,
					T1.ALWGRCADJ,
					T1.ENDGRCPERIODAFTRFULLDISB,
					T1.AUTOINCGRCENDDATE,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS,
					T1.SCHDVERSION
				FROM FINANCEMAIN_TEMP T1
				JOIN RMTFINANCETYPES T7 ON T1.FINTYPE  = T7.FINTYPE 
				LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH  = T12.BRANCHCODE 
				LEFT JOIN FINPFTDETAILS T17 ON T17.FINREFERENCE  = T1.FINREFERENCE 
				LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY  = T24.POLICYCODE 
				LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS  = T27.CUSTSTSCODE 
				LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
				LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE  = T30.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID  = T33.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE  = T34.ROFFICERCODE 
				LEFT JOIN BMTDEPARTMENTS T35 ON T1.SALESDEPARTMENT  = T35.DEPTCODE 
				LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION  = T36.DIVISIONCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME  = T37.ROFFICERCODE 
				LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE  = 'ELGMETHOD' 
				LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE  = T39.LOANPURPOSECODE 
				LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
				LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
				UNION ALL
				SELECT T1.FINREFERENCE,
				    T1.INVESTMENTREF,
				    T1.NUMBEROFTERMS,
				    T1.GRCPERIODENDDATE,
				    T1.ALLOWGRCPERIOD,
				    T1.GRACEBASERATE,
				    T1.GRACESPECIALRATE,
				    T1.GRCPFTRATE,
				    T1.GRCPFTFRQ,
				    T1.NEXTGRCPFTDATE,
				    T1.ALLOWGRCPFTRVW,
				    T1.GRCPFTRVWFRQ,
				    T1.NEXTGRCPFTRVWDATE,
				    T1.ALLOWGRCCPZ,
				    T1.GRCCPZFRQ,
				    T1.NEXTGRCCPZDATE,
				    T1.REPAYBASERATE,
				    T1.REPAYSPECIALRATE,
				    T1.REPAYPROFITRATE,
				    T1.REPAYFRQ,
				    T1.NEXTREPAYDATE,
				    T1.REPAYPFTFRQ,
				    T1.NEXTREPAYPFTDATE,
				    T1.ALLOWREPAYRVW,
				    T1.REPAYRVWFRQ,
				    T1.NEXTREPAYRVWDATE,
				    T1.ALLOWREPAYCPZ,
				    T1.REPAYCPZFRQ,
				    T1.NEXTREPAYCPZDATE,
				    T1.MATURITYDATE,
				    T1.CPZATGRACEEND,
				    T1.DOWNPAYMENT,
				    T1.GRACEFLATAMOUNT,
				    T1.REQREPAYAMOUNT,
				    T1.TOTALPROFIT,
				    T1.TOTALCPZ,
				    T1.TOTALGROSSPFT,
				    T1.TOTALGROSSGRCPFT,
				    T1.TOTALGRACEPFT,
				    T1.TOTALGRACECPZ,
				    T1.GRCRATEBASIS,
				    T1.REPAYRATEBASIS,
				    T1.FINTYPE,
				    T1.FINREMARKS,
				    T1.FINCCY,
				    T1.SCHEDULEMETHOD,
				    T1.PROFITDAYSBASIS,
				    T1.REQMATURITY,
				    T1.CALTERMS,
				    T1.CALMATURITY,
				    T1.FIRSTREPAY,
				    T1.LASTREPAY,
				    T1.FINSTARTDATE,
				    T1.FINAMOUNT,
				    T1.FINAMOUNT + T1.FEECHARGEAMT - T1.DOWNPAYMENT LOVDESCFINANCINGAMOUNT,
				    T1.FINREPAYMENTAMOUNT,
				    T1.CUSTID,
				    T1.DEFFERMENTS,
				    T1.PLANDEFERCOUNT,
				    T1.FINBRANCH,
				    T1.FINSOURCEID,
				    T1.ALLOWEDDEFRPYCHANGE,
				    T1.AVAILEDDEFRPYCHANGE,
				    T1.ALLOWEDDEFFRQCHANGE,
				    T1.AVAILEDDEFFRQCHANGE,
				    T1.RECALTYPE,
				    T1.FINASSETVALUE,
				    T1.DISBACCOUNTID,
				    T1.REPAYACCOUNTID,
				    T1.FINISACTIVE,
				    T1.LIMITVALID,
				    T1.OVERRIDELIMIT,
				    T1.SECURITYDEPOSIT,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T7.FINTYPEDESC LOVDESCFINTYPENAME,
				    T7.FINMAXAMOUNT LOVDESCFINMAXAMT,
				    T7.FINMINAMOUNT LOVDESCFINMINAMOUNT,
				    T1.MINDOWNPAYPERC,
				    T7.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
				    T7.FINISDWPAYREQUIRED LOVDESCDWNPAYREQ,
				    T7.FINMAXDIFFERMENT LOVDESCFINMAXDIFFERMENT,
				    T12.BRANCHDESC LOVDESCFINBRANCHNAME,
				    T12.BRANCHPROVINCE FINBRANCHPROVINCECODE,
				    T1.LASTREPAYDATE,
				    T1.LASTREPAYPFTDATE,
				    T1.LASTREPAYRVWDATE,
				    T1.LASTREPAYCPZDATE,
				    T1.ALLOWGRCREPAY,
				    T1.GRCSCHDMTHD,
				    T1.GRCMARGIN,
				    T1.REPAYMARGIN,
				    T1.FINCURRASSETVALUE,
				    T1.FINCOMMITMENTREF,
				    T1.FINLIMITREF,
				    T1.DEPRECIATIONFRQ,
				    T1.FINCONTRACTDATE,
				    T1.NEXTDEPDATE,
				    T1.LASTDEPDATE,
				    T1.FINACCOUNT,
				    T1.FINCUSTPFTACCOUNT,
				    T17.ACRTILLLBD LOVDESCACCRUEDTILLLBD,
				    T7.FINRVWRATEAPPLFOR,
				    T1.TOTALREPAYAMT,
				    T1.CLOSINGSTATUS,
				    T1.FINAPPROVEDDATE,
				    T1.FEECHARGEAMT,
				    T1.BLACKLISTED,
				    T1.FINREPAYPFTONFRQ,
				    T1.ANUALIZEDPERCRATE,
				    T1.EFFECTIVERATEOFRETURN,
				    T1.MIGRATEDFINANCE,
				    T1.SCHEDULEMAINTAINED,
				    T1.SCHEDULEREGENERATED,
				    T1.FINPURPOSE,
				    T39.LOANPURPOSEDESC LOVDESCFINPURPOSENAME,
				    T1.FINSTATUS,
				    T1.FINSTSREASON,
				    T1.INITIATEUSER,
				    T1.BANKNAME,
				    T1.IBAN,
				    T1.ACCOUNTTYPE,
				    T1.DDAREFERENCENO,
				    T7.FINSCHEDULEON LOVDESCFINSCHEDULEON,
				    T1.CUSTDSR,
				    T1.JOINTACCOUNT,
				    T1.JOINTCUSTID,
				    T1.DOWNPAYBANK,
				    T1.DOWNPAYSUPL,
				    T1.DOWNPAYACCOUNT,
				    T1.SECURITYCOLLATERAL,
				    T1.APPROVED,
				    T1.DISCREPANCY,
				    T1.LIMITAPPROVED,
				    T1.GRACETERMS,
				    T7.FINDIVISION LOVDESCFINDIVISION,
				    T1.RCDMAINTAINSTS,
				    T1.FINREPAYMETHOD,
				    T1.GRCPROFITDAYSBASIS,
				    T1.STEPFINANCE,
				    T1.STEPTYPE,
				    T1.STEPPOLICY,
				    T1.ALWMANUALSTEPS,
				    T1.NOOFSTEPS,
				    T1.LINKEDFINREF,
				    T1.NEXTUSERID,
				    T1.PRIORITY,
				    T24.POLICYDESC LOVDESCSTEPPOLICYNAME,
				    T1.GRCMINRATE,
				    T1.GRCMAXRATE,
				    T1.RPYMINRATE,
				    T1.RPYMAXRATE,
				    T1.DEVIATIONAPPROVAL,
				    T1.MANUALSCHEDULE,
				    T1.TAKEOVERFINANCE,
				    T1.GRCADVBASERATE,
				    T1.GRCADVMARGIN,
				    T1.GRCADVPFTRATE,
				    T1.RPYADVBASERATE,
				    T1.RPYADVMARGIN,
				    T1.RPYADVPFTRATE,
				    T1.SUPPLEMENTRENT,
				    T1.INCREASEDCOST,
				    T1.CREDITINSAMT,
				    T1.ROLLOVERFRQ,
				    T1.NEXTROLLOVERDATE,
				    T27.CUSTSTSDESCRIPTION,
				    T1.SHARIASTATUS,
				    T1.INITIATEDATE,
				    T1.FINPREAPPROVEDREF,
				    T1.MMAID,
				    T1.ACCOUNTSOFFICER,
				    T1.FEEACCOUNTID,
				    T1.FINCANCELAC,
				    T28.DEALERNAME LOVDESCACCOUNTSOFFICER,
				    T28.DEALERCITY LOVDESCSOURCECITY,
				    T1.DSACODE,
				    T30.ROFFICERDESC DSACODEDESC,
				    T1.TDSAPPLICABLE,
				    T1.MANDATEID,
				    T1.DROPLINEFRQ,
				    T1.FIRSTDROPLINEDATE,
				    T1.PFTSERVICINGODLIMIT,
				    T1.INSURANCEAMT,
				    T1.DEDUCTINSDISB,
				    T1.ALWBPI,
				    T1.BPITREATMENT,
				    T1.PLANEMIHALW,
				    T1.PLANEMIHMETHOD,
				    T1.PLANEMIHMAXPERYEAR,
				    T1.PLANEMIHMAX,
				    T1.PLANEMIHLOCKPERIOD,
				    T1.PLANEMICPZ,
				    T1.CALROUNDINGMODE,
				    T1.ALWMULTIDISB,
				    T1.APPLICATIONNO,
				    T1.REFERRALID,
				    T33.ROFFICERDESC REFERRALIDDESC,
				    T1.DMACODE,
				    T34.ROFFICERDESC DMACODEDESC,
				    T1.SALESDEPARTMENT,
				    T35.DEPTDESC SALESDEPARTMENTDESC,
				    T1.QUICKDISB,
				    T1.WIFREFERENCE,
				    T1.UNPLANEMIHLOCKPERIOD,
				    T1.UNPLANEMICPZ,
				    T1.REAGECPZ,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.AVAILEDUNPLANEMI,
				    T1.AVAILEDREAGEH,
				    T1.BPIAMOUNT,
				    T1.DEDUCTFEEDISB,
				    T1.RVWRATEAPPLFOR,
				    T1.SCHCALONRVW,
				    T1.PASTDUEPFTCALMTHD,
				    T1.PASTDUEPFTMARGIN,
				    T1.DROPPINGMETHOD,
				    T1.RATECHGANYDAY,
				    T1.PROMOTIONCODE,
				    T1.RESTRUCTURELOAN,
				    T1.OLDFINREFERENCE,
				    T1.REAGEBUCKET,
				    T1.FINCATEGORY,
				    T1.PRODUCTCATEGORY,
				    T1.ROUNDINGTARGET,
				    T36.ENTITYCODE LOVDESCENTITYCODE,
				    T1.ELIGIBILITYMETHOD,
				    T38.FIELDCODEVALUE LOVELIGIBILITYMETHOD,
				    T38.VALUEDESC LOVDESCELIGIBILITYMETHOD,
				    T1.EMPLOYEENAME,
				    T37.ROFFICERDESC EMPLOYEENAMEDESC,
				    T1.SAMPLINGREQUIRED,
				    T1.LEGALREQUIRED,
				    T1.GRCMAXAMOUNT,
				    T1.CONNECTOR,
				    T40.DEALERNAME CONNECTORCODE,
				    T40.DEALERCITY CONNECTORDESC,
				    T1.ADVANCEEMI,
				    T1.ADVEMITERMS,
				    T1.BPIPFTDAYSBASIS,
				    T1.FIXEDRATETENOR,
				    T1.FIXEDTENORRATE,
				    T12.BRANCHTEL FINBRANCHCONTACT,
				    T1.PROCESSATTRIBUTES,
				    T1.BUSINESSVERTICAL,
				    BV.CODE BUSINESSVERTICALCODE,
				    BV.DESCRIPTION BUSINESSVERTICALDESC,
				    T1.GRCADVTYPE,
				    T1.GRCADVTERMS,
				    T1.ADVTYPE,
				    T1.ADVTERMS,
				    T1.ADVSTAGE,
				    T1.TDSPERCENTAGE,
				    T1.TDSSTARTDATE,
				    T1.TDSENDDATE,
				    T1.TDSLIMITAMT,
				    T1.VANREQ,
				    T1.VANCODE,
				    T1.ALLOWDRAWINGPOWER,
				    T1.ALLOWREVOLVING,
				    T1.SANBSDSCHDLE,
				    T1.PROMOTIONSEQID,
				    T1.SVAMOUNT,
				    T1.CBAMOUNT,
				    T1.APPLIEDLOANAMT,
				    T1.FINISRATERVWATGRCEND,
					T1.PLANEMIHALWINGRACE,
					T1.ALWGRCADJ,
					T1.ENDGRCPERIODAFTRFULLDISB,
					T1.AUTOINCGRCENDDATE,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS,
					T1.SCHDVERSION
				FROM FINANCEMAIN T1
				JOIN RMTFINANCETYPES T7 ON T1.FINTYPE  = T7.FINTYPE 
				LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH  = T12.BRANCHCODE 
				LEFT JOIN FINPFTDETAILS T17 ON T17.FINREFERENCE  = T1.FINREFERENCE 
				LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY  = T24.POLICYCODE 
				LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS  = T27.CUSTSTSCODE 
				LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
				LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE  = T30.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID  = T33.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE  = T34.ROFFICERCODE 
				LEFT JOIN BMTDEPARTMENTS T35 ON T1.SALESDEPARTMENT  = T35.DEPTCODE 
				LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION  = T36.DIVISIONCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME  = T37.ROFFICERCODE 
				LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE  = 'ELGMETHOD' 
				LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE  = T39.LOANPURPOSECODE 
				LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
				LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
				WHERE NOT (EXISTS ( SELECT 1 FROM FINANCEMAIN_TEMP 
					WHERE FINANCEMAIN_TEMP.FINREFERENCE  = T1.FINREFERENCE ))
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2031.76_post" author="savitri.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2031.77_pre" author="savitri.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemain_lview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2031.77" author="savitri.n">
		<createView viewName="FINANCEMAIN_LVIEW" replaceIfExists="true">
			<![CDATA[
			 	SELECT T1.FINREFERENCE,
				    T1.INVESTMENTREF,
				    T1.FINTYPE,
				    T1.FINCCY,
				    T1.FINAMOUNT,
				    T1.DOWNPAYMENT,
				    T1.FEECHARGEAMT,
				    T1.SCHEDULEMETHOD,
				    T1.NUMBEROFTERMS,
				    T1.RECORDSTATUS,
				    T1.RECORDTYPE,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.FINBRANCH,
				    T1.FINCONTRACTDATE,
				    T1.LINKEDFINREF,
				    T1.NEXTUSERID,
				    T1.PRIORITY,
				    T1.WORKFLOWID,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.FINPREAPPROVEDREF,
				    T1.RCDMAINTAINSTS,
				    T1.INSURANCEAMT,
				    T1.FINCURRASSETVALUE,
				    T1.CALTERMS,
				    T1.DEVIATIONAPPROVAL,
				    T1.FINPURPOSE,
				    T1.INITIATEDATE,
				    T1.FINASSETVALUE,
				    T2.CUSTID,
				    T2.CUSTCIF LOVDESCCUSTCIF,
				    T2.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
				    T2.CUSTPASSPORTNO LOVDESCCUSTPASSPORTNO,
				    T2.CUSTDOB LOVDESCCUSTDOB,
				    T2.CUSTCRCPR LOVDESCCUSTCRCPR,
				    T2.PHONENUMBER,
				    T3.FINCATEGORY LOVDESCPRODUCTCODENAME,
				    T3.FINDIVISION LOVDESCFINDIVISION,
				    T3.PRODUCT LOVDESCFINPRODUCT,
				    T3.FINTYPEDESC LOVDESCFINTYPENAME,
				    COALESCE(T4.ROLEDESC, ${add.schema} FN_GET_ROLEDESC(T1.NEXTROLECODE)) LOVDESCREQUESTSTAGE,
				    T1.SAMPLINGREQUIRED,
				    T1.ADVANCEEMI,
				    T1.ADVEMITERMS,
				    T1.BPIPFTDAYSBASIS,
				    T1.GRACETERMS,
				    T1.PRODUCTCATEGORY,
				    T1.VERSION,
				    T1.TDSAPPLICABLE,
				    T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS,
					T1.SCHDVERSION
			    FROM FINANCEMAIN_TEMP T1
			    JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
			    JOIN RMTFINANCETYPES T3 ON T3.FINTYPE = T1.FINTYPE
			    LEFT JOIN SECROLES T4 ON T1.NEXTROLECODE = T4.ROLECD
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2031.77_post" author="savitri.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_lview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2031.78_pre" author="savitri.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemain_dataview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2031.78" author="savitri.n">
		<createView viewName="FINANCEMAIN_DATAVIEW" replaceIfExists="true"> 
			<![CDATA[
				SELECT T1.FINREFERENCE,
					T1.FINTYPE,
					T2.CUSTCIF LOVDESCCUSTCIF,
					T1.CUSTID,
					T1.CLOSINGSTATUS,
					T1.FINISACTIVE,
					T1.MATURITYDATE,
					T1.PRODUCTCATEGORY,
					T1.WRITEOFFLOAN,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS,
					T1.SCHDVERSION
				FROM FINANCEMAIN T1
				JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
				JOIN RMTFINANCETYPES T3 ON T3.FINTYPE = T1.FINTYPE
				WHERE T1.CLOSINGSTATUS IS NULL OR T1.CLOSINGSTATUS <> 'C'
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2031.78_post" author="savitri.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_dataview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2031.79_pre" author="savitri.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemain_dview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2031.79" author="savitri.n">
		<createView replaceIfExists="true" viewName="FINANCEMAIN_DVIEW">
			<![CDATA[
				SELECT T1.FINREFERENCE,
					T1.INVESTMENTREF,
					T1.FINTYPE,
					T1.FINCCY,
					T1.FINAMOUNT,
					T1.DOWNPAYMENT,
					T1.FEECHARGEAMT,
					T1.SCHEDULEMETHOD,
					T1.RECORDSTATUS,
					T1.RECORDTYPE,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.FINBRANCH,
					T1.FINASSETVALUE,
					T2.CUSTCIF AS LOVDESCCUSTCIF,
					T2.CUSTSHRTNAME AS LOVDESCCUSTSHRTNAME,
					T2.CUSTID,
					T2.CUSTCIF,
					T3.FINCATEGORY AS LOVDESCPRODUCTCODENAME,
					T3.FINDIVISION AS LOVDESCFINDIVISION,
					T1.SAMPLINGREQUIRED,
					T1.LEGALREQUIRED,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS,
					T1.SCHDVERSION
				FROM FINANCEMAIN_TEMP T1
				JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
				JOIN RMTFINANCETYPES T3 ON T3.FINTYPE = T1.FINTYPE
				JOIN INVESTMENTFINHEADER T4 ON T4.INVESTMENTREF = T1.INVESTMENTREF
		  	]]>
		</createView>
	</changeSet>

	<changeSet id="ST#2031.79_post" author="savitri.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_dview');
			]]>
		</sql>
	</changeSet>

	<!--ST#2145, ST#2031 - Finance main related views are handle in single place end -->

	<changeSet id="PSD#172406" author="Gopal.p">
		<sql>
			<![CDATA[
				INSERT INTO WORKFLOWDETAILS (WORKFLOWID, WORKFLOWTYPE, WORKFLOWSUBTYPE, WORKFLOWDESC, JSONDESIGN, SVGDESIGN, WORKFLOWXML, WORKFLOWROLES, FIRSTTASKOWNER, WORKFLOWACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE) SELECT (SELECT max(WORKFLOWID)+1 FROM WORKFLOWDETAILS), 'CHEQUEMAINTENANCE', WORKFLOWSUBTYPE, WORKFLOWDESC, JSONDESIGN, SVGDESIGN, WORKFLOWXML, WORKFLOWROLES, FIRSTTASKOWNER, 1, VERSION, '1000', CURRENT_TIMESTAMP, 'Approved', '', '', '', '', '' FROM WORKFLOWDETAILS WHERE WORKFLOWTYPE = 'MSTGRP1' AND WORKFLOWACTIVE = 1;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2031.80" author="savitri.n">
		<sql>
			<![CDATA[
				DELETE FROM ERRORDETAILS WHERE CODE = 'STP006';
				DELETE FROM ERRORDETAILS WHERE CODE = 'STP007';
				DELETE FROM ERRORDETAILS WHERE CODE = 'STP008';
				DELETE FROM ERRORDETAILS WHERE CODE = 'STP009';
				DELETE FROM ERRORDETAILS WHERE CODE = 'STP0010';
				
				INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION) VALUES('STP006', 'EN', 'E', '{0} should be blank for {1}.', '', 'Approved', '', '', '', '', '', 0, CURRENT_TIMESTAMP, 1000, 0);
				INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION) VALUES('STP007','EN','E','Step specifier either G or R','','Approved','','','','','',0,CURRENT_TIMESTAMP,1000,0);
				INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION) VALUES('STP008','EN','E','{0} should be positive.','','Approved','','','','','',0,CURRENT_TIMESTAMP,1000,0);
				INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION) VALUES('STP009','EN','E','Allow manual steps must be true for steps Calculated on Amount','','Approved','','','','','',0,CURRENT_TIMESTAMP,1000,0);
				INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION) VALUES('STP0010', 'EN', 'E', 'Only {0} are allowed for this loan type {1}', '', 'Approved', '', '', '', '', '', 0, CURRENT_TIMESTAMP, 1000, 0);
				
				UPDATE ERRORDETAILS SET MESSAGE = 'Number of {0} must be equal to entered Number of {1}' WHERE CODE = 'STP005';
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#2031.81" author="savitri.n">
		<sql>
			<![CDATA[
				DELETE FROM ERRORDETAILS WHERE CODE = 'STP0011';
				INSERT INTO ERRORDETAILS (CODE, LANGUAGE, SEVERITY, MESSAGE, EXTENDEDMESSAGE, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, LASTMNTBY, VERSION) VALUES('STP0011', 'EN', 'E', 'Step amount in grace steps should not be greater than Disbursed amount', '', 'Approved', '', '', '', '', '', 0, CURRENT_TIMESTAMP, 1000, 0);
			]]>
		</sql>
	</changeSet>

</databaseChangeLog>