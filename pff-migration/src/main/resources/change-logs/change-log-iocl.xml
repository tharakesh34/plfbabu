<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

	<property name="add.schema" value="dbo." dbms="mssql" />
	<property name="add.schema" value="" dbms="oracle" />
	<property name="add.schema" value="" dbms="postgresql" />
	<property name="call.substr" value="substring" dbms="mssql" />
	<property name="call.substr" value="substr" dbms="oracle" />
	<property name="call.substr" value="substring" dbms="postgresql" />
	<property name="call.auditdb" value="PLFAVANSEQC.." dbms="mssql" />
	<property name="call.auditdb" value=" " dbms="oracle" />
	<property name="call.concatenate" value="+" dbms="mssql" />
	<property name="call.concatenate" value="||" dbms="oracle" />
	<property name="call.concatenate" value="||" dbms="postgresql" />
	<property name="call.collength" value="LEN" dbms="mssql" />
	<property name="call.collength" value="LENGTH" dbms="oracle" />
	<property name="call.collength" value="LENGTH" dbms="postgresql" />
	<property name="call.date" value="getdate()" dbms="mssql" />
	<property name="call.date" value="sysdate" dbms="oracle" />
	<property name="call.date" value="now()" dbms="postgresql" />

	<changeSet id="pre_run_for_pgp" author="Adarsh" runAlways="true" dbms="postgresql">
		<sql>
			Set search_path = plf,public,pg_catalog;
		</sql>
	</changeSet>

	<changeSet id="ST#62.1.1" author="kavya.n">
		<addColumn tableName="FinanceMain">
			<column name="BILLINGCHRGREQ" type="boolean" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#62.1.2" author="kavya.n">
		<addColumn tableName="FinanceMain">
			<column name="ODCALCULATEDCHARGE" type="Varchar(20)"/>
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#62.1.3" author="kavya.n">
		<addColumn tableName="FinanceMain">
			<column name="ODCHARGEAMTORPERC" type="decimal(18,0)" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#62.1.4" author="kavya.n">
		<addColumn tableName="FinanceMain">
			<column name="ODCHARGECALON" type="Varchar(30)"/>
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#62.2.1" author="kavya.n">
		<addColumn tableName="FinanceMain_Temp">
			<column name="BILLINGCHRGREQ" type="boolean" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#62.2.2" author="kavya.n">
		<addColumn tableName="FinanceMain_Temp">
			<column name="ODCALCULATEDCHARGE" type="Varchar(20)"/> 
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#62.2.3" author="kavya.n">
		<addColumn tableName="FinanceMain_Temp">
			<column name="ODCHARGEAMTORPERC" type="decimal(18,0)" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#62.2.4" author="kavya.n">
		<addColumn tableName="FinanceMain_Temp">
			<column name="ODCHARGECALON" type="Varchar(30)"/>
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#62.3" author="kavya.n" >
		<sql>
			<![CDATA[	
				UPDATE FinanceMain set BILLINGCHRGREQ=0;
				UPDATE FinanceMain_Temp set BILLINGCHRGREQ=0;
				UPDATE FinanceMain set ODCHARGEAMTORPERC=0;
				UPDATE FinanceMain_Temp set ODCHARGEAMTORPERC=0;				
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#62.4" author="kavya.n" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE FINANCEMAIN ADD CONSTRAINT DF_FM_BILLINGCHRGREQ DEFAULT 0 FOR BILLINGCHRGREQ;
				ALTER TABLE FINANCEMAIN ADD CONSTRAINT DF_FM_ODCHARGEAMTORPERC DEFAULT 0 FOR ODCHARGEAMTORPERC;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#62.4" author="kavya.n" dbms="postgresql, oracle">
		<addDefaultValue columnName="BILLINGCHRGREQ" tableName="FINANCEMAIN" defaultValue="0" />
		<addDefaultValue columnName="ODCHARGEAMTORPERC" tableName="FINANCEMAIN" defaultValue="0" />
	</changeSet>
	
	<changeSet id="ST#62.5" author="kavya.n" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE FINANCEMAIN_TEMP ADD CONSTRAINT DF_FM_T_BILLINGCHRGREQ DEFAULT 0 FOR BILLINGCHRGREQ;
				ALTER TABLE FINANCEMAIN_TEMP ADD CONSTRAINT DF_FM_T_ODCHARGEAMTORPERC DEFAULT 0 FOR ODCHARGEAMTORPERC;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#62.5" author="kavya.n" dbms="postgresql, oracle">
		<addDefaultValue columnName="BILLINGCHRGREQ" tableName="FINANCEMAIN_TEMP" defaultValue="0" />
		<addDefaultValue columnName="ODCHARGEAMTORPERC" tableName="FINANCEMAIN_TEMP" defaultValue="0" />
	</changeSet>
	
	<changeSet id="ST#62.6_pre" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemain_tview');
		 	]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#62.6" author="kavya.n">
		<createView viewName="FINANCEMAIN_TVIEW" replaceIfExists="true">
		   <![CDATA[
				SELECT T1.FINREFERENCE,
					T1.INVESTMENTREF,
					T1.NUMBEROFTERMS,
					T1.GRCPERIODENDDATE,
					T1.ALLOWGRCPERIOD,
					T1.GRACEBASERATE,
					T1.GRACESPECIALRATE,
					T1.GRCPFTRATE,
					T1.GRCPFTFRQ,
					T1.NEXTGRCPFTDATE,
					T1.ALLOWGRCPFTRVW,
					T1.GRCPFTRVWFRQ,
					T1.NEXTGRCPFTRVWDATE,
					T1.ALLOWGRCCPZ,
					T1.GRCCPZFRQ,
					T1.NEXTGRCCPZDATE,
					T1.REPAYBASERATE,
					T1.REPAYSPECIALRATE,
					T1.REPAYPROFITRATE,
					T1.REPAYFRQ,
					T1.NEXTREPAYDATE,
					T1.REPAYPFTFRQ,
					T1.NEXTREPAYPFTDATE,
					T1.ALLOWREPAYRVW,
					T1.REPAYRVWFRQ,
					T1.NEXTREPAYRVWDATE,
					T1.ALLOWREPAYCPZ,
					T1.REPAYCPZFRQ,
					T1.NEXTREPAYCPZDATE,
					T1.MATURITYDATE,
					T1.CPZATGRACEEND,
					T1.DOWNPAYMENT,
					T1.GRACEFLATAMOUNT,
					T1.REQREPAYAMOUNT,
					T1.TOTALPROFIT,
					T1.TOTALCPZ,
					T1.TOTALGROSSPFT,
					T1.TOTALGROSSGRCPFT,
					T1.TOTALGRACEPFT,
					T1.TOTALGRACECPZ,
					T1.GRCRATEBASIS,
					T1.REPAYRATEBASIS,
					T1.FINTYPE,
					T1.FINREMARKS,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.REQMATURITY,
					T1.CALTERMS,
					T1.CALMATURITY,
					T1.FIRSTREPAY,
					T1.LASTREPAY,
					T1.FINSTARTDATE,
					T1.FINAMOUNT,
					T1.FINAMOUNT + T1.FEECHARGEAMT - T1.DOWNPAYMENT LOVDESCFINANCINGAMOUNT,
					T1.FINREPAYMENTAMOUNT,
					T1.CUSTID,
					T1.DEFFERMENTS,
					T1.PLANDEFERCOUNT,
					T1.FINBRANCH,
					T1.FINSOURCEID,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.ALLOWEDDEFFRQCHANGE,
					T1.AVAILEDDEFFRQCHANGE,
					T1.RECALTYPE,
					T1.FINASSETVALUE,
					T1.DISBACCOUNTID,
					T1.REPAYACCOUNTID,
					T1.FINISACTIVE,
					T1.LIMITVALID,
					T1.OVERRIDELIMIT,
					T1.SECURITYDEPOSIT,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T7.FINTYPEDESC LOVDESCFINTYPENAME,
					T7.FINMAXAMOUNT LOVDESCFINMAXAMT,
					T7.FINMINAMOUNT LOVDESCFINMINAMOUNT,
					T1.MINDOWNPAYPERC,
					T7.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
					T7.FINISDWPAYREQUIRED LOVDESCDWNPAYREQ,
					T7.FINMAXDIFFERMENT LOVDESCFINMAXDIFFERMENT,
					T12.BRANCHDESC LOVDESCFINBRANCHNAME,
					T12.BRANCHPROVINCE FINBRANCHPROVINCECODE,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.LASTREPAYRVWDATE,
					T1.LASTREPAYCPZDATE,
					T1.ALLOWGRCREPAY,
					T1.GRCSCHDMTHD,
					T1.GRCMARGIN,
					T1.REPAYMARGIN,
					T1.FINCURRASSETVALUE,
					T1.FINCOMMITMENTREF,
					T1.FINLIMITREF,
					T1.DEPRECIATIONFRQ,
					T1.FINCONTRACTDATE,
					T1.NEXTDEPDATE,
					T1.LASTDEPDATE,
					T1.FINACCOUNT,
					T1.FINCUSTPFTACCOUNT,
					T17.ACRTILLLBD LOVDESCACCRUEDTILLLBD,
					T7.FINRVWRATEAPPLFOR,
					T1.TOTALREPAYAMT,
					T1.CLOSINGSTATUS,
					T1.FINAPPROVEDDATE,
					T1.FEECHARGEAMT,
					T1.BLACKLISTED,
					T1.FINREPAYPFTONFRQ,
					T1.ANUALIZEDPERCRATE,
					T1.EFFECTIVERATEOFRETURN,
					T1.MIGRATEDFINANCE,
					T1.SCHEDULEMAINTAINED,
					T1.SCHEDULEREGENERATED,
					T1.FINPURPOSE,
					T39.LOANPURPOSEDESC LOVDESCFINPURPOSENAME,
					T1.FINSTATUS,
					T1.FINSTSREASON,
					T1.INITIATEUSER,
					T1.BANKNAME,
					T1.IBAN,
					T1.ACCOUNTTYPE,
					T1.DDAREFERENCENO,
					T7.FINSCHEDULEON LOVDESCFINSCHEDULEON,
					T1.CUSTDSR,
					T1.JOINTACCOUNT,
					T1.JOINTCUSTID,
					T1.DOWNPAYBANK,
					T1.DOWNPAYSUPL,
					T1.DOWNPAYACCOUNT,
					T1.SECURITYCOLLATERAL,
					T1.APPROVED,
					T1.DISCREPANCY,
					T1.LIMITAPPROVED,
					T1.GRACETERMS,
					T7.FINDIVISION LOVDESCFINDIVISION,
					T1.RCDMAINTAINSTS,
					T1.FINREPAYMETHOD,
					T1.GRCPROFITDAYSBASIS,
					T1.STEPFINANCE,
					T1.STEPTYPE,
					T1.STEPPOLICY,
					T1.ALWMANUALSTEPS,
					T1.NOOFSTEPS,
					T1.LINKEDFINREF,
					T1.NEXTUSERID,
					T1.PRIORITY,
					T24.POLICYDESC LOVDESCSTEPPOLICYNAME,
					T1.GRCMINRATE,
					T1.GRCMAXRATE,
					T1.RPYMINRATE,
					T1.RPYMAXRATE,
					T1.DEVIATIONAPPROVAL,
					T1.MANUALSCHEDULE,
					T1.TAKEOVERFINANCE,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.SUPPLEMENTRENT,
					T1.INCREASEDCOST,
					T1.CREDITINSAMT,
					T1.ROLLOVERFRQ,
					T1.NEXTROLLOVERDATE,
					T27.CUSTSTSDESCRIPTION,
					T1.SHARIASTATUS,
					T1.INITIATEDATE,
					T1.FINPREAPPROVEDREF,
					T1.MMAID,
					T1.ACCOUNTSOFFICER,
					T1.FEEACCOUNTID,
					T1.FINCANCELAC,
					T28.DEALERNAME LOVDESCACCOUNTSOFFICER,
					T28.DEALERCITY LOVDESCSOURCECITY,
					T1.DSACODE,
					T30.ROFFICERDESC DSACODEDESC,
					T1.TDSAPPLICABLE,
					T1.MANDATEID,
					T1.DROPLINEFRQ,
					T1.FIRSTDROPLINEDATE,
					T1.PFTSERVICINGODLIMIT,
					T1.INSURANCEAMT,
					T1.DEDUCTINSDISB,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.CALROUNDINGMODE,
					T1.ALWMULTIDISB,
					T1.APPLICATIONNO,
					T1.REFERRALID,
					T33.ROFFICERDESC REFERRALIDDESC,
					T1.DMACODE,
					T34.ROFFICERDESC DMACODEDESC,
					T1.SALESDEPARTMENT,
					T35.DEPTDESC SALESDEPARTMENTDESC,
					T1.QUICKDISB,
					T1.WIFREFERENCE,
					T1.UNPLANEMIHLOCKPERIOD,
					T1.UNPLANEMICPZ,
					T1.REAGECPZ,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.AVAILEDUNPLANEMI,
					T1.AVAILEDREAGEH,
					T1.BPIAMOUNT,
					T1.DEDUCTFEEDISB,
					T1.RVWRATEAPPLFOR,
					T1.SCHCALONRVW,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.PROMOTIONCODE,
					T1.RESTRUCTURELOAN,
					T1.OLDFINREFERENCE,
					T1.REAGEBUCKET,
					T1.FINCATEGORY,
					T1.PRODUCTCATEGORY,
					T1.ROUNDINGTARGET,
					T36.ENTITYCODE LOVDESCENTITYCODE,
					T1.ELIGIBILITYMETHOD,
					T38.FIELDCODEVALUE LOVELIGIBILITYMETHOD,
					T38.VALUEDESC LOVDESCELIGIBILITYMETHOD,
					T1.EMPLOYEENAME,
					T37.ROFFICERDESC EMPLOYEENAMEDESC,
					T1.SAMPLINGREQUIRED,
					T1.LEGALREQUIRED,
					T1.GRCMAXAMOUNT,
					T1.CONNECTOR,
					T40.DEALERNAME CONNECTORCODE,
					T40.DEALERCITY CONNECTORDESC,
					T1.ADVANCEEMI,
					T1.ADVEMITERMS,
					T1.BPIPFTDAYSBASIS,
					T1.FIXEDRATETENOR,
					T1.FIXEDTENORRATE,
					T12.BRANCHTEL FINBRANCHCONTACT,
					T1.PROCESSATTRIBUTES,
					T1.BUSINESSVERTICAL,
					BV.CODE BUSINESSVERTICALCODE,
					BV.DESCRIPTION BUSINESSVERTICALDESC,
					T1.GRCADVTYPE,
					T1.GRCADVTERMS,
					T1.ADVTYPE,
					T1.ADVTERMS,
					T1.ADVSTAGE,
					T1.TDSPERCENTAGE,
					T1.TDSSTARTDATE,
					T1.TDSENDDATE,
					T1.TDSLIMITAMT,
					T1.VANREQ,
					T1.VANCODE,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING,
					T1.SANBSDSCHDLE,
					T1.PROMOTIONSEQID,
					T1.SVAMOUNT,
					T1.CBAMOUNT,
					T1.APPLIEDLOANAMT,
					T1.FINISRATERVWATGRCEND,
					T1.PLANEMIHALWINGRACE,
					T1.ALWGRCADJ,
					T1.ENDGRCPERIODAFTRFULLDISB,
					T1.AUTOINCGRCENDDATE,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS,
					T1.SCHDVERSION,
					T1.BILLINGCHRGREQ,
					T1.ODCALCULATEDCHARGE,
					T1.ODCHARGEAMTORPERC,
					T1.ODCHARGECALON
				FROM FINANCEMAIN_TEMP T1
				JOIN RMTFINANCETYPES T7 ON T1.FINTYPE  = T7.FINTYPE 
				LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH  = T12.BRANCHCODE 
				LEFT JOIN FINPFTDETAILS T17 ON T17.FINREFERENCE  = T1.FINREFERENCE 
				LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY  = T24.POLICYCODE 
				LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS  = T27.CUSTSTSCODE 
				LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
				LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE  = T30.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID  = T33.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE  = T34.ROFFICERCODE 
				LEFT JOIN BMTDEPARTMENTS T35 ON T1.SALESDEPARTMENT  = T35.DEPTCODE 
				LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION  = T36.DIVISIONCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME  = T37.ROFFICERCODE 
				LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE  = 'ELGMETHOD' 
				LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE  = T39.LOANPURPOSECODE 
				LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
				LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
			]]>
		</createView>
	</changeSet>
	
	<changeSet id="ST#62.6_post" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemain_tview');
		 	]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#62.7_pre" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemain_aview');
		 	]]>
		</sql>
	</changeSet>

	<changeSet id="ST#62.7" author="kavya.n">
		<createView viewName="FINANCEMAIN_AVIEW" replaceIfExists="true">
			<![CDATA[ 
				SELECT T1.FINREFERENCE,
					T1.INVESTMENTREF,
					T1.NUMBEROFTERMS,
					T1.GRCPERIODENDDATE,
					T1.ALLOWGRCPERIOD,
					T1.GRACEBASERATE,
					T1.GRACESPECIALRATE,
					T1.GRCPFTRATE,
					T1.GRCPFTFRQ,
					T1.NEXTGRCPFTDATE,
					T1.ALLOWGRCPFTRVW,
					T1.GRCPFTRVWFRQ,
					T1.NEXTGRCPFTRVWDATE,
					T1.ALLOWGRCCPZ,
					T1.GRCCPZFRQ,
					T1.NEXTGRCCPZDATE,
					T1.REPAYBASERATE,
					T1.REPAYSPECIALRATE,
					T1.REPAYPROFITRATE,
					T1.REPAYFRQ,
					T1.NEXTREPAYDATE,
					T1.REPAYPFTFRQ,
					T1.NEXTREPAYPFTDATE,
					T1.ALLOWREPAYRVW,
					T1.REPAYRVWFRQ,
					T1.NEXTREPAYRVWDATE,
					T1.ALLOWREPAYCPZ,
					T1.REPAYCPZFRQ,
					T1.NEXTREPAYCPZDATE,
					T1.MATURITYDATE,
					T1.CPZATGRACEEND,
					T1.DOWNPAYMENT,
					T1.GRACEFLATAMOUNT,
					T1.REQREPAYAMOUNT,
					T1.TOTALPROFIT,
					T1.TOTALCPZ,
					T1.TOTALGROSSPFT,
					T1.TOTALGROSSGRCPFT,
					T1.TOTALGRACEPFT,
					T1.TOTALGRACECPZ,
					T1.GRCRATEBASIS,
					T1.REPAYRATEBASIS,
					T1.FINTYPE,
					T1.FINREMARKS,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.REQMATURITY,
					T1.CALTERMS,
					T1.CALMATURITY,
					T1.FIRSTREPAY,
					T1.LASTREPAY,
					T1.FINSTARTDATE,
					T1.FINAMOUNT,
					T1.FINAMOUNT + T1.FEECHARGEAMT - T1.DOWNPAYMENT LOVDESCFINANCINGAMOUNT,
					T1.FINREPAYMENTAMOUNT,
					T1.CUSTID,
					T1.DEFFERMENTS,
					T1.PLANDEFERCOUNT,
					T1.FINBRANCH,
					T1.FINSOURCEID,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.ALLOWEDDEFFRQCHANGE,
					T1.AVAILEDDEFFRQCHANGE,
					T1.RECALTYPE,
					T1.FINASSETVALUE,
					T1.DISBACCOUNTID,
					T1.REPAYACCOUNTID,
					T1.FINISACTIVE,
					T1.LIMITVALID,
					T1.OVERRIDELIMIT,
					T1.SECURITYDEPOSIT,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T7.FINTYPEDESC LOVDESCFINTYPENAME,
					T7.FINMAXAMOUNT LOVDESCFINMAXAMT,
					T7.FINMINAMOUNT LOVDESCFINMINAMOUNT,
					T1.MINDOWNPAYPERC,
					T7.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
					T7.FINISDWPAYREQUIRED LOVDESCDWNPAYREQ,
					T7.FINMAXDIFFERMENT LOVDESCFINMAXDIFFERMENT,
					T12.BRANCHDESC LOVDESCFINBRANCHNAME,
					T12.BRANCHPROVINCE FINBRANCHPROVINCECODE,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.LASTREPAYRVWDATE,
					T1.LASTREPAYCPZDATE,
					T1.ALLOWGRCREPAY,
					T1.GRCSCHDMTHD,
					T1.GRCMARGIN,
					T1.REPAYMARGIN,
					T1.FINCURRASSETVALUE,
					T1.FINCOMMITMENTREF,
					T1.FINLIMITREF,
					T1.DEPRECIATIONFRQ,
					T1.FINCONTRACTDATE,
					T1.NEXTDEPDATE,
					T1.LASTDEPDATE,
					T1.FINACCOUNT,
					T1.FINCUSTPFTACCOUNT,
					T17.ACRTILLLBD LOVDESCACCRUEDTILLLBD,
					T7.FINRVWRATEAPPLFOR,
					T1.TOTALREPAYAMT,
					T1.CLOSINGSTATUS,
					T1.FINAPPROVEDDATE,
					T1.FEECHARGEAMT,
					T1.BLACKLISTED,
					T1.FINREPAYPFTONFRQ,
					T1.ANUALIZEDPERCRATE,
					T1.EFFECTIVERATEOFRETURN,
					T1.MIGRATEDFINANCE,
					T1.SCHEDULEMAINTAINED,
					T1.SCHEDULEREGENERATED,
					T1.FINPURPOSE,
					T39.LOANPURPOSEDESC LOVDESCFINPURPOSENAME,
					T1.FINSTATUS,
					T1.FINSTSREASON,
					T1.INITIATEUSER,
					T1.BANKNAME,
					T1.IBAN,
					T1.ACCOUNTTYPE,
					T1.DDAREFERENCENO,
					T7.FINSCHEDULEON LOVDESCFINSCHEDULEON,
					T1.CUSTDSR,
					T1.JOINTACCOUNT,
					T1.JOINTCUSTID,
					T1.DOWNPAYBANK,
					T1.DOWNPAYSUPL,
					T1.DOWNPAYACCOUNT,
					T1.SECURITYCOLLATERAL,
					T1.APPROVED,
					T1.DISCREPANCY,
					T1.LIMITAPPROVED,
					T1.GRACETERMS,
					T7.FINDIVISION LOVDESCFINDIVISION,
					T1.RCDMAINTAINSTS,
					T1.FINREPAYMETHOD,
					T1.GRCPROFITDAYSBASIS,
					T1.STEPFINANCE,
					T1.STEPTYPE,
					T1.STEPPOLICY,
					T1.ALWMANUALSTEPS,
					T1.NOOFSTEPS,
					T1.LINKEDFINREF,
					T1.NEXTUSERID,
					T1.PRIORITY,
					T24.POLICYDESC LOVDESCSTEPPOLICYNAME,
					T1.GRCMINRATE,
					T1.GRCMAXRATE,
					T1.RPYMINRATE,
					T1.RPYMAXRATE,
					T1.DEVIATIONAPPROVAL,
					T1.MANUALSCHEDULE,
					T1.TAKEOVERFINANCE,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.SUPPLEMENTRENT,
					T1.INCREASEDCOST,
					T1.CREDITINSAMT,
					T1.ROLLOVERFRQ,
					T1.NEXTROLLOVERDATE,
					T27.CUSTSTSDESCRIPTION,
					T1.SHARIASTATUS,
					T1.INITIATEDATE,
					T1.FINPREAPPROVEDREF,
					T1.MMAID,
					T1.ACCOUNTSOFFICER,
					T1.FEEACCOUNTID,
					T1.FINCANCELAC,
					T28.DEALERNAME LOVDESCACCOUNTSOFFICER,
					T28.DEALERCITY LOVDESCSOURCECITY,
					T1.DSACODE,
					T30.ROFFICERDESC DSACODEDESC,
					T1.TDSAPPLICABLE,
					T1.MANDATEID,
					T1.DROPLINEFRQ,
					T1.FIRSTDROPLINEDATE,
					T1.PFTSERVICINGODLIMIT,
					T1.INSURANCEAMT,
					T1.DEDUCTINSDISB,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.CALROUNDINGMODE,
					T1.ALWMULTIDISB,
					T1.APPLICATIONNO,
					T1.REFERRALID,
					T33.ROFFICERDESC REFERRALIDDESC,
					T1.DMACODE,
					T34.ROFFICERDESC DMACODEDESC,
					T1.SALESDEPARTMENT,
					T35.DEPTDESC SALESDEPARTMENTDESC,
					T1.QUICKDISB,
					T1.WIFREFERENCE,
					T1.UNPLANEMIHLOCKPERIOD,
					T1.UNPLANEMICPZ,
					T1.REAGECPZ,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.AVAILEDUNPLANEMI,
					T1.AVAILEDREAGEH,
					T1.BPIAMOUNT,
					T1.DEDUCTFEEDISB,
					T1.RVWRATEAPPLFOR,
					T1.SCHCALONRVW,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.PROMOTIONCODE,
					T1.RESTRUCTURELOAN,
					T1.OLDFINREFERENCE,
					T1.REAGEBUCKET,
					T1.FINCATEGORY,
					T1.PRODUCTCATEGORY,
					T1.ROUNDINGTARGET,
					T36.ENTITYCODE LOVDESCENTITYCODE,
					T1.ELIGIBILITYMETHOD,
					T38.FIELDCODEVALUE LOVELIGIBILITYMETHOD,
					T38.VALUEDESC LOVDESCELIGIBILITYMETHOD,
					T1.EMPLOYEENAME,
					T37.ROFFICERDESC EMPLOYEENAMEDESC,
					T1.SAMPLINGREQUIRED,
					T1.LEGALREQUIRED,
					T1.GRCMAXAMOUNT,
					T1.CONNECTOR,
					T40.DEALERNAME CONNECTORCODE,
					T40.DEALERCITY CONNECTORDESC,
					T1.ADVANCEEMI,
					T1.ADVEMITERMS,
					T1.BPIPFTDAYSBASIS,
					T1.FIXEDRATETENOR,
					T1.FIXEDTENORRATE,
					T12.BRANCHTEL FINBRANCHCONTACT,
					T1.PROCESSATTRIBUTES,
					T1.BUSINESSVERTICAL,
					BV.CODE BUSINESSVERTICALCODE,
					BV.DESCRIPTION BUSINESSVERTICALDESC,
					T1.GRCADVTYPE,
					T1.GRCADVTERMS,
					T1.ADVTYPE,
					T1.ADVTERMS,
					T1.ADVSTAGE,
					T1.TDSPERCENTAGE,
					T1.TDSSTARTDATE,
					T1.TDSENDDATE,
					T1.TDSLIMITAMT,
					T1.VANREQ,
					T1.VANCODE,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING,
					T1.SANBSDSCHDLE,
					T1.PROMOTIONSEQID,
					T1.SVAMOUNT,
					T1.CBAMOUNT,
					T1.APPLIEDLOANAMT,
					T1.FINISRATERVWATGRCEND,
					T1.PLANEMIHALWINGRACE,
					T1.ALWGRCADJ,
					T1.ENDGRCPERIODAFTRFULLDISB,
					T1.AUTOINCGRCENDDATE,
					C.CUSTCIF LOVDESCCUSTCIF,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS,
					T1.SCHDVERSION,
					T1.BILLINGCHRGREQ,
					T1.ODCALCULATEDCHARGE,
					T1.ODCHARGEAMTORPERC,
					T1.ODCHARGECALON						
				FROM FINANCEMAIN T1
				JOIN RMTFINANCETYPES T7 ON T1.FINTYPE = T7.FINTYPE 
				LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH  = T12.BRANCHCODE 
				LEFT JOIN FINPFTDETAILS T17 ON T17.FINREFERENCE  = T1.FINREFERENCE 
				LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY  = T24.POLICYCODE 
				LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS  = T27.CUSTSTSCODE 
				LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
				LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE  = T30.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID  = T33.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE  = T34.ROFFICERCODE 
				LEFT JOIN BMTDEPARTMENTS T35 ON T1.SALESDEPARTMENT  = T35.DEPTCODE 
				LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION  = T36.DIVISIONCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME  = T37.ROFFICERCODE 
				LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE  = 'ELGMETHOD' 
				LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE  = T39.LOANPURPOSECODE 
				LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
				LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
				INNER JOIN CUSTOMERS C ON C.CUSTID = t1.CUSTID
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#62.7_post" author="kavya.n" dbms="postgresql">
		<sql>	
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_aview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#62.8_pre" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemain_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#62.8" author="kavya.n">
		<createView viewName="FINANCEMAIN_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINREFERENCE,
				    T1.INVESTMENTREF,
				    T1.NUMBEROFTERMS,
				    T1.GRCPERIODENDDATE,
				    T1.ALLOWGRCPERIOD,
				    T1.GRACEBASERATE,
				    T1.GRACESPECIALRATE,
				    T1.GRCPFTRATE,
				    T1.GRCPFTFRQ,
				    T1.NEXTGRCPFTDATE,
				    T1.ALLOWGRCPFTRVW,
				    T1.GRCPFTRVWFRQ,
				    T1.NEXTGRCPFTRVWDATE,
				    T1.ALLOWGRCCPZ,
				    T1.GRCCPZFRQ,
				    T1.NEXTGRCCPZDATE,
				    T1.REPAYBASERATE,
				    T1.REPAYSPECIALRATE,
				    T1.REPAYPROFITRATE,
				    T1.REPAYFRQ,
				    T1.NEXTREPAYDATE,
				    T1.REPAYPFTFRQ,
				    T1.NEXTREPAYPFTDATE,
				    T1.ALLOWREPAYRVW,
				    T1.REPAYRVWFRQ,
				    T1.NEXTREPAYRVWDATE,
				    T1.ALLOWREPAYCPZ,
				    T1.REPAYCPZFRQ,
				    T1.NEXTREPAYCPZDATE,
				    T1.MATURITYDATE,
				    T1.CPZATGRACEEND,
				    T1.DOWNPAYMENT,
				    T1.GRACEFLATAMOUNT,
				    T1.REQREPAYAMOUNT,
				    T1.TOTALPROFIT,
				    T1.TOTALCPZ,
				    T1.TOTALGROSSPFT,
				    T1.TOTALGROSSGRCPFT,
				    T1.TOTALGRACEPFT,
				    T1.TOTALGRACECPZ,
				    T1.GRCRATEBASIS,
				    T1.REPAYRATEBASIS,
				    T1.FINTYPE,
				    T1.FINREMARKS,
				    T1.FINCCY,
				    T1.SCHEDULEMETHOD,
				    T1.PROFITDAYSBASIS,
				    T1.REQMATURITY,
				    T1.CALTERMS,
				    T1.CALMATURITY,
				    T1.FIRSTREPAY,
				    T1.LASTREPAY,
				    T1.FINSTARTDATE,
				    T1.FINAMOUNT,
				    T1.FINAMOUNT + T1.FEECHARGEAMT - T1.DOWNPAYMENT LOVDESCFINANCINGAMOUNT,
				    T1.FINREPAYMENTAMOUNT,
				    T1.CUSTID,
				    T1.DEFFERMENTS,
				    T1.PLANDEFERCOUNT,
				    T1.FINBRANCH,
				    T1.FINSOURCEID,
				    T1.ALLOWEDDEFRPYCHANGE,
				    T1.AVAILEDDEFRPYCHANGE,
				    T1.ALLOWEDDEFFRQCHANGE,
				    T1.AVAILEDDEFFRQCHANGE,
				    T1.RECALTYPE,
				    T1.FINASSETVALUE,
				    T1.DISBACCOUNTID,
				    T1.REPAYACCOUNTID,
				    T1.FINISACTIVE,
				    T1.LIMITVALID,
				    T1.OVERRIDELIMIT,
				    T1.SECURITYDEPOSIT,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T7.FINTYPEDESC LOVDESCFINTYPENAME,
				    T7.FINMAXAMOUNT LOVDESCFINMAXAMT,
				    T7.FINMINAMOUNT LOVDESCFINMINAMOUNT,
				    T1.MINDOWNPAYPERC,
				    T7.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
				    T7.FINISDWPAYREQUIRED LOVDESCDWNPAYREQ,
				    T7.FINMAXDIFFERMENT LOVDESCFINMAXDIFFERMENT,
				    T12.BRANCHDESC LOVDESCFINBRANCHNAME,
				    T12.BRANCHPROVINCE FINBRANCHPROVINCECODE,
				    T1.LASTREPAYDATE,
				    T1.LASTREPAYPFTDATE,
				    T1.LASTREPAYRVWDATE,
				    T1.LASTREPAYCPZDATE,
				    T1.ALLOWGRCREPAY,
				    T1.GRCSCHDMTHD,
				    T1.GRCMARGIN,
				    T1.REPAYMARGIN,
				    T1.FINCURRASSETVALUE,
				    T1.FINCOMMITMENTREF,
				    T1.FINLIMITREF,
				    T1.DEPRECIATIONFRQ,
				    T1.FINCONTRACTDATE,
				    T1.NEXTDEPDATE,
				    T1.LASTDEPDATE,
				    T1.FINACCOUNT,
				    T1.FINCUSTPFTACCOUNT,
				    T17.ACRTILLLBD LOVDESCACCRUEDTILLLBD,
				    T7.FINRVWRATEAPPLFOR,
				    T1.TOTALREPAYAMT,
				    T1.CLOSINGSTATUS,
				    T1.FINAPPROVEDDATE,
				    T1.FEECHARGEAMT,
				    T1.BLACKLISTED,
				    T1.FINREPAYPFTONFRQ,
				    T1.ANUALIZEDPERCRATE,
				    T1.EFFECTIVERATEOFRETURN,
				    T1.MIGRATEDFINANCE,
				    T1.SCHEDULEMAINTAINED,
				    T1.SCHEDULEREGENERATED,
				    T1.FINPURPOSE,
				    T39.LOANPURPOSEDESC LOVDESCFINPURPOSENAME,
				    T1.FINSTATUS,
				    T1.FINSTSREASON,
				    T1.INITIATEUSER,
				    T1.BANKNAME,
				    T1.IBAN,
				    T1.ACCOUNTTYPE,
				    T1.DDAREFERENCENO,
				    T7.FINSCHEDULEON LOVDESCFINSCHEDULEON,
				    T1.CUSTDSR,
				    T1.JOINTACCOUNT,
				    T1.JOINTCUSTID,
				    T1.DOWNPAYBANK,
				    T1.DOWNPAYSUPL,
				    T1.DOWNPAYACCOUNT,
				    T1.SECURITYCOLLATERAL,
				    T1.APPROVED,
				    T1.DISCREPANCY,
				    T1.LIMITAPPROVED,
				    T1.GRACETERMS,
				    T7.FINDIVISION LOVDESCFINDIVISION,
				    T1.RCDMAINTAINSTS,
				    T1.FINREPAYMETHOD,
				    T1.GRCPROFITDAYSBASIS,
				    T1.STEPFINANCE,
				    T1.STEPTYPE,
				    T1.STEPPOLICY,
				    T1.ALWMANUALSTEPS,
				    T1.NOOFSTEPS,
				    T1.LINKEDFINREF,
				    T1.NEXTUSERID,
				    T1.PRIORITY,
				    T24.POLICYDESC LOVDESCSTEPPOLICYNAME,
				    T1.GRCMINRATE,
				    T1.GRCMAXRATE,
				    T1.RPYMINRATE,
				    T1.RPYMAXRATE,
				    T1.DEVIATIONAPPROVAL,
				    T1.MANUALSCHEDULE,
				    T1.TAKEOVERFINANCE,
				    T1.GRCADVBASERATE,
				    T1.GRCADVMARGIN,
				    T1.GRCADVPFTRATE,
				    T1.RPYADVBASERATE,
				    T1.RPYADVMARGIN,
				    T1.RPYADVPFTRATE,
				    T1.SUPPLEMENTRENT,
				    T1.INCREASEDCOST,
				    T1.CREDITINSAMT,
				    T1.ROLLOVERFRQ,
				    T1.NEXTROLLOVERDATE,
				    T27.CUSTSTSDESCRIPTION,
				    T1.SHARIASTATUS,
				    T1.INITIATEDATE,
				    T1.FINPREAPPROVEDREF,
				    T1.MMAID,
				    T1.ACCOUNTSOFFICER,
				    T1.FEEACCOUNTID,
				    T1.FINCANCELAC,
				    T28.DEALERNAME LOVDESCACCOUNTSOFFICER,
				    T28.DEALERCITY LOVDESCSOURCECITY,
				    T1.DSACODE,
				    T30.ROFFICERDESC DSACODEDESC,
				    T1.TDSAPPLICABLE,
				    T1.MANDATEID,
				    T1.DROPLINEFRQ,
				    T1.FIRSTDROPLINEDATE,
				    T1.PFTSERVICINGODLIMIT,
				    T1.INSURANCEAMT,
				    T1.DEDUCTINSDISB,
				    T1.ALWBPI,
				    T1.BPITREATMENT,
				    T1.PLANEMIHALW,
				    T1.PLANEMIHMETHOD,
				    T1.PLANEMIHMAXPERYEAR,
				    T1.PLANEMIHMAX,
				    T1.PLANEMIHLOCKPERIOD,
				    T1.PLANEMICPZ,
				    T1.CALROUNDINGMODE,
				    T1.ALWMULTIDISB,
				    T1.APPLICATIONNO,
				    T1.REFERRALID,
				    T33.ROFFICERDESC REFERRALIDDESC,
				    T1.DMACODE,
				    T34.ROFFICERDESC DMACODEDESC,
				    T1.SALESDEPARTMENT,
				    T35.DEPTDESC SALESDEPARTMENTDESC,
				    T1.QUICKDISB,
				    T1.WIFREFERENCE,
				    T1.UNPLANEMIHLOCKPERIOD,
				    T1.UNPLANEMICPZ,
				    T1.REAGECPZ,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.AVAILEDUNPLANEMI,
				    T1.AVAILEDREAGEH,
				    T1.BPIAMOUNT,
				    T1.DEDUCTFEEDISB,
				    T1.RVWRATEAPPLFOR,
				    T1.SCHCALONRVW,
				    T1.PASTDUEPFTCALMTHD,
				    T1.PASTDUEPFTMARGIN,
				    T1.DROPPINGMETHOD,
				    T1.RATECHGANYDAY,
				    T1.PROMOTIONCODE,
				    T1.RESTRUCTURELOAN,
				    T1.OLDFINREFERENCE,
				    T1.REAGEBUCKET,
				    T1.FINCATEGORY,
				    T1.PRODUCTCATEGORY,
				    T1.ROUNDINGTARGET,
				    T36.ENTITYCODE LOVDESCENTITYCODE,
				    T1.ELIGIBILITYMETHOD,
				    T38.FIELDCODEVALUE LOVELIGIBILITYMETHOD,
				    T38.VALUEDESC LOVDESCELIGIBILITYMETHOD,
				    T1.EMPLOYEENAME,
				    T37.ROFFICERDESC EMPLOYEENAMEDESC,
				    T1.SAMPLINGREQUIRED,
				    T1.LEGALREQUIRED,
				    T1.GRCMAXAMOUNT,
				    T1.CONNECTOR,
				    T40.DEALERNAME CONNECTORCODE,
				    T40.DEALERCITY CONNECTORDESC,
				    T1.ADVANCEEMI,
				    T1.ADVEMITERMS,
				    T1.BPIPFTDAYSBASIS,
				    T1.FIXEDRATETENOR,
				    T1.FIXEDTENORRATE,
				    T12.BRANCHTEL FINBRANCHCONTACT,
				    T1.PROCESSATTRIBUTES,
				    T1.BUSINESSVERTICAL,
				    BV.CODE BUSINESSVERTICALCODE,
				    BV.DESCRIPTION BUSINESSVERTICALDESC,
				    T1.GRCADVTYPE,
				    T1.GRCADVTERMS,
				    T1.ADVTYPE,
				    T1.ADVTERMS,
				    T1.ADVSTAGE,
				    T1.TDSPERCENTAGE,
				    T1.TDSSTARTDATE,
				    T1.TDSENDDATE,
				    T1.TDSLIMITAMT,
				    T1.VANREQ,
				    T1.VANCODE,
				    T1.ALLOWDRAWINGPOWER,
				    T1.ALLOWREVOLVING,
				    T1.SANBSDSCHDLE,
				    T1.PROMOTIONSEQID,
				    T1.SVAMOUNT,
				    T1.CBAMOUNT,
				    T1.APPLIEDLOANAMT,
				    T1.FINISRATERVWATGRCEND,
					T1.PLANEMIHALWINGRACE,
					T1.ALWGRCADJ,
					T1.ENDGRCPERIODAFTRFULLDISB,
					T1.AUTOINCGRCENDDATE,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS,
					T1.SCHDVERSION,
					T1.BILLINGCHRGREQ,
					T1.ODCALCULATEDCHARGE,
					T1.ODCHARGEAMTORPERC,
					T1.ODCHARGECALON
				FROM FINANCEMAIN_TEMP T1
				JOIN RMTFINANCETYPES T7 ON T1.FINTYPE  = T7.FINTYPE 
				LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH  = T12.BRANCHCODE 
				LEFT JOIN FINPFTDETAILS T17 ON T17.FINREFERENCE  = T1.FINREFERENCE 
				LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY  = T24.POLICYCODE 
				LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS  = T27.CUSTSTSCODE 
				LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
				LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE  = T30.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID  = T33.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE  = T34.ROFFICERCODE 
				LEFT JOIN BMTDEPARTMENTS T35 ON T1.SALESDEPARTMENT  = T35.DEPTCODE 
				LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION  = T36.DIVISIONCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME  = T37.ROFFICERCODE 
				LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE  = 'ELGMETHOD' 
				LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE  = T39.LOANPURPOSECODE 
				LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
				LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
				UNION ALL
				SELECT T1.FINREFERENCE,
				    T1.INVESTMENTREF,
				    T1.NUMBEROFTERMS,
				    T1.GRCPERIODENDDATE,
				    T1.ALLOWGRCPERIOD,
				    T1.GRACEBASERATE,
				    T1.GRACESPECIALRATE,
				    T1.GRCPFTRATE,
				    T1.GRCPFTFRQ,
				    T1.NEXTGRCPFTDATE,
				    T1.ALLOWGRCPFTRVW,
				    T1.GRCPFTRVWFRQ,
				    T1.NEXTGRCPFTRVWDATE,
				    T1.ALLOWGRCCPZ,
				    T1.GRCCPZFRQ,
				    T1.NEXTGRCCPZDATE,
				    T1.REPAYBASERATE,
				    T1.REPAYSPECIALRATE,
				    T1.REPAYPROFITRATE,
				    T1.REPAYFRQ,
				    T1.NEXTREPAYDATE,
				    T1.REPAYPFTFRQ,
				    T1.NEXTREPAYPFTDATE,
				    T1.ALLOWREPAYRVW,
				    T1.REPAYRVWFRQ,
				    T1.NEXTREPAYRVWDATE,
				    T1.ALLOWREPAYCPZ,
				    T1.REPAYCPZFRQ,
				    T1.NEXTREPAYCPZDATE,
				    T1.MATURITYDATE,
				    T1.CPZATGRACEEND,
				    T1.DOWNPAYMENT,
				    T1.GRACEFLATAMOUNT,
				    T1.REQREPAYAMOUNT,
				    T1.TOTALPROFIT,
				    T1.TOTALCPZ,
				    T1.TOTALGROSSPFT,
				    T1.TOTALGROSSGRCPFT,
				    T1.TOTALGRACEPFT,
				    T1.TOTALGRACECPZ,
				    T1.GRCRATEBASIS,
				    T1.REPAYRATEBASIS,
				    T1.FINTYPE,
				    T1.FINREMARKS,
				    T1.FINCCY,
				    T1.SCHEDULEMETHOD,
				    T1.PROFITDAYSBASIS,
				    T1.REQMATURITY,
				    T1.CALTERMS,
				    T1.CALMATURITY,
				    T1.FIRSTREPAY,
				    T1.LASTREPAY,
				    T1.FINSTARTDATE,
				    T1.FINAMOUNT,
				    T1.FINAMOUNT + T1.FEECHARGEAMT - T1.DOWNPAYMENT LOVDESCFINANCINGAMOUNT,
				    T1.FINREPAYMENTAMOUNT,
				    T1.CUSTID,
				    T1.DEFFERMENTS,
				    T1.PLANDEFERCOUNT,
				    T1.FINBRANCH,
				    T1.FINSOURCEID,
				    T1.ALLOWEDDEFRPYCHANGE,
				    T1.AVAILEDDEFRPYCHANGE,
				    T1.ALLOWEDDEFFRQCHANGE,
				    T1.AVAILEDDEFFRQCHANGE,
				    T1.RECALTYPE,
				    T1.FINASSETVALUE,
				    T1.DISBACCOUNTID,
				    T1.REPAYACCOUNTID,
				    T1.FINISACTIVE,
				    T1.LIMITVALID,
				    T1.OVERRIDELIMIT,
				    T1.SECURITYDEPOSIT,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T7.FINTYPEDESC LOVDESCFINTYPENAME,
				    T7.FINMAXAMOUNT LOVDESCFINMAXAMT,
				    T7.FINMINAMOUNT LOVDESCFINMINAMOUNT,
				    T1.MINDOWNPAYPERC,
				    T7.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
				    T7.FINISDWPAYREQUIRED LOVDESCDWNPAYREQ,
				    T7.FINMAXDIFFERMENT LOVDESCFINMAXDIFFERMENT,
				    T12.BRANCHDESC LOVDESCFINBRANCHNAME,
				    T12.BRANCHPROVINCE FINBRANCHPROVINCECODE,
				    T1.LASTREPAYDATE,
				    T1.LASTREPAYPFTDATE,
				    T1.LASTREPAYRVWDATE,
				    T1.LASTREPAYCPZDATE,
				    T1.ALLOWGRCREPAY,
				    T1.GRCSCHDMTHD,
				    T1.GRCMARGIN,
				    T1.REPAYMARGIN,
				    T1.FINCURRASSETVALUE,
				    T1.FINCOMMITMENTREF,
				    T1.FINLIMITREF,
				    T1.DEPRECIATIONFRQ,
				    T1.FINCONTRACTDATE,
				    T1.NEXTDEPDATE,
				    T1.LASTDEPDATE,
				    T1.FINACCOUNT,
				    T1.FINCUSTPFTACCOUNT,
				    T17.ACRTILLLBD LOVDESCACCRUEDTILLLBD,
				    T7.FINRVWRATEAPPLFOR,
				    T1.TOTALREPAYAMT,
				    T1.CLOSINGSTATUS,
				    T1.FINAPPROVEDDATE,
				    T1.FEECHARGEAMT,
				    T1.BLACKLISTED,
				    T1.FINREPAYPFTONFRQ,
				    T1.ANUALIZEDPERCRATE,
				    T1.EFFECTIVERATEOFRETURN,
				    T1.MIGRATEDFINANCE,
				    T1.SCHEDULEMAINTAINED,
				    T1.SCHEDULEREGENERATED,
				    T1.FINPURPOSE,
				    T39.LOANPURPOSEDESC LOVDESCFINPURPOSENAME,
				    T1.FINSTATUS,
				    T1.FINSTSREASON,
				    T1.INITIATEUSER,
				    T1.BANKNAME,
				    T1.IBAN,
				    T1.ACCOUNTTYPE,
				    T1.DDAREFERENCENO,
				    T7.FINSCHEDULEON LOVDESCFINSCHEDULEON,
				    T1.CUSTDSR,
				    T1.JOINTACCOUNT,
				    T1.JOINTCUSTID,
				    T1.DOWNPAYBANK,
				    T1.DOWNPAYSUPL,
				    T1.DOWNPAYACCOUNT,
				    T1.SECURITYCOLLATERAL,
				    T1.APPROVED,
				    T1.DISCREPANCY,
				    T1.LIMITAPPROVED,
				    T1.GRACETERMS,
				    T7.FINDIVISION LOVDESCFINDIVISION,
				    T1.RCDMAINTAINSTS,
				    T1.FINREPAYMETHOD,
				    T1.GRCPROFITDAYSBASIS,
				    T1.STEPFINANCE,
				    T1.STEPTYPE,
				    T1.STEPPOLICY,
				    T1.ALWMANUALSTEPS,
				    T1.NOOFSTEPS,
				    T1.LINKEDFINREF,
				    T1.NEXTUSERID,
				    T1.PRIORITY,
				    T24.POLICYDESC LOVDESCSTEPPOLICYNAME,
				    T1.GRCMINRATE,
				    T1.GRCMAXRATE,
				    T1.RPYMINRATE,
				    T1.RPYMAXRATE,
				    T1.DEVIATIONAPPROVAL,
				    T1.MANUALSCHEDULE,
				    T1.TAKEOVERFINANCE,
				    T1.GRCADVBASERATE,
				    T1.GRCADVMARGIN,
				    T1.GRCADVPFTRATE,
				    T1.RPYADVBASERATE,
				    T1.RPYADVMARGIN,
				    T1.RPYADVPFTRATE,
				    T1.SUPPLEMENTRENT,
				    T1.INCREASEDCOST,
				    T1.CREDITINSAMT,
				    T1.ROLLOVERFRQ,
				    T1.NEXTROLLOVERDATE,
				    T27.CUSTSTSDESCRIPTION,
				    T1.SHARIASTATUS,
				    T1.INITIATEDATE,
				    T1.FINPREAPPROVEDREF,
				    T1.MMAID,
				    T1.ACCOUNTSOFFICER,
				    T1.FEEACCOUNTID,
				    T1.FINCANCELAC,
				    T28.DEALERNAME LOVDESCACCOUNTSOFFICER,
				    T28.DEALERCITY LOVDESCSOURCECITY,
				    T1.DSACODE,
				    T30.ROFFICERDESC DSACODEDESC,
				    T1.TDSAPPLICABLE,
				    T1.MANDATEID,
				    T1.DROPLINEFRQ,
				    T1.FIRSTDROPLINEDATE,
				    T1.PFTSERVICINGODLIMIT,
				    T1.INSURANCEAMT,
				    T1.DEDUCTINSDISB,
				    T1.ALWBPI,
				    T1.BPITREATMENT,
				    T1.PLANEMIHALW,
				    T1.PLANEMIHMETHOD,
				    T1.PLANEMIHMAXPERYEAR,
				    T1.PLANEMIHMAX,
				    T1.PLANEMIHLOCKPERIOD,
				    T1.PLANEMICPZ,
				    T1.CALROUNDINGMODE,
				    T1.ALWMULTIDISB,
				    T1.APPLICATIONNO,
				    T1.REFERRALID,
				    T33.ROFFICERDESC REFERRALIDDESC,
				    T1.DMACODE,
				    T34.ROFFICERDESC DMACODEDESC,
				    T1.SALESDEPARTMENT,
				    T35.DEPTDESC SALESDEPARTMENTDESC,
				    T1.QUICKDISB,
				    T1.WIFREFERENCE,
				    T1.UNPLANEMIHLOCKPERIOD,
				    T1.UNPLANEMICPZ,
				    T1.REAGECPZ,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.AVAILEDUNPLANEMI,
				    T1.AVAILEDREAGEH,
				    T1.BPIAMOUNT,
				    T1.DEDUCTFEEDISB,
				    T1.RVWRATEAPPLFOR,
				    T1.SCHCALONRVW,
				    T1.PASTDUEPFTCALMTHD,
				    T1.PASTDUEPFTMARGIN,
				    T1.DROPPINGMETHOD,
				    T1.RATECHGANYDAY,
				    T1.PROMOTIONCODE,
				    T1.RESTRUCTURELOAN,
				    T1.OLDFINREFERENCE,
				    T1.REAGEBUCKET,
				    T1.FINCATEGORY,
				    T1.PRODUCTCATEGORY,
				    T1.ROUNDINGTARGET,
				    T36.ENTITYCODE LOVDESCENTITYCODE,
				    T1.ELIGIBILITYMETHOD,
				    T38.FIELDCODEVALUE LOVELIGIBILITYMETHOD,
				    T38.VALUEDESC LOVDESCELIGIBILITYMETHOD,
				    T1.EMPLOYEENAME,
				    T37.ROFFICERDESC EMPLOYEENAMEDESC,
				    T1.SAMPLINGREQUIRED,
				    T1.LEGALREQUIRED,
				    T1.GRCMAXAMOUNT,
				    T1.CONNECTOR,
				    T40.DEALERNAME CONNECTORCODE,
				    T40.DEALERCITY CONNECTORDESC,
				    T1.ADVANCEEMI,
				    T1.ADVEMITERMS,
				    T1.BPIPFTDAYSBASIS,
				    T1.FIXEDRATETENOR,
				    T1.FIXEDTENORRATE,
				    T12.BRANCHTEL FINBRANCHCONTACT,
				    T1.PROCESSATTRIBUTES,
				    T1.BUSINESSVERTICAL,
				    BV.CODE BUSINESSVERTICALCODE,
				    BV.DESCRIPTION BUSINESSVERTICALDESC,
				    T1.GRCADVTYPE,
				    T1.GRCADVTERMS,
				    T1.ADVTYPE,
				    T1.ADVTERMS,
				    T1.ADVSTAGE,
				    T1.TDSPERCENTAGE,
				    T1.TDSSTARTDATE,
				    T1.TDSENDDATE,
				    T1.TDSLIMITAMT,
				    T1.VANREQ,
				    T1.VANCODE,
				    T1.ALLOWDRAWINGPOWER,
				    T1.ALLOWREVOLVING,
				    T1.SANBSDSCHDLE,
				    T1.PROMOTIONSEQID,
				    T1.SVAMOUNT,
				    T1.CBAMOUNT,
				    T1.APPLIEDLOANAMT,
				    T1.FINISRATERVWATGRCEND,
					T1.PLANEMIHALWINGRACE,
					T1.ALWGRCADJ,
					T1.ENDGRCPERIODAFTRFULLDISB,
					T1.AUTOINCGRCENDDATE,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS,
					T1.SCHDVERSION,
					T1.BILLINGCHRGREQ,
					T1.ODCALCULATEDCHARGE,
					T1.ODCHARGEAMTORPERC,
					T1.ODCHARGECALON
				FROM FINANCEMAIN T1
				JOIN RMTFINANCETYPES T7 ON T1.FINTYPE  = T7.FINTYPE 
				LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH  = T12.BRANCHCODE 
				LEFT JOIN FINPFTDETAILS T17 ON T17.FINREFERENCE  = T1.FINREFERENCE 
				LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY  = T24.POLICYCODE 
				LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS  = T27.CUSTSTSCODE 
				LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
				LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE  = T30.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID  = T33.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE  = T34.ROFFICERCODE 
				LEFT JOIN BMTDEPARTMENTS T35 ON T1.SALESDEPARTMENT  = T35.DEPTCODE 
				LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION  = T36.DIVISIONCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME  = T37.ROFFICERCODE 
				LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE  = 'ELGMETHOD' 
				LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE  = T39.LOANPURPOSECODE 
				LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
				LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
				WHERE NOT (EXISTS ( SELECT 1 FROM FINANCEMAIN_TEMP 
					WHERE FINANCEMAIN_TEMP.FINREFERENCE  = T1.FINREFERENCE ))
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#62.8_post" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#62.9_pre" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemain_lview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#62.9" author="kavya.n">
		<createView viewName="FINANCEMAIN_LVIEW" replaceIfExists="true">
			<![CDATA[
			 	SELECT T1.FINREFERENCE,
				    T1.INVESTMENTREF,
				    T1.FINTYPE,
				    T1.FINCCY,
				    T1.FINAMOUNT,
				    T1.DOWNPAYMENT,
				    T1.FEECHARGEAMT,
				    T1.SCHEDULEMETHOD,
				    T1.NUMBEROFTERMS,
				    T1.RECORDSTATUS,
				    T1.RECORDTYPE,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.FINBRANCH,
				    T1.FINCONTRACTDATE,
				    T1.LINKEDFINREF,
				    T1.NEXTUSERID,
				    T1.PRIORITY,
				    T1.WORKFLOWID,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.FINPREAPPROVEDREF,
				    T1.RCDMAINTAINSTS,
				    T1.INSURANCEAMT,
				    T1.FINCURRASSETVALUE,
				    T1.CALTERMS,
				    T1.DEVIATIONAPPROVAL,
				    T1.FINPURPOSE,
				    T1.INITIATEDATE,
				    T1.FINASSETVALUE,
				    T2.CUSTID,
				    T2.CUSTCIF LOVDESCCUSTCIF,
				    T2.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
				    T2.CUSTPASSPORTNO LOVDESCCUSTPASSPORTNO,
				    T2.CUSTDOB LOVDESCCUSTDOB,
				    T2.CUSTCRCPR LOVDESCCUSTCRCPR,
				    T2.PHONENUMBER,
				    T3.FINCATEGORY LOVDESCPRODUCTCODENAME,
				    T3.FINDIVISION LOVDESCFINDIVISION,
				    T3.PRODUCT LOVDESCFINPRODUCT,
				    T3.FINTYPEDESC LOVDESCFINTYPENAME,
				    COALESCE(T4.ROLEDESC, ${add.schema} FN_GET_ROLEDESC(T1.NEXTROLECODE)) LOVDESCREQUESTSTAGE,
				    T1.SAMPLINGREQUIRED,
				    T1.ADVANCEEMI,
				    T1.ADVEMITERMS,
				    T1.BPIPFTDAYSBASIS,
				    T1.GRACETERMS,
				    T1.PRODUCTCATEGORY,
				    T1.VERSION,
				    T1.TDSAPPLICABLE,
				    T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS,
					T1.SCHDVERSION,
					T1.BILLINGCHRGREQ,
					T1.ODCALCULATEDCHARGE,
					T1.ODCHARGEAMTORPERC,
					T1.ODCHARGECALON
			    FROM FINANCEMAIN_TEMP T1
			    JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
			    JOIN RMTFINANCETYPES T3 ON T3.FINTYPE = T1.FINTYPE
			    LEFT JOIN SECROLES T4 ON T1.NEXTROLECODE = T4.ROLECD
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#62.9_post" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_lview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#62.10_pre" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemain_dataview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#62.10" author="kavya.n">
		<createView viewName="FINANCEMAIN_DATAVIEW" replaceIfExists="true"> 
			<![CDATA[
				SELECT T1.FINREFERENCE,
					T1.FINTYPE,
					T2.CUSTCIF LOVDESCCUSTCIF,
					T1.CUSTID,
					T1.CLOSINGSTATUS,
					T1.FINISACTIVE,
					T1.MATURITYDATE,
					T1.PRODUCTCATEGORY,
					T1.WRITEOFFLOAN,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS,
					T1.SCHDVERSION,
					T1.BILLINGCHRGREQ,
					T1.ODCALCULATEDCHARGE,
					T1.ODCHARGEAMTORPERC,
					T1.ODCHARGECALON
				FROM FINANCEMAIN T1
				JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
				JOIN RMTFINANCETYPES T3 ON T3.FINTYPE = T1.FINTYPE
				WHERE T1.CLOSINGSTATUS IS NULL OR T1.CLOSINGSTATUS <> 'C'
			]]>
		</createView>
	</changeSet>
	
	<changeSet id="ST#62.10_post" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_dataview');
			]]>
		</sql>
	</changeSet>	
	
	<changeSet id="ST#62.11_pre" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemain_dview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#62.11" author="kavya.n">
		<createView replaceIfExists="true" viewName="FINANCEMAIN_DVIEW">
			<![CDATA[
				SELECT T1.FINREFERENCE,
					T1.INVESTMENTREF,
					T1.FINTYPE,
					T1.FINCCY,
					T1.FINAMOUNT,
					T1.DOWNPAYMENT,
					T1.FEECHARGEAMT,
					T1.SCHEDULEMETHOD,
					T1.RECORDSTATUS,
					T1.RECORDTYPE,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.FINBRANCH,
					T1.FINASSETVALUE,
					T2.CUSTCIF AS LOVDESCCUSTCIF,
					T2.CUSTSHRTNAME AS LOVDESCCUSTSHRTNAME,
					T2.CUSTID,
					T2.CUSTCIF,
					T3.FINCATEGORY AS LOVDESCPRODUCTCODENAME,
					T3.FINDIVISION AS LOVDESCFINDIVISION,
					T1.SAMPLINGREQUIRED,
					T1.LEGALREQUIRED,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS,
					T1.SCHDVERSION,
					T1.BILLINGCHRGREQ,
					T1.ODCALCULATEDCHARGE,
					T1.ODCHARGEAMTORPERC,
					T1.ODCHARGECALON
				FROM FINANCEMAIN_TEMP T1
				JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
				JOIN RMTFINANCETYPES T3 ON T3.FINTYPE = T1.FINTYPE
				JOIN INVESTMENTFINHEADER T4 ON T4.INVESTMENTREF = T1.INVESTMENTREF
		  	]]>
		</createView>
	</changeSet>
	
	<changeSet id="ST#62.11_post" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_dview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#62.12_pre" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemaintenance_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#62.12" author="kavya.n">
	 <createView viewName="financemaintenance_view" replaceIfExists="true">
			<![CDATA[
			    SELECT T1.FINREFERENCE,
					T1.FINBRANCH,
					T1.FINTYPE,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.FINSTARTDATE,
					T1.NUMBEROFTERMS,
					T1.CUSTID,
					T1.FINAMOUNT,
					T1.MATURITYDATE,
					T1.FINREPAYMENTAMOUNT,
					T1.FINISACTIVE,
					T1.BLACKLISTED,
					T1.FEECHARGEAMT,
					T1.INSURANCEAMT,
					T1.GRACETERMS,
					T1.ALLOWGRCPERIOD,
					T1.GRCPERIODENDDATE,
					T1.ALWMULTIDISB,
					T1.DEFFERMENTS,
					T1.NEXTROLECODE,
					T1.RECORDSTATUS,
					T1.RECORDTYPE,
					T1.ALLOWGRCPFTRVW,
					T1.ALLOWREPAYRVW,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.RCDMAINTAINSTS,
					T1.MIGRATEDFINANCE,
					T1.CLOSINGSTATUS,
					T1.REPAYRATEBASIS,
					T1.MANUALSCHEDULE,
					T1.FINCURRASSETVALUE,
					T1.TAKEOVERFINANCE,
					T1.NEXTROLLOVERDATE,
					T1.AVAILEDUNPLANEMI,
					T1.AVAILEDREAGEH,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.DOWNPAYMENT,
					T1.PLANEMIHALW,
					T1.CALTERMS,
					T1.RATECHGANYDAY,
					T1.FINASSETVALUE,
					T2.CUSTCIF LOVDESCCUSTCIF,
					T2.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
					T3.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
					T3.FINDIVISION LOVDESCFINDIVISION,
					T3.FINCATEGORY LOVDESCPRODUCTCODENAME,
					T4.PRODUCTCATEGORY,
					COALESCE(T5.ROLEDESC,  FN_GET_ROLEDESC(T1.NEXTROLECODE)) LOVDESCREQUESTSTAGE,
					COALESCE(T9.NOINST, 0) NOINST,
					T1.SAMPLINGREQUIRED,
					T1.ADVEMITERMS,
					T1.SANBSDSCHDLE,
					T1.PROMOTIONSEQID,
					T1.SVAMOUNT,
					T1.CBAMOUNT,
					T1.REPAYPFTFRQ,
					T1.TOTALCPZ,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
                    T1.BILLINGCHRGREQ,
					T1.ODCALCULATEDCHARGE,
					T1.ODCHARGEAMTORPERC,
					T1.ODCHARGECALON
				FROM FINANCEMAIN_TEMP T1
				JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
				JOIN RMTFINANCETYPES T3 ON T1.FINTYPE = T3.FINTYPE
				LEFT JOIN SECROLES T5 ON T1.NEXTROLECODE = T5.ROLECD
				JOIN BMTPRODUCT T4 ON T3.FINCATEGORY = T4.PRODUCTCODE
				LEFT JOIN FINPFTDETAILS T9 ON T1.FINREFERENCE = T9.FINREFERENCE
				UNION ALL
				SELECT T1.FINREFERENCE,
					T1.FINBRANCH,
					T1.FINTYPE,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.FINSTARTDATE,
					T1.NUMBEROFTERMS,
					T1.CUSTID,
					T1.FINAMOUNT,
					T1.MATURITYDATE,
					T1.FINREPAYMENTAMOUNT,
					T1.FINISACTIVE,
					T1.BLACKLISTED,
					T1.FEECHARGEAMT,
					T1.INSURANCEAMT,
					T1.GRACETERMS,
					T1.ALLOWGRCPERIOD,
					T1.GRCPERIODENDDATE,
					T1.ALWMULTIDISB,
					T1.DEFFERMENTS,
					T1.NEXTROLECODE,
					T1.RECORDSTATUS,
					T1.RECORDTYPE,
					T1.ALLOWGRCPFTRVW,
					T1.ALLOWREPAYRVW,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.RCDMAINTAINSTS,
					T1.MIGRATEDFINANCE,
					T1.CLOSINGSTATUS,
					T1.REPAYRATEBASIS,
					T1.MANUALSCHEDULE,
					T1.FINCURRASSETVALUE,
					T1.TAKEOVERFINANCE,
					T1.NEXTROLLOVERDATE,
					T1.AVAILEDUNPLANEMI,
					T1.AVAILEDREAGEH,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.DOWNPAYMENT,
					T1.PLANEMIHALW,
					T1.CALTERMS,
					T1.RATECHGANYDAY,
					T1.FINASSETVALUE,
					T2.CUSTCIF LOVDESCCUSTCIF,
					T2.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
					T3.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
					T3.FINDIVISION LOVDESCFINDIVISION,
					T3.FINCATEGORY LOVDESCPRODUCTCODENAME,
					T4.PRODUCTCATEGORY,
					COALESCE(T5.ROLEDESC,  FN_GET_ROLEDESC(T1.NEXTROLECODE)) LOVDESCREQUESTSTAGE,
					COALESCE(T9.NOINST, 0) NOINST,
					T1.SAMPLINGREQUIRED,
					T1.ADVEMITERMS,
					T1.SANBSDSCHDLE,
					T1.PROMOTIONSEQID,
					T1.SVAMOUNT,
					T1.CBAMOUNT,
					T1.REPAYPFTFRQ,
					T1.TOTALCPZ,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
                    T1.BILLINGCHRGREQ,
					T1.ODCALCULATEDCHARGE,
					T1.ODCHARGEAMTORPERC,
					T1.ODCHARGECALON
				FROM FINANCEMAIN T1
				JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
				JOIN RMTFINANCETYPES T3 ON T1.FINTYPE = T3.FINTYPE
				LEFT JOIN SECROLES T5 ON T1.NEXTROLECODE = T5.ROLECD
				JOIN BMTPRODUCT T4 ON T3.FINCATEGORY = T4.PRODUCTCODE
				LEFT JOIN FINPFTDETAILS T9 ON T1.FINREFERENCE = T9.FINREFERENCE
				WHERE NOT (EXISTS ( SELECT 1 AS EXPR1 FROM FINANCEMAIN_TEMP
			    WHERE FINANCEMAIN_TEMP.FINREFERENCE = T1.FINREFERENCE))
			 ]]>	
		</createView>
     </changeSet>
     
     <changeSet id="ST#62.12_post" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemaintenance_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#62.13_pre" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemaintenance_aview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#62.13" author="kavya.n">
	 <createView viewName="financemaintenance_aview" replaceIfExists="true">   
			<![CDATA[
			    SELECT T1.FINREFERENCE,
                    T1.FINBRANCH,
                    T1.FINTYPE,
                    T1.FINCCY,
                    T1.SCHEDULEMETHOD,
                    T1.PROFITDAYSBASIS,
                    T1.FINSTARTDATE,
                    T1.NUMBEROFTERMS,
                    T1.CUSTID,
                    T1.FINAMOUNT,
                    T1.MATURITYDATE,
                    T1.FINREPAYMENTAMOUNT,
                    T1.FINISACTIVE,
                    T1.BLACKLISTED,
                    T1.FEECHARGEAMT,
                    T1.INSURANCEAMT,
                    T1.GRACETERMS,
                    T1.ALLOWGRCPERIOD,
                    T1.GRCPERIODENDDATE,
                    T1.ALWMULTIDISB,
                    T1.DEFFERMENTS,
                    T1.NEXTROLECODE,
                    T1.RECORDSTATUS,
                    T1.RECORDTYPE,
                    T1.ALLOWGRCPFTRVW,
                    T1.ALLOWREPAYRVW,
                    T1.LASTREPAYDATE,
                    T1.LASTREPAYPFTDATE,
                    T1.ALLOWEDDEFRPYCHANGE,
                    T1.AVAILEDDEFRPYCHANGE,
                    T1.MIGRATEDFINANCE,
                    T1.RCDMAINTAINSTS,
                    T1.CLOSINGSTATUS,
                    T1.REPAYRATEBASIS,
                    T1.MANUALSCHEDULE,
                    T1.TAKEOVERFINANCE,
                    T1.NEXTROLLOVERDATE,
                    T1.DOWNPAYMENT,
                    T1.PLANEMIHALW,
                    T1.FINCURRASSETVALUE,
                    T1.FINASSETVALUE,
                    T2.CUSTCIF AS LOVDESCCUSTCIF,
                    T3.FINCATEGORY AS LOVDESCPRODUCTCODENAME,
                    T3.FINISALWDIFFERMENT AS LOVDESCFINALWDEFERMENT,
                    T4.PRODUCTCATEGORY,
                    T1.SAMPLINGREQUIRED,
                    T1.ADVANCEEMI,
                    T1.ADVEMITERMS,
                    T1.BPIPFTDAYSBASIS AS BPIRATEBASIS,
                    T1.SANBSDSCHDLE,
	                T1.PROMOTIONSEQID,
	                T1.SVAMOUNT,
	                T1.CBAMOUNT,
					T1.BILLINGCHRGREQ,
					T1.ODCALCULATEDCHARGE,
					T1.ODCHARGEAMTORPERC,
					T1.ODCHARGECALON
                FROM FINANCEMAIN T1
                JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
                JOIN RMTFINANCETYPES T3 ON T1.FINTYPE = T3.FINTYPE
                JOIN BMTPRODUCT T4 ON T3.FINCATEGORY = T4.PRODUCTCODE
			 ]]>	
		</createView>
     </changeSet>
     
     <changeSet id="ST#62.13_post" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemaintenance_aview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#62.14" author="kavya.n">
		<sql>
			<![CDATA[
			     INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'FinanceMainDialog_oDCalculatedCharge', 'FinanceMainDialog', 1, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			     INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'FinanceMainDialog_oDAmtOrPercentage', 'FinanceMainDialog', 1, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			     INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'FinanceMainDialog_oDChargeCalculatedOn', 'FinanceMainDialog', 1, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			     INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'FinanceMainDialog_oDChargeCode', 'FinanceMainDialog', 1, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			     
			     INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (Select GrpID from SecGroups where GrpCode = 'OD_ODMAINTENANCE_MAKER'), (Select RightID from SecRights where RightName = 'FinanceMainDialog_oDCalculatedCharge'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				 INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (Select GrpID from SecGroups where GrpCode = 'OD_ODMAINTENANCE_MAKER'), (Select RightID from SecRights where RightName = 'FinanceMainDialog_oDAmtOrPercentage'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				 INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (Select GrpID from SecGroups where GrpCode = 'OD_ODMAINTENANCE_MAKER'), (Select RightID from SecRights where RightName = 'FinanceMainDialog_oDChargeCalculatedOn'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				 INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (Select GrpID from SecGroups where GrpCode = 'OD_ODMAINTENANCE_MAKER'), (Select RightID from SecRights where RightName = 'FinanceMainDialog_oDChargeCode'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
              ]]>
		</sql>
    </changeSet>
    
    
	<changeSet id="ST#62.15" author="kavya.n">
		<sql>
			<![CDATA[
			     INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (Select GrpID from SecGroups where GrpCode = 'CL_ORIGINATION_MAKER'), (Select RightID from SecRights where RightName = 'FinanceMainDialog_oDCalculatedCharge'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				 INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (Select GrpID from SecGroups where GrpCode = 'CL_ORIGINATION_MAKER'), (Select RightID from SecRights where RightName = 'FinanceMainDialog_oDAmtOrPercentage'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				 INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (Select GrpID from SecGroups where GrpCode = 'CL_ORIGINATION_MAKER'), (Select RightID from SecRights where RightName = 'FinanceMainDialog_oDChargeCalculatedOn'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				 INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (Select GrpID from SecGroups where GrpCode = 'CL_ORIGINATION_MAKER'), (Select RightID from SecRights where RightName = 'FinanceMainDialog_oDChargeCode'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				 
				 INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (Select GrpID from SecGroups where GrpCode = 'FIN_MAINTAINBASIC_MAKER'), (Select RightID from SecRights where RightName = 'FinanceMainDialog_oDCalculatedCharge'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				 INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (Select GrpID from SecGroups where GrpCode = 'FIN_MAINTAINBASIC_MAKER'), (Select RightID from SecRights where RightName = 'FinanceMainDialog_oDAmtOrPercentage'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				 INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (Select GrpID from SecGroups where GrpCode = 'FIN_MAINTAINBASIC_MAKER'), (Select RightID from SecRights where RightName = 'FinanceMainDialog_oDChargeCalculatedOn'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				 INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (Select GrpID from SecGroups where GrpCode = 'FIN_MAINTAINBASIC_MAKER'), (Select RightID from SecRights where RightName = 'FinanceMainDialog_oDChargeCode'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				 INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (Select GrpID from SecGroups where GrpCode = 'BFSD_ORIGINATION_MAKER'), (Select RightID from SecRights where RightName = 'FinanceMainDialog_oDCalculatedCharge'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				 INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (Select GrpID from SecGroups where GrpCode = 'BFSD_ORIGINATION_MAKER'), (Select RightID from SecRights where RightName = 'FinanceMainDialog_oDAmtOrPercentage'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				 INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (Select GrpID from SecGroups where GrpCode = 'BFSD_ORIGINATION_MAKER'), (Select RightID from SecRights where RightName = 'FinanceMainDialog_oDChargeCalculatedOn'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				 INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (Select GrpID from SecGroups where GrpCode = 'BFSD_ORIGINATION_MAKER'), (Select RightID from SecRights where RightName = 'FinanceMainDialog_oDChargeCode'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				 INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (Select GrpID from SecGroups where GrpCode = 'CL_ORIGINATION_WRM'), (Select RightID from SecRights where RightName = 'FinanceMainDialog_oDCalculatedCharge'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				 INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (Select GrpID from SecGroups where GrpCode = 'CL_ORIGINATION_WRM'), (Select RightID from SecRights where RightName = 'FinanceMainDialog_oDAmtOrPercentage'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				 INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (Select GrpID from SecGroups where GrpCode = 'CL_ORIGINATION_WRM'), (Select RightID from SecRights where RightName = 'FinanceMainDialog_oDChargeCalculatedOn'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				 INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (Select GrpID from SecGroups where GrpCode = 'CL_ORIGINATION_WRM'), (Select RightID from SecRights where RightName = 'FinanceMainDialog_oDChargeCode'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
              ]]>
		</sql>
    </changeSet>
    
	<changeSet id="ST#62.16" author="kavya.n">
		<sql>
			<![CDATA[
			     INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'FinanceMainDialog_oDBillingCharge', 'FinanceMainDialog', 1, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			     
			     INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (Select GrpID from SecGroups where GrpCode = 'CL_ORIGINATION_MAKER'), (Select RightID from SecRights where RightName = 'FinanceMainDialog_oDBillingCharge'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				 INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (Select GrpID from SecGroups where GrpCode = 'OD_ODMAINTENANCE_MAKER'), (Select RightID from SecRights where RightName = 'FinanceMainDialog_oDBillingCharge'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				 INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (Select GrpID from SecGroups where GrpCode = 'FIN_MAINTAINBASIC_MAKER'), (Select RightID from SecRights where RightName = 'FinanceMainDialog_oDBillingCharge'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				 INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (Select GrpID from SecGroups where GrpCode = 'BFSD_ORIGINATION_MAKER'), (Select RightID from SecRights where RightName = 'FinanceMainDialog_oDBillingCharge'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				 INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (Select GrpID from SecGroups where GrpCode = 'CL_ORIGINATION_WRM'), (Select RightID from SecRights where RightName = 'FinanceMainDialog_oDBillingCharge'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
            ]]>
		</sql>
    </changeSet>
      	
	
	<changeSet id="ST#62.17.1" author="kavya.n">
		<addColumn tableName="RmtFinanceTypes">
			<column name="BillingChrgReq" type="smallint">
			</column>
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#62.17.2" author="kavya.n">
		<addColumn tableName="RmtFinanceTypes">
			<column name="BillingChrgCode" type="bigint">
			</column>
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#62.18.1" author="kavya.n">
		<addColumn tableName="RmtFinanceTypes_Temp">
			<column name="BillingChrgReq" type="smallint">
			</column>
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#62.18.2" author="kavya.n">
		<addColumn tableName="RmtFinanceTypes_Temp">
			<column name="BillingChrgCode" type="bigint">
			</column>
		</addColumn>
	</changeSet>

	<changeSet id="ST#62.19" author="kavya.n" >
		<sql>
			<![CDATA[	
				UPDATE RMTFINANCETYPES SET BILLINGCHRGREQ=0;
				UPDATE RMTFINANCETYPES SET BILLINGCHRGCODE=0;
				UPDATE RMTFINANCETYPES_TEMP SET BILLINGCHRGREQ=0;
				UPDATE RMTFINANCETYPES_TEMP SET BILLINGCHRGCODE=0;				
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#62.20" author="kavya.n" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE RMTFINANCETYPES ADD CONSTRAINT DF_FT_BILLINGCHRGREQ DEFAULT 0 FOR BILLINGCHRGREQ;
				ALTER TABLE RMTFINANCETYPES ADD CONSTRAINT DF_FT_BILLINGCHRGCODE DEFAULT 0 FOR BILLINGCHRGCODE;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#62.20" author="kavya.n" dbms="postgresql, oracle">
		<addDefaultValue columnName="BILLINGCHRGREQ" tableName="RMTFINANCETYPES" defaultValue="0" />
		<addDefaultValue columnName="BILLINGCHRGCODE" tableName="RMTFINANCETYPES" defaultValue="0" />
	</changeSet>
	
	<changeSet id="ST#62.21" author="kavya.n" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE RMTFINANCETYPES_TEMP ADD CONSTRAINT DF_FT_T_BILLINGCHRGREQ DEFAULT 0 FOR BILLINGCHRGREQ;
				ALTER TABLE RMTFINANCETYPES_TEMP ADD CONSTRAINT DF_FT_T_BILLINGCHRGCODE DEFAULT 0 FOR BILLINGCHRGCODE;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#62.21" author="kavya.n" dbms="postgresql, oracle">
		<addDefaultValue columnName="BILLINGCHRGREQ" tableName="RMTFINANCETYPES_TEMP" defaultValue="0" />
		<addDefaultValue columnName="BILLINGCHRGCODE" tableName="RMTFINANCETYPES_TEMP" defaultValue="0" />
	</changeSet>
	
	<changeSet id="ST#62.21_post" author="kavya.n">
		<addNotNullConstraint tableName="RMTFINANCETYPES" columnName="BILLINGCHRGREQ" columnDataType="smallint" />
		<addNotNullConstraint tableName="RMTFINANCETYPES" columnName="BILLINGCHRGCODE" columnDataType="bigint" />
		<addNotNullConstraint tableName="RMTFINANCETYPES_TEMP" columnName="BILLINGCHRGREQ" columnDataType="smallint" />
		<addNotNullConstraint tableName="RMTFINANCETYPES_TEMP" columnName="BILLINGCHRGCODE" columnDataType="bigint" />
	</changeSet>
	
	<changeSet id="ST#62.22_pre" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_view');
		 	]]>
		</sql>
	</changeSet>

	<changeSet id="ST#62.22" author="kavya.n">
		<createView viewName="RMTFINANCETYPES_VIEW" replaceIfExists="true">
		   <![CDATA[
				SELECT T1.FINTYPE,
					T1.FINCATEGORY,
					T1.FINTYPEDESC,
					T1.FINCCY,
					T1.FINDAYSCALTYPE,
					T1.FINACTYPE,
					T1.FINCONTINGENTACTYPE,
					T1.FINISGENREF,
					T1.FINMAXAMOUNT,
					T1.FINMINAMOUNT,
					T1.FINISOPENNEWFINAC,
					T1.FINDFTSTMTFRQ,
					T1.FINISALWMD,
					T1.FINSCHDMTHD,
					T1.FINISALWGRACE,
					T1.FINHISTRETENSION,
					T1.EQUALREPAYMENT,
					T1.FINRATETYPE,
					T1.FINBASERATE,
					T1.FINSPLRATE,
					T1.FININTRATE,
					T1.FINMINRATE,
					T1.FINMAXRATE,
					T1.FINDFTINTFRQ,
					T1.FINISINTCPZ,
					T1.FINCPZFRQ,
					T1.FINISRVWALW,
					T1.FINRVWFRQ,
					T1.FINGRCRATETYPE,
					T1.FINGRCBASERATE,
					T1.FINGRCSPLRATE,
					T1.FINGRCINTRATE,
					T1.FINGRCMINRATE,
					T1.FINGRCMAXRATE,
					T1.FINGRCDFTINTFRQ,
					T1.FINGRCISINTCPZ,
					T1.FINGRCCPZFRQ,
					T1.FINGRCISRVWALW,
					T1.FINGRCRVWFRQ,
					T1.FINMINTERM,
					T1.FINMAXTERM,
					T1.FINDFTTERMS,
					T1.FINRPYFRQ,
					T1.FINREPAYMETHOD,
					T1.FINISALWPARTIALRPY,
					T1.FINISALWDIFFERMENT,
					T1.FINMAXDIFFERMENT,
					T1.FINISALWEARLYRPY,
					T1.FINISALWEARLYSETTLE,
					T1.FINODRPYTRIES,
					T1.FINEARLYPAYRULE,
					T1.FINEARLYSETTLERULE,
					T1.FINDEPOSITRESTRICTEDTO,
					T1.FINAEBUYORINCEPTION,
					T1.FINAESELLORMATURITY,
					T1.FINISACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.STEPFINANCE,
					T1.STEPPINGMANDATORY,
					T1.ALWMANUALSTEPS,
					T1.ALWDSTEPPOLICIES,
					T1.DFTSTEPPOLICY,
					T4.ACTYPEDESC LOVDESCFINCONTINGENTACTYPENAME,
					T5.ACTYPEDESC LOVDESCFINACTYPENAME,
					T1.FINISDWPAYREQUIRED,
					T1.FINRVWRATEAPPLFOR,
					T1.FINALWRATECHANGEANYDATE,
					T1.FINISINTCPZATGRCEND,
					T1.FINELGRULECODE,
					T1.LIMITELGRULECODE,
					T1.FINSCHCALCODEONRVW,
					T1.ALWPLANDEFERMENT,
					T1.PLANDEFERCOUNT,
					T1.FINASSETTYPE,
					T1.PFTPAYACTYPE,
					T1.FINISOPENPFTPAYACC,
					T31.ACTYPEDESC LOVDESCPFTPAYACTYPENAME,
					T1.FINISALWGRCREPAY,
					T1.FINGRCSCHDMTHD,
					T1.FINGRCMARGIN,
					T1.FINMARGIN,
					T1.FINSCHEDULEON,
					T1.FINGRCSCHEDULEON,
					T1.FINCOMMITMENTREQ,
					T1.FINCOLLATERALREQ,
					T1.FINDEPRECIATIONREQ,
					T1.FINDEPRECIATIONFRQ,
					T1.FINBANKCONTINGENTACTYPE,
					T1.FINPROVISIONACTYPE,
					T38.ACTYPEDESC LOVDESCFINBANKCONTACTYPENAME,
					T39.ACTYPEDESC LOVDESCFINPROVISIONACTYPENAME,
					T1.ALLOWRIAINVESTMENT,
					T1.OVERRIDELIMIT,
					T1.LIMITREQUIRED,
					T1.FINCOMMITMENTOVRRIDE,
					T1.FINCOLLATERALOVRRIDE,
					T1.FINPFTUNCHANGED,
					T1.APPLYODPENALTY,
					T1.ODINCGRCDAYS,
					T1.ODCHARGETYPE,
					T1.ODGRACEDAYS,
					T1.ODCHARGECALON,
					T1.ODCHARGEAMTORPERC,
					T1.ODALLOWWAIVER,
					T1.ODMAXWAIVERPERC,
					T1.FINDIVISION,
					T48.DIVISIONCODEDESC LOVDESCFINDIVISIONNAME,
					T48.ENTITYCODE LOVDESCENTITYCODE,
					T1.FINSUSPACTYPE,
					T49.ACTYPEDESC LOVDESCFINSUSPACTYPENAME,
					T1.PRODUCT,
					T1.STARTDATE,
					T1.ENDDATE,
					T1.ALLOWDOWNPAYPGM,
					T1.FINTYPEDESC LOVDESCPROMOFINTYPEDESC,
					T1.REMARKS,
					T1.ALWEARLYPAYMETHODS,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.ALWADVANCERENT,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.ROLLOVERFINANCE,
					T1.ROLLOVERFRQ,
					T1.DOWNPAYRULE,
					T59.RULECODE DOWNPAYRULECODE,
					T59.RULECODEDESC DOWNPAYRULEDESC,
					T1.FINSUSPTRIGGER,
					T1.FINSUSPREMARKS,
					T1.ALWMULTIPARTYDISB,
					T1.COLLATERALTYPE,
					T1.TDSAPPLICABLE,
					T1.MANUALSCHEDULE,
					T1.APPLYGRCPRICING,
					T1.GRCPRICINGMETHOD,
					T1.APPLYRPYPRICING,
					T1.RPYPRICINGMETHOD,
					T1.RPYHIERARCHY,
					T67.RULECODE GRCPRICINGMETHODDESC,
					T68.RULECODE RPYPRICINGMETHODDESC,
					T1.DROPLINEOD,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.FINREPAYPFTONFRQ,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PFTDUESCHON,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.UNPLANEMIHLOCKPERIOD,
					T1.UNPLANEMICPZ,
					T1.REAGECPZ,
					T1.FDDLOCKPERIOD,
					T1.ALWDRPYMETHODS,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.ROUNDINGMODE,
					T1.ROUNDINGTARGET,
					T1.FREQUENCYDAYS,
					T1.QUICKDISB,
					T1.ALWMAXDISBCHECKREQ,
					T1.ALWREAGE,
					T1.ALWUNPLANEMIHOLIDAY,
					T1.PROFITCENTERID,
					T69.PROFITCENTERCODE,
					T69.PROFITCENTERDESC,
					T1.PRODUCTCATEGORY,
					T2.PRODUCTDESC FINCATEGORYDESC,
					T1.DEVELOPERFINANCE,
					T1.COSTOFFUNDS,
					T1.CHEQUECAPTUREREQ,
					T1.FINLTVCHECK,
					T1.PARTIALLYSECURED,
					T1.ALWADVEMI,
					T1.ADVEMIMINTERMS,
					T1.ADVEMIMAXTERMS,
					T1.ADVEMIDFTTERMS,
					T1.ADVEMISCHDMTHD,
					T1.BPIPFTDAYSBASIS,
					T1.ELIGIBILITYMETHODS,
					T1.ALWHYBRIDRATE,
					T1.FIXEDRATETENOR,
					T1.ODMINCAPAMOUNT,
					T1.ODRULECODE,
					T1.ALWZEROINTACC,
					T1.AUTOREJECTIONDAYS,
					T1.TAXNOMAND,
					T1.PUTCALLREQUIRED,
					T1.GRCADVINTERSETREQ,
					T1.GRCADVTYPE,
					T1.GRCADVMINTERMS,
					T1.GRCADVMAXTERMS,
					T1.GRCADVDEFAULTTERMS,
					T1.ADVINTERSETREQ,
					T1.ADVTYPE,
					T1.ADVMINTERMS,
					T1.ADVMAXTERMS,
					T1.ADVDEFAULTTERMS,
					T1.ADVSTAGE,
					T1.DSFREQ,
					T1.CASHCOLLATERALREQ,
					T1.TDSALLOWTOMODIFY,
					T1.TDSAPPLICABLETO,
					T1.ALWVAN,
					T1.VANALLOCATIONMETHOD,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING,
					T1.ALWSANCTIONAMT,
					T1.ALWSANCTIONAMTOVERRIDE,
					T1.SANBSDSCHDLE,
					T1.FINISRATERVWATGRCEND,
					T1.SCHDONPMTCAL,
					T1.AUTOAPPROVE,
					T1.ALWPLANNEDEMIINGRC,
					T1.GRCADJREQ,
					T1.GRCPERIODAFTRFULLDISB,
					T1.AUTOINCRGRCENDDATE,
					T1.GRCAUTOINCRMONTHS,
					T1.MAXAUTOINCRALLOWED,
					T1.THRLDTOMAINTAINGRCPRD,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.BILLINGCHRGREQ,
					T1.BILLINGCHRGCODE
				FROM RMTFINANCETYPES_TEMP T1
				LEFT JOIN BMTPRODUCT T2 ON T1.FINCATEGORY = T2.PRODUCTCODE
				LEFT JOIN RMTACCOUNTTYPES T4 ON T1.FINCONTINGENTACTYPE = T4.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T38 ON T1.FINBANKCONTINGENTACTYPE = T38.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T39 ON T1.FINPROVISIONACTYPE = T39.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T5 ON T1.FINACTYPE = T5.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T31 ON T1.PFTPAYACTYPE = T31.ACTYPE
				LEFT JOIN SMTDIVISIONDETAIL T48 ON T1.FINDIVISION = T48.DIVISIONCODE
				LEFT JOIN RMTACCOUNTTYPES T49 ON T1.FINSUSPACTYPE = T49.ACTYPE
				LEFT JOIN RULES T59 ON T1.DOWNPAYRULE = T59.RULEID
				LEFT JOIN RULES T67 ON T1.GRCPRICINGMETHOD = T67.RULEID
				LEFT JOIN RULES T68 ON T1.RPYPRICINGMETHOD = T68.RULEID
				LEFT JOIN PROFITCENTERS T69 ON T69.PROFITCENTERID = T1.PROFITCENTERID
				UNION ALL
				SELECT T1.FINTYPE,
					T1.FINCATEGORY,
					T1.FINTYPEDESC,
					T1.FINCCY,
					T1.FINDAYSCALTYPE,
					T1.FINACTYPE,
					T1.FINCONTINGENTACTYPE,
					T1.FINISGENREF,
					T1.FINMAXAMOUNT,
					T1.FINMINAMOUNT,
					T1.FINISOPENNEWFINAC,
					T1.FINDFTSTMTFRQ,
					T1.FINISALWMD,
					T1.FINSCHDMTHD,
					T1.FINISALWGRACE,
					T1.FINHISTRETENSION,
					T1.EQUALREPAYMENT,
					T1.FINRATETYPE,
					T1.FINBASERATE,
					T1.FINSPLRATE,
					T1.FININTRATE,
					T1.FINMINRATE,
					T1.FINMAXRATE,
					T1.FINDFTINTFRQ,
					T1.FINISINTCPZ,
					T1.FINCPZFRQ,
					T1.FINISRVWALW,
					T1.FINRVWFRQ,
					T1.FINGRCRATETYPE,
					T1.FINGRCBASERATE,
					T1.FINGRCSPLRATE,
					T1.FINGRCINTRATE,
					T1.FINGRCMINRATE,
					T1.FINGRCMAXRATE,
					T1.FINGRCDFTINTFRQ,
					T1.FINGRCISINTCPZ,
					T1.FINGRCCPZFRQ,
					T1.FINGRCISRVWALW,
					T1.FINGRCRVWFRQ,
					T1.FINMINTERM,
					T1.FINMAXTERM,
					T1.FINDFTTERMS,
					T1.FINRPYFRQ,
					T1.FINREPAYMETHOD,
					T1.FINISALWPARTIALRPY,
					T1.FINISALWDIFFERMENT,
					T1.FINMAXDIFFERMENT,
					T1.FINISALWEARLYRPY,
					T1.FINISALWEARLYSETTLE,
					T1.FINODRPYTRIES,
					T1.FINEARLYPAYRULE,
					T1.FINEARLYSETTLERULE,
					T1.FINDEPOSITRESTRICTEDTO,
					T1.FINAEBUYORINCEPTION,
					T1.FINAESELLORMATURITY,
					T1.FINISACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.STEPFINANCE,
					T1.STEPPINGMANDATORY,
					T1.ALWMANUALSTEPS,
					T1.ALWDSTEPPOLICIES,
					T1.DFTSTEPPOLICY,
					T4.ACTYPEDESC LOVDESCFINCONTINGENTACTYPENAME,
					T5.ACTYPEDESC LOVDESCFINACTYPENAME,
					T1.FINISDWPAYREQUIRED,
					T1.FINRVWRATEAPPLFOR,
					T1.FINALWRATECHANGEANYDATE,
					T1.FINISINTCPZATGRCEND,
					T1.FINELGRULECODE,
					T1.LIMITELGRULECODE,
					T1.FINSCHCALCODEONRVW,
					T1.ALWPLANDEFERMENT,
					T1.PLANDEFERCOUNT,
					T1.FINASSETTYPE,
					T1.PFTPAYACTYPE,
					T1.FINISOPENPFTPAYACC,
					T31.ACTYPEDESC LOVDESCPFTPAYACTYPENAME,
					T1.FINISALWGRCREPAY,
					T1.FINGRCSCHDMTHD,
					T1.FINGRCMARGIN,
					T1.FINMARGIN,
					T1.FINSCHEDULEON,
					T1.FINGRCSCHEDULEON,
					T1.FINCOMMITMENTREQ,
					T1.FINCOLLATERALREQ,
					T1.FINDEPRECIATIONREQ,
					T1.FINDEPRECIATIONFRQ,
					T1.FINBANKCONTINGENTACTYPE,
					T1.FINPROVISIONACTYPE,
					T38.ACTYPEDESC LOVDESCFINBANKCONTACTYPENAME,
					T39.ACTYPEDESC LOVDESCFINPROVISIONACTYPENAME,
					T1.ALLOWRIAINVESTMENT,
					T1.OVERRIDELIMIT,
					T1.LIMITREQUIRED,
					T1.FINCOMMITMENTOVRRIDE,
					T1.FINCOLLATERALOVRRIDE,
					T1.FINPFTUNCHANGED,
					T1.APPLYODPENALTY,
					T1.ODINCGRCDAYS,
					T1.ODCHARGETYPE,
					T1.ODGRACEDAYS,
					T1.ODCHARGECALON,
					T1.ODCHARGEAMTORPERC,
					T1.ODALLOWWAIVER,
					T1.ODMAXWAIVERPERC,
					T1.FINDIVISION,
					T48.DIVISIONCODEDESC LOVDESCFINDIVISIONNAME,
					T48.ENTITYCODE LOVDESCENTITYCODE,
					T1.FINSUSPACTYPE,
					T49.ACTYPEDESC LOVDESCFINSUSPACTYPENAME,
					T1.PRODUCT,
					T1.STARTDATE,
					T1.ENDDATE,
					T1.ALLOWDOWNPAYPGM,
					T1.FINTYPEDESC LOVDESCPROMOFINTYPEDESC,
					T1.REMARKS,
					T1.ALWEARLYPAYMETHODS,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.ALWADVANCERENT,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.ROLLOVERFINANCE,
					T1.ROLLOVERFRQ,
					T1.DOWNPAYRULE,
					T59.RULECODE DOWNPAYRULECODE,
					T59.RULECODEDESC DOWNPAYRULEDESC,
					T1.FINSUSPTRIGGER,
					T1.FINSUSPREMARKS,
					T1.ALWMULTIPARTYDISB,
					T1.COLLATERALTYPE,
					T1.TDSAPPLICABLE,
					T1.MANUALSCHEDULE,
					T1.APPLYGRCPRICING,
					T1.GRCPRICINGMETHOD,
					T1.APPLYRPYPRICING,
					T1.RPYPRICINGMETHOD,
					T1.RPYHIERARCHY,
					T67.RULECODE GRCPRICINGMETHODDESC,
					T68.RULECODE RPYPRICINGMETHODDESC,
					T1.DROPLINEOD,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.FINREPAYPFTONFRQ,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PFTDUESCHON,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.UNPLANEMIHLOCKPERIOD,
					T1.UNPLANEMICPZ,
					T1.REAGECPZ,
					T1.FDDLOCKPERIOD,
					T1.ALWDRPYMETHODS,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.ROUNDINGMODE,
					T1.ROUNDINGTARGET,
					T1.FREQUENCYDAYS,
					T1.QUICKDISB,
					T1.ALWMAXDISBCHECKREQ,
					T1.ALWREAGE,
					T1.ALWUNPLANEMIHOLIDAY,
					T1.PROFITCENTERID,
					T69.PROFITCENTERCODE,
					T69.PROFITCENTERDESC,
					T1.PRODUCTCATEGORY,
					T2.PRODUCTDESC FINCATEGORYDESC,
					T1.DEVELOPERFINANCE,
					T1.COSTOFFUNDS,
					T1.CHEQUECAPTUREREQ,
					T1.FINLTVCHECK,
					T1.PARTIALLYSECURED,
					T1.ALWADVEMI,
					T1.ADVEMIMINTERMS,
					T1.ADVEMIMAXTERMS,
					T1.ADVEMIDFTTERMS,
					T1.ADVEMISCHDMTHD,
					T1.BPIPFTDAYSBASIS,
					T1.ELIGIBILITYMETHODS,
					T1.ALWHYBRIDRATE,
					T1.FIXEDRATETENOR,
					T1.ODMINCAPAMOUNT,
					T1.ODRULECODE,
					T1.ALWZEROINTACC,
					T1.AUTOREJECTIONDAYS,
					T1.TAXNOMAND,
					T1.PUTCALLREQUIRED,
					T1.GRCADVINTERSETREQ,
					T1.GRCADVTYPE,
					T1.GRCADVMINTERMS,
					T1.GRCADVMAXTERMS,
					T1.GRCADVDEFAULTTERMS,
					T1.ADVINTERSETREQ,
					T1.ADVTYPE,
					T1.ADVMINTERMS,
					T1.ADVMAXTERMS,
					T1.ADVDEFAULTTERMS,
					T1.ADVSTAGE,
					T1.DSFREQ,
					T1.CASHCOLLATERALREQ,
					T1.TDSALLOWTOMODIFY,
					T1.TDSAPPLICABLETO,
					T1.ALWVAN,
					T1.VANALLOCATIONMETHOD,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING,
					T1.ALWSANCTIONAMT,
					T1.ALWSANCTIONAMTOVERRIDE,
					T1.SANBSDSCHDLE,
					T1.FINISRATERVWATGRCEND,
					T1.SCHDONPMTCAL,
					T1.AUTOAPPROVE,
					T1.ALWPLANNEDEMIINGRC,
					T1.GRCADJREQ,
					T1.GRCPERIODAFTRFULLDISB,
					T1.AUTOINCRGRCENDDATE,
					T1.GRCAUTOINCRMONTHS,
					T1.MAXAUTOINCRALLOWED,
					T1.THRLDTOMAINTAINGRCPRD,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.BILLINGCHRGREQ,
					T1.BILLINGCHRGCODE
				FROM RMTFINANCETYPES T1
				LEFT JOIN BMTPRODUCT T2 ON T1.FINCATEGORY = T2.PRODUCTCODE
				LEFT JOIN RMTACCOUNTTYPES T4 ON T1.FINCONTINGENTACTYPE = T4.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T38 ON T1.FINBANKCONTINGENTACTYPE = T38.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T39 ON T1.FINPROVISIONACTYPE = T39.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T5 ON T1.FINACTYPE = T5.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T31 ON T1.PFTPAYACTYPE = T31.ACTYPE
				LEFT JOIN SMTDIVISIONDETAIL T48 ON T1.FINDIVISION = T48.DIVISIONCODE
				LEFT JOIN RMTACCOUNTTYPES T49 ON T1.FINSUSPACTYPE = T49.ACTYPE
				LEFT JOIN RULES T59 ON T1.DOWNPAYRULE = T59.RULEID
				LEFT JOIN RULES T67 ON T1.GRCPRICINGMETHOD = T67.RULEID
				LEFT JOIN RULES T68 ON T1.RPYPRICINGMETHOD = T68.RULEID
				LEFT JOIN PROFITCENTERS T69 ON T69.PROFITCENTERID = T1.PROFITCENTERID
				WHERE NOT (EXISTS ( SELECT 1 AS EXPR1 FROM RMTFINANCETYPES_TEMP
					WHERE RMTFINANCETYPES_TEMP.FINTYPE = T1.FINTYPE))
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#62.22_post" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rmtfinancetypes_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#62.23_pre" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_orgview');
		 	]]>
		</sql>
	</changeSet>

	<changeSet id="ST#62.23" author="kavya.n">
		<createView viewName="RMTFINANCETYPES_ORGVIEW" replaceIfExists="true">
		   <![CDATA[
				SELECT T1.FINTYPE,
					T1.FINCATEGORY,
					T1.FINTYPEDESC,
					T1.FINCCY,
					T1.FINDAYSCALTYPE,
					T1.FINACTYPE,
					T1.FINCONTINGENTACTYPE,
					T1.FINISGENREF,
					T1.FINMAXAMOUNT,
					T1.FINMINAMOUNT,
					T1.FINISOPENNEWFINAC,
					T1.FINISALWMD,
					T1.FINSCHDMTHD,
					T1.FINISALWGRACE,
					T1.EQUALREPAYMENT,
					T1.FINRATETYPE,
					T1.FINBASERATE,
					T1.FINSPLRATE,
					T1.FININTRATE,
					T1.FINMINRATE,
					T1.FINMAXRATE,
					T1.FINDFTINTFRQ,
					T1.FINISINTCPZ,
					T1.FINCPZFRQ,
					T1.FINISRVWALW,
					T1.FINRVWFRQ,
					T1.FINGRCRATETYPE,
					T1.FINGRCBASERATE,
					T1.FINGRCSPLRATE,
					T1.FINGRCINTRATE,
					T1.FINGRCMINRATE,
					T1.FINGRCMAXRATE,
					T1.FINGRCDFTINTFRQ,
					T1.FINGRCISINTCPZ,
					T1.FINGRCCPZFRQ,
					T1.FINGRCISRVWALW,
					T1.FINGRCRVWFRQ,
					T1.FINMINTERM,
					T1.FINMAXTERM,
					T1.FINDFTTERMS,
					T1.FINRPYFRQ,
					T1.FINREPAYMETHOD,
					T1.FINISALWDIFFERMENT,
					T1.FINMAXDIFFERMENT,
					T1.FINISACTIVE,
					T1.STEPFINANCE,
					T1.STEPPINGMANDATORY,
					T1.ALWMANUALSTEPS,
					T1.ALWDSTEPPOLICIES,
					T1.DFTSTEPPOLICY,
					T1.FINISDWPAYREQUIRED,
					T1.FINRVWRATEAPPLFOR,
					T1.FINALWRATECHANGEANYDATE,
					T1.FINISINTCPZATGRCEND,
					T1.FINSCHCALCODEONRVW,
					T1.ALWPLANDEFERMENT,
					T1.PLANDEFERCOUNT,
					T1.PFTPAYACTYPE,
					T1.FINISOPENPFTPAYACC,
					T1.FINISALWGRCREPAY,
					T1.FINGRCSCHDMTHD,
					T1.FINGRCMARGIN,
					T1.FINMARGIN,
					T1.FINCOMMITMENTREQ,
					T1.FINCOLLATERALREQ,
					T1.FINDEPRECIATIONREQ,
					T1.FINDEPRECIATIONFRQ,
					T1.FINBANKCONTINGENTACTYPE,
					T1.FINPROVISIONACTYPE,
					T1.ALLOWRIAINVESTMENT,
					T1.OVERRIDELIMIT,
					T1.LIMITREQUIRED,
					T1.FINCOMMITMENTOVRRIDE,
					T1.FINCOLLATERALOVRRIDE,
					T1.FINREPAYPFTONFRQ,
					T1.FINPFTUNCHANGED,
					T1.APPLYODPENALTY,
					T1.ODINCGRCDAYS,
					T1.ODCHARGETYPE,
					T1.ODGRACEDAYS,
					T1.ODCHARGECALON,
					T1.ODCHARGEAMTORPERC,
					T1.ODALLOWWAIVER,
					T1.ODMAXWAIVERPERC,
					T1.FINDIVISION,
					T3.DIVISIONCODEDESC LOVDESCFINDIVISIONNAME,
					T1.FINSUSPACTYPE,
					T1.PRODUCT,
					T1.STARTDATE,
					T1.ENDDATE,
					T1.ALLOWDOWNPAYPGM,
					T1.FINTYPEDESC LOVDESCPROMOFINTYPEDESC,
					T1.REMARKS,
					T4.POLICYDESC LOVDESCDFTSTEPPOLICYNAME,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.ALWADVANCERENT,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.ROLLOVERFINANCE,
					T1.ROLLOVERFRQ,
					T1.DOWNPAYRULE,
					T1.ALWMULTIPARTYDISB,
					T1.COLLATERALTYPE,
					T1.TDSAPPLICABLE,
					T5.RULECODE DOWNPAYRULECODE,
					T5.RULECODEDESC DOWNPAYRULEDESC,
					T1.APPLYGRCPRICING,
					T1.APPLYRPYPRICING,
					T6.RULECODE GRCPRICINGMETHODDESC,
					T7.RULECODE RPYPRICINGMETHODDESC,
					T1.DROPLINEOD,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T4.STEPTYPE DFTSTEPPOLICYTYPE,
					T1.MANUALSCHEDULE,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PFTDUESCHON,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.UNPLANEMIHLOCKPERIOD,
					T1.UNPLANEMICPZ,
					T1.REAGECPZ,
					T1.FDDLOCKPERIOD,
					T1.ALWDRPYMETHODS,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.ROUNDINGMODE,
					T1.ROUNDINGTARGET,
					T1.FREQUENCYDAYS,
					T1.QUICKDISB,
					T1.ALWREAGE,
					T1.ALWUNPLANEMIHOLIDAY,
					T1.ALWMAXDISBCHECKREQ,
					T1.PRODUCTCATEGORY,
					T1.RPYHIERARCHY,
					T1.DEVELOPERFINANCE,
					T3.ENTITYCODE LOVDESCENTITYCODE,
					T8.ENTITYDESC LOVDESCENTITYDESC,
					T1.COSTOFFUNDS,
					T1.CHEQUECAPTUREREQ,
					T1.FINLTVCHECK,
					T1.PARTIALLYSECURED,
					T1.ALWADVEMI,
					T1.ADVEMIMINTERMS,
					T1.ADVEMIMAXTERMS,
					T1.ADVEMIDFTTERMS,
					T1.ADVEMISCHDMTHD,
					T1.BPIPFTDAYSBASIS,
					T1.ELIGIBILITYMETHODS,
					T1.ALWHYBRIDRATE,
					T1.FIXEDRATETENOR,
					T1.ODMINCAPAMOUNT,
					T1.ODRULECODE,
					T1.ALWZEROINTACC,
					T1.FINISALWPARTIALRPY,
					T1.AUTOREJECTIONDAYS,
					T1.TAXNOMAND,
					T1.PUTCALLREQUIRED,
					T1.GRCADVINTERSETREQ,
					T1.GRCADVTYPE,
					T1.GRCADVMINTERMS,
					T1.GRCADVMAXTERMS,
					T1.GRCADVDEFAULTTERMS,
					T1.ADVINTERSETREQ,
					T1.ADVTYPE,
					T1.ADVMINTERMS,
					T1.ADVMAXTERMS,
					T1.ADVDEFAULTTERMS,
					T1.ADVSTAGE,
					T1.DSFREQ,
					T1.CASHCOLLATERALREQ,
					T1.ALWEARLYPAYMETHODS,
					T1.TDSALLOWTOMODIFY,
					T1.TDSAPPLICABLETO,
					T1.ALWVAN,
					T1.VANALLOCATIONMETHOD,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING,
					T1.ALWSANCTIONAMT,
					T1.ALWSANCTIONAMTOVERRIDE,
					T1.SANBSDSCHDLE,
					T1.FINISRATERVWATGRCEND,
					T1.SCHDONPMTCAL,
					T1.AUTOAPPROVE,
					T1.ALWPLANNEDEMIINGRC,
					T1.GRCADJREQ,
					T1.GRCPERIODAFTRFULLDISB,
					T1.AUTOINCRGRCENDDATE,
					T1.GRCAUTOINCRMONTHS,
					T1.MAXAUTOINCRALLOWED,
					T1.THRLDTOMAINTAINGRCPRD,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.BILLINGCHRGREQ,
					T1.BILLINGCHRGCODE
				FROM RMTFINANCETYPES T1
				JOIN SMTDIVISIONDETAIL T3 ON T1.FINDIVISION = T3.DIVISIONCODE
				LEFT JOIN STEPPOLICYHEADER T4 ON T1.DFTSTEPPOLICY = T4.POLICYCODE
				LEFT JOIN RULES T5 ON T1.DOWNPAYRULE = T5.RULEID
				LEFT JOIN RULES T6 ON T1.GRCPRICINGMETHOD = T6.RULEID
				LEFT JOIN RULES T7 ON T1.RPYPRICINGMETHOD = T7.RULEID
				LEFT JOIN ENTITY T8 ON T3.ENTITYCODE = T8.ENTITYCODE
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#62.23_post" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rmtfinancetypes_orgview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#62.24_pre" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_aview');
		 	]]>
		</sql>
	</changeSet>

	<changeSet id="ST#62.24" author="kavya.n">
		<createView viewName="RMTFINANCETYPES_AVIEW" replaceIfExists="true">
		   <![CDATA[
				SELECT T1.FINTYPE,
					T1.FINCATEGORY,
					T1.FINTYPEDESC,
					T1.FINCCY,
					T1.FINDAYSCALTYPE,
					T1.FINACTYPE,
					T1.FINCONTINGENTACTYPE,
					T1.FINISGENREF,
					T1.FINMAXAMOUNT,
					T1.FINMINAMOUNT,
					T1.FINISOPENNEWFINAC,
					T1.FINDFTSTMTFRQ,
					T1.FINISALWMD,
					T1.FINSCHDMTHD,
					T1.FINISALWGRACE,
					T1.FINHISTRETENSION,
					T1.EQUALREPAYMENT,
					T1.FINRATETYPE,
					T1.FINBASERATE,
					T1.FINSPLRATE,
					T1.FININTRATE,
					T1.FINMINRATE,
					T1.FINMAXRATE,
					T1.FINDFTINTFRQ,
					T1.FINISINTCPZ,
					T1.FINCPZFRQ,
					T1.FINISRVWALW,
					T1.FINRVWFRQ,
					T1.FINGRCRATETYPE,
					T1.FINGRCBASERATE,
					T1.FINGRCSPLRATE,
					T1.FINGRCINTRATE,
					T1.FINGRCMINRATE,
					T1.FINGRCMAXRATE,
					T1.FINGRCDFTINTFRQ,
					T1.FINGRCISINTCPZ,
					T1.FINGRCCPZFRQ,
					T1.FINGRCISRVWALW,
					T1.FINGRCRVWFRQ,
					T1.FINMINTERM,
					T1.FINMAXTERM,
					T1.FINDFTTERMS,
					T1.FINRPYFRQ,
					T1.FINREPAYMETHOD,
					T1.FINISALWPARTIALRPY,
					T1.FINISALWDIFFERMENT,
					T1.FINMAXDIFFERMENT,
					T1.FINISALWEARLYRPY,
					T1.FINISALWEARLYSETTLE,
					T1.FINODRPYTRIES,
					T1.FINEARLYPAYRULE,
					T1.FINEARLYSETTLERULE,
					T1.FINDEPOSITRESTRICTEDTO,
					T1.FINAEBUYORINCEPTION,
					T1.FINAESELLORMATURITY,
					T1.FINISACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.STEPFINANCE,
					T1.STEPPINGMANDATORY,
					T1.ALWMANUALSTEPS,
					T1.ALWDSTEPPOLICIES,
					T1.DFTSTEPPOLICY,
					T4.ACTYPEDESC LOVDESCFINCONTINGENTACTYPENAME,
					T5.ACTYPEDESC LOVDESCFINACTYPENAME,
					T1.FINISDWPAYREQUIRED,
					T1.FINRVWRATEAPPLFOR,
					T1.FINALWRATECHANGEANYDATE,
					T1.FINISINTCPZATGRCEND,
					T1.FINELGRULECODE,
					T1.LIMITELGRULECODE,
					T1.FINSCHCALCODEONRVW,
					T1.ALWPLANDEFERMENT,
					T1.PLANDEFERCOUNT,
					T1.FINASSETTYPE,
					T1.PFTPAYACTYPE,
					T1.FINISOPENPFTPAYACC,
					T31.ACTYPEDESC LOVDESCPFTPAYACTYPENAME,
					T1.FINISALWGRCREPAY,
					T1.FINGRCSCHDMTHD,
					T1.FINGRCMARGIN,
					T1.FINMARGIN,
					T1.FINSCHEDULEON,
					T1.FINGRCSCHEDULEON,
					T1.FINCOMMITMENTREQ,
					T1.FINCOLLATERALREQ,
					T1.FINDEPRECIATIONREQ,
					T1.FINDEPRECIATIONFRQ,
					T1.FINBANKCONTINGENTACTYPE,
					T1.FINPROVISIONACTYPE,
					T38.ACTYPEDESC LOVDESCFINBANKCONTACTYPENAME,
					T39.ACTYPEDESC LOVDESCFINPROVISIONACTYPENAME,
					T1.ALLOWRIAINVESTMENT,
					T1.OVERRIDELIMIT,
					T1.LIMITREQUIRED,
					T1.FINCOMMITMENTOVRRIDE,
					T1.FINCOLLATERALOVRRIDE,
					T1.FINPFTUNCHANGED,
					T1.APPLYODPENALTY,
					T1.ODINCGRCDAYS,
					T1.ODCHARGETYPE,
					T1.ODGRACEDAYS,
					T1.ODCHARGECALON,
					T1.ODCHARGEAMTORPERC,
					T1.ODALLOWWAIVER,
					T1.ODMAXWAIVERPERC,
					T1.FINDIVISION,
					T48.DIVISIONCODEDESC LOVDESCFINDIVISIONNAME,
					T48.ENTITYCODE LOVDESCENTITYCODE,
					T1.FINSUSPACTYPE,
					T49.ACTYPEDESC LOVDESCFINSUSPACTYPENAME,
					T1.PRODUCT,
					T1.STARTDATE,
					T1.ENDDATE,
					T1.ALLOWDOWNPAYPGM,
					T1.REMARKS,
					T1.ALWEARLYPAYMETHODS,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.ALWADVANCERENT,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.ROLLOVERFINANCE,
					T1.ROLLOVERFRQ,
					T1.DOWNPAYRULE,
					T59.RULECODE DOWNPAYRULECODE,
					T59.RULECODEDESC DOWNPAYRULEDESC,
					T1.FINSUSPTRIGGER,
					T1.FINSUSPREMARKS,
					T1.ALWMULTIPARTYDISB,
					T1.COLLATERALTYPE,
					T1.TDSAPPLICABLE,
					T1.MANUALSCHEDULE,
					T1.APPLYGRCPRICING,
					T1.GRCPRICINGMETHOD,
					T1.APPLYRPYPRICING,
					T1.RPYPRICINGMETHOD,
					T1.RPYHIERARCHY,
					T67.RULECODE GRCPRICINGMETHODDESC,
					T68.RULECODE RPYPRICINGMETHODDESC,
					T1.DROPLINEOD,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.FINREPAYPFTONFRQ,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PFTDUESCHON,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.UNPLANEMIHLOCKPERIOD,
					T1.UNPLANEMICPZ,
					T1.REAGECPZ,
					T1.FDDLOCKPERIOD,
					T1.ALWDRPYMETHODS,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.ROUNDINGMODE,
					T1.ROUNDINGTARGET,
					T1.FREQUENCYDAYS,
					T1.QUICKDISB,
					T1.ALWREAGE,
					T1.ALWUNPLANEMIHOLIDAY,
					T1.ALWMAXDISBCHECKREQ,
					T1.FINTYPEDESC LOVDESCPROMOFINTYPEDESC,
					T1.PROFITCENTERID,
					T69.PROFITCENTERCODE,
					T69.PROFITCENTERDESC,
					T1.PRODUCTCATEGORY,
					T2.PRODUCTDESC FINCATEGORYDESC,
					T1.DEVELOPERFINANCE,
					T1.COSTOFFUNDS,
					T1.CHEQUECAPTUREREQ,
					T1.FINLTVCHECK,
					T1.PARTIALLYSECURED,
					T1.ALWADVEMI,
					T1.ADVEMIMINTERMS,
					T1.ADVEMIMAXTERMS,
					T1.ADVEMIDFTTERMS,
					T1.ADVEMISCHDMTHD,
					T1.BPIPFTDAYSBASIS,
					T1.ELIGIBILITYMETHODS,
					T1.ALWHYBRIDRATE,
					T1.FIXEDRATETENOR,
					T1.ODMINCAPAMOUNT,
					T1.ODRULECODE,
					T1.ALWZEROINTACC,
					T1.AUTOREJECTIONDAYS,
					T1.TAXNOMAND,
					T1.PUTCALLREQUIRED,
					T1.GRCADVINTERSETREQ,
					T1.GRCADVTYPE,
					T1.GRCADVMINTERMS,
					T1.GRCADVMAXTERMS,
					T1.GRCADVDEFAULTTERMS,
					T1.ADVINTERSETREQ,
					T1.ADVTYPE,
					T1.ADVMINTERMS,
					T1.ADVMAXTERMS,
					T1.ADVDEFAULTTERMS,
					T1.ADVSTAGE,
					T1.DSFREQ,
					T1.CASHCOLLATERALREQ,
					T1.TDSALLOWTOMODIFY,
					T1.TDSAPPLICABLETO,
					T1.ALWVAN,
					T1.VANALLOCATIONMETHOD,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING,
					T1.ALWSANCTIONAMT,
					T1.ALWSANCTIONAMTOVERRIDE,
					T1.SANBSDSCHDLE,
					T1.FINISRATERVWATGRCEND,
					T1.SCHDONPMTCAL,
					T1.AUTOAPPROVE,
					T1.ALWPLANNEDEMIINGRC,
					T1.GRCADJREQ,
					T1.GRCPERIODAFTRFULLDISB,
					T1.AUTOINCRGRCENDDATE,
					T1.GRCAUTOINCRMONTHS,
					T1.MAXAUTOINCRALLOWED,
					T1.THRLDTOMAINTAINGRCPRD,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.BILLINGCHRGREQ,
					T1.BILLINGCHRGCODE
				FROM RMTFINANCETYPES T1
				LEFT JOIN BMTPRODUCT T2 ON T1.FINCATEGORY = T2.PRODUCTCODE
				LEFT JOIN RMTACCOUNTTYPES T4 ON T1.FINCONTINGENTACTYPE = T4.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T38 ON T1.FINBANKCONTINGENTACTYPE = T38.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T39 ON T1.FINPROVISIONACTYPE = T39.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T5 ON T1.FINACTYPE = T5.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T31 ON T1.PFTPAYACTYPE = T31.ACTYPE
				LEFT JOIN SMTDIVISIONDETAIL T48 ON T1.FINDIVISION = T48.DIVISIONCODE
				LEFT JOIN RMTACCOUNTTYPES T49 ON T1.FINSUSPACTYPE = T49.ACTYPE
				LEFT JOIN RULES T59 ON T1.DOWNPAYRULE = T59.RULEID
				LEFT JOIN RULES T67 ON T1.GRCPRICINGMETHOD = T67.RULEID
				LEFT JOIN RULES T68 ON T1.RPYPRICINGMETHOD = T68.RULEID
				LEFT JOIN PROFITCENTERS T69 ON T69.PROFITCENTERID = T1.PROFITCENTERID
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#62.24_post" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rmtfinancetypes_aview');
			]]>
		</sql>
	</changeSet>
	

	<changeSet id="ST#62.25" author="kavya.n">
		<createTable tableName="PRESENTMENTCHARGES">
			<column name="DetailId" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="SeqNo" type="int">
				<constraints nullable="false" />
			</column>
			<column name="FeeType" type="varchar(8)">
				<constraints nullable="false" />
			</column>
			<column name="ActualFeeAmount" type="decimal(18,0)">
				<constraints nullable="false" />
			</column>
			<column name="CGSTAmount" type="decimal(18,0)">
				<constraints nullable="false" />
			</column>
			<column name="SGSTAmount" type="decimal(18,0)">
				<constraints nullable="false" />
			</column>
			<column name="UGSTAmount" type="decimal(18,0)">
				<constraints nullable="false" />
			</column>
			<column name="IGSTAmount" type="decimal(18,0)">
				<constraints nullable="false" />
			</column>
			<column name="FeeAmount" type="decimal(18,0)">
				<constraints nullable="false" />
			</column>
			<column name="AdviseId" type="bigint">
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>

	<changeSet id="ST#62.26" author="kavya.n">
		<createTable tableName="PRESENTMENTCHARGES_TEMP">
			<column name="DetailId" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="SeqNo" type="int">
				<constraints nullable="false" />
			</column>
			<column name="FeeType" type="varchar(8)">
				<constraints nullable="false" />
			</column>
			<column name="ActualFeeAmount" type="decimal(18,0)">
				<constraints nullable="false" />
			</column>
			<column name="CGSTAmount" type="decimal(18,0)">
				<constraints nullable="false" />
			</column>
			<column name="SGSTAmount" type="decimal(18,0)">
				<constraints nullable="false" />
			</column>
			<column name="UGSTAmount" type="decimal(18,0)">
				<constraints nullable="false" />
			</column>
			<column name="IGSTAmount" type="decimal(18,0)">
				<constraints nullable="false" />
			</column>
			<column name="FeeAmount" type="decimal(18,0)">
				<constraints nullable="false" />
			</column>
			<column name="AdviseId" type="bigint">
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>

	<changeSet id="ST#62.27" author="kavya.n" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE PRESENTMENTCHARGES ADD CONSTRAINT DF_PC_DETAILID DEFAULT 0 FOR DETAILID;
				ALTER TABLE PRESENTMENTCHARGES ADD CONSTRAINT DF_PC_SEQNO DEFAULT 0 FOR SEQNO;
				ALTER TABLE PRESENTMENTCHARGES ADD CONSTRAINT DF_PC_ACTUALFEEAMOUNT DEFAULT 0 FOR ACTUALFEEAMOUNT;
				ALTER TABLE PRESENTMENTCHARGES ADD CONSTRAINT DF_PC_CGSTAMOUNT DEFAULT 0 FOR CGSTAMOUNT;
				ALTER TABLE PRESENTMENTCHARGES ADD CONSTRAINT DF_PC_SGSTAMOUNT DEFAULT 0 FOR SGSTAMOUNT;
				ALTER TABLE PRESENTMENTCHARGES ADD CONSTRAINT DF_PC_UGSTAMOUNT DEFAULT 0 FOR UGSTAMOUNT;
				ALTER TABLE PRESENTMENTCHARGES ADD CONSTRAINT DF_PC_IGSTAMOUNT DEFAULT 0 FOR IGSTAMOUNT;
				ALTER TABLE PRESENTMENTCHARGES ADD CONSTRAINT DF_PC_FEEAMOUNT DEFAULT 0 FOR FEEAMOUNT;
				ALTER TABLE PRESENTMENTCHARGES ADD CONSTRAINT DF_PC_ADVISEID DEFAULT 0 FOR ADVISEID;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#62.27" author="kavya.n" dbms="postgresql, oracle">
		<addDefaultValue columnName="DETAILID" tableName="PRESENTMENTCHARGES" defaultValue="0" />
		<addDefaultValue columnName="SEQNO" tableName="PRESENTMENTCHARGES" defaultValue="0" />
		<addDefaultValue columnName="ACTUALFEEAMOUNT" tableName="PRESENTMENTCHARGES" defaultValue="0" />
		<addDefaultValue columnName="CGSTAMOUNT" tableName="PRESENTMENTCHARGES" defaultValue="0" />
		<addDefaultValue columnName="SGSTAMOUNT" tableName="PRESENTMENTCHARGES" defaultValue="0" />
		<addDefaultValue columnName="UGSTAMOUNT" tableName="PRESENTMENTCHARGES" defaultValue="0" />
		<addDefaultValue columnName="IGSTAMOUNT" tableName="PRESENTMENTCHARGES" defaultValue="0" />
		<addDefaultValue columnName="FEEAMOUNT" tableName="PRESENTMENTCHARGES" defaultValue="0" />
		<addDefaultValue columnName="ADVISEID" tableName="PRESENTMENTCHARGES" defaultValue="0" />
	</changeSet>
	
	<changeSet id="ST#62.28" author="kavya.n" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE PRESENTMENTCHARGES_TEMP ADD CONSTRAINT DF_PC_T_DETAILID DEFAULT 0 FOR DETAILID;
				ALTER TABLE PRESENTMENTCHARGES_TEMP ADD CONSTRAINT DF_PC_T_SEQNO DEFAULT 0 FOR SEQNO;
				ALTER TABLE PRESENTMENTCHARGES_TEMP ADD CONSTRAINT DF_PC_T_ACTUALFEEAMOUNT DEFAULT 0 FOR ACTUALFEEAMOUNT;
				ALTER TABLE PRESENTMENTCHARGES_TEMP ADD CONSTRAINT DF_PC_T_CGSTAMOUNT DEFAULT 0 FOR CGSTAMOUNT;
				ALTER TABLE PRESENTMENTCHARGES_TEMP ADD CONSTRAINT DF_PC_T_SGSTAMOUNT DEFAULT 0 FOR SGSTAMOUNT;
				ALTER TABLE PRESENTMENTCHARGES_TEMP ADD CONSTRAINT DF_PC_T_UGSTAMOUNT DEFAULT 0 FOR UGSTAMOUNT;
				ALTER TABLE PRESENTMENTCHARGES_TEMP ADD CONSTRAINT DF_PC_T_IGSTAMOUNT DEFAULT 0 FOR IGSTAMOUNT;
				ALTER TABLE PRESENTMENTCHARGES_TEMP ADD CONSTRAINT DF_PC_T_FEEAMOUNT DEFAULT 0 FOR FEEAMOUNT;
				ALTER TABLE PRESENTMENTCHARGES_TEMP ADD CONSTRAINT DF_PC_T_ADVISEID DEFAULT 0 FOR ADVISEID;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#62.28" author="kavya.n" dbms="postgresql, oracle">
		<addDefaultValue columnName="DETAILID" tableName="PRESENTMENTCHARGES_TEMP" defaultValue="0" />
		<addDefaultValue columnName="SEQNO" tableName="PRESENTMENTCHARGES_TEMP" defaultValue="0" />
		<addDefaultValue columnName="ACTUALFEEAMOUNT" tableName="PRESENTMENTCHARGES_TEMP" defaultValue="0" />
		<addDefaultValue columnName="CGSTAMOUNT" tableName="PRESENTMENTCHARGES_TEMP" defaultValue="0" />
		<addDefaultValue columnName="SGSTAMOUNT" tableName="PRESENTMENTCHARGES_TEMP" defaultValue="0" />
		<addDefaultValue columnName="UGSTAMOUNT" tableName="PRESENTMENTCHARGES_TEMP" defaultValue="0" />
		<addDefaultValue columnName="IGSTAMOUNT" tableName="PRESENTMENTCHARGES_TEMP" defaultValue="0" />
		<addDefaultValue columnName="FEEAMOUNT" tableName="PRESENTMENTCHARGES_TEMP" defaultValue="0" />
		<addDefaultValue columnName="ADVISEID" tableName="PRESENTMENTCHARGES_TEMP" defaultValue="0" />
	</changeSet>
	
	<changeSet id="ST#62.29" author="kavya.n">
		<addColumn tableName="PresentmentDetails">
			<column name="Charges" type="decimal(18,0)">
			</column>
		</addColumn>
	</changeSet>

	<changeSet id="ST#62.30" author="kavya.n">
		<addColumn tableName="PresentmentDetails_Temp">
			<column name="Charges" type="decimal(18,0)">
			</column>
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#62.31" author="kavya.n" >
		<sql>
			<![CDATA[	
				UPDATE PRESENTMENTDETAILS SET CHARGES=0;
				UPDATE PRESENTMENTDETAILS_TEMP SET CHARGES=0;				
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#62.32" author="kavya.n" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE PRESENTMENTDETAILS ADD CONSTRAINT DF_PD_CHARGES DEFAULT 0 FOR CHARGES;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#62.32" author="kavya.n" dbms="postgresql, oracle">
		<addDefaultValue columnName="CHARGES" tableName="PRESENTMENTDETAILS" defaultValue="0" />
	</changeSet>
	
	<changeSet id="ST#62.33" author="kavya.n" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE PRESENTMENTDETAILS_TEMP ADD CONSTRAINT DF_PD_T_CHARGES DEFAULT 0 FOR CHARGES;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#62.33" author="kavya.n" dbms="postgresql, oracle">
		<addDefaultValue columnName="CHARGES" tableName="PRESENTMENTDETAILS_TEMP" defaultValue="0" />
	</changeSet>
	
	<changeSet id="ST#62.33_post" author="kavya.n">
		<addNotNullConstraint tableName="PRESENTMENTDETAILS" columnName="CHARGES" columnDataType="decimal(18,0)" />
		<addNotNullConstraint tableName="PRESENTMENTDETAILS_TEMP" columnName="CHARGES" columnDataType="decimal(18,0)" />
	</changeSet>
	
	<changeSet id="ST#62.34_pre" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'presentmentdetails_aview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#62.34" author="kavya.n">
		<comment>Charges column added</comment>
		<createView viewName="PRESENTMENTDETAILS_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ID,
					T1.PRESENTMENTID,
					T1.PRESENTMENTREF, 
					T1.FINREFERENCE, 
					T1.SCHDATE, 
					T1.MANDATEID, 
					T1.SCHAMTDUE, 
					T1.SCHPRIDUE, 
					T1.SCHPFTDUE, 
					T1.SCHFEEDUE, 
					T1.SCHINSDUE, 
					T1.SCHPENALTYDUE, 
					T1.ADVANCEAMT, 
					T1.EXCESSID,
					T1.ADVISEAMT, 
					T1.PRESENTMENTAMT, 
					T1.EXCLUDEREASON, 
					T1.TDSAMOUNT, 
					T1.BOUNCEID, 
					T1.EMINO, 
					T1.STATUS, 
					T1.VERSION, 
					T1.LASTMNTBY, 
					T1.LASTMNTON, 
					T1.RECORDSTATUS, 
					T1.ROLECODE, 
					T1.NEXTROLECODE, 
					T1.TASKID, 
					T1.NEXTTASKID, 
					T1.RECORDTYPE, 
					T1.WORKFLOWID, 
					T2.MANDATETYPE, 
					T3.FINTYPE, 
					T4.FINTYPEDESC, 
					T5.CUSTSHRTNAME CUSTOMERNAME, 
					T1.RECEIPTID, 
					T1.ECSRETURN, 
					T1.ERRORCODE, 
					T1.ERRORDESC, 
					T1.MANUALADVISEID, 
					T1.CHARGES
			  	FROM PRESENTMENTDETAILS T1 
			  	INNER JOIN MANDATES  T2 ON T1.MANDATEID = T2.MANDATEID 
			  	INNER JOIN FINANCEMAIN T3 ON T1.FINREFERENCE = T3.FINREFERENCE 
			  	INNER JOIN RMTFINANCETYPES T4 ON T3.FINTYPE  = T4.FINTYPE 
			  	INNER JOIN CUSTOMERS T5 ON T5.CUSTID  = T3.CUSTID
			 ]]>
		</createView>
	</changeSet>
	
	<changeSet id="ST#62.34_post" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'presentmentdetails_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#62.35_pre" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'presentmentdetails_pdcaview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#62.35" author="kavya.n">
		<comment>Charges column added</comment>
		<createView viewName="PresentmentDetails_PDCAView" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ID,
					T1.PRESENTMENTID,
					T1.PRESENTMENTREF, 
					T1.FINREFERENCE, 
					T1.SCHDATE, 
					T1.MANDATEID, 
					T1.SCHAMTDUE, 
					T1.SCHPRIDUE, 
					T1.SCHPFTDUE, 
					T1.SCHFEEDUE, 
					T1.SCHINSDUE, 
					T1.SCHPENALTYDUE, 
					T1.ADVANCEAMT, 
					T1.EXCESSID,
					T1.ADVISEAMT, 
					T1.PRESENTMENTAMT, 
					T1.EXCLUDEREASON, 
					T1.TDSAMOUNT, 
					T1.BOUNCEID, 
					T1.EMINO, 
					T1.STATUS, 
					T1.VERSION, 
					T1.LASTMNTBY, 
					T1.LASTMNTON, 
					T1.RECORDSTATUS, 
					T1.ROLECODE, 
					T1.NEXTROLECODE, 
					T1.TASKID, 
					T1.NEXTTASKID, 
					T1.RECORDTYPE, 
					T1.WORKFLOWID, 
					T2.CHEQUETYPE MANDATETYPE, 
					T3.FINTYPE, 
					T4.FINTYPEDESC, 
					T5.CUSTSHRTNAME CUSTOMERNAME, 
					T1.RECEIPTID, 
					T1.ECSRETURN, 
					T1.ERRORCODE, 
					T1.ERRORDESC, 
					T1.MANUALADVISEID, 
					T1.CHARGES
			  	FROM PRESENTMENTDETAILS T1
				JOIN CHEQUEDETAIL T2 ON T2.CHEQUEDETAILSID = T1.MANDATEID
				JOIN FINANCEMAIN T3 ON T1.FINREFERENCE = T3.FINREFERENCE
		 		JOIN RMTFINANCETYPES T4 ON T3.FINTYPE = T4.FINTYPE
		 		JOIN CUSTOMERS T5 ON T5.CUSTID = T3.CUSTID	
		 	]]>	
		</createView>
	</changeSet>
	
	<changeSet id="ST#62.35_post" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'presentmentdetails_pdcaview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#62.36_pre" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'presentmentdetails_pdcview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#62.36" author="kavya.n">
		<comment>Charges column added</comment>
		<createView viewName="PresentmentDetails_PDCView" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ID,
					T1.PRESENTMENTID,
					T1.PRESENTMENTREF, 
					T1.FINREFERENCE, 
					T1.SCHDATE, 
					T1.MANDATEID, 
					T1.SCHAMTDUE, 
					T1.SCHPRIDUE, 
					T1.SCHPFTDUE, 
					T1.SCHFEEDUE, 
					T1.SCHINSDUE, 
					T1.SCHPENALTYDUE, 
					T1.ADVANCEAMT, 
					T1.EXCESSID,
					T1.ADVISEAMT, 
					T1.PRESENTMENTAMT, 
					T1.EXCLUDEREASON, 
					T1.TDSAMOUNT, 
					T1.BOUNCEID, 
					T1.EMINO, 
					T1.STATUS, 
					T1.VERSION, 
					T1.LASTMNTBY, 
					T1.LASTMNTON, 
					T1.RECORDSTATUS, 
					T1.ROLECODE, 
					T1.NEXTROLECODE, 
					T1.TASKID, 
					T1.NEXTTASKID, 
					T1.RECORDTYPE, 
					T1.WORKFLOWID, 
					T2.CHEQUETYPE MANDATETYPE, 
					T3.FINTYPE, 
					T4.FINTYPEDESC, 
					T5.CUSTSHRTNAME CUSTOMERNAME, 
					T1.RECEIPTID, 
					T1.ECSRETURN, 
					T1.ERRORCODE, 
					T1.ERRORDESC, 
					T1.MANUALADVISEID, 
					T1.CHARGES
			  	FROM PRESENTMENTDETAILS_TEMP T1
				JOIN CHEQUEDETAIL T2 ON T2.CHEQUEDETAILSID = T1.MANDATEID
				JOIN FINANCEMAIN T3 ON T1.FINREFERENCE = T3.FINREFERENCE
		 		JOIN RMTFINANCETYPES T4 ON T3.FINTYPE = T4.FINTYPE
		 		JOIN CUSTOMERS T5 ON T5.CUSTID = T3.CUSTID
    			UNION ALL
					SELECT T1.ID,
					T1.PRESENTMENTID,
					T1.PRESENTMENTREF, 
					T1.FINREFERENCE, 
					T1.SCHDATE, 
					T1.MANDATEID, 
					T1.SCHAMTDUE, 
					T1.SCHPRIDUE, 
					T1.SCHPFTDUE, 
					T1.SCHFEEDUE, 
					T1.SCHINSDUE, 
					T1.SCHPENALTYDUE, 
					T1.ADVANCEAMT, 
					T1.EXCESSID,
					T1.ADVISEAMT, 
					T1.PRESENTMENTAMT, 
					T1.EXCLUDEREASON, 
					T1.TDSAMOUNT, 
					T1.BOUNCEID, 
					T1.EMINO, 
					T1.STATUS, 
					T1.VERSION, 
					T1.LASTMNTBY, 
					T1.LASTMNTON, 
					T1.RECORDSTATUS, 
					T1.ROLECODE, 
					T1.NEXTROLECODE, 
					T1.TASKID, 
					T1.NEXTTASKID, 
					T1.RECORDTYPE, 
					T1.WORKFLOWID, 
					T2.CHEQUETYPE MANDATETYPE, 
					T3.FINTYPE, 
					T4.FINTYPEDESC, 
					T5.CUSTSHRTNAME CUSTOMERNAME, 
					T1.RECEIPTID, 
					T1.ECSRETURN, 
					T1.ERRORCODE, 
					T1.ERRORDESC, 
					T1.MANUALADVISEID, 
					T1.CHARGES
			  	FROM PRESENTMENTDETAILS T1
				JOIN CHEQUEDETAIL T2 ON T2.CHEQUEDETAILSID = T1.MANDATEID
				JOIN FINANCEMAIN T3 ON T1.FINREFERENCE = T3.FINREFERENCE
		 		JOIN RMTFINANCETYPES T4 ON T3.FINTYPE = T4.FINTYPE
		 		JOIN CUSTOMERS T5 ON T5.CUSTID = T3.CUSTID
				WHERE NOT (EXISTS ( SELECT 1 FROM PRESENTMENTDETAILS_TEMP WHERE PRESENTMENTDETAILS_TEMP.ID = T1.ID))
				]]>		
		</createView>
	</changeSet>
	
	<changeSet id="ST#62.36_post" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'presentmentdetails_pdcview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#62.37_pre" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'presentmentdetails_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#62.37" author="kavya.n">
		<comment>Charges column added</comment>
		<createView viewName="PresentmentDetails_View" replaceIfExists="true">
		<![CDATA[
		  		SELECT T1.ID,
		  		T1.PRESENTMENTID, 
		  		T1.PRESENTMENTREF, 
		  		T1.FINREFERENCE, 
		  		T1.SCHDATE, 
		  		T1.MANDATEID, 
		  		T1.SCHAMTDUE, 
		  		T1.SCHPRIDUE, 
		  		T1.SCHPFTDUE, 
		  		T1.SCHFEEDUE, 
		  		T1.SCHINSDUE,
				T1.SCHPENALTYDUE, 
				T1.ADVANCEAMT, 
				T1.EXCESSID, 
				T1.ADVISEAMT, 
				T1.PRESENTMENTAMT, 
				T1.EXCLUDEREASON, 
				T1.TDSAMOUNT, 
				T1.BOUNCEID, 
				T1.EMINO, 
				T1.STATUS,
				T1.VERSION, 
				T1.LASTMNTBY, 
				T1.LASTMNTON,
				T1.RECORDSTATUS, 
				T1.ROLECODE, 
				T1.NEXTROLECODE, 
				T1.TASKID, 
				T1.NEXTTASKID, 
				T1.RECORDTYPE, 
				T1.WORKFLOWID,
				T2.MANDATETYPE, 
				T3.FINTYPE, 
				T4.FINTYPEDESC, 
				T5.CUSTSHRTNAME CUSTOMERNAME, 
				T1.RECEIPTID,
				T1.ECSRETURN,
				T1.ERRORCODE, 
				T1.ERRORDESC, 
				T1.MANUALADVISEID, 
				T1.CHARGES
				FROM PRESENTMENTDETAILS_TEMP T1  
				INNER JOIN MANDATES  T2 ON T1.MANDATEID = T2.MANDATEID 
				INNER JOIN FINANCEMAIN T3 ON T1.FINREFERENCE = T3.FINREFERENCE 
				INNER JOIN RMTFINANCETYPES T4 ON T3.FINTYPE  = T4.FINTYPE 
				INNER JOIN CUSTOMERS T5 ON T5.CUSTID  = T3.CUSTID 
			UNION ALL
			SELECT T1.ID,
		  		T1.PRESENTMENTID, 
		  		T1.PRESENTMENTREF, 
		  		T1.FINREFERENCE, 
		  		T1.SCHDATE, 
		  		T1.MANDATEID, 
		  		T1.SCHAMTDUE, 
		  		T1.SCHPRIDUE, 
		  		T1.SCHPFTDUE, 
		  		T1.SCHFEEDUE, 
		  		T1.SCHINSDUE,
				T1.SCHPENALTYDUE, 
				T1.ADVANCEAMT, 
				T1.EXCESSID, 
				T1.ADVISEAMT, 
				T1.PRESENTMENTAMT, 
				T1.EXCLUDEREASON, 
				T1.TDSAMOUNT, 
				T1.BOUNCEID, 
				T1.EMINO, 
				T1.STATUS,
				T1.VERSION, 
				T1.LASTMNTBY, 
				T1.LASTMNTON,
				T1.RECORDSTATUS, 
				T1.ROLECODE, 
				T1.NEXTROLECODE, 
				T1.TASKID, 
				T1.NEXTTASKID, 
				T1.RECORDTYPE, 
				T1.WORKFLOWID,
				T2.MANDATETYPE, 
				T3.FINTYPE, 
				T4.FINTYPEDESC, 
				T5.CUSTSHRTNAME CUSTOMERNAME, 
				T1.RECEIPTID,
				T1.ECSRETURN,
				T1.ERRORCODE, 
				T1.ERRORDESC, 
				T1.MANUALADVISEID, 
				T1.CHARGES
				FROM PRESENTMENTDETAILS T1  
				INNER JOIN MANDATES  T2 ON T1.MANDATEID = T2.MANDATEID 
				INNER JOIN FINANCEMAIN T3 ON T1.FINREFERENCE = T3.FINREFERENCE 
				INNER JOIN RMTFINANCETYPES T4 ON T3.FINTYPE  = T4.FINTYPE 
				INNER JOIN CUSTOMERS T5 ON T5.CUSTID  = T3.CUSTID 
		                WHERE NOT EXISTS (SELECT 1 FROM PRESENTMENTDETAILS_TEMP WHERE ID = T1.ID)	
		      ]]>	
		</createView>
	</changeSet>
	
	<changeSet id="ST#62.37_post" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'presentmentdetails_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#62.38" author="kavya.n">
		<addColumn tableName="ManualAdvise">
			<column name="PresentmentDetailId" type="bigint">
			</column>
		</addColumn>
	</changeSet>

	<changeSet id="ST#62.39" author="kavya.n">
		<addColumn tableName="ManualAdvise_Temp">
			<column name="PresentmentDetailId" type="bigint">
			</column>
		</addColumn>
	</changeSet>
	
		
	<changeSet id="ST#62.40" author="kavya.n" >
		<sql>
			<![CDATA[	
				UPDATE MANUALADVISE set PRESENTMENTDETAILID=0;
				UPDATE MANUALADVISE_TEMP set PRESENTMENTDETAILID=0;				
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#62.41" author="kavya.n" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE MANUALADVISE ADD CONSTRAINT DF_MA_PRESENTMENTDETAILID DEFAULT 0 FOR PRESENTMENTDETAILID;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#62.41" author="kavya.n" dbms="postgresql, oracle">
		<addDefaultValue columnName="PRESENTMENTDETAILID" tableName="MANUALADVISE" defaultValue="0" />
	</changeSet>
	
	<changeSet id="ST#62.42" author="kavya.n" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE MANUALADVISE_TEMP ADD CONSTRAINT DF_MA_T_PRESENTMENTDETAILID DEFAULT 0 FOR PRESENTMENTDETAILID;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#62.42" author="kavya.n" dbms="postgresql, oracle">
		<addDefaultValue columnName="PRESENTMENTDETAILID" tableName="MANUALADVISE_TEMP" defaultValue="0" />
	</changeSet>
	
	<changeSet id="ST#62.41_post" author="kavya.n">
		<addNotNullConstraint tableName="MANUALADVISE" columnName="PRESENTMENTDETAILID" columnDataType="bigint" />
		<addNotNullConstraint tableName="MANUALADVISE_TEMP" columnName="PRESENTMENTDETAILID" columnDataType="bigint" />
	</changeSet>
	
	<changeSet id="ST#62.43_pre" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'manualadvise_aview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#62.43" author="kavya.n">
		<comment>PresentmentDetailId column added</comment>
		<createView viewName="ManualAdvise_AView" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ADVISEID,
					T1.ADVISETYPE, 
					T1.FINREFERENCE, 
					T1.FEETYPEID, 
					T1.SEQUENCE, 
					T1.ADVISEAMOUNT, 
					T1.PAIDAMOUNT, 
					T1.WAIVEDAMOUNT, 
					T1.REMARKS, 
					T1.VALUEDATE, 
					T1.POSTDATE, 
					T1.VERSION, 
					T1.LASTMNTBY, 
					T1.LASTMNTON, 
					T1.RECORDSTATUS, 
					T1.ROLECODE, 
					T1.NEXTROLECODE, 
					T1.TASKID, 
					T1.NEXTTASKID, 
					T1.RECORDTYPE, 
					T1.WORKFLOWID, 
					T2.FEETYPEDESC, 
					T2.FEETYPECODE, 
					T1.BOUNCEID, 
					T1.RECEIPTID, 
					T3.BOUNCECODE, 
					T1.RESERVEDAMT, 
					T1.BALANCEAMT, 
					T3.REASON BOUNCECODEDESC, 
					COALESCE(T2.TAXAPPLICABLE, 0) TAXAPPLICABLE, 
					COALESCE(T2.TDSREQ, 0) TDSREQ, 
					T2.TAXCOMPONENT, 
					T1.PAIDCGST, 
					T1.PAIDSGST, 
					T1.PAIDIGST, 
					T1.PAIDUGST, 
					T1.WAIVEDCGST, 
					T1.WAIVEDSGST, 
					T1.WAIVEDUGST, 
					T1.WAIVEDIGST, 
					T1.WAIVEDCESS, 
					T1.PAIDCESS, 
					T1.FINSOURCE, 
					T1.DUECREATION, 
					T1.LINKEDTRANID, 
					T1.TDSPAID, 
					T1.HOLDDUE, 
					T1.PRESENTMENTDETAILID
				FROM MANUALADVISE T1  
				LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID  
				LEFT JOIN BOUNCEREASONS T3 ON T1.BOUNCEID = T3.BOUNCEID	
			]]>
		</createView>
	</changeSet>
	
		<changeSet id="ST#62.43_post" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'manualadvise_aview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#62.44_pre" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'manualadvise_lview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#62.44" author="kavya.n">
		<comment>PresentmentDetailId column added</comment>
		<createView viewName="ManualAdvise_LView" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ADVISEID, 
					T1.ADVISETYPE, 
					T1.FINREFERENCE, 
					T1.FEETYPEID, 
					T1.SEQUENCE, 
					T1.ADVISEAMOUNT, 
					T1.PAIDAMOUNT, 
					T1.WAIVEDAMOUNT, 
					T1.REMARKS, 
					T1.VALUEDATE, 
					T1.POSTDATE, 
					T1.VERSION, 
					T1.LASTMNTBY, 
					T1.LASTMNTON, 
					T1.RECORDSTATUS, 
					T1.ROLECODE, 
					T1.NEXTROLECODE, 
					T1.TASKID, 
					T1.NEXTTASKID, 
					T1.RECORDTYPE, 
					T1.WORKFLOWID, 
					T2.FEETYPEDESC, 
					T2.FEETYPECODE, 
					T1.BOUNCEID, 
					T1.RECEIPTID, 
					T3.BOUNCECODE, 
					T1.RESERVEDAMT, 
					T1.BALANCEAMT,
					T3.REASON BOUNCECODEDESC, 
					COALESCE(T2.TAXAPPLICABLE, 0) TAXAPPLICABLE, 
					COALESCE(T2.TDSREQ, 0) TDSREQ, 
					T2.TAXCOMPONENT, 
					T1.PAIDCGST, 
					T1.PAIDSGST, 
					T1.PAIDIGST, 
					T1.PAIDUGST, 
					T1.WAIVEDCGST, 
					T1.WAIVEDSGST, 
					T1.WAIVEDUGST, 
					T1.WAIVEDIGST, 
					T1.FINSOURCE, 
					T1.DUECREATION, 
					T1.LINKEDTRANID, 
					T1.TDSPAID, 
					T1.HOLDDUE, 
					T1.PRESENTMENTDETAILID
				FROM MANUALADVISE T1  
				LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID  
				LEFT JOIN BOUNCEREASONS T3 ON T1.BOUNCEID = T3.BOUNCEID	
			]]>
		</createView>
	</changeSet>
	
	<changeSet id="ST#62.44_post" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'manualadvise_lview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#62.45_pre" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'manualadvise_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#62.45" author="kavya.n">
		<comment>PresentmentDetailId column added</comment>
		<createView viewName="ManualAdvise_TView" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ADVISEID,
					T1.ADVISETYPE, 
					T1.FINREFERENCE, 
					T1.FEETYPEID, 
					T1.SEQUENCE, 
					T1.ADVISEAMOUNT, 
					T1.PAIDAMOUNT, 
					T1.WAIVEDAMOUNT, 
					T1.REMARKS, 
					T1.VALUEDATE, 
					T1.POSTDATE, 
					T1.VERSION, 
					T1.LASTMNTBY, 
					T1.LASTMNTON, 
					T1.RECORDSTATUS, 
					T1.ROLECODE, 
					T1.NEXTROLECODE, 
					T1.TASKID, 
					T1.NEXTTASKID, 
					T1.RECORDTYPE, 
					T1.WORKFLOWID, 
					T2.FEETYPEDESC, 
					T2.FEETYPECODE, 
					T1.BOUNCEID, 
					T1.RECEIPTID, 
					T3.BOUNCECODE, 
					T1.RESERVEDAMT, 
					T1.BALANCEAMT, 
					T3.REASON BOUNCECODEDESC, 
					COALESCE(T2.TAXAPPLICABLE, 0) TAXAPPLICABLE, 
					COALESCE(T2.TDSREQ, 0) TDSREQ, 
					T2.TAXCOMPONENT, 
					T1.PAIDCGST, 
					T1.PAIDSGST, 
					T1.PAIDIGST, 
					T1.PAIDUGST, 
					T1.WAIVEDCGST, 
					T1.WAIVEDSGST, 
					T1.WAIVEDUGST, 
					T1.WAIVEDIGST, 
					T1.WAIVEDCESS, 
					T1.PAIDCESS, 
					T1.FINSOURCE, 
					T1.DUECREATION, 
					T1.LINKEDTRANID, 
					T1.TDSPAID, 
					T1.HOLDDUE, 
					T1.PRESENTMENTDETAILID
				FROM MANUALADVISE_TEMP T1   
				LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID  
				LEFT JOIN BOUNCEREASONS T3 ON T1.BOUNCEID = T3.BOUNCEID	
			]]>			
		</createView>
	</changeSet>
	
	<changeSet id="ST#62.45_post" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'manualadvise_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#62.46_pre" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'manualadvise_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#62.46" author="kavya.n">
		<comment>PresentmentDetailId column added</comment>
		<createView viewName="ManualAdvise_View" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ADVISEID,
					T1.ADVISETYPE, 
					T1.FINREFERENCE, 
					T1.FEETYPEID, 
					T1.SEQUENCE, 
					T1.ADVISEAMOUNT, 
					T1.PAIDAMOUNT, 
					T1.WAIVEDAMOUNT, 
					T1.REMARKS, 
					T1.VALUEDATE, 
					T1.POSTDATE, 
					T1.VERSION, 
					T1.LASTMNTBY, 
					T1.LASTMNTON, 
					T1.RECORDSTATUS, 
					T1.ROLECODE, 
					T1.NEXTROLECODE, 
					T1.TASKID, 
					T1.NEXTTASKID, 
					T1.RECORDTYPE, 
					T1.WORKFLOWID, 
					T2.FEETYPEDESC, 
					T2.FEETYPECODE, 
					T1.BOUNCEID, 
					T1.RECEIPTID, 
					T3.BOUNCECODE, 
					T1.RESERVEDAMT, 
					T1.BALANCEAMT, 
					T3.REASON BOUNCECODEDESC, 
					COALESCE(T2.TAXAPPLICABLE, 0) TAXAPPLICABLE, 
					COALESCE(T2.TDSREQ, 0) TDSREQ, 
					T2.TAXCOMPONENT, 
					T1.PAIDCGST, 
					T1.PAIDSGST, 
					T1.PAIDIGST, 
					T1.PAIDUGST, 
					T1.WAIVEDCGST, 
					T1.WAIVEDSGST, 
					T1.WAIVEDUGST, 
					T1.WAIVEDIGST, 
					T1.WAIVEDCESS, 
					T1.PAIDCESS, 
					T1.FINSOURCE, 
					T1.DUECREATION, 
					T1.LINKEDTRANID, 
					T1.TDSPAID, 
					T1.HOLDDUE, 
					T1.PRESENTMENTDETAILID
				FROM MANUALADVISE_TEMP T1  
				LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID  
				LEFT JOIN BOUNCEREASONS T3 ON T1.BOUNCEID = T3.BOUNCEID
				UNION ALL	
				SELECT T1.ADVISEID,
					T1.ADVISETYPE, 
					T1.FINREFERENCE, 
					T1.FEETYPEID, 
					T1.SEQUENCE, 
					T1.ADVISEAMOUNT, 
					T1.PAIDAMOUNT, 
					T1.WAIVEDAMOUNT, 
					T1.REMARKS, 
					T1.VALUEDATE, 
					T1.POSTDATE, 
					T1.VERSION, 
					T1.LASTMNTBY, 
					T1.LASTMNTON, 
					T1.RECORDSTATUS, 
					T1.ROLECODE, 
					T1.NEXTROLECODE, 
					T1.TASKID, 
					T1.NEXTTASKID, 
					T1.RECORDTYPE, 
					T1.WORKFLOWID, 
					T2.FEETYPEDESC, 
					T2.FEETYPECODE, 
					T1.BOUNCEID, 
					T1.RECEIPTID, 
					T3.BOUNCECODE, 
					T1.RESERVEDAMT, 
					T1.BALANCEAMT, 
					T3.REASON BOUNCECODEDESC, 
					COALESCE(T2.TAXAPPLICABLE, 0) TAXAPPLICABLE, 
					COALESCE(T2.TDSREQ, 0) TDSREQ, 
					T2.TAXCOMPONENT, 
					T1.PAIDCGST, 
					T1.PAIDSGST, 
					T1.PAIDIGST, 
					T1.PAIDUGST, 
					T1.WAIVEDCGST, 
					T1.WAIVEDSGST, 
					T1.WAIVEDUGST, 
					T1.WAIVEDIGST, 
					T1.WAIVEDCESS, 
					T1.PAIDCESS, 
					T1.FINSOURCE, 
					T1.DUECREATION, 
					T1.LINKEDTRANID, 
					T1.TDSPAID, 
					T1.HOLDDUE, 
					T1.PRESENTMENTDETAILID
				FROM MANUALADVISE T1  
				LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID  
				LEFT JOIN BOUNCEREASONS T3 ON T1.BOUNCEID = T3.BOUNCEID	
				WHERE NOT (EXISTS ( SELECT 1 FROM MANUALADVISE_TEMP WHERE MANUALADVISE_TEMP.ADVISEID = T1.ADVISEID))
			]]>			
		</createView>
	</changeSet>
	
	<changeSet id="ST#62.46_post" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'manualadvise_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#62.47" author="kavya.n">
		<addColumn tableName="FinODDetails">
			<column name="PresentmentDetailId" type="bigint" >
			</column>
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#62.48" author="kavya.n">
		<addColumn tableName="FinODDetails_PD">
			<column name="PresentmentDetailId" type="bigint" >
			</column>
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#62.49" author="kavya.n" >
		<sql>
			<![CDATA[	
				UPDATE FINODDETAILS SET PRESENTMENTDETAILID=0;
				UPDATE FINODDETAILS_PD SET PRESENTMENTDETAILID=0;				
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#62.50" author="kavya.n" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE FINODDETAILS ADD CONSTRAINT DF_FOD_PRESENTMENTDETAILID DEFAULT 0 FOR PRESENTMENTDETAILID;
				ALTER TABLE FINODDETAILS_PD ADD CONSTRAINT DF_FPD_PRESENTMENTDETAILID DEFAULT 0 FOR PRESENTMENTDETAILID;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#62.50" author="kavya.n" dbms="postgresql, oracle">
		<addDefaultValue columnName="PresentmentDetailId" tableName="FinODDetails" defaultValue="0" />
		<addDefaultValue columnName="PresentmentDetailId" tableName="FinODDetails_PD" defaultValue="0" />
	</changeSet>
	
	<changeSet id="ST#62.50_post" author="kavya.n">
		<addNotNullConstraint tableName="FinODDetails" columnName="PRESENTMENTDETAILID" columnDataType="bigint" />
		<addNotNullConstraint tableName="FinODDetails_PD" columnName="PRESENTMENTDETAILID" columnDataType="bigint" />
	</changeSet>
	
	<changeSet id="ST#62.51" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finoddetails_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#62.51" author="kavya.n">
		<comment>PresentmentDetailId column added</comment>
		<createView viewName="FinODDetails_View" replaceIfExists="true">
			<![CDATA[
				SELECT OD.FINREFERENCE,
					 OD.FINODSCHDDATE, 
					 OD.FINODFOR, 
					 OD.FINBRANCH, 
					 OD.FINTYPE, 
					 OD.CUSTID, 
					 OD.FINODTILLDATE, 
					 OD.FINCURODAMT, 
					 OD.FINCURODPRI, 
					 OD.FINCURODPFT, 
					 OD.FINMAXODAMT, 
					 OD.FINMAXODPRI, 
					 OD.FINMAXODPFT, 
					 OD.GRACEDAYS, 
					 OD.INCGRACEDAYS, 
					 OD.FINCURODDAYS, 
					 OD.TOTPENALTYAMT, 
					 OD.TOTWAIVED, 
					 OD.TOTPENALTYPAID, 
					 OD.LPIAMT, 
					 OD.LPIPAID, 
					 OD.LPIBAL, 
					 OD.TOTPENALTYBAL, 
					 OD.FINLMDFDATE, 
					 COALESCE(PR.APPLYODPENALTY, 0) APPLYODPENALTY, 
					 COALESCE(PR.ODINCGRCDAYS, 0) ODINCGRCDAYS, 
					 COALESCE(PR.ODCHARGETYPE, '') ODCHARGETYPE, 
					 COALESCE(PR.ODGRACEDAYS, 0) ODGRACEDAYS, 
					 COALESCE(PR.ODCHARGECALON, '') ODCHARGECALON, 
					 COALESCE(PR.ODCHARGEAMTORPERC, 0) ODCHARGEAMTORPERC, 
					 COALESCE(PR.ODALLOWWAIVER, 0) ODALLOWWAIVER, 
					 COALESCE(PR.ODMAXWAIVERPERC, 0) ODMAXWAIVERPERC, 
					 COALESCE(PR.ODRULECODE, '') ODRULECODE, 
					 OD.LOCKODRECALCAL,
					 OD.LPPTDSPAID, 
					 OD.PRESENTMENTDETAILID
				FROM FINODDETAILS OD  
				LEFT JOIN FINODPENALTY_LATEST_RATES_VIEW PR ON OD.FINREFERENCE = PR.FINREFERENCE		
			]]>	
		</createView>
	</changeSet>
	
	<changeSet id="ST#62.51_post" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finoddetails_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#62.52.1" author="sampath.d">
		<addColumn tableName="RmtFinanceTypes">
			<column name="ExtnsnODGraceDays" type="int">
			</column>
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#62.52.2" author="sampath.d">
		<addColumn tableName="RmtFinanceTypes">
			<column name="CollecChrgCodeId" type="bigint">
			</column>
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#62.52.3" author="sampath.d">
		<addColumn tableName="RmtFinanceTypes">
			<column name="CollectionAmt" type="decimal(18,0)">
			</column>
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#62.53.1" author="sampath.d">
		<addColumn tableName="RmtFinanceTypes_Temp">
			<column name="ExtnsnODGraceDays" type="int">
			</column>
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#62.53.2" author="sampath.d">
		<addColumn tableName="RmtFinanceTypes_Temp">
			<column name="CollecChrgCodeId" type="bigint">
			</column>
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#62.53.3" author="sampath.d">
		<addColumn tableName="RmtFinanceTypes_Temp">
			<column name="CollectionAmt" type="decimal(18,0)">
			</column>
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#62.53.4" author="sampath.d" >
		<sql>
			<![CDATA[	
				UPDATE RMTFINANCETYPES SET EXTNSNODGRACEDAYS=0;
				UPDATE RMTFINANCETYPES SET COLLECCHRGCODEID=0;
				UPDATE RMTFINANCETYPES SET COLLECTIONAMT=0;
				UPDATE RMTFINANCETYPES_TEMP SET EXTNSNODGRACEDAYS=0;
				UPDATE RMTFINANCETYPES_TEMP SET COLLECCHRGCODEID=0;
				UPDATE RMTFINANCETYPES_TEMP SET COLLECTIONAMT=0;				
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#62.54" author="sampath.d" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE RMTFINANCETYPES ADD CONSTRAINT DF_FT_EXTNSNODGRACEDAYS DEFAULT 0 FOR EXTNSNODGRACEDAYS;
				ALTER TABLE RMTFINANCETYPES ADD CONSTRAINT DF_FT_COLLECCHRGCODEID DEFAULT 0 FOR COLLECCHRGCODEID;
				ALTER TABLE RMTFINANCETYPES ADD CONSTRAINT DF_FT_COLLECTIONAMT DEFAULT 0 FOR COLLECTIONAMT;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#62.54" author="sampath.d" dbms="postgresql, oracle">
		<addDefaultValue columnName="EXTNSNODGRACEDAYS" tableName="RMTFINANCETYPES" defaultValue="0" />
		<addDefaultValue columnName="COLLECCHRGCODEID" tableName="RMTFINANCETYPES" defaultValue="0" />
		<addDefaultValue columnName="COLLECTIONAMT" tableName="RMTFINANCETYPES" defaultValue="0" />
	</changeSet>
	
	<changeSet id="ST#62.55" author="sampath.d" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE RMTFINANCETYPES_TEMP ADD CONSTRAINT DF_FT_T_EXTNSNODGRACEDAYS DEFAULT 0 FOR EXTNSNODGRACEDAYS;
				ALTER TABLE RMTFINANCETYPES_TEMP ADD CONSTRAINT DF_FT_T_COLLECCHRGCODEID DEFAULT 0 FOR COLLECCHRGCODEID;
				ALTER TABLE RMTFINANCETYPES_TEMP ADD CONSTRAINT DF_FT_T_COLLECTIONAMT DEFAULT 0 FOR COLLECTIONAMT;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#62.55" author="sampath.d" dbms="postgresql, oracle">
		<addDefaultValue columnName="EXTNSNODGRACEDAYS" tableName="RMTFINANCETYPES_TEMP" defaultValue="0" />
		<addDefaultValue columnName="COLLECCHRGCODEID" tableName="RMTFINANCETYPES_TEMP" defaultValue="0" />
		<addDefaultValue columnName="COLLECTIONAMT" tableName="RMTFINANCETYPES_TEMP" defaultValue="0" />
	</changeSet>
	
	<changeSet id="ST#62.56_pre" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_view');
		 	]]>
		</sql>
	</changeSet>

	<changeSet id="ST#62.56" author="sampath.d">
		<createView viewName="RMTFINANCETYPES_VIEW" replaceIfExists="true">
		   <![CDATA[
				SELECT T1.FINTYPE,
					T1.FINCATEGORY,
					T1.FINTYPEDESC,
					T1.FINCCY,
					T1.FINDAYSCALTYPE,
					T1.FINACTYPE,
					T1.FINCONTINGENTACTYPE,
					T1.FINISGENREF,
					T1.FINMAXAMOUNT,
					T1.FINMINAMOUNT,
					T1.FINISOPENNEWFINAC,
					T1.FINDFTSTMTFRQ,
					T1.FINISALWMD,
					T1.FINSCHDMTHD,
					T1.FINISALWGRACE,
					T1.FINHISTRETENSION,
					T1.EQUALREPAYMENT,
					T1.FINRATETYPE,
					T1.FINBASERATE,
					T1.FINSPLRATE,
					T1.FININTRATE,
					T1.FINMINRATE,
					T1.FINMAXRATE,
					T1.FINDFTINTFRQ,
					T1.FINISINTCPZ,
					T1.FINCPZFRQ,
					T1.FINISRVWALW,
					T1.FINRVWFRQ,
					T1.FINGRCRATETYPE,
					T1.FINGRCBASERATE,
					T1.FINGRCSPLRATE,
					T1.FINGRCINTRATE,
					T1.FINGRCMINRATE,
					T1.FINGRCMAXRATE,
					T1.FINGRCDFTINTFRQ,
					T1.FINGRCISINTCPZ,
					T1.FINGRCCPZFRQ,
					T1.FINGRCISRVWALW,
					T1.FINGRCRVWFRQ,
					T1.FINMINTERM,
					T1.FINMAXTERM,
					T1.FINDFTTERMS,
					T1.FINRPYFRQ,
					T1.FINREPAYMETHOD,
					T1.FINISALWPARTIALRPY,
					T1.FINISALWDIFFERMENT,
					T1.FINMAXDIFFERMENT,
					T1.FINISALWEARLYRPY,
					T1.FINISALWEARLYSETTLE,
					T1.FINODRPYTRIES,
					T1.FINEARLYPAYRULE,
					T1.FINEARLYSETTLERULE,
					T1.FINDEPOSITRESTRICTEDTO,
					T1.FINAEBUYORINCEPTION,
					T1.FINAESELLORMATURITY,
					T1.FINISACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.STEPFINANCE,
					T1.STEPPINGMANDATORY,
					T1.ALWMANUALSTEPS,
					T1.ALWDSTEPPOLICIES,
					T1.DFTSTEPPOLICY,
					T4.ACTYPEDESC LOVDESCFINCONTINGENTACTYPENAME,
					T5.ACTYPEDESC LOVDESCFINACTYPENAME,
					T1.FINISDWPAYREQUIRED,
					T1.FINRVWRATEAPPLFOR,
					T1.FINALWRATECHANGEANYDATE,
					T1.FINISINTCPZATGRCEND,
					T1.FINELGRULECODE,
					T1.LIMITELGRULECODE,
					T1.FINSCHCALCODEONRVW,
					T1.ALWPLANDEFERMENT,
					T1.PLANDEFERCOUNT,
					T1.FINASSETTYPE,
					T1.PFTPAYACTYPE,
					T1.FINISOPENPFTPAYACC,
					T31.ACTYPEDESC LOVDESCPFTPAYACTYPENAME,
					T1.FINISALWGRCREPAY,
					T1.FINGRCSCHDMTHD,
					T1.FINGRCMARGIN,
					T1.FINMARGIN,
					T1.FINSCHEDULEON,
					T1.FINGRCSCHEDULEON,
					T1.FINCOMMITMENTREQ,
					T1.FINCOLLATERALREQ,
					T1.FINDEPRECIATIONREQ,
					T1.FINDEPRECIATIONFRQ,
					T1.FINBANKCONTINGENTACTYPE,
					T1.FINPROVISIONACTYPE,
					T38.ACTYPEDESC LOVDESCFINBANKCONTACTYPENAME,
					T39.ACTYPEDESC LOVDESCFINPROVISIONACTYPENAME,
					T1.ALLOWRIAINVESTMENT,
					T1.OVERRIDELIMIT,
					T1.LIMITREQUIRED,
					T1.FINCOMMITMENTOVRRIDE,
					T1.FINCOLLATERALOVRRIDE,
					T1.FINPFTUNCHANGED,
					T1.APPLYODPENALTY,
					T1.ODINCGRCDAYS,
					T1.ODCHARGETYPE,
					T1.ODGRACEDAYS,
					T1.ODCHARGECALON,
					T1.ODCHARGEAMTORPERC,
					T1.ODALLOWWAIVER,
					T1.ODMAXWAIVERPERC,
					T1.FINDIVISION,
					T48.DIVISIONCODEDESC LOVDESCFINDIVISIONNAME,
					T48.ENTITYCODE LOVDESCENTITYCODE,
					T1.FINSUSPACTYPE,
					T49.ACTYPEDESC LOVDESCFINSUSPACTYPENAME,
					T1.PRODUCT,
					T1.STARTDATE,
					T1.ENDDATE,
					T1.ALLOWDOWNPAYPGM,
					T1.FINTYPEDESC LOVDESCPROMOFINTYPEDESC,
					T1.REMARKS,
					T1.ALWEARLYPAYMETHODS,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.ALWADVANCERENT,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.ROLLOVERFINANCE,
					T1.ROLLOVERFRQ,
					T1.DOWNPAYRULE,
					T59.RULECODE DOWNPAYRULECODE,
					T59.RULECODEDESC DOWNPAYRULEDESC,
					T1.FINSUSPTRIGGER,
					T1.FINSUSPREMARKS,
					T1.ALWMULTIPARTYDISB,
					T1.COLLATERALTYPE,
					T1.TDSAPPLICABLE,
					T1.MANUALSCHEDULE,
					T1.APPLYGRCPRICING,
					T1.GRCPRICINGMETHOD,
					T1.APPLYRPYPRICING,
					T1.RPYPRICINGMETHOD,
					T1.RPYHIERARCHY,
					T67.RULECODE GRCPRICINGMETHODDESC,
					T68.RULECODE RPYPRICINGMETHODDESC,
					T1.DROPLINEOD,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.FINREPAYPFTONFRQ,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PFTDUESCHON,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.UNPLANEMIHLOCKPERIOD,
					T1.UNPLANEMICPZ,
					T1.REAGECPZ,
					T1.FDDLOCKPERIOD,
					T1.ALWDRPYMETHODS,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.ROUNDINGMODE,
					T1.ROUNDINGTARGET,
					T1.FREQUENCYDAYS,
					T1.QUICKDISB,
					T1.ALWMAXDISBCHECKREQ,
					T1.ALWREAGE,
					T1.ALWUNPLANEMIHOLIDAY,
					T1.PROFITCENTERID,
					T69.PROFITCENTERCODE,
					T69.PROFITCENTERDESC,
					T1.PRODUCTCATEGORY,
					T2.PRODUCTDESC FINCATEGORYDESC,
					T1.DEVELOPERFINANCE,
					T1.COSTOFFUNDS,
					T1.CHEQUECAPTUREREQ,
					T1.FINLTVCHECK,
					T1.PARTIALLYSECURED,
					T1.ALWADVEMI,
					T1.ADVEMIMINTERMS,
					T1.ADVEMIMAXTERMS,
					T1.ADVEMIDFTTERMS,
					T1.ADVEMISCHDMTHD,
					T1.BPIPFTDAYSBASIS,
					T1.ELIGIBILITYMETHODS,
					T1.ALWHYBRIDRATE,
					T1.FIXEDRATETENOR,
					T1.ODMINCAPAMOUNT,
					T1.ODRULECODE,
					T1.ALWZEROINTACC,
					T1.AUTOREJECTIONDAYS,
					T1.TAXNOMAND,
					T1.PUTCALLREQUIRED,
					T1.GRCADVINTERSETREQ,
					T1.GRCADVTYPE,
					T1.GRCADVMINTERMS,
					T1.GRCADVMAXTERMS,
					T1.GRCADVDEFAULTTERMS,
					T1.ADVINTERSETREQ,
					T1.ADVTYPE,
					T1.ADVMINTERMS,
					T1.ADVMAXTERMS,
					T1.ADVDEFAULTTERMS,
					T1.ADVSTAGE,
					T1.DSFREQ,
					T1.CASHCOLLATERALREQ,
					T1.TDSALLOWTOMODIFY,
					T1.TDSAPPLICABLETO,
					T1.ALWVAN,
					T1.VANALLOCATIONMETHOD,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING,
					T1.ALWSANCTIONAMT,
					T1.ALWSANCTIONAMTOVERRIDE,
					T1.SANBSDSCHDLE,
					T1.FINISRATERVWATGRCEND,
					T1.SCHDONPMTCAL,
					T1.AUTOAPPROVE,
					T1.ALWPLANNEDEMIINGRC,
					T1.GRCADJREQ,
					T1.GRCPERIODAFTRFULLDISB,
					T1.AUTOINCRGRCENDDATE,
					T1.GRCAUTOINCRMONTHS,
					T1.MAXAUTOINCRALLOWED,
					T1.THRLDTOMAINTAINGRCPRD,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.BILLINGCHRGREQ,
					T1.BILLINGCHRGCODE,
					T1.EXTNSNODGRACEDAYS,
					T1.COLLECCHRGCODEID,
					T1.COLLECTIONAMT
				FROM RMTFINANCETYPES_TEMP T1
				LEFT JOIN BMTPRODUCT T2 ON T1.FINCATEGORY = T2.PRODUCTCODE
				LEFT JOIN RMTACCOUNTTYPES T4 ON T1.FINCONTINGENTACTYPE = T4.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T38 ON T1.FINBANKCONTINGENTACTYPE = T38.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T39 ON T1.FINPROVISIONACTYPE = T39.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T5 ON T1.FINACTYPE = T5.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T31 ON T1.PFTPAYACTYPE = T31.ACTYPE
				LEFT JOIN SMTDIVISIONDETAIL T48 ON T1.FINDIVISION = T48.DIVISIONCODE
				LEFT JOIN RMTACCOUNTTYPES T49 ON T1.FINSUSPACTYPE = T49.ACTYPE
				LEFT JOIN RULES T59 ON T1.DOWNPAYRULE = T59.RULEID
				LEFT JOIN RULES T67 ON T1.GRCPRICINGMETHOD = T67.RULEID
				LEFT JOIN RULES T68 ON T1.RPYPRICINGMETHOD = T68.RULEID
				LEFT JOIN PROFITCENTERS T69 ON T69.PROFITCENTERID = T1.PROFITCENTERID
				UNION ALL
				SELECT T1.FINTYPE,
					T1.FINCATEGORY,
					T1.FINTYPEDESC,
					T1.FINCCY,
					T1.FINDAYSCALTYPE,
					T1.FINACTYPE,
					T1.FINCONTINGENTACTYPE,
					T1.FINISGENREF,
					T1.FINMAXAMOUNT,
					T1.FINMINAMOUNT,
					T1.FINISOPENNEWFINAC,
					T1.FINDFTSTMTFRQ,
					T1.FINISALWMD,
					T1.FINSCHDMTHD,
					T1.FINISALWGRACE,
					T1.FINHISTRETENSION,
					T1.EQUALREPAYMENT,
					T1.FINRATETYPE,
					T1.FINBASERATE,
					T1.FINSPLRATE,
					T1.FININTRATE,
					T1.FINMINRATE,
					T1.FINMAXRATE,
					T1.FINDFTINTFRQ,
					T1.FINISINTCPZ,
					T1.FINCPZFRQ,
					T1.FINISRVWALW,
					T1.FINRVWFRQ,
					T1.FINGRCRATETYPE,
					T1.FINGRCBASERATE,
					T1.FINGRCSPLRATE,
					T1.FINGRCINTRATE,
					T1.FINGRCMINRATE,
					T1.FINGRCMAXRATE,
					T1.FINGRCDFTINTFRQ,
					T1.FINGRCISINTCPZ,
					T1.FINGRCCPZFRQ,
					T1.FINGRCISRVWALW,
					T1.FINGRCRVWFRQ,
					T1.FINMINTERM,
					T1.FINMAXTERM,
					T1.FINDFTTERMS,
					T1.FINRPYFRQ,
					T1.FINREPAYMETHOD,
					T1.FINISALWPARTIALRPY,
					T1.FINISALWDIFFERMENT,
					T1.FINMAXDIFFERMENT,
					T1.FINISALWEARLYRPY,
					T1.FINISALWEARLYSETTLE,
					T1.FINODRPYTRIES,
					T1.FINEARLYPAYRULE,
					T1.FINEARLYSETTLERULE,
					T1.FINDEPOSITRESTRICTEDTO,
					T1.FINAEBUYORINCEPTION,
					T1.FINAESELLORMATURITY,
					T1.FINISACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.STEPFINANCE,
					T1.STEPPINGMANDATORY,
					T1.ALWMANUALSTEPS,
					T1.ALWDSTEPPOLICIES,
					T1.DFTSTEPPOLICY,
					T4.ACTYPEDESC LOVDESCFINCONTINGENTACTYPENAME,
					T5.ACTYPEDESC LOVDESCFINACTYPENAME,
					T1.FINISDWPAYREQUIRED,
					T1.FINRVWRATEAPPLFOR,
					T1.FINALWRATECHANGEANYDATE,
					T1.FINISINTCPZATGRCEND,
					T1.FINELGRULECODE,
					T1.LIMITELGRULECODE,
					T1.FINSCHCALCODEONRVW,
					T1.ALWPLANDEFERMENT,
					T1.PLANDEFERCOUNT,
					T1.FINASSETTYPE,
					T1.PFTPAYACTYPE,
					T1.FINISOPENPFTPAYACC,
					T31.ACTYPEDESC LOVDESCPFTPAYACTYPENAME,
					T1.FINISALWGRCREPAY,
					T1.FINGRCSCHDMTHD,
					T1.FINGRCMARGIN,
					T1.FINMARGIN,
					T1.FINSCHEDULEON,
					T1.FINGRCSCHEDULEON,
					T1.FINCOMMITMENTREQ,
					T1.FINCOLLATERALREQ,
					T1.FINDEPRECIATIONREQ,
					T1.FINDEPRECIATIONFRQ,
					T1.FINBANKCONTINGENTACTYPE,
					T1.FINPROVISIONACTYPE,
					T38.ACTYPEDESC LOVDESCFINBANKCONTACTYPENAME,
					T39.ACTYPEDESC LOVDESCFINPROVISIONACTYPENAME,
					T1.ALLOWRIAINVESTMENT,
					T1.OVERRIDELIMIT,
					T1.LIMITREQUIRED,
					T1.FINCOMMITMENTOVRRIDE,
					T1.FINCOLLATERALOVRRIDE,
					T1.FINPFTUNCHANGED,
					T1.APPLYODPENALTY,
					T1.ODINCGRCDAYS,
					T1.ODCHARGETYPE,
					T1.ODGRACEDAYS,
					T1.ODCHARGECALON,
					T1.ODCHARGEAMTORPERC,
					T1.ODALLOWWAIVER,
					T1.ODMAXWAIVERPERC,
					T1.FINDIVISION,
					T48.DIVISIONCODEDESC LOVDESCFINDIVISIONNAME,
					T48.ENTITYCODE LOVDESCENTITYCODE,
					T1.FINSUSPACTYPE,
					T49.ACTYPEDESC LOVDESCFINSUSPACTYPENAME,
					T1.PRODUCT,
					T1.STARTDATE,
					T1.ENDDATE,
					T1.ALLOWDOWNPAYPGM,
					T1.FINTYPEDESC LOVDESCPROMOFINTYPEDESC,
					T1.REMARKS,
					T1.ALWEARLYPAYMETHODS,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.ALWADVANCERENT,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.ROLLOVERFINANCE,
					T1.ROLLOVERFRQ,
					T1.DOWNPAYRULE,
					T59.RULECODE DOWNPAYRULECODE,
					T59.RULECODEDESC DOWNPAYRULEDESC,
					T1.FINSUSPTRIGGER,
					T1.FINSUSPREMARKS,
					T1.ALWMULTIPARTYDISB,
					T1.COLLATERALTYPE,
					T1.TDSAPPLICABLE,
					T1.MANUALSCHEDULE,
					T1.APPLYGRCPRICING,
					T1.GRCPRICINGMETHOD,
					T1.APPLYRPYPRICING,
					T1.RPYPRICINGMETHOD,
					T1.RPYHIERARCHY,
					T67.RULECODE GRCPRICINGMETHODDESC,
					T68.RULECODE RPYPRICINGMETHODDESC,
					T1.DROPLINEOD,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.FINREPAYPFTONFRQ,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PFTDUESCHON,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.UNPLANEMIHLOCKPERIOD,
					T1.UNPLANEMICPZ,
					T1.REAGECPZ,
					T1.FDDLOCKPERIOD,
					T1.ALWDRPYMETHODS,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.ROUNDINGMODE,
					T1.ROUNDINGTARGET,
					T1.FREQUENCYDAYS,
					T1.QUICKDISB,
					T1.ALWMAXDISBCHECKREQ,
					T1.ALWREAGE,
					T1.ALWUNPLANEMIHOLIDAY,
					T1.PROFITCENTERID,
					T69.PROFITCENTERCODE,
					T69.PROFITCENTERDESC,
					T1.PRODUCTCATEGORY,
					T2.PRODUCTDESC FINCATEGORYDESC,
					T1.DEVELOPERFINANCE,
					T1.COSTOFFUNDS,
					T1.CHEQUECAPTUREREQ,
					T1.FINLTVCHECK,
					T1.PARTIALLYSECURED,
					T1.ALWADVEMI,
					T1.ADVEMIMINTERMS,
					T1.ADVEMIMAXTERMS,
					T1.ADVEMIDFTTERMS,
					T1.ADVEMISCHDMTHD,
					T1.BPIPFTDAYSBASIS,
					T1.ELIGIBILITYMETHODS,
					T1.ALWHYBRIDRATE,
					T1.FIXEDRATETENOR,
					T1.ODMINCAPAMOUNT,
					T1.ODRULECODE,
					T1.ALWZEROINTACC,
					T1.AUTOREJECTIONDAYS,
					T1.TAXNOMAND,
					T1.PUTCALLREQUIRED,
					T1.GRCADVINTERSETREQ,
					T1.GRCADVTYPE,
					T1.GRCADVMINTERMS,
					T1.GRCADVMAXTERMS,
					T1.GRCADVDEFAULTTERMS,
					T1.ADVINTERSETREQ,
					T1.ADVTYPE,
					T1.ADVMINTERMS,
					T1.ADVMAXTERMS,
					T1.ADVDEFAULTTERMS,
					T1.ADVSTAGE,
					T1.DSFREQ,
					T1.CASHCOLLATERALREQ,
					T1.TDSALLOWTOMODIFY,
					T1.TDSAPPLICABLETO,
					T1.ALWVAN,
					T1.VANALLOCATIONMETHOD,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING,
					T1.ALWSANCTIONAMT,
					T1.ALWSANCTIONAMTOVERRIDE,
					T1.SANBSDSCHDLE,
					T1.FINISRATERVWATGRCEND,
					T1.SCHDONPMTCAL,
					T1.AUTOAPPROVE,
					T1.ALWPLANNEDEMIINGRC,
					T1.GRCADJREQ,
					T1.GRCPERIODAFTRFULLDISB,
					T1.AUTOINCRGRCENDDATE,
					T1.GRCAUTOINCRMONTHS,
					T1.MAXAUTOINCRALLOWED,
					T1.THRLDTOMAINTAINGRCPRD,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.BILLINGCHRGREQ,
					T1.BILLINGCHRGCODE,
					T1.EXTNSNODGRACEDAYS,
					T1.COLLECCHRGCODEID,
					T1.COLLECTIONAMT
				FROM RMTFINANCETYPES T1
				LEFT JOIN BMTPRODUCT T2 ON T1.FINCATEGORY = T2.PRODUCTCODE
				LEFT JOIN RMTACCOUNTTYPES T4 ON T1.FINCONTINGENTACTYPE = T4.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T38 ON T1.FINBANKCONTINGENTACTYPE = T38.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T39 ON T1.FINPROVISIONACTYPE = T39.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T5 ON T1.FINACTYPE = T5.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T31 ON T1.PFTPAYACTYPE = T31.ACTYPE
				LEFT JOIN SMTDIVISIONDETAIL T48 ON T1.FINDIVISION = T48.DIVISIONCODE
				LEFT JOIN RMTACCOUNTTYPES T49 ON T1.FINSUSPACTYPE = T49.ACTYPE
				LEFT JOIN RULES T59 ON T1.DOWNPAYRULE = T59.RULEID
				LEFT JOIN RULES T67 ON T1.GRCPRICINGMETHOD = T67.RULEID
				LEFT JOIN RULES T68 ON T1.RPYPRICINGMETHOD = T68.RULEID
				LEFT JOIN PROFITCENTERS T69 ON T69.PROFITCENTERID = T1.PROFITCENTERID
				WHERE NOT (EXISTS ( SELECT 1 AS EXPR1 FROM RMTFINANCETYPES_TEMP
					WHERE RMTFINANCETYPES_TEMP.FINTYPE = T1.FINTYPE))
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#62.56_post" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rmtfinancetypes_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#62.57_pre" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_orgview');
		 	]]>
		</sql>
	</changeSet>

	<changeSet id="ST#62.57" author="sampath.d">
		<createView viewName="RMTFINANCETYPES_ORGVIEW" replaceIfExists="true">
		   <![CDATA[
				SELECT T1.FINTYPE,
					T1.FINCATEGORY,
					T1.FINTYPEDESC,
					T1.FINCCY,
					T1.FINDAYSCALTYPE,
					T1.FINACTYPE,
					T1.FINCONTINGENTACTYPE,
					T1.FINISGENREF,
					T1.FINMAXAMOUNT,
					T1.FINMINAMOUNT,
					T1.FINISOPENNEWFINAC,
					T1.FINISALWMD,
					T1.FINSCHDMTHD,
					T1.FINISALWGRACE,
					T1.EQUALREPAYMENT,
					T1.FINRATETYPE,
					T1.FINBASERATE,
					T1.FINSPLRATE,
					T1.FININTRATE,
					T1.FINMINRATE,
					T1.FINMAXRATE,
					T1.FINDFTINTFRQ,
					T1.FINISINTCPZ,
					T1.FINCPZFRQ,
					T1.FINISRVWALW,
					T1.FINRVWFRQ,
					T1.FINGRCRATETYPE,
					T1.FINGRCBASERATE,
					T1.FINGRCSPLRATE,
					T1.FINGRCINTRATE,
					T1.FINGRCMINRATE,
					T1.FINGRCMAXRATE,
					T1.FINGRCDFTINTFRQ,
					T1.FINGRCISINTCPZ,
					T1.FINGRCCPZFRQ,
					T1.FINGRCISRVWALW,
					T1.FINGRCRVWFRQ,
					T1.FINMINTERM,
					T1.FINMAXTERM,
					T1.FINDFTTERMS,
					T1.FINRPYFRQ,
					T1.FINREPAYMETHOD,
					T1.FINISALWDIFFERMENT,
					T1.FINMAXDIFFERMENT,
					T1.FINISACTIVE,
					T1.STEPFINANCE,
					T1.STEPPINGMANDATORY,
					T1.ALWMANUALSTEPS,
					T1.ALWDSTEPPOLICIES,
					T1.DFTSTEPPOLICY,
					T1.FINISDWPAYREQUIRED,
					T1.FINRVWRATEAPPLFOR,
					T1.FINALWRATECHANGEANYDATE,
					T1.FINISINTCPZATGRCEND,
					T1.FINSCHCALCODEONRVW,
					T1.ALWPLANDEFERMENT,
					T1.PLANDEFERCOUNT,
					T1.PFTPAYACTYPE,
					T1.FINISOPENPFTPAYACC,
					T1.FINISALWGRCREPAY,
					T1.FINGRCSCHDMTHD,
					T1.FINGRCMARGIN,
					T1.FINMARGIN,
					T1.FINCOMMITMENTREQ,
					T1.FINCOLLATERALREQ,
					T1.FINDEPRECIATIONREQ,
					T1.FINDEPRECIATIONFRQ,
					T1.FINBANKCONTINGENTACTYPE,
					T1.FINPROVISIONACTYPE,
					T1.ALLOWRIAINVESTMENT,
					T1.OVERRIDELIMIT,
					T1.LIMITREQUIRED,
					T1.FINCOMMITMENTOVRRIDE,
					T1.FINCOLLATERALOVRRIDE,
					T1.FINREPAYPFTONFRQ,
					T1.FINPFTUNCHANGED,
					T1.APPLYODPENALTY,
					T1.ODINCGRCDAYS,
					T1.ODCHARGETYPE,
					T1.ODGRACEDAYS,
					T1.ODCHARGECALON,
					T1.ODCHARGEAMTORPERC,
					T1.ODALLOWWAIVER,
					T1.ODMAXWAIVERPERC,
					T1.FINDIVISION,
					T3.DIVISIONCODEDESC LOVDESCFINDIVISIONNAME,
					T1.FINSUSPACTYPE,
					T1.PRODUCT,
					T1.STARTDATE,
					T1.ENDDATE,
					T1.ALLOWDOWNPAYPGM,
					T1.FINTYPEDESC LOVDESCPROMOFINTYPEDESC,
					T1.REMARKS,
					T4.POLICYDESC LOVDESCDFTSTEPPOLICYNAME,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.ALWADVANCERENT,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.ROLLOVERFINANCE,
					T1.ROLLOVERFRQ,
					T1.DOWNPAYRULE,
					T1.ALWMULTIPARTYDISB,
					T1.COLLATERALTYPE,
					T1.TDSAPPLICABLE,
					T5.RULECODE DOWNPAYRULECODE,
					T5.RULECODEDESC DOWNPAYRULEDESC,
					T1.APPLYGRCPRICING,
					T1.APPLYRPYPRICING,
					T6.RULECODE GRCPRICINGMETHODDESC,
					T7.RULECODE RPYPRICINGMETHODDESC,
					T1.DROPLINEOD,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T4.STEPTYPE DFTSTEPPOLICYTYPE,
					T1.MANUALSCHEDULE,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PFTDUESCHON,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.UNPLANEMIHLOCKPERIOD,
					T1.UNPLANEMICPZ,
					T1.REAGECPZ,
					T1.FDDLOCKPERIOD,
					T1.ALWDRPYMETHODS,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.ROUNDINGMODE,
					T1.ROUNDINGTARGET,
					T1.FREQUENCYDAYS,
					T1.QUICKDISB,
					T1.ALWREAGE,
					T1.ALWUNPLANEMIHOLIDAY,
					T1.ALWMAXDISBCHECKREQ,
					T1.PRODUCTCATEGORY,
					T1.RPYHIERARCHY,
					T1.DEVELOPERFINANCE,
					T3.ENTITYCODE LOVDESCENTITYCODE,
					T8.ENTITYDESC LOVDESCENTITYDESC,
					T1.COSTOFFUNDS,
					T1.CHEQUECAPTUREREQ,
					T1.FINLTVCHECK,
					T1.PARTIALLYSECURED,
					T1.ALWADVEMI,
					T1.ADVEMIMINTERMS,
					T1.ADVEMIMAXTERMS,
					T1.ADVEMIDFTTERMS,
					T1.ADVEMISCHDMTHD,
					T1.BPIPFTDAYSBASIS,
					T1.ELIGIBILITYMETHODS,
					T1.ALWHYBRIDRATE,
					T1.FIXEDRATETENOR,
					T1.ODMINCAPAMOUNT,
					T1.ODRULECODE,
					T1.ALWZEROINTACC,
					T1.FINISALWPARTIALRPY,
					T1.AUTOREJECTIONDAYS,
					T1.TAXNOMAND,
					T1.PUTCALLREQUIRED,
					T1.GRCADVINTERSETREQ,
					T1.GRCADVTYPE,
					T1.GRCADVMINTERMS,
					T1.GRCADVMAXTERMS,
					T1.GRCADVDEFAULTTERMS,
					T1.ADVINTERSETREQ,
					T1.ADVTYPE,
					T1.ADVMINTERMS,
					T1.ADVMAXTERMS,
					T1.ADVDEFAULTTERMS,
					T1.ADVSTAGE,
					T1.DSFREQ,
					T1.CASHCOLLATERALREQ,
					T1.ALWEARLYPAYMETHODS,
					T1.TDSALLOWTOMODIFY,
					T1.TDSAPPLICABLETO,
					T1.ALWVAN,
					T1.VANALLOCATIONMETHOD,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING,
					T1.ALWSANCTIONAMT,
					T1.ALWSANCTIONAMTOVERRIDE,
					T1.SANBSDSCHDLE,
					T1.FINISRATERVWATGRCEND,
					T1.SCHDONPMTCAL,
					T1.AUTOAPPROVE,
					T1.ALWPLANNEDEMIINGRC,
					T1.GRCADJREQ,
					T1.GRCPERIODAFTRFULLDISB,
					T1.AUTOINCRGRCENDDATE,
					T1.GRCAUTOINCRMONTHS,
					T1.MAXAUTOINCRALLOWED,
					T1.THRLDTOMAINTAINGRCPRD,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.BILLINGCHRGREQ,
					T1.BILLINGCHRGCODE,
					T1.EXTNSNODGRACEDAYS,
					T1.COLLECCHRGCODEID,
					T1.COLLECTIONAMT
				FROM RMTFINANCETYPES T1
				JOIN SMTDIVISIONDETAIL T3 ON T1.FINDIVISION = T3.DIVISIONCODE
				LEFT JOIN STEPPOLICYHEADER T4 ON T1.DFTSTEPPOLICY = T4.POLICYCODE
				LEFT JOIN RULES T5 ON T1.DOWNPAYRULE = T5.RULEID
				LEFT JOIN RULES T6 ON T1.GRCPRICINGMETHOD = T6.RULEID
				LEFT JOIN RULES T7 ON T1.RPYPRICINGMETHOD = T7.RULEID
				LEFT JOIN ENTITY T8 ON T3.ENTITYCODE = T8.ENTITYCODE
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#62.57_post" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rmtfinancetypes_orgview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#62.58_pre" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_aview');
		 	]]>
		</sql>
	</changeSet>

	<changeSet id="ST#62.58" author="sampath.d">
		<createView viewName="RMTFINANCETYPES_AVIEW" replaceIfExists="true">
		   <![CDATA[
				SELECT T1.FINTYPE,
					T1.FINCATEGORY,
					T1.FINTYPEDESC,
					T1.FINCCY,
					T1.FINDAYSCALTYPE,
					T1.FINACTYPE,
					T1.FINCONTINGENTACTYPE,
					T1.FINISGENREF,
					T1.FINMAXAMOUNT,
					T1.FINMINAMOUNT,
					T1.FINISOPENNEWFINAC,
					T1.FINDFTSTMTFRQ,
					T1.FINISALWMD,
					T1.FINSCHDMTHD,
					T1.FINISALWGRACE,
					T1.FINHISTRETENSION,
					T1.EQUALREPAYMENT,
					T1.FINRATETYPE,
					T1.FINBASERATE,
					T1.FINSPLRATE,
					T1.FININTRATE,
					T1.FINMINRATE,
					T1.FINMAXRATE,
					T1.FINDFTINTFRQ,
					T1.FINISINTCPZ,
					T1.FINCPZFRQ,
					T1.FINISRVWALW,
					T1.FINRVWFRQ,
					T1.FINGRCRATETYPE,
					T1.FINGRCBASERATE,
					T1.FINGRCSPLRATE,
					T1.FINGRCINTRATE,
					T1.FINGRCMINRATE,
					T1.FINGRCMAXRATE,
					T1.FINGRCDFTINTFRQ,
					T1.FINGRCISINTCPZ,
					T1.FINGRCCPZFRQ,
					T1.FINGRCISRVWALW,
					T1.FINGRCRVWFRQ,
					T1.FINMINTERM,
					T1.FINMAXTERM,
					T1.FINDFTTERMS,
					T1.FINRPYFRQ,
					T1.FINREPAYMETHOD,
					T1.FINISALWPARTIALRPY,
					T1.FINISALWDIFFERMENT,
					T1.FINMAXDIFFERMENT,
					T1.FINISALWEARLYRPY,
					T1.FINISALWEARLYSETTLE,
					T1.FINODRPYTRIES,
					T1.FINEARLYPAYRULE,
					T1.FINEARLYSETTLERULE,
					T1.FINDEPOSITRESTRICTEDTO,
					T1.FINAEBUYORINCEPTION,
					T1.FINAESELLORMATURITY,
					T1.FINISACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.STEPFINANCE,
					T1.STEPPINGMANDATORY,
					T1.ALWMANUALSTEPS,
					T1.ALWDSTEPPOLICIES,
					T1.DFTSTEPPOLICY,
					T4.ACTYPEDESC LOVDESCFINCONTINGENTACTYPENAME,
					T5.ACTYPEDESC LOVDESCFINACTYPENAME,
					T1.FINISDWPAYREQUIRED,
					T1.FINRVWRATEAPPLFOR,
					T1.FINALWRATECHANGEANYDATE,
					T1.FINISINTCPZATGRCEND,
					T1.FINELGRULECODE,
					T1.LIMITELGRULECODE,
					T1.FINSCHCALCODEONRVW,
					T1.ALWPLANDEFERMENT,
					T1.PLANDEFERCOUNT,
					T1.FINASSETTYPE,
					T1.PFTPAYACTYPE,
					T1.FINISOPENPFTPAYACC,
					T31.ACTYPEDESC LOVDESCPFTPAYACTYPENAME,
					T1.FINISALWGRCREPAY,
					T1.FINGRCSCHDMTHD,
					T1.FINGRCMARGIN,
					T1.FINMARGIN,
					T1.FINSCHEDULEON,
					T1.FINGRCSCHEDULEON,
					T1.FINCOMMITMENTREQ,
					T1.FINCOLLATERALREQ,
					T1.FINDEPRECIATIONREQ,
					T1.FINDEPRECIATIONFRQ,
					T1.FINBANKCONTINGENTACTYPE,
					T1.FINPROVISIONACTYPE,
					T38.ACTYPEDESC LOVDESCFINBANKCONTACTYPENAME,
					T39.ACTYPEDESC LOVDESCFINPROVISIONACTYPENAME,
					T1.ALLOWRIAINVESTMENT,
					T1.OVERRIDELIMIT,
					T1.LIMITREQUIRED,
					T1.FINCOMMITMENTOVRRIDE,
					T1.FINCOLLATERALOVRRIDE,
					T1.FINPFTUNCHANGED,
					T1.APPLYODPENALTY,
					T1.ODINCGRCDAYS,
					T1.ODCHARGETYPE,
					T1.ODGRACEDAYS,
					T1.ODCHARGECALON,
					T1.ODCHARGEAMTORPERC,
					T1.ODALLOWWAIVER,
					T1.ODMAXWAIVERPERC,
					T1.FINDIVISION,
					T48.DIVISIONCODEDESC LOVDESCFINDIVISIONNAME,
					T48.ENTITYCODE LOVDESCENTITYCODE,
					T1.FINSUSPACTYPE,
					T49.ACTYPEDESC LOVDESCFINSUSPACTYPENAME,
					T1.PRODUCT,
					T1.STARTDATE,
					T1.ENDDATE,
					T1.ALLOWDOWNPAYPGM,
					T1.REMARKS,
					T1.ALWEARLYPAYMETHODS,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.ALWADVANCERENT,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.ROLLOVERFINANCE,
					T1.ROLLOVERFRQ,
					T1.DOWNPAYRULE,
					T59.RULECODE DOWNPAYRULECODE,
					T59.RULECODEDESC DOWNPAYRULEDESC,
					T1.FINSUSPTRIGGER,
					T1.FINSUSPREMARKS,
					T1.ALWMULTIPARTYDISB,
					T1.COLLATERALTYPE,
					T1.TDSAPPLICABLE,
					T1.MANUALSCHEDULE,
					T1.APPLYGRCPRICING,
					T1.GRCPRICINGMETHOD,
					T1.APPLYRPYPRICING,
					T1.RPYPRICINGMETHOD,
					T1.RPYHIERARCHY,
					T67.RULECODE GRCPRICINGMETHODDESC,
					T68.RULECODE RPYPRICINGMETHODDESC,
					T1.DROPLINEOD,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.FINREPAYPFTONFRQ,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PFTDUESCHON,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.UNPLANEMIHLOCKPERIOD,
					T1.UNPLANEMICPZ,
					T1.REAGECPZ,
					T1.FDDLOCKPERIOD,
					T1.ALWDRPYMETHODS,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.ROUNDINGMODE,
					T1.ROUNDINGTARGET,
					T1.FREQUENCYDAYS,
					T1.QUICKDISB,
					T1.ALWREAGE,
					T1.ALWUNPLANEMIHOLIDAY,
					T1.ALWMAXDISBCHECKREQ,
					T1.FINTYPEDESC LOVDESCPROMOFINTYPEDESC,
					T1.PROFITCENTERID,
					T69.PROFITCENTERCODE,
					T69.PROFITCENTERDESC,
					T1.PRODUCTCATEGORY,
					T2.PRODUCTDESC FINCATEGORYDESC,
					T1.DEVELOPERFINANCE,
					T1.COSTOFFUNDS,
					T1.CHEQUECAPTUREREQ,
					T1.FINLTVCHECK,
					T1.PARTIALLYSECURED,
					T1.ALWADVEMI,
					T1.ADVEMIMINTERMS,
					T1.ADVEMIMAXTERMS,
					T1.ADVEMIDFTTERMS,
					T1.ADVEMISCHDMTHD,
					T1.BPIPFTDAYSBASIS,
					T1.ELIGIBILITYMETHODS,
					T1.ALWHYBRIDRATE,
					T1.FIXEDRATETENOR,
					T1.ODMINCAPAMOUNT,
					T1.ODRULECODE,
					T1.ALWZEROINTACC,
					T1.AUTOREJECTIONDAYS,
					T1.TAXNOMAND,
					T1.PUTCALLREQUIRED,
					T1.GRCADVINTERSETREQ,
					T1.GRCADVTYPE,
					T1.GRCADVMINTERMS,
					T1.GRCADVMAXTERMS,
					T1.GRCADVDEFAULTTERMS,
					T1.ADVINTERSETREQ,
					T1.ADVTYPE,
					T1.ADVMINTERMS,
					T1.ADVMAXTERMS,
					T1.ADVDEFAULTTERMS,
					T1.ADVSTAGE,
					T1.DSFREQ,
					T1.CASHCOLLATERALREQ,
					T1.TDSALLOWTOMODIFY,
					T1.TDSAPPLICABLETO,
					T1.ALWVAN,
					T1.VANALLOCATIONMETHOD,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING,
					T1.ALWSANCTIONAMT,
					T1.ALWSANCTIONAMTOVERRIDE,
					T1.SANBSDSCHDLE,
					T1.FINISRATERVWATGRCEND,
					T1.SCHDONPMTCAL,
					T1.AUTOAPPROVE,
					T1.ALWPLANNEDEMIINGRC,
					T1.GRCADJREQ,
					T1.GRCPERIODAFTRFULLDISB,
					T1.AUTOINCRGRCENDDATE,
					T1.GRCAUTOINCRMONTHS,
					T1.MAXAUTOINCRALLOWED,
					T1.THRLDTOMAINTAINGRCPRD,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.BILLINGCHRGREQ,
					T1.BILLINGCHRGCODE,
					T1.EXTNSNODGRACEDAYS,
					T1.COLLECCHRGCODEID,
					T1.COLLECTIONAMT
				FROM RMTFINANCETYPES T1
				LEFT JOIN BMTPRODUCT T2 ON T1.FINCATEGORY = T2.PRODUCTCODE
				LEFT JOIN RMTACCOUNTTYPES T4 ON T1.FINCONTINGENTACTYPE = T4.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T38 ON T1.FINBANKCONTINGENTACTYPE = T38.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T39 ON T1.FINPROVISIONACTYPE = T39.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T5 ON T1.FINACTYPE = T5.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T31 ON T1.PFTPAYACTYPE = T31.ACTYPE
				LEFT JOIN SMTDIVISIONDETAIL T48 ON T1.FINDIVISION = T48.DIVISIONCODE
				LEFT JOIN RMTACCOUNTTYPES T49 ON T1.FINSUSPACTYPE = T49.ACTYPE
				LEFT JOIN RULES T59 ON T1.DOWNPAYRULE = T59.RULEID
				LEFT JOIN RULES T67 ON T1.GRCPRICINGMETHOD = T67.RULEID
				LEFT JOIN RULES T68 ON T1.RPYPRICINGMETHOD = T68.RULEID
				LEFT JOIN PROFITCENTERS T69 ON T69.PROFITCENTERID = T1.PROFITCENTERID
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#62.58_post" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rmtfinancetypes_aview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#62.59" author="sampath.d">
		<addColumn tableName="FINODPENALTYRATES">
			<column name="ExtnsnODGraceDays" type="int" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#62.60" author="sampath.d">
		<addColumn tableName="FINODPENALTYRATES">
			<column name="CollecChrgCodeId" type="bigint" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#62.61" author="sampath.d">
		<addColumn tableName="FINODPENALTYRATES">
			<column name="CollectionAmt" type="decimal(18,0)" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#62.59.1" author="sampath.d">
		<addColumn tableName="FINODPENALTYRATES_TEMP">
			<column name="ExtnsnODGraceDays" type="int" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#62.60.1" author="sampath.d">
		<addColumn tableName="FINODPENALTYRATES_TEMP">
			<column name="CollecChrgCodeId" type="bigint" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#62.61.1" author="sampath.d">
		<addColumn tableName="FINODPENALTYRATES_TEMP">
			<column name="CollectionAmt" type="decimal(18,0)" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#62.59.2" author="sampath.d">
		<addColumn tableName="FINODPENALTYRATES_LOG">
			<column name="ExtnsnODGraceDays" type="int" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#62.60.2" author="sampath.d">
		<addColumn tableName="FINODPENALTYRATES_LOG">
			<column name="CollecChrgCodeId" type="bigint" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#62.61.2" author="sampath.d">
		<addColumn tableName="FINODPENALTYRATES_LOG">
			<column name="CollectionAmt" type="decimal(18,0)" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#62.62" author="sampath.d" >
		<sql>
			<![CDATA[	
				UPDATE FINODPENALTYRATES SET EXTNSNODGRACEDAYS=0;
				UPDATE FINODPENALTYRATES SET COLLECCHRGCODEID=0;
				UPDATE FINODPENALTYRATES SET COLLECTIONAMT=0;
				UPDATE FINODPENALTYRATES_TEMP SET EXTNSNODGRACEDAYS=0;
				UPDATE FINODPENALTYRATES_TEMP SET COLLECCHRGCODEID=0;
				UPDATE FINODPENALTYRATES_TEMP SET COLLECTIONAMT=0;
				UPDATE FINODPENALTYRATES_LOG SET EXTNSNODGRACEDAYS=0;
				UPDATE FINODPENALTYRATES_LOG SET COLLECCHRGCODEID=0;
				UPDATE FINODPENALTYRATES_LOG SET COLLECTIONAMT=0;					
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#62.63" author="sampath.d" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE FINODPENALTYRATES ADD CONSTRAINT DF_FODP_EXTNSNODGRACEDAYS DEFAULT 0 FOR EXTNSNODGRACEDAYS;
				ALTER TABLE FINODPENALTYRATES ADD CONSTRAINT DF_FODP_COLLECCHRGCODEID DEFAULT 0 FOR COLLECCHRGCODEID;
				ALTER TABLE FINODPENALTYRATES ADD CONSTRAINT DF_FODP_COLLECTIONAMT DEFAULT 0 FOR COLLECTIONAMT;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#62.63" author="sampath.d" dbms="postgresql, oracle">
		<addDefaultValue columnName="EXTNSNODGRACEDAYS" tableName="FINODPENALTYRATES" defaultValue="0" />
		<addDefaultValue columnName="COLLECCHRGCODEID" tableName="FINODPENALTYRATES" defaultValue="0" />
		<addDefaultValue columnName="COLLECTIONAMT" tableName="FINODPENALTYRATES" defaultValue="0" />
	</changeSet>
	
	<changeSet id="ST#62.64" author="sampath.d" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE FINODPENALTYRATES_TEMP ADD CONSTRAINT DF_FODP_T_EXTNSNODGRACEDAYS DEFAULT 0 FOR EXTNSNODGRACEDAYS;
				ALTER TABLE FINODPENALTYRATES_TEMP ADD CONSTRAINT DF_FODP_T_COLLECCHRGCODEID DEFAULT 0 FOR COLLECCHRGCODEID;
				ALTER TABLE FINODPENALTYRATES_TEMP ADD CONSTRAINT DF_FODP_T_COLLECTIONAMT DEFAULT 0 FOR COLLECTIONAMT;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#62.64" author="sampath.d" dbms="postgresql, oracle">
		<addDefaultValue columnName="EXTNSNODGRACEDAYS" tableName="FINODPENALTYRATES_TEMP" defaultValue="0" />
		<addDefaultValue columnName="COLLECCHRGCODEID" tableName="FINODPENALTYRATES_TEMP" defaultValue="0" />
		<addDefaultValue columnName="COLLECTIONAMT" tableName="FINODPENALTYRATES_TEMP" defaultValue="0" />
	</changeSet>
	
	<changeSet id="ST#62.65" author="sampath.d" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE FINODPENALTYRATES_LOG ADD CONSTRAINT DF_FODP_L_EXTNSNODGRACEDAYS DEFAULT 0 FOR EXTNSNODGRACEDAYS;
				ALTER TABLE FINODPENALTYRATES_LOG ADD CONSTRAINT DF_FODP_L_COLLECCHRGCODEID DEFAULT 0 FOR COLLECCHRGCODEID;
				ALTER TABLE FINODPENALTYRATES_LOG ADD CONSTRAINT DF_FODP_L_COLLECTIONAMT DEFAULT 0 FOR COLLECTIONAMT;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#62.65" author="sampath.d" dbms="postgresql, oracle">
		<addDefaultValue columnName="EXTNSNODGRACEDAYS" tableName="FINODPENALTYRATES_LOG" defaultValue="0" />
		<addDefaultValue columnName="COLLECCHRGCODEID" tableName="FINODPENALTYRATES_LOG" defaultValue="0" />
		<addDefaultValue columnName="COLLECTIONAMT" tableName="FINODPENALTYRATES_LOG" defaultValue="0" />
	</changeSet>
	
	<changeSet id="ST#62.66_pre" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finodpenaltyrates_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#62.66" author="sampath.d">
		<createView viewName="FINODPENALTYRATES_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FINREFERENCE,
					  FINEFFECTDATE,
					  APPLYODPENALTY,
					  ODINCGRCDAYS,
					  ODCHARGETYPE,
					  ODGRACEDAYS,
					  ODCHARGECALON,
					  ODCHARGEAMTORPERC,
					  ODALLOWWAIVER,
					  ODMAXWAIVERPERC,
					  ODRULECODE,
					  ODMINCAPAMOUNT,
		        	  ODTDSREQ,
		        	  EXTNSNODGRACEDAYS,
		        	  COLLECCHRGCODEID,
		        	  COLLECTIONAMT
					FROM FINODPENALTYRATES_TEMP
				     ]]>
		</createView>
	</changeSet>

	<changeSet id="ST#62.66_post" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finodpenaltyrates_tview');
			]]>
		</sql>
	</changeSet>


	<changeSet id="ST#62.67_pre" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finodpenaltyrates_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#62.67" author="sampath.d">
		<createView viewName="FINODPENALTYRATES_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FINREFERENCE,
					  FINEFFECTDATE,
					  APPLYODPENALTY,
					  ODINCGRCDAYS,
					  ODCHARGETYPE,
					  ODGRACEDAYS,
					  ODCHARGECALON,
					  ODCHARGEAMTORPERC,
					  ODALLOWWAIVER,
					  ODMAXWAIVERPERC,
					  ODRULECODE,
					  ODMINCAPAMOUNT,
		              ODTDSREQ,
		              EXTNSNODGRACEDAYS,
		        	  COLLECCHRGCODEID,
		        	  COLLECTIONAMT
				FROM FINODPENALTYRATES
				     ]]>
		</createView>
	</changeSet>

	<changeSet id="ST#62.67_post" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finodpenaltyrates_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#62.68_pre" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finodpenaltyrates_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#62.68" author="sampath.d">
		<createView viewName="FINODPENALTYRATES_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FINREFERENCE,
						FINEFFECTDATE,
						APPLYODPENALTY,
						ODINCGRCDAYS,
						ODCHARGETYPE,
						ODGRACEDAYS,
						ODCHARGECALON,
						ODCHARGEAMTORPERC,
						ODALLOWWAIVER,
						ODMAXWAIVERPERC,
						ODRULECODE,
						ODMINCAPAMOUNT,
						ODTDSREQ,
						EXTNSNODGRACEDAYS,
		        	 	COLLECCHRGCODEID,
		        	    COLLECTIONAMT
						FROM FINODPENALTYRATES_TEMP
						UNION
						SELECT FINREFERENCE,
						FINEFFECTDATE,
						APPLYODPENALTY,
						ODINCGRCDAYS,
						ODCHARGETYPE,
						ODGRACEDAYS,
						ODCHARGECALON,
						ODCHARGEAMTORPERC,
						ODALLOWWAIVER,
						ODMAXWAIVERPERC,
						ODRULECODE,
						ODMINCAPAMOUNT,
						ODTDSREQ,
						EXTNSNODGRACEDAYS,
		        	  	COLLECCHRGCODEID,
		        	  	COLLECTIONAMT
						FROM FINODPENALTYRATES
						WHERE NOT (EXISTS (SELECT 1 FROM FINODPENALTYRATES_TEMP
						WHERE FINREFERENCE = FINODPENALTYRATES.FINREFERENCE))
				     ]]>
		</createView>
	</changeSet>

	<changeSet id="ST#62.68_post" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finodpenaltyrates_view');
			]]>
		</sql>
	</changeSet>
	
		<changeSet id="ST#62.69" author="sampath.d">
		<sql>
			<![CDATA[
			     INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'FinanceMainDialog_extnsnODGraceDays', 'FinanceMainDialog', 1, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			     INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'FinanceMainDialog_collecChrgCode', 'FinanceMainDialog', 1, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			     INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'FinanceMainDialog_collectionAmt', 'FinanceMainDialog', 1, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			     
			     INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (Select GrpID from SecGroups where GrpCode = 'OD_ODMAINTENANCE_MAKER'), (Select RightID from SecRights where RightName = 'FinanceMainDialog_extnsnODGraceDays'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				 INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (Select GrpID from SecGroups where GrpCode = 'OD_ODMAINTENANCE_MAKER'), (Select RightID from SecRights where RightName = 'FinanceMainDialog_collecChrgCode'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				 INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (Select GrpID from SecGroups where GrpCode = 'OD_ODMAINTENANCE_MAKER'), (Select RightID from SecRights where RightName = 'FinanceMainDialog_collectionAmt'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				 
				 INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (Select GrpID from SecGroups where GrpCode = 'CL_ORIGINATION_MAKER'), (Select RightID from SecRights where RightName = 'FinanceMainDialog_extnsnODGraceDays'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				 INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (Select GrpID from SecGroups where GrpCode = 'CL_ORIGINATION_MAKER'), (Select RightID from SecRights where RightName = 'FinanceMainDialog_collecChrgCode'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				 INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (Select GrpID from SecGroups where GrpCode = 'CL_ORIGINATION_MAKER'), (Select RightID from SecRights where RightName = 'FinanceMainDialog_collectionAmt'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				 
				 INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (Select GrpID from SecGroups where GrpCode = 'FIN_MAINTAINBASIC_MAKER'), (Select RightID from SecRights where RightName = 'FinanceMainDialog_extnsnODGraceDays'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				 INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (Select GrpID from SecGroups where GrpCode = 'FIN_MAINTAINBASIC_MAKER'), (Select RightID from SecRights where RightName = 'FinanceMainDialog_collecChrgCode'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				 INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (Select GrpID from SecGroups where GrpCode = 'FIN_MAINTAINBASIC_MAKER'), (Select RightID from SecRights where RightName = 'FinanceMainDialog_collectionAmt'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				 INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (Select GrpID from SecGroups where GrpCode = 'BFSD_ORIGINATION_MAKER'), (Select RightID from SecRights where RightName = 'FinanceMainDialog_extnsnODGraceDays'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				 INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (Select GrpID from SecGroups where GrpCode = 'BFSD_ORIGINATION_MAKER'), (Select RightID from SecRights where RightName = 'FinanceMainDialog_collecChrgCode'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				 INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (Select GrpID from SecGroups where GrpCode = 'BFSD_ORIGINATION_MAKER'), (Select RightID from SecRights where RightName = 'FinanceMainDialog_collectionAmt'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				 INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (Select GrpID from SecGroups where GrpCode = 'CL_ORIGINATION_WRM'), (Select RightID from SecRights where RightName = 'FinanceMainDialog_extnsnODGraceDays'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				 INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (Select GrpID from SecGroups where GrpCode = 'CL_ORIGINATION_WRM'), (Select RightID from SecRights where RightName = 'FinanceMainDialog_collecChrgCode'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				 INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (Select GrpID from SecGroups where GrpCode = 'CL_ORIGINATION_WRM'), (Select RightID from SecRights where RightName = 'FinanceMainDialog_collectionAmt'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
              ]]>
		</sql>
    </changeSet>
    
    <!-- Re-presentment -->
	<changeSet id="ST#1927.01" author="sampath.d">
		<comment>Added bounce and lpp columns for Representment</comment>
		<addColumn tableName="PRESENTMENTHEADER">
			<column name="lppReq" type="boolean" defaultValueBoolean="false" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#1927.02" author="sampath.d">
		<addColumn tableName="PRESENTMENTHEADER">
			<column name="bounceReq" type="boolean" defaultValueBoolean="false" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#1927.03" author="sampath.d">
		<addColumn tableName="PRESENTMENTHEADER">
			<column name="approvedDate" type="DateTime" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#1927.04" author="sampath.d">
		<addColumn tableName="PRESENTMENTHEADER_TEMP">
			<column name="lppReq" type="boolean" defaultValueBoolean="false" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#1927.05" author="sampath.d">
		<addColumn tableName="PRESENTMENTHEADER_TEMP">
			<column name="bounceReq" type="boolean" defaultValueBoolean="false" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#1927.06" author="sampath.d">
		<addColumn tableName="PRESENTMENTHEADER_TEMP">
			<column name="approvedDate" type="DateTime" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#1927.07" author="sampath.d">
		<sql>
			UPDATE PRESENTMENTHEADER_TEMP SET LPPREQ=0 WHERE LPPREQ IS NULL;
			UPDATE PRESENTMENTHEADER SET LPPREQ=0 WHERE LPPREQ IS NULL;
			
			UPDATE PRESENTMENTHEADER_TEMP SET BOUNCEREQ=0 WHERE BOUNCEREQ IS NULL;
			UPDATE PRESENTMENTHEADER SET BOUNCEREQ=0 WHERE BOUNCEREQ IS NULL;
		</sql>
	</changeSet>
	<changeSet id="ST#1927.08_pre" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'presentmentheader_aview');
		 	]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#1927.08" author="sampath.d">
		<createView viewName="PRESENTMENTHEADER_AVIEW" replaceIfExists="true">
			<![CDATA[ 
				SELECT T1.ID, 
				T1.REFERENCE,
				T1.PRESENTMENTDATE, 
				T1.PARTNERBANKID, 
				T1.FROMDATE, 
				T1.TODATE,
				T1.STATUS, 
				T1.MANDATETYPE, 
				T1.EMANDATESOURCE, 
				T1.LOANTYPE, 
				T1.FINBRANCH, 
				T1.SCHDATE,
				T1.BANKCODE,
				T1.VERSION , 
				T1.LASTMNTBY, 
				T1.LASTMNTON,
				T1.RECORDSTATUS, 
				T1.ROLECODE,
				T1.NEXTROLECODE, 
				T1.TASKID, 
				T1.NEXTTASKID, 
				T1.RECORDTYPE,
				T1.WORKFLOWID,
				T1.DBSTATUSID, 
				T2.PARTNERBANKNAME,
				T2.PARTNERBANKCODE, 
				T2.ACCOUNTNO PARTNERACCTNUMBER,
				T2.ACTYPE PARTNERACCTTYPE,
				T1.IMPORTSTATUSID, 
				T1.TOTALRECORDS,
				T1.PROCESSEDRECORDS,
				T1.SUCCESSRECORDS,
				T1.FAILEDRECORDS,
				T3.BANKNAME,
				T1.ENTITYCODE, 
				T1.PRESENTMENTTYPE,
				T1.LPPREQ,
				T1.BOUNCEREQ,
				T1.APPROVEDDATE
			FROM PRESENTMENTHEADER T1
			LEFT JOIN PARTNERBANKS T2 ON T1.PARTNERBANKID = T2.PARTNERBANKID
			LEFT JOIN BMTBANKDETAIL T3 ON T3.BANKCODE = T1.BANKCODE
	   	 ]]>
		</createView>
	</changeSet>
	
	<changeSet id="ST#1927.08_post" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'presentmentheader_aview');
			]]>
		</sql>
	</changeSet>
	
    <changeSet id="ST#1927.09_pre" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'presentmentheader_view');
		 	]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#1927.09" author="sampath.d">
		<createView viewName="PRESENTMENTHEADER_VIEW" replaceIfExists="true">
		<![CDATA[ 
	SELECT T1.ID, 
				T1.REFERENCE,
				T1.PRESENTMENTDATE, 
				T1.PARTNERBANKID, 
				T1.FROMDATE, 
				T1.TODATE,
				T1.STATUS, 
				T1.MANDATETYPE, 
				T1.EMANDATESOURCE, 
				T1.LOANTYPE, 
				T1.FINBRANCH, 
				T1.SCHDATE,
				T1.BANKCODE,
				T1.VERSION , 
				T1.LASTMNTBY, 
				T1.LASTMNTON,
				T1.RECORDSTATUS, 
				T1.ROLECODE,
				T1.NEXTROLECODE, 
				T1.TASKID, 
				T1.NEXTTASKID, 
				T1.RECORDTYPE,
				T1.WORKFLOWID,
				T1.DBSTATUSID, 
				T2.PARTNERBANKNAME,
				T2.PARTNERBANKCODE, 
				T2.ACCOUNTNO PARTNERACCTNUMBER,
				T2.ACTYPE PARTNERACCTTYPE,
				T1.IMPORTSTATUSID, 
				T1.TOTALRECORDS,
				T1.PROCESSEDRECORDS,
				T1.SUCCESSRECORDS,
				T1.FAILEDRECORDS,
				T3.BANKNAME,
				T1.ENTITYCODE, 
				T1.PRESENTMENTTYPE,
				T1.LPPREQ,
				T1.BOUNCEREQ,
				T1.APPROVEDDATE
			FROM PRESENTMENTHEADER_TEMP T1
			LEFT JOIN PARTNERBANKS T2 ON T1.PARTNERBANKID = T2.PARTNERBANKID
			LEFT JOIN BMTBANKDETAIL T3 ON T3.BANKCODE = T1.BANKCODE
			UNION ALL
			SELECT T1.ID, 
				T1.REFERENCE,
				T1.PRESENTMENTDATE, 
				T1.PARTNERBANKID, 
				T1.FROMDATE, 
				T1.TODATE,
				T1.STATUS, 
				T1.MANDATETYPE, 
				T1.EMANDATESOURCE, 
				T1.LOANTYPE, 
				T1.FINBRANCH, 
				T1.SCHDATE,
				T1.BANKCODE,
				T1.VERSION , 
				T1.LASTMNTBY, 
				T1.LASTMNTON,
				T1.RECORDSTATUS, 
				T1.ROLECODE,
				T1.NEXTROLECODE, 
				T1.TASKID, 
				T1.NEXTTASKID, 
				T1.RECORDTYPE,
				T1.WORKFLOWID,
				T1.DBSTATUSID, 
				T2.PARTNERBANKNAME,
				T2.PARTNERBANKCODE, 
				T2.ACCOUNTNO PARTNERACCTNUMBER,
				T2.ACTYPE PARTNERACCTTYPE,
				T1.IMPORTSTATUSID, 
				T1.TOTALRECORDS,
				T1.PROCESSEDRECORDS,
				T1.SUCCESSRECORDS,
				T1.FAILEDRECORDS,
				T3.BANKNAME,
				T1.ENTITYCODE, 
				T1.PRESENTMENTTYPE,
				T1.LPPREQ,
				T1.BOUNCEREQ,
				T1.APPROVEDDATE
			FROM PRESENTMENTHEADER T1
			LEFT JOIN PARTNERBANKS T2 ON T1.PARTNERBANKID = T2.PARTNERBANKID
			LEFT JOIN BMTBANKDETAIL T3 ON T3.BANKCODE = T1.BANKCODE
			WHERE NOT EXISTS (SELECT 1 FROM PRESENTMENTHEADER_TEMP WHERE ID = T1.ID)
	    	]]>
		</createView>
	</changeSet>
	
	<changeSet id="ST#1927.09_post" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'presentmentheader_view');
			]]>
		</sql>
	</changeSet>
	
    <changeSet id="ST#1927.10" author="sampath.d">
		<addColumn tableName="PRESENTMENTDETAILS">
			<column name="LPPAMOUNT" type="decimal(18,0)" />
		</addColumn>
	</changeSet>
	
	 <changeSet id="ST#1927.11" author="sampath.d">
		<addColumn tableName="PRESENTMENTDETAILS">
			<column name="BOUNCEAMOUNT" type="decimal(18,0)" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#1927.12" author="sampath.d">
		<addColumn tableName="PRESENTMENTDETAILS_TEMP">
			<column name="LPPAMOUNT" type="decimal(18,0)" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#1927.13" author="sampath.d">
		<addColumn tableName="PRESENTMENTDETAILS_TEMP">
			<column name="BOUNCEAMOUNT" type="decimal(18,0)" />
		</addColumn>
	</changeSet>
	
		<changeSet id="ST#1927.14" author="sampath.d" >
		<sql>
			<![CDATA[	
				UPDATE PRESENTMENTDETAILS SET LPPAMOUNT=0;
				UPDATE PRESENTMENTDETAILS_TEMP SET LPPAMOUNT=0;
				UPDATE PRESENTMENTDETAILS SET BOUNCEAMOUNT=0;
				UPDATE PRESENTMENTDETAILS_TEMP SET BOUNCEAMOUNT=0;				
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#1927.15" author="sampath.d" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE PRESENTMENTDETAILS ADD CONSTRAINT DF_PD_LPPAMOUNT DEFAULT 0 FOR LPPAMOUNT;
				ALTER TABLE PRESENTMENTDETAILS ADD CONSTRAINT DF_PD_BOUNCEAMOUNT DEFAULT 0 FOR BOUNCEAMOUNT;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1927.15" author="sampath.d" dbms="postgresql, oracle">
		<addDefaultValue columnName="LPPAMOUNT" tableName="PRESENTMENTDETAILS" defaultValue="0" />
		<addDefaultValue columnName="BOUNCEAMOUNT" tableName="PRESENTMENTDETAILS" defaultValue="0" />
	</changeSet>
	
		<changeSet id="ST#1927.16" author="sampath.d" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE PRESENTMENTDETAILS_TEMP ADD CONSTRAINT DF_PD_T_LPPAMOUNT DEFAULT 0 FOR LPPAMOUNT;
				ALTER TABLE PRESENTMENTDETAILS_TEMP ADD CONSTRAINT DF_PD_T_BOUNCEAMOUNT DEFAULT 0 FOR BOUNCEAMOUNT;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1927.16" author="sampath.d" dbms="postgresql, oracle">
		<addDefaultValue columnName="LPPAMOUNT" tableName="PRESENTMENTDETAILS_TEMP" defaultValue="0" />
		<addDefaultValue columnName="BOUNCEAMOUNT" tableName="PRESENTMENTDETAILS_TEMP" defaultValue="0" />
	</changeSet>
	
	
	<changeSet id="ST#1927.17_pre" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'presentmentdetails_aview');
		 	]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#1927.17" author="sampath.d">
		<createView viewName="PRESENTMENTDETAILS_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ID, 
				T1.PRESENTMENTID, 
				T1.PRESENTMENTREF, 
				T1.FINREFERENCE, 
				T1.SCHDATE, 
				T1.MANDATEID, 
				T1.SCHAMTDUE, 
				T1.SCHPRIDUE, 
				T1.SCHPFTDUE, 
				T1.SCHFEEDUE,
				T1.SCHINSDUE, 
				T1.SCHPENALTYDUE, 
				T1.ADVANCEAMT, 
				T1.EXCESSID, 
				T1.ADVISEAMT, 
				T1.PRESENTMENTAMT, 
				T1.EXCLUDEREASON, 
				T1.TDSAMOUNT, 
				T1.BOUNCEID, 
				T1.EMINO, 
				T1.STATUS,
				T1.VERSION, 
				T1.LASTMNTBY, 
				T1.LASTMNTON,
				T1.RECORDSTATUS, 
				T1.ROLECODE, 
				T1.NEXTROLECODE, 
				T1.TASKID, 
				T1.NEXTTASKID, 
				T1.RECORDTYPE, 
				T1.WORKFLOWID, 
				T2.MANDATETYPE, 
				T3.FINTYPE,
				T4.FINTYPEDESC, 
				T5.CUSTSHRTNAME CUSTOMERNAME,
				T1.RECEIPTID, 
				T1.ECSRETURN, 
				T1.ERRORCODE, 
				T1.ERRORDESC, 
				T1.MANUALADVISEID,
				T1.CHARGES,
				T1.LPPAMOUNT, 
				T1.BOUNCEAMOUNT, 
				T7.BANKNAME
			FROM PRESENTMENTDETAILS T1 INNER JOIN
			MANDATES T2 ON T1.MANDATEID = T2.MANDATEID INNER JOIN
			FINANCEMAIN T3 ON T1.FINREFERENCE = T3.FINREFERENCE INNER JOIN
			RMTFINANCETYPES T4 ON T3.FINTYPE = T4.FINTYPE INNER JOIN
			CUSTOMERS T5 ON T5.CUSTID = T3.CUSTID LEFT OUTER JOIN
			BANKBRANCHES T6 ON T2.BANKBRANCHID = T6.BANKBRANCHID LEFT OUTER JOIN
			BMTBANKDETAIL T7 ON T6.BANKCODE=T7.BANKCODE
		]]>
		</createView>
	</changeSet>
	
	<changeSet id="ST#1927.17_post" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'presentmentdetails_aview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#1927.18_pre" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'presentmentdetails_view');
		 	]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#1927.18" author="sampath.d">
		<createView viewName="PRESENTMENTDETAILS_VIEW" replaceIfExists="true">
		<![CDATA[
	 	SELECT T1.ID, 
				T1.PRESENTMENTID, 
				T1.PRESENTMENTREF, 
				T1.FINREFERENCE, 
				T1.SCHDATE, 
				T1.MANDATEID, 
				T1.SCHAMTDUE, 
				T1.SCHPRIDUE, 
				T1.SCHPFTDUE, 
				T1.SCHFEEDUE,
				T1.SCHINSDUE, 
				T1.SCHPENALTYDUE, 
				T1.ADVANCEAMT, 
				T1.EXCESSID, 
				T1.ADVISEAMT, 
				T1.PRESENTMENTAMT, 
				T1.EXCLUDEREASON, 
				T1.TDSAMOUNT, 
				T1.BOUNCEID, 
				T1.EMINO, 
				T1.STATUS,
				T1.VERSION, 
				T1.LASTMNTBY, 
				T1.LASTMNTON,
				T1.RECORDSTATUS, 
				T1.ROLECODE, 
				T1.NEXTROLECODE, 
				T1.TASKID, 
				T1.NEXTTASKID, 
				T1.RECORDTYPE, 
				T1.WORKFLOWID, 
				T2.MANDATETYPE, 
				T3.FINTYPE,
				T4.FINTYPEDESC, 
				T5.CUSTSHRTNAME CUSTOMERNAME,
				T1.RECEIPTID, 
				T1.ECSRETURN, 
				T1.ERRORCODE, 
				T1.ERRORDESC, 
				T1.MANUALADVISEID,
				T1.CHARGES,
				T1.LPPAMOUNT, 
				T1.BOUNCEAMOUNT, 
				T7.BANKNAME
			FROM PRESENTMENTDETAILS_TEMP T1 INNER JOIN
			MANDATES T2 ON T1.MANDATEID = T2.MANDATEID INNER JOIN
			FINANCEMAIN T3 ON T1.FINREFERENCE = T3.FINREFERENCE INNER JOIN
			RMTFINANCETYPES T4 ON T3.FINTYPE = T4.FINTYPE INNER JOIN
			CUSTOMERS T5 ON T5.CUSTID = T3.CUSTID LEFT OUTER JOIN
			BANKBRANCHES T6 ON T2.BANKBRANCHID = T6.BANKBRANCHID LEFT OUTER JOIN
			BMTBANKDETAIL T7 ON T6.BANKCODE=T7.BANKCODE
	 		UNION ALL
	 		SELECT T1.ID, 
				T1.PRESENTMENTID, 
				T1.PRESENTMENTREF, 
				T1.FINREFERENCE, 
				T1.SCHDATE, 
				T1.MANDATEID, 
				T1.SCHAMTDUE, 
				T1.SCHPRIDUE, 
				T1.SCHPFTDUE, 
				T1.SCHFEEDUE,
				T1.SCHINSDUE, 
				T1.SCHPENALTYDUE, 
				T1.ADVANCEAMT, 
				T1.EXCESSID, 
				T1.ADVISEAMT, 
				T1.PRESENTMENTAMT, 
				T1.EXCLUDEREASON, 
				T1.TDSAMOUNT, 
				T1.BOUNCEID, 
				T1.EMINO, 
				T1.STATUS,
				T1.VERSION, 
				T1.LASTMNTBY, 
				T1.LASTMNTON,
				T1.RECORDSTATUS, 
				T1.ROLECODE, 
				T1.NEXTROLECODE, 
				T1.TASKID, 
				T1.NEXTTASKID, 
				T1.RECORDTYPE, 
				T1.WORKFLOWID, 
				T2.MANDATETYPE, 
				T3.FINTYPE,
				T4.FINTYPEDESC, 
				T5.CUSTSHRTNAME CUSTOMERNAME,
				T1.RECEIPTID, 
				T1.ECSRETURN, 
				T1.ERRORCODE, 
				T1.ERRORDESC, 
				T1.MANUALADVISEID,
				T1.CHARGES,
				T1.LPPAMOUNT, 
				T1.BOUNCEAMOUNT, 
				T7.BANKNAME
			FROM PRESENTMENTDETAILS T1 INNER JOIN
			MANDATES T2 ON T1.MANDATEID = T2.MANDATEID INNER JOIN
			FINANCEMAIN T3 ON T1.FINREFERENCE = T3.FINREFERENCE INNER JOIN
			RMTFINANCETYPES T4 ON T3.FINTYPE = T4.FINTYPE INNER JOIN
			CUSTOMERS T5 ON T5.CUSTID = T3.CUSTID LEFT OUTER JOIN
			BANKBRANCHES T6 ON T2.BANKBRANCHID = T6.BANKBRANCHID LEFT OUTER JOIN
			BMTBANKDETAIL T7 ON T6.BANKCODE=T7.BANKCODE
			WHERE NOT EXISTS (SELECT 1 FROM PRESENTMENTDETAILS_TEMP WHERE ID = T1.ID)
			]]>
		</createView>
	</changeSet>
	
	<changeSet id="ST#1927.18_post" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'presentmentdetails_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#1927.19_pre" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'presentmentdetails_pdcaview');
		 	]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#1927.19" author="sampath.d">
		<createView viewName="PRESENTMENTDETAILS_PDCAVIEW" replaceIfExists="true">
			<![CDATA[
			SELECT T1.ID, 
				T1.PRESENTMENTID, 
				T1.PRESENTMENTREF, 
				T1.FINREFERENCE, 
				T1.SCHDATE, 
				T1.MANDATEID, 
				T1.SCHAMTDUE, 
				T1.SCHPRIDUE, 
				T1.SCHPFTDUE, 
				T1.SCHFEEDUE, 
				T1.SCHINSDUE,
 				T1.SCHPENALTYDUE, 
 				T1.ADVANCEAMT, 
 				T1.EXCESSID, 
 				T1.ADVISEAMT, 
 				T1.PRESENTMENTAMT, 
 				T1.EXCLUDEREASON, 
 				T1.TDSAMOUNT, 
 				T1.BOUNCEID, 
 				T1.EMINO, 
 				T1.STATUS, 
 				T1.VERSION,
 				T1.LASTMNTBY, 
 				T1.LASTMNTON, 
 				T1.RECORDSTATUS, 
 				T1.ROLECODE, 
 				T1.NEXTROLECODE, 
 				T1.TASKID, 
 				T1.NEXTTASKID, 
 				T1.RECORDTYPE, 
 				T1.WORKFLOWID, 
 				T2.CHEQUETYPE MANDATETYPE,
 				T3.FINTYPE, 
 				T4.FINTYPEDESC, 
 				T5.CUSTSHRTNAME CUSTOMERNAME, 
 				T1.RECEIPTID, 
 				T1.ECSRETURN, 
 				T1.ERRORCODE, 
 				T1.ERRORDESC, 
 				T1.MANUALADVISEID,
 				T1.CHARGES,
 				T1.LPPAMOUNT, 
 				T1.BOUNCEAMOUNT, 
 				T7.BANKNAME
			FROM PRESENTMENTDETAILS T1 JOIN
			CHEQUEDETAIL T2 ON T2.CHEQUEDETAILSID = T1.MANDATEID JOIN
			FINANCEMAIN T3 ON T1.FINREFERENCE = T3.FINREFERENCE JOIN
			RMTFINANCETYPES T4 ON T3.FINTYPE = T4.FINTYPE JOIN
			CUSTOMERS T5 ON T5.CUSTID = T3.CUSTID LEFT OUTER JOIN
			BANKBRANCHES T6 ON T2.BANKBRANCHID = T6.BANKBRANCHID LEFT OUTER JOIN
			BMTBANKDETAIL T7 ON T6.BANKCODE=T7.BANKCODE
	   	 ]]>
		</createView>
	</changeSet>
	
	<changeSet id="ST#1927.19_post" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'presentmentdetails_pdcaview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#1927.20_pre" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'presentmentdetails_pdcview');
		 	]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#1927.20" author="sampath.d">
		<createView viewName="PRESENTMENTDETAILS_PDCVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ID, 
				T1.PRESENTMENTID, 
				T1.PRESENTMENTREF, 
				T1.FINREFERENCE, 
				T1.SCHDATE, 
				T1.MANDATEID, 
				T1.SCHAMTDUE, 
				T1.SCHPRIDUE, 
				T1.SCHPFTDUE, 
				T1.SCHFEEDUE, 
				T1.SCHINSDUE,
				T1.SCHPENALTYDUE, 
				T1.ADVANCEAMT, 
				T1.EXCESSID, 
				T1.ADVISEAMT, 
				T1.PRESENTMENTAMT, 
				T1.EXCLUDEREASON, 
				T1.TDSAMOUNT, 
				T1.BOUNCEID, 
				T1.EMINO, 
				T1.STATUS, 
				T1.VERSION,
				T1.LASTMNTBY, 
				T1.LASTMNTON, 
				T1.RECORDSTATUS, 
				T1.ROLECODE, 
				T1.NEXTROLECODE, 
				T1.TASKID, 
				T1.NEXTTASKID, 
				T1.RECORDTYPE, 
				T1.WORKFLOWID, 
				T2.CHEQUETYPE MANDATETYPE,
				T3.FINTYPE, 
				T4.FINTYPEDESC, 
				T5.CUSTSHRTNAME CUSTOMERNAME, 
				T1.RECEIPTID, 
				T1.ECSRETURN, 
				T1.ERRORCODE, 
				T1.ERRORDESC, 
				T1.MANUALADVISEID,
				T1.CHARGES,
				T1.LPPAMOUNT, 
				T1.BOUNCEAMOUNT,
				T7.BANKNAME
			FROM PRESENTMENTDETAILS_TEMP T1 
			JOIN CHEQUEDETAIL T2 ON	T2.CHEQUEDETAILSID = T1.MANDATEID 
			JOIN FINANCEMAIN T3 ON T1.FINREFERENCE = T3.FINREFERENCE 
			JOIN RMTFINANCETYPES T4 ON T3.FINTYPE = T4.FINTYPE 
			JOIN CUSTOMERS T5 ON T5.CUSTID = T3.CUSTID 
			LEFT OUTER JOIN BANKBRANCHES T6 ON T2.BANKBRANCHID = T6.BANKBRANCHID
			LEFT OUTER JOIN BMTBANKDETAIL T7 ON T6.BANKCODE=T7.BANKCODE
			UNION ALL
			SELECT T1.ID, 
				T1.PRESENTMENTID, 
				T1.PRESENTMENTREF, 
				T1.FINREFERENCE, 
				T1.SCHDATE, 
				T1.MANDATEID, 
				T1.SCHAMTDUE, 
				T1.SCHPRIDUE, 
				T1.SCHPFTDUE, 
				T1.SCHFEEDUE, 
				T1.SCHINSDUE,
				T1.SCHPENALTYDUE, 
				T1.ADVANCEAMT, 
				T1.EXCESSID, 
				T1.ADVISEAMT, 
				T1.PRESENTMENTAMT, 
				T1.EXCLUDEREASON, 
				T1.TDSAMOUNT, 
				T1.BOUNCEID, 
				T1.EMINO, 
				T1.STATUS, 
				T1.VERSION,
				T1.LASTMNTBY, 
				T1.LASTMNTON, 
				T1.RECORDSTATUS, 
				T1.ROLECODE, 
				T1.NEXTROLECODE, 
				T1.TASKID, 
				T1.NEXTTASKID, 
				T1.RECORDTYPE, 
				T1.WORKFLOWID, 
				T2.CHEQUETYPE MANDATETYPE,
				T3.FINTYPE, 
				T4.FINTYPEDESC, 
				T5.CUSTSHRTNAME CUSTOMERNAME, 
				T1.RECEIPTID, 
				T1.ECSRETURN, 
				T1.ERRORCODE, 
				T1.ERRORDESC, 
				T1.MANUALADVISEID,
				T1.CHARGES,
				T1.LPPAMOUNT, 
				T1.BOUNCEAMOUNT,
				T7.BANKNAME
			FROM PRESENTMENTDETAILS T1 
			JOIN CHEQUEDETAIL T2 ON	T2.CHEQUEDETAILSID = T1.MANDATEID 
			JOIN FINANCEMAIN T3 ON T1.FINREFERENCE = T3.FINREFERENCE 
			JOIN RMTFINANCETYPES T4 ON T3.FINTYPE = T4.FINTYPE 
			JOIN CUSTOMERS T5 ON T5.CUSTID = T3.CUSTID 
			LEFT OUTER JOIN BANKBRANCHES T6 ON T2.BANKBRANCHID = T6.BANKBRANCHID
			LEFT OUTER JOIN BMTBANKDETAIL T7 ON T6.BANKCODE=T7.BANKCODE
			WHERE NOT (EXISTS ( SELECT 1 FROM PRESENTMENTDETAILS_TEMP WHERE PRESENTMENTDETAILS_TEMP.ID = T1.ID))
	    ]]>
		</createView>
	</changeSet>
	
	<changeSet id="ST#1927.20_post" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'presentmentdetails_pdcview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#62.69.1" author="sampath.d">
		<comment>Sequence For Limit Block</comment>
		<createSequence sequenceName="SEQ_LIMIT_BLOCK" incrementBy="1" startValue="1" minValue="1"
			maxValue="999999999999999999" />
	</changeSet>
	
	<changeSet id="ST#62.70" author="sampath.d">
		<createTable tableName="LIMITBLOCK">
			<column name="Id" type="bigint">
				<constraints primaryKey="true" /> 
			</column>
			<column name="CustId" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="FinReference" type="Varchar2(20)">
				<constraints nullable="false" />
			</column>
			<column name="BlockingStatus" type="boolean">
				<constraints nullable="false" />
			</column>
			<column name="ReservedAmt" type="decimal(18,0)">
				<constraints nullable="false" />
			</column>
			<column name="ActualAmt" type="decimal(18,0)">
				<constraints nullable="false" />
			</column>
			<column name="Version" type="int" />
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkFlowId" type="bigint" />
		</createTable>
	</changeSet>
	
	<changeSet id="ST#62.71" author="sampath.d">
		<createTable tableName="LIMITBLOCK_TEMP">
			<column name="Id" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="CustId" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="FinReference" type="Varchar2(20)">
				<constraints nullable="false" />
			</column>
			<column name="BlockingStatus" type="boolean">
				<constraints nullable="false" />
			</column>
			<column name="ReservedAmt" type="decimal(18,0)">
				<constraints nullable="false" />
			</column>
			<column name="ActualAmt" type="decimal(18,0)">
				<constraints nullable="false" />
			</column>
			<column name="Version" type="int" />
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkFlowId" type="bigint" />
		</createTable>
	</changeSet>
	
	<changeSet id="ST#62.72" author="sampath.d" >
		<sql>
			<![CDATA[	
				UPDATE LIMITBLOCK SET CUSTID=0;
				UPDATE LIMITBLOCK SET BLOCKINGSTATUS=0;
				UPDATE LIMITBLOCK SET RESERVEDAMT=0;
				UPDATE LIMITBLOCK SET ACTUALAMT=0;
				UPDATE LIMITBLOCK_TEMP SET CUSTID=0;
				UPDATE LIMITBLOCK_TEMP SET BLOCKINGSTATUS=0;
				UPDATE LIMITBLOCK_TEMP SET RESERVEDAMT=0;
				UPDATE LIMITBLOCK_TEMP SET ACTUALAMT=0;
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#62.73" author="sampath.d" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE LIMITBLOCK ADD CONSTRAINT DF_LB_CUSTID DEFAULT 0 FOR CUSTID;
				ALTER TABLE LIMITBLOCK ADD CONSTRAINT DF_LB_BLOCKINGSTATUS DEFAULT 0 FOR BLOCKINGSTATUS;
				ALTER TABLE LIMITBLOCK ADD CONSTRAINT DF_LB_RESERVEDAMT DEFAULT 0 FOR RESERVEDAMT;
				ALTER TABLE LIMITBLOCK ADD CONSTRAINT DF_LB_ACTUALAMT DEFAULT 0 FOR ACTUALAMT;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#62.73" author="sampath.d" dbms="postgresql, oracle">
		<addDefaultValue columnName="CUSTID" tableName="LIMITBLOCK" defaultValue="0" />
		<addDefaultValue columnName="BLOCKINGSTATUS" tableName="LIMITBLOCK" defaultValue="0" />
		<addDefaultValue columnName="RESERVEDAMT" tableName="LIMITBLOCK" defaultValue="0" />
		<addDefaultValue columnName="ACTUALAMT" tableName="LIMITBLOCK" defaultValue="0" />
	</changeSet>
	
	<changeSet id="ST#62.74" author="sampath.d" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE LIMITBLOCK_TEMP ADD CONSTRAINT DF_LB_T_CUSTID DEFAULT 0 FOR CUSTID;
				ALTER TABLE LIMITBLOCK_TEMP ADD CONSTRAINT DF_LB_T_BLOCKINGSTATUS DEFAULT 0 FOR BLOCKINGSTATUS;
				ALTER TABLE LIMITBLOCK_TEMP ADD CONSTRAINT DF_LB_T_RESERVEDAMT DEFAULT 0 FOR RESERVEDAMT;
				ALTER TABLE LIMITBLOCK_TEMP ADD CONSTRAINT DF_LB_T_ACTUALAMT DEFAULT 0 FOR ACTUALAMT;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#62.74" author="sampath.d" dbms="postgresql, oracle">
		<addDefaultValue columnName="CUSTID" tableName="LIMITBLOCK_TEMP" defaultValue="0" />
		<addDefaultValue columnName="BLOCKINGSTATUS" tableName="LIMITBLOCK_TEMP" defaultValue="0" />
		<addDefaultValue columnName="RESERVEDAMT" tableName="LIMITBLOCK_TEMP" defaultValue="0" />
		<addDefaultValue columnName="ACTUALAMT" tableName="LIMITBLOCK_TEMP" defaultValue="0" />
	</changeSet>
	
	<changeSet id="ST#62.75_pre" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'limitblock_view');
			]]>
		</sql>
	</changeSet>
	 
	<changeSet id="ST#62.75" author="sampath.d">
	  <createView viewName="LIMITBLOCK_VIEW" replaceIfExists="true">
		    <![CDATA[
					SELECT T1.ID, 
                        T1.CUSTID,
						T2.CUSTCIF,
                        T1.FINREFERENCE,
                        T1.BLOCKINGSTATUS,
                        T1.RESERVEDAMT,
                        T1.ACTUALAMT,
                        T1.VERSION,
                        T1.LASTMNTBY,
                        T1.LASTMNTON,
                        T1.RECORDSTATUS,
                        T1.ROLECODE,
                        T1.NEXTROLECODE,
                        T1.TASKID,
                        T1.NEXTTASKID,
                        T1.RECORDTYPE,
                        T1.WORKFLOWID
                    FROM LIMITBLOCK_TEMP T1
					INNER JOIN CUSTOMERS T2 ON T1.CustID = T2.CustID 
					UNION ALL
                    SELECT T1.ID,
                        T1.CUSTID,
						T2.CUSTCIF,
                        T1.FINREFERENCE,
                        T1.BLOCKINGSTATUS,
                        T1.RESERVEDAMT,
                        T1.ACTUALAMT,
                        T1.VERSION,
                        T1.LASTMNTBY,
                        T1.LASTMNTON,
                        T1.RECORDSTATUS,
                        T1.ROLECODE,
                        T1.NEXTROLECODE,
                        T1.TASKID,
                        T1.NEXTTASKID,
                        T1.RECORDTYPE,
                        T1.WORKFLOWID
                    FROM LIMITBLOCK T1
					INNER JOIN CUSTOMERS T2 ON T1.CustID = T2.CustID
					WHERE NOT (EXISTS ( SELECT 1 AS EXPR1 FROM LIMITBLOCK_TEMP
					WHERE LIMITBLOCK_TEMP.FINREFERENCE = T1.FINREFERENCE))
				  ]]>	
	   </createView>
     </changeSet>
	
	<changeSet id="ST#62.75_post" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'limitblock_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#62.76" author="kavya.n">
		 <createTable tableName="OD_Settlement_Request">
			<column name="Id" type="bigint" autoIncrement="true">
				<constraints nullable="false"/>
			</column>
			<column name="RequestBatchId" type="bigint" />
			<column name="ODSettlementRef" type="varchar(20)">
				<constraints nullable="false"/>
			</column>
			<column name="TerminalId" type="varchar(20)" />
			<column name="MerchantName" type="varchar(50)" />
			<column name="CustomerId" type="bigint" />
			<column name="TxnId" type="bigint" />
			<column name="TxnDate" type="datetime" />
			<column name="TxnType" type="varchar(20)" />
			<column name="Reference" type="varchar(20)" />
			<column name="Currency" type="varchar(20)" />
			<column name="Amount" type="decimal(18, 0)" />
		 </createTable>
	 </changeSet>
	 
	 <changeSet id="ST#62.77" author="kavya.n">
		<addPrimaryKey tableName="OD_Settlement_Request" constraintName="PK_OD_SETTLEMENT_REQUEST"
			columnNames="Id" />
	</changeSet>
	
	<changeSet id="ST#62.78" author="kavya.n">
		<sql>
			<![CDATA[
			    DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='OD_SETTLEMENT_REQUEST_UPLOAD');
				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='OD_SETTLEMENT_REQUEST_UPLOAD');
				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='OD_SETTLEMENT_REQUEST_UPLOAD';
				
				DELETE FROM DATA_ENGINE_COLUMN where TABLEID IN (select ID from DATA_ENGINE_TABLE WHERE CONFIGID = (select ID from DATA_ENGINE_CONFIG where Name = 'OD_SETTLEMENT_REQUEST_UPLOAD'));
				DELETE FROM DATA_ENGINE_TABLE where CONFIGID IN (select ID from DATA_ENGINE_CONFIG where Name = 'OD_SETTLEMENT_REQUEST_UPLOAD');
				DELETE FROM DATA_ENGINE_CONFIG where Name = 'OD_SETTLEMENT_REQUEST_UPLOAD';
			
				INSERT INTO DATA_ENGINE_CONFIG VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG), 'OD_SETTLEMENT_REQUEST_UPLOAD', 'OD Settlement process upload', 12, 'ODSettlementProcess', NULL, NULL, NULL , 0, 0, NULL, 'TerminalId, MerchantName, CustomerId, TxnId, TxnDate, TxnType, Reference, Currency, Amount, ODSettlementRef', '', 'C', '/opt/Mahindra_8088/PFF/BASE/UploadODSettlementProcess', 'ODSettlement_', '.xls', 0, NULL, '${ddMMYYYYHms}', NULL, 0, NULL, 1, 1); 
				INSERT INTO DATA_ENGINE_TABLE  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'OD_SETTLEMENT_REQUEST_UPLOAD'), 'OD_SETTLEMENT_UPLOAD',  0, 'ID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 0, 0, 0);

				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'OD_SETTLEMENT_UPLOAD' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'OD_SETTLEMENT_REQUEST_UPLOAD')), 'TerminalId', 0, 'N', NULL, NULL, NULL, NULL, 0, NULL, NULL, NULL, NULL, 'O');	
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'OD_SETTLEMENT_UPLOAD' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'OD_SETTLEMENT_REQUEST_UPLOAD')), 'MerchantName', 0, 'N', NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'OD_SETTLEMENT_UPLOAD' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'OD_SETTLEMENT_REQUEST_UPLOAD')), 'CustomerId', 0, 'N', NULL, NULL, NULL, NULL, 2, NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'OD_SETTLEMENT_UPLOAD' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'OD_SETTLEMENT_REQUEST_UPLOAD')), 'TxnId', 0, 'N', NULL, NULL, NULL, NULL, 3, NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'OD_SETTLEMENT_UPLOAD' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'OD_SETTLEMENT_REQUEST_UPLOAD')), 'TxnDate', 0, 'N', NULL, NULL, NULL, NULL, 4, NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'OD_SETTLEMENT_UPLOAD' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'OD_SETTLEMENT_REQUEST_UPLOAD')), 'TxnType', 0, 'N', NULL, NULL, NULL, NULL, 5, NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'OD_SETTLEMENT_UPLOAD' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'OD_SETTLEMENT_REQUEST_UPLOAD')), 'Reference', 0, 'N', NULL, NULL, NULL, NULL, 6, NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'OD_SETTLEMENT_UPLOAD' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'OD_SETTLEMENT_REQUEST_UPLOAD')), 'Currency', 0, 'N', NULL, NULL, NULL, NULL, 7, NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'OD_SETTLEMENT_UPLOAD' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'OD_SETTLEMENT_REQUEST_UPLOAD')), 'Amount', 0, 'N', NULL, NULL, NULL, NULL, 8, NULL, NULL, NULL, NULL, 'O');
				INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN), (Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'OD_SETTLEMENT_UPLOAD' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'OD_SETTLEMENT_REQUEST_UPLOAD')), 'ODSettlementRef', 0, 'N', NULL, NULL, NULL, NULL, 9, NULL, NULL, NULL, NULL, 'M');
				
				UPDATE SEQ_DATA_ENGINE_CONFIG SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_CONFIG);
				UPDATE SEQ_DATA_ENGINE_TABLE  SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_TABLE);
				UPDATE SEQ_DATA_ENGINE_COLUMN SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_COLUMN);
			]]>
		</sql>
	</changeSet>
	 
	<changeSet id="ST#62.79" author="kavya.n">
	<sql>
			<![CDATA[
			    DELETE FROM DATA_ENGINE_LOG WHERE STATUSID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='OD_SETTLEMENT_REQUEST_DOWNLOAD');
				DELETE FROM DATA_ENGINE_DOWNLOAD_HISTORY WHERE ID IN (SELECT ID FROM DATA_ENGINE_STATUS WHERE NAME ='OD_SETTLEMENT_REQUEST_DOWNLOAD');
				DELETE FROM DATA_ENGINE_STATUS WHERE NAME ='OD_SETTLEMENT_REQUEST_DOWNLOAD';
			
				DELETE FROM DATA_ENGINE_COLUMN where TABLEID IN (select ID from DATA_ENGINE_TABLE WHERE CONFIGID = (select ID from DATA_ENGINE_CONFIG where Name = 'OD_SETTLEMENT_REQUEST_DOWNLOAD'));
				DELETE FROM DATA_ENGINE_TABLE where CONFIGID IN (select ID from DATA_ENGINE_CONFIG where Name = 'OD_SETTLEMENT_REQUEST_DOWNLOAD');
				DELETE FROM DATA_ENGINE_CONFIG where Name = 'OD_SETTLEMENT_REQUEST_DOWNLOAD';
			
				Insert into  DATA_ENGINE_CONFIG  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM  DATA_ENGINE_CONFIG),'OD_SETTLEMENT_REQUEST_DOWNLOAD','OD Settlement Process Download',3,null,null,null,',',0,0, null, 'ROW:{TERMINALID,MERCHANTNAME,CUSTID,TXNID,TXNDATE,TXNTYPE,REFERENCE,CURRENCY,AMOUNT,ODSETTLEMENTREF}',null,'A','/opt/Mahindra_8088/PFF/BASE/DownloadSettlementProcess','${OD_SETTLEMENT_PROCESS}','.xlsx',0, NULL,'${ddmm},.${SEQ_DATE_FILE}',null,'0','MOVE_TO_S3_BUCKET,COPY_TO_SFTP',1,1);
				Insert into  DATA_ENGINE_TABLE values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM  DATA_ENGINE_TABLE),(Select Id FROM  DATA_ENGINE_CONFIG WHERE Name = 'OD_SETTLEMENT_REQUEST_DOWNLOAD'),'OD_SETTLEMENT_REQUEST',0,'ID','REQUESTBATCHID IN (:REQUESTBATCHID)','',null,null,null,null,null,0,0,0);
				
				Insert into  DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM  DATA_ENGINE_COLUMN), (Select Id FROM  DATA_ENGINE_TABLE WHERE Name = 'OD_SETTLEMENT_REQUEST' and CONFIGID = (Select Id FROM  DATA_ENGINE_CONFIG WHERE Name = 'OD_SETTLEMENT_REQUEST_DOWNLOAD')), 'TERMINALID', 0,'N',null,'',  null,null,'0',null,null,null,null,'O');
				Insert into  DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM  DATA_ENGINE_COLUMN), (Select Id FROM  DATA_ENGINE_TABLE WHERE Name = 'OD_SETTLEMENT_REQUEST' and CONFIGID = (Select Id FROM  DATA_ENGINE_CONFIG WHERE Name = 'OD_SETTLEMENT_REQUEST_DOWNLOAD')),  'MERCHANTNAME', 0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into  DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM  DATA_ENGINE_COLUMN), (Select Id FROM  DATA_ENGINE_TABLE WHERE Name = 'OD_SETTLEMENT_REQUEST' and CONFIGID = (Select Id FROM  DATA_ENGINE_CONFIG WHERE Name = 'OD_SETTLEMENT_REQUEST_DOWNLOAD')),  'CUSTOMERID', 0,'N',null,'',  null,null,'0',null,null,null,null,'O');
				Insert into  DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM  DATA_ENGINE_COLUMN), (Select Id FROM  DATA_ENGINE_TABLE WHERE Name = 'OD_SETTLEMENT_REQUEST' and CONFIGID = (Select Id FROM  DATA_ENGINE_CONFIG WHERE Name = 'OD_SETTLEMENT_REQUEST_DOWNLOAD')), 'TXNID', 0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into  DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM  DATA_ENGINE_COLUMN), (Select Id FROM  DATA_ENGINE_TABLE WHERE Name = 'OD_SETTLEMENT_REQUEST' and CONFIGID = (Select Id FROM  DATA_ENGINE_CONFIG WHERE Name = 'OD_SETTLEMENT_REQUEST_DOWNLOAD')),  'TXNDATE', 0,'N',null,'',  null,null,'0',null,null,null,null,'O');
				Insert into  DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM  DATA_ENGINE_COLUMN), (Select Id FROM  DATA_ENGINE_TABLE WHERE Name = 'OD_SETTLEMENT_REQUEST' and CONFIGID = (Select Id FROM  DATA_ENGINE_CONFIG WHERE Name = 'OD_SETTLEMENT_REQUEST_DOWNLOAD')), 'TXNTYPE', 0,'N',null,null,  null,null,'0',null,null,null,null,'O');
				Insert into  DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM  DATA_ENGINE_COLUMN), (Select Id FROM  DATA_ENGINE_TABLE WHERE Name = 'OD_SETTLEMENT_REQUEST' and CONFIGID = (Select Id FROM  DATA_ENGINE_CONFIG WHERE Name = 'OD_SETTLEMENT_REQUEST_DOWNLOAD')), 'REFERENCE', 0,'N',null,'',  null,null,'0',null,null,null,null,'O');
				Insert into  DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM  DATA_ENGINE_COLUMN), (Select Id FROM  DATA_ENGINE_TABLE WHERE Name = 'OD_SETTLEMENT_REQUEST' and CONFIGID = (Select Id FROM  DATA_ENGINE_CONFIG WHERE Name = 'OD_SETTLEMENT_REQUEST_DOWNLOAD')), 'CURRENCY', 0,'N',null,'',  null,null,'0',null,null,null,null,'O');
				Insert into  DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM  DATA_ENGINE_COLUMN), (Select Id FROM  DATA_ENGINE_TABLE WHERE Name = 'OD_SETTLEMENT_REQUEST' and CONFIGID = (Select Id FROM  DATA_ENGINE_CONFIG WHERE Name = 'OD_SETTLEMENT_REQUEST_DOWNLOAD')), 'AMOUNT', 0,'N',null,'',  null,null,'0',null,null,null,null,'O');
				Insert into  DATA_ENGINE_COLUMN  values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM  DATA_ENGINE_COLUMN), (Select Id FROM  DATA_ENGINE_TABLE WHERE Name = 'OD_SETTLEMENT_REQUEST' and CONFIGID = (Select Id FROM  DATA_ENGINE_CONFIG WHERE Name = 'OD_SETTLEMENT_REQUEST_DOWNLOAD')), 'ODSETTLEMENTREF', 0,'N',null,'',  null,null,'0',null,null,null,null,'O');
			]]>
	</sql>
    </changeSet>
    
    <changeSet id="ST#62.80" author="kavya.n">
		<sql>
			<![CDATA[
				
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),0, 'menuItem_OD_Settlement_Process_Upload','MENU',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				
				INSERT INTO SecGroups Values ((Select MAX(GrpID)+1 From SecGroups), 'OD_SETTLEMENTPROCESS_UPLOAD_MAKER', 'Group for od settlement process upload maker', 		1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL,NULL, 0);
				INSERT INTO SecGroups Values ((Select MAX(GrpID)+1 From SecGroups), 'OD_SETTLEMENTPROCESS_UPLOAD_APPROVER', 'Group for od settlement process upload approver', 	1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL,NULL, 0);
				
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'OD_SETTLEMENTPROCESS_UPLOAD_MAKER'), (Select RightID from SecRights where RightName = 'menuItem_OD_Settlement_Process_Upload'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'OD_SETTLEMENTPROCESS_UPLOAD_APPROVER'), (Select RightID from SecRights where RightName = 'menuItem_OD_Settlement_Process_Upload'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'REPORTS_ADMIN'), (Select RightID from SecRights where RightName = 'menuItem_OD_Settlement_Process_Upload'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#62.81" author="kavya.n">
		<sql>
			<![CDATA[
			
			    INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights),0, 'menuItem_OD_Settlement_Process_Download','MENU',0,1000,current_timestamp,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				
				INSERT INTO SecGroups Values ((Select MAX(GrpID)+1 From SecGroups), 'OD_SETTLEMENTPROCESS_DOWNLOAD_MAKER', 'Group for od settlement process download maker', 		1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL,NULL, 0);
				INSERT INTO SecGroups Values ((Select MAX(GrpID)+1 From SecGroups), 'OD_SETTLEMENTPROCESS_DOWNLOAD_APPROVER', 'Group for od settlement process download approver', 	1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL,NULL, 0);
				
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'OD_SETTLEMENTPROCESS_DOWNLOAD_MAKER'), (Select RightID from SecRights where RightName = 'menuItem_OD_Settlement_Process_Download'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'OD_SETTLEMENTPROCESS_DOWNLOAD_APPROVER'), (Select RightID from SecRights where RightName = 'menuItem_OD_Settlement_Process_Download'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'REPORTS_ADMIN'), (Select RightID from SecRights where RightName = 'menuItem_OD_Settlement_Process_Download'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
			
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#62.82_pre" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'od_settlement_request_view');
			]]>
		</sql>
	</changeSet>
	 
	<changeSet id="ST#62.82" author="kavya.n">
		<createView viewName="OD_SETTLEMENT_REQUEST_VIEW" replaceIfExists="true">
			   SELECT DISTINCT(DS.ID),
		        	DC.NAME,
		        	DC.UPLOADPATH FILELOCATION,
		        	DS.FILENAME,
		        	DS.ENDTIME,
		        	DS.STATUS,
		        	DC.Id As CONFIGID,
		        	DC.POSTEVENT,
		        	OSR.TERMINALID,
		        	OSR.MERCHANTNAME,
		        	OSR.CUSTOMERID,
		        	OSR.TXNID,
		        	OSR.TXNDATE,
		        	OSR.TXNTYPE,
		        	OSR.REFERENCE,
		        	OSR.CURRENCY,
		        	OSR.AMOUNT,
		        	OSR.ODSETTLEMENTREF,
		        	OSR.REQUESTBATCHID,
		        	OSR.ID As ODSETTLEMENTID
	            FROM DATA_ENGINE_CONFIG DC
	            INNER JOIN DATA_ENGINE_STATUS DS ON DS.NAME = DC.NAME
	            INNER JOIN OD_SETTLEMENT_REQUEST OSR ON OSR.REQUESTBATCHID=DS.ID
		</createView>
	</changeSet>
	
	<changeSet id="ST#62.82_post" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'od_settlement_request_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#62.83" author="kavya.n">
		<sql>
			<![CDATA[
			
				DELETE FROM SECROLEGROUPS Where GrpID = (select GrpID from SecGroups Where GrpCode = 'LIMITBLOCK_MAKER') and RoleID = (select RoleID from secRoles where RoleCd='LIMITBLOCK_MAKER');
				DELETE FROM SECROLEGROUPS where GrpID = (select GrpID from SecGroups Where GrpCode = 'LIMITBLOCK_APPROVER') and RoleID = (select RoleID from secRoles where RoleCd='LIMITBLOCK_APPROVER');
				
				DELETE FROM SECOPERATIONROLES Where RoleID = (select RoleID from secRoles where RoleCd='LIMITBLOCK_MAKER');
				DELETE FROM SECOPERATIONROLES Where RoleID = (select RoleID from secRoles where RoleCd='LIMITBLOCK_APPROVER');
				
				DELETE FROM SECROLES Where RoleCd = 'LIMITBLOCK_MAKER';
				DELETE FROM SECROLES Where RoleCd = 'LIMITBLOCK_APPROVER';
				
				DELETE FROM SECGROUPRIGHTS Where GrpID = (Select GrpID from SecGroups Where GrpCode = 'LIMITBLOCK_MAKER');
				DELETE FROM SECGROUPRIGHTS Where GrpID = (Select GrpID from SecGroups Where GrpCode = 'LIMITBLOCK_APPROVER');
				
				DELETE FROM SecRights Where RightName = 'menuItem_Limit_LimitBlock';
				DELETE FROM SecRights Where RightName = 'ManualBlockingDialog_custid';
				DELETE FROM SecRights Where RightName = 'ManualBlockingDialog_finreference';
				DELETE FROM SecRights Where RightName = 'ManualBlockingDialog_blockingstatus';
				
				DELETE FROM SecGROUPS WHERE GRPCODE = 'LIMITBLOCK_MAKER';
				DELETE FROM SecGroups Where GrpCode = 'LIMITBLOCK_APPROVER';
			
				INSERT INTO SecGroups Values ((Select MAX(GrpID)+1 From SecGroups), 'LIMITBLOCK_MAKER', 'Group for Limit Block Maker', 	1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL,NULL, 0);
				INSERT INTO SecGroups Values ((Select MAX(GrpID)+1 From SecGroups), 'LIMITBLOCK_APPROVER', 'Group for Limit Block Approver', 	1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL,NULL, 0);
				
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights), 0, 'menuItem_Limit_LimitBlock', 'MENU', 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights), 3, 'ManualBlockingDialog_custid', 'ManualBlockingDialog', 1, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			    INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights), 3, 'ManualBlockingDialog_finreference', 'ManualBlockingDialog', 1, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			    INSERT INTO SecRights Values ((select max(RightId)+1 from SecRights), 3, 'ManualBlockingDialog_blockingstatus', 'ManualBlockingDialog', 1, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'LIMITBLOCK_MAKER'), (Select RightID from SecRights where RightName = 'menuItem_Limit_LimitBlock'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'LIMITBLOCK_APPROVER'), (Select RightID from SecRights where RightName = 'menuItem_Limit_LimitBlock'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'LIMITBLOCK_MAKER'), (Select RightID from SecRights where RightName = 'ManualBlockingDialog_custid'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
			    INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'LIMITBLOCK_MAKER'), (Select RightID from SecRights where RightName = 'ManualBlockingDialog_finreference'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
			    INSERT INTO secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'LIMITBLOCK_MAKER'), (Select RightID from SecRights where RightName = 'ManualBlockingDialog_blockingstatus'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SecRoles Values ((select MAX(RoleId)+1 FROM SecRoles) ,1, 'LIMITBLOCK_MAKER', 'Role for Limit Block Maker', null, 0, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0); 
				INSERT INTO SecRoles Values ((select MAX(RoleId)+1 FROM SecRoles) ,1, 'LIMITBLOCK_APPROVER', 'Role for Limit Block Approver', null, 0,1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SECROLEGROUPS values((select MAX(RoleGrpID)+1 From secRoleGroups),(select GrpID from SecGroups where grpCode='LIMITBLOCK_MAKER'), (select RoleID from secRoles where RoleCd='LIMITBLOCK_MAKER'), 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS values((select MAX(RoleGrpID)+1 From secRoleGroups),(select GrpID from SecGroups where grpCode='LIMITBLOCK_APPROVER'), (select RoleID from secRoles where RoleCd='LIMITBLOCK_APPROVER'), 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SECROLEGROUPS values((select MAX(RoleGrpID)+1 From secRoleGroups),(select GrpID from SecGroups where grpCode='LIMITBLOCK_MAKER'), (select RoleID from secRoles where RoleCd='MSTGRP1_MAKER'), 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS values((select MAX(RoleGrpID)+1 From secRoleGroups),(select GrpID from SecGroups where grpCode='LIMITBLOCK_APPROVER'), (select RoleID from secRoles where RoleCd='MSTGRP1_MAKER'), 0, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="TK#429.1" author="sampath.d">
		<createTable tableName="ODLIMITHISTORYHEADER">
			<column name="Id" type="bigint" autoIncrement="true" />
			<column name="FinReference" type="Varchar2(20)">
				<constraints nullable="false" />
			</column>
			<column name="BlockLimit" type="smallint">
				<constraints nullable="false" />
			</column>
			<column name="BlockType" type="Varchar2(10))">
				<constraints nullable="false" />
			</column>
			<column name="Version" type="int" />
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkFlowId" type="bigint" />
		</createTable>
	</changeSet>
	
	<changeSet id="TK#429.2" author="sampath.d">
		<addPrimaryKey tableName="ODLIMITHISTORYHEADER" columnNames="Id"
			constraintName="PK_ODLMT_HSTRY_HDR_ID" />
	</changeSet>
	
	<changeSet id="TK#429.3" author="sampath.d">
		<createTable tableName="ODLIMITHISTORYHEADER_TEMP">
			<column name="Id" type="bigint" autoIncrement="true" />
			<column name="FinReference" type="Varchar2(20)">
				<constraints nullable="false" />
			</column>
			<column name="BlockLimit" type="smallint">
				<constraints nullable="false" />
			</column>
			<column name="BlockType" type="Varchar2(10))">
				<constraints nullable="false" />
			</column>
			<column name="Version" type="int" />
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkFlowId" type="bigint" />
		</createTable>
	</changeSet>
	
	<changeSet id="TK#429.4" author="sampath.d">
		<addPrimaryKey tableName="ODLIMITHISTORYHEADER_TEMP" columnNames="Id"
			constraintName="PK_ODLMT_HSTRY_HDR_T_ID" />
	</changeSet>
	
	<changeSet id="TK#429.5" author="sampath.d">
		<createTable tableName="ODLIMITHISTORYDETAIL">
			<column name="Id" type="bigint" autoIncrement="true" />
			<column name="HeaderId" type="bigint" />
			<column name="FinReference" type="Varchar2(20)">
				<constraints nullable="false" />
			</column>
			<column name="ActualLimit" type="decimal(18,0)" />
			<column name="MonthlyLimit" type="decimal(18,0)" />
			<column name="TransactionAmt" type="decimal(18,0)" />
			<column name="TransactionType" type="Varchar2(20)" />
			<column name="Narration" type="Varchar2(50)" />
			<column name="ActualLmtBal" type="decimal(18,0)" />
			<column name="MonthlyLmtBal" type="decimal(18,0)" />
			<column name="Version" type="int" />
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkFlowId" type="bigint" />
		</createTable>
	</changeSet>
	
	<changeSet id="TK#429.6" author="sampath.d">
		<addPrimaryKey tableName="ODLIMITHISTORYDETAIL" columnNames="Id"
			constraintName="PK_ODL_HSTRY_DTL_ID" />
	</changeSet>
	
	<changeSet id="TK#429.7" author="sampath.d">
		<createTable tableName="ODLIMITHISTORYDETAIL_TEMP">
			<column name="Id" type="bigint" autoIncrement="true" />
			<column name="HeaderId" type="bigint" />
			<column name="FinReference" type="Varchar2(20)">
				<constraints nullable="false" />
			</column>
			<column name="ActualLimit" type="decimal(18,0)" />
			<column name="MonthlyLimit" type="decimal(18,0)" />
			<column name="TransactionAmt" type="decimal(18,0)" />
			<column name="TransactionType" type="Varchar2(20)" />
			<column name="Narration" type="Varchar2(50)" />
			<column name="ActualLmtBal" type="decimal(18,0)" />
			<column name="MonthlyLmtBal" type="decimal(18,0)" />
			<column name="Version" type="int" />
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkFlowId" type="bigint" />
		</createTable>
	</changeSet>
	
	<changeSet id="TK#429.8" author="sampath.d">
		<addPrimaryKey tableName="ODLIMITHISTORYDETAIL_TEMP" columnNames="Id"
			constraintName="PK_ODL_HSTRY_DTL_T_ID" />
	</changeSet>
	
	<changeSet id="TK#429.9_pre" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'odlimithistoryheader_aview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="TK#429.9" author="sampath.d">
	  <createView viewName="ODLIMITHISTORYHEADER_AVIEW" replaceIfExists="true">
		    <![CDATA[
					SELECT T1.ID, 
                        T1.FINREFERENCE,
						T3.CUSTCIF,
						T2.FINISACTIVE,
                        T1.BLOCKLIMIT,
                        T1.BLOCKTYPE,
                        T1.VERSION,
                        T1.LASTMNTBY,
                        T1.LASTMNTON,
                        T1.RECORDSTATUS,
                        T1.ROLECODE,
                        T1.NEXTROLECODE,
                        T1.TASKID,
                        T1.NEXTTASKID,
                        T1.RECORDTYPE,
                        T1.WORKFLOWID
                    FROM ODLIMITHISTORYHEADER T1
					INNER JOIN FINANCEMAIN T2 ON T1.FINREFERENCE = T2.FINREFERENCE
					INNER JOIN CUSTOMERS T3 ON  T2.CUSTID = T3.CUSTID
				  ]]>	
	  	 </createView>
     </changeSet>
	
	<changeSet id="TK#429.9_post" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'odlimithistoryheader_aview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="TK#429.10_pre" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'odlimithistoryheader_view');
			]]>
		</sql>
	</changeSet>
	 
	<changeSet id="TK#429.10" author="sampath.d">
	  <createView viewName="ODLIMITHISTORYHEADER_VIEW" replaceIfExists="true">
		    <![CDATA[
					SELECT T1.ID, 
                        T1.FINREFERENCE,
						T3.CUSTCIF,
						T2.FINISACTIVE,
                        T1.BLOCKLIMIT,
                        T1.BLOCKTYPE,
                        T1.VERSION,
                        T1.LASTMNTBY,
                        T1.LASTMNTON,
                        T1.RECORDSTATUS,
                        T1.ROLECODE,
                        T1.NEXTROLECODE,
                        T1.TASKID,
                        T1.NEXTTASKID,
                        T1.RECORDTYPE,
                        T1.WORKFLOWID
                    FROM ODLIMITHISTORYHEADER_TEMP T1
					INNER JOIN FINANCEMAIN T2 ON T1.FINREFERENCE = T2.FINREFERENCE
					INNER JOIN CUSTOMERS T3 ON  T2.CUSTID = T3.CUSTID 
					UNION ALL
                    SELECT T1.ID, 
                        T1.FINREFERENCE,
						T3.CUSTCIF,
						T2.FINISACTIVE,
                        T1.BLOCKLIMIT,
                        T1.BLOCKTYPE,
                        T1.VERSION,
                        T1.LASTMNTBY,
                        T1.LASTMNTON,
                        T1.RECORDSTATUS,
                        T1.ROLECODE,
                        T1.NEXTROLECODE,
                        T1.TASKID,
                        T1.NEXTTASKID,
                        T1.RECORDTYPE,
                        T1.WORKFLOWID
                    FROM ODLIMITHISTORYHEADER T1
					INNER JOIN FINANCEMAIN T2 ON T1.FINREFERENCE = T2.FINREFERENCE
					INNER JOIN CUSTOMERS T3 ON  T2.CUSTID = T3.CUSTID
					WHERE NOT (EXISTS ( SELECT 1 AS EXPR1 FROM ODLIMITHISTORYHEADER_TEMP
					WHERE ODLIMITHISTORYHEADER_TEMP.FINREFERENCE = T1.FINREFERENCE))
				  ]]>	
	   </createView>
     </changeSet>
	
	<changeSet id="TK#429.10_post" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'odlimithistoryheader_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#167.1" author="sampath.d">
		<addColumn tableName="FinReceiptHeader">
			<column name="FinType" type="varchar(8)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#167.2" author="sampath.d">
		<addColumn tableName="FinReceiptHeader_temp">
			<column name="FinType" type="varchar(8)" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#167.3" author="sampath.d">
		<sql>
			<![CDATA[
				UPDATE SECGROUPS SET ROLECODE = NULL, NEXTROLECODE = NULL, TASKID = NULL, NEXTTASKID = NULL, RECORDTYPE = NULL WHERE GRPCODE = 'FEERECEIPT_MAKER';
				UPDATE SECGROUPS SET ROLECODE = NULL, NEXTROLECODE = NULL, TASKID = NULL, NEXTTASKID = NULL, RECORDTYPE = NULL WHERE GRPCODE = 'FEERECEIPT_APPROVER';
				UPDATE SECGROUPS SET ROLECODE = NULL, NEXTROLECODE = NULL, TASKID = NULL, NEXTTASKID = NULL, RECORDTYPE = NULL WHERE GRPCODE = 'FinFeeRefund_MAKER';
				UPDATE SECGROUPS SET ROLECODE = NULL, NEXTROLECODE = NULL, TASKID = NULL, NEXTTASKID = NULL, RECORDTYPE = NULL WHERE GRPCODE = 'FinFeeRefund_Approver';
				UPDATE SECGROUPS SET ROLECODE = NULL, NEXTROLECODE = NULL, TASKID = NULL, NEXTTASKID = NULL, RECORDTYPE = NULL WHERE GRPCODE = 'RECEIPTCANCEL_MAKER';
				UPDATE SECGROUPS SET ROLECODE = NULL, NEXTROLECODE = NULL, TASKID = NULL, NEXTTASKID = NULL, RECORDTYPE = NULL WHERE GRPCODE = 'RECEIPTCANCEL_APPROVER';
				UPDATE SECROLES SET ROLECODE = NULL, NEXTROLECODE = NULL, TASKID = NULL, NEXTTASKID = NULL, RECORDTYPE = NULL WHERE ROLECD = 'FINFEEREFUND_MAKER';
				UPDATE SECROLES SET ROLECODE = NULL, NEXTROLECODE = NULL, TASKID = NULL, NEXTTASKID = NULL, RECORDTYPE = NULL WHERE ROLECD = 'FINFEEREFUND_APPROVER';

				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FEERECEIPT_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menuItem_FinanceManagement_FeeReceipts');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FEERECEIPT_APPROVER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menuItem_FinanceManagement_FeeReceipts');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FinFeeRefund_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menuItem_FinanceManagement_FinFeeRefunds');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FinFeeRefund_Approver') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menuItem_FinanceManagement_FinFeeRefunds');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FinFeeRefund_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menuItem_Enquiry_FinFeeRefundEnquiry');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FinFeeRefund_Approver') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menuItem_Enquiry_FinFeeRefundEnquiry');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'RECEIPTCANCEL_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menuItem_FinanceManagement_FeeReceiptCancellation');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'RECEIPTCANCEL_APPROVER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menuItem_FinanceManagement_FeeReceiptCancellation');
				
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (Select GrpID from SecGroups where GrpCode = 'FEERECEIPT_MAKER'), (Select RightID from SecRights where RightName = 'menuItem_FinanceManagement_FeeReceipts'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (Select GrpID from SecGroups where GrpCode = 'FEERECEIPT_APPROVER'), (Select RightID from SecRights where RightName = 'menuItem_FinanceManagement_FeeReceipts'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (Select GrpID from SecGroups where GrpCode = 'FinFeeRefund_MAKER'), (Select RightID from SecRights where RightName = 'menuItem_FinanceManagement_FinFeeRefunds'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (Select GrpID from SecGroups where GrpCode = 'FinFeeRefund_Approver'), (Select RightID from SecRights where RightName = 'menuItem_FinanceManagement_FinFeeRefunds'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (Select GrpID from SecGroups where GrpCode = 'FinFeeRefund_MAKER'), (Select RightID from SecRights where RightName = 'menuItem_Enquiry_FinFeeRefundEnquiry'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (Select GrpID from SecGroups where GrpCode = 'FinFeeRefund_Approver'), (Select RightID from SecRights where RightName = 'menuItem_Enquiry_FinFeeRefundEnquiry'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (Select GrpID from SecGroups where GrpCode = 'RECEIPTCANCEL_MAKER'), (Select RightID from SecRights where RightName = 'menuItem_FinanceManagement_FeeReceiptCancellation'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (Select GrpID from SecGroups where GrpCode = 'RECEIPTCANCEL_APPROVER'), (Select RightID from SecRights where RightName = 'menuItem_FinanceManagement_FeeReceiptCancellation'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>
	<changeSet id="ST#167.4" author="sampath.d">
		<sql>
			<![CDATA[
				DELETE FROM CATEGORYWISEEVENTS WHERE AEEVENTCODE = 'FEEPAY' AND CATEGORYCODE = 'O';
				DELETE FROM CATEGORYWISEEVENTS WHERE AEEVENTCODE = 'FEREFUND' AND CATEGORYCODE = 'O';
			
				INSERT INTO CATEGORYWISEEVENTS (AEEVENTCODE,CATEGORYCODE,ACTIVE,MANDATORY,SEQORDER) VALUES ('FEEPAY','O',1,1,(SELECT MAX(SEQORDER)+1 FROM CATEGORYWISEEVENTS WHERE CATEGORYCODE= 'O'));
				INSERT INTO CATEGORYWISEEVENTS (AEEVENTCODE,CATEGORYCODE,ACTIVE,MANDATORY,SEQORDER) VALUES ('FEREFUND','O',1,1,(SELECT MAX(SEQORDER)+1 FROM CATEGORYWISEEVENTS WHERE CATEGORYCODE= 'O'));
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#62.86" author="kavya.n">
		<renameColumn tableName="RMTFinanceTypes" oldColumnName="BillingChrgReq" newColumnName="TxnChrgReq" />
    </changeSet>
    
    <changeSet id="ST#62.87" author="kavya.n">
		<renameColumn tableName="RMTFinanceTypes" oldColumnName="BillingChrgCode" newColumnName="TxnChrgCode" />
    </changeSet>
    
    <changeSet id="ST#62.88" author="kavya.n">
		<renameColumn tableName="FinanceMain" oldColumnName="BillingChrgReq" newColumnName="TxnChrgReq" />
    </changeSet>
    
    <changeSet id="ST#62.89" author="kavya.n">
		<sql>
			<![CDATA[
				UPDATE SecRights Set RightName='FinanceMainDialog_oDTransactionCharge' Where RightName='FinanceMainDialog_oDBillingCharge';
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#62.90" author="kavya.n">
		<renameColumn tableName="RMTFinanceTypes_Temp" oldColumnName="BillingChrgReq" newColumnName="TxnChrgReq" />
    </changeSet>
    
    <changeSet id="ST#62.91" author="kavya.n">
		<renameColumn tableName="RMTFinanceTypes_Temp" oldColumnName="BillingChrgCode" newColumnName="TxnChrgCode" />
    </changeSet>
    
    <changeSet id="ST#62.92" author="kavya.n">
		<renameColumn tableName="FinanceMain_Temp" oldColumnName="BillingChrgReq" newColumnName="TxnChrgReq" />
    </changeSet>
	
	<changeSet id="ST#62.93_pre" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_view');
		 	]]>
		</sql>
	</changeSet>

	<changeSet id="ST#62.93" author="kavya.n">
		<createView viewName="RMTFINANCETYPES_VIEW" replaceIfExists="true">
		   <![CDATA[
				SELECT T1.FINTYPE,
					T1.FINCATEGORY,
					T1.FINTYPEDESC,
					T1.FINCCY,
					T1.FINDAYSCALTYPE,
					T1.FINACTYPE,
					T1.FINCONTINGENTACTYPE,
					T1.FINISGENREF,
					T1.FINMAXAMOUNT,
					T1.FINMINAMOUNT,
					T1.FINISOPENNEWFINAC,
					T1.FINDFTSTMTFRQ,
					T1.FINISALWMD,
					T1.FINSCHDMTHD,
					T1.FINISALWGRACE,
					T1.FINHISTRETENSION,
					T1.EQUALREPAYMENT,
					T1.FINRATETYPE,
					T1.FINBASERATE,
					T1.FINSPLRATE,
					T1.FININTRATE,
					T1.FINMINRATE,
					T1.FINMAXRATE,
					T1.FINDFTINTFRQ,
					T1.FINISINTCPZ,
					T1.FINCPZFRQ,
					T1.FINISRVWALW,
					T1.FINRVWFRQ,
					T1.FINGRCRATETYPE,
					T1.FINGRCBASERATE,
					T1.FINGRCSPLRATE,
					T1.FINGRCINTRATE,
					T1.FINGRCMINRATE,
					T1.FINGRCMAXRATE,
					T1.FINGRCDFTINTFRQ,
					T1.FINGRCISINTCPZ,
					T1.FINGRCCPZFRQ,
					T1.FINGRCISRVWALW,
					T1.FINGRCRVWFRQ,
					T1.FINMINTERM,
					T1.FINMAXTERM,
					T1.FINDFTTERMS,
					T1.FINRPYFRQ,
					T1.FINREPAYMETHOD,
					T1.FINISALWPARTIALRPY,
					T1.FINISALWDIFFERMENT,
					T1.FINMAXDIFFERMENT,
					T1.FINISALWEARLYRPY,
					T1.FINISALWEARLYSETTLE,
					T1.FINODRPYTRIES,
					T1.FINEARLYPAYRULE,
					T1.FINEARLYSETTLERULE,
					T1.FINDEPOSITRESTRICTEDTO,
					T1.FINAEBUYORINCEPTION,
					T1.FINAESELLORMATURITY,
					T1.FINISACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.STEPFINANCE,
					T1.STEPPINGMANDATORY,
					T1.ALWMANUALSTEPS,
					T1.ALWDSTEPPOLICIES,
					T1.DFTSTEPPOLICY,
					T4.ACTYPEDESC LOVDESCFINCONTINGENTACTYPENAME,
					T5.ACTYPEDESC LOVDESCFINACTYPENAME,
					T1.FINISDWPAYREQUIRED,
					T1.FINRVWRATEAPPLFOR,
					T1.FINALWRATECHANGEANYDATE,
					T1.FINISINTCPZATGRCEND,
					T1.FINELGRULECODE,
					T1.LIMITELGRULECODE,
					T1.FINSCHCALCODEONRVW,
					T1.ALWPLANDEFERMENT,
					T1.PLANDEFERCOUNT,
					T1.FINASSETTYPE,
					T1.PFTPAYACTYPE,
					T1.FINISOPENPFTPAYACC,
					T31.ACTYPEDESC LOVDESCPFTPAYACTYPENAME,
					T1.FINISALWGRCREPAY,
					T1.FINGRCSCHDMTHD,
					T1.FINGRCMARGIN,
					T1.FINMARGIN,
					T1.FINSCHEDULEON,
					T1.FINGRCSCHEDULEON,
					T1.FINCOMMITMENTREQ,
					T1.FINCOLLATERALREQ,
					T1.FINDEPRECIATIONREQ,
					T1.FINDEPRECIATIONFRQ,
					T1.FINBANKCONTINGENTACTYPE,
					T1.FINPROVISIONACTYPE,
					T38.ACTYPEDESC LOVDESCFINBANKCONTACTYPENAME,
					T39.ACTYPEDESC LOVDESCFINPROVISIONACTYPENAME,
					T1.ALLOWRIAINVESTMENT,
					T1.OVERRIDELIMIT,
					T1.LIMITREQUIRED,
					T1.FINCOMMITMENTOVRRIDE,
					T1.FINCOLLATERALOVRRIDE,
					T1.FINPFTUNCHANGED,
					T1.APPLYODPENALTY,
					T1.ODINCGRCDAYS,
					T1.ODCHARGETYPE,
					T1.ODGRACEDAYS,
					T1.ODCHARGECALON,
					T1.ODCHARGEAMTORPERC,
					T1.ODALLOWWAIVER,
					T1.ODMAXWAIVERPERC,
					T1.FINDIVISION,
					T48.DIVISIONCODEDESC LOVDESCFINDIVISIONNAME,
					T48.ENTITYCODE LOVDESCENTITYCODE,
					T1.FINSUSPACTYPE,
					T49.ACTYPEDESC LOVDESCFINSUSPACTYPENAME,
					T1.PRODUCT,
					T1.STARTDATE,
					T1.ENDDATE,
					T1.ALLOWDOWNPAYPGM,
					T1.FINTYPEDESC LOVDESCPROMOFINTYPEDESC,
					T1.REMARKS,
					T1.ALWEARLYPAYMETHODS,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.ALWADVANCERENT,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.ROLLOVERFINANCE,
					T1.ROLLOVERFRQ,
					T1.DOWNPAYRULE,
					T59.RULECODE DOWNPAYRULECODE,
					T59.RULECODEDESC DOWNPAYRULEDESC,
					T1.FINSUSPTRIGGER,
					T1.FINSUSPREMARKS,
					T1.ALWMULTIPARTYDISB,
					T1.COLLATERALTYPE,
					T1.TDSAPPLICABLE,
					T1.MANUALSCHEDULE,
					T1.APPLYGRCPRICING,
					T1.GRCPRICINGMETHOD,
					T1.APPLYRPYPRICING,
					T1.RPYPRICINGMETHOD,
					T1.RPYHIERARCHY,
					T67.RULECODE GRCPRICINGMETHODDESC,
					T68.RULECODE RPYPRICINGMETHODDESC,
					T1.DROPLINEOD,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.FINREPAYPFTONFRQ,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PFTDUESCHON,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.UNPLANEMIHLOCKPERIOD,
					T1.UNPLANEMICPZ,
					T1.REAGECPZ,
					T1.FDDLOCKPERIOD,
					T1.ALWDRPYMETHODS,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.ROUNDINGMODE,
					T1.ROUNDINGTARGET,
					T1.FREQUENCYDAYS,
					T1.QUICKDISB,
					T1.ALWMAXDISBCHECKREQ,
					T1.ALWREAGE,
					T1.ALWUNPLANEMIHOLIDAY,
					T1.PROFITCENTERID,
					T69.PROFITCENTERCODE,
					T69.PROFITCENTERDESC,
					T1.PRODUCTCATEGORY,
					T2.PRODUCTDESC FINCATEGORYDESC,
					T1.DEVELOPERFINANCE,
					T1.COSTOFFUNDS,
					T1.CHEQUECAPTUREREQ,
					T1.FINLTVCHECK,
					T1.PARTIALLYSECURED,
					T1.ALWADVEMI,
					T1.ADVEMIMINTERMS,
					T1.ADVEMIMAXTERMS,
					T1.ADVEMIDFTTERMS,
					T1.ADVEMISCHDMTHD,
					T1.BPIPFTDAYSBASIS,
					T1.ELIGIBILITYMETHODS,
					T1.ALWHYBRIDRATE,
					T1.FIXEDRATETENOR,
					T1.ODMINCAPAMOUNT,
					T1.ODRULECODE,
					T1.ALWZEROINTACC,
					T1.AUTOREJECTIONDAYS,
					T1.TAXNOMAND,
					T1.PUTCALLREQUIRED,
					T1.GRCADVINTERSETREQ,
					T1.GRCADVTYPE,
					T1.GRCADVMINTERMS,
					T1.GRCADVMAXTERMS,
					T1.GRCADVDEFAULTTERMS,
					T1.ADVINTERSETREQ,
					T1.ADVTYPE,
					T1.ADVMINTERMS,
					T1.ADVMAXTERMS,
					T1.ADVDEFAULTTERMS,
					T1.ADVSTAGE,
					T1.DSFREQ,
					T1.CASHCOLLATERALREQ,
					T1.TDSALLOWTOMODIFY,
					T1.TDSAPPLICABLETO,
					T1.ALWVAN,
					T1.VANALLOCATIONMETHOD,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING,
					T1.ALWSANCTIONAMT,
					T1.ALWSANCTIONAMTOVERRIDE,
					T1.SANBSDSCHDLE,
					T1.FINISRATERVWATGRCEND,
					T1.SCHDONPMTCAL,
					T1.AUTOAPPROVE,
					T1.ALWPLANNEDEMIINGRC,
					T1.GRCADJREQ,
					T1.GRCPERIODAFTRFULLDISB,
					T1.AUTOINCRGRCENDDATE,
					T1.GRCAUTOINCRMONTHS,
					T1.MAXAUTOINCRALLOWED,
					T1.THRLDTOMAINTAINGRCPRD,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.TXNCHRGREQ,
					T1.TXNCHRGCODE,
					T1.EXTNSNODGRACEDAYS,
					T1.COLLECCHRGCODEID,
					T1.COLLECTIONAMT
				FROM RMTFINANCETYPES_TEMP T1
				LEFT JOIN BMTPRODUCT T2 ON T1.FINCATEGORY = T2.PRODUCTCODE
				LEFT JOIN RMTACCOUNTTYPES T4 ON T1.FINCONTINGENTACTYPE = T4.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T38 ON T1.FINBANKCONTINGENTACTYPE = T38.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T39 ON T1.FINPROVISIONACTYPE = T39.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T5 ON T1.FINACTYPE = T5.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T31 ON T1.PFTPAYACTYPE = T31.ACTYPE
				LEFT JOIN SMTDIVISIONDETAIL T48 ON T1.FINDIVISION = T48.DIVISIONCODE
				LEFT JOIN RMTACCOUNTTYPES T49 ON T1.FINSUSPACTYPE = T49.ACTYPE
				LEFT JOIN RULES T59 ON T1.DOWNPAYRULE = T59.RULEID
				LEFT JOIN RULES T67 ON T1.GRCPRICINGMETHOD = T67.RULEID
				LEFT JOIN RULES T68 ON T1.RPYPRICINGMETHOD = T68.RULEID
				LEFT JOIN PROFITCENTERS T69 ON T69.PROFITCENTERID = T1.PROFITCENTERID
				UNION ALL
				SELECT T1.FINTYPE,
					T1.FINCATEGORY,
					T1.FINTYPEDESC,
					T1.FINCCY,
					T1.FINDAYSCALTYPE,
					T1.FINACTYPE,
					T1.FINCONTINGENTACTYPE,
					T1.FINISGENREF,
					T1.FINMAXAMOUNT,
					T1.FINMINAMOUNT,
					T1.FINISOPENNEWFINAC,
					T1.FINDFTSTMTFRQ,
					T1.FINISALWMD,
					T1.FINSCHDMTHD,
					T1.FINISALWGRACE,
					T1.FINHISTRETENSION,
					T1.EQUALREPAYMENT,
					T1.FINRATETYPE,
					T1.FINBASERATE,
					T1.FINSPLRATE,
					T1.FININTRATE,
					T1.FINMINRATE,
					T1.FINMAXRATE,
					T1.FINDFTINTFRQ,
					T1.FINISINTCPZ,
					T1.FINCPZFRQ,
					T1.FINISRVWALW,
					T1.FINRVWFRQ,
					T1.FINGRCRATETYPE,
					T1.FINGRCBASERATE,
					T1.FINGRCSPLRATE,
					T1.FINGRCINTRATE,
					T1.FINGRCMINRATE,
					T1.FINGRCMAXRATE,
					T1.FINGRCDFTINTFRQ,
					T1.FINGRCISINTCPZ,
					T1.FINGRCCPZFRQ,
					T1.FINGRCISRVWALW,
					T1.FINGRCRVWFRQ,
					T1.FINMINTERM,
					T1.FINMAXTERM,
					T1.FINDFTTERMS,
					T1.FINRPYFRQ,
					T1.FINREPAYMETHOD,
					T1.FINISALWPARTIALRPY,
					T1.FINISALWDIFFERMENT,
					T1.FINMAXDIFFERMENT,
					T1.FINISALWEARLYRPY,
					T1.FINISALWEARLYSETTLE,
					T1.FINODRPYTRIES,
					T1.FINEARLYPAYRULE,
					T1.FINEARLYSETTLERULE,
					T1.FINDEPOSITRESTRICTEDTO,
					T1.FINAEBUYORINCEPTION,
					T1.FINAESELLORMATURITY,
					T1.FINISACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.STEPFINANCE,
					T1.STEPPINGMANDATORY,
					T1.ALWMANUALSTEPS,
					T1.ALWDSTEPPOLICIES,
					T1.DFTSTEPPOLICY,
					T4.ACTYPEDESC LOVDESCFINCONTINGENTACTYPENAME,
					T5.ACTYPEDESC LOVDESCFINACTYPENAME,
					T1.FINISDWPAYREQUIRED,
					T1.FINRVWRATEAPPLFOR,
					T1.FINALWRATECHANGEANYDATE,
					T1.FINISINTCPZATGRCEND,
					T1.FINELGRULECODE,
					T1.LIMITELGRULECODE,
					T1.FINSCHCALCODEONRVW,
					T1.ALWPLANDEFERMENT,
					T1.PLANDEFERCOUNT,
					T1.FINASSETTYPE,
					T1.PFTPAYACTYPE,
					T1.FINISOPENPFTPAYACC,
					T31.ACTYPEDESC LOVDESCPFTPAYACTYPENAME,
					T1.FINISALWGRCREPAY,
					T1.FINGRCSCHDMTHD,
					T1.FINGRCMARGIN,
					T1.FINMARGIN,
					T1.FINSCHEDULEON,
					T1.FINGRCSCHEDULEON,
					T1.FINCOMMITMENTREQ,
					T1.FINCOLLATERALREQ,
					T1.FINDEPRECIATIONREQ,
					T1.FINDEPRECIATIONFRQ,
					T1.FINBANKCONTINGENTACTYPE,
					T1.FINPROVISIONACTYPE,
					T38.ACTYPEDESC LOVDESCFINBANKCONTACTYPENAME,
					T39.ACTYPEDESC LOVDESCFINPROVISIONACTYPENAME,
					T1.ALLOWRIAINVESTMENT,
					T1.OVERRIDELIMIT,
					T1.LIMITREQUIRED,
					T1.FINCOMMITMENTOVRRIDE,
					T1.FINCOLLATERALOVRRIDE,
					T1.FINPFTUNCHANGED,
					T1.APPLYODPENALTY,
					T1.ODINCGRCDAYS,
					T1.ODCHARGETYPE,
					T1.ODGRACEDAYS,
					T1.ODCHARGECALON,
					T1.ODCHARGEAMTORPERC,
					T1.ODALLOWWAIVER,
					T1.ODMAXWAIVERPERC,
					T1.FINDIVISION,
					T48.DIVISIONCODEDESC LOVDESCFINDIVISIONNAME,
					T48.ENTITYCODE LOVDESCENTITYCODE,
					T1.FINSUSPACTYPE,
					T49.ACTYPEDESC LOVDESCFINSUSPACTYPENAME,
					T1.PRODUCT,
					T1.STARTDATE,
					T1.ENDDATE,
					T1.ALLOWDOWNPAYPGM,
					T1.FINTYPEDESC LOVDESCPROMOFINTYPEDESC,
					T1.REMARKS,
					T1.ALWEARLYPAYMETHODS,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.ALWADVANCERENT,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.ROLLOVERFINANCE,
					T1.ROLLOVERFRQ,
					T1.DOWNPAYRULE,
					T59.RULECODE DOWNPAYRULECODE,
					T59.RULECODEDESC DOWNPAYRULEDESC,
					T1.FINSUSPTRIGGER,
					T1.FINSUSPREMARKS,
					T1.ALWMULTIPARTYDISB,
					T1.COLLATERALTYPE,
					T1.TDSAPPLICABLE,
					T1.MANUALSCHEDULE,
					T1.APPLYGRCPRICING,
					T1.GRCPRICINGMETHOD,
					T1.APPLYRPYPRICING,
					T1.RPYPRICINGMETHOD,
					T1.RPYHIERARCHY,
					T67.RULECODE GRCPRICINGMETHODDESC,
					T68.RULECODE RPYPRICINGMETHODDESC,
					T1.DROPLINEOD,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.FINREPAYPFTONFRQ,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PFTDUESCHON,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.UNPLANEMIHLOCKPERIOD,
					T1.UNPLANEMICPZ,
					T1.REAGECPZ,
					T1.FDDLOCKPERIOD,
					T1.ALWDRPYMETHODS,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.ROUNDINGMODE,
					T1.ROUNDINGTARGET,
					T1.FREQUENCYDAYS,
					T1.QUICKDISB,
					T1.ALWMAXDISBCHECKREQ,
					T1.ALWREAGE,
					T1.ALWUNPLANEMIHOLIDAY,
					T1.PROFITCENTERID,
					T69.PROFITCENTERCODE,
					T69.PROFITCENTERDESC,
					T1.PRODUCTCATEGORY,
					T2.PRODUCTDESC FINCATEGORYDESC,
					T1.DEVELOPERFINANCE,
					T1.COSTOFFUNDS,
					T1.CHEQUECAPTUREREQ,
					T1.FINLTVCHECK,
					T1.PARTIALLYSECURED,
					T1.ALWADVEMI,
					T1.ADVEMIMINTERMS,
					T1.ADVEMIMAXTERMS,
					T1.ADVEMIDFTTERMS,
					T1.ADVEMISCHDMTHD,
					T1.BPIPFTDAYSBASIS,
					T1.ELIGIBILITYMETHODS,
					T1.ALWHYBRIDRATE,
					T1.FIXEDRATETENOR,
					T1.ODMINCAPAMOUNT,
					T1.ODRULECODE,
					T1.ALWZEROINTACC,
					T1.AUTOREJECTIONDAYS,
					T1.TAXNOMAND,
					T1.PUTCALLREQUIRED,
					T1.GRCADVINTERSETREQ,
					T1.GRCADVTYPE,
					T1.GRCADVMINTERMS,
					T1.GRCADVMAXTERMS,
					T1.GRCADVDEFAULTTERMS,
					T1.ADVINTERSETREQ,
					T1.ADVTYPE,
					T1.ADVMINTERMS,
					T1.ADVMAXTERMS,
					T1.ADVDEFAULTTERMS,
					T1.ADVSTAGE,
					T1.DSFREQ,
					T1.CASHCOLLATERALREQ,
					T1.TDSALLOWTOMODIFY,
					T1.TDSAPPLICABLETO,
					T1.ALWVAN,
					T1.VANALLOCATIONMETHOD,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING,
					T1.ALWSANCTIONAMT,
					T1.ALWSANCTIONAMTOVERRIDE,
					T1.SANBSDSCHDLE,
					T1.FINISRATERVWATGRCEND,
					T1.SCHDONPMTCAL,
					T1.AUTOAPPROVE,
					T1.ALWPLANNEDEMIINGRC,
					T1.GRCADJREQ,
					T1.GRCPERIODAFTRFULLDISB,
					T1.AUTOINCRGRCENDDATE,
					T1.GRCAUTOINCRMONTHS,
					T1.MAXAUTOINCRALLOWED,
					T1.THRLDTOMAINTAINGRCPRD,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.TXNCHRGREQ,
					T1.TXNCHRGCODE,
					T1.EXTNSNODGRACEDAYS,
					T1.COLLECCHRGCODEID,
					T1.COLLECTIONAMT
				FROM RMTFINANCETYPES T1
				LEFT JOIN BMTPRODUCT T2 ON T1.FINCATEGORY = T2.PRODUCTCODE
				LEFT JOIN RMTACCOUNTTYPES T4 ON T1.FINCONTINGENTACTYPE = T4.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T38 ON T1.FINBANKCONTINGENTACTYPE = T38.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T39 ON T1.FINPROVISIONACTYPE = T39.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T5 ON T1.FINACTYPE = T5.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T31 ON T1.PFTPAYACTYPE = T31.ACTYPE
				LEFT JOIN SMTDIVISIONDETAIL T48 ON T1.FINDIVISION = T48.DIVISIONCODE
				LEFT JOIN RMTACCOUNTTYPES T49 ON T1.FINSUSPACTYPE = T49.ACTYPE
				LEFT JOIN RULES T59 ON T1.DOWNPAYRULE = T59.RULEID
				LEFT JOIN RULES T67 ON T1.GRCPRICINGMETHOD = T67.RULEID
				LEFT JOIN RULES T68 ON T1.RPYPRICINGMETHOD = T68.RULEID
				LEFT JOIN PROFITCENTERS T69 ON T69.PROFITCENTERID = T1.PROFITCENTERID
				WHERE NOT (EXISTS ( SELECT 1 AS EXPR1 FROM RMTFINANCETYPES_TEMP
					WHERE RMTFINANCETYPES_TEMP.FINTYPE = T1.FINTYPE))
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#62.93_post" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rmtfinancetypes_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#62.94_pre" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_orgview');
		 	]]>
		</sql>
	</changeSet>

	<changeSet id="ST#62.94" author="kavya.n">
		<createView viewName="RMTFINANCETYPES_ORGVIEW" replaceIfExists="true">
		   <![CDATA[
				SELECT T1.FINTYPE,
					T1.FINCATEGORY,
					T1.FINTYPEDESC,
					T1.FINCCY,
					T1.FINDAYSCALTYPE,
					T1.FINACTYPE,
					T1.FINCONTINGENTACTYPE,
					T1.FINISGENREF,
					T1.FINMAXAMOUNT,
					T1.FINMINAMOUNT,
					T1.FINISOPENNEWFINAC,
					T1.FINISALWMD,
					T1.FINSCHDMTHD,
					T1.FINISALWGRACE,
					T1.EQUALREPAYMENT,
					T1.FINRATETYPE,
					T1.FINBASERATE,
					T1.FINSPLRATE,
					T1.FININTRATE,
					T1.FINMINRATE,
					T1.FINMAXRATE,
					T1.FINDFTINTFRQ,
					T1.FINISINTCPZ,
					T1.FINCPZFRQ,
					T1.FINISRVWALW,
					T1.FINRVWFRQ,
					T1.FINGRCRATETYPE,
					T1.FINGRCBASERATE,
					T1.FINGRCSPLRATE,
					T1.FINGRCINTRATE,
					T1.FINGRCMINRATE,
					T1.FINGRCMAXRATE,
					T1.FINGRCDFTINTFRQ,
					T1.FINGRCISINTCPZ,
					T1.FINGRCCPZFRQ,
					T1.FINGRCISRVWALW,
					T1.FINGRCRVWFRQ,
					T1.FINMINTERM,
					T1.FINMAXTERM,
					T1.FINDFTTERMS,
					T1.FINRPYFRQ,
					T1.FINREPAYMETHOD,
					T1.FINISALWDIFFERMENT,
					T1.FINMAXDIFFERMENT,
					T1.FINISACTIVE,
					T1.STEPFINANCE,
					T1.STEPPINGMANDATORY,
					T1.ALWMANUALSTEPS,
					T1.ALWDSTEPPOLICIES,
					T1.DFTSTEPPOLICY,
					T1.FINISDWPAYREQUIRED,
					T1.FINRVWRATEAPPLFOR,
					T1.FINALWRATECHANGEANYDATE,
					T1.FINISINTCPZATGRCEND,
					T1.FINSCHCALCODEONRVW,
					T1.ALWPLANDEFERMENT,
					T1.PLANDEFERCOUNT,
					T1.PFTPAYACTYPE,
					T1.FINISOPENPFTPAYACC,
					T1.FINISALWGRCREPAY,
					T1.FINGRCSCHDMTHD,
					T1.FINGRCMARGIN,
					T1.FINMARGIN,
					T1.FINCOMMITMENTREQ,
					T1.FINCOLLATERALREQ,
					T1.FINDEPRECIATIONREQ,
					T1.FINDEPRECIATIONFRQ,
					T1.FINBANKCONTINGENTACTYPE,
					T1.FINPROVISIONACTYPE,
					T1.ALLOWRIAINVESTMENT,
					T1.OVERRIDELIMIT,
					T1.LIMITREQUIRED,
					T1.FINCOMMITMENTOVRRIDE,
					T1.FINCOLLATERALOVRRIDE,
					T1.FINREPAYPFTONFRQ,
					T1.FINPFTUNCHANGED,
					T1.APPLYODPENALTY,
					T1.ODINCGRCDAYS,
					T1.ODCHARGETYPE,
					T1.ODGRACEDAYS,
					T1.ODCHARGECALON,
					T1.ODCHARGEAMTORPERC,
					T1.ODALLOWWAIVER,
					T1.ODMAXWAIVERPERC,
					T1.FINDIVISION,
					T3.DIVISIONCODEDESC LOVDESCFINDIVISIONNAME,
					T1.FINSUSPACTYPE,
					T1.PRODUCT,
					T1.STARTDATE,
					T1.ENDDATE,
					T1.ALLOWDOWNPAYPGM,
					T1.FINTYPEDESC LOVDESCPROMOFINTYPEDESC,
					T1.REMARKS,
					T4.POLICYDESC LOVDESCDFTSTEPPOLICYNAME,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.ALWADVANCERENT,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.ROLLOVERFINANCE,
					T1.ROLLOVERFRQ,
					T1.DOWNPAYRULE,
					T1.ALWMULTIPARTYDISB,
					T1.COLLATERALTYPE,
					T1.TDSAPPLICABLE,
					T5.RULECODE DOWNPAYRULECODE,
					T5.RULECODEDESC DOWNPAYRULEDESC,
					T1.APPLYGRCPRICING,
					T1.APPLYRPYPRICING,
					T6.RULECODE GRCPRICINGMETHODDESC,
					T7.RULECODE RPYPRICINGMETHODDESC,
					T1.DROPLINEOD,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T4.STEPTYPE DFTSTEPPOLICYTYPE,
					T1.MANUALSCHEDULE,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PFTDUESCHON,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.UNPLANEMIHLOCKPERIOD,
					T1.UNPLANEMICPZ,
					T1.REAGECPZ,
					T1.FDDLOCKPERIOD,
					T1.ALWDRPYMETHODS,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.ROUNDINGMODE,
					T1.ROUNDINGTARGET,
					T1.FREQUENCYDAYS,
					T1.QUICKDISB,
					T1.ALWREAGE,
					T1.ALWUNPLANEMIHOLIDAY,
					T1.ALWMAXDISBCHECKREQ,
					T1.PRODUCTCATEGORY,
					T1.RPYHIERARCHY,
					T1.DEVELOPERFINANCE,
					T3.ENTITYCODE LOVDESCENTITYCODE,
					T8.ENTITYDESC LOVDESCENTITYDESC,
					T1.COSTOFFUNDS,
					T1.CHEQUECAPTUREREQ,
					T1.FINLTVCHECK,
					T1.PARTIALLYSECURED,
					T1.ALWADVEMI,
					T1.ADVEMIMINTERMS,
					T1.ADVEMIMAXTERMS,
					T1.ADVEMIDFTTERMS,
					T1.ADVEMISCHDMTHD,
					T1.BPIPFTDAYSBASIS,
					T1.ELIGIBILITYMETHODS,
					T1.ALWHYBRIDRATE,
					T1.FIXEDRATETENOR,
					T1.ODMINCAPAMOUNT,
					T1.ODRULECODE,
					T1.ALWZEROINTACC,
					T1.FINISALWPARTIALRPY,
					T1.AUTOREJECTIONDAYS,
					T1.TAXNOMAND,
					T1.PUTCALLREQUIRED,
					T1.GRCADVINTERSETREQ,
					T1.GRCADVTYPE,
					T1.GRCADVMINTERMS,
					T1.GRCADVMAXTERMS,
					T1.GRCADVDEFAULTTERMS,
					T1.ADVINTERSETREQ,
					T1.ADVTYPE,
					T1.ADVMINTERMS,
					T1.ADVMAXTERMS,
					T1.ADVDEFAULTTERMS,
					T1.ADVSTAGE,
					T1.DSFREQ,
					T1.CASHCOLLATERALREQ,
					T1.ALWEARLYPAYMETHODS,
					T1.TDSALLOWTOMODIFY,
					T1.TDSAPPLICABLETO,
					T1.ALWVAN,
					T1.VANALLOCATIONMETHOD,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING,
					T1.ALWSANCTIONAMT,
					T1.ALWSANCTIONAMTOVERRIDE,
					T1.SANBSDSCHDLE,
					T1.FINISRATERVWATGRCEND,
					T1.SCHDONPMTCAL,
					T1.AUTOAPPROVE,
					T1.ALWPLANNEDEMIINGRC,
					T1.GRCADJREQ,
					T1.GRCPERIODAFTRFULLDISB,
					T1.AUTOINCRGRCENDDATE,
					T1.GRCAUTOINCRMONTHS,
					T1.MAXAUTOINCRALLOWED,
					T1.THRLDTOMAINTAINGRCPRD,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.TXNCHRGREQ,
					T1.TXNCHRGCODE,
					T1.EXTNSNODGRACEDAYS,
					T1.COLLECCHRGCODEID,
					T1.COLLECTIONAMT
				FROM RMTFINANCETYPES T1
				JOIN SMTDIVISIONDETAIL T3 ON T1.FINDIVISION = T3.DIVISIONCODE
				LEFT JOIN STEPPOLICYHEADER T4 ON T1.DFTSTEPPOLICY = T4.POLICYCODE
				LEFT JOIN RULES T5 ON T1.DOWNPAYRULE = T5.RULEID
				LEFT JOIN RULES T6 ON T1.GRCPRICINGMETHOD = T6.RULEID
				LEFT JOIN RULES T7 ON T1.RPYPRICINGMETHOD = T7.RULEID
				LEFT JOIN ENTITY T8 ON T3.ENTITYCODE = T8.ENTITYCODE
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#62.94_post" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rmtfinancetypes_orgview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#62.95_pre" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_aview');
		 	]]>
		</sql>
	</changeSet>

	<changeSet id="ST#62.95" author="kavya.n">
		<createView viewName="RMTFINANCETYPES_AVIEW" replaceIfExists="true">
		   <![CDATA[
				SELECT T1.FINTYPE,
					T1.FINCATEGORY,
					T1.FINTYPEDESC,
					T1.FINCCY,
					T1.FINDAYSCALTYPE,
					T1.FINACTYPE,
					T1.FINCONTINGENTACTYPE,
					T1.FINISGENREF,
					T1.FINMAXAMOUNT,
					T1.FINMINAMOUNT,
					T1.FINISOPENNEWFINAC,
					T1.FINDFTSTMTFRQ,
					T1.FINISALWMD,
					T1.FINSCHDMTHD,
					T1.FINISALWGRACE,
					T1.FINHISTRETENSION,
					T1.EQUALREPAYMENT,
					T1.FINRATETYPE,
					T1.FINBASERATE,
					T1.FINSPLRATE,
					T1.FININTRATE,
					T1.FINMINRATE,
					T1.FINMAXRATE,
					T1.FINDFTINTFRQ,
					T1.FINISINTCPZ,
					T1.FINCPZFRQ,
					T1.FINISRVWALW,
					T1.FINRVWFRQ,
					T1.FINGRCRATETYPE,
					T1.FINGRCBASERATE,
					T1.FINGRCSPLRATE,
					T1.FINGRCINTRATE,
					T1.FINGRCMINRATE,
					T1.FINGRCMAXRATE,
					T1.FINGRCDFTINTFRQ,
					T1.FINGRCISINTCPZ,
					T1.FINGRCCPZFRQ,
					T1.FINGRCISRVWALW,
					T1.FINGRCRVWFRQ,
					T1.FINMINTERM,
					T1.FINMAXTERM,
					T1.FINDFTTERMS,
					T1.FINRPYFRQ,
					T1.FINREPAYMETHOD,
					T1.FINISALWPARTIALRPY,
					T1.FINISALWDIFFERMENT,
					T1.FINMAXDIFFERMENT,
					T1.FINISALWEARLYRPY,
					T1.FINISALWEARLYSETTLE,
					T1.FINODRPYTRIES,
					T1.FINEARLYPAYRULE,
					T1.FINEARLYSETTLERULE,
					T1.FINDEPOSITRESTRICTEDTO,
					T1.FINAEBUYORINCEPTION,
					T1.FINAESELLORMATURITY,
					T1.FINISACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.STEPFINANCE,
					T1.STEPPINGMANDATORY,
					T1.ALWMANUALSTEPS,
					T1.ALWDSTEPPOLICIES,
					T1.DFTSTEPPOLICY,
					T4.ACTYPEDESC LOVDESCFINCONTINGENTACTYPENAME,
					T5.ACTYPEDESC LOVDESCFINACTYPENAME,
					T1.FINISDWPAYREQUIRED,
					T1.FINRVWRATEAPPLFOR,
					T1.FINALWRATECHANGEANYDATE,
					T1.FINISINTCPZATGRCEND,
					T1.FINELGRULECODE,
					T1.LIMITELGRULECODE,
					T1.FINSCHCALCODEONRVW,
					T1.ALWPLANDEFERMENT,
					T1.PLANDEFERCOUNT,
					T1.FINASSETTYPE,
					T1.PFTPAYACTYPE,
					T1.FINISOPENPFTPAYACC,
					T31.ACTYPEDESC LOVDESCPFTPAYACTYPENAME,
					T1.FINISALWGRCREPAY,
					T1.FINGRCSCHDMTHD,
					T1.FINGRCMARGIN,
					T1.FINMARGIN,
					T1.FINSCHEDULEON,
					T1.FINGRCSCHEDULEON,
					T1.FINCOMMITMENTREQ,
					T1.FINCOLLATERALREQ,
					T1.FINDEPRECIATIONREQ,
					T1.FINDEPRECIATIONFRQ,
					T1.FINBANKCONTINGENTACTYPE,
					T1.FINPROVISIONACTYPE,
					T38.ACTYPEDESC LOVDESCFINBANKCONTACTYPENAME,
					T39.ACTYPEDESC LOVDESCFINPROVISIONACTYPENAME,
					T1.ALLOWRIAINVESTMENT,
					T1.OVERRIDELIMIT,
					T1.LIMITREQUIRED,
					T1.FINCOMMITMENTOVRRIDE,
					T1.FINCOLLATERALOVRRIDE,
					T1.FINPFTUNCHANGED,
					T1.APPLYODPENALTY,
					T1.ODINCGRCDAYS,
					T1.ODCHARGETYPE,
					T1.ODGRACEDAYS,
					T1.ODCHARGECALON,
					T1.ODCHARGEAMTORPERC,
					T1.ODALLOWWAIVER,
					T1.ODMAXWAIVERPERC,
					T1.FINDIVISION,
					T48.DIVISIONCODEDESC LOVDESCFINDIVISIONNAME,
					T48.ENTITYCODE LOVDESCENTITYCODE,
					T1.FINSUSPACTYPE,
					T49.ACTYPEDESC LOVDESCFINSUSPACTYPENAME,
					T1.PRODUCT,
					T1.STARTDATE,
					T1.ENDDATE,
					T1.ALLOWDOWNPAYPGM,
					T1.REMARKS,
					T1.ALWEARLYPAYMETHODS,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.ALWADVANCERENT,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.ROLLOVERFINANCE,
					T1.ROLLOVERFRQ,
					T1.DOWNPAYRULE,
					T59.RULECODE DOWNPAYRULECODE,
					T59.RULECODEDESC DOWNPAYRULEDESC,
					T1.FINSUSPTRIGGER,
					T1.FINSUSPREMARKS,
					T1.ALWMULTIPARTYDISB,
					T1.COLLATERALTYPE,
					T1.TDSAPPLICABLE,
					T1.MANUALSCHEDULE,
					T1.APPLYGRCPRICING,
					T1.GRCPRICINGMETHOD,
					T1.APPLYRPYPRICING,
					T1.RPYPRICINGMETHOD,
					T1.RPYHIERARCHY,
					T67.RULECODE GRCPRICINGMETHODDESC,
					T68.RULECODE RPYPRICINGMETHODDESC,
					T1.DROPLINEOD,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.FINREPAYPFTONFRQ,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PFTDUESCHON,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.UNPLANEMIHLOCKPERIOD,
					T1.UNPLANEMICPZ,
					T1.REAGECPZ,
					T1.FDDLOCKPERIOD,
					T1.ALWDRPYMETHODS,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.ROUNDINGMODE,
					T1.ROUNDINGTARGET,
					T1.FREQUENCYDAYS,
					T1.QUICKDISB,
					T1.ALWREAGE,
					T1.ALWUNPLANEMIHOLIDAY,
					T1.ALWMAXDISBCHECKREQ,
					T1.FINTYPEDESC LOVDESCPROMOFINTYPEDESC,
					T1.PROFITCENTERID,
					T69.PROFITCENTERCODE,
					T69.PROFITCENTERDESC,
					T1.PRODUCTCATEGORY,
					T2.PRODUCTDESC FINCATEGORYDESC,
					T1.DEVELOPERFINANCE,
					T1.COSTOFFUNDS,
					T1.CHEQUECAPTUREREQ,
					T1.FINLTVCHECK,
					T1.PARTIALLYSECURED,
					T1.ALWADVEMI,
					T1.ADVEMIMINTERMS,
					T1.ADVEMIMAXTERMS,
					T1.ADVEMIDFTTERMS,
					T1.ADVEMISCHDMTHD,
					T1.BPIPFTDAYSBASIS,
					T1.ELIGIBILITYMETHODS,
					T1.ALWHYBRIDRATE,
					T1.FIXEDRATETENOR,
					T1.ODMINCAPAMOUNT,
					T1.ODRULECODE,
					T1.ALWZEROINTACC,
					T1.AUTOREJECTIONDAYS,
					T1.TAXNOMAND,
					T1.PUTCALLREQUIRED,
					T1.GRCADVINTERSETREQ,
					T1.GRCADVTYPE,
					T1.GRCADVMINTERMS,
					T1.GRCADVMAXTERMS,
					T1.GRCADVDEFAULTTERMS,
					T1.ADVINTERSETREQ,
					T1.ADVTYPE,
					T1.ADVMINTERMS,
					T1.ADVMAXTERMS,
					T1.ADVDEFAULTTERMS,
					T1.ADVSTAGE,
					T1.DSFREQ,
					T1.CASHCOLLATERALREQ,
					T1.TDSALLOWTOMODIFY,
					T1.TDSAPPLICABLETO,
					T1.ALWVAN,
					T1.VANALLOCATIONMETHOD,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING,
					T1.ALWSANCTIONAMT,
					T1.ALWSANCTIONAMTOVERRIDE,
					T1.SANBSDSCHDLE,
					T1.FINISRATERVWATGRCEND,
					T1.SCHDONPMTCAL,
					T1.AUTOAPPROVE,
					T1.ALWPLANNEDEMIINGRC,
					T1.GRCADJREQ,
					T1.GRCPERIODAFTRFULLDISB,
					T1.AUTOINCRGRCENDDATE,
					T1.GRCAUTOINCRMONTHS,
					T1.MAXAUTOINCRALLOWED,
					T1.THRLDTOMAINTAINGRCPRD,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.TXNCHRGREQ,
					T1.TXNCHRGCODE,
					T1.EXTNSNODGRACEDAYS,
					T1.COLLECCHRGCODEID,
					T1.COLLECTIONAMT
				FROM RMTFINANCETYPES T1
				LEFT JOIN BMTPRODUCT T2 ON T1.FINCATEGORY = T2.PRODUCTCODE
				LEFT JOIN RMTACCOUNTTYPES T4 ON T1.FINCONTINGENTACTYPE = T4.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T38 ON T1.FINBANKCONTINGENTACTYPE = T38.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T39 ON T1.FINPROVISIONACTYPE = T39.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T5 ON T1.FINACTYPE = T5.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T31 ON T1.PFTPAYACTYPE = T31.ACTYPE
				LEFT JOIN SMTDIVISIONDETAIL T48 ON T1.FINDIVISION = T48.DIVISIONCODE
				LEFT JOIN RMTACCOUNTTYPES T49 ON T1.FINSUSPACTYPE = T49.ACTYPE
				LEFT JOIN RULES T59 ON T1.DOWNPAYRULE = T59.RULEID
				LEFT JOIN RULES T67 ON T1.GRCPRICINGMETHOD = T67.RULEID
				LEFT JOIN RULES T68 ON T1.RPYPRICINGMETHOD = T68.RULEID
				LEFT JOIN PROFITCENTERS T69 ON T69.PROFITCENTERID = T1.PROFITCENTERID
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#62.95_post" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rmtfinancetypes_aview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#62.96_pre" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemain_tview');
		 	]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#62.96" author="kavya.n">
		<createView viewName="FINANCEMAIN_TVIEW" replaceIfExists="true">
		   <![CDATA[
				SELECT T1.FINREFERENCE,
					T1.INVESTMENTREF,
					T1.NUMBEROFTERMS,
					T1.GRCPERIODENDDATE,
					T1.ALLOWGRCPERIOD,
					T1.GRACEBASERATE,
					T1.GRACESPECIALRATE,
					T1.GRCPFTRATE,
					T1.GRCPFTFRQ,
					T1.NEXTGRCPFTDATE,
					T1.ALLOWGRCPFTRVW,
					T1.GRCPFTRVWFRQ,
					T1.NEXTGRCPFTRVWDATE,
					T1.ALLOWGRCCPZ,
					T1.GRCCPZFRQ,
					T1.NEXTGRCCPZDATE,
					T1.REPAYBASERATE,
					T1.REPAYSPECIALRATE,
					T1.REPAYPROFITRATE,
					T1.REPAYFRQ,
					T1.NEXTREPAYDATE,
					T1.REPAYPFTFRQ,
					T1.NEXTREPAYPFTDATE,
					T1.ALLOWREPAYRVW,
					T1.REPAYRVWFRQ,
					T1.NEXTREPAYRVWDATE,
					T1.ALLOWREPAYCPZ,
					T1.REPAYCPZFRQ,
					T1.NEXTREPAYCPZDATE,
					T1.MATURITYDATE,
					T1.CPZATGRACEEND,
					T1.DOWNPAYMENT,
					T1.GRACEFLATAMOUNT,
					T1.REQREPAYAMOUNT,
					T1.TOTALPROFIT,
					T1.TOTALCPZ,
					T1.TOTALGROSSPFT,
					T1.TOTALGROSSGRCPFT,
					T1.TOTALGRACEPFT,
					T1.TOTALGRACECPZ,
					T1.GRCRATEBASIS,
					T1.REPAYRATEBASIS,
					T1.FINTYPE,
					T1.FINREMARKS,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.REQMATURITY,
					T1.CALTERMS,
					T1.CALMATURITY,
					T1.FIRSTREPAY,
					T1.LASTREPAY,
					T1.FINSTARTDATE,
					T1.FINAMOUNT,
					T1.FINAMOUNT + T1.FEECHARGEAMT - T1.DOWNPAYMENT LOVDESCFINANCINGAMOUNT,
					T1.FINREPAYMENTAMOUNT,
					T1.CUSTID,
					T1.DEFFERMENTS,
					T1.PLANDEFERCOUNT,
					T1.FINBRANCH,
					T1.FINSOURCEID,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.ALLOWEDDEFFRQCHANGE,
					T1.AVAILEDDEFFRQCHANGE,
					T1.RECALTYPE,
					T1.FINASSETVALUE,
					T1.DISBACCOUNTID,
					T1.REPAYACCOUNTID,
					T1.FINISACTIVE,
					T1.LIMITVALID,
					T1.OVERRIDELIMIT,
					T1.SECURITYDEPOSIT,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T7.FINTYPEDESC LOVDESCFINTYPENAME,
					T7.FINMAXAMOUNT LOVDESCFINMAXAMT,
					T7.FINMINAMOUNT LOVDESCFINMINAMOUNT,
					T1.MINDOWNPAYPERC,
					T7.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
					T7.FINISDWPAYREQUIRED LOVDESCDWNPAYREQ,
					T7.FINMAXDIFFERMENT LOVDESCFINMAXDIFFERMENT,
					T12.BRANCHDESC LOVDESCFINBRANCHNAME,
					T12.BRANCHPROVINCE FINBRANCHPROVINCECODE,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.LASTREPAYRVWDATE,
					T1.LASTREPAYCPZDATE,
					T1.ALLOWGRCREPAY,
					T1.GRCSCHDMTHD,
					T1.GRCMARGIN,
					T1.REPAYMARGIN,
					T1.FINCURRASSETVALUE,
					T1.FINCOMMITMENTREF,
					T1.FINLIMITREF,
					T1.DEPRECIATIONFRQ,
					T1.FINCONTRACTDATE,
					T1.NEXTDEPDATE,
					T1.LASTDEPDATE,
					T1.FINACCOUNT,
					T1.FINCUSTPFTACCOUNT,
					T17.ACRTILLLBD LOVDESCACCRUEDTILLLBD,
					T7.FINRVWRATEAPPLFOR,
					T1.TOTALREPAYAMT,
					T1.CLOSINGSTATUS,
					T1.FINAPPROVEDDATE,
					T1.FEECHARGEAMT,
					T1.BLACKLISTED,
					T1.FINREPAYPFTONFRQ,
					T1.ANUALIZEDPERCRATE,
					T1.EFFECTIVERATEOFRETURN,
					T1.MIGRATEDFINANCE,
					T1.SCHEDULEMAINTAINED,
					T1.SCHEDULEREGENERATED,
					T1.FINPURPOSE,
					T39.LOANPURPOSEDESC LOVDESCFINPURPOSENAME,
					T1.FINSTATUS,
					T1.FINSTSREASON,
					T1.INITIATEUSER,
					T1.BANKNAME,
					T1.IBAN,
					T1.ACCOUNTTYPE,
					T1.DDAREFERENCENO,
					T7.FINSCHEDULEON LOVDESCFINSCHEDULEON,
					T1.CUSTDSR,
					T1.JOINTACCOUNT,
					T1.JOINTCUSTID,
					T1.DOWNPAYBANK,
					T1.DOWNPAYSUPL,
					T1.DOWNPAYACCOUNT,
					T1.SECURITYCOLLATERAL,
					T1.APPROVED,
					T1.DISCREPANCY,
					T1.LIMITAPPROVED,
					T1.GRACETERMS,
					T7.FINDIVISION LOVDESCFINDIVISION,
					T1.RCDMAINTAINSTS,
					T1.FINREPAYMETHOD,
					T1.GRCPROFITDAYSBASIS,
					T1.STEPFINANCE,
					T1.STEPTYPE,
					T1.STEPPOLICY,
					T1.ALWMANUALSTEPS,
					T1.NOOFSTEPS,
					T1.LINKEDFINREF,
					T1.NEXTUSERID,
					T1.PRIORITY,
					T24.POLICYDESC LOVDESCSTEPPOLICYNAME,
					T1.GRCMINRATE,
					T1.GRCMAXRATE,
					T1.RPYMINRATE,
					T1.RPYMAXRATE,
					T1.DEVIATIONAPPROVAL,
					T1.MANUALSCHEDULE,
					T1.TAKEOVERFINANCE,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.SUPPLEMENTRENT,
					T1.INCREASEDCOST,
					T1.CREDITINSAMT,
					T1.ROLLOVERFRQ,
					T1.NEXTROLLOVERDATE,
					T27.CUSTSTSDESCRIPTION,
					T1.SHARIASTATUS,
					T1.INITIATEDATE,
					T1.FINPREAPPROVEDREF,
					T1.MMAID,
					T1.ACCOUNTSOFFICER,
					T1.FEEACCOUNTID,
					T1.FINCANCELAC,
					T28.DEALERNAME LOVDESCACCOUNTSOFFICER,
					T28.DEALERCITY LOVDESCSOURCECITY,
					T1.DSACODE,
					T30.ROFFICERDESC DSACODEDESC,
					T1.TDSAPPLICABLE,
					T1.MANDATEID,
					T1.DROPLINEFRQ,
					T1.FIRSTDROPLINEDATE,
					T1.PFTSERVICINGODLIMIT,
					T1.INSURANCEAMT,
					T1.DEDUCTINSDISB,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.CALROUNDINGMODE,
					T1.ALWMULTIDISB,
					T1.APPLICATIONNO,
					T1.REFERRALID,
					T33.ROFFICERDESC REFERRALIDDESC,
					T1.DMACODE,
					T34.ROFFICERDESC DMACODEDESC,
					T1.SALESDEPARTMENT,
					T35.DEPTDESC SALESDEPARTMENTDESC,
					T1.QUICKDISB,
					T1.WIFREFERENCE,
					T1.UNPLANEMIHLOCKPERIOD,
					T1.UNPLANEMICPZ,
					T1.REAGECPZ,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.AVAILEDUNPLANEMI,
					T1.AVAILEDREAGEH,
					T1.BPIAMOUNT,
					T1.DEDUCTFEEDISB,
					T1.RVWRATEAPPLFOR,
					T1.SCHCALONRVW,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.PROMOTIONCODE,
					T1.RESTRUCTURELOAN,
					T1.OLDFINREFERENCE,
					T1.REAGEBUCKET,
					T1.FINCATEGORY,
					T1.PRODUCTCATEGORY,
					T1.ROUNDINGTARGET,
					T36.ENTITYCODE LOVDESCENTITYCODE,
					T1.ELIGIBILITYMETHOD,
					T38.FIELDCODEVALUE LOVELIGIBILITYMETHOD,
					T38.VALUEDESC LOVDESCELIGIBILITYMETHOD,
					T1.EMPLOYEENAME,
					T37.ROFFICERDESC EMPLOYEENAMEDESC,
					T1.SAMPLINGREQUIRED,
					T1.LEGALREQUIRED,
					T1.GRCMAXAMOUNT,
					T1.CONNECTOR,
					T40.DEALERNAME CONNECTORCODE,
					T40.DEALERCITY CONNECTORDESC,
					T1.ADVANCEEMI,
					T1.ADVEMITERMS,
					T1.BPIPFTDAYSBASIS,
					T1.FIXEDRATETENOR,
					T1.FIXEDTENORRATE,
					T12.BRANCHTEL FINBRANCHCONTACT,
					T1.PROCESSATTRIBUTES,
					T1.BUSINESSVERTICAL,
					BV.CODE BUSINESSVERTICALCODE,
					BV.DESCRIPTION BUSINESSVERTICALDESC,
					T1.GRCADVTYPE,
					T1.GRCADVTERMS,
					T1.ADVTYPE,
					T1.ADVTERMS,
					T1.ADVSTAGE,
					T1.TDSPERCENTAGE,
					T1.TDSSTARTDATE,
					T1.TDSENDDATE,
					T1.TDSLIMITAMT,
					T1.VANREQ,
					T1.VANCODE,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING,
					T1.SANBSDSCHDLE,
					T1.PROMOTIONSEQID,
					T1.SVAMOUNT,
					T1.CBAMOUNT,
					T1.APPLIEDLOANAMT,
					T1.FINISRATERVWATGRCEND,
					T1.PLANEMIHALWINGRACE,
					T1.ALWGRCADJ,
					T1.ENDGRCPERIODAFTRFULLDISB,
					T1.AUTOINCGRCENDDATE,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS,
					T1.SCHDVERSION,
                    T1.TXNCHRGREQ,
					T1.ODCALCULATEDCHARGE,
					T1.ODCHARGEAMTORPERC,
					T1.ODCHARGECALON
				FROM FINANCEMAIN_TEMP T1
				JOIN RMTFINANCETYPES T7 ON T1.FINTYPE  = T7.FINTYPE 
				LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH  = T12.BRANCHCODE 
				LEFT JOIN FINPFTDETAILS T17 ON T17.FINREFERENCE  = T1.FINREFERENCE 
				LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY  = T24.POLICYCODE 
				LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS  = T27.CUSTSTSCODE 
				LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
				LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE  = T30.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID  = T33.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE  = T34.ROFFICERCODE 
				LEFT JOIN BMTDEPARTMENTS T35 ON T1.SALESDEPARTMENT  = T35.DEPTCODE 
				LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION  = T36.DIVISIONCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME  = T37.ROFFICERCODE 
				LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE  = 'ELGMETHOD' 
				LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE  = T39.LOANPURPOSECODE 
				LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
				LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
			]]>
		</createView>
	</changeSet>
	
	<changeSet id="ST#62.96_post" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemain_tview');
		 	]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#62.97_pre" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemain_aview');
		 	]]>
		</sql>
	</changeSet>

	<changeSet id="ST#62.97" author="kavya.n">
		<createView viewName="FINANCEMAIN_AVIEW" replaceIfExists="true">
			<![CDATA[ 
				SELECT T1.FINREFERENCE,
					T1.INVESTMENTREF,
					T1.NUMBEROFTERMS,
					T1.GRCPERIODENDDATE,
					T1.ALLOWGRCPERIOD,
					T1.GRACEBASERATE,
					T1.GRACESPECIALRATE,
					T1.GRCPFTRATE,
					T1.GRCPFTFRQ,
					T1.NEXTGRCPFTDATE,
					T1.ALLOWGRCPFTRVW,
					T1.GRCPFTRVWFRQ,
					T1.NEXTGRCPFTRVWDATE,
					T1.ALLOWGRCCPZ,
					T1.GRCCPZFRQ,
					T1.NEXTGRCCPZDATE,
					T1.REPAYBASERATE,
					T1.REPAYSPECIALRATE,
					T1.REPAYPROFITRATE,
					T1.REPAYFRQ,
					T1.NEXTREPAYDATE,
					T1.REPAYPFTFRQ,
					T1.NEXTREPAYPFTDATE,
					T1.ALLOWREPAYRVW,
					T1.REPAYRVWFRQ,
					T1.NEXTREPAYRVWDATE,
					T1.ALLOWREPAYCPZ,
					T1.REPAYCPZFRQ,
					T1.NEXTREPAYCPZDATE,
					T1.MATURITYDATE,
					T1.CPZATGRACEEND,
					T1.DOWNPAYMENT,
					T1.GRACEFLATAMOUNT,
					T1.REQREPAYAMOUNT,
					T1.TOTALPROFIT,
					T1.TOTALCPZ,
					T1.TOTALGROSSPFT,
					T1.TOTALGROSSGRCPFT,
					T1.TOTALGRACEPFT,
					T1.TOTALGRACECPZ,
					T1.GRCRATEBASIS,
					T1.REPAYRATEBASIS,
					T1.FINTYPE,
					T1.FINREMARKS,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.REQMATURITY,
					T1.CALTERMS,
					T1.CALMATURITY,
					T1.FIRSTREPAY,
					T1.LASTREPAY,
					T1.FINSTARTDATE,
					T1.FINAMOUNT,
					T1.FINAMOUNT + T1.FEECHARGEAMT - T1.DOWNPAYMENT LOVDESCFINANCINGAMOUNT,
					T1.FINREPAYMENTAMOUNT,
					T1.CUSTID,
					T1.DEFFERMENTS,
					T1.PLANDEFERCOUNT,
					T1.FINBRANCH,
					T1.FINSOURCEID,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.ALLOWEDDEFFRQCHANGE,
					T1.AVAILEDDEFFRQCHANGE,
					T1.RECALTYPE,
					T1.FINASSETVALUE,
					T1.DISBACCOUNTID,
					T1.REPAYACCOUNTID,
					T1.FINISACTIVE,
					T1.LIMITVALID,
					T1.OVERRIDELIMIT,
					T1.SECURITYDEPOSIT,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T7.FINTYPEDESC LOVDESCFINTYPENAME,
					T7.FINMAXAMOUNT LOVDESCFINMAXAMT,
					T7.FINMINAMOUNT LOVDESCFINMINAMOUNT,
					T1.MINDOWNPAYPERC,
					T7.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
					T7.FINISDWPAYREQUIRED LOVDESCDWNPAYREQ,
					T7.FINMAXDIFFERMENT LOVDESCFINMAXDIFFERMENT,
					T12.BRANCHDESC LOVDESCFINBRANCHNAME,
					T12.BRANCHPROVINCE FINBRANCHPROVINCECODE,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.LASTREPAYRVWDATE,
					T1.LASTREPAYCPZDATE,
					T1.ALLOWGRCREPAY,
					T1.GRCSCHDMTHD,
					T1.GRCMARGIN,
					T1.REPAYMARGIN,
					T1.FINCURRASSETVALUE,
					T1.FINCOMMITMENTREF,
					T1.FINLIMITREF,
					T1.DEPRECIATIONFRQ,
					T1.FINCONTRACTDATE,
					T1.NEXTDEPDATE,
					T1.LASTDEPDATE,
					T1.FINACCOUNT,
					T1.FINCUSTPFTACCOUNT,
					T17.ACRTILLLBD LOVDESCACCRUEDTILLLBD,
					T7.FINRVWRATEAPPLFOR,
					T1.TOTALREPAYAMT,
					T1.CLOSINGSTATUS,
					T1.FINAPPROVEDDATE,
					T1.FEECHARGEAMT,
					T1.BLACKLISTED,
					T1.FINREPAYPFTONFRQ,
					T1.ANUALIZEDPERCRATE,
					T1.EFFECTIVERATEOFRETURN,
					T1.MIGRATEDFINANCE,
					T1.SCHEDULEMAINTAINED,
					T1.SCHEDULEREGENERATED,
					T1.FINPURPOSE,
					T39.LOANPURPOSEDESC LOVDESCFINPURPOSENAME,
					T1.FINSTATUS,
					T1.FINSTSREASON,
					T1.INITIATEUSER,
					T1.BANKNAME,
					T1.IBAN,
					T1.ACCOUNTTYPE,
					T1.DDAREFERENCENO,
					T7.FINSCHEDULEON LOVDESCFINSCHEDULEON,
					T1.CUSTDSR,
					T1.JOINTACCOUNT,
					T1.JOINTCUSTID,
					T1.DOWNPAYBANK,
					T1.DOWNPAYSUPL,
					T1.DOWNPAYACCOUNT,
					T1.SECURITYCOLLATERAL,
					T1.APPROVED,
					T1.DISCREPANCY,
					T1.LIMITAPPROVED,
					T1.GRACETERMS,
					T7.FINDIVISION LOVDESCFINDIVISION,
					T1.RCDMAINTAINSTS,
					T1.FINREPAYMETHOD,
					T1.GRCPROFITDAYSBASIS,
					T1.STEPFINANCE,
					T1.STEPTYPE,
					T1.STEPPOLICY,
					T1.ALWMANUALSTEPS,
					T1.NOOFSTEPS,
					T1.LINKEDFINREF,
					T1.NEXTUSERID,
					T1.PRIORITY,
					T24.POLICYDESC LOVDESCSTEPPOLICYNAME,
					T1.GRCMINRATE,
					T1.GRCMAXRATE,
					T1.RPYMINRATE,
					T1.RPYMAXRATE,
					T1.DEVIATIONAPPROVAL,
					T1.MANUALSCHEDULE,
					T1.TAKEOVERFINANCE,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.SUPPLEMENTRENT,
					T1.INCREASEDCOST,
					T1.CREDITINSAMT,
					T1.ROLLOVERFRQ,
					T1.NEXTROLLOVERDATE,
					T27.CUSTSTSDESCRIPTION,
					T1.SHARIASTATUS,
					T1.INITIATEDATE,
					T1.FINPREAPPROVEDREF,
					T1.MMAID,
					T1.ACCOUNTSOFFICER,
					T1.FEEACCOUNTID,
					T1.FINCANCELAC,
					T28.DEALERNAME LOVDESCACCOUNTSOFFICER,
					T28.DEALERCITY LOVDESCSOURCECITY,
					T1.DSACODE,
					T30.ROFFICERDESC DSACODEDESC,
					T1.TDSAPPLICABLE,
					T1.MANDATEID,
					T1.DROPLINEFRQ,
					T1.FIRSTDROPLINEDATE,
					T1.PFTSERVICINGODLIMIT,
					T1.INSURANCEAMT,
					T1.DEDUCTINSDISB,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.CALROUNDINGMODE,
					T1.ALWMULTIDISB,
					T1.APPLICATIONNO,
					T1.REFERRALID,
					T33.ROFFICERDESC REFERRALIDDESC,
					T1.DMACODE,
					T34.ROFFICERDESC DMACODEDESC,
					T1.SALESDEPARTMENT,
					T35.DEPTDESC SALESDEPARTMENTDESC,
					T1.QUICKDISB,
					T1.WIFREFERENCE,
					T1.UNPLANEMIHLOCKPERIOD,
					T1.UNPLANEMICPZ,
					T1.REAGECPZ,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.AVAILEDUNPLANEMI,
					T1.AVAILEDREAGEH,
					T1.BPIAMOUNT,
					T1.DEDUCTFEEDISB,
					T1.RVWRATEAPPLFOR,
					T1.SCHCALONRVW,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.PROMOTIONCODE,
					T1.RESTRUCTURELOAN,
					T1.OLDFINREFERENCE,
					T1.REAGEBUCKET,
					T1.FINCATEGORY,
					T1.PRODUCTCATEGORY,
					T1.ROUNDINGTARGET,
					T36.ENTITYCODE LOVDESCENTITYCODE,
					T1.ELIGIBILITYMETHOD,
					T38.FIELDCODEVALUE LOVELIGIBILITYMETHOD,
					T38.VALUEDESC LOVDESCELIGIBILITYMETHOD,
					T1.EMPLOYEENAME,
					T37.ROFFICERDESC EMPLOYEENAMEDESC,
					T1.SAMPLINGREQUIRED,
					T1.LEGALREQUIRED,
					T1.GRCMAXAMOUNT,
					T1.CONNECTOR,
					T40.DEALERNAME CONNECTORCODE,
					T40.DEALERCITY CONNECTORDESC,
					T1.ADVANCEEMI,
					T1.ADVEMITERMS,
					T1.BPIPFTDAYSBASIS,
					T1.FIXEDRATETENOR,
					T1.FIXEDTENORRATE,
					T12.BRANCHTEL FINBRANCHCONTACT,
					T1.PROCESSATTRIBUTES,
					T1.BUSINESSVERTICAL,
					BV.CODE BUSINESSVERTICALCODE,
					BV.DESCRIPTION BUSINESSVERTICALDESC,
					T1.GRCADVTYPE,
					T1.GRCADVTERMS,
					T1.ADVTYPE,
					T1.ADVTERMS,
					T1.ADVSTAGE,
					T1.TDSPERCENTAGE,
					T1.TDSSTARTDATE,
					T1.TDSENDDATE,
					T1.TDSLIMITAMT,
					T1.VANREQ,
					T1.VANCODE,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING,
					T1.SANBSDSCHDLE,
					T1.PROMOTIONSEQID,
					T1.SVAMOUNT,
					T1.CBAMOUNT,
					T1.APPLIEDLOANAMT,
					T1.FINISRATERVWATGRCEND,
					T1.PLANEMIHALWINGRACE,
					T1.ALWGRCADJ,
					T1.ENDGRCPERIODAFTRFULLDISB,
					T1.AUTOINCGRCENDDATE,
					C.CUSTCIF LOVDESCCUSTCIF,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS,
					T1.SCHDVERSION,
                    T1.TXNCHRGREQ,
				    T1.ODCALCULATEDCHARGE,
				    T1.ODCHARGEAMTORPERC,
				    T1.ODCHARGECALON
				 FROM FINANCEMAIN T1
				 JOIN RMTFINANCETYPES T7 ON T1.FINTYPE = T7.FINTYPE 
				 LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH  = T12.BRANCHCODE 
				 LEFT JOIN FINPFTDETAILS T17 ON T17.FINREFERENCE  = T1.FINREFERENCE 
				 LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY  = T24.POLICYCODE 
				 LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS  = T27.CUSTSTSCODE 
				 LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
				 LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE  = T30.ROFFICERCODE 
				 LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID  = T33.ROFFICERCODE 
				 LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE  = T34.ROFFICERCODE 
				 LEFT JOIN BMTDEPARTMENTS T35 ON T1.SALESDEPARTMENT  = T35.DEPTCODE 
				 LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION  = T36.DIVISIONCODE 
				 LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME  = T37.ROFFICERCODE 
				 LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE  = 'ELGMETHOD' 
				 LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE  = T39.LOANPURPOSECODE 
				 LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
				 LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
				 INNER JOIN CUSTOMERS C ON C.CUSTID = t1.CUSTID
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#62.97_post" author="kavya.n" dbms="postgresql">
		<sql>	
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_aview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#62.98_pre" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemain_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#62.98" author="kavya.n">
		<createView viewName="FINANCEMAIN_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINREFERENCE,
				    T1.INVESTMENTREF,
				    T1.NUMBEROFTERMS,
				    T1.GRCPERIODENDDATE,
				    T1.ALLOWGRCPERIOD,
				    T1.GRACEBASERATE,
				    T1.GRACESPECIALRATE,
				    T1.GRCPFTRATE,
				    T1.GRCPFTFRQ,
				    T1.NEXTGRCPFTDATE,
				    T1.ALLOWGRCPFTRVW,
				    T1.GRCPFTRVWFRQ,
				    T1.NEXTGRCPFTRVWDATE,
				    T1.ALLOWGRCCPZ,
				    T1.GRCCPZFRQ,
				    T1.NEXTGRCCPZDATE,
				    T1.REPAYBASERATE,
				    T1.REPAYSPECIALRATE,
				    T1.REPAYPROFITRATE,
				    T1.REPAYFRQ,
				    T1.NEXTREPAYDATE,
				    T1.REPAYPFTFRQ,
				    T1.NEXTREPAYPFTDATE,
				    T1.ALLOWREPAYRVW,
				    T1.REPAYRVWFRQ,
				    T1.NEXTREPAYRVWDATE,
				    T1.ALLOWREPAYCPZ,
				    T1.REPAYCPZFRQ,
				    T1.NEXTREPAYCPZDATE,
				    T1.MATURITYDATE,
				    T1.CPZATGRACEEND,
				    T1.DOWNPAYMENT,
				    T1.GRACEFLATAMOUNT,
				    T1.REQREPAYAMOUNT,
				    T1.TOTALPROFIT,
				    T1.TOTALCPZ,
				    T1.TOTALGROSSPFT,
				    T1.TOTALGROSSGRCPFT,
				    T1.TOTALGRACEPFT,
				    T1.TOTALGRACECPZ,
				    T1.GRCRATEBASIS,
				    T1.REPAYRATEBASIS,
				    T1.FINTYPE,
				    T1.FINREMARKS,
				    T1.FINCCY,
				    T1.SCHEDULEMETHOD,
				    T1.PROFITDAYSBASIS,
				    T1.REQMATURITY,
				    T1.CALTERMS,
				    T1.CALMATURITY,
				    T1.FIRSTREPAY,
				    T1.LASTREPAY,
				    T1.FINSTARTDATE,
				    T1.FINAMOUNT,
				    T1.FINAMOUNT + T1.FEECHARGEAMT - T1.DOWNPAYMENT LOVDESCFINANCINGAMOUNT,
				    T1.FINREPAYMENTAMOUNT,
				    T1.CUSTID,
				    T1.DEFFERMENTS,
				    T1.PLANDEFERCOUNT,
				    T1.FINBRANCH,
				    T1.FINSOURCEID,
				    T1.ALLOWEDDEFRPYCHANGE,
				    T1.AVAILEDDEFRPYCHANGE,
				    T1.ALLOWEDDEFFRQCHANGE,
				    T1.AVAILEDDEFFRQCHANGE,
				    T1.RECALTYPE,
				    T1.FINASSETVALUE,
				    T1.DISBACCOUNTID,
				    T1.REPAYACCOUNTID,
				    T1.FINISACTIVE,
				    T1.LIMITVALID,
				    T1.OVERRIDELIMIT,
				    T1.SECURITYDEPOSIT,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T7.FINTYPEDESC LOVDESCFINTYPENAME,
				    T7.FINMAXAMOUNT LOVDESCFINMAXAMT,
				    T7.FINMINAMOUNT LOVDESCFINMINAMOUNT,
				    T1.MINDOWNPAYPERC,
				    T7.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
				    T7.FINISDWPAYREQUIRED LOVDESCDWNPAYREQ,
				    T7.FINMAXDIFFERMENT LOVDESCFINMAXDIFFERMENT,
				    T12.BRANCHDESC LOVDESCFINBRANCHNAME,
				    T12.BRANCHPROVINCE FINBRANCHPROVINCECODE,
				    T1.LASTREPAYDATE,
				    T1.LASTREPAYPFTDATE,
				    T1.LASTREPAYRVWDATE,
				    T1.LASTREPAYCPZDATE,
				    T1.ALLOWGRCREPAY,
				    T1.GRCSCHDMTHD,
				    T1.GRCMARGIN,
				    T1.REPAYMARGIN,
				    T1.FINCURRASSETVALUE,
				    T1.FINCOMMITMENTREF,
				    T1.FINLIMITREF,
				    T1.DEPRECIATIONFRQ,
				    T1.FINCONTRACTDATE,
				    T1.NEXTDEPDATE,
				    T1.LASTDEPDATE,
				    T1.FINACCOUNT,
				    T1.FINCUSTPFTACCOUNT,
				    T17.ACRTILLLBD LOVDESCACCRUEDTILLLBD,
				    T7.FINRVWRATEAPPLFOR,
				    T1.TOTALREPAYAMT,
				    T1.CLOSINGSTATUS,
				    T1.FINAPPROVEDDATE,
				    T1.FEECHARGEAMT,
				    T1.BLACKLISTED,
				    T1.FINREPAYPFTONFRQ,
				    T1.ANUALIZEDPERCRATE,
				    T1.EFFECTIVERATEOFRETURN,
				    T1.MIGRATEDFINANCE,
				    T1.SCHEDULEMAINTAINED,
				    T1.SCHEDULEREGENERATED,
				    T1.FINPURPOSE,
				    T39.LOANPURPOSEDESC LOVDESCFINPURPOSENAME,
				    T1.FINSTATUS,
				    T1.FINSTSREASON,
				    T1.INITIATEUSER,
				    T1.BANKNAME,
				    T1.IBAN,
				    T1.ACCOUNTTYPE,
				    T1.DDAREFERENCENO,
				    T7.FINSCHEDULEON LOVDESCFINSCHEDULEON,
				    T1.CUSTDSR,
				    T1.JOINTACCOUNT,
				    T1.JOINTCUSTID,
				    T1.DOWNPAYBANK,
				    T1.DOWNPAYSUPL,
				    T1.DOWNPAYACCOUNT,
				    T1.SECURITYCOLLATERAL,
				    T1.APPROVED,
				    T1.DISCREPANCY,
				    T1.LIMITAPPROVED,
				    T1.GRACETERMS,
				    T7.FINDIVISION LOVDESCFINDIVISION,
				    T1.RCDMAINTAINSTS,
				    T1.FINREPAYMETHOD,
				    T1.GRCPROFITDAYSBASIS,
				    T1.STEPFINANCE,
				    T1.STEPTYPE,
				    T1.STEPPOLICY,
				    T1.ALWMANUALSTEPS,
				    T1.NOOFSTEPS,
				    T1.LINKEDFINREF,
				    T1.NEXTUSERID,
				    T1.PRIORITY,
				    T24.POLICYDESC LOVDESCSTEPPOLICYNAME,
				    T1.GRCMINRATE,
				    T1.GRCMAXRATE,
				    T1.RPYMINRATE,
				    T1.RPYMAXRATE,
				    T1.DEVIATIONAPPROVAL,
				    T1.MANUALSCHEDULE,
				    T1.TAKEOVERFINANCE,
				    T1.GRCADVBASERATE,
				    T1.GRCADVMARGIN,
				    T1.GRCADVPFTRATE,
				    T1.RPYADVBASERATE,
				    T1.RPYADVMARGIN,
				    T1.RPYADVPFTRATE,
				    T1.SUPPLEMENTRENT,
				    T1.INCREASEDCOST,
				    T1.CREDITINSAMT,
				    T1.ROLLOVERFRQ,
				    T1.NEXTROLLOVERDATE,
				    T27.CUSTSTSDESCRIPTION,
				    T1.SHARIASTATUS,
				    T1.INITIATEDATE,
				    T1.FINPREAPPROVEDREF,
				    T1.MMAID,
				    T1.ACCOUNTSOFFICER,
				    T1.FEEACCOUNTID,
				    T1.FINCANCELAC,
				    T28.DEALERNAME LOVDESCACCOUNTSOFFICER,
				    T28.DEALERCITY LOVDESCSOURCECITY,
				    T1.DSACODE,
				    T30.ROFFICERDESC DSACODEDESC,
				    T1.TDSAPPLICABLE,
				    T1.MANDATEID,
				    T1.DROPLINEFRQ,
				    T1.FIRSTDROPLINEDATE,
				    T1.PFTSERVICINGODLIMIT,
				    T1.INSURANCEAMT,
				    T1.DEDUCTINSDISB,
				    T1.ALWBPI,
				    T1.BPITREATMENT,
				    T1.PLANEMIHALW,
				    T1.PLANEMIHMETHOD,
				    T1.PLANEMIHMAXPERYEAR,
				    T1.PLANEMIHMAX,
				    T1.PLANEMIHLOCKPERIOD,
				    T1.PLANEMICPZ,
				    T1.CALROUNDINGMODE,
				    T1.ALWMULTIDISB,
				    T1.APPLICATIONNO,
				    T1.REFERRALID,
				    T33.ROFFICERDESC REFERRALIDDESC,
				    T1.DMACODE,
				    T34.ROFFICERDESC DMACODEDESC,
				    T1.SALESDEPARTMENT,
				    T35.DEPTDESC SALESDEPARTMENTDESC,
				    T1.QUICKDISB,
				    T1.WIFREFERENCE,
				    T1.UNPLANEMIHLOCKPERIOD,
				    T1.UNPLANEMICPZ,
				    T1.REAGECPZ,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.AVAILEDUNPLANEMI,
				    T1.AVAILEDREAGEH,
				    T1.BPIAMOUNT,
				    T1.DEDUCTFEEDISB,
				    T1.RVWRATEAPPLFOR,
				    T1.SCHCALONRVW,
				    T1.PASTDUEPFTCALMTHD,
				    T1.PASTDUEPFTMARGIN,
				    T1.DROPPINGMETHOD,
				    T1.RATECHGANYDAY,
				    T1.PROMOTIONCODE,
				    T1.RESTRUCTURELOAN,
				    T1.OLDFINREFERENCE,
				    T1.REAGEBUCKET,
				    T1.FINCATEGORY,
				    T1.PRODUCTCATEGORY,
				    T1.ROUNDINGTARGET,
				    T36.ENTITYCODE LOVDESCENTITYCODE,
				    T1.ELIGIBILITYMETHOD,
				    T38.FIELDCODEVALUE LOVELIGIBILITYMETHOD,
				    T38.VALUEDESC LOVDESCELIGIBILITYMETHOD,
				    T1.EMPLOYEENAME,
				    T37.ROFFICERDESC EMPLOYEENAMEDESC,
				    T1.SAMPLINGREQUIRED,
				    T1.LEGALREQUIRED,
				    T1.GRCMAXAMOUNT,
				    T1.CONNECTOR,
				    T40.DEALERNAME CONNECTORCODE,
				    T40.DEALERCITY CONNECTORDESC,
				    T1.ADVANCEEMI,
				    T1.ADVEMITERMS,
				    T1.BPIPFTDAYSBASIS,
				    T1.FIXEDRATETENOR,
				    T1.FIXEDTENORRATE,
				    T12.BRANCHTEL FINBRANCHCONTACT,
				    T1.PROCESSATTRIBUTES,
				    T1.BUSINESSVERTICAL,
				    BV.CODE BUSINESSVERTICALCODE,
				    BV.DESCRIPTION BUSINESSVERTICALDESC,
				    T1.GRCADVTYPE,
				    T1.GRCADVTERMS,
				    T1.ADVTYPE,
				    T1.ADVTERMS,
				    T1.ADVSTAGE,
				    T1.TDSPERCENTAGE,
				    T1.TDSSTARTDATE,
				    T1.TDSENDDATE,
				    T1.TDSLIMITAMT,
				    T1.VANREQ,
				    T1.VANCODE,
				    T1.ALLOWDRAWINGPOWER,
				    T1.ALLOWREVOLVING,
				    T1.SANBSDSCHDLE,
				    T1.PROMOTIONSEQID,
				    T1.SVAMOUNT,
				    T1.CBAMOUNT,
				    T1.APPLIEDLOANAMT,
				    T1.FINISRATERVWATGRCEND,
					T1.PLANEMIHALWINGRACE,
					T1.ALWGRCADJ,
					T1.ENDGRCPERIODAFTRFULLDISB,
					T1.AUTOINCGRCENDDATE,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS,
					T1.SCHDVERSION,
                    T1.TXNCHRGREQ,
					T1.ODCALCULATEDCHARGE,
					T1.ODCHARGEAMTORPERC,
					T1.ODCHARGECALON
				FROM FINANCEMAIN_TEMP T1
				JOIN RMTFINANCETYPES T7 ON T1.FINTYPE  = T7.FINTYPE 
				LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH  = T12.BRANCHCODE 
				LEFT JOIN FINPFTDETAILS T17 ON T17.FINREFERENCE  = T1.FINREFERENCE 
				LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY  = T24.POLICYCODE 
				LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS  = T27.CUSTSTSCODE 
				LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
				LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE  = T30.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID  = T33.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE  = T34.ROFFICERCODE 
				LEFT JOIN BMTDEPARTMENTS T35 ON T1.SALESDEPARTMENT  = T35.DEPTCODE 
				LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION  = T36.DIVISIONCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME  = T37.ROFFICERCODE 
				LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE  = 'ELGMETHOD' 
				LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE  = T39.LOANPURPOSECODE 
				LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
				LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
				UNION ALL
				SELECT T1.FINREFERENCE,
				    T1.INVESTMENTREF,
				    T1.NUMBEROFTERMS,
				    T1.GRCPERIODENDDATE,
				    T1.ALLOWGRCPERIOD,
				    T1.GRACEBASERATE,
				    T1.GRACESPECIALRATE,
				    T1.GRCPFTRATE,
				    T1.GRCPFTFRQ,
				    T1.NEXTGRCPFTDATE,
				    T1.ALLOWGRCPFTRVW,
				    T1.GRCPFTRVWFRQ,
				    T1.NEXTGRCPFTRVWDATE,
				    T1.ALLOWGRCCPZ,
				    T1.GRCCPZFRQ,
				    T1.NEXTGRCCPZDATE,
				    T1.REPAYBASERATE,
				    T1.REPAYSPECIALRATE,
				    T1.REPAYPROFITRATE,
				    T1.REPAYFRQ,
				    T1.NEXTREPAYDATE,
				    T1.REPAYPFTFRQ,
				    T1.NEXTREPAYPFTDATE,
				    T1.ALLOWREPAYRVW,
				    T1.REPAYRVWFRQ,
				    T1.NEXTREPAYRVWDATE,
				    T1.ALLOWREPAYCPZ,
				    T1.REPAYCPZFRQ,
				    T1.NEXTREPAYCPZDATE,
				    T1.MATURITYDATE,
				    T1.CPZATGRACEEND,
				    T1.DOWNPAYMENT,
				    T1.GRACEFLATAMOUNT,
				    T1.REQREPAYAMOUNT,
				    T1.TOTALPROFIT,
				    T1.TOTALCPZ,
				    T1.TOTALGROSSPFT,
				    T1.TOTALGROSSGRCPFT,
				    T1.TOTALGRACEPFT,
				    T1.TOTALGRACECPZ,
				    T1.GRCRATEBASIS,
				    T1.REPAYRATEBASIS,
				    T1.FINTYPE,
				    T1.FINREMARKS,
				    T1.FINCCY,
				    T1.SCHEDULEMETHOD,
				    T1.PROFITDAYSBASIS,
				    T1.REQMATURITY,
				    T1.CALTERMS,
				    T1.CALMATURITY,
				    T1.FIRSTREPAY,
				    T1.LASTREPAY,
				    T1.FINSTARTDATE,
				    T1.FINAMOUNT,
				    T1.FINAMOUNT + T1.FEECHARGEAMT - T1.DOWNPAYMENT LOVDESCFINANCINGAMOUNT,
				    T1.FINREPAYMENTAMOUNT,
				    T1.CUSTID,
				    T1.DEFFERMENTS,
				    T1.PLANDEFERCOUNT,
				    T1.FINBRANCH,
				    T1.FINSOURCEID,
				    T1.ALLOWEDDEFRPYCHANGE,
				    T1.AVAILEDDEFRPYCHANGE,
				    T1.ALLOWEDDEFFRQCHANGE,
				    T1.AVAILEDDEFFRQCHANGE,
				    T1.RECALTYPE,
				    T1.FINASSETVALUE,
				    T1.DISBACCOUNTID,
				    T1.REPAYACCOUNTID,
				    T1.FINISACTIVE,
				    T1.LIMITVALID,
				    T1.OVERRIDELIMIT,
				    T1.SECURITYDEPOSIT,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T7.FINTYPEDESC LOVDESCFINTYPENAME,
				    T7.FINMAXAMOUNT LOVDESCFINMAXAMT,
				    T7.FINMINAMOUNT LOVDESCFINMINAMOUNT,
				    T1.MINDOWNPAYPERC,
				    T7.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
				    T7.FINISDWPAYREQUIRED LOVDESCDWNPAYREQ,
				    T7.FINMAXDIFFERMENT LOVDESCFINMAXDIFFERMENT,
				    T12.BRANCHDESC LOVDESCFINBRANCHNAME,
				    T12.BRANCHPROVINCE FINBRANCHPROVINCECODE,
				    T1.LASTREPAYDATE,
				    T1.LASTREPAYPFTDATE,
				    T1.LASTREPAYRVWDATE,
				    T1.LASTREPAYCPZDATE,
				    T1.ALLOWGRCREPAY,
				    T1.GRCSCHDMTHD,
				    T1.GRCMARGIN,
				    T1.REPAYMARGIN,
				    T1.FINCURRASSETVALUE,
				    T1.FINCOMMITMENTREF,
				    T1.FINLIMITREF,
				    T1.DEPRECIATIONFRQ,
				    T1.FINCONTRACTDATE,
				    T1.NEXTDEPDATE,
				    T1.LASTDEPDATE,
				    T1.FINACCOUNT,
				    T1.FINCUSTPFTACCOUNT,
				    T17.ACRTILLLBD LOVDESCACCRUEDTILLLBD,
				    T7.FINRVWRATEAPPLFOR,
				    T1.TOTALREPAYAMT,
				    T1.CLOSINGSTATUS,
				    T1.FINAPPROVEDDATE,
				    T1.FEECHARGEAMT,
				    T1.BLACKLISTED,
				    T1.FINREPAYPFTONFRQ,
				    T1.ANUALIZEDPERCRATE,
				    T1.EFFECTIVERATEOFRETURN,
				    T1.MIGRATEDFINANCE,
				    T1.SCHEDULEMAINTAINED,
				    T1.SCHEDULEREGENERATED,
				    T1.FINPURPOSE,
				    T39.LOANPURPOSEDESC LOVDESCFINPURPOSENAME,
				    T1.FINSTATUS,
				    T1.FINSTSREASON,
				    T1.INITIATEUSER,
				    T1.BANKNAME,
				    T1.IBAN,
				    T1.ACCOUNTTYPE,
				    T1.DDAREFERENCENO,
				    T7.FINSCHEDULEON LOVDESCFINSCHEDULEON,
				    T1.CUSTDSR,
				    T1.JOINTACCOUNT,
				    T1.JOINTCUSTID,
				    T1.DOWNPAYBANK,
				    T1.DOWNPAYSUPL,
				    T1.DOWNPAYACCOUNT,
				    T1.SECURITYCOLLATERAL,
				    T1.APPROVED,
				    T1.DISCREPANCY,
				    T1.LIMITAPPROVED,
				    T1.GRACETERMS,
				    T7.FINDIVISION LOVDESCFINDIVISION,
				    T1.RCDMAINTAINSTS,
				    T1.FINREPAYMETHOD,
				    T1.GRCPROFITDAYSBASIS,
				    T1.STEPFINANCE,
				    T1.STEPTYPE,
				    T1.STEPPOLICY,
				    T1.ALWMANUALSTEPS,
				    T1.NOOFSTEPS,
				    T1.LINKEDFINREF,
				    T1.NEXTUSERID,
				    T1.PRIORITY,
				    T24.POLICYDESC LOVDESCSTEPPOLICYNAME,
				    T1.GRCMINRATE,
				    T1.GRCMAXRATE,
				    T1.RPYMINRATE,
				    T1.RPYMAXRATE,
				    T1.DEVIATIONAPPROVAL,
				    T1.MANUALSCHEDULE,
				    T1.TAKEOVERFINANCE,
				    T1.GRCADVBASERATE,
				    T1.GRCADVMARGIN,
				    T1.GRCADVPFTRATE,
				    T1.RPYADVBASERATE,
				    T1.RPYADVMARGIN,
				    T1.RPYADVPFTRATE,
				    T1.SUPPLEMENTRENT,
				    T1.INCREASEDCOST,
				    T1.CREDITINSAMT,
				    T1.ROLLOVERFRQ,
				    T1.NEXTROLLOVERDATE,
				    T27.CUSTSTSDESCRIPTION,
				    T1.SHARIASTATUS,
				    T1.INITIATEDATE,
				    T1.FINPREAPPROVEDREF,
				    T1.MMAID,
				    T1.ACCOUNTSOFFICER,
				    T1.FEEACCOUNTID,
				    T1.FINCANCELAC,
				    T28.DEALERNAME LOVDESCACCOUNTSOFFICER,
				    T28.DEALERCITY LOVDESCSOURCECITY,
				    T1.DSACODE,
				    T30.ROFFICERDESC DSACODEDESC,
				    T1.TDSAPPLICABLE,
				    T1.MANDATEID,
				    T1.DROPLINEFRQ,
				    T1.FIRSTDROPLINEDATE,
				    T1.PFTSERVICINGODLIMIT,
				    T1.INSURANCEAMT,
				    T1.DEDUCTINSDISB,
				    T1.ALWBPI,
				    T1.BPITREATMENT,
				    T1.PLANEMIHALW,
				    T1.PLANEMIHMETHOD,
				    T1.PLANEMIHMAXPERYEAR,
				    T1.PLANEMIHMAX,
				    T1.PLANEMIHLOCKPERIOD,
				    T1.PLANEMICPZ,
				    T1.CALROUNDINGMODE,
				    T1.ALWMULTIDISB,
				    T1.APPLICATIONNO,
				    T1.REFERRALID,
				    T33.ROFFICERDESC REFERRALIDDESC,
				    T1.DMACODE,
				    T34.ROFFICERDESC DMACODEDESC,
				    T1.SALESDEPARTMENT,
				    T35.DEPTDESC SALESDEPARTMENTDESC,
				    T1.QUICKDISB,
				    T1.WIFREFERENCE,
				    T1.UNPLANEMIHLOCKPERIOD,
				    T1.UNPLANEMICPZ,
				    T1.REAGECPZ,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.AVAILEDUNPLANEMI,
				    T1.AVAILEDREAGEH,
				    T1.BPIAMOUNT,
				    T1.DEDUCTFEEDISB,
				    T1.RVWRATEAPPLFOR,
				    T1.SCHCALONRVW,
				    T1.PASTDUEPFTCALMTHD,
				    T1.PASTDUEPFTMARGIN,
				    T1.DROPPINGMETHOD,
				    T1.RATECHGANYDAY,
				    T1.PROMOTIONCODE,
				    T1.RESTRUCTURELOAN,
				    T1.OLDFINREFERENCE,
				    T1.REAGEBUCKET,
				    T1.FINCATEGORY,
				    T1.PRODUCTCATEGORY,
				    T1.ROUNDINGTARGET,
				    T36.ENTITYCODE LOVDESCENTITYCODE,
				    T1.ELIGIBILITYMETHOD,
				    T38.FIELDCODEVALUE LOVELIGIBILITYMETHOD,
				    T38.VALUEDESC LOVDESCELIGIBILITYMETHOD,
				    T1.EMPLOYEENAME,
				    T37.ROFFICERDESC EMPLOYEENAMEDESC,
				    T1.SAMPLINGREQUIRED,
				    T1.LEGALREQUIRED,
				    T1.GRCMAXAMOUNT,
				    T1.CONNECTOR,
				    T40.DEALERNAME CONNECTORCODE,
				    T40.DEALERCITY CONNECTORDESC,
				    T1.ADVANCEEMI,
				    T1.ADVEMITERMS,
				    T1.BPIPFTDAYSBASIS,
				    T1.FIXEDRATETENOR,
				    T1.FIXEDTENORRATE,
				    T12.BRANCHTEL FINBRANCHCONTACT,
				    T1.PROCESSATTRIBUTES,
				    T1.BUSINESSVERTICAL,
				    BV.CODE BUSINESSVERTICALCODE,
				    BV.DESCRIPTION BUSINESSVERTICALDESC,
				    T1.GRCADVTYPE,
				    T1.GRCADVTERMS,
				    T1.ADVTYPE,
				    T1.ADVTERMS,
				    T1.ADVSTAGE,
				    T1.TDSPERCENTAGE,
				    T1.TDSSTARTDATE,
				    T1.TDSENDDATE,
				    T1.TDSLIMITAMT,
				    T1.VANREQ,
				    T1.VANCODE,
				    T1.ALLOWDRAWINGPOWER,
				    T1.ALLOWREVOLVING,
				    T1.SANBSDSCHDLE,
				    T1.PROMOTIONSEQID,
				    T1.SVAMOUNT,
				    T1.CBAMOUNT,
				    T1.APPLIEDLOANAMT,
				    T1.FINISRATERVWATGRCEND,
					T1.PLANEMIHALWINGRACE,
					T1.ALWGRCADJ,
					T1.ENDGRCPERIODAFTRFULLDISB,
					T1.AUTOINCGRCENDDATE,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS,
					T1.SCHDVERSION,
                    T1.TXNCHRGREQ,
					T1.ODCALCULATEDCHARGE,
					T1.ODCHARGEAMTORPERC,
					T1.ODCHARGECALON
				FROM FINANCEMAIN T1
				JOIN RMTFINANCETYPES T7 ON T1.FINTYPE  = T7.FINTYPE 
				LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH  = T12.BRANCHCODE 
				LEFT JOIN FINPFTDETAILS T17 ON T17.FINREFERENCE  = T1.FINREFERENCE 
				LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY  = T24.POLICYCODE 
				LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS  = T27.CUSTSTSCODE 
				LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
				LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE  = T30.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID  = T33.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE  = T34.ROFFICERCODE 
				LEFT JOIN BMTDEPARTMENTS T35 ON T1.SALESDEPARTMENT  = T35.DEPTCODE 
				LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION  = T36.DIVISIONCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME  = T37.ROFFICERCODE 
				LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE  = 'ELGMETHOD' 
				LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE  = T39.LOANPURPOSECODE 
				LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
				LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
				WHERE NOT (EXISTS ( SELECT 1 FROM FINANCEMAIN_TEMP 
				WHERE FINANCEMAIN_TEMP.FINREFERENCE  = T1.FINREFERENCE ))
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#62.98_post" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#62.99_pre" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemain_lview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#62.99" author="kavya.n">
		<createView viewName="FINANCEMAIN_LVIEW" replaceIfExists="true">
			<![CDATA[
			 	 SELECT T1.FINREFERENCE,
				    T1.INVESTMENTREF,
				    T1.FINTYPE,
				    T1.FINCCY,
				    T1.FINAMOUNT,
				    T1.DOWNPAYMENT,
				    T1.FEECHARGEAMT,
				    T1.SCHEDULEMETHOD,
				    T1.NUMBEROFTERMS,
				    T1.RECORDSTATUS,
				    T1.RECORDTYPE,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.FINBRANCH,
				    T1.FINCONTRACTDATE,
				    T1.LINKEDFINREF,
				    T1.NEXTUSERID,
				    T1.PRIORITY,
				    T1.WORKFLOWID,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.FINPREAPPROVEDREF,
				    T1.RCDMAINTAINSTS,
				    T1.INSURANCEAMT,
				    T1.FINCURRASSETVALUE,
				    T1.CALTERMS,
				    T1.DEVIATIONAPPROVAL,
				    T1.FINPURPOSE,
				    T1.INITIATEDATE,
				    T1.FINASSETVALUE,
				    T2.CUSTID,
				    T2.CUSTCIF LOVDESCCUSTCIF,
				    T2.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
				    T2.CUSTPASSPORTNO LOVDESCCUSTPASSPORTNO,
				    T2.CUSTDOB LOVDESCCUSTDOB,
				    T2.CUSTCRCPR LOVDESCCUSTCRCPR,
				    T2.PHONENUMBER,
				    T3.FINCATEGORY LOVDESCPRODUCTCODENAME,
				    T3.FINDIVISION LOVDESCFINDIVISION,
				    T3.PRODUCT LOVDESCFINPRODUCT,
				    T3.FINTYPEDESC LOVDESCFINTYPENAME,
				    COALESCE(T4.ROLEDESC,  FN_GET_ROLEDESC(T1.NEXTROLECODE)) LOVDESCREQUESTSTAGE,
				    T1.SAMPLINGREQUIRED,
				    T1.ADVANCEEMI,
				    T1.ADVEMITERMS,
				    T1.BPIPFTDAYSBASIS,
				    T1.GRACETERMS,
				    T1.PRODUCTCATEGORY,
				    T1.VERSION,
				    T1.TDSAPPLICABLE,
				    T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS,
					T1.SCHDVERSION,
                    T1.TXNCHRGREQ,
					T1.ODCALCULATEDCHARGE,
					T1.ODCHARGEAMTORPERC,
					T1.ODCHARGECALON
			    FROM FINANCEMAIN_TEMP T1
			    JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
			    JOIN RMTFINANCETYPES T3 ON T3.FINTYPE = T1.FINTYPE
			    LEFT JOIN SECROLES T4 ON T1.NEXTROLECODE = T4.ROLECD
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#62.99_post" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_lview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#62.100_pre" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemaintenance_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#62.100" author="kavya.n">
	 <createView viewName="financemaintenance_view" replaceIfExists="true">
			<![CDATA[
			    SELECT T1.FINREFERENCE,
					T1.FINBRANCH,
					T1.FINTYPE,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.FINSTARTDATE,
					T1.NUMBEROFTERMS,
					T1.CUSTID,
					T1.FINAMOUNT,
					T1.MATURITYDATE,
					T1.FINREPAYMENTAMOUNT,
					T1.FINISACTIVE,
					T1.BLACKLISTED,
					T1.FEECHARGEAMT,
					T1.INSURANCEAMT,
					T1.GRACETERMS,
					T1.ALLOWGRCPERIOD,
					T1.GRCPERIODENDDATE,
					T1.ALWMULTIDISB,
					T1.DEFFERMENTS,
					T1.NEXTROLECODE,
					T1.RECORDSTATUS,
					T1.RECORDTYPE,
					T1.ALLOWGRCPFTRVW,
					T1.ALLOWREPAYRVW,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.RCDMAINTAINSTS,
					T1.MIGRATEDFINANCE,
					T1.CLOSINGSTATUS,
					T1.REPAYRATEBASIS,
					T1.MANUALSCHEDULE,
					T1.FINCURRASSETVALUE,
					T1.TAKEOVERFINANCE,
					T1.NEXTROLLOVERDATE,
					T1.AVAILEDUNPLANEMI,
					T1.AVAILEDREAGEH,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.DOWNPAYMENT,
					T1.PLANEMIHALW,
					T1.CALTERMS,
					T1.RATECHGANYDAY,
					T1.FINASSETVALUE,
					T2.CUSTCIF LOVDESCCUSTCIF,
					T2.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
					T3.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
					T3.FINDIVISION LOVDESCFINDIVISION,
					T3.FINCATEGORY LOVDESCPRODUCTCODENAME,
					T4.PRODUCTCATEGORY,
					COALESCE(T5.ROLEDESC,  FN_GET_ROLEDESC(T1.NEXTROLECODE)) LOVDESCREQUESTSTAGE,
					COALESCE(T9.NOINST, 0) NOINST,
					T1.SAMPLINGREQUIRED,
					T1.ADVEMITERMS,
					T1.SANBSDSCHDLE,
					T1.PROMOTIONSEQID,
					T1.SVAMOUNT,
					T1.CBAMOUNT,
					T1.REPAYPFTFRQ,
					T1.TOTALCPZ,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
                    T1.TXNCHRGREQ,
					T1.ODCALCULATEDCHARGE,
					T1.ODCHARGEAMTORPERC,
					T1.ODCHARGECALON
				FROM FINANCEMAIN_TEMP T1
				JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
				JOIN RMTFINANCETYPES T3 ON T1.FINTYPE = T3.FINTYPE
				LEFT JOIN SECROLES T5 ON T1.NEXTROLECODE = T5.ROLECD
				JOIN BMTPRODUCT T4 ON T3.FINCATEGORY = T4.PRODUCTCODE
				LEFT JOIN FINPFTDETAILS T9 ON T1.FINREFERENCE = T9.FINREFERENCE
				UNION ALL
				SELECT T1.FINREFERENCE,
					T1.FINBRANCH,
					T1.FINTYPE,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.FINSTARTDATE,
					T1.NUMBEROFTERMS,
					T1.CUSTID,
					T1.FINAMOUNT,
					T1.MATURITYDATE,
					T1.FINREPAYMENTAMOUNT,
					T1.FINISACTIVE,
					T1.BLACKLISTED,
					T1.FEECHARGEAMT,
					T1.INSURANCEAMT,
					T1.GRACETERMS,
					T1.ALLOWGRCPERIOD,
					T1.GRCPERIODENDDATE,
					T1.ALWMULTIDISB,
					T1.DEFFERMENTS,
					T1.NEXTROLECODE,
					T1.RECORDSTATUS,
					T1.RECORDTYPE,
					T1.ALLOWGRCPFTRVW,
					T1.ALLOWREPAYRVW,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.RCDMAINTAINSTS,
					T1.MIGRATEDFINANCE,
					T1.CLOSINGSTATUS,
					T1.REPAYRATEBASIS,
					T1.MANUALSCHEDULE,
					T1.FINCURRASSETVALUE,
					T1.TAKEOVERFINANCE,
					T1.NEXTROLLOVERDATE,
					T1.AVAILEDUNPLANEMI,
					T1.AVAILEDREAGEH,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.DOWNPAYMENT,
					T1.PLANEMIHALW,
					T1.CALTERMS,
					T1.RATECHGANYDAY,
					T1.FINASSETVALUE,
					T2.CUSTCIF LOVDESCCUSTCIF,
					T2.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
					T3.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
					T3.FINDIVISION LOVDESCFINDIVISION,
					T3.FINCATEGORY LOVDESCPRODUCTCODENAME,
					T4.PRODUCTCATEGORY,
					COALESCE(T5.ROLEDESC,  FN_GET_ROLEDESC(T1.NEXTROLECODE)) LOVDESCREQUESTSTAGE,
					COALESCE(T9.NOINST, 0) NOINST,
					T1.SAMPLINGREQUIRED,
					T1.ADVEMITERMS,
					T1.SANBSDSCHDLE,
					T1.PROMOTIONSEQID,
					T1.SVAMOUNT,
					T1.CBAMOUNT,
					T1.REPAYPFTFRQ,
					T1.TOTALCPZ,
					T1.WRITEOFFLOAN,
					T1.RESTRUCTURE,
                    T1.TXNCHRGREQ,
					T1.ODCALCULATEDCHARGE,
					T1.ODCHARGEAMTORPERC,
					T1.ODCHARGECALON
				FROM FINANCEMAIN T1
				JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
				JOIN RMTFINANCETYPES T3 ON T1.FINTYPE = T3.FINTYPE
				LEFT JOIN SECROLES T5 ON T1.NEXTROLECODE = T5.ROLECD
				JOIN BMTPRODUCT T4 ON T3.FINCATEGORY = T4.PRODUCTCODE
				LEFT JOIN FINPFTDETAILS T9 ON T1.FINREFERENCE = T9.FINREFERENCE
				WHERE NOT (EXISTS ( SELECT 1 AS EXPR1 FROM FINANCEMAIN_TEMP
			    WHERE FINANCEMAIN_TEMP.FINREFERENCE = T1.FINREFERENCE))
			 ]]>	
		</createView>
     </changeSet>
     
     <changeSet id="ST#62.100_post" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemaintenance_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#62.101_pre" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemaintenance_aview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#62.101" author="kavya.n">
	 <createView viewName="financemaintenance_aview" replaceIfExists="true">   
			<![CDATA[
			    SELECT T1.FINREFERENCE,
                    T1.FINBRANCH,
                    T1.FINTYPE,
                    T1.FINCCY,
                    T1.SCHEDULEMETHOD,
                    T1.PROFITDAYSBASIS,
                    T1.FINSTARTDATE,
                    T1.NUMBEROFTERMS,
                    T1.CUSTID,
                    T1.FINAMOUNT,
                    T1.MATURITYDATE,
                    T1.FINREPAYMENTAMOUNT,
                    T1.FINISACTIVE,
                    T1.BLACKLISTED,
                    T1.FEECHARGEAMT,
                    T1.INSURANCEAMT,
                    T1.GRACETERMS,
                    T1.ALLOWGRCPERIOD,
                    T1.GRCPERIODENDDATE,
                    T1.ALWMULTIDISB,
                    T1.DEFFERMENTS,
                    T1.NEXTROLECODE,
                    T1.RECORDSTATUS,
                    T1.RECORDTYPE,
                    T1.ALLOWGRCPFTRVW,
                    T1.ALLOWREPAYRVW,
                    T1.LASTREPAYDATE,
                    T1.LASTREPAYPFTDATE,
                    T1.ALLOWEDDEFRPYCHANGE,
                    T1.AVAILEDDEFRPYCHANGE,
                    T1.MIGRATEDFINANCE,
                    T1.RCDMAINTAINSTS,
                    T1.CLOSINGSTATUS,
                    T1.REPAYRATEBASIS,
                    T1.MANUALSCHEDULE,
                    T1.TAKEOVERFINANCE,
                    T1.NEXTROLLOVERDATE,
                    T1.DOWNPAYMENT,
                    T1.PLANEMIHALW,
                    T1.FINCURRASSETVALUE,
                    T1.FINASSETVALUE,
                    T2.CUSTCIF AS LOVDESCCUSTCIF,
                    T3.FINCATEGORY AS LOVDESCPRODUCTCODENAME,
                    T3.FINISALWDIFFERMENT AS LOVDESCFINALWDEFERMENT,
                    T4.PRODUCTCATEGORY,
                    T1.SAMPLINGREQUIRED,
                    T1.ADVANCEEMI,
                    T1.ADVEMITERMS,
                    T1.BPIPFTDAYSBASIS AS BPIRATEBASIS,
                    T1.SANBSDSCHDLE,
	                T1.PROMOTIONSEQID,
	                T1.SVAMOUNT,
	                T1.CBAMOUNT,
					T1.TXNCHRGREQ,
					T1.ODCALCULATEDCHARGE,
					T1.ODCHARGEAMTORPERC,
					T1.ODCHARGECALON
                FROM FINANCEMAIN T1
                JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
                JOIN RMTFINANCETYPES T3 ON T1.FINTYPE = T3.FINTYPE
                JOIN BMTPRODUCT T4 ON T3.FINCATEGORY = T4.PRODUCTCODE
			 ]]>	
		</createView>
     </changeSet>
     
     <changeSet id="ST#62.101_post" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemaintenance_aview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#167.1" author="sampath.d">
		<addColumn tableName="FinReceiptHeader">
			<column name="FinType" type="varchar(8)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#167.2" author="sampath.d">
		<addColumn tableName="FinReceiptHeader_temp">
			<column name="FinType" type="varchar(8)" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#167.3" author="sampath.d">
		<sql>
			<![CDATA[
				UPDATE SECGROUPS SET ROLECODE = NULL, NEXTROLECODE = NULL, TASKID = NULL, NEXTTASKID = NULL, RECORDTYPE = NULL WHERE GRPCODE = 'FEERECEIPT_MAKER';
				UPDATE SECGROUPS SET ROLECODE = NULL, NEXTROLECODE = NULL, TASKID = NULL, NEXTTASKID = NULL, RECORDTYPE = NULL WHERE GRPCODE = 'FEERECEIPT_APPROVER';
				UPDATE SECGROUPS SET ROLECODE = NULL, NEXTROLECODE = NULL, TASKID = NULL, NEXTTASKID = NULL, RECORDTYPE = NULL WHERE GRPCODE = 'FinFeeRefund_MAKER';
				UPDATE SECGROUPS SET ROLECODE = NULL, NEXTROLECODE = NULL, TASKID = NULL, NEXTTASKID = NULL, RECORDTYPE = NULL WHERE GRPCODE = 'FinFeeRefund_Approver';
				UPDATE SECGROUPS SET ROLECODE = NULL, NEXTROLECODE = NULL, TASKID = NULL, NEXTTASKID = NULL, RECORDTYPE = NULL WHERE GRPCODE = 'RECEIPTCANCEL_MAKER';
				UPDATE SECGROUPS SET ROLECODE = NULL, NEXTROLECODE = NULL, TASKID = NULL, NEXTTASKID = NULL, RECORDTYPE = NULL WHERE GRPCODE = 'RECEIPTCANCEL_APPROVER';
				UPDATE SECROLES SET ROLECODE = NULL, NEXTROLECODE = NULL, TASKID = NULL, NEXTTASKID = NULL, RECORDTYPE = NULL WHERE ROLECD = 'FINFEEREFUND_MAKER';
				UPDATE SECROLES SET ROLECODE = NULL, NEXTROLECODE = NULL, TASKID = NULL, NEXTTASKID = NULL, RECORDTYPE = NULL WHERE ROLECD = 'FINFEEREFUND_APPROVER';

				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FEERECEIPT_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menuItem_FinanceManagement_FeeReceipts');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FEERECEIPT_APPROVER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menuItem_FinanceManagement_FeeReceipts');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FinFeeRefund_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menuItem_FinanceManagement_FinFeeRefunds');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FinFeeRefund_Approver') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menuItem_FinanceManagement_FinFeeRefunds');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FinFeeRefund_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menuItem_Enquiry_FinFeeRefundEnquiry');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FinFeeRefund_Approver') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menuItem_Enquiry_FinFeeRefundEnquiry');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'RECEIPTCANCEL_MAKER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menuItem_FinanceManagement_FeeReceiptCancellation');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'RECEIPTCANCEL_APPROVER') AND RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menuItem_FinanceManagement_FeeReceiptCancellation');
				
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (Select GrpID from SecGroups where GrpCode = 'FEERECEIPT_MAKER'), (Select RightID from SecRights where RightName = 'menuItem_FinanceManagement_FeeReceipts'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (Select GrpID from SecGroups where GrpCode = 'FEERECEIPT_APPROVER'), (Select RightID from SecRights where RightName = 'menuItem_FinanceManagement_FeeReceipts'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (Select GrpID from SecGroups where GrpCode = 'FinFeeRefund_MAKER'), (Select RightID from SecRights where RightName = 'menuItem_FinanceManagement_FinFeeRefunds'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (Select GrpID from SecGroups where GrpCode = 'FinFeeRefund_Approver'), (Select RightID from SecRights where RightName = 'menuItem_FinanceManagement_FinFeeRefunds'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (Select GrpID from SecGroups where GrpCode = 'FinFeeRefund_MAKER'), (Select RightID from SecRights where RightName = 'menuItem_Enquiry_FinFeeRefundEnquiry'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (Select GrpID from SecGroups where GrpCode = 'FinFeeRefund_Approver'), (Select RightID from SecRights where RightName = 'menuItem_Enquiry_FinFeeRefundEnquiry'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (Select GrpID from SecGroups where GrpCode = 'RECEIPTCANCEL_MAKER'), (Select RightID from SecRights where RightName = 'menuItem_FinanceManagement_FeeReceiptCancellation'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) values ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (Select GrpID from SecGroups where GrpCode = 'RECEIPTCANCEL_APPROVER'), (Select RightID from SecRights where RightName = 'menuItem_FinanceManagement_FeeReceiptCancellation'), 1, 1, 1000, current_timestamp, NULL, NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#167.4" author="sampath.d">
		<sql>
			<![CDATA[
				DELETE FROM CATEGORYWISEEVENTS WHERE AEEVENTCODE = 'FEEPAY' AND CATEGORYCODE = 'O';
				DELETE FROM CATEGORYWISEEVENTS WHERE AEEVENTCODE = 'FEREFUND' AND CATEGORYCODE = 'O';
			
				INSERT INTO CATEGORYWISEEVENTS (AEEVENTCODE,CATEGORYCODE,ACTIVE,MANDATORY,SEQORDER) VALUES ('FEEPAY','O',1,1,(SELECT MAX(SEQORDER)+1 FROM CATEGORYWISEEVENTS WHERE CATEGORYCODE= 'O'));
				INSERT INTO CATEGORYWISEEVENTS (AEEVENTCODE,CATEGORYCODE,ACTIVE,MANDATORY,SEQORDER) VALUES ('FEREFUND','O',1,1,(SELECT MAX(SEQORDER)+1 FROM CATEGORYWISEEVENTS WHERE CATEGORYCODE= 'O'));
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#62.102" author="sampath.d">
		<addColumn tableName="ManualAdvise">
			<column name="DueDate" type="DateTime" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#62.103" author="sampath.d">
		<addColumn tableName="ManualAdvise_temp">
			<column name="DueDate" type="DateTime" />
		</addColumn>
	</changeSet>
	
	<changeSet id="TK#847.1" author="sampath.d">
		<sql>
			<![CDATA[
				DELETE FROM SMTPARAMETERS WHERE SYSPARMCODE = 'MONTHLY_LIMIT';
				
				INSERT INTO SMTPARAMETERS (SYSPARMCODE,SYSPARMDESC,SYSPARMTYPE,SYSPARMMAINT,SYSPARMVALUE,SYSPARMLENGTH,SYSPARMDEC,SYSPARMLIST,SYSPARMVALDMOD,SYSPARMDESCRIPTION,VERSION,LASTMNTBY,LASTMNTON,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID) VALUES ('MONTHLY_LIMIT','Monthly OD Limit','int',0,'60',3,0,null,null,'Monthly OD Limit',1,1000,Current_TimeStamp,'Approved',null,null,null,null,null,0);
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#62.104_pre" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemain_dataview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#62.104" author="kavya.n">
	 <createView viewName="financemain_dataview" replaceIfExists="true">   
			<![CDATA[
			   SELECT T1.FINREFERENCE,
					T1.FINTYPE,
					T2.CUSTCIF LOVDESCCUSTCIF,
					T1.CUSTID,
					T1.CLOSINGSTATUS,
					T1.FINISACTIVE,
					T1.MATURITYDATE,
					T1.PRODUCTCATEGORY,
					T1.WRITEOFFLOAN,
					T1.CALCOFSTEPS,
					T1.STEPSAPPLIEDFOR,
					T1.NOOFGRCSTEPS,
					T1.SCHDVERSION,
					T1.TXNCHRGREQ,
					T1.ODCALCULATEDCHARGE,
					T1.ODCHARGEAMTORPERC,
					T1.ODCHARGECALON
				FROM FINANCEMAIN T1
				JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
				JOIN RMTFINANCETYPES T3 ON T3.FINTYPE = T1.FINTYPE
				WHERE T1.CLOSINGSTATUS IS NULL OR T1.CLOSINGSTATUS <> 'C'
			 ]]>	
		</createView>
     </changeSet>
     
      <changeSet id="ST#62.104_post" author="kavya.n" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemain_dataview');
			]]>
		</sql>
	</changeSet>
     
     <changeSet id="DE#259.1" author="sampath.d">
		<sql>
			<![CDATA[
				UPDATE FINANCEMAIN Set SchdVersion = 0 Where SchdVersion is null;
				UPDATE FINANCEMAIN_TEMP Set SchdVersion = 0 Where SchdVersion is null;
				UPDATE REJECTFINANCEMAIN Set SchdVersion = 0 Where SchdVersion is null;
			]]>
		</sql>
	</changeSet>
	
     
     <changeSet id="TK#429.11" author="sampath.d">
		<addColumn tableName="ODLIMITHISTORYDETAIL">
			<column name="DateOfTrans" type="DateTime" />
		</addColumn>
	</changeSet>
	
     <changeSet id="TK#1096.1_pre" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'odlimithistorydetail_aview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="TK#1096.1" author="sampath.d">
	 <createView viewName="ODLIMITHISTORYDETAIL_AVIEW" replaceIfExists="true">   
			<![CDATA[
			   SELECT T1.ID,
			   		T1.HEADERID,
			   		T1.FINREFERENCE,
					T1.ACTUALLIMIT,
					T1.MONTHLYLIMIT,
					T1.TRANSACTIONAMT,
					T1.TRANSACTIONTYPE,
					T1.NARRATION,
					T1.ACTUALLMTBAL,
					T1.MONTHLYLMTBAL,
					T2.LLDATE DISBDATE,
					T3.ADVISEAMOUNT TXNCHRG,
					T1.DATEOFTRANS,
					T1.VERSION,
                    T1.LASTMNTBY,
                    T1.LASTMNTON,
                    T1.RECORDSTATUS,
                    T1.ROLECODE,
                    T1.NEXTROLECODE,
                    T1.TASKID,
                    T1.NEXTTASKID,
                    T1.RECORDTYPE,
                    T1.WORKFLOWID
				FROM ODLIMITHISTORYDETAIL T1
				LEFT JOIN FINADVANCEPAYMENTS T2 ON T2.FINREFERENCE = T1.FINREFERENCE AND T2.LASTMNTON = T1.LASTMNTON
				LEFT JOIN MANUALADVISE T3 ON T2.FINREFERENCE = T1.FINREFERENCE AND  T3.LASTMNTON = T1.LASTMNTON
			 ]]>	
		</createView>
     </changeSet>
     
      <changeSet id="TK#1096.1_post" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'odlimithistorydetail_aview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#62.85" author="sampath.d">
		<sql>
			<![CDATA[
				update data_engine_config set skipheaderrow =1 where name = 'OD_SETTLEMENT_REQUEST_UPLOAD'
			]]>
		</sql>
	</changeSet>
	
		<changeSet id="ST#291.1" author="sampath.d">
		<addColumn tableName="ManualAdvise">
			<column name="Status" type="char(1)" />
			<column name="Reason" type="varchar(250)" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#291.2" author="sampath.d">
		<addColumn tableName="ManualAdvise_Temp">
			<column name="Status" type="char(1)" />
			<column name="Reason" type="varchar(250)" />
		</addColumn>
	</changeSet>
	
		
	<changeSet id="ST#291.3_pre" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'manualadvise_aview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#291.3" author="sampath.d">
		<createView viewName="ManualAdvise_AView" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ADVISEID,
					T1.ADVISETYPE, 
					T1.FINREFERENCE, 
					T1.FEETYPEID, 
					T1.SEQUENCE, 
					T1.ADVISEAMOUNT, 
					T1.PAIDAMOUNT, 
					T1.WAIVEDAMOUNT, 
					T1.REMARKS, 
					T1.VALUEDATE, 
					T1.POSTDATE, 
					T1.VERSION, 
					T1.LASTMNTBY, 
					T1.LASTMNTON, 
					T1.RECORDSTATUS, 
					T1.ROLECODE, 
					T1.NEXTROLECODE, 
					T1.TASKID, 
					T1.NEXTTASKID, 
					T1.RECORDTYPE, 
					T1.WORKFLOWID, 
					T2.FEETYPEDESC, 
					T2.FEETYPECODE, 
					T1.BOUNCEID, 
					T1.RECEIPTID, 
					T3.BOUNCECODE, 
					T1.RESERVEDAMT, 
					T1.BALANCEAMT, 
					T3.REASON BOUNCECODEDESC, 
					COALESCE(T2.TAXAPPLICABLE, 0) TAXAPPLICABLE, 
					COALESCE(T2.TDSREQ, 0) TDSREQ, 
					T2.TAXCOMPONENT, 
					T1.PAIDCGST, 
					T1.PAIDSGST, 
					T1.PAIDIGST, 
					T1.PAIDUGST, 
					T1.WAIVEDCGST, 
					T1.WAIVEDSGST, 
					T1.WAIVEDUGST, 
					T1.WAIVEDIGST, 
					T1.WAIVEDCESS, 
					T1.PAIDCESS, 
					T1.FINSOURCE, 
					T1.DUECREATION, 
					T1.LINKEDTRANID, 
					T1.TDSPAID, 
					T1.HOLDDUE, 
					T1.PRESENTMENTDETAILID,
					T1.STATUS,
					T1.REASON
				FROM MANUALADVISE T1  
				LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID  
				LEFT JOIN BOUNCEREASONS T3 ON T1.BOUNCEID = T3.BOUNCEID	
			]]>
		</createView>
	</changeSet>
	
		<changeSet id="ST#291.3_post" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'manualadvise_aview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#291.4_pre" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'manualadvise_lview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#291.4" author="sampath.d">
		<createView viewName="ManualAdvise_LView" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ADVISEID, 
					T1.ADVISETYPE, 
					T1.FINREFERENCE, 
					T1.FEETYPEID, 
					T1.SEQUENCE, 
					T1.ADVISEAMOUNT, 
					T1.PAIDAMOUNT, 
					T1.WAIVEDAMOUNT, 
					T1.REMARKS, 
					T1.VALUEDATE, 
					T1.POSTDATE, 
					T1.VERSION, 
					T1.LASTMNTBY, 
					T1.LASTMNTON, 
					T1.RECORDSTATUS, 
					T1.ROLECODE, 
					T1.NEXTROLECODE, 
					T1.TASKID, 
					T1.NEXTTASKID, 
					T1.RECORDTYPE, 
					T1.WORKFLOWID, 
					T2.FEETYPEDESC, 
					T2.FEETYPECODE, 
					T1.BOUNCEID, 
					T1.RECEIPTID, 
					T3.BOUNCECODE, 
					T1.RESERVEDAMT, 
					T1.BALANCEAMT,
					T3.REASON BOUNCECODEDESC, 
					COALESCE(T2.TAXAPPLICABLE, 0) TAXAPPLICABLE, 
					COALESCE(T2.TDSREQ, 0) TDSREQ, 
					T2.TAXCOMPONENT, 
					T1.PAIDCGST, 
					T1.PAIDSGST, 
					T1.PAIDIGST, 
					T1.PAIDUGST, 
					T1.WAIVEDCGST, 
					T1.WAIVEDSGST, 
					T1.WAIVEDUGST, 
					T1.WAIVEDIGST, 
					T1.FINSOURCE, 
					T1.DUECREATION, 
					T1.LINKEDTRANID, 
					T1.TDSPAID, 
					T1.HOLDDUE, 
					T1.PRESENTMENTDETAILID,
					T1.STATUS,
					T1.REASON
				FROM MANUALADVISE T1  
				LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID  
				LEFT JOIN BOUNCEREASONS T3 ON T1.BOUNCEID = T3.BOUNCEID	
			]]>
		</createView>
	</changeSet>
	
	<changeSet id="ST#291.4_post" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'manualadvise_lview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#291.5_pre" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'manualadvise_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#291.5" author="sampath.d">
		<createView viewName="ManualAdvise_TView" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ADVISEID,
					T1.ADVISETYPE, 
					T1.FINREFERENCE, 
					T1.FEETYPEID, 
					T1.SEQUENCE, 
					T1.ADVISEAMOUNT, 
					T1.PAIDAMOUNT, 
					T1.WAIVEDAMOUNT, 
					T1.REMARKS, 
					T1.VALUEDATE, 
					T1.POSTDATE, 
					T1.VERSION, 
					T1.LASTMNTBY, 
					T1.LASTMNTON, 
					T1.RECORDSTATUS, 
					T1.ROLECODE, 
					T1.NEXTROLECODE, 
					T1.TASKID, 
					T1.NEXTTASKID, 
					T1.RECORDTYPE, 
					T1.WORKFLOWID, 
					T2.FEETYPEDESC, 
					T2.FEETYPECODE, 
					T1.BOUNCEID, 
					T1.RECEIPTID, 
					T3.BOUNCECODE, 
					T1.RESERVEDAMT, 
					T1.BALANCEAMT, 
					T3.REASON BOUNCECODEDESC, 
					COALESCE(T2.TAXAPPLICABLE, 0) TAXAPPLICABLE, 
					COALESCE(T2.TDSREQ, 0) TDSREQ, 
					T2.TAXCOMPONENT, 
					T1.PAIDCGST, 
					T1.PAIDSGST, 
					T1.PAIDIGST, 
					T1.PAIDUGST, 
					T1.WAIVEDCGST, 
					T1.WAIVEDSGST, 
					T1.WAIVEDUGST, 
					T1.WAIVEDIGST, 
					T1.WAIVEDCESS, 
					T1.PAIDCESS, 
					T1.FINSOURCE, 
					T1.DUECREATION, 
					T1.LINKEDTRANID, 
					T1.TDSPAID, 
					T1.HOLDDUE, 
					T1.PRESENTMENTDETAILID,
					T1.STATUS,
					T1.REASON
				FROM MANUALADVISE_TEMP T1   
				LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID  
				LEFT JOIN BOUNCEREASONS T3 ON T1.BOUNCEID = T3.BOUNCEID	
			]]>			
		</createView>
	</changeSet>
	
	<changeSet id="ST#291.5_post" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'manualadvise_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#291.6_pre" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'manualadvise_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#291.6" author="sampath.d">
		<createView viewName="ManualAdvise_View" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ADVISEID,
					T1.ADVISETYPE, 
					T1.FINREFERENCE, 
					T1.FEETYPEID, 
					T1.SEQUENCE, 
					T1.ADVISEAMOUNT, 
					T1.PAIDAMOUNT, 
					T1.WAIVEDAMOUNT, 
					T1.REMARKS, 
					T1.VALUEDATE, 
					T1.POSTDATE, 
					T1.VERSION, 
					T1.LASTMNTBY, 
					T1.LASTMNTON, 
					T1.RECORDSTATUS, 
					T1.ROLECODE, 
					T1.NEXTROLECODE, 
					T1.TASKID, 
					T1.NEXTTASKID, 
					T1.RECORDTYPE, 
					T1.WORKFLOWID, 
					T2.FEETYPEDESC, 
					T2.FEETYPECODE, 
					T1.BOUNCEID, 
					T1.RECEIPTID, 
					T3.BOUNCECODE, 
					T1.RESERVEDAMT, 
					T1.BALANCEAMT, 
					T3.REASON BOUNCECODEDESC, 
					COALESCE(T2.TAXAPPLICABLE, 0) TAXAPPLICABLE, 
					COALESCE(T2.TDSREQ, 0) TDSREQ, 
					T2.TAXCOMPONENT, 
					T1.PAIDCGST, 
					T1.PAIDSGST, 
					T1.PAIDIGST, 
					T1.PAIDUGST, 
					T1.WAIVEDCGST, 
					T1.WAIVEDSGST, 
					T1.WAIVEDUGST, 
					T1.WAIVEDIGST, 
					T1.WAIVEDCESS, 
					T1.PAIDCESS, 
					T1.FINSOURCE, 
					T1.DUECREATION, 
					T1.LINKEDTRANID, 
					T1.TDSPAID, 
					T1.HOLDDUE, 
					T1.PRESENTMENTDETAILID,
					T1.STATUS,
					T1.REASON
				FROM MANUALADVISE_TEMP T1  
				LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID  
				LEFT JOIN BOUNCEREASONS T3 ON T1.BOUNCEID = T3.BOUNCEID
				UNION ALL	
				SELECT T1.ADVISEID,
					T1.ADVISETYPE, 
					T1.FINREFERENCE, 
					T1.FEETYPEID, 
					T1.SEQUENCE, 
					T1.ADVISEAMOUNT, 
					T1.PAIDAMOUNT, 
					T1.WAIVEDAMOUNT, 
					T1.REMARKS, 
					T1.VALUEDATE, 
					T1.POSTDATE, 
					T1.VERSION, 
					T1.LASTMNTBY, 
					T1.LASTMNTON, 
					T1.RECORDSTATUS, 
					T1.ROLECODE, 
					T1.NEXTROLECODE, 
					T1.TASKID, 
					T1.NEXTTASKID, 
					T1.RECORDTYPE, 
					T1.WORKFLOWID, 
					T2.FEETYPEDESC, 
					T2.FEETYPECODE, 
					T1.BOUNCEID, 
					T1.RECEIPTID, 
					T3.BOUNCECODE, 
					T1.RESERVEDAMT, 
					T1.BALANCEAMT, 
					T3.REASON BOUNCECODEDESC, 
					COALESCE(T2.TAXAPPLICABLE, 0) TAXAPPLICABLE, 
					COALESCE(T2.TDSREQ, 0) TDSREQ, 
					T2.TAXCOMPONENT, 
					T1.PAIDCGST, 
					T1.PAIDSGST, 
					T1.PAIDIGST, 
					T1.PAIDUGST, 
					T1.WAIVEDCGST, 
					T1.WAIVEDSGST, 
					T1.WAIVEDUGST, 
					T1.WAIVEDIGST, 
					T1.WAIVEDCESS, 
					T1.PAIDCESS, 
					T1.FINSOURCE, 
					T1.DUECREATION, 
					T1.LINKEDTRANID, 
					T1.TDSPAID, 
					T1.HOLDDUE, 
					T1.PRESENTMENTDETAILID,
					T1.STATUS,
					T1.REASON
				FROM MANUALADVISE T1  
				LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID  
				LEFT JOIN BOUNCEREASONS T3 ON T1.BOUNCEID = T3.BOUNCEID	
				WHERE NOT (EXISTS ( SELECT 1 FROM MANUALADVISE_TEMP WHERE MANUALADVISE_TEMP.ADVISEID = T1.ADVISEID))
			]]>			
		</createView>
	</changeSet>
	
	<changeSet id="ST#291.6_post" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'manualadvise_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#291.7" author="sampath.d">
		<addColumn tableName="ManualAdvise_Snapshot">
			<column name="Status" type="char(1)" />
			<column name="Reason" type="varchar(250)" />
		</addColumn>
	</changeSet>
	
	<changeSet id="ST#291.8" author="sampath.d">
		<sql>
			<![CDATA[
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'menuItem_finance_ManualAdvise_Maintain';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'menuItem_finance_ManualAdvise_Cancel';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'ManualAdviseDialog_Reason';
				
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menuItem_finance_ManualAdvise_Maintain', 'Menu', 1, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menuItem_finance_ManualAdvise_Cancel', 'Menu', 1, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'ManualAdviseDialog_Reason', 'ManualAdviseDialog', 1, 1000, current_timestamp, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>			   
		</sql>
	</changeSet>
	
	<changeSet id="TK#581.1" author="sampath.d">
		<addColumn tableName="FinODDetails">
			<column name="FinCurODTxnChrg" type="decimal(18,0)" />
		</addColumn>
		<addColumn tableName="FinODDetails">
			<column name="FinMaxODTxnChrg" type="decimal(18,0)" />
		</addColumn>
	</changeSet>
	
	<changeSet id="TK#581.2" author="sampath.d">
		<addColumn tableName="FinODDetails_PD">
			<column name="FinCurODTxnChrg" type="decimal(18,0)" />
		</addColumn>
		<addColumn tableName="FinODDetails_PD">
			<column name="FinMaxODTxnChrg" type="decimal(18,0)" />
		</addColumn>
	</changeSet>
	
	<changeSet id="TK#581.3" author="sampath.d" >
		<sql>
			<![CDATA[	
				UPDATE FINODDETAILS SET FINCURODTXNCHRG=0;
				UPDATE FINODDETAILS SET FINMAXODTXNCHRG=0;
				UPDATE FINODDETAILS_PD SET FINCURODTXNCHRG=0;	
				UPDATE FINODDETAILS_PD SET FINMAXODTXNCHRG=0;			
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="TK#581.4" author="sampath.d" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE FINODDETAILS ADD CONSTRAINT DF_FOD_FINCURODTXNCHRG DEFAULT 0 FOR FINCURODTXNCHRG;
				ALTER TABLE FINODDETAILS ADD CONSTRAINT DF_FOD_FINMAXODTXNCHRG DEFAULT 0 FOR FINMAXODTXNCHRG;
				ALTER TABLE FINODDETAILS_PD ADD CONSTRAINT DF_FPD_FINCURODTXNCHRG DEFAULT 0 FOR FINCURODTXNCHRG;
				ALTER TABLE FINODDETAILS_PD ADD CONSTRAINT DF_FOD_FINMAXODTXNCHRG DEFAULT 0 FOR FINMAXODTXNCHRG;
			]]>
		</sql>
	</changeSet>

	<changeSet id="TK#581.4" author="sampath.d" dbms="postgresql, oracle">
		<addDefaultValue columnName="FinCurODTxnChrg" tableName="FinODDetails" defaultValue="0" />
		<addDefaultValue columnName="FinMaxODTxnChrg" tableName="FinODDetails" defaultValue="0" />
		<addDefaultValue columnName="FinCurODTxnChrg" tableName="FinODDetails_PD" defaultValue="0" />
		<addDefaultValue columnName="FinMaxODTxnChrg" tableName="FinODDetails_PD" defaultValue="0" />
	</changeSet>
	
	<changeSet id="TK#581.5_pre" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finoddetails_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="TK#581.5" author="sampath.d">
		<createView viewName="FinODDetails_View" replaceIfExists="true">
			<![CDATA[
				SELECT OD.FINREFERENCE,
					 OD.FINODSCHDDATE, 
					 OD.FINODFOR, 
					 OD.FINBRANCH, 
					 OD.FINTYPE, 
					 OD.CUSTID, 
					 OD.FINODTILLDATE, 
					 OD.FINCURODAMT, 
					 OD.FINCURODPRI, 
					 OD.FINCURODPFT, 
					 OD.FINMAXODAMT, 
					 OD.FINMAXODPRI, 
					 OD.FINMAXODPFT, 
					 OD.GRACEDAYS, 
					 OD.INCGRACEDAYS, 
					 OD.FINCURODDAYS, 
					 OD.TOTPENALTYAMT, 
					 OD.TOTWAIVED, 
					 OD.TOTPENALTYPAID, 
					 OD.LPIAMT, 
					 OD.LPIPAID, 
					 OD.LPIBAL, 
					 OD.TOTPENALTYBAL, 
					 OD.FINLMDFDATE, 
					 COALESCE(PR.APPLYODPENALTY, 0) APPLYODPENALTY, 
					 COALESCE(PR.ODINCGRCDAYS, 0) ODINCGRCDAYS, 
					 COALESCE(PR.ODCHARGETYPE, '') ODCHARGETYPE, 
					 COALESCE(PR.ODGRACEDAYS, 0) ODGRACEDAYS, 
					 COALESCE(PR.ODCHARGECALON, '') ODCHARGECALON, 
					 COALESCE(PR.ODCHARGEAMTORPERC, 0) ODCHARGEAMTORPERC, 
					 COALESCE(PR.ODALLOWWAIVER, 0) ODALLOWWAIVER, 
					 COALESCE(PR.ODMAXWAIVERPERC, 0) ODMAXWAIVERPERC, 
					 COALESCE(PR.ODRULECODE, '') ODRULECODE, 
					 OD.LOCKODRECALCAL,
					 OD.LPPTDSPAID, 
					 OD.PRESENTMENTDETAILID,
					 OD.FINCURODTXNCHRG,
					 OD.FINMAXODTXNCHRG
				FROM FINODDETAILS OD  
				LEFT JOIN FINODPENALTY_LATEST_RATES_VIEW PR ON OD.FINREFERENCE = PR.FINREFERENCE		
			]]>	
		</createView>
	</changeSet>
	
	<changeSet id="TK#581.5_post" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finoddetails_view');
			]]>
		</sql>
	</changeSet>
	
		<changeSet id="TK#581.6_pre" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'manualadvise_aview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="TK#581.6" author="sampath.d">
		<createView viewName="ManualAdvise_AView" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ADVISEID,
					T1.ADVISETYPE, 
					T1.FINREFERENCE, 
					T1.FEETYPEID, 
					T1.SEQUENCE, 
					T1.ADVISEAMOUNT, 
					T1.PAIDAMOUNT, 
					T1.WAIVEDAMOUNT, 
					T1.REMARKS, 
					T1.VALUEDATE, 
					T1.POSTDATE, 
					T1.VERSION, 
					T1.LASTMNTBY, 
					T1.LASTMNTON, 
					T1.RECORDSTATUS, 
					T1.ROLECODE, 
					T1.NEXTROLECODE, 
					T1.TASKID, 
					T1.NEXTTASKID, 
					T1.RECORDTYPE, 
					T1.WORKFLOWID, 
					T2.FEETYPEDESC, 
					T2.FEETYPECODE, 
					T1.BOUNCEID, 
					T1.RECEIPTID, 
					T3.BOUNCECODE, 
					T1.RESERVEDAMT, 
					T1.BALANCEAMT, 
					T3.REASON BOUNCECODEDESC, 
					COALESCE(T2.TAXAPPLICABLE, 0) TAXAPPLICABLE, 
					COALESCE(T2.TDSREQ, 0) TDSREQ, 
					T2.TAXCOMPONENT, 
					T1.PAIDCGST, 
					T1.PAIDSGST, 
					T1.PAIDIGST, 
					T1.PAIDUGST, 
					T1.WAIVEDCGST, 
					T1.WAIVEDSGST, 
					T1.WAIVEDUGST, 
					T1.WAIVEDIGST, 
					T1.WAIVEDCESS, 
					T1.PAIDCESS, 
					T1.FINSOURCE, 
					T1.DUECREATION, 
					T1.LINKEDTRANID, 
					T1.TDSPAID, 
					T1.HOLDDUE, 
					T1.PRESENTMENTDETAILID,
					T1.STATUS,
					T1.REASON,
					T1.DUEDATE
				FROM MANUALADVISE T1  
				LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID  
				LEFT JOIN BOUNCEREASONS T3 ON T1.BOUNCEID = T3.BOUNCEID	
			]]>
		</createView>
	</changeSet>
	
		<changeSet id="TK#581.6_post" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'manualadvise_aview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="TK#581.7_pre" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'manualadvise_lview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="TK#581.7" author="sampath.d">
		<createView viewName="ManualAdvise_LView" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ADVISEID, 
					T1.ADVISETYPE, 
					T1.FINREFERENCE, 
					T1.FEETYPEID, 
					T1.SEQUENCE, 
					T1.ADVISEAMOUNT, 
					T1.PAIDAMOUNT, 
					T1.WAIVEDAMOUNT, 
					T1.REMARKS, 
					T1.VALUEDATE, 
					T1.POSTDATE, 
					T1.VERSION, 
					T1.LASTMNTBY, 
					T1.LASTMNTON, 
					T1.RECORDSTATUS, 
					T1.ROLECODE, 
					T1.NEXTROLECODE, 
					T1.TASKID, 
					T1.NEXTTASKID, 
					T1.RECORDTYPE, 
					T1.WORKFLOWID, 
					T2.FEETYPEDESC, 
					T2.FEETYPECODE, 
					T1.BOUNCEID, 
					T1.RECEIPTID, 
					T3.BOUNCECODE, 
					T1.RESERVEDAMT, 
					T1.BALANCEAMT,
					T3.REASON BOUNCECODEDESC, 
					COALESCE(T2.TAXAPPLICABLE, 0) TAXAPPLICABLE, 
					COALESCE(T2.TDSREQ, 0) TDSREQ, 
					T2.TAXCOMPONENT, 
					T1.PAIDCGST, 
					T1.PAIDSGST, 
					T1.PAIDIGST, 
					T1.PAIDUGST, 
					T1.WAIVEDCGST, 
					T1.WAIVEDSGST, 
					T1.WAIVEDUGST, 
					T1.WAIVEDIGST, 
					T1.FINSOURCE, 
					T1.DUECREATION, 
					T1.LINKEDTRANID, 
					T1.TDSPAID, 
					T1.HOLDDUE, 
					T1.PRESENTMENTDETAILID,
					T1.STATUS,
					T1.REASON,
					T1.DUEDATE
				FROM MANUALADVISE T1  
				LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID  
				LEFT JOIN BOUNCEREASONS T3 ON T1.BOUNCEID = T3.BOUNCEID	
			]]>
		</createView>
	</changeSet>
	
	<changeSet id="TK#581.7_post" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'manualadvise_lview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="TK#581.8_pre" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'manualadvise_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="TK#581.8" author="sampath.d">
		<createView viewName="ManualAdvise_TView" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ADVISEID,
					T1.ADVISETYPE, 
					T1.FINREFERENCE, 
					T1.FEETYPEID, 
					T1.SEQUENCE, 
					T1.ADVISEAMOUNT, 
					T1.PAIDAMOUNT, 
					T1.WAIVEDAMOUNT, 
					T1.REMARKS, 
					T1.VALUEDATE, 
					T1.POSTDATE, 
					T1.VERSION, 
					T1.LASTMNTBY, 
					T1.LASTMNTON, 
					T1.RECORDSTATUS, 
					T1.ROLECODE, 
					T1.NEXTROLECODE, 
					T1.TASKID, 
					T1.NEXTTASKID, 
					T1.RECORDTYPE, 
					T1.WORKFLOWID, 
					T2.FEETYPEDESC, 
					T2.FEETYPECODE, 
					T1.BOUNCEID, 
					T1.RECEIPTID, 
					T3.BOUNCECODE, 
					T1.RESERVEDAMT, 
					T1.BALANCEAMT, 
					T3.REASON BOUNCECODEDESC, 
					COALESCE(T2.TAXAPPLICABLE, 0) TAXAPPLICABLE, 
					COALESCE(T2.TDSREQ, 0) TDSREQ, 
					T2.TAXCOMPONENT, 
					T1.PAIDCGST, 
					T1.PAIDSGST, 
					T1.PAIDIGST, 
					T1.PAIDUGST, 
					T1.WAIVEDCGST, 
					T1.WAIVEDSGST, 
					T1.WAIVEDUGST, 
					T1.WAIVEDIGST, 
					T1.WAIVEDCESS, 
					T1.PAIDCESS, 
					T1.FINSOURCE, 
					T1.DUECREATION, 
					T1.LINKEDTRANID, 
					T1.TDSPAID, 
					T1.HOLDDUE, 
					T1.PRESENTMENTDETAILID,
					T1.STATUS,
					T1.REASON,
					T1.DUEDATE
				FROM MANUALADVISE_TEMP T1   
				LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID  
				LEFT JOIN BOUNCEREASONS T3 ON T1.BOUNCEID = T3.BOUNCEID	
			]]>			
		</createView>
	</changeSet>
	
	<changeSet id="TK#581.8_post" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'manualadvise_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="TK#581.9_pre" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'manualadvise_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="TK#581.9" author="sampath.d">
		<createView viewName="ManualAdvise_View" replaceIfExists="true">
			<![CDATA[
				SELECT T1.ADVISEID,
					T1.ADVISETYPE, 
					T1.FINREFERENCE, 
					T1.FEETYPEID, 
					T1.SEQUENCE, 
					T1.ADVISEAMOUNT, 
					T1.PAIDAMOUNT, 
					T1.WAIVEDAMOUNT, 
					T1.REMARKS, 
					T1.VALUEDATE, 
					T1.POSTDATE, 
					T1.VERSION, 
					T1.LASTMNTBY, 
					T1.LASTMNTON, 
					T1.RECORDSTATUS, 
					T1.ROLECODE, 
					T1.NEXTROLECODE, 
					T1.TASKID, 
					T1.NEXTTASKID, 
					T1.RECORDTYPE, 
					T1.WORKFLOWID, 
					T2.FEETYPEDESC, 
					T2.FEETYPECODE, 
					T1.BOUNCEID, 
					T1.RECEIPTID, 
					T3.BOUNCECODE, 
					T1.RESERVEDAMT, 
					T1.BALANCEAMT, 
					T3.REASON BOUNCECODEDESC, 
					COALESCE(T2.TAXAPPLICABLE, 0) TAXAPPLICABLE, 
					COALESCE(T2.TDSREQ, 0) TDSREQ, 
					T2.TAXCOMPONENT, 
					T1.PAIDCGST, 
					T1.PAIDSGST, 
					T1.PAIDIGST, 
					T1.PAIDUGST, 
					T1.WAIVEDCGST, 
					T1.WAIVEDSGST, 
					T1.WAIVEDUGST, 
					T1.WAIVEDIGST, 
					T1.WAIVEDCESS, 
					T1.PAIDCESS, 
					T1.FINSOURCE, 
					T1.DUECREATION, 
					T1.LINKEDTRANID, 
					T1.TDSPAID, 
					T1.HOLDDUE, 
					T1.PRESENTMENTDETAILID,
					T1.STATUS,
					T1.REASON,
					T1.DUEDATE
				FROM MANUALADVISE_TEMP T1  
				LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID  
				LEFT JOIN BOUNCEREASONS T3 ON T1.BOUNCEID = T3.BOUNCEID
				UNION ALL	
				SELECT T1.ADVISEID,
					T1.ADVISETYPE, 
					T1.FINREFERENCE, 
					T1.FEETYPEID, 
					T1.SEQUENCE, 
					T1.ADVISEAMOUNT, 
					T1.PAIDAMOUNT, 
					T1.WAIVEDAMOUNT, 
					T1.REMARKS, 
					T1.VALUEDATE, 
					T1.POSTDATE, 
					T1.VERSION, 
					T1.LASTMNTBY, 
					T1.LASTMNTON, 
					T1.RECORDSTATUS, 
					T1.ROLECODE, 
					T1.NEXTROLECODE, 
					T1.TASKID, 
					T1.NEXTTASKID, 
					T1.RECORDTYPE, 
					T1.WORKFLOWID, 
					T2.FEETYPEDESC, 
					T2.FEETYPECODE, 
					T1.BOUNCEID, 
					T1.RECEIPTID, 
					T3.BOUNCECODE, 
					T1.RESERVEDAMT, 
					T1.BALANCEAMT, 
					T3.REASON BOUNCECODEDESC, 
					COALESCE(T2.TAXAPPLICABLE, 0) TAXAPPLICABLE, 
					COALESCE(T2.TDSREQ, 0) TDSREQ, 
					T2.TAXCOMPONENT, 
					T1.PAIDCGST, 
					T1.PAIDSGST, 
					T1.PAIDIGST, 
					T1.PAIDUGST, 
					T1.WAIVEDCGST, 
					T1.WAIVEDSGST, 
					T1.WAIVEDUGST, 
					T1.WAIVEDIGST, 
					T1.WAIVEDCESS, 
					T1.PAIDCESS, 
					T1.FINSOURCE, 
					T1.DUECREATION, 
					T1.LINKEDTRANID, 
					T1.TDSPAID, 
					T1.HOLDDUE, 
					T1.PRESENTMENTDETAILID,
					T1.STATUS,
					T1.REASON,
					T1.DUEDATE
				FROM MANUALADVISE T1  
				LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID  
				LEFT JOIN BOUNCEREASONS T3 ON T1.BOUNCEID = T3.BOUNCEID	
				WHERE NOT (EXISTS ( SELECT 1 FROM MANUALADVISE_TEMP WHERE MANUALADVISE_TEMP.ADVISEID = T1.ADVISEID))
			]]>			
		</createView>
	</changeSet>
	
	<changeSet id="TK#581.9_post" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'manualadvise_view');
			]]>
		</sql>
	</changeSet>
	
		<changeSet id="TK#581.10_pre" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'manualadvisemovements_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="TK#581.10" author="sampath.d">
		<createView viewName="MANUALADVISEMOVEMENTS_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.MOVEMENTID,
					   T1.ADVISEID,
					   T1.MOVEMENTDATE,
					   T1.MOVEMENTAMOUNT,
					   T1.PAIDAMOUNT,
					   T1.WAIVEDAMOUNT,
					   T1.STATUS,
					   T1.RECEIPTID,
					   T1.RECEIPTSEQID,
					   T1.PAIDCGST,
					   T1.PAIDSGST,
					   T1.PAIDIGST,
					   T1.PAIDUGST,
					   T2.ADVISETYPE,
					   T3.FEETYPECODE,
					   COALESCE(T3.TAXAPPLICABLE, 0) AS TAXAPPLICABLE,
					   T3.TAXCOMPONENT,
					   T3.FEETYPEDESC,
					   T1.WAIVEDCGST,
					   T1.WAIVEDSGST,
					   T1.WAIVEDUGST,
					   T1.WAIVEDIGST,
					   T1.TAXHEADERID,
					   T2.HOLDDUE,
					   T1.TDSPAID,
					   T2.DUEDATE
  				FROM MANUALADVISEMOVEMENTS_TEMP T1 
  				JOIN MANUALADVISE T2 ON T1.ADVISEID = T2.ADVISEID 
  				LEFT JOIN FEETYPES T3 ON T2.FEETYPEID = T3.FEETYPEID
			]]>
		</createView>
	</changeSet>

	<changeSet id="TK#581.10_post" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'manualadvisemovements_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="TK#581.11_pre" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'manualadvisemovements_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="TK#581.11" author="sampath.d">
		<createView viewName="MANUALADVISEMOVEMENTS_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT 
					T1.MOVEMENTID,
					T1.ADVISEID,
					T1.MOVEMENTDATE,
					T1.MOVEMENTAMOUNT,
					T1.PAIDAMOUNT,
					T1.WAIVEDAMOUNT,
    				T1.STATUS, 
    				T1.RECEIPTID, 
    				T1.RECEIPTSEQID, 
    				T1.PAIDCGST, 
    				T1.PAIDSGST, 
    				T1.PAIDIGST,
    				T1.PAIDUGST,
    				T2.ADVISETYPE, 
    				T3.FEETYPECODE,
    				COALESCE(T3.TAXAPPLICABLE, 0) AS TAXAPPLICABLE,
    				T3.TAXCOMPONENT,
    				T3.FEETYPEDESC,
    				T1.WAIVEDCGST,
    				T1.WAIVEDSGST, 
    				T1.WAIVEDUGST, 
    				T1.WAIVEDIGST,
    				T1.TAXHEADERID,
    				T2.HOLDDUE,
					T1.TDSPAID,
					T2.DUEDATE
				FROM MANUALADVISEMOVEMENTS T1
    			JOIN MANUALADVISE T2 ON T1.ADVISEID = T2.ADVISEID
    			LEFT JOIN FEETYPES T3 ON T2.FEETYPEID = T3.FEETYPEID
			]]>
		</createView>
	</changeSet>

	<changeSet id="TK#581.11_post" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'manualadvisemovements_aview');
			]]>
		</sql>
	</changeSet>
	
</databaseChangeLog>