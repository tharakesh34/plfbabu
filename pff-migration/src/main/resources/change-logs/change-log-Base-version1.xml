<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">
	<property name="add.schema" value="dbo." dbms="mssql" />
	<property name="add.schema" value=" " dbms="oracle" />
	<property name="call.substr" value="substring" dbms="mssql" />
	<property name="call.substr" value="substr" dbms="oracle" />
	<property name="call.substr" value="substring" dbms="postgresql" />
	<property name="call.auditdb" value="PFFBFSQCAudit.." dbms="mssql" />
	<property name="call.auditdb" value=" " dbms="oracle" />
	<property name="call.concatenate" value="+" dbms="mssql" />
	<property name="call.concatenate" value="||" dbms="oracle" />
	<property name="call.concatenate" value="||" dbms="postgresql" />
	<property name="call.collength" value="LEN" dbms="mssql" />
	<property name="call.collength" value="LENGTH" dbms="oracle" />
	<property name="call.collength" value="LENGTH" dbms="postgresql" />
	<property name="call.date" value="getdate()" dbms="mssql" />
	<property name="call.date" value="sysdate" dbms="oracle" />
	<property name="call.date" value="now()::timestamp" dbms="postgresql" />
	
	<changeSet id="pre_run_for_pgp" author="Jayant" runAlways="true" dbms="postgresql" >
		<sql>
			Set search_path = plf,public,pg_catalog;
		</sql>	
	</changeSet>
	
	<changeSet id="1" author="Prakash">
     <addColumn tableName="FinJointAccountDetails">
     	<column name="AuthoritySignatory" type="Boolean"/>
     	<column name="Sequence" type="Number(10,0)"/>
     </addColumn>
    </changeSet>
     
     <changeSet id="2" author="Prakash">
     <addColumn tableName="FinJointAccountDetails_Temp">
     	<column name="AuthoritySignatory" type="Boolean"/>
     	<column name="Sequence" type="Number(10,0)"/>
     </addColumn>
     </changeSet>
     
     <changeSet id="3" author="Prakash">
     <createView viewName="finjointaccountdetails_view" replaceIfExists="true">
		     	SELECT t1.jointaccountid,t1.finreference,t1.custcif,t1.includerepay,t1.repayaccountid,t1.CatOfcoApplicant,t1.AuthoritySignatory,t1.Sequence,
		    t1.version,t1.lastmntby,t1.lastmnton,t1.recordstatus,t1.rolecode,t1.nextrolecode,t1.taskid,t1.nexttaskid,
		    t1.recordtype,t1.workflowid,t2.usrlogin,t2.usrfname,t2.usrmname,t2.usrlname,t3.custshrtname AS lovdesccifname,t3.custid
		   FROM finjointaccountdetails_temp t1
		     JOIN secusers t2 ON t1.lastmntby = t2.usrid
		     JOIN customers t3 ON t1.custcif = t3.custcif
		UNION ALL
		 SELECT t1.jointaccountid,t1.finreference,t1.custcif,t1.includerepay,t1.repayaccountid,t1.CatOfcoApplicant,t1.AuthoritySignatory,t1.Sequence,
		    t1.version,t1.lastmntby,t1.lastmnton,t1.recordstatus,t1.rolecode,t1.nextrolecode,t1.taskid,t1.nexttaskid,
		    t1.recordtype,t1.workflowid,t2.usrlogin,t2.usrfname,t2.usrmname,t2.usrlname,t3.custshrtname AS lovdesccifname,t3.custid
		   FROM finjointaccountdetails t1
		     JOIN secusers t2 ON t1.lastmntby = t2.usrid
		     JOIN customers t3 ON t1.custcif = t3.custcif
		  WHERE NOT (EXISTS ( SELECT 1
		           FROM finjointaccountdetails_temp
		          WHERE finjointaccountdetails_temp.jointaccountid = t1.jointaccountid))
     </createView>
     </changeSet>
    
     <changeSet id="4" author="Prakash">
     <createView viewName="finjointaccountdetails_Tview" replaceIfExists="true">
		     	SELECT t1.jointaccountid,t1.finreference,t1.custcif,t1.includerepay,t1.repayaccountid,t1.CatOfcoApplicant,t1.AuthoritySignatory,t1.Sequence,
		    t1.version,t1.lastmntby,t1.lastmnton,t1.recordstatus,t1.rolecode,t1.nextrolecode,t1.taskid,t1.nexttaskid,
		    t1.recordtype,t1.workflowid,t2.usrlogin,t2.usrfname,t2.usrmname,t2.usrlname,t3.custshrtname AS lovdesccifname,t3.custid
		   FROM finjointaccountdetails_temp t1
		     JOIN secusers t2 ON t1.lastmntby = t2.usrid
		     JOIN customers t3 ON t1.custcif = t3.custcif
		
     </createView>
     </changeSet>
     
     <changeSet id="5" author="Prakash">
     <createView viewName="finjointaccountdetails_Aview" replaceIfExists="true">
		     	SELECT t1.jointaccountid,t1.finreference,t1.custcif,t1.includerepay,t1.repayaccountid,t1.CatOfcoApplicant,t1.AuthoritySignatory,t1.Sequence,
		    t1.version,t1.lastmntby,t1.lastmnton,t1.recordstatus,t1.rolecode,t1.nextrolecode,t1.taskid,t1.nexttaskid,
		    t1.recordtype,t1.workflowid,t2.usrlogin,t2.usrfname,t2.usrmname,t2.usrlname,t3.custshrtname AS lovdesccifname,t3.custid
		   FROM finjointaccountdetails t1
		     JOIN secusers t2 ON t1.lastmntby = t2.usrid
		     JOIN customers t3 ON t1.custcif = t3.custcif
		
     </createView>
     </changeSet>
     
     <changeSet id="6" author="Prakash">
     <sql>
     	delete from plf.BMTLovFIELDCODE where fieldcode = 'cofco-app' ;
     </sql>
	</changeSet>
	<changeSet id="8" author="Durga Prasad D">
		<sql>
		delete from bmtlovfieldcode where fieldCode = 'PUR_LOAN';
		insert into bmtlovfieldcode values('PUR_LOAN', 'Purpose Of Loan', 'String', 1, 1, 1, 1007, CURRENT_TIMESTAMP, 'Approved','','','','','',0);

		delete from rmtlovfielddetail where fieldCode = 'PUR_LOAN';
		update seqrmtlovfielddetail set seqno = (Select Max(fieldcodeid) from rmtlovfielddetail);
		insert into rmtlovfielddetail values((Select Max(fieldcodeid)+1 from rmtlovfielddetail),(Select fieldcode from bmtlovfieldcode where fieldcode='PUR_LOAN'),'BT', 'Balance Transfer',1,1,1007, CURRENT_TIMESTAMP, 'Approved','','','','','',0, 0);
		insert into rmtlovfielddetail values((Select Max(fieldcodeid)+1 from rmtlovfielddetail),(Select fieldcode from bmtlovfieldcode where fieldcode='PUR_LOAN'),'LC', 'Loan Consolidation',1,1,1007, CURRENT_TIMESTAMP, 'Approved','','','','','',0, 0);
		insert into rmtlovfielddetail values((Select Max(fieldcodeid)+1 from rmtlovfielddetail),(Select fieldcode from bmtlovfieldcode where fieldcode='PUR_LOAN'),'CPP', 'Office/Commercial Property Purchase',1,1,1007, CURRENT_TIMESTAMP, 'Approved','','','','','',0, 0);
		insert into rmtlovfielddetail values((Select Max(fieldcodeid)+1 from rmtlovfielddetail),(Select fieldcode from bmtlovfieldcode where fieldcode='PUR_LOAN'),'BSEXON', 'Business Expansion - Online',1,1,1007, CURRENT_TIMESTAMP, 'Approved','','','','','',0, 0);										  
		insert into rmtlovfielddetail values((Select Max(fieldcodeid)+1 from rmtlovfielddetail),(Select fieldcode from bmtlovfieldcode where fieldcode='PUR_LOAN'), 'WC', 'Working Capital',1,1,1007, CURRENT_TIMESTAMP, 'Approved','','','','','',0, 0);										  
		insert into rmtlovfielddetail values((Select Max(fieldcodeid)+1 from rmtlovfielddetail),(Select fieldcode from bmtlovfieldcode where fieldcode='PUR_LOAN'),'BREX', 'Branch Expansion',1,1,1007, CURRENT_TIMESTAMP, 'Approved','','','','','',0, 0);										  
		insert into rmtlovfielddetail values((Select Max(fieldcodeid)+1 from rmtlovfielddetail),(Select fieldcode from bmtlovfieldcode where fieldcode='PUR_LOAN'),'BSEXOF', 'Business Expansion - Offline',1,1,1007, CURRENT_TIMESTAMP, 'Approved','','','','','',0, 0);										  
		insert into rmtlovfielddetail values((Select Max(fieldcodeid)+1 from rmtlovfielddetail),(Select fieldcode from bmtlovfieldcode where fieldcode='PUR_LOAN'),'INVP', 'Inventory Purchase',1,1,1007, CURRENT_TIMESTAMP, 'Approved','','','','','',0, 0);											  
		insert into rmtlovfielddetail values((Select Max(fieldcodeid)+1 from rmtlovfielddetail),(Select fieldcode from bmtlovfieldcode where fieldcode='PUR_LOAN'),'MACPUR', 'Machinery purchase',1,1,1007, CURRENT_TIMESTAMP, 'Approved','','','','','',0, 0);		  
		insert into rmtlovfielddetail values((Select Max(fieldcodeid)+1 from rmtlovfielddetail),(Select fieldcode from bmtlovfieldcode where fieldcode='PUR_LOAN'),'OTHERS', 'Others',1,1,1007, CURRENT_TIMESTAMP, 'Approved','','','','','',0, 0);	
		update seqrmtlovfielddetail set seqno = (Select Max(fieldcodeid) from rmtlovfielddetail);
		</sql>
	</changeSet>
	
	<changeSet id="9" author="Prakash">
		<sql>
		delete from rmtlovfielddetail where fieldCode = 'CAT_COAPP';
		update seqrmtlovfielddetail set seqno = (Select Max(fieldcodeid) from rmtlovfielddetail);
		insert into rmtlovfielddetail values((Select Max(fieldcodeid)+1 from rmtlovfielddetail),(Select fieldcode from bmtlovfieldcode where fieldcode='CAT_COAPP'),'Husband','Husband',1,1,1000,current_timestamp,'Approved','','','','','',0,0,'');
		insert into rmtlovfielddetail values((Select Max(fieldcodeid)+1 from rmtlovfielddetail),(Select fieldcode from bmtlovfieldcode where fieldcode='CAT_COAPP'),'Wife','Wife',1,1,1000,current_timestamp,'Approved','','','','','',0,0,'');
		insert into rmtlovfielddetail values((Select Max(fieldcodeid)+1 from rmtlovfielddetail),(Select fieldcode from bmtlovfieldcode where fieldcode='CAT_COAPP'),'Mother','Mother',1,1,1000,current_timestamp,'Approved','','','','','',0,0,'');
		insert into rmtlovfielddetail values((Select Max(fieldcodeid)+1 from rmtlovfielddetail),(Select fieldcode from bmtlovfieldcode where fieldcode='CAT_COAPP'),'Father','Father',1,1,1000,current_timestamp,'Approved','','','','','',0,0,'');										  
		insert into rmtlovfielddetail values((Select Max(fieldcodeid)+1 from rmtlovfielddetail),(Select fieldcode from bmtlovfieldcode where fieldcode='CAT_COAPP'),'Son','Son',1,1,1000,current_timestamp,'Approved','','','','','',0,0,'');										  
		insert into rmtlovfielddetail values((Select Max(fieldcodeid)+1 from rmtlovfielddetail),(Select fieldcode from bmtlovfieldcode where fieldcode='CAT_COAPP'),'Daughter','Daughter',1,1,1000,current_timestamp,'Approved','','','','','',0,0,'');										  
		insert into rmtlovfielddetail values((Select Max(fieldcodeid)+1 from rmtlovfielddetail),(Select fieldcode from bmtlovfieldcode where fieldcode='CAT_COAPP'),'Self','Self',1,1,1000,current_timestamp,'Approved','','','','','',0,0,'');										  
		update seqrmtlovfielddetail set seqno = (Select Max(fieldcodeid) from rmtlovfielddetail);
		</sql>
	</changeSet>
	 
     
<changeSet id="6" author="Amit">
	<addColumn tableName="BMTDocumentTypes">
		<column name="DocIsPdfExtRequired" type="boolean" />
		<column name="DocIsPasswordProtected" type="boolean" />
		<column name="PdfMappingRef" type="NUMBER(19,0)" />
	</addColumn>
	<addColumn tableName="BMTDocumentTypes_temp">
		<column name="DocIsPdfExtRequired" type="boolean" />
		<column name="DocIsPasswordProtected" type="boolean" />
		<column name="PdfMappingRef" type="NUMBER(19,0)" />
	</addColumn>
</changeSet>	
  <changeSet id="7" author="Amit" >
	<createView viewName="BMTDocumentTypes_View" replaceIfExists="true">
		  	SELECT DocTypeCode ,
           DocTypeDesc ,
           DocIsMandatory ,
           DocTypeIsActive ,
           DocIsCustDoc ,
           Version ,
           LastMntBy ,
           LastMntOn ,
           RecordStatus ,
           RoleCode ,
           NextRoleCode ,
           TaskId ,
           NextTaskId ,
           RecordType ,
           WorkflowId ,
           DocExpDateIsMand ,
           DocIssueDateMand ,
           DocIdNumMand ,
           DocIssuedAuthorityMand,
           DocIsPdfExtRequired,
           DocIsPasswordProtected,
           PdfMappingRef 
     FROM BMTDocumentTypes_Temp 
   UNION ALL 
   SELECT DocTypeCode ,
           DocTypeDesc ,
           DocIsMandatory ,
           DocTypeIsActive ,
           DocIsCustDoc ,
           Version ,
           LastMntBy ,
           LastMntOn ,
           RecordStatus ,
           RoleCode ,
           NextRoleCode ,
           TaskId ,
           NextTaskId ,
           RecordType ,
           WorkflowId ,
           DocExpDateIsMand ,
           DocIssueDateMand ,
           DocIdNumMand ,
           DocIssuedAuthorityMand,
           DocIsPdfExtRequired,
           DocIsPasswordProtected,
           PdfMappingRef  
     FROM BMTDocumentTypes 
     WHERE NOT EXISTS ( SELECT 1 
                        FROM BMTDocumentTypes_Temp 
                          WHERE DocTypeCode = BMTDocumentTypes.DocTypeCode )
	</createView>
</changeSet>
  
  <changeSet id="8" author="Amit" >
	<createView viewName="BMTDOCUMENTTYPES_AVIEW" replaceIfExists="true">
		  	SELECT DocTypeCode ,
          DocTypeDesc ,
          DocIsMandatory ,
          DocTypeIsActive ,
          DocIsCustDoc ,
          Version ,
          LastMntBy ,
          LastMntOn ,
          RecordStatus ,
          RoleCode ,
          NextRoleCode ,
          TaskId ,
          NextTaskId ,
          RecordType ,
          WorkflowId ,
          DocExpDateIsMand ,
          DocIssueDateMand ,
          DocIdNumMand ,
          DocIssuedAuthorityMand,
           DocIsPdfExtRequired,
           DocIsPasswordProtected,
           PdfMappingRef   
     FROM BMTDocumentTypes
	</createView>
</changeSet>

<changeSet id="9" author="Amit">
		<sql>		
	Update BMTDOCUMENTTYPES set DOCISPDFEXTREQUIRED=0 , DOCISPASSWORDPROTECTED=0 , PDFMAPPINGREF=0;
	Update BMTDOCUMENTTYPES_Temp set DOCISPDFEXTREQUIRED=0 , DOCISPASSWORDPROTECTED=0 , PDFMAPPINGREF=0;
		</sql>
	</changeSet>
	
	<changeSet id="10" author="Amit">
	<sql>
		INSERT INTO SecRights SELECT (select (SeqNo+1) from
		SeqSecRights),3,'DocumentTypeDialog_mappingRef','DocumentTypeDialog',0,1000,current_timestamp,'Approved','
		',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;

		Update SeqSecRights set seqno = (select max(rightid)+1 from SecRights);

		INSERT INTO SecGroupRights SELECT (select (SeqNo+1) from
		SeqSecGroupRights ), (select GrpID from SecGroups where
		GrpCode ='DOCUMENTTYPE_MAKER'), (select RightID from SecRights WHERE
		RightName='DocumentTypeDialog_mappingRef'),1,0,10000,current_timestamp,'Approved','
		',' ',' ',' ',' ',0 FROM SeqSecGroupRights;

		Update SeqSecGroupRights set seqno = (select max(grprightid)+1 from
		SecGroupRights);
	</sql>
</changeSet>

	<changeSet id="11" author="Amit">
		<sql>
			INSERT INTO SecRights SELECT (select (SeqNo+1) from
			SeqSecRights),3,'DocumentTypeDialog_docIsPasswordProtected','DocumentTypeDialog',0,1000,current_timestamp,'Approved','
			',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;

			Update SeqSecRights set seqno = (select max(rightid)+1 from SecRights);

			INSERT INTO SecGroupRights SELECT (select (SeqNo+1) from
			SeqSecGroupRights ), (select GrpID from SecGroups where
			GrpCode ='DOCUMENTTYPE_MAKER'), (select RightID from SecRights WHERE
			RightName='DocumentTypeDialog_docIsPasswordProtected'),1,0,10000,current_timestamp,'Approved','
			',' ',' ',' ',' ',0 FROM SeqSecGroupRights;

			Update SeqSecGroupRights set seqno = (select max(grprightid)+1 from
			SecGroupRights);
		</sql>
	</changeSet>

	<changeSet id="12" author="Amit">
		<sql>
			INSERT INTO SecRights SELECT (select (SeqNo+1) from
			SeqSecRights),3,'DocumentTypeDialog_docIsPdfExtRequired','DocumentTypeDialog',0,1000,current_timestamp,'Approved','
			',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;

			Update SeqSecRights set seqno = (select max(rightid)+1 from SecRights);

			INSERT INTO SecGroupRights SELECT (select (SeqNo+1) from
			SeqSecGroupRights ), (select GrpID from SecGroups where
			GrpCode ='DOCUMENTTYPE_MAKER'), (select RightID from SecRights WHERE
			RightName='DocumentTypeDialog_docIsPdfExtRequired'),1,0,10000,current_timestamp,'Approved','
			',' ',' ',' ',' ',0 FROM SeqSecGroupRights;

			Update SeqSecGroupRights set seqno = (select max(grprightid)+1 from
			SecGroupRights)
		</sql>
	</changeSet>
	
	<changeSet id="13" author="Amit" >
		<createTable tableName="DocumentDataConfig">
			<column name="Type" type="VARCHAR2(50)"/>
			<column name="Year" type="VARCHAR2(50)"/>
			<column name="Label" type="VARCHAR2(50)"/>
			<column name="LabelText" type="VARCHAR2(250)"/>
			<column name="LabelValueType" type="VARCHAR2(50)" />
			<column name="DefaultValue" type="VARCHAR2(50)"/>
			<column name="FormulaExecutionType" type="VARCHAR2(50)"/>
			<column name="IndexOf" type="VARCHAR2(50)"/>
			<column name="ExternalRef" type="VARCHAR2(250)" />
			<column name="MappingValue" type="NUMBER(19,0)" />
			<column name="IsActive" type="NUMBER(1,0)"  defaultValue="1"/>
			<column name="Formula" type="VARCHAR2(500)" />
		</createTable>
   </changeSet>
	
<changeSet id="14" author="Amit">
		<sql>		
	Insert into DOCUMENTDATACONFIG (TYPE,YEAR,LABEL,LABELTEXT,LABELVALUETYPE,DEFAULTVALUE,FORMULAEXECUTIONTYPE,INDEXOF,EXTERNALREF,MAPPINGVALUE,ISACTIVE,FORMULA) values ('ITR-4','2015-16','13','Repairs to machinery','int','-1','horizontal','0','repairsToMachinery',1,1,null);
	Insert into DOCUMENTDATACONFIG (TYPE,YEAR,LABEL,LABELTEXT,LABELVALUETYPE,DEFAULTVALUE,FORMULAEXECUTIONTYPE,INDEXOF,EXTERNALREF,MAPPINGVALUE,ISACTIVE,FORMULA) values ('ITR-4','2015-16',' ',' ','Double','-1',' ','0','totalIndirectExpenses',1,1,'rents+powerNFuel+repairsToMachinery');
	Insert into DOCUMENTDATACONFIG (TYPE,YEAR,LABEL,LABELTEXT,LABELVALUETYPE,DEFAULTVALUE,FORMULAEXECUTIONTYPE,INDEXOF,EXTERNALREF,MAPPINGVALUE,ISACTIVE,FORMULA) values ('ITR-4','2015-16','10','Power and fuel','int','-1','horizontal','0','powerNFuel',1,1,null);
	Insert into DOCUMENTDATACONFIG (TYPE,YEAR,LABEL,LABELTEXT,LABELVALUETYPE,DEFAULTVALUE,FORMULAEXECUTIONTYPE,INDEXOF,EXTERNALREF,MAPPINGVALUE,ISACTIVE,FORMULA) values ('ITR-4','2015-16','11','Rents','int','-1','horizontal','0','rents',1,1,null);
		</sql>
	</changeSet>
	
	<changeSet id="15" author="Amit">
		<createTable tableName="DocumentDataMapping">
			<column name="MappingId" type="NUMBER(19,0)">
				<constraints primaryKey="true" nullable="false" />
			</column>
			<column name="Type" type="VARCHAR2(50)" />
		</createTable>
	</changeSet>
	
	<changeSet id="16" author="Amit">
		<sql>		
	Insert into DOCUMENTDATAMAPPING (MAPPINGID,TYPE) values (1,'ITR4');
	Insert into DOCUMENTDATAMAPPING (MAPPINGID,TYPE) values (2,'ITR5');
	Insert into DOCUMENTDATAMAPPING (MAPPINGID,TYPE) values (3,'ST3');	
	</sql>
	</changeSet>

	<changeSet id="17" author="Amit">
		<createView viewName="CustomerDocuments_AView"
			replaceIfExists="true">
 SELECT t1.custid,
    t1.custdoctype,
    t2.doctypedesc  lovdesccustdoccategory,
    t1.custdoctitle,
    t1.custdocsysname,
    t1.custdocrcvdon,
    t1.custdocexpdate,
    t1.custdocissuedon,
    t1.custdocissuedcountry,
    t3.countrydesc  lovdesccustdocissuedcountry,
    t1.custdocisverified,
    t1.custdocverifiedby,
    t1.custdocisacrive,
    t1.version,
    t1.lastmntby,
    t1.lastmnton,
    t1.recordstatus,
    t1.rolecode,
    t1.nextrolecode,
    t1.custdocname,
    t1.custdoccategory,
    t1.custdocimage,
    t1.taskid,
    t1.nexttaskid,
    t1.recordtype,
    t1.workflowid,
    t2.docexpdateismand,
    t2.docissuedatemand,
    t2.docidnummand,
    t2.docissuedauthoritymand,
    t2.docismandatory,
    t1.docrefid,
    t1.docpurpose,
    t1.docuri,
	t2.docispdfextrequired,
	t2.docispasswordprotected,
	t2.pdfmappingref
   FROM plf.customerdocuments t1
     JOIN bmtdocumenttypes t2 ON t1.custdoccategory = t2.doctypecode
     JOIN bmtcountries t3 ON t1.custdocissuedcountry = t3.countrycode
	 	</createView>
	</changeSet>
	
	 <changeSet id="18" author="Amit" >
	<createView viewName="CustomerDocuments_View" replaceIfExists="true">
 SELECT t1.custid,
    t1.custdoctype,
    t2.doctypedesc  lovdesccustdoccategory,
    t1.custdoctitle,
    t1.custdocsysname,
    t1.custdocrcvdon,
    t1.custdocexpdate,
    t1.custdocissuedon,
    t1.custdocissuedcountry,
    t3.countrydesc  lovdesccustdocissuedcountry,
    t1.custdocisverified,
    t1.custdocverifiedby,
    t1.custdocisacrive,
    t1.docpurpose,
    t1.docuri,
    t1.version,
    t1.lastmntby,
    t1.lastmnton,
    t1.recordstatus,
    t1.rolecode,
    t1.nextrolecode,
    t1.custdocname,
    t1.custdoccategory,
    t1.custdocimage,
    t1.taskid,
    t1.nexttaskid,
    t1.recordtype,
    t1.workflowid,
    t2.docexpdateismand,
    t2.docissuedatemand,
    t2.docidnummand,
    t2.docissuedauthoritymand,
    t2.docismandatory,
    t1.docrefid,
	t2.docispdfextrequired,
	t2.docispasswordprotected,
	t2.pdfmappingref
   FROM plf.customerdocuments_temp t1
     JOIN bmtdocumenttypes t2 ON t1.custdoccategory = t2.doctypecode
     JOIN bmtcountries t3 ON t1.custdocissuedcountry = t3.countrycode
UNION ALL
 SELECT t1.custid,
    t1.custdoctype,
    t2.doctypedesc  lovdesccustdoccategory,
    t1.custdoctitle,
    t1.custdocsysname,
    t1.custdocrcvdon,
    t1.custdocexpdate,
    t1.custdocissuedon,
    t1.custdocissuedcountry,
    t3.countrydesc  lovdesccustdocissuedcountry,
    t1.custdocisverified,
    t1.custdocverifiedby,
    t1.custdocisacrive,
    t1.docpurpose,
    t1.docuri,
    t1.version,
    t1.lastmntby,
    t1.lastmnton,
    t1.recordstatus,
    t1.rolecode,
    t1.nextrolecode,
    t1.custdocname,
    t1.custdoccategory,
    t1.custdocimage,
    t1.taskid,
    t1.nexttaskid,
    t1.recordtype,
    t1.workflowid,
    t2.docexpdateismand,
    t2.docissuedatemand,
    t2.docidnummand,
    t2.docissuedauthoritymand,
    t2.docismandatory,
    t1.docrefid,
	t2.docispdfextrequired,
	t2.docispasswordprotected,
	t2.pdfmappingref
   FROM customerdocuments t1
     JOIN bmtdocumenttypes t2 ON t1.custdoccategory = t2.doctypecode
     JOIN bmtcountries t3 ON t1.custdocissuedcountry = t3.countrycode
  WHERE NOT (EXISTS ( SELECT 1
           FROM customerdocuments_temp
          WHERE customerdocuments_temp.custid = t1.custid AND customerdocuments_temp.custdoccategory = t1.custdoccategory))
		  </createView>
</changeSet>

<changeSet id="19" author="Amit">
		<sql>
Insert into DOCUMENTDATACONFIG (TYPE,YEAR,LABEL,LABELTEXT,LABELVALUETYPE,DEFAULTVALUE,FORMULAEXECUTIONTYPE,INDEXOF,EXTERNALREF,MAPPINGVALUE,ISACTIVE,FORMULA) values ('ST-3','2016-2017',' ','Actual date of filing','String',null,'horizontal','0','Actual date of filing',3,1,null);
Insert into DOCUMENTDATACONFIG (TYPE,YEAR,LABEL,LABELTEXT,LABELVALUETYPE,DEFAULTVALUE,FORMULAEXECUTIONTYPE,INDEXOF,EXTERNALREF,MAPPINGVALUE,ISACTIVE,FORMULA) values ('ST-3','2016-2017',' ','No of days beyond due date','int','-1','horizontal','0','No of days beyond due date',3,1,null);
Insert into DOCUMENTDATACONFIG (TYPE,YEAR,LABEL,LABELTEXT,LABELVALUETYPE,DEFAULTVALUE,FORMULAEXECUTIONTYPE,INDEXOF,EXTERNALREF,MAPPINGVALUE,ISACTIVE,FORMULA) values ('ST-3','2016-2017',' ','Due date for filing of this return','String',null,'horizontal','0','Due date for filing of this return',3,1,null);
	</sql>
	</changeSet>
	 <changeSet id="20" author="Surekha">
     <createView viewName="rmtlovfielddetail_view" replaceIfExists="true">
		     
		     SELECT t1.fieldcodeid,t1.fieldcode,t2.fieldcodedesc AS lovdescfieldcodename,t1.fieldcodevalue,t1.valuedesc,t1.isactive,
		    t1.version,t1.lastmntby,t1.systemdefault,t1.lastmnton,t1.recordstatus,t1.rolecode,t1.nextrolecode,t1.taskid,t1.recordtype,
		    t1.workflowid,t1.nexttaskid
		   FROM rmtlovfielddetail_temp t1
		     JOIN bmtlovfieldcode t2 ON t1.fieldcode = t2.fieldcode
		UNION ALL
		 SELECT t1.fieldcodeid,t1.fieldcode,t2.fieldcodedesc AS lovdescfieldcodename,t1.fieldcodevalue,t1.valuedesc,t1.isactive,
		    t1.version,t1.lastmntby,t1.systemdefault,t1.lastmnton,t1.recordstatus,t1.rolecode,t1.nextrolecode,t1.taskid,t1.recordtype,
		    t1.workflowid,t1.nexttaskid
		   FROM rmtlovfielddetail t1
		     JOIN bmtlovfieldcode t2 ON t1.fieldcode = t2.fieldcode
		  WHERE NOT (EXISTS ( SELECT 1
		           FROM rmtlovfielddetail_temp
		          WHERE rmtlovfielddetail_temp.fieldcodeid = t1.fieldcodeid))
		          
   </createView>
     </changeSet>
     <changeSet id="21" author="Surekha">
     <createView viewName="rmtlovfielddetail_Aview" replaceIfExists="true">
		     
		     SELECT t1.fieldcodeid,t1.fieldcode,t2.fieldcodedesc AS lovdescfieldcodename,t1.fieldcodevalue,t1.valuedesc,t1.isactive,
		    t1.version,t1.lastmntby,t1.systemdefault,t1.lastmnton,t1.recordstatus,t1.rolecode,t1.nextrolecode,t1.taskid,t1.recordtype,
		    t1.workflowid,t1.nexttaskid
		   FROM rmtlovfielddetail t1
		     JOIN bmtlovfieldcode t2 ON t1.fieldcode = t2.fieldcode
		
   </createView>
     </changeSet>
     <changeSet id="22" author="Surekha">
     	<dropColumn tableName="RMTLovFieldDetail" columnName="CatOfcoApplicant"/>
     </changeSet>
      <changeSet id="23" author="Surekha">
     	<dropColumn tableName="RMTLovFieldDetail_Temp" columnName="CatOfcoApplicant"/>
     </changeSet>
      <changeSet id="24" author="Surekha">
     <sql>
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'VehicleDealerDialog_VASM_AccountNumber','VehicleDealerDialog',0,1000,current_timestamp,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'VehicleDealerDialog_VASM_dealerName','VehicleDealerDialog',0,1000,current_timestamp,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'VehicleDealerDialog_VASM_dealerFax','VehicleDealerDialog',0,1000,current_timestamp,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'VehicleDealerDialog_VASM_dealerAddress1','VehicleDealerDialog',0,1000,current_timestamp,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'VehicleDealerDialog_VASM_dealerAddress2','VehicleDealerDialog',0,1000,current_timestamp,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'VehicleDealerDialog_VASM_dealerAddress3','VehicleDealerDialog',0,1000,current_timestamp,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'VehicleDealerDialog_VASM_dealerAddress4','VehicleDealerDialog',0,1000,current_timestamp,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'VehicleDealerDialog_VASM_dealerCountry','VehicleDealerDialog',0,1000,current_timestamp,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'VehicleDealerDialog_VASM_dealerProvince','VehicleDealerDialog',0,1000,current_timestamp,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'VehicleDealerDialog_VASM_PaymentMode','VehicleDealerDialog',0,1000,current_timestamp,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'VehicleDealerDialog_VASM_Emirates','VehicleDealerDialog',0,1000,current_timestamp,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'VehicleDealerDialog_VASM_Email','VehicleDealerDialog',0,1000,current_timestamp,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'VehicleDealerDialog_VASM_AccountingTreatment','VehicleDealerDialog',0,1000,current_timestamp,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'VehicleDealerDialog_VASM_CommisionPaidAt','VehicleDealerDialog',0,1000,current_timestamp,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'VehicleDealerDialog_VASM_CalculationRule','VehicleDealerDialog',0,1000,current_timestamp,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'VehicleDealerDialog_VASM_PoBox','VehicleDealerDialog',0,1000,current_timestamp,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'VehicleDealerDialog_VASM_SellerType','VehicleDealerDialog',0,1000,current_timestamp,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'VehicleDealerDialog_VASM_dealerCity','VehicleDealerDialog',0,1000,current_timestamp,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'VehicleDealerDialog_VASM_ZipCode','VehicleDealerDialog',0,1000,current_timestamp,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'VehicleDealerDialog_VASM_Active','VehicleDealerDialog',0,1000,current_timestamp,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'VehicleDealerDialog_SOPT_AccountNumber','VehicleDealerDialog',0,1000,current_timestamp,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'VehicleDealerDialog_SOPT_dealerName','VehicleDealerDialog',0,1000,current_timestamp,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'VehicleDealerDialo_SOPTg_dealerFax','VehicleDealerDialog',0,1000,current_timestamp,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'VehicleDealerDialog_SOPT_dealerAddress1','VehicleDealerDialog',0,1000,current_timestamp,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'VehicleDealerDialog_SOPT_dealerAddress2','VehicleDealerDialog',0,1000,current_timestamp,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'VehicleDealerDialog_SOPT_dealerAddress3','VehicleDealerDialog',0,1000,current_timestamp,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'VehicleDealerDialog_SOPT_dealerAddress4','VehicleDealerDialog',0,1000,current_timestamp,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'VehicleDealerDialog_SOPT_dealerCountry','VehicleDealerDialog',0,1000,current_timestamp,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'VehicleDealerDialog_SOPT_dealerProvince','VehicleDealerDialog',0,1000,current_timestamp,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'VehicleDealerDialog_SOPT_PaymentMode','VehicleDealerDialog',0,1000,current_timestamp,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'VehicleDealerDialog_SOPT_Emirates','VehicleDealerDialog',0,1000,current_timestamp,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'VehicleDealerDialog_SOPT_Email','VehicleDealerDialog',0,1000,current_timestamp,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'VehicleDealerDialog_SOPT_AccountingTreatment','VehicleDealerDialog',0,1000,current_timestamp,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'VehicleDealerDialog_SOPT_CommisionPaidAt','VehicleDealerDialog',0,1000,current_timestamp,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'VehicleDealerDialog_SOPT_CalculationRule','VehicleDealerDialog',0,1000,current_timestamp,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'VehicleDealerDialog_SOPT_PoBox','VehicleDealerDialog',0,1000,current_timestamp,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'VehicleDealerDialog_SOPT_SellerType','VehicleDealerDialog',0,1000,current_timestamp,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'VehicleDealerDialog_SOPT_dealerCity','VehicleDealerDialog',0,1000,current_timestamp,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'VehicleDealerDialog_SOPT_ZipCode','VehicleDealerDialog',0,1000,current_timestamp,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'VehicleDealerDialog_SOPT_Active','VehicleDealerDialog',0,1000,current_timestamp,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
	</sql>
	</changeSet>	
	<changeSet id="25" author="Surekha">
	<sql>
		INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='DEALER_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_VASM_AccountNumber'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
		INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='DEALER_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_VASM_dealerName'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
		INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='DEALER_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_VASM_dealerFax'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
		INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='DEALER_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_VASM_dealerAddress1'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
		INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='DEALER_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_VASM_dealerAddress2'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
		INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='DEALER_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_VASM_dealerAddress3'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
		INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='DEALER_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_VASM_dealerAddress4'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
		INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='DEALER_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_VASM_dealerCountry'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
		INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='DEALER_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_VASM_dealerProvince'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
		INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='DEALER_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_VASM_PaymentMode'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
		INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='DEALER_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_VASM_Emirates'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
		INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='DEALER_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_VASM_Email'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
		INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='DEALER_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_VASM_AccountingTreatment'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
		INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='DEALER_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_VASM_CommisionPaidAt'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
		INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='DEALER_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_VASM_CalculationRule'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
		INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='DEALER_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_VASM_PoBox'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
		INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='DEALER_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_VASM_SellerType'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
		INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='DEALER_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_VASM_dealerCity'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
		INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='DEALER_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_VASM_ZipCode'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
		INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='DEALER_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_VASM_Active'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
		
		INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='DEALER_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_SOPT_AccountNumber'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
		INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='DEALER_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_SOPT_dealerName'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
		INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='DEALER_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialo_SOPTg_dealerFax'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
		INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='DEALER_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_SOPT_dealerAddress1'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
		INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='DEALER_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_SOPT_dealerAddress2'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
		INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='DEALER_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_SOPT_dealerAddress3'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
		INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='DEALER_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_SOPT_dealerAddress4'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
		INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='DEALER_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_SOPT_dealerCountry'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
		INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='DEALER_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_SOPT_dealerProvince'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
		INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='DEALER_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_SOPT_PaymentMode'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
		INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='DEALER_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_SOPT_Emirates'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
		INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='DEALER_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_SOPT_Email'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
		INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='DEALER_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_SOPT_AccountingTreatment'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
		INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='DEALER_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_SOPT_CommisionPaidAt'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
		INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='DEALER_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_SOPT_CalculationRule'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
		INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='DEALER_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_SOPT_PoBox'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
		INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='DEALER_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_SOPT_SellerType'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
		INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='DEALER_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_SOPT_dealerCity'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
		INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='DEALER_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_SOPT_ZipCode'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
		INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='DEALER_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_SOPT_Active'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
	</sql>
	</changeSet>

	<changeSet id="26" author="Prakash" dbms="postgresql">
		<createSequence sequenceName="seqmailtemplate"
			startValue="1" maxValue="9999999999" cycle="false" incrementBy="1" />
	</changeSet>

	<changeSet id="27" author="Durga Prasad D">
		<sql>
			insert into ErrorDetails values('90403','EN','E','Update loan service is not applicable for Approved loans.','test','Approved','','','','','',0,current_timestamp,1000,0);
			insert into ErrorDetails values('90404','EN','E','Update loan failed, Disbursement instructions already exists.','test','Approved','','','','','',0,current_timestamp,1000,0);
			insert into ErrorDetails values('90405','EN','E','Update loan failed, Mandate details already exists.','test','Approved','','','','','',0,current_timestamp,1000,0);
		</sql>
	</changeSet>
	<changeSet id="28" author="Surekha">
		<dropForeignKeyConstraint baseTableName="CUSTOMERS" constraintName="FK_CUSTS_RELATIONSHIPOFFICERS"/>
	</changeSet>
	<changeSet id="28" author="Durga Prasad D" dbms="postgresql">
		<createTable tableName="InterfaceLogDetails">
			<column name="InterfaceSeqId" type="bigint" >
				<constraints primaryKey="true" nullable="false"/>
			</column>
			<column name="ServiceName" type="nvarchar(100)">
				<constraints nullable="false"/>
			</column>
			<column name="Reference" type="nvarchar(20)">
				<constraints nullable="false"/>
			</column>
			<column name="EndPoint" type="nvarchar(200)"/>
			<column name="Request" type="nvarchar(65535)"/>
			<column name="Response" type="nvarchar(65535)" />
			<column name="ReqSentOn" type="datetime"/>
			<column name="RespReceivedOn" type="datetime"/>
			<column name="Status" type="nvarchar(200)"/>
			<column name="ErrorCode" type="nvarchar(10)"/>
			<column name="ErrorDesc" type="nvarchar(200)"/>
		</createTable>
	</changeSet>
	<changeSet id="28" author="Durga Prasad D" dbms="oracle">
		<createTable tableName="InterfaceLogDetails">
			<column name="InterfaceSeqId" type="bigint" >
				<constraints primaryKey="true" nullable="false"/>
			</column>
			<column name="ServiceName" type="nvarchar(100)">
				<constraints nullable="false"/>
			</column>
			<column name="Reference" type="nvarchar(20)">
				<constraints nullable="false"/>
			</column>
			<column name="EndPoint" type="nvarchar(200)"/>
			<column name="Request" type="nvarchar(1000)"/>
			<column name="Response" type="nvarchar(1000)" />
			<column name="ReqSentOn" type="datetime"/>
			<column name="RespReceivedOn" type="datetime"/>
			<column name="Status" type="nvarchar(200)"/>
			<column name="ErrorCode" type="nvarchar(10)"/>
			<column name="ErrorDesc" type="nvarchar(200)"/>
		</createTable>
	</changeSet>
	
	<changeSet id="29" author="Amit">
     <addColumn tableName="CustomerDocuments">
     	<column name="PdfPassWord" type="nvarchar(200)"/>
     </addColumn>
    </changeSet>
    
    <changeSet id="30" author="Amit">
     <addColumn tableName="CustomerDocuments_Temp">
     	<column name="PdfPassWord" type="nvarchar(200)"/>
     </addColumn>
    </changeSet>
	
	<changeSet id="31" author="Amit">
		<createView viewName="CustomerDocuments_AView"
			replaceIfExists="true">
			 SELECT t1.custid,
    t1.custdoctype,
    t2.doctypedesc AS lovdesccustdoccategory,
    t1.custdoctitle,
    t1.custdocsysname,
    t1.custdocrcvdon,
    t1.custdocexpdate,
    t1.custdocissuedon,
    t1.custdocissuedcountry,
    t3.countrydesc AS lovdesccustdocissuedcountry,
    t1.custdocisverified,
    t1.custdocverifiedby,
    t1.custdocisacrive,
    t1.version,
    t1.lastmntby,
    t1.lastmnton,
    t1.recordstatus,
    t1.rolecode,
    t1.nextrolecode,
    t1.custdocname,
    t1.custdoccategory,
    t1.custdocimage,
    t1.taskid,
    t1.nexttaskid,
    t1.recordtype,
    t1.workflowid,
    t2.docexpdateismand,
    t2.docissuedatemand,
    t2.docidnummand,
    t2.docissuedauthoritymand,
    t2.docismandatory,
    t1.docrefid,
    t1.docpurpose,
    t1.docuri,
    t2.docispdfextrequired,
    t2.docispasswordprotected,
    t2.pdfmappingref,
    t1.pdfpassword
   FROM customerdocuments t1
     JOIN bmtdocumenttypes t2 ON t1.custdoccategory = t2.doctypecode
     JOIN bmtcountries t3 ON t1.custdocissuedcountry = t3.countrycode
			</createView>
			</changeSet>
	
	<changeSet id="32" author="Amit">
		<createView viewName="CustomerDocuments_View"
			replaceIfExists="true">
			 SELECT t1.custid,
    t1.custdoctype,
    t2.doctypedesc AS lovdesccustdoccategory,
    t1.custdoctitle,
    t1.custdocsysname,
    t1.custdocrcvdon,
    t1.custdocexpdate,
    t1.custdocissuedon,
    t1.custdocissuedcountry,
    t3.countrydesc AS lovdesccustdocissuedcountry,
    t1.custdocisverified,
    t1.custdocverifiedby,
    t1.custdocisacrive,
    t1.docpurpose,
    t1.docuri,
    t1.version,
    t1.lastmntby,
    t1.lastmnton,
    t1.recordstatus,
    t1.rolecode,
    t1.nextrolecode,
    t1.custdocname,
    t1.custdoccategory,
    t1.custdocimage,
    t1.taskid,
    t1.nexttaskid,
    t1.recordtype,
    t1.workflowid,
    t2.docexpdateismand,
    t2.docissuedatemand,
    t2.docidnummand,
    t2.docissuedauthoritymand,
    t2.docismandatory,
    t1.docrefid,
    t2.docispdfextrequired,
    t2.docispasswordprotected,
    t2.pdfmappingref,
    t1.pdfpassword
   FROM customerdocuments_temp t1
     JOIN bmtdocumenttypes t2 ON t1.custdoccategory = t2.doctypecode
     JOIN bmtcountries t3 ON t1.custdocissuedcountry = t3.countrycode
UNION ALL
 SELECT t1.custid,
    t1.custdoctype,
    t2.doctypedesc AS lovdesccustdoccategory,
    t1.custdoctitle,
    t1.custdocsysname,
    t1.custdocrcvdon,
    t1.custdocexpdate,
    t1.custdocissuedon,
    t1.custdocissuedcountry,
    t3.countrydesc AS lovdesccustdocissuedcountry,
    t1.custdocisverified,
    t1.custdocverifiedby,
    t1.custdocisacrive,
    t1.docpurpose,
    t1.docuri,
    t1.version,
    t1.lastmntby,
    t1.lastmnton,
    t1.recordstatus,
    t1.rolecode,
    t1.nextrolecode,
    t1.custdocname,
    t1.custdoccategory,
    t1.custdocimage,
    t1.taskid,
    t1.nexttaskid,
    t1.recordtype,
    t1.workflowid,
    t2.docexpdateismand,
    t2.docissuedatemand,
    t2.docidnummand,
    t2.docissuedauthoritymand,
    t2.docismandatory,
    t1.docrefid,
    t2.docispdfextrequired,
    t2.docispasswordprotected,
    t2.pdfmappingref,
    t1.pdfpassword
   FROM customerdocuments t1
     JOIN bmtdocumenttypes t2 ON t1.custdoccategory = t2.doctypecode
     JOIN bmtcountries t3 ON t1.custdocissuedcountry = t3.countrycode
  WHERE NOT (EXISTS ( SELECT 1
           FROM customerdocuments_temp
          WHERE customerdocuments_temp.custid = t1.custid AND customerdocuments_temp.custdoccategory = t1.custdoccategory))
			</createView>
			</changeSet>
	<changeSet id="33" author="Durga Prasad D" dbms="postgresql">
		<sql>
			drop table InterfaceLogDetails cascade;
		</sql>
		<createTable tableName="InterfaceLogDetails">
			<column name="SeqId" type="bigint" autoIncrement="true" startWith="1">
				<constraints primaryKey="true" nullable="false"/>
			</column>
			<column name="ServiceName" type="nvarchar(100)">
				<constraints nullable="false"/>
			</column>
			<column name="Reference" type="nvarchar(20)">
				<constraints nullable="false"/>
			</column>
			<column name="EndPoint" type="nvarchar(200)"/>
			<column name="Request" type="nvarchar(65535)"/>
			<column name="Response" type="nvarchar(65535)" />
			<column name="ReqSentOn" type="datetime"/>
			<column name="RespReceivedOn" type="datetime"/>
			<column name="Status" type="nvarchar(200)"/>
			<column name="ErrorCode" type="nvarchar(10)"/>
			<column name="ErrorDesc" type="nvarchar(200)"/>
		</createTable>
	</changeSet>
	<changeSet id="33" author="Durga Prasad D" dbms="oracle">
		<sql>
			drop table InterfaceLogDetails;
		</sql>
		<createTable tableName="InterfaceLogDetails">
			<column name="SeqId" type="bigint" autoIncrement="true" startWith="1">
				<constraints primaryKey="true" nullable="false"/>
			</column>
			<column name="ServiceName" type="nvarchar(100)">
				<constraints nullable="false"/>
			</column>
			<column name="Reference" type="nvarchar(20)">
				<constraints nullable="false"/>
			</column>
			<column name="EndPoint" type="nvarchar(200)"/>
			<column name="Request" type="nvarchar(1000)"/>
			<column name="Response" type="nvarchar(1000)" />
			<column name="ReqSentOn" type="datetime"/>
			<column name="RespReceivedOn" type="datetime"/>
			<column name="Status" type="nvarchar(200)"/>
			<column name="ErrorCode" type="nvarchar(10)"/>
			<column name="ErrorDesc" type="nvarchar(200)"/>
		</createTable>
	</changeSet>
<!-- <changeSet id="34" author="Amit">
	<sql>
		INSERT INTO SecRights SELECT (select (SeqNo+1) from
		SeqSecRights),3,'CustomerDocumentDialog_pdfPassword','CustomerDocumentDialog',0,1000,current_timestamp,'Approved','
		',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;

		Update SeqSecRights set seqno = (select max(rightid)+1 from SecRights);

		INSERT INTO SecGroupRights SELECT (select (SeqNo+1) from
		SeqSecGroupRights), (select GrpID from SecGroups where
		GrpCode ='DOCUMENTTYPE_MAKER'), (select RightID from SecRights WHERE
		RightName='CustomerDocumentDialog_pdfPassword'),1,0,10000,current_timestamp,'Approved','
		',' ',' ',' ',' ',0 FROM SeqSecGroupRights;

		Update SeqSecGroupRights set seqno = (select max(grprightid)+1 from
		SecGroupRights);
	</sql>
	</changeSet>
 -->	
 <changeSet id="35" author="Jayant" dbms="postgresql">
		<createSequence sequenceName="seqdisbursementrequests" cycle="false" startValue="1" incrementBy="1" minValue="1"/>
	</changeSet>
	<changeSet id="36" author="Jayant" dbms="postgresql">
		<sql>
			alter table disbursement_requests alter column id set default nextval('seqdisbursementrequests');
		</sql>
	</changeSet>
	<changeSet id="37" author="Jayant" dbms="postgresql">
		<modifyDataType tableName="interfacelogdetails" columnName="request" newDataType="citext"/>
	</changeSet>
	<changeSet id="38" author="Jayant" dbms="postgresql">
		<modifyDataType tableName="interfacelogdetails" columnName="response" newDataType="citext"/>
	</changeSet>
 <changeSet id="39" author="Amit">
		<sql>
			drop table DOCUMENTDATACONFIG;
		</sql>
	</changeSet>
		<changeSet id="40" author="Amit">
		<createTable tableName="DOCUMENTDATACONFIG">
			<column name="Year" type="nvarchar(50)"/>
			<column name="Label" type="nvarchar(50)"/>
			<column name="LabelText" type="nvarchar(250)"/>
			<column name="LabelValueType" type="nvarchar(50)"/>
			<column name="DefaultValue" type="nvarchar(50)" />
			<column name="FormulaExecutionType" type="nvarchar(50)"/>
			<column name="IndexOf" type="nvarchar(50)"/>
			<column name="ExternalRef" type="nvarchar(250)"/>
			<column name="MappingValue" type="NUMBER(19,0)"/>
			<column name="IsActive" type="NUMBER(1,0)" defaultValue="1"/>
			<column name="Formula" type="nvarchar(500)"/>
			<column name="DateFormat" type="nvarchar(100)"/>
		</createTable>
	</changeSet>
	
	<changeSet id="41" author="Amit">
	<sql>
Insert into DOCUMENTDATACONFIG 
values ('2015-16','3c','Total of current assets, loans and advances (av + biv)','int','-1','horizontal','0','BALCURASSET',1,1,null, null);

Insert into DOCUMENTDATACONFIG 
values ('2015-16','iE','Total (iA + iB + iC + iD)','int','-1','horizontal','0','BALCURLIAB',1,1,null, null);

Insert into DOCUMENTDATACONFIG 
values ('2015-16','iA','Sundry Creditors','int','-1','horizontal','0','SUNDRCREDY1',1,1,null, null);

Insert into DOCUMENTDATACONFIG 
values ('2015-16','diii','Total (iE + iiE )','int','-1','horizontal','0','PROVY1',1,1,null, null);

Insert into DOCUMENTDATACONFIG 
values ('2016-2017',' ','No of days beyond due date','int','-1','horizontal','0','NOOFDAYSBEYONDDUE',3,1,null,null);

Insert into DOCUMENTDATACONFIG 
values ('2016-2017',' ','Due date for filing of this return','Date',null,'horizontal','0','DUEDATEFORFILINRET',3,1,null,'dd/MM/yyyy');

Insert into DOCUMENTDATACONFIG 
values ('2016-2017',' ','Actual date of filing','Date',null,'horizontal','0','ACTUALDATEOFFILNG',3,1,null,'dd/MM/yyyy');
	</sql>
	</changeSet>
	
	<changeSet id="42" author="Amit">
		<sql>
			drop table DocumentDataMapping;
		</sql>
	</changeSet>
	<changeSet id="43" author="Amit">
		<createTable tableName="DocumentDataMapping">
			<column name="MappingId" type="NUMBER(19,0)">
				<constraints primaryKey="true" nullable="false" />
			</column>
			<column name="Type" type="VARCHAR2(50)" >
			<constraints primaryKey="false" nullable="false" />
			</column>
			<column name="TypeDescription" type="VARCHAR2(200)" />
		</createTable>
	</changeSet>
	
	<changeSet id="44" author="Amit">
	<sql>
Insert into DOCUMENTDATAMAPPING values (1,'ITR4','ITR-4 Form Description');
Insert into DOCUMENTDATAMAPPING values (2,'ITR5','ITR-5 Form Description');
Insert into DOCUMENTDATAMAPPING values (3,'ST3','Form for Return of Service Tax');
	</sql>
 </changeSet>
 
 	 <changeSet id="45" author="Ganesh.p">
	<sql>
		Delete from ErrorDetails where ErrorCode = '90406';
		INSERT INTO ErrorDetails VALUES('90406','EN','E','{0} must be provided for {1}.','test','Approved','','','','','',0,CURRENT_TIMESTAMP,1000,0);
	</sql>
	</changeSet>
	
	<changeSet id="46" author="Ganesh.p">
	<sql>
		Delete from ErrorDetails where ErrorCode = '90407';
		INSERT INTO ErrorDetails VALUES('90407','EN','E','uploaded document {0} is not supported.','test','Approved','','','','','',0,CURRENT_TIMESTAMP,1000,0);
	</sql>
	</changeSet>
 </databaseChangeLog>