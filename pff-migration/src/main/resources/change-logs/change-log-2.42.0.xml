<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">
	<property name="add.schema" value="dbo." dbms="mssql" />
	<property name="add.schema" value=" " dbms="oracle" />
	<property name="call.substr" value="substring" dbms="mssql" />
	<property name="call.substr" value="substr" dbms="oracle" />
	<property name="call.auditdb" value="PFFBFSQCAudit.." dbms="mssql" />
	<property name="call.auditdb" value=" " dbms="oracle" />
	<property name="call.concatenate" value="+" dbms="mssql" />
	<property name="call.concatenate" value="||" dbms="oracle" />
	<property name="call.collength" value="LEN" dbms="mssql" />
	<property name="call.collength" value="LENGTH" dbms="oracle" />

<changeSet id="01" author="Madhubabu">
		<sql>
		update ErrorDetails set ErrorMessage='Select either planned emi holiday (OR) Multiple disbursement' where ErrorCode='30574';
		update ErrorDetails set ErrorMessage='Select either planned emi holiday (OR) Stepping loan' where ErrorCode='30573';
		</sql>
	</changeSet>
	<changeSet id="02" author="Surekha">
	<sql>
	ALTER TABLE DATA_ENGINE_TABLE ALTER COLUMN  STATUSUPDATE varchar(1000);
	</sql>
	</changeSet>
	
	<changeSet id="2" author="Kesav">
		<createView viewName="PromotionFees_AView" replaceIfExists="true">
			SELECT 		T1.FeeID, T1.PromotionCode, T1.FeeTypeID, T1.FinEvent, T1.FeeOrder, T1.FeeScheduleMethod, T1.CalculationType, T1.RuleCode,
						T1.Amount, T1.Percentage, T1.CalculateOn, T1.AlwDeviation, T1.MaxWaiverPerc, T1.AlwModifyFee, T1.AlwModifyFeeSchdMthd,
						T1.Active, T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId,
						T1.RecordType, T1.WorkflowId, T1.OriginationFee,
						T2.FeeTypeCode, T2.FeeTypeDesc,
						T3.AEEventCodeDesc FinEventDesc,
						T4.RuleCodeDesc RuleDesc
			FROM 		PromotionFees T1 INNER JOIN 
						FeeTypes T2 ON T1.FeeTypeID = T2.FeeTypeID INNER JOIN
						BMTAEEvents T3 ON T1.FinEvent = T3.AEEventCode LEFT OUTER JOIN
						Rules T4 ON T1.RuleCode = T4.RuleCode AND T4.RuleModule='FEES' AND T1.FinEvent = T4.RuleEvent
		</createView>
	</changeSet>
	
	<changeSet id="3" author="Kesav">
		<createView viewName="PromotionFees_TView" replaceIfExists="true">
			SELECT 		T1.FeeID, T1.PromotionCode, T1.FeeTypeID, T1.FinEvent, T1.FeeOrder, T1.FeeScheduleMethod, T1.CalculationType, T1.RuleCode,
						T1.Amount, T1.Percentage, T1.CalculateOn, T1.AlwDeviation, T1.MaxWaiverPerc, T1.AlwModifyFee, T1.AlwModifyFeeSchdMthd,
						T1.Active, T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId,
						T1.RecordType, T1.WorkflowId, T1.OriginationFee,
						T2.FeeTypeCode, T2.FeeTypeDesc,
						T3.AEEventCodeDesc FinEventDesc,
						T4.RuleCodeDesc RuleDesc
			FROM 		PromotionFees_Temp T1 INNER JOIN 
						FeeTypes T2 ON T1.FeeTypeID = T2.FeeTypeID INNER JOIN
						BMTAEEvents T3 ON T1.FinEvent = T3.AEEventCode LEFT OUTER JOIN
						Rules T4 ON T1.RuleCode = T4.RuleCode AND T4.RuleModule='FEES' AND T1.FinEvent = T4.RuleEvent
		</createView>
	</changeSet>
	
	<changeSet id="4" author="Kesav">
		<createView viewName="PromotionFees_View" replaceIfExists="true">
			SELECT 		T1.FeeID, T1.PromotionCode, T1.FeeTypeID, T1.FinEvent, T1.FeeOrder, T1.FeeScheduleMethod, T1.CalculationType, T1.RuleCode,
						T1.Amount, T1.Percentage, T1.CalculateOn, T1.AlwDeviation, T1.MaxWaiverPerc, T1.AlwModifyFee, T1.AlwModifyFeeSchdMthd,
						T1.Active, T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId,
						T1.RecordType, T1.WorkflowId, T1.OriginationFee,
						T2.FeeTypeCode, T2.FeeTypeDesc,
						T3.AEEventCodeDesc FinEventDesc,
						T4.RuleCodeDesc RuleDesc
			FROM 		PromotionFees_Temp T1 INNER JOIN 
						FeeTypes T2 ON T1.FeeTypeID = T2.FeeTypeID INNER JOIN
						BMTAEEvents T3 ON T1.FinEvent = T3.AEEventCode LEFT OUTER JOIN
						Rules T4 ON T1.RuleCode = T4.RuleCode AND T4.RuleModule='FEES' AND T1.FinEvent = T4.RuleEvent
			
			UNION ALL

			SELECT 		T1.FeeID, T1.PromotionCode, T1.FeeTypeID, T1.FinEvent, T1.FeeOrder, T1.FeeScheduleMethod, T1.CalculationType, T1.RuleCode,
						T1.Amount, T1.Percentage, T1.CalculateOn, T1.AlwDeviation, T1.MaxWaiverPerc, T1.AlwModifyFee, T1.AlwModifyFeeSchdMthd,
						T1.Active, T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId,
						T1.RecordType, T1.WorkflowId, T1.OriginationFee,
						T2.FeeTypeCode, T2.FeeTypeDesc,
						T3.AEEventCodeDesc FinEventDesc,
						T4.RuleCodeDesc RuleDesc
			FROM 		PromotionFees T1 INNER JOIN 
						FeeTypes T2 ON T1.FeeTypeID = T2.FeeTypeID INNER JOIN
						BMTAEEvents T3 ON T1.FinEvent = T3.AEEventCode LEFT OUTER JOIN
						Rules T4 ON T1.RuleCode = T4.RuleCode AND T4.RuleModule='FEES' AND T1.FinEvent = T4.RuleEvent
			
			WHERE     	NOT EXISTS (SELECT 1 FROM PromotionFees_Temp
                        WHERE FeeID = T1.FeeID AND  PromotionCode = T1.PromotionCode AND FinEvent = T1.FinEvent 
								AND FeeTypeID = T1.FeeTypeID AND OriginationFee = T1.OriginationFee)
		</createView>
	</changeSet>
	
	<changeSet id="6" author="Kesav">
		<sql>
			
			Update SeqSecGroups Set SeqNo = (Select MAX(GrpID) + 1 from SecGroups);
			Update SeqSecRights Set SeqNo = (Select MAX(RightID) + 1 from SecRights);
			Update SeqSecGroupRights Set SeqNo = (Select MAX(GrpRightID) + 1 from SecGroupRights);
			Update SeqSecRoleGroups Set SeqNo = (Select MAX(RoleGrpID) + 1 from SecRoleGroups);
			
			Delete from SecGroupRights where GrpID In (Select GrpID from SecGroups where GrpCode = 'PROMOTIONFEES_MAKER');
			Delete from SecRoleGroups where GrpID IN (Select GrpId from SecGroups WHERE GrpCode = 'PROMOTIONFEES_MAKER') And RoleID IN (Select RoleID from SecRoles WHERE RoleCd = 'MSTGRP1_MAKER');
			Delete from SecGroups where GrpCode = 'PROMOTIONFEES_MAKER';
			INSERT INTO SecGroups Values ((Select MAX(GrpID)+1 From SecGroups), 'PROMOTIONFEES_MAKER','WF Maker for Promotion Fees', 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL,0);
			
			Delete from SecGroupRights where RightID In (Select RightID from SecRights where RightName = 'button_PromotionFeesDialog_btnDelete');
			Delete from SecRights where RightName = 'button_PromotionFeesDialog_btnDelete';
			Insert into SecRights Values((Select max(RightID) + 1 from SecRights), 2, 'button_PromotionFeesDialog_btnDelete', 'PromotionFeesDialog', 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			Insert into secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'PROMOTIONFEES_MAKER'), (Select RightID from SecRights where RightName = 'button_PromotionFeesDialog_btnDelete'), 1, 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			INSERT INTO SecRoleGroups values ((SELECT MAX(RoleGrpID) + 1 from SecRoleGroups), (Select MAX(GrpId) from SecGroups WHERE GrpCode = 'PROMOTIONFEES_MAKER'), (Select MAX(RoleID) from SecRoles WHERE RoleCd = 'MSTGRP1_MAKER'), 0, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
			
			Delete from SecGroupRights where RightID In (Select RightID from SecRights where RightName = 'button_PromotionFeesDialog_btnSave');
			Delete from SecRights where RightName = 'button_PromotionFeesDialog_btnSave';
			Insert into SecRights Values((Select max(RightID) + 1 from SecRights), 2, 'button_PromotionFeesDialog_btnSave', 'PromotionFeesDialog', 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			Insert into secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'PROMOTIONFEES_MAKER'), (Select RightID from SecRights where RightName = 'button_PromotionFeesDialog_btnSave'), 1, 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			
			Delete from SecGroupRights where RightID In (Select RightID from SecRights where RightName = 'button_PromotionFeesDialog_btnNew');
			Delete from SecRights where RightName = 'button_PromotionFeesDialog_btnNew';
			Insert into SecRights Values((Select max(RightID) + 1 from SecRights), 2, 'button_PromotionFeesDialog_btnNew', 'PromotionList', 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			Insert into secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'PROMOTIONFEES_MAKER'), (Select RightID from SecRights where RightName = 'button_PromotionFeesDialog_btnNew'), 1, 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			
			Delete from SecGroupRights where RightID In (Select RightID from SecRights where RightName = 'PromotionFeesDialog_PromotionCode');
			Delete from SecRights where RightName = 'PromotionFeesDialog_PromotionCode';
			Insert into SecRights Values((Select max(RightID) + 1 from SecRights), 3, 'PromotionFeesDialog_PromotionCode', 'PromotionFeesDialog', 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			Insert into secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'PROMOTIONFEES_MAKER'), (Select RightID from SecRights where RightName = 'PromotionFeesDialog_PromotionCode'), 1, 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			
			Delete from SecGroupRights where RightID In (Select RightID from SecRights where RightName = 'PromotionFeesDialog_FeeTypeID');
			Delete from SecRights where RightName = 'PromotionFeesDialog_FeeTypeID';
			Insert into SecRights Values((Select max(RightID) + 1 from SecRights), 3, 'PromotionFeesDialog_FeeTypeID', 'PromotionFeesDialog', 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			Insert into secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'PROMOTIONFEES_MAKER'), (Select RightID from SecRights where RightName = 'PromotionFeesDialog_FeeTypeID'), 1, 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			
			Delete from SecGroupRights where RightID In (Select RightID from SecRights where RightName = 'PromotionFeesDialog_FinEvent');
			Delete from SecRights where RightName = 'PromotionFeesDialog_FinEvent';
			Insert into SecRights Values((Select max(RightID) + 1 from SecRights), 3, 'PromotionFeesDialog_FinEvent', 'PromotionFeesDialog', 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			Insert into secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'PROMOTIONFEES_MAKER'), (Select RightID from SecRights where RightName = 'PromotionFeesDialog_FinEvent'), 1, 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			
			Delete from SecGroupRights where RightID In (Select RightID from SecRights where RightName = 'PromotionFeesDialog_FeeOrder');
			Delete from SecRights where RightName = 'PromotionFeesDialog_FeeOrder';
			Insert into SecRights Values((Select max(RightID) + 1 from SecRights), 3, 'PromotionFeesDialog_FeeOrder', 'PromotionFeesDialog', 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			Insert into secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'PROMOTIONFEES_MAKER'), (Select RightID from SecRights where RightName = 'PromotionFeesDialog_FeeOrder'), 1, 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			
			Delete from SecGroupRights where RightID In (Select RightID from SecRights where RightName = 'PromotionFeesDialog_FeeScheduleMethod');
			Delete from SecRights where RightName = 'PromotionFeesDialog_FeeScheduleMethod';
			Insert into SecRights Values((Select max(RightID) + 1 from SecRights), 3, 'PromotionFeesDialog_FeeScheduleMethod', 'PromotionFeesDialog', 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			Insert into secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'PROMOTIONFEES_MAKER'), (Select RightID from SecRights where RightName = 'PromotionFeesDialog_FeeScheduleMethod'), 1, 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			
			Delete from SecGroupRights where RightID In (Select RightID from SecRights where RightName = 'PromotionFeesDialog_CalculationType');
			Delete from SecRights where RightName = 'PromotionFeesDialog_CalculationType';
			Insert into SecRights Values((Select max(RightID) + 1 from SecRights), 3, 'PromotionFeesDialog_CalculationType', 'PromotionFeesDialog', 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			Insert into secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'PROMOTIONFEES_MAKER'), (Select RightID from SecRights where RightName = 'PromotionFeesDialog_CalculationType'), 1, 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			
			Delete from SecGroupRights where RightID In (Select RightID from SecRights where RightName = 'PromotionFeesDialog_RuleCode');
			Delete from SecRights where RightName = 'PromotionFeesDialog_RuleCode';
			Insert into SecRights Values((Select max(RightID) + 1 from SecRights), 3, 'PromotionFeesDialog_RuleCode', 'PromotionFeesDialog', 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			Insert into secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'PROMOTIONFEES_MAKER'), (Select RightID from SecRights where RightName = 'PromotionFeesDialog_RuleCode'), 1, 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			
			Delete from SecGroupRights where RightID In (Select RightID from SecRights where RightName = 'PromotionFeesDialog_Amount');
			Delete from SecRights where RightName = 'PromotionFeesDialog_Amount';
			Insert into SecRights Values((Select max(RightID) + 1 from SecRights), 3, 'PromotionFeesDialog_Amount', 'PromotionFeesDialog', 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			Insert into secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'PROMOTIONFEES_MAKER'), (Select RightID from SecRights where RightName = 'PromotionFeesDialog_Amount'), 1, 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			
			Delete from SecGroupRights where RightID In (Select RightID from SecRights where RightName = 'PromotionFeesDialog_Percentage');
			Delete from SecRights where RightName = 'PromotionFeesDialog_Percentage';
			Insert into SecRights Values((Select max(RightID) + 1 from SecRights), 3, 'PromotionFeesDialog_Percentage', 'PromotionFeesDialog', 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			Insert into secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'PROMOTIONFEES_MAKER'), (Select RightID from SecRights where RightName = 'PromotionFeesDialog_Percentage'), 1, 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			
			Delete from SecGroupRights where RightID In (Select RightID from SecRights where RightName = 'PromotionFeesDialog_CalculateOn');
			Delete from SecRights where RightName = 'PromotionFeesDialog_CalculateOn';
			Insert into SecRights Values((Select max(RightID) + 1 from SecRights), 3, 'PromotionFeesDialog_CalculateOn', 'PromotionFeesDialog', 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			Insert into secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'PROMOTIONFEES_MAKER'), (Select RightID from SecRights where RightName = 'PromotionFeesDialog_CalculateOn'), 1, 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			
			Delete from SecGroupRights where RightID In (Select RightID from SecRights where RightName = 'PromotionFeesDialog_AlwDeviation');
			Delete from SecRights where RightName = 'PromotionFeesDialog_AlwDeviation';
			Insert into SecRights Values((Select max(RightID) + 1 from SecRights), 3, 'PromotionFeesDialog_AlwDeviation', 'PromotionFeesDialog', 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			Insert into secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'PROMOTIONFEES_MAKER'), (Select RightID from SecRights where RightName = 'PromotionFeesDialog_AlwDeviation'), 1, 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			
			Delete from SecGroupRights where RightID In (Select RightID from SecRights where RightName = 'PromotionFeesDialog_MaxWaiverPerc');
			Delete from SecRights where RightName = 'PromotionFeesDialog_MaxWaiverPerc';
			Insert into SecRights Values((Select max(RightID) + 1 from SecRights), 3, 'PromotionFeesDialog_MaxWaiverPerc', 'PromotionFeesDialog', 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			Insert into secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'PROMOTIONFEES_MAKER'), (Select RightID from SecRights where RightName = 'PromotionFeesDialog_MaxWaiverPerc'), 1, 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			
			Delete from SecGroupRights where RightID In (Select RightID from SecRights where RightName = 'PromotionFeesDialog_AlwModifyFee');
			Delete from SecRights where RightName = 'PromotionFeesDialog_AlwModifyFee';
			Insert into SecRights Values((Select max(RightID) + 1 from SecRights), 3, 'PromotionFeesDialog_AlwModifyFee', 'PromotionFeesDialog', 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			Insert into secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'PROMOTIONFEES_MAKER'), (Select RightID from SecRights where RightName = 'PromotionFeesDialog_AlwModifyFee'), 1, 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			
			Delete from SecGroupRights where RightID In (Select RightID from SecRights where RightName = 'PromotionFeesDialog_AlwModifyFeeSchdMthd');
			Delete from SecRights where RightName = 'PromotionFeesDialog_AlwModifyFeeSchdMthd';
			Insert into SecRights Values((Select max(RightID) + 1 from SecRights), 3, 'PromotionFeesDialog_AlwModifyFeeSchdMthd', 'PromotionFeesDialog', 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			Insert into secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'PROMOTIONFEES_MAKER'), (Select RightID from SecRights where RightName = 'PromotionFeesDialog_AlwModifyFeeSchdMthd'), 1, 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			
			Delete from SecGroupRights where RightID In (Select RightID from SecRights where RightName = 'PromotionFeesDialog_Active');
			Delete from SecRights where RightName = 'PromotionFeesDialog_Active';
			Insert into SecRights Values((Select max(RightID) + 1 from SecRights), 3, 'PromotionFeesDialog_Active', 'PromotionFeesDialog', 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			Insert into secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'PROMOTIONFEES_MAKER'), (Select RightID from SecRights where RightName = 'PromotionFeesDialog_Active'), 1, 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			
			Delete from SecGroupRights where GrpID In (Select GrpID from SecGroups where GrpCode = 'PROMOTIONFEES_APPROVER');
			Delete from SecRoleGroups where GrpID IN (Select GrpId from SecGroups WHERE GrpCode = 'PROMOTIONFEES_APPROVER') And RoleID IN (Select RoleID from SecRoles WHERE RoleCd = 'MSTGRP1_APPROVER');
			Delete from SecGroups where GrpCode = 'PROMOTIONFEES_APPROVER';
			INSERT INTO SecGroups Values ((Select MAX(GrpID)+1 From SecGroups), 'PROMOTIONFEES_APPROVER','WF Approver for Promotion Fees', 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL,0);
			
			Insert into secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'PROMOTIONFEES_APPROVER'), (Select RightID from SecRights where RightName = 'button_PromotionFeesDialog_btnSave'), 1, 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			INSERT INTO SecRoleGroups values ((SELECT MAX(RoleGrpID) + 1 from SecRoleGroups), (Select MAX(GrpId) from SecGroups WHERE GrpCode = 'PROMOTIONFEES_APPROVER'), (Select MAX(RoleID) from SecRoles WHERE RoleCd = 'MSTGRP1_APPROVER'), 0, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
			
			Update SeqSecGroups Set SeqNo = (Select MAX(GrpID) + 1 from SecGroups);
			Update SeqSecRights Set SeqNo = (Select MAX(RightID) + 1 from SecRights);
			Update SeqSecGroupRights Set SeqNo = (Select MAX(GrpRightID) + 1 from SecGroupRights);
			Update SeqSecRoleGroups Set SeqNo = (Select MAX(RoleGrpID) + 1 from SecRoleGroups);
		</sql>
	</changeSet>
	
</databaseChangeLog>
