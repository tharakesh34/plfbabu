<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

	<property name="add.schema" value="dbo." dbms="mssql" />
	<property name="add.schema" value="" dbms="oracle" />
	<property name="add.schema" value="" dbms="postgresql" />
	<property name="call.substr" value="substring" dbms="mssql" />
	<property name="call.substr" value="substr" dbms="oracle" />
	<property name="call.substr" value="substring" dbms="postgresql" />
	<property name="call.auditdb" value="PLFAVANSEQC.." dbms="mssql" />
	<property name="call.auditdb" value=" " dbms="oracle" />
	<property name="call.concatenate" value="+" dbms="mssql" />
	<property name="call.concatenate" value="||" dbms="oracle" />
	<property name="call.concatenate" value="||" dbms="postgresql" />
	<property name="call.collength" value="LEN" dbms="mssql" />
	<property name="call.collength" value="LENGTH" dbms="oracle" />
	<property name="call.collength" value="LENGTH" dbms="postgresql" />
	<property name="call.date" value="getdate()" dbms="mssql" />
	<property name="call.date" value="sysdate" dbms="oracle" />
	<property name="call.date" value="now()" dbms="postgresql" />

	<changeSet id="pre_run_for_pgp" author="Adarsh" runAlways="true" dbms="postgresql">
		<sql>
			Set search_path = plf,public,pg_catalog;
		</sql>
	</changeSet>

	<changeSet id="01" author="Irfan">
		<createTable tableName="FinTaxReceivable">
			<column name="FinReference" type="NVARCHAR(20)" />
			<column name="TaxFor" type="VARCHAR(8)" />
			<column name="ReceivableAmount" type="NUMBER(18,0)" />
			<column name="CGST" type="NUMBER(18,0)" />
			<column name="SGST" type="NUMBER(18,0)" />
			<column name="UGST" type="NUMBER(18,0)" />
			<column name="IGST" type="NUMBER(18,0)" />
		</createTable>
	</changeSet>

	<changeSet id="02" author="Irfan">
		<addPrimaryKey tableName="FinTaxReceivable" columnNames="FinReference, TaxFor" />
	</changeSet>

	<changeSet id="03" author="Irfan">
		<sql>
			<![CDATA[
				INSERT INTO BMTAMOUNTCODES (allowedevent,allowedria ,amountcode ,amountcodedesc ,amountcodeisactive ,version ,lastmntby ,lastmnton ,recordstatus ,rolecode ,nextrolecode ,taskid ,nexttaskid ,recordtype ,workflowid ) VALUES('LATEPAY', 0, 'ae_penaltyRcv', 'Penalty Receivable', 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', '', '', '', '', '', 0);
				INSERT INTO BMTAMOUNTCODES (allowedevent,allowedria ,amountcode ,amountcodedesc ,amountcodeisactive ,version ,lastmntby ,lastmnton ,recordstatus ,rolecode ,nextrolecode ,taskid ,nexttaskid ,recordtype ,workflowid ) VALUES('LATEPAY', 0, 'LPP_CGST_R', 	'Penalty charge CGST Receivable', 1, 1, 1000,CURRENT_TIMESTAMP,'Approved','','','','','',0);
				INSERT INTO BMTAMOUNTCODES (allowedevent,allowedria ,amountcode ,amountcodedesc ,amountcodeisactive ,version ,lastmntby ,lastmnton ,recordstatus ,rolecode ,nextrolecode ,taskid ,nexttaskid ,recordtype ,workflowid ) VALUES('LATEPAY', 0, 'LPP_SGST_R', 'Penalty charge SGST Receivable', 1, 1, 1000,CURRENT_TIMESTAMP,'Approved','','','','','',0);
				INSERT INTO BMTAMOUNTCODES (allowedevent,allowedria ,amountcode ,amountcodedesc ,amountcodeisactive ,version ,lastmntby ,lastmnton ,recordstatus ,rolecode ,nextrolecode ,taskid ,nexttaskid ,recordtype ,workflowid ) VALUES('LATEPAY', 0, 'LPP_IGST_R', 'Penalty charge IGST Receivable', 1, 1, 1000,CURRENT_TIMESTAMP,'Approved','','','','','',0);
				INSERT INTO BMTAMOUNTCODES (allowedevent,allowedria ,amountcode ,amountcodedesc ,amountcodeisactive ,version ,lastmntby ,lastmnton ,recordstatus ,rolecode ,nextrolecode ,taskid ,nexttaskid ,recordtype ,workflowid ) VALUES('LATEPAY', 0, 'LPP_UGST_R', 'Penalty charge UGST Receivable', 1, 1, 1000,CURRENT_TIMESTAMP,'Approved','','','','','',0);
				INSERT INTO BMTAMOUNTCODES (allowedevent,allowedria ,amountcode ,amountcodedesc ,amountcodeisactive ,version ,lastmntby ,lastmnton ,recordstatus ,rolecode ,nextrolecode ,taskid ,nexttaskid ,recordtype ,workflowid ) VALUES('LATEPAY', 0, 'PB_ReceiptAmount','Receipt Amount',1,1,1000,CURRENT_TIMESTAMP,'Approved','','','','','',0);
				INSERT INTO BMTAMOUNTCODES (allowedevent,allowedria ,amountcode ,amountcodedesc ,amountcodeisactive ,version ,lastmntby ,lastmnton ,recordstatus ,rolecode ,nextrolecode ,taskid ,nexttaskid ,recordtype ,workflowid ) VALUES('LATEPAY', 0, 'EX_ReceiptAmount','Excess Receipt Amount',1,1,1000,CURRENT_TIMESTAMP,'Approved','','','','','',0);
				INSERT INTO BMTAMOUNTCODES (allowedevent,allowedria ,amountcode ,amountcodedesc ,amountcodeisactive ,version ,lastmntby ,lastmnton ,recordstatus ,rolecode ,nextrolecode ,taskid ,nexttaskid ,recordtype ,workflowid ) VALUES('LATEPAY', 0, 'EA_ReceiptAmount','Emi Advance Receipt Amount',1,1,1000,CURRENT_TIMESTAMP,'Approved','','','','','',0);
				INSERT INTO BMTAMOUNTCODES (allowedevent,allowedria ,amountcode ,amountcodedesc ,amountcodeisactive ,version ,lastmntby ,lastmnton ,recordstatus ,rolecode ,nextrolecode ,taskid ,nexttaskid ,recordtype ,workflowid ) VALUES('AMZ',	 0, 'ae_penaltyRcv','Penalty Receivable',1,1,1000,CURRENT_TIMESTAMP,'Approved','','','','','',0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="04" author="Irfan">
		<sql>
			<![CDATA[
				Insert into SMTPARAMETERS (sysparmcode,sysparmdesc,sysparmtype,sysparmmaint,sysparmvalue,sysparmlength,sysparmdec,sysparmlist,sysparmvaldmod,sysparmdescription,version,lastmntby,lastmnton,recordstatus,rolecode,nextrolecode,taskid,nexttaskid,recordtype,workflowid ) values ('GST_INV_ON_DUE','GST Invoice on Due.','String',1,'Y',8,0,null,null,'GST Invoice on Due.',1,1000,CURRENT_TIMESTAMP,'Approved',null,null,null,null,null,0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="05" author="Irfan">
		<sql>
			<![CDATA[
				UPDATE BMTAMOUNTCODES SET AMOUNTCODE='LPP_CGST_R' WHERE AMOUNTCODE='LPP_CGST_P' AND ALLOWEDEVENT = 'AMZ';
				UPDATE BMTAMOUNTCODES SET AMOUNTCODE='LPP_SGST_R' WHERE AMOUNTCODE='LPP_SGST_P' AND ALLOWEDEVENT = 'AMZ';
				UPDATE BMTAMOUNTCODES SET AMOUNTCODE='LPP_UGST_R' WHERE AMOUNTCODE='LPP_UGST_P' AND ALLOWEDEVENT = 'AMZ';
				UPDATE BMTAMOUNTCODES SET AMOUNTCODE='LPP_IGST_R' WHERE AMOUNTCODE='LPP_IGST_P' AND ALLOWEDEVENT = 'AMZ';
	
				UPDATE RMTTRANSACTIONENTRY SET AMOUNTRULE = REPLACE(AMOUNTRULE, 'LPP_CGST_P', 'LPP_CGST_R') where AccountSETID IN(SELECT ACCOUNTSETID FROM RMTACCOUNTINGSET WHERE EVENTCODE = 'AMZ');
				UPDATE RMTTRANSACTIONENTRY SET AMOUNTRULE = REPLACE(AMOUNTRULE, 'LPP_SGST_P', 'LPP_SGST_R') where AccountSETID IN(SELECT ACCOUNTSETID FROM RMTACCOUNTINGSET WHERE EVENTCODE = 'AMZ');
				UPDATE RMTTRANSACTIONENTRY SET AMOUNTRULE = REPLACE(AMOUNTRULE, 'LPP_UGST_P', 'LPP_UGST_R') where AccountSETID IN(SELECT ACCOUNTSETID FROM RMTACCOUNTINGSET WHERE EVENTCODE = 'AMZ');
				UPDATE RMTTRANSACTIONENTRY SET AMOUNTRULE = REPLACE(AMOUNTRULE, 'LPP_IGST_P', 'LPP_IGST_R') where AccountSETID IN(SELECT ACCOUNTSETID FROM RMTACCOUNTINGSET WHERE EVENTCODE = 'AMZ');
			]]>
		</sql>
	</changeSet>

	<changeSet id="06" author="Siva">
		<createTable tableName="FinTaxIncomeDetail">
			<column name="RepayID" type="bigint" />
			<column name="TaxFor" type="VARCHAR(8)" />
			<column name="ReceivedAmount" type="NUMBER(18,0)" />
			<column name="CGST" type="NUMBER(18,0)" />
			<column name="SGST" type="NUMBER(18,0)" />
			<column name="UGST" type="NUMBER(18,0)" />
			<column name="IGST" type="NUMBER(18,0)" />
		</createTable>
	</changeSet>

	<changeSet id="07" author="Irfan">
		<addPrimaryKey tableName="FinTaxIncomeDetail" columnNames="RepayID, TaxFor" />
	</changeSet>


	<changeSet id="08" author="Irfan">
		<addColumn tableName="FinODAmzTaxDetail">
			<column name="PostDate" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="09" author="Irfan">
		<sql>
			<![CDATA[
				UPDATE FinODAmzTaxDetail Set PostDate = ValueDate where PostDate is null;
			]]>
		</sql>
	</changeSet>

	<changeSet id="10" author="Saikiran.v">
		<addColumn tableName="RMTFinanceTypes">
			<column name="TDSAllowToModify" type="boolean" />
			<column name="TDSApplicableTo" type="varchar(50)" />
		</addColumn>
	</changeSet>

	<changeSet id="11" author="Saikiran.v">
		<addColumn tableName="RMTFinanceTypes_Temp">
			<column name="TDSAllowToModify" type="boolean" />
			<column name="TDSApplicableTo" type="varchar(50)" />
		</addColumn>
	</changeSet>

	<changeSet id="12" author="Irfan">
		<sql>
			<![CDATA[
				UPDATE RMTFinanceTypes Set TDSAllowToModify = 0;
				UPDATE RMTFinanceTypes_Temp Set TDSAllowToModify = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="13" author="Saikiran.v" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE RMTFINANCETYPES ADD CONSTRAINT DF_RMTFINANCETYPES_TDSALLOWTOMODIFY DEFAULT 0 FOR TDSALLOWTOMODIFY;
				ALTER TABLE RMTFINANCETYPES_TEMP ADD CONSTRAINT DF_RMTFINANCETYPES_TEMP_TDSALLOWTOMODIFY DEFAULT 0 FOR TDSALLOWTOMODIFY;
			]]>
		</sql>
	</changeSet>

	<changeSet id="14" author="Saikiran.v" dbms="postgresql, oracle">
		<addDefaultValue columnName="TDSAllowToModify" tableName="RMTFinanceTypes" defaultValue="0" />
		<addDefaultValue columnName="TDSAllowToModify" tableName="RMTFinanceTypes_Temp" defaultValue="0" />
	</changeSet>

	<changeSet id="15" author="Saikiran.v">
		<addNotNullConstraint tableName="RMTFinanceTypes" columnName="TDSAllowToModify" />
		<addNotNullConstraint tableName="RMTFinanceTypes_Temp" columnName="TDSAllowToModify" />
	</changeSet>

	<changeSet id="16" author="Saikiran.v">
		<createView viewName="rmtfinancetypes_aview" replaceIfExists="true">
			SELECT t1.fintype,
			t1.fincategory,
			t1.fintypedesc,
			t1.finccy,
			t1.findayscaltype,
			t1.finactype,
			t1.fincontingentactype,
			t1.finisgenref,
			t1.finmaxamount,
			t1.finminamount,
			t1.finisopennewfinac,
			t1.findftstmtfrq,
			t1.finisalwmd,
			t1.finschdmthd,
			t1.finisalwgrace,
			t1.finhistretension,
			t1.equalrepayment,
			t1.finratetype,
			t1.finbaserate,
			t1.finsplrate,
			t1.finintrate,
			t1.finminrate,
			t1.finmaxrate,
			t1.findftintfrq,
			t1.finisintcpz,
			t1.fincpzfrq,
			t1.finisrvwalw,
			t1.finrvwfrq,
			t1.fingrcratetype,
			t1.fingrcbaserate,
			t1.fingrcsplrate,
			t1.fingrcintrate,
			t1.fingrcminrate,
			t1.fingrcmaxrate,
			t1.fingrcdftintfrq,
			t1.fingrcisintcpz,
			t1.fingrccpzfrq,
			t1.fingrcisrvwalw,
			t1.fingrcrvwfrq,
			t1.finminterm,
			t1.finmaxterm,
			t1.findftterms,
			t1.finrpyfrq,
			t1.finrepaymethod,
			t1.finisalwpartialrpy,
			t1.finisalwdifferment,
			t1.finmaxdifferment,
			t1.finisalwearlyrpy,
			t1.finisalwearlysettle,
			t1.finodrpytries,
			t1.finearlypayrule,
			t1.finearlysettlerule,
			t1.findepositrestrictedto,
			t1.finaebuyorinception,
			t1.finaesellormaturity,
			t1.finisactive,
			t1.version,
			t1.lastmntby,
			t1.lastmnton,
			t1.recordstatus,
			t1.rolecode,
			t1.nextrolecode,
			t1.taskid,
			t1.nexttaskid,
			t1.recordtype,
			t1.workflowid,
			t1.stepfinance,
			t1.steppingmandatory,
			t1.alwmanualsteps,
			t1.alwdsteppolicies,
			t1.dftsteppolicy,
			t4.actypedesc lovdescfincontingentactypename,
			t5.actypedesc lovdescfinactypename,
			t1.finisdwpayrequired,
			t1.finrvwrateapplfor,
			t1.finalwratechangeanydate,
			t1.finisintcpzatgrcend,
			t1.finelgrulecode,
			t1.limitelgrulecode,
			t1.finschcalcodeonrvw,
			t1.alwplandeferment,
			t1.plandefercount,
			t1.finassettype,
			t1.pftpayactype,
			t1.finisopenpftpayacc,
			t31.actypedesc lovdescpftpayactypename,
			t1.finisalwgrcrepay,
			t1.fingrcschdmthd,
			t1.fingrcmargin,
			t1.finmargin,
			t1.finscheduleon,
			t1.fingrcscheduleon,
			t1.fincommitmentreq,
			t1.fincollateralreq,
			t1.findepreciationreq,
			t1.findepreciationfrq,
			t1.finbankcontingentactype,
			t1.finprovisionactype,
			t38.actypedesc lovdescfinbankcontactypename,
			t39.actypedesc lovdescfinprovisionactypename,
			t1.allowriainvestment,
			t1.overridelimit,
			t1.limitrequired,
			t1.fincommitmentovrride,
			t1.fincollateralovrride,
			t1.finpftunchanged,
			t1.applyodpenalty,
			t1.odincgrcdays,
			t1.odchargetype,
			t1.odgracedays,
			t1.odchargecalon,
			t1.odchargeamtorperc,
			t1.odallowwaiver,
			t1.odmaxwaiverperc,
			t1.findivision,
			t48.divisioncodedesc lovdescfindivisionname,
			t48.entitycode lovdescentitycode,
			t1.finsuspactype,
			t49.actypedesc lovdescfinsuspactypename,
			t1.product,
			t1.startdate,
			t1.enddate,
			t1.allowdownpaypgm,
			t1.remarks,
			t1.alwearlypaymethods,
			t1.pastduepftcalmthd,
			t1.pastduepftmargin,
			t1.alwadvancerent,
			t1.grcadvbaserate,
			t1.grcadvmargin,
			t1.grcadvpftrate,
			t1.rpyadvbaserate,
			t1.rpyadvmargin,
			t1.rpyadvpftrate,
			t1.rolloverfinance,
			t1.rolloverfrq,
			t1.downpayrule,
			t59.rulecode downpayrulecode,
			t59.rulecodedesc downpayruledesc,
			t1.finsusptrigger,
			t1.finsuspremarks,
			t1.alwmultipartydisb,
			t1.collateraltype,
			t1.TDSapplicable,
			t1.manualschedule,
			t1.applygrcpricing,
			t1.grcpricingmethod,
			t1.applyrpypricing,
			t1.rpypricingmethod,
			t1.rpyhierarchy,
			t67.rulecode grcpricingmethoddesc,
			t68.rulecode rpypricingmethoddesc,
			t1.droplineod,
			t1.droppingmethod,
			t1.ratechganyday,
			t1.finrepaypftonfrq,
			t1.alwbpi,
			t1.bpitreatment,
			t1.pftdueschon,
			t1.planemihalw,
			t1.planemihmethod,
			t1.planemihmaxperyear,
			t1.planemihmax,
			t1.planemihlockperiod,
			t1.planemicpz,
			t1.unplanemihlockperiod,
			t1.unplanemicpz,
			t1.reagecpz,
			t1.fddlockperiod,
			t1.alwdrpymethods,
			t1.maxunplannedemi,
			t1.maxreageholidays,
			t1.roundingmode,
			t1.roundingtarget,
			t1.frequencydays,
			t1.quickdisb,
			t1.alwreage,
			t1.alwunplanemiholiday,
			t1.alwmaxdisbcheckreq,
			t1.fintypedesc lovdescpromofintypedesc,
			t1.profitcenterid,
			t69.profitcentercode,
			t69.profitcenterdesc,
			t1.productcategory,
			t2.productdesc fincategorydesc,
			t1.developerfinance,
			t1.costoffunds,
			t1.chequecapturereq,
			t1.finltvcheck,
			t1.partiallysecured,
			t1.alwadvemi,
			t1.advemiminterms,
			t1.advemimaxterms,
			t1.advemidftterms,
			t1.advemischdmthd,
			t1.bpipftdaysbasis,
			t1.eligibilitymethods,
			t1.alwhybridrate,
			t1.fixedratetenor,
			t1.odmincapamount,
			t1.odrulecode,
			t1.alwzerointacc,
			t1.autorejectiondays,
			t1.taxnomand,
			t1.putcallrequired,
			t1.grcadvintersetreq,
			t1.grcadvtype,
			t1.grcadvminterms,
			t1.grcadvmaxterms,
			t1.grcadvdefaultterms,
			t1.advintersetreq,
			t1.advtype,
			t1.advminterms,
			t1.advmaxterms,
			t1.advdefaultterms,
			t1.advstage,
			t1.dsfreq,
			t1.cashcollateralreq,
			t1.TDSAllowToModify,
			t1.TDSApplicableTo
			FROM rmtfinancetypes t1
			LEFT JOIN bmtproduct t2 ON t1.fincategory = t2.productcode
			LEFT JOIN rmtaccounttypes t4 ON t1.fincontingentactype = t4.actype
			LEFT JOIN rmtaccounttypes t38 ON t1.finbankcontingentactype = t38.actype
			LEFT JOIN rmtaccounttypes t39 ON t1.finprovisionactype = t39.actype
			LEFT JOIN rmtaccounttypes t5 ON t1.finactype = t5.actype
			LEFT JOIN rmtaccounttypes t31 ON t1.pftpayactype = t31.actype
			LEFT JOIN smtdivisiondetail t48 ON t1.findivision = t48.divisioncode
			LEFT JOIN rmtaccounttypes t49 ON t1.finsuspactype = t49.actype
			LEFT JOIN rules t59 ON t1.downpayrule = t59.ruleid
			LEFT JOIN rules t67 ON t1.grcpricingmethod = t67.ruleid
			LEFT JOIN rules t68 ON t1.rpypricingmethod = t68.ruleid
			LEFT JOIN profitcenters t69 ON t69.profitcenterid = t1.profitcenterid
		</createView>
	</changeSet>

	<changeSet id="17" author="Saikiran.v">
		<createView viewName="rmtfinancetypes_view" replaceIfExists="true">
			SELECT t1.fintype,
			t1.fincategory,
			t1.fintypedesc,
			t1.finccy,
			t1.findayscaltype,
			t1.finactype,
			t1.fincontingentactype,
			t1.finisgenref,
			t1.finmaxamount,
			t1.finminamount,
			t1.finisopennewfinac,
			t1.findftstmtfrq,
			t1.finisalwmd,
			t1.finschdmthd,
			t1.finisalwgrace,
			t1.finhistretension,
			t1.equalrepayment,
			t1.finratetype,
			t1.finbaserate,
			t1.finsplrate,
			t1.finintrate,
			t1.finminrate,
			t1.finmaxrate,
			t1.findftintfrq,
			t1.finisintcpz,
			t1.fincpzfrq,
			t1.finisrvwalw,
			t1.finrvwfrq,
			t1.fingrcratetype,
			t1.fingrcbaserate,
			t1.fingrcsplrate,
			t1.fingrcintrate,
			t1.fingrcminrate,
			t1.fingrcmaxrate,
			t1.fingrcdftintfrq,
			t1.fingrcisintcpz,
			t1.fingrccpzfrq,
			t1.fingrcisrvwalw,
			t1.fingrcrvwfrq,
			t1.finminterm,
			t1.finmaxterm,
			t1.findftterms,
			t1.finrpyfrq,
			t1.finrepaymethod,
			t1.finisalwpartialrpy,
			t1.finisalwdifferment,
			t1.finmaxdifferment,
			t1.finisalwearlyrpy,
			t1.finisalwearlysettle,
			t1.finodrpytries,
			t1.finearlypayrule,
			t1.finearlysettlerule,
			t1.findepositrestrictedto,
			t1.finaebuyorinception,
			t1.finaesellormaturity,
			t1.finisactive,
			t1.version,
			t1.lastmntby,
			t1.lastmnton,
			t1.recordstatus,
			t1.rolecode,
			t1.nextrolecode,
			t1.taskid,
			t1.nexttaskid,
			t1.recordtype,
			t1.workflowid,
			t1.stepfinance,
			t1.steppingmandatory,
			t1.alwmanualsteps,
			t1.alwdsteppolicies,
			t1.dftsteppolicy,
			t4.actypedesc lovdescfincontingentactypename,
			t5.actypedesc lovdescfinactypename,
			t1.finisdwpayrequired,
			t1.finrvwrateapplfor,
			t1.finalwratechangeanydate,
			t1.finisintcpzatgrcend,
			t1.finelgrulecode,
			t1.limitelgrulecode,
			t1.finschcalcodeonrvw,
			t1.alwplandeferment,
			t1.plandefercount,
			t1.finassettype,
			t1.pftpayactype,
			t1.finisopenpftpayacc,
			t31.actypedesc lovdescpftpayactypename,
			t1.finisalwgrcrepay,
			t1.fingrcschdmthd,
			t1.fingrcmargin,
			t1.finmargin,
			t1.finscheduleon,
			t1.fingrcscheduleon,
			t1.fincommitmentreq,
			t1.fincollateralreq,
			t1.findepreciationreq,
			t1.findepreciationfrq,
			t1.finbankcontingentactype,
			t1.finprovisionactype,
			t38.actypedesc lovdescfinbankcontactypename,
			t39.actypedesc lovdescfinprovisionactypename,
			t1.allowriainvestment,
			t1.overridelimit,
			t1.limitrequired,
			t1.fincommitmentovrride,
			t1.fincollateralovrride,
			t1.finpftunchanged,
			t1.applyodpenalty,
			t1.odincgrcdays,
			t1.odchargetype,
			t1.odgracedays,
			t1.odchargecalon,
			t1.odchargeamtorperc,
			t1.odallowwaiver,
			t1.odmaxwaiverperc,
			t1.findivision,
			t48.divisioncodedesc lovdescfindivisionname,
			t48.entitycode lovdescentitycode,
			t1.finsuspactype,
			t49.actypedesc lovdescfinsuspactypename,
			t1.product,
			t1.startdate,
			t1.enddate,
			t1.allowdownpaypgm,
			t1.fintypedesc lovdescpromofintypedesc,
			t1.remarks,
			t1.alwearlypaymethods,
			t1.pastduepftcalmthd,
			t1.pastduepftmargin,
			t1.alwadvancerent,
			t1.grcadvbaserate,
			t1.grcadvmargin,
			t1.grcadvpftrate,
			t1.rpyadvbaserate,
			t1.rpyadvmargin,
			t1.rpyadvpftrate,
			t1.rolloverfinance,
			t1.rolloverfrq,
			t1.downpayrule,
			t59.rulecode downpayrulecode,
			t59.rulecodedesc downpayruledesc,
			t1.finsusptrigger,
			t1.finsuspremarks,
			t1.alwmultipartydisb,
			t1.collateraltype,
			t1.TDSapplicable,
			t1.manualschedule,
			t1.applygrcpricing,
			t1.grcpricingmethod,
			t1.applyrpypricing,
			t1.rpypricingmethod,
			t1.rpyhierarchy,
			t67.rulecode grcpricingmethoddesc,
			t68.rulecode rpypricingmethoddesc,
			t1.droplineod,
			t1.droppingmethod,
			t1.ratechganyday,
			t1.finrepaypftonfrq,
			t1.alwbpi,
			t1.bpitreatment,
			t1.pftdueschon,
			t1.planemihalw,
			t1.planemihmethod,
			t1.planemihmaxperyear,
			t1.planemihmax,
			t1.planemihlockperiod,
			t1.planemicpz,
			t1.unplanemihlockperiod,
			t1.unplanemicpz,
			t1.reagecpz,
			t1.fddlockperiod,
			t1.alwdrpymethods,
			t1.maxunplannedemi,
			t1.maxreageholidays,
			t1.roundingmode,
			t1.roundingtarget,
			t1.frequencydays,
			t1.quickdisb,
			t1.alwmaxdisbcheckreq,
			t1.alwreage,
			t1.alwunplanemiholiday,
			t1.profitcenterid,
			t69.profitcentercode,
			t69.profitcenterdesc,
			t1.productcategory,
			t2.productdesc fincategorydesc,
			t1.developerfinance,
			t1.costoffunds,
			t1.chequecapturereq,
			t1.finltvcheck,
			t1.partiallysecured,
			t1.alwadvemi,
			t1.advemiminterms,
			t1.advemimaxterms,
			t1.advemidftterms,
			t1.advemischdmthd,
			t1.bpipftdaysbasis,
			t1.eligibilitymethods,
			t1.alwhybridrate,
			t1.fixedratetenor,
			t1.odmincapamount,
			t1.odrulecode,
			t1.alwzerointacc,
			t1.autorejectiondays,
			t1.taxnomand,
			t1.putcallrequired,
			t1.grcadvintersetreq,
			t1.grcadvtype,
			t1.grcadvminterms,
			t1.grcadvmaxterms,
			t1.grcadvdefaultterms,
			t1.advintersetreq,
			t1.advtype,
			t1.advminterms,
			t1.advmaxterms,
			t1.advdefaultterms,
			t1.advstage,
			t1.dsfreq,
			t1.cashcollateralreq,
			t1.TDSAllowToModify,
			t1.TDSApplicableTo
			FROM rmtfinancetypes_temp t1
			LEFT JOIN bmtproduct t2 ON t1.fincategory = t2.productcode
			LEFT JOIN rmtaccounttypes t4 ON t1.fincontingentactype = t4.actype
			LEFT JOIN rmtaccounttypes t38 ON t1.finbankcontingentactype = t38.actype
			LEFT JOIN rmtaccounttypes t39 ON t1.finprovisionactype = t39.actype
			LEFT JOIN rmtaccounttypes t5 ON t1.finactype = t5.actype
			LEFT JOIN rmtaccounttypes t31 ON t1.pftpayactype = t31.actype
			LEFT JOIN smtdivisiondetail t48 ON t1.findivision = t48.divisioncode
			LEFT JOIN rmtaccounttypes t49 ON t1.finsuspactype = t49.actype
			LEFT JOIN rules t59 ON t1.downpayrule = t59.ruleid
			LEFT JOIN rules t67 ON t1.grcpricingmethod = t67.ruleid
			LEFT JOIN rules t68 ON t1.rpypricingmethod = t68.ruleid
			LEFT JOIN profitcenters t69 ON t69.profitcenterid = t1.profitcenterid
			UNION ALL
			SELECT t1.fintype,
			t1.fincategory,
			t1.fintypedesc,
			t1.finccy,
			t1.findayscaltype,
			t1.finactype,
			t1.fincontingentactype,
			t1.finisgenref,
			t1.finmaxamount,
			t1.finminamount,
			t1.finisopennewfinac,
			t1.findftstmtfrq,
			t1.finisalwmd,
			t1.finschdmthd,
			t1.finisalwgrace,
			t1.finhistretension,
			t1.equalrepayment,
			t1.finratetype,
			t1.finbaserate,
			t1.finsplrate,
			t1.finintrate,
			t1.finminrate,
			t1.finmaxrate,
			t1.findftintfrq,
			t1.finisintcpz,
			t1.fincpzfrq,
			t1.finisrvwalw,
			t1.finrvwfrq,
			t1.fingrcratetype,
			t1.fingrcbaserate,
			t1.fingrcsplrate,
			t1.fingrcintrate,
			t1.fingrcminrate,
			t1.fingrcmaxrate,
			t1.fingrcdftintfrq,
			t1.fingrcisintcpz,
			t1.fingrccpzfrq,
			t1.fingrcisrvwalw,
			t1.fingrcrvwfrq,
			t1.finminterm,
			t1.finmaxterm,
			t1.findftterms,
			t1.finrpyfrq,
			t1.finrepaymethod,
			t1.finisalwpartialrpy,
			t1.finisalwdifferment,
			t1.finmaxdifferment,
			t1.finisalwearlyrpy,
			t1.finisalwearlysettle,
			t1.finodrpytries,
			t1.finearlypayrule,
			t1.finearlysettlerule,
			t1.findepositrestrictedto,
			t1.finaebuyorinception,
			t1.finaesellormaturity,
			t1.finisactive,
			t1.version,
			t1.lastmntby,
			t1.lastmnton,
			t1.recordstatus,
			t1.rolecode,
			t1.nextrolecode,
			t1.taskid,
			t1.nexttaskid,
			t1.recordtype,
			t1.workflowid,
			t1.stepfinance,
			t1.steppingmandatory,
			t1.alwmanualsteps,
			t1.alwdsteppolicies,
			t1.dftsteppolicy,
			t4.actypedesc lovdescfincontingentactypename,
			t5.actypedesc lovdescfinactypename,
			t1.finisdwpayrequired,
			t1.finrvwrateapplfor,
			t1.finalwratechangeanydate,
			t1.finisintcpzatgrcend,
			t1.finelgrulecode,
			t1.limitelgrulecode,
			t1.finschcalcodeonrvw,
			t1.alwplandeferment,
			t1.plandefercount,
			t1.finassettype,
			t1.pftpayactype,
			t1.finisopenpftpayacc,
			t31.actypedesc lovdescpftpayactypename,
			t1.finisalwgrcrepay,
			t1.fingrcschdmthd,
			t1.fingrcmargin,
			t1.finmargin,
			t1.finscheduleon,
			t1.fingrcscheduleon,
			t1.fincommitmentreq,
			t1.fincollateralreq,
			t1.findepreciationreq,
			t1.findepreciationfrq,
			t1.finbankcontingentactype,
			t1.finprovisionactype,
			t38.actypedesc lovdescfinbankcontactypename,
			t39.actypedesc lovdescfinprovisionactypename,
			t1.allowriainvestment,
			t1.overridelimit,
			t1.limitrequired,
			t1.fincommitmentovrride,
			t1.fincollateralovrride,
			t1.finpftunchanged,
			t1.applyodpenalty,
			t1.odincgrcdays,
			t1.odchargetype,
			t1.odgracedays,
			t1.odchargecalon,
			t1.odchargeamtorperc,
			t1.odallowwaiver,
			t1.odmaxwaiverperc,
			t1.findivision,
			t48.divisioncodedesc lovdescfindivisionname,
			t48.entitycode lovdescentitycode,
			t1.finsuspactype,
			t49.actypedesc lovdescfinsuspactypename,
			t1.product,
			t1.startdate,
			t1.enddate,
			t1.allowdownpaypgm,
			t1.fintypedesc lovdescpromofintypedesc,
			t1.remarks,
			t1.alwearlypaymethods,
			t1.pastduepftcalmthd,
			t1.pastduepftmargin,
			t1.alwadvancerent,
			t1.grcadvbaserate,
			t1.grcadvmargin,
			t1.grcadvpftrate,
			t1.rpyadvbaserate,
			t1.rpyadvmargin,
			t1.rpyadvpftrate,
			t1.rolloverfinance,
			t1.rolloverfrq,
			t1.downpayrule,
			t59.rulecode downpayrulecode,
			t59.rulecodedesc downpayruledesc,
			t1.finsusptrigger,
			t1.finsuspremarks,
			t1.alwmultipartydisb,
			t1.collateraltype,
			t1.TDSapplicable,
			t1.manualschedule,
			t1.applygrcpricing,
			t1.grcpricingmethod,
			t1.applyrpypricing,
			t1.rpypricingmethod,
			t1.rpyhierarchy,
			t67.rulecode grcpricingmethoddesc,
			t68.rulecode rpypricingmethoddesc,
			t1.droplineod,
			t1.droppingmethod,
			t1.ratechganyday,
			t1.finrepaypftonfrq,
			t1.alwbpi,
			t1.bpitreatment,
			t1.pftdueschon,
			t1.planemihalw,
			t1.planemihmethod,
			t1.planemihmaxperyear,
			t1.planemihmax,
			t1.planemihlockperiod,
			t1.planemicpz,
			t1.unplanemihlockperiod,
			t1.unplanemicpz,
			t1.reagecpz,
			t1.fddlockperiod,
			t1.alwdrpymethods,
			t1.maxunplannedemi,
			t1.maxreageholidays,
			t1.roundingmode,
			t1.roundingtarget,
			t1.frequencydays,
			t1.quickdisb,
			t1.alwmaxdisbcheckreq,
			t1.alwreage,
			t1.alwunplanemiholiday,
			t1.profitcenterid,
			t69.profitcentercode,
			t69.profitcenterdesc,
			t1.productcategory,
			t2.productdesc fincategorydesc,
			t1.developerfinance,
			t1.costoffunds,
			t1.chequecapturereq,
			t1.finltvcheck,
			t1.partiallysecured,
			t1.alwadvemi,
			t1.advemiminterms,
			t1.advemimaxterms,
			t1.advemidftterms,
			t1.advemischdmthd,
			t1.bpipftdaysbasis,
			t1.eligibilitymethods,
			t1.alwhybridrate,
			t1.fixedratetenor,
			t1.odmincapamount,
			t1.odrulecode,
			t1.alwzerointacc,
			t1.autorejectiondays,
			t1.taxnomand,
			t1.putcallrequired,
			t1.grcadvintersetreq,
			t1.grcadvtype,
			t1.grcadvminterms,
			t1.grcadvmaxterms,
			t1.grcadvdefaultterms,
			t1.advintersetreq,
			t1.advtype,
			t1.advminterms,
			t1.advmaxterms,
			t1.advdefaultterms,
			t1.advstage,
			t1.dsfreq,
			t1.cashcollateralreq,
			t1.TDSAllowToModify,
			t1.TDSApplicableTo
			FROM rmtfinancetypes t1
			LEFT JOIN bmtproduct t2 ON t1.fincategory = t2.productcode
			LEFT JOIN rmtaccounttypes t4 ON t1.fincontingentactype = t4.actype
			LEFT JOIN rmtaccounttypes t38 ON t1.finbankcontingentactype = t38.actype
			LEFT JOIN rmtaccounttypes t39 ON t1.finprovisionactype = t39.actype
			LEFT JOIN rmtaccounttypes t5 ON t1.finactype = t5.actype
			LEFT JOIN rmtaccounttypes t31 ON t1.pftpayactype = t31.actype
			LEFT JOIN smtdivisiondetail t48 ON t1.findivision = t48.divisioncode
			LEFT JOIN rmtaccounttypes t49 ON t1.finsuspactype = t49.actype
			LEFT JOIN rules t59 ON t1.downpayrule = t59.ruleid
			LEFT JOIN rules t67 ON t1.grcpricingmethod = t67.ruleid
			LEFT JOIN rules t68 ON t1.rpypricingmethod = t68.ruleid
			LEFT JOIN profitcenters t69 ON t69.profitcenterid = t1.profitcenterid
			WHERE NOT (EXISTS ( SELECT 1 expr1
			FROM rmtfinancetypes_temp
			WHERE rmtfinancetypes_temp.fintype = t1.fintype))
		</createView>
	</changeSet>

	<changeSet id="18" author="Saikiran.v">
		<createView viewName="rmtfinancetypes_orgview" replaceIfExists="true">
			SELECT t1.fintype,
			t1.fincategory,
			t1.fintypedesc,
			t1.finccy,
			t1.findayscaltype,
			t1.finactype,
			t1.fincontingentactype,
			t1.finisgenref,
			t1.finmaxamount,
			t1.finminamount,
			t1.finisopennewfinac,
			t1.finisalwmd,
			t1.finschdmthd,
			t1.finisalwgrace,
			t1.equalrepayment,
			t1.finratetype,
			t1.finbaserate,
			t1.finsplrate,
			t1.finintrate,
			t1.finminrate,
			t1.finmaxrate,
			t1.findftintfrq,
			t1.finisintcpz,
			t1.fincpzfrq,
			t1.finisrvwalw,
			t1.finrvwfrq,
			t1.fingrcratetype,
			t1.fingrcbaserate,
			t1.fingrcsplrate,
			t1.fingrcintrate,
			t1.fingrcminrate,
			t1.fingrcmaxrate,
			t1.fingrcdftintfrq,
			t1.fingrcisintcpz,
			t1.fingrccpzfrq,
			t1.fingrcisrvwalw,
			t1.fingrcrvwfrq,
			t1.finminterm,
			t1.finmaxterm,
			t1.findftterms,
			t1.finrpyfrq,
			t1.finrepaymethod,
			t1.finisalwdifferment,
			t1.finmaxdifferment,
			t1.finisactive,
			t1.stepfinance,
			t1.steppingmandatory,
			t1.alwmanualsteps,
			t1.alwdsteppolicies,
			t1.dftsteppolicy,
			t1.finisdwpayrequired,
			t1.finrvwrateapplfor,
			t1.finalwratechangeanydate,
			t1.finisintcpzatgrcend,
			t1.finschcalcodeonrvw,
			t1.alwplandeferment,
			t1.plandefercount,
			t1.pftpayactype,
			t1.finisopenpftpayacc,
			t1.finisalwgrcrepay,
			t1.fingrcschdmthd,
			t1.fingrcmargin,
			t1.finmargin,
			t1.fincommitmentreq,
			t1.fincollateralreq,
			t1.findepreciationreq,
			t1.findepreciationfrq,
			t1.finbankcontingentactype,
			t1.finprovisionactype,
			t1.allowriainvestment,
			t1.overridelimit,
			t1.limitrequired,
			t1.fincommitmentovrride,
			t1.fincollateralovrride,
			t1.finrepaypftonfrq,
			t1.finpftunchanged,
			t1.applyodpenalty,
			t1.odincgrcdays,
			t1.odchargetype,
			t1.odgracedays,
			t1.odchargecalon,
			t1.odchargeamtorperc,
			t1.odallowwaiver,
			t1.odmaxwaiverperc,
			t1.findivision,
			t3.divisioncodedesc lovdescfindivisionname,
			t1.finsuspactype,
			t1.product,
			t1.startdate,
			t1.enddate,
			t1.allowdownpaypgm,
			t1.fintypedesc lovdescpromofintypedesc,
			t1.remarks,
			t4.policydesc lovdescdftsteppolicyname,
			t1.pastduepftcalmthd,
			t1.pastduepftmargin,
			t1.alwadvancerent,
			t1.grcadvbaserate,
			t1.grcadvmargin,
			t1.grcadvpftrate,
			t1.rpyadvbaserate,
			t1.rpyadvmargin,
			t1.rpyadvpftrate,
			t1.rolloverfinance,
			t1.rolloverfrq,
			t1.downpayrule,
			t1.alwmultipartydisb,
			t1.collateraltype,
			t1.TDSapplicable,
			t5.rulecode downpayrulecode,
			t5.rulecodedesc downpayruledesc,
			t1.applygrcpricing,
			t1.applyrpypricing,
			t6.rulecode AS grcpricingmethoddesc,
			t7.rulecode AS rpypricingmethoddesc,
			t1.droplineod,
			t1.droppingmethod,
			t1.ratechganyday,
			t4.steptype AS dftsteppolicytype,
			t1.manualschedule,
			t1.alwbpi,
			t1.bpitreatment,
			t1.pftdueschon,
			t1.planemihalw,
			t1.planemihmethod,
			t1.planemihmaxperyear,
			t1.planemihmax,
			t1.planemihlockperiod,
			t1.planemicpz,
			t1.unplanemihlockperiod,
			t1.unplanemicpz,
			t1.reagecpz,
			t1.fddlockperiod,
			t1.alwdrpymethods,
			t1.maxunplannedemi,
			t1.maxreageholidays,
			t1.roundingmode,
			t1.roundingtarget,
			t1.frequencydays,
			t1.quickdisb,
			t1.alwreage,
			t1.alwunplanemiholiday,
			t1.alwmaxdisbcheckreq,
			t1.productcategory,
			t1.rpyhierarchy,
			t1.developerfinance,
			t3.entitycode AS lovdescentitycode,
			t8.entitydesc AS lovdescentitydesc,
			t1.costoffunds,
			t1.chequecapturereq,
			t1.finltvcheck,
			t1.partiallysecured,
			t1.alwadvemi,
			t1.advemiminterms,
			t1.advemimaxterms,
			t1.advemidftterms,
			t1.advemischdmthd,
			t1.bpipftdaysbasis,
			t1.eligibilitymethods,
			t1.alwhybridrate,
			t1.fixedratetenor,
			t1.odmincapamount,
			t1.odrulecode,
			t1.alwzerointacc,
			t1.finisalwpartialrpy,
			t1.autorejectiondays,
			t1.taxnomand,
			t1.putcallrequired,
			t1.grcadvintersetreq,
			t1.grcadvtype,
			t1.grcadvminterms,
			t1.grcadvmaxterms,
			t1.grcadvdefaultterms,
			t1.advintersetreq,
			t1.advtype,
			t1.advminterms,
			t1.advmaxterms,
			t1.advdefaultterms,
			t1.advstage,
			t1.dsfreq,
			t1.cashcollateralreq,
			t1.alwearlypaymethods,
			t1.TDSAllowToModify,
			t1.TDSApplicableTo
			FROM rmtfinancetypes t1
			JOIN smtdivisiondetail t3 ON t1.findivision = t3.divisioncode
			LEFT JOIN steppolicyheader t4 ON t1.dftsteppolicy = t4.policycode
			LEFT JOIN rules t5 ON t1.downpayrule = t5.ruleid
			LEFT JOIN rules t6 ON t1.grcpricingmethod = t6.ruleid
			LEFT JOIN rules t7 ON t1.rpypricingmethod = t7.ruleid
			LEFT JOIN entity t8 ON t3.entitycode = t8.entitycode
		</createView>
	</changeSet>

	<changeSet id="19" author="Saikiran.v">
		<addColumn tableName="Financemain_temp">
			<column name="TDSPercentage" type="decimal(18,2)" />
			<column name="TDSStartDate" type="datetime" />
			<column name="TDSEndDate" type="datetime" />
			<column name="TDSLimitAmt" type="decimal(18,2)" />
		</addColumn>
	</changeSet>

	<changeSet id="20" author="Saikiran.v">
		<addColumn tableName="Financemain">
			<column name="TDSPercentage" type="decimal(18,2)" />
			<column name="TDSStartDate" type="datetime" />
			<column name="TDSEndDate" type="datetime" />
			<column name="TDSLimitAmt" type="decimal(18,2)" />
		</addColumn>
	</changeSet>

	<changeSet id="21" author="Saikiran.v">
		<createView viewName="financemain_tview" replaceIfExists="true">
			SELECT t1.finreference,
			t1.investmentref,
			t1.numberofterms,
			t1.grcperiodenddate,
			t1.allowgrcperiod,
			t1.gracebaserate,
			t1.gracespecialrate,
			t1.grcpftrate,
			t1.grcpftfrq,
			t1.nextgrcpftdate,
			t1.allowgrcpftrvw,
			t1.grcpftrvwfrq,
			t1.nextgrcpftrvwdate,
			t1.allowgrccpz,
			t1.grccpzfrq,
			t1.nextgrccpzdate,
			t1.repaybaserate,
			t1.repayspecialrate,
			t1.repayprofitrate,
			t1.repayfrq,
			t1.nextrepaydate,
			t1.repaypftfrq,
			t1.nextrepaypftdate,
			t1.allowrepayrvw,
			t1.repayrvwfrq,
			t1.nextrepayrvwdate,
			t1.allowrepaycpz,
			t1.repaycpzfrq,
			t1.nextrepaycpzdate,
			t1.maturitydate,
			t1.cpzatgraceend,
			t1.downpayment,
			t1.graceflatamount,
			t1.reqrepayamount,
			t1.totalprofit,
			t1.totalcpz,
			t1.totalgrosspft,
			t1.totalgrossgrcpft,
			t1.totalgracepft,
			t1.totalgracecpz,
			t1.grcratebasis,
			t1.repayratebasis,
			t1.fintype,
			t1.finremarks,
			t1.finccy,
			t1.schedulemethod,
			t1.profitdaysbasis,
			t1.reqmaturity,
			t1.calterms,
			t1.calmaturity,
			t1.firstrepay,
			t1.lastrepay,
			t1.finstartdate,
			t1.finamount,
			t1.finamount + t1.feechargeamt - t1.downpayment lovdescfinancingamount,
			t1.finrepaymentamount,
			t1.custid,
			t1.defferments,
			t1.plandefercount,
			t1.finbranch,
			t1.finsourceid,
			t1.alloweddefrpychange,
			t1.availeddefrpychange,
			t1.alloweddeffrqchange,
			t1.availeddeffrqchange,
			t1.recaltype,
			t1.finassetvalue,
			t1.disbaccountid,
			t1.repayaccountid,
			t1.finisactive,
			t1.limitvalid,
			t1.overridelimit,
			t1.securitydeposit,
			t1.version,
			t1.lastmntby,
			t1.lastmnton,
			t1.recordstatus,
			t1.rolecode,
			t1.nextrolecode,
			t1.taskid,
			t1.nexttaskid,
			t1.recordtype,
			t1.workflowid,
			t7.fintypedesc lovdescfintypename,
			t7.finmaxamount lovdescfinmaxamt,
			t7.finminamount lovdescfinminamount,
			t1.mindownpayperc,
			t7.finisalwdifferment lovdescfinalwdeferment,
			t7.finisdwpayrequired lovdescdwnpayreq,
			t7.finmaxdifferment lovdescfinmaxdifferment,
			t12.branchdesc lovdescfinbranchname,
			t12.branchprovince finbranchprovincecode,
			t1.lastrepaydate,
			t1.lastrepaypftdate,
			t1.lastrepayrvwdate,
			t1.lastrepaycpzdate,
			t1.allowgrcrepay,
			t1.grcschdmthd,
			t1.grcmargin,
			t1.repaymargin,
			t1.fincurrassetvalue,
			t1.fincommitmentref,
			t1.finlimitref,
			t1.depreciationfrq,
			t1.fincontractdate,
			t1.nextdepdate,
			t1.lastdepdate,
			t1.finaccount,
			t1.fincustpftaccount,
			t17.acrtilllbd lovdescaccruedtilllbd,
			t7.finrvwrateapplfor,
			t1.totalrepayamt,
			t1.closingstatus,
			t1.finapproveddate,
			t1.feechargeamt,
			t1.blacklisted,
			t1.finrepaypftonfrq,
			t1.anualizedpercrate,
			t1.effectiverateofreturn,
			t1.migratedfinance,
			t1.schedulemaintained,
			t1.scheduleregenerated,
			t1.finpurpose,
			t39.loanpurposedesc lovdescfinpurposename,
			t1.finstatus,
			t1.finstsreason,
			t1.initiateuser,
			t1.bankname,
			t1.iban,
			t1.accounttype,
			t1.ddareferenceno,
			t7.finscheduleon lovdescfinscheduleon,
			t1.cusTDSr,
			t1.jointaccount,
			t1.jointcustid,
			t1.downpaybank,
			t1.downpaysupl,
			t1.downpayaccount,
			t1.securitycollateral,
			t1.approved,
			t1.discrepancy,
			t1.limitapproved,
			t1.graceterms,
			t7.findivision lovdescfindivision,
			t1.rcdmaintainsts,
			t1.finrepaymethod,
			t1.grcprofitdaysbasis,
			t1.stepfinance,
			t1.steptype,
			t1.steppolicy,
			t1.alwmanualsteps,
			t1.noofsteps,
			t1.linkedfinref,
			t1.nextuserid,
			t1.priority,
			t24.policydesc lovdescsteppolicyname,
			t1.grcminrate,
			t1.grcmaxrate,
			t1.rpyminrate,
			t1.rpymaxrate,
			t1.deviationapproval,
			t1.manualschedule,
			t1.takeoverfinance,
			t1.grcadvbaserate,
			t1.grcadvmargin,
			t1.grcadvpftrate,
			t1.rpyadvbaserate,
			t1.rpyadvmargin,
			t1.rpyadvpftrate,
			t1.supplementrent,
			t1.increasedcost,
			t1.creditinsamt,
			t1.rolloverfrq,
			t1.nextrolloverdate,
			t27.custstsdescription,
			t1.shariastatus,
			t1.initiatedate,
			t1.finpreapprovedref,
			t1.mmaid,
			t1.accountsofficer,
			t1.feeaccountid,
			t1.fincancelac,
			t28.dealername lovdescaccountsofficer,
			t28.dealercity lovdescsourcecity,
			t1.dsacode,
			t30.rofficerdesc dsacodedesc,
			t1.TDSapplicable,
			t1.mandateid,
			t1.droplinefrq,
			t1.firstdroplinedate,
			t1.pftservicingodlimit,
			t1.insuranceamt,
			t1.deductinsdisb,
			t1.alwbpi,
			t1.bpitreatment,
			t1.planemihalw,
			t1.planemihmethod,
			t1.planemihmaxperyear,
			t1.planemihmax,
			t1.planemihlockperiod,
			t1.planemicpz,
			t1.calroundingmode,
			t1.alwmultidisb,
			t1.applicationno,
			t1.referralid,
			t33.rofficerdesc referraliddesc,
			t1.dmacode,
			t34.rofficerdesc dmacodedesc,
			t1.salesdepartment,
			t35.gendeptdesc salesdepartmentdesc,
			t1.quickdisb,
			t1.wifreference,
			t1.unplanemihlockperiod,
			t1.unplanemicpz,
			t1.reagecpz,
			t1.maxunplannedemi,
			t1.maxreageholidays,
			t1.availedunplanemi,
			t1.availedreageh,
			t1.bpiamount,
			t1.deductfeedisb,
			t1.rvwrateapplfor,
			t1.schcalonrvw,
			t1.pastduepftcalmthd,
			t1.pastduepftmargin,
			t1.droppingmethod,
			t1.ratechganyday,
			t1.promotioncode,
			t1.restructureloan,
			t1.oldfinreference,
			t1.reagebucket,
			t1.fincategory,
			t1.productcategory,
			t1.roundingtarget,
			t36.entitycode lovdescentitycode,
			t1.eligibilitymethod,
			t38.fieldcodevalue loveligibilitymethod,
			t38.valuedesc lovdesceligibilitymethod,
			t1.employeename,
			t37.rofficerdesc employeenamedesc,
			t1.samplingrequired,
			t1.legalrequired,
			t1.grcmaxamount,
			t1.connector,
			t40.dealername connectorcode,
			t40.dealercity connectordesc,
			t1.advanceemi,
			t1.advemiterms,
			t1.bpipftdaysbasis,
			t1.fixedratetenor,
			t1.fixedtenorrate,
			t12.branchtel finbranchcontact,
			t1.processattributes,
			t1.businessvertical,
			bv.code businessverticalcode,
			bv.description businessverticaldesc,
			t1.grcadvtype,
			t1.grcadvterms,
			t1.advtype,
			t1.advterms,
			t1.advstage,
			t1.TDSPercentage,
			t1.TDSStartDate,
			t1.TDSEndDate,
			t1.TDSLimitAmt
			FROM financemain_temp t1
			JOIN rmtfinancetypes t7 ON t1.fintype = t7.fintype
			LEFT JOIN rmtbranches t12 ON t1.finbranch = t12.branchcode
			LEFT JOIN finpftdetails t17 ON t17.finreference = t1.finreference
			LEFT JOIN steppolicyheader t24 ON t1.steppolicy = t24.policycode
			LEFT JOIN bmtcuststatuscodes t27 ON t1.finstatus = t27.custstscode
			LEFT JOIN amtvehicledealer t28 ON t1.accountsofficer = t28.dealerid
			LEFT JOIN relationshipofficers t30 ON t1.dsacode = t30.rofficercode
			LEFT JOIN relationshipofficers t33 ON t1.referralid = t33.rofficercode
			LEFT JOIN relationshipofficers t34 ON t1.dmacode = t34.rofficercode
			LEFT JOIN rmtgendepartments t35 ON t1.salesdepartment = t35.gendepartment
			LEFT JOIN smtdivisiondetail t36 ON t7.findivision = t36.divisioncode
			LEFT JOIN relationshipofficers t37 ON t1.employeename = t37.rofficercode
			LEFT JOIN rmtlovfielddetail t38 ON t1.eligibilitymethod = t38.fieldcodeid AND t38.fieldcode = 'ELGMETHOD'
			LEFT JOIN loanpurposes t39 ON t1.finpurpose= t39.loanpurposecode
			LEFT JOIN amtvehicledealer t40 ON t1.connector = t40.dealerid
			LEFT JOIN business_vertical bv ON bv.id = t1.businessvertical
		</createView>
	</changeSet>

	<changeSet id="22" author="Saikiran.v">
		<createView viewName="financemain_view" replaceIfExists="true">
			SELECT t1.finreference,
			t1.investmentref,
			t1.numberofterms,
			t1.grcperiodenddate,
			t1.allowgrcperiod,
			t1.gracebaserate,
			t1.gracespecialrate,
			t1.grcpftrate,
			t1.grcpftfrq,
			t1.nextgrcpftdate,
			t1.allowgrcpftrvw,
			t1.grcpftrvwfrq,
			t1.nextgrcpftrvwdate,
			t1.allowgrccpz,
			t1.grccpzfrq,
			t1.nextgrccpzdate,
			t1.repaybaserate,
			t1.repayspecialrate,
			t1.repayprofitrate,
			t1.repayfrq,
			t1.nextrepaydate,
			t1.repaypftfrq,
			t1.nextrepaypftdate,
			t1.allowrepayrvw,
			t1.repayrvwfrq,
			t1.nextrepayrvwdate,
			t1.allowrepaycpz,
			t1.repaycpzfrq,
			t1.nextrepaycpzdate,
			t1.maturitydate,
			t1.cpzatgraceend,
			t1.downpayment,
			t1.graceflatamount,
			t1.reqrepayamount,
			t1.totalprofit,
			t1.totalcpz,
			t1.totalgrosspft,
			t1.totalgrossgrcpft,
			t1.totalgracepft,
			t1.totalgracecpz,
			t1.grcratebasis,
			t1.repayratebasis,
			t1.fintype,
			t1.finremarks,
			t1.finccy,
			t1.schedulemethod,
			t1.profitdaysbasis,
			t1.reqmaturity,
			t1.calterms,
			t1.calmaturity,
			t1.firstrepay,
			t1.lastrepay,
			t1.finstartdate,
			t1.finamount,
			t1.finamount + t1.feechargeamt - t1.downpayment lovdescfinancingamount,
			t1.finrepaymentamount,
			t1.custid,
			t1.defferments,
			t1.plandefercount,
			t1.finbranch,
			t1.finsourceid,
			t1.alloweddefrpychange,
			t1.availeddefrpychange,
			t1.alloweddeffrqchange,
			t1.availeddeffrqchange,
			t1.recaltype,
			t1.finassetvalue,
			t1.disbaccountid,
			t1.repayaccountid,
			t1.finisactive,
			t1.limitvalid,
			t1.overridelimit,
			t1.securitydeposit,
			t1.version,
			t1.lastmntby,
			t1.lastmnton,
			t1.recordstatus,
			t1.rolecode,
			t1.nextrolecode,
			t1.taskid,
			t1.nexttaskid,
			t1.recordtype,
			t1.workflowid,
			t7.fintypedesc lovdescfintypename,
			t7.finmaxamount lovdescfinmaxamt,
			t7.finminamount lovdescfinminamount,
			t1.mindownpayperc,
			t7.finisalwdifferment lovdescfinalwdeferment,
			t7.finisdwpayrequired lovdescdwnpayreq,
			t7.finmaxdifferment lovdescfinmaxdifferment,
			t12.branchdesc lovdescfinbranchname,
			t12.branchprovince finbranchprovincecode,
			t1.lastrepaydate,
			t1.lastrepaypftdate,
			t1.lastrepayrvwdate,
			t1.lastrepaycpzdate,
			t1.allowgrcrepay,
			t1.grcschdmthd,
			t1.grcmargin,
			t1.repaymargin,
			t1.fincurrassetvalue,
			t1.fincommitmentref,
			t1.finlimitref,
			t1.depreciationfrq,
			t1.fincontractdate,
			t1.nextdepdate,
			t1.lastdepdate,
			t1.finaccount,
			t1.fincustpftaccount,
			t17.acrtilllbd lovdescaccruedtilllbd,
			t7.finrvwrateapplfor,
			t1.totalrepayamt,
			t1.closingstatus,
			t1.finapproveddate,
			t1.feechargeamt,
			t1.blacklisted,
			t1.finrepaypftonfrq,
			t1.anualizedpercrate,
			t1.effectiverateofreturn,
			t1.migratedfinance,
			t1.schedulemaintained,
			t1.scheduleregenerated,
			t1.finpurpose,
			t39.loanpurposedesc lovdescfinpurposename,
			t1.finstatus,
			t1.finstsreason,
			t1.initiateuser,
			t1.bankname,
			t1.iban,
			t1.accounttype,
			t1.ddareferenceno,
			t7.finscheduleon lovdescfinscheduleon,
			t1.cusTDSr,
			t1.jointaccount,
			t1.jointcustid,
			t1.downpaybank,
			t1.downpaysupl,
			t1.downpayaccount,
			t1.securitycollateral,
			t1.approved,
			t1.discrepancy,
			t1.limitapproved,
			t1.graceterms,
			t7.findivision lovdescfindivision,
			t1.rcdmaintainsts,
			t1.finrepaymethod,
			t1.grcprofitdaysbasis,
			t1.stepfinance,
			t1.steptype,
			t1.steppolicy,
			t1.alwmanualsteps,
			t1.noofsteps,
			t1.linkedfinref,
			t1.nextuserid,
			t1.priority,
			t24.policydesc lovdescsteppolicyname,
			t1.grcminrate,
			t1.grcmaxrate,
			t1.rpyminrate,
			t1.rpymaxrate,
			t1.deviationapproval,
			t1.manualschedule,
			t1.takeoverfinance,
			t1.grcadvbaserate,
			t1.grcadvmargin,
			t1.grcadvpftrate,
			t1.rpyadvbaserate,
			t1.rpyadvmargin,
			t1.rpyadvpftrate,
			t1.supplementrent,
			t1.increasedcost,
			t1.creditinsamt,
			t1.rolloverfrq,
			t1.nextrolloverdate,
			t27.custstsdescription,
			t1.shariastatus,
			t1.initiatedate,
			t1.finpreapprovedref,
			t1.mmaid,
			t1.accountsofficer,
			t1.feeaccountid,
			t1.fincancelac,
			t28.dealername lovdescaccountsofficer,
			t28.dealercity lovdescsourcecity,
			t1.dsacode,
			t30.rofficerdesc dsacodedesc,
			t1.TDSapplicable,
			t1.mandateid,
			t1.droplinefrq,
			t1.firstdroplinedate,
			t1.pftservicingodlimit,
			t1.insuranceamt,
			t1.deductinsdisb,
			t1.alwbpi,
			t1.bpitreatment,
			t1.planemihalw,
			t1.planemihmethod,
			t1.planemihmaxperyear,
			t1.planemihmax,
			t1.planemihlockperiod,
			t1.planemicpz,
			t1.calroundingmode,
			t1.alwmultidisb,
			t1.applicationno,
			t1.referralid,
			t33.rofficerdesc referraliddesc,
			t1.dmacode,
			t34.rofficerdesc dmacodedesc,
			t1.salesdepartment,
			t35.gendeptdesc salesdepartmentdesc,
			t1.quickdisb,
			t1.wifreference,
			t1.unplanemihlockperiod,
			t1.unplanemicpz,
			t1.reagecpz,
			t1.maxunplannedemi,
			t1.maxreageholidays,
			t1.availedunplanemi,
			t1.availedreageh,
			t1.bpiamount,
			t1.deductfeedisb,
			t1.rvwrateapplfor,
			t1.schcalonrvw,
			t1.pastduepftcalmthd,
			t1.pastduepftmargin,
			t1.droppingmethod,
			t1.ratechganyday,
			t1.promotioncode,
			t1.restructureloan,
			t1.oldfinreference,
			t1.reagebucket,
			t1.fincategory,
			t1.productcategory,
			t1.roundingtarget,
			t36.entitycode lovdescentitycode,
			t1.eligibilitymethod,
			t38.fieldcodevalue loveligibilitymethod,
			t38.valuedesc lovdesceligibilitymethod,
			t1.employeename,
			t37.rofficerdesc employeenamedesc,
			t1.samplingrequired,
			t1.legalrequired,
			t1.grcmaxamount,
			t1.connector,
			t40.dealername connectorcode,
			t40.dealercity connectordesc,
			t1.advanceemi,
			t1.advemiterms,
			t1.bpipftdaysbasis,
			t1.fixedratetenor,
			t1.fixedtenorrate,
			t12.branchtel finbranchcontact,
			t1.processattributes,
			t1.businessvertical,
			bv.code businessverticalcode,
			bv.description businessverticaldesc,
			t1.grcadvtype,
			t1.grcadvterms,
			t1.advtype,
			t1.advterms,
			t1.advstage,
			t1.TDSPercentage,
			t1.TDSStartDate,
			t1.TDSEndDate,
			t1.TDSLimitAmt
			FROM financemain_temp t1
			JOIN rmtfinancetypes t7 ON t1.fintype = t7.fintype
			LEFT JOIN rmtbranches t12 ON t1.finbranch = t12.branchcode
			LEFT JOIN finpftdetails t17 ON t17.finreference = t1.finreference
			LEFT JOIN steppolicyheader t24 ON t1.steppolicy = t24.policycode
			LEFT JOIN bmtcuststatuscodes t27 ON t1.finstatus = t27.custstscode
			LEFT JOIN amtvehicledealer t28 ON t1.accountsofficer = t28.dealerid
			LEFT JOIN relationshipofficers t30 ON t1.dsacode = t30.rofficercode
			LEFT JOIN relationshipofficers t33 ON t1.referralid = t33.rofficercode
			LEFT JOIN relationshipofficers t34 ON t1.dmacode = t34.rofficercode
			LEFT JOIN rmtgendepartments t35 ON t1.salesdepartment = t35.gendepartment
			LEFT JOIN smtdivisiondetail t36 ON t7.findivision = t36.divisioncode
			LEFT JOIN relationshipofficers t37 ON t1.employeename = t37.rofficercode
			LEFT JOIN rmtlovfielddetail t38 ON t1.eligibilitymethod = t38.fieldcodeid AND t38.fieldcode = 'ELGMETHOD'
			LEFT JOIN loanpurposes t39 ON t1.finpurpose = t39.loanpurposecode
			LEFT JOIN amtvehicledealer t40 ON t1.connector = t40.dealerid
			LEFT JOIN business_vertical bv ON bv.id = t1.businessvertical
			UNION ALL
			SELECT t1.finreference,
			t1.investmentref,
			t1.numberofterms,
			t1.grcperiodenddate,
			t1.allowgrcperiod,
			t1.gracebaserate,
			t1.gracespecialrate,
			t1.grcpftrate,
			t1.grcpftfrq,
			t1.nextgrcpftdate,
			t1.allowgrcpftrvw,
			t1.grcpftrvwfrq,
			t1.nextgrcpftrvwdate,
			t1.allowgrccpz,
			t1.grccpzfrq,
			t1.nextgrccpzdate,
			t1.repaybaserate,
			t1.repayspecialrate,
			t1.repayprofitrate,
			t1.repayfrq,
			t1.nextrepaydate,
			t1.repaypftfrq,
			t1.nextrepaypftdate,
			t1.allowrepayrvw,
			t1.repayrvwfrq,
			t1.nextrepayrvwdate,
			t1.allowrepaycpz,
			t1.repaycpzfrq,
			t1.nextrepaycpzdate,
			t1.maturitydate,
			t1.cpzatgraceend,
			t1.downpayment,
			t1.graceflatamount,
			t1.reqrepayamount,
			t1.totalprofit,
			t1.totalcpz,
			t1.totalgrosspft,
			t1.totalgrossgrcpft,
			t1.totalgracepft,
			t1.totalgracecpz,
			t1.grcratebasis,
			t1.repayratebasis,
			t1.fintype,
			t1.finremarks,
			t1.finccy,
			t1.schedulemethod,
			t1.profitdaysbasis,
			t1.reqmaturity,
			t1.calterms,
			t1.calmaturity,
			t1.firstrepay,
			t1.lastrepay,
			t1.finstartdate,
			t1.finamount,
			t1.finamount + t1.feechargeamt - t1.downpayment lovdescfinancingamount,
			t1.finrepaymentamount,
			t1.custid,
			t1.defferments,
			t1.plandefercount,
			t1.finbranch,
			t1.finsourceid,
			t1.alloweddefrpychange,
			t1.availeddefrpychange,
			t1.alloweddeffrqchange,
			t1.availeddeffrqchange,
			t1.recaltype,
			t1.finassetvalue,
			t1.disbaccountid,
			t1.repayaccountid,
			t1.finisactive,
			t1.limitvalid,
			t1.overridelimit,
			t1.securitydeposit,
			t1.version,
			t1.lastmntby,
			t1.lastmnton,
			t1.recordstatus,
			t1.rolecode,
			t1.nextrolecode,
			t1.taskid,
			t1.nexttaskid,
			t1.recordtype,
			t1.workflowid,
			t7.fintypedesc lovdescfintypename,
			t7.finmaxamount lovdescfinmaxamt,
			t7.finminamount lovdescfinminamount,
			t1.mindownpayperc,
			t7.finisalwdifferment lovdescfinalwdeferment,
			t7.finisdwpayrequired lovdescdwnpayreq,
			t7.finmaxdifferment lovdescfinmaxdifferment,
			t12.branchdesc lovdescfinbranchname,
			t12.branchprovince finbranchprovincecode,
			t1.lastrepaydate,
			t1.lastrepaypftdate,
			t1.lastrepayrvwdate,
			t1.lastrepaycpzdate,
			t1.allowgrcrepay,
			t1.grcschdmthd,
			t1.grcmargin,
			t1.repaymargin,
			t1.fincurrassetvalue,
			t1.fincommitmentref,
			t1.finlimitref,
			t1.depreciationfrq,
			t1.fincontractdate,
			t1.nextdepdate,
			t1.lastdepdate,
			t1.finaccount,
			t1.fincustpftaccount,
			t17.acrtilllbd lovdescaccruedtilllbd,
			t7.finrvwrateapplfor,
			t1.totalrepayamt,
			t1.closingstatus,
			t1.finapproveddate,
			t1.feechargeamt,
			t1.blacklisted,
			t1.finrepaypftonfrq,
			t1.anualizedpercrate,
			t1.effectiverateofreturn,
			t1.migratedfinance,
			t1.schedulemaintained,
			t1.scheduleregenerated,
			t1.finpurpose,
			t39.loanpurposedesc lovdescfinpurposename,
			t1.finstatus,
			t1.finstsreason,
			t1.initiateuser,
			t1.bankname,
			t1.iban,
			t1.accounttype,
			t1.ddareferenceno,
			t7.finscheduleon lovdescfinscheduleon,
			t1.cusTDSr,
			t1.jointaccount,
			t1.jointcustid,
			t1.downpaybank,
			t1.downpaysupl,
			t1.downpayaccount,
			t1.securitycollateral,
			t1.approved,
			t1.discrepancy,
			t1.limitapproved,
			t1.graceterms,
			t7.findivision lovdescfindivision,
			t1.rcdmaintainsts,
			t1.finrepaymethod,
			t1.grcprofitdaysbasis,
			t1.stepfinance,
			t1.steptype,
			t1.steppolicy,
			t1.alwmanualsteps,
			t1.noofsteps,
			t1.linkedfinref,
			t1.nextuserid,
			t1.priority,
			t24.policydesc lovdescsteppolicyname,
			t1.grcminrate,
			t1.grcmaxrate,
			t1.rpyminrate,
			t1.rpymaxrate,
			t1.deviationapproval,
			t1.manualschedule,
			t1.takeoverfinance,
			t1.grcadvbaserate,
			t1.grcadvmargin,
			t1.grcadvpftrate,
			t1.rpyadvbaserate,
			t1.rpyadvmargin,
			t1.rpyadvpftrate,
			t1.supplementrent,
			t1.increasedcost,
			t1.creditinsamt,
			t1.rolloverfrq,
			t1.nextrolloverdate,
			t27.custstsdescription,
			t1.shariastatus,
			t1.initiatedate,
			t1.finpreapprovedref,
			t1.mmaid,
			t1.accountsofficer,
			t1.feeaccountid,
			t1.fincancelac,
			t28.dealername lovdescaccountsofficer,
			t28.dealercity lovdescsourcecity,
			t1.dsacode,
			t30.rofficerdesc dsacodedesc,
			t1.TDSapplicable,
			t1.mandateid,
			t1.droplinefrq,
			t1.firstdroplinedate,
			t1.pftservicingodlimit,
			t1.insuranceamt,
			t1.deductinsdisb,
			t1.alwbpi,
			t1.bpitreatment,
			t1.planemihalw,
			t1.planemihmethod,
			t1.planemihmaxperyear,
			t1.planemihmax,
			t1.planemihlockperiod,
			t1.planemicpz,
			t1.calroundingmode,
			t1.alwmultidisb,
			t1.applicationno,
			t1.referralid,
			t33.rofficerdesc referraliddesc,
			t1.dmacode,
			t34.rofficerdesc dmacodedesc,
			t1.salesdepartment,
			t35.gendeptdesc salesdepartmentdesc,
			t1.quickdisb,
			t1.wifreference,
			t1.unplanemihlockperiod,
			t1.unplanemicpz,
			t1.reagecpz,
			t1.maxunplannedemi,
			t1.maxreageholidays,
			t1.availedunplanemi,
			t1.availedreageh,
			t1.bpiamount,
			t1.deductfeedisb,
			t1.rvwrateapplfor,
			t1.schcalonrvw,
			t1.pastduepftcalmthd,
			t1.pastduepftmargin,
			t1.droppingmethod,
			t1.ratechganyday,
			t1.promotioncode,
			t1.restructureloan,
			t1.oldfinreference,
			t1.reagebucket,
			t1.fincategory,
			t1.productcategory,
			t1.roundingtarget,
			t36.entitycode lovdescentitycode,
			t1.eligibilitymethod,
			t38.fieldcodevalue loveligibilitymethod,
			t38.valuedesc lovdesceligibilitymethod,
			t1.employeename,
			t37.rofficerdesc employeenamedesc,
			t1.samplingrequired,
			t1.legalrequired,
			t1.grcmaxamount,
			t1.connector,
			t40.dealername connectorcode,
			t40.dealercity connectordesc,
			t1.advanceemi,
			t1.advemiterms,
			t1.bpipftdaysbasis,
			t1.fixedratetenor,
			t1.fixedtenorrate,
			t12.branchtel finbranchcontact,
			t1.processattributes,
			t1.businessvertical,
			bv.code businessverticalcode,
			bv.description businessverticaldesc,
			t1.grcadvtype,
			t1.grcadvterms,
			t1.advtype,
			t1.advterms,
			t1.advstage,
			t1.TDSPercentage,
			t1.TDSStartDate,
			t1.TDSEndDate,
			t1.TDSLimitAmt
			FROM financemain t1
			JOIN rmtfinancetypes t7 ON t1.fintype = t7.fintype
			LEFT JOIN rmtbranches t12 ON t1.finbranch = t12.branchcode
			LEFT JOIN finpftdetails t17 ON t17.finreference = t1.finreference
			LEFT JOIN steppolicyheader t24 ON t1.steppolicy = t24.policycode
			LEFT JOIN bmtcuststatuscodes t27 ON t1.finstatus = t27.custstscode
			LEFT JOIN amtvehicledealer t28 ON t1.accountsofficer = t28.dealerid
			LEFT JOIN relationshipofficers t30 ON t1.dsacode = t30.rofficercode
			LEFT JOIN relationshipofficers t33 ON t1.referralid = t33.rofficercode
			LEFT JOIN relationshipofficers t34 ON t1.dmacode = t34.rofficercode
			LEFT JOIN rmtgendepartments t35 ON t1.salesdepartment = t35.gendepartment
			LEFT JOIN smtdivisiondetail t36 ON t7.findivision = t36.divisioncode
			LEFT JOIN relationshipofficers t37 ON t1.employeename = t37.rofficercode
			LEFT JOIN rmtlovfielddetail t38 ON t1.eligibilitymethod = t38.fieldcodeid AND t38.fieldcode = 'ELGMETHOD'
			LEFT JOIN loanpurposes t39 ON t1.finpurpose = t39.loanpurposecode
			LEFT JOIN amtvehicledealer t40 ON t1.connector = t40.dealerid
			LEFT JOIN business_vertical bv ON bv.id = t1.businessvertical
			WHERE NOT (EXISTS ( SELECT 1
			FROM financemain_temp
			WHERE financemain_temp.finreference = t1.finreference))
		</createView>
	</changeSet>

	<changeSet id="23" author="Saikiran.v">
		<createView viewName="financemain_aview" replaceIfExists="true">
			SELECT t1.finreference,
			t1.investmentref,
			t1.numberofterms,
			t1.grcperiodenddate,
			t1.allowgrcperiod,
			t1.gracebaserate,
			t1.gracespecialrate,
			t1.grcpftrate,
			t1.grcpftfrq,
			t1.nextgrcpftdate,
			t1.allowgrcpftrvw,
			t1.grcpftrvwfrq,
			t1.nextgrcpftrvwdate,
			t1.allowgrccpz,
			t1.grccpzfrq,
			t1.nextgrccpzdate,
			t1.repaybaserate,
			t1.repayspecialrate,
			t1.repayprofitrate,
			t1.repayfrq,
			t1.nextrepaydate,
			t1.repaypftfrq,
			t1.nextrepaypftdate,
			t1.allowrepayrvw,
			t1.repayrvwfrq,
			t1.nextrepayrvwdate,
			t1.allowrepaycpz,
			t1.repaycpzfrq,
			t1.nextrepaycpzdate,
			t1.maturitydate,
			t1.cpzatgraceend,
			t1.downpayment,
			t1.graceflatamount,
			t1.reqrepayamount,
			t1.totalprofit,
			t1.totalcpz,
			t1.totalgrosspft,
			t1.totalgrossgrcpft,
			t1.totalgracepft,
			t1.totalgracecpz,
			t1.grcratebasis,
			t1.repayratebasis,
			t1.fintype,
			t1.finremarks,
			t1.finccy,
			t1.schedulemethod,
			t1.profitdaysbasis,
			t1.reqmaturity,
			t1.calterms,
			t1.calmaturity,
			t1.firstrepay,
			t1.lastrepay,
			t1.finstartdate,
			t1.finamount,
			t1.finamount + t1.feechargeamt - t1.downpayment lovdescfinancingamount,
			t1.finrepaymentamount,
			t1.custid,
			t1.defferments,
			t1.plandefercount,
			t1.finbranch,
			t1.finsourceid,
			t1.alloweddefrpychange,
			t1.availeddefrpychange,
			t1.alloweddeffrqchange,
			t1.availeddeffrqchange,
			t1.recaltype,
			t1.finassetvalue,
			t1.disbaccountid,
			t1.repayaccountid,
			t1.finisactive,
			t1.limitvalid,
			t1.overridelimit,
			t1.securitydeposit,
			t1.version,
			t1.lastmntby,
			t1.lastmnton,
			t1.recordstatus,
			t1.rolecode,
			t1.nextrolecode,
			t1.taskid,
			t1.nexttaskid,
			t1.recordtype,
			t1.workflowid,
			t7.fintypedesc lovdescfintypename,
			t7.finmaxamount lovdescfinmaxamt,
			t7.finminamount lovdescfinminamount,
			t1.mindownpayperc,
			t7.finisalwdifferment lovdescfinalwdeferment,
			t7.finisdwpayrequired lovdescdwnpayreq,
			t7.finmaxdifferment lovdescfinmaxdifferment,
			t12.branchdesc lovdescfinbranchname,
			t12.branchprovince finbranchprovincecode,
			t1.lastrepaydate,
			t1.lastrepaypftdate,
			t1.lastrepayrvwdate,
			t1.lastrepaycpzdate,
			t1.allowgrcrepay,
			t1.grcschdmthd,
			t1.grcmargin,
			t1.repaymargin,
			t1.fincurrassetvalue,
			t1.fincommitmentref,
			t1.finlimitref,
			t1.depreciationfrq,
			t1.fincontractdate,
			t1.nextdepdate,
			t1.lastdepdate,
			t1.finaccount,
			t1.fincustpftaccount,
			t17.acrtilllbd lovdescaccruedtilllbd,
			t7.finrvwrateapplfor,
			t1.totalrepayamt,
			t1.closingstatus,
			t1.finapproveddate,
			t1.feechargeamt,
			t1.blacklisted,
			t1.finrepaypftonfrq,
			t1.anualizedpercrate,
			t1.effectiverateofreturn,
			t1.migratedfinance,
			t1.schedulemaintained,
			t1.scheduleregenerated,
			t1.finpurpose,
			t39.loanpurposedesc lovdescfinpurposename,
			t1.finstatus,
			t1.finstsreason,
			t1.initiateuser,
			t1.bankname,
			t1.iban,
			t1.accounttype,
			t1.ddareferenceno,
			t7.finscheduleon lovdescfinscheduleon,
			t1.cusTDSr,
			t1.jointaccount,
			t1.jointcustid,
			t1.downpaybank,
			t1.downpaysupl,
			t1.downpayaccount,
			t1.securitycollateral,
			t1.approved,
			t1.discrepancy,
			t1.limitapproved,
			t1.graceterms,
			t7.findivision lovdescfindivision,
			t1.rcdmaintainsts,
			t1.finrepaymethod,
			t1.grcprofitdaysbasis,
			t1.stepfinance,
			t1.steptype,
			t1.steppolicy,
			t1.alwmanualsteps,
			t1.noofsteps,
			t1.linkedfinref,
			t1.nextuserid,
			t1.priority,
			t24.policydesc lovdescsteppolicyname,
			t1.grcminrate,
			t1.grcmaxrate,
			t1.rpyminrate,
			t1.rpymaxrate,
			t1.deviationapproval,
			t1.manualschedule,
			t1.takeoverfinance,
			t1.grcadvbaserate,
			t1.grcadvmargin,
			t1.grcadvpftrate,
			t1.rpyadvbaserate,
			t1.rpyadvmargin,
			t1.rpyadvpftrate,
			t1.supplementrent,
			t1.increasedcost,
			t1.creditinsamt,
			t1.rolloverfrq,
			t1.nextrolloverdate,
			t27.custstsdescription,
			t1.shariastatus,
			t1.initiatedate,
			t1.finpreapprovedref,
			t1.mmaid,
			t1.accountsofficer,
			t1.feeaccountid,
			t1.fincancelac,
			t28.dealername lovdescaccountsofficer,
			t28.dealercity lovdescsourcecity,
			t1.dsacode,
			t30.rofficerdesc dsacodedesc,
			t1.TDSapplicable,
			t1.mandateid,
			t1.droplinefrq,
			t1.firstdroplinedate,
			t1.pftservicingodlimit,
			t1.insuranceamt,
			t1.deductinsdisb,
			t1.alwbpi,
			t1.bpitreatment,
			t1.planemihalw,
			t1.planemihmethod,
			t1.planemihmaxperyear,
			t1.planemihmax,
			t1.planemihlockperiod,
			t1.planemicpz,
			t1.calroundingmode,
			t1.alwmultidisb,
			t1.applicationno,
			t1.referralid,
			t33.rofficerdesc referraliddesc,
			t1.dmacode,
			t34.rofficerdesc dmacodedesc,
			t1.salesdepartment,
			t35.gendeptdesc salesdepartmentdesc,
			t1.quickdisb,
			t1.wifreference,
			t1.unplanemihlockperiod,
			t1.unplanemicpz,
			t1.reagecpz,
			t1.maxunplannedemi,
			t1.maxreageholidays,
			t1.availedunplanemi,
			t1.availedreageh,
			t1.bpiamount,
			t1.deductfeedisb,
			t1.rvwrateapplfor,
			t1.schcalonrvw,
			t1.pastduepftcalmthd,
			t1.pastduepftmargin,
			t1.droppingmethod,
			t1.ratechganyday,
			t1.promotioncode,
			t1.restructureloan,
			t1.oldfinreference,
			t1.reagebucket,
			t1.fincategory,
			t1.productcategory,
			t1.roundingtarget,
			t36.entitycode lovdescentitycode,
			t1.eligibilitymethod,
			t38.fieldcodevalue loveligibilitymethod,
			t38.valuedesc lovdesceligibilitymethod,
			t1.employeename,
			t37.rofficerdesc employeenamedesc,
			t1.samplingrequired,
			t1.legalrequired,
			t1.grcmaxamount,
			t1.connector,
			t40.dealername connectorcode,
			t40.dealercity connectordesc,
			t1.advanceemi,
			t1.advemiterms,
			t1.bpipftdaysbasis,
			t1.fixedratetenor,
			t1.fixedtenorrate,
			t12.branchtel finbranchcontact,
			t1.processattributes,
			t1.businessvertical,
			bv.code businessverticalcode,
			bv.description businessverticaldesc,
			t1.grcadvtype,
			t1.grcadvterms,
			t1.advtype,
			t1.advterms,
			t1.advstage,
			t1.TDSPercentage,
			t1.TDSStartDate,
			t1.TDSEndDate,
			t1.TDSLimitAmt
			FROM financemain t1
			JOIN rmtfinancetypes t7 ON t1.fintype = t7.fintype
			LEFT JOIN rmtbranches t12 ON t1.finbranch = t12.branchcode
			LEFT JOIN finpftdetails t17 ON t17.finreference = t1.finreference
			LEFT JOIN steppolicyheader t24 ON t1.steppolicy = t24.policycode
			LEFT JOIN bmtcuststatuscodes t27 ON t1.finstatus = t27.custstscode
			LEFT JOIN amtvehicledealer t28 ON t1.accountsofficer = t28.dealerid
			LEFT JOIN relationshipofficers t30 ON t1.dsacode = t30.rofficercode
			LEFT JOIN relationshipofficers t33 ON t1.referralid = t33.rofficercode
			LEFT JOIN relationshipofficers t34 ON t1.dmacode = t34.rofficercode
			LEFT JOIN rmtgendepartments t35 ON t1.salesdepartment = t35.gendepartment
			LEFT JOIN smtdivisiondetail t36 ON t7.findivision = t36.divisioncode
			LEFT JOIN relationshipofficers t37 ON t1.employeename = t37.rofficercode
			LEFT JOIN rmtlovfielddetail t38 ON t1.eligibilitymethod = t38.fieldcodeid AND t38.fieldcode = 'ELGMETHOD'
			LEFT JOIN loanpurposes t39 ON t1.finpurpose = t39.loanpurposecode
			LEFT JOIN amtvehicledealer t40 ON t1.connector = t40.dealerid
			LEFT JOIN business_vertical bv ON bv.id = t1.businessvertical
		</createView>

	</changeSet>
	<changeSet id="24" author="Saikiran.v">
		<sql>
		   <![CDATA[
			  UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS);
			  UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);

			  INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3,'FinanceMainDialog_TDSPercentage','FinanceMainDialog', 0, 1000,CURRENT_TIMESTAMP,'',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			  INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),(SELECT GRPID FROM SECGROUPS WHERE GRPCODE='BFSD_ORIGINATION_MAKER'),(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_TDSPercentage'), 1, 0, 1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			  INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3,'FinanceMainDialog_TDSStartDate','FinanceMainDialog', 0, 1000,CURRENT_TIMESTAMP,'',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			  INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),(SELECT GRPID FROM SECGROUPS WHERE GRPCODE='BFSD_ORIGINATION_MAKER'),(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_TDSStartDate'),1, 0, 1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			  INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3,'FinanceMainDialog_TDSEndDate','FinanceMainDialog', 0, 1000,CURRENT_TIMESTAMP,'',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			  INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),(SELECT GRPID FROM SECGROUPS WHERE GRPCODE='BFSD_ORIGINATION_MAKER'),(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_TDSEndDate'), 1, 0, 1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			  INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3,'FinanceMainDialog_TDSLimitAmt','FinanceMainDialog', 0, 1000,CURRENT_TIMESTAMP,'',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			  INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS),(SELECT GRPID FROM SECGROUPS WHERE GRPCODE='BFSD_ORIGINATION_MAKER'),(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_TDSLimitAmt'), 1, 0, 1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);

			  UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS);
			  UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);
			]]>
		</sql>
	</changeSet>

	<changeSet id="25" author="Saikiran.v">
		<sql>
            <![CDATA[
                 INSERT INTO SMTPARAMETERS VALUES ('ALLOW_LOWER_TAX_DED_REQ', 'Lower Tax Deduction required or not', 'String', 0, 'N', 1, 0, NULL, NULL,'Lower Tax Deduction required or not', 1,  1000,                           CURRENT_TIMESTAMP,'Approved', NULL, NULL, NULL, NULL, NULL, 0);
            ]]>
		</sql>
	</changeSet>

	<changeSet id="26" author="Varaprasad.K">
		<addColumn tableName="FinMaintainInstructions">
			<column name="TDSApplicable" type="boolean" />
			<column name="TDSPercentage" type="decimal(5, 2)" />
			<column name="TDSStartDate" type="datetime" />
			<column name="TDSEndDate" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="27" author="Varaprasad.K">
		<addColumn tableName="FinMaintainInstructions_Temp">
			<column name="TDSApplicable" type="boolean" />
			<column name="TDSPercentage" type="decimal(5, 2)" />
			<column name="TDSStartDate" type="datetime" />
			<column name="TDSEndDate" type="datetime" />
		</addColumn>
	</changeSet>

	<changeSet id="28" author="Varaprasad.K">
		<sql>
			<![CDATA[
				UPDATE FinMaintainInstructions Set TDSApplicable = 0;
				UPDATE FinMaintainInstructions_temp Set TDSApplicable = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="28.1" author="Varaprasad.K" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE FINMAINTAININSTRUCTIONS ADD CONSTRAINT DF_FINMAINTAININSTRUCTIONS_TDSAPPLICABLE DEFAULT 0 FOR TDSAPPLICABLE;
				ALTER TABLE FINMAINTAININSTRUCTIONS_TEMP ADD CONSTRAINT DF_FINMAINTAININSTRUCTIONS_TEMP_TDSAPPLICABLE DEFAULT 0 FOR TDSAPPLICABLE;
			]]>
		</sql>
	</changeSet>

	<changeSet id="28.1" author="Varaprasad.K" dbms="postgresql, oracle">
		<addDefaultValue columnName="TDSApplicable" tableName="FinMaintainInstructions" defaultValue="0" />
		<addDefaultValue columnName="TDSApplicable" tableName="FinMaintainInstructions_Temp" defaultValue="0" />
	</changeSet>

	<changeSet id="29" author="Varaprasad.K">
		<addNotNullConstraint tableName="FinMaintainInstructions" columnName="TDSApplicable" />
		<addNotNullConstraint tableName="FinMaintainInstructions_Temp" columnName="TDSApplicable" />
	</changeSet>

	<changeSet id="30" author="Varaprasad.K">
		<sql>
			<![CDATA[
			     Update SeqSecRights Set SeqNo = (Select MAX(RightID) + 1 from SecRights);
                 Update SeqSecGroupRights Set SeqNo = (Select MAX(GrpRightID) + 1 from SecGroupRights); 
                
                 INSERT INTO SecGroups SELECT (SELECT MAX(GRPID)+1 FROM SECGROUPS), 'ChangeTDS_MAKER', 'Maker for Changes TDS', 0,1000,CURRENT_TIMESTAMP,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroups WHERE 0=0;
                 INSERT INTO SecGroups SELECT (SELECT MAX(GRPID)+1 FROM SECGROUPS), 'ChangeTDS_APPROVER', 'Approver for Changes TDS', 0,1000,CURRENT_TIMESTAMP,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroups WHERE 0=0;
			     INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'ChangeTDSDialog_TDSPercentage', 'ChangeTDSDialog',1,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
                 INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'ChangeTDSDialog_TDSStartDate', 'ChangeTDSDialog',1,1000,CURRENT_TIMESTAMP,'',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
                 INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'ChangeTDSDialog_TDSEndDate', 'ChangeTDSDialog',1,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
                 INSERT INTO SecRights SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),0,'menuItem_FinanceManagement_ChangeTDSApplicable','MENU',0,1000,CURRENT_TIMESTAMP,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecRights WHERE 0=0;
                 INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='ChangeTDS_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ChangeTDSDialog_TDSPercentage'), 1, 0, 1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
                 INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='ChangeTDS_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ChangeTDSDialog_TDSStartDate'), 1, 0, 1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
                 INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='ChangeTDS_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ChangeTDSDialog_TDSEndDate'), 1, 0, 1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
                 INSERT INTO SecGroupRights SELECT (SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='ChangeTDS_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='menuItem_FinanceManagement_ChangeTDSApplicable'), 1, 0, 10000,CURRENT_TIMESTAMP,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
                 INSERT INTO SecGroupRights SELECT (SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='ChangeTDS_APPROVER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='menuItem_FinanceManagement_ChangeTDSApplicable'), 1, 0, 10000,CURRENT_TIMESTAMP,'Approved',' ',' ',' ',' ',' ',0 FROM SeqSecGroupRights WHERE 0=0;
                 
				 Update SeqSecRights Set SeqNo = (Select MAX(RightID) + 1 from SecRights);
                 Update SeqSecGroupRights Set SeqNo = (Select MAX(GrpRightID) + 1 from SecGroupRights);
             ]]>
		</sql>
	</changeSet>

	<changeSet id="31" author="Varaprasad.K">
		<comment>Loan Managment new menu item Change TDS Changes</comment>
		<createView viewName="FINMAINTAININSTRUCTIONS_VIEW" replaceIfExists="true">
			  SELECT t1.finmaintainid,
					t1.finreference,
					t1.event,
					t1.TDSApplicable,
					t1.TDSPercentage,
					t1.TDSStartDate,
					t1.TDSEndDate,
					t1.version,
					t1.lastmntby,
					t1.lastmnton,
					t1.recordstatus,
					t1.rolecode,
					t1.nextrolecode,
					t1.taskid,
					t1.nexttaskid,
					t1.recordtype,
					t1.workflowid
				   FROM finmaintaininstructions_temp t1
				UNION ALL
				 SELECT t1.finmaintainid,
					t1.finreference,
					t1.event,
					t1.TDSApplicable,
					t1.TDSPercentage,
					t1.TDSStartDate,
					t1.TDSEndDate,
					t1.version,
					t1.lastmntby,
					t1.lastmnton,
					t1.recordstatus,
					t1.rolecode,
					t1.nextrolecode,
					t1.taskid,
					t1.nexttaskid,
					t1.recordtype,
					t1.workflowid
				   FROM finmaintaininstructions t1
				  WHERE NOT (EXISTS ( SELECT 1
						   FROM finmaintaininstructions_temp
						  WHERE finmaintaininstructions_temp.finmaintainid = t1.finmaintainid))
		</createView>
	</changeSet>

	<changeSet id="32" author="Varaprasad.K">
		<comment>Loan Managment new menu item Change TDS Changes</comment>
		<createView viewName="FINMAINTAININSTRUCTIONS_AVIEW" replaceIfExists="true">
			  SELECT t1.finmaintainid,
					t1.finreference,
					t1.event,
					t1.TDSApplicable,
					t1.TDSPercentage,
					t1.TDSStartDate,
					t1.TDSEndDate,
					t1.version,
					t1.lastmntby,
					t1.lastmnton,
					t1.recordstatus,
					t1.rolecode,
					t1.nextrolecode,
					t1.taskid,
					t1.nexttaskid,
					t1.recordtype,
					t1.workflowid
				   FROM finmaintaininstructions t1
			</createView>
	</changeSet>

	<changeSet id="33" author="Varaprasad.K">
		<comment>Loan Managment new menu item Change TDS Changes</comment>
		<createView viewName="FINMAINTAININSTRUCTIONS_TVIEW" replaceIfExists="true">
			  SELECT t1.finmaintainid,
					t1.finreference,
					t1.event,
					t1.TDSApplicable,
					t1.TDSPercentage,
					t1.TDSStartDate,
					t1.TDSEndDate,
					t1.version,
					t1.lastmntby,
					t1.lastmnton,
					t1.recordstatus,
					t1.rolecode,
					t1.nextrolecode,
					t1.taskid,
					t1.nexttaskid,
					t1.recordtype,
					t1.workflowid
				   FROM FinMaintainInstructions_Temp t1
		</createView>
	</changeSet>

	<changeSet id="42" author="Varaprasad.K">
		<sql>
		<![CDATA[
		    update SecRights set rolecode=null,nextrolecode=null,taskid=null,nexttaskid=null,recordtype=null where rightname='ChangeTDSDialog_TDSPercentage';
			update SecRights set rolecode=null,nextrolecode=null,taskid=null,nexttaskid=null,recordtype=null where rightname='ChangeTDSDialog_TDSStartDate';
			update SecRights set rolecode=null,nextrolecode=null,taskid=null,nexttaskid=null,recordtype=null where rightname='ChangeTDSDialog_TDSEndDate';
			update SecRights set rolecode=null,nextrolecode=null,taskid=null,nexttaskid=null,recordtype=null where rightname='menuItem_FinanceManagement_ChangeTDSApplicable';
			update secgroups set rolecode=null,nextrolecode=null,taskid=null,nexttaskid=null where grpcode='ChangeTDS_MAKER';
            update secgroups set rolecode=null,nextrolecode=null,taskid=null,nexttaskid=null where grpcode='ChangeTDS_APPROVER';
					
			update SECGROUPRIGHTS set recordstatus=null,rolecode=null,nextrolecode=null,taskid=null,nexttaskid=null,recordtype=null where  rightid=(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ChangeTDSDialog_TDSPercentage');
			update SECGROUPRIGHTS set recordstatus=null,rolecode=null,nextrolecode=null,taskid=null,nexttaskid=null,recordtype=null where  rightid=(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ChangeTDSDialog_TDSStartDate');
			update SECGROUPRIGHTS set recordstatus=null,rolecode=null,nextrolecode=null,taskid=null,nexttaskid=null,recordtype=null where  rightid=(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ChangeTDSDialog_TDSEndDate');
			update SECGROUPRIGHTS set recordstatus=null,rolecode=null,nextrolecode=null,taskid=null,nexttaskid=null,recordtype=null where  grpid=(SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='ChangeTDS_MAKER');
			update SECGROUPRIGHTS set recordstatus=null,rolecode=null,nextrolecode=null,taskid=null,nexttaskid=null,recordtype=null where  grpid=(SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='ChangeTDS_APPROVER');
		
			INSERT INTO SecRights SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),2,'button_FinChangeTDSDialog_btnNew','ChangeTDSDialog',0,1000,CURRENT_TIMESTAMP,'Approved','NULL','NULL','NULL','NULL','NULL',0 FROM SeqSecRights WHERE 0=0;
			INSERT INTO SecRights SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),2,'button_FinChangeTDSDialog_btnEdit','ChangeTDSDialog',0,1000,CURRENT_TIMESTAMP,'Approved','NULL','NULL','NULL','NULL ','NULL',0 FROM SeqSecRights WHERE 0=0;
			INSERT INTO SecRights SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),2,'button_FinChangeTDSDialog_btnDelete','ChangeTDSDialog',0,1000,CURRENT_TIMESTAMP,'Approved','NULL','NULL','NULL','NULL','NULL',0 FROM SeqSecRights WHERE 0=0;
			INSERT INTO SecRights SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),2,'button_FinChangeTDSDialog_btnSave','ChangeTDSDialog',0,1000,CURRENT_TIMESTAMP,'Approved','NULL','NULL','NULL','NULL ','NULL',0 FROM SeqSecRights WHERE 0=0;
		]]>
		</sql>
	</changeSet>

	<changeSet id="44" author="Ganesh.p">
		<sql>
		<![CDATA[
			Update DATA_ENGINE_TABLE SET KeyFields='JOB_ID',Filter='JOB_ID = :JOB_ID' WHERE ID =(Select ID from DATA_ENGINE_TABLE where ConfigId =(Select ID from DATA_ENGINE_CONFIG where NAME = 'PRESENTMENT_REQUEST'));
		]]>
		</sql>
	</changeSet>

	<changeSet id="45" author="Varaprasad.K">
		<sql>
            <![CDATA[
                INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'button_FinChangeTDSDialog_tDSApplicable', 'ChangeTDSDialog',1,1000,CURRENT_TIMESTAMP,'NULL','NULL','NULL','NULL','NULL','NULL',0 FROM SEQSECRIGHTS WHERE 0=0;
                INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='ChangeTDS_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_FinChangeTDSDialog_tDSApplicable'), 1, 0, 1000,CURRENT_TIMESTAMP,'NULL','NULL','NULL','NULL','NULL','NULL',0);
            ]]>
		</sql>
	</changeSet>

	<changeSet id="46" author="Varaprasad.K">
		<comment>Added new parameter TdsLimit</comment>
		<createView viewName="FINMAINTAININSTRUCTIONS_VIEW" replaceIfExists="true">
              SELECT t1.finmaintainid,
                    t1.finreference,
                    t1.event,
                    t1.TDSApplicable,
                    t1.TDSPercentage,
                    t1.TDSStartDate,
                    t1.TDSEndDate,
                    t1.TdsLimit,
                    t1.version,
                    t1.lastmntby,
                    t1.lastmnton,
                    t1.recordstatus,
                    t1.rolecode,
                    t1.nextrolecode,
                    t1.taskid,
                    t1.nexttaskid,
                    t1.recordtype,
                    t1.workflowid
                   FROM finmaintaininstructions_temp t1
                UNION ALL
                 SELECT t1.finmaintainid,
                    t1.finreference,
                    t1.event,
                    t1.TDSApplicable,
                    t1.TDSPercentage,
                    t1.TDSStartDate,
                    t1.TDSEndDate,
                    t1.TdsLimit,
                    t1.version,
                    t1.lastmntby,
                    t1.lastmnton,
                    t1.recordstatus,
                    t1.rolecode,
                    t1.nextrolecode,
                    t1.taskid,
                    t1.nexttaskid,
                    t1.recordtype,
                    t1.workflowid
                   FROM finmaintaininstructions t1
                  WHERE NOT (EXISTS ( SELECT 1
                           FROM finmaintaininstructions_temp
                          WHERE finmaintaininstructions_temp.finmaintainid = t1.finmaintainid))
        </createView>
	</changeSet>

	<changeSet id="47" author="Varaprasad.K">
		<comment>Added new parameter TdsLimit</comment>
		<createView viewName="FINMAINTAININSTRUCTIONS_AVIEW" replaceIfExists="true">
              SELECT t1.finmaintainid,
                    t1.finreference,
                    t1.event,
                    t1.TDSApplicable,
                    t1.TDSPercentage,
                    t1.TDSStartDate,
                    t1.TDSEndDate,
                    t1.TdsLimit,
                    t1.version,
                    t1.lastmntby,
                    t1.lastmnton,
                    t1.recordstatus,
                    t1.rolecode,
                    t1.nextrolecode,
                    t1.taskid,
                    t1.nexttaskid,
                    t1.recordtype,
                    t1.workflowid
                   FROM finmaintaininstructions t1
            </createView>
	</changeSet>

	<changeSet id="48" author="Varaprasad.K">
		<comment>Added new parameter TdsLimit</comment>
		<createView viewName="FINMAINTAININSTRUCTIONS_TVIEW" replaceIfExists="true">
              SELECT t1.finmaintainid,
                    t1.finreference,
                    t1.event,
                    t1.TDSApplicable,
                    t1.TDSPercentage,
                    t1.TDSStartDate,
                    t1.TDSEndDate,
                    t1.TdsLimit,
                    t1.version,
                    t1.lastmntby,
                    t1.lastmnton,
                    t1.recordstatus,
                    t1.rolecode,
                    t1.nextrolecode,
                    t1.taskid,
                    t1.nexttaskid,
                    t1.recordtype,
                    t1.workflowid
                   FROM FinMaintainInstructions_Temp t1
        </createView>
	</changeSet>

	<changeSet id="49" author="Saikiran.v">
		<createSequence sequenceName="SEQGST_RATES" incrementBy="1" startValue="1" minValue="1"
			maxValue="999999999999999999" />
	</changeSet>

	<changeSet id="50" author="Saikiran.v">
		<createTable tableName="GST_RATES">
			<column name="Id" type="bigint">
				<constraints primaryKey="true" nullable="false" />
			</column>
			<column name="FromState" type="varchar(8)" />
			<column name="ToState" type="varchar(8)" />
			<column name="TaxType" type="varchar(4)" />
			<column name="CalcType" type="char(1)" />
			<column name="Amount" type="decimal(18,0)" />
			<column name="Percentage" type="decimal(5,2)" />
			<column name="CalcOn" type="varchar(10)" />
			<column name="Active" type="boolean" />
			<column name="version" type="int" />
			<column name="lastmntby" type="bigint" />
			<column name="lastmnton" type="datetime" />
			<column name="recordstatus" type="varchar(50)" />
			<column name="rolecode" type="varchar(100)" />
			<column name="nextrolecode" type="varchar(200)" />
			<column name="taskid" type="varchar(50)" />
			<column name="nexttaskid" type="varchar(200)" />
			<column name="recordtype" type="varchar(50)" />
			<column name="workflowid" type="bigint">
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>

	<changeSet id="51" author="Saikiran.v">
		<createTable tableName="GST_RATES_Temp">
			<column name="Id" type="bigint">
				<constraints primaryKey="true" nullable="false" />
			</column>
			<column name="FromState" type="varchar(8)" />
			<column name="ToState" type="varchar(8)" />
			<column name="TaxType" type="varchar(4)" />
			<column name="CalcType" type="char(1)" />
			<column name="Amount" type="decimal(18,0)" />
			<column name="Percentage" type="decimal(5,2)" />
			<column name="CalcOn" type="varchar(10)" />
			<column name="Active" type="boolean" />
			<column name="version" type="int" />
			<column name="lastmntby" type="bigint" />
			<column name="lastmnton" type="datetime" />
			<column name="recordstatus" type="varchar(50)" />
			<column name="rolecode" type="varchar(100)" />
			<column name="nextrolecode" type="varchar(200)" />
			<column name="taskid" type="varchar(50)" />
			<column name="nexttaskid" type="varchar(200)" />
			<column name="recordtype" type="varchar(50)" />
			<column name="workflowid" type="bigint">
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>

	<changeSet id="52" author="Saikiran.v" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE GST_RATES ADD CONSTRAINT DF_GST_RATES_ACTIVE DEFAULT 1 FOR ACTIVE;
				ALTER TABLE GST_RATES_Temp ADD CONSTRAINT DF_GST_RATES_Temp_ACTIVE DEFAULT 1 FOR ACTIVE;
			]]>
		</sql>
	</changeSet>

	<changeSet id="52" author="Saikiran.v" dbms="postgresql, oracle">
		<addDefaultValue columnName="Active" tableName="GST_RATES" defaultValue="1" />
		<addDefaultValue columnName="Active" tableName="GST_RATES_Temp" defaultValue="1" />
	</changeSet>

	<changeSet id="53" author="Saikiran.v">
		<addNotNullConstraint tableName="GST_RATES" columnName="Active" />
		<addNotNullConstraint tableName="GST_RATES_Temp" columnName="Active" />
	</changeSet>


	<changeSet id="54" author="Saikiran.v">
		<addUniqueConstraint tableName="GST_RATES" columnNames="FromState, ToState, TaxType" />
		<addUniqueConstraint tableName="GST_RATES_Temp" columnNames="FromState, ToState, TaxType" />
	</changeSet>

	<changeSet id="55" author="Saikiran.v">
		<createView viewName="GST_RATES_AView" replaceIfExists="true">
	       		SELECT T1.Id, T1.FromState, T1.ToState, T1.TaxType, T1.CalcType, T1.Amount, T1.Percentage, T1.CalcOn, T1.Active, T1.Version , T1.LastMntBy, T1.LastMntOn,T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId FROM   GST_RATES T1 
	    </createView>
	</changeSet>

	<changeSet id="56" author="Saikiran.v">
		<createView viewName="GST_RATES_View" replaceIfExists="true">
				SELECT T1.Id, T1.FromState, T1.ToState, T1.TaxType, T1.CalcType, T1.Amount, T1.Percentage, T1.CalcOn, T1.Active	, T1.Version , T1.LastMntBy, T1.LastMntOn,T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId FROM    	GST_RATES_Temp T1 
				UNION ALL
				SELECT	T1.Id, T1.FromState, T1.ToState, T1.TaxType, T1.CalcType, T1.Amount, T1.Percentage, T1.CalcOn, T1.Active, T1.Version , T1.LastMntBy, T1.LastMntOn,T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId FROM    	GST_RATES T1 
				WHERE  NOT EXISTS (SELECT 1 FROM GST_RATES_TEMP WHERE Id = T1.Id)
       </createView>
	</changeSet>

	<changeSet id="57" author="saikiran.v">
		<sql>
			<![CDATA[
				update SeqSecGroups set SeqNo = (select max(grpid)+1 from SECGROUPS);
				update SeqSecRights set SeqNo = (select max(RightID)+1 from SECRIGHTS);
				update SeqSecGroupRights set SeqNo = (select max(GRPRIGHTID)+1 from SECGROUPRIGHTS);
				
				INSERT INTO SecGroups VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'GSTRATE_VIEW', 'Allow to view GSTRate', 0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
				INSERT INTO SecGroups VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'GSTRATE_MAKER', 'WF Maker for GSTRate', 0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
				INSERT INTO SecGroups VALUES((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'GSTRATE_APPROVER', 'WF Approver for GSTRate', 0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
				
				INSERT INTO SecRights VALUES((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),0,'menuItem_RMTMasters_GSTRate','MENU',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
				INSERT INTO SecRights VALUES((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),0,'menuItem_RMTMasters_GSTRateEnquiry','MENU',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
				INSERT INTO SecRights VALUES((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),2,'button_GSTRateList_PrintList','GSTRateList',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
				INSERT INTO SecRights VALUES((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),2,'button_GSTRateList_NewGSTRate','GSTRateList',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
				INSERT INTO SecRights VALUES((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),2,'button_GSTRateDialog_btnNew','GSTRateDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
				INSERT INTO SecRights VALUES((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),2,'button_GSTRateDialog_btnEdit','GSTRateDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
				INSERT INTO SecRights VALUES((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),2,'button_GSTRateDialog_btnDelete','GSTRateDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
				INSERT INTO SecRights VALUES((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),2,'button_GSTRateDialog_btnSave','GSTRateDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
				INSERT INTO SecRights VALUES((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'GSTRateDialog_FromState','GSTRateDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
				INSERT INTO SecRights VALUES((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'GSTRateDialog_ToState','GSTRateDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
				INSERT INTO SecRights VALUES((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'GSTRateDialog_TaxType','GSTRateDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
				INSERT INTO SecRights VALUES((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'GSTRateDialog_CalcType','GSTRateDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
				INSERT INTO SecRights VALUES((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'GSTRateDialog_Amount','GSTRateDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
				INSERT INTO SecRights VALUES((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'GSTRateDialog_Percentage','GSTRateDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
				INSERT INTO SecRights VALUES((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'GSTRateDialog_CalcOn','GSTRateDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
				INSERT INTO SecRights VALUES((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'GSTRateDialog_Active','GSTRateDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
				
				INSERT INTO SecGroupRights VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='GSTRATE_MAKER'), (select RightID from SecRights WHERE RightName='menuItem_RMTMasters_GSTRate'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );
				INSERT INTO SecGroupRights VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='GSTRATE_MAKER'), (select RightID from SecRights WHERE RightName='menuItem_RMTMasters_GSTRateEnquiry'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );
				INSERT INTO SecGroupRights VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='GSTRATE_MAKER'), (select RightID from SecRights WHERE RightName='button_GSTRateList_PrintList'),1,0,10000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
				INSERT INTO SecGroupRights VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='GSTRATE_MAKER'), (select RightID from SecRights WHERE RightName='button_GSTRateList_NewGSTRate'),1,0,10000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
				INSERT INTO SecGroupRights VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='GSTRATE_MAKER'), (select RightID from SecRights WHERE RightName='button_GSTRateDialog_btnNew'),1,0,10000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
				INSERT INTO SecGroupRights VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='GSTRATE_MAKER'), (select RightID from SecRights WHERE RightName='button_GSTRateDialog_btnEdit'),1,0,10000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
				INSERT INTO SecGroupRights VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='GSTRATE_MAKER'), (select RightID from SecRights WHERE RightName='button_GSTRateDialog_btnDelete'),1,0,10000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
				INSERT INTO SecGroupRights VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='GSTRATE_MAKER'), (select RightID from SecRights WHERE RightName='button_GSTRateDialog_btnSave'),1,0,10000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
				INSERT INTO SecGroupRights VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='GSTRATE_MAKER'), (select RightID from SecRights WHERE RightName='GSTRateDialog_FromState'),1,0,10000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
				INSERT INTO SecGroupRights VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='GSTRATE_MAKER'), (select RightID from SecRights WHERE RightName='GSTRateDialog_ToState'),1,0,10000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
				INSERT INTO SecGroupRights VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='GSTRATE_MAKER'), (select RightID from SecRights WHERE RightName='GSTRateDialog_TaxType'),1,0,10000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
				INSERT INTO SecGroupRights VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='GSTRATE_MAKER'), (select RightID from SecRights WHERE RightName='GSTRateDialog_CalcType'),1,0,10000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
				INSERT INTO SecGroupRights VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='GSTRATE_MAKER'), (select RightID from SecRights WHERE RightName='GSTRateDialog_Percentage'),1,0,10000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
				INSERT INTO SecGroupRights VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='GSTRATE_MAKER'), (select RightID from SecRights WHERE RightName='GSTRateDialog_CalcOn'),1,0,10000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
				INSERT INTO SecGroupRights VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='GSTRATE_MAKER'), (select max(RightID) from SecRights WHERE RightName='GSTRateDialog_Active'),1,0,10000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
				
				INSERT INTO SecGroupRights VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='GSTRATE_APPROVER'), (select RightID from SecRights WHERE RightName='menuItem_RMTMasters_GSTRate'),1,0,10000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
				INSERT INTO SecGroupRights VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='GSTRATE_APPROVER'), (select RightID from SecRights WHERE RightName='button_GSTRateDialog_btnSave'),1,0,10000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
				
				update SeqSecGroups set SeqNo = (select max(grpid)+1 from SECGROUPS);
				update SeqSecRights set SeqNo = (select max(RightID)+1 from SECRIGHTS);
				update SeqSecGroupRights set SeqNo = (select max(GRPRIGHTID)+1 from SECGROUPRIGHTS);
				]]>
		</sql>
	</changeSet>

	<changeSet id="58" author="Varaprasad.K" dbms="postgresql,oracle">
		<sql>
			<![CDATA[
					ALTER TABLE VERIFICATION_PD DROP CONSTRAINT  PK_VERIFICATION_PD_VERF_ID;
			]]>
		</sql>
	</changeSet>

	<changeSet id="59" author="Varaprasad.K">
		<createView viewName="verification_pd_aview" replaceIfExists="true">
            SELECT pd.verificationid,
                pd.agentcode,
                pd.agentname,
                pd.type,
                pd.verifieddate,
                pd.status,
                pd.reason,
                r1.code reasoncode,
                r1.description reasondesc,
                pd.summaryremarks,
                pd.version,
                pd.lastmntby,
                pd.lastmnton,
                pd.recordstatus,
                pd.rolecode,
                pd.nextrolecode,
                pd.taskid,
                pd.nexttaskid,
                pd.recordtype,
                pd.workflowid,
                pd.addresstype,
                pd.name,
                pd.housenumber,
                pd.flatnumber,
                pd.street,
                pd.addressline1,
                pd.addressline2,
                pd.addressline3,
                pd.addressline4,
                pd.addressline5,
                pd.country,
                pd.province,
                pd.city,
                pd.contactnumber1,
                pd.contactnumber2,
                pd.pobox,
                pd.zipcode,
                c.custcif cif,
                v.custid,
                v.keyreference,
                v.createdon,
                v.agency,
                v.verificationdate,
                a.dealername agencyname,
                v.reinitid,
                a.dealertype,
                r1.reasontypecode,
                country.countrydesc,
                p.cpprovincename provincedesc,
                city.pccityname  citydesc
               FROM verification_pd pd
                 JOIN verifications v ON v.id = pd.verificationid
                 LEFT JOIN amtvehicledealer a ON a.dealerid = v.agency
                 JOIN bmtcountries country ON country.countrycode = pd.country
                 JOIN rmtcountryvsprovince p ON p.cpprovince = pd.province
                 JOIN rmtprovincevscity city ON city.pccity = pd.city
                 LEFT JOIN customers c ON c.custid = v.custid
                 LEFT JOIN reasons_aview r1 ON r1.id = pd.reason
        </createView>
	</changeSet>

	<changeSet id="60" author="Varaprasad.K">
		<createView viewName="verification_pd_view" replaceIfExists="true">
            SELECT pd.verificationid,
                pd.agentcode,
                pd.agentname,
                pd.type,
                pd.verifieddate,
                pd.status,
                pd.reason,
                r1.code reasoncode,
                r1.description reasondesc,
                pd.summaryremarks,
                pd.version,
                pd.lastmntby,
                pd.lastmnton,
                pd.recordstatus,
                pd.rolecode,
                pd.nextrolecode,
                pd.taskid,
                pd.nexttaskid,
                pd.recordtype,
                pd.workflowid,
                pd.addresstype,
                pd.name,
                pd.housenumber,
                pd.flatnumber,
                pd.street,
                pd.addressline1,
                pd.addressline2,
                pd.addressline3,
                pd.addressline4,
                pd.addressline5,
                pd.country,
                pd.province,
                pd.city,
                pd.contactnumber1,
                pd.contactnumber2,
                pd.pobox,
                pd.zipcode,
                c.custcif cif,
                v.custid,
                v.keyreference,
                v.createdon,
                v.agency,
                v.verificationdate,
                a.dealername agencyname,
                v.reinitid,
                a.dealertype,
                r1.reasontypecode,
                country.countrydesc,
                p.cpprovincename provincedesc,
                city.pccityname  citydesc
               FROM verification_pd_temp pd
                 JOIN verifications v ON v.id = pd.verificationid
                 LEFT JOIN amtvehicledealer a ON a.dealerid = v.agency
                 JOIN bmtcountries country ON country.countrycode = pd.country
                 JOIN rmtcountryvsprovince p ON p.cpprovince = pd.province
                 JOIN rmtprovincevscity city ON city.pccity = pd.city
                 LEFT JOIN customers c ON c.custid = v.custid
                 LEFT JOIN reasons_aview r1 ON r1.id = pd.reason
            UNION ALL
             SELECT pd.verificationid,
                pd.agentcode,
                pd.agentname,
                pd.type,
                pd.verifieddate,
                pd.status,
                pd.reason,
                r1.code reasoncode,
                r1.description reasondesc,
                pd.summaryremarks,
                pd.version,
                pd.lastmntby,
                pd.lastmnton,
                pd.recordstatus,
                pd.rolecode,
                pd.nextrolecode,
                pd.taskid,
                pd.nexttaskid,
                pd.recordtype,
                pd.workflowid,
                pd.addresstype,
                pd.name,
                pd.housenumber,
                pd.flatnumber,
                pd.street,
                pd.addressline1,
                pd.addressline2,
                pd.addressline3,
                pd.addressline4,
                pd.addressline5,
                pd.country,
                pd.province,
                pd.city,
                pd.contactnumber1,
                pd.contactnumber2,
                pd.pobox,
                pd.zipcode,
                c.custcif cif,
                v.custid,
                v.keyreference,
                v.createdon,
                v.agency,
                v.verificationdate,
                a.dealername agencyname,
                v.reinitid,
                a.dealertype,
                r1.reasontypecode,
                country.countrydesc,
                p.cpprovincename provincedesc,
                city.pccityname  citydesc
               FROM verification_pd pd
                 JOIN verifications v ON v.id = pd.verificationid
                 LEFT JOIN amtvehicledealer a ON a.dealerid = v.agency
                 JOIN bmtcountries country ON country.countrycode = pd.country
                 JOIN rmtcountryvsprovince p ON p.cpprovince = pd.province
                 JOIN rmtprovincevscity city ON city.pccity = pd.city
                 LEFT JOIN customers c ON c.custid = v.custid
                 LEFT JOIN reasons_aview r1 ON r1.id = pd.reason
      </createView>
	</changeSet>

	<changeSet id="61" author="Varaprasad.K" dbms="postgresql,oracle">
		<sql>
			<![CDATA[
					Alter table verification_pd drop column OwnershipStatus;
					Alter table verification_pd drop column YearsAtPresentAddress;
					Alter table verification_pd drop column PersonMet;
					Alter table verification_pd drop column Relationship;
					Alter table verification_pd drop column ContactNumber;
					Alter table verification_pd drop column NeighbourhoodFeedBack;
					Alter table verification_pd drop column LivingStandard;
					Alter table verification_pd drop column NegativeCheck;
					Alter table verification_pd drop column NoofAttempts;
					Alter table verification_pd drop column ObservationRemarks;
			]]>
		</sql>
	</changeSet>

	<changeSet id="62" author="Varaprasad.K" dbms="postgresql,oracle">
		<sql>
			<![CDATA[
					ALTER TABLE VERIFICATION_PD ADD CONSTRAINT  PK_VERIFICATION_PD_VERF_ID PRIMARY KEY (VERIFICATIONID, VERSION);
			]]>
		</sql>
	</changeSet>

	<changeSet id="63" author="Varaprasad.K" dbms="mssql">
		<sql>
			<![CDATA[
					ALTER TABLE VERIFICATION_PD DROP CONSTRAINT  PK_VERIFICATION_PD_VERF_ID;
			]]>
		</sql>
	</changeSet>

	<changeSet id="64" author="Varaprasad.K" dbms="mssql">
		<sql>
			<![CDATA[		 
					Alter table verification_pd drop column OwnershipStatus;
					Alter table verification_pd drop column YearsAtPresentAddress;
					Alter table verification_pd drop column PersonMet;
					Alter table verification_pd drop column Relationship;
					Alter table verification_pd drop column ContactNumber;
					Alter table verification_pd drop column NeighbourhoodFeedBack;
					Alter table verification_pd drop column LivingStandard;
					Alter table verification_pd drop column NegativeCheck;
					Alter table verification_pd drop column NoofAttempts;
					Alter table verification_pd drop column ObservationRemarks;
			]]>
		</sql>
	</changeSet>

	<changeSet id="65" author="Varaprasad.K" dbms="mssql">
		<sql>
			<![CDATA[	
					ALTER TABLE verification_pd ADD CONSTRAINT  PK_VERIFICATION_PD_VERF_ID PRIMARY KEY(VERIFICATIONID, VERSION);
			]]>
		</sql>
	</changeSet>

	<changeSet id="66" author="Varaprasad.K" dbms="postgresql,oracle">
		<sql>
			<![CDATA[
					ALTER TABLE VERIFICATION_PD_TEMP DROP CONSTRAINT  PK_VERIFICATION_PD_TMP_VERF_ID;
			]]>
		</sql>
	</changeSet>

	<changeSet id="67" author="Varaprasad.K" dbms="postgresql,oracle">
		<sql>
			<![CDATA[
					Alter table verification_pd_temp drop column OwnershipStatus;
					Alter table verification_pd_temp drop column YearsAtPresentAddress;
					Alter table verification_pd_temp drop column PersonMet;
					Alter table verification_pd_temp drop column Relationship;
					Alter table verification_pd_temp drop column ContactNumber;
					Alter table verification_pd_temp drop column NeighbourhoodFeedBack;
					Alter table verification_pd_temp drop column LivingStandard;
					Alter table verification_pd_temp drop column NegativeCheck;
					Alter table verification_pd_temp drop column NoofAttempts;
					Alter table verification_pd_temp drop column ObservationRemarks;
				]]>
		</sql>
	</changeSet>

	<changeSet id="68" author="Varaprasad.K" dbms="postgresql,oracle">
		<sql>
			<![CDATA[
					ALTER TABLE VERIFICATION_PD_TEMP ADD CONSTRAINT  PK_VERIFICATION_PD_TMP_VERF_ID PRIMARY KEY (VERIFICATIONID, VERSION);
			]]>
		</sql>
	</changeSet>

	<changeSet id="69" author="Varaprasad.K" dbms="mssql">
		<sql>
			<![CDATA[
					ALTER TABLE VERIFICATION_PD DROP CONSTRAINT  PK_VERIFICATION_PD_VERF_ID;
					]]>
		</sql>
	</changeSet>

	<changeSet id="70" author="Varaprasad.K" dbms="mssql">
		<sql>
			<![CDATA[	 
					Alter table verification_pd_temp drop column OwnershipStatus;
					Alter table verification_pd_temp drop column YearsAtPresentAddress;
					Alter table verification_pd_temp drop column PersonMet;
					Alter table verification_pd_temp drop column Relationship;
					Alter table verification_pd_temp drop column ContactNumber;
					Alter table verification_pd_temp drop column NeighbourhoodFeedBack;
					Alter table verification_pd_temp drop column LivingStandard;
					Alter table verification_pd_temp drop column NegativeCheck;
					Alter table verification_pd_temp drop column NoofAttempts;
					Alter table verification_pd_temp drop column ObservationRemarks;
			]]>
		</sql>
	</changeSet>

	<changeSet id="71" author="Varaprasad.K" dbms="mssql">
		<sql>
			<![CDATA[		
					ALTER TABLE VERIFICATION_PD_TEMP ADD CONSTRAINT  PK_VERIFICATION_PD_TMP_VERF_ID PRIMARY KEY (VERIFICATIONID, VERSION);
			]]>
		</sql>
	</changeSet>

	<changeSet id="72" author="Saikiran.v">
		<sql>
			<![CDATA[
				INSERT INTO SecGroupRights VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='GSTRATE_MAKER'), (select RightID from SecRights WHERE RightName='GSTRateDialog_Amount'),1,0,10000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
			]]>
		</sql>
	</changeSet>

	<changeSet id="73" author="Saikiran.v">
		<createView viewName="GST_RATES_AView" replaceIfExists="true">
	       	SELECT T1.Id, 
				T1.FromState,
				T2.CPProvinceName FromStateName, 
				T1.ToState,
				T3.CPProvinceName ToStateName, 
				T1.TaxType, 
				T1.CalcType, 
				T1.Amount, 
				T1.Percentage, 
				T1.CalcOn, 
				T1.Active, 
				T1.Version , 
				T1.LastMntBy, 
				T1.LastMntOn,
				T1.RecordStatus, 
				T1.RoleCode, 
				T1.NextRoleCode, 
				T1.TaskId, 
				T1.NextTaskId, 
				T1.RecordType, 
				T1.WorkflowId 
	       	FROM   GST_RATES T1 
	       		left JOIN RMTCOUNTRYVSPROVINCE T2 ON T2.CPPROVINCE =  T1.fromstate
				left JOIN RMTCOUNTRYVSPROVINCE T3 ON T3.CPPROVINCE =  T1.tostate
	    </createView>
	</changeSet>

	<changeSet id="74" author="Saikiran.v">
		<createView viewName="GST_RATES_View" replaceIfExists="true">
			SELECT T1.Id, 
				T1.FromState,
				T2.CPProvinceName FromStateName, 
				T1.ToState,
				T3.CPProvinceName ToStateName, 
				T1.TaxType, 
				T1.CalcType, 
				T1.Amount, 
				T1.Percentage, 
				T1.CalcOn, 
				T1.Active, 
				T1.Version, 
				T1.LastMntBy, 
				T1.LastMntOn,
				T1.RecordStatus, 
				T1.RoleCode, 
				T1.NextRoleCode, 
				T1.TaskId, 
				T1.NextTaskId, 
				T1.RecordType, 
				T1.WorkflowId 
			FROM GST_RATES_Temp T1
				left JOIN RMTCOUNTRYVSPROVINCE T2 ON T2.CPPROVINCE =  T1.fromstate
				left JOIN RMTCOUNTRYVSPROVINCE T3 ON T3.CPPROVINCE =  T1.tostate 
				UNION ALL
			SELECT	T1.Id, 
				T1.FromState,
				T2.CPProvinceName FromStateName,  
				T1.ToState,
				T3.CPProvinceName ToStateName, 
				T1.TaxType, 
				T1.CalcType, 
				T1.Amount, 
				T1.Percentage, 
				T1.CalcOn, 
				T1.Active, 
				T1.Version , 
				T1.LastMntBy, 
				T1.LastMntOn,
				T1.RecordStatus, 
				T1.RoleCode, 
				T1.NextRoleCode, 
				T1.TaskId, 
				T1.NextTaskId, 
				T1.RecordType, 
				T1.WorkflowId 
			FROM GST_RATES T1
				left JOIN RMTCOUNTRYVSPROVINCE T2 ON T2.CPPROVINCE =  T1.fromstate
				left JOIN RMTCOUNTRYVSPROVINCE T3 ON T3.CPPROVINCE =  T1.tostate 
				WHERE  NOT EXISTS (SELECT 1 FROM GST_RATES_TEMP WHERE Id = T1.Id)
       </createView>
	</changeSet>

	<changeSet id="75" author="Saikiran.v">
		<createView viewName="finadvancepayments_aview" replaceIfExists="true">
				SELECT t1.finreference,
				t1.paymentid,
				t1.paymentseq,
				t1.paymentdetail,
				t1.amttobereleased,
				t1.liabilityholdname,
				t1.transactionref,
				t1.beneficiaryname,
				t1.beneficiaryaccno,
				t1.reenterbeneficiaryaccno,
				t1.description,
				t1.paymenttype,
				t1.llreferenceno,
				t1.lldate,
				t1.custcontribution,
				t1.sellercontribution,
				t1.remarks,
				t1.disbdate,
				t1.disbseq,
				t1.version,
				t1.lastmntby,
				t1.lastmnton,
				t1.recordstatus,
				t1.rolecode,
				t1.nextrolecode,
				t1.taskid,
				t1.nexttaskid,
				t1.recordtype,
				t1.workflowid,
				t1.bankcode,
				t1.payableloc,
				t1.printingloc,
				t1.valuedate,
				t1.bankbranchid,
				t1.phonecountrycode,
				t1.phoneareacode,
				t1.phonenumber,
				t1.clearingdate,
				t1.status,
				t1.active,
				t1.inputdate,
				t1.disbccy,
				t1.poissued,
				t3.bankcode  branchbankcode,
				t31.bankname  branchbankname,
				t3.branchcode,
				t3.branchdesc,
				t3.ifsc,
				t3.city,
				t4.bankname,
				t1.partnerbankid,
				t5.partnerbankcode,
				t5.partnerbankname,
				t1.linkedtranid,
				t5.actype  partnerbankactype,
				t5.accountno  partnerbankac,
				t6.BranchDesc PrintingLocDesc
			   FROM finadvancepayments t1
				 LEFT JOIN bankbranches t3 ON t1.bankbranchid = t3.bankbranchid
				 LEFT JOIN bmtbankdetail t31 ON t31.bankcode = t3.bankcode
				 LEFT JOIN bmtbankdetail t4 ON t1.bankcode = t4.bankcode
				 LEFT JOIN partnerbanks t5 ON t5.partnerbankid = t1.partnerbankid
				 LEFT JOIN BankBranches t6 ON t6.BranchCode = t1.printingloc
			 </createView>
	</changeSet>

	<changeSet id="76" author="Saikiran.v">
		<createView viewName="finadvancepayments_Tview" replaceIfExists="true">
	 	 SELECT t1.finreference,
	   			t1.paymentid,
	   			t1.paymentseq,
	   			t1.paymentdetail,
	    		t1.amttobereleased,
	            t1.liabilityholdname,
	   			t1.transactionref,
	   			t1.beneficiaryname,
	   			t1.beneficiaryaccno,
	   			t1.reenterbeneficiaryaccno,
	   			t1.description,
	    		t1.paymenttype,
	    		t1.llreferenceno,
	    		t1.lldate,
	    		t1.custcontribution,
	   			t1.sellercontribution,
			    t1.remarks,
			    t1.disbdate,
			    t1.disbseq,
			    t1.version,
			    t1.lastmntby,
			    t1.lastmnton,
			    t1.recordstatus,
			    t1.rolecode,
			    t1.nextrolecode,
			    t1.taskid,
			    t1.nexttaskid,
			    t1.recordtype,
			    t1.workflowid,
			    t1.bankcode,
			    t1.payableloc,
			    t1.printingloc,
			    t1.valuedate,
			    t1.bankbranchid,
			    t1.phonecountrycode,
			    t1.phoneareacode,
			    t1.phonenumber,
			    t1.clearingdate,
			    t1.status,
			    t1.active,
			    t1.inputdate,
			    t1.disbccy,
			    t1.poissued,
			    t3.bankcode AS branchbankcode,
			    t31.bankname AS branchbankname,
			    t3.branchcode,
			    t3.branchdesc,
			    t3.ifsc,
			    t3.city,
			    t4.bankname,
			    t1.partnerbankid,
			    t5.partnerbankcode,
			    t5.partnerbankname,
			    t1.linkedtranid,
			    t5.actype AS partnerbankactype,
			    t5.accountno AS partnerbankac,
				t6.BranchDesc PrintingLocDesc
			   FROM finadvancepayments_temp t1
			     LEFT JOIN bankbranches t3 ON t1.bankbranchid = t3.bankbranchid
			     LEFT JOIN bmtbankdetail t31 ON t31.bankcode = t3.bankcode
			     LEFT JOIN bmtbankdetail t4 ON t1.bankcode = t4.bankcode
			     LEFT JOIN partnerbanks t5 ON t5.partnerbankid = t1.partnerbankid
				 LEFT JOIN BankBranches t6 ON t6.BranchCode = t1.printingloc
		</createView>
	</changeSet>

	<changeSet id="77" author="Saikiran.v">
		<createView viewName="finadvancepayments_view" replaceIfExists="true">
		SELECT t1.finreference,
			    t1.paymentid,
			    t1.paymentseq,
			    t1.paymentdetail,
			    t1.amttobereleased,
			    t1.liabilityholdname,
			    t1.transactionref,
			    t1.beneficiaryname,
			    t1.beneficiaryaccno,
			    t1.reenterbeneficiaryaccno,
			    t1.description,
			    t1.paymenttype,
			    t1.llreferenceno,
			    t1.lldate,
			    t1.custcontribution,
			    t1.sellercontribution,
			    t1.remarks,
			    t1.disbdate,
			    t1.disbseq,
			    t1.version,
			    t1.lastmntby,
			    t1.lastmnton,
			    t1.recordstatus,
			    t1.rolecode,
			    t1.nextrolecode,
			    t1.taskid,
			    t1.nexttaskid,
			    t1.recordtype,
			    t1.workflowid,
			    t1.bankcode,
			    t1.payableloc,
			    t1.printingloc,
			    t1.valuedate,
			    t1.bankbranchid,
			    t1.phonecountrycode,
			    t1.phoneareacode,
			    t1.phonenumber,
			    t1.clearingdate,
			    t1.status,
			    t1.active,
			    t1.inputdate,
			    t1.disbccy,
			    t1.poissued,
			    t3.bankcode AS branchbankcode,
			    t31.bankname AS branchbankname,
			    t3.branchcode,
			    t3.branchdesc,
			    t3.ifsc,
			    t3.city,
			    t4.bankname,
			    t1.partnerbankid,
			    t5.partnerbankcode,
			    t5.partnerbankname,
			    t1.linkedtranid,
			    t5.actype AS partnerbankactype,
			    t5.accountno AS partnerbankac,
				t6.BranchDesc PrintingLocDesc
			   FROM finadvancepayments_temp t1
			     LEFT JOIN bankbranches t3 ON t1.bankbranchid = t3.bankbranchid
			     LEFT JOIN bmtbankdetail t31 ON t31.bankcode = t3.bankcode
			     LEFT JOIN bmtbankdetail t4 ON t1.bankcode = t4.bankcode
			     LEFT JOIN partnerbanks t5 ON t5.partnerbankid = t1.partnerbankid
				 LEFT JOIN BankBranches t6 ON t6.BranchCode = t1.printingloc
			UNION ALL
			 SELECT t1.finreference,
			    t1.paymentid,
			    t1.paymentseq,
			    t1.paymentdetail,
			    t1.amttobereleased,
			    t1.liabilityholdname,
			    t1.transactionref,
			    t1.beneficiaryname,
			    t1.beneficiaryaccno,
			    t1.reenterbeneficiaryaccno,
			    t1.description,
			    t1.paymenttype,
			    t1.llreferenceno,
			    t1.lldate,
			    t1.custcontribution,
			    t1.sellercontribution,
			    t1.remarks,
			    t1.disbdate,
			    t1.disbseq,
			    t1.version,
			    t1.lastmntby,
			    t1.lastmnton,
			    t1.recordstatus,
			    t1.rolecode,
			    t1.nextrolecode,
			    t1.taskid,
			    t1.nexttaskid,
			    t1.recordtype,
			    t1.workflowid,
			    t1.bankcode,
			    t1.payableloc,
			    t1.printingloc,
			    t1.valuedate,
			    t1.bankbranchid,
			    t1.phonecountrycode,
			    t1.phoneareacode,
			    t1.phonenumber,
			    t1.clearingdate,
			    t1.status,
			    t1.active,
			    t1.inputdate,
			    t1.disbccy,
			    t1.poissued,
			    t3.bankcode AS branchbankcode,
			    t31.bankname AS branchbankname,
			    t3.branchcode,
			    t3.branchdesc,
			    t3.ifsc,
			    t3.city,
			    t4.bankname,
			    t1.partnerbankid,
			    t5.partnerbankcode,
			    t5.partnerbankname,
			    t1.linkedtranid,
			    t5.actype AS partnerbankactype,
			    t5.accountno AS partnerbankac,
				t6.BranchDesc PrintingLocDesc
			   FROM finadvancepayments t1
			     LEFT JOIN bankbranches t3 ON t1.bankbranchid = t3.bankbranchid
			     LEFT JOIN bmtbankdetail t31 ON t31.bankcode = t3.bankcode
			     LEFT JOIN bmtbankdetail t4 ON t1.bankcode = t4.bankcode
			     LEFT JOIN partnerbanks t5 ON t5.partnerbankid = t1.partnerbankid
				 LEFT JOIN BankBranches t6 ON t6.BranchCode = t1.printingloc
			  WHERE NOT (EXISTS ( SELECT 1
			           FROM finadvancepayments_temp
			          WHERE finadvancepayments_temp.finreference = t1.finreference AND finadvancepayments_temp.paymentseq = t1.paymentseq))
			 </createView>
	</changeSet>

	<changeSet id="78" author="Varaprasad.k">
		<createView viewName="finexcessamount_lovview" replaceIfExists="true">
        SELECT finexcessamount.excessid,
               finexcessamount.finreference,
               finexcessamount.amounttype,
               round(finexcessamount.amount / 100,2) AS amount,
               round(finexcessamount.utilisedamt / 100,2) AS utilisedamt,
               round(finexcessamount.reservedamt / 100,2) AS reservedamt,
               round(finexcessamount.balanceamt / 100,2) AS balanceamt
        FROM finexcessamount           
    </createView>
	</changeSet>
	
</databaseChangeLog>