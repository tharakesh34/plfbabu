<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">
	<property name="add.schema" value="dbo." dbms="mssql" />
	<property name="add.schema" value=" " dbms="oracle" />
	<property name="call.substr" value="substring" dbms="mssql" />
	<property name="call.substr" value="substr" dbms="oracle" />
	<property name="call.substr" value="substring" dbms="postgresql" />
	<property name="call.auditdb" value="PFFBFSQCAudit.." dbms="mssql" />
	<property name="call.auditdb" value=" " dbms="oracle" />
	<property name="call.concatenate" value="+" dbms="mssql" />
	<property name="call.concatenate" value="||" dbms="oracle" />
	<property name="call.concatenate" value="||" dbms="postgresql" />
	<property name="call.collength" value="LEN" dbms="mssql" />
	<property name="call.collength" value="LENGTH" dbms="oracle" />
	<property name="call.collength" value="LENGTH" dbms="postgresql" />
	<property name="call.date" value="getdate()" dbms="mssql" />
	<property name="call.date" value="sysdate" dbms="oracle" />
	<property name="call.date" value="now()::timestamp" dbms="postgresql" />

	<changeSet id="01" author="Varaprasad.K">
		<createTable tableName="verification_pd">
			<column name="VerificationId" type="bigint">
				<constraints nullable="false" primaryKey="true" primaryKeyName="pk_verification_pd_verf_id" />
			</column>
			<column name="AgentCode" type="varchar(20)" />
			<column name="AgentName" type="varchar(50)" />
			<column name="Type" type="int" defaultValue="0" />
			<column name="VerifiedDate" type="datetime" />
			<column name="Status" type="int" defaultValue="0" />
			<column name="Reason" type="bigint" />
			<column name="SummaryRemarks" type="varchar(500)" />

			<column name="Version" type="int" defaultValue="0">
				<constraints nullable="false" primaryKey="true" primaryKeyName="df_verfctions_pd_ver" />
			</column>
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkflowId" type="bigint" />
			<column name="AddressType" type="varchar(8)">
				<constraints nullable="false" />
			</column>
			<column name="Name" type="varchar(200)">
				<constraints nullable="false" />
			</column>
			<column name="HouseNumber" type="varchar(50)" />
			<column name="FlatNumber" type="varchar(50)" />
			<column name="Street" type="varchar(50)" />
			<column name="AddressLine1" type="varchar(50)" />
			<column name="AddressLine2" type="varchar(50)" />
			<column name="AddressLine3" type="varchar(50)" />
			<column name="AddressLine4" type="varchar(50)" />
			<column name="AddressLine5" type="varchar(50)" />
			<column name="Country" type="char(2)" />
			<column name="Province" type="varchar(8)" />
			<column name="City" type="varchar(8)" />
			<column name="ContactNumber1" type="varchar(20)" />
			<column name="ContactNumber2" type="varchar(20)" />
			<column name="PoBox" type="varchar(20)" />
			<column name="ZipCode" type="varchar(20)" />
			<!-- Observations -->
			<column name="OwnershipStatus" type="int" defaultValue="0">
				<constraints primaryKey="true" primaryKeyName="df_verfctions_pd_Owner" />
			</column>
			<column name="YearsAtPresentAddress" type="int">
				<constraints primaryKey="true" primaryKeyName="df_verfctions_pd_YearsAt" />
			</column>
			<column name="PersonMet" type="varchar(50)" />
			<column name="Relationship" type="varchar(8)" />
			<column name="ContactNumber" type="varchar(20)" />
			<column name="NeighbourhoodFeedBack" type="int" defaultValue="0">
				<constraints primaryKey="true" primaryKeyName="df_verfctions_pd_nhf" />
			</column>
			<column name="LivingStandard" type="int" defaultValue="0">
				<constraints primaryKey="true" primaryKeyName="df_verfctions_pd_lsd" />
			</column>
			<column name="NegativeCheck" type="smallint" defaultValue="0">
				<constraints primaryKey="true" primaryKeyName="df_verfctions_pd_ncheck" />
			</column>
			<column name="NoofAttempts" type="int" defaultValue="0">
				<constraints primaryKey="true" primaryKeyName="df_verfctions_pd_noofat" />
			</column>
			<column name="ObservationRemarks" type="varchar(500)" />
		</createTable>
	</changeSet>

	<changeSet id="01_postgresql" author="Varaprasad.K" dbms="postgresql">
		<modifyDataType tableName="Verification_pd" columnName="Country" newDataType="citext" />
		<modifyDataType tableName="Verification_pd" columnName="Province" newDataType="citext" />
		<modifyDataType tableName="Verification_pd" columnName="City" newDataType="citext" />
	</changeSet>

	<changeSet id="02" author="Varaprasad">
		<addForeignKeyConstraint constraintName="fk_verification_pd_country" referencedTableName="bmtcountries"
			referencedColumnNames="countrycode" baseTableName="Verification_pd" baseColumnNames="Country" />

		<addForeignKeyConstraint constraintName="fk_verification_pd_province" referencedTableName="rmtcountryvsprovince"
			referencedColumnNames="cpcountry, cpprovince" baseTableName="Verification_pd" baseColumnNames="Country, Province" />


		<addForeignKeyConstraint constraintName="fk_verification_pd_city" referencedTableName="rmtprovincevscity"
			referencedColumnNames="pccity" baseTableName="Verification_pd" baseColumnNames="City" />

		<addForeignKeyConstraint constraintName="fk_verification_pd_relship" referencedTableName="bmtprelationcodes"
			referencedColumnNames="prelationcode" baseTableName="Verification_pd" baseColumnNames="Relationship" />

	</changeSet>
	<changeSet id="03" author="Varaprasad.K" dbms="postgresql, oracle">
		<addDefaultValue columnName="OwnershipStatus" tableName="verification_pd" defaultValue="0" />
		<addDefaultValue columnName="YearsAtPresentAddress" tableName="verification_pd" defaultValue="0" />
		<addDefaultValue columnName="NeighbourhoodFeedBack" tableName="verification_pd" defaultValue="0" />
		<addDefaultValue columnName="LivingStandard" tableName="verification_pd" defaultValue="0" />
		<addDefaultValue columnName="NegativeCheck" tableName="verification_pd" defaultValue="0" />
		<addDefaultValue columnName="NoofAttempts" tableName="verification_pd" defaultValue="0" />
	</changeSet>

	<changeSet id="03" author="Varaprasad.K" dbms="mssql">
		ALTER TABLE VERIFICATION_PD ADD CONSTRAINT DF_VERIFICATION_PD_OWNERSHIPSTATUS DEFAULT 0 FOR OWNERSHIPSTATUS;
	</changeSet>

	<changeSet id="04" author="Varaprasad.K">
		<createTable tableName="verification_pd_temp">
			<column name="VerificationId" type="bigint">
				<constraints nullable="false" primaryKey="true" primaryKeyName="pk_verification_pd_tmp_verf_id" />
			</column>
			<column name="AgentCode" type="varchar(20)" />
			<column name="AgentName" type="varchar(50)" />
			<column name="Type" type="int" defaultValue="0" />
			<column name="VerifiedDate" type="datetime" />
			<column name="Status" type="int" defaultValue="0" />
			<column name="Reason" type="bigint" />
			<column name="SummaryRemarks" type="varchar(500)" />
			<column name="Version" type="int" defaultValue="0">
				<constraints nullable="false" primaryKey="true" primaryKeyName="df_verfctions_pd_tmp_ver" />
			</column>
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkflowId" type="bigint" />
			<column name="AddressType" type="varchar(8)">
				<constraints nullable="false" />
			</column>
			<column name="Name" type="varchar(200)">
				<constraints nullable="false" />
			</column>
			<column name="HouseNumber" type="varchar(50)" />
			<column name="FlatNumber" type="varchar(50)" />
			<column name="Street" type="varchar(50)" />
			<column name="AddressLine1" type="varchar(50)" />
			<column name="AddressLine2" type="varchar(50)" />
			<column name="AddressLine3" type="varchar(50)" />
			<column name="AddressLine4" type="varchar(50)" />
			<column name="AddressLine5" type="varchar(50)" />
			<column name="Country" type="char(2)" />
			<column name="Province" type="varchar(8)" />
			<column name="City" type="varchar(8)" />
			<column name="ContactNumber1" type="varchar(20)" />
			<column name="ContactNumber2" type="varchar(20)" />
			<column name="PoBox" type="varchar(20)" />
			<column name="ZipCode" type="varchar(20)" />
			<!-- Observations -->
			<column name="OwnershipStatus" type="int" defaultValue="0">
				<constraints primaryKey="true" primaryKeyName="df_verfctions_pd_tmp_Owner" />
			</column>
			<column name="YearsAtPresentAddress" type="int">
				<constraints primaryKey="true" primaryKeyName="df_verfctions_pd_tmp_YearsAt" />
			</column>
			<column name="PersonMet" type="varchar(50)" />
			<column name="Relationship" type="varchar(8)" />
			<column name="ContactNumber" type="varchar(20)" />
			<column name="NeighbourhoodFeedBack" type="int" defaultValue="0">
				<constraints primaryKey="true" primaryKeyName="df_verfctions_pd_tmp_nhf" />
			</column>
			<column name="LivingStandard" type="int" defaultValue="0">
				<constraints primaryKey="true" primaryKeyName="df_verfctions_pd_tmp_lsd" />
			</column>
			<column name="NegativeCheck" type="smallint" defaultValue="0">
				<constraints primaryKey="true" primaryKeyName="df_verfctions_pd_tmp_ncheck" />
			</column>
			<column name="NoofAttempts" type="int" defaultValue="0">
				<constraints primaryKey="true" primaryKeyName="df_verfctions_pd_tmp_noofat" />
			</column>
			<column name="ObservationRemarks" type="varchar(500)" />
		</createTable>
	</changeSet>

	<changeSet id="05" author="Varaprasad.K" dbms="postgresql">
		<modifyDataType tableName="Verification_pd_temp" columnName="Country" newDataType="citext" />
		<modifyDataType tableName="Verification_pd_temp" columnName="Province" newDataType="citext" />
		<modifyDataType tableName="Verification_pd_temp" columnName="City" newDataType="citext" />
	</changeSet>
	<changeSet id="06" author="Varaprasad">
		<addForeignKeyConstraint constraintName="fk_verification_pd_tmp_country" referencedTableName="bmtcountries"
			referencedColumnNames="countrycode" baseTableName="Verification_pd_temp" baseColumnNames="Country" />

		<addForeignKeyConstraint constraintName="fk_verification_pd_tmp_prvince" referencedTableName="rmtcountryvsprovince"
			referencedColumnNames="cpcountry, cpprovince" baseTableName="Verification_pd_temp" baseColumnNames="Country, Province" />


		<addForeignKeyConstraint constraintName="fk_verification_pd_tmp_city" referencedTableName="rmtprovincevscity"
			referencedColumnNames="pccity" baseTableName="Verification_pd_temp" baseColumnNames="City" />

		<addForeignKeyConstraint constraintName="fk_verification_pd_tmp_relship" referencedTableName="bmtprelationcodes"
			referencedColumnNames="prelationcode" baseTableName="Verification_pd_temp" baseColumnNames="Relationship" />

	</changeSet>
	<changeSet id="07" author="Varaprasad.K" dbms="postgresql, oracle">
		<addDefaultValue columnName="OwnershipStatus" tableName="verification_pd_temp" defaultValue="0" />
		<addDefaultValue columnName="YearsAtPresentAddress" tableName="verification_pd_temp" defaultValue="0" />
		<addDefaultValue columnName="NeighbourhoodFeedBack" tableName="verification_pd_temp" defaultValue="0" />
		<addDefaultValue columnName="LivingStandard" tableName="verification_pd_temp" defaultValue="0" />
		<addDefaultValue columnName="NegativeCheck" tableName="verification_pd_temp" defaultValue="0" />
		<addDefaultValue columnName="NoofAttempts" tableName="verification_pd_temp" defaultValue="0" />
	</changeSet>

	<changeSet id="08" author="Varaprasad.K">
		<createView viewName="verification_pd_aview" replaceIfExists="true">
			SELECT pd.verificationid,
				pd.agentcode,
				pd.agentname,
				pd.type,
				pd.verifieddate,
				pd.status,
				pd.reason,
				r1.code reasoncode,
				r1.description reasondesc,
				pd.summaryremarks,
				pd.version,
				pd.lastmntby,
				pd.lastmnton,
				pd.recordstatus,
				pd.rolecode,
				pd.nextrolecode,
				pd.taskid,
				pd.nexttaskid,
				pd.recordtype,
				pd.workflowid,
				pd.addresstype,
				pd.name,
				pd.housenumber,
				pd.flatnumber,
				pd.street,
				pd.addressline1,
				pd.addressline2,
				pd.addressline3,
				pd.addressline4,
				pd.addressline5,
				pd.country,
				pd.province,
				pd.city,
				pd.contactnumber1,
				pd.contactnumber2,
				pd.pobox,
				pd.zipcode,
				pd.ownershipstatus,
				pd.yearsatpresentaddress,
				pd.personmet,
				pd.relationship,
				r2.prelationdesc lovrelationdesc,
				pd.contactnumber,
				pd.neighbourhoodfeedback,
				pd.livingstandard,
				pd.negativecheck,
				pd.noofattempts,
				pd.observationremarks,
				c.custcif cif,
				v.custid,
				v.keyreference,
				v.createdon,
				v.agency,
				v.verificationdate,
				a.dealername agencyname,
				v.reinitid,
				a.dealertype,
				r1.reasontypecode,
				country.countrydesc,
				p.cpprovincename provincedesc,
				city.pccityname  citydesc
			   FROM verification_pd pd
				 JOIN verifications v ON v.id = pd.verificationid
				 LEFT JOIN amtvehicledealer a ON a.dealerid = v.agency
				 JOIN bmtcountries country ON country.countrycode = pd.country
				 JOIN rmtcountryvsprovince p ON p.cpprovince = pd.province
				 JOIN rmtprovincevscity city ON city.pccity = pd.city
				 LEFT JOIN customers c ON c.custid = v.custid
				 LEFT JOIN reasons_aview r1 ON r1.id = pd.reason
				 LEFT JOIN bmtprelationcodes r2 ON r2.prelationcode = pd.relationship
		</createView>
	</changeSet>
	<changeSet id="09" author="Varaprasad.K">
		<createView viewName="verification_pd_view" replaceIfExists="true">
			SELECT pd.verificationid,
				pd.agentcode,
				pd.agentname,
				pd.type,
				pd.verifieddate,
				pd.status,
				pd.reason,
				r1.code reasoncode,
				r1.description reasondesc,
				pd.summaryremarks,
				pd.version,
				pd.lastmntby,
				pd.lastmnton,
				pd.recordstatus,
				pd.rolecode,
				pd.nextrolecode,
				pd.taskid,
				pd.nexttaskid,
				pd.recordtype,
				pd.workflowid,
				pd.addresstype,
				pd.name,
				pd.housenumber,
				pd.flatnumber,
				pd.street,
				pd.addressline1,
				pd.addressline2,
				pd.addressline3,
				pd.addressline4,
				pd.addressline5,
				pd.country,
				pd.province,
				pd.city,
				pd.contactnumber1,
				pd.contactnumber2,
				pd.pobox,
				pd.zipcode,
				pd.ownershipstatus,
				pd.yearsatpresentaddress,
				pd.personmet,
				pd.relationship,
				r2.prelationdesc lovrelationdesc,
				pd.contactnumber,
				pd.neighbourhoodfeedback,
				pd.livingstandard,
				pd.negativecheck,
				pd.noofattempts,
				pd.observationremarks,
				c.custcif cif,
				v.custid,
				v.keyreference,
				v.createdon,
				v.agency,
				v.verificationdate,
				a.dealername agencyname,
				v.reinitid,
				a.dealertype,
				r1.reasontypecode,
				country.countrydesc,
				p.cpprovincename provincedesc,
				city.pccityname  citydesc
			   FROM verification_pd_temp pd
				 JOIN verifications v ON v.id = pd.verificationid
				 LEFT JOIN amtvehicledealer a ON a.dealerid = v.agency
				 JOIN bmtcountries country ON country.countrycode = pd.country
				 JOIN rmtcountryvsprovince p ON p.cpprovince = pd.province
				 JOIN rmtprovincevscity city ON city.pccity = pd.city
				 LEFT JOIN customers c ON c.custid = v.custid
				 LEFT JOIN reasons_aview r1 ON r1.id = pd.reason
				 LEFT JOIN bmtprelationcodes r2 ON r2.prelationcode = pd.relationship
			UNION ALL
			 SELECT pd.verificationid,
				pd.agentcode,
				pd.agentname,
				pd.type,
				pd.verifieddate,
				pd.status,
				pd.reason,
				r1.code reasoncode,
				r1.description reasondesc,
				pd.summaryremarks,
				pd.version,
				pd.lastmntby,
				pd.lastmnton,
				pd.recordstatus,
				pd.rolecode,
				pd.nextrolecode,
				pd.taskid,
				pd.nexttaskid,
				pd.recordtype,
				pd.workflowid,
				pd.addresstype,
				pd.name,
				pd.housenumber,
				pd.flatnumber,
				pd.street,
				pd.addressline1,
				pd.addressline2,
				pd.addressline3,
				pd.addressline4,
				pd.addressline5,
				pd.country,
				pd.province,
				pd.city,
				pd.contactnumber1,
				pd.contactnumber2,
				pd.pobox,
				pd.zipcode,
				pd.ownershipstatus,
				pd.yearsatpresentaddress,
				pd.personmet,
				pd.relationship,
				r2.prelationdesc lovrelationdesc,
				pd.contactnumber,
				pd.neighbourhoodfeedback,
				pd.livingstandard,
				pd.negativecheck,
				pd.noofattempts,
				pd.observationremarks,
				c.custcif cif,
				v.custid,
				v.keyreference,
				v.createdon,
				v.agency,
				v.verificationdate,
				a.dealername agencyname,
				v.reinitid,
				a.dealertype,
				r1.reasontypecode,
				country.countrydesc,
				p.cpprovincename provincedesc,
				city.pccityname  citydesc
			   FROM verification_pd pd
				 JOIN verifications v ON v.id = pd.verificationid
				 LEFT JOIN amtvehicledealer a ON a.dealerid = v.agency
				 JOIN bmtcountries country ON country.countrycode = pd.country
				 JOIN rmtcountryvsprovince p ON p.cpprovince = pd.province
				 JOIN rmtprovincevscity city ON city.pccity = pd.city
				 LEFT JOIN customers c ON c.custid = v.custid
				 LEFT JOIN reasons_aview r1 ON r1.id = pd.reason
				 LEFT JOIN bmtprelationcodes r2 ON r2.prelationcode = pd.relationship
		</createView>
	</changeSet>
	<changeSet id="09" author="Varaprasad.K">
		<sql>
			<![CDATA[
			
			    delete from secrolegroups where grpid = (select grpid from secgroups where grpcode='PersonalDiscussion_MAKER') and roleid = (select roleid from secroles where rolecd='MSTGRP1_MAKER');
				delete from secrolegroups where grpid = (select grpid from secgroups where grpcode='PersonalDiscussion_APPROVER') and roleid = (select roleid from secroles where rolecd='MSTGRP1_APPROVER');
				
				delete from secgrouprights where grpid = (select grpid from secgroups where grpcode='PersonalDiscussion_MAKER');
				delete from secgrouprights where grpid = (select grpid from secgroups where grpcode='PersonalDiscussion_APPROVER');
				
				delete from secgroups where grpcode = 'PersonalDiscussion_VIEW';
				delete from secgroups where grpcode = 'PersonalDiscussion_MAKER';
				delete from secgroups where grpcode = 'PersonalDiscussion_APPROVER';
				
				--SecGroups
				update seqsecgroups set seqno=(select max(grpid) from secgroups_view);
				insert into secgroups values((select max(grpid)+1 from secgroups),'PersonalDiscussion_VIEW','Allow to view PersonalDiscussion',0,1000,current_timestamp,'Approved','','','','','',0);
				insert into secgroups values((select max(grpid)+1 from secgroups),'PersonalDiscussion_MAKER','WF Maker for PersonalDiscussion',0,1000,current_timestamp,'Approved','','','','','',0);
				insert into secgroups values((select max(grpid)+1 from secgroups),'PersonalDiscussion_APPROVER','WF Approver for PersonalDiscussion',0,1000,current_timestamp,'Approved','','','','','',0);
				update seqsecgroups set seqno=(select max(grpid) from secgroups_view);
				
				--SecRoleGroups
				update seqsecrolegroups set seqno=(select max(rolegrpid) from secrolegroups_view);
				insert into secrolegroups values ((select max(rolegrpid)+1 from secrolegroups), (select grpid from secgroups where grpcode='PersonalDiscussion_MAKER'), (select roleid from secroles where rolecd='MSTGRP1_MAKER'), 0,1000, current_timestamp,'Approved',' ',' ',' ',' ',' ',0);
				insert into secrolegroups values ((select max(rolegrpid)+1 from secrolegroups), (select grpid from secgroups where grpcode='PersonalDiscussion_APPROVER'), (select roleid from secroles where rolecd='MSTGRP1_APPROVER'), 0,1000, current_timestamp,'Approved',' ',' ',' ',' ',' ',0);
				update seqsecrolegroups set seqno=(select max(rolegrpid) from secrolegroups_view);
				
				delete from secrights where rightname in (
				'menuItem_Verification_PersonalDiscussion',
				'button_PersonalDiscussionList_btnNew',
				'button_PersonalDiscussionDialog_btnEdit',
				'button_PersonalDiscussionDialog_btnDelete',
				'button_PersonalDiscussionDialog_btnSave',
				'PersonalDiscussionDialog_Date',
				'PersonalDiscussionDialog_VerificationType',
				'PersonalDiscussionDialog_YearsAtPresentAddress',
				'PersonalDiscussionDialog_PersonMet',
				'PersonalDiscussionDialog_OwnershipStatus',
				'PersonalDiscussionDialog_Relationship',
				'PersonalDiscussionDialog_NeighborhoodCheck',
				'PersonalDiscussionDialog_contactNo',
				'PersonalDiscussionDialog_Remarks',
				'PersonalDiscussionDialog_LivingStandard',
				'PersonalDiscussionDialog_NegativeCheck',
				'PersonalDiscussionDialog_NoofAttempts',
				'PersonalDiscussionDialog_AgentCode',
				'PersonalDiscussionDialog_AgentName',
				'PersonalDiscussionDialog_Recommendations',
				'PersonalDiscussionDialog_Reason',
				'PersonalDiscussionDialog_AgentRemarks',
				'PersonalDiscussionDialog_LivingStandard'	
				); 
				
				update seqsecrights set seqno=(select max(rightid)+1 from secrights_view);
                Update SeqSecGroupRights set SeqNo = (Select max(GrpRightId) from SecGroupRights);
				insert into secrights values ((select max(rightid)+1 from secrights), 0, 'menuItem_Verification_PersonalDiscussion', 	'PersonalDiscussionList', 1, 1000, current_timestamp, 'Approved',' ',' ',' ',' ',' ',0);
				insert into secrights values ((select max(rightid)+1 from secrights), 2, 'button_PersonalDiscussionList_btnNew', 		'PersonalDiscussionList', 1, 1000, current_timestamp, 'Approved',' ',' ',' ',' ',' ',0);
				insert into secrights values ((select max(rightid)+1 from secrights), 2, 'button_PersonalDiscussionDialog_btnEdit', 	'PersonalDiscussionDialog', 1, 1000, current_timestamp, 'Approved',' ',' ',' ',' ',' ',0);
				insert into secrights values ((select max(rightid)+1 from secrights), 2, 'button_PersonalDiscussionDialog_btnDelete', 	'PersonalDiscussionDialog', 1, 1000, current_timestamp, 'Approved',' ',' ',' ',' ',' ',0);
				insert into secrights values ((select max(rightid)+1 from secrights), 2, 'button_PersonalDiscussionDialog_btnSave', 	'PersonalDiscussionDialog', 1, 1000, current_timestamp, 'Approved',' ',' ',' ',' ',' ',0);
				
				--Observation rights
				insert into secrights values ((select max(rightid)+1 from secrights), 3, 'PersonalDiscussionDialog_Date', 					'PersonalDiscussionDialog', 1, 1000, current_timestamp, 'Approved',' ',' ',' ',' ',' ',0);
				insert into secrights values ((select max(rightid)+1 from secrights), 3, 'PersonalDiscussionDialog_VerificationType', 		'PersonalDiscussionDialog', 1, 1000, current_timestamp, 'Approved',' ',' ',' ',' ',' ',0);
				insert into secrights values ((select max(rightid)+1 from secrights), 3, 'PersonalDiscussionDialog_YearsAtPresentAddress', 	'PersonalDiscussionDialog', 1, 1000, current_timestamp, 'Approved',' ',' ',' ',' ',' ',0);
				insert into secrights values ((select max(rightid)+1 from secrights), 3, 'PersonalDiscussionDialog_PersonMet', 				'PersonalDiscussionDialog', 1, 1000, current_timestamp, 'Approved',' ',' ',' ',' ',' ',0);
				insert into secrights values ((select max(rightid)+1 from secrights), 3, 'PersonalDiscussionDialog_OwnershipStatus', 		'PersonalDiscussionDialog', 1, 1000, current_timestamp, 'Approved',' ',' ',' ',' ',' ',0);
				insert into secrights values ((select max(rightid)+1 from secrights), 3, 'PersonalDiscussionDialog_Relationship', 			'PersonalDiscussionDialog', 1, 1000, current_timestamp, 'Approved',' ',' ',' ',' ',' ',0);
				insert into secrights values ((select max(rightid)+1 from secrights), 3, 'PersonalDiscussionDialog_NeighborhoodCheck', 		'PersonalDiscussionDialog', 1, 1000, current_timestamp, 'Approved',' ',' ',' ',' ',' ',0);
				insert into secrights values ((select max(rightid)+1 from secrights), 3, 'PersonalDiscussionDialog_contactNo', 				'PersonalDiscussionDialog', 1, 1000, current_timestamp, 'Approved',' ',' ',' ',' ',' ',0);
				insert into secrights values ((select max(rightid)+1 from secrights), 3, 'PersonalDiscussionDialog_Remarks', 				'PersonalDiscussionDialog', 1, 1000, current_timestamp, 'Approved',' ',' ',' ',' ',' ',0);
				insert into secrights values ((select max(rightid)+1 from secrights), 3, 'PersonalDiscussionDialog_LivingStandard', 		'PersonalDiscussionDialog', 1, 1000, current_timestamp, 'Approved',' ',' ',' ',' ',' ',0);
				insert into secrights values ((select max(rightid)+1 from secrights), 3, 'PersonalDiscussionDialog_NegativeCheck', 			'PersonalDiscussionDialog', 1, 1000, current_timestamp, 'Approved',' ',' ',' ',' ',' ',0);
				insert into secrights values ((select max(rightid)+1 from secrights), 3, 'PersonalDiscussionDialog_NoofAttempts', 			'PersonalDiscussionDialog', 1, 1000, current_timestamp, 'Approved',' ',' ',' ',' ',' ',0);
				
				-- Summary Rights
				insert into secrights values ((select max(rightid)+1 from secrights), 3, 'PersonalDiscussionDialog_AgentCode', 				'PersonalDiscussionDialog', 1, 1000, current_timestamp, 'Approved',' ',' ',' ',' ',' ',0);
				insert into secrights values ((select max(rightid)+1 from secrights), 3, 'PersonalDiscussionDialog_AgentName', 				'PersonalDiscussionDialog', 1, 1000, current_timestamp, 'Approved',' ',' ',' ',' ',' ',0);
				insert into secrights values ((select max(rightid)+1 from secrights), 3, 'PersonalDiscussionDialog_Recommendations', 		'PersonalDiscussionDialog', 1, 1000, current_timestamp, 'Approved',' ',' ',' ',' ',' ',0);
				insert into secrights values ((select max(rightid)+1 from secrights), 3, 'PersonalDiscussionDialog_Reason', 				'PersonalDiscussionDialog', 1, 1000, current_timestamp, 'Approved',' ',' ',' ',' ',' ',0);
				insert into secrights values ((select max(rightid)+1 from secrights), 3, 'PersonalDiscussionDialog_AgentRemarks', 			'PersonalDiscussionDialog', 1, 1000, current_timestamp, 'Approved',' ',' ',' ',' ',' ',0);
				update seqsecrights set seqno=(select max(rightid)+1 from secrights_view);
               
				
				insert into secgrouprights values((select max(grprightid)+1 from secgrouprights),(select grpid from secgroups where grpcode='PersonalDiscussion_MAKER'),(select rightid from secrights where rightname='button_PersonalDiscussionDialog_btnEdit'),1 ,0, 1000,current_timestamp, 'Approved','','','','','',0);
				insert into secgrouprights values((select max(grprightid)+1 from secgrouprights),(select grpid from secgroups where grpcode='PersonalDiscussion_MAKER'),(select rightid from secrights where rightname='button_PersonalDiscussionDialog_btnDelete') ,1 ,0, 1000,current_timestamp, 'Approved','','','','','',0);
				insert into secgrouprights values((select max(grprightid)+1 from secgrouprights),(select grpid from secgroups where grpcode='PersonalDiscussion_MAKER'),(select rightid from secrights where rightname='button_PersonalDiscussionDialog_btnSave') ,1 ,0, 1000,current_timestamp, 'Approved','','','','','',0);
				insert into secgrouprights values((select max(grprightid)+1 from secgrouprights),(select grpid from secgroups where grpcode='PersonalDiscussion_MAKER'),(select rightid from secrights where rightname='menuItem_Verification_PersonalDiscussion'),1 ,0, 1000,current_timestamp, 'Approved','','','','','',0);
				insert into secgrouprights values((select max(grprightid)+1 from secgrouprights),(select grpid from secgroups where grpcode='PersonalDiscussion_MAKER'),(select rightid from secrights where rightname='PersonalDiscussionDialog_Date'),1 ,0, 1000,current_timestamp, 'Approved','','','','','',0);
				insert into secgrouprights values((select max(grprightid)+1 from secgrouprights),(select grpid from secgroups where grpcode='PersonalDiscussion_MAKER'),(select rightid from secrights where rightname='PersonalDiscussionDialog_VerificationType'),1 ,0, 1000,current_timestamp, 'Approved','','','','','',0);
				insert into secgrouprights values((select max(grprightid)+1 from secgrouprights),(select grpid from secgroups where grpcode='PersonalDiscussion_MAKER'),(select rightid from secrights where rightname='PersonalDiscussionDialog_YearsAtPresentAddress') ,1 ,0, 1000,current_timestamp, 'Approved','','','','','',0);
				insert into secgrouprights values((select max(grprightid)+1 from secgrouprights),(select grpid from secgroups where grpcode='PersonalDiscussion_MAKER'),(select rightid from secrights where rightname='PersonalDiscussionDialog_PersonMet'),1 ,0, 1000,current_timestamp, 'Approved','','','','','',0);
				insert into secgrouprights values((select max(grprightid)+1 from secgrouprights),(select grpid from secgroups where grpcode='PersonalDiscussion_MAKER'),(select rightid from secrights where rightname='PersonalDiscussionDialog_Relationship'),1 ,0, 1000,current_timestamp, 'Approved','','','','','',0);
				insert into secgrouprights values((select max(grprightid)+1 from secgrouprights),(select grpid from secgroups where grpcode='PersonalDiscussion_MAKER'),(select rightid from secrights where rightname='PersonalDiscussionDialog_NeighborhoodCheck') ,1 ,0, 1000,current_timestamp, 'Approved','','','','','',0);
				insert into secgrouprights values((select max(grprightid)+1 from secgrouprights),(select grpid from secgroups where grpcode='PersonalDiscussion_MAKER'),(select rightid from secrights where rightname='PersonalDiscussionDialog_contactNo'),1 ,0, 1000,current_timestamp, 'Approved','','','','','',0);
				insert into secgrouprights values((select max(grprightid)+1 from secgrouprights),(select grpid from secgroups where grpcode='PersonalDiscussion_MAKER'),(select rightid from secrights where rightname='PersonalDiscussionDialog_Remarks'),1 ,0, 1000,current_timestamp, 'Approved','','','','','',0);
				insert into secgrouprights values((select max(grprightid)+1 from secgrouprights),(select grpid from secgroups where grpcode='PersonalDiscussion_MAKER'),(select rightid from secrights where rightname='PersonalDiscussionDialog_NegativeCheck'),1 ,0, 1000,current_timestamp, 'Approved','','','','','',0);
				insert into secgrouprights values((select max(grprightid)+1 from secgrouprights),(select grpid from secgroups where grpcode='PersonalDiscussion_MAKER'),(select rightid from secrights where rightname='PersonalDiscussionDialog_NoofAttempts'),1 ,0, 1000,current_timestamp, 'Approved','','','','','',0);
				insert into secgrouprights values((select max(grprightid)+1 from secgrouprights),(select grpid from secgroups where grpcode='PersonalDiscussion_MAKER'),(select rightid from secrights where rightname='PersonalDiscussionDialog_AgentCode'),1 ,0, 1000,current_timestamp, 'Approved','','','','','',0);
				insert into secgrouprights values((select max(grprightid)+1 from secgrouprights),(select grpid from secgroups where grpcode='PersonalDiscussion_MAKER'),(select rightid from secrights where rightname='PersonalDiscussionDialog_AgentName'),1 ,0, 1000,current_timestamp, 'Approved','','','','','',0);
				insert into secgrouprights values((select max(grprightid)+1 from secgrouprights),(select grpid from secgroups where grpcode='PersonalDiscussion_MAKER'),(select rightid from secrights where rightname='PersonalDiscussionDialog_Recommendations'),1 ,0, 1000,current_timestamp, 'Approved','','','','','',0);
				insert into secgrouprights values((select max(grprightid)+1 from secgrouprights),(select grpid from secgroups where grpcode='PersonalDiscussion_MAKER'),(select rightid from secrights where rightname='PersonalDiscussionDialog_Reason'),1 ,0, 1000,current_timestamp, 'Approved','','','','','',0);
				insert into secgrouprights values((select max(grprightid)+1 from secgrouprights),(select grpid from secgroups where grpcode='PersonalDiscussion_MAKER'),(select rightid from secrights where rightname='PersonalDiscussionDialog_AgentRemarks'),1 ,0, 1000,current_timestamp, 'Approved','','','','','',0);
				insert into SECGROUPRIGHTS values((select max(GRPRIGHTID)+1 from SECGROUPRIGHTS),(select GRPID from SECGROUPS where GRPCODE='PersonalDiscussion_MAKER'),(select RIGHTID from SECRIGHTS where RIGHTNAME='PersonalDiscussionDialog_OwnershipStatus'),1, 0,1000,current_timestamp, 'Approved','','','','','',0);
				insert into SECGROUPRIGHTS values((select max(GRPRIGHTID)+1 from SECGROUPRIGHTS),(select GRPID from SECGROUPS where GRPCODE='PersonalDiscussion_MAKER'),(select RIGHTID from SECRIGHTS where RIGHTNAME='PersonalDiscussionDialog_LivingStandard'),1, 0,1000,current_timestamp, 'Approved','','','','','',0);
				
				insert into secgrouprights values((select max(grprightid)+1 from secgrouprights),(select grpid from secgroups where grpcode='PersonalDiscussion_APPROVER'),(select rightid from secrights where rightname='button_PersonalDiscussionDialog_btnSave'),1 ,0, 1000,current_timestamp, 'Approved','','','','','',0);
				insert into secgrouprights values((select max(grprightid)+1 from secgrouprights),(select grpid from secgroups where grpcode='PersonalDiscussion_APPROVER'),(select rightid from secrights where rightname='menuItem_Verification_PersonalDiscussion'),1 ,0, 1000,current_timestamp, 'Approved','','','','','',0);
				
				 Update SeqSecGroupRights set SeqNo = (Select max(GrpRightId) from SecGroupRights);
			]]>
		</sql>
	</changeSet>

	<changeSet id="10" author="Varaprasad">
		<sql>
			<![CDATA[
				delete from  LimitCodeDetail where LimitCode = 'PDINIT';
				delete from  LimitCodeDetail where LimitCode = 'PDAPPR';
		
				INSERT INTO limitcodedetail VALUES ((select max(limitid)+1 from limitcodedetail),'PDINIT','Personal Discussion Initiation',1);
				INSERT INTO limitcodedetail VALUES ((select max(limitid)+1 from limitcodedetail),'PDAPPR','Personal Discussion Approval',1);
			]]>
		</sql>
	</changeSet>
	<changeSet id="11" author="Varaprasad.K">
		<sql>
			<![CDATA[	
				Delete from secGrouprights where rightid in(SELECT rightid from secrights WHERE rightname='PersonalDiscussionDialog_PersonalDiscussionExtFields');
				delete from secrights where rightname='PersonalDiscussionDialog_PersonalDiscussionExtFields';
				Insert into Secrights Values((Select MAX(RightID)+1 From SecRights), 3, 'PersonalDiscussionDialog_PersonalDiscussionExtFields', 'PersonalDiscussionDialog', 1, 1000, current_timestamp, 'Approved',' ',' ',' ',' ',' ',0);
				Insert Into secGrouprights values((select MAX(GrpRightID)+1 From secGrouprights),(select GrpId from SecGroups where Grpcode='PersonalDiscussion_MAKER'),(select RightId from secRights where RightName='PersonalDiscussionDialog_PersonalDiscussionExtFields'),1,0,1000,current_timestamp, 'Approved','','','','','',0);
	        ]]>
		</sql>
	</changeSet>
	<changeSet id="12" author="Varaprasad.K">
		<sql>
			<![CDATA[
					Delete from Secgrouprights where grpid in(Select grpid from secgroups where grpcode IN('PersonalDiscussion_MAKER','PersonalDiscussion_APPROVER')) and rightid in(Select rightid from SecRights where RightName ='PersonalDiscussionDialog_Documents');
					Delete from SecRights where RightName = 'PersonalDiscussionDialog_Documents';
					Insert into SecRights Values((Select MAX(RightID)+1 From SecRights), 3, 'PersonalDiscussionDialog_Documents', 'PersonalDiscussionDialog', 1, 1000, current_timestamp, 'Approved',' ',' ',' ',' ',' ',0);
					Insert Into secGrouprights values((select MAX(GrpRightID)+1 From secGrouprights),(select GrpId from SecGroups where Grpcode='PersonalDiscussion_MAKER'),(select RightId from secRights where RightName='PersonalDiscussionDialog_Documents'),1,0,1000,current_timestamp, 'Approved','','','','','',0);
			]]>
		</sql>
	</changeSet>
	<changeSet id="13" author="Varaprasad.K">
		<sql>
		<![CDATA[
			Insert Into DocumentCategory values ((Select MAX(id)+1 From DocumentCategory),'VERIFICATION_PD','Personal Discussion Verification Documents');
		]]>
		</sql>
	</changeSet>
</databaseChangeLog>