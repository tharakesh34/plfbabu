<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

	<property name="add.schema" value="dbo." dbms="mssql" />
	<property name="add.schema" value="" dbms="oracle" />
	<property name="add.schema" value="" dbms="postgresql" />
	<property name="call.substr" value="substring" dbms="mssql" />
	<property name="call.substr" value="substr" dbms="oracle" />
	<property name="call.substr" value="substring" dbms="postgresql" />
	<property name="call.auditdb" value="PLFAVANSEQC.." dbms="mssql" />
	<property name="call.auditdb" value=" " dbms="oracle" />
	<property name="call.concatenate" value="+" dbms="mssql" />
	<property name="call.concatenate" value="||" dbms="oracle" />
	<property name="call.concatenate" value="||" dbms="postgresql" />
	<property name="call.collength" value="LEN" dbms="mssql" />
	<property name="call.collength" value="LENGTH" dbms="oracle" />
	<property name="call.collength" value="LENGTH" dbms="postgresql" />
	<property name="call.date" value="getdate()" dbms="mssql" />
	<property name="call.date" value="sysdate" dbms="oracle" />
	<property name="call.date" value="now()" dbms="postgresql" />

	<changeSet id="pre_run_for_pgp" author="Adarsh" runAlways="true" dbms="postgresql">
		<sql>
			Set search_path = plf,public,pg_catalog;
		</sql>
	</changeSet>

	<changeSet id="ST#45.1" author="saisandeep.b">
		<sql>
			<![CDATA[
				delete from RBFIELDDETAILS where RBMODULE = 'SUBHEAD' and RBEVENT = 'SUBHEAD' and RBFLDNAME = 'ae_vasProdCategory';
				Insert into RBFIELDDETAILS (RBMODULE,RBEVENT,RBFLDNAME,RBFLDDESC,RBFLDTYPE,RBFLDLEN,RBFORCALFLDS,RBFORBLDFLDS,RBFLDTABLENAME,RBSTFLDS,MODULECODE) values ('SUBHEAD', 'SUBHEAD', 'ae_vasProdCategory', 'VAS Product Category', 'nvarchar', 8, '0', '1', 'VASProductCategory', 'static,dbvalue', 'VASProductCategory');		
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1442.1" author="saranya.s">
		<addColumn tableName="BMTBANKDETAIL">
			<column name="MinAccNoLength" type="int" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1442.1.1" author="saranya.s" dbms="postgresql, oracle">
		<addDefaultValue columnName="MinAccNoLength" tableName="BMTBANKDETAIL" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#1442.1.1" author="saranya.s" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE BMTBANKDETAIL ADD CONSTRAINT DF_BMTBANKDETAIL_MAL DEFAULT 0  FOR MinAccNoLength;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1442.2" author="saranya.s">
		<addColumn tableName="BMTBANKDETAIL_TEMP">
			<column name="MinAccNoLength" type="int" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1442.2.2" author="saranya.s" dbms="postgresql, oracle">
		<addDefaultValue columnName="MinAccNoLength" tableName="BMTBANKDETAIL_TEMP" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#1442.2.2" author="saranya.s" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE BMTBANKDETAIL_TEMP ADD CONSTRAINT DF_BMTBANKDETAIL_T_MAL DEFAULT 0 FOR MinAccNoLength;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1442.3_pre" author="saranya.s" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'bmtbankdetail_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1442.3" author="saranya.s">
		<createView viewName="BMTBANKDETAIL_AVIEW" replaceIfExists="true">
		  <![CDATA[
			 	SELECT BANKCODE,
	    			BANKNAME,
	    			BANKSHORTCODE,
	    			ACTIVE,
	    			VERSION,
	    			LASTMNTBY,
	    			LASTMNTON,
	    			RECORDSTATUS,
	    			ROLECODE,
	    			NEXTROLECODE,
	    			TASKID,
	    			NEXTTASKID,
	    			RECORDTYPE,
	    			WORKFLOWID,
	    			ACCNOLENGTH,
	    			MINACCNOLENGTH
	   				FROM BMTBANKDETAIL
  		 	]]>
		</createView>
	</changeSet>

	<changeSet id="ST#1442.3_post" author="saranya.s" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'bmtbankdetail_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1442.4_pre" author="saranya.s" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'bmtbankdetail_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1442.4" author="saranya.s">
		<createView viewName="BMTBANKDETAIL_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT BANKCODE,
    				BANKNAME,
    				BANKSHORTCODE,
    				ACTIVE,
    				VERSION,
    				LASTMNTBY,
    				LASTMNTON,
    				RECORDSTATUS,
   				    ROLECODE,
    				NEXTROLECODE,
    				TASKID,
    				NEXTTASKID,
    				RECORDTYPE,
    				WORKFLOWID,
    				ACCNOLENGTH,
    				MINACCNOLENGTH
   					FROM BMTBANKDETAIL_TEMP				
				UNION ALL
				SELECT BANKCODE,
   					BANKNAME,
    				BANKSHORTCODE,
    				ACTIVE,
    				VERSION,
    				LASTMNTBY,
    				LASTMNTON,
    				RECORDSTATUS,
    				ROLECODE,
    				NEXTROLECODE,
    				TASKID,
    				NEXTTASKID,
    				RECORDTYPE,
    				WORKFLOWID,
   					ACCNOLENGTH,
   					MINACCNOLENGTH
  					FROM BMTBANKDETAIL 
  					WHERE NOT (EXISTS (SELECT 1 FROM BMTBANKDETAIL_TEMP WHERE BMTBANKDETAIL_TEMP.BANKCODE =  BMTBANKDETAIL.BANKCODE))
			 ]]>
		</createView>
	</changeSet>

	<changeSet id="ST#1442.4_post" author="saranya.s" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'bmtbankdetail_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1442.5" author="saranya.s">
		<sql>
			<![CDATA[
				DELETE from ErrorDetails WHERE code = 'BNK001';
				INSERT INTO ErrorDetails VALUES('BNK001','EN','E','{0} should be greater than {1} or less than or equal to {2}', '', 'Approved', '', '', '', '', '', 0, CURRENT_TIMESTAMP, 1000, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1442.6" author="saranya.s">
		<sql>
			<![CDATA[ 
				UPDATE BMTBANKDETAIL set MINACCNOLENGTH = ACCNOLENGTH;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1442.7" author="saranya.s">
		<sql>
			<![CDATA[
				UPDATE BMTBANKDETAIL_TEMP set MINACCNOLENGTH = ACCNOLENGTH;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1442.8" author="saranya.s">
		<sql>
			<![CDATA[
				UPDATE BMTBANKDETAIL set ACCNOLENGTH = 50, MINACCNOLENGTH = 50 where ACCNOLENGTH = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1442.9" author="saranya.s">
		<sql>
			<![CDATA[
				UPDATE BMTBANKDETAIL_TEMP set ACCNOLENGTH = 50, MINACCNOLENGTH = 50 where ACCNOLENGTH = 0;
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#1442.10.1" author="saranya.s">
		<sql>
			<![CDATA[
				UPDATE BMTBANKDETAIL set MINACCNOLENGTH = 1 where MINACCNOLENGTH = 50 or MINACCNOLENGTH = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1442.11.1" author="saranya.s">
		<sql>
			<![CDATA[
				UPDATE BMTBANKDETAIL_TEMP set MINACCNOLENGTH = 1 where MINACCNOLENGTH = 50 or MINACCNOLENGTH = 0;
			]]>
		</sql>
	</changeSet>


	<!-- ST#1544 Under Construction Changes change sets start -->
	<changeSet id="ST#1544.1" author="sampath.d">
		<addColumn tableName="RMTFINANCETYPES">
			<column name="GrcAdjReq" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1544.2" author="sampath.d">
		<addColumn tableName="RMTFINANCETYPES">
			<column name="GrcPeriodAftrFullDisb" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1544.3" author="sampath.d">
		<addColumn tableName="RMTFINANCETYPES">
			<column name="AutoIncrGrcEndDate" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1544.4" author="sampath.d">
		<addColumn tableName="RMTFINANCETYPES">
			<column name="GrcAutoIncrMonths" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1544.5" author="sampath.d">
		<addColumn tableName="RMTFINANCETYPES">
			<column name="MaxAutoIncrAllowed" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1544.6" author="sampath.d">
		<addColumn tableName="RMTFINANCETYPES">
			<column name="ThrldToMaintainGrcPrd" type="int" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1544.7" author="sampath.d">
		<addColumn tableName="RMTFINANCETYPES_TEMP">
			<column name="GrcAdjReq" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1544.8" author="sampath.d">
		<addColumn tableName="RMTFINANCETYPES_TEMP">
			<column name="GrcPeriodAftrFullDisb" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1544.9" author="sampath.d">
		<addColumn tableName="RMTFINANCETYPES_TEMP">
			<column name="AutoIncrGrcEndDate" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1544.10" author="sampath.d">
		<addColumn tableName="RMTFINANCETYPES_TEMP">
			<column name="GrcAutoIncrMonths" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1544.11" author="sampath.d">
		<addColumn tableName="RMTFINANCETYPES_TEMP">
			<column name="MaxAutoIncrAllowed" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1544.12" author="sampath.d">
		<addColumn tableName="RMTFINANCETYPES_TEMP">
			<column name="ThrldToMaintainGrcPrd" type="int" />
		</addColumn>
	</changeSet>


	<changeSet id="ST#1544.13" author="sampath.d" dbms="postgresql, oracle">
		<addDefaultValue columnName="GrcAdjReq" tableName="RMTFINANCETYPES" defaultValue="0" />
		<addDefaultValue columnName="GrcPeriodAftrFullDisb" tableName="RMTFINANCETYPES" defaultValue="0" />
		<addDefaultValue columnName="AutoIncrGrcEndDate" tableName="RMTFINANCETYPES" defaultValue="0" />
		<addDefaultValue columnName="GrcAutoIncrMonths" tableName="RMTFINANCETYPES" defaultValue="0" />
		<addDefaultValue columnName="MaxAutoIncrAllowed" tableName="RMTFINANCETYPES" defaultValue="0" />
		<addDefaultValue columnName="ThrldToMaintainGrcPrd" tableName="RMTFINANCETYPES" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#1544.14" author="sampath.d" dbms="postgresql, oracle">
		<addDefaultValue columnName="GrcAdjReq" tableName="RMTFINANCETYPES_TEMP" defaultValue="0" />
		<addDefaultValue columnName="GrcPeriodAftrFullDisb" tableName="RMTFINANCETYPES_TEMP" defaultValue="0" />
		<addDefaultValue columnName="AutoIncrGrcEndDate" tableName="RMTFINANCETYPES_TEMP" defaultValue="0" />
		<addDefaultValue columnName="GrcAutoIncrMonths" tableName="RMTFINANCETYPES_TEMP" defaultValue="0" />
		<addDefaultValue columnName="MaxAutoIncrAllowed" tableName="RMTFINANCETYPES_TEMP" defaultValue="0" />
		<addDefaultValue columnName="ThrldToMaintainGrcPrd" tableName="RMTFINANCETYPES_TEMP" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#1544.13" author="sampath.d" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE RMTFINANCETYPES ADD CONSTRAINT DF_RMTFT_GrcAdjReq DEFAULT 0 FOR GrcAdjReq;
				ALTER TABLE RMTFINANCETYPES ADD CONSTRAINT DF_RMTFT_GrcPdArFlDisb DEFAULT 0 FOR GrcPeriodAftrFullDisb;
				ALTER TABLE RMTFINANCETYPES ADD CONSTRAINT DF_RMTFT_AutIrGrEdDate DEFAULT 0 FOR AutoIncrGrcEndDate;
				ALTER TABLE RMTFINANCETYPES ADD CONSTRAINT DF_RMTFT_GrcAutInrMnths DEFAULT 0 FOR GrcAutoIncrMonths;
				ALTER TABLE RMTFINANCETYPES ADD CONSTRAINT DF_RMTFT_MaxAutInrAlod DEFAULT 0 FOR MaxAutoIncrAllowed;
				ALTER TABLE RMTFINANCETYPES ADD CONSTRAINT DF_RMTFT_Thrldmtngrcprd DEFAULT 0 FOR ThrldToMaintainGrcPrd;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1544.14" author="sampath.d" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE RMTFINANCETYPES_TEMP ADD CONSTRAINT DF_RMTFT_TMP_GrcAdjReq DEFAULT 0 FOR GrcAdjReq;
				ALTER TABLE RMTFINANCETYPES_TEMP ADD CONSTRAINT DF_RMTFT_TMP_GrcPdArFlDisb DEFAULT 0 FOR GrcPeriodAftrFullDisb;
				ALTER TABLE RMTFINANCETYPES_TEMP ADD CONSTRAINT DF_RMTFT_TMP_AutIrGrEdDate DEFAULT 0 FOR AutoIncrGrcEndDate;
				ALTER TABLE RMTFINANCETYPES_TEMP ADD CONSTRAINT DF_RMTFT_TMP_GrcAutInrMnths DEFAULT 0 FOR GrcAutoIncrMonths;
				ALTER TABLE RMTFINANCETYPES_TEMP ADD CONSTRAINT DF_RMTFT_TMP_MaxAutInrAlod DEFAULT 0 FOR MaxAutoIncrAllowed;
				ALTER TABLE RMTFINANCETYPES_TEMP ADD CONSTRAINT DF_RMTFT_TMP_Thrldmtngrcprd DEFAULT 0 FOR ThrldToMaintainGrcPrd;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1544.15" author="sampath.d">
		<sql>
			<![CDATA[
				UPDATE RMTFINANCETYPES Set GrcAdjReq = 0;
				UPDATE RMTFINANCETYPES Set GrcPeriodAftrFullDisb = 0;
				UPDATE RMTFINANCETYPES Set AutoIncrGrcEndDate = 0;
				UPDATE RMTFINANCETYPES Set GrcAutoIncrMonths = 0;
				UPDATE RMTFINANCETYPES Set MaxAutoIncrAllowed = 0;
				UPDATE RMTFINANCETYPES Set ThrldToMaintainGrcPrd = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1544.16" author="sampath.d">
		<sql>
			<![CDATA[
				UPDATE RMTFINANCETYPES_TEMP Set GrcAdjReq = 0;
				UPDATE RMTFINANCETYPES_TEMP Set GrcPeriodAftrFullDisb = 0;
				UPDATE RMTFINANCETYPES_TEMP Set AutoIncrGrcEndDate = 0;
				UPDATE RMTFINANCETYPES_TEMP Set GrcAutoIncrMonths = 0;
				UPDATE RMTFINANCETYPES_TEMP Set MaxAutoIncrAllowed = 0;
				UPDATE RMTFINANCETYPES_TEMP Set Thrldtomaintaingrcprd = 0;
				
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1544.17_pre" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_view');
		 	]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1544.17" author="sampath.d">
		<createView viewName="RMTFINANCETYPES_VIEW" replaceIfExists="true">
		  <![CDATA[
				SELECT T1.FINTYPE,
					T1.FINCATEGORY,
					T1.FINTYPEDESC,
					T1.FINCCY,
					T1.FINDAYSCALTYPE,
					T1.FINACTYPE,
					T1.FINCONTINGENTACTYPE,
					T1.FINISGENREF,
					T1.FINMAXAMOUNT,
					T1.FINMINAMOUNT,
					T1.FINISOPENNEWFINAC,
					T1.FINDFTSTMTFRQ,
					T1.FINISALWMD,
					T1.FINSCHDMTHD,
					T1.FINISALWGRACE,
					T1.FINHISTRETENSION,
					T1.EQUALREPAYMENT,
					T1.FINRATETYPE,
					T1.FINBASERATE,
					T1.FINSPLRATE,
					T1.FININTRATE,
					T1.FINMINRATE,
					T1.FINMAXRATE,
					T1.FINDFTINTFRQ,
					T1.FINISINTCPZ,
					T1.FINCPZFRQ,
					T1.FINISRVWALW,
					T1.FINRVWFRQ,
					T1.FINGRCRATETYPE,
					T1.FINGRCBASERATE,
					T1.FINGRCSPLRATE,
					T1.FINGRCINTRATE,
					T1.FINGRCMINRATE,
					T1.FINGRCMAXRATE,
					T1.FINGRCDFTINTFRQ,
					T1.FINGRCISINTCPZ,
					T1.FINGRCCPZFRQ,
					T1.FINGRCISRVWALW,
					T1.FINGRCRVWFRQ,
					T1.FINMINTERM,
					T1.FINMAXTERM,
					T1.FINDFTTERMS,
					T1.FINRPYFRQ,
					T1.FINREPAYMETHOD,
					T1.FINISALWPARTIALRPY,
					T1.FINISALWDIFFERMENT,
					T1.FINMAXDIFFERMENT,
					T1.FINISALWEARLYRPY,
					T1.FINISALWEARLYSETTLE,
					T1.FINODRPYTRIES,
					T1.FINEARLYPAYRULE,
					T1.FINEARLYSETTLERULE,
					T1.FINDEPOSITRESTRICTEDTO,
					T1.FINAEBUYORINCEPTION,
					T1.FINAESELLORMATURITY,
					T1.FINISACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.STEPFINANCE,
					T1.STEPPINGMANDATORY,
					T1.ALWMANUALSTEPS,
					T1.ALWDSTEPPOLICIES,
					T1.DFTSTEPPOLICY,
					T4.ACTYPEDESC LOVDESCFINCONTINGENTACTYPENAME,
					T5.ACTYPEDESC LOVDESCFINACTYPENAME,
					T1.FINISDWPAYREQUIRED,
					T1.FINRVWRATEAPPLFOR,
					T1.FINALWRATECHANGEANYDATE,
					T1.FINISINTCPZATGRCEND,
					T1.FINELGRULECODE,
					T1.LIMITELGRULECODE,
					T1.FINSCHCALCODEONRVW,
					T1.ALWPLANDEFERMENT,
					T1.PLANDEFERCOUNT,
					T1.FINASSETTYPE,
					T1.PFTPAYACTYPE,
					T1.FINISOPENPFTPAYACC,
					T31.ACTYPEDESC LOVDESCPFTPAYACTYPENAME,
					T1.FINISALWGRCREPAY,
					T1.FINGRCSCHDMTHD,
					T1.FINGRCMARGIN,
					T1.FINMARGIN,
					T1.FINSCHEDULEON,
					T1.FINGRCSCHEDULEON,
					T1.FINCOMMITMENTREQ,
					T1.FINCOLLATERALREQ,
					T1.FINDEPRECIATIONREQ,
					T1.FINDEPRECIATIONFRQ,
					T1.FINBANKCONTINGENTACTYPE,
					T1.FINPROVISIONACTYPE,
					T38.ACTYPEDESC LOVDESCFINBANKCONTACTYPENAME,
					T39.ACTYPEDESC LOVDESCFINPROVISIONACTYPENAME,
					T1.ALLOWRIAINVESTMENT,
					T1.OVERRIDELIMIT,
					T1.LIMITREQUIRED,
					T1.FINCOMMITMENTOVRRIDE,
					T1.FINCOLLATERALOVRRIDE,
					T1.FINPFTUNCHANGED,
					T1.APPLYODPENALTY,
					T1.ODINCGRCDAYS,
					T1.ODCHARGETYPE,
					T1.ODGRACEDAYS,
					T1.ODCHARGECALON,
					T1.ODCHARGEAMTORPERC,
					T1.ODALLOWWAIVER,
					T1.ODMAXWAIVERPERC,
					T1.FINDIVISION,
					T48.DIVISIONCODEDESC LOVDESCFINDIVISIONNAME,
					T48.ENTITYCODE LOVDESCENTITYCODE,
					T1.FINSUSPACTYPE,
					T49.ACTYPEDESC LOVDESCFINSUSPACTYPENAME,
					T1.PRODUCT,
					T1.STARTDATE,
					T1.ENDDATE,
					T1.ALLOWDOWNPAYPGM,
					T1.FINTYPEDESC LOVDESCPROMOFINTYPEDESC,
					T1.REMARKS,
					T1.ALWEARLYPAYMETHODS,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.ALWADVANCERENT,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.ROLLOVERFINANCE,
					T1.ROLLOVERFRQ,
					T1.DOWNPAYRULE,
					T59.RULECODE DOWNPAYRULECODE,
					T59.RULECODEDESC DOWNPAYRULEDESC,
					T1.FINSUSPTRIGGER,
					T1.FINSUSPREMARKS,
					T1.ALWMULTIPARTYDISB,
					T1.COLLATERALTYPE,
					T1.TDSAPPLICABLE,
					T1.MANUALSCHEDULE,
					T1.APPLYGRCPRICING,
					T1.GRCPRICINGMETHOD,
					T1.APPLYRPYPRICING,
					T1.RPYPRICINGMETHOD,
					T1.RPYHIERARCHY,
					T67.RULECODE GRCPRICINGMETHODDESC,
					T68.RULECODE RPYPRICINGMETHODDESC,
					T1.DROPLINEOD,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.FINREPAYPFTONFRQ,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PFTDUESCHON,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.UNPLANEMIHLOCKPERIOD,
					T1.UNPLANEMICPZ,
					T1.REAGECPZ,
					T1.FDDLOCKPERIOD,
					T1.ALWDRPYMETHODS,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.ROUNDINGMODE,
					T1.ROUNDINGTARGET,
					T1.FREQUENCYDAYS,
					T1.QUICKDISB,
					T1.ALWMAXDISBCHECKREQ,
					T1.ALWREAGE,
					T1.ALWUNPLANEMIHOLIDAY,
					T1.PROFITCENTERID,
					T69.PROFITCENTERCODE,
					T69.PROFITCENTERDESC,
					T1.PRODUCTCATEGORY,
					T2.PRODUCTDESC FINCATEGORYDESC,
					T1.DEVELOPERFINANCE,
					T1.COSTOFFUNDS,
					T1.CHEQUECAPTUREREQ,
					T1.FINLTVCHECK,
					T1.PARTIALLYSECURED,
					T1.ALWADVEMI,
					T1.ADVEMIMINTERMS,
					T1.ADVEMIMAXTERMS,
					T1.ADVEMIDFTTERMS,
					T1.ADVEMISCHDMTHD,
					T1.BPIPFTDAYSBASIS,
					T1.ELIGIBILITYMETHODS,
					T1.ALWHYBRIDRATE,
					T1.FIXEDRATETENOR,
					T1.ODMINCAPAMOUNT,
					T1.ODRULECODE,
					T1.ALWZEROINTACC,
					T1.AUTOREJECTIONDAYS,
					T1.TAXNOMAND,
					T1.PUTCALLREQUIRED,
					T1.GRCADVINTERSETREQ,
					T1.GRCADVTYPE,
					T1.GRCADVMINTERMS,
					T1.GRCADVMAXTERMS,
					T1.GRCADVDEFAULTTERMS,
					T1.ADVINTERSETREQ,
					T1.ADVTYPE,
					T1.ADVMINTERMS,
					T1.ADVMAXTERMS,
					T1.ADVDEFAULTTERMS,
					T1.ADVSTAGE,
					T1.DSFREQ,
					T1.CASHCOLLATERALREQ,
					T1.TDSALLOWTOMODIFY,
					T1.TDSAPPLICABLETO,
					T1.ALWVAN,
					T1.VANALLOCATIONMETHOD,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING,
					T1.ALWSANCTIONAMT,
					T1.ALWSANCTIONAMTOVERRIDE,
					T1.SANBSDSCHDLE,
					T1.FINISRATERVWATGRCEND,
					T1.SCHDONPMTCAL,
					T1.AUTOAPPROVE,
					T1.ALWPLANNEDEMIINGRC,
					T1.GRCADJREQ,
					T1.GRCPERIODAFTRFULLDISB,
					T1.AUTOINCRGRCENDDATE,
					T1.GRCAUTOINCRMONTHS,
					T1.MAXAUTOINCRALLOWED,
					T1.THRLDTOMAINTAINGRCPRD
				FROM RMTFINANCETYPES_TEMP T1
				LEFT JOIN BMTPRODUCT T2 ON T1.FINCATEGORY = T2.PRODUCTCODE
				LEFT JOIN RMTACCOUNTTYPES T4 ON T1.FINCONTINGENTACTYPE = T4.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T38 ON T1.FINBANKCONTINGENTACTYPE = T38.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T39 ON T1.FINPROVISIONACTYPE = T39.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T5 ON T1.FINACTYPE = T5.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T31 ON T1.PFTPAYACTYPE = T31.ACTYPE
				LEFT JOIN SMTDIVISIONDETAIL T48 ON T1.FINDIVISION = T48.DIVISIONCODE
				LEFT JOIN RMTACCOUNTTYPES T49 ON T1.FINSUSPACTYPE = T49.ACTYPE
				LEFT JOIN RULES T59 ON T1.DOWNPAYRULE = T59.RULEID
				LEFT JOIN RULES T67 ON T1.GRCPRICINGMETHOD = T67.RULEID
				LEFT JOIN RULES T68 ON T1.RPYPRICINGMETHOD = T68.RULEID
				LEFT JOIN PROFITCENTERS T69 ON T69.PROFITCENTERID = T1.PROFITCENTERID
				UNION ALL
				SELECT T1.FINTYPE,
					T1.FINCATEGORY,
					T1.FINTYPEDESC,
					T1.FINCCY,
					T1.FINDAYSCALTYPE,
					T1.FINACTYPE,
					T1.FINCONTINGENTACTYPE,
					T1.FINISGENREF,
					T1.FINMAXAMOUNT,
					T1.FINMINAMOUNT,
					T1.FINISOPENNEWFINAC,
					T1.FINDFTSTMTFRQ,
					T1.FINISALWMD,
					T1.FINSCHDMTHD,
					T1.FINISALWGRACE,
					T1.FINHISTRETENSION,
					T1.EQUALREPAYMENT,
					T1.FINRATETYPE,
					T1.FINBASERATE,
					T1.FINSPLRATE,
					T1.FININTRATE,
					T1.FINMINRATE,
					T1.FINMAXRATE,
					T1.FINDFTINTFRQ,
					T1.FINISINTCPZ,
					T1.FINCPZFRQ,
					T1.FINISRVWALW,
					T1.FINRVWFRQ,
					T1.FINGRCRATETYPE,
					T1.FINGRCBASERATE,
					T1.FINGRCSPLRATE,
					T1.FINGRCINTRATE,
					T1.FINGRCMINRATE,
					T1.FINGRCMAXRATE,
					T1.FINGRCDFTINTFRQ,
					T1.FINGRCISINTCPZ,
					T1.FINGRCCPZFRQ,
					T1.FINGRCISRVWALW,
					T1.FINGRCRVWFRQ,
					T1.FINMINTERM,
					T1.FINMAXTERM,
					T1.FINDFTTERMS,
					T1.FINRPYFRQ,
					T1.FINREPAYMETHOD,
					T1.FINISALWPARTIALRPY,
					T1.FINISALWDIFFERMENT,
					T1.FINMAXDIFFERMENT,
					T1.FINISALWEARLYRPY,
					T1.FINISALWEARLYSETTLE,
					T1.FINODRPYTRIES,
					T1.FINEARLYPAYRULE,
					T1.FINEARLYSETTLERULE,
					T1.FINDEPOSITRESTRICTEDTO,
					T1.FINAEBUYORINCEPTION,
					T1.FINAESELLORMATURITY,
					T1.FINISACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.STEPFINANCE,
					T1.STEPPINGMANDATORY,
					T1.ALWMANUALSTEPS,
					T1.ALWDSTEPPOLICIES,
					T1.DFTSTEPPOLICY,
					T4.ACTYPEDESC LOVDESCFINCONTINGENTACTYPENAME,
					T5.ACTYPEDESC LOVDESCFINACTYPENAME,
					T1.FINISDWPAYREQUIRED,
					T1.FINRVWRATEAPPLFOR,
					T1.FINALWRATECHANGEANYDATE,
					T1.FINISINTCPZATGRCEND,
					T1.FINELGRULECODE,
					T1.LIMITELGRULECODE,
					T1.FINSCHCALCODEONRVW,
					T1.ALWPLANDEFERMENT,
					T1.PLANDEFERCOUNT,
					T1.FINASSETTYPE,
					T1.PFTPAYACTYPE,
					T1.FINISOPENPFTPAYACC,
					T31.ACTYPEDESC LOVDESCPFTPAYACTYPENAME,
					T1.FINISALWGRCREPAY,
					T1.FINGRCSCHDMTHD,
					T1.FINGRCMARGIN,
					T1.FINMARGIN,
					T1.FINSCHEDULEON,
					T1.FINGRCSCHEDULEON,
					T1.FINCOMMITMENTREQ,
					T1.FINCOLLATERALREQ,
					T1.FINDEPRECIATIONREQ,
					T1.FINDEPRECIATIONFRQ,
					T1.FINBANKCONTINGENTACTYPE,
					T1.FINPROVISIONACTYPE,
					T38.ACTYPEDESC LOVDESCFINBANKCONTACTYPENAME,
					T39.ACTYPEDESC LOVDESCFINPROVISIONACTYPENAME,
					T1.ALLOWRIAINVESTMENT,
					T1.OVERRIDELIMIT,
					T1.LIMITREQUIRED,
					T1.FINCOMMITMENTOVRRIDE,
					T1.FINCOLLATERALOVRRIDE,
					T1.FINPFTUNCHANGED,
					T1.APPLYODPENALTY,
					T1.ODINCGRCDAYS,
					T1.ODCHARGETYPE,
					T1.ODGRACEDAYS,
					T1.ODCHARGECALON,
					T1.ODCHARGEAMTORPERC,
					T1.ODALLOWWAIVER,
					T1.ODMAXWAIVERPERC,
					T1.FINDIVISION,
					T48.DIVISIONCODEDESC LOVDESCFINDIVISIONNAME,
					T48.ENTITYCODE LOVDESCENTITYCODE,
					T1.FINSUSPACTYPE,
					T49.ACTYPEDESC LOVDESCFINSUSPACTYPENAME,
					T1.PRODUCT,
					T1.STARTDATE,
					T1.ENDDATE,
					T1.ALLOWDOWNPAYPGM,
					T1.FINTYPEDESC LOVDESCPROMOFINTYPEDESC,
					T1.REMARKS,
					T1.ALWEARLYPAYMETHODS,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.ALWADVANCERENT,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.ROLLOVERFINANCE,
					T1.ROLLOVERFRQ,
					T1.DOWNPAYRULE,
					T59.RULECODE DOWNPAYRULECODE,
					T59.RULECODEDESC DOWNPAYRULEDESC,
					T1.FINSUSPTRIGGER,
					T1.FINSUSPREMARKS,
					T1.ALWMULTIPARTYDISB,
					T1.COLLATERALTYPE,
					T1.TDSAPPLICABLE,
					T1.MANUALSCHEDULE,
					T1.APPLYGRCPRICING,
					T1.GRCPRICINGMETHOD,
					T1.APPLYRPYPRICING,
					T1.RPYPRICINGMETHOD,
					T1.RPYHIERARCHY,
					T67.RULECODE GRCPRICINGMETHODDESC,
					T68.RULECODE RPYPRICINGMETHODDESC,
					T1.DROPLINEOD,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.FINREPAYPFTONFRQ,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PFTDUESCHON,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.UNPLANEMIHLOCKPERIOD,
					T1.UNPLANEMICPZ,
					T1.REAGECPZ,
					T1.FDDLOCKPERIOD,
					T1.ALWDRPYMETHODS,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.ROUNDINGMODE,
					T1.ROUNDINGTARGET,
					T1.FREQUENCYDAYS,
					T1.QUICKDISB,
					T1.ALWMAXDISBCHECKREQ,
					T1.ALWREAGE,
					T1.ALWUNPLANEMIHOLIDAY,
					T1.PROFITCENTERID,
					T69.PROFITCENTERCODE,
					T69.PROFITCENTERDESC,
					T1.PRODUCTCATEGORY,
					T2.PRODUCTDESC FINCATEGORYDESC,
					T1.DEVELOPERFINANCE,
					T1.COSTOFFUNDS,
					T1.CHEQUECAPTUREREQ,
					T1.FINLTVCHECK,
					T1.PARTIALLYSECURED,
					T1.ALWADVEMI,
					T1.ADVEMIMINTERMS,
					T1.ADVEMIMAXTERMS,
					T1.ADVEMIDFTTERMS,
					T1.ADVEMISCHDMTHD,
					T1.BPIPFTDAYSBASIS,
					T1.ELIGIBILITYMETHODS,
					T1.ALWHYBRIDRATE,
					T1.FIXEDRATETENOR,
					T1.ODMINCAPAMOUNT,
					T1.ODRULECODE,
					T1.ALWZEROINTACC,
					T1.AUTOREJECTIONDAYS,
					T1.TAXNOMAND,
					T1.PUTCALLREQUIRED,
					T1.GRCADVINTERSETREQ,
					T1.GRCADVTYPE,
					T1.GRCADVMINTERMS,
					T1.GRCADVMAXTERMS,
					T1.GRCADVDEFAULTTERMS,
					T1.ADVINTERSETREQ,
					T1.ADVTYPE,
					T1.ADVMINTERMS,
					T1.ADVMAXTERMS,
					T1.ADVDEFAULTTERMS,
					T1.ADVSTAGE,
					T1.DSFREQ,
					T1.CASHCOLLATERALREQ,
					T1.TDSALLOWTOMODIFY,
					T1.TDSAPPLICABLETO,
					T1.ALWVAN,
					T1.VANALLOCATIONMETHOD,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING,
					T1.ALWSANCTIONAMT,
					T1.ALWSANCTIONAMTOVERRIDE,
					T1.SANBSDSCHDLE,
					T1.FINISRATERVWATGRCEND,
					T1.SCHDONPMTCAL,
					T1.AUTOAPPROVE,
					T1.ALWPLANNEDEMIINGRC,
					T1.GRCADJREQ,
					T1.GRCPERIODAFTRFULLDISB,
					T1.AUTOINCRGRCENDDATE,
					T1.GRCAUTOINCRMONTHS,
					T1.MAXAUTOINCRALLOWED,
					T1.THRLDTOMAINTAINGRCPRD
				FROM RMTFINANCETYPES T1
				LEFT JOIN BMTPRODUCT T2 ON T1.FINCATEGORY = T2.PRODUCTCODE
				LEFT JOIN RMTACCOUNTTYPES T4 ON T1.FINCONTINGENTACTYPE = T4.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T38 ON T1.FINBANKCONTINGENTACTYPE = T38.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T39 ON T1.FINPROVISIONACTYPE = T39.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T5 ON T1.FINACTYPE = T5.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T31 ON T1.PFTPAYACTYPE = T31.ACTYPE
				LEFT JOIN SMTDIVISIONDETAIL T48 ON T1.FINDIVISION = T48.DIVISIONCODE
				LEFT JOIN RMTACCOUNTTYPES T49 ON T1.FINSUSPACTYPE = T49.ACTYPE
				LEFT JOIN RULES T59 ON T1.DOWNPAYRULE = T59.RULEID
				LEFT JOIN RULES T67 ON T1.GRCPRICINGMETHOD = T67.RULEID
				LEFT JOIN RULES T68 ON T1.RPYPRICINGMETHOD = T68.RULEID
				LEFT JOIN PROFITCENTERS T69 ON T69.PROFITCENTERID = T1.PROFITCENTERID
				WHERE NOT (EXISTS ( SELECT 1 EXPR1
						 FROM RMTFINANCETYPES_TEMP
						  WHERE RMTFINANCETYPES_TEMP.FINTYPE = T1.FINTYPE))
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#1544.17_post" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rmtfinancetypes_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1544.18_pre" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1544.18" author="sampath.d">
		<createView viewName="RMTFINANCETYPES_AVIEW" replaceIfExists="true">
			<![CDATA[ 
				SELECT T1.FINTYPE,
					T1.FINCATEGORY,
					T1.FINTYPEDESC,
					T1.FINCCY,
					T1.FINDAYSCALTYPE,
					T1.FINACTYPE,
					T1.FINCONTINGENTACTYPE,
					T1.FINISGENREF,
					T1.FINMAXAMOUNT,
					T1.FINMINAMOUNT,
					T1.FINISOPENNEWFINAC,
					T1.FINDFTSTMTFRQ,
					T1.FINISALWMD,
					T1.FINSCHDMTHD,
					T1.FINISALWGRACE,
					T1.FINHISTRETENSION,
					T1.EQUALREPAYMENT,
					T1.FINRATETYPE,
					T1.FINBASERATE,
					T1.FINSPLRATE,
					T1.FININTRATE,
					T1.FINMINRATE,
					T1.FINMAXRATE,
					T1.FINDFTINTFRQ,
					T1.FINISINTCPZ,
					T1.FINCPZFRQ,
					T1.FINISRVWALW,
					T1.FINRVWFRQ,
					T1.FINGRCRATETYPE,
					T1.FINGRCBASERATE,
					T1.FINGRCSPLRATE,
					T1.FINGRCINTRATE,
					T1.FINGRCMINRATE,
					T1.FINGRCMAXRATE,
					T1.FINGRCDFTINTFRQ,
					T1.FINGRCISINTCPZ,
					T1.FINGRCCPZFRQ,
					T1.FINGRCISRVWALW,
					T1.FINGRCRVWFRQ,
					T1.FINMINTERM,
					T1.FINMAXTERM,
					T1.FINDFTTERMS,
					T1.FINRPYFRQ,
					T1.FINREPAYMETHOD,
					T1.FINISALWPARTIALRPY,
					T1.FINISALWDIFFERMENT,
					T1.FINMAXDIFFERMENT,
					T1.FINISALWEARLYRPY,
					T1.FINISALWEARLYSETTLE,
					T1.FINODRPYTRIES,
					T1.FINEARLYPAYRULE,
					T1.FINEARLYSETTLERULE,
					T1.FINDEPOSITRESTRICTEDTO,
					T1.FINAEBUYORINCEPTION,
					T1.FINAESELLORMATURITY,
					T1.FINISACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T1.STEPFINANCE,
					T1.STEPPINGMANDATORY,
					T1.ALWMANUALSTEPS,
					T1.ALWDSTEPPOLICIES,
					T1.DFTSTEPPOLICY,
					T4.ACTYPEDESC LOVDESCFINCONTINGENTACTYPENAME,
					T5.ACTYPEDESC LOVDESCFINACTYPENAME,
					T1.FINISDWPAYREQUIRED,
					T1.FINRVWRATEAPPLFOR,
					T1.FINALWRATECHANGEANYDATE,
					T1.FINISINTCPZATGRCEND,
					T1.FINELGRULECODE,
					T1.LIMITELGRULECODE,
					T1.FINSCHCALCODEONRVW,
					T1.ALWPLANDEFERMENT,
					T1.PLANDEFERCOUNT,
					T1.FINASSETTYPE,
					T1.PFTPAYACTYPE,
					T1.FINISOPENPFTPAYACC,
					T31.ACTYPEDESC LOVDESCPFTPAYACTYPENAME,
					T1.FINISALWGRCREPAY,
					T1.FINGRCSCHDMTHD,
					T1.FINGRCMARGIN,
					T1.FINMARGIN,
					T1.FINSCHEDULEON,
					T1.FINGRCSCHEDULEON,
					T1.FINCOMMITMENTREQ,
					T1.FINCOLLATERALREQ,
					T1.FINDEPRECIATIONREQ,
					T1.FINDEPRECIATIONFRQ,
					T1.FINBANKCONTINGENTACTYPE,
					T1.FINPROVISIONACTYPE,
					T38.ACTYPEDESC LOVDESCFINBANKCONTACTYPENAME,
					T39.ACTYPEDESC LOVDESCFINPROVISIONACTYPENAME,
					T1.ALLOWRIAINVESTMENT,
					T1.OVERRIDELIMIT,
					T1.LIMITREQUIRED,
					T1.FINCOMMITMENTOVRRIDE,
					T1.FINCOLLATERALOVRRIDE,
					T1.FINPFTUNCHANGED,
					T1.APPLYODPENALTY,
					T1.ODINCGRCDAYS,
					T1.ODCHARGETYPE,
					T1.ODGRACEDAYS,
					T1.ODCHARGECALON,
					T1.ODCHARGEAMTORPERC,
					T1.ODALLOWWAIVER,
					T1.ODMAXWAIVERPERC,
					T1.FINDIVISION,
					T48.DIVISIONCODEDESC LOVDESCFINDIVISIONNAME,
					T48.ENTITYCODE LOVDESCENTITYCODE,
					T1.FINSUSPACTYPE,
					T49.ACTYPEDESC LOVDESCFINSUSPACTYPENAME,
					T1.PRODUCT,
					T1.STARTDATE,
					T1.ENDDATE,
					T1.ALLOWDOWNPAYPGM,
					T1.REMARKS,
					T1.ALWEARLYPAYMETHODS,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.ALWADVANCERENT,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.ROLLOVERFINANCE,
					T1.ROLLOVERFRQ,
					T1.DOWNPAYRULE,
					T59.RULECODE DOWNPAYRULECODE,
					T59.RULECODEDESC DOWNPAYRULEDESC,
					T1.FINSUSPTRIGGER,
					T1.FINSUSPREMARKS,
					T1.ALWMULTIPARTYDISB,
					T1.COLLATERALTYPE,
					T1.TDSAPPLICABLE,
					T1.MANUALSCHEDULE,
					T1.APPLYGRCPRICING,
					T1.GRCPRICINGMETHOD,
					T1.APPLYRPYPRICING,
					T1.RPYPRICINGMETHOD,
					T1.RPYHIERARCHY,
					T67.RULECODE GRCPRICINGMETHODDESC,
					T68.RULECODE RPYPRICINGMETHODDESC,
					T1.DROPLINEOD,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.FINREPAYPFTONFRQ,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PFTDUESCHON,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.UNPLANEMIHLOCKPERIOD,
					T1.UNPLANEMICPZ,
					T1.REAGECPZ,
					T1.FDDLOCKPERIOD,
					T1.ALWDRPYMETHODS,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.ROUNDINGMODE,
					T1.ROUNDINGTARGET,
					T1.FREQUENCYDAYS,
					T1.QUICKDISB,
					T1.ALWREAGE,
					T1.ALWUNPLANEMIHOLIDAY,
					T1.ALWMAXDISBCHECKREQ,
					T1.FINTYPEDESC LOVDESCPROMOFINTYPEDESC,
					T1.PROFITCENTERID,
					T69.PROFITCENTERCODE,
					T69.PROFITCENTERDESC,
					T1.PRODUCTCATEGORY,
					T2.PRODUCTDESC FINCATEGORYDESC,
					T1.DEVELOPERFINANCE,
					T1.COSTOFFUNDS,
					T1.CHEQUECAPTUREREQ,
					T1.FINLTVCHECK,
					T1.PARTIALLYSECURED,
					T1.ALWADVEMI,
					T1.ADVEMIMINTERMS,
					T1.ADVEMIMAXTERMS,
					T1.ADVEMIDFTTERMS,
					T1.ADVEMISCHDMTHD,
					T1.BPIPFTDAYSBASIS,
					T1.ELIGIBILITYMETHODS,
					T1.ALWHYBRIDRATE,
					T1.FIXEDRATETENOR,
					T1.ODMINCAPAMOUNT,
					T1.ODRULECODE,
					T1.ALWZEROINTACC,
					T1.AUTOREJECTIONDAYS,
					T1.TAXNOMAND,
					T1.PUTCALLREQUIRED,
					T1.GRCADVINTERSETREQ,
					T1.GRCADVTYPE,
					T1.GRCADVMINTERMS,
					T1.GRCADVMAXTERMS,
					T1.GRCADVDEFAULTTERMS,
					T1.ADVINTERSETREQ,
					T1.ADVTYPE,
					T1.ADVMINTERMS,
					T1.ADVMAXTERMS,
					T1.ADVDEFAULTTERMS,
					T1.ADVSTAGE,
					T1.DSFREQ,
					T1.CASHCOLLATERALREQ,
					T1.TDSALLOWTOMODIFY,
					T1.TDSAPPLICABLETO,
					T1.ALWVAN,
					T1.VANALLOCATIONMETHOD,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING,
					T1.ALWSANCTIONAMT,
					T1.ALWSANCTIONAMTOVERRIDE,
					T1.SANBSDSCHDLE,
					T1.FINISRATERVWATGRCEND,
					T1.SCHDONPMTCAL,
					T1.AUTOAPPROVE,
					T1.ALWPLANNEDEMIINGRC,
					T1.GRCADJREQ,
					T1.GRCPERIODAFTRFULLDISB,
					T1.AUTOINCRGRCENDDATE,
					T1.GRCAUTOINCRMONTHS,
					T1.MAXAUTOINCRALLOWED,
					T1.THRLDTOMAINTAINGRCPRD
				FROM RMTFINANCETYPES T1
				LEFT JOIN BMTPRODUCT T2 ON T1.FINCATEGORY = T2.PRODUCTCODE
				LEFT JOIN RMTACCOUNTTYPES T4 ON T1.FINCONTINGENTACTYPE = T4.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T38 ON T1.FINBANKCONTINGENTACTYPE = T38.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T39 ON T1.FINPROVISIONACTYPE = T39.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T5 ON T1.FINACTYPE = T5.ACTYPE
				LEFT JOIN RMTACCOUNTTYPES T31 ON T1.PFTPAYACTYPE = T31.ACTYPE
				LEFT JOIN SMTDIVISIONDETAIL T48 ON T1.FINDIVISION = T48.DIVISIONCODE
				LEFT JOIN RMTACCOUNTTYPES T49 ON T1.FINSUSPACTYPE = T49.ACTYPE
				LEFT JOIN RULES T59 ON T1.DOWNPAYRULE = T59.RULEID
				LEFT JOIN RULES T67 ON T1.GRCPRICINGMETHOD = T67.RULEID
				LEFT JOIN RULES T68 ON T1.RPYPRICINGMETHOD = T68.RULEID
				LEFT JOIN PROFITCENTERS T69 ON T69.PROFITCENTERID = T1.PROFITCENTERID
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#1544.18_post" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rmtfinancetypes_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1544.19_pre" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rmtfinancetypes_orgview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1544.19" author="sampath.d">
		<createView viewName="RMTFINANCETYPES_ORGVIEW" replaceIfExists="true">
			<![CDATA[ 
				SELECT T1.FINTYPE,
				    T1.FINCATEGORY,
				    T1.FINTYPEDESC,
				    T1.FINCCY,
				    T1.FINDAYSCALTYPE,
				    T1.FINACTYPE,
				    T1.FINCONTINGENTACTYPE,
				    T1.FINISGENREF,
				    T1.FINMAXAMOUNT,
				    T1.FINMINAMOUNT,
				    T1.FINISOPENNEWFINAC,
				    T1.FINISALWMD,
				    T1.FINSCHDMTHD,
				    T1.FINISALWGRACE,
				    T1.EQUALREPAYMENT,
				    T1.FINRATETYPE,
				    T1.FINBASERATE,
				    T1.FINSPLRATE,
				    T1.FININTRATE,
				    T1.FINMINRATE,
				    T1.FINMAXRATE,
				    T1.FINDFTINTFRQ,
				    T1.FINISINTCPZ,
				    T1.FINCPZFRQ,
				    T1.FINISRVWALW,
				    T1.FINRVWFRQ,
				    T1.FINGRCRATETYPE,
				    T1.FINGRCBASERATE,
				    T1.FINGRCSPLRATE,
				    T1.FINGRCINTRATE,
				    T1.FINGRCMINRATE,
				    T1.FINGRCMAXRATE,
				    T1.FINGRCDFTINTFRQ,
				    T1.FINGRCISINTCPZ,
				    T1.FINGRCCPZFRQ,
				    T1.FINGRCISRVWALW,
				    T1.FINGRCRVWFRQ,
				    T1.FINMINTERM,
				    T1.FINMAXTERM,
				    T1.FINDFTTERMS,
				    T1.FINRPYFRQ,
				    T1.FINREPAYMETHOD,
				    T1.FINISALWDIFFERMENT,
				    T1.FINMAXDIFFERMENT,
				    T1.FINISACTIVE,
				    T1.STEPFINANCE,
				    T1.STEPPINGMANDATORY,
				    T1.ALWMANUALSTEPS,
				    T1.ALWDSTEPPOLICIES,
				    T1.DFTSTEPPOLICY,
				    T1.FINISDWPAYREQUIRED,
				    T1.FINRVWRATEAPPLFOR,
				    T1.FINALWRATECHANGEANYDATE,
				    T1.FINISINTCPZATGRCEND,
				    T1.FINSCHCALCODEONRVW,
				    T1.ALWPLANDEFERMENT,
				    T1.PLANDEFERCOUNT,
				    T1.PFTPAYACTYPE,
				    T1.FINISOPENPFTPAYACC,
				    T1.FINISALWGRCREPAY,
				    T1.FINGRCSCHDMTHD,
				    T1.FINGRCMARGIN,
				    T1.FINMARGIN,
				    T1.FINCOMMITMENTREQ,
				    T1.FINCOLLATERALREQ,
				    T1.FINDEPRECIATIONREQ,
				    T1.FINDEPRECIATIONFRQ,
				    T1.FINBANKCONTINGENTACTYPE,
				    T1.FINPROVISIONACTYPE,
				    T1.ALLOWRIAINVESTMENT,
				    T1.OVERRIDELIMIT,
				    T1.LIMITREQUIRED,
				    T1.FINCOMMITMENTOVRRIDE,
				    T1.FINCOLLATERALOVRRIDE,
				    T1.FINREPAYPFTONFRQ,
				    T1.FINPFTUNCHANGED,
				    T1.APPLYODPENALTY,
				    T1.ODINCGRCDAYS,
				    T1.ODCHARGETYPE,
				    T1.ODGRACEDAYS,
				    T1.ODCHARGECALON,
				    T1.ODCHARGEAMTORPERC,
				    T1.ODALLOWWAIVER,
				    T1.ODMAXWAIVERPERC,
				    T1.FINDIVISION,
				    T3.DIVISIONCODEDESC LOVDESCFINDIVISIONNAME,
				    T1.FINSUSPACTYPE,
				    T1.PRODUCT,
				    T1.STARTDATE,
				    T1.ENDDATE,
				    T1.ALLOWDOWNPAYPGM,
				    T1.FINTYPEDESC LOVDESCPROMOFINTYPEDESC,
				    T1.REMARKS,
				    T4.POLICYDESC LOVDESCDFTSTEPPOLICYNAME,
				    T1.PASTDUEPFTCALMTHD,
				    T1.PASTDUEPFTMARGIN,
				    T1.ALWADVANCERENT,
				    T1.GRCADVBASERATE,
				    T1.GRCADVMARGIN,
				    T1.GRCADVPFTRATE,
				    T1.RPYADVBASERATE,
				    T1.RPYADVMARGIN,
				    T1.RPYADVPFTRATE,
				    T1.ROLLOVERFINANCE,
				    T1.ROLLOVERFRQ,
				    T1.DOWNPAYRULE,
				    T1.ALWMULTIPARTYDISB,
				    T1.COLLATERALTYPE,
				    T1.TDSAPPLICABLE,
				    T5.RULECODE DOWNPAYRULECODE,
				    T5.RULECODEDESC DOWNPAYRULEDESC,
				    T1.APPLYGRCPRICING,
				    T1.APPLYRPYPRICING,
				    T6.RULECODE GRCPRICINGMETHODDESC,
				    T7.RULECODE RPYPRICINGMETHODDESC,
				    T1.DROPLINEOD,
				    T1.DROPPINGMETHOD,
				    T1.RATECHGANYDAY,
				    T4.STEPTYPE DFTSTEPPOLICYTYPE,
				    T1.MANUALSCHEDULE,
				    T1.ALWBPI,
				    T1.BPITREATMENT,
				    T1.PFTDUESCHON,
				    T1.PLANEMIHALW,
				    T1.PLANEMIHMETHOD,
				    T1.PLANEMIHMAXPERYEAR,
				    T1.PLANEMIHMAX,
				    T1.PLANEMIHLOCKPERIOD,
				    T1.PLANEMICPZ,
				    T1.UNPLANEMIHLOCKPERIOD,
				    T1.UNPLANEMICPZ,
				    T1.REAGECPZ,
				    T1.FDDLOCKPERIOD,
				    T1.ALWDRPYMETHODS,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.ROUNDINGMODE,
				    T1.ROUNDINGTARGET,
				    T1.FREQUENCYDAYS,
				    T1.QUICKDISB,
				    T1.ALWREAGE,
				    T1.ALWUNPLANEMIHOLIDAY,
				    T1.ALWMAXDISBCHECKREQ,
				    T1.PRODUCTCATEGORY,
				    T1.RPYHIERARCHY,
				    T1.DEVELOPERFINANCE,
				    T3.ENTITYCODE LOVDESCENTITYCODE,
				    T8.ENTITYDESC LOVDESCENTITYDESC,
				    T1.COSTOFFUNDS,
				    T1.CHEQUECAPTUREREQ,
				    T1.FINLTVCHECK,
				    T1.PARTIALLYSECURED,
				    T1.ALWADVEMI,
				    T1.ADVEMIMINTERMS,
				    T1.ADVEMIMAXTERMS,
				    T1.ADVEMIDFTTERMS,
				    T1.ADVEMISCHDMTHD,
				    T1.BPIPFTDAYSBASIS,
				    T1.ELIGIBILITYMETHODS,
				    T1.ALWHYBRIDRATE,
				    T1.FIXEDRATETENOR,
				    T1.ODMINCAPAMOUNT,
				    T1.ODRULECODE,
				    T1.ALWZEROINTACC,
				    T1.FINISALWPARTIALRPY,
				    T1.AUTOREJECTIONDAYS,
				    T1.TAXNOMAND,
				    T1.PUTCALLREQUIRED,
				    T1.GRCADVINTERSETREQ,
				    T1.GRCADVTYPE,
				    T1.GRCADVMINTERMS,
				    T1.GRCADVMAXTERMS,
				    T1.GRCADVDEFAULTTERMS,
				    T1.ADVINTERSETREQ,
				    T1.ADVTYPE,
				    T1.ADVMINTERMS,
				    T1.ADVMAXTERMS,
				    T1.ADVDEFAULTTERMS,
				    T1.ADVSTAGE,
				    T1.DSFREQ,
				    T1.CASHCOLLATERALREQ,
				    T1.ALWEARLYPAYMETHODS,
				    T1.TDSALLOWTOMODIFY,
				    T1.TDSAPPLICABLETO,
				    T1.ALWVAN,
				    T1.VANALLOCATIONMETHOD,
				    T1.ALLOWDRAWINGPOWER,
				    T1.ALLOWREVOLVING,
				    T1.ALWSANCTIONAMT,
				    T1.ALWSANCTIONAMTOVERRIDE,
				    T1.SANBSDSCHDLE,
				    T1.FINISRATERVWATGRCEND,
				    T1.SCHDONPMTCAL,
				    T1.AUTOAPPROVE,
				    T1.ALWPLANNEDEMIINGRC,
				    T1.GRCADJREQ,
					T1.GRCPERIODAFTRFULLDISB,
					T1.AUTOINCRGRCENDDATE,
					T1.GRCAUTOINCRMONTHS,
					T1.MAXAUTOINCRALLOWED,
					T1.THRLDTOMAINTAINGRCPRD					
			    FROM RMTFINANCETYPES T1
			    JOIN SMTDIVISIONDETAIL T3 ON T1.FINDIVISION = T3.DIVISIONCODE
			    LEFT JOIN STEPPOLICYHEADER T4 ON T1.DFTSTEPPOLICY = T4.POLICYCODE
			    LEFT JOIN RULES T5 ON T1.DOWNPAYRULE = T5.RULEID
			    LEFT JOIN RULES T6 ON T1.GRCPRICINGMETHOD = T6.RULEID
			    LEFT JOIN RULES T7 ON T1.RPYPRICINGMETHOD = T7.RULEID
			    LEFT JOIN ENTITY T8 ON T3.ENTITYCODE = T8.ENTITYCODE
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#1544.19_post" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rmtfinancetypes_orgview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1544.20" author="sampath.d">
		<sql>
			<![CDATA[
				UPDATE SEQSECRIGHTS set SeqNo = (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS);
				UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);
	
				INSERT INTO SECRIGHTS VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'FinanceTypeDialog_AutoIncrGrcEndDate', 'FinanceTypeDialog', 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO	SECRIGHTS VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'FinanceTypeDialog_GrcPeriodAftrFullDisb', 'FinanceTypeDialog', 1,	1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'FinanceTypeDialog_UnderConstruction', 'FinanceTypeDialog', 1,	1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'FinanceTypeDialog_GrcAutoIncrMonths', 'FinanceTypeDialog', 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO	SECRIGHTS VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'FinanceTypeDialog_MaxAutoIncrAllowed', 'FinanceTypeDialog', 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO	SECGROUPRIGHTS VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE =	'BFSD_ORIGINATION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE	RIGHTNAME = 'FinanceTypeDialog_AutoIncrGrcEndDate'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO	SECGROUPRIGHTS VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE =	'BFSD_ORIGINATION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE	RIGHTNAME = 'FinanceTypeDialog_GrcPeriodAftrFullDisb'), 1, 1, 1000,	CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO	SECGROUPRIGHTS VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE =	'BFSD_ORIGINATION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE	RIGHTNAME = 'FinanceTypeDialog_UnderConstruction'), 1, 1, 1000,	CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO	SECGROUPRIGHTS VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE =	'BFSD_ORIGINATION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE	RIGHTNAME = 'FinanceTypeDialog_GrcAutoIncrMonths'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE =	'BFSD_ORIGINATION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'FinanceTypeDialog_MaxAutoIncrAllowed'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				UPDATE SEQSECRIGHTS set SeqNo = (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS);
				UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1544.21" author="sampath.d">
		<sql>
			<![CDATA[
				UPDATE SEQSECRIGHTS set SeqNo = (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS);
				UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);

				INSERT INTO	SECRIGHTS VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'FinanceTypeDialog_ThrldToMaintainGrcPrd', 'FinanceTypeDialog', 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO	SECRIGHTS VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'FinanceMainDialog_AlwUnderConstruction', 'FinanceMainDialog', 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO	SECRIGHTS VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'FinanceMainDialog_EndGrcPeriodAftrFullDisb', 'FinanceMainDialog', 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO	SECRIGHTS VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'FinanceMainDialog_AutoIncGrcEndDate', 'FinanceMainDialog', 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SECGROUPRIGHTS VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE =	'BFSD_ORIGINATION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'FinanceTypeDialog_ThrldToMaintainGrcPrd'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO	SECGROUPRIGHTS VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE =	'BFSD_ORIGINATION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE	RIGHTNAME = 'FinanceMainDialog_AlwUnderConstruction'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO	SECGROUPRIGHTS VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE =	'BFSD_ORIGINATION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE	RIGHTNAME = 'FinanceMainDialog_EndGrcPeriodAftrFullDisb'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO	SECGROUPRIGHTS VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE =	'BFSD_ORIGINATION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE	RIGHTNAME = 'FinanceMainDialog_AutoIncGrcEndDate'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				UPDATE SEQSECRIGHTS set SeqNo = (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS);
				UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1544.22" author="sampath.d">
		<addColumn tableName="FinanceMain_Temp">
			<column name="AlwGrcAdj" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1544.23" author="sampath.d">
		<addColumn tableName="FinanceMain_Temp">
			<column name="EndGrcPeriodAftrFullDisb" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1544.24" author="sampath.d">
		<addColumn tableName="FinanceMain_Temp">
			<column name="AutoIncGrcEndDate" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1544.25" author="sampath.d">
		<addColumn tableName="FinanceMain">
			<column name="AlwGrcAdj" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1544.26" author="sampath.d">
		<addColumn tableName="FinanceMain">
			<column name="EndGrcPeriodAftrFullDisb" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1544.27" author="sampath.d">
		<addColumn tableName="FinanceMain">
			<column name="AutoIncGrcEndDate" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1544.28" author="sampath.d">
		<sql>
			<![CDATA[
				UPDATE FinanceMain_Temp Set AlwGrcAdj = 0;
				UPDATE FinanceMain_Temp Set EndGrcPeriodAftrFullDisb = 0;
				UPDATE FinanceMain_Temp Set AutoIncGrcEndDate = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1544.29" author="sampath.d" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE FinanceMain_Temp ADD CONSTRAINT DF_FinMain_Tmp_AlwGrcAdj DEFAULT 0 FOR AlwGrcAdj;
				ALTER TABLE FinanceMain_Temp ADD CONSTRAINT DF_Finmain_Tmp_EdGrPdArFlDisb DEFAULT 0 FOR EndGrcPeriodAftrFullDisb;
				ALTER TABLE FinanceMain_Temp ADD CONSTRAINT DF_FinMain_Tmp_AutIncGrEdDate DEFAULT 0 FOR AutoIncGrcEndDate;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1544.29" author="sampath.d" dbms="postgresql, oracle">
		<addDefaultValue columnName="AlwGrcAdj" tableName="FinanceMain_Temp" defaultValue="0" />
		<addDefaultValue columnName="EndGrcPeriodAftrFullDisb" tableName="FinanceMain_Temp" defaultValue="0" />
		<addDefaultValue columnName="AutoIncGrcEndDate" tableName="FinanceMain_Temp" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#1544.30" author="sampath.d">
		<sql>
			<![CDATA[
				UPDATE FinanceMain Set AlwGrcAdj = 0;
				UPDATE FinanceMain Set EndGrcPeriodAftrFullDisb = 0;
				UPDATE FinanceMain Set AutoIncGrcEndDate = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1544.31" author="sampath.d" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE FinanceMain ADD CONSTRAINT DF_Finmain_AlwGrcAdj DEFAULT 0 FOR AlwGrcAdj;
				ALTER TABLE FinanceMain ADD CONSTRAINT DF_Finmain_EdGrPdArFlDisb DEFAULT 0 FOR EndGrcPeriodAftrFullDisb;
				ALTER TABLE FinanceMain ADD CONSTRAINT DF_FinMain_AutIncGrEdDate DEFAULT 0 FOR AutoIncGrcEndDate;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1544.31" author="sampath.d" dbms="postgresql, oracle">
		<addDefaultValue columnName="AlwGrcAdj" tableName="FinanceMain" defaultValue="0" />
		<addDefaultValue columnName="EndGrcPeriodAftrFullDisb" tableName="FinanceMain" defaultValue="0" />
		<addDefaultValue columnName="AutoIncGrcEndDate" tableName="FinanceMain" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#1544.32" author="sampath.d">
		<addColumn tableName="RejectFinanceMain">
			<column name="AlwGrcAdj" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1544.33" author="sampath.d">
		<addColumn tableName="RejectFinanceMain">
			<column name="EndGrcPeriodAftrFullDisb" type="boolean" />
		</addColumn>
	</changeSet>
	<changeSet id="ST#1544.34" author="sampath.d">
		<addColumn tableName="RejectFinanceMain">
			<column name="AutoIncGrcEndDate" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1544.35" author="sampath.d">
		<sql>
			<![CDATA[
				UPDATE RejectFinanceMain Set AlwGrcAdj = 0;
				UPDATE RejectFinanceMain Set EndGrcPeriodAftrFullDisb = 0;
				UPDATE RejectFinanceMain Set AutoIncGrcEndDate = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1544.36" author="sampath.d" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE RejectFinanceMain ADD CONSTRAINT DF_RejFinmain_AlwGrcAdj DEFAULT 0 FOR AlwGrcAdj;
				ALTER TABLE RejectFinanceMain ADD CONSTRAINT DF_RejFinmain_EdGrPdArFlDisb DEFAULT 0 FOR EndGrcPeriodAftrFullDisb;
				ALTER TABLE RejectFinanceMain ADD CONSTRAINT DF_RejFinMain_AutIncGrEdDate DEFAULT 0 FOR AutoIncGrcEndDate;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1544.36" author="sampath.d" dbms="postgresql, oracle">
		<addDefaultValue columnName="AlwGrcAdj" tableName="RejectFinanceMain" defaultValue="0" />
		<addDefaultValue columnName="EndGrcPeriodAftrFullDisb" tableName="RejectFinanceMain" defaultValue="0" />
		<addDefaultValue columnName="AutoIncGrcEndDate" tableName="RejectFinanceMain" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#1544.37" author="sampath.d">
		<addColumn tableName="FINANCEMAIN_PA">
			<column name="AlwGrcAdj" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1544.38" author="sampath.d">
		<addColumn tableName="FINANCEMAIN_PA">
			<column name="EndGrcPeriodAftrFullDisb" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1544.39" author="sampath.d">
		<addColumn tableName="FINANCEMAIN_PA">
			<column name="AutoIncGrcEndDate" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1544.40" author="sampath.d">
		<sql>
			<![CDATA[
				UPDATE FINANCEMAIN_PA SET ALWGRCADJ = 0;
				UPDATE FINANCEMAIN_PA SET ENDGRCPERIODAFTRFULLDISB = 0;
				UPDATE FINANCEMAIN_PA SET AUTOINCGRCENDDATE = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1544.41" author="sampath.d" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE FINANCEMAIN_PA ADD CONSTRAINT DF_FINMAIN_PA_ALWGRCADJ DEFAULT 0 FOR ALWGRCADJ;
				ALTER TABLE FINANCEMAIN_PA ADD CONSTRAINT DF_FINMAIN_PA_EDGRPRIDFULDISB DEFAULT 0 FOR ENDGRCPERIODAFTRFULLDISB;
				ALTER TABLE FINANCEMAIN_PA ADD CONSTRAINT DF_FINMAIN_AUTOINCGRCENDDATE DEFAULT 0 FOR AUTOINCGRCENDDATE;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1544.41" author="sampath.d" dbms="postgresql, oracle">
		<addDefaultValue columnName="ALWGRCADJ" tableName="FINANCEMAIN_PA" defaultValue="0" />
		<addDefaultValue columnName="ENDGRCPERIODAFTRFULLDISB" tableName="FINANCEMAIN_PA" defaultValue="0" />
		<addDefaultValue columnName="AUTOINCGRCENDDATE" tableName="FINANCEMAIN_PA" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#1544.42" author="sampath.d">
		<addColumn tableName="WIFFINANCEMAIN">
			<column name="AlwGrcAdj" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1544.43" author="sampath.d">
		<addColumn tableName="WIFFINANCEMAIN">
			<column name="EndGrcPeriodAftrFullDisb" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1544.44" author="sampath.d">
		<addColumn tableName="WIFFINANCEMAIN">
			<column name="AutoIncGrcEndDate" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1544.45" author="sampath.d">
		<addColumn tableName="WIFFINANCEMAIN_TEMP">
			<column name="AlwGrcAdj" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1544.46" author="sampath.d">
		<addColumn tableName="WIFFINANCEMAIN_TEMP">
			<column name="EndGrcPeriodAftrFullDisb" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1544.47" author="sampath.d">
		<addColumn tableName="WIFFINANCEMAIN_TEMP">
			<column name="AutoIncGrcEndDate" type="boolean" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1544.48" author="sampath.d">
		<sql>
			<![CDATA[
				UPDATE WIFFINANCEMAIN Set AlwGrcAdj = 0;
				UPDATE WIFFINANCEMAIN Set EndGrcPeriodAftrFullDisb = 0;
				UPDATE WIFFINANCEMAIN Set AutoIncGrcEndDate = 0;
				]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1544.49" author="sampath.d">
		<sql>
			<![CDATA[
				UPDATE WIFFINANCEMAIN_TEMP Set AlwGrcAdj = 0;
				UPDATE WIFFINANCEMAIN_TEMP Set EndGrcPeriodAftrFullDisb = 0;
				UPDATE WIFFINANCEMAIN_TEMP Set AutoIncGrcEndDate = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1544.50" author="sampath.d" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE WIFFINANCEMAIN ADD CONSTRAINT DF_WIFFINANCEMAIN_ALWGRCADJ DEFAULT 0 FOR AlwGrcAdj;
				ALTER TABLE WIFFINANCEMAIN ADD CONSTRAINT DF_WIFFINMAIN_EDGRPRDARFLDISB DEFAULT 0 FOR EndGrcPeriodAftrFullDisb;
				ALTER TABLE WIFFINANCEMAIN ADD CONSTRAINT DF_WIFFIMAIN_AUTINCGRCENDDATE DEFAULT 0 FOR AutoIncGrcEndDate;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1544.51" author="sampath.d" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE WIFFINANCEMAIN_TEMP ADD CONSTRAINT DF_WIFFINMAIN_TMP_ALWGRCADJ DEFAULT 0 FOR AlwGrcAdj;
				ALTER TABLE WIFFINANCEMAIN_TEMP ADD CONSTRAINT DF_WIFFINMAIN_TMP_EDGRPDLDISB DEFAULT 0 FOR EndGrcPeriodAftrFullDisb;
				ALTER TABLE WIFFINANCEMAIN_TEMP ADD CONSTRAINT DF_WIFFINMAIN_TMP_ATINGREDATE DEFAULT 0 FOR AutoIncGrcEndDate;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1544.50" author="sampath.d" dbms="postgresql, oracle">
		<addDefaultValue columnName="AlwGrcAdj" tableName="WIFFINANCEMAIN" defaultValue="0" />
		<addDefaultValue columnName="EndGrcPeriodAftrFullDisb" tableName="WIFFINANCEMAIN" defaultValue="0" />
		<addDefaultValue columnName="AutoIncGrcEndDate" tableName="WIFFINANCEMAIN" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#1544.51" author="sampath.d" dbms="postgresql, oracle">
		<addDefaultValue columnName="AlwGrcAdj" tableName="WIFFINANCEMAIN_TEMP" defaultValue="0" />
		<addDefaultValue columnName="EndGrcPeriodAftrFullDisb" tableName="WIFFINANCEMAIN_TEMP" defaultValue="0" />
		<addDefaultValue columnName="AutoIncGrcEndDate" tableName="WIFFINANCEMAIN_TEMP" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#1544.52" author="sampath.d">
		<addColumn tableName="FINPFTDETAILS">
			<column name="NOAutoIncGrcEnd" type="smallint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1544.53" author="sampath.d">
		<addColumn tableName="FINPFTDETAILS_SNAPSHOT">
			<column name="NOAutoIncGrcEnd" type="smallint" />
		</addColumn>
	</changeSet>

	<changeSet id="ST#1544.54" author="sampath.d">
		<sql>
			<![CDATA[
				UPDATE FINPFTDETAILS Set NOAutoIncGrcEnd = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1544.55" author="sampath.d">
		<sql>
			<![CDATA[
				UPDATE FINPFTDETAILS_SNAPSHOT Set NOAutoIncGrcEnd = 0;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1544.56" author="sampath.d" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE FINPFTDETAILS ADD CONSTRAINT DF_FINPTDET_NOAutoInGrEd DEFAULT 0 FOR NOAutoIncGrcEnd;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1544.57" author="sampath.d" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE FINPFTDETAILS_SNAPSHOT ADD CONSTRAINT DF_FINPTDET_SNAP_NOAutoInGrEd DEFAULT 0 FOR NOAutoIncGrcEnd;
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1544.56" author="sampath.d" dbms="postgresql, oracle">
		<addDefaultValue columnName="NOAutoIncGrcEnd" tableName="FINPFTDETAILS" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#1544.57" author="sampath.d" dbms="postgresql, oracle">
		<addDefaultValue columnName="NOAutoIncGrcEnd" tableName="FINPFTDETAILS_SNAPSHOT" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#1544.58_pre" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemain_tview');
		 	]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1544.58" author="sampath.d">
		<createView viewName="financemain_tview" replaceIfExists="true">
		   <![CDATA[
				SELECT T1.FINREFERENCE,
					T1.INVESTMENTREF,
					T1.NUMBEROFTERMS,
					T1.GRCPERIODENDDATE,
					T1.ALLOWGRCPERIOD,
					T1.GRACEBASERATE,
					T1.GRACESPECIALRATE,
					T1.GRCPFTRATE,
					T1.GRCPFTFRQ,
					T1.NEXTGRCPFTDATE,
					T1.ALLOWGRCPFTRVW,
					T1.GRCPFTRVWFRQ,
					T1.NEXTGRCPFTRVWDATE,
					T1.ALLOWGRCCPZ,
					T1.GRCCPZFRQ,
					T1.NEXTGRCCPZDATE,
					T1.REPAYBASERATE,
					T1.REPAYSPECIALRATE,
					T1.REPAYPROFITRATE,
					T1.REPAYFRQ,
					T1.NEXTREPAYDATE,
					T1.REPAYPFTFRQ,
					T1.NEXTREPAYPFTDATE,
					T1.ALLOWREPAYRVW,
					T1.REPAYRVWFRQ,
					T1.NEXTREPAYRVWDATE,
					T1.ALLOWREPAYCPZ,
					T1.REPAYCPZFRQ,
					T1.NEXTREPAYCPZDATE,
					T1.MATURITYDATE,
					T1.CPZATGRACEEND,
					T1.DOWNPAYMENT,
					T1.GRACEFLATAMOUNT,
					T1.REQREPAYAMOUNT,
					T1.TOTALPROFIT,
					T1.TOTALCPZ,
					T1.TOTALGROSSPFT,
					T1.TOTALGROSSGRCPFT,
					T1.TOTALGRACEPFT,
					T1.TOTALGRACECPZ,
					T1.GRCRATEBASIS,
					T1.REPAYRATEBASIS,
					T1.FINTYPE,
					T1.FINREMARKS,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.REQMATURITY,
					T1.CALTERMS,
					T1.CALMATURITY,
					T1.FIRSTREPAY,
					T1.LASTREPAY,
					T1.FINSTARTDATE,
					T1.FINAMOUNT,
					T1.FINAMOUNT + T1.FEECHARGEAMT - T1.DOWNPAYMENT LOVDESCFINANCINGAMOUNT,
					T1.FINREPAYMENTAMOUNT,
					T1.CUSTID,
					T1.DEFFERMENTS,
					T1.PLANDEFERCOUNT,
					T1.FINBRANCH,
					T1.FINSOURCEID,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.ALLOWEDDEFFRQCHANGE,
					T1.AVAILEDDEFFRQCHANGE,
					T1.RECALTYPE,
					T1.FINASSETVALUE,
					T1.DISBACCOUNTID,
					T1.REPAYACCOUNTID,
					T1.FINISACTIVE,
					T1.LIMITVALID,
					T1.OVERRIDELIMIT,
					T1.SECURITYDEPOSIT,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T7.FINTYPEDESC LOVDESCFINTYPENAME,
					T7.FINMAXAMOUNT LOVDESCFINMAXAMT,
					T7.FINMINAMOUNT LOVDESCFINMINAMOUNT,
					T1.MINDOWNPAYPERC,
					T7.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
					T7.FINISDWPAYREQUIRED LOVDESCDWNPAYREQ,
					T7.FINMAXDIFFERMENT LOVDESCFINMAXDIFFERMENT,
					T12.BRANCHDESC LOVDESCFINBRANCHNAME,
					T12.BRANCHPROVINCE FINBRANCHPROVINCECODE,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.LASTREPAYRVWDATE,
					T1.LASTREPAYCPZDATE,
					T1.ALLOWGRCREPAY,
					T1.GRCSCHDMTHD,
					T1.GRCMARGIN,
					T1.REPAYMARGIN,
					T1.FINCURRASSETVALUE,
					T1.FINCOMMITMENTREF,
					T1.FINLIMITREF,
					T1.DEPRECIATIONFRQ,
					T1.FINCONTRACTDATE,
					T1.NEXTDEPDATE,
					T1.LASTDEPDATE,
					T1.FINACCOUNT,
					T1.FINCUSTPFTACCOUNT,
					T17.ACRTILLLBD LOVDESCACCRUEDTILLLBD,
					T7.FINRVWRATEAPPLFOR,
					T1.TOTALREPAYAMT,
					T1.CLOSINGSTATUS,
					T1.FINAPPROVEDDATE,
					T1.FEECHARGEAMT,
					T1.BLACKLISTED,
					T1.FINREPAYPFTONFRQ,
					T1.ANUALIZEDPERCRATE,
					T1.EFFECTIVERATEOFRETURN,
					T1.MIGRATEDFINANCE,
					T1.SCHEDULEMAINTAINED,
					T1.SCHEDULEREGENERATED,
					T1.FINPURPOSE,
					T39.LOANPURPOSEDESC LOVDESCFINPURPOSENAME,
					T1.FINSTATUS,
					T1.FINSTSREASON,
					T1.INITIATEUSER,
					T1.BANKNAME,
					T1.IBAN,
					T1.ACCOUNTTYPE,
					T1.DDAREFERENCENO,
					T7.FINSCHEDULEON LOVDESCFINSCHEDULEON,
					T1.CUSTDSR,
					T1.JOINTACCOUNT,
					T1.JOINTCUSTID,
					T1.DOWNPAYBANK,
					T1.DOWNPAYSUPL,
					T1.DOWNPAYACCOUNT,
					T1.SECURITYCOLLATERAL,
					T1.APPROVED,
					T1.DISCREPANCY,
					T1.LIMITAPPROVED,
					T1.GRACETERMS,
					T7.FINDIVISION LOVDESCFINDIVISION,
					T1.RCDMAINTAINSTS,
					T1.FINREPAYMETHOD,
					T1.GRCPROFITDAYSBASIS,
					T1.STEPFINANCE,
					T1.STEPTYPE,
					T1.STEPPOLICY,
					T1.ALWMANUALSTEPS,
					T1.NOOFSTEPS,
					T1.LINKEDFINREF,
					T1.NEXTUSERID,
					T1.PRIORITY,
					T24.POLICYDESC LOVDESCSTEPPOLICYNAME,
					T1.GRCMINRATE,
					T1.GRCMAXRATE,
					T1.RPYMINRATE,
					T1.RPYMAXRATE,
					T1.DEVIATIONAPPROVAL,
					T1.MANUALSCHEDULE,
					T1.TAKEOVERFINANCE,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.SUPPLEMENTRENT,
					T1.INCREASEDCOST,
					T1.CREDITINSAMT,
					T1.ROLLOVERFRQ,
					T1.NEXTROLLOVERDATE,
					T27.CUSTSTSDESCRIPTION,
					T1.SHARIASTATUS,
					T1.INITIATEDATE,
					T1.FINPREAPPROVEDREF,
					T1.MMAID,
					T1.ACCOUNTSOFFICER,
					T1.FEEACCOUNTID,
					T1.FINCANCELAC,
					T28.DEALERNAME LOVDESCACCOUNTSOFFICER,
					T28.DEALERCITY LOVDESCSOURCECITY,
					T1.DSACODE,
					T30.ROFFICERDESC DSACODEDESC,
					T1.TDSAPPLICABLE,
					T1.MANDATEID,
					T1.DROPLINEFRQ,
					T1.FIRSTDROPLINEDATE,
					T1.PFTSERVICINGODLIMIT,
					T1.INSURANCEAMT,
					T1.DEDUCTINSDISB,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.CALROUNDINGMODE,
					T1.ALWMULTIDISB,
					T1.APPLICATIONNO,
					T1.REFERRALID,
					T33.ROFFICERDESC REFERRALIDDESC,
					T1.DMACODE,
					T34.ROFFICERDESC DMACODEDESC,
					T1.SALESDEPARTMENT,
					T35.DEPTDESC SALESDEPARTMENTDESC,
					T1.QUICKDISB,
					T1.WIFREFERENCE,
					T1.UNPLANEMIHLOCKPERIOD,
					T1.UNPLANEMICPZ,
					T1.REAGECPZ,
					T1.MAXUNPLANNEDEMI,
					T1.MAXREAGEHOLIDAYS,
					T1.AVAILEDUNPLANEMI,
					T1.AVAILEDREAGEH,
					T1.BPIAMOUNT,
					T1.DEDUCTFEEDISB,
					T1.RVWRATEAPPLFOR,
					T1.SCHCALONRVW,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.PROMOTIONCODE,
					T1.RESTRUCTURELOAN,
					T1.OLDFINREFERENCE,
					T1.REAGEBUCKET,
					T1.FINCATEGORY,
					T1.PRODUCTCATEGORY,
					T1.ROUNDINGTARGET,
					T36.ENTITYCODE LOVDESCENTITYCODE,
					T1.ELIGIBILITYMETHOD,
					T38.FIELDCODEVALUE LOVELIGIBILITYMETHOD,
					T38.VALUEDESC LOVDESCELIGIBILITYMETHOD,
					T1.EMPLOYEENAME,
					T37.ROFFICERDESC EMPLOYEENAMEDESC,
					T1.SAMPLINGREQUIRED,
					T1.LEGALREQUIRED,
					T1.GRCMAXAMOUNT,
					T1.CONNECTOR,
					T40.DEALERNAME CONNECTORCODE,
					T40.DEALERCITY CONNECTORDESC,
					T1.ADVANCEEMI,
					T1.ADVEMITERMS,
					T1.BPIPFTDAYSBASIS,
					T1.FIXEDRATETENOR,
					T1.FIXEDTENORRATE,
					T12.BRANCHTEL FINBRANCHCONTACT,
					T1.PROCESSATTRIBUTES,
					T1.BUSINESSVERTICAL,
					BV.CODE BUSINESSVERTICALCODE,
					BV.DESCRIPTION BUSINESSVERTICALDESC,
					T1.GRCADVTYPE,
					T1.GRCADVTERMS,
					T1.ADVTYPE,
					T1.ADVTERMS,
					T1.ADVSTAGE,
					T1.TDSPERCENTAGE,
					T1.TDSSTARTDATE,
					T1.TDSENDDATE,
					T1.TDSLIMITAMT,
					T1.VANREQ,
					T1.VANCODE,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING,
					T1.SANBSDSCHDLE,
					T1.PROMOTIONSEQID,
					T1.SVAMOUNT,
					T1.CBAMOUNT,
					T1.APPLIEDLOANAMT,
					T1.FINISRATERVWATGRCEND,
					T1.PLANEMIHALWINGRACE,
					T1.ALWGRCADJ,
					T1.ENDGRCPERIODAFTRFULLDISB,
					T1.AUTOINCGRCENDDATE
				FROM FINANCEMAIN_TEMP T1
				JOIN RMTFINANCETYPES T7 ON T1.FINTYPE  = T7.FINTYPE 
				LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH  = T12.BRANCHCODE 
				LEFT JOIN FINPFTDETAILS T17 ON T17.FINREFERENCE  = T1.FINREFERENCE 
				LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY  = T24.POLICYCODE 
				LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS  = T27.CUSTSTSCODE 
				LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
				LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE  = T30.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID  = T33.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE  = T34.ROFFICERCODE 
				LEFT JOIN BMTDEPARTMENTS T35 ON T1.SALESDEPARTMENT  = T35.DEPTCODE 
				LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION  = T36.DIVISIONCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME  = T37.ROFFICERCODE 
				LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE  = 'ELGMETHOD' 
				LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE  = T39.LOANPURPOSECODE 
				LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
				LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#1544.58_post" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1544.59_pre" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemain_aview');
		 	]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1544.59" author="sampath.d">
		<createView viewName="financemain_aview" replaceIfExists="true">
		 <![CDATA[ 
			SELECT T1.FINREFERENCE,
			    T1.INVESTMENTREF,
			    T1.NUMBEROFTERMS,
			    T1.GRCPERIODENDDATE,
			    T1.ALLOWGRCPERIOD,
			    T1.GRACEBASERATE,
			    T1.GRACESPECIALRATE,
			    T1.GRCPFTRATE,
			    T1.GRCPFTFRQ,
			    T1.NEXTGRCPFTDATE,
			    T1.ALLOWGRCPFTRVW,
			    T1.GRCPFTRVWFRQ,
			    T1.NEXTGRCPFTRVWDATE,
			    T1.ALLOWGRCCPZ,
			    T1.GRCCPZFRQ,
			    T1.NEXTGRCCPZDATE,
			    T1.REPAYBASERATE,
			    T1.REPAYSPECIALRATE,
			    T1.REPAYPROFITRATE,
			    T1.REPAYFRQ,
			    T1.NEXTREPAYDATE,
			    T1.REPAYPFTFRQ,
			    T1.NEXTREPAYPFTDATE,
			    T1.ALLOWREPAYRVW,
			    T1.REPAYRVWFRQ,
			    T1.NEXTREPAYRVWDATE,
			    T1.ALLOWREPAYCPZ,
			    T1.REPAYCPZFRQ,
			    T1.NEXTREPAYCPZDATE,
			    T1.MATURITYDATE,
			    T1.CPZATGRACEEND,
			    T1.DOWNPAYMENT,
			    T1.GRACEFLATAMOUNT,
			    T1.REQREPAYAMOUNT,
			    T1.TOTALPROFIT,
			    T1.TOTALCPZ,
			    T1.TOTALGROSSPFT,
			    T1.TOTALGROSSGRCPFT,
			    T1.TOTALGRACEPFT,
			    T1.TOTALGRACECPZ,
			    T1.GRCRATEBASIS,
			    T1.REPAYRATEBASIS,
			    T1.FINTYPE,
			    T1.FINREMARKS,
			    T1.FINCCY,
			    T1.SCHEDULEMETHOD,
			    T1.PROFITDAYSBASIS,
			    T1.REQMATURITY,
			    T1.CALTERMS,
			    T1.CALMATURITY,
			    T1.FIRSTREPAY,
			    T1.LASTREPAY,
			    T1.FINSTARTDATE,
			    T1.FINAMOUNT,
			    T1.FINAMOUNT + T1.FEECHARGEAMT - T1.DOWNPAYMENT LOVDESCFINANCINGAMOUNT,
			    T1.FINREPAYMENTAMOUNT,
			    T1.CUSTID,
			    T1.DEFFERMENTS,
			    T1.PLANDEFERCOUNT,
			    T1.FINBRANCH,
			    T1.FINSOURCEID,
			    T1.ALLOWEDDEFRPYCHANGE,
			    T1.AVAILEDDEFRPYCHANGE,
			    T1.ALLOWEDDEFFRQCHANGE,
			    T1.AVAILEDDEFFRQCHANGE,
			    T1.RECALTYPE,
			    T1.FINASSETVALUE,
			    T1.DISBACCOUNTID,
			    T1.REPAYACCOUNTID,
			    T1.FINISACTIVE,
			    T1.LIMITVALID,
			    T1.OVERRIDELIMIT,
			    T1.SECURITYDEPOSIT,
			    T1.VERSION,
			    T1.LASTMNTBY,
			    T1.LASTMNTON,
			    T1.RECORDSTATUS,
			    T1.ROLECODE,
			    T1.NEXTROLECODE,
			    T1.TASKID,
			    T1.NEXTTASKID,
			    T1.RECORDTYPE,
			    T1.WORKFLOWID,
			    T7.FINTYPEDESC LOVDESCFINTYPENAME,
			    T7.FINMAXAMOUNT LOVDESCFINMAXAMT,
			    T7.FINMINAMOUNT LOVDESCFINMINAMOUNT,
			    T1.MINDOWNPAYPERC,
			    T7.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
			    T7.FINISDWPAYREQUIRED LOVDESCDWNPAYREQ,
			    T7.FINMAXDIFFERMENT LOVDESCFINMAXDIFFERMENT,
			    T12.BRANCHDESC LOVDESCFINBRANCHNAME,
			    T12.BRANCHPROVINCE FINBRANCHPROVINCECODE,
			    T1.LASTREPAYDATE,
			    T1.LASTREPAYPFTDATE,
			    T1.LASTREPAYRVWDATE,
			    T1.LASTREPAYCPZDATE,
			    T1.ALLOWGRCREPAY,
			    T1.GRCSCHDMTHD,
			    T1.GRCMARGIN,
			    T1.REPAYMARGIN,
			    T1.FINCURRASSETVALUE,
			    T1.FINCOMMITMENTREF,
			    T1.FINLIMITREF,
			    T1.DEPRECIATIONFRQ,
			    T1.FINCONTRACTDATE,
			    T1.NEXTDEPDATE,
			    T1.LASTDEPDATE,
			    T1.FINACCOUNT,
			    T1.FINCUSTPFTACCOUNT,
			    T17.ACRTILLLBD LOVDESCACCRUEDTILLLBD,
			    T7.FINRVWRATEAPPLFOR,
			    T1.TOTALREPAYAMT,
			    T1.CLOSINGSTATUS,
			    T1.FINAPPROVEDDATE,
			    T1.FEECHARGEAMT,
			    T1.BLACKLISTED,
			    T1.FINREPAYPFTONFRQ,
			    T1.ANUALIZEDPERCRATE,
			    T1.EFFECTIVERATEOFRETURN,
			    T1.MIGRATEDFINANCE,
			    T1.SCHEDULEMAINTAINED,
			    T1.SCHEDULEREGENERATED,
			    T1.FINPURPOSE,
			    T39.LOANPURPOSEDESC LOVDESCFINPURPOSENAME,
			    T1.FINSTATUS,
			    T1.FINSTSREASON,
			    T1.INITIATEUSER,
			    T1.BANKNAME,
			    T1.IBAN,
			    T1.ACCOUNTTYPE,
			    T1.DDAREFERENCENO,
			    T7.FINSCHEDULEON LOVDESCFINSCHEDULEON,
			    T1.CUSTDSR,
			    T1.JOINTACCOUNT,
			    T1.JOINTCUSTID,
			    T1.DOWNPAYBANK,
			    T1.DOWNPAYSUPL,
			    T1.DOWNPAYACCOUNT,
			    T1.SECURITYCOLLATERAL,
			    T1.APPROVED,
			    T1.DISCREPANCY,
			    T1.LIMITAPPROVED,
			    T1.GRACETERMS,
			    T7.FINDIVISION LOVDESCFINDIVISION,
			    T1.RCDMAINTAINSTS,
			    T1.FINREPAYMETHOD,
			    T1.GRCPROFITDAYSBASIS,
			    T1.STEPFINANCE,
			    T1.STEPTYPE,
			    T1.STEPPOLICY,
			    T1.ALWMANUALSTEPS,
			    T1.NOOFSTEPS,
			    T1.LINKEDFINREF,
			    T1.NEXTUSERID,
			    T1.PRIORITY,
			    T24.POLICYDESC LOVDESCSTEPPOLICYNAME,
			    T1.GRCMINRATE,
			    T1.GRCMAXRATE,
			    T1.RPYMINRATE,
			    T1.RPYMAXRATE,
			    T1.DEVIATIONAPPROVAL,
			    T1.MANUALSCHEDULE,
			    T1.TAKEOVERFINANCE,
			    T1.GRCADVBASERATE,
			    T1.GRCADVMARGIN,
			    T1.GRCADVPFTRATE,
			    T1.RPYADVBASERATE,
			    T1.RPYADVMARGIN,
			    T1.RPYADVPFTRATE,
			    T1.SUPPLEMENTRENT,
			    T1.INCREASEDCOST,
			    T1.CREDITINSAMT,
			    T1.ROLLOVERFRQ,
			    T1.NEXTROLLOVERDATE,
			    T27.CUSTSTSDESCRIPTION,
			    T1.SHARIASTATUS,
			    T1.INITIATEDATE,
			    T1.FINPREAPPROVEDREF,
			    T1.MMAID,
			    T1.ACCOUNTSOFFICER,
			    T1.FEEACCOUNTID,
			    T1.FINCANCELAC,
			    T28.DEALERNAME LOVDESCACCOUNTSOFFICER,
			    T28.DEALERCITY LOVDESCSOURCECITY,
			    T1.DSACODE,
			    T30.ROFFICERDESC DSACODEDESC,
			    T1.TDSAPPLICABLE,
			    T1.MANDATEID,
			    T1.DROPLINEFRQ,
			    T1.FIRSTDROPLINEDATE,
			    T1.PFTSERVICINGODLIMIT,
			    T1.INSURANCEAMT,
			    T1.DEDUCTINSDISB,
			    T1.ALWBPI,
			    T1.BPITREATMENT,
			    T1.PLANEMIHALW,
			    T1.PLANEMIHMETHOD,
			    T1.PLANEMIHMAXPERYEAR,
			    T1.PLANEMIHMAX,
			    T1.PLANEMIHLOCKPERIOD,
			    T1.PLANEMICPZ,
			    T1.CALROUNDINGMODE,
			    T1.ALWMULTIDISB,
			    T1.APPLICATIONNO,
			    T1.REFERRALID,
			    T33.ROFFICERDESC REFERRALIDDESC,
			    T1.DMACODE,
			    T34.ROFFICERDESC DMACODEDESC,
			    T1.SALESDEPARTMENT,
			    T35.DEPTDESC SALESDEPARTMENTDESC,
			    T1.QUICKDISB,
			    T1.WIFREFERENCE,
			    T1.UNPLANEMIHLOCKPERIOD,
			    T1.UNPLANEMICPZ,
			    T1.REAGECPZ,
			    T1.MAXUNPLANNEDEMI,
			    T1.MAXREAGEHOLIDAYS,
			    T1.AVAILEDUNPLANEMI,
			    T1.AVAILEDREAGEH,
			    T1.BPIAMOUNT,
			    T1.DEDUCTFEEDISB,
			    T1.RVWRATEAPPLFOR,
			    T1.SCHCALONRVW,
			    T1.PASTDUEPFTCALMTHD,
			    T1.PASTDUEPFTMARGIN,
			    T1.DROPPINGMETHOD,
			    T1.RATECHGANYDAY,
			    T1.PROMOTIONCODE,
			    T1.RESTRUCTURELOAN,
			    T1.OLDFINREFERENCE,
			    T1.REAGEBUCKET,
			    T1.FINCATEGORY,
			    T1.PRODUCTCATEGORY,
			    T1.ROUNDINGTARGET,
			    T36.ENTITYCODE LOVDESCENTITYCODE,
			    T1.ELIGIBILITYMETHOD,
			    T38.FIELDCODEVALUE LOVELIGIBILITYMETHOD,
			    T38.VALUEDESC LOVDESCELIGIBILITYMETHOD,
			    T1.EMPLOYEENAME,
			    T37.ROFFICERDESC EMPLOYEENAMEDESC,
			    T1.SAMPLINGREQUIRED,
			    T1.LEGALREQUIRED,
			    T1.GRCMAXAMOUNT,
			    T1.CONNECTOR,
			    T40.DEALERNAME CONNECTORCODE,
			    T40.DEALERCITY CONNECTORDESC,
			    T1.ADVANCEEMI,
			    T1.ADVEMITERMS,
			    T1.BPIPFTDAYSBASIS,
			    T1.FIXEDRATETENOR,
			    T1.FIXEDTENORRATE,
			    T12.BRANCHTEL FINBRANCHCONTACT,
			    T1.PROCESSATTRIBUTES,
			    T1.BUSINESSVERTICAL,
			    BV.CODE BUSINESSVERTICALCODE,
			    BV.DESCRIPTION BUSINESSVERTICALDESC,
			    T1.GRCADVTYPE,
			    T1.GRCADVTERMS,
			    T1.ADVTYPE,
			    T1.ADVTERMS,
			    T1.ADVSTAGE,
			    T1.TDSPERCENTAGE,
			    T1.TDSSTARTDATE,
			    T1.TDSENDDATE,
			    T1.TDSLIMITAMT,
			    T1.VANREQ,
			    T1.VANCODE,
			    T1.ALLOWDRAWINGPOWER,
			    T1.ALLOWREVOLVING,
			    T1.SANBSDSCHDLE,
			    T1.PROMOTIONSEQID,
			    T1.SVAMOUNT,
			    T1.CBAMOUNT,
			    T1.APPLIEDLOANAMT,
			    T1.FINISRATERVWATGRCEND,
				T1.PLANEMIHALWINGRACE,
				T1.ALWGRCADJ,
				T1.ENDGRCPERIODAFTRFULLDISB,
				T1.AUTOINCGRCENDDATE
			FROM FINANCEMAIN T1
			JOIN RMTFINANCETYPES T7 ON T1.FINTYPE = T7.FINTYPE 
			LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH  = T12.BRANCHCODE 
			LEFT JOIN FINPFTDETAILS T17 ON T17.FINREFERENCE  = T1.FINREFERENCE 
			LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY  = T24.POLICYCODE 
			LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS  = T27.CUSTSTSCODE 
			LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
			LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE  = T30.ROFFICERCODE 
			LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID  = T33.ROFFICERCODE 
			LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE  = T34.ROFFICERCODE 
			LEFT JOIN BMTDEPARTMENTS T35 ON T1.SALESDEPARTMENT  = T35.DEPTCODE 
			LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION  = T36.DIVISIONCODE 
			LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME  = T37.ROFFICERCODE 
			LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE  = 'ELGMETHOD' 
			LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE  = T39.LOANPURPOSECODE 
			LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
			LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
			 ]]>
		</createView>
	</changeSet>

	<changeSet id="ST#1544.59_post" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1544.60_pre" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemain_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1544.60" author="sampath.d">
		<createView viewName="financemain_view" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINREFERENCE,
				    T1.INVESTMENTREF,
				    T1.NUMBEROFTERMS,
				    T1.GRCPERIODENDDATE,
				    T1.ALLOWGRCPERIOD,
				    T1.GRACEBASERATE,
				    T1.GRACESPECIALRATE,
				    T1.GRCPFTRATE,
				    T1.GRCPFTFRQ,
				    T1.NEXTGRCPFTDATE,
				    T1.ALLOWGRCPFTRVW,
				    T1.GRCPFTRVWFRQ,
				    T1.NEXTGRCPFTRVWDATE,
				    T1.ALLOWGRCCPZ,
				    T1.GRCCPZFRQ,
				    T1.NEXTGRCCPZDATE,
				    T1.REPAYBASERATE,
				    T1.REPAYSPECIALRATE,
				    T1.REPAYPROFITRATE,
				    T1.REPAYFRQ,
				    T1.NEXTREPAYDATE,
				    T1.REPAYPFTFRQ,
				    T1.NEXTREPAYPFTDATE,
				    T1.ALLOWREPAYRVW,
				    T1.REPAYRVWFRQ,
				    T1.NEXTREPAYRVWDATE,
				    T1.ALLOWREPAYCPZ,
				    T1.REPAYCPZFRQ,
				    T1.NEXTREPAYCPZDATE,
				    T1.MATURITYDATE,
				    T1.CPZATGRACEEND,
				    T1.DOWNPAYMENT,
				    T1.GRACEFLATAMOUNT,
				    T1.REQREPAYAMOUNT,
				    T1.TOTALPROFIT,
				    T1.TOTALCPZ,
				    T1.TOTALGROSSPFT,
				    T1.TOTALGROSSGRCPFT,
				    T1.TOTALGRACEPFT,
				    T1.TOTALGRACECPZ,
				    T1.GRCRATEBASIS,
				    T1.REPAYRATEBASIS,
				    T1.FINTYPE,
				    T1.FINREMARKS,
				    T1.FINCCY,
				    T1.SCHEDULEMETHOD,
				    T1.PROFITDAYSBASIS,
				    T1.REQMATURITY,
				    T1.CALTERMS,
				    T1.CALMATURITY,
				    T1.FIRSTREPAY,
				    T1.LASTREPAY,
				    T1.FINSTARTDATE,
				    T1.FINAMOUNT,
				    T1.FINAMOUNT + T1.FEECHARGEAMT - T1.DOWNPAYMENT LOVDESCFINANCINGAMOUNT,
				    T1.FINREPAYMENTAMOUNT,
				    T1.CUSTID,
				    T1.DEFFERMENTS,
				    T1.PLANDEFERCOUNT,
				    T1.FINBRANCH,
				    T1.FINSOURCEID,
				    T1.ALLOWEDDEFRPYCHANGE,
				    T1.AVAILEDDEFRPYCHANGE,
				    T1.ALLOWEDDEFFRQCHANGE,
				    T1.AVAILEDDEFFRQCHANGE,
				    T1.RECALTYPE,
				    T1.FINASSETVALUE,
				    T1.DISBACCOUNTID,
				    T1.REPAYACCOUNTID,
				    T1.FINISACTIVE,
				    T1.LIMITVALID,
				    T1.OVERRIDELIMIT,
				    T1.SECURITYDEPOSIT,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T7.FINTYPEDESC LOVDESCFINTYPENAME,
				    T7.FINMAXAMOUNT LOVDESCFINMAXAMT,
				    T7.FINMINAMOUNT LOVDESCFINMINAMOUNT,
				    T1.MINDOWNPAYPERC,
				    T7.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
				    T7.FINISDWPAYREQUIRED LOVDESCDWNPAYREQ,
				    T7.FINMAXDIFFERMENT LOVDESCFINMAXDIFFERMENT,
				    T12.BRANCHDESC LOVDESCFINBRANCHNAME,
				    T12.BRANCHPROVINCE FINBRANCHPROVINCECODE,
				    T1.LASTREPAYDATE,
				    T1.LASTREPAYPFTDATE,
				    T1.LASTREPAYRVWDATE,
				    T1.LASTREPAYCPZDATE,
				    T1.ALLOWGRCREPAY,
				    T1.GRCSCHDMTHD,
				    T1.GRCMARGIN,
				    T1.REPAYMARGIN,
				    T1.FINCURRASSETVALUE,
				    T1.FINCOMMITMENTREF,
				    T1.FINLIMITREF,
				    T1.DEPRECIATIONFRQ,
				    T1.FINCONTRACTDATE,
				    T1.NEXTDEPDATE,
				    T1.LASTDEPDATE,
				    T1.FINACCOUNT,
				    T1.FINCUSTPFTACCOUNT,
				    T17.ACRTILLLBD LOVDESCACCRUEDTILLLBD,
				    T7.FINRVWRATEAPPLFOR,
				    T1.TOTALREPAYAMT,
				    T1.CLOSINGSTATUS,
				    T1.FINAPPROVEDDATE,
				    T1.FEECHARGEAMT,
				    T1.BLACKLISTED,
				    T1.FINREPAYPFTONFRQ,
				    T1.ANUALIZEDPERCRATE,
				    T1.EFFECTIVERATEOFRETURN,
				    T1.MIGRATEDFINANCE,
				    T1.SCHEDULEMAINTAINED,
				    T1.SCHEDULEREGENERATED,
				    T1.FINPURPOSE,
				    T39.LOANPURPOSEDESC LOVDESCFINPURPOSENAME,
				    T1.FINSTATUS,
				    T1.FINSTSREASON,
				    T1.INITIATEUSER,
				    T1.BANKNAME,
				    T1.IBAN,
				    T1.ACCOUNTTYPE,
				    T1.DDAREFERENCENO,
				    T7.FINSCHEDULEON LOVDESCFINSCHEDULEON,
				    T1.CUSTDSR,
				    T1.JOINTACCOUNT,
				    T1.JOINTCUSTID,
				    T1.DOWNPAYBANK,
				    T1.DOWNPAYSUPL,
				    T1.DOWNPAYACCOUNT,
				    T1.SECURITYCOLLATERAL,
				    T1.APPROVED,
				    T1.DISCREPANCY,
				    T1.LIMITAPPROVED,
				    T1.GRACETERMS,
				    T7.FINDIVISION LOVDESCFINDIVISION,
				    T1.RCDMAINTAINSTS,
				    T1.FINREPAYMETHOD,
				    T1.GRCPROFITDAYSBASIS,
				    T1.STEPFINANCE,
				    T1.STEPTYPE,
				    T1.STEPPOLICY,
				    T1.ALWMANUALSTEPS,
				    T1.NOOFSTEPS,
				    T1.LINKEDFINREF,
				    T1.NEXTUSERID,
				    T1.PRIORITY,
				    T24.POLICYDESC LOVDESCSTEPPOLICYNAME,
				    T1.GRCMINRATE,
				    T1.GRCMAXRATE,
				    T1.RPYMINRATE,
				    T1.RPYMAXRATE,
				    T1.DEVIATIONAPPROVAL,
				    T1.MANUALSCHEDULE,
				    T1.TAKEOVERFINANCE,
				    T1.GRCADVBASERATE,
				    T1.GRCADVMARGIN,
				    T1.GRCADVPFTRATE,
				    T1.RPYADVBASERATE,
				    T1.RPYADVMARGIN,
				    T1.RPYADVPFTRATE,
				    T1.SUPPLEMENTRENT,
				    T1.INCREASEDCOST,
				    T1.CREDITINSAMT,
				    T1.ROLLOVERFRQ,
				    T1.NEXTROLLOVERDATE,
				    T27.CUSTSTSDESCRIPTION,
				    T1.SHARIASTATUS,
				    T1.INITIATEDATE,
				    T1.FINPREAPPROVEDREF,
				    T1.MMAID,
				    T1.ACCOUNTSOFFICER,
				    T1.FEEACCOUNTID,
				    T1.FINCANCELAC,
				    T28.DEALERNAME LOVDESCACCOUNTSOFFICER,
				    T28.DEALERCITY LOVDESCSOURCECITY,
				    T1.DSACODE,
				    T30.ROFFICERDESC DSACODEDESC,
				    T1.TDSAPPLICABLE,
				    T1.MANDATEID,
				    T1.DROPLINEFRQ,
				    T1.FIRSTDROPLINEDATE,
				    T1.PFTSERVICINGODLIMIT,
				    T1.INSURANCEAMT,
				    T1.DEDUCTINSDISB,
				    T1.ALWBPI,
				    T1.BPITREATMENT,
				    T1.PLANEMIHALW,
				    T1.PLANEMIHMETHOD,
				    T1.PLANEMIHMAXPERYEAR,
				    T1.PLANEMIHMAX,
				    T1.PLANEMIHLOCKPERIOD,
				    T1.PLANEMICPZ,
				    T1.CALROUNDINGMODE,
				    T1.ALWMULTIDISB,
				    T1.APPLICATIONNO,
				    T1.REFERRALID,
				    T33.ROFFICERDESC REFERRALIDDESC,
				    T1.DMACODE,
				    T34.ROFFICERDESC DMACODEDESC,
				    T1.SALESDEPARTMENT,
				    T35.DEPTDESC SALESDEPARTMENTDESC,
				    T1.QUICKDISB,
				    T1.WIFREFERENCE,
				    T1.UNPLANEMIHLOCKPERIOD,
				    T1.UNPLANEMICPZ,
				    T1.REAGECPZ,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.AVAILEDUNPLANEMI,
				    T1.AVAILEDREAGEH,
				    T1.BPIAMOUNT,
				    T1.DEDUCTFEEDISB,
				    T1.RVWRATEAPPLFOR,
				    T1.SCHCALONRVW,
				    T1.PASTDUEPFTCALMTHD,
				    T1.PASTDUEPFTMARGIN,
				    T1.DROPPINGMETHOD,
				    T1.RATECHGANYDAY,
				    T1.PROMOTIONCODE,
				    T1.RESTRUCTURELOAN,
				    T1.OLDFINREFERENCE,
				    T1.REAGEBUCKET,
				    T1.FINCATEGORY,
				    T1.PRODUCTCATEGORY,
				    T1.ROUNDINGTARGET,
				    T36.ENTITYCODE LOVDESCENTITYCODE,
				    T1.ELIGIBILITYMETHOD,
				    T38.FIELDCODEVALUE LOVELIGIBILITYMETHOD,
				    T38.VALUEDESC LOVDESCELIGIBILITYMETHOD,
				    T1.EMPLOYEENAME,
				    T37.ROFFICERDESC EMPLOYEENAMEDESC,
				    T1.SAMPLINGREQUIRED,
				    T1.LEGALREQUIRED,
				    T1.GRCMAXAMOUNT,
				    T1.CONNECTOR,
				    T40.DEALERNAME CONNECTORCODE,
				    T40.DEALERCITY CONNECTORDESC,
				    T1.ADVANCEEMI,
				    T1.ADVEMITERMS,
				    T1.BPIPFTDAYSBASIS,
				    T1.FIXEDRATETENOR,
				    T1.FIXEDTENORRATE,
				    T12.BRANCHTEL FINBRANCHCONTACT,
				    T1.PROCESSATTRIBUTES,
				    T1.BUSINESSVERTICAL,
				    BV.CODE BUSINESSVERTICALCODE,
				    BV.DESCRIPTION BUSINESSVERTICALDESC,
				    T1.GRCADVTYPE,
				    T1.GRCADVTERMS,
				    T1.ADVTYPE,
				    T1.ADVTERMS,
				    T1.ADVSTAGE,
				    T1.TDSPERCENTAGE,
				    T1.TDSSTARTDATE,
				    T1.TDSENDDATE,
				    T1.TDSLIMITAMT,
				    T1.VANREQ,
				    T1.VANCODE,
				    T1.ALLOWDRAWINGPOWER,
				    T1.ALLOWREVOLVING,
				    T1.SANBSDSCHDLE,
				    T1.PROMOTIONSEQID,
				    T1.SVAMOUNT,
				    T1.CBAMOUNT,
				    T1.APPLIEDLOANAMT,
				    T1.FINISRATERVWATGRCEND,
					T1.PLANEMIHALWINGRACE,
					T1.ALWGRCADJ,
					T1.ENDGRCPERIODAFTRFULLDISB,
					T1.AUTOINCGRCENDDATE
				FROM FINANCEMAIN_TEMP T1
				JOIN RMTFINANCETYPES T7 ON T1.FINTYPE  = T7.FINTYPE 
				LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH  = T12.BRANCHCODE 
				LEFT JOIN FINPFTDETAILS T17 ON T17.FINREFERENCE  = T1.FINREFERENCE 
				LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY  = T24.POLICYCODE 
				LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS  = T27.CUSTSTSCODE 
				LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
				LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE  = T30.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID  = T33.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE  = T34.ROFFICERCODE 
				LEFT JOIN BMTDEPARTMENTS T35 ON T1.SALESDEPARTMENT  = T35.DEPTCODE 
				LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION  = T36.DIVISIONCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME  = T37.ROFFICERCODE 
				LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE  = 'ELGMETHOD' 
				LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE  = T39.LOANPURPOSECODE 
				LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
				LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
				UNION ALL
				SELECT T1.FINREFERENCE,
				    T1.INVESTMENTREF,
				    T1.NUMBEROFTERMS,
				    T1.GRCPERIODENDDATE,
				    T1.ALLOWGRCPERIOD,
				    T1.GRACEBASERATE,
				    T1.GRACESPECIALRATE,
				    T1.GRCPFTRATE,
				    T1.GRCPFTFRQ,
				    T1.NEXTGRCPFTDATE,
				    T1.ALLOWGRCPFTRVW,
				    T1.GRCPFTRVWFRQ,
				    T1.NEXTGRCPFTRVWDATE,
				    T1.ALLOWGRCCPZ,
				    T1.GRCCPZFRQ,
				    T1.NEXTGRCCPZDATE,
				    T1.REPAYBASERATE,
				    T1.REPAYSPECIALRATE,
				    T1.REPAYPROFITRATE,
				    T1.REPAYFRQ,
				    T1.NEXTREPAYDATE,
				    T1.REPAYPFTFRQ,
				    T1.NEXTREPAYPFTDATE,
				    T1.ALLOWREPAYRVW,
				    T1.REPAYRVWFRQ,
				    T1.NEXTREPAYRVWDATE,
				    T1.ALLOWREPAYCPZ,
				    T1.REPAYCPZFRQ,
				    T1.NEXTREPAYCPZDATE,
				    T1.MATURITYDATE,
				    T1.CPZATGRACEEND,
				    T1.DOWNPAYMENT,
				    T1.GRACEFLATAMOUNT,
				    T1.REQREPAYAMOUNT,
				    T1.TOTALPROFIT,
				    T1.TOTALCPZ,
				    T1.TOTALGROSSPFT,
				    T1.TOTALGROSSGRCPFT,
				    T1.TOTALGRACEPFT,
				    T1.TOTALGRACECPZ,
				    T1.GRCRATEBASIS,
				    T1.REPAYRATEBASIS,
				    T1.FINTYPE,
				    T1.FINREMARKS,
				    T1.FINCCY,
				    T1.SCHEDULEMETHOD,
				    T1.PROFITDAYSBASIS,
				    T1.REQMATURITY,
				    T1.CALTERMS,
				    T1.CALMATURITY,
				    T1.FIRSTREPAY,
				    T1.LASTREPAY,
				    T1.FINSTARTDATE,
				    T1.FINAMOUNT,
				    T1.FINAMOUNT + T1.FEECHARGEAMT - T1.DOWNPAYMENT LOVDESCFINANCINGAMOUNT,
				    T1.FINREPAYMENTAMOUNT,
				    T1.CUSTID,
				    T1.DEFFERMENTS,
				    T1.PLANDEFERCOUNT,
				    T1.FINBRANCH,
				    T1.FINSOURCEID,
				    T1.ALLOWEDDEFRPYCHANGE,
				    T1.AVAILEDDEFRPYCHANGE,
				    T1.ALLOWEDDEFFRQCHANGE,
				    T1.AVAILEDDEFFRQCHANGE,
				    T1.RECALTYPE,
				    T1.FINASSETVALUE,
				    T1.DISBACCOUNTID,
				    T1.REPAYACCOUNTID,
				    T1.FINISACTIVE,
				    T1.LIMITVALID,
				    T1.OVERRIDELIMIT,
				    T1.SECURITYDEPOSIT,
				    T1.VERSION,
				    T1.LASTMNTBY,
				    T1.LASTMNTON,
				    T1.RECORDSTATUS,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.RECORDTYPE,
				    T1.WORKFLOWID,
				    T7.FINTYPEDESC LOVDESCFINTYPENAME,
				    T7.FINMAXAMOUNT LOVDESCFINMAXAMT,
				    T7.FINMINAMOUNT LOVDESCFINMINAMOUNT,
				    T1.MINDOWNPAYPERC,
				    T7.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
				    T7.FINISDWPAYREQUIRED LOVDESCDWNPAYREQ,
				    T7.FINMAXDIFFERMENT LOVDESCFINMAXDIFFERMENT,
				    T12.BRANCHDESC LOVDESCFINBRANCHNAME,
				    T12.BRANCHPROVINCE FINBRANCHPROVINCECODE,
				    T1.LASTREPAYDATE,
				    T1.LASTREPAYPFTDATE,
				    T1.LASTREPAYRVWDATE,
				    T1.LASTREPAYCPZDATE,
				    T1.ALLOWGRCREPAY,
				    T1.GRCSCHDMTHD,
				    T1.GRCMARGIN,
				    T1.REPAYMARGIN,
				    T1.FINCURRASSETVALUE,
				    T1.FINCOMMITMENTREF,
				    T1.FINLIMITREF,
				    T1.DEPRECIATIONFRQ,
				    T1.FINCONTRACTDATE,
				    T1.NEXTDEPDATE,
				    T1.LASTDEPDATE,
				    T1.FINACCOUNT,
				    T1.FINCUSTPFTACCOUNT,
				    T17.ACRTILLLBD LOVDESCACCRUEDTILLLBD,
				    T7.FINRVWRATEAPPLFOR,
				    T1.TOTALREPAYAMT,
				    T1.CLOSINGSTATUS,
				    T1.FINAPPROVEDDATE,
				    T1.FEECHARGEAMT,
				    T1.BLACKLISTED,
				    T1.FINREPAYPFTONFRQ,
				    T1.ANUALIZEDPERCRATE,
				    T1.EFFECTIVERATEOFRETURN,
				    T1.MIGRATEDFINANCE,
				    T1.SCHEDULEMAINTAINED,
				    T1.SCHEDULEREGENERATED,
				    T1.FINPURPOSE,
				    T39.LOANPURPOSEDESC LOVDESCFINPURPOSENAME,
				    T1.FINSTATUS,
				    T1.FINSTSREASON,
				    T1.INITIATEUSER,
				    T1.BANKNAME,
				    T1.IBAN,
				    T1.ACCOUNTTYPE,
				    T1.DDAREFERENCENO,
				    T7.FINSCHEDULEON LOVDESCFINSCHEDULEON,
				    T1.CUSTDSR,
				    T1.JOINTACCOUNT,
				    T1.JOINTCUSTID,
				    T1.DOWNPAYBANK,
				    T1.DOWNPAYSUPL,
				    T1.DOWNPAYACCOUNT,
				    T1.SECURITYCOLLATERAL,
				    T1.APPROVED,
				    T1.DISCREPANCY,
				    T1.LIMITAPPROVED,
				    T1.GRACETERMS,
				    T7.FINDIVISION LOVDESCFINDIVISION,
				    T1.RCDMAINTAINSTS,
				    T1.FINREPAYMETHOD,
				    T1.GRCPROFITDAYSBASIS,
				    T1.STEPFINANCE,
				    T1.STEPTYPE,
				    T1.STEPPOLICY,
				    T1.ALWMANUALSTEPS,
				    T1.NOOFSTEPS,
				    T1.LINKEDFINREF,
				    T1.NEXTUSERID,
				    T1.PRIORITY,
				    T24.POLICYDESC LOVDESCSTEPPOLICYNAME,
				    T1.GRCMINRATE,
				    T1.GRCMAXRATE,
				    T1.RPYMINRATE,
				    T1.RPYMAXRATE,
				    T1.DEVIATIONAPPROVAL,
				    T1.MANUALSCHEDULE,
				    T1.TAKEOVERFINANCE,
				    T1.GRCADVBASERATE,
				    T1.GRCADVMARGIN,
				    T1.GRCADVPFTRATE,
				    T1.RPYADVBASERATE,
				    T1.RPYADVMARGIN,
				    T1.RPYADVPFTRATE,
				    T1.SUPPLEMENTRENT,
				    T1.INCREASEDCOST,
				    T1.CREDITINSAMT,
				    T1.ROLLOVERFRQ,
				    T1.NEXTROLLOVERDATE,
				    T27.CUSTSTSDESCRIPTION,
				    T1.SHARIASTATUS,
				    T1.INITIATEDATE,
				    T1.FINPREAPPROVEDREF,
				    T1.MMAID,
				    T1.ACCOUNTSOFFICER,
				    T1.FEEACCOUNTID,
				    T1.FINCANCELAC,
				    T28.DEALERNAME LOVDESCACCOUNTSOFFICER,
				    T28.DEALERCITY LOVDESCSOURCECITY,
				    T1.DSACODE,
				    T30.ROFFICERDESC DSACODEDESC,
				    T1.TDSAPPLICABLE,
				    T1.MANDATEID,
				    T1.DROPLINEFRQ,
				    T1.FIRSTDROPLINEDATE,
				    T1.PFTSERVICINGODLIMIT,
				    T1.INSURANCEAMT,
				    T1.DEDUCTINSDISB,
				    T1.ALWBPI,
				    T1.BPITREATMENT,
				    T1.PLANEMIHALW,
				    T1.PLANEMIHMETHOD,
				    T1.PLANEMIHMAXPERYEAR,
				    T1.PLANEMIHMAX,
				    T1.PLANEMIHLOCKPERIOD,
				    T1.PLANEMICPZ,
				    T1.CALROUNDINGMODE,
				    T1.ALWMULTIDISB,
				    T1.APPLICATIONNO,
				    T1.REFERRALID,
				    T33.ROFFICERDESC REFERRALIDDESC,
				    T1.DMACODE,
				    T34.ROFFICERDESC DMACODEDESC,
				    T1.SALESDEPARTMENT,
				    T35.DEPTDESC SALESDEPARTMENTDESC,
				    T1.QUICKDISB,
				    T1.WIFREFERENCE,
				    T1.UNPLANEMIHLOCKPERIOD,
				    T1.UNPLANEMICPZ,
				    T1.REAGECPZ,
				    T1.MAXUNPLANNEDEMI,
				    T1.MAXREAGEHOLIDAYS,
				    T1.AVAILEDUNPLANEMI,
				    T1.AVAILEDREAGEH,
				    T1.BPIAMOUNT,
				    T1.DEDUCTFEEDISB,
				    T1.RVWRATEAPPLFOR,
				    T1.SCHCALONRVW,
				    T1.PASTDUEPFTCALMTHD,
				    T1.PASTDUEPFTMARGIN,
				    T1.DROPPINGMETHOD,
				    T1.RATECHGANYDAY,
				    T1.PROMOTIONCODE,
				    T1.RESTRUCTURELOAN,
				    T1.OLDFINREFERENCE,
				    T1.REAGEBUCKET,
				    T1.FINCATEGORY,
				    T1.PRODUCTCATEGORY,
				    T1.ROUNDINGTARGET,
				    T36.ENTITYCODE LOVDESCENTITYCODE,
				    T1.ELIGIBILITYMETHOD,
				    T38.FIELDCODEVALUE LOVELIGIBILITYMETHOD,
				    T38.VALUEDESC LOVDESCELIGIBILITYMETHOD,
				    T1.EMPLOYEENAME,
				    T37.ROFFICERDESC EMPLOYEENAMEDESC,
				    T1.SAMPLINGREQUIRED,
				    T1.LEGALREQUIRED,
				    T1.GRCMAXAMOUNT,
				    T1.CONNECTOR,
				    T40.DEALERNAME CONNECTORCODE,
				    T40.DEALERCITY CONNECTORDESC,
				    T1.ADVANCEEMI,
				    T1.ADVEMITERMS,
				    T1.BPIPFTDAYSBASIS,
				    T1.FIXEDRATETENOR,
				    T1.FIXEDTENORRATE,
				    T12.BRANCHTEL FINBRANCHCONTACT,
				    T1.PROCESSATTRIBUTES,
				    T1.BUSINESSVERTICAL,
				    BV.CODE BUSINESSVERTICALCODE,
				    BV.DESCRIPTION BUSINESSVERTICALDESC,
				    T1.GRCADVTYPE,
				    T1.GRCADVTERMS,
				    T1.ADVTYPE,
				    T1.ADVTERMS,
				    T1.ADVSTAGE,
				    T1.TDSPERCENTAGE,
				    T1.TDSSTARTDATE,
				    T1.TDSENDDATE,
				    T1.TDSLIMITAMT,
				    T1.VANREQ,
				    T1.VANCODE,
				    T1.ALLOWDRAWINGPOWER,
				    T1.ALLOWREVOLVING,
				    T1.SANBSDSCHDLE,
				    T1.PROMOTIONSEQID,
				    T1.SVAMOUNT,
				    T1.CBAMOUNT,
				    T1.APPLIEDLOANAMT,
				    T1.FINISRATERVWATGRCEND,
					T1.PLANEMIHALWINGRACE,
					T1.ALWGRCADJ,
					T1.ENDGRCPERIODAFTRFULLDISB,
					T1.AUTOINCGRCENDDATE
				FROM FINANCEMAIN T1
				JOIN RMTFINANCETYPES T7 ON T1.FINTYPE  = T7.FINTYPE 
				LEFT JOIN RMTBRANCHES T12 ON T1.FINBRANCH  = T12.BRANCHCODE 
				LEFT JOIN FINPFTDETAILS T17 ON T17.FINREFERENCE  = T1.FINREFERENCE 
				LEFT JOIN STEPPOLICYHEADER T24 ON T1.STEPPOLICY  = T24.POLICYCODE 
				LEFT JOIN BMTCUSTSTATUSCODES T27 ON T1.FINSTATUS  = T27.CUSTSTSCODE 
				LEFT JOIN AMTVEHICLEDEALER T28 ON T1.ACCOUNTSOFFICER = T28.DEALERID
				LEFT JOIN RELATIONSHIPOFFICERS T30 ON T1.DSACODE  = T30.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T33 ON T1.REFERRALID  = T33.ROFFICERCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T34 ON T1.DMACODE  = T34.ROFFICERCODE 
				LEFT JOIN BMTDEPARTMENTS T35 ON T1.SALESDEPARTMENT  = T35.DEPTCODE 
				LEFT JOIN SMTDIVISIONDETAIL T36 ON T7.FINDIVISION  = T36.DIVISIONCODE 
				LEFT JOIN RELATIONSHIPOFFICERS T37 ON T1.EMPLOYEENAME  = T37.ROFFICERCODE 
				LEFT JOIN RMTLOVFIELDDETAIL T38 ON T1.ELIGIBILITYMETHOD = T38.FIELDCODEID AND T38.FIELDCODE  = 'ELGMETHOD' 
				LEFT JOIN LOANPURPOSES T39 ON T1.FINPURPOSE  = T39.LOANPURPOSECODE 
				LEFT JOIN AMTVEHICLEDEALER T40 ON T1.CONNECTOR = T40.DEALERID
				LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = T1.BUSINESSVERTICAL
				WHERE NOT (EXISTS ( SELECT 1 FROM FINANCEMAIN_TEMP 
					WHERE FINANCEMAIN_TEMP.FINREFERENCE  = T1.FINREFERENCE ))
				   ]]>
		</createView>
	</changeSet>

	<changeSet id="ST#1544.60_post" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1544.61_pre" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'wiffinancemain_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1544.61" author="sampath.d">
		<createView viewName="WIFFINANCEMAIN_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINREFERENCE,
					T1.NUMBEROFTERMS,
					T1.GRCPERIODENDDATE,
					T1.ALLOWGRCPERIOD,
					T1.GRACEBASERATE,
					T1.GRACESPECIALRATE,
					T1.GRCPFTRATE,
					T1.GRCPFTFRQ,
					T1.NEXTGRCPFTDATE,
					T1.ALLOWGRCPFTRVW,
					T1.GRCPFTRVWFRQ,
					T1.NEXTGRCPFTRVWDATE,
					T1.ALLOWGRCCPZ,
					T1.GRCCPZFRQ,
					T1.NEXTGRCCPZDATE,
					T1.REPAYBASERATE,
					T1.REPAYSPECIALRATE,
					T1.REPAYPROFITRATE,
					T1.REPAYFRQ,
					T1.NEXTREPAYDATE,
					T1.REPAYPFTFRQ,
					T1.NEXTREPAYPFTDATE,
					T1.ALLOWREPAYRVW,
					T1.REPAYRVWFRQ,
					T1.NEXTREPAYRVWDATE,
					T1.ALLOWREPAYCPZ,
					T1.REPAYCPZFRQ,
					T1.NEXTREPAYCPZDATE,
					T1.MATURITYDATE,
					T1.CPZATGRACEEND,
					T1.DOWNPAYMENT,
					T1.GRACEFLATAMOUNT,
					T1.REQREPAYAMOUNT,
					T1.TOTALPROFIT,
					T1.TOTALCPZ,
					T1.TOTALGROSSPFT,
					T1.TOTALGRACEPFT,
					T1.TOTALGRACECPZ,
					T1.GRCRATEBASIS,
					T1.REPAYRATEBASIS,
					T1.FINTYPE,
					T1.FINREMARKS,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.REQMATURITY,
					T1.CALTERMS,
					T1.CALMATURITY,
					T1.FIRSTREPAY,
					T1.LASTREPAY,
					T1.FINSTARTDATE,
					T1.FINAMOUNT,
					T1.FINREPAYMENTAMOUNT,
					T1.CUSTID,
					T1.DEFFERMENTS,
					T1.PLANDEFERCOUNT,
					T1.FINISACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T15.CUSTCIF LOVDESCCUSTCIF,
					T7.FINTYPEDESC LOVDESCFINTYPENAME,
					T1.FINBRANCH,
					T1.FINSOURCEID,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.ALLOWEDDEFFRQCHANGE,
					T1.AVAILEDDEFFRQCHANGE,
					T7.FINMAXAMOUNT LOVDESCFINMAXAMT,
					T7.FINMINAMOUNT LOVDESCFINMINAMOUNT,
					T7.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
					T1.MINDOWNPAYPERC,
					T7.FINISDWPAYREQUIRED LOVDESCDWNPAYREQ,
					T1.RECALTYPE,
					T1.FINASSETVALUE,
					T7.FINMAXDIFFERMENT LOVDESCFINMAXDIFFERMENT,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.LASTREPAYRVWDATE,
					T1.LASTREPAYCPZDATE,
					T1.DISBACCOUNTID,
					T1.REPAYACCOUNTID,
					T1.ALLOWGRCREPAY,
					T1.GRCSCHDMTHD,
					T1.REPAYMARGIN,
					T1.GRCMARGIN,
					T1.DEPRECIATIONFRQ,
					T1.FINCOMMITMENTREF,
					T1.FINCURRASSETVALUE,
					T1.FINCONTRACTDATE,
					T1.NEXTDEPDATE,
					T1.LASTDEPDATE,
					T1.FINACCOUNT,
					T1.FINCUSTPFTACCOUNT,
					T7.FINRVWRATEAPPLFOR,
					T1.TOTALREPAYAMT,
					T1.CLOSINGSTATUS,
					T1.FINAPPROVEDDATE,
					T1.FINREPAYPFTONFRQ,
					T1.ANUALIZEDPERCRATE,
					T1.EFFECTIVERATEOFRETURN,
					T1.DOWNPAYBANK,
					T1.DOWNPAYSUPL,
					T7.FINDIVISION LOVDESCFINDIVISIONNAME,
					T1.GRACETERMS,
					T14.FACILITYTYPE,
					T15.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
					T16.BRANCHDESC LOVDESCFINBRANCHNAME,
					T1.TOTALGROSSGRCPFT,
					T1.GRCPROFITDAYSBASIS,
					T1.STEPFINANCE,
					T1.STEPTYPE,
					T1.STEPPOLICY,
					T1.ALWMANUALSTEPS,
					T1.NOOFSTEPS,
					T1.LINKEDFINREF,
					T7.PRODUCT LOVDESCFINPRODUCT,
					T1.GRCMINRATE,
					T1.GRCMAXRATE,
					T1.RPYMINRATE,
					T1.RPYMAXRATE,
					T1.MANUALSCHEDULE,
					T1.TAKEOVERFINANCE,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.SUPPLEMENTRENT,
					T1.INCREASEDCOST,
					T1.FEEACCOUNTID,
					T1.TDSAPPLICABLE,
					T1.INSURANCEAMT,
					T1.DEDUCTINSDISB,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.CALROUNDINGMODE,
					T1.ALWMULTIDISB,
					T1.BPIAMOUNT,
					T1.DEDUCTFEEDISB,
					T1.FEECHARGEAMT,
					T1.RVWRATEAPPLFOR,
					T1.SCHCALONRVW,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.FINCATEGORY,
					T1.PRODUCTCATEGORY,
					T1.ROUNDINGTARGET,
					T1.GRCMAXAMOUNT,
					T1.ADVANCEEMI,
					T1.ADVEMITERMS,
					T1.BPIPFTDAYSBASIS,
					T1.FIXEDTENORRATE,
					T1.FIXEDRATETENOR,
					T1.GRCADVTYPE,
					T1.GRCADVTERMS,
					T1.ADVTYPE,
					T1.ADVTERMS,
					T1.ADVSTAGE,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING,
					T1.APPLIEDLOANAMT,
					T1.FINISRATERVWATGRCEND,
					T1.CBAMOUNT,
					T1.SVAMOUNT,
					T1.SANBSDSCHDLE,
					T1.PROMOTIONSEQID,
					T1.ALWGRCADJ,
					T1.ENDGRCPERIODAFTRFULLDISB,
					T1.AUTOINCGRCENDDATE
				FROM WIFFINANCEMAIN_TEMP T1
				LEFT JOIN WIFINDICATIVETERMDETAIL_TEMP T14 ON T14.FINREFERENCE = T1.FINREFERENCE
				LEFT JOIN CUSTOMERS T15 ON T15.CUSTID = T1.CUSTID
				JOIN RMTFINANCETYPES T7 ON T1.FINTYPE = T7.FINTYPE
				LEFT JOIN RMTBRANCHES T16 ON T1.FINBRANCH = T16.BRANCHCODE
				UNION ALL
				SELECT T1.FINREFERENCE,
					T1.NUMBEROFTERMS,
					T1.GRCPERIODENDDATE,
					T1.ALLOWGRCPERIOD,
					T1.GRACEBASERATE,
					T1.GRACESPECIALRATE,
					T1.GRCPFTRATE,
					T1.GRCPFTFRQ,
					T1.NEXTGRCPFTDATE,
					T1.ALLOWGRCPFTRVW,
					T1.GRCPFTRVWFRQ,
					T1.NEXTGRCPFTRVWDATE,
					T1.ALLOWGRCCPZ,
					T1.GRCCPZFRQ,
					T1.NEXTGRCCPZDATE,
					T1.REPAYBASERATE,
					T1.REPAYSPECIALRATE,
					T1.REPAYPROFITRATE,
					T1.REPAYFRQ,
					T1.NEXTREPAYDATE,
					T1.REPAYPFTFRQ,
					T1.NEXTREPAYPFTDATE,
					T1.ALLOWREPAYRVW,
					T1.REPAYRVWFRQ,
					T1.NEXTREPAYRVWDATE,
					T1.ALLOWREPAYCPZ,
					T1.REPAYCPZFRQ,
					T1.NEXTREPAYCPZDATE,
					T1.MATURITYDATE,
					T1.CPZATGRACEEND,
					T1.DOWNPAYMENT,
					T1.GRACEFLATAMOUNT,
					T1.REQREPAYAMOUNT,
					T1.TOTALPROFIT,
					T1.TOTALCPZ,
					T1.TOTALGROSSPFT,
					T1.TOTALGRACEPFT,
					T1.TOTALGRACECPZ,
					T1.GRCRATEBASIS,
					T1.REPAYRATEBASIS,
					T1.FINTYPE,
					T1.FINREMARKS,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.REQMATURITY,
					T1.CALTERMS,
					T1.CALMATURITY,
					T1.FIRSTREPAY,
					T1.LASTREPAY,
					T1.FINSTARTDATE,
					T1.FINAMOUNT,
					T1.FINREPAYMENTAMOUNT,
					T1.CUSTID,
					T1.DEFFERMENTS,
					T1.PLANDEFERCOUNT,
					T1.FINISACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T15.CUSTCIF LOVDESCCUSTCIF,
					T7.FINTYPEDESC LOVDESCFINTYPENAME,
					T1.FINBRANCH,
					T1.FINSOURCEID,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.ALLOWEDDEFFRQCHANGE,
					T1.AVAILEDDEFFRQCHANGE,
					T7.FINMAXAMOUNT LOVDESCFINMAXAMT,
					T7.FINMINAMOUNT LOVDESCFINMINAMOUNT,
					T7.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
					T1.MINDOWNPAYPERC,
					T7.FINISDWPAYREQUIRED LOVDESCDWNPAYREQ,
					T1.RECALTYPE,
					T1.FINASSETVALUE,
					T7.FINMAXDIFFERMENT LOVDESCFINMAXDIFFERMENT,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.LASTREPAYRVWDATE,
					T1.LASTREPAYCPZDATE,
					T1.DISBACCOUNTID,
					T1.REPAYACCOUNTID,
					T1.ALLOWGRCREPAY,
					T1.GRCSCHDMTHD,
					T1.REPAYMARGIN,
					T1.GRCMARGIN,
					T1.DEPRECIATIONFRQ,
					T1.FINCOMMITMENTREF,
					T1.FINCURRASSETVALUE,
					T1.FINCONTRACTDATE,
					T1.NEXTDEPDATE,
					T1.LASTDEPDATE,
					T1.FINACCOUNT,
					T1.FINCUSTPFTACCOUNT,
					T7.FINRVWRATEAPPLFOR,
					T1.TOTALREPAYAMT,
					T1.CLOSINGSTATUS,
					T1.FINAPPROVEDDATE,
					T1.FINREPAYPFTONFRQ,
					T1.ANUALIZEDPERCRATE,
					T1.EFFECTIVERATEOFRETURN,
					T1.DOWNPAYBANK,
					T1.DOWNPAYSUPL,
					T7.FINDIVISION LOVDESCFINDIVISIONNAME,
					T1.GRACETERMS,
					T14.FACILITYTYPE,
					T15.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
					T16.BRANCHDESC  LOVDESCFINBRANCHNAME,
					T1.TOTALGROSSGRCPFT,
					T1.GRCPROFITDAYSBASIS,
					T1.STEPFINANCE,
					T1.STEPTYPE,
					T1.STEPPOLICY,
					T1.ALWMANUALSTEPS,
					T1.NOOFSTEPS,
					T1.LINKEDFINREF,
					T7.PRODUCT LOVDESCFINPRODUCT,
					T1.GRCMINRATE,
					T1.GRCMAXRATE,
					T1.RPYMINRATE,
					T1.RPYMAXRATE,
					T1.MANUALSCHEDULE,
					T1.TAKEOVERFINANCE,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.SUPPLEMENTRENT,
					T1.INCREASEDCOST,
					T1.FEEACCOUNTID,
					T1.TDSAPPLICABLE,
					T1.INSURANCEAMT,
					T1.DEDUCTINSDISB,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.CALROUNDINGMODE,
					T1.ALWMULTIDISB,
					T1.BPIAMOUNT,
					T1.DEDUCTFEEDISB,
					T1.FEECHARGEAMT,
					T1.RVWRATEAPPLFOR,
					T1.SCHCALONRVW,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.FINCATEGORY,
					T1.PRODUCTCATEGORY,
					T1.ROUNDINGTARGET,
					T1.GRCMAXAMOUNT,
					T1.ADVANCEEMI,
					T1.ADVEMITERMS,
					T1.BPIPFTDAYSBASIS,
					T1.FIXEDTENORRATE,
					T1.FIXEDRATETENOR,
					T1.GRCADVTYPE,
					T1.GRCADVTERMS,
					T1.ADVTYPE,
					T1.ADVTERMS,
					T1.ADVSTAGE,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING,
					T1.APPLIEDLOANAMT,
					T1.FINISRATERVWATGRCEND,
					T1.CBAMOUNT,
					T1.SVAMOUNT,
					T1.SANBSDSCHDLE,
					T1.PROMOTIONSEQID,
					T1.ALWGRCADJ,
					T1.ENDGRCPERIODAFTRFULLDISB,
					T1.AUTOINCGRCENDDATE
				FROM WIFFINANCEMAIN T1
				LEFT JOIN WIFINDICATIVETERMDETAIL_TEMP T14 ON T14.FINREFERENCE = T1.FINREFERENCE
				LEFT JOIN CUSTOMERS T15 ON T15.CUSTID = T1.CUSTID
				JOIN RMTFINANCETYPES T7 ON T1.FINTYPE = T7.FINTYPE
				LEFT JOIN RMTBRANCHES T16 ON T1.FINBRANCH = T16.BRANCHCODE
				WHERE NOT (EXISTS ( SELECT 1
				FROM WIFFINANCEMAIN_TEMP
				WHERE WIFFINANCEMAIN_TEMP.FINREFERENCE = T1.FINREFERENCE))
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#1544.61_post" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'wiffinancemain_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1544.62_pre" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'wiffinancemain_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1544.62" author="sampath.d">
		<createView viewName="WIFFINANCEMAIN_AVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FINREFERENCE,
					T1.NUMBEROFTERMS,
					T1.GRCPERIODENDDATE,
					T1.ALLOWGRCPERIOD,
					T1.GRACEBASERATE,
					T1.GRACESPECIALRATE,
					T1.GRCPFTRATE,
					T1.GRCPFTFRQ,
					T1.NEXTGRCPFTDATE,
					T1.ALLOWGRCPFTRVW,
					T1.GRCPFTRVWFRQ,
					T1.NEXTGRCPFTRVWDATE,
					T1.ALLOWGRCCPZ,
					T1.GRCCPZFRQ,
					T1.NEXTGRCCPZDATE,
					T1.REPAYBASERATE,
					T1.REPAYSPECIALRATE,
					T1.REPAYPROFITRATE,
					T1.REPAYFRQ,
					T1.NEXTREPAYDATE,
					T1.REPAYPFTFRQ,
					T1.NEXTREPAYPFTDATE,
					T1.ALLOWREPAYRVW,
					T1.REPAYRVWFRQ,
					T1.NEXTREPAYRVWDATE,
					T1.ALLOWREPAYCPZ,
					T1.REPAYCPZFRQ,
					T1.NEXTREPAYCPZDATE,
					T1.MATURITYDATE,
					T1.CPZATGRACEEND,
					T1.DOWNPAYMENT,
					T1.GRACEFLATAMOUNT,
					T1.REQREPAYAMOUNT,
					T1.TOTALPROFIT,
					T1.TOTALCPZ,
					T1.TOTALGROSSPFT,
					T1.TOTALGRACEPFT,
					T1.TOTALGRACECPZ,
					T1.GRCRATEBASIS,
					T1.REPAYRATEBASIS,
					T1.FINTYPE,
					T1.FINREMARKS,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.REQMATURITY,
					T1.CALTERMS,
					T1.CALMATURITY,
					T1.FIRSTREPAY,
					T1.LASTREPAY,
					T1.FINSTARTDATE,
					T1.FINAMOUNT,
					T1.FINREPAYMENTAMOUNT,
					T1.CUSTID,
					T1.DEFFERMENTS,
					T1.PLANDEFERCOUNT,
					T1.FINISACTIVE,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T15.CUSTCIF LOVDESCCUSTCIF,
					T7.FINTYPEDESC LOVDESCFINTYPENAME,
					T1.FINBRANCH,
					T1.FINSOURCEID,
					T1.ALLOWEDDEFRPYCHANGE,
					T1.AVAILEDDEFRPYCHANGE,
					T1.ALLOWEDDEFFRQCHANGE,
					T1.AVAILEDDEFFRQCHANGE,
					T7.FINMAXAMOUNT LOVDESCFINMAXAMT,
					T7.FINMINAMOUNT LOVDESCFINMINAMOUNT,
					T7.FINISALWDIFFERMENT  LOVDESCFINALWDEFERMENT,
					T1.MINDOWNPAYPERC,
					T7.FINISDWPAYREQUIRED LOVDESCDWNPAYREQ,
					T1.RECALTYPE,
					T1.FINASSETVALUE,
					T7.FINMAXDIFFERMENT LOVDESCFINMAXDIFFERMENT,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.LASTREPAYRVWDATE,
					T1.LASTREPAYCPZDATE,
					T1.DISBACCOUNTID,
					T1.REPAYACCOUNTID,
					T1.ALLOWGRCREPAY,
					T1.GRCSCHDMTHD,
					T1.REPAYMARGIN,
					T1.GRCMARGIN,
					T1.DEPRECIATIONFRQ,
					T1.FINCOMMITMENTREF,
					T1.FINCURRASSETVALUE,
					T1.FINCONTRACTDATE,
					T1.NEXTDEPDATE,
					T1.LASTDEPDATE,
					T1.FINACCOUNT,
					T1.FINCUSTPFTACCOUNT,
					T7.FINRVWRATEAPPLFOR,
					T1.TOTALREPAYAMT,
					T1.CLOSINGSTATUS,
					T1.FINAPPROVEDDATE,
					T1.FINREPAYPFTONFRQ,
					T1.ANUALIZEDPERCRATE,
					T1.EFFECTIVERATEOFRETURN,
					T1.DOWNPAYBANK,
					T1.DOWNPAYSUPL,
					T7.FINDIVISION LOVDESCFINDIVISIONNAME,
					T1.GRACETERMS,
					T14.FACILITYTYPE,
					T15.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
					T16.BRANCHDESC LOVDESCFINBRANCHNAME,
					T1.TOTALGROSSGRCPFT,
					T1.GRCPROFITDAYSBASIS,
					T1.STEPFINANCE,
					T1.STEPTYPE,
					T1.STEPPOLICY,
					T1.ALWMANUALSTEPS,
					T1.NOOFSTEPS,
					T1.LINKEDFINREF,
					T7.PRODUCT LOVDESCFINPRODUCT,
					T1.GRCMINRATE,
					T1.GRCMAXRATE,
					T1.RPYMINRATE,
					T1.RPYMAXRATE,
					T1.MANUALSCHEDULE,
					T1.TAKEOVERFINANCE,
					T1.GRCADVBASERATE,
					T1.GRCADVMARGIN,
					T1.GRCADVPFTRATE,
					T1.RPYADVBASERATE,
					T1.RPYADVMARGIN,
					T1.RPYADVPFTRATE,
					T1.SUPPLEMENTRENT,
					T1.INCREASEDCOST,
					T1.FEEACCOUNTID,
					T1.TDSAPPLICABLE,
					T1.INSURANCEAMT,
					T1.DEDUCTINSDISB,
					T1.ALWBPI,
					T1.BPITREATMENT,
					T1.PLANEMIHALW,
					T1.PLANEMIHMETHOD,
					T1.PLANEMIHMAXPERYEAR,
					T1.PLANEMIHMAX,
					T1.PLANEMIHLOCKPERIOD,
					T1.PLANEMICPZ,
					T1.CALROUNDINGMODE,
					T1.ALWMULTIDISB,
					T1.BPIAMOUNT,
					T1.DEDUCTFEEDISB,
					T1.FEECHARGEAMT,
					T1.RVWRATEAPPLFOR,
					T1.SCHCALONRVW,
					T1.PASTDUEPFTCALMTHD,
					T1.PASTDUEPFTMARGIN,
					T1.DROPPINGMETHOD,
					T1.RATECHGANYDAY,
					T1.ROUNDINGTARGET,
					T1.GRCMAXAMOUNT,
					T1.ADVANCEEMI,
					T1.ADVEMITERMS,
					T1.BPIPFTDAYSBASIS BPIRATEBASIS,
					T1.GRCADVTYPE,
					T1.GRCADVTERMS,
					T1.ADVTYPE,
					T1.ADVTERMS,
					T1.ADVSTAGE,
					T1.ALLOWDRAWINGPOWER,
					T1.ALLOWREVOLVING,
					T1.APPLIEDLOANAMT,
					T1.FINISRATERVWATGRCEND,
					T1.CBAMOUNT,
					T1.SVAMOUNT,
					T1.SANBSDSCHDLE,
					T1.PROMOTIONSEQID,
					T1.ALWGRCADJ,
					T1.ENDGRCPERIODAFTRFULLDISB,
					T1.AUTOINCGRCENDDATE
				FROM WIFFINANCEMAIN T1
				LEFT JOIN WIFINDICATIVETERMDETAIL_TEMP T14 ON T14.FINREFERENCE = T1.FINREFERENCE
				LEFT JOIN CUSTOMERS T15 ON T15.CUSTID = T1.CUSTID
				JOIN RMTFINANCETYPES T7 ON T1.FINTYPE = T7.FINTYPE
				LEFT JOIN RMTBRANCHES T16 ON T1.FINBRANCH = T16.BRANCHCODE
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#1544.62_post" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'wiffinancemain_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1544.63_pre" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'rejectfinancemain_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1544.63" author="sampath.d">
		<createView viewName="rejectfinancemain_view" replaceIfExists="true">
			<![CDATA[
				SELECT F.FINREFERENCE,
				    T.FINCATEGORY LOVDESCPRODUCTCODENAME,
				    F.FINTYPE,
				    F.FINBRANCH,
				    F.FINSTARTDATE,
				    F.MATURITYDATE,
				    F.NUMBEROFTERMS,
				    F.FINCCY,
				    F.FINAMOUNT,
				    F.FINAMOUNT - F.DOWNPAYMENT + F.FEECHARGEAMT + F.INSURANCEAMT FINANCINGAMOUNT,
				    F.FEECHARGEAMT,
				    F.INSURANCEAMT,
				    F.FINAMOUNT - F.DOWNPAYMENT + F.FEECHARGEAMT + F.INSURANCEAMT - F.FINREPAYMENTAMOUNT CURFINAMOUNT,
				    F.DOWNPAYMENT,
				    F.FINCURRASSETVALUE,
				    F.FINASSETVALUE,
				    F.ALLOWDRAWINGPOWER,
				    F.PROMOTIONSEQID,
				    F.SANBSDSCHDLE,
				    C.CUSTCIF LOVDESCCUSTCIF,
				    F.SVAMOUNT,
				    F.CBAMOUNT,
				    F.FINISRATERVWATGRCEND,
				    F.ALWGRCADJ,
				    F.ENDGRCPERIODAFTRFULLDISB,
				    F.AUTOINCGRCENDDATE
				FROM REJECTFINANCEMAIN F
				LEFT JOIN CUSTOMERS C ON F.CUSTID = C.CUSTID
				LEFT JOIN RMTFINANCETYPES T ON F.FINTYPE = T.FINTYPE
			 ]]>
		</createView>
	</changeSet>

	<changeSet id="ST#1544.63_post" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'rejectfinancemain_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1544.64_pre" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financeenquiry_view');
		 	]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1544.64" author="sampath.d">
		<createView viewName="FINANCEENQUIRY_VIEW" replaceIfExists="true">
		  <![CDATA[
				SELECT t1.finreference,
					T1.FINBRANCH,
					T1.FINTYPE,
					T1.FINCCY,
					T1.SCHEDULEMETHOD,
					T1.PROFITDAYSBASIS,
					T1.FINSTARTDATE,
					T1.CALTERMS NUMBEROFTERMS,
					T1.CUSTID,
					T1.FINAMOUNT,
					T1.GRCPERIODENDDATE,
					T1.MATURITYDATE,
					T1.FINREPAYMENTAMOUNT,
					T1.FINISACTIVE,
					T1.ALLOWGRCPERIOD,
					T1.DOWNPAYMENT,
					T1.MIGRATEDFINANCE,
					T1.LASTREPAYDATE,
					T1.LASTREPAYPFTDATE,
					T1.FINCURRASSETVALUE,
					T1.BLACKLISTED,
					T1.FEECHARGEAMT,
					T1.CLOSINGSTATUS,
					T1.GRACETERMS,
					T1.ALWMULTIDISB,
					T1.DEFFERMENTS,
					T1.FINSTATUS ,
					T1.MANDATEID,
					T1.FINREPAYMETHOD,
					T1.FINASSETVALUE,
					T1.INSURANCEAMT,
					T1.SANBSDSCHDLE,
					T1.PROMOTIONSEQID,
					T1.SVAMOUNT,
					T1.CBAMOUNT,
					(T1.FINCURRASSETVALUE+ T1.FEECHARGEAMT+T1.INSURANCEAMT) FINANCINGAMOUNT,
					(T1.FINCURRASSETVALUE- T1.FINREPAYMENTAMOUNT+ T1.FEECHARGEAMT+T1.INSURANCEAMT) CURFINAMOUNT,
					T2.FINTYPEDESC LOVDESCFINTYPENAME,
					T2.FINSCHEDULEON LOVDESCFINSCHEDULEON,
					T2.FINDIVISION LOVDESCFINDIVISION,
					T2.FINCATEGORY LOVDESCPRODUCTCODENAME,
					T2.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
					T3.CUSTCIF LOVDESCCUSTCIF,
					T3.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
					T4.BRANCHDESC LOVDESCFINBRANCHNAME,
					T5.CUSTTYPECTG,
					COALESCE(T9.NOINST,0) NOINST,
					T1.TOTALCPZ,
					T1.ALWGRCADJ,
					T1.ENDGRCPERIODAFTRFULLDISB,
					T1.AUTOINCGRCENDDATE
				FROM FINANCEMAIN T1
				INNER JOIN RMTFINANCETYPES T2 ON T1.FINTYPE = T2.FINTYPE
				INNER JOIN CUSTOMERS T3 ON T1.CUSTID = T3.CUSTID
				INNER JOIN RMTBRANCHES T4 ON T1.FINBRANCH = T4.BRANCHCODE
				INNER JOIN RMTCUSTTYPES T5 ON T3.CUSTTYPECODE = T5.CUSTTYPECODE
				LEFT JOIN FINPFTDETAILS T9 ON T1.FINREFERENCE = T9.FINREFERENCE
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#1544.64_post" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financeenquiry_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1544.65_pre" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financeenquiry_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1544.65" author="sampath.d">
		<createView viewName="FINANCEENQUIRY_TVIEW" replaceIfExists="true">
		<![CDATA[
			SELECT T1.FINREFERENCE,
				T1.FINBRANCH,
				T1.FINTYPE,
				T1.FINCCY,
				T1.SCHEDULEMETHOD,
				T1.PROFITDAYSBASIS,
				T1.FINSTARTDATE,
				T1.CALTERMS NUMBEROFTERMS,
				T1.CUSTID,
				T1.FINAMOUNT,
				T1.GRCPERIODENDDATE,
				T1.MATURITYDATE,
				T1.FINREPAYMENTAMOUNT,
				T1.FINISACTIVE,
				T1.ALLOWGRCPERIOD,
				T1.DOWNPAYMENT,
				T1.MIGRATEDFINANCE,
				T1.LASTREPAYDATE,
				T1.LASTREPAYPFTDATE,
				T1.FINCURRASSETVALUE,
				T1.BLACKLISTED,
				T1.FEECHARGEAMT,
				T1.CLOSINGSTATUS,
				T1.GRACETERMS,
				T1.ALWMULTIDISB,
				T1.DEFFERMENTS,
				T1.FINSTATUS,
				T1.MANDATEID,
				T1.FINREPAYMETHOD,
				T1.FINASSETVALUE,
				T1.FINCURRASSETVALUE + T1.FEECHARGEAMT + T1.INSURANCEAMT FINANCINGAMOUNT,
				T1.FINCURRASSETVALUE - T1.FINREPAYMENTAMOUNT + T1.FEECHARGEAMT + T1.INSURANCEAMT CURFINAMOUNT,
				T2.FINTYPEDESC LOVDESCFINTYPENAME,
				T2.FINSCHEDULEON LOVDESCFINSCHEDULEON,
				T2.FINDIVISION LOVDESCFINDIVISION,
				T2.FINCATEGORY LOVDESCPRODUCTCODENAME,
				T2.FINISALWDIFFERMENT LOVDESCFINALWDEFERMENT,
				T3.CUSTCIF LOVDESCCUSTCIF,
				T3.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
				T4.BRANCHDESC LOVDESCFINBRANCHNAME,
				T5.CUSTTYPECTG,
				COALESCE(T9.NOINST, 0)  NOINST,
				T1.TOTALCPZ,
				T1.ALWGRCADJ,
				T1.ENDGRCPERIODAFTRFULLDISB,
				T1.AUTOINCGRCENDDATE
			FROM FINANCEMAIN_TEMP T1
			JOIN RMTFINANCETYPES T2 ON T1.FINTYPE = T2.FINTYPE
			JOIN CUSTOMERS T3 ON T1.CUSTID = T3.CUSTID
			JOIN RMTBRANCHES T4 ON T1.FINBRANCH = T4.BRANCHCODE
			JOIN RMTCUSTTYPES T5 ON T3.CUSTTYPECODE = T5.CUSTTYPECODE
			LEFT JOIN FINPFTDETAILS T9 ON T1.FINREFERENCE = T9.FINREFERENCE
		]]>
		</createView>
	</changeSet>

	<changeSet id="ST#1544.65_post" author="sampath.d" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financeenquiry_tview');
			]]>
		</sql>
	</changeSet>

	<!-- ST#1544 Under Construction Changes change sets end -->

	<changeSet id="ST#1544.66" author="sampath.d">
		<comment> ST#1544.66 LOAN DOWNSIZING </comment>
		<createTable tableName="FINASSETAMTMOVEMENTS">
			<column name="FINSERVICEINSTID" type="bigint" />
			<column name="FINREFERENCE" type="VARCHAR(20)" />
			<column name="MOVEMENTDATE" type="datetime" />
			<column name="MOVEMENTORDER" type="bigint" />
			<column name="MOVEMENTTYPE" type="char(2)" />
			<column name="MOVEMENTAMOUNT" type="decimal(18,0)" />
			<column name="SANCTIONEDAMT" type="decimal(18,0)" />
			<column name="REVISEDSANCTIONEDAMT" type="decimal(18,0)" />
			<column name="DISBURSEDAMT" type="decimal(18,0)" />
			<column name="AVAILABLEAMT" type="decimal(18,0)" />
			<column name="LASTMNTBY" type="bigint" />
			<column name="LASTMNTON" type="datetime" />
		</createTable>
	</changeSet>

	<changeSet id="ST#1544.67" author="sampath.d">
		<comment> ST#1544.67 LOAN DOWNSIZING </comment>
		<sql>
            <![CDATA[
            update FINASSETAMTMOVEMENTS set MOVEMENTAMOUNT = 0;
            update FINASSETAMTMOVEMENTS set SANCTIONEDAMT = 0;
			update FINASSETAMTMOVEMENTS set REVISEDSANCTIONEDAMT = 0;
            update FINASSETAMTMOVEMENTS set DISBURSEDAMT = 0;
			update FINASSETAMTMOVEMENTS set AVAILABLEAMT = 0;
            ]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1544.68" author="sampath.d" dbms="mssql">
		<comment> ST#1544.68 LOAN DOWNSIZING </comment>
		<sql>
			<![CDATA[	
				ALTER TABLE FINASSETAMTMOVEMENTS ADD CONSTRAINT DF_FINASSETAMTMOVEMENTS_MVMNT DEFAULT 0 FOR MOVEMENTAMOUNT;
				ALTER TABLE FINASSETAMTMOVEMENTS ADD CONSTRAINT DF_FINASSETAMTMOVEMENTS_SNCAMT DEFAULT 0 FOR SANCTIONEDAMT;
				ALTER TABLE FINASSETAMTMOVEMENTS ADD CONSTRAINT DF_FINASSETAMTMOVEMENTS_RVSNAT DEFAULT 0 FOR REVISEDSANCTIONEDAMT;
				ALTER TABLE FINASSETAMTMOVEMENTS ADD CONSTRAINT DF_FINASSETAMTMOVEMENTS_DISB DEFAULT 0 FOR DISBURSEDAMT;
				ALTER TABLE FINASSETAMTMOVEMENTS ADD CONSTRAINT DF_FINASSETAMTMOVEMENTS_AVBL DEFAULT 0 FOR AVAILABLEAMT;
				
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1544.68" author="sampath.d" dbms="postgresql, oracle">
		<comment> ST#1544.68 LOAN DOWNSIZING </comment>
		<addDefaultValue columnName="MOVEMENTAMOUNT" tableName="FINASSETAMTMOVEMENTS" defaultValue="0" />
		<addDefaultValue columnName="SANCTIONEDAMT" tableName="FINASSETAMTMOVEMENTS" defaultValue="0" />
		<addDefaultValue columnName="REVISEDSANCTIONEDAMT" tableName="FINASSETAMTMOVEMENTS" defaultValue="0" />
		<addDefaultValue columnName="DISBURSEDAMT" tableName="FINASSETAMTMOVEMENTS" defaultValue="0" />
		<addDefaultValue columnName="AVAILABLEAMT" tableName="FINASSETAMTMOVEMENTS" defaultValue="0" />
	</changeSet>

	<changeSet id="ST#1544.69" author="sampath.d">
		<comment> ST#1544.69 LOAN DOWNSIZING </comment>
		<createView replaceIfExists="true" viewName="FINANCEMAINTENANCE_VIEW">
				<![CDATA[
					 SELECT T1.FINREFERENCE,
						T1.FINBRANCH,
						T1.FINTYPE,
						T1.FINCCY,
						T1.SCHEDULEMETHOD,
						T1.PROFITDAYSBASIS,
						T1.FINSTARTDATE,
						T1.NUMBEROFTERMS,
						T1.CUSTID,
						T1.FINAMOUNT,
						T1.MATURITYDATE,
						T1.FINREPAYMENTAMOUNT,
						T1.FINISACTIVE,
						T1.BLACKLISTED,
						T1.FEECHARGEAMT,
						T1.INSURANCEAMT,
						T1.GRACETERMS,
						T1.ALLOWGRCPERIOD,
						T1.GRCPERIODENDDATE,
						T1.ALWMULTIDISB,
						T1.DEFFERMENTS,
						T1.NEXTROLECODE,
						T1.RECORDSTATUS,
						T1.RECORDTYPE,
						T1.ALLOWGRCPFTRVW,
						T1.ALLOWREPAYRVW,
						T1.LASTREPAYDATE,
						T1.LASTREPAYPFTDATE,
						T1.ALLOWEDDEFRPYCHANGE,
						T1.AVAILEDDEFRPYCHANGE,
						T1.RCDMAINTAINSTS,
						T1.MIGRATEDFINANCE,
						T1.CLOSINGSTATUS,
						T1.REPAYRATEBASIS,
						T1.MANUALSCHEDULE,
						T1.FINCURRASSETVALUE,
						T1.TAKEOVERFINANCE,
						T1.NEXTROLLOVERDATE,
						T1.AVAILEDUNPLANEMI,
						T1.AVAILEDREAGEH,
						T1.MAXUNPLANNEDEMI,
						T1.MAXREAGEHOLIDAYS,
						T1.DOWNPAYMENT,
						T1.PLANEMIHALW,
						T1.CALTERMS,
						T1.RATECHGANYDAY,
						T1.FINASSETVALUE,
						T2.CUSTCIF AS LOVDESCCUSTCIF,
						T2.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
						T3.FINISALWDIFFERMENT AS LOVDESCFINALWDEFERMENT,
						T3.FINDIVISION LOVDESCFINDIVISION,
						T3.FINCATEGORY LOVDESCPRODUCTCODENAME,
						T4.PRODUCTCATEGORY,
						COALESCE(T5.ROLEDESC,  ${ADD.SCHEMA}FN_GET_ROLEDESC(T1.NEXTROLECODE)) AS LOVDESCREQUESTSTAGE,
						COALESCE(T9.NOINST, 0) AS NOINST,
						T1.SAMPLINGREQUIRED,
						T1.ADVEMITERMS,
						T1.SANBSDSCHDLE,
						T1.PROMOTIONSEQID,
						T1.SVAMOUNT,
						T1.CBAMOUNT,
						T1.REPAYPFTFRQ
					FROM FINANCEMAIN_TEMP T1
					JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
					JOIN RMTFINANCETYPES T3 ON T1.FINTYPE = T3.FINTYPE
					LEFT JOIN SECROLES T5 ON T1.NEXTROLECODE = T5.ROLECD
					JOIN BMTPRODUCT T4 ON T3.FINCATEGORY = T4.PRODUCTCODE
					LEFT JOIN FINPFTDETAILS T9 ON T1.FINREFERENCE = T9.FINREFERENCE
					UNION ALL
					SELECT T1.FINREFERENCE,
						T1.FINBRANCH,
						T1.FINTYPE,
						T1.FINCCY,
						T1.SCHEDULEMETHOD,
						T1.PROFITDAYSBASIS,
						T1.FINSTARTDATE,
						T1.NUMBEROFTERMS,
						T1.CUSTID,
						T1.FINAMOUNT,
						T1.MATURITYDATE,
						T1.FINREPAYMENTAMOUNT,
						T1.FINISACTIVE,
						T1.BLACKLISTED,
						T1.FEECHARGEAMT,
						T1.INSURANCEAMT,
						T1.GRACETERMS,
						T1.ALLOWGRCPERIOD,
						T1.GRCPERIODENDDATE,
						T1.ALWMULTIDISB,
						T1.DEFFERMENTS,
						T1.NEXTROLECODE,
						T1.RECORDSTATUS,
						T1.RECORDTYPE,
						T1.ALLOWGRCPFTRVW,
						T1.ALLOWREPAYRVW,
						T1.LASTREPAYDATE,
						T1.LASTREPAYPFTDATE,
						T1.ALLOWEDDEFRPYCHANGE,
						T1.AVAILEDDEFRPYCHANGE,
						T1.RCDMAINTAINSTS,
						T1.MIGRATEDFINANCE,
						T1.CLOSINGSTATUS,
						T1.REPAYRATEBASIS,
						T1.MANUALSCHEDULE,
						T1.FINCURRASSETVALUE,
						T1.TAKEOVERFINANCE,
						T1.NEXTROLLOVERDATE,
						T1.AVAILEDUNPLANEMI,
						T1.AVAILEDREAGEH,
						T1.MAXUNPLANNEDEMI,
						T1.MAXREAGEHOLIDAYS,
						T1.DOWNPAYMENT,
						T1.PLANEMIHALW,
						T1.CALTERMS,
						T1.RATECHGANYDAY,
						T1.FINASSETVALUE,
						T2.CUSTCIF LOVDESCCUSTCIF,
						T2.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
						T3.FINISALWDIFFERMENT AS LOVDESCFINALWDEFERMENT,
						T3.FINDIVISION LOVDESCFINDIVISION,
						T3.FINCATEGORY LOVDESCPRODUCTCODENAME,
						T4.PRODUCTCATEGORY,
						COALESCE(T5.ROLEDESC,  ${ADD.SCHEMA}FN_GET_ROLEDESC(T1.NEXTROLECODE)) AS LOVDESCREQUESTSTAGE,
						COALESCE(T9.NOINST, 0) AS NOINST,
						T1.SAMPLINGREQUIRED,
						T1.ADVEMITERMS,
						T1.SANBSDSCHDLE,
						T1.PROMOTIONSEQID,
						T1.SVAMOUNT,
						T1.CBAMOUNT,
						T1.REPAYPFTFRQ
					FROM FINANCEMAIN T1
					JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
					JOIN RMTFINANCETYPES T3 ON T1.FINTYPE = T3.FINTYPE
					LEFT JOIN SECROLES T5 ON T1.NEXTROLECODE = T5.ROLECD
					JOIN BMTPRODUCT T4 ON T3.FINCATEGORY = T4.PRODUCTCODE
					LEFT JOIN FINPFTDETAILS T9 ON T1.FINREFERENCE = T9.FINREFERENCE
					WHERE NOT (EXISTS ( SELECT 1 AS EXPR1
						FROM FINANCEMAIN_TEMP
						WHERE FINANCEMAIN_TEMP.FINREFERENCE = T1.FINREFERENCE))
				  ]]>
		</createView>
	</changeSet>

	<changeSet id="ST#1544.70" author="sampath.d">
		<comment> ST#1544.70 LOAN DOWNSIZING </comment>
		<sql>
			<![CDATA[
				Delete from SMTPARAMETERS where SYSPARMCode = 'ACCOUNTING_VALIDATION_REQ';
				Insert into SMTPARAMETERS values ('ACCOUNTING_VALIDATION_REQ','Accounting Validation Required','String ',0,'false',8,0,null,null,'Accounting Validation Required',1,1000,Current_TimeStamp,'Approved',null,null,null,null,null,0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#1544.71" author="sampath.d">
		<comment> ST#1544.71 LOAN DOWNSIZING </comment>
		<sql>
           <![CDATA[
	            Update SEQSECRIGHTS set SEQNO = (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS_VIEW);
				UPDATE SEQSECGROUPS SET SEQNO = (SELECT MAX(GRPID) FROM SECGROUPS_VIEW);
				UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS_VIEW);
				Update SEQSECROLEGROUPS set SeqNo = (SELECT MAX(RoleGrpID) from SECROLEGROUPS_VIEW);
				
				INSERT INTO SECGROUPS VALUES ((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'FIN_DOWNSIZING_MAKER', 'Add Flexi Disbursement Maker Group', 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPS VALUES ((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'FIN_DOWNSIZING_APPROVER', 'Add Flexi Disbursement Approver Group', 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
			
				INSERT INTO SECRIGHTS VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menuItem_FinanceManagement_LoanDownSizing', 'MENU', 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECRIGHTS VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'FinanceMainDialog_DownSizingAmount', 'FinanceMainDialog', 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
		
				INSERT INTO SECGROUPRIGHTS VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FIN_DOWNSIZING_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menuCat_FinanceManagement'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FIN_DOWNSIZING_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menuItem_FinanceManagement_LoanDownSizing'), 1, 1, 1000, CURRENT_TIMESTAMP,NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FIN_DOWNSIZING_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_FinanceMainDialog_btnSave'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FIN_DOWNSIZING_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'FinanceMainDialog_DownSizingAmount'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FIN_DOWNSIZING_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'FinanceMainDialog_NoScheduleGeneration'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FIN_DOWNSIZING_APPROVER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menuCat_FinanceManagement'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FIN_DOWNSIZING_APPROVER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menuItem_FinanceManagement_LoanDownSizing'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FIN_DOWNSIZING_APPROVER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_FinanceMainDialog_btnSave'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FIN_DOWNSIZING_APPROVER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'FinanceMainDialog_NoScheduleGeneration'), 1, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
	
				INSERT INTO SECROLEGROUPS VALUES ((SELECT MAX(RoleGrpID)+1 from SECROLEGROUPS), (Select MAX(GrpId) from SecGroups WHERE GrpCode = 'FIN_DOWNSIZING_MAKER'), (Select MAX(RoleID) from SecRoles WHERE RoleCd = 'OPERATIONS_OFFICER'), 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLEGROUPS VALUES ((SELECT MAX(RoleGrpID)+1 from SECROLEGROUPS), (Select MAX(GrpId) from SecGroups WHERE GrpCode = 'FIN_DOWNSIZING_APPROVER'), (Select MAX(RoleID) from SecRoles WHERE RoleCd = 'OPERATIONS_MANAGER'), 1, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
	
				Update SEQSECRIGHTS set SEQNO = (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS_VIEW);
				UPDATE SEQSECGROUPS SET SEQNO = (SELECT MAX(GRPID) FROM SECGROUPS_VIEW);
				UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS_VIEW);
				Update SEQSECROLEGROUPS set SeqNo = (SELECT MAX(RoleGrpID) from SECROLEGROUPS_VIEW);
           ]]>
		</sql>
	</changeSet>

	<changeSet id="ST#46.2_pre" author="saisandeep.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finfeedetail_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#46.2" author="saisandeep.b">
		<createView viewName="FINFEEDETAIL_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FEEID,
					T1.FINREFERENCE,
					T1.ORIGINATIONFEE,
					T1.FINEVENT,
					T1.FEETYPEID,
					T1.FEESEQ,
					T1.FEEORDER,
					T1.CALCULATEDAMOUNT,
					T1.ACTUALAMOUNT,
					T1.WAIVEDAMOUNT,
					T1.PAIDAMOUNT,
					T1.FEESCHEDULEMETHOD,
					T1.TERMS,
					T1.REMAININGFEE,
					T1.PAYMENTREF,
					T1.CALCULATIONTYPE,
					T1.RULECODE,
					T1.FIXEDAMOUNT,
					T1.PERCENTAGE,
					T1.CALCULATEON,
					T1.ALWDEVIATION,
					T1.MAXWAIVERPERC,
					T1.ALWMODIFYFEE,
					T1.ALWMODIFYFEESCHDMTHD,
					T1.VASREFERENCE,
					T1.STATUS,
					T1.TAXAPPLICABLE,
					T1.TAXCOMPONENT,
					T1.PAIDAMOUNTORIGINAL,
					T1.PAIDAMOUNTGST,
					T1.NETAMOUNTORIGINAL,
					T1.NETAMOUNTGST,
					T1.NETAMOUNT,
					T1.REMAININGFEEORIGINAL,
					T1.REMAININGFEEGST,
					T1.ACTUALAMOUNTORIGINAL,
					T1.ACTUALAMOUNTGST,
					T1.FEEAMZ,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.TRANSACTIONID,
					T1.WORKFLOWID,
					T2.FEETYPECODE,
					T2.FEETYPEDESC,
					T1.REFUNDABLE,
					T1.INSTRUCTIONUID,
					T1.ACTPERCENTAGE,
					T1.WAIVEDGST,
					T1.REFERENCEID,
					T1.TAXHEADERID,
					T1.PAIDTDS,
					T1.REMTDS,
					T1.NETTDS,
					T2.TDSREQ,
					T3.PRODUCTCODE VASPRODUCTCODE
				FROM FINFEEDETAIL_TEMP T1
				LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
				LEFT JOIN VASRECORDING_TEMP T3 ON T1.VASREFERENCE = T3.VASREFERENCE
				UNION ALL
				SELECT T1.FEEID,
					T1.FINREFERENCE,
					T1.ORIGINATIONFEE,
					T1.FINEVENT,
					T1.FEETYPEID,
					T1.FEESEQ,
					T1.FEEORDER,
					T1.CALCULATEDAMOUNT,
					T1.ACTUALAMOUNT,
					T1.WAIVEDAMOUNT,
					T1.PAIDAMOUNT,
					T1.FEESCHEDULEMETHOD,
					T1.TERMS,
					T1.REMAININGFEE,
					T1.PAYMENTREF,
					T1.CALCULATIONTYPE,
					T1.RULECODE,
					T1.FIXEDAMOUNT,
					T1.PERCENTAGE,
					T1.CALCULATEON,
					T1.ALWDEVIATION,
					T1.MAXWAIVERPERC,
					T1.ALWMODIFYFEE,
					T1.ALWMODIFYFEESCHDMTHD,
					T1.VASREFERENCE,
					T1.STATUS,
					T1.TAXAPPLICABLE,
					T1.TAXCOMPONENT,
					T1.PAIDAMOUNTORIGINAL,
					T1.PAIDAMOUNTGST,
					T1.NETAMOUNTORIGINAL,
					T1.NETAMOUNTGST,
					T1.NETAMOUNT,
					T1.REMAININGFEEORIGINAL,
					T1.REMAININGFEEGST,
					T1.ACTUALAMOUNTORIGINAL,
					T1.ACTUALAMOUNTGST,
					T1.FEEAMZ,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.TRANSACTIONID,
					T1.WORKFLOWID,
					T2.FEETYPECODE,
					T2.FEETYPEDESC,
					T1.REFUNDABLE,
					T1.INSTRUCTIONUID,
					T1.ACTPERCENTAGE,
					T1.WAIVEDGST,
					T1.REFERENCEID,
					T1.TAXHEADERID,
					T1.PAIDTDS,
					T1.REMTDS,
					T1.NETTDS,
					T2.TDSREQ,
					T3.PRODUCTCODE VASPRODUCTCODE
				FROM FINFEEDETAIL T1
				LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID 
				LEFT JOIN VASRECORDING T3 ON T1.VASREFERENCE = T3.VASREFERENCE
				WHERE NOT (EXISTS ( SELECT 1 FROM FINFEEDETAIL_TEMP WHERE FINFEEDETAIL_TEMP.FEEID = T1.FEEID))
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#46.2_post" author="saisandeep.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finfeedetail_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#46.3_pre" author="saisandeep.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finfeedetail_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#46.3" author="saisandeep.b">
		<createView viewName="FINFEEDETAIL_TVIEW" replaceIfExists="true">
			<![CDATA[
				SELECT T1.FEEID,
					T1.FINREFERENCE,
					T1.ORIGINATIONFEE,
					T1.FINEVENT,
					T1.FEETYPEID,
					T1.FEESEQ,
					T1.FEEORDER,
					T1.CALCULATEDAMOUNT,
					T1.ACTUALAMOUNT,
					T1.WAIVEDAMOUNT,
					T1.PAIDAMOUNT,
					T1.FEESCHEDULEMETHOD,
					T1.TERMS,
					T1.REMAININGFEE,
					T1.PAYMENTREF,
					T1.CALCULATIONTYPE,
					T1.RULECODE,
					T1.FIXEDAMOUNT,
					T1.PERCENTAGE,
					T1.CALCULATEON,
					T1.ALWDEVIATION,
					T1.MAXWAIVERPERC,
					T1.ALWMODIFYFEE,
					T1.ALWMODIFYFEESCHDMTHD,
					T1.VASREFERENCE,
					T1.STATUS,
					T1.TAXAPPLICABLE,
					T1.TAXCOMPONENT,
					T1.PAIDAMOUNTORIGINAL,
					T1.PAIDAMOUNTGST,
					T1.NETAMOUNTORIGINAL,
					T1.NETAMOUNTGST,
					T1.NETAMOUNT,
					T1.REMAININGFEEORIGINAL,
					T1.REMAININGFEEGST,
					T1.ACTUALAMOUNTORIGINAL,
					T1.ACTUALAMOUNTGST,
					T1.FEEAMZ,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.TRANSACTIONID,
					T1.WORKFLOWID,
					T2.FEETYPECODE,
					T2.FEETYPEDESC,
					T1.REFUNDABLE,
					T1.INSTRUCTIONUID,
					T1.ACTPERCENTAGE,
					T1.WAIVEDGST,
					T1.REFERENCEID,
					T1.TAXHEADERID,
					T1.PAIDTDS,
					T1.REMTDS,
					T1.NETTDS,
					T2.TDSREQ,
					T3.PRODUCTCODE VASPRODUCTCODE
				FROM FINFEEDETAIL_TEMP T1
				LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
				LEFT JOIN VASRECORDING_TEMP T3 ON T1.VASREFERENCE = T3.VASREFERENCE
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#46.3_post" author="saisandeep.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finfeedetail_tview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="ST#46.4_pre" author="saisandeep.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finfeedetail_aview');
			]]>
		</sql>
	</changeSet>
	<changeSet id="ST#46.4" author="saisandeep.b">
		<createView viewName="FINFEEDETAIL_AVIEW" replaceIfExists="true">
			<![CDATA[
				 SELECT T1.FEEID,
					T1.FINREFERENCE,
					T1.ORIGINATIONFEE,
					T1.FINEVENT,
					T1.FEETYPEID,
					T1.FEESEQ,
					T1.FEEORDER,
					T1.CALCULATEDAMOUNT,
					T1.ACTUALAMOUNT,
					T1.WAIVEDAMOUNT,
					T1.PAIDAMOUNT,
					T1.FEESCHEDULEMETHOD,
					T1.TERMS,
					T1.REMAININGFEE,
					T1.PAYMENTREF,
					T1.CALCULATIONTYPE,
					T1.RULECODE,
					T1.FIXEDAMOUNT,
					T1.PERCENTAGE,
					T1.CALCULATEON,
					T1.ALWDEVIATION,
					T1.MAXWAIVERPERC,
					T1.ALWMODIFYFEE,
					T1.ALWMODIFYFEESCHDMTHD,
					T1.VASREFERENCE,
					T1.TAXAPPLICABLE,
					T1.TAXCOMPONENT,
					T1.PAIDAMOUNTORIGINAL,
					T1.PAIDAMOUNTGST,
					T1.NETAMOUNTORIGINAL,
					T1.NETAMOUNTGST,
					T1.NETAMOUNT,
					T1.REMAININGFEEORIGINAL,
					T1.REMAININGFEEGST,
					T1.ACTUALAMOUNTORIGINAL,
					T1.ACTUALAMOUNTGST,
					T1.FEEAMZ,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.TRANSACTIONID,
					T1.WORKFLOWID,
					T2.FEETYPECODE,
					T2.FEETYPEDESC,
					T1.STATUS,
					T1.REFUNDABLE,
					T1.INSTRUCTIONUID,
					T1.ACTPERCENTAGE,
					T1.WAIVEDGST,
					T1.REFERENCEID,
					T1.TAXHEADERID,
					T1.PAIDTDS,
					T1.REMTDS,
					T1.NETTDS,
					T2.TDSREQ,
					T3.PRODUCTCODE VASPRODUCTCODE
				FROM FINFEEDETAIL T1
				LEFT JOIN FEETYPES T2 ON T1.FEETYPEID = T2.FEETYPEID
				LEFT JOIN VASRECORDING T3 ON T1.VASREFERENCE = T3.VASREFERENCE
			]]>
		</createView>
	</changeSet>

	<changeSet id="ST#46.4_post" author="saisandeep.b" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finfeedetail_aview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="DE#60.1" author="saisandeep.b">
		<sql>
			<![CDATA[
				DELETE FROM BMTAMOUNTCODES WHERE ALLOWEDEVENT = 'PAYMTINS' and AMOUNTCODE = 'pi_advInst';
				Insert INTO BMTAMOUNTCODES VALUES ('PAYMTINS', 0, 'pi_advInst', 'Advance Inst Amount', '1', 1, 1005, current_timestamp, 'Approved', null, null, null, null, null, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="EP#890.1" author="ahmad.s">
		<createTable tableName="FinFeeDetail_Snapshot">
			<column name="AppDate" type="datetime" />
			<column name="FeeID" type="bigint" />
			<column name="FinReference" type="varchar(20)" />
			<column name="CustID" type="bigint" />
			<column name="OriginationFee" type="boolean" />
			<column name="FinEvent" type="varchar(8)" />
			<column name="FeeTypeID" type="bigint" />
			<column name="FeeSeq" type="bigint" />
			<column name="FeeOrder" type="bigint" />
			<column name="CalculatedAmount" type="number(18,0)" />
			<column name="ActualAmount" type="number(18,0)" />
			<column name="WaivedAmount" type="number(18,0)" />
			<column name="PaidAmount" type="number(18,0)" />
			<column name="Terms" type="int" />
			<column name="RemainingFee" type="number(18,0)" />
			<column name="PaymentRef" type="varchar(20)" />
			<column name="FeeScheduleMethod" type="varchar(8)" />
			<column name="CalculationType" type="varchar(8)" />
			<column name="RuleCode" type="varchar(8)" />
			<column name="FixedAmount" type="number(18,0)" />
			<column name="Percentage" type="number(5,2)" />
			<column name="CalculateOn" type="varchar(8)" />
			<column name="AlwDeviation" type="boolean" />
			<column name="MaxWaiverPerc" type="number(5,2)" />
			<column name="AlwModifyFee" type="boolean" />
			<column name="AlwModifyFeeSchdMthd" type="boolean" />
			<column name="Version" type="int" />
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkFlowId" type="bigint" />
			<column name="Status" type="varchar(1)" />
			<column name="VasReference" type="varchar(20)" />
			<column name="PostDate" type="datetime" />
			<column name="PaidAmountOriginal" type="number(18,0)" />
			<column name="PaidAmountGst" type="number(18,0)" />
			<column name="NetAmountOriginal" type="number(18,0)" />
			<column name="NetAmountGst" type="number(18,0)" />
			<column name="NetAmount" type="number(18,0)" />
			<column name="RemainingFeeOriginal" type="number(18,0)" />
			<column name="RemainingFeeGst" type="number(18,0)" />
			<column name="TaxApplicable" type="boolean" />
			<column name="TaxComponent" type="varchar(1)" />
			<column name="ActualAmountOriginal" type="number(18,0)" />
			<column name="ActualAmountGst" type="number(18,0)" />
			<column name="FeeAmz" type="number(18,0)" />
			<column name="TaxPercent" type="number(5,2)" />
			<column name="TransactionID" type="varchar(20)" />
			<column name="Refundable" type="boolean" />
			<column name="InstructionUID" type="bigint" />
			<column name="ActPercentage" type="smallint" />
			<column name="WaivedGst" type="number(18,0)" />
			<column name="ReferenceID" type="bigint" />
			<column name="TaxheaderID" type="bigint" />
			<column name="PaidTds" type="number(18,0)" />
			<column name="RemTds" type="number(18,0)" />
			<column name="NetTds" type="number(18,0)" />
		</createTable>
	</changeSet>

	<changeSet id="EP#890.1_pre1" author="ahmad.s" dbms="mssql">
		<addNotNullConstraint tableName="FinFeeDetail_Snapshot" columnName="AppDate" columnDataType = "datetime"/>
	</changeSet>
	
	<changeSet id="EP#890.1_pre2" author="ahmad.s" dbms="mssql">
		<addNotNullConstraint tableName="FinFeeDetail_Snapshot" columnName="FeeID" columnDataType = "bigint"/>
	</changeSet>
	
	<changeSet id="EP#890.1.1" author="ahmad.s">
		<addPrimaryKey tableName="FinFeeDetail_Snapshot" constraintName="PK_FinFeeDetail_Snapshot" columnNames="AppDate, FeeID" />
	</changeSet>

	<changeSet id="EP#890.1.2" author="ahmad.s">
		<createIndex indexName="IDX_FFD_SS_FinRef" tableName="FinFeeDetail_Snapshot">
			<column name="FinReference" />
		</createIndex>
	</changeSet>

	<changeSet id="EP#890.1.3" author="ahmad.s">
		<createIndex indexName="IDX_FFD_SS_FeeId" tableName="FinFeeDetail_Snapshot">
			<column name="feeid" />
		</createIndex>
	</changeSet>

	<changeSet id="EP#890.1.4" author="ahmad.s">
		<createIndex indexName="IDX_FFD_SS_FinRef_AppDate" tableName="FinFeeDetail_Snapshot">
			<column name="FinReference" />
			<column name="AppDate" />
		</createIndex>
	</changeSet>

	<changeSet id="EP#890.2" author="ahmad.s">
		<createTable tableName="ManualAdvise_Snapshot">
			<column name="AppDate" type="datetime" />
			<column name="AdviseID" type="bigint" />
			<column name="AdviseType" type="int" />
			<column name="FinReference" type="varchar(20)" />
			<column name="CustID" type="bigint" />
			<column name="FeeTypeID" type="bigint" />
			<column name="Sequence" type="int" />
			<column name="AdviseAmount" type="number(18,0)" />
			<column name="PaidAmount" type="number(18,0)" />
			<column name="WaivedAmount" type="number(18,0)" />
			<column name="Remarks" type="varchar(100)" />
			<column name="Version" type="int" />
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkFlowId" type="bigint" />
			<column name="BounceID" type="bigint" />
			<column name="ReceiptID" type="bigint" />
			<column name="ValueDate" type="datetime" />
			<column name="PostDate" type="datetime" />
			<column name="ReservedAmt" type="number(18,0)" />
			<column name="BalanceAmt" type="number(18,0)" />
			<column name="PaidCGST" type="number(18,0)" />
			<column name="PaidSGST" type="number(18,0)" />
			<column name="PaidUGST" type="number(18,0)" />
			<column name="PaidIGST" type="number(18,0)" />
			<column name="WaivedCGST" type="number(18,0)" />
			<column name="WaivedSGST" type="number(18,0)" />
			<column name="WaivedIGST" type="number(18,0)" />
			<column name="WaivedUGST" type="number(18,0)" />
			<column name="WaivedCESS" type="number(18,0)" />
			<column name="PaidCESS" type="number(18,0)" />
			<column name="FinSource" type="varchar(8)" />
			<column name="DueCreation" type="smallint" />
			<column name="LinkedTranID" type="bigint" />
			<column name="TdsPaid" type="number(18,0)" />
			<column name="HoldDue" type="boolean" />
		</createTable>
	</changeSet>

	<changeSet id="EP#890.2_pre1" author="ahmad.s" dbms="mssql">
		<addNotNullConstraint tableName="ManualAdvise_Snapshot" columnName="AppDate" columnDataType = "datetime"/>
	</changeSet>
	
	<changeSet id="EP#890.2_pre2" author="ahmad.s" dbms="mssql">
		<addNotNullConstraint tableName="ManualAdvise_Snapshot" columnName="AdviseID" columnDataType = "bigint"/>
	</changeSet>
	
	<changeSet id="EP#890.2.1" author="ahmad.s">
		<addPrimaryKey tableName="ManualAdvise_Snapshot" constraintName="PK_ManualAdvise_Snapshot" columnNames="AppDate, AdviseID" />
	</changeSet>

	<changeSet id="EP#890.2.2" author="ahmad.s">
		<createIndex indexName="IDX_MA_SS_FinRef" tableName="ManualAdvise_Snapshot">
			<column name="FinReference" />
		</createIndex>
	</changeSet>

	<changeSet id="EP#890.2.3" author="ahmad.s">
		<createIndex indexName="IDX_MA_SS_FinRef_AppDate" tableName="ManualAdvise_Snapshot">
			<column name="FinReference" />
			<column name="AppDate" />
		</createIndex>
	</changeSet>
	
	<changeSet id="ST#1442.12" author="saranya.s">
		<sql>
			<![CDATA[
				UPDATE Customers SET MarginDeviation = 0 WHERE MarginDeviation is null;
				UPDATE Customers_Temp SET MarginDeviation = 0 WHERE MarginDeviation is null;
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#1544.72" author="sampath.d">
		<sql>
			<![CDATA[
				Delete from SMTPARAMETERS where SYSPARMCode = 'ACCOUNTING_VALIDATION_REQ';
			]]>
		</sql>
	</changeSet>

	<changeSet id="DE#140_pre" author="narendra.m" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'postings_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="DE#140" author="narendra.m">
		<createView viewName="POSTINGS_VIEW" replaceIfExists="true">
			<![CDATA[	
				SELECT T1.LINKEDTRANID,
					T1.POSTREF,
					T1.POSTINGID,
					T1.FINREFERENCE,
					T1.FINEVENT,
					T1.POSTDATE,
					T1.VALUEDATE,
					T1.APPVALUEDATE,
					T1.APPDATE,
					T1.TRANCODE,
					T1.REVTRANCODE,
					T1.DRORCR,
					T1.ACCOUNT,
					T1.POSTAMOUNT,
					T1.POSTSTATUS,
					T1.ERRORID,
					T1.ERRORMSG,
					T2.AEEVENTCODEDESC LOVDESCEVENTCODENAME,
					T1.SHADOWPOSTING,
					T1.TRANDESC,
					T1.AMOUNTTYPE,
					T1.ACCCY,
					T1.POSTBRANCH,
					T1.USERBRANCH,
					T1.TRANORDERID,
					T1.TRANSORDER
				FROM POSTINGS T1
				JOIN BMTAEEVENTS T2 ON T1.FINEVENT = T2.AEEVENTCODE
				JOIN (SELECT FINANCEMAIN.FINREFERENCE 
					  FROM FINANCEMAIN
					  UNION
					  SELECT FINANCEMAIN_TEMP.FINREFERENCE
					  FROM FINANCEMAIN_TEMP) T3 ON T3.FINREFERENCE = T1.FINREFERENCE
					  WHERE T1.FINEVENT NOT IN ('VASFEE', 'JVPOST')
				UNION ALL
				SELECT T1.LINKEDTRANID,
					T1.POSTREF,
					T1.POSTINGID,
					T3.PRIMARYLINKREF FINREFERENCE,
					T1.FINEVENT,
					T1.POSTDATE,
					T1.VALUEDATE,
					T1.APPVALUEDATE,
					T1.APPDATE,
					T1.TRANCODE,
					T1.REVTRANCODE,
					T1.DRORCR,
					T1.ACCOUNT,
					T1.POSTAMOUNT,
					T1.POSTSTATUS,
					T1.ERRORID,
					T1.ERRORMSG,
					T2.AEEVENTCODEDESC LOVDESCEVENTCODENAME,
					T1.SHADOWPOSTING,
					T1.TRANDESC,
					T1.AMOUNTTYPE,
					T1.ACCCY,
					T1.POSTBRANCH,
					T1.USERBRANCH,
					T1.TRANORDERID,
					T1.TRANSORDER
				FROM POSTINGS T1
				JOIN BMTAEEVENTS T2 ON T1.FINEVENT = T2.AEEVENTCODE
				JOIN VASRECORDING T3 ON T3.VASREFERENCE = T1.FINREFERENCE
				WHERE T1.FINEVENT = 'VASFEE'
				UNION ALL
				SELECT T1.LINKEDTRANID,
					T1.POSTREF,
					T1.POSTINGID,
					cast(T3.REFERENCE as varchar(20)) FINREFERENCE,
					T1.FINEVENT,
					T1.POSTDATE,
					T1.VALUEDATE,
					T1.APPVALUEDATE,
					T1.APPDATE,
					T1.TRANCODE,
					T1.REVTRANCODE,
					T1.DRORCR,
					T1.ACCOUNT,
					T1.POSTAMOUNT,
					T1.POSTSTATUS,
					T1.ERRORID,
					T1.ERRORMSG,
					T2.AEEVENTCODEDESC LOVDESCEVENTCODENAME,
					T1.SHADOWPOSTING,
					T1.TRANDESC,
					T1.AMOUNTTYPE,
					T1.ACCCY,
					T1.POSTBRANCH,
					T1.USERBRANCH,
					T1.TRANORDERID,
					T1.TRANSORDER
				FROM POSTINGS T1
				JOIN BMTAEEVENTS T2 ON T1.FINEVENT = T2.AEEVENTCODE
				JOIN JVPOSTINGS T3 ON cast(T3.BATCHREFERENCE as varchar(20)) = T1.FINREFERENCE
                JOIN FINANCEMAIN T4 ON T3.REFERENCE = T4.FINREFERENCE
				WHERE T1.FINEVENT = 'JVPOST'
				UNION ALL
				SELECT T1.LINKEDTRANID,
					T1.POSTREF,
					T1.POSTINGID,
					T4.FINREFERENCE,
					T1.FINEVENT,
					T1.POSTDATE,
					T1.VALUEDATE,
					T1.APPVALUEDATE,
					T1.APPDATE,
					T1.TRANCODE,
					T1.REVTRANCODE,
					T1.DRORCR,
					T1.ACCOUNT,
					T1.POSTAMOUNT,
					T1.POSTSTATUS,
					T1.ERRORID,
					T1.ERRORMSG,
					T2.AEEVENTCODEDESC LOVDESCEVENTCODENAME,
					T1.SHADOWPOSTING,
					T1.TRANDESC,
					T1.AMOUNTTYPE,
					T1.ACCCY,
					T1.POSTBRANCH,
					T1.USERBRANCH,
					T1.TRANORDERID,
					T1.TRANSORDER
				FROM POSTINGS T1
				JOIN BMTAEEVENTS T2 ON T1.FINEVENT = T2.AEEVENTCODE
				JOIN FEEPOSTINGS T3 ON cast(T3.POSTID as varchar(20)) = T1.FINREFERENCE
				JOIN FINANCEMAIN T4 ON T3.REFERENCE = T4.FINREFERENCE
				WHERE T1.FINEVENT = 'MANFEE'
			]]>		
		</createView>
	</changeSet>

	<changeSet id="DE#140_post" author="narendra.m" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'postings_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="DE#148" author="satyanarayana.g">
	 	<sql>
		 	<![CDATA[
		 	    DELETE FROM SECGROUPRIGHTS WHERE RIGHTID IN (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='menuItem_PastDueReports_PastDue');
			    DELETE FROM SECRIGHTS WHERE RIGHTNAME='menuItem_PastDueReports_PastDue';
			    INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menuItem_PastDueReports_PastDue','MENU',0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			    INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='REPORTS_ADMIN') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='menuItem_PastDueReports_PastDue'),1,0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
		  	]]>
	 	</sql>
   </changeSet>
   
   <changeSet id="DE#26.2_pre" author="naveenkumar.a" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'int_disbursement_request_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="DE#26.2" author="naveenkumar.a">
		<createView viewName="INT_DISBURSEMENT_REQUEST_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FA.PAYMENTID,
				FA.FINREFERENCE,
				'D' CHANNEL,
				0 PROVIDERID,
				CASE
				WHEN FA.PAYMENTTYPE = 'NEFT'
				THEN 'N'
				WHEN FA.PAYMENTTYPE = 'RTGS'
				THEN 'R'
				WHEN
				FA.PAYMENTTYPE = 'DD'
				THEN 'D'
				WHEN FA.PAYMENTTYPE = 'CHEQUE'
				THEN 'C'
				WHEN FA.PAYMENTTYPE = 'IFT'
				THEN 'I'
				ELSE FA.PAYMENTTYPE
				END DISBURSEMENT_TYPE,
				FA.AMTTOBERELEASED,
				FA.DISBDATE,
				FA.LLDATE,
				FA.PAYABLELOC,
				FA.PRINTINGLOC,
				CU.CUSTCIF,
				CU.CUSTSHRTNAME,
				'' CUSTOMER_MOBILE,
				CE.CUSTEMAIL CUSTOMER_EMAIL,
				CS.CPPROVINCENAME CUSTOMER_STATE,
				CC.PCCITYNAME CUSTOMER_CITY,
				'' CUSTOMER_ADDRESS1,
				'' CUSTOMER_ADDRESS2,
				'' CUSTOMER_ADDRESS3,
				'' CUSTOMER_ADDRESS4,
				'' CUSTOMER_ADDRESS5,
				BD.BANKNAME,
				BB.BRANCHCODE,
				BB.BRANCHDESC,
				PBD.CPPROVINCENAME BENFICIARY_BRANCH_STATE,
				PBD.PCCITYNAME BENFICIARY_BRANCH_CITY,
				BB.MICR MICR_CODE,
				BB.IFSC IFSC_CODE,
				FA.BENEFICIARYACCNO,
				CASE
				WHEN FA.PAYMENTTYPE = 'CHEQUE'
				OR FA.PAYMENTTYPE = 'DD'
				THEN
				FA.LIABILITYHOLDNAME
				ELSE FA.BENEFICIARYNAME
				END BENEFICIARYNAME,
				(FA.PHONECOUNTRYCODE ${call.concatenate} FA.PHONEAREACODE) ${call.concatenate} FA.PHONENUMBER BENEFICIARY_MOBILE,
				BCE.CUSTEMAIL BENFICIRY_EMAIL,
				BRS.CPPROVINCENAME BENFICIARY_STATE,
				BRC.PCCITYNAME BENFICIARY_CITY,
				BRCA.CustAddrHNbr ${call.concatenate}','${call.concatenate} BRCA.CustAddrStreet ${call.concatenate}','${call.concatenate} BRC.PCCITYNAME ${call.concatenate}','${call.concatenate} BRS.CPPROVINCENAME  BENFICIARY_ADDRESS1,
				'' BENFICIARY_ADDRESS2,
				'' BENFICIARY_ADDRESS3,
				'' BENFICIARY_ADDRESS4,
				'' BENFICIARY_ADDRESS5,
				'' PAYMENT_DETAIL1,
				'' PAYMENT_DETAIL2,
				'' PAYMENT_DETAIL3,
				'' PAYMENT_DETAIL4,
				'' PAYMENT_DETAIL5,
				'' PAYMENT_DETAIL6,
				'' PAYMENT_DETAIL7,
				FA.STATUS,
				FA.DESCRIPTION REMARKS,
				FA.PAYMENTTYPE,
				FM.FINTYPE,
				PB.PARTNERBANKID
				PARTNERBANK_ID,
				PB.PARTNERBANKCODE PARTNERBANK_CODE,
				FA.INPUTDATE,
				PB.ALWFILEDOWNLOAD,
				PB.FILENAME,
				FM.FINISACTIVE,
				SMD.ENTITYCODE,
				FA.HOLDDISBURSEMENT HOLDDISBURSEMENT,
				PB.ACCOUNTNO PARTNERBANK_ACCOUNT
				FROM FINADVANCEPAYMENTS FA
				JOIN
				(SELECT FINANCEMAIN_TEMP.CUSTID,
				FINANCEMAIN_TEMP.FINREFERENCE,
				FINANCEMAIN_TEMP.FINTYPE,
				FINANCEMAIN_TEMP.FINISACTIVE
				FROM FINANCEMAIN_TEMP
				UNION ALL
				SELECT T2.CUSTID,
				T2.FINREFERENCE,
				T2.FINTYPE,
				T2.FINISACTIVE
				FROM FINANCEMAIN T2
				WHERE NOT (EXISTS
				( SELECT 1 FROM
				FINANCEMAIN_TEMP T3 WHERE T3.FINREFERENCE = T2.FINREFERENCE))) FM
				ON FM.FINREFERENCE = FA.FINREFERENCE
				JOIN CUSTOMERS CU ON CU.CUSTID = FM.CUSTID	
				JOIN RMTCURRENCIES CCY ON CCY.CCYCODE	= FA.DISBCCY
				JOIN PARTNERBANKS PB ON PB.PARTNERBANKID = FA.PARTNERBANKID
				LEFT JOIN CUSTOMEREMAILS CE	ON CE.CUSTID = CU.CUSTID AND CE.CUSTEMAILPRIORITY = 5
				LEFT JOIN CUSTOMERADDRESSES CA ON CA.CUSTID = CE.CUSTID	AND CA.CUSTADDRPRIORITY = 5
				LEFT JOIN RMTPROVINCEVSCITY CC ON CC.PCCITY = CA.CUSTADDRCITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE CS ON CS.CPPROVINCE = CC.PCPROVINCE
				LEFT JOIN BANKBRANCHES BB ON BB.BANKBRANCHID = FA.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL BD ON BD.BANKCODE =	BB.BANKCODE
				LEFT JOIN ( SELECT PB_1.PARTNERBANKID,	
				PBD_1.BANKNAME,
				PBB.BRANCHDESC,
				PBBRC.PCCITYNAME,
				PBBRS.CPPROVINCENAME FROM PARTNERBANKS PB_1
				JOIN BANKBRANCHES PBB ON PBB.BRANCHCODE = PB_1.BANKBRANCHCODE AND PBB.BANKCODE = PB_1.BANKCODE
				JOIN BMTBANKDETAIL PBD_1 ON PBD_1.BANKCODE = PBB.BANKCODE
				LEFT JOIN RMTPROVINCEVSCITY PBBRC ON PBBRC.PCCITY = PBB.CITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE PBBRS ON PBBRS.CPPROVINCE = PBBRC.PCPROVINCE
				) PBD ON PBD.PARTNERBANKID = PB.PARTNERBANKID
				LEFT JOIN BENEFICIARY BR ON BR.BANKBRANCHID = FA.BANKBRANCHID AND
				BR.ACCNUMBER = FA.BENEFICIARYACCNO AND BR.CUSTID = FM.CUSTID
				LEFT JOIN CUSTOMERS BC ON BC.CUSTID = BR.CUSTID
				LEFT JOIN CUSTOMEREMAILS BCE ON BCE.CUSTID = CU.CUSTID
				AND BCE.CUSTEMAILPRIORITY = 5
				LEFT JOIN CUSTOMERADDRESSES	BRCA ON	BRCA.CUSTID = BR.CUSTID
				AND BRCA.CUSTADDRPRIORITY = 5
				LEFT JOIN RMTPROVINCEVSCITY BRC	ON BRC.PCCITY =	BRCA.CUSTADDRCITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE BRS ON BRS.CPPROVINCE = BRC.PCPROVINCE
				LEFT JOIN RMTFINANCETYPES RFT ON FM.FINTYPE = RFT.FINTYPE
				LEFT JOIN SMTDIVISIONDETAIL SMD	ON RFT.FINDIVISION = SMD.DIVISIONCODE
				WHERE FA.STATUS = 'APPROVED' AND NOT (FA.PAYMENTID IN ( 
				SELECT DISBURSEMENT_REQUESTS.DISBURSEMENT_ID FROM DISBURSEMENT_REQUESTS))
				AND NOT	(FA.PAYMENTID IN ( SELECT FINADVANCEPAYMENTS_TEMP.PAYMENTID FROM FINADVANCEPAYMENTS_TEMP))
				UNION ALL
				SELECT
				PI.PAYMENTINSTRUCTIONID PAYMENTID,
				PH.FINREFERENCE,
				PH.PAYMENTTYPE CHANNEL,
				0 PROVIDERID,
				CASE
				WHEN PI.PAYMENTTYPE =
				'NEFT'
				THEN 'N'
				WHEN PI.PAYMENTTYPE = 'RTGS'
				THEN 'R'
				WHEN PI.PAYMENTTYPE = 'DD'
				THEN 'D'
				WHEN PI.PAYMENTTYPE = 'CHEQUE'
				THEN 'C'
				WHEN PI.PAYMENTTYPE = 'IFT'
				THEN 'I'
				ELSE PI.PAYMENTTYPE
				END DISBURSEMENT_TYPE,
				PI.PAYMENTAMOUNT  AMTTOBERELEASED,
				PI.POSTDATE
				DISBDATE,
				PI.POSTDATE LLDATE,
				PI.PAYABLELOC,
				PI.PRINTINGLOC,
				CU.CUSTCIF,
				CU.CUSTSHRTNAME,
				'' CUSTOMER_MOBILE,
				CE.CUSTEMAIL
				CUSTOMER_EMAIL,
				CS.CPPROVINCENAME CUSTOMER_STATE,
				CC.PCCITYNAME CUSTOMER_CITY,
				'' CUSTOMER_ADDRESS1,
				'' CUSTOMER_ADDRESS2,
				'' CUSTOMER_ADDRESS3,
				'' CUSTOMER_ADDRESS4,
				'' CUSTOMER_ADDRESS5,
				BD.BANKNAME,
				BB.BRANCHCODE,
				BB.BRANCHDESC,
				BBRS.CPPROVINCENAME BENFICIARY_BRANCH_STATE,
				BBRC.PCCITYNAME BENFICIARY_BRANCH_CITY,
				BB.MICR MICR_CODE,
				BB.IFSC IFSC_CODE,
				PI.ACCOUNTNO BENEFICIARYACCNO,
				CASE
				WHEN PI.PAYMENTTYPE = 'CHEQUE'
				OR PI.PAYMENTTYPE = 'DD'
				THEN
				PI.FAVOURNAME
				ELSE PI.ACCTHOLDERNAME
				END BENEFICIARYNAME,
				PI.PHONECOUNTRYCODE ${call.concatenate} PI.PHONENUMBER BENEFICIARY_MOBILE,
				BCE.CUSTEMAIL BENFICIRY_EMAIL,
				BRS.CPPROVINCENAME BENFICIARY_STATE,
				BRC.PCCITYNAME BENFICIARY_CITY,
				'' BENFICIARY_ADDRESS1,
				'' BENFICIARY_ADDRESS2,
				'' BENFICIARY_ADDRESS3,
				'' BENFICIARY_ADDRESS4,
				'' BENFICIARY_ADDRESS5,
				'' PAYMENT_DETAIL1,
				'' PAYMENT_DETAIL2,
				'' PAYMENT_DETAIL3,
				'' PAYMENT_DETAIL4,
				'' PAYMENT_DETAIL5,
				'' PAYMENT_DETAIL6,
				'' PAYMENT_DETAIL7,
				PI.STATUS,
				PI.REMARKS,
				PI.PAYMENTTYPE,
				FM.FINTYPE,
				PB.PARTNERBANKID PARTNERBANK_ID,
				PB.PARTNERBANKCODE
				PARTNERBANK_CODE,
				PI.POSTDATE INPUTDATE,
				PB.ALWFILEDOWNLOAD,
				PB.FILENAME,
				FM.FINISACTIVE,
				SMD.ENTITYCODE,
				0 HOLDDISBURSEMENT,
				PB.ACCOUNTNO
				PARTNERBANK_ACCOUNTNO
				FROM PAYMENTINSTRUCTIONS PI
				JOIN PAYMENTHEADER PH ON PH.PAYMENTID = PI.PAYMENTID
				JOIN (SELECT
				FINANCEMAIN.CUSTID,
				FINANCEMAIN.FINREFERENCE,
				FINANCEMAIN.FINTYPE,
				FINANCEMAIN.FINISACTIVE
				FROM FINANCEMAIN
				UNION ALL
				SELECT T2.CUSTID,
				T2.FINREFERENCE,
				T2.FINTYPE,
				T2.FINISACTIVE
				FROM FINANCEMAIN_TEMP T2
				WHERE NOT (EXISTS
				( SELECT 1 FROM
				FINANCEMAIN_TEMP T3 WHERE T3.FINREFERENCE = T2.FINREFERENCE))) FM ON FM.FINREFERENCE = PH.FINREFERENCE
				JOIN CUSTOMERS CU ON CU.CUSTID = FM.CUSTID
				JOIN RMTCURRENCIES CCY ON CCY.CCYCODE = PI.PAYMENTCCY
				JOIN PARTNERBANKS PB ON PB.PARTNERBANKID = PI.PARTNERBANKID
				LEFT JOIN CUSTOMEREMAILS CE ON CE.CUSTID = CU.CUSTID AND CE.CUSTEMAILPRIORITY = 5
				LEFT JOIN CUSTOMERADDRESSES CA ON CA.CUSTID = CE.CUSTID AND CA.CUSTADDRPRIORITY = 5
				LEFT JOIN RMTPROVINCEVSCITY CC ON CC.PCCITY = CA.CUSTADDRCITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE CS ON CS.CPPROVINCE = CC.PCPROVINCE
				LEFT JOIN CUSTOMERPHONENUMBERS CM ON CM.PHONECUSTID = CU.CUSTID
				AND CM.PHONETYPECODE = 'MOBILE1' AND CM.PHONETYPEPRIORITY = 5
				LEFT JOIN BANKBRANCHES BB ON BB.BANKBRANCHID = PI.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL BD ON BD.BANKCODE = BB.BANKCODE
				LEFT JOIN RMTPROVINCEVSCITY	BBRC ON BBRC.PCCITY = BB.CITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE BBRS	ON BBRS.CPPROVINCE = BBRC.PCPROVINCE
				LEFT JOIN BENEFICIARY BR ON BR.BANKBRANCHID = PI.BANKBRANCHID
				AND BR.ACCNUMBER = PI.ACCOUNTNO	AND BR.CUSTID = FM.CUSTID
				LEFT JOIN CUSTOMERS BC ON BC.CUSTID = BR.CUSTID
				LEFT JOIN CUSTOMEREMAILS BCE ON	BCE.CUSTID = CU.CUSTID AND BCE.CUSTEMAILPRIORITY = 5
				LEFT JOIN CUSTOMERADDRESSES BRCA ON BRCA.CUSTID = BR.CUSTID	AND	BRCA.CUSTADDRPRIORITY = 5
				LEFT JOIN RMTPROVINCEVSCITY BRC	ON BRC.PCCITY = BRCA.CUSTADDRCITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE BRS ON BRS.CPPROVINCE = BRC.PCPROVINCE
				LEFT JOIN RMTFINANCETYPES RFT ON FM.FINTYPE = RFT.FINTYPE
				LEFT JOIN SMTDIVISIONDETAIL SMD	ON RFT.FINDIVISION = SMD.DIVISIONCODE
				WHERE PI.STATUS = 'APPROVED'
				AND NOT
				(PI.PAYMENTINSTRUCTIONID IN
				( SELECT DISBURSEMENT_REQUESTS.DISBURSEMENT_ID FROM
				DISBURSEMENT_REQUESTS
				))
				UNION ALL
				SELECT PI.ID PAYMENTID,
				VR.PRIMARYLINKREF FINREFERENCE,
				'I' CHANNEL,
				PI.PROVIDERID,
				CASE
				WHEN
				PI.PAYMENTTYPE = 'NEFT'
				THEN 'N'
				WHEN PI.PAYMENTTYPE = 'RTGS'
				THEN 'R'
				WHEN PI.PAYMENTTYPE = 'DD'
				THEN 'D'
				WHEN
				PI.PAYMENTTYPE = 'CHEQUE'
				THEN 'C'
				WHEN PI.PAYMENTTYPE = 'IFT'
				THEN 'I'
				ELSE PI.PAYMENTTYPE
				END DISBURSEMENT_TYPE,
				PI.PAYMENTAMOUNT  AMTTOBERELEASED,
				PI.PAYMENTDATE DISBDATE,
				PI.PAYMENTDATE LLDATE,
				'' PAYABLELOC,
				'' PRINTINGLOC,
				C.CustCIF CUSTCIF,
				'' CUSTSHRTNAME,
				'' CUSTOMER_MOBILE,
				'' CUSTOMER_EMAIL,
				'' CUSTOMER_STATE,
				'' CUSTOMER_CITY,
				'' CUSTOMER_ADDRESS1,
				'' CUSTOMER_ADDRESS2,
				'' CUSTOMER_ADDRESS3,
				'' CUSTOMER_ADDRESS4,
				'' CUSTOMER_ADDRESS5,
				BD.BANKNAME,
				BB.BRANCHCODE,
				BB.BRANCHDESC,
				BBRS.CPPROVINCENAME BENFICIARY_BRANCH_STATE,
				BBRC.PCCITYNAME BENFICIARY_BRANCH_CITY,
				BB.MICR MICR_CODE,
				BB.IFSC IFSC_CODE,
				VPA.ACCOUNTNUMBER BENEFICIARYACCNO,
				AVD.DEALERNAME BENEFICIARYNAME,
				AVD.DEALERTELEPHONE
				BENEFICIARY_MOBILE,
				AVD.EMAIL BENFICIRY_EMAIL,
				BRS.CPPROVINCENAME BENFICIARY_STATE,
				BRC.PCCITYNAME BENFICIARY_CITY,
				AVD.DEALERADDRESS1 BENFICIARY_ADDRESS1,
				AVD.DEALERADDRESS2 BENFICIARY_ADDRESS2,
				AVD.DEALERADDRESS3 BENFICIARY_ADDRESS3,
				'' BENFICIARY_ADDRESS4,
				'' BENFICIARY_ADDRESS5,
				'' PAYMENT_DETAIL1,
				'' PAYMENT_DETAIL2,
				'' PAYMENT_DETAIL3,
				'' PAYMENT_DETAIL4,
				'' PAYMENT_DETAIL5,
				'' PAYMENT_DETAIL6,
				'' PAYMENT_DETAIL7,
				PI.STATUS,
				PI.REMARKS,
				PI.PAYMENTTYPE,
				'' FINTYPE,
				PB.PARTNERBANKID PARTNERBANK_ID,
				PB.PARTNERBANKCODE PARTNERBANK_CODE,
				PI.PAYMENTDATE INPUTDATE,
				PB.ALWFILEDOWNLOAD,
				PB.FILENAME,
				1 FINISACTIVE,
				PI.ENTITYCODE,
				0 HOLDDISBURSEMENT,
				PB.ACCOUNTNO PARTNERBANK_ACCOUNT
				FROM INSURANCEPAYMENTINSTRUCTIONS PI
				JOIN RMTCURRENCIES CCY ON CCY.CCYCODE = PI.PAYMENTCCY
				JOIN PARTNERBANKS PB ON	PB.PARTNERBANKID = PI.PARTNERBANKID
				JOIN VASPROVIDERACCDETAIL VPA ON VPA.PROVIDERID = PI.PROVIDERID
				JOIN AMTVEHICLEDEALER AVD ON AVD.DEALERID = VPA.PROVIDERID
				JOIN VASRECORDING VR ON VR.PAYMENTINSID = PI.ID
				LEFT JOIN FinanceMain FM on FM.finreference = VR.PrimaryLinkRef
				LEFT JOIN Customers C on FM.CustID = C.CustID
				LEFT JOIN BANKBRANCHES BB ON BB.BANKBRANCHID = VPA.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL BD ON BD.BANKCODE = BB.BANKCODE
				LEFT JOIN RMTPROVINCEVSCITY BBRC ON BBRC.PCCITY	= BB.CITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE BBRS	ON BBRS.CPPROVINCE = BBRC.PCPROVINCE
				LEFT JOIN RMTPROVINCEVSCITY BRC	ON BRC.PCCITY =	AVD.DEALERCITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE BRS ON BRS.CPPROVINCE = BRC.PCPROVINCE
				WHERE PI.STATUS = 'APPROVED' AND PI.PAYMENTAMOUNT > 0
				AND NOT (PI.ID IN( SELECT DISBURSEMENT_REQUESTS.DISBURSEMENT_ID FROM DISBURSEMENT_REQUESTS))
			 ]]>
		</createView>
	</changeSet>
	
	<changeSet id="DE#26.2_post" author="naveenkumar.a" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'int_disbursement_request_view');
			]]>
		</sql>
	</changeSet>
   
   <changeSet id="DE#1454" author="saisandeep.b" >
		<sql>
			<![CDATA[
				DELETE FROM BMTAMOUNTCODES WHERE ALLOWEDEVENT = 'LATEPAY' and AMOUNTCODE = 'ae_penaltyAccr';
				INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) Values ('LATEPAY', 0, 'ae_penaltyAccr', 'Penalty Accured', 1, 1, 1005, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="DE#1454.1" author="saisandeep.b">
		<sql>
			<![CDATA[
				DELETE FROM BMTAMOUNTCODES WHERE ALLOWEDEVENT = 'LATEPAY' and AMOUNTCODE = 'LPP_TDS_P';
				INSERT INTO BMTAMOUNTCODES (ALLOWEDEVENT, ALLOWEDRIA, AMOUNTCODE, AMOUNTCODEDESC, AMOUNTCODEISACTIVE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) Values('LATEPAY', 0, 'LPP_TDS_P', 'Penalty TDS Paid', 1, 1, 1005, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="DE#1643" author="murthy.y" >
		<dropColumn tableName="DISBURSEMENT_MOVEMENTS_LOG" columnName="MOVEMENT_ID" />
	</changeSet>

	<changeSet id="DE#149.1" author="narendra.m">
		<addColumn tableName="PRESENTMENT_REQ_DETAILS_TEMP">
			<column name="SETILMENT_DATE" type="datetime" />
		</addColumn>
	</changeSet>
	
	<changeSet id="DE#149.2" author="narendra.m">
		<addColumn tableName="PRESENTMENT_REQ_DETAILS">
			<column name="SETILMENT_DATE" type="datetime" />
		</addColumn>
	</changeSet>
	
	<changeSet id="DE#149.3" author="narendra.m">
		<addColumn tableName="PRESENTMENT_REQ_DETAILS_TEMP">
			<column name="CUST_CIF" type="bigint" />
		</addColumn>
	</changeSet>
	
	<changeSet id="DE#149.4" author="narendra.m">
		<addColumn tableName="PRESENTMENT_REQ_DETAILS">
			<column name="CUST_CIF" type="bigint" />
		</addColumn>
	</changeSet>
	
	<changeSet id="DE#149.5" author="narendra.m">
		<addColumn tableName="PRESENTMENT_REQ_DETAILS_TEMP">
			<column name="PDC_BY_NAME" type="varchar(50)" />
		</addColumn>
	</changeSet>
	
	<changeSet id="DE#149.6" author="narendra.m">
		<addColumn tableName="PRESENTMENT_REQ_DETAILS">
			<column name="PDC_BY_NAME" type="varchar(50)" />
		</addColumn>
	</changeSet>
	
	<changeSet id="PSD#162966.4_pre" author="aditya.a" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'int_disbursement_request_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="PSD#162966.4" author="aditya.a">
		<createView viewName="INT_DISBURSEMENT_REQUEST_VIEW" replaceIfExists="true">
			<![CDATA[
				SELECT FA.PAYMENTID,
				FA.FINREFERENCE,
				'D' CHANNEL,
				0 PROVIDERID,
				CASE
				WHEN FA.PAYMENTTYPE = 'NEFT'
				THEN 'N'
				WHEN FA.PAYMENTTYPE = 'RTGS'
				THEN 'R'
				WHEN
				FA.PAYMENTTYPE = 'DD'
				THEN 'D'
				WHEN FA.PAYMENTTYPE = 'CHEQUE'
				THEN 'C'
				WHEN FA.PAYMENTTYPE = 'IFT'
				THEN 'I'
				ELSE FA.PAYMENTTYPE
				END DISBURSEMENT_TYPE,
				FA.AMTTOBERELEASED,
				FA.DISBDATE,
				FA.LLDATE,
				FA.PAYABLELOC,
				FA.PRINTINGLOC,
				CU.CUSTCIF,
				CU.CUSTSHRTNAME,
				'' CUSTOMER_MOBILE,
				CE.CUSTEMAIL CUSTOMER_EMAIL,
				CS.CPPROVINCENAME CUSTOMER_STATE,
				CC.PCCITYNAME CUSTOMER_CITY,
				'' CUSTOMER_ADDRESS1,
				'' CUSTOMER_ADDRESS2,
				'' CUSTOMER_ADDRESS3,
				'' CUSTOMER_ADDRESS4,
				'' CUSTOMER_ADDRESS5,
				BD.BANKNAME,
				BB.BRANCHCODE,
				BB.BRANCHDESC,
				PBD.CPPROVINCENAME BENFICIARY_BRANCH_STATE,
				PBD.PCCITYNAME BENFICIARY_BRANCH_CITY,
				BB.MICR MICR_CODE,
				BB.IFSC IFSC_CODE,
				FA.BENEFICIARYACCNO,
				CASE
				WHEN FA.PAYMENTTYPE = 'CHEQUE'
				OR FA.PAYMENTTYPE = 'DD'
				THEN
				FA.LIABILITYHOLDNAME
				ELSE FA.BENEFICIARYNAME
				END BENEFICIARYNAME,
				(FA.PHONECOUNTRYCODE ${call.concatenate} FA.PHONEAREACODE) ${call.concatenate} FA.PHONENUMBER BENEFICIARY_MOBILE,
				BCE.CUSTEMAIL BENFICIRY_EMAIL,
				BRS.CPPROVINCENAME BENFICIARY_STATE,
				BRC.PCCITYNAME BENFICIARY_CITY,
				BRCA.CustAddrHNbr ${call.concatenate}','${call.concatenate} BRCA.CustAddrStreet ${call.concatenate}','${call.concatenate} BRC.PCCITYNAME ${call.concatenate}','${call.concatenate} BRS.CPPROVINCENAME  BENFICIARY_ADDRESS1,
				'' BENFICIARY_ADDRESS2,
				'' BENFICIARY_ADDRESS3,
				'' BENFICIARY_ADDRESS4,
				'' BENFICIARY_ADDRESS5,
				'' PAYMENT_DETAIL1,
				'' PAYMENT_DETAIL2,
				'' PAYMENT_DETAIL3,
				'' PAYMENT_DETAIL4,
				'' PAYMENT_DETAIL5,
				'' PAYMENT_DETAIL6,
				'' PAYMENT_DETAIL7,
				FA.STATUS,
				FA.DESCRIPTION REMARKS,
				FA.PAYMENTTYPE,
				FM.FINTYPE,
				PB.PARTNERBANKID
				PARTNERBANK_ID,
				PB.PARTNERBANKCODE PARTNERBANK_CODE,
				FA.INPUTDATE,
				PB.ALWFILEDOWNLOAD,
				PB.FILENAME,
				FM.FINISACTIVE,
				SMD.ENTITYCODE,
				FA.HOLDDISBURSEMENT HOLDDISBURSEMENT,
				PB.ACCOUNTNO PARTNERBANK_ACCOUNT,
				CASE WHEN FA.PAYMENTTYPE = 'NEFT' OR FA.PAYMENTTYPE   = 'RTGS' THEN 'LBT'
				WHEN FA.PAYMENTTYPE = 'IMPS' THEN 'BT' ELSE ''
			  		END TRANSACTION_TYPE_CODE
				FROM FINADVANCEPAYMENTS FA
				JOIN
				(SELECT FINANCEMAIN_TEMP.CUSTID,
				FINANCEMAIN_TEMP.FINREFERENCE,
				FINANCEMAIN_TEMP.FINTYPE,
				FINANCEMAIN_TEMP.FINISACTIVE
				FROM FINANCEMAIN_TEMP
				UNION ALL
				SELECT T2.CUSTID,
				T2.FINREFERENCE,
				T2.FINTYPE,
				T2.FINISACTIVE
				FROM FINANCEMAIN T2
				WHERE NOT (EXISTS
				( SELECT 1 FROM
				FINANCEMAIN_TEMP T3 WHERE T3.FINREFERENCE = T2.FINREFERENCE))) FM
				ON FM.FINREFERENCE = FA.FINREFERENCE
				JOIN CUSTOMERS CU ON CU.CUSTID = FM.CUSTID	
				JOIN RMTCURRENCIES CCY ON CCY.CCYCODE	= FA.DISBCCY
				JOIN PARTNERBANKS PB ON PB.PARTNERBANKID = FA.PARTNERBANKID
				LEFT JOIN CUSTOMEREMAILS CE	ON CE.CUSTID = CU.CUSTID AND CE.CUSTEMAILPRIORITY = 5
				LEFT JOIN CUSTOMERADDRESSES CA ON CA.CUSTID = CE.CUSTID	AND CA.CUSTADDRPRIORITY = 5
				LEFT JOIN RMTPROVINCEVSCITY CC ON CC.PCCITY = CA.CUSTADDRCITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE CS ON CS.CPPROVINCE = CC.PCPROVINCE
				LEFT JOIN BANKBRANCHES BB ON BB.BANKBRANCHID = FA.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL BD ON BD.BANKCODE =	BB.BANKCODE
				LEFT JOIN ( SELECT PB_1.PARTNERBANKID,	
				PBD_1.BANKNAME,
				PBB.BRANCHDESC,
				PBBRC.PCCITYNAME,
				PBBRS.CPPROVINCENAME FROM PARTNERBANKS PB_1
				JOIN BANKBRANCHES PBB ON PBB.BRANCHCODE = PB_1.BANKBRANCHCODE AND PBB.BANKCODE = PB_1.BANKCODE
				JOIN BMTBANKDETAIL PBD_1 ON PBD_1.BANKCODE = PBB.BANKCODE
				LEFT JOIN RMTPROVINCEVSCITY PBBRC ON PBBRC.PCCITY = PBB.CITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE PBBRS ON PBBRS.CPPROVINCE = PBBRC.PCPROVINCE
				) PBD ON PBD.PARTNERBANKID = PB.PARTNERBANKID
				LEFT JOIN BENEFICIARY BR ON BR.BANKBRANCHID = FA.BANKBRANCHID AND
				BR.ACCNUMBER = FA.BENEFICIARYACCNO AND BR.CUSTID = FM.CUSTID
				LEFT JOIN CUSTOMERS BC ON BC.CUSTID = BR.CUSTID
				LEFT JOIN CUSTOMEREMAILS BCE ON BCE.CUSTID = CU.CUSTID
				AND BCE.CUSTEMAILPRIORITY = 5
				LEFT JOIN CUSTOMERADDRESSES	BRCA ON	BRCA.CUSTID = BR.CUSTID
				AND BRCA.CUSTADDRPRIORITY = 5
				LEFT JOIN RMTPROVINCEVSCITY BRC	ON BRC.PCCITY =	BRCA.CUSTADDRCITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE BRS ON BRS.CPPROVINCE = BRC.PCPROVINCE
				LEFT JOIN RMTFINANCETYPES RFT ON FM.FINTYPE = RFT.FINTYPE
				LEFT JOIN SMTDIVISIONDETAIL SMD	ON RFT.FINDIVISION = SMD.DIVISIONCODE
				WHERE FA.STATUS = 'APPROVED' AND NOT (FA.PAYMENTID IN ( 
				SELECT DISBURSEMENT_REQUESTS.DISBURSEMENT_ID FROM DISBURSEMENT_REQUESTS))
				AND NOT	(FA.PAYMENTID IN ( SELECT FINADVANCEPAYMENTS_TEMP.PAYMENTID FROM FINADVANCEPAYMENTS_TEMP))
				UNION ALL
				SELECT
				PI.PAYMENTINSTRUCTIONID PAYMENTID,
				PH.FINREFERENCE,
				PH.PAYMENTTYPE CHANNEL,
				0 PROVIDERID,
				CASE
				WHEN PI.PAYMENTTYPE =
				'NEFT'
				THEN 'N'
				WHEN PI.PAYMENTTYPE = 'RTGS'
				THEN 'R'
				WHEN PI.PAYMENTTYPE = 'DD'
				THEN 'D'
				WHEN PI.PAYMENTTYPE = 'CHEQUE'
				THEN 'C'
				WHEN PI.PAYMENTTYPE = 'IFT'
				THEN 'I'
				ELSE PI.PAYMENTTYPE
				END DISBURSEMENT_TYPE,
				PI.PAYMENTAMOUNT  AMTTOBERELEASED,
				PI.POSTDATE
				DISBDATE,
				PI.POSTDATE LLDATE,
				PI.PAYABLELOC,
				PI.PRINTINGLOC,
				CU.CUSTCIF,
				CU.CUSTSHRTNAME,
				'' CUSTOMER_MOBILE,
				CE.CUSTEMAIL
				CUSTOMER_EMAIL,
				CS.CPPROVINCENAME CUSTOMER_STATE,
				CC.PCCITYNAME CUSTOMER_CITY,
				'' CUSTOMER_ADDRESS1,
				'' CUSTOMER_ADDRESS2,
				'' CUSTOMER_ADDRESS3,
				'' CUSTOMER_ADDRESS4,
				'' CUSTOMER_ADDRESS5,
				BD.BANKNAME,
				BB.BRANCHCODE,
				BB.BRANCHDESC,
				BBRS.CPPROVINCENAME BENFICIARY_BRANCH_STATE,
				BBRC.PCCITYNAME BENFICIARY_BRANCH_CITY,
				BB.MICR MICR_CODE,
				BB.IFSC IFSC_CODE,
				PI.ACCOUNTNO BENEFICIARYACCNO,
				CASE
				WHEN PI.PAYMENTTYPE = 'CHEQUE'
				OR PI.PAYMENTTYPE = 'DD'
				THEN
				PI.FAVOURNAME
				ELSE PI.ACCTHOLDERNAME
				END BENEFICIARYNAME,
				PI.PHONECOUNTRYCODE ${call.concatenate} PI.PHONENUMBER BENEFICIARY_MOBILE,
				BCE.CUSTEMAIL BENFICIRY_EMAIL,
				BRS.CPPROVINCENAME BENFICIARY_STATE,
				BRC.PCCITYNAME BENFICIARY_CITY,
				'' BENFICIARY_ADDRESS1,
				'' BENFICIARY_ADDRESS2,
				'' BENFICIARY_ADDRESS3,
				'' BENFICIARY_ADDRESS4,
				'' BENFICIARY_ADDRESS5,
				'' PAYMENT_DETAIL1,
				'' PAYMENT_DETAIL2,
				'' PAYMENT_DETAIL3,
				'' PAYMENT_DETAIL4,
				'' PAYMENT_DETAIL5,
				'' PAYMENT_DETAIL6,
				'' PAYMENT_DETAIL7,
				PI.STATUS,
				PI.REMARKS,
				PI.PAYMENTTYPE,
				FM.FINTYPE,
				PB.PARTNERBANKID PARTNERBANK_ID,
				PB.PARTNERBANKCODE
				PARTNERBANK_CODE,
				PI.POSTDATE INPUTDATE,
				PB.ALWFILEDOWNLOAD,
				PB.FILENAME,
				FM.FINISACTIVE,
				SMD.ENTITYCODE,
				0 HOLDDISBURSEMENT,
				PB.ACCOUNTNO
				PARTNERBANK_ACCOUNTNO,
				CASE WHEN PI.PAYMENTTYPE = 'NEFT' OR PI.PAYMENTTYPE   = 'RTGS' THEN 'LBT'
					WHEN PI.PAYMENTTYPE = 'IMPS' THEN 'BT' ELSE '' 
					END TRANSACTION_TYPE_CODE
				FROM PAYMENTINSTRUCTIONS PI
				JOIN PAYMENTHEADER PH ON PH.PAYMENTID = PI.PAYMENTID
				JOIN (SELECT
				FINANCEMAIN.CUSTID,
				FINANCEMAIN.FINREFERENCE,
				FINANCEMAIN.FINTYPE,
				FINANCEMAIN.FINISACTIVE
				FROM FINANCEMAIN
				UNION ALL
				SELECT T2.CUSTID,
				T2.FINREFERENCE,
				T2.FINTYPE,
				T2.FINISACTIVE
				FROM FINANCEMAIN_TEMP T2
				WHERE NOT (EXISTS
				( SELECT 1 FROM
				FINANCEMAIN_TEMP T3 WHERE T3.FINREFERENCE = T2.FINREFERENCE))) FM ON FM.FINREFERENCE = PH.FINREFERENCE
				JOIN CUSTOMERS CU ON CU.CUSTID = FM.CUSTID
				JOIN RMTCURRENCIES CCY ON CCY.CCYCODE = PI.PAYMENTCCY
				JOIN PARTNERBANKS PB ON PB.PARTNERBANKID = PI.PARTNERBANKID
				LEFT JOIN CUSTOMEREMAILS CE ON CE.CUSTID = CU.CUSTID AND CE.CUSTEMAILPRIORITY = 5
				LEFT JOIN CUSTOMERADDRESSES CA ON CA.CUSTID = CE.CUSTID AND CA.CUSTADDRPRIORITY = 5
				LEFT JOIN RMTPROVINCEVSCITY CC ON CC.PCCITY = CA.CUSTADDRCITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE CS ON CS.CPPROVINCE = CC.PCPROVINCE
				LEFT JOIN CUSTOMERPHONENUMBERS CM ON CM.PHONECUSTID = CU.CUSTID
				AND CM.PHONETYPECODE = 'MOBILE1' AND CM.PHONETYPEPRIORITY = 5
				LEFT JOIN BANKBRANCHES BB ON BB.BANKBRANCHID = PI.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL BD ON BD.BANKCODE = BB.BANKCODE
				LEFT JOIN RMTPROVINCEVSCITY	BBRC ON BBRC.PCCITY = BB.CITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE BBRS	ON BBRS.CPPROVINCE = BBRC.PCPROVINCE
				LEFT JOIN BENEFICIARY BR ON BR.BANKBRANCHID = PI.BANKBRANCHID
				AND BR.ACCNUMBER = PI.ACCOUNTNO	AND BR.CUSTID = FM.CUSTID
				LEFT JOIN CUSTOMERS BC ON BC.CUSTID = BR.CUSTID
				LEFT JOIN CUSTOMEREMAILS BCE ON	BCE.CUSTID = CU.CUSTID AND BCE.CUSTEMAILPRIORITY = 5
				LEFT JOIN CUSTOMERADDRESSES BRCA ON BRCA.CUSTID = BR.CUSTID	AND	BRCA.CUSTADDRPRIORITY = 5
				LEFT JOIN RMTPROVINCEVSCITY BRC	ON BRC.PCCITY = BRCA.CUSTADDRCITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE BRS ON BRS.CPPROVINCE = BRC.PCPROVINCE
				LEFT JOIN RMTFINANCETYPES RFT ON FM.FINTYPE = RFT.FINTYPE
				LEFT JOIN SMTDIVISIONDETAIL SMD	ON RFT.FINDIVISION = SMD.DIVISIONCODE
				WHERE PI.STATUS = 'APPROVED'
				AND NOT
				(PI.PAYMENTINSTRUCTIONID IN
				( SELECT DISBURSEMENT_REQUESTS.DISBURSEMENT_ID FROM
				DISBURSEMENT_REQUESTS
				))
				UNION ALL
				SELECT PI.ID PAYMENTID,
				VR.PRIMARYLINKREF FINREFERENCE,
				'I' CHANNEL,
				PI.PROVIDERID,
				CASE
				WHEN
				PI.PAYMENTTYPE = 'NEFT'
				THEN 'N'
				WHEN PI.PAYMENTTYPE = 'RTGS'
				THEN 'R'
				WHEN PI.PAYMENTTYPE = 'DD'
				THEN 'D'
				WHEN
				PI.PAYMENTTYPE = 'CHEQUE'
				THEN 'C'
				WHEN PI.PAYMENTTYPE = 'IFT'
				THEN 'I'
				ELSE PI.PAYMENTTYPE
				END DISBURSEMENT_TYPE,
				PI.PAYMENTAMOUNT  AMTTOBERELEASED,
				PI.PAYMENTDATE DISBDATE,
				PI.PAYMENTDATE LLDATE,
				'' PAYABLELOC,
				'' PRINTINGLOC,
				C.CustCIF CUSTCIF,
				'' CUSTSHRTNAME,
				'' CUSTOMER_MOBILE,
				'' CUSTOMER_EMAIL,
				'' CUSTOMER_STATE,
				'' CUSTOMER_CITY,
				'' CUSTOMER_ADDRESS1,
				'' CUSTOMER_ADDRESS2,
				'' CUSTOMER_ADDRESS3,
				'' CUSTOMER_ADDRESS4,
				'' CUSTOMER_ADDRESS5,
				BD.BANKNAME,
				BB.BRANCHCODE,
				BB.BRANCHDESC,
				BBRS.CPPROVINCENAME BENFICIARY_BRANCH_STATE,
				BBRC.PCCITYNAME BENFICIARY_BRANCH_CITY,
				BB.MICR MICR_CODE,
				BB.IFSC IFSC_CODE,
				VPA.ACCOUNTNUMBER BENEFICIARYACCNO,
				AVD.DEALERNAME BENEFICIARYNAME,
				AVD.DEALERTELEPHONE
				BENEFICIARY_MOBILE,
				AVD.EMAIL BENFICIRY_EMAIL,
				BRS.CPPROVINCENAME BENFICIARY_STATE,
				BRC.PCCITYNAME BENFICIARY_CITY,
				AVD.DEALERADDRESS1 BENFICIARY_ADDRESS1,
				AVD.DEALERADDRESS2 BENFICIARY_ADDRESS2,
				AVD.DEALERADDRESS3 BENFICIARY_ADDRESS3,
				'' BENFICIARY_ADDRESS4,
				'' BENFICIARY_ADDRESS5,
				'' PAYMENT_DETAIL1,
				'' PAYMENT_DETAIL2,
				'' PAYMENT_DETAIL3,
				'' PAYMENT_DETAIL4,
				'' PAYMENT_DETAIL5,
				'' PAYMENT_DETAIL6,
				'' PAYMENT_DETAIL7,
				PI.STATUS,
				PI.REMARKS,
				PI.PAYMENTTYPE,
				'' FINTYPE,
				PB.PARTNERBANKID PARTNERBANK_ID,
				PB.PARTNERBANKCODE PARTNERBANK_CODE,
				PI.PAYMENTDATE INPUTDATE,
				PB.ALWFILEDOWNLOAD,
				PB.FILENAME,
				1 FINISACTIVE,
				PI.ENTITYCODE,
				0 HOLDDISBURSEMENT,
				PB.ACCOUNTNO PARTNERBANK_ACCOUNT,
				CASE WHEN PI.PAYMENTTYPE = 'NEFT' OR PI.PAYMENTTYPE   = 'RTGS' THEN 'LBT'
				WHEN PI.PAYMENTTYPE = 'IMPS' THEN 'BT' ELSE ''
			  		END TRANSACTION_TYPE_CODE
				FROM INSURANCEPAYMENTINSTRUCTIONS PI
				JOIN RMTCURRENCIES CCY ON CCY.CCYCODE = PI.PAYMENTCCY
				JOIN PARTNERBANKS PB ON	PB.PARTNERBANKID = PI.PARTNERBANKID
				JOIN VASPROVIDERACCDETAIL VPA ON VPA.PROVIDERID = PI.PROVIDERID
				JOIN AMTVEHICLEDEALER AVD ON AVD.DEALERID = VPA.PROVIDERID
				JOIN VASRECORDING VR ON VR.PAYMENTINSID = PI.ID
				LEFT JOIN FinanceMain FM on FM.finreference = VR.PrimaryLinkRef
				LEFT JOIN Customers C on FM.CustID = C.CustID
				LEFT JOIN BANKBRANCHES BB ON BB.BANKBRANCHID = VPA.BANKBRANCHID
				LEFT JOIN BMTBANKDETAIL BD ON BD.BANKCODE = BB.BANKCODE
				LEFT JOIN RMTPROVINCEVSCITY BBRC ON BBRC.PCCITY	= BB.CITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE BBRS	ON BBRS.CPPROVINCE = BBRC.PCPROVINCE
				LEFT JOIN RMTPROVINCEVSCITY BRC	ON BRC.PCCITY =	AVD.DEALERCITY
				LEFT JOIN RMTCOUNTRYVSPROVINCE BRS ON BRS.CPPROVINCE = BRC.PCPROVINCE
				WHERE PI.STATUS = 'APPROVED' AND PI.PAYMENTAMOUNT > 0
				AND NOT (PI.ID IN( SELECT DISBURSEMENT_REQUESTS.DISBURSEMENT_ID FROM DISBURSEMENT_REQUESTS))
			 ]]>
		</createView>
	</changeSet>
	
	<changeSet id="PSD#162966.4_post" author="aditya.a" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'int_disbursement_request_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="DE#166_pre" author="sivasai.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_fview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="DE#166" author="sivasai.p">
		<createView viewName="FINRECEIPTHEADER_FVIEW" replaceIfExists="true">
			<![CDATA[
				   SELECT T1.RECEIPTID,
						  T1.RECEIPTDATE,
						  T1.RECEIPTTYPE,
						  T1.ACTFINRECEIPT,
						  T1.RECAGAINST,
						  T1.REFERENCE,
						  T1.RECEIPTPURPOSE,
						  T1.RECEIPTMODE,
						  T1.EXCESSADJUSTTO,
						  T1.ALLOCATIONTYPE,
						  T1.RECEIPTAMOUNT,
						  T1.EFFECTSCHDMETHOD,
						  T1.RECEIPTMODESTATUS,
						  T1.SUBRECEIPTMODE,
						  T1.RECEIPTCHANNEL,
						  T1.RECEIVEDFROM,
						  T1.PANNUMBER,
						  T1.COLLECTIONAGENTID,
						  T1.VERSION,
						  T1.LASTMNTBY,
						  T1.LASTMNTON,
						  T1.RECORDSTATUS,
						  T1.ROLECODE,
						  T1.NEXTROLECODE,
						  T1.TASKID,
						  T1.NEXTTASKID,
						  T1.RECORDTYPE,
						  T1.WORKFLOWID,
						  T2.FINTYPE,
						  T2.FINBRANCH,
						  T3.CUSTCIF,
						  T3.CUSTSHRTNAME,
						  T2.FINCCY,
						  T1.REALIZATIONDATE,
						  T1.CANCELREASON,
						  T4.FINTYPEDESC,
						  T6.BRANCHDESC FINBRANCHDESC,
						  T5.CCYDESC FINCCYDESC,
						  T7.REJECTDESC CANCELREASONDESC,
						  COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
						  T2.SCHEDULEMETHOD,
						  T2.PROFITDAYSBASIS PFTDAYSBASIS,
						  T1.WAVIEDAMT,
						  COALESCE(T3.CUSTID, 0) CUSTID,
						  T1.TOTFEEAMOUNT,
						  T1.BOUNCEDATE,
						  T1.REMARKS,
						  T1.RCDMAINTAINSTS,
						  T1.DEPOSITPROCESS,
						  T1.DEPOSITBRANCH,
						  T1.LPIAMOUNT,
						  T1.LPPAMOUNT,
						  T1.GSTLPIAMOUNT,
						  T1.GSTLPPAMOUNT,
						  T1.GDRAVAILABLE,
						  T1.RELEASETYPE,
						  T1.THIRDPARTYNAME,
						  T1.THIRDPARTYMOBILENUM,
						  T2.PRODUCTCATEGORY,
						  T2.PROMOTIONCODE,
						  T1.CASHIERBRANCH,
						  T2.NEXTREPAYRVWDATE,
						  T1.INITIATEDATE,
						  T9.CODE COLLECTIONAGENTCODE,
						  T9.DESCRIPTION COLLECTIONAGENTDESC,
						  T1.MODULE,
						  T1.INSTRUCTIONUID,
						  T1.EXTREFERENCE,
						  T10.CUSTCIF CustomerCif,
						  T10.CustShrtName CustomerName,
						  T1.FINDIVISION,
						  T1.POSTBRANCH,
						  T11.DIVISIONCODEDesc FinDivisionDesc,
						  T12.BRANCHDESC PostBranchDesc,
						  T13.BRANCHDESC CashierBranchDesc,
						  T11.ENTITYCODE,
						  T3.CUSTBASECCY,
						  T1.REASONCODE,
						  T1.CANCELREMARKS,
						  T1.REFWAIVERAMT,        
						  T1.SOURCE,             
						  T1.VALUEDATE,           
						  T1.TRANSACTIONREF,      
						  T1.DEPOSITDATE,         
						  T1.PARTNERBANKID,       
						  T1.PRVRECEIPTPURPOSE,   
						  T1.RECEIPTSOURCE,       
						  T1.RECAPPDATE,          
						  T1.RECEIVEDDATE,
						  T1.KNOCKOFFTYPE,
						  T2.TDSAPPLICABLE FinTDSApplicable
						FROM FINRECEIPTHEADER_TEMP T1
						LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.REFERENCE = T2.FINREFERENCE
						LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
						LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
						LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
						LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
						LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
						LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
						LEFT JOIN Customers T10 ON CAST(T10.CustId AS VARCHAR(20)) = T1.REFERENCE
						LEFT JOIN SMTDIVISIONDETAIL T11 ON T1.FINDIVISION = T11.DIVISIONCODE
						LEFT JOIN RMTBranches T12 ON T1.PostBranch = T12.BranchCode
						LEFT JOIN RMTBranches T13 ON T1.CASHIERBRANCH = T13.BranchCode
						LEFT JOIN RMTCURRENCIES T14 ON T14.CCYCODE= T3.CustBaseCcy
			]]>
		</createView>
	</changeSet>

	<changeSet id="DE#166_post" author="sivasai.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finreceiptheader_fview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="DE#169_pre" author="sivasai.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'finfeerefundheader_view');
			]]>
		</sql>
	</changeSet>

	<changeSet id="DE#169" author="sivasai.p">
		<createView viewName="FinFeeRefundHeader_View" replaceIfExists="true">
		<![CDATA[
			 SELECT T1.HEADERID,
					T1.FINREFERENCE,
					T1.LINKEDTRANID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINTYPE,
					T2.FINBRANCH,
					T2.CUSTID,
					T2.FINCCY,
					T3.CUSTCIF LOVDESCCUSTCIF,
					T3.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
					T4.FINTYPEDESC,
					T5.BRANCHDESC,
					T2.TDSAPPLICABLE FINTDSAPPLICABLE
				FROM FINFEEREFUNDHEADER_TEMP T1
				LEFT JOIN FINANCEMAIN_VIEW T2 ON T2.FINREFERENCE =T1.FINREFERENCE
				LEFT JOIN CUSTOMERS T3 ON T3.CUSTID=T2.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T4.FINTYPE = T2.FINTYPE
				LEFT JOIN RMTBRANCHES T5 ON T2.FINBRANCH = T5.BRANCHCODE
				UNION ALL
					SELECT T1.HEADERID,
					T1.FINREFERENCE,
					T1.LINKEDTRANID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINTYPE,
					T2.FINBRANCH,
					T2.CUSTID,
					T2.FINCCY,
					T3.CUSTCIF LOVDESCCUSTCIF,
					T3.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
					T4.FINTYPEDESC,
					T5.BRANCHDESC,
					T2.TDSAPPLICABLE FINTDSAPPLICABLE
				FROM FINFEEREFUNDHEADER T1
				LEFT JOIN FINANCEMAIN_VIEW T2 ON T2.FINREFERENCE =T1.FINREFERENCE
				LEFT JOIN CUSTOMERS T3 ON T3.CUSTID=T2.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T4.FINTYPE = T2.FINTYPE
				LEFT JOIN RMTBRANCHES T5 ON T2.FINBRANCH = T5.BRANCHCODE
				WHERE NOT EXISTS(SELECT 1 FROM FINFEEREFUNDHEADER_TEMP WHERE HEADERID =T1.HEADERID)
			]]>
		</createView>
	</changeSet>

	<changeSet id="DE#169_post" author="sivasai.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'finfeerefundheader_view');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#171" author="satyanarayana.g">
		<sql>
		 	<![CDATA[
		 	    DELETE FROM SECGROUPRIGHTS WHERE RIGHTID IN (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_InstitutionLimits');
			    DELETE FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_InstitutionLimits';
			    
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_InstitutionLimits', 'MENU', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'REPORTS_CLLIMITS'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menu_Item_InstitutionLimits'), 1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		  	]]>
		</sql>
	</changeSet>

	<changeSet id="DE#169.1_pre" author="sivasai.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_save_and_drop_dependencies ('plf', 'financemain_lview');
			]]>
		</sql>
	</changeSet>

	<changeSet id="DE#169.1" author="sivasai.p">
		<comment>TDS APPLICABLE ADDED</comment>
		<createView viewName="FINANCEMAIN_LVIEW" replaceIfExists="true">
			<![CDATA[
			 	SELECT T1.FINREFERENCE,
				    T1.INVESTMENTREF,
				    T1.FINTYPE,
				    T1.FINCCY,
				    T1.FINAMOUNT,
				    T1.DOWNPAYMENT,
				    T1.FEECHARGEAMT,
				    T1.SCHEDULEMETHOD,
				    T1.NUMBEROFTERMS,
				    T1.RECORDSTATUS,
				    T1.RECORDTYPE,
				    T1.ROLECODE,
				    T1.NEXTROLECODE,
				    T1.FINBRANCH,
				    T1.FINCONTRACTDATE,
				    T1.LINKEDFINREF,
				    T1.NEXTUSERID,
				    T1.PRIORITY,
				    T1.WORKFLOWID,
				    T1.TASKID,
				    T1.NEXTTASKID,
				    T1.FINPREAPPROVEDREF,
				    T1.RCDMAINTAINSTS,
				    T1.INSURANCEAMT,
				    T1.FINCURRASSETVALUE,
				    T1.CALTERMS,
				    T1.DEVIATIONAPPROVAL,
				    T1.FINPURPOSE,
				    T1.INITIATEDATE,
				    T1.FINASSETVALUE,
				    T2.CUSTID,
				    T2.CUSTCIF LOVDESCCUSTCIF,
				    T2.CUSTSHRTNAME LOVDESCCUSTSHRTNAME,
				    T2.CUSTPASSPORTNO LOVDESCCUSTPASSPORTNO,
				    T2.CUSTDOB LOVDESCCUSTDOB,
				    T2.CUSTCRCPR LOVDESCCUSTCRCPR,
				    T2.PHONENUMBER,
				    T3.FINCATEGORY LOVDESCPRODUCTCODENAME,
				    T3.FINDIVISION LOVDESCFINDIVISION,
				    T3.PRODUCT LOVDESCFINPRODUCT,
				    T3.FINTYPEDESC LOVDESCFINTYPENAME,
				    COALESCE(T4.ROLEDESC, ${add.schema} FN_GET_ROLEDESC(T1.NEXTROLECODE)) LOVDESCREQUESTSTAGE,
				    T1.SAMPLINGREQUIRED,
				    T1.ADVANCEEMI,
				    T1.ADVEMITERMS,
				    T1.BPIPFTDAYSBASIS,
				    T1.GRACETERMS,
				    T1.PRODUCTCATEGORY,
				    T1.VERSION,
				    T1.TDSAPPLICABLE
			    FROM FINANCEMAIN_TEMP T1
			    JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
			    JOIN RMTFINANCETYPES T3 ON T3.FINTYPE = T1.FINTYPE
			    LEFT JOIN SECROLES T4 ON T1.NEXTROLECODE = T4.ROLECD
			]]>
		</createView>
	</changeSet>

	<changeSet id="DE#169.1_post" author="sivasai.p" dbms="postgresql">
		<sql>
			<![CDATA[
				select deps_restore_dependencies ('plf', 'financemain_lview');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#173" author="satyanarayana.g">
		<sql>
		 	<![CDATA[
		 	    DELETE FROM REPORTFILTERFIELDS WHERE REPORTID IN (SELECT REPORTID FROM REPORTCONFIGURATION WHERE MENUITEMCODE = 'menu_Item_UserRoles');
				DELETE FROM REPORTCONFIGURATION WHERE MENUITEMCODE = 'menu_Item_UserRoles';

				INSERT INTO REPORTCONFIGURATION (REPORTID, REPORTNAME, REPORTHEADING, PROMPTREQUIRED, REPORTJASPERNAME, DATASOURCENAME, SHOWTEMPLIBRARY, MENUITEMCODE, VERSION, LASTMNTBY, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, ALWMULTIFORMAT, WHERECONDITION, SCHEDULEREQ) VALUES ((SELECT MAX(REPORTID)+1 FROM REPORTCONFIGURATION), 'User Roles', 'User Roles', 1, 'UserRoles', 'dataSource', 1, 'menu_Item_UserRoles', 1, 1000, NULL, NULL, NULL, NULL, NULL, NULL, 0, current_timestamp, 0, 1, 0);
				INSERT INTO REPORTFILTERFIELDS (REPORTID, FIELDID, FIELDNAME, FIELDTYPE, FIELDLABEL, FIELDDBNAME, APPUTILMETHODNAME, MODULENAME, LOVHIDDENFIELDMETHOD, LOVTEXTFIELDMETHOD, MULTISELECTSEARCH, FIELDLENGTH, FIELDMAXVALUE, FIELDMINVALUE, SEQORDER, MANDATORY, FIELDCONSTRAINT, FIELDERRORMESSAGE, WHERECONDITION, STATICVALUE, FIELDWIDTH, FILTERREQUIRED, DEFAULTFILTER, VERSION, LASTMNTBY, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID, LASTMNTON, FILTERFILEDS) VALUES ((SELECT REPORTID FROM REPORTCONFIGURATION WHERE MENUITEMCODE = 'menu_Item_UserRoles'), 1, 'USER LOGIN', 'LOVSEARCH', 'USER LOGIN', 'usrlogin', '', 'SecurityUser', 'getUsrLogin', 'getUsrLogin', 1, 0, 0, 0, 1, 0, '', '', '', '', 250, 0, '=', 1, 1000, 'APPROVED', '', '', '', '', '', 0, CURRENT_TIMESTAMP, '');
		  	]]>
		</sql>
	</changeSet>
			
</databaseChangeLog>