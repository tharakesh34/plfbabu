<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

	<property name="add.schema" value="dbo." dbms="mssql" />
	<property name="add.schema" value="" dbms="oracle" />
	<property name="add.schema" value="" dbms="postgresql" />
	<property name="call.substr" value="substring" dbms="mssql" />
	<property name="call.substr" value="substr" dbms="oracle" />
	<property name="call.substr" value="substring" dbms="postgresql" />
	<property name="call.auditdb" value="PLFAVANSEQC.." dbms="mssql" />
	<property name="call.auditdb" value=" " dbms="oracle" />
	<property name="call.concatenate" value="+" dbms="mssql" />
	<property name="call.concatenate" value="||" dbms="oracle" />
	<property name="call.concatenate" value="||" dbms="postgresql" />
	<property name="call.collength" value="LEN" dbms="mssql" />
	<property name="call.collength" value="LENGTH" dbms="oracle" />
	<property name="call.collength" value="LENGTH" dbms="postgresql" />
	<property name="call.date" value="getdate()" dbms="mssql" />
	<property name="call.date" value="sysdate" dbms="oracle" />
	<property name="call.date" value="now()" dbms="postgresql" />


	 <changeSet id="pre_run_for_pgp" author="Jayant" runAlways="true"
		dbms="postgresql">
		<sql>
			Set search_path = plf,public,pg_catalog;
		</sql>
	</changeSet>
	
	<changeSet id = "1" author = "Siva">
		<comment> Profit Fraction setting based on Parameter </comment>
		<sql>
			Delete From SMTparameters where SYSPARMCODE = 'ROUND_ADJ_METHOD';
	
			INSERT INTO SMTparameters values('ROUND_ADJ_METHOD', 'Schedule Rounding Fraction Adjustment Method', 'String', 0, 'ADJ_NEXT_INST', 20, 0, NULL, NULL, 
				'Schedule Rounding Fraction Adjustment Method', 1, 1000, CURRENT_TIMESTAMP, 'Approved','','','','','',0);
		</sql>
	</changeSet>
	
	
	<changeSet id="01" author="Durgaprasad.g">
		<addColumn tableName="RMTFinanceTypes" >
			<column name="PartiallySecured" type="boolean" defaultValueBoolean="false"/>
		</addColumn>
	</changeSet>
	
	<changeSet id="02" author="Durgaprasad.g">
		<addColumn tableName="RMTFinanceTypes_temp" >
			<column name="PartiallySecured" type="boolean" defaultValueBoolean="false"/>
		</addColumn>
	</changeSet>
	
	<changeSet id="03" author="Durgaprasad.g">
		<createView viewName="rmtfinancetypes_view" replaceIfExists="true">
			 SELECT t1.fintype,
			    t1.fincategory,
			    t1.fintypedesc,
			    t1.finccy,
			    t1.findayscaltype,
			    t1.finactype,
			    t1.fincontingentactype,
			    t1.finisgenref,
			    t1.finmaxamount,
			    t1.finminamount,
			    t1.finisopennewfinac,
			    t1.findftstmtfrq,
			    t1.finisalwmd,
			    t1.finschdmthd,
			    t1.finisalwgrace,
			    t1.finhistretension,
			    t1.equalrepayment,
			    t1.finratetype,
			    t1.finbaserate,
			    t1.finsplrate,
			    t1.finintrate,
			    t1.finminrate,
			    t1.finmaxrate,
			    t1.findftintfrq,
			    t1.finisintcpz,
			    t1.fincpzfrq,
			    t1.finisrvwalw,
			    t1.finrvwfrq,
			    t1.fingrcratetype,
			    t1.fingrcbaserate,
			    t1.fingrcsplrate,
			    t1.fingrcintrate,
			    t1.fingrcminrate,
			    t1.fingrcmaxrate,
			    t1.fingrcdftintfrq,
			    t1.fingrcisintcpz,
			    t1.fingrccpzfrq,
			    t1.fingrcisrvwalw,
			    t1.fingrcrvwfrq,
			    t1.finminterm,
			    t1.finmaxterm,
			    t1.findftterms,
			    t1.finrpyfrq,
			    t1.finrepaymethod,
			    t1.finisalwpartialrpy,
			    t1.finisalwdifferment,
			    t1.finmaxdifferment,
			    t1.finisalwearlyrpy,
			    t1.finisalwearlysettle,
			    t1.finodrpytries,
			    t1.finearlypayrule,
			    t1.finearlysettlerule,
			    t1.findepositrestrictedto,
			    t1.finaebuyorinception,
			    t1.finaesellormaturity,
			    t1.finisactive,
			    t1.version,
			    t1.lastmntby,
			    t1.lastmnton,
			    t1.recordstatus,
			    t1.rolecode,
			    t1.nextrolecode,
			    t1.taskid,
			    t1.nexttaskid,
			    t1.recordtype,
			    t1.workflowid,
			    t1.stepfinance,
			    t1.steppingmandatory,
			    t1.alwmanualsteps,
			    t1.alwdsteppolicies,
			    t1.dftsteppolicy,
			    t4.actypedesc AS lovdescfincontingentactypename,
			    t5.actypedesc AS lovdescfinactypename,
			    t1.finisdwpayrequired,
			    t1.finrvwrateapplfor,
			    t1.finalwratechangeanydate,
			    t1.finisintcpzatgrcend,
			    t1.finelgrulecode,
			    t1.limitelgrulecode,
			    t1.finschcalcodeonrvw,
			    t1.alwplandeferment,
			    t1.plandefercount,
			    t1.finassettype,
			    t1.pftpayactype,
			    t1.finisopenpftpayacc,
			    t31.actypedesc AS lovdescpftpayactypename,
			    t1.finisalwgrcrepay,
			    t1.fingrcschdmthd,
			    t1.fingrcmargin,
			    t1.finmargin,
			    t1.finscheduleon,
			    t1.fingrcscheduleon,
			    t1.fincommitmentreq,
			    t1.fincollateralreq,
			    t1.findepreciationreq,
			    t1.findepreciationfrq,
			    t1.finbankcontingentactype,
			    t1.finprovisionactype,
			    t38.actypedesc AS lovdescfinbankcontactypename,
			    t39.actypedesc AS lovdescfinprovisionactypename,
			    t1.allowriainvestment,
			    t1.overridelimit,
			    t1.limitrequired,
			    t1.fincommitmentovrride,
			    t1.fincollateralovrride,
			    t1.finpftunchanged,
			    t1.applyodpenalty,
			    t1.odincgrcdays,
			    t1.odchargetype,
			    t1.odgracedays,
			    t1.odchargecalon,
			    t1.odchargeamtorperc,
			    t1.odallowwaiver,
			    t1.odmaxwaiverperc,
			    t1.findivision,
			    t48.divisioncodedesc AS lovdescfindivisionname,
			    t48.entitycode AS lovdescentitycode,
			    t1.finsuspactype,
			    t49.actypedesc AS lovdescfinsuspactypename,
			    t1.product,
			    t1.startdate,
			    t1.enddate,
			    t1.allowdownpaypgm,
			    t1.fintypedesc AS lovdescpromofintypedesc,
			    t1.remarks,
			    t1.alwearlypaymethods,
			    t1.pastduepftcalmthd,
			    t1.pastduepftmargin,
			    t1.alwadvancerent,
			    t1.grcadvbaserate,
			    t1.grcadvmargin,
			    t1.grcadvpftrate,
			    t1.rpyadvbaserate,
			    t1.rpyadvmargin,
			    t1.rpyadvpftrate,
			    t1.rolloverfinance,
			    t1.rolloverfrq,
			    t1.downpayrule,
			    t59.rulecode AS downpayruledesc,
			    t1.finsusptrigger,
			    t1.finsuspremarks,
			    t1.alwmultipartydisb,
			    t1.collateraltype,
			    t1.tdsapplicable,
			    t1.manualschedule,
			    t1.applygrcpricing,
			    t1.grcpricingmethod,
			    t1.applyrpypricing,
			    t1.rpypricingmethod,
			    t1.rpyhierarchy,
			    t67.rulecode AS grcpricingmethoddesc,
			    t68.rulecode AS rpypricingmethoddesc,
			    t1.droplineod,
			    t1.droppingmethod,
			    t1.ratechganyday,
			    t1.finrepaypftonfrq,
			    t1.alwbpi,
			    t1.bpitreatment,
			    t1.pftdueschon,
			    t1.planemihalw,
			    t1.planemihmethod,
			    t1.planemihmaxperyear,
			    t1.planemihmax,
			    t1.planemihlockperiod,
			    t1.planemicpz,
			    t1.unplanemihlockperiod,
			    t1.unplanemicpz,
			    t1.reagecpz,
			    t1.fddlockperiod,
			    t1.alwdrpymethods,
			    t1.maxunplannedemi,
			    t1.maxreageholidays,
			    t1.roundingmode,
			    t1.roundingtarget,
			    t1.frequencydays,
			    t1.quickdisb,
			    t1.alwmaxdisbcheckreq,
			    t1.alwreage,
			    t1.alwunplanemiholiday,
			    t1.profitcenterid,
			    t69.profitcentercode,
			    t69.profitcenterdesc,
			    t1.productcategory,
			    t2.productdesc AS fincategorydesc,
			    t1.developerfinance,
			    t1.costoffunds,
			    t1.chequecapturereq,
			    t1.finltvcheck,
			    t1.PartiallySecured
			   FROM rmtfinancetypes_temp t1
			     LEFT JOIN bmtproduct t2 ON t1.fincategory = t2.productcode
			     LEFT JOIN rmtaccounttypes t4 ON t1.fincontingentactype = t4.actype
			     LEFT JOIN rmtaccounttypes t38 ON t1.finbankcontingentactype = t38.actype
			     LEFT JOIN rmtaccounttypes t39 ON t1.finprovisionactype = t39.actype
			     LEFT JOIN rmtaccounttypes t5 ON t1.finactype = t5.actype
			     LEFT JOIN rmtaccounttypes t31 ON t1.pftpayactype = t31.actype
			     LEFT JOIN smtdivisiondetail t48 ON t1.findivision = t48.divisioncode
			     LEFT JOIN rmtaccounttypes t49 ON t1.finsuspactype = t49.actype
			     LEFT JOIN rules t59 ON t1.downpayrule = t59.ruleid
			     LEFT JOIN rules t67 ON t1.grcpricingmethod = t67.ruleid
			     LEFT JOIN rules t68 ON t1.rpypricingmethod = t68.ruleid
			     LEFT JOIN profitcenters t69 ON t69.profitcenterid = t1.profitcenterid
			UNION ALL
			 SELECT t1.fintype,
			    t1.fincategory,
			    t1.fintypedesc,
			    t1.finccy,
			    t1.findayscaltype,
			    t1.finactype,
			    t1.fincontingentactype,
			    t1.finisgenref,
			    t1.finmaxamount,
			    t1.finminamount,
			    t1.finisopennewfinac,
			    t1.findftstmtfrq,
			    t1.finisalwmd,
			    t1.finschdmthd,
			    t1.finisalwgrace,
			    t1.finhistretension,
			    t1.equalrepayment,
			    t1.finratetype,
			    t1.finbaserate,
			    t1.finsplrate,
			    t1.finintrate,
			    t1.finminrate,
			    t1.finmaxrate,
			    t1.findftintfrq,
			    t1.finisintcpz,
			    t1.fincpzfrq,
			    t1.finisrvwalw,
			    t1.finrvwfrq,
			    t1.fingrcratetype,
			    t1.fingrcbaserate,
			    t1.fingrcsplrate,
			    t1.fingrcintrate,
			    t1.fingrcminrate,
			    t1.fingrcmaxrate,
			    t1.fingrcdftintfrq,
			    t1.fingrcisintcpz,
			    t1.fingrccpzfrq,
			    t1.fingrcisrvwalw,
			    t1.fingrcrvwfrq,
			    t1.finminterm,
			    t1.finmaxterm,
			    t1.findftterms,
			    t1.finrpyfrq,
			    t1.finrepaymethod,
			    t1.finisalwpartialrpy,
			    t1.finisalwdifferment,
			    t1.finmaxdifferment,
			    t1.finisalwearlyrpy,
			    t1.finisalwearlysettle,
			    t1.finodrpytries,
			    t1.finearlypayrule,
			    t1.finearlysettlerule,
			    t1.findepositrestrictedto,
			    t1.finaebuyorinception,
			    t1.finaesellormaturity,
			    t1.finisactive,
			    t1.version,
			    t1.lastmntby,
			    t1.lastmnton,
			    t1.recordstatus,
			    t1.rolecode,
			    t1.nextrolecode,
			    t1.taskid,
			    t1.nexttaskid,
			    t1.recordtype,
			    t1.workflowid,
			    t1.stepfinance,
			    t1.steppingmandatory,
			    t1.alwmanualsteps,
			    t1.alwdsteppolicies,
			    t1.dftsteppolicy,
			    t4.actypedesc AS lovdescfincontingentactypename,
			    t5.actypedesc AS lovdescfinactypename,
			    t1.finisdwpayrequired,
			    t1.finrvwrateapplfor,
			    t1.finalwratechangeanydate,
			    t1.finisintcpzatgrcend,
			    t1.finelgrulecode,
			    t1.limitelgrulecode,
			    t1.finschcalcodeonrvw,
			    t1.alwplandeferment,
			    t1.plandefercount,
			    t1.finassettype,
			    t1.pftpayactype,
			    t1.finisopenpftpayacc,
			    t31.actypedesc AS lovdescpftpayactypename,
			    t1.finisalwgrcrepay,
			    t1.fingrcschdmthd,
			    t1.fingrcmargin,
			    t1.finmargin,
			    t1.finscheduleon,
			    t1.fingrcscheduleon,
			    t1.fincommitmentreq,
			    t1.fincollateralreq,
			    t1.findepreciationreq,
			    t1.findepreciationfrq,
			    t1.finbankcontingentactype,
			    t1.finprovisionactype,
			    t38.actypedesc AS lovdescfinbankcontactypename,
			    t39.actypedesc AS lovdescfinprovisionactypename,
			    t1.allowriainvestment,
			    t1.overridelimit,
			    t1.limitrequired,
			    t1.fincommitmentovrride,
			    t1.fincollateralovrride,
			    t1.finpftunchanged,
			    t1.applyodpenalty,
			    t1.odincgrcdays,
			    t1.odchargetype,
			    t1.odgracedays,
			    t1.odchargecalon,
			    t1.odchargeamtorperc,
			    t1.odallowwaiver,
			    t1.odmaxwaiverperc,
			    t1.findivision,
			    t48.divisioncodedesc AS lovdescfindivisionname,
			    t48.entitycode AS lovdescentitycode,
			    t1.finsuspactype,
			    t49.actypedesc AS lovdescfinsuspactypename,
			    t1.product,
			    t1.startdate,
			    t1.enddate,
			    t1.allowdownpaypgm,
			    t1.fintypedesc AS lovdescpromofintypedesc,
			    t1.remarks,
			    t1.alwearlypaymethods,
			    t1.pastduepftcalmthd,
			    t1.pastduepftmargin,
			    t1.alwadvancerent,
			    t1.grcadvbaserate,
			    t1.grcadvmargin,
			    t1.grcadvpftrate,
			    t1.rpyadvbaserate,
			    t1.rpyadvmargin,
			    t1.rpyadvpftrate,
			    t1.rolloverfinance,
			    t1.rolloverfrq,
			    t1.downpayrule,
			    t59.rulecode AS downpayruledesc,
			    t1.finsusptrigger,
			    t1.finsuspremarks,
			    t1.alwmultipartydisb,
			    t1.collateraltype,
			    t1.tdsapplicable,
			    t1.manualschedule,
			    t1.applygrcpricing,
			    t1.grcpricingmethod,
			    t1.applyrpypricing,
			    t1.rpypricingmethod,
			    t1.rpyhierarchy,
			    t67.rulecode AS grcpricingmethoddesc,
			    t68.rulecode AS rpypricingmethoddesc,
			    t1.droplineod,
			    t1.droppingmethod,
			    t1.ratechganyday,
			    t1.finrepaypftonfrq,
			    t1.alwbpi,
			    t1.bpitreatment,
			    t1.pftdueschon,
			    t1.planemihalw,
			    t1.planemihmethod,
			    t1.planemihmaxperyear,
			    t1.planemihmax,
			    t1.planemihlockperiod,
			    t1.planemicpz,
			    t1.unplanemihlockperiod,
			    t1.unplanemicpz,
			    t1.reagecpz,
			    t1.fddlockperiod,
			    t1.alwdrpymethods,
			    t1.maxunplannedemi,
			    t1.maxreageholidays,
			    t1.roundingmode,
			    t1.roundingtarget,
			    t1.frequencydays,
			    t1.quickdisb,
			    t1.alwmaxdisbcheckreq,
			    t1.alwreage,
			    t1.alwunplanemiholiday,
			    t1.profitcenterid,
			    t69.profitcentercode,
			    t69.profitcenterdesc,
			    t1.productcategory,
			    t2.productdesc AS fincategorydesc,
			    t1.developerfinance,
			    t1.costoffunds,
			    t1.chequecapturereq,
			    t1.finltvcheck,
			    t1.PartiallySecured
			   FROM rmtfinancetypes t1
			     LEFT JOIN bmtproduct t2 ON t1.fincategory = t2.productcode
			     LEFT JOIN rmtaccounttypes t4 ON t1.fincontingentactype = t4.actype
			     LEFT JOIN rmtaccounttypes t38 ON t1.finbankcontingentactype = t38.actype
			     LEFT JOIN rmtaccounttypes t39 ON t1.finprovisionactype = t39.actype
			     LEFT JOIN rmtaccounttypes t5 ON t1.finactype = t5.actype
			     LEFT JOIN rmtaccounttypes t31 ON t1.pftpayactype = t31.actype
			     LEFT JOIN smtdivisiondetail t48 ON t1.findivision = t48.divisioncode
			     LEFT JOIN rmtaccounttypes t49 ON t1.finsuspactype = t49.actype
			     LEFT JOIN rules t59 ON t1.downpayrule = t59.ruleid
			     LEFT JOIN rules t67 ON t1.grcpricingmethod = t67.ruleid
			     LEFT JOIN rules t68 ON t1.rpypricingmethod = t68.ruleid
			     LEFT JOIN profitcenters t69 ON t69.profitcenterid = t1.profitcenterid
			  WHERE NOT (EXISTS ( SELECT 1 AS expr1
			           FROM rmtfinancetypes_temp
			          WHERE rmtfinancetypes_temp.fintype = t1.fintype))
		</createView>
	</changeSet>
	
	<changeSet id="04" author="Durgaprasad.g">
		<createView viewName="rmtfinancetypes_aview" replaceIfExists="true">
			 SELECT t1.fintype,
			    t1.fincategory,
			    t1.fintypedesc,
			    t1.finccy,
			    t1.findayscaltype,
			    t1.finactype,
			    t1.fincontingentactype,
			    t1.finisgenref,
			    t1.finmaxamount,
			    t1.finminamount,
			    t1.finisopennewfinac,
			    t1.findftstmtfrq,
			    t1.finisalwmd,
			    t1.finschdmthd,
			    t1.finisalwgrace,
			    t1.finhistretension,
			    t1.equalrepayment,
			    t1.finratetype,
			    t1.finbaserate,
			    t1.finsplrate,
			    t1.finintrate,
			    t1.finminrate,
			    t1.finmaxrate,
			    t1.findftintfrq,
			    t1.finisintcpz,
			    t1.fincpzfrq,
			    t1.finisrvwalw,
			    t1.finrvwfrq,
			    t1.fingrcratetype,
			    t1.fingrcbaserate,
			    t1.fingrcsplrate,
			    t1.fingrcintrate,
			    t1.fingrcminrate,
			    t1.fingrcmaxrate,
			    t1.fingrcdftintfrq,
			    t1.fingrcisintcpz,
			    t1.fingrccpzfrq,
			    t1.fingrcisrvwalw,
			    t1.fingrcrvwfrq,
			    t1.finminterm,
			    t1.finmaxterm,
			    t1.findftterms,
			    t1.finrpyfrq,
			    t1.finrepaymethod,
			    t1.finisalwpartialrpy,
			    t1.finisalwdifferment,
			    t1.finmaxdifferment,
			    t1.finisalwearlyrpy,
			    t1.finisalwearlysettle,
			    t1.finodrpytries,
			    t1.finearlypayrule,
			    t1.finearlysettlerule,
			    t1.findepositrestrictedto,
			    t1.finaebuyorinception,
			    t1.finaesellormaturity,
			    t1.finisactive,
			    t1.version,
			    t1.lastmntby,
			    t1.lastmnton,
			    t1.recordstatus,
			    t1.rolecode,
			    t1.nextrolecode,
			    t1.taskid,
			    t1.nexttaskid,
			    t1.recordtype,
			    t1.workflowid,
			    t1.stepfinance,
			    t1.steppingmandatory,
			    t1.alwmanualsteps,
			    t1.alwdsteppolicies,
			    t1.dftsteppolicy,
			    t4.actypedesc AS lovdescfincontingentactypename,
			    t5.actypedesc AS lovdescfinactypename,
			    t1.finisdwpayrequired,
			    t1.finrvwrateapplfor,
			    t1.finalwratechangeanydate,
			    t1.finisintcpzatgrcend,
			    t1.finelgrulecode,
			    t1.limitelgrulecode,
			    t1.finschcalcodeonrvw,
			    t1.alwplandeferment,
			    t1.plandefercount,
			    t1.finassettype,
			    t1.pftpayactype,
			    t1.finisopenpftpayacc,
			    t31.actypedesc AS lovdescpftpayactypename,
			    t1.finisalwgrcrepay,
			    t1.fingrcschdmthd,
			    t1.fingrcmargin,
			    t1.finmargin,
			    t1.finscheduleon,
			    t1.fingrcscheduleon,
			    t1.fincommitmentreq,
			    t1.fincollateralreq,
			    t1.findepreciationreq,
			    t1.findepreciationfrq,
			    t1.finbankcontingentactype,
			    t1.finprovisionactype,
			    t38.actypedesc AS lovdescfinbankcontactypename,
			    t39.actypedesc AS lovdescfinprovisionactypename,
			    t1.allowriainvestment,
			    t1.overridelimit,
			    t1.limitrequired,
			    t1.fincommitmentovrride,
			    t1.fincollateralovrride,
			    t1.finpftunchanged,
			    t1.applyodpenalty,
			    t1.odincgrcdays,
			    t1.odchargetype,
			    t1.odgracedays,
			    t1.odchargecalon,
			    t1.odchargeamtorperc,
			    t1.odallowwaiver,
			    t1.odmaxwaiverperc,
			    t1.findivision,
			    t48.divisioncodedesc AS lovdescfindivisionname,
			    t48.entitycode AS lovdescentitycode,
			    t1.finsuspactype,
			    t49.actypedesc AS lovdescfinsuspactypename,
			    t1.product,
			    t1.startdate,
			    t1.enddate,
			    t1.allowdownpaypgm,
			    t1.remarks,
			    t1.alwearlypaymethods,
			    t1.pastduepftcalmthd,
			    t1.pastduepftmargin,
			    t1.alwadvancerent,
			    t1.grcadvbaserate,
			    t1.grcadvmargin,
			    t1.grcadvpftrate,
			    t1.rpyadvbaserate,
			    t1.rpyadvmargin,
			    t1.rpyadvpftrate,
			    t1.rolloverfinance,
			    t1.rolloverfrq,
			    t1.downpayrule,
			    t59.rulecode AS downpayruledesc,
			    t1.finsusptrigger,
			    t1.finsuspremarks,
			    t1.alwmultipartydisb,
			    t1.collateraltype,
			    t1.tdsapplicable,
			    t1.manualschedule,
			    t1.applygrcpricing,
			    t1.grcpricingmethod,
			    t1.applyrpypricing,
			    t1.rpypricingmethod,
			    t1.rpyhierarchy,
			    t67.rulecode AS grcpricingmethoddesc,
			    t68.rulecode AS rpypricingmethoddesc,
			    t1.droplineod,
			    t1.droppingmethod,
			    t1.ratechganyday,
			    t1.finrepaypftonfrq,
			    t1.alwbpi,
			    t1.bpitreatment,
			    t1.pftdueschon,
			    t1.planemihalw,
			    t1.planemihmethod,
			    t1.planemihmaxperyear,
			    t1.planemihmax,
			    t1.planemihlockperiod,
			    t1.planemicpz,
			    t1.unplanemihlockperiod,
			    t1.unplanemicpz,
			    t1.reagecpz,
			    t1.fddlockperiod,
			    t1.alwdrpymethods,
			    t1.maxunplannedemi,
			    t1.maxreageholidays,
			    t1.roundingmode,
			    t1.roundingtarget,
			    t1.frequencydays,
			    t1.quickdisb,
			    t1.alwreage,
			    t1.alwunplanemiholiday,
			    t1.alwmaxdisbcheckreq,
			    t1.fintypedesc AS lovdescpromofintypedesc,
			    t1.profitcenterid,
			    t69.profitcentercode,
			    t69.profitcenterdesc,
			    t1.productcategory,
			    t2.productdesc AS fincategorydesc,
			    t1.developerfinance,
			    t1.costoffunds,
			    t1.chequecapturereq,
			    t1.finltvcheck,
			    t1.PartiallySecured
			   FROM rmtfinancetypes t1
			     LEFT JOIN bmtproduct t2 ON t1.fincategory = t2.productcode
			     LEFT JOIN rmtaccounttypes t4 ON t1.fincontingentactype = t4.actype
			     LEFT JOIN rmtaccounttypes t38 ON t1.finbankcontingentactype = t38.actype
			     LEFT JOIN rmtaccounttypes t39 ON t1.finprovisionactype = t39.actype
			     LEFT JOIN rmtaccounttypes t5 ON t1.finactype = t5.actype
			     LEFT JOIN rmtaccounttypes t31 ON t1.pftpayactype = t31.actype
			     LEFT JOIN smtdivisiondetail t48 ON t1.findivision = t48.divisioncode
			     LEFT JOIN rmtaccounttypes t49 ON t1.finsuspactype = t49.actype
			     LEFT JOIN rules t59 ON t1.downpayrule = t59.ruleid
			     LEFT JOIN rules t67 ON t1.grcpricingmethod = t67.ruleid
			     LEFT JOIN rules t68 ON t1.rpypricingmethod = t68.ruleid
			     LEFT JOIN profitcenters t69 ON t69.profitcenterid = t1.profitcenterid
		</createView>
	</changeSet>
	
	<changeSet id="05" author="Durgaprasad g">
		<createView viewName="rmtfinancetypes_aeview" replaceIfExists="true">
			 SELECT t1.fintype,
			    '' AS findeffreq,
			    t1.finactype,
			    t1.finccy,
			    t1.finisopennewfinac,
			    t1.pftpayactype,
			    t1.finisopenpftpayacc,
			    t1.fincontingentactype,
			    t1.finprovisionactype,
			    t1.finsuspactype,
			    t1.fincategory,
			    t1.developerfinance,
			    t1.PartiallySecured
			   FROM rmtfinancetypes t1
		</createView>
	</changeSet>
	
	<changeSet id="06" author="Durgaprasad g">
		<createView viewName="rmtfinancetypes_orgview" replaceIfExists="true">
			 SELECT t1.fintype,
			    t1.fincategory,
			    t1.fintypedesc,
			    t1.finccy,
			    t1.findayscaltype,
			    t1.finactype,
			    t1.fincontingentactype,
			    t1.finisgenref,
			    t1.finmaxamount,
			    t1.finminamount,
			    t1.finisopennewfinac,
			    t1.finisalwmd,
			    t1.finschdmthd,
			    t1.finisalwgrace,
			    t1.equalrepayment,
			    t1.finratetype,
			    t1.finbaserate,
			    t1.finsplrate,
			    t1.finintrate,
			    t1.finminrate,
			    t1.finmaxrate,
			    t1.findftintfrq,
			    t1.finisintcpz,
			    t1.fincpzfrq,
			    t1.finisrvwalw,
			    t1.finrvwfrq,
			    t1.fingrcratetype,
			    t1.fingrcbaserate,
			    t1.fingrcsplrate,
			    t1.fingrcintrate,
			    t1.fingrcminrate,
			    t1.fingrcmaxrate,
			    t1.fingrcdftintfrq,
			    t1.fingrcisintcpz,
			    t1.fingrccpzfrq,
			    t1.fingrcisrvwalw,
			    t1.fingrcrvwfrq,
			    t1.finminterm,
			    t1.finmaxterm,
			    t1.findftterms,
			    t1.finrpyfrq,
			    t1.finrepaymethod,
			    t1.finisalwdifferment,
			    t1.finmaxdifferment,
			    t1.finisactive,
			    t1.stepfinance,
			    t1.steppingmandatory,
			    t1.alwmanualsteps,
			    t1.alwdsteppolicies,
			    t1.dftsteppolicy,
			    t1.finisdwpayrequired,
			    t1.finrvwrateapplfor,
			    t1.finalwratechangeanydate,
			    t1.finisintcpzatgrcend,
			    t1.finschcalcodeonrvw,
			    t1.alwplandeferment,
			    t1.plandefercount,
			    t1.pftpayactype,
			    t1.finisopenpftpayacc,
			    t1.finisalwgrcrepay,
			    t1.fingrcschdmthd,
			    t1.fingrcmargin,
			    t1.finmargin,
			    t1.fincommitmentreq,
			    t1.fincollateralreq,
			    t1.findepreciationreq,
			    t1.findepreciationfrq,
			    t1.finbankcontingentactype,
			    t1.finprovisionactype,
			    t1.allowriainvestment,
			    t1.overridelimit,
			    t1.limitrequired,
			    t1.fincommitmentovrride,
			    t1.fincollateralovrride,
			    t1.finrepaypftonfrq,
			    t1.finpftunchanged,
			    t1.applyodpenalty,
			    t1.odincgrcdays,
			    t1.odchargetype,
			    t1.odgracedays,
			    t1.odchargecalon,
			    t1.odchargeamtorperc,
			    t1.odallowwaiver,
			    t1.odmaxwaiverperc,
			    t1.findivision,
			    t3.divisioncodedesc AS lovdescfindivisionname,
			    t1.finsuspactype,
			    t1.product,
			    t1.startdate,
			    t1.enddate,
			    t1.allowdownpaypgm,
			    t1.fintypedesc AS lovdescpromofintypedesc,
			    t1.remarks,
			    t4.policydesc AS lovdescdftsteppolicyname,
			    t1.pastduepftcalmthd,
			    t1.pastduepftmargin,
			    t1.alwadvancerent,
			    t1.grcadvbaserate,
			    t1.grcadvmargin,
			    t1.grcadvpftrate,
			    t1.rpyadvbaserate,
			    t1.rpyadvmargin,
			    t1.rpyadvpftrate,
			    t1.rolloverfinance,
			    t1.rolloverfrq,
			    t1.downpayrule,
			    t1.alwmultipartydisb,
			    t1.collateraltype,
			    t1.tdsapplicable,
			    t5.rulecode AS downpayruledesc,
			    t1.applygrcpricing,
			    t1.applyrpypricing,
			    t6.rulecode AS grcpricingmethoddesc,
			    t7.rulecode AS rpypricingmethoddesc,
			    t1.droplineod,
			    t1.droppingmethod,
			    t1.ratechganyday,
			    t4.steptype AS dftsteppolicytype,
			    t1.manualschedule,
			    t1.alwbpi,
			    t1.bpitreatment,
			    t1.pftdueschon,
			    t1.planemihalw,
			    t1.planemihmethod,
			    t1.planemihmaxperyear,
			    t1.planemihmax,
			    t1.planemihlockperiod,
			    t1.planemicpz,
			    t1.unplanemihlockperiod,
			    t1.unplanemicpz,
			    t1.reagecpz,
			    t1.fddlockperiod,
			    t1.alwdrpymethods,
			    t1.maxunplannedemi,
			    t1.maxreageholidays,
			    t1.roundingmode,
			    t1.roundingtarget,
			    t1.frequencydays,
			    t1.quickdisb,
			    t1.alwreage,
			    t1.alwunplanemiholiday,
			    t1.alwmaxdisbcheckreq,
			    t1.productcategory,
			    t1.rpyhierarchy,
			    t1.developerfinance,
			    t3.entitycode AS lovdescentitycode,
			    t8.entitydesc AS lovdescentitydesc,
			    t1.costoffunds,
			    t1.chequecapturereq,
			    t1.finltvcheck,
			    t1.PartiallySecured
			   FROM rmtfinancetypes t1
			     JOIN smtdivisiondetail t3 ON t1.findivision = t3.divisioncode
			     LEFT JOIN steppolicyheader t4 ON t1.dftsteppolicy = t4.policycode
			     LEFT JOIN rules t5 ON t1.downpayrule = t5.ruleid
			     LEFT JOIN rules t6 ON t1.grcpricingmethod = t6.ruleid
			     LEFT JOIN rules t7 ON t1.rpypricingmethod = t7.ruleid
			     LEFT JOIN entity t8 ON t3.entitycode = t8.entitycode
		</createView>
	</changeSet>
	
	<changeSet id="07" author="Durgaprasad.g">
		<sql>
			Update financechecklistref set recordtype = Null;
			Update financechecklistref_temp set recordtype = Null;
		</sql>
	</changeSet>

<changeSet id = "8" author = "Ganesh.p">
	<comment>Security operations added for PostingsDownload</comment>
	<sql>
	DELETE FROM SecOperationRoles Where OprId=(Select OprId  From SecOperations Where OprCode='OPERATION_POSTINGS_DOWNLOAD') AND RoleID=(Select  RoleID  From SecRoles Where RoleCd='Postings_download');
	DELETE FROM SecRoleGroups Where GrpId=(Select GrpId  From SecGroups Where GrpCode='Postings_Download') AND RoleID=(Select  RoleID  From SecRoles Where RoleCd='Postings_download');
	DELETE FROM SECGROUPRIGHTS Where GRPID=(SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='Postings_Download') AND RIGHTID=(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='menu_Item_PostingsDownload');

	DELETE FROM SECRIGHTS  WHERE RIGHTNAME='menu_Item_PostingsDownload';
	DELETE FROM SECGROUPS Where GRPCODE='Postings_Download';
	DELETE FROM SECROLES Where RoleCd='Postings_download';
	DELETE FROM SECOPERATIONS Where OprCode='OPERATION_POSTINGS_DOWNLOAD';		

	Insert into SecRights(RightID,RightType,RightName,Page,Version,LastMntBy,LastMntOn,RecordStatus,RoleCode,NextRoleCode,TaskId,NextTaskId,RecordType,WorkflowId) Values
	((Select MAX(RightID)+1 From SecRights), 0, 'menu_Item_PostingsDownload', 'MENU', 1, 1000, Current_Timestamp, 'Approved',' ',' ',' ',' ',' ',0);

	Insert Into secGroups(GrpID,GrpCode,GrpDesc,Version,LastMntBy,LastMntOn,RecordStatus,RoleCode,NextRoleCode,TaskId,NextTaskId,RecordType,WorkflowId) values
	((Select MAX(GrpID)+1 From secGroups),'Postings_Download','Postings Download.',0,1000,Current_Timestamp,'Approved','','','','','',0);

	INSERT INTO SecRoles (RoleID,RoleApp,RoleCd,RoleDesc,RoleCategory,Version,LastMntBy,LastMntOn,RecordStatus,RoleCode,NextRoleCode,TaskId,NextTaskId,RecordType,WorkflowId) VALUES
	((select MAX(RoleID)+1 from SecRoles),1,'Postings_download','Postings file download.','BulkProcessing',1,1000,CURRENT_TIMESTAMP,'Approved',' ',' ',' ',' ',' ',0);

	INSERT INTO SecOperations (OprID,OprCode,OprDesc,Version,LastMntBy,LastMntOn,RecordStatus,RoleCode,NextRoleCode,TaskId,NextTaskId,RecordType,WorkflowId) VALUES 
	((select MAX(OprID)+1 from SecOperations),'OPERATION_POSTINGS_DOWNLOAD','Postings Download',1,1000,CURRENT_TIMESTAMP,'Approved',' ',' ',' ',' ',' ',0);
	
	INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='Postings_Download') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='menu_Item_PostingsDownload'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
	INSERT INTO SECROLEGROUPS values((Select MAX(RoleGrpID)+1 From SecRoleGroups),(Select GrpId  From SecGroups Where GrpCode='Postings_Download'), (Select  RoleID  From SecRoles Where RoleCd='Postings_download'),0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
	INSERT INTO SECOPERATIONROLES values((Select MAX(OprRoleID)+1 From SecOperationRoles),(Select OprId  From SecOperations Where OprCode='OPERATION_POSTINGS_DOWNLOAD'), (Select  RoleID  From SecRoles Where RoleCd='Postings_download'),0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
	
	
	UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS);
	UPDATE SEQSECGROUPS SET SEQNO= (SELECT MAX(GRPID) FROM SECGROUPS);
	UPDATE SEQSECROLES SET SEQNO= (SELECT MAX(ROLEID) FROM SECROLES);
	UPDATE SEQSECOPERATIONS SET SEQNO= (SELECT MAX(OPRID) FROM SECOPERATIONS);
				
	UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);
	UPDATE SEQSECROLEGROUPS SET SEQNO= (SELECT MAX(ROLEGRPID) FROM SECROLEGROUPS);
	UPDATE SEQSECOPERATIONROLES SET SEQNO= (SELECT MAX(OPRROLEID) FROM SECOPERATIONROLES);
		</sql>
</changeSet>

<changeSet id = "9" author = "Ganesh.p">
	<comment>Security operations added for External Upload</comment>
	<sql>
	DELETE FROM SecOperationRoles Where OprId=(Select OprId  From SecOperations Where OprCode='OPERATION_EXTERNAL_UPLOAD') AND RoleID=(Select  RoleID  From SecRoles Where RoleCd='External_Upload');
	DELETE FROM SecRoleGroups Where GrpId=(Select GrpId  From SecGroups Where GrpCode='External_Upload') AND RoleID=(Select  RoleID  From SecRoles Where RoleCd='External_Upload');
	DELETE FROM SECGROUPRIGHTS Where GRPID=(SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='External_Upload') AND RIGHTID=(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='menu_Item_ExternalUpload');

	DELETE FROM SECRIGHTS  WHERE RIGHTNAME='menu_Item_ExternalUpload';
	DELETE FROM SECGROUPS Where GRPCODE='External_Upload';
	DELETE FROM SECROLES Where RoleCd='External_Upload';
	DELETE FROM SECOPERATIONS Where OprCode='OPERATION_EXTERNAL_UPLOAD';
	
	Insert into SecRights(RightID,RightType,RightName,Page,Version,LastMntBy,LastMntOn,RecordStatus,RoleCode,NextRoleCode,TaskId,NextTaskId,RecordType,WorkflowId) Values
	((Select MAX(RightID)+1 From SecRights), 0, 'menu_Item_ExternalUpload', 'MENU', 1, 1000, Current_Timestamp, 'Approved',' ',' ',' ',' ',' ',0);

	Insert Into secGroups(GrpID,GrpCode,GrpDesc,Version,LastMntBy,LastMntOn,RecordStatus,RoleCode,NextRoleCode,TaskId,NextTaskId,RecordType,WorkflowId) values
	((Select MAX(GrpID)+1 From secGroups),'External_Upload','External Uploads.',0,1000,Current_Timestamp,'Approved','','','','','',0);

	INSERT INTO SecRoles (RoleID,RoleApp,RoleCd,RoleDesc,RoleCategory,Version,LastMntBy,LastMntOn,RecordStatus,RoleCode,NextRoleCode,TaskId,NextTaskId,RecordType,WorkflowId) VALUES
	((select MAX(RoleID)+1 from SecRoles),1,'External_Upload','External uploads.','BulkProcessing',1,1000,CURRENT_TIMESTAMP,'Approved',' ',' ',' ',' ',' ',0);

	INSERT INTO SecOperations (OprID,OprCode,OprDesc,Version,LastMntBy,LastMntOn,RecordStatus,RoleCode,NextRoleCode,TaskId,NextTaskId,RecordType,WorkflowId) VALUES 
	((select MAX(OprID)+1 from SecOperations),'OPERATION_EXTERNAL_UPLOAD','External Upload',1,1000,CURRENT_TIMESTAMP,'Approved',' ',' ',' ',' ',' ',0);
	
	INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='External_Upload') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='menu_Item_ExternalUpload'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
	INSERT INTO SecRoleGroups values((Select MAX(RoleGrpID)+1 From SecRoleGroups),(Select GrpId  From SecGroups Where GrpCode='External_Upload'), (Select  RoleID  From SecRoles Where RoleCd='External_Upload'),0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
	INSERT INTO SecOperationRoles values((Select MAX(OprRoleID)+1 From SecOperationRoles),(Select OprId  From SecOperations Where OprCode='OPERATION_EXTERNAL_UPLOAD'), (Select  RoleID  From SecRoles Where RoleCd='External_Upload'),0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
	
		
	UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS);
	UPDATE SEQSECGROUPS SET SEQNO= (SELECT MAX(GRPID) FROM SECGROUPS);
	UPDATE SEQSECROLES SET SEQNO= (SELECT MAX(ROLEID) FROM SECROLES);
	UPDATE SEQSECOPERATIONS SET SEQNO= (SELECT MAX(OPRID) FROM SECOPERATIONS);
				
	UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);
	UPDATE SEQSECROLEGROUPS SET SEQNO= (SELECT MAX(ROLEGRPID) FROM SECROLEGROUPS);
	UPDATE SEQSECOPERATIONROLES SET SEQNO= (SELECT MAX(OPRROLEID) FROM SECOPERATIONROLES);
	</sql>
</changeSet>
	<changeSet id="10" author="vijaykumar.l">
		<sql>
			update ExtendedFieldHeader set modulename = 'ASSETTYPE' where modulename ='AssetType';
    		update ExtendedFieldHeader_temp set modulename = 'ASSETTYPE' where modulename ='AssetType';
		</sql>
	</changeSet>	
	
	<changeSet id="11" author="Vinay">
		<sql>
			update financemain set eligibilitymethod=(select fieldcodeid from rmtlovfielddetail t2 where financemain.eligibilitymethod = t2.fieldcodevalue);
			update financemain_temp set eligibilitymethod=(select fieldcodeid from rmtlovfielddetail t2 where financemain_temp.eligibilitymethod = t2.fieldcodevalue);
		</sql>
	</changeSet>
	
	<changeSet id="12" author="Vinay">
		<sql>
			update financemain set eligibilitymethod=0 where eligibilitymethod is null;
			update financemain_temp set eligibilitymethod=0 where eligibilitymethod is null;
		</sql>
	</changeSet>
	
	<changeSet id="14" author="Vinay">
		<dropDefaultValue tableName="FinanceMain" columnName="EligibilityMethod"/>
		<dropDefaultValue tableName="FinanceMain_Temp" columnName="EligibilityMethod"/>
	</changeSet>
	
	<changeSet id="15.0" author="Vinay" dbms="postgresql">
		<sql>
			alter table FinanceMain alter column EligibilityMethod drop default;
			alter table FinanceMain_Temp alter column EligibilityMethod drop default;
		</sql>
	</changeSet>
	
	<changeSet id="15" author="Vinay">
		<modifyDataType tableName="FinanceMain" columnName="EligibilityMethod" newDataType="bigint"/>
		<modifyDataType tableName="FinanceMain_Temp" columnName="EligibilityMethod" newDataType="bigint"/>
	</changeSet>
	
	<changeSet id="16" author="Vinay">
		<createView viewName="financemain_aview" replaceIfExists="true">
			SELECT t1.finreference,
			    t1.numberofterms,
			    t1.grcperiodenddate,
			    t1.allowgrcperiod,
			    t1.gracebaserate,
			    t1.gracespecialrate,
			    t1.grcpftrate,
			    t1.grcpftfrq,
			    t1.nextgrcpftdate,
			    t1.allowgrcpftrvw,
			    t1.grcpftrvwfrq,
			    t1.nextgrcpftrvwdate,
			    t1.allowgrccpz,
			    t1.grccpzfrq,
			    t1.nextgrccpzdate,
			    t1.repaybaserate,
			    t1.repayspecialrate,
			    t1.repayprofitrate,
			    t1.repayfrq,
			    t1.nextrepaydate,
			    t1.repaypftfrq,
			    t1.nextrepaypftdate,
			    t1.allowrepayrvw,
			    t1.repayrvwfrq,
			    t1.nextrepayrvwdate,
			    t1.allowrepaycpz,
			    t1.repaycpzfrq,
			    t1.nextrepaycpzdate,
			    t1.maturitydate,
			    t1.cpzatgraceend,
			    t1.downpayment,
			    t1.graceflatamount,
			    t1.reqrepayamount,
			    t1.totalprofit,
			    t1.totalcpz,
			    t1.totalgrosspft,
			    t1.totalgrossgrcpft,
			    t1.totalgracepft,
			    t1.totalgracecpz,
			    t1.grcratebasis,
			    t1.repayratebasis,
			    t1.fintype,
			    t1.finremarks,
			    t1.finccy,
			    t1.schedulemethod,
			    t1.profitdaysbasis,
			    t1.reqmaturity,
			    t1.calterms,
			    t1.calmaturity,
			    t1.firstrepay,
			    t1.lastrepay,
			    t1.finstartdate,
			    t1.finamount,
			    t1.finamount + t1.feechargeamt - t1.downpayment AS lovdescfinancingamount,
			    t1.finrepaymentamount,
			    t1.custid,
			    t1.defferments,
			    t1.plandefercount,
			    t1.finbranch,
			    t1.finsourceid,
			    t1.alloweddefrpychange,
			    t1.availeddefrpychange,
			    t1.alloweddeffrqchange,
			    t1.availeddeffrqchange,
			    t1.recaltype,
			    t1.finassetvalue,
			    t1.disbaccountid,
			    t1.repayaccountid,
			    t1.finisactive,
			    t1.limitvalid,
			    t1.overridelimit,
			    t1.securitydeposit,
			    t1.version,
			    t1.lastmntby,
			    t1.lastmnton,
			    t1.recordstatus,
			    t1.rolecode,
			    t1.nextrolecode,
			    t1.taskid,
			    t1.nexttaskid,
			    t1.recordtype,
			    t1.workflowid,
			    t7.fintypedesc AS lovdescfintypename,
			    t7.finmaxamount AS lovdescfinmaxamt,
			    t7.finminamount AS lovdescfinminamount,
			    t1.mindownpayperc,
			    t7.finisalwdifferment AS lovdescfinalwdeferment,
			    t7.finisdwpayrequired AS lovdescdwnpayreq,
			    t7.finmaxdifferment AS lovdescfinmaxdifferment,
			    t12.branchdesc AS lovdescfinbranchname,
			    t1.lastrepaydate,
			    t1.lastrepaypftdate,
			    t1.lastrepayrvwdate,
			    t1.lastrepaycpzdate,
			    t1.allowgrcrepay,
			    t1.grcschdmthd,
			    t1.grcmargin,
			    t1.repaymargin,
			    t1.fincurrassetvalue,
			    t1.fincommitmentref,
			    t1.finlimitref,
			    t1.depreciationfrq,
			    t1.fincontractdate,
			    t1.nextdepdate,
			    t1.lastdepdate,
			    t1.finaccount,
			    t1.fincustpftaccount,
			    t17.acrtilllbd AS lovdescaccruedtilllbd,
			    t7.finrvwrateapplfor,
			    t1.totalrepayamt,
			    t1.closingstatus,
			    t1.finapproveddate,
			    t1.feechargeamt,
			    t1.blacklisted,
			    t1.finrepaypftonfrq,
			    t1.anualizedpercrate,
			    t1.effectiverateofreturn,
			    t1.migratedfinance,
			    t1.schedulemaintained,
			    t1.scheduleregenerated,
			    t1.finpurpose,
			    t39.loanpurposedesc as lovdescfinpurposename,
			    t1.finstatus,
			    t1.finstsreason,
			    t1.initiateuser,
			    t1.bankname,
			    t1.iban,
			    t1.accounttype,
			    t1.ddareferenceno,
			    t7.finscheduleon AS lovdescfinscheduleon,
			    t1.custdsr,
			    t1.jointaccount,
			    t1.jointcustid,
			    t1.downpaybank,
			    t1.downpaysupl,
			    t1.downpayaccount,
			    t1.securitycollateral,
			    t1.approved,
			    t1.discrepancy,
			    t1.limitapproved,
			    t1.investmentref,
			    t1.graceterms,
			    t7.findivision AS lovdescfindivision,
			    t1.rcdmaintainsts,
			    t1.finrepaymethod,
			    t1.grcprofitdaysbasis,
			    t1.stepfinance,
			    t1.steptype,
			    t1.steppolicy,
			    t1.alwmanualsteps,
			    t1.noofsteps,
			    t1.linkedfinref,
			    t1.nextuserid,
			    t1.priority,
			    t24.policydesc AS lovdescsteppolicyname,
			    t1.grcminrate,
			    t1.grcmaxrate,
			    t1.rpyminrate,
			    t1.rpymaxrate,
			    t1.deviationapproval,
			    t1.manualschedule,
			    t1.takeoverfinance,
			    t1.grcadvbaserate,
			    t1.grcadvmargin,
			    t1.grcadvpftrate,
			    t1.rpyadvbaserate,
			    t1.rpyadvmargin,
			    t1.rpyadvpftrate,
			    t1.supplementrent,
			    t1.increasedcost,
			    t1.rolloverfrq,
			    t1.nextrolloverdate,
			    t27.custstsdescription,
			    t1.shariastatus,
			    t1.initiatedate,
			    t1.finpreapprovedref,
			    t1.mmaid,
			    t1.accountsofficer,
			    t1.feeaccountid,
			    t1.fincancelac,
			    t28.dealername AS lovdescaccountsofficer,
			    t28.dealercity AS lovdescsourcecity,
			    t29.agreename,
			    t29.mmareference AS lovdescmmareference,
			    t1.dsacode,
			    t30.rofficerdesc AS dsacodedesc,
			    t1.tdsapplicable,
			    t1.mandateid,
			    t1.droplinefrq,
			    t1.firstdroplinedate,
			    t1.pftservicingodlimit,
			    t1.insuranceamt,
			    t1.deductinsdisb,
			    t1.alwbpi,
			    t1.bpitreatment,
			    t1.planemihalw,
			    t1.planemihmethod,
			    t1.planemihmaxperyear,
			    t1.planemihmax,
			    t1.planemihlockperiod,
			    t1.planemicpz,
			    t1.calroundingmode,
			    t1.alwmultidisb,
			    t1.applicationno,
			    t1.referralid,
			    t33.rofficerdesc AS referraliddesc,
			    t1.dmacode,
			    t34.rofficerdesc AS dmacodedesc,
			    t1.salesdepartment,
			    t35.gendeptdesc AS salesdepartmentdesc,
			    t1.quickdisb,
			    t1.wifreference,
			    t1.unplanemihlockperiod,
			    t1.unplanemicpz,
			    t1.reagecpz,
			    t1.maxunplannedemi,
			    t1.maxreageholidays,
			    t1.availedunplanemi,
			    t1.availedreageh,
			    t1.bpiamount,
			    t1.deductfeedisb,
			    t1.rvwrateapplfor,
			    t1.schcalonrvw,
			    t1.pastduepftcalmthd,
			    t1.pastduepftmargin,
			    t1.droppingmethod,
			    t1.ratechganyday,
			    t1.promotioncode,
			    t1.restructureloan,
			    t1.oldfinreference,
			    t1.reagebucket,
			    t1.fincategory,
			    t1.productcategory,
			    t1.roundingtarget,
			    t36.entitycode AS lovdescentitycode,
			    t1.eligibilitymethod,
			    t38.fieldcodevalue as lovEligibilityMethod,
			    t38.valuedesc as lovDescEligibilityMethod,
			    t1.employeename,
			    t37.rofficerdesc AS employeenamedesc,
			    t1.samplingrequired,
			    t1.legalrequired,
			    t1.grcmaxamount
			   FROM financemain t1
			     JOIN rmtfinancetypes t7 ON t1.fintype = t7.fintype
			     LEFT JOIN rmtbranches t12 ON t1.finbranch = t12.branchcode
			     LEFT JOIN finpftdetails t17 ON t17.finreference = t1.finreference
			     LEFT JOIN steppolicyheader t24 ON t1.steppolicy = t24.policycode
			     LEFT JOIN bmtcuststatuscodes t27 ON t1.finstatus = t27.custstscode
			     LEFT JOIN amtvehicledealer t28 ON t1.accountsofficer = t28.dealerid
			     LEFT JOIN mmagreements t29 ON t1.mmaid = t29.mmaid
			     LEFT JOIN relationshipofficers t30 ON t1.dsacode = t30.rofficercode
			     LEFT JOIN relationshipofficers t33 ON t1.referralid = t33.rofficercode
			     LEFT JOIN relationshipofficers t34 ON t1.dmacode = t34.rofficercode
			     LEFT JOIN rmtgendepartments t35 ON t1.salesdepartment = t35.gendepartment
			     LEFT JOIN smtdivisiondetail t36 ON t7.findivision = t36.divisioncode
			     LEFT JOIN relationshipofficers t37 ON t1.employeename = t37.rofficercode
			     LEFT JOIN rmtlovfielddetail t38 ON t1.eligibilitymethod = t38.fieldcodeid and t38.fieldcode='ELGMETHOD'
			     LEFT JOIN loanpurposes t39 ON t1.finpurpose = t39.loanpurposecode
		</createView>
	</changeSet>
	
	<changeSet id="17" author="Vinay">
		<createView viewName="financemain_tview" replaceIfExists="true">
				SELECT t1.finreference,
				    t1.investmentref,
				    t1.numberofterms,
				    t1.grcperiodenddate,
				    t1.allowgrcperiod,
				    t1.gracebaserate,
				    t1.gracespecialrate,
				    t1.grcpftrate,
				    t1.grcpftfrq,
				    t1.nextgrcpftdate,
				    t1.allowgrcpftrvw,
				    t1.grcpftrvwfrq,
				    t1.nextgrcpftrvwdate,
				    t1.allowgrccpz,
				    t1.grccpzfrq,
				    t1.nextgrccpzdate,
				    t1.repaybaserate,
				    t1.repayspecialrate,
				    t1.repayprofitrate,
				    t1.repayfrq,
				    t1.nextrepaydate,
				    t1.repaypftfrq,
				    t1.nextrepaypftdate,
				    t1.allowrepayrvw,
				    t1.repayrvwfrq,
				    t1.nextrepayrvwdate,
				    t1.allowrepaycpz,
				    t1.repaycpzfrq,
				    t1.nextrepaycpzdate,
				    t1.maturitydate,
				    t1.cpzatgraceend,
				    t1.downpayment,
				    t1.graceflatamount,
				    t1.reqrepayamount,
				    t1.totalprofit,
				    t1.totalcpz,
				    t1.totalgrosspft,
				    t1.totalgrossgrcpft,
				    t1.totalgracepft,
				    t1.totalgracecpz,
				    t1.grcratebasis,
				    t1.repayratebasis,
				    t1.fintype,
				    t1.finremarks,
				    t1.finccy,
				    t1.schedulemethod,
				    t1.profitdaysbasis,
				    t1.reqmaturity,
				    t1.calterms,
				    t1.calmaturity,
				    t1.firstrepay,
				    t1.lastrepay,
				    t1.finstartdate,
				    t1.finamount,
				    t1.finrepaymentamount,
				    t1.custid,
				    t1.defferments,
				    t1.plandefercount,
				    t1.finbranch,
				    t1.finsourceid,
				    t1.alloweddefrpychange,
				    t1.availeddefrpychange,
				    t1.alloweddeffrqchange,
				    t1.availeddeffrqchange,
				    t1.recaltype,
				    t1.finassetvalue,
				    t1.disbaccountid,
				    t1.repayaccountid,
				    t1.finisactive,
				    t1.limitvalid,
				    t1.overridelimit,
				    t1.securitydeposit,
				    t1.version,
				    t1.lastmntby,
				    t1.lastmnton,
				    t1.recordstatus,
				    t1.rolecode,
				    t1.nextrolecode,
				    t1.taskid,
				    t1.nexttaskid,
				    t1.recordtype,
				    t1.workflowid,
				    t2.fintypedesc AS lovdescfintypename,
				    t2.finmaxamount AS lovdescfinmaxamt,
				    t2.finminamount AS lovdescfinminamount,
				    t1.mindownpayperc,
				    t4.branchdesc AS lovdescfinbranchname,
				    t1.lastrepaydate,
				    t1.lastrepaypftdate,
				    t1.lastrepayrvwdate,
				    t1.lastrepaycpzdate,
				    t1.allowgrcrepay,
				    t1.grcschdmthd,
				    t1.grcmargin,
				    t1.repaymargin,
				    t1.fincurrassetvalue,
				    t1.fincommitmentref,
				    t1.finlimitref,
				    t1.depreciationfrq,
				    t1.fincontractdate,
				    t1.nextdepdate,
				    t1.lastdepdate,
				    t1.finaccount,
				    t1.fincustpftaccount,
				    t1.totalrepayamt,
				    t1.finapproveddate,
				    t1.feechargeamt,
				    t1.blacklisted,
				    t1.finrepaypftonfrq,
				    t1.anualizedpercrate,
				    t1.effectiverateofreturn,
				    t1.migratedfinance,
				    t1.schedulemaintained,
				    t1.scheduleregenerated,
				    t1.finpurpose,
				    t14.loanpurposedesc as lovdescfinpurposename,
				    t1.finstatus,
				    t1.finstsreason,
				    t1.initiateuser,
				    t1.bankname,
				    t1.iban,
				    t1.accounttype,
				    t1.ddareferenceno,
				    t1.custdsr,
				    t1.jointaccount,
				    t1.jointcustid,
				    t1.downpaybank,
				    t1.downpaysupl,
				    t1.downpayaccount,
				    t1.securitycollateral,
				    t1.approved,
				    t1.discrepancy,
				    t1.limitapproved,
				    t1.graceterms,
				    t2.findivision AS lovdescfindivision,
				    t1.rcdmaintainsts,
				    t1.finrepaymethod,
				    t1.grcprofitdaysbasis,
				    t1.stepfinance,
				    t1.steptype,
				    t1.steppolicy,
				    t1.alwmanualsteps,
				    t1.noofsteps,
				    t1.linkedfinref,
				    t1.nextuserid,
				    t1.priority,
				    t5.policydesc AS lovdescsteppolicyname,
				    t1.grcminrate,
				    t1.grcmaxrate,
				    t1.rpyminrate,
				    t1.rpymaxrate,
				    t1.deviationapproval,
				    t1.manualschedule,
				    t1.takeoverfinance,
				    t1.grcadvbaserate,
				    t1.grcadvmargin,
				    t1.grcadvpftrate,
				    t1.rpyadvbaserate,
				    t1.rpyadvmargin,
				    t1.rpyadvpftrate,
				    t1.supplementrent,
				    t1.increasedcost,
				    t1.creditinsamt,
				    t1.rolloverfrq,
				    t1.nextrolloverdate,
				    t1.shariastatus,
				    t1.initiatedate,
				    t1.finpreapprovedref,
				    t1.mmaid,
				    t1.accountsofficer,
				    t1.feeaccountid,
				    t1.fincancelac,
				    t6.dealername AS lovdescaccountsofficer,
				    t6.dealercity AS lovdescsourcecity,
				    t1.dsacode,
				    t7.rofficerdesc AS dsacodedesc,
				    t1.tdsapplicable,
				    t1.mandateid,
				    t1.droplinefrq,
				    t1.firstdroplinedate,
				    t1.pftservicingodlimit,
				    t1.insuranceamt,
				    t1.deductinsdisb,
				    t1.alwbpi,
				    t1.bpitreatment,
				    t1.planemihalw,
				    t1.planemihmethod,
				    t1.planemihmaxperyear,
				    t1.planemihmax,
				    t1.planemihlockperiod,
				    t1.planemicpz,
				    t1.calroundingmode,
				    t1.alwmultidisb,
				    t1.applicationno,
				    t1.referralid,
				    t8.rofficerdesc AS referraliddesc,
				    t1.dmacode,
				    t9.rofficerdesc AS dmacodedesc,
				    t1.salesdepartment,
				    t10.gendeptdesc AS salesdepartmentdesc,
				    t1.quickdisb,
				    t1.wifreference,
				    t1.unplanemihlockperiod,
				    t1.unplanemicpz,
				    t1.reagecpz,
				    t1.maxunplannedemi,
				    t1.maxreageholidays,
				    t1.availedunplanemi,
				    t1.availedreageh,
				    t1.bpiamount,
				    t1.deductfeedisb,
				    t1.rvwrateapplfor,
				    t1.schcalonrvw,
				    t1.pastduepftcalmthd,
				    t1.pastduepftmargin,
				    t1.droppingmethod,
				    t1.ratechganyday,
				    t1.promotioncode,
				    t1.restructureloan,
				    t1.oldfinreference,
				    t1.reagebucket,
				    t1.fincategory,
				    t1.productcategory,
				    t1.roundingtarget,
				    t11.entitycode AS lovdescentitycode,
				    t1.eligibilitymethod,
				    t13.fieldcodevalue as lovEligibilityMethod,
					t13.valuedesc as lovDescEligibilityMethod,
				    t1.employeename,
				    t12.rofficerdesc AS employeenamedesc,
				    t1.samplingrequired,
				    t1.legalrequired,
				    t1.grcmaxamount
				   FROM financemain_temp t1
				     JOIN rmtfinancetypes t2 ON t1.fintype = t2.fintype
				     JOIN rmtbranches t4 ON t1.finbranch = t4.branchcode
				     LEFT JOIN steppolicyheader t5 ON t1.steppolicy = t5.policycode
				     LEFT JOIN amtvehicledealer t6 ON t1.accountsofficer = t6.dealerid
				     LEFT JOIN relationshipofficers t7 ON t1.dsacode = t7.rofficercode
				     LEFT JOIN relationshipofficers t8 ON t1.referralid = t8.rofficercode
				     LEFT JOIN relationshipofficers t9 ON t1.dmacode = t9.rofficercode
				     LEFT JOIN rmtgendepartments t10 ON t1.salesdepartment = t10.gendepartment
				     LEFT JOIN smtdivisiondetail t11 ON t2.findivision = t11.divisioncode
				     LEFT JOIN relationshipofficers t12 ON t1.employeename = t12.rofficercode
				     LEFT JOIN rmtlovfielddetail t13 ON t1.eligibilitymethod = t13.fieldcodeid and t13.fieldcode='ELGMETHOD'
				     LEFT JOIN loanpurposes t14 ON t1.finpurpose = t14.loanpurposecode
		</createView>
	</changeSet>
	
	<changeSet id="18" author="Vinay">
		<createView viewName="financemain_view" replaceIfExists="true">
			 SELECT t1.finreference,
			    t1.investmentref,
			    t1.numberofterms,
			    t1.grcperiodenddate,
			    t1.allowgrcperiod,
			    t1.gracebaserate,
			    t1.gracespecialrate,
			    t1.grcpftrate,
			    t1.grcpftfrq,
			    t1.nextgrcpftdate,
			    t1.allowgrcpftrvw,
			    t1.grcpftrvwfrq,
			    t1.nextgrcpftrvwdate,
			    t1.allowgrccpz,
			    t1.grccpzfrq,
			    t1.nextgrccpzdate,
			    t1.repaybaserate,
			    t1.repayspecialrate,
			    t1.repayprofitrate,
			    t1.repayfrq,
			    t1.nextrepaydate,
			    t1.repaypftfrq,
			    t1.nextrepaypftdate,
			    t1.allowrepayrvw,
			    t1.repayrvwfrq,
			    t1.nextrepayrvwdate,
			    t1.allowrepaycpz,
			    t1.repaycpzfrq,
			    t1.nextrepaycpzdate,
			    t1.maturitydate,
			    t1.cpzatgraceend,
			    t1.downpayment,
			    t1.graceflatamount,
			    t1.reqrepayamount,
			    t1.totalprofit,
			    t1.totalcpz,
			    t1.totalgrosspft,
			    t1.totalgrossgrcpft,
			    t1.totalgracepft,
			    t1.totalgracecpz,
			    t1.grcratebasis,
			    t1.repayratebasis,
			    t1.fintype,
			    t1.finremarks,
			    t1.finccy,
			    t1.schedulemethod,
			    t1.profitdaysbasis,
			    t1.reqmaturity,
			    t1.calterms,
			    t1.calmaturity,
			    t1.firstrepay,
			    t1.lastrepay,
			    t1.finstartdate,
			    t1.finamount,
			    t1.finamount + t1.feechargeamt - t1.downpayment AS lovdescfinancingamount,
			    t1.finrepaymentamount,
			    t1.custid,
			    t1.defferments,
			    t1.plandefercount,
			    t1.finbranch,
			    t1.finsourceid,
			    t1.alloweddefrpychange,
			    t1.availeddefrpychange,
			    t1.alloweddeffrqchange,
			    t1.availeddeffrqchange,
			    t1.recaltype,
			    t1.finassetvalue,
			    t1.disbaccountid,
			    t1.repayaccountid,
			    t1.finisactive,
			    t1.limitvalid,
			    t1.overridelimit,
			    t1.securitydeposit,
			    t1.version,
			    t1.lastmntby,
			    t1.lastmnton,
			    t1.recordstatus,
			    t1.rolecode,
			    t1.nextrolecode,
			    t1.taskid,
			    t1.nexttaskid,
			    t1.recordtype,
			    t1.workflowid,
			    t7.fintypedesc AS lovdescfintypename,
			    t7.finmaxamount AS lovdescfinmaxamt,
			    t7.finminamount AS lovdescfinminamount,
			    t1.mindownpayperc,
			    t7.finisalwdifferment AS lovdescfinalwdeferment,
			    t7.finisdwpayrequired AS lovdescdwnpayreq,
			    t7.finmaxdifferment AS lovdescfinmaxdifferment,
			    t12.branchdesc AS lovdescfinbranchname,
			    t1.lastrepaydate,
			    t1.lastrepaypftdate,
			    t1.lastrepayrvwdate,
			    t1.lastrepaycpzdate,
			    t1.allowgrcrepay,
			    t1.grcschdmthd,
			    t1.grcmargin,
			    t1.repaymargin,
			    t1.fincurrassetvalue,
			    t1.fincommitmentref,
			    t1.finlimitref,
			    t1.depreciationfrq,
			    t1.fincontractdate,
			    t1.nextdepdate,
			    t1.lastdepdate,
			    t1.finaccount,
			    t1.fincustpftaccount,
			    t17.acrtilllbd AS lovdescaccruedtilllbd,
			    t7.finrvwrateapplfor,
			    t1.totalrepayamt,
			    t1.closingstatus,
			    t1.finapproveddate,
			    t1.feechargeamt,
			    t1.blacklisted,
			    t1.finrepaypftonfrq,
			    t1.anualizedpercrate,
			    t1.effectiverateofreturn,
			    t1.migratedfinance,
			    t1.schedulemaintained,
			    t1.scheduleregenerated,
			    t1.finpurpose,
			    t39.loanpurposedesc as lovdescfinpurposename,
			    t1.finstatus,
			    t1.finstsreason,
			    t1.initiateuser,
			    t1.bankname,
			    t1.iban,
			    t1.accounttype,
			    t1.ddareferenceno,
			    t7.finscheduleon AS lovdescfinscheduleon,
			    t1.custdsr,
			    t1.jointaccount,
			    t1.jointcustid,
			    t1.downpaybank,
			    t1.downpaysupl,
			    t1.downpayaccount,
			    t1.securitycollateral,
			    t1.approved,
			    t1.discrepancy,
			    t1.limitapproved,
			    t1.graceterms,
			    t7.findivision AS lovdescfindivision,
			    t1.rcdmaintainsts,
			    t1.finrepaymethod,
			    t1.grcprofitdaysbasis,
			    t1.stepfinance,
			    t1.steptype,
			    t1.steppolicy,
			    t1.alwmanualsteps,
			    t1.noofsteps,
			    t1.linkedfinref,
			    t1.nextuserid,
			    t1.priority,
			    t24.policydesc AS lovdescsteppolicyname,
			    t1.grcminrate,
			    t1.grcmaxrate,
			    t1.rpyminrate,
			    t1.rpymaxrate,
			    t1.deviationapproval,
			    t1.manualschedule,
			    t1.takeoverfinance,
			    t1.grcadvbaserate,
			    t1.grcadvmargin,
			    t1.grcadvpftrate,
			    t1.rpyadvbaserate,
			    t1.rpyadvmargin,
			    t1.rpyadvpftrate,
			    t1.supplementrent,
			    t1.increasedcost,
			    t1.rolloverfrq,
			    t1.nextrolloverdate,
			    t27.custstsdescription,
			    t1.shariastatus,
			    t1.initiatedate,
			    t1.finpreapprovedref,
			    t1.mmaid,
			    t1.accountsofficer,
			    t1.feeaccountid,
			    t1.fincancelac,
			    t28.dealername AS lovdescaccountsofficer,
			    t28.dealercity AS lovdescsourcecity,
			    t1.dsacode,
			    t30.rofficerdesc AS dsacodedesc,
			    t1.tdsapplicable,
			    t1.mandateid,
			    t1.droplinefrq,
			    t1.firstdroplinedate,
			    t1.pftservicingodlimit,
			    t1.insuranceamt,
			    t1.deductinsdisb,
			    t1.alwbpi,
			    t1.bpitreatment,
			    t1.planemihalw,
			    t1.planemihmethod,
			    t1.planemihmaxperyear,
			    t1.planemihmax,
			    t1.planemihlockperiod,
			    t1.planemicpz,
			    t1.calroundingmode,
			    t1.alwmultidisb,
			    t1.applicationno,
			    t1.referralid,
			    t33.rofficerdesc AS referraliddesc,
			    t1.dmacode,
			    t34.rofficerdesc AS dmacodedesc,
			    t1.salesdepartment,
			    t35.gendeptdesc AS salesdepartmentdesc,
			    t1.quickdisb,
			    t1.wifreference,
			    t1.unplanemihlockperiod,
			    t1.unplanemicpz,
			    t1.reagecpz,
			    t1.maxunplannedemi,
			    t1.maxreageholidays,
			    t1.availedunplanemi,
			    t1.availedreageh,
			    t1.bpiamount,
			    t1.deductfeedisb,
			    t1.rvwrateapplfor,
			    t1.schcalonrvw,
			    t1.pastduepftcalmthd,
			    t1.pastduepftmargin,
			    t1.droppingmethod,
			    t1.ratechganyday,
			    t1.promotioncode,
			    t1.restructureloan,
			    t1.oldfinreference,
			    t1.reagebucket,
			    t1.fincategory,
			    t1.productcategory,
			    t1.roundingtarget,
			    t36.entitycode AS lovdescentitycode,
			    t1.eligibilitymethod,
			    t38.fieldcodevalue as lovEligibilityMethod,
				t38.valuedesc as lovDescEligibilityMethod,
			    t1.employeename,
			    t37.rofficerdesc AS employeenamedesc,
			    t1.samplingrequired,
			    t1.legalrequired,
			    t1.grcmaxamount
			   FROM financemain_temp t1
			     JOIN rmtfinancetypes t7 ON t1.fintype = t7.fintype
			     LEFT JOIN rmtbranches t12 ON t1.finbranch = t12.branchcode
			     LEFT JOIN finpftdetails t17 ON t17.finreference = t1.finreference
			     LEFT JOIN steppolicyheader t24 ON t1.steppolicy = t24.policycode
			     LEFT JOIN bmtcuststatuscodes t27 ON t1.finstatus = t27.custstscode
			     LEFT JOIN amtvehicledealer t28 ON t1.accountsofficer = t28.dealerid
			     LEFT JOIN relationshipofficers t30 ON t1.dsacode = t30.rofficercode
			     LEFT JOIN relationshipofficers t33 ON t1.referralid = t33.rofficercode
			     LEFT JOIN relationshipofficers t34 ON t1.dmacode = t34.rofficercode
			     LEFT JOIN rmtgendepartments t35 ON t1.salesdepartment = t35.gendepartment
			     LEFT JOIN smtdivisiondetail t36 ON t7.findivision = t36.divisioncode
			     LEFT JOIN relationshipofficers t37 ON t1.employeename = t37.rofficercode
			     LEFT JOIN rmtlovfielddetail t38 ON t1.eligibilitymethod = t38.fieldcodeid and t38.fieldcode='ELGMETHOD'
			     LEFT JOIN loanpurposes t39 ON t1.finpurpose = t39.loanpurposecode
			UNION ALL
			 SELECT t1.finreference,
			    t1.investmentref,
			    t1.numberofterms,
			    t1.grcperiodenddate,
			    t1.allowgrcperiod,
			    t1.gracebaserate,
			    t1.gracespecialrate,
			    t1.grcpftrate,
			    t1.grcpftfrq,
			    t1.nextgrcpftdate,
			    t1.allowgrcpftrvw,
			    t1.grcpftrvwfrq,
			    t1.nextgrcpftrvwdate,
			    t1.allowgrccpz,
			    t1.grccpzfrq,
			    t1.nextgrccpzdate,
			    t1.repaybaserate,
			    t1.repayspecialrate,
			    t1.repayprofitrate,
			    t1.repayfrq,
			    t1.nextrepaydate,
			    t1.repaypftfrq,
			    t1.nextrepaypftdate,
			    t1.allowrepayrvw,
			    t1.repayrvwfrq,
			    t1.nextrepayrvwdate,
			    t1.allowrepaycpz,
			    t1.repaycpzfrq,
			    t1.nextrepaycpzdate,
			    t1.maturitydate,
			    t1.cpzatgraceend,
			    t1.downpayment,
			    t1.graceflatamount,
			    t1.reqrepayamount,
			    t1.totalprofit,
			    t1.totalcpz,
			    t1.totalgrosspft,
			    t1.totalgrossgrcpft,
			    t1.totalgracepft,
			    t1.totalgracecpz,
			    t1.grcratebasis,
			    t1.repayratebasis,
			    t1.fintype,
			    t1.finremarks,
			    t1.finccy,
			    t1.schedulemethod,
			    t1.profitdaysbasis,
			    t1.reqmaturity,
			    t1.calterms,
			    t1.calmaturity,
			    t1.firstrepay,
			    t1.lastrepay,
			    t1.finstartdate,
			    t1.finamount,
			    t1.finamount + t1.feechargeamt - t1.downpayment AS lovdescfinancingamount,
			    t1.finrepaymentamount,
			    t1.custid,
			    t1.defferments,
			    t1.plandefercount,
			    t1.finbranch,
			    t1.finsourceid,
			    t1.alloweddefrpychange,
			    t1.availeddefrpychange,
			    t1.alloweddeffrqchange,
			    t1.availeddeffrqchange,
			    t1.recaltype,
			    t1.finassetvalue,
			    t1.disbaccountid,
			    t1.repayaccountid,
			    t1.finisactive,
			    t1.limitvalid,
			    t1.overridelimit,
			    t1.securitydeposit,
			    t1.version,
			    t1.lastmntby,
			    t1.lastmnton,
			    t1.recordstatus,
			    t1.rolecode,
			    t1.nextrolecode,
			    t1.taskid,
			    t1.nexttaskid,
			    t1.recordtype,
			    t1.workflowid,
			    t7.fintypedesc AS lovdescfintypename,
			    t7.finmaxamount AS lovdescfinmaxamt,
			    t7.finminamount AS lovdescfinminamount,
			    t1.mindownpayperc,
			    t7.finisalwdifferment AS lovdescfinalwdeferment,
			    t7.finisdwpayrequired AS lovdescdwnpayreq,
			    t7.finmaxdifferment AS lovdescfinmaxdifferment,
			    t12.branchdesc AS lovdescfinbranchname,
			    t1.lastrepaydate,
			    t1.lastrepaypftdate,
			    t1.lastrepayrvwdate,
			    t1.lastrepaycpzdate,
			    t1.allowgrcrepay,
			    t1.grcschdmthd,
			    t1.grcmargin,
			    t1.repaymargin,
			    t1.fincurrassetvalue,
			    t1.fincommitmentref,
			    t1.finlimitref,
			    t1.depreciationfrq,
			    t1.fincontractdate,
			    t1.nextdepdate,
			    t1.lastdepdate,
			    t1.finaccount,
			    t1.fincustpftaccount,
			    t17.acrtilllbd AS lovdescaccruedtilllbd,
			    t7.finrvwrateapplfor,
			    t1.totalrepayamt,
			    t1.closingstatus,
			    t1.finapproveddate,
			    t1.feechargeamt,
			    t1.blacklisted,
			    t1.finrepaypftonfrq,
			    t1.anualizedpercrate,
			    t1.effectiverateofreturn,
			    t1.migratedfinance,
			    t1.schedulemaintained,
			    t1.scheduleregenerated,
			    t1.finpurpose,
			    t39.loanpurposedesc as lovdescfinpurposename,
			    t1.finstatus,
			    t1.finstsreason,
			    t1.initiateuser,
			    t1.bankname,
			    t1.iban,
			    t1.accounttype,
			    t1.ddareferenceno,
			    t7.finscheduleon AS lovdescfinscheduleon,
			    t1.custdsr,
			    t1.jointaccount,
			    t1.jointcustid,
			    t1.downpaybank,
			    t1.downpaysupl,
			    t1.downpayaccount,
			    t1.securitycollateral,
			    t1.approved,
			    t1.discrepancy,
			    t1.limitapproved,
			    t1.graceterms,
			    t7.findivision AS lovdescfindivision,
			    t1.rcdmaintainsts,
			    t1.finrepaymethod,
			    t1.grcprofitdaysbasis,
			    t1.stepfinance,
			    t1.steptype,
			    t1.steppolicy,
			    t1.alwmanualsteps,
			    t1.noofsteps,
			    t1.linkedfinref,
			    t1.nextuserid,
			    t1.priority,
			    t24.policydesc AS lovdescsteppolicyname,
			    t1.grcminrate,
			    t1.grcmaxrate,
			    t1.rpyminrate,
			    t1.rpymaxrate,
			    t1.deviationapproval,
			    t1.manualschedule,
			    t1.takeoverfinance,
			    t1.grcadvbaserate,
			    t1.grcadvmargin,
			    t1.grcadvpftrate,
			    t1.rpyadvbaserate,
			    t1.rpyadvmargin,
			    t1.rpyadvpftrate,
			    t1.supplementrent,
			    t1.increasedcost,
			    t1.rolloverfrq,
			    t1.nextrolloverdate,
			    t27.custstsdescription,
			    t1.shariastatus,
			    t1.initiatedate,
			    t1.finpreapprovedref,
			    t1.mmaid,
			    t1.accountsofficer,
			    t1.feeaccountid,
			    t1.fincancelac,
			    t28.dealername AS lovdescaccountsofficer,
			    t28.dealercity AS lovdescsourcecity,
			    t1.dsacode,
			    t30.rofficerdesc AS dsacodedesc,
			    t1.tdsapplicable,
			    t1.mandateid,
			    t1.droplinefrq,
			    t1.firstdroplinedate,
			    t1.pftservicingodlimit,
			    t1.insuranceamt,
			    t1.deductinsdisb,
			    t1.alwbpi,
			    t1.bpitreatment,
			    t1.planemihalw,
			    t1.planemihmethod,
			    t1.planemihmaxperyear,
			    t1.planemihmax,
			    t1.planemihlockperiod,
			    t1.planemicpz,
			    t1.calroundingmode,
			    t1.alwmultidisb,
			    t1.applicationno,
			    t1.referralid,
			    t33.rofficerdesc AS referraliddesc,
			    t1.dmacode,
			    t34.rofficerdesc AS dmacodedesc,
			    t1.salesdepartment,
			    t35.gendeptdesc AS salesdepartmentdesc,
			    t1.quickdisb,
			    t1.wifreference,
			    t1.unplanemihlockperiod,
			    t1.unplanemicpz,
			    t1.reagecpz,
			    t1.maxunplannedemi,
			    t1.maxreageholidays,
			    t1.availedunplanemi,
			    t1.availedreageh,
			    t1.bpiamount,
			    t1.deductfeedisb,
			    t1.rvwrateapplfor,
			    t1.schcalonrvw,
			    t1.pastduepftcalmthd,
			    t1.pastduepftmargin,
			    t1.droppingmethod,
			    t1.ratechganyday,
			    t1.promotioncode,
			    t1.restructureloan,
			    t1.oldfinreference,
			    t1.reagebucket,
			    t1.fincategory,
			    t1.productcategory,
			    t1.roundingtarget,
			    t36.entitycode AS lovdescentitycode,
			    t1.eligibilitymethod,
			    t38.fieldcodevalue as lovEligibilityMethod,
				t38.valuedesc as lovDescEligibilityMethod,
			    t1.employeename,
			    t37.rofficerdesc AS employeenamedesc,
			    t1.samplingrequired,
			    t1.legalrequired,
			    t1.grcmaxamount
			   FROM financemain t1
			     JOIN rmtfinancetypes t7 ON t1.fintype = t7.fintype
			     LEFT JOIN rmtbranches t12 ON t1.finbranch = t12.branchcode
			     LEFT JOIN finpftdetails t17 ON t17.finreference = t1.finreference
			     LEFT JOIN steppolicyheader t24 ON t1.steppolicy = t24.policycode
			     LEFT JOIN bmtcuststatuscodes t27 ON t1.finstatus = t27.custstscode
			     LEFT JOIN amtvehicledealer t28 ON t1.accountsofficer = t28.dealerid
			     LEFT JOIN relationshipofficers t30 ON t1.dsacode = t30.rofficercode
			     LEFT JOIN relationshipofficers t33 ON t1.referralid = t33.rofficercode
			     LEFT JOIN relationshipofficers t34 ON t1.dmacode = t34.rofficercode
			     LEFT JOIN rmtgendepartments t35 ON t1.salesdepartment = t35.gendepartment
			     LEFT JOIN smtdivisiondetail t36 ON t7.findivision = t36.divisioncode
			     LEFT JOIN relationshipofficers t37 ON t1.employeename = t37.rofficercode
			     LEFT JOIN rmtlovfielddetail t38 ON t1.eligibilitymethod = t38.fieldcodeid and t38.fieldcode='ELGMETHOD'
			     LEFT JOIN loanpurposes t39 ON t1.finpurpose = t39.loanpurposecode
			  WHERE NOT (EXISTS ( SELECT 1 AS expr1
			           FROM financemain_temp
			          WHERE financemain_temp.finreference = t1.finreference))
		</createView>
	</changeSet>
	
	<changeSet id="11" author="Manoj">
		<comment>Task#497-Display Custom notifications along with auto deviations </comment>
		<renameColumn tableName="Financedeviations_temp" oldColumnName="ManualDeviation" newColumnName="DeviationCategory"/>
	</changeSet>
	
	<changeSet id="12" author="Manoj">
		<renameColumn tableName="Financedeviations" oldColumnName="ManualDeviation" newColumnName="DeviationCategory"/>
	</changeSet>
	
	<changeSet id="13" author="Manoj">
			<modifyDataType tableName="FinanceDeviations_Temp" columnName="DeviationCategory" newDataType="Char(1)" />	
	</changeSet>
	
	<changeSet id="14" author="Manoj">
		<modifyDataType tableName="Financedeviations" columnName="DeviationCategory" newDataType="Char(1)" />
	</changeSet>
	
	<changeSet id="15" author="Manoj">
		<sql>
			update FinanceDeviations_Temp set DeviationCategory = 'A' where DeviationCategory = '0'; 
			update FinanceDeviations  set DeviationCategory = 'A' where DeviationCategory = '0'; 
			update FinanceDeviations_Temp set DeviationCategory = 'M' where DeviationCategory = '1'; 
			update FinanceDeviations set DeviationCategory = 'M' where DeviationCategory = '1'; 
		</sql>
	</changeSet>
	
	<changeSet id="16" author="Kesav">
		<comment>Rights for Stage Accounting</comment>
		<sql>
			Update SeqSecGroups Set SeqNo = (Select MAX(GrpID) + 1 from SecGroups);
			Update SeqSecRights Set SeqNo = (Select MAX(RightID) + 1 from SecRights);
			Update SeqSecGroupRights Set SeqNo = (Select MAX(GrpRightID) + 1 from SecGroupRights);
			Update SeqSecRoleGroups Set SeqNo = (Select MAX(RoleGrpID) + 1 from SecRoleGroups);
			
			Delete from SecGroupRights where GrpID In (Select GrpID from SecGroups where GrpCode = 'StageAccountingRule_Maker');
			Delete from SecRoleGroups where GrpID IN (Select GrpId from SecGroups WHERE GrpCode = 'StageAccountingRule_Maker') And RoleID IN (Select RoleID from SecRoles WHERE RoleCd = 'MSTGRP1_MAKER');
			Delete from SecGroups where GrpCode = 'StageAccountingRule_Maker';
			INSERT INTO SecGroups Values ((Select MAX(GrpID)+1 From SecGroups), 'StageAccountingRule_Maker','WF Maker for Rules', 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL,0);
			
			Insert into secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'StageAccountingRule_Maker'), (Select RightID from SecRights where RightName = 'RuleDialog_ruleCode'), 1, 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			INSERT INTO SecRoleGroups values ((SELECT MAX(RoleGrpID) + 1 from SecRoleGroups), (Select MAX(GrpId) from SecGroups WHERE GrpCode = 'StageAccountingRule_Maker'), (Select MAX(RoleID) from SecRoles WHERE RoleCd = 'MSTGRP1_MAKER'), 0, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
			
			Insert into secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'StageAccountingRule_Maker'), (Select RightID from SecRights where RightName = 'RuleDialog_ruleCodeDesc'), 1, 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			
			Insert into secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'StageAccountingRule_Maker'), (Select RightID from SecRights where RightName = 'RuleDialog_ruleEvent'), 1, 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			
			Insert into secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'StageAccountingRule_Maker'), (Select RightID from SecRights where RightName = 'RuleDialog_returnType'), 1, 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			
			Insert into secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'StageAccountingRule_Maker'), (Select RightID from SecRights where RightName = 'RuleDialog_active'), 1, 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			
			Insert into secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'StageAccountingRule_Maker'), (Select RightID from SecRights where RightName = 'RuleDialog_ruleModule'), 1, 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			
			Insert into secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'StageAccountingRule_Maker'), (Select RightID from SecRights where RightName = 'RuleDialog_sqlRule'), 1, 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			
			Insert into secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'StageAccountingRule_Maker'), (Select RightID from SecRights where RightName = 'button_RuleDialog_btnNew'), 1, 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			
			Insert into secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'StageAccountingRule_Maker'), (Select RightID from SecRights where RightName = 'button_RuleDialog_btnEdit'), 1, 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			
			Insert into secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'StageAccountingRule_Maker'), (Select RightID from SecRights where RightName = 'button_RuleDialog_btnDelete'), 1, 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			
			Insert into secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'StageAccountingRule_Maker'), (Select RightID from SecRights where RightName = 'button_RuleDialog_btnSave'), 1, 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			
			Insert into secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'StageAccountingRule_Maker'), (Select RightID from SecRights where RightName = 'menuCat_RulesFactory'), 1, 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			
			Delete from SecGroupRights where RightID In (Select RightID from SecRights where RightName = 'menuItem_RulesFactory_StageAccountingRule');
			Delete from SecRights where RightName = 'menuItem_RulesFactory_StageAccountingRule';
			Insert into SecRights Values((Select max(RightID) + 1 from SecRights), 0, 'menuItem_RulesFactory_StageAccountingRule', 'MENU', 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			Insert into secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'StageAccountingRule_Maker'), (Select RightID from SecRights where RightName = 'menuItem_RulesFactory_StageAccountingRule'), 1, 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			
			Delete from SecGroupRights where RightID In (Select RightID from SecRights where RightName = 'button_RuleList_NewStageAccountingRule');
			Delete from SecRights where RightName = 'button_RuleList_NewStageAccountingRule';
			Insert into SecRights Values((Select max(RightID) + 1 from SecRights), 2, 'button_RuleList_NewStageAccountingRule', 'RuleList', 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			Insert into secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'StageAccountingRule_Maker'), (Select RightID from SecRights where RightName = 'button_RuleList_NewStageAccountingRule'), 1, 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			
			Delete from SecGroupRights where GrpID In (Select GrpID from SecGroups where GrpCode = 'StageAccountingRule_Approver');
			Delete from SecRoleGroups where GrpID IN (Select GrpId from SecGroups WHERE GrpCode = 'StageAccountingRule_Approver') And RoleID IN (Select RoleID from SecRoles WHERE RoleCd = 'MSTGRP1_APPROVER');
			Delete from SecGroups where GrpCode = 'StageAccountingRule_Approver';
			INSERT INTO SecGroups Values ((Select MAX(GrpID)+1 From SecGroups), 'StageAccountingRule_Approver','WF Approver for Rules', 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL,0);
			
			Insert into secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'StageAccountingRule_Approver'), (Select RightID from SecRights where RightName = 'button_RuleDialog_btnSave'), 1, 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			INSERT INTO SecRoleGroups values ((SELECT MAX(RoleGrpID) + 1 from SecRoleGroups), (Select MAX(GrpId) from SecGroups WHERE GrpCode = 'StageAccountingRule_Approver'), (Select MAX(RoleID) from SecRoles WHERE RoleCd = 'MSTGRP1_APPROVER'), 0, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
			
			Insert into secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'StageAccountingRule_Approver'), (Select RightID from SecRights where RightName = 'menuCat_RulesFactory'), 1, 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			
			Insert into secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'StageAccountingRule_Approver'), (Select RightID from SecRights where RightName = 'menuItem_RulesFactory_StageAccountingRule'), 1, 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			
			Update SeqSecGroups Set SeqNo = (Select MAX(GrpID) + 1 from SecGroups);
			Update SeqSecRights Set SeqNo = (Select MAX(RightID) + 1 from SecRights);
			Update SeqSecGroupRights Set SeqNo = (Select MAX(GrpRightID) + 1 from SecGroupRights);
			Update SeqSecRoleGroups Set SeqNo = (Select MAX(RoleGrpID) + 1 from SecRoleGroups);
		</sql>
	</changeSet>
	
	<changeSet id="17" author="Kesav">
		<comment>RBField Details for Stage Accounting</comment>
		<sql>
			Delete from RBFieldDetails where RBModule = 'STGRULE' and  RBEvent ='STGRULE' and RBFldName = 'fm_productCategory';
			Delete from RBFieldDetails where RBModule = 'STGRULE' and  RBEvent ='STGRULE' and RBFldName = 'fm_finType';
			Delete from RBFieldDetails where RBModule = 'STGRULE' and  RBEvent ='STGRULE' and RBFldName = 'ft_product';
			Delete from RBFieldDetails where RBModule = 'STGRULE' and  RBEvent ='STGRULE' and RBFldName = 'rd_paymentType';
			
			Insert into RBFieldDetails Values ('STGRULE','STGRULE','fm_productCategory','Product Category','nvarchar',8,'0','1',' ','static,global',' ');
			Insert into RBFieldDetails Values ('STGRULE','STGRULE','fm_finType','Loan Type','nvarchar',8,'0','1','RMTFinanceTypes','static,global,dbvalue','FinanceType');	
			Insert into RBFieldDetails Values ('STGRULE','STGRULE','ft_product', 'Product','nvarchar',8, 0,0, 'Product','static,global,dbvalue', 'Product');
			Insert into RBFIELDDETAILS values ('STGRULE','STGRULE','rd_paymentType','Payment Type','nvarchar',8,'0','1',' ','static,global',' ');
		</sql>
	</changeSet>
		<changeSet id="18" author="UmaRohini">
	<createView replaceIfExists="true" viewName="BMTAggrementDef_AView">
	SELECT T1.AggId, T1.AggCode, T1.AggName, T1.AggDesc, T1.AggReportName, T1.AggReportPath, T1.AggIsActive, T1.Aggtype, 
		T1.AggImage, T1.AgrRule, T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, 
		T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId, T2.RuleCodeDesc LovDescAgrRuleDesc,
		T1.AllowMultiple, T1.ModuleType,T1.ModuleName,T1.Doctype,T1.AutoGeneration,T1.AutoDownload
	FROM BMTAggrementDef  T1 LEFT OUTER JOIN Rules T2 ON T1.AgrRule = T2.RuleCode AND T2.RuleModule ='AGRRULE'
</createView>   
</changeSet>	
	
	<changeSet id="18" author="Vasu">
		<sql>
			update workflowdetails set WorkFlowActive='0' where WorkFlowType='CORPORATECREDITREVIEW';
		</sql>
		<insert tableName="WorkFlowDetails">
			<column name="WorkFlowId" valueComputed="(select max(Seqno) + 1 from SeqWorkFlowDetails)"/>
			<column name="WorkFlowType">CORPORATECREDITREVIEW</column>
			<column name="WorkFlowSubType">Corporate Credit Review</column>
			<column name="WorkFlowDesc">Corporate Credit Review</column>
			<column name="JsonDesign" type="nclob"><![CDATA[NULL]]></column>
			<column name="SvgDesign" type="nclob"><![CDATA[NULL]]></column>
            <column name="WorkFlowXml" type="clob"><![CDATA[NULL]]></column>
			<column name="WorkFlowRoles">CCR</column>
			<column name="FirstTaskOwner">CCR</column>
			<column name="WorkFlowActive">1</column>
			<column name="Version">5</column>
			<column name="LastMntBy">1000</column>		
			<column name="LastMntOn" valueDate="current_timestamp"/>
			<column name="RecordStatus">Null</column>
			<column name="RoleCode"></column>
			<column name="NextRoleCode"></column>
			<column name="TaskId"></column>
			<column name="NextTaskId"></column>	
     		<column name="RecordType">NULL</column>		
		</insert>	
	</changeSet>
	<changeSet id="19" author="Vasu">
		<update tableName="WORKFLOWDETAILS">
			<column name="JSONDESIGN" type="NCLOB"><![CDATA[{"resourceId":822,"properties":{"process_id":"CORPORATECREDITREVIEW","name":"Corporate Credit Review","documentation":"Corporate Credit Review","category":"","listenerclass":"","listenerentitytype":""},"stencil":{"id":"BPMNDiagram"},"childShapes":[{"resourceId":"startEvent1","properties":{"overrideid":"","name":"Start"},"stencil":{"id":"StartNoneEvent"},"childShapes":[],"outgoing":[{"resourceId":"sid-515123C5-CB7D-46E1-A063-D799D2FD178B"}],"bounds":{"lowerRight":{"x":130,"y":193},"upperLeft":{"x":100,"y":163}},"dockers":[]},{"resourceId":"sid-40177BF3-5C8D-4E13-8E55-93126967F234","properties":{"overrideid":"","name":"CCR","usertaskassignment":{"assignment":{"type":"idm","idm":{"type":"user","assignee":{"email":"CCR","firstName":"CCR","fullName":"CCR","id":"CCR","roledesc":"CCR Details","$$hashKey":"object:1622"}}}},"additionalforms":"","formkeydefinition":"","prioritydefinition":"Role Queue","baseactor":"","duedatedefinition":"","multiinstance_type":"None","isforcompensation":"false"},"stencil":{"id":"UserTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-CD1A6740-DA0B-498D-B7B6-2274046A6D08"},{"resourceId":"sid-A945B357-BD12-4D7C-A570-901EB63BA094"}],"bounds":{"lowerRight":{"x":275,"y":218},"upperLeft":{"x":175,"y":138}},"dockers":[]},{"resourceId":"sid-515123C5-CB7D-46E1-A063-D799D2FD178B","properties":{"overrideid":"","name":"","repruseaction":"false","conditionsequenceflow":"","defaultflow":"false","action":"","state":"","mandatenotes":"false"},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-40177BF3-5C8D-4E13-8E55-93126967F234"}],"bounds":{"lowerRight":{"x":174.15625,"y":178},"upperLeft":{"x":130.609375,"y":178}},"dockers":[{"x":15,"y":15},{"x":50,"y":40}],"target":{"resourceId":"sid-40177BF3-5C8D-4E13-8E55-93126967F234"}},{"resourceId":"sid-5532A92C-4873-4D7C-B143-DB3C3A163CF9","properties":{"overrideid":"","name":"Complete Process","servicetaskexpression":"doApprove","isforcompensation":"false","multiinstance_type":"None"},"stencil":{"id":"approveTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-CD2E2866-C3A5-40C4-A152-9280082949F8"}],"bounds":{"lowerRight":{"x":670,"y":218},"upperLeft":{"x":570,"y":138}},"dockers":[]},{"resourceId":"sid-F4AF09CD-2EB1-424D-A5FA-EF81E7B014E8","properties":{"overrideid":"","name":"End"},"stencil":{"id":"EndNoneEvent"},"childShapes":[],"outgoing":[],"bounds":{"lowerRight":{"x":898,"y":192},"upperLeft":{"x":870,"y":164}},"dockers":[]},{"resourceId":"sid-A4322A8F-BC65-426D-9928-816E149E5F68","properties":{"overrideid":"","name":"","sequencefloworder":""},"stencil":{"id":"ExclusiveGateway"},"childShapes":[],"outgoing":[{"resourceId":"sid-99EFE39E-CB76-42B5-A51A-B75F9B2DE167"},{"resourceId":"sid-27DA2ED6-52C9-4B2A-A23F-2ADD1B8D6A9A"}],"bounds":{"lowerRight":{"x":385,"y":198},"upperLeft":{"x":345,"y":158}},"dockers":[]},{"resourceId":"sid-3E2CFF23-532A-4A7C-9FF4-F93DC6F1B39B","properties":{"overrideid":"","name":"Reject","servicetaskexpression":"doReject","isforcompensation":"false","multiinstance_type":"None"},"stencil":{"id":"rejectTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-4B7910F8-E94A-43D4-8484-CEFF0485DF0E"}],"bounds":{"lowerRight":{"x":415,"y":349},"upperLeft":{"x":315,"y":269}},"dockers":[]},{"resourceId":"sid-E62880BF-36DA-43D7-98E7-8D49E33BB9C3","properties":{"overrideid":"","name":"End"},"stencil":{"id":"EndNoneEvent"},"childShapes":[],"outgoing":[],"bounds":{"lowerRight":{"x":544.6666717529297,"y":323},"upperLeft":{"x":516.6666717529297,"y":295}},"dockers":[]},{"resourceId":"sid-4B7910F8-E94A-43D4-8484-CEFF0485DF0E","properties":{"overrideid":"","name":"","repruseaction":"false","conditionsequenceflow":"","defaultflow":"false","action":"","state":"","mandatenotes":"false"},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-E62880BF-36DA-43D7-98E7-8D49E33BB9C3"}],"bounds":{"lowerRight":{"x":516.0768275856972,"y":309},"upperLeft":{"x":415.182293176651,"y":309}},"dockers":[{"x":50,"y":40},{"x":14,"y":14}],"target":{"resourceId":"sid-E62880BF-36DA-43D7-98E7-8D49E33BB9C3"}},{"resourceId":"sid-CD2E2866-C3A5-40C4-A152-9280082949F8","properties":{"overrideid":"","name":"","repruseaction":"false","conditionsequenceflow":"","defaultflow":"false","action":"","state":"","mandatenotes":"false"},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-F4AF09CD-2EB1-424D-A5FA-EF81E7B014E8"}],"bounds":{"lowerRight":{"x":869.59375,"y":178},"upperLeft":{"x":670.5,"y":178}},"dockers":[{"x":50,"y":40},{"x":14,"y":14}],"target":{"resourceId":"sid-F4AF09CD-2EB1-424D-A5FA-EF81E7B014E8"}},{"resourceId":"sid-CD1A6740-DA0B-498D-B7B6-2274046A6D08","properties":{"overrideid":"","name":"","repruseaction":false,"conditionsequenceflow":{"expression":{"type":"static","staticValue":""}},"defaultflow":"false","action":"","state":"","mandatenotes":"false","showdiamondmarker":false},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-A4322A8F-BC65-426D-9928-816E149E5F68"}],"bounds":{"lowerRight":{"x":344.8593912124634,"y":178},"upperLeft":{"x":275.7656316757202,"y":178}},"dockers":[{"x":50,"y":40},{"x":31.66668701171875,"y":20}],"target":{"resourceId":"sid-A4322A8F-BC65-426D-9928-816E149E5F68"}},{"resourceId":"sid-99EFE39E-CB76-42B5-A51A-B75F9B2DE167","properties":{"overrideid":"","name":"Approve","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Approved'"}},"defaultflow":"false","action":"Approve","state":"Approved","mandatenotes":"false"},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-5532A92C-4873-4D7C-B143-DB3C3A163CF9"}],"bounds":{"lowerRight":{"x":569.2929706798927,"y":178.4609259922493},"upperLeft":{"x":385.3886699451072,"y":178.0996208827507}},"dockers":[{"x":20.5,"y":20.5},{"x":50,"y":40}],"target":{"resourceId":"sid-5532A92C-4873-4D7C-B143-DB3C3A163CF9"}},{"resourceId":"sid-27DA2ED6-52C9-4B2A-A23F-2ADD1B8D6A9A","properties":{"overrideid":"","name":"","repruseaction":false,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Rejected'"}},"defaultflow":"false","action":"","state":"","mandatenotes":true},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-3E2CFF23-532A-4A7C-9FF4-F93DC6F1B39B"}],"bounds":{"lowerRight":{"x":365.4219498604973,"y":268.2382885897997},"upperLeft":{"x":365.1561751395027,"y":198.8710864102003}},"dockers":[{"x":20.5,"y":20.5},{"x":50,"y":40}],"target":{"resourceId":"sid-3E2CFF23-532A-4A7C-9FF4-F93DC6F1B39B"}},{"resourceId":"sid-A945B357-BD12-4D7C-A570-901EB63BA094","properties":{"overrideid":"","name":"Cancel","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Cancelled'"}},"defaultflow":"false","action":"Cancel","state":"Cancelled","mandatenotes":true},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-3E2CFF23-532A-4A7C-9FF4-F93DC6F1B39B"}],"bounds":{"lowerRight":{"x":314.78125,"y":309},"upperLeft":{"x":225,"y":218.9140625}},"dockers":[{"x":50,"y":40},{"x":225,"y":309},{"x":50,"y":40}],"target":{"resourceId":"sid-3E2CFF23-532A-4A7C-9FF4-F93DC6F1B39B"}}],"bounds":{"lowerRight":{"x":1200,"y":1050},"upperLeft":{"x":0,"y":0}},"stencilset":{"url":"stencilsets/bpmn2.0/bpmn2.0.json","namespace":"http://b3mn.org/stencilset/bpmn2.0#"},"ssextensions":[]}]]></column>
			<column name="WORKFLOWXML" type="CLOB"><![CDATA[<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:activiti="http://activiti.org/bpmn" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI" typeLanguage="http://www.w3.org/2001/XMLSchema" expressionLanguage="http://www.w3.org/1999/XPath" targetNamespace="http://activiti.org/test"><process id="CORPORATECREDITREVIEW" name="Corporate Credit Review" isExecutable="true"><documentation>Corporate Credit Review</documentation><startEvent id="startEvent1" name="Start"/><userTask id="sid-40177BF3-5C8D-4E13-8E55-93126967F234" name="CCR" activiti:actor="CCR" activiti:assignmentLevel="Role Queue"/><sequenceFlow id="sid-515123C5-CB7D-46E1-A063-D799D2FD178B" sourceRef="startEvent1" targetRef="sid-40177BF3-5C8D-4E13-8E55-93126967F234" representsUserAction="false" mandateNotes="false"/><serviceTask id="sid-5532A92C-4873-4D7C-B143-DB3C3A163CF9" name="Complete Process" activiti:operation="doApprove"/><endEvent id="sid-F4AF09CD-2EB1-424D-A5FA-EF81E7B014E8" name="End"/><exclusiveGateway id="sid-A4322A8F-BC65-426D-9928-816E149E5F68"/><serviceTask id="sid-3E2CFF23-532A-4A7C-9FF4-F93DC6F1B39B" name="Reject" activiti:operation="doReject"/><endEvent id="sid-E62880BF-36DA-43D7-98E7-8D49E33BB9C3" name="End"/><sequenceFlow id="sid-4B7910F8-E94A-43D4-8484-CEFF0485DF0E" sourceRef="sid-3E2CFF23-532A-4A7C-9FF4-F93DC6F1B39B" targetRef="sid-E62880BF-36DA-43D7-98E7-8D49E33BB9C3" representsUserAction="false" mandateNotes="false"/><sequenceFlow id="sid-CD2E2866-C3A5-40C4-A152-9280082949F8" sourceRef="sid-5532A92C-4873-4D7C-B143-DB3C3A163CF9" targetRef="sid-F4AF09CD-2EB1-424D-A5FA-EF81E7B014E8" representsUserAction="false" mandateNotes="false"/><sequenceFlow id="sid-CD1A6740-DA0B-498D-B7B6-2274046A6D08" sourceRef="sid-40177BF3-5C8D-4E13-8E55-93126967F234" targetRef="sid-A4322A8F-BC65-426D-9928-816E149E5F68" representsUserAction="false" mandateNotes="false"/><sequenceFlow id="sid-99EFE39E-CB76-42B5-A51A-B75F9B2DE167" name="Approve" sourceRef="sid-A4322A8F-BC65-426D-9928-816E149E5F68" targetRef="sid-5532A92C-4873-4D7C-B143-DB3C3A163CF9" action="Approve" state="Approved" representsUserAction="true" mandateNotes="false"><conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Approved'</conditionExpression></sequenceFlow><sequenceFlow id="sid-27DA2ED6-52C9-4B2A-A23F-2ADD1B8D6A9A" sourceRef="sid-A4322A8F-BC65-426D-9928-816E149E5F68" targetRef="sid-3E2CFF23-532A-4A7C-9FF4-F93DC6F1B39B" representsUserAction="false" mandateNotes="true"><conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Rejected'</conditionExpression></sequenceFlow><sequenceFlow id="sid-A945B357-BD12-4D7C-A570-901EB63BA094" name="Cancel" sourceRef="sid-40177BF3-5C8D-4E13-8E55-93126967F234" targetRef="sid-3E2CFF23-532A-4A7C-9FF4-F93DC6F1B39B" action="Cancel" state="Cancelled" representsUserAction="true" mandateNotes="true"><conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Cancelled'</conditionExpression></sequenceFlow></process><bpmndi:BPMNDiagram id="BPMNDiagram_CORPORATECREDITREVIEW"><bpmndi:BPMNPlane bpmnElement="CORPORATECREDITREVIEW" id="BPMNPlane_CORPORATECREDITREVIEW"><bpmndi:BPMNShape bpmnElement="startEvent1" id="BPMNShape_startEvent1"><omgdc:Bounds height="30.0" width="30.0" x="100.0" y="163.0"/></bpmndi:BPMNShape><bpmndi:BPMNShape bpmnElement="sid-40177BF3-5C8D-4E13-8E55-93126967F234" id="BPMNShape_sid-40177BF3-5C8D-4E13-8E55-93126967F234"><omgdc:Bounds height="80.0" width="100.0" x="175.0" y="138.0"/></bpmndi:BPMNShape><bpmndi:BPMNShape bpmnElement="sid-5532A92C-4873-4D7C-B143-DB3C3A163CF9" id="BPMNShape_sid-5532A92C-4873-4D7C-B143-DB3C3A163CF9"><omgdc:Bounds height="80.0" width="100.0" x="570.0" y="138.0"/></bpmndi:BPMNShape><bpmndi:BPMNShape bpmnElement="sid-F4AF09CD-2EB1-424D-A5FA-EF81E7B014E8" id="BPMNShape_sid-F4AF09CD-2EB1-424D-A5FA-EF81E7B014E8"><omgdc:Bounds height="28.0" width="28.0" x="870.0" y="164.0"/></bpmndi:BPMNShape><bpmndi:BPMNShape bpmnElement="sid-A4322A8F-BC65-426D-9928-816E149E5F68" id="BPMNShape_sid-A4322A8F-BC65-426D-9928-816E149E5F68"><omgdc:Bounds height="40.0" width="40.0" x="345.0" y="158.0"/></bpmndi:BPMNShape><bpmndi:BPMNShape bpmnElement="sid-3E2CFF23-532A-4A7C-9FF4-F93DC6F1B39B" id="BPMNShape_sid-3E2CFF23-532A-4A7C-9FF4-F93DC6F1B39B"><omgdc:Bounds height="80.0" width="100.0" x="315.0" y="269.0"/></bpmndi:BPMNShape><bpmndi:BPMNShape bpmnElement="sid-E62880BF-36DA-43D7-98E7-8D49E33BB9C3" id="BPMNShape_sid-E62880BF-36DA-43D7-98E7-8D49E33BB9C3"><omgdc:Bounds height="28.0" width="28.0" x="516.6666717529297" y="295.0"/></bpmndi:BPMNShape><bpmndi:BPMNEdge bpmnElement="sid-4B7910F8-E94A-43D4-8484-CEFF0485DF0E" id="BPMNEdge_sid-4B7910F8-E94A-43D4-8484-CEFF0485DF0E"><omgdi:waypoint x="415.0" y="309.0"/><omgdi:waypoint x="516.6666717529297" y="309.0"/></bpmndi:BPMNEdge><bpmndi:BPMNEdge bpmnElement="sid-CD2E2866-C3A5-40C4-A152-9280082949F8" id="BPMNEdge_sid-CD2E2866-C3A5-40C4-A152-9280082949F8"><omgdi:waypoint x="670.0" y="178.0"/><omgdi:waypoint x="870.0" y="178.0"/></bpmndi:BPMNEdge><bpmndi:BPMNEdge bpmnElement="sid-CD1A6740-DA0B-498D-B7B6-2274046A6D08" id="BPMNEdge_sid-CD1A6740-DA0B-498D-B7B6-2274046A6D08"><omgdi:waypoint x="275.0" y="178.0"/><omgdi:waypoint x="345.0" y="178.0"/></bpmndi:BPMNEdge><bpmndi:BPMNEdge bpmnElement="sid-515123C5-CB7D-46E1-A063-D799D2FD178B" id="BPMNEdge_sid-515123C5-CB7D-46E1-A063-D799D2FD178B"><omgdi:waypoint x="130.0" y="178.0"/><omgdi:waypoint x="175.0" y="178.0"/></bpmndi:BPMNEdge><bpmndi:BPMNEdge bpmnElement="sid-27DA2ED6-52C9-4B2A-A23F-2ADD1B8D6A9A" id="BPMNEdge_sid-27DA2ED6-52C9-4B2A-A23F-2ADD1B8D6A9A"><omgdi:waypoint x="365.42692307692306" y="197.57307692307694"/><omgdi:waypoint x="365.15325670498083" y="269.0"/></bpmndi:BPMNEdge><bpmndi:BPMNEdge bpmnElement="sid-99EFE39E-CB76-42B5-A51A-B75F9B2DE167" id="BPMNEdge_sid-99EFE39E-CB76-42B5-A51A-B75F9B2DE167"><omgdi:waypoint x="384.53740157480314" y="178.46259842519686"/><omgdi:waypoint x="570.0" y="178.098231827112"/></bpmndi:BPMNEdge><bpmndi:BPMNEdge bpmnElement="sid-A945B357-BD12-4D7C-A570-901EB63BA094" id="BPMNEdge_sid-A945B357-BD12-4D7C-A570-901EB63BA094"><omgdi:waypoint x="225.0" y="218.0"/><omgdi:waypoint x="225.0" y="309.0"/><omgdi:waypoint x="315.0" y="309.0"/></bpmndi:BPMNEdge></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></definitions>]]></column>
			<where>workflowtype='CORPORATECREDITREVIEW'and workflowactive=1
			</where>
		</update>
	</changeSet>
	<changeSet id="20" author="Vasu">
		<sql>
			UPDATE SeqWorkFlowDetails SET SEQNO= (SELECT MAX(WorkflowId)+1 FROM workflowdetails);
		</sql>
	</changeSet> 
	<changeSet id="21" author="Srikanth.m">
	<renameColumn tableName="MANDATE_REQUESTS" oldColumnName="AUXILIARY_FIELD1" newColumnName="NUMBER_OF_TERMS"/>
	<renameColumn tableName="MANDATE_REQUESTS" oldColumnName="AUXILIARY_FIELD2" newColumnName="FREQUENCY"/>
	<renameColumn tableName="MANDATE_RESPONSE" oldColumnName="AUXILIARY_FIELD1" newColumnName="NUMBER_OF_TERMS"/>
	<renameColumn tableName="MANDATE_RESPONSE" oldColumnName="AUXILIARY_FIELD2" newColumnName="FREQUENCY"/>
	</changeSet>
	<changeSet id="22" author="Srikanth.m">
	<createView viewName="INT_MANDATE_REQUEST_VIEW" replaceIfExists="true">
	SELECT M.MANDATEID, 
			BD.BANKSHORTCODE BANKCODE,
			BD.BANKNAME,
			case when LB.BRANCHCODE IS NULL THEN CB.BRANCHCODE ELSE LB.BRANCHCODE END BRANCHCODE,
      		case when LB.BRANCHDESC IS NULL THEN CB.BRANCHDESC ELSE LB.BRANCHDESC END BRANCHDESC,
			CUST.CUSTCIF,
			CUST.CUSTSHRTNAME,
			FT.FINTYPEDESC FINTYPE ,
			FIN.FINREFERENCE ,
			COALESCE((SELECT SUM(TotalAmount) from (Select MAX(FSD.REPAYAMOUNT+FSD.FEESCHD) TotalAmount 
													FROM FINSCHEDULEDETAILS FSD 
													INNER JOIN FINANCEMAIN FM ON FM.FINREFERENCE =FSD.FINREFERENCE AND FM.CUSTID = M.CUSTID 
													GROUP BY FM.FINREFERENCE)T)/CCYMINORCCYUNITS, 0) CUST_EMI,
			COALESCE((SELECT SUM(TotalAmount) from (Select MAX(FSD.REPAYAMOUNT+FSD.FEESCHD) TotalAmount FROM FINSCHEDULEDETAILS FSD WHERE (REPAYONSCHDATE = 1 OR PFTONSCHDATE = 1) AND FINREFERENCE IN (SELECT FINREFERENCE FROM FINANCEMAIN WHERE MANDATEID = M.MANDATEID) GROUP BY FINREFERENCE)T)/CCYMINORCCYUNITS, 0) EMI,
			  CASE M.OPENMANDATE
			    WHEN 1
			    THEN 'New Open ECS'
			    ELSE 'No Open ECS'
			  END OPENMANDATE,
			M.ACCNUMBER,
			CASE WHEN M.ACCTYPE = '10' then 'Savings Account' WHEN M.ACCTYPE = '11' then 'Current Account' WHEN M.ACCTYPE = '11' then 'Cash Credit Account' ELSE  M.ACCTYPE END ACCTYPE,
			M.ACCHOLDERNAME,
			BB.MICR,
			BB.IFSC,
			BB.ADDOFBRANCH,
			(select MIN(FIRSTREPAYDATE) from FINPFTDETAILS where FINREFERENCE IN (SELECT FINREFERENCE FROM FINANCEMAIN WHERE MANDATEID=M.MANDATEID)) FIRSTDUEDATE,
			(select MAX(SCHDATE) from FINSCHEDULEDETAILS where (REPAYONSCHDATE = 1 OR PFTONSCHDATE = 1) and FINREFERENCE IN (SELECT FINREFERENCE FROM FINANCEMAIN WHERE MANDATEID=M.MANDATEID)) EMIENDDATE,
			 COALESCE (M.MAXLIMIT/CCYMINORCCYUNITS, 0) MAXLIMIT, 
     		 COALESCE((SELECT SUM(MANDATEDEBITAMOUNT) from (Select MAX(REPAYAMOUNT+FEESCHD) MANDATEDEBITAMOUNT FROM FINSCHEDULEDETAILS WHERE (REPAYONSCHDATE = 1 OR PFTONSCHDATE = 1) AND FINREFERENCE IN (SELECT FINREFERENCE FROM FINANCEMAIN WHERE MANDATEID=M.MANDATEID)
     		 GROUP BY FINREFERENCE)T), 0)/CCYMINORCCYUNITS DEBITAMOUNT,
         (select max(numberofterms) from Financemain where FINREFERENCE IN (SELECT FINREFERENCE FROM FINANCEMAIN WHERE MANDATEID=M.MANDATEID)) numberofterms,
        M.periodicity,
			  M.STARTDATE,
			  M.EXPIRYDATE,
			  FIN.APPLICATIONNO,
			  M.MANDATETYPE,
			  M.STATUS,
			  M.INPUTDATE,
			  M.RECORDSTATUS,
			  M.RECORDTYPE,
        	M.MANDATECCY,
			  COALESCE (CCY.CCYMINORCCYUNITS, 100) CCYMINORCCYUNITS,M.EntityCode,
              CP.PHONENUMBER,
			CE.CUSTEMAIL
			FROM MANDATES M
			INNER JOIN BANKBRANCHES BB ON BB.BANKBRANCHID = M.BANKBRANCHID
			INNER JOIN BMTBANKDETAIL BD ON BD.BANKCODE=BB.BANKCODE 
			INNER JOIN CUSTOMERS CUST   ON CUST.CUSTID = M.CUSTID
			INNER JOIN RMTBRANCHES CB ON CB.BRANCHCODE = CUST.CUSTDFTBRANCH 
			LEFT JOIN CUSTOMEREMAILS CE ON CE.CUSTID = CUST.CUSTID AND CE.CUSTEMAILPRIORITY = 5
			LEFT JOIN CUSTOMERPHONENUMBERS CP ON CP.PHONECUSTID = CUST.CUSTID AND CP.PHONETYPEPRIORITY = 5
			LEFT OUTER JOIN RMTCURRENCIES CCY ON CCY.CCYCODE = M.MANDATECCY
			LEFT OUTER JOIN FINANCEMAIN FIN ON M.ORGREFERENCE=FIN.FINREFERENCE
			LEFT JOIN RMTBRANCHES LB ON LB.BRANCHCODE = FIN.FINBRANCH 
			LEFT OUTER JOIN RMTFINANCETYPES FT ON FIN.FINTYPE =FT.FINTYPE 
			WHERE M.STATUS = 'NEW' AND M.MANDATEID NOT IN  (select MANDATEID FROM MANDATE_REQUESTS where (status = 'AC' OR status = 'NEW'))
	</createView>
	</changeSet>
	<changeSet id="23" author="Vijaykumar.l">
		<sql>
			update ExtendedFieldHeader set modulename='VAS' where modulename='Vas';
			update ExtendedFieldHeader_Temp set modulename='VAS' where modulename='Vas';
		</sql>
	</changeSet>
	<changeSet id="24" author="Kesav">
		<comment>RBFieldDetails and Stage Accouting Rule Rights</comment>
		<sql>
			Delete from RBFieldDetails where RBModule = 'STGRULE' and  RBEvent ='STGRULE' and RBFldName = 'fm_productCategory';
			Delete from RBFieldDetails where RBModule = 'STGRULE' and  RBEvent ='STGRULE' and RBFldName = 'fm_finType';
			Delete from RBFieldDetails where RBModule = 'STGRULE' and  RBEvent ='STGRULE' and RBFldName = 'ft_product';
			Delete from RBFieldDetails where RBModule = 'STGRULE' and  RBEvent ='STGRULE' and RBFldName = 'rd_paymentType';
			
			Insert into RBFieldDetails Values ('STGRULE','STGRULE','fm_productCategory','Product Category','nvarchar',8,'0','1',' ','static,global',' ');
			Insert into RBFieldDetails Values ('STGRULE','STGRULE','fm_finType','Loan Type','nvarchar',8,'0','1','RMTFinanceTypes','static,global,dbvalue','FinanceType');	
			Insert into RBFieldDetails Values ('STGRULE','STGRULE','ft_product', 'Product','nvarchar',8, 0,0, 'Product','static,global,dbvalue', 'Product');
			Insert into RBFIELDDETAILS values ('STGRULE','STGRULE','rd_paymentType','Payment Type','nvarchar',8,'0','1',' ','static,global',' ');
			
			Update SeqSecGroups Set SeqNo = (Select MAX(GrpID) + 1 from SecGroups);
			Update SeqSecRights Set SeqNo = (Select MAX(RightID) + 1 from SecRights);
			Update SeqSecGroupRights Set SeqNo = (Select MAX(GrpRightID) + 1 from SecGroupRights);
			Update SeqSecRoleGroups Set SeqNo = (Select MAX(RoleGrpID) + 1 from SecRoleGroups);
			
			Delete from SecGroupRights where GrpID In (Select GrpID from SecGroups where GrpCode = 'StageAccountingRule_Maker');
			Delete from SecRoleGroups where GrpID IN (Select GrpId from SecGroups WHERE GrpCode = 'StageAccountingRule_Maker') And RoleID IN (Select RoleID from SecRoles WHERE RoleCd = 'MSTGRP1_MAKER');
			Delete from SecGroups where GrpCode = 'StageAccountingRule_Maker';
			INSERT INTO SecGroups Values ((Select MAX(GrpID)+1 From SecGroups), 'StageAccountingRule_Maker','WF Maker for Rules', 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL,0);
			
			Insert into secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'StageAccountingRule_Maker'), (Select RightID from SecRights where RightName = 'RuleDialog_ruleCode'), 1, 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			INSERT INTO SecRoleGroups values ((SELECT MAX(RoleGrpID) + 1 from SecRoleGroups), (Select MAX(GrpId) from SecGroups WHERE GrpCode = 'StageAccountingRule_Maker'), (Select MAX(RoleID) from SecRoles WHERE RoleCd = 'MSTGRP1_MAKER'), 0, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
			
			Insert into secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'StageAccountingRule_Maker'), (Select RightID from SecRights where RightName = 'RuleDialog_ruleCodeDesc'), 1, 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			
			Insert into secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'StageAccountingRule_Maker'), (Select RightID from SecRights where RightName = 'RuleDialog_ruleEvent'), 1, 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			
			Insert into secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'StageAccountingRule_Maker'), (Select RightID from SecRights where RightName = 'RuleDialog_returnType'), 1, 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			
			Insert into secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'StageAccountingRule_Maker'), (Select RightID from SecRights where RightName = 'RuleDialog_active'), 1, 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			
			Insert into secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'StageAccountingRule_Maker'), (Select RightID from SecRights where RightName = 'RuleDialog_ruleModule'), 1, 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			
			Insert into secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'StageAccountingRule_Maker'), (Select RightID from SecRights where RightName = 'RuleDialog_sqlRule'), 1, 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			
			Insert into secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'StageAccountingRule_Maker'), (Select RightID from SecRights where RightName = 'button_RuleDialog_btnNew'), 1, 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			
			Insert into secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'StageAccountingRule_Maker'), (Select RightID from SecRights where RightName = 'button_RuleDialog_btnEdit'), 1, 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			
			Insert into secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'StageAccountingRule_Maker'), (Select RightID from SecRights where RightName = 'button_RuleDialog_btnDelete'), 1, 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			
			Insert into secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'StageAccountingRule_Maker'), (Select RightID from SecRights where RightName = 'button_RuleDialog_btnSave'), 1, 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			
			Insert into secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'StageAccountingRule_Maker'), (Select RightID from SecRights where RightName = 'menuCat_RulesFactory'), 1, 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			
			Delete from SecGroupRights where RightID In (Select RightID from SecRights where RightName = 'menuItem_RulesFactory_StageAccountingRule');
			Delete from SecRights where RightName = 'menuItem_RulesFactory_StageAccountingRule';
			Insert into SecRights Values((Select max(RightID) + 1 from SecRights), 0, 'menuItem_RulesFactory_StageAccountingRule', 'MENU', 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			Insert into secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'StageAccountingRule_Maker'), (Select RightID from SecRights where RightName = 'menuItem_RulesFactory_StageAccountingRule'), 1, 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			
			Delete from SecGroupRights where RightID In (Select RightID from SecRights where RightName = 'button_RuleList_NewStageAccountingRule');
			Delete from SecRights where RightName = 'button_RuleList_NewStageAccountingRule';
			Insert into SecRights Values((Select max(RightID) + 1 from SecRights), 2, 'button_RuleList_NewStageAccountingRule', 'RuleList', 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			Insert into secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'StageAccountingRule_Maker'), (Select RightID from SecRights where RightName = 'button_RuleList_NewStageAccountingRule'), 1, 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			
			Delete from SecGroupRights where GrpID In (Select GrpID from SecGroups where GrpCode = 'StageAccountingRule_Approver');
			Delete from SecRoleGroups where GrpID IN (Select GrpId from SecGroups WHERE GrpCode = 'StageAccountingRule_Approver') And RoleID IN (Select RoleID from SecRoles WHERE RoleCd = 'MSTGRP1_APPROVER');
			Delete from SecGroups where GrpCode = 'StageAccountingRule_Approver';
			INSERT INTO SecGroups Values ((Select MAX(GrpID)+1 From SecGroups), 'StageAccountingRule_Approver','WF Approver for Rules', 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL,0);
			
			Insert into secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'StageAccountingRule_Approver'), (Select RightID from SecRights where RightName = 'button_RuleDialog_btnSave'), 1, 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			INSERT INTO SecRoleGroups values ((SELECT MAX(RoleGrpID) + 1 from SecRoleGroups), (Select MAX(GrpId) from SecGroups WHERE GrpCode = 'StageAccountingRule_Approver'), (Select MAX(RoleID) from SecRoles WHERE RoleCd = 'MSTGRP1_APPROVER'), 0, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
			
			Insert into secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'StageAccountingRule_Approver'), (Select RightID from SecRights where RightName = 'menuCat_RulesFactory'), 1, 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			
			Insert into secGroupRights Values((Select max(GrpRightID) + 1 from SecGroupRights), (Select GrpID from SecGroups where GrpCode = 'StageAccountingRule_Approver'), (Select RightID from SecRights where RightName = 'menuItem_RulesFactory_StageAccountingRule'), 1, 1, 1000, CURRENT_TIMESTAMP, null, null, null, null, null, null, 0 );
			
			Update SeqSecGroups Set SeqNo = (Select MAX(GrpID) + 1 from SecGroups);
			Update SeqSecRights Set SeqNo = (Select MAX(RightID) + 1 from SecRights);
			Update SeqSecGroupRights Set SeqNo = (Select MAX(GrpRightID) + 1 from SecGroupRights);
			Update SeqSecRoleGroups Set SeqNo = (Select MAX(RoleGrpID) + 1 from SecRoleGroups);
		</sql>
	</changeSet>
	<changeSet id="25" author="Kesav">
		<createView viewName="LMTFINREFDETAIL_ACVIEW" replaceIfExists="true">
			SELECT  t1.finrefdetailid,
				    t1.fintype,
				    t1.finreftype,
				    t1.finrefid,
				    t1.isactive,
				    t1.showinstage,
				    t1.mandinputinstage,
				    t1.allowinputinstage,
				    t1.allowdeviation,
				    t1.allowwaiver,
				    t1.allowpostpone,
				    t1.allowexpire,
				    t1.version,
				    t1.lastmntby,
				    t1.lastmnton,
				    t1.recordstatus,
				    t1.rolecode,
				    t1.nextrolecode,
				    t1.taskid,
				    t1.nexttaskid,
				    t1.recordtype,
				    t1.workflowid,
				    COALESCE(t2.fintypedesc, t4.collateraldesc, t5.productdesc) AS lovdescfintypedescname,
				    t1.override,
				    t1.overridevalue,
				    t1.finevent,
				    t1.alerttype,
					t3.rulecode AS lovdescnamelov,
				    t3.rulecode AS lovdesccodelov,
				    t3.rulecodedesc AS lovdescrefdesc,
				    t3.sqlrule AS lovDescStgRuleValue
				   FROM lmtfinrefdetail t1
				     LEFT JOIN rmtfinancetypes t2 ON t1.fintype = t2.fintype
				     LEFT JOIN collateralstructure t4 ON t1.fintype = t4.collateraltype
				     LEFT JOIN vasstructure t5 ON t1.fintype = t5.productcode
					 JOIN rules t3 ON t1.finrefid = t3.ruleid AND t1.finreftype = 5		
		</createView>
	</changeSet>
	<changeSet id="26" author="Kesav">
		<createView viewName="LMTFINREFDETAIL_TCVIEW" replaceIfExists="true">
			SELECT  t1.finrefdetailid,
				    t1.fintype,
				    t1.finreftype,
				    t1.finrefid,
				    t1.isactive,
				    t1.showinstage,
				    t1.mandinputinstage,
				    t1.allowinputinstage,
				    t1.allowdeviation,
				    t1.allowwaiver,
				    t1.allowpostpone,
				    t1.allowexpire,
				    t1.version,
				    t1.lastmntby,
				    t1.lastmnton,
				    t1.recordstatus,
				    t1.rolecode,
				    t1.nextrolecode,
				    t1.taskid,
				    t1.nexttaskid,
				    t1.recordtype,
				    t1.workflowid,
				    COALESCE(t2.fintypedesc, t4.collateraldesc, t5.productdesc) AS lovdescfintypedescname,
				    t1.override,
				    t1.overridevalue,
				    t1.finevent,
				    t1.alerttype,
					t3.rulecode AS lovdescnamelov,
				    t3.rulecode AS lovdesccodelov,
				    t3.rulecodedesc AS lovdescrefdesc,
				    t3.sqlrule AS lovDescStgRuleValue
				   FROM lmtfinrefdetail_temp t1
				     LEFT JOIN rmtfinancetypes t2 ON t1.fintype = t2.fintype
				     LEFT JOIN collateralstructure t4 ON t1.fintype = t4.collateraltype
				     LEFT JOIN vasstructure t5 ON t1.fintype = t5.productcode
					 JOIN rules t3 ON t1.finrefid = t3.ruleid AND t1.finreftype = 5
				UNION ALL
				 SELECT t1.finrefdetailid,
				    t1.fintype,
				    t1.finreftype,
				    t1.finrefid,
				    t1.isactive,
				    t1.showinstage,
				    t1.mandinputinstage,
				    t1.allowinputinstage,
				    t1.allowdeviation,
				    t1.allowwaiver,
				    t1.allowpostpone,
				    t1.allowexpire,
				    t1.version,
				    t1.lastmntby,
				    t1.lastmnton,
				    t1.recordstatus,
				    t1.rolecode,
				    t1.nextrolecode,
				    t1.taskid,
				    t1.nexttaskid,
				    t1.recordtype,
				    t1.workflowid,
				    COALESCE(t2.fintypedesc, t4.collateraldesc, t5.productdesc) AS lovdescfintypedescname,
				    t1.override,
				    t1.overridevalue,
				    t1.finevent,
				    t1.alerttype,
					t3.rulecode AS lovdescnamelov,
				    t3.rulecode AS lovdesccodelov,
				    t3.rulecodedesc AS lovdescrefdesc,
				    t3.sqlrule AS lovDescStgRuleValue
				   FROM lmtfinrefdetail t1
				     LEFT JOIN rmtfinancetypes t2 ON t1.fintype = t2.fintype
				     LEFT JOIN collateralstructure t4 ON t1.fintype = t4.collateraltype
				     LEFT JOIN vasstructure t5 ON t1.fintype = t5.productcode
					 JOIN rules t3 ON t1.finrefid = t3.ruleid AND t1.finreftype = 5
				  WHERE NOT (EXISTS ( SELECT 1 AS expr1
				           FROM lmtfinrefdetail_temp
				          WHERE lmtfinrefdetail_temp.finrefdetailid = t1.finrefdetailid))	
		</createView>
	</changeSet>
	
	<changeSet id="24" author="Manoj" dbms="postgresql">
		<dropSequence sequenceName="cibil_file_info_id_seq"/>
	</changeSet>
	
	<changeSet id="25.1" author="Manoj" dbms="postgresql">
		<createSequence sequenceName="cibil_file_info_id_seq"/>
	</changeSet>
	<changeSet id="25" author="Manoj" dbms="postgresql">
		<sql>
			ALTER TABLE cibil_file_info ALTER COLUMN id SET DEFAULT nextval('cibil_file_info_id_seq');
		</sql>
	</changeSet>
	
	
	<changeSet id="27" author="Manoj">
		<sql>
			Insert into data_engine_config (ID,NAME,DESCRIPTION,PARSER,WORKSHEET,TEXTQUALIFIER,ROWDELIMITER,COLUMNDELIMITER,STARTINGROW,SKIPHEADERROW,FIELDNAMES,HEADER,TRAILER,UPLOADLOCATION,UPLOADPATH,FILEPREFIXNAME,FILEEXTENSION,FILESEQUENCENO,LASTPROCESSEDON,FILENAMEFORMAT,CRONEXPRESSION,NOTIFICATIONSTATUSEMAIL,POSTEVENT,BACKUPFILE,ACTIVE) values ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG),'CIBIL_REPORT','Cibil Report',5,null,null,null,null,0,0,
			'', '', '','A',null,'DBFILE',null,0,null,null,null,'0',null,1,1);	
		</sql>
	</changeSet>
	
	<changeSet id="28" author="Manoj">
		<createView viewName="CIBIL_CUSTOMER_LOANS_VIEW" replaceIfExists="true">
			SELECT  
				CU.CUSTID,
				COALESCE(AT.CODE, '00') FINTYPE,
				FM.FINREFERENCE, 
				FM.FINSTARTDATE,
				FM.FINAPPROVEDDATE,
				PD.LATESTRPYDATE,
				UDF_CONVERTCURRENCY(FINASSETVALUE, FM.FINCCY, 'INR') FINASSETVALUE,
				UDF_CONVERTCURRENCY(PD.TOTALPRIBAL, FM.FINCCY, 'INR') FUTURE_SCHEDULE_PRIN,
				UDF_CONVERTCURRENCY((PD.ODPRINCIPAL + PD.ODPROFIT), FM.FINCCY, 'INR') INSTALMENT_DUE,
				UDF_CONVERTCURRENCY((PD.TOTALPFTPAID + PD.TOTALPRIPAID), FM.FINCCY, 'INR') INSTALMENT_PAID,
				UDF_CONVERTCURRENCY(BOUNCE_DUE, FM.FINCCY, 'INR') BOUNCE_DUE,
				UDF_CONVERTCURRENCY(BOUNCE_PAID, FM.FINCCY, 'INR') BOUNCE_PAID,
				UDF_CONVERTCURRENCY(LATE_PAYMENT_PENALTY_DUE, FM.FINCCY, 'INR') LATE_PAYMENT_PENALTY_DUE,
				UDF_CONVERTCURRENCY(LATE_PAYMENT_PENALTY_PAID,FM.FINCCY, 'INR') LATE_PAYMENT_PENALTY_PAID,
				UDF_CONVERTCURRENCY(TOTALPRISCHD, FM.FINCCY, 'INR') TOTAL_PRI_SCHD,
				UDF_CONVERTCURRENCY(TOTALPRIPAID, FM.FINCCY, 'INR') TOTAL_PRI_PAID,
				UDF_CONVERTCURRENCY(TOTALPFTSCHD, FM.FINCCY, 'INR') TOTAL_PFT_SCHD,
				UDF_CONVERTCURRENCY(TOTALPFTPAID, FM.FINCCY, 'INR') TOTAL_PFT_PAID,
				UDF_CONVERTCURRENCY(EXCESS_AMOUNT, FM.FINCCY, 'INR') EXCESS_AMOUNT,
				UDF_CONVERTCURRENCY(EXCESS_AMT_PAID, FM.FINCCY, 'INR') EXCESS_AMT_PAID,
				PD.CURODDAYS,
				FM.CLOSINGSTATUS,
				CU.OWNERSHIP,
				UDF_CONVERTCURRENCY(CUSTINCOME, FM.FINCCY, 'INR') CUSTINCOME
       	FROM  FINANCEMAIN FM 
				INNER JOIN CIBIL_CUSTOMER_EXTRACT CU ON  CU.FINREFERENCE = FM.FINREFERENCE 
				INNER JOIN FINPFTDETAILS PD ON PD.FINREFERENCE = FM.FINREFERENCE				
				LEFT JOIN CIBIL_ACCOUNT_TYPES_MAPPING ATM ON ATM.FINTYPE = FM.FINTYPE
				LEFT JOIN CIBIL_ACCOUNT_TYPES AT ON AT.CODE = ATM.CODE
				LEFT JOIN (SELECT MA.FINREFERENCE, SUM(COALESCE(MA.ADVISEAMOUNT,0)- COALESCE(MA.PAIDAMOUNT,0)- COALESCE(MA.WAIVEDAMOUNT,0)) BOUNCE_DUE, SUM(MA.PAIDAMOUNT) BOUNCE_PAID FROM MANUALADVISE  MA  WHERE BOUNCEID > 0 GROUP BY MA.FINREFERENCE) MA ON MA.FINREFERENCE = FM.FINREFERENCE
				LEFT JOIN (SELECT FINREFERENCE, SUM(TOTPENALTYBAL) LATE_PAYMENT_PENALTY_DUE, SUM(TOTPENALTYPAID) LATE_PAYMENT_PENALTY_PAID FROM FINODDETAILS GROUP BY FINREFERENCE) FO ON FO.FINREFERENCE = FM.FINREFERENCE
				LEFT JOIN (SELECT FINREFERENCE, SUM(AMOUNT) EXCESS_AMOUNT, SUM (COALESCE(UTILISEDAMT,0)+ COALESCE(RESERVEDAMT,0)) EXCESS_AMT_PAID FROM FINEXCESSAMOUNT  GROUP BY FINREFERENCE) FE ON FE.FINREFERENCE = FM.FINREFERENCE
				LEFT JOIN  (SELECT CUSTID, COALESCE(SUM(CUSTINCOME), 0) CUSTINCOME FROM CUSTOMERINCOMES GROUP BY CUSTID) CI ON CI.CUSTID = CU.CUSTID
		</createView>
	</changeSet>
	<changeSet id="29" author="MAnoj">
		<createView viewName="CIBIL_FILE_INFO_VIEW" replaceIfExists="true">
			  select ID, FILE_NAME, CREATEDON, STATUS, FILE_LOCATION, (select id from data_engine_config where name = 'CIBIL_REPORT') configId, null  POSTEVENT  
				FROM CIBIL_FILE_INFO
		</createView>
	</changeSet>
	<changeSet id="30_Pre" author="Jayant" dbms="postgresql">
		<sql>
			select deps_save_and_drop_dependencies('plf','cashdenominations');
			select deps_save_and_drop_dependencies('plf','cashdenominations_temp');
		</sql>
	</changeSet>
	<changeSet author="Kesav" id="30">
		<comment>data type modified from decimal(10,0) to decimal(18,0)</comment>
		<modifyDataType tableName="CashDenominations_Temp" columnName="Amount" newDataType="decimal(18,0)" />
	</changeSet>
	<changeSet author="Kesav" id="31">
		<comment>data type modified from decimal(10,0) to decimal(18,0)</comment>
		<modifyDataType tableName="CashDenominations" columnName="Amount" newDataType="decimal(18,0)" />
	</changeSet>
	<changeSet id="30_Post" author="Jayant" dbms="postgresql">
		<sql>
			select deps_restore_dependencies('plf','cashdenominations');
			select deps_restore_dependencies('plf','cashdenominations_temp');
		</sql>
	</changeSet>
	<changeSet id="31" author="Manoj">
		<sql>
			Delete from smtparameters where sysparmcode = 'CIBIL_SOCKET_TIMEOUT';
			Insert into SMTPARAMETERS  values ('CIBIL_SOCKET_TIMEOUT','Socket timeout to CIBIL','int',1,'45000',30,0,null,null,'Socket timeout to CIBIL',1,1000,CURRENT_TIMESTAMP,'Approved',null,null,null,null,null,0);
		</sql>
	</changeSet>
	<changeSet id="35" author="Manoj">
		<createView viewName="cibil_customer_extarct_view" replaceIfExists="true">
		select C.CUSTID, FM.FINREFERENCE, case when FM.FINREFERENCE is null then 4 else 1 end ownership, PD.LATESTRPYDATE from FINANCEMAIN FM
				INNER JOIN CUSTOMERS C ON C.CUSTID = FM.CUSTID
				INNER JOIN FINPFTDETAILS PD ON PD.FINREFERENCE = FM.FINREFERENCE
				INNER JOIN RMTFINANCETYPES RFT ON RFT.FINTYPE = PD.FINTYPE
				where C.custid in (select distinct custid  from financemain) 
				and CUSTTYPECODE IN (select CUSTTYPECODE from RMTCUSTTYPES WHERE CUSTTYPECTG = 'RETAIL')
		UNION ALL
			 select C.CUSTID, FM.FINREFERENCE, 3 OWNERSHIP, PD.LATESTRPYDATE  from FINGUARANTORSDETAILS GD
				INNER JOIN CUSTOMERS C ON C.CUSTCIF = GD.GUARANTORCIF
				INNER JOIN FINANCEMAIN FM ON FM.FINREFERENCE = GD.FINREFERENCE
				INNER JOIN FINPFTDETAILS PD ON PD.FINREFERENCE = GD.FINREFERENCE
				INNER JOIN RMTFINANCETYPES RFT ON RFT.FINTYPE = PD.FINTYPE
				where C.custid in (select distinct custid  from financemain) 
				and CUSTTYPECODE IN (select CUSTTYPECODE from RMTCUSTTYPES WHERE CUSTTYPECTG = 'RETAIL')  
		UNION ALL
			select  C.CUSTID, FM.FINREFERENCE, 4 OWNERSHIP, PD.LATESTRPYDATE from FINJOINTACCOUNTDETAILS JA
				INNER JOIN CUSTOMERS C ON C.CUSTCIF = JA.CUSTCIF
				INNER JOIN FINANCEMAIN FM ON FM.FINREFERENCE = JA.FINREFERENCE
				INNER JOIN FINPFTDETAILS PD ON PD.FINREFERENCE = JA.FINREFERENCE
				INNER JOIN RMTFINANCETYPES RFT ON RFT.FINTYPE = PD.FINTYPE
				where C.custid in (select distinct custid  from financemain) 
				and CUSTTYPECODE IN (select CUSTTYPECODE from RMTCUSTTYPES WHERE CUSTTYPECTG = 'RETAIL')
		</createView>
	</changeSet>
	<changeSet id="36" author="Jayant">
		<sql>
			update workflowdetails set WorkFlowActive='0' where WorkFlowType='RECEIPT_PROCESS';
		</sql>
		<insert tableName="WorkFlowDetails">
			<column name="WorkFlowId" valueComputed="(select max(Seqno) + 1 from SeqWorkFlowDetails)"/>
			<column name="WorkFlowType">RECEIPT_PROCESS</column>
			<column name="WorkFlowSubType">Receipt Workflow Process</column>
			<column name="WorkFlowDesc">Receipt Workflow Process</column>
			<column name="JsonDesign" type="nclob"><![CDATA[NULL]]></column>
			<column name="SvgDesign" type="nclob"><![CDATA[NULL]]></column>
            <column name="WorkFlowXml" type="clob"><![CDATA[NULL]]></column>
			<column name="WorkFlowRoles">RECEIPT_MAKER;RECEIPT_APPROVER;DEPOSIT_MAKER;DEPOSIT_APPROVER;RECEIPTWAIVER_APPROVER;RECEIPTREALIZE_MAKER;RECEIPTREALIZE_APPROVER</column>
			<column name="FirstTaskOwner">RECEIPT_MAKER</column>
			<column name="WorkFlowActive">1</column>
			<column name="Version">5</column>
			<column name="LastMntBy">1000</column>		
			<column name="LastMntOn" valueDate="current_timestamp"/>
			<column name="RecordStatus">Null</column>
			<column name="RoleCode"></column>
			<column name="NextRoleCode"></column>
			<column name="TaskId"></column>
			<column name="NextTaskId"></column>	
     		<column name="RecordType">NULL</column>		
		</insert>	
	</changeSet>
	<changeSet id="37" author="Jayant">
		<update tableName="WORKFLOWDETAILS">
			<column name="JSONDESIGN" type="NCLOB"><![CDATA['{"resourceId":901,"properties":{"process_id":"RECEIPT_PROCESS","name":"Receipt Workflow Process","documentation":"Receipt Workflow Process","category":"","listenerclass":"","listenerentitytype":""},"stencil":{"id":"BPMNDiagram"},"childShapes":[{"resourceId":"startEvent1","properties":{"overrideid":"","name":"Start"},"stencil":{"id":"StartNoneEvent"},"childShapes":[],"outgoing":[{"resourceId":"sid-1A2E482C-719D-41EA-B0FE-E65632AF6E1E"}],"bounds":{"lowerRight":{"x":45,"y":293},"upperLeft":{"x":15,"y":263}},"dockers":[]},{"resourceId":"sid-43C4D486-53F4-43EE-8890-6E0B39D9FBEE","properties":{"overrideid":"","name":"Receipt Maker","usertaskassignment":{"assignment":{"type":"idm","idm":{"type":"user","assignee":{"email":"RECEIPT_MAKER","firstName":"RECEIPT_MAKER","fullName":"RECEIPT_MAKER","id":"RECEIPT_MAKER","roledesc":"Receipt Maker","$$hashKey":"object:1619"}}}},"additionalforms":"","formkeydefinition":"","prioritydefinition":"Role Queue","baseactor":"","duedatedefinition":"","multiinstance_type":"None","isforcompensation":"false"},"stencil":{"id":"UserTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-FE23F595-73C2-47DB-A31B-CD758E49AA68"},{"resourceId":"sid-6C41A0AB-DBE3-4EDB-B674-AFF127DB0548"}],"bounds":{"lowerRight":{"x":175,"y":318},"upperLeft":{"x":75,"y":238}},"dockers":[]},{"resourceId":"sid-1A2E482C-719D-41EA-B0FE-E65632AF6E1E","properties":{"overrideid":"","name":"","repruseaction":"false","conditionsequenceflow":"","defaultflow":"false","action":"","state":"","mandatenotes":"false","capturereasons":"false","typeofreason":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-43C4D486-53F4-43EE-8890-6E0B39D9FBEE"}],"bounds":{"lowerRight":{"x":74.2734375,"y":278},"upperLeft":{"x":45.84375,"y":278}},"dockers":[{"x":15,"y":15},{"x":50,"y":40}],"target":{"resourceId":"sid-43C4D486-53F4-43EE-8890-6E0B39D9FBEE"}},{"resourceId":"sid-5C4B46F9-6C61-4C8C-98C8-CC81C72B618A","properties":{"overrideid":"","name":"","sequencefloworder":""},"stencil":{"id":"ExclusiveGateway"},"childShapes":[],"outgoing":[{"resourceId":"sid-6BF26389-B381-4950-9B81-6B52AB90EA18"},{"resourceId":"sid-6CCDF610-430F-4A2F-8A50-FB551150F050"}],"bounds":{"lowerRight":{"x":385,"y":298},"upperLeft":{"x":345,"y":258}},"dockers":[]},{"resourceId":"sid-0B14EAF0-64A0-4C4E-9F83-A658A77B1421","properties":{"overrideid":"","name":"Receipt Approver","usertaskassignment":{"assignment":{"type":"idm","idm":{"type":"user","assignee":{"email":"RECEIPT_APPROVER","firstName":"RECEIPT_APPROVER","fullName":"RECEIPT_APPROVER","id":"RECEIPT_APPROVER","roledesc":"Receipt Approver","$$hashKey":"object:7717"}}}},"additionalforms":"Accounting","formkeydefinition":"","prioritydefinition":"Role Queue","baseactor":"","duedatedefinition":"","multiinstance_type":"None","isforcompensation":"false"},"stencil":{"id":"UserTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-729F80E4-7F36-4EA2-BB13-6DA473946766"}],"bounds":{"lowerRight":{"x":640,"y":318},"upperLeft":{"x":540,"y":238}},"dockers":[]},{"resourceId":"sid-BD6333A4-9B0F-4A69-8EAD-041C9D122A28","properties":{"overrideid":"","name":"","sequencefloworder":""},"stencil":{"id":"ExclusiveGateway"},"childShapes":[],"outgoing":[{"resourceId":"sid-5282CF49-8005-4720-8393-3A287EE7B387"},{"resourceId":"sid-1D5BDDF0-B122-424E-95CD-A80D394BE48E"},{"resourceId":"sid-5BB54BDC-C45D-419B-BDB6-65AD7E027278"}],"bounds":{"lowerRight":{"x":725,"y":298},"upperLeft":{"x":685,"y":258}},"dockers":[]},{"resourceId":"sid-729F80E4-7F36-4EA2-BB13-6DA473946766","properties":{"overrideid":"","name":"","repruseaction":"false","conditionsequenceflow":"","defaultflow":"false","action":"","state":"","mandatenotes":"false","capturereasons":"false","typeofreason":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-BD6333A4-9B0F-4A69-8EAD-041C9D122A28"}],"bounds":{"lowerRight":{"x":684.6484468700075,"y":278.4097335362338},"upperLeft":{"x":640.6288968799925,"y":278.2191727137662}},"dockers":[{"x":50,"y":40},{"x":20.5,"y":20.5}],"target":{"resourceId":"sid-BD6333A4-9B0F-4A69-8EAD-041C9D122A28"}},{"resourceId":"sid-5835B827-EFE9-4A09-953F-2B5BF785F70D","properties":{"overrideid":"","name":"Complete Process","rerunnable":"true","servicetaskexpression":"doApprove","isforcompensation":"false","multiinstance_type":"None"},"stencil":{"id":"approveTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-571AC00A-AA66-4680-8DF5-6CC2D14BEC9D"}],"bounds":{"lowerRight":{"x":1043.1376227529158,"y":318},"upperLeft":{"x":943.1376227529157,"y":238}},"dockers":[]},{"resourceId":"sid-06C0D840-5E36-431B-9A20-FAC8068B9576","properties":{"overrideid":"","name":"Approved"},"stencil":{"id":"EndNoneEvent"},"childShapes":[],"outgoing":[],"bounds":{"lowerRight":{"x":1213.1851816966646,"y":292},"upperLeft":{"x":1185.1851816966646,"y":264}},"dockers":[]},{"resourceId":"sid-571AC00A-AA66-4680-8DF5-6CC2D14BEC9D","properties":{"overrideid":"","name":"","repruseaction":"false","conditionsequenceflow":"","defaultflow":"false","action":"","state":"","mandatenotes":"false","capturereasons":"false","typeofreason":"","showdiamondmarker":false},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-06C0D840-5E36-431B-9A20-FAC8068B9576"}],"bounds":{"lowerRight":{"x":1184.7373091737568,"y":277.4898191090789},"upperLeft":{"x":1043.2466411017235,"y":276.0492433909211}},"dockers":[{"x":50.00000000000006,"y":40},{"x":4.3887217579338085,"y":12}],"target":{"resourceId":"sid-06C0D840-5E36-431B-9A20-FAC8068B9576"}},{"resourceId":"sid-97820128-FC8F-4757-A019-23AAA4496CFF","properties":{"overrideid":"","name":"Cancel Process","rerunnable":"true","servicetaskexpression":"doReject","isforcompensation":"false","multiinstance_type":"None"},"stencil":{"id":"rejectTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-00270A51-C826-47EC-9DB6-3815E62928A8"}],"bounds":{"lowerRight":{"x":145,"y":459},"upperLeft":{"x":45,"y":379}},"dockers":[]},{"resourceId":"sid-B9D7A4B0-9C41-4279-847D-0A4E2DF3C976","properties":{"overrideid":"","name":"Rejected"},"stencil":{"id":"EndNoneEvent"},"childShapes":[],"outgoing":[],"bounds":{"lowerRight":{"x":109,"y":518},"upperLeft":{"x":81,"y":490}},"dockers":[]},{"resourceId":"sid-00270A51-C826-47EC-9DB6-3815E62928A8","properties":{"overrideid":"","name":"","repruseaction":"false","conditionsequenceflow":"","defaultflow":"false","action":"","state":"","mandatenotes":"false","capturereasons":"false","typeofreason":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-B9D7A4B0-9C41-4279-847D-0A4E2DF3C976"}],"bounds":{"lowerRight":{"x":95,"y":489.71875},"upperLeft":{"x":95,"y":459.84375}},"dockers":[{"x":50,"y":40},{"x":14,"y":14}],"target":{"resourceId":"sid-B9D7A4B0-9C41-4279-847D-0A4E2DF3C976"}},{"resourceId":"sid-9C3D9CD0-BD69-4240-BBF7-1E4CF9E303AA","properties":{"overrideid":"","name":"Deposit Maker","usertaskassignment":{"assignment":{"type":"idm","idm":{"type":"user","assignee":{"email":"DEPOSIT_MAKER","firstName":"DEPOSIT_MAKER","fullName":"DEPOSIT_MAKER","id":"DEPOSIT_MAKER","roledesc":"Deposit Maker","$$hashKey":"object:3427"}}}},"additionalforms":"","formkeydefinition":"","prioritydefinition":"Role Queue","baseactor":"","duedatedefinition":"","multiinstance_type":"None","isforcompensation":"false"},"stencil":{"id":"UserTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-251622D5-60CD-4462-853B-0CA76F1C00CA"},{"resourceId":"sid-9FA14375-6043-4220-859D-D7CBB5886D3A"},{"resourceId":"sid-BBA89B8A-1B46-488F-B974-9F4CE854FD54"}],"bounds":{"lowerRight":{"x":655.0000000000001,"y":575},"upperLeft":{"x":555.0000000000001,"y":495.00000000000006}},"dockers":[]},{"resourceId":"sid-C956496B-C436-4D38-83B0-83BD6FE03B79","properties":{"overrideid":"","name":"Cancel Process","rerunnable":true,"servicetaskexpression":"doReject","isforcompensation":"false","multiinstance_type":"None"},"stencil":{"id":"rejectTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-96E10B61-C512-4616-B570-2BB07CF50B42"}],"bounds":{"lowerRight":{"x":755.0000000000001,"y":420.00000000000006},"upperLeft":{"x":655.0000000000001,"y":340.00000000000006}},"dockers":[]},{"resourceId":"sid-5BB54BDC-C45D-419B-BDB6-65AD7E027278","properties":{"overrideid":"","name":"Reject","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Rejected'"}},"defaultflow":"false","action":"Reject","state":"Rejected","mandatenotes":true,"capturereasons":"false","typeofreason":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-C956496B-C436-4D38-83B0-83BD6FE03B79"}],"bounds":{"lowerRight":{"x":705.4013239513944,"y":339.35157463305103},"upperLeft":{"x":705.2002385486056,"y":298.53123786694897}},"dockers":[{"x":20.5,"y":20.5},{"x":50,"y":40}],"target":{"resourceId":"sid-C956496B-C436-4D38-83B0-83BD6FE03B79"}},{"resourceId":"sid-BC619109-F403-407C-8835-898ECFE6A89D","properties":{"overrideid":"","name":"Rejected"},"stencil":{"id":"EndNoneEvent"},"childShapes":[],"outgoing":[],"bounds":{"lowerRight":{"x":838.0000000000003,"y":373.0000000000001},"upperLeft":{"x":810.0000000000003,"y":345.0000000000001}},"dockers":[]},{"resourceId":"sid-96E10B61-C512-4616-B570-2BB07CF50B42","properties":{"overrideid":"","name":"","repruseaction":"false","conditionsequenceflow":"","defaultflow":"false","action":"","state":"","mandatenotes":"false","capturereasons":"false","typeofreason":"","showdiamondmarker":false},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-BC619109-F403-407C-8835-898ECFE6A89D"}],"bounds":{"lowerRight":{"x":809.875017714949,"y":359.40811022449384},"upperLeft":{"x":755.4374822850515,"y":359.0840772755064}},"dockers":[{"x":1,"y":20},{"x":14,"y":14}],"target":{"resourceId":"sid-BC619109-F403-407C-8835-898ECFE6A89D"}},{"resourceId":"sid-A1774BE8-3BC9-4249-91CC-70326C5A97FD","properties":{"overrideid":"","name":"Deposit Approver","usertaskassignment":{"assignment":{"type":"idm","idm":{"type":"user","assignee":{"email":"DEPOSIT_APPROVER","firstName":"DEPOSIT_APPROVER","fullName":"DEPOSIT_APPROVER","id":"DEPOSIT_APPROVER","roledesc":"Deposit Approver","$$hashKey":"object:5410"}}}},"additionalforms":"Accounting","formkeydefinition":"","prioritydefinition":"Role Queue","baseactor":"","duedatedefinition":"","multiinstance_type":"None","isforcompensation":"false"},"stencil":{"id":"UserTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-16DEB222-85FD-493B-8758-58D7F30F52B2"}],"bounds":{"lowerRight":{"x":805.0000000000001,"y":575},"upperLeft":{"x":705.0000000000001,"y":495.00000000000006}},"dockers":[]},{"resourceId":"sid-4AF375DC-C759-4D43-9D3D-90D9AE341C9A","properties":{"overrideid":"","name":"","sequencefloworder":""},"stencil":{"id":"ExclusiveGateway"},"childShapes":[],"outgoing":[{"resourceId":"sid-AA6AD459-714D-4BFC-BA5E-5B5002D8172E"},{"resourceId":"sid-9275378A-8131-43D4-9205-BD3B1A46F2CF"},{"resourceId":"sid-89BE2B42-2EEB-40D8-8CD9-C9517338BADE"}],"bounds":{"lowerRight":{"x":895,"y":545},"upperLeft":{"x":855,"y":505}},"dockers":[]},{"resourceId":"sid-48838E66-EAAE-4AE3-A7D1-51790A9ED3C8","properties":{"overrideid":"","name":"","sequencefloworder":""},"stencil":{"id":"ExclusiveGateway"},"childShapes":[],"outgoing":[{"resourceId":"sid-7F9D8CED-2E48-4F8D-9283-AD648885B833"},{"resourceId":"sid-51C50D8C-C174-4198-8DB1-6D9BBDDCA844"}],"bounds":{"lowerRight":{"x":290.6666717529297,"y":298},"upperLeft":{"x":250.6666717529297,"y":258}},"dockers":[]},{"resourceId":"sid-888F5A2E-3E41-49B5-9530-77AA7FC8D402","properties":{"overrideid":"","name":"Waiver Approver","usertaskassignment":{"assignment":{"type":"idm","idm":{"type":"user","assignee":{"email":"RECEIPTWAIVER_APPROVER","firstName":"RECEIPTWAIVER_APPROVER","fullName":"RECEIPTWAIVER_APPROVER","id":"RECEIPTWAIVER_APPROVER","roledesc":"Receipt Waiver Approver","$$hashKey":"object:2924"}}}},"additionalforms":"Accounting","formkeydefinition":"","prioritydefinition":"Role Queue","baseactor":"","duedatedefinition":"","multiinstance_type":"None","isforcompensation":"false"},"stencil":{"id":"UserTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-560E618D-D129-4705-AD65-AD003A9CA870"},{"resourceId":"sid-1676255A-494A-420A-8BC5-E6B3A8451849"}],"bounds":{"lowerRight":{"x":320.6666717529297,"y":420},"upperLeft":{"x":220.6666717529297,"y":340}},"dockers":[]},{"resourceId":"sid-D8223364-DA35-46E9-BE6C-688046F7F567","properties":{"overrideid":"","name":"","sequencefloworder":""},"stencil":{"id":"ExclusiveGateway"},"childShapes":[],"outgoing":[{"resourceId":"sid-EB9E7BC6-EA26-4BFF-8F12-9E5365C0FDFD"},{"resourceId":"sid-21AFF249-08A5-4D8B-BBC8-D12F7B751D6D"}],"bounds":{"lowerRight":{"x":290.6666717529297,"y":500},"upperLeft":{"x":250.6666717529297,"y":460}},"dockers":[]},{"resourceId":"sid-B6CD1606-BB13-4E94-971D-F008B8448629","properties":{"overrideid":"","name":"","sequencefloworder":""},"stencil":{"id":"ExclusiveGateway"},"childShapes":[],"outgoing":[{"resourceId":"sid-E2929D98-E337-49AD-9C31-600AA8997881"},{"resourceId":"sid-08D5A85F-4ED4-443D-B100-3E28FD4A43DC"}],"bounds":{"lowerRight":{"x":1004,"y":545},"upperLeft":{"x":964,"y":505}},"dockers":[]},{"resourceId":"sid-DEB8C0BE-00D7-4F42-BB01-F8B7C348860B","properties":{"overrideid":"","name":"Realization/ Bounce/Cancel Receipt Maker","usertaskassignment":{"assignment":{"type":"idm","idm":{"type":"user","assignee":{"email":"RECEIPTREALIZE_MAKER","firstName":"RECEIPTREALIZE_MAKER","fullName":"RECEIPTREALIZE_MAKER","id":"RECEIPTREALIZE_MAKER","roledesc":"Receipt Realization Maker","$$hashKey":"object:655"}}}},"additionalforms":"","formkeydefinition":"","prioritydefinition":"Role Queue","baseactor":"","duedatedefinition":"","multiinstance_type":"None","isforcompensation":"false"},"stencil":{"id":"UserTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-63B8F0F0-A369-4605-9BF2-BEAE3B3D2196"}],"bounds":{"lowerRight":{"x":1165,"y":565},"upperLeft":{"x":1065,"y":485}},"dockers":[]},{"resourceId":"sid-372D9265-9B9D-4DE6-8169-A9CA3778968C","properties":{"overrideid":"","name":"Realization Approver","usertaskassignment":{"assignment":{"type":"idm","idm":{"type":"user","assignee":{"email":"RECEIPTREALIZE_APPROVER","firstName":"RECEIPTREALIZE_APPROVER","fullName":"RECEIPTREALIZE_APPROVER","id":"RECEIPTREALIZE_APPROVER","roledesc":"Receipt Realization Approver","$$hashKey":"object:1168"}}}},"additionalforms":"Accounting","formkeydefinition":"","prioritydefinition":"Role Queue","baseactor":"","duedatedefinition":"","multiinstance_type":"None","isforcompensation":"false"},"stencil":{"id":"UserTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-CECF6549-BA65-4173-BB8E-5706FE136149"}],"bounds":{"lowerRight":{"x":1405,"y":565},"upperLeft":{"x":1305,"y":485}},"dockers":[]},{"resourceId":"sid-9081FCDB-0586-406B-B44D-DE7AD3A46435","properties":{"overrideid":"","name":"","sequencefloworder":""},"stencil":{"id":"ExclusiveGateway"},"childShapes":[],"outgoing":[{"resourceId":"sid-F49B92A5-3575-4A72-A355-501DC1A0C4E4"},{"resourceId":"sid-9527C98C-8FAE-47D4-9191-D53C79591985"}],"bounds":{"lowerRight":{"x":1490,"y":545},"upperLeft":{"x":1450,"y":505}},"dockers":[]},{"resourceId":"sid-08D5A85F-4ED4-443D-B100-3E28FD4A43DC","properties":{"overrideid":"","name":"Schedule Payment only","repruseaction":false,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.receiptPurpose == 'SchdlRepayment'"}},"defaultflow":"false","action":"","state":"","mandatenotes":"false","capturereasons":"false","typeofreason":"","showdiamondmarker":false},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-5835B827-EFE9-4A09-953F-2B5BF785F70D"}],"bounds":{"lowerRight":{"x":984.5,"y":504.87774142902094},"upperLeft":{"x":984.5,"y":318.68244331644854}},"dockers":[{"x":20.5,"y":20.5},{"x":41.36237724708428,"y":59.16826390133403}],"target":{"resourceId":"sid-5835B827-EFE9-4A09-953F-2B5BF785F70D"}},{"resourceId":"sid-560E618D-D129-4705-AD65-AD003A9CA870","properties":{"overrideid":"","name":"Submit","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Submitted'"}},"defaultflow":"false","action":"Submit","state":"Submitted","mandatenotes":"false","capturereasons":"false","typeofreason":"","showdiamondmarker":false},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-D8223364-DA35-46E9-BE6C-688046F7F567"}],"bounds":{"lowerRight":{"x":271.06404044012226,"y":459.87110612570154},"upperLeft":{"x":270.8669593157371,"y":420.25780012429846}},"dockers":[{"x":50,"y":40},{"x":20.5,"y":20.5}],"target":{"resourceId":"sid-D8223364-DA35-46E9-BE6C-688046F7F567"}},{"resourceId":"sid-21AFF249-08A5-4D8B-BBC8-D12F7B751D6D","properties":{"overrideid":"","name":"Others than Cheque && DD","repruseaction":"false","conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.receiptMode != 'DD' && vo.receiptMode != 'CHEQUE'"}},"defaultflow":"false","action":"","state":"","mandatenotes":"false","capturereasons":"false","typeofreason":"","showdiamondmarker":false},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-0B14EAF0-64A0-4C4E-9F83-A658A77B1421"}],"bounds":{"lowerRight":{"x":539.6979370117188,"y":482.4492186299195},"upperLeft":{"x":288.84251086015075,"y":300}},"dockers":[{"x":38.175839107221066,"y":22.449218629919528},{"x":395.66668701171875,"y":482.4492186299195},{"x":395.66668701171875,"y":300},{"x":37.66668701171875,"y":62}],"target":{"resourceId":"sid-0B14EAF0-64A0-4C4E-9F83-A658A77B1421"}},{"resourceId":"sid-5282CF49-8005-4720-8393-3A287EE7B387","properties":{"overrideid":"","name":"Resubmit","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Resubmitted'"}},"defaultflow":"false","action":"Resubmit","state":"Resubmitted","mandatenotes":true,"capturereasons":"false","typeofreason":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-43C4D486-53F4-43EE-8890-6E0B39D9FBEE"}],"bounds":{"lowerRight":{"x":705.5,"y":257.34375},"upperLeft":{"x":125,"y":171}},"dockers":[{"x":20.5,"y":20.5},{"x":705.5,"y":171},{"x":125,"y":171},{"x":50,"y":40}],"target":{"resourceId":"sid-43C4D486-53F4-43EE-8890-6E0B39D9FBEE"}},{"resourceId":"sid-6C41A0AB-DBE3-4EDB-B674-AFF127DB0548","properties":{"overrideid":"","name":"Cancel","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Cancelled'"}},"defaultflow":"false","action":"Cancel","state":"Cancelled","mandatenotes":true,"capturereasons":"false","typeofreason":"","showdiamondmarker":false},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-97820128-FC8F-4757-A019-23AAA4496CFF"}],"bounds":{"lowerRight":{"x":95,"y":378.685909786906},"upperLeft":{"x":95,"y":318.5147903801528}},"dockers":[{"x":20,"y":63.972010528464466},{"x":50,"y":40}],"target":{"resourceId":"sid-97820128-FC8F-4757-A019-23AAA4496CFF"}},{"resourceId":"sid-84AD111F-248D-40CF-BF33-71CA329D9446","properties":{"overrideid":"","name":"","sequencefloworder":""},"stencil":{"id":"ExclusiveGateway"},"childShapes":[],"outgoing":[{"resourceId":"sid-256EB6D8-254D-49A7-B456-75BF9F58090E"},{"resourceId":"sid-766656D7-CBD9-4CC3-9220-AFEB8EF14CDC"}],"bounds":{"lowerRight":{"x":1255,"y":545},"upperLeft":{"x":1215,"y":505}},"dockers":[]},{"resourceId":"sid-DF133CCB-0734-47DF-B5CD-B240CFAF93C0","properties":{"overrideid":"","name":"Bounce/Cancel Approver","usertaskassignment":{"assignment":{"type":"idm","idm":{"type":"user","assignee":{"email":"RECEIPTBOUNCE_APPROVER","firstName":"RECEIPTBOUNCE_APPROVER","fullName":"RECEIPTBOUNCE_APPROVER","id":"RECEIPTBOUNCE_APPROVER","roledesc":"Receipt Bounce/Cancel Approver","$$hashKey":"object:1396"}}}},"additionalforms":null,"formkeydefinition":"","prioritydefinition":"Role Queue","baseactor":"","duedatedefinition":"","multiinstance_type":"None","isforcompensation":"false"},"stencil":{"id":"UserTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-8465FA87-EFD7-49C8-A17A-AD0027AA9150"}],"bounds":{"lowerRight":{"x":1420,"y":665},"upperLeft":{"x":1320,"y":585}},"dockers":[]},{"resourceId":"sid-9C0967FD-43DD-4A5F-A299-6EFC4DC15DA7","properties":{"overrideid":"","name":"","sequencefloworder":""},"stencil":{"id":"ExclusiveGateway"},"childShapes":[],"outgoing":[{"resourceId":"sid-67DC4762-602F-443F-89A3-68BEE8BCC7B4"},{"resourceId":"sid-C2CDE407-DA1C-4114-B3BB-D160F2A78009"}],"bounds":{"lowerRight":{"x":1490,"y":645},"upperLeft":{"x":1450,"y":605}},"dockers":[]},{"resourceId":"sid-CECF6549-BA65-4173-BB8E-5706FE136149","properties":{"overrideid":"","name":"","repruseaction":"false","conditionsequenceflow":"","defaultflow":"false","action":"","state":"","mandatenotes":"false","capturereasons":"false","typeofreason":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-9081FCDB-0586-406B-B44D-DE7AD3A46435"}],"bounds":{"lowerRight":{"x":1449.6484468700075,"y":525.4097335362338},"upperLeft":{"x":1405.6288968799925,"y":525.2191727137662}},"dockers":[{"x":50,"y":40},{"x":20.5,"y":20.5}],"target":{"resourceId":"sid-9081FCDB-0586-406B-B44D-DE7AD3A46435"}},{"resourceId":"sid-8465FA87-EFD7-49C8-A17A-AD0027AA9150","properties":{"overrideid":"","name":"","repruseaction":"false","conditionsequenceflow":"","defaultflow":"false","action":"","state":"","mandatenotes":"false","capturereasons":"false","typeofreason":"","showdiamondmarker":false},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-9C0967FD-43DD-4A5F-A299-6EFC4DC15DA7"}],"bounds":{"lowerRight":{"x":1449.9442668318063,"y":625.0278164131031},"upperLeft":{"x":1420.484092199871,"y":624.3510898368969}},"dockers":[{"x":41.6666259765625,"y":38},{"x":20.5,"y":20.5}],"target":{"resourceId":"sid-9C0967FD-43DD-4A5F-A299-6EFC4DC15DA7"}},{"resourceId":"sid-9527C98C-8FAE-47D4-9191-D53C79591985","properties":{"overrideid":"","name":"Resubmit","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Resubmitted'"}},"defaultflow":"false","action":"Resubmit","state":"Resubmitted","mandatenotes":true,"capturereasons":"false","typeofreason":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-DEB8C0BE-00D7-4F42-BB01-F8B7C348860B"}],"bounds":{"lowerRight":{"x":1470.5,"y":504.23828125},"upperLeft":{"x":1115,"y":389}},"dockers":[{"x":20.5,"y":20.5},{"x":1470.5,"y":389},{"x":1115,"y":389},{"x":50,"y":40}],"target":{"resourceId":"sid-DEB8C0BE-00D7-4F42-BB01-F8B7C348860B"}},{"resourceId":"sid-F49B92A5-3575-4A72-A355-501DC1A0C4E4","properties":{"overrideid":"","name":"Approve","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Approved'"}},"defaultflow":"false","action":"Approve","state":"Approved","mandatenotes":"false","capturereasons":"false","typeofreason":"","showdiamondmarker":false},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-5835B827-EFE9-4A09-953F-2B5BF785F70D"}],"bounds":{"lowerRight":{"x":1553.9158889899584,"y":525.5},"upperLeft":{"x":1020.8042487294783,"y":318.59375}},"dockers":[{"x":20.5,"y":20.5},{"x":1553.9158889899584,"y":525.5},{"x":1553.9158889899584,"y":362},{"x":1020.8042487294783,"y":362},{"x":77.66662597656259,"y":66}],"target":{"resourceId":"sid-5835B827-EFE9-4A09-953F-2B5BF785F70D"}},{"resourceId":"sid-3BADB59C-97A4-4E52-BBB4-17E39FF66EFB","properties":{"overrideid":"","name":"Reversal Process","rerunnable":true,"servicetaskexpression":"doReversal","isforcompensation":"false","multiinstance_type":"None"},"stencil":{"id":"preApproveTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-4C585F77-A3BA-4776-80C9-3B82F86C5760"}],"bounds":{"lowerRight":{"x":1635.6666564941406,"y":665},"upperLeft":{"x":1535.6666564941406,"y":585}},"dockers":[]},{"resourceId":"sid-6C9DC7C4-7CB7-46A5-B025-824B6E74BCE7","properties":{"overrideid":"","name":"Bounced / Cancelled"},"stencil":{"id":"EndNoneEvent"},"childShapes":[],"outgoing":[],"bounds":{"lowerRight":{"x":1708.6666564941406,"y":639},"upperLeft":{"x":1680.6666564941406,"y":611}},"dockers":[]},{"resourceId":"sid-4C585F77-A3BA-4776-80C9-3B82F86C5760","properties":{"overrideid":"","name":"","repruseaction":"false","conditionsequenceflow":"","defaultflow":"false","action":"","state":"","mandatenotes":"false","capturereasons":"false","typeofreason":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-6C9DC7C4-7CB7-46A5-B025-824B6E74BCE7"}],"bounds":{"lowerRight":{"x":1680.0416564941406,"y":625},"upperLeft":{"x":1636.0572814941406,"y":625}},"dockers":[{"x":50,"y":40},{"x":14,"y":14}],"target":{"resourceId":"sid-6C9DC7C4-7CB7-46A5-B025-824B6E74BCE7"}},{"resourceId":"sid-C2CDE407-DA1C-4114-B3BB-D160F2A78009","properties":{"overrideid":"","name":"Approve","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Approved'"}},"defaultflow":"false","action":"Approve","state":"Approved","mandatenotes":"false","capturereasons":"false","typeofreason":"","showdiamondmarker":false},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-3BADB59C-97A4-4E52-BBB4-17E39FF66EFB"}],"bounds":{"lowerRight":{"x":1535.1809932061417,"y":625.4136272565239},"upperLeft":{"x":1490.3945201567428,"y":625.2191852434761}},"dockers":[{"x":20.5,"y":20.5},{"x":50,"y":40}],"target":{"resourceId":"sid-3BADB59C-97A4-4E52-BBB4-17E39FF66EFB"}},{"resourceId":"sid-67DC4762-602F-443F-89A3-68BEE8BCC7B4","properties":{"overrideid":"","name":"Resubmit","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Resubmitted'"}},"defaultflow":"false","action":"Resubmit","state":"Resubmitted","mandatenotes":true,"capturereasons":"false","typeofreason":"","showdiamondmarker":false},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-DEB8C0BE-00D7-4F42-BB01-F8B7C348860B"}],"bounds":{"lowerRight":{"x":1470.5,"y":690},"upperLeft":{"x":1115,"y":565.9609375}},"dockers":[{"x":20.5,"y":20.5},{"x":1470.5,"y":690},{"x":1115,"y":690},{"x":50,"y":40}],"target":{"resourceId":"sid-DEB8C0BE-00D7-4F42-BB01-F8B7C348860B"}},{"resourceId":"sid-63B8F0F0-A369-4605-9BF2-BEAE3B3D2196","properties":{"overrideid":"","name":"Submit","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Submitted'"}},"defaultflow":"false","action":"Submit","state":"Submitted","mandatenotes":"false","capturereasons":"false","typeofreason":"","showdiamondmarker":false},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-84AD111F-248D-40CF-BF33-71CA329D9446"}],"bounds":{"lowerRight":{"x":1214.730477358556,"y":525.4138194081268},"upperLeft":{"x":1165.894522641444,"y":525.2111805918732}},"dockers":[{"x":50,"y":40},{"x":20.5,"y":20.5}],"target":{"resourceId":"sid-84AD111F-248D-40CF-BF33-71CA329D9446"}},{"resourceId":"sid-256EB6D8-254D-49A7-B456-75BF9F58090E","properties":{"overrideid":"","name":"Realization","repruseaction":"false","conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.receiptModeStatus == 'R'"}},"defaultflow":"false","action":"","state":"","mandatenotes":"false","capturereasons":"false","typeofreason":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-372D9265-9B9D-4DE6-8169-A9CA3778968C"}],"bounds":{"lowerRight":{"x":1304.5195400032333,"y":525.417690936206},"upperLeft":{"x":1255.1718662467667,"y":525.211215313794}},"dockers":[{"x":20.5,"y":20.5},{"x":50,"y":40}],"target":{"resourceId":"sid-372D9265-9B9D-4DE6-8169-A9CA3778968C"}},{"resourceId":"sid-16DEB222-85FD-493B-8758-58D7F30F52B2","properties":{"overrideid":"","name":"","repruseaction":"false","conditionsequenceflow":"","defaultflow":"false","action":"","state":"","mandatenotes":"false","capturereasons":"false","typeofreason":"","showdiamondmarker":false},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-4AF375DC-C759-4D43-9D3D-90D9AE341C9A"}],"bounds":{"lowerRight":{"x":854.59375,"y":535},"upperLeft":{"x":805.21875,"y":525.5}},"dockers":[{"x":50,"y":39.99999999999994},{"x":830,"y":535},{"x":830,"y":525.5},{"x":20.5,"y":20.5}],"target":{"resourceId":"sid-4AF375DC-C759-4D43-9D3D-90D9AE341C9A"}},{"resourceId":"sid-9275378A-8131-43D4-9205-BD3B1A46F2CF","properties":{"overrideid":"","name":"Reject","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Rejected'"}},"defaultflow":"false","action":"Reject","state":"Rejected","mandatenotes":true,"capturereasons":"false","typeofreason":"","showdiamondmarker":false},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-C956496B-C436-4D38-83B0-83BD6FE03B79"}],"bounds":{"lowerRight":{"x":875.5,"y":504.8823784597024},"upperLeft":{"x":755.6248224183369,"y":405.9259258496146}},"dockers":[{"x":20.5,"y":20.5},{"x":875.5,"y":405.9259258496146},{"x":88.26048948330856,"y":65.92592584961454}],"target":{"resourceId":"sid-C956496B-C436-4D38-83B0-83BD6FE03B79"}},{"resourceId":"sid-766656D7-CBD9-4CC3-9220-AFEB8EF14CDC","properties":{"overrideid":"","name":"Bounce/Cancel","repruseaction":"false","conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.receiptModeStatus == 'B' || vo.receiptModeStatus == 'C'"}},"defaultflow":"false","action":"","state":"","mandatenotes":"false","capturereasons":"false","typeofreason":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-DF133CCB-0734-47DF-B5CD-B240CFAF93C0"}],"bounds":{"lowerRight":{"x":1319.61328125,"y":625},"upperLeft":{"x":1235.5,"y":545.15625}},"dockers":[{"x":20.5,"y":20.5},{"x":1235.5,"y":625},{"x":50,"y":40}],"target":{"resourceId":"sid-DF133CCB-0734-47DF-B5CD-B240CFAF93C0"}},{"resourceId":"sid-E2929D98-E337-49AD-9C31-600AA8997881","properties":{"overrideid":"","name":"Partial Settlement or Early settlement","repruseaction":"false","conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.receiptPurpose != 'SchdlRepayment'"}},"defaultflow":"false","action":"","state":"","mandatenotes":"false","capturereasons":"false","typeofreason":"","showdiamondmarker":false},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-DEB8C0BE-00D7-4F42-BB01-F8B7C348860B"}],"bounds":{"lowerRight":{"x":1064.072883605957,"y":525.5},"upperLeft":{"x":1004.0937423706055,"y":525.5}},"dockers":[{"x":20.5,"y":20.5},{"x":18.6666259765625,"y":40.5}],"target":{"resourceId":"sid-DEB8C0BE-00D7-4F42-BB01-F8B7C348860B"}},{"resourceId":"sid-8EFA4409-7850-4AA2-A869-20A9A88311AA","properties":{"overrideid":"","name":"Deposit Process","rerunnable":true,"servicetaskexpression":"doCheckDeposit","isforcompensation":"false","multiinstance_type":"None"},"stencil":{"id":"executedepositprocess"},"childShapes":[],"outgoing":[{"resourceId":"sid-763FDF99-4DA2-4B7C-83CE-8EC856BD9E98"},{"resourceId":"sid-549729F0-4DED-4215-9AC2-1C22D1253DE9"}],"bounds":{"lowerRight":{"x":490.00000000000006,"y":575},"upperLeft":{"x":390.00000000000006,"y":495.00000000000006}},"dockers":[]},{"resourceId":"sid-AA6AD459-714D-4BFC-BA5E-5B5002D8172E","properties":{"overrideid":"","name":"Approve","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Approved'"}},"defaultflow":"false","action":"Approve","state":"Approved","mandatenotes":"false","capturereasons":"false","typeofreason":"","showdiamondmarker":false},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-B6CD1606-BB13-4E94-971D-F008B8448629"}],"bounds":{"lowerRight":{"x":963.0625,"y":525.5},"upperLeft":{"x":895.234375,"y":525.5}},"dockers":[{"x":20.5,"y":20.5},{"x":20.5,"y":20.5}],"target":{"resourceId":"sid-B6CD1606-BB13-4E94-971D-F008B8448629"}},{"resourceId":"sid-6BF26389-B381-4950-9B81-6B52AB90EA18","properties":{"overrideid":"","name":"Other than Cheque & DD","repruseaction":"false","conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.receiptMode != 'DD' && vo.receiptMode != 'CHEQUE'"}},"defaultflow":"false","action":"","state":"","mandatenotes":"false","capturereasons":"false","typeofreason":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-0B14EAF0-64A0-4C4E-9F83-A658A77B1421"}],"bounds":{"lowerRight":{"x":539.8906274801373,"y":278.4548040840315},"upperLeft":{"x":385.7929662698628,"y":278.1116021659685}},"dockers":[{"x":20.5,"y":20.5},{"x":50,"y":40}],"target":{"resourceId":"sid-0B14EAF0-64A0-4C4E-9F83-A658A77B1421"}},{"resourceId":"sid-1676255A-494A-420A-8BC5-E6B3A8451849","properties":{"overrideid":"","name":"Resubmit","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Resubmitted'"}},"defaultflow":"false","action":"Resubmit","state":"Resubmitted","mandatenotes":true,"capturereasons":"false","typeofreason":"","showdiamondmarker":false},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-43C4D486-53F4-43EE-8890-6E0B39D9FBEE"}],"bounds":{"lowerRight":{"x":220.2045450537156,"y":363},"upperLeft":{"x":141.6666717529297,"y":318.57194503092103}},"dockers":[{"x":28.1668187631642,"y":23},{"x":141.6666717529297,"y":363},{"x":66.66667175292969,"y":78.85086479331659}],"target":{"resourceId":"sid-43C4D486-53F4-43EE-8890-6E0B39D9FBEE"}},{"resourceId":"sid-FE23F595-73C2-47DB-A31B-CD758E49AA68","properties":{"overrideid":"","name":"Submit","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Submitted'"}},"defaultflow":"false","action":"Submit","state":"Submitted","mandatenotes":"false","capturereasons":"false","typeofreason":"","showdiamondmarker":false},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-48838E66-EAAE-4AE3-A7D1-51790A9ED3C8"}],"bounds":{"lowerRight":{"x":250.18295294993115,"y":278.42821989256737},"upperLeft":{"x":175.1028604412775,"y":278.17138948243263}},"dockers":[{"x":50,"y":40},{"x":20.5,"y":20.5}],"target":{"resourceId":"sid-48838E66-EAAE-4AE3-A7D1-51790A9ED3C8"}},{"resourceId":"sid-7F9D8CED-2E48-4F8D-9283-AD648885B833","properties":{"overrideid":"","name":"No waiver","repruseaction":"false","conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.waivedAmt == 0"}},"defaultflow":"false","action":"","state":"","mandatenotes":"false","capturereasons":"false","typeofreason":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-5C4B46F9-6C61-4C8C-98C8-CC81C72B618A"}],"bounds":{"lowerRight":{"x":344.940119396485,"y":278.39310897855665},"upperLeft":{"x":291.2265523564447,"y":278.10689102144335}},"dockers":[{"x":20.5,"y":20.5},{"x":20,"y":20}],"target":{"resourceId":"sid-5C4B46F9-6C61-4C8C-98C8-CC81C72B618A"}},{"resourceId":"sid-51C50D8C-C174-4198-8DB1-6D9BBDDCA844","properties":{"overrideid":"","name":"Amounts Waived","repruseaction":"false","conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.waivedAmt > 0"}},"defaultflow":"false","action":"","state":"","mandatenotes":"false","capturereasons":"false","typeofreason":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-888F5A2E-3E41-49B5-9530-77AA7FC8D402"}],"bounds":{"lowerRight":{"x":271.067995704324,"y":339.35157463305103},"upperLeft":{"x":270.86691030153537,"y":298.53123786694897}},"dockers":[{"x":20.5,"y":20.5},{"x":50,"y":40}],"target":{"resourceId":"sid-888F5A2E-3E41-49B5-9530-77AA7FC8D402"}},{"resourceId":"sid-251622D5-60CD-4462-853B-0CA76F1C00CA","properties":{"overrideid":"","name":"Reject","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Rejected'"}},"defaultflow":"false","action":"Reject","state":"Rejected","mandatenotes":true,"capturereasons":"false","typeofreason":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-C956496B-C436-4D38-83B0-83BD6FE03B79"}],"bounds":{"lowerRight":{"x":654.7812500000001,"y":494.0390625},"upperLeft":{"x":605.0000000000001,"y":380.00000000000006}},"dockers":[{"x":50,"y":39.99999999999997},{"x":605.0000000000001,"y":380.00000000000006},{"x":50,"y":40}],"target":{"resourceId":"sid-C956496B-C436-4D38-83B0-83BD6FE03B79"}},{"resourceId":"sid-89BE2B42-2EEB-40D8-8CD9-C9517338BADE","properties":{"overrideid":"","name":"Resubmit","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Resubmitted'"}},"defaultflow":"false","action":"Resubmit","state":"Resubmitted","mandatenotes":true,"capturereasons":"false","typeofreason":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-9C3D9CD0-BD69-4240-BBF7-1E4CF9E303AA"}],"bounds":{"lowerRight":{"x":875.5,"y":622},"upperLeft":{"x":605.0000000000001,"y":545.34765625}},"dockers":[{"x":20.5,"y":20.5},{"x":875.5,"y":622},{"x":605.0000000000001,"y":622},{"x":50,"y":39.99999999999997}],"target":{"resourceId":"sid-9C3D9CD0-BD69-4240-BBF7-1E4CF9E303AA"}},{"resourceId":"sid-BBA89B8A-1B46-488F-B974-9F4CE854FD54","properties":{"overrideid":"","name":"Resubmit","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Resubmitted'"}},"defaultflow":"false","action":"Resubmit","state":"Resubmitted","mandatenotes":true,"capturereasons":"false","typeofreason":"","showdiamondmarker":false},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-43C4D486-53F4-43EE-8890-6E0B39D9FBEE"}],"bounds":{"lowerRight":{"x":581.225769626458,"y":641.4548950195312},"upperLeft":{"x":159.38545568337187,"y":318.39334994776857}},"dockers":[{"x":25,"y":0.9999999999999432},{"x":581.225769626458,"y":641.4548950195312},{"x":159.38545568337187,"y":641.4548950195312},{"x":84.38545568337187,"y":60.64598783617899}],"target":{"resourceId":"sid-43C4D486-53F4-43EE-8890-6E0B39D9FBEE"}},{"resourceId":"sid-9FA14375-6043-4220-859D-D7CBB5886D3A","properties":{"overrideid":"","name":"Submit","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Submitted'"}},"defaultflow":"false","action":"Submit","state":"Submitted","mandatenotes":"false","capturereasons":"false","typeofreason":"","showdiamondmarker":false},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-A1774BE8-3BC9-4249-91CC-70326C5A97FD"}],"bounds":{"lowerRight":{"x":704.7812500000001,"y":535},"upperLeft":{"x":655.2187500000001,"y":535}},"dockers":[{"x":50,"y":39.99999999999994},{"x":50,"y":39.99999999999994}],"target":{"resourceId":"sid-A1774BE8-3BC9-4249-91CC-70326C5A97FD"}},{"resourceId":"sid-1D5BDDF0-B122-424E-95CD-A80D394BE48E","properties":{"overrideid":"","name":"Approve","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Approved'"}},"defaultflow":"false","action":"Approve","state":"Approved","mandatenotes":"false","capturereasons":"false","typeofreason":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-5835B827-EFE9-4A09-953F-2B5BF785F70D"}],"bounds":{"lowerRight":{"x":942.6999078530955,"y":278.4650585792938},"upperLeft":{"x":725.6009343750986,"y":278.0876757957062}},"dockers":[{"x":20.5,"y":20.5},{"x":50.00000000000006,"y":40}],"target":{"resourceId":"sid-5835B827-EFE9-4A09-953F-2B5BF785F70D"}},{"resourceId":"sid-6CCDF610-430F-4A2F-8A50-FB551150F050","properties":{"overrideid":"","name":"Cheque / DD","repruseaction":"false","conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.receiptMode == 'DD' || vo.receiptMode == 'CHEQUE'"}},"defaultflow":"false","action":"","state":"","mandatenotes":"false","capturereasons":"false","typeofreason":"","showdiamondmarker":false},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-8EFA4409-7850-4AA2-A869-20A9A88311AA"}],"bounds":{"lowerRight":{"x":389.5859375,"y":535},"upperLeft":{"x":365.5,"y":298.537109375}},"dockers":[{"x":20.5,"y":20.5},{"x":365.5,"y":535},{"x":99,"y":39.99999999999994}],"target":{"resourceId":"sid-8EFA4409-7850-4AA2-A869-20A9A88311AA"}},{"resourceId":"sid-EB9E7BC6-EA26-4BFF-8F12-9E5365C0FDFD","properties":{"overrideid":"","name":"Cheque / DD","repruseaction":"false","conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.receiptMode == 'DD' || vo.receiptMode == 'CHEQUE'"}},"defaultflow":"false","action":"","state":"","mandatenotes":"false","capturereasons":"false","typeofreason":"","showdiamondmarker":false},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-8EFA4409-7850-4AA2-A869-20A9A88311AA"}],"bounds":{"lowerRight":{"x":389.29427313804626,"y":555},"upperLeft":{"x":271.1666717529297,"y":500.125}},"dockers":[{"x":20.5,"y":20.5},{"x":271.1666717529297,"y":555},{"x":99,"y":59.99999999999994}],"target":{"resourceId":"sid-8EFA4409-7850-4AA2-A869-20A9A88311AA"}},{"resourceId":"sid-549729F0-4DED-4215-9AC2-1C22D1253DE9","properties":{"overrideid":"","name":"No Deposit Process","repruseaction":"false","conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.depositProcess !== true"}},"defaultflow":"false","action":"","state":"","mandatenotes":"false","capturereasons":"false","typeofreason":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-9C3D9CD0-BD69-4240-BBF7-1E4CF9E303AA"}],"bounds":{"lowerRight":{"x":554.3710937500001,"y":535},"upperLeft":{"x":490.6289062500001,"y":535}},"dockers":[{"x":50,"y":40},{"x":50,"y":39.99999999999997}],"target":{"resourceId":"sid-9C3D9CD0-BD69-4240-BBF7-1E4CF9E303AA"}},{"resourceId":"sid-763FDF99-4DA2-4B7C-83CE-8EC856BD9E98","properties":{"overrideid":"","name":"Is Deposit Process have separate Module?","repruseaction":"false","conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.depositProcess == true"}},"defaultflow":"false","action":"","state":"","mandatenotes":"false","capturereasons":"false","typeofreason":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-B6CD1606-BB13-4E94-971D-F008B8448629"}],"bounds":{"lowerRight":{"x":984,"y":690.4548950195312},"upperLeft":{"x":440.00000000000006,"y":545.3892455101013}},"dockers":[{"x":50,"y":40},{"x":440.00000000000006,"y":690.4548950195312},{"x":984,"y":690.4548950195312},{"x":20,"y":20}],"target":{"resourceId":"sid-B6CD1606-BB13-4E94-971D-F008B8448629"}}],"bounds":{"lowerRight":{"x":1808.6666564941406,"y":1050},"upperLeft":{"x":0,"y":0}},"stencilset":{"url":"stencilsets/bpmn2.0/bpmn2.0.json","namespace":"http://b3mn.org/stencilset/bpmn2.0#"},"ssextensions":[]}']]></column>
			<column name="WORKFLOWXML" type="CLOB"><![CDATA[<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:activiti="http://activiti.org/bpmn" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI" typeLanguage="http://www.w3.org/2001/XMLSchema" expressionLanguage="http://www.w3.org/1999/XPath" targetNamespace="http://activiti.org/test"><process id="RECEIPT_PROCESS" name="Receipt Workflow Process" isExecutable="true"><documentation>Receipt Workflow Process</documentation><startEvent id="startEvent1" name="Start"/><userTask id="sid-43C4D486-53F4-43EE-8890-6E0B39D9FBEE" name="Receipt Maker" activiti:actor="RECEIPT_MAKER" activiti:assignmentLevel="Role Queue"/><sequenceFlow id="sid-1A2E482C-719D-41EA-B0FE-E65632AF6E1E" sourceRef="startEvent1" targetRef="sid-43C4D486-53F4-43EE-8890-6E0B39D9FBEE" representsUserAction="false" mandateNotes="false" captureReasons="false"/><exclusiveGateway id="sid-5C4B46F9-6C61-4C8C-98C8-CC81C72B618A"/><userTask id="sid-0B14EAF0-64A0-4C4E-9F83-A658A77B1421" name="Receipt Approver" activiti:actor="RECEIPT_APPROVER" activiti:additionalForms="Accounting" activiti:assignmentLevel="Role Queue"/><exclusiveGateway id="sid-BD6333A4-9B0F-4A69-8EAD-041C9D122A28"/><sequenceFlow id="sid-729F80E4-7F36-4EA2-BB13-6DA473946766" sourceRef="sid-0B14EAF0-64A0-4C4E-9F83-A658A77B1421" targetRef="sid-BD6333A4-9B0F-4A69-8EAD-041C9D122A28" representsUserAction="false" mandateNotes="false" captureReasons="false"/><serviceTask id="sid-5835B827-EFE9-4A09-953F-2B5BF785F70D" name="Complete Process" activiti:operation="doApprove" activiti:rerunnable="true"/><endEvent id="sid-06C0D840-5E36-431B-9A20-FAC8068B9576" name="Approved"/><sequenceFlow id="sid-571AC00A-AA66-4680-8DF5-6CC2D14BEC9D" sourceRef="sid-5835B827-EFE9-4A09-953F-2B5BF785F70D" targetRef="sid-06C0D840-5E36-431B-9A20-FAC8068B9576" representsUserAction="false" mandateNotes="false" captureReasons="false"/><serviceTask id="sid-97820128-FC8F-4757-A019-23AAA4496CFF" name="Cancel Process" activiti:operation="doReject" activiti:rerunnable="true"/><endEvent id="sid-B9D7A4B0-9C41-4279-847D-0A4E2DF3C976" name="Rejected"/><sequenceFlow id="sid-00270A51-C826-47EC-9DB6-3815E62928A8" sourceRef="sid-97820128-FC8F-4757-A019-23AAA4496CFF" targetRef="sid-B9D7A4B0-9C41-4279-847D-0A4E2DF3C976" representsUserAction="false" mandateNotes="false" captureReasons="false"/><userTask id="sid-9C3D9CD0-BD69-4240-BBF7-1E4CF9E303AA" name="Deposit Maker" activiti:actor="DEPOSIT_MAKER" activiti:assignmentLevel="Role Queue"/><serviceTask id="sid-C956496B-C436-4D38-83B0-83BD6FE03B79" name="Cancel Process" activiti:operation="doReject" activiti:rerunnable="true"/><sequenceFlow id="sid-5BB54BDC-C45D-419B-BDB6-65AD7E027278" name="Reject" sourceRef="sid-BD6333A4-9B0F-4A69-8EAD-041C9D122A28" targetRef="sid-C956496B-C436-4D38-83B0-83BD6FE03B79" action="Reject" state="Rejected" representsUserAction="true" mandateNotes="true" captureReasons="false"><conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Rejected'</conditionExpression></sequenceFlow><endEvent id="sid-BC619109-F403-407C-8835-898ECFE6A89D" name="Rejected"/><sequenceFlow id="sid-96E10B61-C512-4616-B570-2BB07CF50B42" sourceRef="sid-C956496B-C436-4D38-83B0-83BD6FE03B79" targetRef="sid-BC619109-F403-407C-8835-898ECFE6A89D" representsUserAction="false" mandateNotes="false" captureReasons="false"/><userTask id="sid-A1774BE8-3BC9-4249-91CC-70326C5A97FD" name="Deposit Approver" activiti:actor="DEPOSIT_APPROVER" activiti:additionalForms="Accounting" activiti:assignmentLevel="Role Queue"/><exclusiveGateway id="sid-4AF375DC-C759-4D43-9D3D-90D9AE341C9A"/><exclusiveGateway id="sid-48838E66-EAAE-4AE3-A7D1-51790A9ED3C8"/><userTask id="sid-888F5A2E-3E41-49B5-9530-77AA7FC8D402" name="Waiver Approver" activiti:actor="RECEIPTWAIVER_APPROVER" activiti:additionalForms="Accounting" activiti:assignmentLevel="Role Queue"/><exclusiveGateway id="sid-D8223364-DA35-46E9-BE6C-688046F7F567"/><exclusiveGateway id="sid-B6CD1606-BB13-4E94-971D-F008B8448629"/><userTask id="sid-DEB8C0BE-00D7-4F42-BB01-F8B7C348860B" name="Realization/ Bounce/Cancel Receipt Maker" activiti:actor="RECEIPTREALIZE_MAKER" activiti:assignmentLevel="Role Queue"/><userTask id="sid-372D9265-9B9D-4DE6-8169-A9CA3778968C" name="Realization Approver" activiti:actor="RECEIPTREALIZE_APPROVER" activiti:additionalForms="Accounting" activiti:assignmentLevel="Role Queue"/><exclusiveGateway id="sid-9081FCDB-0586-406B-B44D-DE7AD3A46435"/><sequenceFlow id="sid-08D5A85F-4ED4-443D-B100-3E28FD4A43DC" name="Schedule Payment only" sourceRef="sid-B6CD1606-BB13-4E94-971D-F008B8448629" targetRef="sid-5835B827-EFE9-4A09-953F-2B5BF785F70D" representsUserAction="false" mandateNotes="false" captureReasons="false"><conditionExpression xsi:type="tFormalExpression">vo.receiptPurpose == 'SchdlRepayment'</conditionExpression></sequenceFlow><sequenceFlow id="sid-560E618D-D129-4705-AD65-AD003A9CA870" name="Submit" sourceRef="sid-888F5A2E-3E41-49B5-9530-77AA7FC8D402" targetRef="sid-D8223364-DA35-46E9-BE6C-688046F7F567" action="Submit" state="Submitted" representsUserAction="true" mandateNotes="false" captureReasons="false"><conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Submitted'</conditionExpression></sequenceFlow><sequenceFlow id="sid-21AFF249-08A5-4D8B-BBC8-D12F7B751D6D" name="Others than Cheque &amp;&amp; DD" sourceRef="sid-D8223364-DA35-46E9-BE6C-688046F7F567" targetRef="sid-0B14EAF0-64A0-4C4E-9F83-A658A77B1421" representsUserAction="false" mandateNotes="false" captureReasons="false"><conditionExpression xsi:type="tFormalExpression">vo.receiptMode != 'DD' &amp;&amp; vo.receiptMode != 'CHEQUE'</conditionExpression></sequenceFlow><sequenceFlow id="sid-5282CF49-8005-4720-8393-3A287EE7B387" name="Resubmit" sourceRef="sid-BD6333A4-9B0F-4A69-8EAD-041C9D122A28" targetRef="sid-43C4D486-53F4-43EE-8890-6E0B39D9FBEE" action="Resubmit" state="Resubmitted" representsUserAction="true" mandateNotes="true" captureReasons="false"><conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Resubmitted'</conditionExpression></sequenceFlow><sequenceFlow id="sid-6C41A0AB-DBE3-4EDB-B674-AFF127DB0548" name="Cancel" sourceRef="sid-43C4D486-53F4-43EE-8890-6E0B39D9FBEE" targetRef="sid-97820128-FC8F-4757-A019-23AAA4496CFF" action="Cancel" state="Cancelled" representsUserAction="true" mandateNotes="true" captureReasons="false"><conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Cancelled'</conditionExpression></sequenceFlow><exclusiveGateway id="sid-84AD111F-248D-40CF-BF33-71CA329D9446"/><userTask id="sid-DF133CCB-0734-47DF-B5CD-B240CFAF93C0" name="Bounce/Cancel Approver" activiti:actor="RECEIPTBOUNCE_APPROVER" activiti:assignmentLevel="Role Queue"/><exclusiveGateway id="sid-9C0967FD-43DD-4A5F-A299-6EFC4DC15DA7"/><sequenceFlow id="sid-CECF6549-BA65-4173-BB8E-5706FE136149" sourceRef="sid-372D9265-9B9D-4DE6-8169-A9CA3778968C" targetRef="sid-9081FCDB-0586-406B-B44D-DE7AD3A46435" representsUserAction="false" mandateNotes="false" captureReasons="false"/><sequenceFlow id="sid-8465FA87-EFD7-49C8-A17A-AD0027AA9150" sourceRef="sid-DF133CCB-0734-47DF-B5CD-B240CFAF93C0" targetRef="sid-9C0967FD-43DD-4A5F-A299-6EFC4DC15DA7" representsUserAction="false" mandateNotes="false" captureReasons="false"/><sequenceFlow id="sid-9527C98C-8FAE-47D4-9191-D53C79591985" name="Resubmit" sourceRef="sid-9081FCDB-0586-406B-B44D-DE7AD3A46435" targetRef="sid-DEB8C0BE-00D7-4F42-BB01-F8B7C348860B" action="Resubmit" state="Resubmitted" representsUserAction="true" mandateNotes="true" captureReasons="false"><conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Resubmitted'</conditionExpression></sequenceFlow><sequenceFlow id="sid-F49B92A5-3575-4A72-A355-501DC1A0C4E4" name="Approve" sourceRef="sid-9081FCDB-0586-406B-B44D-DE7AD3A46435" targetRef="sid-5835B827-EFE9-4A09-953F-2B5BF785F70D" action="Approve" state="Approved" representsUserAction="true" mandateNotes="false" captureReasons="false"><conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Approved'</conditionExpression></sequenceFlow><serviceTask id="sid-3BADB59C-97A4-4E52-BBB4-17E39FF66EFB" name="Reversal Process" activiti:operation="doReversal" activiti:rerunnable="true"/><endEvent id="sid-6C9DC7C4-7CB7-46A5-B025-824B6E74BCE7" name="Bounced / Cancelled"/><sequenceFlow id="sid-4C585F77-A3BA-4776-80C9-3B82F86C5760" sourceRef="sid-3BADB59C-97A4-4E52-BBB4-17E39FF66EFB" targetRef="sid-6C9DC7C4-7CB7-46A5-B025-824B6E74BCE7" representsUserAction="false" mandateNotes="false" captureReasons="false"/><sequenceFlow id="sid-C2CDE407-DA1C-4114-B3BB-D160F2A78009" name="Approve" sourceRef="sid-9C0967FD-43DD-4A5F-A299-6EFC4DC15DA7" targetRef="sid-3BADB59C-97A4-4E52-BBB4-17E39FF66EFB" action="Approve" state="Approved" representsUserAction="true" mandateNotes="false" captureReasons="false"><conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Approved'</conditionExpression></sequenceFlow><sequenceFlow id="sid-67DC4762-602F-443F-89A3-68BEE8BCC7B4" name="Resubmit" sourceRef="sid-9C0967FD-43DD-4A5F-A299-6EFC4DC15DA7" targetRef="sid-DEB8C0BE-00D7-4F42-BB01-F8B7C348860B" action="Resubmit" state="Resubmitted" representsUserAction="true" mandateNotes="true" captureReasons="false"><conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Resubmitted'</conditionExpression></sequenceFlow><sequenceFlow id="sid-63B8F0F0-A369-4605-9BF2-BEAE3B3D2196" name="Submit" sourceRef="sid-DEB8C0BE-00D7-4F42-BB01-F8B7C348860B" targetRef="sid-84AD111F-248D-40CF-BF33-71CA329D9446" action="Submit" state="Submitted" representsUserAction="true" mandateNotes="false" captureReasons="false"><conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Submitted'</conditionExpression></sequenceFlow><sequenceFlow id="sid-256EB6D8-254D-49A7-B456-75BF9F58090E" name="Realization" sourceRef="sid-84AD111F-248D-40CF-BF33-71CA329D9446" targetRef="sid-372D9265-9B9D-4DE6-8169-A9CA3778968C" representsUserAction="false" mandateNotes="false" captureReasons="false"><conditionExpression xsi:type="tFormalExpression">vo.receiptModeStatus == 'R'</conditionExpression></sequenceFlow><sequenceFlow id="sid-16DEB222-85FD-493B-8758-58D7F30F52B2" sourceRef="sid-A1774BE8-3BC9-4249-91CC-70326C5A97FD" targetRef="sid-4AF375DC-C759-4D43-9D3D-90D9AE341C9A" representsUserAction="false" mandateNotes="false" captureReasons="false"/><sequenceFlow id="sid-9275378A-8131-43D4-9205-BD3B1A46F2CF" name="Reject" sourceRef="sid-4AF375DC-C759-4D43-9D3D-90D9AE341C9A" targetRef="sid-C956496B-C436-4D38-83B0-83BD6FE03B79" action="Reject" state="Rejected" representsUserAction="true" mandateNotes="true" captureReasons="false"><conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Rejected'</conditionExpression></sequenceFlow><sequenceFlow id="sid-766656D7-CBD9-4CC3-9220-AFEB8EF14CDC" name="Bounce/Cancel" sourceRef="sid-84AD111F-248D-40CF-BF33-71CA329D9446" targetRef="sid-DF133CCB-0734-47DF-B5CD-B240CFAF93C0" representsUserAction="false" mandateNotes="false" captureReasons="false"><conditionExpression xsi:type="tFormalExpression">vo.receiptModeStatus == 'B' || vo.receiptModeStatus == 'C'</conditionExpression></sequenceFlow><sequenceFlow id="sid-E2929D98-E337-49AD-9C31-600AA8997881" name="Partial Settlement or Early settlement" sourceRef="sid-B6CD1606-BB13-4E94-971D-F008B8448629" targetRef="sid-DEB8C0BE-00D7-4F42-BB01-F8B7C348860B" representsUserAction="false" mandateNotes="false" captureReasons="false"><conditionExpression xsi:type="tFormalExpression">vo.receiptPurpose != 'SchdlRepayment'</conditionExpression></sequenceFlow><serviceTask id="sid-8EFA4409-7850-4AA2-A869-20A9A88311AA" name="Deposit Process" activiti:operation="doCheckDeposit" activiti:rerunnable="true"/><sequenceFlow id="sid-AA6AD459-714D-4BFC-BA5E-5B5002D8172E" name="Approve" sourceRef="sid-4AF375DC-C759-4D43-9D3D-90D9AE341C9A" targetRef="sid-B6CD1606-BB13-4E94-971D-F008B8448629" action="Approve" state="Approved" representsUserAction="true" mandateNotes="false" captureReasons="false"><conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Approved'</conditionExpression></sequenceFlow><sequenceFlow id="sid-6BF26389-B381-4950-9B81-6B52AB90EA18" name="Other than Cheque &amp; DD" sourceRef="sid-5C4B46F9-6C61-4C8C-98C8-CC81C72B618A" targetRef="sid-0B14EAF0-64A0-4C4E-9F83-A658A77B1421" representsUserAction="false" mandateNotes="false" captureReasons="false"><conditionExpression xsi:type="tFormalExpression">vo.receiptMode != 'DD' &amp;&amp; vo.receiptMode != 'CHEQUE'</conditionExpression></sequenceFlow><sequenceFlow id="sid-1676255A-494A-420A-8BC5-E6B3A8451849" name="Resubmit" sourceRef="sid-888F5A2E-3E41-49B5-9530-77AA7FC8D402" targetRef="sid-43C4D486-53F4-43EE-8890-6E0B39D9FBEE" action="Resubmit" state="Resubmitted" representsUserAction="true" mandateNotes="true" captureReasons="false"><conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Resubmitted'</conditionExpression></sequenceFlow><sequenceFlow id="sid-FE23F595-73C2-47DB-A31B-CD758E49AA68" name="Submit" sourceRef="sid-43C4D486-53F4-43EE-8890-6E0B39D9FBEE" targetRef="sid-48838E66-EAAE-4AE3-A7D1-51790A9ED3C8" action="Submit" state="Submitted" representsUserAction="true" mandateNotes="false" captureReasons="false"><conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Submitted'</conditionExpression></sequenceFlow><sequenceFlow id="sid-7F9D8CED-2E48-4F8D-9283-AD648885B833" name="No waiver" sourceRef="sid-48838E66-EAAE-4AE3-A7D1-51790A9ED3C8" targetRef="sid-5C4B46F9-6C61-4C8C-98C8-CC81C72B618A" representsUserAction="false" mandateNotes="false" captureReasons="false"><conditionExpression xsi:type="tFormalExpression">vo.waivedAmt == 0</conditionExpression></sequenceFlow><sequenceFlow id="sid-51C50D8C-C174-4198-8DB1-6D9BBDDCA844" name="Amounts Waived" sourceRef="sid-48838E66-EAAE-4AE3-A7D1-51790A9ED3C8" targetRef="sid-888F5A2E-3E41-49B5-9530-77AA7FC8D402" representsUserAction="false" mandateNotes="false" captureReasons="false"><conditionExpression xsi:type="tFormalExpression">vo.waivedAmt &gt; 0</conditionExpression></sequenceFlow><sequenceFlow id="sid-251622D5-60CD-4462-853B-0CA76F1C00CA" name="Reject" sourceRef="sid-9C3D9CD0-BD69-4240-BBF7-1E4CF9E303AA" targetRef="sid-C956496B-C436-4D38-83B0-83BD6FE03B79" action="Reject" state="Rejected" representsUserAction="true" mandateNotes="true" captureReasons="false"><conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Rejected'</conditionExpression></sequenceFlow><sequenceFlow id="sid-89BE2B42-2EEB-40D8-8CD9-C9517338BADE" name="Resubmit" sourceRef="sid-4AF375DC-C759-4D43-9D3D-90D9AE341C9A" targetRef="sid-9C3D9CD0-BD69-4240-BBF7-1E4CF9E303AA" action="Resubmit" state="Resubmitted" representsUserAction="true" mandateNotes="true" captureReasons="false"><conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Resubmitted'</conditionExpression></sequenceFlow><sequenceFlow id="sid-BBA89B8A-1B46-488F-B974-9F4CE854FD54" name="Resubmit" sourceRef="sid-9C3D9CD0-BD69-4240-BBF7-1E4CF9E303AA" targetRef="sid-43C4D486-53F4-43EE-8890-6E0B39D9FBEE" action="Resubmit" state="Resubmitted" representsUserAction="true" mandateNotes="true" captureReasons="false"><conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Resubmitted'</conditionExpression></sequenceFlow><sequenceFlow id="sid-9FA14375-6043-4220-859D-D7CBB5886D3A" name="Submit" sourceRef="sid-9C3D9CD0-BD69-4240-BBF7-1E4CF9E303AA" targetRef="sid-A1774BE8-3BC9-4249-91CC-70326C5A97FD" action="Submit" state="Submitted" representsUserAction="true" mandateNotes="false" captureReasons="false"><conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Submitted'</conditionExpression></sequenceFlow><sequenceFlow id="sid-1D5BDDF0-B122-424E-95CD-A80D394BE48E" name="Approve" sourceRef="sid-BD6333A4-9B0F-4A69-8EAD-041C9D122A28" targetRef="sid-5835B827-EFE9-4A09-953F-2B5BF785F70D" action="Approve" state="Approved" representsUserAction="true" mandateNotes="false" captureReasons="false"><conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Approved'</conditionExpression></sequenceFlow><sequenceFlow id="sid-6CCDF610-430F-4A2F-8A50-FB551150F050" name="Cheque / DD" sourceRef="sid-5C4B46F9-6C61-4C8C-98C8-CC81C72B618A" targetRef="sid-8EFA4409-7850-4AA2-A869-20A9A88311AA" representsUserAction="false" mandateNotes="false" captureReasons="false"><conditionExpression xsi:type="tFormalExpression">vo.receiptMode == 'DD' || vo.receiptMode == 'CHEQUE'</conditionExpression></sequenceFlow><sequenceFlow id="sid-EB9E7BC6-EA26-4BFF-8F12-9E5365C0FDFD" name="Cheque / DD" sourceRef="sid-D8223364-DA35-46E9-BE6C-688046F7F567" targetRef="sid-8EFA4409-7850-4AA2-A869-20A9A88311AA" representsUserAction="false" mandateNotes="false" captureReasons="false"><conditionExpression xsi:type="tFormalExpression">vo.receiptMode == 'DD' || vo.receiptMode == 'CHEQUE'</conditionExpression></sequenceFlow><sequenceFlow id="sid-549729F0-4DED-4215-9AC2-1C22D1253DE9" name="No Deposit Process" sourceRef="sid-8EFA4409-7850-4AA2-A869-20A9A88311AA" targetRef="sid-9C3D9CD0-BD69-4240-BBF7-1E4CF9E303AA" representsUserAction="false" mandateNotes="false" captureReasons="false"><conditionExpression xsi:type="tFormalExpression">vo.depositProcess !== true</conditionExpression></sequenceFlow><sequenceFlow id="sid-763FDF99-4DA2-4B7C-83CE-8EC856BD9E98" name="Is Deposit Process have separate Module?" sourceRef="sid-8EFA4409-7850-4AA2-A869-20A9A88311AA" targetRef="sid-B6CD1606-BB13-4E94-971D-F008B8448629" representsUserAction="false" mandateNotes="false" captureReasons="false"><conditionExpression xsi:type="tFormalExpression">vo.depositProcess == true</conditionExpression></sequenceFlow></process><bpmndi:BPMNDiagram id="BPMNDiagram_RECEIPT_PROCESS"><bpmndi:BPMNPlane bpmnElement="RECEIPT_PROCESS" id="BPMNPlane_RECEIPT_PROCESS"><bpmndi:BPMNShape bpmnElement="startEvent1" id="BPMNShape_startEvent1"><omgdc:Bounds height="30.0" width="30.0" x="15.0" y="263.0"/></bpmndi:BPMNShape><bpmndi:BPMNShape bpmnElement="sid-43C4D486-53F4-43EE-8890-6E0B39D9FBEE" id="BPMNShape_sid-43C4D486-53F4-43EE-8890-6E0B39D9FBEE"><omgdc:Bounds height="80.0" width="100.0" x="75.0" y="238.0"/></bpmndi:BPMNShape><bpmndi:BPMNShape bpmnElement="sid-5C4B46F9-6C61-4C8C-98C8-CC81C72B618A" id="BPMNShape_sid-5C4B46F9-6C61-4C8C-98C8-CC81C72B618A"><omgdc:Bounds height="40.0" width="40.0" x="345.0" y="258.0"/></bpmndi:BPMNShape><bpmndi:BPMNShape bpmnElement="sid-0B14EAF0-64A0-4C4E-9F83-A658A77B1421" id="BPMNShape_sid-0B14EAF0-64A0-4C4E-9F83-A658A77B1421"><omgdc:Bounds height="80.0" width="100.0" x="540.0" y="238.0"/></bpmndi:BPMNShape><bpmndi:BPMNShape bpmnElement="sid-BD6333A4-9B0F-4A69-8EAD-041C9D122A28" id="BPMNShape_sid-BD6333A4-9B0F-4A69-8EAD-041C9D122A28"><omgdc:Bounds height="40.0" width="40.0" x="685.0" y="258.0"/></bpmndi:BPMNShape><bpmndi:BPMNShape bpmnElement="sid-5835B827-EFE9-4A09-953F-2B5BF785F70D" id="BPMNShape_sid-5835B827-EFE9-4A09-953F-2B5BF785F70D"><omgdc:Bounds height="80.0" width="100.00000000000011" x="943.1376227529157" y="238.0"/></bpmndi:BPMNShape><bpmndi:BPMNShape bpmnElement="sid-06C0D840-5E36-431B-9A20-FAC8068B9576" id="BPMNShape_sid-06C0D840-5E36-431B-9A20-FAC8068B9576"><omgdc:Bounds height="28.0" width="28.0" x="1185.1851816966646" y="264.0"/></bpmndi:BPMNShape><bpmndi:BPMNShape bpmnElement="sid-97820128-FC8F-4757-A019-23AAA4496CFF" id="BPMNShape_sid-97820128-FC8F-4757-A019-23AAA4496CFF"><omgdc:Bounds height="80.0" width="100.0" x="45.0" y="379.0"/></bpmndi:BPMNShape><bpmndi:BPMNShape bpmnElement="sid-B9D7A4B0-9C41-4279-847D-0A4E2DF3C976" id="BPMNShape_sid-B9D7A4B0-9C41-4279-847D-0A4E2DF3C976"><omgdc:Bounds height="28.0" width="28.0" x="81.0" y="490.0"/></bpmndi:BPMNShape><bpmndi:BPMNShape bpmnElement="sid-9C3D9CD0-BD69-4240-BBF7-1E4CF9E303AA" id="BPMNShape_sid-9C3D9CD0-BD69-4240-BBF7-1E4CF9E303AA"><omgdc:Bounds height="79.99999999999994" width="100.0" x="555.0000000000001" y="495.00000000000006"/></bpmndi:BPMNShape><bpmndi:BPMNShape bpmnElement="sid-C956496B-C436-4D38-83B0-83BD6FE03B79" id="BPMNShape_sid-C956496B-C436-4D38-83B0-83BD6FE03B79"><omgdc:Bounds height="80.0" width="100.0" x="655.0000000000001" y="340.00000000000006"/></bpmndi:BPMNShape><bpmndi:BPMNShape bpmnElement="sid-BC619109-F403-407C-8835-898ECFE6A89D" id="BPMNShape_sid-BC619109-F403-407C-8835-898ECFE6A89D"><omgdc:Bounds height="28.0" width="28.0" x="810.0000000000003" y="345.0000000000001"/></bpmndi:BPMNShape><bpmndi:BPMNShape bpmnElement="sid-A1774BE8-3BC9-4249-91CC-70326C5A97FD" id="BPMNShape_sid-A1774BE8-3BC9-4249-91CC-70326C5A97FD"><omgdc:Bounds height="79.99999999999994" width="100.0" x="705.0000000000001" y="495.00000000000006"/></bpmndi:BPMNShape><bpmndi:BPMNShape bpmnElement="sid-4AF375DC-C759-4D43-9D3D-90D9AE341C9A" id="BPMNShape_sid-4AF375DC-C759-4D43-9D3D-90D9AE341C9A"><omgdc:Bounds height="40.0" width="40.0" x="855.0" y="505.0"/></bpmndi:BPMNShape><bpmndi:BPMNShape bpmnElement="sid-48838E66-EAAE-4AE3-A7D1-51790A9ED3C8" id="BPMNShape_sid-48838E66-EAAE-4AE3-A7D1-51790A9ED3C8"><omgdc:Bounds height="40.0" width="40.0" x="250.6666717529297" y="258.0"/></bpmndi:BPMNShape><bpmndi:BPMNShape bpmnElement="sid-888F5A2E-3E41-49B5-9530-77AA7FC8D402" id="BPMNShape_sid-888F5A2E-3E41-49B5-9530-77AA7FC8D402"><omgdc:Bounds height="80.0" width="100.0" x="220.6666717529297" y="340.0"/></bpmndi:BPMNShape><bpmndi:BPMNShape bpmnElement="sid-D8223364-DA35-46E9-BE6C-688046F7F567" id="BPMNShape_sid-D8223364-DA35-46E9-BE6C-688046F7F567"><omgdc:Bounds height="40.0" width="40.0" x="250.6666717529297" y="460.0"/></bpmndi:BPMNShape><bpmndi:BPMNShape bpmnElement="sid-B6CD1606-BB13-4E94-971D-F008B8448629" id="BPMNShape_sid-B6CD1606-BB13-4E94-971D-F008B8448629"><omgdc:Bounds height="40.0" width="40.0" x="964.0" y="505.0"/></bpmndi:BPMNShape><bpmndi:BPMNShape bpmnElement="sid-DEB8C0BE-00D7-4F42-BB01-F8B7C348860B" id="BPMNShape_sid-DEB8C0BE-00D7-4F42-BB01-F8B7C348860B"><omgdc:Bounds height="80.0" width="100.0" x="1065.0" y="485.0"/></bpmndi:BPMNShape><bpmndi:BPMNShape bpmnElement="sid-372D9265-9B9D-4DE6-8169-A9CA3778968C" id="BPMNShape_sid-372D9265-9B9D-4DE6-8169-A9CA3778968C"><omgdc:Bounds height="80.0" width="100.0" x="1305.0" y="485.0"/></bpmndi:BPMNShape><bpmndi:BPMNShape bpmnElement="sid-9081FCDB-0586-406B-B44D-DE7AD3A46435" id="BPMNShape_sid-9081FCDB-0586-406B-B44D-DE7AD3A46435"><omgdc:Bounds height="40.0" width="40.0" x="1450.0" y="505.0"/></bpmndi:BPMNShape><bpmndi:BPMNShape bpmnElement="sid-84AD111F-248D-40CF-BF33-71CA329D9446" id="BPMNShape_sid-84AD111F-248D-40CF-BF33-71CA329D9446"><omgdc:Bounds height="40.0" width="40.0" x="1215.0" y="505.0"/></bpmndi:BPMNShape><bpmndi:BPMNShape bpmnElement="sid-DF133CCB-0734-47DF-B5CD-B240CFAF93C0" id="BPMNShape_sid-DF133CCB-0734-47DF-B5CD-B240CFAF93C0"><omgdc:Bounds height="80.0" width="100.0" x="1320.0" y="585.0"/></bpmndi:BPMNShape><bpmndi:BPMNShape bpmnElement="sid-9C0967FD-43DD-4A5F-A299-6EFC4DC15DA7" id="BPMNShape_sid-9C0967FD-43DD-4A5F-A299-6EFC4DC15DA7"><omgdc:Bounds height="40.0" width="40.0" x="1450.0" y="605.0"/></bpmndi:BPMNShape><bpmndi:BPMNShape bpmnElement="sid-3BADB59C-97A4-4E52-BBB4-17E39FF66EFB" id="BPMNShape_sid-3BADB59C-97A4-4E52-BBB4-17E39FF66EFB"><omgdc:Bounds height="80.0" width="100.0" x="1535.6666564941406" y="585.0"/></bpmndi:BPMNShape><bpmndi:BPMNShape bpmnElement="sid-6C9DC7C4-7CB7-46A5-B025-824B6E74BCE7" id="BPMNShape_sid-6C9DC7C4-7CB7-46A5-B025-824B6E74BCE7"><omgdc:Bounds height="28.0" width="28.0" x="1680.6666564941406" y="611.0"/></bpmndi:BPMNShape><bpmndi:BPMNShape bpmnElement="sid-8EFA4409-7850-4AA2-A869-20A9A88311AA" id="BPMNShape_sid-8EFA4409-7850-4AA2-A869-20A9A88311AA"><omgdc:Bounds height="79.99999999999994" width="100.0" x="390.00000000000006" y="495.00000000000006"/></bpmndi:BPMNShape><bpmndi:BPMNEdge bpmnElement="sid-96E10B61-C512-4616-B570-2BB07CF50B42" id="BPMNEdge_sid-96E10B61-C512-4616-B570-2BB07CF50B42"><omgdi:waypoint x="755.0000000000001" y="359.4107142857144"/><omgdi:waypoint x="810.000248009283" y="359.0833318570877"/></bpmndi:BPMNEdge><bpmndi:BPMNEdge bpmnElement="sid-5282CF49-8005-4720-8393-3A287EE7B387" id="BPMNEdge_sid-5282CF49-8005-4720-8393-3A287EE7B387"><omgdi:waypoint x="705.5" y="258.5"/><omgdi:waypoint x="705.5" y="171.0"/><omgdi:waypoint x="125.0" y="171.0"/><omgdi:waypoint x="125.0" y="238.0"/></bpmndi:BPMNEdge><bpmndi:BPMNEdge bpmnElement="sid-FE23F595-73C2-47DB-A31B-CD758E49AA68" id="BPMNEdge_sid-FE23F595-73C2-47DB-A31B-CD758E49AA68"><omgdi:waypoint x="175.0" y="278.1710376223265"/><omgdi:waypoint x="251.0980218697432" y="278.4313501168135"/></bpmndi:BPMNEdge><bpmndi:BPMNEdge bpmnElement="sid-7F9D8CED-2E48-4F8D-9283-AD648885B833" id="BPMNEdge_sid-7F9D8CED-2E48-4F8D-9283-AD648885B833"><omgdi:waypoint x="290.2684574727623" y="278.3982142801674"/><omgdi:waypoint x="345.1060070728535" y="278.1060070728535"/></bpmndi:BPMNEdge><bpmndi:BPMNEdge bpmnElement="sid-763FDF99-4DA2-4B7C-83CE-8EC856BD9E98" id="BPMNEdge_sid-763FDF99-4DA2-4B7C-83CE-8EC856BD9E98"><omgdi:waypoint x="440.00000000000006" y="575.0"/><omgdi:waypoint x="440.00000000000006" y="690.4548950195312"/><omgdi:waypoint x="984.0" y="690.4548950195312"/><omgdi:waypoint x="984.0" y="545.0"/></bpmndi:BPMNEdge><bpmndi:BPMNEdge bpmnElement="sid-89BE2B42-2EEB-40D8-8CD9-C9517338BADE" id="BPMNEdge_sid-89BE2B42-2EEB-40D8-8CD9-C9517338BADE"><omgdi:waypoint x="875.5" y="544.5"/><omgdi:waypoint x="875.5" y="622.0"/><omgdi:waypoint x="605.0000000000001" y="622.0"/><omgdi:waypoint x="605.0000000000001" y="575.0"/></bpmndi:BPMNEdge><bpmndi:BPMNEdge bpmnElement="sid-1D5BDDF0-B122-424E-95CD-A80D394BE48E" id="BPMNEdge_sid-1D5BDDF0-B122-424E-95CD-A80D394BE48E"><omgdi:waypoint x="724.5330851802314" y="278.4669148197686"/><omgdi:waypoint x="943.1376227529157" y="278.08691491662574"/></bpmndi:BPMNEdge><bpmndi:BPMNEdge bpmnElement="sid-251622D5-60CD-4462-853B-0CA76F1C00CA" id="BPMNEdge_sid-251622D5-60CD-4462-853B-0CA76F1C00CA"><omgdi:waypoint x="605.0000000000001" y="495.00000000000006"/><omgdi:waypoint x="605.0000000000001" y="380.00000000000006"/><omgdi:waypoint x="655.0000000000001" y="380.00000000000006"/></bpmndi:BPMNEdge><bpmndi:BPMNEdge bpmnElement="sid-5BB54BDC-C45D-419B-BDB6-65AD7E027278" id="BPMNEdge_sid-5BB54BDC-C45D-419B-BDB6-65AD7E027278"><omgdi:waypoint x="705.4059405940594" y="297.5940594059406"/><omgdi:waypoint x="705.1970443349754" y="340.00000000000006"/></bpmndi:BPMNEdge><bpmndi:BPMNEdge bpmnElement="sid-08D5A85F-4ED4-443D-B100-3E28FD4A43DC" id="BPMNEdge_sid-08D5A85F-4ED4-443D-B100-3E28FD4A43DC"><omgdi:waypoint x="984.5" y="505.5"/><omgdi:waypoint x="984.5" y="318.0"/></bpmndi:BPMNEdge><bpmndi:BPMNEdge bpmnElement="sid-6C41A0AB-DBE3-4EDB-B674-AFF127DB0548" id="BPMNEdge_sid-6C41A0AB-DBE3-4EDB-B674-AFF127DB0548"><omgdi:waypoint x="95.0" y="318.0"/><omgdi:waypoint x="95.0" y="379.0"/></bpmndi:BPMNEdge><bpmndi:BPMNEdge bpmnElement="sid-6BF26389-B381-4950-9B81-6B52AB90EA18" id="BPMNEdge_sid-6BF26389-B381-4950-9B81-6B52AB90EA18"><omgdi:waypoint x="384.5424107142857" y="278.4575892857143"/><omgdi:waypoint x="540.0" y="278.1113585746102"/></bpmndi:BPMNEdge><bpmndi:BPMNEdge bpmnElement="sid-21AFF249-08A5-4D8B-BBC8-D12F7B751D6D" id="BPMNEdge_sid-21AFF249-08A5-4D8B-BBC8-D12F7B751D6D"><omgdi:waypoint x="288.84251086015075" y="482.4492186299195"/><omgdi:waypoint x="395.66668701171875" y="482.4492186299195"/><omgdi:waypoint x="395.66668701171875" y="300.0"/><omgdi:waypoint x="540.0" y="300.0"/></bpmndi:BPMNEdge><bpmndi:BPMNEdge bpmnElement="sid-766656D7-CBD9-4CC3-9220-AFEB8EF14CDC" id="BPMNEdge_sid-766656D7-CBD9-4CC3-9220-AFEB8EF14CDC"><omgdi:waypoint x="1235.5" y="544.5"/><omgdi:waypoint x="1235.5" y="625.0"/><omgdi:waypoint x="1320.0" y="625.0"/></bpmndi:BPMNEdge><bpmndi:BPMNEdge bpmnElement="sid-51C50D8C-C174-4198-8DB1-6D9BBDDCA844" id="BPMNEdge_sid-51C50D8C-C174-4198-8DB1-6D9BBDDCA844"><omgdi:waypoint x="271.0726123469891" y="297.5940594059406"/><omgdi:waypoint x="270.86371608790506" y="340.0"/></bpmndi:BPMNEdge><bpmndi:BPMNEdge bpmnElement="sid-EB9E7BC6-EA26-4BFF-8F12-9E5365C0FDFD" id="BPMNEdge_sid-EB9E7BC6-EA26-4BFF-8F12-9E5365C0FDFD"><omgdi:waypoint x="271.1666717529297" y="499.5"/><omgdi:waypoint x="271.1666717529297" y="555.0"/><omgdi:waypoint x="390.00000000000006" y="555.0"/></bpmndi:BPMNEdge><bpmndi:BPMNEdge bpmnElement="sid-8465FA87-EFD7-49C8-A17A-AD0027AA9150" id="BPMNEdge_sid-8465FA87-EFD7-49C8-A17A-AD0027AA9150"><omgdi:waypoint x="1420.0" y="624.3399698058354"/><omgdi:waypoint x="1450.0297807442" y="625.0297807442"/></bpmndi:BPMNEdge><bpmndi:BPMNEdge bpmnElement="sid-4C585F77-A3BA-4776-80C9-3B82F86C5760" id="BPMNEdge_sid-4C585F77-A3BA-4776-80C9-3B82F86C5760"><omgdi:waypoint x="1635.6666564941406" y="625.0"/><omgdi:waypoint x="1680.6666564941406" y="625.0"/></bpmndi:BPMNEdge><bpmndi:BPMNEdge bpmnElement="sid-729F80E4-7F36-4EA2-BB13-6DA473946766" id="BPMNEdge_sid-729F80E4-7F36-4EA2-BB13-6DA473946766"><omgdi:waypoint x="640.0" y="278.2164502164502"/><omgdi:waypoint x="685.4130434782609" y="278.4130434782609"/></bpmndi:BPMNEdge><bpmndi:BPMNEdge bpmnElement="sid-00270A51-C826-47EC-9DB6-3815E62928A8" id="BPMNEdge_sid-00270A51-C826-47EC-9DB6-3815E62928A8"><omgdi:waypoint x="95.0" y="459.0"/><omgdi:waypoint x="95.0" y="490.0"/></bpmndi:BPMNEdge><bpmndi:BPMNEdge bpmnElement="sid-63B8F0F0-A369-4605-9BF2-BEAE3B3D2196" id="BPMNEdge_sid-63B8F0F0-A369-4605-9BF2-BEAE3B3D2196"><omgdi:waypoint x="1165.0" y="525.207468879668"/><omgdi:waypoint x="1215.4166666666667" y="525.4166666666666"/></bpmndi:BPMNEdge><bpmndi:BPMNEdge bpmnElement="sid-560E618D-D129-4705-AD65-AD003A9CA870" id="BPMNEdge_sid-560E618D-D129-4705-AD65-AD003A9CA870"><omgdi:waypoint x="270.86567672805404" y="420.0"/><omgdi:waypoint x="271.06667175292966" y="460.4"/></bpmndi:BPMNEdge><bpmndi:BPMNEdge bpmnElement="sid-9275378A-8131-43D4-9205-BD3B1A46F2CF" id="BPMNEdge_sid-9275378A-8131-43D4-9205-BD3B1A46F2CF"><omgdi:waypoint x="875.5" y="505.5"/><omgdi:waypoint x="875.5" y="405.9259258496146"/><omgdi:waypoint x="755.0000000000001" y="405.9259258496146"/></bpmndi:BPMNEdge><bpmndi:BPMNEdge bpmnElement="sid-E2929D98-E337-49AD-9C31-600AA8997881" id="BPMNEdge_sid-E2929D98-E337-49AD-9C31-600AA8997881"><omgdi:waypoint x="1003.5" y="525.5"/><omgdi:waypoint x="1065.0" y="525.5"/></bpmndi:BPMNEdge><bpmndi:BPMNEdge bpmnElement="sid-1A2E482C-719D-41EA-B0FE-E65632AF6E1E" id="BPMNEdge_sid-1A2E482C-719D-41EA-B0FE-E65632AF6E1E"><omgdi:waypoint x="45.0" y="278.0"/><omgdi:waypoint x="75.0" y="278.0"/></bpmndi:BPMNEdge><bpmndi:BPMNEdge bpmnElement="sid-CECF6549-BA65-4173-BB8E-5706FE136149" id="BPMNEdge_sid-CECF6549-BA65-4173-BB8E-5706FE136149"><omgdi:waypoint x="1405.0" y="525.2164502164502"/><omgdi:waypoint x="1450.4130434782608" y="525.4130434782609"/></bpmndi:BPMNEdge><bpmndi:BPMNEdge bpmnElement="sid-1676255A-494A-420A-8BC5-E6B3A8451849" id="BPMNEdge_sid-1676255A-494A-420A-8BC5-E6B3A8451849"><omgdi:waypoint x="220.6666717529297" y="363.0"/><omgdi:waypoint x="141.6666717529297" y="363.0"/><omgdi:waypoint x="141.6666717529297" y="318.0"/></bpmndi:BPMNEdge><bpmndi:BPMNEdge bpmnElement="sid-9FA14375-6043-4220-859D-D7CBB5886D3A" id="BPMNEdge_sid-9FA14375-6043-4220-859D-D7CBB5886D3A"><omgdi:waypoint x="655.0000000000001" y="535.0"/><omgdi:waypoint x="705.0000000000001" y="535.0"/></bpmndi:BPMNEdge><bpmndi:BPMNEdge bpmnElement="sid-AA6AD459-714D-4BFC-BA5E-5B5002D8172E" id="BPMNEdge_sid-AA6AD459-714D-4BFC-BA5E-5B5002D8172E"><omgdi:waypoint x="894.5" y="525.5"/><omgdi:waypoint x="964.5" y="525.5"/></bpmndi:BPMNEdge><bpmndi:BPMNEdge bpmnElement="sid-6CCDF610-430F-4A2F-8A50-FB551150F050" id="BPMNEdge_sid-6CCDF610-430F-4A2F-8A50-FB551150F050"><omgdi:waypoint x="365.5" y="297.5"/><omgdi:waypoint x="365.5" y="535.0"/><omgdi:waypoint x="390.00000000000006" y="535.0"/></bpmndi:BPMNEdge><bpmndi:BPMNEdge bpmnElement="sid-571AC00A-AA66-4680-8DF5-6CC2D14BEC9D" id="BPMNEdge_sid-571AC00A-AA66-4680-8DF5-6CC2D14BEC9D"><omgdi:waypoint x="1043.1376227529158" y="277.49092907052204"/><omgdi:waypoint x="1185.1854091492485" y="276.04468109750064"/></bpmndi:BPMNEdge><bpmndi:BPMNEdge bpmnElement="sid-16DEB222-85FD-493B-8758-58D7F30F52B2" id="BPMNEdge_sid-16DEB222-85FD-493B-8758-58D7F30F52B2"><omgdi:waypoint x="805.0000000000001" y="535.0"/><omgdi:waypoint x="830.0" y="535.0"/><omgdi:waypoint x="830.0" y="525.5"/><omgdi:waypoint x="855.5" y="525.5"/></bpmndi:BPMNEdge><bpmndi:BPMNEdge bpmnElement="sid-9527C98C-8FAE-47D4-9191-D53C79591985" id="BPMNEdge_sid-9527C98C-8FAE-47D4-9191-D53C79591985"><omgdi:waypoint x="1470.5" y="505.5"/><omgdi:waypoint x="1470.5" y="389.0"/><omgdi:waypoint x="1115.0" y="389.0"/><omgdi:waypoint x="1115.0" y="485.0"/></bpmndi:BPMNEdge><bpmndi:BPMNEdge bpmnElement="sid-256EB6D8-254D-49A7-B456-75BF9F58090E" id="BPMNEdge_sid-256EB6D8-254D-49A7-B456-75BF9F58090E"><omgdi:waypoint x="1254.579831932773" y="525.4201680672269"/><omgdi:waypoint x="1305.0" y="525.2092050209205"/></bpmndi:BPMNEdge><bpmndi:BPMNEdge bpmnElement="sid-BBA89B8A-1B46-488F-B974-9F4CE854FD54" id="BPMNEdge_sid-BBA89B8A-1B46-488F-B974-9F4CE854FD54"><omgdi:waypoint x="580.6657445284134" y="575.0"/><omgdi:waypoint x="581.225769626458" y="641.4548950195312"/><omgdi:waypoint x="159.38545568337187" y="641.4548950195312"/><omgdi:waypoint x="159.38545568337187" y="318.0"/></bpmndi:BPMNEdge><bpmndi:BPMNEdge bpmnElement="sid-549729F0-4DED-4215-9AC2-1C22D1253DE9" id="BPMNEdge_sid-549729F0-4DED-4215-9AC2-1C22D1253DE9"><omgdi:waypoint x="490.00000000000006" y="535.0"/><omgdi:waypoint x="555.0000000000001" y="535.0"/></bpmndi:BPMNEdge><bpmndi:BPMNEdge bpmnElement="sid-F49B92A5-3575-4A72-A355-501DC1A0C4E4" id="BPMNEdge_sid-F49B92A5-3575-4A72-A355-501DC1A0C4E4"><omgdi:waypoint x="1489.5" y="525.5"/><omgdi:waypoint x="1553.9158889899584" y="525.5"/><omgdi:waypoint x="1553.9158889899584" y="362.0"/><omgdi:waypoint x="1020.8042487294783" y="362.0"/><omgdi:waypoint x="1020.8042487294783" y="318.0"/></bpmndi:BPMNEdge><bpmndi:BPMNEdge bpmnElement="sid-C2CDE407-DA1C-4114-B3BB-D160F2A78009" id="BPMNEdge_sid-C2CDE407-DA1C-4114-B3BB-D160F2A78009"><omgdi:waypoint x="1489.582848844559" y="625.4171511554408"/><omgdi:waypoint x="1535.6666564941406" y="625.2170767196083"/></bpmndi:BPMNEdge><bpmndi:BPMNEdge bpmnElement="sid-67DC4762-602F-443F-89A3-68BEE8BCC7B4" id="BPMNEdge_sid-67DC4762-602F-443F-89A3-68BEE8BCC7B4"><omgdi:waypoint x="1470.5" y="644.5"/><omgdi:waypoint x="1470.5" y="690.0"/><omgdi:waypoint x="1115.0" y="690.0"/><omgdi:waypoint x="1115.0" y="565.0"/></bpmndi:BPMNEdge></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></definitions>]]></column>
			<where>workflowtype='RECEIPT_PROCESS'and workflowactive=1
			</where>
		</update>
	</changeSet>
	<changeSet id="38" author="Jayant">
		<sql>
			UPDATE SeqWorkFlowDetails SET SEQNO= (SELECT MAX(WorkflowId)+1 FROM workflowdetails);
		</sql>
	</changeSet> 
	
	<changeSet id="39" author="Kesav">
		<comment>DepositBranch column added in FinReceiptHeader tables</comment>
		<addColumn tableName="FinReceiptHeader">
			<column name="DepositBranch" type="varchar(8)"/>
		</addColumn>
		<addColumn tableName="FinReceiptHeader_Temp">
			<column name="DepositBranch" type="varchar(8)"/>
		</addColumn>
	</changeSet>
	
	<changeSet id="40" author="Kesav">
		<comment>DepositBranch column added in FinReceiptHeader Views</comment>
		<createView viewName="finreceiptheader_fcview" replaceIfExists="true">
			SELECT  t1.receiptid,
				    t1.receiptdate,
				    t1.receipttype,
				    t1.recagainst,
				    t1.reference,
				    t1.receiptpurpose,
				    t1.receiptmode,
				    t1.excessadjustto,
				    t1.allocationtype,
				    t1.receiptamount,
				    t1.effectschdmethod,
				    t1.receiptmodestatus,
				    t1.version,
				    t1.lastmntby,
				    t1.lastmnton,
				    t1.recordstatus,
				    t1.rolecode,
				    t1.nextrolecode,
				    t1.taskid,
				    t1.nexttaskid,
				    t1.recordtype,
				    t1.workflowid,
				    t2.fintype,
				    t2.finbranch,
				    t3.custcif,
				    t3.custshrtname,
				    t2.finccy,
				    t1.realizationdate,
				    t1.cancelreason,
				    t4.fintypedesc,
				    t6.branchdesc AS finbranchdesc,
				    t5.ccydesc AS finccydesc,
				    t7.rejectdesc AS cancelreasondesc,
				    t2.finisactive,
				    t2.schedulemethod,
				    t2.profitdaysbasis AS pftdaysbasis,
				    t1.waviedamt,
				    t3.custid,
				    t1.totfeeamount,
				    t1.bouncedate,
				    t1.remarks,
				    t1.rcdmaintainsts,
				    t1.depositprocess,
					t1.DepositBranch
				   FROM finreceiptheader_temp t1
				     JOIN financemain_temp t2 ON t1.reference = t2.finreference
				     JOIN customers t3 ON t2.custid = t3.custid
				     JOIN rmtfinancetypes t4 ON t2.fintype = t4.fintype
				     JOIN rmtcurrencies t5 ON t2.finccy = t5.ccycode
				     JOIN rmtbranches t6 ON t2.finbranch = t6.branchcode
				     LEFT JOIN bmtrejectcodes t7 ON t1.cancelreason = t7.rejectcode
				UNION ALL
				 SELECT t1.receiptid,
				    t1.receiptdate,
				    t1.receipttype,
				    t1.recagainst,
				    t1.reference,
				    t1.receiptpurpose,
				    t1.receiptmode,
				    t1.excessadjustto,
				    t1.allocationtype,
				    t1.receiptamount,
				    t1.effectschdmethod,
				    t1.receiptmodestatus,
				    t1.version,
				    t1.lastmntby,
				    t1.lastmnton,
				    t1.recordstatus,
				    t1.rolecode,
				    t1.nextrolecode,
				    t1.taskid,
				    t1.nexttaskid,
				    t1.recordtype,
				    t1.workflowid,
				    t2.fintype,
				    t2.finbranch,
				    t3.custcif,
				    t3.custshrtname,
				    t2.finccy,
				    t1.realizationdate,
				    t1.cancelreason,
				    t4.fintypedesc,
				    t6.branchdesc AS finbranchdesc,
				    t5.ccydesc AS finccydesc,
				    t7.rejectdesc AS cancelreasondesc,
				    t2.finisactive,
				    t2.schedulemethod,
				    t2.profitdaysbasis AS pftdaysbasis,
				    t1.waviedamt,
				    t3.custid,
				    t1.totfeeamount,
				    t1.bouncedate,
				    t1.remarks,
				    t1.rcdmaintainsts,
				    t1.depositprocess,
					t1.DepositBranch
				   FROM finreceiptheader t1
				     JOIN financemain_temp t2 ON t1.reference = t2.finreference
				     JOIN customers t3 ON t2.custid = t3.custid
				     JOIN rmtfinancetypes t4 ON t2.fintype = t4.fintype
				     JOIN rmtcurrencies t5 ON t2.finccy = t5.ccycode
				     JOIN rmtbranches t6 ON t2.finbranch = t6.branchcode
				     LEFT JOIN bmtrejectcodes t7 ON t1.cancelreason = t7.rejectcode
				  WHERE NOT (EXISTS ( SELECT 1
				           FROM finreceiptheader_temp
				          WHERE finreceiptheader_temp.receiptid = t1.receiptid))
		</createView>
	</changeSet>
	
	<changeSet id="41" author="Kesav">
		<comment>DepositBranch column added in FinReceiptHeader Views</comment>
		<createView viewName="finreceiptheader_feview" replaceIfExists="true">
			SELECT  t1.receiptid,
				    t1.receiptdate,
				    t1.receipttype,
				    t1.recagainst,
				    t1.reference,
				    t1.receiptpurpose,
				    t1.receiptmode,
				    t1.excessadjustto,
				    t1.allocationtype,
				    t1.receiptamount,
				    t1.effectschdmethod,
				    t1.receiptmodestatus,
				    t1.version,
				    t1.lastmntby,
				    t1.lastmnton,
				    t1.recordstatus,
				    t1.rolecode,
				    t1.nextrolecode,
				    t1.taskid,
				    t1.nexttaskid,
				    t1.recordtype,
				    t1.workflowid,
				    t2.fintype,
				    t2.finbranch,
				    t3.custcif,
				    t3.custshrtname,
				    t2.finccy,
				    t1.realizationdate,
				    t1.cancelreason,
				    t4.fintypedesc,
				    t6.branchdesc AS finbranchdesc,
				    t5.ccydesc AS finccydesc,
				    t7.rejectdesc AS cancelreasondesc,
				    t2.finisactive,
				    t2.schedulemethod,
				    t2.profitdaysbasis AS pftdaysbasis,
				    t1.waviedamt,
				    t3.custid,
				    t1.totfeeamount,
				    t1.bouncedate,
				    t1.remarks,
				    t1.rcdmaintainsts,
				    t1.depositprocess,
					t1.DepositBranch
			   FROM finreceiptheader_temp t1
			     JOIN financemain_temp t2 ON t1.reference = t2.finreference
			     JOIN customers t3 ON t2.custid = t3.custid
			     JOIN rmtfinancetypes t4 ON t2.fintype = t4.fintype
			     JOIN rmtcurrencies t5 ON t2.finccy = t5.ccycode
			     JOIN rmtbranches t6 ON t2.finbranch = t6.branchcode
			     LEFT JOIN bmtrejectcodes t7 ON t1.cancelreason = t7.rejectcode
			UNION ALL
			 SELECT t1.receiptid,
				    t1.receiptdate,
				    t1.receipttype,
				    t1.recagainst,
				    t1.reference,
				    t1.receiptpurpose,
				    t1.receiptmode,
				    t1.excessadjustto,
				    t1.allocationtype,
				    t1.receiptamount,
				    t1.effectschdmethod,
				    t1.receiptmodestatus,
				    t1.version,
				    t1.lastmntby,
				    t1.lastmnton,
				    t1.recordstatus,
				    t1.rolecode,
				    t1.nextrolecode,
				    t1.taskid,
				    t1.nexttaskid,
				    t1.recordtype,
				    t1.workflowid,
				    t2.fintype,
				    t2.finbranch,
				    t3.custcif,
				    t3.custshrtname,
				    t2.finccy,
				    t1.realizationdate,
				    t1.cancelreason,
				    t4.fintypedesc,
				    t6.branchdesc AS finbranchdesc,
				    t5.ccydesc AS finccydesc,
				    t7.rejectdesc AS cancelreasondesc,
				    t2.finisactive,
				    t2.schedulemethod,
				    t2.profitdaysbasis AS pftdaysbasis,
				    t1.waviedamt,
				    t3.custid,
				    t1.totfeeamount,
				    t1.bouncedate,
				    t1.remarks,
				    t1.rcdmaintainsts,
				    t1.depositprocess,
					t1.DepositBranch
			   FROM finreceiptheader t1
			     JOIN ( SELECT financemain_temp.finreference,
			            financemain_temp.finbranch,
			            financemain_temp.fintype,
			            financemain_temp.finccy,
			            financemain_temp.schedulemethod,
			            financemain_temp.profitdaysbasis,
			            financemain_temp.finisactive,
			            financemain_temp.custid
			           FROM financemain_temp
			        UNION
			         SELECT financemain.finreference,
			            financemain.finbranch,
			            financemain.fintype,
			            financemain.finccy,
			            financemain.schedulemethod,
			            financemain.profitdaysbasis,
			            financemain.finisactive,
			            financemain.custid
			           FROM financemain) t2 ON t1.reference = t2.finreference
			     JOIN customers t3 ON t2.custid = t3.custid
			     JOIN rmtfinancetypes t4 ON t2.fintype = t4.fintype
			     JOIN rmtcurrencies t5 ON t2.finccy = t5.ccycode
			     JOIN rmtbranches t6 ON t2.finbranch = t6.branchcode
			     LEFT JOIN bmtrejectcodes t7 ON t1.cancelreason = t7.rejectcode
			  WHERE NOT (EXISTS ( SELECT 1
			           FROM finreceiptheader_temp
			          WHERE finreceiptheader_temp.receiptid = t1.receiptid))		
		</createView>
	</changeSet>
	
	<changeSet id="42" author="Kesav">
		<comment>DepositBranch column added in FinReceiptHeader Views</comment>
		<createView viewName="finreceiptheader_fview" replaceIfExists="true">
			SELECT t1.receiptid,
			    t1.receiptdate,
			    t1.receipttype,
			    t1.recagainst,
			    t1.reference,
			    t1.receiptpurpose,
			    t1.receiptmode,
			    t1.excessadjustto,
			    t1.allocationtype,
			    t1.receiptamount,
			    t1.effectschdmethod,
			    t1.receiptmodestatus,
			    t1.version,
			    t1.lastmntby,
			    t1.lastmnton,
			    t1.recordstatus,
			    t1.rolecode,
			    t1.nextrolecode,
			    t1.taskid,
			    t1.nexttaskid,
			    t1.recordtype,
			    t1.workflowid,
			    t2.fintype,
			    t2.finbranch,
			    t3.custcif,
			    t3.custshrtname,
			    t2.finccy,
			    t1.realizationdate,
			    t1.cancelreason,
			    t4.fintypedesc,
			    t6.branchdesc AS finbranchdesc,
			    t5.ccydesc AS finccydesc,
			    t7.rejectdesc AS cancelreasondesc,
			    t2.finisactive,
			    t2.schedulemethod,
			    t2.profitdaysbasis AS pftdaysbasis,
			    t1.waviedamt,
			    t3.custid,
			    t1.totfeeamount,
			    t1.bouncedate,
			    t1.remarks,
			    t1.rcdmaintainsts,
			    t1.depositprocess,
				t1.DepositBranch
			   FROM finreceiptheader_temp t1
			     JOIN financemain_temp t2 ON t1.reference = t2.finreference
			     JOIN customers t3 ON t2.custid = t3.custid
			     JOIN rmtfinancetypes t4 ON t2.fintype = t4.fintype
			     JOIN rmtcurrencies t5 ON t2.finccy = t5.ccycode
			     JOIN rmtbranches t6 ON t2.finbranch = t6.branchcode
			     LEFT JOIN bmtrejectcodes t7 ON t1.cancelreason = t7.rejectcode		
		</createView>
	</changeSet>
	
	<changeSet id="43" author="Kesav">
		<comment>DepositBranch column added in FinReceiptHeader Views</comment>
		<createView viewName="finreceiptheader_view" replaceIfExists="true">
			SELECT t1.receiptid,
			    t1.receiptdate,
			    t1.receipttype,
			    t1.recagainst,
			    t1.reference,
			    t1.receiptpurpose,
			    t1.receiptmode,
			    t1.excessadjustto,
			    t1.allocationtype,
			    t1.receiptamount,
			    t1.effectschdmethod,
			    t1.receiptmodestatus,
			    t1.version,
			    t1.lastmntby,
			    t1.lastmnton,
			    t1.recordstatus,
			    t1.rolecode,
			    t1.nextrolecode,
			    t1.taskid,
			    t1.nexttaskid,
			    t1.recordtype,
			    t1.workflowid,
			    t2.fintype,
			    t2.finbranch,
			    t3.custcif,
			    t3.custshrtname,
			    t2.finccy,
			    t1.realizationdate,
			    t1.cancelreason,
			    t4.fintypedesc,
			    t6.branchdesc AS finbranchdesc,
			    t5.ccydesc AS finccydesc,
			    t7.rejectdesc AS cancelreasondesc,
			    t2.finisactive,
			    t1.waviedamt,
			    t1.totfeeamount,
			    t1.bouncedate,
			    t1.remarks,
			    t1.rcdmaintainsts,
			    t1.depositprocess,
				t1.DepositBranch
			   FROM finreceiptheader_temp t1
			     JOIN financemain t2 ON t1.reference = t2.finreference
			     JOIN customers t3 ON t2.custid = t3.custid
			     JOIN rmtfinancetypes t4 ON t2.fintype = t4.fintype
			     JOIN rmtcurrencies t5 ON t2.finccy = t5.ccycode
			     JOIN rmtbranches t6 ON t2.finbranch = t6.branchcode
			     LEFT JOIN bmtrejectcodes t7 ON t1.cancelreason = t7.rejectcode
			UNION ALL
			 SELECT t1.receiptid,
			    t1.receiptdate,
			    t1.receipttype,
			    t1.recagainst,
			    t1.reference,
			    t1.receiptpurpose,
			    t1.receiptmode,
			    t1.excessadjustto,
			    t1.allocationtype,
			    t1.receiptamount,
			    t1.effectschdmethod,
			    t1.receiptmodestatus,
			    t1.version,
			    t1.lastmntby,
			    t1.lastmnton,
			    t1.recordstatus,
			    t1.rolecode,
			    t1.nextrolecode,
			    t1.taskid,
			    t1.nexttaskid,
			    t1.recordtype,
			    t1.workflowid,
			    t2.fintype,
			    t2.finbranch,
			    t3.custcif,
			    t3.custshrtname,
			    t2.finccy,
			    t1.realizationdate,
			    t1.cancelreason,
			    t4.fintypedesc,
			    t6.branchdesc AS finbranchdesc,
			    t5.ccydesc AS finccydesc,
			    t7.rejectdesc AS cancelreasondesc,
			    t2.finisactive,
			    t1.waviedamt,
			    t1.totfeeamount,
			    t1.bouncedate,
			    t1.remarks,
			    t1.rcdmaintainsts,
			    t1.depositprocess,
				t1.DepositBranch
			   FROM finreceiptheader t1
			     JOIN financemain t2 ON t1.reference = t2.finreference
			     JOIN customers t3 ON t2.custid = t3.custid
			     JOIN rmtfinancetypes t4 ON t2.fintype = t4.fintype
			     JOIN rmtcurrencies t5 ON t2.finccy = t5.ccycode
			     JOIN rmtbranches t6 ON t2.finbranch = t6.branchcode
			     LEFT JOIN bmtrejectcodes t7 ON t1.cancelreason = t7.rejectcode
			  WHERE NOT (EXISTS ( SELECT 1
			           FROM finreceiptheader_temp
			          WHERE finreceiptheader_temp.receiptid = t1.receiptid))		
		</createView>
	</changeSet>
	
	<changeSet id="44" author="Kesav">
		<sql>
			Update DepositDetails set ActualAmount = ActualAmount-TransactionAmount;
		</sql>
	</changeSet> 
	
	<changeSet id="45" author="Kesav">
		<dropView viewName="DepositDetails_View"/>
		<dropView viewName="DepositDetails_AView"/>
		<dropView viewName="DepositDetails_TView"/>
	</changeSet>
	
	<changeSet id="46" author="Kesav">
		<comment>TransactionAmount column removing from DepositDetails</comment>
		<dropColumn tableName="DepositDetails" columnName="TransactionAmount"/>
		<dropColumn tableName="DepositDetails_Temp" columnName="TransactionAmount"/>
	</changeSet>
	
	<changeSet id="47" author="Kesav">
		<createView viewName="DepositDetails_TView" replaceIfExists="true">
			Select 		T1.DepositId, T1.DepositType, T1.BranchCode, T2.ActualAmount, T1.ReservedAmount,
						T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId,
			            T3.BranchDesc
			From 		DepositDetails_Temp T1
            Inner Join	DepositDetails T2 ON T2.DepositId = T1.DepositId
			Inner Join  RMTBranches T3 ON T3.BranchCode = T1.BranchCode
		</createView>
	</changeSet>
	
	<changeSet id="48" author="Kesav">
		<createView viewName="DepositDetails_View" replaceIfExists="true">
			Select 		T1.DepositId, T1.DepositType, T1.BranchCode, T2.ActualAmount, T1.ReservedAmount,
						T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId,
			            T3.BranchDesc
			From 		DepositDetails_Temp T1
            Inner Join	DepositDetails T2 ON T2.DepositId = T1.DepositId
			Inner Join  RMTBranches T3 ON T3.BranchCode = T1.BranchCode
            
            Union All
			
			Select 		T1.DepositId, T1.DepositType, T1.BranchCode, T1.ActualAmount, T1.ReservedAmount,
						T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId,
			            T2.BranchDesc
			From 		DepositDetails T1
			Inner Join  RMTBranches T2 ON T2.BranchCode = T1.BranchCode
			
			WHERE NOT  (EXISTS ( SELECT 1 FROM DepositDetails_Temp WHERE DepositDetails_Temp.DepositId = T1.DepositId))		
		</createView>
	</changeSet>
	
	<changeSet id="49" author="Kesav">
		<createView viewName="DepositDetails_AView" replaceIfExists="true">
			Select 		T1.DepositId, T1.DepositType, T1.BranchCode, T1.ActualAmount, T1.ReservedAmount,
						T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId,
			            T2.BranchDesc
			From 		DepositDetails T1
			Inner Join  RMTBranches T2 ON T2.BranchCode = T1.BranchCode			
		</createView>
	</changeSet>
	
	<changeSet id="50" author="Kesav">
		<comment>Bank To Cash Accounting Configuration</comment>
		<sql>
			Delete from BMTAEEVENTS where AeEventCode = 'B2C';
			Insert into BMTAEEVENTS values('B2C','BANK TO CASH',1,1000,Current_TimeStamp,'Approved',null,null,null,null,null,0, 1, 0, 1);
									
			Delete from BMTAMOUNTCODES where AllowedEvent = 'B2C' And AmountCode = 'ae_transfer';
			Insert into BMTAMOUNTCODES values('B2C',0,'ae_transfer','BANK TO CASH',1,1,1000,Current_TimeStamp,'Approved',null,null,null,null,null,0);
						
			Insert Into RMTACCOUNTINGSET Values ((Select Max(AccountSetId) + 1 from RMTACCOUNTINGSET), 'B2C', 'B2C', 'BANK TO CASH', 0, 0, 1, 1000, Current_TimeStamp, 'Approved', '', '', '', '', '', 0);
			UPDATE seqRMTACCOUNTINGSET SET SEQNO = (Select Max(AccountSetId) from RMTACCOUNTINGSET);
									
			Insert Into RMTTRANSACTIONENTRY Values
						((Select AccountSetId from RMTACCOUNTINGSET where EventCode = 'B2C'), '1', 'Deposit Bank A/c', 'C', '0','23122COLL','1000','BUILD','GLCREATE','510','010', 'Result = ae_transfer;', null, ' ', 'D', 0, 0, 1, 0, Current_TimeStamp, 'Approved', '', '', '', '', '', 0, 'E', '0');
			Insert Into RMTTRANSACTIONENTRY Values
						((Select AccountSetId from RMTACCOUNTINGSET where EventCode = 'B2C'), '2', 'Cash A/c', 'D', '0','BANK','1000','BUILD','GLCREATE','010','510', 'Result = ae_transfer;', null, ' ', 'D', 0, 0, 1, 0, Current_TimeStamp, 'Approved', '', '', '', '', '', 0, 'E', '0');
									
			Delete from SMTPARAMETERS where SysParmCode = 'GL_CM_GLHEAD_B2C';
			Insert into SMTPARAMETERS  values ('GL_CM_GLHEAD_B2C','Bank To Cash','String',0,(Select AccountSetId from RMTAccountingSet where EVentCode = 'B2C'),10,0,null,null,'Bank To Cash Id',1,1000,Current_TimeStamp,'Approved',null,null,null,null,null,0);		
		</sql>
	</changeSet>
	
	<changeSet id="51" author="Vinay">
		<sql>
			UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS);
			UPDATE SEQSECGROUPS SET SEQNO= (SELECT MAX(GRPID) FROM SECGROUPS);
			UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS); 
			UPDATE SEQSECROLEGROUPS SET SEQNO= (SELECT MAX(ROLEGRPID) FROM SECROLEGROUPS);
			
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menuItem_SystemMaster_Connector','MENU',0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0; 
			
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'VehicleDealerDialog_CONN_dealerName','VehicleDealerDialog',0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0; 
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'VehicleDealerDialog_CONN_dealerFax','VehicleDealerDialog',0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0; 
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'VehicleDealerDialog_CONN_dealerAddress1','VehicleDealerDialog',0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0; 
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'VehicleDealerDialog_CONN_dealerAddress2','VehicleDealerDialog',0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0; 
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'VehicleDealerDialog_CONN_dealerAddress3','VehicleDealerDialog',0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0; 
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'VehicleDealerDialog_CONN_dealerCountry','VehicleDealerDialog',0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0; 
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'VehicleDealerDialog_CONN_dealerCity','VehicleDealerDialog',0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0; 
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'VehicleDealerDialog_CONN_dealerProvince','VehicleDealerDialog',0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0; 
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'VehicleDealerDialog_CONN_PaymentMode','VehicleDealerDialog',0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0; 
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'VehicleDealerDialog_CONN_Email','VehicleDealerDialog',0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0; 
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'VehicleDealerDialog_CONN_PoBox','VehicleDealerDialog',0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0; 
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'VehicleDealerDialog_CONN_ZipCode','VehicleDealerDialog',0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0; 
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'VehicleDealerDialog_CONN_Active','VehicleDealerDialog',0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0; 
						
			INSERT INTO SECGROUPS SELECT (SELECT MAX(GRPID)+1 FROM SECGROUPS), 'CONNECTOR_MAKER', 'Connector details for Maker', 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0 FROM SEQSECGROUPS WHERE 0=0;
			INSERT INTO SECGROUPS SELECT (SELECT MAX(GRPID)+1 FROM SECGROUPS), 'CONNECTOR_APPROVER', 'Connector details for Approver', 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0 FROM SEQSECGROUPS WHERE 0=0;
			
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='CONNECTOR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='menuItem_SystemMaster_Connector'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='CONNECTOR_APPROVER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='menuItem_SystemMaster_Connector'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='CONNECTOR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_CONN_dealerName'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='CONNECTOR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_CONN_dealerFax'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='CONNECTOR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_CONN_dealerAddress1'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='CONNECTOR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_CONN_dealerAddress2'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='CONNECTOR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_CONN_dealerAddress3'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='CONNECTOR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_CONN_dealerCountry'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='CONNECTOR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_CONN_dealerCity'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='CONNECTOR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_CONN_dealerProvince'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='CONNECTOR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_CONN_PaymentMode'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='CONNECTOR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_CONN_Email'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='CONNECTOR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_CONN_PoBox'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='CONNECTOR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_CONN_ZipCode'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='CONNECTOR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_CONN_Active'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='CONNECTOR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_VehicleDealerDialog_btnDelete'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='CONNECTOR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_VehicleDealerDialog_btnEdit'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='CONNECTOR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_VehicleDealerDialog_btnSave'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='CONNECTOR_APPROVER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_VehicleDealerDialog_btnSave'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			
			INSERT INTO SecRoleGroups values((Select MAX(RoleGrpID)+1 From SecRoleGroups),(Select GrpId  From SecGroups Where GrpCode='CONNECTOR_MAKER'), (Select  RoleID  From SecRoles Where RoleCd='MSTGRP1_MAKER'),0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0); 
			INSERT INTO SecRoleGroups values((Select MAX(RoleGrpID)+1 From SecRoleGroups),(Select GrpId  From SecGroups Where GrpCode='CONNECTOR_APPROVER'), (Select  RoleID  From SecRoles Where RoleCd='MSTGRP1_APPROVER'),0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0); 
			
			UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS);
			UPDATE SEQSECGROUPS SET SEQNO= (SELECT MAX(GRPID) FROM SECGROUPS);
			UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS); 
			UPDATE SEQSECROLEGROUPS SET SEQNO= (SELECT MAX(ROLEGRPID) FROM SECROLEGROUPS);
		</sql>
	</changeSet>
	
	<changeSet id="52" author="Vinay">
		<sql>
			UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS);
		
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'VehicleDealerDialog_CONN_Code','VehicleDealerDialog',0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='CONNECTOR_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='VehicleDealerDialog_CONN_Code'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			
			UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS);
		</sql>
	</changeSet>
	
	<changeSet id="53" author="Vinay">
		<addColumn tableName="FinanceMain">
			<column name="Connector" type="bigint"/>
		</addColumn>
	</changeSet>
	
	<changeSet id="54" author="Vinay">
		<addColumn tableName="FinanceMain_Temp">
			<column name="Connector" type="bigint"/>
		</addColumn>
	</changeSet>
	
	<changeSet id="55" author="Vinay">
		<createView viewName="financemain_aview" replaceIfExists="true">
			SELECT t1.finreference,
			    t1.numberofterms,
			    t1.grcperiodenddate,
			    t1.allowgrcperiod,
			    t1.gracebaserate,
			    t1.gracespecialrate,
			    t1.grcpftrate,
			    t1.grcpftfrq,
			    t1.nextgrcpftdate,
			    t1.allowgrcpftrvw,
			    t1.grcpftrvwfrq,
			    t1.nextgrcpftrvwdate,
			    t1.allowgrccpz,
			    t1.grccpzfrq,
			    t1.nextgrccpzdate,
			    t1.repaybaserate,
			    t1.repayspecialrate,
			    t1.repayprofitrate,
			    t1.repayfrq,
			    t1.nextrepaydate,
			    t1.repaypftfrq,
			    t1.nextrepaypftdate,
			    t1.allowrepayrvw,
			    t1.repayrvwfrq,
			    t1.nextrepayrvwdate,
			    t1.allowrepaycpz,
			    t1.repaycpzfrq,
			    t1.nextrepaycpzdate,
			    t1.maturitydate,
			    t1.cpzatgraceend,
			    t1.downpayment,
			    t1.graceflatamount,
			    t1.reqrepayamount,
			    t1.totalprofit,
			    t1.totalcpz,
			    t1.totalgrosspft,
			    t1.totalgrossgrcpft,
			    t1.totalgracepft,
			    t1.totalgracecpz,
			    t1.grcratebasis,
			    t1.repayratebasis,
			    t1.fintype,
			    t1.finremarks,
			    t1.finccy,
			    t1.schedulemethod,
			    t1.profitdaysbasis,
			    t1.reqmaturity,
			    t1.calterms,
			    t1.calmaturity,
			    t1.firstrepay,
			    t1.lastrepay,
			    t1.finstartdate,
			    t1.finamount,
			    t1.finamount + t1.feechargeamt - t1.downpayment AS lovdescfinancingamount,
			    t1.finrepaymentamount,
			    t1.custid,
			    t1.defferments,
			    t1.plandefercount,
			    t1.finbranch,
			    t1.finsourceid,
			    t1.alloweddefrpychange,
			    t1.availeddefrpychange,
			    t1.alloweddeffrqchange,
			    t1.availeddeffrqchange,
			    t1.recaltype,
			    t1.finassetvalue,
			    t1.disbaccountid,
			    t1.repayaccountid,
			    t1.finisactive,
			    t1.limitvalid,
			    t1.overridelimit,
			    t1.securitydeposit,
			    t1.version,
			    t1.lastmntby,
			    t1.lastmnton,
			    t1.recordstatus,
			    t1.rolecode,
			    t1.nextrolecode,
			    t1.taskid,
			    t1.nexttaskid,
			    t1.recordtype,
			    t1.workflowid,
			    t7.fintypedesc AS lovdescfintypename,
			    t7.finmaxamount AS lovdescfinmaxamt,
			    t7.finminamount AS lovdescfinminamount,
			    t1.mindownpayperc,
			    t7.finisalwdifferment AS lovdescfinalwdeferment,
			    t7.finisdwpayrequired AS lovdescdwnpayreq,
			    t7.finmaxdifferment AS lovdescfinmaxdifferment,
			    t12.branchdesc AS lovdescfinbranchname,
			    t1.lastrepaydate,
			    t1.lastrepaypftdate,
			    t1.lastrepayrvwdate,
			    t1.lastrepaycpzdate,
			    t1.allowgrcrepay,
			    t1.grcschdmthd,
			    t1.grcmargin,
			    t1.repaymargin,
			    t1.fincurrassetvalue,
			    t1.fincommitmentref,
			    t1.finlimitref,
			    t1.depreciationfrq,
			    t1.fincontractdate,
			    t1.nextdepdate,
			    t1.lastdepdate,
			    t1.finaccount,
			    t1.fincustpftaccount,
			    t17.acrtilllbd AS lovdescaccruedtilllbd,
			    t7.finrvwrateapplfor,
			    t1.totalrepayamt,
			    t1.closingstatus,
			    t1.finapproveddate,
			    t1.feechargeamt,
			    t1.blacklisted,
			    t1.finrepaypftonfrq,
			    t1.anualizedpercrate,
			    t1.effectiverateofreturn,
			    t1.migratedfinance,
			    t1.schedulemaintained,
			    t1.scheduleregenerated,
			    t1.finpurpose,
			    t39.loanpurposedesc AS lovdescfinpurposename,
			    t1.finstatus,
			    t1.finstsreason,
			    t1.initiateuser,
			    t1.bankname,
			    t1.iban,
			    t1.accounttype,
			    t1.ddareferenceno,
			    t7.finscheduleon AS lovdescfinscheduleon,
			    t1.custdsr,
			    t1.jointaccount,
			    t1.jointcustid,
			    t1.downpaybank,
			    t1.downpaysupl,
			    t1.downpayaccount,
			    t1.securitycollateral,
			    t1.approved,
			    t1.discrepancy,
			    t1.limitapproved,
			    t1.investmentref,
			    t1.graceterms,
			    t7.findivision AS lovdescfindivision,
			    t1.rcdmaintainsts,
			    t1.finrepaymethod,
			    t1.grcprofitdaysbasis,
			    t1.stepfinance,
			    t1.steptype,
			    t1.steppolicy,
			    t1.alwmanualsteps,
			    t1.noofsteps,
			    t1.linkedfinref,
			    t1.nextuserid,
			    t1.priority,
			    t24.policydesc AS lovdescsteppolicyname,
			    t1.grcminrate,
			    t1.grcmaxrate,
			    t1.rpyminrate,
			    t1.rpymaxrate,
			    t1.deviationapproval,
			    t1.manualschedule,
			    t1.takeoverfinance,
			    t1.grcadvbaserate,
			    t1.grcadvmargin,
			    t1.grcadvpftrate,
			    t1.rpyadvbaserate,
			    t1.rpyadvmargin,
			    t1.rpyadvpftrate,
			    t1.supplementrent,
			    t1.increasedcost,
			    t1.rolloverfrq,
			    t1.nextrolloverdate,
			    t27.custstsdescription,
			    t1.shariastatus,
			    t1.initiatedate,
			    t1.finpreapprovedref,
			    t1.mmaid,
			    t1.accountsofficer,
			    t1.feeaccountid,
			    t1.fincancelac,
			    t28.dealername AS lovdescaccountsofficer,
			    t28.dealercity AS lovdescsourcecity,
			    t29.agreename,
			    t29.mmareference AS lovdescmmareference,
			    t1.dsacode,
			    t30.rofficerdesc AS dsacodedesc,
			    t1.tdsapplicable,
			    t1.mandateid,
			    t1.droplinefrq,
			    t1.firstdroplinedate,
			    t1.pftservicingodlimit,
			    t1.insuranceamt,
			    t1.deductinsdisb,
			    t1.alwbpi,
			    t1.bpitreatment,
			    t1.planemihalw,
			    t1.planemihmethod,
			    t1.planemihmaxperyear,
			    t1.planemihmax,
			    t1.planemihlockperiod,
			    t1.planemicpz,
			    t1.calroundingmode,
			    t1.alwmultidisb,
			    t1.applicationno,
			    t1.referralid,
			    t33.rofficerdesc AS referraliddesc,
			    t1.dmacode,
			    t34.rofficerdesc AS dmacodedesc,
			    t1.salesdepartment,
			    t35.gendeptdesc AS salesdepartmentdesc,
			    t1.quickdisb,
			    t1.wifreference,
			    t1.unplanemihlockperiod,
			    t1.unplanemicpz,
			    t1.reagecpz,
			    t1.maxunplannedemi,
			    t1.maxreageholidays,
			    t1.availedunplanemi,
			    t1.availedreageh,
			    t1.bpiamount,
			    t1.deductfeedisb,
			    t1.rvwrateapplfor,
			    t1.schcalonrvw,
			    t1.pastduepftcalmthd,
			    t1.pastduepftmargin,
			    t1.droppingmethod,
			    t1.ratechganyday,
			    t1.promotioncode,
			    t1.restructureloan,
			    t1.oldfinreference,
			    t1.reagebucket,
			    t1.fincategory,
			    t1.productcategory,
			    t1.roundingtarget,
			    t36.entitycode AS lovdescentitycode,
			    t1.eligibilitymethod,
			    t38.fieldcodevalue AS loveligibilitymethod,
			    t38.valuedesc AS lovdesceligibilitymethod,
			    t1.employeename,
			    t37.rofficerdesc AS employeenamedesc,
			    t1.samplingrequired,
			    t1.legalrequired,
			    t1.grcmaxamount,
			    t1.connector,
			    t40.dealername as connectorcode,
			    t40.dealercity as connectordesc
			   FROM financemain t1
			     JOIN rmtfinancetypes t7 ON t1.fintype = t7.fintype
			     LEFT JOIN rmtbranches t12 ON t1.finbranch = t12.branchcode
			     LEFT JOIN finpftdetails t17 ON t17.finreference = t1.finreference
			     LEFT JOIN steppolicyheader t24 ON t1.steppolicy = t24.policycode
			     LEFT JOIN bmtcuststatuscodes t27 ON t1.finstatus = t27.custstscode
			     LEFT JOIN amtvehicledealer t28 ON t1.accountsofficer = t28.dealerid
			     LEFT JOIN mmagreements t29 ON t1.mmaid = t29.mmaid
			     LEFT JOIN relationshipofficers t30 ON t1.dsacode = t30.rofficercode
			     LEFT JOIN relationshipofficers t33 ON t1.referralid = t33.rofficercode
			     LEFT JOIN relationshipofficers t34 ON t1.dmacode = t34.rofficercode
			     LEFT JOIN rmtgendepartments t35 ON t1.salesdepartment = t35.gendepartment
			     LEFT JOIN smtdivisiondetail t36 ON t7.findivision = t36.divisioncode
			     LEFT JOIN relationshipofficers t37 ON t1.employeename = t37.rofficercode
			     LEFT JOIN rmtlovfielddetail t38 ON t1.eligibilitymethod = t38.fieldcodeid AND t38.fieldcode = 'ELGMETHOD'
			     LEFT JOIN loanpurposes t39 ON t1.finpurpose = t39.loanpurposecode
			     LEFT JOIN amtvehicledealer t40 ON t1.connector = t40.dealerid
		</createView>
	</changeSet>
	
	<changeSet id="56" author="Vinay">
		<createView viewName="financemain_tview" replaceIfExists="true">
			 SELECT t1.finreference,
			    t1.investmentref,
			    t1.numberofterms,
			    t1.grcperiodenddate,
			    t1.allowgrcperiod,
			    t1.gracebaserate,
			    t1.gracespecialrate,
			    t1.grcpftrate,
			    t1.grcpftfrq,
			    t1.nextgrcpftdate,
			    t1.allowgrcpftrvw,
			    t1.grcpftrvwfrq,
			    t1.nextgrcpftrvwdate,
			    t1.allowgrccpz,
			    t1.grccpzfrq,
			    t1.nextgrccpzdate,
			    t1.repaybaserate,
			    t1.repayspecialrate,
			    t1.repayprofitrate,
			    t1.repayfrq,
			    t1.nextrepaydate,
			    t1.repaypftfrq,
			    t1.nextrepaypftdate,
			    t1.allowrepayrvw,
			    t1.repayrvwfrq,
			    t1.nextrepayrvwdate,
			    t1.allowrepaycpz,
			    t1.repaycpzfrq,
			    t1.nextrepaycpzdate,
			    t1.maturitydate,
			    t1.cpzatgraceend,
			    t1.downpayment,
			    t1.graceflatamount,
			    t1.reqrepayamount,
			    t1.totalprofit,
			    t1.totalcpz,
			    t1.totalgrosspft,
			    t1.totalgrossgrcpft,
			    t1.totalgracepft,
			    t1.totalgracecpz,
			    t1.grcratebasis,
			    t1.repayratebasis,
			    t1.fintype,
			    t1.finremarks,
			    t1.finccy,
			    t1.schedulemethod,
			    t1.profitdaysbasis,
			    t1.reqmaturity,
			    t1.calterms,
			    t1.calmaturity,
			    t1.firstrepay,
			    t1.lastrepay,
			    t1.finstartdate,
			    t1.finamount,
			    t1.finrepaymentamount,
			    t1.custid,
			    t1.defferments,
			    t1.plandefercount,
			    t1.finbranch,
			    t1.finsourceid,
			    t1.alloweddefrpychange,
			    t1.availeddefrpychange,
			    t1.alloweddeffrqchange,
			    t1.availeddeffrqchange,
			    t1.recaltype,
			    t1.finassetvalue,
			    t1.disbaccountid,
			    t1.repayaccountid,
			    t1.finisactive,
			    t1.limitvalid,
			    t1.overridelimit,
			    t1.securitydeposit,
			    t1.version,
			    t1.lastmntby,
			    t1.lastmnton,
			    t1.recordstatus,
			    t1.rolecode,
			    t1.nextrolecode,
			    t1.taskid,
			    t1.nexttaskid,
			    t1.recordtype,
			    t1.workflowid,
			    t2.fintypedesc AS lovdescfintypename,
			    t2.finmaxamount AS lovdescfinmaxamt,
			    t2.finminamount AS lovdescfinminamount,
			    t1.mindownpayperc,
			    t4.branchdesc AS lovdescfinbranchname,
			    t1.lastrepaydate,
			    t1.lastrepaypftdate,
			    t1.lastrepayrvwdate,
			    t1.lastrepaycpzdate,
			    t1.allowgrcrepay,
			    t1.grcschdmthd,
			    t1.grcmargin,
			    t1.repaymargin,
			    t1.fincurrassetvalue,
			    t1.fincommitmentref,
			    t1.finlimitref,
			    t1.depreciationfrq,
			    t1.fincontractdate,
			    t1.nextdepdate,
			    t1.lastdepdate,
			    t1.finaccount,
			    t1.fincustpftaccount,
			    t1.totalrepayamt,
			    t1.finapproveddate,
			    t1.feechargeamt,
			    t1.blacklisted,
			    t1.finrepaypftonfrq,
			    t1.anualizedpercrate,
			    t1.effectiverateofreturn,
			    t1.migratedfinance,
			    t1.schedulemaintained,
			    t1.scheduleregenerated,
			    t1.finpurpose,
			    t14.loanpurposedesc AS lovdescfinpurposename,
			    t1.finstatus,
			    t1.finstsreason,
			    t1.initiateuser,
			    t1.bankname,
			    t1.iban,
			    t1.accounttype,
			    t1.ddareferenceno,
			    t1.custdsr,
			    t1.jointaccount,
			    t1.jointcustid,
			    t1.downpaybank,
			    t1.downpaysupl,
			    t1.downpayaccount,
			    t1.securitycollateral,
			    t1.approved,
			    t1.discrepancy,
			    t1.limitapproved,
			    t1.graceterms,
			    t2.findivision AS lovdescfindivision,
			    t1.rcdmaintainsts,
			    t1.finrepaymethod,
			    t1.grcprofitdaysbasis,
			    t1.stepfinance,
			    t1.steptype,
			    t1.steppolicy,
			    t1.alwmanualsteps,
			    t1.noofsteps,
			    t1.linkedfinref,
			    t1.nextuserid,
			    t1.priority,
			    t5.policydesc AS lovdescsteppolicyname,
			    t1.grcminrate,
			    t1.grcmaxrate,
			    t1.rpyminrate,
			    t1.rpymaxrate,
			    t1.deviationapproval,
			    t1.manualschedule,
			    t1.takeoverfinance,
			    t1.grcadvbaserate,
			    t1.grcadvmargin,
			    t1.grcadvpftrate,
			    t1.rpyadvbaserate,
			    t1.rpyadvmargin,
			    t1.rpyadvpftrate,
			    t1.supplementrent,
			    t1.increasedcost,
			    t1.creditinsamt,
			    t1.rolloverfrq,
			    t1.nextrolloverdate,
			    t1.shariastatus,
			    t1.initiatedate,
			    t1.finpreapprovedref,
			    t1.mmaid,
			    t1.accountsofficer,
			    t1.feeaccountid,
			    t1.fincancelac,
			    t6.dealername AS lovdescaccountsofficer,
			    t6.dealercity AS lovdescsourcecity,
			    t1.dsacode,
			    t7.rofficerdesc AS dsacodedesc,
			    t1.tdsapplicable,
			    t1.mandateid,
			    t1.droplinefrq,
			    t1.firstdroplinedate,
			    t1.pftservicingodlimit,
			    t1.insuranceamt,
			    t1.deductinsdisb,
			    t1.alwbpi,
			    t1.bpitreatment,
			    t1.planemihalw,
			    t1.planemihmethod,
			    t1.planemihmaxperyear,
			    t1.planemihmax,
			    t1.planemihlockperiod,
			    t1.planemicpz,
			    t1.calroundingmode,
			    t1.alwmultidisb,
			    t1.applicationno,
			    t1.referralid,
			    t8.rofficerdesc AS referraliddesc,
			    t1.dmacode,
			    t9.rofficerdesc AS dmacodedesc,
			    t1.salesdepartment,
			    t10.gendeptdesc AS salesdepartmentdesc,
			    t1.quickdisb,
			    t1.wifreference,
			    t1.unplanemihlockperiod,
			    t1.unplanemicpz,
			    t1.reagecpz,
			    t1.maxunplannedemi,
			    t1.maxreageholidays,
			    t1.availedunplanemi,
			    t1.availedreageh,
			    t1.bpiamount,
			    t1.deductfeedisb,
			    t1.rvwrateapplfor,
			    t1.schcalonrvw,
			    t1.pastduepftcalmthd,
			    t1.pastduepftmargin,
			    t1.droppingmethod,
			    t1.ratechganyday,
			    t1.promotioncode,
			    t1.restructureloan,
			    t1.oldfinreference,
			    t1.reagebucket,
			    t1.fincategory,
			    t1.productcategory,
			    t1.roundingtarget,
			    t11.entitycode AS lovdescentitycode,
			    t1.eligibilitymethod,
			    t13.fieldcodevalue AS loveligibilitymethod,
			    t13.valuedesc AS lovdesceligibilitymethod,
			    t1.employeename,
			    t12.rofficerdesc AS employeenamedesc,
			    t1.samplingrequired,
			    t1.legalrequired,
			    t1.grcmaxamount,
				t1.connector,
			    t15.dealername as connectorcode,
			    t15.dealercity as connectordesc
			   FROM financemain_temp t1
			     JOIN rmtfinancetypes t2 ON t1.fintype = t2.fintype
			     JOIN rmtbranches t4 ON t1.finbranch = t4.branchcode
			     LEFT JOIN steppolicyheader t5 ON t1.steppolicy = t5.policycode
			     LEFT JOIN amtvehicledealer t6 ON t1.accountsofficer = t6.dealerid
			     LEFT JOIN relationshipofficers t7 ON t1.dsacode = t7.rofficercode
			     LEFT JOIN relationshipofficers t8 ON t1.referralid = t8.rofficercode
			     LEFT JOIN relationshipofficers t9 ON t1.dmacode = t9.rofficercode
			     LEFT JOIN rmtgendepartments t10 ON t1.salesdepartment = t10.gendepartment
			     LEFT JOIN smtdivisiondetail t11 ON t2.findivision = t11.divisioncode
			     LEFT JOIN relationshipofficers t12 ON t1.employeename = t12.rofficercode
			     LEFT JOIN rmtlovfielddetail t13 ON t1.eligibilitymethod = t13.fieldcodeid AND t13.fieldcode = 'ELGMETHOD'
			     LEFT JOIN loanpurposes t14 ON t1.finpurpose = t14.loanpurposecode
			     LEFT JOIN amtvehicledealer t15 ON t1.connector = t15.dealerid
		</createView>
	</changeSet>
	
	<changeSet id="57" author="Vinay">
		<createView viewName="financemain_view" replaceIfExists="true">
			 SELECT t1.finreference,
			    t1.investmentref,
			    t1.numberofterms,
			    t1.grcperiodenddate,
			    t1.allowgrcperiod,
			    t1.gracebaserate,
			    t1.gracespecialrate,
			    t1.grcpftrate,
			    t1.grcpftfrq,
			    t1.nextgrcpftdate,
			    t1.allowgrcpftrvw,
			    t1.grcpftrvwfrq,
			    t1.nextgrcpftrvwdate,
			    t1.allowgrccpz,
			    t1.grccpzfrq,
			    t1.nextgrccpzdate,
			    t1.repaybaserate,
			    t1.repayspecialrate,
			    t1.repayprofitrate,
			    t1.repayfrq,
			    t1.nextrepaydate,
			    t1.repaypftfrq,
			    t1.nextrepaypftdate,
			    t1.allowrepayrvw,
			    t1.repayrvwfrq,
			    t1.nextrepayrvwdate,
			    t1.allowrepaycpz,
			    t1.repaycpzfrq,
			    t1.nextrepaycpzdate,
			    t1.maturitydate,
			    t1.cpzatgraceend,
			    t1.downpayment,
			    t1.graceflatamount,
			    t1.reqrepayamount,
			    t1.totalprofit,
			    t1.totalcpz,
			    t1.totalgrosspft,
			    t1.totalgrossgrcpft,
			    t1.totalgracepft,
			    t1.totalgracecpz,
			    t1.grcratebasis,
			    t1.repayratebasis,
			    t1.fintype,
			    t1.finremarks,
			    t1.finccy,
			    t1.schedulemethod,
			    t1.profitdaysbasis,
			    t1.reqmaturity,
			    t1.calterms,
			    t1.calmaturity,
			    t1.firstrepay,
			    t1.lastrepay,
			    t1.finstartdate,
			    t1.finamount,
			    t1.finamount + t1.feechargeamt - t1.downpayment AS lovdescfinancingamount,
			    t1.finrepaymentamount,
			    t1.custid,
			    t1.defferments,
			    t1.plandefercount,
			    t1.finbranch,
			    t1.finsourceid,
			    t1.alloweddefrpychange,
			    t1.availeddefrpychange,
			    t1.alloweddeffrqchange,
			    t1.availeddeffrqchange,
			    t1.recaltype,
			    t1.finassetvalue,
			    t1.disbaccountid,
			    t1.repayaccountid,
			    t1.finisactive,
			    t1.limitvalid,
			    t1.overridelimit,
			    t1.securitydeposit,
			    t1.version,
			    t1.lastmntby,
			    t1.lastmnton,
			    t1.recordstatus,
			    t1.rolecode,
			    t1.nextrolecode,
			    t1.taskid,
			    t1.nexttaskid,
			    t1.recordtype,
			    t1.workflowid,
			    t7.fintypedesc AS lovdescfintypename,
			    t7.finmaxamount AS lovdescfinmaxamt,
			    t7.finminamount AS lovdescfinminamount,
			    t1.mindownpayperc,
			    t7.finisalwdifferment AS lovdescfinalwdeferment,
			    t7.finisdwpayrequired AS lovdescdwnpayreq,
			    t7.finmaxdifferment AS lovdescfinmaxdifferment,
			    t12.branchdesc AS lovdescfinbranchname,
			    t1.lastrepaydate,
			    t1.lastrepaypftdate,
			    t1.lastrepayrvwdate,
			    t1.lastrepaycpzdate,
			    t1.allowgrcrepay,
			    t1.grcschdmthd,
			    t1.grcmargin,
			    t1.repaymargin,
			    t1.fincurrassetvalue,
			    t1.fincommitmentref,
			    t1.finlimitref,
			    t1.depreciationfrq,
			    t1.fincontractdate,
			    t1.nextdepdate,
			    t1.lastdepdate,
			    t1.finaccount,
			    t1.fincustpftaccount,
			    t17.acrtilllbd AS lovdescaccruedtilllbd,
			    t7.finrvwrateapplfor,
			    t1.totalrepayamt,
			    t1.closingstatus,
			    t1.finapproveddate,
			    t1.feechargeamt,
			    t1.blacklisted,
			    t1.finrepaypftonfrq,
			    t1.anualizedpercrate,
			    t1.effectiverateofreturn,
			    t1.migratedfinance,
			    t1.schedulemaintained,
			    t1.scheduleregenerated,
			    t1.finpurpose,
			    t39.loanpurposedesc AS lovdescfinpurposename,
			    t1.finstatus,
			    t1.finstsreason,
			    t1.initiateuser,
			    t1.bankname,
			    t1.iban,
			    t1.accounttype,
			    t1.ddareferenceno,
			    t7.finscheduleon AS lovdescfinscheduleon,
			    t1.custdsr,
			    t1.jointaccount,
			    t1.jointcustid,
			    t1.downpaybank,
			    t1.downpaysupl,
			    t1.downpayaccount,
			    t1.securitycollateral,
			    t1.approved,
			    t1.discrepancy,
			    t1.limitapproved,
			    t1.graceterms,
			    t7.findivision AS lovdescfindivision,
			    t1.rcdmaintainsts,
			    t1.finrepaymethod,
			    t1.grcprofitdaysbasis,
			    t1.stepfinance,
			    t1.steptype,
			    t1.steppolicy,
			    t1.alwmanualsteps,
			    t1.noofsteps,
			    t1.linkedfinref,
			    t1.nextuserid,
			    t1.priority,
			    t24.policydesc AS lovdescsteppolicyname,
			    t1.grcminrate,
			    t1.grcmaxrate,
			    t1.rpyminrate,
			    t1.rpymaxrate,
			    t1.deviationapproval,
			    t1.manualschedule,
			    t1.takeoverfinance,
			    t1.grcadvbaserate,
			    t1.grcadvmargin,
			    t1.grcadvpftrate,
			    t1.rpyadvbaserate,
			    t1.rpyadvmargin,
			    t1.rpyadvpftrate,
			    t1.supplementrent,
			    t1.increasedcost,
			    t1.rolloverfrq,
			    t1.nextrolloverdate,
			    t27.custstsdescription,
			    t1.shariastatus,
			    t1.initiatedate,
			    t1.finpreapprovedref,
			    t1.mmaid,
			    t1.accountsofficer,
			    t1.feeaccountid,
			    t1.fincancelac,
			    t28.dealername AS lovdescaccountsofficer,
			    t28.dealercity AS lovdescsourcecity,
			    t1.dsacode,
			    t30.rofficerdesc AS dsacodedesc,
			    t1.tdsapplicable,
			    t1.mandateid,
			    t1.droplinefrq,
			    t1.firstdroplinedate,
			    t1.pftservicingodlimit,
			    t1.insuranceamt,
			    t1.deductinsdisb,
			    t1.alwbpi,
			    t1.bpitreatment,
			    t1.planemihalw,
			    t1.planemihmethod,
			    t1.planemihmaxperyear,
			    t1.planemihmax,
			    t1.planemihlockperiod,
			    t1.planemicpz,
			    t1.calroundingmode,
			    t1.alwmultidisb,
			    t1.applicationno,
			    t1.referralid,
			    t33.rofficerdesc AS referraliddesc,
			    t1.dmacode,
			    t34.rofficerdesc AS dmacodedesc,
			    t1.salesdepartment,
			    t35.gendeptdesc AS salesdepartmentdesc,
			    t1.quickdisb,
			    t1.wifreference,
			    t1.unplanemihlockperiod,
			    t1.unplanemicpz,
			    t1.reagecpz,
			    t1.maxunplannedemi,
			    t1.maxreageholidays,
			    t1.availedunplanemi,
			    t1.availedreageh,
			    t1.bpiamount,
			    t1.deductfeedisb,
			    t1.rvwrateapplfor,
			    t1.schcalonrvw,
			    t1.pastduepftcalmthd,
			    t1.pastduepftmargin,
			    t1.droppingmethod,
			    t1.ratechganyday,
			    t1.promotioncode,
			    t1.restructureloan,
			    t1.oldfinreference,
			    t1.reagebucket,
			    t1.fincategory,
			    t1.productcategory,
			    t1.roundingtarget,
			    t36.entitycode AS lovdescentitycode,
			    t1.eligibilitymethod,
			    t38.fieldcodevalue AS loveligibilitymethod,
			    t38.valuedesc AS lovdesceligibilitymethod,
			    t1.employeename,
			    t37.rofficerdesc AS employeenamedesc,
			    t1.samplingrequired,
			    t1.legalrequired,
			    t1.grcmaxamount,
			    t1.connector,
			    t40.dealername as connectorcode,
			    t40.dealercity as connectordesc
			   FROM financemain_temp t1
			     JOIN rmtfinancetypes t7 ON t1.fintype = t7.fintype
			     LEFT JOIN rmtbranches t12 ON t1.finbranch = t12.branchcode
			     LEFT JOIN finpftdetails t17 ON t17.finreference = t1.finreference
			     LEFT JOIN steppolicyheader t24 ON t1.steppolicy = t24.policycode
			     LEFT JOIN bmtcuststatuscodes t27 ON t1.finstatus = t27.custstscode
			     LEFT JOIN amtvehicledealer t28 ON t1.accountsofficer = t28.dealerid
			     LEFT JOIN relationshipofficers t30 ON t1.dsacode = t30.rofficercode
			     LEFT JOIN relationshipofficers t33 ON t1.referralid = t33.rofficercode
			     LEFT JOIN relationshipofficers t34 ON t1.dmacode = t34.rofficercode
			     LEFT JOIN rmtgendepartments t35 ON t1.salesdepartment = t35.gendepartment
			     LEFT JOIN smtdivisiondetail t36 ON t7.findivision = t36.divisioncode
			     LEFT JOIN relationshipofficers t37 ON t1.employeename = t37.rofficercode
			     LEFT JOIN rmtlovfielddetail t38 ON t1.eligibilitymethod = t38.fieldcodeid AND t38.fieldcode = 'ELGMETHOD'
			     LEFT JOIN loanpurposes t39 ON t1.finpurpose = t39.loanpurposecode
			     LEFT JOIN amtvehicledealer t40 ON t1.connector = t40.dealerid
			UNION ALL
			 SELECT t1.finreference,
			    t1.investmentref,
			    t1.numberofterms,
			    t1.grcperiodenddate,
			    t1.allowgrcperiod,
			    t1.gracebaserate,
			    t1.gracespecialrate,
			    t1.grcpftrate,
			    t1.grcpftfrq,
			    t1.nextgrcpftdate,
			    t1.allowgrcpftrvw,
			    t1.grcpftrvwfrq,
			    t1.nextgrcpftrvwdate,
			    t1.allowgrccpz,
			    t1.grccpzfrq,
			    t1.nextgrccpzdate,
			    t1.repaybaserate,
			    t1.repayspecialrate,
			    t1.repayprofitrate,
			    t1.repayfrq,
			    t1.nextrepaydate,
			    t1.repaypftfrq,
			    t1.nextrepaypftdate,
			    t1.allowrepayrvw,
			    t1.repayrvwfrq,
			    t1.nextrepayrvwdate,
			    t1.allowrepaycpz,
			    t1.repaycpzfrq,
			    t1.nextrepaycpzdate,
			    t1.maturitydate,
			    t1.cpzatgraceend,
			    t1.downpayment,
			    t1.graceflatamount,
			    t1.reqrepayamount,
			    t1.totalprofit,
			    t1.totalcpz,
			    t1.totalgrosspft,
			    t1.totalgrossgrcpft,
			    t1.totalgracepft,
			    t1.totalgracecpz,
			    t1.grcratebasis,
			    t1.repayratebasis,
			    t1.fintype,
			    t1.finremarks,
			    t1.finccy,
			    t1.schedulemethod,
			    t1.profitdaysbasis,
			    t1.reqmaturity,
			    t1.calterms,
			    t1.calmaturity,
			    t1.firstrepay,
			    t1.lastrepay,
			    t1.finstartdate,
			    t1.finamount,
			    t1.finamount + t1.feechargeamt - t1.downpayment AS lovdescfinancingamount,
			    t1.finrepaymentamount,
			    t1.custid,
			    t1.defferments,
			    t1.plandefercount,
			    t1.finbranch,
			    t1.finsourceid,
			    t1.alloweddefrpychange,
			    t1.availeddefrpychange,
			    t1.alloweddeffrqchange,
			    t1.availeddeffrqchange,
			    t1.recaltype,
			    t1.finassetvalue,
			    t1.disbaccountid,
			    t1.repayaccountid,
			    t1.finisactive,
			    t1.limitvalid,
			    t1.overridelimit,
			    t1.securitydeposit,
			    t1.version,
			    t1.lastmntby,
			    t1.lastmnton,
			    t1.recordstatus,
			    t1.rolecode,
			    t1.nextrolecode,
			    t1.taskid,
			    t1.nexttaskid,
			    t1.recordtype,
			    t1.workflowid,
			    t7.fintypedesc AS lovdescfintypename,
			    t7.finmaxamount AS lovdescfinmaxamt,
			    t7.finminamount AS lovdescfinminamount,
			    t1.mindownpayperc,
			    t7.finisalwdifferment AS lovdescfinalwdeferment,
			    t7.finisdwpayrequired AS lovdescdwnpayreq,
			    t7.finmaxdifferment AS lovdescfinmaxdifferment,
			    t12.branchdesc AS lovdescfinbranchname,
			    t1.lastrepaydate,
			    t1.lastrepaypftdate,
			    t1.lastrepayrvwdate,
			    t1.lastrepaycpzdate,
			    t1.allowgrcrepay,
			    t1.grcschdmthd,
			    t1.grcmargin,
			    t1.repaymargin,
			    t1.fincurrassetvalue,
			    t1.fincommitmentref,
			    t1.finlimitref,
			    t1.depreciationfrq,
			    t1.fincontractdate,
			    t1.nextdepdate,
			    t1.lastdepdate,
			    t1.finaccount,
			    t1.fincustpftaccount,
			    t17.acrtilllbd AS lovdescaccruedtilllbd,
			    t7.finrvwrateapplfor,
			    t1.totalrepayamt,
			    t1.closingstatus,
			    t1.finapproveddate,
			    t1.feechargeamt,
			    t1.blacklisted,
			    t1.finrepaypftonfrq,
			    t1.anualizedpercrate,
			    t1.effectiverateofreturn,
			    t1.migratedfinance,
			    t1.schedulemaintained,
			    t1.scheduleregenerated,
			    t1.finpurpose,
			    t39.loanpurposedesc AS lovdescfinpurposename,
			    t1.finstatus,
			    t1.finstsreason,
			    t1.initiateuser,
			    t1.bankname,
			    t1.iban,
			    t1.accounttype,
			    t1.ddareferenceno,
			    t7.finscheduleon AS lovdescfinscheduleon,
			    t1.custdsr,
			    t1.jointaccount,
			    t1.jointcustid,
			    t1.downpaybank,
			    t1.downpaysupl,
			    t1.downpayaccount,
			    t1.securitycollateral,
			    t1.approved,
			    t1.discrepancy,
			    t1.limitapproved,
			    t1.graceterms,
			    t7.findivision AS lovdescfindivision,
			    t1.rcdmaintainsts,
			    t1.finrepaymethod,
			    t1.grcprofitdaysbasis,
			    t1.stepfinance,
			    t1.steptype,
			    t1.steppolicy,
			    t1.alwmanualsteps,
			    t1.noofsteps,
			    t1.linkedfinref,
			    t1.nextuserid,
			    t1.priority,
			    t24.policydesc AS lovdescsteppolicyname,
			    t1.grcminrate,
			    t1.grcmaxrate,
			    t1.rpyminrate,
			    t1.rpymaxrate,
			    t1.deviationapproval,
			    t1.manualschedule,
			    t1.takeoverfinance,
			    t1.grcadvbaserate,
			    t1.grcadvmargin,
			    t1.grcadvpftrate,
			    t1.rpyadvbaserate,
			    t1.rpyadvmargin,
			    t1.rpyadvpftrate,
			    t1.supplementrent,
			    t1.increasedcost,
			    t1.rolloverfrq,
			    t1.nextrolloverdate,
			    t27.custstsdescription,
			    t1.shariastatus,
			    t1.initiatedate,
			    t1.finpreapprovedref,
			    t1.mmaid,
			    t1.accountsofficer,
			    t1.feeaccountid,
			    t1.fincancelac,
			    t28.dealername AS lovdescaccountsofficer,
			    t28.dealercity AS lovdescsourcecity,
			    t1.dsacode,
			    t30.rofficerdesc AS dsacodedesc,
			    t1.tdsapplicable,
			    t1.mandateid,
			    t1.droplinefrq,
			    t1.firstdroplinedate,
			    t1.pftservicingodlimit,
			    t1.insuranceamt,
			    t1.deductinsdisb,
			    t1.alwbpi,
			    t1.bpitreatment,
			    t1.planemihalw,
			    t1.planemihmethod,
			    t1.planemihmaxperyear,
			    t1.planemihmax,
			    t1.planemihlockperiod,
			    t1.planemicpz,
			    t1.calroundingmode,
			    t1.alwmultidisb,
			    t1.applicationno,
			    t1.referralid,
			    t33.rofficerdesc AS referraliddesc,
			    t1.dmacode,
			    t34.rofficerdesc AS dmacodedesc,
			    t1.salesdepartment,
			    t35.gendeptdesc AS salesdepartmentdesc,
			    t1.quickdisb,
			    t1.wifreference,
			    t1.unplanemihlockperiod,
			    t1.unplanemicpz,
			    t1.reagecpz,
			    t1.maxunplannedemi,
			    t1.maxreageholidays,
			    t1.availedunplanemi,
			    t1.availedreageh,
			    t1.bpiamount,
			    t1.deductfeedisb,
			    t1.rvwrateapplfor,
			    t1.schcalonrvw,
			    t1.pastduepftcalmthd,
			    t1.pastduepftmargin,
			    t1.droppingmethod,
			    t1.ratechganyday,
			    t1.promotioncode,
			    t1.restructureloan,
			    t1.oldfinreference,
			    t1.reagebucket,
			    t1.fincategory,
			    t1.productcategory,
			    t1.roundingtarget,
			    t36.entitycode AS lovdescentitycode,
			    t1.eligibilitymethod,
			    t38.fieldcodevalue AS loveligibilitymethod,
			    t38.valuedesc AS lovdesceligibilitymethod,
			    t1.employeename,
			    t37.rofficerdesc AS employeenamedesc,
			    t1.samplingrequired,
			    t1.legalrequired,
			    t1.grcmaxamount,
			    t1.connector,
			    t40.dealername as connectorcode,
			    t40.dealercity as connectordesc
			   FROM financemain t1
			     JOIN rmtfinancetypes t7 ON t1.fintype = t7.fintype
			     LEFT JOIN rmtbranches t12 ON t1.finbranch = t12.branchcode
			     LEFT JOIN finpftdetails t17 ON t17.finreference = t1.finreference
			     LEFT JOIN steppolicyheader t24 ON t1.steppolicy = t24.policycode
			     LEFT JOIN bmtcuststatuscodes t27 ON t1.finstatus = t27.custstscode
			     LEFT JOIN amtvehicledealer t28 ON t1.accountsofficer = t28.dealerid
			     LEFT JOIN relationshipofficers t30 ON t1.dsacode = t30.rofficercode
			     LEFT JOIN relationshipofficers t33 ON t1.referralid = t33.rofficercode
			     LEFT JOIN relationshipofficers t34 ON t1.dmacode = t34.rofficercode
			     LEFT JOIN rmtgendepartments t35 ON t1.salesdepartment = t35.gendepartment
			     LEFT JOIN smtdivisiondetail t36 ON t7.findivision = t36.divisioncode
			     LEFT JOIN relationshipofficers t37 ON t1.employeename = t37.rofficercode
			     LEFT JOIN rmtlovfielddetail t38 ON t1.eligibilitymethod = t38.fieldcodeid AND t38.fieldcode = 'ELGMETHOD'
			     LEFT JOIN loanpurposes t39 ON t1.finpurpose = t39.loanpurposecode
			     LEFT JOIN amtvehicledealer t40 ON t1.connector = t40.dealerid
			  WHERE NOT (EXISTS ( SELECT 1 AS expr1
			           FROM financemain_temp
			          WHERE financemain_temp.finreference = t1.finreference))
		</createView>
	</changeSet>
	
	<changeSet id="58" author="Vinay">
		<sql>
			UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS);
			UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS); 
			
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'FinanceMainDialog_connector','FinanceMainDialog',0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0; 
			
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='BFSD_ORIGINATION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_connector'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			
			UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS);
			UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS); 
		</sql>
	</changeSet>
	
	<changeSet id="59" author="Vinay">
		<sql>
			update financemain set connector=0;
			update financemain_temp set connector=0;
		</sql>
	</changeSet>
	
	<changeSet id="60" author="Vinay">
		<sql>
			UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS); 
		
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='OD_ODMAINTENANCE_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_connector'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_MAINTAINBASIC_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_connector'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='CL_ORIGINATION_WRM') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_connector'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='CL_ORIGINATION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinanceMainDialog_connector'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			
			UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS); 
		</sql>
	</changeSet>
	
	<changeSet id="61" author="Kesav">
		<sql>
			Delete from ErrorDetails where CODE = '65035';
			Insert into ERRORDETAILS values ('65035','EN','E','Available Amount should be greater than or equals to Deposit Amount.','test','Approved',null,null,null,null,null,0,Current_TimeStamp,1000,0);		
		</sql>
	</changeSet>
	
	<changeSet id="62" author="Kesav">
		<comment>BranchCode and BranchDesc columns added in DepositMovements</comment>
		<createView viewName="DepositMovements_AView" replaceIfExists="true">
			Select 		T1.MovementId, T1.DepositId, T1.TransactionType, T1.ReservedAmount, T1.PartnerBankId, T1.DepositSlipNumber, T1.TransactionDate, T1.ReceiptId, T1.LinkedTranId,
						T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId,
			            T2.PartnerBankCode, T2.PartnerBankName,
                        T4.BranchCode, T4.BranchDesc
			From 		DepositMovements T1
			Left Join   PartnerBanks T2 ON T2.PartnerBankId = T1.PartnerBankId
            Inner Join  DepositDetails T3 ON T3.DepositId = T1.DepositId
            Inner Join  RMTBranches T4 ON T4.BranchCode = T3.BranchCode		
		</createView>
	</changeSet>
	
	<changeSet id="63" author="Kesav">
		<comment>BranchCode and BranchDesc columns added in DepositMovements</comment>
		<createView viewName="DepositMovements_TView" replaceIfExists="true">
			Select 		T1.MovementId, T1.DepositId, T1.TransactionType, T1.ReservedAmount, T1.PartnerBankId, T1.DepositSlipNumber, T1.TransactionDate, T1.ReceiptId, T1.LinkedTranId,
						T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId,
			            T2.PartnerBankCode, T2.PartnerBankName,
                        T4.BranchCode, T4.BranchDesc
			From 		DepositMovements_Temp T1
			Left Join   PartnerBanks T2 ON T2.PartnerBankId = T1.PartnerBankId
            Inner Join  DepositDetails T3 ON T3.DepositId = T1.DepositId
            Inner Join  RMTBranches T4 ON T4.BranchCode = T3.BranchCode
		</createView>
	</changeSet>
	
	<changeSet id="64" author="Kesav">
		<comment>BranchCode and BranchDesc columns added in DepositMovements</comment>
		<createView viewName="DepositMovements_View" replaceIfExists="true">
			Select 		T1.MovementId, T1.DepositId, T1.TransactionType, T1.ReservedAmount, T1.PartnerBankId, T1.DepositSlipNumber, T1.TransactionDate, T1.ReceiptId, T1.LinkedTranId,
						T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId,
			            T2.PartnerBankCode, T2.PartnerBankName,
                        T4.BranchCode, T4.BranchDesc
			From 		DepositMovements_Temp T1
			Left Join   PartnerBanks T2 ON T2.PartnerBankId = T1.PartnerBankId
            Inner Join  DepositDetails T3 ON T3.DepositId = T1.DepositId
            Inner Join  RMTBranches T4 ON T4.BranchCode = T3.BranchCode
			
			Union All
			
			Select 		T1.MovementId, T1.DepositId, T1.TransactionType, T1.ReservedAmount, T1.PartnerBankId, T1.DepositSlipNumber, T1.TransactionDate, T1.ReceiptId, T1.LinkedTranId,
						T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId,
			            T2.PartnerBankCode, T2.PartnerBankName,
                        T4.BranchCode, T4.BranchDesc
			From 		DepositMovements T1
			Left Join   PartnerBanks T2 ON T2.PartnerBankId = T1.PartnerBankId
            Inner Join  DepositDetails T3 ON T3.DepositId = T1.DepositId
            Inner Join  RMTBranches T4 ON T4.BranchCode = T3.BranchCode
			WHERE NOT  (EXISTS ( SELECT 1 FROM DepositDetails_Temp WHERE DepositDetails_Temp.DepositId = T1.DepositId))		
		</createView>
	</changeSet>
	
	<changeSet id="65" author="Kesav">
		<sql>
			Delete from ErrorDetails where CODE = '65036';
			Delete from ErrorDetails where CODE = '65037';
			
			Insert into ERRORDETAILS values ('65036','EN','E','Receipt Cancellation Cannot be Processed, Insufficient funds in Deposit Process.','test','Approved',null,null,null,null,null,0,Current_TimeStamp,1000,0);		
			Insert into ERRORDETAILS values ('65037','EN','E','Receipt Cancellation is in progress to this branch.','test','Approved',null,null,null,null,null,0,Current_TimeStamp,1000,0);		
		</sql>
	</changeSet>
	<changeSet id="66" author="Jayant" dbms="postgresql">
		<dropPrimaryKey tableName="seqjvpostingentry" constraintName="seqjvpostingentry_pkey"/>
	</changeSet>
	<changeSet id="66" author="Jayant" dbms="oracle">
		<dropPrimaryKey tableName="seqjvpostingentry"/>
	</changeSet>
	
	 <changeSet id="67" author="Madhubabu">
	<comment> New Development </comment>
		<createTable tableName="FEEWAIVERHEADER">
			<column name="WAIVERID" type="BIGINT">
				<constraints primaryKey="true" primaryKeyName="PK_FEEWAIVERHEADER"/>
			</column>
			<column name="FINREFERENCE" type="VARCHAR(20)"/>
			<column name="EVENT" type="VARCHAR(20)"/>
			<column name="REMARKS" type="VARCHAR(500)"/>
			<column name="VERSION" type="INT"/>
			<column name="LASTMNTBY" type="BIGINT"/>
			<column name="LASTMNTON" type="DATETIME"/>
			<column name="RECORDSTATUS" type="VARCHAR(50)"/>
			<column name="ROLECODE" type="VARCHAR(100)"/>
			<column name="NEXTROLECODE" type="VARCHAR(200)"/>
			<column name="TASKID" type="VARCHAR(50)"/>
			<column name="NEXTTASKID" type="VARCHAR(200)"/>
			<column name="RECORDTYPE" type="VARCHAR(50)"/>
			<column name="WORKFLOWID" type="BIGINT"/>
			<column name="POSTINGDATE" type="DATETIME"/>
			<column name="VALUEDATE" type="DATETIME"/>
		</createTable>
	</changeSet>
	<changeSet id="68" author="MadhuBabu">
		<addNotNullConstraint tableName="FEEWAIVERHEADER" columnName="WAIVERID"/>
		<addNotNullConstraint tableName="FEEWAIVERHEADER" columnName="VERSION"/>
		<addNotNullConstraint tableName="FEEWAIVERHEADER" columnName="FINREFERENCE"/>
		<addNotNullConstraint tableName="FEEWAIVERHEADER" columnName="EVENT"/>
	</changeSet>
	<changeSet id="69" author="Madhubabu">
	<comment> New Development </comment>
		<createTable tableName="FEEWAIVERHEADER_TEMP">
			<column name="WAIVERID" type="BIGINT">
				<constraints primaryKey="true" primaryKeyName="PK_FEEWAIVERHEADER_TEMP"/>
			</column>
			<column name="FINREFERENCE" type="VARCHAR(20)"/>
			<column name="EVENT" type="VARCHAR(20)"/>
			<column name="REMARKS" type="VARCHAR(500)"/>
			<column name="VERSION" type="INT"/>
			<column name="LASTMNTBY" type="BIGINT"/>
			<column name="LASTMNTON" type="DATETIME"/>
			<column name="RECORDSTATUS" type="VARCHAR(50)"/>
			<column name="ROLECODE" type="VARCHAR(100)"/>
			<column name="NEXTROLECODE" type="VARCHAR(200)"/>
			<column name="TASKID" type="VARCHAR(50)"/>
			<column name="NEXTTASKID" type="VARCHAR(200)"/>
			<column name="RECORDTYPE" type="VARCHAR(50)"/>
			<column name="WORKFLOWID" type="BIGINT"/>
			<column name="POSTINGDATE" type="DATETIME"/>
			<column name="VALUEDATE" type="DATETIME"/>
		</createTable>
	</changeSet>
	<changeSet id="70" author="MadhuBabu">
		<addNotNullConstraint tableName="FEEWAIVERHEADER_TEMP" columnName="WAIVERID"/>
		<addNotNullConstraint tableName="FEEWAIVERHEADER_TEMP" columnName="VERSION"/>
		<addNotNullConstraint tableName="FEEWAIVERHEADER_TEMP" columnName="FINREFERENCE"/>
		<addNotNullConstraint tableName="FEEWAIVERHEADER_TEMP" columnName="EVENT"/>
	</changeSet>
	<changeSet id="71" author="Madhubabu">
	<comment> New Development </comment>
		<createTable tableName="FEEWAIVERDETAILS">
			<column name="WAIVERDETAILID" type="BIGINT">
				<constraints primaryKey="true" primaryKeyName="PK_FEEWAIVERDETAILS"/>
			</column>
			<column name="WAIVERID" type="BIGINT"/>
			<column name="ADVISEID" type="BIGINT"/>
			<column name="FINODSCHDDATE" type="DATETIME"/>
			<column name="FEETYPECODE" type="VARCHAR(20)"/>
			<column name="FEETYPEDESC" type="VARCHAR(100)"/>
			<column name="VERSION" type="INT"/>
			<column name="LASTMNTBY" type="BIGINT"/>
			<column name="LASTMNTON" type="DATETIME"/>
			<column name="RECORDSTATUS" type="VARCHAR(50)"/>
			<column name="ROLECODE" type="VARCHAR(100)"/>
			<column name="NEXTROLECODE" type="VARCHAR(200)"/>
			<column name="TASKID" type="VARCHAR(50)"/>
			<column name="NEXTTASKID" type="VARCHAR(200)"/>
			<column name="RECORDTYPE" type="VARCHAR(50)"/>
			<column name="WORKFLOWID" type="BIGINT"/>
		</createTable>
	</changeSet>
	<changeSet id="72" author="MadhuBabu">
		<addNotNullConstraint tableName="FEEWAIVERDETAILS" columnName="WAIVERID"/>
		<addNotNullConstraint tableName="FEEWAIVERDETAILS" columnName="VERSION"/>
	</changeSet>
	<changeSet id="73" author="Madhubabu">
	<comment> New Development </comment>
		<createTable tableName="FEEWAIVERDETAILS_TEMP">
			<column name="WAIVERDETAILID" type="BIGINT">
				<constraints primaryKey="true" primaryKeyName="PK_FEEWAIVERDETAILS_TEMP"/>
			</column>
			<column name="WAIVERID" type="BIGINT"/>
			<column name="ADVISEID" type="BIGINT"/>
			<column name="FINODSCHDDATE" type="DATETIME"/>
			<column name="FEETYPECODE" type="VARCHAR(20)"/>
			<column name="FEETYPEDESC" type="VARCHAR(100)"/>
			<column name="VERSION" type="INT"/>
			<column name="LASTMNTBY" type="BIGINT"/>
			<column name="LASTMNTON" type="DATETIME"/>
			<column name="RECORDSTATUS" type="VARCHAR(50)"/>
			<column name="ROLECODE" type="VARCHAR(100)"/>
			<column name="NEXTROLECODE" type="VARCHAR(200)"/>
			<column name="TASKID" type="VARCHAR(50)"/>
			<column name="NEXTTASKID" type="VARCHAR(200)"/>
			<column name="RECORDTYPE" type="VARCHAR(50)"/>
			<column name="WORKFLOWID" type="BIGINT"/>
		</createTable>
	</changeSet>
	<changeSet id="74" author="MadhuBabu">
		<addNotNullConstraint tableName="FEEWAIVERDETAILS_TEMP" columnName="WAIVERID"/>
		<addNotNullConstraint tableName="FEEWAIVERDETAILS_TEMP" columnName="VERSION"/>
	</changeSet>
	<changeSet id="75" author="Madhubabu">
		<comment> New Development </comment>
		<createView viewName="FEEWAIVERS_VIEW" replaceIfExists="true">
			SELECT	T1.FinReference, T1.FinBranch, T1.FinType, T1.FinCcy, T1.ScheduleMethod, T1.ProfitDaysBasis, T1.FinStartDate, T1.NumberOfTerms,
					T1.CustID, T1.FinAmount, T1.MaturityDate, T1.FinRepaymentAmount, T1.FinIsActive, T1.Blacklisted, T1.FeeChargeAmt, T1.InsuranceAmt,
					T1.GraceTerms,T1.AllowGrcPeriod,T1.GrcPeriodEndDate, T1.AlwMultiDisb, T1.Defferments,
					T1.allowgrcpftrvw, T1.allowrepayrvw, T1.lastrepaydate, T1.lastrepaypftdate, T1.AllowedDefRpyChange, T1.AvailedDefRpyChange, 
					T1.MigratedFinance, T1.ClosingStatus, T1.RepayRateBasis, T1.ManualSchedule, T1.FinCurrAssetValue,  
					T1.TakeOverFinance , T1.NextRolloverDate, T1.AvailedUnPlanEmi, T1.AvailedReAgeH, T1.MaxUnplannedEmi, T1.MaxReAgeHolidays,
					T1.DownPayment, T1.planEMIHAlw, T1.CalTerms, T1.RateChgAnyDay, T1.finAssetValue,
					T2.CustCIF LovDescCustCIF, 
					T3.FinIsAlwDifferment lovDescFinAlwDeferment, T3.FinDivision LovDescFinDivision, T3.FinCategory LovDescProductCodeName, 
					T4.ProductCategory, COALESCE(T9.NOINST,0) NOINST,
					
					COALESCE(T5.RoleDesc,  FN_GET_ROLEDESC(T10.NextRoleCode)) LovDescRequestStage,
					T10.WaiverId, T10.Event RcdMaintainSts, T10.NextRoleCode, T10.RecordStatus, T10.RecordType
		
			FROM     	FeeWaiverHeader_Temp T10 INNER JOIN		
						FinanceMain  T1 ON T1.FinReference = T10.FinReference INNER JOIN		
						Customers T2 ON T1.CustId = T2.CustId INNER JOIN		
						RMTFinanceTypes T3 ON T1.FinType = T3.FinType LEFT OUTER JOIN 
						SecRoles T5 ON T10.NextRoleCode = T5.RoleCd INNER JOIN 		
						BMTProduct T4 ON T3.FinCategory = T4.ProductCode LEFT JOIN 		
						FinPftDetails T9 ON T1.FinReference = T9.FinReference
						
						WHERE T10.Event = 'FeeWaivers'
			
			UNION ALL
				
			SELECT	   	T1.FinReference, T1.FinBranch, T1.FinType, T1.FinCcy, T1.ScheduleMethod, T1.ProfitDaysBasis, T1.FinStartDate, T1.NumberOfTerms,
						T1.CustID, T1.FinAmount, T1.MaturityDate, T1.FinRepaymentAmount, T1.FinIsActive, T1.Blacklisted, T1.FeeChargeAmt, T1.InsuranceAmt,
						T1.GraceTerms,T1.AllowGrcPeriod,T1.GrcPeriodEndDate, T1.AlwMultiDisb, T1.Defferments,
						T1.allowgrcpftrvw, T1.allowrepayrvw, T1.lastrepaydate, T1.lastrepaypftdate, T1.AllowedDefRpyChange, T1.AvailedDefRpyChange, 
						T1.MigratedFinance, T1.ClosingStatus, T1.RepayRateBasis, T1.ManualSchedule, T1.FinCurrAssetValue,  
						T1.TakeOverFinance , T1.NextRolloverDate, T1.AvailedUnPlanEmi, T1.AvailedReAgeH, T1.MaxUnplannedEmi, T1.MaxReAgeHolidays,
						T1.DownPayment, T1.planEMIHAlw, T1.CalTerms, T1.RateChgAnyDay, T1.finAssetValue,
						T2.CustCIF LovDescCustCIF, 
						T3.FinIsAlwDifferment lovDescFinAlwDeferment, T3.FinDivision LovDescFinDivision, T3.FinCategory LovDescProductCodeName, 
						T4.ProductCategory, COALESCE(T9.NOINST,0) NOINST,
						
						NULL LovDescRequestStage, NULL FinMaintainId, NULL RcdMaintainSts, NULL NextRoleCode, NULL RecordStatus, NULL RecordType
						
			FROM        FinanceMain T1 INNER JOIN
						Customers T2 ON T1.CustId = T2.CustId INNER JOIN
						RMTFinanceTypes T3 ON T1.FinType = T3.FinType LEFT OUTER JOIN
						SecRoles T5 ON T1.NextRoleCode = T5.RoleCd INNER JOIN
						BMTProduct T4 ON T3.FinCategory = T4.ProductCode LEFT JOIN
						FinPftDetails T9 ON T1.FinReference = T9.FinReference
				  
			WHERE     	(NOT EXISTS (SELECT 1 Expr1 FROM FeeWaiverHeader_Temp WHERE (FinReference = T1.FinReference)))
		
			 
		</createView>
	</changeSet>
	<changeSet id="76" author="Madhubabu">
	<comment> New Development </comment>
		<createView viewName="FEEWAIVERHEADER_VIEW" replaceIfExists="true">
			SELECT	    T1.WaiverId, T1.FinReference, T1.Event, T1.Remarks, T1.Version , T1.LastMntBy, T1.LastMntOn,T1.RecordStatus, 
	                  	T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId,T1.Postingdate,T1.valueDate
	                  	
	      	FROM    	FeeWaiverHeader_Temp  T1 
	
	     	UNION ALL
	      
	      	SELECT	    T1.WaiverId, T1.FinReference, T1.Event,  T1.Remarks, T1.Version , T1.LastMntBy, T1.LastMntOn,T1.RecordStatus, 
	                  	T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId,T1.Postingdate,T1.valueDate
	                  	
	      	FROM    	FeeWaiverHeader  T1 
          

	     	WHERE     (NOT EXISTS  (SELECT  1 FROM FeeWaiverHeader_Temp WHERE (WaiverId = T1.WaiverId)))
			 
		</createView>
	</changeSet>
	<changeSet id="77" author="Madhubabu">
	<comment> New Development </comment>
		<createView viewName="FEEWAIVERHEADER_TVIEW" replaceIfExists="true">
			SELECT	    T1.WaiverId, T1.FinReference, T1.Event, T1.Remarks, T1.Version , T1.LastMntBy, T1.LastMntOn,T1.RecordStatus, 
	                  	T1.RoleCode, T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId,T1.Postingdate,T1.valueDate
	      	FROM    	FeeWaiverHeader_Temp  T1
		</createView>
	</changeSet>
	
	<changeSet id="67" author="Akhilesh.k">
		 <sql>
			UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS);
			UPDATE SEQSECGROUPS SET SEQNO= (SELECT MAX(GRPID) FROM SECGROUPS);
			UPDATE SEQSECROLEGROUPS SET SEQNO= (SELECT MAX(Rolegrpid) FROM SECROLEGROUPS);	
			UPDATE SEQSECGROUPRIGHTS SET SEQNO= (SELECT MAX(Grprightid) FROM SECGROUPRIGHTS);	
			UPDATE SEQSECROLES SET SEQNO= (SELECT MAX(roleid) FROM SECROLES );	
			UPDATE SEQSECOPERATIONS SET SEQNO= (SELECT MAX(oprid) FROM SECOPERATIONS);	
			UPDATE SEQSecOperationRoles SET SEQNO= (SELECT MAX(OprRoleID) FROM SecOperationRoles);	
			
			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menu_Item_DisbursmentOTCDownloadReport','FileDBInterface',0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0; 
			
			INSERT INTO SECGROUPS SELECT (SELECT MAX(GRPID)+1 FROM SECGROUPS), 'DISBURSEMENT_OTC_REPORT', 'Disbursement OTC Detail Report', 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0 FROM SEQSECGROUPS WHERE 0=0;
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='DISBURSEMENT_OTC_REPORT') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='menu_Item_DisbursmentOTCDownloadReport'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);
			
			INSERT INTO SECROLES SELECT (select MAX(RoleID)+1 from SecRoles),1,'DISBURSEMENT_OTC_REPORT','Disbursement OTC Detail Report','',0,1000,null,' ',' ',null,' ',' ',' ',0 FROM SeqSecRoles WHERE 0=0;
			INSERT INTO SecRoleGroups values((Select MAX(RoleGrpID)+1 From SecRoleGroups),(Select GrpId  From SecGroups Where GrpCode='DISBURSEMENT_OTC_REPORT'), (Select  RoleID  From SecRoles Where RoleCd='DISBURSEMENT_OTC_REPORT'),0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0); 
			INSERT INTO SECOPERATIONS SELECT (SELECT MAX(OPRID)+1 FROM SECOPERATIONS), 'DISBURSEMENT_OTC_REPORT_OPERATION', 'Disbursement otc report operation.', 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0 FROM SEQSECOPERATIONS WHERE 0=0;
			INSERT INTO SecOperationRoles values((Select MAX(OprRoleID)+1 From SecOperationRoles),(Select OprId  From SecOperations Where OprCode='DISBURSEMENT_OTC_REPORT_OPERATION'), (Select  RoleID  From SecRoles Where RoleCd='DISBURSEMENT_OTC_REPORT'),0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0); 
			
			UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS);
			UPDATE SEQSECGROUPS SET SEQNO= (SELECT MAX(GRPID) FROM SECGROUPS);
			UPDATE SEQSECROLEGROUPS SET SEQNO= (SELECT MAX(Rolegrpid) FROM SECROLEGROUPS);	
			UPDATE SEQSECGROUPRIGHTS SET SEQNO= (SELECT MAX(Grprightid) FROM SECGROUPRIGHTS);	
			UPDATE SEQSECROLES SET SEQNO= (SELECT MAX(roleid) FROM SECROLES );	
			UPDATE SEQSECOPERATIONS SET SEQNO= (SELECT MAX(oprid) FROM SECOPERATIONS);	
			UPDATE SEQSecOperationRoles SET SEQNO= (SELECT MAX(OprRoleID) FROM SecOperationRoles);
		 </sql>
	</changeSet>
	
	<changeSet id="68" author="Akhilesh.k">
		<sql>
			DELETE FROM SMTPARAMETERS where SYSPARMCODE = 'DISB_ALLOW_WITH_COVENANT_OTC_REPAY_METHOD';
			INSERT INTO SMTPARAMETERS VALUES ('DISB_ALLOW_WITH_COVENANT_OTC_REPAY_METHOD', 'disbursement download allow with covenant otc repay method', 'String', 1, 'DD,CHEQUE', 1, 0, NULL, NULL,'disbursement download allow with covenant otc repay method', 1, 1000, CURRENT_TIMESTAMP,'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		</sql>
	</changeSet>
	<changeSet id="78" author="Madhubabu">
		<createSequence sequenceName="SeqFeeWaiverHeader"/>
	</changeSet>
</databaseChangeLog>
	