<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">
	<property name="add.schema" value="dbo." dbms="mssql" />
	<property name="add.schema" value=" " dbms="oracle" />
	<property name="call.substr" value="substring" dbms="mssql" />
	<property name="call.substr" value="substr" dbms="oracle" />
	<property name="call.substr" value="substring" dbms="postgresql" />
	<property name="call.auditdb" value="PFFBFSQCAudit.." dbms="mssql" />
	<property name="call.auditdb" value=" " dbms="oracle" />
	<property name="call.concatenate" value="+" dbms="mssql" />
	<property name="call.concatenate" value="||" dbms="oracle" />
	<property name="call.concatenate" value="||" dbms="postgresql" />
	<property name="call.collength" value="LEN" dbms="mssql" />
	<property name="call.collength" value="LENGTH" dbms="oracle" />
	<property name="call.collength" value="LENGTH" dbms="postgresql" />
	<property name="call.date" value="getdate()" dbms="mssql" />
	<property name="call.date" value="sysdate" dbms="oracle" />
	<property name="call.date" value="now()::timestamp" dbms="postgresql" />


	<changeSet id="1" author="bharat">
		<addColumn tableName="FINREPAYHEADER">
			<column name="AdviseAmount" type="decimal(18,0)" />
			<column name="CpzChg" type="decimal(18,0)" />
		</addColumn>
		<addColumn tableName="FINREPAYHEADER_TEMP">
			<column name="AdviseAmount" type="decimal(18,0)" />
			<column name="CpzChg" type="decimal(18,0)" />
		</addColumn>
	</changeSet>

	<changeSet id="1.1" author="satyanarayana.g" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE FINREPAYHEADER ADD CONSTRAINT DF_FINREPAYHEADER_ADVISEAMOUNT DEFAULT 0 FOR ADVISEAMOUNT;
				ALTER TABLE FINREPAYHEADER ADD CONSTRAINT DF_FINREPAYHEADER_CPZCHG DEFAULT 0 FOR CPZCHG;
				ALTER TABLE FINREPAYHEADER_TEMP ADD CONSTRAINT DF_FINREPAYHEADER_TEMP_ADVISEAMOUNT DEFAULT 0 FOR ADVISEAMOUNT;
				ALTER TABLE FINREPAYHEADER_TEMP ADD CONSTRAINT DF_FINREPAYHEADER_TEMP_CPZCHG DEFAULT 0 FOR CPZCHG;
			]]>
		</sql>
	</changeSet>

	<changeSet id="1.1" author="satyanarayana.g" dbms="postgresql, oracle">
		<addDefaultValue columnName="ADVISEAMOUNT" tableName="FINREPAYHEADER" defaultValue="0" />
		<addDefaultValue columnName="CPZCHG" tableName="FINREPAYHEADER" defaultValue="0" />
		<addDefaultValue columnName="ADVISEAMOUNT" tableName="FINREPAYHEADER_TEMP" defaultValue="0" />
		<addDefaultValue columnName="CPZCHG" tableName="FINREPAYHEADER_TEMP" defaultValue="0" />
	</changeSet>

	<changeSet id="1.2" author="satyanarayana.g">
		<sql>
			<![CDATA[
				UPDATE FINREPAYHEADER set ADVISEAMOUNT = 0 where ADVISEAMOUNT is null;
				UPDATE FINREPAYHEADER set CPZCHG = 0 where CPZCHG is null;
				UPDATE FINREPAYHEADER_TEMP set ADVISEAMOUNT = 0 where ADVISEAMOUNT is null;
				UPDATE FINREPAYHEADER_TEMP set CPZCHG = 0 where CPZCHG is null;
			]]>
		</sql>
	</changeSet>

	<changeSet id="1.3" author="shinde.b">
		<addNotNullConstraint tableName="FINREPAYHEADER" columnName="ADVISEAMOUNT" columnDataType="decimal(18,0)" />
		<addNotNullConstraint tableName="FINREPAYHEADER" columnName="CPZCHG" columnDataType="decimal(18,0)" />
		<addNotNullConstraint tableName="FINREPAYHEADER_TEMP" columnName="ADVISEAMOUNT" columnDataType="decimal(18,0)" />
		<addNotNullConstraint tableName="FINREPAYHEADER_TEMP" columnName="CPZCHG" columnDataType="decimal(18,0)" />
	</changeSet>

	<changeSet id="2" author="satyanarayana.g">
		<sql>
		   <![CDATA[
			  UPDATE SeqWorkFlowDetails SET SEQNO= (SELECT MAX(WorkflowId)+1 FROM workflowdetails);
			  UPDATE WorkFlowDetails SET WorkFlowActive= 0 where WorkFlowType='RECEIPT_KNOCK_OFF';
			]]>
		</sql>
		<insert tableName="WorkFlowDetails">
			<column name="WorkFlowId" valueComputed="(select max(WorkFlowId) + 1 from WorkFlowDetails)" />
			<column name="WorkFlowType">RECEIPT_KNOCK_OFF</column>
			<column name="WorkFlowSubType">Receipt Realization Workflow Process</column>
			<column name="WorkFlowDesc">Maker/checker for Receipt Realization Workflow</column>
			<column name="JsonDesign" type="nclob"><![CDATA[NULL]]></column>
			<column name="SvgDesign" type="nclob"><![CDATA[NULL]]></column>
			<column name="WorkFlowXml" type="clob"><![CDATA[NULL]]></column>
			<column name="WorkFlowRoles">RECEIPTKNOCKOFF_MAKER;RECEIPTKNOCKOFF_APPROVER</column>
			<column name="FirstTaskOwner">RECEIPTKNOCKOFF_MAKER</column>
			<column name="WorkFlowActive">1</column>
			<column name="Version">5</column>
			<column name="LastMntBy">1000</column>
			<column name="LastMntOn" valueDate="current_timestamp" />
			<column name="RecordStatus">Null</column>
			<column name="RoleCode">Null</column>
			<column name="NextRoleCode">Null</column>
			<column name="TaskId">Null</column>
			<column name="NextTaskId">Null</column>
			<column name="RecordType">NULL</column>
		</insert>
	</changeSet>

	<changeSet id="2.1" author="satyanarayana.g">
		<update tableName="WORKFLOWDETAILS">
			<column name="JSONDESIGN" type="NCLOB"><![CDATA[{"resourceId":1053,"properties":{"process_id":"RECEIPT_KNOCK_OFF","name":"Receipt Knock Off Process","documentation":"","category":"","listenerclass":"","listenerentitytype":""},"stencil":{"id":"BPMNDiagram"},"childShapes":[{"resourceId":"startEvent1","properties":{"overrideid":"","name":"Start"},"stencil":{"id":"StartNoneEvent"},"childShapes":[],"outgoing":[{"resourceId":"sid-C4F2FE9A-D693-4F78-BF35-59FC61E39BB3"}],"bounds":{"lowerRight":{"x":90,"y":190},"upperLeft":{"x":60,"y":160}},"dockers":[]},{"resourceId":"sid-8ED2D976-6A19-4EE3-B633-F80094375212","properties":{"overrideid":"","name":"Knock Off Maker","usertaskassignment":{"assignment":{"type":"idm","idm":{"type":"user","assignee":{"email":"RECEIPTKNOCKOFF_MAKER","firstName":"RECEIPTKNOCKOFF_MAKER","fullName":"RECEIPTKNOCKOFF_MAKER","id":"RECEIPTKNOCKOFF_MAKER","roledesc":"Receipt Knock Off Maker Role","$$hashKey":"object:1562"}}}},"additionalforms":"","formkeydefinition":"","allowrevert":"","prioritydefinition":"Role Queue","baseactor":"","duedatedefinition":"","multiinstance_type":"None","isforcompensation":"false"},"stencil":{"id":"UserTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-69A3855B-58E0-4715-A009-4FCB1DFA63A7"},{"resourceId":"sid-7B92DDCE-32BB-452C-9692-B47DA3079347"}],"bounds":{"lowerRight":{"x":280,"y":215},"upperLeft":{"x":180,"y":135}},"dockers":[]},{"resourceId":"sid-C4F2FE9A-D693-4F78-BF35-59FC61E39BB3","properties":{"overrideid":"","name":"","repruseaction":"false","conditionsequenceflow":"","defaultflow":"false","action":"","state":"","mandatenotes":"false","capturereasons":"false","typeofreason":"","constraint":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-8ED2D976-6A19-4EE3-B633-F80094375212"}],"bounds":{"lowerRight":{"x":179.3515625,"y":175},"upperLeft":{"x":90.53125,"y":175}},"dockers":[{"x":15,"y":15},{"x":50,"y":40}],"target":{"resourceId":"sid-8ED2D976-6A19-4EE3-B633-F80094375212"}},{"resourceId":"sid-BA71D229-59DF-47FF-A7BA-EDF50A275EDB","properties":{"overrideid":"","name":"Knock Off Approver","usertaskassignment":{"assignment":{"type":"idm","idm":{"type":"user","assignee":{"email":"RECEIPTKNOCKOFF_APPROVER","firstName":"RECEIPTKNOCKOFF_APPROVER","fullName":"RECEIPTKNOCKOFF_APPROVER","id":"RECEIPTKNOCKOFF_APPROVER","roledesc":"Receipt Knock Off Approver role","$$hashKey":"object:2972"}}}},"additionalforms":"Accounting","formkeydefinition":"","allowrevert":"","prioritydefinition":"Role Queue","baseactor":"","duedatedefinition":"","multiinstance_type":"None","isforcompensation":"false"},"stencil":{"id":"UserTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-8A1197AA-0D42-4D5F-8213-A38D370CD205"}],"bounds":{"lowerRight":{"x":445,"y":215},"upperLeft":{"x":345,"y":135}},"dockers":[]},{"resourceId":"sid-DBB8BA2F-D908-4529-8E55-AD2544873E25","properties":{"overrideid":"","name":"","sequencefloworder":""},"stencil":{"id":"ExclusiveGateway"},"childShapes":[],"outgoing":[{"resourceId":"sid-49608423-B2DA-48A9-A488-BC1CD36C3752"},{"resourceId":"sid-322D8464-2984-4223-A3A2-DC5415BFF15A"},{"resourceId":"sid-D70E6AE1-61AE-4732-8DE8-478CD8F2010F"}],"bounds":{"lowerRight":{"x":520,"y":195},"upperLeft":{"x":480,"y":155}},"dockers":[]},{"resourceId":"sid-25781B18-EE31-46CC-A854-60810F1085AA","properties":{"overrideid":"","name":"Complete Process","rerunnable":true,"servicetaskexpression":"doApprove","isforcompensation":"false","multiinstance_type":"None","parameters":""},"stencil":{"id":"approveTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-4282B9CF-1902-4C3C-9026-EDF630137858"}],"bounds":{"lowerRight":{"x":700,"y":215},"upperLeft":{"x":600,"y":135}},"dockers":[]},{"resourceId":"sid-E2E517DA-F117-42DB-9518-E6810E555844","properties":{"overrideid":"","name":"Cancel Process","rerunnable":true,"servicetaskexpression":"doReject","isforcompensation":"false","multiinstance_type":"None","parameters":""},"stencil":{"id":"rejectTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-ECF25D4E-4A2D-423D-BC9F-4AD94839A62F"}],"bounds":{"lowerRight":{"x":550,"y":335},"upperLeft":{"x":450,"y":255}},"dockers":[]},{"resourceId":"sid-7BCCED83-99D9-4011-A1D9-0702781C3E8B","properties":{"overrideid":"","name":"Approved"},"stencil":{"id":"EndNoneEvent"},"childShapes":[],"outgoing":[],"bounds":{"lowerRight":{"x":763,"y":189},"upperLeft":{"x":735,"y":161}},"dockers":[]},{"resourceId":"sid-4282B9CF-1902-4C3C-9026-EDF630137858","properties":{"overrideid":"","name":"","repruseaction":"false","conditionsequenceflow":"","defaultflow":"false","action":"","state":"","mandatenotes":"false","capturereasons":"false","typeofreason":"","constraint":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-7BCCED83-99D9-4011-A1D9-0702781C3E8B"}],"bounds":{"lowerRight":{"x":734.078125,"y":175},"upperLeft":{"x":700.5,"y":175}},"dockers":[{"x":50,"y":40},{"x":14,"y":14}],"target":{"resourceId":"sid-7BCCED83-99D9-4011-A1D9-0702781C3E8B"}},{"resourceId":"sid-469B1AD4-984C-4DD4-A5CD-E7A5F9B11E5B","properties":{"overrideid":"","name":"Rejected"},"stencil":{"id":"EndNoneEvent"},"childShapes":[],"outgoing":[],"bounds":{"lowerRight":{"x":658,"y":309},"upperLeft":{"x":630,"y":281}},"dockers":[]},{"resourceId":"sid-ECF25D4E-4A2D-423D-BC9F-4AD94839A62F","properties":{"overrideid":"","name":"","repruseaction":"false","conditionsequenceflow":"","defaultflow":"false","action":"","state":"","mandatenotes":"false","capturereasons":"false","typeofreason":"","constraint":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-469B1AD4-984C-4DD4-A5CD-E7A5F9B11E5B"}],"bounds":{"lowerRight":{"x":629.5,"y":295},"upperLeft":{"x":550.5,"y":295}},"dockers":[{"x":50,"y":40},{"x":14,"y":14}],"target":{"resourceId":"sid-469B1AD4-984C-4DD4-A5CD-E7A5F9B11E5B"}},{"resourceId":"sid-69A3855B-58E0-4715-A009-4FCB1DFA63A7","properties":{"overrideid":"","name":"Submit","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Submitted'"}},"defaultflow":"false","action":"Submit","state":"Submitted","mandatenotes":"false","capturereasons":"false","typeofreason":"","constraint":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-BA71D229-59DF-47FF-A7BA-EDF50A275EDB"}],"bounds":{"lowerRight":{"x":344.37109375,"y":175},"upperLeft":{"x":280.62890625,"y":175}},"dockers":[{"x":50,"y":40},{"x":50,"y":40}],"target":{"resourceId":"sid-BA71D229-59DF-47FF-A7BA-EDF50A275EDB"}},{"resourceId":"sid-7B92DDCE-32BB-452C-9692-B47DA3079347","properties":{"overrideid":"","name":"Cancel","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Cancelled'"}},"defaultflow":"false","action":"Cancel","state":"Cancelled","mandatenotes":true,"capturereasons":"false","typeofreason":"","constraint":"","showdiamondmarker":false},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-E2E517DA-F117-42DB-9518-E6810E555844"}],"bounds":{"lowerRight":{"x":449.2016833207592,"y":295},"upperLeft":{"x":230,"y":215.34375}},"dockers":[{"x":50,"y":71},{"x":230,"y":295},{"x":29.431995265992725,"y":40}],"target":{"resourceId":"sid-E2E517DA-F117-42DB-9518-E6810E555844"}},{"resourceId":"sid-8A1197AA-0D42-4D5F-8213-A38D370CD205","properties":{"overrideid":"","name":"","repruseaction":"false","conditionsequenceflow":"","defaultflow":"false","action":"","state":"","mandatenotes":"false","capturereasons":"false","typeofreason":"","constraint":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-DBB8BA2F-D908-4529-8E55-AD2544873E25"}],"bounds":{"lowerRight":{"x":479.718761230466,"y":175.40151071673208},"upperLeft":{"x":445.453113769534,"y":175.23911428326792}},"dockers":[{"x":50,"y":40},{"x":20.5,"y":20.5}],"target":{"resourceId":"sid-DBB8BA2F-D908-4529-8E55-AD2544873E25"}},{"resourceId":"sid-49608423-B2DA-48A9-A488-BC1CD36C3752","properties":{"overrideid":"","name":"Approve","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Approved'"}},"defaultflow":"false","action":"Approve","state":"Approved","mandatenotes":"false","capturereasons":"false","typeofreason":"","constraint":"","showdiamondmarker":false},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-25781B18-EE31-46CC-A854-60810F1085AA"}],"bounds":{"lowerRight":{"x":599.9453180927317,"y":175.43415553709943},"upperLeft":{"x":520.1874944072683,"y":175.16740696290057}},"dockers":[{"x":20.5,"y":20.5},{"x":50,"y":40}],"target":{"resourceId":"sid-25781B18-EE31-46CC-A854-60810F1085AA"}},{"resourceId":"sid-322D8464-2984-4223-A3A2-DC5415BFF15A","properties":{"overrideid":"","name":"Resubmit","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Resubmitted'"}},"defaultflow":"false","action":"Resubmit","state":"Resubmitted","mandatenotes":true,"capturereasons":"false","typeofreason":"","constraint":"","showdiamondmarker":false},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-8ED2D976-6A19-4EE3-B633-F80094375212"}],"bounds":{"lowerRight":{"x":500.5,"y":154.90625},"upperLeft":{"x":230,"y":71}},"dockers":[{"x":20.5,"y":20.5},{"x":500.5,"y":71},{"x":230,"y":71},{"x":50,"y":63}],"target":{"resourceId":"sid-8ED2D976-6A19-4EE3-B633-F80094375212"}},{"resourceId":"sid-D70E6AE1-61AE-4732-8DE8-478CD8F2010F","properties":{"overrideid":"","name":"Reject","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Rejected'"}},"defaultflow":"false","action":"Reject","state":"Rejected","mandatenotes":true,"capturereasons":"false","typeofreason":"","constraint":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-E2E517DA-F117-42DB-9518-E6810E555844"}],"bounds":{"lowerRight":{"x":500.417690936206,"y":254.78907125323323},"upperLeft":{"x":500.168246563794,"y":195.17186624676677}},"dockers":[{"x":20.5,"y":20.5},{"x":50,"y":40}],"target":{"resourceId":"sid-E2E517DA-F117-42DB-9518-E6810E555844"}}],"bounds":{"lowerRight":{"x":1200,"y":1050},"upperLeft":{"x":0,"y":0}},"stencilset":{"url":"stencilsets/bpmn2.0/bpmn2.0.json","namespace":"http://b3mn.org/stencilset/bpmn2.0#"},"ssextensions":[]}]]></column>
			<column name="WORKFLOWXML" type="CLOB"><![CDATA[<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:activiti="http://activiti.org/bpmn" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI" typeLanguage="http://www.w3.org/2001/XMLSchema" expressionLanguage="http://www.w3.org/1999/XPath" targetNamespace="http://activiti.org/test">
  <process id="RECEIPT_KNOCK_OFF" name="Receipt Knock Off Process" isExecutable="true">
    <startEvent id="startEvent1" name="Start"/>
    <userTask id="sid-8ED2D976-6A19-4EE3-B633-F80094375212" name="Knock Off Maker" activiti:actor="RECEIPTKNOCKOFF_MAKER" activiti:assignmentLevel="Role Queue"/>
    <sequenceFlow id="sid-C4F2FE9A-D693-4F78-BF35-59FC61E39BB3" sourceRef="startEvent1" targetRef="sid-8ED2D976-6A19-4EE3-B633-F80094375212" representsUserAction="false" mandateNotes="false" captureReasons="false"/>
    <userTask id="sid-BA71D229-59DF-47FF-A7BA-EDF50A275EDB" name="Knock Off Approver" activiti:actor="RECEIPTKNOCKOFF_APPROVER" activiti:additionalForms="Accounting" activiti:assignmentLevel="Role Queue"/>
    <exclusiveGateway id="sid-DBB8BA2F-D908-4529-8E55-AD2544873E25"/>
    <serviceTask id="sid-25781B18-EE31-46CC-A854-60810F1085AA" name="Complete Process" activiti:operation="doApprove" activiti:rerunnable="true"/>
    <serviceTask id="sid-E2E517DA-F117-42DB-9518-E6810E555844" name="Cancel Process" activiti:operation="doReject" activiti:rerunnable="true"/>
    <endEvent id="sid-7BCCED83-99D9-4011-A1D9-0702781C3E8B" name="Approved"/>
    <sequenceFlow id="sid-4282B9CF-1902-4C3C-9026-EDF630137858" sourceRef="sid-25781B18-EE31-46CC-A854-60810F1085AA" targetRef="sid-7BCCED83-99D9-4011-A1D9-0702781C3E8B" representsUserAction="false" mandateNotes="false" captureReasons="false"/>
    <endEvent id="sid-469B1AD4-984C-4DD4-A5CD-E7A5F9B11E5B" name="Rejected"/>
    <sequenceFlow id="sid-ECF25D4E-4A2D-423D-BC9F-4AD94839A62F" sourceRef="sid-E2E517DA-F117-42DB-9518-E6810E555844" targetRef="sid-469B1AD4-984C-4DD4-A5CD-E7A5F9B11E5B" representsUserAction="false" mandateNotes="false" captureReasons="false"/>
    <sequenceFlow id="sid-69A3855B-58E0-4715-A009-4FCB1DFA63A7" name="Submit" sourceRef="sid-8ED2D976-6A19-4EE3-B633-F80094375212" targetRef="sid-BA71D229-59DF-47FF-A7BA-EDF50A275EDB" action="Submit" state="Submitted" representsUserAction="true" mandateNotes="false" captureReasons="false">
      <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Submitted'</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-7B92DDCE-32BB-452C-9692-B47DA3079347" name="Cancel" sourceRef="sid-8ED2D976-6A19-4EE3-B633-F80094375212" targetRef="sid-E2E517DA-F117-42DB-9518-E6810E555844" action="Cancel" state="Cancelled" representsUserAction="true" mandateNotes="true" captureReasons="false">
      <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Cancelled'</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-8A1197AA-0D42-4D5F-8213-A38D370CD205" sourceRef="sid-BA71D229-59DF-47FF-A7BA-EDF50A275EDB" targetRef="sid-DBB8BA2F-D908-4529-8E55-AD2544873E25" representsUserAction="false" mandateNotes="false" captureReasons="false"/>
    <sequenceFlow id="sid-49608423-B2DA-48A9-A488-BC1CD36C3752" name="Approve" sourceRef="sid-DBB8BA2F-D908-4529-8E55-AD2544873E25" targetRef="sid-25781B18-EE31-46CC-A854-60810F1085AA" action="Approve" state="Approved" representsUserAction="true" mandateNotes="false" captureReasons="false">
      <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Approved'</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-322D8464-2984-4223-A3A2-DC5415BFF15A" name="Resubmit" sourceRef="sid-DBB8BA2F-D908-4529-8E55-AD2544873E25" targetRef="sid-8ED2D976-6A19-4EE3-B633-F80094375212" action="Resubmit" state="Resubmitted" representsUserAction="true" mandateNotes="true" captureReasons="false">
      <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Resubmitted'</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-D70E6AE1-61AE-4732-8DE8-478CD8F2010F" name="Reject" sourceRef="sid-DBB8BA2F-D908-4529-8E55-AD2544873E25" targetRef="sid-E2E517DA-F117-42DB-9518-E6810E555844" action="Reject" state="Rejected" representsUserAction="true" mandateNotes="true" captureReasons="false">
      <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Rejected'</conditionExpression>
    </sequenceFlow>
  </process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_RECEIPT_KNOCK_OFF">
    <bpmndi:BPMNPlane bpmnElement="RECEIPT_KNOCK_OFF" id="BPMNPlane_RECEIPT_KNOCK_OFF">
      <bpmndi:BPMNShape bpmnElement="startEvent1" id="BPMNShape_startEvent1">
        <omgdc:Bounds height="30.0" width="30.0" x="60.0" y="160.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-8ED2D976-6A19-4EE3-B633-F80094375212" id="BPMNShape_sid-8ED2D976-6A19-4EE3-B633-F80094375212">
        <omgdc:Bounds height="80.0" width="100.0" x="180.0" y="135.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-BA71D229-59DF-47FF-A7BA-EDF50A275EDB" id="BPMNShape_sid-BA71D229-59DF-47FF-A7BA-EDF50A275EDB">
        <omgdc:Bounds height="80.0" width="100.0" x="345.0" y="135.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-DBB8BA2F-D908-4529-8E55-AD2544873E25" id="BPMNShape_sid-DBB8BA2F-D908-4529-8E55-AD2544873E25">
        <omgdc:Bounds height="40.0" width="40.0" x="480.0" y="155.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-25781B18-EE31-46CC-A854-60810F1085AA" id="BPMNShape_sid-25781B18-EE31-46CC-A854-60810F1085AA">
        <omgdc:Bounds height="80.0" width="100.0" x="600.0" y="135.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-E2E517DA-F117-42DB-9518-E6810E555844" id="BPMNShape_sid-E2E517DA-F117-42DB-9518-E6810E555844">
        <omgdc:Bounds height="80.0" width="100.0" x="450.0" y="255.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-7BCCED83-99D9-4011-A1D9-0702781C3E8B" id="BPMNShape_sid-7BCCED83-99D9-4011-A1D9-0702781C3E8B">
        <omgdc:Bounds height="28.0" width="28.0" x="735.0" y="161.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-469B1AD4-984C-4DD4-A5CD-E7A5F9B11E5B" id="BPMNShape_sid-469B1AD4-984C-4DD4-A5CD-E7A5F9B11E5B">
        <omgdc:Bounds height="28.0" width="28.0" x="630.0" y="281.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge bpmnElement="sid-49608423-B2DA-48A9-A488-BC1CD36C3752" id="BPMNEdge_sid-49608423-B2DA-48A9-A488-BC1CD36C3752">
        <omgdi:waypoint x="519.5637583892617" y="175.43624161073825"/>
        <omgdi:waypoint x="600.0" y="175.16722408026754"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-4282B9CF-1902-4C3C-9026-EDF630137858" id="BPMNEdge_sid-4282B9CF-1902-4C3C-9026-EDF630137858">
        <omgdi:waypoint x="700.0" y="175.0"/>
        <omgdi:waypoint x="735.0" y="175.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-7B92DDCE-32BB-452C-9692-B47DA3079347" id="BPMNEdge_sid-7B92DDCE-32BB-452C-9692-B47DA3079347">
        <omgdi:waypoint x="230.0" y="215.0"/>
        <omgdi:waypoint x="230.0" y="295.0"/>
        <omgdi:waypoint x="450.0" y="295.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-8A1197AA-0D42-4D5F-8213-A38D370CD205" id="BPMNEdge_sid-8A1197AA-0D42-4D5F-8213-A38D370CD205">
        <omgdi:waypoint x="445.0" y="175.23696682464455"/>
        <omgdi:waypoint x="480.4047619047619" y="175.4047619047619"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-69A3855B-58E0-4715-A009-4FCB1DFA63A7" id="BPMNEdge_sid-69A3855B-58E0-4715-A009-4FCB1DFA63A7">
        <omgdi:waypoint x="280.0" y="175.0"/>
        <omgdi:waypoint x="345.0" y="175.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-C4F2FE9A-D693-4F78-BF35-59FC61E39BB3" id="BPMNEdge_sid-C4F2FE9A-D693-4F78-BF35-59FC61E39BB3">
        <omgdi:waypoint x="90.0" y="175.0"/>
        <omgdi:waypoint x="180.0" y="175.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-322D8464-2984-4223-A3A2-DC5415BFF15A" id="BPMNEdge_sid-322D8464-2984-4223-A3A2-DC5415BFF15A">
        <omgdi:waypoint x="500.5" y="155.5"/>
        <omgdi:waypoint x="500.5" y="71.0"/>
        <omgdi:waypoint x="230.0" y="71.0"/>
        <omgdi:waypoint x="230.0" y="135.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-D70E6AE1-61AE-4732-8DE8-478CD8F2010F" id="BPMNEdge_sid-D70E6AE1-61AE-4732-8DE8-478CD8F2010F">
        <omgdi:waypoint x="500.4201680672269" y="194.57983193277312"/>
        <omgdi:waypoint x="500.1673640167364" y="255.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-ECF25D4E-4A2D-423D-BC9F-4AD94839A62F" id="BPMNEdge_sid-ECF25D4E-4A2D-423D-BC9F-4AD94839A62F">
        <omgdi:waypoint x="550.0" y="295.0"/>
        <omgdi:waypoint x="630.0" y="295.0"/>
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</definitions>]]></column>
			<where>workflowtype='RECEIPT_KNOCK_OFF' and workflowactive=1
			</where>
		</update>
	</changeSet>

	<changeSet id="3" author="Vidhya">
		<comment>Deletion of Group Rights/Role Groups/Roles/Groups/Rights for receipt knock off.</comment>
		<sql>
		  	 <![CDATA[
		  		DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'KNOCKOFF_RECEIPT_MAKER');
	     	 	DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'KNOCKOFF_RECEIPT_APPROVER');
		  		
		  		DELETE FROM SECROLEGROUPS WHERE ROLEID IN (SELECT ROLEID FROM SECROLES WHERE rolecd='RECEIPTKNOCKOFF_MAKER');
	      		DELETE FROM SECROLEGROUPS WHERE ROLEID IN (SELECT ROLEID FROM SECROLES WHERE rolecd='RECEIPTKNOCKOFF_APPROVER');
	      		
	      		DELETE FROM SECROLES WHERE ROLECD='RECEIPTKNOCKOFF_MAKER';
	      		DELETE FROM SECROLES WHERE ROLECD='RECEIPTKNOCKOFF_APPROVER';
	      		
	      		DELETE FROM SECGROUPS WHERE GRPCODE='KNOCKOFF_RECEIPT_MAKER';
	      		DELETE FROM SECGROUPS WHERE GRPCODE='KNOCKOFF_RECEIPT_APPROVER';
	      		
	      		DELETE FROM SECRIGHTS WHERE RIGHTNAME='menuItem_FinanceManagement_ReceiptKnockOff';
	      	 ]]>
		</sql>
	</changeSet>

	<changeSet id="3.1" author="Vidhya">
		<comment>Creation of Group Rights/Role Groups/Roles/Groups/Rights for receipt knock off.</comment>
		<sql>
		  	 <![CDATA[
				UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS_VIEW);
				UPDATE SEQSECGROUPS SET SEQNO= (SELECT MAX(GRPID) FROM SECGROUPS_VIEW);
				UPDATE SEQSECROLES SET SEQNO= (SELECT MAX(ROLEID) FROM SECROLES_VIEW);
				UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS_VIEW); 
				UPDATE SEQSECROLEGROUPS SET SEQNO= (SELECT MAX(ROLEGRPID) FROM SECROLEGROUPS_VIEW);
				
				INSERT INTO SECROLES VALUES ((SELECT MAX(RoleID)+1 FROM SECROLES), 1, 'RECEIPTKNOCKOFF_MAKER', 'Receipt Knock Off Maker Role', NULL, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECROLES VALUES ((SELECT MAX(RoleID)+1 FROM SECROLES), 1, 'RECEIPTKNOCKOFF_APPROVER', 'Receipt Knock Off Approver Role', NULL, 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SECGROUPS SELECT (SELECT MAX(GRPID)+1 FROM SECGROUPS), 'KNOCKOFF_RECEIPT_MAKER', 'Knock off receipt maker', 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0 FROM SEQSECGROUPS WHERE 0=0;
				INSERT INTO SECGROUPS SELECT (SELECT MAX(GRPID)+1 FROM SECGROUPS), 'KNOCKOFF_RECEIPT_APPROVER', 'Knock off receipt approver', 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0 FROM SEQSECGROUPS WHERE 0=0;
				
				INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),0,'menuItem_FinanceManagement_ReceiptKnockOff','MENU',0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0 FROM SEQSECRIGHTS WHERE 0=0;
				
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='KNOCKOFF_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='menuCat_FinanceManagement'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='KNOCKOFF_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='menuItem_FinanceManagement_ReceiptKnockOff'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='KNOCKOFF_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_ReceiptDialog_btnCalcReceipts'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='KNOCKOFF_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_effScheduleMethod'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='KNOCKOFF_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_favourNo'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='KNOCKOFF_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_chequeAcNo'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='KNOCKOFF_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_paymentRef'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='KNOCKOFF_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_FinFeeReceiptDialog_btnSave'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='KNOCKOFF_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_PastdueAmount'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='KNOCKOFF_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_favourName'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='KNOCKOFF_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_cashReceivedDate'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='KNOCKOFF_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_transactionRef'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='KNOCKOFF_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_receiptPurpose'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='KNOCKOFF_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_receiptAmount'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='KNOCKOFF_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_ExcessAmount'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='KNOCKOFF_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_receiptMode'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='KNOCKOFF_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_valueDate'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='KNOCKOFF_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinFeeDetailListCtrl_Adjust'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='KNOCKOFF_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_allocationMethod'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='KNOCKOFF_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_remarks'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0); 
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='KNOCKOFF_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_ManualAdvice'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='KNOCKOFF_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinFeeReceiptDialog_paidAmount'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='KNOCKOFF_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_ReceiptDialog_btnChangeReceipt'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='KNOCKOFF_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_excessAdjustTo'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='KNOCKOFF_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_bankCode'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='KNOCKOFF_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_fundingAccount'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='KNOCKOFF_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_PayableAmount'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='KNOCKOFF_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_ReceiptDialog_btnReceipt'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='KNOCKOFF_RECEIPT_APPROVER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='menuCat_FinanceManagement'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='KNOCKOFF_RECEIPT_APPROVER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='menuItem_FinanceManagement_ReceiptKnockOff'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='KNOCKOFF_RECEIPT_APPROVER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_ReceiptDialog_btnReceipt'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				
				INSERT INTO SecRoleGroups values((Select MAX(RoleGrpID)+1 From SecRoleGroups),(Select GrpId  From SecGroups Where GrpCode='KNOCKOFF_RECEIPT_MAKER'), (Select  RoleID  From SecRoles Where RoleCd='RECEIPTKNOCKOFF_MAKER'),0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0); 
				INSERT INTO SecRoleGroups values((Select MAX(RoleGrpID)+1 From SecRoleGroups),(Select GrpId  From SecGroups Where GrpCode='KNOCKOFF_RECEIPT_APPROVER'), (Select  RoleID  From SecRoles Where RoleCd='RECEIPTKNOCKOFF_APPROVER'),0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				
				UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS_VIEW);
				UPDATE SEQSECGROUPS SET SEQNO= (SELECT MAX(GRPID) FROM SECGROUPS_VIEW);
				UPDATE SEQSECROLES SET SEQNO= (SELECT MAX(ROLEID) FROM SECROLES_VIEW);
				UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS_VIEW); 
				UPDATE SEQSECROLEGROUPS SET SEQNO= (SELECT MAX(ROLEGRPID) FROM SECROLEGROUPS_VIEW);
			 ]]>
		</sql>
	</changeSet>

	<changeSet id="4" author="Vidhya">
		<sql>
			<![CDATA[
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FIN_RECEIPT_MAKER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FIN_RECEIPT_APPROVER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FIN_DEPOSIT_MAKER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FIN_DEPOSIT_APPROVER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FIN_RECEIPTREALIZE_MAKER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FIN_RECEIPTREALIZE_APPROVER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'KNOCKOFF_RECEIPT_MAKER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'KNOCKOFF_RECEIPT_APPROVER');
				
				DELETE FROM SECRIGHTS WHERE RIGHTNAME='menuItem_Receipts_InitMaker';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME='menuItem_Receipts_DepositMaker';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME='menuItem_Receipts_DepositApprover';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME='menuItem_Receipts_RealizationMaker';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME='menuItem_Receipts_RealizationApprover';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME='menuItem_Receipts_KnockoffMaker';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME='menuItem_Receipts_KnockoffApprover';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME='menuItem_Receipts_ClosureMakerApprover';
				
				DELETE FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_excessAdjustTo';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_allocationMethod';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_effScheduleMethod';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_remarks';
				
				DELETE FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_realizationDate';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_bounceCode';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_bounceCharge';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_bounceRemarks';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_bounceDate';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_cancelReason';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_cancelRemarks';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_receiptModeStatus';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_favourNo';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_valueDate';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_bankCode';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_favourName';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_depositDate';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_depositNo';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_chequeAcNo';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_transactionRef';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_fundingAccount'; 
			]]>
		</sql>
	</changeSet>

	<changeSet id="4.1" author="Vidhya">
		<comment>Deletion of secgrouprights for receipts</comment>
		<sql>
			<![CDATA[
				UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS_VIEW);
				UPDATE SEQSECGROUPS SET SEQNO= (SELECT MAX(GRPID) FROM SECGROUPS_VIEW);
				UPDATE SEQSECROLES SET SEQNO= (SELECT MAX(ROLEID) FROM SECROLES_VIEW);
				UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS_VIEW); 
				UPDATE SEQSECROLEGROUPS SET SEQNO= (SELECT MAX(ROLEGRPID) FROM SECROLEGROUPS_VIEW);
				
				INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menuItem_Receipts_InitMaker','MENU',0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0 FROM SEQSECRIGHTS WHERE 0=0; 
				INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menuItem_Receipts_DepositMaker','MENU',0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0 FROM SEQSECRIGHTS WHERE 0=0; 
				INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menuItem_Receipts_DepositApprover','MENU',0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0 FROM SEQSECRIGHTS WHERE 0=0; 
				INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menuItem_Receipts_RealizationMaker','MENU',0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0 FROM SEQSECRIGHTS WHERE 0=0; 
				INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menuItem_Receipts_RealizationApprover','MENU',0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0 FROM SEQSECRIGHTS WHERE 0=0; 
				INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menuItem_Receipts_KnockoffMaker','MENU',0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0 FROM SEQSECRIGHTS WHERE 0=0; 
				INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menuItem_Receipts_KnockoffApprover','MENU',0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0 FROM SEQSECRIGHTS WHERE 0=0; 
				INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menuItem_Receipts_ClosureMakerApprover','MENU',0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0 FROM SEQSECRIGHTS WHERE 0=0;
				
				INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2, 'button_ReceiptList_NewReceipt','ReceiptList',0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0 FROM SEQSECRIGHTS WHERE 0=0;
				INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2, 'button_ReceiptList_ReceiptSearchDialog','ReceiptList',0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0 FROM SEQSECRIGHTS WHERE 0=0;
				
				INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'ReceiptDialog_excessAdjustTo','ReceiptDialog',0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0 FROM SEQSECRIGHTS WHERE 0=0; 
				INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'ReceiptDialog_allocationMethod','ReceiptDialog',0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0 FROM SEQSECRIGHTS WHERE 0=0; 
				INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'ReceiptDialog_effScheduleMethod','ReceiptDialog',0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0 FROM SEQSECRIGHTS WHERE 0=0; 
				INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'ReceiptDialog_remarks','ReceiptDialog',0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0 FROM SEQSECRIGHTS WHERE 0=0; 
				INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'ReceiptDialog_realizationDate','ReceiptDialog',0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0 FROM SEQSECRIGHTS WHERE 0=0; 
				INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'ReceiptDialog_bounceCode','ReceiptDialog',0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0 FROM SEQSECRIGHTS WHERE 0=0; 
				INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'ReceiptDialog_bounceCharge','ReceiptDialog',0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0 FROM SEQSECRIGHTS WHERE 0=0; 
				INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'ReceiptDialog_bounceRemarks','ReceiptDialog',0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0 FROM SEQSECRIGHTS WHERE 0=0; 
				INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'ReceiptDialog_bounceDate','ReceiptDialog',0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0 FROM SEQSECRIGHTS WHERE 0=0; 
				INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'ReceiptDialog_cancelReason','ReceiptDialog',0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0 FROM SEQSECRIGHTS WHERE 0=0; 
				INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'ReceiptDialog_cancelRemarks','ReceiptDialog',0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0 FROM SEQSECRIGHTS WHERE 0=0; 
				INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'ReceiptDialog_receiptModeStatus','ReceiptDialog',0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0 FROM SEQSECRIGHTS WHERE 0=0; 
				INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'ReceiptDialog_favourNo','ReceiptDialog',0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0 FROM SEQSECRIGHTS WHERE 0=0; 
				INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'ReceiptDialog_valueDate','ReceiptDialog',0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0 FROM SEQSECRIGHTS WHERE 0=0; 
				INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'ReceiptDialog_bankCode','ReceiptDialog',0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0 FROM SEQSECRIGHTS WHERE 0=0; 
				INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'ReceiptDialog_favourName','ReceiptDialog',0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0 FROM SEQSECRIGHTS WHERE 0=0; 
				INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'ReceiptDialog_depositDate','ReceiptDialog',0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0 FROM SEQSECRIGHTS WHERE 0=0; 
				INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'ReceiptDialog_depositNo','ReceiptDialog',0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0 FROM SEQSECRIGHTS WHERE 0=0; 
				INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'ReceiptDialog_chequeAcNo','ReceiptDialog',0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0 FROM SEQSECRIGHTS WHERE 0=0; 
				INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'ReceiptDialog_transactionRef','ReceiptDialog',0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0 FROM SEQSECRIGHTS WHERE 0=0; 
				INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'ReceiptDialog_fundingAccount','ReceiptDialog',0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0 FROM SEQSECRIGHTS WHERE 0=0;
				
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_DEPOSIT_APPROVER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='menuItem_Receipts_DepositApprover'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_DEPOSIT_APPROVER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_ReceiptDialog_btnReceipt'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_DEPOSIT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='menuItem_Receipts_DepositMaker'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_DEPOSIT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_depositDate'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_DEPOSIT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_depositNo'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_DEPOSIT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_fundingAccount'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_DEPOSIT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_ReceiptDialog_btnReceipt'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_RECEIPT_APPROVER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='menuItem_Receipts_RealizationApprover'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_RECEIPT_APPROVER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_ReceiptDialog_btnReceipt'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='menuItem_Receipts_InitMaker'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_excessAdjustTo'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_allocationMethod'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_effScheduleMethod'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_remarks'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_favourNo'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_valueDate'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_bankCode'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_favourName'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_transactionRef'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_fundingAccount'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_chequeAcNo'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_ReceiptDialog_btnChangeReceipt'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_ReceiptDialog_btnReceipt'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_ReceiptDialog_btnCalcReceipts'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
								
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_RECEIPTREALIZE_APPROVER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='menuItem_Receipts_RealizationApprover'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_RECEIPTREALIZE_APPROVER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_ReceiptDialog_btnReceipt'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_RECEIPTREALIZE_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='menuItem_Receipts_RealizationMaker'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_RECEIPTREALIZE_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_realizationDate'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_RECEIPTREALIZE_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_bounceCode'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_RECEIPTREALIZE_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_bounceCharge'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_RECEIPTREALIZE_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_bounceRemarks'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_RECEIPTREALIZE_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_bounceDate'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_RECEIPTREALIZE_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_cancelReason'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_RECEIPTREALIZE_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_cancelRemarks'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_RECEIPTREALIZE_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_ReceiptDialog_btnReceipt'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='KNOCKOFF_RECEIPT_APPROVER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='menuItem_Receipts_KnockoffApprover'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='KNOCKOFF_RECEIPT_APPROVER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_ReceiptDialog_btnReceipt'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='KNOCKOFF_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_excessAdjustTo'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='KNOCKOFF_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_allocationMethod'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='KNOCKOFF_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_effScheduleMethod'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='KNOCKOFF_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_remarks'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='KNOCKOFF_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_valueDate'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='KNOCKOFF_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_ReceiptDialog_btnChangeReceipt'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='KNOCKOFF_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_ReceiptDialog_btnReceipt'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='KNOCKOFF_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_ReceiptDialog_btnCalcReceipts'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='KNOCKOFF_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_ReceiptList_NewReceipt'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='KNOCKOFF_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_ReceiptList_ReceiptSearchDialog'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0); 
				
				UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS_VIEW);
				UPDATE SEQSECGROUPS SET SEQNO= (SELECT MAX(GRPID) FROM SECGROUPS_VIEW);
				UPDATE SEQSECROLES SET SEQNO= (SELECT MAX(ROLEID) FROM SECROLES_VIEW);
				UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS_VIEW); 
				UPDATE SEQSECROLEGROUPS SET SEQNO= (SELECT MAX(ROLEGRPID) FROM SECROLEGROUPS_VIEW);			
			]]>
		</sql>
	</changeSet>

	<changeSet id="5" author="shinde.b">
		<addColumn tableName="finreceiptheader">
			<column name="subReceiptMode" type="varchar(20)" />
			<column name="receiptChannel" type="varchar(20)" />
			<column name="receivedFrom" type="varchar(20)" />
			<column name="panNumber" type="varchar (20)" />
			<column name="collectionAgentId" type="bigint" />
			<column name="GDRAvailable" type="boolean" />
			<column name="releaseType" type="char(1)" />
			<column name="thirdPartyName" type="varchar(50)" />
			<column name="thirdPartyMobileNum" type="varchar(20)" />
			<column name="cashierBranch" type="varchar(8)" />
			<column name="initiateDate" type="datetime" />
			<column name="FinDivision" type="varchar2(8)" />
			<column name="PostBranch" type="varchar2(8)" />
		</addColumn>
	</changeSet>

	<changeSet id="5.1" author="shinde.b">
		<addColumn tableName="finreceiptheader_temp">
			<column name="subReceiptMode" type="varchar(20)" />
			<column name="receiptChannel" type="varchar(20)" />
			<column name="receivedFrom" type="varchar(20)" />
			<column name="panNumber" type="varchar(20)" />
			<column name="collectionAgentId" type="bigint" />
			<column name="GDRAvailable" type="boolean" />
			<column name="releaseType" type="char(1)" />
			<column name="thirdPartyName" type="varchar(50)" />
			<column name="thirdPartyMobileNum" type="varchar(20)" />
			<column name="cashierBranch" type="varchar(8)" />
			<column name="initiateDate" type="datetime" />
			<column name="FinDivision" type="varchar2(8)" />
			<column name="PostBranch" type="varchar2(8)" />
		</addColumn>
	</changeSet>

	<changeSet id="5.2_pre" author="satyanarayana.g">
		<sql>
			<![CDATA[
				UPDATE FINRECEIPTHEADER set COLLECTIONAGENTID = 0 where COLLECTIONAGENTID is null;
				UPDATE FINRECEIPTHEADER_TEMP set COLLECTIONAGENTID = 0 where COLLECTIONAGENTID is null;
		]]>
		</sql>
	</changeSet>

	<changeSet id="5.2" author="satyanarayana.g" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE FINRECEIPTHEADER ADD CONSTRAINT DF_FINRECEIPTHEADER_COLLECTIONAGENTID DEFAULT 0 FOR COLLECTIONAGENTID;
				ALTER TABLE FINRECEIPTHEADER_TEMP ADD CONSTRAINT DF_FINRECEIPTHEADER_TEMP_COLLECTIONAGENTID DEFAULT 0 FOR COLLECTIONAGENTID;
			]]>
		</sql>
	</changeSet>

	<changeSet id="5.2" author="satyanarayana.g" dbms="postgresql, oracle">
		<addDefaultValue columnName="COLLECTIONAGENTID" tableName="FINRECEIPTHEADER" defaultValue="0" />
		<addDefaultValue columnName="COLLECTIONAGENTID" tableName="FINRECEIPTHEADER_TEMP" defaultValue="0" />
	</changeSet>

	<changeSet id="5.3" author="satyanarayana.g">
		<addNotNullConstraint tableName="FINRECEIPTHEADER" columnName="COLLECTIONAGENTID" columnDataType="bigint" />
		<addNotNullConstraint tableName="FINRECEIPTHEADER_TEMP" columnName="COLLECTIONAGENTID" columnDataType="bigint" />
	</changeSet>

	<changeSet id="5.4_pre" author="satyanarayana.g">
		<sql>
			<![CDATA[
				UPDATE FINRECEIPTHEADER set GDRAVAILABLE =0 where GDRAVAILABLE is null;
				UPDATE FINRECEIPTHEADER_TEMP set GDRAVAILABLE =0 where GDRAVAILABLE is null;
		]]>
		</sql>
	</changeSet>

	<changeSet id="5.4" author="satyanarayana.g" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE FINRECEIPTHEADER ADD CONSTRAINT DF_FINRECEIPTHEADER_GDRAVAILABLE DEFAULT 0 FOR GDRAVAILABLE;
				ALTER TABLE FINRECEIPTHEADER_TEMP ADD CONSTRAINT DF_FINRECEIPTHEADER_TEMP_GDRAVAILABLE DEFAULT 0 FOR GDRAVAILABLE;
			]]>
		</sql>
	</changeSet>

	<changeSet id="5.4" author="satyanarayana.g" dbms="postgresql, oracle">
		<addDefaultValue columnName="GDRAVAILABLE" tableName="FINRECEIPTHEADER" defaultValue="0" />
		<addDefaultValue columnName="GDRAVAILABLE" tableName="FINRECEIPTHEADER_TEMP" defaultValue="0" />
	</changeSet>

	<changeSet id="5.5" author="satyanarayana.g">
		<addNotNullConstraint tableName="FINRECEIPTHEADER" columnName="GDRAVAILABLE" columnDataType="boolean" />
		<addNotNullConstraint tableName="FINRECEIPTHEADER_TEMP" columnName="GDRAVAILABLE" columnDataType="boolean" />
	</changeSet>

	<changeSet id="6" author="Vidhya">
		<createTable tableName="CollectionAgencies">
			<column name="ID" type="int">
				<constraints nullable="false" />
			</column>
			<column name="Code" type="Varchar(8)">
				<constraints nullable="false" />
			</column>
			<column name="Description" type="Varchar(50)" />
		</createTable>
	</changeSet>

	<changeSet id="6.1" author="Vidhya">
		<createTable tableName="CollectionAgencies_Temp">
			<column name="ID" type="int">
				<constraints nullable="false" />
			</column>
			<column name="Code" type="Varchar(8)">
				<constraints nullable="false" />
			</column>
			<column name="Description" type="Varchar(50)" />
		</createTable>
	</changeSet>

	<changeSet id="6.2" author="Vidhya">
		<addPrimaryKey tableName="CollectionAgencies_Temp" columnNames="ID" constraintName="CollectionAgencies_Temp_PK" />
	</changeSet>
	<changeSet id="6.3" author="Vidhya">
		<addPrimaryKey tableName="CollectionAgencies" columnNames="ID" constraintName="CollectionAgencies_PK" />
	</changeSet>

	<changeSet id="7" author="shinde.b">
		<createView viewName="FINRECEIPTHEADER_FVIEW" replaceIfExists="true">
			SELECT
			  T1.RECEIPTID,
			  T1.RECEIPTDATE,
			  T1.RECEIPTTYPE,
			  T1.RECAGAINST,
			  T1.REFERENCE,
			  T1.RECEIPTPURPOSE,
			  T1.RECEIPTMODE,
			  T1.EXCESSADJUSTTO,
			  T1.ALLOCATIONTYPE,
			  T1.RECEIPTAMOUNT,
			  T1.EFFECTSCHDMETHOD,
			  T1.RECEIPTMODESTATUS,
			  T1.SUBRECEIPTMODE,
			  T1.RECEIPTCHANNEL,
			  T1.RECEIVEDFROM,
			  T1.PANNUMBER,
			  T1.COLLECTIONAGENTID,
			  T1.VERSION,
			  T1.LASTMNTBY,
			  T1.LASTMNTON,
			  T1.RECORDSTATUS,
			  T1.ROLECODE,
			  T1.NEXTROLECODE,
			  T1.TASKID,
			  T1.NEXTTASKID,
			  T1.RECORDTYPE,
			  T1.WORKFLOWID,
			  T2.FINTYPE,
			  T2.FINBRANCH,
			  T3.CUSTCIF,
			  T3.CUSTSHRTNAME,
			  T2.FINCCY,
			  T1.REALIZATIONDATE,
			  T1.CANCELREASON,
			  T4.FINTYPEDESC,
			  T6.BRANCHDESC FINBRANCHDESC,
			  T5.CCYDESC FINCCYDESC,
			  T7.REJECTDESC CANCELREASONDESC,
			  T2.FINISACTIVE,
			  T2.SCHEDULEMETHOD,
			  T2.PROFITDAYSBASIS PFTDAYSBASIS,
			  T1.WAVIEDAMT,
			  T3.CUSTID,
			  T1.TOTFEEAMOUNT,
			  T1.BOUNCEDATE,
			  T1.REMARKS,
			  T1.RCDMAINTAINSTS,
			  T1.DEPOSITPROCESS,
			  T1.DEPOSITBRANCH,
			  T1.LPIAMOUNT,
			  T1.LPPAMOUNT,
			  T1.GSTLPIAMOUNT,
			  T1.GSTLPPAMOUNT,
			  T1.GDRAVAILABLE,
			  T1.RELEASETYPE,
			  T1.THIRDPARTYNAME,
			  T1.THIRDPARTYMOBILENUM,
			  T2.PRODUCTCATEGORY,
			  T2.PROMOTIONCODE,
			  (
			    CASE
			      WHEN T8.PAYMENTTYPE IN ('CHEQUE', 'DD')
			      THEN T8.FAVOURNUMBER
			      ELSE T8.TRANSACTIONREF
			    END ) TRANSACTIONREF,
			  T1.CASHIERBRANCH,
			  T2.NEXTREPAYRVWDATE,
			  T1.INITIATEDATE,
			  T1.INSTRUCTIONUID,
			  T9.CODE COLLECTIONAGENTCODE,
			  T9.DESCRIPTION COLLECTIONAGENTDESC,
			  T1.MODULE,
			  T1.EXTREFERENCE,
			  T10.CUSTCIF CUSTOMERCIF,
			  T10.CUSTSHRTNAME CUSTOMERNAME,
			  T1.FINDIVISION,
			  T1.POSTBRANCH,
			  T11.DIVISIONCODEDESC FINDIVISIONDESC,
			  T12.BRANCHDESC POSTBRANCHDESC,
			  T13.BRANCHDESC CASHIERBRANCHDESC,
			  T11.ENTITYCODE
			FROM FINRECEIPTHEADER_TEMP T1
			INNER JOIN FINANCEMAIN_TEMP T2 ON T1.REFERENCE = T2.FINREFERENCE
			INNER JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
			INNER JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
			INNER JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
			INNER JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
			LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
			LEFT JOIN FINRECEIPTDETAIL T8 ON T1.RECEIPTID     = T8.RECEIPTID AND T1.RECEIPTMODE = T8.PAYMENTTYPE
			LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
			Left Join CUSTOMERS T10 ON CAST(T10.CUSTID AS VARCHAR(20)) = T1.REFERENCE
			LEFT JOIN SMTDIVISIONDETAIL T11 ON T1.FINDIVISION = T11.DIVISIONCODE
			LEFT JOIN RMTBRANCHES T12 ON T1.POSTBRANCH = T12.BRANCHCODE
			LEFT JOIN RMTBRANCHES T13 ON T1.CASHIERBRANCH = T13.BRANCHCODE
    	</createView>
	</changeSet>

	<changeSet id="8" author="shinde.b">
		<createView viewName="FINRECEIPTHEADER_FCVIEW" replaceIfExists="true">
			 SELECT T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.RECAGAINST,
					T1.REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.RECEIPTMODESTATUS,
					T1.SUBRECEIPTMODE,
					T1.RECEIPTCHANNEL,
					T1.RECEIVEDFROM,
					T1.PANNUMBER,
					T1.COLLECTIONAGENTID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINTYPE,
					T2.FINBRANCH,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					T2.FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					T4.FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					T5.CCYDESC FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
					T2.SCHEDULEMETHOD,
					T2.PROFITDAYSBASIS PFTDAYSBASIS,
					T1.WAVIEDAMT,
					COALESCE(T3.CUSTID, 0) CUSTID,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					(
					CASE
					WHEN T8.PAYMENTTYPE IN ('CHEQUE', 'DD')
					THEN T8.FAVOURNUMBER
					ELSE T8.TRANSACTIONREF
					END ) TRANSACTIONREF,
					T2.NEXTREPAYRVWDATE,
					T1.CASHIERBRANCH,
					T1.INITIATEDATE,
					T1.INSTRUCTIONUID,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.MODULE,
					T1.EXTREFERENCE,
					T13.CUSTCIF CUSTOMERCIF,
					T13.CUSTSHRTNAME CUSTOMERNAME
					FROM FINRECEIPTHEADER_TEMP T1
					LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.REFERENCE = T2.FINREFERENCE
					LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
					LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
					LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
					LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
					LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
					LEFT JOIN FINRECEIPTDETAIL T8 ON T1.RECEIPTID = T8.RECEIPTID AND T1.RECEIPTMODE = T8.PAYMENTTYPE
					LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
					LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
					LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
					LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
					LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
					UNION ALL
					SELECT
					T1.RECEIPTID,
					T1.RECEIPTDATE,
					T1.RECEIPTTYPE,
					T1.RECAGAINST,
					T1.REFERENCE,
					T1.RECEIPTPURPOSE,
					T1.RECEIPTMODE,
					T1.EXCESSADJUSTTO,
					T1.ALLOCATIONTYPE,
					T1.RECEIPTAMOUNT,
					T1.EFFECTSCHDMETHOD,
					T1.RECEIPTMODESTATUS,
					T1.SUBRECEIPTMODE,
					T1.RECEIPTCHANNEL,
					T1.RECEIVEDFROM,
					T1.PANNUMBER,
					T1.COLLECTIONAGENTID,
					T1.VERSION,
					T1.LASTMNTBY,
					T1.LASTMNTON,
					T1.RECORDSTATUS,
					T1.ROLECODE,
					T1.NEXTROLECODE,
					T1.TASKID,
					T1.NEXTTASKID,
					T1.RECORDTYPE,
					T1.WORKFLOWID,
					T2.FINTYPE,
					T2.FINBRANCH,
					T3.CUSTCIF,
					T3.CUSTSHRTNAME,
					T2.FINCCY,
					T1.REALIZATIONDATE,
					T1.CANCELREASON,
					T4.FINTYPEDESC,
					T6.BRANCHDESC FINBRANCHDESC,
					T5.CCYDESC FINCCYDESC,
					T7.REJECTDESC CANCELREASONDESC,
					COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
					T2.SCHEDULEMETHOD,
					T2.PROFITDAYSBASIS PFTDAYSBASIS,
					T1.WAVIEDAMT,
					COALESCE(T3.CUSTID, 0) CUSTID,
					T1.TOTFEEAMOUNT,
					T1.BOUNCEDATE,
					T1.REMARKS,
					T1.RCDMAINTAINSTS,
					T1.DEPOSITPROCESS,
					T1.DEPOSITBRANCH,
					T1.LPIAMOUNT,
					T1.LPPAMOUNT,
					T1.GSTLPIAMOUNT,
					T1.GSTLPPAMOUNT,
					T1.GDRAVAILABLE,
					T1.RELEASETYPE,
					T1.THIRDPARTYNAME,
					T1.THIRDPARTYMOBILENUM,
					T2.PRODUCTCATEGORY,
					T2.PROMOTIONCODE,
					(
					CASE
					WHEN T8.PAYMENTTYPE IN ('CHEQUE', 'DD')
					THEN T8.FAVOURNUMBER
					ELSE T8.TRANSACTIONREF
					END) TRANSACTIONREF,
					T2.NEXTREPAYRVWDATE,
					T1.CASHIERBRANCH,
					T1.INITIATEDATE,
					T1.INSTRUCTIONUID,
					T1.FINDIVISION,
					T1.POSTBRANCH,
					T10.DIVISIONCODEDESC FINDIVISIONDESC,
					T11.BRANCHDESC POSTBRANCHDESC,
					T12.BRANCHDESC CASHIERBRANCHDESC,
					T10.ENTITYCODE,
					T9.CODE COLLECTIONAGENTCODE,
					T9.DESCRIPTION COLLECTIONAGENTDESC,
					T1.MODULE,
					T1.EXTREFERENCE,
					T13.CUSTCIF CUSTOMERCIF,
					T13.CUSTSHRTNAME CUSTOMERNAME
					FROM FINRECEIPTHEADER T1
					LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.REFERENCE = T2.FINREFERENCE
					LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
					LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
					LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
					LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
					LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
					LEFT JOIN FINRECEIPTDETAIL T8 ON T1.RECEIPTID = T8.RECEIPTID AND T1.RECEIPTMODE = T8.PAYMENTTYPE
					LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
					LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
					LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
					LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
					LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
					WHERE NOT EXISTS
					( SELECT 1 FROM FINRECEIPTHEADER_TEMP WHERE RECEIPTID = T1.RECEIPTID
					)
    	</createView>
	</changeSet>

	<changeSet id="9" author="satyanarayana.g">
		<comment>New View Created for Upfont Fees display in List Screen</comment>
		<createView viewName="FINRECEIPTHEADER_FDVIEW" replaceIfExists="true">
		SELECT T1.RECEIPTID,
				T1.RECEIPTDATE,
				T1.RECEIPTTYPE,
				T1.RECAGAINST,
				(
				CASE
				WHEN T1.RECAGAINST ='C'
				THEN T10.CUSTCIF
				ELSE T1.REFERENCE
				END) REFERENCE,
				T1.RECEIPTPURPOSE,
				T1.RECEIPTMODE,
				T1.EXCESSADJUSTTO,
				T1.ALLOCATIONTYPE,
				T1.RECEIPTAMOUNT,
				T1.EFFECTSCHDMETHOD,
				T1.RECEIPTMODESTATUS,
				T1.SUBRECEIPTMODE,
				T1.RECEIPTCHANNEL,
				T1.RECEIVEDFROM,
				T1.PANNUMBER,
				T1.COLLECTIONAGENTID,
				T1.VERSION,
				T1.LASTMNTBY,
				T1.LASTMNTON,
				T1.RECORDSTATUS,
				T1.ROLECODE,
				T1.NEXTROLECODE,
				T1.TASKID,
				T1.NEXTTASKID,
				T1.RECORDTYPE,
				T1.WORKFLOWID,
				T2.FINTYPE,
				T2.FINBRANCH,
				T3.CUSTCIF,
				T3.CUSTSHRTNAME,
				T2.FINCCY,
				T1.REALIZATIONDATE,
				T1.CANCELREASON,
				T4.FINTYPEDESC,
				T6.BRANCHDESC FINBRANCHDESC,
				T5.CCYDESC FINCCYDESC,
				T7.REJECTDESC CANCELREASONDESC,
				COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
				T2.SCHEDULEMETHOD,
				T2.PROFITDAYSBASIS PFTDAYSBASIS,
				T1.WAVIEDAMT,
				COALESCE(T3.CUSTID, 0) CUSTID,
				T1.TOTFEEAMOUNT,
				T1.BOUNCEDATE,
				T1.REMARKS,
				T1.RCDMAINTAINSTS,
				T1.DEPOSITPROCESS,
				T1.DEPOSITBRANCH,
				T1.LPIAMOUNT,
				T1.LPPAMOUNT,
				T1.GSTLPIAMOUNT,
				T1.GSTLPPAMOUNT,
				T1.GDRAVAILABLE,
				T1.RELEASETYPE,
				T1.THIRDPARTYNAME,
				T1.THIRDPARTYMOBILENUM,
				T2.PRODUCTCATEGORY,
				T2.PROMOTIONCODE,
				(
				CASE
				WHEN T8.PAYMENTTYPE IN ('CHEQUE', 'DD')
				THEN T8.FAVOURNUMBER
				ELSE T8.TRANSACTIONREF
				END) TRANSACTIONREF,
				T1.CASHIERBRANCH,
				T2.NEXTREPAYRVWDATE,
				T1.INITIATEDATE,
				T9.CODE COLLECTIONAGENTCODE,
				T9.DESCRIPTION COLLECTIONAGENTDESC,
				T1.MODULE,
				T1.EXTREFERENCE,
				T10.CUSTCIF CUSTOMERCIF,
				T10.CUSTSHRTNAME CUSTOMERNAME,
				T1.FINDIVISION,
				T1.POSTBRANCH,
				T11.DIVISIONCODEDESC FINDIVISIONDESC,
				T12.BRANCHDESC POSTBRANCHDESC,
				T13.BRANCHDESC CASHIERBRANCHDESC,
				T11.ENTITYCODE,
				T1.INSTRUCTIONUID
				FROM FINRECEIPTHEADER_TEMP T1
				LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.REFERENCE = T2.FINREFERENCE
				LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN FINRECEIPTDETAIL_TEMP T8 ON T1.RECEIPTID    = T8.RECEIPTID AND T1.RECEIPTMODE = T8.PAYMENTTYPE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN CUSTOMERS T10 ON CAST(T10.CUSTID AS VARCHAR(20)) = T1.REFERENCE
				LEFT JOIN SMTDIVISIONDETAIL T11 ON T1.FINDIVISION = T11.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.POSTBRANCH = T12.BRANCHCODE
				LEFT JOIN RMTBRANCHES T13 ON T1.CASHIERBRANCH = T13.BRANCHCODE
		</createView>
	</changeSet>

	<changeSet id="10" author="satyanarayana.g">
		<comment>FINDIVISION, PostBranch, FinDivisionDesc, PostBranchDesc, CashierBranchDesc, EntityCode, MODULE, EXTREFERENCE,
		 COLLECTIONAGENTID, PANNUMBER, RECEIVEDFROM, RECEIPTCHANNEL, SUBRECEIPTMODE, CustomerCif, CustomerName Columns added</comment>
		<createView viewName="FINRECEIPTHEADER_FEVIEW" replaceIfExists="true">
		 SELECT T1.RECEIPTID,
				T1.RECEIPTDATE,
				T1.RECEIPTTYPE,
				T1.RECAGAINST,
				T1.REFERENCE,
				T1.RECEIPTPURPOSE,
				T1.RECEIPTMODE,
				T1.EXCESSADJUSTTO,
				T1.ALLOCATIONTYPE,
				T1.RECEIPTAMOUNT,
				T1.EFFECTSCHDMETHOD,
				T1.RECEIPTMODESTATUS,
				T1.VERSION,
				T1.LASTMNTBY,
				T1.LASTMNTON,
				T1.RECORDSTATUS,
				T1.ROLECODE,
				T1.NEXTROLECODE,
				T1.TASKID,
				T1.NEXTTASKID,
				T1.RECORDTYPE,
				T1.WORKFLOWID,
				T2.FINTYPE,
				T2.FINBRANCH,
				T3.CUSTCIF,
				T3.CUSTSHRTNAME,
				T2.FINCCY,
				T1.REALIZATIONDATE,
				T1.CANCELREASON,
				T4.FINTYPEDESC,
				T6.BRANCHDESC FINBRANCHDESC,
				T5.CCYDESC FINCCYDESC,
				T7.REJECTDESC CANCELREASONDESC,
				COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
				T2.SCHEDULEMETHOD,
				T2.PROFITDAYSBASIS PFTDAYSBASIS,
				T1.WAVIEDAMT,
				COALESCE(T3.CUSTID, 0) CUSTID,
				T1.TOTFEEAMOUNT,
				T1.BOUNCEDATE,
				T1.REMARKS,
				T1.RCDMAINTAINSTS,
				T1.DEPOSITPROCESS,
				T1.DEPOSITBRANCH,
				T1.LPIAMOUNT,
				T1.LPPAMOUNT,
				T1.GSTLPIAMOUNT,
				T1.GSTLPPAMOUNT,
				T1.GDRAVAILABLE,
				T1.RELEASETYPE,
				T1.THIRDPARTYNAME,
				T1.THIRDPARTYMOBILENUM,
				T2.PRODUCTCATEGORY,
				T2.PROMOTIONCODE,
				T2.NEXTREPAYRVWDATE,
				(
				CASE
				WHEN T8.PAYMENTTYPE IN ('CHEQUE', 'DD')
				THEN T8.FAVOURNUMBER
				ELSE T8.TRANSACTIONREF
				END) TRANSACTIONREF,
				T1.CASHIERBRANCH,
				T1.INITIATEDATE,
				T4.FINDIVISION LOVDESCFINDIVISION,
				T2.BUSINESSVERTICAL,
				T1.FINDIVISION,
				T1.POSTBRANCH,
				T10.DIVISIONCODEDESC FINDIVISIONDESC,
				T11.BRANCHDESC POSTBRANCHDESC,
				T12.BRANCHDESC CASHIERBRANCHDESC,
				T10.ENTITYCODE,
				T9.CODE COLLECTIONAGENTCODE,
				T9.DESCRIPTION COLLECTIONAGENTDESC,
				T1.INSTRUCTIONUID,
				T1.MODULE,
				T1.EXTREFERENCE,
				T1.COLLECTIONAGENTID,
				T1.PANNUMBER,
				T1.RECEIVEDFROM,
				T1.RECEIPTCHANNEL,
				T1.SUBRECEIPTMODE,
				T13.CUSTCIF CUSTOMERCIF,
				T13.CUSTSHRTNAME CUSTOMERNAME
				FROM FINRECEIPTHEADER_TEMP T1
				LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.REFERENCE = T2.FINREFERENCE
				LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN FINRECEIPTDETAIL T8 ON T1.RECEIPTID = T8.RECEIPTID AND T1.RECEIPTMODE = T8.PAYMENTTYPE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
				UNION ALL
				SELECT T1.RECEIPTID,
				T1.RECEIPTDATE,
				T1.RECEIPTTYPE,
				T1.RECAGAINST,
				T1.REFERENCE,
				T1.RECEIPTPURPOSE,
				T1.RECEIPTMODE,
				T1.EXCESSADJUSTTO,
				T1.ALLOCATIONTYPE,
				T1.RECEIPTAMOUNT,
				T1.EFFECTSCHDMETHOD,
				T1.RECEIPTMODESTATUS,
				T1.VERSION,
				T1.LASTMNTBY,
				T1.LASTMNTON,
				T1.RECORDSTATUS,
				T1.ROLECODE,
				T1.NEXTROLECODE,
				T1.TASKID,
				T1.NEXTTASKID,
				T1.RECORDTYPE,
				T1.WORKFLOWID,
				T2.FINTYPE,
				T2.FINBRANCH,
				T3.CUSTCIF,
				T3.CUSTSHRTNAME,
				T2.FINCCY,
				T1.REALIZATIONDATE,
				T1.CANCELREASON,
				T4.FINTYPEDESC,
				T6.BRANCHDESC FINBRANCHDESC,
				T5.CCYDESC FINCCYDESC,
				T7.REJECTDESC CANCELREASONDESC,
				COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
				T2.SCHEDULEMETHOD,
				T2.PROFITDAYSBASIS PFTDAYSBASIS,
				T1.WAVIEDAMT,
				COALESCE(T3.CUSTID, 0) CUSTID,
				T1.TOTFEEAMOUNT,
				T1.BOUNCEDATE,
				T1.REMARKS,
				T1.RCDMAINTAINSTS,
				T1.DEPOSITPROCESS,
				T1.DEPOSITBRANCH,
				T1.LPIAMOUNT,
				T1.LPPAMOUNT,
				T1.GSTLPIAMOUNT,
				T1.GSTLPPAMOUNT,
				T1.GDRAVAILABLE,
				T1.RELEASETYPE,
				T1.THIRDPARTYNAME,
				T1.THIRDPARTYMOBILENUM,
				T2.PRODUCTCATEGORY,
				T2.PROMOTIONCODE,
				T2.NEXTREPAYRVWDATE,
				(
				CASE
				WHEN T8.PAYMENTTYPE IN ('CHEQUE', 'DD')
				THEN T8.FAVOURNUMBER
				ELSE T8.TRANSACTIONREF
				END) TRANSACTIONREF,
				T1.CASHIERBRANCH,
				T1.INITIATEDATE,
				T4.FINDIVISION LOVDESCFINDIVISION,
				T2.BUSINESSVERTICAL,
				T1.FINDIVISION,
				T1.POSTBRANCH,
				T10.DIVISIONCODEDESC FINDIVISIONDESC,
				T11.BRANCHDESC POSTBRANCHDESC,
				T12.BRANCHDESC CASHIERBRANCHDESC,
				T10.ENTITYCODE,
				T9.CODE COLLECTIONAGENTCODE,
				T9.DESCRIPTION COLLECTIONAGENTDESC,
				T1.INSTRUCTIONUID,
				T1.MODULE,
				T1.EXTREFERENCE,
				T1.COLLECTIONAGENTID,
				T1.PANNUMBER,
				T1.RECEIVEDFROM,
				T1.RECEIPTCHANNEL,
				T1.SUBRECEIPTMODE,
				T13.CUSTCIF CUSTOMERCIF,
				T13.CUSTSHRTNAME CUSTOMERNAME
				FROM FINRECEIPTHEADER T1
				LEFT JOIN
				(SELECT FINREFERENCE,
				FINBRANCH,
				FINTYPE,
				FINCCY,
				SCHEDULEMETHOD,
				PROFITDAYSBASIS,
				FINISACTIVE,
				CUSTID,
				PRODUCTCATEGORY,
				PROMOTIONCODE,
				NEXTREPAYRVWDATE,
				BUSINESSVERTICAL
				FROM FINANCEMAIN_TEMP
				UNION
				SELECT FINREFERENCE,
				FINBRANCH,
				FINTYPE,
				FINCCY,
				SCHEDULEMETHOD,
				PROFITDAYSBASIS,
				FINISACTIVE,
				CUSTID,
				PRODUCTCATEGORY,
				PROMOTIONCODE,
				NEXTREPAYRVWDATE,
				BUSINESSVERTICAL
				FROM FINANCEMAIN
				) T2 ON T1.REFERENCE = T2.FINREFERENCE
				LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
				LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
				LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
				LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
				LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
				LEFT JOIN FINRECEIPTDETAIL T8 ON T1.RECEIPTID = T8.RECEIPTID AND T1.RECEIPTMODE = T8.PAYMENTTYPE
				LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
				WHERE NOT EXISTS
				( SELECT 1 FROM FINRECEIPTHEADER_TEMP WHERE RECEIPTID = T1.RECEIPTID
				)
		</createView>
	</changeSet>

	<changeSet id="11" author="Bharat">
		<sql>
			<![CDATA[
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'KNOCKOFF_RECEIPT_MAKER') AND RIGHTID IN(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME ='ReceiptDialog_collectionAgent');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'KNOCKOFF_RECEIPT_MAKER') AND RIGHTID IN(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME ='ReceiptDialog_panNumber');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'KNOCKOFF_RECEIPT_MAKER') AND RIGHTID IN(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME ='ReceiptDialog_externalRefrenceNumber');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'KNOCKOFF_RECEIPT_MAKER') AND RIGHTID IN(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME ='ReceiptDialog_fundingAccount');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FIN_DEPOSIT_MAKER') AND RIGHTID IN(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME ='ReceiptDialog_fundingAccount');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'KNOCKOFF_RECEIPT_MAKER') AND RIGHTID IN(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME ='ReceiptDialog_paymentRef');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'KNOCKOFF_RECEIPT_MAKER') AND RIGHTID IN(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME ='ReceiptDialog_excessAdjustTo');
					
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FIN_RECEIPT_MAKER') AND RIGHTID IN(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME ='ReceiptDialog_collectionAgent');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FIN_RECEIPT_MAKER') AND RIGHTID IN(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME ='ReceiptDialog_panNumber');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FIN_RECEIPT_MAKER') AND RIGHTID IN(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME ='ReceiptDialog_externalRefrenceNumber');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FIN_RECEIPT_MAKER') AND RIGHTID IN(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME ='ReceiptDialog_fundingAccount');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FIN_RECEIPT_MAKER') AND RIGHTID IN(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME ='ReceiptDialog_paymentRef');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FIN_RECEIPT_MAKER') AND RIGHTID IN(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME ='ReceiptDialog_excessAdjustTo');
					
				DELETE FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_collectionAgent';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_panNumber';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_externalRefrenceNumber';
				DELETE FROM secGROUPrights WHERE RIGHTID IN (SELECT RIGHTID from secrights where rightname='ReceiptDialog_fundingAccount');
				DELETE FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_fundingAccount';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_paymentRef';	
			]]>
		</sql>
	</changeSet>

	<changeSet id='11.1' author="Bharat">
		<sql>
			<![CDATA[
				UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS_VIEW);
				UPDATE SEQSECGROUPS SET SEQNO= (SELECT MAX(GRPID) FROM SECGROUPS_VIEW);
				UPDATE SEQSECROLES SET SEQNO= (SELECT MAX(ROLEID) FROM SECROLES_VIEW);
				UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS_VIEW); 
				UPDATE SEQSECROLEGROUPS SET SEQNO= (SELECT MAX(ROLEGRPID) FROM SECROLEGROUPS_VIEW);
				
				INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'ReceiptDialog_collectionAgent',		'ReceiptDialog', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL,0 FROM SEQSECRIGHTS WHERE 0=0;
				INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'ReceiptDialog_panNumber',				'ReceiptDialog', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL,0 FROM SEQSECRIGHTS WHERE 0=0;
				INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'ReceiptDialog_externalRefrenceNumber',	'ReceiptDialog', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL,0 FROM SEQSECRIGHTS WHERE 0=0;
				INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'ReceiptDialog_fundingAccount',			'ReceiptDialog', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL,0 FROM SEQSECRIGHTS WHERE 0=0;
				INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'ReceiptDialog_paymentRef',				'ReceiptDialog', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL,0 FROM SEQSECRIGHTS WHERE 0=0;
						   
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FIN_RECEIPT_MAKER'),		(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'ReceiptDialog_collectionAgent'),			1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL,NULL,NULL,NULL,NULL,0); 
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FIN_RECEIPT_MAKER'),		(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'ReceiptDialog_panNumber'),				1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FIN_RECEIPT_MAKER'),		(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'ReceiptDialog_externalRefrenceNumber'),	1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FIN_RECEIPT_MAKER'),		(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'ReceiptDialog_fundingAccount'),			1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FIN_DEPOSIT_MAKER'),		(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'ReceiptDialog_fundingAccount'),			1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FIN_RECEIPT_MAKER'),		(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'ReceiptDialog_paymentRef'),				1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'KNOCKOFF_RECEIPT_MAKER'),	(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'ReceiptDialog_collectionAgent'),			1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'KNOCKOFF_RECEIPT_MAKER'),	(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'ReceiptDialog_panNumber'),				1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'KNOCKOFF_RECEIPT_MAKER'),	(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'ReceiptDialog_externalRefrenceNumber'),	1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'KNOCKOFF_RECEIPT_MAKER'),	(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'ReceiptDialog_fundingAccount'),			1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'KNOCKOFF_RECEIPT_MAKER'),	(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'ReceiptDialog_paymentRef'),				1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FIN_RECEIPT_MAKER'),		(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'ReceiptDialog_excessAdjustTo'), 			1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'KNOCKOFF_RECEIPT_MAKER'),	(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'ReceiptDialog_excessAdjustTo'), 			1, 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL,NULL,NULL,NULL,NULL,0);
				
				UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS_VIEW);
				UPDATE SEQSECGROUPS SET SEQNO= (SELECT MAX(GRPID) FROM SECGROUPS_VIEW);
				UPDATE SEQSECROLES SET SEQNO= (SELECT MAX(ROLEID) FROM SECROLES_VIEW);
				UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS_VIEW); 
				UPDATE SEQSECROLEGROUPS SET SEQNO= (SELECT MAX(ROLEGRPID) FROM SECROLEGROUPS_VIEW);
			]]>
		</sql>
	</changeSet>

	<changeSet id="12_pre" author="murthy.y" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_save_and_drop_dependencies ('plf', 'finreceiptheader_temp');
					select deps_save_and_drop_dependencies ('plf', 'finreceiptheader');
			]]>
		</sql>
	</changeSet>

	<changeSet id="12" author="Vidhya">
		<modifyDataType tableName="FINRECEIPTHEADER_TEMP" columnName="Remarks" newDataType="varchar2(500)" />
		<modifyDataType tableName="FINRECEIPTHEADER" columnName="Remarks" newDataType="varchar2(500)" />
	</changeSet>

	<changeSet id="12_post" author="shinde.b" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_restore_dependencies ('plf', 'finreceiptheader_temp');
					select deps_restore_dependencies ('plf', 'finreceiptheader');
			]]>
		</sql>
	</changeSet>

	<changeSet id="13" author="satyanarayana.g">
		<sql>
			<![CDATA[
			UPDATE SeqWorkFlowDetails SET SEQNO= (SELECT MAX(WorkflowId)+1 FROM workflowdetails);
			UPDATE WorkFlowDetails SET
			WorkFlowActive= 0 where WorkFlowType='RECEIPTS_WORKFLOW';
			]]>
		</sql>
		<insert tableName="WorkFlowDetails">
			<column name="WorkFlowId" valueComputed="(select max(WorkFlowId) + 1 from WorkFlowDetails)" />
			<column name="WorkFlowType">RECEIPTS_WORKFLOW</column>
			<column name="WorkFlowSubType">RECEIPTS_WORKFLOW</column>
			<column name="WorkFlowDesc">Maker/Checker workflow for receipt process.</column>
			<column name="JsonDesign" type="nclob"><![CDATA[NULL]]></column>
			<column name="SvgDesign" type="nclob"><![CDATA[NULL]]></column>
			<column name="WorkFlowXml" type="clob"><![CDATA[NULL]]></column>
			<column name="WorkFlowRoles">RECEIPT_MAKER;RECEIPT_APPROVER;DEPOSIT_MAKER;DEPOSIT_APPROVER;REALIZATION_MAKER;REALIZATION_APPROVER
			</column>
			<column name="FirstTaskOwner">RECEIPT_MAKER</column>
			<column name="WorkFlowActive">1</column>
			<column name="Version">5</column>
			<column name="LastMntBy">1000</column>
			<column name="LastMntOn" valueDate="current_timestamp" />
			<column name="RecordStatus">Null</column>
			<column name="RoleCode">Null</column>
			<column name="NextRoleCode">Null</column>
			<column name="TaskId">Null</column>
			<column name="NextTaskId">Null</column>
			<column name="RecordType">NULL</column>
		</insert>
	</changeSet>

	<changeSet id="13.1" author="satyanarayana.g">
		<update tableName="WORKFLOWDETAILS">
			<column name="JSONDESIGN" type="NCLOB"><![CDATA[{"resourceId":1058,"properties":{"process_id":"RECEIPTS_WORKFLOW","name":"RECEIPTS_WORKFLOW","documentation":"Maker/Checker workflow for receipt process.","category":"","listenerclass":"","listenerentitytype":""},"stencil":{"id":"BPMNDiagram"},"childShapes":[{"resourceId":"startEvent1","properties":{"overrideid":"","name":"Start"},"stencil":{"id":"StartNoneEvent"},"childShapes":[],"outgoing":[{"resourceId":"sid-AE7C2E09-B0E6-4DCA-92F0-89C71A468A49"}],"bounds":{"lowerRight":{"x":106.20788956733566,"y":302.4897220820909},"upperLeft":{"x":76.20788956733566,"y":272.4897220820909}},"dockers":[]},{"resourceId":"sid-51EFE826-FBE9-4040-A4B3-837208EFEB73","properties":{"overrideid":"","name":"Receipt Maker","usertaskassignment":{"assignment":{"type":"idm","idm":{"type":"user","assignee":{"email":"RECEIPT_MAKER","firstName":"RECEIPT_MAKER","fullName":"RECEIPT_MAKER","id":"RECEIPT_MAKER","roledesc":"Receipt Maker","$$hashKey":"object:2454"}}}},"additionalforms":"","formkeydefinition":"","allowrevert":"","prioritydefinition":"Role Queue","baseactor":"","duedatedefinition":"","multiinstance_type":"None","isforcompensation":"false"},"stencil":{"id":"UserTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-6652E848-0D47-40C0-BFBD-68C5DDED6E08"},{"resourceId":"sid-B30A8621-A48F-49F1-8FFD-BE599F77CD04"}],"bounds":{"lowerRight":{"x":275,"y":327.48972208209085},"upperLeft":{"x":175,"y":247.48972208209088}},"dockers":[]},{"resourceId":"sid-AE7C2E09-B0E6-4DCA-92F0-89C71A468A49","properties":{"overrideid":"","name":"","repruseaction":"false","conditionsequenceflow":"","defaultflow":"false","action":"","state":"","mandatenotes":"false","capturereasons":"false","typeofreason":"","constraint":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-51EFE826-FBE9-4040-A4B3-837208EFEB73"}],"bounds":{"lowerRight":{"x":174.87320945050604,"y":287.4897220820909},"upperLeft":{"x":106.84140164590832,"y":287.4897220820909}},"dockers":[{"x":15,"y":14.999999999999998},{"x":50,"y":39.999999999999986}],"target":{"resourceId":"sid-51EFE826-FBE9-4040-A4B3-837208EFEB73"}},{"resourceId":"sid-7EAB2AF6-B3F2-456E-9DEC-E7FCCE8D5FEC","properties":{"overrideid":"","name":"Deposit Maker","usertaskassignment":{"assignment":{"type":"idm","idm":{"type":"user","assignee":{"email":"DEPOSIT_MAKER","firstName":"DEPOSIT_MAKER","fullName":"DEPOSIT_MAKER","id":"DEPOSIT_MAKER","roledesc":"Deposit Maker","$$hashKey":"object:13359"}}}},"additionalforms":"","formkeydefinition":"","allowrevert":"","prioritydefinition":"Role Queue","baseactor":"","duedatedefinition":"","multiinstance_type":"None","isforcompensation":"false"},"stencil":{"id":"UserTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-B91C3E62-EE30-4F26-A46F-26F2F8726159"},{"resourceId":"sid-257AEB3B-7BC0-4017-AD58-C46F23943E1B"}],"bounds":{"lowerRight":{"x":593.8271792284754,"y":141.72839740355943},"upperLeft":{"x":493.8271792284756,"y":61.72839740355943}},"dockers":[]},{"resourceId":"sid-4DF6695B-7500-4E02-B430-4A553F5E7AD6","properties":{"overrideid":"","name":"","sequencefloworder":""},"stencil":{"id":"ParallelGateway"},"childShapes":[],"outgoing":[{"resourceId":"sid-D774F854-DCDD-4E0A-AE2E-EECB42D177C9"},{"resourceId":"sid-EC052E1D-8189-4F77-A38B-908BDC33076E"}],"bounds":{"lowerRight":{"x":378.6419870177972,"y":307.4897220820909},"upperLeft":{"x":338.6419870177972,"y":267.4897220820909}},"dockers":[]},{"resourceId":"sid-10B3C2BA-83ED-492C-8D26-78BF6B85195D","properties":{"overrideid":"","name":"Receipt/Realization Approver","usertaskassignment":{"assignment":{"type":"idm","idm":{"type":"user","assignee":{"email":"RECEIPT_APPROVER","firstName":"RECEIPT_APPROVER","fullName":"RECEIPT_APPROVER","id":"RECEIPT_APPROVER","roledesc":"Receipt Approver","$$hashKey":"object:5163"}}}},"additionalforms":"Accounting","formkeydefinition":"","allowrevert":"","prioritydefinition":"Role Queue","baseactor":"","duedatedefinition":"","multiinstance_type":"None","isforcompensation":"false"},"stencil":{"id":"UserTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-B83F1511-0789-4A1D-B258-A0941E599880"},{"resourceId":"sid-A42E70F0-C3E2-4E9C-B69F-D5932974D70E"}],"bounds":{"lowerRight":{"x":408.6419870177972,"y":450.3703844213566},"upperLeft":{"x":308.6419870177972,"y":370.3703844213566}},"dockers":[]},{"resourceId":"sid-E83823E9-0986-4566-B449-572CF86EF5EE","properties":{"overrideid":"","name":"Realization /Bounce Maker","usertaskassignment":{"assignment":{"type":"idm","idm":{"type":"user","assignee":{"email":"REALIZATION_MAKER","firstName":"REALIZATION_MAKER","fullName":"REALIZATION_MAKER","id":"REALIZATION_MAKER","roledesc":"Receipt Realization Maker","$$hashKey":"object:7489"}}}},"additionalforms":"","formkeydefinition":"","allowrevert":"","prioritydefinition":"Role Queue","baseactor":"","duedatedefinition":"","multiinstance_type":"None","isforcompensation":"false"},"stencil":{"id":"UserTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-17C106B5-9623-436B-97E8-BCB05BAD44B8"}],"bounds":{"lowerRight":{"x":1037.357060601777,"y":141.72839740355943},"upperLeft":{"x":937.357060601777,"y":61.728397403559434}},"dockers":[]},{"resourceId":"sid-314AED53-E128-4D77-8975-3CA4615AF2C5","properties":{"overrideid":"","name":"Realization/Bounce Approver","usertaskassignment":{"assignment":{"type":"idm","idm":{"type":"user","assignee":{"email":"REALIZATION_APPROVER","firstName":"REALIZATION_APPROVER","fullName":"REALIZATION_APPROVER","id":"REALIZATION_APPROVER","roledesc":"Receipt Realization Approver","$$hashKey":"object:12489"}}}},"additionalforms":"Accounting","formkeydefinition":"","allowrevert":"","prioritydefinition":"Role Queue","baseactor":"","duedatedefinition":"","multiinstance_type":"None","isforcompensation":"false"},"stencil":{"id":"UserTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-D76336E8-99A8-406F-B42F-C322488B0B5A"},{"resourceId":"sid-18F59955-B849-4CF8-96F6-56AE063AE803"}],"bounds":{"lowerRight":{"x":1037.357060601777,"y":308.6236733175066},"upperLeft":{"x":937.357060601777,"y":228.6236733175066}},"dockers":[]},{"resourceId":"sid-CBE57D5E-89DC-4526-9CA6-D8C735E3D473","properties":{"overrideid":"","name":"Complete Process","rerunnable":true,"servicetaskexpression":"doApprove","isforcompensation":"false","multiinstance_type":"None","parameters":""},"stencil":{"id":"approveTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-FBCC151B-5E17-43E8-8F67-4BCDE2137782"}],"bounds":{"lowerRight":{"x":738.0572963364809,"y":450.3703844213567},"upperLeft":{"x":638.0572963364808,"y":370.3703844213566}},"dockers":[]},{"resourceId":"sid-5EE432B5-33E2-4B25-9512-89E521341CA8","properties":{"overrideid":"","name":"Approved"},"stencil":{"id":"EndNoneEvent"},"childShapes":[],"outgoing":[],"bounds":{"lowerRight":{"x":702.0572963364809,"y":508.1097139667638},"upperLeft":{"x":674.0572963364809,"y":480.1097139667638}},"dockers":[]},{"resourceId":"sid-DB8B9381-BC8B-4599-AE73-C0361266603A","properties":{"overrideid":"","name":"Cancel Process","rerunnable":true,"servicetaskexpression":"doReject","isforcompensation":"false","multiinstance_type":"None","parameters":""},"stencil":{"id":"rejectTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-B5E3C47A-AEB9-46F9-9526-0A03CB4DE381"}],"bounds":{"lowerRight":{"x":346.9135896142377,"y":182.88066233926565},"upperLeft":{"x":246.91358961423774,"y":102.88066233926573}},"dockers":[]},{"resourceId":"sid-CA7B1921-C527-4732-999E-1A8F69222534","properties":{"overrideid":"","name":"Deposit Approver","usertaskassignment":{"assignment":{"type":"idm","idm":{"type":"user","assignee":{"email":"DEPOSIT_APPROVER","firstName":"DEPOSIT_APPROVER","fullName":"DEPOSIT_APPROVER","id":"DEPOSIT_APPROVER","roledesc":"Deposit Approver","$$hashKey":"object:4618"}}}},"additionalforms":"Accounting","formkeydefinition":"","allowrevert":"","prioritydefinition":"Role Queue","baseactor":"","duedatedefinition":"","multiinstance_type":"None","isforcompensation":"false"},"stencil":{"id":"UserTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-6D1DF25D-B51D-46A2-BB49-1196DD0D0026"},{"resourceId":"sid-FC80C4F5-581B-4B14-8151-850B2652B03C"},{"resourceId":"sid-7517638B-3A52-4AE6-BE88-BA63618DDC42"}],"bounds":{"lowerRight":{"x":593.8271792284754,"y":306.3374571463846},"upperLeft":{"x":493.8271792284755,"y":226.3374571463846}},"dockers":[]},{"resourceId":"sid-0B7D369B-9B06-4A6C-8AE8-F0B94F6F70E4","properties":{"overrideid":"","name":"Rejected"},"stencil":{"id":"EndNoneEvent"},"childShapes":[],"outgoing":[],"bounds":{"lowerRight":{"x":310.9135896142377,"y":233.76132467853145},"upperLeft":{"x":282.9135896142377,"y":205.76132467853145}},"dockers":[]},{"resourceId":"sid-B5E3C47A-AEB9-46F9-9526-0A03CB4DE381","properties":{"overrideid":"","name":"","repruseaction":"false","conditionsequenceflow":"","defaultflow":"false","action":"","state":"","mandatenotes":"false","capturereasons":"false","typeofreason":"","constraint":"","showdiamondmarker":false},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-0B7D369B-9B06-4A6C-8AE8-F0B94F6F70E4"}],"bounds":{"lowerRight":{"x":296.9135896142377,"y":205.40766542735776},"upperLeft":{"x":296.9135896142377,"y":183.3710787752452}},"dockers":[{"x":49.999999999999986,"y":59.90504953425812},{"x":14,"y":14}],"target":{"resourceId":"sid-0B7D369B-9B06-4A6C-8AE8-F0B94F6F70E4"}},{"resourceId":"sid-A1F4CB2C-364F-408E-AA99-4ECE6F7ECCBD","properties":{"overrideid":"","name":"","sequencefloworder":""},"stencil":{"id":"ExclusiveGateway"},"childShapes":[],"outgoing":[{"resourceId":"sid-E620DB3E-1677-477B-B449-3FAC0BBB471F"},{"resourceId":"sid-14001BB8-43FF-4417-89A3-95E88790991C"}],"bounds":{"lowerRight":{"x":708.0572963364809,"y":121.72839740355943},"upperLeft":{"x":668.0572963364809,"y":81.72839740355943}},"dockers":[]},{"resourceId":"sid-FBCC151B-5E17-43E8-8F67-4BCDE2137782","properties":{"overrideid":"","name":"","repruseaction":"false","conditionsequenceflow":"","defaultflow":"false","action":"","state":"","mandatenotes":"false","capturereasons":"false","typeofreason":"","constraint":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-5EE432B5-33E2-4B25-9512-89E521341CA8"}],"bounds":{"lowerRight":{"x":688.0572963364809,"y":480.02544372529394},"upperLeft":{"x":688.0572963364809,"y":450.62319514576626}},"dockers":[{"x":50.00000000000006,"y":40.000000000000036},{"x":14,"y":14}],"target":{"resourceId":"sid-5EE432B5-33E2-4B25-9512-89E521341CA8"}},{"resourceId":"sid-7517638B-3A52-4AE6-BE88-BA63618DDC42","properties":{"overrideid":"","name":"Resubmit","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Resubmitted'"}},"defaultflow":"false","action":"Resubmit","state":"Resubmitted","mandatenotes":true,"capturereasons":"false","typeofreason":"","constraint":"","showdiamondmarker":false},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-7EAB2AF6-B3F2-456E-9DEC-E7FCCE8D5FEC"}],"bounds":{"lowerRight":{"x":569.5075624315751,"y":226.05932846811262},"upperLeft":{"x":569.5075624315751,"y":142.47618152334235}},"dockers":[{"x":75.68038320309967,"y":13.202746917840358},{"x":75.68038320309955,"y":63.70094406763849}],"target":{"resourceId":"sid-7EAB2AF6-B3F2-456E-9DEC-E7FCCE8D5FEC"}},{"resourceId":"sid-257AEB3B-7BC0-4017-AD58-C46F23943E1B","properties":{"overrideid":"","name":"Submit","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Submitted'"}},"defaultflow":"false","action":"Submit","state":"Submitted","mandatenotes":"false","capturereasons":"false","typeofreason":"","constraint":"","showdiamondmarker":false},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-CA7B1921-C527-4732-999E-1A8F69222534"}],"bounds":{"lowerRight":{"x":526.4060472828005,"y":226.1777932219419},"upperLeft":{"x":526.4060472828005,"y":142.14633840605165}},"dockers":[{"x":32.578868054324985,"y":69.52051699712433},{"x":32.57886805432503,"y":2.36301669176774}],"target":{"resourceId":"sid-CA7B1921-C527-4732-999E-1A8F69222534"}},{"resourceId":"sid-EC052E1D-8189-4F77-A38B-908BDC33076E","properties":{"overrideid":"","name":"Other modes","repruseaction":"false","conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.subReceiptMode != 'CHEQUE'  &&  vo.subReceiptMode != 'DD'"}},"defaultflow":"false","action":"","state":"","mandatenotes":"false","capturereasons":"false","typeofreason":"","constraint":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-10B3C2BA-83ED-492C-8D26-78BF6B85195D"}],"bounds":{"lowerRight":{"x":359.05977643910006,"y":370.170336861822},"upperLeft":{"x":358.8062288464943,"y":308.1116922265897}},"dockers":[{"x":20.5,"y":20.5},{"x":50,"y":40}],"target":{"resourceId":"sid-10B3C2BA-83ED-492C-8D26-78BF6B85195D"}},{"resourceId":"sid-6D1DF25D-B51D-46A2-BB49-1196DD0D0026","properties":{"overrideid":"","name":"Approve","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Approved'"}},"defaultflow":"false","action":"Approve","state":"Approved","mandatenotes":"false","capturereasons":"false","typeofreason":"","constraint":"","showdiamondmarker":false},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-A1F4CB2C-364F-408E-AA99-4ECE6F7ECCBD"}],"bounds":{"lowerRight":{"x":667.7521199585426,"y":266.3374571463846},"upperLeft":{"x":594.3649993460699,"y":102.22839740355943}},"dockers":[{"x":83.67187499999997,"y":40.000000000000014},{"x":630.9422377824782,"y":266.3374571463846},{"x":630.9422377824782,"y":102.22839740355943},{"x":20.5,"y":20.5}],"target":{"resourceId":"sid-A1F4CB2C-364F-408E-AA99-4ECE6F7ECCBD"}},{"resourceId":"sid-17C106B5-9623-436B-97E8-BCB05BAD44B8","properties":{"overrideid":"","name":"Submit","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Submitted'"}},"defaultflow":"false","action":"Submit","state":"Submitted","mandatenotes":"false","capturereasons":"false","typeofreason":"","constraint":"","showdiamondmarker":false},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-314AED53-E128-4D77-8975-3CA4615AF2C5"}],"bounds":{"lowerRight":{"x":962.357060601777,"y":228.00494670518472},"upperLeft":{"x":962.357060601777,"y":142.55341188301387}},"dockers":[{"x":25,"y":79},{"x":25,"y":17.706577456221396}],"target":{"resourceId":"sid-314AED53-E128-4D77-8975-3CA4615AF2C5"}},{"resourceId":"sid-18F59955-B849-4CF8-96F6-56AE063AE803","properties":{"overrideid":"","name":"Resubmit","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Resubmitted'"}},"defaultflow":"false","action":"Resubmit","state":"Resubmitted","mandatenotes":true,"capturereasons":"false","typeofreason":"","constraint":"","showdiamondmarker":false},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-E83823E9-0986-4566-B449-572CF86EF5EE"}],"bounds":{"lowerRight":{"x":1007.9610920833444,"y":227.85741182846948},"upperLeft":{"x":1007.9610920833444,"y":142.4895648017884}},"dockers":[{"x":70.6040314815674,"y":26.95802113088888},{"x":70.6040314815674,"y":62.28759799289273}],"target":{"resourceId":"sid-E83823E9-0986-4566-B449-572CF86EF5EE"}},{"resourceId":"sid-A42E70F0-C3E2-4E9C-B69F-D5932974D70E","properties":{"overrideid":"","name":"Approve","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Approved'"}},"defaultflow":"false","action":"Approve","state":"Approved","mandatenotes":"false","capturereasons":"false","typeofreason":"","constraint":"","showdiamondmarker":false},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-CBE57D5E-89DC-4526-9CA6-D8C735E3D473"}],"bounds":{"lowerRight":{"x":637.2356943229953,"y":410.3703844213567},"upperLeft":{"x":409.5465969517463,"y":410.3703844213567}},"dockers":[{"x":70.77330977954688,"y":40},{"x":28.18926351959351,"y":40.00000000000006}],"target":{"resourceId":"sid-CBE57D5E-89DC-4526-9CA6-D8C735E3D473"}},{"resourceId":"sid-D76336E8-99A8-406F-B42F-C322488B0B5A","properties":{"overrideid":"","name":"Approve","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Approved'"}},"defaultflow":"false","action":"Approve","state":"Approved","mandatenotes":"false","capturereasons":"false","typeofreason":"","constraint":"","showdiamondmarker":false},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-CBE57D5E-89DC-4526-9CA6-D8C735E3D473"}],"bounds":{"lowerRight":{"x":987.357060601777,"y":405.42599016407974},"upperLeft":{"x":738.9422618295055,"y":309.1680930309691}},"dockers":[{"x":50,"y":40},{"x":987.357060601777,"y":405.42599016407974},{"x":66.77680636396201,"y":35.05560574272312}],"target":{"resourceId":"sid-CBE57D5E-89DC-4526-9CA6-D8C735E3D473"}},{"resourceId":"sid-E620DB3E-1677-477B-B449-3FAC0BBB471F","properties":{"overrideid":"","name":"Partial payment/Early settlement","repruseaction":"false","conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.receiptPurpose != 'SchdlRepayment'"}},"defaultflow":"false","action":"","state":"","mandatenotes":"false","capturereasons":"false","typeofreason":"","constraint":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-E83823E9-0986-4566-B449-572CF86EF5EE"}],"bounds":{"lowerRight":{"x":937.335225677068,"y":102.19547404447496},"upperLeft":{"x":708.2322802029956,"y":101.81210201264389}},"dockers":[{"x":20.5,"y":20.5},{"x":50,"y":40}],"target":{"resourceId":"sid-E83823E9-0986-4566-B449-572CF86EF5EE"}},{"resourceId":"sid-14001BB8-43FF-4417-89A3-95E88790991C","properties":{"overrideid":"","name":"Schedule payment alone","repruseaction":"false","conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.receiptPurpose == 'SchdlRepayment'"}},"defaultflow":"false","action":"","state":"","mandatenotes":"false","capturereasons":"false","typeofreason":"","constraint":"","showdiamondmarker":false},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-CBE57D5E-89DC-4526-9CA6-D8C735E3D473"}],"bounds":{"lowerRight":{"x":688.5572963364809,"y":370.2456284757459},"upperLeft":{"x":688.5572963364809,"y":121.94263956510284}},"dockers":[{"x":20.5,"y":20.5},{"x":50.500000000000114,"y":31.28588756689726}],"target":{"resourceId":"sid-CBE57D5E-89DC-4526-9CA6-D8C735E3D473"}},{"resourceId":"sid-FC80C4F5-581B-4B14-8151-850B2652B03C","properties":{"overrideid":"","name":"Reject","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Rejected'"}},"defaultflow":"false","action":"Reject","state":"Rejected","mandatenotes":"false","capturereasons":"false","typeofreason":"","constraint":"","showdiamondmarker":false},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-DB8B9381-BC8B-4599-AE73-C0361266603A"}],"bounds":{"lowerRight":{"x":492.8592436721941,"y":271.6049455825679},"upperLeft":{"x":346.94493015035596,"y":148.60539859260717}},"dockers":[{"x":21.10723298537954,"y":45.2674884361833},{"x":411.17973631644753,"y":271.6049455825679},{"x":411.17973631644753,"y":148.60539859260717},{"x":75.43577234838298,"y":45.72473625334144}],"target":{"resourceId":"sid-DB8B9381-BC8B-4599-AE73-C0361266603A"}},{"resourceId":"sid-D774F854-DCDD-4E0A-AE2E-EECB42D177C9","properties":{"overrideid":"","name":"Cheque/DD","repruseaction":"false","conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.subReceiptMode == 'CHEQUE' || vo.subReceiptMode == 'DD'"}},"defaultflow":"false","action":"","state":"","mandatenotes":"false","capturereasons":"false","typeofreason":"","constraint":"","showdiamondmarker":false},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-7EAB2AF6-B3F2-456E-9DEC-E7FCCE8D5FEC"}],"bounds":{"lowerRight":{"x":493.1915537987954,"y":267.44737934632553},"upperLeft":{"x":359.1419870177972,"y":130.3155059814453}},"dockers":[{"x":20.5,"y":20.5},{"x":359.1419870177972,"y":204.60905974282517},{"x":464.67767333984375,"y":204.6090597428252},{"x":464.67767333984375,"y":130.3155059814453},{"x":40.80932186592014,"y":68.58710857788589}],"target":{"resourceId":"sid-7EAB2AF6-B3F2-456E-9DEC-E7FCCE8D5FEC"}},{"resourceId":"sid-B91C3E62-EE30-4F26-A46F-26F2F8726159","properties":{"overrideid":"","name":"Reject","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Rejected'"}},"defaultflow":"false","action":"Reject","state":"Rejected","mandatenotes":true,"capturereasons":"false","typeofreason":"","constraint":"","showdiamondmarker":false},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-DB8B9381-BC8B-4599-AE73-C0361266603A"}],"bounds":{"lowerRight":{"x":492.98468490238145,"y":112.48285636460488},"upperLeft":{"x":347.1823585009571,"y":112.48285636460488}},"dockers":[{"x":17.049200119782917,"y":50.75445896104546},{"x":83.7847156446654,"y":9.602194025339159}],"target":{"resourceId":"sid-DB8B9381-BC8B-4599-AE73-C0361266603A"}},{"resourceId":"sid-6652E848-0D47-40C0-BFBD-68C5DDED6E08","properties":{"overrideid":"","name":"Cancel","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Cancelled'"}},"defaultflow":"false","action":"Cancel","state":"Cancelled","mandatenotes":true,"capturereasons":"false","typeofreason":"","constraint":"","showdiamondmarker":false},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-DB8B9381-BC8B-4599-AE73-C0361266603A"}],"bounds":{"lowerRight":{"x":253.07903248050212,"y":246.85494210765643},"upperLeft":{"x":253.07903248050212,"y":183.41361716751697}},"dockers":[{"x":78.07903248050212,"y":19.204389326514757},{"x":6.165442866264412,"y":36.89694009452405}],"target":{"resourceId":"sid-DB8B9381-BC8B-4599-AE73-C0361266603A"}},{"resourceId":"sid-B30A8621-A48F-49F1-8FFD-BE599F77CD04","properties":{"overrideid":"","name":"Submit","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Submitted'"}},"defaultflow":"false","action":"Submit","state":"Submitted","mandatenotes":"false","capturereasons":"false","typeofreason":"","constraint":"","showdiamondmarker":false},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-4DF6695B-7500-4E02-B430-4A553F5E7AD6"}],"bounds":{"lowerRight":{"x":338.47629939467254,"y":287.4897220820909},"upperLeft":{"x":275.4796196292932,"y":287.4897220820909}},"dockers":[{"x":76.98076894127723,"y":40.00000000000003},{"x":20,"y":19.999999999999996}],"target":{"resourceId":"sid-4DF6695B-7500-4E02-B430-4A553F5E7AD6"}},{"resourceId":"sid-B83F1511-0789-4A1D-B258-A0941E599880","properties":{"overrideid":"","name":"Resubmit","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Resubmitted'"}},"defaultflow":"false","action":"Resubmit","state":"Resubmitted","mandatenotes":true,"capturereasons":"false","typeofreason":"","constraint":"","showdiamondmarker":false},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-51EFE826-FBE9-4040-A4B3-837208EFEB73"}],"bounds":{"lowerRight":{"x":308.43181103543054,"y":406.6625891171839},"upperLeft":{"x":220.5075460592727,"y":327.77938020467934}},"dockers":[{"x":18.242249854075624,"y":36.29220469582731},{"x":220.5075460592727,"y":406.6625891171839},{"x":45.5075460592727,"y":62.71012419735169}],"target":{"resourceId":"sid-51EFE826-FBE9-4040-A4B3-837208EFEB73"}}],"bounds":{"lowerRight":{"x":1200,"y":1050},"upperLeft":{"x":0,"y":0}},"stencilset":{"url":"stencilsets/bpmn2.0/bpmn2.0.json","namespace":"http://b3mn.org/stencilset/bpmn2.0#"},"ssextensions":[]}]]></column>
			<column name="WORKFLOWXML" type="CLOB"><![CDATA[<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:activiti="http://activiti.org/bpmn" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI" typeLanguage="http://www.w3.org/2001/XMLSchema" expressionLanguage="http://www.w3.org/1999/XPath" targetNamespace="http://activiti.org/test">
  <process id="RECEIPTS_WORKFLOW" name="RECEIPTS_WORKFLOW" isExecutable="true">
    <documentation>Maker/Checker workflow for receipt process.</documentation>
    <startEvent id="startEvent1" name="Start"/>
    <userTask id="sid-51EFE826-FBE9-4040-A4B3-837208EFEB73" name="Receipt Maker" activiti:actor="RECEIPT_MAKER" activiti:assignmentLevel="Role Queue"/>
    <sequenceFlow id="sid-AE7C2E09-B0E6-4DCA-92F0-89C71A468A49" sourceRef="startEvent1" targetRef="sid-51EFE826-FBE9-4040-A4B3-837208EFEB73" representsUserAction="false" mandateNotes="false" captureReasons="false"/>
    <userTask id="sid-7EAB2AF6-B3F2-456E-9DEC-E7FCCE8D5FEC" name="Deposit Maker" activiti:actor="DEPOSIT_MAKER" activiti:assignmentLevel="Role Queue"/>
    <parallelGateway id="sid-4DF6695B-7500-4E02-B430-4A553F5E7AD6"/>
    <userTask id="sid-10B3C2BA-83ED-492C-8D26-78BF6B85195D" name="Receipt/Realization Approver" activiti:actor="RECEIPT_APPROVER" activiti:additionalForms="Accounting" activiti:assignmentLevel="Role Queue"/>
    <userTask id="sid-E83823E9-0986-4566-B449-572CF86EF5EE" name="Realization /Bounce Maker" activiti:actor="REALIZATION_MAKER" activiti:assignmentLevel="Role Queue"/>
    <userTask id="sid-314AED53-E128-4D77-8975-3CA4615AF2C5" name="Realization/Bounce Approver" activiti:actor="REALIZATION_APPROVER" activiti:additionalForms="Accounting" activiti:assignmentLevel="Role Queue"/>
    <serviceTask id="sid-CBE57D5E-89DC-4526-9CA6-D8C735E3D473" name="Complete Process" activiti:operation="doApprove" activiti:rerunnable="true"/>
    <endEvent id="sid-5EE432B5-33E2-4B25-9512-89E521341CA8" name="Approved"/>
    <serviceTask id="sid-DB8B9381-BC8B-4599-AE73-C0361266603A" name="Cancel Process" activiti:operation="doReject" activiti:rerunnable="true"/>
    <userTask id="sid-CA7B1921-C527-4732-999E-1A8F69222534" name="Deposit Approver" activiti:actor="DEPOSIT_APPROVER" activiti:additionalForms="Accounting" activiti:assignmentLevel="Role Queue"/>
    <endEvent id="sid-0B7D369B-9B06-4A6C-8AE8-F0B94F6F70E4" name="Rejected"/>
    <sequenceFlow id="sid-B5E3C47A-AEB9-46F9-9526-0A03CB4DE381" sourceRef="sid-DB8B9381-BC8B-4599-AE73-C0361266603A" targetRef="sid-0B7D369B-9B06-4A6C-8AE8-F0B94F6F70E4" representsUserAction="false" mandateNotes="false" captureReasons="false"/>
    <exclusiveGateway id="sid-A1F4CB2C-364F-408E-AA99-4ECE6F7ECCBD"/>
    <sequenceFlow id="sid-FBCC151B-5E17-43E8-8F67-4BCDE2137782" sourceRef="sid-CBE57D5E-89DC-4526-9CA6-D8C735E3D473" targetRef="sid-5EE432B5-33E2-4B25-9512-89E521341CA8" representsUserAction="false" mandateNotes="false" captureReasons="false"/>
    <sequenceFlow id="sid-7517638B-3A52-4AE6-BE88-BA63618DDC42" name="Resubmit" sourceRef="sid-CA7B1921-C527-4732-999E-1A8F69222534" targetRef="sid-7EAB2AF6-B3F2-456E-9DEC-E7FCCE8D5FEC" action="Resubmit" state="Resubmitted" representsUserAction="true" mandateNotes="true" captureReasons="false">
      <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Resubmitted'</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-257AEB3B-7BC0-4017-AD58-C46F23943E1B" name="Submit" sourceRef="sid-7EAB2AF6-B3F2-456E-9DEC-E7FCCE8D5FEC" targetRef="sid-CA7B1921-C527-4732-999E-1A8F69222534" action="Submit" state="Submitted" representsUserAction="true" mandateNotes="false" captureReasons="false">
      <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Submitted'</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-EC052E1D-8189-4F77-A38B-908BDC33076E" name="Other modes" sourceRef="sid-4DF6695B-7500-4E02-B430-4A553F5E7AD6" targetRef="sid-10B3C2BA-83ED-492C-8D26-78BF6B85195D" representsUserAction="false" mandateNotes="false" captureReasons="false">
      <conditionExpression xsi:type="tFormalExpression">vo.subReceiptMode != 'CHEQUE'  &amp;&amp;  vo.subReceiptMode != 'DD'</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-6D1DF25D-B51D-46A2-BB49-1196DD0D0026" name="Approve" sourceRef="sid-CA7B1921-C527-4732-999E-1A8F69222534" targetRef="sid-A1F4CB2C-364F-408E-AA99-4ECE6F7ECCBD" action="Approve" state="Approved" representsUserAction="true" mandateNotes="false" captureReasons="false">
      <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Approved'</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-17C106B5-9623-436B-97E8-BCB05BAD44B8" name="Submit" sourceRef="sid-E83823E9-0986-4566-B449-572CF86EF5EE" targetRef="sid-314AED53-E128-4D77-8975-3CA4615AF2C5" action="Submit" state="Submitted" representsUserAction="true" mandateNotes="false" captureReasons="false">
      <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Submitted'</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-18F59955-B849-4CF8-96F6-56AE063AE803" name="Resubmit" sourceRef="sid-314AED53-E128-4D77-8975-3CA4615AF2C5" targetRef="sid-E83823E9-0986-4566-B449-572CF86EF5EE" action="Resubmit" state="Resubmitted" representsUserAction="true" mandateNotes="true" captureReasons="false">
      <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Resubmitted'</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-A42E70F0-C3E2-4E9C-B69F-D5932974D70E" name="Approve" sourceRef="sid-10B3C2BA-83ED-492C-8D26-78BF6B85195D" targetRef="sid-CBE57D5E-89DC-4526-9CA6-D8C735E3D473" action="Approve" state="Approved" representsUserAction="true" mandateNotes="false" captureReasons="false">
      <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Approved'</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-D76336E8-99A8-406F-B42F-C322488B0B5A" name="Approve" sourceRef="sid-314AED53-E128-4D77-8975-3CA4615AF2C5" targetRef="sid-CBE57D5E-89DC-4526-9CA6-D8C735E3D473" action="Approve" state="Approved" representsUserAction="true" mandateNotes="false" captureReasons="false">
      <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Approved'</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-E620DB3E-1677-477B-B449-3FAC0BBB471F" name="Partial payment/Early settlement" sourceRef="sid-A1F4CB2C-364F-408E-AA99-4ECE6F7ECCBD" targetRef="sid-E83823E9-0986-4566-B449-572CF86EF5EE" representsUserAction="false" mandateNotes="false" captureReasons="false">
      <conditionExpression xsi:type="tFormalExpression">vo.receiptPurpose != 'SchdlRepayment'</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-14001BB8-43FF-4417-89A3-95E88790991C" name="Schedule payment alone" sourceRef="sid-A1F4CB2C-364F-408E-AA99-4ECE6F7ECCBD" targetRef="sid-CBE57D5E-89DC-4526-9CA6-D8C735E3D473" representsUserAction="false" mandateNotes="false" captureReasons="false">
      <conditionExpression xsi:type="tFormalExpression">vo.receiptPurpose == 'SchdlRepayment'</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-FC80C4F5-581B-4B14-8151-850B2652B03C" name="Reject" sourceRef="sid-CA7B1921-C527-4732-999E-1A8F69222534" targetRef="sid-DB8B9381-BC8B-4599-AE73-C0361266603A" action="Reject" state="Rejected" representsUserAction="true" mandateNotes="false" captureReasons="false">
      <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Rejected'</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-D774F854-DCDD-4E0A-AE2E-EECB42D177C9" name="Cheque/DD" sourceRef="sid-4DF6695B-7500-4E02-B430-4A553F5E7AD6" targetRef="sid-7EAB2AF6-B3F2-456E-9DEC-E7FCCE8D5FEC" representsUserAction="false" mandateNotes="false" captureReasons="false">
      <conditionExpression xsi:type="tFormalExpression">vo.subReceiptMode == 'CHEQUE' || vo.subReceiptMode == 'DD'</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-B91C3E62-EE30-4F26-A46F-26F2F8726159" name="Reject" sourceRef="sid-7EAB2AF6-B3F2-456E-9DEC-E7FCCE8D5FEC" targetRef="sid-DB8B9381-BC8B-4599-AE73-C0361266603A" action="Reject" state="Rejected" representsUserAction="true" mandateNotes="true" captureReasons="false">
      <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Rejected'</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-6652E848-0D47-40C0-BFBD-68C5DDED6E08" name="Cancel" sourceRef="sid-51EFE826-FBE9-4040-A4B3-837208EFEB73" targetRef="sid-DB8B9381-BC8B-4599-AE73-C0361266603A" action="Cancel" state="Cancelled" representsUserAction="true" mandateNotes="true" captureReasons="false">
      <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Cancelled'</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-B30A8621-A48F-49F1-8FFD-BE599F77CD04" name="Submit" sourceRef="sid-51EFE826-FBE9-4040-A4B3-837208EFEB73" targetRef="sid-4DF6695B-7500-4E02-B430-4A553F5E7AD6" action="Submit" state="Submitted" representsUserAction="true" mandateNotes="false" captureReasons="false">
      <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Submitted'</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-B83F1511-0789-4A1D-B258-A0941E599880" name="Resubmit" sourceRef="sid-10B3C2BA-83ED-492C-8D26-78BF6B85195D" targetRef="sid-51EFE826-FBE9-4040-A4B3-837208EFEB73" action="Resubmit" state="Resubmitted" representsUserAction="true" mandateNotes="true" captureReasons="false">
      <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Resubmitted'</conditionExpression>
    </sequenceFlow>
  </process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_RECEIPTS_WORKFLOW">
    <bpmndi:BPMNPlane bpmnElement="RECEIPTS_WORKFLOW" id="BPMNPlane_RECEIPTS_WORKFLOW">
      <bpmndi:BPMNShape bpmnElement="startEvent1" id="BPMNShape_startEvent1">
        <omgdc:Bounds height="30.0" width="30.0" x="76.20788956733566" y="272.4897220820909"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-51EFE826-FBE9-4040-A4B3-837208EFEB73" id="BPMNShape_sid-51EFE826-FBE9-4040-A4B3-837208EFEB73">
        <omgdc:Bounds height="79.99999999999997" width="100.0" x="175.0" y="247.48972208209088"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-7EAB2AF6-B3F2-456E-9DEC-E7FCCE8D5FEC" id="BPMNShape_sid-7EAB2AF6-B3F2-456E-9DEC-E7FCCE8D5FEC">
        <omgdc:Bounds height="80.0" width="99.99999999999983" x="493.8271792284756" y="61.72839740355943"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-4DF6695B-7500-4E02-B430-4A553F5E7AD6" id="BPMNShape_sid-4DF6695B-7500-4E02-B430-4A553F5E7AD6">
        <omgdc:Bounds height="40.0" width="40.0" x="338.6419870177972" y="267.4897220820909"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-10B3C2BA-83ED-492C-8D26-78BF6B85195D" id="BPMNShape_sid-10B3C2BA-83ED-492C-8D26-78BF6B85195D">
        <omgdc:Bounds height="80.0" width="100.0" x="308.6419870177972" y="370.3703844213566"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-E83823E9-0986-4566-B449-572CF86EF5EE" id="BPMNShape_sid-E83823E9-0986-4566-B449-572CF86EF5EE">
        <omgdc:Bounds height="80.0" width="100.0" x="937.357060601777" y="61.728397403559434"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-314AED53-E128-4D77-8975-3CA4615AF2C5" id="BPMNShape_sid-314AED53-E128-4D77-8975-3CA4615AF2C5">
        <omgdc:Bounds height="80.0" width="100.0" x="937.357060601777" y="228.6236733175066"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-CBE57D5E-89DC-4526-9CA6-D8C735E3D473" id="BPMNShape_sid-CBE57D5E-89DC-4526-9CA6-D8C735E3D473">
        <omgdc:Bounds height="80.00000000000006" width="100.00000000000011" x="638.0572963364808" y="370.3703844213566"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-5EE432B5-33E2-4B25-9512-89E521341CA8" id="BPMNShape_sid-5EE432B5-33E2-4B25-9512-89E521341CA8">
        <omgdc:Bounds height="28.0" width="28.0" x="674.0572963364809" y="480.1097139667638"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-DB8B9381-BC8B-4599-AE73-C0361266603A" id="BPMNShape_sid-DB8B9381-BC8B-4599-AE73-C0361266603A">
        <omgdc:Bounds height="79.99999999999993" width="99.99999999999997" x="246.91358961423774" y="102.88066233926573"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-CA7B1921-C527-4732-999E-1A8F69222534" id="BPMNShape_sid-CA7B1921-C527-4732-999E-1A8F69222534">
        <omgdc:Bounds height="80.00000000000003" width="99.99999999999994" x="493.8271792284755" y="226.3374571463846"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-0B7D369B-9B06-4A6C-8AE8-F0B94F6F70E4" id="BPMNShape_sid-0B7D369B-9B06-4A6C-8AE8-F0B94F6F70E4">
        <omgdc:Bounds height="28.0" width="28.0" x="282.9135896142377" y="205.76132467853145"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-A1F4CB2C-364F-408E-AA99-4ECE6F7ECCBD" id="BPMNShape_sid-A1F4CB2C-364F-408E-AA99-4ECE6F7ECCBD">
        <omgdc:Bounds height="40.0" width="40.0" x="668.0572963364809" y="81.72839740355943"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge bpmnElement="sid-FC80C4F5-581B-4B14-8151-850B2652B03C" id="BPMNEdge_sid-FC80C4F5-581B-4B14-8151-850B2652B03C">
        <omgdi:waypoint x="493.8271792284755" y="271.6049455825679"/>
        <omgdi:waypoint x="411.17973631644753" y="271.6049455825679"/>
        <omgdi:waypoint x="411.17973631644753" y="148.60539859260717"/>
        <omgdi:waypoint x="346.9135896142377" y="148.60539859260717"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-FBCC151B-5E17-43E8-8F67-4BCDE2137782" id="BPMNEdge_sid-FBCC151B-5E17-43E8-8F67-4BCDE2137782">
        <omgdi:waypoint x="688.0572963364809" y="450.3703844213567"/>
        <omgdi:waypoint x="688.0572963364809" y="480.1097139667638"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-D76336E8-99A8-406F-B42F-C322488B0B5A" id="BPMNEdge_sid-D76336E8-99A8-406F-B42F-C322488B0B5A">
        <omgdi:waypoint x="987.357060601777" y="308.6236733175066"/>
        <omgdi:waypoint x="987.357060601777" y="405.42599016407974"/>
        <omgdi:waypoint x="738.0572963364809" y="405.42599016407974"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-B30A8621-A48F-49F1-8FFD-BE599F77CD04" id="BPMNEdge_sid-B30A8621-A48F-49F1-8FFD-BE599F77CD04">
        <omgdi:waypoint x="275.0" y="287.4897220820909"/>
        <omgdi:waypoint x="338.6419870177972" y="287.4897220820909"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-7517638B-3A52-4AE6-BE88-BA63618DDC42" id="BPMNEdge_sid-7517638B-3A52-4AE6-BE88-BA63618DDC42">
        <omgdi:waypoint x="569.5075624315751" y="226.3374571463846"/>
        <omgdi:waypoint x="569.5075624315751" y="141.72839740355943"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-E620DB3E-1677-477B-B449-3FAC0BBB471F" id="BPMNEdge_sid-E620DB3E-1677-477B-B449-3FAC0BBB471F">
        <omgdi:waypoint x="707.5891434954065" y="102.19655024463391"/>
        <omgdi:waypoint x="937.357060601777" y="101.81206547492312"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-D774F854-DCDD-4E0A-AE2E-EECB42D177C9" id="BPMNEdge_sid-D774F854-DCDD-4E0A-AE2E-EECB42D177C9">
        <omgdi:waypoint x="359.1419870177972" y="267.9897220820909"/>
        <omgdi:waypoint x="359.1419870177972" y="204.60905974282517"/>
        <omgdi:waypoint x="464.67767333984375" y="204.6090597428252"/>
        <omgdi:waypoint x="464.67767333984375" y="130.3155059814453"/>
        <omgdi:waypoint x="493.8271792284756" y="130.3155059814453"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-B83F1511-0789-4A1D-B258-A0941E599880" id="BPMNEdge_sid-B83F1511-0789-4A1D-B258-A0941E599880">
        <omgdi:waypoint x="308.6419870177972" y="406.6625891171839"/>
        <omgdi:waypoint x="220.5075460592727" y="406.6625891171839"/>
        <omgdi:waypoint x="220.5075460592727" y="327.48972208209085"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-257AEB3B-7BC0-4017-AD58-C46F23943E1B" id="BPMNEdge_sid-257AEB3B-7BC0-4017-AD58-C46F23943E1B">
        <omgdi:waypoint x="526.4060472828006" y="141.72839740355943"/>
        <omgdi:waypoint x="526.4060472828005" y="226.3374571463846"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-B5E3C47A-AEB9-46F9-9526-0A03CB4DE381" id="BPMNEdge_sid-B5E3C47A-AEB9-46F9-9526-0A03CB4DE381">
        <omgdi:waypoint x="296.9135896142377" y="182.88066233926565"/>
        <omgdi:waypoint x="296.9135896142377" y="205.76132467853145"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-17C106B5-9623-436B-97E8-BCB05BAD44B8" id="BPMNEdge_sid-17C106B5-9623-436B-97E8-BCB05BAD44B8">
        <omgdi:waypoint x="962.357060601777" y="141.72839740355943"/>
        <omgdi:waypoint x="962.357060601777" y="228.6236733175066"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-A42E70F0-C3E2-4E9C-B69F-D5932974D70E" id="BPMNEdge_sid-A42E70F0-C3E2-4E9C-B69F-D5932974D70E">
        <omgdi:waypoint x="408.6419870177972" y="410.3703844213566"/>
        <omgdi:waypoint x="638.0572963364808" y="410.3703844213567"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-EC052E1D-8189-4F77-A38B-908BDC33076E" id="BPMNEdge_sid-EC052E1D-8189-4F77-A38B-908BDC33076E">
        <omgdi:waypoint x="359.06404192119476" y="307.06766717869334"/>
        <omgdi:waypoint x="358.80541152962536" y="370.3703844213566"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-18F59955-B849-4CF8-96F6-56AE063AE803" id="BPMNEdge_sid-18F59955-B849-4CF8-96F6-56AE063AE803">
        <omgdi:waypoint x="1007.9610920833444" y="228.6236733175066"/>
        <omgdi:waypoint x="1007.9610920833444" y="141.72839740355943"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-14001BB8-43FF-4417-89A3-95E88790991C" id="BPMNEdge_sid-14001BB8-43FF-4417-89A3-95E88790991C">
        <omgdi:waypoint x="688.5572963364809" y="121.22839740355943"/>
        <omgdi:waypoint x="688.5572963364809" y="370.3703844213566"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-6652E848-0D47-40C0-BFBD-68C5DDED6E08" id="BPMNEdge_sid-6652E848-0D47-40C0-BFBD-68C5DDED6E08">
        <omgdi:waypoint x="253.07903248050212" y="247.48972208209088"/>
        <omgdi:waypoint x="253.07903248050212" y="182.88066233926565"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-AE7C2E09-B0E6-4DCA-92F0-89C71A468A49" id="BPMNEdge_sid-AE7C2E09-B0E6-4DCA-92F0-89C71A468A49">
        <omgdi:waypoint x="106.20788956733566" y="287.4897220820909"/>
        <omgdi:waypoint x="175.0" y="287.48972208209085"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-B91C3E62-EE30-4F26-A46F-26F2F8726159" id="BPMNEdge_sid-B91C3E62-EE30-4F26-A46F-26F2F8726159">
        <omgdi:waypoint x="493.8271792284756" y="112.48285636460488"/>
        <omgdi:waypoint x="346.9135896142377" y="112.48285636460488"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-6D1DF25D-B51D-46A2-BB49-1196DD0D0026" id="BPMNEdge_sid-6D1DF25D-B51D-46A2-BB49-1196DD0D0026">
        <omgdi:waypoint x="593.8271792284754" y="266.3374571463846"/>
        <omgdi:waypoint x="630.9422377824782" y="266.3374571463846"/>
        <omgdi:waypoint x="630.9422377824782" y="102.22839740355943"/>
        <omgdi:waypoint x="668.5572963364809" y="102.22839740355943"/>
      </bpmndi:BPMNEdge>
      </bpmndi:BPMNPlane>
      </bpmndi:BPMNDiagram>
      </definitions>]]></column>
			<where>workflowtype='RECEIPTS_WORKFLOW' and workflowactive=1
			</where>
		</update>
	</changeSet>

	<changeSet id="14" author="bharat">
		<addColumn tableName="FINREPAYHEADER">
			<column name="ExcessAmount" type="decimal(18,0)" />
		</addColumn>
		<addColumn tableName="FINREPAYHEADER_TEMP">
			<column name="ExcessAmount" type="decimal(18,0)" />
		</addColumn>
	</changeSet>

	<changeSet id="14.1_Pre" author="satyanarayana.g">
		<sql>
			<![CDATA[
				UPDATE FINREPAYHEADER set EXCESSAMOUNT =0 where EXCESSAMOUNT is null;
				UPDATE FINREPAYHEADER_TEMP set EXCESSAMOUNT =0 where EXCESSAMOUNT is null;
			]]>
		</sql>
	</changeSet>

	<changeSet id="14.1" author="satyanarayana.g" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE FINREPAYHEADER ADD CONSTRAINT DF_FINREPAYHEADER_EXCESSAMOUNT DEFAULT 0 FOR EXCESSAMOUNT;
				ALTER TABLE FINREPAYHEADER_TEMP ADD CONSTRAINT DF_FINREPAYHEADER_TEMP_EXCESSAMOUNT DEFAULT 0 FOR EXCESSAMOUNT;
			]]>
		</sql>
	</changeSet>

	<changeSet id="14.1" author="satyanarayana.g" dbms="postgresql, oracle">
		<addDefaultValue columnName="EXCESSAMOUNT" tableName="FINREPAYHEADER" defaultValue="0" />
		<addDefaultValue columnName="EXCESSAMOUNT" tableName="FINREPAYHEADER_TEMP" defaultValue="0" />
	</changeSet>

	<changeSet id="14.2" author="satyanarayana.g">
		<addNotNullConstraint tableName="FINREPAYHEADER" columnName="EXCESSAMOUNT" columnDataType="decimal(18,0)" />
		<addNotNullConstraint tableName="FINREPAYHEADER_TEMP" columnName="EXCESSAMOUNT" columnDataType="decimal(18,0)" />
	</changeSet>

	<changeSet id="15" author="Vidhya">
		<sql>
	     	<![CDATA[
				DELETE FROM SECROLEGROUPS WHERE RoleID IN (Select  RoleID  From SecRoles Where RoleCd='REALIZATION_MAKER') AND GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='FIN_RECEIPTREALIZE_MAKER');
				DELETE FROM SECROLEGROUPS WHERE RoleID IN (Select  RoleID  From SecRoles Where RoleCd='REALIZATION_APPROVER') AND GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='FIN_RECEIPTREALIZE_APPROVER');
				
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FIN_RECEIPTREALIZE_MAKER') AND RIGHTID IN (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME ='button_ReceiptDialog_btnReceipt');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FIN_RECEIPTREALIZE_MAKER') AND RIGHTID IN (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME ='ReceiptDialog_cancelRemarks');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FIN_RECEIPTREALIZE_MAKER') AND RIGHTID IN (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME ='ReceiptDialog_cancelReason');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FIN_RECEIPTREALIZE_MAKER') AND RIGHTID IN (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME ='ReceiptDialog_bounceDate');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FIN_RECEIPTREALIZE_MAKER') AND RIGHTID IN (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME ='ReceiptDialog_bounceRemarks');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FIN_RECEIPTREALIZE_MAKER') AND RIGHTID IN (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME ='ReceiptDialog_bounceCharge');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FIN_RECEIPTREALIZE_MAKER') AND RIGHTID IN (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME ='ReceiptDialog_bounceCode');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FIN_RECEIPTREALIZE_MAKER') AND RIGHTID IN (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME ='ReceiptDialog_realizationDate');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FIN_RECEIPTREALIZE_MAKER') AND RIGHTID IN (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME ='menuItem_Receipts_RealizationMaker');
				
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FIN_RECEIPTREALIZE_APPROVER') AND RIGHTID IN (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME ='menuItem_Receipts_RealizationApprover');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FIN_RECEIPTREALIZE_APPROVER') AND RIGHTID IN (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME ='button_ReceiptDialog_btnReceipt');
				
				DELETE FROM SECROLEGROUPS WHERE RoleID IN (Select  RoleID  From SecRoles Where RoleCd='REALIZATION_MAKER') AND GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='REALIZATION_MAKER');
	   	        DELETE FROM SECROLEGROUPS WHERE RoleID IN (Select  RoleID  From SecRoles Where RoleCd='REALIZATION_APPROVER') AND GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='REALIZATION_APPROVER');
	   	        
	   	        DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'REALIZATION_MAKER') AND RIGHTID IN (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME ='button_ReceiptDialog_btnReceipt');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'REALIZATION_MAKER') AND RIGHTID IN (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME ='ReceiptDialog_cancelRemarks');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'REALIZATION_MAKER') AND RIGHTID IN (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME ='ReceiptDialog_cancelReason');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'REALIZATION_MAKER') AND RIGHTID IN (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME ='ReceiptDialog_bounceDate');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'REALIZATION_MAKER') AND RIGHTID IN (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME ='ReceiptDialog_bounceRemarks');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'REALIZATION_MAKER') AND RIGHTID IN (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME ='ReceiptDialog_bounceCharge');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'REALIZATION_MAKER') AND RIGHTID IN (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME ='ReceiptDialog_bounceCode');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'REALIZATION_MAKER') AND RIGHTID IN (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME ='ReceiptDialog_realizationDate');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'REALIZATION_MAKER') AND RIGHTID IN (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME ='menuItem_Receipts_RealizationMaker');
				
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'REALIZATION_APPROVER') AND RIGHTID IN (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME ='menuItem_Receipts_RealizationApprover');
	            DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'REALIZATION_APPROVER') AND RIGHTID IN (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME ='button_ReceiptDialog_btnReceipt');
	            
	            --DELETE FROM SECGROUPS WHERE GRPCODE='FIN_RECEIPTREALIZE_MAKER'; 
	   	        --DELETE FROM SECGROUPS WHERE GRPCODE='FIN_RECEIPTREALIZE_APPROVER';
   	       	]]>
		</sql>
	</changeSet>

	<changeSet id="15.1" author="Vidhya">
		<sql>
			<![CDATA[
				UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS_VIEW);
				UPDATE SEQSECGROUPS SET SEQNO= (SELECT MAX(GRPID) FROM SECGROUPS_VIEW);
				UPDATE SEQSECROLES SET SEQNO= (SELECT MAX(ROLEID) FROM SECROLES_VIEW);
				UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS_VIEW); 
				UPDATE SEQSECROLEGROUPS SET SEQNO= (SELECT MAX(ROLEGRPID) FROM SECROLEGROUPS_VIEW);
				
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='REALIZATION_APPROVER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='menuItem_Receipts_RealizationApprover'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='REALIZATION_APPROVER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_ReceiptDialog_btnReceipt'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='REALIZATION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='menuItem_Receipts_RealizationMaker'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='REALIZATION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_realizationDate'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='REALIZATION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_bounceCode'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='REALIZATION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_bounceCharge'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='REALIZATION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_bounceRemarks'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='REALIZATION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_bounceDate'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='REALIZATION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_cancelReason'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='REALIZATION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_cancelRemarks'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='REALIZATION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_ReceiptDialog_btnReceipt'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				
				INSERT INTO SecRoleGroups values((Select MAX(RoleGrpID)+1 From SecRoleGroups),(Select GrpId  From SecGroups Where GrpCode='REALIZATION_MAKER'), (Select  RoleID  From SecRoles Where RoleCd='REALIZATION_MAKER'),0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0); 
				INSERT INTO SecRoleGroups values((Select MAX(RoleGrpID)+1 From SecRoleGroups),(Select GrpId  From SecGroups Where GrpCode='REALIZATION_APPROVER'), (Select  RoleID  From SecRoles Where RoleCd='REALIZATION_APPROVER'),0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				  	
				UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS_VIEW);
				UPDATE SEQSECGROUPS SET SEQNO= (SELECT MAX(GRPID) FROM SECGROUPS_VIEW);
				UPDATE SEQSECROLES SET SEQNO= (SELECT MAX(ROLEID) FROM SECROLES_VIEW);
				UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS_VIEW); 
				UPDATE SEQSECROLEGROUPS SET SEQNO= (SELECT MAX(ROLEGRPID) FROM SECROLEGROUPS_VIEW);
			]]>
		</sql>
	</changeSet>

	<changeSet id="16" author="Bharat">
		<createView viewName="RECEIPT_REALIZATION_VIEW" replaceIfExists="true">
		 	SELECT T4.CUSTCIF,
			  T1.REFERENCE,
			  T3.FINTYPE,
			  T1.RECEIPTID,
			  T1.RECEIPTDATE,
			  T1.RECEIPTAMOUNT,
			  T2.DEPOSITDATE,
			  T2.BANKCODE DEPOSITBANK ,
			  (
			  CASE
			    WHEN T1.RECEIPTPURPOSE IN ('EarlyPayment')
			    THEN 'Partial Payment'
			    ELSE T1.RECEIPTPURPOSE
			  END) RECEIPTPURPOSE,
			  T1.RECEIPTMODE,
			  T1.BOUNCEDATE CANCELDATE,
			  T2.VALUEDATE,
			  T2.PAYAGAINSTID,
			  T1.BOUNCEDATE,
			  T1.REALIZATIONDATE,
			  T1.CANCELREASON,
			  T3.CLOSINGSTATUS,
			  T3.FINBRANCH,
			  T3.FINCURRASSETVALUE,
			  T3.PRODUCTCATEGORY,
			  T6.PARTNERBANKCODE,
			  T2.TRANSACTIONREF,
			  T2.FUNDINGAC,
			  T1.VERSION ,
			  T1.LASTMNTBY,
			  T1.LASTMNTON,
			  T1.RECORDSTATUS,
			  T1.ROLECODE,
			  T1.NEXTROLECODE,
			  T1.TASKID,
			  T1.NEXTTASKID,
			  T1.RECORDTYPE,
			  T1.WORKFLOWID,
			  T5.ROLEDESC LOVDESCREQUESTSTAGE,
			  T2.PAYMENTTYPE,
			  T1.RECEIPTMODESTATUS
			FROM FINRECEIPTHEADER_TEMP T1
			LEFT JOIN FINRECEIPTDETAIL_TEMP T2 ON T1.RECEIPTID = T2.RECEIPTID
			LEFT JOIN FINANCEMAIN T3 ON T1.REFERENCE = T3.FINREFERENCE
			LEFT JOIN CUSTOMERS T4 ON T3.CUSTID = T4.CUSTID
			LEFT JOIN SECROLES T5 ON T1.NEXTROLECODE = T5.ROLECD
			LEFT JOIN PARTNERBANKS T6 ON T6.PARTNERBANKID = T2.FUNDINGAC
			UNION ALL
			SELECT T4.CUSTCIF,
			  T1.REFERENCE,
			  T3.FINTYPE,
			  T1.RECEIPTID,
			  T1.RECEIPTDATE,
			  T1.RECEIPTAMOUNT,
			  T2.DEPOSITDATE,
			  T2.BANKCODE DEPOSITBANK ,
			  (
			  CASE
			    WHEN T1.RECEIPTPURPOSE IN ('EarlyPayment')
			    THEN 'Partial Payment'
			    ELSE T1.RECEIPTPURPOSE
			  END) RECEIPTPURPOSE,
			  T1.RECEIPTMODE,
			  T1.BOUNCEDATE CANCELDATE,
			  T2.VALUEDATE,
			  T2.PAYAGAINSTID,
			  T1.BOUNCEDATE,
			  T1.REALIZATIONDATE,
			  T1.CANCELREASON,
			  T3.CLOSINGSTATUS,
			  T3.FINBRANCH,
			  T3.FINCURRASSETVALUE,
			  T3.PRODUCTCATEGORY,
			  T6.PARTNERBANKCODE,
			  T2.TRANSACTIONREF,
			  T2.FUNDINGAC,
			  T1.VERSION ,
			  T1.LASTMNTBY,
			  T1.LASTMNTON,
			  T1.RECORDSTATUS,
			  T1.ROLECODE,
			  T1.NEXTROLECODE,
			  T1.TASKID,
			  T1.NEXTTASKID,
			  T1.RECORDTYPE,
			  T1.WORKFLOWID,
			  T5.ROLEDESC LOVDESCREQUESTSTAGE,
			  T2.PAYMENTTYPE,
			  T1.RECEIPTMODESTATUS
			FROM FINRECEIPTHEADER T1
			LEFT JOIN FINRECEIPTDETAIL T2 ON T1.RECEIPTID = T2.RECEIPTID
			LEFT JOIN FINANCEMAIN T3 ON T1.REFERENCE = T3.FINREFERENCE
			LEFT JOIN CUSTOMERS T4 ON T3.CUSTID = T4.CUSTID
			LEFT JOIN SECROLES T5 ON T1.NEXTROLECODE = T5.ROLECD
			LEFT JOIN PARTNERBANKS T6 ON T6.PARTNERBANKID = T2.FUNDINGAC
			WHERE NOT EXISTS
			  (SELECT 1 FROM FINRECEIPTHEADER_TEMP WHERE RECEIPTID = T1.RECEIPTID
			  )
         </createView>
	</changeSet>

	<changeSet id="17" author="somasekhar">
		<addColumn tableName="RECEIPTUPLOADDETAILS">
			<column name="EXTREFERENCE" type="varchar(20)" />
			<column name="SUBRECEIPTMODE" type="varchar(20)" />
			<column name="RECEIPTCHANNEL" type="varchar(20)" />
			<column name="RECEIVEDFROM" type="varchar(20)" />
			<column name="PANNUMBER" type="varchar(20)" />
			<column name="COLLECTIONAGENTID" type="bigint" />
		</addColumn>
	</changeSet>

	<changeSet id="18" author="Vidhya">
		<sql>
	     	<![CDATA[
	      	   DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FIN_RECEIPT_MAKER') AND RIGHTID IN(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_receivedFrom');
	     	   DELETE FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_receivedFrom';
	      	]]>
		</sql>
	</changeSet>

	<changeSet id="19" author="Vidhya">
		<sql>
	     	<![CDATA[
	     		UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS_VIEW);
				UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS_VIEW);
			 
	     	  	INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'ReceiptDialog_receivedFrom','ReceiptDialog',0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0 FROM SEQSECRIGHTS WHERE 0=0;
         	  	INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_receivedFrom'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
         	  
         	  	UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS_VIEW);
				UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS_VIEW);
	     	]]>
		</sql>
	</changeSet>

	<changeSet id="20" author="Vidhya">
		<createView viewName="RECEIPTDETAILS_TVIEW" replaceIfExists="true">
		 	SELECT T4.CUSTCIF,
			  T1.REFERENCE,
			  T3.FINTYPE,
			  T1.RECEIPTID,
			  T1.RECEIPTDATE,
			  T1.RECEIPTAMOUNT,
			  T2.DEPOSITDATE,
			  T2.BANKCODE DEPOSITBANK ,
			  (
			  CASE
			    WHEN T1.RECEIPTPURPOSE IN ('EarlyPayment')
			    THEN 'Partial Payment'
			    ELSE T1.RECEIPTPURPOSE
			  END) RECEIPTPURPOSE ,
			  T1.RECEIPTMODE,
			  T1.BOUNCEDATE CANCELDATE,
			  T2.VALUEDATE,
			  T2.PAYAGAINSTID,
			  T1.BOUNCEDATE,
			  T1.REALIZATIONDATE,
			  T1.CANCELREASON,
			  T3.CLOSINGSTATUS,
			  T3.FINBRANCH,
			  T3.FINCURRASSETVALUE,
			  T3.PRODUCTCATEGORY,
			  T6.PARTNERBANKCODE,
			  T2.TRANSACTIONREF,
			  T2.FUNDINGAC,
			  T1.VERSION ,
			  T1.LASTMNTBY,
			  T1.LASTMNTON,
			  T1.RECORDSTATUS,
			  T1.ROLECODE,
			  T1.NEXTROLECODE,
			  T1.TASKID,
			  T1.NEXTTASKID,
			  T1.RECORDTYPE,
			  T1.WORKFLOWID,
			  T5.ROLEDESC LOVDESCREQUESTSTAGE,
			  T2.PAYMENTTYPE,
			  T1.RECEIPTMODESTATUS
			FROM FINRECEIPTHEADER_TEMP T1
			LEFT JOIN FINRECEIPTDETAIL_TEMP T2 ON T1.RECEIPTID = T2.RECEIPTID
			LEFT JOIN FINANCEMAIN T3 ON T1.REFERENCE = T3.FINREFERENCE
			LEFT JOIN CUSTOMERS T4 ON T3.CUSTID = T4.CUSTID
			INNER JOIN SECROLES T5 ON T1.NEXTROLECODE = T5.ROLECD
			LEFT JOIN PARTNERBANKS T6 ON T6.PARTNERBANKID = T2.FUNDINGAC
		 </createView>
	</changeSet>

	<changeSet id="21" author="Bharat">
		<sql>
		 	<![CDATA[
				DELETE FROM SMTPARAMETERS WHERE SYSPARMCODE='TDS_ROUNDINGMODE';
				DELETE FROM SMTPARAMETERS WHERE SYSPARMCODE='EARLYSETTLE_CHQ_CLR_DAYS';
				DELETE FROM SMTPARAMETERS WHERE SYSPARMCODE='EARLYSETTLE_CHQ_DFT_DAYS';
				DELETE FROM ERRORDETAILS WHERE CODE ='91000';
				
				INSERT INTO SMTPARAMETERS VALUES ('TDS_ROUNDINGMODE','TDS Rounding Mode','String',1,'HALF_DOWN',8,0,NULL,NULL,'TDS Rounding Mode',1,1000,CURRENT_TIMESTAMP,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SMTPARAMETERS VALUES ('EARLYSETTLE_CHQ_CLR_DAYS','Early Settelement Cheque Clearance Allowed Days','int',1,'10',2,0,NULL,NULL,'Early Settelement Cheque Clearance Allowed Days',1,1000, CURRENT_TIMESTAMP,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SMTPARAMETERS VALUES ('EARLYSETTLE_CHQ_DFT_DAYS','Early Settelement Cheque Default Clearance Allowed Days','int',1,'3',2,0,NULL,NULL,'Early Settelement Cheque Default Clearance Allowed Days',1,1000, CURRENT_TIMESTAMP,'Approved',NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO ERRORDETAILS VALUES ('91000', 'EN', 'E', 'Value Date cannot be more than max allowed cheque clearing days {0}',NULL, 'Approved', NULL, NULL, NULL, NULL, NULL, 0, CURRENT_TIMESTAMP, 1000,0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="22" author="Bharat">
		<createView viewName="FINRECEIPTDETAIL_VIEW" replaceIfExists="true">
			SELECT T4.CUSTCIF,
			  T1.REFERENCE,
			  T3.FINTYPE,
			  T1.RECEIPTID,
			  T1.RECEIPTDATE,
			  T1.RECEIPTAMOUNT,
			  T2.DEPOSITDATE,
			  T2.BANKCODE ,
			  (
			  CASE
			    WHEN T1.RECEIPTPURPOSE IN ('EarlyPayment')
			    THEN 'Partial Payment'
			    ELSE T1.RECEIPTPURPOSE
			  END) RECEIPTPURPOSE,
			  T1.RECEIPTMODE,
			  T1.BOUNCEDATE CANCELDATE,
			  T2.VALUEDATE,
			  T2.PAYAGAINSTID,
			  T1.BOUNCEDATE,
			  T1.REALIZATIONDATE,
			  T1.CANCELREASON,
			  T3.CLOSINGSTATUS,
			  T3.FINBRANCH,
			  T3.FINCURRASSETVALUE,
			  T3.PRODUCTCATEGORY,
			  T6.PARTNERBANKCODE,
			  T2.TRANSACTIONREF,
			  T2.FUNDINGAC,
			  T1.VERSION ,
			  T1.LASTMNTBY,
			  T1.LASTMNTON,
			  T1.RECORDSTATUS,
			  T1.ROLECODE,
			  T1.NEXTROLECODE,
			  T1.TASKID,
			  T1.NEXTTASKID,
			  T1.RECORDTYPE,
			  T1.WORKFLOWID,
			  T5.ROLEDESC LOVDESCREQUESTSTAGE,
			  T2.PAYMENTTYPE,
			  T6.ACTYPE PARTNERBANKACTYPE,
			  T6.ACCOUNTNO PARTNERBANKAC,
			  T7.BANKNAME BANKCODEDESC,
			  T6.PARTNERBANKNAME FUNDINGACDESC,
			  T6.PARTNERBANKCODE FUNDINGACCODE,
			  T2.LOGKEY,
			  T2.PAYORDER,
			  T2.STATUS,
			  T2.RECEIVEDDATE,
			  T2.CHEQUEACNO,
			  T2.PAYMENTREF,
			  T2.DEPOSITNO,
			  T2.FAVOURNAME,
			  T2.FAVOURNUMBER,
			  T2.AMOUNT,
			  T2.PAYMENTTO,
			  T2.RECEIPTTYPE,
			  T2.RECEIPTSEQID
			FROM FINRECEIPTHEADER_TEMP T1
			LEFT JOIN FINRECEIPTDETAIL_TEMP T2 ON T1.RECEIPTID = T2.RECEIPTID
			LEFT JOIN FINANCEMAIN T3 ON T1.REFERENCE = T3.FINREFERENCE
			LEFT JOIN CUSTOMERS T4 ON T3.CUSTID = T4.CUSTID
			LEFT JOIN SECROLES T5 ON T1.NEXTROLECODE = T5.ROLECD
			LEFT JOIN PARTNERBANKS T6 ON T6.PARTNERBANKID = T2.FUNDINGAC
			LEFT JOIN BMTBANKDETAIL T7 ON T2.BANKCODE = T7.BANKCODE
			UNION ALL
			SELECT T4.CUSTCIF,
			  T1.REFERENCE,
			  T3.FINTYPE,
			  T1.RECEIPTID,
			  T1.RECEIPTDATE,
			  T1.RECEIPTAMOUNT,
			  T2.DEPOSITDATE,
			  T2.BANKCODE ,
			  (
			  CASE
			    WHEN T1.RECEIPTPURPOSE IN ('EarlyPayment')
			    THEN 'Partial Payment'
			    ELSE T1.RECEIPTPURPOSE
			  END) RECEIPTPURPOSE,
			  T1.RECEIPTMODE,
			  T1.BOUNCEDATE CANCELDATE,
			  T2.VALUEDATE,
			  T2.PAYAGAINSTID,
			  T1.BOUNCEDATE,
			  T1.REALIZATIONDATE,
			  T1.CANCELREASON,
			  T3.CLOSINGSTATUS,
			  T3.FINBRANCH,
			  T3.FINCURRASSETVALUE,
			  T3.PRODUCTCATEGORY,
			  T6.PARTNERBANKCODE,
			  T2.TRANSACTIONREF,
			  T2.FUNDINGAC,
			  T1.VERSION ,
			  T1.LASTMNTBY,
			  T1.LASTMNTON,
			  T1.RECORDSTATUS,
			  T1.ROLECODE,
			  T1.NEXTROLECODE,
			  T1.TASKID,
			  T1.NEXTTASKID,
			  T1.RECORDTYPE,
			  T1.WORKFLOWID,
			  T5.ROLEDESC LOVDESCREQUESTSTAGE,
			  T2.PAYMENTTYPE,
			  T6.ACTYPE PARTNERBANKACTYPE,
			  T6.ACCOUNTNO PARTNERBANKAC,
			  T7.BANKNAME BANKCODEDESC,
			  T6.PARTNERBANKNAME FUNDINGACDESC,
			  T6.PARTNERBANKCODE FUNDINGACCODE,
			  T2.LOGKEY,
			  T2.PAYORDER,
			  T2.STATUS,
			  T2.RECEIVEDDATE,
			  T2.CHEQUEACNO,
			  T2.PAYMENTREF,
			  T2.DEPOSITNO,
			  T2.FAVOURNAME,
			  T2.FAVOURNUMBER,
			  T2.AMOUNT,
			  T2.PAYMENTTO,
			  T2.RECEIPTTYPE,
			  T2.RECEIPTSEQID
			FROM FINRECEIPTHEADER T1
			LEFT JOIN FINRECEIPTDETAIL T2 ON T1.RECEIPTID = T2.RECEIPTID
			LEFT JOIN FINANCEMAIN T3 ON T1.REFERENCE = T3.FINREFERENCE
			LEFT JOIN CUSTOMERS T4 ON T3.CUSTID = T4.CUSTID
			LEFT JOIN SECROLES T5 ON T1.NEXTROLECODE = T5.ROLECD
			LEFT JOIN PARTNERBANKS T6 ON T6.PARTNERBANKID = T2.FUNDINGAC
			LEFT JOIN BMTBANKDETAIL T7 ON T2.BANKCODE = T7.BANKCODE
			WHERE NOT EXISTS
			  (SELECT 1 FROM FINRECEIPTHEADER_TEMP WHERE RECEIPTID = T1.RECEIPTID
			  )
		</createView>
	</changeSet>

	<changeSet id="23" author="Bharat">
		<sql>
 			<![CDATA[
 			   Delete from SECROLEGROUPS where GrpID IN (select GrpID from secGroups where GrpCode IN ('CLOSURE_RECEIPT_MAKER','CLOSURE_RECEIPT_APPROVER'));
 	           Delete from SECROLEGROUPS where RoleID IN (select RoleID from secRoles where RoleCd IN ('RECEIPTCLOSURE_MAKER','RECEIPTCLOSURE_APPROVER'));
               Delete from SECGROUPRIGHTS where GrpID IN (select GrpID from secGroups where GrpCode IN ('CLOSURE_RECEIPT_MAKER','CLOSURE_RECEIPT_APPROVER'));
               Delete from SECGROUPS where GrpCode IN ('CLOSURE_RECEIPT_MAKER','CLOSURE_RECEIPT_APPROVER');
 	           Delete from SECROLES where RoleCd IN ('RECEIPTCLOSURE_MAKER','RECEIPTCLOSURE_APPROVER');
 			]]>
		</sql>
	</changeSet>

	<changeSet id="24" author="Bharat">
		<sql>
			<![CDATA[
				UPDATE SEQSECGROUPS SET SEQNO= (SELECT MAX(GRPID) FROM SECGROUPS_VIEW);
				UPDATE SEQSECROLES SET SEQNO= (SELECT MAX(ROLEID) FROM SECROLES_VIEW);
				UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS_VIEW); 
				UPDATE SEQSECROLEGROUPS SET SEQNO= (SELECT MAX(ROLEGRPID) FROM SECROLEGROUPS_VIEW);
				
				INSERT INTO SECROLES SELECT (SELECT MAX(ROLEID)+1 FROM SECROLES), 1,'RECEIPTCLOSURE_MAKER', 'Receipt Closure Maker Role', NULL,1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0 FROM SECROLES WHERE ROLECD = 'RECEIPTKNOCKOFF_MAKER';
				INSERT INTO SECROLES SELECT (SELECT MAX(ROLEID)+1 FROM SECROLES), 1,'RECEIPTCLOSURE_APPROVER', 'Receipt Closure Maker Role', NULL,1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0 FROM SECROLES WHERE ROLECD = 'RECEIPTKNOCKOFF_APPROVER';
				
				INSERT INTO SECGROUPS SELECT (SELECT MAX(GRPID)+1 FROM SECGROUPS), 'CLOSURE_RECEIPT_MAKER', 'Receipt Closure Maker Role',1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0 FROM SECGROUPS WHERE GRPCODE = 'KNOCKOFF_RECEIPT_MAKER';
				INSERT INTO SECGROUPS SELECT (SELECT MAX(GRPID)+1 FROM SECGROUPS), 'CLOSURE_RECEIPT_APPROVER', 'Receipt Closure Maker Role',1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0 FROM SECGROUPS WHERE GRPCODE = 'KNOCKOFF_RECEIPT_APPROVER';
				
				INSERT INTO SECROLEGROUPS VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'CLOSURE_RECEIPT_MAKER'),(SELECT ROLEID FROM SECROLES WHERE ROLECD = 'RECEIPTCLOSURE_MAKER'),1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0 );
				INSERT INTO SECROLEGROUPS VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'CLOSURE_RECEIPT_APPROVER'),(SELECT ROLEID FROM SECROLES WHERE ROLECD = 'RECEIPTCLOSURE_APPROVER'),1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0 );
				
				INSERT INTO SECGROUPRIGHTS SELECT (SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS)+ROW_NUMBER() OVER (ORDER BY GRPRIGHTID), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'CLOSURE_RECEIPT_MAKER'), 	RIGHTID, ACCESSTYPE,1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0 FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'KNOCKOFF_RECEIPT_MAKER');
				INSERT INTO SECGROUPRIGHTS SELECT (SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS)+ROW_NUMBER() OVER (ORDER BY GRPRIGHTID), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'CLOSURE_RECEIPT_APPROVER'),	RIGHTID, ACCESSTYPE,1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0 FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'KNOCKOFF_RECEIPT_APPROVER');
				
				UPDATE SEQSECGROUPS SET SEQNO= (SELECT MAX(GRPID) FROM SECGROUPS_VIEW);
				UPDATE SEQSECROLES SET SEQNO= (SELECT MAX(ROLEID) FROM SECROLES_VIEW);
				UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS_VIEW); 
				UPDATE SEQSECROLEGROUPS SET SEQNO= (SELECT MAX(ROLEGRPID) FROM SECROLEGROUPS_VIEW);
			]]>
		</sql>
	</changeSet>

	<changeSet id="25" author="Bharat">
		<sql>
			<![CDATA[
		   	   DELETE FROM SMTPARAMETERS WHERE SYSPARMCODE='RECEIPTCASHPAN';
			   INSERT INTO SMTPARAMETERS (SYSPARMCODE,SYSPARMDESC,SYSPARMTYPE,SYSPARMMAINT,SYSPARMVALUE,SYSPARMLENGTH,SYSPARMDEC,SYSPARMLIST,SYSPARMVALDMOD,SYSPARMDESCRIPTION,VERSION,LASTMNTBY,LASTMNTON,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID) values ('RECEIPTCASHPAN','Pan Card Mandatory For Cash Greater Than 50000','int',1,'50000',5,0,NULL,NULL,'Receipt Phase',1,1000, CURRENT_TIMESTAMP,'Approved',NULL,NULL,NULL,NULL,NULL,0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="26" author="Bharat">
		<createView viewName="FORECLOSURE_TVIEW" replaceIfExists="true">
			SELECT T3.CUSTCIF,
			  T1.REFERENCE,
			  T2.FINTYPE,
			  T1.RECEIPTID,
			  T1.RECEIPTDATE,
			  T1.RECEIPTAMOUNT,
			  T1.RECEIPTPURPOSE ,
			  T2.FINBRANCH,
			  T2.FINCURRASSETVALUE,
			  T2.PRODUCTCATEGORY,
			  T1.VERSION ,
			  T1.LASTMNTBY,
			  T1.LASTMNTON,
			  T1.RECORDSTATUS,
			  T1.ROLECODE,
			  T1.NEXTROLECODE,
			  T1.TASKID,
			  T1.NEXTTASKID,
			  T1.RECORDTYPE,
			  T1.WORKFLOWID,
			  T4.ROLEDESC LOVDESCREQUESTSTAGE,
			  T1.RECEIPTMODESTATUS
			FROM FINRECEIPTHEADER_TEMP T1
			LEFT JOIN FINANCEMAIN T2 ON T1.REFERENCE = T2.FINREFERENCE
			LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
			INNER JOIN SECROLES T4 ON T1.NEXTROLECODE = T4.ROLECD
		</createView>

	</changeSet>

	<changeSet id="27" author="Vidhya">
		<createView viewName="FINRECEIPTHEADER_VIEW" replaceIfExists="true">
	  SELECT  T1.RECEIPTID,
			  T1.RECEIPTDATE,
			  T1.RECEIPTTYPE,
			  T1.RECAGAINST,
			  T1.REFERENCE,
			  T1.RECEIPTPURPOSE,
			  T1.RECEIPTMODE,
			  T1.EXCESSADJUSTTO,
			  T1.ALLOCATIONTYPE,
			  T1.RECEIPTAMOUNT,
			  T1.EFFECTSCHDMETHOD,
			  T1.EXTREFERENCE,
			  T1.MODULE,
			  T1.RECEIPTMODESTATUS,
			  T1.SUBRECEIPTMODE,
			  T1.RECEIPTCHANNEL,
			  T1.RECEIVEDFROM,
			  T1.PANNUMBER,
			  T1.COLLECTIONAGENTID,
              T9.CODE COLLECTIONAGENTCODE,
              T9.DESCRIPTION COLLECTIONAGENTDESC,
			  T1.VERSION,
			  T1.LASTMNTBY,
			  T1.LASTMNTON,
			  T1.RECORDSTATUS,
			  T1.ROLECODE,
			  T1.NEXTROLECODE,
			  T1.TASKID,
			  T1.NEXTTASKID,
			  T1.RECORDTYPE,
			  T1.WORKFLOWID,
			  T2.FINTYPE,
			  T2.FINBRANCH,
			  T3.CUSTCIF,
			  T3.CUSTSHRTNAME,
			  T2.FINCCY,
			  T1.REALIZATIONDATE,
			  T1.CANCELREASON,
			  T4.FINTYPEDESC,
			  T6.BRANCHDESC FINBRANCHDESC,
			  T5.CCYDESC FINCCYDESC,
			  T7.REJECTDESC CANCELREASONDESC,
			  T2.FINISACTIVE,
			  T1.WAVIEDAMT,
			  T1.TOTFEEAMOUNT,
			  T1.BOUNCEDATE,
			  T1.REMARKS,
			  T1.RCDMAINTAINSTS,
			  T1.GDRAVAILABLE,
			  T1.RELEASETYPE,
			  T1.THIRDPARTYNAME,
			  T1.THIRDPARTYMOBILENUM,
			  T1.DEPOSITPROCESS,
			  T1.DEPOSITBRANCH,
			  T1.LPIAMOUNT,
			  T1.LPPAMOUNT,
			  T1.GSTLPIAMOUNT,
			  T1.GSTLPPAMOUNT,
			  (
			    CASE
			      WHEN T8.PAYMENTTYPE IN ('CHEQUE','DD')
			      THEN T8.FAVOURNUMBER
			      ELSE T8.TRANSACTIONREF
			    END ) TRANSACTIONREF,
			  T2.PRODUCTCATEGORY,
			  T2.PROMOTIONCODE,
			  T2.NEXTREPAYRVWDATE,
			  T1.CASHIERBRANCH,
			  T1.INITIATEDATE,
			  T1.INSTRUCTIONUID,
			  T1.FINDIVISION,
			  T1.POSTBRANCH,
			  T10.DIVISIONCODEDESC FINDIVISIONDESC,
			  T11.BRANCHDESC POSTBRANCHDESC,
			  T12.BRANCHDESC CASHIERBRANCHDESC,
			  T10.ENTITYCODE
			FROM FINRECEIPTHEADER_TEMP T1
			INNER JOIN FINANCEMAIN T2 ON T1.REFERENCE = T2.FINREFERENCE
			INNER JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
			INNER JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
			INNER JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
			INNER JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
			LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
			LEFT JOIN FINRECEIPTDETAIL T8 ON T1.RECEIPTID  = T8.RECEIPTID 
			AND T1.RECEIPTMODE = T8.PAYMENTTYPE
            LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
            LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
			LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
			LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
			UNION ALL
			  SELECT
			  T1.RECEIPTID,
			  T1.RECEIPTDATE,
			  T1.RECEIPTTYPE,
			  T1.RECAGAINST,
			  T1.REFERENCE,
			  T1.RECEIPTPURPOSE,
			  T1.RECEIPTMODE,
			  T1.EXCESSADJUSTTO,
			  T1.ALLOCATIONTYPE,
			  T1.RECEIPTAMOUNT,
			  T1.EFFECTSCHDMETHOD,
			  T1.EXTREFERENCE,
			  T1.MODULE,
			  T1.RECEIPTMODESTATUS,
			  T1.SUBRECEIPTMODE,
			  T1.RECEIPTCHANNEL,
			  T1.RECEIVEDFROM,
			  T1.PANNUMBER,
			  T1.COLLECTIONAGENTID,
              T9.CODE COLLECTIONAGENTCODE,
              T9.DESCRIPTION COLLECTIONAGENTCODE,
			  T1.VERSION,
			  T1.LASTMNTBY,
			  T1.LASTMNTON,
			  T1.RECORDSTATUS,
			  T1.ROLECODE,
			  T1.NEXTROLECODE,
			  T1.TASKID,
			  T1.NEXTTASKID,
			  T1.RECORDTYPE,
			  T1.WORKFLOWID,
			  T2.FINTYPE,
			  T2.FINBRANCH,
			  T3.CUSTCIF,
			  T3.CUSTSHRTNAME,
			  T2.FINCCY,
			  T1.REALIZATIONDATE,
			  T1.CANCELREASON,
			  T4.FINTYPEDESC,
			  T6.BRANCHDESC FINBRANCHDESC,
			  T5.CCYDESC FINCCYDESC,
			  T7.REJECTDESC CANCELREASONDESC,
			  T2.FINISACTIVE,
			  T1.WAVIEDAMT,
			  T1.TOTFEEAMOUNT,
			  T1.BOUNCEDATE,
			  T1.REMARKS,
			  T1.RCDMAINTAINSTS,
			  T1.GDRAVAILABLE,
			  T1.RELEASETYPE,
			  T1.THIRDPARTYNAME,
			  T1.THIRDPARTYMOBILENUM,
			  T1.DEPOSITPROCESS,
			  T1.DEPOSITBRANCH,
			  T1.LPIAMOUNT,
			  T1.LPPAMOUNT,
			  T1.GSTLPIAMOUNT,
			  T1.GSTLPPAMOUNT,
			  (
			    CASE
			      WHEN T8.PAYMENTTYPE IN ('CHEQUE','DD')
			      THEN T8.FAVOURNUMBER
			      ELSE T8.TRANSACTIONREF
			    END ) TRANSACTIONREF,
			  T2.PRODUCTCATEGORY,
			  T2.PROMOTIONCODE,
			  T2.NEXTREPAYRVWDATE,
			  T1.CASHIERBRANCH,
			  T1.INITIATEDATE,
			  T1.INSTRUCTIONUID,
			  T1.FINDIVISION,
			  T1.POSTBRANCH,
			  T10.DIVISIONCODEDESC FINDIVISIONDESC,
			  T11.BRANCHDESC POSTBRANCHDESC,
			  T12.BRANCHDESC CASHIERBRANCHDESC,
			  T10.ENTITYCODE
			FROM FINRECEIPTHEADER T1
			INNER JOIN FINANCEMAIN T2 ON T1.REFERENCE = T2.FINREFERENCE
			INNER JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
			INNER JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
			INNER JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
			INNER JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
			LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
			LEFT JOIN FINRECEIPTDETAIL T8 ON T1.RECEIPTID  = T8.RECEIPTID
			AND T1.RECEIPTMODE = T8.PAYMENTTYPE
            LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
            LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
			LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
			LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
			WHERE
			  NOT EXISTS
			  (
			    SELECT
			      1
			    FROM
			      FINRECEIPTHEADER_TEMP
			    WHERE
			      RECEIPTID = T1.RECEIPTID
			  )
   		 </createView>
	</changeSet>

	<changeSet id="28" author="Vidhya">
		<createView viewName="FINRECEIPTHEADER_TVIEW" replaceIfExists="true">
   			SELECT T1.RECEIPTID,
			  T1.RECEIPTDATE,
			  T1.RECEIPTTYPE,
			  T1.RECAGAINST,
			  T1.REFERENCE,
			  T1.RECEIPTPURPOSE,
			  T1.RECEIPTMODE,
			  T1.EXCESSADJUSTTO,
			  T1.ALLOCATIONTYPE,
			  T1.RECEIPTAMOUNT,
			  T1.EFFECTSCHDMETHOD,
			  T1.EXTREFERENCE,
			  T1.MODULE,
			  T1.RECEIPTMODESTATUS,
			  T1.SUBRECEIPTMODE,
			  T1.RECEIPTCHANNEL,
			  T1.RECEIVEDFROM,
			  T1.PANNUMBER,
			  T1.COLLECTIONAGENTID,
	          T9.CODE COLLECTIONAGENTCODE,
	          T9.DESCRIPTION COLLECTIONAGENTDESC,
			  T1.VERSION,
			  T1.LASTMNTBY,
			  T1.LASTMNTON,
			  T1.RECORDSTATUS,
			  T1.ROLECODE,
			  T1.NEXTROLECODE,
			  T1.TASKID,
			  T1.NEXTTASKID,
			  T1.RECORDTYPE,
			  T1.WORKFLOWID,
			  T2.FINTYPE,
			  T2.FINBRANCH,
			  T3.CUSTCIF,
			  T3.CUSTSHRTNAME,
			  T2.FINCCY,
			  T1.REALIZATIONDATE,
			  T1.CANCELREASON,
			  T4.FINTYPEDESC,
			  T6.BRANCHDESC FINBRANCHDESC,
			  T5.CCYDESC FINCCYDESC,
			  T7.REJECTDESC CANCELREASONDESC,
			  T2.FINISACTIVE,
			  T1.WAVIEDAMT,
			  T1.TOTFEEAMOUNT,
			  T1.BOUNCEDATE,
			  T1.REMARKS,
			  T1.RCDMAINTAINSTS,
			  T1.GDRAVAILABLE,
			  T1.RELEASETYPE,
			  T1.THIRDPARTYNAME,
			  T1.THIRDPARTYMOBILENUM,
			  T1.DEPOSITPROCESS,
			  T1.DEPOSITBRANCH,
			  T1.LPIAMOUNT,
			  T1.LPPAMOUNT,
			  T1.GSTLPIAMOUNT,
			  T1.GSTLPPAMOUNT,
			  (
			    CASE
			      WHEN T8.PAYMENTTYPE IN ('CHEQUE','DD')
			      THEN T8.FAVOURNUMBER
			      ELSE T8.TRANSACTIONREF
			    END ) TRANSACTIONREF,
			  T2.PRODUCTCATEGORY,
			  T2.PROMOTIONCODE,
			  T2.NEXTREPAYRVWDATE,
			  T1.CASHIERBRANCH,
			  T1.INITIATEDATE,
			  T1.INSTRUCTIONUID,
			  T1.FINDIVISION,
			  T1.POSTBRANCH,
			  T10.DIVISIONCODEDESC FINDIVISIONDESC,
			  T11.BRANCHDESC POSTBRANCHDESC,
			  T12.BRANCHDESC CASHIERBRANCHDESC,
			  T10.ENTITYCODE
			FROM FINRECEIPTHEADER_TEMP T1
			INNER JOIN FINANCEMAIN T2 ON T1.REFERENCE = T2.FINREFERENCE
			INNER JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
			INNER JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
			INNER JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
			INNER JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
			LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
			LEFT JOIN FINRECEIPTDETAIL T8 ON T1.RECEIPTID  = T8.RECEIPTID
			AND T1.RECEIPTMODE = T8.PAYMENTTYPE
	        LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
	        LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
			LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
			LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
		</createView>
	</changeSet>

	<changeSet id="29" author="Vidhya">
		<createView viewName="FINRECEIPTHEADER_AVIEW" replaceIfExists="true">
      SELECT  T1.RECEIPTID,
			  T1.RECEIPTDATE,
			  T1.RECEIPTTYPE,
			  T1.RECAGAINST,
			  T1.REFERENCE,
			  T1.RECEIPTPURPOSE,
			  T1.RECEIPTMODE,
			  T1.EXCESSADJUSTTO,
			  T1.ALLOCATIONTYPE,
			  T1.RECEIPTAMOUNT,
			  T1.EFFECTSCHDMETHOD,
			  T1.EXTREFERENCE,
			  T1.MODULE,
			  T1.RECEIPTMODESTATUS,
			  T1.SUBRECEIPTMODE,
			  T1.RECEIPTCHANNEL,
			  T1.RECEIVEDFROM,
			  T1.PANNUMBER,
			  T1.COLLECTIONAGENTID,
        	  T9.CODE COLLECTIONAGENTCODE,
       		  T9.DESCRIPTION COLLECTIONAGENTDESC,
			  T1.VERSION,
			  T1.LASTMNTBY,
			  T1.LASTMNTON,
			  T1.RECORDSTATUS,
			  T1.ROLECODE,
			  T1.NEXTROLECODE,
			  T1.TASKID,
			  T1.NEXTTASKID,
			  T1.RECORDTYPE,
			  T1.WORKFLOWID,
			  T2.FINTYPE,
			  T2.FINBRANCH,
			  T3.CUSTCIF,
			  T3.CUSTSHRTNAME,
			  T2.FINCCY,
			  T1.REALIZATIONDATE,
			  T1.CANCELREASON,
			  T4.FINTYPEDESC,
			  T6.BRANCHDESC FINBRANCHDESC,
			  T5.CCYDESC FINCCYDESC,
			  T7.REJECTDESC CANCELREASONDESC,
			  T2.FINISACTIVE,
			  T1.WAVIEDAMT,
			  T1.TOTFEEAMOUNT,
			  T1.BOUNCEDATE,
			  T1.REMARKS,
			  T1.RCDMAINTAINSTS,
			  T1.GDRAVAILABLE,
			  T1.RELEASETYPE,
			  T1.THIRDPARTYNAME,
			  T1.THIRDPARTYMOBILENUM,
			  T1.DEPOSITPROCESS,
			  T1.DEPOSITBRANCH,
			  T1.LPIAMOUNT,
			  T1.LPPAMOUNT,
			  T1.GSTLPIAMOUNT,
			  T1.GSTLPPAMOUNT,
			  (
			    CASE
			      WHEN T8.PAYMENTTYPE IN ('CHEQUE','DD')
			      THEN T8.FAVOURNUMBER
			      ELSE T8.TRANSACTIONREF
			    END ) TRANSACTIONREF,
			  T2.PRODUCTCATEGORY,
			  T2.PROMOTIONCODE,
			  T2.NEXTREPAYRVWDATE,
			  T1.CASHIERBRANCH,
			  T1.INITIATEDATE,
			  T1.INSTRUCTIONUID,
			  T1.FINDIVISION,
			  T1.POSTBRANCH,
			  T10.DIVISIONCODEDESC FINDIVISIONDESC,
			  T11.BRANCHDESC POSTBRANCHDESC,
			  T12.BRANCHDESC CASHIERBRANCHDESC,
			  T10.EntityCode
			FROM FINRECEIPTHEADER T1
			INNER JOIN FINANCEMAIN T2 ON T1.REFERENCE = T2.FINREFERENCE
			INNER JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
			INNER JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
			INNER JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
			INNER JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
			LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
			LEFT JOIN FINRECEIPTDETAIL T8 ON T1.RECEIPTID  = T8.RECEIPTID
			AND T1.RECEIPTMODE = T8.PAYMENTTYPE
            LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
            LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
			LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
			LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
      	</createView>
	</changeSet>

	<changeSet id="30" author="satyanarayana.g">
		<comment>FINDIVISION, PostBranch, FinDivisionDesc, PostBranchDesc, CashierBranchDesc, EntityCode Columns added</comment>
		<createView viewName="FINRECEIPTHEADER_DVIEW" replaceIfExists="true">
		SELECT T1.RECEIPTID,
				T1.RECEIPTPURPOSE,
				T1.RECEIPTMODE,
				T1.REMARKS,
				T1.DEPOSITBRANCH,
				T2.FAVOURNUMBER,
				T2.RECEIVEDDATE,
				T2.FUNDINGAC,
				T2.AMOUNT,
				T3.FINREFERENCE,
				T4.CUSTSHRTNAME,
				T1.FINDIVISION,
				T1.POSTBRANCH,
				T10.DIVISIONCODEDESC FINDIVISIONDESC,
				T11.BRANCHDESC POSTBRANCHDESC,
				T12.BRANCHDESC CASHIERBRANCHDESC,
				T10.ENTITYCODE
				FROM FINRECEIPTHEADER_TEMP T1
				INNER JOIN
				(SELECT T.RECEIPTID,
				T.FAVOURNUMBER,
				T.RECEIVEDDATE,
				T.FUNDINGAC,
				T.AMOUNT,
				T.PAYMENTTYPE
				FROM FINRECEIPTDETAIL_TEMP T
				UNION ALL
				SELECT T.RECEIPTID,
				T.FAVOURNUMBER,
				T.RECEIVEDDATE,
				T.FUNDINGAC,
				T.AMOUNT,
				T.PAYMENTTYPE
				FROM FINRECEIPTDETAIL T
				WHERE NOT EXISTS
				(SELECT 1 FROM FINRECEIPTDETAIL_TEMP WHERE RECEIPTID = T.RECEIPTID
				)
				) T2 ON T2.RECEIPTID    = T1.RECEIPTID AND T2.PAYMENTTYPE = T1.RECEIPTMODE
				INNER JOIN FINANCEMAIN T3 ON T1.REFERENCE = T3.FINREFERENCE
				INNER JOIN CUSTOMERS T4 ON T3.CUSTID = T4.CUSTID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH   = T12.BRANCHCODE
				WHERE T1.RECEIPTMODE IN ('CHEQUE', 'DD')
				AND T1.DEPOSITPROCESS = 1
				AND T1.RECEIPTID NOT IN
				(SELECT RECEIPTID FROM DEPOSITCHEQUES_TEMP
				)
				UNION ALL
				SELECT T1.RECEIPTID,
				T1.RECEIPTPURPOSE,
				T1.RECEIPTMODE,
				T1.REMARKS,
				T1.DEPOSITBRANCH,
				T2.FAVOURNUMBER,
				T2.RECEIVEDDATE,
				T2.FUNDINGAC,
				T2.AMOUNT,
				T3.FINREFERENCE,
				T4.CUSTSHRTNAME,
				T1.FINDIVISION,
				T1.POSTBRANCH,
				T10.DIVISIONCODEDESC FINDIVISIONDESC,
				T11.BRANCHDESC POSTBRANCHDESC,
				T12.BRANCHDESC CASHIERBRANCHDESC,
				T10.ENTITYCODE
				FROM FINRECEIPTHEADER T1
				INNER JOIN
				(SELECT T.RECEIPTID,
				T.FAVOURNUMBER,
				T.RECEIVEDDATE,
				T.FUNDINGAC,
				T.AMOUNT,
				T.PAYMENTTYPE
				FROM FINRECEIPTDETAIL_TEMP T
				UNION ALL
				SELECT T.RECEIPTID,
				T.FAVOURNUMBER,
				T.RECEIVEDDATE,
				T.FUNDINGAC,
				T.AMOUNT,
				T.PAYMENTTYPE
				FROM FINRECEIPTDETAIL T
				WHERE NOT EXISTS
				(SELECT 1 FROM FINRECEIPTDETAIL_TEMP WHERE RECEIPTID = T.RECEIPTID
				)
				) T2 ON T2.RECEIPTID    = T1.RECEIPTID AND T2.PAYMENTTYPE = T1.RECEIPTMODE
				INNER JOIN FINANCEMAIN T3 ON T1.REFERENCE = T3.FINREFERENCE
				INNER JOIN CUSTOMERS T4 ON T3.CUSTID = T4.CUSTID
				LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
				LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
				LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
				WHERE NOT EXISTS
				(SELECT 1 FROM FINRECEIPTHEADER_TEMP WHERE RECEIPTID = T1.RECEIPTID
				)
				AND T1.RECEIPTMODE   IN ('CHEQUE', 'DD')
				AND T1.DEPOSITPROCESS = 1
				AND T1.RECEIPTID NOT IN
				(SELECT RECEIPTID FROM DEPOSITCHEQUES_TEMP)
		</createView>
	</changeSet>

	<changeSet id="31" author="Vidhya">
		<createView viewName="RECEIPTDETAILS_VIEW" replaceIfExists="true">
   			SELECT T4.CUSTCIF,
			  T1.REFERENCE,
			  T3.FINTYPE,
			  T1.RECEIPTID,
			  T1.RECEIPTDATE,
			  T1.RECEIPTAMOUNT,
			  T2.DEPOSITDATE,
			  T2.BANKCODE DEPOSITBANK ,
			  (
			  CASE
			  WHEN T1.RECEIPTPURPOSE IN ('EarlyPayment')
			  THEN 'Partial Payment'
			  ELSE T1.RECEIPTPURPOSE
			  END) RECEIPTPURPOSE,
			  T1.RECEIPTMODE,
			  T1.BOUNCEDATE CANCELDATE,
			  T2.VALUEDATE,
			  T2.PAYAGAINSTID,
			  T1.BOUNCEDATE,
			  T1.REALIZATIONDATE,
			  T1.CANCELREASON,
			  T3.CLOSINGSTATUS,
			  T3.FINBRANCH,
			  T3.FINCURRASSETVALUE,
			  T3.PRODUCTCATEGORY,
			  T6.PARTNERBANKCODE,
			  T2.TRANSACTIONREF,
			  T2.FUNDINGAC,
			  T1.VERSION ,
			  T1.LASTMNTBY,
			  T1.LASTMNTON,
			  T1.RECORDSTATUS,
			  T1.ROLECODE,
			  T1.NEXTROLECODE,
			  T1.TASKID,
			  T1.NEXTTASKID,
			  T1.RECORDTYPE,
			  T1.WORKFLOWID,
			  T5.ROLEDESC LOVDESCREQUESTSTAGE,
			  T2.PAYMENTTYPE,
			  T1.RECEIPTMODESTATUS
			FROM FINRECEIPTHEADER_TEMP T1
			LEFT JOIN FINRECEIPTDETAIL_TEMP T2 ON T1.RECEIPTID = T2.RECEIPTID
			LEFT JOIN FINANCEMAIN T3 ON T1.REFERENCE = T3.FINREFERENCE
			LEFT JOIN CUSTOMERS T4 ON T3.CUSTID = T4.CUSTID
			INNER JOIN SECROLES T5 ON T1.NEXTROLECODE = T5.ROLECD
			LEFT JOIN PARTNERBANKS T6 ON T6.PARTNERBANKID = T2.FUNDINGAC
			UNION ALL
			SELECT T4.CUSTCIF,
			  T1.REFERENCE,
			  T3.FINTYPE,
			  T1.RECEIPTID,
			  T1.RECEIPTDATE,
			  T1.RECEIPTAMOUNT,
			  T2.DEPOSITDATE,
			  T2.BANKCODE DEPOSITBANK ,
			  (
			  CASE
			  WHEN T1.RECEIPTPURPOSE IN ('EarlyPayment')
			  THEN 'Partial Payment'
			  ELSE T1.RECEIPTPURPOSE
			  END) RECEIPTPURPOSE,
			  T1.RECEIPTMODE,
			  T1.BOUNCEDATE CANCELDATE,
			  T2.VALUEDATE,
			  T2.PAYAGAINSTID,
			  T1.BOUNCEDATE,
			  T1.REALIZATIONDATE,
			  T1.CANCELREASON,
			  T3.CLOSINGSTATUS,
			  T3.FINBRANCH,
			  T3.FINCURRASSETVALUE,
			  T3.PRODUCTCATEGORY,
			  T6.PARTNERBANKCODE,
			  T2.TRANSACTIONREF,
			  T2.FUNDINGAC,
			  T1.VERSION ,
			  T1.LASTMNTBY,
			  T1.LASTMNTON,
			  T1.RECORDSTATUS,
			  T1.ROLECODE,
			  T1.NEXTROLECODE,
			  T1.TASKID,
			  T1.NEXTTASKID,
			  T1.RECORDTYPE,
			  T1.WORKFLOWID,
			  T5.ROLEDESC LOVDESCREQUESTSTAGE,
			  T2.PAYMENTTYPE,
			  T1.RECEIPTMODESTATUS
			FROM FINRECEIPTHEADER T1
			LEFT JOIN FINRECEIPTDETAIL T2 ON T1.RECEIPTID = T2.RECEIPTID
			LEFT JOIN FINANCEMAIN T3 ON T1.REFERENCE = T3.FINREFERENCE
			LEFT JOIN CUSTOMERS T4 ON T3.CUSTID = T4.CUSTID
			LEFT JOIN SECROLES T5 ON T1.NEXTROLECODE = T5.ROLECD
			LEFT JOIN PARTNERBANKS T6 ON T6.PARTNERBANKID = T2.FUNDINGAC
			WHERE NOT EXISTS
			  (SELECT 1 FROM FINRECEIPTHEADER_TEMP WHERE RECEIPTID = T1.RECEIPTID
			  )
     	 </createView>
	</changeSet>

	<changeSet id="32" author="Bharat">
		<createView viewName="RECEIPT_REALIZATION_VIEW" replaceIfExists="true">
	 		SELECT T4.CUSTCIF,
			  T1.REFERENCE,
			  T3.FINTYPE,
			  T1.RECEIPTID,
			  T1.RECEIPTDATE,
			  T1.RECEIPTAMOUNT,
			  T2.DEPOSITDATE,
			  T2.BANKCODE DEPOSITBANK ,
			  (
			  CASE
			  WHEN T1.RECEIPTPURPOSE IN ('EarlyPayment')
			  THEN 'Partial Payment'
			  ELSE T1.RECEIPTPURPOSE
			  END) RECEIPTPURPOSE ,
			  T1.RECEIPTMODE,
			  T1.BOUNCEDATE CANCELDATE,
			  T2.VALUEDATE,
			  T2.PAYAGAINSTID,
			  T1.BOUNCEDATE,
			  T1.REALIZATIONDATE,
			  T1.CANCELREASON,
			  T3.CLOSINGSTATUS,
			  T3.FINBRANCH,
			  T3.FINCURRASSETVALUE,
			  T3.PRODUCTCATEGORY,
			  T6.PARTNERBANKCODE,
			  T2.TRANSACTIONREF,
			  T2.FUNDINGAC,
			  T1.VERSION ,
			  T1.LASTMNTBY,
			  T1.LASTMNTON,
			  T1.RECORDSTATUS,
			  T1.ROLECODE,
			  T1.NEXTROLECODE,
			  T1.TASKID,
			  T1.NEXTTASKID,
			  T1.RECORDTYPE,
			  T1.WORKFLOWID,
			  T5.ROLEDESC LOVDESCREQUESTSTAGE,
			  T2.PAYMENTTYPE,
			  T1.RECEIPTMODESTATUS
			FROM FINRECEIPTHEADER_TEMP T1
			LEFT JOIN FINRECEIPTDETAIL_TEMP T2 ON T1.RECEIPTID = T2.RECEIPTID
			LEFT JOIN FINANCEMAIN T3 ON T1.REFERENCE = T3.FINREFERENCE
			LEFT JOIN CUSTOMERS T4 ON T3.CUSTID = T4.CUSTID
			LEFT JOIN SECROLES T5 ON T1.NEXTROLECODE = T5.ROLECD
			LEFT JOIN PARTNERBANKS T6 ON T6.PARTNERBANKID = T2.FUNDINGAC
			UNION ALL
			SELECT T4.CUSTCIF,
			  T1.REFERENCE,
			  T3.FINTYPE,
			  T1.RECEIPTID,
			  T1.RECEIPTDATE,
			  T1.RECEIPTAMOUNT,
			  T2.DEPOSITDATE,
			  T2.BANKCODE DEPOSITBANK ,
			   (
			  CASE
			  WHEN T1.RECEIPTPURPOSE IN ('EarlyPayment')
			  THEN 'Partial Payment'
			  ELSE T1.RECEIPTPURPOSE
			  END) RECEIPTPURPOSE ,
			  T1.RECEIPTMODE,
			  T1.BOUNCEDATE CANCELDATE,
			  T2.VALUEDATE,
			  T2.PAYAGAINSTID,
			  T1.BOUNCEDATE,
			  T1.REALIZATIONDATE,
			  T1.CANCELREASON,
			  T3.CLOSINGSTATUS,
			  T3.FINBRANCH,
			  T3.FINCURRASSETVALUE,
			  T3.PRODUCTCATEGORY,
			  T6.PARTNERBANKCODE,
			  T2.TRANSACTIONREF,
			  T2.FUNDINGAC,
			  T1.VERSION ,
			  T1.LASTMNTBY,
			  T1.LASTMNTON,
			  T1.RECORDSTATUS,
			  T1.ROLECODE,
			  T1.NEXTROLECODE,
			  T1.TASKID,
			  T1.NEXTTASKID,
			  T1.RECORDTYPE,
			  T1.WORKFLOWID,
			  T5.ROLEDESC LOVDESCREQUESTSTAGE,
			  T2.PAYMENTTYPE,
			  T1.RECEIPTMODESTATUS
			FROM FINRECEIPTHEADER T1
			LEFT JOIN FINRECEIPTDETAIL T2 ON T1.RECEIPTID = T2.RECEIPTID
			LEFT JOIN FINANCEMAIN T3 ON T1.REFERENCE = T3.FINREFERENCE
			LEFT JOIN CUSTOMERS T4 ON T3.CUSTID = T4.CUSTID
			LEFT JOIN SECROLES T5 ON T1.NEXTROLECODE = T5.ROLECD
			LEFT JOIN PARTNERBANKS T6 ON T6.PARTNERBANKID = T2.FUNDINGAC
			WHERE NOT EXISTS
			  (SELECT 1 FROM FINRECEIPTHEADER_TEMP WHERE RECEIPTID = T1.RECEIPTID
			  )
	 	</createView>
	</changeSet>

	<changeSet id="33" author="Bharat">
		<sql>
			<![CDATA[
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FIN_RECEIPT_MAKER') AND RIGHTID IN (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_PaidAmount');  
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'FIN_DEPOSIT_MAKER') AND RIGHTID IN (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_PaidAmount');  
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'REALIZATION_MAKER') AND RIGHTID IN (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_PaidAmount');  
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'KNOCKOFF_RECEIPT_MAKER') AND RIGHTID IN (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_PaidAmount');  
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'CLOSURE_RECEIPT_MAKER') AND RIGHTID IN (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_PaidAmount');  
				DELETE FROM SECGROUPRIGHTS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'CLOSURE_RECEIPT_MAKER') AND RIGHTID IN (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_WaivedAmount');
				
				DELETE FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_PaidAmount';
				DELETE FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_WaivedAmount'; 
	     	]]>
		</sql>
	</changeSet>

	<changeSet id="33.1" author="Bharat">
		<sql>
			<![CDATA[
				UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS_VIEW);
				UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS_VIEW); 
				
				INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3,'ReceiptDialog_PaidAmount','ReceiptDialog',0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0 FROM SEQSECRIGHTS WHERE 0=0;
				INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3,'ReceiptDialog_WaivedAmount','ReceiptDialog',0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0 FROM SEQSECRIGHTS WHERE 0=0;
				     
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_PaidAmount'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_DEPOSIT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_PaidAmount'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);  
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='REALIZATION_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_PaidAmount'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);  
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='KNOCKOFF_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_PaidAmount'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);  
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='CLOSURE_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_PaidAmount'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);  
				INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='CLOSURE_RECEIPT_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_WaivedAmount'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
				    		   
				UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS_VIEW);
				UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS_VIEW); 
			]]>
		</sql>
	</changeSet>

	<changeSet id="34_pre" author="murthy.y" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_save_and_drop_dependencies ('plf', 'receiptallocationdetail');
					select deps_save_and_drop_dependencies ('plf', 'receiptallocationdetail_temp');
			]]>
		</sql>
	</changeSet>

	<changeSet id="34" author="Bharat">
		<addColumn tableName="RECEIPTALLOCATIONDETAIL">
			<column name="TotalDue" type="decimal(18,0)" />
			<column name="WaivedReqAmount" type="decimal(18,0)" />
			<column name="WaiverAccepted" type="VARCHAR(1)" />
		</addColumn>

		<addColumn tableName="RECEIPTALLOCATIONDETAIL_TEMP">
			<column name="TotalDue" type="decimal(18,0)" />
			<column name="WaivedReqAmount" type="decimal(18,0)" />
			<column name="WaiverAccepted" type="VARCHAR(1)" />
		</addColumn>
	</changeSet>
	
	<changeSet id="34_post" author="murthy.y" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_restore_dependencies ('plf', 'receiptallocationdetail');
					select deps_restore_dependencies ('plf', 'receiptallocationdetail_temp');
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="34.1_pre" author="satyanarayana.g">
		<sql>
			<![CDATA[
				UPDATE RECEIPTALLOCATIONDETAIL SET TOTALDUE =0 where TOTALDUE is null;
				UPDATE RECEIPTALLOCATIONDETAIL_TEMP SET TOTALDUE =0 where TOTALDUE is null;
				
				UPDATE RECEIPTALLOCATIONDETAIL SET WAIVERACCEPTED = ' ' where WAIVERACCEPTED is null;
				UPDATE RECEIPTALLOCATIONDETAIL_TEMP SET WAIVERACCEPTED = ' ' where WAIVERACCEPTED is null;
			]]>
		</sql>
	</changeSet>

	<changeSet id="34.1" author="satyanarayana.g" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE RECEIPTALLOCATIONDETAIL ADD CONSTRAINT DF_RECEIPTALLOCATIONDETAIL_TOTALDUE DEFAULT 0 FOR TOTALDUE;
				ALTER TABLE RECEIPTALLOCATIONDETAIL_TEMP ADD CONSTRAINT DF_RECEIPTALLOCATIONDETAIL_TEMP_TOTALDUE DEFAULT 0 FOR TOTALDUE;
				
				ALTER TABLE RECEIPTALLOCATIONDETAIL ADD CONSTRAINT DF_RECEIPTALLOCATIONDETAIL_WAIVERACCEPTED DEFAULT ' ' FOR WAIVERACCEPTED;
				ALTER TABLE RECEIPTALLOCATIONDETAIL_TEMP ADD CONSTRAINT DF_RECEIPTALLOCATIONDETAIL_TEMP_WAIVERACCEPTED DEFAULT ' ' FOR WAIVERACCEPTED;
			]]>
		</sql>
	</changeSet>

	<changeSet id="34.1" author="satyanarayana.g" dbms="postgresql, oracle">
		<addDefaultValue columnName="TOTALDUE" tableName="RECEIPTALLOCATIONDETAIL" defaultValue="0" />
		<addDefaultValue columnName="TOTALDUE" tableName="RECEIPTALLOCATIONDETAIL_TEMP" defaultValue="0" />
		<addDefaultValue columnName="WAIVERACCEPTED" tableName="RECEIPTALLOCATIONDETAIL" defaultValue="' '" />
		<addDefaultValue columnName="WAIVERACCEPTED" tableName="RECEIPTALLOCATIONDETAIL_TEMP" defaultValue="' '" />
	</changeSet>

	<changeSet id="34.2" author="shinde.b">
		<addNotNullConstraint tableName="RECEIPTALLOCATIONDETAIL" columnName="TOTALDUE" columnDataType="decimal(18,0)" />
		<addNotNullConstraint tableName="RECEIPTALLOCATIONDETAIL_TEMP" columnName="TOTALDUE" columnDataType="decimal(18,0)" />
	</changeSet>
	
	<changeSet id="34.3_pre" author="satyanarayana.g">
		<sql>
			<![CDATA[
				UPDATE RECEIPTALLOCATIONDETAIL set WAIVEDREQAMOUNT =0 where WAIVEDREQAMOUNT is null;
				UPDATE RECEIPTALLOCATIONDETAIL_TEMP set WAIVEDREQAMOUNT =0 where WAIVEDREQAMOUNT is null;
			]]>
		</sql>
	</changeSet>

	<changeSet id="34.3" author="satyanarayana.g" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE RECEIPTALLOCATIONDETAIL ADD CONSTRAINT DF_RECEIPTALLOCATIONDETAIL_WAIVEDREQAMOUNT DEFAULT 0 FOR WAIVEDREQAMOUNT;
				ALTER TABLE RECEIPTALLOCATIONDETAIL_TEMP ADD CONSTRAINT DF_RECEIPTALLOCATIONDETAIL_TEMP_WAIVEDREQAMOUNT DEFAULT 0 FOR WAIVEDREQAMOUNT;
			]]>
		</sql>
	</changeSet>

	<changeSet id="34.3" author="satyanarayana.g" dbms="postgresql, oracle">
		<addDefaultValue columnName="WAIVEDREQAMOUNT" tableName="RECEIPTALLOCATIONDETAIL" defaultValue="0" />
		<addDefaultValue columnName="WAIVEDREQAMOUNT" tableName="RECEIPTALLOCATIONDETAIL_TEMP" defaultValue="0" />
	</changeSet>

	<changeSet id="34.4" author="shinde.b">
		<addNotNullConstraint tableName="RECEIPTALLOCATIONDETAIL" columnName="WAIVEDREQAMOUNT" columnDataType="decimal(18,0)" />
		<addNotNullConstraint tableName="RECEIPTALLOCATIONDETAIL_TEMP" columnName="WAIVEDREQAMOUNT" columnDataType="decimal(18,0)" />
	</changeSet>

	<changeSet id="35" author="Bharat">
		<createView viewName="FINEXCESSAMOUNT_LOVVIEW" replaceIfExists="true">
			select EXCESSID,
			  FINREFERENCE,
			  AMOUNTTYPE,
			  AMOUNT     /100 AMOUNT,
			  UTILISEDAMT/100 UTILISEDAMT,
			  RESERVEDAMT/100 RESERVEDAMT,
			  BALANCEAMT /100 BALANCEAMT
			from FINEXCESSAMOUNT
		</createView>
	</changeSet>

	<changeSet id="36" author="Bharat">
		<createView viewName="RECEIPTALLOCATIONDETAIL_VIEW" replaceIfExists="true">
	 		SELECT T1.RECEIPTALLOCATIONID,
			  T1.RECEIPTID,
			  T1.ALLOCATIONID,
			  T1.ALLOCATIONTYPE,
			  T1.ALLOCATIONTO,
			  T1.PAIDAMOUNT,
			  T1.WAIVEDAMOUNT,
			  COALESCE(T3.FEETYPEDESC, T5.FEETYPEDESC) TYPEDESC,
			  T1.PAIDGST,
			  T1.WAIVEDREQAMOUNT,
			  T1.WAIVERACCEPTED,
			  T1.TOTALDUE
			FROM RECEIPTALLOCATIONDETAIL_TEMP T1
			LEFT JOIN FINFEEDETAIL_TEMP T2 ON T1.ALLOCATIONTO = T2.FEEID AND T1.ALLOCATIONTYPE = 'FEE'
			LEFT JOIN FEETYPES T3 ON T2.FEETYPEID = T3.FEETYPEID
			LEFT JOIN MANUALADVISE T4 ON T1.ALLOCATIONTO = T4.ADVISEID AND T1.ALLOCATIONTYPE = 'MANADV'
			LEFT JOIN FEETYPES T5 ON T4.FEETYPEID = T5.FEETYPEID
			UNION ALL
			SELECT T1.RECEIPTALLOCATIONID,
			  T1.RECEIPTID,
			  T1.ALLOCATIONID,
			  T1.ALLOCATIONTYPE,
			  T1.ALLOCATIONTO,
			  T1.PAIDAMOUNT,
			  T1.WAIVEDAMOUNT,
			  COALESCE(T3.FEETYPEDESC, T5.FEETYPEDESC) TYPEDESC,
			  T1.PAIDGST,
			  T1.WAIVEDREQAMOUNT,
			  T1.WAIVERACCEPTED,
			  T1.TOTALDUE
			FROM RECEIPTALLOCATIONDETAIL T1
			LEFT JOIN FINFEEDETAIL T2 ON T1.ALLOCATIONTO = T2.FEEID AND T1.ALLOCATIONTYPE = 'FEE'
			LEFT JOIN FEETYPES T3 ON T2.FEETYPEID = T3.FEETYPEID
			LEFT JOIN MANUALADVISE T4 ON T1.ALLOCATIONTO = T4.ADVISEID AND T1.ALLOCATIONTYPE = 'MANADV'
			LEFT JOIN FEETYPES T5 ON T4.FEETYPEID = T5.FEETYPEID
			WHERE NOT EXISTS
			(SELECT 1 FROM RECEIPTALLOCATIONDETAIL_TEMP WHERE RECEIPTID = T1.RECEIPTID
			)
	 	</createView>
	</changeSet>

	<changeSet id="37" author="Bharat">
		<addColumn tableName="FINREPAYDETAILS">
			<column name="PenaltyPaid" type="decimal(18,0)" />
		</addColumn>
		<addColumn tableName="FINREPAYDETAILS">
			<column name="ReceiptId" type="bigint" />
		</addColumn>
		<addColumn tableName="FINREPAYDETAILS">
			<column name="PenaltyWaived" type="decimal(18,0)" />
		</addColumn>
	</changeSet>
	
	<changeSet id="37.1_pre" author="satyanarayana.g">
		<sql>
			<![CDATA[
				UPDATE FINREPAYDETAILS set PENALTYPAID =0 where PENALTYPAID is null;
				UPDATE FINREPAYDETAILS set RECEIPTID =0 where RECEIPTID is null;
				UPDATE FINREPAYDETAILS set PENALTYWAIVED =0 where PENALTYWAIVED is null;
			]]>
		</sql>
	</changeSet>

	<changeSet id="37.1" author="satyanarayana.g" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE FINREPAYDETAILS ADD CONSTRAINT DF_FINREPAYDETAILS_PENALTYPAID DEFAULT 0 FOR PENALTYPAID;
				ALTER TABLE FINREPAYDETAILS ADD CONSTRAINT DF_FINREPAYDETAILS_RECEIPTID DEFAULT 0 FOR RECEIPTID;
				ALTER TABLE FINREPAYDETAILS ADD CONSTRAINT DF_FINREPAYDETAILS_PENALTYWAIVED DEFAULT 0 FOR PENALTYWAIVED;
			]]>
		</sql>
	</changeSet>

	<changeSet id="37.1" author="satyanarayana.g" dbms="postgresql, oracle">
		<addDefaultValue columnName="PENALTYPAID" tableName="FINREPAYDETAILS" defaultValue="0" />
		<addDefaultValue columnName="RECEIPTID" tableName="FINREPAYDETAILS" defaultValue="0" />
		<addDefaultValue columnName="PENALTYWAIVED" tableName="FINREPAYDETAILS" defaultValue="0" />
	</changeSet>

	<changeSet id="37.2" author="satyanarayana.g">
		<addNotNullConstraint tableName="FINREPAYDETAILS" columnName="PENALTYPAID" columnDataType="decimal(18,0)" />
		<addNotNullConstraint tableName="FINREPAYDETAILS" columnName="RECEIPTID" columnDataType="bigint" />
		<addNotNullConstraint tableName="FINREPAYDETAILS" columnName="PENALTYWAIVED" columnDataType="decimal(18,0)" />
	</changeSet>

	<changeSet id="38" author="Bharat">
		<createView viewName="MANUALADVISE_LOVVIEW" replaceIfExists="true">
     		SELECT ADVISEID,
			  FEETYPEID,
			  ADVISETYPE,
			  FINREFERENCE,
			  ADVISEAMOUNT,
			  VALUEDATE,
			  POSTDATE,
			  RESERVEDAMT,
			  BALANCEAMT
			FROM MANUALADVISE_AVIEW
     	 </createView>
	</changeSet>

	<changeSet id="39" author="Vidhya">
		<addColumn tableName="SECUSERS">
			<column name="ACCESSTOALLBRANCHES" type="NUMBER(1,0)" />
		</addColumn>
	</changeSet>

	<changeSet id="39.1" author="Vidhya">
		<addColumn tableName="SECUSERS_TEMP">
			<column name="ACCESSTOALLBRANCHES" type="NUMBER(1,0)" />
		</addColumn>
	</changeSet>
	
	<changeSet id="39.2_pre" author="satyanarayana.g">
		<sql>
			<![CDATA[
				UPDATE SECUSERS set ACCESSTOALLBRANCHES =0 where ACCESSTOALLBRANCHES is null;
				UPDATE SECUSERS_TEMP set ACCESSTOALLBRANCHES =0 where ACCESSTOALLBRANCHES is null;
			]]>
		</sql>
	</changeSet>

	<changeSet id="39.2" author="satyanarayana.g" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE SECUSERS ADD CONSTRAINT DF_SECUSERS_ACCESSTOALLBRANCHES DEFAULT 0 FOR ACCESSTOALLBRANCHES;
				ALTER TABLE SECUSERS_TEMP ADD CONSTRAINT DF_SECUSERS_TEMP_ACCESSTOALLBRANCHES DEFAULT 0 FOR ACCESSTOALLBRANCHES;
			]]>
		</sql>
	</changeSet>

	<changeSet id="39.2" author="satyanarayana.g" dbms="postgresql, oracle">
		<addDefaultValue columnName="ACCESSTOALLBRANCHES" tableName="SECUSERS" defaultValue="0" />
		<addDefaultValue columnName="ACCESSTOALLBRANCHES" tableName="SECUSERS_TEMP" defaultValue="0" />
	</changeSet>

	<changeSet id="39.3" author="shinde.b">
		<addNotNullConstraint tableName="SECUSERS" columnName="ACCESSTOALLBRANCHES" columnDataType="NUMBER(1,0)" />
		<addNotNullConstraint tableName="SECUSERS_TEMP" columnName="ACCESSTOALLBRANCHES" columnDataType="NUMBER(1,0)" />
	</changeSet>

	<changeSet id="40" author="Vidhya">
		<createView viewName="SECUSERS_VIEW" replaceIfExists="true">
	 		SELECT T1.USRID,
			  T1.USRLOGIN,
			  T1.USRPWD,
			  T1.USERSTAFFID,
			  T1.USRFNAME,
			  T1.USRMNAME,
			  T1.USRLNAME,
			  T1.USRMOBILE,
			  T1.USREMAIL,
			  T1.USRENABLED,
			  T1.USRCANSIGNONFROM,
			  T1.USRCANSIGNONTO,
			  T1.USRCANOVERRIDELIMITS,
			  T1.USRACEXP,
			  T1.USRACEXPDT,
			  T1.PWDEXPDT,
			  T1.USRACLOCKED,
			  T1.USRLANGUAGE,
			  T5.LNGDESC LOVDESCUSRLANGUAGE,
			  T1.USRDFTAPPID,
			  T2.APPCODE LOVDESCUSRDFTAPPCODE,
			  T2.APPDESCRIPTION LOVDESCUSRDFTAPPCODENAME,
			  T1.USRBRANCHCODE,
			  T4.BRANCHDESC LOVDESCUSRBRANCHCODENAME,
			  T1.USRDEPTCODE,
			  T3.DEPTDESC LOVDESCUSRDEPTCODENAME,
			  T1.USRTOKEN,
			  T1.USRISMULTIBRANCH,
			  T1.USRINVLDLOGINTRIES,
			  T1.USRDESG,
			  T6.DESGDESC LOVDESCUSRDESG,
			  T1.BUSINESSVERTICAL,
			  T7.CODE BUSINESSVERTICALCODE,
			  T7.DESCRIPTION BUSINESSVERTICALDESC,
			  T1.VERSION,
			  T1.LASTMNTBY,
			  T1.LASTMNTON,
			  T1.RECORDSTATUS,
			  T1.ROLECODE,
			  T1.NEXTROLECODE,
			  T1.TASKID,
			  T1.NEXTTASKID,
			  T1.RECORDTYPE,
			  T1.WORKFLOWID,
			  T1.USRDFTAPPCODE,
			  T1.AUTHTYPE,
			  T1.USERTYPE,
			  T1.ACCESSTOALLBRANCHES
			FROM SECUSERS_TEMP T1
			LEFT JOIN PTAPPLICATIONDETAILS T2 ON T1.USRDFTAPPID = T2.APPID
			LEFT JOIN BMTDEPARTMENTS T3 ON T1.USRDEPTCODE = T3.DEPTCODE
			LEFT JOIN RMTBRANCHES T4 ON T1.USRBRANCHCODE = T4.BRANCHCODE
			LEFT JOIN BMTLANGUAGE T5 ON T1.USRLANGUAGE = T5.LNGCODE
			LEFT JOIN BMTDESIGNATIONS T6 ON T1.USRDESG = T6.DESGCODE
			LEFT JOIN BUSINESS_VERTICAL T7 ON T7.ID = T1.BUSINESSVERTICAL
			UNION ALL
			SELECT T1.USRID,
			  T1.USRLOGIN,
			  T1.USRPWD,
			  T1.USERSTAFFID,
			  T1.USRFNAME,
			  T1.USRMNAME,
			  T1.USRLNAME,
			  T1.USRMOBILE,
			  T1.USREMAIL,
			  T1.USRENABLED,
			  T1.USRCANSIGNONFROM,
			  T1.USRCANSIGNONTO,
			  T1.USRCANOVERRIDELIMITS,
			  T1.USRACEXP,
			  T1.USRACEXPDT,
			  T1.PWDEXPDT,
			  T1.USRACLOCKED,
			  T1.USRLANGUAGE,
			  T5.LNGDESC LOVDESCUSRLANGUAGE,
			  T1.USRDFTAPPID,
			  T2.APPCODE LOVDESCUSRDFTAPPCODE,
			  T2.APPDESCRIPTION LOVDESCUSRDFTAPPCODENAME,
			  T1.USRBRANCHCODE,
			  T4.BRANCHDESC LOVDESCUSRBRANCHCODENAME,
			  T1.USRDEPTCODE,
			  T3.DEPTDESC LOVDESCUSRDEPTCODENAME,
			  T1.USRTOKEN,
			  T1.USRISMULTIBRANCH,
			  T1.USRINVLDLOGINTRIES,
			  T1.USRDESG,
			  T6.DESGDESC LOVDESCUSRDESG,
			  T1.BUSINESSVERTICAL,
			  T7.CODE BUSINESSVERTICALCODE,
			  T7.DESCRIPTION BUSINESSVERTICALDESC,
			  T1.VERSION,
			  T1.LASTMNTBY,
			  T1.LASTMNTON,
			  T1.RECORDSTATUS,
			  T1.ROLECODE,
			  T1.NEXTROLECODE,
			  T1.TASKID,
			  T1.NEXTTASKID,
			  T1.RECORDTYPE,
			  T1.WORKFLOWID,
			  T1.USRDFTAPPCODE,
			  T1.AUTHTYPE,
			  T1.USERTYPE,
			  T1.ACCESSTOALLBRANCHES
			FROM SECUSERS T1
			LEFT JOIN PTAPPLICATIONDETAILS T2 ON T1.USRDFTAPPID = T2.APPID
			LEFT JOIN BMTDEPARTMENTS T3 ON T1.USRDEPTCODE = T3.DEPTCODE
			LEFT JOIN RMTBRANCHES T4 ON T1.USRBRANCHCODE = T4.BRANCHCODE
			LEFT JOIN BMTLANGUAGE T5 ON T1.USRLANGUAGE = T5.LNGCODE
			LEFT JOIN BMTDESIGNATIONS T6 ON T1.USRDESG = T6.DESGCODE
			LEFT JOIN BUSINESS_VERTICAL T7 ON T7.ID = T1.BUSINESSVERTICAL
			WHERE (NOT (EXISTS
			  ( SELECT 1 FROM SECUSERS_TEMP WHERE (SECUSERS_TEMP.USRID = T1.USRID)
			  )))
	  	</createView>
	</changeSet>

	<changeSet id="41" author="Vidhya">
		<createView viewName="SECUSERS_AVIEW" replaceIfExists="true">
			SELECT T1.USRID,
			  T1.USRLOGIN,
			  T1.USRPWD,
			  T1.USERSTAFFID,
			  T1.USRFNAME,
			  T1.USRMNAME,
			  T1.USRLNAME,
			  T1.USRMOBILE,
			  T1.USREMAIL,
			  T1.USRENABLED,
			  T1.USRCANSIGNONFROM,
			  T1.USRCANSIGNONTO,
			  T1.USRCANOVERRIDELIMITS,
			  T1.USRACEXP,
			  T1.USRACEXPDT,
			  T1.PWDEXPDT,
			  T1.USRACLOCKED,
			  T1.USRLANGUAGE,
			  T5.LNGDESC LOVDESCUSRLANGUAGE,
			  T1.USRDFTAPPID,
			  T2.APPCODE LOVDESCUSRDFTAPPCODE,
			  T2.APPDESCRIPTION LOVDESCUSRDFTAPPCODENAME,
			  T1.USRBRANCHCODE,
			  T4.BRANCHDESC LOVDESCUSRBRANCHCODENAME,
			  T1.USRDEPTCODE,
			  T3.DEPTDESC LOVDESCUSRDEPTCODENAME,
			  T1.USRTOKEN,
			  T1.USRISMULTIBRANCH,
			  T1.USRINVLDLOGINTRIES,
			  T1.USRDESG,
			  T6.DESGDESC LOVDESCUSRDESG,
			  T1.BUSINESSVERTICAL,
			  T7.CODE BUSINESSVERTICALCODE,
			  T7.DESCRIPTION BUSINESSVERTICALDESC,
			  T1.VERSION,
			  T1.LASTMNTBY,
			  T1.LASTMNTON,
			  T1.RECORDSTATUS,
			  T1.ROLECODE,
			  T1.NEXTROLECODE,
			  T1.TASKID,
			  T1.NEXTTASKID,
			  T1.RECORDTYPE,
			  T1.WORKFLOWID,
			  T1.USRDFTAPPCODE,
			  T1.AUTHTYPE,
			  T1.USERTYPE,
			  T1.ACCESSTOALLBRANCHES
			FROM SECUSERS T1
			LEFT JOIN PTAPPLICATIONDETAILS T2 ON T1.USRDFTAPPID = T2.APPID
			LEFT JOIN BMTDEPARTMENTS T3 ON T1.USRDEPTCODE = T3.DEPTCODE
			LEFT JOIN RMTBRANCHES T4 ON T1.USRBRANCHCODE = T4.BRANCHCODE
			LEFT JOIN BMTLANGUAGE T5 ON T1.USRLANGUAGE = T5.LNGCODE
			LEFT JOIN BMTDESIGNATIONS T6 ON T1.USRDESG = T6.DESGCODE
			LEFT JOIN BUSINESS_VERTICAL T7 ON T7.ID = T1.BUSINESSVERTICAL
		</createView>
	</changeSet>

	<changeSet id="42" author="satyanarayana.g">
		<sql>
			<![CDATA[
			UPDATE SeqWorkFlowDetails SET SEQNO= (SELECT MAX(WorkflowId)+1 FROM workflowdetails);
			UPDATE WorkFlowDetails SET WorkFlowActive= 0 where WorkFlowType='RECEIPT_LOAN_CLOSURE';
			]]>
		</sql>
		<insert tableName="WorkFlowDetails">
			<column name="WorkFlowId" valueComputed="(select max(WorkFlowId) + 1 from WorkFlowDetails)" />
			<column name="WorkFlowType">RECEIPT_LOAN_CLOSURE</column>
			<column name="WorkFlowSubType">Receipt Closure Process</column>
			<column name="WorkFlowDesc">Gold Loan Full Release Workflow</column>
			<column name="JsonDesign" type="nclob"><![CDATA[NULL]]></column>
			<column name="SvgDesign" type="nclob"><![CDATA[NULL]]></column>
			<column name="WorkFlowXml" type="clob"><![CDATA[NULL]]></column>
			<column name="WorkFlowRoles">RECEIPTCLOSURE_MAKER;RECEIPTCLOSURE_APPROVER</column>
			<column name="FirstTaskOwner">RECEIPTCLOSURE_MAKER</column>
			<column name="WorkFlowActive">1</column>
			<column name="Version">5</column>
			<column name="LastMntBy">1000</column>
			<column name="LastMntOn" valueDate="current_timestamp" />
			<column name="RecordStatus">Null</column>
			<column name="RoleCode">Null</column>
			<column name="NextRoleCode">Null</column>
			<column name="TaskId">Null</column>
			<column name="NextTaskId">Null</column>
			<column name="RecordType">NULL</column>
		</insert>
	</changeSet>

	<changeSet id="42.1" author="satyanarayana.g">
		<update tableName="WORKFLOWDETAILS">
			<column name="JSONDESIGN" type="NCLOB"><![CDATA[{"resourceId":1063,"properties":{"process_id":"RECEIPT_LOAN_CLOSURE","name":"Receipt Closure Process","documentation":"","category":"","listenerclass":"","listenerentitytype":""},"stencil":{"id":"BPMNDiagram"},"childShapes":[{"resourceId":"startEvent1","properties":{"overrideid":"","name":"Start"},"stencil":{"id":"StartNoneEvent"},"childShapes":[],"outgoing":[{"resourceId":"sid-C4F2FE9A-D693-4F78-BF35-59FC61E39BB3"}],"bounds":{"lowerRight":{"x":90,"y":190},"upperLeft":{"x":60,"y":160}},"dockers":[]},{"resourceId":"sid-8ED2D976-6A19-4EE3-B633-F80094375212","properties":{"overrideid":"","name":"Loan Closure Maker","usertaskassignment":{"assignment":{"type":"idm","idm":{"type":"user","assignee":{"email":"RECEIPTCLOSURE_MAKER","firstName":"RECEIPTCLOSURE_MAKER","fullName":"RECEIPTCLOSURE_MAKER","id":"RECEIPTCLOSURE_MAKER","roledesc":" Receipt Closure Maker Role","$$hashKey":"object:4900"}}}},"additionalforms":"","formkeydefinition":"","allowrevert":"","prioritydefinition":"Role Queue","baseactor":"","duedatedefinition":"","multiinstance_type":"None","isforcompensation":"false"},"stencil":{"id":"UserTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-69A3855B-58E0-4715-A009-4FCB1DFA63A7"},{"resourceId":"sid-7B92DDCE-32BB-452C-9692-B47DA3079347"}],"bounds":{"lowerRight":{"x":280,"y":215},"upperLeft":{"x":180,"y":135}},"dockers":[]},{"resourceId":"sid-C4F2FE9A-D693-4F78-BF35-59FC61E39BB3","properties":{"overrideid":"","name":"","repruseaction":"false","conditionsequenceflow":"","defaultflow":"false","action":"","state":"","mandatenotes":"false","capturereasons":"false","typeofreason":"","constraint":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-8ED2D976-6A19-4EE3-B633-F80094375212"}],"bounds":{"lowerRight":{"x":179.3515625,"y":175},"upperLeft":{"x":90.53125,"y":175}},"dockers":[{"x":15,"y":15},{"x":50,"y":40}],"target":{"resourceId":"sid-8ED2D976-6A19-4EE3-B633-F80094375212"}},{"resourceId":"sid-BA71D229-59DF-47FF-A7BA-EDF50A275EDB","properties":{"overrideid":"","name":"Loan Closure Approver","usertaskassignment":{"assignment":{"type":"idm","idm":{"type":"user","assignee":{"email":"RECEIPTCLOSURE_APPROVER","firstName":"RECEIPTCLOSURE_APPROVER","fullName":"RECEIPTCLOSURE_APPROVER","id":"RECEIPTCLOSURE_APPROVER","roledesc":" Receipt Closure Maker Role","$$hashKey":"object:6523"}}}},"additionalforms":"Accounting","formkeydefinition":"","allowrevert":"","prioritydefinition":"Role Queue","baseactor":"","duedatedefinition":"","multiinstance_type":"None","isforcompensation":"false"},"stencil":{"id":"UserTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-8A1197AA-0D42-4D5F-8213-A38D370CD205"}],"bounds":{"lowerRight":{"x":445,"y":215},"upperLeft":{"x":345,"y":135}},"dockers":[]},{"resourceId":"sid-DBB8BA2F-D908-4529-8E55-AD2544873E25","properties":{"overrideid":"","name":"","sequencefloworder":""},"stencil":{"id":"ExclusiveGateway"},"childShapes":[],"outgoing":[{"resourceId":"sid-49608423-B2DA-48A9-A488-BC1CD36C3752"},{"resourceId":"sid-322D8464-2984-4223-A3A2-DC5415BFF15A"},{"resourceId":"sid-D70E6AE1-61AE-4732-8DE8-478CD8F2010F"}],"bounds":{"lowerRight":{"x":520,"y":195},"upperLeft":{"x":480,"y":155}},"dockers":[]},{"resourceId":"sid-25781B18-EE31-46CC-A854-60810F1085AA","properties":{"overrideid":"","name":"Complete Process","rerunnable":true,"servicetaskexpression":"doApprove","isforcompensation":"false","multiinstance_type":"None","parameters":""},"stencil":{"id":"approveTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-4282B9CF-1902-4C3C-9026-EDF630137858"}],"bounds":{"lowerRight":{"x":700,"y":215},"upperLeft":{"x":600,"y":135}},"dockers":[]},{"resourceId":"sid-E2E517DA-F117-42DB-9518-E6810E555844","properties":{"overrideid":"","name":"Cancel Process","rerunnable":true,"servicetaskexpression":"doReject","isforcompensation":"false","multiinstance_type":"None","parameters":""},"stencil":{"id":"rejectTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-ECF25D4E-4A2D-423D-BC9F-4AD94839A62F"}],"bounds":{"lowerRight":{"x":550,"y":335},"upperLeft":{"x":450,"y":255}},"dockers":[]},{"resourceId":"sid-7BCCED83-99D9-4011-A1D9-0702781C3E8B","properties":{"overrideid":"","name":"Approved"},"stencil":{"id":"EndNoneEvent"},"childShapes":[],"outgoing":[],"bounds":{"lowerRight":{"x":763,"y":189},"upperLeft":{"x":735,"y":161}},"dockers":[]},{"resourceId":"sid-4282B9CF-1902-4C3C-9026-EDF630137858","properties":{"overrideid":"","name":"","repruseaction":"false","conditionsequenceflow":"","defaultflow":"false","action":"","state":"","mandatenotes":"false","capturereasons":"false","typeofreason":"","constraint":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-7BCCED83-99D9-4011-A1D9-0702781C3E8B"}],"bounds":{"lowerRight":{"x":734.078125,"y":175},"upperLeft":{"x":700.5,"y":175}},"dockers":[{"x":50,"y":40},{"x":14,"y":14}],"target":{"resourceId":"sid-7BCCED83-99D9-4011-A1D9-0702781C3E8B"}},{"resourceId":"sid-469B1AD4-984C-4DD4-A5CD-E7A5F9B11E5B","properties":{"overrideid":"","name":"Rejected"},"stencil":{"id":"EndNoneEvent"},"childShapes":[],"outgoing":[],"bounds":{"lowerRight":{"x":658,"y":309},"upperLeft":{"x":630,"y":281}},"dockers":[]},{"resourceId":"sid-ECF25D4E-4A2D-423D-BC9F-4AD94839A62F","properties":{"overrideid":"","name":"","repruseaction":"false","conditionsequenceflow":"","defaultflow":"false","action":"","state":"","mandatenotes":"false","capturereasons":"false","typeofreason":"","constraint":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-469B1AD4-984C-4DD4-A5CD-E7A5F9B11E5B"}],"bounds":{"lowerRight":{"x":629.5,"y":295},"upperLeft":{"x":550.5,"y":295}},"dockers":[{"x":50,"y":40},{"x":14,"y":14}],"target":{"resourceId":"sid-469B1AD4-984C-4DD4-A5CD-E7A5F9B11E5B"}},{"resourceId":"sid-7B92DDCE-32BB-452C-9692-B47DA3079347","properties":{"overrideid":"","name":"Cancel","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Cancelled'"}},"defaultflow":"false","action":"Cancel","state":"Cancelled","mandatenotes":true,"capturereasons":"false","typeofreason":"","constraint":"","showdiamondmarker":false},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-E2E517DA-F117-42DB-9518-E6810E555844"}],"bounds":{"lowerRight":{"x":449.2016833207592,"y":295},"upperLeft":{"x":230,"y":215.34375}},"dockers":[{"x":50,"y":71},{"x":230,"y":295},{"x":29.431995265992725,"y":40}],"target":{"resourceId":"sid-E2E517DA-F117-42DB-9518-E6810E555844"}},{"resourceId":"sid-8A1197AA-0D42-4D5F-8213-A38D370CD205","properties":{"overrideid":"","name":"","repruseaction":"false","conditionsequenceflow":"","defaultflow":"false","action":"","state":"","mandatenotes":"false","capturereasons":"false","typeofreason":"","constraint":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-DBB8BA2F-D908-4529-8E55-AD2544873E25"}],"bounds":{"lowerRight":{"x":479.718761230466,"y":175.40151071673208},"upperLeft":{"x":445.453113769534,"y":175.23911428326792}},"dockers":[{"x":50,"y":40},{"x":20.5,"y":20.5}],"target":{"resourceId":"sid-DBB8BA2F-D908-4529-8E55-AD2544873E25"}},{"resourceId":"sid-49608423-B2DA-48A9-A488-BC1CD36C3752","properties":{"overrideid":"","name":"Approve","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Approved'"}},"defaultflow":"false","action":"Approve","state":"Approved","mandatenotes":"false","capturereasons":"false","typeofreason":"","constraint":"","showdiamondmarker":false},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-25781B18-EE31-46CC-A854-60810F1085AA"}],"bounds":{"lowerRight":{"x":599.9453180927317,"y":175.43415553709943},"upperLeft":{"x":520.1874944072683,"y":175.16740696290057}},"dockers":[{"x":20.5,"y":20.5},{"x":50,"y":40}],"target":{"resourceId":"sid-25781B18-EE31-46CC-A854-60810F1085AA"}},{"resourceId":"sid-D70E6AE1-61AE-4732-8DE8-478CD8F2010F","properties":{"overrideid":"","name":"Reject","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Rejected'"}},"defaultflow":"false","action":"Reject","state":"Rejected","mandatenotes":true,"capturereasons":"false","typeofreason":"","constraint":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-E2E517DA-F117-42DB-9518-E6810E555844"}],"bounds":{"lowerRight":{"x":500.417690936206,"y":254.78907125323323},"upperLeft":{"x":500.168246563794,"y":195.17186624676677}},"dockers":[{"x":20.5,"y":20.5},{"x":50,"y":40}],"target":{"resourceId":"sid-E2E517DA-F117-42DB-9518-E6810E555844"}},{"resourceId":"sid-69A3855B-58E0-4715-A009-4FCB1DFA63A7","properties":{"overrideid":"","name":"Submit","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Submitted'"}},"defaultflow":"false","action":"Submit","state":"Submitted","mandatenotes":"false","capturereasons":"false","typeofreason":"","constraint":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-BA71D229-59DF-47FF-A7BA-EDF50A275EDB"}],"bounds":{"lowerRight":{"x":344.37109375,"y":175},"upperLeft":{"x":280.62890625,"y":175}},"dockers":[{"x":50,"y":40},{"x":50,"y":40}],"target":{"resourceId":"sid-BA71D229-59DF-47FF-A7BA-EDF50A275EDB"}},{"resourceId":"sid-322D8464-2984-4223-A3A2-DC5415BFF15A","properties":{"overrideid":"","name":"Resubmit","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Resubmitted'"}},"defaultflow":"false","action":"Resubmit","state":"Resubmitted","mandatenotes":true,"capturereasons":"false","typeofreason":"","constraint":"","showdiamondmarker":false},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-8ED2D976-6A19-4EE3-B633-F80094375212"}],"bounds":{"lowerRight":{"x":500.5,"y":154.90625},"upperLeft":{"x":230,"y":71}},"dockers":[{"x":20.5,"y":20.5},{"x":500.5,"y":71},{"x":230,"y":71},{"x":50,"y":63}],"target":{"resourceId":"sid-8ED2D976-6A19-4EE3-B633-F80094375212"}}],"bounds":{"lowerRight":{"x":1200,"y":1050},"upperLeft":{"x":0,"y":0}},"stencilset":{"url":"stencilsets/bpmn2.0/bpmn2.0.json","namespace":"http://b3mn.org/stencilset/bpmn2.0#"},"ssextensions":[]}]]></column>
			<column name="WORKFLOWXML" type="CLOB"><![CDATA[<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:activiti="http://activiti.org/bpmn" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI" typeLanguage="http://www.w3.org/2001/XMLSchema" expressionLanguage="http://www.w3.org/1999/XPath" targetNamespace="http://activiti.org/test">
  <process id="RECEIPT_LOAN_CLOSURE" name="Receipt Closure Process" isExecutable="true">
    <startEvent id="startEvent1" name="Start"/>
    <userTask id="sid-8ED2D976-6A19-4EE3-B633-F80094375212" name="Loan Closure Maker" activiti:actor="RECEIPTCLOSURE_MAKER" activiti:assignmentLevel="Role Queue"/>
    <sequenceFlow id="sid-C4F2FE9A-D693-4F78-BF35-59FC61E39BB3" sourceRef="startEvent1" targetRef="sid-8ED2D976-6A19-4EE3-B633-F80094375212" representsUserAction="false" mandateNotes="false" captureReasons="false"/>
    <userTask id="sid-BA71D229-59DF-47FF-A7BA-EDF50A275EDB" name="Loan Closure Approver" activiti:actor="RECEIPTCLOSURE_APPROVER" activiti:additionalForms="Accounting" activiti:assignmentLevel="Role Queue"/>
    <exclusiveGateway id="sid-DBB8BA2F-D908-4529-8E55-AD2544873E25"/>
    <serviceTask id="sid-25781B18-EE31-46CC-A854-60810F1085AA" name="Complete Process" activiti:operation="doApprove" activiti:rerunnable="true"/>
    <serviceTask id="sid-E2E517DA-F117-42DB-9518-E6810E555844" name="Cancel Process" activiti:operation="doReject" activiti:rerunnable="true"/>
    <endEvent id="sid-7BCCED83-99D9-4011-A1D9-0702781C3E8B" name="Approved"/>
    <sequenceFlow id="sid-4282B9CF-1902-4C3C-9026-EDF630137858" sourceRef="sid-25781B18-EE31-46CC-A854-60810F1085AA" targetRef="sid-7BCCED83-99D9-4011-A1D9-0702781C3E8B" representsUserAction="false" mandateNotes="false" captureReasons="false"/>
    <endEvent id="sid-469B1AD4-984C-4DD4-A5CD-E7A5F9B11E5B" name="Rejected"/>
    <sequenceFlow id="sid-ECF25D4E-4A2D-423D-BC9F-4AD94839A62F" sourceRef="sid-E2E517DA-F117-42DB-9518-E6810E555844" targetRef="sid-469B1AD4-984C-4DD4-A5CD-E7A5F9B11E5B" representsUserAction="false" mandateNotes="false" captureReasons="false"/>
    <sequenceFlow id="sid-7B92DDCE-32BB-452C-9692-B47DA3079347" name="Cancel" sourceRef="sid-8ED2D976-6A19-4EE3-B633-F80094375212" targetRef="sid-E2E517DA-F117-42DB-9518-E6810E555844" action="Cancel" state="Cancelled" representsUserAction="true" mandateNotes="true" captureReasons="false">
      <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Cancelled'</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-8A1197AA-0D42-4D5F-8213-A38D370CD205" sourceRef="sid-BA71D229-59DF-47FF-A7BA-EDF50A275EDB" targetRef="sid-DBB8BA2F-D908-4529-8E55-AD2544873E25" representsUserAction="false" mandateNotes="false" captureReasons="false"/>
    <sequenceFlow id="sid-49608423-B2DA-48A9-A488-BC1CD36C3752" name="Approve" sourceRef="sid-DBB8BA2F-D908-4529-8E55-AD2544873E25" targetRef="sid-25781B18-EE31-46CC-A854-60810F1085AA" action="Approve" state="Approved" representsUserAction="true" mandateNotes="false" captureReasons="false">
      <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Approved'</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-D70E6AE1-61AE-4732-8DE8-478CD8F2010F" name="Reject" sourceRef="sid-DBB8BA2F-D908-4529-8E55-AD2544873E25" targetRef="sid-E2E517DA-F117-42DB-9518-E6810E555844" action="Reject" state="Rejected" representsUserAction="true" mandateNotes="true" captureReasons="false">
      <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Rejected'</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-69A3855B-58E0-4715-A009-4FCB1DFA63A7" name="Submit" sourceRef="sid-8ED2D976-6A19-4EE3-B633-F80094375212" targetRef="sid-BA71D229-59DF-47FF-A7BA-EDF50A275EDB" action="Submit" state="Submitted" representsUserAction="true" mandateNotes="false" captureReasons="false">
      <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Submitted'</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-322D8464-2984-4223-A3A2-DC5415BFF15A" name="Resubmit" sourceRef="sid-DBB8BA2F-D908-4529-8E55-AD2544873E25" targetRef="sid-8ED2D976-6A19-4EE3-B633-F80094375212" action="Resubmit" state="Resubmitted" representsUserAction="true" mandateNotes="true" captureReasons="false">
      <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Resubmitted'</conditionExpression>
    </sequenceFlow>
  </process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_RECEIPT_LOAN_CLOSURE">
    <bpmndi:BPMNPlane bpmnElement="RECEIPT_LOAN_CLOSURE" id="BPMNPlane_RECEIPT_LOAN_CLOSURE">
      <bpmndi:BPMNShape bpmnElement="startEvent1" id="BPMNShape_startEvent1">
        <omgdc:Bounds height="30.0" width="30.0" x="60.0" y="160.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-8ED2D976-6A19-4EE3-B633-F80094375212" id="BPMNShape_sid-8ED2D976-6A19-4EE3-B633-F80094375212">
        <omgdc:Bounds height="80.0" width="100.0" x="180.0" y="135.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-BA71D229-59DF-47FF-A7BA-EDF50A275EDB" id="BPMNShape_sid-BA71D229-59DF-47FF-A7BA-EDF50A275EDB">
        <omgdc:Bounds height="80.0" width="100.0" x="345.0" y="135.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-DBB8BA2F-D908-4529-8E55-AD2544873E25" id="BPMNShape_sid-DBB8BA2F-D908-4529-8E55-AD2544873E25">
        <omgdc:Bounds height="40.0" width="40.0" x="480.0" y="155.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-25781B18-EE31-46CC-A854-60810F1085AA" id="BPMNShape_sid-25781B18-EE31-46CC-A854-60810F1085AA">
        <omgdc:Bounds height="80.0" width="100.0" x="600.0" y="135.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-E2E517DA-F117-42DB-9518-E6810E555844" id="BPMNShape_sid-E2E517DA-F117-42DB-9518-E6810E555844">
        <omgdc:Bounds height="80.0" width="100.0" x="450.0" y="255.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-7BCCED83-99D9-4011-A1D9-0702781C3E8B" id="BPMNShape_sid-7BCCED83-99D9-4011-A1D9-0702781C3E8B">
        <omgdc:Bounds height="28.0" width="28.0" x="735.0" y="161.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-469B1AD4-984C-4DD4-A5CD-E7A5F9B11E5B" id="BPMNShape_sid-469B1AD4-984C-4DD4-A5CD-E7A5F9B11E5B">
        <omgdc:Bounds height="28.0" width="28.0" x="630.0" y="281.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge bpmnElement="sid-49608423-B2DA-48A9-A488-BC1CD36C3752" id="BPMNEdge_sid-49608423-B2DA-48A9-A488-BC1CD36C3752">
        <omgdi:waypoint x="519.5637583892617" y="175.43624161073825"/>
        <omgdi:waypoint x="600.0" y="175.16722408026754"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-4282B9CF-1902-4C3C-9026-EDF630137858" id="BPMNEdge_sid-4282B9CF-1902-4C3C-9026-EDF630137858">
        <omgdi:waypoint x="700.0" y="175.0"/>
        <omgdi:waypoint x="735.0" y="175.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-7B92DDCE-32BB-452C-9692-B47DA3079347" id="BPMNEdge_sid-7B92DDCE-32BB-452C-9692-B47DA3079347">
        <omgdi:waypoint x="230.0" y="215.0"/>
        <omgdi:waypoint x="230.0" y="295.0"/>
        <omgdi:waypoint x="450.0" y="295.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-8A1197AA-0D42-4D5F-8213-A38D370CD205" id="BPMNEdge_sid-8A1197AA-0D42-4D5F-8213-A38D370CD205">
        <omgdi:waypoint x="445.0" y="175.23696682464455"/>
        <omgdi:waypoint x="480.4047619047619" y="175.4047619047619"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-69A3855B-58E0-4715-A009-4FCB1DFA63A7" id="BPMNEdge_sid-69A3855B-58E0-4715-A009-4FCB1DFA63A7">
        <omgdi:waypoint x="280.0" y="175.0"/>
        <omgdi:waypoint x="345.0" y="175.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-C4F2FE9A-D693-4F78-BF35-59FC61E39BB3" id="BPMNEdge_sid-C4F2FE9A-D693-4F78-BF35-59FC61E39BB3">
        <omgdi:waypoint x="90.0" y="175.0"/>
        <omgdi:waypoint x="180.0" y="175.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-322D8464-2984-4223-A3A2-DC5415BFF15A" id="BPMNEdge_sid-322D8464-2984-4223-A3A2-DC5415BFF15A">
        <omgdi:waypoint x="500.5" y="155.5"/>
        <omgdi:waypoint x="500.5" y="71.0"/>
        <omgdi:waypoint x="230.0" y="71.0"/>
        <omgdi:waypoint x="230.0" y="135.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-D70E6AE1-61AE-4732-8DE8-478CD8F2010F" id="BPMNEdge_sid-D70E6AE1-61AE-4732-8DE8-478CD8F2010F">
        <omgdi:waypoint x="500.4201680672269" y="194.57983193277312"/>
        <omgdi:waypoint x="500.1673640167364" y="255.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-ECF25D4E-4A2D-423D-BC9F-4AD94839A62F" id="BPMNEdge_sid-ECF25D4E-4A2D-423D-BC9F-4AD94839A62F">
        <omgdi:waypoint x="550.0" y="295.0"/>
        <omgdi:waypoint x="630.0" y="295.0"/>
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</definitions>]]></column>
			<where>workflowtype='RECEIPT_LOAN_CLOSURE' and workflowactive=1
			</where>
		</update>
	</changeSet>

	<changeSet id="43" author="vidhya">
		<sql>
			<![CDATA[
			   DELETE FROM WORKFLOWDETAILS WHERE WORKFLOWTYPE='RECEIPT_REALIZATION' AND WORKFLOWACTIVE='1';
			   UPDATE SEQWORKFLOWDETAILS SET SEQNO= (SELECT MAX(WORKFLOWID)+1 FROM WORKFLOWDETAILS);
			   UPDATE WORKFLOWDETAILS SET WORKFLOWACTIVE= 0 WHERE WORKFLOWTYPE='RECEIPT_REALIZATION';
			]]>
		</sql>
		<insert tableName="WorkFlowDetails">
			<column name="WorkFlowId" valueComputed="(select max(WorkFlowId) + 1 from WorkFlowDetails)" />
			<column name="WorkFlowType">RECEIPT_REALIZATION</column>
			<column name="WorkFlowSubType">Receipt Realization Workflow Process</column>
			<column name="WorkFlowDesc">Maker/checker for Receipt Realization Workflow</column>
			<column name="JsonDesign" type="nclob"><![CDATA[NULL]]></column>
			<column name="SvgDesign" type="nclob"><![CDATA[NULL]]></column>
			<column name="WorkFlowXml" type="clob"><![CDATA[NULL]]></column>
			<column name="WorkFlowRoles">REALIZATION_MAKER;REALIZATION_APPROVER</column>
			<column name="FirstTaskOwner">REALIZATION_MAKER</column>
			<column name="WorkFlowActive">1</column>
			<column name="Version">5</column>
			<column name="LastMntBy">1000</column>
			<column name="LastMntOn" valueDate="current_timestamp" />
			<column name="RecordStatus">Null</column>
			<column name="RoleCode">Null</column>
			<column name="NextRoleCode">Null</column>
			<column name="TaskId">Null</column>
			<column name="NextTaskId">Null</column>
			<column name="RecordType">NULL</column>
		</insert>
	</changeSet>

	<changeSet id="43.1" author="satyanarayana.g">
		<update tableName="WORKFLOWDETAILS">
			<column name="JSONDESIGN" type="NCLOB"><![CDATA[{"resourceId":682,"properties":{"process_id":"RECEIPT_REALIZATION","name":"Receipt Realization Workflow Process","documentation":"Maker/checker for Receipt Realization Workflow","category":"","listenerclass":"","listenerentitytype":""},"stencil":{"id":"BPMNDiagram"},"childShapes":[{"resourceId":"startEvent1","properties":{"overrideid":"","name":"Start"},"stencil":{"id":"StartNoneEvent"},"childShapes":[],"outgoing":[{"resourceId":"sid-B0987088-653D-4102-AE24-C76DEC0A872C"}],"bounds":{"lowerRight":{"x":130,"y":193},"upperLeft":{"x":100,"y":163}},"dockers":[]},{"resourceId":"sid-14808928-0356-41A2-ABB2-43BBB6C9A2FF","properties":{"overrideid":"","name":"Maker","usertaskassignment":{"assignment":{"type":"idm","idm":{"type":"user","assignee":{"email":"REALIZATION_MAKER","firstName":"REALIZATION_MAKER","fullName":"REALIZATION_MAKER","id":"REALIZATION_MAKER","roledesc":"Receipt Realization Maker","$$hashKey":"object:6159"}}}},"additionalforms":"","formkeydefinition":"","allowrevert":"","prioritydefinition":"Role Queue","baseactor":"","duedatedefinition":"","multiinstance_type":"None","isforcompensation":"false"},"stencil":{"id":"UserTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-0CF47C5E-A7ED-4511-B808-1A9579529B04"},{"resourceId":"sid-9DCE5390-479F-408E-B60F-A63911F36121"}],"bounds":{"lowerRight":{"x":295,"y":218},"upperLeft":{"x":195,"y":138}},"dockers":[]},{"resourceId":"sid-B0987088-653D-4102-AE24-C76DEC0A872C","properties":{"overrideid":"","name":"","repruseaction":"false","conditionsequenceflow":"","defaultflow":"false","action":"","state":"","mandatenotes":"false","capturereasons":"false","typeofreason":"","constraint":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-14808928-0356-41A2-ABB2-43BBB6C9A2FF"}],"bounds":{"lowerRight":{"x":194.234375,"y":178},"upperLeft":{"x":130.21875,"y":178}},"dockers":[{"x":15,"y":15},{"x":50,"y":40}],"target":{"resourceId":"sid-14808928-0356-41A2-ABB2-43BBB6C9A2FF"}},{"resourceId":"sid-B48EC03F-6765-429C-AC1B-2D5E10B88525","properties":{"overrideid":"","name":"Approver","usertaskassignment":{"assignment":{"type":"idm","idm":{"type":"user","assignee":{"email":"REALIZATION_APPROVER","firstName":"REALIZATION_APPROVER","fullName":"REALIZATION_APPROVER","id":"REALIZATION_APPROVER","roledesc":"Receipt Realization Approver","$$hashKey":"object:4163"}}}},"additionalforms":"","formkeydefinition":"","allowrevert":"","prioritydefinition":"Role Queue","baseactor":"","duedatedefinition":"","multiinstance_type":"None","isforcompensation":"false"},"stencil":{"id":"UserTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-BDFB0293-6049-4ADD-A4E4-8614B1A2695E"}],"bounds":{"lowerRight":{"x":475,"y":200},"upperLeft":{"x":375,"y":120}},"dockers":[]},{"resourceId":"sid-C2A0D788-CAAD-435C-96F7-7D40AF427183","properties":{"overrideid":"","name":"","sequencefloworder":""},"stencil":{"id":"ExclusiveGateway"},"childShapes":[],"outgoing":[{"resourceId":"sid-3F5EE5DB-3C55-4DFB-B58A-68A9E5878576"},{"resourceId":"sid-4517ED81-48A5-4D13-ABEC-66F8E7B52EA4"},{"resourceId":"sid-14F9F72A-9DFC-4EFC-90B1-B944B4B056B1"}],"bounds":{"lowerRight":{"x":595,"y":198},"upperLeft":{"x":555,"y":158}},"dockers":[]},{"resourceId":"sid-BDFB0293-6049-4ADD-A4E4-8614B1A2695E","properties":{"overrideid":"","name":"","repruseaction":"false","conditionsequenceflow":"","defaultflow":"false","action":"","state":"","mandatenotes":"false","capturereasons":"false","typeofreason":"","constraint":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-C2A0D788-CAAD-435C-96F7-7D40AF427183"}],"bounds":{"lowerRight":{"x":554.6484375,"y":178.5},"upperLeft":{"x":475.21875,"y":160}},"dockers":[{"x":50,"y":40},{"x":515,"y":160},{"x":515,"y":178.5},{"x":20.5,"y":20.5}],"target":{"resourceId":"sid-C2A0D788-CAAD-435C-96F7-7D40AF427183"}},{"resourceId":"sid-E1CFEA10-5D23-401C-84D6-ECAE8358B97F","properties":{"overrideid":"","name":"Approved"},"stencil":{"id":"EndNoneEvent"},"childShapes":[],"outgoing":[],"bounds":{"lowerRight":{"x":883,"y":192},"upperLeft":{"x":855,"y":164}},"dockers":[]},{"resourceId":"sid-15491E20-CFDF-43EB-9D21-0344D806F7EF","properties":{"overrideid":"","name":"","repruseaction":"false","conditionsequenceflow":"","defaultflow":"false","action":"","state":"","mandatenotes":"false","capturereasons":"false","typeofreason":"","constraint":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-E1CFEA10-5D23-401C-84D6-ECAE8358B97F"}],"bounds":{"lowerRight":{"x":854.8984375,"y":178},"upperLeft":{"x":790.3828125,"y":178}},"dockers":[{"x":50,"y":40},{"x":14,"y":14}],"target":{"resourceId":"sid-E1CFEA10-5D23-401C-84D6-ECAE8358B97F"}},{"resourceId":"sid-15C38508-5AB6-427B-892C-706C96A21AE8","properties":{"overrideid":"","name":"Complete Process","rerunnable":"true","servicetaskexpression":"doApprove","isforcompensation":"false","multiinstance_type":"None","parameters":"","additionalforms":"","formkeydefinition":"","type":"http://b3mn.org/stencilset/bpmn2.0#UserTask","usertaskassignment":"","baseactor":"","duedatedefinition":"","prioritydefinition":"Role Queue"},"stencil":{"id":"approveTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-15491E20-CFDF-43EB-9D21-0344D806F7EF"}],"bounds":{"lowerRight":{"x":790,"y":218},"upperLeft":{"x":690,"y":138}},"dockers":[]},{"resourceId":"sid-6537DD5F-7560-4994-BA64-D97E58BF26FF","properties":{"overrideid":"","name":"Cancel Process","rerunnable":"true","servicetaskexpression":"doReject","isforcompensation":"false","multiinstance_type":"None","parameters":"","additionalforms":"","formkeydefinition":"","type":"http://b3mn.org/stencilset/bpmn2.0#UserTask","usertaskassignment":"","baseactor":"","duedatedefinition":"","prioritydefinition":"Role Queue"},"stencil":{"id":"rejectTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-47DBF327-A43E-4888-8FBA-9E67CBA31D60"}],"bounds":{"lowerRight":{"x":625,"y":395},"upperLeft":{"x":525,"y":315}},"dockers":[]},{"resourceId":"sid-A005A04A-54B8-4579-9037-36C71E4B3740","properties":{"overrideid":"","name":"Rejected"},"stencil":{"id":"EndNoneEvent"},"childShapes":[],"outgoing":[],"bounds":{"lowerRight":{"x":733,"y":369},"upperLeft":{"x":705,"y":341}},"dockers":[]},{"resourceId":"sid-47DBF327-A43E-4888-8FBA-9E67CBA31D60","properties":{"overrideid":"","name":"","repruseaction":"false","conditionsequenceflow":"","defaultflow":"false","action":"","state":"","mandatenotes":"false","capturereasons":"false","typeofreason":"","constraint":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-A005A04A-54B8-4579-9037-36C71E4B3740"}],"bounds":{"lowerRight":{"x":704.5,"y":355},"upperLeft":{"x":625.5,"y":355}},"dockers":[{"x":50,"y":40},{"x":14,"y":14}],"target":{"resourceId":"sid-A005A04A-54B8-4579-9037-36C71E4B3740"}},{"resourceId":"sid-14F9F72A-9DFC-4EFC-90B1-B944B4B056B1","properties":{"overrideid":"","name":"Redubmit","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Resubmitted'"}},"defaultflow":"false","action":"Resubmit","state":"Resubmitted","mandatenotes":true,"capturereasons":"false","typeofreason":"","constraint":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-14808928-0356-41A2-ABB2-43BBB6C9A2FF"}],"bounds":{"lowerRight":{"x":575.5,"y":157.8203125},"upperLeft":{"x":245,"y":64}},"dockers":[{"x":20.5,"y":20.5},{"x":575.5,"y":64},{"x":245,"y":64},{"x":50,"y":40}],"target":{"resourceId":"sid-14808928-0356-41A2-ABB2-43BBB6C9A2FF"}},{"resourceId":"sid-9DCE5390-479F-408E-B60F-A63911F36121","properties":{"overrideid":"","name":"Cancel","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Cancelled'"}},"defaultflow":"false","action":"Cancel","state":"Cancelled","mandatenotes":true,"capturereasons":"false","typeofreason":"","constraint":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-6537DD5F-7560-4994-BA64-D97E58BF26FF"}],"bounds":{"lowerRight":{"x":524.37109375,"y":355},"upperLeft":{"x":245,"y":218.41015625}},"dockers":[{"x":50,"y":40},{"x":245,"y":355},{"x":50,"y":40}],"target":{"resourceId":"sid-6537DD5F-7560-4994-BA64-D97E58BF26FF"}},{"resourceId":"sid-0CF47C5E-A7ED-4511-B808-1A9579529B04","properties":{"overrideid":"","name":"Submit","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Submitted'"}},"defaultflow":"false","action":"Submit","state":"Submitted","mandatenotes":"false","capturereasons":"false","typeofreason":"","constraint":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-B48EC03F-6765-429C-AC1B-2D5E10B88525"}],"bounds":{"lowerRight":{"x":374.78125,"y":178},"upperLeft":{"x":295.21875,"y":160}},"dockers":[{"x":50,"y":40},{"x":335,"y":178},{"x":335,"y":160},{"x":50,"y":40}],"target":{"resourceId":"sid-B48EC03F-6765-429C-AC1B-2D5E10B88525"}},{"resourceId":"sid-3F5EE5DB-3C55-4DFB-B58A-68A9E5878576","properties":{"overrideid":"","name":"Approve","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Approved'"}},"defaultflow":"false","action":"Approve","state":"Approved","mandatenotes":false,"capturereasons":"false","typeofreason":"","constraint":"","showdiamondmarker":false},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-15C38508-5AB6-427B-892C-706C96A21AE8"}],"bounds":{"lowerRight":{"x":689.5214889942897,"y":178.43836675036258},"upperLeft":{"x":595.7773391307103,"y":178.15343012463742}},"dockers":[{"x":20.5,"y":20.5},{"x":50,"y":40}],"target":{"resourceId":"sid-15C38508-5AB6-427B-892C-706C96A21AE8"}},{"resourceId":"sid-4517ED81-48A5-4D13-ABEC-66F8E7B52EA4","properties":{"overrideid":"","name":"Reject","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Rejected'"}},"defaultflow":"false","action":"Reject","state":"Rejected","mandatenotes":true,"capturereasons":"false","typeofreason":"","constraint":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-6537DD5F-7560-4994-BA64-D97E58BF26FF"}],"bounds":{"lowerRight":{"x":575.4424796501771,"y":314.0117227625271},"upperLeft":{"x":575.1161140998229,"y":198.8046834874729}},"dockers":[{"x":20.5,"y":20.5},{"x":50,"y":40}],"target":{"resourceId":"sid-6537DD5F-7560-4994-BA64-D97E58BF26FF"}}],"bounds":{"lowerRight":{"x":1200,"y":1050},"upperLeft":{"x":0,"y":0}},"stencilset":{"url":"stencilsets/bpmn2.0/bpmn2.0.json","namespace":"http://b3mn.org/stencilset/bpmn2.0#"},"ssextensions":[]}]]></column>
			<column name="WORKFLOWXML" type="CLOB"><![CDATA[<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:activiti="http://activiti.org/bpmn" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI" typeLanguage="http://www.w3.org/2001/XMLSchema" expressionLanguage="http://www.w3.org/1999/XPath" targetNamespace="http://activiti.org/test">
  <process id="RECEIPT_REALIZATION" name="Receipt Realization Workflow Process" isExecutable="true">
    <documentation>Maker/checker for Receipt Realization Workflow</documentation>
    <startEvent id="startEvent1" name="Start"/>
    <userTask id="sid-14808928-0356-41A2-ABB2-43BBB6C9A2FF" name="Maker" activiti:actor="REALIZATION_MAKER" activiti:assignmentLevel="Role Queue"/>
    <sequenceFlow id="sid-B0987088-653D-4102-AE24-C76DEC0A872C" sourceRef="startEvent1" targetRef="sid-14808928-0356-41A2-ABB2-43BBB6C9A2FF" representsUserAction="false" mandateNotes="false" captureReasons="false"/>
    <userTask id="sid-B48EC03F-6765-429C-AC1B-2D5E10B88525" name="Approver" activiti:actor="REALIZATION_APPROVER" activiti:assignmentLevel="Role Queue"/>
    <exclusiveGateway id="sid-C2A0D788-CAAD-435C-96F7-7D40AF427183"/>
    <sequenceFlow id="sid-BDFB0293-6049-4ADD-A4E4-8614B1A2695E" sourceRef="sid-B48EC03F-6765-429C-AC1B-2D5E10B88525" targetRef="sid-C2A0D788-CAAD-435C-96F7-7D40AF427183" representsUserAction="false" mandateNotes="false" captureReasons="false"/>
    <endEvent id="sid-E1CFEA10-5D23-401C-84D6-ECAE8358B97F" name="Approved"/>
    <sequenceFlow id="sid-15491E20-CFDF-43EB-9D21-0344D806F7EF" sourceRef="sid-15C38508-5AB6-427B-892C-706C96A21AE8" targetRef="sid-E1CFEA10-5D23-401C-84D6-ECAE8358B97F" representsUserAction="false" mandateNotes="false" captureReasons="false"/>
    <serviceTask id="sid-15C38508-5AB6-427B-892C-706C96A21AE8" name="Complete Process" activiti:operation="doApprove" activiti:rerunnable="true"/>
    <serviceTask id="sid-6537DD5F-7560-4994-BA64-D97E58BF26FF" name="Cancel Process" activiti:operation="doReject" activiti:rerunnable="true"/>
    <endEvent id="sid-A005A04A-54B8-4579-9037-36C71E4B3740" name="Rejected"/>
    <sequenceFlow id="sid-47DBF327-A43E-4888-8FBA-9E67CBA31D60" sourceRef="sid-6537DD5F-7560-4994-BA64-D97E58BF26FF" targetRef="sid-A005A04A-54B8-4579-9037-36C71E4B3740" representsUserAction="false" mandateNotes="false" captureReasons="false"/>
    <sequenceFlow id="sid-14F9F72A-9DFC-4EFC-90B1-B944B4B056B1" name="Redubmit" sourceRef="sid-C2A0D788-CAAD-435C-96F7-7D40AF427183" targetRef="sid-14808928-0356-41A2-ABB2-43BBB6C9A2FF" action="Resubmit" state="Resubmitted" representsUserAction="true" mandateNotes="true" captureReasons="false">
      <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Resubmitted'</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-9DCE5390-479F-408E-B60F-A63911F36121" name="Cancel" sourceRef="sid-14808928-0356-41A2-ABB2-43BBB6C9A2FF" targetRef="sid-6537DD5F-7560-4994-BA64-D97E58BF26FF" action="Cancel" state="Cancelled" representsUserAction="true" mandateNotes="true" captureReasons="false">
      <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Cancelled'</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-0CF47C5E-A7ED-4511-B808-1A9579529B04" name="Submit" sourceRef="sid-14808928-0356-41A2-ABB2-43BBB6C9A2FF" targetRef="sid-B48EC03F-6765-429C-AC1B-2D5E10B88525" action="Submit" state="Submitted" representsUserAction="true" mandateNotes="false" captureReasons="false">
      <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Submitted'</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-3F5EE5DB-3C55-4DFB-B58A-68A9E5878576" name="Approve" sourceRef="sid-C2A0D788-CAAD-435C-96F7-7D40AF427183" targetRef="sid-15C38508-5AB6-427B-892C-706C96A21AE8" action="Approve" state="Approved" representsUserAction="true" mandateNotes="false" captureReasons="false">
      <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Approved'</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-4517ED81-48A5-4D13-ABEC-66F8E7B52EA4" name="Reject" sourceRef="sid-C2A0D788-CAAD-435C-96F7-7D40AF427183" targetRef="sid-6537DD5F-7560-4994-BA64-D97E58BF26FF" action="Reject" state="Rejected" representsUserAction="true" mandateNotes="true" captureReasons="false">
      <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Rejected'</conditionExpression>
    </sequenceFlow>
  </process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_RECEIPT_REALIZATION">
    <bpmndi:BPMNPlane bpmnElement="RECEIPT_REALIZATION" id="BPMNPlane_RECEIPT_REALIZATION">
      <bpmndi:BPMNShape bpmnElement="startEvent1" id="BPMNShape_startEvent1">
        <omgdc:Bounds height="30.0" width="30.0" x="100.0" y="163.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-14808928-0356-41A2-ABB2-43BBB6C9A2FF" id="BPMNShape_sid-14808928-0356-41A2-ABB2-43BBB6C9A2FF">
        <omgdc:Bounds height="80.0" width="100.0" x="195.0" y="138.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-B48EC03F-6765-429C-AC1B-2D5E10B88525" id="BPMNShape_sid-B48EC03F-6765-429C-AC1B-2D5E10B88525">
        <omgdc:Bounds height="80.0" width="100.0" x="375.0" y="120.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-C2A0D788-CAAD-435C-96F7-7D40AF427183" id="BPMNShape_sid-C2A0D788-CAAD-435C-96F7-7D40AF427183">
        <omgdc:Bounds height="40.0" width="40.0" x="555.0" y="158.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-E1CFEA10-5D23-401C-84D6-ECAE8358B97F" id="BPMNShape_sid-E1CFEA10-5D23-401C-84D6-ECAE8358B97F">
        <omgdc:Bounds height="28.0" width="28.0" x="855.0" y="164.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-15C38508-5AB6-427B-892C-706C96A21AE8" id="BPMNShape_sid-15C38508-5AB6-427B-892C-706C96A21AE8">
        <omgdc:Bounds height="80.0" width="100.0" x="690.0" y="138.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-6537DD5F-7560-4994-BA64-D97E58BF26FF" id="BPMNShape_sid-6537DD5F-7560-4994-BA64-D97E58BF26FF">
        <omgdc:Bounds height="80.0" width="100.0" x="525.0" y="315.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-A005A04A-54B8-4579-9037-36C71E4B3740" id="BPMNShape_sid-A005A04A-54B8-4579-9037-36C71E4B3740">
        <omgdc:Bounds height="28.0" width="28.0" x="705.0" y="341.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge bpmnElement="sid-4517ED81-48A5-4D13-ABEC-66F8E7B52EA4" id="BPMNEdge_sid-4517ED81-48A5-4D13-ABEC-66F8E7B52EA4">
        <omgdi:waypoint x="575.4460227272727" y="197.55397727272728"/>
        <omgdi:waypoint x="575.1133144475921" y="315.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-47DBF327-A43E-4888-8FBA-9E67CBA31D60" id="BPMNEdge_sid-47DBF327-A43E-4888-8FBA-9E67CBA31D60">
        <omgdi:waypoint x="625.0" y="355.0"/>
        <omgdi:waypoint x="705.0" y="355.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-B0987088-653D-4102-AE24-C76DEC0A872C" id="BPMNEdge_sid-B0987088-653D-4102-AE24-C76DEC0A872C">
        <omgdi:waypoint x="130.0" y="178.0"/>
        <omgdi:waypoint x="195.0" y="178.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-14F9F72A-9DFC-4EFC-90B1-B944B4B056B1" id="BPMNEdge_sid-14F9F72A-9DFC-4EFC-90B1-B944B4B056B1">
        <omgdi:waypoint x="575.5" y="158.5"/>
        <omgdi:waypoint x="575.5" y="64.0"/>
        <omgdi:waypoint x="245.0" y="64.0"/>
        <omgdi:waypoint x="245.0" y="138.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-3F5EE5DB-3C55-4DFB-B58A-68A9E5878576" id="BPMNEdge_sid-3F5EE5DB-3C55-4DFB-B58A-68A9E5878576">
        <omgdi:waypoint x="594.5579268292682" y="178.4420731707317"/>
        <omgdi:waypoint x="690.0" y="178.15197568389058"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-BDFB0293-6049-4ADD-A4E4-8614B1A2695E" id="BPMNEdge_sid-BDFB0293-6049-4ADD-A4E4-8614B1A2695E">
        <omgdi:waypoint x="475.0" y="160.0"/>
        <omgdi:waypoint x="515.0" y="160.0"/>
        <omgdi:waypoint x="515.0" y="178.5"/>
        <omgdi:waypoint x="555.5" y="178.5"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-9DCE5390-479F-408E-B60F-A63911F36121" id="BPMNEdge_sid-9DCE5390-479F-408E-B60F-A63911F36121">
        <omgdi:waypoint x="245.0" y="218.0"/>
        <omgdi:waypoint x="245.0" y="355.0"/>
        <omgdi:waypoint x="525.0" y="355.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-15491E20-CFDF-43EB-9D21-0344D806F7EF" id="BPMNEdge_sid-15491E20-CFDF-43EB-9D21-0344D806F7EF">
        <omgdi:waypoint x="790.0" y="178.0"/>
        <omgdi:waypoint x="855.0" y="178.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-0CF47C5E-A7ED-4511-B808-1A9579529B04" id="BPMNEdge_sid-0CF47C5E-A7ED-4511-B808-1A9579529B04">
        <omgdi:waypoint x="295.0" y="178.0"/>
        <omgdi:waypoint x="335.0" y="178.0"/>
        <omgdi:waypoint x="335.0" y="160.0"/>
        <omgdi:waypoint x="375.0" y="160.0"/>
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</definitions>]]></column>
			<where>workflowtype='RECEIPT_REALIZATION' and workflowactive=1
			</where>
		</update>
	</changeSet>

	<changeSet id="44" author="bharat">
		<addColumn tableName="FINREPAYHEADER">
			<column name="FeeAmount" type="decimal(18,0)" />
		</addColumn>
		<addColumn tableName="FINREPAYHEADER_TEMP">
			<column name="FeeAmount" type="decimal(18,0)" />
		</addColumn>
	</changeSet>
	

	<changeSet id="44.1_pre" author="satyanarayana.g">
		<sql>
			<![CDATA[
				UPDATE FINREPAYHEADER set FEEAMOUNT = 0 where FEEAMOUNT is null;
				UPDATE FINREPAYHEADER_TEMP set FEEAMOUNT = 0 where FEEAMOUNT is null;
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="44.1" author="satyanarayana.g" dbms="mssql">
		<sql>
			<![CDATA[
				ALTER TABLE FINREPAYHEADER ADD CONSTRAINT DF_FINREPAYHEADER_FEEAMOUNT DEFAULT 0 FOR FEEAMOUNT;
				ALTER TABLE FINREPAYHEADER_TEMP ADD CONSTRAINT DF_FINREPAYHEADER_TEMP_FEEAMOUNT DEFAULT 0 FOR FEEAMOUNT;
			]]>
		</sql>
	</changeSet>

	<changeSet id="44.1" author="satyanarayana.g" dbms="postgresql, oracle">
		<addDefaultValue columnName="FEEAMOUNT" tableName="FINREPAYHEADER" defaultValue="0" />
		<addDefaultValue columnName="FEEAMOUNT" tableName="FINREPAYHEADER_TEMP" defaultValue="0" />
	</changeSet>

	<changeSet id="44.2" author="shinde.b">
		<addNotNullConstraint tableName="FINREPAYHEADER" columnName="FEEAMOUNT" columnDataType="decimal(18,0)" />
		<addNotNullConstraint tableName="FINREPAYHEADER_TEMP" columnName="FEEAMOUNT" columnDataType="decimal(18,0)" />
	</changeSet>

	<changeSet id="45" author="satyanarayana.g">
		<createView viewName="GL_SUBHEADCODES_VIEW" replaceIfExists="true">
			SELECT FM.FINREFERENCE,
					  NULL ENTITYCODE,
					  0 ALWFLEXI,
					  FM.FINBRANCH,
					  NULL btloan,
					  BV.CODE Businessvertical,
					  CUST.SUBCATEGORY EmpType,
					  PC.PCCITYNAME BranchCity,
					  FT.FINCOLLATERALREQ,
					  RF.FINDIVISION
					FROM FINANCEMAIN_TEMP FM
					INNER JOIN RMTFINANCETYPES FT ON FM.Fintype = FT.FinType
					INNER JOIN CUSTOMERS CUST ON CUST.CUSTID = FM.CUSTID
					INNER JOIN RMTBranches BR ON BR.BranchCode = FM.FINBRANCH
					INNER JOIN RMTPROVINCEVSCITY PC ON PC.PCCITY = BR.BRANCHCITY
					LEFT JOIN BUSINESS_VERTICAL BV ON BV.ID = FM.BUSINESSVERTICAL
					INNER JOIN RMTFinanceTypes RF ON RF.FINTYPE = FM.FINTYPE
					UNION ALL
					SELECT FM.FINREFERENCE,
					  NULL ENTITYCODE,
					  0 ALWFLEXI,
					  FM.FINBRANCH,
					  NULL btloan,
					  BV.CODE Businessvertical,
					  CUST.SUBCATEGORY EmpType,
					  PC.PCCITYNAME BranchCity,
					  FT.FINCOLLATERALREQ,
					  RF.FINDIVISION
					FROM FINANCEMAIN FM
					INNER JOIN RMTFINANCETYPES FT ON FM.Fintype = FT.FinType
					INNER JOIN CUSTOMERS CUST ON CUST.CUSTID = FM.CUSTID
					INNER JOIN RMTBranches BR ON BR.BranchCode = FM.FINBRANCH
					INNER JOIN RMTPROVINCEVSCITY PC ON PC.PCCITY = BR.BRANCHCITY
					INNER JOIN BUSINESS_VERTICAL BV ON BV.ID = FM.BUSINESSVERTICAL
					INNER JOIN RMTFinanceTypes RF ON RF.FINTYPE = FM.FINTYPE
					WHERE NOT EXISTS
					  (SELECT 1 FROM FINANCEMAIN_TEMP WHERE FINREFERENCE = FM.FINREFERENCE
					  )
		</createView>
	</changeSet>

	<changeSet id="46" author="satyanarayana.g">
		<createView viewName="FINANCEMAIN_DATAVIEW" replaceIfExists="true">
			SELECT T1.FINREFERENCE,
				   T1.FINTYPE,
				   T2.CUSTCIF LOVDESCCUSTCIF,
				   T1.FINISACTIVE,
				   T1.CUSTID
				   FROM FINANCEMAIN T1
				   INNER JOIN CUSTOMERS T2 ON T1.CUSTID = T2.CUSTID
				   INNER JOIN RMTFINANCETYPES T3 ON T3.FINTYPE = T1.FINTYPE
		</createView>
	</changeSet>

	<changeSet id="47" author="satyanarayana.g">
		<comment>New View created for Upfront Receipt cancellation list screen</comment>
		<createView viewName="FinReceiptHeader_FCDView" replaceIfExists="true">
			SELECT T1.RECEIPTID,
			T1.RECEIPTDATE,
			T1.RECEIPTTYPE,
			T1.RECAGAINST,
			(
			CASE
			WHEN T1.RECAGAINST ='C'
			THEN T13.CUSTCIF
			ELSE T1.REFERENCE
			END) REFERENCE,
			T1.RECEIPTPURPOSE,
			T1.RECEIPTMODE,
			T1.EXCESSADJUSTTO,
			T1.ALLOCATIONTYPE,
			T1.RECEIPTAMOUNT,
			T1.EFFECTSCHDMETHOD,
			T1.RECEIPTMODESTATUS,
			T1.SUBRECEIPTMODE,
			T1.RECEIPTCHANNEL,
			T1.RECEIVEDFROM,
			T1.PANNUMBER,
			T1.COLLECTIONAGENTID,
			T1.VERSION,
			T1.LASTMNTBY,
			T1.LASTMNTON,
			T1.RECORDSTATUS,
			T1.ROLECODE,
			T1.NEXTROLECODE,
			T1.TASKID,
			T1.NEXTTASKID,
			T1.RECORDTYPE,
			T1.WORKFLOWID,
			T2.FINTYPE,
			T2.FINBRANCH,
			T3.CUSTCIF,
			T3.CUSTSHRTNAME,
			T2.FINCCY,
			T1.REALIZATIONDATE,
			T1.CANCELREASON,
			T4.FINTYPEDESC,
			T6.BRANCHDESC FINBRANCHDESC,
			T5.CCYDESC FINCCYDESC,
			T7.REJECTDESC CANCELREASONDESC,
			COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
			T2.SCHEDULEMETHOD,
			T2.PROFITDAYSBASIS PFTDAYSBASIS,
			T1.WAVIEDAMT,
			COALESCE(T3.CUSTID, 0) CUSTID,
			T1.TOTFEEAMOUNT,
			T1.BOUNCEDATE,
			T1.REMARKS,
			T1.RCDMAINTAINSTS,
			T1.DEPOSITPROCESS,
			T1.DEPOSITBRANCH,
			T1.LPIAMOUNT,
			T1.LPPAMOUNT,
			T1.GSTLPIAMOUNT,
			T1.GSTLPPAMOUNT,
			T1.GDRAVAILABLE,
			T1.RELEASETYPE,
			T1.THIRDPARTYNAME,
			T1.THIRDPARTYMOBILENUM,
			T2.PRODUCTCATEGORY,
			T2.PROMOTIONCODE,
			(
			CASE
			WHEN T8.PAYMENTTYPE IN ('CHEQUE', 'DD')
			THEN T8.FAVOURNUMBER
			ELSE T8.TRANSACTIONREF
			END ) TRANSACTIONREF,
			T2.NEXTREPAYRVWDATE,
			T1.CASHIERBRANCH,
			T1.INITIATEDATE,
			T1.INSTRUCTIONUID,
			T1.FINDIVISION,
			T1.POSTBRANCH,
			T10.DIVISIONCODEDESC FINDIVISIONDESC,
			T11.BRANCHDESC POSTBRANCHDESC,
			T12.BRANCHDESC CASHIERBRANCHDESC,
			T10.ENTITYCODE,
			T9.CODE COLLECTIONAGENTCODE,
			T9.DESCRIPTION COLLECTIONAGENTDESC,
			T1.MODULE,
			T1.EXTREFERENCE,
			T13.CUSTCIF CUSTOMERCIF,
			T13.CUSTSHRTNAME CUSTOMERNAME
			FROM FINRECEIPTHEADER_TEMP T1
			LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.REFERENCE = T2.FINREFERENCE
			LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
			LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
			LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
			LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
			LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
			LEFT JOIN FINRECEIPTDETAIL T8 ON T1.RECEIPTID = T8.RECEIPTID AND T1.RECEIPTMODE = T8.PAYMENTTYPE
			LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
			LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
			LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
			LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
			LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
			UNION ALL
			SELECT T1.RECEIPTID,
			T1.RECEIPTDATE,
			T1.RECEIPTTYPE,
			T1.RECAGAINST,
			(
			CASE
			WHEN T1.RECAGAINST ='C'
			THEN T13.CUSTCIF
			ELSE T1.REFERENCE
			END) REFERENCE,
			T1.RECEIPTPURPOSE,
			T1.RECEIPTMODE,
			T1.EXCESSADJUSTTO,
			T1.ALLOCATIONTYPE,
			T1.RECEIPTAMOUNT,
			T1.EFFECTSCHDMETHOD,
			T1.RECEIPTMODESTATUS,
			T1.SUBRECEIPTMODE,
			T1.RECEIPTCHANNEL,
			T1.RECEIVEDFROM,
			T1.PANNUMBER,
			T1.COLLECTIONAGENTID,
			T1.VERSION,
			T1.LASTMNTBY,
			T1.LASTMNTON,
			T1.RECORDSTATUS,
			T1.ROLECODE,
			T1.NEXTROLECODE,
			T1.TASKID,
			T1.NEXTTASKID,
			T1.RECORDTYPE,
			T1.WORKFLOWID,
			T2.FINTYPE,
			T2.FINBRANCH,
			T3.CUSTCIF,
			T3.CUSTSHRTNAME,
			T2.FINCCY,
			T1.REALIZATIONDATE,
			T1.CANCELREASON,
			T4.FINTYPEDESC,
			T6.BRANCHDESC FINBRANCHDESC,
			T5.CCYDESC FINCCYDESC,
			T7.REJECTDESC CANCELREASONDESC,
			COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
			T2.SCHEDULEMETHOD,
			T2.PROFITDAYSBASIS PFTDAYSBASIS,
			T1.WAVIEDAMT,
			COALESCE(T3.CUSTID, 0) CUSTID,
			T1.TOTFEEAMOUNT,
			T1.BOUNCEDATE,
			T1.REMARKS,
			T1.RCDMAINTAINSTS,
			T1.DEPOSITPROCESS,
			T1.DEPOSITBRANCH,
			T1.LPIAMOUNT,
			T1.LPPAMOUNT,
			T1.GSTLPIAMOUNT,
			T1.GSTLPPAMOUNT,
			T1.GDRAVAILABLE,
			T1.RELEASETYPE,
			T1.THIRDPARTYNAME,
			T1.THIRDPARTYMOBILENUM,
			T2.PRODUCTCATEGORY,
			T2.PROMOTIONCODE,
			(
			CASE
			WHEN T8.PAYMENTTYPE IN ('CHEQUE', 'DD')
			THEN T8.FAVOURNUMBER
			ELSE T8.TRANSACTIONREF
			END) TRANSACTIONREF,
			T2.NEXTREPAYRVWDATE,
			T1.CASHIERBRANCH,
			T1.INITIATEDATE,
			T1.INSTRUCTIONUID,
			T1.FINDIVISION,
			T1.POSTBRANCH,
			T10.DIVISIONCODEDESC FINDIVISIONDESC,
			T11.BRANCHDESC POSTBRANCHDESC,
			T12.BRANCHDESC CASHIERBRANCHDESC,
			T10.ENTITYCODE,
			T9.CODE COLLECTIONAGENTCODE,
			T9.DESCRIPTION COLLECTIONAGENTDESC,
			T1.MODULE,
			T1.EXTREFERENCE,
			T13.CUSTCIF CUSTOMERCIF,
			T13.CUSTSHRTNAME CUSTOMERNAME
			FROM FINRECEIPTHEADER T1
			LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.REFERENCE = T2.FINREFERENCE
			LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
			LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
			LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
			LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
			LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
			LEFT JOIN FINRECEIPTDETAIL T8 ON T1.RECEIPTID = T8.RECEIPTID AND T1.RECEIPTMODE = T8.PAYMENTTYPE
			LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
			LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
			LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
			LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
			LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
			WHERE NOT EXISTS
			( SELECT 1 FROM FINRECEIPTHEADER_TEMP WHERE RECEIPTID = T1.RECEIPTID
			)
		</createView>
	</changeSet>

	<changeSet id="48" author="satyanarayana.g">
		<comment>New View created for Upfront Receipt cancellation list screen</comment>
		<createView viewName="FinReceiptHeader_FEDView" replaceIfExists="true">
			SELECT T1.RECEIPTID,
			T1.RECEIPTDATE,
			T1.RECEIPTTYPE,
			T1.RECAGAINST,
			(
			CASE
			WHEN T1.RECAGAINST ='C'
			THEN T13.CUSTCIF
			ELSE T1.REFERENCE
			END) REFERENCE,
			T1.RECEIPTPURPOSE,
			T1.RECEIPTMODE,
			T1.EXCESSADJUSTTO,
			T1.ALLOCATIONTYPE,
			T1.RECEIPTAMOUNT,
			T1.EFFECTSCHDMETHOD,
			T1.RECEIPTMODESTATUS,
			T1.SUBRECEIPTMODE,
			T1.RECEIPTCHANNEL,
			T1.RECEIVEDFROM,
			T1.PANNUMBER,
			T1.COLLECTIONAGENTID,
			T1.VERSION,
			T1.LASTMNTBY,
			T1.LASTMNTON,
			T1.RECORDSTATUS,
			T1.ROLECODE,
			T1.NEXTROLECODE,
			T1.TASKID,
			T1.NEXTTASKID,
			T1.RECORDTYPE,
			T1.WORKFLOWID,
			T2.FINTYPE,
			T2.FINBRANCH,
			T3.CUSTCIF,
			T3.CUSTSHRTNAME,
			T2.FINCCY,
			T1.REALIZATIONDATE,
			T1.CANCELREASON,
			T4.FINTYPEDESC,
			T6.BRANCHDESC FINBRANCHDESC,
			T5.CCYDESC FINCCYDESC,
			T7.REJECTDESC CANCELREASONDESC,
			COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
			T2.SCHEDULEMETHOD,
			T2.PROFITDAYSBASIS PFTDAYSBASIS,
			T1.WAVIEDAMT,
			COALESCE(T3.CUSTID, 0) CUSTID,
			T1.TOTFEEAMOUNT,
			T1.BOUNCEDATE,
			T1.REMARKS,
			T1.RCDMAINTAINSTS,
			T1.DEPOSITPROCESS,
			T1.DEPOSITBRANCH,
			T1.LPIAMOUNT,
			T1.LPPAMOUNT,
			T1.GSTLPIAMOUNT,
			T1.GSTLPPAMOUNT,
			T1.GDRAVAILABLE,
			T1.RELEASETYPE,
			T1.THIRDPARTYNAME,
			T1.THIRDPARTYMOBILENUM,
			T2.PRODUCTCATEGORY,
			T2.PROMOTIONCODE,
			(
			CASE
			WHEN T8.PAYMENTTYPE IN ('CHEQUE', 'DD')
			THEN T8.FAVOURNUMBER
			ELSE T8.TRANSACTIONREF
			END ) TRANSACTIONREF,
			T2.NEXTREPAYRVWDATE,
			T1.CASHIERBRANCH,
			T1.INITIATEDATE,
			T1.INSTRUCTIONUID,
			T1.FINDIVISION,
			T1.POSTBRANCH,
			T10.DIVISIONCODEDESC FINDIVISIONDESC,
			T11.BRANCHDESC POSTBRANCHDESC,
			T12.BRANCHDESC CASHIERBRANCHDESC,
			T10.ENTITYCODE,
			T9.CODE COLLECTIONAGENTCODE,
			T9.DESCRIPTION COLLECTIONAGENTDESC,
			T1.MODULE,
			T1.EXTREFERENCE,
			T13.CUSTCIF CUSTOMERCIF,
			T13.CUSTSHRTNAME CUSTOMERNAME
			FROM FINRECEIPTHEADER_TEMP T1
			LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.REFERENCE = T2.FINREFERENCE
			LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
			LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
			LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
			LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
			LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
			LEFT JOIN FINRECEIPTDETAIL T8 ON T1.RECEIPTID = T8.RECEIPTID AND T1.RECEIPTMODE = T8.PAYMENTTYPE
			LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
			LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
			LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
			LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
			LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
			UNION ALL
			SELECT T1.RECEIPTID,
			T1.RECEIPTDATE,
			T1.RECEIPTTYPE,
			T1.RECAGAINST,
			(
			CASE
			WHEN T1.RECAGAINST ='C'
			THEN T13.CUSTCIF
			ELSE T1.REFERENCE
			END) REFERENCE,
			T1.RECEIPTPURPOSE,
			T1.RECEIPTMODE,
			T1.EXCESSADJUSTTO,
			T1.ALLOCATIONTYPE,
			T1.RECEIPTAMOUNT,
			T1.EFFECTSCHDMETHOD,
			T1.RECEIPTMODESTATUS,
			T1.SUBRECEIPTMODE,
			T1.RECEIPTCHANNEL,
			T1.RECEIVEDFROM,
			T1.PANNUMBER,
			T1.COLLECTIONAGENTID,
			T1.VERSION,
			T1.LASTMNTBY,
			T1.LASTMNTON,
			T1.RECORDSTATUS,
			T1.ROLECODE,
			T1.NEXTROLECODE,
			T1.TASKID,
			T1.NEXTTASKID,
			T1.RECORDTYPE,
			T1.WORKFLOWID,
			T2.FINTYPE,
			T2.FINBRANCH,
			T3.CUSTCIF,
			T3.CUSTSHRTNAME,
			T2.FINCCY,
			T1.REALIZATIONDATE,
			T1.CANCELREASON,
			T4.FINTYPEDESC,
			T6.BRANCHDESC FINBRANCHDESC,
			T5.CCYDESC FINCCYDESC,
			T7.REJECTDESC CANCELREASONDESC,
			COALESCE(T2.FINISACTIVE, 0) FINISACTIVE,
			T2.SCHEDULEMETHOD,
			T2.PROFITDAYSBASIS PFTDAYSBASIS,
			T1.WAVIEDAMT,
			COALESCE(T3.CUSTID, 0) CUSTID,
			T1.TOTFEEAMOUNT,
			T1.BOUNCEDATE,
			T1.REMARKS,
			T1.RCDMAINTAINSTS,
			T1.DEPOSITPROCESS,
			T1.DEPOSITBRANCH,
			T1.LPIAMOUNT,
			T1.LPPAMOUNT,
			T1.GSTLPIAMOUNT,
			T1.GSTLPPAMOUNT,
			T1.GDRAVAILABLE,
			T1.RELEASETYPE,
			T1.THIRDPARTYNAME,
			T1.THIRDPARTYMOBILENUM,
			T2.PRODUCTCATEGORY,
			T2.PROMOTIONCODE,
			(
			CASE
			WHEN T8.PAYMENTTYPE IN ('CHEQUE', 'DD')
			THEN T8.FAVOURNUMBER
			ELSE T8.TRANSACTIONREF
			END) TRANSACTIONREF,
			T2.NEXTREPAYRVWDATE,
			T1.CASHIERBRANCH,
			T1.INITIATEDATE,
			T1.INSTRUCTIONUID,
			T1.FINDIVISION,
			T1.POSTBRANCH,
			T10.DIVISIONCODEDESC FINDIVISIONDESC,
			T11.BRANCHDESC POSTBRANCHDESC,
			T12.BRANCHDESC CASHIERBRANCHDESC,
			T10.ENTITYCODE,
			T9.CODE COLLECTIONAGENTCODE,
			T9.DESCRIPTION COLLECTIONAGENTDESC,
			T1.MODULE,
			T1.EXTREFERENCE,
			T13.CUSTCIF CUSTOMERCIF,
			T13.CUSTSHRTNAME CUSTOMERNAME
			FROM FINRECEIPTHEADER T1
			LEFT JOIN FINANCEMAIN_TEMP T2 ON T1.REFERENCE = T2.FINREFERENCE
			LEFT JOIN CUSTOMERS T3 ON T2.CUSTID = T3.CUSTID
			LEFT JOIN RMTFINANCETYPES T4 ON T2.FINTYPE = T4.FINTYPE
			LEFT JOIN RMTCURRENCIES T5 ON T2.FINCCY = T5.CCYCODE
			LEFT JOIN RMTBRANCHES T6 ON T2.FINBRANCH = T6.BRANCHCODE
			LEFT JOIN BMTREJECTCODES T7 ON T1.CANCELREASON = T7.REJECTCODE
			LEFT JOIN FINRECEIPTDETAIL T8 ON T1.RECEIPTID = T8.RECEIPTID AND T1.RECEIPTMODE = T8.PAYMENTTYPE
			LEFT JOIN COLLECTIONAGENCIES T9 ON T1.COLLECTIONAGENTID = T9.ID
			LEFT JOIN SMTDIVISIONDETAIL T10 ON T1.FINDIVISION = T10.DIVISIONCODE
			LEFT JOIN RMTBRANCHES T11 ON T1.POSTBRANCH = T11.BRANCHCODE
			LEFT JOIN RMTBRANCHES T12 ON T1.CASHIERBRANCH = T12.BRANCHCODE
			LEFT JOIN CUSTOMERS T13 ON CAST(T13.CUSTID AS VARCHAR(20)) = T1.REFERENCE
			WHERE NOT EXISTS
			( SELECT 1 FROM FINRECEIPTHEADER_TEMP WHERE RECEIPTID = T1.RECEIPTID
			)
		</createView>
	</changeSet>

	<changeSet id="49" author="satyanarayana.g">
		<sql>
		   <![CDATA[
		   		update SeqSecRoles set seqno=(SELECT MAX(ROLEID)+1 FROM Secroles_view);
			  	Insert into SecRoles(ROLEID,ROLEAPP,ROLECD,ROLEDESC,ROLECATEGORY,VERSION,LASTMNTBY,LASTMNTON,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID) values ((SELECT MAX(ROLEID)+1 FROM SECROLES),1,'RECEIPTKNOCKOFFCANCEL_MAKER','Knock Off Cancellation Maker',null,0,1000,current_timestamp,'Approved',null,null,null,null,null,0);
				Insert into SecRoles(ROLEID,ROLEAPP,ROLECD,ROLEDESC,ROLECATEGORY,VERSION,LASTMNTBY,LASTMNTON,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID) values ((SELECT MAX(ROLEID)+1 FROM SECROLES),1,'RECEIPTKNOCKOFFCANCEL_APPROVER','Knock Off Cancellation Approver',null,0,1000,current_timestamp,'Approved',null,null,null,null,null,0);
				update SeqSecRoles set seqno=(SELECT MAX(ROLEID)+1 FROM Secroles_view);
		     ]]>
		</sql>
	</changeSet>

	<changeSet id="50" author="satyanarayana.g">
		<sql>
		   <![CDATA[
			UPDATE SeqWorkFlowDetails SET SEQNO= (SELECT MAX(WorkflowId)+1 FROM workflowdetails);
			]]>
		</sql>
		<insert tableName="WorkFlowDetails">
			<column name="WorkFlowId" valueComputed="(select max(WorkFlowId) + 1 from WorkFlowDetails)" />
			<column name="WorkFlowType">RECEIPTKNOCKOFF_CANCEL</column>
			<column name="WorkFlowSubType">RECEIPTKNOCKOFF_CANCEL</column>
			<column name="WorkFlowDesc">Receipt Knock Off Cancellation WorkFlow</column>
			<column name="JsonDesign" type="nclob"><![CDATA[NULL]]></column>
			<column name="SvgDesign" type="nclob"><![CDATA[NULL]]></column>
			<column name="WorkFlowXml" type="clob"><![CDATA[NULL]]></column>
			<column name="WorkFlowRoles">RECEIPTKNOCKOFFCANCEL_MAKER;RECEIPTKNOCKOFFCANCEL_APPROVER</column>
			<column name="FirstTaskOwner">RECEIPTKNOCKOFFCANCEL_MAKER</column>
			<column name="WorkFlowActive">1</column>
			<column name="Version">1</column>
			<column name="LastMntBy">1000</column>
			<column name="LastMntOn" valueDate="current_timestamp" />
			<column name="RecordStatus">Null</column>
			<column name="RoleCode">Null</column>
			<column name="NextRoleCode">Null</column>
			<column name="TaskId">Null</column>
			<column name="NextTaskId">Null</column>
			<column name="RecordType">NULL</column>
		</insert>
	</changeSet>

	<changeSet id="50.1" author="satyanarayana.g">
		<update tableName="WORKFLOWDETAILS">
			<column name="JSONDESIGN" type="NCLOB"><![CDATA[{"resourceId":"canvas","properties":{"process_id":"RECEIPTKNOCKOFF_CANCEL_PROCESS","name":"RECEIPTKNOCKOFF_CANCEL_PROCESS","documentation":"Receipt KnockOff Maker/Checker Cancellation Workflow","category":"","listenerclass":"","listenerentitytype":""},"stencil":{"id":"BPMNDiagram"},"childShapes":[{"resourceId":"startEvent1","properties":{"overrideid":"","name":"Start"},"stencil":{"id":"StartNoneEvent"},"childShapes":[],"outgoing":[{"resourceId":"sid-1250C7E7-6F62-4214-982F-1A3AC85AFC7E"}],"bounds":{"lowerRight":{"x":130,"y":193},"upperLeft":{"x":100,"y":163}},"dockers":[]},{"resourceId":"sid-524FBB38-6732-4668-92BE-CC53DC3700A0","properties":{"overrideid":"","name":"Maker","usertaskassignment":{"assignment":{"type":"idm","idm":{"type":"user","assignee":{"email":"RECEIPTKNOCKOFFCANCEL_MAKER","firstName":"RECEIPTKNOCKOFFCANCEL_MAKER","fullName":"RECEIPTKNOCKOFFCANCEL_MAKER","id":"RECEIPTKNOCKOFFCANCEL_MAKER","roledesc":"Knock Off Cancellation Maker","$$hashKey":"object:4545"}}}},"additionalforms":"","formkeydefinition":"","allowrevert":"","prioritydefinition":"Role Queue","baseactor":"","duedatedefinition":"","multiinstance_type":"None","isforcompensation":"false"},"stencil":{"id":"UserTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-6E19C870-6909-4ECF-8229-8105476FDB78"},{"resourceId":"sid-8E2477F3-189F-46AD-836A-A49B8B841E09"}],"bounds":{"lowerRight":{"x":275,"y":218},"upperLeft":{"x":175,"y":138}},"dockers":[]},{"resourceId":"sid-1250C7E7-6F62-4214-982F-1A3AC85AFC7E","properties":{"overrideid":"","name":"","repruseaction":"false","conditionsequenceflow":"","defaultflow":"false","action":"","state":"","mandatenotes":"false","capturereasons":"false","typeofreason":"","constraint":"","showdiamondmarker":false},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-524FBB38-6732-4668-92BE-CC53DC3700A0"}],"bounds":{"lowerRight":{"x":174.15625,"y":178},"upperLeft":{"x":130.609375,"y":178}},"dockers":[{"x":15,"y":15},{"x":50,"y":40}],"target":{"resourceId":"sid-524FBB38-6732-4668-92BE-CC53DC3700A0"}},{"resourceId":"sid-8FAB45FB-50F7-4D05-90A4-52C53DBA2D5C","properties":{"overrideid":"","name":"Approver","usertaskassignment":{"assignment":{"type":"idm","idm":{"type":"user","assignee":{"email":"RECEIPTKNOCKOFFCANCEL_APPROVER","firstName":"RECEIPTKNOCKOFFCANCEL_APPROVER","fullName":"RECEIPTKNOCKOFFCANCEL_APPROVER","id":"RECEIPTKNOCKOFFCANCEL_APPROVER","roledesc":"Knock Off Cancellation Approver","$$hashKey":"object:6493"}}}},"additionalforms":"","formkeydefinition":"","allowrevert":"","prioritydefinition":"Role Queue","baseactor":"","duedatedefinition":"","multiinstance_type":"None","isforcompensation":"false"},"stencil":{"id":"UserTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-CC37068B-A30E-4503-B550-473F6DF0212C"}],"bounds":{"lowerRight":{"x":445,"y":218},"upperLeft":{"x":345,"y":138}},"dockers":[]},{"resourceId":"sid-2A155392-CFC8-4ED1-B571-0308BAD4647D","properties":{"overrideid":"","name":"","sequencefloworder":""},"stencil":{"id":"ExclusiveGateway"},"childShapes":[],"outgoing":[{"resourceId":"sid-DE621A65-B96D-43EE-B0B7-74407680569D"},{"resourceId":"sid-1A0FC52F-14E8-4600-9587-3C5C3683803F"},{"resourceId":"sid-CA23090B-D7BD-450C-B241-5244BA683273"}],"bounds":{"lowerRight":{"x":520,"y":198},"upperLeft":{"x":480,"y":158}},"dockers":[]},{"resourceId":"sid-CC37068B-A30E-4503-B550-473F6DF0212C","properties":{"overrideid":"","name":"","repruseaction":"false","conditionsequenceflow":"","defaultflow":"false","action":"","state":"","mandatenotes":"false","capturereasons":"false","typeofreason":"","constraint":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-2A155392-CFC8-4ED1-B571-0308BAD4647D"}],"bounds":{"lowerRight":{"x":479.718761230466,"y":178.40151071673208},"upperLeft":{"x":445.453113769534,"y":178.23911428326792}},"dockers":[{"x":50,"y":40},{"x":20.5,"y":20.5}],"target":{"resourceId":"sid-2A155392-CFC8-4ED1-B571-0308BAD4647D"}},{"resourceId":"sid-6BB5B415-92DD-4BB3-A64B-88221D02783C","properties":{"overrideid":"","name":"Approve","rerunnable":true,"servicetaskexpression":"doApprove","isforcompensation":"false","multiinstance_type":"None","parameters":""},"stencil":{"id":"approveTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-3C31DB36-8244-4EDD-854F-89B8BE9650C2"}],"bounds":{"lowerRight":{"x":685,"y":217},"upperLeft":{"x":585,"y":137}},"dockers":[]},{"resourceId":"sid-41639C9B-F68B-44E8-9D4D-144215068BE7","properties":{"overrideid":"","name":"Reject","rerunnable":true,"servicetaskexpression":"doReject","isforcompensation":"false","multiinstance_type":"None","parameters":""},"stencil":{"id":"rejectTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-BD702483-A67B-429A-A81E-C884A0506EFA"}],"bounds":{"lowerRight":{"x":550,"y":335},"upperLeft":{"x":450,"y":255}},"dockers":[]},{"resourceId":"sid-BA493BF6-8389-4C76-BD53-6299287F33F5","properties":{"overrideid":"","name":"End"},"stencil":{"id":"EndNoneEvent"},"childShapes":[],"outgoing":[],"bounds":{"lowerRight":{"x":743,"y":191},"upperLeft":{"x":715,"y":163}},"dockers":[]},{"resourceId":"sid-3C31DB36-8244-4EDD-854F-89B8BE9650C2","properties":{"overrideid":"","name":"","repruseaction":"false","conditionsequenceflow":"","defaultflow":"false","action":"","state":"","mandatenotes":"false","capturereasons":"false","typeofreason":"","constraint":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-BA493BF6-8389-4C76-BD53-6299287F33F5"}],"bounds":{"lowerRight":{"x":714.78125,"y":177},"upperLeft":{"x":685.9375,"y":177}},"dockers":[{"x":50,"y":40},{"x":14,"y":14}],"target":{"resourceId":"sid-BA493BF6-8389-4C76-BD53-6299287F33F5"}},{"resourceId":"sid-AAAE7FEC-D686-473F-BCDE-757D27046154","properties":{"overrideid":"","name":"End"},"stencil":{"id":"EndNoneEvent"},"childShapes":[],"outgoing":[],"bounds":{"lowerRight":{"x":608,"y":309},"upperLeft":{"x":580,"y":281}},"dockers":[]},{"resourceId":"sid-BD702483-A67B-429A-A81E-C884A0506EFA","properties":{"overrideid":"","name":"","repruseaction":"false","conditionsequenceflow":"","defaultflow":"false","action":"","state":"","mandatenotes":"false","capturereasons":"false","typeofreason":"","constraint":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-AAAE7FEC-D686-473F-BCDE-757D27046154"}],"bounds":{"lowerRight":{"x":579.78125,"y":295},"upperLeft":{"x":550.9375,"y":295}},"dockers":[{"x":50,"y":40},{"x":14,"y":14}],"target":{"resourceId":"sid-AAAE7FEC-D686-473F-BCDE-757D27046154"}},{"resourceId":"sid-6E19C870-6909-4ECF-8229-8105476FDB78","properties":{"overrideid":"","name":"Submit","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Submitted'"}},"defaultflow":"false","action":"Submit","state":"Submitted","mandatenotes":"false","capturereasons":"false","typeofreason":"","constraint":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-8FAB45FB-50F7-4D05-90A4-52C53DBA2D5C"}],"bounds":{"lowerRight":{"x":344.859375,"y":178},"upperLeft":{"x":275.140625,"y":178}},"dockers":[{"x":50,"y":40},{"x":50,"y":40}],"target":{"resourceId":"sid-8FAB45FB-50F7-4D05-90A4-52C53DBA2D5C"}},{"resourceId":"sid-DE621A65-B96D-43EE-B0B7-74407680569D","properties":{"overrideid":"","name":"Approve","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Approved'"}},"defaultflow":"false","action":"Approve","state":"Approved","mandatenotes":"false","capturereasons":"false","typeofreason":"","constraint":"","showdiamondmarker":false},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-6BB5B415-92DD-4BB3-A64B-88221D02783C"}],"bounds":{"lowerRight":{"x":584.19140625,"y":178.5},"upperLeft":{"x":520.3203125,"y":178.5}},"dockers":[{"x":20.5,"y":20.5},{"x":25,"y":41.5}],"target":{"resourceId":"sid-6BB5B415-92DD-4BB3-A64B-88221D02783C"}},{"resourceId":"sid-CA23090B-D7BD-450C-B241-5244BA683273","properties":{"overrideid":"","name":"Resubmit","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Resubmitted'"}},"defaultflow":"false","action":"Resubmit","state":"Resubmitted","mandatenotes":true,"capturereasons":"false","typeofreason":"","constraint":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-524FBB38-6732-4668-92BE-CC53DC3700A0"}],"bounds":{"lowerRight":{"x":500.5,"y":157.67578125},"upperLeft":{"x":225,"y":77}},"dockers":[{"x":20.5,"y":20.5},{"x":500.5,"y":77},{"x":225,"y":77},{"x":50,"y":40}],"target":{"resourceId":"sid-524FBB38-6732-4668-92BE-CC53DC3700A0"}},{"resourceId":"sid-8E2477F3-189F-46AD-836A-A49B8B841E09","properties":{"overrideid":"","name":"Cancel","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Cancelled'"}},"defaultflow":"false","action":"Cancel","state":"Cancelled","mandatenotes":true,"capturereasons":"false","typeofreason":"","constraint":""},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-41639C9B-F68B-44E8-9D4D-144215068BE7"}],"bounds":{"lowerRight":{"x":449.5859375,"y":295},"upperLeft":{"x":225,"y":218.3046875}},"dockers":[{"x":50,"y":40},{"x":225,"y":295},{"x":50,"y":40}],"target":{"resourceId":"sid-41639C9B-F68B-44E8-9D4D-144215068BE7"}},{"resourceId":"sid-1A0FC52F-14E8-4600-9587-3C5C3683803F","properties":{"overrideid":"","name":"Reject","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Rejected'"}},"defaultflow":"false","action":"Reject","state":"Rejected","mandatenotes":true,"capturereasons":"false","typeofreason":"","constraint":"","showdiamondmarker":false},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-41639C9B-F68B-44E8-9D4D-144215068BE7"}],"bounds":{"lowerRight":{"x":500.4136769440337,"y":254.86329045984164},"upperLeft":{"x":500.1722605559663,"y":198.61327204015836}},"dockers":[{"x":20.5,"y":20.5},{"x":50,"y":40}],"target":{"resourceId":"sid-41639C9B-F68B-44E8-9D4D-144215068BE7"}}],"bounds":{"lowerRight":{"x":1200,"y":1050},"upperLeft":{"x":0,"y":0}},"stencilset":{"url":"stencilsets/bpmn2.0/bpmn2.0.json","namespace":"http://b3mn.org/stencilset/bpmn2.0#"},"ssextensions":[]}]]></column>
			<column name="WORKFLOWXML" type="CLOB"><![CDATA[<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:activiti="http://activiti.org/bpmn" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI" typeLanguage="http://www.w3.org/2001/XMLSchema" expressionLanguage="http://www.w3.org/1999/XPath" targetNamespace="http://activiti.org/test">   <process id="RECEIPTKNOCKOFF_CANCEL_PROCESS" name="RECEIPTKNOCKOFF_CANCEL_PROCESS" isExecutable="true">     <documentation>Receipt KnockOff Maker/Checker Cancellation Workflow</documentation>     <startEvent id="startEvent1" name="Start"/>     <userTask id="sid-524FBB38-6732-4668-92BE-CC53DC3700A0" name="Maker" activiti:actor="RECEIPTKNOCKOFFCANCEL_MAKER" activiti:assignmentLevel="Role Queue"/>     <sequenceFlow id="sid-1250C7E7-6F62-4214-982F-1A3AC85AFC7E" sourceRef="startEvent1" targetRef="sid-524FBB38-6732-4668-92BE-CC53DC3700A0" representsUserAction="false" mandateNotes="false" captureReasons="false"/>     <userTask id="sid-8FAB45FB-50F7-4D05-90A4-52C53DBA2D5C" name="Approver" activiti:actor="RECEIPTKNOCKOFFCANCEL_APPROVER" activiti:assignmentLevel="Role Queue"/>     <exclusiveGateway id="sid-2A155392-CFC8-4ED1-B571-0308BAD4647D"/>     <sequenceFlow id="sid-CC37068B-A30E-4503-B550-473F6DF0212C" sourceRef="sid-8FAB45FB-50F7-4D05-90A4-52C53DBA2D5C" targetRef="sid-2A155392-CFC8-4ED1-B571-0308BAD4647D" representsUserAction="false" mandateNotes="false" captureReasons="false"/>     <serviceTask id="sid-6BB5B415-92DD-4BB3-A64B-88221D02783C" name="Approve" activiti:operation="doApprove" activiti:rerunnable="true"/>     <serviceTask id="sid-41639C9B-F68B-44E8-9D4D-144215068BE7" name="Reject" activiti:operation="doReject" activiti:rerunnable="true"/>     <endEvent id="sid-BA493BF6-8389-4C76-BD53-6299287F33F5" name="End"/>     <sequenceFlow id="sid-3C31DB36-8244-4EDD-854F-89B8BE9650C2" sourceRef="sid-6BB5B415-92DD-4BB3-A64B-88221D02783C" targetRef="sid-BA493BF6-8389-4C76-BD53-6299287F33F5" representsUserAction="false" mandateNotes="false" captureReasons="false"/>     <endEvent id="sid-AAAE7FEC-D686-473F-BCDE-757D27046154" name="End"/>     <sequenceFlow id="sid-BD702483-A67B-429A-A81E-C884A0506EFA" sourceRef="sid-41639C9B-F68B-44E8-9D4D-144215068BE7" targetRef="sid-AAAE7FEC-D686-473F-BCDE-757D27046154" representsUserAction="false" mandateNotes="false" captureReasons="false"/>     <sequenceFlow id="sid-6E19C870-6909-4ECF-8229-8105476FDB78" name="Submit" sourceRef="sid-524FBB38-6732-4668-92BE-CC53DC3700A0" targetRef="sid-8FAB45FB-50F7-4D05-90A4-52C53DBA2D5C" action="Submit" state="Submitted" representsUserAction="true" mandateNotes="false" captureReasons="false">       <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Submitted'></conditionExpression>     </sequenceFlow>     <sequenceFlow id="sid-DE621A65-B96D-43EE-B0B7-74407680569D" name="Approve" sourceRef="sid-2A155392-CFC8-4ED1-B571-0308BAD4647D" targetRef="sid-6BB5B415-92DD-4BB3-A64B-88221D02783C" action="Approve" state="Approved" representsUserAction="true" mandateNotes="false" captureReasons="false">       <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Approved'></conditionExpression>     </sequenceFlow>     <sequenceFlow id="sid-CA23090B-D7BD-450C-B241-5244BA683273" name="Resubmit" sourceRef="sid-2A155392-CFC8-4ED1-B571-0308BAD4647D" targetRef="sid-524FBB38-6732-4668-92BE-CC53DC3700A0" action="Resubmit" state="Resubmitted" representsUserAction="true" mandateNotes="true" captureReasons="false">       <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Resubmitted'></conditionExpression>     </sequenceFlow>     <sequenceFlow id="sid-8E2477F3-189F-46AD-836A-A49B8B841E09" name="Cancel" sourceRef="sid-524FBB38-6732-4668-92BE-CC53DC3700A0" targetRef="sid-41639C9B-F68B-44E8-9D4D-144215068BE7" action="Cancel" state="Cancelled" representsUserAction="true" mandateNotes="true" captureReasons="false">       <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Cancelled'></conditionExpression>     </sequenceFlow>     <sequenceFlow id="sid-1A0FC52F-14E8-4600-9587-3C5C3683803F" name="Reject" sourceRef="sid-2A155392-CFC8-4ED1-B571-0308BAD4647D" targetRef="sid-41639C9B-F68B-44E8-9D4D-144215068BE7" action="Reject" state="Rejected" representsUserAction="true" mandateNotes="true" captureReasons="false">       <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Rejected'></conditionExpression>     </sequenceFlow>   </process>   <bpmndi:BPMNDiagram id="BPMNDiagram_RECEIPTKNOCKOFF_CANCEL_PROCESS">     <bpmndi:BPMNPlane bpmnElement="RECEIPTKNOCKOFF_CANCEL_PROCESS" id="BPMNPlane_RECEIPTKNOCKOFF_CANCEL_PROCESS">       <bpmndi:BPMNShape bpmnElement="startEvent1" id="BPMNShape_startEvent1">         <omgdc:Bounds height="30.0" width="30.0" x="100.0" y="163.0"/>       </bpmndi:BPMNShape>       <bpmndi:BPMNShape bpmnElement="sid-524FBB38-6732-4668-92BE-CC53DC3700A0" id="BPMNShape_sid-524FBB38-6732-4668-92BE-CC53DC3700A0">         <omgdc:Bounds height="80.0" width="100.0" x="175.0" y="138.0"/>       </bpmndi:BPMNShape>       <bpmndi:BPMNShape bpmnElement="sid-8FAB45FB-50F7-4D05-90A4-52C53DBA2D5C" id="BPMNShape_sid-8FAB45FB-50F7-4D05-90A4-52C53DBA2D5C">         <omgdc:Bounds height="80.0" width="100.0" x="345.0" y="138.0"/>       </bpmndi:BPMNShape>       <bpmndi:BPMNShape bpmnElement="sid-2A155392-CFC8-4ED1-B571-0308BAD4647D" id="BPMNShape_sid-2A155392-CFC8-4ED1-B571-0308BAD4647D">         <omgdc:Bounds height="40.0" width="40.0" x="480.0" y="158.0"/>       </bpmndi:BPMNShape>       <bpmndi:BPMNShape bpmnElement="sid-6BB5B415-92DD-4BB3-A64B-88221D02783C" id="BPMNShape_sid-6BB5B415-92DD-4BB3-A64B-88221D02783C">         <omgdc:Bounds height="80.0" width="100.0" x="585.0" y="137.0"/>       </bpmndi:BPMNShape>       <bpmndi:BPMNShape bpmnElement="sid-41639C9B-F68B-44E8-9D4D-144215068BE7" id="BPMNShape_sid-41639C9B-F68B-44E8-9D4D-144215068BE7">         <omgdc:Bounds height="80.0" width="100.0" x="450.0" y="255.0"/>       </bpmndi:BPMNShape>       <bpmndi:BPMNShape bpmnElement="sid-BA493BF6-8389-4C76-BD53-6299287F33F5" id="BPMNShape_sid-BA493BF6-8389-4C76-BD53-6299287F33F5">         <omgdc:Bounds height="28.0" width="28.0" x="715.0" y="163.0"/>       </bpmndi:BPMNShape>       <bpmndi:BPMNShape bpmnElement="sid-AAAE7FEC-D686-473F-BCDE-757D27046154" id="BPMNShape_sid-AAAE7FEC-D686-473F-BCDE-757D27046154">         <omgdc:Bounds height="28.0" width="28.0" x="580.0" y="281.0"/>       </bpmndi:BPMNShape>       <bpmndi:BPMNEdge bpmnElement="sid-1A0FC52F-14E8-4600-9587-3C5C3683803F" id="BPMNEdge_sid-1A0FC52F-14E8-4600-9587-3C5C3683803F">         <omgdi:waypoint x="500.4181034482759" y="197.58189655172413"/>         <omgdi:waypoint x="500.17167381974247" y="255.0"/>       </bpmndi:BPMNEdge>       <bpmndi:BPMNEdge bpmnElement="sid-CA23090B-D7BD-450C-B241-5244BA683273" id="BPMNEdge_sid-CA23090B-D7BD-450C-B241-5244BA683273">         <omgdi:waypoint x="500.5" y="158.5"/>         <omgdi:waypoint x="500.5" y="77.0"/>         <omgdi:waypoint x="225.0" y="77.0"/>         <omgdi:waypoint x="225.0" y="138.0"/>       </bpmndi:BPMNEdge>       <bpmndi:BPMNEdge bpmnElement="sid-6E19C870-6909-4ECF-8229-8105476FDB78" id="BPMNEdge_sid-6E19C870-6909-4ECF-8229-8105476FDB78">         <omgdi:waypoint x="275.0" y="178.0"/>         <omgdi:waypoint x="345.0" y="178.0"/>       </bpmndi:BPMNEdge>       <bpmndi:BPMNEdge bpmnElement="sid-DE621A65-B96D-43EE-B0B7-74407680569D" id="BPMNEdge_sid-DE621A65-B96D-43EE-B0B7-74407680569D">         <omgdi:waypoint x="519.5" y="178.5"/>         <omgdi:waypoint x="585.0" y="178.5"/>       </bpmndi:BPMNEdge>       <bpmndi:BPMNEdge bpmnElement="sid-CC37068B-A30E-4503-B550-473F6DF0212C" id="BPMNEdge_sid-CC37068B-A30E-4503-B550-473F6DF0212C">         <omgdi:waypoint x="445.0" y="178.23696682464455"/>         <omgdi:waypoint x="480.4047619047619" y="178.4047619047619"/>       </bpmndi:BPMNEdge>       <bpmndi:BPMNEdge bpmnElement="sid-8E2477F3-189F-46AD-836A-A49B8B841E09" id="BPMNEdge_sid-8E2477F3-189F-46AD-836A-A49B8B841E09">         <omgdi:waypoint x="225.0" y="218.0"/>         <omgdi:waypoint x="225.0" y="295.0"/>         <omgdi:waypoint x="450.0" y="295.0"/>       </bpmndi:BPMNEdge>       <bpmndi:BPMNEdge bpmnElement="sid-3C31DB36-8244-4EDD-854F-89B8BE9650C2" id="BPMNEdge_sid-3C31DB36-8244-4EDD-854F-89B8BE9650C2">         <omgdi:waypoint x="685.0" y="177.0"/>         <omgdi:waypoint x="715.0" y="177.0"/>       </bpmndi:BPMNEdge>       <bpmndi:BPMNEdge bpmnElement="sid-1250C7E7-6F62-4214-982F-1A3AC85AFC7E" id="BPMNEdge_sid-1250C7E7-6F62-4214-982F-1A3AC85AFC7E">         <omgdi:waypoint x="130.0" y="178.0"/>         <omgdi:waypoint x="175.0" y="178.0"/>       </bpmndi:BPMNEdge>       <bpmndi:BPMNEdge bpmnElement="sid-BD702483-A67B-429A-A81E-C884A0506EFA" id="BPMNEdge_sid-BD702483-A67B-429A-A81E-C884A0506EFA">         <omgdi:waypoint x="550.0" y="295.0"/>         <omgdi:waypoint x="580.0" y="295.0"/>       </bpmndi:BPMNEdge>     </bpmndi:BPMNPlane>   </bpmndi:BPMNDiagram> </definitions>]]></column>
			<where>workflowtype='RECEIPTKNOCKOFF_CANCEL' and workflowactive=1</where>
		</update>
	</changeSet>

	<changeSet id="50.2" author="satyanarayana.g">
		<update tableName="WORKFLOWDETAILS">
			<column name="WORKFLOWXML" type="CLOB"><![CDATA[
<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:activiti="http://activiti.org/bpmn" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI" typeLanguage="http://www.w3.org/2001/XMLSchema" expressionLanguage="http://www.w3.org/1999/XPath" targetNamespace="http://activiti.org/test">
  <process id="RECEIPTKNOCKOFF_CANCEL_PROCESS" name="RECEIPTKNOCKOFF_CANCEL_PROCESS" isExecutable="true">
    <documentation>Receipt KnockOff Maker/Checker Cancellation Workflow</documentation>
    <startEvent id="startEvent1" name="Start"/>
    <userTask id="sid-524FBB38-6732-4668-92BE-CC53DC3700A0" name="Maker" activiti:actor="RECEIPTKNOCKOFFCANCEL_MAKER" activiti:assignmentLevel="Role Queue"/>
    <sequenceFlow id="sid-1250C7E7-6F62-4214-982F-1A3AC85AFC7E" sourceRef="startEvent1" targetRef="sid-524FBB38-6732-4668-92BE-CC53DC3700A0" representsUserAction="false" mandateNotes="false" captureReasons="false"/>
    <userTask id="sid-8FAB45FB-50F7-4D05-90A4-52C53DBA2D5C" name="Approver" activiti:actor="RECEIPTKNOCKOFFCANCEL_APPROVER" activiti:assignmentLevel="Role Queue"/>
    <exclusiveGateway id="sid-2A155392-CFC8-4ED1-B571-0308BAD4647D"/>
    <sequenceFlow id="sid-CC37068B-A30E-4503-B550-473F6DF0212C" sourceRef="sid-8FAB45FB-50F7-4D05-90A4-52C53DBA2D5C" targetRef="sid-2A155392-CFC8-4ED1-B571-0308BAD4647D" representsUserAction="false" mandateNotes="false" captureReasons="false"/>
    <serviceTask id="sid-6BB5B415-92DD-4BB3-A64B-88221D02783C" name="Approve" activiti:operation="doApprove" activiti:rerunnable="true"/>
    <serviceTask id="sid-41639C9B-F68B-44E8-9D4D-144215068BE7" name="Reject" activiti:operation="doReject" activiti:rerunnable="true"/>
    <endEvent id="sid-BA493BF6-8389-4C76-BD53-6299287F33F5" name="End"/>
    <sequenceFlow id="sid-3C31DB36-8244-4EDD-854F-89B8BE9650C2" sourceRef="sid-6BB5B415-92DD-4BB3-A64B-88221D02783C" targetRef="sid-BA493BF6-8389-4C76-BD53-6299287F33F5" representsUserAction="false" mandateNotes="false" captureReasons="false"/>
    <endEvent id="sid-AAAE7FEC-D686-473F-BCDE-757D27046154" name="End"/>
    <sequenceFlow id="sid-BD702483-A67B-429A-A81E-C884A0506EFA" sourceRef="sid-41639C9B-F68B-44E8-9D4D-144215068BE7" targetRef="sid-AAAE7FEC-D686-473F-BCDE-757D27046154" representsUserAction="false" mandateNotes="false" captureReasons="false"/>
    <sequenceFlow id="sid-6E19C870-6909-4ECF-8229-8105476FDB78" name="Submit" sourceRef="sid-524FBB38-6732-4668-92BE-CC53DC3700A0" targetRef="sid-8FAB45FB-50F7-4D05-90A4-52C53DBA2D5C" action="Submit" state="Submitted" representsUserAction="true" mandateNotes="false" captureReasons="false">
      <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Submitted'</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-DE621A65-B96D-43EE-B0B7-74407680569D" name="Approve" sourceRef="sid-2A155392-CFC8-4ED1-B571-0308BAD4647D" targetRef="sid-6BB5B415-92DD-4BB3-A64B-88221D02783C" action="Approve" state="Approved" representsUserAction="true" mandateNotes="false" captureReasons="false">
      <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Approved'</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-CA23090B-D7BD-450C-B241-5244BA683273" name="Resubmit" sourceRef="sid-2A155392-CFC8-4ED1-B571-0308BAD4647D" targetRef="sid-524FBB38-6732-4668-92BE-CC53DC3700A0" action="Resubmit" state="Resubmitted" representsUserAction="true" mandateNotes="true" captureReasons="false">
      <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Resubmitted'</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-8E2477F3-189F-46AD-836A-A49B8B841E09" name="Cancel" sourceRef="sid-524FBB38-6732-4668-92BE-CC53DC3700A0" targetRef="sid-41639C9B-F68B-44E8-9D4D-144215068BE7" action="Cancel" state="Cancelled" representsUserAction="true" mandateNotes="true" captureReasons="false">
      <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Cancelled'</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-1A0FC52F-14E8-4600-9587-3C5C3683803F" name="Reject" sourceRef="sid-2A155392-CFC8-4ED1-B571-0308BAD4647D" targetRef="sid-41639C9B-F68B-44E8-9D4D-144215068BE7" action="Reject" state="Rejected" representsUserAction="true" mandateNotes="true" captureReasons="false">
      <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Rejected'</conditionExpression>
    </sequenceFlow>
  </process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_RECEIPTKNOCKOFF_CANCEL_PROCESS">
    <bpmndi:BPMNPlane bpmnElement="RECEIPTKNOCKOFF_CANCEL_PROCESS" id="BPMNPlane_RECEIPTKNOCKOFF_CANCEL_PROCESS">
      <bpmndi:BPMNShape bpmnElement="startEvent1" id="BPMNShape_startEvent1">
        <omgdc:Bounds height="30.0" width="30.0" x="100.0" y="163.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-524FBB38-6732-4668-92BE-CC53DC3700A0" id="BPMNShape_sid-524FBB38-6732-4668-92BE-CC53DC3700A0">
        <omgdc:Bounds height="80.0" width="100.0" x="175.0" y="138.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-8FAB45FB-50F7-4D05-90A4-52C53DBA2D5C" id="BPMNShape_sid-8FAB45FB-50F7-4D05-90A4-52C53DBA2D5C">
        <omgdc:Bounds height="80.0" width="100.0" x="345.0" y="138.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-2A155392-CFC8-4ED1-B571-0308BAD4647D" id="BPMNShape_sid-2A155392-CFC8-4ED1-B571-0308BAD4647D">
        <omgdc:Bounds height="40.0" width="40.0" x="480.0" y="158.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-6BB5B415-92DD-4BB3-A64B-88221D02783C" id="BPMNShape_sid-6BB5B415-92DD-4BB3-A64B-88221D02783C">
        <omgdc:Bounds height="80.0" width="100.0" x="585.0" y="137.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-41639C9B-F68B-44E8-9D4D-144215068BE7" id="BPMNShape_sid-41639C9B-F68B-44E8-9D4D-144215068BE7">
        <omgdc:Bounds height="80.0" width="100.0" x="450.0" y="255.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-BA493BF6-8389-4C76-BD53-6299287F33F5" id="BPMNShape_sid-BA493BF6-8389-4C76-BD53-6299287F33F5">
        <omgdc:Bounds height="28.0" width="28.0" x="715.0" y="163.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-AAAE7FEC-D686-473F-BCDE-757D27046154" id="BPMNShape_sid-AAAE7FEC-D686-473F-BCDE-757D27046154">
        <omgdc:Bounds height="28.0" width="28.0" x="580.0" y="281.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge bpmnElement="sid-1A0FC52F-14E8-4600-9587-3C5C3683803F" id="BPMNEdge_sid-1A0FC52F-14E8-4600-9587-3C5C3683803F">
        <omgdi:waypoint x="500.4181034482759" y="197.58189655172413"/>
        <omgdi:waypoint x="500.17167381974247" y="255.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-CA23090B-D7BD-450C-B241-5244BA683273" id="BPMNEdge_sid-CA23090B-D7BD-450C-B241-5244BA683273">
        <omgdi:waypoint x="500.5" y="158.5"/>
        <omgdi:waypoint x="500.5" y="77.0"/>
        <omgdi:waypoint x="225.0" y="77.0"/>
        <omgdi:waypoint x="225.0" y="138.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-6E19C870-6909-4ECF-8229-8105476FDB78" id="BPMNEdge_sid-6E19C870-6909-4ECF-8229-8105476FDB78">
        <omgdi:waypoint x="275.0" y="178.0"/>
        <omgdi:waypoint x="345.0" y="178.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-DE621A65-B96D-43EE-B0B7-74407680569D" id="BPMNEdge_sid-DE621A65-B96D-43EE-B0B7-74407680569D">
        <omgdi:waypoint x="519.5" y="178.5"/>
        <omgdi:waypoint x="585.0" y="178.5"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-CC37068B-A30E-4503-B550-473F6DF0212C" id="BPMNEdge_sid-CC37068B-A30E-4503-B550-473F6DF0212C">
        <omgdi:waypoint x="445.0" y="178.23696682464455"/>
        <omgdi:waypoint x="480.4047619047619" y="178.4047619047619"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-8E2477F3-189F-46AD-836A-A49B8B841E09" id="BPMNEdge_sid-8E2477F3-189F-46AD-836A-A49B8B841E09">
        <omgdi:waypoint x="225.0" y="218.0"/>
        <omgdi:waypoint x="225.0" y="295.0"/>
        <omgdi:waypoint x="450.0" y="295.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-3C31DB36-8244-4EDD-854F-89B8BE9650C2" id="BPMNEdge_sid-3C31DB36-8244-4EDD-854F-89B8BE9650C2">
        <omgdi:waypoint x="685.0" y="177.0"/>
        <omgdi:waypoint x="715.0" y="177.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-1250C7E7-6F62-4214-982F-1A3AC85AFC7E" id="BPMNEdge_sid-1250C7E7-6F62-4214-982F-1A3AC85AFC7E">
        <omgdi:waypoint x="130.0" y="178.0"/>
        <omgdi:waypoint x="175.0" y="178.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-BD702483-A67B-429A-A81E-C884A0506EFA" id="BPMNEdge_sid-BD702483-A67B-429A-A81E-C884A0506EFA">
        <omgdi:waypoint x="550.0" y="295.0"/>
        <omgdi:waypoint x="580.0" y="295.0"/>
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</definitions>]]></column>
			<where>workflowtype='RECEIPTKNOCKOFF_CANCEL' and workflowactive=1</where>
		</update>
	</changeSet>

	<changeSet id="51" author="satyanarayana.g">
		<sql>
			<![CDATA[
			    Insert into ERRORDETAILS (CODE,LANGUAGE,SEVERITY,MESSAGE,EXTENDEDMESSAGE,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID,LASTMNTON,LASTMNTBY,VERSION) values ('IWL0001','EN','E','Payable Amount should be greater than or equal to:{0} and less than or equal to : {1} per tran.',null,'Approved',null,null,null,null,null,0,null,1000,0);
				Insert into ERRORDETAILS (CODE,LANGUAGE,SEVERITY,MESSAGE,EXTENDEDMESSAGE,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID,LASTMNTON,LASTMNTBY,VERSION) values ('IWL0002','EN','E','Payable Amount should not exceed {0} for {1} in a day.',null,'Approved',null,null,null,null,null,0,null,1000,0);
				Insert into ERRORDETAILS (CODE,LANGUAGE,SEVERITY,MESSAGE,EXTENDEDMESSAGE,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID,LASTMNTON,LASTMNTBY,VERSION) values ('IWL0003','EN','E','Receipt Amount should be greater than or equal to:{0} and less than or equal to : {1} per tran.',null,'Approved',null,null,null,null,null,0,null,1000,0);
				Insert into ERRORDETAILS (CODE,LANGUAGE,SEVERITY,MESSAGE,EXTENDEDMESSAGE,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID,LASTMNTON,LASTMNTBY,VERSION) values ('IWL0004','EN','E','Receipt Amount should not exceed {0} for {1} in a day ',null,'Approved',null,null,null,null,null,0,null,1000,0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="52" author="satyanarayana.g">
		<sql>
			<![CDATA[
				Delete  from BmtAEEvents where AeEventCode='RECIP';
			    Delete  from bmtamountCodes where ALLOWEDEVENT='RECIP';
			    
			    Insert into BMTAEEVENTS (AEEVENTCODE,AEEVENTCODEDESC,VERSION,LASTMNTBY,LASTMNTON,RECORDSTATUS,ROLECODE,NEXTROLECODE,TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID,ACTIVE) 
			    values ('RECIP','Receipt Pay in Process',1,1000,CURRENT_TIMESTAMP,'Approved',null,null,null,null,null,0,'1');
			
			    Insert into BMTAMOUNTCODES (ALLOWEDEVENT,ALLOWEDRIA,AMOUNTCODE,AMOUNTCODEDESC,AMOUNTCODEISACTIVE,VERSION,LASTMNTBY,LASTMNTON,RECORDSTATUS,ROLECODE,NEXTROLECODE,
			    TASKID,NEXTTASKID,RECORDTYPE,WORKFLOWID) values ('RECIP',0,'rd_amount','Receipt  Pay amount.','1',1,1000,CURRENT_TIMESTAMP, 'Approved',null,null,null,null,null,0);
	    	]]>
		</sql>
	</changeSet>

	<changeSet id="53" author="satyanarayana.g">
		<sql>
	   	  <![CDATA[
			  UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS_VIEW);
			  INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menuItem_FinanceManagement_ReceiptKnockOffCancel','MENU',0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0 FROM SEQSECRIGHTS WHERE 0=0;
			  UPDATE SEQSECRIGHTS SET SEQNO= (SELECT MAX(RIGHTID) FROM SECRIGHTS_VIEW); 
	 	 ]]>
		</sql>
	</changeSet>

	<changeSet id="53.1" author="satyanarayana.g">
		<sql>
		 	<![CDATA[
			    UPDATE SEQSECGROUPS SET SEQNO= (SELECT MAX(GRPID) FROM SECGROUPS_VIEW);
				INSERT INTO SECGROUPS SELECT (SELECT MAX(GRPID)+1 FROM SECGROUPS), 'FIN_KNOCKOFFRECEIPTCANCEL_MAKER', 'Knock off receipt cancel maker', 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0 FROM SEQSECGROUPS WHERE 0=0;
			    INSERT INTO SECGROUPS SELECT (SELECT MAX(GRPID)+1 FROM SECGROUPS), 'FIN_KNOCKOFFRECEIPTCANCEL_APPROVER', 'Knock off receipt cancel approver', 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0 FROM SEQSECGROUPS WHERE 0=0;
			    UPDATE SEQSECGROUPS SET SEQNO= (SELECT MAX(GRPID) FROM SECGROUPS_VIEW);
	      	]]>
		</sql>
	</changeSet>

	<changeSet id="53.2" author="satyanarayana.g">
		<comment>Assignment of rights to the groups KNOCKOFF_RECEIPT_MAKER and KNOCKOFF_RECEIPT_APPROVER </comment>
		<sql>
	 		<![CDATA[
				UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS_VIEW); 
			    INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_KNOCKOFFRECEIPTCANCEL_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='menuItem_FinanceManagement_ReceiptKnockOffCancel'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
			    INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_KNOCKOFFRECEIPTCANCEL_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_ReceiptDialog_btnCalcReceipts'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
			    INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_KNOCKOFFRECEIPTCANCEL_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_effScheduleMethod'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
			    INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_KNOCKOFFRECEIPTCANCEL_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_favourNo'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
			    INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_KNOCKOFFRECEIPTCANCEL_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_chequeAcNo'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
			    INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_KNOCKOFFRECEIPTCANCEL_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_paymentRef'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
			    INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_KNOCKOFFRECEIPTCANCEL_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_FinFeeReceiptDialog_btnSave'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
			    INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_KNOCKOFFRECEIPTCANCEL_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_PastdueAmount'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
			    INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_KNOCKOFFRECEIPTCANCEL_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_favourName'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
			    INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_KNOCKOFFRECEIPTCANCEL_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_cashReceivedDate'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
			    INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_KNOCKOFFRECEIPTCANCEL_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_transactionRef'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
			    INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_KNOCKOFFRECEIPTCANCEL_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_receiptPurpose'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
			    INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_KNOCKOFFRECEIPTCANCEL_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_receiptAmount'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
			    INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_KNOCKOFFRECEIPTCANCEL_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_ExcessAmount'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
			    INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_KNOCKOFFRECEIPTCANCEL_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_receiptMode'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
			    INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_KNOCKOFFRECEIPTCANCEL_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_valueDate'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
			    INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_KNOCKOFFRECEIPTCANCEL_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinFeeDetailListCtrl_Adjust'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
			    INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_KNOCKOFFRECEIPTCANCEL_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_allocationMethod'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
			    INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_KNOCKOFFRECEIPTCANCEL_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_remarks'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
			    INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_KNOCKOFFRECEIPTCANCEL_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_ManualAdvice'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
			    INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_KNOCKOFFRECEIPTCANCEL_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='FinFeeReceiptDialog_paidAmount'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
			    INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_KNOCKOFFRECEIPTCANCEL_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_ReceiptDialog_btnChangeReceipt'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
			    INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_KNOCKOFFRECEIPTCANCEL_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_excessAdjustTo'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
			    INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_KNOCKOFFRECEIPTCANCEL_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_bankCode'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
			    INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_KNOCKOFFRECEIPTCANCEL_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_fundingAccount'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
			    INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_KNOCKOFFRECEIPTCANCEL_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='ReceiptDialog_PayableAmount'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
			    INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_KNOCKOFFRECEIPTCANCEL_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_ReceiptDialog_btnReceipt'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);

			    INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_KNOCKOFFRECEIPTCANCEL_APPROVER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='menuItem_FinanceManagement_ReceiptKnockOffCancel'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
			    INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE='FIN_KNOCKOFFRECEIPTCANCEL_APPROVER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='button_ReceiptDialog_btnReceipt'), 1, 0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
			    UPDATE SEQSECGROUPRIGHTS SET SEQNO = (SELECT MAX(GRPRIGHTID) FROM SECGROUPRIGHTS_VIEW);
      	   ]]>
		</sql>
	</changeSet>

	<changeSet id="53.3" author="satyanarayana.g">
		<comment>Assignment of groups KNOCKOFF_RECEIPT_MAKER and KNOCKOFF_RECEIPT_APPROVER to roles. </comment>
		<sql>
    		<![CDATA[
				UPDATE SEQSECROLEGROUPS SET SEQNO= (SELECT MAX(ROLEGRPID) FROM SECROLEGROUPS_VIEW);
				INSERT INTO SecRoleGroups values((Select MAX(RoleGrpID)+1 From SecRoleGroups),(Select GrpId  From SecGroups Where GrpCode='FIN_KNOCKOFFRECEIPTCANCEL_MAKER'), (Select  RoleID  From SecRoles Where RoleCd='RECEIPTKNOCKOFFCANCEL_MAKER'),0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0); 
			    INSERT INTO SecRoleGroups values((Select MAX(RoleGrpID)+1 From SecRoleGroups),(Select GrpId  From SecGroups Where GrpCode='FIN_KNOCKOFFRECEIPTCANCEL_APPROVER'), (Select  RoleID  From SecRoles Where RoleCd='RECEIPTKNOCKOFFCANCEL_APPROVER'),0,1000,CURRENT_TIMESTAMP,NULL,NULL,NULL,NULL,NULL,NULL,0);
			    UPDATE SEQSECROLEGROUPS SET SEQNO= (SELECT MAX(ROLEGRPID) FROM SECROLEGROUPS_VIEW);
     		]]>
		</sql>
	</changeSet>

	<changeSet id="54" author="satyanarayana.g">
		<modifyDataType tableName="FinExcessMovement" columnName="ReceiptID" newDataType="bigint" />
		<dropNotNullConstraint tableName="FinExcessMovement" columnName="ReceiptID" columnDataType="bigint" />
	</changeSet>

	<changeSet id="54.1" author="satyanarayana.g">
		<sql>
    		<![CDATA[
    			update FinExcessMovement set ReceiptID = null where ReceiptID = 0;
    		]]>
		</sql>
	</changeSet>

	<!-- <changeSet id="54.2" author="satyanarayana.g"> <addForeignKeyConstraint constraintName="FK_FEM_RID_FRH_RID" referencedTableName="FINRECEIPTHEADER" 
		baseColumnNames="ReceiptID" baseTableName="FinExcessMovement" referencedColumnNames="ReceiptID"/> </changeSet> -->


</databaseChangeLog>