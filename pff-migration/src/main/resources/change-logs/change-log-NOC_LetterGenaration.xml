<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

	<property name="add.schema" value="dbo." dbms="mssql" />
	<property name="add.schema" value="" dbms="oracle" />
	<property name="add.schema" value="" dbms="postgresql" />
	<property name="call.substr" value="substring" dbms="mssql" />
	<property name="call.substr" value="substr" dbms="oracle" />
	<property name="call.substr" value="substring" dbms="postgresql" />
	<property name="call.auditdb" value="PLFAVANSEQC.." dbms="mssql" />
	<property name="call.auditdb" value=" " dbms="oracle" />
	<property name="call.concatenate" value="+" dbms="mssql" />
	<property name="call.concatenate" value="||" dbms="oracle" />
	<property name="call.concatenate" value="||" dbms="postgresql" />
	<property name="call.collength" value="LEN" dbms="mssql" />
	<property name="call.collength" value="LENGTH" dbms="oracle" />
	<property name="call.collength" value="LENGTH" dbms="postgresql" />
	<property name="call.date" value="getdate()" dbms="mssql" />
	<property name="call.date" value="sysdate" dbms="oracle" />
	<property name="call.date" value="now()" dbms="postgresql" />

	<changeSet id="pre_run_for_pgp" author="Mounika.M" runAlways="true" dbms="postgresql">
		<sql>
			Set search_path = plf,public,pg_catalog;
		</sql>
	</changeSet>

	<changeSet id="ST#1561.1" author="Mounika.M">
		<createTable tableName="LETTER_GENERATION">
			<column name="ID" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="FinID" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="RequestType" type="char(1)">
				<constraints nullable="false" />
			</column>
			<column name="LetterType" type="varchar(8)">
				<constraints nullable="false" />
			</column>
			<column name="AgreementTemplate" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="FeeTypeId" type="bigint"/>
			<column name="ModeOfTransfer" type="varchar(8)">
				<constraints nullable="false" />
			</column>
			<column name="CreatedDate" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="CreatedOn" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="EmailTemplate" type="bigint"/>
			<column name="Generated" type="boolean">
				<constraints nullable="false" />
			</column>
			<column name="GeneratedDate" type="datetime"/>
			<column name="GeneratedOn" type="datetime"/>
			<column name="GeneratedBy" type="bigint"/>
			<column name="AdviseID" type="bigint"/>
			<column name="TrackingID" type="bigint"/>
			<column name="Status" type="char(1)"/>
			<column name="Remarks" type="varchar(1000)"/>
		</createTable>
	</changeSet>
	
	<changeSet id="ST#1561.2" author="Mounika.M">
		<addPrimaryKey tableName="LETTER_GENERATION" columnNames="ID" constraintName="PK_LETTER_GENERATION_ID"/>
	</changeSet>
	
	<changeSet id="ST#1561.3" author="Mounika.M">
		<addForeignKeyConstraint constraintName="FK_LG_FM_FinID" referencedTableName="FinanceMain" baseColumnNames="FinID" baseTableName="Letter_Generation" referencedColumnNames="FinID"/>
	</changeSet>
	
	<changeSet id="ST#1561.4" author="Mounika.M">
		<addForeignKeyConstraint constraintName="FK_LG_BMTAD_AgreeTemp" referencedTableName="BMTAggrementDef" baseColumnNames="AgreementTemplate" baseTableName="Letter_Generation" referencedColumnNames="AggId"/>
	</changeSet>
	
	<changeSet id="ST#1561.6" author="Mounika.M">
		<addForeignKeyConstraint constraintName="FK_LG_Template_ET" referencedTableName="Templates" baseColumnNames="EmailTemplate" baseTableName="Letter_Generation" referencedColumnNames="TemplateID"/>
	</changeSet>
	
	<changeSet id="ST#1561.7" author="Mounika.M">
		<addForeignKeyConstraint constraintName="FK_LG_MA_AdviseID" referencedTableName="ManualAdvise" baseColumnNames="AdviseID" baseTableName="Letter_Generation" referencedColumnNames="AdviseID"/>
	</changeSet>
	
	<!-- <changeSet id="ST#1561.8.1" author="Mounika.M">
		<createIndex tableName="LETTER_GENERATION" indexName="idx_Ltr_Gen_finid">
			<column name="FinID"></column>
		</createIndex>
	</changeSet> -->
	
	<changeSet id="ST#1561.9" author="Mounika.M">
		<addDefaultValue columnName="Generated" tableName="Letter_Generation" defaultValue="0" />
	</changeSet>
	
	<changeSet id="ST#1561.10" author="Mounika.M" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE LETTER_GENERATION ADD CONSTRAINT DF_LG_GENERATED DEFAULT 0 FOR GENERATED;
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#1561.11" author="Mounika.M">
		<createTable tableName="LETTER_GENERATION_STAGE">
			<column name="ID" type="bigint" autoIncrement="true">
				<constraints nullable="false" />
			</column>
			<column name="FinID" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="RequestType" type="char(1)">
				<constraints nullable="false" />
			</column>
			<column name="LetterType" type="varchar(8)">
				<constraints nullable="false" />
			</column>
			<column name="AgreementTemplate" type="bigint">
				<constraints nullable="false" />
			</column>
			<column name="FeeTypeId" type="bigint"/>
			<column name="ModeOfTransfer" type="varchar(8)">
				<constraints nullable="false" />
			</column>
			<column name="CreatedDate" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="CreatedOn" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="EmailTemplate" type="bigint"/>
			<column name="Generated" type="boolean">
				<constraints nullable="false" />
			</column>
			<column name="GeneratedDate" type="datetime"/>
			<column name="GeneratedOn" type="datetime"/>
			<column name="GeneratedBy" type="bigint"/>
			<column name="AdviseID" type="bigint"/>
			<column name="TrackingID" type="bigint"/>
			<column name="Status" type="char(1)"/>
			<column name="Remarks" type="varchar(1000)"/>
		</createTable>
	</changeSet>
	
	<changeSet id="ST#1561.12" author="Mounika.M">
		<addPrimaryKey tableName="LETTER_GENERATION_STAGE" columnNames="ID" constraintName="PK_LETTER_GENERATION_STAGE_ID"/>
	</changeSet>
	
	<changeSet id="ST#1561.13" author="Mounika.M">
		<addForeignKeyConstraint constraintName="FK_LGS_FM_FinID" referencedTableName="FinanceMain" baseColumnNames="FinID" baseTableName="LETTER_GENERATION_STAGE" referencedColumnNames="FinID"/>
	</changeSet>
	
	<changeSet id="ST#1561.14" author="Mounika.M">
		<addForeignKeyConstraint constraintName="FK_LGS_AT_AGT" referencedTableName="BMTAggrementDef" baseColumnNames="AgreementTemplate" baseTableName="LETTER_GENERATION_STAGE" referencedColumnNames="AggId"/>
	</changeSet>
		
	<changeSet id="ST#1561.16" author="Mounika.M">
		<addForeignKeyConstraint constraintName="FK_LGS_TEMPLATE_ET" referencedTableName="Templates" baseColumnNames="EmailTemplate" baseTableName="LETTER_GENERATION_STAGE" referencedColumnNames="TemplateID"/>
	</changeSet>
	
	<changeSet id="ST#1561.17" author="Mounika.M">
		<addForeignKeyConstraint constraintName="FK_MA_AdviseID" referencedTableName="ManualAdvise" baseColumnNames="AdviseID" baseTableName="LETTER_GENERATION_STAGE" referencedColumnNames="AdviseID"/>
	</changeSet>
	
	<!-- <changeSet id="ST#1561.18" author="Mounika.M">
		<createIndex tableName="LETTER_GENERATION_STAGE" indexName="idx_LGS_finid">
			<column name="FinID"></column>
		</createIndex>
	</changeSet> -->
	
	<changeSet id="ST#1561.19" author="Mounika.M">
		<addDefaultValue columnName="Generated" tableName="LETTER_GENERATION_STAGE" defaultValue="0" />
	</changeSet>
	
	<changeSet id="ST#1561.20" author="Mounika.M" dbms="mssql">
		<sql>
			<![CDATA[	
				ALTER TABLE LETTER_GENERATION_STAGE ADD CONSTRAINT DF_LG_GENERATED DEFAULT 0 FOR GENERATED;
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#15956.21.3" author="Mounika.M">
		<comment>Rights for Customer Service Branch</comment>
		<sql>
			<![CDATA[
				DELETE FROM SECROLEGROUPS WHERE ROLEID = (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'GENERATE_LETTER_MAKER');
				DELETE FROM SECROLEGROUPS WHERE ROLEID = (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'GENERATE_LETTER_APPROVER');
				DELETE FROM SECROLEGROUPS WHERE ROLEID = (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'GENERATE_LETTER_VIEW');
				
				DELETE FROM SECROLEGROUPS WHERE ROLEID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_MAKER');
				DELETE FROM SECROLEGROUPS WHERE ROLEID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_APPROVER');
				DELETE FROM SECROLEGROUPS WHERE ROLEID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_VIEW');
				
				DELETE FROM SECROLES WHERE ROLECD = 'GENERATE_LETTER_MAKER';
				DELETE FROM SECROLES WHERE ROLECD = 'GENERATE_LETTER_APPROVER';
				DELETE FROM SECROLES WHERE ROLECD = 'GENERATE_LETTER_VIEW';
				
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_MAKER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_APPROVER');
				DELETE FROM SECGROUPRIGHTS WHERE GRPID = (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_VIEW');
				
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_MAKER');
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_APPROVER');
				DELETE FROM SECROLEGROUPS WHERE GRPID IN (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_VIEW');
				
				DELETE FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_MAKER';
				DELETE FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_APPROVER';
				DELETE FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_VIEW';
				
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RightName = 'menuItem_Generate_Letter');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RightName = 'button_GenerateLetter_btnNew');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RightName = 'button_GenerateLetter_SearchDialog');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RightName = 'button_GenerateLetter_btnEdit');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RightName = 'button_GenerateLetter_btnSave');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RightName = 'button_GenerateLetter_btnDelete');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RightName = 'button_GenerateLetter_btnProceed');
				DELETE FROM SECGROUPRIGHTS WHERE RIGHTID = (SELECT RIGHTID FROM SECRIGHTS WHERE RightName = 'button_GenerateLetter_btnDownLoad');
			
				
				DELETE FROM SECRIGHTS WHERE RightName = 'menuItem_Generate_Letter';            
				DELETE FROM SECRIGHTS WHERE RightName = 'button_GenerateLetter_btnNew';        
				DELETE FROM SECRIGHTS WHERE RightName = 'button_GenerateLetter_SearchDialog';  
				DELETE FROM SECRIGHTS WHERE RightName = 'button_GenerateLetter_btnEdit';       
				DELETE FROM SECRIGHTS WHERE RightName = 'button_GenerateLetter_btnSave';       
				DELETE FROM SECRIGHTS WHERE RightName = 'button_GenerateLetter_btnDelete';     
				DELETE FROM SECRIGHTS WHERE RightName = 'button_GenerateLetter_btnProceed';    
				DELETE FROM SECRIGHTS WHERE RightName = 'button_GenerateLetter_btnDownLoad';   
				
				
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 0, 'menuItem_Generate_Letter',              'MENU', 						0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2, 'button_GenerateLetter_btnNew',          'GenerateLetterList',    0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2, 'button_GenerateLetter_SearchDialog',      'GenerateLetterList',    0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2, 'button_GenerateLetter_btnEdit',         'GenerateLetterDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2, 'button_GenerateLetter_btnSave',         'GenerateLetterDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2, 'button_GenerateLetter_btnDelete',       'GenerateLetterDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2, 'button_GenerateLetter_btnProceed',      'GenerateLetterDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECRIGHTS (RIGHTID, RIGHTTYPE, RIGHTNAME, PAGE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 2, 'button_GenerateLetter_btnDownLoad',     'GenerateLetterDialog',  0, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				

				INSERT INTO SECGROUPS (GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'GENERATE_LETTER_MAKER',     'GENERATE LETTER MAKER',  	1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPS (GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'GENERATE_LETTER_APPROVER', 	'GENERATE LETTER  APPROVER', 1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				INSERT INTO SECGROUPS (GRPID, GRPCODE, GRPDESC, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'GENERATE_LETTER_VIEW', 		'GENERATE LETTER  VIEW',  	1, 1000, CURRENT_TIMESTAMP, NULL, NULL, NULL, NULL, NULL, NULL, 0);
				
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menuItem_Generate_Letter'),           	   1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_GenerateLetter_btnNew'),       	   1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_GenerateLetter_SearchDialog'),     1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_GenerateLetter_btnEdit'),      	   1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_GenerateLetter_btnSave'),      	   1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_GenerateLetter_btnDelete'),        1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_GenerateLetter_btnProceed'),       1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_MAKER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_GenerateLetter_btnDownLoad'),  	   1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				
				
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_APPROVER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menuItem_Generate_Letter'),      1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_APPROVER'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'button_GenerateLetter_btnSave'), 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				
				INSERT INTO SECGROUPRIGHTS (GRPRIGHTID, GRPID, RIGHTID, ACCESSTYPE, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES ((SELECT MAX(GRPRIGHTID) + 1 FROM SECGROUPRIGHTS), (SELECT GRPID  FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_VIEW'), (SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME = 'menuItem_Generate_Letter'), 1, 1, 1000, CURRENT_TIMESTAMP, 'Approved', null, null, null, null, null, 0);
				
				INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'GENERATE_LETTER_MAKER',    'Maker role for Genarate Letter',    '', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0); 
		  		INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'GENERATE_LETTER_APPROVER', 'Approver role for Genarate Letter', '', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		  		INSERT INTO SECROLES (ROLEID, ROLEAPP, ROLECD, ROLEDESC, ROLECATEGORY, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID) VALUES((SELECT MAX(ROLEID)+1 FROM SECROLES), 1, 'GENERATE_LETTER_VIEW',     'View role for Genarate Letter',	 '', 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		  		
		  		INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_MAKER'),    (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'GENERATE_LETTER_MAKER'),    0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		    	INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_APPROVER'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'GENERATE_LETTER_APPROVER'), 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		    	INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_VIEW'), 	 (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'GENERATE_LETTER_VIEW'),     0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		    	
		    	INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_MAKER'),    (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'MSTGRP1_MAKER'),    0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		    	INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_APPROVER'), (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'MSTGRP1_APPROVER'), 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		    	
		    	INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_VIEW'),    (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'MSTGRP1_MAKER'),    0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
		    	INSERT INTO SECROLEGROUPS (ROLEGRPID, GRPID, ROLEID, VERSION, LASTMNTBY, LASTMNTON, RECORDSTATUS, ROLECODE, NEXTROLECODE, TASKID, NEXTTASKID, RECORDTYPE, WORKFLOWID)VALUES ((SELECT MAX(ROLEGRPID)+1 FROM SECROLEGROUPS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE = 'GENERATE_LETTER_VIEW'),    (SELECT ROLEID FROM SECROLES WHERE ROLECD = 'MSTGRP1_APPROVER'), 0, 1000, CURRENT_TIMESTAMP, 'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>
	
	<changeSet id="ST#15956.22" author="Mounika.M">
		<createSequence sequenceName="SEQ_Letter_Generate_Manual" minValue="1" maxValue="9223372036854775807"
			incrementBy="1" startValue="1" />
	</changeSet>
	
	<changeSet id="ST#15956.23" author="Mounika.M">
		<createTable tableName="LETTER_GENERATE_MANUAL">
			<column name="Id" type="bigint" autoIncrement="true"></column>
			<column name="LetterType" type="varchar(8)">
				<constraints nullable="false"/>
			</column>
			<column name="FinID" type="bigint">
				<constraints nullable="false"/>
			</column>
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="CreatedBy" type="bigint" />
			<column name="CreatedOn" type="datetime" />
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="ApprovedBy" type="bigint" />
			<column name="ApprovedOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkFlowId" type="bigint">
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>
	
	<changeSet id="ST#15956.24" author="Mounika.M">
		<addPrimaryKey tableName="LETTER_GENERATE_MANUAL" columnNames="ID" constraintName="PK_LETTER_GENERATE_MANUAL_ID"/>
	</changeSet>
	
	<changeSet id="ST#15956.25" author="Mounika.M">
		<createTable tableName="LETTER_GENERATE_MANUAL_TEMP">
			<column name="Id" type="bigint" autoIncrement="true"></column>
			<column name="LetterType" type="varchar(8)">
				<constraints nullable="false"/>
			</column>
			<column name="FinID" type="bigint">
				<constraints nullable="false"/>
			</column>
			<column name="Version" type="int">
				<constraints nullable="false" />
			</column>
			<column name="CreatedBy" type="bigint" />
			<column name="CreatedOn" type="datetime" />
			<column name="LastMntBy" type="bigint" />
			<column name="LastMntOn" type="datetime" />
			<column name="ApprovedBy" type="bigint" />
			<column name="ApprovedOn" type="datetime" />
			<column name="RecordStatus" type="varchar(50)" />
			<column name="RoleCode" type="varchar(100)" />
			<column name="NextRoleCode" type="varchar(200)" />
			<column name="TaskId" type="varchar(50)" />
			<column name="NextTaskId" type="varchar(200)" />
			<column name="RecordType" type="varchar(50)" />
			<column name="WorkFlowId" type="bigint">
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>
	
	<changeSet id="ST#15956.26" author="Mounika.M">
		<addPrimaryKey tableName="LETTER_GENERATE_MANUAL_TEMP" columnNames="ID" constraintName="PK_LETTER_GEN_MANU_TEMP_ID"/>
	</changeSet>
	
	<changeSet id="ST#113.13" author="Gireesh.G">
		<insert tableName="WorkFlowDetails">
			<column name="WorkFlowId" valueComputed="(select max(WorkFlowId) + 1 from WorkFlowDetails)" />
			<column name="WorkFlowType">GENERATE_LETTER</column>
			<column name="WorkFlowSubType">Generate Letter</column>
			<column name="WorkFlowDesc">Generate Letter Workflow Process</column>
			<column name="JsonDesign" type="nclob"><![CDATA[NULL]]></column>
			<column name="SvgDesign" type="nclob"><![CDATA[NULL]]></column>
			<column name="WorkFlowXml" type="clob"><![CDATA[NULL]]></column>
			<column name="WorkFlowRoles">GENERATE_LETTER_MAKER;GENERATE_LETTER_APPROVER;GENERATE_LETTER_DOWNLOAD</column>
			<column name="FirstTaskOwner">GENERATE_LETTER_MAKER</column>
			<column name="WorkFlowActive">1</column>
			<column name="Version">0</column>
			<column name="LastMntBy">1000</column>
			<column name="LastMntOn" valueDate="current_timestamp" />
			<column name="RecordStatus">Null</column>
			<column name="RoleCode">Null</column>
			<column name="NextRoleCode">Null</column>
			<column name="TaskId">Null</column>
			<column name="NextTaskId">Null</column>
			<column name="RecordType">NULL</column>
		</insert>
	</changeSet>
	
	<changeSet id="ST#113.14" author="Gireesh.G">
		<update tableName="WORKFLOWDETAILS">
			<column name="JSONDESIGN" type="NCLOB"><![CDATA[{"resourceId":968,"properties":{"process_id":"GENERATE_LETTER","name":"Generate Letter Process","documentation":"Maker/Checker WorkFlow","category":"","listenerclass":"","listenerentitytype":""},"stencil":{"id":"BPMNDiagram"},"childShapes":[{"resourceId":"startEvent1","properties":{"overrideid":"","name":"Start"},"stencil":{"id":"StartNoneEvent"},"childShapes":[],"outgoing":[{"resourceId":"sid-CB1DEE00-A9A1-4162-BD4A-CC3D4B6E7CC1"}],"bounds":{"lowerRight":{"x":130,"y":193},"upperLeft":{"x":100,"y":163}},"dockers":[]},{"resourceId":"sid-38272C15-118D-4D4F-80E0-DD3A3FEC8897","properties":{"overrideid":"","name":"Maker","usertaskassignment":{"assignment":{"type":"idm","idm":{"type":"user","assignee":{"email":"GENERATE_LETTER_MAKER","firstName":"GENERATE_LETTER_MAKER","fullName":"GENERATE_LETTER_MAKER","id":"GENERATE_LETTER_MAKER","roledesc":"Workflow Maker","$$hashKey":"object:575"}}}},"additionalforms":"","formkeydefinition":"","prioritydefinition":"Role Queue","baseactor":"","duedatedefinition":"","multiinstance_type":"None","isforcompensation":"false"},"stencil":{"id":"UserTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-F8AD09C4-9AD3-4E9F-9432-0B753ACDBFF3"},{"resourceId":"sid-751124CB-1CC1-40AF-B5DB-360706ED6035"}],"bounds":{"lowerRight":{"x":275,"y":218},"upperLeft":{"x":175,"y":138}},"dockers":[]},{"resourceId":"sid-CB1DEE00-A9A1-4162-BD4A-CC3D4B6E7CC1","properties":{"overrideid":"","name":"","repruseaction":"false","conditionsequenceflow":"","defaultflow":"false","action":"","state":"","mandatenotes":"false"},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-38272C15-118D-4D4F-80E0-DD3A3FEC8897"}],"bounds":{"lowerRight":{"x":174.15625,"y":178},"upperLeft":{"x":130.609375,"y":178}},"dockers":[{"x":15,"y":15},{"x":50,"y":40}],"target":{"resourceId":"sid-38272C15-118D-4D4F-80E0-DD3A3FEC8897"}},{"resourceId":"sid-0E4577E1-11E1-450D-A2B6-DBE242378F08","properties":{"overrideid":"","name":"Approver","usertaskassignment":{"assignment":{"type":"idm","idm":{"type":"user","assignee":{"email":"GENERATE_LETTER_APPROVER","firstName":"GENERATE_LETTER_APPROVER","fullName":"GENERATE_LETTER_APPROVER","id":"GENERATE_LETTER_APPROVER","roledesc":"Workflow Approver","$$hashKey":"object:965"}}}},"additionalforms":"","formkeydefinition":"","prioritydefinition":"Role Queue","baseactor":"","duedatedefinition":"","multiinstance_type":"None","isforcompensation":"false"},"stencil":{"id":"UserTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-E75E07AC-22E7-4F1C-B6E9-733C5C1A3E22"}],"bounds":{"lowerRight":{"x":490,"y":218},"upperLeft":{"x":390,"y":138}},"dockers":[]},{"resourceId":"sid-6D2A3EE4-19BA-44FF-93AB-717BFF16FC01","properties":{"overrideid":"","name":"","sequencefloworder":""},"stencil":{"id":"ExclusiveGateway"},"childShapes":[],"outgoing":[{"resourceId":"sid-90A1D39E-E70D-4EB1-BB50-DF5F8F43359D"},{"resourceId":"sid-79F17746-BC9F-45F8-A31F-CA3969C76736"},{"resourceId":"sid-4A389521-29A1-4967-8A99-23A3D1BA8CDE"}],"bounds":{"lowerRight":{"x":575,"y":198},"upperLeft":{"x":535,"y":158}},"dockers":[]},{"resourceId":"sid-22D15E29-D37A-4505-A48C-7A329DF13429","properties":{"overrideid":"","name":"Complete Process","servicetaskexpression":"doApprove","isforcompensation":"false","multiinstance_type":"None"},"stencil":{"id":"approveTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-5AABA17A-E718-463D-95FA-7B0E9E938247"}],"bounds":{"lowerRight":{"x":760,"y":218},"upperLeft":{"x":660,"y":138}},"dockers":[]},{"resourceId":"sid-5FF3A069-112E-49C0-9A73-07B73600334B","properties":{"overrideid":"","name":"Approved"},"stencil":{"id":"EndNoneEvent"},"childShapes":[],"outgoing":[],"bounds":{"lowerRight":{"x":833,"y":192},"upperLeft":{"x":805,"y":164}},"dockers":[]},{"resourceId":"sid-5AABA17A-E718-463D-95FA-7B0E9E938247","properties":{"overrideid":"","name":"","repruseaction":"false","conditionsequenceflow":"","defaultflow":"false","action":"","state":"","mandatenotes":"false"},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-5FF3A069-112E-49C0-9A73-07B73600334B"}],"bounds":{"lowerRight":{"x":804.375,"y":178},"upperLeft":{"x":760.390625,"y":178}},"dockers":[{"x":50,"y":40},{"x":14,"y":14}],"target":{"resourceId":"sid-5FF3A069-112E-49C0-9A73-07B73600334B"}},{"resourceId":"sid-0AD002F0-2C5A-4D9F-B0D2-7A03A8025FEB","properties":{"overrideid":"","name":"Cancel Process","servicetaskexpression":"doReject","isforcompensation":"false","multiinstance_type":"None"},"stencil":{"id":"rejectTask"},"childShapes":[],"outgoing":[{"resourceId":"sid-9E25CBF1-5C3D-444E-B619-F8DF70F8710B"}],"bounds":{"lowerRight":{"x":605,"y":369},"upperLeft":{"x":505,"y":289}},"dockers":[]},{"resourceId":"sid-B8114559-3D1A-4A63-A65F-B62B0D0812CA","properties":{"overrideid":"","name":"Rejected"},"stencil":{"id":"EndNoneEvent"},"childShapes":[],"outgoing":[],"bounds":{"lowerRight":{"x":678,"y":343},"upperLeft":{"x":650,"y":315}},"dockers":[]},{"resourceId":"sid-9E25CBF1-5C3D-444E-B619-F8DF70F8710B","properties":{"overrideid":"","name":"","repruseaction":"false","conditionsequenceflow":"","defaultflow":"false","action":"","state":"","mandatenotes":"false"},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-B8114559-3D1A-4A63-A65F-B62B0D0812CA"}],"bounds":{"lowerRight":{"x":649.375,"y":329},"upperLeft":{"x":605.390625,"y":329}},"dockers":[{"x":50,"y":40},{"x":14,"y":14}],"target":{"resourceId":"sid-B8114559-3D1A-4A63-A65F-B62B0D0812CA"}},{"resourceId":"sid-E75E07AC-22E7-4F1C-B6E9-733C5C1A3E22","properties":{"overrideid":"","name":"","repruseaction":"false","conditionsequenceflow":"","defaultflow":"false","action":"","state":"","mandatenotes":"false"},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-6D2A3EE4-19BA-44FF-93AB-717BFF16FC01"}],"bounds":{"lowerRight":{"x":534.6484468700075,"y":178.4097335362338},"upperLeft":{"x":490.62889687999245,"y":178.2191727137662}},"dockers":[{"x":50,"y":40},{"x":20.5,"y":20.5}],"target":{"resourceId":"sid-6D2A3EE4-19BA-44FF-93AB-717BFF16FC01"}},{"resourceId":"sid-79F17746-BC9F-45F8-A31F-CA3969C76736","properties":{"overrideid":"","name":"Approve","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Approved'"}},"defaultflow":"false","action":"Approve","state":"Approved","mandatenotes":"false"},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-22D15E29-D37A-4505-A48C-7A329DF13429"}],"bounds":{"lowerRight":{"x":659.5117239866028,"y":178.43426377099223},"upperLeft":{"x":575.8124947633972,"y":178.16339247900777}},"dockers":[{"x":20.5,"y":20.5},{"x":50,"y":40}],"target":{"resourceId":"sid-22D15E29-D37A-4505-A48C-7A329DF13429"}},{"resourceId":"sid-751124CB-1CC1-40AF-B5DB-360706ED6035","properties":{"overrideid":"","name":"Cancel","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Cancelled'"}},"defaultflow":"false","action":"Cancel","state":"Cancelled","mandatenotes":true},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-0AD002F0-2C5A-4D9F-B0D2-7A03A8025FEB"}],"bounds":{"lowerRight":{"x":504.37109375,"y":329},"upperLeft":{"x":225,"y":218.51953125}},"dockers":[{"x":50,"y":40},{"x":225,"y":329},{"x":50,"y":40}],"target":{"resourceId":"sid-0AD002F0-2C5A-4D9F-B0D2-7A03A8025FEB"}},{"resourceId":"sid-4A389521-29A1-4967-8A99-23A3D1BA8CDE","properties":{"overrideid":"","name":"Reject","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Rejected'"}},"defaultflow":"false","action":"Reject","state":"Rejected","mandatenotes":true},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-0AD002F0-2C5A-4D9F-B0D2-7A03A8025FEB"}],"bounds":{"lowerRight":{"x":555.4341777591982,"y":288.0234430186572},"upperLeft":{"x":555.1361347408018,"y":198.3124944813428}},"dockers":[{"x":20.5,"y":20.5},{"x":50,"y":40}],"target":{"resourceId":"sid-0AD002F0-2C5A-4D9F-B0D2-7A03A8025FEB"}},{"resourceId":"sid-90A1D39E-E70D-4EB1-BB50-DF5F8F43359D","properties":{"overrideid":"","name":"Resubmit","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Resubmitted'"}},"defaultflow":"false","action":"Resubmit","state":"Resubmitted","mandatenotes":true},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-38272C15-118D-4D4F-80E0-DD3A3FEC8897"}],"bounds":{"lowerRight":{"x":555.5,"y":157.48046875},"upperLeft":{"x":225,"y":76}},"dockers":[{"x":20.5,"y":20.5},{"x":555.5,"y":76},{"x":225,"y":76},{"x":50,"y":40}],"target":{"resourceId":"sid-38272C15-118D-4D4F-80E0-DD3A3FEC8897"}},{"resourceId":"sid-F8AD09C4-9AD3-4E9F-9432-0B753ACDBFF3","properties":{"overrideid":"","name":"Submit","repruseaction":true,"conditionsequenceflow":{"expression":{"type":"static","staticValue":"vo.recordStatus == 'Submitted'"}},"defaultflow":"false","action":"Submit","state":"Submitted","mandatenotes":false},"stencil":{"id":"SequenceFlow"},"childShapes":[],"outgoing":[{"resourceId":"sid-0E4577E1-11E1-450D-A2B6-DBE242378F08"}],"bounds":{"lowerRight":{"x":389.44921875,"y":178},"upperLeft":{"x":275.55078125,"y":178}},"dockers":[{"x":50,"y":40},{"x":50,"y":40}],"target":{"resourceId":"sid-0E4577E1-11E1-450D-A2B6-DBE242378F08"}}],"bounds":{"lowerRight":{"x":1200,"y":1050},"upperLeft":{"x":0,"y":0}},"stencilset":{"url":"stencilsets/bpmn2.0/bpmn2.0.json","namespace":"http://b3mn.org/stencilset/bpmn2.0#"},"ssextensions":[]}]]></column>
			<column name="WORKFLOWXML" type="CLOB"><![CDATA[<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:activiti="http://activiti.org/bpmn" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI" typeLanguage="http://www.w3.org/2001/XMLSchema" expressionLanguage="http://www.w3.org/1999/XPath" targetNamespace="http://activiti.org/test"> <process id="GENERATE_LETTER" name="Generate Letter Workflow Process" isExecutable="true"> <documentation>Maker/Checker WorkFlow</documentation> <startEvent id="startEvent1" name="Start" /> <userTask id="sid-38272C15-118D-4D4F-80E0-DD3A3FEC8897" name="Maker" activiti:actor="GENERATE_LETTER_MAKER" activiti:assignmentLevel="Role Queue" /> <sequenceFlow id="sid-CB1DEE00-A9A1-4162-BD4A-CC3D4B6E7CC1" sourceRef="startEvent1" targetRef="sid-38272C15-118D-4D4F-80E0-DD3A3FEC8897" representsUserAction="false" mandateNotes="false" /> <userTask id="sid-0E4577E1-11E1-450D-A2B6-DBE242378F08" name="Approver" activiti:actor="GENERATE_LETTER_APPROVER" activiti:assignmentLevel="Role Queue" /> <exclusiveGateway id="sid-6D2A3EE4-19BA-44FF-93AB-717BFF16FC01" /> <serviceTask id="sid-22D15E29-D37A-4505-A48C-7A329DF13429" name="Complete Process" activiti:operation="doApprove" /> <endEvent id="sid-5FF3A069-112E-49C0-9A73-07B73600334B" name="Approved" /> <sequenceFlow id="sid-5AABA17A-E718-463D-95FA-7B0E9E938247" sourceRef="sid-22D15E29-D37A-4505-A48C-7A329DF13429" targetRef="sid-5FF3A069-112E-49C0-9A73-07B73600334B" representsUserAction="false" mandateNotes="false" /> <serviceTask id="sid-0AD002F0-2C5A-4D9F-B0D2-7A03A8025FEB" name="Cancel Process" activiti:operation="doReject" /> <endEvent id="sid-B8114559-3D1A-4A63-A65F-B62B0D0812CA" name="Rejected" /> <sequenceFlow id="sid-9E25CBF1-5C3D-444E-B619-F8DF70F8710B" sourceRef="sid-0AD002F0-2C5A-4D9F-B0D2-7A03A8025FEB" targetRef="sid-B8114559-3D1A-4A63-A65F-B62B0D0812CA" representsUserAction="false" mandateNotes="false" /> <sequenceFlow id="sid-E75E07AC-22E7-4F1C-B6E9-733C5C1A3E22" sourceRef="sid-0E4577E1-11E1-450D-A2B6-DBE242378F08" targetRef="sid-6D2A3EE4-19BA-44FF-93AB-717BFF16FC01" representsUserAction="false" mandateNotes="false" /> <sequenceFlow id="sid-79F17746-BC9F-45F8-A31F-CA3969C76736" name="Approve" sourceRef="sid-6D2A3EE4-19BA-44FF-93AB-717BFF16FC01" targetRef="sid-22D15E29-D37A-4505-A48C-7A329DF13429" action="Approve" state="Approved" representsUserAction="true" mandateNotes="false"> <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Approved'</conditionExpression> </sequenceFlow> <sequenceFlow id="sid-751124CB-1CC1-40AF-B5DB-360706ED6035" name="Cancel" sourceRef="sid-38272C15-118D-4D4F-80E0-DD3A3FEC8897" targetRef="sid-0AD002F0-2C5A-4D9F-B0D2-7A03A8025FEB" action="Cancel" state="Cancelled" representsUserAction="true" mandateNotes="true"> <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Cancelled'</conditionExpression> </sequenceFlow> <sequenceFlow id="sid-4A389521-29A1-4967-8A99-23A3D1BA8CDE" name="Reject" sourceRef="sid-6D2A3EE4-19BA-44FF-93AB-717BFF16FC01" targetRef="sid-0AD002F0-2C5A-4D9F-B0D2-7A03A8025FEB" action="Reject" state="Rejected" representsUserAction="true" mandateNotes="true"> <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Rejected'</conditionExpression> </sequenceFlow> <sequenceFlow id="sid-90A1D39E-E70D-4EB1-BB50-DF5F8F43359D" name="Resubmit" sourceRef="sid-6D2A3EE4-19BA-44FF-93AB-717BFF16FC01" targetRef="sid-38272C15-118D-4D4F-80E0-DD3A3FEC8897" action="Resubmit" state="Resubmitted" representsUserAction="true" mandateNotes="true"> <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Resubmitted'</conditionExpression> </sequenceFlow> <sequenceFlow id="sid-F8AD09C4-9AD3-4E9F-9432-0B753ACDBFF3" name="Submit" sourceRef="sid-38272C15-118D-4D4F-80E0-DD3A3FEC8897" targetRef="sid-0E4577E1-11E1-450D-A2B6-DBE242378F08" action="Submit" state="Submitted" representsUserAction="true" mandateNotes="false"> <conditionExpression xsi:type="tFormalExpression">vo.recordStatus == 'Submitted'</conditionExpression> </sequenceFlow> </process> <bpmndi:BPMNDiagram id="BPMNDiagram_GENERATE_LETTER"> <bpmndi:BPMNPlane bpmnElement="GENERATE_LETTER" id="BPMNPlane_GENERATE_LETTER"> <bpmndi:BPMNShape bpmnElement="startEvent1" id="BPMNShape_startEvent1"> <omgdc:Bounds height="30.0" width="30.0" x="100.0" y="163.0" /> </bpmndi:BPMNShape> <bpmndi:BPMNShape bpmnElement="sid-38272C15-118D-4D4F-80E0-DD3A3FEC8897" id="BPMNShape_sid-38272C15-118D-4D4F-80E0-DD3A3FEC8897"> <omgdc:Bounds height="80.0" width="100.0" x="175.0" y="138.0" /> </bpmndi:BPMNShape> <bpmndi:BPMNShape bpmnElement="sid-0E4577E1-11E1-450D-A2B6-DBE242378F08" id="BPMNShape_sid-0E4577E1-11E1-450D-A2B6-DBE242378F08"> <omgdc:Bounds height="80.0" width="100.0" x="390.0" y="138.0" /> </bpmndi:BPMNShape> <bpmndi:BPMNShape bpmnElement="sid-6D2A3EE4-19BA-44FF-93AB-717BFF16FC01" id="BPMNShape_sid-6D2A3EE4-19BA-44FF-93AB-717BFF16FC01"> <omgdc:Bounds height="40.0" width="40.0" x="535.0" y="158.0" /> </bpmndi:BPMNShape> <bpmndi:BPMNShape bpmnElement="sid-22D15E29-D37A-4505-A48C-7A329DF13429" id="BPMNShape_sid-22D15E29-D37A-4505-A48C-7A329DF13429"> <omgdc:Bounds height="80.0" width="100.0" x="660.0" y="138.0" /> </bpmndi:BPMNShape> <bpmndi:BPMNShape bpmnElement="sid-5FF3A069-112E-49C0-9A73-07B73600334B" id="BPMNShape_sid-5FF3A069-112E-49C0-9A73-07B73600334B"> <omgdc:Bounds height="28.0" width="28.0" x="805.0" y="164.0" /> </bpmndi:BPMNShape> <bpmndi:BPMNShape bpmnElement="sid-0AD002F0-2C5A-4D9F-B0D2-7A03A8025FEB" id="BPMNShape_sid-0AD002F0-2C5A-4D9F-B0D2-7A03A8025FEB"> <omgdc:Bounds height="80.0" width="100.0" x="505.0" y="289.0" /> </bpmndi:BPMNShape> <bpmndi:BPMNShape bpmnElement="sid-B8114559-3D1A-4A63-A65F-B62B0D0812CA" id="BPMNShape_sid-B8114559-3D1A-4A63-A65F-B62B0D0812CA"> <omgdc:Bounds height="28.0" width="28.0" x="650.0" y="315.0" /> </bpmndi:BPMNShape> <bpmndi:BPMNEdge bpmnElement="sid-F8AD09C4-9AD3-4E9F-9432-0B753ACDBFF3" id="BPMNEdge_sid-F8AD09C4-9AD3-4E9F-9432-0B753ACDBFF3"> <omgdi:waypoint x="275.0" y="178.0" /> <omgdi:waypoint x="390.0" y="178.0" /> </bpmndi:BPMNEdge> <bpmndi:BPMNEdge bpmnElement="sid-90A1D39E-E70D-4EB1-BB50-DF5F8F43359D" id="BPMNEdge_sid-90A1D39E-E70D-4EB1-BB50-DF5F8F43359D"> <omgdi:waypoint x="555.5" y="158.5" /> <omgdi:waypoint x="555.5" y="76.0" /> <omgdi:waypoint x="225.0" y="76.0" /> <omgdi:waypoint x="225.0" y="138.0" /> </bpmndi:BPMNEdge> <bpmndi:BPMNEdge bpmnElement="sid-79F17746-BC9F-45F8-A31F-CA3969C76736" id="BPMNEdge_sid-79F17746-BC9F-45F8-A31F-CA3969C76736"> <omgdi:waypoint x="574.5616883116883" y="178.4383116883117" /> <omgdi:waypoint x="660.0" y="178.16181229773463" /> </bpmndi:BPMNEdge> <bpmndi:BPMNEdge bpmnElement="sid-5AABA17A-E718-463D-95FA-7B0E9E938247" id="BPMNEdge_sid-5AABA17A-E718-463D-95FA-7B0E9E938247"> <omgdi:waypoint x="760.0" y="178.0" /> <omgdi:waypoint x="805.0" y="178.0" /> </bpmndi:BPMNEdge> <bpmndi:BPMNEdge bpmnElement="sid-CB1DEE00-A9A1-4162-BD4A-CC3D4B6E7CC1" id="BPMNEdge_sid-CB1DEE00-A9A1-4162-BD4A-CC3D4B6E7CC1"> <omgdi:waypoint x="130.0" y="178.0" /> <omgdi:waypoint x="175.0" y="178.0" /> </bpmndi:BPMNEdge> <bpmndi:BPMNEdge bpmnElement="sid-751124CB-1CC1-40AF-B5DB-360706ED6035" id="BPMNEdge_sid-751124CB-1CC1-40AF-B5DB-360706ED6035"> <omgdi:waypoint x="225.0" y="218.0" /> <omgdi:waypoint x="225.0" y="329.0" /> <omgdi:waypoint x="505.0" y="329.0" /> </bpmndi:BPMNEdge> <bpmndi:BPMNEdge bpmnElement="sid-4A389521-29A1-4967-8A99-23A3D1BA8CDE" id="BPMNEdge_sid-4A389521-29A1-4967-8A99-23A3D1BA8CDE"> <omgdi:waypoint x="555.4366666666667" y="197.56333333333333" /> <omgdi:waypoint x="555.1328903654485" y="289.0" /> </bpmndi:BPMNEdge> <bpmndi:BPMNEdge bpmnElement="sid-9E25CBF1-5C3D-444E-B619-F8DF70F8710B" id="BPMNEdge_sid-9E25CBF1-5C3D-444E-B619-F8DF70F8710B"> <omgdi:waypoint x="605.0" y="329.0" /> <omgdi:waypoint x="650.0" y="329.0" /> </bpmndi:BPMNEdge> <bpmndi:BPMNEdge bpmnElement="sid-E75E07AC-22E7-4F1C-B6E9-733C5C1A3E22" id="BPMNEdge_sid-E75E07AC-22E7-4F1C-B6E9-733C5C1A3E22"> <omgdi:waypoint x="490.0" y="178.2164502164502" /> <omgdi:waypoint x="535.4130434782609" y="178.41304347826087" /> </bpmndi:BPMNEdge> </bpmndi:BPMNPlane> </bpmndi:BPMNDiagram> </definitions>]]></column>
			<where>workflowtype='GENERATE_LETTER'</where>
		</update>
	</changeSet>
	
	
</databaseChangeLog> 