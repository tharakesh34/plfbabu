<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

	<property name="add.schema" value="dbo." dbms="mssql" />
	<property name="add.schema" value="" dbms="oracle" />
	<property name="add.schema" value="" dbms="postgresql" />
	<property name="call.substr" value="substring" dbms="mssql" />
	<property name="call.substr" value="substr" dbms="oracle" />
	<property name="call.substr" value="substring" dbms="postgresql" />
	<property name="call.auditdb" value="PLFAVANSEQC.." dbms="mssql" />
	<property name="call.auditdb" value=" " dbms="oracle" />
	<property name="call.concatenate" value="+" dbms="mssql" />
	<property name="call.concatenate" value="||" dbms="oracle" />
	<property name="call.concatenate" value="||" dbms="postgresql" />
	<property name="call.collength" value="LEN" dbms="mssql" />
	<property name="call.collength" value="LENGTH" dbms="oracle" />
	<property name="call.collength" value="LENGTH" dbms="postgresql" />
	<property name="call.date" value="getdate()" dbms="mssql" />
	<property name="call.date" value="sysdate" dbms="oracle" />
	<property name="call.date" value="now()" dbms="postgresql" />

	<changeSet id="1" author="Saikiran.v">
		<sql>
		   <![CDATA[
			 update SeqSecGroups set SeqNo = (select max(grpid)+1 from SECGROUPS);
			 update SeqSecRights set SeqNo = (select max(RightID)+1 from SECRIGHTS);
			 update SeqSecGroupRights set SeqNo = (select max(GRPRIGHTID)+1 from SECGROUPRIGHTS);
			 
			 delete from secgrouprights where grpid=(select grpid from secgroups where grpcode='COMMITMENT_MAKER');
			 delete from secgrouprights where grpid=(select grpid from secgroups where grpcode='COMMITMENT_APPROVER');
			 
			 delete from secgroups where grpcode='COMMITMENT_APPROVER';
			 delete from secgroups where grpcode='COMMITMENT_MAKER';
			 
			 delete from SecRights where page='CommitmentDialog';
			 delete from SecRights where rightname='menuItem_Commitment_Commitment';
			 delete from SecRights where rightname='menuItem_Enquiry_CommitmentEnquiry';
				
			 insert into SecGroups Values((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'COMMITMENT_MAKER', 'Commitment Process Maker', 0,1000,current_timestamp,'Approved',null,null,null,null,null,0 );
			 insert into SecGroups Values((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'COMMITMENT_APPROVER', 'Commitment Process Approver', 0,1000,current_timestamp,'Approved',null,null,null,null,null,0 );
			 	
 			 insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'CommitmentDialog_CmtAccount','CommitmentDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
 			 insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENT_MAKER'), (select RightID from SecRights WHERE RightName='CommitmentDialog_CmtAccount'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );
 			 
 			 insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'CommitmentDialog_CmtActiveStatus','CommitmentDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
 			 insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENT_MAKER'), (select RightID from SecRights WHERE RightName='CommitmentDialog_CmtActiveStatus'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );
 			
 			 insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'CommitmentDialog_CmtAmount','CommitmentDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
 			 insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENT_MAKER'), (select RightID from SecRights WHERE RightName='CommitmentDialog_CmtAmount'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );
 			 
 			 insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'CommitmentDialog_CmtAvailable','CommitmentDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
 			 insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENT_MAKER'), (select RightID from SecRights WHERE RightName='CommitmentDialog_CmtAvailable'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );
 			 
 			 insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'CommitmentDialog_CmtAvailableMonths','CommitmentDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
 			 insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENT_MAKER'), (select RightID from SecRights WHERE RightName='CommitmentDialog_CmtAvailableMonths'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );
 			 
 			 insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'CommitmentDialog_CmtBranch','CommitmentDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
 			 insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENT_MAKER'), (select RightID from SecRights WHERE RightName='CommitmentDialog_CmtBranch'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );
 			 
 			 insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'CommitmentDialog_CmtCcy','CommitmentDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
 			 insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENT_MAKER'), (select RightID from SecRights WHERE RightName='CommitmentDialog_CmtCcy'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );
 			
 			 insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'CommitmentDialog_CmtCharges','CommitmentDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
 			 insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENT_MAKER'), (select RightID from SecRights WHERE RightName='CommitmentDialog_CmtCharges'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );
 			
 			 insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'CommitmentDialog_CmtChargesAccount','CommitmentDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
 			 insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENT_MAKER'), (select RightID from SecRights WHERE RightName='CommitmentDialog_CmtChargesAccount'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );
 			
 			 insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'CommitmentDialog_CmtEndDate','CommitmentDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
 			 insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENT_MAKER'), (select RightID from SecRights WHERE RightName='CommitmentDialog_CmtEndDate'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );
 			 
 			 insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'CommitmentDialog_CmtExpDate','CommitmentDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
 			 insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENT_MAKER'), (select RightID from SecRights WHERE RightName='CommitmentDialog_CmtExpDate'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );
 			 
 			 insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'CommitmentDialog_CmtLimitLine','CommitmentDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
 			 insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENT_MAKER'), (select RightID from SecRights WHERE RightName='CommitmentDialog_CmtLimitLine'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );
 			 
 			 insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'CommitmentDialog_CmtNonperformingStatus','CommitmentDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
 			 insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENT_MAKER'), (select RightID from SecRights WHERE RightName='CommitmentDialog_CmtNonperformingStatus'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );
 			 
 			 insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'CommitmentDialog_CmtNotes','CommitmentDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
 			 insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENT_MAKER'), (select RightID from SecRights WHERE RightName='CommitmentDialog_CmtNotes'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );
 			
 			 insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'CommitmentDialog_CmtPftRateMax','CommitmentDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
 			 insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENT_MAKER'), (select RightID from SecRights WHERE RightName='CommitmentDialog_CmtPftRateMax'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );
 			 
 			 insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'CommitmentDialog_CmtPromisedDate','CommitmentDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
 			 insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENT_MAKER'), (select RightID from SecRights WHERE RightName='CommitmentDialog_CmtPromisedDate'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );
 			 
 			 insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'CommitmentDialog_CmtReference','CommitmentDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
 			 insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENT_MAKER'), (select RightID from SecRights WHERE RightName='CommitmentDialog_CmtReference'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );
 			 
 			 insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'CommitmentDialog_CmtRvwDate','CommitmentDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
 			 insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENT_MAKER'), (select RightID from SecRights WHERE RightName='CommitmentDialog_CmtRvwDate'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );
 			 
 			 insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'CommitmentDialog_CmtStartDate','CommitmentDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
 			 insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENT_MAKER'), (select RightID from SecRights WHERE RightName='CommitmentDialog_CmtStartDate'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );

 			 insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'CommitmentDialog_CmtStopRateRange','CommitmentDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
 			 insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENT_MAKER'), (select RightID from SecRights WHERE RightName='CommitmentDialog_CmtStopRateRange'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );


 			 insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'CommitmentDialog_CmtTitle','CommitmentDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
 			 insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENT_MAKER'), (select RightID from SecRights WHERE RightName='CommitmentDialog_CmtTitle'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );

 			 insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'CommitmentDialog_CmtUtilizedAmount','CommitmentDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
 			 insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENT_MAKER'), (select RightID from SecRights WHERE RightName='CommitmentDialog_CmtUtilizedAmount'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );

 			 insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'CommitmentDialog_CollateralRequired','CommitmentDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
 			 insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENT_MAKER'), (select RightID from SecRights WHERE RightName='CommitmentDialog_CollateralRequired'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );

 			 insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'CommitmentDialog_CommitmentFlags','CommitmentDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
 			 insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENT_MAKER'), (select RightID from SecRights WHERE RightName='CommitmentDialog_CommitmentFlags'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );

 			 insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'CommitmentDialog_CustCIF','CommitmentDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
 			 insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENT_MAKER'), (select RightID from SecRights WHERE RightName='CommitmentDialog_CustCIF'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );

 			 insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'CommitmentDialog_FacilityRef','CommitmentDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
 			 insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENT_MAKER'), (select RightID from SecRights WHERE RightName='CommitmentDialog_FacilityRef'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );

 			 insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'CommitmentDialog_MultiBranch','CommitmentDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
 			 insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENT_MAKER'), (select RightID from SecRights WHERE RightName='CommitmentDialog_MultiBranch'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );

 			 insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'CommitmentDialog_OpenAccount','CommitmentDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
 			 insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENT_MAKER'), (select RightID from SecRights WHERE RightName='CommitmentDialog_OpenAccount'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );

 			 insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'CommitmentDialog_Revolving','CommitmentDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
 			 insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENT_MAKER'), (select RightID from SecRights WHERE RightName='CommitmentDialog_Revolving'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );

 			 insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'CommitmentDialog_SharedCmt','CommitmentDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
 			 insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENT_MAKER'), (select RightID from SecRights WHERE RightName='CommitmentDialog_SharedCmt'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );

 			 insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),2,'button_CommitmentDialog_btnSave','CommitmentDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
 			 insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENT_MAKER'), (select RightID from SecRights WHERE RightName='button_CommitmentDialog_btnSave'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );
			 insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENT_APPROVER'), (select RightID from SecRights WHERE RightName='button_CommitmentDialog_btnSave'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );
			 
 			 insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),0,'menuItem_Enquiry_CommitmentEnquiry','MENU',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
 			 insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENT_MAKER'), (select RightID from SecRights WHERE RightName='menuItem_Enquiry_CommitmentEnquiry'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );
 			 insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENT_APPROVER'), (select RightID from SecRights WHERE RightName='menuItem_Enquiry_CommitmentEnquiry'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );

			 insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),0,'menuItem_Commitment_Commitment','MENU',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
 			 insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENT_MAKER'), (select RightID from SecRights WHERE RightName='menuItem_Commitment_Commitment'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );
 			 insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENT_APPROVER'), (select RightID from SecRights WHERE RightName='menuItem_Commitment_Commitment'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );	
			
 			 insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),2,'button_CommitmentDialog_btnNewCmtRate','CommitmentDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
 			 insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENT_MAKER'), (select RightID from SecRights WHERE RightName='button_CommitmentDialog_btnNewCmtRate'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );

 			 insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),2,'button_CommitmentDialog_btnEdit','CommitmentDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
 			 insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENT_MAKER'), (select RightID from SecRights WHERE RightName='button_CommitmentDialog_btnEdit'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );
 			 
 			 insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),2,'button_CommitmentDialog_btnDelete','CommitmentDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
 			 insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENT_MAKER'), (select RightID from SecRights WHERE RightName='button_CommitmentDialog_btnDelete'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );
			  	
			 update SeqSecGroups set SeqNo = (select max(grpid)+1 from SECGROUPS);
			 update SeqSecRights set SeqNo = (select max(RightID)+1 from SECRIGHTS);
			 update SeqSecGroupRights set SeqNo = (select max(GRPRIGHTID)+1 from SECGROUPRIGHTS);
		    ]]>
		</sql>
	</changeSet>

	<changeSet id="2" author="Saikiran.v">
		<sql>
		 	<![CDATA[
				INSERT INTO SMTPARAMETERS Values('ALLOW_COMMITMENTS','Commitments Required Or Not','String', 0, 'N', 1, 0, NULL, NULL,'Commitments Required Or Not',1,  1000,CURRENT_TIMESTAMP,'Approved', NULL, NULL, NULL, NULL, NULL, 0);
			]]>
		</sql>
	</changeSet>

	<changeSet id="3" author="Saikiran.v">
		<sql>
		   <![CDATA[
	  		delete from secgrouprights where grpid=(select grpid from secgroups where grpcode='COMMITMENTWORKFLOW_MAKER');
			delete from secgrouprights where grpid=(select grpid from secgroups where grpcode='COMMITMENTWORKFLOW_APPROVER');

			delete from secgroups where grpcode='COMMITMENTWORKFLOW_MAKER';
			delete from secgroups where grpcode='COMMITMENTWORKFLOW_APPROVER';

			delete from secgrouprights where grpid=(select grpid from secgroups where grpcode='COMMITMENT_REFERENCEDETAIL_MAKER');		 
			delete from secgrouprights where rightid=(select rightid from SecRights where rightname='menuItem_SolutionFactory_CommitmentWorkFlow');
			delete from secgrouprights where rightid=(select rightid from SecRights where rightname='menuItem_SolutionFactory_CommitmentReferenceDetail');

			delete from secgroups where grpcode='COMMITMENT_REFERENCEDETAIL_MAKER';
			delete from SecRights where page='CommitmentWorkFlowDialog';
			delete from SecRights where page='CommitmentList';
			delete from SecRights where rightname='menuItem_SolutionFactory_CommitmentWorkFlow';
			delete from SecRights where rightname='menuItem_SolutionFactory_CommitmentReferenceDetail';

			insert into SecGroups Values((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'COMMITMENTWORKFLOW_MAKER', 'Maker for Commitment Workflow', 0,1000,current_timestamp,'Approved',null,null,null,null,null,0 );
			insert into SecGroups Values((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'COMMITMENTWORKFLOW_APPROVER', 'Approver for Commitment Workflow', 0,1000,current_timestamp,'Approved',null,null,null,null,null,0 );

			insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'CommitmentWorkFlowDialog_finEvent','CommitmentWorkFlowDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
			insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENTWORKFLOW_MAKER'), (select RightID from SecRights WHERE RightName='CommitmentWorkFlowDialog_finEvent'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );

			insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'CommitmentWorkFlowDialog_finType','CommitmentWorkFlowDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
			insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENTWORKFLOW_MAKER'), (select RightID from SecRights WHERE RightName='CommitmentWorkFlowDialog_finType'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );

			insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),2,'button_CommitmentWorkFlowDialog_btnDelete','CommitmentWorkFlowDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
			insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENTWORKFLOW_MAKER'), (select RightID from SecRights WHERE RightName='button_CommitmentWorkFlowDialog_btnDelete'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );

			insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),2,'button_CommitmentWorkFlowDialog_btnSave','CommitmentWorkFlowDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
			insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENTWORKFLOW_MAKER'), (select RightID from SecRights WHERE RightName='button_CommitmentWorkFlowDialog_btnSave'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );
			insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENTWORKFLOW_APPROVER'), (select RightID from SecRights WHERE RightName='button_CommitmentWorkFlowDialog_btnSave'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );

			insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'button_CommitmentList_NewCommitment','CommitmentList',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
			insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENTWORKFLOW_MAKER'), (select RightID from SecRights WHERE RightName='button_CommitmentList_NewCommitment'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );

			insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),0,'menuItem_SolutionFactory_CommitmentWorkFlow','MENU',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
			insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENTWORKFLOW_MAKER'), (select RightID from SecRights WHERE RightName='menuItem_SolutionFactory_CommitmentWorkFlow'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );
			insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENTWORKFLOW_APPROVER'), (select RightID from SecRights WHERE RightName='menuItem_SolutionFactory_CommitmentWorkFlow'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );

			delete from lmtfinanceworkflowdef where fintype='CMTMNT';
			delete from lmtfinanceworkflowdef where fintype='CMTNEW';

			INSERT INTO lmtfinanceworkflowdef(fintype, screencode, workflowtype, modulename, version, lastmntby, lastmnton, recordstatus, rolecode, nextrolecode, taskid, nexttaskid, recordtype, workflowid, finevent) VALUES   ('CMTMNT', 'DDE', 'MSTGRP1', 'COMMITMENT' ,1, 1000, current_timestamp, 'Approved',null,null,null,null,null, 0, 'Origination');
			INSERT INTO lmtfinanceworkflowdef(fintype, screencode, workflowtype, modulename, version, lastmntby, lastmnton, recordstatus, rolecode, nextrolecode, taskid, nexttaskid, recordtype, workflowid, finevent) VALUES   ('CMTNEW', 'DDE', 'MSTGRP1', 'COMMITMENT' ,1, 1000, current_timestamp, 'Approved',null,null,null,null,null, 0, 'Origination');

			insert into SecGroups Values((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'COMMITMENT_REFERENCEDETAIL_MAKER', 'Commitment Process Editor Maker', 0,1000,current_timestamp,'Approved',null,null,null,null,null,0 );
			insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),0,'menuItem_SolutionFactory_CommitmentReferenceDetail','MENU',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
			insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENT_REFERENCEDETAIL_MAKER'), (select RightID from SecRights WHERE RightName='menuItem_SolutionFactory_CommitmentReferenceDetail'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );

			insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),0,'CommitmentWorkFlowDialog_screenCode','CommitmentWorkFlowDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
			insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENT_REFERENCEDETAIL_MAKER'), (select RightID from SecRights WHERE RightName='CommitmentWorkFlowDialog_screenCode'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );

			insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),0,'CommitmentWorkFlowDialog_workFlowType','CommitmentWorkFlowDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
			insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENT_REFERENCEDETAIL_MAKER'), (select RightID from SecRights WHERE RightName='CommitmentWorkFlowDialog_workFlowType'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );

			delete from CommitmentType where typecode='CMTMNT';
			delete from CommitmentType where typecode='CMTNEW';

			insert into CommitmentType values ('CMTNEW','CMT NEW Process',1);
			insert into CommitmentType values ('CMTMNT','CMT Maintaint Process',1); 
	    ]]>
		</sql>
	</changeSet>

	<changeSet id="4" author="Saikiran.v">
		<createView viewName="commitments_aview" replaceIfExists="true">
			 SELECT t1.cmtreference,
				t1.custid,
				t2.custshrtname,
				t1.cmtbranch,
				t3.branchdesc,
				t1.openaccount,
				t1.cmtaccount,
				t1.cmtccy,
				t1.cmtpftratemin,
				t1.cmtpftratemax,
				t1.cmtamount,
				t1.cmtutilizedamount,
				t1.cmtavailable,
				t1.cmtpromiseddate,
				t1.cmtstartdate,
				t1.cmtexpdate,
				t1.cmtrvwdate,
				t1.cmttitle,
				t1.cmtnotes,
				t1.revolving,
				t1.sharedcmt,
				t1.multibranch,
				t1.facilityref,
				t1.version,
				t1.lastmntby,
				t1.lastmnton,
				t1.recordstatus,
				t1.rolecode,
				t1.nextrolecode,
				t1.taskid,
				t1.nexttaskid,
				t1.recordtype,
				t1.workflowid,
				t1.cmtstopraterange,
				t1.cmtactive,
				t1.nonperforming,
				t1.cmtcharges,
				t1.chargesaccount,
				t2.custcif,
				t6.fintypedesc AS facilityrefdesc,
				t1.cmtavailablemonths,
				t1.collateralrequired,
				t1.cmtenddate,
				t1.limitlineid,
				t4.CcyEditField
				 from commitments t1
				 JOIN customers t2 ON t1.custid = t2.custid
				 JOIN rmtbranches t3 ON t1.cmtbranch = t3.branchcode
				 JOIN RMTCurrencies t4 ON T1.CmtCcy = T4.CcyCode 
				 JOIN limitdetails t5 ON t1.limitlineid = t5.detailid
				 LEFT JOIN rmtfinancetypes t6 ON t1.facilityref = t6.fintype
		</createView>
	</changeSet>

	<changeSet id="5_pre" author="murthy.y" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_save_and_drop_dependencies ('plf', 'commitmentrates');
					select deps_save_and_drop_dependencies ('plf', 'commitmentrates_temp');
			]]>
		</sql>
	</changeSet>

	<changeSet id="5" author="Saikiran.v">
		<modifyDataType tableName="commitmentrates" columnName="cmtspecialrate" newDataType="varchar(8)" />
		<modifyDataType tableName="commitmentrates_Temp" columnName="cmtspecialrate" newDataType="varchar(8)" />
	</changeSet>

	<changeSet id="5_post" author="murthy.y" dbms="postgresql">
		<sql>
			<![CDATA[
					select deps_restore_dependencies ('plf', 'commitmentrates');
					select deps_restore_dependencies ('plf', 'commitmentrates_temp');
			]]>
		</sql>
	</changeSet>

	<changeSet id="6" author="Saikiran.v">
		<sql>
			<![CDATA[
				delete from secgrouprights where grpid=(select grpid from secgroups where grpcode='COMMITMENTRATE_MAKER');
				delete from secgrouprights where grpid=(select grpid from secgroups where grpcode='COMMITMENTRATE_APPROVER'); 
				delete from SecRights where page='CommitmentRateDialog';

				delete from secgroups where grpcode='COMMITMENTRATE_MAKER';
				delete from secgroups where grpcode='COMMITMENTRATE_APPROVER';

				insert into SecGroups Values((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'COMMITMENTRATE_MAKER', 'CommitmentRate Maker', 0,1000,current_timestamp,'Approved',null,null,null,null,null,0 );
				insert into SecGroups Values((SELECT MAX(GRPID)+1 FROM SECGROUPS), 'COMMITMENTRATE_APPROVER', 'CommitmentRate Approver', 0,1000,current_timestamp,'Approved',null,null,null,null,null,0 );

				insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'button_CommitmentRateDialog_btnDelete','CommitmentRateDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
				insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENTRATE_MAKER'), (select RightID from SecRights WHERE RightName='button_CommitmentRateDialog_btnDelete'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );

				insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'button_CommitmentRateDialog_btnEdit','CommitmentRateDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
				insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENTRATE_MAKER'), (select RightID from SecRights WHERE RightName='button_CommitmentRateDialog_btnEdit'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );

				insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'button_CommitmentRateDialog_btnSave','CommitmentRateDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
				insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENTRATE_MAKER'), (select RightID from SecRights WHERE RightName='button_CommitmentRateDialog_btnSave'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );
				insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENTRATE_APPROVER'), (select RightID from SecRights WHERE RightName='button_CommitmentRateDialog_btnSave'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );

				insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'CommitmentRateDialog_CmtActualRate','CommitmentRateDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
				insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENTRATE_MAKER'), (select RightID from SecRights WHERE RightName='CommitmentRateDialog_CmtActualRate'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );

				insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'CommitmentRateDialog_CmtBaseRate','CommitmentRateDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
				insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENTRATE_MAKER'), (select RightID from SecRights WHERE RightName='CommitmentRateDialog_CmtBaseRate'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );

				insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'CommitmentRateDialog_CmtCalculatedRate','CommitmentRateDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
				insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENTRATE_MAKER'), (select RightID from SecRights WHERE RightName='CommitmentRateDialog_CmtCalculatedRate'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );

				insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'CommitmentRateDialog_CmtMargin','CommitmentRateDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
				insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENTRATE_MAKER'), (select RightID from SecRights WHERE RightName='CommitmentRateDialog_CmtMargin'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );

				insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'CommitmentRateDialog_CmtReference','CommitmentRateDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
				insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENTRATE_MAKER'), (select RightID from SecRights WHERE RightName='CommitmentRateDialog_CmtReference'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );

				insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'CommitmentRateDialog_CmtRvwFrq','CommitmentRateDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
				insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENTRATE_MAKER'), (select RightID from SecRights WHERE RightName='CommitmentRateDialog_CmtRvwFrq'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );

				insert into SecRights Values((SELECT MAX(RIGHTID)+1 FROM SECRIGHTS),3,'CommitmentRateDialog_CmtSpecialRate','CommitmentRateDialog',0,1000,current_timestamp,'Approved',' ',' ',' ',' ',' ',0 );
				insert into SecGroupRights Values((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='COMMITMENTRATE_MAKER'), (select RightID from SecRights WHERE RightName='CommitmentRateDialog_CmtSpecialRate'),1,0,10000,current_timestamp,' ',' ',' ',' ',' ',' ',0 );
			]]>
		</sql>
	</changeSet>

	<changeSet id="7" author="Saikiran.v">
		<addColumn tableName="PartnerBanks">
			<column name="DownloadType" type="varchar(10)" />
		</addColumn>
	</changeSet>

	<changeSet id="8" author="Saikiran.v">
		<addColumn tableName="PartnerBanks">
			<column name="DataEngineConfigName" type="varchar(50)" />
		</addColumn>
	</changeSet>

	<changeSet id="9" author="Saikiran.v">
		<addColumn tableName="PartnerBanks_temp">
			<column name="DownloadType" type="varchar(10)" />
		</addColumn>
	</changeSet>

	<changeSet id="10" author="Saikiran.v">
		<addColumn tableName="PartnerBanks_temp">
			<column name="DataEngineConfigName" type="varchar(50)" />
		</addColumn>
	</changeSet>

	<changeSet id="11" author="Saikiran.v">
		<createView viewName="partnerbanks_aview" replaceIfExists="true">
						SELECT t1.partnerbankid,
			    t1.partnerbankcode,
			    t1.partnerbankname,
			    t1.bankcode,
			    t1.bankbranchcode,
			    t1.branchmicrcode,
			    t1.branchifsccode,
			    t1.branchcity,
			    t1.utilitycode,
			    t1.accountno,
			    t1.actype,
			    t1.alwfiledownload,
			    t1.alwdisb,
			    t1.alwpayment,
			    t1.alwreceipt,
			    t1.infavourlength,
			    t1.active,
			    t1.version,
			    t1.lastmntby,
			    t1.lastmnton,
			    t1.recordstatus,
			    t1.rolecode,
			    t1.nextrolecode,
			    t1.taskid,
			    t1.nexttaskid,
			    t1.recordtype,
			    t1.workflowid,
			    t2.bankname  bankcodename,
			    t3.branchdesc  bankbranchcodename,
			    t4.actypedesc  actypename,
			    t1.hostglcode,
			    t1.profitcenterid,
			    t1.costcenterid,
			    t1.filename,
			    t1.entity,
			    t1.downloadType,
			    t1.dataEngineConfigName,
			    t5.entitydesc
			    FROM partnerbanks t1
			    JOIN bmtbankdetail t2 ON t1.bankcode = t2.bankcode
			    JOIN bankbranches t3 ON t1.bankbranchcode = t3.branchcode AND t1.bankcode = t3.bankcode
			    JOIN rmtaccounttypes t4 ON t1.actype = t4.actype
			    LEFT JOIN entity t5 ON t1.entity = t5.entitycode
		</createView>
	</changeSet>

	<changeSet id="12" author="Saikiran.v">
		<createView viewName="partnerbanks_view" replaceIfExists="true">
		 				SELECT t1.partnerbankid,
			    t1.partnerbankcode,
			    t1.partnerbankname,
			    t1.bankcode,
			    t1.bankbranchcode,
			    t1.branchmicrcode,
			    t1.branchifsccode,
			    t1.branchcity,
			    t1.utilitycode,
			    t1.accountno,
			    t1.actype,
			    t1.alwfiledownload,
			    t1.alwdisb,
			    t1.alwpayment,
			    t1.alwreceipt,
			    t1.infavourlength,
			    t1.active,
			    t1.version,
			    t1.lastmntby,
			    t1.lastmnton,
			    t1.recordstatus,
			    t1.rolecode,
			    t1.nextrolecode,
			    t1.taskid,
			    t1.nexttaskid,
			    t1.recordtype,
			    t1.workflowid,
			    t2.bankname AS bankcodename,
			    t3.branchdesc AS bankbranchcodename,
			    t4.actypedesc AS actypename,
			    t1.hostglcode,
			    t1.profitcenterid,
			    t1.costcenterid,
			    t1.filename,
			    t1.entity,
			    t5.entitydesc,
			    t1.downloadType,
			    t1.dataEngineConfigName
			   FROM partnerbanks_temp t1
			     JOIN bmtbankdetail t2 ON t1.bankcode = t2.bankcode
			     JOIN bankbranches t3 ON t1.bankbranchcode = t3.branchcode AND t1.bankcode = t3.bankcode
			     JOIN rmtaccounttypes t4 ON t1.actype = t4.actype
			     LEFT JOIN entity t5 ON t1.entity = t5.entitycode
			UNION ALL
			 SELECT t1.partnerbankid,
			    t1.partnerbankcode,
			    t1.partnerbankname,
			    t1.bankcode,
			    t1.bankbranchcode,
			    t1.branchmicrcode,
			    t1.branchifsccode,
			    t1.branchcity,
			    t1.utilitycode,
			    t1.accountno,
			    t1.actype,
			    t1.alwfiledownload,
			    t1.alwdisb,
			    t1.alwpayment,
			    t1.alwreceipt,
			    t1.infavourlength,
			    t1.active,
			    t1.version,
			    t1.lastmntby,
			    t1.lastmnton,
			    t1.recordstatus,
			    t1.rolecode,
			    t1.nextrolecode,
			    t1.taskid,
			    t1.nexttaskid,
			    t1.recordtype,
			    t1.workflowid,
			    t2.bankname AS bankcodename,
			    t3.branchdesc AS bankbranchcodename,
			    t4.actypedesc AS actypename,
			    t1.hostglcode,
			    t1.profitcenterid,
			    t1.costcenterid,
			    t1.filename,
			    t1.entity,
			    t5.entitydesc,
			    t1.downloadType,
			    t1.dataEngineConfigName
			   FROM partnerbanks t1
			     JOIN bmtbankdetail t2 ON t1.bankcode = t2.bankcode
			     JOIN bankbranches t3 ON t1.bankbranchcode = t3.branchcode AND t1.bankcode = t3.bankcode
			     JOIN rmtaccounttypes t4 ON t1.actype = t4.actype
			     LEFT JOIN entity t5 ON t1.entity = t5.entitycode
			  WHERE NOT (EXISTS ( SELECT 1
			           FROM partnerbanks_temp
			          WHERE partnerbanks_temp.partnerbankid = t1.partnerbankid))		
		</createView>
	</changeSet>

	<changeSet id="13" author="Saikiran.v">
		<sql>
			<![CDATA[
			update SeqSecRights set SeqNo = (select max(RightID)+1 from SECRIGHTS);
			update SeqSecGroupRights set SeqNo = (select max(GRPRIGHTID)+1 from SECGROUPRIGHTS);

			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'PartnerBankDialog_DownloadType','PartnerBankDialog',0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='PARTNERBANK_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='PartnerBankDialog_DownloadType'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);

			INSERT INTO SECRIGHTS SELECT (SELECT MAX(RIGHTID)+1 FROM SECRIGHTS), 3, 'PartnerBankDialog_DataEngineConfigName','PartnerBankDialog',0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0 FROM SEQSECRIGHTS WHERE 0=0;
			INSERT INTO SECGROUPRIGHTS VALUES((SELECT MAX(GRPRIGHTID)+1 FROM SECGROUPRIGHTS), (SELECT GRPID FROM SECGROUPS WHERE GRPCODE='PARTNERBANK_MAKER') ,(SELECT RIGHTID FROM SECRIGHTS WHERE RIGHTNAME='PartnerBankDialog_DataEngineConfigName'), 1, 0,1000,CURRENT_TIMESTAMP,' ',' ',' ',' ',' ',' ',0);

			update SeqSecRights set SeqNo = (select max(RightID)+1 from SECRIGHTS);
			update SeqSecGroupRights set SeqNo = (select max(GRPRIGHTID)+1 from SECGROUPRIGHTS);
		
			]]>
		</sql>
	</changeSet>

	<changeSet id="14" author="Saikiran.v">
		<sql>
			<![CDATA[
				update data_engine_config set Name = 'DISB_EXPORT_DEFAULT' where name = 'DISB_HDFC_EXPORT';
				update data_engine_status set Name = 'DISB_EXPORT_DEFAULT' where name = 'DISB_HDFC_EXPORT';
				update data_engine_config set Name = 'DISB_EXPORT_CITI' where name = 'DISB_CITI_EXPORT';
				update data_engine_status set Name = 'DISB_EXPORT_CITI' where name = 'DISB_CITI_EXPORT';
				update data_engine_config set Name = 'DISB_EXPORT_IMPS' where name = 'DISB_IMPS_EXPORT';
				update data_engine_status set Name = 'DISB_EXPORT_IMPS' where name = 'DISB_IMPS_EXPORT';

				update data_engine_config set Name = 'DISB_EXPORT_OTHER_NEFT_RTGS' where name = 'DISB_OTHER_NEFT_RTGS_EXPORT';
				update data_engine_status set Name = 'DISB_EXPORT_OTHER_NEFT_RTGS' where name = 'DISB_OTHER_NEFT_RTGS_EXPORT';

				update data_engine_config set Name = 'DISB_EXPORT_OTHER_CHEQUE_DD' where name = 'DISB_OTHER_CHEQUE_DD_EXPORT';
				update data_engine_status set Name = 'DISB_EXPORT_OTHER_CHEQUE_DD' where name = 'DISB_OTHER_CHEQUE_DD_EXPORT';

				update partnerbanks set downloadType ='OFFL';
				update partnerbanks_Temp set downloadType ='OFFL';

				update partnerbanks set dataEngineConfigName ='DISB_EXPORT_DEFAULT' where AlwFileDownload=1;
				update partnerbanks_Temp set dataEngineConfigName ='DISB_EXPORT_DEFAULT' where AlwFileDownload=1;
			 ]]>
		</sql>
	</changeSet>

</databaseChangeLog>