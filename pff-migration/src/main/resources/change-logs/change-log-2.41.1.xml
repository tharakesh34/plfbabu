<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">
	<property name="add.schema" value="dbo." dbms="mssql" />
	<property name="add.schema" value=" " dbms="oracle" />
	<property name="call.substr" value="substring" dbms="mssql" />
	<property name="call.substr" value="substr" dbms="oracle" />
	<property name="call.auditdb" value="PFFBFSQCAudit.." dbms="mssql" />
	<property name="call.auditdb" value=" " dbms="oracle" />
	<property name="call.concatenate" value="+" dbms="mssql" />
	<property name="call.concatenate" value="||" dbms="oracle" />
	<property name="call.collength" value="LEN" dbms="mssql" />
	<property name="call.collength" value="LENGTH" dbms="oracle" />
	<property name="call.date" value="getdate()" dbms="mssql" />
	<property name="call.date" value="sysdate" dbms="oracle" />

	<changeSet author="DurgaPrasad G" id="00">
		<modifyDataType tableName="DATA_ENGINE_TABLE" columnName="StatusUpdate"
			newDataType="varchar(1000)" />
	</changeSet>
	<changeSet author="DurgaPrasad G" id="01">
<sql>
	DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT TABLEID FROM DATA_ENGINE_TABLE WHERE CONFIGID IN (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'DISB_HDFC_CHQ_EXPORT')); 
	DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID IN (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'DISB_HDFC_CHQ_EXPORT');
	DELETE FROM  DATA_ENGINE_CONFIG WHERE NAME = 'DISB_HDFC_CHQ_EXPORT';

	INSERT INTO DATA_ENGINE_CONFIG VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG),'DISB_HDFC_CHQ_EXPORT', 'Disbursement for NON-HDFC NEFT/RTGS export', 2, NULL, NULL, NULL, ',' , 0, 0, 'TransactionType, BeneficiaryCode, BeneficiaryAccountNo, InstrumentAmount, BeneficiaryName, DraweeLocation, PrintLocation, Address1, Address2, Address3, Address4, Address5, InstructionRefNo, CustomerRefNo, PaymentDetails1, PaymentDetails2, PaymentDetails3, PaymentDetails4, PaymentDetails5, PaymentDetails6, PaymentDetails7, ChequeNo, TrnDate, MICRNumber, IFSCCode, Bank, Branch, Email', NULL,  NULL, 'A', 'D:\Data-Engine\PFF\Bajaj\Disbusment\Request', 'HDFC_NEFT_TL', '.${SEQ_DATE_FILE}', 0, NULL, '${DDMM}', NULL, 0, NULL, 1, 1); 

	 INSERT INTO DATA_ENGINE_TABLE  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT'), 'DISB_HDFC_CHEQUE_DD_EXPORT',  0, 'InstructionRefNo, CustomerRefNo', NULL, 'update FinAdvancePayments FAP set (FAP.STATUS) = (''AC'') where exists (select 1 from DATA_ENGINE_EXECUTION_FIELDS DEF where FAP.FINREFERENCE = DEF.FIELD1 AND FAP.PAYMENTSEQ = DEF.FIELD2 AND DEF.ID = :ID)', NULL, NULL, NULL, NULL, NULL, 0, 0, 0, NULL);

	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT')), 	'TransactionType',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT')), 	'BeneficiaryCode',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT')), 	'BeneficiaryAccountNo',	0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT')), 	'InstrumentAmount',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT')), 	'BeneficiaryName',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT')), 	'DraweeLocation',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT')), 	'PrintLocation',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT')), 	'Address1',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT')), 	'Address2',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT')), 	'Address3',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT')), 	'Address4',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT')), 	'Address5',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT')), 	'InstructionRefNo',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT')), 	'CustomerRefNo',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT')), 	'PaymentDetails1',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT')), 	'PaymentDetails2',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT')), 	'PaymentDetails3',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT')), 	'PaymentDetails4',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT')), 	'PaymentDetails5',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT')), 	'PaymentDetails6',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT')), 	'PaymentDetails7',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT')), 	'ChequeNo',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT')), 	'TrnDate',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT')), 	'MICRNumber',			0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT')), 	'IFSCCode',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT')), 	'Bank',					0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT')), 	'Branch',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT')), 	'Email',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);

	UPDATE SEQ_DATA_ENGINE_CONFIG SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_CONFIG);
	UPDATE SEQ_DATA_ENGINE_TABLE  SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_TABLE);
	UPDATE SEQ_DATA_ENGINE_COLUMN SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_COLUMN);
	UPDATE SEQ_DATA_ENGINE_STATUS SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_STATUS);
	</sql>
</changeSet>


<changeSet author="DurgaPrasad G" id="02">
<sql>
	DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT TABLEID FROM DATA_ENGINE_TABLE WHERE CONFIGID IN (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'DISB_HDFC_NEFT_EXPORT')); 
	DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID IN (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'DISB_HDFC_NEFT_EXPORT');
	DELETE FROM  DATA_ENGINE_CONFIG WHERE NAME = 'DISB_HDFC_NEFT_EXPORT';

	INSERT INTO DATA_ENGINE_CONFIG VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG),'DISB_HDFC_NEFT_EXPORT', 'Disbursement for HDFC NEFT export', 2, NULL, NULL, NULL, ',' , 0, 0, 'TransactionType, BeneficiaryCode, BeneficiaryAccountNo, InstrumentAmount, BeneficiaryName, DraweeLocation, PrintLocation, Address1, Address2, Address3, Address4, Address5, InstructionRefNo, CustomerRefNo, PaymentDetails1, PaymentDetails2, PaymentDetails3, PaymentDetails4, PaymentDetails5, PaymentDetails6, PaymentDetails7, ChequeNo, TrnDate, MICRNumber, IFSCCode, Bank, Branch, Email', NULL,  NULL, 'A', 'D:\Data-Engine\PFF\Bajaj\Disbusment\Request', 'HDFC_NEFT_TL', '.${SEQ_DATE_FILE}', 0, NULL, '${DDMM}', NULL, 0, NULL, 1, 1); 

	INSERT INTO DATA_ENGINE_TABLE  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT'), 'DISB_HDFC_NEFT_RTGS_EXPORT',  0, 'InstructionRefNo, CustomerRefNo', NULL, 'update FinAdvancePayments FAP set (FAP.STATUS) = (''AC'') where exists (select 1 from DATA_ENGINE_EXECUTION_FIELDS DEF where FAP.FINREFERENCE = DEF.FIELD1 AND FAP.PAYMENTSEQ = DEF.FIELD2 AND DEF.ID = :ID)', NULL, NULL, NULL, NULL, NULL, 0, 0, 0, NULL);

	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT')), 	'TransactionType',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT')), 	'BeneficiaryCode',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT')), 	'BeneficiaryAccountNo',	0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT')), 	'InstrumentAmount',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT')), 	'BeneficiaryName',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT')), 	'DraweeLocation',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT')), 	'PrintLocation',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT')), 	'Address1',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT')), 	'Address2',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT')), 	'Address3',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT')), 	'Address4',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT')), 	'Address5',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT')), 	'InstructionRefNo',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT')), 	'CustomerRefNo',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT')), 	'PaymentDetails1',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT')), 	'PaymentDetails2',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT')), 	'PaymentDetails3',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT')), 	'PaymentDetails4',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT')), 	'PaymentDetails5',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT')), 	'PaymentDetails6',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT')), 	'PaymentDetails7',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT')), 	'ChequeNo',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT')), 	'TrnDate',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT')), 	'MICRNumber',			0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT')), 	'IFSCCode',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT')), 	'Bank',					0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT')), 	'Branch',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT')), 	'Email',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);

	UPDATE SEQ_DATA_ENGINE_CONFIG SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_CONFIG);
	UPDATE SEQ_DATA_ENGINE_TABLE  SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_TABLE);
	UPDATE SEQ_DATA_ENGINE_COLUMN SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_COLUMN);
	UPDATE SEQ_DATA_ENGINE_STATUS SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_STATUS);
	</sql>
</changeSet>


<changeSet author="DurgaPrasad G" id="03">
<sql>
	DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT TABLEID FROM DATA_ENGINE_TABLE WHERE CONFIGID IN (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'DISB_OTHER_CHQ_EXPORT')); 
	DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID IN (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'DISB_OTHER_CHQ_EXPORT');
	DELETE FROM  DATA_ENGINE_CONFIG WHERE NAME = 'DISB_OTHER_CHQ_EXPORT';

	INSERT INTO DATA_ENGINE_CONFIG VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG),'DISB_OTHER_CHQ_EXPORT', 'Disbursement for NON-HDFC CHQ/DD export', 2, NULL, NULL, NULL, ',' , 0, 0, 'TransactionType, BeneficiaryCode, BeneficiaryAccountNo, InstrumentAmount, BeneficiaryName, DraweeLocation, PrintLocation, Address1, Address2, Address3, Address4, Address5, InstructionRefNo, CustomerRefNo, PaymentDetails1, PaymentDetails2, PaymentDetails3, PaymentDetails4, PaymentDetails5, PaymentDetails6, PaymentDetails7, ChequeNo, TrnDate, MICRNumber, IFSCCode, Bank, Branch, Email', NULL,  NULL, 'A', 'D:\Data-Engine\PFF\Bajaj\Disbusment\Request', 'OTHER_CHQ', '.${SEQ_DATE_FILE}', 0, NULL, '${DDMM}', NULL, 0, NULL, 1, 1); 
	INSERT INTO DATA_ENGINE_TABLE  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_CHQ_EXPORT'), 'FINADVANCEPAYMENTS',  0, 'TransactionId', NULL, 'update FinAdvancePayments FAP set (FAP.STATUS) = (''AC'') where exists (select 1 from DATA_ENGINE_EXECUTION_FIELDS DEF where FAP.FINREFERENCE = DEF.FIELD1 AND FAP.PAYMENTSEQ = DEF.FIELD2 AND DEF.ID = :ID)', NULL, NULL, NULL, NULL, NULL, 0, 0, 0, NULL);

    INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'FINADVANCEPAYMENTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_CHQ_EXPORT')), 	'TransactionId',	0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'FINADVANCEPAYMENTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_CHQ_EXPORT')), 	'BeneficiaryName',	0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'FINADVANCEPAYMENTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_CHQ_EXPORT')), 	'PAYABLEAT',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'FINADVANCEPAYMENTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_CHQ_EXPORT')), 	'Amount',			0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'FINADVANCEPAYMENTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_CHQ_EXPORT')), 	'DDCharges',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	 
	UPDATE SEQ_DATA_ENGINE_CONFIG SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_CONFIG);
	UPDATE SEQ_DATA_ENGINE_TABLE  SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_TABLE);
	UPDATE SEQ_DATA_ENGINE_COLUMN SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_COLUMN);
	UPDATE SEQ_DATA_ENGINE_STATUS SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_STATUS);
</sql>
</changeSet>

<changeSet author="DurgaPrasad G" id="04">
<sql>
	DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT TABLEID FROM DATA_ENGINE_TABLE WHERE CONFIGID IN (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'DISB_OTHER_NEFT_EXPORT')); 
	DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID IN (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'DISB_OTHER_NEFT_EXPORT');
	DELETE FROM  DATA_ENGINE_CONFIG WHERE NAME = 'DISB_OTHER_NEFT_EXPORT';

	INSERT INTO DATA_ENGINE_CONFIG VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG),'DISB_OTHER_NEFT_EXPORT', 'Disbursement for HDFC Cheque/DD export', 2, NULL, NULL, NULL, ',' , 0, 0, 'TransactionType, BeneficiaryCode, BeneficiaryAccountNo, InstrumentAmount, BeneficiaryName, DraweeLocation, PrintLocation, Address1, Address2, Address3, Address4, Address5, InstructionRefNo, CustomerRefNo, PaymentDetails1, PaymentDetails2, PaymentDetails3, PaymentDetails4, PaymentDetails5, PaymentDetails6, PaymentDetails7, ChequeNo, TrnDate, MICRNumber, IFSCCode, Bank, Branch, Email', NULL,  NULL, 'A', 'D:\Data-Engine\PFF\Bajaj\Disbusment\Request', 'OTHER_NEFT', '.${SEQ_DATE_FILE}', 0, NULL, '${DDMM}', NULL, 0, NULL, 1, 1); 
    INSERT INTO DATA_ENGINE_TABLE  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT'), 'DISB_OTHER_NEFT_RTGS_EXPORT',  0, 'InstructionRefNo, CustomerRefNo', NULL, 'update FinAdvancePayments FAP set (FAP.STATUS) = (''AC'') where exists (select 1 from DATA_ENGINE_EXECUTION_FIELDS DEF where FAP.FINREFERENCE = DEF.FIELD1 AND FAP.PAYMENTSEQ = DEF.FIELD2 AND DEF.ID = :ID)', NULL, NULL, NULL, NULL, NULL, 0, 0, 0, NULL);

	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT')), 	'TransactionType',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT')), 	'BeneficiaryCode',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT')), 	'BeneficiaryAccountNo',	0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT')), 	'InstrumentAmount',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT')), 	'BeneficiaryName',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT')), 	'DraweeLocation',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT')), 	'PrintLocation',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT')), 	'Address1',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT')), 	'Address2',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT')), 	'Address3',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT')), 	'Address4',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT')), 	'Address5',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT')), 	'InstructionRefNo',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT')), 	'CustomerRefNo',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT')), 	'PaymentDetails1',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT')), 	'PaymentDetails2',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT')), 	'PaymentDetails3',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT')), 	'PaymentDetails4',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT')), 	'PaymentDetails5',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT')), 	'PaymentDetails6',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT')), 	'PaymentDetails7',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT')), 	'ChequeNo',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT')), 	'TrnDate',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT')), 	'MICRNumber',			0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT')), 	'IFSCCode',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT')), 	'Bank',					0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT')), 	'Branch',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT')), 	'Email',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);

	UPDATE SEQ_DATA_ENGINE_CONFIG SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_CONFIG);
	UPDATE SEQ_DATA_ENGINE_TABLE  SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_TABLE);
	UPDATE SEQ_DATA_ENGINE_COLUMN SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_COLUMN);
	UPDATE SEQ_DATA_ENGINE_STATUS SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_STATUS);
</sql>
</changeSet>

<changeSet author="DurgaPrasad G" id="05">
<sql>
	DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT TABLEID FROM DATA_ENGINE_TABLE WHERE CONFIGID IN (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'DISB_RESPONSE')); 
	DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID IN (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'DISB_RESPONSE');
	DELETE FROM DATA_ENGINE_CONFIG WHERE NAME = 'DISB_RESPONSE';

	INSERT INTO DATA_ENGINE_CONFIG VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG),'DISB_RESPONSE', 'Cheque response file', 1, NULL, NULL, NULL, ',' , 0, 0, NULL, NULL,  '', 'A', 'D:\Data-Engine\PFF\Bajaj\Disbusment\Response', 'HDFC_Cheque_Response', '.csv', 0, NULL, NULL, NULL, 0, NULL, 1, 1); 
	INSERT INTO DATA_ENGINE_TABLE  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_RESPONSE'), 'FINADVANCEPAYMENTS',  2, 'FinReference', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 0, 0, 0, NULL);

	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'FINADVANCEPAYMENTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_RESPONSE')),		'FinReference',		0, 'N', NULL, NULL,	NULL, 		0, NULL,	 0, 	NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'FINADVANCEPAYMENTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_RESPONSE')),		'LLREFERENCENO',	0, 'N', NULL, NULL,	NULL, 		0, NULL,	 2, 	NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'FINADVANCEPAYMENTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_RESPONSE')),		'LLDATE',			0, 'N', NULL, NULL,	NULL, 		0, NULL,	 3, 	NULL, NULL, NULL, 'dd-MM-yyyy', 0);

	UPDATE SEQ_DATA_ENGINE_CONFIG SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_CONFIG);
	UPDATE SEQ_DATA_ENGINE_TABLE  SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_TABLE);
	UPDATE SEQ_DATA_ENGINE_COLUMN SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_COLUMN);
	UPDATE SEQ_DATA_ENGINE_STATUS SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_STATUS);
</sql>
</changeSet>

<changeSet author="DurgaPrasad G" id="06">
<sql>
	DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT TABLEID FROM DATA_ENGINE_TABLE WHERE CONFIGID IN (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_EXPORT')); 
	DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID IN (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_EXPORT');
	DELETE FROM  DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_EXPORT';

	INSERT INTO DATA_ENGINE_CONFIG VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG),'MANDATES_EXPORT', 'Mandates export', 2, NULL, NULL, NULL, ',' , 0, 0, 'Mandate Sequence No.,Customer Name,Branch,Product,Application ID,LAN No.,EMI Amount,Open ECS Flag,Account Holder Name,MICR Code (System),Account No. (System),Account Type (System),Updation Date,User ID,First Due Date,EMI End Date,Open ECS End Date,Open ECS Upper Limit,Bank Name,ECS Amount(System),ECS Start Date(System),ECS End Date(System),Application Form No.,Customer Code,Repayment Mode,Mandate No.', 'Row:{INSTRUMENT AUTO DATA ENTRY REPORT}Row:{User:${USER_ID}}Row:{Business Date:${SYS_DATE_DD-MMM-YYYY}}Row:{Branch Name:${FILTER_BRANCHCODE}}Row:{FromDate:${FILTER_FROMDATE},  ToDate:${FILTER_TODATE}}ROW:{EMPTY_ROW}',  '', 'A', 'D:\Data-Engine\PFF\Bajaj\Mandate\Request', 'MANDATE_', '.csv', 0, NULL, '${SEQ_DATE_FILE}', NULL, 0, NULL, 1, 1); 
	INSERT INTO DATA_ENGINE_TABLE  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT'), 'INTERFACE_MANDATE_REG_VIEW',  0, 'MANDATEID', 'INPUTDATE &gt;= :FROMDATE, INPUTDATE &lt;=:TODATE, BRANCHCODE IN (:BRANCHCODE)', 'QUERY:Update MANDATES set Status = ''AC'' from DATA_ENGINE_EXECUTION_FIELDS DEF where MANDATEID = DEF.FIELD1 AND DEF.ID = :IDQUERY:INSERT INTO MANDATESSTATUS SELECT FIELD1, ''AC'', ''Awaiting confirmation'', :SYSDATE, ID FROM DATA_ENGINE_EXECUTION_FIELDS', NULL, NULL, NULL, NULL, NULL, 0, 0, 0, NULL);

	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'INTERFACE_MANDATE_REG_VIEW' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'BANKCODE',			0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, 'FIELD_SEQ:', 0);	
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'INTERFACE_MANDATE_REG_VIEW' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'CUSTOMERNAME',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'INTERFACE_MANDATE_REG_VIEW' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'BRANCHCODE',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'INTERFACE_MANDATE_REG_VIEW' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'FINTYPE',			0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'INTERFACE_MANDATE_REG_VIEW' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'APPLICATIONNO',	0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'INTERFACE_MANDATE_REG_VIEW' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'LANNO',			0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'INTERFACE_MANDATE_REG_VIEW' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'EMI',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'INTERFACE_MANDATE_REG_VIEW' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'OPENMANDATE',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'INTERFACE_MANDATE_REG_VIEW' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'ACCHOLDERNAME',	0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'INTERFACE_MANDATE_REG_VIEW' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'MICR',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'INTERFACE_MANDATE_REG_VIEW' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'ACCNUMBER',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'INTERFACE_MANDATE_REG_VIEW' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'ACCTYPE',			0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'INTERFACE_MANDATE_REG_VIEW' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'SYSTEMDATE',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, 'DATE:dd-MMM-yyyy', 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'INTERFACE_MANDATE_REG_VIEW' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'USERNAME',			0, 'N', NULL, NULL,		  '${USER_ID}', 	 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'INTERFACE_MANDATE_REG_VIEW' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'FIRSTDUEDATE',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, 'DATE:dd-MMM-yyyy', 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'INTERFACE_MANDATE_REG_VIEW' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'EMIENDDATE',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, 'DATE:dd-MMM-yyyy', 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'INTERFACE_MANDATE_REG_VIEW' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'OPENENDDATE',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, 'DATE:dd-MMM-yyyy', 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'INTERFACE_MANDATE_REG_VIEW' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'MAXLIMIT',			0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'INTERFACE_MANDATE_REG_VIEW' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'BANKNAME',			0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'INTERFACE_MANDATE_REG_VIEW' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'DEBITAMOUNT',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'INTERFACE_MANDATE_REG_VIEW' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'STARTDATE',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, 'DATE:dd-MMM-yyyy', 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'INTERFACE_MANDATE_REG_VIEW' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'ENDDATE',			0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, 'DATE:dd-MMM-yyyy', 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'INTERFACE_MANDATE_REG_VIEW' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'APPLICATIONNO',	0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'INTERFACE_MANDATE_REG_VIEW' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'CUSTCIF',			0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'INTERFACE_MANDATE_REG_VIEW' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'MANDATETYPE',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'INTERFACE_MANDATE_REG_VIEW' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'MANDATEID',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);

	UPDATE SEQ_DATA_ENGINE_CONFIG SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_CONFIG);
	UPDATE SEQ_DATA_ENGINE_TABLE  SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_TABLE);
	UPDATE SEQ_DATA_ENGINE_COLUMN SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_COLUMN);
	UPDATE SEQ_DATA_ENGINE_STATUS SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_STATUS);
</sql>
</changeSet>

<changeSet author="DurgaPrasad G" id="07">
<sql>
	DELETE FROM DATA_ENGINE_COLUMN WHERE TABLEID IN (SELECT TABLEID FROM DATA_ENGINE_TABLE WHERE CONFIGID IN (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_IMPORT')); 
	DELETE FROM DATA_ENGINE_TABLE WHERE CONFIGID IN (SELECT ID FROM DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_IMPORT');
	DELETE FROM  DATA_ENGINE_CONFIG WHERE NAME = 'MANDATES_IMPORT';

	INSERT INTO DATA_ENGINE_CONFIG VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG),'MANDATES_IMPORT', 'Mandate response file', 1, NULL, NULL, NULL, ',' , 1, 0, NULL, NULL,  '', 'A', 'D:\Data-Engine\PFF\Bajaj\Mandate\Response', 'Mandate_Import', '.csv', 0, NULL, NULL, NULL, 0, NULL, 1, 1); 
	INSERT INTO DATA_ENGINE_TABLE  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT'), 'MANDATES',  2, 'MANDATEID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 0, 0, 0, NULL);
	INSERT INTO DATA_ENGINE_TABLE  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT'), 'MANDATESSTATUS',  1, 'MANDATEID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 0, 0, 0, NULL);
	 
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATES' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')),		'MANDATEID',		0, 'N', NULL, NULL,	NULL, 		0, NULL,	 15, 	NULL, NULL, 																						NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATES' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')),		'MANDATEREF',		0, 'N', NULL, NULL,	NULL, 		0, NULL,	 11, 	NULL, NULL, 																						NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATES' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')),		'STATUS',			0, 'N', NULL, NULL,	NULL, 		0, NULL,	 12, 	NULL, 'if((STATUS ==  ''Rejected'' )){Result =''YES'';  return;}else {Result =''NO'';  return;}', 	NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATES' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')),		'REASON',			0, 'N', NULL, NULL,	NULL, 		0, NULL,	 13,	NULL, NULL, 																						NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATES' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')),		'LASTMNTBY',		0, 'N', NULL, NULL,	'USER_ID', 	0, NULL,	 0, 	NULL, NULL, 																						NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATES' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')),		'LASTMNTON',		0, 'N', NULL, NULL,	'SYS_DATE', 0, NULL,	 0, 	NULL, NULL, 																						NULL, NULL, 0);

	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATESSTATUS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')),	'MANDATEID',	0, 'N', NULL, NULL,	NULL, 		0, NULL,	 15, 	NULL, NULL, 																						NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATESSTATUS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')),	'STATUS',		0, 'N', NULL, NULL,	NULL, 		0, NULL,	 12, 	NULL, 'if((STATUS ==  ''Rejected'' )){Result =''YES'';  return;}else {Result =''NO'';  return;}', 	NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATESSTATUS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')),	'REASON',		0, 'N', NULL, NULL,	NULL, 		0, NULL,	 13, 	NULL, NULL, 																						NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATESSTATUS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')),	'CHANGEDATE',	0, 'N', NULL, NULL,	'SYS_DATE', 0, NULL,	 0, 	NULL, NULL, 																						NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATESSTATUS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')),	'FILEID',		0, 'N', NULL, NULL,	'FILE_ID',	0, NULL,	 0, 	NULL, NULL, 																						NULL, NULL, 0);

	UPDATE SEQ_DATA_ENGINE_CONFIG SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_CONFIG);
	UPDATE SEQ_DATA_ENGINE_TABLE  SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_TABLE);
	UPDATE SEQ_DATA_ENGINE_COLUMN SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_COLUMN);
	UPDATE SEQ_DATA_ENGINE_STATUS SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_STATUS);
</sql>
</changeSet>

<changeSet author="DurgaPrasad G" id="08">
	<createView viewName="DISB_HDFC_CHEQUE_DD_EXPORT" replaceIfExists="true">
	 SELECT ${call.substr}(finAdvPayments.PAYMENTTYPE,0,1) TransactionType, beneficiary.CUSTID BeneficiaryCode, finAdvPayments.BENEFICIARYACCNO BeneficiaryAccountNo, 
	finAdvPayments.AMTTOBERELEASED InstrumentAmount, finAdvPayments.BENEFICIARYNAME BeneficiaryName, '' DraweeLocation, '' PrintLocation, '' Address1,
	'' Address2, '' Address3, '' Address4, ''Address5, finAdvPayments.FINREFERENCE InstructionRefNo, finAdvPayments.PAYMENTSEQ CustomerRefNo, '' PaymentDetails1,
	'' PaymentDetails2, '' PaymentDetails3, '' PaymentDetails4, '' PaymentDetails5, '' PaymentDetails6, '' PaymentDetails7,
	finAdvPayments.LLREFERENCENO ChequeNo, LLDATE TrnDate, branches.MICR MICRNumber, branches.IFSC IFSCCode, 
	bank.BANKNAME BANK, branches.BRANCHDESC BRANCH, beneficiary.EMAIL
	from FinAdvancePayments finAdvPayments 
	left outer join BANKBRANCHES branches on finAdvPayments.bankbranchid=branches.bankbranchid  
	inner join BMTBANKDETAIL bank on finAdvPayments.BANKCODE=bank.BANKCODE
	left outer join  BENEFICIARY beneficiary on finAdvPayments.BENEFICIARYNAME=beneficiary.ACCHOLDERNAME 
	and finAdvPayments.BENEFICIARYACCNO=beneficiary.ACCNUMBER
	WHERE finAdvPayments.STATUS='APPROVED' AND finAdvPayments.PAYMENTTYPE IN ('CHEQUE', 'DD') AND bank.BANKCODE='19'
	</createView>

</changeSet>

<changeSet author="DurgaPrasad G" id="09">

	<createView viewName="DISB_HDFC_NEFT_RTGS_EXPORT" replaceIfExists="true">
    SELECT ${call.substr}(finAdvPayments.PAYMENTTYPE,0,1) TransactionType, beneficiary.CUSTID BeneficiaryCode, finAdvPayments.BENEFICIARYACCNO BeneficiaryAccountNo, 
	finAdvPayments.AMTTOBERELEASED InstrumentAmount, finAdvPayments.BENEFICIARYNAME BeneficiaryName, '' DraweeLocation, '' PrintLocation, '' Address1,
	'' Address2, '' Address3, '' Address4, ''Address5, finAdvPayments.FINREFERENCE InstructionRefNo, finAdvPayments.PAYMENTSEQ CustomerRefNo, '' PaymentDetails1,
	'' PaymentDetails2, '' PaymentDetails3, '' PaymentDetails4, '' PaymentDetails5, '' PaymentDetails6, '' PaymentDetails7,
	finAdvPayments.LLREFERENCENO ChequeNo, finAdvPayments.LLDATE TrnDate, branches.MICR MICRNumber, branches.IFSC IFSCCode, 
	bank.BANKNAME BANK, branches.BRANCHDESC BRANCH, beneficiary.EMAIL
	from FinAdvancePayments finAdvPayments 
	inner join BANKBRANCHES branches on finAdvPayments.bankbranchid=branches.bankbranchid  
	inner join BMTBANKDETAIL bank on branches.BANKCODE=bank.BANKCODE
	left outer join  BENEFICIARY beneficiary on finAdvPayments.BENEFICIARYNAME=beneficiary.ACCHOLDERNAME 
	and finAdvPayments.BENEFICIARYACCNO=beneficiary.ACCNUMBER
	WHERE finAdvPayments.STATUS='APPROVED' AND finAdvPayments.PAYMENTTYPE IN ('NEFT', 'RTGS') AND bank.BANKCODE='19'
	</createView>

</changeSet>

<changeSet author="DurgaPrasad G" id="10">

	<createView viewName="DISB_OTHER_CHEQUE_DD_EXPORT" replaceIfExists="true">
	SELECT (FINREFERENCE ${call.concatenate} PAYMENTSEQ)  TransactionId,
	finAdvPayments.LIABILITYHOLDNAME BeneficiaryName,
	finAdvPayments.PAYABLELOC PayableAt,
	finAdvPayments.AMTTOBERELEASED Amount, finAdvPayments.PAYMENTTYPE,
	'' DDCharges FROM FinAdvancePayments finAdvPayments 
	left outer join BMTBANKDETAIL bank on finAdvPayments.bankcode=bank.bankcode  
	WHERE finAdvPayments.STATUS='APPROVED' AND finAdvPayments.PAYMENTTYPE IN ('CHEQUE', 'DD') AND bank.BANKCODE !='19'
	</createView>

</changeSet>

<changeSet author="DurgaPrasad G" id="11">

	<createView viewName="DISB_OTHER_NEFT_RTGS_EXPORT" replaceIfExists="true">	
    SELECT ${call.substr}(finAdvPayments.PAYMENTTYPE,0,1) TransactionType, beneficiary.CUSTID BeneficiaryCode, finAdvPayments.BENEFICIARYACCNO BeneficiaryAccountNo, 
	finAdvPayments.AMTTOBERELEASED InstrumentAmount, finAdvPayments.BENEFICIARYNAME BeneficiaryName, '' DraweeLocation, '' PrintLocation, '' Address1,
	'' Address2, '' Address3, '' Address4, ''Address5, finAdvPayments.FINREFERENCE InstructionRefNo, finAdvPayments.PAYMENTSEQ CustomerRefNo, '' PaymentDetails1,
	'' PaymentDetails2, '' PaymentDetails3, '' PaymentDetails4, '' PaymentDetails5, '' PaymentDetails6, '' PaymentDetails7,
	finAdvPayments.LLREFERENCENO ChequeNo, LLDATE TrnDate, branches.MICR MICRNumber, branches.IFSC IFSCCode, 
	bank.BANKNAME BANK, branches.BRANCHDESC BRANCH, beneficiary.EMAIL
	from FinAdvancePayments finAdvPayments 
	inner join BANKBRANCHES branches on finAdvPayments.bankbranchid=branches.bankbranchid  
	inner join BMTBANKDETAIL bank on branches.BANKCODE=bank.BANKCODE
	left outer join  BENEFICIARY beneficiary on finAdvPayments.BENEFICIARYNAME=beneficiary.ACCHOLDERNAME 
	and finAdvPayments.BENEFICIARYACCNO=beneficiary.ACCNUMBER
	WHERE finAdvPayments.STATUS='APPROVED' AND finAdvPayments.PAYMENTTYPE IN ('NEFT', 'RTGS') AND bank.BANKCODE != '19'
	</createView>

</changeSet>

<changeSet author="DurgaPrasad G" id="12">

	<createView viewName="INTERFACE_MANDATE_REG_VIEW" replaceIfExists="true">
	Select bankbranch.bankcode, cust.custshrtname CustomerName, bankbranch.branchcode,
	fin.finType,
	fin.finReference  ApplicationID,
	fin.finReference  LANNo,
	(select MAX(RepayAmount+FeeSchd) from FinScheduleDetails where FinReference=fin.finreference and RepayOnSchDate =1) EMI, 
	mandate.openmandate,
	mandate.accholdername,
	bankbranch.micr,
	mandate.accNumber,
	mandate.acctype,  
	(select Min(FirstRepayDate) FirstDueDate from FinPftDetails where FinReference=fin.finreference) FirstDueDate,
	(select Max(MaturityDate) EMIEndDate from FinPftDetails where FinReference=fin.finreference) EMIEndDate, 
	mandate.expirydate OpenEndDate, mandate.maxlimit, bank.bankname BankName,
	(select SUM(RepayAmount+FeeSchd) MandateDebitAmount from FinScheduleDetails where FinReference in (select FinReference from financemain where MandateId=mandate.mandateid)
	and RepayOnSchDate =1) DEBITAMOUNT,
	mandate.startdate StartDate,
	mandate.expirydate EndDate, 
	fin.ApplicationNo,
	cust.custcif,
	mandate.mandatetype,
	mandate.mandateid,
	mandate.InputDate,
	 ${call.date}   SYSTEMDATE,
	'USERNAME'  USERNAME
	from Mandates mandate
	inner join customers  cust on mandate.custid=cust.custId 
	inner join financemain  fin on mandate.orgReference=fin.finreference
	inner join Bankbranches bankbranch on mandate.bankbranchid=bankbranch.bankbranchid
	inner join BMTbankdetail  bank on bankbranch.bankcode=bank.bankcode
	where mandate.status='NEW'
	</createView>

</changeSet>

<changeSet author="DurgaPrasad G" id="13">
<sql>
update DATA_ENGINE_CONFIG set fileextension = null where Name='DISB_HDFC_NEFT_EXPORT';
update DATA_ENGINE_CONFIG set FilenameFormat='$.{SEQ_DATE_FILE}' where Name='DISB_HDFC_NEFT_EXPORT';
update DATA_ENGINE_CONFIG set fileextension='.csv' where Name in ('DISB_OTHER_NEFT_EXPORT','DISB_HDFC_CHQ_EXPORT','DISB_OTHER_CHQ_EXPORT');
Update DATA_Engine_config set Uploadlocation = 'C' Where NAME = 'MANDATES_IMPORT';
</sql>
</changeSet>

<changeSet author="DurgaPrasad G" id="14">
<sql>
Delete from DATA_ENGINE_COLUMN where TableId = (select ID from DATA_ENGINE_TABLE where configId = (select ID from DATA_ENGINE_CONFIG Where NAME = 'MADATES_EXPORT'));
Delete from DATA_ENGINE_TABLE where configId = (select ID from DATA_ENGINE_CONFIG Where NAME = 'MADATES_EXPORT');
delete from DATA_ENGINE_CONFIG Where NAME = 'MADATES_EXPORT';
</sql>
</changeSet>

<changeSet author="DurgaPrasad G" id="15">
<sql>
UPDATE DATA_ENGINE_TABLE set STATUSUPDATE =
'QUERY:update MANDATES M set M.Status = ''AC'' where exists 
(select 1 from DATA_ENGINE_EXECUTION_FIELDS DEF where M.MANDATEID = DEF.FIELD1 AND DEF.ID = :ID)
QUERY:INSERT INTO MANDATESSTATUS SELECT FIELD1, ''AC'', ''Awaiting confirmation'', :SYSDATE, ID 
FROM DATA_ENGINE_EXECUTION_FIELDS' where  NAME='INTERFACE_MANDATE_REG_VIEW'
</sql>
</changeSet>


<changeSet author="DurgaPrasad G" id="16">
<sql>
	DELETE FROM DATA_ENGINE_Execution_fields;
	DELETE FROM DATA_ENGINE_Log;
	DELETE FROM DATA_ENGINE_STATUS;
	DELETE FROM DATA_ENGINE_COLUMN;  
	DELETE FROM DATA_ENGINE_TABLE;
	DELETE FROM  DATA_ENGINE_CONFIG;
	
	
	INSERT INTO DATA_ENGINE_CONFIG VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG),'DISB_HDFC_CHQ_EXPORT', 'Disbursement for NON-HDFC NEFT/RTGS export', 2, NULL, NULL, NULL, ',' , 0, 0, NULL, 'TransactionType, BeneficiaryCode, BeneficiaryAccountNo, InstrumentAmount, BeneficiaryName, DraweeLocation, PrintLocation, Address1, Address2, Address3, Address4, Address5, InstructionRefNo, CustomerRefNo, PaymentDetails1, PaymentDetails2, PaymentDetails3, PaymentDetails4, PaymentDetails5, PaymentDetails6, PaymentDetails7, ChequeNo, TrnDate, MICRNumber, IFSCCode, Bank, Branch, Email',  NULL, 'A', 'D:\Data-Engine\PFF\Bajaj\Disbusment\Request', 'HDFC_NEFT_TL', '.csv', 0, NULL, NULL, NULL, 0, NULL, 1, 1); 

	INSERT INTO DATA_ENGINE_TABLE  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT'), 'DISB_HDFC_CHEQUE_DD_EXPORT',  0, 'InstructionRefNo, CustomerRefNo', NULL, 'update FinAdvancePayments FAP set (FAP.STATUS) = (''AC'') where exists (select 1 from DATA_ENGINE_EXECUTION_FIELDS DEF where FAP.FINREFERENCE = DEF.FIELD1 AND FAP.PAYMENTSEQ = DEF.FIELD2 AND DEF.ID = :ID)', NULL, NULL, NULL, NULL, NULL, 0, 0, 0, NULL);

	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT')), 	'TransactionType',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT')), 	'BeneficiaryCode',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT')), 	'BeneficiaryAccountNo',	0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT')), 	'InstrumentAmount',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT')), 	'BeneficiaryName',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT')), 	'DraweeLocation',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT')), 	'PrintLocation',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT')), 	'Address1',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT')), 	'Address2',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT')), 	'Address3',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT')), 	'Address4',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT')), 	'Address5',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT')), 	'InstructionRefNo',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT')), 	'CustomerRefNo',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT')), 	'PaymentDetails1',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT')), 	'PaymentDetails2',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT')), 	'PaymentDetails3',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT')), 	'PaymentDetails4',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT')), 	'PaymentDetails5',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT')), 	'PaymentDetails6',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT')), 	'PaymentDetails7',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT')), 	'ChequeNo',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT')), 	'TrnDate',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT')), 	'MICRNumber',			0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT')), 	'IFSCCode',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT')), 	'Bank',					0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT')), 	'Branch',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_CHQ_EXPORT')), 	'Email',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);

	UPDATE SEQ_DATA_ENGINE_CONFIG SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_CONFIG);
	UPDATE SEQ_DATA_ENGINE_TABLE  SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_TABLE);
	UPDATE SEQ_DATA_ENGINE_COLUMN SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_COLUMN);
	UPDATE SEQ_DATA_ENGINE_STATUS SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_STATUS);
</sql>
</changeSet>

<changeSet author="DurgaPrasad G" id="17">
<sql>
	

	INSERT INTO DATA_ENGINE_CONFIG VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG),'DISB_HDFC_NEFT_EXPORT', 'Disbursement for HDFC NEFT export', 2, NULL, NULL, NULL, ',' , 0, 0, NULL, 'TransactionType, BeneficiaryCode, BeneficiaryAccountNo, InstrumentAmount, BeneficiaryName, DraweeLocation, PrintLocation, Address1, Address2, Address3, Address4, Address5, InstructionRefNo, CustomerRefNo, PaymentDetails1, PaymentDetails2, PaymentDetails3, PaymentDetails4, PaymentDetails5, PaymentDetails6, PaymentDetails7, ChequeNo, TrnDate, MICRNumber, IFSCCode, Bank, Branch, Email',  NULL, 'A', 'D:\Data-Engine\PFF\Bajaj\Disbusment\Request', 'HDFC_NEFT_TL', NULL, 0, NULL, '.${SEQ_DATE_FILE}', NULL, 0, NULL, 1, 1); 

	INSERT INTO DATA_ENGINE_TABLE  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT'), 'DISB_HDFC_NEFT_RTGS_EXPORT',  0, 'InstructionRefNo, CustomerRefNo', NULL, 'update FinAdvancePayments FAP set (FAP.STATUS) = (''AC'') where exists (select 1 from DATA_ENGINE_EXECUTION_FIELDS DEF where FAP.FINREFERENCE = DEF.FIELD1 AND FAP.PAYMENTSEQ = DEF.FIELD2 AND DEF.ID = :ID)', NULL, NULL, NULL, NULL, NULL, 0, 0, 0, NULL);

	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT')), 	'TransactionType',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT')), 	'BeneficiaryCode',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT')), 	'BeneficiaryAccountNo',	0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT')), 	'InstrumentAmount',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT')), 	'BeneficiaryName',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT')), 	'DraweeLocation',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT')), 	'PrintLocation',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT')), 	'Address1',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT')), 	'Address2',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT')), 	'Address3',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT')), 	'Address4',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT')), 	'Address5',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT')), 	'InstructionRefNo',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT')), 	'CustomerRefNo',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT')), 	'PaymentDetails1',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT')), 	'PaymentDetails2',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT')), 	'PaymentDetails3',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT')), 	'PaymentDetails4',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT')), 	'PaymentDetails5',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT')), 	'PaymentDetails6',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT')), 	'PaymentDetails7',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT')), 	'ChequeNo',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT')), 	'TrnDate',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT')), 	'MICRNumber',			0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT')), 	'IFSCCode',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT')), 	'Bank',					0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT')), 	'Branch',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_HDFC_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_HDFC_NEFT_EXPORT')), 	'Email',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);

	UPDATE SEQ_DATA_ENGINE_CONFIG SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_CONFIG);
	UPDATE SEQ_DATA_ENGINE_TABLE  SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_TABLE);
	UPDATE SEQ_DATA_ENGINE_COLUMN SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_COLUMN);
	UPDATE SEQ_DATA_ENGINE_STATUS SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_STATUS);
</sql>
</changeSet>

<changeSet author="DurgaPrasad G" id="18">
<sql>
	

	INSERT INTO DATA_ENGINE_CONFIG VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG),'DISB_OTHER_CHQ_EXPORT', 'Disbursement for NON-HDFC CHQ/DD export', 2, NULL, NULL, NULL, ',' , 0, 0, NULL, 'TransactionId, BeneficiaryName, PAYABLEAT, Amount, DDCharges',  NULL, 'A', 'D:\Data-Engine\PFF\Bajaj\Disbusment\Request', 'OTHER_CHQ', '.csv', 0, NULL, NULL, NULL, 0, NULL, 1, 1); 

	INSERT INTO DATA_ENGINE_TABLE  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_CHQ_EXPORT'), 'DISB_OTHER_CHEQUE_DD_EXPORT',  0, 'TransactionId', NULL, 'update FinAdvancePayments FAP set (FAP.STATUS) = (''AC'') where exists (select 1 from DATA_ENGINE_EXECUTION_FIELDS DEF where FAP.FINREFERENCE = DEF.FIELD1 AND FAP.PAYMENTSEQ = DEF.FIELD2 AND DEF.ID = :ID)', NULL, NULL, NULL, NULL, NULL, 0, 0, 0, NULL);

	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_CHQ_EXPORT')), 	'TransactionId',	0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_CHQ_EXPORT')), 	'BeneficiaryName',	0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_CHQ_EXPORT')), 	'PAYABLEAT',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_CHQ_EXPORT')), 	'Amount',			0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_CHEQUE_DD_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_CHQ_EXPORT')), 	'DDCharges',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	 
	UPDATE SEQ_DATA_ENGINE_CONFIG SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_CONFIG);
	UPDATE SEQ_DATA_ENGINE_TABLE  SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_TABLE);
	UPDATE SEQ_DATA_ENGINE_COLUMN SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_COLUMN);
	UPDATE SEQ_DATA_ENGINE_STATUS SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_STATUS);
</sql>
</changeSet>

<changeSet author="DurgaPrasad G" id="19">
<sql>
	INSERT INTO DATA_ENGINE_CONFIG VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG),'DISB_OTHER_NEFT_EXPORT', 'Disbursement for HDFC Cheque/DD export', 2, NULL, NULL, NULL, ',' , 0, 0, NULL, 'TransactionType, BeneficiaryCode, BeneficiaryAccountNo, InstrumentAmount, BeneficiaryName, DraweeLocation, PrintLocation, Address1, Address2, Address3, Address4, Address5, InstructionRefNo, CustomerRefNo, PaymentDetails1, PaymentDetails2, PaymentDetails3, PaymentDetails4, PaymentDetails5, PaymentDetails6, PaymentDetails7, ChequeNo, TrnDate, MICRNumber, IFSCCode, Bank, Branch, Email',  NULL, 'A', 'D:\Data-Engine\PFF\Bajaj\Disbusment\Request', 'OTHER_NEFT', '.csv', 0, NULL, NULL, NULL, 0, NULL, 1, 1); 

	INSERT INTO DATA_ENGINE_TABLE  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT'), 'DISB_OTHER_NEFT_RTGS_EXPORT',  0, 'InstructionRefNo, CustomerRefNo', NULL, 'update FinAdvancePayments FAP set (FAP.STATUS) = (''AC'') where exists (select 1 from DATA_ENGINE_EXECUTION_FIELDS DEF where FAP.FINREFERENCE = DEF.FIELD1 AND FAP.PAYMENTSEQ = DEF.FIELD2 AND DEF.ID = :ID)', NULL, NULL, NULL, NULL, NULL, 0, 0, 0, NULL);

    INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT')), 	'TransactionType',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT')), 	'BeneficiaryCode',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT')), 	'BeneficiaryAccountNo',	0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT')), 	'InstrumentAmount',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT')), 	'BeneficiaryName',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT')), 	'DraweeLocation',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT')), 	'PrintLocation',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT')), 	'Address1',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT')), 	'Address2',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT')), 	'Address3',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT')), 	'Address4',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT')), 	'Address5',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT')), 	'InstructionRefNo',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT')), 	'CustomerRefNo',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT')), 	'PaymentDetails1',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT')), 	'PaymentDetails2',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT')), 	'PaymentDetails3',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT')), 	'PaymentDetails4',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT')), 	'PaymentDetails5',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT')), 	'PaymentDetails6',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT')), 	'PaymentDetails7',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT')), 	'ChequeNo',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT')), 	'TrnDate',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT')), 	'MICRNumber',			0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT')), 	'IFSCCode',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT')), 	'Bank',					0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT')), 	'Branch',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'DISB_OTHER_NEFT_RTGS_EXPORT' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_OTHER_NEFT_EXPORT')), 	'Email',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);

	UPDATE SEQ_DATA_ENGINE_CONFIG SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_CONFIG);
	UPDATE SEQ_DATA_ENGINE_TABLE  SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_TABLE);
	UPDATE SEQ_DATA_ENGINE_COLUMN SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_COLUMN);
	UPDATE SEQ_DATA_ENGINE_STATUS SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_STATUS);
</sql>
</changeSet>

<changeSet author="DurgaPrasad G" id="20">
<sql>
	INSERT INTO DATA_ENGINE_CONFIG VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG),'DISB_RESPONSE', 'Cheque response file', 1, NULL, NULL, NULL, ',' , 0, 0, NULL, NULL,  '', 'C', 'D:\Data-Engine\PFF\Bajaj\Disbusment\Response', 'HDFC_Cheque_Response', '.csv', 0, NULL, NULL, NULL, 0, NULL, 1, 1); 
	INSERT INTO DATA_ENGINE_TABLE  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_RESPONSE'), 'FINADVANCEPAYMENTS',  2, 'FinReference', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 0, 0, 0, NULL);

    INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'FINADVANCEPAYMENTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_RESPONSE')),		'FinReference',		0, 'N', NULL, NULL,	NULL, 		0, NULL,	 0, 	NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'FINADVANCEPAYMENTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_RESPONSE')),		'LLREFERENCENO',	0, 'N', NULL, NULL,	NULL, 		0, NULL,	 2, 	NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'FINADVANCEPAYMENTS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'DISB_RESPONSE')),		'LLDATE',			0, 'N', NULL, NULL,	NULL, 		0, NULL,	 3, 	NULL, NULL, NULL, 'dd/MM/yyyy', 0);

	UPDATE SEQ_DATA_ENGINE_CONFIG SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_CONFIG);
	UPDATE SEQ_DATA_ENGINE_TABLE  SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_TABLE);
	UPDATE SEQ_DATA_ENGINE_COLUMN SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_COLUMN);
	UPDATE SEQ_DATA_ENGINE_STATUS SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_STATUS);
</sql>
</changeSet>

<changeSet author="DurgaPrasad G" id="21">
<sql>
<![CDATA[
	INSERT INTO DATA_ENGINE_CONFIG VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG),'MANDATES_EXPORT', 'Mandates export', 2, NULL, NULL, NULL, ',' , 0, 0, 'Mandate Sequence No.,Customer Name,Branch,Product,Application ID,LAN No.,EMI Amount,Open ECS Flag,Account Holder Name,MICR Code (System),Account No. (System),Account Type (System),Updation Date,User ID,First Due Date,EMI End Date,Open ECS End Date,Open ECS Upper Limit,Bank Name,ECS Amount(System),ECS Start Date(System),ECS End Date(System),Application Form No.,Customer Code,Repayment Mode,Mandate No.', 'Row:{INSTRUMENT AUTO DATA ENTRY REPORT}Row:{User:${USER_ID}}Row:{Business Date:${SYS_DATE_DD-MMM-YYYY}}Row:{Branch Name:${FILTER_BRANCHCODE}}Row:{FromDate:${FILTER_FROMDATE},  ToDate:${FILTER_TODATE}}ROW:{EMPTY_ROW}',  '', 'A', 'D:\Data-Engine\PFF\Bajaj\Mandate\Request', 'MANDATE_', '.csv', 0, NULL, '${SEQ_DATE_FILE}', NULL, 0, NULL, 1, 1); 
	INSERT INTO DATA_ENGINE_TABLE  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT'), 'INTERFACE_MANDATE_REG_VIEW',  0, 'MANDATEID', 'INPUTDATE >= :FROMDATE, INPUTDATE <=:TODATE, BRANCHCODE IN (:BRANCHCODE)', 'update MANDATES M set M.Status = ''AC'' where exists (select 1 from DATA_ENGINE_EXECUTION_FIELDS DEF where M.MANDATEID = DEF.FIELD1 AND DEF.ID = :ID)QUERY:INSERT INTO MANDATESSTATUS SELECT FIELD1, ''AC'', ''Awaiting confirmation'', :SYSDATE, ID FROM DATA_ENGINE_EXECUTION_FIELDS', NULL, NULL, NULL, NULL, NULL, 0, 0, 0, NULL);

    INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'INTERFACE_MANDATE_REG_VIEW' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'BANKCODE',			0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, 'FIELD_SEQ:', 0);	
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'INTERFACE_MANDATE_REG_VIEW' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'CUSTOMERNAME',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'INTERFACE_MANDATE_REG_VIEW' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'BRANCHCODE',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'INTERFACE_MANDATE_REG_VIEW' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'FINTYPE',			0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'INTERFACE_MANDATE_REG_VIEW' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'APPLICATIONNO',	0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'INTERFACE_MANDATE_REG_VIEW' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'LANNO',			0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'INTERFACE_MANDATE_REG_VIEW' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'EMI',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'INTERFACE_MANDATE_REG_VIEW' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'OPENMANDATE',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'INTERFACE_MANDATE_REG_VIEW' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'ACCHOLDERNAME',	0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'INTERFACE_MANDATE_REG_VIEW' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'MICR',				0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'INTERFACE_MANDATE_REG_VIEW' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'ACCNUMBER',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'INTERFACE_MANDATE_REG_VIEW' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'ACCTYPE',			0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'INTERFACE_MANDATE_REG_VIEW' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'SYSTEMDATE',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, 'DATE:dd-MMM-yyyy', 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'INTERFACE_MANDATE_REG_VIEW' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'USERNAME',			0, 'N', NULL, NULL,		  '${USER_ID}', 	 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'INTERFACE_MANDATE_REG_VIEW' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'FIRSTDUEDATE',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, 'DATE:dd-MMM-yyyy', 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'INTERFACE_MANDATE_REG_VIEW' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'EMIENDDATE',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, 'DATE:dd-MMM-yyyy', 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'INTERFACE_MANDATE_REG_VIEW' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'OPENENDDATE',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, 'DATE:dd-MMM-yyyy', 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'INTERFACE_MANDATE_REG_VIEW' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'MAXLIMIT',			0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'INTERFACE_MANDATE_REG_VIEW' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'BANKNAME',			0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'INTERFACE_MANDATE_REG_VIEW' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'DEBITAMOUNT',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'INTERFACE_MANDATE_REG_VIEW' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'STARTDATE',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, 'DATE:dd-MMM-yyyy', 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'INTERFACE_MANDATE_REG_VIEW' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'ENDDATE',			0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, 'DATE:dd-MMM-yyyy', 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'INTERFACE_MANDATE_REG_VIEW' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'APPLICATIONNO',	0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'INTERFACE_MANDATE_REG_VIEW' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'CUSTCIF',			0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'INTERFACE_MANDATE_REG_VIEW' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'MANDATETYPE',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'INTERFACE_MANDATE_REG_VIEW' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_EXPORT')),	'MANDATEID',		0, 'N', NULL, NULL,		  NULL, 0, NULL,	 0, NULL, NULL, NULL, NULL, 0);

	UPDATE SEQ_DATA_ENGINE_CONFIG SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_CONFIG);
	UPDATE SEQ_DATA_ENGINE_TABLE  SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_TABLE);
	UPDATE SEQ_DATA_ENGINE_COLUMN SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_COLUMN);
	UPDATE SEQ_DATA_ENGINE_STATUS SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_STATUS);
	]]>
</sql>
</changeSet>

<changeSet author="DurgaPrasad G" id="22">
<sql>
	INSERT INTO DATA_ENGINE_CONFIG VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_CONFIG),'MANDATES_IMPORT', 'Mandate response file', 1, NULL, NULL, NULL, ',' , 1, 0, NULL, NULL,  '', 'A', 'D:\Data-Engine\PFF\Bajaj\Mandate\Response', 'Mandate_Import', '.csv', 0, NULL, NULL, NULL, 0, NULL, 1, 1); 
	INSERT INTO DATA_ENGINE_TABLE  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT'), 'MANDATES',  2, 'MANDATEID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 0, 0, 0, NULL);
	INSERT INTO DATA_ENGINE_TABLE  VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_TABLE), (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT'), 'MANDATESSTATUS',  1, 'MANDATEID', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 0, 0, 0, NULL);
	 
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATES' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')),		'MANDATEID',		0, 'N', NULL, NULL,	NULL, 		0, NULL,	 15, 	NULL, NULL, 																						NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATES' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')),		'MANDATEREF',		0, 'N', NULL, NULL,	NULL, 		0, NULL,	 11, 	NULL, NULL, 																						NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATES' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')),		'STATUS',			0, 'N', NULL, NULL,	NULL, 		0, NULL,	 12, 	NULL, 'if((STATUS ==  ''Rejected'' )){Result =''YES'';  return;}else {Result =''NO'';  return;}', 	NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATES' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')),		'REASON',			0, 'N', NULL, NULL,	NULL, 		0, NULL,	 13,	NULL, NULL, 																						NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATES' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')),		'LASTMNTBY',		0, 'N', NULL, NULL,	'USER_ID', 	0, NULL,	 0, 	NULL, NULL, 																						NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATES' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')),		'LASTMNTON',		0, 'N', NULL, NULL,	'SYS_DATE', 0, NULL,	 0, 	NULL, NULL, 																						NULL, NULL, 0);

	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATESSTATUS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')),	'MANDATEID',	0, 'N', NULL, NULL,	NULL, 		0, NULL,	 15, 	NULL, NULL, 																						NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATESSTATUS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')),	'STATUS',		0, 'N', NULL, NULL,	NULL, 		0, NULL,	 12, 	NULL, 'if((STATUS ==  ''Rejected'' )){Result =''YES'';  return;}else {Result =''NO'';  return;}', 	NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATESSTATUS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')),	'REASON',		0, 'N', NULL, NULL,	NULL, 		0, NULL,	 13, 	NULL, NULL, 																						NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATESSTATUS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')),	'CHANGEDATE',	0, 'N', NULL, NULL,	'SYS_DATE', 0, NULL,	 0, 	NULL, NULL, 																						NULL, NULL, 0);
	INSERT INTO DATA_ENGINE_COLUMN VALUES ((SELECT COALESCE(MAX(ID), 0) + 1 FROM DATA_ENGINE_COLUMN),(Select Id FROM DATA_ENGINE_TABLE WHERE Name = 'MANDATESSTATUS' and CONFIGID = (Select Id FROM DATA_ENGINE_CONFIG WHERE Name = 'MANDATES_IMPORT')),	'FILEID',		0, 'N', NULL, NULL,	'FILE_ID',	0, NULL,	 0, 	NULL, NULL, 																						NULL, NULL, 0);

	UPDATE SEQ_DATA_ENGINE_CONFIG SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_CONFIG);
	UPDATE SEQ_DATA_ENGINE_TABLE  SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_TABLE);
	UPDATE SEQ_DATA_ENGINE_COLUMN SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_COLUMN);
	UPDATE SEQ_DATA_ENGINE_STATUS SET SeqNo=(Select coalesce(MAX(ID), 1) FROM DATA_ENGINE_STATUS);
</sql>
</changeSet>
	
</databaseChangeLog>
