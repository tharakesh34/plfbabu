<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">
	<property name="add.schema" value="dbo." dbms="mssql" />
	<property name="add.schema" value=" " dbms="oracle" />
	<property name="call.substr" value="substring" dbms="mssql" />
	<property name="call.substr" value="substr" dbms="oracle" />
	<property name="call.auditdb" value="PFFBFSQCAudit.." dbms="mssql" />
	<property name="call.auditdb" value=" " dbms="oracle" />
	<property name="call.concatenate" value="+" dbms="mssql" />
	<property name="call.concatenate" value="||" dbms="oracle" />
	<property name="call.collength" value="LEN" dbms="mssql" />
	<property name="call.collength" value="LENGTH" dbms="oracle" />
<changeSet id="1" author="Surekha">
	<sql>
		update BMTBankDetail set AccNoLength=13 where AccNoLength=0;
		update BMTBankDetail_Temp set AccNoLength=13 where AccNoLength=0;
	</sql>
</changeSet>
<changeSet id="2" author="Madhubabu">
	<createView viewName="FinCovenantType_View" replaceIfExists="true">
		SELECT   T1.FinReference, T1.CovenantType, T1.Description, T1.MandRole, T1.AlwWaiver,
	         T1.AlwPostpone, T1.PostponeDays,T3.DocTypeDesc CovenantTypeDesc,T3.DocIsCustDoc lovdescIsCustDoc,T4.RoleDesc MandRoleDesc,
	         T1.ReceivableDate,T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode,
	         T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId		 
	         FROM  FinCovenantType_Temp T1 INNER JOIN   
			  BMTDocumentTypes T3 ON T3.DocTypeCode = T1.CovenantType  LEFT JOIN
			  SecRoles T4 ON T4.RoleCd = T1.MandRole
			
	UNION ALL
	SELECT   T1.FinReference, T1.CovenantType, T1.Description, T1.MandRole, T1.AlwWaiver,
	         T1.AlwPostpone, T1.PostponeDays,T3.DocTypeDesc CovenantTypeDesc,T3.DocIsCustDoc lovdescIsCustDoc,T4.RoleDesc MandRoleDesc,
	         T1.ReceivableDate,T1.Version, T1.LastMntBy, T1.LastMntOn, T1.RecordStatus, T1.RoleCode,
	         T1.NextRoleCode, T1.TaskId, T1.NextTaskId, T1.RecordType, T1.WorkflowId		 
	         FROM  FinCovenantType T1 INNER JOIN  
			  BMTDocumentTypes T3 ON T3.DocTypeCode = T1.CovenantType  LEFT JOIN
			  SecRoles T4 ON T4.RoleCd = T1.MandRole
			
	WHERE NOT EXISTS 
	                 (SELECT   1 
					  FROM        FinCovenantType_Temp 
					  WHERE       FinReference = T1.FinReference and CovenantType = T1.CovenantType)
	</createView>
</changeSet>
<changeSet id="3" author="SreeRavali">
<sql>
	INSERT INTO ReportList  VALUES 
	(N'CustomerGroup', N'CustomerGroup', N'listheader_CustGrpCode.label,listheader_CustGrpDesc.label,listheader_CustGrpRO1.label,listheader_CustGrpIsActive.label', N'custGrpCode,custGrpDesc,custGrpRO1,custGrpIsActive', N'String,String,String,boolean', N'', N'ReportList04', N'CustomerGroup', N'Customers', 1, 1000, CURRENT_TIMESTAMP, N'Approved', N'', N'', N'', N'', N'', 0, 0);
</sql>
</changeSet>

</databaseChangeLog>
