<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p" xmlns:lang="http://www.springframework.org/schema/lang"
	xsi:schemaLocation="http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/batch http://www.springframework.org/schema/batch/spring-batch-3.0.xsd">

	<!-- beforeEOD -->

	<bean id="beforeEODTaskLet" class="com.pennant.backend.endofday.tasklet.BeforeEOD">
		<property name="dateService" ref="dateService" />
	</bean>

	<!-- prepareCustomerQueue -->

	<bean id="prepareCustomerQueueTaskLet" class="com.pennant.backend.endofday.tasklet.PrepareCustomerQueue">
		<property name="customerQueuingDAO" ref="customerQueuingDAO" />
	</bean>

	<!-- MicroEOD -->
	<bean id="microEODTaskLet" class="com.pennant.backend.endofday.tasklet.MicroEOD">
		<property name="eodService" ref="eodService" />
		<property name="transactionManager" ref="pfsTransactionManager" />
		<property name="customerQueuingDAO" ref="customerQueuingDAO" />
	</bean>

	<bean id="microEODMonitorTaskLet" class="com.pennant.backend.endofday.tasklet.MicroEODMonitor">
		<property name="customerQueuingDAO" ref="customerQueuingDAO" />
	</bean>

	<bean id="microEODDecider" class="com.pennant.backend.endofday.limitdecider.MicroEODDecider">
		<property name="customerQueuingDAO" ref="customerQueuingDAO" />
	</bean>
	
	<bean id="completeEODDecider" class="com.pennant.backend.endofday.limitdecider.CompleteEOD">
		<property name="dataSource" ref="pfsDatasource" />
		<property name="dateService" ref="dateService" />
		<property name="customerQueuingDAO" ref="customerQueuingDAO" />
	</bean>

	<bean id="snapShotPreparationTaskLet" class="com.pennant.backend.endofday.tasklet.SnapShotPreparation">
		<property name="dataSource" ref="pfsDatasource" />
		<property name="snapshotService" ref="snapshotService" />
	</bean>
	
	<bean id="accountsUpdateTaskLet" class="com.pennant.backend.endofday.tasklet.AccountsUpdate">
		<property name="customerAccountService" ref="customerAccountService" />
	</bean>
	
	 <bean id="bajajService" class="com.pennanttech.bajaj.services.BajajService" abstract="true">
		<property name="dataSource" ref="pfsDatasource" />
	</bean>
	
	<bean id="almRequestService" class="com.pennanttech.bajaj.services.ALMRequestService" scope="prototype" parent="bajajService"/>
	<bean id="controlDumpRequestService" class="com.pennanttech.bajaj.services.ControlDumpRequestService" scope="prototype" parent="bajajService"/>
	<bean id="posidexRequestService" class="com.pennanttech.bajaj.services.PosidexRequestService" scope="prototype" parent="bajajService"/>
	<bean id="posidexResponceService" class="com.pennanttech.bajaj.services.PosidexResponceService" scope="prototype" parent="bajajService"/>
	
	<bean id="dataExtractTaskLet" class="com.pennant.backend.endofday.tasklet.DataExtract">
		<property name="dataSource" ref="pfsDatasource"/>
		<property name="almRequestService" ref="almRequestService"/>
		<property name="controlDumpRequestService" ref="controlDumpRequestService"/>
		<property name="posidexRequestService" ref="posidexRequestService"/>
		<property name="posidexResponceService" ref="posidexResponceService"/>
	</bean>


	<!-- To be deleted -->

	<!-- Audit Data Purging -->
	<bean id="auditDataPurgingTaskLet" class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
		<property name="transactionManager" ref="pfsTransactionManager" />
		<property name="target" ref="auditDataPurgingTarget" />
		<property name="transactionAttributes">
			<props>
				<prop key="*">PROPAGATION_NOT_SUPPORTED,readOnly</prop>
			</props>
		</property>
	</bean>
	<bean id="auditDataPurgingTarget" class="com.pennant.backend.endofday.tasklet.AuditDataPurging">
		<property name="dataPurgingProcess" ref="dataPurgingProcess" />
	</bean>

	<!-- Notifications -->
	<bean id="notificationTasklet" class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
		<property name="transactionManager" ref="pfsTransactionManager" />
		<property name="target" ref="notificationTarget" />
		<property name="transactionAttributes">
			<props>
				<prop key="*">PROPAGATION_REQUIRED</prop>
			</props>
		</property>
	</bean>
	<bean id="notificationTarget" class="com.pennant.backend.endofday.tasklet.Notification">
		<property name="dataSource" ref="pfsDatasource" />
	</bean>
	<!-- Not used -->
	<!-- Backup Data base Before Eod -->
	<bean id="backupDatabaseBeforeEodTaskLet" class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
		<property name="transactionManager" ref="pfsTransactionManager" />
		<property name="target" ref="backupDatabaseTargetBeforeEod" />
		<property name="transactionAttributes">
			<props>
				<prop key="*">PROPAGATION_NOT_SUPPORTED,readOnly</prop>
			</props>
		</property>
	</bean>
	<bean id="backupDatabaseTargetBeforeEod" class="com.pennant.backend.endofday.tasklet.BackupDatabaseTaskLet">
		<property name="backupDatabase" ref="backupDatabase" />
		<property name="beforeEod" value="true" />
	</bean>
	<!-- Backup Data base After Eod -->
	<bean id="backupDatabaseAfterEodTaskLet" class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
		<property name="transactionManager" ref="pfsTransactionManager" />
		<property name="target" ref="backupDatabaseTargetAfterEod" />
		<property name="transactionAttributes">
			<props>
				<prop key="*">PROPAGATION_NOT_SUPPORTED,readOnly</prop>
			</props>
		</property>
	</bean>
	<bean id="backupDatabaseTargetAfterEod" class="com.pennant.backend.endofday.tasklet.BackupDatabaseTaskLet">
		<property name="backupDatabase" ref="backupDatabase" />
		<property name="beforeEod" value="false" />
	</bean>
	<!-- Capitalization Postings -->
	<bean id="capitalizationPostingsTasklet"  class="com.pennant.backend.endofday.tasklet.CapitalizationPostings">
		<property name="financeProfitDetailDAO" ref="profitDetailsDAO" />
		<property name="suspensePostingUtil" ref="suspensePostingUtil" />
		<property name="dataSource" ref="pfsDatasource" />
	</bean>
	<!-- Future Account Holds -->
	<bean id="futureInstallmentHoldsTasklet" class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
		<property name="transactionManager" ref="pfsTransactionManager" />
		<property name="target" ref="futureInstallmentHoldsTarget" />
		<property name="transactionAttributes">
			<props>
				<prop key="*">PROPAGATION_REQUIRED</prop>
			</props>
		</property>
	</bean>
	<bean id="futureInstallmentHoldsTarget" class="com.pennant.backend.endofday.tasklet.FutureInstallmentHolds">
		<property name="financeScheduleDetailDAO" ref="financeScheduleDetailDAO" />
		<property name="accountInterfaceService" ref="accountInterfaceService" />
		<property name="finODDetailsDAO" ref="finODDetailsDAO" />
	</bean>
	<!-- Provisions Postings TBD -->
	<bean id="provisionPostingsTasklet"  class="com.pennant.backend.endofday.tasklet.ProvisionPostings">
		<property name="financeMainDAO" ref="financeMainDAO" />
		<property name="financeScheduleDetailDAO" ref="financeScheduleDetailDAO" />
		<property name="financeProfitDetailDAO" ref="profitDetailsDAO" />
		<property name="postingsPreparationUtil" ref="postingsPreparationUtil" />
		<property name="provisionDAO" ref="provisionDAO" />
		<property name="provisionMovementDAO" ref="provisionMovementDAO" />
		<property name="dataSource" ref="pfsDatasource" />
	</bean>

	<!-- Overdue Details Daily Download -->
	<bean id="oDDetailDownloadTasklet" class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
		<property name="transactionManager" ref="pfsTransactionManager" />
		<property name="target" ref="oDDetailTarget" />
		<property name="transactionAttributes">
			<props>
				<prop key="*">PROPAGATION_REQUIRED</prop>
			</props>
		</property>
	</bean>
	<bean id="oDDetailTarget" class="com.pennant.backend.endofday.tasklet.ODDetailDownload">
		<property name="dataSource" ref="pfsDatasource" />
	</bean>
	<!-- Commitment Expiry Details Updation -->
	<bean id="commitmentExpiryProcessTasklet" class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
		<property name="transactionManager" ref="pfsTransactionManager" />
		<property name="target" ref="commitmentExpiryProcessTarget" />
		<property name="transactionAttributes">
			<props>
				<prop key="*">PROPAGATION_REQUIRED</prop>
			</props>
		</property>
	</bean>
	<bean id="commitmentExpiryProcessTarget" class="com.pennant.backend.endofday.tasklet.CommitmentExpiryProcess">
		<property name="dataSource" ref="pfsDatasource" />
	</bean>
	<!-- Month End Download Details Updation -->
	<bean id="monthEndDownloadProcessTasklet" class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
		<property name="transactionManager" ref="pfsTransactionManager" />
		<property name="target" ref="monthEndDownloadProcessTarget" />
		<property name="transactionAttributes">
			<props>
				<prop key="*">PROPAGATION_REQUIRED</prop>
			</props>
		</property>
	</bean>
	<bean id="monthEndDownloadProcessTarget" class="com.pennant.backend.endofday.tasklet.MonthEndDownloadProcess">
		<property name="dailyDownloadInterfaceService" ref="dailyDownloadInterfaceService" />
		<property name="accountNumberUtil" ref="accountNumberUtil" />
	</bean>



</beans>