<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:lang="http://www.springframework.org/schema/lang"
	xsi:schemaLocation="http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/batch http://www.springframework.org/schema/batch/spring-batch-2.1.xsd">

	<import resource="launch-context.xml" />
	<import resource="PFSEndOfDayJob-db.xml" />

	<!-- _____________________________________________REFERENCE BEANS _________________________________________ -->
	<!-- ====================================================== -->
	<!-- Generic Common DAOs -->
	<!-- ====================================================== -->

	<!-- Error Details -->
	<bean id="errorDetailsDAO" class="com.pennant.backend.dao.impl.ErrorDetailsDAOImpl">
		<property name="dataSource" ref="pfsDatasource" />
	</bean>

	<!-- Basis Code -->
	<bean id="basisCodeDAO" abstract="true"
		class="com.pennant.backend.dao.impl.BasisCodeDAO">
		<property name="errorDetailsDAO" ref="errorDetailsDAO" />
	</bean>

	<!-- PFS SMT Parameters -->
	<bean id="pFSParameterDAO"
		class="com.pennant.backend.dao.smtmasters.impl.PFSParameterDAOImpl"
		parent="basisCodeDAO">
		<property name="dataSource" ref="pfsDatasource" />
	</bean>
	
	<!-- ====================================================== -->
	<!-- Calculation Utility Configuration -->
	<!-- ====================================================== -->
	
	<bean id="calculationUtil" class="com.pennant.app.util.CalculationUtil">
		<property name="currencyDAO" ref="currencyDAO" />
	</bean>

	<!-- ====================================================== -->
	<!-- Finance Related Generic DAOs -->
	<!-- ====================================================== -->

	<!-- Finance Type Details -->
	<bean id="financeTypeDAO"
		class="com.pennant.backend.dao.rmtmasters.impl.FinanceTypeDAOImpl"
		parent="basisCodeDAO">
		<property name="dataSource" ref="pfsDatasource" />
	</bean>

	<!-- Finance Main -->
	<bean id="financeMainDAO" class="com.pennant.backend.dao.finance.impl.FinanceMainDAOImpl"
		parent="basisCodeDAO">
		<property name="dataSource" ref="pfsDatasource" />
	</bean>

	<!-- Finance Schedule Details -->
	<bean id="financeScheduleDetailDAO"
		class="com.pennant.backend.dao.finance.impl.FinanceScheduleDetailDAOImpl"
		parent="basisCodeDAO">
		<property name="dataSource" ref="pfsDatasource" />
	</bean>

	<!-- Profit Details -->
	<bean id="profitDetailsDAO"
		class="com.pennant.backend.dao.finance.impl.FinanceProfitDetailDAOImpl">
		<property name="dataSource" ref="pfsDatasource" />
	</bean>
	
	<!--============ AEAmounts Util ============== -->

	<bean name="AEAmounts" class="com.pennant.app.util.AEAmounts">
		<property name="suspHeadDAO" ref="financeSuspHeadDAO" />
	</bean>

	<!-- Repay Instructions -->
	<bean id="repayInstructionDAO"
		class="com.pennant.backend.dao.finance.impl.RepayInstructionDAOImpl"
		parent="basisCodeDAO">
		<property name="dataSource" ref="pfsDatasource" />
	</bean>

	<!-- Deferment Header -->
	<bean id="defermentHeaderDAO"
		class="com.pennant.backend.dao.finance.impl.DefermentHeaderDAOImpl"
		parent="basisCodeDAO">
		<property name="dataSource" ref="pfsDatasource" />
	</bean>

	<!-- Deferment Details -->
	<bean id="defermentDetailDAO"
		class="com.pennant.backend.dao.finance.impl.DefermentDetailDAOImpl"
		parent="basisCodeDAO">
		<property name="dataSource" ref="pfsDatasource" />
	</bean>

	<!-- Finance Profit Detail Filler -->
	<bean name="financeProfitDetailFiller" class="com.pennant.app.util.FinanceProfitDetailFiller" />

	<!-- Overdue Details  -->
	<bean id="finODDetailsDAO"
		class="com.pennant.backend.dao.finance.impl.FinODDetailsDAOImpl"
		parent="basisCodeDAO">
		<property name="dataSource" ref="pfsDatasource" />
	</bean>

	<!-- Finance Suspense Head  -->
	<bean id="financeSuspHeadDAO"
		class="com.pennant.backend.dao.finance.impl.FinanceSuspHeadDAOImpl">
		<property name="dataSource" ref="pfsDatasource" />
	</bean>
	
	<!-- Finance Status Details -->
	<bean id="finStatusDetailDAO"
		class="com.pennant.backend.dao.finance.impl.FinStatusDetailDAOImpl">
		<property name="dataSource" ref="pfsDatasource" />
	</bean>
	
	<!-- Finance Log Entry Details -->

	<bean id="finLogEntryDetailDAO"
		class="com.pennant.backend.dao.finance.impl.FinLogEntryDetailDAOImpl">
		<property name="dataSource" ref="pfsDatasource" />
	</bean>
	
	<!-- ====================================================== -->
	<!-- Postings Related Generic DAOs -->
	<!-- ====================================================== -->
	<!-- Postings -->
	<bean id="postingsDAO"
		class="com.pennant.backend.dao.rulefactory.impl.PostingsDAOImpl"
		parent="basisCodeDAO">
		<property name="dataSource" ref="pfsDatasource" />
	</bean>

	<!-- System Parameter Details -->
	<bean id="SystemParameterDetails " class="com.pennant.app.util.SystemParameterDetails" init-method="Init">
		<property name="pFSParameterDAO" ref="pFSParameterDAO" />
	</bean>
	
	<!-- EOD Parameter Details -->
	<bean id="eodProperties" class="com.pennant.eod.util.EODProperties">
		<property name="financeTypeDAO" ref="financeTypeDAO" /> 
		<property name="currencyDAO" ref="currencyDAO" />
		<property name="definitionDAO" ref="systemInternalAccountDefinitionDAO" />
		<property name="ruleDAO" ref="ruleDAO" />
		<property name="transactionEntryDAO" ref="transactionEntryDAO" />
	</bean>
	
	<!-- Database backup on EOD -->
	<bean id="backupDatabase" class="com.pennant.eod.util.BackupDatabase">
		<property name="dataSource" ref="pfsDatasource" />
	</bean>

	<!-- Accounting Engine Execution -->
	<bean name="engineExecution" class="com.pennant.app.util.AccountEngineExecution">
		<property name="financeMainDAO" ref="financeMainDAO" />
		<property name="financeTypeDAO" ref="financeTypeDAO" />
		<property name="transactionEntryDAO" ref="transactionEntryDAO" />
		<property name="internalAccountDefinitionDAO" ref="systemInternalAccountDefinitionDAO" />
		<property name="ruleDAO" ref="ruleDAO" />
		<property name="customerDAO" ref="customerDAO" />
		<property name="financeScheduleDetailDAO" ref="financeScheduleDetailDAO" />
		<property name="currencyDAO" ref="currencyDAO" />
		<property name="defermentHeaderDAO" ref="defermentHeaderDAO" />
		<property name="financeSuspHeadDAO" ref="financeSuspHeadDAO" />
		<property name="accountInterfaceService" ref="accountInterfaceService" />
		<property name="ruleExecutionUtil" ref="ruleExecutionUtil" />
		<property name="accountingSetDAO" ref="accountingSetDAO" />
		<property name="financePremiumDetailDAO" ref="financePremiumDetailDAO" />
	</bean>
	
	<bean name="ruleExecutionUtil" class="com.pennant.app.util.RuleExecutionUtil" />
	
	<bean id="accountingSetDAO" class="com.pennant.backend.dao.rmtmasters.impl.AccountingSetDAOImpl">
		<property name="dataSource" ref="pfsDatasource" />
	</bean>
	
	<!-- Finance Premium Detail -->
	<bean id="financePremiumDetailDAO" class="com.pennant.backend.dao.finance.impl.FinancePremiumDetailDAOImpl" >
			<property name="dataSource" ref="pfsDatasource" />
	</bean>

	<!-- Postings Preparation Util -->
	<bean name="postingsPreparationUtil" class="com.pennant.app.util.PostingsPreparationUtil">
		<property name="engineExecution" ref="engineExecution" />
		<property name="accountProcessUtil" ref="accountProcessUtil" />
		<property name="postingsInterfaceService" ref="postingsInterfaceService" />
		<property name="commitmentDAO" ref="commitmentDAO" />
		<property name="commitmentMovementDAO" ref="commitmentMovementDAO" />
		<property name="postingsDAO" ref="postingsDAO" />
		<property name="engineExecutionRIA" ref="engineExecutionRIA" />
		<property name="finContributorDetailDAO" ref="finContributorDetailDAO" />
		<property name="accrualPostingService" ref="accrualPostingService" />
		<property name="financeTypeDAO" ref="financeTypeDAO" />
		<property name="premiumDetailDAO" ref="financePremiumDetailDAO" />
	</bean>

	<bean name="engineExecutionRIA" class="com.pennant.app.util.AccountEngineExecutionRIA">
		<property name="financeMainDAO" ref="financeMainDAO" />
		<property name="financeTypeDAO" ref="financeTypeDAO" />
		<property name="transactionEntryDAO" ref="transactionEntryDAO" />
		<property name="internalAccountDefinitionDAO" ref="systemInternalAccountDefinitionDAO" />
		<property name="ruleDAO" ref="ruleDAO" />
		<property name="customerDAO" ref="customerDAO" />
		<property name="currencyDAO" ref="currencyDAO" />
		<property name="accountInterfaceService" ref="accountInterfaceService" />
		<property name="ruleExecutionUtil" ref="ruleExecutionUtil" />
	</bean>
	
	<bean id="finContributorDetailDAO"
		class="com.pennant.backend.dao.finance.impl.FinContributorDetailDAOImpl" >
		<property name="dataSource" ref="pfsDatasource" />
	</bean>
	
	<bean id="commitmentDAO"
		class="com.pennant.backend.dao.commitment.impl.CommitmentDAOImpl"
		parent="basisCodeDAO">
		<property name="dataSource" ref="pfsDatasource" />
	</bean>

	<bean id="commitmentMovementDAO"
		class="com.pennant.backend.dao.commitment.impl.CommitmentMovementDAOImpl"
		parent="basisCodeDAO">
		<property name="dataSource" ref="pfsDatasource" />
	</bean>
	
	<bean id="accountInterfaceService" class="com.pennant.Interface.service.impl.AccountInterfaceServiceEquationImpl" >
   		<property name="accountDetailProcess" ref="accountDetailProcess" />
   	</bean> 
   	
	<bean id="dailyDownloadInterfaceService" class="com.pennant.Interface.service.impl.DailyDownloadInterfaceServiceImpl" >
   		<property name="dailyDownloadProcess" ref="dailyDownloadProcess" />
   		<property name="coreInterfaceDAO" ref="coreInterfaceDAO" />
   	</bean> 
   	
   	<bean id="postingsInterfaceService" class="com.pennant.Interface.service.impl.PostingsInterfaceServiceEquationImpl" >
   		<property name="accountPostingProcess" ref="accountPostingProcess" />
   	</bean>
   	
   	<bean id="calendarInterfaceService" class="com.pennant.Interface.service.impl.CalendarInterfaceServiceEquationImpl">
		<property name="dateRollOverProcess" ref="dateRollOverProcess" />
		<property name="weekendMasterDAO" ref="weekendMasterDAO" />
		<property name="holidayMasterDAO" ref="holidayMasterDAO" />
	</bean>
	
	<bean id="uploadFinPftDetailService" class="com.pennant.app.eod.service.impl.UploadFinPftDetailServiceImpl">
		<property name="dataSource" ref="pfsDatasource" />
		<property name="uploadProfitDetailProcess" ref="uploadProfitDetailProcess" />
	</bean> 
	
	<bean id="accountDetailProcess" class="com.pennant.equation.service.impl.AccountDetailProcessImpl">
		<property name="hostConnection" ref="hostConnection" />
	</bean>

	<bean id="accountPostingProcess" class="com.pennant.equation.service.impl.AccountPostingProcessImpl">
		<property name="hostConnection" ref="hostConnection" />
	</bean> 
	
	<bean id="dateRollOverProcess" class="com.pennant.equation.service.impl.DateRollOverProcessImpl">
		<property name="hostConnection" ref="hostConnection" />
	</bean>

	<bean id="dailyDownloadProcess" class="com.pennant.equation.service.impl.DailyDownloadProcessImpl">
		<property name="hostConnection" ref="hostConnection" />
	</bean>
		
	<bean id="uploadProfitDetailProcess" class="com.pennant.equation.service.impl.UploadProfitDetailProcessImpl">
		<property name="hostConnection" ref="hostConnection" />
	</bean>
	
	<bean id="hostConnection" class="com.pennant.equation.util.HostConnection" >
		<property name="serverName" value="${pffEquation.ServerName}"/>
		<property name="unitName" value="${pffEquation.UnitName}"/>
		<property name="userName" value="${pffEquation.username}"/>
		<property name="password" value="${pffEquation.password}"/>
	</bean>
	
   	<bean id="coreInterfaceDAO" class="com.pennant.equation.dao.impl.CoreInterfaceDAOImpl">
		<property name="dataSource" ref="pfsDatasource" />
	</bean>
		
	<!-- Account Details -->
	<bean id="accountsDAO" class="com.pennant.backend.dao.accounts.impl.AccountsDAOImpl"
		parent="basisCodeDAO">
		<property name="dataSource" ref="pfsDatasource" />
	</bean>
	
	<bean id="accountTypeDAO"
		class="com.pennant.backend.dao.rmtmasters.impl.AccountTypeDAOImpl"
		parent="basisCodeDAO">
		<property name="dataSource" ref="pfsDatasource" />
	</bean>

	<!-- Account process Util -->
	<bean name="accountProcessUtil" class="com.pennant.app.util.AccountProcessUtil">
		<property name="accountsDAO" ref="accountsDAO" />
		<property name="accountTypeDAO" ref="accountTypeDAO" />
		<property name="internalAccountDefinitionDAO" ref="systemInternalAccountDefinitionDAO" />
	</bean>

	<!-- Transaction Entry -->
	<bean id="transactionEntryDAO"
		class="com.pennant.backend.dao.rmtmasters.impl.TransactionEntryDAOImpl">
		<property name="dataSource" ref="pfsDatasource" />
	</bean>

	<!-- System Internal Account Definition -->
	<bean id="systemInternalAccountDefinitionDAO"
		class="com.pennant.backend.dao.masters.impl.SystemInternalAccountDefinitionDAOImpl"
		parent="basisCodeDAO">
		<property name="dataSource" ref="pfsDatasource" />
	</bean>

	<!-- Rule -->
	<bean id="ruleDAO" class="com.pennant.backend.dao.rulefactory.impl.RuleDAOImpl">
		<property name="dataSource" ref="pfsDatasource" />
	</bean>

	<!-- Customer -->
	<bean id="customerDAO"
		class="com.pennant.backend.dao.customermasters.impl.CustomerDAOImpl">
		<property name="dataSource" ref="pfsDatasource" />
	</bean>

	<!-- Currency -->
	<bean id="currencyDAO"
		class="com.pennant.backend.dao.applicationmaster.impl.CurrencyDAOImpl"
		parent="basisCodeDAO">
		<property name="dataSource" ref="pfsDatasource" />
	</bean>

	<!-- ====================================================== -->
	<!-- Job Specific DAOs -->
	<!-- ====================================================== -->

	<!-- +++++++DATE ROLLOVER ++++++++ -->

	<!-- Holiday Util -->
	<bean id="holidayUtil" class="com.pennant.app.util.HolidayUtil">
		<property name="weekendMasterDAO" ref="weekendMasterDAO" />
		<property name="holidayMasterDAO" ref="holidayMasterDAO" />
	</bean>

	<!-- Weekend Master -->
	<bean id="weekendMasterDAO"
		class="com.pennant.backend.dao.smtmasters.impl.WeekendMasterDAOImpl"
		parent="basisCodeDAO">
		<property name="dataSource" ref="pfsDatasource" />
	</bean>

	<!-- Holiday Master -->
	<bean id="holidayMasterDAO"
		class="com.pennant.backend.dao.smtmasters.impl.HolidayMasterDAOImpl"
		parent="basisCodeDAO">
		<property name="dataSource" ref="pfsDatasource" />
	</bean>

	<!-- +++++++RATE REVIEWS ROLLOVER ++++++++ -->
	<!-- Base Rate -->
	<bean id="baseRateDAO"
		class="com.pennant.backend.dao.applicationmaster.impl.BaseRateDAOImpl"
		parent="basisCodeDAO">
		<property name="dataSource" ref="pfsDatasource" />
	</bean>

	<!-- Special Rate -->
	<bean id="splRateDAO"
		class="com.pennant.backend.dao.applicationmaster.impl.SplRateDAOImpl"
		parent="basisCodeDAO">
		<property name="dataSource" ref="pfsDatasource" />
	</bean>

	<!-- Rate Util -->
	<bean name="RateUtil" class="com.pennant.app.util.RateUtil">
		<property name="baseRateDAO" ref="baseRateDAO" />
		<property name="splRateDAO" ref="splRateDAO" />
	</bean>

	<!-- +++++++REPAYMENT QUEUING & POSTINGS ++++++++ -->
	<!-- Repayment Priority -->
	<bean id="financeRepayPriorityDAO"
		class="com.pennant.backend.dao.finance.impl.FinanceRepayPriorityDAOImpl"
		parent="basisCodeDAO">
		<property name="dataSource" ref="pfsDatasource" />
	</bean>

	<!-- Repay Queue -->
	<bean id="finRepayQueueDAO"
		class="com.pennant.backend.dao.FinRepayQueue.impl.FinRepayQueueDAOImpl"
		parent="basisCodeDAO">
		<property name="dataSource" ref="pfsDatasource" />
	</bean>

	<!-- Finance Repayment -->
	<bean id="financeRepaymentsDAO"
		class="com.pennant.backend.dao.Repayments.impl.FinanceRepaymentsDAOImpl"
		parent="basisCodeDAO">
		<property name="dataSource" ref="pfsDatasource" />
	</bean>

	<!-- Repayment Posting Util -->
	<bean id="repayPostingUtil" class="com.pennant.app.util.RepaymentPostingsUtil">
		<property name="financeScheduleDetailDAO" ref="financeScheduleDetailDAO" />
		<property name="financeRepaymentsDAO" ref="financeRepaymentsDAO" />
		<property name="financeMainDAO" ref="financeMainDAO" />
		<property name="finRepayQueueDAO" ref="finRepayQueueDAO" />
		<property name="defermentDetailDAO" ref="defermentDetailDAO" />
		<property name="finStatusDetailDAO" ref="finStatusDetailDAO" />
		<property name="recoveryPostingsUtil" ref="recoveryPostingsUtil" />
		<property name="suspensePostingUtil" ref="suspensePostingUtil" />
		<property name="customerStatusCodeDAO" ref="customerStatusCodeDAO" />
		<property name="postingsPreparationUtil" ref="postingsPreparationUtil" />
		<property name="customerDAO" ref="customerDAO" />
		<property name="financeSuspHeadDAO" ref="financeSuspHeadDAO" />
	</bean>

	<!-- Suspense Posting util -->
	<bean id="suspensePostingUtil" class="com.pennant.app.util.SuspensePostingUtil">
		<property name="financeScheduleDetailDAO" ref="financeScheduleDetailDAO" />
		<property name="finODDetailsDAO" ref="finODDetailsDAO" />
		<property name="financeSuspHeadDAO" ref="financeSuspHeadDAO" />
		<property name="customerStatusCodeDAO" ref="customerStatusCodeDAO" />
		<property name="postingsPreparationUtil" ref="postingsPreparationUtil" />
	</bean>
	
	<bean id="customerStatusCodeDAO"
		class="com.pennant.backend.dao.applicationmaster.impl.CustomerStatusCodeDAOImpl"
		parent="basisCodeDAO">
		<property name="dataSource" ref="pfsDatasource" />
	</bean>

	<!-- +++++++OVERDUE RECOVERY CALCULATIONS & POSTINGS ++++++++ -->

	<!-- Overdue Charge Recovery -->
	<bean id="overdueChargeRecoveryDAO"
		class="com.pennant.backend.dao.financemanagement.impl.OverdueChargeRecoveryDAOImpl"
		parent="basisCodeDAO">
		<property name="dataSource" ref="pfsDatasource" />
	</bean>

	<!-- Overdue Charge Recovery Posting Util -->
	<bean id="recoveryPostingsUtil" class="com.pennant.app.util.OverDueRecoveryPostingsUtil">
		<property name="financeMainDAO" ref="financeMainDAO" />
		<property name="finODDetailsDAO" ref="finODDetailsDAO" />
		<property name="recoveryDAO" ref="overdueChargeRecoveryDAO" />
		<property name="finODPenaltyRateDAO" ref="finODPenaltyRateDAO" />
		<property name="accountInterfaceService" ref="accountInterfaceService" />
		<property name="postingsPreparationUtil" ref="postingsPreparationUtil" />
	</bean>
	
	<!-- Finance Overdue penalty Rate Details -->

	<bean id="finODPenaltyRateDAO"
		class="com.pennant.backend.dao.finance.impl.FinODPenaltyRateDAOImpl"
		parent="basisCodeDAO">
		<property name="dataSource" ref="pfsDatasource" />
	</bean>

	<!-- +++++++PROVISION CALCULATIONS & POSTINGS ++++++++ -->
	<!-- Provision Details -->
	<bean id="provisionDAO"
		class="com.pennant.backend.dao.financemanagement.impl.ProvisionDAOImpl"
		parent="basisCodeDAO">
		<property name="dataSource" ref="pfsDatasource" />
	</bean>

	<!-- Provision Movement Details -->
	<bean id="provisionMovementDAO"
		class="com.pennant.backend.dao.financemanagement.impl.ProvisionMovementDAOImpl"
		parent="basisCodeDAO">
		<property name="dataSource" ref="pfsDatasource" />
	</bean>

	<!-- Provision Calculation Util -->
	<bean id="provisionCalculationUtil" class="com.pennant.app.util.ProvisionCalculationUtil">
		<property name="financeMainDAO" ref="financeMainDAO" />
		<property name="financeScheduleDetailDAO" ref="financeScheduleDetailDAO" />
		<property name="financeProfitDetailDAO" ref="profitDetailsDAO" />
		<property name="provisionDAO" ref="provisionDAO" />
		<property name="provisionMovementDAO" ref="provisionMovementDAO" />
		<property name="engineExecution" ref="engineExecution" />
		<property name="postingsPreparationUtil" ref="postingsPreparationUtil" />
	</bean>

	<!-- +++++++DISBURSEMENT POSTINGS ++++++++ -->
	<!-- Finance Disbursement Details -->
	<bean id="financeDisbursementDAO"
		class="com.pennant.backend.dao.finance.impl.FinanceDisbursementDAOImpl"
		parent="basisCodeDAO">
		<property name="dataSource" ref="pfsDatasource" />
	</bean>

	<!-- _____________________________________________ TASKLET BEANS _________________________________________ -->
	
	<!-- Backup Data base Before Eod -->
	<bean id="backupDatabaseBeforeEodTaskLet"
		class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
		<property name="transactionManager">
			<ref bean="pfsTransactionManager" />
		</property>
		<property name="target">
			<ref bean="backupDatabaseTargetBeforeEod" />
		</property>
		<property name="transactionAttributes">
			<props>
				<prop key="*">PROPAGATION_NOT_SUPPORTED,readOnly</prop>
			</props>
		</property>
	</bean>
	
	<bean id="backupDatabaseTargetBeforeEod" class="com.pennant.backend.endofday.dbbackup.BackupDatabaseTaskLet">
		<property name="backupDatabase" ref="backupDatabase" />
		<property name="beforeEod" value="true"/>
	</bean>
	
	<!-- Backup Data base After Eod-->
	<bean id="backupDatabaseAfterEodTaskLet"
		class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
		<property name="transactionManager">
			<ref bean="pfsTransactionManager" />
		</property>
		<property name="target">
			<ref bean="backupDatabaseTargetAfterEod" />
		</property>
		<property name="transactionAttributes">
			<props>
				<prop key="*">PROPAGATION_NOT_SUPPORTED,readOnly</prop>
			</props>
		</property>
	</bean>
	
	<bean id="backupDatabaseTargetAfterEod" class="com.pennant.backend.endofday.dbbackup.BackupDatabaseTaskLet">
		<property name="backupDatabase" ref="backupDatabase" />
		<property name="beforeEod" value="false"/>
	</bean>
	
	
	<!-- Calendar Updation -->
	<bean id="calendarUpdationTaskLet"
		class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
		<property name="transactionManager">
			<ref bean="pfsTransactionManager" />
		</property>
		<property name="target">
			<ref bean="calendarUpdationTarget" />
		</property>
		<property name="transactionAttributes">
			<props>
				<prop key="saveOrUpdate*">PROPAGATION_REQUIRED</prop>
				<prop key="delete*">PROPAGATION_REQUIRED</prop>
				<prop key="doApprove*">PROPAGATION_REQUIRED</prop>
				<prop key="doReject*">PROPAGATION_REQUIRED</prop>
				<prop key="*">PROPAGATION_REQUIRED,readOnly</prop>
			</props>
		</property>
	</bean>

	<bean id="calendarUpdationTarget" class="com.pennant.backend.endofday.calendar.CalendarUpdation">
		<property name="calendarInterfaceService" ref="calendarInterfaceService" />
		<property name="accountsDAO" ref="accountsDAO" />
		<property name="dataSource" ref="pfsDatasource" />
	</bean>

	<!-- Profit Rate Reviews  -->
	<bean id="rateReviewCalculationTasklet"
		class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
		<property name="transactionManager">
			<ref bean="pfsTransactionManager" />
		</property>
		<property name="target">
			<ref bean="rateReviewCalculationTarget" />
		</property>
		<property name="transactionAttributes">
			<props>
				<prop key="saveOrUpdate*">PROPAGATION_REQUIRED</prop>
				<prop key="delete*">PROPAGATION_REQUIRED</prop>
				<prop key="doApprove*">PROPAGATION_REQUIRED</prop>
				<prop key="doReject*">PROPAGATION_REQUIRED</prop>
				<prop key="*">PROPAGATION_REQUIRED,readOnly</prop>
			</props>
		</property>
	</bean>

	<bean id="rateReviewCalculationTarget" class="com.pennant.backend.endofday.ratereview.RateReview">
		<property name="financeMainDAO" ref="financeMainDAO" />
		<property name="financeScheduleDetailDAO" ref="financeScheduleDetailDAO" />
		<property name="repayInstructionDAO" ref="repayInstructionDAO" />
		<property name="financeDisbursementDAO" ref="financeDisbursementDAO" />
		<property name="finLogEntryDetailDAO" ref="finLogEntryDetailDAO" />
		<property name="defermentDetailDAO" ref="defermentDetailDAO" />
		<property name="defermentHeaderDAO" ref="defermentHeaderDAO" />
		<property name="financeTypeDAO" ref="financeTypeDAO" />
		<property name="financeProfitDetailDAO" ref="profitDetailsDAO" />
		<property name="financeProfitDetailFiller" ref="financeProfitDetailFiller" />
		<property name="postingsPreparationUtil" ref="postingsPreparationUtil" />
		<property name="dataSource" ref="pfsDatasource" />
	</bean>

	<!-- Profit Rate Change Postings  -->
	<bean id="refreshRateChangesTasklet"
		class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
		<property name="transactionManager">
			<ref bean="pfsTransactionManager" />
		</property>
		<property name="target">
			<ref bean="refreshRateChangesTarget" />
		</property>
		<property name="transactionAttributes">
			<props>
				<prop key="saveOrUpdate*">PROPAGATION_REQUIRED</prop>
				<prop key="delete*">PROPAGATION_REQUIRED</prop>
				<prop key="doApprove*">PROPAGATION_REQUIRED</prop>
				<prop key="doReject*">PROPAGATION_REQUIRED</prop>
				<prop key="*">PROPAGATION_REQUIRED,readOnly</prop>
			</props>
		</property>
	</bean>

	<bean id="refreshRateChangesTarget"
		class="com.pennant.backend.endofday.ratereview.RefreshRateChanges">
		<property name="financeMainDAO" ref="financeMainDAO" />
		<property name="financeScheduleDetailDAO" ref="financeScheduleDetailDAO" />
		<property name="repayInstructionDAO" ref="repayInstructionDAO" />
		<property name="financeDisbursementDAO" ref="financeDisbursementDAO" />
		<property name="finLogEntryDetailDAO" ref="finLogEntryDetailDAO" />
		<property name="defermentDetailDAO" ref="defermentDetailDAO" />
		<property name="defermentHeaderDAO" ref="defermentHeaderDAO" />
		<property name="financeTypeDAO" ref="financeTypeDAO" />
		<property name="financeProfitDetailDAO" ref="profitDetailsDAO" />
		<property name="financeProfitDetailFiller" ref="financeProfitDetailFiller" />
		<property name="postingsPreparationUtil" ref="postingsPreparationUtil" />
		<property name="dataSource" ref="pfsDatasource" />
	</bean>

	<!-- Capitalization Postings  -->
	<bean id="capitalizationPostingsTasklet"
		class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
		<property name="transactionManager">
			<ref bean="pfsTransactionManager" />
		</property>
		<property name="target">
			<ref bean="capitalizationPostingsTarget" />
		</property>
		<property name="transactionAttributes">
			<props>
				<prop key="saveOrUpdate*">PROPAGATION_REQUIRED</prop>
				<prop key="delete*">PROPAGATION_REQUIRED</prop>
				<prop key="doApprove*">PROPAGATION_REQUIRED</prop>
				<prop key="doReject*">PROPAGATION_REQUIRED</prop>
				<prop key="*">PROPAGATION_REQUIRED,readOnly</prop>
			</props>
		</property>
	</bean>

	<bean id="capitalizationPostingsTarget"
		class="com.pennant.backend.endofday.capitalization.CapitalizationPostings">
		<property name="financeProfitDetailDAO" ref="profitDetailsDAO" />
		<property name="postingsPreparationUtil" ref="postingsPreparationUtil" />
		<property name="suspensePostingUtil" ref="suspensePostingUtil" />
		<property name="dataSource" ref="pfsDatasource" />
	</bean>

	<!-- Repayments Queuing -->
	<bean id="repayQueueTasklet"
		class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
		<property name="transactionManager">
			<ref bean="pfsTransactionManager" />
		</property>
		<property name="target">
			<ref bean="repayQueueCalculationTarget" />
		</property>
		<property name="transactionAttributes">
			<props>
				<prop key="saveOrUpdate*">PROPAGATION_REQUIRED</prop>
				<prop key="delete*">PROPAGATION_REQUIRED</prop>
				<prop key="doApprove*">PROPAGATION_REQUIRED</prop>
				<prop key="doReject*">PROPAGATION_REQUIRED</prop>
				<prop key="*">PROPAGATION_REQUIRED,readOnly</prop>
			</props>
		</property>
	</bean>

	<bean id="repayQueueCalculationTarget"
		class="com.pennant.backend.endofday.repayqueue.RepayQueueCalculation">
		<property name="financeRepayPriorityDAO" ref="financeRepayPriorityDAO" />
		<property name="finRepayQueueDAO" ref="finRepayQueueDAO" />
		<property name="dataSource" ref="pfsDatasource" />
	</bean>

	<!-- Repayment Postings -->
	<bean id="repayQueuePostingsTasklet"
		class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
		<property name="transactionManager">
			<ref bean="pfsTransactionManager" />
		</property>
		<property name="target">
			<ref bean="repayQueuePostingsTarget" />
		</property>
		<property name="transactionAttributes">
			<props>
				<prop key="saveOrUpdate*">PROPAGATION_REQUIRED</prop>
				<prop key="delete*">PROPAGATION_REQUIRED</prop>
				<prop key="doApprove*">PROPAGATION_REQUIRED</prop>
				<prop key="doReject*">PROPAGATION_REQUIRED</prop>
				<prop key="*">PROPAGATION_REQUIRED,readOnly</prop>
			</props>
		</property>
	</bean>

	<bean id="repayQueuePostingsTarget"
		class="com.pennant.backend.endofday.repayqueue.RepayQueuePostings">
		<property name="profitDetailDAO" ref="profitDetailsDAO" />
		<property name="financeMainDAO" ref="financeMainDAO" />
		<property name="financeScheduleDetailDAO" ref="financeScheduleDetailDAO" />
		<property name="finStatusDetailDAO" ref="finStatusDetailDAO" />
		<property name="customerStatusCodeDAO" ref="customerStatusCodeDAO" />
		<property name="postingsUtil" ref="repayPostingUtil" />
		<property name="recoveryPostingsUtil" ref="recoveryPostingsUtil" />
		<property name="accountInterfaceService" ref="accountInterfaceService" />
		<property name="suspensePostingUtil" ref="suspensePostingUtil" />
		<property name="finODDetailsDAO" ref="finODDetailsDAO" />
		<property name="financeSuspHeadDAO" ref="financeSuspHeadDAO" />
		<property name="finLogEntryDetailDAO" ref="finLogEntryDetailDAO" />
		<property name="finRepayQueueDAO" ref="finRepayQueueDAO" />
		<property name="dataSource" ref="pfsDatasource" />
	</bean>

	<!-- Amortization Calculation -->
	<bean id="amortizationTasklet"
		class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
		<property name="transactionManager">
			<ref bean="pfsTransactionManager" />
		</property>
		<property name="target">
			<ref bean="amortizationTarget" />
		</property>
		<property name="transactionAttributes">
			<props>
				<prop key="saveOrUpdate*">PROPAGATION_REQUIRED</prop>
				<prop key="delete*">PROPAGATION_REQUIRED</prop>
				<prop key="doApprove*">PROPAGATION_REQUIRED</prop>
				<prop key="doReject*">PROPAGATION_REQUIRED</prop>
				<prop key="doAccrualCalculation*">PROPAGATION_REQUIRED</prop>
				<prop key="*">PROPAGATION_REQUIRED,readOnly</prop>
			</props>
		</property>
	</bean>

	<bean id="amortizationTarget"
		class="com.pennant.backend.endofday.amortization.AmortizationCalculation">
		<property name="amortizationService" ref="amortizationService" />
	</bean>

	<!-- Amortization Postings -->
	<bean id="amortizationPostingsTasklet"
		class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
		<property name="transactionManager">
			<ref bean="pfsTransactionManager" />
		</property>
		<property name="target">
			<ref bean="amortizationPostingsTarget" />
		</property>
		<property name="transactionAttributes">
			<props>
				<prop key="saveOrUpdate*">PROPAGATION_REQUIRED</prop>
				<prop key="delete*">PROPAGATION_REQUIRED</prop>
				<prop key="doApprove*">PROPAGATION_REQUIRED</prop>
				<prop key="doReject*">PROPAGATION_REQUIRED</prop>
				<prop key="doAccrualPosting*">PROPAGATION_REQUIRED</prop>
				<prop key="*">PROPAGATION_REQUIRED,readOnly</prop>
			</props>
		</property>
	</bean>

	<bean id="amortizationPostingsTarget" class="com.pennant.backend.endofday.amortization.AmortizationPostings">
		<property name="amortizationService" ref="amortizationService" />
	</bean>

	<!-- Provision Calculations TBD -->
	<bean id="provisionCalculationTasklet"
		class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
		<property name="transactionManager">
			<ref bean="pfsTransactionManager" />
		</property>
		<property name="target">
			<ref bean="provisionCalculationTarget" />
		</property>
		<property name="transactionAttributes">
			<props>
				<prop key="saveOrUpdate*">PROPAGATION_REQUIRED</prop>
				<prop key="delete*">PROPAGATION_REQUIRED</prop>
				<prop key="doApprove*">PROPAGATION_REQUIRED</prop>
				<prop key="doReject*">PROPAGATION_REQUIRED</prop>
				<prop key="*">PROPAGATION_REQUIRED,readOnly</prop>
			</props>
		</property>
	</bean>

	<bean id="provisionCalculationTarget"
		class="com.pennant.backend.endofday.provision.ProvisionCalculation">
		<property name="provisionCalculationUtil" ref="provisionCalculationUtil" />
		<property name="dataSource" ref="pfsDatasource" />
	</bean>

	<!-- Provisions Postings TBD -->
	<bean id="provisionPostingsTasklet"
		class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
		<property name="transactionManager">
			<ref bean="pfsTransactionManager" />
		</property>
		<property name="target">
			<ref bean="provisionPostingsTarget" />
		</property>
		<property name="transactionAttributes">
			<props>
				<prop key="saveOrUpdate*">PROPAGATION_REQUIRED</prop>
				<prop key="delete*">PROPAGATION_REQUIRED</prop>
				<prop key="doApprove*">PROPAGATION_REQUIRED</prop>
				<prop key="doReject*">PROPAGATION_REQUIRED</prop>
				<prop key="*">PROPAGATION_REQUIRED,readOnly</prop>
			</props>
		</property>
	</bean>

	<bean id="provisionPostingsTarget"
		class="com.pennant.backend.endofday.provision.ProvisionPostings">
		<property name="financeMainDAO" ref="financeMainDAO" />
		<property name="financeScheduleDetailDAO" ref="financeScheduleDetailDAO" />
		<property name="financeProfitDetailDAO" ref="profitDetailsDAO" />
		<property name="postingsPreparationUtil" ref="postingsPreparationUtil" />
		<property name="provisionDAO" ref="provisionDAO" />
		<property name="provisionMovementDAO" ref="provisionMovementDAO" />
		<property name="dataSource" ref="pfsDatasource" />
	</bean>

	<!-- Deprecation Postings -->
	<bean id="depreciationPostingsTasklet"
		class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
		<property name="transactionManager">
			<ref bean="pfsTransactionManager" />
		</property>
		<property name="target">
			<ref bean="depreciationPostingsTarget" />
		</property>
		<property name="transactionAttributes">
			<props>
				<prop key="saveOrUpdate*">PROPAGATION_REQUIRED</prop>
				<prop key="delete*">PROPAGATION_REQUIRED</prop>
				<prop key="doApprove*">PROPAGATION_REQUIRED</prop>
				<prop key="doReject*">PROPAGATION_REQUIRED</prop>
				<prop key="*">PROPAGATION_REQUIRED,readOnly</prop>
			</props>
		</property>
	</bean>

	<bean id="depreciationPostingsTarget"
		class="com.pennant.backend.endofday.depreciation.DepreciationPostings">
		<property name="postingsPreparationUtil" ref="postingsPreparationUtil" />
		<property name="dataSource" ref="pfsDatasource" />
	</bean>
	
	<!-- Date Rollovers for Finance  -->
	<bean id="dateRollOverTasklet"
		class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
		<property name="transactionManager">
			<ref bean="pfsTransactionManager" />
		</property>
		<property name="target">
			<ref bean="dateRollOverTarget" />
		</property>
		<property name="transactionAttributes">
			<props>
				<prop key="saveOrUpdate*">PROPAGATION_REQUIRED</prop>
				<prop key="delete*">PROPAGATION_REQUIRED</prop>
				<prop key="doApprove*">PROPAGATION_REQUIRED</prop>
				<prop key="doReject*">PROPAGATION_REQUIRED</prop>
				<prop key="*">PROPAGATION_REQUIRED,readOnly</prop>
			</props>
		</property>
	</bean>

	<bean id="dateRollOverTarget" class="com.pennant.backend.endofday.daterollover.DateRollOver">
		<property name="dataSource" ref="pfsDatasource" />
	</bean>

	<!-- Disbursement Postings  -->
	<bean id="dibursementPostingsTasklet"
		class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
		<property name="transactionManager">
			<ref bean="pfsTransactionManager" />
		</property>
		<property name="target">
			<ref bean="dibursementPostingsTarget" />
		</property>
		<property name="transactionAttributes">
			<props>
				<prop key="saveOrUpdate*">PROPAGATION_REQUIRED</prop>
				<prop key="delete*">PROPAGATION_REQUIRED</prop>
				<prop key="doApprove*">PROPAGATION_REQUIRED</prop>
				<prop key="doReject*">PROPAGATION_REQUIRED</prop>
				<prop key="*">PROPAGATION_REQUIRED,readOnly</prop>
			</props>
		</property>
	</bean>

	<bean id="dibursementPostingsTarget"
		class="com.pennant.backend.endofday.disbursement.DisbursementPostings">
		<property name="financeMainDAO" ref="financeMainDAO" />
		<property name="financeScheduleDetailDAO" ref="financeScheduleDetailDAO" />
		<property name="financeProfitDetailDAO" ref="profitDetailsDAO" />
		<property name="financeDisbursementDAO" ref="financeDisbursementDAO" />
		<property name="postingsPreparationUtil" ref="postingsPreparationUtil" />
		<property name="dataSource" ref="pfsDatasource" />
	</bean>
	
	<!-- Commencement Postings  -->
	<bean id="commencementPostingsTasklet"
		class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
		<property name="transactionManager">
			<ref bean="pfsTransactionManager" />
		</property>
		<property name="target">
			<ref bean="commencementPostingsTarget" />
		</property>
		<property name="transactionAttributes">
			<props>
				<prop key="saveOrUpdate*">PROPAGATION_REQUIRED</prop>
				<prop key="delete*">PROPAGATION_REQUIRED</prop>
				<prop key="doApprove*">PROPAGATION_REQUIRED</prop>
				<prop key="doReject*">PROPAGATION_REQUIRED</prop>
				<prop key="*">PROPAGATION_REQUIRED,readOnly</prop>
			</props>
		</property>
	</bean>

	<bean id="commencementPostingsTarget"
		class="com.pennant.backend.endofday.commencement.CommencementPostings">
		<property name="financeMainDAO" ref="financeMainDAO" />
		<property name="financeScheduleDetailDAO" ref="financeScheduleDetailDAO" />
		<property name="financeProfitDetailDAO" ref="profitDetailsDAO" />
		<property name="postingsPreparationUtil" ref="postingsPreparationUtil" />
		<property name="dataSource" ref="pfsDatasource" />
	</bean>
	
	<!-- Value Date Updation -->
	<bean id="valueDateUpdationTasklet"
		class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
		<property name="transactionManager">
			<ref bean="pfsTransactionManager" />
		</property>
		<property name="target">
			<ref bean="valueDateUpdationTarget" />
		</property>
		<property name="transactionAttributes">
			<props>
				<prop key="saveOrUpdate*">PROPAGATION_REQUIRED</prop>
				<prop key="delete*">PROPAGATION_REQUIRED</prop>
				<prop key="doApprove*">PROPAGATION_REQUIRED</prop>
				<prop key="doReject*">PROPAGATION_REQUIRED</prop>
				<prop key="*">PROPAGATION_REQUIRED,readOnly</prop>
			</props>
		</property>
	</bean>

	<bean id="valueDateUpdationTarget" class="com.pennant.backend.endofday.limitdecider.ValueDateUpdation">
		<property name="dataSource" ref="pfsDatasource" />
	</bean>

	<!-- Loop Limit Decider -->
	<bean id="limitDecider"
		class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
		<property name="transactionManager">
			<ref bean="pfsTransactionManager" />
		</property>
		<property name="target">
			<ref bean="limitDeciderTarget" />
		</property>
		<property name="transactionAttributes">
			<props>
				<prop key="saveOrUpdate*">PROPAGATION_REQUIRED</prop>
				<prop key="delete*">PROPAGATION_REQUIRED</prop>
				<prop key="doApprove*">PROPAGATION_REQUIRED</prop>
				<prop key="doReject*">PROPAGATION_REQUIRED</prop>
				<prop key="*">PROPAGATION_REQUIRED,readOnly</prop>
			</props>
		</property>
	</bean>

	<bean id="limitDeciderTarget" class="com.pennant.backend.endofday.limitdecider.LimitDecider">
		<property name="hostConnection" ref="hostConnection" />
		<property name="dataSource" ref="pfsDatasource" />
	</bean>
	
	<!-- Upload profit details  -->
	<bean id="uploadPftDetailTasklet"
		class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
		<property name="transactionManager">
			<ref bean="pfsTransactionManager" />
		</property>
		<property name="target">
			<ref bean="uploadPftDetailTarget" />
		</property>
		<property name="transactionAttributes">
			<props>
				<prop key="doUploadPftDetails*">PROPAGATION_REQUIRED</prop>
				<prop key="*">PROPAGATION_REQUIRED,readOnly</prop>
			</props>
		</property>
	</bean>

	<bean id="uploadPftDetailTarget" class="com.pennant.backend.endofday.uploadprofitdetails.UploadFinProfitDetails">
		<property name="uploadFinPftDetailService" ref="uploadFinPftDetailService" />
	</bean>
	
	<bean id="amortizationService" class="com.pennant.app.eod.service.impl.AmortizationServiceImpl">
		<property name="dataSource" ref="pfsDatasource" />
		<property name="financeMainDAO" ref="financeMainDAO" />
		<property name="financeScheduleDetailDAO" ref="financeScheduleDetailDAO" />
		<property name="financeProfitDetailFiller" ref="financeProfitDetailFiller" />
		<property name="financeProfitDetailDAO" ref="profitDetailsDAO" />
		<property name="financeSuspHeadDAO" ref="financeSuspHeadDAO" />
		<property name="engineExecution" ref="engineExecution" />
		<property name="engineExecutionRIA" ref="engineExecutionRIA" />
		<property name="customerStatusCodeDAO" ref="customerStatusCodeDAO" />
		<property name="postingsPreparationUtil" ref="postingsPreparationUtil" />
	</bean>
	
	<!-- Overdue Details Daily Download  -->
	<bean id="oDDetailDownloadTasklet"
		class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
		<property name="transactionManager">
			<ref bean="pfsTransactionManager" />
		</property>
		<property name="target">
			<ref bean="oDDetailTarget" />
		</property>
		<property name="transactionAttributes">
			<props>
				<prop key="*">PROPAGATION_REQUIRED</prop>
			</props>
		</property>
	</bean>
	
	<bean id="oDDetailTarget" class="com.pennant.backend.endofday.oddetail.ODDetailDownload">
		<property name="dataSource" ref="pfsDatasource" />
	</bean>
	
	<!-- Commitment Expiry Details Updation  -->
	<bean id="commitmentExpiryProcessTasklet"
		class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
		<property name="transactionManager">
			<ref bean="pfsTransactionManager" />
		</property>
		<property name="target">
			<ref bean="commitmentExpiryProcessTarget" />
		</property>
		<property name="transactionAttributes">
			<props>
				<prop key="*">PROPAGATION_REQUIRED</prop>
			</props>
		</property>
	</bean>
	
	<bean id="commitmentExpiryProcessTarget" class="com.pennant.backend.endofday.commitment.CommitmentExpiryProcess">
		<property name="dataSource" ref="pfsDatasource" />
	</bean>
	
	<!-- Daily Download Details Updation  -->
	<bean id="dailyDownloadProcessTasklet"
		class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
		<property name="transactionManager">
			<ref bean="pfsTransactionManager" />
		</property>
		<property name="target">
			<ref bean="dailyDownloadProcessTarget" />
		</property>
		<property name="transactionAttributes">
			<props>
				<prop key="*">PROPAGATION_REQUIRED</prop>
			</props>
		</property>
	</bean>
	
	<bean id="dailyDownloadProcessTarget" class="com.pennant.backend.endofday.dailydownload.DailyDownloadProcess">
		<property name="dailyDownloadInterfaceService" ref="dailyDownloadInterfaceService" />
	</bean>
	
	<!-- Remove Finance Maintenance Details  -->
	<bean id="removeMaintenanceProcessTasklet"
		class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
		<property name="transactionManager">
			<ref bean="pfsTransactionManager" />
		</property>
		<property name="target">
			<ref bean="removeMaintenanceProcessTarget" />
		</property>
		<property name="transactionAttributes">
			<props>
				<prop key="*">PROPAGATION_REQUIRED</prop>
			</props>
		</property>
	</bean>
	
	<bean id="removeMaintenanceProcessTarget" class="com.pennant.backend.endofday.maintenance.RemoveMaintenanceProcess">
		<property name="dataSource" ref="pfsDatasource" />
	</bean>
	
	<bean id="eodJobListener" class="com.pennant.backend.batch.listeners.EodJobListener">
		<property name="eodProperties" ref="eodProperties" />
	</bean>

 <!-- Audit Data Purging  -->
	<bean id="auditDataPurgingTaskLet"
		class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
		<property name="transactionManager">
			<ref bean="pfsTransactionManager" />
		</property>
		<property name="target">
			<ref bean="auditDataPurgingTarget" />
		</property>
		<property name="transactionAttributes">
			<props>
				<prop key="*">PROPAGATION_NOT_SUPPORTED,readOnly</prop>
			</props>
		</property>
	</bean>
	
	<bean id="auditDataPurgingTarget" class="com.pennant.backend.endofday.auditdatadeletion.AuditDataPurgingTaskLet">
		<property name="dataPurgingProcess" ref="dataPurgingProcess" />
	</bean>

	<!--  End Of Month Decider -->
	<bean id="eodBackupDecider" class="com.pennant.backend.endofday.limitdecider.EodBackupDecider"/>

	<!--  End Of Month Decider -->
	<bean id="endOfMonthDecider" class="com.pennant.backend.endofday.limitdecider.EndOfMonthDecider"/>

    <!-- Audit data Purging -->
	<bean id="dataPurgingProcess" class="com.pennant.eod.util.DataPurgingProcess">
		<property name="dataSource" ref="pfsDatasource" />
	</bean>


	<bean id="PFSJobParametersIncrementer" class="com.pennant.backend.endofday.jobparameter.PFSJobParametersIncrementer"/>
	<!-- _____________________________________________ JOB FLOW DEFINITION _________________________________________ -->
	<!-- The job definition for the PLF End of Day -->
	<job id="equationEodJob" xmlns="http://www.springframework.org/schema/batch" incrementer="PFSJobParametersIncrementer">
	
		<listeners>
			<listener ref="eodJobListener"/>
		</listeners>
		
		<!-- Eod Database Backup Decision -->
		<decision id="databaseBackupBeforeEodDecision" decider="eodBackupDecider">
			<next on="UNKNOWN" to="databaseBackupBeforEod" />
			<next on="*" to="calendarUpdation" />
			<fail on="FAILED"/>
		</decision>
		
		<!-- database backup Before EOD Process Start -->
		<step id="databaseBackupBeforEod">
			<tasklet ref="backupDatabaseBeforeEodTaskLet" />
			<next on="*" to="calendarUpdation" />
			<fail on="FAILED"/>
		</step>

		<!-- Calendar Updation From Equation Core System -->
		<step id="calendarUpdation">
			<tasklet ref="calendarUpdationTaskLet" />
			<next on="*" to="removeMaintenance" />
			<fail on="FAILED"/>
		</step>

		<!-- Remove Maintenance Details -->
		<step id="removeMaintenance">
			<tasklet ref="removeMaintenanceProcessTasklet" />
			<next on="*" to="dailyDownload" />
			<fail on="FAILED"/>
		</step>
		
		<!-- Daily Download Details -->
		<step id="dailyDownload">
			<tasklet ref="dailyDownloadProcessTasklet" />
			<next on="*" to="refreshRateChanges" />
			<fail on="FAILED"/>
		</step>
		
		<!-- Profit Rate Change Postings -->
		<step id="refreshRateChanges">
			<tasklet ref="refreshRateChangesTasklet" />
			<next on="*" to="capitalizationPostings" />
			<fail on="FAILED"/>
		</step>

		<!-- Capitalization Postings -->
		<step id="capitalizationPostings">
			<tasklet ref="capitalizationPostingsTasklet" />
			<next on="*" to="repayQueueCalculation" />
			<fail on="FAILED"/>
		</step>

		<!-- Schedule Repayments Queuing -->
		<step id="repayQueueCalculation">
			<tasklet ref="repayQueueTasklet" />
			<next on="*" to="repayQueuePostings" />
			<fail on="FAILED"/>
		</step>

		<!-- Schedule Repayment Postings -->
		<step id="repayQueuePostings">
			<tasklet ref="repayQueuePostingsTasklet" />
			<next on="*" to="amortizationCalculation" />
			<fail on="FAILED"/>
		</step>

		<!-- Amortization Calculation -->
		<step id="amortizationCalculation">
			<tasklet ref="amortizationTasklet" />
			<next on="*" to="amortizationPostings" />
			<fail on="FAILED"/>
		</step>

		<!-- Amortization Postings -->
		<step id="amortizationPostings">
			<tasklet ref="amortizationPostingsTasklet" />
			<next on="*" to="uploadPftDetails" />
			<fail on="FAILED"/>
		</step>
		
		<!-- Upload Profit Details -->
		<step id="uploadPftDetails">
			<tasklet ref="uploadPftDetailTasklet" />
			<next on="*" to="provisionCalculation" />
			<fail on="FAILED"/>
		</step>

		<!-- Provision Calculations -->
		<step id="provisionCalculation">
			<tasklet ref="provisionCalculationTasklet" />
			<next on="*" to="provisionPostings" />
			<fail on="FAILED"/>
		</step>

		<!-- Provisions Postings -->
		<step id="provisionPostings">
			<tasklet ref="provisionPostingsTasklet" />
			<next on="*" to="depreciationPostingsDecision" />
			<fail on="FAILED"/>
		</step>

		<!-- End Of Month Decision For Depreciation Postings -->
		<decision id="depreciationPostingsDecision" decider="endOfMonthDecider">
			<next on="EndOfMonth" to="depreciationPostings" />
			<next on="NotEndOfMonth" to="dibursementPostings" />
			<fail on="FAILED"/>
		</decision>

		<!-- Depreciation Calculation -->
		<step id="depreciationPostings">
			<tasklet ref="depreciationPostingsTasklet" />
			<next on="*" to="dibursementPostings" />
			<fail on="FAILED"/>
		</step>

		<!-- Disbursement Postings -->
		<step id="dibursementPostings">
			<tasklet ref="dibursementPostingsTasklet" />
			<next on="*" to="auditPurgingDecision" />
			<fail on="FAILED"/>
		</step>
		
		<!-- End Of Month Decision For Audit Data Purging-->
		<decision id="auditPurgingDecision" decider="endOfMonthDecider">
			<next on="EndOfMonth" to="auditDataPurging" />
			<next on="NotEndOfMonth" to="valueDateUpdation" />
			<fail on="FAILED"/>
		</decision>

		<!-- Audit Data Purging -->
		<step id="auditDataPurging">
			<tasklet ref="auditDataPurgingTaskLet" />
			<next on="*" to="valueDateUpdation" />
			<fail on="FAILED"/>
		</step>
		
		
		<!-- Value Date Updation -->
		<step id="valueDateUpdation">
			<tasklet ref="valueDateUpdationTasklet" />
			<next on="*" to="commencementPostings" />
			<fail on="FAILED"/>
		</step>
		
		<!-- Commencement Postings -->
		<step id="commencementPostings">
			<tasklet ref="commencementPostingsTasklet" />
			<next on="*" to="rateReviewCalculation" />
			<fail on="FAILED"/>
		</step>
		
		<!-- Profit Rate Reviews -->
		<step id="rateReviewCalculation">
			<tasklet ref="rateReviewCalculationTasklet" />
			<next on="*" to="dateRollOver" />
			<fail on="FAILED"/>
		</step>

		<!-- Date Rollovers for Finance -->
		<step id="dateRollOver">
			<tasklet ref="dateRollOverTasklet" />
			<next on="*" to="oDDetailDownload" />
			<fail on="FAILED"/>
		</step>

		<!-- ODDetails Daily Downlaod for Finance -->
		<step id="oDDetailDownload">
			<tasklet ref="oDDetailDownloadTasklet" />
			<next on="*" to="commitmentExpiry" />
			<fail on="FAILED"/>
		</step>
		
		<!-- ODDetails Daily Downlaod for Finance -->
		<step id="commitmentExpiry">
			<tasklet ref="commitmentExpiryProcessTasklet" />
			<next on="*" to="limitDecision" />
			<fail on="FAILED"/>
		</step>
		
		
		<!-- Limit Decision For loop -->
		<decision id="limitDecision" decider="limitDecider">
			<next on="UNKNOWN" to="refreshRateChanges" />
			<next on="*" to="databaseBackupAfterEodDecision" />
			<fail on="FAILED"/>
		</decision>
		
		<!-- Eod Database Backup Decision -->
		<decision id="databaseBackupAfterEodDecision" decider="eodBackupDecider">
			<next on="UNKNOWN" to="databaseBackupAfterEod" />
			<end on="COMPLETED" exit-code="COMPLETED"/>
			<fail on="FAILED"/>
		</decision>
		
		<!-- database backup After Batch Execution-->
		<step id="databaseBackupAfterEod">
			<tasklet ref="backupDatabaseAfterEodTaskLet" />
			<end on="COMPLETED" exit-code="COMPLETED" />
			<fail on="FAILED"/>
		</step>

	</job>

</beans>